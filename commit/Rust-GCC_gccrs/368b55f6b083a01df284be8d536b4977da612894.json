{"sha": "368b55f6b083a01df284be8d536b4977da612894", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzY4YjU1ZjZiMDgzYTAxZGYyODRiZThkNTM2YjQ5NzdkYTYxMjg5NA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2008-07-07T11:14:37Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2008-07-07T11:14:37Z"}, "message": "config.gcc (m68k-*-linux*): Add with_arch.\n\n\t* config.gcc (m68k-*-linux*): Add with_arch.  Add sysroot-suffix.h\n\tto tm_file.  Add m68k/t-floatlib, m68k/t-linux & m68k/t-mlibs to\n\ttmake_file.\n\t* config/m68k/t-linux: New.\n\t* doc/install.texi: Document m68k-*-linux is now multilibbed by\n\tdefault.\n\nFrom-SVN: r137557", "tree": {"sha": "517b07dfb6608aca5b2c97cf3af88c2112bd2263", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/517b07dfb6608aca5b2c97cf3af88c2112bd2263"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/368b55f6b083a01df284be8d536b4977da612894", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/368b55f6b083a01df284be8d536b4977da612894", "html_url": "https://github.com/Rust-GCC/gccrs/commit/368b55f6b083a01df284be8d536b4977da612894", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/368b55f6b083a01df284be8d536b4977da612894/comments", "author": null, "committer": null, "parents": [{"sha": "b2aa7a643731875539bdee8150e9c02c5a0dea44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2aa7a643731875539bdee8150e9c02c5a0dea44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2aa7a643731875539bdee8150e9c02c5a0dea44"}], "stats": {"total": 39, "additions": 35, "deletions": 4}, "files": [{"sha": "a8b6c4a119e96c25b42233a9e8a93d19ed17f11c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/368b55f6b083a01df284be8d536b4977da612894/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/368b55f6b083a01df284be8d536b4977da612894/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=368b55f6b083a01df284be8d536b4977da612894", "patch": "@@ -1,3 +1,19 @@\n+2008-07-07  Maxim Kuvyrkov  <maxim@codesourcery.com>\n+\t    Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* config.gcc (m68k-*-linux*): Add with_arch.  Add sysroot-suffix.h\n+\tto tm_file.  Add m68k/t-floatlib, m68k/t-linux & m68k/t-mlibs to\n+\ttmake_file.\n+\t* config/m68k/t-linux: New.\n+\t* doc/install.texi: Document m68k-*-linux is now multilibbed by\n+\tdefault.\n+\n+2008-07-07  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* config/m68k/t-cf (MULTILIB_EXTRA_OPTS): Add no-mac.\n+\t* config/m68k/m68k-devices.def: Remove multilibs that only differ\n+\tby MAC/EMAC.\n+\n 2008-07-06  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* gcc.c (execute): Fix -Wc++-compat warning."}, {"sha": "e73223b9b3280109cd6fb37d0d2ed38f1a1661ef", "filename": "gcc/config.gcc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/368b55f6b083a01df284be8d536b4977da612894/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/368b55f6b083a01df284be8d536b4977da612894/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=368b55f6b083a01df284be8d536b4977da612894", "patch": "@@ -1459,9 +1459,11 @@ m68k-*-linux*)\t\t# Motorola m68k's running GNU/Linux\n \t\t\t\t# aka the GNU/Linux C library 6.\n \tdefault_m68k_cpu=68020\n \tdefault_cf_cpu=5475\n-\ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h linux.h m68k/linux.h\"\n+\twith_arch=${with_arch:-m68k}\n+\ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h linux.h m68k/linux.h ./sysroot-suffix.h\"\n \textra_options=\"${extra_options} m68k/ieee.opt\"\n \ttm_defines=\"${tm_defines} MOTOROLA=1\"\n+\ttmake_file=\"${tmake_file} m68k/t-floatlib m68k/t-linux m68k/t-mlibs\"\n \t# if not configured with --enable-sjlj-exceptions, bump the\n \t# libgcc version number\n \tif test x$sjlj != x1; then"}, {"sha": "f46d3a873d5b79037ef70999e30c1cb16ec7f041", "filename": "gcc/config/m68k/t-linux", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/368b55f6b083a01df284be8d536b4977da612894/gcc%2Fconfig%2Fm68k%2Ft-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/368b55f6b083a01df284be8d536b4977da612894/gcc%2Fconfig%2Fm68k%2Ft-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Ft-linux?ref=368b55f6b083a01df284be8d536b4977da612894", "patch": "@@ -0,0 +1,11 @@\n+EXTRA_MULTILIB_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o crtbeginT.o\n+\n+# Only include multilibs for CPUs with an MMU.\n+M68K_MLIB_CPU += && match(FLAGS, \"FL_MMU\")\n+\n+# This rule uses MULTILIB_MATCHES to generate a definition of\n+# SYSROOT_SUFFIX_SPEC.\n+sysroot-suffix.h: $(srcdir)/config/m68k/print-sysroot-suffix.sh\n+\t$(SHELL) $(srcdir)/config/m68k/print-sysroot-suffix.sh \\\n+\t  \"$(SYSTEM_HEADER_DIR)/../..\" \"$(MULTILIB_MATCHES)\" \\\n+\t  \"$(MULTILIB_OPTIONS)\" > $@"}, {"sha": "8913ec0c9234f2e9d4a8e0a988a55e57e523416d", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/368b55f6b083a01df284be8d536b4977da612894/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/368b55f6b083a01df284be8d536b4977da612894/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=368b55f6b083a01df284be8d536b4977da612894", "patch": "@@ -3427,15 +3427,17 @@ applications.  There are no standard Unix configurations.\n @end html\n @heading @anchor{m68k-x-x}m68k-*-*\n By default, @samp{m68k-*-aout}, @samp{m68k-*-coff*},\n-@samp{m68k-*-elf*}, @samp{m68k-*-rtems} and @samp{m68k-*-uclinux}\n+@samp{m68k-*-elf*}, @samp{m68k-*-rtems},  @samp{m68k-*-uclinux} and\n+@samp{m68k-*-linux}\n build libraries for both M680x0 and ColdFire processors.  If you only\n need the M680x0 libraries, you can omit the ColdFire ones by passing\n @option{--with-arch=m68k} to @command{configure}.  Alternatively, you\n can omit the M680x0 libraries by passing @option{--with-arch=cf} to\n-@command{configure}.  These targets default to 5206 code when\n+@command{configure}.  These targets default to 5206 or 5475 code as\n+appropriate for the target system when\n configured with @option{--with-arch=cf} and 68020 code otherwise.\n \n-The @samp{m68k-*-linux-gnu}, @samp{m68k-*-netbsd} and\n+The @samp{m68k-*-netbsd} and\n @samp{m68k-*-openbsd} targets also support the @option{--with-arch}\n option.  They will generate ColdFire CFV4e code when configured with\n @option{--with-arch=cf} and 68020 code otherwise."}]}