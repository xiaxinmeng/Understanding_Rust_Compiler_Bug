{"sha": "7168dc4708775024f33cfa33b1e86566591af8ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE2OGRjNDcwODc3NTAyNGYzM2NmYTMzYjFlODY1NjY1OTFhZjhhYw==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2009-09-23T16:30:39Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2009-09-23T16:30:39Z"}, "message": "re PR debug/41353 (VTA missed-debug issues)\n\nPR debug/41353\n* var-tracking.c (add_with_sets): Sort MO_VAL_LOC last among uses.\n\nFrom-SVN: r152088", "tree": {"sha": "d0c187b9acb8a4211684ef9d7a593bea88498f4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0c187b9acb8a4211684ef9d7a593bea88498f4f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7168dc4708775024f33cfa33b1e86566591af8ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7168dc4708775024f33cfa33b1e86566591af8ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7168dc4708775024f33cfa33b1e86566591af8ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7168dc4708775024f33cfa33b1e86566591af8ac/comments", "author": null, "committer": null, "parents": [{"sha": "dda2da581957d0c0614197a7f0021c95c707f005", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dda2da581957d0c0614197a7f0021c95c707f005", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dda2da581957d0c0614197a7f0021c95c707f005"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "8d461facb7c6fcea8ae51d0bd10830c57dbfd912", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7168dc4708775024f33cfa33b1e86566591af8ac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7168dc4708775024f33cfa33b1e86566591af8ac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7168dc4708775024f33cfa33b1e86566591af8ac", "patch": "@@ -1,3 +1,8 @@\n+2009-09-23  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR debug/41353\n+\t* var-tracking.c (add_with_sets): Sort MO_VAL_LOC last among uses.\n+\n 2009-09-23  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/41248"}, {"sha": "bdd3bdee34ef765dcc5f59adf9a8764f478896a3", "filename": "gcc/var-tracking.c", "status": "modified", "additions": 20, "deletions": 2, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7168dc4708775024f33cfa33b1e86566591af8ac/gcc%2Fvar-tracking.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7168dc4708775024f33cfa33b1e86566591af8ac/gcc%2Fvar-tracking.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvar-tracking.c?ref=7168dc4708775024f33cfa33b1e86566591af8ac", "patch": "@@ -4977,8 +4977,8 @@ add_with_sets (rtx insn, struct cselib_set *sets, int n_sets)\n   note_uses (&PATTERN (insn), add_uses_1, &cui);\n   n2 = VTI (bb)->n_mos - 1;\n \n-  /* Order the MO_USEs to be before MO_USE_NO_VARs,\n-     MO_VAL_LOC and MO_VAL_USE.  */\n+  /* Order the MO_USEs to be before MO_USE_NO_VARs and MO_VAL_USE, and\n+     MO_VAL_LOC last.  */\n   while (n1 < n2)\n     {\n       while (n1 < n2 && VTI (bb)->mos[n1].type == MO_USE)\n@@ -4995,6 +4995,24 @@ add_with_sets (rtx insn, struct cselib_set *sets, int n_sets)\n \t}\n     }\n \n+  n2 = VTI (bb)->n_mos - 1;\n+\n+  while (n1 < n2)\n+    {\n+      while (n1 < n2 && VTI (bb)->mos[n1].type != MO_VAL_LOC)\n+\tn1++;\n+      while (n1 < n2 && VTI (bb)->mos[n2].type == MO_VAL_LOC)\n+\tn2--;\n+      if (n1 < n2)\n+\t{\n+\t  micro_operation sw;\n+\n+\t  sw = VTI (bb)->mos[n1];\n+\t  VTI (bb)->mos[n1] = VTI (bb)->mos[n2];\n+\t  VTI (bb)->mos[n2] = sw;\n+\t}\n+    }\n+\n   if (CALL_P (insn))\n     {\n       micro_operation *mo = VTI (bb)->mos + VTI (bb)->n_mos++;"}]}