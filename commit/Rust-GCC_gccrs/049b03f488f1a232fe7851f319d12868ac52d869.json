{"sha": "049b03f488f1a232fe7851f319d12868ac52d869", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ5YjAzZjQ4OGYxYTIzMmZlNzg1MWYzMTlkMTI4NjhhYzUyZDg2OQ==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2002-03-11T20:37:13Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2002-03-11T20:37:13Z"}, "message": "texi2pod.pl: Handle @include, @ftable, @vtable.\n\n\t* contrib/texi2pod.pl: Handle @include, @ftable, @vtable.\n\tReformat some code for clarity.\n\t* gcc/Makefile.in: Give texi2pod its input file as a command\n\tline argument, not on stdin.\n\nFrom-SVN: r50592", "tree": {"sha": "969966a3ac799c7d52b5574f9d1ee0ff46495746", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/969966a3ac799c7d52b5574f9d1ee0ff46495746"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/049b03f488f1a232fe7851f319d12868ac52d869", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/049b03f488f1a232fe7851f319d12868ac52d869", "html_url": "https://github.com/Rust-GCC/gccrs/commit/049b03f488f1a232fe7851f319d12868ac52d869", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/049b03f488f1a232fe7851f319d12868ac52d869/comments", "author": null, "committer": null, "parents": [{"sha": "999cc24c0866f08a09bc3608fcac95a2dee681d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/999cc24c0866f08a09bc3608fcac95a2dee681d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/999cc24c0866f08a09bc3608fcac95a2dee681d3"}], "stats": {"total": 85, "additions": 69, "deletions": 16}, "files": [{"sha": "5ea9651a2e65adbcd6d06800038a7142e75efe75", "filename": "contrib/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/049b03f488f1a232fe7851f319d12868ac52d869/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/049b03f488f1a232fe7851f319d12868ac52d869/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=049b03f488f1a232fe7851f319d12868ac52d869", "patch": "@@ -1,3 +1,8 @@\n+2002-03-11  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* texi2pod.pl: Handle @include, @ftable, @vtable.\n+\tReformat some code for clarity.\n+\n 2002-02-24  Christian J\ufffdnsson  <c.christian.joensson@telia.com>\n \n \t* test_summary: Additional to XPASS and FAIL, add UNRESOLVED,"}, {"sha": "0cae122a788ed40172300c3f0a4b7fe241ebafe0", "filename": "contrib/texi2pod.pl", "status": "modified", "additions": 53, "deletions": 10, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/049b03f488f1a232fe7851f319d12868ac52d869/contrib%2Ftexi2pod.pl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/049b03f488f1a232fe7851f319d12868ac52d869/contrib%2Ftexi2pod.pl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ftexi2pod.pl?ref=049b03f488f1a232fe7851f319d12868ac52d869", "patch": "@@ -30,9 +30,12 @@\n @icstack = ();\n @endwstack = ();\n @skstack = ();\n+@instack = ();\n $shift = \"\";\n %defs = ();\n $fnno = 1;\n+$inf = \"\";\n+$ibase = \"\";\n \n while ($_ = shift) {\n     if (/^-D(.*)$/) {\n@@ -58,14 +61,19 @@\n }\n \n if (defined $in) {\n-    open(STDIN, $in) or die \"opening \\\"$in\\\": $!\\n\";\n+    $inf = gensym();\n+    open($inf, \"<$in\") or die \"opening \\\"$in\\\": $!\\n\";\n+    $ibase = $1 if $in =~ m|^(.+)/[^/]+$|;\n+} else {\n+    $inf = \\*STDIN;\n }\n+\n if (defined $out) {\n     open(STDOUT, \">$out\") or die \"opening \\\"$out\\\": $!\\n\";\n }\n \n-while(<STDIN>)\n-{\n+while(defined $inf) {\n+while(<$inf>) {\n     # Certain commands are discarded without further processing.\n     /^\\@(?:\n \t [a-z]+index\t\t# @*index: useful only in complete manual\n@@ -109,8 +117,14 @@\n     };\n \n     # handle variables\n-    /^\\@set\\s+([a-zA-Z0-9_-]+)\\s*(.*)$/ and $defs{$1} = $2, next;\n-    /^\\@clear\\s+([a-zA-Z0-9_-]+)/ and delete $defs{$1}, next;\n+    /^\\@set\\s+([a-zA-Z0-9_-]+)\\s*(.*)$/ and do {\n+\t$defs{$1} = $2;\n+\tnext;\n+    };\n+    /^\\@clear\\s+([a-zA-Z0-9_-]+)/ and do {\n+\tdelete $defs{$1};\n+\tnext;\n+    };\n \n     next unless $output;\n \n@@ -210,8 +224,21 @@\n \n     # Single line command handlers.\n \n-    /^\\@(?:section|unnumbered|unnumberedsec|center)\\s+(.+)$/ and $_ = \"\\n=head2 $1\\n\";\n-    /^\\@subsection\\s+(.+)$/ and $_ = \"\\n=head3 $1\\n\";\n+    /^\\@include\\s+(.+)$/ and do {\n+\tpush @instack, $inf;\n+\t$inf = gensym();\n+\n+\t# Try cwd and $ibase.\n+\topen($inf, \"<\" . $1) \n+\t    or open($inf, \"<\" . $ibase . \"/\" . $1)\n+\t\tor die \"cannot open $1 or $ibase/$1: $!\\n\";\n+\tnext;\n+    };\n+\n+    /^\\@(?:section|unnumbered|unnumberedsec|center)\\s+(.+)$/\n+\tand $_ = \"\\n=head2 $1\\n\";\n+    /^\\@subsection\\s+(.+)$/\n+\tand $_ = \"\\n=head3 $1\\n\";\n \n     # Block command handlers:\n     /^\\@itemize\\s+(\\@[a-z]+|\\*|-)/ and do {\n@@ -234,16 +261,16 @@\n \t$endw = \"enumerate\";\n     };\n \n-    /^\\@table\\s+(\\@[a-z]+)/ and do {\n+    /^\\@([fv]?table)\\s+(\\@[a-z]+)/ and do {\n \tpush @endwstack, $endw;\n \tpush @icstack, $ic;\n-\t$ic = $1;\n+\t$endw = $1;\n+\t$ic = $2;\n \t$ic =~ s/\\@(?:samp|strong|key|gcctabopt|env)/B/;\n \t$ic =~ s/\\@(?:code|kbd)/C/;\n \t$ic =~ s/\\@(?:dfn|var|emph|cite|i)/I/;\n \t$ic =~ s/\\@(?:file)/F/;\n \t$_ = \"\\n=over 4\\n\";\n-\t$endw = \"table\";\n     };\n \n     /^\\@((?:small)?example|display)/ and do {\n@@ -266,6 +293,10 @@\n \n     $section .= $shift.$_.\"\\n\";\n }\n+# End of current file.\n+close($inf);\n+$inf = pop @instack;\n+}\n \n die \"No filename or title\\n\" unless defined $fn && defined $tl;\n \n@@ -382,3 +413,15 @@ sub add_footnote\n     $sects{FOOTNOTES} .= $_[0];\n     $sects{FOOTNOTES} .= \"\\n\\n\";\n }\n+\n+# stolen from Symbol.pm\n+{\n+    my $genseq = 0;\n+    sub gensym\n+    {\n+\tmy $name = \"GEN\" . $genseq++;\n+\tmy $ref = \\*{$name};\n+\tdelete $::{$name};\n+\treturn $ref;\n+    }\n+}"}, {"sha": "31b03ba310f4bdf15965329c1adfc5e366aa1111", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/049b03f488f1a232fe7851f319d12868ac52d869/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/049b03f488f1a232fe7851f319d12868ac52d869/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=049b03f488f1a232fe7851f319d12868ac52d869", "patch": "@@ -1,3 +1,8 @@\n+2002-03-11  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* Makefile.in: Give texi2pod its input file as a command line\n+\targument, not on stdin.\n+\n 2002-03-11  Dan Nicolaescu  <dann@ics.uci.edu>\n \t    Daniel Berlin  <dan@dberlin.org>\n "}, {"sha": "46561c1685204f6ac49c44f8120310273fd499ce", "filename": "gcc/Makefile.in", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/049b03f488f1a232fe7851f319d12868ac52d869/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/049b03f488f1a232fe7851f319d12868ac52d869/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=049b03f488f1a232fe7851f319d12868ac52d869", "patch": "@@ -2333,47 +2333,47 @@ generated-manpages: $(docdir)/gcov.1 $(docdir)/cpp.1 $(docdir)/gcc.1 \\\n \n $(docdir)/gcov.1: $(docdir)/gcov.texi\n \t$(STAMP) $(docdir)/gcov.1\n-\t-$(TEXI2POD) < $(docdir)/gcov.texi > gcov.pod\n+\t-$(TEXI2POD) $(docdir)/gcov.texi > gcov.pod\n \t-($(POD2MAN) --section=1 gcov.pod > $(docdir)/gcov.1.T$$$$ && \\\n \t\tmv -f $(docdir)/gcov.1.T$$$$ $(docdir)/gcov.1) || \\\n \t\t(rm -f $(docdir)/gcov.1.T$$$$ && exit 1)\n \t-rm -f gcov.pod\n \n $(docdir)/cpp.1: $(docdir)/cpp.texi\n \t$(STAMP) $(docdir)/cpp.1\n-\t-$(TEXI2POD) < $(docdir)/cpp.texi > cpp.pod\n+\t-$(TEXI2POD) $(docdir)/cpp.texi > cpp.pod\n \t-($(POD2MAN) --section=1 cpp.pod > $(docdir)/cpp.1.T$$$$ && \\\n \t\tmv -f $(docdir)/cpp.1.T$$$$ $(docdir)/cpp.1) || \\\n \t\t(rm -f $(docdir)/cpp.1.T$$$$ && exit 1)\n \t-rm -f cpp.pod\n \n $(docdir)/gcc.1: $(docdir)/invoke.texi\n \t$(STAMP) $(docdir)/gcc.1\n-\t-$(TEXI2POD) < $(docdir)/invoke.texi > gcc.pod\n+\t-$(TEXI2POD) $(docdir)/invoke.texi > gcc.pod\n \t-($(POD2MAN) --section=1 gcc.pod > $(docdir)/gcc.1.T$$$$ && \\\n \t\tmv -f $(docdir)/gcc.1.T$$$$ $(docdir)/gcc.1) || \\\n \t\t(rm -f $(docdir)/gcc.1.T$$$$ && exit 1)\n \t-rm -f gcc.pod\n \n $(docdir)/gfdl.7: $(docdir)/include/fdl.texi\n \t$(STAMP) $(docdir)/gfdl.7\n-\t-$(TEXI2POD) < $(docdir)/include/fdl.texi > gfdl.pod\n+\t-$(TEXI2POD) $(docdir)/include/fdl.texi > gfdl.pod\n \t-($(POD2MAN) --section=7 gfdl.pod > $(docdir)/gfdl.7.T$$$$ && \\\n \t\tmv -f $(docdir)/gfdl.7.T$$$$ $(docdir)/gfdl.7) || \\\n \t\t(rm -f $(docdir)/gfdl.7.T$$$$ && exit 1)\n \t-rm -f gfdl.pod\n \n $(docdir)/gpl.7: $(docdir)/include/gpl.texi\n \t$(STAMP) $(docdir)/gpl.7\n-\t-$(TEXI2POD) < $(docdir)/include/gpl.texi > gpl.pod\n+\t-$(TEXI2POD) $(docdir)/include/gpl.texi > gpl.pod\n \t-($(POD2MAN) --section=7 gpl.pod > $(docdir)/gpl.7.T$$$$ && \\\n \t\tmv -f $(docdir)/gpl.7.T$$$$ $(docdir)/gpl.7) || \\\n \t\t(rm -f $(docdir)/gpl.7.T$$$$ && exit 1)\n \t-rm -f gpl.pod\n \n $(docdir)/fsf-funding.7: $(docdir)/include/funding.texi\n \t$(STAMP) $(docdir)/fsf-funding.7\n-\t-$(TEXI2POD) < $(docdir)/include/funding.texi > fsf-funding.pod\n+\t-$(TEXI2POD) $(docdir)/include/funding.texi > fsf-funding.pod\n \t-($(POD2MAN) --section=7 fsf-funding.pod \\\n \t\t> $(docdir)/fsf-funding.7.T$$$$ && \\\n \t    mv -f $(docdir)/fsf-funding.7.T$$$$ $(docdir)/fsf-funding.7) || \\"}]}