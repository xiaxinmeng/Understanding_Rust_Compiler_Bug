{"sha": "17a6321210fe85bc369dae85b4c4b06d952dc041", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTdhNjMyMTIxMGZlODViYzM2OWRhZTg1YjRjNGIwNmQ5NTJkYzA0MQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2018-07-25T20:23:07Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2018-07-25T20:23:07Z"}, "message": "PR libstdc++/86676 Do not assume stack buffer is aligned\n\n\tPR libstdc++/86676\n\t* testsuite/20_util/monotonic_buffer_resource/release.cc: Allow for\n\tbuffer being misaligned and so returned pointer not being at start.\n\nFrom-SVN: r262980", "tree": {"sha": "90ee618a314f5bdddeb397124eee5a490db14eda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90ee618a314f5bdddeb397124eee5a490db14eda"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17a6321210fe85bc369dae85b4c4b06d952dc041", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17a6321210fe85bc369dae85b4c4b06d952dc041", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17a6321210fe85bc369dae85b4c4b06d952dc041", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17a6321210fe85bc369dae85b4c4b06d952dc041/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0fc1c4290bbeb00a66621a1596db297bbed05dc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fc1c4290bbeb00a66621a1596db297bbed05dc2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fc1c4290bbeb00a66621a1596db297bbed05dc2"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "1a0a485bd2cad489ee116e5460b1f51580924f9f", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17a6321210fe85bc369dae85b4c4b06d952dc041/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17a6321210fe85bc369dae85b4c4b06d952dc041/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=17a6321210fe85bc369dae85b4c4b06d952dc041", "patch": "@@ -1,5 +1,9 @@\n 2018-07-25  Jonathan Wakely  <jwakely@redhat.com>\n \n+\tPR libstdc++/86676\n+\t* testsuite/20_util/monotonic_buffer_resource/release.cc: Allow for\n+\tbuffer being misaligned and so returned pointer not being at start.\n+\n \t* include/experimental/memory_resource: Include <cstddef> header.\n \n \t* acinclude.m4 (glibcxx_SUBDIRS): Add src/c++17."}, {"sha": "ac70385961dfd847b7843febce3f70eb8c5d6249", "filename": "libstdc++-v3/testsuite/20_util/monotonic_buffer_resource/release.cc", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17a6321210fe85bc369dae85b4c4b06d952dc041/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fmonotonic_buffer_resource%2Frelease.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17a6321210fe85bc369dae85b4c4b06d952dc041/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fmonotonic_buffer_resource%2Frelease.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fmonotonic_buffer_resource%2Frelease.cc?ref=17a6321210fe85bc369dae85b4c4b06d952dc041", "patch": "@@ -115,18 +115,20 @@ test04()\n   unsigned char buffer[1024];\n   std::pmr::monotonic_buffer_resource mbr(buffer, sizeof(buffer), &r);\n   void* p = mbr.allocate(800, 16);\n-  VERIFY( p == buffer );\n+  VERIFY( p >= buffer && p < (buffer + 16) );\n+  void* const p_in_buffer = p;\n   VERIFY( r.allocate_calls == 0 );\n   p = mbr.allocate(300, 1);\n   VERIFY( p != buffer );\n+  VERIFY( p != buffer );\n   VERIFY( r.allocate_calls == 1 );\n   mbr.release();\n   VERIFY( r.deallocate_calls == 1 );\n   VERIFY( mbr.upstream_resource() == &r );\n   VERIFY( r.number_of_active_allocations() == 0 );\n   // initial buffer should be used again now:\n   p = mbr.allocate(1000);\n-  VERIFY( p == buffer );\n+  VERIFY( p == p_in_buffer );\n   VERIFY( r.allocate_calls == 1 );\n }\n "}]}