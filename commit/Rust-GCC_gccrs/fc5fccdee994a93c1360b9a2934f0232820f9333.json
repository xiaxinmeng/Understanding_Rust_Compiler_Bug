{"sha": "fc5fccdee994a93c1360b9a2934f0232820f9333", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmM1ZmNjZGVlOTk0YTkzYzEzNjBiOWEyOTM0ZjAyMzI4MjBmOTMzMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-03-21T17:48:39Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-03-21T17:48:39Z"}, "message": "re PR c++/14616 (disjoint_set_test.cpp from boost does not compile (sizeof))\n\n\tPR c++/14616\n\t* decl.c (cp_finish_decl): Compute the size of arrays declared in\n\ttemplates, if their type is non-dependent.\n\n\tPR c++/14616\n\t* g++.dg/init/array13.C: New test.\n\nFrom-SVN: r79788", "tree": {"sha": "d6a744d44d90ff41a7bd2e3a59eab8c0e83f3a93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6a744d44d90ff41a7bd2e3a59eab8c0e83f3a93"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc5fccdee994a93c1360b9a2934f0232820f9333", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc5fccdee994a93c1360b9a2934f0232820f9333", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc5fccdee994a93c1360b9a2934f0232820f9333", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc5fccdee994a93c1360b9a2934f0232820f9333/comments", "author": null, "committer": null, "parents": [{"sha": "0f005f338f506ae21040f1ba00e3c1ce42a080c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f005f338f506ae21040f1ba00e3c1ce42a080c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f005f338f506ae21040f1ba00e3c1ce42a080c1"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "8f5130663f3eadff6902113b97be04b862898bc0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fc5fccdee994a93c1360b9a2934f0232820f9333", "patch": "@@ -1,3 +1,9 @@\n+2004-03-21  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/14616\n+\t* decl.c (cp_finish_decl): Compute the size of arrays declared in\n+\ttemplates, if their type is non-dependent.\n+\n 2004-03-19  Mark Mitchell  <mark@codesourcery.com>\n \n \t* call.c (build_op_delete_call): Do not forget the placement"}, {"sha": "0b802ff7578f6eb9678d9788e16511623cf4d6b0", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=fc5fccdee994a93c1360b9a2934f0232820f9333", "patch": "@@ -4711,6 +4711,10 @@ cp_finish_decl (tree decl, tree init, tree asmspec_tree, int flags)\n \n       if (init && DECL_INITIAL (decl))\n \tDECL_INITIAL (decl) = init;\n+      if (TREE_CODE (decl) == VAR_DECL\n+\t  && !DECL_PRETTY_FUNCTION_P (decl)\n+\t  && !dependent_type_p (TREE_TYPE (decl)))\n+\tmaybe_deduce_size_from_array_init (decl, init);\n       goto finish_end0;\n     }\n "}, {"sha": "2ec9fe62044c0f7a4adf3d0b168f33aedeca91a5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fc5fccdee994a93c1360b9a2934f0232820f9333", "patch": "@@ -1,3 +1,8 @@\n+2004-03-21  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/14616\n+\t* g++.dg/init/array13.C: New test.\n+\n 2004-03-20  Roger Sayle  <roger@eyesopen.com>\n \n \tPR target/13889"}, {"sha": "aa66e33acfc7cf8f9569a10a7517f9fb18cad5aa", "filename": "gcc/testsuite/g++.dg/init/array13.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray13.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5fccdee994a93c1360b9a2934f0232820f9333/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray13.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray13.C?ref=fc5fccdee994a93c1360b9a2934f0232820f9333", "patch": "@@ -0,0 +1,9 @@\n+template <typename DisjointSet> \n+struct test_disjoint_set { \n+  static void do_test() \n+  { \n+    unsigned int elts[] \n+        = { 0, 1, 2, 3 }; \n+    const int N = sizeof(elts)/sizeof(*elts); \n+  } \n+}; "}]}