{"sha": "ba75df2bd35a7fa872e287f752b94f2169e4370c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE3NWRmMmJkMzVhN2ZhODcyZTI4N2Y3NTJiOTRmMjE2OWU0MzcwYw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-08-15T09:06:42Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-08-15T09:06:42Z"}, "message": "re PR c++/33035 (ICE on local class destructor)\n\n/cp\n2007-08-15  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33035\n\t* pt.c (push_template_decl_real): Depending on TYPE_P\n\tuse either TYPE_CONTEXT or DECL_CONTEXT.\n\n/testsuite\n2007-08-15  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33035\n\t* g++.dg/template/crash68.C: New.\n\nFrom-SVN: r127508", "tree": {"sha": "83024b563f80accaef141bf03538e0b646a6b8c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83024b563f80accaef141bf03538e0b646a6b8c0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba75df2bd35a7fa872e287f752b94f2169e4370c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba75df2bd35a7fa872e287f752b94f2169e4370c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba75df2bd35a7fa872e287f752b94f2169e4370c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba75df2bd35a7fa872e287f752b94f2169e4370c/comments", "author": null, "committer": null, "parents": [{"sha": "2a97f34e6730d618a03b52d05f0ee03de9251b03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a97f34e6730d618a03b52d05f0ee03de9251b03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a97f34e6730d618a03b52d05f0ee03de9251b03"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "892e8a6ef874d931ef100d4c45b7cd031e750309", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ba75df2bd35a7fa872e287f752b94f2169e4370c", "patch": "@@ -1,3 +1,9 @@\n+2007-08-15  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33035\n+\t* pt.c (push_template_decl_real): Depending on TYPE_P\n+\tuse either TYPE_CONTEXT or DECL_CONTEXT.\n+\n 2007-08-14  Mark Mitchell  <mark@codesourcery.com>\n \n \t* semantics.c (finish_omp_clauses): Strip a NOP_EXPR if"}, {"sha": "f414bc3521f4bcdb3de66e2fcd6f15b8e1dea553", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=ba75df2bd35a7fa872e287f752b94f2169e4370c", "patch": "@@ -3913,7 +3913,9 @@ push_template_decl_real (tree decl, bool is_friend)\n \t    if (current == decl)\n \t      current = ctx;\n \t    else\n-\t      current = TYPE_CONTEXT (current);\n+\t      current = (TYPE_P (current)\n+\t\t\t ? TYPE_CONTEXT (current)\n+\t\t\t : DECL_CONTEXT (current));\n \t  }\n     }\n "}, {"sha": "eef5e699cad22328ff1e173f4976e39c9386b6d2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ba75df2bd35a7fa872e287f752b94f2169e4370c", "patch": "@@ -1,3 +1,8 @@\n+2007-08-15  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33035\n+\t* g++.dg/template/crash68.C: New.\n+\n 2007-08-15  Maxim Kuvyrkov  <maxim@codesourcery.com>\n  \n \t* gcc.dg/sibcall-3.c: Remove m68k from XFAIL list."}, {"sha": "9171f8c62d909d16f8784c3069bc1aa86511ec57", "filename": "gcc/testsuite/g++.dg/template/crash68.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash68.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba75df2bd35a7fa872e287f752b94f2169e4370c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash68.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash68.C?ref=ba75df2bd35a7fa872e287f752b94f2169e4370c", "patch": "@@ -0,0 +1,16 @@\n+// PR c++/33035\n+\n+template<class A> \n+struct a {\n+        template<class B> \n+        struct b {\n+                template<class C>\n+                void f()\n+                {\n+                        struct g\n+                        {\n+                                ~g() {}\n+                        };\n+                }\n+        };\n+};"}]}