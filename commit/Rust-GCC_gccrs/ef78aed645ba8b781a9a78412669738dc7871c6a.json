{"sha": "ef78aed645ba8b781a9a78412669738dc7871c6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWY3OGFlZDY0NWJhOGI3ODFhOWE3ODQxMjY2OTczOGRjNzg3MWM2YQ==", "commit": {"author": {"name": "Anatoly Sokolov", "email": "aesok@post.ru", "date": "2011-03-08T20:51:11Z"}, "committer": {"name": "Anatoly Sokolov", "email": "aesok@gcc.gnu.org", "date": "2011-03-08T20:51:11Z"}, "message": "mips.h (PREFERRED_RELOAD_CLASS): Remove macro.\n\n\t* config/mips/mips.h (PREFERRED_RELOAD_CLASS): Remove macro.\n\t* config/mips/mips-protos.h (mips_preferred_reload_class): Remove.\n\t* config/mips/mips.c (mips_preferred_reload_class): Make static.\n\tChange 'rclass' argument and result type to reg_class_t.\n\t(TARGET_PREFERRED_RELOAD_CLASS): Define.\n\nFrom-SVN: r170789", "tree": {"sha": "83329558ce8e006570b0aab88fa167b7dbb53a47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83329558ce8e006570b0aab88fa167b7dbb53a47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef78aed645ba8b781a9a78412669738dc7871c6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef78aed645ba8b781a9a78412669738dc7871c6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef78aed645ba8b781a9a78412669738dc7871c6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef78aed645ba8b781a9a78412669738dc7871c6a/comments", "author": null, "committer": null, "parents": [{"sha": "5f892aa09229fb2b545b03002266f89bd653d39f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f892aa09229fb2b545b03002266f89bd653d39f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f892aa09229fb2b545b03002266f89bd653d39f"}], "stats": {"total": 26, "additions": 17, "deletions": 9}, "files": [{"sha": "2f6aa6270c852df458b44fa3b56be56959b5cbb7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ef78aed645ba8b781a9a78412669738dc7871c6a", "patch": "@@ -1,3 +1,11 @@\n+2011-03-08  Anatoly Sokolov  <aesok@post.ru>\n+\n+\t* config/mips/mips.h (PREFERRED_RELOAD_CLASS): Remove macro.\n+\t* config/mips/mips-protos.h (mips_preferred_reload_class): Remove.\n+\t* config/mips/mips.c (mips_preferred_reload_class): Make static.\n+\tChange 'rclass' argument and result type to reg_class_t.\n+\t(TARGET_PREFERRED_RELOAD_CLASS): Define.\n+\n 2011-03-08  Georg-Johann Lay  <avr@gjlay.de>\n \n        * config/avr/avr.h (REGISTER_MOVE_COST, MEMORY_MOVE_COST): Remove."}, {"sha": "611459884cbdb3b85065352231c8eaf107c152d3", "filename": "gcc/config/mips/mips-protos.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2Fconfig%2Fmips%2Fmips-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2Fconfig%2Fmips%2Fmips-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-protos.h?ref=ef78aed645ba8b781a9a78412669738dc7871c6a", "patch": "@@ -1,6 +1,6 @@\n /* Prototypes of target machine for GNU compiler.  MIPS version.\n    Copyright (C) 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2001, 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010\n+   1999, 2001, 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010, 2011\n    Free Software Foundation, Inc.\n    Contributed by A. Lichnewsky (lich@inria.inria.fr).\n    Changed by Michael Meissner\t(meissner@osf.org).\n@@ -283,7 +283,6 @@ extern bool mips_cannot_change_mode_class (enum machine_mode,\n \t\t\t\t\t   enum machine_mode, enum reg_class);\n extern bool mips_dangerous_for_la25_p (rtx);\n extern bool mips_modes_tieable_p (enum machine_mode, enum machine_mode);\n-extern enum reg_class mips_preferred_reload_class (rtx, enum reg_class);\n extern enum reg_class mips_secondary_reload_class (enum reg_class,\n \t\t\t\t\t\t   enum machine_mode,\n \t\t\t\t\t\t   rtx, bool);"}, {"sha": "9de479bf5c8a3e2789732d726dbc96a9bb9e1460", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=ef78aed645ba8b781a9a78412669738dc7871c6a", "patch": "@@ -1,6 +1,7 @@\n /* Subroutines used for MIPS code generation.\n    Copyright (C) 1989, 1990, 1991, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n+   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n+   2011\n    Free Software Foundation, Inc.\n    Contributed by A. Lichnewsky, lich@inria.inria.fr.\n    Changes by Michael Meissner, meissner@osf.org.\n@@ -10804,10 +10805,10 @@ mips_modes_tieable_p (enum machine_mode mode1, enum machine_mode mode2)\n \t      && !mips_mode_ok_for_mov_fmt_p (mode2)));\n }\n \n-/* Implement PREFERRED_RELOAD_CLASS.  */\n+/* Implement TARGET_PREFERRED_RELOAD_CLASS.  */\n \n-enum reg_class\n-mips_preferred_reload_class (rtx x, enum reg_class rclass)\n+static reg_class_t\n+mips_preferred_reload_class (rtx x, reg_class_t rclass)\n {\n   if (mips_dangerous_for_la25_p (x) && reg_class_subset_p (LEA_REGS, rclass))\n     return LEA_REGS;\n@@ -16487,6 +16488,9 @@ mips_shift_truncation_mask (enum machine_mode mode)\n #undef TARGET_MACHINE_DEPENDENT_REORG\n #define TARGET_MACHINE_DEPENDENT_REORG mips_reorg\n \n+#undef  TARGET_PREFERRED_RELOAD_CLASS\n+#define TARGET_PREFERRED_RELOAD_CLASS mips_preferred_reload_class\n+\n #undef TARGET_ASM_FILE_START\n #define TARGET_ASM_FILE_START mips_file_start\n #undef TARGET_ASM_FILE_START_FILE_DIRECTIVE"}, {"sha": "9600dcb28fd0d93d1ac6497075c19cc91ce081cb", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef78aed645ba8b781a9a78412669738dc7871c6a/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=ef78aed645ba8b781a9a78412669738dc7871c6a", "patch": "@@ -2028,9 +2028,6 @@ enum reg_class\n #define SMALL_INT_UNSIGNED(X) SMALL_OPERAND_UNSIGNED (INTVAL (X))\n #define LUI_INT(X) LUI_OPERAND (INTVAL (X))\n \n-#define PREFERRED_RELOAD_CLASS(X,CLASS)\t\t\t\t\t\\\n-  mips_preferred_reload_class (X, CLASS)\n-\n /* The HI and LO registers can only be reloaded via the general\n    registers.  Condition code registers can only be loaded to the\n    general registers, and from the floating point registers.  */"}]}