{"sha": "64a96f5bc3736c2d423823d1ca135eef3760cf6b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjRhOTZmNWJjMzczNmMyZDQyMzgyM2QxY2ExMzVlZWYzNzYwY2Y2Yg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2008-01-28T17:25:55Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2008-01-28T17:25:55Z"}, "message": "[multiple changes]\n\n2008-01-28  Tobias Burnus  <burnus@net-b.de>\n\n    PR libfortran/34980\n    * simplify.c (gfc_simplify_shape): Simplify rank zero arrays.\n\n\n2008-01-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n    PR libfortran/34980\n    * gfortran.dg/shape_3.f90:  New test.\n\nFrom-SVN: r131913", "tree": {"sha": "86a896609bc6e094eff7088fd1dd617ed383b6cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86a896609bc6e094eff7088fd1dd617ed383b6cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/64a96f5bc3736c2d423823d1ca135eef3760cf6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64a96f5bc3736c2d423823d1ca135eef3760cf6b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64a96f5bc3736c2d423823d1ca135eef3760cf6b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64a96f5bc3736c2d423823d1ca135eef3760cf6b/comments", "author": null, "committer": null, "parents": [{"sha": "a3a7c5df2edb4b6b9f9fbdbbea42f0b2e547ee6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3a7c5df2edb4b6b9f9fbdbbea42f0b2e547ee6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3a7c5df2edb4b6b9f9fbdbbea42f0b2e547ee6a"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "0923a77720ab894f94c8468b8200c4e36d8e91c0", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=64a96f5bc3736c2d423823d1ca135eef3760cf6b", "patch": "@@ -1,3 +1,8 @@\n+2008-01-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR libfortran/34980\n+\t* simplify.c (gfc_simplify_shape): Simplify rank zero arrays.\n+\n 2008-01-27  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/34990"}, {"sha": "1b5b23e2c0fffb30c1aa747f4cd6fc609b086a7d", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=64a96f5bc3736c2d423823d1ca135eef3760cf6b", "patch": "@@ -3714,7 +3714,11 @@ gfc_simplify_shape (gfc_expr *source)\n   int n;\n   try t;\n \n-  if (source->rank == 0 || source->expr_type != EXPR_VARIABLE)\n+  if (source->rank == 0)\n+    return gfc_start_constructor (BT_INTEGER, gfc_default_integer_kind,\n+\t\t\t\t  &source->where);\n+\n+  if (source->expr_type != EXPR_VARIABLE)\n     return NULL;\n \n   result = gfc_start_constructor (BT_INTEGER, gfc_default_integer_kind,"}, {"sha": "c13e9068988452f8a0106469af7d685190b2bb87", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=64a96f5bc3736c2d423823d1ca135eef3760cf6b", "patch": "@@ -1,3 +1,8 @@\n+2008-01-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR libfortran/34980\n+\t* gfortran.dg/shape_3.f90:  New test.\n+\n 2008-01-28  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* gcc.target/s390/20020926-1.c: Remove -m31."}, {"sha": "ea725a014e952b0ee6cae246ff712cbf55f19ad3", "filename": "gcc/testsuite/gfortran.dg/shape_3.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ftestsuite%2Fgfortran.dg%2Fshape_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a96f5bc3736c2d423823d1ca135eef3760cf6b/gcc%2Ftestsuite%2Fgfortran.dg%2Fshape_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fshape_3.f90?ref=64a96f5bc3736c2d423823d1ca135eef3760cf6b", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do run }\n+! PR 34980 - we got a segfault for calling shape\n+!            with a scalar.\n+program main\n+ integer :: n\n+ n = 5\n+ open(10,status=\"scratch\")\n+ write (10,*) shape(n)\n+ close(10,status=\"delete\")\n+end\n+"}]}