{"sha": "9a9a96439d8d21240451a9f2341dde7829f20c7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWE5YTk2NDM5ZDhkMjEyNDA0NTFhOWYyMzQxZGRlNzgyOWYyMGM3Yg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-08-08T08:33:22Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-08-08T08:33:22Z"}, "message": "(rest_of_decl_compilation): Don't look at DECL_IGNORED_P.\n\nDon't output a read-only initialized extern variable.\n\nFrom-SVN: r5105", "tree": {"sha": "e5ed0ed00aed85f5249a4967117ba44850dc4a8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5ed0ed00aed85f5249a4967117ba44850dc4a8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a9a96439d8d21240451a9f2341dde7829f20c7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a9a96439d8d21240451a9f2341dde7829f20c7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a9a96439d8d21240451a9f2341dde7829f20c7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a9a96439d8d21240451a9f2341dde7829f20c7b/comments", "author": null, "committer": null, "parents": [{"sha": "fe23d5ada2a7090c161ca48c79e9e4dcb51db267", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe23d5ada2a7090c161ca48c79e9e4dcb51db267", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe23d5ada2a7090c161ca48c79e9e4dcb51db267"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "4d2c42b2f2d4ba7f169b58dfe486fe338906acbf", "filename": "gcc/toplev.c", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a9a96439d8d21240451a9f2341dde7829f20c7b/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a9a96439d8d21240451a9f2341dde7829f20c7b/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=9a9a96439d8d21240451a9f2341dde7829f20c7b", "patch": "@@ -2163,18 +2163,19 @@ rest_of_decl_compilation (decl, asmspec, top_level, at_end)\n     TIMEVAR (varconst_time,\n \t     {\n \t       make_decl_rtl (decl, asmspec, top_level);\n-\t       /* For a user-invisible decl that should be replaced\n-\t\t  by its value when used, don't output anything.  */\n+\t       /* Initialized extern variable exists to be replaced\n+\t\t  with its value, or represents something that will be\n+\t\t  output in another file.  */\n \t       if (! (TREE_CODE (decl) == VAR_DECL\n-\t\t      && DECL_IGNORED_P (decl) && TREE_READONLY (decl)\n-\t\t      && DECL_INITIAL (decl) != 0))\n+\t\t      && DECL_EXTERNAL (decl) && TREE_READONLY (decl)\n+\t\t      && DECL_INITIAL (decl) != 0\n+\t\t      && DECL_INITIAL (decl) != error_mark_node)\n \t\t /* Don't output anything\n \t\t    when a tentative file-scope definition is seen.\n \t\t    But at end of compilation, do output code for them.  */\n \t\t if (! (! at_end && top_level\n \t\t\t&& (DECL_INITIAL (decl) == 0\n-\t\t\t    || DECL_INITIAL (decl) == error_mark_node\n-\t\t\t    || DECL_IGNORED_P (decl))))\n+\t\t\t    || DECL_INITIAL (decl) == error_mark_node)))\n \t\t   assemble_variable (decl, top_level, at_end, 0);\n \t     });\n   else if (DECL_REGISTER (decl) && asmspec != 0)"}]}