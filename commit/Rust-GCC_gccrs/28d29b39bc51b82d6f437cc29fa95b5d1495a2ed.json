{"sha": "28d29b39bc51b82d6f437cc29fa95b5d1495a2ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhkMjliMzliYzUxYjgyZDZmNDM3Y2MyOWZhOTViNWQxNDk1YTJlZA==", "commit": {"author": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1995-04-03T22:54:09Z"}, "committer": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1995-04-03T22:54:09Z"}, "message": "(umulsi3_highpart): Test for CONST_INT and CONST_DOUBLE, not CONSTANT_P.\n\n(smulsi3_highpart): Likewise.\n\n(const_umulsi3_highpart): Use const_uint32_operand instead\nof immediate_operand for op3.  Delete mode.\n(const_smulsi3_highpart): Analogous change.\n\nFrom-SVN: r9307", "tree": {"sha": "875bf4e6908e41fe40def7ed9f40ffbfa88e15cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/875bf4e6908e41fe40def7ed9f40ffbfa88e15cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28d29b39bc51b82d6f437cc29fa95b5d1495a2ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28d29b39bc51b82d6f437cc29fa95b5d1495a2ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28d29b39bc51b82d6f437cc29fa95b5d1495a2ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28d29b39bc51b82d6f437cc29fa95b5d1495a2ed/comments", "author": null, "committer": null, "parents": [{"sha": "67cd4f83cfddd1ae43bb5183a5ecc79d79528ef2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67cd4f83cfddd1ae43bb5183a5ecc79d79528ef2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67cd4f83cfddd1ae43bb5183a5ecc79d79528ef2"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "27b30d0292b738e51b73a53d4d3763bce092e34c", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28d29b39bc51b82d6f437cc29fa95b5d1495a2ed/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28d29b39bc51b82d6f437cc29fa95b5d1495a2ed/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=28d29b39bc51b82d6f437cc29fa95b5d1495a2ed", "patch": "@@ -2907,9 +2907,12 @@\n   \"\n {\n   operands[3] = gen_reg_rtx (SImode);\n-  if (CONSTANT_P (operands[2]))\n+  if (GET_CODE (operands[2]) == CONST_INT\n+      || GET_CODE (operands[2]) == CONST_DOUBLE)\n     {\n-      /* We have to rearrange the operand order for the matching constraints.  */\n+      if (! const_uint32_operand (operands[2]))\n+\tabort ();\n+      /* We have to adjust the operand order for the matching constraints.  */\n       emit_insn (gen_const_umulsi3_highpart (operands[0], operands[3],\n \t\t\t\t\t     operands[1], operands[2]));\n       DONE;\n@@ -2932,7 +2935,7 @@\n \t(truncate:SI\n \t (lshiftrt:DI\n \t  (mult:DI (zero_extend:DI (match_operand:SI 2 \"register_operand\" \"1\"))\n-\t\t   (match_operand:DI 3 \"immediate_operand\" \"i\"))\n+\t\t   (match_operand 3 \"const_uint32_operand\" \"\"))\n \t  (const_int 32))))\n    (clobber (match_operand:SI 1 \"register_operand\" \"=d\"))]\n   \"TARGET_68020\"\n@@ -2951,9 +2954,12 @@\n   \"\n {\n   operands[3] = gen_reg_rtx (SImode);\n-  if (CONSTANT_P (operands[2]))\n+  if (GET_CODE (operands[2]) == CONST_INT\n+      || GET_CODE (operands[2]) == CONST_DOUBLE)\n     {\n-      /* We have to rearrange the operand order for the matching constraints.  */\n+      if (! const_sint32_operand (operands[2]))\n+\tabort ();\n+      /* We have to adjust the operand order for the matching constraints.  */\n       emit_insn (gen_const_smulsi3_highpart (operands[0], operands[3],\n \t\t\t\t\t     operands[1], operands[2]));\n       DONE;\n@@ -2976,7 +2982,7 @@\n \t(truncate:SI\n \t (lshiftrt:DI\n \t  (mult:DI (sign_extend:DI (match_operand:SI 2 \"register_operand\" \"1\"))\n-\t\t   (match_operand:DI 3 \"immediate_operand\" \"i\"))\n+\t\t   (match_operand 3 \"const_sint32_operand\" \"\"))\n \t  (const_int 32))))\n    (clobber (match_operand:SI 1 \"register_operand\" \"=d\"))]\n   \"TARGET_68020\""}]}