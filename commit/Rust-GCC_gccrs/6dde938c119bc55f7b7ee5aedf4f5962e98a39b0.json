{"sha": "6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmRkZTkzOGMxMTliYzU1ZjdiN2VlNWFlZGY0ZjU5NjJlOThhMzliMA==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2004-03-10T06:31:50Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2004-03-10T06:31:50Z"}, "message": "swap.cc: Add in bits for non-weak systems.\n\n\n2004-03-09  Benjamin Kosnik  <bkoz@redhat.com>\n\n\t* testsuite/23_containers/deque/modifiers/swap.cc: Add in bits for\n\tnon-weak systems.\n\t* testsuite/23_containers/vector/modifiers/swap.cc: Same.\n\t* testsuite/23_containers/set/modifiers/swap.cc: Same.\n\t* testsuite/23_containers/multiset/modifiers/swap.cc: Same.\n\t* testsuite/23_containers/multimap/modifiers/swap.cc: Same.\n\t* testsuite/23_containers/map/modifiers/swap.cc: Same.\n\t* testsuite/23_containers/list/modifiers/swap.cc: Same.\n\n\t* testsuite/22_locale/locale/cons/12658_thread.cc: Catch exceptions.\n\nFrom-SVN: r79224", "tree": {"sha": "95dcdfee20b75354e3819680ef53173f587da63b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95dcdfee20b75354e3819680ef53173f587da63b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/comments", "author": null, "committer": null, "parents": [{"sha": "8a308d45d57953297c37fe233b61a042cb563531", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a308d45d57953297c37fe233b61a042cb563531", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a308d45d57953297c37fe233b61a042cb563531"}], "stats": {"total": 69, "additions": 57, "deletions": 12}, "files": [{"sha": "4be32a5de2dd2812472733d5e30ee497eb3bdd41", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -1,3 +1,16 @@\n+2004-03-09  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\t* testsuite/23_containers/deque/modifiers/swap.cc: Add in bits for\n+\tnon-weak systems.\n+\t* testsuite/23_containers/vector/modifiers/swap.cc: Same.\n+\t* testsuite/23_containers/set/modifiers/swap.cc: Same.\n+\t* testsuite/23_containers/multiset/modifiers/swap.cc: Same.\n+\t* testsuite/23_containers/multimap/modifiers/swap.cc: Same.\n+\t* testsuite/23_containers/map/modifiers/swap.cc: Same.\n+\t* testsuite/23_containers/list/modifiers/swap.cc: Same.\n+\n+\t* testsuite/22_locale/locale/cons/12658_thread.cc: Catch exceptions.\n+\n 2004-03-08  Benjamin Kosnik  <bkoz@redhat.com>\n \t\n \tPR c++/13658"}, {"sha": "3a89d371f62b97befbdfb58e08fd1ad44b5e6cd2", "filename": "libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread.cc", "status": "modified", "additions": 15, "deletions": 12, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Flocale%2Fcons%2F12658_thread.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Flocale%2Fcons%2F12658_thread.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Flocale%2Fcons%2F12658_thread.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -32,28 +32,31 @@ const int max_locales = 10;\n  \n void* thread_main(void*)\n {\n-  std::locale loc_c = std::locale::classic();\n-  std::locale loc[max_locales];\n-  for (int j = 0; j < max_locales; ++j)\n-    loc[j] = std::locale(j % 2 ? \"en_US\" : \"fr_FR\");\n-\n-  for (int i = 0; i < max_loop_count; ++i)\n+  try\n     {\n-      int k = i % max_locales;\n-      loc[k] = std::locale::global(loc[k]);\n+      std::locale loc_c = std::locale::classic();\n+      std::locale loc[max_locales];\n+      for (int j = 0; j < max_locales; ++j)\n+\tloc[j] = std::locale(j % 2 ? \"en_US\" : \"fr_FR\");\n       \n-      if (i % 37 == 0)\n-\tloc[k] = loc[k].combine<std::ctype<char> >(loc_c);\n+      for (int i = 0; i < max_loop_count; ++i)\n+\t{\n+\t  int k = i % max_locales;\n+\t  loc[k] = std::locale::global(loc[k]);\n+\t  \n+\t  if (i % 37 == 0)\n+\t    loc[k] = loc[k].combine<std::ctype<char> >(loc_c);\n+\t}\n     }\n-\n+  catch (...) { }\n   return 0;\n }\n  \n int\n main()\n {\n   pthread_t tid[max_thread_count];\n- \n+  \n   for (int i = 0; i < max_thread_count; i++)\n     pthread_create (&tid[i], NULL, thread_main, 0);\n   "}, {"sha": "43dc6867d3d818664ce6027ca11f28ccda19289b", "filename": "libstdc++-v3/testsuite/23_containers/deque/modifiers/swap.cc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fdeque%2Fmodifiers%2Fswap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fdeque%2Fmodifiers%2Fswap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fdeque%2Fmodifiers%2Fswap.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -54,6 +54,11 @@ void test02()\n   VERIFY(1 == swap_calls);\n }\n \n+#if !__GXX_WEAK__ && _MT_ALLOCATOR_H\n+template class __gnu_cxx::__mt_alloc<T>;\n+template class __gnu_cxx::__mt_alloc<T*>;\n+#endif\n+\n // See c++/13658 for background info.\n int main()\n {"}, {"sha": "a51d1263fb446f098084742252fab040a8fa0ed5", "filename": "libstdc++-v3/testsuite/23_containers/list/modifiers/swap.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Fmodifiers%2Fswap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Fmodifiers%2Fswap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Fmodifiers%2Fswap.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -54,6 +54,10 @@ void test02()\n   VERIFY(1 == swap_calls);\n }\n \n+#if !__GXX_WEAK__ && _MT_ALLOCATOR_H\n+template class __gnu_cxx::__mt_alloc<std::_List_node<T> >;\n+#endif\n+\n // See c++/13658 for background info.\n int main()\n {"}, {"sha": "1afde71dd8a2acf8c22de7c89bca1c440f2f44a7", "filename": "libstdc++-v3/testsuite/23_containers/map/modifiers/swap.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmap%2Fmodifiers%2Fswap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmap%2Fmodifiers%2Fswap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmap%2Fmodifiers%2Fswap.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -54,6 +54,10 @@ void test02()\n   VERIFY(1 == swap_calls);\n }\n \n+#if !__GXX_WEAK__ && _MT_ALLOCATOR_H\n+template class __gnu_cxx::__mt_alloc<std::_Rb_tree_node<std::pair<T const, int> > >;\n+#endif\n+\n // See c++/13658 for background info.\n int main()\n {"}, {"sha": "2e87dff163265cb0c34f7c6e4185101ddbd3a68b", "filename": "libstdc++-v3/testsuite/23_containers/multimap/modifiers/swap.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmultimap%2Fmodifiers%2Fswap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmultimap%2Fmodifiers%2Fswap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmultimap%2Fmodifiers%2Fswap.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -54,6 +54,10 @@ void test02()\n   VERIFY(1 == swap_calls);\n }\n \n+#if !__GXX_WEAK__ && _MT_ALLOCATOR_H\n+template class __gnu_cxx::__mt_alloc<std::_Rb_tree_node<std::pair<T const, int> > >;\n+#endif\n+\n // See c++/13658 for background info.\n int main()\n {"}, {"sha": "b9632cb88ae3c8f3a65ed3d311898bb5e36136fe", "filename": "libstdc++-v3/testsuite/23_containers/multiset/modifiers/swap.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmultiset%2Fmodifiers%2Fswap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmultiset%2Fmodifiers%2Fswap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fmultiset%2Fmodifiers%2Fswap.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -54,6 +54,10 @@ void test02()\n   VERIFY(1 == swap_calls);\n }\n \n+#if !__GXX_WEAK__ && _MT_ALLOCATOR_H\n+template class __gnu_cxx::__mt_alloc<std::_Rb_tree_node<T> >;\n+#endif\n+\n // See c++/13658 for background info.\n int main()\n {"}, {"sha": "dcc69c99b3af18289268712a6e54ea1d0555a03e", "filename": "libstdc++-v3/testsuite/23_containers/set/modifiers/swap.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fset%2Fmodifiers%2Fswap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fset%2Fmodifiers%2Fswap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fset%2Fmodifiers%2Fswap.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -54,6 +54,10 @@ void test02()\n   VERIFY(1 == swap_calls);\n }\n \n+#if !__GXX_WEAK__ && _MT_ALLOCATOR_H\n+template class __gnu_cxx::__mt_alloc<std::_Rb_tree_node<T> >;\n+#endif\n+\n // See c++/13658 for background info.\n int main()\n {"}, {"sha": "4e49635bc2249fe5a3fd07a87aa927c2fa2ed2ba", "filename": "libstdc++-v3/testsuite/23_containers/vector/modifiers/swap.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fmodifiers%2Fswap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dde938c119bc55f7b7ee5aedf4f5962e98a39b0/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fmodifiers%2Fswap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fmodifiers%2Fswap.cc?ref=6dde938c119bc55f7b7ee5aedf4f5962e98a39b0", "patch": "@@ -54,6 +54,10 @@ void test02()\n   VERIFY(1 == swap_calls);\n }\n \n+#if !__GXX_WEAK__ && _MT_ALLOCATOR_H\n+template class __gnu_cxx::__mt_alloc<T>;\n+#endif\n+\n // See c++/13658 for background info.\n int main()\n {"}]}