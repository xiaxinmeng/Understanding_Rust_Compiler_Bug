{"sha": "50cd60be11a52f6ee997d331f83c5b62ee59f448", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTBjZDYwYmUxMWE1MmY2ZWU5OTdkMzMxZjgzYzViNjJlZTU5ZjQ0OA==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2009-08-03T21:38:53Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2009-08-03T21:38:53Z"}, "message": "re PR c/39902 (x * 1.0DF gets wrong value)\n\n\tPR c/39902\n\t* simplify-rtx.c (simplify_binary_operation_1): Disable\n\tsimplifications for decimal float operations.\n\n\tPR c/39902\n\t* gcc.target/powerpc/pr39902-2.c: New test.\n\nFrom-SVN: r150383", "tree": {"sha": "3a7a0f8a8cbeffcc21995e11ae23fb831f2f9e90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3a7a0f8a8cbeffcc21995e11ae23fb831f2f9e90"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50cd60be11a52f6ee997d331f83c5b62ee59f448", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50cd60be11a52f6ee997d331f83c5b62ee59f448", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50cd60be11a52f6ee997d331f83c5b62ee59f448", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50cd60be11a52f6ee997d331f83c5b62ee59f448/comments", "author": null, "committer": null, "parents": [{"sha": "1768a052038172cc56a7af8ad2e90982f3c84d13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1768a052038172cc56a7af8ad2e90982f3c84d13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1768a052038172cc56a7af8ad2e90982f3c84d13"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "a888baf4235a73efeafd5d62a25cf35dce6b6c86", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=50cd60be11a52f6ee997d331f83c5b62ee59f448", "patch": "@@ -1,3 +1,9 @@\n+2009-08-03  Janis Johnson  <janis187@us.ibm.com>\n+\n+\tPR c/39902\n+\t* simplify-rtx.c (simplify_binary_operation_1): Disable\n+\tsimplifications for decimal float operations.\n+\n 2009-08-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/40943"}, {"sha": "e3809a8500002316139cb25d2f0a944b343baeba", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=50cd60be11a52f6ee997d331f83c5b62ee59f448", "patch": "@@ -1997,6 +1997,7 @@ simplify_binary_operation_1 (enum rtx_code code, enum machine_mode mode,\n       /* x*2 is x+x and x*(-1) is -x */\n       if (GET_CODE (trueop1) == CONST_DOUBLE\n \t  && SCALAR_FLOAT_MODE_P (GET_MODE (trueop1))\n+\t  && !DECIMAL_FLOAT_MODE_P (GET_MODE (trueop1))\n \t  && GET_MODE (op0) == mode)\n \t{\n \t  REAL_VALUE_TYPE d;"}, {"sha": "86a991e2600a49dc26e6c783a984a0cc32af72bf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=50cd60be11a52f6ee997d331f83c5b62ee59f448", "patch": "@@ -1,3 +1,8 @@\n+2009-08-03  Janis Johnson  <janis187@us.ibm.com>\n+\n+\tPR c/39902\n+\t* gcc.target/powerpc/pr39902-2.c: New test.\n+\n 2009-08-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/40943"}, {"sha": "463a36c1beed4583b34d6f5aed81199028386886", "filename": "gcc/testsuite/gcc.target/powerpc/pr39902-2.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr39902-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50cd60be11a52f6ee997d331f83c5b62ee59f448/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr39902-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr39902-2.c?ref=50cd60be11a52f6ee997d331f83c5b62ee59f448", "patch": "@@ -0,0 +1,28 @@\n+/* Check that simplification \"x*(-1)\" -> \"-x\" is not performed for decimal\n+   float types.  */\n+\n+/* { dg-do compile { target { powerpc*-*-linux* && powerpc_fprs } } } */\n+/* { dg-options \"-std=gnu99 -O -mcpu=power6\" } */\n+/* { dg-final { scan-assembler-not \"fneg\" } } */\n+\n+extern _Decimal32 a32, b32;\n+extern _Decimal64 a64, b64;\n+extern _Decimal128 a128, b128;\n+\n+void\n+foo32 (void)\n+{\n+  b32 = a32 * -1.0DF;\n+}\n+\n+void\n+foo64 (void)\n+{\n+  b64 = a64 * -1.0DD;\n+}\n+\n+void\n+foo128 (void)\n+{\n+  b128 = a128 * -1.0DL;\n+}"}]}