{"sha": "91292490d573f9f9e4f162d6d8c693a969197f2d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTEyOTI0OTBkNTczZjlmOWU0ZjE2MmQ2ZDhjNjkzYTk2OTE5N2YyZA==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2021-08-12T14:01:01Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2021-08-16T07:53:41Z"}, "message": "ipa: make target_clone default decl local [PR101726]\n\n\tPR ipa/101726\n\ngcc/ChangeLog:\n\n\t* multiple_target.c (create_dispatcher_calls): Make default\n\t  function local only if it is a definition.", "tree": {"sha": "3b8569b901d25ad6139c6b6040c871a78c77a9f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b8569b901d25ad6139c6b6040c871a78c77a9f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/91292490d573f9f9e4f162d6d8c693a969197f2d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91292490d573f9f9e4f162d6d8c693a969197f2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91292490d573f9f9e4f162d6d8c693a969197f2d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91292490d573f9f9e4f162d6d8c693a969197f2d/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b0de3ad2620d665ab481c2f24204f77f386ff6b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0de3ad2620d665ab481c2f24204f77f386ff6b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0de3ad2620d665ab481c2f24204f77f386ff6b2"}], "stats": {"total": 25, "additions": 14, "deletions": 11}, "files": [{"sha": "6c0565880c58c444c633fa398f96f17151a6014e", "filename": "gcc/multiple_target.c", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91292490d573f9f9e4f162d6d8c693a969197f2d/gcc%2Fmultiple_target.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91292490d573f9f9e4f162d6d8c693a969197f2d/gcc%2Fmultiple_target.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmultiple_target.c?ref=91292490d573f9f9e4f162d6d8c693a969197f2d", "patch": "@@ -170,17 +170,20 @@ create_dispatcher_calls (struct cgraph_node *node)\n \t\t\t\t      clone_function_name_numbered (\n \t\t\t\t\t  node->decl, \"default\"));\n \n-  /* FIXME: copy of cgraph_node::make_local that should be cleaned up\n-\t    in next stage1.  */\n-  node->make_decl_local ();\n-  node->set_section (NULL);\n-  node->set_comdat_group (NULL);\n-  node->externally_visible = false;\n-  node->forced_by_abi = false;\n-  node->set_section (NULL);\n-\n-  DECL_ARTIFICIAL (node->decl) = 1;\n-  node->force_output = true;\n+  if (node->definition)\n+    {\n+      /* FIXME: copy of cgraph_node::make_local that should be cleaned up\n+\t\tin next stage1.  */\n+      node->make_decl_local ();\n+      node->set_section (NULL);\n+      node->set_comdat_group (NULL);\n+      node->externally_visible = false;\n+      node->forced_by_abi = false;\n+      node->set_section (NULL);\n+\n+      DECL_ARTIFICIAL (node->decl) = 1;\n+      node->force_output = true;\n+    }\n }\n \n /* Return length of attribute names string,"}]}