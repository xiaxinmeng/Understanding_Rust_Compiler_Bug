{"sha": "fe33bfb3e0604634bfeb1b7c77bd495697054327", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmUzM2JmYjNlMDYwNDYzNGJmZWIxYjdjNzdiZDQ5NTY5NzA1NDMyNw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-05-15T16:16:47Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-05-15T16:16:47Z"}, "message": "(INITIALIZE_TRAMPOLINE): Don't make improper SUBREGs and ensure that\nCXT and FNADDR are in registers.\n\nFrom-SVN: r4474", "tree": {"sha": "c8f9469e5092231dd46d80c38c4e3572da3568df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8f9469e5092231dd46d80c38c4e3572da3568df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe33bfb3e0604634bfeb1b7c77bd495697054327", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe33bfb3e0604634bfeb1b7c77bd495697054327", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe33bfb3e0604634bfeb1b7c77bd495697054327", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe33bfb3e0604634bfeb1b7c77bd495697054327/comments", "author": null, "committer": null, "parents": [{"sha": "d6cca343c5bf09fe1b86369c28966c79389078b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6cca343c5bf09fe1b86369c28966c79389078b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6cca343c5bf09fe1b86369c28966c79389078b1"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "2305341403c6ef28f0b93981e417db389ce2f3d6", "filename": "gcc/config/i860/i860.h", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe33bfb3e0604634bfeb1b7c77bd495697054327/gcc%2Fconfig%2Fi860%2Fi860.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe33bfb3e0604634bfeb1b7c77bd495697054327/gcc%2Fconfig%2Fi860%2Fi860.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi860%2Fi860.h?ref=fe33bfb3e0604634bfeb1b7c77bd495697054327", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler, for Intel 860.\n-   Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n+   Copyright (C) 1989, 1991, 1993 Free Software Foundation, Inc.\n \n    Written by Richard Stallman (rms@ai.mit.edu).\n \n@@ -639,18 +639,20 @@ struct cumulative_args { int ints, floats; };\n \n #define INITIALIZE_TRAMPOLINE(TRAMP, FNADDR, CXT)\t\t\t\\\n {\t\t\t\t\t\t\t\t\t\\\n-  rtx low_cxt = expand_shift (RSHIFT_EXPR, SImode, CXT,\t\t\t\\\n-\t\t\t      size_int (16), 0, 0);\t\t\t\\\n-  rtx low_fn = expand_shift (RSHIFT_EXPR, SImode, FNADDR,\t\t\\\n+  rtx cxt = force_reg (Pmode, CXT);\t\t\t\t\t\\\n+  rtx fn = force_reg (Pmode, FNADDR);\t\t\t\t\t\\\n+  rtx hi_cxt = expand_shift (RSHIFT_EXPR, SImode, cxt,\t\t\t\\\n \t\t\t     size_int (16), 0, 0);\t\t\t\\\n+  rtx hi_fn = expand_shift (RSHIFT_EXPR, SImode, fn,\t\t\t\\\n+\t\t\t    size_int (16), 0, 0);\t\t\t\\\n   emit_move_insn (gen_rtx (MEM, HImode, plus_constant (TRAMP, 16)),\t\\\n-\t\t  gen_rtx (SUBREG, HImode, CXT));\t\t\t\\\n+\t\t  gen_lowpart (HImode, cxt));\t\t\t\t\\\n   emit_move_insn (gen_rtx (MEM, HImode, plus_constant (TRAMP, 4)),\t\\\n-\t\t  gen_rtx (SUBREG, HImode, FNADDR));\t\t\t\\\n+\t\t  gen_lowpart (HImode, fn));\t\t\t\t\\\n   emit_move_insn (gen_rtx (MEM, HImode, plus_constant (TRAMP, 8)),\t\\\n-\t\t  gen_rtx (SUBREG, HImode, low_cxt));\t\t\t\\\n+\t\t  gen_lowpart (HImode, hi_cxt));\t\t\t\\\n   emit_move_insn (gen_rtx (MEM, HImode, plus_constant (TRAMP, 0)),\t\\\n-\t\t  gen_rtx (SUBREG, HImode, low_fn));\t\t\t\\\n+\t\t  gen_lowpart (HImode, hi_fn));\t\t\t\t\\\n }\n \f\n /* Addressing modes, and classification of registers for them.  */"}]}