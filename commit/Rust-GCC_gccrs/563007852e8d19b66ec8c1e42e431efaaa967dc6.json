{"sha": "563007852e8d19b66ec8c1e42e431efaaa967dc6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTYzMDA3ODUyZThkMTliNjZlYzhjMWU0MmU0MzFlZmFhYTk2N2RjNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-06-27T16:56:08Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-06-27T16:56:08Z"}, "message": "c-common.h (c_tree_chain_next): New static inline function.\n\n\t* c-common.h (c_tree_chain_next): New static inline function.\n\n\t* c-decl.c (union lang_tree_node): Use it in chain_next expression.\n\n\t* cp-tree.h (union lang_tree_node): Use it in chain_next expression.\n\nFrom-SVN: r175542", "tree": {"sha": "579821206fefaa0da5676ef1f4f355f0595ce105", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/579821206fefaa0da5676ef1f4f355f0595ce105"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/563007852e8d19b66ec8c1e42e431efaaa967dc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/563007852e8d19b66ec8c1e42e431efaaa967dc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/563007852e8d19b66ec8c1e42e431efaaa967dc6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/563007852e8d19b66ec8c1e42e431efaaa967dc6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "45d439ac1a9e2df33ac7ef573009749dbebf581b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45d439ac1a9e2df33ac7ef573009749dbebf581b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45d439ac1a9e2df33ac7ef573009749dbebf581b"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "241a1f4b14939a77cdad26c3d2dc378be0e6463e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=563007852e8d19b66ec8c1e42e431efaaa967dc6", "patch": "@@ -1,5 +1,7 @@\n 2011-06-27  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* c-decl.c (union lang_tree_node): Use it in chain_next expression.\n+\n \t* builtin-types.def (BT_FN_PTR_CONST_PTR_SIZE_VAR): New.\n \t* builtins.def (BUILT_IN_ASSUME_ALIGNED): New builtin.\n \t* tree-ssa-structalias.c (find_func_aliases_for_builtin_call,"}, {"sha": "7198cb2d5d3bc7364eb052f33d90152cc9b9d036", "filename": "gcc/c-decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=563007852e8d19b66ec8c1e42e431efaaa967dc6", "patch": "@@ -238,7 +238,7 @@ extern char C_SIZEOF_STRUCT_LANG_IDENTIFIER_isnt_accurate\n /* The resulting tree type.  */\n \n union GTY((desc (\"TREE_CODE (&%h.generic) == IDENTIFIER_NODE\"),\n-       chain_next (\"CODE_CONTAINS_STRUCT (TREE_CODE (&%h.generic), TS_TYPE_COMMON) ? (union lang_tree_node *) TYPE_NEXT_VARIANT (&%h.generic) : CODE_CONTAINS_STRUCT (TREE_CODE (&%h.generic), TS_COMMON) ? ((union lang_tree_node *) TREE_CHAIN (&%h.generic)) : NULL\")))  lang_tree_node\n+       chain_next (\"(union lang_tree_node *) c_tree_chain_next (&%h.generic)\"))) lang_tree_node\n  {\n   union tree_node GTY ((tag (\"0\"),\n \t\t\tdesc (\"tree_node_structure (&%h)\")))"}, {"sha": "8cdeb3372b21b4ab7f79c44f848e8b1047597b9a", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=563007852e8d19b66ec8c1e42e431efaaa967dc6", "patch": "@@ -1,5 +1,7 @@\n 2011-06-27  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* c-common.h (c_tree_chain_next): New static inline function.\n+\n \t* c-common.c (check_builtin_function_arguments): Handle\n \tBUILT_IN_ASSUME_ALIGNED.\n "}, {"sha": "a80c0eaec4093ad49ac89328a2f23825fdd96af1", "filename": "gcc/c-family/c-common.h", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fc-family%2Fc-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fc-family%2Fc-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.h?ref=563007852e8d19b66ec8c1e42e431efaaa967dc6", "patch": "@@ -1016,4 +1016,19 @@ extern bool c_omp_sharing_predetermined (tree);\n extern tree c_omp_remap_decl (tree, bool);\n extern void record_types_used_by_current_var_decl (tree);\n \n+/* Return next tree in the chain for chain_next walking of tree nodes.  */\n+static inline tree\n+c_tree_chain_next (tree t)\n+{\n+  /* TREE_CHAIN of a type is TYPE_STUB_DECL, which is different\n+     kind of object, never a long chain of nodes.  Prefer\n+     TYPE_NEXT_VARIANT for types.  */\n+  if (CODE_CONTAINS_STRUCT (TREE_CODE (t), TS_TYPE_COMMON))\n+    return TYPE_NEXT_VARIANT (t);\n+  /* Otherwise, if there is TREE_CHAIN, return it.  */\n+  if (CODE_CONTAINS_STRUCT (TREE_CODE (t), TS_COMMON))\n+    return TREE_CHAIN (t);\n+  return NULL;\n+}\n+\n #endif /* ! GCC_C_COMMON_H */"}, {"sha": "45b85302afc1a3b62e6f1205d6256db4ce44a5c2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=563007852e8d19b66ec8c1e42e431efaaa967dc6", "patch": "@@ -1,3 +1,7 @@\n+2011-06-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* cp-tree.h (union lang_tree_node): Use it in chain_next expression.\n+\n 2011-06-26  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/49528"}, {"sha": "9afb33cc144a5f542823ed5b6d5cf20b0d9a69ae", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563007852e8d19b66ec8c1e42e431efaaa967dc6/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=563007852e8d19b66ec8c1e42e431efaaa967dc6", "patch": "@@ -729,7 +729,7 @@ enum cp_tree_node_structure_enum {\n \n /* The resulting tree type.  */\n union GTY((desc (\"cp_tree_node_structure (&%h)\"),\n-       chain_next (\"CODE_CONTAINS_STRUCT (TREE_CODE (&%h.generic), TS_TYPE_COMMON) ? ((union lang_tree_node *) TYPE_NEXT_VARIANT (&%h.generic)) : CODE_CONTAINS_STRUCT (TREE_CODE (&%h.generic), TS_COMMON) ? ((union lang_tree_node *) TREE_CHAIN (&%h.generic)) : NULL\"))) lang_tree_node {\n+       chain_next (\"(union lang_tree_node *) c_tree_chain_next (&%h.generic)\"))) lang_tree_node {\n   union tree_node GTY ((tag (\"TS_CP_GENERIC\"),\n \t\t\tdesc (\"tree_node_structure (&%h)\"))) generic;\n   struct template_parm_index_s GTY ((tag (\"TS_CP_TPI\"))) tpi;"}]}