{"sha": "bfd9cff5c5bbcbea235e60529138848df5222b0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZkOWNmZjVjNWJiY2JlYTIzNWU2MDUyOTEzODg0OGRmNTIyMmIwYw==", "commit": {"author": {"name": "David Daney", "email": "ddaney@avtrex.com", "date": "2007-09-10T18:23:27Z"}, "committer": {"name": "David Daney", "email": "daney@gcc.gnu.org", "date": "2007-09-10T18:23:27Z"}, "message": "mips.md (UNSPEC_MEMORY_BARRIER): New entry in define_constants.\n\n\t* config/mips/mips.md (UNSPEC_MEMORY_BARRIER): New entry in\n\tdefine_constants.\n\t(memory_barrier): Rewrote as an insn that clobbers memory.\n\nFrom-SVN: r128349", "tree": {"sha": "aa9bd4528106fdec43ae74963367caa9e03fe91d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa9bd4528106fdec43ae74963367caa9e03fe91d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bfd9cff5c5bbcbea235e60529138848df5222b0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfd9cff5c5bbcbea235e60529138848df5222b0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfd9cff5c5bbcbea235e60529138848df5222b0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfd9cff5c5bbcbea235e60529138848df5222b0c/comments", "author": null, "committer": null, "parents": [{"sha": "04910611bd80c3cf5b96405c58942b6f80f96fc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04910611bd80c3cf5b96405c58942b6f80f96fc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04910611bd80c3cf5b96405c58942b6f80f96fc3"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "9360ae05cf121be257962958d017a6be6303dbd0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfd9cff5c5bbcbea235e60529138848df5222b0c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfd9cff5c5bbcbea235e60529138848df5222b0c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bfd9cff5c5bbcbea235e60529138848df5222b0c", "patch": "@@ -1,3 +1,9 @@\n+2007-09-10  David Daney  <ddaney@avtrex.com>\n+\n+\t* config/mips/mips.md (UNSPEC_MEMORY_BARRIER): New entry in\n+\tdefine_constants.\n+\t(memory_barrier): Rewrote as an insn that clobbers memory.\n+\n 2007-09-10  Richard Sandiford  <richard@codesourcery.com>\n \n \t* config/mips/mips.c (mips_global_pointer): Check"}, {"sha": "42f9b1ea323903d12d0be52036ff890e92987116", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfd9cff5c5bbcbea235e60529138848df5222b0c/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfd9cff5c5bbcbea235e60529138848df5222b0c/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=bfd9cff5c5bbcbea235e60529138848df5222b0c", "patch": "@@ -57,6 +57,7 @@\n    (UNSPEC_SYNC_OLD_OP\t\t38)\n    (UNSPEC_SYNC_NEW_OP\t\t39)\n    (UNSPEC_SYNC_EXCHANGE\t40)\n+   (UNSPEC_MEMORY_BARRIER\t41)\n    \n    (UNSPEC_ADDRESS_FIRST\t100)\n \n@@ -4304,10 +4305,11 @@\n \n ;; Atomic memory operations.\n \n-(define_expand \"memory_barrier\"\n-  [(unspec_volatile [(const_int 0)] UNSPEC_SYNC)]\n+(define_insn \"memory_barrier\"\n+  [(set (mem:BLK (scratch))\n+        (unspec:BLK [(const_int 0)] UNSPEC_MEMORY_BARRIER))]\n   \"ISA_HAS_SYNC\"\n-  \"\")\n+  \"sync\")\n \n (define_insn \"sync_compare_and_swap<mode>\"\n   [(set (match_operand:GPR 0 \"register_operand\" \"=&d,d\")"}]}