{"sha": "8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGNlYzE2MjRjNWMxNGFkNzYyNjhjYjFjMjFmYTJjNWU3NzBiYmViNw==", "commit": {"author": {"name": "Revital Eres", "email": "eres@il.ibm.com", "date": "2007-07-03T10:27:19Z"}, "committer": {"name": "Revital Eres", "email": "revitale@gcc.gnu.org", "date": "2007-07-03T10:27:19Z"}, "message": "modulo-sched: print sccs and check it\n\nFrom-SVN: r126249", "tree": {"sha": "a2979cd31d86c0bfd58e49b08c1f11996c3a7605", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2979cd31d86c0bfd58e49b08c1f11996c3a7605"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/comments", "author": {"login": "revit13", "id": 16211463, "node_id": "MDQ6VXNlcjE2MjExNDYz", "avatar_url": "https://avatars.githubusercontent.com/u/16211463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/revit13", "html_url": "https://github.com/revit13", "followers_url": "https://api.github.com/users/revit13/followers", "following_url": "https://api.github.com/users/revit13/following{/other_user}", "gists_url": "https://api.github.com/users/revit13/gists{/gist_id}", "starred_url": "https://api.github.com/users/revit13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/revit13/subscriptions", "organizations_url": "https://api.github.com/users/revit13/orgs", "repos_url": "https://api.github.com/users/revit13/repos", "events_url": "https://api.github.com/users/revit13/events{/privacy}", "received_events_url": "https://api.github.com/users/revit13/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bb9e683e797818425ed3c7bf372455e6aa70c021", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9e683e797818425ed3c7bf372455e6aa70c021", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb9e683e797818425ed3c7bf372455e6aa70c021"}], "stats": {"total": 60, "additions": 60, "deletions": 0}, "files": [{"sha": "2b9b2452df57842ecd3e9922b81dd8435f74a9a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "patch": "@@ -1,3 +1,11 @@\n+2007-07-03  Revital Eres  <eres@il.ibm.com>\n+\n+\t* ddg.c (print_sccs): New function.\n+\t(check_sccs): New function.\n+\t(create_ddg_all_sccs): Use it.\n+\t* ddg.h (print_sccs): Declare.\n+\t* modulo-sched.c (sms_order_nodes): Call print_sccs.\n+\n 2007-07-03  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* targhooks.h (default_mode_for_suffix): New function declaration."}, {"sha": "9822806546077e7493d93c1969806f8263c7eea1", "filename": "gcc/ddg.c", "status": "modified", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2Fddg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2Fddg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fddg.c?ref=8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "patch": "@@ -630,6 +630,30 @@ vcg_print_ddg (FILE *file, ddg_ptr g)\n   fprintf (file, \"}\\n\");\n }\n \n+/* Dump the sccs in SCCS.  */\n+void\n+print_sccs (FILE *file, ddg_all_sccs_ptr sccs, ddg_ptr g)\n+{\n+  unsigned int u = 0;\n+  sbitmap_iterator sbi;\n+  int i;\n+\n+  if (!file)\n+    return;\n+\n+  fprintf (file, \"\\n;; Number of SCC nodes - %d\\n\", sccs->num_sccs);\n+  for (i = 0; i < sccs->num_sccs; i++)\n+    {\n+      fprintf (file, \"SCC number: %d\\n\", i);\n+      EXECUTE_IF_SET_IN_SBITMAP (sccs->sccs[i]->nodes, 0, u, sbi)\n+      {\n+        fprintf (file, \"insn num %d\\n\", u);\n+        print_rtl_single (file, g->nodes[u].insn);\n+      }\n+    }\n+  fprintf (file, \"\\n\");\n+}\n+\n /* Create an edge and initialize it with given values.  */\n static ddg_edge_ptr\n create_ddg_edge (ddg_node_ptr src, ddg_node_ptr dest,\n@@ -846,6 +870,27 @@ order_sccs (ddg_all_sccs_ptr g)\n \t (int (*) (const void *, const void *)) compare_sccs);\n }\n \n+/* Check that every node in SCCS belongs to exactly one strongly connected\n+   component and that no element of SCCS is empty.  */\n+static void\n+check_sccs (ddg_all_sccs_ptr sccs, int num_nodes)\n+{\n+  int i = 0;\n+  sbitmap tmp = sbitmap_alloc (num_nodes);\n+\n+  sbitmap_zero (tmp);\n+  for (i = 0; i < sccs->num_sccs; i++)\n+    {\n+      gcc_assert (!sbitmap_empty_p (sccs->sccs[i]->nodes));\n+      /* Verify that every node in sccs is in exactly one strongly\n+         connected component.  */\n+      gcc_assert (!sbitmap_any_common_bits (tmp, sccs->sccs[i]->nodes));\n+      sbitmap_a_or_b (tmp, tmp, sccs->sccs[i]->nodes);\n+    }\n+  sbitmap_free (tmp);\n+}\n+\n+\n /* Perform the Strongly Connected Components decomposing algorithm on the\n    DDG and return DDG_ALL_SCCS structure that contains them.  */\n ddg_all_sccs_ptr\n@@ -890,6 +935,9 @@ create_ddg_all_sccs (ddg_ptr g)\n   sbitmap_free (from);\n   sbitmap_free (to);\n   sbitmap_free (scc_nodes);\n+#ifdef ENABLE_CHECKING\n+  check_sccs (sccs, num_nodes);\n+#endif\n   return sccs;\n }\n "}, {"sha": "f82599e1e3da8a5a2c3ff0865f4cc3f944057765", "filename": "gcc/ddg.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2Fddg.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2Fddg.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fddg.h?ref=8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "patch": "@@ -171,6 +171,7 @@ void free_ddg (ddg_ptr);\n void print_ddg (FILE *, ddg_ptr);\n void vcg_print_ddg (FILE *, ddg_ptr);\n void print_ddg_edge (FILE *, ddg_edge_ptr);\n+void print_sccs (FILE *, ddg_all_sccs_ptr, ddg_ptr);\n \n ddg_node_ptr get_node_of_insn (ddg_ptr, rtx);\n "}, {"sha": "bf9bc9b7dcd5fed833e6ea98b3378dcfc97e4212", "filename": "gcc/modulo-sched.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2Fmodulo-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7/gcc%2Fmodulo-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmodulo-sched.c?ref=8cec1624c5c14ad76268cb1c21fa2c5e770bbeb7", "patch": "@@ -1648,6 +1648,9 @@ sms_order_nodes (ddg_ptr g, int mii, int * node_order)\n \n   nopa nops = calculate_order_params (g, mii);\n \n+  if (dump_file)\n+    print_sccs (dump_file, sccs, g);\n+\n   order_nodes_of_sccs (sccs, node_order);\n \n   if (sccs->num_sccs > 0)"}]}