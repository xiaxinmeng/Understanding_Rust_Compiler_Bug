{"sha": "c20a90e0c82f7037f1064693ceb17a58e4682c22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzIwYTkwZTBjODJmNzAzN2YxMDY0NjkzY2ViMTdhNThlNDY4MmMyMg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-02T17:17:55Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-02T17:17:55Z"}, "message": "re PR fortran/91784 (ICE in gfc_real2complex, at fortran/arith.c:2208)\n\n2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91784\n\t* simplify.c (gfc_convert_constant): Simplify expression if the\n\texpres\tion type is EXPR_OP.\n\n2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91784\n\t* gfortran.dg/pr91784.f90: New test.\n\nFrom-SVN: r276474", "tree": {"sha": "a60668aea8fec9869bb3d87dc719d2fb5be85308", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a60668aea8fec9869bb3d87dc719d2fb5be85308"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c20a90e0c82f7037f1064693ceb17a58e4682c22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c20a90e0c82f7037f1064693ceb17a58e4682c22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c20a90e0c82f7037f1064693ceb17a58e4682c22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c20a90e0c82f7037f1064693ceb17a58e4682c22/comments", "author": null, "committer": null, "parents": [{"sha": "307de1007192b12dcf5b21b4444904567a543b2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/307de1007192b12dcf5b21b4444904567a543b2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/307de1007192b12dcf5b21b4444904567a543b2e"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "ea1177f4553876f036eed3e5d8e10be9f29c209a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c20a90e0c82f7037f1064693ceb17a58e4682c22", "patch": "@@ -1,3 +1,9 @@\n+2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91784\n+\t* simplify.c (gfc_convert_constant): Simplify expression if the\n+\texpression type is EXPR_OP.\n+\n 2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/91785"}, {"sha": "32ebcc04121341c52f14720dab8bc7a19952c4ce", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=c20a90e0c82f7037f1064693ceb17a58e4682c22", "patch": "@@ -8508,10 +8508,10 @@ gfc_convert_constant (gfc_expr *e, bt type, int kind)\n \t    {\n \t      if (c->expr->expr_type == EXPR_ARRAY)\n \t\ttmp = gfc_convert_constant (c->expr, type, kind);\n-\t      else if (c->expr->expr_type == EXPR_OP\n-\t\t       && c->expr->value.op.op == INTRINSIC_PARENTHESES)\n+\t      else if (c->expr->expr_type == EXPR_OP)\n \t\t{\n-\t\t  gfc_simplify_expr (c->expr, 1);\n+\t\t  if (!gfc_simplify_expr (c->expr, 1))\n+\t\t    return &gfc_bad_expr;\n \t\t  tmp = f (c->expr, kind);\n \t\t}\n \t      else"}, {"sha": "0bc13fc1b630572e72068f3673d591a1a160ada9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c20a90e0c82f7037f1064693ceb17a58e4682c22", "patch": "@@ -1,3 +1,8 @@\n+2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91784\n+\t* gfortran.dg/pr91784.f90: New test.\n+\n 2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/91785"}, {"sha": "25280e07eb2f7b73be6628e498fb9f0618fa6514", "filename": "gcc/testsuite/gfortran.dg/pr91784.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91784.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20a90e0c82f7037f1064693ceb17a58e4682c22/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91784.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91784.f90?ref=c20a90e0c82f7037f1064693ceb17a58e4682c22", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do run }\n+! PR fortran/91784\n+! Code originally contributed by Gerhard Steinmetz\n+program p\n+   complex :: x(1)\n+   x = (1.0, 2.0) * [real :: -(3.0 + 4.0)]\n+   if (int(real(x(1))) /= -7) stop 1\n+   if (int(aimag(x(1))) /= -14) stop 2\n+end"}]}