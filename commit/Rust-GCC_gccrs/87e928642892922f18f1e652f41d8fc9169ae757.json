{"sha": "87e928642892922f18f1e652f41d8fc9169ae757", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODdlOTI4NjQyODkyOTIyZjE4ZjFlNjUyZjQxZDhmYzkxNjlhZTc1Nw==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2009-11-06T19:10:07Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2009-11-06T19:10:07Z"}, "message": "re PR c++/41536 (always_inline does not work always with constructors)\n\n2009-11-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR c++/41536\n        * optimize.c (maybe_clone_body): Copy DECL_ATTRIBUTES and\n        DECL_DISREGARD_INLINE_LIMITS also.\n\n2009-11-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR c++/41536\n        * g++.dg/ext/always_inline-5.C: New test.\n\nFrom-SVN: r153974", "tree": {"sha": "b288755ba9280ce0ec7b701f671fe7611718d52a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b288755ba9280ce0ec7b701f671fe7611718d52a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87e928642892922f18f1e652f41d8fc9169ae757", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87e928642892922f18f1e652f41d8fc9169ae757", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87e928642892922f18f1e652f41d8fc9169ae757", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87e928642892922f18f1e652f41d8fc9169ae757/comments", "author": null, "committer": null, "parents": [{"sha": "2e3135726b941c5d1cd87d1905678a7533ed7d4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e3135726b941c5d1cd87d1905678a7533ed7d4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e3135726b941c5d1cd87d1905678a7533ed7d4d"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "6d7fd34cb614b2a6e3a559704bd79a34df78fd62", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=87e928642892922f18f1e652f41d8fc9169ae757", "patch": "@@ -1,3 +1,9 @@\n+2009-11-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR c++/41536\n+\t* optimize.c (maybe_clone_body): Copy DECL_ATTRIBUTES and\n+\tDECL_DISREGARD_INLINE_LIMITS also.\n+\n 2009-11-06  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/41967"}, {"sha": "662bd4a22a38d3644ca5ec33b7f881e9c462e82d", "filename": "gcc/cp/optimize.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Fcp%2Foptimize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Fcp%2Foptimize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Foptimize.c?ref=87e928642892922f18f1e652f41d8fc9169ae757", "patch": "@@ -199,6 +199,8 @@ maybe_clone_body (tree fn)\n       DECL_VISIBILITY (clone) = DECL_VISIBILITY (fn);\n       DECL_VISIBILITY_SPECIFIED (clone) = DECL_VISIBILITY_SPECIFIED (fn);\n       DECL_DLLIMPORT_P (clone) = DECL_DLLIMPORT_P (fn);\n+      DECL_ATTRIBUTES (clone) = copy_list (DECL_ATTRIBUTES (fn));\n+      DECL_DISREGARD_INLINE_LIMITS (clone) = DECL_DISREGARD_INLINE_LIMITS (fn);\n \n       /* Adjust the parameter names and locations.  */\n       parm = DECL_ARGUMENTS (fn);"}, {"sha": "1c31757dfbc1dfc206741910fa739b82a4c8de00", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=87e928642892922f18f1e652f41d8fc9169ae757", "patch": "@@ -1,3 +1,8 @@\n+2009-11-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR c++/41536\n+\t* g++.dg/ext/always_inline-5.C: New test.\n+\n 2009-11-06  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/41967"}, {"sha": "73caa094f4724d89c2ccd10e53cdde5615c24952", "filename": "gcc/testsuite/g++.dg/ext/always_inline-5.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Falways_inline-5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e928642892922f18f1e652f41d8fc9169ae757/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Falways_inline-5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Falways_inline-5.C?ref=87e928642892922f18f1e652f41d8fc9169ae757", "patch": "@@ -0,0 +1,28 @@\n+// { dg-do compile }\n+struct f\n+{\n+  inline f(void);\n+  inline void f1(void);\n+  int a;\n+};\n+\n+inline __attribute__((always_inline))  f::f(void)\n+{\n+  a++;\n+}\n+\n+inline __attribute__((always_inline)) void  f::f1(void)\n+{\n+  a++;\n+}\n+\n+void g(void)\n+{\n+  f a, b, c, d;\n+  a.f1();\n+}\n+\n+// f::f() should be inlined even at -O0\n+// { dg-final { scan-assembler-not \"_ZN1fC1Ev\" } }\n+// Likewise for f::f1()\n+// { dg-final { scan-assembler-not \"_ZN1f2f1Ev\" } }"}]}