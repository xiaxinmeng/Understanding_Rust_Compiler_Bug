{"sha": "c802301136abdeabc75c5818e893c439a57f0597", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzgwMjMwMTEzNmFiZGVhYmM3NWM1ODE4ZTg5M2M0MzlhNTdmMDU5Nw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-09-08T05:37:20Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-09-08T05:37:20Z"}, "message": "rs6000.c: Include ggc.h.\n\n\t* rs6000.c: Include ggc.h.\n\t(rs6000_add_gc_roots): New function.\n\t(override_options): Call it.\n\nFrom-SVN: r29184", "tree": {"sha": "77a81eacf0fa9e728bc005551080076fef6b2f95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77a81eacf0fa9e728bc005551080076fef6b2f95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c802301136abdeabc75c5818e893c439a57f0597", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c802301136abdeabc75c5818e893c439a57f0597", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c802301136abdeabc75c5818e893c439a57f0597", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c802301136abdeabc75c5818e893c439a57f0597/comments", "author": null, "committer": null, "parents": [{"sha": "6db21c7fb889047cd93514174bc9ad937a11ba22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6db21c7fb889047cd93514174bc9ad937a11ba22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6db21c7fb889047cd93514174bc9ad937a11ba22"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "cf117bd460a68a50cdc8d78348acb6f81a533b18", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c802301136abdeabc75c5818e893c439a57f0597/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c802301136abdeabc75c5818e893c439a57f0597/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c802301136abdeabc75c5818e893c439a57f0597", "patch": "@@ -1,3 +1,9 @@\n+Tue Sep  7 22:39:18 1999  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* rs6000.c: Include ggc.h.\n+\t(rs6000_add_gc_roots): New function.\n+\t(override_options): Call it.\n+\n Tue Sep  7 22:09:03 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* alpha.h (alpha_compare): New."}, {"sha": "0c32c77e8958b3289b2e7895283f3543d48a4a05", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c802301136abdeabc75c5818e893c439a57f0597/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c802301136abdeabc75c5818e893c439a57f0597/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=c802301136abdeabc75c5818e893c439a57f0597", "patch": "@@ -38,6 +38,7 @@ Boston, MA 02111-1307, USA.  */\n #include \"function.h\"\n #include \"output.h\"\n #include \"toplev.h\"\n+#include \"ggc.h\"\n \n #ifndef TARGET_NO_PROTOTYPE\n #define TARGET_NO_PROTOTYPE 0\n@@ -111,6 +112,8 @@ int rs6000_debug_arg;\t\t/* debug argument handling */\n /* Flag to say the TOC is initialized */\n int toc_initialized;\n \n+static void rs6000_add_gc_roots PROTO ((void));\n+\n \f\n /* Default register names.  */\n char rs6000_reg_names[][8] =\n@@ -364,6 +367,9 @@ rs6000_override_options (default_cpu)\n #ifdef SUBTARGET_OVERRIDE_OPTIONS\n   SUBTARGET_OVERRIDE_OPTIONS;\n #endif\n+\n+  /* Register global variables with the garbage collector.  */\n+  rs6000_add_gc_roots ();\n }\n \n void\n@@ -6000,3 +6006,13 @@ rs6000_fatal_bad_address (op)\n {\n   fatal_insn (\"bad address\", op);\n }\n+\n+/* Called to register all of our global variables with the garbage\n+   collector.  */\n+\n+static void\n+rs6000_add_gc_roots ()\n+{\n+  ggc_add_rtx_root (&rs6000_compare_op0, 1);\n+  ggc_add_rtx_root (&rs6000_compare_op1, 1);\n+}"}]}