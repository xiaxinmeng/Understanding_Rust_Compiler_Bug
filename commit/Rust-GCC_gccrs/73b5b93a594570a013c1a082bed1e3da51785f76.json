{"sha": "73b5b93a594570a013c1a082bed1e3da51785f76", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNiNWI5M2E1OTQ1NzBhMDEzYzFhMDgyYmVkMWUzZGE1MTc4NWY3Ng==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-06-13T05:56:09Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-06-13T05:56:09Z"}, "message": "os/user: Use Entersyscall.\n\nFrom-SVN: r188496", "tree": {"sha": "b2742cf228cbeb8735de4f6a2a200b9a2a32e06e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2742cf228cbeb8735de4f6a2a200b9a2a32e06e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73b5b93a594570a013c1a082bed1e3da51785f76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73b5b93a594570a013c1a082bed1e3da51785f76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73b5b93a594570a013c1a082bed1e3da51785f76", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73b5b93a594570a013c1a082bed1e3da51785f76/comments", "author": null, "committer": null, "parents": [{"sha": "57d195e2244c85b96baa4975de5a98aca45d53b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57d195e2244c85b96baa4975de5a98aca45d53b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57d195e2244c85b96baa4975de5a98aca45d53b6"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "ebc8684825db6e5b74a8a10432c264e82ce97f99", "filename": "libgo/go/os/user/lookup_unix.go", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73b5b93a594570a013c1a082bed1e3da51785f76/libgo%2Fgo%2Fos%2Fuser%2Flookup_unix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73b5b93a594570a013c1a082bed1e3da51785f76/libgo%2Fgo%2Fos%2Fuser%2Flookup_unix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fos%2Fuser%2Flookup_unix.go?ref=73b5b93a594570a013c1a082bed1e3da51785f76", "patch": "@@ -73,23 +73,28 @@ func lookup(uid int, username string, lookupByName bool) (*User, error) {\n \tconst bufSize = 1024\n \tbuf := make([]byte, bufSize)\n \tif lookupByName {\n-\t\trv := libc_getpwnam_r(syscall.StringBytePtr(username),\n+\t\tp := syscall.StringBytePtr(username)\n+\t\tsyscall.Entersyscall()\n+\t\trv := libc_getpwnam_r(p,\n \t\t\t&pwd,\n \t\t\t&buf[0],\n \t\t\tbufSize,\n \t\t\t&result)\n+\t\tsyscall.Exitsyscall()\n \t\tif rv != 0 {\n \t\t\treturn nil, fmt.Errorf(\"user: lookup username %s: %s\", username, syscall.GetErrno())\n \t\t}\n \t\tif result == nil {\n \t\t\treturn nil, UnknownUserError(username)\n \t\t}\n \t} else {\n+\t\tsyscall.Entersyscall()\n \t\trv := libc_getpwuid_r(syscall.Uid_t(uid),\n \t\t\t&pwd,\n \t\t\t&buf[0],\n \t\t\tbufSize,\n \t\t\t&result)\n+\t\tsyscall.Exitsyscall()\n \t\tif rv != 0 {\n \t\t\treturn nil, fmt.Errorf(\"user: lookup userid %d: %s\", uid, syscall.GetErrno())\n \t\t}"}]}