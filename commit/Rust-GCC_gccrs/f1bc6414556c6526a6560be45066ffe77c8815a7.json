{"sha": "f1bc6414556c6526a6560be45066ffe77c8815a7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFiYzY0MTQ1NTZjNjUyNmE2NTYwYmU0NTA2NmZmZTc3Yzg4MTVhNw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-03-10T10:11:29Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-03-10T10:11:29Z"}, "message": "trans.c (node_has_volatile_full_access): Consider only entities for objects.\n\n\t* gcc-interface/trans.c (node_has_volatile_full_access) <N_Identifier>:\n\tConsider only entities for objects.\n\nFrom-SVN: r258412", "tree": {"sha": "96d7fd84190a97e8e13135f396c57850d3e9290f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96d7fd84190a97e8e13135f396c57850d3e9290f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1bc6414556c6526a6560be45066ffe77c8815a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1bc6414556c6526a6560be45066ffe77c8815a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1bc6414556c6526a6560be45066ffe77c8815a7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1bc6414556c6526a6560be45066ffe77c8815a7/comments", "author": null, "committer": null, "parents": [{"sha": "7b602c4dc28c0eb24fec50fe20af78c13114e8a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b602c4dc28c0eb24fec50fe20af78c13114e8a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b602c4dc28c0eb24fec50fe20af78c13114e8a6"}], "stats": {"total": 53, "additions": 53, "deletions": 0}, "files": [{"sha": "5dabc1537ea31d3fa43c9b391427211672dbaa9c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=f1bc6414556c6526a6560be45066ffe77c8815a7", "patch": "@@ -1,3 +1,8 @@\n+2018-03-10  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (node_has_volatile_full_access) <N_Identifier>:\n+\tConsider only entities for objects.\n+\n 2018-03-07  Sebastian Huber  <sebastian.huber@embedded-brains.de>\n \n \t* gcc-interface/Makefile.in (OSCONS_CPP): Remove redundant"}, {"sha": "fbdced57a0affe6b9f643f7b246974c16426e20d", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=f1bc6414556c6526a6560be45066ffe77c8815a7", "patch": "@@ -4082,6 +4082,8 @@ node_has_volatile_full_access (Node_Id gnat_node)\n     case N_Identifier:\n     case N_Expanded_Name:\n       gnat_entity = Entity (gnat_node);\n+      if (!Is_Object (gnat_entity))\n+\tbreak;\n       return Is_Volatile_Full_Access (gnat_entity)\n \t     || Is_Volatile_Full_Access (Etype (gnat_entity));\n "}, {"sha": "bf028b86a22a345fee06bd330fd0f0ae15d6b41f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f1bc6414556c6526a6560be45066ffe77c8815a7", "patch": "@@ -1,3 +1,8 @@\n+2018-03-10  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/prot3.adb: New test.\n+\t* gnat.dg/prot3_pkg.ad[sb]: New helper.\n+\n 2018-03-09  Jason Merrill  <jason@redhat.com>\n \t    Paolo Carlini  <paolo.carlini@oracle.com>\n "}, {"sha": "2539065923835be02709e7d9df5e869e8334846a", "filename": "gcc/testsuite/gnat.dg/prot3.adb", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3.adb?ref=f1bc6414556c6526a6560be45066ffe77c8815a7", "patch": "@@ -0,0 +1,8 @@\n+--  { dg-do run }\n+\n+with Prot3_Pkg; use Prot3_Pkg;\n+\n+procedure Prot3 is\n+begin\n+   P.Foo (4);\n+end;"}, {"sha": "07ae1829f602844f099b11ef6b10fa8862168bfa", "filename": "gcc/testsuite/gnat.dg/prot3_pkg.adb", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3_pkg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3_pkg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3_pkg.adb?ref=f1bc6414556c6526a6560be45066ffe77c8815a7", "patch": "@@ -0,0 +1,17 @@\n+package body Prot3_Pkg is\n+   \n+   protected body Prot is\n+      function Fn (J : Short_Integer) return Rec\n+      is\n+      begin\n+\t return (V1 => J * J,\n+\t\t V2 => J);\n+      end;\n+      \n+      procedure Foo (J : Short_Integer) is\n+      begin\n+\t Val := Fn (J);\n+      end;\n+   end Prot;\n+   \n+end Prot3_Pkg;"}, {"sha": "b4cce90a54378fa5c641cf0e580ae035f7919f80", "filename": "gcc/testsuite/gnat.dg/prot3_pkg.ads", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6414556c6526a6560be45066ffe77c8815a7/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fprot3_pkg.ads?ref=f1bc6414556c6526a6560be45066ffe77c8815a7", "patch": "@@ -0,0 +1,16 @@\n+package Prot3_Pkg is\n+   \n+   type Rec is record\n+      V1 : Short_Integer;\n+      V2 : Short_Integer;\n+   end record with Volatile_Full_Access;\n+   \n+   protected type Prot is\n+      procedure Foo (J : Short_Integer);\n+   private\n+      Val : Rec;\n+   end Prot;\n+   \n+   P : Prot;\n+   \n+end Prot3_Pkg;"}]}