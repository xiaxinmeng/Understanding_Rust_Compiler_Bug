{"sha": "dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGM5ZTlmM2Y4ODkxZGFkOGFhZDliZjM0NmE2OGJlZGVhZTgyYzAzZg==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "1999-10-20T10:21:47Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "1999-10-20T10:21:47Z"}, "message": "(jump_optimize_1): More accurately detect casesi insns.\n\nFrom-SVN: r30099", "tree": {"sha": "8b19148a801536dd02ea093c480fa7aa4bae8943", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b19148a801536dd02ea093c480fa7aa4bae8943"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f/comments", "author": null, "committer": null, "parents": [{"sha": "2cd6f3b397d8f7ec02a448eb818b7a4893c5cee3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cd6f3b397d8f7ec02a448eb818b7a4893c5cee3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2cd6f3b397d8f7ec02a448eb818b7a4893c5cee3"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "9a7fd9484a2c67fd35ded2e9d67f2b03ff7816e3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "patch": "@@ -1,3 +1,7 @@\n+Wed Oct 20 10:46:41 1999  Richard Earnshaw (rearnsha@arm.com)\n+\n+\t* jump.c (jump_optimize_1): More accurately detect casesi insns.\n+\n Tue Oct 19 23:43:50 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* pa.md (call, call_value): Do not emit a blockage after restoring"}, {"sha": "9a16ac553b10554d3f465930666e4b61986ecc57", "filename": "gcc/jump.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f/gcc%2Fjump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f/gcc%2Fjump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjump.c?ref=dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "patch": "@@ -367,19 +367,23 @@ jump_optimize_1 (f, cross_jump, noop_moves, after_regscan, mark_labels_only)\n \t      int diff_vec_p = GET_CODE (PATTERN (insn)) == ADDR_DIFF_VEC;\n \t      int len = XVECLEN (pat, diff_vec_p);\n \t      rtx dispatch = prev_real_insn (insn);\n+\t      rtx set;\n \n \t      for (i = 0; i < len; i++)\n \t\tif (XEXP (XVECEXP (pat, diff_vec_p, i), 0)\n \t\t    != XEXP (XVECEXP (pat, diff_vec_p, 0), 0))\n \t\t  break;\n+\n \t      if (i == len\n \t\t  && dispatch != 0\n \t\t  && GET_CODE (dispatch) == JUMP_INSN\n \t\t  && JUMP_LABEL (dispatch) != 0\n-\t\t  /* Don't mess with a casesi insn.  */\n-\t\t  && !(GET_CODE (PATTERN (dispatch)) == SET\n-\t\t       && (GET_CODE (SET_SRC (PATTERN (dispatch)))\n-\t\t\t   == IF_THEN_ELSE))\n+\t\t  /* Don't mess with a casesi insn. \n+\t\t     XXX according to the comment before computed_jump_p(),\n+\t\t     all casesi insns should be a parallel of the jump\n+\t\t     and a USE of a LABEL_REF.  */\n+\t\t  && ! ((set = single_set (dispatch)) != NULL\n+\t\t\t&& (GET_CODE (SET_SRC (set)) == IF_THEN_ELSE))\n \t\t  && next_real_insn (JUMP_LABEL (dispatch)) == insn)\n \t\t{\n \t\t  redirect_tablejump (dispatch,"}]}