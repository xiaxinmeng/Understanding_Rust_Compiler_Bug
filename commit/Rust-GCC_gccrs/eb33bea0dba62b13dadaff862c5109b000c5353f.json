{"sha": "eb33bea0dba62b13dadaff862c5109b000c5353f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWIzM2JlYTBkYmE2MmIxM2RhZGFmZjg2MmM1MTA5YjAwMGM1MzUzZg==", "commit": {"author": {"name": "Chris Demetriou", "email": "cgd@broadcom.com", "date": "2003-10-05T23:57:56Z"}, "committer": {"name": "Chris Demetriou", "email": "cgd@gcc.gnu.org", "date": "2003-10-05T23:57:56Z"}, "message": "mips.md (*divsf3): Move description of SB-1 F2 erratum from here to...\n\n2003-10-05  Chris Demetriou  <cgd@broadcom.com>\n\n        * config/mips/mips.md (*divsf3): Move description of\n        SB-1 F2 erratum from here to...\n        (divsf3): Here.  Disable if TARGET_FIX_SB1 is set and\n        flag_unsafe_math_optimizations is not.\n\nFrom-SVN: r72123", "tree": {"sha": "7db093aa313a8804948b943da5a421d06b806579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7db093aa313a8804948b943da5a421d06b806579"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb33bea0dba62b13dadaff862c5109b000c5353f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb33bea0dba62b13dadaff862c5109b000c5353f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb33bea0dba62b13dadaff862c5109b000c5353f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb33bea0dba62b13dadaff862c5109b000c5353f/comments", "author": null, "committer": null, "parents": [{"sha": "c9545f49d3e273cb0d24eed0d0bef69bdd744a51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9545f49d3e273cb0d24eed0d0bef69bdd744a51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9545f49d3e273cb0d24eed0d0bef69bdd744a51"}], "stats": {"total": 27, "additions": 18, "deletions": 9}, "files": [{"sha": "5b3dd9699e09fbcdceeeae660730d548eaed0163", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb33bea0dba62b13dadaff862c5109b000c5353f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb33bea0dba62b13dadaff862c5109b000c5353f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eb33bea0dba62b13dadaff862c5109b000c5353f", "patch": "@@ -1,3 +1,10 @@\n+2003-10-05  Chris Demetriou  <cgd@broadcom.com>\n+\n+\t* config/mips/mips.md (*divsf3): Move description of\n+\tSB-1 F2 erratum from here to...\n+\t(divsf3): Here.  Disable if TARGET_FIX_SB1 is set and\n+\tflag_unsafe_math_optimizations is not.\n+\n 2003-10-05  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* config/rs6000/linuxspe.h: Define TARGET_SPE_ABI, TARGET_SPE,"}, {"sha": "932025fdd934f0a0aa0e3fb9fd612bca46448cc0", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb33bea0dba62b13dadaff862c5109b000c5353f/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb33bea0dba62b13dadaff862c5109b000c5353f/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=eb33bea0dba62b13dadaff862c5109b000c5353f", "patch": "@@ -2407,11 +2407,19 @@\n                       (const_int 4)))])\n \n \n+;; This pattern works around the early SB-1 rev2 core \"F2\" erratum:\n+;;\n+;; In certain cases, div.s and div.ps may have a rounding error\n+;; and/or wrong inexact flag.\n+;;\n+;; Therefore, we only allow div.s if not working around SB-1 rev2\n+;; errata, or if working around those errata and a slight loss of\n+;; precision is OK (i.e., flag_unsafe_math_optimizations is set).\n (define_expand \"divsf3\"\n   [(set (match_operand:SF 0 \"register_operand\" \"\")\n \t(div:SF (match_operand:SF 1 \"reg_or_const_float_1_operand\" \"\")\n \t\t(match_operand:SF 2 \"register_operand\" \"\")))]\n-  \"TARGET_HARD_FLOAT\"\n+  \"TARGET_HARD_FLOAT && (!TARGET_FIX_SB1 || flag_unsafe_math_optimizations)\"\n {\n   if (const_float_1_operand (operands[1], SFmode))\n     if (!(ISA_HAS_FP4 && flag_unsafe_math_optimizations))\n@@ -2421,14 +2429,8 @@\n ;; This pattern works around the early SB-1 rev2 core \"F1\" erratum (see\n ;; \"divdf3\" comment for details).\n ;;\n-;; This pattern works around the early SB-1 rev2 core \"F2\" erratum:\n-;;\n-;; In certain cases, div.s and div.ps may have a rounding error\n-;; and/or wrong inexact flag.\n-;;\n-;; Therefore, we only allow div.s if not working around SB-1 rev2\n-;; errata, or if working around those errata and a slight loss of\n-;; precision is OK (i.e., flag_unsafe_math_optimizations is set).\n+;; This pattern works around the early SB-1 rev2 core \"F2\" erratum (see\n+;; \"divsf3\" comment for details).\n (define_insn \"*divsf3\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(div:SF (match_operand:SF 1 \"register_operand\" \"f\")"}]}