{"sha": "18d002058ed0df083dc7cfa05dd3edd4849467f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MThkMDAyMDU4ZWQwZGYwODNkYzdjZmEwNWRkM2VkZDQ4NDk0NjdmOQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2005-01-10T23:55:33Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2005-01-10T23:55:33Z"}, "message": "re PR c++/19355 (ICE: tree check at c-common.c:2332)\n\n\n\tPR c++/19355\n\t* c-common.c (c_common_truthvalue_conversion): TRUTH_NOT_EXPR is a\n\tunary operator and can't be treated as a binary/comparison operator.\n\n\t* g++.dg/expr/pr19355-1.C: New test case.\n\nFrom-SVN: r93159", "tree": {"sha": "869cc91b1972ffac3cf80eb5fab7a17adaa61084", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/869cc91b1972ffac3cf80eb5fab7a17adaa61084"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/18d002058ed0df083dc7cfa05dd3edd4849467f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18d002058ed0df083dc7cfa05dd3edd4849467f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18d002058ed0df083dc7cfa05dd3edd4849467f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18d002058ed0df083dc7cfa05dd3edd4849467f9/comments", "author": null, "committer": null, "parents": [{"sha": "316e72f2dd7293b52b55ac420529480538f07cf6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/316e72f2dd7293b52b55ac420529480538f07cf6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/316e72f2dd7293b52b55ac420529480538f07cf6"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "c4e50cbee379ac6cedd22c571da0cb9daa7b3829", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=18d002058ed0df083dc7cfa05dd3edd4849467f9", "patch": "@@ -1,3 +1,9 @@\n+2005-01-10  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR c++/19355\n+\t* c-common.c (c_common_truthvalue_conversion): TRUTH_NOT_EXPR is a\n+\tunary operator and can't be treated as a binary/comparison operator.\n+\n 2005-01-10  Richard Henderson  <rth@redhat.com>\n \n \t* config/i386/i386.c (ix86_function_value): Use type_natural_mode."}, {"sha": "fd6df502ca92bb60cf09c7e4104da3683bceb782", "filename": "gcc/c-common.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=18d002058ed0df083dc7cfa05dd3edd4849467f9", "patch": "@@ -2326,12 +2326,17 @@ c_common_truthvalue_conversion (tree expr)\n     case TRUTH_AND_EXPR:\n     case TRUTH_OR_EXPR:\n     case TRUTH_XOR_EXPR:\n-    case TRUTH_NOT_EXPR:\n       if (TREE_TYPE (expr) != truthvalue_type_node)\n \treturn build2 (TREE_CODE (expr), truthvalue_type_node,\n \t\t       TREE_OPERAND (expr, 0), TREE_OPERAND (expr, 1));\n       return expr;\n \n+    case TRUTH_NOT_EXPR:\n+      if (TREE_TYPE (expr) != truthvalue_type_node)\n+\treturn build1 (TREE_CODE (expr), truthvalue_type_node,\n+\t\t       TREE_OPERAND (expr, 0));\n+      return expr;\n+\n     case ERROR_MARK:\n       return expr;\n "}, {"sha": "1bfdfb84b1dc3bbbedc05e8bdcf276c745d53092", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=18d002058ed0df083dc7cfa05dd3edd4849467f9", "patch": "@@ -1,3 +1,8 @@\n+2005-01-10  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR c++/19355\n+\t* g++.dg/expr/pr19355-1.C: New test case.\n+\n 2005-01-10  Laurent GUERBY <laurent@guerby.net>\n \n \t* ada/acats/tests/c4/c456001.a: New from ACATS 2.5L"}, {"sha": "ce11b81880a5f5d0cbb722cd166e362f18c7874f", "filename": "gcc/testsuite/g++.dg/expr/pr19355-1.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fpr19355-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18d002058ed0df083dc7cfa05dd3edd4849467f9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fpr19355-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fpr19355-1.C?ref=18d002058ed0df083dc7cfa05dd3edd4849467f9", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/19355\n+// { dg-do compile }\n+\n+typedef bool Boolean;\n+extern Boolean is_nil ();\n+void f(void)\n+{\n+  unsigned int ilen;\n+  if(!((ilen > 0 ? !is_nil () : 1))) {}\n+}\n+"}]}