{"sha": "3ea7f8e52498b9db9a16fe61ea4c37619acb088b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2VhN2Y4ZTUyNDk4YjlkYjlhMTZmZTYxZWE0YzM3NjE5YWNiMDg4Yg==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2015-09-29T16:25:21Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2015-09-29T16:25:21Z"}, "message": "[PATCH] Fix undefined behaviour in msp430 port\n\n       * config/msp430/msp430.c (msp430_legitimate_constant): Fix undefined\n        left shift behaviour.\n        * config/msp430/constraints.md ('L' constraint): Similarly.\n        ('Ys' constraint): Similarly.\n\nFrom-SVN: r228251", "tree": {"sha": "62228c6518a05a0eaa8e3cfad34c29528a591265", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/62228c6518a05a0eaa8e3cfad34c29528a591265"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ea7f8e52498b9db9a16fe61ea4c37619acb088b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ea7f8e52498b9db9a16fe61ea4c37619acb088b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ea7f8e52498b9db9a16fe61ea4c37619acb088b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ea7f8e52498b9db9a16fe61ea4c37619acb088b/comments", "author": null, "committer": null, "parents": [{"sha": "6d601106549923b90769b0bbf6bad9052a9667ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d601106549923b90769b0bbf6bad9052a9667ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d601106549923b90769b0bbf6bad9052a9667ac"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "1b9985af4daaefe45bcbed304254e50133d17a3c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ea7f8e52498b9db9a16fe61ea4c37619acb088b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ea7f8e52498b9db9a16fe61ea4c37619acb088b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3ea7f8e52498b9db9a16fe61ea4c37619acb088b", "patch": "@@ -1,3 +1,10 @@\n+2015-09-29  Jeff Law  <law@redhat.com>\n+\n+\t* config/msp430/msp430.c (msp430_legitimate_constant): Fix undefined\n+\tleft shift behaviour.\n+\t* config/msp430/constraints.md ('L' constraint): Similarly.\n+\t('Ys' constraint): Similarly.\n+\n 2015-09-29  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/67170"}, {"sha": "dfda1528a0436d88125c3eb24aaf1e73a5961225", "filename": "gcc/config/msp430/constraints.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ea7f8e52498b9db9a16fe61ea4c37619acb088b/gcc%2Fconfig%2Fmsp430%2Fconstraints.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ea7f8e52498b9db9a16fe61ea4c37619acb088b/gcc%2Fconfig%2Fmsp430%2Fconstraints.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fconstraints.md?ref=3ea7f8e52498b9db9a16fe61ea4c37619acb088b", "patch": "@@ -32,7 +32,7 @@\n (define_constraint \"L\"\n   \"Integer constant -1^20..1^19.\"\n   (and (match_code \"const_int\")\n-       (match_test \"IN_RANGE (ival, -1 << 20, 1 << 19)\")))\n+       (match_test \"IN_RANGE (ival, HOST_WIDE_INT_M1U << 20, 1 << 19)\")))\n \n (define_constraint \"M\"\n   \"Integer constant 1-4.\"\n@@ -77,7 +77,7 @@\n \t(and (match_code \"plus\" \"0\")\n \t     (and (match_code \"reg\" \"00\")\n \t\t  (match_test (\"CONST_INT_P (XEXP (XEXP (op, 0), 1))\"))\n-\t\t  (match_test (\"IN_RANGE (INTVAL (XEXP (XEXP (op, 0), 1)), -1 << 15, (1 << 15)-1)\"))))\n+\t\t  (match_test (\"IN_RANGE (INTVAL (XEXP (XEXP (op, 0), 1)), HOST_WIDE_INT_M1U << 15, (1 << 15)-1)\"))))\n \t(match_code \"reg\" \"0\")\n \t)))\n "}, {"sha": "ba8d862884604e3d901f7576603bd59b479f44bb", "filename": "gcc/config/msp430/msp430.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ea7f8e52498b9db9a16fe61ea4c37619acb088b/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ea7f8e52498b9db9a16fe61ea4c37619acb088b/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.c?ref=3ea7f8e52498b9db9a16fe61ea4c37619acb088b", "patch": "@@ -998,7 +998,7 @@ msp430_legitimate_constant (machine_mode mode, rtx x)\n     /* GCC does not know the width of the PSImode, so make\n        sure that it does not try to use a constant value that\n        is out of range.  */\n-    || (INTVAL (x) < (1 << 20) && INTVAL (x) >= (-1 << 20));\n+    || (INTVAL (x) < (1 << 20) && INTVAL (x) >= (HOST_WIDE_INT)(HOST_WIDE_INT_M1U << 20));\n }\n \n \f"}]}