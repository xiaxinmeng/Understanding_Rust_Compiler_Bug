{"sha": "26e5d47d44df43aaa6a14ae56bc057913c1d3e4c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjZlNWQ0N2Q0NGRmNDNhYWE2YTE0YWU1NmJjMDU3OTEzYzFkM2U0Yw==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-10-01T05:42:50Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-10-01T05:42:50Z"}, "message": "Make dumping of function attributes resemble source syntax\n\n2015-10-01  Tom de Vries  <tom@codesourcery.com>\n\n\t* tree-cfg.c (dump_function_to_file): Dump function attributes using\n\t__attribute__(()) string.  Move dumping of function attributes to before\n\tfunction name.\n\nFrom-SVN: r228315", "tree": {"sha": "5a7cdb25526c71c4ba40e1f830effe2aeab5a9dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a7cdb25526c71c4ba40e1f830effe2aeab5a9dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c/comments", "author": null, "committer": null, "parents": [{"sha": "aeecd3d21279c5d524b3310b7f02ee83878c3cbe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aeecd3d21279c5d524b3310b7f02ee83878c3cbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aeecd3d21279c5d524b3310b7f02ee83878c3cbe"}], "stats": {"total": 38, "additions": 31, "deletions": 7}, "files": [{"sha": "c132980b9f463293fdddd52cf49bfc2b24efe140", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=26e5d47d44df43aaa6a14ae56bc057913c1d3e4c", "patch": "@@ -1,3 +1,9 @@\n+2015-10-01  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* tree-cfg.c (dump_function_to_file): Dump function attributes using\n+\t__attribute__(()) string.  Move dumping of function attributes to before\n+\tfunction name.\n+\n 2015-10-01  Lynn Boger  <laboger@linux.vnet.ibm.com>\n \n \tPR target/66870"}, {"sha": "735ac463851b43290c63b9afc4a6d530834e7e5f", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 25, "deletions": 7, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26e5d47d44df43aaa6a14ae56bc057913c1d3e4c/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=26e5d47d44df43aaa6a14ae56bc057913c1d3e4c", "patch": "@@ -72,6 +72,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"tree-cfgcleanup.h\"\n #include \"wide-int-print.h\"\n #include \"gimplify.h\"\n+#include \"attribs.h\"\n \n /* This file contains functions for building the Control Flow Graph (CFG)\n    for a function tree.  */\n@@ -7352,6 +7353,30 @@ dump_function_to_file (tree fndecl, FILE *file, int flags)\n \t\t  && decl_is_tm_clone (fndecl));\n   struct function *fun = DECL_STRUCT_FUNCTION (fndecl);\n \n+  if (DECL_ATTRIBUTES (fndecl) != NULL_TREE)\n+    {\n+      fprintf (file, \"__attribute__((\");\n+\n+      bool first = true;\n+      tree chain;\n+      for (chain = DECL_ATTRIBUTES (fndecl); chain;\n+\t   first = false, chain = TREE_CHAIN (chain))\n+\t{\n+\t  if (!first)\n+\t    fprintf (file, \", \");\n+\n+\t  print_generic_expr (file, get_attribute_name (chain), dump_flags);\n+\t  if (TREE_VALUE (chain) != NULL_TREE)\n+\t    {\n+\t      fprintf (file, \" (\");\n+\t      print_generic_expr (file, TREE_VALUE (chain), dump_flags);\n+\t      fprintf (file, \")\");\n+\t    }\n+\t}\n+\n+      fprintf (file, \"))\\n\");\n+    }\n+\n   current_function_decl = fndecl;\n   fprintf (file, \"%s %s(\", function_name (fun), tmclone ? \"[tm-clone] \" : \"\");\n \n@@ -7369,13 +7394,6 @@ dump_function_to_file (tree fndecl, FILE *file, int flags)\n     }\n   fprintf (file, \")\\n\");\n \n-  if (DECL_ATTRIBUTES (fndecl) != NULL_TREE)\n-    {\n-      fprintf (file, \"[ \");\n-      print_generic_expr (file, DECL_ATTRIBUTES (fndecl), dump_flags);\n-      fprintf (file, \"]\\n\");\n-    }\n-\n   if (flags & TDF_VERBOSE)\n     print_node (file, \"\", fndecl, 2);\n "}]}