{"sha": "35c18a2035bc75f7b5dc68f5385986426b5308eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzVjMThhMjAzNWJjNzVmN2I1ZGM2OGY1Mzg1OTg2NDI2YjUzMDhlYg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-08-21T05:50:53Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-08-21T05:50:53Z"}, "message": "re PR c++/11834 (template specialization not matched)\n\n\tPR c++/11834\n\t* pt.c (more_specialized): Bump processing_template_decl.\n\n\tPR c++/11834\n\t* g++.dg/template/deduce2.C: New test.\n\nFrom-SVN: r70639", "tree": {"sha": "26ff80d4db49e40d7a6cd3b4aecb0273a39a8fe5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26ff80d4db49e40d7a6cd3b4aecb0273a39a8fe5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/35c18a2035bc75f7b5dc68f5385986426b5308eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35c18a2035bc75f7b5dc68f5385986426b5308eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35c18a2035bc75f7b5dc68f5385986426b5308eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35c18a2035bc75f7b5dc68f5385986426b5308eb/comments", "author": null, "committer": null, "parents": [{"sha": "c4c83fff17000706cad3d2620f1e197fc4840bc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4c83fff17000706cad3d2620f1e197fc4840bc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4c83fff17000706cad3d2620f1e197fc4840bc3"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "8ef1aeb0d1f170a27dcba772455eda71ed0acf2f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=35c18a2035bc75f7b5dc68f5385986426b5308eb", "patch": "@@ -1,3 +1,8 @@\n+2003-08-20  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/11834\n+\t* pt.c (more_specialized): Bump processing_template_decl.\n+\n 2003-08-21  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/11614"}, {"sha": "c66b5bc504b0eb15ae7893b8f73bcb374452ff4f", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=35c18a2035bc75f7b5dc68f5385986426b5308eb", "patch": "@@ -9880,6 +9880,10 @@ more_specialized (tree pat1, tree pat2, int deduce, int len)\n   tree targs;\n   int winner = 0;\n \n+  /* If template argument deduction succeeds, we substitute the\n+     resulting arguments into non-deduced contexts.  While doing that,\n+     we must be aware that we may encounter dependent types.  */\n+  ++processing_template_decl;\n   targs = get_bindings_real (pat1, DECL_TEMPLATE_RESULT (pat2),\n                              NULL_TREE, 0, deduce, len);\n   if (targs)\n@@ -9889,6 +9893,7 @@ more_specialized (tree pat1, tree pat2, int deduce, int len)\n                              NULL_TREE, 0, deduce, len);\n   if (targs)\n     ++winner;\n+  --processing_template_decl;\n \n   return winner;\n }"}, {"sha": "567065258e5892ba488773a2615a678491dd0a18", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=35c18a2035bc75f7b5dc68f5385986426b5308eb", "patch": "@@ -1,3 +1,8 @@\n+2003-08-20  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/11834\n+\t* g++.dg/template/deduce2.C: New test.\n+\n 2003-08-21  Josef Zlomek  <zlomekj@suse.cz>\n \n \t* gcc.c-torture/execute/20030821-1.c: New test."}, {"sha": "bcf77b30b78b5fa5465dc1f6f7966c64eed6a429", "filename": "gcc/testsuite/g++.dg/template/deduce2.C", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdeduce2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c18a2035bc75f7b5dc68f5385986426b5308eb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdeduce2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdeduce2.C?ref=35c18a2035bc75f7b5dc68f5385986426b5308eb", "patch": "@@ -0,0 +1,30 @@\n+template <typename T0> struct tuple {\n+    typedef tuple<int> tail;\n+};\n+\n+template <> struct tuple<int> {\n+};\n+\n+template <typename L>\n+struct length  {\n+  static const int i = length<typename tuple<L>::tail>::i;\n+};\n+\n+template<>\n+struct length<tuple<int> > {\n+    static const int i = 1;\n+};\n+\n+template <int> struct M {};\n+\n+template <typename A>\n+M<length<tuple<A> >::i > foo (A*);\n+\n+template <typename A>\n+M<length<tuple<A> >::i> foo (const A*);\n+\n+const int i1 = 3;\n+\n+void bar() {\n+  foo (&i1);\n+}"}]}