{"sha": "48de570121fa393e003a11f63a85b862a0c1030e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhkZTU3MDEyMWZhMzkzZTAwM2ExMWY2M2E4NWI4NjJhMGMxMDMwZQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2016-06-01T09:48:05Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2016-06-01T09:48:05Z"}, "message": "re PR c++/66635 (g++ ICE when compiling constexpr code with comma operator)\n\n2016-06-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/66635\n\t* g++.dg/cpp0x/constexpr-ice16.C: New.\n\nFrom-SVN: r236978", "tree": {"sha": "a8d908263b0a99d645a7269df212a099c4004caf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a8d908263b0a99d645a7269df212a099c4004caf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48de570121fa393e003a11f63a85b862a0c1030e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48de570121fa393e003a11f63a85b862a0c1030e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48de570121fa393e003a11f63a85b862a0c1030e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48de570121fa393e003a11f63a85b862a0c1030e/comments", "author": null, "committer": null, "parents": [{"sha": "e04d2a35c884f075ebe12cd6f871e35f6d0362a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e04d2a35c884f075ebe12cd6f871e35f6d0362a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e04d2a35c884f075ebe12cd6f871e35f6d0362a4"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "c6e4a61cfa0e137ee4111f65200753f344256cba", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48de570121fa393e003a11f63a85b862a0c1030e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48de570121fa393e003a11f63a85b862a0c1030e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=48de570121fa393e003a11f63a85b862a0c1030e", "patch": "@@ -1,3 +1,8 @@\n+2016-06-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/66635\n+\t* g++.dg/cpp0x/constexpr-ice16.C: New.\n+\n 2016-06-01  Patrick Palka  <ppalka@gcc.gnu.org>\n \n \tPR tree-optimization/71314\n@@ -11,9 +16,9 @@\n \n 2016-05-31  Jan Hubicka  <hubicka@ucw.cz>\n \n-\t* g++.d/predict-lop-exit-1.C: Update template for new predictor name.\n-\t* g++.d/predict-lop-exit-2.C: Update template for new predictor name.\n-\t* g++.d/predict-lop-exit-2.C: Update template for new predictor name.\n+\t* g++.dg/predict-lop-exit-1.C: Update template for new predictor name.\n+\t* g++.dg/predict-lop-exit-2.C: Update template for new predictor name.\n+\t* g++.dg/predict-lop-exit-2.C: Update template for new predictor name.\n \n 2016-05-31  Paolo Carlini  <paolo.carlini@oracle.com>\n "}, {"sha": "42b9226dcd3aa56f664897b4d00d5952ec2298ca", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-ice16.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48de570121fa393e003a11f63a85b862a0c1030e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-ice16.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48de570121fa393e003a11f63a85b862a0c1030e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-ice16.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-ice16.C?ref=48de570121fa393e003a11f63a85b862a0c1030e", "patch": "@@ -0,0 +1,14 @@\n+// PR c++/66635\n+// { dg-do compile { target c++11 } }\n+\n+#include <cassert>\n+\n+struct Foo {\n+    constexpr Foo(const unsigned i) : val(i) {}\n+    constexpr Foo operator-(const Foo &rhs) const {\n+      return assert(val >= rhs.val), Foo(val - rhs.val); // { dg-error \"call to non-constexpr\" }\n+    }\n+    unsigned val;\n+};\n+\n+constexpr Foo foo(Foo(1) - Foo(2));"}]}