{"sha": "ffc14f31599c19980371b165a7f6ad2e0a93015c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZjMTRmMzE1OTljMTk5ODAzNzFiMTY1YTdmNmFkMmUwYTkzMDE1Yw==", "commit": {"author": {"name": "Geoff Keating", "email": "geoffk@cygnus.com", "date": "2000-07-08T12:42:09Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2000-07-08T12:42:09Z"}, "message": "Commited on behalf of geoffk@cygnus.com:\n\n\t* config/rs6000/rs6000.c (rs6000_emit_move): Fix conditions for\n\temitting aux_truncdfsf2.\n\nFrom-SVN: r34925", "tree": {"sha": "0c5e3a2cd8340e1cee6ccd95b0510cee1500d141", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c5e3a2cd8340e1cee6ccd95b0510cee1500d141"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffc14f31599c19980371b165a7f6ad2e0a93015c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffc14f31599c19980371b165a7f6ad2e0a93015c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffc14f31599c19980371b165a7f6ad2e0a93015c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffc14f31599c19980371b165a7f6ad2e0a93015c/comments", "author": null, "committer": null, "parents": [{"sha": "05392c97666f74f59e5f10fddc782b5c239d71bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05392c97666f74f59e5f10fddc782b5c239d71bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05392c97666f74f59e5f10fddc782b5c239d71bb"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "6b34b7a2ea7c79bb46edc448c07255f78b7ad55e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffc14f31599c19980371b165a7f6ad2e0a93015c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffc14f31599c19980371b165a7f6ad2e0a93015c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ffc14f31599c19980371b165a7f6ad2e0a93015c", "patch": "@@ -1,3 +1,8 @@\n+2000-07-08  Geoffrey Keating  <geoffk@cygnus.com>\n+\n+\t* config/rs6000/rs6000.c (rs6000_emit_move): Fix conditions for\n+\temitting aux_truncdfsf2.\n+\n 2000-07-03  Donn Terry  (donnte@microsoft.com)\n \n \t* cppinit.c (print_help): split overlong line into ISO C89"}, {"sha": "ba8562be34279677811b6b0a4b8135f63f4dd911", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffc14f31599c19980371b165a7f6ad2e0a93015c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffc14f31599c19980371b165a7f6ad2e0a93015c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=ffc14f31599c19980371b165a7f6ad2e0a93015c", "patch": "@@ -1492,10 +1492,17 @@ rs6000_emit_move (dest, source, mode)\n   if (! no_new_pseudos && GET_CODE (operands[0]) != REG)\n     operands[1] = force_reg (mode, operands[1]);\n   \n-  if (mode == SFmode && ! TARGET_POWERPC && TARGET_HARD_FLOAT)\n+  if (mode == SFmode && ! TARGET_POWERPC && TARGET_HARD_FLOAT\n+      && GET_CODE (operands[0]) == MEM)\n     {\n-      int regnum = true_regnum (operands[1]);\n-      /* regnum may be -1 in which case the test below will fail.  */\t\n+      int regnum;\n+\n+      if (reload_in_progress || reload_completed)\n+\tregnum = true_regnum (operands[1]);\n+      else if (GET_CODE (operands[1]) == REG)\n+\tregnum = REGNO (operands[1]);\n+      else\n+\tregnum = -1;\n       \n       /* If operands[1] is a register, on POWER it may have\n \t double-precision data in it, so truncate it to single"}]}