{"sha": "93e8af199cc829c12790873935a4fa4c51c89044", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTNlOGFmMTk5Y2M4MjljMTI3OTA4NzM5MzVhNGZhNGM1MWM4OTA0NA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2012-12-27T18:09:13Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2012-12-27T18:09:13Z"}, "message": "re PR fortran/48976 (INQUIRE with STREAM= not supported)\n\n2012-12-27  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/48976\n\t* gfortran.h (gfc_inquire struct): Add pointer for inquire stream.\n\t* io.c (io_tag): Add tag for inquire stream. (match_inquire_element):\n\tAdd matcher for new tag. (gfc_resolve_inquire): Resolve new tag.\n\t* ioparm.def: Add new parameter for inquire stream.\n\t* trans-io.c (gfc_trans_inquire): Add tranlste code for inquire\n\tstream.\n\nFrom-SVN: r194734", "tree": {"sha": "6f4d966648a1add073849598d28e700c75419c8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6f4d966648a1add073849598d28e700c75419c8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/93e8af199cc829c12790873935a4fa4c51c89044", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93e8af199cc829c12790873935a4fa4c51c89044", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93e8af199cc829c12790873935a4fa4c51c89044", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93e8af199cc829c12790873935a4fa4c51c89044/comments", "author": null, "committer": null, "parents": [{"sha": "797332eda948b694d2e5199869ebd8e748b938db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/797332eda948b694d2e5199869ebd8e748b938db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/797332eda948b694d2e5199869ebd8e748b938db"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "a8d6a21c8ab0d84852f93343cb58a75fcd83b970", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=93e8af199cc829c12790873935a4fa4c51c89044", "patch": "@@ -1,3 +1,13 @@\n+2012-12-27  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/48976\n+\t* gfortran.h (gfc_inquire struct): Add pointer for inquire stream.\n+\t* io.c (io_tag): Add tag for inquire stream. (match_inquire_element):\n+\tAdd matcher for new tag. (gfc_resolve_inquire): Resolve new tag.\n+\t* ioparm.def: Add new parameter for inquire stream.\n+\t* trans-io.c (gfc_trans_inquire): Add tranlste code for inquire\n+\tstream.\n+\n 2012-12-23  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/54884"}, {"sha": "a419af3ad403c68d9b756c1bdc7143803e73b94a", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=93e8af199cc829c12790873935a4fa4c51c89044", "patch": "@@ -2008,7 +2008,8 @@ typedef struct\n     *name, *access, *sequential, *direct, *form, *formatted,\n     *unformatted, *recl, *nextrec, *blank, *position, *action, *read,\n     *write, *readwrite, *delim, *pad, *iolength, *iomsg, *convert, *strm_pos,\n-    *asynchronous, *decimal, *encoding, *pending, *round, *sign, *size, *id;\n+    *asynchronous, *decimal, *encoding, *pending, *round, *sign, *size, *id,\n+    *iqstream;\n \n   gfc_st_label *err;\n "}, {"sha": "7eb52a974d7c38e917ef014cc5cacb1b8d53d5e6", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=93e8af199cc829c12790873935a4fa4c51c89044", "patch": "@@ -97,7 +97,8 @@ static const io_tag\n \ttag_eor\t\t= {\"EOR\", \" eor =\", \" %l\", BT_UNKNOWN},\n \ttag_id\t\t= {\"ID\", \" id =\", \" %v\", BT_INTEGER},\n \ttag_pending\t= {\"PENDING\", \" pending =\", \" %v\", BT_LOGICAL},\n-\ttag_newunit\t= {\"NEWUNIT\", \" newunit =\", \" %v\", BT_INTEGER};\n+\ttag_newunit\t= {\"NEWUNIT\", \" newunit =\", \" %v\", BT_INTEGER},\n+\ttag_s_iqstream\t= {\"STREAM\", \" stream =\", \" %v\", BT_CHARACTER};\n \n static gfc_dt *current_dt;\n \n@@ -3912,6 +3913,7 @@ match_inquire_element (gfc_inquire *inquire)\n   RETM m = match_out_tag (&tag_strm_out, &inquire->strm_pos);\n   RETM m = match_vtag (&tag_pending, &inquire->pending);\n   RETM m = match_vtag (&tag_id, &inquire->id);\n+  RETM m = match_vtag (&tag_s_iqstream, &inquire->iqstream);\n   RETM return MATCH_NO;\n }\n \n@@ -4101,6 +4103,7 @@ gfc_resolve_inquire (gfc_inquire *inquire)\n   INQUIRE_RESOLVE_TAG (&tag_pending, inquire->pending);\n   INQUIRE_RESOLVE_TAG (&tag_size, inquire->size);\n   INQUIRE_RESOLVE_TAG (&tag_s_decimal, inquire->decimal);\n+  INQUIRE_RESOLVE_TAG (&tag_s_iqstream, inquire->iqstream);\n #undef INQUIRE_RESOLVE_TAG\n \n   if (gfc_reference_st_label (inquire->err, ST_LABEL_TARGET) == FAILURE)"}, {"sha": "c9c271d886d67fca8ba6f606c4b8799428a12014", "filename": "gcc/fortran/ioparm.def", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Fioparm.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Fioparm.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fioparm.def?ref=93e8af199cc829c12790873935a4fa4c51c89044", "patch": "@@ -88,6 +88,7 @@ IOPARM (inquire, sign,\t\t1 << 4,  char1)\n IOPARM (inquire, pending,\t1 << 5,  pint4)\n IOPARM (inquire, size,\t\t1 << 6,  pintio)\n IOPARM (inquire, id,\t\t1 << 7,  pint4)\n+IOPARM (inquire, iqstream,\t1 << 8,  char1)\n IOPARM (wait,    common,\t0,\t common)\n IOPARM (wait,    id,\t\t1 << 7,  pint4)\n #ifndef IOPARM_dt_list_format"}, {"sha": "921edd042eae0b1e7cbc0faf587b233839d2c210", "filename": "gcc/fortran/trans-io.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Ftrans-io.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93e8af199cc829c12790873935a4fa4c51c89044/gcc%2Ffortran%2Ftrans-io.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-io.c?ref=93e8af199cc829c12790873935a4fa4c51c89044", "patch": "@@ -1364,6 +1364,9 @@ gfc_trans_inquire (gfc_code * code)\n   if (p->id)\n     mask2 |= set_parameter_ref (&block, &post_block,var, IOPARM_inquire_id,\n \t\t\t\tp->id);\n+  if (p->iqstream)\n+    mask2 |= set_string (&block, &post_block, var, IOPARM_inquire_iqstream,\n+\t\t\t p->iqstream);\n \n   if (mask2)\n     mask |= set_parameter_const (&block, var, IOPARM_inquire_flags2, mask2);"}]}