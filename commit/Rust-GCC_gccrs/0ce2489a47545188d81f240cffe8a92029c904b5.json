{"sha": "0ce2489a47545188d81f240cffe8a92029c904b5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNlMjQ4OWE0NzU0NTE4OGQ4MWYyNDBjZmZlOGE5MjAyOWM5MDRiNQ==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@gcc.gnu.org", "date": "1998-06-19T05:42:14Z"}, "committer": {"name": "Manfred Hollstein", "email": "manfred@gcc.gnu.org", "date": "1998-06-19T05:42:14Z"}, "message": "configure (gcc_version): Add new variable describing the particular gcc version we're building.\n\n\ufffd\negcs-19980619/ChangeLog\n1998-06-19  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* configure (gcc_version): Add new variable describing the\n\tparticular gcc version we're building.\n\t* Makefile.in (libsubdir): Add new macro for the directory\n\tin which the compiler finds executables, libraries, etc.\n\t(BASE_FLAGS_TO_PASS): Pass down gcc_version, target_alias\n\tand libsubdir.\negcs-19980619/gcc/ChangeLog\n1998-06-19  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* Makefile.in (installdirs): Loop over directories in $(libsubdir)\n\tcreating probably missing ones, instead of single if statements.\negcs-19980619/libio/ChangeLog\n1998-06-19  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* config.shared (FLAGS_TO_PASS): Add libsubdir.\n\nFrom-SVN: r20582", "tree": {"sha": "135df2c43e974ffbf2f68853e0e1caae9503ddf3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/135df2c43e974ffbf2f68853e0e1caae9503ddf3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ce2489a47545188d81f240cffe8a92029c904b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ce2489a47545188d81f240cffe8a92029c904b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ce2489a47545188d81f240cffe8a92029c904b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ce2489a47545188d81f240cffe8a92029c904b5/comments", "author": null, "committer": null, "parents": [{"sha": "2f96399bc24d5c65717b5338c2d6f37f03283b12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f96399bc24d5c65717b5338c2d6f37f03283b12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f96399bc24d5c65717b5338c2d6f37f03283b12"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "888886704264c98a192d7e6bd98bb96ed9ece903", "filename": "configure", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ce2489a47545188d81f240cffe8a92029c904b5/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ce2489a47545188d81f240cffe8a92029c904b5/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=0ce2489a47545188d81f240cffe8a92029c904b5", "patch": "@@ -56,6 +56,7 @@ exec_prefixoption=\n fatal=\n floating_point=default\n gas=default\n+gcc_version=UNKNOWN\n host_alias=NOHOST\n host_makefile_frag=\n moveifchange=\n@@ -700,6 +701,12 @@ if [ \"${program_prefix}\" != \"\" ] ; then\n     program_transform_name=\"-e s,^,${program_prefix}, ${program_transform_name}\"\n fi\n \n+# If gcc's sources are available, extract its version number which is used by\n+# $libsubdir.\n+if [ -f $srcdir/gcc/version.c ]; then\n+    gcc_version=`sed -e 's/.*\\\"\\([^ \\\"]*\\)[ \\\"].*/\\1/' < ${srcdir}/gcc/version.c`\n+fi\n+\n # If CC and CXX are not set in the environment, and the Makefile\n # exists, try to extract them from it.  This is to handle running\n # ./config.status by hand.\n@@ -1228,6 +1235,12 @@ EOF\n \t        echo enable_shared = ${enable_shared} >> ${Makefile}\n \t    fi\n \n+\t    # Emit a macro which is used to build the libsubdir macro where\n+\t    # compiler specific stuff can be found/installed.\n+\t    # FIXME: This works only if gcc's sources are available in a gcc\n+\t    # subdirectory!\n+\t    echo gcc_version = ${gcc_version} >> ${Makefile}\n+\n             # reset prefix, exec_prefix, srcdir, SUBDIRS, NONSUBDIRS,\n             # remove any form feeds.\n             if [ -z \"${subdirs}\" ]; then"}]}