{"sha": "82b3eb42941c7a037182cec37b014a7574e46340", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODJiM2ViNDI5NDFjN2EwMzcxODJjZWMzN2IwMTRhNzU3NGU0NjM0MA==", "commit": {"author": {"name": "Marek Michalkiewicz", "email": "marekm@amelek.gda.pl", "date": "2005-03-20T21:12:08Z"}, "committer": {"name": "Marek Michalkiewicz", "email": "marekm@gcc.gnu.org", "date": "2005-03-20T21:12:08Z"}, "message": "re PR target/18551 (wrong asm output for -mcall-prologues with g++)\n\n\tPR target/18551\n\t* config/avr/avr.c (avr_output_function_prologue): Do not use\n\tcurrent_function_name() in a label, use a local label instead.\n\nFrom-SVN: r96765", "tree": {"sha": "f1bacfc7c64a2374c138179f80d0120a7750f600", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1bacfc7c64a2374c138179f80d0120a7750f600"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82b3eb42941c7a037182cec37b014a7574e46340", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82b3eb42941c7a037182cec37b014a7574e46340", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82b3eb42941c7a037182cec37b014a7574e46340", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82b3eb42941c7a037182cec37b014a7574e46340/comments", "author": null, "committer": null, "parents": [{"sha": "e7108df9b95aeab82d1f9659f93ceea5e1fd3fff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7108df9b95aeab82d1f9659f93ceea5e1fd3fff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7108df9b95aeab82d1f9659f93ceea5e1fd3fff"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "e2d494cbc9a80240bdbc40402738b1f8e26b4896", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82b3eb42941c7a037182cec37b014a7574e46340/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82b3eb42941c7a037182cec37b014a7574e46340/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=82b3eb42941c7a037182cec37b014a7574e46340", "patch": "@@ -1,3 +1,9 @@\n+2005-03-20  Marek Michalkiewicz  <marekm@amelek.gda.pl>\n+\n+\tPR target/18551\n+\t* config/avr/avr.c (avr_output_function_prologue): Do not use\n+\tcurrent_function_name() in a label, use a local label instead.\n+\n 2005-03-20  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/rs6000.c (rs6000_generate_compare): Test"}, {"sha": "0f8f803fd309d9ddb0966c343f9586ad832456e7", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82b3eb42941c7a037182cec37b014a7574e46340/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82b3eb42941c7a037182cec37b014a7574e46340/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=82b3eb42941c7a037182cec37b014a7574e46340", "patch": "@@ -704,14 +704,12 @@ avr_output_function_prologue (FILE *file, HOST_WIDE_INT size)\n     }\n   else if (minimize && (frame_pointer_needed || live_seq > 6)) \n     {\n-      const char *cfun_name = current_function_name ();\n       fprintf (file, (\"\\t\"\n \t\t      AS1 (ldi, r26) \",lo8(\" HOST_WIDE_INT_PRINT_DEC \")\" CR_TAB\n \t\t      AS1 (ldi, r27) \",hi8(\" HOST_WIDE_INT_PRINT_DEC \")\" CR_TAB), size, size);\n \n-      fprintf (file, (AS2 (ldi, r30, pm_lo8(.L_%s_body)) CR_TAB\n-\t\t      AS2 (ldi, r31, pm_hi8(.L_%s_body)) CR_TAB),\n-\t       cfun_name, cfun_name);\n+      fputs ((AS2 (ldi,r30,pm_lo8(1f)) CR_TAB\n+\t      AS2 (ldi,r31,pm_hi8(1f)) CR_TAB), file);\n       \n       prologue_size += 4;\n       \n@@ -727,7 +725,7 @@ avr_output_function_prologue (FILE *file, HOST_WIDE_INT size)\n \t\t   (18 - live_seq) * 2);\n \t  ++prologue_size;\n \t}\n-      fprintf (file, \".L_%s_body:\\n\", cfun_name);\n+      fputs (\"1:\\n\", file);\n     }\n   else\n     {"}]}