{"sha": "822c7fe253eb1092e2e29d64015876e7e2ea691d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODIyYzdmZTI1M2ViMTA5MmUyZTI5ZDY0MDE1ODc2ZTdlMmVhNjkxZA==", "commit": {"author": {"name": "Ovidiu Predescu", "email": "ovidiu@gcc.gnu.org", "date": "2000-08-06T18:41:49Z"}, "committer": {"name": "Ovidiu Predescu", "email": "ovidiu@gcc.gnu.org", "date": "2000-08-06T18:41:49Z"}, "message": "Set the ld_library_path so that running programs linked against the\nshared version of libobjc run correctly.\n\nFrom-SVN: r35531", "tree": {"sha": "e37a75e0a3b339788307cedaf51bb7949c93d7a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e37a75e0a3b339788307cedaf51bb7949c93d7a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/822c7fe253eb1092e2e29d64015876e7e2ea691d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/822c7fe253eb1092e2e29d64015876e7e2ea691d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/822c7fe253eb1092e2e29d64015876e7e2ea691d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/822c7fe253eb1092e2e29d64015876e7e2ea691d/comments", "author": null, "committer": null, "parents": [{"sha": "cd7324181ab0c926357153f8031abfebc1dc8659", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd7324181ab0c926357153f8031abfebc1dc8659", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd7324181ab0c926357153f8031abfebc1dc8659"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "8a9658f57efb0e39ebe6366f52d39c8e00d7b57d", "filename": "gcc/testsuite/lib/objc.exp", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/822c7fe253eb1092e2e29d64015876e7e2ea691d/gcc%2Ftestsuite%2Flib%2Fobjc.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/822c7fe253eb1092e2e29d64015876e7e2ea691d/gcc%2Ftestsuite%2Flib%2Fobjc.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fobjc.exp?ref=822c7fe253eb1092e2e29d64015876e7e2ea691d", "patch": "@@ -117,8 +117,11 @@ proc objc_target_compile { source dest type options } {\n     global gluefile wrap_flags;\n     global OBJC_UNDER_TEST\n     global TOOL_OPTIONS\n+    global ld_library_path\n \n+    set ld_library_path \".\"\n     lappend options \"libs=-lobjc\"\n+\n     if { [target_info needs_status_wrapper]!=\"\" && [info exists gluefile] } {\n \tlappend options \"libs=${gluefile}\"\n \tlappend options \"ldflags=$wrap_flags\"\n@@ -142,8 +145,10 @@ proc objc_target_compile { source dest type options } {\n     set objcpath \"[get_multilibs]\"\n     set libobjc_dir [lookfor_file ${objcpath} libobjc/.libs/libobjc.a]\n     if { $libobjc_dir != \"\" } {\n-\tset objc_link_flags \"-L[file dirname ${libobjc_dir}]\"\n+\tset libobjc_dir [file dirname ${libobjc_dir}]\n+\tset objc_link_flags \"-L${libobjc_dir}\"\n \tlappend options \"additional_flags=${objc_link_flags}\"\n+\tappend ld_library_path \":${libobjc_dir}\"\n     }\n     lappend options \"compiler=$OBJC_UNDER_TEST\"\n     return [target_compile $source $dest $type $options]"}]}