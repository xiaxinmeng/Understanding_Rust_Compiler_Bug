{"sha": "57a737092259093219f2f5bb95e3f70151a8f1dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTdhNzM3MDkyMjU5MDkzMjE5ZjJmNWJiOTVlM2Y3MDE1MWE4ZjFkYw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2005-07-27T06:45:28Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2005-07-27T06:45:28Z"}, "message": "cgraphunit.c (cgraph_function_and_variable_visibility): Set visibility flags correctly in whole program mode.\n\n\t* cgraphunit.c (cgraph_function_and_variable_visibility): Set\n\tvisibility flags correctly in whole program mode.\n\nFrom-SVN: r102415", "tree": {"sha": "a6edf89fff04535770557bb775c9a8946fe11b1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6edf89fff04535770557bb775c9a8946fe11b1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57a737092259093219f2f5bb95e3f70151a8f1dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57a737092259093219f2f5bb95e3f70151a8f1dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57a737092259093219f2f5bb95e3f70151a8f1dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57a737092259093219f2f5bb95e3f70151a8f1dc/comments", "author": null, "committer": null, "parents": [{"sha": "9e52adc4097fa875e895eb70fa595c183afb5e7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e52adc4097fa875e895eb70fa595c183afb5e7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e52adc4097fa875e895eb70fa595c183afb5e7c"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "8ab2a1a1f5d37cdefddfbccce69557b954e32e64", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57a737092259093219f2f5bb95e3f70151a8f1dc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57a737092259093219f2f5bb95e3f70151a8f1dc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=57a737092259093219f2f5bb95e3f70151a8f1dc", "patch": "@@ -1,3 +1,8 @@\n+2005-07-27  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraphunit.c (cgraph_function_and_variable_visibility): Set\n+\tvisibility flags correctly in whole program mode.\n+\n 2005-07-26  Steve Ellcey  <sje@cup.hp.com>\n \n \tPR rtl-optimization/22472"}, {"sha": "7b126cc6f89486c437f858b2b527d93867f95d7c", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57a737092259093219f2f5bb95e3f70151a8f1dc/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57a737092259093219f2f5bb95e3f70151a8f1dc/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=57a737092259093219f2f5bb95e3f70151a8f1dc", "patch": "@@ -1123,7 +1123,8 @@ cgraph_function_and_variable_visibility (void)\n     {\n       if (node->reachable\n \t  && (DECL_COMDAT (node->decl)\n-\t      || (TREE_PUBLIC (node->decl) && !DECL_EXTERNAL (node->decl))))\n+\t      || (!flag_whole_program\n+\t\t  && TREE_PUBLIC (node->decl) && !DECL_EXTERNAL (node->decl))))\n \tnode->local.externally_visible = true;\n       if (!node->local.externally_visible && node->analyzed\n \t  && !DECL_EXTERNAL (node->decl))\n@@ -1139,6 +1140,7 @@ cgraph_function_and_variable_visibility (void)\n   for (vnode = cgraph_varpool_nodes_queue; vnode; vnode = vnode->next_needed)\n     {\n       if (vnode->needed\n+\t  && !flag_whole_program\n \t  && (DECL_COMDAT (vnode->decl) || TREE_PUBLIC (vnode->decl)))\n \tvnode->externally_visible = 1;\n       if (!vnode->externally_visible)"}]}