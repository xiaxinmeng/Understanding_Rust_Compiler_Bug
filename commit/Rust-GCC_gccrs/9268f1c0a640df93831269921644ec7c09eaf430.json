{"sha": "9268f1c0a640df93831269921644ec7c09eaf430", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTI2OGYxYzBhNjQwZGY5MzgzMTI2OTkyMTY0NGVjN2MwOWVhZjQzMA==", "commit": {"author": {"name": "Adam Megacz", "email": "adam@xwt.org", "date": "2002-03-09T22:33:49Z"}, "committer": {"name": "Adam Megacz", "email": "megacz@gcc.gnu.org", "date": "2002-03-09T22:33:49Z"}, "message": "2002-03-09  Adam Megacz  <adam@xwt.org>\n\n        * win32.cc (_CRT_MT, __mingwthr_key_dtor) Added fake\n        definitions to simulate -mthreads.\n\nFrom-SVN: r50515", "tree": {"sha": "f24c2114d750a51f5ec6ccc00a8703f27f17fd2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f24c2114d750a51f5ec6ccc00a8703f27f17fd2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9268f1c0a640df93831269921644ec7c09eaf430", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9268f1c0a640df93831269921644ec7c09eaf430", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9268f1c0a640df93831269921644ec7c09eaf430", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9268f1c0a640df93831269921644ec7c09eaf430/comments", "author": null, "committer": null, "parents": [{"sha": "bb0774f3304f57a7bd0ee8f16e45ff28b69343a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb0774f3304f57a7bd0ee8f16e45ff28b69343a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb0774f3304f57a7bd0ee8f16e45ff28b69343a0"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "ad2364093c58a932928fbe429aac9216324a145b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9268f1c0a640df93831269921644ec7c09eaf430/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9268f1c0a640df93831269921644ec7c09eaf430/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9268f1c0a640df93831269921644ec7c09eaf430", "patch": "@@ -1,3 +1,8 @@\n+2002-03-09  Adam Megacz  <adam@xwt.org>\n+\n+        * win32.cc (_CRT_MT, __mingwthr_key_dtor) Added fake\n+        definitions to simulate -mthreads.\n+\t\n 2002-03-09  Adam Megacz  <adam@xwt.org>\n \n         * win32.cc (_Jv_platform_gettimeofday) Cast 1000 to long long to"}, {"sha": "57c63789f366c2b91a4093d349ea30181fa6b1bf", "filename": "libjava/win32.cc", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9268f1c0a640df93831269921644ec7c09eaf430/libjava%2Fwin32.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9268f1c0a640df93831269921644ec7c09eaf430/libjava%2Fwin32.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fwin32.cc?ref=9268f1c0a640df93831269921644ec7c09eaf430", "patch": "@@ -48,3 +48,17 @@ _Jv_platform_gettimeofday ()\n   return t.time * 1000LL + t.millitm;\n }\n \n+// The following definitions \"fake out\" mingw to think that -mthreads\n+// was enabled and that mingwthr.dll was linked. GCJ-compiled\n+// applications don't need this helper library because we can safely\n+// detect thread death (return from Thread.run()).\n+\n+int _CRT_MT = 1;\n+\n+extern \"C\" int\n+__mingwthr_key_dtor (DWORD, void (*) (void *))\n+{\n+  // FIXME: for now we do nothing; this causes a memory leak of\n+  //        approximately 24 bytes per thread created.\n+  return 0;\n+}"}]}