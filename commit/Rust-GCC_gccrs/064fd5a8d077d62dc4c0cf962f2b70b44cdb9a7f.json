{"sha": "064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDY0ZmQ1YThkMDc3ZDYyZGM0YzBjZjk2MmYyYjcwYjQ0Y2RiOWE3Zg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2014-03-04T10:52:18Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2014-03-04T10:52:18Z"}, "message": "re PR c++/60376 ([c++1y] ICE on invalid with using declaration in template function)\n\n/gcc/cp\n2014-03-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60376\n\t* parser.c (cp_parser_using_declaration): Early return when\n\tcp_parser_nested_name_specifier errors out.\n\n/gcc/testsuite\n2014-03-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60376\n\t* g++.dg/cpp1y/pr60376.C: New.\n\n/libstdc++-v3\n2014-03-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60376\n\t* testsuite/29_atomics/headers/atomic/types_std_c++0x_neg.cc:\n\tAdjust dg-error directives.\n\nFrom-SVN: r208309", "tree": {"sha": "192d7dcea3be09625fb45140aba73e73b4acf551", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/192d7dcea3be09625fb45140aba73e73b4acf551"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/comments", "author": null, "committer": null, "parents": [{"sha": "79bc1d65f12f936b45add06cf243ca00aba2388e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79bc1d65f12f936b45add06cf243ca00aba2388e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79bc1d65f12f936b45add06cf243ca00aba2388e"}], "stats": {"total": 91, "additions": 40, "deletions": 51}, "files": [{"sha": "0a12700bebce5c97a92934afb5682e9524f1d173", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "patch": "@@ -1,3 +1,9 @@\n+2014-03-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60376\n+\t* parser.c (cp_parser_using_declaration): Early return when\n+\tcp_parser_nested_name_specifier errors out.\n+\n 2014-03-01  Adam Butcher  <adam@jessamine.co.uk>\n \n \tPR c++/60377"}, {"sha": "413ada64abaf3019812189063ccceff8282721d4", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "patch": "@@ -15932,10 +15932,17 @@ cp_parser_using_declaration (cp_parser* parser,\n   /* If we saw `typename', or didn't see `::', then there must be a\n      nested-name-specifier present.  */\n   if (typename_p || !global_scope_p)\n-    qscope = cp_parser_nested_name_specifier (parser, typename_p,\n-\t\t\t\t\t      /*check_dependency_p=*/true,\n-\t\t\t\t\t      /*type_p=*/false,\n-\t\t\t\t\t      /*is_declaration=*/true);\n+    {\n+      qscope = cp_parser_nested_name_specifier (parser, typename_p,\n+\t\t\t\t\t\t/*check_dependency_p=*/true,\n+\t\t\t\t\t\t/*type_p=*/false,\n+\t\t\t\t\t\t/*is_declaration=*/true);\n+      if (!qscope && !cp_parser_uncommitted_to_tentative_parse_p (parser))\n+\t{\n+\t  cp_parser_skip_to_end_of_block_or_statement (parser);\n+\t  return false;\n+\t}\n+    }\n   /* Otherwise, we could be in either of the two productions.  In that\n      case, treat the nested-name-specifier as optional.  */\n   else"}, {"sha": "3a683dbea4583de202c38d04f82aaef6cd4c0374", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "patch": "@@ -1,3 +1,8 @@\n+2014-03-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60376\n+\t* g++.dg/cpp1y/pr60376.C: New.\n+\n 2014-03-04  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* g++.dg/abi/anon2.C: Don't scan assembler for c++98."}, {"sha": "77efdc583af685dd66dbba4ed2600f8d20d3471f", "filename": "gcc/testsuite/g++.dg/cpp1y/pr60376.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60376.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60376.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60376.C?ref=064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "patch": "@@ -0,0 +1,12 @@\n+// PR c++/60376\n+// { dg-options -std=c++1y }\n+\n+struct A\n+{\n+  int foo();\n+};\n+\n+template<typename> void bar()\n+{\n+  using (A().foo);  // { dg-error \"expected\" }\n+}"}, {"sha": "382d3ac368b1eb8bff83ff79a500a8a8a82b1966", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "patch": "@@ -1,3 +1,9 @@\n+2014-03-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60376\n+\t* testsuite/29_atomics/headers/atomic/types_std_c++0x_neg.cc:\n+\tAdjust dg-error directives.\n+\n 2014-02-26  Tim Shen  <timshen91@gmail.com>\n \n \t* include/bits/regex.tcc (match_results<>::format,"}, {"sha": "08912aa917c976e05d2b7be72c70658e933dd7f1", "filename": "libstdc++-v3/testsuite/29_atomics/headers/atomic/types_std_c++0x_neg.cc", "status": "modified", "additions": 0, "deletions": 47, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/libstdc%2B%2B-v3%2Ftestsuite%2F29_atomics%2Fheaders%2Fatomic%2Ftypes_std_c%2B%2B0x_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f/libstdc%2B%2B-v3%2Ftestsuite%2F29_atomics%2Fheaders%2Fatomic%2Ftypes_std_c%2B%2B0x_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F29_atomics%2Fheaders%2Fatomic%2Ftypes_std_c%2B%2B0x_neg.cc?ref=064fd5a8d077d62dc4c0cf962f2b70b44cdb9a7f", "patch": "@@ -121,50 +121,3 @@ void test01()\n // { dg-error \"expected nested-name-specifier\" \"\" { target *-*-* } 72 }\n // { dg-error \"expected nested-name-specifier\" \"\" { target *-*-* } 73 }\n // { dg-error \"expected nested-name-specifier\" \"\" { target *-*-* } 75 }\n-\n-// { dg-error \"declared\" \"\" { target *-*-* } 26 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 27 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 28 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 29 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 30 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 31 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 32 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 34 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 36 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 37 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 38 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 39 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 40 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 41 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 42 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 43 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 44 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 45 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 46 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 47 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 48 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 49 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 50 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 52 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 53 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 54 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 55 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 56 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 57 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 58 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 59 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 60 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 61 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 62 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 63 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 64 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 65 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 66 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 67 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 68 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 69 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 70 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 71 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 72 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 73 }\n-// { dg-error \"declared\" \"\" { target *-*-* } 75 }"}]}