{"sha": "21a9ce6e0e7d79661b0f3d46623e3027a5860765", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjFhOWNlNmUwZTdkNzk2NjFiMGYzZDQ2NjIzZTMwMjdhNTg2MDc2NQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-09-25T03:37:31Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-09-25T03:37:31Z"}, "message": "ipa-devirt.c (possible_polymorphic_call_targets): Remove forgotten debug output; canonicalize querries more wtih LTO.\n\n\n\t* ipa-devirt.c (possible_polymorphic_call_targets): Remove\n\tforgotten debug output; canonicalize querries more wtih LTO.\n\nFrom-SVN: r215577", "tree": {"sha": "859370599d14c06043c58177d7760babc1612913", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/859370599d14c06043c58177d7760babc1612913"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/21a9ce6e0e7d79661b0f3d46623e3027a5860765", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21a9ce6e0e7d79661b0f3d46623e3027a5860765", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21a9ce6e0e7d79661b0f3d46623e3027a5860765", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21a9ce6e0e7d79661b0f3d46623e3027a5860765/comments", "author": null, "committer": null, "parents": [{"sha": "00d31d5e9fb1d309347ede4561f9165e59aa7f77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00d31d5e9fb1d309347ede4561f9165e59aa7f77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00d31d5e9fb1d309347ede4561f9165e59aa7f77"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "14aaf2ccf68a1a7d9fcf9b30c852d18a783c51ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21a9ce6e0e7d79661b0f3d46623e3027a5860765/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21a9ce6e0e7d79661b0f3d46623e3027a5860765/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=21a9ce6e0e7d79661b0f3d46623e3027a5860765", "patch": "@@ -1,3 +1,8 @@\n+2014-09-24  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* ipa-devirt.c (possible_polymorphic_call_targets): Remove\n+\tforgotten debug output; canonicalize querries more wtih LTO.\n+\n 2014-09-24  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* cgraph.h (class ipa_polymorphic_call_context): Move here from"}, {"sha": "0b6e12bef954f8c1f3887bac02dab329bebee462", "filename": "gcc/ipa-devirt.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21a9ce6e0e7d79661b0f3d46623e3027a5860765/gcc%2Fipa-devirt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21a9ce6e0e7d79661b0f3d46623e3027a5860765/gcc%2Fipa-devirt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-devirt.c?ref=21a9ce6e0e7d79661b0f3d46623e3027a5860765", "patch": "@@ -3726,7 +3726,6 @@ possible_polymorphic_call_targets (tree otr_type,\n   if ((context.outer_type || context.speculative_outer_type)\n       && !context.restrict_to_inner_class (otr_type))\n     {\n-      fprintf (stderr, \"Invalid\\n\");\n       if (completep)\n \t*completep = true;\n       if (cache_token)\n@@ -3771,6 +3770,16 @@ possible_polymorphic_call_targets (tree otr_type,\n \t}\n     }\n \n+  if (in_lto_p)\n+    {\n+      if (context.outer_type != otr_type)\n+        context.outer_type\n+\t  = get_odr_type (context.outer_type, true)->type;\n+      if (context.speculative_outer_type)\n+        context.speculative_outer_type\n+\t  = get_odr_type (context.speculative_outer_type, true)->type;\n+    }\n+\n   /* Lookup cached answer.  */\n   key.type = type;\n   key.otr_token = otr_token;"}]}