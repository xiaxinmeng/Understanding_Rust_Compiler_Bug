{"sha": "a9acf74156d05a933295cba9b800c2c6759296f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTlhY2Y3NDE1NmQwNWE5MzMyOTVjYmE5YjgwMGMyYzY3NTkyOTZmNQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "1998-11-13T16:36:04Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "1998-11-13T16:36:04Z"}, "message": "configure.in: Check for calloc.\n\n        * configure.in: Check for calloc.\n        * calloc.c: New file.\n        * xmalloc.c (xcalloc): New function.\n\nFrom-SVN: r23642", "tree": {"sha": "3ba8d1fed8bcc7504da2c11d5b6e63f2bdf140e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ba8d1fed8bcc7504da2c11d5b6e63f2bdf140e3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9acf74156d05a933295cba9b800c2c6759296f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9acf74156d05a933295cba9b800c2c6759296f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9acf74156d05a933295cba9b800c2c6759296f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9acf74156d05a933295cba9b800c2c6759296f5/comments", "author": null, "committer": null, "parents": [{"sha": "67d0f6ab5e3c6fba25e59702f09f44694a0c968b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67d0f6ab5e3c6fba25e59702f09f44694a0c968b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67d0f6ab5e3c6fba25e59702f09f44694a0c968b"}], "stats": {"total": 202, "additions": 137, "deletions": 65}, "files": [{"sha": "d2aaa31e25c7e9f5304af43054686cef5e2dd8de", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=a9acf74156d05a933295cba9b800c2c6759296f5", "patch": "@@ -1,3 +1,11 @@\n+Fri Nov 13 19:18:05 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* configure.in: Check for calloc.\n+\n+\t* calloc.c: New\tfile.\n+\n+\t* xmalloc.c (xcalloc): New function.\n+\n Fri Nov 13 08:51:46 EST 1998  Andrew MacLeod  <amacleod@cygnus.com>\n \n \t*cplus-dem.c (demangle_prefix): Use the last \"__\""}, {"sha": "c8c0a78a7a131a2e3d2f052e7d2107a455397c2a", "filename": "libiberty/calloc.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fcalloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fcalloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcalloc.c?ref=a9acf74156d05a933295cba9b800c2c6759296f5", "patch": "@@ -0,0 +1,26 @@\n+#include \"ansidecl.h\"\n+#include \"libiberty.h\"\n+ \n+#ifdef ANSI_PROTOTYPES\n+#include <stddef.h>\n+#else\n+#define size_t unsigned long\n+#endif\n+\n+/* For systems with larger pointers than ints, this must be declared.  */\n+PTR malloc PARAMS ((size_t));\n+\n+PTR\n+calloc (nelem, elsize)\n+  size_t nelem, elsize;\n+{\n+  register PTR ptr;  \n+\n+  if (nelem == 0 || elsize == 0)\n+    nelem = elsize = 1;\n+  \n+  ptr = malloc (nelem * elsize);\n+  if (ptr) bzero (ptr, nelem * elsize);\n+  \n+  return ptr;\n+}"}, {"sha": "b52584e67424cc69cdb3dc30402e1e06e5dd869c", "filename": "libiberty/configure", "status": "modified", "additions": 65, "deletions": 64, "changes": 129, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=a9acf74156d05a933295cba9b800c2c6759296f5", "patch": "@@ -1077,6 +1077,7 @@ funcs=\"$funcs basename\"\n funcs=\"$funcs bcmp\"\n funcs=\"$funcs bcopy\"\n funcs=\"$funcs bzero\"\n+funcs=\"$funcs calloc\"\n funcs=\"$funcs clock\"\n funcs=\"$funcs getcwd\"\n funcs=\"$funcs getpagesize\"\n@@ -1116,15 +1117,15 @@ checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times\"\n # These are neither executed nor required, but they help keep\n # autoheader happy without adding a bunch of text to acconfig.h.\n if test \"x\" = \"y\"; then\n-  for ac_func in asprintf atexit basename bcmp bcopy bzero clock getcwd\n+  for ac_func in asprintf atexit basename bcmp bcopy bzero calloc clock getcwd\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1123: checking for $ac_func\" >&5\n+echo \"configure:1124: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1128 \"configure\"\n+#line 1129 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1147,7 +1148,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1151: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1152: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1174,12 +1175,12 @@ done\n   for ac_func in getpagesize index insque memchr memcmp memcpy memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1178: checking for $ac_func\" >&5\n+echo \"configure:1179: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1183 \"configure\"\n+#line 1184 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1202,7 +1203,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1206: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1207: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1229,12 +1230,12 @@ done\n   for ac_func in memset random rename rindex sigsetmask strcasecmp\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1233: checking for $ac_func\" >&5\n+echo \"configure:1234: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1238 \"configure\"\n+#line 1239 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1257,7 +1258,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1261: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1262: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1284,12 +1285,12 @@ done\n   for ac_func in strchr strdup strncasecmp strrchr strstr strtod strtol\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1288: checking for $ac_func\" >&5\n+echo \"configure:1289: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1293 \"configure\"\n+#line 1294 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1312,7 +1313,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1316: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1317: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1339,12 +1340,12 @@ done\n   for ac_func in strtoul tmpnam vasprintf vfprintf vprintf vsprintf waitpid\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1343: checking for $ac_func\" >&5\n+echo \"configure:1344: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1348 \"configure\"\n+#line 1349 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1367,7 +1368,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1371: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1372: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1406,12 +1407,12 @@ EOF\n   for ac_func in getrusage on_exit psignal strerror strsignal sysconf times\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1410: checking for $ac_func\" >&5\n+echo \"configure:1411: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1415 \"configure\"\n+#line 1416 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1434,7 +1435,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1438: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1439: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1589,7 +1590,7 @@ EOF\n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1593: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1594: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1599,11 +1600,11 @@ ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS\n cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext <<EOF\n-#line 1603 \"configure\"\n+#line 1604 \"configure\"\n #include \"confdefs.h\"\n main(){return(0);}\n EOF\n-if { (eval echo configure:1607: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1608: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1623,19 +1624,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1627: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1628: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1634: checking for $ac_func\" >&5\n+echo \"configure:1635: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1639 \"configure\"\n+#line 1640 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1658,7 +1659,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1662: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1663: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1687,19 +1688,19 @@ done\n   # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1691: checking for working alloca.h\" >&5\n+echo \"configure:1692: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1696 \"configure\"\n+#line 1697 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:1703: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1704: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -1720,12 +1721,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1724: checking for alloca\" >&5\n+echo \"configure:1725: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1729 \"configure\"\n+#line 1730 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -1748,7 +1749,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:1752: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1753: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -1780,12 +1781,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:1784: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:1785: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1789 \"configure\"\n+#line 1790 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -1810,12 +1811,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1814: checking for $ac_func\" >&5\n+echo \"configure:1815: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1819 \"configure\"\n+#line 1820 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1838,7 +1839,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1842: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1843: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1865,15 +1866,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1869: checking stack direction for C alloca\" >&5\n+echo \"configure:1870: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1877 \"configure\"\n+#line 1878 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -1892,7 +1893,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:1896: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1897: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -1914,20 +1915,20 @@ EOF\n fi\n \n   echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1918: checking for ANSI C header files\" >&5\n+echo \"configure:1919: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1923 \"configure\"\n+#line 1924 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1931: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1932: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1944,7 +1945,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1948 \"configure\"\n+#line 1949 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1962,7 +1963,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1966 \"configure\"\n+#line 1967 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1983,7 +1984,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1987 \"configure\"\n+#line 1988 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1994,7 +1995,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1998: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1999: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -2018,12 +2019,12 @@ EOF\n fi\n \n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2022: checking for pid_t\" >&5\n+echo \"configure:2023: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2027 \"configure\"\n+#line 2028 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2052,17 +2053,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2056: checking for vfork.h\" >&5\n+echo \"configure:2057: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2061 \"configure\"\n+#line 2062 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2066: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2067: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2087,18 +2088,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2091: checking for working vfork\" >&5\n+echo \"configure:2092: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2097: checking for vfork\" >&5\n+echo \"configure:2098: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2102 \"configure\"\n+#line 2103 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2121,7 +2122,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2125: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2126: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2143,7 +2144,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2147 \"configure\"\n+#line 2148 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2238,7 +2239,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2242: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2243: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2265,19 +2266,19 @@ fi\n   fi\n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:2269: checking for $v\" >&5\n+echo \"configure:2270: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2274 \"configure\"\n+#line 2275 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v; p = &$v;\n ; return 0; }\n EOF\n-if { (eval echo configure:2281: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2282: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -2303,12 +2304,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2307: checking for $ac_func\" >&5\n+echo \"configure:2308: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2312 \"configure\"\n+#line 2313 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2331,7 +2332,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2335: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2336: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else"}, {"sha": "78bf96093e9af2079838ae66f9e7ff2057476dc3", "filename": "libiberty/configure.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=a9acf74156d05a933295cba9b800c2c6759296f5", "patch": "@@ -117,6 +117,7 @@ funcs=\"$funcs basename\"\n funcs=\"$funcs bcmp\"\n funcs=\"$funcs bcopy\"\n funcs=\"$funcs bzero\"\n+funcs=\"$funcs calloc\"\n funcs=\"$funcs clock\"\n funcs=\"$funcs getcwd\"\n funcs=\"$funcs getpagesize\"\n@@ -156,7 +157,7 @@ checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times\"\n # These are neither executed nor required, but they help keep\n # autoheader happy without adding a bunch of text to acconfig.h.\n if test \"x\" = \"y\"; then\n-  AC_CHECK_FUNCS(asprintf atexit basename bcmp bcopy bzero clock getcwd)\n+  AC_CHECK_FUNCS(asprintf atexit basename bcmp bcopy bzero calloc clock getcwd)\n   AC_CHECK_FUNCS(getpagesize index insque memchr memcmp memcpy memmove)\n   AC_CHECK_FUNCS(memset random rename rindex sigsetmask strcasecmp)\n   AC_CHECK_FUNCS(strchr strdup strncasecmp strrchr strstr strtod strtol)"}, {"sha": "4f39014622eadce793b338c34360854b77b57fb5", "filename": "libiberty/xmalloc.c", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fxmalloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9acf74156d05a933295cba9b800c2c6759296f5/libiberty%2Fxmalloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fxmalloc.c?ref=a9acf74156d05a933295cba9b800c2c6759296f5", "patch": "@@ -36,6 +36,7 @@ Boston, MA 02111-1307, USA.  */\n /* For systems with larger pointers than ints, these must be declared.  */\n PTR malloc PARAMS ((size_t));\n PTR realloc PARAMS ((PTR, size_t));\n+PTR calloc PARAMS ((size_t, size_t));\n PTR sbrk PARAMS ((ptrdiff_t));\n #endif\n \n@@ -94,6 +95,41 @@ xmalloc (size)\n   return (newmem);\n }\n \n+PTR\n+xcalloc (nelem, elsize)\n+  size_t nelem, elsize;\n+{\n+  PTR newmem;\n+\n+  if (nelem == 0 || elsize == 0)\n+    nelem = elsize = 1;\n+\n+  newmem = calloc (nelem, elsize);\n+  if (!newmem)\n+    {\n+#if ! defined (_WIN32) || defined (__CYGWIN32__)\n+      extern char **environ;\n+      size_t allocated;\n+\n+      if (first_break != NULL)\n+\tallocated = (char *) sbrk (0) - first_break;\n+      else\n+\tallocated = (char *) sbrk (0) - (char *) &environ;\n+      fprintf (stderr,\n+\t       \"\\n%s%sCan not allocate %lu bytes after allocating %lu bytes\\n\",\n+\t       name, *name ? \": \" : \"\",\n+\t       (unsigned long) (nelem * elsize), (unsigned long) allocated);\n+#else\n+      fprintf (stderr,\n+              \"\\n%s%sCan not allocate %lu bytes\\n\",\n+              name, *name ? \": \" : \"\",\n+              (unsigned long) (nelem * elsize));\n+#endif /* ! _WIN32 || __CYGWIN32 __ */\n+      xexit (1);\n+    }\n+  return (newmem);\n+}\n+\n PTR\n xrealloc (oldmem, size)\n     PTR oldmem;"}]}