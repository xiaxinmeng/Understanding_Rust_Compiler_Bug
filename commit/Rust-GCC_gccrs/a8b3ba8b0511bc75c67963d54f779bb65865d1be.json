{"sha": "a8b3ba8b0511bc75c67963d54f779bb65865d1be", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YThiM2JhOGIwNTExYmM3NWM2Nzk2M2Q1NGY3NzliYjY1ODY1ZDFiZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2005-05-14T14:32:39Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2005-05-14T14:32:39Z"}, "message": "Patch by Richard Henderson:\n\n\t* tree-eh.c (tree_can_throw_internal, tree_can_throw_external):\n\tHandle RESX expressions properly.\n\nFrom-SVN: r99698", "tree": {"sha": "c4111ed07234054e52aad81d13b76812cc1e76f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4111ed07234054e52aad81d13b76812cc1e76f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8b3ba8b0511bc75c67963d54f779bb65865d1be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8b3ba8b0511bc75c67963d54f779bb65865d1be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8b3ba8b0511bc75c67963d54f779bb65865d1be", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8b3ba8b0511bc75c67963d54f779bb65865d1be/comments", "author": null, "committer": null, "parents": [{"sha": "a78b491f29bb39a96308030e22cf035eb22b1ef4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a78b491f29bb39a96308030e22cf035eb22b1ef4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a78b491f29bb39a96308030e22cf035eb22b1ef4"}], "stats": {"total": 23, "additions": 19, "deletions": 4}, "files": [{"sha": "42b8984b1c8a79c599010c1666fc064ec3c61537", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8b3ba8b0511bc75c67963d54f779bb65865d1be/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8b3ba8b0511bc75c67963d54f779bb65865d1be/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a8b3ba8b0511bc75c67963d54f779bb65865d1be", "patch": "@@ -1,5 +1,9 @@\n 2005-05-14  Jan Hubicka  <jh@suse.cz>\n \n+\tPatch by Richard Henderson:\n+\t* tree-eh.c (tree_can_throw_internal, tree_can_throw_external):\n+\tHandle RESX expressions properly.\n+\n \t* tree-eh.c (record_stmt_eh_region): Use add_stmt_to_eh_region.\n \t(add_stmt_to_eh_region_fn): Nest into CALL_EXPR.\n \t(remove_stmt_from_eh_region_fn): Likewise."}, {"sha": "7d83746b501d53e3d4e267ce40c23f5276aea5f5", "filename": "gcc/tree-eh.c", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8b3ba8b0511bc75c67963d54f779bb65865d1be/gcc%2Ftree-eh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8b3ba8b0511bc75c67963d54f779bb65865d1be/gcc%2Ftree-eh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-eh.c?ref=a8b3ba8b0511bc75c67963d54f779bb65865d1be", "patch": "@@ -2008,7 +2008,12 @@ tree_could_throw_p (tree t)\n bool\n tree_can_throw_internal (tree stmt)\n {\n-  int region_nr = lookup_stmt_eh_region (stmt);\n+  int region_nr;\n+\n+  if (TREE_CODE (stmt) == RESX_EXPR)\n+    region_nr = TREE_INT_CST_LOW (TREE_OPERAND (stmt, 0));\n+  else\n+    region_nr = lookup_stmt_eh_region (stmt);\n   if (region_nr < 0)\n     return false;\n   return can_throw_internal_1 (region_nr);\n@@ -2017,10 +2022,16 @@ tree_can_throw_internal (tree stmt)\n bool\n tree_can_throw_external (tree stmt)\n {\n-  int region_nr = lookup_stmt_eh_region (stmt);\n+  int region_nr;\n+\n+  if (TREE_CODE (stmt) == RESX_EXPR)\n+    region_nr = TREE_INT_CST_LOW (TREE_OPERAND (stmt, 0));\n+  else\n+    region_nr = lookup_stmt_eh_region (stmt);\n   if (region_nr < 0)\n-    return false;\n-  return can_throw_external_1 (region_nr);\n+    return tree_could_throw_p (stmt);\n+  else\n+    return can_throw_external_1 (region_nr);\n }\n \n bool"}]}