{"sha": "1619aa6f3e47bcb5f8e88c293a3c716a22288302", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTYxOWFhNmYzZTQ3YmNiNWY4ZTg4YzI5M2EzYzcxNmEyMjI4ODMwMg==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2004-08-18T13:08:08Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-08-18T13:08:08Z"}, "message": "* trans-types.c (gfc_sym_type): Use pointer types for optional args.\n\nFrom-SVN: r86182", "tree": {"sha": "3978a2344fc7077080e4e00ee88b25b8c50d4b73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3978a2344fc7077080e4e00ee88b25b8c50d4b73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1619aa6f3e47bcb5f8e88c293a3c716a22288302", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1619aa6f3e47bcb5f8e88c293a3c716a22288302", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1619aa6f3e47bcb5f8e88c293a3c716a22288302", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1619aa6f3e47bcb5f8e88c293a3c716a22288302/comments", "author": null, "committer": null, "parents": [{"sha": "03904fb39d9e6e8ef4686e35eb0809e42617dc4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03904fb39d9e6e8ef4686e35eb0809e42617dc4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03904fb39d9e6e8ef4686e35eb0809e42617dc4b"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "eae37c8c74811a1b0f9764184dc27416a5beb67a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1619aa6f3e47bcb5f8e88c293a3c716a22288302/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1619aa6f3e47bcb5f8e88c293a3c716a22288302/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1619aa6f3e47bcb5f8e88c293a3c716a22288302", "patch": "@@ -1,3 +1,7 @@\n+2004-08-18  Paul Brook  <paul@codesourcery.com>\n+\n+\t* trans-types.c (gfc_sym_type): Use pointer types for optional args.\n+\n 2004-08-18  Victor Leikehman  <lei@il.ibm.com>\n \n \tPR fortran/13278"}, {"sha": "2b4edfc0e2797729922921743c331a2b048bac64", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1619aa6f3e47bcb5f8e88c293a3c716a22288302/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1619aa6f3e47bcb5f8e88c293a3c716a22288302/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=1619aa6f3e47bcb5f8e88c293a3c716a22288302", "patch": "@@ -972,7 +972,14 @@ gfc_sym_type (gfc_symbol * sym)\n      See f95_get_function_decl.  For dummy function parameters return the\n      function type.  */\n   if (byref)\n-    type = build_reference_type (type);\n+    {\n+      /* We must use pointer types for potentially absent variables.  The\n+\t optimizers assume a reference type argument is never NULL.  */\n+      if (sym->attr.optional || sym->ns->proc_name->attr.entry_master)\n+\ttype = build_pointer_type (type);\n+      else\n+\ttype = build_reference_type (type);\n+    }\n \n   return (type);\n }"}]}