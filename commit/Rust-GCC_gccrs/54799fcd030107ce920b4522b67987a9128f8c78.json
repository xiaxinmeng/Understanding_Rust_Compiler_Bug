{"sha": "54799fcd030107ce920b4522b67987a9128f8c78", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ3OTlmY2QwMzAxMDdjZTkyMGI0NTIyYjY3OTg3YTkxMjhmOGM3OA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2008-09-23T08:00:01Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2008-09-23T08:00:01Z"}, "message": "re PR fortran/37580 (Accepts \"pointer(:) => target\" without lower bound)\n\n2008-09-22  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/37580\n        * expr.c (gfc_check_pointer_assign): Add checks for pointer\n        remapping.\n\n2008-09-22  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/37580\n        * gfortran.dg/pointer_assign_5.f90: New test.\n        * gfortran.dg/pointer_assign_6.f90: New test.\n\nFrom-SVN: r140580", "tree": {"sha": "78248e90f68238801800ee76e96c0694d054231e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78248e90f68238801800ee76e96c0694d054231e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54799fcd030107ce920b4522b67987a9128f8c78", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54799fcd030107ce920b4522b67987a9128f8c78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54799fcd030107ce920b4522b67987a9128f8c78", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54799fcd030107ce920b4522b67987a9128f8c78/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d7445152be468cc8de1ea0a3ab6555448086e951", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7445152be468cc8de1ea0a3ab6555448086e951", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7445152be468cc8de1ea0a3ab6555448086e951"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "5d1ad31d01f7035c01dddeaa1eebfd75d6991f7f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=54799fcd030107ce920b4522b67987a9128f8c78", "patch": "@@ -1,3 +1,9 @@\n+2008-09-23  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/37580\n+\t* expr.c (gfc_check_pointer_assign): Add checks for pointer\n+\tremapping.\n+\n 2008-09-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org\n \n \tPR fortran/37498"}, {"sha": "e15412adfbe162176f2daac1a5347f3e8c05b9f7", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=54799fcd030107ce920b4522b67987a9128f8c78", "patch": "@@ -2955,6 +2955,32 @@ gfc_check_pointer_assign (gfc_expr *lvalue, gfc_expr *rvalue)\n \n       if (ref->type == REF_COMPONENT && ref->u.c.component->attr.pointer)\n \tpointer = 1;\n+\n+      if (ref->type == REF_ARRAY && ref->next == NULL)\n+\t{\n+\t  if (ref->u.ar.type == AR_FULL)\n+\t    break;\n+\n+\t  if (ref->u.ar.type != AR_SECTION)\n+\t    {\n+\t      gfc_error (\"Expected bounds specification for '%s' at %L\",\n+\t\t\t lvalue->symtree->n.sym->name, &lvalue->where);\n+\t      return FAILURE;\n+\t    }\n+\n+\t  if (gfc_notify_std (GFC_STD_F2003,\"Fortran 2003: Bounds \"\n+\t\t\t      \"specification for '%s' in pointer assignment \"\n+                              \"at %L\", lvalue->symtree->n.sym->name,\n+\t\t\t      &lvalue->where) == FAILURE)\n+            return FAILURE;\n+\n+\t  gfc_error (\"Pointer bounds remapping at %L is not yet implemented \"\n+\t\t     \"in gfortran\", &lvalue->where);\n+\t  /* TODO: See PR 29785. Add checks that all lbounds are specified and\n+\t     either never or always the upper-bound; strides shall not be\n+\t     present.  */\n+\t  return FAILURE;\n+\t}\n     }\n \n   if (check_intent_in && lvalue->symtree->n.sym->attr.intent == INTENT_IN)"}, {"sha": "4995cea7e580805e263a73163da52f55046877cc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=54799fcd030107ce920b4522b67987a9128f8c78", "patch": "@@ -1,3 +1,9 @@\n+2008-09-23  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/37580\n+\t* gfortran.dg/pointer_assign_5.f90: New test.\n+\t* gfortran.dg/pointer_assign_6.f90: New test.\n+\n 2008-09-22  David Daney  <ddaney@avtrex.com>\n \n \tPR target/37593"}, {"sha": "03562caf5902d6363a1cf21e20ad2c2050b856e1", "filename": "gcc/testsuite/gfortran.dg/pointer_assign_5.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_assign_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_assign_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_assign_5.f90?ref=54799fcd030107ce920b4522b67987a9128f8c78", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do compile }\n+! PR fortran/37580\n+!\n+program test\n+implicit none\n+real, pointer :: ptr1(:), ptr2(:)\n+ptr1(1) => ptr2 ! { dg-error \"Expected bounds specification\" }\n+ptr1(1:) => ptr2 ! { dg-error \"not yet implemented in gfortran\" }\n+end program test"}, {"sha": "0b4d8f5efa717c3930698ace360618fce892b89c", "filename": "gcc/testsuite/gfortran.dg/pointer_assign_6.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_assign_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54799fcd030107ce920b4522b67987a9128f8c78/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_assign_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_assign_6.f90?ref=54799fcd030107ce920b4522b67987a9128f8c78", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f95\" }\n+! PR fortran/37580\n+!\n+program test\n+implicit none\n+real, pointer :: ptr1(:), ptr2(:)\n+ptr1(1:) => ptr2 ! { dg-error \"Fortran 2003: Bounds specification\" }\n+end program test"}]}