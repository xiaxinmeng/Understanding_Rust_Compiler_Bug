{"sha": "8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODI1OWU0ZjViZDEyMTA4OWQ4ZTU5ZDcwZWU1YWI5N2NkZGNlMWUzNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-10-29T00:17:10Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-10-29T00:17:10Z"}, "message": "re PR c++/30659 (ICE in undefined template)\n\ncp/\n2007-10-28  Paolo Carlini  <pcarlini@suse.de>\n\t    Mark Mitchell  <mark@codesourcery.com>\n\n\tPR c++/30659\n\t* pt.c (do_decl_instantiation): If the VAR_DECL is not a\n\tclass member error out and return.\n\ntestsuite/\n2007-10-28  Paolo Carlini  <pcarlini@suse.de>\n\t    Mark Mitchell  <mark@codesourcery.com>\n\n\tPR c++/30659\n\t* g++.dg/template/crash71.C: New.\n\nCo-Authored-By: Mark Mitchell <mark@codesourcery.com>\n\nFrom-SVN: r129710", "tree": {"sha": "4115879b2c6cd80de5cd4b87ab2e46c0ae0e989e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4115879b2c6cd80de5cd4b87ab2e46c0ae0e989e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/comments", "author": null, "committer": null, "parents": [{"sha": "a9077d27daa2ebe96daf2caf526d94d1cff3a196", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9077d27daa2ebe96daf2caf526d94d1cff3a196", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9077d27daa2ebe96daf2caf526d94d1cff3a196"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "8e2323bb8bb17764e17deb2272284e8cc60afee8", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "patch": "@@ -1,3 +1,10 @@\n+2007-10-28  Paolo Carlini  <pcarlini@suse.de>\n+\t    Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/30659\n+\t* pt.c (do_decl_instantiation): If the VAR_DECL is not a\n+\tclass member error out and return.\n+\n 2007-10-27  Jakub Jelinek  <jakub@redhat.com>\n \n \t* error.c (reinit_cxx_pp): Initialize cxx_pp->enclosing_scope"}, {"sha": "3e8f6e585dae3a7b10193fd92d65ebf6baa3bc51", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "patch": "@@ -13882,6 +13882,11 @@ do_decl_instantiation (tree decl, tree storage)\n \t VAR_DECLs so we do the lookup here.  Probably, grokdeclarator\n \t should handle VAR_DECLs as it currently handles\n \t FUNCTION_DECLs.  */\n+      if (!DECL_CLASS_SCOPE_P (decl))\n+\t{\n+\t  error (\"%qD is not a static data member of a class template\", decl);\n+\t  return;\n+\t}\n       result = lookup_field (DECL_CONTEXT (decl), DECL_NAME (decl), 0, false);\n       if (!result || TREE_CODE (result) != VAR_DECL)\n \t{"}, {"sha": "cecd5f0ee1956f09abb3d7579f7f20668cd75058", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "patch": "@@ -1,3 +1,9 @@\n+2007-10-28  Paolo Carlini  <pcarlini@suse.de>\n+\t    Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/30659\n+\t* g++.dg/template/crash71.C: New.\n+\n 2007-10-28  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n \n \tPR fortran/32147"}, {"sha": "86aa1521d4dd129917cf16a5c2a5284ee9cb96c2", "filename": "gcc/testsuite/g++.dg/template/crash71.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash71.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8259e4f5bd121089d8e59d70ee5ab97cddce1e34/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash71.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash71.C?ref=8259e4f5bd121089d8e59d70ee5ab97cddce1e34", "patch": "@@ -0,0 +1,3 @@\n+// PR c++/30659\n+\n+extern \"C\" template A<char> foo(); // { dg-error \"forbids|static data|expected\" }"}]}