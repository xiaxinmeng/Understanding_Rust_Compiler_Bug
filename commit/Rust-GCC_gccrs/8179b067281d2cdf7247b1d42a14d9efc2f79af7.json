{"sha": "8179b067281d2cdf7247b1d42a14d9efc2f79af7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODE3OWIwNjcyODFkMmNkZjcyNDdiMWQ0MmExNGQ5ZWZjMmY3OWFmNw==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2017-12-17T16:28:08Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2017-12-17T16:28:08Z"}, "message": "Support -std=f2018\n\nThe Fortran committee has decided to rename the upcoming Fortran 2015\nstandard to Fortran 2018.  This is not a reflection of a three year\ndelay in the process, but rather they are following other standards in\nadopting the year of publication for the name. For more details see\nN2144.\n\nThis patch renames GFC_STD_F2015 to GFC_STD_F2018, and makes it a\nseparate flag rather than an alias for GFC_STD_GNU. Also, it adds a\n-std=f2018 argument, and documents it.\n\nRegtested on x86_64-pc-linux-gnu.\n\ngcc/fortran/ChangeLog:\n\n2017-12-17  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\t* decl.c (gfc_match_implicit_none): Use GFC_STD_F2018 instead of\n\tGFC_STD_F2015.\n\t* error.c (gfc_notify_std): Add GFC_STD_F2018{_DEL,_OBS} to\n\tswitch.\n\t* gfortran.texi: Document -std=f2018.\n\t* interface.c (compare_parameter): Fix comment.\n\t* invoke.texi: Document -std=f2018.\n\t* lang.opt: Add -std=f2018 argumnet.\n\t* libgfortran.h (GFC_STD_F2015): Rename to GFC_STD_F0218, use\n\tseparate flag bit.\n\t(GFC_STD_F2018_DEL): New macro.\n\t(GFC_STD_F2018_OBS): Likewise.\n\t* match.c (gfc_match_stopcode): Use GFC_STD_F2018.\n\t* options.c (set_default_std_flags): Add F2018 flags to defaults.\n\t(gfc_handle_option): Set options for -std=f2018.\n\ngcc/testsuite/ChangeLog:\n\n2017-12-17  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\t* gfortran.dg/error_stop_3.f90: Update -std= option, fix comments.\n\t* gfortran.dg/error_stop_4.f90: Update error message.\n\t* gfortran.dg/implicit_14.f90: Likewise.\n\t* gfortran.dg/spellcheck-procedure_2.f90: Don't warn for F2018\n\tfeatures.\n\nFrom-SVN: r255761", "tree": {"sha": "9010becfc66b7475268d626fdb6b7dc8bb4b9d15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9010becfc66b7475268d626fdb6b7dc8bb4b9d15"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8179b067281d2cdf7247b1d42a14d9efc2f79af7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8179b067281d2cdf7247b1d42a14d9efc2f79af7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8179b067281d2cdf7247b1d42a14d9efc2f79af7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8179b067281d2cdf7247b1d42a14d9efc2f79af7/comments", "author": null, "committer": null, "parents": [{"sha": "a2ef9558d17aeb038cbc8a66a203f7a8e6c6e81e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2ef9558d17aeb038cbc8a66a203f7a8e6c6e81e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2ef9558d17aeb038cbc8a66a203f7a8e6c6e81e"}], "stats": {"total": 254, "additions": 167, "deletions": 87}, "files": [{"sha": "5c68938b7131888523dc19d6bd5c77e13a81ef75", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -1,3 +1,21 @@\n+2017-12-17  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\t* decl.c (gfc_match_implicit_none): Use GFC_STD_F2018 instead of\n+\tGFC_STD_F2015.\n+\t* error.c (gfc_notify_std): Add GFC_STD_F2018{_DEL,_OBS} to\n+\tswitch.\n+\t* gfortran.texi: Document -std=f2018.\n+\t* interface.c (compare_parameter): Fix comment.\n+\t* invoke.texi: Document -std=f2018.\n+\t* lang.opt: Add -std=f2018 argumnet.\n+\t* libgfortran.h (GFC_STD_F2015): Rename to GFC_STD_F0218, use\n+\tseparate flag bit.\n+\t(GFC_STD_F2018_DEL): New macro.\n+\t(GFC_STD_F2018_OBS): Likewise.\n+\t* match.c (gfc_match_stopcode): Use GFC_STD_F2018.\n+\t* options.c (set_default_std_flags): Add F2018 flags to defaults.\n+\t(gfc_handle_option): Set options for -std=f2018.\n+\n 2017-12-15  Jakub Jelinek  <jakub@redhat.com>\n \n \t* f95-lang.c (gfc_attribute_table): Swap affects_type_identity"}, {"sha": "53a87b67eff01bdb682eaa2bfa9e520d006c8602", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -4114,7 +4114,7 @@ gfc_match_implicit_none (void)\n   if (c == '(')\n     {\n       (void) gfc_next_ascii_char ();\n-      if (!gfc_notify_std (GFC_STD_F2015, \"IMPORT NONE with spec list at %C\"))\n+      if (!gfc_notify_std (GFC_STD_F2018, \"IMPORT NONE with spec list at %C\"))\n \treturn MATCH_ERROR;\n \n       gfc_gobble_whitespace ();"}, {"sha": "f11dadccbd7427efef5b07629cc3322f882bec1c", "filename": "gcc/fortran/error.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ferror.c?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -864,6 +864,15 @@ gfc_notify_std (int std, const char *gmsgid, ...)\n \n   switch (std)\n   {\n+    case GFC_STD_F2018_DEL:\n+      msg = _(\"Fortran 2018 deleted feature:\");\n+      break;\n+    case GFC_STD_F2018_OBS:\n+      msg = _(\"Fortran 2018 obsolescent feature:\");\n+      break;\n+    case GFC_STD_F2018:\n+      msg = _(\"Fortran 2018:\");\n+      break;\n     case GFC_STD_F2008_TS:\n       msg = \"TS 29113/TS 18508:\";\n       break;"}, {"sha": "aabf26851fd1f3e8e2cd80902f177b184c412944", "filename": "gcc/fortran/gfortran.texi", "status": "modified", "additions": 67, "deletions": 41, "changes": 108, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Fgfortran.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Fgfortran.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.texi?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -180,7 +180,7 @@ Part I: Invoking GNU Fortran\n * Runtime::              Influencing runtime behavior with environment variables.\n \n Part II: Language Reference\n-* Fortran 2003 and 2008 status::  Fortran 2003 and 2008 features supported by GNU Fortran.\n+* Fortran standards status::      Fortran 2003, 2008 and 2018 features supported by GNU Fortran.\n * Compiler Characteristics::      User-visible implementation details.\n * Extensions::                    Language extensions implemented by GNU Fortran.\n * Mixed-Language Programming::    Interoperability with C\n@@ -243,16 +243,15 @@ or alternative to, the Unix @command{f95} command;\n @section About GNU Fortran\n \n The GNU Fortran compiler supports the Fortran 77, 90 and 95 standards\n-completely, parts of the Fortran 2003 and Fortran 2008 standards, and\n+completely, parts of the Fortran 2003, 2008 and 2018 standards, and\n several vendor extensions.  The development goal is to provide the\n following features:\n \n @itemize @bullet\n @item\n-Read a user's program,\n-stored in a file and containing instructions written\n-in Fortran 77, Fortran 90, Fortran 95, Fortran 2003 or Fortran 2008.\n-This file contains @dfn{source code}.\n+Read a user's program, stored in a file and containing instructions\n+written in Fortran 77, Fortran 90, Fortran 95, Fortran 2003, Fortran\n+2008 or Fortran 2018.  This file contains @dfn{source code}.\n \n @item\n Translate the user's program into instructions a computer\n@@ -504,10 +503,11 @@ G77 can be compiled with GNU Fortran, although there are a few minor known\n regressions.\n \n The primary work remaining to be done on GNU Fortran falls into three\n-categories: bug fixing (primarily regarding the treatment of invalid code\n-and providing useful error messages), improving the compiler optimizations\n-and the performance of compiled code, and extending the compiler to support\n-future standards---in particular, Fortran 2003 and Fortran 2008.\n+categories: bug fixing (primarily regarding the treatment of invalid\n+code and providing useful error messages), improving the compiler\n+optimizations and the performance of compiled code, and extending the\n+compiler to support future standards---in particular, Fortran 2003,\n+Fortran 2008 and Fortran 2018.\n \n \n @c ---------------------------------------------------------------------\n@@ -527,13 +527,14 @@ ISO/IEC 1539:1997 (Fortran 95).  As such, it can also compile essentially all\n standard-compliant Fortran 90 and Fortran 77 programs.   It also supports\n the ISO/IEC TR-15581 enhancements to allocatable arrays.\n \n-GNU Fortran also have a partial support for ISO/IEC 1539-1:2004 (Fortran\n-2003), ISO/IEC 1539-1:2010 (Fortran 2008), the Technical Specification\n-@code{Further Interoperability of Fortran with C} (ISO/IEC TS 29113:2012).\n-Full support of those standards and future Fortran standards is planned.\n-The current status of the support is can be found in the\n-@ref{Fortran 2003 status}, @ref{Fortran 2008 status}, @ref{TS 29113 status}\n-and @ref{TS 18508 status} sections of the documentation.\n+GNU Fortran also have a partial support for ISO/IEC 1539-1:2004\n+(Fortran 2003), ISO/IEC 1539-1:2010 (Fortran 2008), the Technical\n+Specification @code{Further Interoperability of Fortran with C}\n+(ISO/IEC TS 29113:2012).  Full support of those standards and future\n+Fortran standards is planned.  The current status of the support is\n+can be found in the @ref{Fortran 2003 status}, @ref{Fortran 2008\n+status}, @ref{TS 29113 status}, @ref{TS 18508 status} and @ref{Fortran\n+2018 status} sections of the documentation.\n \n Additionally, the GNU Fortran compilers supports the OpenMP specification\n (version 4.0 and most of the features of the 4.5 version,\n@@ -783,17 +784,18 @@ compile option was used.\n @end tex\n \n @c ---------------------------------------------------------------------\n-@c Fortran 2003 and 2008 Status\n+@c Fortran standards status\n @c ---------------------------------------------------------------------\n \n-@node Fortran 2003 and 2008 status\n-@chapter Fortran 2003 and 2008 Status\n+@node Fortran standards status\n+@chapter Fortran standards status\n \n @menu\n * Fortran 2003 status::\n * Fortran 2008 status::\n * TS 29113 status::\n * TS 18508 status::\n+* Fortran 2018 status::\n @end menu\n \n @node Fortran 2003 status\n@@ -1145,6 +1147,27 @@ polymorphic components.\n @end itemize\n \n \n+@node Fortran 2018 status\n+@section Status of Fortran 2018 support\n+\n+So far very little work has been done to support Fortran 2018.\n+\n+@itemize\n+@item ERROR STOP in a PURE procedure\n+An @code{ERROR STOP} statement is permitted in a @code{PURE}\n+procedure.\n+\n+@item IMPLICIT NONE with a spec-list\n+Support the @code{IMPLICIT NONE} statement with an\n+@code{implicit-none-spec-list}.\n+\n+@item Behavior of INQUIRE with the RECL= specifier\n+\n+The behavior of the @code{INQUIRE} statement with the @code{RECL=}\n+specifier now conforms to Fortran 2018.\n+\n+@end itemize\n+\n @c ---------------------------------------------------------------------\n @c Compiler Characteristics\n @c ---------------------------------------------------------------------\n@@ -1482,18 +1505,19 @@ extensions.\n @section Extensions implemented in GNU Fortran\n @cindex extensions, implemented\n \n-GNU Fortran implements a number of extensions over standard\n-Fortran.  This chapter contains information on their syntax and\n-meaning.  There are currently two categories of GNU Fortran\n-extensions, those that provide functionality beyond that provided\n-by any standard, and those that are supported by GNU Fortran\n-purely for backward compatibility with legacy compilers.  By default,\n-@option{-std=gnu} allows the compiler to accept both types of\n-extensions, but to warn about the use of the latter.  Specifying\n-either @option{-std=f95}, @option{-std=f2003} or @option{-std=f2008}\n-disables both types of extensions, and @option{-std=legacy} allows both\n-without warning.  The special compile flag @option{-fdec} enables additional\n-compatibility extensions along with those enabled by @option{-std=legacy}.\n+GNU Fortran implements a number of extensions over standard Fortran.\n+This chapter contains information on their syntax and meaning.  There\n+are currently two categories of GNU Fortran extensions, those that\n+provide functionality beyond that provided by any standard, and those\n+that are supported by GNU Fortran purely for backward compatibility\n+with legacy compilers.  By default, @option{-std=gnu} allows the\n+compiler to accept both types of extensions, but to warn about the use\n+of the latter.  Specifying either @option{-std=f95},\n+@option{-std=f2003}, @option{-std=f2008}, or @option{-std=f2018}\n+disables both types of extensions, and @option{-std=legacy} allows\n+both without warning.  The special compile flag @option{-fdec} enables\n+additional compatibility extensions along with those enabled by\n+@option{-std=legacy}.\n \n @menu\n * Old-style kind specifications::\n@@ -3602,15 +3626,17 @@ used.\n @item @emph{option flag list}:\n @multitable @columnfractions .15 .70\n @item @var{option}[0] @tab Allowed standard; can give run-time errors\n-if e.g. an input-output edit descriptor is invalid in a given standard.\n-Possible values are (bitwise or-ed) @code{GFC_STD_F77} (1),\n-@code{GFC_STD_F95_OBS} (2), @code{GFC_STD_F95_DEL} (4), @code{GFC_STD_F95}\n-(8), @code{GFC_STD_F2003} (16), @code{GFC_STD_GNU} (32),\n-@code{GFC_STD_LEGACY} (64), @code{GFC_STD_F2008} (128),\n-@code{GFC_STD_F2008_OBS} (256) and GFC_STD_F2008_TS (512). Default:\n-@code{GFC_STD_F95_OBS | GFC_STD_F95_DEL | GFC_STD_F95 | GFC_STD_F2003\n-| GFC_STD_F2008 | GFC_STD_F2008_TS | GFC_STD_F2008_OBS | GFC_STD_F77\n-| GFC_STD_GNU | GFC_STD_LEGACY}.\n+if e.g. an input-output edit descriptor is invalid in a given\n+standard.  Possible values are (bitwise or-ed) @code{GFC_STD_F77} (1),\n+@code{GFC_STD_F95_OBS} (2), @code{GFC_STD_F95_DEL} (4),\n+@code{GFC_STD_F95} (8), @code{GFC_STD_F2003} (16), @code{GFC_STD_GNU}\n+(32), @code{GFC_STD_LEGACY} (64), @code{GFC_STD_F2008} (128),\n+@code{GFC_STD_F2008_OBS} (256), @code{GFC_STD_F2008_TS} (512),\n+@code{GFC_STD_F2018} (1024), @code{GFC_STD_F2018_OBS} (2048), and\n+@code{GFC_STD=F2018_DEL} (4096). Default: @code{GFC_STD_F95_OBS |\n+GFC_STD_F95_DEL | GFC_STD_F95 | GFC_STD_F2003 | GFC_STD_F2008 |\n+GFC_STD_F2008_TS | GFC_STD_F2008_OBS | GFC_STD_F77 | GFC_STD_F2018 |\n+GFC_STD_F2018_OBS | GFC_STD_F2018_DEL | GFC_STD_GNU | GFC_STD_LEGACY}.\n @item @var{option}[1] @tab Standard-warning flag; prints a warning to\n standard error.  Default: @code{GFC_STD_F95_DEL | GFC_STD_LEGACY}.\n @item @var{option}[2] @tab If non zero, enable pedantic checking."}, {"sha": "cd022146174a772bb2465efdc0b2baf92a6f11fd", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -2355,7 +2355,7 @@ compare_parameter (gfc_symbol *formal, gfc_expr *actual,\n   if (formal->attr.codimension)\n     {\n       /* F2008, 12.5.2.8 + Corrig 2 (IR F08/0048).  */\n-      /* F2015, 12.5.2.8.  */\n+      /* F2018, 12.5.2.8.  */\n       if (formal->attr.dimension\n \t  && (formal->attr.contiguous || formal->as->type != AS_ASSUMED_SHAPE)\n \t  && actual_attr.dimension"}, {"sha": "7b6f161516e4639ed15d6a8c0da674f5bacdcb35", "filename": "gcc/fortran/invoke.texi", "status": "modified", "additions": 33, "deletions": 29, "changes": 62, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finvoke.texi?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -467,22 +467,24 @@ representation of the translated Fortran code, produced by\n \n @item -std=@var{std}\n @opindex @code{std=}@var{std} option\n-Specify the standard to which the program is expected to conform, which\n-may be one of @samp{f95}, @samp{f2003}, @samp{f2008}, @samp{gnu}, or\n-@samp{legacy}.  The default value for @var{std} is @samp{gnu}, which\n-specifies a superset of the Fortran 95 standard that includes all of the\n-extensions supported by GNU Fortran, although warnings will be given for\n-obsolete extensions not recommended for use in new code.  The\n-@samp{legacy} value is equivalent but without the warnings for obsolete\n-extensions, and may be useful for old non-standard programs.  The\n-@samp{f95}, @samp{f2003} and @samp{f2008} values specify strict\n-conformance to the Fortran 95, Fortran 2003 and Fortran 2008 standards,\n-respectively; errors are given for all extensions beyond the relevant\n-language standard, and warnings are given for the Fortran 77 features\n-that are permitted but obsolescent in later standards. @samp{-std=f2008ts}\n-allows the Fortran 2008 standard including the additions of the \n-Technical Specification (TS) 29113 on Further Interoperability of Fortran\n-with C and TS 18508 on Additional Parallel Features in Fortran.\n+Specify the standard to which the program is expected to conform,\n+which may be one of @samp{f95}, @samp{f2003}, @samp{f2008},\n+@samp{f2018}, @samp{gnu}, or @samp{legacy}.  The default value for\n+@var{std} is @samp{gnu}, which specifies a superset of the latest\n+Fortran standard that includes all of the extensions supported by GNU\n+Fortran, although warnings will be given for obsolete extensions not\n+recommended for use in new code.  The @samp{legacy} value is\n+equivalent but without the warnings for obsolete extensions, and may\n+be useful for old non-standard programs.  The @samp{f95},\n+@samp{f2003}, @samp{f2008}, and @samp{f2018} values specify strict\n+conformance to the Fortran 95, Fortran 2003, Fortran 2008 and Fortran\n+2018 standards, respectively; errors are given for all extensions\n+beyond the relevant language standard, and warnings are given for the\n+Fortran 77 features that are permitted but obsolescent in later\n+standards. @samp{-std=f2008ts} allows the Fortran 2008 standard\n+including the additions of the Technical Specification (TS) 29113 on\n+Further Interoperability of Fortran with C and TS 18508 on Additional\n+Parallel Features in Fortran.\n \n @item -ftest-forall-temp\n @opindex @code{ftest-forall-temp}\n@@ -782,12 +784,12 @@ other output file.\n @itemx -pedantic\n @opindex @code{pedantic}\n @opindex @code{Wpedantic}\n-Issue warnings for uses of extensions to Fortran 95.\n+Issue warnings for uses of extensions to Fortran.\n @option{-pedantic} also applies to C-language constructs where they\n occur in GNU Fortran source files, such as use of @samp{\\e} in a\n character constant within a directive like @code{#include}.\n \n-Valid Fortran 95 programs should compile properly with or without\n+Valid Fortran programs should compile properly with or without\n this option.\n However, without this option, certain GNU extensions and traditional\n Fortran features are supported as well.\n@@ -799,7 +801,7 @@ nonstandard practices, but not all.\n However, improvements to GNU Fortran in this area are welcome.\n \n This should be used in conjunction with @option{-std=f95},\n-@option{-std=f2003} or @option{-std=f2008}.\n+@option{-std=f2003}, @option{-std=f2008} or @option{-std=f2018}.\n \n @item -pedantic-errors\n @opindex @code{pedantic-errors}\n@@ -845,12 +847,13 @@ The following example will trigger the warning.\n @opindex @code{Wampersand}\n @cindex warnings, ampersand\n @cindex @code{&}\n-Warn about missing ampersand in continued character constants. The warning is\n-given with @option{-Wampersand}, @option{-pedantic}, @option{-std=f95},\n-@option{-std=f2003} and @option{-std=f2008}. Note: With no ampersand\n-given in a continued character constant, GNU Fortran assumes continuation\n-at the first non-comment, non-whitespace character after the ampersand\n-that initiated the continuation.\n+Warn about missing ampersand in continued character constants. The\n+warning is given with @option{-Wampersand}, @option{-pedantic},\n+@option{-std=f95}, @option{-std=f2003}, @option{-std=f2008} and\n+@option{-std=f2018}. Note: With no ampersand given in a continued\n+character constant, GNU Fortran assumes continuation at the first\n+non-comment, non-whitespace character after the ampersand that\n+initiated the continuation.\n \n @item -Wargument-mismatch\n @opindex @code{Wargument-mismatch}\n@@ -988,10 +991,11 @@ A @code{CHARACTER} variable is declared with negative length.\n @cindex tabulators\n By default, tabs are accepted as whitespace, but tabs are not members\n of the Fortran Character Set.  For continuation lines, a tab followed\n-by a digit between 1 and 9 is supported.  @option{-Wtabs} will cause\n-a warning to be issued if a tab is encountered. Note, @option{-Wtabs}\n-is active for @option{-pedantic}, @option{-std=f95}, @option{-std=f2003},\n-@option{-std=f2008}, @option{-std=f2008ts} and @option{-Wall}.\n+by a digit between 1 and 9 is supported.  @option{-Wtabs} will cause a\n+warning to be issued if a tab is encountered. Note, @option{-Wtabs} is\n+active for @option{-pedantic}, @option{-std=f95}, @option{-std=f2003},\n+@option{-std=f2008}, @option{-std=f2008ts}, @option{-std=f2018} and\n+@option{-Wall}.\n \n @item -Wundefined-do-loop\n @opindex @code{Wundefined-do-loop}"}, {"sha": "4421c0bff54e6c34c7e27067eddc55db80253539", "filename": "gcc/fortran/lang.opt", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang.opt?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -1,4 +1,4 @@\n-; Options for the Fortran 95 front end.\n+; Options for the Fortran front end.\n ; Copyright (C) 2003-2017 Free Software Foundation, Inc.\n ;\n ; This file is part of GCC.\n@@ -802,6 +802,10 @@ std=f2008ts\n Fortran\n Conform to the ISO Fortran 2008 standard including TS 29113.\n \n+std=f2018\n+Fortran\n+Conform to the ISO Fortran 2018 standard.\n+\n std=f95\n Fortran\n Conform to the ISO Fortran 95 standard."}, {"sha": "0756c3244b8569a7622ad435c60cce7c323e6a5e", "filename": "gcc/fortran/libgfortran.h", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Flibgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Flibgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flibgfortran.h?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -22,8 +22,9 @@ along with GCC; see the file COPYING3.  If not see\n    Note that no features were obsoleted nor deleted in F2003.\n    Please remember to keep those definitions in sync with\n    gfortran.texi.  */\n-/* For now, use F2015 = GFC_STD_GNU.  */\n-#define GFC_STD_F2015\t        (1<<5)\t/* PLACEHOLDER for Fortran 2015.  */\n+#define GFC_STD_F2018_DEL      (1<<12)  /* Deleted in F2018.  */\n+#define GFC_STD_F2018_OBS      (1<<11)  /* Obsolescent in F2018.  */\n+#define GFC_STD_F2018          (1<<10)  /* New in F2018.  */\n #define GFC_STD_F2008_TS\t(1<<9)\t/* POST-F2008 technical reports.  */\n #define GFC_STD_F2008_OBS\t(1<<8)\t/* Obsolescent in F2008.  */\n #define GFC_STD_F2008\t\t(1<<7)\t/* New in F2008.  */"}, {"sha": "d63b11c2080cba7e7d2c37f987d0a875191e0f1b", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -2985,7 +2985,7 @@ gfc_match_stopcode (gfc_statement st)\n     {\n       if (st == ST_ERROR_STOP)\n \t{\n-\t  if (!gfc_notify_std (GFC_STD_F2015, \"%s statement at %C in PURE \"\n+\t  if (!gfc_notify_std (GFC_STD_F2018, \"%s statement at %C in PURE \"\n \t\t\t       \"procedure\", gfc_ascii_statement (st)))\n \t    goto cleanup;\n \t}"}, {"sha": "57fc0f5777d7c4b52fba25ec3c9940c6bef34f56", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -42,7 +42,8 @@ set_default_std_flags (void)\n {\n   gfc_option.allow_std = GFC_STD_F95_OBS | GFC_STD_F95_DEL\n     | GFC_STD_F2003 | GFC_STD_F2008 | GFC_STD_F95 | GFC_STD_F77\n-    | GFC_STD_F2008_OBS | GFC_STD_F2008_TS | GFC_STD_GNU | GFC_STD_LEGACY;\n+    | GFC_STD_F2008_OBS | GFC_STD_F2008_TS | GFC_STD_GNU | GFC_STD_LEGACY\n+    | GFC_STD_F2018 | GFC_STD_F2018_DEL | GFC_STD_F2018_OBS;\n   gfc_option.warn_std = GFC_STD_F95_DEL | GFC_STD_LEGACY;\n }\n \n@@ -741,6 +742,17 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       warn_tabs = 1;\n       break;\n \n+    case OPT_std_f2018:\n+      gfc_option.allow_std = GFC_STD_F95_OBS | GFC_STD_F77\n+\t| GFC_STD_F2003 | GFC_STD_F95 | GFC_STD_F2008 | GFC_STD_F2008_OBS\n+\t| GFC_STD_F2008_TS | GFC_STD_F2018 | GFC_STD_F2018_OBS;\n+      gfc_option.warn_std = GFC_STD_F95_OBS | GFC_STD_F2008_OBS\n+\t| GFC_STD_F2018_OBS;\n+      gfc_option.max_identifier_length = 63;\n+      warn_ampersand = 1;\n+      warn_tabs = 1;\n+      break;\n+\n     case OPT_std_gnu:\n       set_default_std_flags ();\n       break;"}, {"sha": "f46994747bdb3b5ada60a4e269a973b006ab0313", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -1,4 +1,12 @@\n-2017-12-17  Markus Trippelsdorf  <markus@trippelsdorf.de> \n+2017-12-17  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\t* gfortran.dg/error_stop_3.f90: Update -std= option, fix comments.\n+\t* gfortran.dg/error_stop_4.f90: Update error message.\n+\t* gfortran.dg/implicit_14.f90: Likewise.\n+\t* gfortran.dg/spellcheck-procedure_2.f90: Don't warn for F2018\n+\tfeatures.\n+\n+2017-12-17  Markus Trippelsdorf  <markus@trippelsdorf.de>\n \n \t* gcc.target/i386/wmul-3.c: New test.\n "}, {"sha": "1ff74d8623a170623e0756cd611c211bde1292ea", "filename": "gcc/testsuite/gfortran.dg/error_stop_3.f90", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_stop_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_stop_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_stop_3.f90?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -1,8 +1,7 @@\n ! { dg-do compile }\n-! { dg-options \"-std=gnu\" }\n+! { dg-options \"-std=f2018\" }\n !\n-! F2015 permits ERROR STOP in PURE procedures\n-! FIXME: Change to -std=f2015, when available\n+! F2018 permits ERROR STOP in PURE procedures\n !\n pure subroutine foo()\n   error stop \"failed\""}, {"sha": "fbca5990b969fc2e2a6039b62d9855451f8a1e38", "filename": "gcc/testsuite/gfortran.dg/error_stop_4.f90", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_stop_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_stop_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_stop_4.f90?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -1,9 +1,8 @@\n ! { dg-do compile }\n ! { dg-options \"-std=f2008ts\" }\n !\n-! F2015 permits ERROR STOP in PURE procedures\n-! FIXME: Change to error_stop_3.f90 to -std=f2015.\n+! F2018 permits ERROR STOP in PURE procedures\n !\n pure subroutine foo()\n-  error stop \"failed\"  ! { dg-error \"GNU Extension: ERROR STOP statement at .1. in PURE procedure\" }\n+  error stop \"failed\"  ! { dg-error \"Fortran 2018: ERROR STOP statement at .1. in PURE procedure\" }\n end"}, {"sha": "b4c005b883546328b77618e4acb82cb5a7cfca65", "filename": "gcc/testsuite/gfortran.dg/implicit_14.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_14.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_14.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_14.f90?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -1,8 +1,8 @@\n ! { dg-do compile }\n ! { dg-options \"-std=f2008ts\" }\n !\n-! Support Fortran 2015's IMPLICIT NONE with spec list\n+! Support Fortran 2018's IMPLICIT NONE with spec list\n ! (currently implemented as vendor extension)\n \n-implicit none (type) ! { dg-error \"GNU Extension: IMPORT NONE with spec list at \\\\(1\\\\)\" }\n+implicit none (type) ! { dg-error \"Fortran 2018: IMPORT NONE with spec list at \\\\(1\\\\)\" }\n end"}, {"sha": "fbd4dcde54004addad4a7ed639fe6c9304670e9c", "filename": "gcc/testsuite/gfortran.dg/spellcheck-procedure_2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Fspellcheck-procedure_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8179b067281d2cdf7247b1d42a14d9efc2f79af7/gcc%2Ftestsuite%2Fgfortran.dg%2Fspellcheck-procedure_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fspellcheck-procedure_2.f90?ref=8179b067281d2cdf7247b1d42a14d9efc2f79af7", "patch": "@@ -3,7 +3,7 @@\n \n \n program spellchekc\n-  implicit none (external) ! { dg-warning \"GNU Extension: IMPORT NONE with spec list\" }\n+  implicit none (external)\n \n   interface\n     subroutine bark_unless_zero(iarg)"}]}