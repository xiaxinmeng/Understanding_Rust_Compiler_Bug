{"sha": "d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDJmOWU2YWQwY2U5ZTFlNDA4MjEyNDNmYTlkMDFiN2ZkYzQyZjMyYw==", "commit": {"author": {"name": "Matthew Malcomson", "email": "matthew.malcomson@arm.com", "date": "2020-04-15T11:24:39Z"}, "committer": {"name": "Matthew Malcomson", "email": "matthew.malcomson@arm.com", "date": "2020-04-15T11:24:39Z"}, "message": "[Arm] Disallow arm_movdi when targetting MVE\n\nWithout disabling this, the pattern can try and move DImode values\nbetween floating point registers and general registers.\nThe constraints on this pattern can't handle that, and reload goes into\nan infinite loop.\n\nThis was the cause of a testsuite failure in cde_v_1_mve.c, which is now\ngone.\n\nA DImode move for MVE now uses the `movdi_vfp` pattern, which is the same\npattern used for such a move when MVE is not available but the target has\nTARGET_HARD_FLOAT.\n\nTesting done:\n    Bootstrapped and regtested on arm-none-linux-gnueabihf\n    regtested on arm-none-eabi\n\ngcc/ChangeLog:\n\n2020-04-15  Matthew Malcomson  <matthew.malcomson@arm.com>\n\n\t* config/arm/arm.md (arm_movdi): Disallow for MVE.", "tree": {"sha": "4f020577d0453b3701743e78aeeedb614cdba72c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f020577d0453b3701743e78aeeedb614cdba72c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c/comments", "author": {"login": "mmalcomson", "id": 57484298, "node_id": "MDQ6VXNlcjU3NDg0Mjk4", "avatar_url": "https://avatars.githubusercontent.com/u/57484298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmalcomson", "html_url": "https://github.com/mmalcomson", "followers_url": "https://api.github.com/users/mmalcomson/followers", "following_url": "https://api.github.com/users/mmalcomson/following{/other_user}", "gists_url": "https://api.github.com/users/mmalcomson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmalcomson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmalcomson/subscriptions", "organizations_url": "https://api.github.com/users/mmalcomson/orgs", "repos_url": "https://api.github.com/users/mmalcomson/repos", "events_url": "https://api.github.com/users/mmalcomson/events{/privacy}", "received_events_url": "https://api.github.com/users/mmalcomson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mmalcomson", "id": 57484298, "node_id": "MDQ6VXNlcjU3NDg0Mjk4", "avatar_url": "https://avatars.githubusercontent.com/u/57484298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmalcomson", "html_url": "https://github.com/mmalcomson", "followers_url": "https://api.github.com/users/mmalcomson/followers", "following_url": "https://api.github.com/users/mmalcomson/following{/other_user}", "gists_url": "https://api.github.com/users/mmalcomson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmalcomson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmalcomson/subscriptions", "organizations_url": "https://api.github.com/users/mmalcomson/orgs", "repos_url": "https://api.github.com/users/mmalcomson/repos", "events_url": "https://api.github.com/users/mmalcomson/events{/privacy}", "received_events_url": "https://api.github.com/users/mmalcomson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5b2f76e36d861c881c6770b4f47c1fae6c0c8965", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b2f76e36d861c881c6770b4f47c1fae6c0c8965", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b2f76e36d861c881c6770b4f47c1fae6c0c8965"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "82e0cd61b00c816cdef5dc17db9058a1be098243", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c", "patch": "@@ -1,3 +1,7 @@\n+2020-04-15  Matthew Malcomson  <matthew.malcomson@arm.com>\n+\n+\t* config/arm/arm.md (arm_movdi): Disallow for MVE.\n+\n 2020-04-15  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/94539"}, {"sha": "a6a31f8f4ef8d3c8c96c61b450dbd7c28d08b55c", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=d2f9e6ad0ce9e1e40821243fa9d01b7fdc42f32c", "patch": "@@ -6233,6 +6233,7 @@\n \t(match_operand:DI 1 \"di_operand\"              \"rDa,Db,Dc,mi,r\"))]\n   \"TARGET_32BIT\n    && !(TARGET_HARD_FLOAT)\n+   && !(TARGET_HAVE_MVE || TARGET_HAVE_MVE_FLOAT)\n    && !TARGET_IWMMXT\n    && (   register_operand (operands[0], DImode)\n        || register_operand (operands[1], DImode))\""}]}