{"sha": "a20d03c88261b7d475db7c410c1018df326c67af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIwZDAzYzg4MjYxYjdkNDc1ZGI3YzQxMGMxMDE4ZGYzMjZjNjdhZg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2016-10-21T07:07:06Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2016-10-21T07:07:06Z"}, "message": "re PR c++/78051 (error: dead STMT in EH table when using -O2)\n\n2016-10-21  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/78051\n\t* tree-vrp.c (evrp_dom_walker::before_dom_children): Update stmt\n\tand mark replaced if folding did something.\n\n\t* g++.dg/torture/pr78051.C: New testcase.\n\nFrom-SVN: r241394", "tree": {"sha": "dc2a148dd9df35d3f1ed9a36fe703517ace05d4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc2a148dd9df35d3f1ed9a36fe703517ace05d4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a20d03c88261b7d475db7c410c1018df326c67af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a20d03c88261b7d475db7c410c1018df326c67af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a20d03c88261b7d475db7c410c1018df326c67af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a20d03c88261b7d475db7c410c1018df326c67af/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "924fae46b341e810ec5f1fa0e99b5f0cadeff7eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/924fae46b341e810ec5f1fa0e99b5f0cadeff7eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/924fae46b341e810ec5f1fa0e99b5f0cadeff7eb"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "73370949f369326fe440d6eac60b43338662a088", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a20d03c88261b7d475db7c410c1018df326c67af", "patch": "@@ -1,3 +1,9 @@\n+2016-10-21  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/78051\n+\t* tree-vrp.c (evrp_dom_walker::before_dom_children): Update stmt\n+\tand mark replaced if folding did something.\n+\n 2016-10-21  David Edelsohn  <dje.gcc@gmail.com>\n \n \t* config/rs6000/rs6000.c (rs6000_assemble_visibility): Swap \"internal\""}, {"sha": "8033762d6ca2b375caaf23e0fdc215f5493b5f1c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a20d03c88261b7d475db7c410c1018df326c67af", "patch": "@@ -1,3 +1,8 @@\n+2016-10-21  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/78051\n+\t* g++.dg/torture/pr78051.C: New testcase.\n+\n 2016-10-20  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* c-c++-common/wdate-time.c: Restored test case."}, {"sha": "ff28368d4bb5f9929e990c139f6b01dd19c93137", "filename": "gcc/testsuite/g++.dg/torture/pr78051.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr78051.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr78051.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr78051.C?ref=a20d03c88261b7d475db7c410c1018df326c67af", "patch": "@@ -0,0 +1,9 @@\n+extern \"C\" {\n+    typedef int FILE;\n+    int *stdout;\n+    int fputs(const char *, FILE *);\n+}\n+void print_packet() {\n+    const char *color[]{\"\", \"\", \"\"};\n+    fputs(color[2], stdout);\n+}"}, {"sha": "9675ca239b4f22227593147ff8e78c4fd2691443", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a20d03c88261b7d475db7c410c1018df326c67af/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=a20d03c88261b7d475db7c410c1018df326c67af", "patch": "@@ -10850,7 +10850,11 @@ evrp_dom_walker::before_dom_children (basic_block bb)\n \t= replace_uses_in (stmt, op_with_constant_singleton_value_range);\n       if (fold_stmt (&gsi, follow_single_use_edges)\n \t  || did_replace)\n-\tupdate_stmt (gsi_stmt (gsi));\n+\t{\n+\t  stmt = gsi_stmt (gsi);\n+\t  update_stmt (stmt);\n+\t  did_replace = true;\n+\t}\n \n       if (did_replace)\n \t{"}]}