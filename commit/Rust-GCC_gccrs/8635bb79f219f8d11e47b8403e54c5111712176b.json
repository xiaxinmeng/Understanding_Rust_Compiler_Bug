{"sha": "8635bb79f219f8d11e47b8403e54c5111712176b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODYzNWJiNzlmMjE5ZjhkMTFlNDdiODQwM2U1NGM1MTExNzEyMTc2Yg==", "commit": {"author": {"name": "Per Bothner", "email": "per@bothner.com", "date": "2001-09-01T01:17:24Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2001-09-01T01:17:24Z"}, "message": "ClassLoader.java (system): Remove static field.\n\n\n\t* java/lang/ClassLoader.java (system):  Remove static field.\n\t(getSystemClassLoader):  Get gnu.gcj.runtime.VMClassLoader.instance\n\tdirectly instead of using it to set the system field.\n\t(loadClass):  Use VMClassLoader.instance instead of system field.\n\t(findSystemClass):   Similar.\n\t* prims.cc (_Jv_RunMain):  Clear VMClassLoader::instance rather\n\tthan ClassLoader::system which no longer exists.\n\t* java/lang/natClassLoader.java (_Jv_FindClass):  Simplify.\n\nFrom-SVN: r45343", "tree": {"sha": "da556e77ce7081d073287d3c5c1ebb687c46fb49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da556e77ce7081d073287d3c5c1ebb687c46fb49"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8635bb79f219f8d11e47b8403e54c5111712176b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8635bb79f219f8d11e47b8403e54c5111712176b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8635bb79f219f8d11e47b8403e54c5111712176b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8635bb79f219f8d11e47b8403e54c5111712176b/comments", "author": {"login": "PerBothner", "id": 10293361, "node_id": "MDQ6VXNlcjEwMjkzMzYx", "avatar_url": "https://avatars.githubusercontent.com/u/10293361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PerBothner", "html_url": "https://github.com/PerBothner", "followers_url": "https://api.github.com/users/PerBothner/followers", "following_url": "https://api.github.com/users/PerBothner/following{/other_user}", "gists_url": "https://api.github.com/users/PerBothner/gists{/gist_id}", "starred_url": "https://api.github.com/users/PerBothner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PerBothner/subscriptions", "organizations_url": "https://api.github.com/users/PerBothner/orgs", "repos_url": "https://api.github.com/users/PerBothner/repos", "events_url": "https://api.github.com/users/PerBothner/events{/privacy}", "received_events_url": "https://api.github.com/users/PerBothner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "788d7b942c6621c06f3d9f362aaa179dcd8fc811", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/788d7b942c6621c06f3d9f362aaa179dcd8fc811", "html_url": "https://github.com/Rust-GCC/gccrs/commit/788d7b942c6621c06f3d9f362aaa179dcd8fc811"}], "stats": {"total": 31, "additions": 18, "deletions": 13}, "files": [{"sha": "5170b9a1c832bc0026cdd0d9f4fa0fac882a1c95", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=8635bb79f219f8d11e47b8403e54c5111712176b", "patch": "@@ -1,3 +1,14 @@\n+2001-08-31  Per Bothner  <per@bothner.com>\n+\n+\t* java/lang/ClassLoader.java (system):  Remove static field.\n+\t(getSystemClassLoader):  Get gnu.gcj.runtime.VMClassLoader.instance\n+\tdirectly instead of using it to set the system field.\n+\t(loadClass):  Use VMClassLoader.instance instead of system field.\n+\t(findSystemClass):   Similar.\n+\t* prims.cc (_Jv_RunMain):  Clear VMClassLoader::instance rather\n+\tthan ClassLoader::system which no longer exists.\n+\t* java/lang/natClassLoader.java (_Jv_FindClass):  Simplify.\n+\n 2001-08-31  Tom Tromey  <tromey@redhat.com>\n \n \t* java/io/BufferedReader.java, java/io/ObjectInput.java,"}, {"sha": "ce6962ee70e0e148c7bfe874935aeae4ade0347e", "filename": "libjava/java/lang/ClassLoader.java", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2Fjava%2Flang%2FClassLoader.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2Fjava%2Flang%2FClassLoader.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClassLoader.java?ref=8635bb79f219f8d11e47b8403e54c5111712176b", "patch": "@@ -34,7 +34,6 @@\n \n public abstract class ClassLoader\n {\n-  static private ClassLoader system;\n   private ClassLoader parent;\n   private HashMap definedPackages = new HashMap();\n \n@@ -46,9 +45,7 @@ public final ClassLoader getParent ()\n \n   public static ClassLoader getSystemClassLoader ()\n   {\n-    if (system == null)\n-      system = gnu.gcj.runtime.VMClassLoader.instance;\n-    return system;\n+    return gnu.gcj.runtime.VMClassLoader.instance;\n   }\n \n   /**\n@@ -120,7 +117,7 @@ protected Class loadClass(String name, boolean link)\n \t  if (parent != null)\n \t    return parent.loadClass (name, link);\n \t  else\n-\t    c = system.findClass (name);\n+\t    c = gnu.gcj.runtime.VMClassLoader.instance.findClass (name);\n \t} catch (ClassNotFoundException ex) {\n \t  /* ignore, we'll try findClass */;\n \t}\n@@ -464,7 +461,7 @@ protected Package[] getPackages()\n   protected final Class findSystemClass(String name) \n     throws java.lang.ClassNotFoundException\n   {\n-    return getSystemClassLoader ().loadClass (name);\n+    return gnu.gcj.runtime.VMClassLoader.instance.loadClass (name);\n   }\n \n   /*"}, {"sha": "f0794c74111723997e990af45698e7e845770c4c", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=8635bb79f219f8d11e47b8403e54c5111712176b", "patch": "@@ -481,12 +481,8 @@ _Jv_FindClass (_Jv_Utf8Const *name, java::lang::ClassLoader *loader)\n \t}\n       else \n \t{\n-\t  java::lang::ClassLoader *sys = java::lang::ClassLoader::system;\n-\t  if (sys == NULL)\n-\t    {\n-\t      _Jv_InitClass (&ClassLoaderClass);\n-\t      sys = java::lang::ClassLoader::getSystemClassLoader ();\n-\t    }\n+\t  java::lang::ClassLoader *sys\n+\t    = java::lang::ClassLoader::getSystemClassLoader ();\n \n \t  // Load using the bootstrap loader jvmspec 5.3.1.\n \t  klass = sys->loadClass (sname, false); "}, {"sha": "6a13ed5fe7514b94ef289b69a04fe32c86a5ee32", "filename": "libjava/prims.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2Fprims.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8635bb79f219f8d11e47b8403e54c5111712176b/libjava%2Fprims.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fprims.cc?ref=8635bb79f219f8d11e47b8403e54c5111712176b", "patch": "@@ -64,6 +64,7 @@ details.  */\n #include <java/lang/reflect/Modifier.h>\n #include <java/io/PrintStream.h>\n #include <java/lang/UnsatisfiedLinkError.h>\n+#include <gnu/gcj/runtime/VMClassLoader.h>\n \n #ifdef USE_LTDL\n #include <ltdl.h>\n@@ -921,7 +922,7 @@ _Jv_RunMain (jclass klass, const char *name, int argc, const char **argv,\n \t  // jar file only.  The easiest way to do this is to lose our\n \t  // reference to the previous classloader.\n \t  _Jv_Jar_Class_Path = strdup (name);\n-\t  java::lang::ClassLoader::system = NULL;\n+\t  gnu::gcj::runtime::VMClassLoader::instance = NULL;\n \t}\n     }\n   catch (java::lang::Throwable *t)"}]}