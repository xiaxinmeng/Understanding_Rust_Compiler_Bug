{"sha": "76028b1f3b900fc34a822d8f1e9329e659d3de4f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzYwMjhiMWYzYjkwMGZjMzRhODIyZDhmMWU5MzI5ZTY1OWQzZGU0Zg==", "commit": {"author": {"name": "Stephane Carrez", "email": "Stephane.Carrez@worldnet.fr", "date": "2001-01-11T22:13:52Z"}, "committer": {"name": "Stephane Carrez", "email": "ciceron@gcc.gnu.org", "date": "2001-01-11T22:13:52Z"}, "message": "Fix constraints in 68HC11/HC12 port\n\nFrom-SVN: r38927", "tree": {"sha": "0066800bdf500ae84f6971ab4247e70fc839f354", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0066800bdf500ae84f6971ab4247e70fc839f354"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76028b1f3b900fc34a822d8f1e9329e659d3de4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76028b1f3b900fc34a822d8f1e9329e659d3de4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76028b1f3b900fc34a822d8f1e9329e659d3de4f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76028b1f3b900fc34a822d8f1e9329e659d3de4f/comments", "author": null, "committer": null, "parents": [{"sha": "d3956766710709dcf12eb3a1a183046b99f75755", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3956766710709dcf12eb3a1a183046b99f75755", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3956766710709dcf12eb3a1a183046b99f75755"}], "stats": {"total": 170, "additions": 97, "deletions": 73}, "files": [{"sha": "d5254219a091e5f6b5dc2c3afffb8c6c0858f5e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76028b1f3b900fc34a822d8f1e9329e659d3de4f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76028b1f3b900fc34a822d8f1e9329e659d3de4f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=76028b1f3b900fc34a822d8f1e9329e659d3de4f", "patch": "@@ -1,3 +1,20 @@\n+2001-01-11  Stephane Carrez  <Stephane.Carrez@worldnet.fr>\n+\n+\t* config/m68hc11/m68hc11.md (cmphi_1): Make sure reloading\n+\tin S_REGS does not occur because not all sources are possible\n+\twhen a S_REGS is a destination (sometimes needs a clobber).\n+\t(movqi_const0, zero_extendhisi2, zero_extendqisi2): Likewise.\n+\t(zero_extendhidi2, extendqisi2, extendqihi2, extendhisi2): Likewise.\n+\t(anddi3, iordi3, xordi3, negqi2, one_cmplhi2, one_cmplqi2: Likewise.\n+\t(ashldi3_const32, ashldi3_const1, ashlsi3_const16): Likewise.\n+\t(ashlsi3_const1, ashlhi3_2, ashlqi3_const1, ashrhi3): Likewise.\n+\t(ashrqi3_const1, lshrdi3_const32, lshrdi3_const63): Likewise.\n+\t(lshrdi_const1, lshrsi3_const16): Likewise.\n+\t(*addhi3, lshrsi3_const1, lshrqi3_const1): Likewise.\n+\t(*movhi_68hc12, *movqi_68hc12): Likewise.\n+\t(movstrictqi): Make sure reloading in D_REGS as a destination \n+\tdoes not happen.\n+\n 2001-01-11  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n         * cppspec.c (DEFAULT_WORD_SWITCH_TAKES_ARG): Add -MQ. "}, {"sha": "4cd495aad37f014783d247bbb7d6725e958e3da8", "filename": "gcc/config/m68hc11/m68hc11.md", "status": "modified", "additions": 80, "deletions": 73, "changes": 153, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76028b1f3b900fc34a822d8f1e9329e659d3de4f/gcc%2Fconfig%2Fm68hc11%2Fm68hc11.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76028b1f3b900fc34a822d8f1e9329e659d3de4f/gcc%2Fconfig%2Fm68hc11%2Fm68hc11.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68hc11%2Fm68hc11.md?ref=76028b1f3b900fc34a822d8f1e9329e659d3de4f", "patch": "@@ -285,9 +285,9 @@\n (define_insn \"cmphi_1\"\n   [(set (cc0)\n \t(compare (match_operand:HI 0 \"tst_operand\" \n-\t\t\t\t\"dxy,?xy,d,dxy,dxy,dxy\")\n+\t\t\t\t\"xy,d,?xy,d,dxy,dxy,dxy\")\n \t\t (match_operand:HI 1 \"cmp_operand\"\n-\t\t\t\t\"i,m,m,?*d*A,?u,!*w\")))]\n+\t\t\t\t\"i,i,m,m,?*d*A,?u,!*w\")))]\n   \"\"\n   \"*\n {\n@@ -458,8 +458,8 @@\n   \"\")\n \n (define_insn \"movstrictqi\"\n-  [(set (strict_low_part (match_operand:QI 0 \"non_push_operand\" \"+mu,+d,+d\"))\n-\t(match_operand:QI 1 \"general_operand\" \"d,dim,u\"))]\n+  [(set (strict_low_part (match_operand:QI 0 \"non_push_operand\" \"+mu,+!d\"))\n+\t(match_operand:QI 1 \"general_operand\" \"d,imu\"))]\n   \"\"\n   \"#\")\n \n@@ -652,8 +652,8 @@\n    clr\\\\t%b0\\\\n\\\\tclr\\\\t%h0\")\n \n (define_insn \"*movhi_68hc12\"\n-  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=dAwuU,dAwu,m\")\n-\t(match_operand:HI 1 \"general_operand\" \"ruUi,m,dAwu\"))]\n+  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=U,dAw,U,U,m,!u\")\n+\t(match_operand:HI 1 \"general_operand\" \"U,rim,dAwi,!u,dAw,riU\"))]\n   \"TARGET_M6812\"\n   \"*\n {\n@@ -680,12 +680,13 @@\n ;; This should be ok since this is not the (strict_low_part) set.\n ;;\n (define_insn \"movqi_const0\"\n-  [(set (match_operand:QI 0 \"non_push_operand\" \"=d,!um,*A,!*q\")\n+  [(set (match_operand:QI 0 \"non_push_operand\" \"=d,m,!u,*A,!*q\")\n \t(const_int 0))]\n   \"\"\n   \"@\n    clrb\n    clr\\\\t%b0\n+   clr\\\\t%b0\n    ld%0\\\\t#0\n    clr%0\")\n \n@@ -769,7 +770,7 @@\n }\")\n \n (define_insn \"*movqi_68hc12\"\n-  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d*AuU*q,d*A*q,d*A*q,m,m\")\n+  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d*AuU*q,d*A*qu,d*A*q,m,m\")\n \t(match_operand:QI 1 \"general_operand\" \"rui*q,U,m,d*q,!A\"))]\n   \"TARGET_M6812\"\n   \"*\n@@ -841,7 +842,7 @@\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=m,!u,m,!u\")\n \t(zero_extend:DI \n \t   (match_operand:QI 1 \"nonimmediate_operand\" \"m,dmu,*B,*B\")))\n-   (clobber (match_scratch:HI 2 \"=&d,&dB,&dB,&dB\"))]\n+   (clobber (match_scratch:HI 2 \"=&d,&dB,&d,&dB\"))]\n   \"\"\n   \"#\")\n \n@@ -935,10 +936,10 @@\n }\")\n \n (define_insn \"zero_extendhidi2\"\n-  [(set (match_operand:DI 0 \"non_push_operand\" \"=m,m,m,!u,!u\")\n+  [(set (match_operand:DI 0 \"non_push_operand\" \"=m,m,m,m,!u,!u\")\n \t(zero_extend:DI \n-\t    (match_operand:HI 1 \"nonimmediate_operand\" \"m,dA,!u,dmA,!u\")))\n-   (clobber (match_scratch:HI 2 \"=&d,&dB,&dB,&dB,&dB\"))]\n+\t    (match_operand:HI 1 \"nonimmediate_operand\" \"m,d,A,!u,dmA,!u\")))\n+   (clobber (match_scratch:HI 2 \"=&d,&B,&d,&dB,&dB,&dB\"))]\n   \"\"\n   \"#\")\n \n@@ -1008,10 +1009,10 @@\n ;; because it's less efficient.\n ;;\n (define_insn \"zero_extendhisi2\"\n-  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,mu,m,m,!u,!u\")\n+  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,m,u,m,m,!u,!u\")\n         (zero_extend:SI \n-\t    (match_operand:HI 1 \"nonimmediate_operand\" \"dAmu,dA,m,!u,m,!u\")))\n-   (clobber (match_scratch:HI 2 \"=X,X,&d,&dB,&dB,&dB\"))]\n+\t    (match_operand:HI 1 \"nonimmediate_operand\" \"dAmu,dA,dA,m,!u,m,!u\")))\n+   (clobber (match_scratch:HI 2 \"=X,X,X,&d,&dB,&dB,&dB\"))]\n   \"\"\n   \"#\")\n \n@@ -1037,9 +1038,9 @@\n }\")\n \n (define_insn \"zero_extendqisi2\"\n-  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,mu\")\n+  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,m,u\")\n       (zero_extend:SI \n-\t  (match_operand:QI 1 \"nonimmediate_operand\" \"dxymu,dxy\")))]\n+\t  (match_operand:QI 1 \"nonimmediate_operand\" \"dxymu,dxy,dxy\")))]\n   \"\"\n   \"#\")\n \n@@ -1168,8 +1169,8 @@\n ;;--------------------------------------------------------------------\n \n (define_insn \"extendqisi2\"\n-  [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=D,mu\")\n-\t(sign_extend:SI (match_operand:QI 1 \"nonimmediate_operand\" \"dmux,d\")))]\n+  [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=D,m,u\")\n+\t(sign_extend:SI (match_operand:QI 1 \"nonimmediate_operand\" \"dmux,d,d\")))]\n   \"\"\n   \"*\n {\n@@ -1259,8 +1260,8 @@\n \n \n (define_insn \"extendqihi2\"\n-  [(set (match_operand:HI 0 \"non_push_operand\" \"=d,u*x*ym\")\n-\t(sign_extend:HI (match_operand:QI 1 \"nonimmediate_operand\" \"dum,0\")))]\n+  [(set (match_operand:HI 0 \"non_push_operand\" \"=d,*x*ym,u\")\n+\t(sign_extend:HI (match_operand:QI 1 \"nonimmediate_operand\" \"dum,0,0\")))]\n   \"\"\n   \"*\n {\n@@ -1921,7 +1922,7 @@\n   \"\")\n \n (define_insn \"*addhi3\"\n-  [(set (match_operand:HI 0 \"hard_reg_operand\" \"=dA,d,!A,d*A,!d,!w\")\n+  [(set (match_operand:HI 0 \"hard_reg_operand\" \"=A,d,!A,d*A,!d,!w\")\n \t(plus:HI (match_operand:HI 1 \"general_operand\" \"%0,0,0,0,0,0\")\n \t\t (match_operand:HI 2 \"general_operand\" \"N,i,I,umi*A*d,!*d*w,i\")))]\n   \"TARGET_M6811\"\n@@ -2555,10 +2556,10 @@\n ;;--------------------------------------------------------------------\n \n (define_insn \"anddi3\"\n-  [(set (match_operand:DI 0 \"reg_or_some_mem_operand\" \"=mu\")\n-\t(and:DI (match_operand:DI 1 \"reg_or_some_mem_operand\" \"%imu\")\n-\t\t(match_operand:DI 2 \"general_operand\" \"imu\")))\n-   (clobber (match_scratch:HI 3 \"=d\"))]\n+  [(set (match_operand:DI 0 \"reg_or_some_mem_operand\" \"=m,u\")\n+\t(and:DI (match_operand:DI 1 \"reg_or_some_mem_operand\" \"%imu,imu\")\n+\t\t(match_operand:DI 2 \"general_operand\" \"imu,imu\")))\n+   (clobber (match_scratch:HI 3 \"=d,d\"))]\n   \"\"\n   \"#\")\n \n@@ -2709,10 +2710,10 @@\n ;;--------------------------------------------------------------------\n \n (define_insn \"iordi3\"\n-  [(set (match_operand:DI 0 \"reg_or_some_mem_operand\" \"=mu\")\n-\t(ior:DI (match_operand:DI 1 \"reg_or_some_mem_operand\" \"%imu\")\n-\t\t(match_operand:DI 2 \"general_operand\" \"imu\")))\n-   (clobber (match_scratch:HI 3 \"=d\"))]\n+  [(set (match_operand:DI 0 \"reg_or_some_mem_operand\" \"=m,u\")\n+\t(ior:DI (match_operand:DI 1 \"reg_or_some_mem_operand\" \"%imu,imu\")\n+\t\t(match_operand:DI 2 \"general_operand\" \"imu,imu\")))\n+   (clobber (match_scratch:HI 3 \"=d,d\"))]\n   \"\"\n   \"#\")\n \n@@ -2803,10 +2804,10 @@\n ;;--------------------------------------------------------------------\n \n (define_insn \"xordi3\"\n-  [(set (match_operand:DI 0 \"reg_or_some_mem_operand\" \"=mu\")\n-\t(xor:DI (match_operand:DI 1 \"reg_or_some_mem_operand\" \"%imu\")\n-\t\t(match_operand:DI 2 \"general_operand\" \"imu\")))\n-   (clobber (match_scratch:HI 3 \"=d\"))]\n+  [(set (match_operand:DI 0 \"reg_or_some_mem_operand\" \"=m,u\")\n+\t(xor:DI (match_operand:DI 1 \"reg_or_some_mem_operand\" \"%imu,imu\")\n+\t\t(match_operand:DI 2 \"general_operand\" \"imu,imu\")))\n+   (clobber (match_scratch:HI 3 \"=d,d\"))]\n   \"\"\n   \"#\")\n \n@@ -3478,12 +3479,13 @@\n    xgd%0\\\\n\\\\tcoma\\\\n\\\\tcomb\\\\n\\\\txgd%0\\\\n\\\\tin%0\")\n \n (define_insn \"negqi2\"\n-  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,!um,!*A\")\n-\t(neg:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0\")))]\n+  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,m,!u,!*A\")\n+\t(neg:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0,0\")))]\n   \"\"\n   \"@\n    negb\n    neg\\\\t%b0\n+   neg\\\\t%b0\n    #\")\n \n ;;\n@@ -3504,21 +3506,23 @@\n   \"bsr\\\\t___one_cmplsi2\")\n \n (define_insn \"one_cmplhi2\"\n-  [(set (match_operand:HI 0 \"non_push_operand\" \"=d,!um,*A\")\n-\t(not:HI (match_operand:HI 1 \"general_operand\" \"0,0,0\")))]\n+  [(set (match_operand:HI 0 \"non_push_operand\" \"=d,m,!u,*A\")\n+\t(not:HI (match_operand:HI 1 \"general_operand\" \"0,0,0,0\")))]\n   \"\"\n   \"@\n    comb\\\\n\\\\tcoma\n    com\\\\t%b0\\\\n\\\\tcom\\\\t%h0\n+   com\\\\t%b0\\\\n\\\\tcom\\\\t%h0\n    #\")\n \n (define_insn \"one_cmplqi2\"\n-  [(set (match_operand:QI 0 \"non_push_operand\" \"=d,!um,!*A\")\n-\t(not:QI (match_operand:QI 1 \"general_operand\" \"0,0,0\")))]\n+  [(set (match_operand:QI 0 \"non_push_operand\" \"=d,m,!u,!*A\")\n+\t(not:QI (match_operand:QI 1 \"general_operand\" \"0,0,0,0\")))]\n   \"\"\n   \"@\n    comb\n    com\\\\t%b0\n+   com\\\\t%b0\n    #\")\n \n (define_split /* \"*one_cmplsi2\" */\n@@ -3569,10 +3573,10 @@\n }\")\n \n (define_insn \"*ashldi3_const32\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=<,um\")\n-\t(ashift:DI (match_operand:DI 1 \"general_operand\" \"umi,umi\")\n+  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=<,m,u\")\n+\t(ashift:DI (match_operand:DI 1 \"general_operand\" \"umi,umi,umi\")\n \t\t   (const_int 32)))\n-   (clobber (match_scratch:HI 2 \"=A,d\"))]\n+   (clobber (match_scratch:HI 2 \"=A,d,d\"))]\n    \"\"\n    \"#\")\n \n@@ -3601,10 +3605,10 @@\n     DONE;\")\n \n (define_insn \"*ashldi3_const1\"\n-  [(set (match_operand:DI 0 \"non_push_operand\" \"=um\")\n-\t(ashift:DI (match_operand:DI 1 \"general_operand\" \"umi\")\n+  [(set (match_operand:DI 0 \"non_push_operand\" \"=m,m,u\")\n+\t(ashift:DI (match_operand:DI 1 \"general_operand\" \"mi,u,umi\")\n \t\t   (const_int 1)))\n-   (clobber (match_scratch:HI 2 \"=d\"))]\n+   (clobber (match_scratch:HI 2 \"=d,d,d\"))]\n    \"\"\n    \"#\")\n \n@@ -3739,10 +3743,10 @@\n     operands[3] = m68hc11_gen_lowpart (HImode, operands[1]);\")\n \n (define_insn \"*ashlsi3_const16\"\n-  [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=D,*um\")\n-\t(ashift:SI (match_operand:SI 1 \"general_operand\" \"Duim,D\")\n+  [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=D,m,*u\")\n+\t(ashift:SI (match_operand:SI 1 \"general_operand\" \"Duim,D,D\")\n \t           (const_int 16)))\n-   (clobber (match_scratch:HI 2 \"=X,X\"))]\n+   (clobber (match_scratch:HI 2 \"=X,X,X\"))]\n    \"\"\n    \"#\")\n \n@@ -3767,10 +3771,10 @@\n    \"\")\n \n (define_insn \"*ashlsi3_const1\"\n-  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,D,*um,?*um\")\n-\t(ashift:SI (match_operand:SI 1 \"nonimmediate_operand\" \"0,*um,0,*um\")\n+  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,D,m,!*u,?*um\")\n+\t(ashift:SI (match_operand:SI 1 \"nonimmediate_operand\" \"0,*um,0,0,*um\")\n \t           (const_int 1)))\n-   (clobber (match_scratch:HI 2 \"=X,X,&d,&d\"))]\n+   (clobber (match_scratch:HI 2 \"=X,X,&d,&d,&d\"))]\n    \"\"\n    \"*\n {\n@@ -3973,13 +3977,14 @@\n    \"\")\n \n (define_insn \"*ashlqi3_const1\"\n-  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,!um,!*q,!*A\")\n-\t(ashift:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0,0\")\n+  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,m,!u,!*q,!*A\")\n+\t(ashift:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0,0,0\")\n \t           (const_int 1)))]\n   \"\"\n   \"@\n    aslb\n    asl\\\\t%b0\n+   asl\\\\t%b0\n    asl%0\n    #\")\n \n@@ -4268,13 +4273,14 @@\n    \"\")\n \n (define_insn \"*ashrqi3_const1\"\n-  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,!um,!*q,!*A\")\n-\t(ashiftrt:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0,0\")\n+  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,m,!u,!*q,!*A\")\n+\t(ashiftrt:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0,0,0\")\n \t\t     (const_int 1)))]\n   \"\"\n   \"@\n    asrb\n    asr\\\\t%b0\n+   asr\\\\t%b0\n    asr%0\n    #\")\n \n@@ -4346,10 +4352,10 @@\n }\")\n \n (define_insn \"*lshrdi3_const32\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=<,um\")\n-\t(lshiftrt:DI (match_operand:DI 1 \"general_operand\" \"umi,umi\")\n+  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=<,m,u\")\n+\t(lshiftrt:DI (match_operand:DI 1 \"general_operand\" \"umi,umi,umi\")\n \t\t     (const_int 32)))\n-   (clobber (match_scratch:HI 2 \"=A,d\"))]\n+   (clobber (match_scratch:HI 2 \"=A,d,d\"))]\n    \"\"\n    \"#\")\n \n@@ -4368,10 +4374,10 @@\n     DONE;\")\n \n (define_insn \"*lshrdi3_const63\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=um\")\n-\t(lshiftrt:DI (match_operand:DI 1 \"general_operand\" \"umi\")\n+  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=m,u\")\n+\t(lshiftrt:DI (match_operand:DI 1 \"general_operand\" \"umi,umi\")\n \t\t     (match_operand:DI 2 \"const_int_operand\" \"\")))\n-   (clobber (match_scratch:HI 3 \"=d\"))]\n+   (clobber (match_scratch:HI 3 \"=d,d\"))]\n    \"INTVAL (operands[2]) >= 48\"\n    \"#\")\n \n@@ -4428,10 +4434,10 @@\n     operands[6] = m68hc11_gen_lowpart (HImode, operands[6]);\")\n \n (define_insn \"*lshrdi_const1\"\n-  [(set (match_operand:DI 0 \"non_push_operand\" \"=um\")\n-\t(lshiftrt:DI (match_operand:DI 1 \"general_operand\" \"umi\")\n+  [(set (match_operand:DI 0 \"non_push_operand\" \"=m,u\")\n+\t(lshiftrt:DI (match_operand:DI 1 \"general_operand\" \"umi,umi\")\n \t\t     (const_int 1)))\n-   (clobber (match_scratch:HI 2 \"=d\"))]\n+   (clobber (match_scratch:HI 2 \"=d,d\"))]\n    \"\"\n    \"#\")\n \n@@ -4497,20 +4503,20 @@\n     operands[3] = m68hc11_gen_highpart (HImode, operands[1]);\")\n \n (define_insn \"*lshrsi3_const16\"\n-  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,D,um\")\n-\t(lshiftrt:SI (match_operand:SI 1 \"general_operand\" \"uim,0,D\")\n+  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,D,m,u\")\n+\t(lshiftrt:SI (match_operand:SI 1 \"general_operand\" \"uim,0,D,D\")\n \t             (const_int 16)))\n-   (clobber (match_scratch:HI 2 \"=X,X,X\"))]\n+   (clobber (match_scratch:HI 2 \"=X,X,X,X\"))]\n    \"\"\n    \"#\n     xgdx\\\\n\\\\tldx\\\\t#0\n     #\")\n \n (define_insn \"*lshrsi3_const1\"\n-  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,*um\")\n-\t(lshiftrt:SI (match_operand:SI 1 \"nonimmediate_operand\" \"D*um,*um\")\n+  [(set (match_operand:SI 0 \"non_push_operand\" \"=D,m,*u\")\n+\t(lshiftrt:SI (match_operand:SI 1 \"nonimmediate_operand\" \"D*um,*um,*um\")\n \t             (const_int 1)))\n-   (clobber (match_scratch:HI 2 \"=X,&d\"))]\n+   (clobber (match_scratch:HI 2 \"=X,&d,&d\"))]\n    \"\"\n    \"*\n {\n@@ -4745,13 +4751,14 @@\n    \"\")\n \n (define_insn \"*lshrqi3_const1\"\n-  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,!um,!*q,!*A\")\n-\t(lshiftrt:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0,0\")\n+  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,m,!u,!*q,!*A\")\n+\t(lshiftrt:QI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0,0,0,0\")\n \t\t     (const_int 1)))]\n   \"\"\n   \"@\n    lsrb\n    lsr\\\\t%b0\n+   lsr\\\\t%b0\n    lsr%0\n    #\")\n "}]}