{"sha": "fa066a2379bafed5897d478c2dae6d953a7e4799", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmEwNjZhMjM3OWJhZmVkNTg5N2Q0NzhjMmRhZTZkOTUzYTdlNDc5OQ==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2002-01-08T04:50:33Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2002-01-08T04:50:33Z"}, "message": "002-01-07  Aldy Hernandez  <aldyh@redhat.com>\n\n        * config/rs6000/rs6000.c (bdesc_2arg): Add altivec predicates.\n        (altivec_init_builtins): New node v4si_ftype_v16qi_v16qi.\n\n        * config/rs6000/rs6000.h (rs6000_builtins): Add enums for altivec\n        predicates.\n\n        * config/rs6000/rs6000.md: Add altivec predicate patterns.\n\nFrom-SVN: r48622", "tree": {"sha": "50ce9e157f4e13b59189089aebaaf390335132ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50ce9e157f4e13b59189089aebaaf390335132ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa066a2379bafed5897d478c2dae6d953a7e4799", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa066a2379bafed5897d478c2dae6d953a7e4799", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa066a2379bafed5897d478c2dae6d953a7e4799", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa066a2379bafed5897d478c2dae6d953a7e4799/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8f949e7e12cfba60a959cf6ddc2453186b9ffb8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f949e7e12cfba60a959cf6ddc2453186b9ffb8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f949e7e12cfba60a959cf6ddc2453186b9ffb8c"}], "stats": {"total": 154, "additions": 153, "deletions": 1}, "files": [{"sha": "44113da7e9c48b94b9fe52487539bbbaf043d770", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa066a2379bafed5897d478c2dae6d953a7e4799", "patch": "@@ -1,3 +1,13 @@\n+002-01-07  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * config/rs6000/rs6000.c (bdesc_2arg): Add altivec predicates.\n+        (altivec_init_builtins): New node v4si_ftype_v16qi_v16qi.\n+\n+        * config/rs6000/rs6000.h (rs6000_builtins): Add enums for altivec\n+        predicates.\n+\n+        * config/rs6000/rs6000.md: Add altivec predicate patterns.\n+\n 2002-01-07  John David Anglin  <dave@hiauly1.hia.nrc.ca>\n \n \t* pa.c (FUNC_BEGIN_PROLOG_LABEL, current_function_number): Define."}, {"sha": "6466bb2c4f1392d1439fe43f172d4f459510e70f", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=fa066a2379bafed5897d478c2dae6d953a7e4799", "patch": "@@ -3357,6 +3357,19 @@ static const struct builtin_description bdesc_2arg[] =\n   { MASK_ALTIVEC, CODE_FOR_altivec_vsum2sws, \"__builtin_altivec_vsum2sws\", ALTIVEC_BUILTIN_VSUM2SWS },\n   { MASK_ALTIVEC, CODE_FOR_altivec_vsumsws, \"__builtin_altivec_vsumsws\", ALTIVEC_BUILTIN_VSUMSWS },\n   { MASK_ALTIVEC, CODE_FOR_xorv4si3, \"__builtin_altivec_vxor\", ALTIVEC_BUILTIN_VXOR },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpbfp_p, \"__builtin_altivec_vcmpbfp_p\", ALTIVEC_BUILTIN_VCMPBFP_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpeqfp_p, \"__builtin_altivec_vcmpeqfp_p\", ALTIVEC_BUILTIN_VCMPEQFP_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpequb_p, \"__builtin_altivec_vcmpequb_p\", ALTIVEC_BUILTIN_VCMPEQUB_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpequh_p, \"__builtin_altivec_vcmpequh_p\", ALTIVEC_BUILTIN_VCMPEQUH_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpequw_p, \"__builtin_altivec_vcmpequw_p\", ALTIVEC_BUILTIN_VCMPEQUW_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgefp_p, \"__builtin_altivec_vcmpgefp_p\", ALTIVEC_BUILTIN_VCMPGEFP_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgtfp_p, \"__builtin_altivec_vcmpgtfp_p\", ALTIVEC_BUILTIN_VCMPGTFP_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgtsb_p, \"__builtin_altivec_vcmpgtsb_p\", ALTIVEC_BUILTIN_VCMPGTSB_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgtsh_p, \"__builtin_altivec_vcmpgtsh_p\", ALTIVEC_BUILTIN_VCMPGTSH_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgtsw_p, \"__builtin_altivec_vcmpgtsw_p\", ALTIVEC_BUILTIN_VCMPGTSW_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgtub_p, \"__builtin_altivec_vcmpgtub_p\", ALTIVEC_BUILTIN_VCMPGTUB_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgtuh_p, \"__builtin_altivec_vcmpgtuh_p\", ALTIVEC_BUILTIN_VCMPGTUH_P },\n+  { MASK_ALTIVEC, CODE_FOR_altivec_vcmpgtuw_p, \"__builtin_altivec_vcmpgtuw_p\", ALTIVEC_BUILTIN_VCMPGTUW_P },\n };\n \n /* Simple unary operations: VECb = foo (unsigned literal) or VECb =\n@@ -3998,6 +4011,12 @@ altivec_init_builtins (void)\n \t\t\t\t      tree_cons (NULL_TREE, V4SI_type_node,\n \t\t\t\t\t\t endlink)));\n \n+  tree v4si_ftype_v16qi_v16qi\n+    = build_function_type (V4SI_type_node,\n+\t\t\t   tree_cons (NULL_TREE, V16QI_type_node,\n+\t\t\t\t      tree_cons (NULL_TREE, V16QI_type_node,\n+\t\t\t\t\t\t endlink)));\n+\n   tree v4si_ftype_v8hi_v4si\n     = build_function_type (V4SI_type_node,\n \t\t\t   tree_cons (NULL_TREE, V8HI_type_node,\n@@ -4196,6 +4215,10 @@ altivec_init_builtins (void)\n       else if (mode0 == V4SImode && mode1 == V16QImode && mode2 == V4SImode)\n \ttype = v4si_ftype_v16qi_v4si;\n \n+      /* vint, vchar, vchar.  */\n+      else if (mode0 == V4SImode && mode1 == V16QImode && mode2 == V16QImode)\n+\ttype = v4si_ftype_v16qi_v16qi;\n+\n       /* vint, vshort, vint.  */\n       else if (mode0 == V4SImode && mode1 == V8HImode && mode2 == V4SImode)\n \ttype = v4si_ftype_v8hi_v4si;"}, {"sha": "2fa90b4261ce6f4393c2fb2477421e482e98a3e5", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=fa066a2379bafed5897d478c2dae6d953a7e4799", "patch": "@@ -2960,5 +2960,18 @@ enum rs6000_builtins\n   ALTIVEC_BUILTIN_VUPKHSH,\n   ALTIVEC_BUILTIN_VUPKLSB,\n   ALTIVEC_BUILTIN_VUPKLPX,\n-  ALTIVEC_BUILTIN_VUPKLSH\n+  ALTIVEC_BUILTIN_VUPKLSH,\n+  ALTIVEC_BUILTIN_VCMPBFP_P,\n+  ALTIVEC_BUILTIN_VCMPEQFP_P,\n+  ALTIVEC_BUILTIN_VCMPEQUB_P,\n+  ALTIVEC_BUILTIN_VCMPEQUH_P,\n+  ALTIVEC_BUILTIN_VCMPEQUW_P,\n+  ALTIVEC_BUILTIN_VCMPGEFP_P,\n+  ALTIVEC_BUILTIN_VCMPGTFP_P,\n+  ALTIVEC_BUILTIN_VCMPGTSB_P,\n+  ALTIVEC_BUILTIN_VCMPGTSH_P,\n+  ALTIVEC_BUILTIN_VCMPGTSW_P,\n+  ALTIVEC_BUILTIN_VCMPGTUB_P,\n+  ALTIVEC_BUILTIN_VCMPGTUH_P,\n+  ALTIVEC_BUILTIN_VCMPGTUW_P\n };"}, {"sha": "131b767717db296ccbf8a2b81251e2e7848943d6", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 106, "deletions": 0, "changes": 106, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa066a2379bafed5897d478c2dae6d953a7e4799/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=fa066a2379bafed5897d478c2dae6d953a7e4799", "patch": "@@ -15272,3 +15272,109 @@\n   \"TARGET_ALTIVEC\"\n   \"vupklsh %0, %1\"\n   [(set_attr \"type\" \"vecperm\")])\n+\n+;; AltiVec predicates.\n+\n+(define_insn \"altivec_vcmpequb_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V16QI 1 \"register_operand\" \"v\")\n+                      (match_operand:V16QI 2 \"register_operand\" \"v\")] 173))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpequb. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpequh_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V8HI 1 \"register_operand\" \"v\")\n+                      (match_operand:V8HI 2 \"register_operand\" \"v\")] 174))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpequh. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpequw_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V4SI 1 \"register_operand\" \"v\")\n+                      (match_operand:V4SI 2 \"register_operand\" \"v\")] 175))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpequw. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpeqfp_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V4SF 1 \"register_operand\" \"v\")\n+                      (match_operand:V4SF 2 \"register_operand\" \"v\")] 176))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpeqfp. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgtub_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V16QI 1 \"register_operand\" \"v\")\n+                      (match_operand:V16QI 2 \"register_operand\" \"v\")] 177))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgtub. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgtsb_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V16QI 1 \"register_operand\" \"v\")\n+                      (match_operand:V16QI 2 \"register_operand\" \"v\")] 178))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgtsb. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgtuw_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V4SI 1 \"register_operand\" \"v\")\n+                      (match_operand:V4SI 2 \"register_operand\" \"v\")] 179))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgtuw. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgtsw_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V4SI 1 \"register_operand\" \"v\")\n+                      (match_operand:V4SI 2 \"register_operand\" \"v\")] 180))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgtsw. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgefp_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V4SF 1 \"register_operand\" \"v\")\n+                      (match_operand:V4SF 2 \"register_operand\" \"v\")] 181))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgefp. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgtfp_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V4SF 1 \"register_operand\" \"v\")\n+                      (match_operand:V4SF 2 \"register_operand\" \"v\")] 182))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgtfp. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpbfp_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V4SF 1 \"register_operand\" \"v\")\n+                      (match_operand:V4SF 2 \"register_operand\" \"v\")] 183))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpbfp. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgtuh_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V8HI 1 \"register_operand\" \"v\")\n+                      (match_operand:V8HI 2 \"register_operand\" \"v\")] 184))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgtuh. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])\n+\n+(define_insn \"altivec_vcmpgtsh_p\"\n+  [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n+        (unspec:V4SI [(match_operand:V8HI 1 \"register_operand\" \"v\")\n+                      (match_operand:V8HI 2 \"register_operand\" \"v\")] 185))]\n+  \"TARGET_ALTIVEC\"\n+  \"vcmpgtsh. %0,%1,%2\"\n+[(set_attr \"type\" \"veccmp\")])"}]}