{"sha": "94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTRiYzZjMWU3N2RjYjEyYjZiMTQwYTBhNjQzMWNkN2M0ZTA1M2EzZg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-11-15T19:25:35Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-11-15T19:25:35Z"}, "message": "re PR libfortran/37294 (Namelist I/O to array character internal units)\n\n2008-11-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libfortran/37294\n\t* io/write.c (namelist_write_newline): Use array loop specification to\n\tadvance to next internal array unit record. (namelist_write): Adjust to\n\taccomodate the internal array unit behavior.\n\nFrom-SVN: r141892", "tree": {"sha": "d03fb11bf56dd56527d1a585fd6d12ef77833bc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d03fb11bf56dd56527d1a585fd6d12ef77833bc8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f/comments", "author": null, "committer": null, "parents": [{"sha": "4d45d495663618e45f0a0baa481b74ee7a87a597", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d45d495663618e45f0a0baa481b74ee7a87a597", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d45d495663618e45f0a0baa481b74ee7a87a597"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "42aca0ce1e3476f3a6905147493212c00e5cf50a", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f", "patch": "@@ -1,3 +1,10 @@\n+2008-11-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libfortran/37294\n+\t* io/write.c (namelist_write_newline): Use array loop specification to\n+\tadvance to next internal array unit record. (namelist_write): Adjust to\n+\taccomodate the internal array unit behavior.\n+\n 2008-11-01  Dennis Wassel  <dennis.wassel@gmail.com>\n \n \tPR fortran/37159"}, {"sha": "32c58471bb8c1b92ca8d4b38a739d3c9a7f30420", "filename": "libgfortran/io/write.c", "status": "modified", "additions": 30, "deletions": 1, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f/libgfortran%2Fio%2Fwrite.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f/libgfortran%2Fio%2Fwrite.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fwrite.c?ref=94bc6c1e77dcb12b6b140a0a6431cd7c4e053a3f", "patch": "@@ -1146,6 +1146,35 @@ namelist_write_newline (st_parameter_dt *dtp)\n #else\n       write_character (dtp, \"\\n\", 1, 1);\n #endif\n+      return;\n+    }\n+\n+  if (is_array_io (dtp))\n+    {\n+      gfc_offset record;\n+      int finished, length;\n+\n+      length = (int) dtp->u.p.current_unit->bytes_left;\n+\t      \n+      /* Now that the current record has been padded out,\n+\t determine where the next record in the array is. */\n+      record = next_array_record (dtp, dtp->u.p.current_unit->ls,\n+\t\t\t\t  &finished);\n+      if (finished)\n+\tdtp->u.p.current_unit->endfile = AT_ENDFILE;\n+      else\n+\t{\n+\t  /* Now seek to this record */\n+\t  record = record * dtp->u.p.current_unit->recl;\n+\n+\t  if (sseek (dtp->u.p.current_unit->s, record) == FAILURE)\n+\t    {\n+\t      generate_error (&dtp->common, LIBERROR_INTERNAL_UNIT, NULL);\n+\t      return;\n+\t    }\n+\n+\t  dtp->u.p.current_unit->bytes_left = dtp->u.p.current_unit->recl;\n+\t}\n     }\n   else\n     write_character (dtp, \" \", 1, 1);\n@@ -1467,8 +1496,8 @@ namelist_write (st_parameter_dt *dtp)\n \t}\n     }\n \n-  write_character (dtp, \"  /\", 1, 3);\n   namelist_write_newline (dtp);\n+  write_character (dtp, \" /\", 1, 2);\n   /* Restore the original delimiter.  */\n   dtp->u.p.current_unit->delim_status = tmp_delim;\n }"}]}