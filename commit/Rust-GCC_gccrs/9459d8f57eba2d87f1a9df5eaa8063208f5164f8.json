{"sha": "9459d8f57eba2d87f1a9df5eaa8063208f5164f8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTQ1OWQ4ZjU3ZWJhMmQ4N2YxYTlkZjVlYWE4MDYzMjA4ZjUxNjRmOA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-06-01T00:21:39Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-06-01T00:21:39Z"}, "message": "(xcoff_lastfile): Declare.\n\n(DBX_OUTPUT_MAIN_SOURCE_FILENAME): Clean up.  Set xcoff_lastfile.\n(ABS_OR_RELATIVE_LINENO, ASM_OUTPUT_SOURCE_LINE): Delete here.\n(DBX_OUTPUT_SOURCE_FILENAME): Delete.\n\nFrom-SVN: r7407", "tree": {"sha": "c66cc6e85d0b070d37dbd71444e7f0266ad5c060", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c66cc6e85d0b070d37dbd71444e7f0266ad5c060"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9459d8f57eba2d87f1a9df5eaa8063208f5164f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9459d8f57eba2d87f1a9df5eaa8063208f5164f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9459d8f57eba2d87f1a9df5eaa8063208f5164f8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9459d8f57eba2d87f1a9df5eaa8063208f5164f8/comments", "author": null, "committer": null, "parents": [{"sha": "2d98fe23f49f43dae201f5e8a4fe93f0c1896449", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d98fe23f49f43dae201f5e8a4fe93f0c1896449", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d98fe23f49f43dae201f5e8a4fe93f0c1896449"}], "stats": {"total": 53, "additions": 9, "deletions": 44}, "files": [{"sha": "10dc6dc1c8126fdebc802bcaf21b1301112e909e", "filename": "gcc/xcoffout.h", "status": "modified", "additions": 9, "deletions": 44, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9459d8f57eba2d87f1a9df5eaa8063208f5164f8/gcc%2Fxcoffout.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9459d8f57eba2d87f1a9df5eaa8063208f5164f8/gcc%2Fxcoffout.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fxcoffout.h?ref=9459d8f57eba2d87f1a9df5eaa8063208f5164f8", "patch": "@@ -135,55 +135,20 @@ extern char *xcoff_bss_section_name;\n extern char *xcoff_private_data_section_name;\n extern char *xcoff_read_only_section_name;\n \n+/* Last source file name mentioned in a NOTE insn.  */\n+\n+extern char *xcoff_lastfile;\n+\n /* Don't write out path name for main source file.  */\n #define DBX_OUTPUT_MAIN_SOURCE_DIRECTORY(FILE,FILENAME)\n \n-/* Write out main source file name using \".file\" rather than \".stabs\".  */\n-/* This is defined as empty, because the assembler gets confused if there\n+/* Write out main source file name using \".file\" rather than \".stabs\".\n+   We don't actually do this here, because the assembler gets confused if there\n    is more than one .file directive.  ASM_FILE_START in config/rs6000/rs6000.h\n-   is already emitting a .file direcgtory, so don't output one here also.  */\n-#if 1\n-#define DBX_OUTPUT_MAIN_SOURCE_FILENAME(FILE,FILENAME)\n-#else\n+   is already emitting a .file direcgtory, so we don't output one here also.\n+   Initialize xcoff_lastfile.  */\n #define DBX_OUTPUT_MAIN_SOURCE_FILENAME(FILE,FILENAME) \\\n-  do {\t\t\t\t\t\t\\\n-    fprintf (FILE, \"\\t.file\\t\", FILENAME);\t\\\n-    output_quoted_string (FILE, FILENAME);\t\\\n-    fprintf (FILE, \"\\n\");\t\t\t\\\n-  } while (0)\n-#endif\n-\n-#define ABS_OR_RELATIVE_LINENO(LINENO)\t\t\\\n-((xcoff_current_include_file\t\t\t\\\n-  && xcoff_current_include_file != xcoff_current_function_file)\t\\\n- ? (LINENO) : (LINENO) - xcoff_begin_function_line)\n-\n-/* Output source line numbers via \".line\" rather than \".stabd\".  */\n-#define ASM_OUTPUT_SOURCE_LINE(FILE,LINENUM) \\\n-  do {\t\t\t\t\t\t\\\n-    if (xcoff_begin_function_line >= 0)\t\t\\\n-      fprintf (FILE, \"\\t.line\\t%d\\n\", ABS_OR_RELATIVE_LINENO (LINENUM)); \\\n-  } while (0)\n-\n-/* We don't want to emit source file names in dbx style. */\n-#define DBX_OUTPUT_SOURCE_FILENAME(FILE, FILENAME)\t\\\n-{\t\t\t\t\t\t\t\\\n-  if (xcoff_current_include_file)\t\t\t\\\n-    {\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\t.ei\\t\");\t\t\t\\\n-      output_quoted_string (FILE, xcoff_current_include_file);\t\\\n-      fprintf (FILE, \"\\n\");\t\t\t\t\\\n-    }\t\t\t\t\t\t\t\\\n-  if (strcmp (main_input_filename, FILENAME))\t\t\\\n-    {\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\t.bi\\t\");\t\t\t\\\n-      output_quoted_string (FILE, FILENAME);\t\t\\\n-      fprintf (FILE, \"\\n\");\t\t\t\t\\\n-      xcoff_current_include_file = FILENAME;\t\t\\\n-    }\t\t\t\t\t\t\t\\\n-  else\t\t\t\t\t\t\t\\\n-    xcoff_current_include_file = NULL;\t\t\t\\\n-}\n+  xcoff_lastfile = input_file_name\n \n /* If we are still in an include file, its end must be marked.  */\n #define DBX_OUTPUT_MAIN_SOURCE_FILE_END(FILE, FILENAME)\t\\"}]}