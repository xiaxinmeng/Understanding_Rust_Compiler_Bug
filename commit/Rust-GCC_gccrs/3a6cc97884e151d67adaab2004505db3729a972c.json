{"sha": "3a6cc97884e151d67adaab2004505db3729a972c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2E2Y2M5Nzg4NGUxNTFkNjdhZGFhYjIwMDQ1MDVkYjM3MjlhOTcyYw==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-02-17T04:34:02Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-02-17T04:34:02Z"}, "message": "reg-stack.c (emit_swap_insn): Do not put a new insn before a NOTE_BASIC_BLOCK.\n\n\t* reg-stack.c (emit_swap_insn): Do not put a new insn before a\n\tNOTE_BASIC_BLOCK.\n\nFrom-SVN: r32027", "tree": {"sha": "b9aab2df3b78ff4b25fdc2273c7514b103a8760a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9aab2df3b78ff4b25fdc2273c7514b103a8760a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a6cc97884e151d67adaab2004505db3729a972c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a6cc97884e151d67adaab2004505db3729a972c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a6cc97884e151d67adaab2004505db3729a972c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a6cc97884e151d67adaab2004505db3729a972c/comments", "author": null, "committer": null, "parents": [{"sha": "d48120fec740d16474dbe67a176fbe4a34ba3cd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d48120fec740d16474dbe67a176fbe4a34ba3cd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d48120fec740d16474dbe67a176fbe4a34ba3cd6"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "3c559e1d84325eb06b165b266ed19a1bdd7e46d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a6cc97884e151d67adaab2004505db3729a972c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a6cc97884e151d67adaab2004505db3729a972c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3a6cc97884e151d67adaab2004505db3729a972c", "patch": "@@ -1,5 +1,8 @@\n 2000-02-16  Zack Weinberg  <zack@wolery.cumb.org>\n \n+\t* reg-stack.c (emit_swap_insn): Do not put a new insn before a\n+\tNOTE_BASIC_BLOCK.\n+\n \t* flow.c (dump_regset, debug_regset, dump_bb, debug_bb,\n \tdebug_bb_n): New functions.\n \t(dump_flow_info, print_rtl_with_bb): Use dump_regset."}, {"sha": "77d52ea4407596356a32d835e79bce76edaee79f", "filename": "gcc/reg-stack.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a6cc97884e151d67adaab2004505db3729a972c/gcc%2Freg-stack.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a6cc97884e151d67adaab2004505db3729a972c/gcc%2Freg-stack.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freg-stack.c?ref=3a6cc97884e151d67adaab2004505db3729a972c", "patch": "@@ -973,7 +973,8 @@ emit_swap_insn (insn, regstack, reg)\n   if (current_block && insn != current_block->head)\n     {\n       rtx tmp = PREV_INSN (insn);\n-      while (tmp != current_block->head)\n+      rtx limit = PREV_INSN (current_block->head);\n+      while (tmp != limit)\n \t{\n \t  if (GET_CODE (tmp) == CODE_LABEL\n \t      || (GET_CODE (tmp) == NOTE\n@@ -1017,10 +1018,7 @@ emit_swap_insn (insn, regstack, reg)\n   if (i1)\n     emit_block_insn_after (swap_rtx, i1, current_block);\n   else if (current_block)\n-    {\n-      i1 = emit_insn_before (swap_rtx, current_block->head);\n-      current_block->head = i1;\n-    }\n+    emit_block_insn_before (swap_rtx, current_block->head, current_block);\n   else\n     emit_insn_before (swap_rtx, insn);\n }"}]}