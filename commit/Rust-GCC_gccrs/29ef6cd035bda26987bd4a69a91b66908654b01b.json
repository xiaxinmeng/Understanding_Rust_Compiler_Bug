{"sha": "29ef6cd035bda26987bd4a69a91b66908654b01b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjllZjZjZDAzNWJkYTI2OTg3YmQ0YTY5YTkxYjY2OTA4NjU0YjAxYg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2013-02-06T03:33:45Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2013-02-06T03:33:45Z"}, "message": "re PR c++/56208 (Some classic sfinae cases fail to work due to access problems)\n\n\tPR c++/56208\n\t* pt.c (fn_type_unification): Discard any access checks from\n\tsubstituting explicit args.\n\nFrom-SVN: r195779", "tree": {"sha": "42f7927c901ee01127e95a2d482eeea50768f387", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/42f7927c901ee01127e95a2d482eeea50768f387"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/29ef6cd035bda26987bd4a69a91b66908654b01b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29ef6cd035bda26987bd4a69a91b66908654b01b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29ef6cd035bda26987bd4a69a91b66908654b01b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29ef6cd035bda26987bd4a69a91b66908654b01b/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bda9912058a37c428d7fabe624798b241f8ba728", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bda9912058a37c428d7fabe624798b241f8ba728", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bda9912058a37c428d7fabe624798b241f8ba728"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "ce0bfad64f7b069b7bf7e3f8a8cd12d01ac5833e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29ef6cd035bda26987bd4a69a91b66908654b01b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29ef6cd035bda26987bd4a69a91b66908654b01b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=29ef6cd035bda26987bd4a69a91b66908654b01b", "patch": "@@ -1,3 +1,9 @@\n+2013-02-05  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/56208\n+\t* pt.c (fn_type_unification): Discard any access checks from\n+\tsubstituting explicit args.\n+\n 2013-01-31  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/56162"}, {"sha": "aa127ed70992d6d9cc7c778ddbf4b492ad1e0c44", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29ef6cd035bda26987bd4a69a91b66908654b01b/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29ef6cd035bda26987bd4a69a91b66908654b01b/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=29ef6cd035bda26987bd4a69a91b66908654b01b", "patch": "@@ -14989,6 +14989,12 @@ fn_type_unification (tree fn,\n       if (fntype == error_mark_node)\n \tgoto fail;\n \n+      /* Throw away these access checks; we'll see them again in\n+\t instantiate_template and they might have the wrong\n+\t access path at this point.  */\n+      pop_deferring_access_checks ();\n+      push_deferring_access_checks (dk_deferred);\n+\n       /* Place the explicitly specified arguments in TARGS.  */\n       for (i = NUM_TMPL_ARGS (explicit_targs); i--;)\n \tTREE_VEC_ELT (targs, i) = TREE_VEC_ELT (explicit_targs, i);"}, {"sha": "22efe657fa705282421c635e6f4edf98d155fc3f", "filename": "gcc/testsuite/g++.dg/cpp0x/sfinae43.C", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29ef6cd035bda26987bd4a69a91b66908654b01b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae43.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29ef6cd035bda26987bd4a69a91b66908654b01b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae43.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae43.C?ref=29ef6cd035bda26987bd4a69a91b66908654b01b", "patch": "@@ -0,0 +1,31 @@\n+// PR c++/56208\n+// { dg-options -std=c++11 }\n+\n+struct ostream {\n+  ostream& operator<<(int);\n+};\n+\n+struct sfinae_base {\n+\n+  typedef char one;\n+  typedef char (&two)[2];\n+\n+  template<class T>\n+  static T make();\n+\n+  template<unsigned> struct ok { typedef int type; };\n+\n+  template<class U, class T>\n+  static one test(decltype((make<U>() << make<T>()), 0));\n+\n+  template<class, class>\n+  static two test(...);\n+};\n+\n+template<class T>\n+struct is_printable : private sfinae_base\n+{\n+  enum { value = sizeof(test<ostream&, T>(0)) == sizeof(one) };\n+};\n+\n+typedef int ok[is_printable<int>::value ? 1 : -1];"}]}