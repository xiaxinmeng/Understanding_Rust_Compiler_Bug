{"sha": "0fdc3afe3f7e6168bc32f5a5a1626d7901865d25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGZkYzNhZmUzZjdlNjE2OGJjMzJmNWE1YTE2MjZkNzkwMTg2NWQyNQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-04-06T09:22:19Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-04-06T09:22:19Z"}, "message": "g-expect.adb (Get_Command_Output): When expanding the output buffer we must ensure that there is enough place for...\n\n\t* g-expect.adb (Get_Command_Output): When expanding the output buffer\n\twe must ensure that there is enough place for the new data we are going\n\tto copy in.\n\nFrom-SVN: r123573", "tree": {"sha": "e9e82f5e29e3ab545f39b1c4bc295902c8081f5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9e82f5e29e3ab545f39b1c4bc295902c8081f5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0fdc3afe3f7e6168bc32f5a5a1626d7901865d25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fdc3afe3f7e6168bc32f5a5a1626d7901865d25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fdc3afe3f7e6168bc32f5a5a1626d7901865d25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fdc3afe3f7e6168bc32f5a5a1626d7901865d25/comments", "author": null, "committer": null, "parents": [{"sha": "11f03980d014613ae18b77a98bc6e4e181887e87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11f03980d014613ae18b77a98bc6e4e181887e87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11f03980d014613ae18b77a98bc6e4e181887e87"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "ffbcfc3d86f5ec9ab834c57ad38a8dd8638a88cc", "filename": "gcc/ada/g-expect.adb", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fdc3afe3f7e6168bc32f5a5a1626d7901865d25/gcc%2Fada%2Fg-expect.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fdc3afe3f7e6168bc32f5a5a1626d7901865d25/gcc%2Fada%2Fg-expect.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-expect.adb?ref=0fdc3afe3f7e6168bc32f5a5a1626d7901865d25", "patch": "@@ -93,7 +93,7 @@ package body GNAT.Expect is\n    pragma Import (C, Kill, \"__gnat_kill\");\n    --  if Close is set to 1 all OS resources used by the Pid must be freed\n \n-   function Create_Pipe (Pipe : access Pipe_Type) return Integer;\n+   function Create_Pipe (Pipe : not null access Pipe_Type) return Integer;\n    pragma Import (C, Create_Pipe, \"__gnat_pipe\");\n \n    function Poll\n@@ -782,7 +782,7 @@ package body GNAT.Expect is\n      (Command    : String;\n       Arguments  : GNAT.OS_Lib.Argument_List;\n       Input      : String;\n-      Status     : access Integer;\n+      Status     : not null access Integer;\n       Err_To_Out : Boolean := False) return String\n    is\n       use GNAT.Expect;\n@@ -821,10 +821,11 @@ package body GNAT.Expect is\n                pragma Assert (S'Length > 0);\n \n             begin\n-               --  Expand buffer if we need more space\n+               --  Expand buffer if we need more space. Note here that we add\n+               --  S'Length to ensure that S will fit in the new buffer size.\n \n                if Last + S'Length > Output'Last then\n-                  NOutput := new String (1 .. 2 * Output'Last);\n+                  NOutput := new String (1 .. 2 * Output'Last + S'Length);\n                   NOutput (Output'Range) := Output.all;\n                   Free (Output);\n \n@@ -1215,9 +1216,9 @@ package body GNAT.Expect is\n    procedure Set_Up_Communications\n      (Pid        : in out Process_Descriptor;\n       Err_To_Out : Boolean;\n-      Pipe1      : access Pipe_Type;\n-      Pipe2      : access Pipe_Type;\n-      Pipe3      : access Pipe_Type)\n+      Pipe1      : not null access Pipe_Type;\n+      Pipe2      : not null access Pipe_Type;\n+      Pipe3      : not null access Pipe_Type)\n    is\n       Status : Boolean;\n "}]}