{"sha": "a6860be9c89b7025c938f7a53c209478d3d84ca9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTY4NjBiZTljODliNzAyNWM5MzhmN2E1M2MyMDk0NzhkM2Q4NGNhOQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-06-13T08:05:54Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-06-13T08:05:54Z"}, "message": "Add gcc.dg/parloops-exit-first-loop-alt-4.c\n\n2015-06-13  Tom de Vries  <tom@codesourcery.com>\n\n\t* gcc.dg/parloops-exit-first-loop-alt-4.c: New test.\n\n\t* testsuite/libgomp.c/parloops-exit-first-loop-alt-4.c: New test.\n\nFrom-SVN: r224453", "tree": {"sha": "36fd31ec1cf7c4432aa7fde0ccad445724213a8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36fd31ec1cf7c4432aa7fde0ccad445724213a8b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6860be9c89b7025c938f7a53c209478d3d84ca9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6860be9c89b7025c938f7a53c209478d3d84ca9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6860be9c89b7025c938f7a53c209478d3d84ca9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6860be9c89b7025c938f7a53c209478d3d84ca9/comments", "author": null, "committer": null, "parents": [{"sha": "ab3306d23cc57c61e1f1ec7489b2f1ca556a1b87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab3306d23cc57c61e1f1ec7489b2f1ca556a1b87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab3306d23cc57c61e1f1ec7489b2f1ca556a1b87"}], "stats": {"total": 69, "additions": 69, "deletions": 0}, "files": [{"sha": "35822f36c769d31630740f499275306ccd1a610e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6860be9c89b7025c938f7a53c209478d3d84ca9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6860be9c89b7025c938f7a53c209478d3d84ca9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a6860be9c89b7025c938f7a53c209478d3d84ca9", "patch": "@@ -1,3 +1,7 @@\n+2015-06-13  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* gcc.dg/parloops-exit-first-loop-alt-4.c: New test.\n+\n 2015-06-13  Tom de Vries  <tom@codesourcery.com>\n \n \t* gcc.dg/parloops-exit-first-loop-alt-2.c: Add comment."}, {"sha": "2b8d289882487f64553eb84338d59362cc542ef4", "filename": "gcc/testsuite/gcc.dg/parloops-exit-first-loop-alt-4.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6860be9c89b7025c938f7a53c209478d3d84ca9/gcc%2Ftestsuite%2Fgcc.dg%2Fparloops-exit-first-loop-alt-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6860be9c89b7025c938f7a53c209478d3d84ca9/gcc%2Ftestsuite%2Fgcc.dg%2Fparloops-exit-first-loop-alt-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fparloops-exit-first-loop-alt-4.c?ref=a6860be9c89b7025c938f7a53c209478d3d84ca9", "patch": "@@ -0,0 +1,28 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target pthread } */\n+/* { dg-options \"-O2 -ftree-parallelize-loops=2 -fdump-tree-parloops\" } */\n+\n+/* Constant bound, reduction.  */\n+\n+#define N 4000\n+\n+unsigned int *a;\n+\n+unsigned int\n+f (void)\n+{\n+  int i;\n+  unsigned int sum = 1;\n+\n+  for (i = 0; i < N; ++i)\n+    sum += a[i];\n+\n+  return sum;\n+}\n+\n+/* Three array accesses:\n+   - one in f._loopfn.0\n+   - one in the parallel\n+   - one in the low iteration count loop\n+   Crucially, none for a peeled off last iteration following the parallel.  */\n+/* { dg-final { scan-tree-dump-times \"(?n)\\\\\\* 4\" 3 \"parloops\" } } */"}, {"sha": "a6d667dd04e14a13b2eaae49efade4fa3b90feb8", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6860be9c89b7025c938f7a53c209478d3d84ca9/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6860be9c89b7025c938f7a53c209478d3d84ca9/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=a6860be9c89b7025c938f7a53c209478d3d84ca9", "patch": "@@ -1,3 +1,7 @@\n+2015-06-13  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* testsuite/libgomp.c/parloops-exit-first-loop-alt-4.c: New test.\n+\n 2015-06-13  Tom de Vries  <tom@codesourcery.com>\n \n \t* testsuite/libgomp.c/parloops-exit-first-loop-alt-2.c: Add comment."}, {"sha": "1beae3eb11cf74469e526112786c84008c98f254", "filename": "libgomp/testsuite/libgomp.c/parloops-exit-first-loop-alt-4.c", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6860be9c89b7025c938f7a53c209478d3d84ca9/libgomp%2Ftestsuite%2Flibgomp.c%2Fparloops-exit-first-loop-alt-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6860be9c89b7025c938f7a53c209478d3d84ca9/libgomp%2Ftestsuite%2Flibgomp.c%2Fparloops-exit-first-loop-alt-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fparloops-exit-first-loop-alt-4.c?ref=a6860be9c89b7025c938f7a53c209478d3d84ca9", "patch": "@@ -0,0 +1,33 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O2 -ftree-parallelize-loops=2\" } */\n+\n+/* Constant bound, reduction.  */\n+\n+#define N 4000\n+\n+unsigned int *a;\n+\n+unsigned int\n+f (void)\n+{\n+  int i;\n+  unsigned int sum = 1;\n+\n+  for (i = 0; i < N; ++i)\n+    sum += a[i];\n+\n+  return sum;\n+}\n+\n+int\n+main (void)\n+{\n+  unsigned int res;\n+  unsigned int array[N];\n+  int i;\n+  for (i = 0; i < N; ++i)\n+    array[i] = i % 7;\n+  a = &array[0];\n+  res = f ();\n+  return !(res == 11995);\n+}"}]}