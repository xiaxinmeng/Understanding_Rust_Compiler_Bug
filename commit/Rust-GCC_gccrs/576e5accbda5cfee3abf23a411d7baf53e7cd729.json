{"sha": "576e5accbda5cfee3abf23a411d7baf53e7cd729", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTc2ZTVhY2NiZGE1Y2ZlZTNhYmYyM2E0MTFkN2JhZjUzZTdjZDcyOQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1997-10-21T19:10:24Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-10-21T19:10:24Z"}, "message": "mn10300.c (print_operand): Handle 'S'.\n\n        * mn10300.c (print_operand): Handle 'S'.\n        * mn10300.md (ashlsi3, lshrsi3, ashrsi3): Use %S for\n        shift amount in last alternative\n\nFrom-SVN: r16134", "tree": {"sha": "0f4cf005f0eed17b939942e0c70ccac871bb5596", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f4cf005f0eed17b939942e0c70ccac871bb5596"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/576e5accbda5cfee3abf23a411d7baf53e7cd729", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/576e5accbda5cfee3abf23a411d7baf53e7cd729", "html_url": "https://github.com/Rust-GCC/gccrs/commit/576e5accbda5cfee3abf23a411d7baf53e7cd729", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/576e5accbda5cfee3abf23a411d7baf53e7cd729/comments", "author": null, "committer": null, "parents": [{"sha": "5d29a95f92918a9354b8b23624a67d2d08ffa6bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d29a95f92918a9354b8b23624a67d2d08ffa6bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d29a95f92918a9354b8b23624a67d2d08ffa6bb"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "93351b8209acd1c97ce6c56e23730183503b98fe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/576e5accbda5cfee3abf23a411d7baf53e7cd729/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/576e5accbda5cfee3abf23a411d7baf53e7cd729/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=576e5accbda5cfee3abf23a411d7baf53e7cd729", "patch": "@@ -1,5 +1,9 @@\n Tue Oct 21 10:06:40 1997  Jeffrey A Law  (law@cygnus.com)\n \n+\t* mn10300.c (print_operand): Handle 'S'.\n+\t* mn10300.md (ashlsi3, lshrsi3, ashrsi3): Use %S for\n+\tshift amount in last alternative\n+\n \t* mn10300.c (expand_epilogue): Rework to handle register restores\n \tin \"ret\" and \"retf\" instructions correctly.\n "}, {"sha": "e5559212b076aee826110533f959766db07a50bf", "filename": "gcc/config/mn10300/mn10300.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/576e5accbda5cfee3abf23a411d7baf53e7cd729/gcc%2Fconfig%2Fmn10300%2Fmn10300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/576e5accbda5cfee3abf23a411d7baf53e7cd729/gcc%2Fconfig%2Fmn10300%2Fmn10300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10300%2Fmn10300.c?ref=576e5accbda5cfee3abf23a411d7baf53e7cd729", "patch": "@@ -254,6 +254,18 @@ print_operand (file, x, code)\n \toutput_address (GEN_INT ((~INTVAL (x)) & 0xff));\n \tbreak;\n \n+      /* For shift counts.  The hardware ignores the upper bits of\n+\t any immediate, but the assembler will flag an out of range\n+\t shift count as an error.  So we mask off the high bits\n+\t of the immediate here.  */\n+      case 'S':\n+\tif (GET_CODE (x) == CONST_INT)\n+\t  {\n+\t    fprintf (file, \"%d\", INTVAL (x) & 0x1f);\n+\t    break;\n+\t  }\n+\t/* FALL THROUGH */\n+\n       default:\n \tswitch (GET_CODE (x))\n \t  {"}, {"sha": "c835043c3f6f4cb06ef3a3a1c43574309b790414", "filename": "gcc/config/mn10300/mn10300.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/576e5accbda5cfee3abf23a411d7baf53e7cd729/gcc%2Fconfig%2Fmn10300%2Fmn10300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/576e5accbda5cfee3abf23a411d7baf53e7cd729/gcc%2Fconfig%2Fmn10300%2Fmn10300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10300%2Fmn10300.md?ref=576e5accbda5cfee3abf23a411d7baf53e7cd729", "patch": "@@ -1269,7 +1269,7 @@\n   asl2 %0\n   asl2 %0\\;add %0,%0\n   asl2 %0\\;asl2 %0\n-  asl %2,%0\"\n+  asl %S2,%0\"\n   [(set_attr \"cc\" \"set_zn\")])\n \n (define_insn \"lshrsi3\"\n@@ -1278,7 +1278,7 @@\n \t (match_operand:SI 1 \"register_operand\" \"0\")\n \t (match_operand:QI 2 \"nonmemory_operand\" \"di\")))]\n   \"\"\n-  \"lsr %2,%0\"\n+  \"lsr %S2,%0\"\n   [(set_attr \"cc\" \"set_zn\")])\n \n (define_insn \"ashrsi3\"\n@@ -1287,7 +1287,7 @@\n \t (match_operand:SI 1 \"register_operand\" \"0\")\n \t (match_operand:QI 2 \"nonmemory_operand\" \"di\")))]\n   \"\"\n-  \"asr %2,%0\"\n+  \"asr %S2,%0\"\n   [(set_attr \"cc\" \"set_zn\")])\n \n ;; ----------------------------------------------------------------------"}]}