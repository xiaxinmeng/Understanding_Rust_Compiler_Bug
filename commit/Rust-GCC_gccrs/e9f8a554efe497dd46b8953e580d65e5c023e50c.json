{"sha": "e9f8a554efe497dd46b8953e580d65e5c023e50c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTlmOGE1NTRlZmU0OTdkZDQ2Yjg5NTNlNTgwZDY1ZTVjMDIzZTUwYw==", "commit": {"author": {"name": "Bernd Edlinger", "email": "bernd.edlinger@hotmail.de", "date": "2020-12-13T07:24:57Z"}, "committer": {"name": "Bernd Edlinger", "email": "bernd.edlinger@hotmail.de", "date": "2021-01-04T09:03:19Z"}, "message": "Fix -save-temp leaking lto files in /tmp\n\nWhen linking with -flto and -save-temps, various\ntemporary files are created in /tmp.\nThe same happens when invoking the driver with @file\nparameter, and using -L or -I options.\n\ngcc:\n2021-01-04  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n\t* collect-utils.c (collect_execute): Check dumppfx.\n\t* collect2.c (maybe_run_lto_and_relink, do_link): Pass atsuffix\n\tto collect_execute.\n\t(do_link): Add new parameter atsuffix.\n\t(main): Handle -dumpdir option.  Skip one argument for\n\t-o, -isystem and -B options.\n\t* gcc.c (make_at_file): New helper function.\n\t(close_at_file): Use it.\n\ngcc/testsuite:\n2021-01-04  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n\t* gcc.misc-tests/outputs.exp: Adjust testcase.", "tree": {"sha": "88aae5b2daa92d3a6ceaff7addbd960b656992eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88aae5b2daa92d3a6ceaff7addbd960b656992eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9f8a554efe497dd46b8953e580d65e5c023e50c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9f8a554efe497dd46b8953e580d65e5c023e50c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9f8a554efe497dd46b8953e580d65e5c023e50c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9f8a554efe497dd46b8953e580d65e5c023e50c/comments", "author": {"login": "bernd-edlinger", "id": 17638929, "node_id": "MDQ6VXNlcjE3NjM4OTI5", "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bernd-edlinger", "html_url": "https://github.com/bernd-edlinger", "followers_url": "https://api.github.com/users/bernd-edlinger/followers", "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}", "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions", "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs", "repos_url": "https://api.github.com/users/bernd-edlinger/repos", "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}", "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bernd-edlinger", "id": 17638929, "node_id": "MDQ6VXNlcjE3NjM4OTI5", "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bernd-edlinger", "html_url": "https://github.com/bernd-edlinger", "followers_url": "https://api.github.com/users/bernd-edlinger/followers", "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}", "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions", "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs", "repos_url": "https://api.github.com/users/bernd-edlinger/repos", "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}", "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c48514bea610d9eaae783fec9d513a690723b0f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c48514bea610d9eaae783fec9d513a690723b0f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c48514bea610d9eaae783fec9d513a690723b0f0"}], "stats": {"total": 104, "additions": 74, "deletions": 30}, "files": [{"sha": "921bb34d78fdb6f20e5de72b577e1c83e18ca1b7", "filename": "gcc/collect-utils.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Fcollect-utils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Fcollect-utils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect-utils.c?ref=e9f8a554efe497dd46b8953e580d65e5c023e50c", "patch": "@@ -127,7 +127,7 @@ collect_execute (const char *prog, char **argv, const char *outname,\n       /* Note: we assume argv contains at least one element; this is\n          checked above.  */\n \n-      if (!save_temps || !atsuffix)\n+      if (!save_temps || !atsuffix || !dumppfx)\n \tresponse_file = make_temp_file (\"\");\n       else\n \tresponse_file = concat (dumppfx, atsuffix, NULL);"}, {"sha": "3f097f9725a1139f9e55a63a2f87eaa4c35f2fe4", "filename": "gcc/collect2.c", "status": "modified", "additions": 27, "deletions": 16, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=e9f8a554efe497dd46b8953e580d65e5c023e50c", "patch": "@@ -644,7 +644,7 @@ maybe_run_lto_and_relink (char **lto_ld_argv, char **object_lst,\n \n       /* Run the LTO back end.  */\n       pex = collect_execute (prog, lto_c_argv, NULL, NULL, PEX_SEARCH,\n-\t\t\t     at_file_supplied, NULL);\n+\t\t\t     at_file_supplied, \"lto_args\");\n       {\n \tint c;\n \tFILE *stream;\n@@ -728,7 +728,7 @@ maybe_run_lto_and_relink (char **lto_ld_argv, char **object_lst,\n       /* Run the linker again, this time replacing the object files\n          optimized by the LTO with the temporary file generated by the LTO.  */\n       fork_execute (\"ld\", out_lto_ld_argv, HAVE_GNU_LD && at_file_supplied,\n-\t\t    NULL);\n+\t\t    \"ld_args\");\n       /* We assume that temp files were created, and therefore we need to take\n          that into account (maybe run dsymutil).  */\n       post_ld_pass (/*temp_file*/true);\n@@ -740,7 +740,8 @@ maybe_run_lto_and_relink (char **lto_ld_argv, char **object_lst,\n     {\n       /* Our caller is relying on us to do the link\n          even though there is no LTO back end work to be done.  */\n-      fork_execute (\"ld\", lto_ld_argv, HAVE_GNU_LD && at_file_supplied, NULL);\n+      fork_execute (\"ld\", lto_ld_argv, HAVE_GNU_LD && at_file_supplied,\n+\t\t    \"ld_args\");\n       /* No LTO objects were found, so no new temp file.  */\n       post_ld_pass (/*temp_file*/false);\n     }\n@@ -751,13 +752,13 @@ maybe_run_lto_and_relink (char **lto_ld_argv, char **object_lst,\n    LD_ARGV is an array of arguments for the linker.  */\n \n static void\n-do_link (char **ld_argv)\n+do_link (char **ld_argv, const char *atsuffix)\n {\n   struct pex_obj *pex;\n   const char *prog = \"ld\";\n   pex = collect_execute (prog, ld_argv, NULL, NULL,\n \t\t\t PEX_LAST | PEX_SEARCH,\n-\t\t\t HAVE_GNU_LD && at_file_supplied, NULL);\n+\t\t\t HAVE_GNU_LD && at_file_supplied, atsuffix);\n   int ret = collect_wait (prog, pex);\n   if (ret)\n     {\n@@ -973,10 +974,10 @@ main (int argc, char **argv)\n \t  {\n \t    /* Parse the output filename if it's given so that we can make\n \t       meaningful temp filenames.  */\n-\t    if (argv[i][2] == '\\0')\n-\t      output_file = argv[i+1];\n-\t    else\n+\t    if (argv[i][2] != '\\0')\n \t      output_file = &argv[i][2];\n+\t    else if (argv[i+1] != NULL)\n+\t      output_file = argv[++i];\n \t  }\n \n #ifdef COLLECT_EXPORT_LIST\n@@ -1022,6 +1023,12 @@ main (int argc, char **argv)\n \telse if (strncmp (q, \"-save-temps\", 11) == 0)\n \t  /* FIXME: Honour =obj.  */\n \t  save_temps = true;\n+\telse if (strcmp (q, \"-dumpdir\") == 0)\n+\t  dumppfx = xstrdup (extract_string (&p));\n+\telse if (strcmp (q, \"-o\") == 0\n+\t\t || strcmp (q, \"-B\") == 0\n+\t\t || strcmp (q, \"-isystem\") == 0)\n+\t  (void) extract_string (&p);\n     }\n     obstack_free (&temporary_obstack, temporary_firstobj);\n \n@@ -1241,6 +1248,10 @@ main (int argc, char **argv)\n \t      *c_ptr++ = xstrdup (q);\n \t    }\n \t}\n+      else if (strcmp (q, \"-o\") == 0\n+\t       || strcmp (q, \"-dumpdir\") == 0\n+\t       || strcmp (q, \"-isystem\") == 0)\n+\t(void) extract_string (&p);\n #ifdef COLLECT_EXPORT_LIST\n       /* Detect any invocation with -fvisibility.  */\n       if (strncmp (q, \"-fvisibility\", 12) == 0)\n@@ -1415,10 +1426,10 @@ main (int argc, char **argv)\n #endif\n \n \t    case 'o':\n-\t      if (arg[2] == '\\0')\n-\t\toutput_file = *ld1++ = *ld2++ = *++argv;\n-\t      else\n+\t      if (arg[2] != '\\0')\n \t\toutput_file = &arg[2];\n+\t      else if (argv[1])\n+\t\toutput_file = *ld1++ = *ld2++ = *++argv;\n \t      break;\n \n \t    case 'r':\n@@ -1647,7 +1658,7 @@ main (int argc, char **argv)\n        functions from precise cross reference insertions by the compiler.  */\n \n     if (early_exit || ld1_filter != SCAN_NOTHING)\n-      do_link (ld1_argv);\n+      do_link (ld1_argv, \"ld1_args\");\n \n     if (early_exit)\n       {\n@@ -1708,7 +1719,7 @@ main (int argc, char **argv)\n       /* Do link without additional code generation now if we didn't\n \t do it earlier for scanning purposes.  */\n       if (ld1_filter == SCAN_NOTHING)\n-\tdo_link (ld1_argv);\n+\tdo_link (ld1_argv, \"ld1_args\");\n \n       if (lto_mode)\n         maybe_run_lto_and_relink (ld1_argv, object_lst, object, false);\n@@ -1806,10 +1817,10 @@ main (int argc, char **argv)\n   /* Assemble the constructor and destructor tables.\n      Link the tables in with the rest of the program.  */\n \n-  fork_execute (\"gcc\",  c_argv, at_file_supplied, NULL);\n+  fork_execute (\"gcc\",  c_argv, at_file_supplied, \"gcc_args\");\n #ifdef COLLECT_EXPORT_LIST\n   /* On AIX we must call link because of possible templates resolution.  */\n-  do_link (ld2_argv);\n+  do_link (ld2_argv, \"ld2_args\");\n \n   if (lto_mode)\n     maybe_run_lto_and_relink (ld2_argv, object_lst, object, false);\n@@ -1819,7 +1830,7 @@ main (int argc, char **argv)\n     maybe_run_lto_and_relink (ld2_argv, object_lst, object, true);\n   else\n     {\n-      fork_execute (\"ld\", ld2_argv, HAVE_GNU_LD && at_file_supplied, NULL);\n+      fork_execute (\"ld\", ld2_argv, HAVE_GNU_LD && at_file_supplied, \"ld_args\");\n       post_ld_pass (/*temp_file*/false);\n     }\n "}, {"sha": "79084c32ef4a80dad2dee998121f41439006b9d0", "filename": "gcc/gcc.c", "status": "modified", "additions": 27, "deletions": 1, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=e9f8a554efe497dd46b8953e580d65e5c023e50c", "patch": "@@ -2196,6 +2196,32 @@ open_at_file (void)\n      in_at_file = true;\n }\n \n+/* Create a temporary @file name.  */\n+\n+static char *make_at_file (void)\n+{\n+  static int fileno = 0;\n+  char filename[20];\n+  const char *base, *ext;\n+\n+  if (!save_temps_flag)\n+    return make_temp_file (\"\");\n+\n+  base = dumpbase;\n+  if (!(base && *base))\n+    base = dumpdir;\n+  if (!(base && *base))\n+    base = \"a\";\n+\n+  sprintf (filename, \".args.%d\", fileno++);\n+  ext = filename;\n+\n+  if (base == dumpdir && dumpdir_trailing_dash_added)\n+    ext++;\n+\n+  return concat (base, ext, NULL);\n+}\n+\n /* Close the temporary @file and add @file to the argument list.  */\n \n static void\n@@ -2211,7 +2237,7 @@ close_at_file (void)\n     return;\n \n   char **argv = (char **) alloca (sizeof (char *) * (n_args + 1));\n-  char *temp_file = make_temp_file (\"\");\n+  char *temp_file = make_at_file ();\n   char *at_argument = concat (\"@\", temp_file, NULL);\n   FILE *f = fopen (temp_file, \"w\");\n   int status;"}, {"sha": "0324d1aac13750fc3db9ae43aa3f7aad66f4832f", "filename": "gcc/testsuite/gcc.misc-tests/outputs.exp", "status": "modified", "additions": 19, "deletions": 12, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foutputs.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f8a554efe497dd46b8953e580d65e5c023e50c/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foutputs.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foutputs.exp?ref=e9f8a554efe497dd46b8953e580d65e5c023e50c", "patch": "@@ -284,6 +284,12 @@ outest \"$b exe savetmp named0\" $sing \"-o $b-0.exe -save-temps\" {} {{-0.i -0.s -0\n outest \"$b exe savetmp namedb\" $sing \"-o $b.exe -save-temps\" {} {{--0.i --0.s --0.o .exe}}\n outest \"$b exe savetmp named2\" $mult \"-o $b.exe -save-temps\" {} {{--1.i --1.s --1.o --2.i --2.s --2.o .exe}}\n \n+# Additional files are created when an @file is used\n+outest \"$b exe savetmp namedb\" $sing \"@/dev/null -o $b.exe -save-temps\" {} {{--0.i --0.s --0.o .args.0 .ld1_args .exe}}\n+outest \"$b exe savetmp named2\" $mult \"@/dev/null -o $b.exe -save-temps\" {} {{--1.i --1.s --1.o --2.i --2.s --2.o .args.0 .ld1_args .exe}}\n+outest \"$b exe savetmp named2\" $mult \"@/dev/null -I dummy -o $b.exe -save-temps\" {} {{--1.i --1.s --1.o --2.i --2.s --2.o -args.0 -args.1 .args.2 .ld1_args .exe}}\n+outest \"$b exe savetmp named2\" $mult \"@/dev/null -I dummy -L dummy -o $b.exe -save-temps\" {} {{--1.i --1.s --1.o --2.i --2.s --2.o -args.0 -args.1 .args.2 .args.3 .ld1_args .exe}}\n+\n # Setting the main output to a dir selects it as the default aux&dump\n # location.\n outest \"$b cpp savetmp namedir0\" $sing \"-E -o o/$b-0.i -save-temps\" {o/} {{-0.i} {}}\n@@ -638,6 +644,7 @@ outest \"$b lto sing named\" $sing \"-o $b.exe -O2 -flto -fno-use-linker-plugin -fl\n outest \"$b lto mult named\" $mult \"-o $b.exe -O2 -flto -fno-use-linker-plugin -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {} {{--1.c.???i.icf --1.c.???r.final --2.c.???i.icf --2.c.???r.final .wpa.???i.icf .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .exe}}\n outest \"$b lto sing nameddir\" $sing \"-o dir/$b.exe -O2 -flto -fno-use-linker-plugin -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--0.c.???i.icf --0.c.???r.final .wpa.???i.icf .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .exe} {}}\n outest \"$b lto mult nameddir\" $mult \"-o dir/$b.exe -O2 -flto -fno-use-linker-plugin -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--1.c.???i.icf --1.c.???r.final --2.c.???i.icf --2.c.???r.final .wpa.???i.icf .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .exe} {}}\n+outest \"$b lto sing unnamed\" $sing \"@/dev/null -O2 -flto -fno-use-linker-plugin -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage -save-temps $oaout\" {} {{a--0.c.???i.icf a--0.c.???r.final a.wpa.???i.icf a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a--0.o a--0.s a--0.i a.ltrans0.o a.ltrans.out a.ltrans0.ltrans.o a.ltrans0.ltrans_args a.args.0 a.ltrans0.ltrans.s a.wpa.args.0 a.lto_args a.ld1_args a.ltrans_args a.ltrans0.ltrans.args.0 a.ld_args $aout}}\n }\n \n # -dumpbase without -dumpdir.  The trailing dumppfx dash after it is\n@@ -703,20 +710,20 @@ outest \"$b lto sing empty dumpdir empty dumpbase namedb\" $sing \"-dumpdir \\\"\\\" -d\n outest \"$b lto mult empty dumpdir empty dumpbase namedb\" $mult \"-dumpdir \\\"\\\" -dumpbase \\\"\\\" -o dir/$b.exe -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{.exe} {-1.c.???i.icf !$ltop -1.c.???r.final !0 -2.c.???i.icf !$ltop -2.c.???r.final !0 .wpa.???i.icf .ltrans0.ltrans.???r.final .ltrans0.ltrans.su}}\n \n # Now -flto with -save-temps, not exhaustive.\n-outest \"$b lto st sing empty dumpbase unnamed\" $sing \"-dumpbase \\\"\\\" -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{-0.i -0.s -0.o -0.c.???i.icf !$ltop -0.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args $aout}}\n-outest \"$b lto st mult empty dumpbase unnamed\" $mult \"-dumpbase \\\"\\\" -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{-1.i -1.s -1.o -1.c.???i.icf !$ltop -1.c.???r.final !0 -2.i -2.s -2.o -2.c.???i.icf !$ltop -2.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args $aout}}\n-outest \"$b lto st sing dumpdir empty dumpbase named\" $sing \"-dumpdir dir/ -dumpbase \\\"\\\" -o $b-0.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-0.i -0.s -0.o -0.c.???i.icf !$ltop -0.c.???r.final !!$ltop -0.lto_wrapper_args !0 -0.wpa.???i.icf -0.ltrans.out -0.ltrans_args !!$ltop -0.res !0 -0.ltrans0.o -0.ltrans0.ltrans.???r.final -0.ltrans0.ltrans.su -0.ltrans0.ltrans.s -0.ltrans0.ltrans.o -0.ltrans0.ltrans_args} {-0.exe}}\n-outest \"$b lto st mult dumpdir empty dumpbase named\" $mult \"-dumpdir dir/ -dumpbase \\\"\\\" -o $b-1.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-1.i -1.s -1.o -1.c.???i.icf !$ltop -1.c.???r.final !0 -2.i -2.s -2.o -2.c.???i.icf !$ltop -2.c.???r.final !!$ltop -1.lto_wrapper_args !0 -1.wpa.???i.icf -1.ltrans.out -1.ltrans_args !!$ltop -1.res !0 -1.ltrans0.o -1.ltrans0.ltrans.???r.final -1.ltrans0.ltrans.su -1.ltrans0.ltrans.s -1.ltrans0.ltrans.o -1.ltrans0.ltrans_args} {-1.exe}}\n-outest \"$b lto st sing empty dumpbase namedb\" $sing \"-dumpbase \\\"\\\" -o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-0.i -0.s -0.o -0.c.???i.icf !$ltop -0.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .exe} {}}\n-outest \"$b lto st mult empty dumpbase namedb\" $mult \"-dumpbase \\\"\\\" -o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-1.i -1.s -1.o -1.c.???i.icf !$ltop -1.c.???r.final !0 -2.i -2.s -2.o -2.c.???i.icf !$ltop -2.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .exe} {}}\n+outest \"$b lto st sing empty dumpbase unnamed\" $sing \"-dumpbase \\\"\\\" -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{-0.i -0.s -0.o -0.c.???i.icf !$ltop -0.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args a.ltrans0.ltrans.args.0 a.wpa.args.0 $aout}}\n+outest \"$b lto st mult empty dumpbase unnamed\" $mult \"-dumpbase \\\"\\\" -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{-1.i -1.s -1.o -1.c.???i.icf !$ltop -1.c.???r.final !0 -2.i -2.s -2.o -2.c.???i.icf !$ltop -2.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args a.ltrans0.ltrans.args.0 a.wpa.args.0 $aout}}\n+outest \"$b lto st sing dumpdir empty dumpbase named\" $sing \"-dumpdir dir/ -dumpbase \\\"\\\" -o $b-0.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-0.i -0.s -0.o -0.c.???i.icf !$ltop -0.c.???r.final !!$ltop -0.lto_wrapper_args !0 -0.wpa.???i.icf -0.ltrans.out -0.ltrans_args !!$ltop -0.res !0 -0.ltrans0.o -0.ltrans0.ltrans.???r.final -0.ltrans0.ltrans.su -0.ltrans0.ltrans.s -0.ltrans0.ltrans.o -0.ltrans0.ltrans_args -0.ltrans0.ltrans.args.0 -0.wpa.args.0} {-0.exe}}\n+outest \"$b lto st mult dumpdir empty dumpbase named\" $mult \"-dumpdir dir/ -dumpbase \\\"\\\" -o $b-1.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-1.i -1.s -1.o -1.c.???i.icf !$ltop -1.c.???r.final !0 -2.i -2.s -2.o -2.c.???i.icf !$ltop -2.c.???r.final !!$ltop -1.lto_wrapper_args !0 -1.wpa.???i.icf -1.ltrans.out -1.ltrans_args !!$ltop -1.res !0 -1.ltrans0.o -1.ltrans0.ltrans.???r.final -1.ltrans0.ltrans.su -1.ltrans0.ltrans.s -1.ltrans0.ltrans.o -1.ltrans0.ltrans_args -1.ltrans0.ltrans.args.0 -1.wpa.args.0} {-1.exe}}\n+outest \"$b lto st sing empty dumpbase namedb\" $sing \"-dumpbase \\\"\\\" -o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-0.i -0.s -0.o -0.c.???i.icf !$ltop -0.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .ltrans0.ltrans.args.0 .wpa.args.0 .exe} {}}\n+outest \"$b lto st mult empty dumpbase namedb\" $mult \"-dumpbase \\\"\\\" -o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{-1.i -1.s -1.o -1.c.???i.icf !$ltop -1.c.???r.final !0 -2.i -2.s -2.o -2.c.???i.icf !$ltop -2.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .ltrans0.ltrans.args.0 .wpa.args.0 .exe} {}}\n \n # lto save-temps without -dumpbase.\n-outest \"$b lto st sing unnamed\" $sing \"-save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{a--0.i a--0.s a--0.o a--0.c.???i.icf !$ltop a--0.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args $aout}}\n-outest \"$b lto st mult unnamed\" $mult \"-save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{a--1.i a--1.s a--1.o a--1.c.???i.icf !$ltop a--1.c.???r.final !0 a--2.i a--2.s a--2.o a--2.c.???i.icf !$ltop a--2.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args $aout}}\n-outest \"$b lto st sing dumpdir named\" $sing \"-dumpdir dir/$b- -o $b-0.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--0.i --0.s --0.o --0.c.???i.icf !$ltop --0.c.???r.final !!$ltop -lto_wrapper_args !0 -wpa.???i.icf -ltrans.out -ltrans_args !!$ltop -res !0 -ltrans0.o -ltrans0.ltrans.???r.final -ltrans0.ltrans.su -ltrans0.ltrans.s -ltrans0.ltrans.o -ltrans0.ltrans_args} {-0.exe}}\n-outest \"$b lto st mult dumpdir named\" $mult \"-dumpdir dir/$b- -o $b-1.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--1.i --1.s --1.o --1.c.???i.icf !$ltop --1.c.???r.final !0 --2.i --2.s --2.o --2.c.???i.icf !$ltop --2.c.???r.final !!$ltop -lto_wrapper_args !0 -wpa.???i.icf -ltrans.out -ltrans_args !!$ltop -res !0 -ltrans0.o -ltrans0.ltrans.???r.final -ltrans0.ltrans.su -ltrans0.ltrans.s -ltrans0.ltrans.o -ltrans0.ltrans_args} {-1.exe}}\n-outest \"$b lto st sing namedb\" $sing \"-o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--0.i --0.s --0.o --0.c.???i.icf !$ltop --0.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .exe} {}}\n-outest \"$b lto st mult namedb\" $mult \"-o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--1.i --1.s --1.o --1.c.???i.icf !$ltop --1.c.???r.final !0 --2.i --2.s --2.o --2.c.???i.icf !$ltop --2.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .exe} {}}\n+outest \"$b lto st sing unnamed\" $sing \"-save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{a--0.i a--0.s a--0.o a--0.c.???i.icf !$ltop a--0.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args a.ltrans0.ltrans.args.0 a.wpa.args.0 $aout}}\n+outest \"$b lto st mult unnamed\" $mult \"-save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage $oaout\" {} {{a--1.i a--1.s a--1.o a--1.c.???i.icf !$ltop a--1.c.???r.final !0 a--2.i a--2.s a--2.o a--2.c.???i.icf !$ltop a--2.c.???r.final !!$ltop a.lto_wrapper_args !0 a.wpa.???i.icf a.ltrans.out a.ltrans_args !!$ltop a.res !0 a.ltrans0.o a.ltrans0.ltrans.???r.final a.ltrans0.ltrans.su a.ltrans0.ltrans.s a.ltrans0.ltrans.o a.ltrans0.ltrans_args a.ltrans0.ltrans.args.0 a.wpa.args.0 $aout}}\n+outest \"$b lto st sing dumpdir named\" $sing \"-dumpdir dir/$b- -o $b-0.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--0.i --0.s --0.o --0.c.???i.icf !$ltop --0.c.???r.final !!$ltop -lto_wrapper_args !0 -wpa.???i.icf -ltrans.out -ltrans_args !!$ltop -res !0 -ltrans0.o -ltrans0.ltrans.???r.final -ltrans0.ltrans.su -ltrans0.ltrans.s -ltrans0.ltrans.o -ltrans0.ltrans_args -ltrans0.ltrans.args.0 -wpa.args.0} {-0.exe}}\n+outest \"$b lto st mult dumpdir named\" $mult \"-dumpdir dir/$b- -o $b-1.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--1.i --1.s --1.o --1.c.???i.icf !$ltop --1.c.???r.final !0 --2.i --2.s --2.o --2.c.???i.icf !$ltop --2.c.???r.final !!$ltop -lto_wrapper_args !0 -wpa.???i.icf -ltrans.out -ltrans_args !!$ltop -res !0 -ltrans0.o -ltrans0.ltrans.???r.final -ltrans0.ltrans.su -ltrans0.ltrans.s -ltrans0.ltrans.o -ltrans0.ltrans_args -ltrans0.ltrans.args.0 -wpa.args.0} {-1.exe}}\n+outest \"$b lto st sing namedb\" $sing \"-o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--0.i --0.s --0.o --0.c.???i.icf !$ltop --0.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .ltrans0.ltrans.args.0 .wpa.args.0 .exe} {}}\n+outest \"$b lto st mult namedb\" $mult \"-o dir/$b.exe -save-temps -O2 -flto -flto-partition=one -fdump-ipa-icf-optimized -fdump-rtl-final -fstack-usage\" {dir/} {{--1.i --1.s --1.o --1.c.???i.icf !$ltop --1.c.???r.final !0 --2.i --2.s --2.o --2.c.???i.icf !$ltop --2.c.???r.final !!$ltop .lto_wrapper_args !0 .wpa.???i.icf .ltrans.out .ltrans_args !!$ltop .res !0 .ltrans0.o .ltrans0.ltrans.???r.final .ltrans0.ltrans.su .ltrans0.ltrans.s .ltrans0.ltrans.o .ltrans0.ltrans_args .ltrans0.ltrans.args.0 .wpa.args.0 .exe} {}}\n \n # !$skip_lto\n }"}]}