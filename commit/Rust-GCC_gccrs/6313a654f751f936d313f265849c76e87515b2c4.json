{"sha": "6313a654f751f936d313f265849c76e87515b2c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjMxM2E2NTRmNzUxZjkzNmQzMTNmMjY1ODQ5Yzc2ZTg3NTE1YjJjNA==", "commit": {"author": {"name": "Brendan Kehoe", "email": "brendan@gcc.gnu.org", "date": "1997-06-03T23:19:01Z"}, "committer": {"name": "Brendan Kehoe", "email": "brendan@gcc.gnu.org", "date": "1997-06-03T23:19:01Z"}, "message": "* fixincludes: Fix AIX NULL macro use of void*.\n\nFrom-SVN: r14144", "tree": {"sha": "27f6b4c4e7541ee97d52ffc41ab5fc0ba89f01fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27f6b4c4e7541ee97d52ffc41ab5fc0ba89f01fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6313a654f751f936d313f265849c76e87515b2c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6313a654f751f936d313f265849c76e87515b2c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6313a654f751f936d313f265849c76e87515b2c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6313a654f751f936d313f265849c76e87515b2c4/comments", "author": null, "committer": null, "parents": [{"sha": "fd407cd21dca4662e40c8d5737b8d604ba2087a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd407cd21dca4662e40c8d5737b8d604ba2087a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd407cd21dca4662e40c8d5737b8d604ba2087a2"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "f7adfa1a0e54e437563e74b884c1781063951e44", "filename": "gcc/fixincludes", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6313a654f751f936d313f265849c76e87515b2c4/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6313a654f751f936d313f265849c76e87515b2c4/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=6313a654f751f936d313f265849c76e87515b2c4", "patch": "@@ -2860,6 +2860,34 @@ for file in reg_types.h regex.h sys/lc_core.h; do\n   fi\n done\n \n+# AIX headers define NULL to be cast to a void pointer, which is illegal\n+# in ANSI C++.\n+for file in curses.h dbm.h locale.h stdio.h stdlib.h string.h time.h unistd.h ; do\n+  if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+    cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+    chmod +w ${LIB}/$file 2>/dev/null\n+    chmod a+r ${LIB}/$file 2>/dev/null\n+  fi\n+\n+  if [ -r ${LIB}/$file ]; then\n+    if egrep '#.*define.*NULL.*void' ${LIB}/$file >/dev/null 2>&1; then\n+      echo \"Fixing $file, bad NULL macro\"\n+      sed -e 's/^#[ \t]*define[ \t]*NULL[ \t]*((void[ \t]*\\*)0)/#define NULL 0/' \\\n+        ${LIB}/$file > ${LIB}/${file}.sed\n+      rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+      if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+        rm -f ${LIB}/$file\n+      else\n+        # Find any include directives that use \"file\".\n+        for include in `egrep '^[       ]*#[    ]*include[      ]*\"[^/]' ${LIB}/$file | sed -e 's/^[    ]*#[    ]*include[      ]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+  \t  dir=`echo $file | sed -e s'|/[^/]*$||'`\n+\t  required=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n+        done\n+      fi\n+    fi\n+  fi\n+done\n+\n # This loop does not appear to do anything, because it uses file\n # rather than $file when setting target.  It also appears to be\n # unnecessary, since the main loop processes symbolic links."}]}