{"sha": "810c1b83f60f4e74c91e766c390142c18d3b17aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODEwYzFiODNmNjBmNGU3NGM5MWU3NjZjMzkwMTQyYzE4ZDNiMTdhYQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1999-10-15T20:51:10Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1999-10-15T20:51:10Z"}, "message": "mips.c (function_prologue): Fix argument types.\n\n        * mips.c (function_prologue): Fix argument types.\n        * mips.md (casesi): Use emit_jump_insn for casesi_internal.\n        (casesi_internal): Write to the scratch register.\n\nFrom-SVN: r30023", "tree": {"sha": "faa0ee20928b66645b2e238b5ad852f1ae3716a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/faa0ee20928b66645b2e238b5ad852f1ae3716a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/810c1b83f60f4e74c91e766c390142c18d3b17aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/810c1b83f60f4e74c91e766c390142c18d3b17aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/810c1b83f60f4e74c91e766c390142c18d3b17aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/810c1b83f60f4e74c91e766c390142c18d3b17aa/comments", "author": null, "committer": null, "parents": [{"sha": "a2c8e1446425cec057cf89614fda399beb0babdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2c8e1446425cec057cf89614fda399beb0babdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2c8e1446425cec057cf89614fda399beb0babdd"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "4fad5cdced88c63dfe9c4a8d93712249c3a5dae9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/810c1b83f60f4e74c91e766c390142c18d3b17aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/810c1b83f60f4e74c91e766c390142c18d3b17aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=810c1b83f60f4e74c91e766c390142c18d3b17aa", "patch": "@@ -1,3 +1,9 @@\n+Fri Oct 15 13:48:45 1999  Richard Henderson  <rth@cygnus.com>\n+\n+\t* mips.c (function_prologue): Fix argument types.\n+\t* mips.md (casesi): Use emit_jump_insn for casesi_internal.\n+\t(casesi_internal): Write to the scratch register.\n+\n 1999-10-15 11:16 -0700  Zack Weinberg  <zack@bitmover.com>\n \n \t* cppexp.c (cpp_parse_escape): Make static.  Change second arg"}, {"sha": "69bd271fec70ee33bbdce2c4081ca47d1d80a440", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/810c1b83f60f4e74c91e766c390142c18d3b17aa/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/810c1b83f60f4e74c91e766c390142c18d3b17aa/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=810c1b83f60f4e74c91e766c390142c18d3b17aa", "patch": "@@ -6393,7 +6393,7 @@ save_restore_insns (store_p, large_reg, large_offset, file)\n void\n function_prologue (file, size)\n      FILE *file;\n-     int size ATTRIBUTE_UNUSED;\n+     HOST_WIDE_INT size ATTRIBUTE_UNUSED;\n {\n #ifndef FUNCTION_NAME_ALREADY_DECLARED\n   const char *fnname;"}, {"sha": "4f0a4199008f692a97204cd0034e7d77a806c702", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 5, "deletions": 11, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/810c1b83f60f4e74c91e766c390142c18d3b17aa/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/810c1b83f60f4e74c91e766c390142c18d3b17aa/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=810c1b83f60f4e74c91e766c390142c18d3b17aa", "patch": "@@ -9231,15 +9231,16 @@ move\\\\t%0,%z4\\\\n\\\\\n       emit_insn (gen_bgtu (operands[4]));\n \n       /* Do the PIC jump.  */\n-      emit_insn (gen_casesi_internal (reg, operands[3], gen_reg_rtx (SImode)));\n+      emit_jump_insn (gen_casesi_internal (reg, operands[3],\n+\t\t\t\t\t   gen_reg_rtx (SImode)));\n \n       DONE;\n     }\n }\")\n \n ;; An embedded PIC switch statement looks like this:\n ;;\tbal\t$LS1\n-;;\tsll\t$reg,$reg,2\n+;;\tsll\t$reg,$index,2\n ;; $LS1:\n ;;\taddu\t$reg,$reg,$31\n ;;\tlw\t$reg,$L1-$LS1($reg)\n@@ -9249,8 +9250,6 @@ move\\\\t%0,%z4\\\\n\\\\\n ;;\t.word\tcase1-$LS1\n ;;\t.word\tcase2-$LS1\n ;;\t...\n-;;\n-;; ??? So how does operand 2 get used?\n \n (define_insn \"casesi_internal\"\n   [(set (pc)\n@@ -9260,13 +9259,8 @@ move\\\\t%0,%z4\\\\n\\\\\n    (clobber (match_operand:SI 2 \"register_operand\" \"=d\"))\n    (clobber (reg:SI 31))]\n   \"TARGET_EMBEDDED_PIC\"\n-  \"*\n-{\n-  output_asm_insn (\\\"%(bal\\\\t%S1\\;sll\\\\t%0,2\\\\n%~%S1:\\\", operands);\n-  output_asm_insn (\\\"addu\\\\t%0,%0,$31%)\\\", operands);\n-  output_asm_insn (\\\"lw\\\\t%0,%1-%S1(%0)\\;addu\\\\t%0,%0,$31\\\", operands);\n-  return \\\"j\\\\t%0\\\";\n-}\"\n+  \"%(bal\\\\t%S1\\;sll\\\\t%2,%0,2\\\\n%~%S1:\\;addu\\\\t%2,%2,$31%)\\;\\\\\n+lw\\\\t%2,%1-%S1(%2)\\;addu\\\\t%2,%2,$31\\;j\\\\t%2\"\n   [(set_attr \"type\"\t\"jump\")\n    (set_attr \"mode\"\t\"none\")\n    (set_attr \"length\"\t\"24\")])"}]}