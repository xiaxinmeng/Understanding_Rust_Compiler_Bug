{"sha": "82979abd860fb54c2d0ab0a1001d86ec69f71ae2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODI5NzlhYmQ4NjBmYjU0YzJkMGFiMGExMDAxZDg2ZWM2OWY3MWFlMg==", "commit": {"author": {"name": "Markus Trippelsdorf", "email": "markus@trippelsdorf.de", "date": "2016-11-28T18:33:19Z"}, "committer": {"name": "Markus Trippelsdorf", "email": "trippels@gcc.gnu.org", "date": "2016-11-28T18:33:19Z"}, "message": "Fix PR78556 - left shift of negative values\n\nRunning bootstrap-ubsan on ppc64le shows many instances of e.g.:\n config/rs6000/rs6000.c:6217:36: runtime error: left shift of negative value -12301\n\n        PR target/78556\n\t* config/rs6000/rs6000.c (vspltis_constant): Add casts to avoid\n\tleft shifting of negative values.\n\nFrom-SVN: r242928", "tree": {"sha": "e6743c2460e907d61bb919533385719fc850c395", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6743c2460e907d61bb919533385719fc850c395"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82979abd860fb54c2d0ab0a1001d86ec69f71ae2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82979abd860fb54c2d0ab0a1001d86ec69f71ae2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82979abd860fb54c2d0ab0a1001d86ec69f71ae2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82979abd860fb54c2d0ab0a1001d86ec69f71ae2/comments", "author": null, "committer": null, "parents": [{"sha": "80cf1b8b60a246866808ee2e14cfcbe8f3bf7de0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80cf1b8b60a246866808ee2e14cfcbe8f3bf7de0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80cf1b8b60a246866808ee2e14cfcbe8f3bf7de0"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "41dcb5d6ca5678953c793c51da521831f2eb81fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82979abd860fb54c2d0ab0a1001d86ec69f71ae2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82979abd860fb54c2d0ab0a1001d86ec69f71ae2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=82979abd860fb54c2d0ab0a1001d86ec69f71ae2", "patch": "@@ -1,3 +1,9 @@\n+2016-11-28  Markus Trippelsdorf  <markus@trippelsdorf.de>\n+\n+\tPR target/78556\n+\t* config/rs6000/rs6000.c (vspltis_constant): Add casts to avoid\n+\tleft shifting of negative values.\n+\n 2016-11-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR fortran/78298"}, {"sha": "dfb5dc86b118383eab5bafed5c898c20d3932857", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82979abd860fb54c2d0ab0a1001d86ec69f71ae2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82979abd860fb54c2d0ab0a1001d86ec69f71ae2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=82979abd860fb54c2d0ab0a1001d86ec69f71ae2", "patch": "@@ -6214,7 +6214,9 @@ vspltis_constant (rtx op, unsigned step, unsigned copies)\n       bitsize /= 2;\n       small_val = splat_val >> bitsize;\n       mask >>= bitsize;\n-      if (splat_val != ((small_val << bitsize) | (small_val & mask)))\n+      if (splat_val != ((HOST_WIDE_INT)\n+          ((unsigned HOST_WIDE_INT) small_val << bitsize)\n+          | (small_val & mask)))\n \treturn false;\n       splat_val = small_val;\n     }"}]}