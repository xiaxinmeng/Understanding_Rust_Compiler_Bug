{"sha": "c23a9d0e7dcd44bb284f3a118efea6facdf08417", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzIzYTlkMGU3ZGNkNDRiYjI4NGYzYTExOGVmZWE2ZmFjZGYwODQxNw==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1995-05-24T08:21:04Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1995-05-24T08:21:04Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r9794", "tree": {"sha": "6bf28474d854bd453fdaa2f828c5bf1042a32c74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bf28474d854bd453fdaa2f828c5bf1042a32c74"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c23a9d0e7dcd44bb284f3a118efea6facdf08417", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c23a9d0e7dcd44bb284f3a118efea6facdf08417", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c23a9d0e7dcd44bb284f3a118efea6facdf08417", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c23a9d0e7dcd44bb284f3a118efea6facdf08417/comments", "author": null, "committer": null, "parents": [{"sha": "16b3c7c7d28d626303e31d81d6efc25eec32b0d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16b3c7c7d28d626303e31d81d6efc25eec32b0d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16b3c7c7d28d626303e31d81d6efc25eec32b0d2"}], "stats": {"total": 33, "additions": 23, "deletions": 10}, "files": [{"sha": "09382d7b7c75b2edb65af80e4c3c79228b6383e8", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 23, "deletions": 10, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c23a9d0e7dcd44bb284f3a118efea6facdf08417/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c23a9d0e7dcd44bb284f3a118efea6facdf08417/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=c23a9d0e7dcd44bb284f3a118efea6facdf08417", "patch": "@@ -1974,17 +1974,30 @@ toc_section ()\t\t\t\t\t\t\\\n /* This outputs NAME to FILE up to the first null or '['.  */\n \n #define RS6000_OUTPUT_BASENAME(FILE, NAME)\t\\\n-  if ((NAME)[0] == '*' || (NAME)[strlen (NAME) - 1] != ']') \\\n-    assemble_name (FILE, NAME);  \t\t\\\n-  else\t\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\\\n-      int _len = strlen (NAME);\t\t\t\\\n-      char *_p = alloca (_len + 1);\t\t\\\n+  {\t\t\t\t\t\t\\\n+    char *_p;\t\t\t\t\t\\\n \t\t\t\t\t\t\\\n-      strcpy (_p, NAME);\t\t\t\\\n-      _p[_len - 4] = '\\0';\t\t\t\\\n-      assemble_name (FILE, _p);\t\t\t\\\n-    }\n+    STRIP_NAME_ENCODING (_p, (NAME));\t\t\\\n+    assemble_name ((FILE), _p);\t\t\t\\\n+  }\n+\n+/* Remove any trailing [DS] or the like from the symbol name.  */\n+\n+#define STRIP_NAME_ENCODING(VAR,NAME)\t\t\t\t\\\n+  do\t\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\\\n+      if ((NAME)[0] == '*' || (NAME)[strlen (NAME) - 1] != ']')\t\\\n+\t(VAR) = (NAME);\t\t\t\t\t\t\\\n+      else\t\t\t\t\t\t\t\\\n+\t{\t\t\t\t\t\t\t\\\n+          int _len = strlen (NAME);\t\t\t\t\\\n+\t  (VAR) = alloca (_len + 1);\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\\\n+          strcpy ((VAR), NAME);\t\t\t\t\t\\\n+          (VAR)[_len - 4] = '\\0';\t\t\t\t\\\n+        }\t\t\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\\\n+  while (0)\n \n /* Output something to declare an external symbol to the assembler.  Most\n    assemblers don't need this.  "}]}