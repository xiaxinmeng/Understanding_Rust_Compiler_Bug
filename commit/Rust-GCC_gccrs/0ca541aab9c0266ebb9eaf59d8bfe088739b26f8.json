{"sha": "0ca541aab9c0266ebb9eaf59d8bfe088739b26f8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNhNTQxYWFiOWMwMjY2ZWJiOWVhZjU5ZDhiZmUwODg3MzliMjZmOA==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@bitrange.com", "date": "2004-10-18T01:56:03Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2004-10-18T01:56:03Z"}, "message": "cfgrtl.c (rtl_verify_flow_info_1): When checking insns in a bb...\n\n\t* cfgrtl.c (rtl_verify_flow_info_1): When checking insns in a bb,\n\thandle barriers in a bb by checking that it points to a NULL bb.\n\t* emit-rtl.c (emit_barrier_before): Set BLOCK_FOR_INSN to NULL.\n\t(emit_barrier_after, emit_barrier): Ditto.\n\nFrom-SVN: r89193", "tree": {"sha": "bbebfb96d0d97a29670e84dd15e52b3e6c0e9e7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bbebfb96d0d97a29670e84dd15e52b3e6c0e9e7c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8/comments", "author": null, "committer": null, "parents": [{"sha": "7dcb044217de829680851c86142b9976baf97a0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dcb044217de829680851c86142b9976baf97a0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dcb044217de829680851c86142b9976baf97a0b"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "e372e745002a60b24a11603c9e928f2d7395d969", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0ca541aab9c0266ebb9eaf59d8bfe088739b26f8", "patch": "@@ -1,3 +1,10 @@\n+2004-10-17  Hans-Peter Nilsson  <hp@bitrange.com>\n+\n+\t* cfgrtl.c (rtl_verify_flow_info_1): When checking insns in a bb,\n+\thandle barriers in a bb by checking that it points to a NULL bb.\n+\t* emit-rtl.c (emit_barrier_before): Set BLOCK_FOR_INSN to NULL.\n+\t(emit_barrier_after, emit_barrier): Ditto.\n+\n 2004-10-18  Joseph S. Myers  <jsm@polyomino.org.uk>\n \n \t* doc/extend.texi (Attribute Syntax): Clarify details of"}, {"sha": "ee0b468385e2e8fc3f3129ae339ceafde04d9843", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=0ca541aab9c0266ebb9eaf59d8bfe088739b26f8", "patch": "@@ -2073,7 +2073,10 @@ rtl_verify_flow_info_1 (void)\n \t}\n \n       for (x = BB_HEAD (bb); x != NEXT_INSN (BB_END (bb)); x = NEXT_INSN (x))\n-\tif (BLOCK_FOR_INSN (x) != bb)\n+\t/* We may have a barrier inside a basic block before dead code\n+\t   elimination.  They always have a NULL BLOCK_FOR_INSN.  */\n+\tif (BLOCK_FOR_INSN (x) != bb\n+\t    && !(BARRIER_P (x) && BLOCK_FOR_INSN (x) == NULL))\n \t  {\n \t    debug_rtx (x);\n \t    if (! BLOCK_FOR_INSN (x))"}, {"sha": "d81d71c9e22c4bb1ed334a1278fa5d863367ba3a", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ca541aab9c0266ebb9eaf59d8bfe088739b26f8/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=0ca541aab9c0266ebb9eaf59d8bfe088739b26f8", "patch": "@@ -4057,6 +4057,7 @@ emit_barrier_before (rtx before)\n   rtx insn = rtx_alloc (BARRIER);\n \n   INSN_UID (insn) = cur_insn_uid++;\n+  BLOCK_FOR_INSN (insn) = NULL;\n \n   add_insn_before (insn, before);\n   return insn;\n@@ -4272,6 +4273,7 @@ emit_barrier_after (rtx after)\n   rtx insn = rtx_alloc (BARRIER);\n \n   INSN_UID (insn) = cur_insn_uid++;\n+  BLOCK_FOR_INSN (insn) = NULL;\n \n   add_insn_after (insn, after);\n   return insn;\n@@ -4668,6 +4670,7 @@ emit_barrier (void)\n {\n   rtx barrier = rtx_alloc (BARRIER);\n   INSN_UID (barrier) = cur_insn_uid++;\n+  BLOCK_FOR_INSN (barrier) = NULL;\n   add_insn (barrier);\n   return barrier;\n }"}]}