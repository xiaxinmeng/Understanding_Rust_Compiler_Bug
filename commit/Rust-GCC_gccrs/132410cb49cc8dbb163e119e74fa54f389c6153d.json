{"sha": "132410cb49cc8dbb163e119e74fa54f389c6153d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMyNDEwY2I0OWNjOGRiYjE2M2UxMTllNzRmYTU0ZjM4OWM2MTUzZA==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2009-04-29T09:28:07Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-29T09:28:07Z"}, "message": "mlib-prj.adb, [...]: Minor reformatting Minor code reorganization\n\n2009-04-29  Robert Dewar  <dewar@adacore.com>\n\n\t* mlib-prj.adb, mlib-tgt.adb, mlib-tgt.ads, prj-nmsc.adb,\n\tprj-proc.adb: Minor reformatting\n\tMinor code reorganization\n\nFrom-SVN: r146933", "tree": {"sha": "378b3f6c20e00cc2a6824efd19f6506100e18bcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/378b3f6c20e00cc2a6824efd19f6506100e18bcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/132410cb49cc8dbb163e119e74fa54f389c6153d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/132410cb49cc8dbb163e119e74fa54f389c6153d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/132410cb49cc8dbb163e119e74fa54f389c6153d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/132410cb49cc8dbb163e119e74fa54f389c6153d/comments", "author": null, "committer": null, "parents": [{"sha": "9d8a2a07e112b676da71cb21a75bc5155436d9da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d8a2a07e112b676da71cb21a75bc5155436d9da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d8a2a07e112b676da71cb21a75bc5155436d9da"}], "stats": {"total": 72, "additions": 46, "deletions": 26}, "files": [{"sha": "3a114f43baf945c0aaa384000e8ab1327e6ebb1c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=132410cb49cc8dbb163e119e74fa54f389c6153d", "patch": "@@ -1,3 +1,9 @@\n+2009-04-29  Robert Dewar  <dewar@adacore.com>\n+\n+\t* mlib-prj.adb, mlib-tgt.adb, mlib-tgt.ads, prj-nmsc.adb,\n+\tprj-proc.adb: Minor reformatting\n+\tMinor code reorganization\n+\n 2009-04-29  Bob Duff  <duff@adacore.com>\n \n \t* exp_ch7.adb (Build_Final_List): For an access type that designates a"}, {"sha": "67d9330ae9e12d125dfae8c48319c1c47fadc1c6", "filename": "gcc/ada/mlib-prj.adb", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fmlib-prj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fmlib-prj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-prj.adb?ref=132410cb49cc8dbb163e119e74fa54f389c6153d", "patch": "@@ -480,8 +480,10 @@ package body MLib.Prj is\n \n          elsif P /= No_Project then\n             declare\n-               Proj : Project_Id := For_Project;\n+               Proj : Project_Id;\n+\n             begin\n+               Proj := For_Project;\n                while Proj.Extends /= No_Project loop\n                   if P = Proj.Extends then\n                      return True;\n@@ -518,12 +520,12 @@ package body MLib.Prj is\n             Lib_File := Name_Find;\n             Text := Read_Library_Info (Lib_File, True);\n \n-            Id  := ALI.Scan_ALI\n-                         (F          => Lib_File,\n-                          T          => Text,\n-                          Ignore_ED  => False,\n-                          Err        => True,\n-                          Read_Lines => \"D\");\n+            Id := ALI.Scan_ALI\n+                    (F          => Lib_File,\n+                     T          => Text,\n+                     Ignore_ED  => False,\n+                     Err        => True,\n+                     Read_Lines => \"D\");\n             Free (Text);\n \n             --  Look for s-osinte.ads in the dependencies\n@@ -2069,7 +2071,7 @@ package body MLib.Prj is\n       if For_Project.Library then\n          declare\n             Lib_Name : constant File_Name_Type :=\n-              Library_File_Name_For (For_Project, In_Tree);\n+                         Library_File_Name_For (For_Project, In_Tree);\n          begin\n             Change_Dir (Get_Name_String (For_Project.Library_Dir.Name));\n             Lib_TS := File_Stamp (Lib_Name);"}, {"sha": "b07bb74d687e9b4e99ddf70816bffc48bb01603b", "filename": "gcc/ada/mlib-tgt.adb", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fmlib-tgt.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fmlib-tgt.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt.adb?ref=132410cb49cc8dbb163e119e74fa54f389c6153d", "patch": "@@ -317,7 +317,8 @@ package body MLib.Tgt is\n    ------------------------\n \n    function Library_Exists_For\n-     (Project : Project_Id; In_Tree : Project_Tree_Ref) return Boolean\n+     (Project : Project_Id;\n+      In_Tree : Project_Tree_Ref) return Boolean\n    is\n    begin\n       return Library_Exists_For_Ptr (Project, In_Tree);\n@@ -328,9 +329,11 @@ package body MLib.Tgt is\n    --------------------------------\n \n    function Library_Exists_For_Default\n-     (Project : Project_Id; In_Tree : Project_Tree_Ref) return Boolean\n+     (Project : Project_Id;\n+      In_Tree : Project_Tree_Ref) return Boolean\n    is\n       pragma Unreferenced (In_Tree);\n+\n    begin\n       if not Project.Library then\n          Prj.Com.Fail (\"INTERNAL ERROR: Library_Exists_For called \" &"}, {"sha": "cbb15d3ac1d2a2914d99db48c1a4a107a6ec8327", "filename": "gcc/ada/mlib-tgt.ads", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fmlib-tgt.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fmlib-tgt.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt.ads?ref=132410cb49cc8dbb163e119e74fa54f389c6153d", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---                     Copyright (C) 2001-2008, AdaCore                     --\n+--                     Copyright (C) 2001-2009, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -140,7 +140,8 @@ package MLib.Tgt is\n    --  are ignored.\n \n    function Library_Exists_For\n-     (Project : Project_Id; In_Tree : Project_Tree_Ref) return Boolean;\n+     (Project : Project_Id;\n+      In_Tree : Project_Tree_Ref) return Boolean;\n    --  Return True if the library file for a library project already exists.\n    --  This function can only be called for library projects.\n \n@@ -166,6 +167,7 @@ private\n    type Is_Ext_Function is access function (Ext : String) return Boolean;\n    type String_List_Access_Function is access function\n      return String_List_Access;\n+\n    type Build_Dynamic_Library_Function is access procedure\n      (Ofiles       : Argument_List;\n       Options      : Argument_List;\n@@ -176,11 +178,15 @@ private\n       Driver_Name  : Name_Id := No_Name;\n       Lib_Version  : String  := \"\";\n       Auto_Init    : Boolean := False);\n+\n    type Library_Exists_For_Function is access function\n-     (Project : Project_Id; In_Tree : Project_Tree_Ref) return Boolean;\n+     (Project : Project_Id;\n+      In_Tree : Project_Tree_Ref) return Boolean;\n+\n    type Library_File_Name_For_Function is access function\n      (Project : Project_Id;\n       In_Tree : Project_Tree_Ref) return File_Name_Type;\n+\n    type Boolean_Function is access function return Boolean;\n    type Library_Support_Function is access function return Library_Support;\n \n@@ -233,12 +239,14 @@ private\n    Libgnat_Ptr : String_Function := Libgnat_Default'Access;\n \n    function Library_Exists_For_Default\n-     (Project : Project_Id; In_Tree : Project_Tree_Ref) return Boolean;\n+     (Project : Project_Id;\n+      In_Tree : Project_Tree_Ref) return Boolean;\n    Library_Exists_For_Ptr : Library_Exists_For_Function :=\n                               Library_Exists_For_Default'Access;\n \n    function Library_File_Name_For_Default\n-     (Project : Project_Id; In_Tree : Project_Tree_Ref) return File_Name_Type;\n+     (Project : Project_Id;\n+      In_Tree : Project_Tree_Ref) return File_Name_Type;\n    Library_File_Name_For_Ptr : Library_File_Name_For_Function :=\n                                  Library_File_Name_For_Default'Access;\n "}, {"sha": "372f950a9b62739fa1ac57d29cb0a293d9bf6902", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=132410cb49cc8dbb163e119e74fa54f389c6153d", "patch": "@@ -3147,7 +3147,7 @@ package body Prj.Nmsc is\n          --  Check Body_Suffix\n \n          if Is_Illegal_Suffix\n-           (Body_Suffix, Project.Naming.Dot_Replacement)\n+              (Body_Suffix, Project.Naming.Dot_Replacement)\n          then\n             Err_Vars.Error_Msg_File_1 := Body_Suffix;\n             Error_Msg\n@@ -3468,6 +3468,7 @@ package body Prj.Nmsc is\n       --  Special case of extending project\n \n       if Project.Extends /= No_Project then\n+\n          --  If the project extended is a library project, we inherit the\n          --  library name, if it is not redefined; we check that the library\n          --  directory is specified.\n@@ -3686,7 +3687,7 @@ package body Prj.Nmsc is\n \n       Project.Library :=\n         Project.Library_Dir /= No_Path_Information\n-        and then Project.Library_Name /= No_Name;\n+          and then Project.Library_Name /= No_Name;\n \n       if Project.Extends = No_Project then\n          case Project.Qualifier is\n@@ -3741,6 +3742,7 @@ package body Prj.Nmsc is\n                if Current_Verbosity = High then\n                   Write_Line (\"No library ALI directory specified\");\n                end if;\n+\n                Project.Library_ALI_Dir := Project.Library_Dir;\n \n             else\n@@ -5763,11 +5765,11 @@ package body Prj.Nmsc is\n                      else\n                         --  Remove source dir, if present\n \n-                        List := Project.Source_Dirs;\n                         Prev := Nil_String;\n \n                         --  Look for source dir in current list\n \n+                        List := Project.Source_Dirs;\n                         while List /= Nil_String loop\n                            Element := In_Tree.String_Elements.Table (List);\n                            exit when Element.Value = Path_Id;\n@@ -5807,13 +5809,12 @@ package body Prj.Nmsc is\n       if (((not Source_Files.Default)\n            and then Source_Files.Values = Nil_String)\n           or else\n-          ((not Source_Dirs.Default) and then Source_Dirs.Values = Nil_String)\n-           or else\n-          ((not Languages.Default) and then Languages.Values = Nil_String))\n+           ((not Source_Dirs.Default) and then Source_Dirs.Values = Nil_String)\n+              or else\n+           ((not Languages.Default) and then Languages.Values = Nil_String))\n         and then Project.Extends = No_Project\n       then\n          Project.Object_Directory := No_Path_Information;\n-\n       else\n          Project.Object_Directory := Project.Directory;\n       end if;\n@@ -8208,7 +8209,7 @@ package body Prj.Nmsc is\n                  and then UData.File_Names (Unit_Kind).Path.Name = Slash)\n               or else UData.File_Names (Unit_Kind).Name = No_File\n               or else Is_Extending\n-                (Project.Extends, UData.File_Names (Unit_Kind).Project)\n+                        (Project.Extends, UData.File_Names (Unit_Kind).Project)\n             then\n                if UData.File_Names (Unit_Kind).Path.Name = Slash then\n                   Remove_Forbidden_File_Name"}, {"sha": "4fbc0a783b413d93f7ad7ebe41eb76c8f7a5629d", "filename": "gcc/ada/prj-proc.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fprj-proc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/132410cb49cc8dbb163e119e74fa54f389c6153d/gcc%2Fada%2Fprj-proc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-proc.adb?ref=132410cb49cc8dbb163e119e74fa54f389c6153d", "patch": "@@ -1164,9 +1164,10 @@ package body Prj.Proc is\n          --  if the project is not imported directly.\n \n          declare\n-            Proj : Project_Id := Result.Extends;\n+            Proj : Project_Id;\n \n          begin\n+            Proj := Result.Extends;\n             while Proj /= No_Project loop\n                if Proj.Name = With_Name then\n                   Temp_Result := Result;\n@@ -1571,8 +1572,7 @@ package body Prj.Proc is\n                         end loop;\n \n                         Orig_Array :=\n-                          In_Tree.Packages.Table\n-                            (Orig_Package).Decl.Arrays;\n+                          In_Tree.Packages.Table (Orig_Package).Decl.Arrays;\n                      end if;\n \n                      --  Now look for the array"}]}