{"sha": "8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGEwNjc4ZmE3ZTEwYmMyMTFjZWY1YmQzZDcxZjlkNWNmOTVjNTVmYQ==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2012-07-22T15:45:07Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2012-07-22T15:45:07Z"}, "message": "Handle recent changes in default atomics for cris*-*-linux*.\n\n\t* gcc.target/cris/torture/sync-mis-xchg-i-1ml.c,\n\tgcc.target/cris/torture/sync-mis-xchg-i-2ml.c,\n\tgcc.target/cris/torture/sync-mis-xchg-i-3ml.c,\n\tgcc.target/cris/torture/sync-mis-xchg-s-1ml.c,\n\tgcc.target/cris/torture/sync-mis-op-i-1ml.c,\n\tgcc.target/cris/torture/sync-mis-op-i-2ml.c,\n\tgcc.target/cris/torture/sync-mis-op-i-3ml.c,\n\tgcc.target/cris/torture/sync-mis-op-s-1ml.c: New tests.\n\t* gcc.target/cris/torture/sync-mis-op-i-2a.c: Make sure\n\t-mno-unaligned-atomic-may-use-library is in effect for\n\tcris*-*-linux*.\n\t* gcc.target/cris/torture/sync-mis-xchg-i-1.c,\n\tgcc.target/cris/torture/sync-mis-xchg-i-2.c,\n\tgcc.target/cris/torture/sync-mis-xchg-i-3.c,\n\tgcc.target/cris/torture/sync-mis-xchg-i-2a.c,\n\tgcc.target/cris/torture/sync-mis-xchg-s-1.c,\n\tgcc.target/cris/torture/sync-mis-op-i-1.c,\n\tgcc.target/cris/torture/sync-mis-op-i-2.c,\n\tgcc.target/cris/torture/sync-mis-op-i-1a.c,\n\tgcc.target/cris/torture/sync-mis-op-i-3.c,\n\tgcc.target/cris/torture/sync-mis-op-i-3a.c,\n\tgcc.target/cris/torture/sync-mis-op-s-1a.c,\n\tgcc.target/cris/torture/sync-mis-xchg-i-1a.c,\n\tgcc.target/cris/torture/sync-mis-xchg-i-3a.c,\n\tgcc.target/cris/torture/sync-mis-xchg-s-1a.c: Similar.\n\t* gcc.target/cris/torture/sync-mis-op-s-1.c: Ditto.\n\t(main): Remove local variable x.\n\t[mis_ok]: Check that atomics don't fail.\n\nFrom-SVN: r189757", "tree": {"sha": "6ab010fc4d5de412b63069ab80efb59efacb782b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ab010fc4d5de412b63069ab80efb59efacb782b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/comments", "author": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "888b670f9eb00d573a2660300776b39febd12a68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/888b670f9eb00d573a2660300776b39febd12a68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/888b670f9eb00d573a2660300776b39febd12a68"}], "stats": {"total": 105, "additions": 96, "deletions": 9}, "files": [{"sha": "f2bb333adbea3328bff4b1e942b11b67915ccd28", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,3 +1,35 @@\n+2012-07-22  Hans-Peter Nilsson  <hp@axis.com>\n+\n+\tHandle recent changes in default atomics for cris*-*-linux*.\n+\t* gcc.target/cris/torture/sync-mis-xchg-i-1ml.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-i-2ml.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-i-3ml.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-s-1ml.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-1ml.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-2ml.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-3ml.c,\n+\tgcc.target/cris/torture/sync-mis-op-s-1ml.c: New tests.\n+\t* gcc.target/cris/torture/sync-mis-op-i-2a.c: Make sure\n+\t-mno-unaligned-atomic-may-use-library is in effect for\n+\tcris*-*-linux*.\n+\t* gcc.target/cris/torture/sync-mis-xchg-i-1.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-i-2.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-i-3.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-i-2a.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-s-1.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-1.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-2.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-1a.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-3.c,\n+\tgcc.target/cris/torture/sync-mis-op-i-3a.c,\n+\tgcc.target/cris/torture/sync-mis-op-s-1a.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-i-1a.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-i-3a.c,\n+\tgcc.target/cris/torture/sync-mis-xchg-s-1a.c: Similar.\n+\t* gcc.target/cris/torture/sync-mis-op-s-1.c: Ditto.\n+\t(main): Remove local variable x.\n+\t[mis_ok]: Check that atomics don't fail.\n+\n 2012-07-21  Andrew Pinski  <apinski@cavium.com>\n \n \t*  gcc.dg/tree-ssa/vrp72.c: New test."}, {"sha": "dd8704cc92dc4fdafc49cc1783fc0e9317d2085f", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dop -Dtype=int\" } */\n+/* { dg-options \"-Dop -Dtype=int -mno-unaligned-atomic-may-use-library\" } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "8055fd380e9f16e0a7452d2ca4bc9e6b1127e976", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-1a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dop -Dtype=int -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "c8cef184149fe57b1f8a3a3b840f42be53cdfd6f", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-1ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-1ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dop -Dtype=int -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}, {"sha": "3c162e96a4df25b56d5b08d9f7280b637a548d2b", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dop -Dtype=int -Dmisalignment=2\" } */\n+/* { dg-options \"-Dop -Dtype=int -Dmisalignment=2 -mno-unaligned-atomic-may-use-library\" } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "61e1c2047b40bcb441b300a6a577d6a7dffe1b0c", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-2a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dop -Dtype=int -Dmisalignment=2 -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "0d78e90019d7b120cacd77b72dd2ac3eb0010b0c", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-2ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-2ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dop -Dtype=int -Dmisalignment=2 -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}, {"sha": "626a3d5cba42bb9349342d36b4fbc95cd6726ffc", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dop -Dtype=int -Dmisalignment=3\" } */\n+/* { dg-options \"-Dop -Dtype=int -Dmisalignment=3 -mno-unaligned-atomic-may-use-library\" } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "339e74cd86c6519eddbfc284edd37eee05ef81c8", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-3a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dop -Dtype=int -Dmisalignment=3 -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "17c6d34d11a348eef88eacaa728811b57254116a", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-i-3ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-i-3ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dop -Dtype=int -Dmisalignment=3 -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}, {"sha": "f2835aa06c11c1eb086a598a5bb29f2b68cd6cf3", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-s-1.c", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dop -Dtype=short\" } */\n+/* { dg-options \"-Dop -Dtype=short -mno-unaligned-atomic-may-use-library\" } */\n \n /* Make sure we get a SIGTRAP or equivalent when passing unaligned\n    but otherwise valid pointers to the atomic builtins.  */\n@@ -76,7 +76,6 @@ void trap_handler(int signum)\n \n int main(void)\n {\n-  type x = 0;\n   type ret;\n \n #ifndef TRAP_USING_ABORT\n@@ -86,7 +85,9 @@ int main(void)\n #endif\n #endif\n \n+#ifndef mis_ok\n   trap_expected = 1;\n+#endif\n \n #if op\n   sfa (&s.i, &s.i, 42);\n@@ -98,10 +99,24 @@ int main(void)\n      should do it.  */\n   trap_expected = 0;\n \n+#ifdef mis_ok\n+  /* We're missing a sequence point, but we shouldn't have the initial\n+     value.  */\n+  if (s.i == (type) 0xdeadbeef)\n+    abort ();\n+  exit (0);\n+#endif\n+\n   sfa (&x, &x, 1);\n #else\n   acen (&s.i, &x, &ret);\n \n+#ifdef mis_ok\n+  if (s.i != 2 || x != 2 || ret != (type) 0xdeadbeef)\n+    abort ();\n+  exit (0);\n+#endif\n+\n   trap_expected = 0;\n \n   acen (&x, &x, &ret);"}, {"sha": "ba639172ba9372c8f247b25f3605c1fee837e374", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-s-1a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dop -Dtype=short -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "3685c5047311caebd1be7a9c46009a41201ad71e", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-op-s-1ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-op-s-1ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dop -Dtype=short -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}, {"sha": "da25614e23b66355f9b116ac6a77a32c6ac6b5ad", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dxchg -Dtype=int\" } */\n+/* { dg-options \"-Dxchg -Dtype=int -mno-unaligned-atomic-may-use-library\" } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "09a7a9ea3a0d91107f12694a479814b49d3dd71e", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-1a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dxchg -Dtype=int -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "d757a683b17b31bdd8b496cd3bc2a8df48dbf95b", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-1ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-1ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dxchg -Dtype=int -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}, {"sha": "e8a425328eb2c9ed5477abd25b7091407dc98600", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=2\" } */\n+/* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=2 -mno-unaligned-atomic-may-use-library\" } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "2b97613de3ce568e2e41954d1d3e3476400508b8", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-2a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=2 -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "fb711e0ef78bc6700f2f763dfa9617c24f660518", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-2ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-2ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=2 -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}, {"sha": "4a3511bf2fbd9eaba6bc42c987af7bcea59c1586", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=3\" } */\n+/* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=3 -mno-unaligned-atomic-may-use-library\" } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "94a25e37f0448b7407a0a372fe407c09265ae143", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-3a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=3 -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "32f8ebbd9bf00ae0df79c56b0bac2397e76484d7", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-i-3ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-i-3ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dxchg -Dtype=int -Dmisalignment=3 -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}, {"sha": "d8dede9c1f61de04704f04785793ce96128f9b5b", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-s-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do run { target *-*-linux* } } */\n /* { dg-additional-sources \"../sync-1.c\" } */\n-/* { dg-options \"-Dxchg -Dtype=short\" } */\n+/* { dg-options \"-Dxchg -Dtype=short -mno-unaligned-atomic-may-use-library\" } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "6f5eb02afeddb8598892a087422c480b4689b5a1", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-s-1a.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1a.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -2,4 +2,5 @@\n /* { dg-additional-sources \"../sync-1.c\" } */\n /* { dg-options \"-Dxchg -Dtype=short -DTRAP_USING_ABORT -mno-trap-using-break8\" } */\n /* { dg-additional-options \"-mtrap-unaligned-atomic\" { target cris-*-elf } } */\n+/* { dg-additional-options \"-mno-unaligned-atomic-may-use-library\" { target cris*-*-linux* } } */\n #include \"sync-mis-op-s-1.c\""}, {"sha": "a6f501c10cc80485b9d1147cfa0bc954220f06b4", "filename": "gcc/testsuite/gcc.target/cris/torture/sync-mis-xchg-s-1ml.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1ml.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1ml.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fsync-mis-xchg-s-1ml.c?ref=8a0678fa7e10bc211cef5bd3d71f9d5cf95c55fa", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do run { target *-*-linux* } } */\n+/* { dg-additional-sources \"../sync-1.c\" } */\n+/* { dg-options \"-Dxchg -Dtype=short -Dmis_ok\" } */\n+#include \"sync-mis-op-s-1.c\""}]}