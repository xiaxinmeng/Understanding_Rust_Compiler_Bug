{"sha": "fd51b344ca86c9673db0161d4a383cccdb2f429c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ1MWIzNDRjYTg2Yzk2NzNkYjAxNjFkNGEzODNjY2NkYjJmNDI5Yw==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2021-06-25T23:01:01Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2021-06-25T23:01:01Z"}, "message": "PR middle-end/101216 - spurious notes for function calls\n\n\tPR middle-end/101216\n\ngcc/ChangeLog:\n\n\t* calls.c (maybe_warn_rdwr_sizes): Use the no_warning constant.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.dg/Wnonnull-7.c: New test.", "tree": {"sha": "8a197385cb4db4652191ea6da1ddcbd288b68ebb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a197385cb4db4652191ea6da1ddcbd288b68ebb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd51b344ca86c9673db0161d4a383cccdb2f429c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd51b344ca86c9673db0161d4a383cccdb2f429c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd51b344ca86c9673db0161d4a383cccdb2f429c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd51b344ca86c9673db0161d4a383cccdb2f429c/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a52cf2eb9d6864ad85674ab56838e0d9ce27926", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a52cf2eb9d6864ad85674ab56838e0d9ce27926", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a52cf2eb9d6864ad85674ab56838e0d9ce27926"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "f8a4b79e7f824ade69456eeb2def2f578373b5ac", "filename": "gcc/calls.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd51b344ca86c9673db0161d4a383cccdb2f429c/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd51b344ca86c9673db0161d4a383cccdb2f429c/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=fd51b344ca86c9673db0161d4a383cccdb2f429c", "patch": "@@ -2054,7 +2054,7 @@ maybe_warn_rdwr_sizes (rdwr_map *rwm, tree fndecl, tree fntype, tree exp)\n \t*sizstr = '\\0';\n \n       /* Set if a warning has been issued for the current argument.  */\n-      opt_code arg_warned = N_OPTS;\n+      opt_code arg_warned = no_warning;\n       location_t loc = EXPR_LOCATION (exp);\n       tree ptr = access.second.ptr;\n       if (*sizstr\n@@ -2080,7 +2080,7 @@ maybe_warn_rdwr_sizes (rdwr_map *rwm, tree fndecl, tree fntype, tree exp)\n \t\t\t       exp, sizidx + 1, sizstr))\n \t    arg_warned = OPT_Wstringop_overflow_;\n \n-\t  if (arg_warned != N_OPTS)\n+\t  if (arg_warned != no_warning)\n \t    {\n \t      append_attrname (access, attrstr, sizeof attrstr);\n \t      /* Remember a warning has been issued and avoid warning\n@@ -2152,7 +2152,7 @@ maybe_warn_rdwr_sizes (rdwr_map *rwm, tree fndecl, tree fntype, tree exp)\n \t\targ_warned = OPT_Wnonnull;\t\t\n \t    }\n \n-\t  if (arg_warned)\n+\t  if (arg_warned != no_warning)\n \t    {\n \t      append_attrname (access, attrstr, sizeof attrstr);\n \t      /* Remember a warning has been issued and avoid warning"}, {"sha": "e7b331a904c0fe35d20fb85f6a9f5b41e67ec433", "filename": "gcc/testsuite/gcc.dg/Wnonnull-7.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd51b344ca86c9673db0161d4a383cccdb2f429c/gcc%2Ftestsuite%2Fgcc.dg%2FWnonnull-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd51b344ca86c9673db0161d4a383cccdb2f429c/gcc%2Ftestsuite%2Fgcc.dg%2FWnonnull-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWnonnull-7.c?ref=fd51b344ca86c9673db0161d4a383cccdb2f429c", "patch": "@@ -0,0 +1,15 @@\n+/* PR middle-end/101216 - spurious notes for function calls\n+   { dg-do compile }\n+   { dg-options \"-O2 -w\" } */\n+\n+__attribute__ ((access (write_only, 1, 2))) char*\n+getcwd (char *, __SIZE_TYPE__);\n+\n+char* f (void)\n+{\n+  char a[8];\n+  return getcwd (0, 8);\n+}\n+\n+/* Expect no messages of any kind on output.\n+   { dg-bogus \"\" \"\" { target *-*-* } 0 } */"}]}