{"sha": "4404cf7dd98a5e662eb408a5fd6ad125f8814df0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQwNGNmN2RkOThhNWU2NjJlYjQwOGE1ZmQ2YWQxMjVmODgxNGRmMA==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2004-07-06T07:12:32Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2004-07-06T07:12:32Z"}, "message": "mcore.c (TARGET_SCHED_USE_DFA_PIPELINE_INTERFACE): Define.\n\n\t* config/mcore/mcore.c (TARGET_SCHED_USE_DFA_PIPELINE_INTERFACE):\n\tDefine.\n\t* config/mcore/mcore.md: Model memory latency with a simple DFA\n\tpipeline description instead of a define_function_unit.\n\nFrom-SVN: r84146", "tree": {"sha": "9f09734944a4b97cead8f4325a8962c01e9c0452", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f09734944a4b97cead8f4325a8962c01e9c0452"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4404cf7dd98a5e662eb408a5fd6ad125f8814df0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4404cf7dd98a5e662eb408a5fd6ad125f8814df0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4404cf7dd98a5e662eb408a5fd6ad125f8814df0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4404cf7dd98a5e662eb408a5fd6ad125f8814df0/comments", "author": null, "committer": null, "parents": [{"sha": "23f99379d3d3d445c15f7a3c2e29e44c06afb255", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23f99379d3d3d445c15f7a3c2e29e44c06afb255", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23f99379d3d3d445c15f7a3c2e29e44c06afb255"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "925592634dedbe812ea44d5be4ddbf0f50bcd7ac", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4404cf7dd98a5e662eb408a5fd6ad125f8814df0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4404cf7dd98a5e662eb408a5fd6ad125f8814df0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4404cf7dd98a5e662eb408a5fd6ad125f8814df0", "patch": "@@ -1,3 +1,10 @@\n+2004-07-06  Steven Bosscher  <stevenb@suse.de>\n+\n+\t* config/mcore/mcore.c (TARGET_SCHED_USE_DFA_PIPELINE_INTERFACE):\n+\tDefine.\n+\t* config/mcore/mcore.md: Model memory latency with a simple DFA\n+\tpipeline description instead of a define_function_unit.\n+\n 2004-07-05  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* langhooks-def.h (LANG_HOOKS_TREE_INLINING_VAR_MOD_TYPE_P): Extra arg."}, {"sha": "97d06d0786428f7dae558fdf1b3daa98f2f940d1", "filename": "gcc/config/mcore/mcore.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4404cf7dd98a5e662eb408a5fd6ad125f8814df0/gcc%2Fconfig%2Fmcore%2Fmcore.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4404cf7dd98a5e662eb408a5fd6ad125f8814df0/gcc%2Fconfig%2Fmcore%2Fmcore.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmcore%2Fmcore.c?ref=4404cf7dd98a5e662eb408a5fd6ad125f8814df0", "patch": "@@ -196,6 +196,9 @@ static bool       mcore_return_in_memory\t(tree, tree);\n #undef  TARGET_SETUP_INCOMING_VARARGS\n #define TARGET_SETUP_INCOMING_VARARGS\tmcore_setup_incoming_varargs\n \n+#undef TARGET_SCHED_USE_DFA_PIPELINE_INTERFACE\n+#define TARGET_SCHED_USE_DFA_PIPELINE_INTERFACE hook_int_void_1\n+\n struct gcc_target targetm = TARGET_INITIALIZER;\n \f\n /* Adjust the stack and return the number of bytes taken to do it.  */"}, {"sha": "32cb71c7c7799c0b904119a8b850b30fe2700026", "filename": "gcc/config/mcore/mcore.md", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4404cf7dd98a5e662eb408a5fd6ad125f8814df0/gcc%2Fconfig%2Fmcore%2Fmcore.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4404cf7dd98a5e662eb408a5fd6ad125f8814df0/gcc%2Fconfig%2Fmcore%2Fmcore.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmcore%2Fmcore.md?ref=4404cf7dd98a5e662eb408a5fd6ad125f8814df0", "patch": "@@ -41,15 +41,17 @@\n ;; calculations and the literal table placement into the assembler,\n ;; where their interactions can be managed in a single place.\n \n-; All MCORE instructions are two bytes long.\n+;; All MCORE instructions are two bytes long.\n \n (define_attr \"length\" \"\" (const_int 2))\n \n-;; (define_function_unit {name} {num-units} {n-users} {test}\n-;;                       {ready-delay} {issue-delay} [{conflict-list}])\n-\t\t\t\t      \n-\n-(define_function_unit \"memory\" 1 1 (eq_attr \"type\" \"load\") 2 0)\n+;; Scheduling.  We only model a simple load latency.\n+(define_insn_reservation \"any_insn\" 1\n+\t\t\t (eq_attr \"type\" \"!load\")\n+\t\t\t \"nothing\")\n+(define_insn_reservation \"memory\" 2\n+\t\t\t (eq_attr \"type\" \"load\")\n+\t\t\t \"nothing\")\n \n ;; -------------------------------------------------------------------------\n ;; Test and bit test"}]}