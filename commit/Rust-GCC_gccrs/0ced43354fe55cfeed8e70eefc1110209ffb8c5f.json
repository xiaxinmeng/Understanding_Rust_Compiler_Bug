{"sha": "0ced43354fe55cfeed8e70eefc1110209ffb8c5f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNlZDQzMzU0ZmU1NWNmZWVkOGU3MGVlZmMxMTEwMjA5ZmZiOGM1Zg==", "commit": {"author": {"name": "Ranjit Mathew", "email": "rmathew@hotmail.com", "date": "2003-01-24T21:57:00Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-01-24T21:57:00Z"}, "message": "re PR java/9253 (on win32, java.io.File.listFiles(\"C:\\\\\") returns pwd instead of the root content of C:)\n\n2003-01-24  Ranjit Mathew  <rmathew@hotmail.com>\n\n\tFixes PR java/9253:\n\t* java/io/natFileWin32.cc (performList): Append only \"*.*\"\n\tif the canonical file path already has a \"\\\" at the end.\n\nFrom-SVN: r61736", "tree": {"sha": "5744cb3ce8a7e666bd57a0020b2f569c94502fc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5744cb3ce8a7e666bd57a0020b2f569c94502fc8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ced43354fe55cfeed8e70eefc1110209ffb8c5f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ced43354fe55cfeed8e70eefc1110209ffb8c5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ced43354fe55cfeed8e70eefc1110209ffb8c5f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ced43354fe55cfeed8e70eefc1110209ffb8c5f/comments", "author": null, "committer": null, "parents": [{"sha": "1f37a5b273c35029f448d9c32277d42a45ff784f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f37a5b273c35029f448d9c32277d42a45ff784f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f37a5b273c35029f448d9c32277d42a45ff784f"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "36cac209702661c3f7444c64bf53437135392f59", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ced43354fe55cfeed8e70eefc1110209ffb8c5f/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ced43354fe55cfeed8e70eefc1110209ffb8c5f/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=0ced43354fe55cfeed8e70eefc1110209ffb8c5f", "patch": "@@ -1,3 +1,9 @@\n+2003-01-24  Ranjit Mathew  <rmathew@hotmail.com>\n+\n+\tFixes PR java/9253:\n+\t* java/io/natFileWin32.cc (performList): Append only \"*.*\"\n+\tif the canonical file path already has a \"\\\" at the end.\n+\n 2003-01-24  Tom Tromey  <tromey@redhat.com>\n \n \t* defineclass.cc (handleMethodsEnd): Precompute code for static"}, {"sha": "5245feb5a1e493dfbbb54db591eeff83a67b4a00", "filename": "libjava/java/io/natFileWin32.cc", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ced43354fe55cfeed8e70eefc1110209ffb8c5f/libjava%2Fjava%2Fio%2FnatFileWin32.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ced43354fe55cfeed8e70eefc1110209ffb8c5f/libjava%2Fjava%2Fio%2FnatFileWin32.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFileWin32.cc?ref=0ced43354fe55cfeed8e70eefc1110209ffb8c5f", "patch": "@@ -146,8 +146,10 @@ java::io::File::performList (java::io::FilenameFilter *filter,\n     return NULL;\n   char *buf = (char *) __builtin_alloca (JvGetStringUTFLength (canon) + 5);\n   jsize total = JvGetStringUTFRegion (canon, 0, canon->length(), buf);\n-  // FIXME?\n-  strcpy(&buf[total], \"\\\\*.*\");\n+  if (buf[total-1] == '\\\\')\n+    strcpy (&buf[total], \"*.*\");\n+  else\n+    strcpy (&buf[total], \"\\\\*.*\");\n \n   WIN32_FIND_DATA data;\n   HANDLE handle = FindFirstFile (buf, &data);"}]}