{"sha": "0c51836d012787ac19739f0fe1c61ef7b2af4231", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM1MTgzNmQwMTI3ODdhYzE5NzM5ZjBmZTFjNjFlZjdiMmFmNDIzMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-06-22T20:06:35Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-06-22T20:06:35Z"}, "message": "pthread_support.c (GC_get_thread_stack_base): Handle pthread_getattr_np failures.\n\n\t* pthread_support.c (GC_get_thread_stack_base): Handle\n\tpthread_getattr_np failures.\n\nFrom-SVN: r125957", "tree": {"sha": "8e8987effe179073c598fe3343d892dadff24a6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e8987effe179073c598fe3343d892dadff24a6a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c51836d012787ac19739f0fe1c61ef7b2af4231", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c51836d012787ac19739f0fe1c61ef7b2af4231", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c51836d012787ac19739f0fe1c61ef7b2af4231", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c51836d012787ac19739f0fe1c61ef7b2af4231/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5e33addbb6bf715965771b8bcadc038f60dfcb05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e33addbb6bf715965771b8bcadc038f60dfcb05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e33addbb6bf715965771b8bcadc038f60dfcb05"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "f140791a56f02047b7be2bda4dcffd9416b5ad31", "filename": "boehm-gc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c51836d012787ac19739f0fe1c61ef7b2af4231/boehm-gc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c51836d012787ac19739f0fe1c61ef7b2af4231/boehm-gc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FChangeLog?ref=0c51836d012787ac19739f0fe1c61ef7b2af4231", "patch": "@@ -1,3 +1,8 @@\n+2007-06-22  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* pthread_support.c (GC_get_thread_stack_base): Handle\n+\tpthread_getattr_np failures.\n+\n 2007-06-02  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* configure: Regenerate."}, {"sha": "f0a58c886a3a33e1368cd18de4999370bcaee551", "filename": "boehm-gc/pthread_support.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c51836d012787ac19739f0fe1c61ef7b2af4231/boehm-gc%2Fpthread_support.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c51836d012787ac19739f0fe1c61ef7b2af4231/boehm-gc%2Fpthread_support.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fpthread_support.c?ref=0c51836d012787ac19739f0fe1c61ef7b2af4231", "patch": "@@ -1135,7 +1135,13 @@ GC_PTR GC_get_thread_stack_base()\n   size_t stack_size;\n   \n   my_pthread = pthread_self();  \n-  pthread_getattr_np (my_pthread, &attr);\n+  if (pthread_getattr_np (my_pthread, &attr) != 0)\n+    {\n+#   ifdef DEBUG_THREADS\n+      GC_printf1(\"Can not determine stack base for attached thread\");\n+#   endif\n+      return 0;\n+    }\n   pthread_attr_getstack (&attr, (void **) &stack_addr, &stack_size);\n   pthread_attr_destroy (&attr);\n   "}]}