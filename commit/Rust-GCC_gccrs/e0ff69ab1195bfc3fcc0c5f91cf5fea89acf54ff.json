{"sha": "e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTBmZjY5YWIxMTk1YmZjM2ZjYzBjNWY5MWNmNWZlYTg5YWNmNTRmZg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-07-06T17:00:15Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-07-06T17:00:15Z"}, "message": "sh.md (*prefetch_i4): Disable for TARGET_VXWORKS_RTP.\n\ngcc/\n\t* config/sh/sh.md (*prefetch_i4): Disable for TARGET_VXWORKS_RTP.\n\t(prefetch): Likewise if \"pref\" would be used.\n\nFrom-SVN: r126423", "tree": {"sha": "8694454d55e417de26e72972c1b19c8b2940888c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8694454d55e417de26e72972c1b19c8b2940888c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff/comments", "author": null, "committer": null, "parents": [{"sha": "d6c2c77c91822a5c3c215187d148bbc75d08751b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6c2c77c91822a5c3c215187d148bbc75d08751b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6c2c77c91822a5c3c215187d148bbc75d08751b"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "7a9b7c971c5e9746a1ee91bde6776c8b5238aa74", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "patch": "@@ -1,3 +1,8 @@\n+2007-07-06  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* config/sh/sh.md (*prefetch_i4): Disable for TARGET_VXWORKS_RTP.\n+\t(prefetch): Likewise if \"pref\" would be used.\n+\n 2007-07-06  Josh Conner  <jconner@apple.com>\n \n \tPR middle-end/32602"}, {"sha": "e2d144e970a79f72d6071071c2ae229cc9d41362", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "patch": "@@ -13565,18 +13565,21 @@ mov.l\\\\t1f,r0\\\\n\\\\\n   [(prefetch (match_operand:SI 0 \"register_operand\" \"r\")\n              (match_operand:SI 1 \"const_int_operand\" \"n\")\n              (match_operand:SI 2 \"const_int_operand\" \"n\"))]\n-  \"TARGET_HARD_SH4 || TARGET_SHCOMPACT\"\n+  \"(TARGET_HARD_SH4 || TARGET_SHCOMPACT) && !TARGET_VXWORKS_RTP\"\n   \"*\n {\n   return \\\"pref @%0\\\";\n }\"\n   [(set_attr \"type\" \"other\")])\n \n+;; In user mode, the \"pref\" instruction will raise a RADDERR exception\n+;; for accesses to [0x80000000,0xffffffff].  This makes it an unsuitable\n+;; implementation of __builtin_prefetch for VxWorks RTPs.\n (define_expand \"prefetch\"\n   [(prefetch (match_operand 0 \"address_operand\" \"p\")\n              (match_operand:SI 1 \"const_int_operand\" \"n\")\n              (match_operand:SI 2 \"const_int_operand\" \"n\"))]\n-  \"TARGET_HARD_SH4 || TARGET_SH5\"\n+  \"(TARGET_HARD_SH4 || TARGET_SH5) && (TARGET_SHMEDIA || !TARGET_VXWORKS_RTP)\"\n   \"\n {\n   if (GET_MODE (operands[0]) != Pmode"}]}