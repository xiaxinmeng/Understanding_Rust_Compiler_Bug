{"sha": "f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ0YzFlYjdlMWM1NjQ1ZmI0ZTZjZmFkN2EzMjkxZWU3YTMxNzA2YQ==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2015-10-31T19:48:19Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2015-10-31T19:48:19Z"}, "message": "rs6000: Another PIC LRA fix\n\nThis one for TARGET_TOC && TARGET_MINIMAL_TOC.  Without it, r30 is not\nsaved in the prologue for functions that do not use r30, but the register\nis set later in the prologue anyhow.  This made all java tests fail.\n\n\n2015-10-31  Segher Boessenkool  <segher@kernel.crashing.org>\n\n\t* config/rs6000/rs6000.c (rs6000_reg_live_or_pic_offset_p): Use the\n\tsame condition for testing whether RS6000_PIC_OFFSET_TABLE_REGNUM is\n\tlive as for using it elsewhere, for TARGET_MINIMAL_TOC.\n\nFrom-SVN: r229633", "tree": {"sha": "8ccfe01cf58b4bf612178e510cc766ad8849e430", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ccfe01cf58b4bf612178e510cc766ad8849e430"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a/comments", "author": null, "committer": null, "parents": [{"sha": "ffea5536df746f1863a67306dcd5df98a61a4595", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffea5536df746f1863a67306dcd5df98a61a4595", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffea5536df746f1863a67306dcd5df98a61a4595"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "c4ad5e4ee8d4b5bf977280b12372568de050e996", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a", "patch": "@@ -1,6 +1,12 @@\n+2015-10-31  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config/rs6000/rs6000.c (rs6000_reg_live_or_pic_offset_p): Use the\n+\tsame condition for testing whether RS6000_PIC_OFFSET_TABLE_REGNUM is\n+\tlive as for using it elsewhere, for TARGET_MINIMAL_TOC.\n+\n 2015-10-31  Markus Trippelsdorf  <markus@trippelsdorf.de>\n \n-\t*ggc-common.c : Restore needed header for checking=release.\n+\t* ggc-common.c: Restore needed header for checking=release.\n \n 2015-10-31  Tom de Vries  <tom@codesourcery.com>\n "}, {"sha": "75ddaa2d3fc57cde020a8ad88df6d2bb043b8b5f", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=f44c1eb7e1c5645fb4e6cfad7a3291ee7a31706a", "patch": "@@ -22034,7 +22034,9 @@ rs6000_reg_live_or_pic_offset_p (int reg)\n           || (reg == RS6000_PIC_OFFSET_TABLE_REGNUM\n \t      && !TARGET_SINGLE_PIC_BASE\n               && ((DEFAULT_ABI == ABI_V4 && flag_pic != 0)\n-                  || (DEFAULT_ABI == ABI_DARWIN && flag_pic))));\n+                  || (DEFAULT_ABI == ABI_DARWIN && flag_pic)\n+\t\t  || (TARGET_TOC && TARGET_MINIMAL_TOC\n+\t\t      && get_pool_size () != 0))));\n }\n \n /* Return the first fixed-point register that is required to be"}]}