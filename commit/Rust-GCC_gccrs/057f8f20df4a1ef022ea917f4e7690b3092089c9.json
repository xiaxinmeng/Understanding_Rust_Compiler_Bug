{"sha": "057f8f20df4a1ef022ea917f4e7690b3092089c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDU3ZjhmMjBkZjRhMWVmMDIyZWE5MTdmNGU3NjkwYjMwOTIwODljOQ==", "commit": {"author": {"name": "Andi Kleen", "email": "ak@linux.intel.com", "date": "2013-04-23T03:10:02Z"}, "committer": {"name": "Andi Kleen", "email": "ak@gcc.gnu.org", "date": "2013-04-23T03:10:02Z"}, "message": "Add -flto-report-wpa\n\n-flto-report is useful, but it prints for every LTRANS pass and\nis very noisy and the main problem is often in WPA only.\n\nAdd a new -flto-report-wpa option that is only printed for WPA.\n\ngcc/:\n\n2013-04-22  Andi Kleen  <ak@linux.intel.com>\n\n\t* common.opt (-flto-report-wpa): Add.\n\t* doc/invoke.texi (-flto-report-wpa): Add.\n\t* lto/lto.c (do_whole_program_analysis): Check for lto-report-wpa.\n\t(lto_main): dito.\n\nFrom-SVN: r198172", "tree": {"sha": "eff52b355bd46487f372ab36d3838beee7409245", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eff52b355bd46487f372ab36d3838beee7409245"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/057f8f20df4a1ef022ea917f4e7690b3092089c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/057f8f20df4a1ef022ea917f4e7690b3092089c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/057f8f20df4a1ef022ea917f4e7690b3092089c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/057f8f20df4a1ef022ea917f4e7690b3092089c9/comments", "author": null, "committer": null, "parents": [{"sha": "86210f13cdab46fb3ac1327f7e016646684e5709", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86210f13cdab46fb3ac1327f7e016646684e5709", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86210f13cdab46fb3ac1327f7e016646684e5709"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "7500eb7bde421d1b5f1f52e709ecca2605b121ea", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=057f8f20df4a1ef022ea917f4e7690b3092089c9", "patch": "@@ -1,3 +1,10 @@\n+2013-04-22  Andi Kleen  <ak@linux.intel.com>\n+\n+\t* common.opt (-flto-report-wpa): Add.\n+\t* doc/invoke.texi (-flto-report-wpa): Add.\n+\t* lto/lto.c (do_whole_program_analysis): Check for lto-report-wpa.\n+\t(lto_main): dito.\n+\n 2013-04-22  Xinliang David Li  <davidxl@google.com>\n \n \t* graph.c (draw_cfg_node_succ_edges): Add branch probility as label."}, {"sha": "8be32e57d3e04df06c35989bc48ab01534b8b6ef", "filename": "gcc/common.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=057f8f20df4a1ef022ea917f4e7690b3092089c9", "patch": "@@ -1504,6 +1504,10 @@ flto-report\n Common Report Var(flag_lto_report) Init(0)\n Report various link-time optimization statistics\n \n+flto-report-wpa\n+Common Report Var(flag_lto_report_wpa) Init(0)\n+Report various link-time optimization statistics for WPA only\n+\n fmath-errno\n Common Report Var(flag_errno_math) Init(1) Optimization SetByCombined\n Set errno after built-in math functions"}, {"sha": "034845db1e9bcbe30e8e3c86327d0919cb31c80e", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=057f8f20df4a1ef022ea917f4e7690b3092089c9", "patch": "@@ -379,7 +379,7 @@ Objective-C and Objective-C++ Dialects}.\n -fivopts -fkeep-inline-functions -fkeep-static-consts @gol\n -floop-block -floop-interchange -floop-strip-mine -floop-nest-optimize @gol\n -floop-parallelize-all -flto -flto-compression-level @gol\n--flto-partition=@var{alg} -flto-report -fmerge-all-constants @gol\n+-flto-partition=@var{alg} -flto-report -flto-report-wpa -fmerge-all-constants @gol\n -fmerge-constants -fmodulo-sched -fmodulo-sched-allow-regmoves @gol\n -fmove-loop-invariants fmudflap -fmudflapir -fmudflapth -fno-branch-count-reg @gol\n -fno-default-inline @gol\n@@ -8455,6 +8455,10 @@ files in LTO mode (via @option{-flto}).\n \n Disabled by default.\n \n+@item -flto-report-wpa\n+Like @option{-flto-report}, but only print for the WPA phase of Link\n+Time Optimization.\n+\n @item -fuse-linker-plugin\n Enables the use of a linker plugin during link-time optimization.  This\n option relies on plugin support in the linker, which is available in gold"}, {"sha": "f19bbb5bc624e16aa78bc35443ae77a55bddb586", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/057f8f20df4a1ef022ea917f4e7690b3092089c9/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=057f8f20df4a1ef022ea917f4e7690b3092089c9", "patch": "@@ -3274,7 +3274,7 @@ do_whole_program_analysis (void)\n     }\n \n   /* Show the LTO report before launching LTRANS.  */\n-  if (flag_lto_report)\n+  if (flag_lto_report || (flag_wpa && flag_lto_report_wpa))\n     print_lto_report_1 ();\n   if (mem_report_wpa)\n     dump_memory_report (true);\n@@ -3402,7 +3402,7 @@ lto_main (void)\n \t     print_lto_report before launching LTRANS.  If LTRANS was\n \t     launched directly by the driver we would not need to do\n \t     this.  */\n-\t  if (flag_lto_report)\n+\t  if (flag_lto_report || (flag_wpa && flag_lto_report_wpa))\n \t    print_lto_report_1 ();\n \n \t  /* Record the global variables.  */"}]}