{"sha": "6a65ea5be3974fda8ad750906ae553914f1c5f0b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmE2NWVhNWJlMzk3NGZkYThhZDc1MDkwNmFlNTUzOTE0ZjFjNWYwYg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-07-18T17:18:55Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-07-18T17:18:55Z"}, "message": "For PR java/2812:\n\n\t* lex.h: Use HAVE_ICONV, not HAVE_ICONV_H.\n\t* lex.c (java_new_lexer): Use ICONV_CONST.\n\t(java_read_char): Likewise.\n\t* Make-lang.in (jc1$(exeext)): Link against LIBICONV.\n\t(jv-scan$(exeext)): Likewise.\n\nFrom-SVN: r44120", "tree": {"sha": "c730d43d82ddc3501070878cc145dfc13ced9f06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c730d43d82ddc3501070878cc145dfc13ced9f06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6a65ea5be3974fda8ad750906ae553914f1c5f0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a65ea5be3974fda8ad750906ae553914f1c5f0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a65ea5be3974fda8ad750906ae553914f1c5f0b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a65ea5be3974fda8ad750906ae553914f1c5f0b/comments", "author": null, "committer": null, "parents": [{"sha": "f91abfce7bf63f0071f10f2d07ef9e97561a5497", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f91abfce7bf63f0071f10f2d07ef9e97561a5497", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f91abfce7bf63f0071f10f2d07ef9e97561a5497"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "b3e9a2ad3757c809f07278bd93fd9fdda78d9607", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=6a65ea5be3974fda8ad750906ae553914f1c5f0b", "patch": "@@ -1,3 +1,12 @@\n+2001-07-18  Tom Tromey  <tromey@redhat.com>\n+\n+\tFor PR java/2812:\n+\t* lex.h: Use HAVE_ICONV, not HAVE_ICONV_H.\n+\t* lex.c (java_new_lexer): Use ICONV_CONST.\n+\t(java_read_char): Likewise.\n+\t* Make-lang.in (jc1$(exeext)): Link against LIBICONV.\n+\t(jv-scan$(exeext)): Likewise.\n+\n 2001-07-14  Tim Josling  <tej@melbpc.org.au>\n \n \t* check-init.c (check_init): Remove references to EXPON_EXPR."}, {"sha": "57682253a1ce3c55c3fdd87093bedca6c23fc663", "filename": "gcc/java/Make-lang.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FMake-lang.in?ref=6a65ea5be3974fda8ad750906ae553914f1c5f0b", "patch": "@@ -121,15 +121,15 @@ java-warn =\n jc1$(exeext): $(JAVA_OBJS) $(BACKEND) $(LIBDEPS)\n \trm -f $@\n \t$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@ \\\n-\t\t$(JAVA_OBJS) $(BACKEND) $(ZLIB) $(LIBS)\n+\t\t$(JAVA_OBJS) $(BACKEND) $(ZLIB) $(LIBICONV) $(LIBS)\n \n gcjh$(exeext): $(GCJH_OBJS) $(LIBDEPS)\n \trm -f $@\n \t$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@ $(GCJH_OBJS) $(ZLIB) $(LIBS)\n \n jv-scan$(exeext): $(JVSCAN_OBJS) $(LIBDEPS)\n \trm -f $@\n-\t$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@ $(JVSCAN_OBJS) $(LIBS)\n+\t$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@ $(JVSCAN_OBJS) $(LIBICONV) $(LIBS)\n \n jcf-dump$(exeext): $(JCFDUMP_OBJS) $(LIBDEPS)\n \trm -f $@"}, {"sha": "861b6eb54ef544dfbc08355f376eee809b3a7aa5", "filename": "gcc/java/lex.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flex.c?ref=6a65ea5be3974fda8ad750906ae553914f1c5f0b", "patch": "@@ -268,7 +268,8 @@ java_new_lexer (finput, encoding)\n \t      outp = (char *) &result;\n \t      outc = 2;\n \n-\t      r = iconv (handle, (const char **) &inp, &inc, &outp, &outc);\n+\t      r = iconv (handle, (ICONV_CONST char **) &inp, &inc,\n+\t\t\t &outp, &outc);\n \t      iconv_close (handle);\n \t      /* Conversion must be complete for us to use the result.  */\n \t      if (r != (size_t) -1 && inc == 0 && outc == 0)\n@@ -370,8 +371,8 @@ java_read_char (lex)\n \t      out_save = out_count;\n \t      inp = &lex->buffer[lex->first];\n \t      outp = &lex->out_buffer[lex->out_last];\n-\t      ir = iconv (lex->handle, (const char **) &inp, &inbytesleft,\n-\t\t\t  &outp, &out_count);\n+\t      ir = iconv (lex->handle, (ICONV_CONST char **) &inp,\n+\t\t\t  &inbytesleft, &outp, &out_count);\n \n \t      /* If we haven't read any bytes, then look to see if we\n \t\t have read a BOM.  */"}, {"sha": "e5d217deb1e3f13559e97c29bc1a8df66a397c2c", "filename": "gcc/java/lex.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2Flex.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a65ea5be3974fda8ad750906ae553914f1c5f0b/gcc%2Fjava%2Flex.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flex.h?ref=6a65ea5be3974fda8ad750906ae553914f1c5f0b", "patch": "@@ -1,5 +1,5 @@\n /* Language lexer definitions for the GNU compiler for the Java(TM) language.\n-   Copyright (C) 1997, 1998, 1999, 2000 Free Software Foundation, Inc.\n+   Copyright (C) 1997, 1998, 1999, 2000, 2001 Free Software Foundation, Inc.\n    Contributed by Alexandre Petit-Bianco (apbianco@cygnus.com)\n \n This file is part of GNU CC.\n@@ -35,7 +35,7 @@ extern int   lineno;\n /* A Unicode character, as read from the input file  */\n typedef unsigned short unicode_t;\n \n-#ifdef HAVE_ICONV_H\n+#ifdef HAVE_ICONV\n #include <iconv.h>\n #endif /* HAVE_ICONV */\n "}]}