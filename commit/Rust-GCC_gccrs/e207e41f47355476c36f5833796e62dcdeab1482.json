{"sha": "e207e41f47355476c36f5833796e62dcdeab1482", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTIwN2U0MWY0NzM1NTQ3NmMzNmY1ODMzNzk2ZTYyZGNkZWFiMTQ4Mg==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2011-07-26T18:03:54Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2011-07-26T18:03:54Z"}, "message": "re PR target/47369 ([x32] internal compiler error: in extract_insn, at recog.c:2109)\n\n\tPR target/47369\n\tPR target/49853\n\t* config/i386/i386.c (ix86_expand_move): Call convert_to_mode\n\tif legitimize_tls_address returned operand in wrong mode. Allow\n\tSImode and DImode symbolic operand for PIC.  Call convert_to_mode\n\tif legitimize_pic_address returned operand in wrong mode.\n\n\nCo-Authored-By: H.J. Lu <hongjiu.lu@intel.com>\n\nFrom-SVN: r176798", "tree": {"sha": "1256827d5e7cbd7da5a081d02c44ab9b75aa804b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1256827d5e7cbd7da5a081d02c44ab9b75aa804b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e207e41f47355476c36f5833796e62dcdeab1482", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e207e41f47355476c36f5833796e62dcdeab1482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e207e41f47355476c36f5833796e62dcdeab1482", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e207e41f47355476c36f5833796e62dcdeab1482/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "842eeb9b72e45297b0f6c8a712aa0ec03157b434", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/842eeb9b72e45297b0f6c8a712aa0ec03157b434", "html_url": "https://github.com/Rust-GCC/gccrs/commit/842eeb9b72e45297b0f6c8a712aa0ec03157b434"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "06e00746f8c8aa9b29c2e0672f30390243451a63", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e207e41f47355476c36f5833796e62dcdeab1482/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e207e41f47355476c36f5833796e62dcdeab1482/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e207e41f47355476c36f5833796e62dcdeab1482", "patch": "@@ -1,3 +1,13 @@\n+2011-07-26  Uros Bizjak  <ubizjak@gmail.com>\n+\t    H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/47369\n+\tPR target/49853\n+\t* config/i386/i386.c (ix86_expand_move): Call convert_to_mode\n+\tif legitimize_tls_address returned operand in wrong mode. Allow\n+\tSImode and DImode symbolic operand for PIC.  Call convert_to_mode\n+\tif legitimize_pic_address returned operand in wrong mode.\n+\n 2011-07-26  Martin Jambor  <mjambor@suse.cz>\n \n \t* tree-sra.c (tree_non_mode_aligned_mem_p): Strip conversions and"}, {"sha": "429cd6271cae9e0af5b050a41a7cd343aad6adbb", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e207e41f47355476c36f5833796e62dcdeab1482/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e207e41f47355476c36f5833796e62dcdeab1482/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=e207e41f47355476c36f5833796e62dcdeab1482", "patch": "@@ -15028,11 +15028,14 @@ ix86_expand_move (enum machine_mode mode, rtx operands[])\n \t\t\t\t     op0, 1, OPTAB_DIRECT);\n \t  if (tmp == op0)\n \t    return;\n+\t  if (GET_MODE (tmp) != mode)\n+\t    op1 = convert_to_mode (mode, tmp, 1);\n \t}\n     }\n \n   if ((flag_pic || MACHOPIC_INDIRECT) \n-       && mode == Pmode && symbolic_operand (op1, Pmode))\n+      && (mode == SImode || mode == DImode)\n+      && symbolic_operand (op1, mode))\n     {\n       if (TARGET_MACHO && !TARGET_64BIT)\n \t{\n@@ -15073,13 +15076,15 @@ ix86_expand_move (enum machine_mode mode, rtx operands[])\n       else\n \t{\n \t  if (MEM_P (op0))\n-\t    op1 = force_reg (Pmode, op1);\n-\t  else if (!TARGET_64BIT || !x86_64_movabs_operand (op1, Pmode))\n+\t    op1 = force_reg (mode, op1);\n+\t  else if (!TARGET_64BIT || !x86_64_movabs_operand (op1, mode))\n \t    {\n \t      rtx reg = can_create_pseudo_p () ? NULL_RTX : op0;\n \t      op1 = legitimize_pic_address (op1, reg);\n \t      if (op0 == op1)\n \t\treturn;\n+\t      if (GET_MODE (op1) != mode)\n+\t\top1 = convert_to_mode (mode, op1, 1);\n \t    }\n \t}\n     }"}]}