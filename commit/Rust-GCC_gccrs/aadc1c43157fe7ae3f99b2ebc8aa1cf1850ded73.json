{"sha": "aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFkYzFjNDMxNTdmZTdhZTNmOTliMmViYzhhYTFjZjE4NTBkZWQ3Mw==", "commit": {"author": {"name": "Michael Hudson-Doyle", "email": "michael.hudson@linaro.org", "date": "2014-02-19T15:32:54Z"}, "committer": {"name": "Yvan Roux", "email": "yroux@gcc.gnu.org", "date": "2014-02-19T15:32:54Z"}, "message": "re PR target/59799 (aarch64_pass_by_reference never passes arrays by value, contrary to ABI documentation)\n\n2014-02-19  Michael Hudson-Doyle  <michael.hudson@linaro.org>\n\n\t PR target/59799\n\t* config/aarch64/aarch64.c (aarch64_pass_by_reference): The rules for\n\tpassing arrays in registers are the same as for structs, so remove the\n\tspecial case for them.\n\nFrom-SVN: r207908", "tree": {"sha": "c9543ea77d86283640f055d449bad06ab2b60b43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9543ea77d86283640f055d449bad06ab2b60b43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73/comments", "author": null, "committer": null, "parents": [{"sha": "d7cb47b448ef3d183f006a2f5dd6ac1f77ec20ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7cb47b448ef3d183f006a2f5dd6ac1f77ec20ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7cb47b448ef3d183f006a2f5dd6ac1f77ec20ad"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "5007b7a4593ba628cb07ad6faaefdeef458390c3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73", "patch": "@@ -1,3 +1,10 @@\n+2014-02-19  Michael Hudson-Doyle  <michael.hudson@linaro.org>\n+\n+\t PR target/59799\n+\t* config/aarch64/aarch64.c (aarch64_pass_by_reference): The rules for\n+\tpassing arrays in registers are the same as for structs, so remove the\n+\tspecial case for them.\n+\n 2014-02-19  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* expr.c (expand_expr_real_1) <case VIEW_CONVERT_EXPR>: For a bit-field"}, {"sha": "901ad3de793c2dd6ca3a2458dc6268e56322400a", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=aadc1c43157fe7ae3f99b2ebc8aa1cf1850ded73", "patch": "@@ -1197,14 +1197,10 @@ aarch64_pass_by_reference (cumulative_args_t pcum ATTRIBUTE_UNUSED,\n   size = (mode == BLKmode && type)\n     ? int_size_in_bytes (type) : (int) GET_MODE_SIZE (mode);\n \n-  if (type)\n+  /* Aggregates are passed by reference based on their size.  */\n+  if (type && AGGREGATE_TYPE_P (type))\n     {\n-      /* Arrays always passed by reference.  */\n-      if (TREE_CODE (type) == ARRAY_TYPE)\n-\treturn true;\n-      /* Other aggregates based on their size.  */\n-      if (AGGREGATE_TYPE_P (type))\n-\tsize = int_size_in_bytes (type);\n+      size = int_size_in_bytes (type);\n     }\n \n   /* Variable sized arguments are always returned by reference.  */"}]}