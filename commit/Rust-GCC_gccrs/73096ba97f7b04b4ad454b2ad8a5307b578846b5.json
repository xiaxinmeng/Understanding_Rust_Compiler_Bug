{"sha": "73096ba97f7b04b4ad454b2ad8a5307b578846b5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzMwOTZiYTk3ZjdiMDRiNGFkNDU0YjJhZDhhNTMwN2I1Nzg4NDZiNQ==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2004-12-27T01:08:09Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2004-12-27T01:08:09Z"}, "message": "re PR target/17643 (ICE in propagate_one_insn, at flow.c:1582)\n\n\tPR target/17643\n\t* pa.c (pa_function_ok_for_sibcall): Sibcalls are not ok when\n\tgenerating code for the portable runtime.\n\nFrom-SVN: r92629", "tree": {"sha": "3e79d248bcb7719df5e09a37fe8d4212fcc4e51c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e79d248bcb7719df5e09a37fe8d4212fcc4e51c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73096ba97f7b04b4ad454b2ad8a5307b578846b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73096ba97f7b04b4ad454b2ad8a5307b578846b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73096ba97f7b04b4ad454b2ad8a5307b578846b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73096ba97f7b04b4ad454b2ad8a5307b578846b5/comments", "author": null, "committer": null, "parents": [{"sha": "e37ba56b5741e8a14268187423eebf002df81f66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e37ba56b5741e8a14268187423eebf002df81f66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e37ba56b5741e8a14268187423eebf002df81f66"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "2869df4370be13ec0d34e9c4704c9b4cbd452d4c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73096ba97f7b04b4ad454b2ad8a5307b578846b5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73096ba97f7b04b4ad454b2ad8a5307b578846b5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=73096ba97f7b04b4ad454b2ad8a5307b578846b5", "patch": "@@ -1,3 +1,9 @@\n+2004-12-26  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\tPR target/17643\n+\t* pa.c (pa_function_ok_for_sibcall): Sibcalls are not ok when\n+\tgenerating code for the portable runtime.\n+\n 2004-12-25  Richard Henderson  <rth@redhat.com>\n \n \t* expr.c (clear_storage): Validate CONST0_RTX extant.  Special case"}, {"sha": "07de1cc8ab728203851fe9d0c942a552884f6fb6", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73096ba97f7b04b4ad454b2ad8a5307b578846b5/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73096ba97f7b04b4ad454b2ad8a5307b578846b5/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=73096ba97f7b04b4ad454b2ad8a5307b578846b5", "patch": "@@ -8091,6 +8091,9 @@ pa_asm_output_mi_thunk (FILE *file, tree thunk_fndecl, HOST_WIDE_INT delta,\n static bool\n pa_function_ok_for_sibcall (tree decl, tree exp ATTRIBUTE_UNUSED)\n {\n+  if (TARGET_PORTABLE_RUNTIME)\n+    return false;\n+\n   /* Sibcalls are ok for TARGET_ELF32 as along as the linker is used in\n      single subspace mode and the call is not indirect.  As far as I know,\n      there is no operating system support for the multiple subspace mode.\n@@ -8108,9 +8111,8 @@ pa_function_ok_for_sibcall (tree decl, tree exp ATTRIBUTE_UNUSED)\n   if (TARGET_64BIT)\n     return false;\n \n-  return (decl\n-\t  && !TARGET_PORTABLE_RUNTIME\n-\t  && !TREE_PUBLIC (decl));\n+  /* Sibcalls are only ok within a translation unit.  */\n+  return (decl && !TREE_PUBLIC (decl));\n }\n \n /* Returns 1 if the 6 operands specified in OPERANDS are suitable for"}]}