{"sha": "065a36055e721213c820e12bcd3c0cffa4f8dcb7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDY1YTM2MDU1ZTcyMTIxM2M4MjBlMTJiY2QzYzBjZmZhNGY4ZGNiNw==", "commit": {"author": {"name": "Walter Lee", "email": "walt@tilera.com", "date": "2013-03-26T00:46:35Z"}, "committer": {"name": "Walter Lee", "email": "walt@gcc.gnu.org", "date": "2013-03-26T00:46:35Z"}, "message": "tilegx.md (floatsisf2): New pattern.\n\n2013-03-25  Walter Lee  <walt@tilera.com>\n\n\t* config/tilegx/tilegx.md (floatsisf2): New pattern.\n        (floatunssisf2): New pattern.\n        (floatsidf2): New pattern.\n        (floatunssidf2): New pattern.\n\nFrom-SVN: r197079", "tree": {"sha": "b9c9751a758c8b8e0076653ea74bc501fb4a021c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9c9751a758c8b8e0076653ea74bc501fb4a021c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/065a36055e721213c820e12bcd3c0cffa4f8dcb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/065a36055e721213c820e12bcd3c0cffa4f8dcb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/065a36055e721213c820e12bcd3c0cffa4f8dcb7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/065a36055e721213c820e12bcd3c0cffa4f8dcb7/comments", "author": {"login": "walt-tilera", "id": 6602917, "node_id": "MDQ6VXNlcjY2MDI5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/6602917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walt-tilera", "html_url": "https://github.com/walt-tilera", "followers_url": "https://api.github.com/users/walt-tilera/followers", "following_url": "https://api.github.com/users/walt-tilera/following{/other_user}", "gists_url": "https://api.github.com/users/walt-tilera/gists{/gist_id}", "starred_url": "https://api.github.com/users/walt-tilera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walt-tilera/subscriptions", "organizations_url": "https://api.github.com/users/walt-tilera/orgs", "repos_url": "https://api.github.com/users/walt-tilera/repos", "events_url": "https://api.github.com/users/walt-tilera/events{/privacy}", "received_events_url": "https://api.github.com/users/walt-tilera/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9b2732d64f2a383022b7893f3e35a498778bd402", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b2732d64f2a383022b7893f3e35a498778bd402", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b2732d64f2a383022b7893f3e35a498778bd402"}], "stats": {"total": 109, "additions": 109, "deletions": 0}, "files": [{"sha": "aef9c8b79315686cbf339140c648c658863a0248", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/065a36055e721213c820e12bcd3c0cffa4f8dcb7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/065a36055e721213c820e12bcd3c0cffa4f8dcb7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=065a36055e721213c820e12bcd3c0cffa4f8dcb7", "patch": "@@ -1,3 +1,10 @@\n+2013-03-25  Walter Lee  <walt@tilera.com>\n+\n+\t* config/tilegx/tilegx.md (floatsisf2): New pattern.\n+        (floatunssisf2): New pattern.\n+        (floatsidf2): New pattern.\n+        (floatunssidf2): New pattern.\n+\n 2013-03-25  Walter Lee  <walt@tilera.com>\n \n \t* config/tilegx/tilegx.c (expand_set_cint64_one_inst): Inline"}, {"sha": "8ec2687a599bb3b4d2d664af3e5d056c5aad062c", "filename": "gcc/config/tilegx/tilegx.md", "status": "modified", "additions": 102, "deletions": 0, "changes": 102, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/065a36055e721213c820e12bcd3c0cffa4f8dcb7/gcc%2Fconfig%2Ftilegx%2Ftilegx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/065a36055e721213c820e12bcd3c0cffa4f8dcb7/gcc%2Fconfig%2Ftilegx%2Ftilegx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ftilegx%2Ftilegx.md?ref=065a36055e721213c820e12bcd3c0cffa4f8dcb7", "patch": "@@ -2129,6 +2129,108 @@\n   \"\"\n   \"rotl\\t%0, %r1, %r2\")\n \n+;; Integer to floating point conversions\n+\n+(define_expand \"floatsisf2\"\n+  [(set (match_operand:SF 0 \"register_operand\" \"\")\n+\t(float:SI (match_operand:SI 1 \"register_operand\" \"\")))]\n+  \"\"\n+{\n+  rtx result = gen_lowpart (DImode, operands[0]);\n+  rtx a = operands[1];\n+\n+  rtx nega = gen_reg_rtx (SImode);\n+  rtx exp = gen_reg_rtx (DImode);\n+  rtx sign = gen_reg_rtx (DImode);\n+  rtx abs = gen_reg_rtx (DImode);\n+  rtx flags = gen_reg_rtx (DImode);\n+  rtx tmp1 = gen_reg_rtx (DImode);\n+  rtx tmp2 = gen_reg_rtx (DImode);\n+\n+  emit_move_insn (exp, GEN_INT (0x9e));\n+\n+  emit_insn (gen_negsi2 (nega, a));\n+\n+  emit_insn (gen_insn_cmplts_sisi (gen_lowpart (SImode, sign), a, const0_rtx));\n+  emit_insn (gen_insn_cmoveqz (abs, gen_lowpart (DImode, nega), sign,\n+\t\t\t       gen_lowpart (DImode, a)));\n+\n+  emit_insn (gen_insn_bfins (tmp1, exp, sign, GEN_INT (10), GEN_INT (10)));\n+  emit_insn (gen_insn_bfins (tmp2, tmp1, abs, GEN_INT (32), GEN_INT (63)));\n+  emit_insn (gen_insn_fsingle_pack1 (flags, tmp2));\n+  emit_insn (gen_insn_fsingle_pack2 (result, tmp2, flags));\n+  DONE;\n+})\n+  \n+(define_expand \"floatunssisf2\"\n+  [(set (match_operand:SF 0 \"register_operand\" \"\")\n+\t(float:SI (match_operand:SI 1 \"register_operand\" \"\")))]\n+  \"\"\n+{\n+  rtx result = gen_lowpart (DImode, operands[0]);\n+  rtx a = operands[1];\n+\n+  rtx exp = gen_reg_rtx (DImode);\n+  rtx flags = gen_reg_rtx (DImode);\n+  rtx tmp = gen_reg_rtx (DImode);\n+\n+  emit_move_insn (exp, GEN_INT (0x9e));\n+  emit_insn (gen_insn_bfins (tmp, exp, gen_lowpart (DImode, a),\n+                             GEN_INT (32), GEN_INT (63)));\n+  emit_insn (gen_insn_fsingle_pack1 (flags, tmp));\n+  emit_insn (gen_insn_fsingle_pack2 (result, tmp, flags));\n+  DONE;\n+})\n+\n+(define_expand \"floatsidf2\"\n+  [(set (match_operand:DF 0 \"register_operand\" \"\")\n+\t(float:SI (match_operand:SI 1 \"register_operand\" \"\")))]\n+  \"\"\n+{\n+  rtx result = gen_lowpart (DImode, operands[0]);\n+  rtx a = gen_lowpart (DImode, operands[1]);\n+\n+  rtx nega = gen_reg_rtx (DImode);\n+  rtx exp = gen_reg_rtx (DImode);\n+  rtx sign = gen_reg_rtx (DImode);\n+  rtx abs = gen_reg_rtx (DImode);\n+  rtx tmp1 = gen_reg_rtx (DImode);\n+  rtx tmp2 = gen_reg_rtx (DImode);\n+  rtx tmp3 = gen_reg_rtx (DImode);\n+\n+  emit_move_insn (exp, GEN_INT (0x21b00));\n+\n+  emit_insn (gen_negdi2 (nega, a));\n+\n+  emit_insn (gen_insn_cmplts_didi (sign, a, const0_rtx));\n+  emit_insn (gen_insn_cmovnez (abs, a, sign, nega));\n+\n+  emit_insn (gen_ashldi3 (tmp1, abs, GEN_INT (4)));\n+  emit_insn (gen_insn_bfins (tmp2, exp, sign, GEN_INT (20), GEN_INT (20)));\n+  emit_insn (gen_insn_fdouble_pack1 (tmp3, tmp1, tmp2));\n+  emit_insn (gen_insn_fdouble_pack2 (result, tmp3, tmp1, const0_rtx));\n+  DONE;\n+})\n+  \n+(define_expand \"floatunssidf2\"\n+  [(set (match_operand:DF 0 \"register_operand\" \"\")\n+\t(float:SI (match_operand:SI 1 \"register_operand\" \"\")))]\n+  \"\"\n+{\n+  rtx result = gen_lowpart (DImode, operands[0]);\n+  rtx a = gen_lowpart (DImode, operands[1]);\n+\n+  rtx exp = gen_reg_rtx (DImode);\n+  rtx tmp1 = gen_reg_rtx (DImode);\n+  rtx tmp2 = gen_reg_rtx (DImode);\n+\n+  emit_move_insn (exp, GEN_INT (0x21b00));\n+  emit_insn (gen_insn_bfins (tmp1, const0_rtx, a, GEN_INT (4), GEN_INT (35)));\n+  emit_insn (gen_insn_fdouble_pack1 (tmp2, tmp1, exp));\n+  emit_insn (gen_insn_fdouble_pack2 (result, tmp2, tmp1, const0_rtx));\n+  DONE;\n+})\n+  \n \f\n ;;\n ;; Multiplies"}]}