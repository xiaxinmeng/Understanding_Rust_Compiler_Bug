{"sha": "1274718f64c1aa5bd0ec72a658502d26db864220", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTI3NDcxOGY2NGMxYWE1YmQwZWM3MmE2NTg1MDJkMjZkYjg2NDIyMA==", "commit": {"author": {"name": "Chung-Lin Tang", "email": "cltang@codesourcery.com", "date": "2012-08-29T09:33:49Z"}, "committer": {"name": "Chung-Lin Tang", "email": "cltang@gcc.gnu.org", "date": "2012-08-29T09:33:49Z"}, "message": "mips.h (CRT_CALL_STATIC_FUNCTION): Add nomips16 asm directives, remove #ifndef __mips16 guards.\n\n2012-08-29  Chung-Lin Tang  <cltang@codesourcery.com>\n\n\t* config/mips/mips.h (CRT_CALL_STATIC_FUNCTION): Add nomips16 asm\n\tdirectives, remove #ifndef __mips16 guards.\n\t* config/mips/t-linux64 (MULTILIB_OSDIRNAMES): Change to use\n\tmapping style, add ../lib/mips16.\n\t(MULTILIB_OPTIONS,MULTILIB_DIRNAMES): Add mips16.\n\t(MULTILIB_EXCLUSIONS): Exclude mips16 when not -mabi=32.\n\nFrom-SVN: r190774", "tree": {"sha": "95ecbd26b0cecc0e3e0a75ae56bb06a2134cab3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95ecbd26b0cecc0e3e0a75ae56bb06a2134cab3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1274718f64c1aa5bd0ec72a658502d26db864220", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1274718f64c1aa5bd0ec72a658502d26db864220", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1274718f64c1aa5bd0ec72a658502d26db864220", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1274718f64c1aa5bd0ec72a658502d26db864220/comments", "author": {"login": "cltang", "id": 4055966, "node_id": "MDQ6VXNlcjQwNTU5NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4055966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cltang", "html_url": "https://github.com/cltang", "followers_url": "https://api.github.com/users/cltang/followers", "following_url": "https://api.github.com/users/cltang/following{/other_user}", "gists_url": "https://api.github.com/users/cltang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cltang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cltang/subscriptions", "organizations_url": "https://api.github.com/users/cltang/orgs", "repos_url": "https://api.github.com/users/cltang/repos", "events_url": "https://api.github.com/users/cltang/events{/privacy}", "received_events_url": "https://api.github.com/users/cltang/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "867a8345348ba8723f93182c858c77a31e404dcf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/867a8345348ba8723f93182c858c77a31e404dcf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/867a8345348ba8723f93182c858c77a31e404dcf"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "76738f344d5bdf37333e85bd7630f2523716fb8d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1274718f64c1aa5bd0ec72a658502d26db864220/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1274718f64c1aa5bd0ec72a658502d26db864220/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1274718f64c1aa5bd0ec72a658502d26db864220", "patch": "@@ -1,3 +1,12 @@\n+2012-08-29  Chung-Lin Tang  <cltang@codesourcery.com>\n+\n+\t* config/mips/mips.h (CRT_CALL_STATIC_FUNCTION): Add nomips16 asm\n+\tdirectives, remove #ifndef __mips16 guards.\n+\t* config/mips/t-linux64 (MULTILIB_OSDIRNAMES): Change to use\n+\tmapping style, add ../lib/mips16.\n+\t(MULTILIB_OPTIONS,MULTILIB_DIRNAMES): Add mips16.\n+\t(MULTILIB_EXCLUSIONS): Exclude mips16 when not -mabi=32.\n+\n 2012-08-28  Walter Lee  <walt@tilera.com>\n \t* confg/tilegx/tilegx.md: Fix code style.\n \t(*zero_extendsidi_truncdisi): Fix typo."}, {"sha": "090b6a3cede21ae25126655a3ae5f87fbddcece3", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1274718f64c1aa5bd0ec72a658502d26db864220/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1274718f64c1aa5bd0ec72a658502d26db864220/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=1274718f64c1aa5bd0ec72a658502d26db864220", "patch": "@@ -2793,7 +2793,6 @@ while (0)\n #define STORE_BY_PIECES_P(SIZE, ALIGN) \\\n   mips_store_by_pieces_p (SIZE, ALIGN)\n \f\n-#ifndef __mips16\n /* Since the bits of the _init and _fini function is spread across\n    many object files, each potentially with its own GP, we must assume\n    we need to load our GP.  We don't preserve $gp or $ra, since each\n@@ -2802,27 +2801,32 @@ while (0)\n #if (defined _ABIO32 && _MIPS_SIM == _ABIO32)\n #define CRT_CALL_STATIC_FUNCTION(SECTION_OP, FUNC)\t\\\n    asm (SECTION_OP \"\\n\\\n+\t.set push\\n\\\n+\t.set nomips16\\n\\\n \t.set noreorder\\n\\\n \tbal 1f\\n\\\n \tnop\\n\\\n 1:\t.cpload $31\\n\\\n \t.set reorder\\n\\\n \tjal \" USER_LABEL_PREFIX #FUNC \"\\n\\\n+\t.set pop\\n\\\n \t\" TEXT_SECTION_ASM_OP);\n #endif /* Switch to #elif when we're no longer limited by K&R C.  */\n #if (defined _ABIN32 && _MIPS_SIM == _ABIN32) \\\n    || (defined _ABI64 && _MIPS_SIM == _ABI64)\n #define CRT_CALL_STATIC_FUNCTION(SECTION_OP, FUNC)\t\\\n    asm (SECTION_OP \"\\n\\\n+\t.set push\\n\\\n+\t.set nomips16\\n\\\n \t.set noreorder\\n\\\n \tbal 1f\\n\\\n \tnop\\n\\\n 1:\t.set reorder\\n\\\n \t.cpsetup $31, $2, 1b\\n\\\n \tjal \" USER_LABEL_PREFIX #FUNC \"\\n\\\n+\t.set pop\\n\\\n \t\" TEXT_SECTION_ASM_OP);\n #endif\n-#endif\n \n #ifndef HAVE_AS_TLS\n #define HAVE_AS_TLS 0"}, {"sha": "420ee68269077abe58295d983d7386be7821a1ce", "filename": "gcc/config/mips/t-linux64", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1274718f64c1aa5bd0ec72a658502d26db864220/gcc%2Fconfig%2Fmips%2Ft-linux64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1274718f64c1aa5bd0ec72a658502d26db864220/gcc%2Fconfig%2Fmips%2Ft-linux64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-linux64?ref=1274718f64c1aa5bd0ec72a658502d26db864220", "patch": "@@ -18,4 +18,12 @@\n \n MULTILIB_OPTIONS = mabi=n32/mabi=32/mabi=64\n MULTILIB_DIRNAMES = n32 32 64\n-MULTILIB_OSDIRNAMES = ../lib32 ../lib ../lib64\n+MULTILIB_OSDIRNAMES  = mabi.n32=../lib32\n+MULTILIB_OSDIRNAMES += mabi.32=../lib\n+MULTILIB_OSDIRNAMES += mabi.64=../lib64\n+\n+# MIPS16 is currently only supported under O32\n+MULTILIB_OPTIONS += mips16\n+MULTILIB_DIRNAMES += mips16\n+MULTILIB_OSDIRNAMES += mabi.32/mips16=../lib/mips16\n+MULTILIB_EXCLUSIONS = !mabi=32/mips16"}]}