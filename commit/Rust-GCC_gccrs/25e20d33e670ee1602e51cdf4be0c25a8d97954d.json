{"sha": "25e20d33e670ee1602e51cdf4be0c25a8d97954d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjVlMjBkMzNlNjcwZWUxNjAyZTUxY2RmNGJlMGMyNWE4ZDk3OTU0ZA==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2009-11-25T05:31:07Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2009-11-25T05:31:07Z"}, "message": "graphite-blocking.c (scop_do_block): New.\n\n2009-11-18  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* graphite-blocking.c (scop_do_block): New.\n\t* graphite-poly.c (apply_poly_transforms): Call scop_do_block.\n\t* graphite-poly.h (scop_do_block): Declared.\n\nFrom-SVN: r154638", "tree": {"sha": "9c97dfb8266cc4f33365988c9766a8e4bc01629c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c97dfb8266cc4f33365988c9766a8e4bc01629c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/25e20d33e670ee1602e51cdf4be0c25a8d97954d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25e20d33e670ee1602e51cdf4be0c25a8d97954d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25e20d33e670ee1602e51cdf4be0c25a8d97954d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25e20d33e670ee1602e51cdf4be0c25a8d97954d/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e3bde9f4bc8a008a07e1caba789562d0abd627d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3bde9f4bc8a008a07e1caba789562d0abd627d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3bde9f4bc8a008a07e1caba789562d0abd627d6"}], "stats": {"total": 40, "additions": 35, "deletions": 5}, "files": [{"sha": "8ae2d55c71a9ec9f91df22d33fe7a5bdda5418b2", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=25e20d33e670ee1602e51cdf4be0c25a8d97954d", "patch": "@@ -1,3 +1,9 @@\n+2009-11-18  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-blocking.c (scop_do_block): New.\n+\t* graphite-poly.c (apply_poly_transforms): Call scop_do_block.\n+\t* graphite-poly.h (scop_do_block): Declared.\n+\n 2009-11-18  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* graphite-blocking.c (pbb_strip_mine_profitable_p): The parameter"}, {"sha": "3cf60e92001cd978d9b88fbc024b7ee28623798d", "filename": "gcc/graphite-blocking.c", "status": "modified", "additions": 27, "deletions": 1, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2Fgraphite-blocking.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2Fgraphite-blocking.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-blocking.c?ref=25e20d33e670ee1602e51cdf4be0c25a8d97954d", "patch": "@@ -255,7 +255,6 @@ lst_do_strip_mine (lst_p lst)\n   return res;\n }\n \n-\n /* Strip mines all the loops in SCOP.  Nothing profitable in all this:\n    this is just a driver function.  */\n \n@@ -280,4 +279,31 @@ scop_do_strip_mine (scop_p scop)\n   return transform_done;\n }\n \n+/* Loop blocks all the loops in SCOP.  Returns true when we manage to\n+   block some loops.  */\n+\n+bool\n+scop_do_block (scop_p scop)\n+{\n+  bool transform_done = false;\n+\n+  store_scattering (scop);\n+\n+  lst_do_strip_mine (SCOP_TRANSFORMED_SCHEDULE (scop));\n+  transform_done = scop_do_interchange (scop);\n+\n+  /* If we don't interchange loops, then the strip mine is not\n+     profitable, and the transform is not a loop blocking.  */\n+  if (!transform_done\n+      || !graphite_legal_transform (scop))\n+    {\n+      restore_scattering (scop);\n+      return false;\n+    }\n+  else if (dump_file && (dump_flags & TDF_DETAILS))\n+    fprintf (dump_file, \"SCoP will be loop blocked.\\n\");\n+\n+  return transform_done;\n+}\n+\n #endif"}, {"sha": "6ed6a846b3851d37c51a2f8dfef79d6e240c6fcb", "filename": "gcc/graphite-poly.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2Fgraphite-poly.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2Fgraphite-poly.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-poly.c?ref=25e20d33e670ee1602e51cdf4be0c25a8d97954d", "patch": "@@ -250,10 +250,7 @@ apply_poly_transforms (scop_p scop)\n     transform_done = true;\n \n   if (flag_loop_block)\n-    {\n-      transform_done |= scop_do_strip_mine (scop);\n-      transform_done |= scop_do_interchange (scop);\n-    }\n+    transform_done |= scop_do_block (scop);\n   else\n     {\n       if (flag_loop_strip_mine)"}, {"sha": "4912801c7a18efbcea3e4b81246cae0101c14f5e", "filename": "gcc/graphite-poly.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2Fgraphite-poly.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25e20d33e670ee1602e51cdf4be0c25a8d97954d/gcc%2Fgraphite-poly.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-poly.h?ref=25e20d33e670ee1602e51cdf4be0c25a8d97954d", "patch": "@@ -358,6 +358,7 @@ extern void debug_iteration_domain (poly_bb_p);\n extern void debug_iteration_domains (scop_p);\n extern bool scop_do_interchange (scop_p);\n extern bool scop_do_strip_mine (scop_p);\n+extern bool scop_do_block (scop_p);\n extern void pbb_number_of_iterations (poly_bb_p, graphite_dim_t, Value);\n extern void pbb_number_of_iterations_at_time (poly_bb_p, graphite_dim_t, Value);\n extern void pbb_remove_duplicate_pdrs (poly_bb_p);"}]}