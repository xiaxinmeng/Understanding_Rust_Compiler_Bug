{"sha": "38a53a0e25ac25724fae62ec6c340337805e6bc8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhhNTNhMGUyNWFjMjU3MjRmYWU2MmVjNmMzNDAzMzc4MDVlNmJjOA==", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@cavium.com", "date": "2011-12-13T20:00:18Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2011-12-13T20:00:18Z"}, "message": "mips-cpus.def: Add Octeon2.\n\n2011-12-13  Andrew Pinski  <apinski@cavium.com>\n            Adam Nemet  <anemet@caviumnetworks.com>\n\n\t* config/mips/mips-cpus.def: Add Octeon2.\n\t* config/mips/mips-tables.opt: Regenerate.\n\t* config/mips/mips.md (define_attr \"cpu\"): Add Octeon2.\n\t* config/mips/driver-native.c (host_detect_local_cpu): Support Octeon2 also.\n\t* config/mips/octeon.md (octeon_arith): Add Octeon2.\n\t(octeon_condmove): Likewise.\n\t(octeon_load): Rename to ..\n\t(octeon_load_o1): this.\n\t(octeon_load_o2): New reserve.\n\t(octeon_cop_o2): New reserve.\n\t(octeon_store):  Match Octeon2 also.\n\t(octeon_brj): Rename to ..\n\t(octeon_brj_o1): this.\n\t(octeon_brj_o2): New reserve.\n\t(octeon_imul3): Rename to ...\n\t(octeon_imul3_o1): this.\n\t(octeon_imul3_o2): New reserve.\n\t(octeon_imul): Rename to ...\n\t(octeon_imul_o1): this.\n\t(octeon_imul_o2): New reserve.\n\t(octeon_mfhilo): Rename to ...\n\t(octeon_mfhilo_o1): This.\n\t(octeon_mfhilo_o2): New reserve.\n\t(octeon_imadd): Rename to ...\n\t(octeon_imadd_o1): this.\n\t(octeon_imadd_o2): New reserve.\n\t(octeon_idiv): Rename to ..\n\t(octeon_idiv_o1): This.\n\t(octeon_idiv_o2_si): New reserve.\n\t(octeon_idiv_o2_di): Likewise.\n\t(octeon_unknown): Match Octeon2 also.\n\t* config/mips/mips.c (mips_rtx_cost_data): Add Octeon2 cost data.\n\t(mips_issue_rate): Octeon2 can issue 2 at a time.\n\t* config/mips/mips.h (TARGET_OCTEON): Match Octeon2 also.\n\t(TARGET_OCTEON2): New define.\n\t(TUNE_OCTEON): Match Octeon2 also.\n\n2011-12-13  Andrew Pinski  <apinski@cavium.com>\n            Adam Nemet  <anemet@caviumnetworks.com>\n\n\t* gcc.target/mips/mips.exp (mips_option_groups): Fix debug.  Add\n\t-fdump-* options.\n\t* gcc.target/mips/octeon2-pipe-1.c: New testcase.\n\t* gcc.target/mips/octeon-pipe-1.c: New testcase.\n\n\nCo-Authored-By: Adam Nemet <anemet@caviumnetworks.com>\n\nFrom-SVN: r182300", "tree": {"sha": "9a538648d131fc8ab5f0b00a0e37b83fb46a7aa5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9a538648d131fc8ab5f0b00a0e37b83fb46a7aa5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38a53a0e25ac25724fae62ec6c340337805e6bc8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38a53a0e25ac25724fae62ec6c340337805e6bc8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38a53a0e25ac25724fae62ec6c340337805e6bc8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38a53a0e25ac25724fae62ec6c340337805e6bc8/comments", "author": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e9619a8a00b43727bfb72d9b578f830053c02249", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9619a8a00b43727bfb72d9b578f830053c02249", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9619a8a00b43727bfb72d9b578f830053c02249"}], "stats": {"total": 169, "additions": 155, "deletions": 14}, "files": [{"sha": "06c6f7dd95c6ef4c41f3aba1737d7ee87f3b6433", "filename": "gcc/ChangeLog", "status": "modified", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -1,3 +1,43 @@\n+2011-12-13  Andrew Pinski  <apinski@cavium.com>\n+            Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* config/mips/mips-cpus.def: Add Octeon2.\n+\t* config/mips/mips-tables.opt: Regenerate.\n+\t* config/mips/mips.md (define_attr \"cpu\"): Add Octeon2.\n+\t* config/mips/driver-native.c (host_detect_local_cpu): Support Octeon2 also.\n+\t* config/mips/octeon.md (octeon_arith): Add Octeon2.\n+\t(octeon_condmove): Likewise.\n+\t(octeon_load): Rename to ..\n+\t(octeon_load_o1): this.\n+\t(octeon_load_o2): New reserve.\n+\t(octeon_cop_o2): New reserve.\n+\t(octeon_store):  Match Octeon2 also.\n+\t(octeon_brj): Rename to ..\n+\t(octeon_brj_o1): this.\n+\t(octeon_brj_o2): New reserve.\n+\t(octeon_imul3): Rename to ...\n+\t(octeon_imul3_o1): this.\n+\t(octeon_imul3_o2): New reserve.\n+\t(octeon_imul): Rename to ...\n+\t(octeon_imul_o1): this.\n+\t(octeon_imul_o2): New reserve.\n+\t(octeon_mfhilo): Rename to ...\n+\t(octeon_mfhilo_o1): This.\n+\t(octeon_mfhilo_o2): New reserve.\n+\t(octeon_imadd): Rename to ...\n+\t(octeon_imadd_o1): this.\n+\t(octeon_imadd_o2): New reserve.\n+\t(octeon_idiv): Rename to ..\n+\t(octeon_idiv_o1): This.\n+\t(octeon_idiv_o2_si): New reserve.\n+\t(octeon_idiv_o2_di): Likewise.\n+\t(octeon_unknown): Match Octeon2 also.\n+\t* config/mips/mips.c (mips_rtx_cost_data): Add Octeon2 cost data.\n+\t(mips_issue_rate): Octeon2 can issue 2 at a time.\n+\t* config/mips/mips.h (TARGET_OCTEON): Match Octeon2 also.\n+\t(TARGET_OCTEON2): New define.\n+\t(TUNE_OCTEON): Match Octeon2 also.\n+\n 2011-12-13  Richard Henderson  <rth@redhat.com>\n \n \t* config/sparc/tso.h: New file."}, {"sha": "f565c572e5479927d01d6a270485b8b615d94712", "filename": "gcc/config/mips/driver-native.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fdriver-native.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fdriver-native.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fdriver-native.c?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -125,6 +125,8 @@ host_detect_local_cpu (int argc, const char **argv)\n \t  cpu = \"sb1\";\n \telse if (strstr (buf, \"R5000\") != NULL)\n \t  cpu = \"r5000\";\n+\telse if (strstr (buf, \"Octeon II\") != NULL)\n+\t  cpu = \"octeon2\";\n \telse if (strstr (buf, \"Octeon\") != NULL)\n \t  cpu = \"octeon\";\n \tbreak;"}, {"sha": "98b915a1bd241a6ba97364a4d7234dfe8acdd22c", "filename": "gcc/config/mips/mips-cpus.def", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips-cpus.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips-cpus.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-cpus.def?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -146,3 +146,4 @@ MIPS_CPU (\"loongson3a\", PROCESSOR_LOONGSON_3A, 64, PTF_AVOID_BRANCHLIKELY)\n /* MIPS64 Release 2 processors.  */\n MIPS_CPU (\"octeon\", PROCESSOR_OCTEON, 65, PTF_AVOID_BRANCHLIKELY)\n MIPS_CPU (\"octeon+\", PROCESSOR_OCTEON, 65, PTF_AVOID_BRANCHLIKELY)\n+MIPS_CPU (\"octeon2\", PROCESSOR_OCTEON2, 65, PTF_AVOID_BRANCHLIKELY)"}, {"sha": "2d2c7f668fde79c8fb4f14801a5218a332f8a2f4", "filename": "gcc/config/mips/mips-tables.opt", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips-tables.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips-tables.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-tables.opt?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -606,3 +606,6 @@ Enum(mips_arch_opt_value) String(octeon) Value(80) Canonical\n EnumValue\n Enum(mips_arch_opt_value) String(octeon+) Value(81) Canonical\n \n+EnumValue\n+Enum(mips_arch_opt_value) String(octeon2) Value(82) Canonical\n+"}, {"sha": "3866c4648aa6ef463a3bc645a75457656d10201a", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -879,6 +879,16 @@ static const struct mips_rtx_cost_data\n     COSTS_N_INSNS (72),           /* int_div_di */\n                      1,\t\t  /* branch_cost */\n                      4\t\t  /* memory_latency */\n+  },\n+    /* Octeon II */\n+  {\n+    SOFT_FP_COSTS,\n+    COSTS_N_INSNS (6),            /* int_mult_si */\n+    COSTS_N_INSNS (6),            /* int_mult_di */\n+    COSTS_N_INSNS (18),           /* int_div_si */\n+    COSTS_N_INSNS (35),           /* int_div_di */\n+                     4,\t\t  /* branch_cost */\n+                     4\t\t  /* memory_latency */\n   },\n   { /* R3900 */\n     COSTS_N_INSNS (2),            /* fp_add */\n@@ -12038,6 +12048,7 @@ mips_issue_rate (void)\n     case PROCESSOR_R7000:\n     case PROCESSOR_R9000:\n     case PROCESSOR_OCTEON:\n+    case PROCESSOR_OCTEON2:\n       return 2;\n \n     case PROCESSOR_SB1:"}, {"sha": "55f9b07c416e0c52a4f2f2d92deb56b40f061d6f", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -222,7 +222,9 @@ struct mips_cpu_info {\n #define TARGET_MIPS5500             (mips_arch == PROCESSOR_R5500)\n #define TARGET_MIPS7000             (mips_arch == PROCESSOR_R7000)\n #define TARGET_MIPS9000             (mips_arch == PROCESSOR_R9000)\n-#define TARGET_OCTEON\t\t    (mips_arch == PROCESSOR_OCTEON)\n+#define TARGET_OCTEON\t\t    (mips_arch == PROCESSOR_OCTEON\t\\\n+\t\t\t\t     || mips_arch == PROCESSOR_OCTEON2)\n+#define TARGET_OCTEON2\t\t    (mips_arch == PROCESSOR_OCTEON2)\n #define TARGET_SB1                  (mips_arch == PROCESSOR_SB1\t\t\\\n \t\t\t\t     || mips_arch == PROCESSOR_SB1A)\n #define TARGET_SR71K                (mips_arch == PROCESSOR_SR71000)\n@@ -250,7 +252,8 @@ struct mips_cpu_info {\n #define TUNE_MIPS6000               (mips_tune == PROCESSOR_R6000)\n #define TUNE_MIPS7000               (mips_tune == PROCESSOR_R7000)\n #define TUNE_MIPS9000               (mips_tune == PROCESSOR_R9000)\n-#define TUNE_OCTEON\t\t    (mips_tune == PROCESSOR_OCTEON)\n+#define TUNE_OCTEON\t\t    (mips_tune == PROCESSOR_OCTEON\t\\\n+\t\t\t\t     || mips_tune == PROCESSOR_OCTEON2)\n #define TUNE_SB1                    (mips_tune == PROCESSOR_SB1\t\t\\\n \t\t\t\t     || mips_tune == PROCESSOR_SB1A)\n "}, {"sha": "a87348a7cc6a3d40732decbaae39043c52ba8915", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -42,6 +42,7 @@\n   loongson_3a\n   m4k\n   octeon\n+  octeon2\n   r3900\n   r6000\n   r4000"}, {"sha": "566beea26d52aafcae7388ec7853bda48441df05", "filename": "gcc/config/mips/octeon.md", "status": "modified", "additions": 60, "deletions": 11, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Focteon.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Fconfig%2Fmips%2Focteon.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Focteon.md?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -30,59 +30,108 @@\n (define_cpu_unit \"octeon_mult\" \"octeon_mult\")\n \n (define_insn_reservation \"octeon_arith\" 1\n-  (and (eq_attr \"cpu\" \"octeon\")\n+  (and (eq_attr \"cpu\" \"octeon,octeon2\")\n        (eq_attr \"type\" \"arith,const,logical,move,shift,signext,slt,nop\"))\n   \"octeon_pipe0 | octeon_pipe1\")\n \n (define_insn_reservation \"octeon_condmove\" 2\n-  (and (eq_attr \"cpu\" \"octeon\")\n+  (and (eq_attr \"cpu\" \"octeon,octeon2\")\n        (eq_attr \"type\" \"condmove\"))\n   \"octeon_pipe0 | octeon_pipe1\")\n \n-(define_insn_reservation \"octeon_load\" 2\n+(define_insn_reservation \"octeon_load_o1\" 2\n   (and (eq_attr \"cpu\" \"octeon\")\n        (eq_attr \"type\" \"load,prefetch,mtc,mfc\"))\n   \"octeon_pipe0\")\n \n+(define_insn_reservation \"octeon_load_o2\" 3\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"type\" \"load,prefetch\"))\n+  \"octeon_pipe0\")\n+\n+;; ??? memory-related cop0 reads are pipe0 with 3-cycle latency.\n+;; Front-end-related ones are 1-cycle on pipe1.  Assume front-end for now.\n+(define_insn_reservation \"octeon_cop_o2\" 1\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"type\" \"mtc,mfc\"))\n+  \"octeon_pipe1\")\n+\n (define_insn_reservation \"octeon_store\" 1\n-  (and (eq_attr \"cpu\" \"octeon\")\n+  (and (eq_attr \"cpu\" \"octeon,octeon2\")\n        (eq_attr \"type\" \"store\"))\n   \"octeon_pipe0\")\n \n-(define_insn_reservation \"octeon_brj\" 1\n+(define_insn_reservation \"octeon_brj_o1\" 1\n   (and (eq_attr \"cpu\" \"octeon\")\n        (eq_attr \"type\" \"branch,jump,call,trap\"))\n   \"octeon_pipe0\")\n \n-(define_insn_reservation \"octeon_imul3\" 5\n+(define_insn_reservation \"octeon_brj_o2\" 2\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"type\" \"branch,jump,call,trap\"))\n+  \"octeon_pipe1\")\n+\n+(define_insn_reservation \"octeon_imul3_o1\" 5\n   (and (eq_attr \"cpu\" \"octeon\")\n        (eq_attr \"type\" \"imul3,pop,clz\"))\n   \"(octeon_pipe0 | octeon_pipe1) + octeon_mult\")\n \n-(define_insn_reservation \"octeon_imul\" 2\n+(define_insn_reservation \"octeon_imul3_o2\" 6\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"type\" \"imul3,pop,clz\"))\n+  \"octeon_pipe1 + octeon_mult\")\n+\n+(define_insn_reservation \"octeon_imul_o1\" 2\n   (and (eq_attr \"cpu\" \"octeon\")\n        (eq_attr \"type\" \"imul,mthilo\"))\n   \"(octeon_pipe0 | octeon_pipe1) + octeon_mult, octeon_mult\")\n \n-(define_insn_reservation \"octeon_mfhilo\" 5\n+(define_insn_reservation \"octeon_imul_o2\" 1\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"type\" \"imul,mthilo\"))\n+  \"octeon_pipe1 + octeon_mult\")\n+\n+(define_insn_reservation \"octeon_mfhilo_o1\" 5\n   (and (eq_attr \"cpu\" \"octeon\")\n        (eq_attr \"type\" \"mfhilo\"))\n   \"(octeon_pipe0 | octeon_pipe1) + octeon_mult\")\n \n-(define_insn_reservation \"octeon_imadd\" 4\n+(define_insn_reservation \"octeon_mfhilo_o2\" 6\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"type\" \"mfhilo\"))\n+  \"octeon_pipe1 + octeon_mult\")\n+\n+(define_insn_reservation \"octeon_imadd_o1\" 4\n   (and (eq_attr \"cpu\" \"octeon\")\n        (eq_attr \"type\" \"imadd\"))\n   \"(octeon_pipe0 | octeon_pipe1) + octeon_mult, octeon_mult*3\")\n \n-(define_insn_reservation \"octeon_idiv\" 72\n+(define_insn_reservation \"octeon_imadd_o2\" 1\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"type\" \"imadd\"))\n+  \"octeon_pipe1 + octeon_mult\")\n+\n+(define_insn_reservation \"octeon_idiv_o1\" 72\n   (and (eq_attr \"cpu\" \"octeon\")\n        (eq_attr \"type\" \"idiv\"))\n   \"(octeon_pipe0 | octeon_pipe1) + octeon_mult, octeon_mult*71\")\n \n+(define_insn_reservation \"octeon_idiv_o2_si\" 18\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"mode\" \"SI\")\n+       (eq_attr \"type\" \"idiv\"))\n+  \"octeon_pipe1 + octeon_mult, octeon_mult*17\")\n+\n+(define_insn_reservation \"octeon_idiv_o2_di\" 35\n+  (and (eq_attr \"cpu\" \"octeon2\")\n+       (eq_attr \"mode\" \"DI\")\n+       (eq_attr \"type\" \"idiv\"))\n+  \"octeon_pipe1 + octeon_mult, octeon_mult*34\")\n+\n ;; Assume both pipes are needed for unknown and multiple-instruction\n ;; patterns.\n \n (define_insn_reservation \"octeon_unknown\" 1\n-  (and (eq_attr \"cpu\" \"octeon\")\n+  (and (eq_attr \"cpu\" \"octeon,octeon2\")\n        (eq_attr \"type\" \"unknown,multi\"))\n   \"octeon_pipe0 + octeon_pipe1\")"}, {"sha": "7a66fa41251d8c9b010e647aab5839c6fbb89474", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -1,3 +1,11 @@\n+2011-12-13  Andrew Pinski  <apinski@cavium.com>\n+            Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* gcc.target/mips/mips.exp (mips_option_groups): Fix debug.  Add\n+\t-fdump-* options.\n+\t* gcc.target/mips/octeon2-pipe-1.c: New testcase.\n+\t* gcc.target/mips/octeon-pipe-1.c: New testcase.\n+\n 2011-12-11  Fabien Ch\u00eane  <fabien@gcc.gnu.org>\n \n \tPR c++/14258"}, {"sha": "fd065ec9469c4760508b8efc39caefd2eebd959e", "filename": "gcc/testsuite/gcc.target/mips/mips.exp", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -226,7 +226,7 @@ set mips_option_groups {\n     abi \"-mabi=.*\"\n     addressing \"addressing=.*\"\n     arch \"-mips([1-5]|32.*|64.*)|-march=.*|isa(|_rev)(=|<=|>=).*\"\n-    debug \"-g*\"\n+    debug \"-g.*\"\n     dump_pattern \"-dp\"\n     endianness \"-E(L|B)|-me(l|b)\"\n     float \"-m(hard|soft)-float\"\n@@ -241,6 +241,7 @@ set mips_option_groups {\n     profiling \"-pg\"\n     small-data \"-G[0-9]+\"\n     warnings \"-w\"\n+    dump \"-fdump-.*\"\n }\n \n # Add -mfoo/-mno-foo options to mips_option_groups."}, {"sha": "bbcf7c8fcbbba253963123ebd17d6d61c744519c", "filename": "gcc/testsuite/gcc.target/mips/octeon-pipe-1.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Focteon-pipe-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Focteon-pipe-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Focteon-pipe-1.c?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -0,0 +1,11 @@\n+/* Check that we use the octeon pipeline description.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=octeon -fdump-rtl-sched2\" } */\n+\n+NOMIPS16 int f (int a, int b)\n+{\n+  return a / b;\n+}\n+\n+/* { dg-final { scan-rtl-dump \"octeon_mult\\\\*71\" \"sched2\" } }  */\n+/* { dg-final { cleanup-tree-dump \"sched2\" } }  */"}, {"sha": "da4f6321c73213bb0c9765c47d5efcb8a0b7c218", "filename": "gcc/testsuite/gcc.target/mips/octeon2-pipe-1.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Focteon2-pipe-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38a53a0e25ac25724fae62ec6c340337805e6bc8/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Focteon2-pipe-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Focteon2-pipe-1.c?ref=38a53a0e25ac25724fae62ec6c340337805e6bc8", "patch": "@@ -0,0 +1,11 @@\n+/* Check that we use the octeon2 pipeline description.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-rtl-sched2 -march=octeon2\" } */\n+\n+NOMIPS16 int f (int a, int b)\n+{\n+  return a / b;\n+}\n+\n+/* { dg-final { scan-rtl-dump \"octeon_mult\\\\*17\" \"sched2\" } }  */\n+/* { dg-final { cleanup-tree-dump \"sched2\" } }  */"}]}