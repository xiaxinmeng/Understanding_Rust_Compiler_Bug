{"sha": "99422caabd1d46992de8e373f3131efe84e03bcc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTk0MjJjYWFiZDFkNDY5OTJkZThlMzczZjMxMzFlZmU4NGUwM2JjYw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-07-16T17:36:43Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-07-16T17:36:43Z"}, "message": "class.c (resolve_address_of_overloaded_function): Don't emit an inform if the matching permerror returns false.\n\n/cp\n2018-07-16  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* class.c (resolve_address_of_overloaded_function): Don't emit an\n\tinform if the matching permerror returns false.\n\t* pt.c (check_specialization_namespace): Likewise.\n\n/testsuite\n2018-07-16  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/template/spec40.C: New.\n\t* g++.dg/parse/ptrmem8.C: Likewise.\n\nFrom-SVN: r262740", "tree": {"sha": "cf62dbc86063eab7deb46035983acf122527bfc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf62dbc86063eab7deb46035983acf122527bfc7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99422caabd1d46992de8e373f3131efe84e03bcc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99422caabd1d46992de8e373f3131efe84e03bcc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99422caabd1d46992de8e373f3131efe84e03bcc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99422caabd1d46992de8e373f3131efe84e03bcc/comments", "author": null, "committer": null, "parents": [{"sha": "20b47be02cc8a1bde28519b496a5acea5419c995", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20b47be02cc8a1bde28519b496a5acea5419c995", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20b47be02cc8a1bde28519b496a5acea5419c995"}], "stats": {"total": 53, "additions": 46, "deletions": 7}, "files": [{"sha": "6c1384a074f0ee9ba8491b3afe7e2dd4ac7313e3", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=99422caabd1d46992de8e373f3131efe84e03bcc", "patch": "@@ -1,3 +1,9 @@\n+2018-07-16  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* class.c (resolve_address_of_overloaded_function): Don't emit an\n+\tinform if the matching permerror returns false.\n+\t* pt.c (check_specialization_namespace): Likewise.\n+\n 2018-07-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/3698"}, {"sha": "3d155a55500f6e1cd046b5e4d1460cd6bf638c1f", "filename": "gcc/cp/class.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=99422caabd1d46992de8e373f3131efe84e03bcc", "patch": "@@ -7919,10 +7919,11 @@ resolve_address_of_overloaded_function (tree target_type,\n       if (!(complain & tf_error))\n \treturn error_mark_node;\n \n-      permerror (input_location, \"assuming pointer to member %qD\", fn);\n-      if (!explained)\n+      if (permerror (input_location, \"assuming pointer to member %qD\", fn)\n+\t  && !explained)\n \t{\n-\t  inform (input_location, \"(a pointer to member can only be formed with %<&%E%>)\", fn);\n+\t  inform (input_location, \"(a pointer to member can only be \"\n+\t\t  \"formed with %<&%E%>)\", fn);\n \t  explained = 1;\n \t}\n     }"}, {"sha": "b49dce08206859dd8294b158a7cb62e08c0a867d", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=99422caabd1d46992de8e373f3131efe84e03bcc", "patch": "@@ -800,10 +800,10 @@ check_specialization_namespace (tree tmpl)\n     return true;\n   else\n     {\n-      permerror (input_location,\n-\t\t \"specialization of %qD in different namespace\", tmpl);\n-      inform (DECL_SOURCE_LOCATION (tmpl),\n-\t      \"  from definition of %q#D\", tmpl);\n+      if (permerror (input_location,\n+\t\t     \"specialization of %qD in different namespace\", tmpl))\n+\tinform (DECL_SOURCE_LOCATION (tmpl),\n+\t\t\"  from definition of %q#D\", tmpl);\n       return false;\n     }\n }"}, {"sha": "4abf54158720469e61c35ba2049db3b5cf25b9b0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=99422caabd1d46992de8e373f3131efe84e03bcc", "patch": "@@ -1,3 +1,8 @@\n+2018-07-16  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/template/spec40.C: New.\n+\t* g++.dg/parse/ptrmem8.C: Likewise.\n+\n 2018-07-16  Ilya Leoshkevich  <iii@linux.ibm.com>\n \n \t* gcc.target/s390/mnop-mcount-m31-fpic.c: New testcase."}, {"sha": "00be3df37bb6f02ffa1ff26eb6c356748584dfc1", "filename": "gcc/testsuite/g++.dg/parse/ptrmem8.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fptrmem8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fptrmem8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fptrmem8.C?ref=99422caabd1d46992de8e373f3131efe84e03bcc", "patch": "@@ -0,0 +1,15 @@\n+// { dg-options \"-fpermissive -w\" }\n+\n+struct A\n+{\n+  template<int> void foo()\n+  {\n+    void (A::* fp)();\n+    fp = A::foo<0>;  // { dg-bogus \"pointer to member\" }\n+  }\n+};\n+\n+void bar()\n+{\n+  A().foo<0>();\n+}"}, {"sha": "4e29944514f5636a14a4dbc5b94853ddb81dffe1", "filename": "gcc/testsuite/g++.dg/template/spec40.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fspec40.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99422caabd1d46992de8e373f3131efe84e03bcc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fspec40.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fspec40.C?ref=99422caabd1d46992de8e373f3131efe84e03bcc", "patch": "@@ -0,0 +1,12 @@\n+// { dg-options \"-fpermissive -w\" }\n+\n+namespace N {\n+  template <typename T>\n+  struct S {\n+    void f() {}  // { dg-bogus \"from definition\" }\n+  };\n+}\n+\n+namespace K {\n+  template <> void N::S<char>::f() {}\n+}"}]}