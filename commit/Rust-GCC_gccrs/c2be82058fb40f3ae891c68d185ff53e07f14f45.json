{"sha": "c2be82058fb40f3ae891c68d185ff53e07f14f45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzJiZTgyMDU4ZmI0MGYzYWU4OTFjNjhkMTg1ZmY1M2UwN2YxNGY0NQ==", "commit": {"author": {"name": "Caroline Tice", "email": "cmtice@google.com", "date": "2021-03-12T15:34:36Z"}, "committer": {"name": "Caroline Tice", "email": "cmtice@google.com", "date": "2021-03-15T16:22:45Z"}, "message": "libstdc++-v3: Update VTV vars for libtool link commands [PR99172]\n\nThis fixes PR 99172\n\nCurrently when GCC is configured with --enable-vtable-verify, the\nlibstdc++-v3 Makefiles add \"-fvtable-verify=std\n-Wl,-u_vtable_map_vars_start,-u_vtable_map_vars_end\" to libtool link\ncommands. The \"-fvtable-verify=std\" piece causes alternate versions of\nlibtool (such as slibtool) to fail, unable to find \"-lvtv\" (GNU\nlibtool just removes that piece).\n\nThis patch updates the libstdc++-v3 Makefiles to not pass\n\"-fvtable-verify=std\" to the libtool link commands.", "tree": {"sha": "5777f4f8b9a0d5e9f9899b9fcc773b52f40f3085", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5777f4f8b9a0d5e9f9899b9fcc773b52f40f3085"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c2be82058fb40f3ae891c68d185ff53e07f14f45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2be82058fb40f3ae891c68d185ff53e07f14f45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2be82058fb40f3ae891c68d185ff53e07f14f45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2be82058fb40f3ae891c68d185ff53e07f14f45/comments", "author": {"login": "cmtice", "id": 5561162, "node_id": "MDQ6VXNlcjU1NjExNjI=", "avatar_url": "https://avatars.githubusercontent.com/u/5561162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmtice", "html_url": "https://github.com/cmtice", "followers_url": "https://api.github.com/users/cmtice/followers", "following_url": "https://api.github.com/users/cmtice/following{/other_user}", "gists_url": "https://api.github.com/users/cmtice/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmtice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmtice/subscriptions", "organizations_url": "https://api.github.com/users/cmtice/orgs", "repos_url": "https://api.github.com/users/cmtice/repos", "events_url": "https://api.github.com/users/cmtice/events{/privacy}", "received_events_url": "https://api.github.com/users/cmtice/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cmtice", "id": 5561162, "node_id": "MDQ6VXNlcjU1NjExNjI=", "avatar_url": "https://avatars.githubusercontent.com/u/5561162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmtice", "html_url": "https://github.com/cmtice", "followers_url": "https://api.github.com/users/cmtice/followers", "following_url": "https://api.github.com/users/cmtice/following{/other_user}", "gists_url": "https://api.github.com/users/cmtice/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmtice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmtice/subscriptions", "organizations_url": "https://api.github.com/users/cmtice/orgs", "repos_url": "https://api.github.com/users/cmtice/repos", "events_url": "https://api.github.com/users/cmtice/events{/privacy}", "received_events_url": "https://api.github.com/users/cmtice/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "541840b891d61ea70cddd046c96698bb70d7f52c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/541840b891d61ea70cddd046c96698bb70d7f52c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/541840b891d61ea70cddd046c96698bb70d7f52c"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "296dc680675f2591db1bf472216316415ed5f995", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2be82058fb40f3ae891c68d185ff53e07f14f45/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2be82058fb40f3ae891c68d185ff53e07f14f45/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c2be82058fb40f3ae891c68d185ff53e07f14f45", "patch": "@@ -1,3 +1,12 @@\n+2021-03-15  Caroline Tice  <cmtice@google.com>\n+\n+\tPR libstdc++/99172\n+\t* src/Makefile.am (AM_CXXFLAGS_PRE, AM_CXXFLAGS): Add\n+\tAM_CXXFLAGS_PRE with the old definition of AM_CXXFLAGS; make\n+\tAM_CXXFLAGS to be AM_CXXFLAGS_PRE with '-fvtable-verify=std'\n+\tfiltered out.\n+\t* src/Makefile.in: Regenerate.\n+\n 2021-03-11  Patrick Palka  <ppalka@redhat.com>\n \n \t* src/c++17/floating_to_chars.cc: Simplify the file as if"}, {"sha": "16f4cc6eff4ad4ff9eefe1986f0b7198f2753f06", "filename": "libstdc++-v3/src/Makefile.am", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2be82058fb40f3ae891c68d185ff53e07f14f45/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2be82058fb40f3ae891c68d185ff53e07f14f45/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am?ref=c2be82058fb40f3ae891c68d185ff53e07f14f45", "patch": "@@ -214,12 +214,14 @@ compatibility-condvar.o: compatibility-condvar.cc\n # set this option because CONFIG_CXXFLAGS has to be after\n # OPTIMIZE_CXXFLAGS on the compile line so that -O2 can be overridden\n # as the occasion calls for it.\n-AM_CXXFLAGS = \\\n+AM_CXXFLAGS_PRE = \\\n \t-std=gnu++98 \\\n \t$(glibcxx_compiler_pic_flag) \\\n \t$(XTEMPLATE_FLAGS) $(VTV_CXXFLAGS) \\\n \t$(WARN_CXXFLAGS) $(OPTIMIZE_CXXFLAGS) $(CONFIG_CXXFLAGS)\n \n+AM_CXXFLAGS = $(filter-out -fvtable-verify=std,$(AM_CXXFLAGS_PRE))\n+\n # Libtool notes\n \n # 1) In general, libtool expects an argument such as `--tag=CXX' when"}, {"sha": "4df5c829a7fb443c8acbeea771b0064796cc2697", "filename": "libstdc++-v3/src/Makefile.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2be82058fb40f3ae891c68d185ff53e07f14f45/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2be82058fb40f3ae891c68d185ff53e07f14f45/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in?ref=c2be82058fb40f3ae891c68d185ff53e07f14f45", "patch": "@@ -578,12 +578,13 @@ libstdc___la_LINK = $(CXXLINK) $(libstdc___la_LDFLAGS) $(lt_host_flags)\n # set this option because CONFIG_CXXFLAGS has to be after\n # OPTIMIZE_CXXFLAGS on the compile line so that -O2 can be overridden\n # as the occasion calls for it.\n-AM_CXXFLAGS = \\\n+AM_CXXFLAGS_PRE = \\\n \t-std=gnu++98 \\\n \t$(glibcxx_compiler_pic_flag) \\\n \t$(XTEMPLATE_FLAGS) $(VTV_CXXFLAGS) \\\n \t$(WARN_CXXFLAGS) $(OPTIMIZE_CXXFLAGS) $(CONFIG_CXXFLAGS)\n \n+AM_CXXFLAGS = $(filter-out -fvtable-verify=std,$(AM_CXXFLAGS_PRE))\n \n # Libtool notes\n "}]}