{"sha": "32154c8905a704e01c328542f2d4cef627c21b81", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIxNTRjODkwNWE3MDRlMDFjMzI4NTQyZjJkNGNlZjYyN2MyMWI4MQ==", "commit": {"author": {"name": "Olga Golovanevsky", "email": "olga@gcc.gnu.org", "date": "2007-10-24T12:48:41Z"}, "committer": {"name": "Olga Golovanevsky", "email": "olga@gcc.gnu.org", "date": "2007-10-24T12:48:41Z"}, "message": "Fogot to commit ipa-struct-reorg.c ipa-struct-reorg.h.\n\nFrom-SVN: r129601", "tree": {"sha": "4bbf8e78ca2e6a411fce3e9cbcd0288f745283a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4bbf8e78ca2e6a411fce3e9cbcd0288f745283a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32154c8905a704e01c328542f2d4cef627c21b81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32154c8905a704e01c328542f2d4cef627c21b81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32154c8905a704e01c328542f2d4cef627c21b81", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32154c8905a704e01c328542f2d4cef627c21b81/comments", "author": null, "committer": null, "parents": [{"sha": "e1dc98b235434b298aaa3672e0f716721d98bd36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1dc98b235434b298aaa3672e0f716721d98bd36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1dc98b235434b298aaa3672e0f716721d98bd36"}], "stats": {"total": 4045, "additions": 4045, "deletions": 0}, "files": [{"sha": "9a04289f22444ffb6e90b40a623764e4f513a702", "filename": "gcc/ipa-struct-reorg.c", "status": "added", "additions": 3932, "deletions": 0, "changes": 3932, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32154c8905a704e01c328542f2d4cef627c21b81/gcc%2Fipa-struct-reorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32154c8905a704e01c328542f2d4cef627c21b81/gcc%2Fipa-struct-reorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-struct-reorg.c?ref=32154c8905a704e01c328542f2d4cef627c21b81"}, {"sha": "6f4c5b83d75c85db76e5ad2329507b1ee233f46e", "filename": "gcc/ipa-struct-reorg.h", "status": "added", "additions": 113, "deletions": 0, "changes": 113, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32154c8905a704e01c328542f2d4cef627c21b81/gcc%2Fipa-struct-reorg.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32154c8905a704e01c328542f2d4cef627c21b81/gcc%2Fipa-struct-reorg.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-struct-reorg.h?ref=32154c8905a704e01c328542f2d4cef627c21b81", "patch": "@@ -0,0 +1,113 @@\n+/* Struct-reorg optimization.\n+   Copyright (C) 2002, 2003-2007 Free Software Foundation, Inc.\n+   Contributed by Olga Golovanevsky <olga@il.ibm.com>\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify\n+under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2 of the License, or\n+(at your option) any later version.\n+\n+GCC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; if not, write to the Free Software\n+Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA\n+02110-1301, USA.  */\n+\n+#ifndef IPA_STRUCT_REORG_H\n+#define IPA_STRUCT_REORG_H\n+\n+/* This file contains data structures and interfaces required\n+   for struct-reorg optimizations.  */\n+\n+/* An access site of the structure field.\n+   We consider an access to be of the following form:\n+\n+   D.2166_21 = i.6_20 * 8;\n+   D.2167_22 = (struct str_t *) D.2166_21;\n+   D.2168_24 = D.2167_22 + p.5_23;\n+   D.2169_25 = D.2168_24->b;\n+*/\n+\n+struct field_access_site\n+{\n+  /* Statement in which the access site occurs.  */\n+  tree stmt;             /* D.2169_25 = D.2168_24->b;  */\n+  tree comp_ref;         /* D.2168_24->b  */\n+  tree field_decl;       /* b */\n+  tree ref;              /* D.2168_24  */\n+  tree num;              /* i.6_20  */\n+  tree offset;           /* D2167_22  */\n+  tree base;             /* p.5_23  */\n+  tree ref_def_stmt;     /* D.2168_24 = D.2167_22 + p.5_23;  */\n+  tree cast_stmt;        /* D.2167_22 = (struct str_t *) D.2166_21;\n+                            This statement is not always present.  */\n+};\n+\n+/* A non-field structure access site.  */\n+struct access_site\n+{\n+  /* A statement in which the access site occurs.  */\n+  tree stmt;\n+  /* A list of structure variables in the access site.  */\n+  VEC (tree, heap) *vars;\n+};\n+\n+/* A field of the structure.  */\n+struct field_entry\n+{\n+  /* A field index.  */\n+  int index;\n+  /* Number of times the field is accessed (according to profiling).  */\n+  gcov_type count;\n+  tree decl;\n+  /* A type of a new structure this field belongs to.  */\n+  tree field_mapping;\n+  htab_t acc_sites;\n+};\n+\n+/* This structure represents a result of the structure peeling.\n+   The original structure is decomposed into substructures, or clusters.  */\n+struct field_cluster\n+{\n+  /* A bitmap of field indices. The set bit indicates that the field \n+     corresponding to it is a part of this cluster.  */\n+  sbitmap fields_in_cluster;\n+  struct field_cluster *sibling;\n+};\n+\n+/* An information about an individual structure type (RECORD_TYPE) required\n+   by struct-reorg optimizations to perform a transformation.  */\n+struct data_structure\n+{\n+\n+  /* A main variant of the structure type.  */\n+  tree decl;\n+\n+  /* Number of fields in the structure.  */\n+  int num_fields;\n+\n+  /* A structure access count collected through profiling.  */\n+  gcov_type count;\n+\n+  /* An array of the structure fields, indexed by field ID.  */\n+  struct field_entry *fields;\n+\n+  /* Non-field accesses of the structure.  */\n+  htab_t accs;\n+\n+  /* A data structure representing a reorganization decision.  */\n+  struct field_cluster *struct_clustering;\n+\n+  /* New types to replace an the original structure type.  */\n+  VEC(tree, heap) *new_types;\n+};\n+\n+typedef struct data_structure * d_str;\n+\n+#endif /* IPA_STRUCT_REORG_H */"}]}