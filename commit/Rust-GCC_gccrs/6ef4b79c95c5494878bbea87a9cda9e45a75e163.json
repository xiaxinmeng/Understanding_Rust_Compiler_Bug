{"sha": "6ef4b79c95c5494878bbea87a9cda9e45a75e163", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmVmNGI3OWM5NWM1NDk0ODc4YmJlYTg3YTljZGE5ZTQ1YTc1ZTE2Mw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2003-04-28T23:02:46Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-04-28T23:02:46Z"}, "message": "std_streambuf.h (_M_buf_size): is currently used only for basic_filebuf, therefore move it there.\n\n2003-04-28  Paolo Carlini  <pcarlini@unitus.it>\n\n\t* include/std/std_streambuf.h (_M_buf_size): is currently\n\tused only for basic_filebuf, therefore move it there.\n\t(basic_streambuf(), ~basic_streambuf()): Adjust.\n\t* include/std/std_fstream.h (_M_buf_size): Moved here.\n\t* include/bits/fstream.tcc (basic_filebuf()): Adjust.\n\nFrom-SVN: r66191", "tree": {"sha": "120c0218b0a24188c850f323a7820c110f919815", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/120c0218b0a24188c850f323a7820c110f919815"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ef4b79c95c5494878bbea87a9cda9e45a75e163", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef4b79c95c5494878bbea87a9cda9e45a75e163", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ef4b79c95c5494878bbea87a9cda9e45a75e163", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef4b79c95c5494878bbea87a9cda9e45a75e163/comments", "author": null, "committer": null, "parents": [{"sha": "44b84cc9182bffe8b7d751fe4ca1d90ebcce512d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44b84cc9182bffe8b7d751fe4ca1d90ebcce512d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44b84cc9182bffe8b7d751fe4ca1d90ebcce512d"}], "stats": {"total": 31, "additions": 19, "deletions": 12}, "files": [{"sha": "f8fd27b0e03d67ef6f2ced96abfe0fbb19d72af7", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=6ef4b79c95c5494878bbea87a9cda9e45a75e163", "patch": "@@ -1,3 +1,11 @@\n+2003-04-28  Paolo Carlini  <pcarlini@unitus.it>\n+\n+\t* include/std/std_streambuf.h (_M_buf_size): is currently\n+\tused only for basic_filebuf, therefore move it there.\n+\t(basic_streambuf(), ~basic_streambuf()): Adjust.\n+\t* include/std/std_fstream.h (_M_buf_size): Moved here.\n+\t* include/bits/fstream.tcc (basic_filebuf()): Adjust.\n+\n 2003-04-28  Paolo Carlini  <pcarlini@unitus.it>\n \n \t* include/bits/streambuf.tcc (__copy_streambufs): Don't use"}, {"sha": "c03c0e5b4fd4dde9d9dd4a4fef49ac0fb3d781a3", "filename": "libstdc++-v3/include/bits/fstream.tcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc?ref=6ef4b79c95c5494878bbea87a9cda9e45a75e163", "patch": "@@ -76,7 +76,7 @@ namespace std\n     basic_filebuf<_CharT, _Traits>::\n     basic_filebuf() : __streambuf_type(), _M_file(&_M_lock), \n     _M_state_cur(__state_type()), _M_state_beg(__state_type()), \n-    _M_buf_allocated(false), _M_last_overflowed(false),\n+    _M_buf_size(BUFSIZ), _M_buf_allocated(false), _M_last_overflowed(false),\n     _M_pback_cur_save(0), _M_pback_end_save(0), _M_pback_init(false)\n     { this->_M_buf_unified = true; }\n "}, {"sha": "8c388bdfb3b610738f7e05cbeebacc79247799d8", "filename": "libstdc++-v3/include/std/std_fstream.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_fstream.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_fstream.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_fstream.h?ref=6ef4b79c95c5494878bbea87a9cda9e45a75e163", "patch": "@@ -45,6 +45,7 @@\n #include <istream>\n #include <ostream>\n #include <locale>\t// For codecvt\n+#include <cstdio>       // For SEEK_SET, SEEK_CUR, SEEK_END, BUFSIZ     \n #include <bits/basic_file.h>\n #include <bits/gthr.h>\n \n@@ -113,6 +114,13 @@ namespace std\n       __state_type\t\t_M_state_cur;\n       __state_type \t\t_M_state_beg;\n \n+      /**\n+       *  @if maint\n+       *  Actual size of internal buffer.\n+       *  @endif\n+      */\n+      size_t\t\t\t_M_buf_size;\n+\n       // Set iff _M_buf is allocated memory from _M_allocate_internal_buffer.\n       /**\n        *  @if maint\n@@ -209,6 +217,7 @@ namespace std\n       ~basic_filebuf()\n       {\n \tthis->close();\n+\t_M_buf_size = 0;\n \t_M_last_overflowed = false;\n       }\n "}, {"sha": "bfb8e3fd51450e669cdd35f842784e00c617895e", "filename": "libstdc++-v3/include/std/std_streambuf.h", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_streambuf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef4b79c95c5494878bbea87a9cda9e45a75e163/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_streambuf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_streambuf.h?ref=6ef4b79c95c5494878bbea87a9cda9e45a75e163", "patch": "@@ -44,7 +44,6 @@\n \n #include <bits/c++config.h>\n #include <iosfwd>\n-#include <cstdio> \t// For SEEK_SET, SEEK_CUR, SEEK_END\n #include <bits/localefwd.h>\n #include <bits/ios_base.h>\n \n@@ -170,14 +169,6 @@ namespace std\n       */\n       char_type*\t\t_M_buf; \t\n \n-      /**\n-       *  @if maint\n-       *  Actual size of allocated internal buffer. Unused for sstreams,\n-       *  which have readily available _M_string.capacity().\n-       *  @endif\n-      */\n-      size_t\t\t\t_M_buf_size;\n-\n       /**\n        *  @if maint\n        *  True iff _M_in_* and _M_out_* buffers should always point to\n@@ -278,7 +269,6 @@ namespace std\n       ~basic_streambuf() \n       {\n \t_M_buf_unified = false;\n-\t_M_buf_size = 0;\n \t_M_mode = ios_base::openmode(0);\n       }\n \n@@ -477,7 +467,7 @@ namespace std\n        *  - this is not an error\n       */\n       basic_streambuf()\n-      : _M_buf(NULL), _M_buf_size(BUFSIZ), _M_buf_unified(false),\n+      : _M_buf(NULL), _M_buf_unified(false),\n       _M_in_beg(0), _M_in_cur(0), _M_in_end(0), _M_out_beg(0),\n       _M_out_cur(0), _M_out_end(0), _M_out_lim(0),\n       _M_mode(ios_base::openmode(0)), _M_buf_locale(locale()) "}]}