{"sha": "26d061fc233db50e5b599a10d092dfed8417a023", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjZkMDYxZmMyMzNkYjUwZTViNTk5YTEwZDA5MmRmZWQ4NDE3YTAyMw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-10T19:01:25Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-10T19:01:25Z"}, "message": "Don't crash on make of slice of erroneous type.\n\nFrom-SVN: r170019", "tree": {"sha": "1a40152af330f885c3bf7676ea003eec398b9236", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a40152af330f885c3bf7676ea003eec398b9236"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26d061fc233db50e5b599a10d092dfed8417a023", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26d061fc233db50e5b599a10d092dfed8417a023", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26d061fc233db50e5b599a10d092dfed8417a023", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26d061fc233db50e5b599a10d092dfed8417a023/comments", "author": null, "committer": null, "parents": [{"sha": "ea4c3e656e251f9a44df38cb54c2334cae58936d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea4c3e656e251f9a44df38cb54c2334cae58936d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea4c3e656e251f9a44df38cb54c2334cae58936d"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "16563bbdda94fea9baab4fd409793fb9400f1f6d", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26d061fc233db50e5b599a10d092dfed8417a023/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26d061fc233db50e5b599a10d092dfed8417a023/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=26d061fc233db50e5b599a10d092dfed8417a023", "patch": "@@ -4565,6 +4565,8 @@ Array_type::do_make_expression_tree(Translate_context* context,\n   tree element_size_tree = TYPE_SIZE_UNIT(element_type_tree);\n \n   tree value = this->element_type_->get_init_tree(gogo, true);\n+  if (value == error_mark_node)\n+    return error_mark_node;\n \n   // The first argument is the number of elements, the optional second\n   // argument is the capacity.\n@@ -4688,7 +4690,7 @@ Array_type::do_make_expression_tree(Translate_context* context,\n   tree range = build2(RANGE_EXPR, sizetype, size_zero_node, max);\n   tree space_init = build_constructor_single(array_type, range, value);\n \n-  return build2(COMPOUND_EXPR, TREE_TYPE(space),\n+  return build2(COMPOUND_EXPR, TREE_TYPE(constructor),\n \t\tbuild2(MODIFY_EXPR, void_type_node,\n \t\t       build_fold_indirect_ref(value_pointer),\n \t\t       space_init),"}]}