{"sha": "ae7a543957fe07a61cb75aca311c723148597dd8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWU3YTU0Mzk1N2ZlMDdhNjFjYjc1YWNhMzExYzcyMzE0ODU5N2RkOA==", "commit": {"author": {"name": "Gerald Pfeifer", "email": "gerald@pfeifer.com", "date": "2003-08-16T14:02:24Z"}, "committer": {"name": "Gerald Pfeifer", "email": "gerald@gcc.gnu.org", "date": "2003-08-16T14:02:24Z"}, "message": "gcc_release (build_sources): Use two new variables EXPORTTAG and EXPORTDATE to make the extraction of...\n\n\t* gcc_release (build_sources): Use two new variables EXPORTTAG and\n\tEXPORTDATE to make the extraction of sources more transparent and\n\talso allow snapshots (off mainline) without a tag.\n\nFrom-SVN: r70507", "tree": {"sha": "8e45d2c1174889797727a431c34fd325679440a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e45d2c1174889797727a431c34fd325679440a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae7a543957fe07a61cb75aca311c723148597dd8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae7a543957fe07a61cb75aca311c723148597dd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae7a543957fe07a61cb75aca311c723148597dd8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae7a543957fe07a61cb75aca311c723148597dd8/comments", "author": {"login": "GeraldPfeifer", "id": 4573532, "node_id": "MDQ6VXNlcjQ1NzM1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/4573532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GeraldPfeifer", "html_url": "https://github.com/GeraldPfeifer", "followers_url": "https://api.github.com/users/GeraldPfeifer/followers", "following_url": "https://api.github.com/users/GeraldPfeifer/following{/other_user}", "gists_url": "https://api.github.com/users/GeraldPfeifer/gists{/gist_id}", "starred_url": "https://api.github.com/users/GeraldPfeifer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GeraldPfeifer/subscriptions", "organizations_url": "https://api.github.com/users/GeraldPfeifer/orgs", "repos_url": "https://api.github.com/users/GeraldPfeifer/repos", "events_url": "https://api.github.com/users/GeraldPfeifer/events{/privacy}", "received_events_url": "https://api.github.com/users/GeraldPfeifer/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bfeec33d09a3296363421017c615ea12aa9b7788", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfeec33d09a3296363421017c615ea12aa9b7788", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfeec33d09a3296363421017c615ea12aa9b7788"}], "stats": {"total": 35, "additions": 29, "deletions": 6}, "files": [{"sha": "aadc6feffd3c373482ae84be910dd32707883525", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae7a543957fe07a61cb75aca311c723148597dd8/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae7a543957fe07a61cb75aca311c723148597dd8/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=ae7a543957fe07a61cb75aca311c723148597dd8", "patch": "@@ -1,3 +1,9 @@\n+2003-08-16  Gerald Pfeifer  <gerald@pfeifer.com>\n+\n+\t* gcc_release (build_sources): Use two new variables EXPORTTAG and\n+\tEXPORTDATE to make the extraction of sources more transparent and\n+\talso allow snapshots (off mainline) without a tag.\n+\n 2003-08-08  Mark Mitchell  <mark@codesourcery.com>\n \n \t* gcc_release: Correct logic for updating version.c.  Put"}, {"sha": "2db5010e6da1094f31ec11eb00c63190506bbdfc", "filename": "maintainer-scripts/gcc_release", "status": "modified", "additions": 23, "deletions": 6, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae7a543957fe07a61cb75aca311c723148597dd8/maintainer-scripts%2Fgcc_release", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae7a543957fe07a61cb75aca311c723148597dd8/maintainer-scripts%2Fgcc_release", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fgcc_release?ref=ae7a543957fe07a61cb75aca311c723148597dd8", "patch": "@@ -161,15 +161,32 @@ EOF\n     inform \"Tagging sources as ${TAG}\"\n     ${CVS} rtag -r ${CVSBRANCH} -F ${TAG} gcc || \\\n       error \"Could not tag sources\"\n-    CVSBRANCH=$TAG\n+    EXPORTTAG=\"-r${TAG}\"\n+    EXPORTDATE=\"\"\n+  else\n+    if [ ${CVSBRANCH} != \"HEAD\" ]; then\n+      EXPORTTAG=\"-r${CVSBRANCH}\"\n+    else\n+      # HEAD is the default branch, no need to specify it.\n+      EXPORTTAG=\"\"\n+    fi\n+    EXPORTDATE=\"-D`date -u +\"%Y-%m-%d %H:%M\"` UTC\"\n   fi\n \n   # Export the current sources.\n-  inform \"Retrieving release sources\"\n-  ${CVS} \\\n-       export -d \"`basename ${SOURCE_DIRECTORY}`\" \\\n-       -r ${CVSBRANCH} gcc || \\\n-    error \"Could not retrieve release sources\"\n+  inform \"Retrieving sources (cvs export ${EXPORTTAG} ${EXPORTDATE} gcc)\"\n+\n+  if [ -z \"${EXPORTTAG}\" ]; then\n+    ${CVS} export -d \"`basename ${SOURCE_DIRECTORY}`\" \\\n+       \"${EXPORTDATE}\" gcc || \\\n+      error \"Could not retrieve sources\"\n+  elif [ -z \"${EXPORTDATE}\" ]; then\n+    ${CVS} export -d \"`basename ${SOURCE_DIRECTORY}`\" \\\n+       \"${EXPORTTAG}\" gcc || \\\n+      error \"Could not retrieve sources\"\n+  else\n+    error \"Cannot specify -r and -D at the same time\"\n+  fi\n \n   # Run gcc_update on them to set up the timestamps nicely.\n   changedir \"gcc-${RELEASE}\""}]}