{"sha": "5e1b50f68bda115d24af7f9ff13196e488eb59a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWUxYjUwZjY4YmRhMTE1ZDI0YWY3ZjlmZjEzMTk2ZTQ4OGViNTlhNQ==", "commit": {"author": {"name": "Andrey Belevantsev", "email": "abel@ispras.ru", "date": "2009-06-03T14:36:47Z"}, "committer": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2009-06-03T14:36:47Z"}, "message": "statistics.c (statistics_counter_event): Do not record event in pass dump if its number == -1.\n\n        * statistics.c (statistics_counter_event): Do not record event\n        in pass dump if its number == -1.\n        (curr_statistics_hash): Add assert that we never get passes\n        with static number == -1.\n\nFrom-SVN: r148131", "tree": {"sha": "ae6f5c68f65ac74be8e21a8c67a9cecb919eb150", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae6f5c68f65ac74be8e21a8c67a9cecb919eb150"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e1b50f68bda115d24af7f9ff13196e488eb59a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e1b50f68bda115d24af7f9ff13196e488eb59a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e1b50f68bda115d24af7f9ff13196e488eb59a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e1b50f68bda115d24af7f9ff13196e488eb59a5/comments", "author": {"login": "abonzo", "id": 20396542, "node_id": "MDQ6VXNlcjIwMzk2NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/20396542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abonzo", "html_url": "https://github.com/abonzo", "followers_url": "https://api.github.com/users/abonzo/followers", "following_url": "https://api.github.com/users/abonzo/following{/other_user}", "gists_url": "https://api.github.com/users/abonzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/abonzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abonzo/subscriptions", "organizations_url": "https://api.github.com/users/abonzo/orgs", "repos_url": "https://api.github.com/users/abonzo/repos", "events_url": "https://api.github.com/users/abonzo/events{/privacy}", "received_events_url": "https://api.github.com/users/abonzo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6f11d6900d932c1e64e77f84d98b954ed6aba798", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f11d6900d932c1e64e77f84d98b954ed6aba798", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f11d6900d932c1e64e77f84d98b954ed6aba798"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "523c1613338c0d4125f24a88c1245d24c3da8a98", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e1b50f68bda115d24af7f9ff13196e488eb59a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e1b50f68bda115d24af7f9ff13196e488eb59a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5e1b50f68bda115d24af7f9ff13196e488eb59a5", "patch": "@@ -1,3 +1,10 @@\n+2009-06-03  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\t* statistics.c (statistics_counter_event): Do not record event \n+\tin pass\tdump if its number == -1.\n+\t(curr_statistics_hash): Add assert that we never get passes \n+\twith static number == -1.\n+\n 2009-06-03  Richard Guenther  <rguenther@suse.de>\n \t    Andrey Belevantsev  <abel@ispras.ru>\n "}, {"sha": "b7bfd45dd975027371aa4957302095123b3eaabb", "filename": "gcc/statistics.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e1b50f68bda115d24af7f9ff13196e488eb59a5/gcc%2Fstatistics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e1b50f68bda115d24af7f9ff13196e488eb59a5/gcc%2Fstatistics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstatistics.c?ref=5e1b50f68bda115d24af7f9ff13196e488eb59a5", "patch": "@@ -82,7 +82,10 @@ hash_statistics_free (void *p)\n static htab_t\n curr_statistics_hash (void)\n {\n-  unsigned idx = current_pass->static_pass_number;\n+  unsigned idx;\n+\n+  gcc_assert (current_pass->static_pass_number >= 0);\n+  idx = current_pass->static_pass_number;\n \n   if (idx < nr_statistics_hashes\n       && statistics_hashes[idx] != NULL)\n@@ -294,9 +297,12 @@ statistics_counter_event (struct function *fn, const char *id, int incr)\n       || incr == 0)\n     return;\n \n-  counter = lookup_or_add_counter (curr_statistics_hash (), id, 0, false);\n-  gcc_assert (!counter->histogram_p);\n-  counter->count += incr;\n+  if (current_pass->static_pass_number != -1)\n+    {\n+      counter = lookup_or_add_counter (curr_statistics_hash (), id, 0, false);\n+      gcc_assert (!counter->histogram_p);\n+      counter->count += incr;\n+    }\n \n   if (!statistics_dump_file\n       || !(statistics_dump_flags & TDF_DETAILS))"}]}