{"sha": "b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMzZGEwYzc1NDA3N2RmMWM0MGJkZjkyOWViOGM5ZWJjOWU0ZGUyYg==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2015-02-26T15:31:52Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2015-02-26T15:31:52Z"}, "message": "re PR debug/46102 (ICE: SIGSEGV in dwarf2out_finish (dwarf2out.c:8490) with -feliminate-dwarf2-dups when using precompiled headers)\n\n\tPR debug/46102\n\t* dwarf2out.c (dwarf2out_init): Disable -feliminate-dwarf2-dups.\ntestsuite/\n\tPR debug/46102\n\t* g++.dg/debug/dwarf2-1.C: XFAIL and move...\n\t* g++.dg/debug/dwarf2/dwarf2-1.C: ...here.\n\t* g++.dg/debug/dwarf2-2.C: XFAIL and move...\n\t* g++.dg/debug/dwarf2/dwarf2-2.C: ...here.\n\t* g++.dg/debug/dwarf2/typedef5.C: XFAIL.\n\t* g++.dg/debug/pr46123.C: XFAIL and move...\n\t* g++.dg/debug/dwarf2/pr46123-2.C: ...here.\n\t* gcc.dg/debug/dwarf2-3.c: Move...\n\t* gcc.dg/debug/dwarf2/dwarf2-3.c: ...here.\n\nFrom-SVN: r221016", "tree": {"sha": "2a79e58d028690cde55b2ac059a028a71f94dabf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a79e58d028690cde55b2ac059a028a71f94dabf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "75e0295b00aeeddbd4efb2e55ef3ed946f886a86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75e0295b00aeeddbd4efb2e55ef3ed946f886a86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75e0295b00aeeddbd4efb2e55ef3ed946f886a86"}], "stats": {"total": 72, "additions": 53, "deletions": 19}, "files": [{"sha": "047a158e29ad7e0438bea27050fed28246eccaab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -1,3 +1,8 @@\n+2015-02-25  Aldy Hernandez  <aldyh@redhat.com>\n+\n+\tPR debug/46102\n+\t* dwarf2out.c (dwarf2out_init): Disable -feliminate-dwarf2-dups.\n+\n 2015-02-26  Sebastian Pop  <s.pop@samsung.com>\n \n \tPR tree-optimization/65048"}, {"sha": "6c8e51fcab42447dddd0f587b1db67e1cd345cc4", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -22621,6 +22621,14 @@ output_macinfo (void)\n static void\n dwarf2out_init (const char *filename ATTRIBUTE_UNUSED)\n {\n+  /* This option is currently broken, see (PR53118 and PR46102).  */\n+  if (flag_eliminate_dwarf2_dups\n+      && strstr (lang_hooks.name, \"C++\"))\n+    {\n+      warning (0, \"-feliminate-dwarf2-dups is broken for C++, ignoring\");\n+      flag_eliminate_dwarf2_dups = 0;\n+    }\n+\n   /* Allocate the file_table.  */\n   file_table = hash_table<dwarf_file_hasher>::create_ggc (50);\n "}, {"sha": "0d1b9b5e4519931c2abc8e3fa3db4bed48561a40", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -1,3 +1,16 @@\n+2015-02-25  Aldy Hernandez  <aldyh@redhat.com>\n+\n+\tPR debug/46102\n+\t* g++.dg/debug/dwarf2-1.C: XFAIL and move...\n+\t* g++.dg/debug/dwarf2/dwarf2-1.C: ...here.\n+\t* g++.dg/debug/dwarf2-2.C: XFAIL and move...\n+\t* g++.dg/debug/dwarf2/dwarf2-2.C: ...here.\n+\t* g++.dg/debug/dwarf2/typedef5.C: XFAIL.\n+\t* g++.dg/debug/pr46123.C: XFAIL and move...\n+\t* g++.dg/debug/dwarf2/pr46123-2.C: ...here.\n+\t* gcc.dg/debug/dwarf2-3.c: Move...\n+\t* gcc.dg/debug/dwarf2/dwarf2-3.c: ...here.\n+\n 2015-02-26  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/65202"}, {"sha": "9e6dbd2169d4bde155a527e1d1ef9cb070aefd8a", "filename": "gcc/testsuite/g++.dg/debug/dwarf2-2.C", "status": "removed", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75e0295b00aeeddbd4efb2e55ef3ed946f886a86/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75e0295b00aeeddbd4efb2e55ef3ed946f886a86/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2-2.C?ref=75e0295b00aeeddbd4efb2e55ef3ed946f886a86", "patch": "@@ -1,17 +0,0 @@\n-// PR debug/27057\n-// { dg-do compile }\n-// { dg-options \"-g -feliminate-dwarf2-dups\" }\n-\n-namespace N\n-{\n-}\n-\n-struct A\n-{\n-  void foo ();\n-};\n-\n-void A::foo ()\n-{\n-  using namespace N;\n-}"}, {"sha": "d0176bae6f5d51665984df190e19dcecaf605607", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/dwarf2-1.C", "status": "renamed", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fdwarf2-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fdwarf2-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fdwarf2-1.C?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -4,7 +4,7 @@\n // PR 24824\n // Origin:   \t wanderer@rsu.ru\n \n-// { dg-options \"-feliminate-dwarf2-dups\" }\n+// { dg-options \"-gdwarf -feliminate-dwarf2-dups\" }\n \n namespace N\n {\n@@ -20,3 +20,5 @@ namespace N\n }\n \n N::Derived thing;\n+\n+/* { dg-bogus \"-feliminate-dwarf2-dups is broken for C\\\\+\\\\+, ignoring\" \"broken -feliminate-dwarf2-dups\" { xfail *-*-* } 1 } */", "previous_filename": "gcc/testsuite/g++.dg/debug/dwarf2-1.C"}, {"sha": "23175c666af6c2d3fed592e3cb08e8acf3458845", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/dwarf2-2.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fdwarf2-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fdwarf2-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fdwarf2-2.C?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -0,0 +1,19 @@\n+// PR debug/27057\n+// { dg-do compile }\n+// { dg-options \"-gdwarf -feliminate-dwarf2-dups\" }\n+\n+namespace N\n+{\n+}\n+\n+struct A\n+{\n+  void foo ();\n+};\n+\n+void A::foo ()\n+{\n+  using namespace N;\n+}\n+\n+/* { dg-bogus \"-feliminate-dwarf2-dups is broken for C\\\\+\\\\+, ignoring\" \"broken -feliminate-dwarf2-dups\" { xfail *-*-* } 1 } */"}, {"sha": "b262034eafb2fa5230218819bad49bc6a9573420", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/pr46123-2.C", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr46123-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr46123-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr46123-2.C?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -45,3 +45,5 @@ int main ()\n     return 1;\n   return 0;\n }\n+\n+/* { dg-bogus \"-feliminate-dwarf2-dups is broken for C\\\\+\\\\+, ignoring\" \"broken -feliminate-dwarf2-dups\" { xfail *-*-* } 1 } */", "previous_filename": "gcc/testsuite/g++.dg/debug/pr46123.C"}, {"sha": "b742c1dfd4173adba17a28a835d74d616404b20d", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/typedef5.C", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftypedef5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftypedef5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftypedef5.C?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -8,3 +8,5 @@ typedef struct\n } A;\n \n A a;\n+\n+/* { dg-bogus \"-feliminate-dwarf2-dups is broken for C\\\\+\\\\+, ignoring\" \"broken -feliminate-dwarf2-dups\" { xfail *-*-* } 1 } */"}, {"sha": "e3646705706a101b319e6c7ccaf30b4509f183b8", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/dwarf2-3.c", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fdwarf2-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fdwarf2-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fdwarf2-3.c?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "patch": "@@ -1,7 +1,7 @@\n /* Test -feliminate-dwarf2-dups */\n /* Contributed by Devang Patel <dpatel@apple.com> */\n /* { dg-do compile } */\n-/* { dg-options \"-feliminate-dwarf2-dups\" } */\n+/* { dg-options \"-gdwarf -feliminate-dwarf2-dups\" } */\n \n #include \"dwarf2-3.h\"\n ", "previous_filename": "gcc/testsuite/gcc.dg/debug/dwarf2-3.c"}, {"sha": "26ad0bace2234dd861dc0f4b2c86601dd039ba25", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/dwarf2-3.h", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fdwarf2-3.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b33da0c754077df1c40bdf929eb8c9ebc9e4de2b/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fdwarf2-3.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fdwarf2-3.h?ref=b33da0c754077df1c40bdf929eb8c9ebc9e4de2b", "previous_filename": "gcc/testsuite/gcc.dg/debug/dwarf2-3.h"}]}