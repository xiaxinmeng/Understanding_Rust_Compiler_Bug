{"sha": "b3421a06f981f875e0aee932b4f80c52dcb37e72", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjM0MjFhMDZmOTgxZjg3NWUwYWVlOTMyYjRmODBjNTJkY2IzN2U3Mg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2011-07-30T12:37:47Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2011-07-30T12:37:47Z"}, "message": "re PR middle-end/43513 (The stack pointer is adjusted twice)\n\n2011-07-30  Tom de Vries  <tom@codesourcery.com>\n\n\tPR middle-end/43513\n\t* tree-ssa-dce.c (ref_may_be_aliased): Add assert.\n\t(propagate_necessity): Handle WITH_SIZE_EXPR call arg.\n\nFrom-SVN: r176959", "tree": {"sha": "bfab37b2b93f99da187abb936e89b5750831b3b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bfab37b2b93f99da187abb936e89b5750831b3b1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3421a06f981f875e0aee932b4f80c52dcb37e72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3421a06f981f875e0aee932b4f80c52dcb37e72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3421a06f981f875e0aee932b4f80c52dcb37e72", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3421a06f981f875e0aee932b4f80c52dcb37e72/comments", "author": null, "committer": null, "parents": [{"sha": "ee27f97bd8b9ac9dc6b7b5f4e4d47e09a8d915ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee27f97bd8b9ac9dc6b7b5f4e4d47e09a8d915ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee27f97bd8b9ac9dc6b7b5f4e4d47e09a8d915ce"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "99968b32857dcc3d12ea6b824755e9a9ec83de53", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3421a06f981f875e0aee932b4f80c52dcb37e72/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3421a06f981f875e0aee932b4f80c52dcb37e72/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3421a06f981f875e0aee932b4f80c52dcb37e72", "patch": "@@ -1,3 +1,9 @@\n+2011-07-30  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR middle-end/43513\n+\t* tree-ssa-dce.c (ref_may_be_aliased): Add assert.\n+\t(propagate_necessity): Handle WITH_SIZE_EXPR call arg.\n+\n 2011-07-29  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* config/mips/driver-native.c [__sgi__]: Include <invent.h>,"}, {"sha": "bf69bbf26b27e7cbbd6078bd83442d93b21726c7", "filename": "gcc/tree-ssa-dce.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3421a06f981f875e0aee932b4f80c52dcb37e72/gcc%2Ftree-ssa-dce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3421a06f981f875e0aee932b4f80c52dcb37e72/gcc%2Ftree-ssa-dce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dce.c?ref=b3421a06f981f875e0aee932b4f80c52dcb37e72", "patch": "@@ -490,6 +490,7 @@ find_obviously_necessary_stmts (struct edge_list *el)\n static bool\n ref_may_be_aliased (tree ref)\n {\n+  gcc_assert (TREE_CODE (ref) != WITH_SIZE_EXPR);\n   while (handled_component_p (ref))\n     ref = TREE_OPERAND (ref, 0);\n   if (TREE_CODE (ref) == MEM_REF\n@@ -850,6 +851,8 @@ propagate_necessity (struct edge_list *el)\n \t\t  if (TREE_CODE (arg) == SSA_NAME\n \t\t      || is_gimple_min_invariant (arg))\n \t\t    continue;\n+\t\t  if (TREE_CODE (arg) == WITH_SIZE_EXPR)\n+\t\t    arg = TREE_OPERAND (arg, 0);\n \t\t  if (!ref_may_be_aliased (arg))\n \t\t    mark_aliased_reaching_defs_necessary (stmt, arg);\n \t\t}"}]}