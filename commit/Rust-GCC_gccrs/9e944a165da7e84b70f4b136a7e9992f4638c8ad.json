{"sha": "9e944a165da7e84b70f4b136a7e9992f4638c8ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWU5NDRhMTY1ZGE3ZTg0YjcwZjRiMTM2YTdlOTk5MmY0NjM4YzhhZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2002-02-26T21:39:07Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-02-26T21:39:07Z"}, "message": "configure.in (libgcc_visibility): Substitute.\n\n\t* configure.in (libgcc_visibility): Substitute.\n\t* configure: Rebuilt.\n\t* mklibgcc.in: If libgcc_visibility = yes, make libgcc.a global\n\tdefined symbols .hidden.\n\nFrom-SVN: r50063", "tree": {"sha": "0ff3a55229491e9fe2660b27d0374050b51b2306", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ff3a55229491e9fe2660b27d0374050b51b2306"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e944a165da7e84b70f4b136a7e9992f4638c8ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e944a165da7e84b70f4b136a7e9992f4638c8ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e944a165da7e84b70f4b136a7e9992f4638c8ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e944a165da7e84b70f4b136a7e9992f4638c8ad/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "47bd70b56aa4ccc10fd0e90a7fae4c94d991bb30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47bd70b56aa4ccc10fd0e90a7fae4c94d991bb30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47bd70b56aa4ccc10fd0e90a7fae4c94d991bb30"}], "stats": {"total": 30, "additions": 28, "deletions": 2}, "files": [{"sha": "30d2700aefe0199406fdda03bdc9645d32bc7302", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e944a165da7e84b70f4b136a7e9992f4638c8ad", "patch": "@@ -1,3 +1,10 @@\n+2002-02-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* configure.in (libgcc_visibility): Substitute.\n+\t* configure: Rebuilt.\n+\t* mklibgcc.in: If libgcc_visibility = yes, make libgcc.a global\n+\tdefined symbols .hidden.\n+\n 2002-02-26  Jakub Jelinek  <jakub@redhat.com>\n \n \t* attribs.c (c_common_attribute_table): Add visibility."}, {"sha": "10fed033979a7772b9fa7e1cb99bb4f546fc14eb", "filename": "gcc/configure", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=9e944a165da7e84b70f4b136a7e9992f4638c8ad", "patch": "@@ -7147,6 +7147,8 @@ EOF\n \n fi\n echo \"$ac_t\"\"$gcc_cv_as_hidden\" 1>&6\n+libgcc_visibility=$gcc_cv_as_hidden\n+\n \n echo $ac_n \"checking assembler leb128 support\"\"... $ac_c\" 1>&6\n echo \"configure:7153: checking assembler leb128 support\" >&5\n@@ -8394,6 +8396,7 @@ s%@HOST_CC@%$HOST_CC%g\n s%@HOST_CFLAGS@%$HOST_CFLAGS%g\n s%@STMP_FIXINC@%$STMP_FIXINC%g\n s%@STMP_FIXPROTO@%$STMP_FIXPROTO%g\n+s%@libgcc_visibility@%$libgcc_visibility%g\n s%@gthread_flags@%$gthread_flags%g\n s%@GGC@%$GGC%g\n s%@zlibdir@%$zlibdir%g"}, {"sha": "6e6fb6bfb40800b3f54cfa8acd612532ab412209", "filename": "gcc/configure.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=9e944a165da7e84b70f4b136a7e9992f4638c8ad", "patch": "@@ -1484,6 +1484,8 @@ if test x\"$gcc_cv_as_hidden\" = xyes; then\n \t\t[Define if your assembler supports .hidden.])\n fi\n AC_MSG_RESULT($gcc_cv_as_hidden)\n+libgcc_visibility=$gcc_cv_as_hidden\n+AC_SUBST(libgcc_visibility)\n \n AC_MSG_CHECKING(assembler leb128 support)\n gcc_cv_as_leb128=no"}, {"sha": "061f570c974e2a8e8dee45bccfc0947618fde0c8", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e944a165da7e84b70f4b136a7e9992f4638c8ad/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=9e944a165da7e84b70f4b136a7e9992f4638c8ad", "patch": "@@ -270,10 +270,24 @@ for ml in $MULTILIBS; do\n     shlib_deps=\"$shlib_deps $dir/$f\"\n   done\n \n+  libgcc_a_objs=\"$libgcc_objs $libgcc_st_objs\"\n+\n+  if [ \"@libgcc_visibility@\" = yes ]; then\n+    libgcc_a_objs=`echo \"${libgcc_a_objs} \" | sed s~${objext}' ~.oS ~g'`\n+\n+    # .oS objects will have all non-local symbol definitions .hidden\n+    echo \"\"\n+    echo \"$libgcc_a_objs: libgcc/${dir}/%.oS: libgcc/${dir}/%${objext}\"\n+    echo \"\t@\\$(NM_FOR_TARGET) $SHLIB_NM_FLAGS \\$^\" \\\\\n+    echo \"\t | \\$(AWK) 'NF == 3 { printf \\\".hidden %s\\\\n\\\", \\$\\$3 }'\" \\\\\n+    echo '\t | $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -Wl,-r -nostdinc' \\\\ \n+    echo '\t   -nostdlib -o $@ $^ -xassembler -'\n+  fi\n+\n   echo \"\"\n-  echo \"${dir}/libgcc.a: $libgcc_objs $libgcc_st_objs\"\n+  echo \"${dir}/libgcc.a: $libgcc_a_objs\"\n   echo \"\t-rm -rf ${dir}/libgcc.a\"\n-  echo '\t$(AR_CREATE_FOR_TARGET)' ${dir}/libgcc.a $libgcc_objs $libgcc_st_objs\n+  echo '\t$(AR_CREATE_FOR_TARGET)' ${dir}/libgcc.a $libgcc_a_objs\n   echo '\tif $(RANLIB_TEST_FOR_TARGET) ; then' \\\\\n   echo '\t  $(RANLIB_FOR_TARGET)' ${dir}/libgcc.a ';' \\\\\n   echo '\telse true; fi;'"}]}