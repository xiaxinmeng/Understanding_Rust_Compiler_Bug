{"sha": "544f7fc84123aa03d37cc5325576f0db51d94ef8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ0ZjdmYzg0MTIzYWEwM2QzN2NjNTMyNTU3NmYwZGI1MWQ5NGVmOA==", "commit": {"author": {"name": "Yvan Roux", "email": "yvan.roux@linaro.org", "date": "2015-04-28T14:41:04Z"}, "committer": {"name": "Yvan Roux", "email": "yroux@gcc.gnu.org", "date": "2015-04-28T14:41:04Z"}, "message": "arm.md (*arm_movt): Fix type attribute.\n\n2015-04-28  Yvan Roux  <yvan.roux@linaro.org>\n\n\t* config/arm/arm.md (*arm_movt): Fix type attribute.\n\t(*cmpsi_shiftsi): Likewise.\n\t(*cmpsi_shiftsi_swp): Likewise.\n\t(*movsicc_insn): Likewise.\n\t(*cond_move): Likewise.\n\t(*if_plus_move): Likewise.\n\t(*if_move_plus): Likewise.\n\t(*if_arith_move): Likewise.\n\t(*if_move_arith): Likewise.\n\t(*if_shift_move): Likewise.\n\t(*if_move_shift): Likewise.\n\t(*arm_movtas_ze): Likewise.\n\t* config/arm/thumb2.md (*thumb2_movsicc_insn): Fix alternative\n\tredundancy and type attribute.\n\t(*thumb2_movsi_insn): Fix type attribute.\n\t(*thumb2_addsi_short): Likewise.\n\t(thumb2_addsi3_compare0): Likewise.\n\t(*thumb2_addsi3_compare0_scratch): Merge alternatives and fix\n\tattributes accordingly.\n\nFrom-SVN: r222528", "tree": {"sha": "4e85d88bb782e7e3c5a85c54591d4edd08b4cee6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e85d88bb782e7e3c5a85c54591d4edd08b4cee6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/544f7fc84123aa03d37cc5325576f0db51d94ef8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544f7fc84123aa03d37cc5325576f0db51d94ef8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/544f7fc84123aa03d37cc5325576f0db51d94ef8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544f7fc84123aa03d37cc5325576f0db51d94ef8/comments", "author": {"login": "yroux", "id": 2749479, "node_id": "MDQ6VXNlcjI3NDk0Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/2749479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yroux", "html_url": "https://github.com/yroux", "followers_url": "https://api.github.com/users/yroux/followers", "following_url": "https://api.github.com/users/yroux/following{/other_user}", "gists_url": "https://api.github.com/users/yroux/gists{/gist_id}", "starred_url": "https://api.github.com/users/yroux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yroux/subscriptions", "organizations_url": "https://api.github.com/users/yroux/orgs", "repos_url": "https://api.github.com/users/yroux/repos", "events_url": "https://api.github.com/users/yroux/events{/privacy}", "received_events_url": "https://api.github.com/users/yroux/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6d8a9f7c660b9873d1e7d5662f82fb5c30cc1e9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d8a9f7c660b9873d1e7d5662f82fb5c30cc1e9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d8a9f7c660b9873d1e7d5662f82fb5c30cc1e9e"}], "stats": {"total": 154, "additions": 121, "deletions": 33}, "files": [{"sha": "b1c59fd6fa1a33d87c60ce38b588b0decb5b5418", "filename": "gcc/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544f7fc84123aa03d37cc5325576f0db51d94ef8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544f7fc84123aa03d37cc5325576f0db51d94ef8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=544f7fc84123aa03d37cc5325576f0db51d94ef8", "patch": "@@ -1,3 +1,25 @@\n+2015-04-28  Yvan Roux  <yvan.roux@linaro.org>\n+\n+\t* config/arm/arm.md (*arm_movt): Fix type attribute.\n+\t(*cmpsi_shiftsi): Likewise.\n+\t(*cmpsi_shiftsi_swp): Likewise.\n+\t(*movsicc_insn): Likewise.\n+\t(*cond_move): Likewise.\n+\t(*if_plus_move): Likewise.\n+\t(*if_move_plus): Likewise.\n+\t(*if_arith_move): Likewise.\n+\t(*if_move_arith): Likewise.\n+\t(*if_shift_move): Likewise.\n+\t(*if_move_shift): Likewise.\n+\t(*arm_movtas_ze): Likewise.\n+\t* config/arm/thumb2.md (*thumb2_movsicc_insn): Fix alternative\n+\tredundancy and type attribute.\n+\t(*thumb2_movsi_insn): Fix type attribute.\n+\t(*thumb2_addsi_short): Likewise.\n+\t(thumb2_addsi3_compare0): Likewise.\n+\t(*thumb2_addsi3_compare0_scratch): Merge alternatives and fix\n+\tattributes accordingly.\n+\n 2015-04-28  Markus Trippelsdorf  <markus@trippelsdorf.de>\n \n \tPR other/65911"}, {"sha": "130eb702db6571a61f336131cc1d67fefebd96b1", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 47, "deletions": 16, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544f7fc84123aa03d37cc5325576f0db51d94ef8/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544f7fc84123aa03d37cc5325576f0db51d94ef8/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=544f7fc84123aa03d37cc5325576f0db51d94ef8", "patch": "@@ -5631,7 +5631,7 @@\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"length\" \"4\")\n-   (set_attr \"type\" \"mov_imm\")]\n+   (set_attr \"type\" \"alu_sreg\")]\n )\n \n (define_insn \"*arm_movsi_insn\"\n@@ -6886,7 +6886,7 @@\n   [(set_attr \"conds\" \"set\")\n    (set_attr \"shift\" \"1\")\n    (set_attr \"arch\" \"32,a,a\")\n-   (set_attr \"type\" \"alus_shift_imm,alu_shift_reg,alus_shift_imm\")])\n+   (set_attr \"type\" \"alus_shift_imm,alus_shift_reg,alus_shift_imm\")])\n \n (define_insn \"*cmpsi_shiftsi_swp\"\n   [(set (reg:CC_SWP CC_REGNUM)\n@@ -6899,7 +6899,7 @@\n   [(set_attr \"conds\" \"set\")\n    (set_attr \"shift\" \"1\")\n    (set_attr \"arch\" \"32,a,a\")\n-   (set_attr \"type\" \"alus_shift_imm,alu_shift_reg,alus_shift_imm\")])\n+   (set_attr \"type\" \"alus_shift_imm,alus_shift_reg,alus_shift_imm\")])\n \n (define_insn \"*arm_cmpsi_negshiftsi_si\"\n   [(set (reg:CC_Z CC_REGNUM)\n@@ -7492,10 +7492,10 @@\n                                         (const_string \"mov_imm\")\n                                         (const_string \"mov_reg\"))\n                           (const_string \"mvn_imm\")\n-                          (const_string \"mov_reg\")\n-                          (const_string \"mov_reg\")\n-                          (const_string \"mov_reg\")\n-                          (const_string \"mov_reg\")])]\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*movsfcc_soft_insn\"\n@@ -8653,7 +8653,14 @@\n     return \\\"\\\";\n   \"\n   [(set_attr \"conds\" \"use\")\n-   (set_attr \"type\" \"mov_reg,mov_reg,multiple\")\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 2 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_imm\")\n+                                        (const_string \"mov_reg\"))\n+                          (if_then_else (match_operand 1 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_imm\")\n+                                        (const_string \"mov_reg\"))\n+                          (const_string \"multiple\")])\n    (set_attr \"length\" \"4,4,8\")]\n )\n \n@@ -9449,8 +9456,8 @@\n                                         (const_string \"alu_imm\" )\n                                         (const_string \"alu_sreg\"))\n                           (const_string \"alu_imm\")\n-                          (const_string \"alu_sreg\")\n-                          (const_string \"alu_sreg\")])]\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*ifcompare_move_plus\"\n@@ -9487,7 +9494,13 @@\n    sub%D4\\\\t%0, %2, #%n3\\;mov%d4\\\\t%0, %1\"\n   [(set_attr \"conds\" \"use\")\n    (set_attr \"length\" \"4,4,8,8\")\n-   (set_attr \"type\" \"alu_sreg,alu_imm,multiple,multiple\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 3 \"const_int_operand\" \"\")\n+                                        (const_string \"alu_imm\" )\n+                                        (const_string \"alu_sreg\"))\n+                          (const_string \"alu_imm\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*ifcompare_arith_arith\"\n@@ -9582,7 +9595,11 @@\n    %I5%d4\\\\t%0, %2, %3\\;mov%D4\\\\t%0, %1\"\n   [(set_attr \"conds\" \"use\")\n    (set_attr \"length\" \"4,8\")\n-   (set_attr \"type\" \"alu_shift_reg,multiple\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 3 \"const_int_operand\" \"\")\n+                                        (const_string \"alu_shift_imm\" )\n+                                        (const_string \"alu_shift_reg\"))\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*ifcompare_move_arith\"\n@@ -9643,7 +9660,11 @@\n    %I5%D4\\\\t%0, %2, %3\\;mov%d4\\\\t%0, %1\"\n   [(set_attr \"conds\" \"use\")\n    (set_attr \"length\" \"4,8\")\n-   (set_attr \"type\" \"alu_shift_reg,multiple\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 3 \"const_int_operand\" \"\")\n+                                        (const_string \"alu_shift_imm\" )\n+                                        (const_string \"alu_shift_reg\"))\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*ifcompare_move_not\"\n@@ -9750,7 +9771,12 @@\n   [(set_attr \"conds\" \"use\")\n    (set_attr \"shift\" \"2\")\n    (set_attr \"length\" \"4,8,8\")\n-   (set_attr \"type\" \"mov_shift_reg,multiple,multiple\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 3 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_shift\" )\n+                                        (const_string \"mov_shift_reg\"))\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*ifcompare_move_shift\"\n@@ -9788,7 +9814,12 @@\n   [(set_attr \"conds\" \"use\")\n    (set_attr \"shift\" \"2\")\n    (set_attr \"length\" \"4,8,8\")\n-   (set_attr \"type\" \"mov_shift_reg,multiple,multiple\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 3 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_shift\" )\n+                                        (const_string \"mov_shift_reg\"))\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*ifcompare_shift_shift\"\n@@ -10869,7 +10900,7 @@\n  [(set_attr \"predicable\" \"yes\")\n   (set_attr \"predicable_short_it\" \"no\")\n   (set_attr \"length\" \"4\")\n-  (set_attr \"type\" \"mov_imm\")]\n+  (set_attr \"type\" \"alu_sreg\")]\n )\n \n (define_insn \"*arm_rev\""}, {"sha": "4f9faac56a0f64a45186e39602e801392cfecfad", "filename": "gcc/config/arm/thumb2.md", "status": "modified", "additions": 52, "deletions": 17, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544f7fc84123aa03d37cc5325576f0db51d94ef8/gcc%2Fconfig%2Farm%2Fthumb2.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544f7fc84123aa03d37cc5325576f0db51d94ef8/gcc%2Fconfig%2Farm%2Fthumb2.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fthumb2.md?ref=544f7fc84123aa03d37cc5325576f0db51d94ef8", "patch": "@@ -300,7 +300,7 @@\n    ldr%?\\\\t%0, %1\n    str%?\\\\t%1, %0\n    str%?\\\\t%1, %0\"\n-  [(set_attr \"type\" \"mov_reg,alu_imm,alu_imm,alu_imm,mov_imm,load1,load1,store1,store1\")\n+  [(set_attr \"type\" \"mov_reg,mov_imm,mov_imm,mvn_imm,mov_imm,load1,load1,store1,store1\")\n    (set_attr \"length\" \"2,4,2,4,4,4,4,4,4\")\n    (set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"yes,no,yes,no,no,no,no,no,no\")\n@@ -486,12 +486,12 @@\n )\n \n (define_insn_and_split \"*thumb2_movsicc_insn\"\n-  [(set (match_operand:SI 0 \"s_register_operand\" \"=l,l,r,r,r,r,r,r,r,r,r\")\n+  [(set (match_operand:SI 0 \"s_register_operand\" \"=l,l,r,r,r,r,r,r,r,r,r,r\")\n \t(if_then_else:SI\n \t (match_operator 3 \"arm_comparison_operator\"\n \t  [(match_operand 4 \"cc_register\" \"\") (const_int 0)])\n-\t (match_operand:SI 1 \"arm_not_operand\" \"0 ,lPy,0 ,0,rI,K,rI,rI,K ,K,r\")\n-\t (match_operand:SI 2 \"arm_not_operand\" \"lPy,0 ,rI,K,0 ,0,rI,K ,rI,K,r\")))]\n+\t (match_operand:SI 1 \"arm_not_operand\" \"0 ,lPy,0 ,0,rI,K,I ,r,rI,K ,K,r\")\n+\t (match_operand:SI 2 \"arm_not_operand\" \"lPy,0 ,rI,K,0 ,0,rI,I,K ,rI,K,r\")))]\n   \"TARGET_THUMB2\"\n   \"@\n    it\\\\t%D3\\;mov%D3\\\\t%0, %2\n@@ -504,12 +504,14 @@\n    #\n    #\n    #\n+   #\n    #\"\n    ; alt 6: ite\\\\t%d3\\;mov%d3\\\\t%0, %1\\;mov%D3\\\\t%0, %2\n-   ; alt 7: ite\\\\t%d3\\;mov%d3\\\\t%0, %1\\;mvn%D3\\\\t%0, #%B2\n-   ; alt 8: ite\\\\t%d3\\;mvn%d3\\\\t%0, #%B1\\;mov%D3\\\\t%0, %2\n-   ; alt 9: ite\\\\t%d3\\;mvn%d3\\\\t%0, #%B1\\;mvn%D3\\\\t%0, #%B2\n-   ; alt 10: ite\\\\t%d3\\;mov%d3\\\\t%0, %1\\;mov%D3\\\\t%0, %2\n+   ; alt 7: ite\\\\t%d3\\;mov%d3\\\\t%0, %1\\;mov%D3\\\\t%0, %2\n+   ; alt 8: ite\\\\t%d3\\;mov%d3\\\\t%0, %1\\;mvn%D3\\\\t%0, #%B2\n+   ; alt 9: ite\\\\t%d3\\;mvn%d3\\\\t%0, #%B1\\;mov%D3\\\\t%0, %2\n+   ; alt 10: ite\\\\t%d3\\;mvn%d3\\\\t%0, #%B1\\;mvn%D3\\\\t%0, #%B2\n+   ; alt 11: ite\\\\t%d3\\;mov%d3\\\\t%0, %1\\;mov%D3\\\\t%0, %2\n   \"&& reload_completed\"\n   [(const_int 0)]\n   {\n@@ -540,10 +542,30 @@\n                                                operands[2])));\n     DONE;\n   }\n-  [(set_attr \"length\" \"4,4,6,6,6,6,10,10,10,10,6\")\n-   (set_attr \"enabled_for_depr_it\" \"yes,yes,no,no,no,no,no,no,no,no,yes\")\n+  [(set_attr \"length\" \"4,4,6,6,6,6,10,8,10,10,10,6\")\n+   (set_attr \"enabled_for_depr_it\" \"yes,yes,no,no,no,no,no,no,no,no,no,yes\")\n    (set_attr \"conds\" \"use\")\n-   (set_attr \"type\" \"multiple\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 2 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_imm\")\n+                                        (const_string \"mov_reg\"))\n+                          (if_then_else (match_operand 1 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_imm\")\n+                                        (const_string \"mov_reg\"))\n+                          (if_then_else (match_operand 2 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_imm\")\n+                                        (const_string \"mov_reg\"))\n+                          (const_string \"mvn_imm\")\n+                          (if_then_else (match_operand 1 \"const_int_operand\" \"\")\n+                                        (const_string \"mov_imm\")\n+                                        (const_string \"mov_reg\"))\n+                          (const_string \"mvn_imm\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")\n+                          (const_string \"multiple\")])]\n )\n \n (define_insn \"*thumb2_movsfcc_soft_insn\"\n@@ -1182,7 +1204,11 @@\n   \"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"length\" \"2\")\n-   (set_attr \"type\" \"alu_sreg\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 2 \"const_int_operand\" \"\")\n+                                        (const_string \"alu_imm\")\n+                                        (const_string \"alu_sreg\"))\n+                          (const_string \"alu_imm\")])]\n )\n \n (define_insn \"*thumb2_subsi_short\"\n@@ -1247,14 +1273,21 @@\n   \"\n   [(set_attr \"conds\" \"set\")\n    (set_attr \"length\" \"2,2,4\")\n-   (set_attr \"type\" \"alu_sreg\")]\n+   (set_attr_alternative \"type\"\n+                         [(if_then_else (match_operand 2 \"const_int_operand\" \"\")\n+                                        (const_string \"alus_imm\")\n+                                        (const_string \"alus_sreg\"))\n+                          (const_string \"alus_imm\")\n+                          (if_then_else (match_operand 2 \"const_int_operand\" \"\")\n+                                        (const_string \"alus_imm\")\n+                                        (const_string \"alus_sreg\"))])]\n )\n \n (define_insn \"*thumb2_addsi3_compare0_scratch\"\n   [(set (reg:CC_NOOV CC_REGNUM)\n \t(compare:CC_NOOV\n-\t  (plus:SI (match_operand:SI 0 \"s_register_operand\" \"l,l,  r,r\")\n-\t\t   (match_operand:SI 1 \"arm_add_operand\"    \"Pv,l,IL,r\"))\n+\t  (plus:SI (match_operand:SI 0 \"s_register_operand\" \"l,  r\")\n+\t\t   (match_operand:SI 1 \"arm_add_operand\"    \"lPv,rIL\"))\n \t  (const_int 0)))]\n   \"TARGET_THUMB2\"\n   \"*\n@@ -1271,8 +1304,10 @@\n       return \\\"cmn\\\\t%0, %1\\\";\n   \"\n   [(set_attr \"conds\" \"set\")\n-   (set_attr \"length\" \"2,2,4,4\")\n-   (set_attr \"type\" \"alus_imm,alus_sreg,alus_imm,alus_sreg\")]\n+   (set_attr \"length\" \"2,4\")\n+   (set (attr \"type\") (if_then_else (match_operand 2 \"const_int_operand\" \"\")\n+                                    (const_string \"alus_imm\")\n+                                    (const_string \"alus_sreg\")))]\n )\n \n (define_insn \"*thumb2_mulsi_short\""}]}