{"sha": "86262bb186922557dba15c5fa21785837f4006cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODYyNjJiYjE4NjkyMjU1N2RiYTE1YzVmYTIxNzg1ODM3ZjQwMDZjZA==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2011-04-26T15:49:22Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2011-04-26T15:49:22Z"}, "message": "class.c (cp_fold_obj_type_ref): Remove.\n\n2011-04-26  Martin Jambor  <mjambor@suse.cz>\n\n\t* class.c (cp_fold_obj_type_ref): Remove.\n\t* cp-tree.h (cp_fold_obj_type_ref): Remove declaration.\n\nFrom-SVN: r172977", "tree": {"sha": "218d95c71f1fa0c5326665282d638411daab546d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/218d95c71f1fa0c5326665282d638411daab546d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86262bb186922557dba15c5fa21785837f4006cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86262bb186922557dba15c5fa21785837f4006cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86262bb186922557dba15c5fa21785837f4006cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86262bb186922557dba15c5fa21785837f4006cd/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9c7bd91af7c94d7628b2fa3f8be2e0098f4a2692", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c7bd91af7c94d7628b2fa3f8be2e0098f4a2692", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c7bd91af7c94d7628b2fa3f8be2e0098f4a2692"}], "stats": {"total": 34, "additions": 5, "deletions": 29}, "files": [{"sha": "cf477a81390f417ca9f0e596c2a802cdae576eba", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86262bb186922557dba15c5fa21785837f4006cd/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86262bb186922557dba15c5fa21785837f4006cd/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=86262bb186922557dba15c5fa21785837f4006cd", "patch": "@@ -1,3 +1,8 @@\n+2011-04-26  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* class.c (cp_fold_obj_type_ref): Remove.\n+\t* cp-tree.h (cp_fold_obj_type_ref): Remove declaration.\n+\n 2011-04-25  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* cp-tree.def: Add a new UNDERLYING_TYPE tree code."}, {"sha": "fa5e00fcb1fd25cecf33336eaf2925540564f554", "filename": "gcc/cp/class.c", "status": "modified", "additions": 0, "deletions": 28, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86262bb186922557dba15c5fa21785837f4006cd/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86262bb186922557dba15c5fa21785837f4006cd/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=86262bb186922557dba15c5fa21785837f4006cd", "patch": "@@ -8377,32 +8377,4 @@ build_rtti_vtbl_entries (tree binfo, vtbl_init_data* vid)\n   CONSTRUCTOR_APPEND_ELT (vid->inits, NULL_TREE, init);\n }\n \n-/* Fold a OBJ_TYPE_REF expression to the address of a function.\n-   KNOWN_TYPE carries the true type of OBJ_TYPE_REF_OBJECT(REF).  */\n-\n-tree\n-cp_fold_obj_type_ref (tree ref, tree known_type)\n-{\n-  HOST_WIDE_INT index = tree_low_cst (OBJ_TYPE_REF_TOKEN (ref), 1);\n-  HOST_WIDE_INT i = 0;\n-  tree v = BINFO_VIRTUALS (TYPE_BINFO (known_type));\n-  tree fndecl;\n-\n-  while (i != index)\n-    {\n-      i += (TARGET_VTABLE_USES_DESCRIPTORS\n-\t    ? TARGET_VTABLE_USES_DESCRIPTORS : 1);\n-      v = TREE_CHAIN (v);\n-    }\n-\n-  fndecl = BV_FN (v);\n-\n-#ifdef ENABLE_CHECKING\n-  gcc_assert (tree_int_cst_equal (OBJ_TYPE_REF_TOKEN (ref),\n-\t\t\t\t  DECL_VINDEX (fndecl)));\n-#endif\n-\n-  return build_address (fndecl);\n-}\n-\n #include \"gt-cp-class.h\""}, {"sha": "cb04b2477d07c79bd39666b02990b2efb38e9237", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86262bb186922557dba15c5fa21785837f4006cd/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86262bb186922557dba15c5fa21785837f4006cd/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=86262bb186922557dba15c5fa21785837f4006cd", "patch": "@@ -4718,7 +4718,6 @@ extern void note_name_declared_in_class\t\t(tree, tree);\n extern tree get_vtbl_decl_for_binfo\t\t(tree);\n extern void debug_class\t\t\t\t(tree);\n extern void debug_thunks\t\t\t(tree);\n-extern tree cp_fold_obj_type_ref\t\t(tree, tree);\n extern void set_linkage_according_to_type\t(tree, tree);\n extern void determine_key_method\t\t(tree);\n extern void check_for_override\t\t\t(tree, tree);"}]}