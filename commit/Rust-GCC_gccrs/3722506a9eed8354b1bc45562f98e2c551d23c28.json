{"sha": "3722506a9eed8354b1bc45562f98e2c551d23c28", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcyMjUwNmE5ZWVkODM1NGIxYmM0NTU2MmY5OGUyYzU1MWQyM2MyOA==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2007-04-28T08:00:44Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2007-04-28T08:00:44Z"}, "message": "tree-cfg.c (move_block_to_fn): Release bb from dominance info.\n\n\t* tree-cfg.c (move_block_to_fn): Release bb from dominance\n\tinfo.  Update last_basic_block correctly.\n\nFrom-SVN: r124257", "tree": {"sha": "6d815e4e61f8b9aa0b5bfc6b631453fcd1edda77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d815e4e61f8b9aa0b5bfc6b631453fcd1edda77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3722506a9eed8354b1bc45562f98e2c551d23c28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3722506a9eed8354b1bc45562f98e2c551d23c28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3722506a9eed8354b1bc45562f98e2c551d23c28", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3722506a9eed8354b1bc45562f98e2c551d23c28/comments", "author": null, "committer": null, "parents": [{"sha": "3389ed59f601a94aadcd8fc0f625cbd4720b9bd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3389ed59f601a94aadcd8fc0f625cbd4720b9bd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3389ed59f601a94aadcd8fc0f625cbd4720b9bd5"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "8240b2ac234569fb376cea7a47c96943202cc320", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3722506a9eed8354b1bc45562f98e2c551d23c28/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3722506a9eed8354b1bc45562f98e2c551d23c28/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3722506a9eed8354b1bc45562f98e2c551d23c28", "patch": "@@ -1,3 +1,8 @@\n+2007-04-28  Zdenek Dvorak  <dvorakz@suse.cz>\n+\n+\t* tree-cfg.c (move_block_to_fn): Release bb from dominance\n+\tinfo.  Update last_basic_block correctly.\n+\n 2007-04-27  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n \tPR target/31701"}, {"sha": "89339bc9a61ea7ebffda6588a788d8a2637afb3c", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3722506a9eed8354b1bc45562f98e2c551d23c28/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3722506a9eed8354b1bc45562f98e2c551d23c28/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=3722506a9eed8354b1bc45562f98e2c551d23c28", "patch": "@@ -4571,6 +4571,9 @@ move_block_to_fn (struct function *dest_cfun, basic_block bb,\n   struct move_stmt_d d;\n   unsigned old_len, new_len;\n \n+  /* Remove BB from dominance structures.  */\n+  delete_from_dominance_info (CDI_DOMINATORS, bb);\n+\n   /* Link BB to the new linked list.  */\n   move_block_after (bb, after);\n \n@@ -4589,8 +4592,8 @@ move_block_to_fn (struct function *dest_cfun, basic_block bb,\n   /* Grow DEST_CFUN's basic block array if needed.  */\n   cfg = dest_cfun->cfg;\n   cfg->x_n_basic_blocks++;\n-  if (bb->index > cfg->x_last_basic_block)\n-    cfg->x_last_basic_block = bb->index;\n+  if (bb->index >= cfg->x_last_basic_block)\n+    cfg->x_last_basic_block = bb->index + 1;\n \n   old_len = VEC_length (basic_block, cfg->x_basic_block_info);\n   if ((unsigned) cfg->x_last_basic_block >= old_len)"}]}