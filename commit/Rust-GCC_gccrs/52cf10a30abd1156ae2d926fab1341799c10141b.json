{"sha": "52cf10a30abd1156ae2d926fab1341799c10141b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTJjZjEwYTMwYWJkMTE1NmFlMmQ5MjZmYWIxMzQxNzk5YzEwMTQxYg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-12-27T03:50:27Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-12-27T03:50:27Z"}, "message": "i386.c (ix86_gimplify_va_arg): Also pass the result of type_natural_mode to examine_argument.\n\n        * config/i386/i386.c (ix86_gimplify_va_arg): Also pass the result\n        of type_natural_mode to examine_argument.\n\nFrom-SVN: r92633", "tree": {"sha": "ce4bee796d7a6ee2b6cdcd8f2029cbd9a086a9c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ce4bee796d7a6ee2b6cdcd8f2029cbd9a086a9c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52cf10a30abd1156ae2d926fab1341799c10141b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52cf10a30abd1156ae2d926fab1341799c10141b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52cf10a30abd1156ae2d926fab1341799c10141b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52cf10a30abd1156ae2d926fab1341799c10141b/comments", "author": null, "committer": null, "parents": [{"sha": "551a3297bb7f0468b5ec488641313286ea3e703f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/551a3297bb7f0468b5ec488641313286ea3e703f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/551a3297bb7f0468b5ec488641313286ea3e703f"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "6d26e5bc3e3e6ec8e0df1ddbf393ee1193290aa0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52cf10a30abd1156ae2d926fab1341799c10141b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52cf10a30abd1156ae2d926fab1341799c10141b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=52cf10a30abd1156ae2d926fab1341799c10141b", "patch": "@@ -1,3 +1,13 @@\n+2004-12-26  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/i386/i386.c (ix86_gimplify_va_arg): Also pass the result\n+\tof type_natural_mode to examine_argument.\n+\n+\t* config/i386/i386.md (mov<MMXMODEI>_internal_rex64): New.\n+\t(movv2sf_internal_rex64): New.\n+\t(mov<MMXMODEI>_internal): Use no register preferences at all.\n+\t(movv2sf_internal): Likewise.\n+\n 2004-12-26  Richard Henderson  <rth@redhat.com>\n \n \t* simplify-rtx.c (simplify_relational_operation_1): Don't simplify"}, {"sha": "054da85e404137da548c76ea9a2f26d2ab9b6b94", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52cf10a30abd1156ae2d926fab1341799c10141b/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52cf10a30abd1156ae2d926fab1341799c10141b/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=52cf10a30abd1156ae2d926fab1341799c10141b", "patch": "@@ -3350,6 +3350,7 @@ ix86_gimplify_va_arg (tree valist, tree type, tree *pre_p, tree *post_p)\n   rtx container;\n   int indirect_p = 0;\n   tree ptrtype;\n+  enum machine_mode nat_mode;\n \n   /* Only 64bit target needs something special.  */\n   if (!TARGET_64BIT)\n@@ -3372,9 +3373,9 @@ ix86_gimplify_va_arg (tree valist, tree type, tree *pre_p, tree *post_p)\n   size = int_size_in_bytes (type);\n   rsize = (size + UNITS_PER_WORD - 1) / UNITS_PER_WORD;\n \n-  container = construct_container (type_natural_mode (type), TYPE_MODE (type),\n-\t\t\t\t   type, 0, REGPARM_MAX, SSE_REGPARM_MAX,\n-\t\t\t\t   intreg, 0);\n+  nat_mode = type_natural_mode (type);\n+  container = construct_container (nat_mode, TYPE_MODE (type), type, 0,\n+\t\t\t\t   REGPARM_MAX, SSE_REGPARM_MAX, intreg, 0);\n \n   /* Pull the value out of the saved registers.  */\n \n@@ -3390,8 +3391,7 @@ ix86_gimplify_va_arg (tree valist, tree type, tree *pre_p, tree *post_p)\n       lab_false = create_artificial_label ();\n       lab_over = create_artificial_label ();\n \n-      examine_argument (TYPE_MODE (type), type, 0,\n-\t\t        &needed_intregs, &needed_sseregs);\n+      examine_argument (nat_mode, type, 0, &needed_intregs, &needed_sseregs);\n \n       need_temp = (!REG_P (container)\n \t\t   && ((needed_intregs && TYPE_ALIGN (type) > 64)"}]}