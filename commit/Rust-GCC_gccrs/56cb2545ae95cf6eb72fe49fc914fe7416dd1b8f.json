{"sha": "56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTZjYjI1NDVhZTk1Y2Y2ZWI3MmZlNDlmYzkxNGZlNzQxNmRkMWI4Zg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2008-04-18T19:11:57Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-04-18T19:11:57Z"}, "message": "re PR target/35907 (64-bit power6 glibc miscompilation)\n\n\tPR target/35907\n\t* gcc.target/powerpc/pr35907.c: New test.\n\nCo-Authored-By: Peter Bergner <bergner@vnet.ibm.com>\n\nFrom-SVN: r134447", "tree": {"sha": "6c4a7ae37f1d2da5843bd5bdc2321976ae7ceef1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c4a7ae37f1d2da5843bd5bdc2321976ae7ceef1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3569056b39aa149312e75580a00a6a012eb22d05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3569056b39aa149312e75580a00a6a012eb22d05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3569056b39aa149312e75580a00a6a012eb22d05"}], "stats": {"total": 65, "additions": 65, "deletions": 0}, "files": [{"sha": "86036d7149937dea26cb8e2ca09ecacca2959637", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f", "patch": "@@ -1,3 +1,9 @@\n+2008-04-18  Jakub Jelinek  <jakub@redhat.com>\n+\t    Peter Bergner  <bergner@vnet.ibm.com>\n+\n+\tPR target/35907\n+\t* gcc.target/powerpc/pr35907.c: New test.\n+\n 2008-04-18  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/dynamic_elab_pkg.ads: New helper."}, {"sha": "e1749dea8c90f384e9c4badc26db6b719f2dc0bc", "filename": "gcc/testsuite/gcc.target/powerpc/pr35907.c", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr35907.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr35907.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr35907.c?ref=56cb2545ae95cf6eb72fe49fc914fe7416dd1b8f", "patch": "@@ -0,0 +1,59 @@\n+/* PR target/35907 */\n+/* { dg-do run { target powerpc*-*-* } } */\n+/* { dg-require-effective-target powerpc_altivec_ok } */\n+/* { dg-options \"-O2 -maltivec\" } */\n+\n+#include \"altivec_check.h\"\n+\n+#define vector __attribute__((vector_size (16)))\n+union\n+{\n+  vector int k;\n+  int c[16];\n+} u, v, w;\n+vector int m;\n+\n+void __attribute__((noinline))\n+bar (void *i, vector int j)\n+{\n+  asm volatile (\"\" : : \"r\" (i), \"r\" (&j) : \"memory\");\n+}\n+\n+int __attribute__((noinline))\n+foo (int i, vector int j)\n+{\n+  char *p = __builtin_alloca (64 + i);\n+  m += u.k;\n+  v.k = m;\n+  w.k = j;\n+  if (__builtin_memcmp (&v.c, &w.c, 16) != 0)\n+    __builtin_abort ();\n+  j += u.k;\n+  bar (p, j);\n+  j += u.k;\n+  bar (p, j);\n+  return 0;\n+}\n+\n+void\n+test (void)\n+{\n+  vector int l;\n+  int i;\n+  for (i = 0; i < 4; i++)\n+    u.c[i] = i;\n+  l = u.k;\n+  if (foo (64, l))\n+    __builtin_abort ();\n+  l += u.k;\n+  if (foo (64, l))\n+    __builtin_abort ();\n+}\n+\n+int\n+main ()\n+{\n+  altivec_check ();\n+  test ();\n+  return 0;\n+}"}]}