{"sha": "0f9befa1413555608a7f1d1c6bb1982101314a7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGY5YmVmYTE0MTM1NTU2MDhhN2YxZDFjNmJiMTk4MjEwMTMxNGE3Yw==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2016-03-11T11:25:29Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2016-03-11T11:25:29Z"}, "message": "re PR rtl-optimization/70160 (gcc ICE at -O2 (seg fault) and above on valid code on x86_64-linux-gnu)\n\ngcc/\n\n\tPR target/70160\n\t* config/i386/i386.c (scalar_chain::convert_reg): Skip uses\n\tof uninitialized values.\n\ngcc/testsuite/\n\n\tPR target/70160\n\t* gcc.target/i386/pr70160.c: New test.\n\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r234135", "tree": {"sha": "518a468eb8868ce98f1f9ca61f5129cf12c430c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/518a468eb8868ce98f1f9ca61f5129cf12c430c0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0f9befa1413555608a7f1d1c6bb1982101314a7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f9befa1413555608a7f1d1c6bb1982101314a7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f9befa1413555608a7f1d1c6bb1982101314a7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f9befa1413555608a7f1d1c6bb1982101314a7c/comments", "author": null, "committer": null, "parents": [{"sha": "432d4670c0457098bc6e0e70963881c232350daa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/432d4670c0457098bc6e0e70963881c232350daa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/432d4670c0457098bc6e0e70963881c232350daa"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "9c92d9bb236a346b9081dc068dc679ab1e3ed562", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0f9befa1413555608a7f1d1c6bb1982101314a7c", "patch": "@@ -1,3 +1,10 @@\n+2016-03-11  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\t    Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/70160\n+\t* config/i386/i386.c (scalar_chain::convert_reg): Skip uses\n+\tof uninitialized values.\n+\n 2016-03-11  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n \n \t* config/s390/s390.md (\"trunctddd2\"): Turn former define_insn into"}, {"sha": "3d8dbc48e5f3202cfc57974ecb7c4079c074d77f", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=0f9befa1413555608a7f1d1c6bb1982101314a7c", "patch": "@@ -3372,8 +3372,11 @@ scalar_chain::convert_reg (unsigned regno)\n \t    bitmap_clear_bit (conv, DF_REF_INSN_UID (ref));\n \t  }\n       }\n-    else if (NONDEBUG_INSN_P (DF_REF_INSN (ref)))\n+    /* Skip debug insns and uninitialized uses.  */\n+    else if (DF_REF_CHAIN (ref)\n+\t     && NONDEBUG_INSN_P (DF_REF_INSN (ref)))\n       {\n+\tgcc_assert (scopy);\n \treplace_rtx (DF_REF_INSN (ref), reg, scopy);\n \tdf_insn_rescan (DF_REF_INSN (ref));\n       }"}, {"sha": "f850e462aab9d4b5b55c45dbe2f8d0df77c49de1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0f9befa1413555608a7f1d1c6bb1982101314a7c", "patch": "@@ -1,3 +1,8 @@\n+2016-03-11  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\tPR target/70160\n+\t* gcc.target/i386/pr70160.c: New test.\n+\n 2016-03-11  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n \n \t* gcc.target/s390/dfp-1.c: New test."}, {"sha": "725e95566ac5853f84aebfe6915e1fde71739724", "filename": "gcc/testsuite/gcc.target/i386/pr70160.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70160.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f9befa1413555608a7f1d1c6bb1982101314a7c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70160.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70160.c?ref=0f9befa1413555608a7f1d1c6bb1982101314a7c", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-do compile { target { ia32 } } } */\n+/* { dg-options \"-O2 -msse2 -Wno-uninitialized -Wno-maybe-uninitialized\" } */\n+\n+long long a;\n+void fn1();\n+void fn2(unsigned t, int a_int, unsigned p)\n+{\n+  long long x;\n+  int i, j = 1;\n+  t = i;\n+  for (; j;) {\n+    a = x;\n+    x = 1 + t;\n+    j += a_int;\n+    fn1();\n+    if (x == 1)\n+      return;\n+  }\n+}"}]}