{"sha": "d64257a4ed4f91c1dd76bda5a975c8bfa070bc38", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDY0MjU3YTRlZDRmOTFjMWRkNzZiZGE1YTk3NWM4YmZhMDcwYmMzOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-03-20T13:00:48Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-03-20T13:00:48Z"}, "message": "re PR target/84990 (Boostrap broken with --enable-checking=release and Ada)\n\n\tPR target/84990\n\t* dwarf2asm.c (dw2_output_indirect_constant_1): Temporarily turn off\n\tflag_section_anchors.\n\t* varasm.c (use_blocks_for_decl_p): Remove hack for\n\tdw2_force_const_mem.\n\nFrom-SVN: r258681", "tree": {"sha": "70eb1d2a137dab20569fdce0565b0be498f79ea7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70eb1d2a137dab20569fdce0565b0be498f79ea7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d9bf40a181b32e4d5e581ec10d48803ea4a43f9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9bf40a181b32e4d5e581ec10d48803ea4a43f9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9bf40a181b32e4d5e581ec10d48803ea4a43f9d"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "3a7ebc9e19d508931ed98c5cd5bbb0baf7ba6cf4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d64257a4ed4f91c1dd76bda5a975c8bfa070bc38", "patch": "@@ -1,5 +1,11 @@\n 2018-03-20  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR target/84990\n+\t* dwarf2asm.c (dw2_output_indirect_constant_1): Temporarily turn off\n+\tflag_section_anchors.\n+\t* varasm.c (use_blocks_for_decl_p): Remove hack for\n+\tdw2_force_const_mem.\n+\n \tPR target/84845\n \t* config/aarch64/aarch64.md (*aarch64_reg_<mode>3_neg_mask2): Rename\n \tto ..."}, {"sha": "53fc0dab0b274cd97e2216cd5297e11eb9437357", "filename": "gcc/dwarf2asm.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38/gcc%2Fdwarf2asm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38/gcc%2Fdwarf2asm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2asm.c?ref=d64257a4ed4f91c1dd76bda5a975c8bfa070bc38", "patch": "@@ -973,7 +973,13 @@ dw2_output_indirect_constant_1 (const char *sym, tree id)\n   unsigned int save_flag_sanitize = flag_sanitize;\n   flag_sanitize &= ~(SANITIZE_ADDRESS | SANITIZE_USER_ADDRESS\n \t\t     | SANITIZE_KERNEL_ADDRESS);\n+  /* And also temporarily disable -fsection-anchors.  These indirect constants\n+     are never referenced from code, so it doesn't make any sense to aggregate\n+     them in blocks.  */\n+  int save_flag_section_anchors = flag_section_anchors;\n+  flag_section_anchors = 0;\n   assemble_variable (decl, 1, 1, 1);\n+  flag_section_anchors = save_flag_section_anchors;\n   flag_sanitize = save_flag_sanitize;\n   assemble_integer (sym_ref, POINTER_SIZE_UNITS, POINTER_SIZE, 1);\n "}, {"sha": "d7290ae534d061cb6a74dc30f924a6269cb6d9c6", "filename": "gcc/varasm.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d64257a4ed4f91c1dd76bda5a975c8bfa070bc38/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=d64257a4ed4f91c1dd76bda5a975c8bfa070bc38", "patch": "@@ -1253,13 +1253,6 @@ use_blocks_for_decl_p (tree decl)\n   if (!VAR_P (decl) && TREE_CODE (decl) != CONST_DECL)\n     return false;\n \n-  /* Detect decls created by dw2_force_const_mem.  Such decls are\n-     special because DECL_INITIAL doesn't specify the decl's true value.\n-     dw2_output_indirect_constants will instead call assemble_variable\n-     with dont_output_data set to 1 and then print the contents itself.  */\n-  if (DECL_INITIAL (decl) == decl)\n-    return false;\n-\n   /* If this decl is an alias, then we don't want to emit a\n      definition.  */\n   if (VAR_P (decl)"}]}