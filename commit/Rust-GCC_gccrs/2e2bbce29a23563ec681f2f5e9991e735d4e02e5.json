{"sha": "2e2bbce29a23563ec681f2f5e9991e735d4e02e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmUyYmJjZTI5YTIzNTYzZWM2ODFmMmY1ZTk5OTFlNzM1ZDRlMDJlNQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-07-28T13:02:42Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-07-28T13:02:42Z"}, "message": "(final_start_function): If SDB_DEBUG, call sdbout_begin_function.\n\nIf XCOFF_DEBUG, call xcoffout_begin_function instead of\nxcoffout_output_first_source_line.\n(final_scan_insn): Don't call sdbout_begin_function or xcoffout_begin_function.\n\nFrom-SVN: r10181", "tree": {"sha": "938be3b0551d76afd12b183abff9be181913dc2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/938be3b0551d76afd12b183abff9be181913dc2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e2bbce29a23563ec681f2f5e9991e735d4e02e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e2bbce29a23563ec681f2f5e9991e735d4e02e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e2bbce29a23563ec681f2f5e9991e735d4e02e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e2bbce29a23563ec681f2f5e9991e735d4e02e5/comments", "author": null, "committer": null, "parents": [{"sha": "192616a4f0b00801aadfd0d4efc6d3ca80495671", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/192616a4f0b00801aadfd0d4efc6d3ca80495671", "html_url": "https://github.com/Rust-GCC/gccrs/commit/192616a4f0b00801aadfd0d4efc6d3ca80495671"}], "stats": {"total": 30, "additions": 12, "deletions": 18}, "files": [{"sha": "2e2c6e108eeed82846b898eabe9322e818d1d5a5", "filename": "gcc/final.c", "status": "modified", "additions": 12, "deletions": 18, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e2bbce29a23563ec681f2f5e9991e735d4e02e5/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e2bbce29a23563ec681f2f5e9991e735d4e02e5/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=2e2bbce29a23563ec681f2f5e9991e735d4e02e5", "patch": "@@ -891,19 +891,19 @@ final_start_function (first, file, optimize)\n       last_linenum = high_block_linenum = high_function_linenum\n \t= NOTE_LINE_NUMBER (first);\n \n+      /* For SDB and XCOFF, the function beginning must be marked between\n+\t the function label and the prologue.  */\n+#ifdef SDB_DEBUGGING_INFO\n       if (write_symbols == SDB_DEBUG)\n-\t/* For sdb, let's not, but say we did.\n-\t   We need to set last_linenum for sdbout_function_begin,\n-\t   but we can't have an actual line number before the .bf symbol.\n-\t   (sdb_begin_function_line is not set,\n-\t   and other compilers don't do it.)  */\n-\t;\n+\tsdbout_begin_function (last_linenum);\n+      else\n+#endif\n #ifdef XCOFF_DEBUGGING_INFO\n-      else if (write_symbols == XCOFF_DEBUG)\n-\txcoffout_output_first_source_line (file, last_linenum);\n+\tif (write_symbols == XCOFF_DEBUG)\n+\t  xcoffout_begin_function (file, last_linenum);\n+\telse\n #endif\t  \n-      else\n-\toutput_source_line (file, first);\n+\t  output_source_line (file, first);\n     }\n \n #ifdef LEAF_REG_REMAP\n@@ -1312,15 +1312,9 @@ final_scan_insn (insn, file, optimize, prescan, nopeepholes)\n \tbreak;\n       if (NOTE_LINE_NUMBER (insn) == NOTE_INSN_FUNCTION_BEG)\n \t{\n-#ifdef SDB_DEBUGGING_INFO\n-\t  if (write_symbols == SDB_DEBUG)\n-\t    sdbout_begin_function (last_linenum);\n-#endif\n-#ifdef XCOFF_DEBUGGING_INFO\n-\t  if (write_symbols == XCOFF_DEBUG)\n-\t    xcoffout_begin_function (file, last_linenum);\n-#endif\n #ifdef DWARF_DEBUGGING_INFO\n+\t  /* This outputs a marker where the function body starts, so it\n+\t     must be after the prologue.  */\n \t  if (write_symbols == DWARF_DEBUG)\n \t    dwarfout_begin_function ();\n #endif"}]}