{"sha": "d71176b6ad21d75410f8a4428e5a34164d90118d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDcxMTc2YjZhZDIxZDc1NDEwZjhhNDQyOGU1YTM0MTY0ZDkwMTE4ZA==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2006-11-30T21:53:57Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2006-11-30T21:53:57Z"}, "message": "rtti.c (get_tinfo_decl): Handle return value from pushdecl_top_level_and_finish.\n\n\t* rtti.c (get_tinfo_decl): Handle return value from\n\tpushdecl_top_level_and_finish.\n\nFrom-SVN: r119379", "tree": {"sha": "222adb29ce939ab8f5040286da6385417f93287f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/222adb29ce939ab8f5040286da6385417f93287f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d71176b6ad21d75410f8a4428e5a34164d90118d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d71176b6ad21d75410f8a4428e5a34164d90118d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d71176b6ad21d75410f8a4428e5a34164d90118d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d71176b6ad21d75410f8a4428e5a34164d90118d/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9fa2efcd3d3adb1eac151d510ef2c8dd1799b4a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fa2efcd3d3adb1eac151d510ef2c8dd1799b4a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fa2efcd3d3adb1eac151d510ef2c8dd1799b4a0"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "9b78a29fdf740e581aa0fa053c09c97684449901", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d71176b6ad21d75410f8a4428e5a34164d90118d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d71176b6ad21d75410f8a4428e5a34164d90118d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d71176b6ad21d75410f8a4428e5a34164d90118d", "patch": "@@ -1,3 +1,8 @@\n+2006-11-30  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* rtti.c (get_tinfo_decl): Handle return value from\n+\tpushdecl_top_level_and_finish.\n+\n 2006-11-29  Lee Millward  <lee.millward@codesourcery.com> \n \n \tPR c++/29022"}, {"sha": "f185cc5c6a9d822a977d148039e6e2e0ae077e16", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d71176b6ad21d75410f8a4428e5a34164d90118d/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d71176b6ad21d75410f8a4428e5a34164d90118d/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=d71176b6ad21d75410f8a4428e5a34164d90118d", "patch": "@@ -384,10 +384,11 @@ get_tinfo_decl (tree type)\n \t define it later if we need to do so.  */\n       DECL_EXTERNAL (d) = 1;\n       DECL_NOT_REALLY_EXTERN (d) = 1;\n+      set_linkage_according_to_type (type, d);\n+\n+      d = pushdecl_top_level_and_finish (d, NULL_TREE);\n       if (CLASS_TYPE_P (type))\n \tCLASSTYPE_TYPEINFO_VAR (TYPE_MAIN_VARIANT (type)) = d;\n-      set_linkage_according_to_type (type, d);\n-      pushdecl_top_level_and_finish (d, NULL_TREE);\n \n       /* Add decl to the global array of tinfo decls.  */\n       VEC_safe_push (tree, gc, unemitted_tinfo_decls, d);"}]}