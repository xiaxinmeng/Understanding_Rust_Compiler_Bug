{"sha": "08d105faa5a0d6ce749e66f9485cace10ea3a375", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhkMTA1ZmFhNWEwZDZjZTc0OWU2NmY5NDg1Y2FjZTEwZWEzYTM3NQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2004-05-25T19:46:49Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2004-05-25T19:46:49Z"}, "message": "configure.ac (gcc_cv_ld): Prefer in-tree ld over whatever the top-level detects...\n\n* configure.ac (gcc_cv_ld): Prefer in-tree ld over whatever the\ntop-level detects, except when in-tree ld is being cross-built.\n(gcc_cv_as): Likewise for as.  Use AS_FOR_TARGET otherwise, and\nthen AS only if target is host.\n* configure: Rebuilt.\n\nFrom-SVN: r82258", "tree": {"sha": "da15d18ba1bd4611a7c431b2ffb0812fc12b0da0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da15d18ba1bd4611a7c431b2ffb0812fc12b0da0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08d105faa5a0d6ce749e66f9485cace10ea3a375", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08d105faa5a0d6ce749e66f9485cace10ea3a375", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08d105faa5a0d6ce749e66f9485cace10ea3a375", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08d105faa5a0d6ce749e66f9485cace10ea3a375/comments", "author": null, "committer": null, "parents": [{"sha": "4fc4dd12a4709902916130fa0cb01209341bb0b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fc4dd12a4709902916130fa0cb01209341bb0b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4fc4dd12a4709902916130fa0cb01209341bb0b4"}], "stats": {"total": 255, "additions": 107, "deletions": 148}, "files": [{"sha": "19c5a6610daec61025555d53b1cea8d6310b885a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08d105faa5a0d6ce749e66f9485cace10ea3a375/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08d105faa5a0d6ce749e66f9485cace10ea3a375/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=08d105faa5a0d6ce749e66f9485cace10ea3a375", "patch": "@@ -1,3 +1,11 @@\n+2004-05-25  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* configure.ac (gcc_cv_ld): Prefer in-tree ld over whatever the\n+\ttop-level detects, except when in-tree ld is being cross-built.\n+\t(gcc_cv_as): Likewise for as.  Use AS_FOR_TARGET otherwise, and\n+\tthen AS only if target is host.\n+\t* configure: Rebuilt.\n+\n 2004-05-25  Vladimir Makarov  <vmakarov@redhat.com>\n \n \t* global.c (global_alloc): Call make_accurate_live_analysis."}, {"sha": "970bc72d65d397c0eec82af76ac28129122e54fe", "filename": "gcc/configure", "status": "modified", "additions": 80, "deletions": 138, "changes": 218, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08d105faa5a0d6ce749e66f9485cace10ea3a375/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08d105faa5a0d6ce749e66f9485cace10ea3a375/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=08d105faa5a0d6ce749e66f9485cace10ea3a375", "patch": "@@ -3259,68 +3259,6 @@ _ACEOF\n \n   fi\n \n-echo \"$as_me:$LINENO: checking for built-in _Bool\" >&5\n-echo $ECHO_N \"checking for built-in _Bool... $ECHO_C\" >&6\n-if test \"${gcc_cv_c__bool+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-\n-int\n-main ()\n-{\n-_Bool foo;\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  gcc_cv_c__bool=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-gcc_cv_c__bool=no\n-fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-\n-fi\n-echo \"$as_me:$LINENO: result: $gcc_cv_c__bool\" >&5\n-echo \"${ECHO_T}$gcc_cv_c__bool\" >&6\n-if test $gcc_cv_c__bool = yes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define HAVE__BOOL 1\n-_ACEOF\n-\n-fi\n-\n \n # sizeof(char) is 1 by definition.\n echo \"$as_me:$LINENO: checking size of void *\" >&5\n@@ -5307,7 +5245,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:5310: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:5248: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -5798,6 +5736,67 @@ cat >>confdefs.h <<\\_ACEOF\n #define HAVE_STDBOOL_H 1\n _ACEOF\n \n+fi\n+echo \"$as_me:$LINENO: checking for built-in _Bool\" >&5\n+echo $ECHO_N \"checking for built-in _Bool... $ECHO_C\" >&6\n+if test \"${gcc_cv_c__bool+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+_Bool foo;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  gcc_cv_c__bool=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+gcc_cv_c__bool=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+fi\n+echo \"$as_me:$LINENO: result: $gcc_cv_c__bool\" >&5\n+echo \"${ECHO_T}$gcc_cv_c__bool\" >&6\n+if test $gcc_cv_c__bool = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE__BOOL 1\n+_ACEOF\n+\n fi\n \n echo \"$as_me:$LINENO: checking whether string.h and strings.h may both be included\" >&5\n@@ -8933,71 +8932,6 @@ _ACEOF\n \n fi\n \n-echo \"$as_me:$LINENO: checking for uchar\" >&5\n-echo $ECHO_N \"checking for uchar... $ECHO_C\" >&6\n-if test \"${gcc_cv_type_uchar+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-\n-#include \"ansidecl.h\"\n-#include \"system.h\"\n-\n-int\n-main ()\n-{\n-if ((uchar *)0) return 0;\n- if (sizeof(uchar)) return 0;\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_cv_type_uchar=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_cv_type_uchar=no\n-fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-fi\n-echo \"$as_me:$LINENO: result: $gcc_cv_type_uchar\" >&5\n-echo \"${ECHO_T}$gcc_cv_type_uchar\" >&6\n-if test $ac_cv_type_uchar = yes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define HAVE_UCHAR 1\n-_ACEOF\n-\n-fi\n-\n # Restore CFLAGS from before the gcc_AC_NEED_DECLARATIONS tests.\n CFLAGS=\"$saved_CFLAGS\"\n \n@@ -10146,14 +10080,15 @@ gcc_cv_gas_minor_version=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n if test -x \"$DEFAULT_ASSEMBLER\"; then\n \tgcc_cv_as=\"$DEFAULT_ASSEMBLER\"\n-elif test -x \"$AS\"; then\n-\tgcc_cv_as=\"$AS\"\n elif test -x as$host_exeext; then\n \t# Build using assembler in the current directory.\n \tgcc_cv_as=./as$host_exeext\n elif test -f $gcc_cv_as_gas_srcdir/configure.in \\\n-     && test -f ../gas/Makefile; then\n-  # Single tree build which includes gas.\n+     && test -f ../gas/Makefile \\\n+     && test x$build = x$host; then\n+  # Single tree build which includes gas.  We want to prefer it\n+  # over whatever linker top-level may have detected, since\n+  # we'll use what we're building after installation anyway.\n   in_tree_gas=yes\n   gcc_cv_as_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n for f in $gcc_cv_as_bfd_srcdir/configure \\\n@@ -10184,6 +10119,10 @@ gcc_cv_gas_vers=`expr \\( \\( $gcc_cv_gas_major_version \\* 1000 \\) \\\n   then\n     in_tree_gas_is_elf=yes\n   fi\n+elif test -x \"$AS_FOR_TARGET\"; then\n+        gcc_cv_as=\"$AS_FOR_TARGET\"\n+elif test -x \"$AS\" && test x$host = x$target; then\n+\tgcc_cv_as=\"$AS\"\n fi\n \n if test \"x$gcc_cv_as\" = x; then\n@@ -10273,16 +10212,15 @@ gcc_cv_ld_gld_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/ld\n gcc_cv_ld_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n if test -x \"$DEFAULT_LINKER\"; then\n \tgcc_cv_ld=\"$DEFAULT_LINKER\"\n-elif test -x \"$LD_FOR_TARGET\"; then\n-        gcc_cv_ld=\"$LD_FOR_TARGET\"\n-elif test -x \"$LD\" && test x$host = x$target; then\n-\tgcc_cv_ld=\"$LD\"\n elif test -x collect-ld$host_exeext; then\n \t# Build using linker in the current directory.\n \tgcc_cv_ld=./collect-ld$host_exeext\n elif test -f $gcc_cv_ld_gld_srcdir/configure.in \\\n-     && test -f ../ld/Makefile; then\n-\t# Single tree build which includes ld.\n+     && test -f ../ld/Makefile \\\n+     && test x$build = x$host; then\n+\t# Single tree build which includes ld.  We want to prefer it\n+\t# over whatever linker top-level may have detected, since\n+\t# we'll use what we're building after installation anyway.\n \tin_tree_ld=yes\n \tin_tree_ld_is_elf=no\n \tif (grep 'EMUL = .*elf' ../ld/Makefile \\\n@@ -10301,6 +10239,10 @@ elif test -f $gcc_cv_ld_gld_srcdir/configure.in \\\n \trm -f collect-ld$host_exeext\n \t$symbolic_link ../ld/ld-new$host_exeext collect-ld$host_exeext \\\n \t\t2>/dev/null\n+elif test -x \"$LD_FOR_TARGET\"; then\n+        gcc_cv_ld=\"$LD_FOR_TARGET\"\n+elif test -x \"$LD\" && test x$host = x$target; then\n+\tgcc_cv_ld=\"$LD\"\n fi\n \n if test \"x$gcc_cv_ld\" = x; then"}, {"sha": "b219c140e1c9e8368afa279e86ca915f773c47fe", "filename": "gcc/configure.ac", "status": "modified", "additions": 19, "deletions": 10, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08d105faa5a0d6ce749e66f9485cace10ea3a375/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08d105faa5a0d6ce749e66f9485cace10ea3a375/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=08d105faa5a0d6ce749e66f9485cace10ea3a375", "patch": "@@ -1689,14 +1689,15 @@ gcc_cv_gas_minor_version=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n if test -x \"$DEFAULT_ASSEMBLER\"; then\n \tgcc_cv_as=\"$DEFAULT_ASSEMBLER\"\n-elif test -x \"$AS\"; then\n-\tgcc_cv_as=\"$AS\"\n elif test -x as$host_exeext; then\n \t# Build using assembler in the current directory.\n \tgcc_cv_as=./as$host_exeext\n elif test -f $gcc_cv_as_gas_srcdir/configure.in \\\n-     && test -f ../gas/Makefile; then\n-  # Single tree build which includes gas.\n+     && test -f ../gas/Makefile \\\n+     && test x$build = x$host; then\n+  # Single tree build which includes gas.  We want to prefer it\n+  # over whatever linker top-level may have detected, since\n+  # we'll use what we're building after installation anyway.\n   in_tree_gas=yes\n   _gcc_COMPUTE_GAS_VERSION\n   rm -f as$host_exeext\n@@ -1708,6 +1709,11 @@ elif test -f $gcc_cv_as_gas_srcdir/configure.in \\\n   then\n     in_tree_gas_is_elf=yes\n   fi\n+m4_pattern_allow([AS_FOR_TARGET])dnl\n+elif test -x \"$AS_FOR_TARGET\"; then\n+        gcc_cv_as=\"$AS_FOR_TARGET\"\n+elif test -x \"$AS\" && test x$host = x$target; then\n+\tgcc_cv_as=\"$AS\"\n fi\n \n if test \"x$gcc_cv_as\" = x; then\n@@ -1794,16 +1800,15 @@ gcc_cv_ld_gld_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/ld\n gcc_cv_ld_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n if test -x \"$DEFAULT_LINKER\"; then\n \tgcc_cv_ld=\"$DEFAULT_LINKER\"\n-elif test -x \"$LD_FOR_TARGET\"; then\n-        gcc_cv_ld=\"$LD_FOR_TARGET\"\n-elif test -x \"$LD\" && test x$host = x$target; then\n-\tgcc_cv_ld=\"$LD\"\n elif test -x collect-ld$host_exeext; then\n \t# Build using linker in the current directory.\n \tgcc_cv_ld=./collect-ld$host_exeext\n elif test -f $gcc_cv_ld_gld_srcdir/configure.in \\\n-     && test -f ../ld/Makefile; then\n-\t# Single tree build which includes ld.\n+     && test -f ../ld/Makefile \\\n+     && test x$build = x$host; then\n+\t# Single tree build which includes ld.  We want to prefer it\n+\t# over whatever linker top-level may have detected, since\n+\t# we'll use what we're building after installation anyway.\n \tin_tree_ld=yes\n \tin_tree_ld_is_elf=no\n \tif (grep 'EMUL = .*elf' ../ld/Makefile \\\n@@ -1826,6 +1831,10 @@ changequote([,])dnl\n \trm -f collect-ld$host_exeext\n \t$symbolic_link ../ld/ld-new$host_exeext collect-ld$host_exeext \\\n \t\t2>/dev/null\n+elif test -x \"$LD_FOR_TARGET\"; then\n+        gcc_cv_ld=\"$LD_FOR_TARGET\"\n+elif test -x \"$LD\" && test x$host = x$target; then\n+\tgcc_cv_ld=\"$LD\"\n fi\n \n if test \"x$gcc_cv_ld\" = x; then"}]}