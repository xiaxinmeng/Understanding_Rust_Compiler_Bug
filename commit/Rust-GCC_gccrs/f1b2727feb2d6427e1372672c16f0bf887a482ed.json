{"sha": "f1b2727feb2d6427e1372672c16f0bf887a482ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFiMjcyN2ZlYjJkNjQyN2UxMzcyNjcyYzE2ZjBiZjg4N2E0ODJlZA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2018-12-24T08:43:20Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2018-12-24T08:43:20Z"}, "message": "darwin, configuration, check properly for dwarf2 debug line support\n\nThis corrects a long-standing misconfiguration for Darwin.\nThe assembler supports the \u201c.file\u201d and \u201c.loc\u201d directives, but\nthe GCC configury was not detecting this because it was \nusing objdump, which does not exist on most Darwin installations.\n\nWe added support for \u201cotool\u201d to GCC and now we can use that to\nmake the check that\u2019s done with objdump on ELF targets.\n\n2018-12-24  Iain Sandoe  <iain@sandoe.co.uk>\n\n\t* configure.ac (dwarf2_debug_line): Check for the debug_line\n\tsection using otool when there\u2019s no objdump available.\n\t* configure: Regenerate.\n\nFrom-SVN: r267393", "tree": {"sha": "346e8f37b3aa599e8f6bfde3370618218ee78641", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/346e8f37b3aa599e8f6bfde3370618218ee78641"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1b2727feb2d6427e1372672c16f0bf887a482ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1b2727feb2d6427e1372672c16f0bf887a482ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1b2727feb2d6427e1372672c16f0bf887a482ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1b2727feb2d6427e1372672c16f0bf887a482ed/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "959b8c8257b8b6fa547c25098d1024b53e5f9b45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/959b8c8257b8b6fa547c25098d1024b53e5f9b45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/959b8c8257b8b6fa547c25098d1024b53e5f9b45"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "310bbec4f5b8ef087aaa73f3e14c402cceecbaac", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1b2727feb2d6427e1372672c16f0bf887a482ed/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1b2727feb2d6427e1372672c16f0bf887a482ed/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f1b2727feb2d6427e1372672c16f0bf887a482ed", "patch": "@@ -1,3 +1,9 @@\n+2018-12-24  Iain Sandoe  <iain@sandoe.co.uk>\n+\n+\t* configure.ac (dwarf2_debug_line): Check for the debug_line\n+\tsection using otool when there\u2019s no objdump available.\n+\t* configure: Regenerate.\n+\n 2018-12-24  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* ipa-utils.c (ipa_merge_profiles): Fix updating of fnsummary;"}, {"sha": "caebe4c0885277cb158334238f60fddb0bdc3f1e", "filename": "gcc/configure", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1b2727feb2d6427e1372672c16f0bf887a482ed/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1b2727feb2d6427e1372672c16f0bf887a482ed/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=f1b2727feb2d6427e1372672c16f0bf887a482ed", "patch": "@@ -27724,6 +27724,10 @@ fi\n    && $gcc_cv_objdump -h conftest.o 2> /dev/null \\\n       | grep debug_line > /dev/null 2>&1; then\n      gcc_cv_as_dwarf2_debug_line=yes\n+   elif test x$gcc_cv_otool != x \\\n+   && $gcc_cv_otool -l conftest.o 2> /dev/null \\\n+      | grep debug_line > /dev/null 2>&1; then\n+     gcc_cv_as_dwarf2_debug_line=yes\n    fi\n     else\n       echo \"configure: failed program was\" >&5"}, {"sha": "a1012325898211eb30a8b5f0e04c08fabbdbfa1d", "filename": "gcc/configure.ac", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1b2727feb2d6427e1372672c16f0bf887a482ed/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1b2727feb2d6427e1372672c16f0bf887a482ed/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=f1b2727feb2d6427e1372672c16f0bf887a482ed", "patch": "@@ -4926,6 +4926,10 @@ if test x\"$insn\" != x; then\n    && $gcc_cv_objdump -h conftest.o 2> /dev/null \\\n       | grep debug_line > /dev/null 2>&1; then\n      gcc_cv_as_dwarf2_debug_line=yes\n+   elif test x$gcc_cv_otool != x \\\n+   && $gcc_cv_otool -l conftest.o 2> /dev/null \\\n+      | grep debug_line > /dev/null 2>&1; then\n+     gcc_cv_as_dwarf2_debug_line=yes\n    fi])\n \n # The .debug_line file table must be in the exact order that"}]}