{"sha": "2185b58266f1c4b0b14a32ef1585f129ae42d9db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE4NWI1ODI2NmYxYzRiMGIxNGEzMmVmMTU4NWYxMjlhZTQyZDlkYg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-10-20T14:31:03Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-10-20T14:31:03Z"}, "message": "i386.md (isa): Remove fma_avx512f.\n\n\t* config/i386/i386.md (isa): Remove fma_avx512f.\n\t* config/i386/sse.md (<avx512>_fmadd_<mode>_mask<round_name>,\n\t<avx512>_fmadd_<mode>_mask3<round_name>,\n\t<avx512>_fmsub_<mode>_mask<round_name>,\n\t<avx512>_fmsub_<mode>_mask3<round_name>,\n\t<avx512>_fnmadd_<mode>_mask<round_name>,\n\t<avx512>_fnmadd_<mode>_mask3<round_name>,\n\t<avx512>_fnmsub_<mode>_mask<round_name>,\n\t<avx512>_fnmsub_<mode>_mask3<round_name>,\n\t<avx512>_fmaddsub_<mode>_mask<round_name>,\n\t<avx512>_fmaddsub_<mode>_mask3<round_name>,\n\t<avx512>_fmsubadd_<mode>_mask<round_name>,\n\t<avx512>_fmsubadd_<mode>_mask3<round_name>): Remove isa attribute.\n\t(*vec_widen_umult_even_v16si<mask_name>,\n\t*vec_widen_smult_even_v16si<mask_name>): Likewise.\n\t(<mask_codefor>avx512bw_dbpsadbw<mode><mask_name>): Likewise.\n\nFrom-SVN: r253939", "tree": {"sha": "edea93b23d066c0adb91a17764b8bb6343ba03ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/edea93b23d066c0adb91a17764b8bb6343ba03ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2185b58266f1c4b0b14a32ef1585f129ae42d9db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2185b58266f1c4b0b14a32ef1585f129ae42d9db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2185b58266f1c4b0b14a32ef1585f129ae42d9db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2185b58266f1c4b0b14a32ef1585f129ae42d9db/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "771c6b44dd035329df336152747fcc689b405199", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/771c6b44dd035329df336152747fcc689b405199", "html_url": "https://github.com/Rust-GCC/gccrs/commit/771c6b44dd035329df336152747fcc689b405199"}], "stats": {"total": 68, "additions": 35, "deletions": 33}, "files": [{"sha": "1274635d19d965004e8e09ba70e93cd64ddd5359", "filename": "gcc/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2185b58266f1c4b0b14a32ef1585f129ae42d9db/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2185b58266f1c4b0b14a32ef1585f129ae42d9db/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2185b58266f1c4b0b14a32ef1585f129ae42d9db", "patch": "@@ -1,3 +1,22 @@\n+2017-10-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* config/i386/i386.md (isa): Remove fma_avx512f.\n+\t* config/i386/sse.md (<avx512>_fmadd_<mode>_mask<round_name>,\n+\t<avx512>_fmadd_<mode>_mask3<round_name>,\n+\t<avx512>_fmsub_<mode>_mask<round_name>,\n+\t<avx512>_fmsub_<mode>_mask3<round_name>,\n+\t<avx512>_fnmadd_<mode>_mask<round_name>,\n+\t<avx512>_fnmadd_<mode>_mask3<round_name>,\n+\t<avx512>_fnmsub_<mode>_mask<round_name>,\n+\t<avx512>_fnmsub_<mode>_mask3<round_name>,\n+\t<avx512>_fmaddsub_<mode>_mask<round_name>,\n+\t<avx512>_fmaddsub_<mode>_mask3<round_name>,\n+\t<avx512>_fmsubadd_<mode>_mask<round_name>,\n+\t<avx512>_fmsubadd_<mode>_mask3<round_name>): Remove isa attribute.\n+\t(*vec_widen_umult_even_v16si<mask_name>,\n+\t*vec_widen_smult_even_v16si<mask_name>): Likewise.\n+\t(<mask_codefor>avx512bw_dbpsadbw<mode><mask_name>): Likewise.\n+\n 2017-10-20  Igor Tsimbalist  <igor.v.tsimbalist@intel.com>\n \n \t* extend.texi: Add 'nocf_check' documentation."}, {"sha": "8c576a2e0364a2604817cd0f75cf3b777be4e869", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2185b58266f1c4b0b14a32ef1585f129ae42d9db/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2185b58266f1c4b0b14a32ef1585f129ae42d9db/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=2185b58266f1c4b0b14a32ef1585f129ae42d9db", "patch": "@@ -798,7 +798,7 @@\n (define_attr \"isa\" \"base,x64,x64_sse4,x64_sse4_noavx,x64_avx,nox64,\n \t\t    sse2,sse2_noavx,sse3,sse4,sse4_noavx,avx,noavx,\n \t\t    avx2,noavx2,bmi,bmi2,fma4,fma,avx512f,noavx512f,\n-\t\t    fma_avx512f,avx512bw,noavx512bw,avx512dq,noavx512dq,\n+\t\t    avx512bw,noavx512bw,avx512dq,noavx512dq,\n \t\t    avx512vl,noavx512vl,x64_avx512dq,x64_avx512bw\"\n   (const_string \"base\"))\n \n@@ -832,8 +832,6 @@\n \t (eq_attr \"isa\" \"fma\") (symbol_ref \"TARGET_FMA\")\n \t (eq_attr \"isa\" \"avx512f\") (symbol_ref \"TARGET_AVX512F\")\n \t (eq_attr \"isa\" \"noavx512f\") (symbol_ref \"!TARGET_AVX512F\")\n-\t (eq_attr \"isa\" \"fma_avx512f\")\n-\t   (symbol_ref \"TARGET_FMA || TARGET_AVX512F\")\n \t (eq_attr \"isa\" \"avx512bw\") (symbol_ref \"TARGET_AVX512BW\")\n \t (eq_attr \"isa\" \"noavx512bw\") (symbol_ref \"!TARGET_AVX512BW\")\n \t (eq_attr \"isa\" \"avx512dq\") (symbol_ref \"TARGET_AVX512DQ\")"}, {"sha": "35e4bc95c4a0b19666739710afad76110f4a2d01", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 15, "deletions": 30, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2185b58266f1c4b0b14a32ef1585f129ae42d9db/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2185b58266f1c4b0b14a32ef1585f129ae42d9db/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=2185b58266f1c4b0b14a32ef1585f129ae42d9db", "patch": "@@ -3713,8 +3713,7 @@\n   \"@\n    vfmadd132<ssemodesuffix>\\t{<round_op5>%2, %3, %0%{%4%}|%0%{%4%}, %3, %2<round_op5>}\n    vfmadd213<ssemodesuffix>\\t{<round_op5>%3, %2, %0%{%4%}|%0%{%4%}, %2, %3<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f,fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"<avx512>_fmadd_<mode>_mask3<round_name>\"\n@@ -3728,8 +3727,7 @@\n \t  (match_operand:<avx512fmaskmode> 4 \"register_operand\" \"Yk\")))]\n   \"TARGET_AVX512F\"\n   \"vfmadd231<ssemodesuffix>\\t{<round_op5>%2, %1, %0%{%4%}|%0%{%4%}, %1, %2<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"*fma_fmsub_<mode>\"\n@@ -3779,8 +3777,7 @@\n   \"@\n    vfmsub132<ssemodesuffix>\\t{<round_op5>%2, %3, %0%{%4%}|%0%{%4%}, %3, %2<round_op5>}\n    vfmsub213<ssemodesuffix>\\t{<round_op5>%3, %2, %0%{%4%}|%0%{%4%}, %2, %3<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f,fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"<avx512>_fmsub_<mode>_mask3<round_name>\"\n@@ -3795,8 +3792,7 @@\n \t  (match_operand:<avx512fmaskmode> 4 \"register_operand\" \"Yk\")))]\n   \"TARGET_AVX512F && <round_mode512bit_condition>\"\n   \"vfmsub231<ssemodesuffix>\\t{<round_op5>%2, %1, %0%{%4%}|%0%{%4%}, %1, %2<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"*fma_fnmadd_<mode>\"\n@@ -3846,8 +3842,7 @@\n   \"@\n    vfnmadd132<ssemodesuffix>\\t{<round_op5>%2, %3, %0%{%4%}|%0%{%4%}, %3, %2<round_op5>}\n    vfnmadd213<ssemodesuffix>\\t{<round_op5>%3, %2, %0%{%4%}|%0%{%4%}, %2, %3<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f,fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"<avx512>_fnmadd_<mode>_mask3<round_name>\"\n@@ -3862,8 +3857,7 @@\n \t  (match_operand:<avx512fmaskmode> 4 \"register_operand\" \"Yk\")))]\n   \"TARGET_AVX512F && <round_mode512bit_condition>\"\n   \"vfnmadd231<ssemodesuffix>\\t{<round_op5>%2, %1, %0%{%4%}|%0%{%4%}, %1, %2<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"*fma_fnmsub_<mode>\"\n@@ -3916,8 +3910,7 @@\n   \"@\n    vfnmsub132<ssemodesuffix>\\t{<round_op5>%2, %3, %0%{%4%}|%0%{%4%}, %3, %2<round_op5>}\n    vfnmsub213<ssemodesuffix>\\t{<round_op5>%3, %2, %0%{%4%}|%0%{%4%}, %2, %3<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f,fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"<avx512>_fnmsub_<mode>_mask3<round_name>\"\n@@ -3933,8 +3926,7 @@\n \t  (match_operand:<avx512fmaskmode> 4 \"register_operand\" \"Yk\")))]\n   \"TARGET_AVX512F\"\n   \"vfnmsub231<ssemodesuffix>\\t{<round_op5>%2, %1, %0%{%4%}|%0%{%4%}, %1, %2<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n ;; FMA parallel floating point multiply addsub and subadd operations.\n@@ -4018,8 +4010,7 @@\n   \"@\n    vfmaddsub132<ssemodesuffix>\\t{<round_op5>%2, %3, %0%{%4%}|%0%{%4%}, %3, %2<round_op5>}\n    vfmaddsub213<ssemodesuffix>\\t{<round_op5>%3, %2, %0%{%4%}|%0%{%4%}, %2, %3<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f,fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"<avx512>_fmaddsub_<mode>_mask3<round_name>\"\n@@ -4034,8 +4025,7 @@\n \t  (match_operand:<avx512fmaskmode> 4 \"register_operand\" \"Yk\")))]\n   \"TARGET_AVX512F\"\n   \"vfmaddsub231<ssemodesuffix>\\t{<round_op5>%2, %1, %0%{%4%}|%0%{%4%}, %1, %2<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"*fma_fmsubadd_<mode>\"\n@@ -4088,8 +4078,7 @@\n   \"@\n    vfmsubadd132<ssemodesuffix>\\t{<round_op5>%2, %3, %0%{%4%}|%0%{%4%}, %3, %2<round_op5>}\n    vfmsubadd213<ssemodesuffix>\\t{<round_op5>%3, %2, %0%{%4%}|%0%{%4%}, %2, %3<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f,fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n (define_insn \"<avx512>_fmsubadd_<mode>_mask3<round_name>\"\n@@ -4105,8 +4094,7 @@\n \t  (match_operand:<avx512fmaskmode> 4 \"register_operand\" \"Yk\")))]\n   \"TARGET_AVX512F\"\n   \"vfmsubadd231<ssemodesuffix>\\t{<round_op5>%2, %1, %0%{%4%}|%0%{%4%}, %1, %2<round_op5>}\"\n-  [(set_attr \"isa\" \"fma_avx512f\")\n-   (set_attr \"type\" \"ssemuladd\")\n+  [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n ;; FMA3 floating point scalar intrinsics. These merge result with\n@@ -10181,8 +10169,7 @@\n                          (const_int 12) (const_int 14)])))))]\n   \"TARGET_AVX512F && ix86_binary_operator_ok (MULT, V16SImode, operands)\"\n   \"vpmuludq\\t{%2, %1, %0<mask_operand3>|%0<mask_operand3>, %1, %2}\"\n-  [(set_attr \"isa\" \"avx512f\")\n-   (set_attr \"type\" \"sseimul\")\n+  [(set_attr \"type\" \"sseimul\")\n    (set_attr \"prefix_extra\" \"1\")\n    (set_attr \"prefix\" \"evex\")\n    (set_attr \"mode\" \"XI\")])\n@@ -10298,8 +10285,7 @@\n                          (const_int 12) (const_int 14)])))))]\n   \"TARGET_AVX512F && ix86_binary_operator_ok (MULT, V16SImode, operands)\"\n   \"vpmuldq\\t{%2, %1, %0<mask_operand3>|%0<mask_operand3>, %1, %2}\"\n-  [(set_attr \"isa\" \"avx512f\")\n-   (set_attr \"type\" \"sseimul\")\n+  [(set_attr \"type\" \"sseimul\")\n    (set_attr \"prefix_extra\" \"1\")\n    (set_attr \"prefix\" \"evex\")\n    (set_attr \"mode\" \"XI\")])\n@@ -19630,8 +19616,7 @@\n \t  UNSPEC_DBPSADBW))]\n    \"TARGET_AVX512BW\"\n   \"vdbpsadbw\\t{%3, %2, %1, %0<mask_operand4>|%0<mask_operand4>, %1, %2, %3}\"\n-  [(set_attr \"isa\" \"avx\")\n-   (set_attr \"type\" \"sselog1\")\n+  [(set_attr \"type\" \"sselog1\")\n    (set_attr \"length_immediate\" \"1\")\n    (set_attr \"prefix\" \"evex\")\n    (set_attr \"mode\" \"<sseinsnmode>\")])"}]}