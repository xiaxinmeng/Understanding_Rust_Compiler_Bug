{"sha": "fdcfea63c65d56c2af9beb603b338a35ea854383", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRjZmVhNjNjNjVkNTZjMmFmOWJlYjYwM2IzMzhhMzVlYTg1NDM4Mw==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2017-03-24T18:47:38Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2017-03-24T18:47:38Z"}, "message": "re PR target/80148 (operand has impossible constraints)\n\n2017-03-24  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR target/80148\n\t* lra-assigns.c (assign_by_spills): Add spilled non-reload pseudos\n\tto consider in curr_insn_transform.\n\nFrom-SVN: r246467", "tree": {"sha": "e7c09a30300cf2cb2cf94d0f5e7329a635a8b1a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7c09a30300cf2cb2cf94d0f5e7329a635a8b1a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdcfea63c65d56c2af9beb603b338a35ea854383", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdcfea63c65d56c2af9beb603b338a35ea854383", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdcfea63c65d56c2af9beb603b338a35ea854383", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdcfea63c65d56c2af9beb603b338a35ea854383/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "90471a3d8330dff361297f72fa95c157e26ea345", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90471a3d8330dff361297f72fa95c157e26ea345", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90471a3d8330dff361297f72fa95c157e26ea345"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "adf3791dfd96e0f00a21e0c0720bd6a525f3e74b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdcfea63c65d56c2af9beb603b338a35ea854383/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdcfea63c65d56c2af9beb603b338a35ea854383/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fdcfea63c65d56c2af9beb603b338a35ea854383", "patch": "@@ -1,3 +1,9 @@\n+2017-03-24  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR target/80148\n+\t* lra-assigns.c (assign_by_spills): Add spilled non-reload pseudos\n+\tto consider in curr_insn_transform.\n+\n 2017-03-24  Jakub Jelinek  <jakub@redhat.com>\n \n \t* genrecog.c (validate_pattern): Add VEC_SELECT validation."}, {"sha": "75bb630dca7f7169cbcd8bfa714c67bf6a62c180", "filename": "gcc/lra-assigns.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdcfea63c65d56c2af9beb603b338a35ea854383/gcc%2Flra-assigns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdcfea63c65d56c2af9beb603b338a35ea854383/gcc%2Flra-assigns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-assigns.c?ref=fdcfea63c65d56c2af9beb603b338a35ea854383", "patch": "@@ -1507,6 +1507,14 @@ assign_by_spills (void)\n \t      sorted_pseudos[nfails++] = conflict_regno;\n \t      former_reload_pseudo_spill_p = true;\n \t    }\n+\t  else\n+\t    /* It is better to do reloads before spilling as after the\n+\t       spill-subpass we will reload memory instead of pseudos\n+\t       and this will make reusing reload pseudos more\n+\t       complicated.  Going directly to the spill pass in such\n+\t       case might result in worse code performance or even LRA\n+\t       cycling if we have few registers.  */\n+\t    bitmap_set_bit (&all_spilled_pseudos, conflict_regno);\n \t  if (lra_dump_file != NULL)\n \t    fprintf (lra_dump_file, \"\t  Spill %s r%d(hr=%d, freq=%d)\\n\",\n \t\t     pseudo_prefix_title (conflict_regno), conflict_regno,"}]}