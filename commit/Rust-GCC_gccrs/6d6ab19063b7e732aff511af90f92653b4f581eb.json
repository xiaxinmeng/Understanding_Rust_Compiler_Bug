{"sha": "6d6ab19063b7e732aff511af90f92653b4f581eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQ2YWIxOTA2M2I3ZTczMmFmZjUxMWFmOTBmOTI2NTNiNGY1ODFlYg==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2003-02-20T16:24:37Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2003-02-20T16:24:37Z"}, "message": "sysv4.h (ASM_OUTPUT_MAX_SKIP_ALIGN): Define.\n\n        * config/rs6000/sysv4.h (ASM_OUTPUT_MAX_SKIP_ALIGN): Define.\n        * config/rs6000/power4.md (power4-store,power4-vecstore): New\n        insn reservations.\n        (power4-fpstore): Compact.\n\nFrom-SVN: r63167", "tree": {"sha": "52921021d8744ca05a9e0e071af48d7cedc8e342", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52921021d8744ca05a9e0e071af48d7cedc8e342"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d6ab19063b7e732aff511af90f92653b4f581eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d6ab19063b7e732aff511af90f92653b4f581eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d6ab19063b7e732aff511af90f92653b4f581eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d6ab19063b7e732aff511af90f92653b4f581eb/comments", "author": null, "committer": null, "parents": [{"sha": "5b5142fbf9d1e4dcfdf30e319ff9a82af8a13457", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b5142fbf9d1e4dcfdf30e319ff9a82af8a13457", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b5142fbf9d1e4dcfdf30e319ff9a82af8a13457"}], "stats": {"total": 38, "additions": 32, "deletions": 6}, "files": [{"sha": "0bdc28dd7a6689417ac3f9c2a279225eef37599c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d6ab19063b7e732aff511af90f92653b4f581eb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d6ab19063b7e732aff511af90f92653b4f581eb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6d6ab19063b7e732aff511af90f92653b4f581eb", "patch": "@@ -1,3 +1,10 @@\n+2003-02-20  David Edelsohn  <edelsohn@gnu.org>\n+\n+        * config/rs6000/sysv4.h (ASM_OUTPUT_MAX_SKIP_ALIGN): Define.\n+        * config/rs6000/power4.md (power4-store,power4-vecstore): New\n+\tinsn reservations.\n+\t(power4-fpstore): Compact.\n+\n 2003-02-20  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/h8300.md (*iorsi3_w): New."}, {"sha": "87e5ef4c8ec5003f5e8abb8cfd0aadd3df19932d", "filename": "gcc/config/rs6000/power4.md", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d6ab19063b7e732aff511af90f92653b4f581eb/gcc%2Fconfig%2Frs6000%2Fpower4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d6ab19063b7e732aff511af90f92653b4f581eb/gcc%2Fconfig%2Frs6000%2Fpower4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower4.md?ref=6d6ab19063b7e732aff511af90f92653b4f581eb", "patch": "@@ -127,9 +127,10 @@\n   \"lsq_power4\")\n \n (define_insn_reservation \"power4-store\" 1\n-  (and (eq_attr \"type\" \"store,vecstore\")\n+  (and (eq_attr \"type\" \"store\")\n        (eq_attr \"cpu\" \"power4\"))\n-  \"lsq_power4\")\n+  \"((du1_power4|du4_power4),lsu1_power4,iu2_power4)\\\n+  |((du2_power4|du3_power4),lsu2_power4,iu1_power4)\")\n \n (define_insn_reservation \"power4-store-update\" 1\n   (and (eq_attr \"type\" \"store_u\")\n@@ -144,10 +145,8 @@\n (define_insn_reservation \"power4-fpstore\" 1\n   (and (eq_attr \"type\" \"fpstore\")\n        (eq_attr \"cpu\" \"power4\"))\n-  \"(du1_power4,fpu1_power4,lsu1_power4)\\\n-  |(du2_power4,fpu2_power4,lsu2_power4)\\\n-  |(du3_power4,fpu2_power4,lsu2_power4)\\\n-  |(du4_power4,fpu1_power4,lsu1_power4)\")\n+  \"((du1_power4|du4_power4),lsu1_power4,fpu1_power4)\\\n+  |((du2_power4|du3_power4),lsu2_power4,fpu2_power4)\")\n \n (define_insn_reservation \"power4-fpstore-update\" 1\n   (and (eq_attr \"type\" \"fpstore_u\")\n@@ -163,6 +162,12 @@\n   \"(du1_power4+du2_power4+du3_power4+du4_power4),\n    iu1_power4,fpu2_power4,(iu2_power4+lsu2_power4)\")\n \n+(define_insn_reservation \"power4-vecstore\" 1\n+  (and (eq_attr \"type\" \"vecstore\")\n+       (eq_attr \"cpu\" \"power4\"))\n+  \"((du1_power4|du4_power4),lsu1_power4,vec_power4)\\\n+  |((du2_power4|du3_power4),lsu2_power4,vec_power4)\")\n+\n \n ; Integer latency is 2 cycles\n (define_insn_reservation \"power4-integer\" 2"}, {"sha": "503deaf398ae8e038752fe85d6f7949ede2718d3", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d6ab19063b7e732aff511af90f92653b4f581eb/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d6ab19063b7e732aff511af90f92653b4f581eb/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=6d6ab19063b7e732aff511af90f92653b4f581eb", "patch": "@@ -692,6 +692,20 @@ do {\t\t\t\t\t\t\t\t\t\\\n   ASM_OUTPUT_ALIGNED_LOCAL (FILE, NAME, SIZE, ALIGN);\t\t\t\\\n } while (0)\n \n+#ifdef HAVE_GAS_MAX_SKIP_P2ALIGN\n+/* To support -falign-* switches we need to use .p2align so\n+   that alignment directives in code sections will be padded\n+   with no-op instructions, rather than zeroes.  */\n+#define ASM_OUTPUT_MAX_SKIP_ALIGN(FILE,LOG,MAX_SKIP)\t\t\t\\\n+  if ((LOG) != 0)\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      if ((MAX_SKIP) == 0)\t\t\t\t\t\t\\\n+\tfprintf ((FILE), \"\\t.p2align %d\\n\", (LOG));\t\t\t\\\n+      else\t\t\t\t\t\t\t\t\\\n+\tfprintf ((FILE), \"\\t.p2align %d,,%d\\n\",\t(LOG), (MAX_SKIP));\t\\\n+    }\n+#endif\n+\n /* This is how to output code to push a register on the stack.\n    It need not be very fast code.\n "}]}