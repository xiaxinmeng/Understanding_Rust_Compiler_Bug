{"sha": "370df7db150b3cebad6c88751dcd215bb6d93456", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcwZGY3ZGIxNTBiM2NlYmFkNmM4ODc1MWRjZDIxNWJiNmQ5MzQ1Ng==", "commit": {"author": {"name": "Josh Conner", "email": "jconner@apple.com", "date": "2007-01-18T16:44:03Z"}, "committer": {"name": "Josh Conner", "email": "jconner@gcc.gnu.org", "date": "2007-01-18T16:44:03Z"}, "message": "re PR target/30485 (ICE in rs6000_emit_vector_compare when building with -fno-trapping-math)\n\n2007-01-18  Josh Conner  <jconner@apple.com>\n\n\tPR target/30485\n\t* config/rs6000/rs6000.c (rs6000_emit_vector_compare): Add\n\tsupport for UNLE, UNLT, UNGE, and UNGT.\n\nFrom-SVN: r120902", "tree": {"sha": "c320ff436eb619c92c0c99371431b1fa7abcb567", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c320ff436eb619c92c0c99371431b1fa7abcb567"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/370df7db150b3cebad6c88751dcd215bb6d93456", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370df7db150b3cebad6c88751dcd215bb6d93456", "html_url": "https://github.com/Rust-GCC/gccrs/commit/370df7db150b3cebad6c88751dcd215bb6d93456", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370df7db150b3cebad6c88751dcd215bb6d93456/comments", "author": null, "committer": null, "parents": [{"sha": "1b4aced688f1f445a48871a2fe1f426c5470b823", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b4aced688f1f445a48871a2fe1f426c5470b823", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b4aced688f1f445a48871a2fe1f426c5470b823"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "af089fe98891109eecf7889c726e5e737d4ccb84", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370df7db150b3cebad6c88751dcd215bb6d93456/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370df7db150b3cebad6c88751dcd215bb6d93456/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=370df7db150b3cebad6c88751dcd215bb6d93456", "patch": "@@ -1,3 +1,9 @@\n+2007-01-18  Josh Conner  <jconner@apple.com>\n+\n+\tPR target/30485\n+\t* config/rs6000/rs6000.c (rs6000_emit_vector_compare): Add\n+\tsupport for UNLE, UNLT, UNGE, and UNGT.\n+\n 2007-01-18  Jan Hubicka  <jh@suse.cz>\n \n \t* tree-vrp.c (finalize_jump_threads): Do not call cleanup_cfg by hand."}, {"sha": "592cfdd937d86f54bbcedefcec4f598a8b6052f3", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370df7db150b3cebad6c88751dcd215bb6d93456/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370df7db150b3cebad6c88751dcd215bb6d93456/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=370df7db150b3cebad6c88751dcd215bb6d93456", "patch": "@@ -11890,10 +11890,18 @@ rs6000_emit_vector_compare (enum rtx_code rcode,\n \t  try_again = true;\n \t  break;\n \tcase NE:\n-\t  /* Treat A != B as ~(A==B).  */\n+\tcase UNLE:\n+\tcase UNLT:\n+\tcase UNGE:\n+\tcase UNGT:\n+\t  /* Invert condition and try again.\n+\t     e.g., A != B becomes ~(A==B).  */\n \t  {\n+\t    enum rtx_code rev_code;\n \t    enum insn_code nor_code;\n-\t    rtx eq_rtx = rs6000_emit_vector_compare (EQ, op0, op1,\n+\n+\t    rev_code = reverse_condition_maybe_unordered (rcode);\n+\t    rtx eq_rtx = rs6000_emit_vector_compare (rev_code, op0, op1,\n \t\t\t\t\t\t     dest_mode);\n \n \t    nor_code = one_cmpl_optab->handlers[(int)dest_mode].insn_code;"}]}