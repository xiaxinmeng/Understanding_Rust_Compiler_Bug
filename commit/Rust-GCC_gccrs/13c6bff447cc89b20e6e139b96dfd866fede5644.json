{"sha": "13c6bff447cc89b20e6e139b96dfd866fede5644", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNjNmJmZjQ0N2NjODliMjBlNmUxMzliOTZkZmQ4NjZmZWRlNTY0NA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2008-08-29T11:47:01Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2008-08-29T11:47:01Z"}, "message": "tree-ssa-structalias.c (create_variable_info_for): Do not create fields for heap vars or vars with a noalias state.\n\n2008-08-29  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-ssa-structalias.c (create_variable_info_for): Do not\n\tcreate fields for heap vars or vars with a noalias state.\n\tFor NO_ALIAS_ANYTHING variables add a self-constraint, not one\n\tfrom ESCAPED.\n\n        * gfortran.fortran-torture/compile/20080806-1.f90: New testcase.\n\nFrom-SVN: r139765", "tree": {"sha": "7cc708e9b0ec5ee73df0c88b03384f4147930e04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7cc708e9b0ec5ee73df0c88b03384f4147930e04"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13c6bff447cc89b20e6e139b96dfd866fede5644", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13c6bff447cc89b20e6e139b96dfd866fede5644", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13c6bff447cc89b20e6e139b96dfd866fede5644", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13c6bff447cc89b20e6e139b96dfd866fede5644/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dce2b2f6cb34a4f53ff5bedac672b3a113552b54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dce2b2f6cb34a4f53ff5bedac672b3a113552b54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dce2b2f6cb34a4f53ff5bedac672b3a113552b54"}], "stats": {"total": 49, "additions": 47, "deletions": 2}, "files": [{"sha": "441ce2b0dc1af6767074257d9686200f81d06d99", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=13c6bff447cc89b20e6e139b96dfd866fede5644", "patch": "@@ -1,3 +1,10 @@\n+2008-08-29  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-ssa-structalias.c (create_variable_info_for): Do not\n+\tcreate fields for heap vars or vars with a noalias state.\n+\tFor NO_ALIAS_ANYTHING variables add a self-constraint, not one\n+\tfrom ESCAPED.\n+\n 2008-08-29  Richard Guenther  <rguenther@suse.de>\n \n \t* common.opt (ftree-store-ccp): Mark as preserved for"}, {"sha": "08ea1d3a87015890bca095c45e109465368bc6e5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=13c6bff447cc89b20e6e139b96dfd866fede5644", "patch": "@@ -1,3 +1,7 @@\n+2008-08-29  Richard Guenther  <rguenther@suse.de>\n+\n+\t* gfortran.fortran-torture/compile/20080805-1.f90: New testcase.\n+\n 2008-08-29  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/37236"}, {"sha": "3abc80ab16809c4b5ef856e106be14bdd8625bf1", "filename": "gcc/testsuite/gfortran.fortran-torture/compile/20080806-1.f90", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2F20080806-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2F20080806-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2F20080806-1.f90?ref=13c6bff447cc89b20e6e139b96dfd866fede5644", "patch": "@@ -0,0 +1,24 @@\n+MODULE  M1\n+  IMPLICIT NONE\n+  TYPE mmm\n+    COMPLEX(KIND=8), DIMENSION(:,:), POINTER :: data\n+  END TYPE mmm\n+\n+CONTAINS\n+\n+  SUBROUTINE S(ma,mb,mc)\n+      TYPE(mmm), POINTER :: ma,mb,mc\n+      COMPLEX(KIND=8), DIMENSION(:, :), &\n+        POINTER                                :: a, b, c\n+      INTEGER :: i,j\n+      a=>ma%data\n+      b=>mb%data\n+      c=>mc%data\n+      DO i=1,size(a,1)\n+      DO j=1,size(a,2)\n+         c(i,j)=a(i,j)*b(i,j)\n+      ENDDO\n+      ENDDO\n+  END SUBROUTINE\n+\n+END MODULE M1"}, {"sha": "6db829808d8d892f35708c0950c69d68e70da2fa", "filename": "gcc/tree-ssa-structalias.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2Ftree-ssa-structalias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c6bff447cc89b20e6e139b96dfd866fede5644/gcc%2Ftree-ssa-structalias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-structalias.c?ref=13c6bff447cc89b20e6e139b96dfd866fede5644", "patch": "@@ -4354,7 +4354,11 @@ create_variable_info_for (tree decl, const char *name)\n   if (TREE_CODE (decl) == FUNCTION_DECL && in_ipa_mode)\n     return create_function_info_for (decl, name);\n \n-  if (var_can_have_subvars (decl) && use_field_sensitive)\n+  if (var_can_have_subvars (decl) && use_field_sensitive\n+      && (!var_ann (decl)\n+\t  || var_ann (decl)->noalias_state == 0)\n+      && (!var_ann (decl)\n+\t  || !var_ann (decl)->is_heapvar))\n     push_fields_onto_fieldstack (decl_type, &fieldstack, 0);\n \n   /* If the variable doesn't have subvars, we may end up needing to\n@@ -4380,7 +4384,13 @@ create_variable_info_for (tree decl, const char *name)\n   VEC_safe_push (varinfo_t, heap, varmap, vi);\n   if (is_global && (!flag_whole_program || !in_ipa_mode)\n       && could_have_pointers (decl))\n-    make_constraint_from (vi, escaped_id);\n+    {\n+      if (var_ann (decl)\n+\t  && var_ann (decl)->noalias_state == NO_ALIAS_ANYTHING)\n+\tmake_constraint_from (vi, vi->id);\n+      else\n+\tmake_constraint_from (vi, escaped_id);\n+    }\n \n   stats.total_vars++;\n   if (use_field_sensitive"}]}