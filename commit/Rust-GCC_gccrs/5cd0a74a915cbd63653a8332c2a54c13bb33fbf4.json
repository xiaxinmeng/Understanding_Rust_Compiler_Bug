{"sha": "5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNkMGE3NGE5MTVjYmQ2MzY1M2E4MzMyYzJhNTRjMTNiYjMzZmJmNA==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.vnet.ibm.com", "date": "2016-06-21T20:57:20Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2016-06-21T20:57:20Z"}, "message": "stor-layout.c (layout_type): Move setting complex MODE to layout_type...\n\n[gcc]\n2016-06-21  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\t* stor-layout.c (layout_type): Move setting complex MODE to\n\tlayout_type, instead of setting it ahead of time by the caller.\n\t* tree.c (build_complex_type): Likewise.\n\n[gcc/fortran]\n2016-06-21  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\t* trans-types.c (gfc_build_complex_type): Move setting complex\n\tMODE to layout_type, instead of setting it ahead of time by the\n\tcaller.\n\nFrom-SVN: r237657", "tree": {"sha": "41ee0d0c5c8d5d26bbfceeb26f4a7e72a26d8d10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/41ee0d0c5c8d5d26bbfceeb26f4a7e72a26d8d10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/comments", "author": null, "committer": null, "parents": [{"sha": "63617e30150f174ffa325057327c16483715aa09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63617e30150f174ffa325057327c16483715aa09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63617e30150f174ffa325057327c16483715aa09"}], "stats": {"total": 22, "additions": 14, "deletions": 8}, "files": [{"sha": "627de2bfdcb84237bf354d69e61bda376f7700e7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "patch": "@@ -1,3 +1,9 @@\n+2016-06-21  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\t* stor-layout.c (layout_type): Move setting complex MODE to\n+\tlayout_type, instead of setting it ahead of time by the caller.\n+\t* tree.c (build_complex_type): Likewise.\n+\n 2016-06-21  Martin Liska  <mliska@suse.cz>\n \n \t* predict.c (force_edge_cold): Replace imposisble with"}, {"sha": "9b4b957b1096a900ff26e52f58fbfcf6bf99341b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "patch": "@@ -1,3 +1,9 @@\n+2016-06-21  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\t* trans-types.c (gfc_build_complex_type): Move setting complex\n+\tMODE to layout_type, instead of setting it ahead of time by the\n+\tcaller.\n+\n 2016-06-21  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/71068"}, {"sha": "bde64f499c7e6c4ba182b7b9da7c7b5d7f9cb945", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "patch": "@@ -828,7 +828,6 @@ gfc_build_complex_type (tree scalar_type)\n \n   new_type = make_node (COMPLEX_TYPE);\n   TREE_TYPE (new_type) = scalar_type;\n-  SET_TYPE_MODE (new_type, GET_MODE_COMPLEX_MODE (TYPE_MODE (scalar_type)));\n   layout_type (new_type);\n   return new_type;\n }"}, {"sha": "40170efb33f736677d5409d060baef7159decfc6", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "patch": "@@ -2146,12 +2146,8 @@ layout_type (tree type)\n \n     case COMPLEX_TYPE:\n       TYPE_UNSIGNED (type) = TYPE_UNSIGNED (TREE_TYPE (type));\n-\n-      /* build_complex_type and fortran's gfc_build_complex_type have set the\n-\t expected mode to allow having multiple complex types for multiple\n-\t floating point types that have the same size such as the PowerPC with\n-\t __ibm128 and __float128.  */\n-      gcc_assert (TYPE_MODE (type) != VOIDmode);\n+      SET_TYPE_MODE (type,\n+\t\t     GET_MODE_COMPLEX_MODE (TYPE_MODE (TREE_TYPE (type))));\n \n       TYPE_SIZE (type) = bitsize_int (GET_MODE_BITSIZE (TYPE_MODE (type)));\n       TYPE_SIZE_UNIT (type) = size_int (GET_MODE_SIZE (TYPE_MODE (type)));"}, {"sha": "58c663a8220173f70fc3f82ed5e4b63de337f679", "filename": "gcc/tree.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cd0a74a915cbd63653a8332c2a54c13bb33fbf4/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=5cd0a74a915cbd63653a8332c2a54c13bb33fbf4", "patch": "@@ -8783,7 +8783,6 @@ build_complex_type (tree component_type)\n   t = make_node (COMPLEX_TYPE);\n \n   TREE_TYPE (t) = TYPE_MAIN_VARIANT (component_type);\n-  SET_TYPE_MODE (t, GET_MODE_COMPLEX_MODE (TYPE_MODE (component_type)));\n \n   /* If we already have such a type, use the old one.  */\n   hstate.add_object (TYPE_HASH (component_type));"}]}