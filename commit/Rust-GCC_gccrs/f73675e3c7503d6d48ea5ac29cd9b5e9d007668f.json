{"sha": "f73675e3c7503d6d48ea5ac29cd9b5e9d007668f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjczNjc1ZTNjNzUwM2Q2ZDQ4ZWE1YWMyOWNkOWI1ZTlkMDA3NjY4Zg==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2019-02-26T17:08:06Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2019-02-26T17:08:06Z"}, "message": "re PR rtl-optimization/87761 ([MIPS] New FAIL: gcc.target/mips/fix-r4000-10.c   -O1 start with r265398)\n\n\tPR rtl-optimization/87761\n\t* regcprop.c (copyprop_hardreg_forward_1): Use REG_UNUSED notes to\n\tdetect obviously dead insns and delete them.\n\nFrom-SVN: r269218", "tree": {"sha": "27dca3a9798238978aeb505c5e6945a926edb54e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27dca3a9798238978aeb505c5e6945a926edb54e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f/comments", "author": null, "committer": null, "parents": [{"sha": "067aef033f3a9ad971fc75ce0631c500de0f0423", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/067aef033f3a9ad971fc75ce0631c500de0f0423", "html_url": "https://github.com/Rust-GCC/gccrs/commit/067aef033f3a9ad971fc75ce0631c500de0f0423"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "92a90bcfa69e08d4780232d28355d50054106e48", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f73675e3c7503d6d48ea5ac29cd9b5e9d007668f", "patch": "@@ -1,3 +1,9 @@\n+2019-02-26  Jeff Law  <law@redhat.com>\n+\n+\tPR rtl-optimization/87761\n+\t* regcprop.c (copyprop_hardreg_forward_1): Use REG_UNUSED notes to\n+\tdetect obviously dead insns and delete them.\n+\n 2019-02-26  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/89505"}, {"sha": "926df40f954fb840b3b0c004b91a022dc606d383", "filename": "gcc/regcprop.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f/gcc%2Fregcprop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f73675e3c7503d6d48ea5ac29cd9b5e9d007668f/gcc%2Fregcprop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregcprop.c?ref=f73675e3c7503d6d48ea5ac29cd9b5e9d007668f", "patch": "@@ -798,6 +798,22 @@ copyprop_hardreg_forward_1 (basic_block bb, struct value_data *vd)\n \t    }\n \t}\n \n+      /* Detect obviously dead sets (via REG_UNUSED notes) and remove them.  */\n+      if (set\n+\t  && INSN_P (insn)\n+\t  && !may_trap_p (insn)\n+\t  && find_reg_note (insn, REG_UNUSED, SET_DEST (set))\n+\t  && !side_effects_p (SET_SRC (set))\n+\t  && !side_effects_p (SET_DEST (set)))\n+\t{\n+\t  bool last = insn == BB_END (bb);\n+\t  delete_insn (insn);\n+\t  if (last)\n+\t    break;\n+\t  continue;\n+\t}\n+\t \n+\n       extract_constrain_insn (insn);\n       preprocess_constraints (insn);\n       const operand_alternative *op_alt = which_op_alt ();"}]}