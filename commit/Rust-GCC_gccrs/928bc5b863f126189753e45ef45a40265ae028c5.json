{"sha": "928bc5b863f126189753e45ef45a40265ae028c5", "node_id": "C_kwDOANBUbNoAKDkyOGJjNWI4NjNmMTI2MTg5NzUzZTQ1ZWY0NWE0MDI2NWFlMDI4YzU", "commit": {"author": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2022-11-17T05:08:23Z"}, "committer": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2022-11-17T05:08:23Z"}, "message": "Fix typo in gimple_fold_partial_load_store_mem_ref\n\nAs Robin spotted, my recent commit r13-3716 caused an ICE\non s390 if vector access with length is enabled there (his\npatch for the enablement hasn't been committed yet).  The\nfailure is caused by one stupid typo, the bias on s390 is\n-1, so the assertion should use tree_fits_shwi_p rather\nthan tree_fits_uhwi_p.  Thanks for Robin's catching.\n\nI just reproduced the ICE and verified the fix worked fine\nwith a cross build, the optimized dump against the test case\ngcc.target/powerpc/pr107412.c looked expected.\n\ngcc/ChangeLog:\n\n\t* gimple-fold.cc (gimple_fold_partial_load_store_mem_ref): Use\n\ttree_fits_shwi_p rather than tree_fits_uhwi_p as bias is signed.", "tree": {"sha": "dc5bed6a33ea4e1d24f2870fe41257ea608b369b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc5bed6a33ea4e1d24f2870fe41257ea608b369b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/928bc5b863f126189753e45ef45a40265ae028c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/928bc5b863f126189753e45ef45a40265ae028c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/928bc5b863f126189753e45ef45a40265ae028c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/928bc5b863f126189753e45ef45a40265ae028c5/comments", "author": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a62d957342e3e9ee9bda812f737279f1166e03ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a62d957342e3e9ee9bda812f737279f1166e03ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a62d957342e3e9ee9bda812f737279f1166e03ba"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "f8a1875ea3e3869c1b800d4e528ae8f48d4c497f", "filename": "gcc/gimple-fold.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/928bc5b863f126189753e45ef45a40265ae028c5/gcc%2Fgimple-fold.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/928bc5b863f126189753e45ef45a40265ae028c5/gcc%2Fgimple-fold.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-fold.cc?ref=928bc5b863f126189753e45ef45a40265ae028c5", "patch": "@@ -5392,7 +5392,7 @@ gimple_fold_partial_load_store_mem_ref (gcall *call, tree vectype, bool mask_p)\n \treturn NULL_TREE;\n       unsigned int nargs = gimple_call_num_args (call);\n       tree bias = gimple_call_arg (call, nargs - 1);\n-      gcc_assert (tree_fits_uhwi_p (bias));\n+      gcc_assert (tree_fits_shwi_p (bias));\n       tree biased_len = int_const_binop (MINUS_EXPR, basic_len, bias);\n       unsigned int len = tree_to_uhwi (biased_len);\n       unsigned int vect_len"}]}