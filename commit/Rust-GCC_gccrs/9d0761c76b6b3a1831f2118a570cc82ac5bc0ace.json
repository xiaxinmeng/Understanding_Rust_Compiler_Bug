{"sha": "9d0761c76b6b3a1831f2118a570cc82ac5bc0ace", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQwNzYxYzc2YjZiM2ExODMxZjIxMThhNTcwY2M4MmFjNWJjMGFjZQ==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2020-08-26T11:18:48Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-10-23T08:24:39Z"}, "message": "[Ada] Fix default value for re-analysis of external property pragmas\n\ngcc/ada/\n\n\t* sem_prag.adb (Analyze_External_Property_In_Decl_Part): Set the\n\toutput parameter Expr_Val to the (implicit) pragma argument even\n\twhen returning early.", "tree": {"sha": "88737cc0792fff3b28f5cc17405d379a2a93261b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88737cc0792fff3b28f5cc17405d379a2a93261b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d0761c76b6b3a1831f2118a570cc82ac5bc0ace", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d0761c76b6b3a1831f2118a570cc82ac5bc0ace", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d0761c76b6b3a1831f2118a570cc82ac5bc0ace", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d0761c76b6b3a1831f2118a570cc82ac5bc0ace/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a83366b62e585cce5577309013a832f895ccdbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a83366b62e585cce5577309013a832f895ccdbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a83366b62e585cce5577309013a832f895ccdbf"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "409ff76094adccd331334186b5441422f901157d", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d0761c76b6b3a1831f2118a570cc82ac5bc0ace/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d0761c76b6b3a1831f2118a570cc82ac5bc0ace/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=9d0761c76b6b3a1831f2118a570cc82ac5bc0ace", "patch": "@@ -2101,12 +2101,11 @@ package body Sem_Prag is\n       Expr     : Node_Id;\n \n    begin\n-      Expr_Val := False;\n-\n-      --  Do not analyze the pragma multiple times\n+      --  Do not analyze the pragma multiple times, but set the output\n+      --  parameter to the argument specified by the pragma.\n \n       if Is_Analyzed_Pragma (N) then\n-         return;\n+         goto Leave;\n       end if;\n \n       Error_Msg_Name_1 := Pragma_Name (N);\n@@ -2147,6 +2146,10 @@ package body Sem_Prag is\n          end if;\n       end if;\n \n+      Set_Is_Analyzed_Pragma (N);\n+\n+      <<Leave>>\n+\n       --  Ensure that the Boolean expression (if present) is static. A missing\n       --  argument defaults the value to True (SPARK RM 7.1.2(5)).\n \n@@ -2160,7 +2163,6 @@ package body Sem_Prag is\n          end if;\n       end if;\n \n-      Set_Is_Analyzed_Pragma (N);\n    end Analyze_External_Property_In_Decl_Part;\n \n    ---------------------------------"}]}