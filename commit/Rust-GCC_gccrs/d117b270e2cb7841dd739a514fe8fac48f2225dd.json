{"sha": "d117b270e2cb7841dd739a514fe8fac48f2225dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDExN2IyNzBlMmNiNzg0MWRkNzM5YTUxNGZlOGZhYzQ4ZjIyMjVkZA==", "commit": {"author": {"name": "Dirk Mueller", "email": "dmueller@suse.de", "date": "2006-05-30T13:43:55Z"}, "committer": {"name": "Dirk Mueller", "email": "mueller@gcc.gnu.org", "date": "2006-05-30T13:43:55Z"}, "message": "re PR c/27273 (tree check fail for legal code when convert returns a constant from an expression that was not constant)\n\n        PR c/27273\n        * c-common.c (convert_and_check): only track TREE_CONSTANT_OVERFLOW\n        for CONSTANT_CLASS_P expressions.\n\n        * gcc.dg/overflow-warn-5.c: New testcase.\n\nFrom-SVN: r114238", "tree": {"sha": "aed5afaffb08157dad84f9a375f9a7f918adea9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aed5afaffb08157dad84f9a375f9a7f918adea9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d117b270e2cb7841dd739a514fe8fac48f2225dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d117b270e2cb7841dd739a514fe8fac48f2225dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d117b270e2cb7841dd739a514fe8fac48f2225dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d117b270e2cb7841dd739a514fe8fac48f2225dd/comments", "author": null, "committer": null, "parents": [{"sha": "16464cc1bba0fd0befabcb90bad7d28b3e229c93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16464cc1bba0fd0befabcb90bad7d28b3e229c93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16464cc1bba0fd0befabcb90bad7d28b3e229c93"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "9cb3befcafc2ff15441173a55530903f0e733d49", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d117b270e2cb7841dd739a514fe8fac48f2225dd", "patch": "@@ -1,3 +1,9 @@\n+2006-05-30  Dirk Mueller  <dmueller@suse.de>\n+\n+\tPR c/27273\n+\t* c-common.c (convert_and_check): Only track TREE_CONSTANT_OVERFLOW\n+\tfor CONSTANT_CLASS_P expresisons.\n+\n 2006-05-30  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c/27718"}, {"sha": "dea83894e7f21f1e9c279eec71a22240ff4d43e3", "filename": "gcc/c-common.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=d117b270e2cb7841dd739a514fe8fac48f2225dd", "patch": "@@ -1083,7 +1083,8 @@ convert_and_check (tree type, tree expr)\n \n \t  /* Do not diagnose overflow in a constant expression merely\n \t     because a conversion overflowed.  */\n-\t  TREE_CONSTANT_OVERFLOW (t) = TREE_CONSTANT_OVERFLOW (expr);\n+\t  TREE_CONSTANT_OVERFLOW (t) = CONSTANT_CLASS_P (expr)\n+                                       && TREE_CONSTANT_OVERFLOW (expr);\n \n \t  /* No warning for converting 0x80000000 to int.  */\n \t  if (!(TYPE_UNSIGNED (type) < TYPE_UNSIGNED (TREE_TYPE (expr))"}, {"sha": "d5b709419be5285bb0a91a006b6229dfef51e0e7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d117b270e2cb7841dd739a514fe8fac48f2225dd", "patch": "@@ -1,3 +1,8 @@\n+2006-05-30  Dirk Mueller  <dmueller@suse.de>\n+\n+\tPR c/27273\n+\t* gcc.dg/overflow-warn-5.c: New test.\n+\n 2006-05-30  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c/27718"}, {"sha": "472d4a7cab14185384cebeb819a6d104093f21fc", "filename": "gcc/testsuite/gcc.dg/overflow-warn-5.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2Ftestsuite%2Fgcc.dg%2Foverflow-warn-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d117b270e2cb7841dd739a514fe8fac48f2225dd/gcc%2Ftestsuite%2Fgcc.dg%2Foverflow-warn-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Foverflow-warn-5.c?ref=d117b270e2cb7841dd739a514fe8fac48f2225dd", "patch": "@@ -0,0 +1,7 @@\n+/* PR c/27273 */\n+/* { dg-do compile } */\n+/* { dg-options \"-Woverflow\" } */\n+\n+unsigned char rx_async(unsigned char p) {\n+    return p & 512; /* { dg-warning \"overflow in implicit constant conversion\" } */\n+}"}]}