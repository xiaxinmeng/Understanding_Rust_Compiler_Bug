{"sha": "f5faf9de3277a96a9ecc60f32bfa81fb543b272e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjVmYWY5ZGUzMjc3YTk2YTllY2M2MGYzMmJmYTgxZmI1NDNiMjcyZQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-02-10T14:04:42Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-02-10T14:04:42Z"}, "message": "New file.\n\nFrom-SVN: r94828", "tree": {"sha": "65fc9a054361e548ec2e1f6a7f703b4731018a36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/65fc9a054361e548ec2e1f6a7f703b4731018a36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5faf9de3277a96a9ecc60f32bfa81fb543b272e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5faf9de3277a96a9ecc60f32bfa81fb543b272e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5faf9de3277a96a9ecc60f32bfa81fb543b272e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5faf9de3277a96a9ecc60f32bfa81fb543b272e/comments", "author": null, "committer": null, "parents": [{"sha": "fc5a191d6f09da2a45030cf146b7a00c66cee568", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc5a191d6f09da2a45030cf146b7a00c66cee568", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc5a191d6f09da2a45030cf146b7a00c66cee568"}], "stats": {"total": 274, "additions": 274, "deletions": 0}, "files": [{"sha": "0f1be1fe97fd43b35648582e4aa344cb7dbc6aa9", "filename": "gcc/ada/mlib-tgt-lynxos.adb", "status": "added", "additions": 274, "deletions": 0, "changes": 274, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5faf9de3277a96a9ecc60f32bfa81fb543b272e/gcc%2Fada%2Fmlib-tgt-lynxos.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5faf9de3277a96a9ecc60f32bfa81fb543b272e/gcc%2Fada%2Fmlib-tgt-lynxos.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-lynxos.adb?ref=f5faf9de3277a96a9ecc60f32bfa81fb543b272e", "patch": "@@ -0,0 +1,274 @@\n+------------------------------------------------------------------------------\n+--                                                                          --\n+--                         GNAT COMPILER COMPONENTS                         --\n+--                                                                          --\n+--                             M L I B . T G T                              --\n+--                             (LynxOS Version)                             --\n+--                                                                          --\n+--                                 B o d y                                  --\n+--                                                                          --\n+--           Copyright (C) 2003-2004 Free Software Foundation, Inc.         --\n+--                                                                          --\n+-- GNAT is free software;  you can  redistribute it  and/or modify it under --\n+-- terms of the  GNU General Public License as published  by the Free Soft- --\n+-- ware  Foundation;  either version 2,  or (at your option) any later ver- --\n+-- sion.  GNAT is distributed in the hope that it will be useful, but WITH- --\n+-- OUT ANY WARRANTY;  without even the  implied warranty of MERCHANTABILITY --\n+-- or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License --\n+-- for  more details.  You should have  received  a copy of the GNU General --\n+-- Public License  distributed with GNAT;  see file COPYING.  If not, write --\n+-- to  the Free Software Foundation,  59 Temple Place - Suite 330,  Boston, --\n+-- MA 02111-1307, USA.                                                      --\n+--                                                                          --\n+-- GNAT was originally developed  by the GNAT team at  New York University. --\n+-- Extensive contributions were provided by Ada Core Technologies Inc.      --\n+--                                                                          --\n+------------------------------------------------------------------------------\n+\n+--  This package provides a set of target dependent routines to build\n+--  static libraries.\n+\n+--  This is the LynxOS version of the body\n+\n+with MLib.Fil;\n+with Namet;  use Namet;\n+with Prj.Com;\n+\n+package body MLib.Tgt is\n+\n+   ---------------------\n+   -- Archive_Builder --\n+   ---------------------\n+\n+   function Archive_Builder return String is\n+   begin\n+      return \"ar\";\n+   end Archive_Builder;\n+\n+   -----------------------------\n+   -- Archive_Builder_Options --\n+   -----------------------------\n+\n+   function Archive_Builder_Options return String_List_Access is\n+   begin\n+      return new String_List'(1 => new String'(\"cr\"));\n+   end Archive_Builder_Options;\n+\n+   -----------------\n+   -- Archive_Ext --\n+   -----------------\n+\n+   function Archive_Ext return String is\n+   begin\n+      return \"a\";\n+   end Archive_Ext;\n+\n+   ---------------------\n+   -- Archive_Indexer --\n+   ---------------------\n+\n+   function Archive_Indexer return String is\n+   begin\n+      return \"ranlib\";\n+   end Archive_Indexer;\n+\n+   -----------------------------\n+   -- Archive_Indexer_Options --\n+   -----------------------------\n+\n+   function Archive_Indexer_Options return String_List_Access is\n+   begin\n+      return new String_List (1 .. 0);\n+   end Archive_Indexer_Options;\n+\n+   ---------------------------\n+   -- Build_Dynamic_Library --\n+   ---------------------------\n+\n+   procedure Build_Dynamic_Library\n+     (Ofiles       : Argument_List;\n+      Foreign      : Argument_List;\n+      Afiles       : Argument_List;\n+      Options      : Argument_List;\n+      Options_2    : Argument_List;\n+      Interfaces   : Argument_List;\n+      Lib_Filename : String;\n+      Lib_Dir      : String;\n+      Symbol_Data  : Symbol_Record;\n+      Driver_Name  : Name_Id := No_Name;\n+      Lib_Version  : String  := \"\";\n+      Auto_Init    : Boolean := False)\n+   is\n+      pragma Unreferenced (Ofiles);\n+      pragma Unreferenced (Foreign);\n+      pragma Unreferenced (Afiles);\n+      pragma Unreferenced (Options);\n+      pragma Unreferenced (Options_2);\n+      pragma Unreferenced (Interfaces);\n+      pragma Unreferenced (Lib_Filename);\n+      pragma Unreferenced (Lib_Dir);\n+      pragma Unreferenced (Symbol_Data);\n+      pragma Unreferenced (Driver_Name);\n+      pragma Unreferenced (Lib_Version);\n+      pragma Unreferenced (Auto_Init);\n+\n+   begin\n+      null;\n+   end Build_Dynamic_Library;\n+\n+   -------------\n+   -- DLL_Ext --\n+   -------------\n+\n+   function DLL_Ext return String is\n+   begin\n+      return \"\";\n+   end DLL_Ext;\n+\n+   --------------------\n+   -- Dynamic_Option --\n+   --------------------\n+\n+   function Dynamic_Option return String is\n+   begin\n+      return \"\";\n+   end Dynamic_Option;\n+\n+   -------------------\n+   -- Is_Object_Ext --\n+   -------------------\n+\n+   function Is_Object_Ext (Ext : String) return Boolean is\n+   begin\n+      return Ext = \".o\";\n+   end Is_Object_Ext;\n+\n+   --------------\n+   -- Is_C_Ext --\n+   --------------\n+\n+   function Is_C_Ext (Ext : String) return Boolean is\n+   begin\n+      return Ext = \".c\";\n+   end Is_C_Ext;\n+\n+   --------------------\n+   -- Is_Archive_Ext --\n+   --------------------\n+\n+   function Is_Archive_Ext (Ext : String) return Boolean is\n+   begin\n+      return Ext = \".a\";\n+   end Is_Archive_Ext;\n+\n+   -------------\n+   -- Libgnat --\n+   -------------\n+\n+   function Libgnat return String is\n+   begin\n+      return \"libgnat.a\";\n+   end Libgnat;\n+\n+   ------------------------\n+   -- Library_Exists_For --\n+   ------------------------\n+\n+   function Library_Exists_For (Project : Project_Id) return Boolean is\n+   begin\n+      if not Projects.Table (Project).Library then\n+         Prj.Com.Fail (\"INTERNAL ERROR: Library_Exists_For called \" &\n+                       \"for non library project\");\n+         return False;\n+\n+      else\n+         declare\n+            Lib_Dir : constant String :=\n+              Get_Name_String (Projects.Table (Project).Library_Dir);\n+            Lib_Name : constant String :=\n+              Get_Name_String (Projects.Table (Project).Library_Name);\n+\n+         begin\n+            if Projects.Table (Project).Library_Kind = Static then\n+               return Is_Regular_File\n+                 (Lib_Dir & Directory_Separator & \"lib\" &\n+                  Fil.Ext_To (Lib_Name, Archive_Ext));\n+\n+            else\n+               return Is_Regular_File\n+                 (Lib_Dir & Directory_Separator & \"lib\" &\n+                  Fil.Ext_To (Lib_Name, DLL_Ext));\n+            end if;\n+         end;\n+      end if;\n+   end Library_Exists_For;\n+\n+   ---------------------------\n+   -- Library_File_Name_For --\n+   ---------------------------\n+\n+   function Library_File_Name_For (Project : Project_Id) return Name_Id is\n+   begin\n+      if not Projects.Table (Project).Library then\n+         Prj.Com.Fail (\"INTERNAL ERROR: Library_File_Name_For called \" &\n+                       \"for non library project\");\n+         return No_Name;\n+\n+      else\n+         declare\n+            Lib_Name : constant String :=\n+              Get_Name_String (Projects.Table (Project).Library_Name);\n+\n+         begin\n+            Name_Len := 3;\n+            Name_Buffer (1 .. Name_Len) := \"lib\";\n+\n+            if Projects.Table (Project).Library_Kind = Static then\n+               Add_Str_To_Name_Buffer (Fil.Ext_To (Lib_Name, Archive_Ext));\n+\n+            else\n+               Add_Str_To_Name_Buffer (Fil.Ext_To (Lib_Name, DLL_Ext));\n+            end if;\n+\n+            return Name_Find;\n+         end;\n+      end if;\n+   end Library_File_Name_For;\n+\n+   ----------------\n+   -- Object_Ext --\n+   ----------------\n+\n+   function Object_Ext return String is\n+   begin\n+      return \"o\";\n+   end Object_Ext;\n+\n+   ----------------\n+   -- PIC_Option --\n+   ----------------\n+\n+   function PIC_Option return String is\n+   begin\n+      return \"\";\n+   end PIC_Option;\n+\n+   -----------------------------------------------\n+   -- Standalone_Library_Auto_Init_Is_Supported --\n+   -----------------------------------------------\n+\n+   function Standalone_Library_Auto_Init_Is_Supported return Boolean is\n+   begin\n+      return False;\n+   end Standalone_Library_Auto_Init_Is_Supported;\n+\n+   ---------------------------\n+   -- Support_For_Libraries --\n+   ---------------------------\n+\n+   function Support_For_Libraries return Library_Support is\n+   begin\n+      return Static_Only;\n+   end Support_For_Libraries;\n+\n+end MLib.Tgt;"}]}