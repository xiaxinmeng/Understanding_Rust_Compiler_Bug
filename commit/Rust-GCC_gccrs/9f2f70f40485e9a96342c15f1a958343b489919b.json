{"sha": "9f2f70f40485e9a96342c15f1a958343b489919b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWYyZjcwZjQwNDg1ZTlhOTYzNDJjMTVmMWE5NTgzNDNiNDg5OTE5Yg==", "commit": {"author": {"name": "Marc Lehmann", "email": "pcg@goof.com", "date": "1998-10-08T23:26:54Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-10-08T23:26:54Z"}, "message": "ylwrap: Change absolute path checks to check for DOS style path names.\n\n\ufffd\n        * ylwrap: Change absolute path checks to check for DOS style path\n        names.\n        * ylwrap: Don't use a full path name if the source file is in the\n        same directory.  From hjl@lucon.org (H.J. Lu).\nBrought over from devo.\n\nFrom-SVN: r22945", "tree": {"sha": "8644cbbbbf1a1412a83ba7c7ab9d65b6ba351c14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8644cbbbbf1a1412a83ba7c7ab9d65b6ba351c14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9f2f70f40485e9a96342c15f1a958343b489919b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f2f70f40485e9a96342c15f1a958343b489919b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f2f70f40485e9a96342c15f1a958343b489919b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f2f70f40485e9a96342c15f1a958343b489919b/comments", "author": null, "committer": null, "parents": [{"sha": "1e025bde1dce0fc33fc8a6b299182e0b4670cf2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e025bde1dce0fc33fc8a6b299182e0b4670cf2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e025bde1dce0fc33fc8a6b299182e0b4670cf2e"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "2288ccde3ac14b2e968b92d2260c130e8becebee", "filename": "ylwrap", "status": "modified", "additions": 19, "deletions": 3, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f2f70f40485e9a96342c15f1a958343b489919b/ylwrap", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f2f70f40485e9a96342c15f1a958343b489919b/ylwrap", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ylwrap?ref=9f2f70f40485e9a96342c15f1a958343b489919b", "patch": "@@ -31,15 +31,15 @@ prog=\"$1\"\n shift\n # Make any relative path in $prog absolute.\n case \"$prog\" in\n- /*) ;;\n+ /* | [A-Za-z]:\\\\*) ;;\n  */*) prog=\"`pwd`/$prog\" ;;\n esac\n \n # The input.\n input=\"$1\"\n shift\n case \"$input\" in\n- /*)\n+ /* | [A-Za-z]:\\\\*)\n     # Absolute path; do nothing.\n     ;;\n  *)\n@@ -50,6 +50,13 @@ case \"$input\" in\n     ;;\n esac\n \n+# We don't want to use the absolute path if the input in the current\n+# directory like when making a tar ball.\n+input_base=`echo $input | sed -e 's|.*/||'`\n+if test -f $input_base && cmp $input_base $input >/dev/null 2>&1; then\n+  input=$input_base\n+fi\n+\n pairlist=\n while test \"$#\" -ne 0; do\n    if test \"$1\" = \"--\"; then\n@@ -67,6 +74,15 @@ trap \"cd `pwd`; rm -rf $dirname > /dev/null 2>&1\" 1 2 3 15\n mkdir $dirname || exit 1\n \n cd $dirname\n+case \"$input\" in\n+ /* | [A-Za-z]:\\\\*)\n+    # Absolute path; do nothing.\n+    ;;\n+ *)\n+    # Make a symbolic link, hard link or hardcopy.\n+    ln -s ../\"$input\" . > /dev/null 2>&1 || ln ../\"$input\" . > /dev/null 2>&1 || cp ../\"$input\" .\n+    ;;\n+esac\n $prog ${1+\"$@\"} \"$input\"\n status=$?\n \n@@ -79,7 +95,7 @@ if test $status -eq 0; then\n          # If $2 is an absolute path name, then just use that,\n          # otherwise prepend `../'.\n          case \"$2\" in\n-\t   /*) target=\"$2\";;\n+\t   /* | [A-Za-z]:\\\\*) target=\"$2\";;\n \t   *) target=\"../$2\";;\n \t esac\n \t mv \"$1\" \"$target\" || status=$?"}]}