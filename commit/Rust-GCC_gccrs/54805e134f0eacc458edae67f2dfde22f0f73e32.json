{"sha": "54805e134f0eacc458edae67f2dfde22f0f73e32", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ4MDVlMTM0ZjBlYWNjNDU4ZWRhZTY3ZjJkZmRlMjJmMGY3M2UzMg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2004-07-15T03:17:42Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2004-07-15T03:17:42Z"}, "message": "trans.c (add_decl_expr): Clear TREE_READONLY if clear DECL_INITIAL.\n\n\t* trans.c (add_decl_expr): Clear TREE_READONLY if clear DECL_INITIAL.\n\t* utils.c (unchecked_convert): Don't do two VIEW_CONVERT_EXPRs.\n\nFrom-SVN: r84742", "tree": {"sha": "8b76c3c276caffea1a06dec99e6fa71cee182bcf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b76c3c276caffea1a06dec99e6fa71cee182bcf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54805e134f0eacc458edae67f2dfde22f0f73e32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54805e134f0eacc458edae67f2dfde22f0f73e32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54805e134f0eacc458edae67f2dfde22f0f73e32", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54805e134f0eacc458edae67f2dfde22f0f73e32/comments", "author": null, "committer": null, "parents": [{"sha": "cc5e9f5a4c9d096ecd1516088eeb92e1c3473575", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc5e9f5a4c9d096ecd1516088eeb92e1c3473575", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc5e9f5a4c9d096ecd1516088eeb92e1c3473575"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "5ad44ea54c066abc531e2aee33f957f8e02a9ad5", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54805e134f0eacc458edae67f2dfde22f0f73e32/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54805e134f0eacc458edae67f2dfde22f0f73e32/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=54805e134f0eacc458edae67f2dfde22f0f73e32", "patch": "@@ -1,3 +1,8 @@\n+Wed Jul 14 23:16:59 2004  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* trans.c (add_decl_expr): Clear TREE_READONLY if clear DECL_INITIAL.\n+\t* utils.c (unchecked_convert): Don't do two VIEW_CONVERT_EXPRs.\n+\n 2004-07-14  Andreas Schwab  <schwab@suse.de>\n \n \t* trans.c (gnat_init_stmt_group): Remove duplicate definition."}, {"sha": "903b314477a2a7d8fa564da1c5381ad56dd45625", "filename": "gcc/ada/trans.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54805e134f0eacc458edae67f2dfde22f0f73e32/gcc%2Fada%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54805e134f0eacc458edae67f2dfde22f0f73e32/gcc%2Fada%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftrans.c?ref=54805e134f0eacc458edae67f2dfde22f0f73e32", "patch": "@@ -4164,6 +4164,7 @@ add_decl_expr (tree gnu_decl, Entity_Id gnat_entity)\n \t\t\t       gnu_lhs, DECL_INITIAL (gnu_decl));\n \n \t  DECL_INITIAL (gnu_decl) = 0;\n+\t  TREE_READONLY (gnu_decl) = 0;\n \t  annotate_with_locus (gnu_assign_stmt,\n \t\t\t       DECL_SOURCE_LOCATION (gnu_decl));\n \t  add_stmt (gnu_assign_stmt);"}, {"sha": "3d525a07b7c2adb14edd69998e947df9e4bfc83a", "filename": "gcc/ada/utils.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54805e134f0eacc458edae67f2dfde22f0f73e32/gcc%2Fada%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54805e134f0eacc458edae67f2dfde22f0f73e32/gcc%2Fada%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Futils.c?ref=54805e134f0eacc458edae67f2dfde22f0f73e32", "patch": "@@ -3224,6 +3224,11 @@ unchecked_convert (tree type, tree expr, int notrunc_p)\n   else\n     {\n       expr = maybe_unconstrained_array (expr);\n+\n+      /* There's no point in doing two unchecked conversions in a row.  */\n+      if (TREE_CODE (expr) == VIEW_CONVERT_EXPR)\n+\texpr = TREE_OPERAND (expr, 0);\n+\n       etype = TREE_TYPE (expr);\n       expr = build1 (VIEW_CONVERT_EXPR, type, expr);\n     }"}]}