{"sha": "1f369e606fac3810e79ef0c0d4fd353a43d0d2b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWYzNjllNjA2ZmFjMzgxMGU3OWVmMGMwZDRmZDM1M2E0M2QwZDJiNA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2003-01-23T21:19:50Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-01-23T21:19:50Z"}, "message": "expr.c (build_known_method_ref): Use method's context to find method table index.\n\n\t* expr.c (build_known_method_ref): Use method's context to find\n\tmethod table index.\n\nFrom-SVN: r61670", "tree": {"sha": "4d25331ad08a441f2ed71d7a18d95b012de7da72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d25331ad08a441f2ed71d7a18d95b012de7da72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4/comments", "author": null, "committer": null, "parents": [{"sha": "c38e9817add28bde3418c28bb5aebeb9b4a8563e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c38e9817add28bde3418c28bb5aebeb9b4a8563e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c38e9817add28bde3418c28bb5aebeb9b4a8563e"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "3050610a29169decc790084fe9e5f4fb254ac3da", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=1f369e606fac3810e79ef0c0d4fd353a43d0d2b4", "patch": "@@ -1,3 +1,8 @@\n+2003-01-23  Tom Tromey  <tromey@redhat.com>\n+\n+\t* expr.c (build_known_method_ref): Use method's context to find\n+\tmethod table index.\n+\n 2003-01-23  Tom Tromey  <tromey@redhat.com>\n \n \t* constants.c (set_constant_entry): Allocated cleared memory."}, {"sha": "5ce92e00376d703550105cc21fc43e647a70f101", "filename": "gcc/java/expr.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f369e606fac3810e79ef0c0d4fd353a43d0d2b4/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=1f369e606fac3810e79ef0c0d4fd353a43d0d2b4", "patch": "@@ -1748,13 +1748,16 @@ build_known_method_ref (tree method, tree method_type ATTRIBUTE_UNUSED,\n \n \t SELF_TYPE->methods[METHOD_INDEX].ncode\n \n-\t This is guaranteed to work (assuming SELF_TYPE has\n-\t been initialized), since if the method is not compiled yet,\n-\t its ncode points to a trampoline that forces compilation. */\n+      */\n \n       int method_index = 0;\n-      tree meth;\n-      tree ref = build_class_ref (self_type);\n+      tree meth, ref;\n+\n+      /* The method might actually be declared in some superclass, so\n+\t we have to use its class context, not the caller's notion of\n+\t where the method is.  */\n+      self_type = DECL_CONTEXT (method);\n+      ref = build_class_ref (self_type);\n       ref = build1 (INDIRECT_REF, class_type_node, ref);\n       if (ncode_ident == NULL_TREE)\n \tncode_ident = get_identifier (\"ncode\");"}]}