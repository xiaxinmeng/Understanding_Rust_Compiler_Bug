{"sha": "c147ac264f3b123440f9c7b82f93f2adba3b0fda", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzE0N2FjMjY0ZjNiMTIzNDQwZjljN2I4MmY5M2YyYWRiYTNiMGZkYQ==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2008-05-28T15:56:02Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-05-28T15:56:02Z"}, "message": "sem_res.adb (Valid_Conversion): An anonymous access_to_subprogram type has a deeper level than any master only...\n\n2008-05-28  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_res.adb (Valid_Conversion): An anonymous access_to_subprogram\n\ttype has a deeper level than any master only when it is the type of an\n\taccess parameter.\n\nFrom-SVN: r136113", "tree": {"sha": "667801847cbb4b49a92dd1a5d3b04e46137a2b6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/667801847cbb4b49a92dd1a5d3b04e46137a2b6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c147ac264f3b123440f9c7b82f93f2adba3b0fda", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c147ac264f3b123440f9c7b82f93f2adba3b0fda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c147ac264f3b123440f9c7b82f93f2adba3b0fda", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c147ac264f3b123440f9c7b82f93f2adba3b0fda/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2b672e358d4022363e398446ff6efbf9b55e066e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b672e358d4022363e398446ff6efbf9b55e066e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b672e358d4022363e398446ff6efbf9b55e066e"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "b6c72b44cde41e61b7603e5174c6d8d3a81593c1", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c147ac264f3b123440f9c7b82f93f2adba3b0fda/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c147ac264f3b123440f9c7b82f93f2adba3b0fda/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=c147ac264f3b123440f9c7b82f93f2adba3b0fda", "patch": "@@ -9434,7 +9434,9 @@ package body Sem_Res is\n             end if;\n          end;\n \n-      --  Subprogram access types\n+      --  access to subprogram types. If the operand is an access parameter,\n+      --  the type has a deeper accessibility that any master, and cannot\n+      --  be assigned.\n \n       elsif (Ekind (Target_Type) = E_Access_Subprogram_Type\n                or else\n@@ -9443,6 +9445,8 @@ package body Sem_Res is\n       then\n          if\n            Ekind (Base_Type (Opnd_Type)) = E_Anonymous_Access_Subprogram_Type\n+             and then Is_Entity_Name (Operand)\n+             and then Ekind (Entity (Operand)) = E_In_Parameter\n          then\n             Error_Msg_N\n               (\"illegal attempt to store anonymous access to subprogram\",\n@@ -9452,13 +9456,9 @@ package body Sem_Res is\n                \"(RM 3.10.2 (13))\",\n                Operand);\n \n-            if Is_Entity_Name (Operand)\n-              and then Ekind (Entity (Operand)) = E_In_Parameter\n-            then\n-               Error_Msg_NE\n-                 (\"\\use named access type for& instead of access parameter\",\n-                  Operand, Entity (Operand));\n-            end if;\n+            Error_Msg_NE\n+             (\"\\use named access type for& instead of access parameter\",\n+               Operand, Entity (Operand));\n          end if;\n \n          --  Check that the designated types are subtype conformant"}]}