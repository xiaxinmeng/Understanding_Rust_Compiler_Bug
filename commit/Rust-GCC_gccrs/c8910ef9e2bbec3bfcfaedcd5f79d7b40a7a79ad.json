{"sha": "c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg5MTBlZjllMmJiZWMzYmZjZmFlZGNkNWY3OWQ3YjQwYTdhNzlhZA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2008-02-20T19:09:09Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2008-02-20T19:09:09Z"}, "message": "re PR libgcj/24170 (libjava natFilePosix.cc seems to have a security problem)\n\n\tPR libgcj/24170:\n\t* java/io/natFilePosix.cc (File::performList): Don't use\n\treaddir_r.\n\t* configure, include/config.h.in: Rebuilt.\n\t* configure.ac: Don't check for readdir_r.\n\nFrom-SVN: r132491", "tree": {"sha": "71b52b3448e1cbe7f7e4e3bfd7cc6141fcc30f2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/71b52b3448e1cbe7f7e4e3bfd7cc6141fcc30f2b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/comments", "author": null, "committer": null, "parents": [{"sha": "993ac7c7eff9ad66169977ba7f9e8eed241f107f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/993ac7c7eff9ad66169977ba7f9e8eed241f107f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/993ac7c7eff9ad66169977ba7f9e8eed241f107f"}], "stats": {"total": 24, "additions": 11, "deletions": 13}, "files": [{"sha": "8358c4a04ee06da95cd3433f3da42e6c23145ec4", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "patch": "@@ -1,3 +1,11 @@\n+2008-02-20  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libgcj/24170:\n+\t* java/io/natFilePosix.cc (File::performList): Don't use\n+\treaddir_r.\n+\t* configure, include/config.h.in: Rebuilt.\n+\t* configure.ac: Don't check for readdir_r.\n+\n 2008-02-16  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \tPR libgcj/33085"}, {"sha": "f45c9b55567ba8565c0eec3b0ebf05012f84f92a", "filename": "libjava/configure", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "patch": "@@ -20791,11 +20791,10 @@ else\n \n \n \n-\n \n \n for ac_func in strerror_r select fstat open fsync sleep opendir \\\n-                   localtime_r readdir_r getpwuid_r getcwd \\\n+                   localtime_r getpwuid_r getcwd \\\n \t\t   access stat lstat mkdir rename rmdir unlink utime chmod readlink \\\n \t\t   nl_langinfo setlocale \\\n \t\t   inet_pton uname inet_ntoa \\"}, {"sha": "2ef3b7245b0a58d13a1b2ec66c11ec09f0f1959d", "filename": "libjava/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "patch": "@@ -1023,7 +1023,7 @@ if test \"x${with_newlib}\" = \"xyes\"; then\n    PLATFORMNET=NoNet\n else\n    AC_CHECK_FUNCS([strerror_r select fstat open fsync sleep opendir \\\n-                   localtime_r readdir_r getpwuid_r getcwd \\\n+                   localtime_r getpwuid_r getcwd \\\n \t\t   access stat lstat mkdir rename rmdir unlink utime chmod readlink \\\n \t\t   nl_langinfo setlocale \\\n \t\t   inet_pton uname inet_ntoa \\"}, {"sha": "3fdde3944f2a9373c5d72674f90225b6ccc5fa57", "filename": "libjava/include/config.h.in", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Finclude%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Finclude%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fconfig.h.in?ref=c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "patch": "@@ -214,9 +214,6 @@\n /* Define to 1 if you have the <pwd.h> header file. */\n #undef HAVE_PWD_H\n \n-/* Define to 1 if you have the `readdir_r' function. */\n-#undef HAVE_READDIR_R\n-\n /* Define to 1 if you have the `readlink' function. */\n #undef HAVE_READLINK\n "}, {"sha": "5b6ec8458acced7f610e40e7dc5d9a8ba9137722", "filename": "libjava/java/io/natFilePosix.cc", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFilePosix.cc?ref=c8910ef9e2bbec3bfcfaedcd5f79d7b40a7a79ad", "patch": "@@ -1,6 +1,6 @@\n // natFile.cc - Native part of File class for POSIX.\n \n-/* Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2006\n+/* Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2006, 2008\n    Free Software Foundation\n \n    This file is part of libgcj.\n@@ -292,13 +292,7 @@ java::io::File::performList (java::io::FilenameFilter *filter,\n \n   java::util::ArrayList *list = new java::util::ArrayList ();\n   struct dirent *d;\n-#if defined(HAVE_READDIR_R) && defined(_POSIX_PTHREAD_SEMANTICS)\n-  int name_max = pathconf (buf, _PC_NAME_MAX);\n-  char dbuf[sizeof (struct dirent) + name_max + 1];\n-  while (readdir_r (dir, (struct dirent *) dbuf, &d) == 0 && d != NULL)\n-#else /* HAVE_READDIR_R */\n   while ((d = readdir (dir)) != NULL)\n-#endif /* HAVE_READDIR_R */\n     {\n       // Omit \".\" and \"..\".\n       if (d->d_name[0] == '.'"}]}