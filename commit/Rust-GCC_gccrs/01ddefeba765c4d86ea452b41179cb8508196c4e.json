{"sha": "01ddefeba765c4d86ea452b41179cb8508196c4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDFkZGVmZWJhNzY1YzRkODZlYTQ1MmI0MTE3OWNiODUwODE5NmM0ZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-01-19T10:47:59Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-01-19T10:47:59Z"}, "message": "re PR target/48496 ('asm' operand requires impossible reload)\n\n\tPR rtl-optimization/48496\n\t* src/ia64/ffi.c (ffi_call): Fix up aliasing violations.\n\nFrom-SVN: r183301", "tree": {"sha": "83a63eaea4b540c1affedf2bb26c8d6d1de58c22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83a63eaea4b540c1affedf2bb26c8d6d1de58c22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01ddefeba765c4d86ea452b41179cb8508196c4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01ddefeba765c4d86ea452b41179cb8508196c4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01ddefeba765c4d86ea452b41179cb8508196c4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01ddefeba765c4d86ea452b41179cb8508196c4e/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ac1384b7c5d9ac762c41f0b1e350aaf1f5fe3170", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac1384b7c5d9ac762c41f0b1e350aaf1f5fe3170", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac1384b7c5d9ac762c41f0b1e350aaf1f5fe3170"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "75ce3bf230f3d6919450bbf670428a8e29bcda96", "filename": "libffi/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01ddefeba765c4d86ea452b41179cb8508196c4e/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01ddefeba765c4d86ea452b41179cb8508196c4e/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=01ddefeba765c4d86ea452b41179cb8508196c4e", "patch": "@@ -1,3 +1,8 @@\n+2012-01-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/48496\n+\t* src/ia64/ffi.c (ffi_call): Fix up aliasing violations.\n+\n 2012-01-09  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* configure.ac (i?86-*-*): Set TARGET to X86_64."}, {"sha": "79e29b45a894a401c33ed7640f89b716eb2b85d8", "filename": "libffi/src/ia64/ffi.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01ddefeba765c4d86ea452b41179cb8508196c4e/libffi%2Fsrc%2Fia64%2Fffi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01ddefeba765c4d86ea452b41179cb8508196c4e/libffi%2Fsrc%2Fia64%2Fffi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fia64%2Fffi.c?ref=01ddefeba765c4d86ea452b41179cb8508196c4e", "patch": "@@ -1,5 +1,5 @@\n /* -----------------------------------------------------------------------\n-   ffi.c - Copyright (c) 1998, 2007, 2008 Red Hat, Inc.\n+   ffi.c - Copyright (c) 1998, 2007, 2008, 2012 Red Hat, Inc.\n \t   Copyright (c) 2000 Hewlett Packard Company\n    \n    IA64 Foreign Function Interface \n@@ -324,13 +324,17 @@ ffi_call(ffi_cif *cif, void (*fn)(void), void *rvalue, void **avalue)\n \tcase FFI_TYPE_FLOAT:\n \t  if (gpcount < 8 && fpcount < 8)\n \t    stf_spill (&stack->fp_regs[fpcount++], *(float *)avalue[i]);\n-\t  stack->gp_regs[gpcount++] = *(UINT32 *)avalue[i];\n+\t  {\n+\t    UINT32 tmp;\n+\t    memcpy (&tmp, avalue[i], sizeof (UINT32));\n+\t    stack->gp_regs[gpcount++] = tmp;\n+\t  }\n \t  break;\n \n \tcase FFI_TYPE_DOUBLE:\n \t  if (gpcount < 8 && fpcount < 8)\n \t    stf_spill (&stack->fp_regs[fpcount++], *(double *)avalue[i]);\n-\t  stack->gp_regs[gpcount++] = *(UINT64 *)avalue[i];\n+\t  memcpy (&stack->gp_regs[gpcount++], avalue[i], sizeof (UINT64));\n \t  break;\n \n \tcase FFI_TYPE_LONGDOUBLE:"}]}