{"sha": "5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWE5YzhhMWJiNzUzMmIzZDI2ZjFiZjY5Zjg4NTk5ODUyZGZkZDgxZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-03-27T10:52:27Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-03-27T10:52:27Z"}, "message": "dwarf2out.c (dwarf2_debug_hooks): Use dwarf2out_function_decl instead of dwarf2out_decl.\n\n\t* dwarf2out.c (dwarf2_debug_hooks): Use dwarf2out_function_decl\n\tinstead of dwarf2out_decl.\n\t(struct var_loc_node): Remove section_label field.\n\t(dwarf2out_function_decl): New function.\n\t(dwarf2out_var_location): Don't set section_label field.\n\t(dwarf2out_begin_function): Don't empty decl_loc_table here.\n\nFrom-SVN: r157771", "tree": {"sha": "e0caf0154b3a88864adf7fae9e6ff610213ccfeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e0caf0154b3a88864adf7fae9e6ff610213ccfeb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "62f7fd21955367a875adbd2d6e31c9f7c08e3764", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62f7fd21955367a875adbd2d6e31c9f7c08e3764", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62f7fd21955367a875adbd2d6e31c9f7c08e3764"}], "stats": {"total": 30, "additions": 21, "deletions": 9}, "files": [{"sha": "7fb9e3d6bc7bba0a97067e106fb8d0bbca6084a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e", "patch": "@@ -1,3 +1,12 @@\n+2010-03-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* dwarf2out.c (dwarf2_debug_hooks): Use dwarf2out_function_decl\n+\tinstead of dwarf2out_decl.\n+\t(struct var_loc_node): Remove section_label field.\n+\t(dwarf2out_function_decl): New function.\n+\t(dwarf2out_var_location): Don't set section_label field.\n+\t(dwarf2out_begin_function): Don't empty decl_loc_table here.\n+\n 2010-03-26  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR tree-optimization/43544"}, {"sha": "84a5fe72db937aec2087f099e735a6e02d5dad10", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=5a9c8a1bb7532b3d26f1bf69f88599852dfdd81e", "patch": "@@ -5410,6 +5410,7 @@ static void dwarf2out_define (unsigned int, const char *);\n static void dwarf2out_undef (unsigned int, const char *);\n static void dwarf2out_start_source_file (unsigned, const char *);\n static void dwarf2out_end_source_file (unsigned);\n+static void dwarf2out_function_decl (tree);\n static void dwarf2out_begin_block (unsigned, unsigned);\n static void dwarf2out_end_block (unsigned, unsigned);\n static bool dwarf2out_ignore_block (const_tree);\n@@ -5447,7 +5448,7 @@ const struct gcc_debug_hooks dwarf2_debug_hooks =\n   dwarf2out_end_epilogue,\n   dwarf2out_begin_function,\n   debug_nothing_int,\t\t/* end_function */\n-  dwarf2out_decl,\t\t/* function_decl */\n+  dwarf2out_function_decl,\t/* function_decl */\n   dwarf2out_global_decl,\n   dwarf2out_type_decl,\t\t/* type_decl */\n   dwarf2out_imported_module_or_decl,\n@@ -5731,7 +5732,6 @@ DEF_VEC_ALLOC_O(die_arg_entry,gc);\n struct GTY ((chain_next (\"%h.next\"))) var_loc_node {\n   rtx GTY (()) var_loc_note;\n   const char * GTY (()) label;\n-  const char * GTY (()) section_label;\n   struct var_loc_node * GTY (()) next;\n };\n \n@@ -19925,6 +19925,16 @@ dwarf2out_decl (tree decl)\n   gen_decl_die (decl, NULL, context_die);\n }\n \n+/* Write the debugging output for DECL.  */\n+\n+static void\n+dwarf2out_function_decl (tree decl)\n+{\n+  dwarf2out_decl (decl);\n+\n+  htab_empty (decl_loc_table);\n+}\n+\n /* Output a marker (i.e. a label) for the beginning of the generated code for\n    a lexical block.  */\n \n@@ -20317,11 +20327,6 @@ dwarf2out_var_location (rtx loc_note)\n       newloc->label = last_postcall_label;\n     }\n \n-  if (cfun && in_cold_section_p)\n-    newloc->section_label = crtl->subsections.cold_section_label;\n-  else\n-    newloc->section_label = text_section_label;\n-\n   last_var_location_insn = next_real;\n   last_in_cold_section_p = in_cold_section_p;\n }\n@@ -20334,8 +20339,6 @@ dwarf2out_var_location (rtx loc_note)\n static void\n dwarf2out_begin_function (tree fun)\n {\n-  htab_empty (decl_loc_table);\n-\n   if (function_section (fun) != text_section)\n     have_multiple_function_sections = true;\n "}]}