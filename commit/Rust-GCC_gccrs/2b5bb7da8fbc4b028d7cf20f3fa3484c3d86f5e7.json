{"sha": "2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI1YmI3ZGE4ZmJjNGIwMjhkN2NmMjBmM2ZhMzQ4NGMzZDg2ZjVlNw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-06-29T05:51:08Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-06-29T05:51:08Z"}, "message": "tree-vect-stmts.c (vectorizable_operation): Check both VEC_WIDEN_MULT_LO_EXPR and VEC_WIDEN_MULT_HI_EXPR optabs.\n\n\t* tree-vect-stmts.c (vectorizable_operation): Check both\n\tVEC_WIDEN_MULT_LO_EXPR and VEC_WIDEN_MULT_HI_EXPR optabs.\n\tVerify that operand[0]'s mode is TYPE_MODE (wide_vectype).\n\nFrom-SVN: r189064", "tree": {"sha": "ba15ae1ce71008720584a6558399cc8652e27b21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba15ae1ce71008720584a6558399cc8652e27b21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "90686faa403ca13d217bf6e8ad15451350780cd7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90686faa403ca13d217bf6e8ad15451350780cd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90686faa403ca13d217bf6e8ad15451350780cd7"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "7932194836c02de22b6b8a503d27671c26f19dc1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7", "patch": "@@ -1,3 +1,9 @@\n+2012-06-29  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* tree-vect-stmts.c (vectorizable_operation): Check both\n+\tVEC_WIDEN_MULT_LO_EXPR and VEC_WIDEN_MULT_HI_EXPR optabs.\n+\tVerify that operand[0]'s mode is TYPE_MODE (wide_vectype).\n+\n 2012-06-28  Richard Henderson  <rth@redhat.com>\n \n \t* doc/generic.texi (MULT_HIGHPART_EXPR): Document it."}, {"sha": "a0a03c56d13a7323e6167f3655640c1a1d86fef7", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=2b5bb7da8fbc4b028d7cf20f3fa3484c3d86f5e7", "patch": "@@ -3504,14 +3504,19 @@ vectorizable_operation (gimple stmt, gimple_stmt_iterator *gsi,\n \t    {\n \t      decl1 = NULL_TREE;\n \t      decl2 = NULL_TREE;\n-\t      optab = optab_for_tree_code (VEC_WIDEN_MULT_HI_EXPR,\n+\t      optab = optab_for_tree_code (VEC_WIDEN_MULT_LO_EXPR,\n \t\t\t\t\t   vectype, optab_default);\n \t      optab2 = optab_for_tree_code (VEC_WIDEN_MULT_HI_EXPR,\n \t\t\t\t\t    vectype, optab_default);\n \t      if (optab != NULL\n \t\t  && optab2 != NULL\n \t\t  && optab_handler (optab, vec_mode) != CODE_FOR_nothing\n-\t\t  && optab_handler (optab2, vec_mode) != CODE_FOR_nothing)\n+\t\t  && optab_handler (optab2, vec_mode) != CODE_FOR_nothing\n+\t\t  && insn_data[optab_handler (optab, vec_mode)].operand[0].mode\n+\t\t     == TYPE_MODE (wide_vectype)\n+\t\t  && insn_data[optab_handler (optab2,\n+\t\t\t\t\t      vec_mode)].operand[0].mode\n+\t\t     == TYPE_MODE (wide_vectype))\n \t\t{\n \t\t  for (i = 0; i < nunits_in; i++)\n \t\t    sel[i] = !BYTES_BIG_ENDIAN + 2 * i;"}]}