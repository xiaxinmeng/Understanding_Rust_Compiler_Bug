{"sha": "58a2bda0e5d919cec4491a7fed2bd88cfb7411b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NThhMmJkYTBlNWQ5MTljZWM0NDkxYTdmZWQyYmQ4OGNmYjc0MTFiOQ==", "commit": {"author": {"name": "Ramana Radhakrishnan", "email": "ramana.radhakrishnan@arm.com", "date": "2011-08-26T08:44:21Z"}, "committer": {"name": "Ramana Radhakrishnan", "email": "ramana@gcc.gnu.org", "date": "2011-08-26T08:44:21Z"}, "message": "Fix scheduling descriptions for smull, smmul and friends on Cortex-A9.\n\nFrom-SVN: r178098", "tree": {"sha": "1bbe4367a05f26cb1ee7bf45be18c49ff51a9a64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bbe4367a05f26cb1ee7bf45be18c49ff51a9a64"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9/comments", "author": null, "committer": null, "parents": [{"sha": "e4680a3ba0fc1ce14de13efe1762b9b7582d251f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4680a3ba0fc1ce14de13efe1762b9b7582d251f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4680a3ba0fc1ce14de13efe1762b9b7582d251f"}], "stats": {"total": 29, "additions": 22, "deletions": 7}, "files": [{"sha": "c4274b09f631ffe729b203db51dde406dad88f93", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=58a2bda0e5d919cec4491a7fed2bd88cfb7411b9", "patch": "@@ -1,3 +1,11 @@\n+2011-08-26  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n+\n+       * config/arm/cortex-a9.md (\"cortex_a9_mult_long\"): New.\n+       (\"cortex_a9_multiply_long\"): New and use above.  Handle all\n+\tlong multiply cases.\n+       (\"cortex_a9_multiply\"): Handle smmul and smmulr.\n+       (\"cortex_a9_mac\"): Handle smmla.\n+\n 2011-08-25  Richard Henderson  <rth@redhat.com>\n \n \tPR 50132"}, {"sha": "12c19efb12132e932dea03031ed5fd364e4b9aef", "filename": "gcc/config/arm/cortex-a9.md", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9/gcc%2Fconfig%2Farm%2Fcortex-a9.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58a2bda0e5d919cec4491a7fed2bd88cfb7411b9/gcc%2Fconfig%2Farm%2Fcortex-a9.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a9.md?ref=58a2bda0e5d919cec4491a7fed2bd88cfb7411b9", "patch": "@@ -68,7 +68,8 @@ cortex_a9_p1_e2 + cortex_a9_p0_e1 + cortex_a9_p1_e1\")\n   \"cortex_a9_mac_m1*2, cortex_a9_mac_m2, cortex_a9_p0_wb\")\n (define_reservation \"cortex_a9_mac\"\n   \"cortex_a9_multcycle1*2 ,cortex_a9_mac_m2, cortex_a9_p0_wb\")\n-\n+(define_reservation \"cortex_a9_mult_long\"\n+  \"cortex_a9_mac_m1*3, cortex_a9_mac_m2, cortex_a9_p0_wb\")\n \n ;; Issue at the same time along the load store pipeline and\n ;; the VFP / Neon pipeline is not possible.\n@@ -139,29 +140,35 @@ cortex_a9_p1_e2 + cortex_a9_p0_e1 + cortex_a9_p1_e1\")\n        (eq_attr \"insn\" \"smlaxy\"))\n   \"cortex_a9_mac16\")\n \n-\n (define_insn_reservation \"cortex_a9_multiply\" 4\n   (and (eq_attr \"tune\" \"cortexa9\")\n-       (eq_attr \"insn\" \"mul\"))\n+       (eq_attr \"insn\" \"mul,smmul,smmulr\"))\n        \"cortex_a9_mult\")\n \n (define_insn_reservation \"cortex_a9_mac\" 4\n   (and (eq_attr \"tune\" \"cortexa9\")\n-       (eq_attr \"insn\" \"mla\"))\n+       (eq_attr \"insn\" \"mla,smmla\"))\n        \"cortex_a9_mac\")\n \n+(define_insn_reservation \"cortex_a9_multiply_long\" 5\n+  (and (eq_attr \"tune\" \"cortexa9\")\n+       (eq_attr \"insn\" \"smull,umull,smulls,umulls,smlal,smlals,umlal,umlals\"))\n+       \"cortex_a9_mult_long\")\n+\n ;; An instruction with a result in E2 can be forwarded\n ;; to E2 or E1 or M1 or the load store unit in the next cycle.\n \n (define_bypass 1 \"cortex_a9_dp\"\n                  \"cortex_a9_dp_shift, cortex_a9_multiply,\n  cortex_a9_load1_2, cortex_a9_dp, cortex_a9_store1_2,\n- cortex_a9_mult16, cortex_a9_mac16, cortex_a9_mac, cortex_a9_store3_4, cortex_a9_load3_4\")\n+ cortex_a9_mult16, cortex_a9_mac16, cortex_a9_mac, cortex_a9_store3_4, cortex_a9_load3_4, \n+ cortex_a9_multiply_long\")\n \n (define_bypass 2 \"cortex_a9_dp_shift\"\n                  \"cortex_a9_dp_shift, cortex_a9_multiply,\n  cortex_a9_load1_2, cortex_a9_dp, cortex_a9_store1_2,\n- cortex_a9_mult16, cortex_a9_mac16, cortex_a9_mac, cortex_a9_store3_4, cortex_a9_load3_4\")\n+ cortex_a9_mult16, cortex_a9_mac16, cortex_a9_mac, cortex_a9_store3_4, cortex_a9_load3_4,\n+ cortex_a9_multiply_long\")\n \n ;; An instruction in the load store pipeline can provide\n ;; read access to a DP instruction in the P0 default pipeline\n@@ -212,7 +219,7 @@ cortex_a9_store3_4, cortex_a9_store1_2,  cortex_a9_load3_4\")\n \n (define_bypass 1\n   \"cortex_a9_fps\"\n-  \"cortex_a9_fadd, cortex_a9_fps, cortex_a9_fcmp, cortex_a9_dp, cortex_a9_dp_shift, cortex_a9_multiply\")\n+  \"cortex_a9_fadd, cortex_a9_fps, cortex_a9_fcmp, cortex_a9_dp, cortex_a9_dp_shift, cortex_a9_multiply, cortex_a9_multiply_long\")\n \n ;; Scheduling on the FP_ADD pipeline.\n (define_reservation \"ca9fp_add\" \"ca9_issue_vfp_neon + ca9fp_add1, ca9fp_add2, ca9fp_add3, ca9fp_add4\")"}]}