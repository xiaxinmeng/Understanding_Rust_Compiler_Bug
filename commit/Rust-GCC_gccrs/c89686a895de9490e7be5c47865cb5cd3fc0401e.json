{"sha": "c89686a895de9490e7be5c47865cb5cd3fc0401e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg5Njg2YTg5NWRlOTQ5MGU3YmU1YzQ3ODY1Y2I1Y2QzZmMwNDAxZQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-01-14T14:43:08Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-01-14T14:43:08Z"}, "message": "re PR fortran/30410 (Host association bug w/ EXTERNAL)\n\n2007-01-14  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/30410\n\t* trans-decl.c (gfc_sym_mangled_function_id): Module, external\n\tsymbols must not have the module name prepended.\n\n2007-01-14  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/30410\n\t* gfortran.dg/external_procedures_2.f90: New test.\n\nFrom-SVN: r120771", "tree": {"sha": "a4e352dd03599277713f5a6c685f160069c96b6c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4e352dd03599277713f5a6c685f160069c96b6c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c89686a895de9490e7be5c47865cb5cd3fc0401e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c89686a895de9490e7be5c47865cb5cd3fc0401e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c89686a895de9490e7be5c47865cb5cd3fc0401e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c89686a895de9490e7be5c47865cb5cd3fc0401e/comments", "author": null, "committer": null, "parents": [{"sha": "acdc40dfd2305e16f92e15273dad1cc6d8bee32c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acdc40dfd2305e16f92e15273dad1cc6d8bee32c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acdc40dfd2305e16f92e15273dad1cc6d8bee32c"}], "stats": {"total": 77, "additions": 55, "deletions": 22}, "files": [{"sha": "5c8567b04f7c412a3ed26997c98159087fd92d69", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c89686a895de9490e7be5c47865cb5cd3fc0401e", "patch": "@@ -1,3 +1,9 @@\n+2007-01-14  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/30410\n+\t* trans-decl.c (gfc_sym_mangled_function_id): Module, external\n+\tsymbols must not have the module name prepended.\n+\n 2007-01-11  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR libfortran/30415"}, {"sha": "44ccbccff833e8e1dba4b682e48cc60d25a934be", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=c89686a895de9490e7be5c47865cb5cd3fc0401e", "patch": "@@ -315,7 +315,8 @@ gfc_sym_mangled_function_id (gfc_symbol * sym)\n   char name[GFC_MAX_MANGLED_SYMBOL_LEN + 1];\n \n   if (sym->module == NULL || sym->attr.proc == PROC_EXTERNAL\n-      || (sym->module != NULL && sym->attr.if_source == IFSRC_IFBODY))\n+      || (sym->module != NULL && (sym->attr.external\n+\t    || sym->attr.if_source == IFSRC_IFBODY)))\n     {\n       if (strcmp (sym->name, \"MAIN__\") == 0\n \t  || sym->attr.proc == PROC_INTRINSIC)"}, {"sha": "c9a79b1afc2e5ee8167dc3af9cc9bf56c3fa865d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 21, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c89686a895de9490e7be5c47865cb5cd3fc0401e", "patch": "@@ -1,25 +1,6 @@\n-2007-01-14  Uros Bizjak  <ubizjak@gmail.com>\n-\n-\tPR target/30413\n-\t* gcc.target/i386/pr30413.c: New test.\n-\n-2007-01-14  Thomas Koenig  <Thomas.Koenig@online.de>\n-\n-\tPR fortran/30452\n-\t* gfortran.dg/string_0xfe_0xff_1.f90:  New test.\n-\n-2007-01-13  Zdenek Dvorak <dvorakz@suse.cz>\n-\n-\t* gcc.dg/20070112-1.c: New test.\n-\n-2007-01-12  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n-\n-\tPR libgfortran/30435\n-\t* gfortran.dg/list_read_6.f90: New test.\n-\n 2007-01-12  Olga Golovanevsky  <olga@il.ibm.com>\n \n-\t* gcc.dg/torture/pr24750-1.c:  Add prototype of free.\n+        * gcc.dg/torture/pr24750-1.c:  Add prototype of free.\n \n 2007-01-12  Tom Tromey  <tromey@redhat.com>\n \n@@ -69,7 +50,6 @@\n \n \t* gcc.dg/fold-compare-2.c: New test case for fold_comparison.\n \n->>>>>>> .r120737\n 2007-01-09  Brooks Moses  <brooks.moses@codesourcery.com>\n \n \t* gfortran.dg/chkbits.f90: Added IBCLR tests; test calls\n@@ -171,6 +151,11 @@\n        * g++.dg/template/duplicate1.C: New test\n        * g++.dg/template/memfriend6.C: Adjust error markers.\n \t\n+2007-01-14  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/30410\n+\t* gfortran.dg/external_procedures_2.f90: New test.\n+\n 2007-01-05  Andrew Pinski  <Andrew_Pinski@playstation.sony.com>\n \n \tPR tree-opt/30385"}, {"sha": "3f13dac3da0c49a31878a8eb51bee80f389c353d", "filename": "gcc/testsuite/gfortran.dg/external_procedures_2.f90", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ftestsuite%2Fgfortran.dg%2Fexternal_procedures_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89686a895de9490e7be5c47865cb5cd3fc0401e/gcc%2Ftestsuite%2Fgfortran.dg%2Fexternal_procedures_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fexternal_procedures_2.f90?ref=c89686a895de9490e7be5c47865cb5cd3fc0401e", "patch": "@@ -0,0 +1,41 @@\n+! { dg-do compile }\n+! Tests the for PR30410, in which the reference to extfunc would\n+! be incorrectly made to the module namespace.\n+!\n+! Contributed by Harald Anlauf <anlauf@gmx.de>\n+!\n+module mod1\n+contains\n+  function eval (func, x1)\n+    real     :: eval, func, x1\n+    external :: func\n+    eval = func (x1)\n+  end function eval\n+end module mod1\n+!-------------------------------\n+module mod2\n+  use mod1, only : eval\n+  real, external :: extfunc     ! This was referenced as __mod2__extfunc__\n+contains\n+\n+  subroutine foo (x0)\n+    real :: x0, x1\n+    x1 = 42\n+    x0 = eval (extfunc, x1)\n+  end subroutine foo\n+\n+end module mod2\n+!-------------------------------\n+function extfunc (x)\n+  real, intent(in) ::  x\n+  real             ::  extfunc\n+  extfunc = x\n+end function extfunc\n+!-------------------------------\n+program gfcbug53\n+  use mod2, only : foo\n+  real :: x0 = 0\n+  call foo (x0)\n+  print *, x0\n+end program gfcbug53\n+! { dg-final { cleanup-modules \"mod1 mod2\" } }"}]}