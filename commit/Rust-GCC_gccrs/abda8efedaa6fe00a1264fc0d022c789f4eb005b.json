{"sha": "abda8efedaa6fe00a1264fc0d022c789f4eb005b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWJkYThlZmVkYWE2ZmUwMGExMjY0ZmMwZDAyMmM3ODlmNGViMDA1Yg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-12-31T18:48:19Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-12-31T18:48:19Z"}, "message": "re PR c++/9112 (new C++ parser rejects code older parsers accepted)\n\n\tPR c++/9112\n\t* parser.c (cp_parser_direct_declarator): Handle erroneous\n\tparenthesized declarators correctly.\n\n\tPR c++/9112\n\t* g++.dg/parse/expr1.C: New test.\n\nFrom-SVN: r60706", "tree": {"sha": "4ec975132a8af09b538f4237c4c4eea7dbf01842", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ec975132a8af09b538f4237c4c4eea7dbf01842"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/abda8efedaa6fe00a1264fc0d022c789f4eb005b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abda8efedaa6fe00a1264fc0d022c789f4eb005b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abda8efedaa6fe00a1264fc0d022c789f4eb005b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abda8efedaa6fe00a1264fc0d022c789f4eb005b/comments", "author": null, "committer": null, "parents": [{"sha": "9e56a932f967a037cb38f8d939e5250736e39d68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e56a932f967a037cb38f8d939e5250736e39d68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e56a932f967a037cb38f8d939e5250736e39d68"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "49b4ca11162ac4f3fff9c50c430ac4ac2e33c085", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=abda8efedaa6fe00a1264fc0d022c789f4eb005b", "patch": "@@ -1,3 +1,9 @@\n+2002-12-31  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/9112\n+\t* parser.c (cp_parser_direct_declarator): Handle erroneous\n+\tparenthesized declarators correctly.\n+\n 2002-12-31  Gabriel Dos Reis  <gdr@integrable-solutions.net>\n \n \t* cp-tree.h (pending_lang_change): Declare."}, {"sha": "13876e529ba255f6a142d6a404c8747a8c6b249a", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=abda8efedaa6fe00a1264fc0d022c789f4eb005b", "patch": "@@ -10023,6 +10023,8 @@ cp_parser_direct_declarator (parser, abstract_p, ctor_dtor_or_conv_p)\n      declarator.  */\n   if (token->type == CPP_OPEN_PAREN)\n     {\n+      bool error_p;\n+\n       /* For an abstract declarator we do not know whether we are\n \t looking at the beginning of a parameter-declaration-clause,\n \t or at a parenthesized abstract declarator.  For example, if\n@@ -10041,7 +10043,7 @@ cp_parser_direct_declarator (parser, abstract_p, ctor_dtor_or_conv_p)\n       declarator \n \t= cp_parser_declarator (parser, abstract_p, ctor_dtor_or_conv_p);\n       /* Expect a `)'.  */\n-      cp_parser_require (parser, CPP_CLOSE_PAREN, \"`)'\");\n+      error_p = !cp_parser_require (parser, CPP_CLOSE_PAREN, \"`)'\");\n \n       /* If parsing a parenthesized abstract declarator didn't work,\n \t try a parameter-declaration-clause.  */\n@@ -10050,7 +10052,8 @@ cp_parser_direct_declarator (parser, abstract_p, ctor_dtor_or_conv_p)\n       /* If we were not parsing an abstract declarator, but failed to\n \t find a satisfactory nested declarator, then an error has\n \t occurred.  */\n-      else if (!abstract_p && declarator == error_mark_node)\n+      else if (!abstract_p \n+\t       && (declarator == error_mark_node || error_p))\n \treturn error_mark_node;\n       /* Default args cannot appear in an abstract decl.  */\n       parser->default_arg_ok_p = false;"}, {"sha": "7fc0cd9444bec1da2ef31111220cacb507e870fb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=abda8efedaa6fe00a1264fc0d022c789f4eb005b", "patch": "@@ -1,3 +1,8 @@\n+2002-12-31  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/9112\n+\t* g++.dg/parse/expr1.C: New test.\n+\n 2002-12-30  Daniel Jacobowitz  <drow@mvista.com>\n \n \t* gcc.c-torture/compile/20021230-1.c: New test."}, {"sha": "2ef82185b892a65aba32c73a902e33d40bb00567", "filename": "gcc/testsuite/g++.dg/parse/expr1.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fexpr1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abda8efedaa6fe00a1264fc0d022c789f4eb005b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fexpr1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fexpr1.C?ref=abda8efedaa6fe00a1264fc0d022c789f4eb005b", "patch": "@@ -0,0 +1,8 @@\n+struct A {\n+  A (int, int);\n+  void f ();\n+};\n+\n+void f (int a) {\n+  A (a, a).f ();\n+}"}]}