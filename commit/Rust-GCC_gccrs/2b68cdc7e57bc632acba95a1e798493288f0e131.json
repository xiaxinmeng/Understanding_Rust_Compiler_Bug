{"sha": "2b68cdc7e57bc632acba95a1e798493288f0e131", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI2OGNkYzdlNTdiYzYzMmFjYmE5NWExZTc5ODQ5MzI4OGYwZTEzMQ==", "commit": {"author": {"name": "Tom Honermann", "email": "tom@honermann.net", "date": "2019-11-29T17:43:46Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2019-11-29T17:43:46Z"}, "message": "libstdc++: P1423R3 char8_t remediation (3/4)\n\nUpdates to existing tests\n\nThis patch updates existing tests to validate the new value for the\n__cpp_lib_char8_t feature test macros and to exercise u8path factory\nfunction invocations with std::string, std::string_view, and interator\npair arguments.\n\n2019-11-29  Tom Honermann  <tom@honermann.net>\n\n\tUpdates to existing tests\n\t* testsuite/experimental/feat-char8_t.cc: Updated the expected\n\t__cpp_lib_char8_t feature test macro value.\n\t* testsuite/27_io/filesystem/path/factory/u8path.cc: Added testing of\n\tu8path invocation with std::string, std::string_view, and iterators\n\tthereof.\n\t* testsuite/experimental/filesystem/path/factory/u8path.cc: Added\n\ttesting of u8path invocation with std::string, std::string_view, and\n\titerators thereof.\n\nFrom-SVN: r278857", "tree": {"sha": "c7cf8ee41285572f8bc31fab179000be2bffb70f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c7cf8ee41285572f8bc31fab179000be2bffb70f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b68cdc7e57bc632acba95a1e798493288f0e131", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b68cdc7e57bc632acba95a1e798493288f0e131", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b68cdc7e57bc632acba95a1e798493288f0e131", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b68cdc7e57bc632acba95a1e798493288f0e131/comments", "author": {"login": "tahonermann", "id": 2211804, "node_id": "MDQ6VXNlcjIyMTE4MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2211804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tahonermann", "html_url": "https://github.com/tahonermann", "followers_url": "https://api.github.com/users/tahonermann/followers", "following_url": "https://api.github.com/users/tahonermann/following{/other_user}", "gists_url": "https://api.github.com/users/tahonermann/gists{/gist_id}", "starred_url": "https://api.github.com/users/tahonermann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tahonermann/subscriptions", "organizations_url": "https://api.github.com/users/tahonermann/orgs", "repos_url": "https://api.github.com/users/tahonermann/repos", "events_url": "https://api.github.com/users/tahonermann/events{/privacy}", "received_events_url": "https://api.github.com/users/tahonermann/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b4e2c93d908afb575b7f9bcd0c8c9ad63e717d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b4e2c93d908afb575b7f9bcd0c8c9ad63e717d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b4e2c93d908afb575b7f9bcd0c8c9ad63e717d0"}], "stats": {"total": 39, "additions": 37, "deletions": 2}, "files": [{"sha": "b7b11ecde282441938e0654f4879b3b250b34af0", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=2b68cdc7e57bc632acba95a1e798493288f0e131", "patch": "@@ -1,5 +1,15 @@\n 2019-11-29  Tom Honermann  <tom@honermann.net>\n \n+\tUpdates to existing tests\n+\t* testsuite/experimental/feat-char8_t.cc: Updated the expected\n+\t__cpp_lib_char8_t feature test macro value.\n+\t* testsuite/27_io/filesystem/path/factory/u8path.cc: Added testing of\n+\tu8path invocation with std::string, std::string_view, and iterators\n+\tthereof.\n+\t* testsuite/experimental/filesystem/path/factory/u8path.cc: Added\n+\ttesting of u8path invocation with std::string, std::string_view, and\n+\titerators thereof.\n+\n \tUpdate feature test macro, add deleted operators, update u8path\n \t* include/bits/c++config: Bumped the value of the __cpp_lib_char8_t\n \tfeature test macro."}, {"sha": "fb337ce1284ee54f9286e3f2d1da78bff04dfaac", "filename": "libstdc++-v3/testsuite/27_io/filesystem/path/factory/u8path.cc", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fpath%2Ffactory%2Fu8path.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fpath%2Ffactory%2Fu8path.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fpath%2Ffactory%2Fu8path.cc?ref=2b68cdc7e57bc632acba95a1e798493288f0e131", "patch": "@@ -19,6 +19,7 @@\n // { dg-do run { target c++17 } }\n \n #include <filesystem>\n+#include <string_view>\n #include <testsuite_hooks.h>\n \n namespace fs = std::filesystem;\n@@ -34,6 +35,22 @@ test01()\n \n   p = fs::u8path(\"\\xf0\\x9d\\x84\\x9e\");\n   VERIFY( p.u8string() == u8\"\\U0001D11E\" );\n+\n+  std::string s1 = \"filename2\";\n+  p = fs::u8path(s1);\n+  VERIFY( p.u8string() == u8\"filename2\" );\n+\n+  std::string s2 = \"filename3\";\n+  p = fs::u8path(s2.begin(), s2.end());\n+  VERIFY( p.u8string() == u8\"filename3\" );\n+\n+  std::string_view sv1{ s1 };\n+  p = fs::u8path(sv1);\n+  VERIFY( p.u8string() == u8\"filename2\" );\n+\n+  std::string_view sv2{ s2 };\n+  p = fs::u8path(sv2.begin(), sv2.end());\n+  VERIFY( p.u8string() == u8\"filename3\" );\n }\n \n void"}, {"sha": "c9b277a462668af05817793fd0f4e420a7356731", "filename": "libstdc++-v3/testsuite/experimental/feat-char8_t.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffeat-char8_t.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffeat-char8_t.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffeat-char8_t.cc?ref=2b68cdc7e57bc632acba95a1e798493288f0e131", "patch": "@@ -12,6 +12,6 @@\n \n #ifndef  __cpp_lib_char8_t\n #  error \"__cpp_lib_char8_t\"\n-#elif  __cpp_lib_char8_t != 201811L\n-#  error \"__cpp_lib_char8_t != 201811L\"\n+#elif  __cpp_lib_char8_t != 201907L\n+#  error \"__cpp_lib_char8_t != 201907L\"\n #endif"}, {"sha": "83219b7dddaf4fea2cac4d6071724f17232eb89d", "filename": "libstdc++-v3/testsuite/experimental/filesystem/path/factory/u8path.cc", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fpath%2Ffactory%2Fu8path.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b68cdc7e57bc632acba95a1e798493288f0e131/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fpath%2Ffactory%2Fu8path.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fpath%2Ffactory%2Fu8path.cc?ref=2b68cdc7e57bc632acba95a1e798493288f0e131", "patch": "@@ -35,6 +35,14 @@ test01()\n \n   p = fs::u8path(\"\\xf0\\x9d\\x84\\x9e\");\n   VERIFY( p.u8string() == u8\"\\U0001D11E\" );\n+\n+  std::string s1 = \"filename2\";\n+  p = fs::u8path(s1);\n+  VERIFY( p.u8string() == u8\"filename2\" );\n+\n+  std::string s2 = \"filename3\";\n+  p = fs::u8path(s2.begin(), s2.end());\n+  VERIFY( p.u8string() == u8\"filename3\" );\n }\n \n void"}]}