{"sha": "7941ceabf0f14279e93443a63ca4d355f3a88830", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzk0MWNlYWJmMGYxNDI3OWU5MzQ0M2E2M2NhNGQzNTVmM2E4ODgzMA==", "commit": {"author": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "1999-08-10T05:32:23Z"}, "committer": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "1999-08-10T05:32:23Z"}, "message": "[multiple changes]\n\nMon Aug  9 18:33:38 1999  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n\n        * Makefile: Rebuilt.\n\t* Makefile.am (toolexeclibdir): Add $(MULTISUBDIR) even for native\n\tbuilds.\n\n\t* java/net/natPlainSocketImpl.cc: Include <sys/select.h> only if\n\tpresent.\n\n\t* configure: Rebuilt.\n\t* configure.in: Properly align --help output, fix capitalization\n\tand punctuation.\n\t* acinclude.m4: Likewise.\n\n1999-08-09  Kresten Krab Thorup  <krab@gnu.org>\n\n\t* include/javaprims.h (_Jv_word, _Jv_word2): New types.\n\n\t* include/java-interp.h (_Jv_InterpMethodInvocation): Use _Jv_word.\n\t(_Jv_callInterpretedMethod): Unused. Remove.\n\t(_Jv_InterpMethod::run,run_normal,run_synch_object,run_synch_class):\n\tUse ffi_raw.\n\t* include/java-cpool.h (_Jv_get, _Jv_put): Remove.\n\t(_Jv_{store,load}{Indexes,Int,Float,Long,Double}): Use _Jv_word.\n\t* boehm.cc (_Jv_MarkObj): Use _Jv_word.\n\t* interpret.cc: use _Jv_word.\n\t* defineclass.cc: use_Jv_word.\n\t* resolve.cc: Use _Jv_word.\n\t(_Jv_ResolvePoolEntry): Return _Jv_word.\n\t* java/lang/Class.h (_Jv_Constants): Use _Jv_word for cpool.\n\t* java/lang/natClassLoader.cc (_Jv_InternClassStrings): Use _Jv_word.\n\n\t* interpret.cc (gnu::gcj::runtime::MethodInvocation::continue1):\n\tChange comment.\n\nFrom-SVN: r28641", "tree": {"sha": "9c08b881a7b585b2167568feb299be46b2919659", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c08b881a7b585b2167568feb299be46b2919659"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7941ceabf0f14279e93443a63ca4d355f3a88830", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7941ceabf0f14279e93443a63ca4d355f3a88830", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7941ceabf0f14279e93443a63ca4d355f3a88830", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7941ceabf0f14279e93443a63ca4d355f3a88830/comments", "author": null, "committer": null, "parents": [{"sha": "3ef1cea850c365903de7137b0a444f49e736981f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ef1cea850c365903de7137b0a444f49e736981f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ef1cea850c365903de7137b0a444f49e736981f"}], "stats": {"total": 935, "additions": 471, "deletions": 464}, "files": [{"sha": "9b04792a1e58230ef41322ce6fba9384fe065813", "filename": "libjava/ChangeLog", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -1,5 +1,41 @@\n Mon Aug  9 18:33:38 1999  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n \n+        * Makefile: Rebuilt.\n+\t* Makefile.am (toolexeclibdir): Add $(MULTISUBDIR) even for native\n+\tbuilds.\n+\n+\t* java/net/natPlainSocketImpl.cc: Include <sys/select.h> only if\n+\tpresent.\n+\n+\t* configure: Rebuilt.\n+\t* configure.in: Properly align --help output, fix capitalization\n+\tand punctuation.\n+\t* acinclude.m4: Likewise.\n+\n+1999-08-09  Kresten Krab Thorup  <krab@gnu.org>\n+\n+\t* include/javaprims.h (_Jv_word, _Jv_word2): New types.\n+\n+\t* include/java-interp.h (_Jv_InterpMethodInvocation): Use _Jv_word.\n+\t(_Jv_callInterpretedMethod): Unused. Remove.\n+\t(_Jv_InterpMethod::run,run_normal,run_synch_object,run_synch_class):\n+\tUse ffi_raw.\n+\t* include/java-cpool.h (_Jv_get, _Jv_put): Remove.\n+\t(_Jv_{store,load}{Indexes,Int,Float,Long,Double}): Use _Jv_word.\n+\t* boehm.cc (_Jv_MarkObj): Use _Jv_word.\n+\t* interpret.cc: use _Jv_word.\n+\t* defineclass.cc: use_Jv_word.\n+\t* resolve.cc: Use _Jv_word.\n+\t(_Jv_ResolvePoolEntry): Return _Jv_word.\n+\t* java/lang/Class.h (_Jv_Constants): Use _Jv_word for cpool.\n+\t* java/lang/natClassLoader.cc (_Jv_InternClassStrings): Use _Jv_word.\n+\n+\t* interpret.cc (gnu::gcj::runtime::MethodInvocation::continue1): \n+\tChange comment.\n+\n+Mon Aug  9 18:33:38 1999  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* configure: Rebuilt.\n \t* configure.in (sched_yield): Try librt first, then libposix4.\n \tAdd -lrt, -lposix4 to THREADSPEC.\n "}, {"sha": "ce6c32ee8eb98a7fb52f368512d079d6cfdd95fc", "filename": "libjava/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -15,7 +15,7 @@ endif\n ## Install a library built with a cross compiler in tooldir, not\n ## libdir.\n if USE_LIBDIR\n-toolexeclibdir = $(libdir)\n+toolexeclibdir = $(libdir)$(MULTISUBDIR)\n else\n toolexecdir = $(exec_prefix)/$(target_alias)\n toolexeclibdir = $(toolexecdir)/lib$(MULTISUBDIR)"}, {"sha": "d0c1ab25ae0413f4188773b175a94b52465b6b84", "filename": "libjava/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -110,7 +110,7 @@ AUTOMAKE_OPTIONS = foreign no-installinfo\n @TESTSUBDIR_TRUE@SUBDIRS = \\\n @TESTSUBDIR_TRUE@testsuite\n @USE_LIBDIR_TRUE@toolexeclibdir = \\\n-@USE_LIBDIR_TRUE@$(libdir)\n+@USE_LIBDIR_TRUE@$(libdir)$(MULTISUBDIR)\n @USE_LIBDIR_FALSE@toolexeclibdir = \\\n @USE_LIBDIR_FALSE@$(toolexecdir)/lib$(MULTISUBDIR)\n @USE_LIBDIR_FALSE@toolexecdir = \\"}, {"sha": "1a75a6d5e57e1da9a21db6feef6ccee62a623add", "filename": "libjava/THANKS", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FTHANKS", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2FTHANKS", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FTHANKS?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -13,7 +13,7 @@ Gilles Zunino\t\tGilles.Zunino@hei.fr\n Kresten Krab Thorup\tkrab@gnu.org\n Per Bothner\t\tper@bothner.com\n Rainer Orth\t\tro@TechFak.Uni-Bielefeld.DE\n-Stu Grossman\t\tgrossman@juniper.com\n+Stu Grossman\t\tgrossman@juniper.net\n Tom Tromey\t\ttromey@cygnus.com\n Urban Widmark\t\turban@svenskatest.se\n Warren Levy\t\twarrenl@cygnus.com"}, {"sha": "1b7186a8d19a8847cb22c4900057873e5f57bb58", "filename": "libjava/acinclude.m4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Facinclude.m4?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -8,7 +8,7 @@ AC_DEFUN(LIBGCJ_CONFIGURE,\n [\n dnl Default to --enable-multilib\n AC_ARG_ENABLE(multilib,\n-[  --enable-multilib         build many library versions (default)],\n+[  --enable-multilib       build many library versions (default)],\n [case \"${enableval}\" in\n   yes) multilib=yes ;;\n   no)  multilib=no ;;"}, {"sha": "f73bf868017c8ffe8706c4b8478b6036695937e2", "filename": "libjava/boehm.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fboehm.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fboehm.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fboehm.cc?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -112,7 +112,8 @@ _Jv_MarkObj (void *addr, void *msp, void *msl, void * /*env*/)\n       MAYBE_MARK (w, mark_stack_ptr, mark_stack_limit, c, c4label);\n       for (int i = 0; i < c->constants.size; ++i)\n \t{\n-\t  w = (word) c->constants.data[i];\n+\t  /* FIXME: We could make this more precise by using the tags -KKT */\n+\t  w = (word) c->constants.data[i].p;\n \t  MAYBE_MARK (w, mark_stack_ptr, mark_stack_limit, c, c5label);\n \t}\n "}, {"sha": "39914da96e963a668209672fedddf2ff6ccc1cc5", "filename": "libjava/configure", "status": "modified", "additions": 213, "deletions": 201, "changes": 414, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -12,9 +12,10 @@ ac_help=\n ac_default_prefix=/usr/local\n # Any additions from configure.in:\n ac_help=\"$ac_help\n-  --with-target-subdir=SUBDIR      Configuring in a subdirectory\"\n+  --with-target-subdir=SUBDIR\n+                          configuring in a subdirectory\"\n ac_help=\"$ac_help\n-  --with-cross-host=HOST           Configuring with a cross compiler\"\n+  --with-cross-host=HOST  configuring with a cross compiler\"\n ac_help=\"$ac_help\n   --enable-multilib         build many library versions (default)\"\n ac_help=\"$ac_help\n@@ -31,19 +32,19 @@ ac_help=\"$ac_help\n ac_help=\"$ac_help\n   --disable-libtool-lock  avoid locking (might break parallel builds)\"\n ac_help=\"$ac_help\n-  --enable-fast-character          Prefer speed over size for Character\"\n+  --enable-fast-character prefer speed over size for Character\"\n ac_help=\"$ac_help\n-  --enable-libgcj-debug           Enable runtime debugging code\"\n+  --enable-libgcj-debug   enable runtime debugging code\"\n ac_help=\"$ac_help\n-  --enable-interpreter            Enable interpreter\"\n+  --enable-interpreter    enable interpreter\"\n ac_help=\"$ac_help\n-  --with-ecos      Enable runtime eCos target support.\"\n+  --with-ecos             enable runtime eCos target support\"\n ac_help=\"$ac_help\n-  --with-system-zlib               Use installed libz\"\n+  --with-system-zlib      use installed libz\"\n ac_help=\"$ac_help\n-  --enable-java-gc=TYPE    choose garbage collector [boehm]\"\n+  --enable-java-gc=TYPE   choose garbage collector [boehm]\"\n ac_help=\"$ac_help\n-  --enable-threads=TYPE    choose threading package\"\n+  --enable-threads=TYPE   choose threading package\"\n \n # Initialize some variables set by options.\n # The variables have the same names as the options, with\n@@ -61,6 +62,7 @@ program_suffix=NONE\n program_transform_name=s,x,x,\n silent=\n site=\n+sitefile=\n srcdir=\n target=NONE\n verbose=\n@@ -175,6 +177,7 @@ Configuration:\n   --help                  print this message\n   --no-create             do not create output files\n   --quiet, --silent       do not print \\`checking...' messages\n+  --site-file=FILE        use FILE as the site file\n   --version               print the version of autoconf that created configure\n Directory and file names:\n   --prefix=PREFIX         install architecture-independent files in PREFIX\n@@ -345,6 +348,11 @@ EOF\n   -site=* | --site=* | --sit=*)\n     site=\"$ac_optarg\" ;;\n \n+  -site-file | --site-file | --site-fil | --site-fi | --site-f)\n+    ac_prev=sitefile ;;\n+  -site-file=* | --site-file=* | --site-fil=* | --site-fi=* | --site-f=*)\n+    sitefile=\"$ac_optarg\" ;;\n+\n   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n     ac_prev=srcdir ;;\n   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n@@ -510,12 +518,16 @@ fi\n srcdir=`echo \"${srcdir}\" | sed 's%\\([^/]\\)/*$%\\1%'`\n \n # Prefer explicitly selected file to automatically selected ones.\n-if test -z \"$CONFIG_SITE\"; then\n-  if test \"x$prefix\" != xNONE; then\n-    CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n-  else\n-    CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n+if test -z \"$sitefile\"; then\n+  if test -z \"$CONFIG_SITE\"; then\n+    if test \"x$prefix\" != xNONE; then\n+      CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n+    else\n+      CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n+    fi\n   fi\n+else\n+  CONFIG_SITE=\"$sitefile\"\n fi\n for ac_site_file in $CONFIG_SITE; do\n   if test -r \"$ac_site_file\"; then\n@@ -603,7 +615,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:607: checking host system type\" >&5\n+echo \"configure:619: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -624,7 +636,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:628: checking target system type\" >&5\n+echo \"configure:640: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -642,7 +654,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:646: checking build system type\" >&5\n+echo \"configure:658: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -690,7 +702,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:694: checking for a BSD compatible install\" >&5\n+echo \"configure:706: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -743,7 +755,7 @@ test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n echo $ac_n \"checking whether build environment is sane\"\"... $ac_c\" 1>&6\n-echo \"configure:747: checking whether build environment is sane\" >&5\n+echo \"configure:759: checking whether build environment is sane\" >&5\n # Just in case\n sleep 1\n echo timestamp > conftestfile\n@@ -800,7 +812,7 @@ test \"$program_suffix\" != NONE &&\n test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:804: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:816: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -833,12 +845,12 @@ else\n fi\n \n echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n-echo \"configure:837: checking for Cygwin environment\" >&5\n+echo \"configure:849: checking for Cygwin environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 842 \"configure\"\n+#line 854 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -849,7 +861,7 @@ int main() {\n return __CYGWIN__;\n ; return 0; }\n EOF\n-if { (eval echo configure:853: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:865: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_cygwin=yes\n else\n@@ -866,19 +878,19 @@ echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n CYGWIN=\n test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n-echo \"configure:870: checking for mingw32 environment\" >&5\n+echo \"configure:882: checking for mingw32 environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 875 \"configure\"\n+#line 887 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n return __MINGW32__;\n ; return 0; }\n EOF\n-if { (eval echo configure:882: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:894: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_mingw32=yes\n else\n@@ -926,7 +938,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:930: checking host system type\" >&5\n+echo \"configure:942: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -968,7 +980,7 @@ EOF\n \n missing_dir=`cd $ac_aux_dir && pwd`\n echo $ac_n \"checking for working aclocal\"\"... $ac_c\" 1>&6\n-echo \"configure:972: checking for working aclocal\" >&5\n+echo \"configure:984: checking for working aclocal\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -981,7 +993,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoconf\"\"... $ac_c\" 1>&6\n-echo \"configure:985: checking for working autoconf\" >&5\n+echo \"configure:997: checking for working autoconf\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -994,7 +1006,7 @@ else\n fi\n \n echo $ac_n \"checking for working automake\"\"... $ac_c\" 1>&6\n-echo \"configure:998: checking for working automake\" >&5\n+echo \"configure:1010: checking for working automake\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1007,7 +1019,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoheader\"\"... $ac_c\" 1>&6\n-echo \"configure:1011: checking for working autoheader\" >&5\n+echo \"configure:1023: checking for working autoheader\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1020,7 +1032,7 @@ else\n fi\n \n echo $ac_n \"checking for working makeinfo\"\"... $ac_c\" 1>&6\n-echo \"configure:1024: checking for working makeinfo\" >&5\n+echo \"configure:1036: checking for working makeinfo\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1045,7 +1057,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1049: checking for $ac_word\" >&5\n+echo \"configure:1061: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1075,7 +1087,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1079: checking for $ac_word\" >&5\n+echo \"configure:1091: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1124,7 +1136,7 @@ fi\n fi\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1128: checking whether we are using GNU C\" >&5\n+echo \"configure:1140: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1133,7 +1145,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1137: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1149: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1148,7 +1160,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1152: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1164: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1184,7 +1196,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1188: checking for $ac_word\" >&5\n+echo \"configure:1200: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CXX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1217,7 +1229,7 @@ test -n \"$CXX\" || CXX=\"gcc\"\n test -z \"$CXX\" && { echo \"configure: error: no acceptable c++ found in \\$PATH\" 1>&2; exit 1; }\n \n echo $ac_n \"checking whether we are using GNU C++\"\"... $ac_c\" 1>&6\n-echo \"configure:1221: checking whether we are using GNU C++\" >&5\n+echo \"configure:1233: checking whether we are using GNU C++\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gxx'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1226,7 +1238,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1230: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1242: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gxx=yes\n else\n   ac_cv_prog_gxx=no\n@@ -1241,7 +1253,7 @@ if test $ac_cv_prog_gxx = yes; then\n   ac_save_CXXFLAGS=\"$CXXFLAGS\"\n   CXXFLAGS=\n   echo $ac_n \"checking whether ${CXX-g++} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1245: checking whether ${CXX-g++} accepts -g\" >&5\n+echo \"configure:1257: checking whether ${CXX-g++} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1274,7 +1286,7 @@ fi\n # LIBGCJ_CONFIGURE, which doesn't work because that means that it will\n # be run before AC_CANONICAL_HOST.\n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:1278: checking build system type\" >&5\n+echo \"configure:1290: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -1295,7 +1307,7 @@ echo \"$ac_t\"\"$build\" 1>&6\n # Extract the first word of \"${ac_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1299: checking for $ac_word\" >&5\n+echo \"configure:1311: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1327,7 +1339,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1331: checking for $ac_word\" >&5\n+echo \"configure:1343: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1359,7 +1371,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1363: checking for $ac_word\" >&5\n+echo \"configure:1375: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1391,7 +1403,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1395: checking for $ac_word\" >&5\n+echo \"configure:1407: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1436,7 +1448,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1440: checking for a BSD compatible install\" >&5\n+echo \"configure:1452: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1490,7 +1502,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:1494: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:1506: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -1524,7 +1536,7 @@ if false; then\n   \n \n echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n-echo \"configure:1528: checking for executable suffix\" >&5\n+echo \"configure:1540: checking for executable suffix\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1534,7 +1546,7 @@ else\n   rm -f conftest*\n   echo 'int main () { return 0; }' > conftest.$ac_ext\n   ac_cv_exeext=\n-  if { (eval echo configure:1538: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+  if { (eval echo configure:1550: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n     for file in conftest.*; do\n       case $file in\n       *.c | *.o | *.obj | *.ilk | *.pdb) ;;\n@@ -1656,7 +1668,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1660: checking for $ac_word\" >&5\n+echo \"configure:1672: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1686,7 +1698,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1690: checking for $ac_word\" >&5\n+echo \"configure:1702: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1716,7 +1728,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1720: checking for $ac_word\" >&5\n+echo \"configure:1732: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1767,7 +1779,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1771: checking for $ac_word\" >&5\n+echo \"configure:1783: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1799,7 +1811,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1803: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1815: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1810,12 +1822,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1814 \"configure\"\n+#line 1826 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1819: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1831: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1841,12 +1853,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1845: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1857: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1850: checking whether we are using GNU C\" >&5\n+echo \"configure:1862: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1855,7 +1867,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1859: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1871: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1874,7 +1886,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1878: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1890: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1917,7 +1929,7 @@ ac_prog=ld\n if test \"$ac_cv_prog_gcc\" = yes; then\n   # Check if gcc -print-prog-name=ld gives a path.\n   echo $ac_n \"checking for ld used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:1921: checking for ld used by GCC\" >&5\n+echo \"configure:1933: checking for ld used by GCC\" >&5\n   ac_prog=`($CC -print-prog-name=ld) 2>&5`\n   case \"$ac_prog\" in\n     # Accept absolute paths.\n@@ -1941,10 +1953,10 @@ echo \"configure:1921: checking for ld used by GCC\" >&5\n   esac\n elif test \"$with_gnu_ld\" = yes; then\n   echo $ac_n \"checking for GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1945: checking for GNU ld\" >&5\n+echo \"configure:1957: checking for GNU ld\" >&5\n else\n   echo $ac_n \"checking for non-GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1948: checking for non-GNU ld\" >&5\n+echo \"configure:1960: checking for non-GNU ld\" >&5\n fi\n if eval \"test \\\"`echo '$''{'ac_cv_path_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1980,7 +1992,7 @@ fi\n test -z \"$LD\" && { echo \"configure: error: no acceptable ld found in \\$PATH\" 1>&2; exit 1; }\n \n echo $ac_n \"checking if the linker ($LD) is GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1984: checking if the linker ($LD) is GNU ld\" >&5\n+echo \"configure:1996: checking if the linker ($LD) is GNU ld\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1996,7 +2008,7 @@ echo \"$ac_t\"\"$ac_cv_prog_gnu_ld\" 1>&6\n \n \n echo $ac_n \"checking for BSD-compatible nm\"\"... $ac_c\" 1>&6\n-echo \"configure:2000: checking for BSD-compatible nm\" >&5\n+echo \"configure:2012: checking for BSD-compatible nm\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2033,7 +2045,7 @@ echo \"$ac_t\"\"$NM\" 1>&6\n \n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:2037: checking whether ln -s works\" >&5\n+echo \"configure:2049: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2077,8 +2089,8 @@ test x\"$silent\" = xyes && libtool_flags=\"$libtool_flags --silent\"\n case \"$host\" in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 2081 \"configure\"' > conftest.$ac_ext\n-  if { (eval echo configure:2082: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  echo '#line 2093 \"configure\"' > conftest.$ac_ext\n+  if { (eval echo configure:2094: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case \"`/usr/bin/file conftest.o`\" in\n     *32-bit*)\n       LD=\"${LD-ld} -32\"\n@@ -2099,19 +2111,19 @@ case \"$host\" in\n   SAVE_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS -belf\"\n   echo $ac_n \"checking whether the C compiler needs -belf\"\"... $ac_c\" 1>&6\n-echo \"configure:2103: checking whether the C compiler needs -belf\" >&5\n+echo \"configure:2115: checking whether the C compiler needs -belf\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2108 \"configure\"\n+#line 2120 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2115: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2127: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   lt_cv_cc_needs_belf=yes\n else\n@@ -2295,7 +2307,7 @@ EOF\n esac\n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2299: checking how to run the C preprocessor\" >&5\n+echo \"configure:2311: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2310,13 +2322,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2314 \"configure\"\n+#line 2326 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2320: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2332: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2327,13 +2339,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2331 \"configure\"\n+#line 2343 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2337: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2349: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2344,13 +2356,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2348 \"configure\"\n+#line 2360 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2354: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2366: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2375,7 +2387,7 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n cat > conftest.$ac_ext <<EOF\n-#line 2379 \"configure\"\n+#line 2391 \"configure\"\n #include \"confdefs.h\"\n #include <stdint.h>\n EOF\n@@ -2390,7 +2402,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2394 \"configure\"\n+#line 2406 \"configure\"\n #include \"confdefs.h\"\n #include <inttypes.h>\n EOF\n@@ -2405,7 +2417,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2409 \"configure\"\n+#line 2421 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n EOF\n@@ -2420,7 +2432,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2424 \"configure\"\n+#line 2436 \"configure\"\n #include \"confdefs.h\"\n #include <sys/config.h>\n EOF\n@@ -2437,7 +2449,7 @@ rm -f conftest*\n \n \n cat > conftest.$ac_ext <<EOF\n-#line 2441 \"configure\"\n+#line 2453 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -2452,7 +2464,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2456 \"configure\"\n+#line 2468 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -2490,7 +2502,7 @@ ZLIBSPEC=\n libsubdir=.libs\n \n echo $ac_n \"checking for garbage collector to use\"\"... $ac_c\" 1>&6\n-echo \"configure:2494: checking for garbage collector to use\" >&5\n+echo \"configure:2506: checking for garbage collector to use\" >&5\n # Check whether --enable-java-gc or --disable-java-gc was given.\n if test \"${enable_java_gc+set}\" = set; then\n   enableval=\"$enable_java_gc\"\n@@ -2540,7 +2552,7 @@ esac\n \n \n echo $ac_n \"checking for threads package to use\"\"... $ac_c\" 1>&6\n-echo \"configure:2544: checking for threads package to use\" >&5\n+echo \"configure:2556: checking for threads package to use\" >&5\n # Check whether --enable-threads or --disable-threads was given.\n if test \"${enable_threads+set}\" = set; then\n   enableval=\"$enable_threads\"\n@@ -2732,12 +2744,12 @@ else\n    for ac_func in strerror ioctl select open fsync sleep\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2736: checking for $ac_func\" >&5\n+echo \"configure:2748: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2741 \"configure\"\n+#line 2753 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2760,7 +2772,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2764: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2776: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2787,12 +2799,12 @@ done\n    for ac_func in ctime_r ctime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2791: checking for $ac_func\" >&5\n+echo \"configure:2803: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2796 \"configure\"\n+#line 2808 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2815,7 +2827,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2819: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2831: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2842,12 +2854,12 @@ done\n    for ac_func in gmtime_r localtime_r readdir_r getpwuid_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2846: checking for $ac_func\" >&5\n+echo \"configure:2858: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2851 \"configure\"\n+#line 2863 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2870,7 +2882,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2874: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2886: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2897,12 +2909,12 @@ done\n    for ac_func in access stat mkdir rename rmdir unlink realpath\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2901: checking for $ac_func\" >&5\n+echo \"configure:2913: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2906 \"configure\"\n+#line 2918 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2925,7 +2937,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2929: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2941: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2952,12 +2964,12 @@ done\n    for ac_func in inet_aton inet_addr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2956: checking for $ac_func\" >&5\n+echo \"configure:2968: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2961 \"configure\"\n+#line 2973 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2980,7 +2992,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2984: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2996: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3007,12 +3019,12 @@ done\n    for ac_func in inet_pton uname inet_ntoa\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3011: checking for $ac_func\" >&5\n+echo \"configure:3023: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3016 \"configure\"\n+#line 3028 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3035,7 +3047,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3039: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3051: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3063,12 +3075,12 @@ done\n    for ac_func in gethostbyname_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3067: checking for $ac_func\" >&5\n+echo \"configure:3079: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3072 \"configure\"\n+#line 3084 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3091,7 +3103,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3095: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3107: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3118,7 +3130,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3122 \"configure\"\n+#line 3134 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3138,7 +3150,7 @@ rm -f conftest*\n      *\" -D_REENTRANT \"*) ;;\n      *)\n \t\techo $ac_n \"checking whether gethostbyname_r declaration requires -D_REENTRANT\"\"... $ac_c\" 1>&6\n-echo \"configure:3142: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n+echo \"configure:3154: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_gethostbyname_r_needs_reentrant'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3151,14 +3163,14 @@ ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftes\n cross_compiling=$ac_cv_prog_cxx_cross\n \n \t  cat > conftest.$ac_ext <<EOF\n-#line 3155 \"configure\"\n+#line 3167 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:3162: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3174: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=no\n else\n@@ -3168,14 +3180,14 @@ else\n   \t\tCPPFLAGS_SAVE=\"$CPPFLAGS\"\n \t\tCPPFLAGS=\"$CPPFLAGS -D_REENTRANT\"\n \t\tcat > conftest.$ac_ext <<EOF\n-#line 3172 \"configure\"\n+#line 3184 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:3179: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3191: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=yes\n else\n@@ -3210,12 +3222,12 @@ EOF\n      esac\n \n      echo $ac_n \"checking for struct hostent_data\"\"... $ac_c\" 1>&6\n-echo \"configure:3214: checking for struct hostent_data\" >&5\n+echo \"configure:3226: checking for struct hostent_data\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_struct_hostent_data'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \tcat > conftest.$ac_ext <<EOF\n-#line 3219 \"configure\"\n+#line 3231 \"configure\"\n #include \"confdefs.h\"\n \n #if GETHOSTBYNAME_R_NEEDS_REENTRANT && !defined(_REENTRANT)\n@@ -3226,7 +3238,7 @@ int main() {\n struct hostent_data data;\n ; return 0; }\n EOF\n-if { (eval echo configure:3230: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3242: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_struct_hostent_data=yes\n else\n@@ -3255,12 +3267,12 @@ done\n    for ac_func in gethostbyaddr_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3259: checking for $ac_func\" >&5\n+echo \"configure:3271: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3264 \"configure\"\n+#line 3276 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3283,7 +3295,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3287: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3299: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3310,7 +3322,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3314 \"configure\"\n+#line 3326 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3334,12 +3346,12 @@ done\n    for ac_func in gethostname\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3338: checking for $ac_func\" >&5\n+echo \"configure:3350: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3343 \"configure\"\n+#line 3355 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3362,7 +3374,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3366: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3378: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3386,7 +3398,7 @@ EOF\n EOF\n \n      cat > conftest.$ac_ext <<EOF\n-#line 3390 \"configure\"\n+#line 3402 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -3413,12 +3425,12 @@ done\n    for ac_func in pthread_mutexattr_settype pthread_mutexattr_setkind_np\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3417: checking for $ac_func\" >&5\n+echo \"configure:3429: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3422 \"configure\"\n+#line 3434 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3441,7 +3453,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3445: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3457: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3471,12 +3483,12 @@ done\n    for ac_func in sched_yield\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3475: checking for $ac_func\" >&5\n+echo \"configure:3487: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3480 \"configure\"\n+#line 3492 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3499,7 +3511,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3503: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3515: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3521,15 +3533,15 @@ EOF\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for sched_yield in -lrt\"\"... $ac_c\" 1>&6\n-echo \"configure:3525: checking for sched_yield in -lrt\" >&5\n+echo \"configure:3537: checking for sched_yield in -lrt\" >&5\n ac_lib_var=`echo rt'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lrt  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3533 \"configure\"\n+#line 3545 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3540,7 +3552,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:3544: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3556: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3566,15 +3578,15 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n \n        echo $ac_n \"checking for sched_yield in -lposix4\"\"... $ac_c\" 1>&6\n-echo \"configure:3570: checking for sched_yield in -lposix4\" >&5\n+echo \"configure:3582: checking for sched_yield in -lposix4\" >&5\n ac_lib_var=`echo posix4'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lposix4  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3578 \"configure\"\n+#line 3590 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3585,7 +3597,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:3589: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3601: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3623,12 +3635,12 @@ done\n    for ac_func in gettimeofday time ftime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3627: checking for $ac_func\" >&5\n+echo \"configure:3639: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3632 \"configure\"\n+#line 3644 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3651,7 +3663,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3655: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3667: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3682,12 +3694,12 @@ done\n    for ac_func in memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3686: checking for $ac_func\" >&5\n+echo \"configure:3698: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3691 \"configure\"\n+#line 3703 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3710,7 +3722,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3714: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3726: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3740,12 +3752,12 @@ done\n    for ac_func in memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3744: checking for $ac_func\" >&5\n+echo \"configure:3756: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3749 \"configure\"\n+#line 3761 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3768,7 +3780,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3772: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3784: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3816,20 +3828,20 @@ done\n    #--------------------------------------------------------------------\n \n    echo $ac_n \"checking for socket libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:3820: checking for socket libraries\" >&5\n+echo \"configure:3832: checking for socket libraries\" >&5\n if eval \"test \\\"`echo '$''{'gcj_cv_lib_sockets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   gcj_cv_lib_sockets=\n      gcj_checkBoth=0\n      unset ac_cv_func_connect\n      echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:3828: checking for connect\" >&5\n+echo \"configure:3840: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3833 \"configure\"\n+#line 3845 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -3852,7 +3864,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3856: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3868: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -3875,22 +3887,22 @@ fi\n      if test \"$gcj_checkSocket\" = 1; then\n \t unset ac_cv_func_connect\n \t echo $ac_n \"checking for main in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:3879: checking for main in -lsocket\" >&5\n+echo \"configure:3891: checking for main in -lsocket\" >&5\n ac_lib_var=`echo socket'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3887 \"configure\"\n+#line 3899 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:3894: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3906: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3917,12 +3929,12 @@ fi\n \t LIBS=\"$LIBS -lsocket -lnsl\"\n \t unset ac_cv_func_accept\n \t echo $ac_n \"checking for accept\"\"... $ac_c\" 1>&6\n-echo \"configure:3921: checking for accept\" >&5\n+echo \"configure:3933: checking for accept\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_accept'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3926 \"configure\"\n+#line 3938 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char accept(); below.  */\n@@ -3945,7 +3957,7 @@ accept();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3949: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3961: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_accept=yes\"\n else\n@@ -3972,12 +3984,12 @@ fi\n      gcj_oldLibs=$LIBS\n      LIBS=\"$LIBS $gcj_cv_lib_sockets\"\n      echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:3976: checking for gethostbyname\" >&5\n+echo \"configure:3988: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3981 \"configure\"\n+#line 3993 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -4000,7 +4012,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4004: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4016: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -4018,22 +4030,22 @@ if eval \"test \\\"`echo '$ac_cv_func_'gethostbyname`\\\" = yes\"; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for main in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:4022: checking for main in -lnsl\" >&5\n+echo \"configure:4034: checking for main in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4030 \"configure\"\n+#line 4042 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4037: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4049: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4069,15 +4081,15 @@ echo \"$ac_t\"\"$gcj_cv_lib_sockets\" 1>&6\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:4073: checking for deflate in -lz\" >&5\n+echo \"configure:4085: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4081 \"configure\"\n+#line 4093 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4088,7 +4100,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:4092: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4104: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4117,22 +4129,22 @@ fi\n    # requires -ldl.\n    if test \"$GC\" = boehm; then\n       echo $ac_n \"checking for main in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:4121: checking for main in -ldl\" >&5\n+echo \"configure:4133: checking for main in -ldl\" >&5\n ac_lib_var=`echo dl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4129 \"configure\"\n+#line 4141 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4136: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4148: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4242,17 +4254,17 @@ for ac_hdr in unistd.h bstring.h sys/time.h sys/types.h fcntl.h sys/ioctl.h sys/\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4246: checking for $ac_hdr\" >&5\n+echo \"configure:4258: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4251 \"configure\"\n+#line 4263 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4256: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4268: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4282,17 +4294,17 @@ for ac_hdr in dirent.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4286: checking for $ac_hdr\" >&5\n+echo \"configure:4298: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4291 \"configure\"\n+#line 4303 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4296: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4308: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4320,16 +4332,16 @@ done\n \n \n echo $ac_n \"checking whether struct sockaddr_in6 is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4324: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n+echo \"configure:4336: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4326 \"configure\"\n+#line 4338 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct sockaddr_in6 addr6;\n ; return 0; }\n EOF\n-if { (eval echo configure:4333: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4345: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_INET6 1\n@@ -4345,16 +4357,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for socklen_t in sys/socket.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4349: checking for socklen_t in sys/socket.h\" >&5\n+echo \"configure:4361: checking for socklen_t in sys/socket.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4351 \"configure\"\n+#line 4363 \"configure\"\n #include \"confdefs.h\"\n #include <sys/socket.h>\n int main() {\n socklen_t x = 5;\n ; return 0; }\n EOF\n-if { (eval echo configure:4358: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4370: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_SOCKLEN_T 1\n@@ -4370,16 +4382,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for tm_gmtoff in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:4374: checking for tm_gmtoff in struct tm\" >&5\n+echo \"configure:4386: checking for tm_gmtoff in struct tm\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4376 \"configure\"\n+#line 4388 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n struct tm tim; tim.tm_gmtoff = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:4383: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4395: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define STRUCT_TM_HAS_GMTOFF 1\n@@ -4392,16 +4404,16 @@ else\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n    echo $ac_n \"checking for global timezone variable\"\"... $ac_c\" 1>&6\n-echo \"configure:4396: checking for global timezone variable\" >&5\n+echo \"configure:4408: checking for global timezone variable\" >&5\n             cat > conftest.$ac_ext <<EOF\n-#line 4398 \"configure\"\n+#line 4410 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n long z2 = timezone;\n ; return 0; }\n EOF\n-if { (eval echo configure:4405: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4417: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_TIMEZONE 1\n@@ -4421,19 +4433,19 @@ rm -f conftest*\n # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4425: checking for working alloca.h\" >&5\n+echo \"configure:4437: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4430 \"configure\"\n+#line 4442 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:4437: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4449: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -4454,12 +4466,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:4458: checking for alloca\" >&5\n+echo \"configure:4470: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4463 \"configure\"\n+#line 4475 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -4487,7 +4499,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:4491: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4503: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -4519,12 +4531,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:4523: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:4535: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4528 \"configure\"\n+#line 4540 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -4549,12 +4561,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4553: checking for $ac_func\" >&5\n+echo \"configure:4565: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4558 \"configure\"\n+#line 4570 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4577,7 +4589,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4581: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4593: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4604,15 +4616,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:4608: checking stack direction for C alloca\" >&5\n+echo \"configure:4620: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4616 \"configure\"\n+#line 4628 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -4631,7 +4643,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:4635: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4647: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -4658,7 +4670,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4662: checking for $ac_word\" >&5\n+echo \"configure:4674: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_PERL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else"}, {"sha": "caff68164b0d4bfdfa2f349495dea26fbeb05628", "filename": "libjava/configure.in", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.in?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -8,9 +8,10 @@ AC_CANONICAL_SYSTEM\n \n dnl We use these options to decide which functions to include.\n AC_ARG_WITH(target-subdir,\n-[  --with-target-subdir=SUBDIR      Configuring in a subdirectory])\n+[  --with-target-subdir=SUBDIR\n+                          configuring in a subdirectory])\n AC_ARG_WITH(cross-host,\n-[  --with-cross-host=HOST           Configuring with a cross compiler])\n+[  --with-cross-host=HOST  configuring with a cross compiler])\n \n LIBGCJ_CONFIGURE(.)\n \n@@ -31,20 +32,20 @@ AM_CONDITIONAL(TESTSUBDIR, test -d $srcdir/testsuite)\n dnl See whether the user prefers size or speed for Character.\n dnl The default is size.\n AC_ARG_ENABLE(fast-character,\n-[  --enable-fast-character          Prefer speed over size for Character],\n+[  --enable-fast-character prefer speed over size for Character],\n # Nothing\n , AC_DEFINE(COMPACT_CHARACTER))\n \n dnl See if the user has requested runtime debugging.\n AC_ARG_ENABLE(libgcj-debug,\n-[  --enable-libgcj-debug           Enable runtime debugging code],\n+[  --enable-libgcj-debug   enable runtime debugging code],\n   if test \"$enable_libgcj_debug\" = yes; then\n      AC_DEFINE(DEBUG)\n   fi)\n \n dnl See if the user has the enterpreter included.\n AC_ARG_ENABLE(interpreter,\n-[  --enable-interpreter            Enable interpreter],\n+[  --enable-interpreter    enable interpreter],\n   if test \"$enable_interpreter\" = yes; then\n      AC_DEFINE(INTERPRETER)\n   fi)\n@@ -59,7 +60,7 @@ dnl FIXME: this should not be a local option but a global target\n dnl system; at present there is no eCos target.\n TARGET_ECOS=\"no\"\n AC_ARG_WITH(ecos,\n-[  --with-ecos      Enable runtime eCos target support.],\n+[  --with-ecos             enable runtime eCos target support],\n TARGET_ECOS=\"$with_ecos\"\n )\n \n@@ -101,7 +102,7 @@ SYSTEMSPEC=\n AC_SUBST(SYSTEMSPEC)\n \n AC_ARG_WITH(system-zlib,\n-[  --with-system-zlib               Use installed libz])\n+[  --with-system-zlib      use installed libz])\n ZLIBSPEC=\n AC_SUBST(ZLIBSPEC)\n \n@@ -112,7 +113,7 @@ dnl Allow the GC to be disabled.  Can be useful when debugging.\n AC_MSG_CHECKING([for garbage collector to use])\n AC_ARG_ENABLE(java-gc,\n changequote(<<,>>)dnl\n-<<  --enable-java-gc=TYPE    choose garbage collector [boehm]>>,\n+<<  --enable-java-gc=TYPE   choose garbage collector [boehm]>>,\n changequote([,])\n   GC=$enableval,\n   GC=boehm)\n@@ -159,7 +160,7 @@ dnl Note that this code is kept in sync with similar code in gcc/configure.in.\n dnl In particular both packages must make the same decision about which\n dnl thread package to use.\n AC_MSG_CHECKING([for threads package to use])\n-AC_ARG_ENABLE(threads, [  --enable-threads=TYPE    choose threading package],\n+AC_ARG_ENABLE(threads, [  --enable-threads=TYPE   choose threading package],\n   THREADS=$enableval,\n   dnl FIXME: figure out native threads to use here.\n   THREADS=no)"}, {"sha": "46f2a66d34529f06b6801e66070c3d41b34ef0a5", "filename": "libjava/defineclass.cc", "status": "modified", "additions": 27, "deletions": 29, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fdefineclass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fdefineclass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fdefineclass.cc?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -614,7 +614,8 @@ void _Jv_ClassReader::handleConstantPool ()\n \n   // the pool is scanned explicitly by the collector\n   jbyte *pool_tags = (jbyte*) _Jv_AllocBytesChecked (pool_count);\n-  void **pool_data = (void**) _Jv_AllocBytesChecked (pool_count * sizeof (void*));\n+  _Jv_word *pool_data\n+    = (_Jv_word*) _Jv_AllocBytesChecked (pool_count * sizeof (_Jv_word));\n   \n   def->constants.tags = pool_tags;\n   def->constants.data = pool_data;\n@@ -634,7 +635,7 @@ void _Jv_ClassReader::handleConstantPool ()\n \t  check_tag (utf_index, JV_CONSTANT_Utf8);\n \t  unsigned char *utf_data = bytes + offsets[utf_index];\n \t  int len = get2u (utf_data);\n-\t  pool_data[i] = (void*)_Jv_makeUtf8Const ((char*)(utf_data+2), len);\n+\t  pool_data[i].utf8 = _Jv_makeUtf8Const ((char*)(utf_data+2), len);\n \t  pool_tags[i] = JV_CONSTANT_String;\n \t}\n       else\n@@ -671,7 +672,7 @@ _Jv_ClassReader::prepare_pool_entry (int index, unsigned char this_tag)\n      structure we are currently defining */\n \n   unsigned char *pool_tags = (unsigned char*) def->constants.tags;\n-  void         **pool_data = (void**) def->constants.data;\n+  _Jv_word      *pool_data = def->constants.data;\n \n   /* this entry was already prepared */\n   if (pool_tags[index] == this_tag)\n@@ -703,7 +704,7 @@ _Jv_ClassReader::prepare_pool_entry (int index, unsigned char this_tag)\n \t      buffer[i] = (char) s[i];\n \t  }\n \t\n-\tpool_data[index] = (void*)_Jv_makeUtf8Const (buffer, len);\n+\tpool_data[index].utf8 = _Jv_makeUtf8Const (buffer, len);\n \tpool_tags[index] = JV_CONSTANT_Utf8;\n       }\n       break;\n@@ -715,9 +716,9 @@ _Jv_ClassReader::prepare_pool_entry (int index, unsigned char this_tag)\n \tprepare_pool_entry (utf_index, JV_CONSTANT_Utf8);\n \n \tif (verify)\n-\t  _Jv_VerifyClassName ((_Jv_Utf8Const*)pool_data[utf_index]);\n+\t  _Jv_VerifyClassName (pool_data[utf_index].utf8);\n \t\t\n-\tpool_data[index] = pool_data[utf_index];\n+\tpool_data[index].utf8 = pool_data[utf_index].utf8;\n \tpool_tags[index] = JV_CONSTANT_Class;\n       }\n       break;\n@@ -743,24 +744,22 @@ _Jv_ClassReader::prepare_pool_entry (int index, unsigned char this_tag)\n \tif (verify)\n \t{\n \t  _Jv_ushort name_index, type_index;\n-\t  _Jv_loadIndexes ((const void**)&pool_data[nat_index],\n+\t  _Jv_loadIndexes (&pool_data[nat_index],\n \t\t\t   name_index, type_index);\n \n \t  if (this_tag == JV_CONSTANT_Fieldref)\n-\t    _Jv_VerifyFieldSignature\n-\t      ((_Jv_Utf8Const*)pool_data[type_index]);\n+\t    _Jv_VerifyFieldSignature (pool_data[type_index].utf8);\n \t  else\n-\t    _Jv_VerifyMethodSignature\n-\t      ((_Jv_Utf8Const*)pool_data[type_index]);\n+\t    _Jv_VerifyMethodSignature (pool_data[type_index].utf8);\n \n-\t  _Jv_Utf8Const* name = (_Jv_Utf8Const*)pool_data[name_index];\n+\t  _Jv_Utf8Const* name = pool_data[name_index].utf8;\n \n \t  if (this_tag != JV_CONSTANT_Fieldref\n \t      && (   _Jv_equalUtf8Consts (name, clinit_name)\n \t\t  || _Jv_equalUtf8Consts (name, init_name)))\n \t    /* ignore */;\n \t  else\n-\t    _Jv_VerifyIdentifier ((_Jv_Utf8Const*)pool_data[name_index]);\n+\t    _Jv_VerifyIdentifier (pool_data[name_index].utf8);\n \t}\n \t    \n \t_Jv_storeIndexes (&pool_data[index], class_index, nat_index);\n@@ -827,10 +826,10 @@ _Jv_ClassReader::handleClassBegin\n   (int access_flags, int this_class, int super_class)\n {\n   unsigned char *pool_tags = (unsigned char*) def->constants.tags;\n-  void         **pool_data = (void**) def->constants.data;\n+  _Jv_word      *pool_data = def->constants.data;\n \n   check_tag (this_class, JV_CONSTANT_Class);\n-  _Jv_Utf8Const *loadedName = (_Jv_Utf8Const*)pool_data[this_class];\n+  _Jv_Utf8Const *loadedName = pool_data[this_class].utf8;\n \n   // was ClassLoader.defineClass called with an expected class name?\n   if (def->name == 0)\n@@ -865,7 +864,7 @@ _Jv_ClassReader::handleClassBegin\n     }\n \n   def->accflags = access_flags;\n-  pool_data[this_class] = (void*)def;\n+  pool_data[this_class].clazz = def;\n   pool_tags[this_class] = JV_CONSTANT_ResolvedClass;\n \n   if (super_class == 0)\n@@ -894,8 +893,7 @@ _Jv_ClassReader::handleClassBegin\n     {\n       // load the super class\n       check_tag (super_class, JV_CONSTANT_Class);\n-      _Jv_Utf8Const* super_name =\n-\t(_Jv_Utf8Const*)pool_data[super_class]; \n+      _Jv_Utf8Const* super_name = pool_data[super_class].utf8; \n \n       // load the super class using our defining loader\n       jclass the_super = _Jv_FindClass (super_name,\n@@ -906,7 +904,7 @@ _Jv_ClassReader::handleClassBegin\n       checkExtends (def, the_super);\n \n       def->superclass = the_super;\n-      pool_data[super_class] = (void*) the_super;\n+      pool_data[super_class].clazz = the_super;\n       pool_tags[super_class] = JV_CONSTANT_ResolvedClass;\n     }\n \t    \n@@ -956,19 +954,19 @@ void _Jv_ClassReader::handleInterfacesBegin (int count)\n \n void _Jv_ClassReader::handleInterface (int if_number, int offset)\n {\n-  void          ** pool_data = def->constants.data;\n+  _Jv_word       * pool_data = def->constants.data;\n   unsigned char  * pool_tags = (unsigned char*) def->constants.tags;\n \n   jclass the_interface;\n \n   if (pool_tags[offset] == JV_CONSTANT_Class)\n     {\n-      _Jv_Utf8Const* name = (_Jv_Utf8Const*) pool_data[offset];\n+      _Jv_Utf8Const* name = pool_data[offset].utf8;\n       the_interface =  _Jv_FindClass (name, def->loader);\n     }\n   else if (pool_tags[offset] == JV_CONSTANT_ResolvedClass)\n     {\n-      the_interface = (jclass)pool_data[offset];\n+      the_interface = pool_data[offset].clazz;\n     }\n   else\n     {\n@@ -979,7 +977,7 @@ void _Jv_ClassReader::handleInterface (int if_number, int offset)\n   // allowed to implement that interface.\n   checkImplements (def, the_interface);\n   \n-  pool_data[offset] = (void*)the_interface;\n+  pool_data[offset].clazz = the_interface;\n   pool_tags[offset] = JV_CONSTANT_ResolvedClass;\n   \n   def->interfaces[if_number] = the_interface;\n@@ -1028,10 +1026,10 @@ void _Jv_ClassReader::handleField (int field_no,\n \t\t\t\t   int name,\n \t\t\t\t   int desc)\n {\n-  void **const pool_data = def->constants.data;\n+  _Jv_word *pool_data = def->constants.data;\n \n   _Jv_Field *field = &def->fields[field_no];\n-  _Jv_Utf8Const *field_name = (_Jv_Utf8Const*) pool_data[name];\n+  _Jv_Utf8Const *field_name = pool_data[name].utf8;\n \n #ifndef COMPACT_FIELDS\n   field->name      = field_name;\n@@ -1056,7 +1054,7 @@ void _Jv_ClassReader::handleField (int field_no,\n \tthrow_class_format_error (\"erroneous field access flags\");\n     }\n \n-  _Jv_Utf8Const* sig = (_Jv_Utf8Const*) pool_data[desc];\n+  _Jv_Utf8Const* sig = pool_data[desc].utf8;\n \n   if (verify)\n     _Jv_VerifyFieldSignature (sig);\n@@ -1158,16 +1156,16 @@ void _Jv_ClassReader::handleMethodsBegin (int count)\n void _Jv_ClassReader::handleMethod \n     (int mth_index, int accflags, int name, int desc)\n { \n-  void **const pool_data = def->constants.data;\n+  _Jv_word *pool_data = def->constants.data;\n   _Jv_Method *method = &def->methods[mth_index];\n \n   check_tag (name, JV_CONSTANT_Utf8);\n   prepare_pool_entry (name, JV_CONSTANT_Utf8);\n-  method->name = (_Jv_Utf8Const*)pool_data[name];\n+  method->name = pool_data[name].utf8;\n \n   check_tag (desc, JV_CONSTANT_Utf8);\n   prepare_pool_entry (desc, JV_CONSTANT_Utf8);\n-  method->signature = (_Jv_Utf8Const*)pool_data[desc];\n+  method->signature = pool_data[desc].utf8;\n \n   // ignore unknown flags\n   method->accflags = accflags & ALL_FLAGS;"}, {"sha": "b5e3ab36db7bbf486608d910c54ecb9e1ef9964b", "filename": "libjava/include/java-cpool.h", "status": "modified", "additions": 36, "deletions": 92, "changes": 128, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finclude%2Fjava-cpool.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finclude%2Fjava-cpool.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjava-cpool.h?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -31,142 +31,86 @@ details.  */\n #define JV_CONSTANT_ResolvedString (16L | 8L)\n #define JV_CONSTANT_ResolvedClass  (16L | 7L)\n \n-/* We use the following two operations uniformly for all put/get operations\n- * in the runtime system (constant pool & stack), to assure that we keep\n- * everything in the same format.  The idea is, that these should be inlined\n- * away, into just a simple store (for small data types, and a pair of stores\n- * if double or long has alignment greater than void *.  On an 64-bit\n- * architecture, all operations should be simple stores; on a 32-bit\n- * architecture it depends on the alignment requirement for the specific\n- * type.  */\n-\n-template <class T>\n-static inline void _Jv_put (void *dst, T value)\n-{\n-#if 0\n-  if (sizeof (T) == 8 && __alignof__ (T) > __alignof__ (void*))\n-    {\n-      jint *v_dst  = (jint*)(dst);\n-      jint *v_src  = (jint*)&value;\n-\n-      v_dst[0] = v_src[0];\n-      v_dst[1] = v_src[1];\n-    }\n-  else \n-#endif\n-    {\n-      *((T*) (dst)) = value;\n-    }\n-}\n-\n-template <class T>\n-static inline T _Jv_get (void *src)\n-{\n-#if 0\n-  if (sizeof (T) == 8 && __alignof__ (T) > __alignof__ (void*))\n-    {\n-      T     value;\n-      jint *v_dst  = (jint*)&value;\n-      jint *v_src  = (jint*)src;\n-\n-      v_dst[0] = v_src[0];\n-      v_dst[1] = v_src[1];\n-\n-      return value;\n-    }\n-  else \n-#endif\n-    {\n-      return *((T*) (src));\n-    }\n-}\n-\n-/** needed to keep the CONSTANT_XXXRef & CONSTANT_NameAndType entries */\n extern inline void \n-_Jv_storeIndexes (void **data,\n+_Jv_storeIndexes (_Jv_word *data,\n \t\t _Jv_ushort index0,\n \t\t _Jv_ushort index1)\n {\n-  // accomodate 64bit machines...\n-  if (sizeof (void*) == (2 * sizeof (jint)))\n-    {\n-      ((jint*)data)[0] = index0;\n-      ((jint*)data)[1] = index0;\n-    }\n-  else\n-    {\n-      _Jv_put<jint>(data, ((jint)index0 << 16) | (jint)index1);\n-    }\n+  data->i = (((jint)index0) << 16) | (jint) index1;\n }\n \n extern inline void \n-_Jv_loadIndexes (const void **data,\n+_Jv_loadIndexes (const _Jv_word *data,\n \t\t _Jv_ushort& index0,\n \t\t _Jv_ushort& index1)\n {\n-  if (sizeof (void*) == (2*sizeof (jint)))\n-    {\n-      index0 = ((jint*)data)[0];\n-      index0 = ((jint*)data)[1];\n-    }\n-  else\n-    {\n-      jint udata = _Jv_get<jint>(data);\n+  jint udata = data->i;\n       \n-      _Jv_uint uindex0 = ((udata >> 16) & 0xffff);\n-      _Jv_uint uindex1 = udata & 0xffff;\n+  _Jv_uint uindex0 = ((udata >> 16) & 0xffff);\n+  _Jv_uint uindex1 = udata & 0xffff;\n       \n-      index0 = uindex0;\n-      index1 = uindex1;\n-    }\n+  index0 = uindex0;\n+  index1 = uindex1;\n }\n \n extern inline void\n-_Jv_storeFloat (void **data, jfloat f)\n+_Jv_storeFloat (_Jv_word *data, jfloat f)\n {\n-  _Jv_put<jfloat>(data, f);\n+  data->f = f;\n }\n \n extern inline jfloat\n-_Jv_loadFloat (void **data)\n+_Jv_loadFloat (_Jv_word *data)\n {\n-  return _Jv_get<jfloat>(data);\n+  return data->f;\n }\n \n extern inline void\n-_Jv_storeInt (void **data, jint i)\n+_Jv_storeInt (_Jv_word *data, jint i)\n {\n-  _Jv_put<jint>(data, i);\n+  data->i = i;\n }\n \n extern inline jint\n-_Jv_loadInt (void **data)\n+_Jv_loadInt (_Jv_word *data)\n {\n-  return _Jv_get<jint>(data);\n+  return data->i;\n }\n \n extern inline void\n-_Jv_storeLong (void **data, jlong l)\n+_Jv_storeLong (_Jv_word *data, jlong l)\n {\n-  return _Jv_put<jlong>(data, l);\n+  _Jv_word2 tmp;\n+  tmp.l = l;\n+  data[0].ia[0] = tmp.ia[0];\n+  data[1].ia[0] = tmp.ia[1];\n }\n \n extern inline jlong\n-_Jv_loadLong (void **data)\n+_Jv_loadLong (_Jv_word *data)\n {\n-  return _Jv_get<jlong>(data);\n+  _Jv_word2 tmp;\n+  tmp.ia[0] = data[0].ia[0];\n+  tmp.ia[1] = data[1].ia[0];\n+  return tmp.l;\n }\n \n extern inline void\n-_Jv_storeDouble (void **data, jdouble d)\n+_Jv_storeDouble (_Jv_word *data, jdouble d)\n {\n-  _Jv_put<jdouble>(data, d);\n+  _Jv_word2 tmp;\n+  tmp.d = d;\n+  data[0].ia[0] = tmp.ia[0];\n+  data[1].ia[0] = tmp.ia[1];\n }\n \n extern inline jdouble\n-_Jv_loadDouble (void **data)\n+_Jv_loadDouble (_Jv_word *data)\n {\n-  return _Jv_get<jdouble> (data);\n+  _Jv_word2 tmp;\n+  tmp.ia[0] = data[0].ia[0];\n+  tmp.ia[1] = data[1].ia[0];\n+  return tmp.d;\n }\n \n "}, {"sha": "ffd53a868ab09c13db75101ae1be7cd3a951d10f", "filename": "libjava/include/java-interp.h", "status": "modified", "additions": 8, "deletions": 13, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finclude%2Fjava-interp.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finclude%2Fjava-interp.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjava-interp.h?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -105,11 +105,11 @@ class _Jv_InterpMethod {\n   void *ncode ();\n   void continue1 (_Jv_InterpMethodInvocation *inv);\n \n-  static void run_normal (ffi_cif*, void*, void**, void*);\n-  static void run_synch_object (ffi_cif*, void*, void**, void*);\n-  static void run_synch_class (ffi_cif*, void*, void**, void*);\n+  static void run_normal (ffi_cif*, void*, ffi_raw*, void*);\n+  static void run_synch_object (ffi_cif*, void*, ffi_raw*, void*);\n+  static void run_synch_class (ffi_cif*, void*, ffi_raw*, void*);\n \n-  inline jobject run (ffi_cif*, void*, void**, \n+  inline jobject run (ffi_cif*, void*, ffi_raw*, \n \t\t      _Jv_InterpMethodInvocation*);\n \n   bool find_exception (jobject ex,\n@@ -123,21 +123,16 @@ class _Jv_InterpMethod {\n   friend class gnu::gcj::runtime::MethodInvocation;\n \n   friend void _Jv_PrepareClass(jclass);\n-\n-  friend void _Jv_callInterpretedMethod (ffi_cif*,\n-\t\t\t\t\t void*,\n-\t\t\t\t\t void **,\n-\t\t\t\t\t void*);\n };\n \n class _Jv_InterpMethodInvocation {\n   _Jv_InterpMethod *running;\n-  void            **sp;\n+  _Jv_word         *sp;\n   unsigned char    *pc;\n-  void*             state[0];\n+  _Jv_word          state[0];\n \n-  void**            stack_base () { return &state[0]; }\n-  void**            local_base () { return &state[running->max_stack]; }\n+  _Jv_word*         stack_base () { return &state[0]; }\n+  _Jv_word*         local_base () { return &state[running->max_stack]; }\n \n   friend class _Jv_InterpMethod;\n };"}, {"sha": "ef87519d9c511fe86538b6a89d2e59fa2dd1d531", "filename": "libjava/include/javaprims.h", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finclude%2Fjavaprims.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finclude%2Fjavaprims.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjavaprims.h?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -261,6 +261,27 @@ extern \"C\" void _Jv_Free (void*);\n typedef unsigned short _Jv_ushort __attribute__((__mode__(__HI__)));\n typedef unsigned int _Jv_uint __attribute__((__mode__(__SI__)));\n \n+typedef union {\n+  jobject o;\n+  jint i;\t\t\t// Also stores smaller integral types.\n+  jfloat f;\n+  jint ia[1];\t\t\t// Half of _Jv_word2.\n+  void* p;\n+\n+  // these are things we will store in the constant \n+  jclass                     clazz;\n+  jstring                    string;\n+  struct _Jv_Field          *field;\n+  struct _Jv_Utf8Const      *utf8;\n+  struct _Jv_ResolvedMethod *rmethod;\n+} _Jv_word;\n+\n+typedef union {\n+  jint ia[2];\n+  jlong l;\n+  jdouble d;\n+} _Jv_word2;                              \n+\n struct _Jv_Utf8Const\n {\n   _Jv_ushort hash;"}, {"sha": "6ca6f0da606a5963b3406b69d780260615b22762", "filename": "libjava/interpret.cc", "status": "modified", "additions": 84, "deletions": 85, "changes": 169, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finterpret.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Finterpret.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finterpret.cc?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -47,7 +47,7 @@ details.  */\n \n #include <gnu/gcj/runtime/MethodInvocation.h>\n \n-/* this is the exception handler hack, for the interpreter */\n+/* This should never happen. */\n void \n gnu::gcj::runtime::MethodInvocation::continue1 (gnu::gcj::RawData *,\n \t\t\t\t\t\tgnu::gcj::RawData *)\n@@ -89,7 +89,7 @@ static void throw_arithmetic_exception ()\n #endif\n \n \n-static inline void dupx (void **&sp, int n, int x)\n+static inline void dupx (_Jv_word *&sp, int n, int x)\n {\n   // first \"slide\" n+x elements n to the right\n   int top = n-1;\n@@ -110,36 +110,43 @@ static inline void dupx (void **&sp, int n, int x)\n \n \n #define PUSHA(V)  \\\n- ({ jobject __v=(V); *(jobject*)sp++ = __v; })\n+ ({ jobject __v=(V); (sp++)->o = __v; })\n #define PUSHI(V)  \\\n- ({ jint __v=(V); *(jint*)sp++ = __v; })\n+ ({ jint __v=(V); (sp++)->i = __v; })\n #define PUSHF(V)  \\\n- ({ jfloat __v=(V); *(jfloat*)sp++ = __v; })\n+ ({ jfloat __v=(V); (sp++)->f = __v; })\n #define PUSHL(V)  \\\n- ({ jlong __v=(V); memcpy ((void*)sp, (void*)&__v, 8); sp+=2; })\n+ ({ jlong __v=(V); _Jv_storeLong(sp,__v); sp+=2; })\n #define PUSHD(V)  \\\n- ({ jdouble __v=(V); memcpy ((void*)sp, (void*)&__v, 8); sp+=2; })\n-\n-#define POPA()    (*(jobject*)--sp)\n-#define POPI()    (*(jint*)--sp)\n-#define POPF()    (*(jfloat*)--sp)\n-#define POPL()    ({ jlong __r; sp-=2; memcpy ((void*)&__r, sp, 8); __r; })\n-#define POPD()    ({ jdouble __r; sp-=2; memcpy ((void*)&__r, sp, 8); __r; })\n-\n-#define LOADA(I)  *sp++ = locals[I]\n-#define LOADI(I)  *sp++ = locals[I]\n-#define LOADF(I)  *sp++ = locals[I]\n-#define LOADL(I)  ({ memcpy (sp, locals+(I), 8); sp+=2; })\n-#define LOADD(I)  ({ memcpy (sp, locals+(I), 8); sp+=2; })\n-\n-#define STOREA(I) locals[I] = *--sp\n-#define STOREI(I) locals[I] = *--sp\n-#define STOREF(I) locals[I] = *--sp\n-#define STOREL(I) ({ sp-=2; memcpy (locals+(I), sp, 8); })\n-#define STORED(I) ({ sp-=2; memcpy (locals+(I), sp, 8); })\n-\n-#define PEEKI(I)  (*(jint*) (locals+(I)))\n-#define PEEKA(I)  (*(jobject*) (locals+(I)))\n+ ({ jdouble __v=(V); _Jv_storeDouble(sp,__v); sp+=2; })\n+\n+#define POPA()    ((--sp)->o)\n+#define POPI()    ((jint) (--sp)->i) // cast since it may be promoted\n+#define POPF()    ((jfloat) (--sp)->f)\n+#define POPL()    ({ sp-=2; _Jv_loadLong (sp); })\n+#define POPD()    ({ sp-=2; _Jv_loadDouble (sp); })\n+\n+#define LOADA(I)  (sp++)->o = locals[I].o\n+#define LOADI(I)  (sp++)->i = locals[I].i\n+#define LOADF(I)  (sp++)->f = locals[I].f\n+#define LOADL(I)  ({ jint __idx = (I); \\\n+    (sp++)->ia[0] = locals[__idx].ia[0]; \\\n+    (sp++)->ia[0] = locals[__idx+1].ia[0]; \\\n+ })\n+#define LOADD(I)  LOADL(I)\n+\n+\n+#define STOREA(I) locals[I].o = (--sp)->o\n+#define STOREI(I) locals[I].i = (--sp)->i\n+#define STOREF(I) locals[I].f = (--sp)->f\n+#define STOREL(I) ({ jint __idx = (I); \\\n+    locals[__idx+1].ia[0] = (--sp)->ia[0]; \\\n+    locals[__idx].ia[0] = (--sp)->ia[0]; \\\n+ })\n+#define STORED(I) STOREL(I)\n+\n+#define PEEKI(I)  (locals+(I))->i\n+#define PEEKA(I)  (locals+(I))->o\n \n #define POKEI(I,V)  (*(jint*) (locals+(I)) = (V))\n \n@@ -215,16 +222,16 @@ static jint get4(unsigned char* loc) {\n inline jobject\n _Jv_InterpMethod::run (ffi_cif* cif,\n \t\t       void *retp,\n-\t\t       void**args,\n+\t\t       ffi_raw *args,\n \t\t       _Jv_InterpMethodInvocation *inv)\n {\n   inv->running  = this;\n   inv->pc       = bytecode ();\n   inv->sp       = inv->stack_base ();\n-  void **locals = inv->local_base ();\n+  _Jv_word *locals = inv->local_base ();\n \n   /* Go straight at it!  the ffi raw format matches the internal\n-     stack representation exactly!\n+     stack representation exactly.  At leat, that's the idea.\n   */\n   memcpy ((void*) locals, (void*) args, args_raw_size);\n \n@@ -237,7 +244,7 @@ _Jv_InterpMethod::run (ffi_cif* cif,\n   if (ex == 0)\t\t\t// no exception...\n     {\n       /* define sp locally, so the POP? macros will pick it up */\n-      void **sp = (void**)inv->sp;\n+      _Jv_word *sp = inv->sp;\n       int rtype = cif->rtype->type;\n \n       if (rtype == FFI_TYPE_POINTER)\n@@ -320,17 +327,16 @@ bool _Jv_InterpMethod::find_exception (jobject ex,\n \t  jclass handler;\n \n \t  if (exc[i].handler_type != 0)\n-\t    handler = (jclass)\n-\t      _Jv_ResolvePoolEntry (defining_class, \n-\t\t\t\t    exc[i].handler_type);\n+\t    handler = (_Jv_ResolvePoolEntry (defining_class, \n+\t\t\t\t\t     exc[i].handler_type)).clazz;\n \t  else\n \t    handler = NULL;\n \t  \n \t  if (handler==NULL || handler->isAssignableFrom (exc_class))\n \t    {\n \t      inv->pc = bytecode () + exc[i].handler_pc;\n \t      inv->sp = inv->stack_base (); // reset stack\n-\t      *(jobject*) (inv->sp ++) = ex;\n+\t      (inv->sp++)->o = ex; // push exception\n \t      return true;\n \t    }\n \t}\n@@ -340,7 +346,7 @@ bool _Jv_InterpMethod::find_exception (jobject ex,\n \n void _Jv_InterpMethod::run_normal (ffi_cif* cif,\n \t\t\t\t   void* ret,\n-\t\t\t\t   void** args,\n+\t\t\t\t   ffi_raw * args,\n \t\t\t\t   void* __this)\n {\n   _Jv_InterpMethod* _this = (_Jv_InterpMethod*)__this;\n@@ -350,24 +356,24 @@ void _Jv_InterpMethod::run_normal (ffi_cif* cif,\n   int storage_size = _this->max_stack+_this->max_locals;\n   _Jv_InterpMethodInvocation* inv = (_Jv_InterpMethodInvocation*) \n     alloca (sizeof (_Jv_InterpMethodInvocation)\n-\t    + storage_size * sizeof (void*));\n+\t    + storage_size * sizeof (_Jv_word));\n \n   jobject ex = _this->run (cif, ret, args, inv);\n   if (ex != 0) _Jv_Throw (ex);\n }\n \n void _Jv_InterpMethod::run_synch_object (ffi_cif* cif,\n \t\t\t\t\t void* ret,\n-\t\t\t\t\t void** args,\n+\t\t\t\t\t ffi_raw * args,\n \t\t\t\t\t void* __this)\n {\n   _Jv_InterpMethod* _this = (_Jv_InterpMethod*)__this;\n-  jobject rcv = (jobject)args[0];\n+  jobject rcv = (jobject)args[0].ptr;\n \n   int storage_size = _this->max_stack+_this->max_locals;\n   _Jv_InterpMethodInvocation* inv = (_Jv_InterpMethodInvocation*) \n     alloca (sizeof (_Jv_InterpMethodInvocation)\n-\t    + storage_size * sizeof (void*));\n+\t    + storage_size * sizeof (_Jv_word));\n \n   _Jv_MonitorEnter (rcv);\n   jobject ex = _this->run (cif, ret, args, inv);\n@@ -378,7 +384,7 @@ void _Jv_InterpMethod::run_synch_object (ffi_cif* cif,\n \n void _Jv_InterpMethod::run_synch_class (ffi_cif* cif,\n \t\t\t\t\tvoid* ret,\n-\t\t\t\t\tvoid** args,\n+\t\t\t\t\tffi_raw * args,\n \t\t\t\t\tvoid* __this)\n {\n   _Jv_InterpMethod* _this = (_Jv_InterpMethod*)__this;\n@@ -387,7 +393,7 @@ void _Jv_InterpMethod::run_synch_class (ffi_cif* cif,\n   int storage_size = _this->max_stack+_this->max_locals;\n   _Jv_InterpMethodInvocation* inv = (_Jv_InterpMethodInvocation*) \n     alloca (sizeof (_Jv_InterpMethodInvocation)\n-\t    + storage_size * sizeof (void*));\n+\t    + storage_size * sizeof (_Jv_word));\n \n   _Jv_MonitorEnter (sync);\n   jobject ex = _this->run (cif, ret, args, inv);\n@@ -461,13 +467,13 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n    * gcc, why isn't there a -fpack-stack, allowing reuse of stack\n    * locations?  */\n   \n-  void**         sp     = inv->sp;\n+  _Jv_word      *sp     = inv->sp;\n   unsigned char *pc     = inv->pc;\n-  void**         locals = inv->local_base ();\n+  _Jv_word      *locals = inv->local_base ();\n   int            opcode;\n \n   jclass defining_class = this->defining_class;\n-  void **pool_data      = defining_class->constants.data;\n+  _Jv_word *pool_data   = defining_class->constants.data;\n   \n   /* these two are used in the invokeXXX instructions */\n   void (*fun)(...);\n@@ -581,8 +587,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \t * JV_CONSTANT_ResolvedFlag in the tag directly.  For now, I\n \t * don't think it is worth it.  */\n \n-\trmeth = (_Jv_ResolvedMethod*)\n-\t  _Jv_ResolvePoolEntry (defining_class, index);\n+\trmeth = (_Jv_ResolvePoolEntry (defining_class, index)).rmethod;\n \n \tsp -= rmeth->stack_item_count;\n \tNULLCHECK(sp[0]);\n@@ -595,7 +600,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \t  }\n \telse\n \t  {\n-\t    jobject rcv = (jobject)sp[0];\n+\t    jobject rcv = sp[0].o;\n \t    _Jv_VTable *table = *(_Jv_VTable**)rcv;\n \t    fun = (void (*) (...))table->method[rmeth->vtable_index];\n \t  }\n@@ -606,12 +611,12 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \t/* here goes the magic again... */\n \tffi_cif *cif = &rmeth->cif;\n-\tvoid **raw = sp;\n+\tffi_raw *raw = (ffi_raw*) sp;\n \n \tjdouble rvalue;\n \n \tTIME_SUSPEND;\n-\tffi_raw_call (cif, fun, (void*)&rvalue, (ffi_raw*) raw);\n+\tffi_raw_call (cif, fun, (void*)&rvalue, raw);\n \tTIME_RESUME;\n \n \tint rtype = cif->rtype->type;\n@@ -717,21 +722,21 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n     case op_ldc:\n       {\n \tint index = get1u (pc++);\n-\tPUSHA((jobject) pool_data[index]);\n+\tPUSHA(pool_data[index].o);\n       }\n       goto next_insn;\n \n     case op_ldc_w:\n       {\n \tint index = get2u (pc); pc += 2;\n-\tPUSHA((jobject) pool_data[index]);\n+\tPUSHA(pool_data[index].o);\n       }\n       goto next_insn;\n \n     case op_ldc2_w:\n       {\n \tint index = get2u (pc); pc += 2;\n-\tmemcpy (sp, &pool_data[index], 8);\n+\tmemcpy (sp, &pool_data[index], 2*sizeof (_Jv_word));\n \tsp += 2;\n       }\n       goto next_insn;\n@@ -1715,7 +1720,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \tunsigned char *base_pc = pc-1;\n \tjint fieldref_index = get2u (pc); pc += 2;\n \t_Jv_ResolvePoolEntry (defining_class, fieldref_index);\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \n \tif ((field->flags & STATIC) == 0)\n \t  throw_incompatible_class_change_error \n@@ -1761,7 +1766,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \tunsigned char *base_pc = pc-1;\n \tjint fieldref_index = get2u (pc); pc += 2;\n \t_Jv_ResolvePoolEntry (defining_class, fieldref_index);\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \n \tif ((field->flags & STATIC) != 0)\n \t  throw_incompatible_class_change_error \n@@ -1813,7 +1818,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \tunsigned char* base_pc = pc-1;\n \tjint fieldref_index = get2u (pc); pc += 2;\n \t_Jv_ResolvePoolEntry (defining_class, fieldref_index);\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \n \tjclass type = field->type;\n \n@@ -1862,7 +1867,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \tunsigned char* base_pc = pc-1;\n \tjint fieldref_index = get2u (pc); pc += 2;\n \t_Jv_ResolvePoolEntry (defining_class, fieldref_index);\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \n \tjclass type = field->type;\n \n@@ -1947,47 +1952,47 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n     case op_getstatic_1:\n       {\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \tPUSHI (*(jbyte*) (field->u.addr));\n       }\n       goto next_insn;\n \n     case op_getstatic_2s:\n       {\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \tPUSHI(*(jshort*) (field->u.addr));\n       }\n       goto next_insn;\n \n     case op_getstatic_2u:\n       {\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \tPUSHI(*(jchar*) (field->u.addr));\n       }\n       goto next_insn;\n \n     case op_getstatic_4:\n       {\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \tPUSHI(*(jint*) (field->u.addr));\n       }\n       goto next_insn;\n \n     case op_getstatic_8:\n       {\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \tPUSHL(*(jlong*) (field->u.addr));\n       }\n       goto next_insn;\n \n     case op_getstatic_a:\n       {\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \tPUSHA(*(jobject*) (field->u.addr));\n       }\n       goto next_insn;\n@@ -2046,7 +2051,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tjint    value = POPI();\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \t*(jbyte*) (field->u.addr) = value;\n       }\n       goto next_insn;\n@@ -2055,7 +2060,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tjint    value = POPI();\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \t*(jchar*) (field->u.addr) = value;\n       }\n       goto next_insn;\n@@ -2064,7 +2069,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tjint    value = POPI();\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \t*(jint*) (field->u.addr) = value;\n       }\n       goto next_insn;\n@@ -2073,7 +2078,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tjlong    value = POPL();\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \t*(jlong*) (field->u.addr) = value;\n       }\n       goto next_insn;\n@@ -2082,7 +2087,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tjobject value = POPA();\n \tjint fieldref_index = get2u (pc); pc += 2;\n-\t_Jv_Field *field = (_Jv_Field*) pool_data[fieldref_index];\n+\t_Jv_Field *field = pool_data[fieldref_index].field;\n \t*(jobject*) (field->u.addr) = value;\n       }\n       goto next_insn;\n@@ -2091,8 +2096,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tint index = get2u (pc); pc += 2;\n \n-\trmeth = (_Jv_ResolvedMethod*)\n-\t  _Jv_ResolvePoolEntry (defining_class, index);\n+\trmeth = (_Jv_ResolvePoolEntry (defining_class, index)).rmethod;\n \n \tsp -= rmeth->stack_item_count;\n \t\n@@ -2106,8 +2110,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tint index = get2u (pc); pc += 2;\n \n-\trmeth = (_Jv_ResolvedMethod*)\n-\t  _Jv_ResolvePoolEntry (defining_class, index);\n+\trmeth = (_Jv_ResolvePoolEntry (defining_class, index)).rmethod;\n \n \tsp -= rmeth->stack_item_count;\n \t\n@@ -2123,13 +2126,12 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \t// invokeinterface has two unused bytes...\n \tpc += 2;\n \n-\trmeth = (_Jv_ResolvedMethod*)\n-\t    _Jv_ResolvePoolEntry (defining_class, index);\n+\trmeth = (_Jv_ResolvePoolEntry (defining_class, index)).rmethod;\n \n \tsp -= rmeth->stack_item_count;\n \tNULLCHECK(sp[0]);\n \t\n-\tjobject rcv = (jobject)sp[0];\n+\tjobject rcv = sp[0].o;\n \n \tfun = (void (*) (...))\n \t  _Jv_LookupInterfaceMethod (rcv->getClass (),\n@@ -2142,8 +2144,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n     case op_new:\n       {\n \tint index = get2u (pc); pc += 2;\n-\tjclass klass = (jclass) _Jv_ResolvePoolEntry (defining_class,\n-\t\t\t\t\t\t      index);\n+\tjclass klass = (_Jv_ResolvePoolEntry (defining_class, index)).clazz;\n \t_Jv_InitClass (klass);\n \tjobject res = _Jv_AllocObject (klass, klass->size_in_bytes);\n \tPUSHA (res);\n@@ -2162,7 +2163,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n     case op_anewarray:\n       {\n \tint index = get2u (pc); pc += 2;\n-\tjclass klass = (jclass) _Jv_ResolvePoolEntry (defining_class, index);\n+\tjclass klass = (_Jv_ResolvePoolEntry (defining_class, index)).clazz;\n \tint size  = POPI();\n \t_Jv_InitClass (klass);\n \tjobject result = _Jv_NewObjectArray (size, klass, 0);\n@@ -2189,8 +2190,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tjobject value = POPA();\n \tjint index = get2u (pc); pc += 2;\n-\tjclass to = (jclass)_Jv_ResolvePoolEntry (defining_class,\n-\t\t\t\t\t\t  index);\n+\tjclass to = (_Jv_ResolvePoolEntry (defining_class, index)).clazz;\n \n \tif (value != NULL && ! to->isInstance (value))\n \t  {\n@@ -2207,8 +2207,7 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n       {\n \tjobject value = POPA();\n \tjint index = get2u (pc); pc += 2;\n-\tjclass to = (jclass)_Jv_ResolvePoolEntry (defining_class,\n-\t\t\t\t\t\t  index);\n+\tjclass to = (_Jv_ResolvePoolEntry (defining_class, index)).clazz;\n \tPUSHI (to->isInstance (value));\n       }\n       goto next_insn;\n@@ -2315,8 +2314,8 @@ void _Jv_InterpMethod::continue1 (_Jv_InterpMethodInvocation *inv)\n \tint kind_index = get2u (pc); pc += 2;\n \tint dim        = get1u (pc); pc += 1;\n \n-\tjclass type    = (jclass) _Jv_ResolvePoolEntry (defining_class,\n-\t\t\t\t\t\t\tkind_index);\n+\tjclass type    \n+\t  = (_Jv_ResolvePoolEntry (defining_class, kind_index)).clazz;\n \t_Jv_InitClass (type);\n \tjint *sizes    = (jint*) alloca (sizeof (jint)*dim);\n "}, {"sha": "c4600bf329d34adc3937abbedf5b382f3efcd694", "filename": "libjava/java/lang/Class.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fjava%2Flang%2FClass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fjava%2Flang%2FClass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.h?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -49,7 +49,7 @@ struct _Jv_Constants\n {\n   jint size;\n   jbyte *tags;\n-  void **data;\n+  _Jv_word *data;\n };\n \n struct _Jv_Method\n@@ -192,7 +192,7 @@ class java::lang::Class : public java::lang::Object\n   friend int _Jv_DetermineVTableIndex (jclass, _Jv_Utf8Const *, \n \t\t\t\t       _Jv_Utf8Const*);\n   friend void _Jv_InitField (jobject, jclass, int);\n-  friend void* _Jv_ResolvePoolEntry (jclass, int);\n+  friend _Jv_word _Jv_ResolvePoolEntry (jclass, int);\n   friend void _Jv_PrepareClass (jclass);\n \n   friend class _Jv_ClassReader;\t"}, {"sha": "0caaa4cbffd821019dd22f00e61a01c580622c55", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -233,8 +233,8 @@ _Jv_InternClassStrings(jclass klass)\n       if (pool->tags[i] == JV_CONSTANT_String)\n \t{\n \t  jstring str;\n-\t  str = _Jv_NewStringUtf8Const ((_Jv_Utf8Const *) pool->data[i]);\n-\t  pool->data[i] = (void *) str;\n+\t  str = _Jv_NewStringUtf8Const (pool->data[i].utf8);\n+\t  pool->data[i].string = str;\n \t  pool->tags[i] |= JV_CONSTANT_ResolvedFlag;\n \t}\n     }"}, {"sha": "fc8d814471f7b680b3d386daa87a6be81274b10e", "filename": "libjava/java/net/natPlainSocketImpl.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fjava%2Fnet%2FnatPlainSocketImpl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fjava%2Fnet%2FnatPlainSocketImpl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FnatPlainSocketImpl.cc?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -11,7 +11,9 @@ details.  */\n #include <sys/types.h>\n #include <sys/socket.h>\n #include <sys/time.h>\n+#ifdef HAVE_SYS_SELECT_H\n #include <sys/select.h>\n+#endif\n #include <netinet/in.h>\n #include <netinet/tcp.h>\n #include <errno.h>"}, {"sha": "9a48b6092b0fecbfe300a7c48a1e3ee77ed158db", "filename": "libjava/resolve.cc", "status": "modified", "additions": 24, "deletions": 26, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fresolve.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7941ceabf0f14279e93443a63ca4d355f3a88830/libjava%2Fresolve.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fresolve.cc?ref=7941ceabf0f14279e93443a63ca4d355f3a88830", "patch": "@@ -75,7 +75,7 @@ static void throw_incompatible_class_change_error (jstring msg)\n   JvThrow (new java::lang::IncompatibleClassChangeError (msg));\n }\n \n-void*\n+_Jv_word\n _Jv_ResolvePoolEntry (jclass klass, int index)\n {\n   _Jv_Constants *pool = &klass->constants;\n@@ -86,7 +86,7 @@ _Jv_ResolvePoolEntry (jclass klass, int index)\n   switch (pool->tags[index]) {\n   case JV_CONSTANT_Class:\n     {\n-      _Jv_Utf8Const *name = (_Jv_Utf8Const *) pool->data[index];\n+      _Jv_Utf8Const *name = pool->data[index].utf8;\n \n       jclass found;\n       if (name->data[0] == '[')\n@@ -105,7 +105,7 @@ _Jv_ResolvePoolEntry (jclass klass, int index)\n \t  || (_Jv_ClassNameSamePackage (found->name,\n \t\t\t\t\tklass->name)))\n \t{\n-\t  pool->data[index] = (void *) found;\n+\t  pool->data[index].clazz = found;\n \t  pool->tags[index] |= JV_CONSTANT_ResolvedFlag;\n \t}\n       else\n@@ -118,31 +118,30 @@ _Jv_ResolvePoolEntry (jclass klass, int index)\n   case JV_CONSTANT_String:\n     {\n       jstring str;\n-      str = _Jv_NewStringUtf8Const ((_Jv_Utf8Const *) pool->data[index]);\n-      pool->data[index] = (void *) str;\n+      str = _Jv_NewStringUtf8Const (pool->data[index].utf8);\n+      pool->data[index].o = str;\n       pool->tags[index] |= JV_CONSTANT_ResolvedFlag;\n     }\n     break;\n \n   case JV_CONSTANT_Fieldref:\n     {\n       _Jv_ushort class_index, name_and_type_index;\n-      _Jv_loadIndexes ((const void**) &pool->data[index],\n+      _Jv_loadIndexes (&pool->data[index],\n \t\t       class_index,\n \t\t       name_and_type_index);\n-      jclass owner = (jclass) _Jv_ResolvePoolEntry (klass, class_index);\n+      jclass owner = (_Jv_ResolvePoolEntry (klass, class_index)).clazz;\n \n       if (owner != klass)\n \t_Jv_InitClass (owner);\n \n       _Jv_ushort name_index, type_index;\n-      _Jv_loadIndexes ((const void**) &pool->data[name_and_type_index],\n+      _Jv_loadIndexes (&pool->data[name_and_type_index],\n \t\t       name_index,\n \t\t       type_index);\n \n-      _Jv_Utf8Const *field_name = (_Jv_Utf8Const*) pool->data[name_index];\n-      _Jv_Utf8Const *field_type_name =\n-\t(_Jv_Utf8Const*) pool->data[type_index];\n+      _Jv_Utf8Const *field_name = pool->data[name_index].utf8;\n+      _Jv_Utf8Const *field_type_name = pool->data[type_index].utf8;\n \n       // FIXME: The implementation of this function\n       // (_Jv_FindClassFromSignature) will generate an instance of\n@@ -211,7 +210,7 @@ _Jv_ResolvePoolEntry (jclass klass, int index)\n \t  throw_incompatible_class_change_error (msg);\n \t}\n \n-      pool->data[index] = (void*)the_field;\n+      pool->data[index].field = the_field;\n       pool->tags[index] |= JV_CONSTANT_ResolvedFlag;\n     }\n     break;\n@@ -220,22 +219,21 @@ _Jv_ResolvePoolEntry (jclass klass, int index)\n   case JV_CONSTANT_InterfaceMethodref:\n     {\n       _Jv_ushort class_index, name_and_type_index;\n-      _Jv_loadIndexes ((const void**) &pool->data[index],\n+      _Jv_loadIndexes (&pool->data[index],\n \t\t       class_index,\n \t\t       name_and_type_index);\n-      jclass owner = (jclass) _Jv_ResolvePoolEntry (klass, class_index);\n+      jclass owner = (_Jv_ResolvePoolEntry (klass, class_index)).clazz;\n \n       if (owner != klass)\n \t_Jv_InitClass (owner);\n \n       _Jv_ushort name_index, type_index;\n-      _Jv_loadIndexes ((const void**) &pool->data[name_and_type_index],\n+      _Jv_loadIndexes (&pool->data[name_and_type_index],\n \t\t       name_index,\n \t\t       type_index);\n \n-      _Jv_Utf8Const *method_name = (_Jv_Utf8Const*) pool->data[name_index];\n-      _Jv_Utf8Const *method_signature =\n-\t(_Jv_Utf8Const*) pool->data[type_index];\n+      _Jv_Utf8Const *method_name = pool->data[name_index].utf8;\n+      _Jv_Utf8Const *method_signature = pool->data[type_index].utf8;\n \n       int vtable_index = -1;\n       _Jv_Method *the_method = 0;\n@@ -304,7 +302,7 @@ _Jv_ResolvePoolEntry (jclass klass, int index)\n \t  JvThrow(new java::lang::NoSuchFieldError (msg));\n \t}\n       \n-      pool->data[index] = (void*)\n+      pool->data[index].rmethod = \n \t_Jv_BuildResolvedMethod(the_method,\n \t\t\t\tfound_class,\n \t\t\t\t((the_method->accflags & STATIC) != 0),\n@@ -754,8 +752,8 @@ _Jv_InitField (jobject obj, jclass klass, int index)\n       {\n \t_Jv_MonitorEnter (clz);\n \tjstring str;\n-\tstr = _Jv_NewStringUtf8Const ((_Jv_Utf8Const *) pool->data[init]);\n-\tpool->data[init] = (void *) str;\n+\tstr = _Jv_NewStringUtf8Const (pool->data[init].utf8);\n+\tpool->data[init].string = str;\n \tpool->tags[init] = JV_CONSTANT_ResolvedString;\n \t_Jv_MonitorExit (clz);\n       }\n@@ -765,12 +763,12 @@ _Jv_InitField (jobject obj, jclass klass, int index)\n       if (! (field->type == &StringClass || field->type == &ObjectClass))\n \tthrow_class_format_error (\"string initialiser to non-string field\");\n \n-      *(jstring*)addr = *(jstring*) (pool->data + init);\n+      *(jstring*)addr = pool->data[init].string;\n       break;\n \n     case JV_CONSTANT_Integer:\n       {\n-\tint value = *(jint*)(pool->data + init);\n+\tint value = pool->data[init].i;\n \n \tif (field->type == JvPrimClass (boolean))\n \t  *(jboolean*)addr = (jboolean)value;\n@@ -796,21 +794,21 @@ _Jv_InitField (jobject obj, jclass klass, int index)\n       if (field->type != JvPrimClass (long))\n \tthrow_class_format_error (\"erroneous field initializer\");\n \n-      memcpy (addr, pool->data+init, 8);\n+      *(jlong*)addr = _Jv_loadLong (&pool->data[init]);\n       break;\n \n     case JV_CONSTANT_Float:\n       if (field->type != JvPrimClass (float))\n \tthrow_class_format_error (\"erroneous field initializer\");\n \n-      memcpy (addr, pool->data+init, 4);\n+      *(jfloat*)addr = pool->data[init].f;\n       break;\n \n     case JV_CONSTANT_Double:\n       if (field->type != JvPrimClass (double))\n \tthrow_class_format_error (\"erroneous field initializer\");\n \n-      memcpy (addr, pool->data+init, 8);\n+      *(jdouble*)addr = _Jv_loadDouble (&pool->data[init]);\n       break;\n \n     default:"}]}