{"sha": "130bb4c79295487c5fc203103d80e3b754640eb4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMwYmI0Yzc5Mjk1NDg3YzVmYzIwMzEwM2Q4MGUzYjc1NDY0MGViNA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-05-20T09:00:57Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-05-20T11:27:46Z"}, "message": "middle-end/95231 - revert parts of PR95171\n\nI mistook the opportunity to also \"fix\" the [VEC_]COND_EXPR case\nfor PR95171 but I was wrong in that it doesn't need the fix and\nin the actual fix as well.  The following just reverts that part.\n\n2020-05-20  Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/95231\n\t* tree-inline.c (remap_gimple_stmt): Revert adjusting\n\tCOND_EXPR and VEC_COND_EXPR for a -fnon-call-exception boundary.\n\n\t* g++.dg/other/pr95231.C: New testcase.", "tree": {"sha": "4eb2d27ac4a541c12f84fa0e2cfd7892e96ce33d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4eb2d27ac4a541c12f84fa0e2cfd7892e96ce33d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/130bb4c79295487c5fc203103d80e3b754640eb4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/130bb4c79295487c5fc203103d80e3b754640eb4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/130bb4c79295487c5fc203103d80e3b754640eb4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/130bb4c79295487c5fc203103d80e3b754640eb4/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "35b980365c9230c1d704e561e1d4a8e0e69d2a82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35b980365c9230c1d704e561e1d4a8e0e69d2a82", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35b980365c9230c1d704e561e1d4a8e0e69d2a82"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "2eba6db9a911089665ab9d886904dfd9a081201c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=130bb4c79295487c5fc203103d80e3b754640eb4", "patch": "@@ -1,3 +1,9 @@\n+2020-05-20  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/95231\n+\t* tree-inline.c (remap_gimple_stmt): Revert adjusting\n+\tCOND_EXPR and VEC_COND_EXPR for a -fnon-call-exception boundary.\n+\n 2020-05-20  Srinath Parvathaneni  <srinath.parvathaneni@arm.com>\n \t    Andre Vieira  <andre.simoesdiasvieira@arm.com>\n "}, {"sha": "3d63c57f308989536b22d5af91cc145b98478133", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=130bb4c79295487c5fc203103d80e3b754640eb4", "patch": "@@ -1,3 +1,8 @@\n+2020-05-20  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/95231\n+\t* g++.dg/other/pr95231.C: New testcase.\n+\n 2020-05-30  Richard Biener  <rguenther@suse.de>\n \n \tPR c/95141"}, {"sha": "de0636625284b7051740b1daab0c7d475e7e6490", "filename": "gcc/testsuite/g++.dg/other/pr95231.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr95231.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr95231.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr95231.C?ref=130bb4c79295487c5fc203103d80e3b754640eb4", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do compile { target c++11 } } */\n+/* { dg-options \"-O3 -fnon-call-exceptions\" } */\n+\n+#include \"vector-compare.C\""}, {"sha": "3160ca3f88a4b7bf18be8a2f47147aadaffd77a5", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130bb4c79295487c5fc203103d80e3b754640eb4/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=130bb4c79295487c5fc203103d80e3b754640eb4", "patch": "@@ -1974,17 +1974,6 @@ remap_gimple_stmt (gimple *stmt, copy_body_data *id)\n \t    gimple_cond_set_lhs (cond, gimple_assign_lhs (cmp));\n \t    gimple_cond_set_rhs (cond, boolean_false_node);\n \t  }\n-      if (gassign *ass = dyn_cast <gassign *> (copy))\n-\tif ((gimple_assign_rhs_code (ass) == COND_EXPR\n-\t     || gimple_assign_rhs_code (ass) == VEC_COND_EXPR)\n-\t    && gimple_could_trap_p (ass))\n-\t  {\n-\t    gassign *cmp\n-\t      = gimple_build_assign (make_ssa_name (boolean_type_node),\n-\t\t\t\t     gimple_assign_rhs1 (ass));\n-\t    gimple_seq_add_stmt (&stmts, cmp);\n-\t    gimple_assign_set_rhs1 (ass, gimple_assign_lhs (cmp));\n-\t  }\n     }\n \n   gimple_seq_add_stmt (&stmts, copy);"}]}