{"sha": "5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWViNWVjMmYzMDM0YTFjNjIyNjI5MTRiMDkwZjY0YTVkNWYwYmM4Ng==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-08-19T09:03:20Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-08-19T09:03:20Z"}, "message": "re PR fortran/46271 ([F03] OpenMP default(none) and procedure pointers)\n\n2013-08-19  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/46271\n\t* openmp.c (resolve_omp_clauses): Bugfix for procedure pointers.\n\n\n2013-08-19  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/46271\n\t* gfortran.dg/gomp/proc_ptr_1.f90: New.\n\nFrom-SVN: r201835", "tree": {"sha": "6c69f7ce6afb817c81d25c3af67151b38c3fb9f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c69f7ce6afb817c81d25c3af67151b38c3fb9f6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "247690cdfea83d2cd39551da5af5263bf858d1e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/247690cdfea83d2cd39551da5af5263bf858d1e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/247690cdfea83d2cd39551da5af5263bf858d1e6"}], "stats": {"total": 42, "additions": 39, "deletions": 3}, "files": [{"sha": "53e446e0015adfbf901a8019a784b5c5d822d989", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "patch": "@@ -1,3 +1,8 @@\n+2013-08-19  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/46271\n+\t* openmp.c (resolve_omp_clauses): Bugfix for procedure pointers.\n+\n 2013-08-12  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/56666"}, {"sha": "6c4dccbed10c47a6e4614ec21fbe5fc93b13f892", "filename": "gcc/fortran/openmp.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ffortran%2Fopenmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ffortran%2Fopenmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.c?ref=5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "patch": "@@ -847,7 +847,7 @@ resolve_omp_clauses (gfc_code *code)\n     for (n = omp_clauses->lists[list]; n; n = n->next)\n       {\n \tn->sym->mark = 0;\n-\tif (n->sym->attr.flavor == FL_VARIABLE)\n+\tif (n->sym->attr.flavor == FL_VARIABLE || n->sym->attr.proc_pointer)\n \t  continue;\n \tif (n->sym->attr.flavor == FL_PROCEDURE\n \t    && n->sym->result == n->sym\n@@ -876,8 +876,6 @@ resolve_omp_clauses (gfc_code *code)\n \t\tif (el)\n \t\t  continue;\n \t      }\n-\t    if (n->sym->attr.proc_pointer)\n-\t      continue;\n \t  }\n \tgfc_error (\"Object '%s' is not a variable at %L\", n->sym->name,\n \t\t   &code->loc);"}, {"sha": "d0eee3f8fc4bdde0c03ec24ce5a42a6b95eb5778", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "patch": "@@ -1,3 +1,8 @@\n+2013-08-19  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/46271\n+\t* gfortran.dg/gomp/proc_ptr_1.f90: New.\n+\n 2013-08-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/58006"}, {"sha": "952c31491edece0261c151ef464be46f11489ff0", "filename": "gcc/testsuite/gfortran.dg/gomp/proc_ptr_1.f90", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fproc_ptr_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5eb5ec2f3034a1c62262914b090f64a5d5f0bc86/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fproc_ptr_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fproc_ptr_1.f90?ref=5eb5ec2f3034a1c62262914b090f64a5d5f0bc86", "patch": "@@ -0,0 +1,28 @@\n+! { dg-do compile }\n+!\n+! PR 46271: [F03] OpenMP default(none) and procedure pointers\n+!\n+! Contributed by Marco Restelli <mrestelli@gmail.com>\n+\n+program test\n+  implicit none\n+  integer :: i\n+  real :: s(1000)\n+  procedure(f), pointer :: pf\n+ \n+  pf => f\n+\n+  !$omp parallel do schedule(static) private(i) shared(s,pf) default(none)\n+  do i=1,1000\n+    call pf(real(i),s(i))\n+  enddo\n+  !$omp end parallel do\n+\n+  write(*,*) 'Sum ',sum(s)\n+contains\n+  pure subroutine f(x,y)\n+    real, intent(in) :: x\n+    real, intent(out) :: y\n+    y = sin(x)*cos(x)\n+  end subroutine\n+end"}]}