{"sha": "0829c7f7c5210cd1581042115cfe95c97283f44c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDgyOWM3ZjdjNTIxMGNkMTU4MTA0MjExNWNmZTk1Yzk3MjgzZjQ0Yw==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2012-11-07T18:11:01Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2012-11-07T18:11:01Z"}, "message": "optc-gen.awk: Factor code out to...\n\n2012-11-07  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* optc-gen.awk: Factor code out to...\n\t* opt-functions.awk (lang_enabled_by): ... this new function.\n\nFrom-SVN: r193303", "tree": {"sha": "c8daa5684552755ccd4662c7ed9d7f1b7d8ea663", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8daa5684552755ccd4662c7ed9d7f1b7d8ea663"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0829c7f7c5210cd1581042115cfe95c97283f44c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0829c7f7c5210cd1581042115cfe95c97283f44c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0829c7f7c5210cd1581042115cfe95c97283f44c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0829c7f7c5210cd1581042115cfe95c97283f44c/comments", "author": null, "committer": null, "parents": [{"sha": "34a180a642af3c0b5ad145e1a0b228d71933d6ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34a180a642af3c0b5ad145e1a0b228d71933d6ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34a180a642af3c0b5ad145e1a0b228d71933d6ba"}], "stats": {"total": 66, "additions": 41, "deletions": 25}, "files": [{"sha": "88f9bb92e2497e07f97f97aa9c2d4c8de7fc10ab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0829c7f7c5210cd1581042115cfe95c97283f44c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0829c7f7c5210cd1581042115cfe95c97283f44c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0829c7f7c5210cd1581042115cfe95c97283f44c", "patch": "@@ -1,3 +1,8 @@\n+2012-11-07  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* optc-gen.awk: Factor code out to...\n+\t* opt-functions.awk (lang_enabled_by): ... this new function.\n+\n 2012-11-07  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR c/53063"}, {"sha": "4a81e88c340856be95412d9199a2be54bee5a956", "filename": "gcc/opt-functions.awk", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0829c7f7c5210cd1581042115cfe95c97283f44c/gcc%2Fopt-functions.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0829c7f7c5210cd1581042115cfe95c97283f44c/gcc%2Fopt-functions.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopt-functions.awk?ref=0829c7f7c5210cd1581042115cfe95c97283f44c", "patch": "@@ -313,3 +313,35 @@ function search_var_name(name, opt_numbers, opts, flags, n_opts)\n     }\n     return \"\"\n }\n+\n+# Handle LangEnabledBy(ENABLED_BY_LANGS, ENABLEDBY_NAME, ENABLEDBY_POSARG,\n+# ENABLEDBY_NEGARG). This function does not return anything.\n+function lang_enabled_by(enabledby_langs, enabledby_name, enabledby_posarg, enabledby_negarg)\n+{\n+    n_enabledby_arg_langs = split(enabledby_langs, enabledby_arg_langs, \" \");\n+    enabledby_index = opt_numbers[enabledby_name];\n+    if (enabledby_index == \"\") {\n+        print \"#error LangEnabledby: \" enabledby_name \n+    } else {\n+        if (enabledby_posarg != \"\" && enabledby_negarg != \"\") {\n+            with_args = \",\" enabledby_posarg \",\" enabledby_negarg\n+        } else if (enabledby_posarg == \"\" && enabledby_negarg == \"\") {\n+            with_args = \"\"\n+        } else {\n+            print \"#error LangEnabledBy(\"enabledby_langs\",\"enabledby_name\", \" \\\n+                enabledby_posarg\", \" enabledby_negargs                  \\\n+                \") with three arguments, it should have either 2 or 4\"\n+        }\n+        \n+        for (j = 1; j <= n_enabledby_arg_langs; j++) {\n+            lang_name = lang_sanitized_name(enabledby_arg_langs[j]);\n+            lang_index = lang_numbers[enabledby_arg_langs[j]];\n+            if (enables[lang_name,enabledby_name] == \"\") {\n+                enabledby[lang_name,n_enabledby_lang[lang_index]] = enabledby_name;\n+                n_enabledby_lang[lang_index]++;\n+            }\n+            enables[lang_name,enabledby_name] = enables[lang_name,enabledby_name] opts[i] with_args \";\";\n+        }\n+    }\n+}\n+"}, {"sha": "cc098887ea4312a3481fe1582a05c0a43ebbee95", "filename": "gcc/optc-gen.awk", "status": "modified", "additions": 4, "deletions": 25, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0829c7f7c5210cd1581042115cfe95c97283f44c/gcc%2Foptc-gen.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0829c7f7c5210cd1581042115cfe95c97283f44c/gcc%2Foptc-gen.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptc-gen.awk?ref=0829c7f7c5210cd1581042115cfe95c97283f44c", "patch": "@@ -73,32 +73,11 @@ for (i = 0; i < n_opts; i++) {\n \n     enabledby_arg = opt_args(\"LangEnabledBy\", flags[i]);\n     if (enabledby_arg != \"\") {\n-        n_enabledby_arg_langs = split(nth_arg(0, enabledby_arg), enabledby_arg_langs, \" \");\n+        enabledby_langs = nth_arg(0, enabledby_arg);\n         enabledby_name = nth_arg(1, enabledby_arg);\n-        enabledby_posarg = nth_arg(2, enabledby_arg)\n-\tenabledby_negarg = nth_arg(3, enabledby_arg)\n-        enabledby_index = opt_numbers[enabledby_name];\n-        if (enabledby_index == \"\") {\n-            print \"#error LangEnabledby: \" enabledby_name \n-        } else {\n-            if (enabledby_posarg != \"\" && enabledby_negarg != \"\") {\n-                with_args = \",\" enabledby_posarg \",\" enabledby_negarg\n-            } else if (enabledby_posarg == \"\" && enabledby_negarg == \"\") {\n-                with_args = \"\"\n-            } else {\n-                print \"#error LangEnabledBy with three arguments, it should have either 2 or 4\"\n-            }\n-\n-            for (j = 1; j <= n_enabledby_arg_langs; j++) {\n-                lang_name = lang_sanitized_name(enabledby_arg_langs[j]);\n-                lang_index = lang_numbers[enabledby_arg_langs[j]];\n-                if (enables[lang_name,enabledby_name] == \"\") {\n-                    enabledby[lang_name,n_enabledby_lang[lang_index]] = enabledby_name;\n-                    n_enabledby_lang[lang_index]++;\n-                }\n-                enables[lang_name,enabledby_name] = enables[lang_name,enabledby_name] opts[i] with_args \";\";\n-            }\n-        }\n+        enabledby_posarg = nth_arg(2, enabledby_arg);\n+\tenabledby_negarg = nth_arg(3, enabledby_arg);\n+        lang_enabled_by(enabledby_langs, enabledby_name, enabledby_posarg, enabledby_negarg);\n     }\n }\n "}]}