{"sha": "53673d763f9e0c655d4239042bb69993a8d950b5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTM2NzNkNzYzZjllMGM2NTVkNDIzOTA0MmJiNjk5OTNhOGQ5NTBiNQ==", "commit": {"author": {"name": "Mark Eggleston", "email": "markeggleston@gcc.gnu.org", "date": "2020-09-28T10:01:40Z"}, "committer": {"name": "Mark Eggleston", "email": "markeggleston@gcc.gnu.org", "date": "2020-09-28T10:02:58Z"}, "message": "Revert \"Fortran  :  ICE in build_field PR95614\"\n\nThis reverts commit e5a76af3a2f3324efc60b4b2778ffb29d5c377bc.", "tree": {"sha": "ea5de227aa0976acdedf80467004da559bd9ed5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea5de227aa0976acdedf80467004da559bd9ed5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53673d763f9e0c655d4239042bb69993a8d950b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53673d763f9e0c655d4239042bb69993a8d950b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53673d763f9e0c655d4239042bb69993a8d950b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53673d763f9e0c655d4239042bb69993a8d950b5/comments", "author": null, "committer": null, "parents": [{"sha": "cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50"}], "stats": {"total": 34, "additions": 8, "deletions": 26}, "files": [{"sha": "326e6f5db7aeed29ab44a80de61a5f4ce466ac27", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=53673d763f9e0c655d4239042bb69993a8d950b5", "patch": "@@ -6007,7 +6007,7 @@ get_bind_c_idents (void)\n       found_id = MATCH_YES;\n       gfc_get_ha_symbol (name, &tmp_sym);\n     }\n-  else if (gfc_match_common_name (name) == MATCH_YES)\n+  else if (match_common_name (name) == MATCH_YES)\n     {\n       found_id = MATCH_YES;\n       com_block = gfc_get_common (name, 0);\n@@ -6052,7 +6052,7 @@ get_bind_c_idents (void)\n \t      found_id = MATCH_YES;\n \t      gfc_get_ha_symbol (name, &tmp_sym);\n \t    }\n-\t  else if (gfc_match_common_name (name) == MATCH_YES)\n+\t  else if (match_common_name (name) == MATCH_YES)\n \t    {\n \t      found_id = MATCH_YES;\n \t      com_block = gfc_get_common (name, 0);"}, {"sha": "cb09c5f8ec535d8fedd14b3a5585350dc0a74e73", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=53673d763f9e0c655d4239042bb69993a8d950b5", "patch": "@@ -5166,8 +5166,7 @@ gfc_get_common (const char *name, int from_module)\n \n /* Match a common block name.  */\n \n-match\n-gfc_match_common_name (char *name)\n+match match_common_name (char *name)\n {\n   match m;\n \n@@ -5219,7 +5218,7 @@ gfc_match_common (void)\n \n   for (;;)\n     {\n-      m = gfc_match_common_name (name);\n+      m = match_common_name (name);\n       if (m == MATCH_ERROR)\n \tgoto cleanup;\n "}, {"sha": "7bf70d77016e672c45d131129a87f9648c71ad43", "filename": "gcc/fortran/match.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fmatch.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fmatch.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.h?ref=53673d763f9e0c655d4239042bb69993a8d950b5", "patch": "@@ -103,9 +103,11 @@ match gfc_match_call (void);\n \n /* We want to use this function to check for a common-block-name\n    that can exist in a bind statement, so removed the \"static\"\n-   declaration of the function in match.c. */\n+   declaration of the function in match.c.\n  \n-match gfc_match_common_name (char *name);\n+   TODO: should probably rename this now that it'll be globally seen to\n+   gfc_match_common_name.  */\n+match match_common_name (char *name);\n \n match gfc_match_common (void);\n match gfc_match_block_data (void);"}, {"sha": "f4ce49f84323b425cd283714653b34df95a4c998", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53673d763f9e0c655d4239042bb69993a8d950b5/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=53673d763f9e0c655d4239042bb69993a8d950b5", "patch": "@@ -936,16 +936,9 @@ static void\n resolve_common_vars (gfc_common_head *common_block, bool named_common)\n {\n   gfc_symbol *csym = common_block->head;\n-  gfc_gsymbol *gsym;\n \n   for (; csym; csym = csym->common_next)\n     {\n-      gsym = gfc_find_gsymbol (gfc_gsym_root, csym->name);\n-      if (gsym && gsym->type != GSYM_UNKNOWN && gsym->type != GSYM_COMMON)\n-\tgfc_error_now (\"Global entity %qs at %L cannot appear in a \"\n-\t\t\t\"COMMON block at %L\", gsym->name,\n-\t\t\t&gsym->where, &csym->common_block->where);\n-\n       /* gfc_add_in_common may have been called before, but the reported errors\n \t have been ignored to continue parsing.\n \t We do the checks again here.  */"}, {"sha": "f835143365a2c7a2a830919a1922fe328c0b21fe", "filename": "gcc/testsuite/gfortran.dg/pr95614_1.f90", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95614_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95614_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95614_1.f90?ref=cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50", "patch": "@@ -1,6 +0,0 @@\n-! { dg-do compile }\n-\n-module m   ! { dg-error \".1.\" }\n-  common m ! { dg-error \"cannot appear in a COMMON\" }\n-end\n-"}, {"sha": "9d69a5063846e9c1212cb9e376f3ea8704eef798", "filename": "gcc/testsuite/gfortran.dg/pr95614_2.f90", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95614_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95614_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95614_2.f90?ref=cc997e0cc4fcc9ae8e389757d94a0ae69d34cd50", "patch": "@@ -1,6 +0,0 @@\n-! { dg-do compile }\n-\n-module m        ! { dg-error \".1.\" }\n-  common /xc/ m ! { dg-error \"cannot appear in a COMMON\" }\n-end\n-"}]}