{"sha": "acbbd80a549738efba5710a1e4fee114fd08056e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWNiYmQ4MGE1NDk3MzhlZmJhNTcxMGExZTRmZWUxMTRmZDA4MDU2ZQ==", "commit": {"author": {"name": "Mumit Khan", "email": "khan@xraylith.wisc.edu", "date": "1999-04-15T22:05:35Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-04-15T22:05:35Z"}, "message": "configure.in (checkfuncs): Check for sbrk.\n\n        * configure.in (checkfuncs): Check for sbrk.\n        * config.in: Rebuilt.\n        * configure: Likewise.\n        * xmalloc.c: Use HAVE_SBRK instead of the host specific definitions.\n\nFrom-SVN: r26480", "tree": {"sha": "0ee0d2463aa466f8760f6e1c1f676361d5e55672", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ee0d2463aa466f8760f6e1c1f676361d5e55672"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/acbbd80a549738efba5710a1e4fee114fd08056e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acbbd80a549738efba5710a1e4fee114fd08056e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acbbd80a549738efba5710a1e4fee114fd08056e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acbbd80a549738efba5710a1e4fee114fd08056e/comments", "author": null, "committer": null, "parents": [{"sha": "d825fa8795d3e7e98ecf28eaf3e8ce38c5cde441", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d825fa8795d3e7e98ecf28eaf3e8ce38c5cde441", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d825fa8795d3e7e98ecf28eaf3e8ce38c5cde441"}], "stats": {"total": 189, "additions": 129, "deletions": 60}, "files": [{"sha": "00bf5d61e7e899336d2592bbd49ec9e4770519b5", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=acbbd80a549738efba5710a1e4fee114fd08056e", "patch": "@@ -1,3 +1,10 @@\n+Thu Apr 15 23:00:55 1999  Mumit Khan  <khan@xraylith.wisc.edu>\n+\n+\t* configure.in (checkfuncs): Check for sbrk.\n+\t* config.in: Rebuilt.\n+\t* configure: Likewise.\n+\t* xmalloc.c: Use HAVE_SBRK instead of the host specific definitions.\n+\n 1999-04-12  Jim Blandy  <jimb@zwingli.cygnus.com>\n \n \tFix from Marcus Daniels:"}, {"sha": "520729f894e13ed52ba92b8865836f80209644b3", "filename": "libiberty/config.in", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfig.in?ref=acbbd80a549738efba5710a1e4fee114fd08056e", "patch": "@@ -106,6 +106,9 @@\n /* Define if you have the memset function.  */\n #undef HAVE_MEMSET\n \n+/* Define if you have the mkstemps function.  */\n+#undef HAVE_MKSTEMPS\n+\n /* Define if you have the on_exit function.  */\n #undef HAVE_ON_EXIT\n \n@@ -121,6 +124,9 @@\n /* Define if you have the rindex function.  */\n #undef HAVE_RINDEX\n \n+/* Define if you have the sbrk function.  */\n+#undef HAVE_SBRK\n+\n /* Define if you have the sigsetmask function.  */\n #undef HAVE_SIGSETMASK\n "}, {"sha": "f086a975174e940e46dbc63a66cdfabe34de046a", "filename": "libiberty/configure", "status": "modified", "additions": 101, "deletions": 46, "changes": 147, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=acbbd80a549738efba5710a1e4fee114fd08056e", "patch": "@@ -1183,7 +1183,7 @@ funcs=\"$funcs waitpid\"\n \n vars=\"sys_errlist sys_nerr sys_siglist\"\n \n-checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times\"\n+checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times sbrk\"\n \n # These are neither executed nor required, but they help keep\n # autoheader happy without adding a bunch of text to acconfig.h.\n@@ -1525,6 +1525,61 @@ if eval \"test \\\"`echo '$ac_cv_func_'$ac_func`\\\" = yes\"; then\n #define $ac_tr_func 1\n EOF\n  \n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+done\n+\n+  for ac_func in sbrk\n+do\n+echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n+echo \"configure:1537: checking for $ac_func\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1542 \"configure\"\n+#include \"confdefs.h\"\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char $ac_func(); below.  */\n+#include <assert.h>\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char $ac_func();\n+\n+int main() {\n+\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)\n+choke me\n+#else\n+$ac_func();\n+#endif\n+\n+; return 0; }\n+EOF\n+if { (eval echo configure:1565: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_func_$ac_func=yes\"\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_func_$ac_func=no\"\n+fi\n+rm -f conftest*\n+fi\n+\n+if eval \"test \\\"`echo '$ac_cv_func_'$ac_func`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n+  cat >> confdefs.h <<EOF\n+#define $ac_tr_func 1\n+EOF\n+ \n else\n   echo \"$ac_t\"\"no\" 1>&6\n fi\n@@ -1677,7 +1732,7 @@ EOF\n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1681: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1736: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1688,12 +1743,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1692 \"configure\"\n+#line 1747 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1697: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1752: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1719,19 +1774,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1723: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1778: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1730: checking for $ac_func\" >&5\n+echo \"configure:1785: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1735 \"configure\"\n+#line 1790 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1754,7 +1809,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1758: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1813: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1783,19 +1838,19 @@ done\n   # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1787: checking for working alloca.h\" >&5\n+echo \"configure:1842: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1792 \"configure\"\n+#line 1847 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:1799: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1854: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -1816,12 +1871,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1820: checking for alloca\" >&5\n+echo \"configure:1875: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1825 \"configure\"\n+#line 1880 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -1849,7 +1904,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:1853: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1908: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -1881,12 +1936,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:1885: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:1940: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1890 \"configure\"\n+#line 1945 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -1911,12 +1966,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1915: checking for $ac_func\" >&5\n+echo \"configure:1970: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1920 \"configure\"\n+#line 1975 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1939,7 +1994,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1943: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1998: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1966,15 +2021,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1970: checking stack direction for C alloca\" >&5\n+echo \"configure:2025: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1978 \"configure\"\n+#line 2033 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -1993,7 +2048,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:1997: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2052: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -2015,20 +2070,20 @@ EOF\n fi\n \n   echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:2019: checking for ANSI C header files\" >&5\n+echo \"configure:2074: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2024 \"configure\"\n+#line 2079 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2032: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2087: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2045,7 +2100,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2049 \"configure\"\n+#line 2104 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -2063,7 +2118,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2067 \"configure\"\n+#line 2122 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -2084,7 +2139,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2088 \"configure\"\n+#line 2143 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -2095,7 +2150,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:2099: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2154: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -2119,12 +2174,12 @@ EOF\n fi\n \n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2123: checking for pid_t\" >&5\n+echo \"configure:2178: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2128 \"configure\"\n+#line 2183 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2153,17 +2208,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2157: checking for vfork.h\" >&5\n+echo \"configure:2212: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2162 \"configure\"\n+#line 2217 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2167: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2222: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2188,18 +2243,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2192: checking for working vfork\" >&5\n+echo \"configure:2247: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2198: checking for vfork\" >&5\n+echo \"configure:2253: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2203 \"configure\"\n+#line 2258 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2222,7 +2277,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2226: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2281: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2244,7 +2299,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2248 \"configure\"\n+#line 2303 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2339,7 +2394,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2343: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2398: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2366,19 +2421,19 @@ fi\n   fi\n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:2370: checking for $v\" >&5\n+echo \"configure:2425: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2375 \"configure\"\n+#line 2430 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v; p = &$v;\n ; return 0; }\n EOF\n-if { (eval echo configure:2382: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2437: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -2404,12 +2459,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2408: checking for $ac_func\" >&5\n+echo \"configure:2463: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2413 \"configure\"\n+#line 2468 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2432,7 +2487,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2436: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2491: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else"}, {"sha": "da33ca9487b9b7bc5bdfaaeb4e9b059d384e6ba2", "filename": "libiberty/configure.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=acbbd80a549738efba5710a1e4fee114fd08056e", "patch": "@@ -154,7 +154,7 @@ funcs=\"$funcs waitpid\"\n \n vars=\"sys_errlist sys_nerr sys_siglist\"\n \n-checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times\"\n+checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times sbrk\"\n \n # These are neither executed nor required, but they help keep\n # autoheader happy without adding a bunch of text to acconfig.h.\n@@ -168,6 +168,7 @@ if test \"x\" = \"y\"; then\n   AC_DEFINE(HAVE_SYS_NERR)\n   AC_DEFINE(HAVE_SYS_SIGLIST)\n   AC_CHECK_FUNCS(getrusage on_exit psignal strerror strsignal sysconf times)\n+  AC_CHECK_FUNCS(sbrk)\n fi\n \n # For each of these functions, if the host does not provide the"}, {"sha": "be25c5aca190f201268bf6acea6eb42e99334d43", "filename": "libiberty/xmalloc.c", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fxmalloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acbbd80a549738efba5710a1e4fee114fd08056e/libiberty%2Fxmalloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fxmalloc.c?ref=acbbd80a549738efba5710a1e4fee114fd08056e", "patch": "@@ -43,22 +43,22 @@ PTR sbrk PARAMS ((ptrdiff_t));\n /* The program name if set.  */\n static const char *name = \"\";\n \n-#if ! defined (_WIN32) || defined (__CYGWIN__) || defined (_UWIN)\n+#ifdef HAVE_SBRK\n /* The initial sbrk, set when the program name is set. Not used for win32\n    ports other than cygwin32.  */\n static char *first_break = NULL;\n-#endif /* ! _WIN32 || __CYGWIN__ || _UWIN */\n+#endif /* HAVE_SBRK */\n \n void\n xmalloc_set_program_name (s)\n      const char *s;\n {\n   name = s;\n-#if ! defined (_WIN32) || defined (__CYGWIN__) || defined (_UWIN)\n+#ifdef HAVE_SBRK\n   /* Win32 ports other than cygwin32 don't have brk() */\n   if (first_break == NULL)\n     first_break = (char *) sbrk (0);\n-#endif /* ! _WIN32 || __CYGWIN__ || _UWIN */\n+#endif /* HAVE_SBRK */\n }\n \n PTR\n@@ -72,7 +72,7 @@ xmalloc (size)\n   newmem = malloc (size);\n   if (!newmem)\n     {\n-#if ! defined (_WIN32) || defined (__CYGWIN__) || defined (_UWIN)\n+#ifdef HAVE_SBRK\n       extern char **environ;\n       size_t allocated;\n \n@@ -84,12 +84,12 @@ xmalloc (size)\n \t       \"\\n%s%sCan not allocate %lu bytes after allocating %lu bytes\\n\",\n \t       name, *name ? \": \" : \"\",\n \t       (unsigned long) size, (unsigned long) allocated);\n-#else\n+#else /* HAVE_SBRK */\n       fprintf (stderr,\n               \"\\n%s%sCan not allocate %lu bytes\\n\",\n               name, *name ? \": \" : \"\",\n               (unsigned long) size);\n-#endif /* ! _WIN32 || __CYGWIN__ || _UWIN */\n+#endif /* HAVE_SBRK */\n       xexit (1);\n     }\n   return (newmem);\n@@ -107,7 +107,7 @@ xcalloc (nelem, elsize)\n   newmem = calloc (nelem, elsize);\n   if (!newmem)\n     {\n-#if ! defined (_WIN32) || defined (__CYGWIN__) || defined (_UWIN)\n+#ifdef HAVE_SBRK\n       extern char **environ;\n       size_t allocated;\n \n@@ -119,12 +119,12 @@ xcalloc (nelem, elsize)\n \t       \"\\n%s%sCan not allocate %lu bytes after allocating %lu bytes\\n\",\n \t       name, *name ? \": \" : \"\",\n \t       (unsigned long) (nelem * elsize), (unsigned long) allocated);\n-#else\n+#else /* HAVE_SBRK */\n       fprintf (stderr,\n               \"\\n%s%sCan not allocate %lu bytes\\n\",\n               name, *name ? \": \" : \"\",\n               (unsigned long) (nelem * elsize));\n-#endif /* ! _WIN32 || __CYGWIN__ || _UWIN */\n+#endif /* HAVE_SBRK */\n       xexit (1);\n     }\n   return (newmem);\n@@ -145,7 +145,7 @@ xrealloc (oldmem, size)\n     newmem = realloc (oldmem, size);\n   if (!newmem)\n     {\n-#if ! defined (_WIN32) || defined (__CYGWIN__) || defined (_UWIN)\n+#ifdef HAVE_SBRK\n       extern char **environ;\n       size_t allocated;\n \n@@ -157,12 +157,12 @@ xrealloc (oldmem, size)\n \t       \"\\n%s%sCan not reallocate %lu bytes after allocating %lu bytes\\n\",\n \t       name, *name ? \": \" : \"\",\n \t       (unsigned long) size, (unsigned long) allocated);\n-#else /* ! _WIN32 || __CYGWIN__ || _UWIN */\n+#else /* HAVE_SBRK */\n       fprintf (stderr,\n               \"\\n%s%sCan not reallocate %lu bytes\\n\",\n               name, *name ? \": \" : \"\",\n               (unsigned long) size);\n-#endif /* ! _WIN32 || __CYGWIN__ || _UWIN */\n+#endif /* HAVE_SBRK */\n       xexit (1);\n     }\n   return (newmem);"}]}