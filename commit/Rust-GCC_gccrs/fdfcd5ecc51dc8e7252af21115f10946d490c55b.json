{"sha": "fdfcd5ecc51dc8e7252af21115f10946d490c55b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRmY2Q1ZWNjNTFkYzhlNzI1MmFmMjExMTVmMTA5NDZkNDkwYzU1Yg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2017-10-28T01:06:18Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2017-10-28T01:06:18Z"}, "message": "re PR fortran/82620 ([PDT] ICE: free_expr0(): Bad expr type (at fortran/expr.c:497))\n\n2017-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/82620\n\t* match.c (gfc_match_allocate): Exit early on syntax error.\n\n2017-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/82620\n\t* gfortran.dg/allocate_error_7.f90: new test.\n\nFrom-SVN: r254193", "tree": {"sha": "237c1bd102c7522c65d13241c0a49740d872cf01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/237c1bd102c7522c65d13241c0a49740d872cf01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdfcd5ecc51dc8e7252af21115f10946d490c55b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdfcd5ecc51dc8e7252af21115f10946d490c55b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdfcd5ecc51dc8e7252af21115f10946d490c55b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdfcd5ecc51dc8e7252af21115f10946d490c55b/comments", "author": null, "committer": null, "parents": [{"sha": "615c85eefa5ff5fac493f424ddea77d51ad814d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/615c85eefa5ff5fac493f424ddea77d51ad814d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/615c85eefa5ff5fac493f424ddea77d51ad814d8"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "a871fc28a4f6b938db1ad11f59ad680868bbe2e6", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=fdfcd5ecc51dc8e7252af21115f10946d490c55b", "patch": "@@ -1,3 +1,8 @@\n+2017-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/82620\n+\t* match.c (gfc_match_allocate): Exit early on syntax error.\n+\n 2017-10-27  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/56342"}, {"sha": "dcabe269e61aa36f43482bd012d1d9c13c23bd4e", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=fdfcd5ecc51dc8e7252af21115f10946d490c55b", "patch": "@@ -3968,7 +3968,10 @@ gfc_match_allocate (void)\n   saw_stat = saw_errmsg = saw_source = saw_mold = saw_deferred = false;\n \n   if (gfc_match_char ('(') != MATCH_YES)\n-    goto syntax;\n+    {\n+      gfc_syntax_error (ST_ALLOCATE);\n+      return MATCH_ERROR;\n+    }\n \n   /* Match an optional type-spec.  */\n   old_locus = gfc_current_locus;"}, {"sha": "e4e6ee181e46035226cfd7af75a0867523e6390d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fdfcd5ecc51dc8e7252af21115f10946d490c55b", "patch": "@@ -1,3 +1,8 @@\n+2017-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/82620\n+\t* gfortran.dg/allocate_error_7.f90: new test.\n+\n 2017-10-27  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/82218"}, {"sha": "f1c8bc3db643a08ce6a74f3ee8f106e7fec55c5b", "filename": "gcc/testsuite/gfortran.dg/allocate_error_7.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ftestsuite%2Fgfortran.dg%2Fallocate_error_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcd5ecc51dc8e7252af21115f10946d490c55b/gcc%2Ftestsuite%2Fgfortran.dg%2Fallocate_error_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fallocate_error_7.f90?ref=fdfcd5ecc51dc8e7252af21115f10946d490c55b", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do compile }\n+!\n+! Code contributed by Gerhard Steinmetz\n+!\n+program pr82620\n+   type t(a)\n+      integer, len :: a\n+   end type\n+   type(t(:)), allocatable :: x, y\n+   allocate(t(4) :: x)\n+   allocate)t(7) :: y)     ! { dg-error \"Syntax error in ALLOCATE\" }\n+end program pr82620"}]}