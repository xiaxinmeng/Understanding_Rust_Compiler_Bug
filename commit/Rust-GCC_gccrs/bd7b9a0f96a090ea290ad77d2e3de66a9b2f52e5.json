{"sha": "bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQ3YjlhMGY5NmEwOTBlYTI5MGFkNzdkMmUzZGU2NmE5YjJmNTJlNQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-08-22T08:18:33Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-08-22T08:18:33Z"}, "message": "ia64.c (emit_all_insn_group_barriers): Flush state at barrier insns.\n\n        * config/ia64/ia64.c (emit_all_insn_group_barriers): Flush state\n        at barrier insns.  Emit stop bits before barriers.\n\nFrom-SVN: r45102", "tree": {"sha": "7975e291deb515e41e959e0994b0df29d86e0c5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7975e291deb515e41e959e0994b0df29d86e0c5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5/comments", "author": null, "committer": null, "parents": [{"sha": "687eccc06ebdf6db0905b1a7644a4a90c7e9d16a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/687eccc06ebdf6db0905b1a7644a4a90c7e9d16a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/687eccc06ebdf6db0905b1a7644a4a90c7e9d16a"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "25f0028f573d01fbbc35b7cc0331402e9373a90a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5", "patch": "@@ -1,5 +1,8 @@\n 2001-08-21  Richard Henderson  <rth@redhat.com>\n \n+\t* config/ia64/ia64.c (emit_all_insn_group_barriers): Flush state\n+\tat barrier insns.  Emit stop bits before barriers.\n+\n \t* flow.c (flow_find_cross_jump): Don't consider unconditional\n \treturn insns for commoning.\n "}, {"sha": "5cba6245ef050a4b75654f7d90a99682deddd1ae", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 17, "deletions": 5, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=bd7b9a0f96a090ea290ad77d2e3de66a9b2f52e5", "patch": "@@ -4811,13 +4811,25 @@ emit_all_insn_group_barriers (dump, insns)\n \n   for (insn = insns; insn; insn = NEXT_INSN (insn))\n     {\n-      if (GET_CODE (insn) == INSN\n-\t       && GET_CODE (PATTERN (insn)) == UNSPEC_VOLATILE\n-\t       && XINT (PATTERN (insn), 1) == 2)\n-\tinit_insn_group_barriers ();\n+      if (GET_CODE (insn) == BARRIER)\n+\t{\n+\t  rtx last = prev_active_insn (insn);\n+\n+\t  if (! last)\n+\t    continue;\n+\t  if (GET_CODE (last) == JUMP_INSN\n+\t      && GET_CODE (PATTERN (last)) == ADDR_DIFF_VEC)\n+\t    last = prev_active_insn (last);\n+\t  if (recog_memoized (last) != CODE_FOR_insn_group_barrier)\n+\t    emit_insn_after (gen_insn_group_barrier (GEN_INT (3)), last);\n+\n+\t  init_insn_group_barriers ();\n+\t}\n       else if (INSN_P (insn))\n \t{\n-\t  if (group_barrier_needed_p (insn))\n+\t  if (recog_memoized (insn) == CODE_FOR_insn_group_barrier)\n+\t    init_insn_group_barriers ();\n+\t  else if (group_barrier_needed_p (insn))\n \t    {\n \t      emit_insn_before (gen_insn_group_barrier (GEN_INT (3)), insn);\n \t      init_insn_group_barriers ();"}]}