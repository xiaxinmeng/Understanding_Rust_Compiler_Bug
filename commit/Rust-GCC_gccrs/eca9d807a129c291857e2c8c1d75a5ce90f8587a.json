{"sha": "eca9d807a129c291857e2c8c1d75a5ce90f8587a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNhOWQ4MDdhMTI5YzI5MTg1N2UyYzhjMWQ3NWE1Y2U5MGY4NTg3YQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-11-13T06:58:12Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-11-13T06:58:12Z"}, "message": "linux-unwind.h (x86_frob_update_context): New function.\n\n\t* config/i386/linux-unwind.h (x86_frob_update_context): New function.\n\t(MD_FROB_UPDATE_CONTEXT): Define.\n\nFrom-SVN: r154141", "tree": {"sha": "96083afa0300d0851a99268d059db52913306c75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96083afa0300d0851a99268d059db52913306c75"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eca9d807a129c291857e2c8c1d75a5ce90f8587a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eca9d807a129c291857e2c8c1d75a5ce90f8587a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eca9d807a129c291857e2c8c1d75a5ce90f8587a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eca9d807a129c291857e2c8c1d75a5ce90f8587a/comments", "author": null, "committer": null, "parents": [{"sha": "7274deff738213914a31413a9d1a671020694175", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7274deff738213914a31413a9d1a671020694175", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7274deff738213914a31413a9d1a671020694175"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "238cd22a078bb4169c158ac35f38eda7ffcd74de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eca9d807a129c291857e2c8c1d75a5ce90f8587a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eca9d807a129c291857e2c8c1d75a5ce90f8587a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eca9d807a129c291857e2c8c1d75a5ce90f8587a", "patch": "@@ -1,3 +1,8 @@\n+2009-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* config/i386/linux-unwind.h (x86_frob_update_context): New function.\n+\t(MD_FROB_UPDATE_CONTEXT): Define.\n+\n 2009-11-12  Eric Botcazou  <ebotcazou@adacore.com>\n             Laurent GUERBY  <laurent@guerby.net>\n "}, {"sha": "36ee3709261777e867d21322d1d2889e719b4c41", "filename": "gcc/config/i386/linux-unwind.h", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eca9d807a129c291857e2c8c1d75a5ce90f8587a/gcc%2Fconfig%2Fi386%2Flinux-unwind.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eca9d807a129c291857e2c8c1d75a5ce90f8587a/gcc%2Fconfig%2Fi386%2Flinux-unwind.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Flinux-unwind.h?ref=eca9d807a129c291857e2c8c1d75a5ce90f8587a", "patch": "@@ -172,6 +172,25 @@ x86_fallback_frame_state (struct _Unwind_Context *context,\n   fs->signal_frame = 1;\n   return _URC_NO_REASON;\n }\n+\n+#define MD_FROB_UPDATE_CONTEXT x86_frob_update_context\n+\n+/* Fix up for kernels that have vDSO, but don't have S flag in it.  */\n+\n+static void\n+x86_frob_update_context (struct _Unwind_Context *context,\n+\t\t\t _Unwind_FrameState *fs ATTRIBUTE_UNUSED)\n+{\n+  unsigned char *pc = context->ra;\n+\n+  /* movl $__NR_rt_sigreturn,%eax ; {int $0x80 | syscall}  */\n+  if (*(unsigned char *)(pc+0) == 0xb8\n+      && *(unsigned int *)(pc+1) == 173\n+      && (*(unsigned short *)(pc+5) == 0x80cd\n+\t  || *(unsigned short *)(pc+5) == 0x050f))\n+    _Unwind_SetSignalFrame (context, 1);\n+}\n+\n #endif /* not glibc 2.0 */\n #endif /* ifdef __x86_64__  */\n #endif /* ifdef inhibit_libc  */"}]}