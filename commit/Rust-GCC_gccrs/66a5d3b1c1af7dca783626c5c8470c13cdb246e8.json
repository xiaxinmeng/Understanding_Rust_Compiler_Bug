{"sha": "66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjZhNWQzYjFjMWFmN2RjYTc4MzYyNmM1Yzg0NzBjMTNjZGIyNDZlOA==", "commit": {"author": {"name": "Frank Ch. Eigler", "email": "fche@redhat.com", "date": "2004-09-07T21:52:52Z"}, "committer": {"name": "Frank Ch. Eigler", "email": "fche@gcc.gnu.org", "date": "2004-09-07T21:52:52Z"}, "message": "configure.ac: Look for pwd.h, grp.h, netdb.h headers and functions.\n\n2004-09-07  Frank Ch. Eigler  <fche@redhat.com>\n\n\t* configure.ac: Look for pwd.h, grp.h, netdb.h headers and functions.\n\t* mf-hooks2.c (strerror): Unregister previous string returned by\n\tprevious strerror.\n\t(getlogin,cuserid,getpwnam,getpwuid,getgrnam,getgrgid): New wrappers.\n\t(getservent,getservbyname,getservbyport,gai_strerror): Ditto.\n\t* mf-runtime.h.in: Add redefine_extname pragmas for them all.\n\t* mf-runtime.c (__mf_describe_object): Clarify object life status.\n\t* testsuite/libmudflap.c/pass48-frag.c, pass49-frag.c, fail32-frag.c:\n\tNew tests.\n\t* configure, config.h.in: Regenerated.\n\nFrom-SVN: r87160", "tree": {"sha": "60266192b1071f716dc829f1db1f87f97112b81a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60266192b1071f716dc829f1db1f87f97112b81a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/comments", "author": {"login": "fche", "id": 588885, "node_id": "MDQ6VXNlcjU4ODg4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/588885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fche", "html_url": "https://github.com/fche", "followers_url": "https://api.github.com/users/fche/followers", "following_url": "https://api.github.com/users/fche/following{/other_user}", "gists_url": "https://api.github.com/users/fche/gists{/gist_id}", "starred_url": "https://api.github.com/users/fche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fche/subscriptions", "organizations_url": "https://api.github.com/users/fche/orgs", "repos_url": "https://api.github.com/users/fche/repos", "events_url": "https://api.github.com/users/fche/events{/privacy}", "received_events_url": "https://api.github.com/users/fche/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ec666d23ca0f507e0940bcdf0b65848bceb1af30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec666d23ca0f507e0940bcdf0b65848bceb1af30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec666d23ca0f507e0940bcdf0b65848bceb1af30"}], "stats": {"total": 742, "additions": 696, "deletions": 46}, "files": [{"sha": "2a3e16649c06d21b889f4b729c570e2454d0fa60", "filename": "libmudflap/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2FChangeLog?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -1,3 +1,16 @@\n+2004-09-07  Frank Ch. Eigler  <fche@redhat.com>\n+\n+\t* configure.ac: Look for pwd.h, grp.h, netdb.h headers and functions.\n+\t* mf-hooks2.c (strerror): Unregister previous string returned by\n+\tprevious strerror.\n+\t(getlogin,cuserid,getpwnam,getpwuid,getgrnam,getgrgid): New wrappers.\n+\t(getservent,getservbyname,getservbyport,gai_strerror): Ditto.\n+\t* mf-runtime.h.in: Add redefine_extname pragmas for them all.\n+\t* mf-runtime.c (__mf_describe_object): Clarify object life status.\n+\t* testsuite/libmudflap.c/pass48-frag.c, pass49-frag.c, fail32-frag.c:\n+\tNew tests.\n+\t* configure, config.h.in: Regenerated.\n+\n 2004-08-03  Dale Johannesen  <dalej@apple.com>\n \n          * mf-runtime.c: Conditionalize POSIX_SOURCE for Darwin."}, {"sha": "2372c226aa90dd383ebbfafb4ace10e57ee7b589", "filename": "libmudflap/config.h.in", "status": "modified", "additions": 63, "deletions": 0, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Fconfig.h.in?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -9,6 +9,12 @@\n /* Define to 1 if you have the <ctype.h> header file. */\n #undef HAVE_CTYPE_H\n \n+/* Define to 1 if you have the `cuserid' function. */\n+#undef HAVE_CUSERID\n+\n+/* Define to 1 if you have the <dirent.h> header file. */\n+#undef HAVE_DIRENT_H\n+\n /* Define to 1 if you have the <dlfcn.h> header file. */\n #undef HAVE_DLFCN_H\n \n@@ -27,9 +33,63 @@\n /* Define to 1 if you have the `ftello64' function. */\n #undef HAVE_FTELLO64\n \n+/* Define to 1 if you have the `gai_strerror' function. */\n+#undef HAVE_GAI_STRERROR\n+\n+/* Define to 1 if you have the `getaddrinfo' function. */\n+#undef HAVE_GETADDRINFO\n+\n+/* Define to 1 if you have the `getgrent' function. */\n+#undef HAVE_GETGRENT\n+\n+/* Define to 1 if you have the `getgrgid' function. */\n+#undef HAVE_GETGRGID\n+\n+/* Define to 1 if you have the `getgrgid_r' function. */\n+#undef HAVE_GETGRGID_R\n+\n+/* Define to 1 if you have the `getgrnam' function. */\n+#undef HAVE_GETGRNAM\n+\n+/* Define to 1 if you have the `getgrnam_r' function. */\n+#undef HAVE_GETGRNAM_R\n+\n+/* Define to 1 if you have the `getlogin' function. */\n+#undef HAVE_GETLOGIN\n+\n+/* Define to 1 if you have the `getlogin_r' function. */\n+#undef HAVE_GETLOGIN_R\n+\n+/* Define to 1 if you have the `getpwent' function. */\n+#undef HAVE_GETPWENT\n+\n+/* Define to 1 if you have the `getpwnam' function. */\n+#undef HAVE_GETPWNAM\n+\n+/* Define to 1 if you have the `getpwnam_r' function. */\n+#undef HAVE_GETPWNAM_R\n+\n+/* Define to 1 if you have the `getpwuid' function. */\n+#undef HAVE_GETPWUID\n+\n+/* Define to 1 if you have the `getpwuid_r' function. */\n+#undef HAVE_GETPWUID_R\n+\n+/* Define to 1 if you have the `getservbyname' function. */\n+#undef HAVE_GETSERVBYNAME\n+\n+/* Define to 1 if you have the `getservbyport' function. */\n+#undef HAVE_GETSERVBYPORT\n+\n+/* Define to 1 if you have the `getservent' function. */\n+#undef HAVE_GETSERVENT\n+\n /* Define to 1 if you have the `gettimeofday' function. */\n #undef HAVE_GETTIMEOFDAY\n \n+/* Define to 1 if you have the <grp.h> header file. */\n+#undef HAVE_GRP_H\n+\n /* Define to 1 if you have the <inttypes.h> header file. */\n #undef HAVE_INTTYPES_H\n \n@@ -51,6 +111,9 @@\n /* define if you have <pthread.h> */\n #undef HAVE_PTHREAD_H\n \n+/* Define to 1 if you have the <pwd.h> header file. */\n+#undef HAVE_PWD_H\n+\n /* Define to 1 if you have the `sethostname' function. */\n #undef HAVE_SETHOSTNAME\n "}, {"sha": "5672cad090aa82463b9dd07803e3064e251809a9", "filename": "libmudflap/configure", "status": "modified", "additions": 378, "deletions": 32, "changes": 410, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Fconfigure?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -957,7 +957,7 @@ esac\n     else\n       echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2\n     fi\n-    cd \"$ac_popdir\"\n+    cd $ac_popdir\n   done\n fi\n \n@@ -2488,7 +2488,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2546,7 +2547,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2662,7 +2664,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2716,7 +2719,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2761,7 +2765,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2805,7 +2810,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3294,7 +3300,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3367,7 +3374,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3537,7 +3545,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3582,7 +3591,9 @@ done\n \n \n \n-for ac_header in stdint.h execinfo.h signal.h dlfcn.h dirent.h \\\n+\n+\n+for ac_header in stdint.h execinfo.h signal.h dlfcn.h dirent.h pwd.h grp.h \\\n   netdb.h sys/ipc.h sys/sem.h sys/shm.h sys/wait.h sys/socket.h ctype.h\n do\n as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n@@ -3616,7 +3627,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3803,7 +3815,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3908,7 +3921,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4014,7 +4028,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4118,7 +4133,330 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  eval \"$as_ac_var=yes\"\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+eval \"$as_ac_var=no\"\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_var'}'`\" >&6\n+if test `eval echo '${'$as_ac_var'}'` = yes; then\n+  cat >>confdefs.h <<_ACEOF\n+#define `echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+done\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+for ac_func in getlogin cuserid getpwnam getpwuid getpwent getgrnam getgrgid getgrent\n+do\n+as_ac_var=`echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n+echo \"$as_me:$LINENO: checking for $ac_func\" >&5\n+echo $ECHO_N \"checking for $ac_func... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_var+set}\\\" = set\"; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.\n+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */\n+#define $ac_func innocuous_$ac_func\n+\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char $ac_func (); below.\n+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+    <limits.h> exists even on freestanding compilers.  */\n+\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\n+#undef $ac_func\n+\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+#ifdef __cplusplus\n+extern \"C\"\n+{\n+#endif\n+/* We use char because int might match the return type of a gcc2\n+   builtin and then its argument prototype would still apply.  */\n+char $ac_func ();\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)\n+choke me\n+#else\n+char (*f) () = $ac_func;\n+#endif\n+#ifdef __cplusplus\n+}\n+#endif\n+\n+int\n+main ()\n+{\n+return f != $ac_func;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  eval \"$as_ac_var=yes\"\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+eval \"$as_ac_var=no\"\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_var'}'`\" >&6\n+if test `eval echo '${'$as_ac_var'}'` = yes; then\n+  cat >>confdefs.h <<_ACEOF\n+#define `echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+done\n+\n+\n+\n+\n+\n+\n+for ac_func in getlogin_r getpwnam_r getpwuid_r getgrnam_r getgrgid_r\n+do\n+as_ac_var=`echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n+echo \"$as_me:$LINENO: checking for $ac_func\" >&5\n+echo $ECHO_N \"checking for $ac_func... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_var+set}\\\" = set\"; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.\n+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */\n+#define $ac_func innocuous_$ac_func\n+\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char $ac_func (); below.\n+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+    <limits.h> exists even on freestanding compilers.  */\n+\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\n+#undef $ac_func\n+\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+#ifdef __cplusplus\n+extern \"C\"\n+{\n+#endif\n+/* We use char because int might match the return type of a gcc2\n+   builtin and then its argument prototype would still apply.  */\n+char $ac_func ();\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)\n+choke me\n+#else\n+char (*f) () = $ac_func;\n+#endif\n+#ifdef __cplusplus\n+}\n+#endif\n+\n+int\n+main ()\n+{\n+return f != $ac_func;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  eval \"$as_ac_var=yes\"\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+eval \"$as_ac_var=no\"\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_var'}'`\" >&6\n+if test `eval echo '${'$as_ac_var'}'` = yes; then\n+  cat >>confdefs.h <<_ACEOF\n+#define `echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+done\n+\n+\n+\n+\n+\n+\n+for ac_func in getservent getservbyname getservbyport getaddrinfo gai_strerror\n+do\n+as_ac_var=`echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n+echo \"$as_me:$LINENO: checking for $ac_func\" >&5\n+echo $ECHO_N \"checking for $ac_func... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_var+set}\\\" = set\"; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.\n+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */\n+#define $ac_func innocuous_$ac_func\n+\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char $ac_func (); below.\n+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+    <limits.h> exists even on freestanding compilers.  */\n+\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\n+#undef $ac_func\n+\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+#ifdef __cplusplus\n+extern \"C\"\n+{\n+#endif\n+/* We use char because int might match the return type of a gcc2\n+   builtin and then its argument prototype would still apply.  */\n+char $ac_func ();\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)\n+choke me\n+#else\n+char (*f) () = $ac_func;\n+#endif\n+#ifdef __cplusplus\n+}\n+#endif\n+\n+int\n+main ()\n+{\n+return f != $ac_func;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4177,7 +4515,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4235,7 +4574,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5004,7 +5344,7 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 5007 \"configure\"' > conftest.$ac_ext\n+  echo '#line 5347 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -5132,7 +5472,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5308,7 +5649,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5450,7 +5792,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5510,7 +5853,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5689,7 +6033,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5838,7 +6183,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6016,7 +6362,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6962,6 +7309,11 @@ esac\n   *) ac_INSTALL=$ac_top_builddir$INSTALL ;;\n   esac\n \n+  if test x\"$ac_file\" != x-; then\n+    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n+echo \"$as_me: creating $ac_file\" >&6;}\n+    rm -f \"$ac_file\"\n+  fi\n   # Let's still pretend it is `configure' which instantiates (i.e., don't\n   # use $as_me), people would be surprised to read:\n   #    /* config.h.  Generated by config.status.  */\n@@ -7000,12 +7352,6 @@ echo \"$as_me: error: cannot find input file: $f\" >&2;}\n \t fi;;\n       esac\n     done` || { (exit 1); exit 1; }\n-\n-  if test x\"$ac_file\" != x-; then\n-    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n-echo \"$as_me: creating $ac_file\" >&6;}\n-    rm -f \"$ac_file\"\n-  fi\n _ACEOF\n cat >>$CONFIG_STATUS <<_ACEOF\n   sed \"$ac_vpsub"}, {"sha": "7c7b8c76a55b4c1dacf2faad30d163eba027bd24", "filename": "libmudflap/configure.ac", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Fconfigure.ac?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -59,7 +59,7 @@ AC_TRY_COMPILE([\n [AC_MSG_RESULT(no)\n enable_shared=no])\n \n-AC_CHECK_HEADERS(stdint.h execinfo.h signal.h dlfcn.h dirent.h \\\n+AC_CHECK_HEADERS(stdint.h execinfo.h signal.h dlfcn.h dirent.h pwd.h grp.h \\\n   netdb.h sys/ipc.h sys/sem.h sys/shm.h sys/wait.h sys/socket.h ctype.h)\n AC_CHECK_FUNCS(backtrace backtrace_symbols gettimeofday signal)\n \n@@ -72,6 +72,11 @@ AC_CHECK_FUNCS(strnlen memrchr strncpy memmem sethostname)\n dnl Check for glibc ctype functions\n AC_CHECK_FUNCS(__ctype_b_loc __ctype_tolower_loc __ctype_toupper_loc)\n \n+dnl Check for pwd.h / grp.h family of functions\n+AC_CHECK_FUNCS(getlogin cuserid getpwnam getpwuid getpwent getgrnam getgrgid getgrent)\n+AC_CHECK_FUNCS(getlogin_r getpwnam_r getpwuid_r getgrnam_r getgrgid_r)\n+AC_CHECK_FUNCS(getservent getservbyname getservbyport getaddrinfo gai_strerror)\n+\n AC_TRY_COMPILE([#include <sys/types.h>\n #include <sys/ipc.h>\n #include <sys/sem.h>],[union semun foo;], [mf_have_semun=1], [mf_have_semun=0])"}, {"sha": "640b78e6be8d2808e0a8cb81116b41671664435a", "filename": "libmudflap/mf-hooks2.c", "status": "modified", "additions": 160, "deletions": 11, "changes": 171, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fmf-hooks2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fmf-hooks2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Fmf-hooks2.c?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -84,7 +84,12 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #ifdef HAVE_SYS_SHM_H\n #include <sys/shm.h>\n #endif\n-\n+#ifdef HAVE_PWD_H\n+#include <pwd.h>\n+#endif\n+#ifdef HAVE_GRP_H\n+#include <grp.h>\n+#endif\n \n #include \"mf-runtime.h\"\n #include \"mf-impl.h\"\n@@ -524,7 +529,6 @@ WRAPPER2(struct tm*, gmtime, const time_t *timep)\n /* The following indicate if the result of the corresponding function\n  * should be explicitly un/registered by the wrapper\n */\n-#define MF_REGISTER_strerror\t\t__MF_TYPE_STATIC\n #undef  MF_REGISTER_fopen\n #define MF_RESULT_SIZE_fopen\t\t(sizeof (FILE))\n #undef  MF_REGISTER_opendir\n@@ -552,17 +556,15 @@ WRAPPER2(time_t, time, time_t *timep)\n WRAPPER2(char *, strerror, int errnum)\n {\n   char *p;\n-  size_t n;\n+  static char * last_strerror = NULL;\n+\n   TRACE (\"%s\\n\", __PRETTY_FUNCTION__);\n   p = strerror (errnum);\n-  if (NULL != p) {\n-    n = strlen (p);\n-    n = CLAMPADD(n, 1);\n-#ifdef MF_REGISTER_strerror\n-    __mf_register (p, n, MF_REGISTER_strerror, \"strerror result\");\n-#endif\n-    MF_VALIDATE_EXTENT (p, n, __MF_CHECK_WRITE, \"strerror result\");\n-  }\n+  if (last_strerror != NULL)\n+    __mf_unregister (last_strerror, 0, __MF_TYPE_STATIC);\n+  if (NULL != p)\n+    __mf_register (p, strlen (p) + 1, __MF_TYPE_STATIC, \"strerror result\");\n+  last_strerror = p;\n   return p;\n }\n \n@@ -1722,3 +1724,150 @@ WRAPPER2(int **, __ctype_tolower_loc, void)\n   return ptr;\n }\n #endif\n+\n+\n+/* passwd/group related functions.  These register every (static) pointer value returned,\n+   and rely on libmudflap's quiet toleration of duplicate static registrations.  */\n+\n+#ifdef HAVE_GETLOGIN\n+WRAPPER2(char *, getlogin, void)\n+{\n+  char *buf = getlogin ();\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getlogin() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_CUSERID\n+WRAPPER2(char *, cuserid, char * buf)\n+{\n+  if (buf != NULL)\n+    {\n+      MF_VALIDATE_EXTENT(buf, L_cuserid, __MF_CHECK_WRITE,\n+                         \"cuserid destination\");\n+      return cuserid (buf);\n+    }\n+  buf = cuserid (NULL);\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getcuserid() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GETPWNAM\n+WRAPPER2(struct passwd *, getpwnam, const char *name)\n+{\n+  struct passwd *buf;\n+  MF_VALIDATE_EXTENT(name, strlen(name)+1, __MF_CHECK_READ,\n+                     \"getpwnam name\");\n+  buf = getpwnam (name);\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getpw*() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GETPWUID\n+WRAPPER2(struct passwd *, getpwuid, uid_t uid)\n+{\n+  struct passwd *buf;\n+  buf = getpwuid (uid);\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getpw*() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GETGRNAM\n+WRAPPER2(struct group *, getgrnam, const char *name)\n+{\n+  struct group *buf;\n+  MF_VALIDATE_EXTENT(name, strlen(name)+1, __MF_CHECK_READ,\n+                     \"getgrnam name\");\n+  buf = getgrnam (name);\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getgr*() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GETGRGID\n+WRAPPER2(struct group *, getgrgid, uid_t uid)\n+{\n+  struct group *buf;\n+  buf = getgrgid (uid);\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getgr*() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GETSERVENT\n+WRAPPER2(struct servent *, getservent, void)\n+{\n+  struct servent *buf;\n+  buf = getservent ();\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getserv*() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GETSERVBYNAME\n+WRAPPER2(struct servent *, getservbyname, const char *name, const char *proto)\n+{\n+  struct servent *buf;\n+  MF_VALIDATE_EXTENT(name, strlen(name)+1, __MF_CHECK_READ,\n+                     \"getservbyname name\");\n+  MF_VALIDATE_EXTENT(proto, strlen(proto)+1, __MF_CHECK_READ,\n+                     \"getservbyname proto\");\n+  buf = getservbyname (name, proto);\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getserv*() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GETSERVBYPORT\n+WRAPPER2(struct servent *, getservbyport, int port, const char *proto)\n+{\n+  struct servent *buf;\n+  MF_VALIDATE_EXTENT(proto, strlen(proto)+1, __MF_CHECK_READ,\n+                     \"getservbyport proto\");\n+  buf = getservbyport (port, proto);\n+  if (buf != NULL)\n+    __mf_register (buf, sizeof(*buf), __MF_TYPE_STATIC,\n+                   \"getserv*() return\");\n+  return buf;\n+}\n+#endif\n+\n+\n+#ifdef HAVE_GAI_STRERROR\n+WRAPPER2(const char *, gai_strerror, int errcode)\n+{\n+  const char *buf;\n+  buf = gai_strerror (errcode);\n+  if (buf != NULL)\n+    __mf_register ((void *) buf, strlen(buf)+1, __MF_TYPE_STATIC,\n+                   \"gai_strerror() return\");\n+  return buf;\n+}\n+#endif"}, {"sha": "312963b017d9112fccfa5e66d280eba206b517fc", "filename": "libmudflap/mf-runtime.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fmf-runtime.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fmf-runtime.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Fmf-runtime.c?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -1614,21 +1614,23 @@ __mf_describe_object (__mf_object_t *obj)\n   if (__mf_opts.abbreviate && obj->description_epoch == epoch)\n     {\n       fprintf (stderr,\n-               \"mudflap object %p: name=`%s'\\n\",\n+               \"mudflap %sobject %p: name=`%s'\\n\",\n+               (obj->deallocated_p ? \"dead \" : \"\"),\n                (void *) obj, (obj->name ? obj->name : \"\"));\n       return;\n     }\n   else\n     obj->description_epoch = epoch;\n \n   fprintf (stderr,\n-           \"mudflap object %p: name=`%s'\\n\"\n+           \"mudflap %sobject %p: name=`%s'\\n\"\n            \"bounds=[%p,%p] size=%lu area=%s check=%ur/%uw liveness=%u%s\\n\"\n            \"alloc time=%lu.%06lu pc=%p\"\n #ifdef LIBMUDFLAPTH\n            \" thread=%u\"\n #endif\n            \"\\n\",\n+           (obj->deallocated_p ? \"dead \" : \"\"),\n            (void *) obj, (obj->name ? obj->name : \"\"), \n            (void *) obj->low, (void *) obj->high,\n            (unsigned long) (obj->high - obj->low + 1),"}, {"sha": "5630b561b2544c83a12dbe9622e3ce984d228cdf", "filename": "libmudflap/mf-runtime.h.in", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fmf-runtime.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Fmf-runtime.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Fmf-runtime.h.in?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -187,6 +187,16 @@ extern int __mf_set_options (const char *opts);\n #pragma redefine_extname __ctype_b_loc __mfwrap___ctype_b_loc\n #pragma redefine_extname __ctype_toupper_loc __mfwrap___ctype_toupper_loc\n #pragma redefine_extname __ctype_tolower_loc __mfwrap___ctype_tolower_loc\n+#pragma redefine_extname getlogin __mfwrap_getlogin\n+#pragma redefine_extname cuserid __mfwrap_cuserid\n+#pragma redefine_extname getpwnam __mfwrap_getpwnam\n+#pragma redefine_extname getpwuid __mfwrap_getpwuid\n+#pragma redefine_extname getgrnam __mfwrap_getgrnam\n+#pragma redefine_extname getgrgid __mfwrap_getgrgid\n+#pragma redefine_extname getservent __mfwrap_getservent\n+#pragma redefine_extname getservbyname __mfwrap_getservbyname\n+#pragma redefine_extname getservbyport __mfwrap_getservbyport\n+#pragma redefine_extname gai_strerror __mfwrap_gai_strerror\n \n /* Disable glibc macros.  */\n #define __NO_STRING_INLINES"}, {"sha": "2a38237b678c80eafb02a1006be30a44fd828e65", "filename": "libmudflap/testsuite/libmudflap.c/fail32-frag.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Ftestsuite%2Flibmudflap.c%2Ffail32-frag.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Ftestsuite%2Flibmudflap.c%2Ffail32-frag.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2Flibmudflap.c%2Ffail32-frag.c?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -0,0 +1,16 @@\n+void foo (int k)\n+{\n+  volatile int *b = & k;\n+  b++;\n+  *b = 5;\n+}\n+\n+int main ()\n+{\n+  foo (5);\n+  return 0;\n+}\n+/* { dg-output \"mudflap violation 1.*\" } */\n+/* { dg-output \"Nearby object.*\" } */\n+/* { dg-output \"mudflap object.*k\" } */\n+/* { dg-do run { xfail *-*-* } } */"}, {"sha": "3059762a82c31222eb4df6f0063248d892fe60d1", "filename": "libmudflap/testsuite/libmudflap.c/pass48-frag.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Ftestsuite%2Flibmudflap.c%2Fpass48-frag.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Ftestsuite%2Flibmudflap.c%2Fpass48-frag.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2Flibmudflap.c%2Fpass48-frag.c?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -0,0 +1,11 @@\n+void foo (int k)\n+{\n+  volatile int *b = & k;\n+  *b = 5;\n+}\n+\n+int main ()\n+{\n+  foo (5);\n+  return 0;\n+}"}, {"sha": "db7453079a0fae6fb5a887bfd4e33a4f0674e760", "filename": "libmudflap/testsuite/libmudflap.c/pass49-frag.c", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Ftestsuite%2Flibmudflap.c%2Fpass49-frag.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66a5d3b1c1af7dca783626c5c8470c13cdb246e8/libmudflap%2Ftestsuite%2Flibmudflap.c%2Fpass49-frag.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2Flibmudflap.c%2Fpass49-frag.c?ref=66a5d3b1c1af7dca783626c5c8470c13cdb246e8", "patch": "@@ -0,0 +1,35 @@\n+#include <stdlib.h>\n+#include <ctype.h>\n+#include <stdarg.h>\n+\n+int foo (int a, ...)\n+{\n+  va_list args;\n+  char *a1;\n+  int a2;\n+  int k;\n+\n+  va_start (args, a);\n+  for (k = 0; k < a; k++)\n+    {\n+      if ((k % 2) == 0)\n+        {\n+          char *b = va_arg (args, char *);\n+          printf (\"%s\", b);\n+        }\n+      else\n+        {\n+          int b = va_arg (args, int);\n+          printf (\"%d\", b);\n+        }\n+    }\n+  va_end (args);\n+  return a;\n+}\n+\n+int main ()\n+{\n+  foo (7, \"hello \", 5, \" \", 3, \" world \", 9, \"\\n\");\n+  return 0;\n+}\n+/* { dg-output \"hello 5 3 world 9\" } */"}]}