{"sha": "f128e1f3326ab1f24d59110b70e118c95eb76fd5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEyOGUxZjMzMjZhYjFmMjRkNTkxMTBiNzBlMTE4Yzk1ZWI3NmZkNQ==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2003-12-05T14:44:59Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2003-12-05T14:44:59Z"}, "message": "re PR c++/13166 ([DR136] not implemented)\n\n\tPR c++/13166\n\t* parser.c (cp_parser_late_parsing_default_args): Make sure the\n\tcontext is a class before calling push_nested_class and\n\tpop_nested_class.\n\n\t* g++.dg/parse/defarg6.C: New test.\n\nFrom-SVN: r74333", "tree": {"sha": "3d3ab9474c00e9a42836a8ad0de5b8ecae7011d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d3ab9474c00e9a42836a8ad0de5b8ecae7011d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f128e1f3326ab1f24d59110b70e118c95eb76fd5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f128e1f3326ab1f24d59110b70e118c95eb76fd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f128e1f3326ab1f24d59110b70e118c95eb76fd5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f128e1f3326ab1f24d59110b70e118c95eb76fd5/comments", "author": null, "committer": null, "parents": [{"sha": "2a67ff5e9e1a909a2c4a056920abdfadbbe293dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a67ff5e9e1a909a2c4a056920abdfadbbe293dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a67ff5e9e1a909a2c4a056920abdfadbbe293dd"}], "stats": {"total": 39, "additions": 31, "deletions": 8}, "files": [{"sha": "6e2239bbf0b767d6a3d85c368edc0c494c062c0b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f128e1f3326ab1f24d59110b70e118c95eb76fd5", "patch": "@@ -1,3 +1,10 @@\n+2003-12-05  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/13166\n+\t* parser.c (cp_parser_late_parsing_default_args): Make sure the\n+\tcontext is a class before calling push_nested_class and\n+\tpop_nested_class.\n+\n 2003-12-03  James E Wilson  <wilson@specifixinc.com>\n \n \t* g++spec.c (lang_specific_driver): Delete USE_LIBUNWIND_EXCEPTIONS\n@@ -24,15 +31,15 @@\n \n 2003-12-02  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n-\tPR c++/10126\r\n-\t* pt.c (convert_nontype_argument): Handle default conversions\r\n-\twhile converting a pointer to member function.\r\n+\tPR c++/10126\n+\t* pt.c (convert_nontype_argument): Handle default conversions\n+\twhile converting a pointer to member function.\n \n 2003-12-02  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n-\tPR c++/12573\r\n-\t* pt.c (value_dependent_expression_p): Handle COMPONENT_REFs by\r\n-\tlooking into them recursively.\r\n+\tPR c++/12573\n+\t* pt.c (value_dependent_expression_p): Handle COMPONENT_REFs by\n+\tlooking into them recursively.\n \n 2003-12-02  Richard Henderson  <rth@redhat.com>\n "}, {"sha": "5f1b4736b0189aca4bc239754dc075213b5e12a3", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=f128e1f3326ab1f24d59110b70e118c95eb76fd5", "patch": "@@ -14239,10 +14239,10 @@ cp_parser_late_parsing_default_args (cp_parser *parser, tree fn)\n       saved_local_variables_forbidden_p = parser->local_variables_forbidden_p;\n       parser->local_variables_forbidden_p = true;\n        /* Parse the assignment-expression.  */\n-      if (DECL_CONTEXT (fn))\n+      if (DECL_CLASS_SCOPE_P (fn))\n \tpush_nested_class (DECL_CONTEXT (fn));\n       TREE_PURPOSE (parameters) = cp_parser_assignment_expression (parser);\n-      if (DECL_CONTEXT (fn))\n+      if (DECL_CLASS_SCOPE_P (fn))\n \tpop_nested_class ();\n \n        /* Restore saved state.  */"}, {"sha": "376783ee65ef3a3f738cad6d413a647bef08a52c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f128e1f3326ab1f24d59110b70e118c95eb76fd5", "patch": "@@ -1,3 +1,8 @@\n+2003-12-05  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/13166\n+\t* g++.dg/parse/defarg6.C: New test.\n+\n 2003-12-05  Hans-Peter Nilsson  <hp@axis.com>\n \n \tPR target/13256"}, {"sha": "827b605b77eca670af45ca654ac5731220b68302", "filename": "gcc/testsuite/g++.dg/parse/defarg6.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdefarg6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128e1f3326ab1f24d59110b70e118c95eb76fd5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdefarg6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdefarg6.C?ref=f128e1f3326ab1f24d59110b70e118c95eb76fd5", "patch": "@@ -0,0 +1,11 @@\n+// { dg-do compile }\n+\n+// Origin: Falk Hueffner <falk@debian.org>\n+\n+// PR c++/13166: ICE default function argument for friend declaration.\n+\n+namespace sc_dt {\n+    class sc_length_param {\n+\tfriend int compare_unsigned(int if_v_signed = 0) {}\n+    };\n+}"}]}