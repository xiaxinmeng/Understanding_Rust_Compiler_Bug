{"sha": "cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Q0N2RmZDBjNWFiOGVhNjQ2NDQ1NGU3NTc0MGE2NzE1YTE5YTQxZA==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2014-06-25T09:21:59Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2014-06-25T09:21:59Z"}, "message": "v850.c (GHS_default_section_names): Change to const char * type.\n\n\t* config/v850/v850.c (GHS_default_section_names): Change to const\n\tchar * type.\n\t(GHS_current_section_names): Likewise.\n\t(v850_insert_attributes): Do not build strings, just assign the\n\tnames directly.  Change the type of 'chosen_section' to const\n\tchar*.\n\t* config/v850/v850-c.c (ghs_pragma_section): Assign the alias\n\tdirectly to the array entry.\n\t* config/v850/v850.h (GHS_default_section_names): Change to const\n\tchar * type.\n\t(GHS_current_section_names): Likewise.\n\nFrom-SVN: r211972", "tree": {"sha": "dcb67ae11c5c515c729f01554c35f9e907b4014d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dcb67ae11c5c515c729f01554c35f9e907b4014d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "da6f124d8a567e410a2926f1cb4416ca620d271d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da6f124d8a567e410a2926f1cb4416ca620d271d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da6f124d8a567e410a2926f1cb4416ca620d271d"}], "stats": {"total": 39, "additions": 26, "deletions": 13}, "files": [{"sha": "79847e3f7ee7fc162d8e4c2a59d77aab472f4a55", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "patch": "@@ -1,3 +1,17 @@\n+2014-06-25  Nick Clifton  <nickc@redhat.com>\n+\n+\t* config/v850/v850.c (GHS_default_section_names): Change to const\n+\tchar * type.\n+\t(GHS_current_section_names): Likewise.\n+\t(v850_insert_attributes): Do not build strings, just assign the\n+\tnames directly.  Change the type of 'chosen_section' to const\n+\tchar*.\n+\t* config/v850/v850-c.c (ghs_pragma_section): Assign the alias\n+\tdirectly to the array entry.\n+\t* config/v850/v850.h (GHS_default_section_names): Change to const\n+\tchar * type.\n+\t(GHS_current_section_names): Likewise.\n+\n 2014-06-25  Jakub Jelinek  <jakub@redhat.com>\n \n \t* langhooks-def.h (LANG_HOOKS_OMP_CLAUSE_LINEAR_CTOR): Define."}, {"sha": "ffd55e48730eb47f30cef913ececcde935405ffa", "filename": "gcc/config/v850/v850-c.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2Fconfig%2Fv850%2Fv850-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2Fconfig%2Fv850%2Fv850-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850-c.c?ref=cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "patch": "@@ -175,8 +175,7 @@ ghs_pragma_section (cpp_reader * pfile ATTRIBUTE_UNUSED)\n       if (streq (alias, \"default\"))\n \tGHS_current_section_names [kind] = NULL;\n       else\n-\tGHS_current_section_names [kind] =\n-\t  build_string (strlen (alias) + 1, alias);\n+\tGHS_current_section_names [kind] = alias;\n     }\n   while (repeat);\n "}, {"sha": "02b842780b3e46705837419678091ea2589500b7", "filename": "gcc/config/v850/v850.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2Fconfig%2Fv850%2Fv850.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2Fconfig%2Fv850%2Fv850.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850.c?ref=cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "patch": "@@ -54,8 +54,8 @@\n static void v850_print_operand_address (FILE *, rtx);\n \n /* Names of the various data areas used on the v850.  */\n-tree GHS_default_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n-tree GHS_current_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n+const char * GHS_default_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n+const char * GHS_current_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n \n /* Track the current data area set by the data area pragma (which \n    can be nested).  Tested by check_default_data_area.  */\n@@ -2569,19 +2569,19 @@ v850_insert_attributes (tree decl, tree * attr_ptr ATTRIBUTE_UNUSED )\n   if (GHS_default_section_names [(int) GHS_SECTION_KIND_SDATA] == NULL)\n     {\n       GHS_default_section_names [(int) GHS_SECTION_KIND_SDATA]\n-\t= build_string (sizeof (\".sdata\")-1, \".sdata\");\n+\t= \".sdata\";\n \n       GHS_default_section_names [(int) GHS_SECTION_KIND_ROSDATA]\n-\t= build_string (sizeof (\".rosdata\")-1, \".rosdata\");\n+\t= \".rosdata\";\n \n       GHS_default_section_names [(int) GHS_SECTION_KIND_TDATA]\n-\t= build_string (sizeof (\".tdata\")-1, \".tdata\");\n+\t= \".tdata\";\n       \n       GHS_default_section_names [(int) GHS_SECTION_KIND_ZDATA]\n-\t= build_string (sizeof (\".zdata\")-1, \".zdata\");\n+\t= \".zdata\";\n \n       GHS_default_section_names [(int) GHS_SECTION_KIND_ROZDATA]\n-\t= build_string (sizeof (\".rozdata\")-1, \".rozdata\");\n+\t= \".rozdata\";\n     }\n   \n   if (current_function_decl == NULL_TREE\n@@ -2592,7 +2592,7 @@ v850_insert_attributes (tree decl, tree * attr_ptr ATTRIBUTE_UNUSED )\n       && !DECL_SECTION_NAME (decl))\n     {\n       enum GHS_section_kind kind = GHS_SECTION_KIND_DEFAULT;\n-      tree chosen_section;\n+      const char * chosen_section;\n \n       if (TREE_CODE (decl) == FUNCTION_DECL)\n \tkind = GHS_SECTION_KIND_TEXT;"}, {"sha": "5df3c1ca5db6fe417529ffd0854500790a659a46", "filename": "gcc/config/v850/v850.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2Fconfig%2Fv850%2Fv850.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd47dfd0c5ab8ea6464454e75740a6715a19a41d/gcc%2Fconfig%2Fv850%2Fv850.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850.h?ref=cd47dfd0c5ab8ea6464454e75740a6715a19a41d", "patch": "@@ -916,7 +916,7 @@ typedef enum\n    For the *normal* section kinds (like .data, .text, etc.) we do not\n    want to explicitly force the name of these sections, but would rather\n    let the linker (or at least the back end) choose the name of the \n-   section, UNLESS the user has force a specific name for these section\n+   section, UNLESS the user has forced a specific name for these section\n    kinds.  To accomplish this set the name in ghs_default_section_names\n    to null.  */\n \n@@ -952,8 +952,8 @@ typedef struct data_area_stack_element\n extern data_area_stack_element * data_area_stack;\n \n /* Names of the various data areas used on the v850.  */\n-extern tree GHS_default_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n-extern tree GHS_current_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n+extern const char * GHS_default_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n+extern const char * GHS_current_section_names [(int) COUNT_OF_GHS_SECTION_KINDS];\n \n /* The assembler op to start the file.  */\n "}]}