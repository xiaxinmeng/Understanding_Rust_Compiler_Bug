{"sha": "883dd4295969d4192a9af9353194cb43f762f039", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODgzZGQ0Mjk1OTY5ZDQxOTJhOWFmOTM1MzE5NGNiNDNmNzYyZjAzOQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-04-18T22:19:27Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-04-18T22:19:27Z"}, "message": "correct memory leaks in namelist code for derived types\n\nFrom-SVN: r98352", "tree": {"sha": "fd3e37aa3d34033b34b8ed61a0800230c47a3882", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd3e37aa3d34033b34b8ed61a0800230c47a3882"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/883dd4295969d4192a9af9353194cb43f762f039", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/883dd4295969d4192a9af9353194cb43f762f039", "html_url": "https://github.com/Rust-GCC/gccrs/commit/883dd4295969d4192a9af9353194cb43f762f039", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/883dd4295969d4192a9af9353194cb43f762f039/comments", "author": null, "committer": null, "parents": [{"sha": "8a731165af9563f227905b19c9c3c9ca58e2f972", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a731165af9563f227905b19c9c3c9ca58e2f972", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a731165af9563f227905b19c9c3c9ca58e2f972"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "d0dc7f179e6dbc213261bb4aafc126394a1ae4f4", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/883dd4295969d4192a9af9353194cb43f762f039/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/883dd4295969d4192a9af9353194cb43f762f039/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=883dd4295969d4192a9af9353194cb43f762f039", "patch": "@@ -1,3 +1,8 @@\n+2005-04-18 Paul Thomas <pault@gcc.gnu.org>\n+\n+\t* io/list_read.c (nml_touch_nodes, nml_read_obj,\n+\tnml_get_obj_data): Fix memory leaks in code for derived types.\n+\n 2005-04-11  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \tPR libfortran/20950\n@@ -16,11 +21,11 @@\n \n 2005-04-17 Paul Thomas <pault@gcc.gnu.org>\n \n-* io/list_read.c (eat_separator): at_eol = 1 replaced(zapped at some time?).\n+\t* io/list_read.c (eat_separator): at_eol = 1 replaced\n+\t(zapped at some time?).\n \n 2005-04-17 Paul Thomas <pault@gcc.gnu.org>\n \n-\n \tPR libgfortran/12884\n \tPR libgfortran/17285\n \tPR libgfortran/18122"}, {"sha": "bc592ddcc1269d6cfbf5953f974577fbace872b8", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/883dd4295969d4192a9af9353194cb43f762f039/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/883dd4295969d4192a9af9353194cb43f762f039/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=883dd4295969d4192a9af9353194cb43f762f039", "patch": "@@ -1673,6 +1673,7 @@ nml_touch_nodes (namelist_info * nl)\n       else\n \tbreak;\n     }\n+  free_mem (ext_name);\n   return;\n }\n \n@@ -1914,10 +1915,16 @@ nml_read_obj (namelist_info * nl, index_type offset)\n \t      {\n \n \t\tif (nml_read_obj (cmp, (index_type)(pdata - nl->mem_pos)) == FAILURE)\n-\t\t  return FAILURE;\n+\t\t  {\n+\t\t    free_mem (obj_name);\n+\t\t    return FAILURE;\n+\t\t  }\n \n \t\tif (input_complete)\n-\t\t  return SUCCESS;\n+\t\t  {\n+\t\t    free_mem (obj_name);\n+\t\t    return SUCCESS;\n+\t\t  }\n \t      }\n \n \t    free_mem (obj_name);\n@@ -2105,6 +2112,7 @@ nml_get_obj_data (void)\n       strcpy (ext_name, root_nl->var_name);\n       strcat (ext_name, saved_string);\n       nl = find_nml_node (ext_name);\n+      free_mem (ext_name);\n     }\n   else\n     nl = find_nml_node (saved_string);"}]}