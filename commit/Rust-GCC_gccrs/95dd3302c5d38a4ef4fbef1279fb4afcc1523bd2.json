{"sha": "95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTVkZDMzMDJjNWQzOGE0ZWY0ZmJlZjEyNzlmYjRhZmNjMTUyM2JkMg==", "commit": {"author": {"name": "Cyrille Comar", "email": "comar@adacore.com", "date": "2007-08-14T08:49:45Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-08-14T08:49:45Z"}, "message": "s-finimp.adb (Detach_From_Final_List): make this procedure idempotent since it is potentially used in cases implying...\n\n2007-08-14  Cyrille Comar  <comar@adacore.com>\n\n\t* s-finimp.adb (Detach_From_Final_List): make this procedure idempotent\n\tsince it is potentially used in cases implying double finalization of\n\tthe same object.\n\nFrom-SVN: r127462", "tree": {"sha": "60449c36c76f63d43a8f115f25698f7a80ff79d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60449c36c76f63d43a8f115f25698f7a80ff79d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2/comments", "author": {"login": "CyrilleComar", "id": 18616717, "node_id": "MDQ6VXNlcjE4NjE2NzE3", "avatar_url": "https://avatars.githubusercontent.com/u/18616717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CyrilleComar", "html_url": "https://github.com/CyrilleComar", "followers_url": "https://api.github.com/users/CyrilleComar/followers", "following_url": "https://api.github.com/users/CyrilleComar/following{/other_user}", "gists_url": "https://api.github.com/users/CyrilleComar/gists{/gist_id}", "starred_url": "https://api.github.com/users/CyrilleComar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CyrilleComar/subscriptions", "organizations_url": "https://api.github.com/users/CyrilleComar/orgs", "repos_url": "https://api.github.com/users/CyrilleComar/repos", "events_url": "https://api.github.com/users/CyrilleComar/events{/privacy}", "received_events_url": "https://api.github.com/users/CyrilleComar/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2353aeebc50124bc27a9d65d09bc696cca7cd19f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2353aeebc50124bc27a9d65d09bc696cca7cd19f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2353aeebc50124bc27a9d65d09bc696cca7cd19f"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "4ed7c6ce1e889870758f0796e956144c35ce53ee", "filename": "gcc/ada/s-finimp.adb", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2/gcc%2Fada%2Fs-finimp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2/gcc%2Fada%2Fs-finimp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-finimp.adb?ref=95dd3302c5d38a4ef4fbef1279fb4afcc1523bd2", "patch": "@@ -258,7 +258,7 @@ package body System.Finalization_Implementation is\n    -----------------------------\n \n    --  We know that the detach object is neither at the beginning nor at the\n-   --  end of the list, thank's to the dummy First and Last Elements but the\n+   --  end of the list, thanks to the dummy First and Last Elements, but the\n    --  object may not be attached at all if it is Finalize_Storage_Only\n \n    procedure Detach_From_Final_List (Obj : in out Finalizable) is\n@@ -273,6 +273,13 @@ package body System.Finalization_Implementation is\n          SSL.Lock_Task.all;\n          Obj.Next.Prev := Obj.Prev;\n          Obj.Prev.Next := Obj.Next;\n+\n+         --  Reset the pointers so that a new finalization of the same object\n+         --  has no effect on the finalization list.\n+\n+         Obj.Next := null;\n+         Obj.Prev := null;\n+\n          SSL.Unlock_Task.all;\n       end if;\n "}]}