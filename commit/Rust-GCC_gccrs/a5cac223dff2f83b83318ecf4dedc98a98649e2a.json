{"sha": "a5cac223dff2f83b83318ecf4dedc98a98649e2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVjYWMyMjNkZmYyZjgzYjgzMzE4ZWNmNGRlZGM5OGE5ODY0OWUyYQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2020-05-07T18:00:18Z"}, "committer": {"name": "Jeff Law", "email": "law@torsion.usersys.redhat.com", "date": "2020-05-07T18:00:18Z"}, "message": "Fix bogus calls to set_rtx_cost.\n\n\t* tree-ssa-reassoc.c (optimize_range_tests_to_bit_test): Replace\n\tset_rtx_cost with set_src_cost.\n\t* tree-switch-conversion.c (bit_test_cluster::emit): Likewise.", "tree": {"sha": "08cd611e8da5b2f764849a448ae2bbece4116235", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08cd611e8da5b2f764849a448ae2bbece4116235"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5cac223dff2f83b83318ecf4dedc98a98649e2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5cac223dff2f83b83318ecf4dedc98a98649e2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5cac223dff2f83b83318ecf4dedc98a98649e2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5cac223dff2f83b83318ecf4dedc98a98649e2a/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3807f286eff75cb0e4af924c3ee9e02add23e12e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3807f286eff75cb0e4af924c3ee9e02add23e12e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3807f286eff75cb0e4af924c3ee9e02add23e12e"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "0a30ea3a1849aea4f3cfdd05c263ec38a8cdf02e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cac223dff2f83b83318ecf4dedc98a98649e2a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cac223dff2f83b83318ecf4dedc98a98649e2a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a5cac223dff2f83b83318ecf4dedc98a98649e2a", "patch": "@@ -1,3 +1,9 @@\n+2020-05-07  Alan Modra  <amodra@gmail.com>\n+\n+\t* tree-ssa-reassoc.c (optimize_range_tests_to_bit_test): Replace\n+\tset_rtx_cost with set_src_cost.\n+\t* tree-switch-conversion.c (bit_test_cluster::emit): Likewise.\n+\n 2020-05-07  Kewen Lin  <linkw@gcc.gnu.org>\n \n \t* tree-vect-stmts.c (vectorizable_load): Check alignment to avoid"}, {"sha": "af8faf2e6ea300e28280b2620ce27a47dd0f7d74", "filename": "gcc/tree-ssa-reassoc.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cac223dff2f83b83318ecf4dedc98a98649e2a/gcc%2Ftree-ssa-reassoc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cac223dff2f83b83318ecf4dedc98a98649e2a/gcc%2Ftree-ssa-reassoc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-reassoc.c?ref=a5cac223dff2f83b83318ecf4dedc98a98649e2a", "patch": "@@ -3208,8 +3208,9 @@ optimize_range_tests_to_bit_test (enum tree_code opcode, int first, int length,\n \t      HOST_WIDE_INT m = tree_to_uhwi (lowi);\n \t      rtx reg = gen_raw_REG (word_mode, 10000);\n \t      bool speed_p = optimize_bb_for_speed_p (gimple_bb (stmt));\n-\t      cost_diff = set_rtx_cost (gen_rtx_PLUS (word_mode, reg,\n-\t\t\t\t\t\t      GEN_INT (-m)), speed_p);\n+\t      cost_diff = set_src_cost (gen_rtx_PLUS (word_mode, reg,\n+\t\t\t\t\t\t      GEN_INT (-m)),\n+\t\t\t\t\tword_mode, speed_p);\n \t      rtx r = immed_wide_int_const (mask, word_mode);\n \t      cost_diff += set_src_cost (gen_rtx_AND (word_mode, reg, r),\n \t\t\t\t\t word_mode, speed_p);"}, {"sha": "4b435941d127cfbca0965661cd9063d2850f2e9a", "filename": "gcc/tree-switch-conversion.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cac223dff2f83b83318ecf4dedc98a98649e2a/gcc%2Ftree-switch-conversion.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cac223dff2f83b83318ecf4dedc98a98649e2a/gcc%2Ftree-switch-conversion.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-switch-conversion.c?ref=a5cac223dff2f83b83318ecf4dedc98a98649e2a", "patch": "@@ -1541,8 +1541,9 @@ bit_test_cluster::emit (tree index_expr, tree index_type,\n       HOST_WIDE_INT m = tree_to_uhwi (minval);\n       rtx reg = gen_raw_REG (word_mode, 10000);\n       bool speed_p = optimize_insn_for_speed_p ();\n-      cost_diff = set_rtx_cost (gen_rtx_PLUS (word_mode, reg,\n-\t\t\t\t\t      GEN_INT (-m)), speed_p);\n+      cost_diff = set_src_cost (gen_rtx_PLUS (word_mode, reg,\n+\t\t\t\t\t      GEN_INT (-m)),\n+\t\t\t\tword_mode, speed_p);\n       for (i = 0; i < count; i++)\n \t{\n \t  rtx r = immed_wide_int_const (test[i].mask, word_mode);"}]}