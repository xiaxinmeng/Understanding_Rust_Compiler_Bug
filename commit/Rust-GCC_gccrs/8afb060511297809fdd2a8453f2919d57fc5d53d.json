{"sha": "8afb060511297809fdd2a8453f2919d57fc5d53d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGFmYjA2MDUxMTI5NzgwOWZkZDJhODQ1M2YyOTE5ZDU3ZmM1ZDUzZA==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-11-18T22:00:12Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-11-18T22:00:12Z"}, "message": "re PR target/37362 (Bootstrap broken on mipsisa64r2-linux-gcc)\n\n\tPR target/37362\n\t* config/mips/mips.md (move_doubleword_fpr<mode>): Check that \"high\"\n\tis a register or zero operand in the correct mode before generating\n\tmtch1 insn or a register operand in the correct mode before generating\n\tmfch1 insn.\n\t(mtch1<mode>): Correct operand 1 predicate to reg_or_0_operand.\n\ntestsuite/ChangeLog:\n\n\tPR target/37362\n\t* gcc.target/mips/pr37362.c: New test.\n\nFrom-SVN: r141978", "tree": {"sha": "6493cf4ded1ea6c67dad3803b2c68db31a8f9fa6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6493cf4ded1ea6c67dad3803b2c68db31a8f9fa6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8afb060511297809fdd2a8453f2919d57fc5d53d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8afb060511297809fdd2a8453f2919d57fc5d53d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8afb060511297809fdd2a8453f2919d57fc5d53d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8afb060511297809fdd2a8453f2919d57fc5d53d/comments", "author": null, "committer": null, "parents": [{"sha": "0a4a51c75b941c517d8ac26dfdd92469bc0f621a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a4a51c75b941c517d8ac26dfdd92469bc0f621a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a4a51c75b941c517d8ac26dfdd92469bc0f621a"}], "stats": {"total": 49, "additions": 40, "deletions": 9}, "files": [{"sha": "a32aa1297a8ee8bc983d97300405e73cb0407498", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8afb060511297809fdd2a8453f2919d57fc5d53d", "patch": "@@ -1,3 +1,12 @@\n+2008-11-18  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/37362\n+\t* config/mips/mips.md (move_doubleword_fpr<mode>): Check that \"high\"\n+\tis a register or zero operand in the correct mode before generating\n+\tmtch1 insn or a register operand in the correct mode before generating\n+\tmfch1 insn.\n+\t(mtch1<mode>): Correct operand 1 predicate to reg_or_0_operand.\n+\n 2008-11-18  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* config.gcc (mips*-sde-elf*): Handle mipsisa64r2*.\n@@ -209,11 +218,9 @@\n \n \t* ira-color.c (push_allocnos_to_stack): Check ALLOCNO_BAD_SPILL_P.\n \n-\t* ira-build.c (ira_create_allocno): Initialize\n-\tALLOCNO_BAD_SPILL_P.\n+\t* ira-build.c (ira_create_allocno): Initialize ALLOCNO_BAD_SPILL_P.\n \t(create_cap_allocno, propagate_allocno_info,\n-\tremove_unnecessary_allocnos): Set up or update\n-\tALLOCNO_BAD_SPILL_P.\n+\tremove_unnecessary_allocnos): Set up or update ALLOCNO_BAD_SPILL_P.\n \t(update_bad_spill_attribute): New function.\n \t(ira_build): Call it.\n "}, {"sha": "22fcc8875cb565f6e11cae90ab6ab80c5fe70eb1", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=8afb060511297809fdd2a8453f2919d57fc5d53d", "patch": "@@ -4508,7 +4508,7 @@\n       rtx low = mips_subword (operands[1], 0);\n       rtx high = mips_subword (operands[1], 1);\n       emit_insn (gen_load_low<mode> (operands[0], low));\n-      if (ISA_HAS_MXHC1)\n+      if (ISA_HAS_MXHC1 && reg_or_0_operand (high, <HALFMODE>mode))\n  \temit_insn (gen_mthc1<mode> (operands[0], high, operands[0]));\n       else\n \temit_insn (gen_load_high<mode> (operands[0], high, operands[0]));\n@@ -4518,7 +4518,7 @@\n       rtx low = mips_subword (operands[0], 0);\n       rtx high = mips_subword (operands[0], 1);\n       emit_insn (gen_store_word<mode> (low, operands[1], const0_rtx));\n-      if (ISA_HAS_MXHC1)\n+      if (ISA_HAS_MXHC1 && register_operand (high, <HALFMODE>mode))\n \temit_insn (gen_mfhc1<mode> (high, operands[1]));\n       else\n \temit_insn (gen_store_word<mode> (high, operands[1], const1_rtx));\n@@ -4573,7 +4573,7 @@\n ;; value in the low word.\n (define_insn \"mthc1<mode>\"\n   [(set (match_operand:SPLITF 0 \"register_operand\" \"=f\")\n-\t(unspec:SPLITF [(match_operand:<HALFMODE> 1 \"general_operand\" \"dJ\")\n+\t(unspec:SPLITF [(match_operand:<HALFMODE> 1 \"reg_or_0_operand\" \"dJ\")\n \t\t        (match_operand:SPLITF 2 \"register_operand\" \"0\")]\n \t\t       UNSPEC_MTHC1))]\n   \"TARGET_HARD_FLOAT && ISA_HAS_MXHC1\""}, {"sha": "27c26a315b53abb93a1a53614fc29f05d06d547e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8afb060511297809fdd2a8453f2919d57fc5d53d", "patch": "@@ -1,3 +1,8 @@\n+2008-11-18  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/37362\n+\t* gcc.target/mips/pr37362.c: New test.\n+\n 2008-11-18  Jason Merrill  <jason@redhat.com>\n \t    Jakub Jelinek  <jakub@redhat.com>\n \n@@ -42,8 +47,8 @@\n \t* gcc.dg/pr38140.c: New test.\n \n 2008-11-17  Jack Howarth  <howarth@bromo.med.uc.edu>\n-        \n-        PR testsuite/38099\n+\n+\tPR testsuite/38099\n \t* gcc.dg/compat/struct-layout-1_generate.c: Also use -no-mmx on\n \ti?86/x86_64 darwin.\n \t* g++.dg/compat/struct-layout-1_generate.c: Same."}, {"sha": "a356b787035a27069898a6925566532056db0c66", "filename": "gcc/testsuite/gcc.target/mips/pr37362.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fpr37362.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb060511297809fdd2a8453f2919d57fc5d53d/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fpr37362.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fpr37362.c?ref=8afb060511297809fdd2a8453f2919d57fc5d53d", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-do compile } */\n+/* { dg-mips-options \"-march=mips64r2 -mabi=n32\" } */\n+\n+typedef float TFtype __attribute__((mode(TF)));\n+\n+TFtype\n+__powitf (TFtype x, int m)\n+{\n+  unsigned int n = m < 0 ? -m : m;\n+  TFtype y = n % 2 ? x : 1;\n+  while (n >>= 1)\n+    {\n+      x = x * x;\n+      if (n % 2)\n+\ty = y * x;\n+    }\n+  return m < 0 ? 1/y : y;\n+}\n+"}]}