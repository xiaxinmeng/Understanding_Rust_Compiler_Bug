{"sha": "3653bb99971ea85c361a5d16f90a8b5a11fd60f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzY1M2JiOTk5NzFlYTg1YzM2MWE1ZDE2ZjkwYThiNWExMWZkNjBmOQ==", "commit": {"author": {"name": "Gabriel Dos Reis", "email": "dosreis@cmla.ens-cachan.fr", "date": "1999-06-05T09:41:22Z"}, "committer": {"name": "Gabriel Dos Reis", "email": "gdr@gcc.gnu.org", "date": "1999-06-05T09:41:22Z"}, "message": "* std/std_valarray.h: Don't #include unconditionally <alloca.h>\n\nFrom-SVN: r27364", "tree": {"sha": "64be7d1dfffd4fb0be0d0d056fbd25452f3e8c31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64be7d1dfffd4fb0be0d0d056fbd25452f3e8c31"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3653bb99971ea85c361a5d16f90a8b5a11fd60f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3653bb99971ea85c361a5d16f90a8b5a11fd60f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3653bb99971ea85c361a5d16f90a8b5a11fd60f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3653bb99971ea85c361a5d16f90a8b5a11fd60f9/comments", "author": null, "committer": null, "parents": [{"sha": "11fda01f766760ba4d54199cfb78c41095f8fa3b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11fda01f766760ba4d54199cfb78c41095f8fa3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11fda01f766760ba4d54199cfb78c41095f8fa3b"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "90723b9999d0329c84a0ba18e3389a4c1cff97e1", "filename": "libstdc++/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3653bb99971ea85c361a5d16f90a8b5a11fd60f9/libstdc%2B%2B%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3653bb99971ea85c361a5d16f90a8b5a11fd60f9/libstdc%2B%2B%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FChangeLog?ref=3653bb99971ea85c361a5d16f90a8b5a11fd60f9", "patch": "@@ -1,4 +1,8 @@\n-1999-06-06  Gabriel Dos Reis  <dosreis@cmla.ens-cachan.fr>\n+1999-06-05  Gabriel Dos Reis  <dosreis@cmla.ens-cachan.fr>\n+\n+\t* std/std_valarray.h: Don't #include unconditionally <alloca.h>\n+\n+1999-06-05  Gabriel Dos Reis  <dosreis@cmla.ens-cachan.fr>\n \n \t* std/std_valarray.h: New file.\n  \t* std/slice.h: New file."}, {"sha": "975d0a122ad311a1522a474f62f40d9482afa182", "filename": "libstdc++/std/std_valarray.h", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3653bb99971ea85c361a5d16f90a8b5a11fd60f9/libstdc%2B%2B%2Fstd%2Fstd_valarray.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3653bb99971ea85c361a5d16f90a8b5a11fd60f9/libstdc%2B%2B%2Fstd%2Fstd_valarray.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2Fstd%2Fstd_valarray.h?ref=3653bb99971ea85c361a5d16f90a8b5a11fd60f9", "patch": "@@ -40,7 +40,31 @@\n #include <functional>\n #include <algorithm>\n \n-#include <alloca.h>  // XXX non-standard.\n+#ifndef alloca\n+#ifdef __GNUC__\n+#define alloca __builtin_alloca\n+#else /* not GNU C.  */\n+#if (!defined (__STDC__) && defined (sparc)) || defined (__sparc__) || defined (__sparc) || defined (__sgi)\n+#include <alloca.h>\n+#else /* not sparc */\n+#if defined (MSDOS) && !defined (__TURBOC__)\n+#include <malloc.h>\n+#else /* not MSDOS, or __TURBOC__ */\n+#if defined(_AIX)\n+#include <malloc.h>\n+ #pragma alloca\n+#else /* not MSDOS, __TURBOC__, or _AIX */\n+#ifdef __hpux\n+#endif /* __hpux */\n+#endif /* not _AIX */\n+#endif /* not MSDOS, or __TURBOC__ */\n+#endif /* not sparc.  */\n+#endif /* not GNU C.  */\n+#endif /* alloca not defined.  */\n+\n+extern \"C\" {\n+   void* alloca(size_t);\n+}\n \n extern \"C++\" {\n "}]}