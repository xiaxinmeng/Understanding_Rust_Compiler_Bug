{"sha": "f94d0f60d36612acccb50ac4bae4aac9c396c1bc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk0ZDBmNjBkMzY2MTJhY2NjYjUwYWM0YmFlNGFhYzljMzk2YzFiYw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-08-11T07:38:23Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-08-11T07:38:23Z"}, "message": "* combine.c (simplify_shift_const): Obey SHIFT_COUNT_TRUNCATED.\n\nFrom-SVN: r35622", "tree": {"sha": "1fb34c9abf221449b5620ee029b478dfd9dbae9b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1fb34c9abf221449b5620ee029b478dfd9dbae9b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f94d0f60d36612acccb50ac4bae4aac9c396c1bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f94d0f60d36612acccb50ac4bae4aac9c396c1bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f94d0f60d36612acccb50ac4bae4aac9c396c1bc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f94d0f60d36612acccb50ac4bae4aac9c396c1bc/comments", "author": null, "committer": null, "parents": [{"sha": "9c683c2adc2f3607bf63998f060d1ed2b7791cfd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c683c2adc2f3607bf63998f060d1ed2b7791cfd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c683c2adc2f3607bf63998f060d1ed2b7791cfd"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "0a72584d80273bf11a7699a19f0e0c4c56ac44df", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f94d0f60d36612acccb50ac4bae4aac9c396c1bc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f94d0f60d36612acccb50ac4bae4aac9c396c1bc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f94d0f60d36612acccb50ac4bae4aac9c396c1bc", "patch": "@@ -1,3 +1,7 @@\n+2000-08-11  Richard Henderson  <rth@cygnus.com>\n+\n+\t* combine.c (simplify_shift_const): Obey SHIFT_COUNT_TRUNCATED.\n+\n Thu Aug 10 22:47:09 2000  Ovidiu Predescu  <ovidiu@cup.hp.com>\n \n \t* configure.in:"}, {"sha": "4ad2f4f3b17d9ad2060cfed3b24e457e9d1db196", "filename": "gcc/combine.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f94d0f60d36612acccb50ac4bae4aac9c396c1bc/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f94d0f60d36612acccb50ac4bae4aac9c396c1bc/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=f94d0f60d36612acccb50ac4bae4aac9c396c1bc", "patch": "@@ -8879,17 +8879,23 @@ simplify_shift_const (x, code, result_mode, varop, input_count)\n \t   ? result_mode : mode);\n \n       /* Handle cases where the count is greater than the size of the mode\n-\t minus 1.  For ASHIFT, use the size minus one as the count (this can\n-\t occur when simplifying (lshiftrt (ashiftrt ..))).  For rotates,\n-\t take the count modulo the size.  For other shifts, the result is\n-\t zero.\n+\t minus 1.  If SHIFT_COUNT_TRUNCATED, there aren't really any such\n+\t cases.  Otherwise, for ASHIFT, use the size minus one as the count\n+\t (this can occur when simplifying (lshiftrt (ashiftrt ..))).  For\n+\t rotates, take the count modulo the size.  For other shifts, the\n+\t result is zero.\n \n \t Since these shifts are being produced by the compiler by combining\n \t multiple operations, each of which are defined, we know what the\n \t result is supposed to be.  */\n \n       if (count > GET_MODE_BITSIZE (shift_mode) - 1)\n \t{\n+#ifdef SHIFT_COUNT_TRUNCATED\n+\t  if (SHIFT_COUNT_TRUNCATED)\n+\t    count %= GET_MODE_BITSIZE (shift_mode);\n+\t  else\n+#endif\n \t  if (code == ASHIFTRT)\n \t    count = GET_MODE_BITSIZE (shift_mode) - 1;\n \t  else if (code == ROTATE || code == ROTATERT)"}]}