{"sha": "86944ea41d6154a5e9177b50ea6af4aa1189d415", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODY5NDRlYTQxZDYxNTRhNWU5MTc3YjUwZWE2YWY0YWExMTg5ZDQxNQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-09-30T17:21:03Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-09-30T17:21:03Z"}, "message": "Add extern \"C\" to <sys/mman.h> on HP/UX.\n\nFrom-SVN: r12872", "tree": {"sha": "4fdaf2477c8560bdabe2bc1237615345ce13a7e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4fdaf2477c8560bdabe2bc1237615345ce13a7e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86944ea41d6154a5e9177b50ea6af4aa1189d415", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86944ea41d6154a5e9177b50ea6af4aa1189d415", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86944ea41d6154a5e9177b50ea6af4aa1189d415", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86944ea41d6154a5e9177b50ea6af4aa1189d415/comments", "author": null, "committer": null, "parents": [{"sha": "0df15c2c4aaaf1e37e0a03dbb691ef2965cd87d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0df15c2c4aaaf1e37e0a03dbb691ef2965cd87d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0df15c2c4aaaf1e37e0a03dbb691ef2965cd87d7"}], "stats": {"total": 43, "additions": 22, "deletions": 21}, "files": [{"sha": "642a73c2d231ddbfe7c602dd468c53388b0302d2", "filename": "gcc/fixincludes", "status": "modified", "additions": 22, "deletions": 21, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86944ea41d6154a5e9177b50ea6af4aa1189d415/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86944ea41d6154a5e9177b50ea6af4aa1189d415/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=86944ea41d6154a5e9177b50ea6af4aa1189d415", "patch": "@@ -2294,40 +2294,41 @@ struct exception;\n   fi\n fi\n \n-# assert.h on HP/UX is not C++ ready, even though NO_IMPLICIT_EXTERN_C\n-# is defined on HP/UX.\n-file=assert.h\n-if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n-  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n-  chmod +w ${LIB}/$file 2>/dev/null\n-  chmod a+r ${LIB}/$file 2>/dev/null\n-fi\n+# assert.h and sys/mman.h on HP/UX are not C++ ready, even though\n+# NO_IMPLICIT_EXTERN_C is defined on HP/UX.\n+for file in assert.h sys/mman.h; do\n+  if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+    cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+    chmod +w ${LIB}/$file 2>/dev/null\n+    chmod a+r ${LIB}/$file 2>/dev/null\n+  fi\n \n-if [ -r ${LIB}/$file ]; then\n-  if egrep '\"C\"' ${LIB}/$file >/dev/null 2>&1 \\\n-     || egrep '__BEGIN_DECLS' ${LIB}/$file >/dev/null 2>&1; then\n-    true\n-  else\n-    echo Fixing $file\n-    echo '#ifdef __cplusplus\n+  if [ -r ${LIB}/$file ]; then\n+    if egrep '\"C\"' ${LIB}/$file >/dev/null 2>&1 \\\n+       || egrep '__BEGIN_DECLS' ${LIB}/$file >/dev/null 2>&1; then\n+      true\n+    else\n+      echo Fixing $file\n+      echo '#ifdef __cplusplus\n extern \"C\" {\n #endif' > ${LIB}/${file}.sed\n-    cat ${LIB}/${file} >> ${LIB}/${file}.sed\n-    echo '#ifdef __cplusplus\n+      cat ${LIB}/${file} >> ${LIB}/${file}.sed\n+      echo '#ifdef __cplusplus\n }\n #endif' >> ${LIB}/${file}.sed \n-    rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+      rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+    fi\n     if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n       rm -f ${LIB}/$file\n     else\n       # Find any include directives that use \"file\".\n       for include in `egrep '^[       ]*#[    ]*include[      ]*\"[^/]' ${LIB}/$file | sed -e 's/^[    ]*#[    ]*include[      ]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n-        dir=`echo $file | sed -e s'|/[^/]*$||'`\n-        required=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n+\tdir=`echo $file | sed -e s'|/[^/]*$||'`\n+\trequired=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n       done\n     fi\n   fi\n-fi\n+done\n \n # check for broken assert.h that needs stdio.h or stdlib.h\n file=assert.h"}]}