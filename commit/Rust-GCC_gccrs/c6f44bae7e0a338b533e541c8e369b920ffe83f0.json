{"sha": "c6f44bae7e0a338b533e541c8e369b920ffe83f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzZmNDRiYWU3ZTBhMzM4YjUzM2U1NDFjOGUzNjliOTIwZmZlODNmMA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2017-05-01T10:45:35Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2017-05-01T10:45:35Z"}, "message": "d-demangle.c (dlang_identifier): Handle template constraint symbols.\n\nlibiberty/ChangeLog:\n\n\t* d-demangle.c (dlang_identifier): Handle template constraint symbols.\n\t(dlang_parse_template): Only advance if template symbol prefix is\n\tfollowed by a digit.\n\t* testsuite/d-demangle-expected: Add tests.\n\nFrom-SVN: r247433", "tree": {"sha": "d59ae1b5e2dbe768d6d985e73923cf5239fedbbe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d59ae1b5e2dbe768d6d985e73923cf5239fedbbe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6f44bae7e0a338b533e541c8e369b920ffe83f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6f44bae7e0a338b533e541c8e369b920ffe83f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6f44bae7e0a338b533e541c8e369b920ffe83f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6f44bae7e0a338b533e541c8e369b920ffe83f0/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ec89d258a04492c4b664850b5679dfe7cf247ceb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec89d258a04492c4b664850b5679dfe7cf247ceb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec89d258a04492c4b664850b5679dfe7cf247ceb"}], "stats": {"total": 27, "additions": 18, "deletions": 9}, "files": [{"sha": "7aa4821d61080a80ebcbd759ca14a51eab889c0d", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6f44bae7e0a338b533e541c8e369b920ffe83f0/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6f44bae7e0a338b533e541c8e369b920ffe83f0/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=c6f44bae7e0a338b533e541c8e369b920ffe83f0", "patch": "@@ -1,3 +1,10 @@\n+2017-04-15  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* d-demangle.c (dlang_identifier): Handle template constraint symbols.\n+\t(dlang_parse_template): Only advance if template symbol prefix is\n+\tfollowed by a digit.\n+\t* testsuite/d-demangle-expected: Add tests.\n+\n 2017-05-01  Iain Buclaw  <ibuclaw@gdcproject.org>\n \n \t* d-demangle.c (dlang_attributes): Handle scope attributes."}, {"sha": "74dde9d9b0c79a411dfb41529dde662ac03b172f", "filename": "libiberty/d-demangle.c", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6f44bae7e0a338b533e541c8e369b920ffe83f0/libiberty%2Fd-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6f44bae7e0a338b533e541c8e369b920ffe83f0/libiberty%2Fd-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fd-demangle.c?ref=c6f44bae7e0a338b533e541c8e369b920ffe83f0", "patch": "@@ -769,14 +769,9 @@ dlang_identifier (string *decl, const char *mangled,\n       mangled = endptr;\n \n       /* May be a template instance.  */\n-      if (len >= 5 && strncmp (mangled, \"__T\", 3) == 0)\n-\t{\n-\t  /* Template symbol.  */\n-\t  if (ISDIGIT (mangled[3]) && mangled[3] != '0')\n-\t    return dlang_parse_template (decl, mangled, len);\n-\n-\t  return NULL;\n-\t}\n+      if (len >= 5 && mangled[0] == '_' && mangled[1] == '_'\n+\t  && (mangled[2] == 'T' || mangled[2] == 'U'))\n+\treturn dlang_parse_template (decl, mangled, len);\n \n       switch (len)\n \t{\n@@ -1541,11 +1536,14 @@ dlang_parse_template (string *decl, const char *mangled, long len)\n \n \tTemplateInstanceName:\n \t    Number __T LName TemplateArgs Z\n+\t    Number __U LName TemplateArgs Z\n \t\t   ^\n      The start pointer should be at the above location, and LEN should be\n      the value of the decoded number.\n    */\n-  if (strncmp (mangled, \"__T\", 3) != 0)\n+\n+  /* Template symbol.  */\n+  if (!ISDIGIT (mangled[3]) || mangled[3] == '0')\n     return NULL;\n \n   mangled += 3;"}, {"sha": "6725684ff332f911283b4d5f6cb8427195818e46", "filename": "libiberty/testsuite/d-demangle-expected", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6f44bae7e0a338b533e541c8e369b920ffe83f0/libiberty%2Ftestsuite%2Fd-demangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6f44bae7e0a338b533e541c8e369b920ffe83f0/libiberty%2Ftestsuite%2Fd-demangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fd-demangle-expected?ref=c6f44bae7e0a338b533e541c8e369b920ffe83f0", "patch": "@@ -650,6 +650,10 @@ _D8demangle9__T4testZv\n demangle.test!()\n #\n --format=dlang\n+_D8demangle9__U4testZv\n+demangle.test!()\n+#\n+--format=dlang\n _D8demangle11__T4testTaZv\n demangle.test!(char)\n #"}]}