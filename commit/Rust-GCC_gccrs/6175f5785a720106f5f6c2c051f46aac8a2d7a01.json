{"sha": "6175f5785a720106f5f6c2c051f46aac8a2d7a01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjE3NWY1Nzg1YTcyMDEwNmY1ZjZjMmMwNTFmNDZhYWM4YTJkN2EwMQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2009-02-03T22:38:16Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2009-02-03T22:38:16Z"}, "message": "re PR c++/36607 (Incorrect type diagnostic on substracting casted char pointers)\n\n2009-02-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR C++/36607\n        * convert.c (convert_to_integer): Treat OFFSET_TYPE like INTEGER_TYPE.\n\n2009-02-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR C++/36607\n        * g++.dg/expr/cast10.C: New test.\n\nFrom-SVN: r143909", "tree": {"sha": "ae6a30abb743de5289697d5624977c3689457c4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae6a30abb743de5289697d5624977c3689457c4a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6175f5785a720106f5f6c2c051f46aac8a2d7a01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6175f5785a720106f5f6c2c051f46aac8a2d7a01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6175f5785a720106f5f6c2c051f46aac8a2d7a01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6175f5785a720106f5f6c2c051f46aac8a2d7a01/comments", "author": null, "committer": null, "parents": [{"sha": "d4f4bc84b0a55234f92c0dcb3289a8ad5816e7cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4f4bc84b0a55234f92c0dcb3289a8ad5816e7cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4f4bc84b0a55234f92c0dcb3289a8ad5816e7cb"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "c7d7b014294d240b3adca18a5b67110c5a4c7f92", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6175f5785a720106f5f6c2c051f46aac8a2d7a01", "patch": "@@ -1,3 +1,8 @@\n+2009-02-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR C++/36607\n+\t* convert.c (convert_to_integer): Treat OFFSET_TYPE like INTEGER_TYPE.\n+\n 2009-02-03  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.c (process_command): Update copyright notice dates."}, {"sha": "77907bafcb5e7e1fc799085179d1f3a236c47ca6", "filename": "gcc/convert.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2Fconvert.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2Fconvert.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconvert.c?ref=6175f5785a720106f5f6c2c051f46aac8a2d7a01", "patch": "@@ -493,6 +493,7 @@ convert_to_integer (tree type, tree expr)\n     case INTEGER_TYPE:\n     case ENUMERAL_TYPE:\n     case BOOLEAN_TYPE:\n+    case OFFSET_TYPE:\n       /* If this is a logical operation, which just returns 0 or 1, we can\n \t change the type of the expression.  */\n "}, {"sha": "9d50d7fc9893fd0c6f6c843d6025df8e2bf852c7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6175f5785a720106f5f6c2c051f46aac8a2d7a01", "patch": "@@ -1,3 +1,8 @@\n+2009-02-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR C++/36607\n+\t* g++.dg/expr/cast10.C: New test.\n+\n 2009-02-03  Joseph Myers  <joseph@codesourcery.com>\n \n \tPR c/35433"}, {"sha": "cd3e0fc3c2719dbb8df0afb259abe8d4a05c8d2f", "filename": "gcc/testsuite/g++.dg/expr/cast10.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcast10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6175f5785a720106f5f6c2c051f46aac8a2d7a01/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcast10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcast10.C?ref=6175f5785a720106f5f6c2c051f46aac8a2d7a01", "patch": "@@ -0,0 +1,10 @@\n+// { dg-do compile }\n+// This used to error out because we would try to convert m to a short.\n+\n+\n+struct a {};\n+void b() {\n+    int a::*m;\n+    a *c;\n+    short p = reinterpret_cast<char*>(&(c->*m)) - reinterpret_cast<char*>(c);\n+}"}]}