{"sha": "f318ff0a6fda0434e3fc62b77dd921af34cf5162", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjMxOGZmMGE2ZmRhMDQzNGUzZmM2MmI3N2RkOTIxYWYzNGNmNTE2Mg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2008-04-29T19:48:21Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-04-29T19:48:21Z"}, "message": "i386.c (ix86_builtins): Replace Prescott New Instructions in comments with SSE3.\n\n2008-04-29  H.J. Lu  <hongjiu.lu@intel.com>\n\n\t* config/i386/i386.c (ix86_builtins): Replace Prescott New\n\tInstructions in comments with SSE3.\n\t(ix86_builtin_type): This.  Add FLOAT128_FTYPE_FLOAT128,\n\tINT64_FTYPE_V4SF, INT64_FTYPE_V2DF, INT_FTYPE_V16QI,\n\tINT_FTYPE_V8QI, INT_FTYPE_V4SF, INT_FTYPE_V2DF,\n\tV16QI_FTYPE_V16QI, V8HI_FTYPE_V8HI, V8HI_FTYPE_V16QI,\n\tV8QI_FTYPE_V8QI, V4SI_FTYPE_V4SI, V4SI_FTYPE_V16QI,\n\tV4SI_FTYPE_V4SF, V4SI_FTYPE_V8HI, V4SI_FTYPE_V2DF,\n\tV4HI_FTYPE_V4HI, V4SF_FTYPE_V4SF, V4SF_FTYPE_V4SI,\n\tV4SF_FTYPE_V2DF, V2DI_FTYPE_V2DI, V2DI_FTYPE_V16QI,\n\tV2DI_FTYPE_V8HI, V2DI_FTYPE_V4SI, V2DF_FTYPE_V2DF,\n\tV2DF_FTYPE_V4SI, V2DF_FTYPE_V4SF, V2DF_FTYPE_V2SI,\n\tV2SI_FTYPE_V2SI, V2SI_FTYPE_V4SF, V2SI_FTYPE_V2SF,\n\tV2SI_FTYPE_V2DF, V2SF_FTYPE_V2SF and V2SF_FTYPE_V2SI.\n\t(bdesc_sse_args): Renamed to ...\n\t(bdesc_args): This.  Add IX86_BUILTIN_PF2ID, IX86_BUILTIN_PFRCP,\n\tIX86_BUILTIN_PFRSQRT, IX86_BUILTIN_PI2FD, IX86_BUILTIN_PF2IW,\n\tIX86_BUILTIN_PSWAPDSI, IX86_BUILTIN_PSWAPDSF and\n\tIX86_BUILTIN_FABSQ.\n\t(bdesc_1arg): Moved to ...\n\t(bdesc_args): Here.\n\t(ix86_init_mmx_sse_builtins): Updated.  Replace Prescott New\n\tInstructions in comments with SSE3.\n\t(ix86_expand_sse_operands_builtin): Renamed to ...\n\t(ix86_expand_args_builtin): This.  Updated.\n\t(ix86_expand_unop1_builtin): Update comments.\n\t(ix86_expand_builtin): Updated.\n\nFrom-SVN: r134807", "tree": {"sha": "7758703a8e5506cc24c7f61fb97258148c56fc1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7758703a8e5506cc24c7f61fb97258148c56fc1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f318ff0a6fda0434e3fc62b77dd921af34cf5162", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f318ff0a6fda0434e3fc62b77dd921af34cf5162", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f318ff0a6fda0434e3fc62b77dd921af34cf5162", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f318ff0a6fda0434e3fc62b77dd921af34cf5162/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a7d17ed9e1b44ed94ad91c52e3756cda904ac6e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7d17ed9e1b44ed94ad91c52e3756cda904ac6e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7d17ed9e1b44ed94ad91c52e3756cda904ac6e9"}], "stats": {"total": 533, "additions": 302, "deletions": 231}, "files": [{"sha": "9cd2d2812134ca4feb047b62b2d26db7e8a51fd5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f318ff0a6fda0434e3fc62b77dd921af34cf5162/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f318ff0a6fda0434e3fc62b77dd921af34cf5162/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f318ff0a6fda0434e3fc62b77dd921af34cf5162", "patch": "@@ -1,3 +1,33 @@\n+2008-04-29  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config/i386/i386.c (ix86_builtins): Replace Prescott New\n+\tInstructions in comments with SSE3.\n+\t(ix86_builtin_type): This.  Add FLOAT128_FTYPE_FLOAT128,\n+\tINT64_FTYPE_V4SF, INT64_FTYPE_V2DF, INT_FTYPE_V16QI,\n+\tINT_FTYPE_V8QI, INT_FTYPE_V4SF, INT_FTYPE_V2DF,\n+\tV16QI_FTYPE_V16QI, V8HI_FTYPE_V8HI, V8HI_FTYPE_V16QI,\n+\tV8QI_FTYPE_V8QI, V4SI_FTYPE_V4SI, V4SI_FTYPE_V16QI,\n+\tV4SI_FTYPE_V4SF, V4SI_FTYPE_V8HI, V4SI_FTYPE_V2DF,\n+\tV4HI_FTYPE_V4HI, V4SF_FTYPE_V4SF, V4SF_FTYPE_V4SI,\n+\tV4SF_FTYPE_V2DF, V2DI_FTYPE_V2DI, V2DI_FTYPE_V16QI,\n+\tV2DI_FTYPE_V8HI, V2DI_FTYPE_V4SI, V2DF_FTYPE_V2DF,\n+\tV2DF_FTYPE_V4SI, V2DF_FTYPE_V4SF, V2DF_FTYPE_V2SI,\n+\tV2SI_FTYPE_V2SI, V2SI_FTYPE_V4SF, V2SI_FTYPE_V2SF,\n+\tV2SI_FTYPE_V2DF, V2SF_FTYPE_V2SF and V2SF_FTYPE_V2SI.\n+\t(bdesc_sse_args): Renamed to ...\n+\t(bdesc_args): This.  Add IX86_BUILTIN_PF2ID, IX86_BUILTIN_PFRCP,\n+\tIX86_BUILTIN_PFRSQRT, IX86_BUILTIN_PI2FD, IX86_BUILTIN_PF2IW,\n+\tIX86_BUILTIN_PSWAPDSI, IX86_BUILTIN_PSWAPDSF and\n+\tIX86_BUILTIN_FABSQ.\n+\t(bdesc_1arg): Moved to ...\n+\t(bdesc_args): Here.\n+\t(ix86_init_mmx_sse_builtins): Updated.  Replace Prescott New\n+\tInstructions in comments with SSE3.\n+\t(ix86_expand_sse_operands_builtin): Renamed to ...\n+\t(ix86_expand_args_builtin): This.  Updated.\n+\t(ix86_expand_unop1_builtin): Update comments.\n+\t(ix86_expand_builtin): Updated.\n+\n 2008-04-29  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/36078"}, {"sha": "413e669aa0323b8e19e4f1e1d28d18a7a689de43", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 272, "deletions": 231, "changes": 503, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f318ff0a6fda0434e3fc62b77dd921af34cf5162/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f318ff0a6fda0434e3fc62b77dd921af34cf5162/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=f318ff0a6fda0434e3fc62b77dd921af34cf5162", "patch": "@@ -17488,7 +17488,7 @@ enum ix86_builtins\n   IX86_BUILTIN_MFENCE,\n   IX86_BUILTIN_LFENCE,\n \n-  /* Prescott New Instructions.  */\n+  /* SSE3.  */\n   IX86_BUILTIN_ADDSUBPS,\n   IX86_BUILTIN_HADDPS,\n   IX86_BUILTIN_HSUBPS,\n@@ -17993,10 +17993,44 @@ static const struct builtin_description bdesc_crc32[] =\n   { OPTION_MASK_ISA_SSE4_2, CODE_FOR_sse4_2_crc32di, 0, IX86_BUILTIN_CRC32DI, UNKNOWN, 0 },\n };\n \n-/* SSE */\n-enum sse_builtin_type\n-{\n-  SSE_CTYPE_UNKNOWN,\n+/* Builtin types */\n+enum ix86_builtin_type\n+{\n+  FTYPE_UNKNOWN,\n+  FLOAT128_FTYPE_FLOAT128,\n+  INT64_FTYPE_V4SF,\n+  INT64_FTYPE_V2DF,\n+  INT_FTYPE_V16QI,\n+  INT_FTYPE_V8QI,\n+  INT_FTYPE_V4SF,\n+  INT_FTYPE_V2DF,\n+  V16QI_FTYPE_V16QI,\n+  V8HI_FTYPE_V8HI,\n+  V8HI_FTYPE_V16QI,\n+  V8QI_FTYPE_V8QI,\n+  V4SI_FTYPE_V4SI,\n+  V4SI_FTYPE_V16QI,\n+  V4SI_FTYPE_V4SF,\n+  V4SI_FTYPE_V8HI,\n+  V4SI_FTYPE_V2DF,\n+  V4HI_FTYPE_V4HI,\n+  V4SF_FTYPE_V4SF,\n+  V4SF_FTYPE_V4SI,\n+  V4SF_FTYPE_V2DF,\n+  V2DI_FTYPE_V2DI,\n+  V2DI_FTYPE_V16QI,\n+  V2DI_FTYPE_V8HI,\n+  V2DI_FTYPE_V4SI,\n+  V2DF_FTYPE_V2DF,\n+  V2DF_FTYPE_V4SI,\n+  V2DF_FTYPE_V4SF,\n+  V2DF_FTYPE_V2SI,\n+  V2SI_FTYPE_V2SI,\n+  V2SI_FTYPE_V4SF,\n+  V2SI_FTYPE_V2SF,\n+  V2SI_FTYPE_V2DF,\n+  V2SF_FTYPE_V2SF,\n+  V2SF_FTYPE_V2SI,\n   V4SF_FTYPE_V4SF_INT,\n   V2DI_FTYPE_V2DI_INT,\n   V2DF_FTYPE_V2DF_INT,\n@@ -18011,15 +18045,78 @@ enum sse_builtin_type\n   V2DF_FTYPE_V2DF_V2DF_INT\n };\n \n-/* SSE builtins with variable number of arguments.  */\n-static const struct builtin_description bdesc_sse_args[] =\n+/* Builtins with variable number of arguments.  */\n+static const struct builtin_description bdesc_args[] =\n {\n+  /* 3DNow! */\n+  { OPTION_MASK_ISA_3DNOW, CODE_FOR_mmx_pf2id, \"__builtin_ia32_pf2id\", IX86_BUILTIN_PF2ID, UNKNOWN, (int) V2SI_FTYPE_V2SF },\n+  { OPTION_MASK_ISA_3DNOW, CODE_FOR_mmx_floatv2si2, \"__builtin_ia32_pi2fd\", IX86_BUILTIN_PI2FD, UNKNOWN, (int) V2SF_FTYPE_V2SI },\n+  { OPTION_MASK_ISA_3DNOW, CODE_FOR_mmx_rcpv2sf2, \"__builtin_ia32_pfrcp\", IX86_BUILTIN_PFRCP, UNKNOWN, (int) V2SF_FTYPE_V2SF },\n+  { OPTION_MASK_ISA_3DNOW, CODE_FOR_mmx_rsqrtv2sf2, \"__builtin_ia32_pfrsqrt\", IX86_BUILTIN_PFRSQRT, UNKNOWN, (int) V2SF_FTYPE_V2SF },\n+\n+  /* 3DNow!A */\n+  { OPTION_MASK_ISA_3DNOW_A, CODE_FOR_mmx_pf2iw, \"__builtin_ia32_pf2iw\", IX86_BUILTIN_PF2IW, UNKNOWN, (int) V2SI_FTYPE_V2SF },\n+  { OPTION_MASK_ISA_3DNOW_A, CODE_FOR_mmx_pi2fw, \"__builtin_ia32_pi2fw\", IX86_BUILTIN_PI2FW, UNKNOWN, (int) V2SF_FTYPE_V2SI },\n+  { OPTION_MASK_ISA_3DNOW_A, CODE_FOR_mmx_pswapdv2si2, \"__builtin_ia32_pswapdsi\", IX86_BUILTIN_PSWAPDSI, UNKNOWN, (int) V2SI_FTYPE_V2SI },\n+  { OPTION_MASK_ISA_3DNOW_A, CODE_FOR_mmx_pswapdv2sf2, \"__builtin_ia32_pswapdsf\", IX86_BUILTIN_PSWAPDSF, UNKNOWN, (int) V2SF_FTYPE_V2SF },\n+\n   /* SSE */\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_movmskps, \"__builtin_ia32_movmskps\", IX86_BUILTIN_MOVMSKPS, UNKNOWN, (int) INT_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_sqrtv4sf2, \"__builtin_ia32_sqrtps\", IX86_BUILTIN_SQRTPS, UNKNOWN, (int) V4SF_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sqrtv4sf2, \"__builtin_ia32_sqrtps_nr\", IX86_BUILTIN_SQRTPS_NR, UNKNOWN, (int) V4SF_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_rsqrtv4sf2, \"__builtin_ia32_rsqrtps\", IX86_BUILTIN_RSQRTPS, UNKNOWN, (int) V4SF_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_rsqrtv4sf2, \"__builtin_ia32_rsqrtps_nr\", IX86_BUILTIN_RSQRTPS_NR, UNKNOWN, (int) V4SF_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_rcpv4sf2, \"__builtin_ia32_rcpps\", IX86_BUILTIN_RCPPS, UNKNOWN, (int) V4SF_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvtps2pi, \"__builtin_ia32_cvtps2pi\", IX86_BUILTIN_CVTPS2PI, UNKNOWN, (int) V2SI_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvtss2si, \"__builtin_ia32_cvtss2si\", IX86_BUILTIN_CVTSS2SI, UNKNOWN, (int) INT_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_64BIT, CODE_FOR_sse_cvtss2siq, \"__builtin_ia32_cvtss2si64\", IX86_BUILTIN_CVTSS2SI64, UNKNOWN, (int) INT64_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvttps2pi, \"__builtin_ia32_cvttps2pi\", IX86_BUILTIN_CVTTPS2PI, UNKNOWN, (int) V2SI_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvttss2si, \"__builtin_ia32_cvttss2si\", IX86_BUILTIN_CVTTSS2SI, UNKNOWN, (int) INT_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_64BIT, CODE_FOR_sse_cvttss2siq, \"__builtin_ia32_cvttss2si64\", IX86_BUILTIN_CVTTSS2SI64, UNKNOWN, (int) INT64_FTYPE_V4SF },\n+\n   { OPTION_MASK_ISA_SSE, CODE_FOR_sse_shufps, \"__builtin_ia32_shufps\", IX86_BUILTIN_SHUFPS, UNKNOWN, (int) V4SF_FTYPE_V4SF_V4SF_INT },\n \n+  /* SSE and 3DNow!A  */\n+  { OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, CODE_FOR_mmx_pmovmskb, \"__builtin_ia32_pmovmskb\", IX86_BUILTIN_PMOVMSKB, UNKNOWN, (int) INT_FTYPE_V8QI },\n+\n   /* SSE2 */\n   { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_shufpd, \"__builtin_ia32_shufpd\", IX86_BUILTIN_SHUFPD, UNKNOWN, (int) V2DF_FTYPE_V2DF_V2DF_INT },\n \n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_movmskpd, \"__builtin_ia32_movmskpd\", IX86_BUILTIN_MOVMSKPD, UNKNOWN, (int) INT_FTYPE_V2DF  },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_pmovmskb, \"__builtin_ia32_pmovmskb128\", IX86_BUILTIN_PMOVMSKB128, UNKNOWN, (int) INT_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sqrtv2df2, \"__builtin_ia32_sqrtpd\", IX86_BUILTIN_SQRTPD, UNKNOWN, (int) V2DF_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtdq2pd, \"__builtin_ia32_cvtdq2pd\", IX86_BUILTIN_CVTDQ2PD, UNKNOWN, (int) V2DF_FTYPE_V4SI },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtdq2ps, \"__builtin_ia32_cvtdq2ps\", IX86_BUILTIN_CVTDQ2PS, UNKNOWN, (int) V4SF_FTYPE_V4SI },\n+\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpd2dq, \"__builtin_ia32_cvtpd2dq\", IX86_BUILTIN_CVTPD2DQ, UNKNOWN, (int) V4SI_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpd2pi, \"__builtin_ia32_cvtpd2pi\", IX86_BUILTIN_CVTPD2PI, UNKNOWN, (int) V2SI_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpd2ps, \"__builtin_ia32_cvtpd2ps\", IX86_BUILTIN_CVTPD2PS, UNKNOWN, (int) V4SF_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttpd2dq, \"__builtin_ia32_cvttpd2dq\", IX86_BUILTIN_CVTTPD2DQ, UNKNOWN, (int) V4SI_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttpd2pi, \"__builtin_ia32_cvttpd2pi\", IX86_BUILTIN_CVTTPD2PI, UNKNOWN, (int) V2SI_FTYPE_V2DF },\n+\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpi2pd, \"__builtin_ia32_cvtpi2pd\", IX86_BUILTIN_CVTPI2PD, UNKNOWN, (int) V2DF_FTYPE_V2SI },\n+\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtsd2si, \"__builtin_ia32_cvtsd2si\", IX86_BUILTIN_CVTSD2SI, UNKNOWN, (int) INT_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttsd2si, \"__builtin_ia32_cvttsd2si\", IX86_BUILTIN_CVTTSD2SI, UNKNOWN, (int) INT_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2 | OPTION_MASK_ISA_64BIT, CODE_FOR_sse2_cvtsd2siq, \"__builtin_ia32_cvtsd2si64\", IX86_BUILTIN_CVTSD2SI64, UNKNOWN, (int) INT64_FTYPE_V2DF },\n+  { OPTION_MASK_ISA_SSE2 | OPTION_MASK_ISA_64BIT, CODE_FOR_sse2_cvttsd2siq, \"__builtin_ia32_cvttsd2si64\", IX86_BUILTIN_CVTTSD2SI64, UNKNOWN, (int) INT64_FTYPE_V2DF },\n+\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtps2dq, \"__builtin_ia32_cvtps2dq\", IX86_BUILTIN_CVTPS2DQ, UNKNOWN, (int) V4SI_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtps2pd, \"__builtin_ia32_cvtps2pd\", IX86_BUILTIN_CVTPS2PD, UNKNOWN, (int) V2DF_FTYPE_V4SF },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttps2dq, \"__builtin_ia32_cvttps2dq\", IX86_BUILTIN_CVTTPS2DQ, UNKNOWN, (int) V4SI_FTYPE_V4SF },\n+\n+  /* SSE3 */\n+  { OPTION_MASK_ISA_SSE3, CODE_FOR_sse3_movshdup, \"__builtin_ia32_movshdup\", IX86_BUILTIN_MOVSHDUP, UNKNOWN, (int) V4SF_FTYPE_V4SF},\n+  { OPTION_MASK_ISA_SSE3, CODE_FOR_sse3_movsldup, \"__builtin_ia32_movsldup\", IX86_BUILTIN_MOVSLDUP, UNKNOWN, (int) V4SF_FTYPE_V4SF },\n+\n+  /* SSSE3 */\n+  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv16qi2, \"__builtin_ia32_pabsb128\", IX86_BUILTIN_PABSB128, UNKNOWN, (int) V16QI_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv8qi2, \"__builtin_ia32_pabsb\", IX86_BUILTIN_PABSB, UNKNOWN, (int) V8QI_FTYPE_V8QI },\n+  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv8hi2, \"__builtin_ia32_pabsw128\", IX86_BUILTIN_PABSW128, UNKNOWN, (int) V8HI_FTYPE_V8HI },\n+  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv4hi2, \"__builtin_ia32_pabsw\", IX86_BUILTIN_PABSW, UNKNOWN, (int) V4HI_FTYPE_V4HI },\n+  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv4si2, \"__builtin_ia32_pabsd128\", IX86_BUILTIN_PABSD128, UNKNOWN, (int) V4SI_FTYPE_V4SI },\n+  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv2si2, \"__builtin_ia32_pabsd\", IX86_BUILTIN_PABSD, UNKNOWN, (int) V2SI_FTYPE_V2SI },\n+\n   /* SSE4.1 */\n   { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_blendpd, \"__builtin_ia32_blendpd\", IX86_BUILTIN_BLENDPD, UNKNOWN, (int) V2DF_FTYPE_V2DF_V2DF_INT },\n   { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_blendps, \"__builtin_ia32_blendps\", IX86_BUILTIN_BLENDPS, UNKNOWN, (int) V4SF_FTYPE_V4SF_V4SF_INT },\n@@ -18032,6 +18129,20 @@ static const struct builtin_description bdesc_sse_args[] =\n   { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_pblendvb, \"__builtin_ia32_pblendvb128\", IX86_BUILTIN_PBLENDVB128, UNKNOWN, (int) V16QI_FTYPE_V16QI_V16QI_V16QI },\n   { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_pblendw, \"__builtin_ia32_pblendw128\", IX86_BUILTIN_PBLENDW128, UNKNOWN, (int) V8HI_FTYPE_V8HI_V8HI_INT },\n \n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv8qiv8hi2, \"__builtin_ia32_pmovsxbw128\", IX86_BUILTIN_PMOVSXBW128, UNKNOWN, (int) V8HI_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv4qiv4si2, \"__builtin_ia32_pmovsxbd128\", IX86_BUILTIN_PMOVSXBD128, UNKNOWN, (int) V4SI_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv2qiv2di2, \"__builtin_ia32_pmovsxbq128\", IX86_BUILTIN_PMOVSXBQ128, UNKNOWN, (int) V2DI_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv4hiv4si2, \"__builtin_ia32_pmovsxwd128\", IX86_BUILTIN_PMOVSXWD128, UNKNOWN, (int) V4SI_FTYPE_V8HI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv2hiv2di2, \"__builtin_ia32_pmovsxwq128\", IX86_BUILTIN_PMOVSXWQ128, UNKNOWN, (int) V2DI_FTYPE_V8HI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv2siv2di2, \"__builtin_ia32_pmovsxdq128\", IX86_BUILTIN_PMOVSXDQ128, UNKNOWN, (int) V2DI_FTYPE_V4SI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv8qiv8hi2, \"__builtin_ia32_pmovzxbw128\", IX86_BUILTIN_PMOVZXBW128, UNKNOWN, (int) V8HI_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv4qiv4si2, \"__builtin_ia32_pmovzxbd128\", IX86_BUILTIN_PMOVZXBD128, UNKNOWN, (int) V4SI_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv2qiv2di2, \"__builtin_ia32_pmovzxbq128\", IX86_BUILTIN_PMOVZXBQ128, UNKNOWN, (int) V2DI_FTYPE_V16QI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv4hiv4si2, \"__builtin_ia32_pmovzxwd128\", IX86_BUILTIN_PMOVZXWD128, UNKNOWN, (int) V4SI_FTYPE_V8HI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv2hiv2di2, \"__builtin_ia32_pmovzxwq128\", IX86_BUILTIN_PMOVZXWQ128, UNKNOWN, (int) V2DI_FTYPE_V8HI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv2siv2di2, \"__builtin_ia32_pmovzxdq128\", IX86_BUILTIN_PMOVZXDQ128, UNKNOWN, (int) V2DI_FTYPE_V4SI },\n+  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_phminposuw, \"__builtin_ia32_phminposuw128\", IX86_BUILTIN_PHMINPOSUW128, UNKNOWN, (int) V8HI_FTYPE_V8HI },\n+\n   /* SSE4.1 and SSE5 */\n   { OPTION_MASK_ISA_ROUND, CODE_FOR_sse4_1_roundpd, \"__builtin_ia32_roundpd\", IX86_BUILTIN_ROUNDPD, UNKNOWN, (int) V2DF_FTYPE_V2DF_INT },\n   { OPTION_MASK_ISA_ROUND, CODE_FOR_sse4_1_roundps, \"__builtin_ia32_roundps\", IX86_BUILTIN_ROUNDPS, UNKNOWN, (int) V4SF_FTYPE_V4SF_INT },\n@@ -18040,9 +18151,13 @@ static const struct builtin_description bdesc_sse_args[] =\n \n   /* AES */\n   { OPTION_MASK_ISA_SSE2, CODE_FOR_aeskeygenassist, 0, IX86_BUILTIN_AESKEYGENASSIST128, UNKNOWN, (int) V2DI_FTYPE_V2DI_INT },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_aesimc, 0, IX86_BUILTIN_AESIMC128, UNKNOWN, (int) V2DI_FTYPE_V2DI },\n \n   /* PCLMUL */\n   { OPTION_MASK_ISA_SSE2, CODE_FOR_pclmulqdq, 0, IX86_BUILTIN_PCLMULQDQ128, UNKNOWN, (int) V2DI_FTYPE_V2DI_V2DI_INT },\n+\n+   /* 64bit */\n+  { OPTION_MASK_ISA_64BIT, CODE_FOR_abstf2, 0, IX86_BUILTIN_FABSQ, UNKNOWN, (int) FLOAT128_FTYPE_FLOAT128 },\n };\n \n static const struct builtin_description bdesc_2arg[] =\n@@ -18331,82 +18446,6 @@ static const struct builtin_description bdesc_2arg[] =\n   { OPTION_MASK_ISA_SSE2, CODE_FOR_aesdeclast, 0, IX86_BUILTIN_AESDECLAST128, UNKNOWN, 0 },\n };\n \n-static const struct builtin_description bdesc_1arg[] =\n-{\n-  /* SSE */\n-  { OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, CODE_FOR_mmx_pmovmskb, 0, IX86_BUILTIN_PMOVMSKB, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_movmskps, 0, IX86_BUILTIN_MOVMSKPS, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_sqrtv4sf2, 0, IX86_BUILTIN_SQRTPS, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sqrtv4sf2, 0, IX86_BUILTIN_SQRTPS_NR, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_rsqrtv4sf2, 0, IX86_BUILTIN_RSQRTPS, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_rsqrtv4sf2, 0, IX86_BUILTIN_RSQRTPS_NR, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_rcpv4sf2, 0, IX86_BUILTIN_RCPPS, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvtps2pi, 0, IX86_BUILTIN_CVTPS2PI, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvtss2si, 0, IX86_BUILTIN_CVTSS2SI, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_64BIT, CODE_FOR_sse_cvtss2siq, 0, IX86_BUILTIN_CVTSS2SI64, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvttps2pi, 0, IX86_BUILTIN_CVTTPS2PI, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE, CODE_FOR_sse_cvttss2si, 0, IX86_BUILTIN_CVTTSS2SI, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_64BIT, CODE_FOR_sse_cvttss2siq, 0, IX86_BUILTIN_CVTTSS2SI64, UNKNOWN, 0 },\n-\n-  /* SSE2 */\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_pmovmskb, 0, IX86_BUILTIN_PMOVMSKB128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_movmskpd, 0, IX86_BUILTIN_MOVMSKPD, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sqrtv2df2, 0, IX86_BUILTIN_SQRTPD, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtdq2pd, 0, IX86_BUILTIN_CVTDQ2PD, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtdq2ps, 0, IX86_BUILTIN_CVTDQ2PS, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpd2dq, 0, IX86_BUILTIN_CVTPD2DQ, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpd2pi, 0, IX86_BUILTIN_CVTPD2PI, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpd2ps, 0, IX86_BUILTIN_CVTPD2PS, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttpd2dq, 0, IX86_BUILTIN_CVTTPD2DQ, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttpd2pi, 0, IX86_BUILTIN_CVTTPD2PI, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtpi2pd, 0, IX86_BUILTIN_CVTPI2PD, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtsd2si, 0, IX86_BUILTIN_CVTSD2SI, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttsd2si, 0, IX86_BUILTIN_CVTTSD2SI, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2 | OPTION_MASK_ISA_64BIT, CODE_FOR_sse2_cvtsd2siq, 0, IX86_BUILTIN_CVTSD2SI64, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2 | OPTION_MASK_ISA_64BIT, CODE_FOR_sse2_cvttsd2siq, 0, IX86_BUILTIN_CVTTSD2SI64, UNKNOWN, 0 },\n-\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtps2dq, 0, IX86_BUILTIN_CVTPS2DQ, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvtps2pd, 0, IX86_BUILTIN_CVTPS2PD, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_cvttps2dq, 0, IX86_BUILTIN_CVTTPS2DQ, UNKNOWN, 0 },\n-\n-  /* SSE3 */\n-  { OPTION_MASK_ISA_SSE3, CODE_FOR_sse3_movshdup, \"__builtin_ia32_movshdup\", IX86_BUILTIN_MOVSHDUP, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE3, CODE_FOR_sse3_movsldup, \"__builtin_ia32_movsldup\", IX86_BUILTIN_MOVSLDUP, UNKNOWN, 0 },\n-\n-  /* SSSE3 */\n-  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv16qi2, \"__builtin_ia32_pabsb128\", IX86_BUILTIN_PABSB128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv8qi2, \"__builtin_ia32_pabsb\", IX86_BUILTIN_PABSB, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv8hi2, \"__builtin_ia32_pabsw128\", IX86_BUILTIN_PABSW128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv4hi2, \"__builtin_ia32_pabsw\", IX86_BUILTIN_PABSW, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv4si2, \"__builtin_ia32_pabsd128\", IX86_BUILTIN_PABSD128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSSE3, CODE_FOR_absv2si2, \"__builtin_ia32_pabsd\", IX86_BUILTIN_PABSD, UNKNOWN, 0 },\n-\n-  /* SSE4.1 */\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv8qiv8hi2, 0, IX86_BUILTIN_PMOVSXBW128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv4qiv4si2, 0, IX86_BUILTIN_PMOVSXBD128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv2qiv2di2, 0, IX86_BUILTIN_PMOVSXBQ128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv4hiv4si2, 0, IX86_BUILTIN_PMOVSXWD128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv2hiv2di2, 0, IX86_BUILTIN_PMOVSXWQ128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_extendv2siv2di2, 0, IX86_BUILTIN_PMOVSXDQ128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv8qiv8hi2, 0, IX86_BUILTIN_PMOVZXBW128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv4qiv4si2, 0, IX86_BUILTIN_PMOVZXBD128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv2qiv2di2, 0, IX86_BUILTIN_PMOVZXBQ128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv4hiv4si2, 0, IX86_BUILTIN_PMOVZXWD128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv2hiv2di2, 0, IX86_BUILTIN_PMOVZXWQ128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_zero_extendv2siv2di2, 0, IX86_BUILTIN_PMOVZXDQ128, UNKNOWN, 0 },\n-  { OPTION_MASK_ISA_SSE4_1, CODE_FOR_sse4_1_phminposuw, \"__builtin_ia32_phminposuw128\", IX86_BUILTIN_PHMINPOSUW128, UNKNOWN, 0 },\n-\n-  /* AES */\n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_aesimc, 0, IX86_BUILTIN_AESIMC128, UNKNOWN, 0 },\n-};\n-\n /* SSE5 */\n enum multi_arg_type {\n   MULTI_ARG_UNKNOWN,\n@@ -19204,18 +19243,117 @@ ix86_init_mmx_sse_builtins (void)\n       def_builtin_const (OPTION_MASK_ISA_64BIT, \"__builtin_copysignq\", ftype, IX86_BUILTIN_COPYSIGNQ);\n     }\n \n-  /* Add all SSE builtins with variable number of operands.  */\n-  for (i = 0, d = bdesc_sse_args;\n-       i < ARRAY_SIZE (bdesc_sse_args);\n+  /* Add all builtins with variable number of operands.  */\n+  for (i = 0, d = bdesc_args;\n+       i < ARRAY_SIZE (bdesc_args);\n        i++, d++)\n     {\n       tree type;\n \n       if (d->name == 0)\n \tcontinue;\n \n-      switch ((enum sse_builtin_type) d->flag)\n+      switch ((enum ix86_builtin_type) d->flag)\n \t{\n+\tcase INT64_FTYPE_V4SF:\n+\t  type = int64_ftype_v4sf;\n+\t  break;\n+\tcase INT64_FTYPE_V2DF:\n+\t  type = int64_ftype_v2df;\n+\t  break;\n+\tcase INT_FTYPE_V16QI:\n+\t  type = int_ftype_v16qi;\n+\t  break;\n+\tcase INT_FTYPE_V8QI:\n+\t  type = int_ftype_v8qi;\n+\t  break;\n+\tcase INT_FTYPE_V4SF:\n+\t  type = int_ftype_v4sf;\n+\t  break;\n+\tcase INT_FTYPE_V2DF:\n+\t  type = int_ftype_v2df;\n+\t  break;\n+\tcase V16QI_FTYPE_V16QI:\n+\t  type = v16qi_ftype_v16qi;\n+\t  break;\n+\tcase V8HI_FTYPE_V8HI:\n+\t  type = v8hi_ftype_v8hi;\n+\t  break;\n+\tcase V8HI_FTYPE_V16QI:\n+\t  type = v8hi_ftype_v16qi;\n+\t  break;\n+\tcase V8QI_FTYPE_V8QI:\n+\t  type = v8qi_ftype_v8qi;\n+\t  break;\n+\tcase V4SI_FTYPE_V4SI:\n+\t  type = v4si_ftype_v4si;\n+\t  break;\n+\tcase V4SI_FTYPE_V16QI:\n+\t  type = v4si_ftype_v16qi;\n+\t  break;\n+\tcase V4SI_FTYPE_V8HI:\n+\t  type = v4si_ftype_v8hi;\n+\t  break;\n+\tcase V4HI_FTYPE_V4HI:\n+\t  type = v4hi_ftype_v4hi;\n+\t  break;\n+\tcase V4SI_FTYPE_V4SF:\n+\t  type = v4si_ftype_v4sf;\n+\t  break;\n+\tcase V4SI_FTYPE_V2DF:\n+\t  type = v4si_ftype_v2df;\n+\t  break;\n+\tcase V4SF_FTYPE_V4SF:\n+\t  type = v4sf_ftype_v4sf;\n+\t  break;\n+\tcase V4SF_FTYPE_V4SI:\n+\t  type = v4sf_ftype_v4si;\n+\t  break;\n+\tcase V4SF_FTYPE_V2DF:\n+\t  type = v4sf_ftype_v2df;\n+\t  break;\n+\tcase V2DI_FTYPE_V2DI:\n+\t  type = v2di_ftype_v2di;\n+\t  break;\n+\tcase V2DI_FTYPE_V16QI:\n+\t  type = v2di_ftype_v16qi;\n+\t  break;\n+\tcase V2DI_FTYPE_V8HI:\n+\t  type = v2di_ftype_v8hi;\n+\t  break;\n+\tcase V2DI_FTYPE_V4SI:\n+\t  type = v2di_ftype_v4si;\n+\t  break;\n+\tcase V2SI_FTYPE_V2SI:\n+\t  type = v2si_ftype_v2si;\n+\t  break;\n+\tcase V2SI_FTYPE_V4SF:\n+\t  type = v2si_ftype_v4sf;\n+\t  break;\n+\tcase V2SI_FTYPE_V2DF:\n+\t  type = v2si_ftype_v2df;\n+\t  break;\n+\tcase V2SI_FTYPE_V2SF:\n+\t  type = v2si_ftype_v2sf;\n+\t  break;\n+\tcase V2DF_FTYPE_V4SF:\n+\t  type = v2df_ftype_v4sf;\n+\t  break;\n+\tcase V2DF_FTYPE_V2DF:\n+\t  type = v2df_ftype_v2df;\n+\t  break;\n+\tcase V2DF_FTYPE_V2SI:\n+\t  type = v2df_ftype_v2si;\n+\t  break;\n+\tcase V2DF_FTYPE_V4SI:\n+\t  type = v2df_ftype_v4si;\n+\t  break;\n+\tcase V2SF_FTYPE_V2SF:\n+\t  type = v2sf_ftype_v2sf;\n+\t  break;\n+\tcase V2SF_FTYPE_V2SI:\n+\t  type = v2sf_ftype_v2si;\n+\t  break;\n \tcase V4SF_FTYPE_V4SF_INT:\n \t  type = v4sf_ftype_v4sf_int;\n \t  break;\n@@ -19324,50 +19462,6 @@ ix86_init_mmx_sse_builtins (void)\n       def_builtin_const (d->mask, d->name, type, d->code);\n     }\n \n-  /* Add all builtins that are more or less simple operations on 1 operand.  */\n-  for (i = 0, d = bdesc_1arg; i < ARRAY_SIZE (bdesc_1arg); i++, d++)\n-    {\n-      enum machine_mode mode;\n-      tree type;\n-\n-      if (d->name == 0)\n-\tcontinue;\n-      mode = insn_data[d->icode].operand[1].mode;\n-\n-      switch (mode)\n-\t{\n-\tcase V16QImode:\n-\t  type = v16qi_ftype_v16qi;\n-\t  break;\n-\tcase V8HImode:\n-\t  type = v8hi_ftype_v8hi;\n-\t  break;\n-\tcase V4SImode:\n-\t  type = v4si_ftype_v4si;\n-\t  break;\n-\tcase V2DFmode:\n-\t  type = v2df_ftype_v2df;\n-\t  break;\n-\tcase V4SFmode:\n-\t  type = v4sf_ftype_v4sf;\n-\t  break;\n-\tcase V8QImode:\n-\t  type = v8qi_ftype_v8qi;\n-\t  break;\n-\tcase V4HImode:\n-\t  type = v4hi_ftype_v4hi;\n-\t  break;\n-\tcase V2SImode:\n-\t  type = v2si_ftype_v2si;\n-\t  break;\n-\n-\tdefault:\n-\t  abort ();\n-\t}\n-\n-      def_builtin_const (d->mask, d->name, type, d->code);\n-    }\n-\n   /* pcmpestr[im] insns.  */\n   for (i = 0, d = bdesc_pcmpestr;\n        i < ARRAY_SIZE (bdesc_pcmpestr);\n@@ -19435,14 +19529,8 @@ ix86_init_mmx_sse_builtins (void)\n   def_builtin (OPTION_MASK_ISA_SSE, \"__builtin_ia32_ldmxcsr\", void_ftype_unsigned, IX86_BUILTIN_LDMXCSR);\n   def_builtin (OPTION_MASK_ISA_SSE, \"__builtin_ia32_stmxcsr\", unsigned_ftype_void, IX86_BUILTIN_STMXCSR);\n   def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_cvtpi2ps\", v4sf_ftype_v4sf_v2si, IX86_BUILTIN_CVTPI2PS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_cvtps2pi\", v2si_ftype_v4sf, IX86_BUILTIN_CVTPS2PI);\n   def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_cvtsi2ss\", v4sf_ftype_v4sf_int, IX86_BUILTIN_CVTSI2SS);\n   def_builtin_const (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_64BIT, \"__builtin_ia32_cvtsi642ss\", v4sf_ftype_v4sf_int64, IX86_BUILTIN_CVTSI642SS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_cvtss2si\", int_ftype_v4sf, IX86_BUILTIN_CVTSS2SI);\n-  def_builtin_const (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_64BIT, \"__builtin_ia32_cvtss2si64\", int64_ftype_v4sf, IX86_BUILTIN_CVTSS2SI64);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_cvttps2pi\", v2si_ftype_v4sf, IX86_BUILTIN_CVTTPS2PI);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_cvttss2si\", int_ftype_v4sf, IX86_BUILTIN_CVTTSS2SI);\n-  def_builtin_const (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_64BIT, \"__builtin_ia32_cvttss2si64\", int64_ftype_v4sf, IX86_BUILTIN_CVTTSS2SI64);\n \n   def_builtin (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_maskmovq\", void_ftype_v8qi_v8qi_pchar, IX86_BUILTIN_MASKMOVQ);\n \n@@ -19454,32 +19542,24 @@ ix86_init_mmx_sse_builtins (void)\n   def_builtin (OPTION_MASK_ISA_SSE, \"__builtin_ia32_storehps\", void_ftype_pv2si_v4sf, IX86_BUILTIN_STOREHPS);\n   def_builtin (OPTION_MASK_ISA_SSE, \"__builtin_ia32_storelps\", void_ftype_pv2si_v4sf, IX86_BUILTIN_STORELPS);\n \n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_movmskps\", int_ftype_v4sf, IX86_BUILTIN_MOVMSKPS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_pmovmskb\", int_ftype_v8qi, IX86_BUILTIN_PMOVMSKB);\n   def_builtin (OPTION_MASK_ISA_SSE, \"__builtin_ia32_movntps\", void_ftype_pfloat_v4sf, IX86_BUILTIN_MOVNTPS);\n   def_builtin (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_movntq\", void_ftype_pdi_di, IX86_BUILTIN_MOVNTQ);\n-\n   def_builtin (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_sfence\", void_ftype_void, IX86_BUILTIN_SFENCE);\n \n   def_builtin_const (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_psadbw\", v1di_ftype_v8qi_v8qi, IX86_BUILTIN_PSADBW);\n \n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rcpps\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPPS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rcpss\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPSS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rsqrtps\", v4sf_ftype_v4sf, IX86_BUILTIN_RSQRTPS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rsqrtps_nr\", v4sf_ftype_v4sf, IX86_BUILTIN_RSQRTPS_NR);\n+  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_sqrtss\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTSS);\n   def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rsqrtss\", v4sf_ftype_v4sf, IX86_BUILTIN_RSQRTSS);\n+  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rcpss\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPSS);\n+\n   ftype = build_function_type_list (float_type_node,\n \t\t\t\t    float_type_node,\n \t\t\t\t    NULL_TREE);\n   def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rsqrtf\", ftype, IX86_BUILTIN_RSQRTF);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_sqrtps\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTPS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_sqrtps_nr\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTPS_NR);\n-  def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_sqrtss\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTSS);\n \n   /* Original 3DNow!  */\n   def_builtin (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_femms\", void_ftype_void, IX86_BUILTIN_FEMMS);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pavgusb\", v8qi_ftype_v8qi_v8qi, IX86_BUILTIN_PAVGUSB);\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pf2id\", v2si_ftype_v2sf, IX86_BUILTIN_PF2ID);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfacc\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFACC);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfadd\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFADD);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfcmpeq\", v2si_ftype_v2sf_v2sf, IX86_BUILTIN_PFCMPEQ);\n@@ -19488,23 +19568,16 @@ ix86_init_mmx_sse_builtins (void)\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfmax\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFMAX);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfmin\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFMIN);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfmul\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFMUL);\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfrcp\", v2sf_ftype_v2sf, IX86_BUILTIN_PFRCP);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfrcpit1\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFRCPIT1);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfrcpit2\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFRCPIT2);\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfrsqrt\", v2sf_ftype_v2sf, IX86_BUILTIN_PFRSQRT);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfrsqit1\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFRSQIT1);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfsub\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFSUB);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pfsubr\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFSUBR);\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pi2fd\", v2sf_ftype_v2si, IX86_BUILTIN_PI2FD);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW, \"__builtin_ia32_pmulhrw\", v4hi_ftype_v4hi_v4hi, IX86_BUILTIN_PMULHRW);\n \n   /* 3DNow! extension as used in the Athlon CPU.  */\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_pf2iw\", v2si_ftype_v2sf, IX86_BUILTIN_PF2IW);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_pfnacc\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFNACC);\n   def_builtin_const (OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_pfpnacc\", v2sf_ftype_v2sf_v2sf, IX86_BUILTIN_PFPNACC);\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_pi2fw\", v2sf_ftype_v2si, IX86_BUILTIN_PI2FW);\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_pswapdsf\", v2sf_ftype_v2sf, IX86_BUILTIN_PSWAPDSF);\n-  def_builtin_const (OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_pswapdsi\", v2si_ftype_v2si, IX86_BUILTIN_PSWAPDSI);\n \n   /* SSE2 */\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_maskmovdqu\", void_ftype_v16qi_v16qi_pchar, IX86_BUILTIN_MASKMOVDQU);\n@@ -19515,8 +19588,6 @@ ix86_init_mmx_sse_builtins (void)\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_loadhpd\", v2df_ftype_v2df_pcdouble, IX86_BUILTIN_LOADHPD);\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_loadlpd\", v2df_ftype_v2df_pcdouble, IX86_BUILTIN_LOADLPD);\n \n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_movmskpd\", int_ftype_v2df, IX86_BUILTIN_MOVMSKPD);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_pmovmskb128\", int_ftype_v16qi, IX86_BUILTIN_PMOVMSKB128);\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_movnti\", void_ftype_pint_int, IX86_BUILTIN_MOVNTI);\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_movntpd\", void_ftype_pdouble_v2df, IX86_BUILTIN_MOVNTPD);\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_movntdq\", void_ftype_pv2di_v2di, IX86_BUILTIN_MOVNTDQ);\n@@ -19526,29 +19597,8 @@ ix86_init_mmx_sse_builtins (void)\n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_pshufhw\", v8hi_ftype_v8hi_int, IX86_BUILTIN_PSHUFHW);\n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_psadbw128\", v2di_ftype_v16qi_v16qi, IX86_BUILTIN_PSADBW128);\n \n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_sqrtpd\", v2df_ftype_v2df, IX86_BUILTIN_SQRTPD);\n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_sqrtsd\", v2df_ftype_v2df, IX86_BUILTIN_SQRTSD);\n \n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtdq2pd\", v2df_ftype_v4si, IX86_BUILTIN_CVTDQ2PD);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtdq2ps\", v4sf_ftype_v4si, IX86_BUILTIN_CVTDQ2PS);\n-\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtpd2dq\", v4si_ftype_v2df, IX86_BUILTIN_CVTPD2DQ);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtpd2pi\", v2si_ftype_v2df, IX86_BUILTIN_CVTPD2PI);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtpd2ps\", v4sf_ftype_v2df, IX86_BUILTIN_CVTPD2PS);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvttpd2dq\", v4si_ftype_v2df, IX86_BUILTIN_CVTTPD2DQ);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvttpd2pi\", v2si_ftype_v2df, IX86_BUILTIN_CVTTPD2PI);\n-\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtpi2pd\", v2df_ftype_v2si, IX86_BUILTIN_CVTPI2PD);\n-\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtsd2si\", int_ftype_v2df, IX86_BUILTIN_CVTSD2SI);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvttsd2si\", int_ftype_v2df, IX86_BUILTIN_CVTTSD2SI);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2 | OPTION_MASK_ISA_64BIT, \"__builtin_ia32_cvtsd2si64\", int64_ftype_v2df, IX86_BUILTIN_CVTSD2SI64);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2 | OPTION_MASK_ISA_64BIT, \"__builtin_ia32_cvttsd2si64\", int64_ftype_v2df, IX86_BUILTIN_CVTTSD2SI64);\n-\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtps2dq\", v4si_ftype_v4sf, IX86_BUILTIN_CVTPS2DQ);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtps2pd\", v2df_ftype_v4sf, IX86_BUILTIN_CVTPS2PD);\n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvttps2dq\", v4si_ftype_v4sf, IX86_BUILTIN_CVTTPS2DQ);\n-\n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtsi2sd\", v2df_ftype_v2df_int, IX86_BUILTIN_CVTSI2SD);\n   def_builtin_const (OPTION_MASK_ISA_SSE2 | OPTION_MASK_ISA_64BIT, \"__builtin_ia32_cvtsi642sd\", v2df_ftype_v2df_int64, IX86_BUILTIN_CVTSI642SD);\n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_cvtsd2ss\", v4sf_ftype_v4sf_v2df, IX86_BUILTIN_CVTSD2SS);\n@@ -19587,7 +19637,7 @@ ix86_init_mmx_sse_builtins (void)\n \n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_pmaddwd128\", v4si_ftype_v8hi_v8hi, IX86_BUILTIN_PMADDWD128);\n \n-  /* Prescott New Instructions.  */\n+  /* SSE3.  */\n   def_builtin (OPTION_MASK_ISA_SSE3, \"__builtin_ia32_monitor\", void_ftype_pcvoid_unsigned_unsigned, IX86_BUILTIN_MONITOR);\n   def_builtin (OPTION_MASK_ISA_SSE3, \"__builtin_ia32_mwait\", void_ftype_unsigned_unsigned, IX86_BUILTIN_MWAIT);\n   def_builtin (OPTION_MASK_ISA_SSE3, \"__builtin_ia32_lddqu\", v16qi_ftype_pcchar, IX86_BUILTIN_LDDQU);\n@@ -19598,18 +19648,6 @@ ix86_init_mmx_sse_builtins (void)\n \n   /* SSE4.1. */\n   def_builtin (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_movntdqa\", v2di_ftype_pv2di, IX86_BUILTIN_MOVNTDQA);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovsxbw128\", v8hi_ftype_v16qi, IX86_BUILTIN_PMOVSXBW128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovsxbd128\", v4si_ftype_v16qi, IX86_BUILTIN_PMOVSXBD128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovsxbq128\", v2di_ftype_v16qi, IX86_BUILTIN_PMOVSXBQ128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovsxwd128\", v4si_ftype_v8hi, IX86_BUILTIN_PMOVSXWD128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovsxwq128\", v2di_ftype_v8hi, IX86_BUILTIN_PMOVSXWQ128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovsxdq128\", v2di_ftype_v4si, IX86_BUILTIN_PMOVSXDQ128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovzxbw128\", v8hi_ftype_v16qi, IX86_BUILTIN_PMOVZXBW128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovzxbd128\", v4si_ftype_v16qi, IX86_BUILTIN_PMOVZXBD128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovzxbq128\", v2di_ftype_v16qi, IX86_BUILTIN_PMOVZXBQ128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovzxwd128\", v4si_ftype_v8hi, IX86_BUILTIN_PMOVZXWD128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovzxwq128\", v2di_ftype_v8hi, IX86_BUILTIN_PMOVZXWQ128);\n-  def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmovzxdq128\", v2di_ftype_v4si, IX86_BUILTIN_PMOVZXDQ128);\n   def_builtin_const (OPTION_MASK_ISA_SSE4_1, \"__builtin_ia32_pmuldq128\", v2di_ftype_v4si_v4si, IX86_BUILTIN_PMULDQ128);\n \n   /* SSE4.2. */\n@@ -19832,9 +19870,8 @@ safe_vector_operand (rtx x, enum machine_mode mode)\n    variable number of operands.  */\n \n static rtx\n-ix86_expand_sse_operands_builtin (enum insn_code icode, tree exp,\n-\t\t\t\t  enum sse_builtin_type type,\n-\t\t\t\t  rtx target)\n+ix86_expand_args_builtin (enum insn_code icode, tree exp,\n+\t\t\t  enum ix86_builtin_type type, rtx target)\n {\n   rtx pat;\n   unsigned int i, nargs;\n@@ -19850,6 +19887,42 @@ ix86_expand_sse_operands_builtin (enum insn_code icode, tree exp,\n \n   switch (type)\n     {\n+    case FLOAT128_FTYPE_FLOAT128:\n+    case INT64_FTYPE_V4SF:\n+    case INT64_FTYPE_V2DF:\n+    case INT_FTYPE_V16QI:\n+    case INT_FTYPE_V8QI:\n+    case INT_FTYPE_V4SF:\n+    case INT_FTYPE_V2DF:\n+    case V16QI_FTYPE_V16QI:\n+    case V8HI_FTYPE_V8HI:\n+    case V8HI_FTYPE_V16QI:\n+    case V8QI_FTYPE_V8QI:\n+    case V4SI_FTYPE_V4SI:\n+    case V4SI_FTYPE_V16QI:\n+    case V4SI_FTYPE_V4SF:\n+    case V4SI_FTYPE_V8HI:\n+    case V4SI_FTYPE_V2DF:\n+    case V4HI_FTYPE_V4HI:\n+    case V4SF_FTYPE_V4SF:\n+    case V4SF_FTYPE_V4SI:\n+    case V4SF_FTYPE_V2DF:\n+    case V2DI_FTYPE_V2DI:\n+    case V2DI_FTYPE_V16QI:\n+    case V2DI_FTYPE_V8HI:\n+    case V2DI_FTYPE_V4SI:\n+    case V2DF_FTYPE_V2DF:\n+    case V2DF_FTYPE_V4SI:\n+    case V2DF_FTYPE_V4SF:\n+    case V2DF_FTYPE_V2SI:\n+    case V2SI_FTYPE_V2SI:\n+    case V2SI_FTYPE_V4SF:\n+    case V2SI_FTYPE_V2SF:\n+    case V2SI_FTYPE_V2DF:\n+    case V2SF_FTYPE_V2SF:\n+    case V2SF_FTYPE_V2SI:\n+      nargs = 1;\n+      break;\n     case V4SF_FTYPE_V4SF_INT:\n     case V2DI_FTYPE_V2DI_INT:\n     case V2DF_FTYPE_V2DF_INT:\n@@ -20328,7 +20401,7 @@ ix86_expand_unop_builtin (enum insn_code icode, tree exp,\n }\n \n /* Subroutine of ix86_expand_builtin to take care of three special unop insns:\n-   sqrtss, rsqrtss, rcpss.  */\n+   sqrtss, sqrtsd, rsqrtss, rsqrtsf, rcpss.  */\n \n static rtx\n ix86_expand_unop1_builtin (enum insn_code icode, tree exp, rtx target)\n@@ -21115,9 +21188,6 @@ ix86_expand_builtin (tree exp, rtx target, rtx subtarget ATTRIBUTE_UNUSED,\n     case IX86_BUILTIN_PAVGUSB:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_uavgv8qi3, exp, target);\n \n-    case IX86_BUILTIN_PF2ID:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_pf2id, exp, target, 0);\n-\n     case IX86_BUILTIN_PFACC:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_haddv2sf3, exp, target);\n \n@@ -21142,9 +21212,6 @@ ix86_expand_builtin (tree exp, rtx target, rtx subtarget ATTRIBUTE_UNUSED,\n     case IX86_BUILTIN_PFMUL:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_mulv2sf3, exp, target);\n \n-    case IX86_BUILTIN_PFRCP:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_rcpv2sf2, exp, target, 0);\n-\n     case IX86_BUILTIN_PFRCPIT1:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_rcpit1v2sf3, exp, target);\n \n@@ -21154,39 +21221,21 @@ ix86_expand_builtin (tree exp, rtx target, rtx subtarget ATTRIBUTE_UNUSED,\n     case IX86_BUILTIN_PFRSQIT1:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_rsqit1v2sf3, exp, target);\n \n-    case IX86_BUILTIN_PFRSQRT:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_rsqrtv2sf2, exp, target, 0);\n-\n     case IX86_BUILTIN_PFSUB:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_subv2sf3, exp, target);\n \n     case IX86_BUILTIN_PFSUBR:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_subrv2sf3, exp, target);\n \n-    case IX86_BUILTIN_PI2FD:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_floatv2si2, exp, target, 0);\n-\n     case IX86_BUILTIN_PMULHRW:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_pmulhrwv4hi3, exp, target);\n \n-    case IX86_BUILTIN_PF2IW:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_pf2iw, exp, target, 0);\n-\n     case IX86_BUILTIN_PFNACC:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_hsubv2sf3, exp, target);\n \n     case IX86_BUILTIN_PFPNACC:\n       return ix86_expand_binop_builtin (CODE_FOR_mmx_addsubv2sf3, exp, target);\n \n-    case IX86_BUILTIN_PI2FW:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_pi2fw, exp, target, 0);\n-\n-    case IX86_BUILTIN_PSWAPDSI:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_pswapdv2si2, exp, target, 0);\n-\n-    case IX86_BUILTIN_PSWAPDSF:\n-      return ix86_expand_unop_builtin (CODE_FOR_mmx_pswapdv2sf2, exp, target, 0);\n-\n     case IX86_BUILTIN_SQRTSD:\n       return ix86_expand_unop1_builtin (CODE_FOR_sse2_vmsqrtv2df2, exp, target);\n     case IX86_BUILTIN_LOADUPD:\n@@ -21456,24 +21505,20 @@ ix86_expand_builtin (tree exp, rtx target, rtx subtarget ATTRIBUTE_UNUSED,\n \treturn target;\n       }\n \n-    case IX86_BUILTIN_FABSQ:\n-      return ix86_expand_unop_builtin (CODE_FOR_abstf2, exp, target, 0);\n-\n     case IX86_BUILTIN_COPYSIGNQ:\n       return ix86_expand_binop_builtin (CODE_FOR_copysigntf3, exp, target);\n \n     default:\n       break;\n     }\n \n-  for (i = 0, d = bdesc_sse_args;\n-       i < ARRAY_SIZE (bdesc_sse_args);\n+  for (i = 0, d = bdesc_args;\n+       i < ARRAY_SIZE (bdesc_args);\n        i++, d++)\n     if (d->code == fcode)\n       {\n-\tenum sse_builtin_type type = (enum sse_builtin_type) d->flag;\n-\treturn ix86_expand_sse_operands_builtin (d->icode, exp,\n-\t\t\t\t\t\t type, target);\n+\tenum ix86_builtin_type type = (enum ix86_builtin_type) d->flag;\n+\treturn ix86_expand_args_builtin (d->icode, exp, type, target);\n       }\n \n   for (i = 0, d = bdesc_2arg; i < ARRAY_SIZE (bdesc_2arg); i++, d++)\n@@ -21489,10 +21534,6 @@ ix86_expand_builtin (tree exp, rtx target, rtx subtarget ATTRIBUTE_UNUSED,\n \treturn ix86_expand_binop_builtin (d->icode, exp, target);\n       }\n \n-  for (i = 0, d = bdesc_1arg; i < ARRAY_SIZE (bdesc_1arg); i++, d++)\n-    if (d->code == fcode)\n-      return ix86_expand_unop_builtin (d->icode, exp, target, 0);\n-\n   for (i = 0, d = bdesc_comi; i < ARRAY_SIZE (bdesc_comi); i++, d++)\n     if (d->code == fcode)\n       return ix86_expand_sse_comi (d, exp, target);"}]}