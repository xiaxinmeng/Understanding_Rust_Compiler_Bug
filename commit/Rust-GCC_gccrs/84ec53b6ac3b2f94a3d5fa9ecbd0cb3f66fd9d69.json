{"sha": "84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRlYzUzYjZhYzNiMmY5NGEzZDVmYTllY2JkMGNiM2Y2NmZkOWQ2OQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2011-11-26T21:44:24Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2011-11-26T21:44:24Z"}, "message": "re PR gcov-profile/51297 (Many gcov tests FAIL on Tru64, Solaris 8 and 9)\n\n\tPR gcov-profile/51297\n\t* gcov.c (main): Allocate initial names and sources arrays.\n\t(find_source): Don't check for null name or source arrays here.\n\nFrom-SVN: r181745", "tree": {"sha": "de59294aa4f30eaaa5e5fa683d4826bdce1a5f00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de59294aa4f30eaaa5e5fa683d4826bdce1a5f00"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7546aa9db2c3002376076fc37b02678f42cdfbc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7546aa9db2c3002376076fc37b02678f42cdfbc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7546aa9db2c3002376076fc37b02678f42cdfbc7"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "e20b3f635e00341fb6c639d8298871fd2fa468fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69", "patch": "@@ -1,3 +1,9 @@\n+2011-11-26  Nathan Sidwell  <nathan@acm.org>\n+\n+\tPR gcov-profile/51297\n+\t* gcov.c (main): Allocate initial names and sources arrays.\n+\t(find_source): Don't check for null name or source arrays here.\n+\n 2011-11-26  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/49912"}, {"sha": "29907a311e37907449942b5b268a6d183b53414f", "filename": "gcc/gcov.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69/gcc%2Fgcov.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69/gcc%2Fgcov.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcov.c?ref=84ec53b6ac3b2f94a3d5fa9ecbd0cb3f66fd9d69", "patch": "@@ -406,6 +406,11 @@ main (int argc, char **argv)\n   /* Handle response files.  */\n   expandargv (&argc, &argv);\n \n+  a_names = 10;\n+  names = XNEWVEC (name_map_t, a_names);\n+  a_sources = 10;\n+  sources = XNEWVEC (source_t, a_sources);\n+  \n   argno = process_args (argc, argv);\n   if (optind == argc)\n     print_usage (true);\n@@ -874,8 +879,6 @@ find_source (const char *file_name)\n     {\n       /* Extend the name map array -- we'll be inserting one or two\n \t entries.  */\n-      if (!a_names)\n-\ta_names = 10;\n       a_names *= 2;\n       name_map = XNEWVEC (name_map_t, a_names);\n       memcpy (name_map, names, n_names * sizeof (*names));\n@@ -894,8 +897,6 @@ find_source (const char *file_name)\n       \n       if (n_sources == a_sources)\n \t{\n-\t  if (!a_sources)\n-\t    a_sources = 10;\n \t  a_sources *= 2;\n \t  src = XNEWVEC (source_t, a_sources);\n \t  memcpy (src, sources, n_sources * sizeof (*sources));"}]}