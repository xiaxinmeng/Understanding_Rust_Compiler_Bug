{"sha": "ca94e524220617cadc4b32290474c50a0964fd46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E5NGU1MjQyMjA2MTdjYWRjNGIzMjI5MDQ3NGM1MGEwOTY0ZmQ0Ng==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2007-10-13T21:40:11Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2007-10-13T21:40:11Z"}, "message": "aix53.h: New file.\n\n        * config/rs6000/aix53.h: New file.\n        * config/rs6000/aix{41,43,51,52}.h (TARGET_ALTIVEC): Define to 0.\n        (TARGET_ALTIVEC_ABI): Same.\n        * config/rs6000/aix.h (TARGET_ALTIVEC): Delete.\n        (TARGET_ALTIVEC_ABI): Delete.\n        * config.gcc (powerpc-ibm-aix5*): Rename to aix5.2.  Add new\n        stanza defaulting to aix5.3.\n\nFrom-SVN: r129285", "tree": {"sha": "a99e7657f857a9e2e6b56e256eb7015ae2da5dbe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a99e7657f857a9e2e6b56e256eb7015ae2da5dbe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca94e524220617cadc4b32290474c50a0964fd46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca94e524220617cadc4b32290474c50a0964fd46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca94e524220617cadc4b32290474c50a0964fd46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca94e524220617cadc4b32290474c50a0964fd46/comments", "author": null, "committer": null, "parents": [{"sha": "0194fe648b119cba9d028d2f914b3685e48f15cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0194fe648b119cba9d028d2f914b3685e48f15cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0194fe648b119cba9d028d2f914b3685e48f15cd"}], "stats": {"total": 243, "additions": 237, "deletions": 6}, "files": [{"sha": "00693111638cafd45840978e6d70198f26f52973", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -1,3 +1,13 @@\n+2007-10-13  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* config/rs6000/aix53.h: New file.\n+\t* config/rs6000/aix{41,43,51,52}.h (TARGET_ALTIVEC): Define to 0.\n+\t(TARGET_ALTIVEC_ABI): Same.\n+\t* config/rs6000/aix.h (TARGET_ALTIVEC): Delete.\n+\t(TARGET_ALTIVEC_ABI): Delete.\n+\t* config.gcc (powerpc-ibm-aix5*): Rename to aix5.2.  Add new\n+\tstanza defaulting to aix5.3.\n+\n 2007-10-12  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* config/i386/i386.md (SI_REG, DI_REG): New constants."}, {"sha": "42d47e3dead866008e3e681f4e0adb0aa78d2d34", "filename": "gcc/config.gcc", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -2085,14 +2085,22 @@ rs6000-ibm-aix5.1.* | powerpc-ibm-aix5.1.*)\n \tthread_file='aix'\n \textra_headers=\n \t;;\n-rs6000-ibm-aix[56789].* | powerpc-ibm-aix[56789].*)\n+rs6000-ibm-aix5.2.* | powerpc-ibm-aix5.2.*)\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix52.h rs6000/xcoff.h\"\n \ttmake_file=rs6000/t-aix52\n \textra_options=\"${extra_options} rs6000/aix64.opt\"\n \tuse_collect2=yes\n \tthread_file='aix'\n \textra_headers=\n \t;;\n+rs6000-ibm-aix[56789].* | powerpc-ibm-aix[56789].*)\n+\ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix53.h rs6000/xcoff.h\"\n+\ttmake_file=rs6000/t-aix52\n+\textra_options=\"${extra_options} rs6000/aix64.opt\"\n+\tuse_collect2=yes\n+\tthread_file='aix'\n+\textra_headers=\n+\t;;\n s390-*-linux*)\n \ttm_file=\"s390/s390.h dbxelf.h elfos.h svr4.h linux.h s390/linux.h\"\n \ttmake_file=\"${tmake_file} t-dfprules s390/t-crtstuff s390/t-linux\""}, {"sha": "99587bb9b9561f671bbd2574375056676de1b4bc", "filename": "gcc/config/rs6000/aix.h", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix.h?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -36,11 +36,6 @@\n #undef  STACK_BOUNDARY\n #define STACK_BOUNDARY 128\n \n-/* AIX does not support Altivec.  */\n-#undef  TARGET_ALTIVEC\n-#define TARGET_ALTIVEC 0\n-#undef  TARGET_ALTIVEC_ABI\n-#define TARGET_ALTIVEC_ABI 0\n #undef  TARGET_IEEEQUAD\n #define TARGET_IEEEQUAD 0\n "}, {"sha": "a109084994af20a5f864a7b8ff01baa0a015efe1", "filename": "gcc/config/rs6000/aix41.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix41.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix41.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix41.h?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -47,6 +47,12 @@\n #undef PROCESSOR_DEFAULT\n #define PROCESSOR_DEFAULT PROCESSOR_PPC601\n \n+/* AIX does not support Altivec.  */\n+#undef  TARGET_ALTIVEC\n+#define TARGET_ALTIVEC 0\n+#undef  TARGET_ALTIVEC_ABI\n+#define TARGET_ALTIVEC_ABI 0\n+\n /* Define this macro as a C expression for the initializer of an\n    array of string to tell the driver program which options are\n    defaults for this target and thus do not need to be handled"}, {"sha": "56b24a363c62cbf557b335b863e3a04b8843f61f", "filename": "gcc/config/rs6000/aix43.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix43.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix43.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix43.h?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -122,6 +122,12 @@ do {\t\t\t\t\t\t\t\t\t\\\n #undef PROCESSOR_DEFAULT\n #define PROCESSOR_DEFAULT PROCESSOR_PPC604e\n \n+/* AIX does not support Altivec.  */\n+#undef  TARGET_ALTIVEC\n+#define TARGET_ALTIVEC 0\n+#undef  TARGET_ALTIVEC_ABI\n+#define TARGET_ALTIVEC_ABI 0\n+\n /* Define this macro as a C expression for the initializer of an\n    array of string to tell the driver program which options are\n    defaults for this target and thus do not need to be handled"}, {"sha": "4a5a9ecfe10b039e7b53dc6eeb8273acbcb23fa2", "filename": "gcc/config/rs6000/aix51.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix51.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix51.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix51.h?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -118,6 +118,12 @@ do {\t\t\t\t\t\t\t\t\t\\\n #undef PROCESSOR_DEFAULT\n #define PROCESSOR_DEFAULT PROCESSOR_PPC604e\n \n+/* AIX does not support Altivec.  */\n+#undef  TARGET_ALTIVEC\n+#define TARGET_ALTIVEC 0\n+#undef  TARGET_ALTIVEC_ABI\n+#define TARGET_ALTIVEC_ABI 0\n+\n /* Define this macro as a C expression for the initializer of an\n    array of string to tell the driver program which options are\n    defaults for this target and thus do not need to be handled"}, {"sha": "f0744e1b428ec9c9142cf064adb8fd2d2018ec5b", "filename": "gcc/config/rs6000/aix52.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix52.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix52.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix52.h?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -122,6 +122,12 @@ do {\t\t\t\t\t\t\t\t\t\\\n #undef  TARGET_POWER\n #define TARGET_POWER 0\n \n+/* AIX does not support Altivec.  */\n+#undef  TARGET_ALTIVEC\n+#define TARGET_ALTIVEC 0\n+#undef  TARGET_ALTIVEC_ABI\n+#define TARGET_ALTIVEC_ABI 0\n+\n /* Define this macro as a C expression for the initializer of an\n    array of string to tell the driver program which options are\n    defaults for this target and thus do not need to be handled"}, {"sha": "49c09edced56d7355476345186a0822b4985881e", "filename": "gcc/config/rs6000/aix53.h", "status": "added", "additions": 194, "deletions": 0, "changes": 194, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix53.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca94e524220617cadc4b32290474c50a0964fd46/gcc%2Fconfig%2Frs6000%2Faix53.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix53.h?ref=ca94e524220617cadc4b32290474c50a0964fd46", "patch": "@@ -0,0 +1,194 @@\n+/* Definitions of target machine for GNU compiler,\n+   for IBM RS/6000 POWER running AIX V5.2.\n+   Copyright (C) 2002, 2003, 2004, 2005, 2006, 2007\n+   Free Software Foundation, Inc.\n+   Contributed by David Edelsohn (edelsohn@gnu.org).\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published\n+   by the Free Software Foundation; either version 3, or (at your\n+   option) any later version.\n+\n+   GCC is distributed in the hope that it will be useful, but WITHOUT\n+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+   License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GCC; see the file COPYING3.  If not see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+/* Sometimes certain combinations of command options do not make sense\n+   on a particular target machine.  You can define a macro\n+   `OVERRIDE_OPTIONS' to take account of this.  This macro, if\n+   defined, is executed once just after all the command options have\n+   been parsed.\n+\n+   The macro SUBTARGET_OVERRIDE_OPTIONS is provided for subtargets, to\n+   get control.  */\n+\n+#define NON_POWERPC_MASKS (MASK_POWER | MASK_POWER2)\n+#define SUBTARGET_OVERRIDE_OPTIONS\t\t\t\t\t\\\n+do {\t\t\t\t\t\t\t\t\t\\\n+  if (TARGET_64BIT && (target_flags & NON_POWERPC_MASKS))\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      target_flags &= ~NON_POWERPC_MASKS;\t\t\t\t\\\n+      warning (0, \"-maix64 and POWER architecture are incompatible\");\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+  if (TARGET_64BIT && ! TARGET_POWERPC64)\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      target_flags |= MASK_POWERPC64;\t\t\t\t\t\\\n+      warning (0, \"-maix64 requires PowerPC64 architecture remain enabled\"); \\\n+    }\t\t\t\t\t\t\t\t\t\\\n+  if (TARGET_SOFT_FLOAT && TARGET_LONG_DOUBLE_128)\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      rs6000_long_double_type_size = 64;\t\t\t\t\\\n+      if (rs6000_explicit_options.long_double)\t\t\t\t\\\n+\twarning (0, \"soft-float and long-double-128 are incompatible\");\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+  if (TARGET_POWERPC64 && ! TARGET_64BIT)\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      error (\"-maix64 required: 64-bit computation with 32-bit addressing not yet supported\"); \\\n+    }\t\t\t\t\t\t\t\t\t\\\n+} while (0);\n+\n+#undef ASM_SPEC\n+#define ASM_SPEC \"-u %{maix64:-a64 %{!mcpu*:-mppc64}} %(asm_cpu)\"\n+\n+/* Common ASM definitions used by ASM_SPEC amongst the various targets\n+   for handling -mcpu=xxx switches.  */\n+#undef ASM_CPU_SPEC\n+#define ASM_CPU_SPEC \\\n+\"%{!mcpu*: %{!maix64: \\\n+  %{mpowerpc64: -mppc64} \\\n+  %{maltivec: -m970} \\\n+  %{!maltivec: %{!mpower64: %(asm_default)}}}} \\\n+%{mcpu=power3: -m620} \\\n+%{mcpu=power4: -mpwr4} \\\n+%{mcpu=power5: -mpwr5} \\\n+%{mcpu=power5+: -mpwr5x} \\\n+%{mcpu=power6: -mpwr6} \\\n+%{mcpu=power6x: -mpwr6} \\\n+%{mcpu=powerpc: -mppc} \\\n+%{mcpu=rs64a: -mppc} \\\n+%{mcpu=603: -m603} \\\n+%{mcpu=603e: -m603} \\\n+%{mcpu=604: -m604} \\\n+%{mcpu=604e: -m604} \\\n+%{mcpu=620: -m620} \\\n+%{mcpu=630: -m620} \\\n+%{mcpu=970: -m970} \\\n+%{mcpu=G5: -m970}\"\n+\n+#undef\tASM_DEFAULT_SPEC\n+#define ASM_DEFAULT_SPEC \"-mppc\"\n+\n+#undef TARGET_OS_CPP_BUILTINS\n+#define TARGET_OS_CPP_BUILTINS()     \\\n+  do                                 \\\n+    {                                \\\n+      builtin_define (\"_AIX43\");     \\\n+      builtin_define (\"_AIX51\");     \\\n+      builtin_define (\"_AIX52\");     \\\n+      builtin_define (\"_AIX53\");     \\\n+      TARGET_OS_AIX_CPP_BUILTINS (); \\\n+    }                                \\\n+  while (0)\n+\n+#undef CPP_SPEC\n+#define CPP_SPEC \"%{posix: -D_POSIX_SOURCE}\t\\\n+  %{ansi: -D_ANSI_C_SOURCE}\t\t\t\\\n+  %{maix64: -D__64BIT__}\t\t\t\\\n+  %{mpe: -I/usr/lpp/ppe.poe/include}\t\t\\\n+  %{pthread: -D_THREAD_SAFE}\"\n+\n+/* The GNU C++ standard library requires that these macros be \n+   defined.  Synchronize with libstdc++ os_defines.h.  */\n+#undef CPLUSPLUS_CPP_SPEC                       \n+#define CPLUSPLUS_CPP_SPEC\t\t\t\\\n+  \"-D_ALL_SOURCE\t\t\t\t\\\n+   %{maix64: -D__64BIT__}\t\t\t\\\n+   %{mpe: -I/usr/lpp/ppe.poe/include}\t\t\\\n+   %{pthread: -D_THREAD_SAFE}\"\n+\n+#undef  TARGET_DEFAULT\n+#define TARGET_DEFAULT (MASK_POWERPC | MASK_NEW_MNEMONICS)\n+\n+#undef  PROCESSOR_DEFAULT\n+#define PROCESSOR_DEFAULT PROCESSOR_POWER5\n+#undef  PROCESSOR_DEFAULT64\n+#define PROCESSOR_DEFAULT64 PROCESSOR_POWER5\n+\n+#undef  TARGET_POWER\n+#define TARGET_POWER 0\n+\n+/* Define this macro as a C expression for the initializer of an\n+   array of string to tell the driver program which options are\n+   defaults for this target and thus do not need to be handled\n+   specially when using `MULTILIB_OPTIONS'.\n+\n+   Do not define this macro if `MULTILIB_OPTIONS' is not defined in\n+   the target makefile fragment or if none of the options listed in\n+   `MULTILIB_OPTIONS' are set by default.  *Note Target Fragment::.  */\n+\n+#undef\tMULTILIB_DEFAULTS\n+\n+#undef LIB_SPEC\n+#define LIB_SPEC \"%{pg:-L/lib/profiled -L/usr/lib/profiled}\\\n+   %{p:-L/lib/profiled -L/usr/lib/profiled}\\\n+   %{!maix64:%{!shared:%{g*:-lg}}}\\\n+   %{mpe:-L/usr/lpp/ppe.poe/lib -lmpi -lvtd}\\\n+   %{pthread:-lpthreads} -lc\"\n+\n+#undef LINK_SPEC\n+#define LINK_SPEC \"-bpT:0x10000000 -bpD:0x20000000 %{!r:-btextro} -bnodelcsect\\\n+   %{static:-bnso %(link_syscalls) } %{shared:-bM:SRE %{!e:-bnoentry}}\\\n+   %{!maix64:%{!shared:%{g*: %(link_libg) }}} %{maix64:-b64}\\\n+   %{mpe:-binitfini:poe_remote_main}\"\n+\n+#undef STARTFILE_SPEC\n+#define STARTFILE_SPEC \"%{!shared:\\\n+   %{maix64:%{pg:gcrt0_64%O%s}%{!pg:%{p:mcrt0_64%O%s}%{!p:crt0_64%O%s}}}\\\n+   %{!maix64:\\\n+     %{pthread:%{pg:gcrt0_r%O%s}%{!pg:%{p:mcrt0_r%O%s}%{!p:crt0_r%O%s}}}\\\n+     %{!pthread:%{pg:gcrt0%O%s}%{!pg:%{p:mcrt0%O%s}%{!p:crt0%O%s}}}}}\"\n+\n+/* AIX V5 typedefs ptrdiff_t as \"long\" while earlier releases used \"int\".  */\n+\n+#undef PTRDIFF_TYPE\n+#define PTRDIFF_TYPE \"long int\"\n+\n+/* Type used for wchar_t, as a string used in a declaration.  */\n+#undef  WCHAR_TYPE\n+#define WCHAR_TYPE (!TARGET_64BIT ? \"short unsigned int\" : \"unsigned int\")\n+\n+/* Width of wchar_t in bits.  */\n+#undef  WCHAR_TYPE_SIZE\n+#define WCHAR_TYPE_SIZE (!TARGET_64BIT ? 16 : 32)\n+\n+/* AIX V5 uses PowerPC nop (ori 0,0,0) instruction as call glue for PowerPC\n+   and \"cror 31,31,31\" for POWER architecture.  */\n+\n+#undef RS6000_CALL_GLUE\n+#define RS6000_CALL_GLUE \"{cror 31,31,31|nop}\"\n+\n+/* AIX 4.2 and above provides initialization and finalization function\n+   support from linker command line.  */\n+#undef HAS_INIT_SECTION\n+#define HAS_INIT_SECTION\n+\n+#undef LD_INIT_SWITCH\n+#define LD_INIT_SWITCH \"-binitfini\"\n+\n+/* AIX 5.2 has the float and long double forms of math functions.  */\n+#undef TARGET_C99_FUNCTIONS\n+#define TARGET_C99_FUNCTIONS  1\n+\n+#ifndef _AIX52\n+extern long long int    atoll(const char *);  \n+#endif\n+\n+/* This target uses the aix64.opt file.  */\n+#define TARGET_USES_AIX64_OPT 1"}]}