{"sha": "7dce5088a717c7645e182950f744e52eacb05b3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RjZTUwODhhNzE3Yzc2NDVlMTgyOTUwZjc0NGU1MmVhY2IwNWIzYg==", "commit": {"author": {"name": "Paul Eggert", "email": "eggert@gnu.org", "date": "1993-09-28T00:23:58Z"}, "committer": {"name": "Paul Eggert", "email": "eggert@gnu.org", "date": "1993-09-28T00:23:58Z"}, "message": "(output_quoted_string): New function.\n\n(output_file_directive): Quote special characters in file names.\n\nFrom-SVN: r5499", "tree": {"sha": "3a8956a016a3998d1bf98bb185e0c99363574f96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3a8956a016a3998d1bf98bb185e0c99363574f96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dce5088a717c7645e182950f744e52eacb05b3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dce5088a717c7645e182950f744e52eacb05b3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dce5088a717c7645e182950f744e52eacb05b3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dce5088a717c7645e182950f744e52eacb05b3b/comments", "author": null, "committer": null, "parents": [{"sha": "6767265ceae1bd6fd5bade2d2a4095970f3329df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6767265ceae1bd6fd5bade2d2a4095970f3329df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6767265ceae1bd6fd5bade2d2a4095970f3329df"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "42902835e17e3fff9005c563f29581844c686c35", "filename": "gcc/toplev.c", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dce5088a717c7645e182950f744e52eacb05b3b/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dce5088a717c7645e182950f744e52eacb05b3b/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=7dce5088a717c7645e182950f744e52eacb05b3b", "patch": "@@ -1498,6 +1498,24 @@ strip_off_ending (name, len)\n     name[len - 4] = 0;\n }\n \n+/* Output a quoted string.  */\n+void\n+output_quoted_string (asm_file, string)\n+     FILE *asm_file;\n+     char *string;\n+{\n+  char c;\n+\n+  putc ('\\\"', asm_file);\n+  while ((c = *string++) != 0)\n+    {\n+      if (c == '\\\"' || c == '\\\\')\n+\tputc ('\\\\', asm_file);\n+      putc (c, asm_file);\n+    }\n+  putc ('\\\"', asm_file);\n+}\n+\n /* Output a file name in the form wanted by System V.  */\n \n void\n@@ -1522,7 +1540,9 @@ output_file_directive (asm_file, input_name)\n #ifdef ASM_OUTPUT_SOURCE_FILENAME\n   ASM_OUTPUT_SOURCE_FILENAME (asm_file, na);\n #else\n-  fprintf (asm_file, \"\\t.file\\t\\\"%s\\\"\\n\", na);\n+  fprintf (asm_file, \"\\t.file\\t\");\n+  output_quoted_string (asm_file, na);\n+  fputc ('\\n', asm_file);\n #endif\n #endif\n }"}]}