{"sha": "41112d9519d48a503864a157d90fd3c6ef974bfe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDExMTJkOTUxOWQ0OGE1MDM4NjRhMTU3ZDkwZmQzYzZlZjk3NGJmZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-07-10T17:56:40Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-07-10T17:56:40Z"}, "message": "compiler: add break label in 1,2-case select statement lowering\n    \n    CL 184998 added optimizations for one- and two-case select\n    statements. But it didn't handle break statement in the select\n    case correctly. Specifically, it didn't add the label definition,\n    so it could result in a dangling goto. This CL fixes this, by\n    adding the label definition.\n    \n    A test case is CL 185520.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/185519\n\nFrom-SVN: r273359", "tree": {"sha": "428f83007d8eb2564561333bb23809f32a8f7b41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/428f83007d8eb2564561333bb23809f32a8f7b41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/41112d9519d48a503864a157d90fd3c6ef974bfe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41112d9519d48a503864a157d90fd3c6ef974bfe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41112d9519d48a503864a157d90fd3c6ef974bfe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41112d9519d48a503864a157d90fd3c6ef974bfe/comments", "author": null, "committer": null, "parents": [{"sha": "b59ff58620d1d4ffff5c74bd9f9f10f3cb222d8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b59ff58620d1d4ffff5c74bd9f9f10f3cb222d8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b59ff58620d1d4ffff5c74bd9f9f10f3cb222d8e"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "582ded36f3e09052011740dd4e24f110c40f1809", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41112d9519d48a503864a157d90fd3c6ef974bfe/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41112d9519d48a503864a157d90fd3c6ef974bfe/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=41112d9519d48a503864a157d90fd3c6ef974bfe", "patch": "@@ -1,4 +1,4 @@\n-7a8e10be0ddb8909ce25a264d03b24cee4df60cc\n+170ecdf6b2eab8aac2b8c852fa95d3c36d6bf604\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "b0b576f8cbed42845d36ec2cbebf4689e58f46a0", "filename": "gcc/go/gofrontend/statements.cc", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41112d9519d48a503864a157d90fd3c6ef974bfe/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41112d9519d48a503864a157d90fd3c6ef974bfe/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.cc?ref=41112d9519d48a503864a157d90fd3c6ef974bfe", "patch": "@@ -5855,6 +5855,10 @@ Select_statement::lower_one_case(Block* b)\n     Statement::make_block_statement(scase.statements(), scase.location());\n   b->add_statement(bs);\n \n+  Statement* label =\n+    Statement::make_unnamed_label_statement(this->break_label());\n+  b->add_statement(label);\n+\n   this->is_lowered_ = true;\n   return Statement::make_block_statement(b, loc);\n }\n@@ -5958,6 +5962,10 @@ Select_statement::lower_two_case(Block* b)\n     Statement::make_if_statement(call, bchan, defcase.statements(), loc);\n   b->add_statement(ifs);\n \n+  Statement* label =\n+    Statement::make_unnamed_label_statement(this->break_label());\n+  b->add_statement(label);\n+\n   this->is_lowered_ = true;\n   return Statement::make_block_statement(b, loc);\n }"}]}