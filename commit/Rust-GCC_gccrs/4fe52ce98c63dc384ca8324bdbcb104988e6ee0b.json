{"sha": "4fe52ce98c63dc384ca8324bdbcb104988e6ee0b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGZlNTJjZTk4YzYzZGMzODRjYTgzMjRiZGJjYjEwNDk4OGU2ZWUwYg==", "commit": {"author": {"name": "Dale Johannesen", "email": "dalej@apple.com", "date": "2004-10-16T22:58:45Z"}, "committer": {"name": "Dale Johannesen", "email": "dalej@gcc.gnu.org", "date": "2004-10-16T22:58:45Z"}, "message": "c-common.c (c_common_get_alias_set): Use GGC for type_hash_table.\n\n\n2004-10-16  Dale Johannesen  <dalej@apple.com>\n\n        * c-common.c (c_common_get_alias_set):  Use GGC for type_hash_table.\n\nFrom-SVN: r89156", "tree": {"sha": "e3adf387f1433705cf67f8c6a6f3d95490a8dfe7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3adf387f1433705cf67f8c6a6f3d95490a8dfe7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b/comments", "author": null, "committer": null, "parents": [{"sha": "410c47a4d14b844eff8aca12165a615a5d900e48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/410c47a4d14b844eff8aca12165a615a5d900e48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/410c47a4d14b844eff8aca12165a615a5d900e48"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "2baac15979dd73ca0462df60bb8d58c2a8b523e5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4fe52ce98c63dc384ca8324bdbcb104988e6ee0b", "patch": "@@ -1,3 +1,7 @@\n+2004-10-16  Dale Johannesen  <dalej@apple.com>\n+\n+\t* c-common.c (c_common_get_alias_set):  Use GGC for type_hash_table.\n+\n 2004-10-16  Zdenek Dvorak  <dvorakz@suse.cz>\n \n \tPR tree-optimization/17766"}, {"sha": "c05779c33ad5a747d1bb281edd99a10dd0431b3e", "filename": "gcc/c-common.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fe52ce98c63dc384ca8324bdbcb104988e6ee0b/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=4fe52ce98c63dc384ca8324bdbcb104988e6ee0b", "patch": "@@ -2592,6 +2592,8 @@ c_type_hash (const void *p)\n   return ((size << 24) | (i << shift));\n }\n \n+static GTY((param_is (union tree_node))) htab_t type_hash_table;\n+\n /* Return the typed-based alias set for T, which may be an expression\n    or a type.  Return -1 if we don't do anything special.  */\n \n@@ -2600,7 +2602,6 @@ c_common_get_alias_set (tree t)\n {\n   tree u;\n   PTR *slot;\n-  static htab_t type_hash_table;\n \n   /* Permit type-punning when accessing a union, provided the access\n      is directly through the union.  For example, this code does not\n@@ -2719,7 +2720,7 @@ c_common_get_alias_set (tree t)\n   /* Look up t in hash table.  Only one of the compatible types within each\n      alias set is recorded in the table.  */\n   if (!type_hash_table)\n-    type_hash_table = htab_create (1021, c_type_hash,\n+    type_hash_table = htab_create_ggc (1021, c_type_hash,\n \t    (htab_eq) lang_hooks.types_compatible_p,\n \t    NULL);\n   slot = htab_find_slot (type_hash_table, t, INSERT);"}]}