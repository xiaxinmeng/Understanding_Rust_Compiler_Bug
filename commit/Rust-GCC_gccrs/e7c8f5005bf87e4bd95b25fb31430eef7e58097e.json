{"sha": "e7c8f5005bf87e4bd95b25fb31430eef7e58097e", "node_id": "C_kwDOANBUbNoAKGU3YzhmNTAwNWJmODdlNGJkOTViMjVmYjMxNDMwZWVmN2U1ODA5N2U", "commit": {"author": {"name": "Philipp Tomsich", "email": "philipp.tomsich@vrull.eu", "date": "2020-12-18T09:00:34Z"}, "committer": {"name": "Philipp Tomsich", "email": "philipp.tomsich@vrull.eu", "date": "2022-11-09T09:31:48Z"}, "message": "RISC-V: costs: handle BSWAP\n\nThe BSWAP operation is not handled in rtx_costs. Add it.\n\nWith Zbb, BSWAP for XLEN is a single instruction; for smaller modes,\nit will expand into two.\n\ngcc/ChangeLog:\n\n\t* config/riscv/riscv.cc (riscv_rtx_costs): Add BSWAP.", "tree": {"sha": "ca69810256667d14f6c2ab2e55975667730a42b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca69810256667d14f6c2ab2e55975667730a42b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7c8f5005bf87e4bd95b25fb31430eef7e58097e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7c8f5005bf87e4bd95b25fb31430eef7e58097e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7c8f5005bf87e4bd95b25fb31430eef7e58097e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7c8f5005bf87e4bd95b25fb31430eef7e58097e/comments", "author": {"login": "ptomsich", "id": 14983582, "node_id": "MDQ6VXNlcjE0OTgzNTgy", "avatar_url": "https://avatars.githubusercontent.com/u/14983582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptomsich", "html_url": "https://github.com/ptomsich", "followers_url": "https://api.github.com/users/ptomsich/followers", "following_url": "https://api.github.com/users/ptomsich/following{/other_user}", "gists_url": "https://api.github.com/users/ptomsich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptomsich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptomsich/subscriptions", "organizations_url": "https://api.github.com/users/ptomsich/orgs", "repos_url": "https://api.github.com/users/ptomsich/repos", "events_url": "https://api.github.com/users/ptomsich/events{/privacy}", "received_events_url": "https://api.github.com/users/ptomsich/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ptomsich", "id": 14983582, "node_id": "MDQ6VXNlcjE0OTgzNTgy", "avatar_url": "https://avatars.githubusercontent.com/u/14983582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptomsich", "html_url": "https://github.com/ptomsich", "followers_url": "https://api.github.com/users/ptomsich/followers", "following_url": "https://api.github.com/users/ptomsich/following{/other_user}", "gists_url": "https://api.github.com/users/ptomsich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptomsich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptomsich/subscriptions", "organizations_url": "https://api.github.com/users/ptomsich/orgs", "repos_url": "https://api.github.com/users/ptomsich/repos", "events_url": "https://api.github.com/users/ptomsich/events{/privacy}", "received_events_url": "https://api.github.com/users/ptomsich/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d699d32f47833cfab959a810dad48774c021c677", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d699d32f47833cfab959a810dad48774c021c677", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d699d32f47833cfab959a810dad48774c021c677"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "ab6c745c722cc563053deb393fac8c0f75ede733", "filename": "gcc/config/riscv/riscv.cc", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7c8f5005bf87e4bd95b25fb31430eef7e58097e/gcc%2Fconfig%2Friscv%2Friscv.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7c8f5005bf87e4bd95b25fb31430eef7e58097e/gcc%2Fconfig%2Friscv%2Friscv.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.cc?ref=e7c8f5005bf87e4bd95b25fb31430eef7e58097e", "patch": "@@ -2562,6 +2562,16 @@ riscv_rtx_costs (rtx x, machine_mode mode, int outer_code, int opno ATTRIBUTE_UN\n       *total = riscv_extend_cost (XEXP (x, 0), GET_CODE (x) == ZERO_EXTEND);\n       return false;\n \n+    case BSWAP:\n+      if (TARGET_ZBB)\n+\t{\n+\t  /* RISC-V only defines rev8 for XLEN, so we will need an extra\n+\t     shift-right instruction for smaller modes. */\n+\t  *total = COSTS_N_INSNS (mode == word_mode ? 1 : 2);\n+\t  return true;\n+\t}\n+      return false;\n+\n     case FLOAT:\n     case UNSIGNED_FLOAT:\n     case FIX:"}]}