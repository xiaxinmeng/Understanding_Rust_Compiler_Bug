{"sha": "20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjBlZDhiMzJiYWQ5ZDJlNDllYTlhMzk1MzNhZWFkOGVkYTMzZTNkZg==", "commit": {"author": {"name": "Tobias Grosser", "email": "grosser@fim.uni-passau.de", "date": "2008-10-23T17:00:35Z"}, "committer": {"name": "Tobias Grosser", "email": "grosser@gcc.gnu.org", "date": "2008-10-23T17:00:35Z"}, "message": "graphite.c (graphite_apply_transformations): Check for -fgraphite-identity.\n\n2008-10-23  Tobias Grosser  <grosser@fim.uni-passau.de>\n\n\t* graphite.c (graphite_apply_transformations): Check for\n\t-fgraphite-identity.\n\t* toplev.c (process_options): Add graphite_identity.\n\t* tree-ssa-loop.c (gate_graphite_transforms): Add graphite_identity.\n\nFrom-SVN: r141325", "tree": {"sha": "0da344ad10eca1534e339ee2475afd4287ca8206", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0da344ad10eca1534e339ee2475afd4287ca8206"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/comments", "author": {"login": "tobiasgrosser", "id": 521960, "node_id": "MDQ6VXNlcjUyMTk2MA==", "avatar_url": "https://avatars.githubusercontent.com/u/521960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tobiasgrosser", "html_url": "https://github.com/tobiasgrosser", "followers_url": "https://api.github.com/users/tobiasgrosser/followers", "following_url": "https://api.github.com/users/tobiasgrosser/following{/other_user}", "gists_url": "https://api.github.com/users/tobiasgrosser/gists{/gist_id}", "starred_url": "https://api.github.com/users/tobiasgrosser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tobiasgrosser/subscriptions", "organizations_url": "https://api.github.com/users/tobiasgrosser/orgs", "repos_url": "https://api.github.com/users/tobiasgrosser/repos", "events_url": "https://api.github.com/users/tobiasgrosser/events{/privacy}", "received_events_url": "https://api.github.com/users/tobiasgrosser/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1fa8718bc8b44c1aaef0a32b870d7383b2934c73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fa8718bc8b44c1aaef0a32b870d7383b2934c73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1fa8718bc8b44c1aaef0a32b870d7383b2934c73"}], "stats": {"total": 35, "additions": 22, "deletions": 13}, "files": [{"sha": "1ade1e74eac2f277de708d076a0f608709d894d8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "patch": "@@ -1,3 +1,10 @@\n+2008-10-23  Tobias Grosser  <grosser@fim.uni-passau.de>\n+\n+\t* graphite.c (graphite_apply_transformations): Check for\n+\t-fgraphite-identity.\n+\t* toplev.c (process_options): Add graphite_identity.\n+\t* tree-ssa-loop.c (gate_graphite_transforms): Add graphite_identity.\n+\n 2008-10-23  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n \t* config/bfin/bfin.c (bdesc_2arg): Add mulhisill, mulhisilh,"}, {"sha": "4e680676c5b40cfc02f2e44cf9d929169c4749d1", "filename": "gcc/common.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "patch": "@@ -567,6 +567,10 @@ floop-block\n Common Report Var(flag_loop_block) Optimization\n Enable Loop Blocking transformation\n \n+fgraphite-identity\n+Common Report Var(flag_graphite_identity) Optimization\n+Enable Graphite Identity transformation\n+\n fguess-branch-probability\n Common Report Var(flag_guess_branch_prob) Optimization\n Enable guessing of branch probabilities"}, {"sha": "a14dd141e3e439089271a25b279e2fe71761b52d", "filename": "gcc/graphite.c", "status": "modified", "additions": 7, "deletions": 11, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Fgraphite.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Fgraphite.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite.c?ref=20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "patch": "@@ -5068,17 +5068,13 @@ graphite_apply_transformations (scop_p scop)\n   if (flag_loop_block)\n     transform_done = graphite_trans_scop_block (scop);\n \n-#if 0 && ENABLE_CHECKING\n-  /* When the compiler is configured with ENABLE_CHECKING, always\n-     generate code, even if we did not apply any transformation.  This\n-     provides better code coverage of the backend code generator.\n-\n-     This also allows to check the performance for an identity\n-     transform: GIMPLE -> GRAPHITE -> GIMPLE; and the output of CLooG\n-     is never an identity: if CLooG optimizations are not disabled,\n-     the CLooG output is always optimized in control flow.  */\n-  transform_done = true;\n-#endif\n+  /* Generate code even if we did not apply any real transformation.\n+     This also allows to check the performance for the identity\n+     transformation: GIMPLE -> GRAPHITE -> GIMPLE\n+     Keep in mind that CLooG optimizes in control, so the loop structure\n+     may change, even if we only use -fgraphite-identity.  */ \n+  if (flag_graphite_identity)\n+    transform_done = true;\n \n   return transform_done;\n }"}, {"sha": "42ad2a48fdee713fd216e815b3e876d3464c99ac", "filename": "gcc/toplev.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "patch": "@@ -1707,7 +1707,8 @@ process_options (void)\n   if (flag_graphite\n       || flag_loop_block\n       || flag_loop_interchange\n-      || flag_loop_strip_mine)\n+      || flag_loop_strip_mine\n+      || flag_graphite_identity)\n     sorry (\"Graphite loop optimizations cannot be used\");\n #endif\n "}, {"sha": "2ea58f690430adf85f6d8fe2d580ad7a0d3f2e07", "filename": "gcc/tree-ssa-loop.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Ftree-ssa-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20ed8b32bad9d2e49ea9a39533aead8eda33e3df/gcc%2Ftree-ssa-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop.c?ref=20ed8b32bad9d2e49ea9a39533aead8eda33e3df", "patch": "@@ -305,7 +305,8 @@ gate_graphite_transforms (void)\n {\n   /* Enable -fgraphite pass if any one of the graphite optimization flags \n      is turned on.  */\n-  if (flag_loop_block || flag_loop_interchange || flag_loop_strip_mine)\n+  if (flag_loop_block || flag_loop_interchange || flag_loop_strip_mine\n+      || flag_graphite_identity)\n     flag_graphite = 1;\n \n   return flag_graphite != 0;"}]}