{"sha": "3819b963dc052accf5bcd51f16ac763b168901b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzgxOWI5NjNkYzA1MmFjY2Y1YmNkNTFmMTZhYzc2M2IxNjg5MDFiMA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-04-21T15:20:39Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-04-21T15:20:39Z"}, "message": "winnt.c (i386_pe_mark_dllimport): Make the new RTL have the same form as the old RTL.\n\n\t* config/i386/winnt.c (i386_pe_mark_dllimport): Make the new RTL\n\thave the same form as the old RTL.\n\nFrom-SVN: r65885", "tree": {"sha": "54754347d3d5c02f3a4a9561aabe54cfdef79b21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54754347d3d5c02f3a4a9561aabe54cfdef79b21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3819b963dc052accf5bcd51f16ac763b168901b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3819b963dc052accf5bcd51f16ac763b168901b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3819b963dc052accf5bcd51f16ac763b168901b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3819b963dc052accf5bcd51f16ac763b168901b0/comments", "author": null, "committer": null, "parents": [{"sha": "b33ee5f132f3519da290e14fec0f18487f2f80c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b33ee5f132f3519da290e14fec0f18487f2f80c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b33ee5f132f3519da290e14fec0f18487f2f80c6"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "fecac218bf5a4328523c941e7099677d3fa8fc71", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3819b963dc052accf5bcd51f16ac763b168901b0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3819b963dc052accf5bcd51f16ac763b168901b0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3819b963dc052accf5bcd51f16ac763b168901b0", "patch": "@@ -1,3 +1,8 @@\n+2003-04-21  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* config/i386/winnt.c (i386_pe_mark_dllimport): Make the new RTL\n+\thave the same form as the old RTL.\n+\n 2003-04-21  Andreas Jaeger  <aj@suse.de>\n \n         * cppcharset.c (_cpp_valid_ucn): Cast field precision to int."}, {"sha": "dc2ac7a80a66c8d8e4ffe88745550d87af6cda26", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3819b963dc052accf5bcd51f16ac763b168901b0/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3819b963dc052accf5bcd51f16ac763b168901b0/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=3819b963dc052accf5bcd51f16ac763b168901b0", "patch": "@@ -274,6 +274,7 @@ i386_pe_mark_dllimport (decl)\n   char  *newname;\n   tree idp;\n   rtx rtlname;\n+  rtx new_symbol;\n \n   rtlname = XEXP (DECL_RTL (decl), 0);\n   if (GET_CODE (rtlname) == SYMBOL_REF)\n@@ -335,8 +336,11 @@ i386_pe_mark_dllimport (decl)\n      identical.  */\n   idp = get_identifier (newname);\n \n-  XEXP (DECL_RTL (decl), 0) \n-    = gen_rtx_SYMBOL_REF (Pmode, IDENTIFIER_POINTER (idp));\n+  new_symbol = gen_rtx_SYMBOL_REF (Pmode, IDENTIFIER_POINTER (idp));\n+  XEXP (DECL_RTL (decl), 0)\n+    = ((GET_CODE (XEXP (DECL_RTL (decl), 0)) == MEM)\n+       ? gen_rtx (MEM, Pmode, new_symbol)\n+       : new_symbol);\n \n   /* Can't treat a pointer to this as a constant address */\n   DECL_NON_ADDR_CONST_P (decl) = 1;"}]}