{"sha": "9524880c99719df9b760d9a3b62fca2dfaaebf46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUyNDg4MGM5OTcxOWRmOWI3NjBkOWEzYjYyZmNhMmRmYWFlYmY0Ng==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@bitrange.com", "date": "2004-10-20T00:23:16Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2004-10-20T00:23:16Z"}, "message": "cfgrtl.c (rtl_verify_flow_info_1): When checking insns in a bb, don't inspect BLOCK_FOR_INSN for barriers.\n\n\t* cfgrtl.c (rtl_verify_flow_info_1): When checking insns in a bb,\n\tdon't inspect BLOCK_FOR_INSN for barriers.\n\t* emit-rtl.c (emit_barrier_before): Revert last change.\n\t(emit_barrier_after, emit_barrier): Ditto.\n\nFrom-SVN: r89308", "tree": {"sha": "e75e4f0aa1a4648195bdf85e2f1dbbaa94779077", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e75e4f0aa1a4648195bdf85e2f1dbbaa94779077"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9524880c99719df9b760d9a3b62fca2dfaaebf46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9524880c99719df9b760d9a3b62fca2dfaaebf46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9524880c99719df9b760d9a3b62fca2dfaaebf46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9524880c99719df9b760d9a3b62fca2dfaaebf46/comments", "author": null, "committer": null, "parents": [{"sha": "a47498de5390897528edf49ff8e7988a0e973243", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a47498de5390897528edf49ff8e7988a0e973243", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a47498de5390897528edf49ff8e7988a0e973243"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "fc8dd26def8974966b6fd9439c336799943110e9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9524880c99719df9b760d9a3b62fca2dfaaebf46/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9524880c99719df9b760d9a3b62fca2dfaaebf46/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9524880c99719df9b760d9a3b62fca2dfaaebf46", "patch": "@@ -1,5 +1,10 @@\n 2004-10-20  Hans-Peter Nilsson  <hp@bitrange.com>\n \n+\t* cfgrtl.c (rtl_verify_flow_info_1): When checking insns in a bb,\n+\tdon't inspect BLOCK_FOR_INSN for barriers.\n+\t* emit-rtl.c (emit_barrier_before): Revert last change.\n+\t(emit_barrier_after, emit_barrier): Ditto.\n+\n \t* doc/extend.texi (Extended Asm): Warn and provide example\n \tsolution for using a call-clobbered asm register.\n \t(Local Reg Vars): Similar.  Cross-reference example."}, {"sha": "9a96658f3e80db61302c1e4711e26295e10a76f5", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9524880c99719df9b760d9a3b62fca2dfaaebf46/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9524880c99719df9b760d9a3b62fca2dfaaebf46/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=9524880c99719df9b760d9a3b62fca2dfaaebf46", "patch": "@@ -2075,9 +2075,8 @@ rtl_verify_flow_info_1 (void)\n \n       for (x = BB_HEAD (bb); x != NEXT_INSN (BB_END (bb)); x = NEXT_INSN (x))\n \t/* We may have a barrier inside a basic block before dead code\n-\t   elimination.  They always have a NULL BLOCK_FOR_INSN.  */\n-\tif (BLOCK_FOR_INSN (x) != bb\n-\t    && !(BARRIER_P (x) && BLOCK_FOR_INSN (x) == NULL))\n+\t   elimination.  There is no BLOCK_FOR_INSN field in a barrier.  */\n+\tif (!BARRIER_P (x) && BLOCK_FOR_INSN (x) != bb)\n \t  {\n \t    debug_rtx (x);\n \t    if (! BLOCK_FOR_INSN (x))"}, {"sha": "ec7bec39adcc6bfbbf5328bf5bb64110c942eedd", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9524880c99719df9b760d9a3b62fca2dfaaebf46/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9524880c99719df9b760d9a3b62fca2dfaaebf46/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=9524880c99719df9b760d9a3b62fca2dfaaebf46", "patch": "@@ -4057,7 +4057,6 @@ emit_barrier_before (rtx before)\n   rtx insn = rtx_alloc (BARRIER);\n \n   INSN_UID (insn) = cur_insn_uid++;\n-  BLOCK_FOR_INSN (insn) = NULL;\n \n   add_insn_before (insn, before);\n   return insn;\n@@ -4273,7 +4272,6 @@ emit_barrier_after (rtx after)\n   rtx insn = rtx_alloc (BARRIER);\n \n   INSN_UID (insn) = cur_insn_uid++;\n-  BLOCK_FOR_INSN (insn) = NULL;\n \n   add_insn_after (insn, after);\n   return insn;\n@@ -4670,7 +4668,6 @@ emit_barrier (void)\n {\n   rtx barrier = rtx_alloc (BARRIER);\n   INSN_UID (barrier) = cur_insn_uid++;\n-  BLOCK_FOR_INSN (barrier) = NULL;\n   add_insn (barrier);\n   return barrier;\n }"}]}