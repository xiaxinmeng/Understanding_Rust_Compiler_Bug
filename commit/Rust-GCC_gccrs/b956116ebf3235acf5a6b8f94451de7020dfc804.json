{"sha": "b956116ebf3235acf5a6b8f94451de7020dfc804", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjk1NjExNmViZjMyMzVhY2Y1YTZiOGY5NDQ1MWRlNzAyMGRmYzgwNA==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gnu.org", "date": "2005-06-03T08:09:47Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2005-06-03T08:09:47Z"}, "message": "re PR testsuite/21292 (gen-vect-11b.c and gen-vect-11c.c fail)\n\n2005-06-03  Paolo Bonzini  <bonzini@gnu.org>\n\n\tPR tree-optimization/21292\n\n\t* lib/target-supports.exp (check_effective_target_vect_cmdline_needed):\n\tNew.\n\t* gcc.dg/tree-ssa/gen-vect-11.c, gcc.dg/tree-ssa/gen-vect-11a.c,\n\tgcc.dg/tree-ssa/gen-vect-11b.c, gcc.dg/tree-ssa/gen-vect-11c.c,\n\tgcc.dg/tree-ssa/gen-vect-2.c, gcc.dg/tree-ssa/gen-vect-25.c,\n\tgcc.dg/tree-ssa/gen-vect-26.c, gcc.dg/tree-ssa/gen-vect-28.c,\n\tgcc.dg/tree-ssa/gen-vect-32.c: Require it.\n\nFrom-SVN: r100535", "tree": {"sha": "1b67f885e3f100d2992c8d2f5874bcd3bb2d92bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b67f885e3f100d2992c8d2f5874bcd3bb2d92bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b956116ebf3235acf5a6b8f94451de7020dfc804", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b956116ebf3235acf5a6b8f94451de7020dfc804", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b956116ebf3235acf5a6b8f94451de7020dfc804", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b956116ebf3235acf5a6b8f94451de7020dfc804/comments", "author": {"login": "bonzini", "id": 42082, "node_id": "MDQ6VXNlcjQyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonzini", "html_url": "https://github.com/bonzini", "followers_url": "https://api.github.com/users/bonzini/followers", "following_url": "https://api.github.com/users/bonzini/following{/other_user}", "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "organizations_url": "https://api.github.com/users/bonzini/orgs", "repos_url": "https://api.github.com/users/bonzini/repos", "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8db33fd786132ebee2325b8105af987153be25d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8db33fd786132ebee2325b8105af987153be25d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8db33fd786132ebee2325b8105af987153be25d3"}], "stats": {"total": 52, "additions": 43, "deletions": 9}, "files": [{"sha": "705985f70001aa7a946d3b4ea6f10a52a634542c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,3 +1,15 @@\n+2005-06-03  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\tPR tree-optimization/21292\n+\n+\t* lib/target-supports.exp (check_effective_target_vect_cmdline_needed):\n+\tNew.\n+\t* gcc.dg/tree-ssa/gen-vect-11.c, gcc.dg/tree-ssa/gen-vect-11a.c,\n+\tgcc.dg/tree-ssa/gen-vect-11b.c, gcc.dg/tree-ssa/gen-vect-11c.c,\n+\tgcc.dg/tree-ssa/gen-vect-2.c, gcc.dg/tree-ssa/gen-vect-25.c,\n+\tgcc.dg/tree-ssa/gen-vect-26.c, gcc.dg/tree-ssa/gen-vect-28.c,\n+\tgcc.dg/tree-ssa/gen-vect-32.c: Require it.\n+\n 2005-06-02  Richard Henderson  <rth@redhat.com>\n \n \t* gcc.dg/sync-2.c: Use -march=i486 for i386."}, {"sha": "faba5451436fe26eb80d855351f341c3320a19c8", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-11.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "7fbbc0cf37eb4b557bc733ff13e84d89684ab46c", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-11a.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11a.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "c1c33c3ce1d44be02246d5ce997bf56b39112970", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-11b.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11b.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11b.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11b.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "e57554b8d4e3bd7024ecfa35108729a6e855dc3d", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-11c.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-11c.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "8bee1522dc98043e7d5abb61660ebbe9f6c4745b", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-2.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "e6127d8b8e6362e14a95103947572f7f53b9df57", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-25.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-25.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-25.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-25.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "bd6a51390e11a76a39195b5c11cf036459610cce", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-26.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-26.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-26.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-26.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "4f3bcf843753b1fdce2cbd7d6268887f1845add0", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-28.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-28.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-28.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-28.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "1a46a309daf05e27641ec6ea2d4f5f4266df5e90", "filename": "gcc/testsuite/gcc.dg/tree-ssa/gen-vect-32.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-32.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-32.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fgen-vect-32.c?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run } */\n+/* { dg-do run { target vect_cmdline_needed } } */\n /* { dg-options \"-O2 -ftree-vectorize -ftree-vectorizer-verbose=3 -fdump-tree-vect-stats\" } */\n \n #include <stdlib.h>"}, {"sha": "3b98c6b2d0f2067b2dab6124df227e0d89fd5f8d", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b956116ebf3235acf5a6b8f94451de7020dfc804/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=b956116ebf3235acf5a6b8f94451de7020dfc804", "patch": "@@ -725,6 +725,28 @@ proc check_effective_target_lp64 { } {\n     return $et_lp64_saved\n }\n \n+# Return 1 if the target needs a command line argument to enable a SIMD\n+# instruction set.\n+#\n+# This won't change for different subtargets so cache the result.\n+\n+proc check_effective_target_vect_cmdline_needed { } {\n+    global et_vect_cmdline_needed_saved\n+\n+    if [info exists et_vect_cmdline_needed_saved] {\n+\tverbose \"check_effective_target_vect_cmdline_needed: using cached result\" 2\n+    } else {\n+\tset et_vect_cmdline_needed_saved 1\n+\tif { [istarget ia64-*-*]\n+\t      || [istarget x86_64-*-*] } {\n+\t   set et_vect_cmdline_needed_saved 0\n+\t}\n+    }\n+\n+    verbose \"check_effective_target_vect_cmdline_needed: returning $et_vect_cmdline_needed_saved\" 2\n+    return $et_vect_cmdline_needed_saved\n+}\n+\n # Return 1 if the target supports hardware vectors of int, 0 otherwise.\n #\n # This won't change for different subtargets so cache the result."}]}