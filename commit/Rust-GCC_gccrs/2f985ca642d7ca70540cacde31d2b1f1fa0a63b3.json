{"sha": "2f985ca642d7ca70540cacde31d2b1f1fa0a63b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmY5ODVjYTY0MmQ3Y2E3MDU0MGNhY2RlMzFkMmIxZjFmYTBhNjNiMw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1999-11-13T01:04:19Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1999-11-13T01:04:19Z"}, "message": "Fix another gcc2 merge problem: fix switch statement ISO C conformancs bug\n\nFix another gcc2 merge problem: fix switch statement ISO C conformancs bug\n\t* stmt.c (pushcase, pushcase_range): Partially revert Oct 28 change.\n\nFrom-SVN: r30515", "tree": {"sha": "fdb9427435335bcc832534f326323a5ec0347bdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fdb9427435335bcc832534f326323a5ec0347bdd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3/comments", "author": null, "committer": null, "parents": [{"sha": "3fa4114a49f5fe202c20bca39b055d994fecdf8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fa4114a49f5fe202c20bca39b055d994fecdf8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fa4114a49f5fe202c20bca39b055d994fecdf8b"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "7b10f811f1746e6ec385019b1e03c4d336736423", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2f985ca642d7ca70540cacde31d2b1f1fa0a63b3", "patch": "@@ -1,3 +1,7 @@\n+Fri Nov 12 16:26:25 1999  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* stmt.c (pushcase, pushcase_range): Partially revert Oct 28 change.\n+\n Fri Nov 12 12:43:49 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* unroll.c (unroll_loop): Make temp an unsigned HOST_WIDE_INT."}, {"sha": "1f0d29102639eb04d1be81115b58a6d63c3f64ed", "filename": "gcc/stmt.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f985ca642d7ca70540cacde31d2b1f1fa0a63b3/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=2f985ca642d7ca70540cacde31d2b1f1fa0a63b3", "patch": "@@ -4535,6 +4535,10 @@ pushcase (value, converter, label, duplicate)\n   if (index_type == error_mark_node)\n     return 0;\n \n+  /* Convert VALUE to the type in which the comparisons are nominally done.  */\n+  if (value != 0)\n+    value = (*converter) (nominal_type, value);\n+\n   check_seenlabel ();\n \n   /* Fail if this value is out of range for the actual type of the index\n@@ -4544,10 +4548,6 @@ pushcase (value, converter, label, duplicate)\n \t  || ! int_fits_type_p (value, index_type)))\n     return 3;\n \n-  /* Convert VALUE to the type in which the comparisons are nominally done.  */\n-  if (value != 0)\n-    value = (*converter) (nominal_type, value);\n-\n   /* Fail if this is a duplicate or overlaps another entry.  */\n   if (value == 0)\n     {\n@@ -4619,6 +4619,9 @@ pushcase_range (value1, value2, converter, label, duplicate)\n   if (value2 == 0)\n     value2 = TYPE_MAX_VALUE (nominal_type);\n \n+  value1 = (*converter) (nominal_type, value1);\n+  value2 = (*converter) (nominal_type, value2);\n+\n   /* Fail if these values are out of range.  */\n   if (TREE_CONSTANT_OVERFLOW (value1)\n       || ! int_fits_type_p (value1, index_type))\n@@ -4628,9 +4631,6 @@ pushcase_range (value1, value2, converter, label, duplicate)\n       || ! int_fits_type_p (value2, index_type))\n     return 3;\n \n-  value1 = (*converter) (nominal_type, value1);\n-  value2 = (*converter) (nominal_type, value2);\n-\n   return add_case_node (value1, value2, label, duplicate);\n }\n "}]}