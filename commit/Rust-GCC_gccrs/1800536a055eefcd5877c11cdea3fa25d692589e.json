{"sha": "1800536a055eefcd5877c11cdea3fa25d692589e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTgwMDUzNmEwNTVlZWZjZDU4NzdjMTFjZGVhM2ZhMjVkNjkyNTg5ZQ==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2004-09-16T22:16:56Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2004-09-16T22:16:56Z"}, "message": "tree-ssa-operands.c (add_call_clobber_ops): Make read-only test apply only to TREE_STATIC and DECL_EXTERNAL.\n\n\n\t* tree-ssa-operands.c (add_call_clobber_ops): Make read-only\n\ttest apply only to TREE_STATIC and DECL_EXTERNAL.\n\nFrom-SVN: r87615", "tree": {"sha": "7260cac5c75003316b7d9996ef8b23d0b770c64e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7260cac5c75003316b7d9996ef8b23d0b770c64e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1800536a055eefcd5877c11cdea3fa25d692589e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1800536a055eefcd5877c11cdea3fa25d692589e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1800536a055eefcd5877c11cdea3fa25d692589e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1800536a055eefcd5877c11cdea3fa25d692589e/comments", "author": null, "committer": null, "parents": [{"sha": "42759f1ea05f7893f3bee4adbab74becf1a9f764", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42759f1ea05f7893f3bee4adbab74becf1a9f764", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42759f1ea05f7893f3bee4adbab74becf1a9f764"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "8648e7ca4d3f4445f313f14b312014579c8fdc6b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1800536a055eefcd5877c11cdea3fa25d692589e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1800536a055eefcd5877c11cdea3fa25d692589e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1800536a055eefcd5877c11cdea3fa25d692589e", "patch": "@@ -1,3 +1,8 @@\n+2004-09-16  Diego Novillo  <dnovillo@redhat.com>\n+\n+\t* tree-ssa-operands.c (add_call_clobber_ops): Make read-only\n+\ttest apply only to TREE_STATIC and DECL_EXTERNAL.\n+\n 2004-09-16  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n \n \t* Makefile.in (tree-cfg.o): Add CFGLAYOUT_H dependency."}, {"sha": "a007b502aaebc11905beb5bc48d4c1483b777a9e", "filename": "gcc/tree-ssa-operands.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1800536a055eefcd5877c11cdea3fa25d692589e/gcc%2Ftree-ssa-operands.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1800536a055eefcd5877c11cdea3fa25d692589e/gcc%2Ftree-ssa-operands.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-operands.c?ref=1800536a055eefcd5877c11cdea3fa25d692589e", "patch": "@@ -1620,9 +1620,15 @@ add_call_clobber_ops (tree stmt, tree callee)\n \t\t with a module static or we may not.  So we still must look\n \t\t anywhere else we can (such as the TREE_READONLY) to get\n \t\t better info.  */\n+\n \t      /* If VAR is read-only, don't add a V_MAY_DEF, just a\n-\t\t VUSE operand.  */\n-\t      else if (TREE_READONLY (var))\n+\t\t VUSE operand.  FIXME, this is quirky.  TREE_READONLY\n+\t\t by itself is not enough here.  We can only decide\n+\t\t that the call will not affect VAR if all these\n+\t\t conditions are met.  One would think that\n+\t\t TREE_READONLY should be sufficient.  */\n+\t      else if (TREE_READONLY (var)\n+\t\t       && (TREE_STATIC (var) || DECL_EXTERNAL (var)))\n \t\tadd_stmt_operand (&var, stmt, opf_none);\n \t      else\n \t\tadd_stmt_operand (&var, stmt, opf_is_def);"}]}