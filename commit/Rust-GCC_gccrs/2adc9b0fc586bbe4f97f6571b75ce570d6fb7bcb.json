{"sha": "2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFkYzliMGZjNTg2YmJlNGY5N2Y2NTcxYjc1Y2U1NzBkNmZiN2JjYg==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-01-25T17:47:26Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-01-25T17:47:26Z"}, "message": "builtins.c (purge_builtin_constant_p): Scan insn stream sequentially rather than by basic block.\n\n\n\t* builtins.c (purge_builtin_constant_p): Scan insn stream\n\tsequentially rather than by basic block.\n\t* function.c (purge_addressof): Simplify test with INSN_P.\n\nFrom-SVN: r61789", "tree": {"sha": "ca6423303b1850aca0173bd4cd22a7d940b9b92e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca6423303b1850aca0173bd4cd22a7d940b9b92e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb/comments", "author": null, "committer": null, "parents": [{"sha": "ad487c38165975bc7980d362b3a664808deae35c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad487c38165975bc7980d362b3a664808deae35c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad487c38165975bc7980d362b3a664808deae35c"}], "stats": {"total": 41, "additions": 20, "deletions": 21}, "files": [{"sha": "dd4a9492fec6efc1d952606ae9ee9d5bb1d2f8a2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb", "patch": "@@ -1,3 +1,9 @@\n+2002-01-25  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* builtins.c (purge_builtin_constant_p): Scan insn stream\n+\tsequentially rather than by basic block.\n+\t* function.c (purge_addressof): Simplify test with INSN_P.\n+\n 2003-01-25  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* combine.c (simplify_comparison, case AND): Remove a redundant"}, {"sha": "d7d8054d539719df73572628135cc9d3a7fc7a46", "filename": "gcc/builtins.c", "status": "modified", "additions": 13, "deletions": 19, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb", "patch": "@@ -4720,26 +4720,20 @@ default_expand_builtin (exp, target, subtarget, mode, ignore)\n void\n purge_builtin_constant_p ()\n {\n-  rtx insn, done, set;\n-  rtx arg, new, note;\n-  basic_block bb;\n+  rtx insn, set, arg, new, note;\n \n-  FOR_EACH_BB (bb)\n-    {\n-      done = NEXT_INSN (bb->end);\n-      for (insn = bb->head; insn != done; insn = NEXT_INSN (insn))\n-\tif (INSN_P (insn)\n-\t    && (set = single_set (insn)) != NULL_RTX\n-\t    && GET_CODE (SET_SRC (set)) == CONSTANT_P_RTX)\n-\t  {\n-\t    arg = XEXP (SET_SRC (set), 0);\n-\t    new = CONSTANT_P (arg) ? const1_rtx : const0_rtx;\n-\t    validate_change (insn, &SET_SRC (set), new, 0);\n+  for (insn = get_insns (); insn; insn = NEXT_INSN (insn))\n+    if (INSN_P (insn)\n+\t&& (set = single_set (insn)) != NULL_RTX\n+\t&& GET_CODE (SET_SRC (set)) == CONSTANT_P_RTX)\n+      {\n+\targ = XEXP (SET_SRC (set), 0);\n+\tnew = CONSTANT_P (arg) ? const1_rtx : const0_rtx;\n+\tvalidate_change (insn, &SET_SRC (set), new, 0);\n \n-\t    /* Remove the REG_EQUAL note from the insn.  */\n-\t    if ((note = find_reg_note (insn, REG_EQUAL, NULL_RTX)) != 0)\n-\t      remove_note (insn, note);\n-\t  }\n-    }\n+\t/* Remove the REG_EQUAL note from the insn.  */\n+\tif ((note = find_reg_note (insn, REG_EQUAL, NULL_RTX)) != 0)\n+\t  remove_note (insn, note);\n+      }\n }\n "}, {"sha": "c57ad6dc659314124fe43d68713e05d7e096de92", "filename": "gcc/function.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=2adc9b0fc586bbe4f97f6571b75ce570d6fb7bcb", "patch": "@@ -3372,8 +3372,7 @@ purge_addressof (insns)\n   compute_insns_for_mem (insns, NULL_RTX, ht);\n \n   for (insn = insns; insn; insn = NEXT_INSN (insn))\n-    if (GET_CODE (insn) == INSN || GET_CODE (insn) == JUMP_INSN\n-\t|| GET_CODE (insn) == CALL_INSN)\n+    if (INSN_P (insn))\n       {\n \tif (! purge_addressof_1 (&PATTERN (insn), insn,\n \t\t\t\t asm_noperands (PATTERN (insn)) > 0, 0, ht))"}]}