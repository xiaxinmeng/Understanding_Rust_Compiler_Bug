{"sha": "45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDVjYzA2MGViNWRjZGViN2M1MGI0ZWIyODQxMGJlM2QxMjQ4YTJiYQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-05-12T15:16:31Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-05-12T15:16:31Z"}, "message": "(check_dbra_loop): When reversing loop when\nno_use_except_counting is false, there must be only one biv.\n\nFrom-SVN: r9642", "tree": {"sha": "58fdf95a856ddf8d72c561e37fa69b0020d89ecd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58fdf95a856ddf8d72c561e37fa69b0020d89ecd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba/comments", "author": null, "committer": null, "parents": [{"sha": "a193a6db03849c62be72fc41504563a87c38e518", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a193a6db03849c62be72fc41504563a87c38e518", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a193a6db03849c62be72fc41504563a87c38e518"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "f6fc598d8d1c4850d37dce6577e404b656a7d2fb", "filename": "gcc/loop.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=45cc060eb5dcdeb7c50b4eb28410be3d1248a2ba", "patch": "@@ -5724,6 +5724,11 @@ check_dbra_loop (loop_end, insn_count, loop_start)\n \t all memory references have non-overlapping addresses\n \t (obviously true if only one write)\n \t allow 2 insns for the compare/jump at the end of the loop.  */\n+      /* Also, we must avoid any instructions which use both the reversed\n+\t biv and another biv.  Such instructions will fail if the loop is\n+\t reversed.  We meet this condition by requiring that either\n+\t no_use_except_counting is true, or else that there is only\n+\t one biv.  */\n       int num_nonfixed_reads = 0;\n       /* 1 if the iteration var is used only to count iterations.  */\n       int no_use_except_counting = 0;\n@@ -5788,8 +5793,9 @@ check_dbra_loop (loop_end, insn_count, loop_start)\n \t  && !loop_has_volatile\n \t  && reversible_mem_store\n \t  && (no_use_except_counting\n-\t      || (bl->giv_count + bl->biv_count + num_mem_sets\n-\t\t  + num_movables + 2 == insn_count)))\n+\t      || ((bl->giv_count + bl->biv_count + num_mem_sets\n+\t\t   + num_movables + 2 == insn_count)\n+\t\t  && (bl == loop_iv_list && bl->next == 0))))\n \t{\n \t  rtx tem;\n "}]}