{"sha": "c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzY4YjFiYzdlYjEzZDFkYjdmYzdiNjFhMzYwMWNhYzljYjc1YmNiZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2011-11-10T20:28:04Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2011-11-10T20:28:04Z"}, "message": "re PR debug/50983 (incorrect DW_LNS_negate_stmt)\n\n\tPR debug/50983\n\t* dwarf2out.c (set_cur_line_info_table): Restore the last is_stmt\n\tvalue in the current line table.\n\nFrom-SVN: r181269", "tree": {"sha": "52fffe30d4f92cf23695b52077e0393f56988f48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52fffe30d4f92cf23695b52077e0393f56988f48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/comments", "author": null, "committer": null, "parents": [{"sha": "033ba5bf9cbcdfb60cccbf61796b19b792de0ac9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/033ba5bf9cbcdfb60cccbf61796b19b792de0ac9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/033ba5bf9cbcdfb60cccbf61796b19b792de0ac9"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "9c7a2f8ce3a55ee24917ef6928c0bf600218b2d4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "patch": "@@ -1,3 +1,9 @@\n+2011-11-10  Roberto Agostino Vitillo  <ravitillo@lbl.gov>\n+\n+\tPR debug/50983\n+\t* dwarf2out.c (set_cur_line_info_table): Restore the last is_stmt\n+\tvalue in the current line table.\n+\n 2011-11-10  Nathan Sidwell  <nathan@acm.org>\n \n \t* gcov.c (struct function_info): Make src an index, not a pointer."}, {"sha": "7b5930ef6ea758d87c4b94796e4b3404dd22e0ac", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "patch": "@@ -20371,6 +20371,10 @@ set_cur_line_info_table (section *sec)\n       VEC_safe_push (dw_line_info_table_p, gc, separate_line_info, table);\n     }\n \n+  if (DWARF2_ASM_LINE_DEBUG_INFO)\n+    table->is_stmt = (cur_line_info_table\n+\t\t      ? cur_line_info_table->is_stmt\n+\t\t      : DWARF_LINE_DEFAULT_IS_STMT_START);\n   cur_line_info_table = table;\n }\n "}, {"sha": "f3315cb84bababec2dac1344fbf0b4e4375363c0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "patch": "@@ -1,3 +1,8 @@\n+2011-11-10  Jason Merrill  <jason@redhat.com>\n+\n+\tPR debug/50983\n+\t* gcc.dg/debug/dwarf2/asm-line1.c: New.\n+\n 2011-11-10  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/atomic6_1.adb: New test."}, {"sha": "1d2e1481e5af8a9ed591df8719b93a591763a451", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/asm-line1.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fasm-line1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fasm-line1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fasm-line1.c?ref=c68b1bc7eb13d1db7fc7b61a3601cac9cb75bcbe", "patch": "@@ -0,0 +1,20 @@\n+/* PR debug/50983 */\n+/* { dg-do compile { target *-*-linux-gnu } } */\n+/* { dg-options \"-O0 -gdwarf-2\" } */\n+/* { dg-final { scan-assembler \"is_stmt 1\" } } */\n+\n+int i;\n+void f() __attribute ((section (\"foo\")));\n+void f() { if (i) ++i; else --i; }\n+\n+void fun()\n+{\n+  return;\n+}\n+\n+int main()\n+{\n+  f();\n+  fun();\n+  return 0;\n+}"}]}