{"sha": "022d9ce887c7ca3637c597ed81d90d66e23071a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDIyZDljZTg4N2M3Y2EzNjM3YzU5N2VkODFkOTBkNjZlMjMwNzFhMQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-01-23T08:33:32Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-01-23T08:33:32Z"}, "message": "[multiple changes]\n\n2012-01-23  Gary Dismukes  <dismukes@adacore.com>\n\n\t* exp_util.adb (Is_Iterated_Container): Test\n\tIs_Entity_Name when searching for calls to the default iterator,\n\tto avoid blowing up on indirect calls which have an explicit\n\tdereference as the call name.\n\n2012-01-23  Thomas Quinot  <quinot@adacore.com>\n\n\t* errout.adb (Set_Msg_Node): For an N_Expanded_Name, output\n\tthe complete expanded name, rather than just its Selector_Name.\n\n2012-01-23  Thomas Quinot  <quinot@adacore.com>\n\n\t* a-textio.adb (Put): Rewrite one-parameter Character version to\n\tjust call the two-parameter one with Current_Out.\n\nFrom-SVN: r183408", "tree": {"sha": "24c6d2f65f334790e0dc2c1ed80a70cc97b0af9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24c6d2f65f334790e0dc2c1ed80a70cc97b0af9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/022d9ce887c7ca3637c597ed81d90d66e23071a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/022d9ce887c7ca3637c597ed81d90d66e23071a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/022d9ce887c7ca3637c597ed81d90d66e23071a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/022d9ce887c7ca3637c597ed81d90d66e23071a1/comments", "author": null, "committer": null, "parents": [{"sha": "e1308fa85fd1a90f8d8da884531b6081d2a4d8a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1308fa85fd1a90f8d8da884531b6081d2a4d8a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1308fa85fd1a90f8d8da884531b6081d2a4d8a7"}], "stats": {"total": 94, "additions": 48, "deletions": 46}, "files": [{"sha": "0682c646a61bf6c426d3c4ec1a2011ad21bf7a15", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=022d9ce887c7ca3637c597ed81d90d66e23071a1", "patch": "@@ -1,3 +1,20 @@\n+2012-01-23  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* exp_util.adb (Is_Iterated_Container): Test\n+\tIs_Entity_Name when searching for calls to the default iterator,\n+\tto avoid blowing up on indirect calls which have an explicit\n+\tdereference as the call name.\n+\n+2012-01-23  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* errout.adb (Set_Msg_Node): For an N_Expanded_Name, output\n+\tthe complete expanded name, rather than just its Selector_Name.\n+\n+2012-01-23  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* a-textio.adb (Put): Rewrite one-parameter Character version to\n+\tjust call the two-parameter one with Current_Out.\n+\n 2012-01-23  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* freeze.adb (Check_Current_Instance): Issue an"}, {"sha": "28e5541ab014ba1d91cf37980fdb307bfb18406b", "filename": "gcc/ada/a-textio.adb", "status": "modified", "additions": 2, "deletions": 25, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2Fa-textio.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2Fa-textio.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-textio.adb?ref=022d9ce887c7ca3637c597ed81d90d66e23071a1", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2010, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1274,30 +1274,7 @@ package body Ada.Text_IO is\n \n    procedure Put (Item : Character) is\n    begin\n-      FIO.Check_Write_Status (AP (Current_Out));\n-\n-      if Current_Out.Line_Length /= 0\n-        and then Current_Out.Col > Current_Out.Line_Length\n-      then\n-         New_Line (Current_Out);\n-      end if;\n-\n-      --  If lower half character, or brackets encoding, output directly\n-\n-      if Character'Pos (Item) < 16#80#\n-        or else Default_WCEM = WCEM_Brackets\n-      then\n-         if fputc (Character'Pos (Item), Current_Out.Stream) = EOF then\n-            raise Device_Error;\n-         end if;\n-\n-      --  Case of upper half character with non-brackets encoding\n-\n-      else\n-         Put_Encoded (Current_Out, Item);\n-      end if;\n-\n-      Current_Out.Col := Current_Out.Col + 1;\n+      Put (Current_Out, Item);\n    end Put;\n \n    ---------"}, {"sha": "5e3bb4a81e55f86b3ea3571b53dec389d13c70df", "filename": "gcc/ada/errout.adb", "status": "modified", "additions": 24, "deletions": 18, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2Ferrout.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2Ferrout.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrout.adb?ref=022d9ce887c7ca3637c597ed81d90d66e23071a1", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2011, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -144,7 +144,9 @@ package body Errout is\n \n    procedure Set_Msg_Node (Node : Node_Id);\n    --  Add the sequence of characters for the name associated with the\n-   --  given node to the current message.\n+   --  given node to the current message. For N_Designator, N_Defining_Program_\n+   --  Unit_Name, N_Selected_Component, and N_Expanded_Name, the Prefix is\n+   --  included as well.\n \n    procedure Set_Msg_Text (Text : String; Flag : Source_Ptr);\n    --  Add a sequence of characters to the current message. The characters may\n@@ -2499,24 +2501,28 @@ package body Errout is\n       Nam : Name_Id;\n \n    begin\n-      if Nkind (Node) = N_Designator then\n-         Set_Msg_Node (Name (Node));\n-         Set_Msg_Char ('.');\n-         Set_Msg_Node (Identifier (Node));\n-         return;\n+      case Nkind (Node) is\n+         when N_Designator =>\n+            Set_Msg_Node (Name (Node));\n+            Set_Msg_Char ('.');\n+            Set_Msg_Node (Identifier (Node));\n+            return;\n \n-      elsif Nkind (Node) = N_Defining_Program_Unit_Name then\n-         Set_Msg_Node (Name (Node));\n-         Set_Msg_Char ('.');\n-         Set_Msg_Node (Defining_Identifier (Node));\n-         return;\n+         when N_Defining_Program_Unit_Name =>\n+            Set_Msg_Node (Name (Node));\n+            Set_Msg_Char ('.');\n+            Set_Msg_Node (Defining_Identifier (Node));\n+            return;\n \n-      elsif Nkind (Node) = N_Selected_Component then\n-         Set_Msg_Node (Prefix (Node));\n-         Set_Msg_Char ('.');\n-         Set_Msg_Node (Selector_Name (Node));\n-         return;\n-      end if;\n+         when N_Selected_Component | N_Expanded_Name =>\n+            Set_Msg_Node (Prefix (Node));\n+            Set_Msg_Char ('.');\n+            Set_Msg_Node (Selector_Name (Node));\n+            return;\n+\n+         when others =>\n+            null;\n+      end case;\n \n       --  The only remaining possibilities are identifiers, defining\n       --  identifiers, pragmas, and pragma argument associations."}, {"sha": "41bfa382fea8793b0b0eb8ee2cfcdd86cccfbbff", "filename": "gcc/ada/exp_util.adb", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2Fexp_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/022d9ce887c7ca3637c597ed81d90d66e23071a1/gcc%2Fada%2Fexp_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.adb?ref=022d9ce887c7ca3637c597ed81d90d66e23071a1", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2011, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -4249,9 +4249,11 @@ package body Exp_Util is\n \n                      --  The call must invoke the default iterate routine of\n                      --  the container and the transient object must appear as\n-                     --  the first actual parameter.\n+                     --  the first actual parameter. Skip any calls whose names\n+                     --  are not entities.\n \n-                     if Entity (Name (Call)) = Iter\n+                     if Is_Entity_Name (Name (Call))\n+                       and then Entity (Name (Call)) = Iter\n                        and then Present (Parameter_Associations (Call))\n                      then\n                         Param := First (Parameter_Associations (Call));"}]}