{"sha": "dcdfd47859e46ab2215bdc629fafe83e3c336f1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNkZmQ0Nzg1OWU0NmFiMjIxNWJkYzYyOWZhZmU4M2UzYzMzNmYxYw==", "commit": {"author": {"name": "Carl Love", "email": "carll@gcc.gnu.org", "date": "2018-03-14T23:01:12Z"}, "committer": {"name": "Carl Love", "email": "carll@gcc.gnu.org", "date": "2018-03-14T23:01:12Z"}, "message": "re PR target/84422 (ICE on various builtin test functions when compiled with -mcpu=power7)\n\ngcc/ChangeLog:\n\n2018-03-14  Carl Love  <cel@us.ibm.com>\n\n\tPR target/84422\n\t* config/rs6000/rs6000-builtin.def: Change expansion for\n\tVMULESW to BU_P8V_AV_2.\n\tChange expansion for VMULEUW to BU_P8V_AV_2.\n\t* config/rs6000/rs6000.c: Change\n\tALTIVEC_BUILTIN_VMULESW to P8V_BUILTIN_VMULESW.\n\tChange ALTIVEC_BUILTIN_VMULEUW to P8V_BUILTIN_VMULEUW.\n\tChange ALTIVEC_BUILTIN_VMULOSW to P8V_BUILTIN_VMULOSW.\n\tChange ALTIVEC_BUILTIN_VMULOUW to P8V_BUILTIN_VMULOUW.\n\t* config/rs6000/rs6000-c.c: Change\n\tALTIVEC_BUILTIN_VMULESW to P8V_BUILTIN_VMULESW.\n\tChange ALTIVEC_BUILTIN_VMULEUW to P8V_BUILTIN_VMULEUW.\n\tChange ALTIVEC_BUILTIN_VMULOSW to P8V_BUILTIN_VMULOSW.\n\tChange ALTIVEC_BUILTIN_VMULOUW to P8V_BUILTIN_VMULOUW.\n\nFrom-SVN: r258539", "tree": {"sha": "77da01b939a094946acde2e2e27f0027135a42a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77da01b939a094946acde2e2e27f0027135a42a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcdfd47859e46ab2215bdc629fafe83e3c336f1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcdfd47859e46ab2215bdc629fafe83e3c336f1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcdfd47859e46ab2215bdc629fafe83e3c336f1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcdfd47859e46ab2215bdc629fafe83e3c336f1c/comments", "author": null, "committer": null, "parents": [{"sha": "e493c503f9d5a9682c18b64d9ef1a00b243fa231", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e493c503f9d5a9682c18b64d9ef1a00b243fa231", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e493c503f9d5a9682c18b64d9ef1a00b243fa231"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "44c86de8b1b169f6005338409b5da38cbfd54e60", "filename": "gcc/config/rs6000/rs6000-builtin.def", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcdfd47859e46ab2215bdc629fafe83e3c336f1c/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcdfd47859e46ab2215bdc629fafe83e3c336f1c/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def?ref=dcdfd47859e46ab2215bdc629fafe83e3c336f1c", "patch": "@@ -1086,14 +1086,14 @@ BU_ALTIVEC_2 (VMULEUB,\t      \"vmuleub\",\tCONST,\tvec_widen_umult_even_v16qi)\n BU_ALTIVEC_2 (VMULESB,\t      \"vmulesb\",\tCONST,\tvec_widen_smult_even_v16qi)\n BU_ALTIVEC_2 (VMULEUH,\t      \"vmuleuh\",\tCONST,\tvec_widen_umult_even_v8hi)\n BU_ALTIVEC_2 (VMULESH,\t      \"vmulesh\",\tCONST,\tvec_widen_smult_even_v8hi)\n-BU_ALTIVEC_2 (VMULEUW,\t      \"vmuleuw\",\tCONST,\tvec_widen_umult_even_v4si)\n-BU_ALTIVEC_2 (VMULESW,\t      \"vmulesw\",\tCONST,\tvec_widen_smult_even_v4si)\n+BU_P8V_AV_2 (VMULEUW,\t      \"vmuleuw\",\tCONST,\tvec_widen_umult_even_v4si)\n+BU_P8V_AV_2 (VMULESW,\t      \"vmulesw\",\tCONST,\tvec_widen_smult_even_v4si)\n BU_ALTIVEC_2 (VMULOUB,\t      \"vmuloub\",\tCONST,\tvec_widen_umult_odd_v16qi)\n BU_ALTIVEC_2 (VMULOSB,\t      \"vmulosb\",\tCONST,\tvec_widen_smult_odd_v16qi)\n BU_ALTIVEC_2 (VMULOUH,\t      \"vmulouh\",\tCONST,\tvec_widen_umult_odd_v8hi)\n BU_ALTIVEC_2 (VMULOSH,\t      \"vmulosh\",\tCONST,\tvec_widen_smult_odd_v8hi)\n-BU_ALTIVEC_2 (VMULOUW,\t      \"vmulouw\",\tCONST,\tvec_widen_umult_odd_v4si)\n-BU_ALTIVEC_2 (VMULOSW,\t      \"vmulosw\",\tCONST,\tvec_widen_smult_odd_v4si)\n+BU_P8V_AV_2 (VMULOUW,\t      \"vmulouw\",\tCONST,\tvec_widen_umult_odd_v4si)\n+BU_P8V_AV_2 (VMULOSW,\t      \"vmulosw\",\tCONST,\tvec_widen_smult_odd_v4si)\n BU_ALTIVEC_2 (VNOR,\t      \"vnor\",\t\tCONST,\tnorv4si3)\n BU_ALTIVEC_2 (VOR,\t      \"vor\",\t\tCONST,\tiorv4si3)\n BU_ALTIVEC_2 (VPKUHUM,\t      \"vpkuhum\",\tCONST,\taltivec_vpkuhum)"}, {"sha": "7fcb334724b81e45707ccd7432d02113be1dde09", "filename": "gcc/config/rs6000/rs6000-c.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcdfd47859e46ab2215bdc629fafe83e3c336f1c/gcc%2Fconfig%2Frs6000%2Frs6000-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcdfd47859e46ab2215bdc629fafe83e3c336f1c/gcc%2Fconfig%2Frs6000%2Frs6000-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-c.c?ref=dcdfd47859e46ab2215bdc629fafe83e3c336f1c", "patch": "@@ -2231,9 +2231,9 @@ const struct altivec_builtin_types altivec_overloaded_builtins[] = {\n     RS6000_BTI_unsigned_V4SI, RS6000_BTI_unsigned_V8HI, RS6000_BTI_unsigned_V8HI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULESH,\n     RS6000_BTI_V4SI, RS6000_BTI_V8HI, RS6000_BTI_V8HI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULESW,\n+  { ALTIVEC_BUILTIN_VEC_MULE, P8V_BUILTIN_VMULESW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULEUW,\n+  { ALTIVEC_BUILTIN_VEC_MULE, P8V_BUILTIN_VMULEUW,\n     RS6000_BTI_unsigned_V2DI, RS6000_BTI_unsigned_V4SI,\n     RS6000_BTI_unsigned_V4SI, 0 },\n   { ALTIVEC_BUILTIN_VEC_VMULEUB, ALTIVEC_BUILTIN_VMULEUB,\n@@ -2244,19 +2244,19 @@ const struct altivec_builtin_types altivec_overloaded_builtins[] = {\n     RS6000_BTI_unsigned_V4SI, RS6000_BTI_unsigned_V8HI, RS6000_BTI_unsigned_V8HI, 0 },\n   { ALTIVEC_BUILTIN_VEC_VMULESH, ALTIVEC_BUILTIN_VMULESH,\n     RS6000_BTI_V4SI, RS6000_BTI_V8HI, RS6000_BTI_V8HI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_VMULEUW, ALTIVEC_BUILTIN_VMULEUW,\n+  { ALTIVEC_BUILTIN_VEC_VMULEUW, P8V_BUILTIN_VMULEUW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_VMULESW, ALTIVEC_BUILTIN_VMULESW,\n+  { ALTIVEC_BUILTIN_VEC_VMULESW, P8V_BUILTIN_VMULESW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOUB,\n     RS6000_BTI_unsigned_V8HI, RS6000_BTI_unsigned_V16QI, RS6000_BTI_unsigned_V16QI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOSB,\n     RS6000_BTI_V8HI, RS6000_BTI_V16QI, RS6000_BTI_V16QI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOUH,\n     RS6000_BTI_unsigned_V4SI, RS6000_BTI_unsigned_V8HI, RS6000_BTI_unsigned_V8HI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOSW,\n+  { ALTIVEC_BUILTIN_VEC_MULO, P8V_BUILTIN_VMULOSW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOUW,\n+  { ALTIVEC_BUILTIN_VEC_MULO, P8V_BUILTIN_VMULOUW,\n     RS6000_BTI_unsigned_V2DI, RS6000_BTI_unsigned_V4SI,\n     RS6000_BTI_unsigned_V4SI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOSH,\n@@ -2269,9 +2269,9 @@ const struct altivec_builtin_types altivec_overloaded_builtins[] = {\n     RS6000_BTI_V8HI, RS6000_BTI_V16QI, RS6000_BTI_V16QI, 0 },\n   { ALTIVEC_BUILTIN_VEC_VMULOUB, ALTIVEC_BUILTIN_VMULOUB,\n     RS6000_BTI_unsigned_V8HI, RS6000_BTI_unsigned_V16QI, RS6000_BTI_unsigned_V16QI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_VMULOUW, ALTIVEC_BUILTIN_VMULOUW,\n+  { ALTIVEC_BUILTIN_VEC_VMULOUW, P8V_BUILTIN_VMULOUW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_VMULOSW, ALTIVEC_BUILTIN_VMULOSW,\n+  { ALTIVEC_BUILTIN_VEC_VMULOSW, P8V_BUILTIN_VMULOSW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n \n   { ALTIVEC_BUILTIN_VEC_NABS, ALTIVEC_BUILTIN_NABS_V16QI,"}, {"sha": "f8120a2180933c84a7e19d036e75fae99b8463cf", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcdfd47859e46ab2215bdc629fafe83e3c336f1c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcdfd47859e46ab2215bdc629fafe83e3c336f1c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=dcdfd47859e46ab2215bdc629fafe83e3c336f1c", "patch": "@@ -16264,11 +16264,11 @@ rs6000_gimple_fold_builtin (gimple_stmt_iterator *gsi)\n     /* Even element flavors of vec_mul (signed). */\n     case ALTIVEC_BUILTIN_VMULESB:\n     case ALTIVEC_BUILTIN_VMULESH:\n-    case ALTIVEC_BUILTIN_VMULESW:\n+    case P8V_BUILTIN_VMULESW:\n     /* Even element flavors of vec_mul (unsigned).  */\n     case ALTIVEC_BUILTIN_VMULEUB:\n     case ALTIVEC_BUILTIN_VMULEUH:\n-    case ALTIVEC_BUILTIN_VMULEUW:\n+    case P8V_BUILTIN_VMULEUW:\n       arg0 = gimple_call_arg (stmt, 0);\n       arg1 = gimple_call_arg (stmt, 1);\n       lhs = gimple_call_lhs (stmt);\n@@ -16279,11 +16279,11 @@ rs6000_gimple_fold_builtin (gimple_stmt_iterator *gsi)\n     /* Odd element flavors of vec_mul (signed).  */\n     case ALTIVEC_BUILTIN_VMULOSB:\n     case ALTIVEC_BUILTIN_VMULOSH:\n-    case ALTIVEC_BUILTIN_VMULOSW:\n+    case P8V_BUILTIN_VMULOSW:\n     /* Odd element flavors of vec_mul (unsigned). */\n     case ALTIVEC_BUILTIN_VMULOUB:\n     case ALTIVEC_BUILTIN_VMULOUH:\n-    case ALTIVEC_BUILTIN_VMULOUW:\n+    case P8V_BUILTIN_VMULOUW:\n       arg0 = gimple_call_arg (stmt, 0);\n       arg1 = gimple_call_arg (stmt, 1);\n       lhs = gimple_call_lhs (stmt);\n@@ -18155,10 +18155,10 @@ builtin_function_type (machine_mode mode_ret, machine_mode mode_arg0,\n     /* unsigned 2 argument functions.  */\n     case ALTIVEC_BUILTIN_VMULEUB:\n     case ALTIVEC_BUILTIN_VMULEUH:\n-    case ALTIVEC_BUILTIN_VMULEUW:\n+    case P8V_BUILTIN_VMULEUW:\n     case ALTIVEC_BUILTIN_VMULOUB:\n     case ALTIVEC_BUILTIN_VMULOUH:\n-    case ALTIVEC_BUILTIN_VMULOUW:\n+    case P8V_BUILTIN_VMULOUW:\n     case CRYPTO_BUILTIN_VCIPHER:\n     case CRYPTO_BUILTIN_VCIPHERLAST:\n     case CRYPTO_BUILTIN_VNCIPHER:"}]}