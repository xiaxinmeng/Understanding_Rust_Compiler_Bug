{"sha": "237d62592af737acb7711b78f44304fcd18b3e13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjM3ZDYyNTkyYWY3MzdhY2I3NzExYjc4ZjQ0MzA0ZmNkMThiM2UxMw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-02-18T16:24:40Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-02-18T16:24:40Z"}, "message": "re PR lto/47798 (LTO debuginfo for globals wrong)\n\n2011-02-18  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/47798\n\t* lto-streamer.h (lto_global_var_decls): Declare.\n\t* lto-streamer-in.c (lto_register_var_decl_in_symtab): Register\n\tstatics for global var processing.\n\n\tlto/\n\t* lto-tree.h (lto_global_var_decls): Do not declare here.\n\t* lto-lang.c: Include lto-streamer.h.\n\t* Make-lang.in (lto-lang.o): Adjust dependencies.\n\nFrom-SVN: r170274", "tree": {"sha": "c0d6c9a72292d9089ed3e3d2c09a47e56925f639", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0d6c9a72292d9089ed3e3d2c09a47e56925f639"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/237d62592af737acb7711b78f44304fcd18b3e13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/237d62592af737acb7711b78f44304fcd18b3e13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/237d62592af737acb7711b78f44304fcd18b3e13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/237d62592af737acb7711b78f44304fcd18b3e13/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e23541755f8ded87da6b3056562ba9736d0126ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e23541755f8ded87da6b3056562ba9736d0126ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e23541755f8ded87da6b3056562ba9736d0126ee"}], "stats": {"total": 23, "additions": 19, "deletions": 4}, "files": [{"sha": "3e31b747d3e098fab8269f7d109fb47d16b4a314", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=237d62592af737acb7711b78f44304fcd18b3e13", "patch": "@@ -1,3 +1,10 @@\n+2011-02-18  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/47798\n+\t* lto-streamer.h (lto_global_var_decls): Declare.\n+\t* lto-streamer-in.c (lto_register_var_decl_in_symtab): Register\n+\tstatics for global var processing.\n+\n 2011-02-18  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/47737"}, {"sha": "1f0cf29d35ad0677e18fea11582ff53335f853f0", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=237d62592af737acb7711b78f44304fcd18b3e13", "patch": "@@ -2432,6 +2432,8 @@ lto_register_var_decl_in_symtab (struct data_in *data_in, tree decl)\n       ASM_FORMAT_PRIVATE_NAME (label, name, DECL_UID (decl));\n       SET_DECL_ASSEMBLER_NAME (decl, get_identifier (label));\n       rest_of_decl_compilation (decl, 1, 0);\n+\n+      VEC_safe_push (tree, gc, lto_global_var_decls, decl);\n     }\n \n   /* If this variable has already been declared, queue the"}, {"sha": "d8669a21529e32b14225e153b56068d48965290f", "filename": "gcc/lto-streamer.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto-streamer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto-streamer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer.h?ref=237d62592af737acb7711b78f44304fcd18b3e13", "patch": "@@ -914,6 +914,7 @@ extern void lto_symtab_merge_cgraph_nodes (void);\n extern tree lto_symtab_prevailing_decl (tree decl);\n extern enum ld_plugin_symbol_resolution lto_symtab_get_resolution (tree decl);\n extern void lto_symtab_free (void);\n+extern GTY(()) VEC(tree,gc) *lto_global_var_decls;\n \n \n /* In lto-opts.c.  */"}, {"sha": "e4267967a37298c300aa884095d53a0249c79fc8", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=237d62592af737acb7711b78f44304fcd18b3e13", "patch": "@@ -1,3 +1,10 @@\n+2011-02-18  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/47798\n+\t* lto-tree.h (lto_global_var_decls): Do not declare here.\n+\t* lto-lang.c: Include lto-streamer.h.\n+\t* Make-lang.in (lto-lang.o): Adjust dependencies.\n+\n 2011-02-10  Kai Tietz  <kai.tietz@onevision.com>\n \n \tPR lto/47241"}, {"sha": "22e13912e328ef77b0317bcdca823856360c5e3e", "filename": "gcc/lto/Make-lang.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FMake-lang.in?ref=237d62592af737acb7711b78f44304fcd18b3e13", "patch": "@@ -79,7 +79,7 @@ $(LTO_EXE): $(LTO_OBJS) $(BACKEND) $(LIBDEPS)\n lto/lto-lang.o: lto/lto-lang.c $(CONFIG_H) coretypes.h debug.h \\\n \tflags.h $(GGC_H) langhooks.h $(LANGHOOKS_DEF_H) $(SYSTEM_H) \\\n \t$(TARGET_H) $(LTO_H) $(GIMPLE_H) gtype-lto.h gt-lto-lto-lang.h \\\n-\t$(EXPR_H)\n+\t$(EXPR_H) lto-streamer.h\n lto/lto.o: lto/lto.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(OPTS_H) \\\n \ttoplev.h $(TREE_H) $(DIAGNOSTIC_CORE_H) $(TM_H) \\\n \t$(CGRAPH_H) $(GGC_H) tree-ssa-operands.h $(TREE_PASS_H) \\"}, {"sha": "5f157d6de06cb8dc23486414889215382780ba0b", "filename": "gcc/lto/lto-lang.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2Flto-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2Flto-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-lang.c?ref=237d62592af737acb7711b78f44304fcd18b3e13", "patch": "@@ -34,6 +34,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"gimple.h\"\n #include \"diagnostic-core.h\"\n #include \"toplev.h\"\n+#include \"lto-streamer.h\"\n \n static tree handle_noreturn_attribute (tree *, tree, tree, int, bool *);\n static tree handle_leaf_attribute (tree *, tree, tree, int, bool *);"}, {"sha": "d187fe20dd3be10475ed190b4c14d8d1cf35691d", "filename": "gcc/lto/lto-tree.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2Flto-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/237d62592af737acb7711b78f44304fcd18b3e13/gcc%2Flto%2Flto-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-tree.h?ref=237d62592af737acb7711b78f44304fcd18b3e13", "patch": "@@ -55,7 +55,4 @@ union GTY((desc (\"lto_tree_node_structure (&%h)\"),\n \t\t\tdesc (\"tree_node_structure (&%h)\"))) generic;\n };\n \n-/* Vector to keep track of external variables we've seen so far.  */\n-extern GTY(()) VEC(tree,gc) *lto_global_var_decls;\n-\n #endif /* GCC_LTO_TREE_H */"}]}