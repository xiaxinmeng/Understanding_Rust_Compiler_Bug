{"sha": "903da7659535bb088b58905c7c0a673e8219af12", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAzZGE3NjU5NTM1YmIwODhiNTg5MDVjN2MwYTY3M2U4MjE5YWYxMg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-25T00:25:31Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-25T00:25:31Z"}, "message": "(ASM_OUTPUT_EXTERNAL): Use vms_check_external.\n\n(ASM_GLOBALIZE_LABEL): New definition; use vms_check_external.\n\nFrom-SVN: r3526", "tree": {"sha": "7514df08fda406002e78bdfaeaa2c914372d53cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7514df08fda406002e78bdfaeaa2c914372d53cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/903da7659535bb088b58905c7c0a673e8219af12", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/903da7659535bb088b58905c7c0a673e8219af12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/903da7659535bb088b58905c7c0a673e8219af12", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/903da7659535bb088b58905c7c0a673e8219af12/comments", "author": null, "committer": null, "parents": [{"sha": "6ec2b050b5485519ccf924ab3c867786b8c30c22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ec2b050b5485519ccf924ab3c867786b8c30c22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ec2b050b5485519ccf924ab3c867786b8c30c22"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "9bdf6c1df20512065438f13d97e17ce22545b5a8", "filename": "gcc/config/vax/vms.h", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/903da7659535bb088b58905c7c0a673e8219af12/gcc%2Fconfig%2Fvax%2Fvms.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/903da7659535bb088b58905c7c0a673e8219af12/gcc%2Fconfig%2Fvax%2Fvms.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fvms.h?ref=903da7659535bb088b58905c7c0a673e8219af12", "patch": "@@ -121,6 +121,17 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n   if (DECL_EXTERNAL (decl) && TREE_PUBLIC (decl)) \t\t\\\n     SYMBOL_REF_FLAG (XEXP (DECL_RTL (decl), 0)) = 1; \n \n+/* This is how to output a command to make the user-level label named NAME\n+   defined for reference from other files.  */\n+\n+#undef ASM_GLOBALIZE_LABEL\n+#define ASM_GLOBALIZE_LABEL(FILE,NAME)\t\t\\\n+  do { fputs (\".globl \", FILE);\t\t\t\\\n+       assemble_name (FILE, NAME);\t\t\\\n+       fputs (\"\\n\", FILE);\t\t\t\\\n+       vms_check_external (NAME);\t\t\\\n+     } while (0)\n+\n /* Under VMS we write the actual size of the storage to be allocated even\n    though the symbol is external.  Although it is possible to give external\n    symbols a size of 0 (as unix does), the VMS linker does not make the\n@@ -144,7 +155,8 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n    since the size of its definition was not likewise rounded up.  */\n \n #define ASM_OUTPUT_EXTERNAL(FILE,DECL,NAME)\t\t\t\t\\\n-{ if (DECL_INITIAL (DECL) == 0 && TREE_CODE (DECL) != FUNCTION_DECL)\t\\\n+{ if (DECL_INITIAL (DECL) == 0 && TREE_CODE (DECL) != FUNCTION_DECL\t\\\n+      && ! vms_check_external (NAME))\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n       if (TREE_READONLY (decl) && ! TREE_THIS_VOLATILE (decl))\t\t\\\n \tconst_section ();\t\t\t\t\t\t\\"}]}