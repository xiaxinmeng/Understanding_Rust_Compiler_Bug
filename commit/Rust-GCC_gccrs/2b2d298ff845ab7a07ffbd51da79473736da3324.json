{"sha": "2b2d298ff845ab7a07ffbd51da79473736da3324", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmIyZDI5OGZmODQ1YWI3YTA3ZmZiZDUxZGE3OTQ3MzczNmRhMzMyNA==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2020-05-11T18:12:14Z"}, "committer": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2020-05-11T18:12:14Z"}, "message": "i386: Add V2SFmode sqrt insn pattern [PR95046]\n\ngcc/ChangeLog:\n\n2020-05-11  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n\n\tPR target/95046\n\t* config/i386/mmx.md (sqrtv2sf2): New insn pattern.\n\ntestsuite/ChangeLog:\n\n2020-05-11  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n\n\tPR target/95046\n\t* gcc.target/i386/pr95046-1.c (test_sqrt): Add.", "tree": {"sha": "9a80ae2e54966c46bb820eb4f3f1342094ee11a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9a80ae2e54966c46bb820eb4f3f1342094ee11a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b2d298ff845ab7a07ffbd51da79473736da3324", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b2d298ff845ab7a07ffbd51da79473736da3324", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b2d298ff845ab7a07ffbd51da79473736da3324", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b2d298ff845ab7a07ffbd51da79473736da3324/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "47f4703c33c4936fd423c2a1180b2de144115d3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47f4703c33c4936fd423c2a1180b2de144115d3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47f4703c33c4936fd423c2a1180b2de144115d3d"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "d9f96a564af66847e45b9cd6b5ce4034a4c240d5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2b2d298ff845ab7a07ffbd51da79473736da3324", "patch": "@@ -1,3 +1,8 @@\n+2020-05-11  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/95046\n+\t* config/i386/mmx.md (sqrtv2sf2): New insn pattern.\n+\n 2020-05-11  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n \n \t* config/rs6000/altivec.h (vec_cfuge): New #define."}, {"sha": "a8f603b94f88c3b35c64ad86be34369759bc90de", "filename": "gcc/config/i386/mmx.md", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2Fconfig%2Fi386%2Fmmx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2Fconfig%2Fi386%2Fmmx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fmmx.md?ref=2b2d298ff845ab7a07ffbd51da79473736da3324", "patch": "@@ -461,6 +461,20 @@\n    (set_attr \"prefix_extra\" \"1\")\n    (set_attr \"mode\" \"V2SF\")])\n \n+(define_insn \"sqrtv2sf2\"\n+  [(set (match_operand:V2SF 0 \"register_operand\" \"=x,v\")\n+\t(sqrt:V2SF (match_operand:V2SF 1 \"register_operand\" \"0,v\")))]\n+  \"TARGET_MMX_WITH_SSE\"\n+  \"@\n+   sqrtps\\t{%1, %0|%0, %1}\n+   vsqrtps\\t{%1, %0|%0, %1}\"\n+  [(set_attr \"isa\" \"noavx,avx\")\n+   (set_attr \"type\" \"sse\")\n+   (set_attr \"atom_sse_attr\" \"sqrt\")\n+   (set_attr \"btver2_sse_attr\" \"sqrt\")\n+   (set_attr \"prefix\" \"orig,vex\")\n+   (set_attr \"mode\" \"V4SF\")])\n+\n (define_insn \"mmx_rsqrtv2sf2\"\n   [(set (match_operand:V2SF 0 \"register_operand\" \"=y\")\n \t(unspec:V2SF [(match_operand:V2SF 1 \"nonimmediate_operand\" \"ym\")]"}, {"sha": "158cf3857baf6c9e5b5c5f08bd999cf80490e044", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2b2d298ff845ab7a07ffbd51da79473736da3324", "patch": "@@ -1,3 +1,8 @@\n+2020-05-11  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/95046\n+\t* gcc.target/i386/pr95046-1.c (test_sqrt): Add.\n+\n 2020-05-11  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n \n \t* gcc.target/powerpc/vec-cfuged-0.c: New test."}, {"sha": "7adc2069c53d41332acb1dcb519ae341688e4df5", "filename": "gcc/testsuite/gcc.target/i386/pr95046-1.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr95046-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b2d298ff845ab7a07ffbd51da79473736da3324/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr95046-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr95046-1.c?ref=2b2d298ff845ab7a07ffbd51da79473736da3324", "patch": "@@ -49,3 +49,14 @@ test_max (void)\n }\n \n /* { dg-final { scan-assembler \"maxps\" } } */\n+\n+float sqrtf (float);\n+\n+void\n+test_sqrt (void)\n+{\n+  for (int i = 0; i < 2; i++)\n+    r[i] = sqrtf (a[i]);\n+}\n+\n+/* { dg-final { scan-assembler \"sqrtps\" } } */"}]}