{"sha": "fd83e387113ddd0dbd4c31d235114f4c2c308a07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ4M2UzODcxMTNkZGQwZGJkNGMzMWQyMzUxMTRmNGMyYzMwOGEwNw==", "commit": {"author": {"name": "Michael Snyder", "email": "msnyder@access-company.com", "date": "2007-08-03T17:38:14Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2007-08-03T17:38:14Z"}, "message": "make-relative-prefix.c (make_relative_prefix_1): Fix resource leak.\n\n\t* make-relative-prefix.c (make_relative_prefix_1): Fix resource\n\tleak.\n\nFrom-SVN: r127183", "tree": {"sha": "c08be4735100482d4b109156e67c84652bd4a1c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c08be4735100482d4b109156e67c84652bd4a1c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd83e387113ddd0dbd4c31d235114f4c2c308a07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd83e387113ddd0dbd4c31d235114f4c2c308a07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd83e387113ddd0dbd4c31d235114f4c2c308a07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd83e387113ddd0dbd4c31d235114f4c2c308a07/comments", "author": null, "committer": null, "parents": [{"sha": "7475160c8db55a1893abbfcdb9c926a5c0370c41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7475160c8db55a1893abbfcdb9c926a5c0370c41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7475160c8db55a1893abbfcdb9c926a5c0370c41"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "28e2c4fab3a3aef707f41e3a83b580f6d925fe94", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd83e387113ddd0dbd4c31d235114f4c2c308a07/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd83e387113ddd0dbd4c31d235114f4c2c308a07/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=fd83e387113ddd0dbd4c31d235114f4c2c308a07", "patch": "@@ -1,3 +1,8 @@\n+2007-08-03  Michael Snyder  <msnyder@access-company.com>\n+\n+\t* make-relative-prefix.c (make_relative_prefix_1): Fix resource\n+\tleak.\n+\n 2007-07-31  Michael Snyder  <msnyder@access-company.com>\n \n \t* cp-demangle.c (d_print_comp): Guard against null."}, {"sha": "be61040e18c7dfd9a9ec694764c14c90b46c1d07", "filename": "libiberty/make-relative-prefix.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd83e387113ddd0dbd4c31d235114f4c2c308a07/libiberty%2Fmake-relative-prefix.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd83e387113ddd0dbd4c31d235114f4c2c308a07/libiberty%2Fmake-relative-prefix.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fmake-relative-prefix.c?ref=fd83e387113ddd0dbd4c31d235114f4c2c308a07", "patch": "@@ -299,11 +299,17 @@ make_relative_prefix_1 (const char *progname, const char *bin_prefix,\n     full_progname = strdup(progname);\n \n   prog_dirs = split_directories (full_progname, &prog_num);\n-  bin_dirs = split_directories (bin_prefix, &bin_num);\n   free (full_progname);\n-  if (bin_dirs == NULL || prog_dirs == NULL)\n+  if (prog_dirs == NULL)\n     return NULL;\n \n+  bin_dirs = split_directories (bin_prefix, &bin_num);\n+  if (bin_dirs == NULL)\n+    {\n+      free_split_directories (prog_dirs);\n+      return NULL;\n+    }\n+\n   /* Remove the program name from comparison of directory names.  */\n   prog_num--;\n "}]}