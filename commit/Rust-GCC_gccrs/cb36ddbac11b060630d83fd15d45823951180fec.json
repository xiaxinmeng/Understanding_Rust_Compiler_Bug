{"sha": "cb36ddbac11b060630d83fd15d45823951180fec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2IzNmRkYmFjMTFiMDYwNjMwZDgzZmQxNWQ0NTgyMzk1MTE4MGZlYw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-03-03T04:53:16Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-03-03T04:53:16Z"}, "message": "lib1funcs.asm (___fixunssfsi): Change the threshold to 0x4f.\n\n\t* config/h8300/lib1funcs.asm (___fixunssfsi): Change the\n\tthreshold to 0x4f.\n\n\tRevert:\n\t2004-02-27  Kazu Hirata  <kazu@cs.umass.edu>\n\t* config/h8300/fixunssfsi.c (__fixunssfsi): Enable on H8/300\n\tas well.\n\t* config/h8300/lib1funcs.asm (___fixunssfsi): Remove.\n\t* config/h8300/t-h8300 (LIB1ASMFUNCS): Remove _fixunssfsi_asm.\n\nFrom-SVN: r78818", "tree": {"sha": "158fc10972c66de2fb94b1cff421519fc1d3212c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/158fc10972c66de2fb94b1cff421519fc1d3212c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb36ddbac11b060630d83fd15d45823951180fec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb36ddbac11b060630d83fd15d45823951180fec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb36ddbac11b060630d83fd15d45823951180fec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb36ddbac11b060630d83fd15d45823951180fec/comments", "author": null, "committer": null, "parents": [{"sha": "66c87bae65e8af3695061a38c3719b2082e50440", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66c87bae65e8af3695061a38c3719b2082e50440", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66c87bae65e8af3695061a38c3719b2082e50440"}], "stats": {"total": 48, "additions": 46, "deletions": 2}, "files": [{"sha": "98c43fc274a5884c665f01214f6558c1fed6f38d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cb36ddbac11b060630d83fd15d45823951180fec", "patch": "@@ -1,3 +1,15 @@\n+2004-03-02  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/lib1funcs.asm (___fixunssfsi): Change the\n+\tthreshold to 0x4f.\n+\n+\tRevert:\n+\t2004-02-27  Kazu Hirata  <kazu@cs.umass.edu>\n+\t* config/h8300/fixunssfsi.c (__fixunssfsi): Enable on H8/300\n+\tas well.\n+\t* config/h8300/lib1funcs.asm (___fixunssfsi): Remove.\n+\t* config/h8300/t-h8300 (LIB1ASMFUNCS): Remove _fixunssfsi_asm.\n+\n 2004-03-02  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* doc/md.texi (cbranchmode4): New."}, {"sha": "06120ba4905d40cdf5089312ac084f0324a34031", "filename": "gcc/config/h8300/fixunssfsi.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2Fconfig%2Fh8300%2Ffixunssfsi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2Fconfig%2Fh8300%2Ffixunssfsi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Ffixunssfsi.c?ref=cb36ddbac11b060630d83fd15d45823951180fec", "patch": "@@ -29,8 +29,10 @@ the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n /* The libgcc2.c implementation gets confused by our type setup and creates\n-   a directly recursive call, so we do our own implementation.  */\n+   a directly recursive call, so we do our own implementation.  For\n+   the H8/300, that's in lib1funcs.asm, for H8/300H and H8S, it's here.  */\n \n+#ifndef __H8300__\n long __fixunssfsi (float a);\n \n long\n@@ -40,3 +42,4 @@ __fixunssfsi (float a)\n     return (long) (a - 32768L) + 32768L;\n   return (long) a;\n }\n+#endif"}, {"sha": "8a7e5054256f62a8c8ea333218c90ee9d87f6cc9", "filename": "gcc/config/h8300/lib1funcs.asm", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm?ref=cb36ddbac11b060630d83fd15d45823951180fec", "patch": "@@ -806,3 +806,31 @@ L_skip2:\n \n #endif\n #endif /* L_mulsi3 */\n+#ifdef L_fixunssfsi_asm\n+/* For the h8300 we use asm to save some bytes, to\n+   allow more programs to fit into the tiny address\n+   space.  For the H8/300H and H8S, the C version is good enough.  */\n+#ifdef __H8300__\n+/* We still treat NANs different than libgcc2.c, but then, the\n+   behavior is undefined anyways.  */\n+\t.global\t___fixunssfsi\n+___fixunssfsi:\n+\tcmp.b #0x4f,r0h\n+\tbge Large_num\n+\tjmp     @___fixsfsi\n+Large_num:\n+\tbhi L_huge_num\n+\txor.b #0x80,A0L\n+\tbmi L_shift8\n+L_huge_num:\n+\tmov.w #65535,A0\n+\tmov.w A0,A1\n+\trts\n+L_shift8:\n+\tmov.b A0L,A0H\n+\tmov.b A1H,A0L\n+\tmov.b A1L,A1H\n+\tmov.b #0,A1L\n+\trts\n+#endif\n+#endif /* L_fixunssfsi_asm */"}, {"sha": "28ea2cf71bda94250d97aadf32e6170200e28057", "filename": "gcc/config/h8300/t-h8300", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2Fconfig%2Fh8300%2Ft-h8300", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb36ddbac11b060630d83fd15d45823951180fec/gcc%2Fconfig%2Fh8300%2Ft-h8300", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Ft-h8300?ref=cb36ddbac11b060630d83fd15d45823951180fec", "patch": "@@ -1,5 +1,6 @@\n LIB1ASMSRC = h8300/lib1funcs.asm\n-LIB1ASMFUNCS = _cmpsi2 _ucmpsi2 _divhi3 _divsi3 _mulhi3 _mulsi3\n+LIB1ASMFUNCS = _cmpsi2 _ucmpsi2 _divhi3 _divsi3 _mulhi3 _mulsi3 \\\n+  _fixunssfsi_asm\n \n LIB2FUNCS_EXTRA = \\\n \t$(srcdir)/config/h8300/clzhi2.c \\"}]}