{"sha": "5abc1f741e8c34c725524c985af7d509c68165ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFiYzFmNzQxZThjMzRjNzI1NTI0Yzk4NWFmN2Q1MDljNjgxNjVhZA==", "commit": {"author": {"name": "Bruce Korb", "email": "autogen@linuxbox.com", "date": "1999-10-12T14:44:18Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1999-10-12T14:44:18Z"}, "message": "Merge from no_bogosity\n\nFrom-SVN: r29918", "tree": {"sha": "b7c04700ad0597627b75bc451b012da96f57a002", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7c04700ad0597627b75bc451b012da96f57a002"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5abc1f741e8c34c725524c985af7d509c68165ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5abc1f741e8c34c725524c985af7d509c68165ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5abc1f741e8c34c725524c985af7d509c68165ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5abc1f741e8c34c725524c985af7d509c68165ad/comments", "author": null, "committer": null, "parents": [{"sha": "9e15ef052036441d9cd932891c2176d2a12f3d7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e15ef052036441d9cd932891c2176d2a12f3d7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e15ef052036441d9cd932891c2176d2a12f3d7a"}], "stats": {"total": 4176, "additions": 2477, "deletions": 1699}, "files": [{"sha": "93a6e4a0f4b5f01f92268ac8637d18bb64d20ff0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -1,3 +1,7 @@\n+Tue Oct 12 07:38:41 1999  Bruce Korb  <autogen@linuxbox.com>\n+\n+\t* fixincl/*: Merged \"no_bogosity\" branch\n+\n Mon Oct 11 20:18:41 1999  Jim Wilson  <wilson@cygnus.com>\n \n \t* genoutput.c: Include toplev.h."}, {"sha": "62df3378dffea2e5db6bf091b290eff6d47ef951", "filename": "gcc/fixinc/Makefile.in", "status": "modified", "additions": 20, "deletions": 11, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2FMakefile.in?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -22,7 +22,7 @@\n # Its purpose is to build the any-platforms fixinc.sh script.\n \n CFLAGS = -g\n-FIXINC_DEFS = @fixinc_defs@\n+FIXINC_DEFS = $(CFLAGS) $(CPPFLAGS) @fixinc_defs@ $(INCLUDES)\n \n CC = @CC@\n SHELL = /bin/sh\n@@ -45,7 +45,7 @@ INCLUDES = -I. -I.. -I$(srcdir) -I$(srcdir)/.. -I$(srcdir)/../config -I$(srcdir)\n \n # Always use -I$(srcdir)/config when compiling.\n .c.o:\n-\t$(CC) -c $(CFLAGS) $(FIXINC_DEFS) $(CPPFLAGS) $(INCLUDES) $<\n+\t$(CC) -c $(FIXINC_DEFS) $<\n \n # The only suffixes we want for implicit rules are .c and .o.\n .SUFFIXES:\n@@ -59,28 +59,37 @@ INCLUDES = -I. -I.. -I$(srcdir) -I$(srcdir)/.. -I$(srcdir)/../config -I$(srcdir)\n ##\n ## # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #\n \n-OBJ = fixincl.o server.o gnu-regex.o procopen.o\n-HDR = server.h gnu-regex.h\n LIBERTY = ../../libiberty/libiberty.a\n+LIBOBJ  = gnu-regex.o fixlib.o $(LIBERTY)\n+FIOBJ   = fixincl.o server.o procopen.o $(LIBOBJ)\n+\n+HDR = server.h gnu-regex.h fixlib.h\n \n SH_TARGET  = inclhack.sh fixincl.sh\n-BIN_TARGET = fixincl\n-AG_TEXT    = $(SH_TARGET) fixincl.x \\\n-\tinclhack.def inclhack.tpl hackshell.tpl fixincl.tpl\n+BIN_TARGET = fixincl fixfixes fixtests\n+\n TARGETS    = $(SH_TARGET) $(BIN_TARGET)\n \n all : $(TARGETS)\n sh  : $(SH_TARGET)\n gen : $(SH_TARGET) fixincl.x\n \n-$(OBJ): $(HDR)\n+$(FIOBJ): $(HDR)\n \n-fixincl: $(OBJ)\n-\t@echo $(CC) -o $@ $(OBJ) $(LIBERTY) $(LIB) ; \\\n-\tif $(CC) -o $@ $(OBJ) $(LIBERTY) $(LIB) ; then : ; else \\\n+fixincl: $(FIOBJ)\n+\t@echo $(CC) -o $@ $(FIOBJ) $(LIBERTY) $(LIB) ; \\\n+\tif $(CC) -o $@ $(FIOBJ) $(LIBERTY) $(LIB) ; then : ; else \\\n \trm -f $@ ; (echo \"#! /bin/sh\" ; echo exit 1 ) > $@ ; \\\n \tchmod 777 $@ ; fi\n \n+fixfixes: fixfixes.c $(LIBOBJ)\n+\t$(CC) -o $@ $(FIXINC_DEFS) -DMAIN \\\n+\t\t$(srcdir)/fixfixes.c $(LIBOBJ) $(LIB)\n+\n+fixtests: fixtests.c $(LIBOBJ)\n+\t$(CC) -o $@ $(FIXINC_DEFS) -DMAIN \\\n+\t\t$(srcdir)/fixtests.c $(LIBOBJ) $(LIB)\n+\n gnu-regex.o: gnu-regex.c\n \t-$(CC) $(CFLAGS) $(FIXINC_DEFS) $(INCLUDES) -DREGEX_MALLOC \\\n \t\t-c $(srcdir)/gnu-regex.c"}, {"sha": "805e1db09d1de13b43ae398f24a7c203075de719", "filename": "gcc/fixinc/fixfixes.c", "status": "added", "additions": 243, "deletions": 0, "changes": 243, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixfixes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixfixes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixfixes.c?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -0,0 +1,243 @@\n+\n+/*\n+\n+   Test to see if a particular fix should be applied to a header file.\n+\n+   Copyright (C) 1997, 1998, 1999 Free Software Foundation, Inc.\n+\n+= = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+NOTE TO DEVELOPERS\n+\n+The routines you write here must work closely with both the fixincl.c\n+and the test_need.c program.\n+\n+Here are the rules:\n+\n+1.  Every test procedure name must be suffixed with \"_fix\".\n+    These routines will be referenced from inclhack.def, sans the suffix.\n+\n+2.  Use the \"FIX_PROC_HEAD()\" macro _with_ the \"_fix\" suffix\n+    (I cannot use the ## magic from ANSI C) for defining your entry point.\n+\n+3.  Put your test name into the FIXUP_TABLE\n+\n+4.  Do not read anything from stdin.  It is closed.\n+\n+5.  Write to stderr only in the event of a reportable error\n+    In such an event, call \"exit(1)\".\n+\n+6.  If \"MAIN\" is _not_ defined, then you have access to the fixDescList\n+    entry for the fix in question.  This may be useful, for example,\n+    if there are pre-compiled selection expressions stored there.\n+\n+    For example, you may do this if you know that the first \n+    test contains a useful regex.  This is okay because, remember,\n+    this code perforce works closely with the inclhack.def fixes!!\n+\n+\n+    tFixDesc*  pMyDesc = fixDescList + MY_FIX_NAME_FIXIDX;\n+    tTestDesc* pTestList = pMyDesc->p_test_desc;\n+\n+    regexec (pTestList->p_test_regex, ...)\n+\n+\n+    If MAIN _is_ defined, then you will have to compile it on\n+    your own.\n+\n+= = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+#include \"fixlib.h\"\n+\n+typedef struct {\n+    const char*  fix_name;\n+    void (*fix_proc)();\n+} fix_entry_t;\n+\n+#define FIXUP_TABLE \\\n+  _FT_( \"no_double_slash\", double_slash_fix )\n+\n+\n+#define FIX_PROC_HEAD( fix ) \\\n+static void fix ( filname, text ) \\\n+    const char* filname; \\\n+    char* text;\n+\n+\n+/*\n+ *  Skip over a quoted string.  Single quote strings may\n+ *  contain multiple characters if the first character is\n+ *  a backslash.  Especially a backslash followed by octal digits.\n+ *  We are not doing a correctness syntax check here.\n+ */\n+static char*\n+print_quote( q, text )\n+  char  q;\n+  char* text;\n+{\n+  fputc( q, stdout );\n+\n+  for (;;)\n+    {\n+      char ch = *(text++);\n+      fputc( ch, stdout );\n+\n+      switch (ch)\n+        {\n+        case '\\\\':\n+          if (*text == NUL)\n+            goto quote_done;\n+\n+          fputc( *(text++), stdout );\n+          break;\n+\n+        case '\"':\n+        case '\\'':\n+          if (ch != q)\n+            break;\n+          /*FALLTHROUGH*/\n+\n+        case '\\n':\n+        case NUL:\n+          goto quote_done;\n+        }\n+    } quote_done:;\n+\n+  return text;\n+}\n+\n+\n+FIX_PROC_HEAD( double_slash_fix )\n+{\n+  /*  Now look for the comment markers in the text */\n+  for (;;)\n+    {\n+      char ch = *(text++);\n+      switch (ch)\n+        {\n+        case '/':\n+          switch (*text) /* do not advance `text' here */\n+            {\n+            case '/':\n+              /*\n+                We found a \"//\" pair in open text.\n+                Delete text to New-Line\n+              */\n+              while ((*text != '\\n') && (*text != '\\0'))  text++;\n+              break;\n+\n+            case '*':\n+              {\n+                /* We found a C-style comment.  Skip forward to the end */\n+                char* pz = strstr( (--text)+2, \"*/\" );\n+                if (pz == (char*)NULL)\n+                  {\n+                    fputs( text, stdout );\n+                    goto fix_done;\n+                  }\n+                pz += 2;\n+                fwrite (text, (pz - text), 1, stdout );\n+                text = pz;\n+              }\n+              break;\n+\n+            default:\n+              fputc (ch, stdout );\n+            }\n+          break;\n+\n+        case NUL:\n+          goto fix_done;\n+\n+        case '\"':\n+        case '\\'':\n+          text = print_quote (ch, text );\n+          break;\n+\n+        default:\n+          fputc (ch, stdout );\n+        }\n+\n+    } fix_done:;\n+\n+  fclose (stdout);;\n+}\n+\n+/* = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+     test for fix selector\n+\n+     THIS IS THE ONLY EXPORTED ROUTINE\n+\n+*/\n+void\n+apply_fix( fixname, filname )\n+  const char* fixname;\n+  const char* filname;\n+{\n+  #define _FT_(n,p) { n, p },\n+  static fix_entry_t fix_table[] = { FIXUP_TABLE { NULL, NULL }};\n+  #undef _FT_\n+  #define FIX_TABLE_CT ((sizeof(fix_table)/sizeof(fix_table[0]))-1)\n+\n+  char* buf;\n+  int ct = FIX_TABLE_CT;\n+  fix_entry_t* pfe = fix_table;\n+\n+  for (;;)\n+    {\n+      if (strcmp (pfe->fix_name, fixname) == 0)\n+        break;\n+      if (--ct <= 0)\n+\t{\n+\t  fprintf (stderr, \"fixincludes error:  the `%s' fix is unknown\\n\",\n+\t\t   fixname );\n+\t  exit (3);\n+\t}\n+    }\n+\n+  buf = load_file_data (stdin);\n+  (*pfe->fix_proc)( filname, buf );\n+}\n+\n+#ifdef MAIN\n+\n+/* = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+     MAIN ROUTINE\n+\n+     This file is both included in fixincl.c and compiled as a separate\n+     program for use by the inclhack.sh script.\n+\n+*/\n+\n+int\n+main( argc, argv )\n+  int argc;\n+  char** argv;\n+{\n+  if (argc != 3)\n+    apply_fix (\"No test name provided\", NULL, NULL, 0 );\n+\n+  apply_fix (argv[2], argv[1]);\n+  return 0;\n+}\n+\n+#endif"}, {"sha": "1e7c1261900fa67a89279e58fd705605a0a679a7", "filename": "gcc/fixinc/fixincl.c", "status": "modified", "additions": 555, "deletions": 444, "changes": 999, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixincl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixincl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.c?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -22,52 +22,28 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-#include \"auto-host.h\"\n+#include \"fixlib.h\"\n+\n+   #include <fcntl.h>\n+   #include <sys/mman.h>\n+   #define  BAD_ADDR ((void*)-1)\n \n-#include \"gansidecl.h\"\n-#include \"system.h\"\n #include <signal.h>\n \n-#include \"gnu-regex.h\"\n #include \"server.h\"\n \n-static const char program_id[] = \"fixincl version 1.0\";\n-\n-#define MINIMUM_MAXIMUM_LINES   128\n-\n-/* If this particular system's header files define the macro `MAXPATHLEN',\n-   we happily take advantage of it; otherwise we use a value which ought\n-   to be large enough.  */\n-#ifndef MAXPATHLEN\n-# define MAXPATHLEN     4096\n-#endif\n-#define NAME_TABLE_SIZE (MINIMUM_MAXIMUM_LINES * MAXPATHLEN)\n-\n-#ifndef EXIT_SUCCESS\n-# define EXIT_SUCCESS 0\n-#endif\n-#ifndef EXIT_FAILURE\n-# define EXIT_FAILURE 1\n-#endif\n-\n-char *file_name_buf;\n+/*  Quality Assurance Marker  :-)\n \n-#define tSCC static const char\n-#define tCC  const char\n-#define tSC  static char\n+    Any file that contains this string is presumed to have\n+    been carefully constructed and will not be fixed  */\n \n-typedef int t_success;\n-\n-#define FAILURE         (-1)\n-#define SUCCESS           0\n-#define PROBLEM           1\n+static const char gnu_lib_mark[] =\n+    \"This file is part of the GNU C Library\";\n \n-#define SUCCEEDED(p)    ((p) == SUCCESS)\n-#define SUCCESSFUL(p)   SUCCEEDED (p)\n-#define FAILED(p)       ((p) < SUCCESS)\n-#define HADGLITCH(p)    ((p) > SUCCESS)\n+/*  The contents of this string are not very important.  It is mostly\n+    just used as part of the \"I am alive and working\" test.  */\n \n-#define NUL             '\\0'\n+static const char program_id[] = \"fixincl version 1.1\";\n \n /*  Test Descriptor\n \n@@ -81,7 +57,7 @@ typedef int t_success;\n     */\n typedef enum\n {\n-  TT_TEST, TT_EGREP, TT_NEGREP\n+  TT_TEST, TT_EGREP, TT_NEGREP, TT_FUNCTION\n } te_test_type;\n \n typedef struct test_desc tTestDesc;\n@@ -101,10 +77,14 @@ typedef struct patch_desc tPatchDesc;\n     a particular fix (which files, how to qualify them,\n     how to actually make the fix, etc...)\n \n+    NB:  the FD_ defines are BIT FLAGS\n+\n     */\n #define FD_MACH_ONLY      0x0000\n #define FD_MACH_IFNOT     0x0001\n #define FD_SHELL_SCRIPT   0x0002\n+#define FD_SUBROUTINE     0x0004\n+#define FD_REPLACEMENT    0x0008\n #define FD_SKIP_TEST      0x8000\n \n typedef struct fix_desc tFixDesc;\n@@ -124,21 +104,47 @@ struct fix_desc\n char *pz_dest_dir = NULL;\n char *pz_src_dir = NULL;\n char *pz_machine = NULL;\n-char *pz_find_base = NULL;\n int find_base_len = 0;\n \n pid_t process_chain_head = (pid_t) -1;\n \n+char*  pz_curr_file;  /*  name of the current file under test/fix  */\n+char*  pz_curr_data;  /*  original contents of that file  */\n+t_bool curr_data_mapped;\n+int    data_map_fd;\n+size_t data_map_size;\n+size_t ttl_data_size = 0;\n+#ifdef DO_STATS\n+int process_ct = 0;\n+int apply_ct = 0;\n+int fixed_ct = 0;\n+int altered_ct = 0;\n+#endif /* DO_STATS */\n+\n+#ifdef HAVE_MMAP\n+#define UNLOAD_DATA() do { if (curr_data_mapped) { \\\n+  munmap ((void*)pz_curr_data, data_map_size); close (data_map_fd); } \\\n+  else free ((void*)pz_curr_data); } while(0)\n+#else\n+#define UNLOAD_DATA() free ((void*)pz_curr_data)\n+#endif\n+\n const char incl_quote_pat[] = \"^[ \\t]*#[ \\t]*include[ \\t]*\\\"[^/]\";\n+tSCC z_fork_err[] = \"Error %d (%s) starting filter process for %s\\n\";\n regex_t incl_quote_re;\n \n+void do_version ();\n char *load_file  _P_((const char *));\n void process  _P_((char *, const char *));\n void run_compiles ();\n-void wait_for_pid _P_(( pid_t ));\n void initialize ();\n+void process ();\n+\n+/*  External Source Code */\n \n #include \"fixincl.x\"\n+#include \"fixtests.c\"\n+#include \"fixfixes.c\"\n \n /* * * * * * * * * * * * * * * * * * *\n  *\n@@ -149,25 +155,7 @@ main (argc, argv)\n      int argc;\n      char **argv;\n {\n-  static const char gnu_lib_mark[] =\n-    \"This file is part of the GNU C Library\";\n-\n-#ifndef NO_BOGOSITY_LIMITS\n-# define BOGUS_LIMIT    MINIMUM_MAXIMUM_LINES\n-  size_t loop_ct;\n-#endif\n-\n-  char *apz_names[BOGUS_LIMIT];\n-  size_t file_name_ct;\n-\n-  /* Before anything else, ensure we can allocate our file name buffer. */\n-  file_name_buf = (char *) malloc (NAME_TABLE_SIZE);\n-  if (file_name_buf == (char *) NULL)\n-    {\n-      fprintf (stderr, \"fixincl cannot allocate 0x%08X bytes\\n\",\n-               NAME_TABLE_SIZE);\n-      exit (EXIT_FAILURE);\n-    }\n+  char *file_name_buf;\n \n   switch (argc)\n     {\n@@ -176,20 +164,13 @@ main (argc, argv)\n \n     case 2:\n       if (strcmp (argv[1], \"-v\") == 0)\n+        do_version ();\n+      if (freopen (argv[1], \"r\", stdin) == (FILE*)NULL)\n         {\n-          static const char zFmt[] = \"echo '%s'\";\n-\n-          /* The 'version' option is really used to test that:\n-               1.  The program loads correctly (no missing libraries)\n-               2.  we can correctly run our server shell process\n-               3.  that we can compile all the regular expressions.\n-           */\n-          run_compiles ();\n-          sprintf (file_name_buf, zFmt, program_id);\n-          fputs (file_name_buf + 5, stdout);\n-          exit (strcmp (run_shell (file_name_buf), program_id));\n+          fprintf (stderr, \"Error %d (%s) reopening %s as stdin\\n\",\n+                   errno, strerror (errno), argv[1] );\n+          exit (EXIT_FAILURE);\n         }\n-      freopen (argv[1], \"r\", stdin);\n       break;\n \n     default:\n@@ -199,52 +180,69 @@ main (argc, argv)\n \n   initialize ();\n \n-#ifndef NO_BOGOSITY_LIMITS\n-  /*  Some systems only allow so many calls to fork(2).\n-      This is inadequate for this program.  Consequently,\n-      we must let a grandfather process spawn children\n-      that then spawn all the processes that do the real work.\n-      */\n+  /* Before anything else, ensure we can allocate our file name buffer. */\n+  file_name_buf = load_file_data (stdin);\n+\n+  /*  Because of the way server shells work, you have to keep stdin, out\n+      and err open so that the proper input file does not get closed\n+      by accident  */\n+\n+  freopen (\"/dev/null\", \"r\", stdin);\n+\n+  if (file_name_buf == (char *) NULL)\n+    {\n+      fputs (\"No file names listed for fixing\\n\", stderr);\n+      exit (EXIT_FAILURE);\n+    }\n+\n   for (;;)\n     {\n-      file_name_ct = 0;\n+      char* pz_end;\n \n-      {\n-        char *pz_buf = file_name_buf;\n+      /*  skip to start of name, past any \"./\" prefixes */\n \n-        /* Only the parent process can read from stdin without confusing\n-           the world. (How does the child tell the parent to skip\n-           forward?  Pipes and files behave differently.)  */\n+      while (ISSPACE (*file_name_buf))  file_name_buf++;\n+      while ((file_name_buf[0] == '.') && (file_name_buf[1] == '/'))\n+        file_name_buf += 2;\n \n-        while (  (file_name_ct < BOGUS_LIMIT)\n-              && (pz_buf < (file_name_buf + NAME_TABLE_SIZE - MAXPATHLEN)))\n-          {\n-            if (fgets (pz_buf, MAXPATHLEN, stdin) == (char *) NULL)\n-              break;\n-            while (ISSPACE (*pz_buf))\n-              pz_buf++;\n-            if ((*pz_buf == '\\0') || (*pz_buf == '#'))\n-              continue;\n-            apz_names[file_name_ct++] = pz_buf;\n-            pz_buf += strlen (pz_buf);\n-            while (ISSPACE (pz_buf[-1]))\n-              pz_buf--;\n-            *pz_buf++ = '\\0';\n-          }\n-      }\n+      /*  Check for end of list  */\n+\n+      if (*file_name_buf == NUL)\n+        break;\n+\n+      /*  Set global file name pointer and find end of name */\n+\n+      pz_curr_file = file_name_buf;\n+      pz_end = strchr( pz_curr_file, '\\n' );\n+      if (pz_end == (char*)NULL)\n+        pz_end = file_name_buf = pz_curr_file + strlen (pz_curr_file);\n+      else\n+        file_name_buf = pz_end + 1;\n+\n+      while ((pz_end > pz_curr_file) && ISSPACE( pz_end[-1]))  pz_end--;\n+\n+      /*  IF no name is found (blank line) or comment marker, skip line  */\n+\n+      if ((pz_curr_file == pz_end) || (*pz_curr_file == '#'))\n+        continue;\n+      *pz_end = NUL;\n \n-      /*  IF we did not get any files this time thru\n-          THEN we must be done.  */\n-      if (file_name_ct == 0)\n-        return EXIT_SUCCESS;\n+#ifdef NO_BOGOSITY\n+      process ();\n+#else\n+      /*  Prevent duplicate output by child process  */\n \n       fflush (stdout);\n       fflush (stderr);\n \n       {\n+        void wait_for_pid _P_(( pid_t ));\n         pid_t child = fork ();\n         if (child == NULLPROCESS)\n-          break;\n+          {\n+            process ();\n+            return EXIT_SUCCESS;\n+          }\n \n         if (child == NOPROCESS)\n           {\n@@ -253,52 +251,52 @@ main (argc, argv)\n             exit (EXIT_FAILURE);\n           }\n \n-#ifdef DEBUG\n-        fprintf (stderr, \"Waiting for %d to complete %d files\\n\",\n-                 child, file_name_ct);\n-#endif\n-\n-        wait_for_pid( child, file_name_ct );\n+        wait_for_pid( child );\n       }\n-    }\n-#else\n- /*#*/ error \"NON-BOGUS LIMITS NOT SUPPORTED?!?!\"\n #endif\n+    } /*  for (;;) */\n \n-  /*  For every file specified in stdandard in\n-      (except as throttled for bogus reasons)...\n-      */\n-  for (loop_ct = 0; loop_ct < file_name_ct; loop_ct++)\n-    {\n-      char *pz_data;\n-      char *pz_file_name = apz_names[loop_ct];\n-\n-      if (access (pz_file_name, R_OK) != 0)\n-        {\n-          int erno = errno;\n-          fprintf (stderr, \"Cannot access %s from %s\\n\\terror %d (%s)\\n\",\n-                   pz_file_name, getcwd ((char *) NULL, MAXPATHLEN),\n-                   erno, strerror (erno));\n-        }\n-      else if (pz_data = load_file (pz_file_name), (pz_data != (char *) NULL))\n-        {\n-          if (strstr (pz_data, gnu_lib_mark) == (char *) NULL)\n-            process (pz_data, pz_file_name);\n-          free ((void *) pz_data);\n-        }\n-    }\n-\n+#ifdef DO_STATS\n+  {\n+    tSCC zFmt[] =\n+      \"\\\n+Processed %5d files containing %d bytes    \\n\\\n+Applying  %5d fixes to %d files\\n\\\n+Altering  %5d of them\\n\";\n+\n+    fprintf (stderr, zFmt, process_ct, ttl_data_size, apply_ct,\n+             fixed_ct, altered_ct);\n+  }\n+#endif /* DO_STATS */\n   return EXIT_SUCCESS;\n }\n \n \n+void\n+do_version ()\n+{\n+  static const char zFmt[] = \"echo '%s'\";\n+  char zBuf[ 1024 ];\n+\n+  /* The 'version' option is really used to test that:\n+     1.  The program loads correctly (no missing libraries)\n+     2.  we can correctly run our server shell process\n+     3.  that we can compile all the regular expressions.\n+  */\n+  run_compiles ();\n+  sprintf (zBuf, zFmt, program_id);\n+  fputs (zBuf + 5, stdout);\n+  exit (strcmp (run_shell (zBuf), program_id));\n+}\n+\n /* * * * * * * * * * * * */\n \n void\n-initialize()\n+initialize ()\n {\n   static const char var_not_found[] =\n-    \"fixincl ERROR:  %s environment variable not defined\\n\";\n+    \"fixincl ERROR:  %s environment variable not defined\\n\\\n+\\tTARGET_MACHINE, DESTDIR, SRCDIR and FIND_BASE are required\\n\";\n \n   {\n     static const char var[] = \"TARGET_MACHINE\";\n@@ -332,13 +330,16 @@ initialize()\n \n   {\n     static const char var[] = \"FIND_BASE\";\n-    pz_find_base = getenv (var);\n-    if (pz_find_base == (char *) NULL)\n+    char *pz = getenv (var);\n+    if (pz == (char *) NULL)\n       {\n         fprintf (stderr, var_not_found, var);\n         exit (EXIT_FAILURE);\n       }\n-    find_base_len = strlen( pz_find_base );\n+    while ((pz[0] == '.') && (pz[1] == '/'))\n+      pz += 2;\n+    if ((pz[0] != '.') || (pz[1] != NUL))\n+      find_base_len = strlen( pz );\n   }\n \n   /*  Compile all the regular expressions now.\n@@ -351,26 +352,27 @@ initialize()\n   signal (SIGPIPE, SIG_IGN);\n   signal (SIGALRM, SIG_IGN);\n   signal (SIGTERM, SIG_IGN);\n-\n+#ifndef NO_BOGOSITY\n   /*\n      Make sure that if we opened a server process, we close it now.\n      This is the grandparent process.  We don't need the server anymore\n      and our children should make their own.  */\n \n   close_server ();\n   (void)wait ( (int*)NULL );\n+#endif\n }\n \n+#ifndef NO_BOGOSITY\n /* * * * * * * * * * * * *\n- \n+\n    wait_for_pid  -  Keep calling `wait(2)' until it returns\n    the process id we are looking for.  Not every system has\n    `waitpid(2)'.  We also ensure that the children exit with success. */\n \n void\n-wait_for_pid(child, file_name_ct)\n+wait_for_pid(child)\n      pid_t child;\n-     int file_name_ct;\n {\n   for (;;) {\n     int status;\n@@ -414,91 +416,61 @@ wait_for_pid(child, file_name_ct)\n       }\n   } done_waiting:;\n }\n-\n+#endif /* NO_BOGOSITY */\n \n /* * * * * * * * * * * * *\n- \n+\n    load_file loads all the contents of a file into malloc-ed memory.\n    Its argument is the name of the file to read in; the returned\n    result is the NUL terminated contents of the file.  The file\n    is presumed to be an ASCII text file containing no NULs.  */\n char *\n-load_file (pz_file_name)\n-     const char *pz_file_name;\n+load_file ( fname )\n+    const char* fname;\n {\n-  char *pz_data;\n-  size_t file_size;\n-\n-  {\n-    struct stat stbf;\n-    \n-    if (stat (pz_file_name, &stbf) != 0)\n-      {\n-        fprintf (stderr, \"error %d (%s) stat-ing %s\\n\",\n-                 errno, strerror (errno), pz_file_name);\n-        return (char *) NULL;\n-      }\n-    file_size = stbf.st_size;\n-  }\n-  if (file_size == 0)\n-    return (char *) NULL;\n+  struct stat stbf;\n+  char* res;\n \n-  pz_data = (char *) malloc ((file_size + 16) & ~0x00F);\n-  if (pz_data == (char *) NULL)\n+  if (stat (fname, &stbf) != 0)\n     {\n-      fprintf (stderr, \"error:  could not malloc %d bytes\\n\",\n-               file_size);\n-      exit (EXIT_FAILURE);\n+      fprintf (stderr, \"error %d (%s) stat-ing %s\\n\",\n+               errno, strerror (errno), fname );\n+      return (char *) NULL;\n     }\n+  if (stbf.st_size == 0)\n+    return (char*)NULL;\n \n-  {\n-    FILE *fp = fopen (pz_file_name, \"r\");\n-    size_t size_left = file_size;\n-    char *read_ptr = pz_data;\n-\n-    if (fp == (FILE *) NULL)\n-      {\n-        fprintf (stderr, \"error %d (%s) opening %s\\n\", errno,\n-                 strerror (errno), pz_file_name);\n-        free ((void *) pz_data);\n-        return (char *) NULL;\n-      }\n-\n-    do\n-      {\n-        size_t sizeRead = fread ((void *) read_ptr, 1, size_left, fp);\n-\n-        if (sizeRead == 0)\n-          {\n-            if (feof (fp))\n-              break;\n+  data_map_size = stbf.st_size+1;\n+  data_map_fd   = open (fname, O_RDONLY);\n+  ttl_data_size += data_map_size-1;\n \n-            if (ferror (fp))\n-              {\n-                int err = errno;\n-                if (err != EISDIR)\n-                  fprintf (stderr, \"error %d (%s) reading %s\\n\", err,\n-                           strerror (err), pz_file_name);\n-                free ((void *) pz_data);\n-                fclose (fp);\n-                return (char *) NULL;\n-              }\n-          }\n+  if (data_map_fd < 0)\n+    {\n+      fprintf (stderr, \"error %d (%s) opening %s for read\\n\",\n+               errno, strerror (errno), fname);\n+      return (char*)NULL;\n+    }\n \n-        read_ptr += sizeRead;\n-        size_left -= sizeRead;\n-      }\n-    while (size_left != 0);\n+#ifdef HAVE_MMAP\n+  curr_data_mapped = BOOL_TRUE;\n+  res = (char*)mmap ((void*)NULL, data_map_size, PROT_READ, MAP_PRIVATE,\n+                     data_map_fd, 0);\n+  if (res == (char*)BAD_ADDR)\n+    {\n+      curr_data_mapped = BOOL_FALSE;\n+      res = load_file_data ( fdopen (data_map_fd, \"r\"));\n+    }\n+#else\n+  curr_data_mapped = BOOL_FALSE;\n+  res = load_file_data ( fdopen (data_map_fd, \"r\"));\n+#endif\n \n-    *read_ptr = '\\0';\n-    fclose (fp);\n-  }\n-  return pz_data;\n+  return res;\n }\n \n \n /* * * * * * * * * * * * *\n- \n+\n    run_compiles   run all the regexp compiles for all the fixes once.\n  */\n void\n@@ -555,28 +527,28 @@ run_compiles ()\n       if (  (pz_machine != NULL)\n          && (p_fixd->papz_machs != (const char**) NULL) )\n         {\n+          tSCC case_fmt[] = \"case %s in\\n\";     /*  9 bytes, plus string */\n+          tSCC esac_fmt[] = \" )\\n\"              /*  3 bytes */\n+                           \"    echo %s ;;\\n\"   /* 13 bytes */\n+                           \"* ) echo %s ;;\\n\"   /* 13 bytes */\n+                           \"esac\";              /*  4 bytes */\n+          tSCC skip[] = \"skip\";                 /*  4 bytes */\n+          tSCC run[] = \"run\";                   /*  3 bytes */\n+          /* total bytes to add to machine sum:    49 - see fixincl.tpl */\n+\n           const char **papz_machs = p_fixd->papz_machs;\n-          char *pz = file_name_buf;\n+          char *pz;\n           char *pz_sep = \"\";\n           tCC *pz_if_true;\n           tCC *pz_if_false;\n-          tSCC skip[] = \"skip\";\n-          tSCC run[] = \"run\";\n-\n-          /*  Construct a shell script that looks like this:\n+          char cmd_buf[ MACH_LIST_SIZE_LIMIT ]; /* size lim from fixincl.tpl */\n \n-              case our-cpu-platform-os in\n-              tests-cpu-platform-os-pattern )\n-                  echo run ;;\n-              * )\n-                  echo skip ;;\n-              esac\n+          /* Start the case statement */\n \n-              where 'run' and 'skip' may be reversed, depending on\n-              the sense of the test.  */\n+          sprintf (cmd_buf, case_fmt, pz_machine);\n+          pz = cmd_buf + strlen (cmd_buf);\n \n-          sprintf (pz, \"case %s in\\n\", pz_machine);\n-          pz += strlen (pz);\n+          /*  Determine if a match means to apply the fix or not apply it */\n \n           if (p_fixd->fd_flags & FD_MACH_IFNOT)\n             {\n@@ -589,28 +561,30 @@ run_compiles ()\n               pz_if_false = skip;\n             }\n \n-          /*  FOR any additional machine names to test for,\n-              insert the \" | \\\\\\n\" glue and the machine pattern.  */\n+          /*  Emit all the machine names.  If there are more than one,\n+              then we will insert \" | \\\\\\n\" between the names  */\n \n           for (;;)\n             {\n               const char* pz_mach = *(papz_machs++);\n \n               if (pz_mach == (const char*) NULL)\n                 break;\n-              sprintf (pz, \"%s  %s\", pz_sep, pz_mach);\n+              sprintf (pz, \"%s%s\", pz_sep, pz_mach);\n               pz += strlen (pz);\n               pz_sep = \" | \\\\\\n\";\n             }\n-          sprintf (pz, \" )\\n    echo %s ;;\\n  * )\\n    echo %s ;;\\nesac\",\n-                   pz_if_true, pz_if_false);\n+\n+          /* Now emit the match and not-match actions and the esac */\n+\n+          sprintf (pz, esac_fmt, pz_if_true, pz_if_false);\n \n           /*  Run the script.\n               The result will start either with 's' or 'r'.  */\n \n           {\n             int skip;\n-            pz = run_shell (file_name_buf);\n+            pz = run_shell (cmd_buf);\n             skip = (*pz == 's');\n             free ( (void*)pz );\n             if (skip)\n@@ -658,31 +632,21 @@ run_compiles ()\n \n \n /* * * * * * * * * * * * *\n- \n+\n    create_file  Create the output modified file.\n    Input:    the name of the file to create\n    Returns:  a file pointer to the new, open file  */\n \n-#define S_IRALL\t(S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH)\n+#define S_IRALL (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH)\n \n FILE *\n-create_file (pz_file_name)\n-     const char *pz_file_name;\n+create_file ()\n {\n   int fd;\n   FILE *pf;\n   char fname[MAXPATHLEN];\n \n-#ifdef DEBUG\n-  if (strncmp( pz_file_name, pz_find_base, find_base_len ) != 0)\n-    {\n-      fprintf (stderr, \"Error:  input file %s does not match %s/*\\n\",\n-\t       pz_file_name, pz_find_base );\n-      exit (1);\n-    }\n-#endif\n-\n-  sprintf (fname, \"%s/%s\", pz_dest_dir, pz_file_name + find_base_len);\n+  sprintf (fname, \"%s/%s\", pz_dest_dir, pz_curr_file + find_base_len);\n \n   fd = open (fname, O_WRONLY | O_CREAT | O_TRUNC, S_IRALL);\n \n@@ -714,7 +678,7 @@ create_file (pz_file_name)\n                errno, strerror (errno), fname);\n       exit (EXIT_FAILURE);\n     }\n-  fprintf (stderr, \"Fixed:  %s\\n\", pz_file_name);\n+  fprintf (stderr, \"Fixed:  %s\\n\", pz_curr_file);\n   pf = fdopen (fd, \"w\");\n \n #ifdef LATER\n@@ -725,7 +689,7 @@ create_file (pz_file_name)\n     \"    This had to be done to correct non-standard usages in the\\n\"\n     \"    original, manufacturer supplied header file.  */\\n\\n\";\n \n-    fprintf (pf, hdr, pz_file_name);\n+    fprintf (pf, hdr, pz_curr_file);\n   }\n #endif\n   return pf;\n@@ -737,13 +701,13 @@ create_file (pz_file_name)\n   test_test   make sure a shell-style test expression passes.\n   Input:  a pointer to the descriptor of the test to run and\n           the name of the file that we might want to fix\n-  Result: SUCCESS or FAILURE, depending on the result of the\n+  Result: APPLY_FIX or SKIP_FIX, depending on the result of the\n           shell script we run.  */\n \n-t_success\n-test_test (p_test, pz_file_name)\n+int\n+test_test (p_test, pz_test_file)\n      tTestDesc *p_test;\n-     char*      pz_file_name;\n+     char*      pz_test_file;\n {\n   tSCC cmd_fmt[] =\n \"file=%s\\n\\\n@@ -753,44 +717,44 @@ else echo FALSE\\n\\\n fi\";\n \n   char *pz_res;\n-  t_success res = FAILURE;\n+  int res = SKIP_FIX;\n \n   static char cmd_buf[4096];\n \n-  sprintf (cmd_buf, cmd_fmt, pz_file_name, p_test->pz_test_text);\n+  sprintf (cmd_buf, cmd_fmt, pz_test_file, p_test->pz_test_text);\n   pz_res = run_shell (cmd_buf);\n   if (*pz_res == 'T')\n-    res = SUCCESS;\n+    res = APPLY_FIX;\n   free ((void *) pz_res);\n   return res;\n }\n \n \n /* * * * * * * * * * * * *\n- \n+\n   egrep_test   make sure an egrep expression is found in the file text.\n   Input:  a pointer to the descriptor of the test to run and\n           the pointer to the contents of the file under suspicion\n-  Result: SUCCESS if the pattern is found, FAILURE otherwise\n+  Result: APPLY_FIX if the pattern is found, SKIP_FIX otherwise\n \n-  The caller may choose 'FAILURE' as 'SUCCESS' if the sense of the test\n+  The caller may choose to reverse meaning if the sense of the test\n   is inverted.  */\n \n-t_success\n+int\n egrep_test (pz_data, p_test)\n      char *pz_data;\n      tTestDesc *p_test;\n {\n   regmatch_t match;\n \n-#ifndef NO_BOGOSITY\n+#ifdef DEBUG\n   if (p_test->p_test_regex == 0)\n     fprintf (stderr, \"fixincl ERROR RE not compiled:  `%s'\\n\",\n              p_test->pz_test_text);\n #endif\n   if (regexec (p_test->p_test_regex, pz_data, 1, &match, 0) == 0)\n-    return SUCCESS;\n-  return FAILURE;\n+    return APPLY_FIX;\n+  return SKIP_FIX;\n }\n \n \n@@ -813,7 +777,7 @@ quoted_file_exists (pz_src_path, pz_file_path, pz_file)\n \n   for (;;) {\n     char ch = *pz_file++;\n-    if (! ISGRAPH(ch))\n+    if (! ISGRAPH( ch ))\n       return 0;\n     if (ch == '\"')\n       break;\n@@ -832,15 +796,15 @@ quoted_file_exists (pz_src_path, pz_file_path, pz_file)\n /* * * * * * * * * * * * *\n  *\n    extract_quoted_files\n-  \n+\n    The syntax, `#include \"file.h\"' specifies that the compiler is to\n    search the local directory of the current file before the include\n    list.  Consequently, if we have modified a header and stored it in\n    another directory, any files that are included by that modified\n    file in that fashion must also be copied into this new directory.\n    This routine finds those flavors of #include and for each one found\n    emits a triple of:\n-  \n+\n     1.  source directory of the original file\n     2.  the relative path file name of the #includ-ed file\n     3.  the full destination path for this file\n@@ -852,21 +816,21 @@ quoted_file_exists (pz_src_path, pz_file_path, pz_file)\n \n \n void\n-extract_quoted_files (pz_data, pz_file_name, p_re_match)\n+extract_quoted_files (pz_data, pz_fixed_file, p_re_match)\n      char *pz_data;\n-     const char *pz_file_name;\n+     const char *pz_fixed_file;\n      regmatch_t *p_re_match;\n {\n-  char *pz_dir_end = strrchr (pz_file_name, '/');\n+  char *pz_dir_end = strrchr (pz_fixed_file, '/');\n   char *pz_incl_quot = pz_data;\n \n-  fprintf (stderr, \"Quoted includes in %s\\n\", pz_file_name);\n+  fprintf (stderr, \"Quoted includes in %s\\n\", pz_fixed_file);\n \n-  /*  Set \"pz_file_name\" to point to the containing subdirectory of the source\n+  /*  Set \"pz_fixed_file\" to point to the containing subdirectory of the source\n       If there is none, then it is in our current directory, \".\".   */\n \n   if (pz_dir_end == (char *) NULL)\n-    pz_file_name = \".\";\n+    pz_fixed_file = \".\";\n   else\n     *pz_dir_end = '\\0';\n \n@@ -878,17 +842,17 @@ extract_quoted_files (pz_data, pz_file_name, p_re_match)\n       while (ISSPACE (*pz_incl_quot))\n         pz_incl_quot++;\n       /* ISSPACE() may evaluate is argument more than once!  */\n-      while ((++pz_incl_quot, ISSPACE (*pz_incl_quot)))\n+      while (++pz_incl_quot, ISSPACE (*pz_incl_quot))\n         ;\n       pz_incl_quot += sizeof (\"include\") - 1;\n       while (*pz_incl_quot++ != '\"')\n         ;\n \n-      if (quoted_file_exists (pz_src_dir, pz_file_name, pz_incl_quot))\n+      if (quoted_file_exists (pz_src_dir, pz_fixed_file, pz_incl_quot))\n         {\n           /* Print the source directory and the subdirectory\n              of the file in question.  */\n-          printf (\"%s  %s/\", pz_src_dir, pz_file_name);\n+          printf (\"%s  %s/\", pz_src_dir, pz_fixed_file);\n           pz_dir_end = pz_incl_quot;\n \n           /* Append to the directory the relative path of the desired file */\n@@ -897,7 +861,7 @@ extract_quoted_files (pz_data, pz_file_name, p_re_match)\n \n           /* Now print the destination directory appended with the\n              relative path of the desired file */\n-          printf (\"  %s/%s/\", pz_dest_dir, pz_file_name);\n+          printf (\"  %s/%s/\", pz_dest_dir, pz_fixed_file);\n           while (*pz_dir_end != '\"')\n             putc (*pz_dir_end++, stdout);\n \n@@ -912,6 +876,79 @@ extract_quoted_files (pz_data, pz_file_name, p_re_match)\n }\n \n \n+/* * * * * * * * * * * * *\n+\n+    Somebody wrote a *_fix subroutine that we must call.\n+    */\n+\n+int\n+internal_fix (read_fd, p_fixd)\n+  int read_fd;\n+  tFixDesc* p_fixd;\n+{\n+  int fd[2];\n+\n+  if (pipe( fd ) != 0)\n+    {\n+      fprintf (stderr, \"Error %d on pipe(2) call\\n\", errno );\n+      exit (EXIT_FAILURE);\n+    }\n+\n+  for (;;)\n+    {\n+      pid_t childid = fork();\n+\n+      switch (childid)\n+        {\n+        case -1:\n+          break;\n+\n+        case 0:\n+          close (fd[0]);\n+          goto do_child_task;\n+\n+        default:\n+          /*\n+           *  Parent process\n+           */\n+          close (read_fd);\n+          close (fd[1]);\n+          return fd[0];\n+        }\n+\n+      /*\n+       *  Parent in error\n+       */\n+      fprintf (stderr, z_fork_err, errno, strerror (errno),\n+               p_fixd->fix_name);\n+      {\n+        static int failCt = 0;\n+        if ((errno != EAGAIN) || (++failCt > 10))\n+          exit (EXIT_FAILURE);\n+        sleep (1);\n+      }\n+    } do_child_task:;\n+\n+  /*\n+   *  Close our current stdin and stdout\n+   */\n+  close (STDIN_FILENO);\n+  close (STDOUT_FILENO);\n+  UNLOAD_DATA();\n+\n+  /*\n+   *  Make the fd passed in the stdin, and the write end of\n+   *  the new pipe become the stdout.\n+   */\n+  fcntl (fd[1], F_DUPFD, STDOUT_FILENO);\n+  fcntl (read_fd, F_DUPFD, STDIN_FILENO);\n+  fdopen (STDIN_FILENO, \"r\");\n+  fdopen (STDOUT_FILENO, \"w\");\n+\n+  apply_fix (p_fixd->patch_args[0], pz_curr_file);\n+  exit (0);\n+}\n+\n \n /* * * * * * * * * * * * *\n \n@@ -921,24 +958,31 @@ extract_quoted_files (pz_data, pz_file_name, p_re_match)\n     for stdout.  */\n \n int\n-start_fixer (read_fd, p_fixd, pz_file_name)\n+start_fixer (read_fd, p_fixd, pz_fix_file)\n   int read_fd;\n   tFixDesc* p_fixd;\n-  char* pz_file_name;\n+  char* pz_fix_file;\n {\n-  tSCC z_err[] = \"Error %d (%s) starting filter process for %s\\n\";\n   tCC* pz_cmd_save;\n   char* pz_cmd;\n \n+  if ((p_fixd->fd_flags & FD_SUBROUTINE) != 0)\n+    return internal_fix (read_fd, p_fixd);\n+\n   if ((p_fixd->fd_flags & FD_SHELL_SCRIPT) == 0)\n     pz_cmd = (char*)NULL;\n   else\n     {\n       tSCC z_cmd_fmt[] = \"file='%s'\\n%s\";\n-      pz_cmd = (char*)xmalloc (strlen (p_fixd->patch_args[2])\n+      pz_cmd = (char*)malloc (strlen (p_fixd->patch_args[2])\n                                + sizeof( z_cmd_fmt )\n-                               + strlen( pz_file_name ));\n-      sprintf (pz_cmd, z_cmd_fmt, pz_file_name, p_fixd->patch_args[2]);\n+                               + strlen( pz_fix_file ));\n+      if (pz_cmd == (char*)NULL)\n+        {\n+          fputs (\"allocation failure\\n\", stderr);\n+          exit (EXIT_FAILURE);\n+        }\n+      sprintf (pz_cmd, z_cmd_fmt, pz_fix_file, p_fixd->patch_args[2]);\n       pz_cmd_save = p_fixd->patch_args[2];\n       p_fixd->patch_args[2] = pz_cmd;\n     }\n@@ -959,7 +1003,7 @@ start_fixer (read_fd, p_fixd, pz_file_name)\n           break;\n         }\n \n-      fprintf (stderr, z_err, errno, strerror (errno),\n+      fprintf (stderr, z_fork_err, errno, strerror (errno),\n                p_fixd->fix_name);\n \n       if ((errno != EAGAIN) || (++failCt > 10))\n@@ -976,212 +1020,279 @@ start_fixer (read_fd, p_fixd, pz_file_name)\n   return read_fd;\n }\n \n+\n /* * * * * * * * * * * * *\n \n    Process the potential fixes for a particular include file.\n    Input:  the original text of the file and the file's name\n    Result: none.  A new file may or may not be created.  */\n \n-void\n-process (pz_data, pz_file_name)\n-     char *pz_data;\n-     const char *pz_file_name;\n+t_bool\n+fix_applies (p_fixd)\n+  tFixDesc *p_fixd;\n {\n-  static char env_current_file[1024];\n-  tFixDesc *p_fixd = fixDescList;\n-  int todo_ct = FIX_COUNT;\n-  int read_fd = -1;\n-  int num_children = 0;\n+  int test_ct;\n+  tTestDesc *p_test;\n \n-  process_chain_head = NOPROCESS;\n-  fprintf (stderr, \"%-50s   \\r\", pz_file_name );\n-  /* For every fix in our fix list, ...  */\n-  for (; todo_ct > 0; p_fixd++, todo_ct--)\n-    {\n-      tTestDesc *p_test;\n-      int test_ct;\n+  if (p_fixd->fd_flags & FD_SKIP_TEST)\n+    return BOOL_FALSE;\n \n-      if (p_fixd->fd_flags & FD_SKIP_TEST)\n-        continue;\n+  /*  IF there is a file name restriction,\n+      THEN ensure the current file name matches one in the pattern  */\n+\n+  if (p_fixd->file_list != (char *) NULL)\n+    {\n+      const char *pz_fname = pz_curr_file;\n+      const char *pz_scan = p_fixd->file_list;\n+      size_t name_len;\n \n-      /*  IF there is a file name restriction,\n-          THEN ensure the current file name matches one in the pattern  */\n+      while ((pz_fname[0] == '.') && (pz_fname[1] == '/'))\n+        pz_fname += 2;\n+      name_len = strlen (pz_fname);\n \n-      if (p_fixd->file_list != (char *) NULL)\n+      for (;;)\n         {\n-          const char *pz_fname = pz_file_name;\n-          const char *pz_scan = p_fixd->file_list;\n-          size_t name_len;\n+          pz_scan = strstr (pz_scan + 1, pz_fname);\n+          /*  IF we can't match the string at all,\n+              THEN bail  */\n+          if (pz_scan == (char *) NULL)\n+            return BOOL_FALSE;\n \n-          while ((pz_fname[0] == '.') && (pz_fname[1] == '/'))\n-            pz_fname += 2;\n-          name_len = strlen (pz_fname);\n+          /*  IF the match is surrounded by the '|' markers,\n+              THEN we found a full match -- time to run the tests  */\n \n-          for (;;)\n-            {\n-              pz_scan = strstr (pz_scan + 1, pz_fname);\n-              /*  IF we can't match the string at all,\n-                  THEN bail  */\n-              if (pz_scan == (char *) NULL)\n-                goto next_fix;\n+          if ((pz_scan[-1] == '|') && (pz_scan[name_len] == '|'))\n+            break;\n+        }\n+    }\n \n-              /*  IF the match is surrounded by the '|' markers,\n-                  THEN we found a full match -- time to run the tests  */\n+  /*  FOR each test, see if it fails.\n+      IF it does fail, then we go on to the next test */\n \n-              if ((pz_scan[-1] == '|') && (pz_scan[name_len] == '|'))\n-                break;\n-            }\n+  for (p_test = p_fixd->p_test_desc, test_ct = p_fixd->test_ct;\n+       test_ct-- > 0;\n+       p_test++)\n+    {\n+      switch (p_test->type)\n+        {\n+        case TT_TEST:\n+          if (test_test (p_test, pz_curr_file) != APPLY_FIX)\n+            return BOOL_FALSE;\n+          break;\n+\n+        case TT_EGREP:\n+          if (egrep_test (pz_curr_data, p_test) != APPLY_FIX)\n+            return BOOL_FALSE;\n+          break;\n+\n+        case TT_NEGREP:\n+          if (egrep_test (pz_curr_data, p_test) == APPLY_FIX)\n+            /*  Negated sense  */\n+            return BOOL_FALSE;\n+          break;\n+\n+        case TT_FUNCTION:\n+          if (run_test (p_test->pz_test_text, pz_curr_file, pz_curr_data)\n+              != APPLY_FIX)\n+            return BOOL_FALSE;\n+          break;\n         }\n+    }\n \n-      /*  FOR each test, see if it fails.\n-          IF it does fail, then we go on to the next test */\n+  return BOOL_TRUE;\n+}\n \n-      for (p_test = p_fixd->p_test_desc, test_ct = p_fixd->test_ct;\n-           test_ct-- > 0;\n-           p_test++)\n-        {\n-#ifdef DEBUG_TEST\n-          static const char z_test_fail[] =\n-            \"%16s test %2d failed for %s\\n\";\n-#endif\n-          switch (p_test->type)\n-            {\n-            case TT_TEST:\n-              if (!SUCCESSFUL (test_test (p_test, pz_file_name)))\n-                {\n-#ifdef DEBUG_TEST\n-                  fprintf (stderr, z_test_fail, p_fixd->fix_name,\n-                           p_fixd->test_ct - test_ct, pz_file_name);\n-#endif\n-                  goto next_fix;\n-                }\n-              break;\n \n-            case TT_EGREP:\n-              if (!SUCCESSFUL (egrep_test (pz_data, p_test)))\n-                {\n-#ifdef DEBUG_TEST\n-                  fprintf (stderr, z_test_fail, p_fixd->fix_name,\n-                           p_fixd->test_ct - test_ct, pz_file_name);\n+/* * * * * * * * * * * * *\n+\n+   Write out a replacement file  */\n+\n+void\n+write_replacement (p_fixd)\n+  tFixDesc *p_fixd;\n+{\n+   const char* pz_text = p_fixd->patch_args[0];\n+\n+   if ((pz_text == (char*)NULL) || (*pz_text == NUL))\n+     return;\n+\n+   {\n+     FILE* out_fp = create_file (pz_curr_file);\n+     fputs (pz_text, out_fp);\n+     fclose (out_fp);\n+   }\n+}\n+\n+\n+/* * * * * * * * * * * * *\n+\n+    We have work to do.  Read back in the output\n+    of the filtering chain.  Compare each byte as we read it with\n+    the contents of the original file.  As soon as we find any\n+    difference, we will create the output file, write out all\n+    the matched text and then copy any remaining data from the\n+    output of the filter chain.\n+    */\n+void\n+test_for_changes (read_fd)\n+  int read_fd;\n+{\n+  FILE *in_fp = fdopen (read_fd, \"r\");\n+  FILE *out_fp = (FILE *) NULL;\n+  char *pz_cmp = pz_curr_data;\n+\n+#ifdef DO_STATS\n+  fixed_ct++;\n #endif\n-                  goto next_fix;\n-                }\n-              break;\n+  for (;;)\n+    {\n+      int ch;\n \n-            case TT_NEGREP:\n-              if (SUCCESSFUL (egrep_test (pz_data, p_test)))\n-                {\n-#ifdef DEBUG_TEST\n-                  fprintf (stderr, z_test_fail, p_fixd->fix_name,\n-                           p_fixd->test_ct - test_ct, pz_file_name);\n+      ch = getc (in_fp);\n+      if (ch == EOF)\n+        break;\n+\n+      /*  IF we are emitting the output\n+          THEN emit this character, too.\n+      */\n+      if (out_fp != (FILE *) NULL)\n+        putc (ch, out_fp);\n+\n+      /*  ELSE if this character does not match the original,\n+          THEN now is the time to start the output.\n+      */\n+      else if (ch != *pz_cmp)\n+        {\n+          out_fp = create_file (pz_curr_file);\n+\n+#ifdef DO_STATS\n+          altered_ct++;\n #endif\n-                  goto next_fix;\n-                }\n-              break;\n-            }\n+          /*  IF there are matched data, write the matched part now. */\n+          if (pz_cmp != pz_curr_data)\n+            fwrite (pz_curr_data, (size_t)(pz_cmp - pz_curr_data), 1, out_fp);\n+\n+          /*  Emit the current unmatching character */\n+          putc (ch, out_fp);\n         }\n+      else\n+        /*  ELSE the character matches.  Advance the compare ptr */\n+        pz_cmp++;\n+    }\n+\n+  /*  IF we created the output file, ... */\n+  if (out_fp != (FILE *) NULL)\n+    {\n+      regmatch_t match;\n+\n+      /* Close the file and see if we have to worry about\n+         `#include \"file.h\"' constructs.  */\n+      fclose (out_fp);\n+      if (regexec (&incl_quote_re, pz_curr_data, 1, &match, 0) == 0)\n+        extract_quoted_files (pz_curr_data, pz_curr_file, &match);\n+    }\n+\n+  fclose (in_fp);\n+  close (read_fd);  /* probably redundant, but I'm paranoid */\n+}\n+\n+\n+/* * * * * * * * * * * * *\n+\n+   Process the potential fixes for a particular include file.\n+   Input:  the original text of the file and the file's name\n+   Result: none.  A new file may or may not be created.  */\n+\n+void\n+process ()\n+{\n+  static char env_current_file[1024];\n+  tFixDesc *p_fixd = fixDescList;\n+  int todo_ct = FIX_COUNT;\n+  int read_fd = -1;\n+  int num_children = 0;\n+\n+  if (access (pz_curr_file, R_OK) != 0)\n+    {\n+      int erno = errno;\n+      fprintf (stderr, \"Cannot access %s from %s\\n\\terror %d (%s)\\n\",\n+               pz_curr_file, getcwd ((char *) NULL, MAXPATHLEN),\n+               erno, strerror (erno));\n+      return;\n+    }\n+\n+  pz_curr_data = load_file (pz_curr_file);\n+  if (pz_curr_data == (char *) NULL)\n+    return;\n+\n+#ifdef DO_STATS\n+  process_ct++;\n+#endif\n+  fprintf (stderr, \"%6d %-50s   \\r\", data_map_size, pz_curr_file );\n+  if (strstr (pz_curr_data, gnu_lib_mark) != (char *) NULL)\n+    {\n+      UNLOAD_DATA();\n+      return;\n+    }\n+\n+  process_chain_head = NOPROCESS;\n+\n+  /* For every fix in our fix list, ...  */\n+  for (; todo_ct > 0; p_fixd++, todo_ct--)\n+    {\n+      if (! fix_applies (p_fixd))\n+        continue;\n \n       fprintf (stderr, \"Applying %-24s to %s\\n\",\n-               p_fixd->fix_name, pz_file_name);\n+               p_fixd->fix_name, pz_curr_file);\n+\n+      if (p_fixd->fd_flags & FD_REPLACEMENT)\n+        {\n+          write_replacement (p_fixd);\n+          UNLOAD_DATA();\n+          return;\n+        }\n \n       /*  IF we do not have a read pointer,\n           THEN this is the first fix for the current file.\n           Open the source file.  That will be used as stdin for\n           the first fix.  Any subsequent fixes will use the\n-          stdout descriptor of the previous fix as its stdin.  */\n+          stdout descriptor of the previous fix for its stdin.  */\n \n       if (read_fd == -1)\n         {\n-          read_fd = open (pz_file_name, O_RDONLY);\n+          read_fd = open (pz_curr_file, O_RDONLY);\n           if (read_fd < 0)\n             {\n               fprintf (stderr, \"Error %d (%s) opening %s\\n\", errno,\n-                       strerror (errno), pz_file_name);\n+                       strerror (errno), pz_curr_file);\n               exit (EXIT_FAILURE);\n             }\n+\n+          /*  Ensure we do not get duplicate output */\n+\n+          fflush (stdout);\n         }\n \n-      read_fd = start_fixer (read_fd, p_fixd, pz_file_name);\n+      read_fd = start_fixer (read_fd, p_fixd, pz_curr_file);\n       num_children++;\n-\n-    next_fix:\n-      ;\n     }\n \n-  /*  IF after all the tests we did not start any patch programs,\n-      THEN quit now.   */\n-\n-  if (read_fd < 0)\n-    return;\n-\n-  /*  OK.  We have work to do.  Read back in the output\n-      of the filtering chain.  Compare each byte as we read it with\n-      the contents of the original file.  As soon as we find any\n-      difference, we will create the output file, write out all\n-      the matched text and then copy any remaining data from the\n-      output of the filter chain.\n-      */\n-  {\n-    FILE *in_fp = fdopen (read_fd, \"r\");\n-    FILE *out_fp = (FILE *) NULL;\n-    char *pz_cmp = pz_data;\n-\n-    for (;;)\n-      {\n-        int ch;\n-\n-        ch = getc (in_fp);\n-        if (ch == EOF)\n-          break;\n-\n-        /*  IF we are emitting the output\n-            THEN emit this character, too.\n-            */\n-        if (out_fp != (FILE *) NULL)\n-          putc (ch, out_fp);\n-\n-        /*  ELSE if this character does not match the original,\n-            THEN now is the time to start the output.\n-            */\n-        else if (ch != *pz_cmp)\n-          {\n-            out_fp = create_file (pz_file_name);\n+  /*  IF we have a read-back file descriptor,\n+      THEN check for changes and write output if changed.   */\n \n-            /*  IF there are matched data, write it all now. */\n-            if (pz_cmp != pz_data)\n-              {\n-                char c = *pz_cmp;\n-                \n-                *pz_cmp = NUL;\n-                fputs (pz_data, out_fp);\n-                *pz_cmp = c;\n-              }\n-\n-            /*  Emit the current unmatching character */\n-            putc (ch, out_fp);\n-          }\n-        else\n-          /*  ELSE the character matches.  Advance the compare ptr */\n-          pz_cmp++;\n-      }\n-\n-    /*  IF we created the output file, ... */\n-    if (out_fp != (FILE *) NULL)\n-      {\n-        regmatch_t match;\n-\n-        /* Close the file and see if we have to worry about\n-\t   `#include \"file.h\"' constructs.  */\n-        fclose (out_fp);\n-        if (regexec (&incl_quote_re, pz_data, 1, &match, 0) == 0)\n-          extract_quoted_files (pz_data, pz_file_name, &match);\n-      }\n-    fclose (in_fp);\n-  }\n-  close (read_fd);  /* probably redundant, but I'm paranoid */\n+  if (read_fd >= 0)\n+    {\n+      test_for_changes (read_fd);\n+#ifdef DO_STATS\n+      apply_ct += num_children;\n+#endif\n+      /* Wait for child processes created by chain_open()\n+         to avoid leaving zombies.  */\n+      do  {\n+        wait ((int *) NULL);\n+      } while (--num_children > 0);\n+    }\n \n-  /* Wait for child processes created by chain_open()\n-     to avoid creating zombies.  */\n-  while (--num_children >= 0)\n-    wait ((int *) NULL);\n+  UNLOAD_DATA();\n }"}, {"sha": "58a9865d845841790f0a63f4bf856bc1e9691e62", "filename": "gcc/fixinc/fixincl.tpl", "status": "modified", "additions": 63, "deletions": 19, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixincl.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixincl.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.tpl?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -15,12 +15,13 @@ x =]\n                                 =] The Free Software Foundation, Inc.\n  *\n [=_eval inclhack \"# *  \" _gpl=]\n- *[=_EVAL \"re_ct=0\" _shell=][=\n+ *[=_EVAL \"re_ct=0\\nmax_mach=0\" _shell=][=\n \n _FOR fix =]\n  *\n- *  Description [=_eval _index 1 + \"#%3d -\" _printf=] [=hackname _Cap=] fix\n+ *  Description of [=hackname _Cap=] fix\n  */\n+#define [=hackname _up #_FIXIDX + #%-32s _printf=] [=_eval _index=]\n tSCC z[=hackname _cap=]Name[] =\n      [=hackname _cap _krstr=];\n /*\n@@ -40,11 +41,18 @@ tSCC z[=hackname _cap=]List[] =\n \n   _IF mach _exist=]\n tSCC* apz[=hackname _cap=]Machs[] = {[=\n+    _EVAL \"this_mach=0\" _shell =][=\n+\n     _FOR mach =]\n         [=mach _krstr=],[=\n+      _EVAL mach _len \"this_mach=`expr $this_mach + %d + 5`\"\n+            _printf _shell =][=\n     /mach=]\n         (const char*)NULL };[=\n \n+    _EVAL \"if [ $this_mach -gt $max_mach ] ; then max_mach=$this_mach ; fi\"\n+          _shell =][=\n+\n   _ELSE =]\n #define apz[=hackname _cap=]Machs (const char**)NULL[=\n   _ENDIF \"files _exist\" =][=\n@@ -94,24 +102,37 @@ tSCC z[=hackname _cap=]Test[=_eval _index=][] =\n     /test =][=\n   _ENDIF =][=\n \n+  _IF c_test _exist=]\n+\n+/*\n+ *  perform the C function call test\n+ */[=\n+    _FOR c_test =]\n+tSCC z[=hackname _cap=]FTst[=_eval _index=][] = \"[=c_test=]\";[=\n+    /c_test =][=\n+  _ENDIF =][=\n+\n \n #  Build the array of test descriptions for this fix: =][=\n \n-  _IF exesel       _exist\n-      select       _exist |\n-      bypass       _exist |\n-      test         _exist |\n+  _IF exesel  _exist\n+      select  _exist |\n+      bypass  _exist |\n+      test    _exist |\n+      c_test  _exist |\n =]\n \n #define    [=hackname _up =]_TEST_CT  [=\n     _IF exesel _exist =][=\n        _eval exesel       _count\n       \t     bypass       _count +\n-      \t     test         _count + =][=\n+      \t     test         _count + \n+      \t     c_test       _count + =][=\n     _ELSE =][=\n        _eval select       _count\n       \t     bypass       _count +\n-      \t     test         _count + =][=\n+      \t     test         _count + \n+      \t     c_test       _count + =][=\n     _ENDIF =]\n #define    [=hackname _up =]_RE_CT    [=\n     _IF exesel _exist =][=\n@@ -126,24 +147,28 @@ tSCC z[=hackname _cap=]Test[=_eval _index=][] =\n tTestDesc a[=hackname _cap=]Tests[] = {[=\n \n     _FOR test =]\n-  { TT_TEST,   z[=hackname _cap=]Test[=_eval _index=],     0 /* unused */ },[=\n+  { TT_TEST,     z[=hackname _cap=]Test[=_eval _index=],   0 /* unused */ },[=\n     /test =][=\n \n+    _FOR c_test =]\n+  { TT_FUNCTION, z[=hackname _cap=]FTst[=_eval _index=],   0 /* unused */ },[=\n+    /c_test =][=\n+\n     _FOR bypass =]\n-  { TT_NEGREP, z[=hackname _cap=]Bypass[=_eval _index=],   (regex_t*)NULL },[=\n+  { TT_NEGREP,   z[=hackname _cap=]Bypass[=_eval _index=], (regex_t*)NULL },[=\n     /bypass =][=\n \n     #  IF there is an exesel, then use that (those) selection\n           expressions, instead of the regular select expressions\n     =][=\n     _IF exesel _exist =][=\n       _FOR exesel =]\n-  { TT_EGREP,  z[=hackname _cap=]Select[=_eval _index=],   (regex_t*)NULL },[=\n+  { TT_EGREP,    z[=hackname _cap=]Select[=_eval _index=], (regex_t*)NULL },[=\n       /exesel =][=\n \n     _ELSE =][=\n       _FOR select =]\n-  { TT_EGREP,  z[=hackname _cap=]Select[=_eval _index=],   (regex_t*)NULL },[=\n+  { TT_EGREP,    z[=hackname _cap=]Select[=_eval _index=], (regex_t*)NULL },[=\n       /select =][=\n     _ENDIF =] };[=\n   _ELSE =]\n@@ -156,20 +181,37 @@ tTestDesc a[=hackname _cap=]Tests[] = {[=\n  *  Fix Command Arguments for [=hackname _cap=]\n  */\n const char* apz[=hackname _cap=]Patch[] = {[=\n-    _IF   sed         _exist =] \"sed\"[=_FOR sed=],\n-    \"-e\", [=sed _krstr=][=/sed=][=\n+    _IF   sed         _exist =] \"sed\"[=\n+      _FOR sed=],\n+    \"-e\", [=sed _krstr=][=\n+      /sed=],[=\n+\n     _ELIF shell       _exist =] \"sh\", \"-c\",\n-    [=shell _krstr=][=\n-    _ENDIF=],\n+    [=shell _krstr=],[=\n+\n+    _ELIF c_fix _exist =]\"[=c_fix=]\",[=\n+\n+    _ELIF replace _len =]\n+[=replace _krstr=],[=\n+\n+    _ENDIF=]\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *[=\n /fix=]\n  *\n  *  List of all fixes\n  */\n-#define  REGEX_COUNT  [=_eval \"echo $re_ct\" _shell =]\n-#define  FIX_COUNT    [=_eval fix _count =]\n+[=_EVAL '\n+echo \"#define REGEX_COUNT          $re_ct\"\n+echo \"#define MACH_LIST_SIZE_LIMIT `expr $max_mach + 128`\" ' _shell =][=\n+\n+#  as of this writing, 49 bytes are needed by the case statement format.\n+   We also must allow for the size of the target machine machine name.\n+   This allows for a 79 byte machine name.  Better be enough.\n+=]\n+#define FIX_COUNT            [=_eval fix _count =]\n+\n tFixDesc fixDescList[ FIX_COUNT ] = {[=\n \n \n@@ -180,7 +222,9 @@ _FOR fix \",\\n\" =]\n        _IF not_machine _exist =]FD_MACH_IFNOT[=\n        _ELSE                  =]FD_MACH_ONLY[=\n        _ENDIF =][=\n-       _IF shell       _exist =] | FD_SHELL_SCRIPT[=\n+       _IF    shell    _exist =] | FD_SHELL_SCRIPT[=\n+       _ELIF  c_fix    _exist =] | FD_SUBROUTINE[=\n+       _ELIF  replace  _exist =] | FD_REPLACEMENT[=\n        _ENDIF =],\n      a[=hackname _cap=]Tests,   apz[=hackname _cap=]Patch }[=\n "}, {"sha": "51afb75a340d4e9281aa7f4d86feeae7b0329291", "filename": "gcc/fixinc/fixincl.x", "status": "modified", "additions": 617, "deletions": 541, "changes": 1158, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.x?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -29,8 +29,293 @@\n  *             Boston,  MA  02111-1307, USA.\n  *\n  *\n- *  Description   1 - Aix_Syswait fix\n+ *  Description of Aaa_Ki_Iface fix\n  */\n+#define AAA_KI_IFACE_FIXIDX              0\n+tSCC zAaa_Ki_IfaceName[] =\n+     \"Aaa_Ki_Iface\";\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zAaa_Ki_IfaceList[] =\n+  \"|sys/ki_iface.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+#define apzAaa_Ki_IfaceMachs (const char**)NULL\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zAaa_Ki_IfaceSelect0[] =\n+       \"These definitions are for HP Internal developers\";\n+\n+#define    AAA_KI_IFACE_TEST_CT  1\n+#define    AAA_KI_IFACE_RE_CT    1\n+tTestDesc aAaa_Ki_IfaceTests[] = {\n+  { TT_EGREP,    zAaa_Ki_IfaceSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Aaa_Ki_Iface\n+ */\n+const char* apzAaa_Ki_IfacePatch[] = {\n+    (char*)NULL };\n+\n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Aaa_Ki fix\n+ */\n+#define AAA_KI_FIXIDX                    1\n+tSCC zAaa_KiName[] =\n+     \"Aaa_Ki\";\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zAaa_KiList[] =\n+  \"|sys/ki.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+#define apzAaa_KiMachs (const char**)NULL\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zAaa_KiSelect0[] =\n+       \"11.00 HP-UX LP64\";\n+\n+#define    AAA_KI_TEST_CT  1\n+#define    AAA_KI_RE_CT    1\n+tTestDesc aAaa_KiTests[] = {\n+  { TT_EGREP,    zAaa_KiSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Aaa_Ki\n+ */\n+const char* apzAaa_KiPatch[] = {\n+    (char*)NULL };\n+\n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Aaa_Ki_Calls fix\n+ */\n+#define AAA_KI_CALLS_FIXIDX              2\n+tSCC zAaa_Ki_CallsName[] =\n+     \"Aaa_Ki_Calls\";\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zAaa_Ki_CallsList[] =\n+  \"|sys/ki_calls.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+#define apzAaa_Ki_CallsMachs (const char**)NULL\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zAaa_Ki_CallsSelect0[] =\n+       \"kthread_create_caller_t\";\n+\n+#define    AAA_KI_CALLS_TEST_CT  1\n+#define    AAA_KI_CALLS_RE_CT    1\n+tTestDesc aAaa_Ki_CallsTests[] = {\n+  { TT_EGREP,    zAaa_Ki_CallsSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Aaa_Ki_Calls\n+ */\n+const char* apzAaa_Ki_CallsPatch[] = {\n+    (char*)NULL };\n+\n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Aaa_Ki_Defs fix\n+ */\n+#define AAA_KI_DEFS_FIXIDX               3\n+tSCC zAaa_Ki_DefsName[] =\n+     \"Aaa_Ki_Defs\";\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zAaa_Ki_DefsList[] =\n+  \"|sys/ki_defs.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+#define apzAaa_Ki_DefsMachs (const char**)NULL\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zAaa_Ki_DefsSelect0[] =\n+       \"Kernel Instrumentation Definitions\";\n+\n+#define    AAA_KI_DEFS_TEST_CT  1\n+#define    AAA_KI_DEFS_RE_CT    1\n+tTestDesc aAaa_Ki_DefsTests[] = {\n+  { TT_EGREP,    zAaa_Ki_DefsSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Aaa_Ki_Defs\n+ */\n+const char* apzAaa_Ki_DefsPatch[] = {\n+    (char*)NULL };\n+\n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Aaa_Bad_Fixes fix\n+ */\n+#define AAA_BAD_FIXES_FIXIDX             4\n+tSCC zAaa_Bad_FixesName[] =\n+     \"Aaa_Bad_Fixes\";\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zAaa_Bad_FixesList[] =\n+  \"|sundev/ipi_error.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+#define apzAaa_Bad_FixesMachs (const char**)NULL\n+#define AAA_BAD_FIXES_TEST_CT  0\n+#define AAA_BAD_FIXES_RE_CT    0\n+#define aAaa_Bad_FixesTests   (tTestDesc*)NULL\n+\n+/*\n+ *  Fix Command Arguments for Aaa_Bad_Fixes\n+ */\n+const char* apzAaa_Bad_FixesPatch[] = {\n+    (char*)NULL };\n+\n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Aaa_Time fix\n+ */\n+#define AAA_TIME_FIXIDX                  5\n+tSCC zAaa_TimeName[] =\n+     \"Aaa_Time\";\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zAaa_TimeList[] =\n+  \"|sys/time.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+#define apzAaa_TimeMachs (const char**)NULL\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zAaa_TimeSelect0[] =\n+       \"11.0 and later representation of ki time\";\n+\n+#define    AAA_TIME_TEST_CT  1\n+#define    AAA_TIME_RE_CT    1\n+tTestDesc aAaa_TimeTests[] = {\n+  { TT_EGREP,    zAaa_TimeSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Aaa_Time\n+ */\n+const char* apzAaa_TimePatch[] = {\n+    (char*)NULL };\n+\n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Aab_Dgux_Int_Varargs fix\n+ */\n+#define AAB_DGUX_INT_VARARGS_FIXIDX      6\n+tSCC zAab_Dgux_Int_VarargsName[] =\n+     \"Aab_Dgux_Int_Varargs\";\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zAab_Dgux_Int_VarargsList[] =\n+  \"|_int_varargs.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+#define apzAab_Dgux_Int_VarargsMachs (const char**)NULL\n+#define AAB_DGUX_INT_VARARGS_TEST_CT  0\n+#define AAB_DGUX_INT_VARARGS_RE_CT    0\n+#define aAab_Dgux_Int_VarargsTests   (tTestDesc*)NULL\n+\n+/*\n+ *  Fix Command Arguments for Aab_Dgux_Int_Varargs\n+ */\n+const char* apzAab_Dgux_Int_VarargsPatch[] = {\n+\"#ifndef __INT_VARARGS_H\\n\\\n+#define __INT_VARARGS_H\\n\\\n+\\n\\\n+/************************************************************************/\\n\\\n+/* _INT_VARARGS.H - Define the common stuff for varargs/stdarg/stdio.   */\\n\\\n+/************************************************************************/\\n\\\n+\\n\\\n+/*\\n\\\n+** This file is a DG internal header.  Never include this\\n\\\n+** file directly.\\n\\\n+*/\\n\\\n+\\n\\\n+#ifndef ___int_features_h\\n\\\n+#include &lt;sys/_int_features.h&gt;\\n\\\n+#endif\\n\\\n+\\n\\\n+#if !(defined(_VA_LIST) || defined(_VA_LIST_))\\n\\\n+#define _VA_LIST\\n\\\n+#define _VA_LIST_\\n\\\n+\\n\\\n+#ifdef __LINT__\\n\\\n+\\n\\\n+#ifdef __STDC__\\n\\\n+typedef void * va_list;\\n\\\n+#else\\n\\\n+typedef char * va_list;\\n\\\n+#endif\\n\\\n+\\n\\\n+#else\\n\\\n+#if _M88K_ANY\\n\\\n+\\n\\\n+#if defined(__DCC__)\\n\\\n+\\n\\\n+typedef struct {\\n\\\n+      int     next_arg;\\n\\\n+      int     *mem_ptr;\\n\\\n+      int     *reg_ptr;\\n\\\n+} va_list;\\n\\\n+\\n\\\n+#else  /* ! defined(__DCC__) */\\n\\\n+\\n\\\n+typedef struct {\\n\\\n+      int  __va_arg;       /* argument number */\\n\\\n+      int *__va_stk;       /* start of args passed on stack */\\n\\\n+      int *__va_reg;       /* start of args passed in regs */\\n\\\n+} va_list;\\n\\\n+\\n\\\n+#endif  /* ! defined(__DCC__) */\\n\\\n+\\n\\\n+#elif _IX86_ANY\\n\\\n+\\n\\\n+#if defined(__GNUC__) || defined(__STDC__)\\n\\\n+typedef void * va_list;\\n\\\n+#else\\n\\\n+typedef char * va_list;\\n\\\n+#endif\\n\\\n+\\n\\\n+#endif  /*  _IX86_ANY */\\n\\\n+\\n\\\n+#endif /* __LINT__ */\\n\\\n+#endif /*  !(defined(_VA_LIST) || defined(_VA_LIST_)) */\\n\\\n+#endif /*  #ifndef __INT_VARARGS_H  */\\n\",\n+    (char*)NULL };\n+\n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Aix_Syswait fix\n+ */\n+#define AIX_SYSWAIT_FIXIDX               7\n tSCC zAix_SyswaitName[] =\n      \"Aix_Syswait\";\n /*\n@@ -52,7 +337,7 @@ tSCC zAix_SyswaitSelect0[] =\n #define    AIX_SYSWAIT_TEST_CT  1\n #define    AIX_SYSWAIT_RE_CT    1\n tTestDesc aAix_SyswaitTests[] = {\n-  { TT_EGREP,  zAix_SyswaitSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zAix_SyswaitSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Aix_Syswait\n@@ -64,8 +349,9 @@ struct rusage;\\n\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   2 - Aix_Volatile fix\n+ *  Description of Aix_Volatile fix\n  */\n+#define AIX_VOLATILE_FIXIDX              8\n tSCC zAix_VolatileName[] =\n      \"Aix_Volatile\";\n /*\n@@ -87,7 +373,7 @@ tSCC zAix_VolatileSelect0[] =\n #define    AIX_VOLATILE_TEST_CT  1\n #define    AIX_VOLATILE_RE_CT    1\n tTestDesc aAix_VolatileTests[] = {\n-  { TT_EGREP,  zAix_VolatileSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zAix_VolatileSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Aix_Volatile\n@@ -98,8 +384,9 @@ const char* apzAix_VolatilePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   3 - Alpha_Getopt fix\n+ *  Description of Alpha_Getopt fix\n  */\n+#define ALPHA_GETOPT_FIXIDX              9\n tSCC zAlpha_GetoptName[] =\n      \"Alpha_Getopt\";\n /*\n@@ -121,7 +408,7 @@ tSCC zAlpha_GetoptSelect0[] =\n #define    ALPHA_GETOPT_TEST_CT  1\n #define    ALPHA_GETOPT_RE_CT    1\n tTestDesc aAlpha_GetoptTests[] = {\n-  { TT_EGREP,  zAlpha_GetoptSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zAlpha_GetoptSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Alpha_Getopt\n@@ -132,8 +419,9 @@ const char* apzAlpha_GetoptPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   4 - Alpha_Parens fix\n+ *  Description of Alpha_Parens fix\n  */\n+#define ALPHA_PARENS_FIXIDX              10\n tSCC zAlpha_ParensName[] =\n      \"Alpha_Parens\";\n /*\n@@ -155,7 +443,7 @@ tSCC zAlpha_ParensSelect0[] =\n #define    ALPHA_PARENS_TEST_CT  1\n #define    ALPHA_PARENS_RE_CT    1\n tTestDesc aAlpha_ParensTests[] = {\n-  { TT_EGREP,  zAlpha_ParensSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zAlpha_ParensSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Alpha_Parens\n@@ -166,8 +454,9 @@ const char* apzAlpha_ParensPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   5 - Alpha_Sbrk fix\n+ *  Description of Alpha_Sbrk fix\n  */\n+#define ALPHA_SBRK_FIXIDX                11\n tSCC zAlpha_SbrkName[] =\n      \"Alpha_Sbrk\";\n /*\n@@ -189,7 +478,7 @@ tSCC zAlpha_SbrkSelect0[] =\n #define    ALPHA_SBRK_TEST_CT  1\n #define    ALPHA_SBRK_RE_CT    1\n tTestDesc aAlpha_SbrkTests[] = {\n-  { TT_EGREP,  zAlpha_SbrkSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zAlpha_SbrkSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Alpha_Sbrk\n@@ -200,8 +489,9 @@ const char* apzAlpha_SbrkPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   6 - Arm_Norcroft_Hint fix\n+ *  Description of Arm_Norcroft_Hint fix\n  */\n+#define ARM_NORCROFT_HINT_FIXIDX         12\n tSCC zArm_Norcroft_HintName[] =\n      \"Arm_Norcroft_Hint\";\n /*\n@@ -223,7 +513,7 @@ tSCC zArm_Norcroft_HintSelect0[] =\n #define    ARM_NORCROFT_HINT_TEST_CT  1\n #define    ARM_NORCROFT_HINT_RE_CT    1\n tTestDesc aArm_Norcroft_HintTests[] = {\n-  { TT_EGREP,  zArm_Norcroft_HintSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zArm_Norcroft_HintSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Arm_Norcroft_Hint\n@@ -234,8 +524,9 @@ const char* apzArm_Norcroft_HintPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   7 - Arm_Wchar fix\n+ *  Description of Arm_Wchar fix\n  */\n+#define ARM_WCHAR_FIXIDX                 13\n tSCC zArm_WcharName[] =\n      \"Arm_Wchar\";\n /*\n@@ -257,7 +548,7 @@ tSCC zArm_WcharSelect0[] =\n #define    ARM_WCHAR_TEST_CT  1\n #define    ARM_WCHAR_RE_CT    1\n tTestDesc aArm_WcharTests[] = {\n-  { TT_EGREP,  zArm_WcharSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zArm_WcharSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Arm_Wchar\n@@ -269,8 +560,9 @@ const char* apzArm_WcharPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   8 - Aux_Asm fix\n+ *  Description of Aux_Asm fix\n  */\n+#define AUX_ASM_FIXIDX                   14\n tSCC zAux_AsmName[] =\n      \"Aux_Asm\";\n /*\n@@ -292,7 +584,7 @@ tSCC zAux_AsmSelect0[] =\n #define    AUX_ASM_TEST_CT  1\n #define    AUX_ASM_RE_CT    1\n tTestDesc aAux_AsmTests[] = {\n-  { TT_EGREP,  zAux_AsmSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zAux_AsmSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Aux_Asm\n@@ -303,8 +595,9 @@ const char* apzAux_AsmPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description   9 - Avoid_Bool fix\n+ *  Description of Avoid_Bool fix\n  */\n+#define AVOID_BOOL_FIXIDX                15\n tSCC zAvoid_BoolName[] =\n      \"Avoid_Bool\";\n /*\n@@ -348,8 +641,9 @@ const char* apzAvoid_BoolPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  10 - Bad_Struct_Term fix\n+ *  Description of Bad_Struct_Term fix\n  */\n+#define BAD_STRUCT_TERM_FIXIDX           16\n tSCC zBad_Struct_TermName[] =\n      \"Bad_Struct_Term\";\n /*\n@@ -371,7 +665,7 @@ tSCC zBad_Struct_TermSelect0[] =\n #define    BAD_STRUCT_TERM_TEST_CT  1\n #define    BAD_STRUCT_TERM_RE_CT    1\n tTestDesc aBad_Struct_TermTests[] = {\n-  { TT_EGREP,  zBad_Struct_TermSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zBad_Struct_TermSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Bad_Struct_Term\n@@ -382,8 +676,9 @@ const char* apzBad_Struct_TermPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  11 - Badquote fix\n+ *  Description of Badquote fix\n  */\n+#define BADQUOTE_FIXIDX                  17\n tSCC zBadquoteName[] =\n      \"Badquote\";\n /*\n@@ -408,8 +703,9 @@ const char* apzBadquotePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  12 - Bad_Lval fix\n+ *  Description of Bad_Lval fix\n  */\n+#define BAD_LVAL_FIXIDX                  18\n tSCC zBad_LvalName[] =\n      \"Bad_Lval\";\n /*\n@@ -434,8 +730,9 @@ const char* apzBad_LvalPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  13 - Broken_Assert_Stdio fix\n+ *  Description of Broken_Assert_Stdio fix\n  */\n+#define BROKEN_ASSERT_STDIO_FIXIDX       19\n tSCC zBroken_Assert_StdioName[] =\n      \"Broken_Assert_Stdio\";\n /*\n@@ -463,8 +760,8 @@ tSCC zBroken_Assert_StdioBypass0[] =\n #define    BROKEN_ASSERT_STDIO_TEST_CT  2\n #define    BROKEN_ASSERT_STDIO_RE_CT    2\n tTestDesc aBroken_Assert_StdioTests[] = {\n-  { TT_NEGREP, zBroken_Assert_StdioBypass0,   (regex_t*)NULL },\n-  { TT_EGREP,  zBroken_Assert_StdioSelect0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zBroken_Assert_StdioBypass0, (regex_t*)NULL },\n+  { TT_EGREP,    zBroken_Assert_StdioSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Broken_Assert_Stdio\n@@ -476,8 +773,9 @@ const char* apzBroken_Assert_StdioPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  14 - Broken_Assert_Stdlib fix\n+ *  Description of Broken_Assert_Stdlib fix\n  */\n+#define BROKEN_ASSERT_STDLIB_FIXIDX      20\n tSCC zBroken_Assert_StdlibName[] =\n      \"Broken_Assert_Stdlib\";\n /*\n@@ -505,8 +803,8 @@ tSCC zBroken_Assert_StdlibBypass0[] =\n #define    BROKEN_ASSERT_STDLIB_TEST_CT  2\n #define    BROKEN_ASSERT_STDLIB_RE_CT    2\n tTestDesc aBroken_Assert_StdlibTests[] = {\n-  { TT_NEGREP, zBroken_Assert_StdlibBypass0,   (regex_t*)NULL },\n-  { TT_EGREP,  zBroken_Assert_StdlibSelect0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zBroken_Assert_StdlibBypass0, (regex_t*)NULL },\n+  { TT_EGREP,    zBroken_Assert_StdlibSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Broken_Assert_Stdlib\n@@ -520,8 +818,9 @@ const char* apzBroken_Assert_StdlibPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  15 - Bsd43_Io_Macros fix\n+ *  Description of Bsd43_Io_Macros fix\n  */\n+#define BSD43_IO_MACROS_FIXIDX           21\n tSCC zBsd43_Io_MacrosName[] =\n      \"Bsd43_Io_Macros\";\n /*\n@@ -542,7 +841,7 @@ tSCC zBsd43_Io_MacrosSelect0[] =\n #define    BSD43_IO_MACROS_TEST_CT  1\n #define    BSD43_IO_MACROS_RE_CT    1\n tTestDesc aBsd43_Io_MacrosTests[] = {\n-  { TT_EGREP,  zBsd43_Io_MacrosSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zBsd43_Io_MacrosSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Bsd43_Io_Macros\n@@ -554,8 +853,9 @@ const char* apzBsd43_Io_MacrosPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  16 - Dec_Intern_Asm fix\n+ *  Description of Dec_Intern_Asm fix\n  */\n+#define DEC_INTERN_ASM_FIXIDX            22\n tSCC zDec_Intern_AsmName[] =\n      \"Dec_Intern_Asm\";\n /*\n@@ -583,98 +883,9 @@ const char* apzDec_Intern_AsmPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  17 - Dgux_Int_Varargs fix\n- */\n-tSCC zDgux_Int_VarargsName[] =\n-     \"Dgux_Int_Varargs\";\n-/*\n- *  File name selection pattern\n- */\n-tSCC zDgux_Int_VarargsList[] =\n-  \"|_int_varargs.h|\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzDgux_Int_VarargsMachs (const char**)NULL\n-#define DGUX_INT_VARARGS_TEST_CT  0\n-#define DGUX_INT_VARARGS_RE_CT    0\n-#define aDgux_Int_VarargsTests   (tTestDesc*)NULL\n-\n-/*\n- *  Fix Command Arguments for Dgux_Int_Varargs\n- */\n-const char* apzDgux_Int_VarargsPatch[] = { \"sh\", \"-c\",\n-    \"cat > /dev/null\\n\\\n-cat << '_EOF_'\\n\\\n-#ifndef __INT_VARARGS_H\\n\\\n-#define __INT_VARARGS_H\\n\\\n-\\n\\\n-/************************************************************************/\\n\\\n-/* _INT_VARARGS.H - Define the common stuff for varargs/stdarg/stdio.   */\\n\\\n-/************************************************************************/\\n\\\n-\\n\\\n-/*\\n\\\n-** This file is a DG internal header.  Never include this\\n\\\n-** file directly.\\n\\\n-*/\\n\\\n-\\n\\\n-#ifndef ___int_features_h\\n\\\n-#include &lt;sys/_int_features.h&gt;\\n\\\n-#endif\\n\\\n-\\n\\\n-#if !(defined(_VA_LIST) || defined(_VA_LIST_))\\n\\\n-#define _VA_LIST\\n\\\n-#define _VA_LIST_\\n\\\n-\\n\\\n-#ifdef __LINT__\\n\\\n-\\n\\\n-#ifdef __STDC__\\n\\\n-typedef void * va_list;\\n\\\n-#else\\n\\\n-typedef char * va_list;\\n\\\n-#endif\\n\\\n-\\n\\\n-#else\\n\\\n-#if _M88K_ANY\\n\\\n-\\n\\\n-#if defined(__DCC__)\\n\\\n-\\n\\\n-typedef struct {\\n\\\n-      int     next_arg;\\n\\\n-      int     *mem_ptr;\\n\\\n-      int     *reg_ptr;\\n\\\n-} va_list;\\n\\\n-\\n\\\n-#else  /* ! defined(__DCC__) */\\n\\\n-\\n\\\n-typedef struct {\\n\\\n-      int  __va_arg;       /* argument number */\\n\\\n-      int *__va_stk;       /* start of args passed on stack */\\n\\\n-      int *__va_reg;       /* start of args passed in regs */\\n\\\n-} va_list;\\n\\\n-\\n\\\n-#endif  /* ! defined(__DCC__) */\\n\\\n-\\n\\\n-#elif _IX86_ANY\\n\\\n-\\n\\\n-#if defined(__GNUC__) || defined(__STDC__)\\n\\\n-typedef void * va_list;\\n\\\n-#else\\n\\\n-typedef char * va_list;\\n\\\n-#endif\\n\\\n-\\n\\\n-#endif  /*  _IX86_ANY */\\n\\\n-\\n\\\n-#endif /* __LINT__ */\\n\\\n-#endif /*  !(defined(_VA_LIST) || defined(_VA_LIST_)) */\\n\\\n-#endif /*  #ifndef __INT_VARARGS_H  */\\n\\\n-_EOF_\\n\",\n-    (char*)NULL };\n-\n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description  18 - No_Double_Slash fix\n+ *  Description of No_Double_Slash fix\n  */\n+#define NO_DOUBLE_SLASH_FIXIDX           23\n tSCC zNo_Double_SlashName[] =\n      \"No_Double_Slash\";\n /*\n@@ -687,36 +898,26 @@ tSCC zNo_Double_SlashName[] =\n #define apzNo_Double_SlashMachs (const char**)NULL\n \n /*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zNo_Double_SlashSelect0[] =\n-       \"(^|[^:])//[^\\\"*]\";\n-\n-/*\n- *  perform the 'test' shell command - do fix on success\n+ *  perform the C function call test\n  */\n-tSCC zNo_Double_SlashTest0[] =\n-       \" -z \\\"`echo ${file} | egrep '(CC|cxx|\\\\+\\\\+)/'`\\\"\";\n+tSCC zNo_Double_SlashFTst0[] = \"double_slash\";\n \n-#define    NO_DOUBLE_SLASH_TEST_CT  2\n-#define    NO_DOUBLE_SLASH_RE_CT    1\n+#define    NO_DOUBLE_SLASH_TEST_CT  1\n+#define    NO_DOUBLE_SLASH_RE_CT    0\n tTestDesc aNo_Double_SlashTests[] = {\n-  { TT_TEST,   zNo_Double_SlashTest0,     0 /* unused */ },\n-  { TT_EGREP,  zNo_Double_SlashSelect0,   (regex_t*)NULL }, };\n+  { TT_FUNCTION, zNo_Double_SlashFTst0,   0 /* unused */ }, };\n \n /*\n  *  Fix Command Arguments for No_Double_Slash\n  */\n-const char* apzNo_Double_SlashPatch[] = { \"sed\",\n-    \"-e\", \"s,^//.*$,,\",\n-    \"-e\", \"s,\\\\(/\\\\*.*\\\\)//\\\\(.*\\\\*/\\\\),\\\\1/ /\\\\2,g\",\n-    \"-e\", \"s,\\\\([^:]\\\\)//[^\\\"].*$,\\\\1,\",\n+const char* apzNo_Double_SlashPatch[] = {\"no_double_slash\",\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  19 - Ecd_Cursor fix\n+ *  Description of Ecd_Cursor fix\n  */\n+#define ECD_CURSOR_FIXIDX                24\n tSCC zEcd_CursorName[] =\n      \"Ecd_Cursor\";\n /*\n@@ -741,8 +942,9 @@ const char* apzEcd_CursorPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  20 - Sco5_Stat_Wrappers fix\n+ *  Description of Sco5_Stat_Wrappers fix\n  */\n+#define SCO5_STAT_WRAPPERS_FIXIDX        25\n tSCC zSco5_Stat_WrappersName[] =\n      \"Sco5_Stat_Wrappers\";\n /*\n@@ -777,8 +979,9 @@ extern \\\"C\\\"\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  21 - End_Else_Label fix\n+ *  Description of End_Else_Label fix\n  */\n+#define END_ELSE_LABEL_FIXIDX            26\n tSCC zEnd_Else_LabelName[] =\n      \"End_Else_Label\";\n /*\n@@ -799,7 +1002,7 @@ tSCC zEnd_Else_LabelSelect0[] =\n #define    END_ELSE_LABEL_TEST_CT  1\n #define    END_ELSE_LABEL_RE_CT    1\n tTestDesc aEnd_Else_LabelTests[] = {\n-  { TT_EGREP,  zEnd_Else_LabelSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zEnd_Else_LabelSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for End_Else_Label\n@@ -819,8 +1022,9 @@ s%^\\\\([ \\t]*#[ \\t]*endif\\\\)[ \\t][ \\t]*[^/* \\t].*%\\\\1%\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  22 - Hp_Inline fix\n+ *  Description of Hp_Inline fix\n  */\n+#define HP_INLINE_FIXIDX                 27\n tSCC zHp_InlineName[] =\n      \"Hp_Inline\";\n /*\n@@ -842,7 +1046,7 @@ tSCC zHp_InlineSelect0[] =\n #define    HP_INLINE_TEST_CT  1\n #define    HP_INLINE_RE_CT    1\n tTestDesc aHp_InlineTests[] = {\n-  { TT_EGREP,  zHp_InlineSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zHp_InlineSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Hp_Inline\n@@ -854,8 +1058,9 @@ const char* apzHp_InlinePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  23 - Hp_Sysfile fix\n+ *  Description of Hp_Sysfile fix\n  */\n+#define HP_SYSFILE_FIXIDX                28\n tSCC zHp_SysfileName[] =\n      \"Hp_Sysfile\";\n /*\n@@ -877,7 +1082,7 @@ tSCC zHp_SysfileSelect0[] =\n #define    HP_SYSFILE_TEST_CT  1\n #define    HP_SYSFILE_RE_CT    1\n tTestDesc aHp_SysfileTests[] = {\n-  { TT_EGREP,  zHp_SysfileSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zHp_SysfileSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Hp_Sysfile\n@@ -888,8 +1093,9 @@ const char* apzHp_SysfilePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  24 - Cxx_Unready fix\n+ *  Description of Cxx_Unready fix\n  */\n+#define CXX_UNREADY_FIXIDX               29\n tSCC zCxx_UnreadyName[] =\n      \"Cxx_Unready\";\n /*\n@@ -911,7 +1117,7 @@ tSCC zCxx_UnreadyBypass0[] =\n #define    CXX_UNREADY_TEST_CT  1\n #define    CXX_UNREADY_RE_CT    1\n tTestDesc aCxx_UnreadyTests[] = {\n-  { TT_NEGREP, zCxx_UnreadyBypass0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zCxx_UnreadyBypass0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Cxx_Unready\n@@ -930,8 +1136,9 @@ extern \\\"C\\\" {\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  25 - Hpux_Maxint fix\n+ *  Description of Hpux_Maxint fix\n  */\n+#define HPUX_MAXINT_FIXIDX               30\n tSCC zHpux_MaxintName[] =\n      \"Hpux_Maxint\";\n /*\n@@ -959,8 +1166,9 @@ const char* apzHpux_MaxintPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  26 - Hpux_Systime fix\n+ *  Description of Hpux_Systime fix\n  */\n+#define HPUX_SYSTIME_FIXIDX              31\n tSCC zHpux_SystimeName[] =\n      \"Hpux_Systime\";\n /*\n@@ -982,7 +1190,7 @@ tSCC zHpux_SystimeSelect0[] =\n #define    HPUX_SYSTIME_TEST_CT  1\n #define    HPUX_SYSTIME_RE_CT    1\n tTestDesc aHpux_SystimeTests[] = {\n-  { TT_EGREP,  zHpux_SystimeSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zHpux_SystimeSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Hpux_Systime\n@@ -993,8 +1201,9 @@ const char* apzHpux_SystimePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  27 - Interactv_Add1 fix\n+ *  Description of Interactv_Add1 fix\n  */\n+#define INTERACTV_ADD1_FIXIDX            32\n tSCC zInteractv_Add1Name[] =\n      \"Interactv_Add1\";\n /*\n@@ -1018,8 +1227,8 @@ tSCC zInteractv_Add1Test1[] =\n #define    INTERACTV_ADD1_TEST_CT  2\n #define    INTERACTV_ADD1_RE_CT    0\n tTestDesc aInteractv_Add1Tests[] = {\n-  { TT_TEST,   zInteractv_Add1Test0,     0 /* unused */ },\n-  { TT_TEST,   zInteractv_Add1Test1,     0 /* unused */ }, };\n+  { TT_TEST,     zInteractv_Add1Test0,   0 /* unused */ },\n+  { TT_TEST,     zInteractv_Add1Test1,   0 /* unused */ }, };\n \n /*\n  *  Fix Command Arguments for Interactv_Add1\n@@ -1030,8 +1239,9 @@ const char* apzInteractv_Add1Patch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  28 - Interactv_Add2 fix\n+ *  Description of Interactv_Add2 fix\n  */\n+#define INTERACTV_ADD2_FIXIDX            33\n tSCC zInteractv_Add2Name[] =\n      \"Interactv_Add2\";\n /*\n@@ -1055,8 +1265,8 @@ tSCC zInteractv_Add2Test1[] =\n #define    INTERACTV_ADD2_TEST_CT  2\n #define    INTERACTV_ADD2_RE_CT    0\n tTestDesc aInteractv_Add2Tests[] = {\n-  { TT_TEST,   zInteractv_Add2Test0,     0 /* unused */ },\n-  { TT_TEST,   zInteractv_Add2Test1,     0 /* unused */ }, };\n+  { TT_TEST,     zInteractv_Add2Test0,   0 /* unused */ },\n+  { TT_TEST,     zInteractv_Add2Test1,   0 /* unused */ }, };\n \n /*\n  *  Fix Command Arguments for Interactv_Add2\n@@ -1067,8 +1277,9 @@ const char* apzInteractv_Add2Patch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  29 - Interactv_Add3 fix\n+ *  Description of Interactv_Add3 fix\n  */\n+#define INTERACTV_ADD3_FIXIDX            34\n tSCC zInteractv_Add3Name[] =\n      \"Interactv_Add3\";\n /*\n@@ -1092,8 +1303,8 @@ tSCC zInteractv_Add3Test1[] =\n #define    INTERACTV_ADD3_TEST_CT  2\n #define    INTERACTV_ADD3_RE_CT    0\n tTestDesc aInteractv_Add3Tests[] = {\n-  { TT_TEST,   zInteractv_Add3Test0,     0 /* unused */ },\n-  { TT_TEST,   zInteractv_Add3Test1,     0 /* unused */ }, };\n+  { TT_TEST,     zInteractv_Add3Test0,   0 /* unused */ },\n+  { TT_TEST,     zInteractv_Add3Test1,   0 /* unused */ }, };\n \n /*\n  *  Fix Command Arguments for Interactv_Add3\n@@ -1105,8 +1316,9 @@ const char* apzInteractv_Add3Patch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  30 - Io_Def_Quotes fix\n+ *  Description of Io_Def_Quotes fix\n  */\n+#define IO_DEF_QUOTES_FIXIDX             35\n tSCC zIo_Def_QuotesName[] =\n      \"Io_Def_Quotes\";\n /*\n@@ -1127,7 +1339,7 @@ tSCC zIo_Def_QuotesSelect0[] =\n #define    IO_DEF_QUOTES_TEST_CT  1\n #define    IO_DEF_QUOTES_RE_CT    1\n tTestDesc aIo_Def_QuotesTests[] = {\n-  { TT_EGREP,  zIo_Def_QuotesSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zIo_Def_QuotesSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Io_Def_Quotes\n@@ -1141,8 +1353,9 @@ const char* apzIo_Def_QuotesPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  31 - Ioctl_Fix_Ctrl fix\n+ *  Description of Ioctl_Fix_Ctrl fix\n  */\n+#define IOCTL_FIX_CTRL_FIXIDX            36\n tSCC zIoctl_Fix_CtrlName[] =\n      \"Ioctl_Fix_Ctrl\";\n /*\n@@ -1163,7 +1376,7 @@ tSCC zIoctl_Fix_CtrlSelect0[] =\n #define    IOCTL_FIX_CTRL_TEST_CT  1\n #define    IOCTL_FIX_CTRL_RE_CT    1\n tTestDesc aIoctl_Fix_CtrlTests[] = {\n-  { TT_EGREP,  zIoctl_Fix_CtrlSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zIoctl_Fix_CtrlSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Ioctl_Fix_Ctrl\n@@ -1179,8 +1392,9 @@ const char* apzIoctl_Fix_CtrlPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  32 - Ip_Missing_Semi fix\n+ *  Description of Ip_Missing_Semi fix\n  */\n+#define IP_MISSING_SEMI_FIXIDX           37\n tSCC zIp_Missing_SemiName[] =\n      \"Ip_Missing_Semi\";\n /*\n@@ -1205,8 +1419,9 @@ const char* apzIp_Missing_SemiPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  33 - Irix_Multiline_Cmnt fix\n+ *  Description of Irix_Multiline_Cmnt fix\n  */\n+#define IRIX_MULTILINE_CMNT_FIXIDX       38\n tSCC zIrix_Multiline_CmntName[] =\n      \"Irix_Multiline_Cmnt\";\n /*\n@@ -1232,8 +1447,9 @@ const char* apzIrix_Multiline_CmntPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  34 - Irix_Sockaddr fix\n+ *  Description of Irix_Sockaddr fix\n  */\n+#define IRIX_SOCKADDR_FIXIDX             39\n tSCC zIrix_SockaddrName[] =\n      \"Irix_Sockaddr\";\n /*\n@@ -1255,7 +1471,7 @@ tSCC zIrix_SockaddrSelect0[] =\n #define    IRIX_SOCKADDR_TEST_CT  1\n #define    IRIX_SOCKADDR_RE_CT    1\n tTestDesc aIrix_SockaddrTests[] = {\n-  { TT_EGREP,  zIrix_SockaddrSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zIrix_SockaddrSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Irix_Sockaddr\n@@ -1267,8 +1483,9 @@ struct sockaddr;\\n\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  35 - Irix_Struct__File fix\n+ *  Description of Irix_Struct__File fix\n  */\n+#define IRIX_STRUCT__FILE_FIXIDX         40\n tSCC zIrix_Struct__FileName[] =\n      \"Irix_Struct__File\";\n /*\n@@ -1294,8 +1511,9 @@ struct __file_s;\\n\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  36 - Irix_Asm_Apostrophe fix\n+ *  Description of Irix_Asm_Apostrophe fix\n  */\n+#define IRIX_ASM_APOSTROPHE_FIXIDX       41\n tSCC zIrix_Asm_ApostropheName[] =\n      \"Irix_Asm_Apostrophe\";\n /*\n@@ -1317,7 +1535,7 @@ tSCC zIrix_Asm_ApostropheSelect0[] =\n #define    IRIX_ASM_APOSTROPHE_TEST_CT  1\n #define    IRIX_ASM_APOSTROPHE_RE_CT    1\n tTestDesc aIrix_Asm_ApostropheTests[] = {\n-  { TT_EGREP,  zIrix_Asm_ApostropheSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zIrix_Asm_ApostropheSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Irix_Asm_Apostrophe\n@@ -1328,8 +1546,9 @@ const char* apzIrix_Asm_ApostrophePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  37 - Isc_Fmod fix\n+ *  Description of Isc_Fmod fix\n  */\n+#define ISC_FMOD_FIXIDX                  42\n tSCC zIsc_FmodName[] =\n      \"Isc_Fmod\";\n /*\n@@ -1351,7 +1570,7 @@ tSCC zIsc_FmodSelect0[] =\n #define    ISC_FMOD_TEST_CT  1\n #define    ISC_FMOD_RE_CT    1\n tTestDesc aIsc_FmodTests[] = {\n-  { TT_EGREP,  zIsc_FmodSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zIsc_FmodSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Isc_Fmod\n@@ -1362,8 +1581,9 @@ const char* apzIsc_FmodPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  38 - Motorola_Nested fix\n+ *  Description of Motorola_Nested fix\n  */\n+#define MOTOROLA_NESTED_FIXIDX           43\n tSCC zMotorola_NestedName[] =\n      \"Motorola_Nested\";\n /*\n@@ -1391,8 +1611,9 @@ const char* apzMotorola_NestedPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  39 - Isc_Sys_Limits fix\n+ *  Description of Isc_Sys_Limits fix\n  */\n+#define ISC_SYS_LIMITS_FIXIDX            44\n tSCC zIsc_Sys_LimitsName[] =\n      \"Isc_Sys_Limits\";\n /*\n@@ -1414,7 +1635,7 @@ tSCC zIsc_Sys_LimitsSelect0[] =\n #define    ISC_SYS_LIMITS_TEST_CT  1\n #define    ISC_SYS_LIMITS_RE_CT    1\n tTestDesc aIsc_Sys_LimitsTests[] = {\n-  { TT_EGREP,  zIsc_Sys_LimitsSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zIsc_Sys_LimitsSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Isc_Sys_Limits\n@@ -1426,8 +1647,9 @@ const char* apzIsc_Sys_LimitsPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  40 - Kandr_Concat fix\n+ *  Description of Kandr_Concat fix\n  */\n+#define KANDR_CONCAT_FIXIDX              45\n tSCC zKandr_ConcatName[] =\n      \"Kandr_Concat\";\n /*\n@@ -1449,7 +1671,7 @@ tSCC zKandr_ConcatSelect0[] =\n #define    KANDR_CONCAT_TEST_CT  1\n #define    KANDR_CONCAT_RE_CT    1\n tTestDesc aKandr_ConcatTests[] = {\n-  { TT_EGREP,  zKandr_ConcatSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zKandr_ConcatSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Kandr_Concat\n@@ -1460,8 +1682,9 @@ const char* apzKandr_ConcatPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  41 - Limits_Ifndefs fix\n+ *  Description of Limits_Ifndefs fix\n  */\n+#define LIMITS_IFNDEFS_FIXIDX            46\n tSCC zLimits_IfndefsName[] =\n      \"Limits_Ifndefs\";\n /*\n@@ -1483,7 +1706,7 @@ tSCC zLimits_IfndefsBypass0[] =\n #define    LIMITS_IFNDEFS_TEST_CT  1\n #define    LIMITS_IFNDEFS_RE_CT    1\n tTestDesc aLimits_IfndefsTests[] = {\n-  { TT_NEGREP, zLimits_IfndefsBypass0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zLimits_IfndefsBypass0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Limits_Ifndefs\n@@ -1518,8 +1741,9 @@ const char* apzLimits_IfndefsPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  42 - Lynx_Void_Int fix\n+ *  Description of Lynx_Void_Int fix\n  */\n+#define LYNX_VOID_INT_FIXIDX             47\n tSCC zLynx_Void_IntName[] =\n      \"Lynx_Void_Int\";\n /*\n@@ -1541,7 +1765,7 @@ tSCC zLynx_Void_IntSelect0[] =\n #define    LYNX_VOID_INT_TEST_CT  1\n #define    LYNX_VOID_INT_RE_CT    1\n tTestDesc aLynx_Void_IntTests[] = {\n-  { TT_EGREP,  zLynx_Void_IntSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zLynx_Void_IntSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Lynx_Void_Int\n@@ -1552,8 +1776,9 @@ const char* apzLynx_Void_IntPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  43 - Lynxos_Fcntl_Proto fix\n+ *  Description of Lynxos_Fcntl_Proto fix\n  */\n+#define LYNXOS_FCNTL_PROTO_FIXIDX        48\n tSCC zLynxos_Fcntl_ProtoName[] =\n      \"Lynxos_Fcntl_Proto\";\n /*\n@@ -1575,7 +1800,7 @@ tSCC zLynxos_Fcntl_ProtoSelect0[] =\n #define    LYNXOS_FCNTL_PROTO_TEST_CT  1\n #define    LYNXOS_FCNTL_PROTO_RE_CT    1\n tTestDesc aLynxos_Fcntl_ProtoTests[] = {\n-  { TT_EGREP,  zLynxos_Fcntl_ProtoSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zLynxos_Fcntl_ProtoSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Lynxos_Fcntl_Proto\n@@ -1586,8 +1811,9 @@ const char* apzLynxos_Fcntl_ProtoPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  44 - M88k_Bad_Hypot_Opt fix\n+ *  Description of M88k_Bad_Hypot_Opt fix\n  */\n+#define M88K_BAD_HYPOT_OPT_FIXIDX        49\n tSCC zM88k_Bad_Hypot_OptName[] =\n      \"M88k_Bad_Hypot_Opt\";\n /*\n@@ -1627,8 +1853,9 @@ static __inline__ double fake_hypot (x, y)\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  45 - M88k_Bad_S_If fix\n+ *  Description of M88k_Bad_S_If fix\n  */\n+#define M88K_BAD_S_IF_FIXIDX             50\n tSCC zM88k_Bad_S_IfName[] =\n      \"M88k_Bad_S_If\";\n /*\n@@ -1652,7 +1879,7 @@ tSCC zM88k_Bad_S_IfSelect0[] =\n #define    M88K_BAD_S_IF_TEST_CT  1\n #define    M88K_BAD_S_IF_RE_CT    1\n tTestDesc aM88k_Bad_S_IfTests[] = {\n-  { TT_EGREP,  zM88k_Bad_S_IfSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zM88k_Bad_S_IfSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for M88k_Bad_S_If\n@@ -1664,8 +1891,9 @@ const char* apzM88k_Bad_S_IfPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  46 - M88k_Multi_Incl fix\n+ *  Description of M88k_Multi_Incl fix\n  */\n+#define M88K_MULTI_INCL_FIXIDX           51\n tSCC zM88k_Multi_InclName[] =\n      \"M88k_Multi_Incl\";\n /*\n@@ -1689,7 +1917,7 @@ tSCC zM88k_Multi_InclBypass0[] =\n #define    M88K_MULTI_INCL_TEST_CT  1\n #define    M88K_MULTI_INCL_RE_CT    1\n tTestDesc aM88k_Multi_InclTests[] = {\n-  { TT_NEGREP, zM88k_Multi_InclBypass0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zM88k_Multi_InclBypass0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for M88k_Multi_Incl\n@@ -1705,8 +1933,9 @@ const char* apzM88k_Multi_InclPatch[] = { \"sh\", \"-c\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  47 - Machine_Name fix\n+ *  Description of Machine_Name fix\n  */\n+#define MACHINE_NAME_FIXIDX              52\n tSCC zMachine_NameName[] =\n      \"Machine_Name\";\n /*\n@@ -1729,7 +1958,7 @@ tSCC zMachine_NameSelect0[] =\n #define    MACHINE_NAME_TEST_CT  1\n #define    MACHINE_NAME_RE_CT    1\n tTestDesc aMachine_NameTests[] = {\n-  { TT_EGREP,  zMachine_NameSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zMachine_NameSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Machine_Name\n@@ -1774,8 +2003,9 @@ s/\\\\\\\\+++fixinc_eol+++/\\\\\\\\/g\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  48 - Math_Exception fix\n+ *  Description of Math_Exception fix\n  */\n+#define MATH_EXCEPTION_FIXIDX            53\n tSCC zMath_ExceptionName[] =\n      \"Math_Exception\";\n /*\n@@ -1797,7 +2027,7 @@ tSCC zMath_ExceptionSelect0[] =\n #define    MATH_EXCEPTION_TEST_CT  1\n #define    MATH_EXCEPTION_RE_CT    1\n tTestDesc aMath_ExceptionTests[] = {\n-  { TT_EGREP,  zMath_ExceptionSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zMath_ExceptionSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Math_Exception\n@@ -1823,8 +2053,9 @@ const char* apzMath_ExceptionPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  49 - Math_Gcc_Ifndefs fix\n+ *  Description of Math_Gcc_Ifndefs fix\n  */\n+#define MATH_GCC_IFNDEFS_FIXIDX          54\n tSCC zMath_Gcc_IfndefsName[] =\n      \"Math_Gcc_Ifndefs\";\n /*\n@@ -1861,8 +2092,9 @@ const char* apzMath_Gcc_IfndefsPatch[] = { \"sh\", \"-c\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  50 - Nested_Comment fix\n+ *  Description of Nested_Comment fix\n  */\n+#define NESTED_COMMENT_FIXIDX            55\n tSCC zNested_CommentName[] =\n      \"Nested_Comment\";\n /*\n@@ -1887,8 +2119,9 @@ const char* apzNested_CommentPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  51 - News_Os_Recursion fix\n+ *  Description of News_Os_Recursion fix\n  */\n+#define NEWS_OS_RECURSION_FIXIDX         56\n tSCC zNews_Os_RecursionName[] =\n      \"News_Os_Recursion\";\n /*\n@@ -1910,7 +2143,7 @@ tSCC zNews_Os_RecursionSelect0[] =\n #define    NEWS_OS_RECURSION_TEST_CT  1\n #define    NEWS_OS_RECURSION_RE_CT    1\n tTestDesc aNews_Os_RecursionTests[] = {\n-  { TT_EGREP,  zNews_Os_RecursionSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zNews_Os_RecursionSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for News_Os_Recursion\n@@ -1924,8 +2157,9 @@ const char* apzNews_Os_RecursionPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  52 - Next_Math_Prefix fix\n+ *  Description of Next_Math_Prefix fix\n  */\n+#define NEXT_MATH_PREFIX_FIXIDX          57\n tSCC zNext_Math_PrefixName[] =\n      \"Next_Math_Prefix\";\n /*\n@@ -1947,7 +2181,7 @@ tSCC zNext_Math_PrefixSelect0[] =\n #define    NEXT_MATH_PREFIX_TEST_CT  1\n #define    NEXT_MATH_PREFIX_RE_CT    1\n tTestDesc aNext_Math_PrefixTests[] = {\n-  { TT_EGREP,  zNext_Math_PrefixSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zNext_Math_PrefixSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Next_Math_Prefix\n@@ -1962,8 +2196,9 @@ const char* apzNext_Math_PrefixPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  53 - Next_Template fix\n+ *  Description of Next_Template fix\n  */\n+#define NEXT_TEMPLATE_FIXIDX             58\n tSCC zNext_TemplateName[] =\n      \"Next_Template\";\n /*\n@@ -1985,7 +2220,7 @@ tSCC zNext_TemplateSelect0[] =\n #define    NEXT_TEMPLATE_TEST_CT  1\n #define    NEXT_TEMPLATE_RE_CT    1\n tTestDesc aNext_TemplateTests[] = {\n-  { TT_EGREP,  zNext_TemplateSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zNext_TemplateSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Next_Template\n@@ -1997,8 +2232,9 @@ const char* apzNext_TemplatePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  54 - Next_Volitile fix\n+ *  Description of Next_Volitile fix\n  */\n+#define NEXT_VOLITILE_FIXIDX             59\n tSCC zNext_VolitileName[] =\n      \"Next_Volitile\";\n /*\n@@ -2020,7 +2256,7 @@ tSCC zNext_VolitileSelect0[] =\n #define    NEXT_VOLITILE_TEST_CT  1\n #define    NEXT_VOLITILE_RE_CT    1\n tTestDesc aNext_VolitileTests[] = {\n-  { TT_EGREP,  zNext_VolitileSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zNext_VolitileSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Next_Volitile\n@@ -2032,8 +2268,9 @@ const char* apzNext_VolitilePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  55 - Next_Wait_Union fix\n+ *  Description of Next_Wait_Union fix\n  */\n+#define NEXT_WAIT_UNION_FIXIDX           60\n tSCC zNext_Wait_UnionName[] =\n      \"Next_Wait_Union\";\n /*\n@@ -2055,7 +2292,7 @@ tSCC zNext_Wait_UnionSelect0[] =\n #define    NEXT_WAIT_UNION_TEST_CT  1\n #define    NEXT_WAIT_UNION_RE_CT    1\n tTestDesc aNext_Wait_UnionTests[] = {\n-  { TT_EGREP,  zNext_Wait_UnionSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zNext_Wait_UnionSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Next_Wait_Union\n@@ -2066,8 +2303,9 @@ const char* apzNext_Wait_UnionPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  56 - Nodeent_Syntax fix\n+ *  Description of Nodeent_Syntax fix\n  */\n+#define NODEENT_SYNTAX_FIXIDX            61\n tSCC zNodeent_SyntaxName[] =\n      \"Nodeent_Syntax\";\n /*\n@@ -2092,8 +2330,9 @@ const char* apzNodeent_SyntaxPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  57 - Osf_Namespace_A fix\n+ *  Description of Osf_Namespace_A fix\n  */\n+#define OSF_NAMESPACE_A_FIXIDX           62\n tSCC zOsf_Namespace_AName[] =\n      \"Osf_Namespace_A\";\n /*\n@@ -2121,10 +2360,10 @@ tSCC zOsf_Namespace_ATest3[] =\n #define    OSF_NAMESPACE_A_TEST_CT  4\n #define    OSF_NAMESPACE_A_RE_CT    0\n tTestDesc aOsf_Namespace_ATests[] = {\n-  { TT_TEST,   zOsf_Namespace_ATest0,     0 /* unused */ },\n-  { TT_TEST,   zOsf_Namespace_ATest1,     0 /* unused */ },\n-  { TT_TEST,   zOsf_Namespace_ATest2,     0 /* unused */ },\n-  { TT_TEST,   zOsf_Namespace_ATest3,     0 /* unused */ }, };\n+  { TT_TEST,     zOsf_Namespace_ATest0,   0 /* unused */ },\n+  { TT_TEST,     zOsf_Namespace_ATest1,   0 /* unused */ },\n+  { TT_TEST,     zOsf_Namespace_ATest2,   0 /* unused */ },\n+  { TT_TEST,     zOsf_Namespace_ATest3,   0 /* unused */ }, };\n \n /*\n  *  Fix Command Arguments for Osf_Namespace_A\n@@ -2137,8 +2376,9 @@ const char* apzOsf_Namespace_APatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  58 - Osf_Namespace_B fix\n+ *  Description of Osf_Namespace_B fix\n  */\n+#define OSF_NAMESPACE_B_FIXIDX           63\n tSCC zOsf_Namespace_BName[] =\n      \"Osf_Namespace_B\";\n /*\n@@ -2166,10 +2406,10 @@ tSCC zOsf_Namespace_BTest3[] =\n #define    OSF_NAMESPACE_B_TEST_CT  4\n #define    OSF_NAMESPACE_B_RE_CT    0\n tTestDesc aOsf_Namespace_BTests[] = {\n-  { TT_TEST,   zOsf_Namespace_BTest0,     0 /* unused */ },\n-  { TT_TEST,   zOsf_Namespace_BTest1,     0 /* unused */ },\n-  { TT_TEST,   zOsf_Namespace_BTest2,     0 /* unused */ },\n-  { TT_TEST,   zOsf_Namespace_BTest3,     0 /* unused */ }, };\n+  { TT_TEST,     zOsf_Namespace_BTest0,   0 /* unused */ },\n+  { TT_TEST,     zOsf_Namespace_BTest1,   0 /* unused */ },\n+  { TT_TEST,     zOsf_Namespace_BTest2,   0 /* unused */ },\n+  { TT_TEST,     zOsf_Namespace_BTest3,   0 /* unused */ }, };\n \n /*\n  *  Fix Command Arguments for Osf_Namespace_B\n@@ -2183,8 +2423,9 @@ typedef __regmatch_t\\tregmatch_t;\\n\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  59 - Pthread_Page_Size fix\n+ *  Description of Pthread_Page_Size fix\n  */\n+#define PTHREAD_PAGE_SIZE_FIXIDX         64\n tSCC zPthread_Page_SizeName[] =\n      \"Pthread_Page_Size\";\n /*\n@@ -2206,7 +2447,7 @@ tSCC zPthread_Page_SizeSelect0[] =\n #define    PTHREAD_PAGE_SIZE_TEST_CT  1\n #define    PTHREAD_PAGE_SIZE_RE_CT    1\n tTestDesc aPthread_Page_SizeTests[] = {\n-  { TT_EGREP,  zPthread_Page_SizeSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zPthread_Page_SizeSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Pthread_Page_Size\n@@ -2217,8 +2458,9 @@ const char* apzPthread_Page_SizePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  60 - Read_Ret_Type fix\n+ *  Description of Read_Ret_Type fix\n  */\n+#define READ_RET_TYPE_FIXIDX             65\n tSCC zRead_Ret_TypeName[] =\n      \"Read_Ret_Type\";\n /*\n@@ -2240,7 +2482,7 @@ tSCC zRead_Ret_TypeSelect0[] =\n #define    READ_RET_TYPE_TEST_CT  1\n #define    READ_RET_TYPE_RE_CT    1\n tTestDesc aRead_Ret_TypeTests[] = {\n-  { TT_EGREP,  zRead_Ret_TypeSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zRead_Ret_TypeSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Read_Ret_Type\n@@ -2252,8 +2494,9 @@ const char* apzRead_Ret_TypePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  61 - Rs6000_Double fix\n+ *  Description of Rs6000_Double fix\n  */\n+#define RS6000_DOUBLE_FIXIDX             66\n tSCC zRs6000_DoubleName[] =\n      \"Rs6000_Double\";\n /*\n@@ -2275,7 +2518,7 @@ tSCC zRs6000_DoubleSelect0[] =\n #define    RS6000_DOUBLE_TEST_CT  1\n #define    RS6000_DOUBLE_RE_CT    1\n tTestDesc aRs6000_DoubleTests[] = {\n-  { TT_EGREP,  zRs6000_DoubleSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zRs6000_DoubleSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Rs6000_Double\n@@ -2289,8 +2532,9 @@ const char* apzRs6000_DoublePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  62 - Rs6000_Fchmod fix\n+ *  Description of Rs6000_Fchmod fix\n  */\n+#define RS6000_FCHMOD_FIXIDX             67\n tSCC zRs6000_FchmodName[] =\n      \"Rs6000_Fchmod\";\n /*\n@@ -2312,7 +2556,7 @@ tSCC zRs6000_FchmodSelect0[] =\n #define    RS6000_FCHMOD_TEST_CT  1\n #define    RS6000_FCHMOD_RE_CT    1\n tTestDesc aRs6000_FchmodTests[] = {\n-  { TT_EGREP,  zRs6000_FchmodSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zRs6000_FchmodSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Rs6000_Fchmod\n@@ -2323,8 +2567,9 @@ const char* apzRs6000_FchmodPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  63 - Rs6000_Param fix\n+ *  Description of Rs6000_Param fix\n  */\n+#define RS6000_PARAM_FIXIDX              68\n tSCC zRs6000_ParamName[] =\n      \"Rs6000_Param\";\n /*\n@@ -2349,8 +2594,9 @@ const char* apzRs6000_ParamPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  64 - Sony_Include fix\n+ *  Description of Sony_Include fix\n  */\n+#define SONY_INCLUDE_FIXIDX              69\n tSCC zSony_IncludeName[] =\n      \"Sony_Include\";\n /*\n@@ -2372,7 +2618,7 @@ tSCC zSony_IncludeSelect0[] =\n #define    SONY_INCLUDE_TEST_CT  1\n #define    SONY_INCLUDE_RE_CT    1\n tTestDesc aSony_IncludeTests[] = {\n-  { TT_EGREP,  zSony_IncludeSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSony_IncludeSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sony_Include\n@@ -2383,8 +2629,9 @@ const char* apzSony_IncludePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  65 - Statsswtch fix\n+ *  Description of Statsswtch fix\n  */\n+#define STATSSWTCH_FIXIDX                70\n tSCC zStatsswtchName[] =\n      \"Statsswtch\";\n /*\n@@ -2406,7 +2653,7 @@ tSCC zStatsswtchSelect0[] =\n #define    STATSSWTCH_TEST_CT  1\n #define    STATSSWTCH_RE_CT    1\n tTestDesc aStatsswtchTests[] = {\n-  { TT_EGREP,  zStatsswtchSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zStatsswtchSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Statsswtch\n@@ -2417,8 +2664,9 @@ const char* apzStatsswtchPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  66 - Stdio_Va_List fix\n+ *  Description of Stdio_Va_List fix\n  */\n+#define STDIO_VA_LIST_FIXIDX             71\n tSCC zStdio_Va_ListName[] =\n      \"Stdio_Va_List\";\n /*\n@@ -2447,7 +2695,7 @@ const char* apzStdio_Va_ListPatch[] = { \"sh\", \"-c\",\n \\n\\\n   sed -e 's@ va_list @ __gnuc_va_list @' \\\\\\n\\\n       -e 's@ va_list)@ __gnuc_va_list)@' \\\\\\n\\\n-      -e 's@ _BSD_VA_LIST_))@ __gnuc_va_list))@' \\\\\\n\\\n+      -e 's@ _BSD_VA_LIST_));@ __gnuc_va_list));@' \\\\\\n\\\n       -e 's@ _VA_LIST_));@ __gnuc_va_list));@' \\\\\\n\\\n       -e 's@ va_list@ __va_list__@' \\\\\\n\\\n       -e 's@\\\\*va_list@*__va_list__@' \\\\\\n\\\n@@ -2460,8 +2708,9 @@ const char* apzStdio_Va_ListPatch[] = { \"sh\", \"-c\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  67 - Sun_Bogus_Ifdef fix\n+ *  Description of Sun_Bogus_Ifdef fix\n  */\n+#define SUN_BOGUS_IFDEF_FIXIDX           72\n tSCC zSun_Bogus_IfdefName[] =\n      \"Sun_Bogus_Ifdef\";\n /*\n@@ -2483,7 +2732,7 @@ tSCC zSun_Bogus_IfdefSelect0[] =\n #define    SUN_BOGUS_IFDEF_TEST_CT  1\n #define    SUN_BOGUS_IFDEF_RE_CT    1\n tTestDesc aSun_Bogus_IfdefTests[] = {\n-  { TT_EGREP,  zSun_Bogus_IfdefSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSun_Bogus_IfdefSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sun_Bogus_Ifdef\n@@ -2494,8 +2743,9 @@ const char* apzSun_Bogus_IfdefPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  68 - Sun_Bogus_Ifdef_Sun4c fix\n+ *  Description of Sun_Bogus_Ifdef_Sun4c fix\n  */\n+#define SUN_BOGUS_IFDEF_SUN4C_FIXIDX     73\n tSCC zSun_Bogus_Ifdef_Sun4cName[] =\n      \"Sun_Bogus_Ifdef_Sun4c\";\n /*\n@@ -2517,7 +2767,7 @@ tSCC zSun_Bogus_Ifdef_Sun4cSelect0[] =\n #define    SUN_BOGUS_IFDEF_SUN4C_TEST_CT  1\n #define    SUN_BOGUS_IFDEF_SUN4C_RE_CT    1\n tTestDesc aSun_Bogus_Ifdef_Sun4cTests[] = {\n-  { TT_EGREP,  zSun_Bogus_Ifdef_Sun4cSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSun_Bogus_Ifdef_Sun4cSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sun_Bogus_Ifdef_Sun4c\n@@ -2528,8 +2778,9 @@ const char* apzSun_Bogus_Ifdef_Sun4cPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  69 - Sun_Catmacro fix\n+ *  Description of Sun_Catmacro fix\n  */\n+#define SUN_CATMACRO_FIXIDX              74\n tSCC zSun_CatmacroName[] =\n      \"Sun_Catmacro\";\n /*\n@@ -2551,7 +2802,7 @@ tSCC zSun_CatmacroSelect0[] =\n #define    SUN_CATMACRO_TEST_CT  1\n #define    SUN_CATMACRO_RE_CT    1\n tTestDesc aSun_CatmacroTests[] = {\n-  { TT_EGREP,  zSun_CatmacroSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSun_CatmacroSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sun_Catmacro\n@@ -2567,8 +2818,9 @@ const char* apzSun_CatmacroPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  70 - Sun_Malloc fix\n+ *  Description of Sun_Malloc fix\n  */\n+#define SUN_MALLOC_FIXIDX                75\n tSCC zSun_MallocName[] =\n      \"Sun_Malloc\";\n /*\n@@ -2596,8 +2848,9 @@ const char* apzSun_MallocPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  71 - Sun_Memcpy fix\n+ *  Description of Sun_Memcpy fix\n  */\n+#define SUN_MEMCPY_FIXIDX                76\n tSCC zSun_MemcpyName[] =\n      \"Sun_Memcpy\";\n /*\n@@ -2619,7 +2872,7 @@ tSCC zSun_MemcpySelect0[] =\n #define    SUN_MEMCPY_TEST_CT  1\n #define    SUN_MEMCPY_RE_CT    1\n tTestDesc aSun_MemcpyTests[] = {\n-  { TT_EGREP,  zSun_MemcpySelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSun_MemcpySelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sun_Memcpy\n@@ -2650,8 +2903,9 @@ extern int memcmp();\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  72 - Sun_Rusers_Semi fix\n+ *  Description of Sun_Rusers_Semi fix\n  */\n+#define SUN_RUSERS_SEMI_FIXIDX           77\n tSCC zSun_Rusers_SemiName[] =\n      \"Sun_Rusers_Semi\";\n /*\n@@ -2673,7 +2927,7 @@ tSCC zSun_Rusers_SemiSelect0[] =\n #define    SUN_RUSERS_SEMI_TEST_CT  1\n #define    SUN_RUSERS_SEMI_RE_CT    1\n tTestDesc aSun_Rusers_SemiTests[] = {\n-  { TT_EGREP,  zSun_Rusers_SemiSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSun_Rusers_SemiSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sun_Rusers_Semi\n@@ -2684,8 +2938,9 @@ const char* apzSun_Rusers_SemiPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  73 - Sun_Signal fix\n+ *  Description of Sun_Signal fix\n  */\n+#define SUN_SIGNAL_FIXIDX                78\n tSCC zSun_SignalName[] =\n      \"Sun_Signal\";\n /*\n@@ -2707,7 +2962,7 @@ tSCC zSun_SignalSelect0[] =\n #define    SUN_SIGNAL_TEST_CT  1\n #define    SUN_SIGNAL_RE_CT    1\n tTestDesc aSun_SignalTests[] = {\n-  { TT_EGREP,  zSun_SignalSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSun_SignalSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sun_Signal\n@@ -2723,8 +2978,9 @@ void\\t(*signal(...))(...);\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  74 - Sun_Auth_Proto fix\n+ *  Description of Sun_Auth_Proto fix\n  */\n+#define SUN_AUTH_PROTO_FIXIDX            79\n tSCC zSun_Auth_ProtoName[] =\n      \"Sun_Auth_Proto\";\n /*\n@@ -2746,7 +3002,7 @@ tSCC zSun_Auth_ProtoSelect0[] =\n #define    SUN_AUTH_PROTO_TEST_CT  1\n #define    SUN_AUTH_PROTO_RE_CT    1\n tTestDesc aSun_Auth_ProtoTests[] = {\n-  { TT_EGREP,  zSun_Auth_ProtoSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSun_Auth_ProtoSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Sun_Auth_Proto\n@@ -2762,8 +3018,9 @@ const char* apzSun_Auth_ProtoPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  75 - Sunos_Matherr_Decl fix\n+ *  Description of Sunos_Matherr_Decl fix\n  */\n+#define SUNOS_MATHERR_DECL_FIXIDX        80\n tSCC zSunos_Matherr_DeclName[] =\n      \"Sunos_Matherr_Decl\";\n /*\n@@ -2790,8 +3047,9 @@ struct exception;\\n\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  76 - Sunos_Strlen fix\n+ *  Description of Sunos_Strlen fix\n  */\n+#define SUNOS_STRLEN_FIXIDX              81\n tSCC zSunos_StrlenName[] =\n      \"Sunos_Strlen\";\n /*\n@@ -2816,8 +3074,9 @@ const char* apzSunos_StrlenPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  77 - Systypes fix\n+ *  Description of Systypes fix\n  */\n+#define SYSTYPES_FIXIDX                  82\n tSCC zSystypesName[] =\n      \"Systypes\";\n /*\n@@ -2839,7 +3098,7 @@ tSCC zSystypesSelect0[] =\n #define    SYSTYPES_TEST_CT  1\n #define    SYSTYPES_RE_CT    1\n tTestDesc aSystypesTests[] = {\n-  { TT_EGREP,  zSystypesSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zSystypesSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Systypes\n@@ -2874,8 +3133,9 @@ typedef __SIZE_TYPE__ size_t;\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  78 - Systypes_For_Aix fix\n+ *  Description of Systypes_For_Aix fix\n  */\n+#define SYSTYPES_FOR_AIX_FIXIDX          83\n tSCC zSystypes_For_AixName[] =\n      \"Systypes_For_Aix\";\n /*\n@@ -2903,8 +3163,8 @@ tSCC zSystypes_For_AixBypass0[] =\n #define    SYSTYPES_FOR_AIX_TEST_CT  2\n #define    SYSTYPES_FOR_AIX_RE_CT    2\n tTestDesc aSystypes_For_AixTests[] = {\n-  { TT_NEGREP, zSystypes_For_AixBypass0,   (regex_t*)NULL },\n-  { TT_EGREP,  zSystypes_For_AixSelect0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zSystypes_For_AixBypass0, (regex_t*)NULL },\n+  { TT_EGREP,    zSystypes_For_AixSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Systypes_For_Aix\n@@ -2919,8 +3179,9 @@ const char* apzSystypes_For_AixPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  79 - Sysv68_String fix\n+ *  Description of Sysv68_String fix\n  */\n+#define SYSV68_STRING_FIXIDX             84\n tSCC zSysv68_StringName[] =\n      \"Sysv68_String\";\n /*\n@@ -2955,8 +3216,9 @@ extern unsigned int\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  80 - Sysz_Stdlib_For_Sun fix\n+ *  Description of Sysz_Stdlib_For_Sun fix\n  */\n+#define SYSZ_STDLIB_FOR_SUN_FIXIDX       85\n tSCC zSysz_Stdlib_For_SunName[] =\n      \"Sysz_Stdlib_For_Sun\";\n /*\n@@ -2992,8 +3254,9 @@ const char* apzSysz_Stdlib_For_SunPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  81 - Sysz_Stdtypes_For_Sun fix\n+ *  Description of Sysz_Stdtypes_For_Sun fix\n  */\n+#define SYSZ_STDTYPES_FOR_SUN_FIXIDX     86\n tSCC zSysz_Stdtypes_For_SunName[] =\n      \"Sysz_Stdtypes_For_Sun\";\n /*\n@@ -3032,8 +3295,9 @@ const char* apzSysz_Stdtypes_For_SunPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  82 - Tinfo_Cplusplus fix\n+ *  Description of Tinfo_Cplusplus fix\n  */\n+#define TINFO_CPLUSPLUS_FIXIDX           87\n tSCC zTinfo_CplusplusName[] =\n      \"Tinfo_Cplusplus\";\n /*\n@@ -3058,8 +3322,9 @@ const char* apzTinfo_CplusplusPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  83 - Ultrix_Ansi_Compat fix\n+ *  Description of Ultrix_Ansi_Compat fix\n  */\n+#define ULTRIX_ANSI_COMPAT_FIXIDX        88\n tSCC zUltrix_Ansi_CompatName[] =\n      \"Ultrix_Ansi_Compat\";\n /*\n@@ -3081,7 +3346,7 @@ tSCC zUltrix_Ansi_CompatSelect0[] =\n #define    ULTRIX_ANSI_COMPAT_TEST_CT  1\n #define    ULTRIX_ANSI_COMPAT_RE_CT    1\n tTestDesc aUltrix_Ansi_CompatTests[] = {\n-  { TT_EGREP,  zUltrix_Ansi_CompatSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zUltrix_Ansi_CompatSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Ultrix_Ansi_Compat\n@@ -3094,8 +3359,9 @@ const char* apzUltrix_Ansi_CompatPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  84 - Ultrix_Fix_Fixproto fix\n+ *  Description of Ultrix_Fix_Fixproto fix\n  */\n+#define ULTRIX_FIX_FIXPROTO_FIXIDX       89\n tSCC zUltrix_Fix_FixprotoName[] =\n      \"Ultrix_Fix_Fixproto\";\n /*\n@@ -3117,7 +3383,7 @@ tSCC zUltrix_Fix_FixprotoSelect0[] =\n #define    ULTRIX_FIX_FIXPROTO_TEST_CT  1\n #define    ULTRIX_FIX_FIXPROTO_RE_CT    1\n tTestDesc aUltrix_Fix_FixprotoTests[] = {\n-  { TT_EGREP,  zUltrix_Fix_FixprotoSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zUltrix_Fix_FixprotoSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Ultrix_Fix_Fixproto\n@@ -3129,8 +3395,9 @@ struct utsname;\\n\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  85 - Ultrix_Atof_Param fix\n+ *  Description of Ultrix_Atof_Param fix\n  */\n+#define ULTRIX_ATOF_PARAM_FIXIDX         90\n tSCC zUltrix_Atof_ParamName[] =\n      \"Ultrix_Atof_Param\";\n /*\n@@ -3159,8 +3426,9 @@ const char* apzUltrix_Atof_ParamPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  86 - Ultrix_Const fix\n+ *  Description of Ultrix_Const fix\n  */\n+#define ULTRIX_CONST_FIXIDX              91\n tSCC zUltrix_ConstName[] =\n      \"Ultrix_Const\";\n /*\n@@ -3193,8 +3461,9 @@ const char* apzUltrix_ConstPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  87 - Ultrix_Ifdef fix\n+ *  Description of Ultrix_Ifdef fix\n  */\n+#define ULTRIX_IFDEF_FIXIDX              92\n tSCC zUltrix_IfdefName[] =\n      \"Ultrix_Ifdef\";\n /*\n@@ -3216,7 +3485,7 @@ tSCC zUltrix_IfdefSelect0[] =\n #define    ULTRIX_IFDEF_TEST_CT  1\n #define    ULTRIX_IFDEF_RE_CT    1\n tTestDesc aUltrix_IfdefTests[] = {\n-  { TT_EGREP,  zUltrix_IfdefSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zUltrix_IfdefSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Ultrix_Ifdef\n@@ -3227,8 +3496,9 @@ const char* apzUltrix_IfdefPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  88 - Ultrix_Nested_Cmnt fix\n+ *  Description of Ultrix_Nested_Cmnt fix\n  */\n+#define ULTRIX_NESTED_CMNT_FIXIDX        93\n tSCC zUltrix_Nested_CmntName[] =\n      \"Ultrix_Nested_Cmnt\";\n /*\n@@ -3253,8 +3523,9 @@ const char* apzUltrix_Nested_CmntPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  89 - Ultrix_Static fix\n+ *  Description of Ultrix_Static fix\n  */\n+#define ULTRIX_STATIC_FIXIDX             94\n tSCC zUltrix_StaticName[] =\n      \"Ultrix_Static\";\n /*\n@@ -3276,7 +3547,7 @@ tSCC zUltrix_StaticSelect0[] =\n #define    ULTRIX_STATIC_TEST_CT  1\n #define    ULTRIX_STATIC_RE_CT    1\n tTestDesc aUltrix_StaticTests[] = {\n-  { TT_EGREP,  zUltrix_StaticSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zUltrix_StaticSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Ultrix_Static\n@@ -3289,8 +3560,9 @@ const char* apzUltrix_StaticPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  90 - Undefine_Null fix\n+ *  Description of Undefine_Null fix\n  */\n+#define UNDEFINE_NULL_FIXIDX             95\n tSCC zUndefine_NullName[] =\n      \"Undefine_Null\";\n /*\n@@ -3317,8 +3589,8 @@ tSCC zUndefine_NullBypass0[] =\n #define    UNDEFINE_NULL_TEST_CT  2\n #define    UNDEFINE_NULL_RE_CT    2\n tTestDesc aUndefine_NullTests[] = {\n-  { TT_NEGREP, zUndefine_NullBypass0,   (regex_t*)NULL },\n-  { TT_EGREP,  zUndefine_NullSelect0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zUndefine_NullBypass0, (regex_t*)NULL },\n+  { TT_EGREP,    zUndefine_NullSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Undefine_Null\n@@ -3330,8 +3602,9 @@ const char* apzUndefine_NullPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  91 - Va_I960_Macro fix\n+ *  Description of Va_I960_Macro fix\n  */\n+#define VA_I960_MACRO_FIXIDX             96\n tSCC zVa_I960_MacroName[] =\n      \"Va_I960_Macro\";\n /*\n@@ -3353,7 +3626,7 @@ tSCC zVa_I960_MacroSelect0[] =\n #define    VA_I960_MACRO_TEST_CT  1\n #define    VA_I960_MACRO_RE_CT    1\n tTestDesc aVa_I960_MacroTests[] = {\n-  { TT_EGREP,  zVa_I960_MacroSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zVa_I960_MacroSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Va_I960_Macro\n@@ -3367,8 +3640,9 @@ const char* apzVa_I960_MacroPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  92 - Void_Null fix\n+ *  Description of Void_Null fix\n  */\n+#define VOID_NULL_FIXIDX                 97\n tSCC zVoid_NullName[] =\n      \"Void_Null\";\n /*\n@@ -3390,7 +3664,7 @@ tSCC zVoid_NullSelect0[] =\n #define    VOID_NULL_TEST_CT  1\n #define    VOID_NULL_RE_CT    1\n tTestDesc aVoid_NullTests[] = {\n-  { TT_EGREP,  zVoid_NullSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zVoid_NullSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Void_Null\n@@ -3401,8 +3675,9 @@ const char* apzVoid_NullPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  93 - Vxworks_Gcc_Problem fix\n+ *  Description of Vxworks_Gcc_Problem fix\n  */\n+#define VXWORKS_GCC_PROBLEM_FIXIDX       98\n tSCC zVxworks_Gcc_ProblemName[] =\n      \"Vxworks_Gcc_Problem\";\n /*\n@@ -3424,7 +3699,7 @@ tSCC zVxworks_Gcc_ProblemSelect0[] =\n #define    VXWORKS_GCC_PROBLEM_TEST_CT  1\n #define    VXWORKS_GCC_PROBLEM_RE_CT    1\n tTestDesc aVxworks_Gcc_ProblemTests[] = {\n-  { TT_EGREP,  zVxworks_Gcc_ProblemSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zVxworks_Gcc_ProblemSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Vxworks_Gcc_Problem\n@@ -3450,8 +3725,9 @@ const char* apzVxworks_Gcc_ProblemPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  94 - Vxworks_Needs_Vxtypes fix\n+ *  Description of Vxworks_Needs_Vxtypes fix\n  */\n+#define VXWORKS_NEEDS_VXTYPES_FIXIDX     99\n tSCC zVxworks_Needs_VxtypesName[] =\n      \"Vxworks_Needs_Vxtypes\";\n /*\n@@ -3473,7 +3749,7 @@ tSCC zVxworks_Needs_VxtypesSelect0[] =\n #define    VXWORKS_NEEDS_VXTYPES_TEST_CT  1\n #define    VXWORKS_NEEDS_VXTYPES_RE_CT    1\n tTestDesc aVxworks_Needs_VxtypesTests[] = {\n-  { TT_EGREP,  zVxworks_Needs_VxtypesSelect0,   (regex_t*)NULL }, };\n+  { TT_EGREP,    zVxworks_Needs_VxtypesSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Vxworks_Needs_Vxtypes\n@@ -3484,8 +3760,9 @@ const char* apzVxworks_Needs_VxtypesPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  95 - Vxworks_Needs_Vxworks fix\n+ *  Description of Vxworks_Needs_Vxworks fix\n  */\n+#define VXWORKS_NEEDS_VXWORKS_FIXIDX     100\n tSCC zVxworks_Needs_VxworksName[] =\n      \"Vxworks_Needs_Vxworks\";\n /*\n@@ -3517,10 +3794,10 @@ tSCC zVxworks_Needs_VxworksTest2[] =\n #define    VXWORKS_NEEDS_VXWORKS_TEST_CT  4\n #define    VXWORKS_NEEDS_VXWORKS_RE_CT    1\n tTestDesc aVxworks_Needs_VxworksTests[] = {\n-  { TT_TEST,   zVxworks_Needs_VxworksTest0,     0 /* unused */ },\n-  { TT_TEST,   zVxworks_Needs_VxworksTest1,     0 /* unused */ },\n-  { TT_TEST,   zVxworks_Needs_VxworksTest2,     0 /* unused */ },\n-  { TT_EGREP,  zVxworks_Needs_VxworksSelect0,   (regex_t*)NULL }, };\n+  { TT_TEST,     zVxworks_Needs_VxworksTest0,   0 /* unused */ },\n+  { TT_TEST,     zVxworks_Needs_VxworksTest1,   0 /* unused */ },\n+  { TT_TEST,     zVxworks_Needs_VxworksTest2,   0 /* unused */ },\n+  { TT_EGREP,    zVxworks_Needs_VxworksSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Vxworks_Needs_Vxworks\n@@ -3532,8 +3809,9 @@ const char* apzVxworks_Needs_VxworksPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  96 - Vxworks_Time fix\n+ *  Description of Vxworks_Time fix\n  */\n+#define VXWORKS_TIME_FIXIDX              101\n tSCC zVxworks_TimeName[] =\n      \"Vxworks_Time\";\n /*\n@@ -3561,8 +3839,8 @@ tSCC zVxworks_TimeTest0[] =\n #define    VXWORKS_TIME_TEST_CT  2\n #define    VXWORKS_TIME_RE_CT    1\n tTestDesc aVxworks_TimeTests[] = {\n-  { TT_TEST,   zVxworks_TimeTest0,     0 /* unused */ },\n-  { TT_EGREP,  zVxworks_TimeSelect0,   (regex_t*)NULL }, };\n+  { TT_TEST,     zVxworks_TimeTest0,   0 /* unused */ },\n+  { TT_EGREP,    zVxworks_TimeSelect0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Vxworks_Time\n@@ -3582,8 +3860,9 @@ typedef void (*__gcc_VOIDFUNCPTR) ();\\\\\\n\\\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  97 - X11_Class fix\n+ *  Description of X11_Class fix\n  */\n+#define X11_CLASS_FIXIDX                 102\n tSCC zX11_ClassName[] =\n      \"X11_Class\";\n /*\n@@ -3605,7 +3884,7 @@ tSCC zX11_ClassBypass0[] =\n #define    X11_CLASS_TEST_CT  1\n #define    X11_CLASS_RE_CT    1\n tTestDesc aX11_ClassTests[] = {\n-  { TT_NEGREP, zX11_ClassBypass0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zX11_ClassBypass0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for X11_Class\n@@ -3621,8 +3900,9 @@ const char* apzX11_ClassPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  98 - X11_Class_Usage fix\n+ *  Description of X11_Class_Usage fix\n  */\n+#define X11_CLASS_USAGE_FIXIDX           103\n tSCC zX11_Class_UsageName[] =\n      \"X11_Class_Usage\";\n /*\n@@ -3644,7 +3924,7 @@ tSCC zX11_Class_UsageBypass0[] =\n #define    X11_CLASS_USAGE_TEST_CT  1\n #define    X11_CLASS_USAGE_RE_CT    1\n tTestDesc aX11_Class_UsageTests[] = {\n-  { TT_NEGREP, zX11_Class_UsageBypass0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zX11_Class_UsageBypass0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for X11_Class_Usage\n@@ -3655,8 +3935,9 @@ const char* apzX11_Class_UsagePatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description  99 - X11_New fix\n+ *  Description of X11_New fix\n  */\n+#define X11_NEW_FIXIDX                   104\n tSCC zX11_NewName[] =\n      \"X11_New\";\n /*\n@@ -3678,7 +3959,7 @@ tSCC zX11_NewBypass0[] =\n #define    X11_NEW_TEST_CT  1\n #define    X11_NEW_RE_CT    1\n tTestDesc aX11_NewTests[] = {\n-  { TT_NEGREP, zX11_NewBypass0,   (regex_t*)NULL }, };\n+  { TT_NEGREP,   zX11_NewBypass0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for X11_New\n@@ -3695,8 +3976,9 @@ const char* apzX11_NewPatch[] = { \"sed\",\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n- *  Description 100 - X11_Sprintf fix\n+ *  Description of X11_Sprintf fix\n  */\n+#define X11_SPRINTF_FIXIDX               105\n tSCC zX11_SprintfName[] =\n      \"X11_Sprintf\";\n /*\n@@ -3721,221 +4003,50 @@ extern char *\\tsprintf();\\\\\\n\\\n #endif /* !defined __STDC__ */,\",\n     (char*)NULL };\n \n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description 101 - Zzz_Ki_Iface fix\n- */\n-tSCC zZzz_Ki_IfaceName[] =\n-     \"Zzz_Ki_Iface\";\n-/*\n- *  File name selection pattern\n- */\n-tSCC zZzz_Ki_IfaceList[] =\n-  \"|sys/ki_iface.h|\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzZzz_Ki_IfaceMachs (const char**)NULL\n-\n-/*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zZzz_Ki_IfaceSelect0[] =\n-       \"These definitions are for HP Internal developers\";\n-\n-#define    ZZZ_KI_IFACE_TEST_CT  1\n-#define    ZZZ_KI_IFACE_RE_CT    1\n-tTestDesc aZzz_Ki_IfaceTests[] = {\n-  { TT_EGREP,  zZzz_Ki_IfaceSelect0,   (regex_t*)NULL }, };\n-\n-/*\n- *  Fix Command Arguments for Zzz_Ki_Iface\n- */\n-const char* apzZzz_Ki_IfacePatch[] = { \"sh\", \"-c\",\n-    \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\\\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\\\n-cat > /dev/null\",\n-    (char*)NULL };\n-\n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description 102 - Zzz_Ki fix\n- */\n-tSCC zZzz_KiName[] =\n-     \"Zzz_Ki\";\n-/*\n- *  File name selection pattern\n- */\n-tSCC zZzz_KiList[] =\n-  \"|sys/ki.h|\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzZzz_KiMachs (const char**)NULL\n-\n-/*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zZzz_KiSelect0[] =\n-       \"11.00 HP-UX LP64\";\n-\n-#define    ZZZ_KI_TEST_CT  1\n-#define    ZZZ_KI_RE_CT    1\n-tTestDesc aZzz_KiTests[] = {\n-  { TT_EGREP,  zZzz_KiSelect0,   (regex_t*)NULL }, };\n-\n-/*\n- *  Fix Command Arguments for Zzz_Ki\n- */\n-const char* apzZzz_KiPatch[] = { \"sh\", \"-c\",\n-    \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\\\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\\\n-cat > /dev/null\",\n-    (char*)NULL };\n-\n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description 103 - Zzz_Ki_Calls fix\n- */\n-tSCC zZzz_Ki_CallsName[] =\n-     \"Zzz_Ki_Calls\";\n-/*\n- *  File name selection pattern\n- */\n-tSCC zZzz_Ki_CallsList[] =\n-  \"|sys/ki_calls.h|\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzZzz_Ki_CallsMachs (const char**)NULL\n-\n-/*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zZzz_Ki_CallsSelect0[] =\n-       \"kthread_create_caller_t\";\n-\n-#define    ZZZ_KI_CALLS_TEST_CT  1\n-#define    ZZZ_KI_CALLS_RE_CT    1\n-tTestDesc aZzz_Ki_CallsTests[] = {\n-  { TT_EGREP,  zZzz_Ki_CallsSelect0,   (regex_t*)NULL }, };\n-\n-/*\n- *  Fix Command Arguments for Zzz_Ki_Calls\n- */\n-const char* apzZzz_Ki_CallsPatch[] = { \"sh\", \"-c\",\n-    \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\\\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\\\n-cat > /dev/null\",\n-    (char*)NULL };\n-\n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description 104 - Zzz_Ki_Defs fix\n- */\n-tSCC zZzz_Ki_DefsName[] =\n-     \"Zzz_Ki_Defs\";\n-/*\n- *  File name selection pattern\n- */\n-tSCC zZzz_Ki_DefsList[] =\n-  \"|sys/ki_defs.h|\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzZzz_Ki_DefsMachs (const char**)NULL\n-\n-/*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zZzz_Ki_DefsSelect0[] =\n-       \"Kernel Instrumentation Definitions\";\n-\n-#define    ZZZ_KI_DEFS_TEST_CT  1\n-#define    ZZZ_KI_DEFS_RE_CT    1\n-tTestDesc aZzz_Ki_DefsTests[] = {\n-  { TT_EGREP,  zZzz_Ki_DefsSelect0,   (regex_t*)NULL }, };\n-\n-/*\n- *  Fix Command Arguments for Zzz_Ki_Defs\n- */\n-const char* apzZzz_Ki_DefsPatch[] = { \"sh\", \"-c\",\n-    \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\\\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\\\n-cat > /dev/null\",\n-    (char*)NULL };\n-\n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description 105 - Zzz_Bad_Fixes fix\n- */\n-tSCC zZzz_Bad_FixesName[] =\n-     \"Zzz_Bad_Fixes\";\n-/*\n- *  File name selection pattern\n- */\n-tSCC zZzz_Bad_FixesList[] =\n-  \"|sundev/ipi_error.h|\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzZzz_Bad_FixesMachs (const char**)NULL\n-#define ZZZ_BAD_FIXES_TEST_CT  0\n-#define ZZZ_BAD_FIXES_RE_CT    0\n-#define aZzz_Bad_FixesTests   (tTestDesc*)NULL\n-\n-/*\n- *  Fix Command Arguments for Zzz_Bad_Fixes\n- */\n-const char* apzZzz_Bad_FixesPatch[] = { \"sh\", \"-c\",\n-    \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\\\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\\\n-cat > /dev/null\",\n-    (char*)NULL };\n-\n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description 106 - Zzz_Time fix\n- */\n-tSCC zZzz_TimeName[] =\n-     \"Zzz_Time\";\n-/*\n- *  File name selection pattern\n- */\n-tSCC zZzz_TimeList[] =\n-  \"|sys/time.h|\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzZzz_TimeMachs (const char**)NULL\n-\n-/*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zZzz_TimeSelect0[] =\n-       \"11.0 and later representation of ki time\";\n-\n-#define    ZZZ_TIME_TEST_CT  1\n-#define    ZZZ_TIME_RE_CT    1\n-tTestDesc aZzz_TimeTests[] = {\n-  { TT_EGREP,  zZzz_TimeSelect0,   (regex_t*)NULL }, };\n-\n-/*\n- *  Fix Command Arguments for Zzz_Time\n- */\n-const char* apzZzz_TimePatch[] = { \"sh\", \"-c\",\n-    \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\\\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\\\n-cat > /dev/null\",\n-    (char*)NULL };\n-\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  List of all fixes\n  */\n-#define  REGEX_COUNT  75\n-#define  FIX_COUNT    106\n+#define REGEX_COUNT          74\n+#define MACH_LIST_SIZE_LIMIT 154\n+#define FIX_COUNT            106\n+\n tFixDesc fixDescList[ FIX_COUNT ] = {\n+  {  zAaa_Ki_IfaceName,    zAaa_Ki_IfaceList,\n+     apzAaa_Ki_IfaceMachs, (regex_t*)NULL,\n+     AAA_KI_IFACE_TEST_CT, FD_MACH_ONLY | FD_REPLACEMENT,\n+     aAaa_Ki_IfaceTests,   apzAaa_Ki_IfacePatch },\n+\n+  {  zAaa_KiName,    zAaa_KiList,\n+     apzAaa_KiMachs, (regex_t*)NULL,\n+     AAA_KI_TEST_CT, FD_MACH_ONLY | FD_REPLACEMENT,\n+     aAaa_KiTests,   apzAaa_KiPatch },\n+\n+  {  zAaa_Ki_CallsName,    zAaa_Ki_CallsList,\n+     apzAaa_Ki_CallsMachs, (regex_t*)NULL,\n+     AAA_KI_CALLS_TEST_CT, FD_MACH_ONLY | FD_REPLACEMENT,\n+     aAaa_Ki_CallsTests,   apzAaa_Ki_CallsPatch },\n+\n+  {  zAaa_Ki_DefsName,    zAaa_Ki_DefsList,\n+     apzAaa_Ki_DefsMachs, (regex_t*)NULL,\n+     AAA_KI_DEFS_TEST_CT, FD_MACH_ONLY | FD_REPLACEMENT,\n+     aAaa_Ki_DefsTests,   apzAaa_Ki_DefsPatch },\n+\n+  {  zAaa_Bad_FixesName,    zAaa_Bad_FixesList,\n+     apzAaa_Bad_FixesMachs, (regex_t*)NULL,\n+     AAA_BAD_FIXES_TEST_CT, FD_MACH_ONLY | FD_REPLACEMENT,\n+     aAaa_Bad_FixesTests,   apzAaa_Bad_FixesPatch },\n+\n+  {  zAaa_TimeName,    zAaa_TimeList,\n+     apzAaa_TimeMachs, (regex_t*)NULL,\n+     AAA_TIME_TEST_CT, FD_MACH_ONLY | FD_REPLACEMENT,\n+     aAaa_TimeTests,   apzAaa_TimePatch },\n+\n+  {  zAab_Dgux_Int_VarargsName,    zAab_Dgux_Int_VarargsList,\n+     apzAab_Dgux_Int_VarargsMachs, (regex_t*)NULL,\n+     AAB_DGUX_INT_VARARGS_TEST_CT, FD_MACH_ONLY | FD_REPLACEMENT,\n+     aAab_Dgux_Int_VarargsTests,   apzAab_Dgux_Int_VarargsPatch },\n+\n   {  zAix_SyswaitName,    zAix_SyswaitList,\n      apzAix_SyswaitMachs, (regex_t*)NULL,\n      AIX_SYSWAIT_TEST_CT, FD_MACH_ONLY,\n@@ -4016,14 +4127,9 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      DEC_INTERN_ASM_TEST_CT, FD_MACH_ONLY,\n      aDec_Intern_AsmTests,   apzDec_Intern_AsmPatch },\n \n-  {  zDgux_Int_VarargsName,    zDgux_Int_VarargsList,\n-     apzDgux_Int_VarargsMachs, (regex_t*)NULL,\n-     DGUX_INT_VARARGS_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n-     aDgux_Int_VarargsTests,   apzDgux_Int_VarargsPatch },\n-\n   {  zNo_Double_SlashName,    zNo_Double_SlashList,\n      apzNo_Double_SlashMachs, (regex_t*)NULL,\n-     NO_DOUBLE_SLASH_TEST_CT, FD_MACH_ONLY,\n+     NO_DOUBLE_SLASH_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aNo_Double_SlashTests,   apzNo_Double_SlashPatch },\n \n   {  zEcd_CursorName,    zEcd_CursorList,\n@@ -4434,35 +4540,5 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n   {  zX11_SprintfName,    zX11_SprintfList,\n      apzX11_SprintfMachs, (regex_t*)NULL,\n      X11_SPRINTF_TEST_CT, FD_MACH_ONLY,\n-     aX11_SprintfTests,   apzX11_SprintfPatch },\n-\n-  {  zZzz_Ki_IfaceName,    zZzz_Ki_IfaceList,\n-     apzZzz_Ki_IfaceMachs, (regex_t*)NULL,\n-     ZZZ_KI_IFACE_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n-     aZzz_Ki_IfaceTests,   apzZzz_Ki_IfacePatch },\n-\n-  {  zZzz_KiName,    zZzz_KiList,\n-     apzZzz_KiMachs, (regex_t*)NULL,\n-     ZZZ_KI_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n-     aZzz_KiTests,   apzZzz_KiPatch },\n-\n-  {  zZzz_Ki_CallsName,    zZzz_Ki_CallsList,\n-     apzZzz_Ki_CallsMachs, (regex_t*)NULL,\n-     ZZZ_KI_CALLS_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n-     aZzz_Ki_CallsTests,   apzZzz_Ki_CallsPatch },\n-\n-  {  zZzz_Ki_DefsName,    zZzz_Ki_DefsList,\n-     apzZzz_Ki_DefsMachs, (regex_t*)NULL,\n-     ZZZ_KI_DEFS_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n-     aZzz_Ki_DefsTests,   apzZzz_Ki_DefsPatch },\n-\n-  {  zZzz_Bad_FixesName,    zZzz_Bad_FixesList,\n-     apzZzz_Bad_FixesMachs, (regex_t*)NULL,\n-     ZZZ_BAD_FIXES_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n-     aZzz_Bad_FixesTests,   apzZzz_Bad_FixesPatch },\n-\n-  {  zZzz_TimeName,    zZzz_TimeList,\n-     apzZzz_TimeMachs, (regex_t*)NULL,\n-     ZZZ_TIME_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n-     aZzz_TimeTests,   apzZzz_TimePatch }\n+     aX11_SprintfTests,   apzX11_SprintfPatch }\n };"}, {"sha": "25a672ede4f0ecd1e84653fa68cd55176e1604c6", "filename": "gcc/fixinc/fixlib.c", "status": "added", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixlib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixlib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixlib.c?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -0,0 +1,56 @@\n+\n+#include \"fixlib.h\"\n+\n+/* * * * * * * * * * * * *\n+ \n+   load_file_data loads all the contents of a file into malloc-ed memory.\n+   Its argument is the file pointer of the file to read in; the returned\n+   result is the NUL terminated contents of the file.  The file\n+   is presumed to be an ASCII text file containing no NULs.  */\n+\n+char *\n+load_file_data (fp)\n+     FILE* fp;\n+{\n+  char *pz_data = (char*)NULL;\n+  int    space_left = -1;  /* allow for terminating NUL */\n+  size_t space_used = 0;\n+\n+  do\n+    {\n+      size_t  size_read;\n+\n+      if (space_left < 1024)\n+        {\n+          space_left += 4096;\n+          pz_data = realloc ((void*)pz_data, space_left + space_used + 1 );\n+        }\n+      size_read = fread (pz_data + space_used, 1, space_left, fp);\n+\n+      if (size_read == 0)\n+        {\n+          if (feof (fp))\n+            break;\n+\n+          if (ferror (fp))\n+            {\n+              int err = errno;\n+              if (err != EISDIR)\n+                fprintf (stderr, \"error %d (%s) reading input\\n\", err,\n+                         strerror (err));\n+              free ((void *) pz_data);\n+              fclose (fp);\n+              return (char *) NULL;\n+            }\n+        }\n+\n+      space_left -= size_read;\n+      space_used += size_read;\n+    } while (! feof (fp));\n+\n+  pz_data = realloc ((void*)pz_data, space_used+1 );\n+  pz_data[ space_used ] = NUL;\n+  fclose (fp);\n+\n+  return pz_data;\n+}"}, {"sha": "3821905e26ccf9149d9ca71f7d4903b12ab852ac", "filename": "gcc/fixinc/fixlib.h", "status": "added", "additions": 92, "deletions": 0, "changes": 92, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixlib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixlib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixlib.h?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -0,0 +1,92 @@\n+\n+/* Install modified versions of certain ANSI-incompatible system header\n+   files which are fixed to work correctly with ANSI C and placed in a\n+   directory that GNU C will search.\n+\n+   Copyright (C) 1997, 1998, 1999 Free Software Foundation, Inc.\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+#ifndef FIXINCLUDES_FIXLIB_H\n+#define FIXINCLUDES_FIXLIB_H\n+\n+#include \"auto-host.h\"\n+#include \"gansidecl.h\"\n+#include \"system.h\"\n+\n+#include \"gnu-regex.h\"\n+\n+#ifndef STDIN_FILENO\n+# define STDIN_FILENO   0\n+#endif\n+#ifndef STDOUT_FILENO\n+# define STDOUT_FILENO  1\n+#endif\n+\n+typedef int t_success;\n+\n+#define FAILURE         (-1)\n+#define SUCCESS           0\n+#define PROBLEM           1\n+\n+#define SUCCEEDED(p)    ((p) == SUCCESS)\n+#define SUCCESSFUL(p)   SUCCEEDED (p)\n+#define FAILED(p)       ((p) < SUCCESS)\n+#define HADGLITCH(p)    ((p) > SUCCESS)\n+\n+\n+#define tSCC static const char\n+#define tCC  const char\n+#define tSC  static char\n+\n+/* If this particular system's header files define the macro `MAXPATHLEN',\n+   we happily take advantage of it; otherwise we use a value which ought\n+   to be large enough.  */\n+#ifndef MAXPATHLEN\n+# define MAXPATHLEN     4096\n+#endif\n+\n+#ifndef EXIT_SUCCESS\n+# define EXIT_SUCCESS 0\n+#endif\n+#ifndef EXIT_FAILURE\n+# define EXIT_FAILURE 1\n+#endif\n+\n+#define NUL             '\\0'\n+\n+#ifndef NOPROCESS\n+#define NOPROCESS\t((pid_t) -1)\n+#define NULLPROCESS\t((pid_t)0)\n+\n+#define EXIT_PANIC\t99\n+\n+typedef enum\n+{\n+  BOOL_FALSE, BOOL_TRUE\n+} t_bool;\n+\n+#define _P_(p)\t()\n+#endif\n+\n+/*\n+ *  Exported procedures\n+ */\n+char * load_file_data _P_(( FILE* fp ));\n+\n+#endif /* FIXINCLUDES_FIXLIB_H */"}, {"sha": "07161ce7e05b534610be8a255768286aed9b488f", "filename": "gcc/fixinc/fixtests.c", "status": "added", "additions": 220, "deletions": 0, "changes": 220, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixtests.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Ffixtests.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixtests.c?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -0,0 +1,220 @@\n+\n+/*\n+\n+   Test to see if a particular fix should be applied to a header file.\n+\n+   Copyright (C) 1997, 1998, 1999 Free Software Foundation, Inc.\n+\n+= = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+NOTE TO DEVELOPERS\n+\n+The routines you write here must work closely with both the fixincl.c\n+and the test_need.c program.\n+\n+Here are the rules:\n+\n+1.  Every test procedure name must be suffixed with \"_test\".\n+    These routines will be referenced from inclhack.def, sans the suffix.\n+\n+2.  Use the \"TEST_FOR_FIX_PROC_HEAD()\" macro _with_ the \"_test\" suffix\n+    (I cannot use the ## magic from ANSI C) for defining your entry point.\n+\n+3.  Put your test name into the FIX_TEST_TABLE\n+\n+4.  Do not write anything to stdout.  It may be closed.\n+\n+5.  Write to stderr only in the event of a reportable error\n+    In such an event, call \"exit(1)\".\n+\n+= = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+#include \"fixlib.h\"\n+\n+typedef int apply_fix_p_t;  /* Apply Fix Predicate Type */\n+\n+#define APPLY_FIX 0\n+#define SKIP_FIX  1\n+\n+#define SHOULD_APPLY(afp) ((afp) == APPLY_FIX)\n+apply_fix_p_t run_test();\n+\n+typedef struct {\n+    const char*  test_name;\n+    apply_fix_p_t (*test_proc)();\n+} test_entry_t;\n+\n+#define FIX_TEST_TABLE \\\n+  _FT_( \"double_slash\", double_slash_test )\n+\n+\n+#define TEST_FOR_FIX_PROC_HEAD( test ) \\\n+static apply_fix_p_t test ( fname, text ) \\\n+    const char* fname; \\\n+    const char* text;\n+\n+/*\n+ *  Skip over a quoted string.  Single quote strings may\n+ *  contain multiple characters if the first character is\n+ *  a backslash.  Especially a backslash followed by octal digits.\n+ *  We are not doing a correctness syntax check here.\n+ */\n+static const char*\n+skip_quote( q, text )\n+  char  q;\n+  char* text;\n+{\n+  for (;;)\n+    {\n+      char ch = *(text++);\n+      switch (ch)\n+        {\n+        case '\\\\':\n+          text++; /* skip over whatever character follows */\n+          break;\n+\n+        case '\"':\n+        case '\\'':\n+          if (ch != q)\n+            break;\n+          /*FALLTHROUGH*/\n+\n+        case '\\n':\n+        case NUL:\n+          goto skip_done;\n+        }\n+    } skip_done:;\n+\n+  return text;\n+}\n+\n+\n+TEST_FOR_FIX_PROC_HEAD( double_slash_test )\n+{\n+  /*  First, check to see if the file is in a C++ directory */\n+  if (strstr( fname, \"CC/\" ) != NULL)\n+    return SKIP_FIX;\n+  if (strstr( fname, \"xx/\" ) != NULL)\n+    return SKIP_FIX;\n+  if (strstr( fname, \"++/\" ) != NULL)\n+    return SKIP_FIX;\n+\n+  /*  Now look for the comment markers in the text */\n+  for (;;)\n+    {\n+      char ch = *(text++);\n+      switch (ch)\n+        {\n+        case '/':\n+          switch (*text) /* do not advance `text' here */\n+            {\n+            case '/':\n+              /*\n+                We found a \"//\" pair in open text.\n+                The fix must be applied\n+              */\n+              return APPLY_FIX;\n+\n+            case '*':\n+              /* We found a C-style comment.  Skip forward to the end */\n+              text = strstr( text+1, \"*/\" );\n+              if (text == (char*)NULL)\n+                goto test_done;\n+              text += 2;\n+            }\n+          break;\n+\n+        case NUL:\n+          goto test_done;\n+\n+        case '\"':\n+        case '\\'':\n+          text = skip_quote( ch, text );\n+        }\n+\n+    } test_done:;\n+\n+  return SKIP_FIX;\n+}\n+\n+/* = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+     test for fix selector\n+\n+     THIS IS THE ONLY EXPORTED ROUTINE\n+\n+*/\n+apply_fix_p_t\n+run_test( tname, fname, text )\n+  const char* tname;\n+  const char* fname;\n+  const char* text;\n+{\n+  #define _FT_(n,p) { n, p },\n+  static test_entry_t test_table[] = { FIX_TEST_TABLE { NULL, NULL }};\n+  #undef _FT_\n+  #define TEST_TABLE_CT ((sizeof(test_table)/sizeof(test_table[0]))-1)\n+\n+  int ct = TEST_TABLE_CT;\n+  test_entry_t* pte = test_table;\n+\n+  do\n+    {\n+      if (strcmp( pte->test_name, tname ) == 0)\n+        return (*pte->test_proc)( fname, text );\n+    } while (--ct > 0);\n+  fprintf( stderr, \"fixincludes error:  the `%s' fix test is unknown\\n\",\n+           tname );\n+  exit( 3 );\n+}\n+\n+/* = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =\n+\n+     MAIN ROUTINE\n+\n+     This file is both included in fixincl.c and compiled as a separate\n+     program for use by the inclhack.sh script.\n+\n+*/\n+\n+#ifdef MAIN\n+\n+int\n+main( argc, argv )\n+  int argc;\n+  char** argv;\n+{\n+  char* fname = *++argv;\n+  char* tname = *++argv;\n+  char* buf;\n+  size_t buf_size = 0;\n+\n+  if (argc != 3)\n+    return run_test( \"No test name provided\", NULL, NULL, 0 );\n+\n+  fclose( stdin );\n+  fclose( stdout );\n+\n+  buf = load_file_data (fopen (fname, \"r\"));\n+\n+  return run_test( tname, fname, buf );\n+}\n+\n+#endif"}, {"sha": "36cc3905fd5b8dc55704374346c980559b0f844d", "filename": "gcc/fixinc/hackshell.tpl", "status": "modified", "additions": 54, "deletions": 40, "changes": 94, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Fhackshell.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Fhackshell.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fhackshell.tpl?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -43,70 +43,54 @@ _FOR fix \"\\n\\n\" =]\n \n     _ENDIF=][=\n \n-    #  There are three conditional tests:  select, bypass and test.\n+    #  There are four conditional tests:  select, bypass and test c_test.\n        They may appear as often as desired.  They must all pass for\n        the fix to be applied.  \"select\" and \"bypass\" are egrep expressions\n        that must each appear (or not appear) in the target file.\n        \"test\" is an arbitrary test program expression that must yield\n-       true or false.  It is enclosed in parenthesis to avoid\n-       precedence problems.  The output looks like this:\n-\n-       if ( test -n \"`egrep 'find-expr' ${file}`\" -a\n-                 -z \"`egrep 'not-find'  ${file}`\" -a\n-                 '(' <some-test-expression> ')'\n-          ) > /dev/null 2>&1 ; then\n-\n-    #  =][=\n+       true or false.  =][=\n \n     _IF select _exist =]\n     if ( test [=\n         _FOR select \" -a \\\\\\n              \"\n               =]-n [=select _shrstr \"#`egrep %s ${file}`\"\n                             _printf _shstr =][=\n-        /select=][=\n+        /select=]\n+       ) > /dev/null 2>&1 ; then[=\n+    _ENDIF =][=\n \n-        _IF bypass _exist =][=\n+    _IF bypass _exist =]\n+    if ( test [=\n             _FOR bypass=] -a \\\n               -z [=bypass _shrstr \"#`egrep %s ${file}`\"\n                             _printf _shstr =][=\n-            /bypass=][=\n-        _ENDIF=][=\n-\n-        _IF test _exist=][=\n-            _FOR test=] -a \\\n-              '(' [=test=] ')'[=\n-            /test=][=\n-        _ENDIF=]\n+            /bypass=]\n        ) > /dev/null 2>&1 ; then[=\n+    _ENDIF =][=\n \n-\n-    _ELIF test _exist =]\n+    _IF test _exist =]\n     if ( test [=\n         _FOR test \" -a \\\\\\n              \"\n               =]'(' [=test=] ')'[=\n-        /test=][=\n-\n-        _IF bypass _exist=][=\n-            _FOR bypass=] -a \\\n-              -z [=bypass _shrstr \"#`egrep %s ${file}`\"\n-                            _printf _shstr=][=\n-            /bypass=][=\n-        _ENDIF=]\n+        /test=]\n        ) > /dev/null 2>&1 ; then[=\n+    _ENDIF=][=\n \n+    _IF c_test _exist =]\n+    if [=\n+        _FOR c_test \" && \\\\\\n              \"\n+              =]${FIXTESTS} ${file} [=c_test=][=\n+        /c_test=]\n+    then[=\n \n-    _ELIF bypass _exist =]\n-    if ( test [=_FOR bypass \" -a \\\\\\n              \"\n-              =]-z [=bypass _shrstr \"#`egrep %s ${file}`\"\n-                            _printf _shstr=][=/bypass=]\n-       ) > /dev/null 2>&1 ; then[=\n-\n-      _ENDIF=]\n+    _ENDIF=][=\n+    _IF replace _exist ! =]\n     fixlist=\"${fixlist}\n       [=hackname=]\"\n     if [ ! -r ${DESTFILE} ]\n     then infile=${file}\n     else infile=${DESTFILE} ; fi [=\n+    _ENDIF =][=\n \n     _IF sed _exist=][=\n         _IF shell _exist =][=\n@@ -129,20 +113,50 @@ _FOR fix \"\\n\\n\" =]\n     if test ! -f ${DESTDIR}/fixinc.tmp\n     then continue ; fi [=\n \n+    _ELIF c_fix _exist =]\n+    ${FIXFIXES} ${file} [=c_fix=] < $infile > ${DESTDIR}/fixinc.tmp[=\n+\n+    _ELIF replace _exist =][=\n+\n+      _IF replace _len 0 > =]\n+    echo \"[=hackname _down=] replacing file ${file}\" >&2\n+    cat > ${DESTFILE} << '_EOF_'\n+[=replace=]\n+_EOF_[=\n+      _ELSE =]\n+    echo \"[=hackname _down=] bypassing file ${file}\"[=\n+      _ENDIF =]\n+    continue\n+[=\n \n     _ELSE=][=\n         _ERROR hackname _get \"ERROR:  %s has no fixup\" _printf=][=\n \n-    _ENDIF=]\n+    _ENDIF=][=\n+\n+    _IF replace _exist ! =]\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}[=\n+    _ENDIF =][=\n \n     #  Close off any opened \"if\" or \"case\" statements in reverse order\n \n     # =][=\n \n-    _IF select _exist test _exist | bypass _exist | =]\n-    fi # end of selection 'if'[=\n+    _IF c_test _exist =]\n+    fi # end of c_test 'if'[=\n+    _ENDIF =][=\n+\n+    _IF test _exist =]\n+    fi # end of test expression 'if'[=\n+    _ENDIF =][=\n+\n+    _IF bypass _exist =]\n+    fi # end of bypass 'if'[=\n+    _ENDIF =][=\n+\n+    _IF select _exist =]\n+    fi # end of select 'if'[=\n     _ENDIF =][=\n \n     _IF mach _exist=]"}, {"sha": "a02efb55044bce5c507a5f0d31ce016b90a2188a", "filename": "gcc/fixinc/inclhack.def", "status": "modified", "additions": 182, "deletions": 204, "changes": 386, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.def?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -45,7 +45,7 @@ The rules for making fixes:\n         that the backslash is processed before '\\\\', '\\'' and '#'\n         characters (using C character syntax).\n \n-4.  There are currently two methods of fixing a file:\n+4.  There are currently four methods of fixing a file:\n \n     1.  a series of sed expressions.  Each will be an individual\n         \"-e\" argument to a single invocation of sed.\n@@ -54,16 +54,182 @@ The rules for making fixes:\n         of stdin in order to avoid pipe stalls.  They may choose to\n         discard the input.\n \n-    A C language subroutine method is planned for both tests and fixes\n-    in the near term.  Awk ought to be possible too, but there may\n-    be portability issues that I am not familiar with.\n+    3.  A C language subroutine method for both tests and fixes.\n \n-5.  If the fix is to remove the file (i.e. the fixing process broke\n-    the file), then you must use a shell script that deletes all\n-    copies of the output file and does not write _anything_ to stdout.\n-    See the \"zzz_*\" fixes at the end of this file.\n+    4.  Replacement text.  If the replacement is empty, then\n+        no fix is applied.  Otherwise, the replacement text is written\n+        to the output file and no further fixes are applied.\n+\n+        Replacement text \"fixes\" must be first in this file!!\n+\n+\n+    Now, first:  DO NOT DO BROKEN FIXES (empty replacement fixes) */\n+\n+\n+/*\n+ *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n+ */\n+fix = {\n+    hackname = AAA_ki_iface;\n+    files    = sys/ki_iface.h;\n+    select   = 'These definitions are for HP Internal developers';\n+    replace; /* empty replacement -> no fixing the file */\n+};\n+\n+\n+/*\n+ *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n+ */\n+fix = {\n+    hackname = AAA_ki;\n+    files    = sys/ki.h;\n+    select   = '11.00 HP-UX LP64';\n+    replace; /* empty replacement -> no fixing the file */\n+};\n+\n+\n+/*\n+ *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n+ */\n+fix = {\n+    hackname = AAA_ki_calls;\n+    files    = sys/ki_calls.h;\n+    select   = 'kthread_create_caller_t';\n+    replace; /* empty replacement -> no fixing the file */\n+};\n+\n+\n+/*\n+ *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n+ */\n+fix = {\n+    hackname = AAA_ki_defs;\n+    files    = sys/ki_defs.h;\n+    select   = 'Kernel Instrumentation Definitions';\n+    replace; /* empty replacement -> no fixing the file */\n+};\n+\n+\n+/*\n+ *  This file on SunOS 4 has a very large macro.  When the sed loop\n+ *  tries pull it in, it overflows the pattern space size of the SunOS\n+ *  sed (GNU sed does not have this problem).  Since the file does not\n+ *  require fixing, we remove it from the fixed directory.\n+ */\n+fix = {\n+    hackname = AAA_bad_fixes;\n+    files    = sundev/ipi_error.h;\n+    /* shouldn't there be a select expression here??? */\n+    replace; /* empty replacement -> no fixing the file */\n+};\n+\n+\n+/*\n+ *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n+ */\n+fix = {\n+    hackname = AAA_time;\n+    files    = sys/time.h;\n+    select   = '11.0 and later representation of ki time';\n+    replace; /* empty replacement -> no fixing the file */\n+};\n+\n+/* And now, the real fixes, replacement text fixes first: */\n+\n+/*\n+ *  Completely replace &lt;_int_varargs.h&gt; with a file that includes gcc's\n+ *  stdarg.h or varargs.h files as appropriate on DG/UX\n+ */\n+fix = {\n+    hackname = AAB_dgux_int_varargs;\n+    files    = _int_varargs.h;\n+    replace  = \"#ifndef __INT_VARARGS_H\n+\\#define __INT_VARARGS_H\n+\n+/************************************************************************/\n+/* _INT_VARARGS.H - Define the common stuff for varargs/stdarg/stdio.   */\n+/************************************************************************/\n+\n+/*\n+** This file is a DG internal header.  Never include this\n+** file directly.\n+*/\n+\n+\\#ifndef ___int_features_h\n+\\#include &lt;sys/_int_features.h&gt;\n+\\#endif\n+\n+\\#if !(defined(_VA_LIST) || defined(_VA_LIST_))\n+\\#define _VA_LIST\n+\\#define _VA_LIST_\n+\n+\\#ifdef __LINT__\n+\n+\\#ifdef __STDC__\n+typedef void * va_list;\n+\\#else\n+typedef char * va_list;\n+\\#endif\n+\n+\\#else\n+\\#if _M88K_ANY\n+\n+\\#if defined(__DCC__)\n+\n+typedef struct {\n+      int     next_arg;\n+      int     *mem_ptr;\n+      int     *reg_ptr;\n+} va_list;\n+\n+\\#else  /* ! defined(__DCC__) */\n+\n+typedef struct {\n+      int  __va_arg;       /* argument number */\n+      int *__va_stk;       /* start of args passed on stack */\n+      int *__va_reg;       /* start of args passed in regs */\n+} va_list;\n+\n+\\#endif  /* ! defined(__DCC__) */\n+\n+\\#elif _IX86_ANY\n+\n+\\#if defined(__GNUC__) || defined(__STDC__)\n+typedef void * va_list;\n+\\#else\n+typedef char * va_list;\n+\\#endif\n+\n+\\#endif  /*  _IX86_ANY */\n+\n+\\#endif /* __LINT__ */\n+\\#endif /*  !(defined(_VA_LIST) || defined(_VA_LIST_)) */\n+\\#endif /*  #ifndef __INT_VARARGS_H  */\\n\";\n+};\n+\n+\n+/*\n+ *  Completely replace <sys/varargs.h> with a file that includes gcc's\n+ *  stdarg.h or varargs.h files as appropriate.\n+ */\n+#ifdef SVR4\n+fix = {\n+    hackname = AAB_svr4_no_varargs;\n+    files    = sys/varargs.h;\n+    replace  = \"/* This file was generated by fixincludes.  */\\n\"\n+               \"#ifndef _SYS_VARARGS_H\\n\"\n+               \"#define _SYS_VARARGS_H\\n\\n\"\n+\n+               \"#ifdef __STDC__\\n\"\n+               \"#include <stdarg.h>\\n\"\n+               \"#else\\n\"\n+               \"#include <varargs.h>\\n\"\n+               \"#endif\\n\\n\"\n+\n+               \"#endif  /* _SYS_VARARGS_H */\\n\";\n+};\n+#endif\n \n-Let the fixes begin: */\n \n /*\n  *  sys/wait.h on AIX 3.2.5 puts the declaration of wait3 before the definition\n@@ -321,80 +487,6 @@ fix = {\n };\n \n \n-/*\n- *  Completely replace &lt;_int_varargs.h&gt; with a file that includes gcc's\n- *  stdarg.h or varargs.h files as appropriate on DG/UX\n- */\n-fix = {\n-    hackname = dgux_int_varargs;\n-    files    = _int_varargs.h;\n-    shell    = \"cat > /dev/null\\ncat << '_EOF_'\n-\\#ifndef __INT_VARARGS_H\n-\\#define __INT_VARARGS_H\n-\n-/************************************************************************/\n-/* _INT_VARARGS.H - Define the common stuff for varargs/stdarg/stdio.   */\n-/************************************************************************/\n-\n-/*\n-** This file is a DG internal header.  Never include this\n-** file directly.\n-*/\n-\n-\\#ifndef ___int_features_h\n-\\#include &lt;sys/_int_features.h&gt;\n-\\#endif\n-\n-\\#if !(defined(_VA_LIST) || defined(_VA_LIST_))\n-\\#define _VA_LIST\n-\\#define _VA_LIST_\n-\n-\\#ifdef __LINT__\n-\n-\\#ifdef __STDC__\n-typedef void * va_list;\n-\\#else\n-typedef char * va_list;\n-\\#endif\n-\n-\\#else\n-\\#if _M88K_ANY\n-\n-\\#if defined(__DCC__)\n-\n-typedef struct {\n-      int     next_arg;\n-      int     *mem_ptr;\n-      int     *reg_ptr;\n-} va_list;\n-\n-\\#else  /* ! defined(__DCC__) */\n-\n-typedef struct {\n-      int  __va_arg;       /* argument number */\n-      int *__va_stk;       /* start of args passed on stack */\n-      int *__va_reg;       /* start of args passed in regs */\n-} va_list;\n-\n-\\#endif  /* ! defined(__DCC__) */\n-\n-\\#elif _IX86_ANY\n-\n-\\#if defined(__GNUC__) || defined(__STDC__)\n-typedef void * va_list;\n-\\#else\n-typedef char * va_list;\n-\\#endif\n-\n-\\#endif  /*  _IX86_ANY */\n-\n-\\#endif /* __LINT__ */\n-\\#endif /*  !(defined(_VA_LIST) || defined(_VA_LIST_)) */\n-\\#endif /*  #ifndef __INT_VARARGS_H  */\n-_EOF_\\n\";\n-};\n-\n-\n /*\n  *  Remove the double-slash comments\n  *  They *must* be removed so it will not create nested comments!!\n@@ -435,11 +527,17 @@ fix = {\n      *  and do not appear to be within a single-line C-style comment\n      *  and are not the end of a quoted string.\n      */\n+#ifdef NO_C_TESTS\n     test   = ' -z \"`echo ${file} | egrep \\'(CC|cxx|\\+\\+)/\\'`\"';\n     select = '(^|[^:])//[^\"*]';\n     sed    = 's,^//.*$,,';\n     sed    = 's,\\(/\\*.*\\)//\\(.*\\*/\\),\\1/ /\\2,g';\n     sed    = 's,\\([^:]\\)//[^\"].*$,\\1,';\n+    sed    = 's,[^:]//[^\"].*$,,';\n+#else\n+    c_test = \"double_slash\";\n+    c_fix  = \"no_double_slash\";\n+#endif\n };\n \n \n@@ -1451,7 +1549,7 @@ fix = {\n \n   sed -e 's@ va_list @ __gnuc_va_list @' \\\\\n       -e 's@ va_list)@ __gnuc_va_list)@' \\\\\n-      -e 's@ _BSD_VA_LIST_))@ __gnuc_va_list))@' \\\\\n+      -e 's@ _BSD_VA_LIST_));@ __gnuc_va_list));@' \\\\\n       -e 's@ _VA_LIST_));@ __gnuc_va_list));@' \\\\\n       -e 's@ va_list@ __va_list__@' \\\\\n       -e 's@\\\\*va_list@*__va_list__@' \\\\\n@@ -1867,31 +1965,6 @@ fix = {\n };\n #endif\n \n-/*\n- *  Completely replace <sys/varargs.h> with a file that includes gcc's\n- *  stdarg.h or varargs.h files as appropriate.\n- */\n-#ifdef SVR4\n-fix = {\n-    hackname = svr4_no_varargs;\n-    files    = sys/varargs.h;\n-    shell    = \"cat > /dev/null\\n\"\n-               \"cat << _EOF_\\n\"\n-               \"/* This file was generated by fixincludes.  */\\n\"\n-               \"#ifndef _SYS_VARARGS_H\\n\"\n-               \"#define _SYS_VARARGS_H\\n\\n\"\n-\n-               \"#ifdef __STDC__\\n\"\n-               \"#include <stdarg.h>\\n\"\n-               \"#else\\n\"\n-               \"#include <varargs.h>\\n\"\n-               \"#endif\\n\\n\"\n-\n-               \"#endif  /* _SYS_VARARGS_H */\\n\"\n-               \"_EOF_\";\n-};\n-#endif\n-\n /*\n  *   Fix broken decl of profil present on some svr4 systems.\n  */\n@@ -2443,99 +2516,4 @@ fix = {\n                \"#endif /* !defined __STDC__ */,\";\n };\n \n-\n-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  UNDO BROKEN FIXES\n- *\n- *  We sure do hope that broken fixes and needed fixes are never\n- *  applied to the same file!!  :-}\n- */\n-\n-/*\n- *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n- */\n-fix = {\n-    hackname = zzz_ki_iface;\n-    files    = sys/ki_iface.h;\n-    select   = 'These definitions are for HP Internal developers';\n-    shell    =\n-         \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\"\n-         \"rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\"\n-         \"cat > /dev/null\";\n-};\n-\n-\n-/*\n- *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n- */\n-fix = {\n-    hackname = zzz_ki;\n-    files    = sys/ki.h;\n-    select   = '11.00 HP-UX LP64';\n-    shell    =\n-         \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\"\n-         \"rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\"\n-         \"cat > /dev/null\";\n-};\n-\n-\n-/*\n- *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n- */\n-fix = {\n-    hackname = zzz_ki_calls;\n-    files    = sys/ki_calls.h;\n-    select   = 'kthread_create_caller_t';\n-    shell    =\n-         \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\"\n-         \"rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\"\n-         \"cat > /dev/null\";\n-};\n-\n-\n-/*\n- *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n- */\n-fix = {\n-    hackname = zzz_ki_defs;\n-    files    = sys/ki_defs.h;\n-    select   = 'Kernel Instrumentation Definitions';\n-    shell    =\n-         \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\"\n-         \"rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\"\n-         \"cat > /dev/null\";\n-};\n-\n-\n-/*\n- *  This file on SunOS 4 has a very large macro.  When the sed loop\n- *  tries pull it in, it overflows the pattern space size of the SunOS\n- *  sed (GNU sed does not have this problem).  Since the file does not\n- *  require fixing, we remove it from the fixed directory.\n- */\n-fix = {\n-    hackname = zzz_bad_fixes;\n-    files    = sundev/ipi_error.h;\n-    /* shouldn't there be a select expression here??? */\n-    shell    =\n-         \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\"\n-         \"rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\"\n-         \"cat > /dev/null\";\n-};\n-\n-\n-/*\n- *  Purge some HP-UX 11 files that are only borken after they are \"fixed\".\n- */\n-fix = {\n-    hackname = zzz_time;\n-    files    = sys/time.h;\n-    select   = '11.0 and later representation of ki time';\n-    shell    =\n-         \"echo \\\"Removing incorrect fix to <$file>\\\" >&2\\n\"\n-         \"rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\\n\"\n-         \"cat > /dev/null\";\n-};\n-\n /*EOF*/"}, {"sha": "2d5ba12f4b623854265312d07c6dd8fb6ef5e7df", "filename": "gcc/fixinc/inclhack.sh", "status": "modified", "additions": 367, "deletions": 439, "changes": 806, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Finclhack.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Finclhack.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.sh?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -361,7 +361,164 @@ while [ $# != 0 ]; do\n     DESTFILE=${DESTDIR}/`echo ${file} | sed \"s;${FIND_BASE}/;;\" `\n \n     #\n-    # Fix   1:  Aix_Syswait\n+    # Fix   1:  Aaa_Ki_Iface\n+    #\n+    case \"${file}\" in ./sys/ki_iface.h )\n+    if ( test -n \"`egrep 'These definitions are for HP Internal developers' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    echo \"aaa_ki_iface bypassing file ${file}\"\n+    continue\n+\n+    fi # end of select 'if'\n+    ;; # case end for file name test\n+    esac\n+\n+\n+    #\n+    # Fix   2:  Aaa_Ki\n+    #\n+    case \"${file}\" in ./sys/ki.h )\n+    if ( test -n \"`egrep '11.00 HP-UX LP64' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    echo \"aaa_ki bypassing file ${file}\"\n+    continue\n+\n+    fi # end of select 'if'\n+    ;; # case end for file name test\n+    esac\n+\n+\n+    #\n+    # Fix   3:  Aaa_Ki_Calls\n+    #\n+    case \"${file}\" in ./sys/ki_calls.h )\n+    if ( test -n \"`egrep 'kthread_create_caller_t' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    echo \"aaa_ki_calls bypassing file ${file}\"\n+    continue\n+\n+    fi # end of select 'if'\n+    ;; # case end for file name test\n+    esac\n+\n+\n+    #\n+    # Fix   4:  Aaa_Ki_Defs\n+    #\n+    case \"${file}\" in ./sys/ki_defs.h )\n+    if ( test -n \"`egrep 'Kernel Instrumentation Definitions' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    echo \"aaa_ki_defs bypassing file ${file}\"\n+    continue\n+\n+    fi # end of select 'if'\n+    ;; # case end for file name test\n+    esac\n+\n+\n+    #\n+    # Fix   5:  Aaa_Bad_Fixes\n+    #\n+    case \"${file}\" in ./sundev/ipi_error.h )\n+    echo \"aaa_bad_fixes bypassing file ${file}\"\n+    continue\n+\n+    ;; # case end for file name test\n+    esac\n+\n+\n+    #\n+    # Fix   6:  Aaa_Time\n+    #\n+    case \"${file}\" in ./sys/time.h )\n+    if ( test -n \"`egrep '11.0 and later representation of ki time' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    echo \"aaa_time bypassing file ${file}\"\n+    continue\n+\n+    fi # end of select 'if'\n+    ;; # case end for file name test\n+    esac\n+\n+\n+    #\n+    # Fix   7:  Aab_Dgux_Int_Varargs\n+    #\n+    case \"${file}\" in ./_int_varargs.h )\n+    echo \"aab_dgux_int_varargs replacing file ${file}\" >&2\n+    cat > ${DESTFILE} << '_EOF_'\n+#ifndef __INT_VARARGS_H\n+#define __INT_VARARGS_H\n+\n+/************************************************************************/\n+/* _INT_VARARGS.H - Define the common stuff for varargs/stdarg/stdio.   */\n+/************************************************************************/\n+\n+/*\n+** This file is a DG internal header.  Never include this\n+** file directly.\n+*/\n+\n+#ifndef ___int_features_h\n+#include &lt;sys/_int_features.h&gt;\n+#endif\n+\n+#if !(defined(_VA_LIST) || defined(_VA_LIST_))\n+#define _VA_LIST\n+#define _VA_LIST_\n+\n+#ifdef __LINT__\n+\n+#ifdef __STDC__\n+typedef void * va_list;\n+#else\n+typedef char * va_list;\n+#endif\n+\n+#else\n+#if _M88K_ANY\n+\n+#if defined(__DCC__)\n+\n+typedef struct {\n+      int     next_arg;\n+      int     *mem_ptr;\n+      int     *reg_ptr;\n+} va_list;\n+\n+#else  /* ! defined(__DCC__) */\n+\n+typedef struct {\n+      int  __va_arg;       /* argument number */\n+      int *__va_stk;       /* start of args passed on stack */\n+      int *__va_reg;       /* start of args passed in regs */\n+} va_list;\n+\n+#endif  /* ! defined(__DCC__) */\n+\n+#elif _IX86_ANY\n+\n+#if defined(__GNUC__) || defined(__STDC__)\n+typedef void * va_list;\n+#else\n+typedef char * va_list;\n+#endif\n+\n+#endif  /*  _IX86_ANY */\n+\n+#endif /* __LINT__ */\n+#endif /*  !(defined(_VA_LIST) || defined(_VA_LIST_)) */\n+#endif /*  #ifndef __INT_VARARGS_H  */\n+\n+_EOF_\n+    continue\n+\n+    ;; # case end for file name test\n+    esac\n+\n+\n+    #\n+    # Fix   8:  Aix_Syswait\n     #\n     case \"${file}\" in ./sys/wait.h )\n     if ( test -n \"`egrep 'bos325,' ${file}`\"\n@@ -378,13 +535,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   2:  Aix_Volatile\n+    # Fix   9:  Aix_Volatile\n     #\n     case \"${file}\" in ./sys/signal.h )\n     if ( test -n \"`egrep 'typedef volatile int sig_atomic_t' ${file}`\"\n@@ -399,13 +556,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   3:  Alpha_Getopt\n+    # Fix  10:  Alpha_Getopt\n     #\n     case \"${file}\" in ./stdio.h | \\\n \t./stdlib.h )\n@@ -421,13 +578,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   4:  Alpha_Parens\n+    # Fix  11:  Alpha_Parens\n     #\n     case \"${file}\" in ./sym.h )\n     if ( test -n \"`egrep '#ifndef\\\\(__mips64\\\\)' ${file}`\"\n@@ -442,13 +599,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   5:  Alpha_Sbrk\n+    # Fix  12:  Alpha_Sbrk\n     #\n     case \"${file}\" in ./unistd.h )\n     if ( test -n \"`egrep 'char[ \t]*\\\\*[\t ]*sbrk[ \t]*\\\\(' ${file}`\"\n@@ -463,13 +620,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   6:  Arm_Norcroft_Hint\n+    # Fix  13:  Arm_Norcroft_Hint\n     #\n     case \"${file}\" in ./X11/Intrinsic.h )\n     if ( test -n \"`egrep '___type p_type' ${file}`\"\n@@ -484,13 +641,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   7:  Arm_Wchar\n+    # Fix  14:  Arm_Wchar\n     #\n     case \"${file}\" in ./stdlib.h )\n     if ( test -n \"`egrep '#[ \t]*define[ \t]*__wchar_t' ${file}`\"\n@@ -506,13 +663,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   8:  Aux_Asm\n+    # Fix  15:  Aux_Asm\n     #\n     case \"${file}\" in ./sys/param.h )\n     if ( test -n \"`egrep '#ifndef NOINLINE' ${file}`\"\n@@ -527,13 +684,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix   9:  Avoid_Bool\n+    # Fix  16:  Avoid_Bool\n     #\n     case \"${file}\" in ./curses.h | \\\n \t./curses_colr/curses.h | \\\n@@ -583,7 +740,7 @@ struct rusage;\n \n \n     #\n-    # Fix  10:  Bad_Struct_Term\n+    # Fix  17:  Bad_Struct_Term\n     #\n     case \"${file}\" in ./curses.h )\n     if ( test -n \"`egrep '^[ \t]*typedef[ \t]+struct[ \t]+term[ \t]*;' ${file}`\"\n@@ -598,13 +755,13 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  11:  Badquote\n+    # Fix  18:  Badquote\n     #\n     case \"${file}\" in ./sundev/vuid_event.h )\n     fixlist=\"${fixlist}\n@@ -622,7 +779,7 @@ struct rusage;\n \n \n     #\n-    # Fix  12:  Bad_Lval\n+    # Fix  19:  Bad_Lval\n     #\n     case \"${file}\" in ./libgen.h | \\\n \t./dirent.h | \\\n@@ -653,10 +810,12 @@ struct rusage;\n \n \n     #\n-    # Fix  13:  Broken_Assert_Stdio\n+    # Fix  20:  Broken_Assert_Stdio\n     #\n     case \"${file}\" in ./assert.h )\n-    if ( test -n \"`egrep 'stderr' ${file}`\" -a \\\n+    if ( test -n \"`egrep 'stderr' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    if ( test  -a \\\n               -z \"`egrep 'include.*stdio.h' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n@@ -671,16 +830,19 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  14:  Broken_Assert_Stdlib\n+    # Fix  21:  Broken_Assert_Stdlib\n     #\n     case \"${file}\" in ./assert.h )\n-    if ( test -n \"`egrep 'exit *\\\\(|abort *\\\\(' ${file}`\" -a \\\n+    if ( test -n \"`egrep 'exit *\\\\(|abort *\\\\(' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    if ( test  -a \\\n               -z \"`egrep 'include.*stdlib.h' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n@@ -697,13 +859,14 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  15:  Bsd43_Io_Macros\n+    # Fix  22:  Bsd43_Io_Macros\n     #\n     if ( test -n \"`egrep 'BSD43__IO' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n@@ -718,11 +881,11 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n \n \n     #\n-    # Fix  16:  Dec_Intern_Asm\n+    # Fix  23:  Dec_Intern_Asm\n     #\n     case \"${file}\" in ./c_asm.h )\n     fixlist=\"${fixlist}\n@@ -745,115 +908,23 @@ struct rusage;\n \n \n     #\n-    # Fix  17:  Dgux_Int_Varargs\n-    #\n-    case \"${file}\" in ./_int_varargs.h )\n-    fixlist=\"${fixlist}\n-      dgux_int_varargs\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ( cat > /dev/null\n-cat << '_EOF_'\n-#ifndef __INT_VARARGS_H\n-#define __INT_VARARGS_H\n-\n-/************************************************************************/\n-/* _INT_VARARGS.H - Define the common stuff for varargs/stdarg/stdio.   */\n-/************************************************************************/\n-\n-/*\n-** This file is a DG internal header.  Never include this\n-** file directly.\n-*/\n-\n-#ifndef ___int_features_h\n-#include &lt;sys/_int_features.h&gt;\n-#endif\n-\n-#if !(defined(_VA_LIST) || defined(_VA_LIST_))\n-#define _VA_LIST\n-#define _VA_LIST_\n-\n-#ifdef __LINT__\n-\n-#ifdef __STDC__\n-typedef void * va_list;\n-#else\n-typedef char * va_list;\n-#endif\n-\n-#else\n-#if _M88K_ANY\n-\n-#if defined(__DCC__)\n-\n-typedef struct {\n-      int     next_arg;\n-      int     *mem_ptr;\n-      int     *reg_ptr;\n-} va_list;\n-\n-#else  /* ! defined(__DCC__) */\n-\n-typedef struct {\n-      int  __va_arg;       /* argument number */\n-      int *__va_stk;       /* start of args passed on stack */\n-      int *__va_reg;       /* start of args passed in regs */\n-} va_list;\n-\n-#endif  /* ! defined(__DCC__) */\n-\n-#elif _IX86_ANY\n-\n-#if defined(__GNUC__) || defined(__STDC__)\n-typedef void * va_list;\n-#else\n-typedef char * va_list;\n-#endif\n-\n-#endif  /*  _IX86_ANY */\n-\n-#endif /* __LINT__ */\n-#endif /*  !(defined(_VA_LIST) || defined(_VA_LIST_)) */\n-#endif /*  #ifndef __INT_VARARGS_H  */\n-_EOF_\n- ) < $infile > ${DESTDIR}/fixinc.tmp\n-\n-    #  Shell scripts have the potential of removing the output\n-    #  We interpret that to mean the file is not to be altered\n-    #\n-    if test ! -f ${DESTDIR}/fixinc.tmp\n-    then continue ; fi \n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    ;; # case end for file name test\n-    esac\n-\n-\n-    #\n-    # Fix  18:  No_Double_Slash\n+    # Fix  24:  No_Double_Slash\n     #\n-    if ( test -n \"`egrep '(^|[^:])//[^\\\"*]' ${file}`\" -a \\\n-              '('  -z \"`echo ${file} | egrep '(CC|cxx|\\+\\+)/'`\" ')'\n-       ) > /dev/null 2>&1 ; then\n+    if ${FIXTESTS} ${file} double_slash\n+    then\n     fixlist=\"${fixlist}\n       no_double_slash\"\n     if [ ! -r ${DESTFILE} ]\n     then infile=${file}\n     else infile=${DESTFILE} ; fi \n-\n-    sed -e 's,^//.*$,,' \\\n-        -e 's,\\(/\\*.*\\)//\\(.*\\*/\\),\\1/ /\\2,g' \\\n-        -e 's,\\([^:]\\)//[^\"].*$,\\1,' \\\n-          < $infile > ${DESTDIR}/fixinc.tmp\n+    ${FIXFIXES} ${file} no_double_slash < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of c_test 'if'\n \n \n     #\n-    # Fix  19:  Ecd_Cursor\n+    # Fix  25:  Ecd_Cursor\n     #\n     case \"${file}\" in ./sunwindow/win_lock.h | \\\n \t./sunwindow/win_cursor.h )\n@@ -872,7 +943,7 @@ _EOF_\n \n \n     #\n-    # Fix  20:  Sco5_Stat_Wrappers\n+    # Fix  26:  Sco5_Stat_Wrappers\n     #\n     case \"${file}\" in ./sys/stat.h )\n     case \"$target_canonical\" in i*86-*-sco3.2v5* )\n@@ -903,7 +974,7 @@ extern \"C\"\\\n \n \n     #\n-    # Fix  21:  End_Else_Label\n+    # Fix  27:  End_Else_Label\n     #\n     if ( test -n \"`egrep '^[ \t]*#[ \t]*(else|endif)[ \t]+([!-.0-z\\\\{\\\\|\\\\}\\\\~]|/[^\\\\*])' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n@@ -926,11 +997,11 @@ s%^\\([ \t]*#[ \t]*endif\\)[ \t][ \t]*[^/* \t].*%\\1%' \\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n \n \n     #\n-    # Fix  22:  Hp_Inline\n+    # Fix  28:  Hp_Inline\n     #\n     case \"${file}\" in ./sys/spinlock.h )\n     if ( test -n \"`egrep 'include.*\\\"\\\\.\\\\./machine/' ${file}`\"\n@@ -946,13 +1017,13 @@ s%^\\([ \t]*#[ \t]*endif\\)[ \t][ \t]*[^/* \t].*%\\1%' \\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  23:  Hp_Sysfile\n+    # Fix  29:  Hp_Sysfile\n     #\n     case \"${file}\" in ./sys/file.h )\n     if ( test -n \"`egrep 'HPUX_SOURCE' ${file}`\"\n@@ -967,17 +1038,18 @@ s%^\\([ \t]*#[ \t]*endif\\)[ \t][ \t]*[^/* \t].*%\\1%' \\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  24:  Cxx_Unready\n+    # Fix  30:  Cxx_Unready\n     #\n     case \"${file}\" in ./sys/mman.h | \\\n \t./rpc/types.h )\n-    if ( test -z \"`egrep '\\\"C\\\"|__BEGIN_DECLS' ${file}`\"\n+    if ( test  -a \\\n+              -z \"`egrep '\\\"C\\\"|__BEGIN_DECLS' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       cxx_unready\"\n@@ -999,13 +1071,13 @@ extern \"C\" {\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  25:  Hpux_Maxint\n+    # Fix  31:  Hpux_Maxint\n     #\n     case \"${file}\" in ./sys/param.h )\n     fixlist=\"${fixlist}\n@@ -1028,7 +1100,7 @@ extern \"C\" {\\\n \n \n     #\n-    # Fix  26:  Hpux_Systime\n+    # Fix  32:  Hpux_Systime\n     #\n     case \"${file}\" in ./sys/time.h )\n     if ( test -n \"`egrep '^extern struct sigevent;' ${file}`\"\n@@ -1043,13 +1115,13 @@ extern \"C\" {\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  27:  Interactv_Add1\n+    # Fix  33:  Interactv_Add1\n     #\n     case \"${file}\" in ./stdio.h | \\\n \t./math.h | \\\n@@ -1070,13 +1142,13 @@ extern \"C\" {\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of test expression 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  28:  Interactv_Add2\n+    # Fix  34:  Interactv_Add2\n     #\n     case \"${file}\" in ./math.h )\n     if ( test '('  -d /etc/conf/kconfig.d ')' -a \\\n@@ -1092,13 +1164,13 @@ extern \"C\" {\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of test expression 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  29:  Interactv_Add3\n+    # Fix  35:  Interactv_Add3\n     #\n     case \"${file}\" in ./sys/limits.h )\n     if ( test '('  -d /etc/conf/kconfig.d ')' -a \\\n@@ -1115,13 +1187,13 @@ extern \"C\" {\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of test expression 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  30:  Io_Def_Quotes\n+    # Fix  36:  Io_Def_Quotes\n     #\n     if ( test -n \"`egrep '[ \t]*[ \t](_|DES)IO[A-Z]*[ \t]*\\\\( *[^,'\\\\'']' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n@@ -1138,11 +1210,11 @@ extern \"C\" {\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n \n \n     #\n-    # Fix  31:  Ioctl_Fix_Ctrl\n+    # Fix  37:  Ioctl_Fix_Ctrl\n     #\n     if ( test -n \"`egrep 'CTRL[ \t]*\\\\(' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n@@ -1161,11 +1233,11 @@ extern \"C\" {\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n \n \n     #\n-    # Fix  32:  Ip_Missing_Semi\n+    # Fix  38:  Ip_Missing_Semi\n     #\n     case \"${file}\" in ./netinet/ip.h )\n     fixlist=\"${fixlist}\n@@ -1183,7 +1255,7 @@ extern \"C\" {\\\n \n \n     #\n-    # Fix  33:  Irix_Multiline_Cmnt\n+    # Fix  39:  Irix_Multiline_Cmnt\n     #\n     case \"${file}\" in ./sys/types.h )\n     fixlist=\"${fixlist}\n@@ -1202,7 +1274,7 @@ extern \"C\" {\\\n \n \n     #\n-    # Fix  34:  Irix_Sockaddr\n+    # Fix  40:  Irix_Sockaddr\n     #\n     case \"${file}\" in ./rpc/auth.h )\n     if ( test -n \"`egrep 'authdes_create.*struct sockaddr' ${file}`\"\n@@ -1219,13 +1291,13 @@ struct sockaddr;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  35:  Irix_Struct__File\n+    # Fix  41:  Irix_Struct__File\n     #\n     case \"${file}\" in ./rpc/xdr.h )\n     fixlist=\"${fixlist}\n@@ -1245,7 +1317,7 @@ struct __file_s;\n \n \n     #\n-    # Fix  36:  Irix_Asm_Apostrophe\n+    # Fix  42:  Irix_Asm_Apostrophe\n     #\n     case \"${file}\" in ./sys/asm.h )\n     if ( test -n \"`egrep '^[ \t]*#.*[Ww]e'\\\\''re' ${file}`\"\n@@ -1260,13 +1332,13 @@ struct __file_s;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  37:  Isc_Fmod\n+    # Fix  43:  Isc_Fmod\n     #\n     case \"${file}\" in ./math.h )\n     if ( test -n \"`egrep 'fmod\\\\(double\\\\)' ${file}`\"\n@@ -1281,13 +1353,13 @@ struct __file_s;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  38:  Motorola_Nested\n+    # Fix  44:  Motorola_Nested\n     #\n     case \"${file}\" in ./limits.h | \\\n \t./sys/limits.h )\n@@ -1310,7 +1382,7 @@ struct __file_s;\n \n \n     #\n-    # Fix  39:  Isc_Sys_Limits\n+    # Fix  45:  Isc_Sys_Limits\n     #\n     case \"${file}\" in ./sys/limits.h )\n     if ( test -n \"`egrep 'CHILD_MAX' ${file}`\"\n@@ -1326,13 +1398,13 @@ struct __file_s;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  40:  Kandr_Concat\n+    # Fix  46:  Kandr_Concat\n     #\n     case \"${file}\" in ./sparc/asm_linkage.h | \\\n \t./sun3/asm_linkage.h | \\\n@@ -1364,17 +1436,18 @@ struct __file_s;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  41:  Limits_Ifndefs\n+    # Fix  47:  Limits_Ifndefs\n     #\n     case \"${file}\" in ./limits.h | \\\n \t./sys/limits.h )\n-    if ( test -z \"`egrep 'ifndef[ \t]+FLT_MIN' ${file}`\"\n+    if ( test  -a \\\n+              -z \"`egrep 'ifndef[ \t]+FLT_MIN' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       limits_ifndefs\"\n@@ -1422,13 +1495,13 @@ struct __file_s;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  42:  Lynx_Void_Int\n+    # Fix  48:  Lynx_Void_Int\n     #\n     case \"${file}\" in ./curses.h )\n     if ( test -n \"`egrep '#[ \t]*define[ \t]+void[ \t]+int' ${file}`\"\n@@ -1443,13 +1516,13 @@ struct __file_s;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  43:  Lynxos_Fcntl_Proto\n+    # Fix  49:  Lynxos_Fcntl_Proto\n     #\n     case \"${file}\" in ./fcntl.h )\n     if ( test -n \"`egrep 'fcntl.*\\\\(int, int, int\\\\)' ${file}`\"\n@@ -1464,13 +1537,13 @@ struct __file_s;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  44:  M88k_Bad_Hypot_Opt\n+    # Fix  50:  M88k_Bad_Hypot_Opt\n     #\n     case \"${file}\" in ./math.h )\n     case \"$target_canonical\" in m88k-motorola-sysv3* )\n@@ -1505,7 +1578,7 @@ static __inline__ double fake_hypot (x, y)\\\n \n \n     #\n-    # Fix  45:  M88k_Bad_S_If\n+    # Fix  51:  M88k_Bad_S_If\n     #\n     case \"${file}\" in ./sys/stat.h )\n     case \"$target_canonical\" in m88k-*-sysv3* )\n@@ -1522,19 +1595,20 @@ static __inline__ double fake_hypot (x, y)\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for machine type test\n     esac\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  46:  M88k_Multi_Incl\n+    # Fix  52:  M88k_Multi_Incl\n     #\n     case \"${file}\" in ./time.h )\n     case \"$target_canonical\" in m88k-tektronix-sysv3* )\n-    if ( test -z \"`egrep '#ifndef' ${file}`\"\n+    if ( test  -a \\\n+              -z \"`egrep '#ifndef' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       m88k_multi_incl\"\n@@ -1555,15 +1629,15 @@ static __inline__ double fake_hypot (x, y)\\\n     then continue ; fi \n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n     ;; # case end for machine type test\n     esac\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  47:  Machine_Name\n+    # Fix  53:  Machine_Name\n     #\n     if ( test -n \"`egrep '^#[ \t]*(if|elif).*[^a-zA-Z0-9_](_*[MSRrhim]|[Mbimnpstuv])[a-zA-Z0-9_]' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n@@ -1611,11 +1685,11 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n \n \n     #\n-    # Fix  48:  Math_Exception\n+    # Fix  54:  Math_Exception\n     #\n     case \"${file}\" in ./math.h )\n     if ( test -n \"`egrep 'struct exception' ${file}`\"\n@@ -1649,13 +1723,13 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  49:  Math_Gcc_Ifndefs\n+    # Fix  55:  Math_Gcc_Ifndefs\n     #\n     case \"${file}\" in ./math.h )\n     fixlist=\"${fixlist}\n@@ -1689,7 +1763,7 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n \n \n     #\n-    # Fix  50:  Nested_Comment\n+    # Fix  56:  Nested_Comment\n     #\n     case \"${file}\" in ./rpc/rpc.h )\n     fixlist=\"${fixlist}\n@@ -1707,7 +1781,7 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n \n \n     #\n-    # Fix  51:  News_Os_Recursion\n+    # Fix  57:  News_Os_Recursion\n     #\n     case \"${file}\" in ./stdlib.h )\n     if ( test -n \"`egrep '#include <stdlib.h>' ${file}`\"\n@@ -1727,13 +1801,13 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  52:  Next_Math_Prefix\n+    # Fix  58:  Next_Math_Prefix\n     #\n     case \"${file}\" in ./ansi/math.h )\n     if ( test -n \"`egrep '^extern.*double.*__const__.*' ${file}`\"\n@@ -1752,13 +1826,13 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  53:  Next_Template\n+    # Fix  59:  Next_Template\n     #\n     case \"${file}\" in ./bsd/libc.h )\n     if ( test -n \"`egrep 'template' ${file}`\"\n@@ -1774,13 +1848,13 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  54:  Next_Volitile\n+    # Fix  60:  Next_Volitile\n     #\n     case \"${file}\" in ./ansi/stdlib.h )\n     if ( test -n \"`egrep 'volatile' ${file}`\"\n@@ -1796,13 +1870,13 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  55:  Next_Wait_Union\n+    # Fix  61:  Next_Wait_Union\n     #\n     case \"${file}\" in ./sys/wait.h )\n     if ( test -n \"`egrep 'wait\\\\(union wait' ${file}`\"\n@@ -1817,13 +1891,13 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  56:  Nodeent_Syntax\n+    # Fix  62:  Nodeent_Syntax\n     #\n     case \"${file}\" in ./netdnet/dnetdb.h )\n     fixlist=\"${fixlist}\n@@ -1841,7 +1915,7 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n \n \n     #\n-    # Fix  57:  Osf_Namespace_A\n+    # Fix  63:  Osf_Namespace_A\n     #\n     case \"${file}\" in ./reg_types.h | \\\n \t./sys/lc_core.h )\n@@ -1862,13 +1936,13 @@ s/\\\\+++fixinc_eol+++/\\\\/g\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of test expression 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  58:  Osf_Namespace_B\n+    # Fix  64:  Osf_Namespace_B\n     #\n     case \"${file}\" in ./regex.h )\n     if ( test '('  -r reg_types.h ')' -a \\\n@@ -1890,13 +1964,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of test expression 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  59:  Pthread_Page_Size\n+    # Fix  65:  Pthread_Page_Size\n     #\n     case \"${file}\" in ./pthread.h )\n     if ( test -n \"`egrep '^int __page_size' ${file}`\"\n@@ -1911,13 +1985,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  60:  Read_Ret_Type\n+    # Fix  66:  Read_Ret_Type\n     #\n     case \"${file}\" in ./stdio.h )\n     if ( test -n \"`egrep 'extern int\t.*, fread\\\\(\\\\), fwrite\\\\(\\\\)' ${file}`\"\n@@ -1933,13 +2007,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  61:  Rs6000_Double\n+    # Fix  67:  Rs6000_Double\n     #\n     case \"${file}\" in ./math.h )\n     if ( test -n \"`egrep '[^a-zA-Z_]class\\\\(' ${file}`\"\n@@ -1959,13 +2033,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  62:  Rs6000_Fchmod\n+    # Fix  68:  Rs6000_Fchmod\n     #\n     case \"${file}\" in ./sys/stat.h )\n     if ( test -n \"`egrep 'fchmod\\\\(char' ${file}`\"\n@@ -1980,13 +2054,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  63:  Rs6000_Param\n+    # Fix  69:  Rs6000_Param\n     #\n     case \"${file}\" in ./stdio.h | \\\n \t./unistd.h )\n@@ -2005,7 +2079,7 @@ typedef __regmatch_t\tregmatch_t;\n \n \n     #\n-    # Fix  64:  Sony_Include\n+    # Fix  70:  Sony_Include\n     #\n     case \"${file}\" in ./machine/machparam.h )\n     if ( test -n \"`egrep '\\\"\\\\.\\\\./machine/endian.h\\\"' ${file}`\"\n@@ -2020,13 +2094,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  65:  Statsswtch\n+    # Fix  71:  Statsswtch\n     #\n     case \"${file}\" in ./rpcsvc/rstat.h )\n     if ( test -n \"`egrep 'boottime$' ${file}`\"\n@@ -2041,13 +2115,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  66:  Stdio_Va_List\n+    # Fix  72:  Stdio_Va_List\n     #\n     case \"${file}\" in ./stdio.h )\n     fixlist=\"${fixlist}\n@@ -2064,7 +2138,7 @@ typedef __regmatch_t\tregmatch_t;\n \n   sed -e 's@ va_list @ __gnuc_va_list @' \\\n       -e 's@ va_list)@ __gnuc_va_list)@' \\\n-      -e 's@ _BSD_VA_LIST_))@ __gnuc_va_list))@' \\\n+      -e 's@ _BSD_VA_LIST_));@ __gnuc_va_list));@' \\\n       -e 's@ _VA_LIST_));@ __gnuc_va_list));@' \\\n       -e 's@ va_list@ __va_list__@' \\\n       -e 's@\\*va_list@*__va_list__@' \\\n@@ -2086,7 +2160,7 @@ typedef __regmatch_t\tregmatch_t;\n \n \n     #\n-    # Fix  67:  Sun_Bogus_Ifdef\n+    # Fix  73:  Sun_Bogus_Ifdef\n     #\n     case \"${file}\" in ./hsfs/hsfs_spec.h | \\\n \t./hsfs/iso_spec.h )\n@@ -2102,13 +2176,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  68:  Sun_Bogus_Ifdef_Sun4c\n+    # Fix  74:  Sun_Bogus_Ifdef_Sun4c\n     #\n     case \"${file}\" in ./hsfs/hsnode.h )\n     if ( test -n \"`egrep '#ifdef __i386__ || __sun4c__' ${file}`\"\n@@ -2123,13 +2197,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  69:  Sun_Catmacro\n+    # Fix  75:  Sun_Catmacro\n     #\n     case \"${file}\" in ./pixrect/memvar.h )\n     if ( test -n \"`egrep '^#define[ \t]+CAT\\\\(a,b\\\\)' ${file}`\"\n@@ -2151,13 +2225,13 @@ typedef __regmatch_t\tregmatch_t;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  70:  Sun_Malloc\n+    # Fix  76:  Sun_Malloc\n     #\n     case \"${file}\" in ./malloc.h )\n     fixlist=\"${fixlist}\n@@ -2178,7 +2252,7 @@ typedef __regmatch_t\tregmatch_t;\n \n \n     #\n-    # Fix  71:  Sun_Memcpy\n+    # Fix  77:  Sun_Memcpy\n     #\n     case \"${file}\" in ./memory.h )\n     if ( test -n \"`egrep '/\\\\*\t@\\\\(#\\\\)(head/memory.h\t50.1\t |memory\\\\.h 1\\\\.[2-4] 8./../.. SMI; from S5R2 1\\\\.2\t)\\\\*/' ${file}`\"\n@@ -2214,13 +2288,13 @@ extern int memcmp();\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  72:  Sun_Rusers_Semi\n+    # Fix  78:  Sun_Rusers_Semi\n     #\n     case \"${file}\" in ./rpcsvc/rusers.h )\n     if ( test -n \"`egrep '_cnt$' ${file}`\"\n@@ -2235,13 +2309,13 @@ extern int memcmp();\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  73:  Sun_Signal\n+    # Fix  79:  Sun_Signal\n     #\n     case \"${file}\" in ./sys/signal.h | \\\n \t./signal.h )\n@@ -2264,13 +2338,13 @@ void\t(*signal(...))(...);\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  74:  Sun_Auth_Proto\n+    # Fix  80:  Sun_Auth_Proto\n     #\n     case \"${file}\" in ./rpc/auth.h | \\\n \t./rpc/clnt.h | \\\n@@ -2293,13 +2367,13 @@ void\t(*signal(...))(...);\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  75:  Sunos_Matherr_Decl\n+    # Fix  81:  Sunos_Matherr_Decl\n     #\n     case \"${file}\" in ./math.h )\n     fixlist=\"${fixlist}\n@@ -2320,7 +2394,7 @@ struct exception;\n \n \n     #\n-    # Fix  76:  Sunos_Strlen\n+    # Fix  82:  Sunos_Strlen\n     #\n     case \"${file}\" in ./strings.h )\n     fixlist=\"${fixlist}\n@@ -2338,7 +2412,7 @@ struct exception;\n \n \n     #\n-    # Fix  77:  Systypes\n+    # Fix  83:  Systypes\n     #\n     case \"${file}\" in ./sys/types.h | \\\n \t./stdlib.h | \\\n@@ -2386,16 +2460,18 @@ typedef __SIZE_TYPE__ size_t;\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  78:  Systypes_For_Aix\n+    # Fix  84:  Systypes_For_Aix\n     #\n     case \"${file}\" in ./sys/types.h )\n-    if ( test -n \"`egrep 'typedef[ \t][ \t]*[A-Za-z_][ \tA-Za-z_]*[ \t]size_t' ${file}`\" -a \\\n+    if ( test -n \"`egrep 'typedef[ \t][ \t]*[A-Za-z_][ \tA-Za-z_]*[ \t]size_t' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    if ( test  -a \\\n               -z \"`egrep '_GCC_SIZE_T' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n@@ -2414,13 +2490,14 @@ typedef __SIZE_TYPE__ size_t;\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  79:  Sysv68_String\n+    # Fix  85:  Sysv68_String\n     #\n     case \"${file}\" in ./string.h )\n     fixlist=\"${fixlist}\n@@ -2448,7 +2525,7 @@ extern unsigned int\\\n \n \n     #\n-    # Fix  80:  Sysz_Stdlib_For_Sun\n+    # Fix  86:  Sysz_Stdlib_For_Sun\n     #\n     case \"${file}\" in ./stdlib.h )\n     fixlist=\"${fixlist}\n@@ -2479,7 +2556,7 @@ extern unsigned int\\\n \n \n     #\n-    # Fix  81:  Sysz_Stdtypes_For_Sun\n+    # Fix  87:  Sysz_Stdtypes_For_Sun\n     #\n     case \"${file}\" in ./sys/stdtypes.h )\n     fixlist=\"${fixlist}\n@@ -2517,7 +2594,7 @@ extern unsigned int\\\n \n \n     #\n-    # Fix  82:  Tinfo_Cplusplus\n+    # Fix  88:  Tinfo_Cplusplus\n     #\n     case \"${file}\" in ./tinfo.h )\n     fixlist=\"${fixlist}\n@@ -2535,7 +2612,7 @@ extern unsigned int\\\n \n \n     #\n-    # Fix  83:  Ultrix_Ansi_Compat\n+    # Fix  89:  Ultrix_Ansi_Compat\n     #\n     case \"${file}\" in ./ansi_compat.h )\n     if ( test -n \"`egrep 'ULTRIX' ${file}`\"\n@@ -2553,13 +2630,13 @@ extern unsigned int\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  84:  Ultrix_Fix_Fixproto\n+    # Fix  90:  Ultrix_Fix_Fixproto\n     #\n     case \"${file}\" in ./sys/utsname.h )\n     if ( test -n \"`egrep 'ULTRIX' ${file}`\"\n@@ -2576,13 +2653,13 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  85:  Ultrix_Atof_Param\n+    # Fix  91:  Ultrix_Atof_Param\n     #\n     case \"${file}\" in ./math.h )\n     fixlist=\"${fixlist}\n@@ -2604,7 +2681,7 @@ struct utsname;\n \n \n     #\n-    # Fix  86:  Ultrix_Const\n+    # Fix  92:  Ultrix_Const\n     #\n     case \"${file}\" in ./stdio.h )\n     fixlist=\"${fixlist}\n@@ -2630,7 +2707,7 @@ struct utsname;\n \n \n     #\n-    # Fix  87:  Ultrix_Ifdef\n+    # Fix  93:  Ultrix_Ifdef\n     #\n     case \"${file}\" in ./sys/file.h )\n     if ( test -n \"`egrep '#ifdef KERNEL' ${file}`\"\n@@ -2645,13 +2722,13 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  88:  Ultrix_Nested_Cmnt\n+    # Fix  94:  Ultrix_Nested_Cmnt\n     #\n     case \"${file}\" in ./rpc/svc.h )\n     fixlist=\"${fixlist}\n@@ -2669,7 +2746,7 @@ struct utsname;\n \n \n     #\n-    # Fix  89:  Ultrix_Static\n+    # Fix  95:  Ultrix_Static\n     #\n     case \"${file}\" in ./machine/cpu.h )\n     if ( test -n \"`egrep '#include \\\"r[34]_cpu' ${file}`\"\n@@ -2686,15 +2763,17 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  90:  Undefine_Null\n+    # Fix  96:  Undefine_Null\n     #\n-    if ( test -n \"`egrep '^#[ \t]*define[ \t]*[ \t]NULL[ \t]' ${file}`\" -a \\\n+    if ( test -n \"`egrep '^#[ \t]*define[ \t]*[ \t]NULL[ \t]' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    if ( test  -a \\\n               -z \"`egrep '#[ \t]*(ifn|un)def[ \t]*[ \t]NULL($|[ \t])' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n@@ -2709,11 +2788,12 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n+    fi # end of select 'if'\n \n \n     #\n-    # Fix  91:  Va_I960_Macro\n+    # Fix  97:  Va_I960_Macro\n     #\n     case \"${file}\" in ./arch/i960/archI960.h )\n     if ( test -n \"`egrep '__(vsiz|vali|vpad|alignof__)' ${file}`\"\n@@ -2731,13 +2811,13 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  92:  Void_Null\n+    # Fix  98:  Void_Null\n     #\n     case \"${file}\" in ./curses.h | \\\n \t./dbm.h | \\\n@@ -2762,13 +2842,13 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  93:  Vxworks_Gcc_Problem\n+    # Fix  99:  Vxworks_Gcc_Problem\n     #\n     case \"${file}\" in ./types/vxTypesBase.h )\n     if ( test -n \"`egrep '__GNUC_TYPEOF_FEATURE_BROKEN_USE_DEFAULT_UNTIL_FIXED__' ${file}`\"\n@@ -2804,13 +2884,13 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  94:  Vxworks_Needs_Vxtypes\n+    # Fix 100:  Vxworks_Needs_Vxtypes\n     #\n     case \"${file}\" in ./time.h )\n     if ( test -n \"`egrep 'uint_t[ \t][ \t]*_clocks_per_sec' ${file}`\"\n@@ -2825,17 +2905,18 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  95:  Vxworks_Needs_Vxworks\n+    # Fix 101:  Vxworks_Needs_Vxworks\n     #\n     case \"${file}\" in ./sys/stat.h )\n-    if ( test -n \"`egrep '#[ \t]define[ \t][ \t]*__INCstath' ${file}`\" -a \\\n-              '('  -r types/vxTypesOld.h ')' -a \\\n+    if ( test -n \"`egrep '#[ \t]define[ \t][ \t]*__INCstath' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    if ( test '('  -r types/vxTypesOld.h ')' -a \\\n               '('  -n \"`egrep '#include' $file`\" ')' -a \\\n               '('  -n \"`egrep ULONG $file`\" ')'\n        ) > /dev/null 2>&1 ; then\n@@ -2851,17 +2932,19 @@ struct utsname;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of test expression 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  96:  Vxworks_Time\n+    # Fix 102:  Vxworks_Time\n     #\n     case \"${file}\" in ./time.h )\n-    if ( test -n \"`egrep 'VOIDFUNCPTR' ${file}`\" -a \\\n-              '('  -r vxWorks.h ')'\n+    if ( test -n \"`egrep 'VOIDFUNCPTR' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n+    if ( test '('  -r vxWorks.h ')'\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       vxworks_time\"\n@@ -2883,16 +2966,18 @@ typedef void (*__gcc_VOIDFUNCPTR) ();\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of test expression 'if'\n+    fi # end of select 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  97:  X11_Class\n+    # Fix 103:  X11_Class\n     #\n     case \"${file}\" in ./X11/ShellP.h )\n-    if ( test -z \"`egrep '__cplusplus' ${file}`\"\n+    if ( test  -a \\\n+              -z \"`egrep '__cplusplus' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       x11_class\"\n@@ -2911,16 +2996,17 @@ typedef void (*__gcc_VOIDFUNCPTR) ();\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  98:  X11_Class_Usage\n+    # Fix 104:  X11_Class_Usage\n     #\n     case \"${file}\" in ./Xm/BaseClassI.h )\n-    if ( test -z \"`egrep '__cplusplus' ${file}`\"\n+    if ( test  -a \\\n+              -z \"`egrep '__cplusplus' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       x11_class_usage\"\n@@ -2932,16 +3018,17 @@ typedef void (*__gcc_VOIDFUNCPTR) ();\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix  99:  X11_New\n+    # Fix 105:  X11_New\n     #\n     case \"${file}\" in ./Xm/Traversal.h )\n-    if ( test -z \"`egrep '__cplusplus' ${file}`\"\n+    if ( test  -a \\\n+              -z \"`egrep '__cplusplus' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       x11_new\"\n@@ -2961,13 +3048,13 @@ typedef void (*__gcc_VOIDFUNCPTR) ();\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n+    fi # end of bypass 'if'\n     ;; # case end for file name test\n     esac\n \n \n     #\n-    # Fix 100:  X11_Sprintf\n+    # Fix 106:  X11_Sprintf\n     #\n     case \"${file}\" in ./X11*/Xmu.h )\n     fixlist=\"${fixlist}\n@@ -2984,165 +3071,6 @@ extern char *\tsprintf();\\\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n     ;; # case end for file name test\n     esac\n-\n-\n-    #\n-    # Fix 101:  Zzz_Ki_Iface\n-    #\n-    case \"${file}\" in ./sys/ki_iface.h )\n-    if ( test -n \"`egrep 'These definitions are for HP Internal developers' ${file}`\"\n-       ) > /dev/null 2>&1 ; then\n-    fixlist=\"${fixlist}\n-      zzz_ki_iface\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ( echo \"Removing incorrect fix to <$file>\" >&2\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\n-cat > /dev/null ) < $infile > ${DESTDIR}/fixinc.tmp\n-\n-    #  Shell scripts have the potential of removing the output\n-    #  We interpret that to mean the file is not to be altered\n-    #\n-    if test ! -f ${DESTDIR}/fixinc.tmp\n-    then continue ; fi \n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n-    ;; # case end for file name test\n-    esac\n-\n-\n-    #\n-    # Fix 102:  Zzz_Ki\n-    #\n-    case \"${file}\" in ./sys/ki.h )\n-    if ( test -n \"`egrep '11.00 HP-UX LP64' ${file}`\"\n-       ) > /dev/null 2>&1 ; then\n-    fixlist=\"${fixlist}\n-      zzz_ki\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ( echo \"Removing incorrect fix to <$file>\" >&2\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\n-cat > /dev/null ) < $infile > ${DESTDIR}/fixinc.tmp\n-\n-    #  Shell scripts have the potential of removing the output\n-    #  We interpret that to mean the file is not to be altered\n-    #\n-    if test ! -f ${DESTDIR}/fixinc.tmp\n-    then continue ; fi \n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n-    ;; # case end for file name test\n-    esac\n-\n-\n-    #\n-    # Fix 103:  Zzz_Ki_Calls\n-    #\n-    case \"${file}\" in ./sys/ki_calls.h )\n-    if ( test -n \"`egrep 'kthread_create_caller_t' ${file}`\"\n-       ) > /dev/null 2>&1 ; then\n-    fixlist=\"${fixlist}\n-      zzz_ki_calls\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ( echo \"Removing incorrect fix to <$file>\" >&2\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\n-cat > /dev/null ) < $infile > ${DESTDIR}/fixinc.tmp\n-\n-    #  Shell scripts have the potential of removing the output\n-    #  We interpret that to mean the file is not to be altered\n-    #\n-    if test ! -f ${DESTDIR}/fixinc.tmp\n-    then continue ; fi \n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n-    ;; # case end for file name test\n-    esac\n-\n-\n-    #\n-    # Fix 104:  Zzz_Ki_Defs\n-    #\n-    case \"${file}\" in ./sys/ki_defs.h )\n-    if ( test -n \"`egrep 'Kernel Instrumentation Definitions' ${file}`\"\n-       ) > /dev/null 2>&1 ; then\n-    fixlist=\"${fixlist}\n-      zzz_ki_defs\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ( echo \"Removing incorrect fix to <$file>\" >&2\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\n-cat > /dev/null ) < $infile > ${DESTDIR}/fixinc.tmp\n-\n-    #  Shell scripts have the potential of removing the output\n-    #  We interpret that to mean the file is not to be altered\n-    #\n-    if test ! -f ${DESTDIR}/fixinc.tmp\n-    then continue ; fi \n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n-    ;; # case end for file name test\n-    esac\n-\n-\n-    #\n-    # Fix 105:  Zzz_Bad_Fixes\n-    #\n-    case \"${file}\" in ./sundev/ipi_error.h )\n-    fixlist=\"${fixlist}\n-      zzz_bad_fixes\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ( echo \"Removing incorrect fix to <$file>\" >&2\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\n-cat > /dev/null ) < $infile > ${DESTDIR}/fixinc.tmp\n-\n-    #  Shell scripts have the potential of removing the output\n-    #  We interpret that to mean the file is not to be altered\n-    #\n-    if test ! -f ${DESTDIR}/fixinc.tmp\n-    then continue ; fi \n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    ;; # case end for file name test\n-    esac\n-\n-\n-    #\n-    # Fix 106:  Zzz_Time\n-    #\n-    case \"${file}\" in ./sys/time.h )\n-    if ( test -n \"`egrep '11.0 and later representation of ki time' ${file}`\"\n-       ) > /dev/null 2>&1 ; then\n-    fixlist=\"${fixlist}\n-      zzz_time\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ( echo \"Removing incorrect fix to <$file>\" >&2\n-rm -f ${DESTFILE} ${DESTDIR}/fixinc.tmp\n-cat > /dev/null ) < $infile > ${DESTDIR}/fixinc.tmp\n-\n-    #  Shell scripts have the potential of removing the output\n-    #  We interpret that to mean the file is not to be altered\n-    #\n-    if test ! -f ${DESTDIR}/fixinc.tmp\n-    then continue ; fi \n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of selection 'if'\n-    ;; # case end for file name test\n-    esac\n     #  IF the output has been removed OR it is unchanged,\n     #  THEN ensure the output is gone\n     #  ELSE look for local directory include syntax"}, {"sha": "393f802aa8801cb6f2cf38c867dccaf8abec18df", "filename": "gcc/fixinc/inclhack.tpl", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Finclhack.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abc1f741e8c34c725524c985af7d509c68165ad/gcc%2Ffixinc%2Finclhack.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.tpl?ref=5abc1f741e8c34c725524c985af7d509c68165ad", "patch": "@@ -44,7 +44,10 @@ else\n     exit 1\n   }\n fi\n-\n+[=_IF PROGRAM _env ! =]\n+FIXTESTS=$PWD/fixinc/fixtests\n+FIXFIXES=$PWD/fixinc/fixfixes\n+[=_ENDIF=]\n # Define what target system we're fixing.\n #\n if test -r ./Makefile; then"}]}