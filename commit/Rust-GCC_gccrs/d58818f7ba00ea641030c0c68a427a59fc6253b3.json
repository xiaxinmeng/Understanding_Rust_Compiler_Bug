{"sha": "d58818f7ba00ea641030c0c68a427a59fc6253b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU4ODE4ZjdiYTAwZWE2NDEwMzBjMGM2OGE0MjdhNTlmYzYyNTNiMw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2011-10-10T20:34:20Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-10-10T20:34:20Z"}, "message": "re PR c++/48665 (type of const member function)\n\n\tPR c++/48665\n\t* cp-demangle.c (d_cv_qualifiers): If qualifiers are applied to a\n\tfunction type, change them to apply to the \"this\" parameter.\n\t* testsuite/demangle-expected: Add test case.\n\nFrom-SVN: r179772", "tree": {"sha": "4a566dbff6b04c89e85d40174e4517b0789d6853", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a566dbff6b04c89e85d40174e4517b0789d6853"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d58818f7ba00ea641030c0c68a427a59fc6253b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d58818f7ba00ea641030c0c68a427a59fc6253b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d58818f7ba00ea641030c0c68a427a59fc6253b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d58818f7ba00ea641030c0c68a427a59fc6253b3/comments", "author": null, "committer": null, "parents": [{"sha": "06fe026c0c95c93f138aec9c445b42cfc0295107", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06fe026c0c95c93f138aec9c445b42cfc0295107", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06fe026c0c95c93f138aec9c445b42cfc0295107"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "6859afa04c30f1eed79ab30c323efc6806f86d98", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d58818f7ba00ea641030c0c68a427a59fc6253b3/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d58818f7ba00ea641030c0c68a427a59fc6253b3/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=d58818f7ba00ea641030c0c68a427a59fc6253b3", "patch": "@@ -1,3 +1,10 @@\n+2011-10-10  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR c++/48665\n+\t* cp-demangle.c (d_cv_qualifiers): If qualifiers are applied to a\n+\tfunction type, change them to apply to the \"this\" parameter.\n+\t* testsuite/demangle-expected: Add test case.\n+\n 2011-09-28  Doug Evans  <dje@google.com>\n \n \t* timeval-utils.c: New file."}, {"sha": "c7afef01f6df210461bf10580281a10004286386", "filename": "libiberty/cp-demangle.c", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d58818f7ba00ea641030c0c68a427a59fc6253b3/libiberty%2Fcp-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d58818f7ba00ea641030c0c68a427a59fc6253b3/libiberty%2Fcp-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcp-demangle.c?ref=d58818f7ba00ea641030c0c68a427a59fc6253b3", "patch": "@@ -2294,8 +2294,10 @@ static struct demangle_component **\n d_cv_qualifiers (struct d_info *di,\n                  struct demangle_component **pret, int member_fn)\n {\n+  struct demangle_component **pstart;\n   char peek;\n \n+  pstart = pret;\n   peek = d_peek_char (di);\n   while (peek == 'r' || peek == 'V' || peek == 'K')\n     {\n@@ -2332,6 +2334,28 @@ d_cv_qualifiers (struct d_info *di,\n       peek = d_peek_char (di);\n     }\n \n+  if (!member_fn && peek == 'F')\n+    {\n+      while (pstart != pret)\n+\t{\n+\t  switch ((*pstart)->type)\n+\t    {\n+\t    case DEMANGLE_COMPONENT_RESTRICT:\n+\t      (*pstart)->type = DEMANGLE_COMPONENT_RESTRICT_THIS;\n+\t      break;\n+\t    case DEMANGLE_COMPONENT_VOLATILE:\n+\t      (*pstart)->type = DEMANGLE_COMPONENT_VOLATILE_THIS;\n+\t      break;\n+\t    case DEMANGLE_COMPONENT_CONST:\n+\t      (*pstart)->type = DEMANGLE_COMPONENT_CONST_THIS;\n+\t      break;\n+\t    default:\n+\t      break;\n+\t    }\n+\t  pstart = &d_left (*pstart);\n+\t}\n+    }\n+\n   return pret;\n }\n "}, {"sha": "70abf681ae8fa254fcbc42afa3c43a87374eb79e", "filename": "libiberty/testsuite/demangle-expected", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d58818f7ba00ea641030c0c68a427a59fc6253b3/libiberty%2Ftestsuite%2Fdemangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d58818f7ba00ea641030c0c68a427a59fc6253b3/libiberty%2Ftestsuite%2Fdemangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fdemangle-expected?ref=d58818f7ba00ea641030c0c68a427a59fc6253b3", "patch": "@@ -4198,3 +4198,8 @@ f1<int>\n _Z3fooi._omp_cpyfn.6\n foo(int) [clone ._omp_cpyfn.6]\n foo\n+#\n+--format=gnu-v3 --no-params\n+_Z1fIKFvvES0_Evv\n+void f<void () const, void ()>()\n+f<void () const, void ()>"}]}