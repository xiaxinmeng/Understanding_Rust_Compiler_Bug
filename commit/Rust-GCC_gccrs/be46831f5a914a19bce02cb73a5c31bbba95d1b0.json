{"sha": "be46831f5a914a19bce02cb73a5c31bbba95d1b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmU0NjgzMWY1YTkxNGExOWJjZTAyY2I3M2E1YzMxYmJiYTk1ZDFiMA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2011-01-15T15:44:56Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2011-01-15T15:44:56Z"}, "message": "re PR tree-optimization/47276 (ICE in function_and_variable_visibility, at ipa.c:857 during compiling glibc.)\n\n\tPR tree-optimization/47276 \n\t* ipa.c (function_and_variable_visibility): Do not try to mark alias\n\tdeclarations as needed.\n\t* gcc.dg/pr47276.c: New testcase.\n\nFrom-SVN: r168844", "tree": {"sha": "f0d2df8b9a10af944cde23619b915e72b462a63c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f0d2df8b9a10af944cde23619b915e72b462a63c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be46831f5a914a19bce02cb73a5c31bbba95d1b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be46831f5a914a19bce02cb73a5c31bbba95d1b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be46831f5a914a19bce02cb73a5c31bbba95d1b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be46831f5a914a19bce02cb73a5c31bbba95d1b0/comments", "author": null, "committer": null, "parents": [{"sha": "620437f2d4773ab2b42f4edebbd949577788ca86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/620437f2d4773ab2b42f4edebbd949577788ca86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/620437f2d4773ab2b42f4edebbd949577788ca86"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "610507b7c1fbf713174749da562473feafa87231", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=be46831f5a914a19bce02cb73a5c31bbba95d1b0", "patch": "@@ -1,3 +1,9 @@\n+2011-01-13  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimization/47276 \n+\t* ipa.c (function_and_variable_visibility): Do not try to mark alias\n+\tdeclarations as needed.\n+\n 2011-01-15  Martin Jambor  <mjambor@suse.cz>\n \n \t* common.opt (fdevirtualize): New flag."}, {"sha": "0320ded7a879b1a4842efc869a828424a97d0d66", "filename": "gcc/ipa.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2Fipa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2Fipa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa.c?ref=be46831f5a914a19bce02cb73a5c31bbba95d1b0", "patch": "@@ -847,6 +847,8 @@ function_and_variable_visibility (bool whole_program)\n       if ((node = cgraph_node_for_asm (p->target)) != NULL\n \t  && !DECL_EXTERNAL (node->decl))\n         {\n+\t  if (!node->analyzed)\n+\t    continue;\n \t  /* Weakrefs alias symbols from other compilation unit.  In the case\n \t     the destination of weakref became available because of LTO, we must\n \t     mark it as needed.  */"}, {"sha": "d95034fff44309dda03443df8c5de7d9a515a6a4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=be46831f5a914a19bce02cb73a5c31bbba95d1b0", "patch": "@@ -1,3 +1,8 @@\n+2011-01-13  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimization/47276 \n+\t* gcc.dg/pr47276.c: New testcase.\n+\n 2011-01-15  Giovanni Funchal  <gafunchal@gmail.com>\n \t    Jonathan Wakely  <jwakely.gcc@gmail.com>\n "}, {"sha": "ae1e81a0aa5ccb9b8aab55b7a11e2f6c3212be9a", "filename": "gcc/testsuite/gcc.dg/pr47276.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47276.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be46831f5a914a19bce02cb73a5c31bbba95d1b0/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47276.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47276.c?ref=be46831f5a914a19bce02cb73a5c31bbba95d1b0", "patch": "@@ -0,0 +1,30 @@\n+/* { dg-do compile } */\n+/* { dg-require-alias \"\" } */\n+extern void syslog (int __pri, __const char *__fmt, ...)\n+     __attribute__ ((__format__ (__printf__, 2, 3)));\n+extern void vsyslog (int __pri, __const char *__fmt, int __ap)\n+     __attribute__ ((__format__ (__printf__, 2, 0)));\n+void\n+__vsyslog(int pri, const char *fmt, int ap)\n+{\n+}\n+void\n+__syslog_chk(int pri, int flag, const char *fmt, ...)\n+{\n+}\n+void\n+__vsyslog_chk(int pri, int flag, const char *fmt, int ap)\n+{\n+}\n+extern __typeof (__vsyslog_chk) __EI___vsyslog_chk __asm__(\"\" \"__vsyslog_chk\"); extern __typeof (__vsyslog_chk) __EI___vsyslog_chk __attribute__((alias (\"\" \"__GI___vsyslog_chk\")));\n+void\n+__syslog(int pri, const char *fmt, ...)\n+{\n+}\n+extern __typeof (__syslog) syslog __attribute__ ((alias (\"__syslog\")));\n+extern __typeof (syslog) __EI_syslog __asm__(\"\" \"syslog\"); extern __typeof (syslog) __EI_syslog __attribute__((alias (\"\" \"__GI_syslog\")));\n+extern __typeof (__vsyslog) vsyslog __attribute__ ((alias (\"__vsyslog\")));\n+extern __typeof (vsyslog) __EI_vsyslog __asm__(\"\" \"vsyslog\"); extern __typeof (vsyslog) __EI_vsyslog __attribute__((alias (\"\" \"__GI_vsyslog\")));\n+extern __typeof (syslog) syslog __asm__ (\"\" \"__GI_syslog\") __attribute__ ((visibility (\"hidden\")));\n+extern __typeof (vsyslog) vsyslog __asm__ (\"\" \"__GI_vsyslog\") __attribute__ ((visibility (\"hidden\")));\n+extern __typeof (__vsyslog_chk) __vsyslog_chk __asm__ (\"\" \"__GI___vsyslog_chk\") __attribute__ ((visibility (\"hidden\")));"}]}