{"sha": "d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhlN2JmNDlhOGMyN2UxNjhmNjRlZGNhZjVlYTMwOGIyMTM0MGU3Mw==", "commit": {"author": {"name": "Kelvin Nilsen", "email": "kelvin@gcc.gnu.org", "date": "2018-06-20T20:06:51Z"}, "committer": {"name": "Kelvin Nilsen", "email": "kelvin@gcc.gnu.org", "date": "2018-06-20T20:06:51Z"}, "message": "rs6000-c.c (altivec_overloaded_builtins): Change behavior of vec_packsu (vector unsigned long long...\n\ngcc/ChangeLog:\n\n2018-06-20  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n\n\t* config/rs6000/rs6000-c.c (altivec_overloaded_builtins): Change\n\tbehavior of vec_packsu (vector unsigned long long, vector unsigned\n\tlong long) to match behavior of vec_packs with same signature.\n\ngcc/testsuite/ChangeLog:\n\n2018-06-20  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n\n\t* gcc.target/powerpc/builtins-1.c: Adjust dg directives to scan\n\tfor vpkudus in place of vpksdus.\n\t* gcc.target/powerpc/builtins-3-p8.c: Likewise.\n\nFrom-SVN: r261819", "tree": {"sha": "573b8645a01de889f7a8989373c8dd207d3a9855", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/573b8645a01de889f7a8989373c8dd207d3a9855"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/comments", "author": null, "committer": null, "parents": [{"sha": "e70359b3de997b4c582345ab7da8cccb253cc6d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e70359b3de997b4c582345ab7da8cccb253cc6d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e70359b3de997b4c582345ab7da8cccb253cc6d9"}], "stats": {"total": 24, "additions": 19, "deletions": 5}, "files": [{"sha": "46633a59bb34084bdef629acd49454f985c7928a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "patch": "@@ -1,3 +1,9 @@\n+2018-06-20  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n+\n+\t* config/rs6000/rs6000-c.c (altivec_overloaded_builtins): Change\n+\tbehavior of vec_packsu (vector unsigned long long, vector unsigned\n+\tlong long) to match behavior of vec_packs with same signature.\n+\n 2018-06-20  Chung-Lin Tang <cltang@codesourcery.com>\n \t    Thomas Schwinge <thomas@codesourcery.com>\n \t    Cesar Philippidis  <cesar@codesourcery.com>"}, {"sha": "06332f05d0a860ac13e14b5a74fd285630175d61", "filename": "gcc/config/rs6000/rs6000-c.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Fconfig%2Frs6000%2Frs6000-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Fconfig%2Frs6000%2Frs6000-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-c.c?ref=d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "patch": "@@ -2544,7 +2544,7 @@ const struct altivec_builtin_types altivec_overloaded_builtins[] = {\n     RS6000_BTI_unsigned_V8HI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n   { ALTIVEC_BUILTIN_VEC_PACKSU, P8V_BUILTIN_VPKSDUS,\n     RS6000_BTI_unsigned_V4SI, RS6000_BTI_V2DI, RS6000_BTI_V2DI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_PACKSU, P8V_BUILTIN_VPKSDUS,\n+  { ALTIVEC_BUILTIN_VEC_PACKSU, P8V_BUILTIN_VPKUDUS,\n     RS6000_BTI_unsigned_V4SI, RS6000_BTI_unsigned_V2DI, RS6000_BTI_unsigned_V2DI, 0 },\n   { ALTIVEC_BUILTIN_VEC_VPKSWUS, ALTIVEC_BUILTIN_VPKSWUS,\n     RS6000_BTI_unsigned_V8HI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },"}, {"sha": "0343e8e532490e282f0d01b4c113ebb4210e9fe6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "patch": "@@ -1,3 +1,9 @@\n+2018-06-20  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n+\n+\t* gcc.target/powerpc/builtins-1.c: Adjust dg directives to scan\n+\tfor vpkudus in place of vpksdus.\n+\t* gcc.target/powerpc/builtins-3-p8.c: Likewise.\n+\n 2018-06-20  Nathan Sidwell  <nathan@acm.org>\n \n \tPR c++/85634"}, {"sha": "8baa8029bd3911e8597a6a4dadf818593155c474", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-1.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-1.c?ref=d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "patch": "@@ -297,7 +297,7 @@ int main ()\n    vec_mul             mulld | mullw, mulhwu\n    vec_nor             xxlnor\n    vec_or              xxlor\n-   vec_packsu          vpksdus\n+   vec_packsu          vpkudus (matches twice due to -dp option)\n    vec_                perm vperm\n    vec_                round xvrdpi\n    vec_sel             xxsel\n@@ -335,7 +335,7 @@ int main ()\n /* { dg-final { scan-assembler-times \"xxlnor\" 6 } } */\n /* { dg-final { scan-assembler-times \"xxlor\" 11 { target { ilp32 } } } } */\n /* { dg-final { scan-assembler-times \"xxlor\" 7  { target { lp64 } } } } */\n-/* { dg-final { scan-assembler-times \"vpksdus\" 2 } } */\n+/* { dg-final { scan-assembler-times {\\mvpkudus\\M} 1 } } */\n /* { dg-final { scan-assembler-times \"vperm\" 4 } } */\n /* { dg-final { scan-assembler-times \"xvrdpi\" 2 } } */\n /* { dg-final { scan-assembler-times \"xxsel\" 10 } } */"}, {"sha": "94021818868146ab62e251225bef5d9d5181d609", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-3-p8.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e7bf49a8c27e168f64edcaf5ea308b21340e73/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p8.c?ref=d8e7bf49a8c27e168f64edcaf5ea308b21340e73", "patch": "@@ -219,6 +219,8 @@ test_neg_double (vector double x)\n      test_vui_packs_vull_vull                  1 vpkudus\n      test_vui_packs_vssi_vssi                  1 vpkshss\n      test_vsi_packsu_vssi_vssi                 1 vpkshus\n+     test_vsi_packsu_vsll_vsll                 1 vpksdus\n+     test_vsi_packsu_vull_vull                 1 vpkudus\n      test_unsigned_char_popcnt_signed_char     1 vpopcntb\n      test_unsigned_char_popcnt_unsigned_char   1 vpopcntb\n      test_unsigned_short_popcnt_signed_short   1 vpopcnth\n@@ -241,11 +243,11 @@ test_neg_double (vector double x)\n /* { dg-final { scan-assembler-times \"vcmpequd\" 1 } } */\n /* { dg-final { scan-assembler-times \"vpkudum\"  1 } } */\n /* { dg-final { scan-assembler-times \"vpksdss\"  1 } } */\n-/* { dg-final { scan-assembler-times \"vpkudus\"  1 } } */  \n+/* { dg-final { scan-assembler-times \"vpkudus\"  2 } } */  \n /* { dg-final { scan-assembler-times \"vpkuhus\"  2 } } */\n /* { dg-final { scan-assembler-times \"vpkshss\"  1 } } */  \n /* { dg-final { scan-assembler-times \"vpkshus\"  1 } } */  \n-/* { dg-final { scan-assembler-times \"vpksdus\"  2 } } */  \n+/* { dg-final { scan-assembler-times \"vpksdus\"  1 } } */  \n /* { dg-final { scan-assembler-times \"vpkuwus\"  2 } } */  \n /* { dg-final { scan-assembler-times \"vpopcntb\" 2 } } */\n /* { dg-final { scan-assembler-times \"vpopcnth\" 2 } } */"}]}