{"sha": "062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDYyYWI0NTk2ZDdiNjg0ZjM3ODFkYjFkNDg0ZTVhOWYxYzlmNWZkOQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-01-12T21:59:03Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-01-12T21:59:03Z"}, "message": "decl.c (cp_finish_decl): Improve error location.\n\n/cp\n2019-01-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* decl.c (cp_finish_decl): Improve error location.\n\t* decl2.c (grokfield): Likewise, improve two locations.\n\n/testsuite\n2019-01-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/cpp0x/pr62101.C: Test locations too.\n\t* g++.dg/inherit/pure1.C: Likewise.\n\nFrom-SVN: r267887", "tree": {"sha": "788579482f5b5a539dbbefb2267a9fd7b1e7311c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/788579482f5b5a539dbbefb2267a9fd7b1e7311c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/comments", "author": null, "committer": null, "parents": [{"sha": "8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d5d3edddf70a8683c10e000817e8d2cd5b8c974"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "32b2ab1f82efbf369e16ba65d681bc683908bf98", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "patch": "@@ -1,3 +1,8 @@\n+2019-01-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* decl.c (cp_finish_decl): Improve error location.\n+\t* decl2.c (grokfield): Likewise, improve two locations.\n+\n 2019-01-11  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/88692, c++/87882 - -Wredundant-move false positive with *this."}, {"sha": "6e75c3d3d93a29ff4cf0d145849571eb179e2000", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "patch": "@@ -7293,7 +7293,10 @@ cp_finish_decl (tree decl, tree init, bool init_const_expr_p,\n \t\t    synthesize_method (decl);\n \t\t}\n \t      else\n-\t\terror (\"function %q#D is initialized like a variable\", decl);\n+\t\terror_at (cp_expr_loc_or_loc (init,\n+\t\t\t\t\t      DECL_SOURCE_LOCATION (decl)),\n+\t\t\t  \"function %q#D is initialized like a variable\",\n+\t\t\t  decl);\n \t    }\n \t  /* else no initialization required.  */\n \t}"}, {"sha": "e4cf4e0a361caac390dcc323a39bb06dbe20b3c8", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "patch": "@@ -924,12 +924,14 @@ grokfield (const cp_declarator *declarator,\n \t  else\n \t    {\n \t      gcc_assert (TREE_CODE (TREE_TYPE (value)) == FUNCTION_TYPE);\n+\t      location_t iloc\n+\t\t= cp_expr_loc_or_loc (init, DECL_SOURCE_LOCATION (value));\n \t      if (friendp)\n-\t\terror (\"initializer specified for friend function %qD\",\n-\t\t       value);\n+\t\terror_at (iloc, \"initializer specified for friend \"\n+\t\t\t  \"function %qD\", value);\n \t      else\n-\t\terror (\"initializer specified for static member function %qD\",\n-\t\t       value);\n+\t\terror_at (iloc, \"initializer specified for static \"\n+\t\t\t  \"member function %qD\", value);\n \t    }\n \t}\n       else if (TREE_CODE (value) == FIELD_DECL)"}, {"sha": "6f781aed62ef2315df275236fb250c372645ee70", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "patch": "@@ -1,3 +1,8 @@\n+2019-01-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/cpp0x/pr62101.C: Test locations too.\n+\t* g++.dg/inherit/pure1.C: Likewise.\n+\n 2019-01-12  Paul Thomas  <pault@gcc.gnu.org>\n \n \t* gfortran.dg/ISO_Fortran_binding_2.f90 : Remove because of"}, {"sha": "5fc579c7661738094aa781437997c564824f691c", "filename": "gcc/testsuite/g++.dg/cpp0x/pr62101.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr62101.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/062ab4596d7b684f3781db1d484e5a9f1c9f5fd9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr62101.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr62101.C?ref=062ab4596d7b684f3781db1d484e5a9f1c9f5fd9", "patch": "@@ -3,7 +3,7 @@\n \n struct X\n {\n-  friend void g(X, int) = 0; // { dg-error \"initializer specified for friend function\" }\n+  friend void g(X, int) = 0; // { dg-error \"15:initializer specified for friend function\" }\n   friend void g(X, int) = default; // { dg-error \"cannot be defaulted\" }\n   // { dg-prune-output \"note\" }\n   friend void f(X, int) = delete;"}]}