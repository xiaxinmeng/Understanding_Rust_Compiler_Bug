{"sha": "b3e44629b84562454405c9b17c639e50c536e3b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNlNDQ2MjliODQ1NjI0NTQ0MDVjOWIxN2M2MzllNTBjNTM2ZTNiNg==", "commit": {"author": {"name": "Andi Kleen", "email": "ak@linux.intel.com", "date": "2012-09-08T17:26:07Z"}, "committer": {"name": "Andi Kleen", "email": "ak@gcc.gnu.org", "date": "2012-09-08T17:26:07Z"}, "message": "Add -fmem-report-wpa\n\nFor parallel LTO builds setting -fmem-report does not work very well\nbecause all the LTRANS phases dump it in parallel and typically interleave\nit to unreadability.\n\nSince usually the memory bottleneck is WPA add a flag to only dump\nthe memory report for that.\n\ngcc/:\n2012-09-08  Andi Kleen  <ak@linux.intel.com>\n\n\t* gcc/common.opt (-fmem-report-wpa): Add\n\t* gcc/doc/invoke.texi (-fmem-report-wpa): Document.\n\t* gcc/lto/lto.c (do_whole_program_analysis): Run mem_report\n\twhen mem_report_wpa is set.\n\nFrom-SVN: r191095", "tree": {"sha": "ec889e25fe873beef48915b755c2472a48624c8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec889e25fe873beef48915b755c2472a48624c8c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3e44629b84562454405c9b17c639e50c536e3b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e44629b84562454405c9b17c639e50c536e3b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3e44629b84562454405c9b17c639e50c536e3b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e44629b84562454405c9b17c639e50c536e3b6/comments", "author": null, "committer": null, "parents": [{"sha": "1a760de952fb4743c2f2c8664d08651e14acc936", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a760de952fb4743c2f2c8664d08651e14acc936", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a760de952fb4743c2f2c8664d08651e14acc936"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "10d93445d285c2c16d5f8353185dca7d98600ace", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3e44629b84562454405c9b17c639e50c536e3b6", "patch": "@@ -1,3 +1,10 @@\n+2012-09-08  Andi Kleen  <ak@linux.intel.com>\n+\n+\t* gcc/common.opt (-fmem-report-wpa): Add\n+\t* gcc/doc/invoke.texi (-fmem-report-wpa): Document.\n+\t* gcc/lto/lto.c (do_whole_program_analysis): Run mem_report\n+\twhen mem_report_wpa is set.\n+\n 2012-09-07  Anthony Green  <green@moxielogic.com>\n \n \t* config/moxie/moxie.c (moxie_expand_prologue): Optimize prologue"}, {"sha": "73eebf49157cd64fa6fcea406f11665a48034bce", "filename": "gcc/common.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=b3e44629b84562454405c9b17c639e50c536e3b6", "patch": "@@ -1470,6 +1470,10 @@ fmem-report\n Common Report Var(mem_report)\n Report on permanent memory allocation\n \n+fmem-report-wpa\n+Common Report Var(mem_report_wpa)\n+Report on permanent memory allocation in WPA only\n+\n ; This will attempt to merge constant section constants, if 1 only\n ; string constants and constants from constant pool, if 2 also constant\n ; variables."}, {"sha": "994e4db5fbfb0b1eb199702ad10c7ed56ee2891d", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=b3e44629b84562454405c9b17c639e50c536e3b6", "patch": "@@ -328,7 +328,7 @@ Objective-C and Objective-C++ Dialects}.\n -feliminate-unused-debug-symbols -femit-class-debug-always @gol\n -fenable-@var{kind}-@var{pass} @gol\n -fenable-@var{kind}-@var{pass}=@var{range-list} @gol\n--fdebug-types-section @gol\n+-fdebug-types-section -fmem-report-wpa @gol\n -fmem-report -fpre-ipa-mem-report -fpost-ipa-mem-report -fprofile-arcs @gol\n -frandom-seed=@var{string} -fsched-verbose=@var{n} @gol\n -fsel-sched-verbose -fsel-sched-dump-cfg -fsel-sched-pipelining-verbose @gol\n@@ -5132,6 +5132,11 @@ pass when it finishes.\n Makes the compiler print some statistics about permanent memory\n allocation when it finishes.\n \n+@item -fmem-report-wpa\n+@opindex fmem-report-wpa\n+Makes the compiler print some statistics about permanent memory\n+allocation for the WPA phase only.\n+\n @item -fpre-ipa-mem-report\n @opindex fpre-ipa-mem-report\n @item -fpost-ipa-mem-report"}, {"sha": "3c5929912be3b5b61afc5ae3c3a5cf7538684772", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e44629b84562454405c9b17c639e50c536e3b6/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=b3e44629b84562454405c9b17c639e50c536e3b6", "patch": "@@ -2016,6 +2016,8 @@ do_whole_program_analysis (void)\n   /* Show the LTO report before launching LTRANS.  */\n   if (flag_lto_report)\n     print_lto_report ();\n+  if (mem_report_wpa)\n+    dump_mem_report ();\n }\n \n "}]}