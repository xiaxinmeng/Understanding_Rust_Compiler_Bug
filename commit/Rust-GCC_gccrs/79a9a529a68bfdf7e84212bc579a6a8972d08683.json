{"sha": "79a9a529a68bfdf7e84212bc579a6a8972d08683", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzlhOWE1MjlhNjhiZmRmN2U4NDIxMmJjNTc5YTZhODk3MmQwODY4Mw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-05-10T08:05:43Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1999-05-10T08:05:43Z"}, "message": "configure, [...]: Rebuilt.\n\n\t* configure, Makefile.in: Rebuilt.\n\t* Makefile.am (EXTRA_LTLIBRARIES): New macro.\n\t(toolexeclib_LTLIBRARIES): Use @target_all@.\n\t* configure.in: Recognize --with-system-zlib.  Subst target_all.\n\nFrom-SVN: r26854", "tree": {"sha": "68185f310c7cb9a81eafe26a3719076bb2979124", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68185f310c7cb9a81eafe26a3719076bb2979124"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/79a9a529a68bfdf7e84212bc579a6a8972d08683", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79a9a529a68bfdf7e84212bc579a6a8972d08683", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79a9a529a68bfdf7e84212bc579a6a8972d08683", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79a9a529a68bfdf7e84212bc579a6a8972d08683/comments", "author": null, "committer": null, "parents": [{"sha": "c6a1d2ffbb89b3c5c9b11aa032985a28cb360556", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6a1d2ffbb89b3c5c9b11aa032985a28cb360556", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6a1d2ffbb89b3c5c9b11aa032985a28cb360556"}], "stats": {"total": 251, "additions": 168, "deletions": 83}, "files": [{"sha": "931a80e4dc64d6324e456bc11a1a32a6d6adfe45", "filename": "zlib/ChangeLog.gcj", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2FChangeLog.gcj", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2FChangeLog.gcj", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2FChangeLog.gcj?ref=79a9a529a68bfdf7e84212bc579a6a8972d08683", "patch": "@@ -1,3 +1,10 @@\n+1999-05-10  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* configure, Makefile.in: Rebuilt.\n+\t* Makefile.am (EXTRA_LTLIBRARIES): New macro.\n+\t(toolexeclib_LTLIBRARIES): Use @target_all@.\n+\t* configure.in: Recognize --with-system-zlib.  Subst target_all.\n+\n 1999-05-04  Tom Tromey  <tromey@cygnus.com>\n \n \t* Makefile.in: Replace with automake-generated file."}, {"sha": "cf27582dbeccb83fd495fa285f8f385c903b7e01", "filename": "zlib/Makefile.am", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2FMakefile.am?ref=79a9a529a68bfdf7e84212bc579a6a8972d08683", "patch": "@@ -15,7 +15,8 @@ toolexeclibdir = $(toolexecdir)/lib$(MULTISUBDIR)\n \n ## We don't use `libz.la' because we don't want to conflict with a\n ## system library of that name.\n-toolexeclib_LTLIBRARIES = libzgcj.la\n+toolexeclib_LTLIBRARIES = @target_all@\n+EXTRA_LTLIBRARIES = libzgcj.la\n \n libzgcj_la_SOURCES = adler32.c compress.c crc32.c deflate.c deflate.h \\\n gzio.c infblock.c infblock.h infcodes.c infcodes.h inffast.c inffast.h \\"}, {"sha": "ac34d65240ce0a6100b4cdebd6818c97a3040029", "filename": "zlib/Makefile.in", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2FMakefile.in?ref=79a9a529a68bfdf7e84212bc579a6a8972d08683", "patch": "@@ -79,6 +79,7 @@ PACKAGE = @PACKAGE@\n RANLIB = @RANLIB@\n USE_SYMBOL_UNDERSCORE = @USE_SYMBOL_UNDERSCORE@\n VERSION = @VERSION@\n+target_all = @target_all@\n zlib_basedir = @zlib_basedir@\n \n AUTOMAKE_OPTIONS = cygnus\n@@ -94,7 +95,8 @@ MULTICLEAN = true\n toolexecdir = $(exec_prefix)/$(target_alias)\n toolexeclibdir = $(toolexecdir)/lib$(MULTISUBDIR)\n \n-toolexeclib_LTLIBRARIES = libzgcj.la\n+toolexeclib_LTLIBRARIES = @target_all@\n+EXTRA_LTLIBRARIES = libzgcj.la\n \n libzgcj_la_SOURCES = adler32.c compress.c crc32.c deflate.c deflate.h \\\n gzio.c infblock.c infblock.h infcodes.c infcodes.h inffast.c inffast.h \\\n@@ -215,7 +217,7 @@ distclean-libtool:\n maintainer-clean-libtool:\n \n libzgcj.la: $(libzgcj_la_OBJECTS) $(libzgcj_la_DEPENDENCIES)\n-\t$(LINK) -rpath $(toolexeclibdir) $(libzgcj_la_LDFLAGS) $(libzgcj_la_OBJECTS) $(libzgcj_la_LIBADD) $(LIBS)\n+\t$(LINK)  $(libzgcj_la_LDFLAGS) $(libzgcj_la_OBJECTS) $(libzgcj_la_LIBADD) $(LIBS)\n \n tags: TAGS\n "}, {"sha": "9289120d18e88148c9b3e8778d86be3b1c596712", "filename": "zlib/configure", "status": "modified", "additions": 141, "deletions": 80, "changes": 221, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure?ref=79a9a529a68bfdf7e84212bc579a6a8972d08683", "patch": "@@ -20,6 +20,8 @@ ac_help=\"$ac_help\n   --with-cross-host=HOST           Configuring with a cross compiler\"\n ac_help=\"$ac_help\n   --enable-multilib         build many library versions (default)\"\n+ac_help=\"$ac_help\n+  --with-system-zlib               Use installed libz\"\n ac_help=\"$ac_help\n   --enable-shared[=PKGS]  build shared libraries [default=yes]\"\n ac_help=\"$ac_help\n@@ -587,7 +589,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:591: checking host system type\" >&5\n+echo \"configure:593: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -608,7 +610,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:612: checking target system type\" >&5\n+echo \"configure:614: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -626,7 +628,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:630: checking build system type\" >&5\n+echo \"configure:632: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -660,7 +662,7 @@ test \"$host_alias\" != \"$target_alias\" &&\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:664: checking for a BSD compatible install\" >&5\n+echo \"configure:666: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -713,7 +715,7 @@ test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n echo $ac_n \"checking whether build environment is sane\"\"... $ac_c\" 1>&6\n-echo \"configure:717: checking whether build environment is sane\" >&5\n+echo \"configure:719: checking whether build environment is sane\" >&5\n # Just in case\n sleep 1\n echo timestamp > conftestfile\n@@ -770,7 +772,7 @@ test \"$program_suffix\" != NONE &&\n test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:774: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:776: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -816,7 +818,7 @@ EOF\n \n missing_dir=`cd $ac_aux_dir && pwd`\n echo $ac_n \"checking for working aclocal\"\"... $ac_c\" 1>&6\n-echo \"configure:820: checking for working aclocal\" >&5\n+echo \"configure:822: checking for working aclocal\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -829,7 +831,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoconf\"\"... $ac_c\" 1>&6\n-echo \"configure:833: checking for working autoconf\" >&5\n+echo \"configure:835: checking for working autoconf\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -842,7 +844,7 @@ else\n fi\n \n echo $ac_n \"checking for working automake\"\"... $ac_c\" 1>&6\n-echo \"configure:846: checking for working automake\" >&5\n+echo \"configure:848: checking for working automake\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -855,7 +857,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoheader\"\"... $ac_c\" 1>&6\n-echo \"configure:859: checking for working autoheader\" >&5\n+echo \"configure:861: checking for working autoheader\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -868,7 +870,7 @@ else\n fi\n \n echo $ac_n \"checking for working makeinfo\"\"... $ac_c\" 1>&6\n-echo \"configure:872: checking for working makeinfo\" >&5\n+echo \"configure:874: checking for working makeinfo\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -883,7 +885,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:887: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:889: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -906,12 +908,12 @@ fi\n   \n \n echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n-echo \"configure:910: checking for Cygwin environment\" >&5\n+echo \"configure:912: checking for Cygwin environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 915 \"configure\"\n+#line 917 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -922,7 +924,7 @@ int main() {\n return __CYGWIN__;\n ; return 0; }\n EOF\n-if { (eval echo configure:926: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:928: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_cygwin=yes\n else\n@@ -939,19 +941,19 @@ echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n CYGWIN=\n test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n-echo \"configure:943: checking for mingw32 environment\" >&5\n+echo \"configure:945: checking for mingw32 environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 948 \"configure\"\n+#line 950 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n return __MINGW32__;\n ; return 0; }\n EOF\n-if { (eval echo configure:955: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:957: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_mingw32=yes\n else\n@@ -970,7 +972,7 @@ test \"$ac_cv_mingw32\" = yes && MINGW32=yes\n \n \n echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n-echo \"configure:974: checking for executable suffix\" >&5\n+echo \"configure:976: checking for executable suffix\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -980,7 +982,7 @@ else\n   rm -f conftest*\n   echo 'int main () { return 0; }' > conftest.$ac_ext\n   ac_cv_exeext=\n-  if { (eval echo configure:984: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+  if { (eval echo configure:986: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n     for file in conftest.*; do\n       case $file in\n       *.c | *.o | *.obj | *.ilk | *.pdb) ;;\n@@ -1058,10 +1060,17 @@ else\n fi\n \n \n+# Check whether --with-system-zlib or --without-system-zlib was given.\n+if test \"${with_system_zlib+set}\" = set; then\n+  withval=\"$with_system_zlib\"\n+  :\n+fi\n+\n+\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1065: checking for $ac_word\" >&5\n+echo \"configure:1074: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1091,7 +1100,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1095: checking for $ac_word\" >&5\n+echo \"configure:1104: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1140,7 +1149,7 @@ fi\n fi\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1144: checking whether we are using GNU C\" >&5\n+echo \"configure:1153: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1149,7 +1158,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1153: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1162: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1164,7 +1173,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1168: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1177: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1263,7 +1272,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1267: checking for $ac_word\" >&5\n+echo \"configure:1276: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1293,7 +1302,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1297: checking for $ac_word\" >&5\n+echo \"configure:1306: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1323,7 +1332,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1327: checking for $ac_word\" >&5\n+echo \"configure:1336: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1374,7 +1383,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1378: checking for $ac_word\" >&5\n+echo \"configure:1387: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1406,7 +1415,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1410: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1419: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1417,12 +1426,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1421 \"configure\"\n+#line 1430 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1426: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1435: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1448,12 +1457,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1452: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1461: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1457: checking whether we are using GNU C\" >&5\n+echo \"configure:1466: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1462,7 +1471,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1466: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1475: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1481,7 +1490,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1485: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1494: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1524,7 +1533,7 @@ ac_prog=ld\n if test \"$ac_cv_prog_gcc\" = yes; then\n   # Check if gcc -print-prog-name=ld gives a path.\n   echo $ac_n \"checking for ld used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:1528: checking for ld used by GCC\" >&5\n+echo \"configure:1537: checking for ld used by GCC\" >&5\n   ac_prog=`($CC -print-prog-name=ld) 2>&5`\n   case \"$ac_prog\" in\n     # Accept absolute paths.\n@@ -1548,10 +1557,10 @@ echo \"configure:1528: checking for ld used by GCC\" >&5\n   esac\n elif test \"$with_gnu_ld\" = yes; then\n   echo $ac_n \"checking for GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1552: checking for GNU ld\" >&5\n+echo \"configure:1561: checking for GNU ld\" >&5\n else\n   echo $ac_n \"checking for non-GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1555: checking for non-GNU ld\" >&5\n+echo \"configure:1564: checking for non-GNU ld\" >&5\n fi\n if eval \"test \\\"`echo '$''{'ac_cv_path_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1587,7 +1596,7 @@ fi\n test -z \"$LD\" && { echo \"configure: error: no acceptable ld found in \\$PATH\" 1>&2; exit 1; }\n \n echo $ac_n \"checking if the linker ($LD) is GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1591: checking if the linker ($LD) is GNU ld\" >&5\n+echo \"configure:1600: checking if the linker ($LD) is GNU ld\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1603,7 +1612,7 @@ echo \"$ac_t\"\"$ac_cv_prog_gnu_ld\" 1>&6\n \n \n echo $ac_n \"checking for BSD-compatible nm\"\"... $ac_c\" 1>&6\n-echo \"configure:1607: checking for BSD-compatible nm\" >&5\n+echo \"configure:1616: checking for BSD-compatible nm\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1641,7 +1650,7 @@ echo \"$ac_t\"\"$NM\" 1>&6\n \n # Check for command to grab the raw symbol name followed by C symbol from nm.\n echo $ac_n \"checking command to parse $NM output\"\"... $ac_c\" 1>&6\n-echo \"configure:1645: checking command to parse $NM output\" >&5\n+echo \"configure:1654: checking command to parse $NM output\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sys_global_symbol_pipe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1704,11 +1713,11 @@ void nm_test_func(){}\n int main(){nm_test_var='a';nm_test_func;return 0;}\n EOF\n \n-  if { (eval echo configure:1708: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  if { (eval echo configure:1717: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     # Now try to grab the symbols.\n     ac_nlist=conftest.nm\n   \n-    if { (eval echo configure:1712: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n+    if { (eval echo configure:1721: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n \n       # Try sorting and uniquifying the output.\n       if sort \"$ac_nlist\" | uniq > \"$ac_nlist\"T; then\n@@ -1760,7 +1769,7 @@ EOF\n \t  ac_save_CFLAGS=\"$CFLAGS\"\n \t  LIBS=\"conftestm.$ac_objext\"\n \t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n-\t  if { (eval echo configure:1764: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+\t  if { (eval echo configure:1773: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n \t    ac_pipe_works=yes\n \t  else\n \t    echo \"configure: failed program was:\" >&5\n@@ -1806,7 +1815,7 @@ fi\n echo \"$ac_t\"\"$ac_result\" 1>&6\n \n echo $ac_n \"checking for _ prefix in compiled symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:1810: checking for _ prefix in compiled symbols\" >&5\n+echo \"configure:1819: checking for _ prefix in compiled symbols\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sys_symbol_underscore'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1815,10 +1824,10 @@ cat > conftest.$ac_ext <<EOF\n void nm_test_func(){}\n int main(){nm_test_func;return 0;}\n EOF\n-if { (eval echo configure:1819: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1828: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   # Now try to grab the symbols.\n   ac_nlist=conftest.nm\n-  if { (eval echo configure:1822: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n+  if { (eval echo configure:1831: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n     # See whether the symbols have a leading underscore.\n     if egrep '^. _nm_test_func' \"$ac_nlist\" >/dev/null; then\n       ac_cv_sys_symbol_underscore=yes\n@@ -1844,7 +1853,7 @@ echo \"$ac_t\"\"$ac_cv_sys_symbol_underscore\" 1>&6\n USE_SYMBOL_UNDERSCORE=${ac_cv_sys_symbol_underscore=no}\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:1848: checking whether ln -s works\" >&5\n+echo \"configure:1857: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1886,8 +1895,8 @@ test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n case \"$host\" in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 1890 \"configure\"' > conftest.$ac_ext\n-  if { (eval echo configure:1891: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  echo '#line 1899 \"configure\"' > conftest.$ac_ext\n+  if { (eval echo configure:1900: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case \"`/usr/bin/file conftest.o`\" in\n     *32-bit*)\n       LD=\"${LD-ld} -32\"\n@@ -1908,19 +1917,19 @@ case \"$host\" in\n   SAVE_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS -belf\"\n   echo $ac_n \"checking whether the C compiler needs -belf\"\"... $ac_c\" 1>&6\n-echo \"configure:1912: checking whether the C compiler needs -belf\" >&5\n+echo \"configure:1921: checking whether the C compiler needs -belf\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1917 \"configure\"\n+#line 1926 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1924: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1933: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   lt_cv_cc_needs_belf=yes\n else\n@@ -1943,7 +1952,7 @@ echo \"$ac_t\"\"$lt_cv_cc_needs_belf\" 1>&6\n   # Extract the first word of \"${ac_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1947: checking for $ac_word\" >&5\n+echo \"configure:1956: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1975,7 +1984,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1979: checking for $ac_word\" >&5\n+echo \"configure:1988: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2010,7 +2019,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2014: checking for $ac_word\" >&5\n+echo \"configure:2023: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2042,7 +2051,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2046: checking for $ac_word\" >&5\n+echo \"configure:2055: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2196,9 +2205,12 @@ EOF\n #define HAVE_STRERROR 1\n EOF\n \n+\n+   # We ignore --with-system-zlib in this case.\n+   target_all=libzgcj.la\n else\n    echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2202: checking how to run the C preprocessor\" >&5\n+echo \"configure:2214: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2213,13 +2225,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2217 \"configure\"\n+#line 2229 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2223: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2235: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2230,13 +2242,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2234 \"configure\"\n+#line 2246 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2240: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2252: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2247,13 +2259,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2251 \"configure\"\n+#line 2263 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2257: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2269: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2281,17 +2293,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2285: checking for $ac_hdr\" >&5\n+echo \"configure:2297: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2290 \"configure\"\n+#line 2302 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2295: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2307: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2320,12 +2332,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2324: checking for $ac_func\" >&5\n+echo \"configure:2336: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2329 \"configure\"\n+#line 2341 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2348,7 +2360,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2352: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2364: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2373,15 +2385,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:2377: checking for working mmap\" >&5\n+echo \"configure:2389: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2385 \"configure\"\n+#line 2397 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -2521,7 +2533,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:2525: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2537: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -2546,12 +2558,12 @@ fi\n    for ac_func in memcpy strerror\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2550: checking for $ac_func\" >&5\n+echo \"configure:2562: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2555 \"configure\"\n+#line 2567 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2574,7 +2586,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2578: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2590: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2598,23 +2610,71 @@ else\n fi\n done\n \n+\n+   if test \"$with_system_zlib\" = yes; then\n+      echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n+echo \"configure:2617: checking for deflate in -lz\" >&5\n+ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n+if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_save_LIBS=\"$LIBS\"\n+LIBS=\"-lz  $LIBS\"\n+cat > conftest.$ac_ext <<EOF\n+#line 2625 \"configure\"\n+#include \"confdefs.h\"\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char deflate();\n+\n+int main() {\n+deflate()\n+; return 0; }\n+EOF\n+if { (eval echo configure:2636: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=yes\"\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=no\"\n fi\n+rm -f conftest*\n+LIBS=\"$ac_save_LIBS\"\n+\n+fi\n+if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  target_all=\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+target_all=libzgcj.la\n+fi\n+\n+   else\n+      target_all=libzgcj.la\n+   fi\n+fi\n+\n+\n \n for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2608: checking for $ac_hdr\" >&5\n+echo \"configure:2668: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2613 \"configure\"\n+#line 2673 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2618: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2678: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2834,6 +2894,7 @@ s%@AS@%$AS%g\n s%@LIBTOOL@%$LIBTOOL%g\n s%@COMPPATH@%$COMPPATH%g\n s%@CPP@%$CPP%g\n+s%@target_all@%$target_all%g\n \n CEOF\n EOF"}, {"sha": "4b63cb2ea7235672be0965c7b4293cbaa4d78ee0", "filename": "zlib/configure.in", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79a9a529a68bfdf7e84212bc579a6a8972d08683/zlib%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure.in?ref=79a9a529a68bfdf7e84212bc579a6a8972d08683", "patch": "@@ -38,6 +38,9 @@ else\n fi\n AC_SUBST(zlib_basedir)\n \n+AC_ARG_WITH(system-zlib,\n+[  --with-system-zlib               Use installed libz])\n+\n LIB_AC_PROG_CC\n AM_PROG_LIBTOOL\n \n@@ -58,11 +61,22 @@ if test -n \"$with_cross_host\"; then\n    # we'll have.\n    AC_DEFINE(HAVE_MEMCPY)\n    AC_DEFINE(HAVE_STRERROR)\n+\n+   # We ignore --with-system-zlib in this case.\n+   target_all=libzgcj.la\n else\n    AC_FUNC_MMAP\n    AC_CHECK_FUNCS(memcpy strerror)\n+\n+   if test \"$with_system_zlib\" = yes; then\n+      AC_CHECK_LIB(z, deflate, target_all=, target_all=libzgcj.la)\n+   else\n+      target_all=libzgcj.la\n+   fi\n fi\n \n+AC_SUBST(target_all)\n+\n AC_CHECK_HEADERS(unistd.h)\n \n if test \"${multilib}\" = \"yes\"; then"}]}