{"sha": "269b85b72388861958e4b4343c4a101765ca763c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY5Yjg1YjcyMzg4ODYxOTU4ZTRiNDM0M2M0YTEwMTc2NWNhNzYzYw==", "commit": {"author": {"name": "Joel Sherrill", "email": "joel.sherrill@oarcorp.com", "date": "2008-08-11T17:04:07Z"}, "committer": {"name": "Samuel Tardieu", "email": "sam@gcc.gnu.org", "date": "2008-08-11T17:04:07Z"}, "message": "s-oscons-tmplt.c: RTEMS defines AF_INET6 but does support it.\n\n2008-08-11  Joel Sherrill  <joel.sherrill@oarcorp.com>\n\n    gcc/ada/\n\t* s-oscons-tmplt.c: RTEMS defines AF_INET6 but does support it.\n\t* gsocket.h, socket.c: Update to support RTEMS.\n\t* gcc-interface/Make-lang.in: Include CFLAGS_FOR_TARGET when cross.\n\nFrom-SVN: r138957", "tree": {"sha": "10e79b873337c7ce31d493d8cb0abbed660fe17d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10e79b873337c7ce31d493d8cb0abbed660fe17d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/269b85b72388861958e4b4343c4a101765ca763c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/269b85b72388861958e4b4343c4a101765ca763c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/269b85b72388861958e4b4343c4a101765ca763c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/269b85b72388861958e4b4343c4a101765ca763c/comments", "author": {"login": "joelsherrill", "id": 183688, "node_id": "MDQ6VXNlcjE4MzY4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/183688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelsherrill", "html_url": "https://github.com/joelsherrill", "followers_url": "https://api.github.com/users/joelsherrill/followers", "following_url": "https://api.github.com/users/joelsherrill/following{/other_user}", "gists_url": "https://api.github.com/users/joelsherrill/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelsherrill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelsherrill/subscriptions", "organizations_url": "https://api.github.com/users/joelsherrill/orgs", "repos_url": "https://api.github.com/users/joelsherrill/repos", "events_url": "https://api.github.com/users/joelsherrill/events{/privacy}", "received_events_url": "https://api.github.com/users/joelsherrill/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dd79750c58271a30f8b79d055f4ad166f5a00887", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd79750c58271a30f8b79d055f4ad166f5a00887", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd79750c58271a30f8b79d055f4ad166f5a00887"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "68857260db93e2b3eb045f7106d3fef823b037f6", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=269b85b72388861958e4b4343c4a101765ca763c", "patch": "@@ -1,3 +1,9 @@\n+2008-08-11  Joel Sherrill  <joel.sherrill@oarcorp.com>\n+\n+\t* s-oscons-tmplt.c: RTEMS defines AF_INET6 but does support it.\n+\t* gsocket.h, socket.c: Update to support RTEMS.\n+\t* gcc-interface/Make-lang.in: Include CFLAGS_FOR_TARGET when cross.\n+\n 2008-08-10  Samuel Tardieu  <sam@rfc1149.net>\n             Robert Dewar <dewar@adacore.com>\n "}, {"sha": "400171001283f4873b5c394aaabb52e205d25e16", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=269b85b72388861958e4b4343c4a101765ca763c", "patch": "@@ -933,9 +933,9 @@ OSCONS_EXTRACT=../../../$(DECC) -DNATIVE \\\n   ./s-oscons-tmplt.exe > s-oscons-tmplt.s\n \n else\n-OSCONS_CPP=$(GCC_FOR_TARGET) -E -C \\\n+OSCONS_CPP=$(GCC_FOR_TARGET) $(CFLAGS_FOR_TARGET) -E -C \\\n   -DTARGET=\\\"$(target)\\\" s-oscons-tmplt.c > s-oscons-tmplt.i\n-OSCONS_EXTRACT=$(GCC_FOR_TARGET) -S s-oscons-tmplt.i\n+OSCONS_EXTRACT=$(GCC_FOR_TARGET) $(CFLAGS_FOR_TARGET) -S s-oscons-tmplt.i\n endif\n \n ada/s-oscons.ads : ada/s-oscons-tmplt.c ada/gsocket.h ada/xoscons.adb ada/xutil.ads ada/xutil.adb"}, {"sha": "0dca1a9f50372e76931bff5350febe3de92cc762", "filename": "gcc/ada/gsocket.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fgsocket.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fgsocket.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgsocket.h?ref=269b85b72388861958e4b4343c4a101765ca763c", "patch": "@@ -216,7 +216,7 @@\n \n #if defined (_AIX) || defined (__FreeBSD__) || defined (__hpux__) || defined (__osf__) || defined (_WIN32) || defined (__APPLE__)\n # define HAVE_THREAD_SAFE_GETxxxBYyyy 1\n-#elif defined (sgi) || defined (linux) || defined (__GLIBC__) || (defined (sun) && defined (__SVR4) && !defined (__vxworks))\n+#elif defined (sgi) || defined (linux) || defined (__GLIBC__) || (defined (sun) && defined (__SVR4) && !defined (__vxworks)) || defined(__rtems__)\n # define HAVE_GETxxxBYyyy_R 1\n #endif\n \n@@ -226,7 +226,7 @@\n # define Need_Netdb_Buffer 0\n #endif\n \n-#if defined (__FreeBSD__) || defined (__vxworks)\n+#if defined (__FreeBSD__) || defined (__vxworks) || defined(__rtems__)\n # define Has_Sockaddr_Len 1\n #else\n # define Has_Sockaddr_Len 0"}, {"sha": "614a8660d9b4caf759101e7a27d10ced32c8ca30", "filename": "gcc/ada/s-oscons-tmplt.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fs-oscons-tmplt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fs-oscons-tmplt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-oscons-tmplt.c?ref=269b85b72388861958e4b4343c4a101765ca763c", "patch": "@@ -829,6 +829,14 @@ CND(VEOL2, \"Alternative EOL\")\n #endif\n CND(AF_INET, \"IPv4 address family\")\n \n+/**\n+ ** RTEMS lies and defines AF_INET6 even though there is no IPV6 support.\n+ ** Its TCP/IP stack is in transition.  It has newer .h files but no IPV6 yet.\n+ **/\n+#if defined(__rtems__)\n+# undef AF_INET6\n+#endif\n+\n #ifndef AF_INET6\n # define AF_INET6 -1\n #else"}, {"sha": "aadc9b084f70fcea271fac4890b227a9ebb7a57f", "filename": "gcc/ada/socket.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fsocket.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/269b85b72388861958e4b4343c4a101765ca763c/gcc%2Fada%2Fsocket.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsocket.c?ref=269b85b72388861958e4b4343c4a101765ca763c", "patch": "@@ -240,7 +240,7 @@ __gnat_safe_getservbyname (const char *name, const char *proto,\n   struct servent *rh;\n   int ri;\n \n-#if defined(__linux__) || defined(__GLIBC__)\n+#if defined(__linux__) || defined(__GLIBC__) || defined(__rtems__)\n   (void) getservbyname_r (name, proto, ret, buf, buflen, &rh);\n #else\n   rh = getservbyname_r (name, proto, ret, buf, buflen);\n@@ -256,7 +256,7 @@ __gnat_safe_getservbyport (int port, const char *proto,\n   struct servent *rh;\n   int ri;\n \n-#if defined(__linux__) || defined(__GLIBC__)\n+#if defined(__linux__) || defined(__GLIBC__) || defined(__rtems__)\n   (void) getservbyport_r (port, proto, ret, buf, buflen, &rh);\n #else\n   rh = getservbyport_r (port, proto, ret, buf, buflen);"}]}