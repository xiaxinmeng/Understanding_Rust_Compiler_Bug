{"sha": "5d3a9816945662618f64a6dba1660f95586e515a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQzYTk4MTY5NDU2NjI2MThmNjRhNmRiYTE2NjBmOTU1ODZlNTE1YQ==", "commit": {"author": {"name": "Bud Davis", "email": "bdavis9659@comcast.net", "date": "2004-12-24T00:29:07Z"}, "committer": {"name": "Bud Davis", "email": "bdavis@gcc.gnu.org", "date": "2004-12-24T00:29:07Z"}, "message": "re PR libfortran/19071 (complex formatted output has too many items)\n\n2004-12-23  Bud Davis  <bdavis9659@comcast.net>\n\n        PR fortran/19071\n        * io/tranfer.c (formatted_transfer): moved check for\n        format reversion inside the processing loop.\n\n        * gfortran.dg/complex_write.f90: New test.\n\nFrom-SVN: r92582", "tree": {"sha": "dc614320959253fb4d1b9ce0d541eb3e51d1031b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc614320959253fb4d1b9ce0d541eb3e51d1031b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d3a9816945662618f64a6dba1660f95586e515a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d3a9816945662618f64a6dba1660f95586e515a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d3a9816945662618f64a6dba1660f95586e515a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d3a9816945662618f64a6dba1660f95586e515a/comments", "author": null, "committer": null, "parents": [{"sha": "4a9dd33d4b135f24e6e54ff81653e0986bb2bfff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a9dd33d4b135f24e6e54ff81653e0986bb2bfff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a9dd33d4b135f24e6e54ff81653e0986bb2bfff"}], "stats": {"total": 42, "additions": 34, "deletions": 8}, "files": [{"sha": "f504598b9fe12e0ec5c9fdf37214f254011813b3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d3a9816945662618f64a6dba1660f95586e515a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d3a9816945662618f64a6dba1660f95586e515a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5d3a9816945662618f64a6dba1660f95586e515a", "patch": "@@ -1,3 +1,8 @@\n+2004-12-23  Bud Davis  <bdavis9659@comcast.net>\n+\n+\tPR fortran/19071\n+\t* gfortran.dg/complex_write.f90: New test.\n+ \n 2004-12-23  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/17595"}, {"sha": "3b73ba3a023b9b99b521412937c3dea2824d0cd3", "filename": "gcc/testsuite/gfortran.dg/complex_write.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d3a9816945662618f64a6dba1660f95586e515a/gcc%2Ftestsuite%2Fgfortran.dg%2Fcomplex_write.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d3a9816945662618f64a6dba1660f95586e515a/gcc%2Ftestsuite%2Fgfortran.dg%2Fcomplex_write.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcomplex_write.f90?ref=5d3a9816945662618f64a6dba1660f95586e515a", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do run }\n+! pr 19071\n+! test case provided by\n+!   Thomas.Koenig@online.de\n+       program cio      \n+       complex a      \n+       real r1,r2      \n+       a = cmplx(1.0, 2.0)      \n+       open(unit=74,status='scratch')      \n+       write(74,'(1P,E13.5)'),a      \n+       rewind(74)\n+!  can read the complex in as two reals, one on each line\n+       read(74,'(E13.5)')r1,r2      \n+       if (r1.ne.1.0 .and. r2.ne.2.0) call abort\n+       end"}, {"sha": "749f5a3edbeddbd7ea78fa70d946568f56813b28", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d3a9816945662618f64a6dba1660f95586e515a/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d3a9816945662618f64a6dba1660f95586e515a/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=5d3a9816945662618f64a6dba1660f95586e515a", "patch": "@@ -1,3 +1,9 @@\n+2004-12-23  Bud Davis  <bdavis9659@comcast.net>\n+\n+\tPR fortran/19071\n+\t* io/tranfer.c (formatted_transfer): moved check for \n+\tformat reversion inside the processing loop.\n+\n 2004-12-19  Aaron W. LaFramboise  <aaronavay62@aaronwl.com>\n \n \tPR libfortran/19074"}, {"sha": "fb673042432f5c56caad8a4f2697b7d63b56aa6c", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d3a9816945662618f64a6dba1660f95586e515a/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d3a9816945662618f64a6dba1660f95586e515a/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=5d3a9816945662618f64a6dba1660f95586e515a", "patch": "@@ -425,16 +425,16 @@ formatted_transfer (bt type, void *p, int len)\n   if (type == BT_COMPLEX)\n     type = BT_REAL;\n \n-  /* If reversion has occurred and there is another real data item,\n-     then we have to move to the next record.  */\n-\n-  if (g.reversion_flag && n > 0)\n-    {\n-      g.reversion_flag = 0;\n-      next_record (0);\n-    }\n   for (;;)\n     {\n+      /* If reversion has occurred and there is another real data item,\n+         then we have to move to the next record.  */\n+      if (g.reversion_flag && n > 0)\n+        {\n+          g.reversion_flag = 0;\n+          next_record (0);\n+        }\n+\n       consume_data_flag = 1 ;\n       if (ioparm.library_return != LIBRARY_OK)\n \tbreak;"}]}