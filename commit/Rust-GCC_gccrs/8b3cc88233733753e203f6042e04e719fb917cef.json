{"sha": "8b3cc88233733753e203f6042e04e719fb917cef", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIzY2M4ODIzMzczMzc1M2UyMDNmNjA0MmUwNGU3MTlmYjkxN2NlZg==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2007-04-23T06:02:05Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2007-04-23T06:02:05Z"}, "message": "target-supports.exp (check_effective_target_vect_pack_trunc): Rename from check_effective_target_vect_pack_mod.\n\n\t* lib/target-supports.exp (check_effective_target_vect_pack_trunc):\n\tRename from check_effective_target_vect_pack_mod.  Rename global\n\tvariable et_vect_pack_mod to et_vect_pack_trunc.  Update debug\n\tmessages.\n\t* gcc.dg/vect/vect-iv-8.c: Update target check for vect_pack_trunc\n\trename.\n\t* gcc.dg/vect/vect-iv-8a.c: Ditto.\n\t* gcc.dg/vect/vect-multitypes-8.c: Ditto.\n\nFrom-SVN: r124057", "tree": {"sha": "412835b581eb0f4b37aff1cbc665ea6365d23e47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/412835b581eb0f4b37aff1cbc665ea6365d23e47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b3cc88233733753e203f6042e04e719fb917cef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b3cc88233733753e203f6042e04e719fb917cef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b3cc88233733753e203f6042e04e719fb917cef", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b3cc88233733753e203f6042e04e719fb917cef/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1f2ad84c3c4c7975b49b09ae9fc1a6b62be19e13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f2ad84c3c4c7975b49b09ae9fc1a6b62be19e13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f2ad84c3c4c7975b49b09ae9fc1a6b62be19e13"}], "stats": {"total": 113, "additions": 102, "deletions": 11}, "files": [{"sha": "0675922d590cff81b62a6701cc6ba28a2af9e6d0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8b3cc88233733753e203f6042e04e719fb917cef", "patch": "@@ -1,3 +1,14 @@\n+2007-04-23  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_vect_pack_trunc):\n+\tRename from check_effective_target_vect_pack_mod.  Rename global\n+\tvariable et_vect_pack_mod to et_vect_pack_trunc.  Update debug\n+\tmessages.\n+\t* gcc.dg/vect/vect-iv-8.c: Update target check for vect_pack_trunc\n+\trename.\n+\t* gcc.dg/vect/vect-iv-8a.c: Ditto.\n+\t* gcc.dg/vect/vect-multitypes-8.c: Ditto.\n+\n 2007-04-22  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR middle-end/31448"}, {"sha": "24552b20fe851699c1b25256d32f2c4aa257f433", "filename": "gcc/testsuite/gcc.dg/vect/vect-float-extend-1.c", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-float-extend-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-float-extend-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-float-extend-1.c?ref=8b3cc88233733753e203f6042e04e719fb917cef", "patch": "@@ -0,0 +1,40 @@\n+/* { dg-require-effective-target vect_double } */\n+\n+#include <stdarg.h>\n+#include \"tree-vect.h\"\n+\n+#define N 32\n+\n+int\n+main1 ()\n+{\n+  int i;\n+  float fb[N] = {0.4,3.5,6.6,9.4,12.5,15.6,18.4,21.5,24.6,27.4,30.5,33.6,36.4,39.5,42.6,45.4,0.5,3.6,6.4,9.5,12.6,15.4,18.5,21.6,24.4,27.5,30.6,33.4,36.5,39.6,42.4,45.5};\n+  double da[N];\n+\n+  /* float -> double */\n+  for (i = 0; i < N; i++)\n+    {\n+      da[i] = (double) fb[i];\n+    }\n+\n+  /* check results:  */\n+  for (i = 0; i < N; i++)\n+    {\n+      if (da[i] != (double) fb[i])\n+       abort ();\n+    }\n+\n+  return 0;\n+}\n+\n+int\n+main (void)\n+{\n+  check_vect ();\n+\n+  return main1 ();\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { xfail spu*-*-* } } } */\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "9862e9c9cacffd2000a470829e43b52e2e90cd8d", "filename": "gcc/testsuite/gcc.dg/vect/vect-float-truncate-1.c", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-float-truncate-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-float-truncate-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-float-truncate-1.c?ref=8b3cc88233733753e203f6042e04e719fb917cef", "patch": "@@ -0,0 +1,40 @@\n+/* { dg-require-effective-target vect_double } */\n+\n+#include <stdarg.h>\n+#include \"tree-vect.h\"\n+\n+#define N 32\n+\n+int\n+main1 ()\n+{\n+  int i;\n+  double db[N] = {0.4,3.5,6.6,9.4,12.5,15.6,18.4,21.5,24.6,27.4,30.5,33.6,36.4,39.5,42.6,45.4,0.5,3.6,6.4,9.5,12.6,15.4,18.5,21.6,24.4,27.5,30.6,33.4,36.5,39.6,42.4,45.5};\n+  float fa[N];\n+\n+  /* double -> float */\n+  for (i = 0; i < N; i++)\n+    {\n+      fa[i] = (float) db[i];\n+    }\n+\n+  /* check results:  */\n+  for (i = 0; i < N; i++)\n+    {\n+      if (fa[i] != (float) db[i])\n+       abort ();\n+    }\n+\n+  return 0;\n+}\n+\n+int\n+main (void)\n+{\n+  check_vect ();\n+\n+  return main1 ();\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { xfail spu*-*-* } } } */\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "c6e4773db284e97a88f8297ed05e9bd34b79bae0", "filename": "gcc/testsuite/gcc.dg/vect/vect-iv-8.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-iv-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-iv-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-iv-8.c?ref=8b3cc88233733753e203f6042e04e719fb917cef", "patch": "@@ -42,6 +42,6 @@ int main (void)\n /* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { xfail *-*-* } } } */\n /* Fails to get vectorized due to a redundant cast. Once this is fixed, \n    should be vectorized as follows:\n-   dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { target { vect_pack_mod && vect_unpack } } } \n+   dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { target { vect_pack_trunc && vect_unpack } } } \n */\n /* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "62f0d07e07f66005c37aa8b01f191b16da745804", "filename": "gcc/testsuite/gcc.dg/vect/vect-iv-8a.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-iv-8a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-iv-8a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-iv-8a.c?ref=8b3cc88233733753e203f6042e04e719fb917cef", "patch": "@@ -39,5 +39,5 @@ int main (void)\n   return main1 (3);\n } \n \n-/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { target { vect_pack_mod && vect_unpack } } } } */\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { target { vect_pack_trunc && vect_unpack } } } } */\n /* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "18ded392be5dce03379fb17cf6a43a02cd151ea8", "filename": "gcc/testsuite/gcc.dg/vect/vect-multitypes-8.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-multitypes-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-multitypes-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-multitypes-8.c?ref=8b3cc88233733753e203f6042e04e719fb917cef", "patch": "@@ -45,6 +45,6 @@ int main (void)\n   return 0;\n }\n \n-/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { target vect_pack_mod } } } */\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { target vect_pack_trunc } } } */\n /* { dg-final { cleanup-tree-dump \"vect\" } } */\n "}, {"sha": "702f09c38be78fb0c7fce11361f3a97d8c0afd2f", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b3cc88233733753e203f6042e04e719fb917cef/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=8b3cc88233733753e203f6042e04e719fb917cef", "patch": "@@ -1862,21 +1862,21 @@ proc check_effective_target_vect_udot_hi { } {\n #\n # This won't change for different subtargets so cache the result.\n                                                                                 \n-proc check_effective_target_vect_pack_mod { } {\n-    global et_vect_pack_mod\n+proc check_effective_target_vect_pack_trunc { } {\n+    global et_vect_pack_trunc\n                                                                                 \n-    if [info exists et_vect_pack_mod_saved] {\n-        verbose \"check_effective_target_vect_pack_mod: using cached result\" 2\n+    if [info exists et_vect_pack_trunc_saved] {\n+        verbose \"check_effective_target_vect_pack_trunc: using cached result\" 2\n     } else {\n-        set et_vect_pack_mod_saved 0\n+        set et_vect_pack_trunc_saved 0\n         if { [istarget powerpc*-*-*]\n              || [istarget i?86-*-*]\n              || [istarget x86_64-*-*] } {\n-            set et_vect_pack_mod_saved 1\n+            set et_vect_pack_trunc_saved 1\n         }\n     }\n-    verbose \"check_effective_target_vect_pack_mod: returning $et_vect_pack_mod_saved\" 2\n-    return $et_vect_pack_mod_saved\n+    verbose \"check_effective_target_vect_pack_trunc: returning $et_vect_pack_trunc_saved\" 2\n+    return $et_vect_pack_trunc_saved\n }\n \n # Return 1 if the target plus current options supports a vector"}]}