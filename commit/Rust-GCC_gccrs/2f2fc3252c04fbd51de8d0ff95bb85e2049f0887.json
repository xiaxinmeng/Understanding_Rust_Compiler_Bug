{"sha": "2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmYyZmMzMjUyYzA0ZmJkNTFkZThkMGZmOTViYjg1ZTIwNDlmMDg4Nw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-06-08T19:11:21Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-06-08T19:11:21Z"}, "message": "re PR fortran/86059 (ICE in reduce_binary_ac, at fortran/arith.c:1308 (and others))\n\n2018-06-08  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/86059 \n\t* array.c (match_array_cons_element): NULL() cannot be in an\n\tarray constructor.\n\n2018-06-08  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/86059 \n\t* gfortran.dg/associate_30.f90: Remove code tested ...\n\t* gfortran.dg/pr67803.f90: Ditto.\n\t* gfortran.dg/pr67805.f90: Ditto.\n\t* gfortran.dg/pr86059.f90: ... here.  New test.\n\nFrom-SVN: r261344", "tree": {"sha": "1bcc3e02bc3628d9a177e34a3a38fce7f3adbab0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bcc3e02bc3628d9a177e34a3a38fce7f3adbab0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/comments", "author": null, "committer": null, "parents": [{"sha": "5954faa7c22d550ec57e9a40e5a738630be07b0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5954faa7c22d550ec57e9a40e5a738630be07b0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5954faa7c22d550ec57e9a40e5a738630be07b0f"}], "stats": {"total": 38, "additions": 31, "deletions": 7}, "files": [{"sha": "dffc7f46b99f5c35117333ba849992089c0c1576", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "patch": "@@ -1,3 +1,9 @@\n+2018-06-08  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/86059 \n+\t* array.c (match_array_cons_element): NULL() cannot be in an\n+\tarray constructor.\n+\n 2018-06-08  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/78571"}, {"sha": "031ab7643a5d75f95065599ed05d48454f2359c4", "filename": "gcc/fortran/array.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ffortran%2Farray.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ffortran%2Farray.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farray.c?ref=2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "patch": "@@ -1098,6 +1098,15 @@ match_array_cons_element (gfc_constructor_base *result)\n   if (m != MATCH_YES)\n     return m;\n \n+  if (expr->expr_type == EXPR_FUNCTION\n+      && expr->ts.type == BT_UNKNOWN\n+      && strcmp(expr->symtree->name, \"null\") == 0)\n+   {\n+      gfc_error (\"NULL() at %C cannot appear in an array constructor\");\n+      gfc_free_expr (expr);\n+      return MATCH_ERROR;\n+   }\n+\n   gfc_constructor_append_expr (result, expr, &gfc_current_locus);\n   return MATCH_YES;\n }"}, {"sha": "682c67bb3c659a7eb0ed3a0a426f868281308df1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "patch": "@@ -1,3 +1,11 @@\n+2018-06-08  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/86059 \n+\t* gfortran.dg/associate_30.f90: Remove code tested ...\n+\t* gfortran.dg/pr67803.f90: Ditto.\n+\t* gfortran.dg/pr67805.f90: Ditto.\n+\t* gfortran.dg/pr86059.f90: ... here.  New test.\n+\n 2018-06-08  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/78571"}, {"sha": "ecc9ad06a5620069fbe1b6bbd1220ce06d58808f", "filename": "gcc/testsuite/gfortran.dg/associate_30.f90", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_30.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_30.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_30.f90?ref=2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "patch": "@@ -8,8 +8,3 @@ subroutine s1\n       associate (x => null())   ! { dg-error \"cannot be NULL()\" }\n       end associate\n    end subroutine\n-\n-   subroutine s2\n-      associate (x => [null()]) ! { dg-error \"has no type\" }\n-      end associate\n-   end subroutine"}, {"sha": "55a1bbf579442345cc633bcb15ff4012f8fe5bcc", "filename": "gcc/testsuite/gfortran.dg/pr67803.f90", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67803.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67803.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67803.f90?ref=2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "patch": "@@ -10,5 +10,4 @@ program p\n   x = '0' // [character :: 1d1]     ! { dg-error \"Incompatible typespec for\" }\n   x = '0' // [character :: (0.,1.)] ! { dg-error \"Incompatible typespec for\" }\n   x = '0' // [character :: .true.]  ! { dg-error \"Incompatible typespec for\" }\n-  x = '0' // [character :: null()]  ! { dg-error \"Incompatible typespec for\" }\n end"}, {"sha": "2aedde8977b4bfb4f0a106a1b2e04a76f447a2bc", "filename": "gcc/testsuite/gfortran.dg/pr67805.f90", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67805.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67805.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67805.f90?ref=2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "patch": "@@ -22,7 +22,6 @@ subroutine p\n    s = [character([1.]) :: 'x', 'y']      ! { dg-error \"INTEGER expression expected\" }\n    s = [character([1d1]) :: 'x', 'y']     ! { dg-error \"INTEGER expression expected\" }\n    s = [character([(0.,1.)]) :: 'x', 'y'] ! { dg-error \"INTEGER expression expected\" }\n-   s = [character([null()]) :: 'x', 'y']  ! { dg-error \"INTEGER expression expected\" }\n    s =  [character(null()) :: 'x', 'y']   ! { dg-error \"INTEGER expression expected\" }\n    call foo(s)\n end subroutine p"}, {"sha": "e0caed102d71bdaf6175a269f08d80653afb27e5", "filename": "gcc/testsuite/gfortran.dg/pr86059.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr86059.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f2fc3252c04fbd51de8d0ff95bb85e2049f0887/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr86059.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr86059.f90?ref=2f2fc3252c04fbd51de8d0ff95bb85e2049f0887", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile }\n+! PR fortran/86059\n+program foo\n+   integer :: i(2) = [ null(), 1 ]           ! { dg-error \"cannot appear in an array constructor\" }\n+   integer :: j(2) = [ (null(), n = 1, 2) ]  ! { dg-error \"cannot appear in an array constructor\" }\n+   integer k(2)\n+   k = 42 + [1, null()]                      ! { dg-error \"cannot appear in an array constructor\" }\n+end program foo"}]}