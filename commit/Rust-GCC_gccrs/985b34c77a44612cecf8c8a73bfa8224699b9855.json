{"sha": "985b34c77a44612cecf8c8a73bfa8224699b9855", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg1YjM0Yzc3YTQ0NjEyY2VjZjhjOGE3M2JmYTgyMjQ2OTliOTg1NQ==", "commit": {"author": {"name": "Joel Brobecker", "email": "brobecker@adacore.com", "date": "2011-07-01T17:51:05Z"}, "committer": {"name": "Joel Brobecker", "email": "brobecke@gcc.gnu.org", "date": "2011-07-01T17:51:05Z"}, "message": "Darwin has case-insensitive filesystems\n\nHFS+, the FS on Darwin, is case insensitive. So this patch adjusts\nfilename_cmp.c to ignore the casing when comparing filenames on Darwin.\n\ninclude/ChangeLog:\n\n        * filenames.h (HAVE_CASE_INSENSITIVE_FILE_SYSTEM): Define\n        on Darwin, as well as on the systems that use a DOS-like\n        filesystem.\n\nlibiberty/ChangeLog:\n\n        * filename_cmp.c (filename_cmp, filename_ncmp): Add handling of\n        HAVE_CASE_INSENSITIVE_FILE_SYSTEM.\n\nFrom-SVN: r175762", "tree": {"sha": "2101553adc801554eb75138475f104cfda9d278b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2101553adc801554eb75138475f104cfda9d278b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/985b34c77a44612cecf8c8a73bfa8224699b9855", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/985b34c77a44612cecf8c8a73bfa8224699b9855", "html_url": "https://github.com/Rust-GCC/gccrs/commit/985b34c77a44612cecf8c8a73bfa8224699b9855", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/985b34c77a44612cecf8c8a73bfa8224699b9855/comments", "author": {"login": "brobecke", "id": 11981700, "node_id": "MDQ6VXNlcjExOTgxNzAw", "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brobecke", "html_url": "https://github.com/brobecke", "followers_url": "https://api.github.com/users/brobecke/followers", "following_url": "https://api.github.com/users/brobecke/following{/other_user}", "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}", "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions", "organizations_url": "https://api.github.com/users/brobecke/orgs", "repos_url": "https://api.github.com/users/brobecke/repos", "events_url": "https://api.github.com/users/brobecke/events{/privacy}", "received_events_url": "https://api.github.com/users/brobecke/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cb0ad104286a76447490333ce7f94a2f557a5914", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb0ad104286a76447490333ce7f94a2f557a5914", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb0ad104286a76447490333ce7f94a2f557a5914"}], "stats": {"total": 47, "additions": 41, "deletions": 6}, "files": [{"sha": "a05663a27655647743109db43d62710184635f31", "filename": "include/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/985b34c77a44612cecf8c8a73bfa8224699b9855/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/985b34c77a44612cecf8c8a73bfa8224699b9855/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=985b34c77a44612cecf8c8a73bfa8224699b9855", "patch": "@@ -1,3 +1,9 @@\n+2011-07-01  Joel Brobecker  <brobecker@adacore.com>\n+\n+\t* filenames.h (HAVE_CASE_INSENSITIVE_FILE_SYSTEM): Define\n+\ton Darwin, as well as on the systems that use a DOS-like\n+\tfilesystem.\n+\n 2011-06-22  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/47858"}, {"sha": "75ec3302d1d0a9764c86efaf2c25fd69c0708c6a", "filename": "include/filenames.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/985b34c77a44612cecf8c8a73bfa8224699b9855/include%2Ffilenames.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/985b34c77a44612cecf8c8a73bfa8224699b9855/include%2Ffilenames.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Ffilenames.h?ref=985b34c77a44612cecf8c8a73bfa8224699b9855", "patch": "@@ -34,10 +34,18 @@ extern \"C\" {\n #  ifndef HAVE_DOS_BASED_FILE_SYSTEM\n #    define HAVE_DOS_BASED_FILE_SYSTEM 1\n #  endif\n+#  ifndef HAVE_CASE_INSENSITIVE_FILE_SYSTEM\n+#    define HAVE_CASE_INSENSITIVE_FILE_SYSTEM 1\n+#  endif\n #  define HAS_DRIVE_SPEC(f) HAS_DOS_DRIVE_SPEC (f)\n #  define IS_DIR_SEPARATOR(c) IS_DOS_DIR_SEPARATOR (c)\n #  define IS_ABSOLUTE_PATH(f) IS_DOS_ABSOLUTE_PATH (f)\n #else /* not DOSish */\n+#  if defined(__APPLE__)\n+#    ifndef HAVE_CASE_INSENSITIVE_FILE_SYSTEM\n+#      define HAVE_CASE_INSENSITIVE_FILE_SYSTEM 1\n+#    endif\n+#  endif /* __APPLE__ */\n #  define HAS_DRIVE_SPEC(f) (0)\n #  define IS_DIR_SEPARATOR(c) IS_UNIX_DIR_SEPARATOR (c)\n #  define IS_ABSOLUTE_PATH(f) IS_UNIX_ABSOLUTE_PATH (f)"}, {"sha": "2f8e73497d9f0cfbd0daddd5d9d4417aad6b3d10", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/985b34c77a44612cecf8c8a73bfa8224699b9855/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/985b34c77a44612cecf8c8a73bfa8224699b9855/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=985b34c77a44612cecf8c8a73bfa8224699b9855", "patch": "@@ -1,3 +1,8 @@\n+2011-07-01  Joel Brobecker  <brobecker@adacore.com>\n+\n+\t* filename_cmp.c (filename_cmp, filename_ncmp): Add handling of\n+\tHAVE_CASE_INSENSITIVE_FILE_SYSTEM.\n+\n 2011-07-01  Jan Kratochvil  <jan.kratochvil@redhat.com>\n \n \tPR debug/49408"}, {"sha": "5179f8dd14ff40b3ebcefc1c36d9ee9f278ed53c", "filename": "libiberty/filename_cmp.c", "status": "modified", "additions": 22, "deletions": 6, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/985b34c77a44612cecf8c8a73bfa8224699b9855/libiberty%2Ffilename_cmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/985b34c77a44612cecf8c8a73bfa8224699b9855/libiberty%2Ffilename_cmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ffilename_cmp.c?ref=985b34c77a44612cecf8c8a73bfa8224699b9855", "patch": "@@ -50,19 +50,27 @@ and backward slashes are equal.\n int\n filename_cmp (const char *s1, const char *s2)\n {\n-#ifndef HAVE_DOS_BASED_FILE_SYSTEM\n+#if !defined(HAVE_DOS_BASED_FILE_SYSTEM) \\\n+    && !defined(HAVE_CASE_INSENSITIVE_FILE_SYSTEM)\n   return strcmp(s1, s2);\n #else\n   for (;;)\n     {\n-      int c1 = TOLOWER (*s1);\n-      int c2 = TOLOWER (*s2);\n+      int c1 = *s1;\n+      int c2 = *s2;\n \n+#if defined (HAVE_CASE_INSENSITIVE_FILE_SYSTEM)\n+      c1 = TOLOWER (c1);\n+      c2 = TOLOWER (c2);\n+#endif\n+\n+#if defined (HAVE_DOS_BASED_FILE_SYSTEM)\n       /* On DOS-based file systems, the '/' and the '\\' are equivalent.  */\n       if (c1 == '/')\n         c1 = '\\\\';\n       if (c2 == '/')\n         c2 = '\\\\';\n+#endif\n \n       if (c1 != c2)\n         return (c1 - c2);\n@@ -100,21 +108,29 @@ and backward slashes are equal.\n int\n filename_ncmp (const char *s1, const char *s2, size_t n)\n {\n-#ifndef HAVE_DOS_BASED_FILE_SYSTEM\n+#if !defined(HAVE_DOS_BASED_FILE_SYSTEM) \\\n+    && !defined(HAVE_CASE_INSENSITIVE_FILE_SYSTEM)\n   return strncmp(s1, s2, n);\n #else\n   if (!n)\n     return 0;\n   for (; n > 0; --n)\n   {\n-      int c1 = TOLOWER (*s1);\n-      int c2 = TOLOWER (*s2);\n+      int c1 = *s1;\n+      int c2 = *s2;\n \n+#if defined (HAVE_CASE_INSENSITIVE_FILE_SYSTEM)\n+      c1 = TOLOWER (c1);\n+      c2 = TOLOWER (c2);\n+#endif\n+\n+#if defined (HAVE_DOS_BASED_FILE_SYSTEM)\n       /* On DOS-based file systems, the '/' and the '\\' are equivalent.  */\n       if (c1 == '/')\n         c1 = '\\\\';\n       if (c2 == '/')\n         c2 = '\\\\';\n+#endif\n \n       if (c1 == '\\0' || c1 != c2)\n         return (c1 - c2);"}]}