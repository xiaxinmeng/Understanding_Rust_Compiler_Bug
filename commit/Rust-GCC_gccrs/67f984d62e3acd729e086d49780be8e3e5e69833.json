{"sha": "67f984d62e3acd729e086d49780be8e3e5e69833", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdmOTg0ZDYyZTNhY2Q3MjllMDg2ZDQ5NzgwYmU4ZTNlNWU2OTgzMw==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-10-03T23:03:54Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-10-11T13:28:53Z"}, "message": "testsuite, Objective-C : Compatibility fixes.\n\nChanges to deal with warnings and/or errors seen when compiling the\ntests with clang.\n\ngcc/testsuite/ChangeLog:\n\n\t* objc-obj-c++-shared/TestsuiteObject.h: If the compiler\n\tsupports objc_root_object attributes, then mark the testsuite\n\tobject accordingly.\n\t* objc-obj-c++-shared/TestsuiteObject.m: Avoid direct access\n\tto isa, which is an error for modern Objective-C.\n\t* objc/execute/class-tests-1.h: Declare a string function we\n\tuse locally (avoid pulling in the whole of string.h).", "tree": {"sha": "981332f097cb4bbb14540472c4642a7943a5a8e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/981332f097cb4bbb14540472c4642a7943a5a8e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67f984d62e3acd729e086d49780be8e3e5e69833", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67f984d62e3acd729e086d49780be8e3e5e69833", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67f984d62e3acd729e086d49780be8e3e5e69833", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67f984d62e3acd729e086d49780be8e3e5e69833/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8703bf5d31fdb4789b5eddca394f8e92a0c55801", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8703bf5d31fdb4789b5eddca394f8e92a0c55801", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8703bf5d31fdb4789b5eddca394f8e92a0c55801"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "0f139bc84b4861bd3e4748992df9e776244e5cb9", "filename": "gcc/testsuite/objc-obj-c++-shared/TestsuiteObject.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67f984d62e3acd729e086d49780be8e3e5e69833/gcc%2Ftestsuite%2Fobjc-obj-c%2B%2B-shared%2FTestsuiteObject.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67f984d62e3acd729e086d49780be8e3e5e69833/gcc%2Ftestsuite%2Fobjc-obj-c%2B%2B-shared%2FTestsuiteObject.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc-obj-c%2B%2B-shared%2FTestsuiteObject.h?ref=67f984d62e3acd729e086d49780be8e3e5e69833", "patch": "@@ -24,6 +24,9 @@ along with GCC; see the file COPYING3.  If not see\n /* We use this root class instead of Object to keep the tests\n    independent of the runtime being used.  Keep it simple.  */\n \n+#if defined(__has_attribute) && __has_attribute(objc_root_class)\n+__attribute__((objc_root_class))\n+#endif\n @interface TestsuiteObject\n {\n   Class isa;"}, {"sha": "703827f8e6132067a7d83dd6fc0411462d4988aa", "filename": "gcc/testsuite/objc-obj-c++-shared/TestsuiteObject.m", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67f984d62e3acd729e086d49780be8e3e5e69833/gcc%2Ftestsuite%2Fobjc-obj-c%2B%2B-shared%2FTestsuiteObject.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67f984d62e3acd729e086d49780be8e3e5e69833/gcc%2Ftestsuite%2Fobjc-obj-c%2B%2B-shared%2FTestsuiteObject.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc-obj-c%2B%2B-shared%2FTestsuiteObject.m?ref=67f984d62e3acd729e086d49780be8e3e5e69833", "patch": "@@ -64,6 +64,6 @@ + (const char *)name\n }\n - (const char *)name\n {\n-  return class_getName (isa);\n+  return object_getClassName (self);\n }\n @end"}, {"sha": "65f1f70234edb92a356dc5e94cd1213600d76e6f", "filename": "gcc/testsuite/objc/execute/class-tests-1.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67f984d62e3acd729e086d49780be8e3e5e69833/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fclass-tests-1.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67f984d62e3acd729e086d49780be8e3e5e69833/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fclass-tests-1.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fclass-tests-1.h?ref=67f984d62e3acd729e086d49780be8e3e5e69833", "patch": "@@ -4,6 +4,8 @@\n #include <stdlib.h>\n #include \"../../objc-obj-c++-shared/runtime.h\"\n \n+extern int strcmp(const char *, const char *);\n+\n /*\n  * Standard Tests For Classes and Objects - abort upon failing; return\n  * normally if all is well."}]}