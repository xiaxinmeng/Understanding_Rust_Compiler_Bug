{"sha": "1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWNmZDM4YmVhMzQ0YzI3NDJhMDU3ZjIzZWU2MzZjOWQxY2NkNWJiOA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-01-18T09:57:11Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-01-18T09:57:11Z"}, "message": "re PR tree-optimization/42781 (ICE in pt_solutions_same_restrict_base, at tree-ssa-structalias.c:5072)\n\n2010-01-18  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/42781\n\t* tree-ssa-structalias.c (find_what_var_points_to): Skip\n\trestrict processing only if the original variable was\n\tartificial.\n\n\t* gfortran.fortran-torture/compile/pr42781.f90: New testcase.\n\nFrom-SVN: r156006", "tree": {"sha": "263e2efcdc0579dc1cab4be734a4ef34e7d77d56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/263e2efcdc0579dc1cab4be734a4ef34e7d77d56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f7746c594182ce282072b665567d2eb6a7589151", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7746c594182ce282072b665567d2eb6a7589151", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7746c594182ce282072b665567d2eb6a7589151"}], "stats": {"total": 78, "additions": 75, "deletions": 3}, "files": [{"sha": "2ad9c06d356a6ad34c182d083b000bdc087ce86d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "patch": "@@ -1,3 +1,10 @@\n+2010-01-18  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/42781\n+\t* tree-ssa-structalias.c (find_what_var_points_to): Skip\n+\trestrict processing only if the original variable was\n+\tartificial.\n+\n 2010-01-18  Joern Rennecke  <amylaar@spamcop.net>\n \n \t* doc/tm.texi (TARGET_ASM_FUNCTION_EPILOGUE): Update text on where to"}, {"sha": "dabbca1ada6a9bc796d8b44fd45ea0f6bdca9592", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "patch": "@@ -1,3 +1,8 @@\n+2010-01-18  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/42781\n+\t* gfortran.fortran-torture/compile/pr42781.f90: New testcase.\n+\n 2010-01-17  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/42248"}, {"sha": "952285063456b846d8090939c5e7946db38aab89", "filename": "gcc/testsuite/gfortran.fortran-torture/compile/pr42781.f90", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr42781.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr42781.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr42781.f90?ref=1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "patch": "@@ -0,0 +1,59 @@\n+! ICE with gfortran 4.5 at -O1:\n+!gfcbug98.f90: In function \u2018convert_cof\u2019:\n+!gfcbug98.f90:36:0: internal compiler error: in pt_solutions_same_restrict_base,\n+!at tree-ssa-structalias.c:5072\n+module foo\n+  implicit none\n+  type t_time\n+     integer :: secs = 0\n+  end type t_time\n+contains\n+  elemental function time_cyyyymmddhh (cyyyymmddhh) result (time)\n+    type (t_time)                :: time\n+    character(len=10),intent(in) :: cyyyymmddhh\n+  end function time_cyyyymmddhh\n+\n+  function nf90_open(path, mode, ncid)\n+    character(len = *), intent(in) :: path\n+    integer, intent(in)  :: mode\n+    integer, intent(out) :: ncid\n+    integer              :: nf90_open\n+  end function nf90_open\n+end module foo\n+!==============================================================================\n+module gfcbug98\n+  use foo\n+  implicit none\n+\n+  type t_fileinfo\n+     character(len=10) :: atime = ' '\n+  end type t_fileinfo\n+\n+  type t_body\n+     real         :: bg(10)\n+  end type t_body\n+contains\n+  subroutine convert_cof (ifile)\n+    character(len=*) ,intent(in) :: ifile\n+\n+    character(len=5)         :: version\n+    type(t_fileinfo)         :: gattr\n+    type(t_time)             :: atime\n+    type(t_body),allocatable :: tmp_dat(:)\n+    real        ,allocatable :: BDA(:, :, :)\n+\n+    call open_input\n+    call convert_data\n+  contains\n+    subroutine open_input\n+      integer             :: i,j\n+      version = ''\n+      j = nf90_open(ifile, 1, i)\n+    end subroutine open_input\n+    !--------------------------------------------------------------------------\n+    subroutine convert_data\n+      BDA(1,:,1) = tmp_dat(1)% bg(:)\n+      atime = time_cyyyymmddhh (gattr% atime)\n+    end subroutine convert_data\n+  end subroutine convert_cof\n+end module gfcbug98"}, {"sha": "3db28745f1a8123ae9e5e19ebde8cd0bb5e7a1f9", "filename": "gcc/tree-ssa-structalias.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2Ftree-ssa-structalias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfd38bea344c2742a057f23ee636c9d1ccd5bb8/gcc%2Ftree-ssa-structalias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-structalias.c?ref=1cfd38bea344c2742a057f23ee636c9d1ccd5bb8", "patch": "@@ -4776,18 +4776,19 @@ set_uids_in_ptset (bitmap into, bitmap from, struct pt_solution *pt)\n /* Compute the points-to solution *PT for the variable VI.  */\n \n static void\n-find_what_var_points_to (varinfo_t vi, struct pt_solution *pt)\n+find_what_var_points_to (varinfo_t orig_vi, struct pt_solution *pt)\n {\n   unsigned int i;\n   bitmap_iterator bi;\n   bitmap finished_solution;\n   bitmap result;\n+  varinfo_t vi;\n \n   memset (pt, 0, sizeof (struct pt_solution));\n \n   /* This variable may have been collapsed, let's get the real\n      variable.  */\n-  vi = get_varinfo (find (vi->id));\n+  vi = get_varinfo (find (orig_vi->id));\n \n   /* Translate artificial variables into SSA_NAME_PTR_INFO\n      attributes.  */\n@@ -4822,7 +4823,7 @@ find_what_var_points_to (varinfo_t vi, struct pt_solution *pt)\n   /* Instead of doing extra work, simply do not create\n      elaborate points-to information for pt_anything pointers.  */\n   if (pt->anything\n-      && (vi->is_artificial_var\n+      && (orig_vi->is_artificial_var\n \t  || !pt->vars_contains_restrict))\n     return;\n "}]}