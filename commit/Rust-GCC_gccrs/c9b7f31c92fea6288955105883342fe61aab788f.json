{"sha": "c9b7f31c92fea6288955105883342fe61aab788f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzliN2YzMWM5MmZlYTYyODg5NTUxMDU4ODMzNDJmZTYxYWFiNzg4Zg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-29T06:06:53Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-29T06:06:53Z"}, "message": "(build_c_cast): Don't warn about size change between\npointer and integer if the value is constant.\n\nFrom-SVN: r2645", "tree": {"sha": "d68a96b9fc6e083572db64d7b0bb5c72d4783a9b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d68a96b9fc6e083572db64d7b0bb5c72d4783a9b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9b7f31c92fea6288955105883342fe61aab788f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9b7f31c92fea6288955105883342fe61aab788f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9b7f31c92fea6288955105883342fe61aab788f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9b7f31c92fea6288955105883342fe61aab788f/comments", "author": null, "committer": null, "parents": [{"sha": "d92761c01547fe487de4e3a9249e5189ee8cb0fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d92761c01547fe487de4e3a9249e5189ee8cb0fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d92761c01547fe487de4e3a9249e5189ee8cb0fd"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "f06423e61ef7e6117254371ff00ee992e2b7326b", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9b7f31c92fea6288955105883342fe61aab788f/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9b7f31c92fea6288955105883342fe61aab788f/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=c9b7f31c92fea6288955105883342fe61aab788f", "patch": "@@ -3752,15 +3752,20 @@ build_c_cast (type, expr)\n \n       if (TREE_CODE (type) == INTEGER_TYPE\n \t  && TREE_CODE (otype) == POINTER_TYPE\n-\t  && TYPE_PRECISION (type) != TYPE_PRECISION (otype))\n+\t  && TYPE_PRECISION (type) != TYPE_PRECISION (otype)\n+\t  && !TREE_CONSTANT (value))\n \twarning (\"cast from pointer to integer of different size\");\n \n       if (TREE_CODE (type) == POINTER_TYPE\n \t  && TREE_CODE (otype) == INTEGER_TYPE\n \t  && TYPE_PRECISION (type) != TYPE_PRECISION (otype)\n+#if 0\n \t  /* Don't warn about converting 0 to pointer,\n \t     provided the 0 was explicit--not cast or made by folding.  */\n-\t  && !(TREE_CODE (value) == INTEGER_CST && integer_zerop (value)))\n+\t  && !(TREE_CODE (value) == INTEGER_CST && integer_zerop (value))\n+#endif\n+\t  /* Don't warn about converting any constant.  */\n+\t  && !TREE_CONSTANT (value))\n \twarning (\"cast to pointer from integer of different size\");\n \n       value = convert (type, value);"}]}