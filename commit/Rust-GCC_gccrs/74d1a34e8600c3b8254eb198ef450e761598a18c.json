{"sha": "74d1a34e8600c3b8254eb198ef450e761598a18c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzRkMWEzNGU4NjAwYzNiODI1NGViMTk4ZWY0NTBlNzYxNTk4YTE4Yw==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2012-01-04T11:51:37Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2012-01-04T11:51:37Z"}, "message": "re PR fortran/49693 (Spurious \"unused-variable\" warnings for COMMON block module variables.)\n\n2012-01-04  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/49693\n\t* trans-common.c (create_common): Update copyright years.  Mark\n\tvariables as used to avoid warnings about unused variables in\n\tcommon blocks.\n\n2012-01-04  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/49693\n\t* gfortran.dg/common_17.f90:  New test.\n\nFrom-SVN: r182869", "tree": {"sha": "4f7a38767df412f3c9e721f2e59451985054ff7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f7a38767df412f3c9e721f2e59451985054ff7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74d1a34e8600c3b8254eb198ef450e761598a18c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74d1a34e8600c3b8254eb198ef450e761598a18c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74d1a34e8600c3b8254eb198ef450e761598a18c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74d1a34e8600c3b8254eb198ef450e761598a18c/comments", "author": null, "committer": null, "parents": [{"sha": "925b0ed82128abe666ae80e17e2191a786dde654", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/925b0ed82128abe666ae80e17e2191a786dde654", "html_url": "https://github.com/Rust-GCC/gccrs/commit/925b0ed82128abe666ae80e17e2191a786dde654"}], "stats": {"total": 30, "additions": 28, "deletions": 2}, "files": [{"sha": "305646fef5fdaa008c0621775da5420246b96a81", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=74d1a34e8600c3b8254eb198ef450e761598a18c", "patch": "@@ -1,3 +1,10 @@\n+2012-01-04  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/49693\n+\t* trans-common.c (create_common): Update copyright years.  Mark\n+\tvariables as used to avoid warnings about unused variables in\n+\tcommon blocks.\n+\n 2012-01-03  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* gfortran.h (struct gfc_expr): Add missing \"struct\""}, {"sha": "22aa3502dbd6c423cc96a6d410ae9638a3838b86", "filename": "gcc/fortran/trans-common.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ffortran%2Ftrans-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ffortran%2Ftrans-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-common.c?ref=74d1a34e8600c3b8254eb198ef450e761598a18c", "patch": "@@ -1,5 +1,6 @@\n /* Common block and equivalence list handling\n-   Copyright (C) 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n+   Copyright (C) 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n+   2011, 2012\n    Free Software Foundation, Inc.\n    Contributed by Canqun Yang <canqun@nudt.edu.cn>\n \n@@ -689,7 +690,9 @@ create_common (gfc_common_head *com, segment_info *head, bool saw_equiv)\n \t\t\t     VAR_DECL, DECL_NAME (s->field),\n \t\t\t     TREE_TYPE (s->field));\n       TREE_STATIC (var_decl) = TREE_STATIC (decl);\n-      TREE_USED (var_decl) = TREE_USED (decl);\n+      /* Mark the variable as used in order to avoid warnings about\n+\t unused variables.  */\n+      TREE_USED (var_decl) = 1;\n       if (s->sym->attr.use_assoc)\n \tDECL_IGNORED_P (var_decl) = 1;\n       if (s->sym->attr.target)"}, {"sha": "e6c002f2c8dd7d0f1ec0409169e34a012eeb4229", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=74d1a34e8600c3b8254eb198ef450e761598a18c", "patch": "@@ -1,3 +1,8 @@\n+2012-01-04  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/49693\n+\t* gfortran.dg/common_17.f90:  New test.\n+\n 2012-01-04  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/49651"}, {"sha": "8ac21e7afda83096af62f8bdd2cbc0932106941b", "filename": "gcc/testsuite/gfortran.dg/common_17.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ftestsuite%2Fgfortran.dg%2Fcommon_17.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74d1a34e8600c3b8254eb198ef450e761598a18c/gcc%2Ftestsuite%2Fgfortran.dg%2Fcommon_17.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcommon_17.f90?ref=74d1a34e8600c3b8254eb198ef450e761598a18c", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! { dg-options \"-Wall\" }\n+! PR fortran/49693 - this used to cause a spurious warning for the\n+! variable in the common block.\n+! Test case by Stephan Kramer.\n+module foo\n+  implicit none\n+  integer:: a, b\n+  common a\n+end module foo\n+! { dg-final { cleanup-modules \"foo\" } }"}]}