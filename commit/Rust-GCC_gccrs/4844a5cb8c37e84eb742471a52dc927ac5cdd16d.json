{"sha": "4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDg0NGE1Y2I4YzM3ZTg0ZWI3NDI0NzFhNTJkYzkyN2FjNWNkZDE2ZA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-09-04T23:21:12Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-09-04T23:21:12Z"}, "message": "re PR fortran/91650 (ICE in gfc_conv_constant_to_tree, at fortran/trans-const.c:370)\n\n2019-09-04  Steven G. Kargl  <kargl@gcvc.gnu.org>\n\n\tPR fortran/91650\n\t* io.c (match_io_element):  An output IO list item cannot be a BOZ.\n\n2019-09-04  Steven G. Kargl  <kargl@gcvc.gnu.org>\n\n\tPR fortran/91650\n\t* gfortran.dg/pr91650_1.f90: New test.\n\t* gfortran.dg/pr91650_2.f90: Ditto.\n\nFrom-SVN: r275391", "tree": {"sha": "ab5bea8c9a813eebeb3e60df53412cc4081db095", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab5bea8c9a813eebeb3e60df53412cc4081db095"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/comments", "author": null, "committer": null, "parents": [{"sha": "ad4d1d21ad5c515ba90355d13b14cbb74262edd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad4d1d21ad5c515ba90355d13b14cbb74262edd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad4d1d21ad5c515ba90355d13b14cbb74262edd2"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "4da49108c9de60ed57fbcb307d8967e885479c8d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "patch": "@@ -1,3 +1,8 @@\n+2019-09-04  Steven G. Kargl  <kargl@gcvc.gnu.org>\n+\n+\tPR fortran/91650\n+\t* io.c (match_io_element):  An output IO list item cannot be a BOZ.\n+\n 2019-09-03  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \t* gfortran.texi: Update documentation to catch up with BOZ changes."}, {"sha": "d57b7471da21d5a0e2a1061e817075d77be493dd", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "patch": "@@ -3675,6 +3675,15 @@ match_io_element (io_kind k, gfc_code **cpp)\n       if (m == MATCH_NO)\n \tgfc_error (\"Expected expression in %s statement at %C\",\n \t\t   io_kind_name (k));\n+\n+      if (m == MATCH_YES && expr->ts.type == BT_BOZ)\n+\t{\n+\t  if (gfc_invalid_boz (\"BOZ literal constant at %L cannot appear in \"\n+\t\t\t\t\"an output IO list\", &gfc_current_locus))\n+\t    return MATCH_ERROR;\n+\t  if (!gfc_boz2int (expr, gfc_max_integer_kind))\n+\t    return MATCH_ERROR;\n+\t};\n     }\n \n   if (m == MATCH_YES && k == M_READ && gfc_check_do_variable (expr->symtree))"}, {"sha": "11d6fab7044f8422ac3b4f28a64a557e47faa2e5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "patch": "@@ -1,3 +1,9 @@\n+2019-09-04  Steven G. Kargl  <kargl@gcvc.gnu.org>\n+\n+\tPR fortran/91650\n+\t* gfortran.dg/pr91650_1.f90: New test.\n+\t* gfortran.dg/pr91650_2.f90: Ditto.\n+\n 2019-09-04  Marek Polacek  <polacek@redhat.com>\n \n \t* g++.dg/cpp0x/initlist-deduce.C: Don't use -fdeduce-init-list.  Remove"}, {"sha": "1cda096c422d632588813aec7e452c2aba1d48f9", "filename": "gcc/testsuite/gfortran.dg/pr91650_1.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91650_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91650_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91650_1.f90?ref=4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile }\n+! PR fortran/91650\n+! Code contributed by Gerhard Steinmetz.\n+program p\n+   print *, b'10110' ! { dg-error \"cannot appear in an output IO list\" }\n+   print *, o'10110' ! { dg-error \"cannot appear in an output IO list\" }\n+   print *, z'10110' ! { dg-error \"cannot appear in an output IO list\" }\n+end"}, {"sha": "28316ec1de5b98c2730df202a1b4bfcc1abe5545", "filename": "gcc/testsuite/gfortran.dg/pr91650_2.f90", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91650_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4844a5cb8c37e84eb742471a52dc927ac5cdd16d/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91650_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91650_2.f90?ref=4844a5cb8c37e84eb742471a52dc927ac5cdd16d", "patch": "@@ -0,0 +1,13 @@\n+! { dg-do compile }\n+! { dg-options \"-fallow-invalid-boz\" }\n+! PR fortran/91650\n+! Code contributed by Gerhard Steinmetz.\n+program p\n+   character(len=60) str\n+   write(str,*) b'10110' ! { dg-warning \"cannot appear in an output IO list\" }\n+   if (trim(adjustl(str)) /= '22') stop 1\n+   write(str,*) o'10110' ! { dg-warning \"cannot appear in an output IO list\" }\n+   if (trim(adjustl(str)) /= '4168') stop 2\n+   write(str,*) z'10110' ! { dg-warning \"cannot appear in an output IO list\" }\n+   if (trim(adjustl(str)) /= '65808') stop 3\n+end"}]}