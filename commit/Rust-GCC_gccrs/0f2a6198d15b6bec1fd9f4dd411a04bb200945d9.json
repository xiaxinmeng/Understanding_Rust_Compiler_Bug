{"sha": "0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGYyYTYxOThkMTViNmJlYzFmZDlmNGRkNDExYTA0YmIyMDA5NDVkOQ==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-03-11T14:13:49Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-03-11T14:13:49Z"}, "message": "re PR fortran/47768 (ICE: printing a derived-type variable with proc-pointer components)\n\n2011-03-11  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/47768\n\t* module.c (ab_attribute,attr_bits): Add AB_PROC_POINTER_COMP.\n\t(mio_symbol_attribute): Handle attribute 'proc_pointer_comp'.\n\n2011-03-11  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/47768\n\t* gfortran.dg/proc_ptr_comp_31.f90: New.\n\nFrom-SVN: r170871", "tree": {"sha": "e1ce9cd7209b8df941cfdbb87c7a0b47b479fa08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1ce9cd7209b8df941cfdbb87c7a0b47b479fa08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "62ecfeb8b90fa19e17dd1115fce791961b0f7a2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62ecfeb8b90fa19e17dd1115fce791961b0f7a2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62ecfeb8b90fa19e17dd1115fce791961b0f7a2e"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "a0b88054589dde63b8959242808736c0ed4f7f7c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "patch": "@@ -1,3 +1,9 @@\n+2011-03-11  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/47768\n+\t* module.c (ab_attribute,attr_bits): Add AB_PROC_POINTER_COMP.\n+\t(mio_symbol_attribute): Handle attribute 'proc_pointer_comp'.\n+\n 2011-03-06  Paul Thomas  <pault@gcc.gnu.org>\n \t    Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n "}, {"sha": "923f8c695e408385c37d25d6171c50ebdee420b8", "filename": "gcc/fortran/module.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ffortran%2Fmodule.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ffortran%2Fmodule.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmodule.c?ref=0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "patch": "@@ -1671,8 +1671,9 @@ typedef enum\n   AB_POINTER, AB_TARGET, AB_DUMMY, AB_RESULT, AB_DATA,\n   AB_IN_NAMELIST, AB_IN_COMMON, AB_FUNCTION, AB_SUBROUTINE, AB_SEQUENCE,\n   AB_ELEMENTAL, AB_PURE, AB_RECURSIVE, AB_GENERIC, AB_ALWAYS_EXPLICIT,\n-  AB_CRAY_POINTER, AB_CRAY_POINTEE, AB_THREADPRIVATE, AB_ALLOC_COMP,\n-  AB_POINTER_COMP, AB_PRIVATE_COMP, AB_VALUE, AB_VOLATILE, AB_PROTECTED,\n+  AB_CRAY_POINTER, AB_CRAY_POINTEE, AB_THREADPRIVATE,\n+  AB_ALLOC_COMP, AB_POINTER_COMP, AB_PROC_POINTER_COMP, AB_PRIVATE_COMP,\n+  AB_VALUE, AB_VOLATILE, AB_PROTECTED,\n   AB_IS_BIND_C, AB_IS_C_INTEROP, AB_IS_ISO_C, AB_ABSTRACT, AB_ZERO_COMP,\n   AB_IS_CLASS, AB_PROCEDURE, AB_PROC_POINTER, AB_ASYNCHRONOUS, AB_CODIMENSION,\n   AB_COARRAY_COMP, AB_VTYPE, AB_VTAB, AB_CONTIGUOUS, AB_CLASS_POINTER,\n@@ -1716,6 +1717,7 @@ static const mstring attr_bits[] =\n     minit (\"ALLOC_COMP\", AB_ALLOC_COMP),\n     minit (\"COARRAY_COMP\", AB_COARRAY_COMP),\n     minit (\"POINTER_COMP\", AB_POINTER_COMP),\n+    minit (\"PROC_POINTER_COMP\", AB_PROC_POINTER_COMP),\n     minit (\"PRIVATE_COMP\", AB_PRIVATE_COMP),\n     minit (\"ZERO_COMP\", AB_ZERO_COMP),\n     minit (\"PROTECTED\", AB_PROTECTED),\n@@ -1881,6 +1883,8 @@ mio_symbol_attribute (symbol_attribute *attr)\n \tMIO_NAME (ab_attribute) (AB_ALLOC_COMP, attr_bits);\n       if (attr->pointer_comp)\n \tMIO_NAME (ab_attribute) (AB_POINTER_COMP, attr_bits);\n+      if (attr->proc_pointer_comp)\n+\tMIO_NAME (ab_attribute) (AB_PROC_POINTER_COMP, attr_bits);\n       if (attr->private_comp)\n \tMIO_NAME (ab_attribute) (AB_PRIVATE_COMP, attr_bits);\n       if (attr->coarray_comp)\n@@ -2027,6 +2031,9 @@ mio_symbol_attribute (symbol_attribute *attr)\n \t    case AB_POINTER_COMP:\n \t      attr->pointer_comp = 1;\n \t      break;\n+\t    case AB_PROC_POINTER_COMP:\n+\t      attr->proc_pointer_comp = 1;\n+\t      break;\n \t    case AB_PRIVATE_COMP:\n \t      attr->private_comp = 1;\n \t      break;"}, {"sha": "54d77a6d2535c9f5b6c513f28115de74fd27ca83", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "patch": "@@ -1,3 +1,8 @@\n+2011-03-11  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/47768\n+\t* gfortran.dg/proc_ptr_comp_31.f90: New.\n+\n 2011-03-11  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/47278"}, {"sha": "6a5d8c967e20a93ee36ea0f1ac9ea45bdbd6c92a", "filename": "gcc/testsuite/gfortran.dg/proc_ptr_comp_31.f90", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_comp_31.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f2a6198d15b6bec1fd9f4dd411a04bb200945d9/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_comp_31.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_comp_31.f90?ref=0f2a6198d15b6bec1fd9f4dd411a04bb200945d9", "patch": "@@ -0,0 +1,22 @@\n+! { dg-do compile }\n+!\n+! PR 47768: printing a derived-type variable with proc-pointer components\n+!\n+! Contributed by Arjen Markus <arjen.markus895@gmail.com>\n+\n+module proc_pointers\n+  implicit none\n+  type :: rectangle\n+    real :: width, height\n+    procedure(real), pointer, nopass :: get_special_area\n+  end type\n+end module\n+\n+program test_objects\n+  use proc_pointers\n+  implicit none\n+  type(rectangle) :: rect\n+  write(*,*) rect          ! { dg-error \"cannot have procedure pointer components\" }\n+end program\n+\n+! { dg-final { cleanup-modules \"proc_pointers\" } }"}]}