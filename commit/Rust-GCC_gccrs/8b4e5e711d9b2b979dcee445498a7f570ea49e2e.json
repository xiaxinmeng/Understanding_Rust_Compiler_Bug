{"sha": "8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI0ZTVlNzExZDliMmI5NzlkY2VlNDQ1NDk4YTdmNTcwZWE0OWUyZQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-02T17:01:30Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-02T17:01:30Z"}, "message": "re PR fortran/91943 (ICE in gfc_conv_constant_to_tree, at fortran/trans-const.c:370)\n\n2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91943\n\t* match.c (gfc_match_call): BOZ cannot be an actual argument in\n\ta subroutine reference.\n\t* resolve.c (resolve_function): BOZ cannot be an actual argument in\n\ta function reference.\n \n2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91943\n\tgfortran.dg/pr91943.f90\n\nFrom-SVN: r276471", "tree": {"sha": "95139ba5c83855facfea0c6d13b90a158c9bdd6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95139ba5c83855facfea0c6d13b90a158c9bdd6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/comments", "author": null, "committer": null, "parents": [{"sha": "b1fb82e52520bf9be6dff67bbcd6129ae85bc098", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1fb82e52520bf9be6dff67bbcd6129ae85bc098", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1fb82e52520bf9be6dff67bbcd6129ae85bc098"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "f225ff2ced68e780c1e56ee34f16c6e940b3259c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "patch": "@@ -1,3 +1,11 @@\n+2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91943\n+\t* match.c (gfc_match_call): BOZ cannot be an actual argument in\n+\ta subroutine reference.\n+\t* resolve.c (resolve_function): BOZ cannot be an actual argument in\n+\ta function reference.\n+ \n 2019-10-01  Jan Hubicka  <jh@suse.cz>\n \n \t* module.c (load_commons): Initialize flags to 0 to silecne"}, {"sha": "4a31080a285647eeb779a03062b0a83415d5b5a9", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "patch": "@@ -4984,6 +4984,16 @@ gfc_match_call (void)\n \tgoto syntax;\n     }\n \n+  /* Walk the argument list looking for invalid BOZ.  */\n+  for (a = arglist; a; a = a->next)\n+    if (a->expr && a->expr->ts.type == BT_BOZ)\n+      {\n+\tgfc_error (\"A BOZ literal constant at %L cannot appear as an actual \"\n+\t\t   \"argument in a subroutine reference\", &a->expr->where);\n+\tgoto cleanup;\n+      }\n+\n+\n   /* If any alternate return labels were found, construct a SELECT\n      statement that will jump to the right place.  */\n "}, {"sha": "a7925477a7fbff1a45652c556e01c07997e6653b", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "patch": "@@ -3242,6 +3242,21 @@ resolve_function (gfc_expr *expr)\n   if (expr->expr_type != EXPR_FUNCTION)\n     return t;\n \n+  /* Walk the argument list looking for invalid BOZ.  */\n+  if (expr->value.function.esym)\n+    {\n+      gfc_actual_arglist *a;\n+\n+      for (a = expr->value.function.actual; a; a = a->next)\n+\tif (a->expr && a->expr->ts.type == BT_BOZ)\n+\t  {\n+\t    gfc_error (\"A BOZ literal constant at %L cannot appear as an \"\n+\t\t\t\"actual argument in a function reference\",\n+\t\t\t&a->expr->where);\n+\t    return false;\n+\t  }\n+    }\n+\n   temp = need_full_assumed_size;\n   need_full_assumed_size = 0;\n "}, {"sha": "3256a02f7a05cd8fb320cffea3f9e1b3e27d0013", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "patch": "@@ -1,3 +1,8 @@\n+2019-10-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91943\n+\tgfortran.dg/pr91943.f90\n+\n 2019-10-02  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* g++.dg/tree-ssa/pr53844.C: Add -fno-inline-functions --param"}, {"sha": "c2752c54e7b36110d8a7d7b56886dbfc11c860e8", "filename": "gcc/testsuite/gfortran.dg/pr91943.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91943.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b4e5e711d9b2b979dcee445498a7f570ea49e2e/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91943.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91943.f90?ref=8b4e5e711d9b2b979dcee445498a7f570ea49e2e", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do compile }\n+! PR fortran/91943\n+! Code contributed by Gerhard Steinmetz\n+program p\n+   print *, f(b'1001')  ! { dg-error \"cannot appear as an actual argument\" }\n+   call sub(b'1001')    ! { dg-error \"cannot appear as an actual argument\" }\n+end"}]}