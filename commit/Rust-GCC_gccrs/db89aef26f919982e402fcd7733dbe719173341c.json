{"sha": "db89aef26f919982e402fcd7733dbe719173341c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI4OWFlZjI2ZjkxOTk4MmU0MDJmY2Q3NzMzZGJlNzE5MTczMzQxYw==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2006-10-31T17:50:47Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-10-31T17:50:47Z"}, "message": "bindusg.ads, [...]: Change to package and rename procedure as Display...\n\n2006-10-31  Robert Dewar  <dewar@adacore.com>\n\n\t* bindusg.ads, bindusg.adb:\n\tChange to package and rename procedure as Display, which\n\tnow ensures that it only outputs usage information once.\n\nFrom-SVN: r118246", "tree": {"sha": "8a87360456dfa94fb3c45bc6bebb13d1a2339f88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a87360456dfa94fb3c45bc6bebb13d1a2339f88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db89aef26f919982e402fcd7733dbe719173341c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db89aef26f919982e402fcd7733dbe719173341c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db89aef26f919982e402fcd7733dbe719173341c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db89aef26f919982e402fcd7733dbe719173341c/comments", "author": null, "committer": null, "parents": [{"sha": "bd8b9b1eae48aaa4350ab55e3175c4394b9e30c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd8b9b1eae48aaa4350ab55e3175c4394b9e30c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd8b9b1eae48aaa4350ab55e3175c4394b9e30c9"}], "stats": {"total": 291, "additions": 136, "deletions": 155}, "files": [{"sha": "427793467959c004d9155b4b93e9e8e6e5a63844", "filename": "gcc/ada/bindusg.adb", "status": "modified", "additions": 129, "deletions": 153, "changes": 282, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db89aef26f919982e402fcd7733dbe719173341c/gcc%2Fada%2Fbindusg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db89aef26f919982e402fcd7733dbe719173341c/gcc%2Fada%2Fbindusg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbindusg.adb?ref=db89aef26f919982e402fcd7733dbe719173341c", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                B o d y                                   --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,242 +27,218 @@\n with Osint;  use Osint;\n with Output; use Output;\n \n-procedure Bindusg is\n+package body Bindusg is\n \n---  Start of processing for Bindusg\n+   Already_Displayed : Boolean := False;\n+   --  Set True if Display called, used to avoid showing usage information\n+   --  more than once.\n \n-begin\n-   --  Usage line\n+   -------------\n+   -- Display --\n+   -------------\n \n-   Write_Str (\"Usage: \");\n-   Write_Program_Name;\n-   Write_Char (' ');\n-   Write_Str (\"switches lfile\");\n-   Write_Eol;\n-   Write_Eol;\n+   procedure Display is\n+   begin\n+      if Already_Displayed then\n+         return;\n+      else\n+         Already_Displayed := True;\n+      end if;\n \n-   --  Line for -aO switch\n+      --  Usage line\n \n-   Write_Str (\"  -aOdir    Specify library files search path\");\n-   Write_Eol;\n+      Write_Str (\"Usage: \");\n+      Write_Program_Name;\n+      Write_Char (' ');\n+      Write_Str (\"switches lfile\");\n+      Write_Eol;\n+      Write_Eol;\n \n-   --  Line for -aI switch\n+      --  Line for -aO switch\n \n-   Write_Str (\"  -aIdir    Specify source files search path\");\n-   Write_Eol;\n+      Write_Line (\"  -aOdir    Specify library files search path\");\n \n-   --  Line for a switch\n+      --  Line for -aI switch\n \n-   Write_Str (\"  -a        Automatically initialize elaboration procedure\");\n-   Write_Eol;\n+      Write_Line (\"  -aIdir    Specify source files search path\");\n \n-   --  Line for A switch\n+      --  Line for a switch\n \n-   Write_Str (\"  -A        Generate binder program in Ada (default)\");\n-   Write_Eol;\n+      Write_Line (\"  -a        Automatically initialize elaboration \" &\n+                  \"procedure\");\n \n-   --  Line for -b switch\n+      --  Line for A switch\n \n-   Write_Str (\"  -b        Generate brief messages to std\");\n-   Write_Str (\"err even if verbose mode set\");\n-   Write_Eol;\n+      Write_Line (\"  -A        Generate binder program in Ada (default)\");\n \n-   --  Line for -c switch\n+      --  Line for -b switch\n \n-   Write_Str (\"  -c        Check only, no generation of b\");\n-   Write_Str (\"inder output file\");\n-   Write_Eol;\n+      Write_Line (\"  -b        Generate brief messages to stderr \" &\n+                  \"even if verbose mode set\");\n \n-   --  Line for C switch\n+      --  Line for -c switch\n \n-   Write_Str (\"  -C        Generate binder program in C\");\n-   Write_Eol;\n+      Write_Line (\"  -c        Check only, no generation of \" &\n+                  \"binder output file\");\n \n-   --  Line for -d switch\n+      --  Line for C switch\n \n-   Write_Str (\"  -dnn[k|m] Default primary stack size = nn [kilo|mega] \");\n-   Write_Str (\"bytes \");\n-   Write_Eol;\n+      Write_Line (\"  -C        Generate binder program in C\");\n \n-   --  Line for D switch\n+      --  Line for -d switch\n \n-   Write_Str (\"  -Dnn[k|m] Default secondary stack size = nnn [kilo|mega] \");\n-   Write_Str (\"bytes\");\n-   Write_Eol;\n+      Write_Line (\"  -dnn[k|m] Default primary stack \" &\n+                  \"size = nn [kilo|mega] bytes\");\n \n-   --  Line for -e switch\n+      --  Line for D switch\n \n-   Write_Str (\"  -e        Output complete list of elabor\");\n-   Write_Str (\"ation order dependencies\");\n-   Write_Eol;\n+      Write_Line (\"  -Dnn[k|m] Default secondary stack \" &\n+                  \"size = nnn [kilo|mega] bytes\");\n \n-   --  Line for -E switch\n+      --  Line for -e switch\n \n-   Write_Str (\"  -E        Store tracebacks in Exception occurrences\");\n-   Write_Eol;\n+      Write_Line (\"  -e        Output complete list of elaboration \" &\n+                  \"order dependencies\");\n \n-   --  The -f switch is voluntarily omitted, because it is obsolete\n+      --  Line for -E switch\n \n-   --  Line for -F switch\n+      Write_Line (\"  -E        Store tracebacks in Exception occurrences\");\n \n-   Write_Str (\"  -F        Force checking of elaboration Flags\");\n-   Write_Eol;\n+      --  The -f switch is voluntarily omitted, because it is obsolete\n \n-   --  Line for -h switch\n+      --  Line for -F switch\n \n-   Write_Str (\"  -h        Output this usage (help) infor\");\n-   Write_Str (\"mation\");\n-   Write_Eol;\n+      Write_Line (\"  -F        Force checking of elaboration Flags\");\n \n-   --  Lines for -I switch\n+      --  Line for -h switch\n \n-   Write_Str (\"  -Idir     Specify library and source files search path\");\n-   Write_Eol;\n+      Write_Line (\"  -h        Output this usage (help) information\");\n \n-   Write_Str (\"  -I-       Don't look for sources & library files\");\n-   Write_Str (\" in default directory\");\n-   Write_Eol;\n+      --  Lines for -I switch\n \n-   --  Line for -K switch\n+      Write_Line (\"  -Idir     Specify library and source files search path\");\n+      Write_Line (\"  -I-       Don't look for sources & library files \" &\n+                  \"in default directory\");\n \n-   Write_Str (\"  -K        Give list of linker options specified for link\");\n-   Write_Eol;\n+      --  Line for -K switch\n \n-   --  Line for -l switch\n+      Write_Line (\"  -K        Give list of linker options specified \" &\n+                  \"for link\");\n \n-   Write_Str (\"  -l        Output chosen elaboration order\");\n-   Write_Eol;\n+      --  Line for -l switch\n \n-   --  Line of -L switch\n+      Write_Line (\"  -l        Output chosen elaboration order\");\n \n-   Write_Str (\"  -Lxyz     Library build: adainit/final \");\n-   Write_Str (\"renamed to xyzinit/final, implies -n\");\n-   Write_Eol;\n+      --  Line of -L switch\n \n-   --  Line for -m switch\n+      Write_Line (\"  -Lxyz     Library build: adainit/final \" &\n+                  \"renamed to xyzinit/final, implies -n\");\n \n-   Write_Str (\"  -mnnn     Limit number of detected error\");\n-   Write_Str (\"s to nnn (1-999999)\");\n-   Write_Eol;\n+      --  Line for -m switch\n \n-   --  Line for -M switch\n+      Write_Line (\"  -mnnn     Limit number of detected errors \" &\n+                  \"to nnn (1-999999)\");\n \n-   Write_Str (\"  -Mxyz     Rename generated main program from main to xyz\");\n-   Write_Eol;\n+      --  Line for -M switch\n \n-   --  Line for -n switch\n+      Write_Line (\"  -Mxyz     Rename generated main program from \" &\n+                  \"main to xyz\");\n \n-   Write_Str (\"  -n        No Ada main program (foreign main routine)\");\n-   Write_Eol;\n+      --  Line for -n switch\n \n-   --  Line for -nostdinc\n+      Write_Line (\"  -n        No Ada main program (foreign main routine)\");\n \n-   Write_Str (\"  -nostdinc Don't look for source files\");\n-   Write_Str (\" in the system default directory\");\n-   Write_Eol;\n+      --  Line for -nostdinc\n \n-   --  Line for -nostdlib\n+      Write_Line (\"  -nostdinc Don't look for source files \" &\n+                  \"in the system default directory\");\n \n-   Write_Str (\"  -nostdlib Don't look for library files\");\n-   Write_Str (\" in the system default directory\");\n-   Write_Eol;\n+      --  Line for -nostdlib\n \n-   --  Line for -o switch\n+      Write_Line (\"  -nostdlib Don't look for library files \" &\n+                  \"in the system default directory\");\n \n-   Write_Str (\"  -o file   Give the output file name (default is b~xxx.adb) \");\n-   Write_Eol;\n+      --  Line for -o switch\n \n-   --  Line for -O switch\n+      Write_Line (\"  -o file   Give the output file name \" &\n+                  \"(default is b~xxx.adb)\");\n \n-   Write_Str (\"  -O        Give list of objects required for link\");\n-   Write_Eol;\n+      --  Line for -O switch\n \n-   --  Line for -p switch\n+      Write_Line (\"  -O        Give list of objects required for link\");\n \n-   Write_Str (\"  -p        Pessimistic (worst-case) elaborat\");\n-   Write_Str (\"ion order\");\n-   Write_Eol;\n+      --  Line for -p switch\n \n-   --  Line for -r switch\n+      Write_Line (\"  -p        Pessimistic (worst-case) elaboration order\");\n \n-   Write_Str (\"  -r        List restrictions that could be a\");\n-   Write_Str (\"pplied to this partition\");\n-   Write_Eol;\n+      --  Line for -r switch\n \n-   --  Line for -s switch\n+      Write_Line (\"  -r        List restrictions that could be applied \" &\n+                  \"to this partition\");\n \n-   Write_Str (\"  -s        Require all source files to be\");\n-   Write_Str (\" present\");\n-   Write_Eol;\n+      --  Line for -s switch\n \n-   --  Line for -Sxx switch\n+      Write_Line (\"  -s        Require all source files to be present\");\n \n-   Write_Str (\"  -S??      Sin/lo/hi/xx for Initialize_Scalars\");\n-   Write_Str (\" invalid/low/high/hex\");\n-   Write_Eol;\n+      --  Line for -Sxx switch\n \n-   --  Line for -static\n+      Write_Line (\"  -S??      Sin/lo/hi/xx for Initialize_Scalars \" &\n+                  \"invalid/low/high/hex\");\n \n-   Write_Str (\"  -static   Link against a static GNAT run time\");\n-   Write_Eol;\n+      --  Line for -static\n \n-   --  Line for -shared\n+      Write_Line (\"  -static   Link against a static GNAT run time\");\n \n-   Write_Str (\"  -shared   Link against a shared GNAT run time\");\n-   Write_Eol;\n+      --  Line for -shared\n \n-   --  Line for -t switch\n+      Write_Line (\"  -shared   Link against a shared GNAT run time\");\n \n-   Write_Str (\"  -t        Tolerate time stamp and other consistency errors\");\n-   Write_Eol;\n+      --  Line for -t switch\n \n-   --  Line for -T switch\n+      Write_Line (\"  -t        Tolerate time stamp and other \" &\n+                  \"consistency errors\");\n \n-   Write_Str (\"  -Tn       Set time slice value to n milliseconds (n >= 0)\");\n-   Write_Eol;\n+      --  Line for -T switch\n \n-   --  Line for -u switch\n+      Write_Line (\"  -Tn       Set time slice value to n \" &\n+                  \"milliseconds (n >= 0)\");\n \n-   Write_Str (\"  -un       Enable dynamic stack analysis, with n results \");\n-   Write_Str (\"stored\");\n-   Write_Eol;\n+      --  Line for -u switch\n \n-   --  Line for -v switch\n+      Write_Line (\"  -un       Enable dynamic stack analysis, with \" &\n+                  \"n results stored\");\n \n-   Write_Str (\"  -v        Verbose mode. Error messages, \");\n-   Write_Str (\"header, summary output to stdout\");\n-   Write_Eol;\n+      --  Line for -v switch\n \n-   --  Lines for -w switch\n+      Write_Line (\"  -v        Verbose mode. Error messages, \" &\n+                  \"header, summary output to stdout\");\n \n-   Write_Str (\"  -wx       Warning mode. (x=s/e for supp\");\n-   Write_Str (\"ress/treat as error)\");\n-   Write_Eol;\n+      --  Lines for -w switch\n \n-   --  Line for -x switch\n+      Write_Line (\"  -wx       Warning mode. (x=s/e for \" &\n+                  \"suppress/treat as error)\");\n \n-   Write_Str (\"  -x        Exclude source files (check ob\");\n-   Write_Str (\"ject consistency only)\");\n-   Write_Eol;\n+      --  Line for -x switch\n \n-   --  Line for X switch\n+      Write_Line (\"  -x        Exclude source files (check object \" &\n+                  \"consistency only)\");\n \n-   Write_Str (\"  -Xnnn     Default exit status value = nnn\");\n-   Write_Eol;\n+      --  Line for X switch\n \n-   --  Line for -z switch\n+      Write_Line (\"  -Xnnn     Default exit status value = nnn\");\n \n-   Write_Str (\"  -z        No main subprogram (zero main)\");\n-   Write_Eol;\n+      --  Line for -z switch\n \n-   --  Line for --RTS\n+      Write_Line (\"  -z        No main subprogram (zero main)\");\n \n-   Write_Str (\"  --RTS=dir specify the default source and object search path\");\n-   Write_Eol;\n+      --  Line for --RTS\n \n-   --  Line for sfile\n+      Write_Line (\"  --RTS=dir specify the default source and \" &\n+                  \"object search path\");\n \n-   Write_Str (\"  lfile     Library file names\");\n-   Write_Eol;\n+      --  Line for sfile\n+\n+      Write_Line (\"  lfile     Library file names\");\n+   end Display;\n \n end Bindusg;"}, {"sha": "e56852b7be5f839aad510d0deec80b127238920a", "filename": "gcc/ada/bindusg.ads", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db89aef26f919982e402fcd7733dbe719173341c/gcc%2Fada%2Fbindusg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db89aef26f919982e402fcd7733dbe719173341c/gcc%2Fada%2Fbindusg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbindusg.ads?ref=db89aef26f919982e402fcd7733dbe719173341c", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---        Copyright (C) 1992,1993,1994 Free Software Foundation, Inc.       --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,4 +26,9 @@\n \n --  Procedure to generate screen of usage information if no file name present\n \n-procedure Bindusg;\n+package Bindusg is\n+\n+   procedure Display;\n+   --  Display binder usage if not already displayed\n+\n+end Bindusg;"}]}