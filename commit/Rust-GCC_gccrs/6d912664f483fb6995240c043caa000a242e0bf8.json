{"sha": "6d912664f483fb6995240c043caa000a242e0bf8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQ5MTI2NjRmNDgzZmI2OTk1MjQwYzA0M2NhYTAwMGEyNDJlMGJmOA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2018-11-01T13:03:28Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-11-01T13:03:28Z"}, "message": "tree.c (free_lang_data_in_decl): Free TREE_TYPE and alignment of TYPE_DECL.\n\n\n\t* tree.c (free_lang_data_in_decl): Free TREE_TYPE and alignment of\n\tTYPE_DECL.\n\n\t* g++.dg/lto/pr84805_1.C: Update template.\n\t* g++.dg/lto/pr84805_0.C: Update template.\n\t* g++.dg/lto/pr84805_1b.C: Update template.\n\t* g++.dg/lto/pr84805_0b.C: Update template.\n\nFrom-SVN: r265722", "tree": {"sha": "6bdfd03632c63e13ca2f188ce297b939179481be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bdfd03632c63e13ca2f188ce297b939179481be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d912664f483fb6995240c043caa000a242e0bf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d912664f483fb6995240c043caa000a242e0bf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d912664f483fb6995240c043caa000a242e0bf8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d912664f483fb6995240c043caa000a242e0bf8/comments", "author": null, "committer": null, "parents": [{"sha": "444cda74708a494cc814951fe29d4904cec4f7e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/444cda74708a494cc814951fe29d4904cec4f7e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/444cda74708a494cc814951fe29d4904cec4f7e2"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "4e778e48ef99157ee0fe0d06389216553a55c4a4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6d912664f483fb6995240c043caa000a242e0bf8", "patch": "@@ -1,3 +1,10 @@\n+2018-11-30  Jan Hubicka  <jh@suse.cz>\n+\n+\t* g++.dg/lto/pr84805_1.C: Update template.\n+\t* g++.dg/lto/pr84805_0.C: Update template.\n+\t* g++.dg/lto/pr84805_1b.C: Update template.\n+\t* g++.dg/lto/pr84805_0b.C: Update template.\n+\n 2018-11-01  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/87826"}, {"sha": "7cfb93650be106fee1e6e66d0cd0deaca089b995", "filename": "gcc/testsuite/g++.dg/lto/pr84805_1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr84805_1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr84805_1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr84805_1.C?ref=6d912664f483fb6995240c043caa000a242e0bf8", "patch": "@@ -3,7 +3,7 @@ public:\n   virtual ~XclRoot();\n };\n class XclImpRoot : XclRoot {};\n-struct RootData { // { dg-lto-warning \"8: type 'struct RootData' violates the C\\\\+\\\\+ One Definition Rule\" }\n+struct RootData {\n   XclImpRoot pIR;\n };\n class ExcRoot {"}, {"sha": "09b70fca189ebc44191961b3cf84f617e4b19736", "filename": "gcc/testsuite/g++.dg/lto/pr85405_0.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405_0.C?ref=6d912664f483fb6995240c043caa000a242e0bf8", "patch": "@@ -3,7 +3,7 @@\n // { dg-require-effective-target fpic }\n // { dg-lto-options {{-fPIC -shared -flto}} }\n \n-class VclReferenceBase { // { dg-lto-warning \"7: type 'struct VclReferenceBase' violates the C\\\\+\\\\+ One Definition Rule\" }\n+class VclReferenceBase {\n   int mnRefCnt;\n   bool mbDisposed : 1;\n   virtual ~VclReferenceBase();"}, {"sha": "201142bc1a3efdb927b8b8af940df25c2e8e1879", "filename": "gcc/testsuite/g++.dg/lto/pr85405b_0.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405b_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405b_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405b_0.C?ref=6d912664f483fb6995240c043caa000a242e0bf8", "patch": "@@ -3,7 +3,7 @@\n // { dg-require-effective-target fpic }\n // { dg-lto-options {{-fPIC -shared -flto}} }\n \n-class VclReferenceBase { // { dg-lto-warning \"7: type 'struct VclReferenceBase' violates the C\\\\+\\\\+ One Definition Rule\" }\n+class VclReferenceBase { \n   int mnRefCnt;\n   int mbDisposed : 3;\n   virtual ~VclReferenceBase();"}, {"sha": "5504c67cf64783c54945d4e32d31b995f78b6359", "filename": "gcc/testsuite/g++.dg/lto/pr85405b_1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405b_1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405b_1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr85405b_1.C?ref=6d912664f483fb6995240c043caa000a242e0bf8", "patch": "@@ -1,6 +1,6 @@\n class VclReferenceBase {\n   int mnRefCnt;\n-  int mbDisposed: 7; // { dg-lto-message \"19: a field of same name but different type is defined in another translation unit\" }\n+  int mbDisposed: 7; \n \n protected:\n   virtual ~VclReferenceBase();"}, {"sha": "069d62d51be085f7ad5a710f30f64485994cb7e5", "filename": "gcc/tree.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d912664f483fb6995240c043caa000a242e0bf8/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=6d912664f483fb6995240c043caa000a242e0bf8", "patch": "@@ -5510,6 +5510,8 @@ free_lang_data_in_decl (tree decl, struct free_lang_data_d *fld)\n       DECL_VISIBILITY_SPECIFIED (decl) = 0;\n       DECL_INITIAL (decl) = NULL_TREE;\n       DECL_ORIGINAL_TYPE (decl) = NULL_TREE;\n+      TREE_TYPE (decl) = void_type_node;\n+      SET_DECL_ALIGN (decl, 0);\n     }\n   else if (TREE_CODE (decl) == FIELD_DECL)\n     {"}]}