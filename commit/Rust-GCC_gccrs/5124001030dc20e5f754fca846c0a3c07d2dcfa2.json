{"sha": "5124001030dc20e5f754fca846c0a3c07d2dcfa2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTEyNDAwMTAzMGRjMjBlNWY3NTRmY2E4NDZjMGEzYzA3ZDJkY2ZhMg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-01-26T18:56:51Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-01-26T18:56:51Z"}, "message": "(attach_deaths_insn): Add REG_DEAD notes to CLOBBER if\nit is for a MEM.\n\nFrom-SVN: r6432", "tree": {"sha": "7675133175cb6c264f46646c2135c05ef0100de7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7675133175cb6c264f46646c2135c05ef0100de7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5124001030dc20e5f754fca846c0a3c07d2dcfa2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5124001030dc20e5f754fca846c0a3c07d2dcfa2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5124001030dc20e5f754fca846c0a3c07d2dcfa2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5124001030dc20e5f754fca846c0a3c07d2dcfa2/comments", "author": null, "committer": null, "parents": [{"sha": "2197a88a8c524354d687e395a355ee45938ac727", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2197a88a8c524354d687e395a355ee45938ac727", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2197a88a8c524354d687e395a355ee45938ac727"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "f74d96f11dd0377b0d82da554d511b4f19d1b53b", "filename": "gcc/sched.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5124001030dc20e5f754fca846c0a3c07d2dcfa2/gcc%2Fsched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5124001030dc20e5f754fca846c0a3c07d2dcfa2/gcc%2Fsched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched.c?ref=5124001030dc20e5f754fca846c0a3c07d2dcfa2", "patch": "@@ -2885,8 +2885,11 @@ attach_deaths_insn (insn)\n \t    attach_deaths (XVECEXP (x, 0, i), insn, 0);\n \t}\n     }\n-  /* Flow does not add REG_DEAD notes to registers that die in\n-     clobbers, so we can't either.  */\n+  /* If this is a CLOBBER, only add REG_DEAD notes to registers inside a\n+     MEM being clobbered, just like flow.  */\n+  else if (code == CLOBBER && GET_CODE (XEXP (x, 0)) == MEM)\n+    attach_deaths (XEXP (XEXP (x, 0), 0), insn, 0);\n+  /* Otherwise don't add a death note to things being clobbered.  */\n   else if (code != CLOBBER)\n     attach_deaths (x, insn, 0);\n }"}]}