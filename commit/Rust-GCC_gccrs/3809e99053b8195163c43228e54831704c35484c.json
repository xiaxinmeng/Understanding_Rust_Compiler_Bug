{"sha": "3809e99053b8195163c43228e54831704c35484c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzgwOWU5OTA1M2I4MTk1MTYzYzQzMjI4ZTU0ODMxNzA0YzM1NDg0Yw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2005-06-03T19:03:29Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2005-06-03T19:03:29Z"}, "message": "basic-block.h (remove_predictions_associated_with_edge): Declare.\n\n\n\t* basic-block.h (remove_predictions_associated_with_edge): Declare.\n\t* cfg.c (remove_edge): Use it.\n\t* predict.c (remove_predictions_associated_with_edge): New function.\n\nFrom-SVN: r100551", "tree": {"sha": "dccec4c166610579fbf93533c4da6b37727bb546", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dccec4c166610579fbf93533c4da6b37727bb546"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3809e99053b8195163c43228e54831704c35484c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3809e99053b8195163c43228e54831704c35484c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3809e99053b8195163c43228e54831704c35484c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3809e99053b8195163c43228e54831704c35484c/comments", "author": null, "committer": null, "parents": [{"sha": "7c9ac5c0354c587ba84956a4a34584ec2c7648cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c9ac5c0354c587ba84956a4a34584ec2c7648cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c9ac5c0354c587ba84956a4a34584ec2c7648cb"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "77123888e64d19dc2cc834be3d3088cc9e3ecb0c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3809e99053b8195163c43228e54831704c35484c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3809e99053b8195163c43228e54831704c35484c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3809e99053b8195163c43228e54831704c35484c", "patch": "@@ -1,3 +1,9 @@\n+2005-06-03  Jan Hubicka  <jh@suse.cz>\n+\n+\t* basic-block.h (remove_predictions_associated_with_edge): Declare.\n+\t* cfg.c (remove_edge): Use it.\n+\t* predict.c (remove_predictions_associated_with_edge): New function.\n+\n 2005-06-03  Pat Haugen  <pthaugen@us.ibm.com>\n \n \t* config/rs6000/rs6000.c (rs6000_conditional_register_usage):"}, {"sha": "5c033dfbd4bedb5d732eb28957c496fb099b771d", "filename": "gcc/basic-block.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3809e99053b8195163c43228e54831704c35484c/gcc%2Fbasic-block.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3809e99053b8195163c43228e54831704c35484c/gcc%2Fbasic-block.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbasic-block.h?ref=3809e99053b8195163c43228e54831704c35484c", "patch": "@@ -869,6 +869,7 @@ extern void tree_predict_edge (edge, enum br_predictor, int);\n extern void rtl_predict_edge (edge, enum br_predictor, int);\n extern void predict_edge_def (edge, enum br_predictor, enum prediction);\n extern void guess_outgoing_edge_probabilities (basic_block);\n+extern void remove_predictions_associated_with_edge (edge);\n \n /* In flow.c */\n extern void init_flow (void);"}, {"sha": "e842a5083467182e43898ddde9675404301b0cff", "filename": "gcc/cfg.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3809e99053b8195163c43228e54831704c35484c/gcc%2Fcfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3809e99053b8195163c43228e54831704c35484c/gcc%2Fcfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfg.c?ref=3809e99053b8195163c43228e54831704c35484c", "patch": "@@ -349,6 +349,7 @@ make_single_succ_edge (basic_block src, basic_block dest, int flags)\n void\n remove_edge (edge e)\n {\n+  remove_predictions_associated_with_edge (e);\n   execute_on_shrinking_pred (e);\n \n   disconnect_src (e);"}, {"sha": "8ca44f69093028d5114f767282fab72c13a5e0ff", "filename": "gcc/predict.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3809e99053b8195163c43228e54831704c35484c/gcc%2Fpredict.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3809e99053b8195163c43228e54831704c35484c/gcc%2Fpredict.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpredict.c?ref=3809e99053b8195163c43228e54831704c35484c", "patch": "@@ -240,6 +240,24 @@ tree_predict_edge (edge e, enum br_predictor predictor, int probability)\n   i->edge = e;\n }\n \n+/* Remove all predictions on given basic block that are attached\n+   to edge E.  */\n+void\n+remove_predictions_associated_with_edge (edge e)\n+{\n+  if (e->src->predictions)\n+    {\n+      struct edge_prediction **prediction = &e->src->predictions;\n+      while (*prediction)\n+\t{\n+\t  if ((*prediction)->edge == e)\n+\t    *prediction = (*prediction)->next;\n+\t  else\n+\t    prediction = &((*prediction)->next);\n+\t}\n+    }\n+}\n+\n /* Return true when we can store prediction on insn INSN.\n    At the moment we represent predictions only on conditional\n    jumps, not at computed jump or other complicated cases.  */"}]}