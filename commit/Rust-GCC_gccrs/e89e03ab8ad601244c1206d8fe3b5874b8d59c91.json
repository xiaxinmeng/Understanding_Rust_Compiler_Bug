{"sha": "e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTg5ZTAzYWI4YWQ2MDEyNDRjMTIwNmQ4ZmUzYjU4NzRiOGQ1OWM5MQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-03-11T10:04:30Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-03-11T10:04:30Z"}, "message": "re PR tree-optimization/48063 (ICE: verify_stmts failed: conversion of register to a different size with -fno-early-inlining)\n\n\tPR tree-optimization/48063\n\t* ipa-inline.c (cgraph_decide_inlining): Don't try to\n\tinline functions called once if !tree_can_inline_p (node->callers).\n\n\t* gcc.dg/torture/pr48063.c: New test.\n\nFrom-SVN: r170867", "tree": {"sha": "c7fdf17d81506cf4c706569185532f21539f6f9b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c7fdf17d81506cf4c706569185532f21539f6f9b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "efbe978b7a12cc1e7ece68b6a4cee7ab3d434cc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efbe978b7a12cc1e7ece68b6a4cee7ab3d434cc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efbe978b7a12cc1e7ece68b6a4cee7ab3d434cc3"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "9630d36614de1ed98a5f4f87915aa63a5c4b6c7d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "patch": "@@ -1,3 +1,9 @@\n+2011-03-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/48063\n+\t* ipa-inline.c (cgraph_decide_inlining): Don't try to\n+\tinline functions called once if !tree_can_inline_p (node->callers).\n+\n 2011-03-11  Chen Liqin  <liqin.gcc@gmail.com>\n \n \t* config.gcc (score-*-elf): Add extra_parts .., update tmake_file and"}, {"sha": "7ae5f96dc7ceb0e661da172d4008ffc163d22b8b", "filename": "gcc/ipa-inline.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2Fipa-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2Fipa-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline.c?ref=e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "patch": "@@ -1,5 +1,5 @@\n /* Inlining decision heuristics.\n-   Copyright (C) 2003, 2004, 2007, 2008, 2009, 2010\n+   Copyright (C) 2003, 2004, 2007, 2008, 2009, 2010, 2011\n    Free Software Foundation, Inc.\n    Contributed by Jan Hubicka\n \n@@ -1498,6 +1498,7 @@ cgraph_decide_inlining (void)\n \t      && node->callers->caller != node\n \t      && node->callers->caller->global.inlined_to != node\n \t      && !node->callers->call_stmt_cannot_inline_p\n+\t      && tree_can_inline_p (node->callers)\n \t      && !DECL_EXTERNAL (node->decl))\n \t    {\n \t      cgraph_inline_failed_t reason;"}, {"sha": "23c94cec8fcf73ecb824f0652ef301e2f28a204f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "patch": "@@ -1,3 +1,8 @@\n+2011-03-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/48063\n+\t* gcc.dg/torture/pr48063.c: New test.\n+\n 2011-03-10  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/template/array22.C: New."}, {"sha": "d861bf04c801e881a7bcc26bccfd65b90844447b", "filename": "gcc/testsuite/gcc.dg/torture/pr48063.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr48063.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e89e03ab8ad601244c1206d8fe3b5874b8d59c91/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr48063.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr48063.c?ref=e89e03ab8ad601244c1206d8fe3b5874b8d59c91", "patch": "@@ -0,0 +1,19 @@\n+/* PR tree-optimization/48063 */\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-early-inlining\" } */\n+\n+extern void abort (void);\n+static void bar ();\n+\n+void\n+foo ()\n+{\n+  bar (1);\n+}\n+\n+static void\n+bar (double i)\n+{\n+  if (i)\n+    abort ();\n+}"}]}