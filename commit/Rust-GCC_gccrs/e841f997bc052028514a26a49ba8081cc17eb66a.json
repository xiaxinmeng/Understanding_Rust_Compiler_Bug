{"sha": "e841f997bc052028514a26a49ba8081cc17eb66a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTg0MWY5OTdiYzA1MjAyODUxNGEyNmE0OWJhODA4MWNjMTdlYjY2YQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-06-21T21:15:34Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-06-21T21:15:34Z"}, "message": "(duplicate_decls): Never warn if redeclaring a predeclared function.\n\n(duplicate_decls): Never warn if redeclaring\na predeclared function.  Use the new declaration's types\nbut keep any predeclared volatile flag.\n\nFrom-SVN: r1227", "tree": {"sha": "9b55bd43a47fd83d59c9e9320dc57954562ae1fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b55bd43a47fd83d59c9e9320dc57954562ae1fd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e841f997bc052028514a26a49ba8081cc17eb66a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e841f997bc052028514a26a49ba8081cc17eb66a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e841f997bc052028514a26a49ba8081cc17eb66a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e841f997bc052028514a26a49ba8081cc17eb66a/comments", "author": null, "committer": null, "parents": [{"sha": "16ab02ac8a426827dd532fddbc0d64d9c7a17d7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16ab02ac8a426827dd532fddbc0d64d9c7a17d7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16ab02ac8a426827dd532fddbc0d64d9c7a17d7d"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "5c503ac714b25c4e5b6b9469023d9ac35409a087", "filename": "gcc/c-decl.c", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e841f997bc052028514a26a49ba8081cc17eb66a/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e841f997bc052028514a26a49ba8081cc17eb66a/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=e841f997bc052028514a26a49ba8081cc17eb66a", "patch": "@@ -1190,6 +1190,7 @@ duplicate_decls (newdecl, olddecl)\n   else if (TREE_CODE (olddecl) == FUNCTION_DECL\n \t   && DECL_BUILT_IN (olddecl))\n     {\n+      /* A function declaration for a built-in function.  */\n       if (!TREE_PUBLIC (newdecl))\n \t{\n \t  /* If you declare a built-in function name as static, the\n@@ -1204,20 +1205,23 @@ duplicate_decls (newdecl, olddecl)\n \twarning_with_decl (newdecl, \"conflicting types for built-in function `%s'\");\n     }\n   else if (TREE_CODE (olddecl) == FUNCTION_DECL\n-\t   && DECL_BUILT_IN_NONANSI (olddecl))\n+\t   && DECL_SOURCE_LINE (olddecl) == 0)\n     {\n+      /* A function declaration for a predeclared function\n+\t that isn't actually built in.  */\n       if (!TREE_PUBLIC (newdecl))\n \t{\n-\t  /* If you declare a built-in function name as static, the\n-\t     built-in definition is overridden,\n-\t     but optionally warn this was a bad choice of name.  */\n-\t  if (warn_shadow)\n-\t    warning_with_decl (newdecl, \"shadowing library function `%s'\");\n-\t  /* Discard the old built-in function.  */\n+\t  /* If you declare a it as static, the\n+\t     default definition is overridden.  */\n \t  return 0;\n \t}\n       else if (!types_match)\n-\twarning_with_decl (newdecl, \"conflicting types for library function `%s'\");\n+\t{\n+\t  /* If the types don't match, use whatever the program declares,\n+\t     not the predeclared type.  Preserve volatility indication.  */\n+\t  TREE_THIS_VOLATILE (newdecl) |= TREE_THIS_VOLATILE (olddecl);\n+\t  return 0;\n+\t}\n     }\n   else if (!types_match\n \t   /* Permit char *foo (int, ...); followed by char *foo ();"}]}