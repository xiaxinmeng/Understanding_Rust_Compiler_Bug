{"sha": "6c084a5b37919e3343d58bd8f6e8badd133ba9fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmMwODRhNWIzNzkxOWUzMzQzZDU4YmQ4ZjZlOGJhZGQxMzNiYTlmYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2013-10-18T04:24:48Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-10-18T04:24:48Z"}, "message": "elf.c (elf_add): Don't get the wrong offsets if a debug section is missing.\n\n\t* elf.c (elf_add): Don't get the wrong offsets if a debug section\n\tis missing.\n\nFrom-SVN: r203810", "tree": {"sha": "c9eec55baa3a24a6f92d0ef72bd1652d33d57700", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9eec55baa3a24a6f92d0ef72bd1652d33d57700"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c084a5b37919e3343d58bd8f6e8badd133ba9fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c084a5b37919e3343d58bd8f6e8badd133ba9fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c084a5b37919e3343d58bd8f6e8badd133ba9fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c084a5b37919e3343d58bd8f6e8badd133ba9fc/comments", "author": null, "committer": null, "parents": [{"sha": "5628781003fa01e60c0b97be1be6a5177fcecadc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5628781003fa01e60c0b97be1be6a5177fcecadc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5628781003fa01e60c0b97be1be6a5177fcecadc"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "86536a16adbfddcae3bd2b6bcbd4fd827e235c62", "filename": "libbacktrace/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c084a5b37919e3343d58bd8f6e8badd133ba9fc/libbacktrace%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c084a5b37919e3343d58bd8f6e8badd133ba9fc/libbacktrace%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2FChangeLog?ref=6c084a5b37919e3343d58bd8f6e8badd133ba9fc", "patch": "@@ -1,3 +1,8 @@\n+2013-10-17  Ian Lance Taylor  <iant@google.com>\n+\n+\t* elf.c (elf_add): Don't get the wrong offsets if a debug section\n+\tis missing.\n+\n 2013-10-15  David Malcolm  <dmalcolm@redhat.com>\n \n \t* configure.ac: Add --enable-host-shared, setting up"}, {"sha": "2161ad2a258eaa8cd5390e947c0be038d2b3bbdd", "filename": "libbacktrace/elf.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c084a5b37919e3343d58bd8f6e8badd133ba9fc/libbacktrace%2Felf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c084a5b37919e3343d58bd8f6e8badd133ba9fc/libbacktrace%2Felf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Felf.c?ref=6c084a5b37919e3343d58bd8f6e8badd133ba9fc", "patch": "@@ -759,6 +759,8 @@ elf_add (struct backtrace_state *state, int descriptor, uintptr_t base_address,\n     {\n       off_t end;\n \n+      if (sections[i].size == 0)\n+\tcontinue;\n       if (min_offset == 0 || sections[i].offset < min_offset)\n \tmin_offset = sections[i].offset;\n       end = sections[i].offset + sections[i].size;\n@@ -785,8 +787,13 @@ elf_add (struct backtrace_state *state, int descriptor, uintptr_t base_address,\n   descriptor = -1;\n \n   for (i = 0; i < (int) DEBUG_MAX; ++i)\n-    sections[i].data = ((const unsigned char *) debug_view.data\n-\t\t\t+ (sections[i].offset - min_offset));\n+    {\n+      if (sections[i].size == 0)\n+\tsections[i].data = NULL;\n+      else\n+\tsections[i].data = ((const unsigned char *) debug_view.data\n+\t\t\t    + (sections[i].offset - min_offset));\n+    }\n \n   if (!backtrace_dwarf_add (state, base_address,\n \t\t\t    sections[DEBUG_INFO].data,"}]}