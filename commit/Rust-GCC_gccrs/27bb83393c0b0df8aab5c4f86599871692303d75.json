{"sha": "27bb83393c0b0df8aab5c4f86599871692303d75", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjdiYjgzMzkzYzBiMGRmOGFhYjVjNGY4NjU5OTg3MTY5MjMwM2Q3NQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-10-06T16:37:44Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-10-06T16:37:44Z"}, "message": "pt.c (instantiate_decl): Look for the original template.\n\nMon Oct  6 09:27:29 1997  Jason Merrill  <jason@yorick.cygnus.com>\n\n\t* pt.c (instantiate_decl): Look for the original template.\n\t(tsubst): Set DECL_IMPLICIT_INSTANTIATION on partial instantiations\n\tof member templates.\n\nFixes tstring.\n\nFrom-SVN: r15838", "tree": {"sha": "39553ac73185a8e3e8a68db528c91050cbf20a34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/39553ac73185a8e3e8a68db528c91050cbf20a34"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27bb83393c0b0df8aab5c4f86599871692303d75", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27bb83393c0b0df8aab5c4f86599871692303d75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27bb83393c0b0df8aab5c4f86599871692303d75", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27bb83393c0b0df8aab5c4f86599871692303d75/comments", "author": null, "committer": null, "parents": [{"sha": "d8d64559deb2b23c9f3e65b793a01fb695722f2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8d64559deb2b23c9f3e65b793a01fb695722f2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8d64559deb2b23c9f3e65b793a01fb695722f2d"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "9ed725ca0cf089cefd36837ed0d185386203d027", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=27bb83393c0b0df8aab5c4f86599871692303d75", "patch": "@@ -1,3 +1,9 @@\n+Mon Oct  6 09:27:29 1997  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* pt.c (instantiate_decl): Look for the original template.\n+\t(tsubst): Set DECL_IMPLICIT_INSTANTIATION on partial instantiations\n+\tof member templates.\n+\n Wed Oct  1 08:41:38 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* Makefile.in (g++FAQ.*): New rules."}, {"sha": "428ba14efc058096958b9bc655207ce1aff9bd09", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=27bb83393c0b0df8aab5c4f86599871692303d75", "patch": "@@ -2881,9 +2881,6 @@ finish_file ()\n \n   at_eof = 1;\n \n-  if (flag_detailed_statistics)\n-    dump_tree_statistics ();\n-\n   /* Bad parse errors.  Just forget about it.  */\n   if (! global_bindings_p () || current_class_type)\n     return;\n@@ -3306,7 +3303,10 @@ finish_file ()\n   varconst_time += this_time - start_time;\n \n   if (flag_detailed_statistics)\n-    dump_time_statistics ();\n+    {\n+      dump_tree_statistics ();\n+      dump_time_statistics ();\n+    }\n }\n \n /* This is something of the form 'A()()()()()+1' that has turned out to be an"}, {"sha": "95109cf93ec164d37bab649829beff06cbfaa588", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=27bb83393c0b0df8aab5c4f86599871692303d75", "patch": "@@ -465,8 +465,7 @@ determine_explicit_specialization (template_id, type, targs_out,\n    is an explicit instantiation.  */\n \n int\n-check_explicit_specialization(declarator, decl, template_count,\n-\t\t\t      flags)\n+check_explicit_specialization (declarator, decl, template_count, flags)\n      tree declarator;\n      tree decl;\n      int template_count;\n@@ -2207,7 +2206,8 @@ tsubst (t, args, nargs, in_decl)\n \tDECL_INITIAL (new_decl) = DECL_INITIAL (decl);\n \tDECL_TI_TEMPLATE (new_decl) = tmpl;\n \tTREE_TYPE (tmpl) = TREE_TYPE (new_decl);\n-\tDECL_TEMPLATE_INSTANTIATIONS(tmpl) = NULL_TREE;\n+\tDECL_TEMPLATE_INSTANTIATIONS (tmpl) = NULL_TREE;\n+\tSET_DECL_IMPLICIT_INSTANTIATION (decl);\n \n \t/* The template parameters for this new template are all the\n \t   template parameters for the old template, except the\n@@ -4411,14 +4411,19 @@ instantiate_decl (d)\n   tree tmpl = TI_TEMPLATE (ti);\n   tree args = TI_ARGS (ti);\n   tree td;\n-  tree pattern = DECL_TEMPLATE_RESULT (tmpl);\n+  tree pattern;\n   tree save_ti;\n   int nested = in_function_p ();\n   int d_defined;\n   int pattern_defined;\n   int line = lineno;\n   char *file = input_filename;\n \n+  while (DECL_TEMPLATE_INSTANTIATION (tmpl))\n+    tmpl = DECL_TI_TEMPLATE (tmpl);\n+\n+  pattern = DECL_TEMPLATE_RESULT (tmpl);\n+\n   if (TREE_CODE (d) == FUNCTION_DECL)\n     {\n       d_defined = (DECL_INITIAL (d) != NULL_TREE);"}, {"sha": "afbdb05a7e19421cc1ed5aa05de81edf004d0f7b", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27bb83393c0b0df8aab5c4f86599871692303d75/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=27bb83393c0b0df8aab5c4f86599871692303d75", "patch": "@@ -1660,6 +1660,7 @@ print_lang_statistics ()\n   print_obstack_statistics (\"decl_obstack\", &decl_obstack);\n   print_obstack_statistics (\"permanent_obstack\", &permanent_obstack);\n   print_obstack_statistics (\"maybepermanent_obstack\", &maybepermanent_obstack);\n+  print_inline_obstack_statistics ();\n   print_search_statistics ();\n   print_class_statistics ();\n #ifdef GATHER_STATISTICS"}]}