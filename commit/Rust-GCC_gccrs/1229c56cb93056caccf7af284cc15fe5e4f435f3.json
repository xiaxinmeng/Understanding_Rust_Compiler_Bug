{"sha": "1229c56cb93056caccf7af284cc15fe5e4f435f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTIyOWM1NmNiOTMwNTZjYWNjZjdhZjI4NGNjMTVmZTVlNGY0MzVmMw==", "commit": {"author": {"name": "Ville Voutilainen", "email": "ville.voutilainen@gmail.com", "date": "2018-04-04T16:05:11Z"}, "committer": {"name": "Ville Voutilainen", "email": "ville@gcc.gnu.org", "date": "2018-04-04T16:05:11Z"}, "message": "re PR c++/65923 (False positive for warning about literal operator suffix and using)\n\nPR c++/65923\n\ngcc/cp\n\nPR c++/65923\n* decl.c (grokfndecl): Handle standard UDL diagnostics here..\n* parser.c (cp_parser_unqualified_id): ..not here.\n\ntestsuite/\n\nPR c++/65923\n* g++.dg/diagnostic/pr65923.C: New.\n\nFrom-SVN: r259087", "tree": {"sha": "03988e369911dc89da55b85ccb1708683aed4a4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03988e369911dc89da55b85ccb1708683aed4a4b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1229c56cb93056caccf7af284cc15fe5e4f435f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1229c56cb93056caccf7af284cc15fe5e4f435f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1229c56cb93056caccf7af284cc15fe5e4f435f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1229c56cb93056caccf7af284cc15fe5e4f435f3/comments", "author": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127"}], "stats": {"total": 46, "additions": 36, "deletions": 10}, "files": [{"sha": "0c71d2bd9de82ebde17885109192663e9a149bc5", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1229c56cb93056caccf7af284cc15fe5e4f435f3", "patch": "@@ -1,3 +1,9 @@\n+2018-04-04  Ville Voutilainen  <ville.voutilainen@gmail.com>\n+\n+\tPR c++/65923\n+\t* decl.c (grokfndecl): Handle standard UDL diagnostics here..\n+\t* parser.c (cp_parser_unqualified_id): ..not here.\n+\n 2018-04-04  Alexandre Oliva <aoliva@redhat.com>\n \n \tPR c++/84943"}, {"sha": "c8ae72faeae13d159969bb91563a3fc5241bc037", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=1229c56cb93056caccf7af284cc15fe5e4f435f3", "patch": "@@ -8944,6 +8944,13 @@ grokfndecl (tree ctype,\n \t\twarning (0, \"floating point suffix %qs\"\n \t\t\t    \" shadowed by implementation\", suffix);\n \t    }\n+\t  /* 17.6.3.3.5  */\n+\t  if (suffix[0] != '_'\n+\t      && !in_system_header_at (DECL_SOURCE_LOCATION (decl))\n+\t      && !current_function_decl && !(friendp && !funcdef_flag))\n+\t    warning (OPT_Wliteral_suffix,\n+\t\t     \"literal operator suffixes not preceded by %<_%>\"\n+\t\t     \" are reserved for future standardization\");\n \t}\n       else\n \t{"}, {"sha": "f6fbcf6185e4cd6f5dbf804cfa566fbdc2f3952a", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=1229c56cb93056caccf7af284cc15fe5e4f435f3", "patch": "@@ -6100,16 +6100,6 @@ cp_parser_unqualified_id (cp_parser* parser,\n \t  /* If that didn't work, try a conversion-function-id.  */\n \t  if (!cp_parser_parse_definitely (parser))\n \t    id = cp_parser_conversion_function_id (parser);\n-\t  else if (UDLIT_OPER_P (id))\n-\t    {\n-\t      /* 17.6.3.3.5  */\n-\t      const char *name = UDLIT_OP_SUFFIX (id);\n-\t      if (name[0] != '_' && !in_system_header_at (input_location)\n-\t\t  && declarator_p)\n-\t\twarning (OPT_Wliteral_suffix,\n-\t\t\t \"literal operator suffixes not preceded by %<_%>\"\n-\t\t\t \" are reserved for future standardization\");\n-\t    }\n \n \t  return id;\n \t}"}, {"sha": "036f4478181336543daa2ad64a7aa1ce5c82bf40", "filename": "gcc/testsuite/g++.dg/diagnostic/pr65923.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fpr65923.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1229c56cb93056caccf7af284cc15fe5e4f435f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fpr65923.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fpr65923.C?ref=1229c56cb93056caccf7af284cc15fe5e4f435f3", "patch": "@@ -0,0 +1,23 @@\n+// { dg-do compile { target c++14 } }\n+\n+#include <chrono>\n+\n+using std::literals::chrono_literals::operator\"\"s;\n+\n+struct X\n+{\n+  friend constexpr std::chrono::duration<long double> std::literals::chrono_literals::operator\"\"s(long double);\n+};\n+\n+struct X2\n+{\n+  friend constexpr X operator\"\"foo(long double) {return {};} // { dg-warning \"literal operator suffixes not preceded\" }\n+};\n+\n+namespace std\n+{\n+  template<> void swap(X&, X&)\n+  {\n+    constexpr std::chrono::duration<long double> operator\"\"s(long double);\n+  }\n+}"}]}