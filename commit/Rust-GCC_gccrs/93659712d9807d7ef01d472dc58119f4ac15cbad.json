{"sha": "93659712d9807d7ef01d472dc58119f4ac15cbad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTM2NTk3MTJkOTgwN2Q3ZWYwMWQ0NzJkYzU4MTE5ZjRhYzE1Y2JhZA==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2017-10-19T11:08:28Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2017-10-19T11:08:28Z"}, "message": "Revert r238089 (PR driver/81829).\n\n2017-10-19  Martin Liska  <mliska@suse.cz>\n\n\tPR driver/81829\n\t* file-find.c (remove_prefix): Remove.\n\t* file-find.h (remove_prefix): Likewise.\n\t* gcc-ar.c: Remove smartness of lookup.\n\nFrom-SVN: r253886", "tree": {"sha": "a22f01bee9e0b005b1be4b1055e7d10e916df564", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a22f01bee9e0b005b1be4b1055e7d10e916df564"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/93659712d9807d7ef01d472dc58119f4ac15cbad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93659712d9807d7ef01d472dc58119f4ac15cbad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93659712d9807d7ef01d472dc58119f4ac15cbad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93659712d9807d7ef01d472dc58119f4ac15cbad/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d8198d1cd0f0849d5ba070d70b672ed869eead4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8198d1cd0f0849d5ba070d70b672ed869eead4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8198d1cd0f0849d5ba070d70b672ed869eead4a"}], "stats": {"total": 51, "additions": 7, "deletions": 44}, "files": [{"sha": "f2a46b94e57087a0663730aa73f291b24a91b4a8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=93659712d9807d7ef01d472dc58119f4ac15cbad", "patch": "@@ -1,3 +1,10 @@\n+2017-10-19  Martin Liska  <mliska@suse.cz>\n+\n+\tPR driver/81829\n+\t* file-find.c (remove_prefix): Remove.\n+\t* file-find.h (remove_prefix): Likewise.\n+\t* gcc-ar.c: Remove smartness of lookup.\n+\n 2017-10-19  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/rs6000.md (*call_indirect_aix<mode>,"}, {"sha": "b5a1fe8494e88b694df15c9b806c49dfaa938720", "filename": "gcc/file-find.c", "status": "modified", "additions": 0, "deletions": 35, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2Ffile-find.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2Ffile-find.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffile-find.c?ref=93659712d9807d7ef01d472dc58119f4ac15cbad", "patch": "@@ -208,38 +208,3 @@ prefix_from_string (const char *p, struct path_prefix *pprefix)\n     }\n   free (nstore);\n }\n-\n-void\n-remove_prefix (const char *prefix, struct path_prefix *pprefix)\n-{\n-  struct prefix_list *remove, **prev, **remove_prev = NULL;\n-  int max_len = 0;\n-\n-  if (pprefix->plist)\n-    {\n-      prev = &pprefix->plist;\n-      for (struct prefix_list *pl = pprefix->plist; pl->next; pl = pl->next)\n-\t{\n-\t  if (strcmp (prefix, pl->prefix) == 0)\n-\t    {\n-\t      remove = pl;\n-\t      remove_prev = prev;\n-\t      continue;\n-\t    }\n-\n-\t  int l = strlen (pl->prefix);\n-\t  if (l > max_len)\n-\t    max_len = l;\n-\n-\t  prev = &pl;\n-\t}\n-\n-      if (remove_prev)\n-\t{\n-\t  *remove_prev = remove->next;\n-\t  free (remove);\n-\t}\n-\n-      pprefix->max_len = max_len;\n-    }\n-}"}, {"sha": "407feba26e7450cb6bbb1fb65045d8a1f72a7bde", "filename": "gcc/file-find.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2Ffile-find.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2Ffile-find.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffile-find.h?ref=93659712d9807d7ef01d472dc58119f4ac15cbad", "patch": "@@ -41,7 +41,6 @@ extern void find_file_set_debug (bool);\n extern char *find_a_file (struct path_prefix *, const char *, int);\n extern void add_prefix (struct path_prefix *, const char *);\n extern void add_prefix_begin (struct path_prefix *, const char *);\n-extern void remove_prefix (const char *prefix, struct path_prefix *);\n extern void prefix_from_env (const char *, struct path_prefix *);\n extern void prefix_from_string (const char *, struct path_prefix *);\n "}, {"sha": "d5d80e042e5a438b42528e16d0ed6e047bcf017b", "filename": "gcc/gcc-ar.c", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2Fgcc-ar.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93659712d9807d7ef01d472dc58119f4ac15cbad/gcc%2Fgcc-ar.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc-ar.c?ref=93659712d9807d7ef01d472dc58119f4ac15cbad", "patch": "@@ -194,14 +194,6 @@ main (int ac, char **av)\n #ifdef CROSS_DIRECTORY_STRUCTURE\n       real_exe_name = concat (target_machine, \"-\", PERSONALITY, NULL);\n #endif\n-      /* Do not search original location in the same folder.  */\n-      char *exe_folder = lrealpath (av[0]);\n-      exe_folder[strlen (exe_folder) - strlen (lbasename (exe_folder))] = '\\0';\n-      char *location = concat (exe_folder, PERSONALITY, NULL);\n-\n-      if (access (location, X_OK) == 0)\n-\tremove_prefix (exe_folder, &path);\n-\n       exe_name = find_a_file (&path, real_exe_name, X_OK);\n       if (!exe_name)\n \t{"}]}