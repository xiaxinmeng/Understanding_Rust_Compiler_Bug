{"sha": "46d360629c51103214a197e1b208fc365c9e55db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZkMzYwNjI5YzUxMTAzMjE0YTE5N2UxYjIwOGZjMzY1YzllNTVkYg==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2001-12-07T19:00:07Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2001-12-07T19:00:07Z"}, "message": "locale_facets.tcc (num_put::_M_convert_float): Extend comment, reduce __cs_size for non-fixed outputs.\n\n2001-12-07  Paolo Carlini  <pcarlini@unitus.it>\n\n\t* include/bits/locale_facets.tcc (num_put::_M_convert_float):\n\tExtend comment, reduce __cs_size for non-fixed outputs.\n\nFrom-SVN: r47767", "tree": {"sha": "29d4ee730abcfab05c681ce96fea14c67deb9f0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29d4ee730abcfab05c681ce96fea14c67deb9f0d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46d360629c51103214a197e1b208fc365c9e55db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46d360629c51103214a197e1b208fc365c9e55db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46d360629c51103214a197e1b208fc365c9e55db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46d360629c51103214a197e1b208fc365c9e55db/comments", "author": null, "committer": null, "parents": [{"sha": "9975c6d4289c31434ee9dccf72cfbd84c1778bf3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9975c6d4289c31434ee9dccf72cfbd84c1778bf3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9975c6d4289c31434ee9dccf72cfbd84c1778bf3"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "4e32aa306f37a2ba2d43876c8cd568ccf058c149", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d360629c51103214a197e1b208fc365c9e55db/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d360629c51103214a197e1b208fc365c9e55db/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=46d360629c51103214a197e1b208fc365c9e55db", "patch": "@@ -1,3 +1,8 @@\n+2001-12-07  Paolo Carlini  <pcarlini@unitus.it>\n+        \n+\t* include/bits/locale_facets.tcc (num_put::_M_convert_float):\n+\tExtend comment, reduce __cs_size for non-fixed outputs.\n+\n 2001-12-07  Paolo Carlini  <pcarlini@unitus.it>\n \n \t* include/bits/basic_string.tcc (_M_mutate): Fix typo"}, {"sha": "51bc9edb5dc4e1c5a68f53dfedd6bdb7674dad9e", "filename": "libstdc++-v3/include/bits/locale_facets.tcc", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d360629c51103214a197e1b208fc365c9e55db/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d360629c51103214a197e1b208fc365c9e55db/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc?ref=46d360629c51103214a197e1b208fc365c9e55db", "patch": "@@ -762,9 +762,13 @@ namespace std\n \t// Consider the possibility of long ios_base::fixed outputs\n \tconst bool __fixed = __io.flags() & ios_base::fixed;\n \tconst int __max_exp = numeric_limits<_ValueT>::max_exponent10;\n-\t// XXX Why + 4? Why * 4? What's going on? Who's on first?\n+\t// ios_base::fixed outputs may need up to __max_exp+1 chars\n+\t// for the integer part + up to __max_digits chars for the\n+\t// fractional part + 3 chars for sign, decimal point, '\\0'. On\n+\t// the other hand, for non-fixed outputs __max_digits*3 chars\n+\t// are largely sufficient.\n \tconst int __cs_size = __fixed ? __max_exp + __max_digits + 4 \n-\t                              : __max_digits * 4;\n+\t                              : __max_digits * 3;\n \tchar* __cs = static_cast<char*>(__builtin_alloca(__cs_size));\n \n \tint __len;"}]}