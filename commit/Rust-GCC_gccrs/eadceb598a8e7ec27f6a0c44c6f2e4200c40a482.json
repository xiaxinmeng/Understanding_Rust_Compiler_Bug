{"sha": "eadceb598a8e7ec27f6a0c44c6f2e4200c40a482", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWFkY2ViNTk4YThlN2VjMjdmNmEwYzQ0YzZmMmU0MjAwYzQwYTQ4Mg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-08-02T17:25:31Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-08-02T17:25:31Z"}, "message": "(sparc_builtin_saveregs): If -fcheck-memory-usage, set rights of saved\nregisters.\n\nFrom-SVN: r14624", "tree": {"sha": "a22e382c5aae82a48faf17cce4eae2b2256d2786", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a22e382c5aae82a48faf17cce4eae2b2256d2786"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eadceb598a8e7ec27f6a0c44c6f2e4200c40a482", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eadceb598a8e7ec27f6a0c44c6f2e4200c40a482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eadceb598a8e7ec27f6a0c44c6f2e4200c40a482", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eadceb598a8e7ec27f6a0c44c6f2e4200c40a482/comments", "author": null, "committer": null, "parents": [{"sha": "5e32727ccc4b252f1b8c7500d9dbe6fa6d165070", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "4235c93580240666e426fb53bfd2d2dca4f577f0", "filename": "gcc/config/sparc/sparc.c", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eadceb598a8e7ec27f6a0c44c6f2e4200c40a482/gcc%2Fconfig%2Fsparc%2Fsparc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eadceb598a8e7ec27f6a0c44c6f2e4200c40a482/gcc%2Fconfig%2Fsparc%2Fsparc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.c?ref=eadceb598a8e7ec27f6a0c44c6f2e4200c40a482", "patch": "@@ -3454,6 +3454,20 @@ sparc_builtin_saveregs (arglist)\n \t\t    gen_rtx (REG, DFmode,\n \t\t\t     BASE_INCOMING_ARG_REG (DFmode) + regno));\n \n+  if (flag_check_memory_usage)\n+    {\n+      emit_library_call (chkr_set_right_libfunc, 1, VOIDmode, 3, regbuf,\n+\t\t ptr_mode, GEN_INT (n_intregs * UNITS_PER_WORD),\n+\t\t\t TYPE_MODE (sizetype), GEN_INT (MEMORY_USE_RW), QImode);\n+\n+      emit_library_call (chkr_set_right_libfunc, 1, VOIDmode, 3,\n+\t\t\t fpregs, ptr_mode,\n+\t\t\t GEN_INT (UNITS_PER_WORD \n+\t\t\t \t  * GET_MODE_SIZE (SFmode)\n+\t\t\t\t  * (NPARM_REGS (SFmode) - first_floatreg)),\n+\t\t\t TYPE_MODE (sizetype), GEN_INT (MEMORY_USE_RW), QImode);\n+    }\n+\n   /* Return the address of the regbuf.  */\n \n   return XEXP (regbuf, 0);\n@@ -3493,6 +3507,13 @@ sparc_builtin_saveregs (arglist)\n \t\t     GEN_INT (STACK_POINTER_OFFSET\n \t\t\t      + UNITS_PER_WORD * first_reg));\n \n+  if (flag_check_memory_usage)\n+    emit_library_call (chkr_set_right_libfunc, 1, VOIDmode, 3,\n+\t\t       address, ptr_mode,\n+\t\t       GEN_INT (UNITS_PER_WORD \n+\t\t\t \t* (NPARM_REGS (SImode) - first_reg)),\n+\t\t       TYPE_MODE (sizetype), GEN_INT (MEMORY_USE_RW), QImode);\n+\n   return address;\n }\n "}]}