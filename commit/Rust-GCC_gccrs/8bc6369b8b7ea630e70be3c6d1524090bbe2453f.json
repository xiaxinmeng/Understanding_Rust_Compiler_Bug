{"sha": "8bc6369b8b7ea630e70be3c6d1524090bbe2453f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJjNjM2OWI4YjdlYTYzMGU3MGJlM2M2ZDE1MjQwOTBiYmUyNDUzZg==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-12-30T17:21:54Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-12-30T17:21:54Z"}, "message": "fold-const.c (fold): Don't require strict type equality...\n\n\n\t* fold-const.c (fold) <COND_EXPR>: Don't require strict type\n\tequality, instead just prevent replacing a COND_EXPR of non-void\n\ttype by one of its operands of void type.\n\nFrom-SVN: r75239", "tree": {"sha": "3dc42bb1e1f0b5c9f923c27df3faddc782304cc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3dc42bb1e1f0b5c9f923c27df3faddc782304cc3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bc6369b8b7ea630e70be3c6d1524090bbe2453f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bc6369b8b7ea630e70be3c6d1524090bbe2453f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bc6369b8b7ea630e70be3c6d1524090bbe2453f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bc6369b8b7ea630e70be3c6d1524090bbe2453f/comments", "author": null, "committer": null, "parents": [{"sha": "34998d6bb655f3270bc54656aa9519360100c2d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34998d6bb655f3270bc54656aa9519360100c2d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34998d6bb655f3270bc54656aa9519360100c2d8"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "20ca93eba17b02c7789d686202a12beb588b3baf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bc6369b8b7ea630e70be3c6d1524090bbe2453f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bc6369b8b7ea630e70be3c6d1524090bbe2453f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8bc6369b8b7ea630e70be3c6d1524090bbe2453f", "patch": "@@ -1,3 +1,9 @@\n+2003-12-30  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* fold-const.c (fold) <COND_EXPR>: Don't require strict type\n+\tequality, instead just prevent replacing a COND_EXPR of non-void\n+\ttype by one of its operands of void type.\n+\n 2003-12-30  Andreas Schwab  <schwab@suse.de>\n \n \t* doc/c-tree.texi: Fix @item vs. @itemx."}, {"sha": "7a939c4966658545711035d13c1496bc819f3cde", "filename": "gcc/fold-const.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bc6369b8b7ea630e70be3c6d1524090bbe2453f/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bc6369b8b7ea630e70be3c6d1524090bbe2453f/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=8bc6369b8b7ea630e70be3c6d1524090bbe2453f", "patch": "@@ -7869,7 +7869,8 @@ fold (tree expr)\n \t  /* Only optimize constant conditions when the selected branch\n \t     has the same type as the COND_EXPR.  This avoids optimizing\n \t     away \"c ? x : throw\", where the throw has a void type.  */\n-\t  if (TREE_TYPE (tem) == TREE_TYPE (t))\n+\t  if (! VOID_TYPE_P (TREE_TYPE (tem))\n+\t      || VOID_TYPE_P (TREE_TYPE (t)))\n \t    return pedantic_non_lvalue (tem);\n \t  return t;\n \t}"}]}