{"sha": "31ceb57477da2993957f0b76d6054429c10fe917", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFjZWI1NzQ3N2RhMjk5Mzk1N2YwYjc2ZDYwNTQ0MjljMTBmZTkxNw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-10-02T22:03:18Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-10-02T22:03:18Z"}, "message": "tree-ssa-ccp.c (ccp_fold_stmt): Fold away OBJ_TYPE_REF when call destination is known.\n\n\n\t* tree-ssa-ccp.c (ccp_fold_stmt): Fold away OBJ_TYPE_REF when\n\tcall destination is known.\n\nFrom-SVN: r164908", "tree": {"sha": "c3de4095774de2ff1ec1b136ae2037bc518dbbf2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3de4095774de2ff1ec1b136ae2037bc518dbbf2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31ceb57477da2993957f0b76d6054429c10fe917", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31ceb57477da2993957f0b76d6054429c10fe917", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31ceb57477da2993957f0b76d6054429c10fe917", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31ceb57477da2993957f0b76d6054429c10fe917/comments", "author": null, "committer": null, "parents": [{"sha": "34e94db7ad489b2bca77106bc7141e96a28ab925", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34e94db7ad489b2bca77106bc7141e96a28ab925", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34e94db7ad489b2bca77106bc7141e96a28ab925"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "1fa311daf2ed1cfdbec61339df5c00b36d0a40d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31ceb57477da2993957f0b76d6054429c10fe917/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31ceb57477da2993957f0b76d6054429c10fe917/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=31ceb57477da2993957f0b76d6054429c10fe917", "patch": "@@ -1,3 +1,8 @@\n+2010-10-02  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-ssa-ccp.c (ccp_fold_stmt): Fold away OBJ_TYPE_REF when\n+\tcall destination is known.\n+\n 2010-10-02  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \tPR target/45820"}, {"sha": "a3d51556d4edb0c0dd206811a1275b8894f4cc66", "filename": "gcc/tree-ssa-ccp.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31ceb57477da2993957f0b76d6054429c10fe917/gcc%2Ftree-ssa-ccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31ceb57477da2993957f0b76d6054429c10fe917/gcc%2Ftree-ssa-ccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-ccp.c?ref=31ceb57477da2993957f0b76d6054429c10fe917", "patch": "@@ -2307,6 +2307,17 @@ ccp_fold_stmt (gimple_stmt_iterator *gsi)\n \t\tchanged = true;\n \t      }\n \t  }\n+\tif (TREE_CODE (gimple_call_fn (stmt)) == OBJ_TYPE_REF)\n+\t  {\n+\t    tree expr = OBJ_TYPE_REF_EXPR (gimple_call_fn (stmt));\n+\t    expr = valueize_op (expr);\n+\t    if (TREE_CODE (expr) == ADDR_EXPR\n+\t        && TREE_CODE (TREE_OPERAND (expr, 0)) == FUNCTION_DECL)\n+\t     {\n+\t       gimple_call_set_fn (stmt, expr);\n+\t       changed = true;\n+\t     }\n+\t  }\n \n \treturn changed;\n       }"}]}