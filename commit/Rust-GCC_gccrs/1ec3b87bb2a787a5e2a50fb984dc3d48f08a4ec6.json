{"sha": "1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWVjM2I4N2JiMmE3ODdhNWUyYTUwZmI5ODRkYzNkNDhmMDhhNGVjNg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@nildram.co.uk", "date": "2007-09-20T20:01:34Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-09-20T20:01:34Z"}, "message": "configure.ac (mipsisa*-*-elfoabi*): New stanza.\n\n\t* configure.ac (mipsisa*-*-elfoabi*): New stanza.\n\t* configure: Regenerate.\n\nconfig/\n\t* mt-mips-elfoabi: New file.\n\ngcc/\n\t* doc/invoke.texi (-minterlink-mips16): Document.\n\t* config/mips/mips.opt (minterlink-mips16): New option.\n\t* config/mips/mips.c (mips_function_ok_for_sibcall): Handle\n\t-minterlink-mips16\n\nFrom-SVN: r128625", "tree": {"sha": "8345d7279012b8f1544b4b9ab28e8b7ad850e573", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8345d7279012b8f1544b4b9ab28e8b7ad850e573"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/comments", "author": null, "committer": null, "parents": [{"sha": "f25bf34f06bd8a1ada0928e402acbe984a199dbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f25bf34f06bd8a1ada0928e402acbe984a199dbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f25bf34f06bd8a1ada0928e402acbe984a199dbb"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "a3a0df8e12d1762fc6dfb5415c05b3afd852525c", "filename": "ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -1,3 +1,8 @@\n+2007-09-20  Richard Sandiford  <rsandifo@nildram.co.uk>\n+\n+\t* configure.ac (mipsisa*-*-elfoabi*): New stanza.\n+\t* configure: Regenerate.\n+\n 2007-09-20  Paul Jarc  <prj-bugzilla-gcc@multivac.cwru.edu>\n \n \tPR bootstrap/31906"}, {"sha": "868e0e86aad3b97406e8214b545206f84c47fc08", "filename": "config/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -1,3 +1,7 @@\n+2007-09-20  Richard Sandiford  <rsandifo@nildram.co.uk>\n+\n+\t* mt-mips-elfoabi: New file.\n+\n 2007-09-07  Richard Sandiford  <richard@codesourcery.com>\n \n \t* mt-sde (CFLAGS_FOR_TARGET): Add -mno-gpopt."}, {"sha": "49c8ecd32ba18de5e7dcbfbf4fce5aac090d7910", "filename": "config/mt-mips-elfoabi", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/config%2Fmt-mips-elfoabi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/config%2Fmt-mips-elfoabi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fmt-mips-elfoabi?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -0,0 +1,6 @@\n+# The *-elfoabi configurations are intended to be usable for both\n+# MIPS16 and non-MIPS16 code, but the libraries are all non-MIPS16.\n+# Add -minterlink-mips16 so that the libraries can be used with both\n+# ISA modes.\n+CFLAGS_FOR_TARGET = -minterlink-mips16\n+CXXFLAGS_FOR_TARGET = -minterlink-mips16"}, {"sha": "eca027f19e3dada63009c68e290f7ed09fabbcec", "filename": "configure", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -5279,6 +5279,9 @@ case \"${target}\" in\n   mips*-sde-elf*)\n     target_makefile_frag=\"config/mt-sde\"\n     ;;\n+  mipsisa*-*-elfoabi*)\n+    target_makefile_frag=\"config/mt-mips-elfoabi\"\n+    ;;\n   *-*-netware*)\n     target_makefile_frag=\"config/mt-netware\"\n     ;;"}, {"sha": "1496347d86ab4cfee52d2890ef3926758b10c730", "filename": "configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -1798,6 +1798,9 @@ case \"${target}\" in\n   mips*-sde-elf*)\n     target_makefile_frag=\"config/mt-sde\"\n     ;;\n+  mipsisa*-*-elfoabi*)\n+    target_makefile_frag=\"config/mt-mips-elfoabi\"\n+    ;;\n   *-*-netware*)\n     target_makefile_frag=\"config/mt-netware\"\n     ;;"}, {"sha": "72df51a9fdf8be6ffb7b42c5d8f804bb1d2f098f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -1,3 +1,10 @@\n+2007-09-20  Richard Sandiford  <rsandifo@nildram.co.uk>\n+\n+\t* doc/invoke.texi (-minterlink-mips16): Document.\n+\t* config/mips/mips.opt (minterlink-mips16): New option.\n+\t* config/mips/mips.c (mips_function_ok_for_sibcall): Handle\n+\t-minterlink-mips16\n+\n 2007-09-20  Joseph Myers  <joseph@codesourcery.com>\n \n \t* doc/extend.texi (Attribute Syntax): Remove old speculative"}, {"sha": "f2c8ba9fb83648bbebe20638dbcbed8272ef8441", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -4256,6 +4256,17 @@ mips_function_ok_for_sibcall (tree decl, tree exp ATTRIBUTE_UNUSED)\n   if (mips_use_mips16_mode_p (decl))\n     return false;\n \n+  /* ...and when -minterlink-mips16 is in effect, assume that external\n+     functions could be MIPS16 ones unless an attribute explicitly\n+     tells us otherwise.  We only care about cases where the sibling\n+     and normal calls would both be direct.  */\n+  if (TARGET_INTERLINK_MIPS16\n+      && decl\n+      && DECL_EXTERNAL (decl)\n+      && !mips_nomips16_decl_p (decl)\n+      && const_call_insn_operand (XEXP (DECL_RTL (decl), 0), VOIDmode))\n+    return false;\n+\n   /* Otherwise OK.  */\n   return true;\n }"}, {"sha": "05aedda1428ba7e2045abd4909cd435cc2ba6e0d", "filename": "gcc/config/mips/mips.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2Fconfig%2Fmips%2Fmips.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2Fconfig%2Fmips%2Fmips.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.opt?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -164,6 +164,10 @@ mhard-float\n Target Report RejectNegative InverseMask(SOFT_FLOAT_ABI, HARD_FLOAT_ABI)\n Allow the use of hardware floating-point ABI and instructions\n \n+minterlink-mips16\n+Target Report Var(TARGET_INTERLINK_MIPS16) Init(0)\n+Generate code that can be safely linked with MIPS16 code.\n+\n mips\n Target RejectNegative Joined\n -mipsN\tGenerate code for ISA level N"}, {"sha": "7f85b7e705bcb1f049bfd07c2bff78a08fc237c0", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=1ec3b87bb2a787a5e2a50fb984dc3d48f08a4ec6", "patch": "@@ -623,6 +623,7 @@ Objective-C and Objective-C++ Dialects}.\n @gccoptlist{-EL  -EB  -march=@var{arch}  -mtune=@var{arch} @gol\n -mips1  -mips2  -mips3  -mips4  -mips32  -mips32r2  -mips64 @gol\n -mips16  -mno-mips16  -mflip-mips16 @gol\n+-minterlink-mips16  -mno-interlink-mips16 @gol\n -mabi=@var{abi}  -mabicalls  -mno-abicalls @gol\n -mshared  -mno-shared  -mxgot  -mno-xgot  -mgp32  -mgp64 @gol\n -mfp32  -mfp64  -mhard-float  -msoft-float @gol\n@@ -11684,6 +11685,18 @@ Generate MIPS16 code on alternating functions.  This option is provided\n for regression testing of mixed MIPS16/non-MIPS16 code generation, and is\n not intended for ordinary use in compiling user code.\n \n+@item -minterlink-mips16\n+@itemx -mno-interlink-mips16\n+@opindex minterlink-mips16\n+@opindex mno-interlink-mips16\n+Require (do not require) that non-MIPS16 code be link-compatible with\n+MIPS16 code.\n+\n+For example, non-MIPS16 code cannot jump directly to MIPS16 code;\n+it must either use a call or an indirect jump.  @option{-minterlink-mips16}\n+therefore disables direct jumps unless GCC knows that the target of the\n+jump is not MIPS16.\n+\n @item -mabi=32\n @itemx -mabi=o64\n @itemx -mabi=n32"}]}