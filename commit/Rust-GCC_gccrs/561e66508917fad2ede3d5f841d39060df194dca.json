{"sha": "561e66508917fad2ede3d5f841d39060df194dca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTYxZTY2NTA4OTE3ZmFkMmVkZTNkNWY4NDFkMzkwNjBkZjE5NGRjYQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-23T10:21:36Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-23T10:21:36Z"}, "message": "New macro to decode a symbol name munged by ENCODE_SECTION_INFO.\n\n(STRIP_NAME_ENCODING):\nNew macro to decode a symbol name munged by ENCODE_SECTION_INFO.\n(assemble_start_function, assemble_variable): Use STRIP_NAME_ENCODING.\n\nFrom-SVN: r2572", "tree": {"sha": "10417afe56496d01d8e300a4fb1da762632e6f2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10417afe56496d01d8e300a4fb1da762632e6f2b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/561e66508917fad2ede3d5f841d39060df194dca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/561e66508917fad2ede3d5f841d39060df194dca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/561e66508917fad2ede3d5f841d39060df194dca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/561e66508917fad2ede3d5f841d39060df194dca/comments", "author": null, "committer": null, "parents": [{"sha": "e42b4c96267488cdce926300487d9f2582243690", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e42b4c96267488cdce926300487d9f2582243690", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e42b4c96267488cdce926300487d9f2582243690"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "e5d757cde4d6529b583e353203c2cf667c244acd", "filename": "gcc/varasm.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/561e66508917fad2ede3d5f841d39060df194dca/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/561e66508917fad2ede3d5f841d39060df194dca/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=561e66508917fad2ede3d5f841d39060df194dca", "patch": "@@ -49,6 +49,14 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #define ASM_STABS_OP \".stabs\"\n #endif\n \n+/* This macro gets just the user-specified name\n+   out of the string in a SYMBOL_REF.  On most machines,\n+   we discard the * if any and that's all.  */\n+#ifndef STRIP_NAME_ENCODING\n+#define STRIP_NAME_ENCODING(VAR,SYMBOL_NAME) \\\n+  (VAR) = ((SYMBOL_NAME) + ((SYMBOL_NAME)[0] == '*'))\n+#endif\n+\n /* File in which assembler code is being written.  */\n \n extern FILE *asm_out_file;\n@@ -549,7 +557,7 @@ assemble_start_function (decl, fnname)\n   if (TREE_PUBLIC (decl))\n     {\n       if (!first_global_object_name)\n-\tfirst_global_object_name = fnname + (fnname[0] == '*');\n+\tSTRIP_NAME_ENCODING (first_global_object_name, fnname);\n       ASM_GLOBALIZE_LABEL (asm_out_file, fnname);\n     }\n \n@@ -839,7 +847,7 @@ assemble_variable (decl, top_level, at_end)\n   if (TREE_PUBLIC (decl) && DECL_NAME (decl))\n     {\n       if (!first_global_object_name)\n-\tfirst_global_object_name = name + (name[0] == '*');\n+\tSTRIP_NAME_ENCODING(first_global_object_name, name);\n       ASM_GLOBALIZE_LABEL (asm_out_file, name);\n     }\n #if 0"}]}