{"sha": "1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQyN2Q2ZDJiYzRlZTVlOWI5NTI3ZGM2MTc3ZmQyNTE3ODFjZTJjZA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-05-17T12:54:54Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-05-17T12:54:54Z"}, "message": "(insn_cuid): New function.\n\n(INSN_CUID): Sometimes call it.\n\nFrom-SVN: r11986", "tree": {"sha": "a7537018d9ea1eb3b25deb180c925d39ae13bc18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7537018d9ea1eb3b25deb180c925d39ae13bc18"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd/comments", "author": null, "committer": null, "parents": [{"sha": "fc94a55b9221b13ebe9ac1c01a096d18c5d92594", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc94a55b9221b13ebe9ac1c01a096d18c5d92594", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc94a55b9221b13ebe9ac1c01a096d18c5d92594"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "889e93ebc61bf801a4eba69bef71989427b5c5d8", "filename": "gcc/combine.c", "status": "modified", "additions": 19, "deletions": 3, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=1427d6d2bc4ee5e9b9527dc6177fd251781ce2cd", "patch": "@@ -140,9 +140,8 @@ static int max_uid_cuid;\n \n /* Get the cuid of an insn.  */\n \n-#define INSN_CUID(INSN) (INSN_UID (INSN) > max_uid_cuid\t\t\\\n-\t\t\t ? (abort(), 0)\t\t\t\t\\\n-\t\t\t : uid_cuid[INSN_UID (INSN)])\n+#define INSN_CUID(INSN) \\\n+(INSN_UID (INSN) > max_uid_cuid ? insn_cuid (INSN) : uid_cuid[INSN_UID (INSN)])\n \n /* Maximum register number, which is the size of the tables below.  */\n \n@@ -446,6 +445,7 @@ static int reg_bitfield_target_p  PROTO((rtx, rtx));\n static void distribute_notes\tPROTO((rtx, rtx, rtx, rtx, rtx, rtx));\n static void distribute_links\tPROTO((rtx));\n static void mark_used_regs_combine PROTO((rtx));\n+static int insn_cuid\t\tPROTO((rtx));\n \f\n /* Main entry point for combiner.  F is the first insn of the function.\n    NREGS is the first unused pseudo-reg number.  */\n@@ -11191,6 +11191,22 @@ distribute_links (links)\n     }\n }\n \f\n+/* Compute INSN_CUID for INSN, which is an insn made by combine.  */\n+\n+static int\n+insn_cuid (insn)\n+     rtx insn;\n+{\n+  while (insn != 0 && INSN_UID (insn) > max_uid_cuid\n+\t && GET_CODE (insn) == INSN && GET_CODE (PATTERN (insn)) == USE)\n+    insn = NEXT_INSN (insn);\n+\n+  if (INSN_UID (insn) > max_uid_cuid)\n+    abort ();\n+\n+  return INSN_CUID (insn);\n+}\n+\f\n void\n dump_combine_stats (file)\n      FILE *file;"}]}