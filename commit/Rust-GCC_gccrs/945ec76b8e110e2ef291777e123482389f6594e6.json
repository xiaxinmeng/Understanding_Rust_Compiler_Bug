{"sha": "945ec76b8e110e2ef291777e123482389f6594e6", "node_id": "C_kwDOANBUbNoAKDk0NWVjNzZiOGUxMTBlMmVmMjkxNzc3ZTEyMzQ4MjM4OWY2NTk0ZTY", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2021-10-05T12:12:46Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-10-11T13:38:11Z"}, "message": "[Ada] Simplify membership tests with N_Generic_Declaration\n\ngcc/ada/\n\n\t* sem_ch10.adb, sem_prag.adb, sem_util.adb: Use\n\tN_Generic_Declaration in membership tests.", "tree": {"sha": "067c58fa68597e68516baaea6116e856ab06b268", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/067c58fa68597e68516baaea6116e856ab06b268"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/945ec76b8e110e2ef291777e123482389f6594e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/945ec76b8e110e2ef291777e123482389f6594e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/945ec76b8e110e2ef291777e123482389f6594e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/945ec76b8e110e2ef291777e123482389f6594e6/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "35338c60e4634e29d8704df6e7012fcdc7eb909c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35338c60e4634e29d8704df6e7012fcdc7eb909c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35338c60e4634e29d8704df6e7012fcdc7eb909c"}], "stats": {"total": 26, "additions": 7, "deletions": 19}, "files": [{"sha": "5b54e7d0de985818774a60822a5754e8abb57cd8", "filename": "gcc/ada/sem_ch10.adb", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/945ec76b8e110e2ef291777e123482389f6594e6/gcc%2Fada%2Fsem_ch10.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/945ec76b8e110e2ef291777e123482389f6594e6/gcc%2Fada%2Fsem_ch10.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch10.adb?ref=945ec76b8e110e2ef291777e123482389f6594e6", "patch": "@@ -4162,8 +4162,7 @@ package body Sem_Ch10 is\n       end if;\n \n       if Ekind (P_Name) = E_Generic_Package\n-        and then Nkind (Lib_Unit) not in N_Generic_Subprogram_Declaration\n-                                       | N_Generic_Package_Declaration\n+        and then Nkind (Lib_Unit) not in N_Generic_Declaration\n                                        | N_Generic_Renaming_Declaration\n       then\n          Error_Msg_N\n@@ -6193,9 +6192,7 @@ package body Sem_Ch10 is\n               (\"subprogram not allowed in `LIMITED WITH` clause\", N);\n             return;\n \n-         when N_Generic_Package_Declaration\n-            | N_Generic_Subprogram_Declaration\n-         =>\n+         when N_Generic_Declaration =>\n             Error_Msg_N (\"generic not allowed in `LIMITED WITH` clause\", N);\n             return;\n "}, {"sha": "b3fa32ad5c005af8700842b6b35addb26e42ea80", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/945ec76b8e110e2ef291777e123482389f6594e6/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/945ec76b8e110e2ef291777e123482389f6594e6/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=945ec76b8e110e2ef291777e123482389f6594e6", "patch": "@@ -6678,9 +6678,7 @@ package body Sem_Prag is\n                   then\n                      Pragma_Misplaced;\n \n-                  elsif (Nkind (Parent_Node) = N_Generic_Package_Declaration\n-                          or else Nkind (Parent_Node) =\n-                                             N_Generic_Subprogram_Declaration)\n+                  elsif Nkind (Parent_Node) in N_Generic_Declaration\n                     and then Plist = Generic_Formal_Declarations (Parent_Node)\n                   then\n                      Pragma_Misplaced;"}, {"sha": "e79c5345f1da6eff1934240a0a9f3ff0589f69ff", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/945ec76b8e110e2ef291777e123482389f6594e6/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/945ec76b8e110e2ef291777e123482389f6594e6/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=945ec76b8e110e2ef291777e123482389f6594e6", "patch": "@@ -8030,8 +8030,7 @@ package body Sem_Util is\n \n             if Present (Spec_Id)\n               and then Nkind (Unit_Declaration_Node (Spec_Id)) in\n-                         N_Generic_Package_Declaration |\n-                         N_Generic_Subprogram_Declaration\n+                         N_Generic_Declaration\n             then\n                return Par;\n             end if;\n@@ -8055,9 +8054,7 @@ package body Sem_Util is\n    begin\n       Par := Parent (N);\n       while Present (Par) loop\n-         if Nkind (Par) in N_Generic_Package_Declaration\n-                         | N_Generic_Subprogram_Declaration\n-         then\n+         if Nkind (Par) in N_Generic_Declaration then\n             return Par;\n \n          elsif Nkind (Par) in N_Package_Body | N_Subprogram_Body then\n@@ -8066,9 +8063,7 @@ package body Sem_Util is\n             if Present (Spec_Id) then\n                Spec_Decl := Unit_Declaration_Node (Spec_Id);\n \n-               if Nkind (Spec_Decl) in N_Generic_Package_Declaration\n-                                     | N_Generic_Subprogram_Declaration\n-               then\n+               if Nkind (Spec_Decl) in N_Generic_Declaration then\n                   return Spec_Decl;\n                end if;\n             end if;\n@@ -17891,9 +17886,7 @@ package body Sem_Util is\n       --  a generic body modifies the Ekind of its spec to allow for recursive\n       --  calls.\n \n-      return\n-        Nkind (Spec_Decl) in N_Generic_Package_Declaration\n-                           | N_Generic_Subprogram_Declaration;\n+      return Nkind (Spec_Decl) in N_Generic_Declaration;\n    end Is_Generic_Declaration_Or_Body;\n \n    ---------------------------"}]}