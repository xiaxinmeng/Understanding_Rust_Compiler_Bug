{"sha": "96fd03a4d5c51d70222b2a2470699dfc52ee8d10", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZmZDAzYTRkNWM1MWQ3MDIyMmIyYTI0NzA2OTlkZmM1MmVlOGQxMA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2005-12-01T15:03:23Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2005-12-01T15:03:23Z"}, "message": "* config/ms1/ms1.c (ms1_reorg_hazard): Don't count noop moves.\n\nFrom-SVN: r107821", "tree": {"sha": "2246f86f2dd6ce0a10fe7cf9d8ab7700b0b6e579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2246f86f2dd6ce0a10fe7cf9d8ab7700b0b6e579"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96fd03a4d5c51d70222b2a2470699dfc52ee8d10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96fd03a4d5c51d70222b2a2470699dfc52ee8d10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96fd03a4d5c51d70222b2a2470699dfc52ee8d10", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96fd03a4d5c51d70222b2a2470699dfc52ee8d10/comments", "author": null, "committer": null, "parents": [{"sha": "9e28024aeb0a31037280e3cc579e7c289287d8ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e28024aeb0a31037280e3cc579e7c289287d8ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e28024aeb0a31037280e3cc579e7c289287d8ee"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "28a1856011ce62087dec4b6c0c9f29c5c9e9d462", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96fd03a4d5c51d70222b2a2470699dfc52ee8d10/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96fd03a4d5c51d70222b2a2470699dfc52ee8d10/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=96fd03a4d5c51d70222b2a2470699dfc52ee8d10", "patch": "@@ -1,5 +1,7 @@\n 2005-12-01  Nathan Sidwell  <nathan@codesourcery.com>\n \n+\t* config/ms1/ms1.c (ms1_reorg_hazard): Don't count noop moves.\n+\n \t* vec.h (VEC_block_remove): New.\n \n 2005-12-01  Gabriel Dos Reis  <gdr@integrable-solutions.net>"}, {"sha": "9bc5138d4c3bdc90719ecf798086cbdc9f31b25b", "filename": "gcc/config/ms1/ms1.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96fd03a4d5c51d70222b2a2470699dfc52ee8d10/gcc%2Fconfig%2Fms1%2Fms1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96fd03a4d5c51d70222b2a2470699dfc52ee8d10/gcc%2Fconfig%2Fms1%2Fms1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fms1%2Fms1.c?ref=96fd03a4d5c51d70222b2a2470699dfc52ee8d10", "patch": "@@ -1915,7 +1915,16 @@ ms1_reorg_hazard (void)\n \t\t      break;\n \t\t    }\n \t\t}\n-\t      count -= INSN_CODE (prev) >= 0;\n+\n+\t      if (INSN_CODE (prev) >= 0)\n+\t\t{\n+\t\t  rtx set = single_set (prev);\n+\n+\t\t  /* A noop set will get deleted in a later split pass,\n+\t     \t     so we can't count on it for hazard avoidance.  */\n+\t\t  if (!set || !set_noop_p (set))\n+\t\t    count--;\n+\t\t}\n \t    }\n \n \t  if (rescan)"}]}