{"sha": "aab37812b19355ad9b88d3ccb37616cf111c09d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFiMzc4MTJiMTkzNTVhZDliODhkM2NjYjM3NjE2Y2YxMTFjMDlkOA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-01-17T07:05:54Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-01-17T07:05:54Z"}, "message": "pch.exp: Copy test header to the working directory before using it either for...\n\n        * g++.dg/pch/pch.exp: Copy test header to the working directory\n        before using it either for precompilation or direct use.\n        * g++.dg/pch/*.Hs: Rename from gcc.dg/pch/*.H.\n        * g++.dg/pch/*.C: Include foo.H, not foo.Hp.\n\nFrom-SVN: r61428", "tree": {"sha": "41427479fc51011423fded25361b190f8b892048", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/41427479fc51011423fded25361b190f8b892048"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aab37812b19355ad9b88d3ccb37616cf111c09d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aab37812b19355ad9b88d3ccb37616cf111c09d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aab37812b19355ad9b88d3ccb37616cf111c09d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aab37812b19355ad9b88d3ccb37616cf111c09d8/comments", "author": null, "committer": null, "parents": [{"sha": "bb38bbdfa7fb383cf0f033013d1f576c2a31037e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb38bbdfa7fb383cf0f033013d1f576c2a31037e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb38bbdfa7fb383cf0f033013d1f576c2a31037e"}], "stats": {"total": 37, "additions": 18, "deletions": 19}, "files": [{"sha": "4a29514debeb0847f97e2d0d61b8e594d776083e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aab37812b19355ad9b88d3ccb37616cf111c09d8", "patch": "@@ -1,3 +1,10 @@\n+2003-01-16  Richard Henderson  <rth@redhat.com>\n+\n+\t* g++.dg/pch/pch.exp: Copy test header to the working directory\n+\tbefore using it either for precompilation or direct use.\n+\t* g++.dg/pch/*.Hs: Rename from gcc.dg/pch/*.H.\n+\t* g++.dg/pch/*.C: Include foo.H, not foo.Hp.\n+\n 2003-01-16  Richard Henderson  <rth@redhat.com>\n \n \t* gcc.dg/pch/pch.exp: Copy test header to the working directory"}, {"sha": "92b3cbcdc02f033cb520629492a787ba998b113c", "filename": "gcc/testsuite/g++.dg/pch/empty.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fempty.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fempty.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fempty.C?ref=aab37812b19355ad9b88d3ccb37616cf111c09d8", "patch": "@@ -1,4 +1,4 @@\n-#include \"empty.Hp\"\n+#include \"empty.H\"\n int main() \n {\n   return 0;"}, {"sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391", "filename": "gcc/testsuite/g++.dg/pch/empty.Hs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fempty.Hs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fempty.Hs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fempty.Hs?ref=aab37812b19355ad9b88d3ccb37616cf111c09d8", "previous_filename": "gcc/testsuite/g++.dg/pch/empty.H"}, {"sha": "5b495e07a9bcb4b866eb4ca348b3b47d721579a0", "filename": "gcc/testsuite/g++.dg/pch/pch.exp", "status": "modified", "additions": 9, "deletions": 17, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.exp?ref=aab37812b19355ad9b88d3ccb37616cf111c09d8", "patch": "@@ -1,4 +1,4 @@\n-#   Copyright (C) 1997, 2002 Free Software Foundation, Inc.\n+#   Copyright (C) 1997, 2002, 2003 Free Software Foundation, Inc.\n \n # This program is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -36,11 +36,10 @@ foreach test [lsort [glob -nocomplain $srcdir/$subdir/*.C]] {\n     set nshort [file tail [file dirname $test]]/[file tail $test]\n     set bname \"[file rootname [file tail $test]]\"\n \n-    catch { file delete \"$bname.Hp.pch\" }\n     catch { file delete \"$bname.H.pch\" }\n+    catch { file delete \"$bname.H\" }\n     catch { file delete \"$bname.s\" }\n     catch { file delete \"$bname.s-pch\" }\n-    catch { file delete \"$bname.Hp\" }\n \n     # We don't try to use the loop-optimizing options, since they are highly\n     # unlikely to make any difference to PCH.\n@@ -49,30 +48,22 @@ foreach test [lsort [glob -nocomplain $srcdir/$subdir/*.C]] {\n \n \t# For the header files, the default is to precompile.\n \tset dg-do-what-default precompile\n-\tdg-test -keep-output \"[file rootname $test].H\" $flags \"\"\n+\tfile copy \"[file rootname $test].Hs\" \"$bname.H\"\n+\tdg-test -keep-output \"$bname.H\" $flags \"\"\n \n \t# For the rest, the default is to compile to .s.\n \tset dg-do-what-default compile\n \n \tif { [ file exists \"$bname.H.pch\" ] } {\n-\t    # To ensure that the PCH is used, not the original header,\n-\t    # the actual PCH file is renamed to \"<foo>.Hp.pch\".\n-\t    file rename \"$bname.H.pch\" \"$bname.Hp.pch\"\n-\t    if { [ is_remote host ] } {\n-\t\tremote_download host \"$bname.Hp.pch\"\n-\t    }\n+\t    # Ensure that the PCH file is used, not the original header.\n+\t    file delete \"$bname.H\"\n \n \t    dg-test -keep-output $test $flags \"-I.\"\n-\t    file delete \"$bname.Hp.pch\"\n+\t    file delete \"$bname.H.pch\"\n \t    if { [ file exists \"$bname.s\" ] } {\n \t\tfile rename \"$bname.s\" \"$bname.s-pch\"\n-\t\tif { [ is_remote host ] } {\n-\t\t    remote_upload host \"[file rootname $test].H\" \"$bname.Hp\"\n-\t\t} else {\n-\t\t    file copy \"[file rootname $test].H\" \"$bname.Hp\"\n-\t\t}\n+\t\tfile copy \"[file rootname $test].Hs\" \"$bname.H\"\n \t\tdg-test -keep-output $test $flags \"-I.\"\n-\t\tremote_file host delete \"$bname.Hp\"\n \t\tset tmp [ diff \"$bname.s\" \"$bname.s-pch\" ]\n \t\tif { $tmp == 0 } {\n \t\t    untested \"$nshort $flags assembly comparison\"\n@@ -81,6 +72,7 @@ foreach test [lsort [glob -nocomplain $srcdir/$subdir/*.C]] {\n \t\t} else {\n \t\t    fail \"$nshort $flags assembly comparison\"\n \t\t}\n+\t\tfile delete \"$bname.H\"\n \t\tfile delete \"$bname.s\"\n \t\tfile delete \"$bname.s-pch\"\n \t    } else {"}, {"sha": "72bea3c9a6f1c2208c582c82a147b9ea8c2d685f", "filename": "gcc/testsuite/g++.dg/pch/system-1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fsystem-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fsystem-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fsystem-1.C?ref=aab37812b19355ad9b88d3ccb37616cf111c09d8", "patch": "@@ -1,4 +1,4 @@\n-#include \"system-1.Hp\"\n+#include \"system-1.H\"\n \n int main() \n {"}, {"sha": "604782e4dc7e82af0bf7ae4bc04dd2ae4588a715", "filename": "gcc/testsuite/g++.dg/pch/system-1.Hs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fsystem-1.Hs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aab37812b19355ad9b88d3ccb37616cf111c09d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fsystem-1.Hs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fsystem-1.Hs?ref=aab37812b19355ad9b88d3ccb37616cf111c09d8", "previous_filename": "gcc/testsuite/g++.dg/pch/system-1.H"}]}