{"sha": "265a000dbbb824228a757d81c1887ccea41acc5d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY1YTAwMGRiYmI4MjQyMjhhNzU3ZDgxYzE4ODdjY2VhNDFhY2M1ZA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-09-06T09:27:55Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-09-06T09:27:55Z"}, "message": "fix libobjc ppc64 abi for darwin.\n\nlibobjc:\n\n\t* encoding.c: Add TARGET_ALIGN_NATURAL definition for m64 powerpc darwin.\n\tAdd a comment as to why, update FIXME comments.\n\ntestsuite:\n\n\t* objc.dg/gnu-encoding/struct-layout-encoding-1_generate.c:\n\tUpdate XFAILs.\n\nFrom-SVN: r163906", "tree": {"sha": "aa5181cdfcdde72823af4e0a75258a205247dd0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa5181cdfcdde72823af4e0a75258a205247dd0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/265a000dbbb824228a757d81c1887ccea41acc5d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/265a000dbbb824228a757d81c1887ccea41acc5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/265a000dbbb824228a757d81c1887ccea41acc5d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/265a000dbbb824228a757d81c1887ccea41acc5d/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "324d3f4525e9c1c6e57970652e43fa9cd83fed9b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/324d3f4525e9c1c6e57970652e43fa9cd83fed9b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/324d3f4525e9c1c6e57970652e43fa9cd83fed9b"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "c077339b2a81b31b86ac0559dc5eadaf8bd54d48", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/265a000dbbb824228a757d81c1887ccea41acc5d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/265a000dbbb824228a757d81c1887ccea41acc5d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=265a000dbbb824228a757d81c1887ccea41acc5d", "patch": "@@ -1,3 +1,8 @@\n+2010-09-06  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\t* objc.dg/gnu-encoding/struct-layout-encoding-1_generate.c:\n+\tUpdate XFAILs.\n+\n 2010-09-06  Alexander Monakov  <amonakov@ispras.ru>\n \n \tPR rtl-optimization/44919"}, {"sha": "3ac4179c04761828142ec8538a02f44c01b004c6", "filename": "gcc/testsuite/objc.dg/gnu-encoding/struct-layout-encoding-1_generate.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/265a000dbbb824228a757d81c1887ccea41acc5d/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-encoding%2Fstruct-layout-encoding-1_generate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/265a000dbbb824228a757d81c1887ccea41acc5d/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-encoding%2Fstruct-layout-encoding-1_generate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-encoding%2Fstruct-layout-encoding-1_generate.c?ref=265a000dbbb824228a757d81c1887ccea41acc5d", "patch": "@@ -236,7 +236,7 @@ switchfiles (int fields)\n       || filecnt == 22)\n      {\n       fprintf (outfile, \"\\\n-/* { dg-do run { xfail powerpc*-*-darwin* powerpc*-*-aix* } } */\\n\\\n+/* { dg-do run { xfail { { \\\"powerpc*-*-darwin*\\\" && { ! lp64 } } || { \\\"powerpc*-*-aix*\\\" } } } } */\\n\\\n /* { dg-options \\\"-w -I%s -fgnu-runtime\\\" } */\\n\", srcdir);\n      }\n   /* FIXME: these should not be xfailed but they are because"}, {"sha": "c82b08d5d907437be22523aabd8a939643127f47", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/265a000dbbb824228a757d81c1887ccea41acc5d/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/265a000dbbb824228a757d81c1887ccea41acc5d/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=265a000dbbb824228a757d81c1887ccea41acc5d", "patch": "@@ -1,3 +1,8 @@\n+2010-09-06  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\t* encoding.c: Add TARGET_ALIGN_NATURAL definition for m64 powerpc darwin.\n+\tAdd a comment as to why, update FIXME comments.\n+\n 2010-09-06  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \t* makefile.dos: Obsolete file removed."}, {"sha": "c743d865e17e0c7c1ab84d899f52a428f49f0b71", "filename": "libobjc/encoding.c", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/265a000dbbb824228a757d81c1887ccea41acc5d/libobjc%2Fencoding.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/265a000dbbb824228a757d81c1887ccea41acc5d/libobjc%2Fencoding.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fencoding.c?ref=265a000dbbb824228a757d81c1887ccea41acc5d", "patch": "@@ -105,13 +105,24 @@ static int __attribute__ ((__unused__)) not_target_flags = 0;\n #undef ALTIVEC_VECTOR_MODE\n #define ALTIVEC_VECTOR_MODE(MODE) (0)\n \n+/* Furthermore, some (powerpc) targets also use TARGET_ALIGN_NATURAL\n+ in their alignment macros. Currently[4.5/6], rs6000.h points this\n+ to a static variable, initialized by target overrides. This is reset\n+ in linux64.h but not in darwin64.h.  The macro is not used by *86*.  */\n+\n+#if __MACH__ && __LP64__\n+# undef TARGET_ALIGN_NATURAL\n+# define TARGET_ALIGN_NATURAL 1\n+#endif\n \n /*  FIXME: while this file has no business including tm.h, this\n     definitely has no business defining this macro but it\n     is only way around without really rewritting this file,\n-    should look after the branch of 3.4 to fix this.  */\n+    should look after the branch of 3.4 to fix this.\n+    FIXME1: It's also out of date, darwin no longer has the same alignment\n+    'special' as aix - this is probably the origin of the m32 breakage.  */\n #define rs6000_special_round_type_align(STRUCT, COMPUTED, SPECIFIED)\t\\\n-  ({ const char *_fields = TYPE_FIELDS (STRUCT);\t\t\t\t\\\n+  ({ const char *_fields = TYPE_FIELDS (STRUCT);\t\t\t\\\n   ((_fields != 0\t\t\t\t\t\t\t\\\n     && TYPE_MODE (strip_array_types (TREE_TYPE (_fields))) == DFmode)\t\\\n    ? MAX (MAX (COMPUTED, SPECIFIED), 64)\t\t\t\t\\"}]}