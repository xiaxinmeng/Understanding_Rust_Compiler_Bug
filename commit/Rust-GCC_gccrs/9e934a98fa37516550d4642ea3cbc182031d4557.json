{"sha": "9e934a98fa37516550d4642ea3cbc182031d4557", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWU5MzRhOThmYTM3NTE2NTUwZDQ2NDJlYTNjYmMxODIwMzFkNDU1Nw==", "commit": {"author": {"name": "Dave Brolley", "email": "brolley@cygnus.com", "date": "1999-04-13T09:43:28Z"}, "committer": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1999-04-13T09:43:28Z"}, "message": "cppinit.c (cpp_start_read): Fix buffer overwrite.\n\nTue Apr 13 12:14:07 1999  Dave Brolley  <brolley@cygnus.com>\n\t* cppinit.c (cpp_start_read): Fix buffer overwrite.\n\t* Makefile.in (cppinit.o): Typo in dependencies.\n\nFrom-SVN: r26401", "tree": {"sha": "f4087acd43a3c4a6118901005fd181d1ca707299", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f4087acd43a3c4a6118901005fd181d1ca707299"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e934a98fa37516550d4642ea3cbc182031d4557", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e934a98fa37516550d4642ea3cbc182031d4557", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e934a98fa37516550d4642ea3cbc182031d4557", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e934a98fa37516550d4642ea3cbc182031d4557/comments", "author": null, "committer": null, "parents": [{"sha": "a4e44caa6d2a951af67aefb76ee22f7735bf293b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4e44caa6d2a951af67aefb76ee22f7735bf293b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4e44caa6d2a951af67aefb76ee22f7735bf293b"}], "stats": {"total": 22, "additions": 14, "deletions": 8}, "files": [{"sha": "0dd765009a09217fb23c5ea2fc87aa3b113e75af", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e934a98fa37516550d4642ea3cbc182031d4557/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e934a98fa37516550d4642ea3cbc182031d4557/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e934a98fa37516550d4642ea3cbc182031d4557", "patch": "@@ -1,3 +1,8 @@\n+Tue Apr 13 12:14:07 1999  Dave Brolley  <brolley@cygnus.com>\n+\n+\t* cppinit.c (cpp_start_read): Fix buffer overwrite.\n+\t* Makefile.in (cppinit.o): Typo in dependencies.\n+\n Tue Apr 13 05:04:59 1999  Richard Earnshaw (rearnsha@arm.com)\n \n \t* arm.h (function prototypes for arm.c): Ifdef these out if"}, {"sha": "942280cf94f98c21e774ef264e390ff84fd16d38", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e934a98fa37516550d4642ea3cbc182031d4557/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e934a98fa37516550d4642ea3cbc182031d4557/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=9e934a98fa37516550d4642ea3cbc182031d4557", "patch": "@@ -1988,7 +1988,7 @@ cpperror.o: cpperror.c $(CONFIG_H) cpplib.h intl.h system.h\n cppexp.o:   cppexp.c   $(CONFIG_H) cpplib.h intl.h system.h\n cppfiles.o: cppfiles.c $(CONFIG_H) cpplib.h intl.h system.h\n \n-cppinit.o:  cppalloc.c $(CONFIG_H) cpplib.h intl.h system.h \\\n+cppinit.o:  cppinit.c $(CONFIG_H) cpplib.h intl.h system.h \\\n \t\tcpphash.h prefix.h output.h Makefile\n \t$(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n \t  -DGCC_INCLUDE_DIR=\\\"$(libsubdir)/include\\\" \\"}, {"sha": "d02a1f9b8275bf71a2f152f97a067fa10d65dbda", "filename": "gcc/cppinit.c", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e934a98fa37516550d4642ea3cbc182031d4557/gcc%2Fcppinit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e934a98fa37516550d4642ea3cbc182031d4557/gcc%2Fcppinit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppinit.c?ref=9e934a98fa37516550d4642ea3cbc182031d4557", "patch": "@@ -881,22 +881,21 @@ cpp_start_read (pfile, fname)\n     {\n       struct default_include *p = include_defaults_array;\n       char *specd_prefix = opts->include_prefix;\n-      char *default_prefix = alloca (sizeof GCC_INCLUDE_DIR - 7);\n-      int default_len;\n-      int specd_len;\n \n       /* Search \"translated\" versions of GNU directories.\n \t These have /usr/local/lib/gcc... replaced by specd_prefix.  */\n       if (specd_prefix != 0)\n \t{\n+\t  char *default_prefix = alloca (sizeof GCC_INCLUDE_DIR - 7);\n \t  /* Remove the `include' from /usr/local/lib/gcc.../include.\n \t     GCC_INCLUDE_DIR will always end in /include. */\n+\t  int default_len = sizeof GCC_INCLUDE_DIR - 8;\n+\t  int specd_len = strlen (specd_prefix);\n+\n \t  default_len = sizeof GCC_INCLUDE_DIR - 8;\n \t  memcpy (default_prefix, GCC_INCLUDE_DIR, default_len);\n \t  default_prefix[default_len] = '\\0';\n \n-\n-\t  specd_len = strlen (specd_prefix);\n \t  for (p = include_defaults_array; p->fname; p++)\n \t    {\n \t      /* Some standard dirs are only for C++.  */\n@@ -909,10 +908,12 @@ cpp_start_read (pfile, fname)\n \t\t    {\n \t\t      /* Yes; change prefix and add to search list.  */\n \t\t      int flen = strlen (p->fname);\n-\t\t      int this_len = specd_len - default_len + flen;\n+\t\t      int this_len = specd_len + flen - default_len;\n \t\t      char *str = (char *) xmalloc (this_len + 1);\n \t\t      memcpy (str, specd_prefix, specd_len);\n-\t\t      memcpy (str+specd_len, p->fname, flen + 1);\n+\t\t      memcpy (str + specd_len,\n+\t\t\t      p->fname + default_len,\n+\t\t\t      flen - default_len + 1);\n \n \t\t      append_include_chain (pfile, opts->pending,\n \t\t\t\t\t    str, SYSTEM);"}]}