{"sha": "0e4ae794db0d2425d07b466c17bf1e071c78c687", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGU0YWU3OTRkYjBkMjQyNWQwN2I0NjZjMTdiZjFlMDcxYzc4YzY4Nw==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2013-01-04T03:55:43Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2013-01-04T03:55:43Z"}, "message": "re PR target/53789 (ICE in gen_reg_rtx, at emit-rtl.c:864/865 when compiling GNU MPFR on parisc)\n\n\tPR target/53789\n\t* config/pa/pa.md (movsi): Revert previous change.\n\t* pa.c (pa_legitimate_constant_p): Reject all TLS symbol references.\n\nFrom-SVN: r194879", "tree": {"sha": "7121d8cfe1fae6f2461df68b11c96af6b69bdcbd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7121d8cfe1fae6f2461df68b11c96af6b69bdcbd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e4ae794db0d2425d07b466c17bf1e071c78c687", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e4ae794db0d2425d07b466c17bf1e071c78c687", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e4ae794db0d2425d07b466c17bf1e071c78c687", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e4ae794db0d2425d07b466c17bf1e071c78c687/comments", "author": null, "committer": null, "parents": [{"sha": "4d88d3cbe0ee1e5832e255a3f3dc02e4b405a727", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d88d3cbe0ee1e5832e255a3f3dc02e4b405a727", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d88d3cbe0ee1e5832e255a3f3dc02e4b405a727"}], "stats": {"total": 22, "additions": 9, "deletions": 13}, "files": [{"sha": "a211e36ea6db8e6ec449a74de3a425f0007481b2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4ae794db0d2425d07b466c17bf1e071c78c687/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4ae794db0d2425d07b466c17bf1e071c78c687/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e4ae794db0d2425d07b466c17bf1e071c78c687", "patch": "@@ -1,3 +1,9 @@\n+2013-01-03  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\tPR target/53789\n+\t* config/pa/pa.md (movsi): Revert previous change.\n+\t* pa.c (pa_legitimate_constant_p): Reject all TLS symbol references.\n+\n 2013-01-03  Richard Henderson  <rth@redhat.com>\n \n \t* config/i386/i386.c (ix86_expand_move): Always assign to op1"}, {"sha": "f697fd69ea77593826557e7329c55edebe18cc71", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4ae794db0d2425d07b466c17bf1e071c78c687/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4ae794db0d2425d07b466c17bf1e071c78c687/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=0e4ae794db0d2425d07b466c17bf1e071c78c687", "patch": "@@ -10358,14 +10358,10 @@ pa_legitimate_constant_p (enum machine_mode mode, rtx x)\n     return false;\n \n   /* TLS_MODEL_GLOBAL_DYNAMIC and TLS_MODEL_LOCAL_DYNAMIC are not\n-     legitimate constants.  */\n+     legitimate constants.  The other variants can't be handled by\n+     the move patterns after reload starts.  */\n   if (PA_SYMBOL_REF_TLS_P (x))\n-   {\n-     enum tls_model model = SYMBOL_REF_TLS_MODEL (x);\n-\n-     if (model == TLS_MODEL_GLOBAL_DYNAMIC || model == TLS_MODEL_LOCAL_DYNAMIC)\n-       return false;\n-   }\n+    return false;\n \n   if (TARGET_64BIT && GET_CODE (x) == CONST_DOUBLE)\n     return false;"}, {"sha": "9c6a361c6b5cc5792abb7d6e9f3cdee827abec5b", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4ae794db0d2425d07b466c17bf1e071c78c687/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4ae794db0d2425d07b466c17bf1e071c78c687/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=0e4ae794db0d2425d07b466c17bf1e071c78c687", "patch": "@@ -2094,12 +2094,6 @@\n   \"\"\n   \"\n {\n-  /* A TLS symbol reference is not a valid move source operand.\n-     pa_emit_move_sequence can only handle them prior to reload.\n-     There is also no way to reload a TLS symbol reference, so\n-     we must reject them after reload starts.  */\n-  if (PA_SYMBOL_REF_TLS_P (operands[1]) && !can_create_pseudo_p ())\n-    FAIL;\n   if (pa_emit_move_sequence (operands, SImode, 0))\n     DONE;\n }\")"}]}