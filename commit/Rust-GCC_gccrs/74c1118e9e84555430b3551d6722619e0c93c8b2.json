{"sha": "74c1118e9e84555430b3551d6722619e0c93c8b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzRjMTExOGU5ZTg0NTU1NDMwYjM1NTFkNjcyMjYxOWUwYzkzYzhiMg==", "commit": {"author": {"name": "Mark Kettenis", "email": "kettenis@gnu.org", "date": "1999-05-17T22:58:56Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-05-17T22:58:56Z"}, "message": "* libioP.h: Only include libc-lock.h if _IO_MTSAFE_IO is defined.\n\nFrom-SVN: r26980", "tree": {"sha": "27e87016d79b49b473585312b36d95c7b8d3c6ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27e87016d79b49b473585312b36d95c7b8d3c6ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74c1118e9e84555430b3551d6722619e0c93c8b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74c1118e9e84555430b3551d6722619e0c93c8b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74c1118e9e84555430b3551d6722619e0c93c8b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74c1118e9e84555430b3551d6722619e0c93c8b2/comments", "author": null, "committer": null, "parents": [{"sha": "ef4969e0b68c4219d0971cd1143f47b67fc52922", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef4969e0b68c4219d0971cd1143f47b67fc52922", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef4969e0b68c4219d0971cd1143f47b67fc52922"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "4bcc68412de333b1a4d6d6d3364482dc9ff244cb", "filename": "libio/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74c1118e9e84555430b3551d6722619e0c93c8b2/libio%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74c1118e9e84555430b3551d6722619e0c93c8b2/libio%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2FChangeLog?ref=74c1118e9e84555430b3551d6722619e0c93c8b2", "patch": "@@ -1,3 +1,7 @@\n+1999-05-17  Mark Kettenis  <kettenis@gnu.org>\n+\n+\t* libioP.h: Only include libc-lock.h if _IO_MTSAFE_IO is defined.\n+\n 1999-05-12  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* configure.in (compiler_name): Don't do the skip-this-dir thing"}, {"sha": "629e4fd8cf656a56312cbe5f7f6dfaaed41223c0", "filename": "libio/libioP.h", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74c1118e9e84555430b3551d6722619e0c93c8b2/libio%2FlibioP.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74c1118e9e84555430b3551d6722619e0c93c8b2/libio%2FlibioP.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2FlibioP.h?ref=74c1118e9e84555430b3551d6722619e0c93c8b2", "patch": "@@ -31,14 +31,17 @@\n #ifndef __set_errno\n # define __set_errno(Val) errno = (Val)\n #endif\n-#if defined __GLIBC__ && __GLIBC__ >= 2\n-# if __GLIBC_MINOR__ > 0\n-#  include <bits/libc-lock.h>\n+\n+#ifdef _IO_MTSAFE_IO\n+# if defined __GLIBC__ && __GLIBC__ >= 2\n+#  if __GLIBC_MINOR__ > 0\n+#   include <bits/libc-lock.h>\n+#  else\n+#   include <libc-lock.h>\n+#  endif\n # else\n-#  include <libc-lock.h>\n-# endif\n-#else\n /*# include <comthread.h>*/\n+# endif\n #endif\n \n #include \"iolibio.h\""}]}