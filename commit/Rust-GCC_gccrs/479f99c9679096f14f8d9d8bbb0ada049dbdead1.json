{"sha": "479f99c9679096f14f8d9d8bbb0ada049dbdead1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc5Zjk5Yzk2NzkwOTZmMTRmOGQ5ZDhiYmIwYWRhMDQ5ZGJkZWFkMQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2016-05-16T09:55:14Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2016-05-16T09:55:14Z"}, "message": "lto-cgraph.c (compute_ltrans_boundary, [...]): Fix handling of inline thunks\n\n\t* lto-cgraph.c (compute_ltrans_boundary, output_symtab): Fix handling\n\tof inline thunks\n\t* lto-partition.c (add_symbol_to_partition_1): Likewise.\n\nFrom-SVN: r236270", "tree": {"sha": "dfb0d85d01678d543b8759d656132ba16c20d587", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dfb0d85d01678d543b8759d656132ba16c20d587"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/479f99c9679096f14f8d9d8bbb0ada049dbdead1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/479f99c9679096f14f8d9d8bbb0ada049dbdead1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/479f99c9679096f14f8d9d8bbb0ada049dbdead1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/479f99c9679096f14f8d9d8bbb0ada049dbdead1/comments", "author": null, "committer": null, "parents": [{"sha": "1b81a1c1bd5355d8b5405825b4478078e76fd906", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b81a1c1bd5355d8b5405825b4478078e76fd906", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b81a1c1bd5355d8b5405825b4478078e76fd906"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "2bbd60e12c82b739e45d196520a92d1823e9d080", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=479f99c9679096f14f8d9d8bbb0ada049dbdead1", "patch": "@@ -1,3 +1,8 @@\n+2016-05-16  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* lto-cgraph.c (compute_ltrans_boundary, output_symtab): Fix handling\n+\tof inline thunks\n+\n 2016-05-16  Matthew Wahab  <matthew.wahab@arm.com>\n \t    Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n \t    Jiong Wang  <jiong.wang@arm.com>"}, {"sha": "11d440b7b74d6bf538dae17737303d0d216df3f9", "filename": "gcc/lto-cgraph.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2Flto-cgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2Flto-cgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-cgraph.c?ref=479f99c9679096f14f8d9d8bbb0ada049dbdead1", "patch": "@@ -972,7 +972,7 @@ compute_ltrans_boundary (lto_symtab_encoder_t in_encoder)\n       if (node->alias && node->analyzed)\n \tcreate_references (encoder, node);\n       if (cnode\n-\t  && cnode->thunk.thunk_p)\n+\t  && cnode->thunk.thunk_p && !cnode->global.inlined_to)\n \tadd_node_to (encoder, cnode->callees->callee, false);\n       while (node->transparent_alias && node->analyzed)\n \t{\n@@ -1028,7 +1028,7 @@ output_symtab (void)\n     {\n       node = dyn_cast <cgraph_node *> (lto_symtab_encoder_deref (encoder, i));\n       if (node\n-\t  && (node->thunk.thunk_p\n+\t  && ((node->thunk.thunk_p && !node->global.inlined_to)\n \t      || lto_symtab_encoder_in_partition_p (encoder, node)))\n \t{\n \t  output_outgoing_cgraph_edges (node->callees, ob, encoder);"}, {"sha": "06458d46033e414612c82f42aeee3038693108c3", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=479f99c9679096f14f8d9d8bbb0ada049dbdead1", "patch": "@@ -1,3 +1,7 @@\n+2016-05-16  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* lto-partition.c (add_symbol_to_partition_1): Likewise.\n+\n 2016-05-03  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* lto-symtab.c (lto_cgraph_replace_node): Initialize inline_failed."}, {"sha": "453343a84717d010c6dbe60b178b63fa18f3908a", "filename": "gcc/lto/lto-partition.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2Flto%2Flto-partition.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479f99c9679096f14f8d9d8bbb0ada049dbdead1/gcc%2Flto%2Flto-partition.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-partition.c?ref=479f99c9679096f14f8d9d8bbb0ada049dbdead1", "patch": "@@ -163,7 +163,7 @@ add_symbol_to_partition_1 (ltrans_partition part, symtab_node *node)\n \n       /* Add all thunks associated with the function.  */\n       for (e = cnode->callers; e; e = e->next_caller)\n-\tif (e->caller->thunk.thunk_p)\n+\tif (e->caller->thunk.thunk_p && !e->caller->global.inlined_to)\n \t  add_symbol_to_partition_1 (part, e->caller);\n \n       /* Instrumented version is actually the same function."}]}