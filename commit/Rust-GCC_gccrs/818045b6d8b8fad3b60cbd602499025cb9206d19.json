{"sha": "818045b6d8b8fad3b60cbd602499025cb9206d19", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODE4MDQ1YjZkOGI4ZmFkM2I2MGNiZDYwMjQ5OTAyNWNiOTIwNmQxOQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-08-26T01:34:48Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-08-26T01:34:48Z"}, "message": "input.c (sub_getch): Eventually give up and release the input file.\n\n\t* input.c (sub_getch): Eventually give up and release the input file.\n\n\t* decl.c (cp_finish_decl): If #p i/i, put inline statics in the\n\tright place.\n\nFrom-SVN: r14923", "tree": {"sha": "0c94c8d16ac626da18238f852f028d81395006da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c94c8d16ac626da18238f852f028d81395006da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/818045b6d8b8fad3b60cbd602499025cb9206d19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/818045b6d8b8fad3b60cbd602499025cb9206d19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/818045b6d8b8fad3b60cbd602499025cb9206d19", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/818045b6d8b8fad3b60cbd602499025cb9206d19/comments", "author": null, "committer": null, "parents": [{"sha": "3e68fa831129e7717a961aeda8358e62d3d467e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e68fa831129e7717a961aeda8358e62d3d467e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e68fa831129e7717a961aeda8358e62d3d467e9"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "f136f0c6f37e4e6c4d9b11355de71dd24d141826", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/818045b6d8b8fad3b60cbd602499025cb9206d19/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/818045b6d8b8fad3b60cbd602499025cb9206d19/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=818045b6d8b8fad3b60cbd602499025cb9206d19", "patch": "@@ -1,5 +1,10 @@\n Mon Aug 25 14:30:02 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n+\t* input.c (sub_getch): Eventually give up and release the input file.\n+\n+\t* decl.c (cp_finish_decl): If #p i/i, put inline statics in the\n+\tright place.\n+\n \t* call.c (joust): Tweak message.\n \n Sat Aug 23 18:02:59 1997  Mark Mitchell  <mmitchell@usa.net>"}, {"sha": "1f755cc7dfefffc96593ba7e4be5b0ae1da05bca", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/818045b6d8b8fad3b60cbd602499025cb9206d19/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/818045b6d8b8fad3b60cbd602499025cb9206d19/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=818045b6d8b8fad3b60cbd602499025cb9206d19", "patch": "@@ -6580,10 +6580,15 @@ cp_finish_decl (decl, init, asmspec_tree, need_pop, flags)\n \t  && DECL_THIS_INLINE (current_function_decl)\n \t  && DECL_PUBLIC (current_function_decl))\n \t{\n+\t  if (DECL_INTERFACE_KNOWN (current_function_decl))\n+\t    {\n+\t      TREE_PUBLIC (decl) = 1;\n+\t      DECL_EXTERNAL (decl) = DECL_EXTERNAL (current_function_decl);\n+\t    }\n \t  /* We can only do this if we can use common or weak, and we\n \t     can't if it has been initialized and we don't support weak.  */\n-\t  if (DECL_INITIAL (decl) == NULL_TREE\n-\t      || DECL_INITIAL (decl) == error_mark_node)\n+\t  else if (DECL_INITIAL (decl) == NULL_TREE\n+\t\t   || DECL_INITIAL (decl) == error_mark_node)\n \t    {\n \t      TREE_PUBLIC (decl) = 1;\n \t      DECL_COMMON (decl) = 1;"}, {"sha": "cb9dfa8b71f936e43f7cb6db5d967edc6d7a4957", "filename": "gcc/cp/input.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/818045b6d8b8fad3b60cbd602499025cb9206d19/gcc%2Fcp%2Finput.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/818045b6d8b8fad3b60cbd602499025cb9206d19/gcc%2Fcp%2Finput.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finput.c?ref=818045b6d8b8fad3b60cbd602499025cb9206d19", "patch": "@@ -158,7 +158,13 @@ sub_getch ()\n       if (input->offset >= input->length)\n \t{\n \t  my_friendly_assert (putback_char == -1, 223);\n-\t  return EOF;\n+\t  ++(input->offset);\n+\t  if (input->offset - input->length < 64)\n+\t    return EOF;\n+\n+\t  /* We must be stuck in an error-handling rule; give up.  */\n+\t  end_input ();\n+\t  return getch ();\n \t}\n       return (unsigned char)input->str[input->offset++];\n     }"}]}