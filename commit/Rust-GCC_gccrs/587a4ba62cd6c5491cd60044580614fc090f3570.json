{"sha": "587a4ba62cd6c5491cd60044580614fc090f3570", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg3YTRiYTYyY2Q2YzU0OTFjZDYwMDQ0NTgwNjE0ZmMwOTBmMzU3MA==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "1999-03-02T00:59:28Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-03-02T00:59:28Z"}, "message": "Makefile.in (cpp_install_dir, [...]): New variables.\n\np\n        * Makefile.in (cpp_install_dir, INSTALL_CPP, UNINSTALL_CPP): New\n        variables.\n        (install-cpp, uninstall-cpp): New targets.\n        (install-normal): Depend on $(INSTALL_CPP).\n        (uninstall): Depend on $(UNINSTALL_CPP).\n        * configure.in (cpp_install_dir): New, substitute.\n        (tmake_file): Added t-install-cpp for --enable-cpp.\n        * configure: Rebuilt.\n        * cpp.sh: New cpp script.\n        * config/t-install-cpp: New target fragment.\n\nFrom-SVN: r25529", "tree": {"sha": "07bce66ce60c4206846470e1fdc514cab3ddfeb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/07bce66ce60c4206846470e1fdc514cab3ddfeb8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/587a4ba62cd6c5491cd60044580614fc090f3570", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/587a4ba62cd6c5491cd60044580614fc090f3570", "html_url": "https://github.com/Rust-GCC/gccrs/commit/587a4ba62cd6c5491cd60044580614fc090f3570", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/587a4ba62cd6c5491cd60044580614fc090f3570/comments", "author": null, "committer": null, "parents": [{"sha": "5f90d012521014500b1afb03705ab113ede1f003", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f90d012521014500b1afb03705ab113ede1f003", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f90d012521014500b1afb03705ab113ede1f003"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "9a96eb3475724310dd7b827ad97734fac5bf46d1", "filename": "gcc/Makefile.in", "status": "modified", "additions": 24, "deletions": 2, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/587a4ba62cd6c5491cd60044580614fc090f3570/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/587a4ba62cd6c5491cd60044580614fc090f3570/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=587a4ba62cd6c5491cd60044580614fc090f3570", "patch": "@@ -280,6 +280,8 @@ includedir = $(local_prefix)/include\n assertdir = $(gcc_tooldir)/include\n # where the info files go\n infodir = @infodir@\n+# Where cpp should go besides $prefix/bin if necessary\n+cpp_install_dir = @cpp_install_dir@\n # where the locale files go\n datadir = $(prefix)/@DATADIRNAME@\n localedir = $(datadir)/locale\n@@ -397,6 +399,10 @@ LIB1FUNCS_EXTRA =\n # Assembler files should have names ending in `.asm'.\n LIB2FUNCS_EXTRA = \n \n+# Handle cpp installation.\n+INSTALL_CPP=\n+UNINSTALL_CPP=\n+\n # We do not try to build float.h anymore.  Let configure select the\n # appropriate pre-built float.h file for the target.\n FLOAT_H=@float_h_file@\n@@ -2389,7 +2395,8 @@ install: $(INSTALL_TARGET) ; @true\n # Install the driver last so that the window when things are\n # broken is small.\n install-normal: install-common $(INSTALL_HEADERS) $(INSTALL_LIBGCC) \\\n-    install-man install-info intl.install lang.install-normal install-driver\n+    $(INSTALL_CPP) install-man install-info intl.install lang.install-normal \\\n+    install-driver\n \n # Do nothing while making gcc with a cross-compiler. The person who\n # makes gcc for the target machine has to know how to put a complete\n@@ -2402,6 +2409,21 @@ install-build: force\n # This is not used anymore now that float.h does not depend on enquire.\n install-cross-rest: install-float-h-cross\n \n+# Handle cpp installation.\n+install-cpp: cpp.sh\n+\t-rm -f $(bindir)/cpp\n+\t$(INSTALL_PROGRAM) -m 755 cpp.sh $(bindir)/cpp\n+\tif [ x$(cpp_install_dir) != x ]; then \\\n+\t  rm -f $(prefix)/$(cpp_install_dir)/cpp; \\\n+\t  $(INSTALL_PROGRAM) -m 755 cpp.sh $(prefix)/$(cpp_install_dir)/cpp; \\\n+\telse true; fi\n+\n+uninstall-cpp:\n+\t-rm -f $(bindir)/cpp\n+\t-if [ x$(cpp_install_dir) != x ]; then \\\n+\t  rm -f $(prefix)/$(cpp_install_dir)/cpp; \\\n+\telse true; fi\n+\n # Install float.h for cross compiler.\n # Run this on the target machine!\n # This is not used anymore now that float.h does not depend on enquire.\n@@ -2633,7 +2655,7 @@ install-collect2: collect2 installdirs\n \t$(INSTALL_PROGRAM) xgcc$(exeext) $(libsubdir)/gcc$(exeext)\n \n # Cancel installation by deleting the installed files.\n-uninstall: intl.uninstall lang.uninstall\n+uninstall: intl.uninstall lang.uninstall $(UNINSTALL_CPP)\n \t-rm -rf $(libsubdir)\n \t-rm -rf $(bindir)/$(GCC_INSTALL_NAME)$(exeext)\n \t-rm -rf $(bindir)/$(GCC_CROSS_NAME)$(exeext)"}]}