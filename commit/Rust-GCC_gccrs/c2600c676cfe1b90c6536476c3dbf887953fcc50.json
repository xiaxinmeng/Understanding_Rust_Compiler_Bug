{"sha": "c2600c676cfe1b90c6536476c3dbf887953fcc50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzI2MDBjNjc2Y2ZlMWI5MGM2NTM2NDc2YzNkYmY4ODc5NTNmY2M1MA==", "commit": {"author": {"name": "Simon Martin", "email": "simartin@users.sourceforge.net", "date": "2009-07-26T08:16:41Z"}, "committer": {"name": "Simon Martin", "email": "simartin@gcc.gnu.org", "date": "2009-07-26T08:16:41Z"}, "message": "re PR c++/40749 (g++ doesnt report missing return if return is of type const <type>)\n\ngcc/cp/\n\n2009-07-26  Simon Martin  <simartin@users.sourceforge.net>\n\n\tPR c++/40749\n\t* decl.c (grokdeclarator): Do not set TREE_NO_WARNING for functions\n\twith a qualified return type.\n\ngcc/testsuite/\n\n2007-07-26  Simon Martin  <simartin@users.sourceforge.net>\n\n\tPR c++/40749\n\t* g++.dg/warn/Wreturn-type-6.C: New test.\n\nFrom-SVN: r150097", "tree": {"sha": "18fcc055af9cade171bcc0b89d8ea7717073a88a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18fcc055af9cade171bcc0b89d8ea7717073a88a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c2600c676cfe1b90c6536476c3dbf887953fcc50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2600c676cfe1b90c6536476c3dbf887953fcc50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2600c676cfe1b90c6536476c3dbf887953fcc50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2600c676cfe1b90c6536476c3dbf887953fcc50/comments", "author": {"login": "simartin", "id": 935202, "node_id": "MDQ6VXNlcjkzNTIwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/935202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simartin", "html_url": "https://github.com/simartin", "followers_url": "https://api.github.com/users/simartin/followers", "following_url": "https://api.github.com/users/simartin/following{/other_user}", "gists_url": "https://api.github.com/users/simartin/gists{/gist_id}", "starred_url": "https://api.github.com/users/simartin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simartin/subscriptions", "organizations_url": "https://api.github.com/users/simartin/orgs", "repos_url": "https://api.github.com/users/simartin/repos", "events_url": "https://api.github.com/users/simartin/events{/privacy}", "received_events_url": "https://api.github.com/users/simartin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "63827fb8e293cd05bf33483f5d0fcc56d3f1f10f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63827fb8e293cd05bf33483f5d0fcc56d3f1f10f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63827fb8e293cd05bf33483f5d0fcc56d3f1f10f"}], "stats": {"total": 29, "additions": 24, "deletions": 5}, "files": [{"sha": "ee37b654aed0ee54f69a97a52bcca8b18071353e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c2600c676cfe1b90c6536476c3dbf887953fcc50", "patch": "@@ -1,3 +1,9 @@\n+2009-07-26  Simon Martin  <simartin@users.sourceforge.net>\n+\n+\tPR c++/40749\n+\t* decl.c (grokdeclarator): Do not set TREE_NO_WARNING for functions\n+\twith a qualified return type.\n+\n 2009-07-24  Jason Merrill  <jason@redhat.com>\n \n \tCore issue 901"}, {"sha": "be1b5b7b5ef76658495f702a4629c054142ac163", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=c2600c676cfe1b90c6536476c3dbf887953fcc50", "patch": "@@ -7636,7 +7636,6 @@ grokdeclarator (const cp_declarator *declarator,\n   bool unsigned_p, signed_p, short_p, long_p, thread_p;\n   bool type_was_error_mark_node = false;\n   bool parameter_pack_p = declarator? declarator->parameter_pack_p : false;\n-  bool set_no_warning = false;\n   bool template_type_arg = false;\n   const char *errmsg;\n \n@@ -8316,7 +8315,6 @@ grokdeclarator (const cp_declarator *declarator,\n \t\t/* We now know that the TYPE_QUALS don't apply to the\n \t\t   decl, but to its return type.  */\n \t\ttype_quals = TYPE_UNQUALIFIED;\n-\t\tset_no_warning = true;\n \t      }\n \t    errmsg = targetm.invalid_return_type (type);\n \t    if (errmsg)\n@@ -9538,9 +9536,6 @@ grokdeclarator (const cp_declarator *declarator,\n     if (!processing_template_decl)\n       cp_apply_type_quals_to_decl (type_quals, decl);\n \n-    if (set_no_warning)\n-        TREE_NO_WARNING (decl) = 1;\n-\n     return decl;\n   }\n }"}, {"sha": "a8cea7576d33a5a9d87b03776cfc2aa9ab0fc2f6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c2600c676cfe1b90c6536476c3dbf887953fcc50", "patch": "@@ -1,3 +1,8 @@\n+2007-07-26  Simon Martin  <simartin@users.sourceforge.net>\n+\n+\tPR c++/40749\n+\t* g++.dg/warn/Wreturn-type-6.C: New test.\n+\n 2009-07-26  Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/40801"}, {"sha": "497e3b9ebad8c124e206d038cd6eae3ef823e789", "filename": "gcc/testsuite/g++.dg/warn/Wreturn-type-6.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWreturn-type-6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2600c676cfe1b90c6536476c3dbf887953fcc50/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWreturn-type-6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWreturn-type-6.C?ref=c2600c676cfe1b90c6536476c3dbf887953fcc50", "patch": "@@ -0,0 +1,13 @@\n+/* PR c++/40749 */\n+/* { dg-do \"compile\" } */\n+/* { dg-options \"-Wreturn-type\" } */\n+\n+struct A {};\n+const A a() {} /* { dg-warning \"no return statement\" } */\n+const A& b() {} /* { dg-warning \"no return statement\" } */\n+\n+const int c() {} /* { dg-warning \"no return statement\" } */\n+\n+template<class T>\n+const int foo(T t) {} /* { dg-warning \"no return statement\" } */\n+int d = foo<int>(0), e = foo<int>(1);"}]}