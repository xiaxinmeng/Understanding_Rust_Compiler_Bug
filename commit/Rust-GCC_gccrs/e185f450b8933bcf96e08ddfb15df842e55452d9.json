{"sha": "e185f450b8933bcf96e08ddfb15df842e55452d9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTE4NWY0NTBiODkzM2JjZjk2ZTA4ZGRmYjE1ZGY4NDJlNTU0NTJkOQ==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2015-06-03T07:33:50Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2015-06-03T07:33:50Z"}, "message": "tree-ssa-loop-ivopts.c (dump_iv): New parameter.\n\n\n\t* tree-ssa-loop-ivopts.c (dump_iv): New parameter.\n\t(dump_use, dump_cand, find_induction_variables): Pass new argument\n\tto dump_iv.\n\t(record_use): Preserve the ssa name information in IV.\n\nFrom-SVN: r224058", "tree": {"sha": "452565f67ee337be42b1dd8a69e7c88f031b8a1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/452565f67ee337be42b1dd8a69e7c88f031b8a1f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e185f450b8933bcf96e08ddfb15df842e55452d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e185f450b8933bcf96e08ddfb15df842e55452d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e185f450b8933bcf96e08ddfb15df842e55452d9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e185f450b8933bcf96e08ddfb15df842e55452d9/comments", "author": null, "committer": null, "parents": [{"sha": "40130403e5500f38e023fac59472f8c61c8356d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40130403e5500f38e023fac59472f8c61c8356d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40130403e5500f38e023fac59472f8c61c8356d2"}], "stats": {"total": 21, "additions": 12, "deletions": 9}, "files": [{"sha": "07743bba32e61d2e317d63a8ce000b07f12ff128", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e185f450b8933bcf96e08ddfb15df842e55452d9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e185f450b8933bcf96e08ddfb15df842e55452d9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e185f450b8933bcf96e08ddfb15df842e55452d9", "patch": "@@ -1,3 +1,10 @@\n+2015-06-03  Bin Cheng  <bin.cheng@arm.com>\n+\n+\t* tree-ssa-loop-ivopts.c (dump_iv): New parameter.\n+\t(dump_use, dump_cand, find_induction_variables): Pass new argument\n+\tto dump_iv.\n+\t(record_use): Preserve the ssa name information in IV.\n+\n 2015-06-03  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* genpreds.c (mark_mode_tests): Mark all MATCH_CODEs as"}, {"sha": "1854b335baebb958b9d468aa60e7259e3232ded2", "filename": "gcc/tree-ssa-loop-ivopts.c", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e185f450b8933bcf96e08ddfb15df842e55452d9/gcc%2Ftree-ssa-loop-ivopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e185f450b8933bcf96e08ddfb15df842e55452d9/gcc%2Ftree-ssa-loop-ivopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-ivopts.c?ref=e185f450b8933bcf96e08ddfb15df842e55452d9", "patch": "@@ -517,9 +517,9 @@ single_dom_exit (struct loop *loop)\n /* Dumps information about the induction variable IV to FILE.  */\n \n void\n-dump_iv (FILE *file, struct iv *iv)\n+dump_iv (FILE *file, struct iv *iv, bool dump_name)\n {\n-  if (iv->ssa_name)\n+  if (iv->ssa_name && dump_name)\n     {\n       fprintf (file, \"ssa name \");\n       print_generic_expr (file, iv->ssa_name, TDF_SLIM);\n@@ -596,7 +596,7 @@ dump_use (FILE *file, struct iv_use *use)\n     print_generic_expr (file, *use->op_p, TDF_SLIM);\n   fprintf (file, \"\\n\");\n \n-  dump_iv (file, use->iv);\n+  dump_iv (file, use->iv, false);\n \n   if (use->related_cands)\n     {\n@@ -684,7 +684,7 @@ dump_cand (FILE *file, struct iv_cand *cand)\n       break;\n     }\n \n-  dump_iv (file, iv);\n+  dump_iv (file, iv, false);\n }\n \n /* Returns the info for ssa version VER.  */\n@@ -1326,7 +1326,7 @@ find_induction_variables (struct ivopts_data *data)\n       EXECUTE_IF_SET_IN_BITMAP (data->relevant, 0, i, bi)\n \t{\n \t  if (ver_info (data, i)->iv)\n-\t    dump_iv (dump_file, ver_info (data, i)->iv);\n+\t    dump_iv (dump_file, ver_info (data, i)->iv, true);\n \t}\n     }\n \n@@ -1356,10 +1356,6 @@ record_use (struct ivopts_data *data, tree *use_p, struct iv *iv,\n   use->addr_base = addr_base;\n   use->addr_offset = addr_offset;\n \n-  /* To avoid showing ssa name in the dumps, if it was not reset by the\n-     caller.  */\n-  iv->ssa_name = NULL_TREE;\n-\n   data->iv_uses.safe_push (use);\n \n   return use;"}]}