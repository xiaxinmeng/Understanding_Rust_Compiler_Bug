{"sha": "03db53b18c9575ad103381ae5e13ccbb48c3b139", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNkYjUzYjE4Yzk1NzVhZDEwMzM4MWFlNWUxM2NjYmI0OGMzYjEzOQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1999-03-01T15:06:46Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1999-03-01T15:06:46Z"}, "message": "Patch to fix coldfire bugs found by PlumHall testing.\n\n\t* config/m68k/lb1sf68.asm (udivsi3): Change jmi to jcs.  Fix comments.\n\t* config/m68k/m68k.h (LEGITIMATE_INDEX_REG_P): Reject SIGN_EXTEND of\n\tHImode reg when TARGET_5200.\n\nFrom-SVN: r25516", "tree": {"sha": "3a00b2acfbe85c8be95fbda0e1ce9f763fc81186", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3a00b2acfbe85c8be95fbda0e1ce9f763fc81186"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03db53b18c9575ad103381ae5e13ccbb48c3b139", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03db53b18c9575ad103381ae5e13ccbb48c3b139", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03db53b18c9575ad103381ae5e13ccbb48c3b139", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03db53b18c9575ad103381ae5e13ccbb48c3b139/comments", "author": null, "committer": null, "parents": [{"sha": "b4d34be1f3b2b3aeda8dc00857e4603dd6a78d85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4d34be1f3b2b3aeda8dc00857e4603dd6a78d85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4d34be1f3b2b3aeda8dc00857e4603dd6a78d85"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "c82c8f22f2fcc8ae6e37054bdecd74c27b32824d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03db53b18c9575ad103381ae5e13ccbb48c3b139/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03db53b18c9575ad103381ae5e13ccbb48c3b139/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=03db53b18c9575ad103381ae5e13ccbb48c3b139", "patch": "@@ -1,3 +1,9 @@\n+Mon Mar  1 15:03:51 1999  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* config/m68k/lb1sf68.asm (udivsi3): Change jmi to jcs.  Fix comments.\n+\t* config/m68k/m68k.h (LEGITIMATE_INDEX_REG_P): Reject SIGN_EXTEND of\n+\tHImode reg when TARGET_5200.\n+\n Mon Mar  1 21:44:30 1999  J\"orn Rennecke <amylaar@cygnus.co.uk>\n \n \tFrom Toshiyasu Morita:"}, {"sha": "ef40a340763351fe947fc505bc608268129bfa78", "filename": "gcc/config/m68k/lb1sf68.asm", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03db53b18c9575ad103381ae5e13ccbb48c3b139/gcc%2Fconfig%2Fm68k%2Flb1sf68.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03db53b18c9575ad103381ae5e13ccbb48c3b139/gcc%2Fconfig%2Fm68k%2Flb1sf68.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Flb1sf68.asm?ref=03db53b18c9575ad103381ae5e13ccbb48c3b139", "patch": "@@ -382,9 +382,9 @@ L1:\taddl\td0,d0\t\t| shift reg pair (p,a) one bit left\n \taddxl\td2,d2\n \tmovl\td2,d3\t\t| subtract b from p, store in tmp.\n \tsubl\td1,d3\n-\tjmi\tL2\t\t| if the result is not is negative, set the\n-\tbset\tIMM (0),d0\t| low order bit of a to 1 and store tmp in p.\n-\tmovl\td3,d2\n+\tjcs\tL2\t\t| if no carry,\n+\tbset\tIMM (0),d0\t| set the low order bit of a to 1,\n+\tmovl\td3,d2\t\t| and store tmp in p.\n L2:\tsubql\tIMM (1),d4\n \tjcc\tL1\n \tmoveml\tsp@,d2-d4\t| restore data registers"}, {"sha": "268b639d8b73793c001aae7ea00df42be56a442e", "filename": "gcc/config/m68k/m68k.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03db53b18c9575ad103381ae5e13ccbb48c3b139/gcc%2Fconfig%2Fm68k%2Fm68k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03db53b18c9575ad103381ae5e13ccbb48c3b139/gcc%2Fconfig%2Fm68k%2Fm68k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.h?ref=03db53b18c9575ad103381ae5e13ccbb48c3b139", "patch": "@@ -1463,9 +1463,11 @@ __transfer_from_trampoline ()\t\t\t\t\t\\\n \t  && (TARGET_68020 || (unsigned) INTVAL (XEXP (X, 0)) + 0x80 < 0x100))\t\t\\\n \t{ rtx go_temp = XEXP (X, 1); GO_IF_INDEXING (go_temp, ADDR); } } }\n \n+/* coldfire/5200 does not allow HImode index registers.  */\n #define LEGITIMATE_INDEX_REG_P(X)   \\\n   ((GET_CODE (X) == REG && REG_OK_FOR_INDEX_P (X))\t\\\n-   || (GET_CODE (X) == SIGN_EXTEND\t\t\t\\\n+   || (! TARGET_5200\t\t\t\t\t\\\n+       && GET_CODE (X) == SIGN_EXTEND\t\t\t\\\n        && GET_CODE (XEXP (X, 0)) == REG\t\t\t\\\n        && GET_MODE (XEXP (X, 0)) == HImode\t\t\\\n        && REG_OK_FOR_INDEX_P (XEXP (X, 0)))\t\t\\"}]}