{"sha": "96176bb3f185bdb1251f1b427c2a50b0088ac80f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTYxNzZiYjNmMTg1YmRiMTI1MWYxYjQyN2MyYTUwYjAwODhhYzgwZg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2017-01-18T12:52:24Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2017-01-18T12:52:24Z"}, "message": "cp-tree.h: Clarify exception spec node comment.\n\n\t* cp-tree.h: Clarify exception spec node comment.\n\t* except.c (nothrow_spec_p): Simplify by checking node-equality.\n\nFrom-SVN: r244576", "tree": {"sha": "9b37448019297c4ff5a879c2b74fa8cfeeb4bfe9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b37448019297c4ff5a879c2b74fa8cfeeb4bfe9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96176bb3f185bdb1251f1b427c2a50b0088ac80f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96176bb3f185bdb1251f1b427c2a50b0088ac80f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96176bb3f185bdb1251f1b427c2a50b0088ac80f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96176bb3f185bdb1251f1b427c2a50b0088ac80f/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2c65d990eb80d25c2e040be14a2918a0311dc37c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c65d990eb80d25c2e040be14a2918a0311dc37c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c65d990eb80d25c2e040be14a2918a0311dc37c"}], "stats": {"total": 22, "additions": 14, "deletions": 8}, "files": [{"sha": "32bf9e36070f5d284eb3260d012c6d258822ceaa", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96176bb3f185bdb1251f1b427c2a50b0088ac80f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96176bb3f185bdb1251f1b427c2a50b0088ac80f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=96176bb3f185bdb1251f1b427c2a50b0088ac80f", "patch": "@@ -1,5 +1,8 @@\n 2017-01-18  Nathan Sidwell  <nathan@acm.org>\n \n+\t* cp-tree.h: Clarify exception spec node comment.\n+\t* except.c (nothrow_spec_p): Simplify by checking node-equality.\n+\n \tPR c++/79091\n \t* mangle.c (write_exception_spec): Check nothrow explicitly.\n \t(write_encoding): Don't increment processing_template_decl around"}, {"sha": "98e4cbd05de79008e6189cc5025cb35b638dc6cf", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96176bb3f185bdb1251f1b427c2a50b0088ac80f/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96176bb3f185bdb1251f1b427c2a50b0088ac80f/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=96176bb3f185bdb1251f1b427c2a50b0088ac80f", "patch": "@@ -1212,7 +1212,8 @@ extern GTY(()) tree cp_global_trees[CPTI_MAX];\n #define lang_name_c\t\t\tcp_global_trees[CPTI_LANG_NAME_C]\n #define lang_name_cplusplus\t\tcp_global_trees[CPTI_LANG_NAME_CPLUSPLUS]\n \n-/* Exception specifier used for throw().  */\n+/* Exception specifiers used for throw(), noexcept(true) and\n+   noexcept(false).  We rely on these being uncloned.  */\n #define empty_except_spec\t\tcp_global_trees[CPTI_EMPTY_EXCEPT_SPEC]\n #define noexcept_true_spec\t\tcp_global_trees[CPTI_NOEXCEPT_TRUE_SPEC]\n #define noexcept_false_spec\t\tcp_global_trees[CPTI_NOEXCEPT_FALSE_SPEC]"}, {"sha": "bfc32908aece12af5321ce6bc90b927f8e9b46a2", "filename": "gcc/cp/except.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96176bb3f185bdb1251f1b427c2a50b0088ac80f/gcc%2Fcp%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96176bb3f185bdb1251f1b427c2a50b0088ac80f/gcc%2Fcp%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fexcept.c?ref=96176bb3f185bdb1251f1b427c2a50b0088ac80f", "patch": "@@ -1143,15 +1143,17 @@ bool\n nothrow_spec_p (const_tree spec)\n {\n   gcc_assert (!DEFERRED_NOEXCEPT_SPEC_P (spec));\n-  if (spec == NULL_TREE\n-      || TREE_VALUE (spec) != NULL_TREE\n-      || spec == noexcept_false_spec)\n-    return false;\n-  if (TREE_PURPOSE (spec) == NULL_TREE\n+\n+  if (spec == empty_except_spec\n       || spec == noexcept_true_spec)\n     return true;\n-  gcc_assert (processing_template_decl\n-\t      || TREE_PURPOSE (spec) == error_mark_node);\n+\n+  gcc_assert (!spec\n+\t      || TREE_VALUE (spec)\n+\t      || spec == noexcept_false_spec\n+\t      || TREE_PURPOSE (spec) == error_mark_node\n+\t      || processing_template_decl);\n+\n   return false;\n }\n "}]}