{"sha": "9dc4346aba8bc3c4600e2e6b5569099ccc01bd85", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRjNDM0NmFiYThiYzNjNDYwMGUyZTZiNTU2OTA5OWNjYzAxYmQ4NQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2012-11-06T21:08:49Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2012-11-06T21:08:49Z"}, "message": "ipa-inline-analysis.c (estimate_function_body_sizes, [...]): Cap time calculations.\n\n\n\t* ipa-inline-analysis.c (estimate_function_body_sizes,\n\tinline_update_overall_summary): Cap time calculations.\n\nFrom-SVN: r193259", "tree": {"sha": "ffab5c3984b38ea5b36772ada2dc0df12643ad5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ffab5c3984b38ea5b36772ada2dc0df12643ad5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85/comments", "author": null, "committer": null, "parents": [{"sha": "efa1fe237a8fbe632cdffa757d43b8fc6489db38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efa1fe237a8fbe632cdffa757d43b8fc6489db38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efa1fe237a8fbe632cdffa757d43b8fc6489db38"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "f77153366248e1f47b34b0139636c7c42d8b354d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9dc4346aba8bc3c4600e2e6b5569099ccc01bd85", "patch": "@@ -1,3 +1,8 @@\n+2012-11-06  Jan Hubicka  <jh@suse.cz>\n+\n+\t* ipa-inline-analysis.c (estimate_function_body_sizes,\n+\tinline_update_overall_summary): Cap time calculations.\n+\n 2012-11-06  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.c (ix86_init_machine_status): Do not"}, {"sha": "7d89d89aae3f908df99665c8dd1a8f5854663daa", "filename": "gcc/ipa-inline-analysis.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85/gcc%2Fipa-inline-analysis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc4346aba8bc3c4600e2e6b5569099ccc01bd85/gcc%2Fipa-inline-analysis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-analysis.c?ref=9dc4346aba8bc3c4600e2e6b5569099ccc01bd85", "patch": "@@ -2442,6 +2442,8 @@ estimate_function_body_sizes (struct cgraph_node *node, bool early)\n \t\t{\n \t\t  time += this_time;\n \t\t  size += this_size;\n+\t\t  if (time > MAX_TIME * INLINE_TIME_SCALE)\n+\t\t    time = MAX_TIME * INLINE_TIME_SCALE;\n \t\t}\n \n \t      /* We account everything but the calls.  Calls have their own\n@@ -3323,7 +3325,11 @@ inline_update_overall_summary (struct cgraph_node *node)\n   info->size = 0;\n   info->time = 0;\n   for (i = 0; VEC_iterate (size_time_entry, info->entry, i, e); i++)\n-    info->size += e->size, info->time += e->time;\n+    {\n+      info->size += e->size, info->time += e->time;\n+      if (info->time > MAX_TIME * INLINE_TIME_SCALE)\n+        info->time = MAX_TIME * INLINE_TIME_SCALE;\n+    }\n   estimate_calls_size_and_time (node, &info->size, &info->time, NULL,\n \t\t\t\t~(clause_t)(1 << predicate_false_condition),\n \t\t\t\tNULL, NULL, NULL);"}]}