{"sha": "9b496f67e7e74c05b7c87f582cf2b926e606b37a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWI0OTZmNjdlN2U3NGMwNWI3Yzg3ZjU4MmNmMmI5MjZlNjA2YjM3YQ==", "commit": {"author": {"name": "Sebastian Pop", "email": "s.pop@samsung.com", "date": "2016-01-28T16:38:52Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2016-01-28T16:38:52Z"}, "message": "assert instead of silently failing code gen\n\n\t* graphite-isl-ast-to-gimple.c (get_rename_from_scev): Assert instead of\n\tsetting codegen_error to fail codegen.\n\nFrom-SVN: r232932", "tree": {"sha": "1f4583d3d7caa4dbab0348b6495043b79b923877", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f4583d3d7caa4dbab0348b6495043b79b923877"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b496f67e7e74c05b7c87f582cf2b926e606b37a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b496f67e7e74c05b7c87f582cf2b926e606b37a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b496f67e7e74c05b7c87f582cf2b926e606b37a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b496f67e7e74c05b7c87f582cf2b926e606b37a/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9925bb881f7e5770121ae7ba42f0eb73607666d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9925bb881f7e5770121ae7ba42f0eb73607666d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9925bb881f7e5770121ae7ba42f0eb73607666d3"}], "stats": {"total": 31, "additions": 11, "deletions": 20}, "files": [{"sha": "338a045abd93b5a9c30eba2717ec0701d4ba0a07", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b496f67e7e74c05b7c87f582cf2b926e606b37a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b496f67e7e74c05b7c87f582cf2b926e606b37a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9b496f67e7e74c05b7c87f582cf2b926e606b37a", "patch": "@@ -1,3 +1,8 @@\n+2016-01-28  Sebastian Pop  <s.pop@samsung.com>\n+\n+\t* graphite-isl-ast-to-gimple.c (get_rename_from_scev): Assert instead of\n+\tsetting codegen_error to fail codegen.\n+\n 2016-01-28  Jason Merrill  <jason@redhat.com>\n \n \t* tree.h (BINFO_FLAG_0): Rename from BINFO_MARKED."}, {"sha": "47225ef8a3edf71c580fac3fc430fa05e98b0a5c", "filename": "gcc/graphite-isl-ast-to-gimple.c", "status": "modified", "additions": 6, "deletions": 20, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b496f67e7e74c05b7c87f582cf2b926e606b37a/gcc%2Fgraphite-isl-ast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b496f67e7e74c05b7c87f582cf2b926e606b37a/gcc%2Fgraphite-isl-ast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-isl-ast-to-gimple.c?ref=9b496f67e7e74c05b7c87f582cf2b926e606b37a", "patch": "@@ -1833,31 +1833,18 @@ get_rename_from_scev (tree old_name, gimple_seq *stmts, loop_p loop,\n   tree scev = scalar_evolution_in_region (region->region, loop, old_name);\n \n   /* At this point we should know the exact scev for each\n-     scalar SSA_NAME used in the scop: all the other scalar\n-     SSA_NAMEs should have been translated out of SSA using\n-     arrays with one element.  */\n-  tree new_expr;\n-  if (chrec_contains_undetermined (scev))\n-    {\n-      codegen_error = true;\n-      return build_zero_cst (TREE_TYPE (old_name));\n-    }\n+     scalar SSA_NAME used in the scop.  */\n+  gcc_assert (!chrec_contains_undetermined (scev));\n \n-  new_expr = chrec_apply_map (scev, iv_map);\n+  tree new_expr = chrec_apply_map (scev, iv_map);\n \n   /* The apply should produce an expression tree containing\n      the uses of the new induction variables.  We should be\n      able to use new_expr instead of the old_name in the newly\n      generated loop nest.  */\n-  if (chrec_contains_undetermined (new_expr)\n-      || tree_contains_chrecs (new_expr, NULL))\n-    {\n-      codegen_error = true;\n-      return build_zero_cst (TREE_TYPE (old_name));\n-    }\n+  gcc_assert (!chrec_contains_undetermined (new_expr)\n+\t      && !tree_contains_chrecs (new_expr, NULL));\n \n-  /* We should check all the operands and all of them should dominate the use at\n-     new_expr.  */\n   if (TREE_CODE (new_expr) == SSA_NAME)\n     {\n       basic_block bb = gimple_bb (SSA_NAME_DEF_STMT (new_expr));\n@@ -1898,8 +1885,7 @@ get_rename_from_scev (tree old_name, gimple_seq *stmts, loop_p loop,\n    substitution map RENAME_MAP, inserting the gimplification code at\n    GSI_TGT, for the translation REGION, with the original copied\n    statement in LOOP, and using the induction variable renaming map\n-   IV_MAP.  Returns true when something has been renamed.  codegen_error\n-   is set when the code generation cannot continue.  */\n+   IV_MAP.  Returns true when something has been renamed.  */\n \n bool\n translate_isl_ast_to_gimple::rename_uses (gimple *copy,"}]}