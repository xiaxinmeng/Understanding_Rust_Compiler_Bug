{"sha": "8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJkODdjNGU3M2ZlZjQxY2JiZDFjN2RkNzIyZTBhNTkwZmYxMTExYw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2003-07-02T00:17:38Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2003-07-02T00:17:38Z"}, "message": "cgraph.c (cgraph_mark_needed_node, [...]): Use next_needed field instead of aux to maintain the queue.\n\n\t* cgraph.c (cgraph_mark_needed_node, cgraph_varpool_mark_needed_node,\n\tcgraph_varpool_finalize_decl, cgraph_varpool_assemble_pending_decls):\n\tUse next_needed field instead of aux to maintain the queue.\n\t* cgraph.h (cgraph_node): Add next_needed.\n\t(cgraph_varpool_node): Add next_needed; remove aux.\n\t* cgraphunit.c (cgraph_finalize_compilation_unit): Use next_needed.\n\nFrom-SVN: r68807", "tree": {"sha": "3136e42f99188647a6b9586d69209b69f95f0c02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3136e42f99188647a6b9586d69209b69f95f0c02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/comments", "author": null, "committer": null, "parents": [{"sha": "d6435621b2bc4ca2f3664172c1464def4b2a9a4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6435621b2bc4ca2f3664172c1464def4b2a9a4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6435621b2bc4ca2f3664172c1464def4b2a9a4f"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "dd61cda1260a42c6aeae68d0e5ed342a34aaf536", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "patch": "@@ -1,3 +1,12 @@\n+Wed Jul  2 02:16:48 CEST 2003  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraph.c (cgraph_mark_needed_node, cgraph_varpool_mark_needed_node,\n+\tcgraph_varpool_finalize_decl, cgraph_varpool_assemble_pending_decls):\n+\tUse next_needed field instead of aux to maintain the queue.\n+\t* cgraph.h (cgraph_node): Add next_needed.\n+\t(cgraph_varpool_node): Add next_needed; remove aux.\n+\t* cgraphunit.c (cgraph_finalize_compilation_unit): Use next_needed.\n+\n Wed Jul  2 02:12:51 CEST 2003  Jan Hubicka  <jh@suse.cz>\n \n \t* cgraphunit.c (cgraph_finalize_function): Set finalized."}, {"sha": "36d9814e3653e85f75e7d33493fe34bf02f07014", "filename": "gcc/cgraph.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "patch": "@@ -235,7 +235,7 @@ cgraph_mark_needed_node (node, needed)\n       node->reachable = 1;\n       if (DECL_SAVED_TREE (node->decl))\n \t{\n-\t  node->aux = cgraph_nodes_queue;\n+\t  node->next_needed = cgraph_nodes_queue;\n \t  cgraph_nodes_queue = node;\n         }\n     }\n@@ -428,7 +428,7 @@ cgraph_varpool_mark_needed_node (struct cgraph_varpool_node *node)\n {\n   if (!node->needed && node->finalized)\n     {\n-      node->aux = cgraph_varpool_nodes_queue;\n+      node->next_needed = cgraph_varpool_nodes_queue;\n       cgraph_varpool_nodes_queue = node;\n     }\n   node->needed = 1;\n@@ -441,7 +441,7 @@ cgraph_varpool_finalize_decl (tree decl)\n \n   if (node->needed && !node->finalized)\n     {\n-      node->aux = cgraph_varpool_nodes_queue;\n+      node->next_needed = cgraph_varpool_nodes_queue;\n       cgraph_varpool_nodes_queue = node;\n     }\n   node->finalized = true;\n@@ -469,13 +469,13 @@ cgraph_varpool_assemble_pending_decls ()\n       tree decl = cgraph_varpool_nodes_queue->decl;\n       struct cgraph_varpool_node *node = cgraph_varpool_nodes_queue;\n \n-      cgraph_varpool_nodes_queue = cgraph_varpool_nodes_queue->aux;\n+      cgraph_varpool_nodes_queue = cgraph_varpool_nodes_queue->next_needed;\n       if (!TREE_ASM_WRITTEN (decl))\n \t{\n \t  assemble_variable (decl, 0, 1, 0);\n \t  changed = true;\n \t}\n-      node->aux = NULL;\n+      node->next_needed = NULL;\n     }\n   return changed;\n }"}, {"sha": "dbd012fecce60d2db393c438d8a6216086750412", "filename": "gcc/cgraph.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "patch": "@@ -75,6 +75,8 @@ struct cgraph_node GTY(())\n   struct cgraph_node *nested;\n   /* Pointer to the next function with same origin, if any.  */\n   struct cgraph_node *next_nested;\n+  /* Pointer to the next function in cgraph_nodes_queue.  */\n+  struct cgraph_node *next_needed;\n   PTR GTY ((skip (\"\"))) aux;\n \n   /* Set when function must be output - it is externally visible\n@@ -108,7 +110,8 @@ struct cgraph_edge GTY(())\n struct cgraph_varpool_node GTY(())\n {\n   tree decl;\n-  PTR GTY ((skip (\"\"))) aux;\n+  /* Pointer to the next function in cgraph_varpool_nodes_queue.  */\n+  struct cgraph_varpool_node *next_needed;\n \n   /* Set when function must be output - it is externally visible\n      or it's address is taken.  */"}, {"sha": "f9e2ff6c2f8268c7229fcf59bcf6303436143619", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=8bd87c4e73fef41cbbd1c7dd722e0a590ff1111c", "patch": "@@ -157,7 +157,7 @@ cgraph_finalize_compilation_unit ()\n       tree decl = cgraph_nodes_queue->decl;\n \n       node = cgraph_nodes_queue;\n-      cgraph_nodes_queue = cgraph_nodes_queue->aux;\n+      cgraph_nodes_queue = cgraph_nodes_queue->next_needed;\n \n       if (node->lowered || !node->reachable || !DECL_SAVED_TREE (decl))\n \tabort ();"}]}