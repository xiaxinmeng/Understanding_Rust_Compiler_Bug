{"sha": "6842690ec1e2d820ee646395fac65be4ad7e79c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njg0MjY5MGVjMWUyZDgyMGVlNjQ2Mzk1ZmFjNjViZTRhZDdlNzljMg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-07-31T12:16:45Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-07-31T12:16:45Z"}, "message": "Add declarations for malloc and realloc..\n\n(PTR_INT_TYPE): New macro.\n(pcfinclude): Use it.\n\nFrom-SVN: r1734", "tree": {"sha": "f7be3aab03caf1ee615875e43abc6ab98edbbec2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f7be3aab03caf1ee615875e43abc6ab98edbbec2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6842690ec1e2d820ee646395fac65be4ad7e79c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6842690ec1e2d820ee646395fac65be4ad7e79c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6842690ec1e2d820ee646395fac65be4ad7e79c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6842690ec1e2d820ee646395fac65be4ad7e79c2/comments", "author": null, "committer": null, "parents": [{"sha": "530fb43c7b769ef7a4409ce43bd9e1fd8b63d525", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/530fb43c7b769ef7a4409ce43bd9e1fd8b63d525", "html_url": "https://github.com/Rust-GCC/gccrs/commit/530fb43c7b769ef7a4409ce43bd9e1fd8b63d525"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "356d9966f3cbf534bfa40a977e851fdd51c6c3bc", "filename": "gcc/cccp.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6842690ec1e2d820ee646395fac65be4ad7e79c2/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6842690ec1e2d820ee646395fac65be4ad7e79c2/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=6842690ec1e2d820ee646395fac65be4ad7e79c2", "patch": "@@ -47,6 +47,12 @@ typedef unsigned char U_CHAR;\n #define LOCAL_INCLUDE_DIR \"/usr/local/include\"\n #endif\n \n+#ifdef __STDC__\n+#define PTR_INT_TYPE ptrdiff_t\n+#else\n+#define PTR_INT_TYPE long\n+#endif\n+\n #include \"pcp.h\"\n \n #ifndef STDC_VALUE\n@@ -137,7 +143,7 @@ typedef struct { unsigned :16, :16, :16; } vms_ino_t;\n #define INCLUDE_LEN_FUDGE 0\n #endif\n \n-/* Exported declarations.  */\n+/* Forward declarations.  */\n \n char *xmalloc ();\n void error ();\n@@ -149,6 +155,7 @@ extern char *getenv ();\n extern FILE *fdopen ();\n extern char *version_string;\n extern struct tm *localtime ();\n+extern char *malloc (), *realloc ();\n extern int sys_nerr;\n extern char *sys_errlist[];\n \n@@ -4355,8 +4362,9 @@ pcfinclude (buf, limit, name, op)\n     /* by the text of the string (string_start) */\n \n     /* First skip to a longword boundary */\n-    if ((int)cp & 3)\n-      cp += 4 - ((int)cp & 3);\n+    /* ??? Why a 4-byte boundary?  On all machines? */\n+    if ((PTR_INT_TYPE) cp & 3)\n+      cp += 4 - ((PTR_INT_TYPE) cp & 3);\n     \n     /* Now get the string. */\n     str = (STRINGDEF *) cp;"}]}