{"sha": "2668793e69871aa499e43a5b368453e0f5cee831", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY2ODc5M2U2OTg3MWFhNDk5ZTQzYTViMzY4NDUzZTBmNWNlZTgzMQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1999-01-08T00:46:25Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-01-08T00:46:25Z"}, "message": "toplev.c (compile_file): Move call to output_func_start_profiler to after the loop to emit deferred...\n\n        * toplev.c (compile_file): Move call to output_func_start_profiler\n        to after the loop to emit deferred functions.\n\nFrom-SVN: r24567", "tree": {"sha": "cefdc2dec658056ca3dc5605956f897becd2a7e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cefdc2dec658056ca3dc5605956f897becd2a7e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2668793e69871aa499e43a5b368453e0f5cee831", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2668793e69871aa499e43a5b368453e0f5cee831", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2668793e69871aa499e43a5b368453e0f5cee831", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2668793e69871aa499e43a5b368453e0f5cee831/comments", "author": null, "committer": null, "parents": [{"sha": "621f5a0fd8f8bac451bc54166e5a076a7880d87c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/621f5a0fd8f8bac451bc54166e5a076a7880d87c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/621f5a0fd8f8bac451bc54166e5a076a7880d87c"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "9aaf201fdd30e272e2c740b26ce5a436688465ad", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2668793e69871aa499e43a5b368453e0f5cee831/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2668793e69871aa499e43a5b368453e0f5cee831/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2668793e69871aa499e43a5b368453e0f5cee831", "patch": "@@ -1,3 +1,8 @@\n+Fri Jan  8 01:43:53 1999  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* toplev.c (compile_file): Move call to output_func_start_profiler\n+\tto after the loop to emit deferred functions.\n+\n Thu Jan  7 11:26:17 1999  Mark Mitchell  <mark@markmitchell.com>\n \n \t* calls.c (store_unaligned_arguments_into_pseudos): Use xmalloc to"}, {"sha": "bef0033c10edfdb419b386cf98433fdd7b066afc", "filename": "gcc/toplev.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2668793e69871aa499e43a5b368453e0f5cee831/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2668793e69871aa499e43a5b368453e0f5cee831/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=2668793e69871aa499e43a5b368453e0f5cee831", "patch": "@@ -2907,8 +2907,6 @@ compile_file (name)\n \tpoplevel (0, 0, 0);\n     }\n \n-  output_func_start_profiler ();\n-\n   /* Compilation is now finished except for writing\n      what's left of the symbol table output.  */\n \n@@ -3014,6 +3012,15 @@ compile_file (name)\n \t  }\n       }\n \n+    /* This must occur after the loop to output deferred functions.  Else\n+       the profiler initializer would not be emitted if all the functions\n+       in this compilation unit were deferred.\n+\n+       output_func_start_profiler can not cause any additional functions or\n+       data to need to be output, so it need not be in the deferred function\n+       loop above.  */\n+    output_func_start_profiler ();\n+\n     /* Now that all possible functions have been output, we can dump\n        the exception table.  */\n "}]}