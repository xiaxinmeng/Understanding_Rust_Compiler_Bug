{"sha": "a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVjOTY1YzE3ZWYzNmMyMTU2NzNjMWIzYmMwMWVmZjA3ODBiM2ZjYw==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2004-09-15T04:12:18Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2004-09-15T04:12:18Z"}, "message": "tree-dfa.c (free_df_for_stmt): No longer static.\n\n\n\t* tree-dfa.c (free_df_for_stmt): No longer static.\n\t(free_df): Update comments.\n\t* tree-flow.h (free_df_for_stmt): Prototype.\n\t* tree-ssa-dse.c (dse_optimize_stmt): Call free_df_for_stmt.  Also\n\tcall release_defs.\n\nFrom-SVN: r87531", "tree": {"sha": "cf5b9beec3f25e2e51b674da28677528ab57f45a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf5b9beec3f25e2e51b674da28677528ab57f45a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/comments", "author": null, "committer": null, "parents": [{"sha": "bb5ecf29592e396bce6f8b793430d094d65c5309", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb5ecf29592e396bce6f8b793430d094d65c5309", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb5ecf29592e396bce6f8b793430d094d65c5309"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "f982042f9a5501f2e957ef2de25f17b50765add9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "patch": "@@ -1,3 +1,11 @@\n+2004-09-14 Jeff Law  <law@redhat.com>\n+\n+\t* tree-dfa.c (free_df_for_stmt): No longer static.\n+\t(free_df): Update comments.\n+\t* tree-flow.h (free_df_for_stmt): Prototype.\n+\t* tree-ssa-dse.c (dse_optimize_stmt): Call free_df_for_stmt.  Also\n+\tcall release_defs.\n+\n 2004-09-14  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR tree-optimization/17252"}, {"sha": "3d7e4d4b4d6a07a4c45fcd758c7320bf7209e42e", "filename": "gcc/tree-dfa.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2Ftree-dfa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2Ftree-dfa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-dfa.c?ref=a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "patch": "@@ -188,9 +188,9 @@ compute_immediate_uses (int flags, bool (*calc_for)(tree))\n }\n \n \n-/* Invalidates dataflow information for a statement STMT.  */\n+/* Invalidates dataflow information for a statement STMT.   */\n \n-static void\n+void\n free_df_for_stmt (tree stmt)\n {\n   dataflow_t *df;\n@@ -221,7 +221,13 @@ free_df_for_stmt (tree stmt)\n }\n \n \n-/* Invalidate dataflow information for the whole function.  */\n+/* Invalidate dataflow information for the whole function. \n+\n+   Note this only invalidates dataflow information on statements and\n+   PHI nodes which are reachable.\n+\n+   A deleted statement may still have attached dataflow information\n+   on it.  */\n \n void\n free_df (void)"}, {"sha": "2ae08f29404ca19b0ec55c8dc4733d608de0c72a", "filename": "gcc/tree-flow.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2Ftree-flow.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2Ftree-flow.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-flow.h?ref=a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "patch": "@@ -530,6 +530,7 @@ extern void dump_immediate_uses_for (FILE *, tree);\n extern void debug_immediate_uses_for (tree);\n extern void compute_immediate_uses (int, bool (*)(tree));\n extern void free_df (void);\n+extern void free_df_for_stmt (tree);\n extern tree get_virtual_var (tree);\n extern void add_referenced_tmp_var (tree var);\n extern void mark_new_vars_to_rename (tree, bitmap);"}, {"sha": "23487f28b8ea2ecb9b66b2ebad8958d0f0d9850c", "filename": "gcc/tree-ssa-dse.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2Ftree-ssa-dse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c965c17ef36c215673c1b3bc01eff0780b3fcc/gcc%2Ftree-ssa-dse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dse.c?ref=a5c965c17ef36c215673c1b3bc01eff0780b3fcc", "patch": "@@ -326,6 +326,14 @@ dse_optimize_stmt (struct dom_walk_data *walk_data,\n \t     This allows us to cascade dead stores.  */\n \t  redirect_immediate_uses (stmt, skipped_phi ? skipped_phi : use);\n \n+\t  /* Be sure to remove any dataflow information attached to\n+\t     this statement.  */\n+\t  free_df_for_stmt (stmt);\n+\n+\t  /* And release any SSA_NAMEs set in this statement back to the\n+\t     SSA_NAME manager.  */\n+\t  release_defs (stmt);\n+\n \t  /* Finally remove the dead store.  */\n \t  bsi_remove (&bsi);\n \t}"}]}