{"sha": "cca410b69b25a729ea3a4d3614426e380c688ca4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NhNDEwYjY5YjI1YTcyOWVhM2E0ZDM2MTQ0MjZlMzgwYzY4OGNhNA==", "commit": {"author": {"name": "Andi Kleen", "email": "ak@linux.intel.com", "date": "2013-06-21T13:51:37Z"}, "committer": {"name": "Andi Kleen", "email": "ak@gcc.gnu.org", "date": "2013-06-21T13:51:37Z"}, "message": "Improve __atomic_clear/test_and_set documentation\n\nDocument that __atomic_clear and __atomic_test_and_set should\nonly be used with bool.\n\ngcc/:\n2013-06-21  Andi Kleen  <ak@linux.intel.com>\n\n\t* doc/extend.texi: Document that __atomic_clear and\n\t  __atomic_test_and_set should only be used with bool.\n\nFrom-SVN: r200303", "tree": {"sha": "45d907e3dab135e9b398f5abd9232aef324d9ffd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45d907e3dab135e9b398f5abd9232aef324d9ffd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cca410b69b25a729ea3a4d3614426e380c688ca4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca410b69b25a729ea3a4d3614426e380c688ca4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cca410b69b25a729ea3a4d3614426e380c688ca4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca410b69b25a729ea3a4d3614426e380c688ca4/comments", "author": null, "committer": null, "parents": [{"sha": "a58219532cee0dd01c890ee56ae73d5be845c748", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a58219532cee0dd01c890ee56ae73d5be845c748", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a58219532cee0dd01c890ee56ae73d5be845c748"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "16590940a0dde969547f8f054f655510e3d944aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca410b69b25a729ea3a4d3614426e380c688ca4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca410b69b25a729ea3a4d3614426e380c688ca4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cca410b69b25a729ea3a4d3614426e380c688ca4", "patch": "@@ -1,3 +1,8 @@\n+2013-06-21  Andi Kleen  <ak@linux.intel.com>\n+\n+\t* doc/extend.texi: Document that __atomic_clear and\n+\t  __atomic_test_and_set should only be used with bool.\n+\n 2013-06-20  Jan Hubicka  <jh@suse.cz>\n \n \t* gimple-fold.c (gimple_extract_devirt_binfo_from_cst): Use"}, {"sha": "213cf00a7385eb650282cd9488d6685820ce5804", "filename": "gcc/doc/extend.texi", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca410b69b25a729ea3a4d3614426e380c688ca4/gcc%2Fdoc%2Fextend.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca410b69b25a729ea3a4d3614426e380c688ca4/gcc%2Fdoc%2Fextend.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fextend.texi?ref=cca410b69b25a729ea3a4d3614426e380c688ca4", "patch": "@@ -7439,6 +7439,8 @@ This built-in function performs an atomic test-and-set operation on\n the byte at @code{*@var{ptr}}.  The byte is set to some implementation\n defined nonzero ``set'' value and the return value is @code{true} if and only\n if the previous contents were ``set''.\n+It should be only used for operands of type @code{bool} or @code{char}. For \n+other types only part of the value may be set.\n \n All memory models are valid.\n \n@@ -7448,6 +7450,10 @@ All memory models are valid.\n \n This built-in function performs an atomic clear operation on\n @code{*@var{ptr}}.  After the operation, @code{*@var{ptr}} contains 0.\n+It should be only used for operands of type @code{bool} or @code{char} and \n+in conjunction with @code{__atomic_test_and_set}.\n+For other types it may only clear partially. If the type is not @code{bool}\n+prefer using @code{__atomic_store}.\n \n The valid memory model variants are\n @code{__ATOMIC_RELAXED}, @code{__ATOMIC_SEQ_CST}, and"}]}