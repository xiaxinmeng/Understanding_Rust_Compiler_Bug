{"sha": "c9639aaea98bc664408ad15fd026887d2183772c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzk2MzlhYWVhOThiYzY2NDQwOGFkMTVmZDAyNjg4N2QyMTgzNzcyYw==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2005-10-09T22:50:01Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2005-10-09T22:50:01Z"}, "message": "re PR tree-optimization/24226 (ICE: Segmentation fault in operand_equal_p (complete loop unrolling))\n\n\tPR tree-optimization/24226\n\t* tree-cfg.c (remove_bb): Clean up unreachable loops.\n\t* tree-flow.h (free_numbers_of_iterations_estimates_loop): Declare.\n\t* tree-ssa-loop-niter.c (free_numbers_of_iterations_estimates_loop):\n\tExport.\n\nFrom-SVN: r105151", "tree": {"sha": "c6f70d0a915759c759daa29d1d4f35bcd2436148", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6f70d0a915759c759daa29d1d4f35bcd2436148"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9639aaea98bc664408ad15fd026887d2183772c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9639aaea98bc664408ad15fd026887d2183772c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9639aaea98bc664408ad15fd026887d2183772c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9639aaea98bc664408ad15fd026887d2183772c/comments", "author": null, "committer": null, "parents": [{"sha": "ed883fe3d84eafc4f1e96a6193b8aa07f6304e67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed883fe3d84eafc4f1e96a6193b8aa07f6304e67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed883fe3d84eafc4f1e96a6193b8aa07f6304e67"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "31163ac68ac2249ab9d7864c253b41e019a646c3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c9639aaea98bc664408ad15fd026887d2183772c", "patch": "@@ -1,3 +1,11 @@\n+2005-10-09  Zdenek Dvorak  <dvorakz@suse.cz>\n+\n+\tPR tree-optimization/24226\n+\t* tree-cfg.c (remove_bb): Clean up unreachable loops.\n+\t* tree-flow.h (free_numbers_of_iterations_estimates_loop): Declare.\n+\t* tree-ssa-loop-niter.c (free_numbers_of_iterations_estimates_loop):\n+\tExport.\n+\n 2005-10-09  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \t* config/sparc/gmon-sol2.c (internal_mcount): Mark as used."}, {"sha": "2a0d75a29706cd250a5fa1be14b8f463045802ef", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=c9639aaea98bc664408ad15fd026887d2183772c", "patch": "@@ -2020,6 +2020,12 @@ remove_bb (basic_block bb)\n \t{\n \t  loop->latch = NULL;\n \t  loop->header = NULL;\n+\n+\t  /* Also clean up the information associated with the loop.  Updating\n+\t     it would waste time. More importantly, it may refer to ssa\n+\t     names that were defined in other removed basic block -- these\n+\t     ssa names are now removed and invalid.  */\n+\t  free_numbers_of_iterations_estimates_loop (loop);\n \t}\n     }\n "}, {"sha": "135c475f62babee9f55b2d154724df4caa724f21", "filename": "gcc/tree-flow.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2Ftree-flow.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2Ftree-flow.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-flow.h?ref=c9639aaea98bc664408ad15fd026887d2183772c", "patch": "@@ -735,6 +735,7 @@ bool scev_probably_wraps_p (tree, tree, tree, tree, struct loop *, bool *,\n \t\t\t    bool *);\n tree convert_step (struct loop *, tree, tree, tree, tree);\n void free_numbers_of_iterations_estimates (struct loops *);\n+void free_numbers_of_iterations_estimates_loop (struct loop *);\n void rewrite_into_loop_closed_ssa (bitmap, unsigned);\n void verify_loop_closed_ssa (void);\n void loop_commit_inserts (void);"}, {"sha": "5e35f4efb834d8e9c7e3e9afc08dbb9b25deac52", "filename": "gcc/tree-ssa-loop-niter.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2Ftree-ssa-loop-niter.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9639aaea98bc664408ad15fd026887d2183772c/gcc%2Ftree-ssa-loop-niter.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-niter.c?ref=c9639aaea98bc664408ad15fd026887d2183772c", "patch": "@@ -2007,11 +2007,13 @@ convert_step (struct loop *loop, tree new_type, tree base, tree step,\n \n /* Frees the information on upper bounds on numbers of iterations of LOOP.  */\n \n-static void\n+void\n free_numbers_of_iterations_estimates_loop (struct loop *loop)\n {\n   struct nb_iter_bound *bound, *next;\n-  \n+\n+  loop->nb_iterations = NULL;\n+  loop->estimated_nb_iterations = NULL;\n   for (bound = loop->bounds; bound; bound = next)\n     {\n       next = bound->next;"}]}