{"sha": "9fd47435098270dd5687b9bbaa34d1b9ecb494e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWZkNDc0MzUwOTgyNzBkZDU2ODdiOWJiYWEzNGQxYjllY2I0OTRlNw==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-05-22T10:43:56Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-05-22T10:43:56Z"}, "message": "calls.c (initialize_argument_information): Forbid sibcalls if a callee-copied argument is stored in the current function's...\n\n\t* calls.c (initialize_argument_information): Forbid sibcalls if a\n\tcallee-copied argument is stored in the current function's frame.\n\nFrom-SVN: r82129", "tree": {"sha": "bf82bc4a8519356b69f3a76b5b2f664864fc4a47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bf82bc4a8519356b69f3a76b5b2f664864fc4a47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9fd47435098270dd5687b9bbaa34d1b9ecb494e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fd47435098270dd5687b9bbaa34d1b9ecb494e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fd47435098270dd5687b9bbaa34d1b9ecb494e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fd47435098270dd5687b9bbaa34d1b9ecb494e7/comments", "author": null, "committer": null, "parents": [{"sha": "fea6ecb7464fd19e3981a6297a30ecc7981de4b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fea6ecb7464fd19e3981a6297a30ecc7981de4b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fea6ecb7464fd19e3981a6297a30ecc7981de4b2"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "a01a10851d08167959c115cb61909d50fa413be2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fd47435098270dd5687b9bbaa34d1b9ecb494e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fd47435098270dd5687b9bbaa34d1b9ecb494e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9fd47435098270dd5687b9bbaa34d1b9ecb494e7", "patch": "@@ -1,3 +1,8 @@\n+2004-05-22  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* calls.c (initialize_argument_information): Forbid sibcalls if a\n+\tcallee-copied argument is stored in the current function's frame.\n+\n 2004-05-22  Eric Christopher  <echristo@redhat.com>\n \n \t* fix-header.c (read_scan_file): Update for add_path change."}, {"sha": "48d62f83e5235da294c17b09a0be3374e545f298", "filename": "gcc/calls.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fd47435098270dd5687b9bbaa34d1b9ecb494e7/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fd47435098270dd5687b9bbaa34d1b9ecb494e7/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=9fd47435098270dd5687b9bbaa34d1b9ecb494e7", "patch": "@@ -1129,6 +1129,13 @@ initialize_argument_information (int num_actuals ATTRIBUTE_UNUSED,\n \t\t  && ! REG_P (DECL_RTL (TREE_OPERAND (args[i].tree_value, 1))))\n \t\targs[i].tree_value = TREE_OPERAND (args[i].tree_value, 1);\n \n+\t      /* We can't use sibcalls if a callee-copied argument is stored\n+\t\t in the current function's frame.  */\n+\t      if (!call_from_thunk_p\n+\t\t  && (!DECL_P (args[i].tree_value)\n+\t\t      || !TREE_STATIC (args[i].tree_value)))\n+\t\t*may_tailcall = false;\n+\n \t      args[i].tree_value = build1 (ADDR_EXPR,\n \t\t\t\t\t   build_pointer_type (type),\n \t\t\t\t\t   args[i].tree_value);"}]}