{"sha": "36cbd091c564540e008703e1abc1707194beb5b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzZjYmQwOTFjNTY0NTQwZTAwODcwM2UxYWJjMTcwNzE5NGJlYjViNA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2006-02-01T10:30:43Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2006-02-01T10:30:43Z"}, "message": "re PR bootstrap/26055 (libgcc-math declaration of __isinf conflicts with system header, fails bootstrap)\n\n2006-02-01  Richard Guenther  <rguenther@suse.de>\n\n        PR bootstrap/26055\n\t* configure.ac: Disable libgcc-math if we cannot mix\n\tdeclaration of __isinf and math.h inclusion.\n\t* configure: Re-generate.\n\nFrom-SVN: r110469", "tree": {"sha": "c30e66a064809facf023ce1ded0881049b3b0adc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c30e66a064809facf023ce1ded0881049b3b0adc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/36cbd091c564540e008703e1abc1707194beb5b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36cbd091c564540e008703e1abc1707194beb5b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36cbd091c564540e008703e1abc1707194beb5b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36cbd091c564540e008703e1abc1707194beb5b4/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "916b63c37110524381d529d8b82c9ef79615fc8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/916b63c37110524381d529d8b82c9ef79615fc8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/916b63c37110524381d529d8b82c9ef79615fc8b"}], "stats": {"total": 99, "additions": 99, "deletions": 0}, "files": [{"sha": "f36e1cca94bc8988f9240cc1f8443610ac1d752b", "filename": "libgcc-math/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36cbd091c564540e008703e1abc1707194beb5b4/libgcc-math%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36cbd091c564540e008703e1abc1707194beb5b4/libgcc-math%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc-math%2FChangeLog?ref=36cbd091c564540e008703e1abc1707194beb5b4", "patch": "@@ -1,3 +1,10 @@\n+2006-02-01  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR bootstrap/26055\n+\t* configure.ac: Disable libgcc-math if we cannot mix\n+\tdeclaration of __isinf and math.h inclusion.\n+\t* configure: Re-generate.\n+\n 2006-01-31  Richard Guenther  <rguenther@suse.de>\n \tPaolo Bonzini  <bonzini@gnu.org>\n "}, {"sha": "43833fa02dcd74b384b466f40c0a78c93c45d963", "filename": "libgcc-math/configure", "status": "modified", "additions": 70, "deletions": 0, "changes": 70, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36cbd091c564540e008703e1abc1707194beb5b4/libgcc-math%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36cbd091c564540e008703e1abc1707194beb5b4/libgcc-math%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc-math%2Fconfigure?ref=36cbd091c564540e008703e1abc1707194beb5b4", "patch": "@@ -4573,6 +4573,73 @@ else\n fi\n \n \n+# Check for target library dependencies\n+cannot_build=no\n+\n+echo \"$as_me:$LINENO: checking whether math.h conflicts with defining __isinf\" >&5\n+echo $ECHO_N \"checking whether math.h conflicts with defining __isinf... $ECHO_C\" >&6\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+#include \"math.h\"\n+int __isinf (double x)\n+{\n+}\n+\n+int\n+main ()\n+{\n+\n+return __isinf (1.0);\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+\n+echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+\n+echo \"$as_me:$LINENO: result: yes\" >&5\n+echo \"${ECHO_T}yes\" >&6\n+cannot_build=yes\n+\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+\n+\n # Now check which parts we include in the library.\n \n arch_subdirs=\n@@ -4590,6 +4657,9 @@ esac\n \n \n \n+if test \"$cannot_build\" = \"yes\"; then\n+  arch_subdirs=\n+fi\n \n \n if test \"x$arch_subdirs\" != x; then"}, {"sha": "7fa9e72ef34b31d62f9a0370043c8eb91416399d", "filename": "libgcc-math/configure.ac", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36cbd091c564540e008703e1abc1707194beb5b4/libgcc-math%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36cbd091c564540e008703e1abc1707194beb5b4/libgcc-math%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc-math%2Fconfigure.ac?ref=36cbd091c564540e008703e1abc1707194beb5b4", "patch": "@@ -124,6 +124,25 @@ else\n fi\n \n \n+# Check for target library dependencies\n+cannot_build=no\n+\n+AC_MSG_CHECKING([whether math.h conflicts with defining __isinf])\n+AC_TRY_LINK([\n+#include \"math.h\"\n+int __isinf (double x)\n+{\n+}\n+], [\n+return __isinf (1.0);\n+], [\n+AC_MSG_RESULT([no])\n+], [\n+AC_MSG_RESULT([yes])\n+cannot_build=yes\n+])\n+\n+\n # Now check which parts we include in the library.\n \n arch_subdirs=\n@@ -141,6 +160,9 @@ esac\n AC_SUBST(arch_subdirs)\n AC_SUBST(arch_libraries)\n AC_SUBST(arch_maps)\n+if test \"$cannot_build\" = \"yes\"; then\n+  arch_subdirs=\n+fi\n AM_CONDITIONAL(BUILD_LIBGCC_MATH, [test \"x$arch_subdirs\" != x])\n \n "}]}