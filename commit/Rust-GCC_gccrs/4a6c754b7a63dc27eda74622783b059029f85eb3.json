{"sha": "4a6c754b7a63dc27eda74622783b059029f85eb3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE2Yzc1NGI3YTYzZGMyN2VkYTc0NjIyNzgzYjA1OTAyOWY4NWViMw==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2006-02-03T11:44:08Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2006-02-03T11:44:08Z"}, "message": "re PR target/25960 (__gcc_qadd doesn't handle -0.0L properly)\n\n\tPR target/25960\ngcc/\n\t* config/rs6000/darwin-ldouble.c (__gcc_qadd): Preserve -0.0 result.\ngcc/testsuite/\n\t* gcc.target/powerpc/pr25960.c: New test.\n\nFrom-SVN: r110540", "tree": {"sha": "c0bb3c5d36adfde224770cd4cba7ba6cce6b6fb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0bb3c5d36adfde224770cd4cba7ba6cce6b6fb2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a6c754b7a63dc27eda74622783b059029f85eb3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a6c754b7a63dc27eda74622783b059029f85eb3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a6c754b7a63dc27eda74622783b059029f85eb3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a6c754b7a63dc27eda74622783b059029f85eb3/comments", "author": null, "committer": null, "parents": [{"sha": "f61a2c7da855928032ffe9293483c5c9584f7ceb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f61a2c7da855928032ffe9293483c5c9584f7ceb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f61a2c7da855928032ffe9293483c5c9584f7ceb"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "53e6953270c66d60b2ec41dacf17b9df6a2bb295", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a6c754b7a63dc27eda74622783b059029f85eb3", "patch": "@@ -1,3 +1,8 @@\n+2006-02-03  Alan Modra  <amodra@bigpond.net.au>\n+\n+\tPR target/25960\n+\t* config/rs6000/darwin-ldouble.c (__gcc_qadd): Preserve -0.0 result.\n+\n 2006-02-03  Andreas Krebbel  <krebbel1@de.ibm.com>\n             Ulrich Weigand  <uweigand@de.ibm.com>\n \n@@ -1544,6 +1549,7 @@\n \n 2006-01-20  Alan Modra  <amodra@bigpond.net.au>\n \n+\tPR target/25668\n \t* libgcc2.c (__floatdisf, __floatdidf): Don't use IBM Extended\n \tDouble TFmode.\n \t(__floatundisf, __floatundidf): Likewise."}, {"sha": "08ff351d52c0a29fe5457bde7831249a1c6d57ed", "filename": "gcc/config/rs6000/darwin-ldouble.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2Fconfig%2Frs6000%2Fdarwin-ldouble.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2Fconfig%2Frs6000%2Fdarwin-ldouble.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fdarwin-ldouble.c?ref=4a6c754b7a63dc27eda74622783b059029f85eb3", "patch": "@@ -117,8 +117,12 @@ __gcc_qadd (double a, double aa, double c, double cc)\n     {\n       q = a - z;\n       zz = q + c + (a - (q + z)) + aa + cc;\n-      xh = z + zz;\n \n+      /* Keep -0 result.  */\n+      if (zz == 0.0)\n+\treturn z;\n+\n+      xh = z + zz;\n       if (nonfinite (xh))\n \treturn xh;\n "}, {"sha": "c4d45285865d4f03035127cb2b036a84c2722817", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4a6c754b7a63dc27eda74622783b059029f85eb3", "patch": "@@ -1,3 +1,7 @@\n+2006-02-03  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* gcc.target/powerpc/pr25960.c: New test.\n+\n 2006-02-02  Steven G. Kargl  <kargls@comcast>\n \n \tPR fortran/24958"}, {"sha": "9ab9a10a1a49742faef7088f08e35ae74c5abeab", "filename": "gcc/testsuite/gcc.target/powerpc/pr25960.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr25960.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a6c754b7a63dc27eda74622783b059029f85eb3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr25960.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr25960.c?ref=4a6c754b7a63dc27eda74622783b059029f85eb3", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do run { target { powerpc*-*-darwin* powerpc*-*-aix* rs6000-*-* powerpc*-*-linux* } } } */\n+/* { dg-options \"-O2 -mlong-double-128\" } */\n+\n+extern void abort (void);\n+\n+volatile long double l, m, n;\n+\n+int\n+main (void)\n+{\n+  l = __builtin_copysignl (0.0L, -1.0L);\n+  m = __builtin_copysignl (0.0L, -1.0L);\n+  n = l + m;\n+  if (__builtin_copysignl (1.0L, n) >= 0.0L)\n+    abort ();\n+  return 0;\n+}"}]}