{"sha": "0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGJlNjA2ZDNjZTdiMzkxNDhkMGQwYWVkNTRiYWUzYjRmZTk0NzhhZg==", "commit": {"author": {"name": "Cesar Philippidis", "email": "cesar@codesourcery.com", "date": "2018-06-13T14:31:17Z"}, "committer": {"name": "Cesar Philippidis", "email": "cesar@gcc.gnu.org", "date": "2018-06-13T14:31:17Z"}, "message": "re PR fortran/85703 ([openacc] ICE in resolve_fntype, at fortran/resolve.c:16313)\n\nPR fortran/85703\n\n\tgcc/fortran/\n\t* parse.c (decode_oacc_directive): Set gfc_matching_function\n\tto false.\n\t(decode_omp_directive): Likewise.\n\n\tgcc/testsuite/\n\t* gfortran.dg/goacc/pr85703.f90: New test.\n\t* gfortran.dg/gomp/pr85703.f90: New test.\n\nFrom-SVN: r261551", "tree": {"sha": "541b70e1c266b2847191e307eb4153c3970d2883", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/541b70e1c266b2847191e307eb4153c3970d2883"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/comments", "author": {"login": "cesarjp", "id": 4576177, "node_id": "MDQ6VXNlcjQ1NzYxNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4576177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cesarjp", "html_url": "https://github.com/cesarjp", "followers_url": "https://api.github.com/users/cesarjp/followers", "following_url": "https://api.github.com/users/cesarjp/following{/other_user}", "gists_url": "https://api.github.com/users/cesarjp/gists{/gist_id}", "starred_url": "https://api.github.com/users/cesarjp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cesarjp/subscriptions", "organizations_url": "https://api.github.com/users/cesarjp/orgs", "repos_url": "https://api.github.com/users/cesarjp/repos", "events_url": "https://api.github.com/users/cesarjp/events{/privacy}", "received_events_url": "https://api.github.com/users/cesarjp/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "adc41ebeab0c027cce9e1fb1e1356a66d89aeb57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adc41ebeab0c027cce9e1fb1e1356a66d89aeb57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adc41ebeab0c027cce9e1fb1e1356a66d89aeb57"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "25b5f37de5511b95b74c4abe0067609375f43125", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "patch": "@@ -1,3 +1,10 @@\n+2018-06-13  Cesar Philippidis  <cesar@codesourcery.com>\n+\n+\tPR fortran/85703\n+\t* parse.c (decode_oacc_directive): Set gfc_matching_function\n+\tto false.\n+\t(decode_omp_directive): Likewise.\n+\n 2018-06-13  Cesar Philippidis  <cesar@codesourcery.com>\n \n \tPR fortran/85702"}, {"sha": "4ce6eb427506f8fa5ee8311d9b584770ef07249b", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "patch": "@@ -624,6 +624,8 @@ decode_oacc_directive (void)\n   gfc_clear_error ();   /* Clear any pending errors.  */\n   gfc_clear_warning (); /* Clear any pending warnings.  */\n \n+  gfc_matching_function = false;\n+\n   if (gfc_pure (NULL))\n     {\n       gfc_error_now (\"OpenACC directives at %C may not appear in PURE \"\n@@ -795,6 +797,8 @@ decode_omp_directive (void)\n   gfc_clear_error ();\t/* Clear any pending errors.  */\n   gfc_clear_warning ();\t/* Clear any pending warnings.  */\n \n+  gfc_matching_function = false;\n+\n   if (gfc_current_state () == COMP_FUNCTION\n       && gfc_current_block ()->result->ts.kind == -1)\n     spec_only = true;"}, {"sha": "c56ef09f72694e9b809fd33042fbbf33b36cadc3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "patch": "@@ -1,3 +1,9 @@\n+2018-06-13  Cesar Philippidis  <cesar@codesourcery.com>\n+\n+\tPR fortran/85703\n+\t* gfortran.dg/goacc/pr85703.f90: New test.\n+\t* gfortran.dg/gomp/pr85703.f90: New test.\n+\n 2018-06-13  Cesar Philippidis  <cesar@codesourcery.com>\n \n \tPR fortran/85702"}, {"sha": "d9de1a3971ff53f27aff33683baa7fcd718f552d", "filename": "gcc/testsuite/gfortran.dg/goacc/pr85703.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fpr85703.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fpr85703.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fpr85703.f90?ref=0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "patch": "@@ -0,0 +1,9 @@\n+! PR fortran/85703\n+! { dg-do compile }\n+\n+character function f()\n+  !$acc parallel loop reduction(+:a)\n+  do i = 1, 4\n+  end do\n+  !$acc end parallel loop\n+end"}, {"sha": "7ca2b93ffb10badb831bdac09bd0da46acdd9b20", "filename": "gcc/testsuite/gfortran.dg/gomp/pr85703.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr85703.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be606d3ce7b39148d0d0aed54bae3b4fe9478af/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr85703.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr85703.f90?ref=0be606d3ce7b39148d0d0aed54bae3b4fe9478af", "patch": "@@ -0,0 +1,8 @@\n+! PR fortran/85703\n+! { dg-do compile }\n+\n+character function f()\n+  !$omp single\n+  !$omp end single\n+  f = 'a'\n+end"}]}