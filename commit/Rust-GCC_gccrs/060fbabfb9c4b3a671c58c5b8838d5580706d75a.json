{"sha": "060fbabfb9c4b3a671c58c5b8838d5580706d75a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDYwZmJhYmZiOWM0YjNhNjcxYzU4YzViODgzOGQ1NTgwNzA2ZDc1YQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1998-02-07T23:26:08Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-02-07T23:26:08Z"}, "message": "expr.c (clear_pending_stack_adjust): Handle case where a function calls alloca...\n\n        * expr.c (clear_pending_stack_adjust): Handle case where a function\n        calls alloca, but the user has specified -fomit-fframe-pointer.\n\nFrom-SVN: r17770", "tree": {"sha": "9045b085ea62f69237dc6da0c752d1f414b6c77c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9045b085ea62f69237dc6da0c752d1f414b6c77c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/060fbabfb9c4b3a671c58c5b8838d5580706d75a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/060fbabfb9c4b3a671c58c5b8838d5580706d75a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/060fbabfb9c4b3a671c58c5b8838d5580706d75a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/060fbabfb9c4b3a671c58c5b8838d5580706d75a/comments", "author": null, "committer": null, "parents": [{"sha": "b515ab3d515e702f50c738cd2a264e1f3ab3ba49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b515ab3d515e702f50c738cd2a264e1f3ab3ba49", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b515ab3d515e702f50c738cd2a264e1f3ab3ba49"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "e3e61f7e925d76c69f3752f228b084c970140059", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/060fbabfb9c4b3a671c58c5b8838d5580706d75a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/060fbabfb9c4b3a671c58c5b8838d5580706d75a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=060fbabfb9c4b3a671c58c5b8838d5580706d75a", "patch": "@@ -1,5 +1,8 @@\n Sun Feb  8 00:09:59 1998  Jeffrey A Law  (law@cygnus.com)\n \n+\t* expr.c (clear_pending_stack_adjust): Handle case where a function\n+\tcalls alloca, but the user has specified -fomit-fframe-pointer.\n+\n \t* function.c (assign_parms): Fix typo in last change.\n \n Sat Feb  7 23:54:29 1998   Robert Lipe  <robertl@dgii.com>"}, {"sha": "74c6be56b24f4b962d2db71cbf81e41cd3443fca", "filename": "gcc/expr.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/060fbabfb9c4b3a671c58c5b8838d5580706d75a/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/060fbabfb9c4b3a671c58c5b8838d5580706d75a/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=060fbabfb9c4b3a671c58c5b8838d5580706d75a", "patch": "@@ -9576,14 +9576,18 @@ init_pending_stack_adjust ()\n }\n \n /* When exiting from function, if safe, clear out any pending stack adjust\n-   so the adjustment won't get done.  */\n+   so the adjustment won't get done.\n+\n+   Note, if the current function calls alloca, then it must have a\n+   frame pointer regardless of the value of flag_omit_frame_pointer.  */\n \n void\n clear_pending_stack_adjust ()\n {\n #ifdef EXIT_IGNORE_STACK\n   if (optimize > 0\n-      && ! flag_omit_frame_pointer && EXIT_IGNORE_STACK\n+      && (! flag_omit_frame_pointer || current_function_calls_alloca)\n+      && EXIT_IGNORE_STACK\n       && ! (DECL_INLINE (current_function_decl) && ! flag_no_inline)\n       && ! flag_inline_functions)\n     pending_stack_adjust = 0;"}]}