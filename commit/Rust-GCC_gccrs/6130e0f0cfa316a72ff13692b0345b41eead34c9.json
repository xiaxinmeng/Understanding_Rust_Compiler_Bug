{"sha": "6130e0f0cfa316a72ff13692b0345b41eead34c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjEzMGUwZjBjZmEzMTZhNzJmZjEzNjkyYjAzNDViNDFlZWFkMzRjOQ==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2008-06-04T23:20:01Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2008-06-04T23:20:01Z"}, "message": "target-supports.exp (check_effective_target_powerpc_spu): Call check_effective_target_powerpc_altivec_ok.\n\n\t* lib/target-supports.exp (check_effective_target_powerpc_spu):\n\tCall check_effective_target_powerpc_altivec_ok.\n\t* gcc.target/powerpc/dfp-dd.c, gcc.target/powerpc/dfp-td.c,\n\tgcc.target/powerpc/ppc32-abi-dfp-1.c,\n\tgcc.target/powerpc/ppu-intrinsics.c: Require powerpc_fprs.\n\nFrom-SVN: r136378", "tree": {"sha": "256f86a0d971c5aae5b655cc63b50b78cfed7347", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/256f86a0d971c5aae5b655cc63b50b78cfed7347"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6130e0f0cfa316a72ff13692b0345b41eead34c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6130e0f0cfa316a72ff13692b0345b41eead34c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6130e0f0cfa316a72ff13692b0345b41eead34c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6130e0f0cfa316a72ff13692b0345b41eead34c9/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "28734c3906bf82c85fa3ca4c5a19c0d4e3dc5dbd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28734c3906bf82c85fa3ca4c5a19c0d4e3dc5dbd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28734c3906bf82c85fa3ca4c5a19c0d4e3dc5dbd"}], "stats": {"total": 23, "additions": 18, "deletions": 5}, "files": [{"sha": "d8c177dcc57e6bdef573e7d9a8a47e8c4e09b022", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6130e0f0cfa316a72ff13692b0345b41eead34c9", "patch": "@@ -1,4 +1,13 @@\n+2008-06-04  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_powerpc_spu):\n+\tCall check_effective_target_powerpc_altivec_ok.\n+\t* gcc.target/powerpc/dfp-dd.c, gcc.target/powerpc/dfp-td.c,\n+\tgcc.target/powerpc/ppc32-abi-dfp-1.c,\n+\tgcc.target/powerpc/ppu-intrinsics.c: Require powerpc_fprs.\n+\n 2008-06-04  Xinliang David Li  <davidxl@google.com>\n+\n \t* gcc.dg/cdce1.c: New test.\n \t* gcc.dg/cdce2.c: Ditto.\n \t* g++.dg/cdce3.C: Ditto."}, {"sha": "85da9070531963ff1de2a0dbad5e081a7ad43baf", "filename": "gcc/testsuite/gcc.target/powerpc/dfp-dd.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdfp-dd.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdfp-dd.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdfp-dd.c?ref=6130e0f0cfa316a72ff13692b0345b41eead34c9", "patch": "@@ -1,6 +1,6 @@\n /* Test generation of DFP instructions for POWER6.  */\n /* Origin: Janis Johnson <janis187@us.ibm.com> */\n-/* { dg-do compile { target powerpc*-*-linux* } } */\n+/* { dg-do compile { target { powerpc*-*-linux* && powerpc_fprs } } } */\n /* { dg-options \"-std=gnu99 -mcpu=power6\" } */\n \n /* { dg-final { scan-assembler \"dadd\" } } */"}, {"sha": "752ba88743f23ba3ba6fa2a078cf56de8018078b", "filename": "gcc/testsuite/gcc.target/powerpc/dfp-td.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdfp-td.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdfp-td.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdfp-td.c?ref=6130e0f0cfa316a72ff13692b0345b41eead34c9", "patch": "@@ -1,6 +1,6 @@\n /* Test generation of DFP instructions for POWER6.  */\n /* Origin: Janis Johnson <janis187@us.ibm.com> */\n-/* { dg-do compile { target powerpc*-*-linux* } } */\n+/* { dg-do compile { target { powerpc*-*-linux* && powerpc_fprs } } } */\n /* { dg-options \"-std=gnu99 -mcpu=power6\" } */\n \n /* { dg-final { scan-assembler \"daddq\" } } */"}, {"sha": "1b836d7279540dea121b6b9e0db7b8026e137459", "filename": "gcc/testsuite/gcc.target/powerpc/ppc32-abi-dfp-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fppc32-abi-dfp-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fppc32-abi-dfp-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fppc32-abi-dfp-1.c?ref=6130e0f0cfa316a72ff13692b0345b41eead34c9", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run { target { powerpc*-*-* && { ilp32 && dfprt } } } } */\n+/* { dg-do run { target { powerpc_fprs && { ilp32 && dfprt } } } } */\n /* { dg-options \"-std=gnu99 -O2 -fno-strict-aliasing\" } */\n \n /* Testcase to check for ABI compliance of parameter passing"}, {"sha": "bfdf74266009f25ac544caa03784b06adcda8ecf", "filename": "gcc/testsuite/gcc.target/powerpc/ppu-intrinsics.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fppu-intrinsics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fppu-intrinsics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fppu-intrinsics.c?ref=6130e0f0cfa316a72ff13692b0345b41eead34c9", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do link { target *-*-linux* } } */\n+/* { dg-do link { target { *-*-linux* && powerpc_fprs } } } */\n /* { dg-options \"-W -Wall -mcpu=cell\" } */\n /* Test some PPU intrinsics from <ppu_intrinsics.h>.  */\n "}, {"sha": "d158ef0cfc184a3a304baf56777d44c83b20650c", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6130e0f0cfa316a72ff13692b0345b41eead34c9/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=6130e0f0cfa316a72ff13692b0345b41eead34c9", "patch": "@@ -1292,7 +1292,11 @@ proc check_effective_target_powerpc_altivec_ok { } {\n # Return 1 if this is a PowerPC target that supports SPU.\n \n proc check_effective_target_powerpc_spu { } {\n-    return [istarget powerpc*-*-linux*]\n+    if [istarget powerpc*-*-linux*] {\n+\treturn [check_effective_target_powerpc_altivec_ok]\n+    } else {\n+\treturn 0\n+    }\n }\n \n # Return 1 if this is a PowerPC target with SPE enabled."}]}