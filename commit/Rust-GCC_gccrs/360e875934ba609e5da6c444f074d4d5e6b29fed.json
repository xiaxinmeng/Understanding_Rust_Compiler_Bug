{"sha": "360e875934ba609e5da6c444f074d4d5e6b29fed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzYwZTg3NTkzNGJhNjA5ZTVkYTZjNDQ0ZjA3NGQ0ZDVlNmIyOWZlZA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2006-01-19T22:36:41Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2006-01-19T22:36:41Z"}, "message": "re PR libstdc++/25797 (almost all libstdc++ tests fail)\n\n2006-01-19  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR libstdc++/25797\n\t* acinclude.m4 (GLIBCXX_CHECK_LINKER_FEATURES): Remove -Werror\n\tfrom CFLAGS.  Check if linker really supports --gc-sections.\n\t* configure: Regenerated.\n\nFrom-SVN: r109985", "tree": {"sha": "de03a10423d0e9fe0ce57be254ab86ec473b95cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de03a10423d0e9fe0ce57be254ab86ec473b95cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/360e875934ba609e5da6c444f074d4d5e6b29fed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/360e875934ba609e5da6c444f074d4d5e6b29fed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/360e875934ba609e5da6c444f074d4d5e6b29fed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/360e875934ba609e5da6c444f074d4d5e6b29fed/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dd1a203f1906c242134df27115f70d25488627f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd1a203f1906c242134df27115f70d25488627f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd1a203f1906c242134df27115f70d25488627f4"}], "stats": {"total": 150, "additions": 139, "deletions": 11}, "files": [{"sha": "2ee8841e134ef55756a4b1d1ea2ad21cb38a9c7a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360e875934ba609e5da6c444f074d4d5e6b29fed/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360e875934ba609e5da6c444f074d4d5e6b29fed/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=360e875934ba609e5da6c444f074d4d5e6b29fed", "patch": "@@ -1,3 +1,10 @@\n+2006-01-19  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR libstdc++/25797\n+\t* acinclude.m4 (GLIBCXX_CHECK_LINKER_FEATURES): Remove -Werror\n+\tfrom CFLAGS.  Check if linker really supports --gc-sections.\n+\t* configure: Regenerated.\n+\n 2006-01-18  Paul Brook  <paul@codesourcery.com>\n \n \t* libsupc++/eh_personality.cc (PERSONALITY_FUNCTION): Use std::abort."}, {"sha": "d0a5a6be7cf1d38c2ccd5dff39830ce6852fe671", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360e875934ba609e5da6c444f074d4d5e6b29fed/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360e875934ba609e5da6c444f074d4d5e6b29fed/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=360e875934ba609e5da6c444f074d4d5e6b29fed", "patch": "@@ -237,13 +237,24 @@ AC_DEFUN([GLIBCXX_CHECK_LINKER_FEATURES], [\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     AC_MSG_CHECKING([for ld that supports -Wl,--gc-sections])\n     AC_TRY_LINK([ int one(void) { return 1; }\n      int two(void) { return 2; }\n \t], [ two(); ] , [ac_gcsections=yes], [ac_gcsections=no])\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi"}, {"sha": "50b936196173e9f7d5b73f3721e68c67ac1651f8", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 120, "deletions": 10, "changes": 130, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360e875934ba609e5da6c444f074d4d5e6b29fed/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360e875934ba609e5da6c444f074d4d5e6b29fed/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=360e875934ba609e5da6c444f074d4d5e6b29fed", "patch": "@@ -8215,7 +8215,7 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -8273,6 +8273,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -53062,7 +53073,7 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -53120,6 +53131,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -74402,7 +74424,7 @@ done\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -74460,6 +74482,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -75905,7 +75938,7 @@ done\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -75963,6 +75996,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -77284,7 +77328,7 @@ done\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -77342,6 +77386,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -79450,7 +79505,7 @@ done\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -79508,6 +79563,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -80782,7 +80848,7 @@ done\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -80840,6 +80906,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -82163,7 +82240,7 @@ done\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -82221,6 +82298,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -83936,7 +84024,7 @@ echo \"${ECHO_T}$glibcxx_cv_WRITEV\" >&6\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -83994,6 +84082,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi\n@@ -86030,7 +86129,7 @@ done\n     # Need to do this so that g++ won't try to link in libstdc++/libsupc++.\n     ac_test_CFLAGS=\"${CFLAGS+set}\"\n     ac_save_CFLAGS=\"$CFLAGS\"\n-    CFLAGS='-x c++  -Werror -Wl,--gc-sections'\n+    CFLAGS='-x c++ -Wl,--gc-sections'\n \n     # Check for -Wl,--gc-sections\n     echo \"$as_me:$LINENO: checking for ld that supports -Wl,--gc-sections\" >&5\n@@ -86088,6 +86187,17 @@ ac_gcsections=no\n fi\n rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n+    if test \"$ac_gcsections\" = \"yes\"; then\n+      rm -f conftest.c\n+      touch conftest.c\n+      if $CC -c conftest.c; then\n+\tif $LD --gc-sections -o conftest conftest.o 2>&1 | \\\n+\t   grep \"Warning: gc-sections option ignored\" > /dev/null; then\n+\t  ac_gcsections=no\n+\tfi\n+      fi\n+      rm -f conftest.c conftest.o conftest\n+    fi\n     if test \"$ac_gcsections\" = \"yes\"; then\n       SECTION_LDFLAGS=\"-Wl,--gc-sections $SECTION_LDFLAGS\"\n     fi"}]}