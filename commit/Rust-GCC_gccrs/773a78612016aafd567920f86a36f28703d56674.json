{"sha": "773a78612016aafd567920f86a36f28703d56674", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzczYTc4NjEyMDE2YWFmZDU2NzkyMGY4NmEzNmYyODcwM2Q1NjY3NA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2007-06-12T20:25:23Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2007-06-12T20:25:23Z"}, "message": "tree-ssa-alias.c (finalize_ref_all_pointers): Clear pt_anything flag on ref-all pointers.\n\n\t* tree-ssa-alias.c (finalize_ref_all_pointers): Clear pt_anything\n\tflag on ref-all pointers.\n\nFrom-SVN: r125656", "tree": {"sha": "8ad49bdd18bc88a9bb08e0ffa6a51811c14ec4d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ad49bdd18bc88a9bb08e0ffa6a51811c14ec4d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/773a78612016aafd567920f86a36f28703d56674", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773a78612016aafd567920f86a36f28703d56674", "html_url": "https://github.com/Rust-GCC/gccrs/commit/773a78612016aafd567920f86a36f28703d56674", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773a78612016aafd567920f86a36f28703d56674/comments", "author": null, "committer": null, "parents": [{"sha": "4543943ad4323c336993836933f7011c295fd50f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4543943ad4323c336993836933f7011c295fd50f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4543943ad4323c336993836933f7011c295fd50f"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "b46c15ee7906ecfe69d697eea71fa4f0825c7c7b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/773a78612016aafd567920f86a36f28703d56674/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/773a78612016aafd567920f86a36f28703d56674/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=773a78612016aafd567920f86a36f28703d56674", "patch": "@@ -1,3 +1,8 @@\n+2007-06-12  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree-ssa-alias.c (finalize_ref_all_pointers): Clear pt_anything\n+\tflag on ref-all pointers.\n+\n 2007-06-12  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR middle-end/31579"}, {"sha": "31911e68ef4f0b3484c95a50e5ac45b63e9b63d9", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/773a78612016aafd567920f86a36f28703d56674/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/773a78612016aafd567920f86a36f28703d56674/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=773a78612016aafd567920f86a36f28703d56674", "patch": "@@ -2415,8 +2415,14 @@ finalize_ref_all_pointers (struct alias_info *ai)\n   for (i = 0; i < ai->num_pointers; i++)\n     {\n       tree ptr = ai->pointers[i]->var, tag;\n+      /* Avoid adding to self and clean up.  */\n       if (PTR_IS_REF_ALL (ptr))\n-\tcontinue;\n+\t{\n+\t  struct ptr_info_def *pi = get_ptr_info (ptr);\n+\t  if (pi->is_dereferenced)\n+\t    pi->pt_anything = 0;\n+\t  continue;\n+\t}\n       tag = symbol_mem_tag (ptr);\n       if (is_call_clobbered (tag))\n \tadd_may_alias (ai->ref_all_symbol_mem_tag, tag);"}]}