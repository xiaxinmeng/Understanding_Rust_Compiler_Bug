{"sha": "e3552bf9f0a78afb9d13351b05c3adf306d847d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM1NTJiZjlmMGE3OGFmYjlkMTMzNTFiMDVjM2FkZjMwNmQ4NDdkMA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-08-25T03:48:35Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-08-25T03:48:35Z"}, "message": "compiler: Type check params in sink function decl.\n\n    \n    When a function is declared and named with the blank identifier, only\n    the syntax is checked.  This patch modifies the parser to add a dummy\n    node for each function declaration with a blank identifier name that\n    will be type checked like any function declaration.\n    \n    Fixes golang/go#11535.\n    \n    Reviewed-on: https://go-review.googlesource.com/13792\n\nFrom-SVN: r227160", "tree": {"sha": "05d055d0ebde38c8cdfec91ce5321799c219d9aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05d055d0ebde38c8cdfec91ce5321799c219d9aa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3552bf9f0a78afb9d13351b05c3adf306d847d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3552bf9f0a78afb9d13351b05c3adf306d847d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3552bf9f0a78afb9d13351b05c3adf306d847d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3552bf9f0a78afb9d13351b05c3adf306d847d0/comments", "author": null, "committer": null, "parents": [{"sha": "cd0fea2ba9b535f22658c78b5f3be49284ec8147", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd0fea2ba9b535f22658c78b5f3be49284ec8147", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd0fea2ba9b535f22658c78b5f3be49284ec8147"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "e499d7f3c01109861f974a4d98a2cfe6c68e9a51", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3552bf9f0a78afb9d13351b05c3adf306d847d0/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3552bf9f0a78afb9d13351b05c3adf306d847d0/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=e3552bf9f0a78afb9d13351b05c3adf306d847d0", "patch": "@@ -1,4 +1,4 @@\n-cc7303c97b232ea979cab950d95aaf76c4e0f5b5\n+81810917af7ba19e1f9f8efc8b1989f7d6419d30\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "922473ac810358b45442be07c6632e13489c0477", "filename": "gcc/go/gofrontend/parse.cc", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3552bf9f0a78afb9d13351b05c3adf306d847d0/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3552bf9f0a78afb9d13351b05c3adf306d847d0/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fparse.cc?ref=e3552bf9f0a78afb9d13351b05c3adf306d847d0", "patch": "@@ -2305,8 +2305,20 @@ Parse::function_decl(bool saw_nointerface)\n \n   if (!this->peek_token()->is_op(OPERATOR_LCURLY))\n     {\n-      if (named_object == NULL && !Gogo::is_sink_name(name))\n+      if (named_object == NULL)\n \t{\n+          // Function declarations with the blank identifier as a name are\n+          // mostly ignored since they cannot be called.  We make an object\n+          // for this declaration for type-checking purposes.\n+          if (Gogo::is_sink_name(name))\n+            {\n+              static int count;\n+              char buf[30];\n+              snprintf(buf, sizeof buf, \".$sinkfndecl%d\", count);\n+              ++count;\n+              name = std::string(buf);\n+            }\n+\n \t  if (fntype == NULL\n               || (expected_receiver && rec == NULL))\n \t    this->gogo_->add_erroneous_name(name);"}]}