{"sha": "352411927ee72322eb6a99a8b4ff489939b31cdd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUyNDExOTI3ZWU3MjMyMmViNmE5OWE4YjRmZjQ4OTkzOWIzMWNkZA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-07-10T13:05:18Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-07-10T13:05:18Z"}, "message": "semantics.c (cp_expand_stmt): Fix for null current_function_return_value.\n\n        * semantics.c (cp_expand_stmt): Fix for null\n        current_function_return_value.\n\nFrom-SVN: r43900", "tree": {"sha": "ce607e9f28be94316958753878bc0c4de6f43652", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ce607e9f28be94316958753878bc0c4de6f43652"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/352411927ee72322eb6a99a8b4ff489939b31cdd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/352411927ee72322eb6a99a8b4ff489939b31cdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/352411927ee72322eb6a99a8b4ff489939b31cdd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/352411927ee72322eb6a99a8b4ff489939b31cdd/comments", "author": null, "committer": null, "parents": [{"sha": "2253525c31f671de4be799d11abb46b244548180", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2253525c31f671de4be799d11abb46b244548180", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2253525c31f671de4be799d11abb46b244548180"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "7473cab405a176d259da9161bdf7c009dfc74156", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/352411927ee72322eb6a99a8b4ff489939b31cdd/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/352411927ee72322eb6a99a8b4ff489939b31cdd/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=352411927ee72322eb6a99a8b4ff489939b31cdd", "patch": "@@ -1,3 +1,8 @@\n+2001-07-10  Jason Merrill  <jason_merrill@redhat.com>\n+\n+\t* semantics.c (cp_expand_stmt): Fix for null\n+\tcurrent_function_return_value.\n+\n 2001-07-10  Jan van Male  <jan.vanmale@fenk.wau.nl>\n \n \t* call.c (build_op_delete_call): Initialize fn.\n@@ -7,6 +12,8 @@\n \t(get_primary_binfo): Initialize result.\n \t* init.c (build_java_class_ref): Initialize name.\n \n+2001-07-09  Erik Rozendaal  <dlr@acm.org>\n+\n \t* typeck.c (unary_complex_lvalue): Do not duplicate the\n \targument to modify, pre-, or post-increment when used as an\n \tlvalue and when the argument has side-effects."}, {"sha": "c82d29113817c3b7ac478e49743ddb2455ec77bc", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/352411927ee72322eb6a99a8b4ff489939b31cdd/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/352411927ee72322eb6a99a8b4ff489939b31cdd/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=352411927ee72322eb6a99a8b4ff489939b31cdd", "patch": "@@ -2156,8 +2156,10 @@ cp_expand_stmt (t)\n   switch (TREE_CODE (t))\n     {\n     case CLEANUP_STMT:\n-      /* Don't destroy the chosen named return value.  */\n-      if (CLEANUP_DECL (t) != current_function_return_value)\n+      if (CLEANUP_DECL (t)\n+\t  && CLEANUP_DECL (t) == current_function_return_value)\n+\t/* Don't destroy the chosen named return value.  */;\n+      else\n \tgenrtl_decl_cleanup (CLEANUP_DECL (t), CLEANUP_EXPR (t));\n       break;\n "}]}