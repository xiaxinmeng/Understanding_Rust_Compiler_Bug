{"sha": "13d7e8af69af2247ab864b2ee1255d34bbc8cbec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNkN2U4YWY2OWFmMjI0N2FiODY0YjJlZTEyNTVkMzRiYmM4Y2JlYw==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2008-09-11T17:17:57Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2008-09-11T17:17:57Z"}, "message": "reload1.c (alter_reg): Undo the BYTE_BIG_ENDIAN correction performed by assign_stack_local on the IRA...\n\n\t* reload1.c (alter_reg): Undo the BYTE_BIG_ENDIAN correction performed\n\tby assign_stack_local on the IRA path for stack slot sharing as well\n\tas the non-IRA path.\n\nFrom-SVN: r140295", "tree": {"sha": "0898fb2ad51a3a9d37d60922945a0babe332cdb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0898fb2ad51a3a9d37d60922945a0babe332cdb6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13d7e8af69af2247ab864b2ee1255d34bbc8cbec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13d7e8af69af2247ab864b2ee1255d34bbc8cbec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13d7e8af69af2247ab864b2ee1255d34bbc8cbec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13d7e8af69af2247ab864b2ee1255d34bbc8cbec/comments", "author": null, "committer": null, "parents": [{"sha": "4ae8027b1847d798f8d17261c8b655fa537da08f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ae8027b1847d798f8d17261c8b655fa537da08f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ae8027b1847d798f8d17261c8b655fa537da08f"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "d55103b5b931ba2c729e1893daab377493efeb2f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d7e8af69af2247ab864b2ee1255d34bbc8cbec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d7e8af69af2247ab864b2ee1255d34bbc8cbec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=13d7e8af69af2247ab864b2ee1255d34bbc8cbec", "patch": "@@ -1,3 +1,9 @@\n+2008-09-11  Jeff Law <law@redhat.com>\n+\n+\t* reload1.c (alter_reg): Undo the BYTE_BIG_ENDIAN correction performed\n+\tby assign_stack_local on the IRA path for stack slot sharing\n+\tas well as the non-IRA path.\n+\n 2008-09-11  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.h: Fix whitespace issues."}, {"sha": "93457c162c068ed44d23819f91b3e2eba504bb3a", "filename": "gcc/reload1.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d7e8af69af2247ab864b2ee1255d34bbc8cbec/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d7e8af69af2247ab864b2ee1255d34bbc8cbec/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=13d7e8af69af2247ab864b2ee1255d34bbc8cbec", "patch": "@@ -2176,26 +2176,36 @@ alter_reg (int i, int from_reg, bool dont_share_p)\n \t inherent space, and no less total space, then the previous slot.  */\n       else if (from_reg == -1 || (! dont_share_p && flag_ira && optimize))\n \t{\n+\t  rtx stack_slot;\n \t  alias_set_type alias_set = new_alias_set ();\n \n \t  /* No known place to spill from => no slot to reuse.  */\n \t  x = assign_stack_local (mode, total_size,\n \t\t\t\t  min_align > inherent_align\n \t\t\t\t  || total_size > inherent_size ? -1 : 0);\n+\n+\t  stack_slot = x;\n+\n \t  if (BYTES_BIG_ENDIAN)\n \t    /* Cancel the  big-endian correction done in assign_stack_local.\n \t       Get the address of the beginning of the slot.\n \t       This is so we can do a big-endian correction unconditionally\n \t       below.  */\n \t    adjust = inherent_size - total_size;\n+\t    if (adjust)\n+\t      stack_slot\n+\t\t= adjust_address_nv (x, mode_for_size (total_size\n+\t\t\t\t\t\t       * BITS_PER_UNIT,\n+\t\t\t\t\t\t       MODE_INT, 1),\n+\t\t\t\t     adjust);\n \n \t  /* Nothing can alias this slot except this pseudo.  */\n \t  set_mem_alias_set (x, alias_set);\n \t  dse_record_singleton_alias_set (alias_set, mode);\n \n \t  if (! dont_share_p && flag_ira && optimize)\n \t    /* Inform IRA about allocation a new stack slot.  */\n-\t    ira_mark_new_stack_slot (x, i, total_size);\n+\t    ira_mark_new_stack_slot (stack_slot, i, total_size);\n \t}\n \n       /* Reuse a stack slot if possible.  */"}]}