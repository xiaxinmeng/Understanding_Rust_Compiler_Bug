{"sha": "1bde00421fc1d93e9a92ffe6cd0c221f4494fd33", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJkZTAwNDIxZmMxZDkzZTlhOTJmZmU2Y2QwYzIyMWY0NDk0ZmQzMw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-09-25T10:30:21Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-09-25T10:30:21Z"}, "message": "tree.c (cxx_printable_name): Compare FUNCTION_DECL uids rather than pointers.\n\n\t* tree.c (cxx_printable_name): Compare FUNCTION_DECL uids\n\trather than pointers.\n\nFrom-SVN: r128761", "tree": {"sha": "7f7711926444aa8beabc6e8b0c608c1b26fb2ce7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f7711926444aa8beabc6e8b0c608c1b26fb2ce7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "32534ed1fe91a8cd0aaa187788251770994f421a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32534ed1fe91a8cd0aaa187788251770994f421a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32534ed1fe91a8cd0aaa187788251770994f421a"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "991a669d4070d7c0565181c2c24d265c5f6fd89a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1bde00421fc1d93e9a92ffe6cd0c221f4494fd33", "patch": "@@ -1,10 +1,14 @@\n+2007-09-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* tree.c (cxx_printable_name): Compare FUNCTION_DECL uids\n+\trather than pointers.\n+\n 2007-09-24  Danny Smith  <dannysmith@user.sourceforge.net>\n \n \tPR c++/14688\n         * search.c (check_final_overrider): Fail if\n \ttargetm.comp_type_attributes returns 0.\n \n-\n 2007-09-24  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/33239"}, {"sha": "11181c2b4256cca977a23eb02d08102fd88bdbff", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bde00421fc1d93e9a92ffe6cd0c221f4494fd33/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=1bde00421fc1d93e9a92ffe6cd0c221f4494fd33", "patch": "@@ -1155,7 +1155,7 @@ build_overload (tree decl, tree chain)\n const char *\n cxx_printable_name (tree decl, int v)\n {\n-  static tree decl_ring[PRINT_RING_SIZE];\n+  static unsigned int uid_ring[PRINT_RING_SIZE];\n   static char *print_ring[PRINT_RING_SIZE];\n   static int ring_counter;\n   int i;\n@@ -1168,7 +1168,7 @@ cxx_printable_name (tree decl, int v)\n \n   /* See if this print name is lying around.  */\n   for (i = 0; i < PRINT_RING_SIZE; i++)\n-    if (decl_ring[i] == decl)\n+    if (uid_ring[i] == DECL_UID (decl))\n       /* yes, so return it.  */\n       return print_ring[i];\n \n@@ -1177,18 +1177,18 @@ cxx_printable_name (tree decl, int v)\n \n   if (current_function_decl != NULL_TREE)\n     {\n-      if (decl_ring[ring_counter] == current_function_decl)\n+      if (uid_ring[ring_counter] == DECL_UID (current_function_decl))\n \tring_counter += 1;\n       if (ring_counter == PRINT_RING_SIZE)\n \tring_counter = 0;\n-      gcc_assert (decl_ring[ring_counter] != current_function_decl);\n+      gcc_assert (uid_ring[ring_counter] != DECL_UID (current_function_decl));\n     }\n \n   if (print_ring[ring_counter])\n     free (print_ring[ring_counter]);\n \n   print_ring[ring_counter] = xstrdup (lang_decl_name (decl, v));\n-  decl_ring[ring_counter] = decl;\n+  uid_ring[ring_counter] = DECL_UID (decl);\n   return print_ring[ring_counter];\n }\n \f"}]}