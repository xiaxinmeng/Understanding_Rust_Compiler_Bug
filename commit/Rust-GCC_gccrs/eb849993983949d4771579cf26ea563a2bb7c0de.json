{"sha": "eb849993983949d4771579cf26ea563a2bb7c0de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWI4NDk5OTM5ODM5NDlkNDc3MTU3OWNmMjZlYTU2M2EyYmI3YzBkZQ==", "commit": {"author": {"name": "Bernardo Innocenti", "email": "bernie@develer.com", "date": "2003-08-21T17:47:41Z"}, "committer": {"name": "Bernardo Innocenti", "email": "bernie@gcc.gnu.org", "date": "2003-08-21T17:47:41Z"}, "message": "m68k.c (m68k_rtx_costs): Adjust mul/div costs for ColdFire cores.\n\n\t* config/m68k/m68k.c (m68k_rtx_costs): Adjust mul/div costs for\n\tColdFire cores.\n\nCo-Authored-By: Paul Dale <pauli@snapgear.com>\nCo-Authored-By: Peter Barada <peter@baradas.org>\n\nFrom-SVN: r70653", "tree": {"sha": "bb34a17809ffbc384aaa943ac6299ff9578d1b01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bb34a17809ffbc384aaa943ac6299ff9578d1b01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb849993983949d4771579cf26ea563a2bb7c0de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb849993983949d4771579cf26ea563a2bb7c0de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb849993983949d4771579cf26ea563a2bb7c0de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb849993983949d4771579cf26ea563a2bb7c0de/comments", "author": {"login": "codewiz", "id": 1184492, "node_id": "MDQ6VXNlcjExODQ0OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1184492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codewiz", "html_url": "https://github.com/codewiz", "followers_url": "https://api.github.com/users/codewiz/followers", "following_url": "https://api.github.com/users/codewiz/following{/other_user}", "gists_url": "https://api.github.com/users/codewiz/gists{/gist_id}", "starred_url": "https://api.github.com/users/codewiz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codewiz/subscriptions", "organizations_url": "https://api.github.com/users/codewiz/orgs", "repos_url": "https://api.github.com/users/codewiz/repos", "events_url": "https://api.github.com/users/codewiz/events{/privacy}", "received_events_url": "https://api.github.com/users/codewiz/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f3c2dfc6293ec19dd6cd7c975d77eee3420f4cef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3c2dfc6293ec19dd6cd7c975d77eee3420f4cef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3c2dfc6293ec19dd6cd7c975d77eee3420f4cef"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "6c4e28d4be1f61fe5159eb9759934151777457bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb849993983949d4771579cf26ea563a2bb7c0de/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb849993983949d4771579cf26ea563a2bb7c0de/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eb849993983949d4771579cf26ea563a2bb7c0de", "patch": "@@ -1,3 +1,10 @@\n+2003-08-21  Bernardo Innocenti  <bernie@develer.com>\n+            Paul Dale  <pauli@snapgear.com>\n+            Peter Barada <peter@baradas.org>\n+\n+\t* config/m68k/m68k.c (m68k_rtx_costs): Adjust mul/div costs for\n+\tColdFire cores.\n+\n 2003-08-21  Zack Weinberg  <zack@codesourcery.com>\n \n \t* Makefile.in (INCLUDES): Remove -I$(srcdir)/config."}, {"sha": "9d142c57f04cc26a999499ae62d4fb54f10c9ce9", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb849993983949d4771579cf26ea563a2bb7c0de/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb849993983949d4771579cf26ea563a2bb7c0de/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=eb849993983949d4771579cf26ea563a2bb7c0de", "patch": "@@ -1507,9 +1507,10 @@ m68k_rtx_costs (x, code, outer_code, total)\n        for add and the time for shift, taking away a little more because\n        sometimes move insns are needed.  */\n     /* div?.w is relatively cheaper on 68000 counted in COSTS_N_INSNS terms.  */\n-#define MULL_COST (TARGET_68060 ? 2 : TARGET_68040 ? 5 : 13)\n-#define MULW_COST (TARGET_68060 ? 2 : TARGET_68040 ? 3 : TARGET_68020 ? 8 : 5)\n-#define DIVW_COST (TARGET_68020 ? 27 : 12)\n+#define MULL_COST (TARGET_68060 ? 2 : TARGET_68040 ? 5 : TARGET_CFV3 ? 3 : TARGET_COLDFIRE ? 10 : 13)\n+#define MULW_COST (TARGET_68060 ? 2 : TARGET_68040 ? 3 : TARGET_68020 ? 8 : \\\n+\t\t\tTARGET_CFV3 ? 2 : 5)\n+#define DIVW_COST (TARGET_68020 ? 27 : TARGET_CF_HWDIV ? 11 : 12)\n \n     case PLUS:\n       /* An lea costs about three times as much as a simple add.  */\n@@ -1521,7 +1522,11 @@ m68k_rtx_costs (x, code, outer_code, total)\n \t  && (INTVAL (XEXP (XEXP (x, 0), 1)) == 2\n \t      || INTVAL (XEXP (XEXP (x, 0), 1)) == 4\n \t      || INTVAL (XEXP (XEXP (x, 0), 1)) == 8))\n-\t*total = COSTS_N_INSNS (3);\t /* lea an@(dx:l:i),am */\n+\t{\n+\t    /* lea an@(dx:l:i),am */\n+\t    *total = COSTS_N_INSNS (TARGET_COLDFIRE ? 2 : 3);\n+\t    return true;\n+\t}\n       return false;\n \n     case ASHIFT:\n@@ -1532,7 +1537,7 @@ m68k_rtx_costs (x, code, outer_code, total)\n           *total = COSTS_N_INSNS(1);\n \t  return true;\n \t}\n-      if (! TARGET_68020)\n+      if (! TARGET_68020 && ! TARGET_COLDFIRE)\n         {\n \t  if (GET_CODE (XEXP (x, 1)) == CONST_INT)\n \t    {\n@@ -1557,7 +1562,7 @@ m68k_rtx_costs (x, code, outer_code, total)\n \t  && !(INTVAL (XEXP (x, 1)) > 0\n \t       && INTVAL (XEXP (x, 1)) <= 8))\n \t{\n-\t  *total = COSTS_N_INSNS (3);\t /* lsr #i,dn */\n+\t  *total = COSTS_N_INSNS (TARGET_COLDFIRE ? 1 : 3);\t /* lsr #i,dn */\n \t  return true;\n \t}\n       return false;\n@@ -1579,6 +1584,8 @@ m68k_rtx_costs (x, code, outer_code, total)\n     case UMOD:\n       if (GET_MODE (x) == QImode || GET_MODE (x) == HImode)\n         *total = COSTS_N_INSNS (DIVW_COST);\t/* div.w */\n+      else if (TARGET_CF_HWDIV)\n+        *total = COSTS_N_INSNS (18);\n       else\n \t*total = COSTS_N_INSNS (43);\t\t/* div.l */\n       return true;"}]}