{"sha": "5b8c120584ea8153ef5c230de9b6a3987f6a04da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWI4YzEyMDU4NGVhODE1M2VmNWMyMzBkZTliNmEzOTg3ZjZhMDRkYQ==", "commit": {"author": {"name": "Kirill Yukhin", "email": "kirill.yukhin@intel.com", "date": "2016-05-31T08:05:24Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2016-05-31T08:05:24Z"}, "message": "AVX-512. Limit constraint for scalar operand in split to AVX-512VL.\n\nPR target/71346\ngcc/\n\t* config/i386/sse.md (define_insn_and_split \"*vec_extractv4sf_0\"): Use\n\t`Yv' for scalar operand.\ntestsuite/\n\t* gcc.target/i386/pr71346.c: New test.\n\nFrom-SVN: r236909", "tree": {"sha": "0359498f63a393b3ef0120a5e83e55721fa1cb49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0359498f63a393b3ef0120a5e83e55721fa1cb49"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b8c120584ea8153ef5c230de9b6a3987f6a04da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b8c120584ea8153ef5c230de9b6a3987f6a04da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b8c120584ea8153ef5c230de9b6a3987f6a04da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b8c120584ea8153ef5c230de9b6a3987f6a04da/comments", "author": null, "committer": null, "parents": [{"sha": "7a88cc8467b948a302c9faedded8f39d7bd6380a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a88cc8467b948a302c9faedded8f39d7bd6380a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a88cc8467b948a302c9faedded8f39d7bd6380a"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "587afe0b1f16f5468c2a30b213f5840380337516", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5b8c120584ea8153ef5c230de9b6a3987f6a04da", "patch": "@@ -1,3 +1,9 @@\n+2016-05-31  Kirill Yukhin  <kirill.yukhin@intel.com>\n+\n+\tPR target/71346\n+\t* config/i386/sse.md (define_insn_and_split \"*vec_extractv4sf_0\"): Use\n+\t`Yv' for scalar operand.\n+\n 2016-05-31  Tom de Vries  <tom@codesourcery.com>\n \n \tPR tree-optimization/69068"}, {"sha": "12678978584eed7db9d144a8f568897cdb4d238e", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=5b8c120584ea8153ef5c230de9b6a3987f6a04da", "patch": "@@ -6837,7 +6837,7 @@\n   \"operands[1] = gen_lowpart (SFmode, operands[1]);\")\n \n (define_insn_and_split \"*sse4_1_extractps\"\n-  [(set (match_operand:SF 0 \"nonimmediate_operand\" \"=rm,rm,rm,v,v\")\n+  [(set (match_operand:SF 0 \"nonimmediate_operand\" \"=rm,rm,rm,Yv,Yv\")\n \t(vec_select:SF\n \t  (match_operand:V4SF 1 \"register_operand\" \"Yr,*x,v,0,v\")\n \t  (parallel [(match_operand:SI 2 \"const_0_to_3_operand\" \"n,n,n,n,n\")])))]"}, {"sha": "05eb1e8d0847c698b17555784b8c6e52fb2aa5cc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5b8c120584ea8153ef5c230de9b6a3987f6a04da", "patch": "@@ -1,3 +1,8 @@\n+2016-05-31  Kirill Yukhin  <kirill.yukhin@intel.com>\n+\n+\tPR target/71346\n+\t* gcc.target/i386/pr71346.c: New test.\n+\n 2016-05-31  Tom de Vries  <tom@codesourcery.com>\n \n \tPR tree-optimization/69068"}, {"sha": "0a15869155a3969823a615f6b62860b506292f1b", "filename": "gcc/testsuite/gcc.target/i386/pr71346.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr71346.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b8c120584ea8153ef5c230de9b6a3987f6a04da/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr71346.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr71346.c?ref=5b8c120584ea8153ef5c230de9b6a3987f6a04da", "patch": "@@ -0,0 +1,25 @@\n+/* PR target/71346 */\n+/* { dg-do compile { target { ! ia32 } }  } */\n+/* { dg-options \"-O2 -ftree-vectorize -ffast-math -march=knl\" } */\n+\n+typedef int rvec[3];\n+int a;\n+float b, c, d, g;\n+rvec *e, *f;\n+void fn2(float h, float g);\n+\n+void\n+fn1()\n+{\n+  float h;\n+  for (; a; a++) {\n+    h += e[a][0] * f[a][0];\n+    b += e[a][0] * f[a][1];\n+    c += e[a][2] * f[a][0];\n+    d += e[a][2] * f[a][1];\n+    g += e[a][2] * f[a][2];\n+  }\n+  fn2(h, g);\n+}\n+\n+/* { dg-final { scan-assembler-not \"vshufps\\[ \\\\t\\]+\\[^\\n\\]*%\\xmm(?:1\\[6-9\\]|\\[2-3\\]\\[0-9\\])\" } } */"}]}