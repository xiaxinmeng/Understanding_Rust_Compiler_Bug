{"sha": "3069b4210a4330c9bb570a1e65bb68144aea1761", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzA2OWI0MjEwYTQzMzBjOWJiNTcwYTFlNjViYjY4MTQ0YWVhMTc2MQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2014-02-14T14:07:30Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2014-02-14T14:07:30Z"}, "message": "cilk-common.c (cilk_arrow): Build a MEM_REF, not an INDIRECT_REF.\n\n2014-02-14  Richard Biener  <rguenther@suse.de>\n\n\t* cilk-common.c (cilk_arrow): Build a MEM_REF, not an INDIRECT_REF.\n\t(get_frame_arg): Drop the assert with langhook types_compatible_p.\n\tDo not strip INDIRECT_REFs.\n\nFrom-SVN: r207784", "tree": {"sha": "aa5f0b15f66120c3faaea0084413e5c79de357b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa5f0b15f66120c3faaea0084413e5c79de357b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3069b4210a4330c9bb570a1e65bb68144aea1761", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3069b4210a4330c9bb570a1e65bb68144aea1761", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3069b4210a4330c9bb570a1e65bb68144aea1761", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3069b4210a4330c9bb570a1e65bb68144aea1761/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1966fd99d822c06cbfb667806ba8bcf1fecaef58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1966fd99d822c06cbfb667806ba8bcf1fecaef58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1966fd99d822c06cbfb667806ba8bcf1fecaef58"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "91294f5f8f60ea8e53231f4582746afbe043ac57", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3069b4210a4330c9bb570a1e65bb68144aea1761/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3069b4210a4330c9bb570a1e65bb68144aea1761/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3069b4210a4330c9bb570a1e65bb68144aea1761", "patch": "@@ -1,3 +1,9 @@\n+2014-02-14  Richard Biener  <rguenther@suse.de>\n+\n+\t* cilk-common.c (cilk_arrow): Build a MEM_REF, not an INDIRECT_REF.\n+\t(get_frame_arg): Drop the assert with langhook types_compatible_p.\n+\tDo not strip INDIRECT_REFs.\n+\n 2014-02-14  Richard Biener  <rguenther@suse.de>\n \n \tPR lto/60179"}, {"sha": "a6a1aa2a9681ddee5eca2fb5b4065137baf96f69", "filename": "gcc/cilk-common.c", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3069b4210a4330c9bb570a1e65bb68144aea1761/gcc%2Fcilk-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3069b4210a4330c9bb570a1e65bb68144aea1761/gcc%2Fcilk-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcilk-common.c?ref=3069b4210a4330c9bb570a1e65bb68144aea1761", "patch": "@@ -66,8 +66,7 @@ cilk_dot (tree frame, int field_number, bool volatil)\n tree\n cilk_arrow (tree frame_ptr, int field_number, bool volatil)\n {\n-  return cilk_dot (fold_build1 (INDIRECT_REF, \n-\t\t\t\tTREE_TYPE (TREE_TYPE (frame_ptr)), frame_ptr), \n+  return cilk_dot (build_simple_mem_ref (frame_ptr), \n \t\t   field_number, volatil);\n }\n \n@@ -287,12 +286,9 @@ get_frame_arg (tree call)\n \n   argtype = TREE_TYPE (argtype);\n   \n-  gcc_assert (!lang_hooks.types_compatible_p\n-\t      || lang_hooks.types_compatible_p (argtype, cilk_frame_type_decl));\n-\n   /* If it is passed in as an address, then just use the value directly \n      since the function is inlined.  */\n-  if (TREE_CODE (arg) == INDIRECT_REF || TREE_CODE (arg) == ADDR_EXPR)\n+  if (TREE_CODE (arg) == ADDR_EXPR)\n     return TREE_OPERAND (arg, 0);\n   return arg;\n }"}]}