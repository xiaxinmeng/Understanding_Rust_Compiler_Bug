{"sha": "68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjhjYmE5ZWVlN2ZlNDgwNDU5YTcyNzdhMzhhYjYxZjFiNWZhMmFmNg==", "commit": {"author": {"name": "Dorit Nuzman", "email": "dorit@gcc.gnu.org", "date": "2007-10-23T19:50:18Z"}, "committer": {"name": "Dorit Nuzman", "email": "dorit@gcc.gnu.org", "date": "2007-10-23T19:50:18Z"}, "message": "re PR tree-optimization/33860 (ICE in vectorizable_load, at tree-vect-transform.c:5503)\n\n        PR tree-optimization/33860\n        * tree-vect-transform.c (vect_analyze_data_ref_access): Don't allow\n        interleaved accesses in case the dr is inside the inner-loop during\n        outer-loop vectorization.\n\nFrom-SVN: r129587", "tree": {"sha": "047fe26d7d3b1ec9ba7ad07a291d09bd776edf5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/047fe26d7d3b1ec9ba7ad07a291d09bd776edf5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/comments", "author": null, "committer": null, "parents": [{"sha": "d1ed933d78374d661171a23892aeca9980804ca7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ed933d78374d661171a23892aeca9980804ca7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1ed933d78374d661171a23892aeca9980804ca7"}], "stats": {"total": 68, "additions": 68, "deletions": 0}, "files": [{"sha": "a8d8a9f5a3a08c2eda76ca501e91cfc5fccb130c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "patch": "@@ -1,3 +1,10 @@\n+2007-10-23  Dorit Nuzman  <dorit@il.ibm.com>\n+\n+\tPR tree-optimization/33860\n+\t* tree-vect-transform.c (vect_analyze_data_ref_access): Don't allow\n+\tinterleaved accesses in case the dr is inside the inner-loop during\n+\touter-loop vectorization.\n+\n 2007-10-23  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \t* doc/rtl.texi (Flags): Fix MEM_SCALAR_P entry."}, {"sha": "a1bf668c44e3e1af1023d0e28f4d06255aa470ad", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "patch": "@@ -1,3 +1,10 @@\n+2007-10-23  Martin Michlmayr <tbm@cyrius.com>\t\n+\t    Dorit Nuzman  <dorit@il.ibm.com>\n+\n+\tPR tree-optimization/33860\n+\t* g++.dg/vect/pr33860.cc: New test.\n+\t* g++.dg/vect/pr33860a.cc: New test.\n+\n 2007-10-23  Tehila Meyzels  <tehila@il.ibm.com>\n \t    Revital Eres  <eres@il.ibm.com>\t \n "}, {"sha": "e70ec674eae6d4f6100c6bf0e175b18aba746da7", "filename": "gcc/testsuite/g++.dg/vect/pr33860.cc", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr33860.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr33860.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr33860.cc?ref=68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+/* Testcase by Martin Michlmayr <tbm@cyrius.com> */\n+\n+class Matrix\n+{\n+  public:\n+    double data[4][4];\n+    Matrix operator* (const Matrix matrix) const;\n+    void makeRotationAboutVector (void);\n+};\n+void Matrix::makeRotationAboutVector (void)\n+{\n+   Matrix irx;\n+   *this = irx * (*this);\n+}\n+Matrix Matrix::operator* (const Matrix matrix) const\n+{\n+  Matrix ret;\n+  for (int i = 0; i < 4; i++)\n+    for (int j = 0; j < 4; j++)\n+      ret.data[j][i] = matrix.data[j][2] + matrix.data[j][3];\n+  return ret;\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "a4f7becda17fd4df5659f4a3c9b0873c51e24c5e", "filename": "gcc/testsuite/g++.dg/vect/pr33860a.cc", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr33860a.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr33860a.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr33860a.cc?ref=68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+/* Testcase by Martin Michlmayr <tbm@cyrius.com> */\n+\n+class Matrix\n+{\n+  public:\n+    float data[4][4] __attribute__ ((__aligned__(16)));\n+    Matrix operator* (const Matrix matrix) const;\n+    void makeRotationAboutVector (void);\n+};\n+void Matrix::makeRotationAboutVector (void)\n+{\n+   Matrix irx;\n+   *this = irx * (*this);\n+}\n+Matrix Matrix::operator* (const Matrix matrix) const\n+{\n+  Matrix ret;\n+  for (int i = 0; i < 4; i++)\n+    for (int j = 0; j < 4; j++)\n+      ret.data[j][i] = matrix.data[j][2] + matrix.data[j][3];\n+  return ret;\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "ff81f9d033f510293a42eab1900f9800c1c9819b", "filename": "gcc/tree-vect-analyze.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftree-vect-analyze.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cba9eee7fe480459a7277a38ab61f1b5fa2af6/gcc%2Ftree-vect-analyze.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-analyze.c?ref=68cba9eee7fe480459a7277a38ab61f1b5fa2af6", "patch": "@@ -2322,6 +2322,10 @@ vect_analyze_data_ref_access (struct data_reference *dr)\n \n   if (nested_in_vect_loop_p (loop, stmt))\n     {\n+      /* Interleaved accesses are not yet supported within outer-loop\n+        vectorization for references in the inner-loop.  */\n+      DR_GROUP_FIRST_DR (vinfo_for_stmt (stmt)) = NULL_TREE;\n+\n       /* For the rest of the analysis we use the outer-loop step.  */\n       step = STMT_VINFO_DR_STEP (stmt_info);\n       dr_step = TREE_INT_CST_LOW (step);"}]}