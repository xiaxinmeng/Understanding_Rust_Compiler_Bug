{"sha": "04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRiMzkxYzE2NGJjYTlhOGEzMzJkNWE1YjhlM2VlOGNmODYyMjRiOQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2012-04-15T17:07:30Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2012-04-15T17:07:30Z"}, "message": "re PR c++/52818 (printf format %lf is erroneously rejected by C++11)\n\n\tPR c++/52818\n\t* c-format.c (CPLUSPLUS_STD_VER): C++11 inherits from C99.\n\t(C_STD_NAME): Distinguish between C++98 and C++11.\n\nFrom-SVN: r186468", "tree": {"sha": "4a2774c3a084439cf23480106d39252af28343d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a2774c3a084439cf23480106d39252af28343d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "79617d7e2e4e868da8bca85ea3d6d61ad1e89e4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79617d7e2e4e868da8bca85ea3d6d61ad1e89e4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79617d7e2e4e868da8bca85ea3d6d61ad1e89e4c"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "98e496a9034b479bb54132f633f8a167af936fe3", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "patch": "@@ -1,3 +1,9 @@\n+2012-04-15  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/52818\n+\t* c-format.c (CPLUSPLUS_STD_VER): C++11 inherits from C99.\n+\t(C_STD_NAME): Distinguish between C++98 and C++11.\n+\n 2012-04-11  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR target/52624"}, {"sha": "b9674925204ab08382281788050b98a33a09a8e3", "filename": "gcc/c-family/c-format.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Fc-family%2Fc-format.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Fc-family%2Fc-format.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-format.c?ref=04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "patch": "@@ -334,7 +334,7 @@ decode_format_attr (tree args, function_format_info *info, int validated_p)\n \n /* The C standard version C++ is treated as equivalent to\n    or inheriting from, for the purpose of format features supported.  */\n-#define CPLUSPLUS_STD_VER\tSTD_C94\n+#define CPLUSPLUS_STD_VER\t(cxx_dialect < cxx11 ? STD_C94 : STD_C99)\n /* The C standard version we are checking formats against when pedantic.  */\n #define C_STD_VER\t\t((int) (c_dialect_cxx ()\t\t   \\\n \t\t\t\t ? CPLUSPLUS_STD_VER\t\t\t   \\\n@@ -345,7 +345,8 @@ decode_format_attr (tree args, function_format_info *info, int validated_p)\n    pedantic.  FEATURE_VER is the version in which the feature warned out\n    appeared, which is higher than C_STD_VER.  */\n #define C_STD_NAME(FEATURE_VER) (c_dialect_cxx ()\t\t\\\n-\t\t\t\t ? \"ISO C++\"\t\t\t\\\n+\t\t\t\t ? (cxx_dialect < cxx11 ? \"ISO C++98\" \\\n+\t\t\t\t    : \"ISO C++11\")\t\t\\\n \t\t\t\t : ((FEATURE_VER) == STD_EXT\t\\\n \t\t\t\t    ? \"ISO C\"\t\t\t\\\n \t\t\t\t    : \"ISO C90\"))"}, {"sha": "83af0658f009a2e59b2a27c6eb7be0c4fe30acab", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "patch": "@@ -1,3 +1,8 @@\n+2012-04-15  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/52818\n+\t* g++.dg/warn/format8.C: New.\n+\n 2012-04-15  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/51082"}, {"sha": "ffceb797a7dc93473e25e2c8d12681320c86e91b", "filename": "gcc/testsuite/g++.dg/warn/format8.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fformat8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b391c164bca9a8a332d5a5b8e3ee8cf86224b9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fformat8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fformat8.C?ref=04b391c164bca9a8a332d5a5b8e3ee8cf86224b9", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/52818\n+// { dg-options \"-pedantic-errors -Wformat\" }\n+\n+extern \"C\" int printf (const char *, ...);\n+void f() {\n+  printf(\"%lf\", 0.0);\t\t// { dg-warning \"%lf\" \"\" { target c++98 } }\n+}"}]}