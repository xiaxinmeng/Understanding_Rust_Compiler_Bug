{"sha": "3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RlZWIzZmYwM2IwZGYyODEyYTAwZDY3MTNkNGQwMjZmMGYyZWE3ZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2009-07-14T18:15:49Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2009-07-14T18:15:49Z"}, "message": "name-lookup.c (qualified_lookup_using_namespace): Don't stop looking in used namespaces just because we found something on...\n\n\t* name-lookup.c (qualified_lookup_using_namespace): Don't stop\n\tlooking in used namespaces just because we found something on\n\tanother branch.\n\nFrom-SVN: r149637", "tree": {"sha": "e3968f63e2c63207ce51e4af6d21f6a9ac4b5833", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3968f63e2c63207ce51e4af6d21f6a9ac4b5833"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4e6a97250c769588c57079976c4299b2814d6310", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e6a97250c769588c57079976c4299b2814d6310", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e6a97250c769588c57079976c4299b2814d6310"}], "stats": {"total": 38, "additions": 32, "deletions": 6}, "files": [{"sha": "d43341b8f6e95aa2a9660a227451f76e90cc7de1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "patch": "@@ -1,5 +1,10 @@\n 2009-07-14  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/40746\n+\t* name-lookup.c (qualified_lookup_using_namespace): Don't stop\n+\tlooking in used namespaces just because we found something on\n+\tanother branch.\n+\n \tPR c++/40740\n \t* semantics.c (perform_koenig_lookup): Handle empty template args.\n "}, {"sha": "7a8016ffa0bb9d1000ab2e07189fe384db0e81b0", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "patch": "@@ -3929,6 +3929,7 @@ qualified_lookup_using_namespace (tree name, tree scope,\n   /* ... and a list of namespace yet to see.  */\n   tree todo = NULL_TREE;\n   tree todo_maybe = NULL_TREE;\n+  tree *todo_weak = &todo_maybe;\n   tree usings;\n   timevar_push (TV_NAME_LOOKUP);\n   /* Look through namespace aliases.  */\n@@ -3942,9 +3943,7 @@ qualified_lookup_using_namespace (tree name, tree scope,\n \tambiguous_decl (result, binding, flags);\n \n       /* Consider strong using directives always, and non-strong ones\n-\t if we haven't found a binding yet.  ??? Shouldn't we consider\n-\t non-strong ones if the initial RESULT is non-NULL, but the\n-\t binding in the given namespace is?  */\n+\t if we haven't found a binding yet.  */\n       for (usings = DECL_NAMESPACE_USING (scope); usings;\n \t   usings = TREE_CHAIN (usings))\n \t/* If this was a real directive, and we have not seen it.  */\n@@ -3959,12 +3958,12 @@ qualified_lookup_using_namespace (tree name, tree scope,\n \t\t&& !purpose_member (TREE_PURPOSE (usings), seen)\n \t\t&& !purpose_member (TREE_PURPOSE (usings), todo))\n \t      todo = tree_cons (TREE_PURPOSE (usings), NULL_TREE, todo);\n-\t    else if ((!result->value && !result->type)\n+\t    else if (!binding\n \t\t     && !purpose_member (TREE_PURPOSE (usings), seen)\n \t\t     && !purpose_member (TREE_PURPOSE (usings), todo)\n \t\t     && !purpose_member (TREE_PURPOSE (usings), todo_maybe))\n-\t      todo_maybe = tree_cons (TREE_PURPOSE (usings), NULL_TREE,\n-\t\t\t\t      todo_maybe);\n+\t      *todo_weak = tree_cons (TREE_PURPOSE (usings), NULL_TREE,\n+\t\t\t\t      *todo_weak);\n \t  }\n       if (todo)\n \t{\n@@ -3977,6 +3976,7 @@ qualified_lookup_using_namespace (tree name, tree scope,\n \t  scope = TREE_PURPOSE (todo_maybe);\n \t  todo = TREE_CHAIN (todo_maybe);\n \t  todo_maybe = NULL_TREE;\n+\t  todo_weak = &todo;\n \t}\n       else\n \tscope = NULL_TREE; /* If there never was a todo list.  */"}, {"sha": "1fa70edf74d9f7648ec78cbd578dde87ad484425", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "patch": "@@ -1,5 +1,8 @@\n 2009-07-14  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/40746\n+\t* g++.dg/lookup/using20.C: New.\n+\n \tPR c++/40740\n \t* g++.dg/template/koenig8.C: New.\n "}, {"sha": "dc1d293a2ee4add147796689cb2673b5e3a70451", "filename": "gcc/testsuite/g++.dg/lookup/using20.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing20.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing20.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing20.C?ref=3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/40476\n+\n+namespace A\n+{\n+  int i;\t\t\t// { dg-error \"i\" }\n+}\n+using namespace A;\n+namespace B\n+{\n+  namespace B2\n+  {\n+    int i;\t\t\t// { dg-error \"i\" }\n+  }\n+  using namespace B2;\n+}\n+using namespace B;\n+\n+int j = ::i;\t\t\t// { dg-error \"ambiguous\" }"}]}