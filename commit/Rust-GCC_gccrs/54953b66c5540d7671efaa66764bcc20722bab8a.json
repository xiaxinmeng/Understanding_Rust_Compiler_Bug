{"sha": "54953b66c5540d7671efaa66764bcc20722bab8a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ5NTNiNjZjNTU0MGQ3NjcxZWZhYTY2NzY0YmNjMjA3MjJiYWI4YQ==", "commit": {"author": {"name": "Ulrich Drepper", "email": "drepper@cygnus.com", "date": "1998-12-07T23:40:19Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-12-07T23:40:19Z"}, "message": "configure.in: Test for availability of putc_unlocked, fputc_unlocked, and fputs_unlocked.\n\n        * configure.in: Test for availability of putc_unlocked, fputc_unlocked,\n        and fputs_unlocked.\n        * configure: Rebuilt.\n        * system.h: If the *_unlocked functions are available use them\n        instead of the locked counterparts by defining macros.\n        * config.in: Regenerated.\n\nFrom-SVN: r24175", "tree": {"sha": "92ea63ec5cc5860eecb13fd72d51074de7032172", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/92ea63ec5cc5860eecb13fd72d51074de7032172"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54953b66c5540d7671efaa66764bcc20722bab8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54953b66c5540d7671efaa66764bcc20722bab8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54953b66c5540d7671efaa66764bcc20722bab8a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54953b66c5540d7671efaa66764bcc20722bab8a/comments", "author": null, "committer": null, "parents": [{"sha": "872936ad0b64f529c953e86d1be1928cc29b902e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/872936ad0b64f529c953e86d1be1928cc29b902e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/872936ad0b64f529c953e86d1be1928cc29b902e"}], "stats": {"total": 122, "additions": 80, "deletions": 42}, "files": [{"sha": "6d57da9b17c1891cca277643bc4b0dc6a0a7bc32", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=54953b66c5540d7671efaa66764bcc20722bab8a", "patch": "@@ -1,3 +1,12 @@\n+1998-12-08  Ulrich Drepper  <drepper@cygnus.com>\n+\n+\t* configure.in: Test for availability of putc_unlocked, fputc_unlocked,\n+\tand fputs_unlocked.\n+\t* configure: Rebuilt.\n+\t* system.h: If the *_unlocked functions are available use them\n+\tinstead of the locked counterparts by defining macros.\n+\t* config.in: Regenerated.\n+\n Tue Dec  8 00:34:05 1998  Mike Stump  <mrs@wrs.com>\n \n \t* i386/bsd.h (ASM_FILE_START): Don't use dump_base_name, it is"}, {"sha": "13f077216aa6afe6941fb25e2cc8c334a69c1698", "filename": "gcc/config.in", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=54953b66c5540d7671efaa66764bcc20722bab8a", "patch": "@@ -140,6 +140,12 @@\n /* Define if you have the bzero function.  */\n #undef HAVE_BZERO\n \n+/* Define if you have the fputc_unlocked function.  */\n+#undef HAVE_FPUTC_UNLOCKED\n+\n+/* Define if you have the fputs_unlocked function.  */\n+#undef HAVE_FPUTS_UNLOCKED\n+\n /* Define if you have the getrlimit function.  */\n #undef HAVE_GETRLIMIT\n \n@@ -158,6 +164,9 @@\n /* Define if you have the popen function.  */\n #undef HAVE_POPEN\n \n+/* Define if you have the putc_unlocked function.  */\n+#undef HAVE_PUTC_UNLOCKED\n+\n /* Define if you have the putenv function.  */\n #undef HAVE_PUTENV\n "}, {"sha": "1208d59c96cde64e6986f2a5920e8a9efb2545b4", "filename": "gcc/configure", "status": "modified", "additions": 45, "deletions": 41, "changes": 86, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=54953b66c5540d7671efaa66764bcc20722bab8a", "patch": "@@ -2045,15 +2045,16 @@ fi\n \n for ac_func in strtoul bsearch strerror putenv popen bcopy bzero bcmp \\\n \tindex rindex strchr strrchr kill getrlimit setrlimit atoll atoq \\\n-\tsysconf isascii gettimeofday strsignal\n+\tsysconf isascii gettimeofday strsignal putc_unlocked fputc_unlocked \\\n+\tfputs_unlocked\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2052: checking for $ac_func\" >&5\n+echo \"configure:2053: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2057 \"configure\"\n+#line 2058 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2076,7 +2077,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2080: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2081: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2105,12 +2106,12 @@ done\n #AC_CHECK_TYPE(wchar_t, unsigned int)\n \n echo $ac_n \"checking for vprintf\"\"... $ac_c\" 1>&6\n-echo \"configure:2109: checking for vprintf\" >&5\n+echo \"configure:2110: checking for vprintf\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vprintf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2114 \"configure\"\n+#line 2115 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vprintf(); below.  */\n@@ -2133,7 +2134,7 @@ vprintf();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2137: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2138: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vprintf=yes\"\n else\n@@ -2157,12 +2158,12 @@ fi\n \n if test \"$ac_cv_func_vprintf\" != yes; then\n echo $ac_n \"checking for _doprnt\"\"... $ac_c\" 1>&6\n-echo \"configure:2161: checking for _doprnt\" >&5\n+echo \"configure:2162: checking for _doprnt\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func__doprnt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2166 \"configure\"\n+#line 2167 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char _doprnt(); below.  */\n@@ -2185,7 +2186,7 @@ _doprnt();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2189: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2190: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func__doprnt=yes\"\n else\n@@ -2221,15 +2222,15 @@ fi\n \n \n echo $ac_n \"checking whether the printf functions support %p\"\"... $ac_c\" 1>&6\n-echo \"configure:2225: checking whether the printf functions support %p\" >&5\n+echo \"configure:2226: checking whether the printf functions support %p\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_printf_ptr'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_printf_ptr=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2233 \"configure\"\n+#line 2234 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n \n@@ -2242,7 +2243,7 @@ main()\n   exit (p != q);\n }\n EOF\n-if { (eval echo configure:2246: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2247: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_printf_ptr=yes\n else\n@@ -2266,12 +2267,12 @@ EOF\n fi\n \n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2270: checking for pid_t\" >&5\n+echo \"configure:2271: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2275 \"configure\"\n+#line 2276 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2300,17 +2301,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2304: checking for vfork.h\" >&5\n+echo \"configure:2305: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2309 \"configure\"\n+#line 2310 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2314: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2315: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2335,18 +2336,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2339: checking for working vfork\" >&5\n+echo \"configure:2340: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2345: checking for vfork\" >&5\n+echo \"configure:2346: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2350 \"configure\"\n+#line 2351 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2369,7 +2370,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2373: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2374: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2391,7 +2392,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2395 \"configure\"\n+#line 2396 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2486,7 +2487,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2490: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2491: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2514,12 +2515,12 @@ for ac_func in malloc realloc calloc free bcopy bzero bcmp \\\n \tstrsignal\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2518: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2519: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2523 \"configure\"\n+#line 2524 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2552,7 +2553,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2556: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2557: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2581,12 +2582,12 @@ done\n for ac_func in getrlimit setrlimit\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2585: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2586: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2590 \"configure\"\n+#line 2591 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2623,7 +2624,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2627: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2628: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2650,12 +2651,12 @@ done\n \n \n echo $ac_n \"checking for sys_siglist declaration in signal.h or unistd.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2654: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n+echo \"configure:2655: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2659 \"configure\"\n+#line 2660 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <signal.h>\n@@ -2667,7 +2668,7 @@ int main() {\n char *msg = *(sys_siglist + 1);\n ; return 0; }\n EOF\n-if { (eval echo configure:2671: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2672: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_decl_sys_siglist=yes\n else\n@@ -3002,9 +3003,9 @@ for machine in $build $host $target; do\n \t\ttmake_file=arm/t-bare\n \t\t;;\n         arm*-*-ecos-elf)\n-                tm_file=arm/ecos-elf.h\n-                tmake_file=arm/t-elf\n-                ;;\n+\t\ttm_file=arm/ecos-elf.h\n+\t\ttmake_file=arm/t-elf\n+\t\t;; \n \tarm*-*-elf)\n \t\ttm_file=arm/unknown-elf.h\n \t\ttmake_file=arm/t-arm-elf\n@@ -4476,10 +4477,13 @@ for machine in $build $host $target; do\n \t\tfixincludes=fixinc.wrap\n \t\ttmake_file=t-netbsd\n \t\t;;\n-\tmipsel-*-linux*)\t\t\t# Little endian Linux MIPS\n+       mips*-*-linux*)                         # Linux MIPS, either endian.\n \t\txmake_file=x-linux\n \t\txm_file=\"xm-siglist.h ${xm_file}\"\n-\t\ttm_file=\"mips/elfl.h mips/linux.h\"\n+               case $machine in\n+                       mipsel-*)  tm_file=\"mips/elfl.h mips/linux.h\" ;;\n+                       *)         tm_file=\"mips/elf.h mips/linux.h\" ;;\n+               esac\n \t\textra_parts=\"crtbegin.o crtend.o\"\n \t\tgnu_ld=yes\n \t\tgas=yes\n@@ -5908,7 +5912,7 @@ fi\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:5908: checking assembler alignment features\" >&5\n+echo \"configure:5916: checking assembler alignment features\" >&5\n gcc_cv_as=\n gcc_cv_as_alignment_features=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n@@ -5981,7 +5985,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:5981: checking assembler subsection support\" >&5\n+echo \"configure:5989: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=\n if test x$gcc_cv_as != x; then\n \t# Check if we have .subsection\n@@ -6253,7 +6257,7 @@ fi\n \n # Warn if using init_priority.\n echo $ac_n \"checking whether to enable init_priority by default\"\"... $ac_c\" 1>&6\n-echo \"configure:6253: checking whether to enable init_priority by default\" >&5\n+echo \"configure:6261: checking whether to enable init_priority by default\" >&5\n if test x$enable_init_priority != xyes; then\n   enable_init_priority=no\n fi"}, {"sha": "d8ec9f1b040d74014671195033c0bb2c4c539f5e", "filename": "gcc/configure.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=54953b66c5540d7671efaa66764bcc20722bab8a", "patch": "@@ -371,7 +371,8 @@ fi\n \n AC_CHECK_FUNCS(strtoul bsearch strerror putenv popen bcopy bzero bcmp \\\n \tindex rindex strchr strrchr kill getrlimit setrlimit atoll atoq \\\n-\tsysconf isascii gettimeofday strsignal)\n+\tsysconf isascii gettimeofday strsignal putc_unlocked fputc_unlocked \\\n+\tfputs_unlocked)\n \n # Make sure wchar_t is available\n #AC_CHECK_TYPE(wchar_t, unsigned int)"}, {"sha": "daa47eb1bbd7b5d467c0185218aa41154b8c2256", "filename": "gcc/system.h", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54953b66c5540d7671efaa66764bcc20722bab8a/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=54953b66c5540d7671efaa66764bcc20722bab8a", "patch": "@@ -21,6 +21,21 @@\n #define NULL 0\n #endif\n \n+/* The compiler is not a multi-threaded application and therefore we\n+   do not have to use the locking functions.  */\n+#ifdef HAVE_PUTC_UNLOCKED\n+# undef putc\n+# define putc(C, Stream) putc_unlocked (C, Stream)\n+#endif\n+#ifdef HAVE_FPUTC_UNLOCKED\n+# undef fputc\n+# define fputc(C, Stream) fputc_unlocked (C, Stream)\n+#endif\n+#ifdef HAVE_FPUTS_UNLOCKED\n+# undef fputs\n+# define fputs(String, Stream) fputs_unlocked (String, Stream)\n+#endif\n+\n #include <ctype.h>\n \n /* Jim Meyering writes:"}]}