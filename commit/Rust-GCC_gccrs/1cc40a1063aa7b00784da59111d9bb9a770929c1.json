{"sha": "1cc40a1063aa7b00784da59111d9bb9a770929c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWNjNDBhMTA2M2FhN2IwMDc4NGRhNTkxMTFkOWJiOWE3NzA5MjljMQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2007-09-26T10:46:43Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-09-26T10:46:43Z"}, "message": "sem_warn.adb (Check_References): Catch more cases of unreferenced packages.\n\n2007-09-26  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_warn.adb (Check_References): Catch more cases of unreferenced\n\tpackages.\n\nFrom-SVN: r128805", "tree": {"sha": "831c62413daa29b6c04ccb0ae93731c5a423c13d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/831c62413daa29b6c04ccb0ae93731c5a423c13d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1cc40a1063aa7b00784da59111d9bb9a770929c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cc40a1063aa7b00784da59111d9bb9a770929c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cc40a1063aa7b00784da59111d9bb9a770929c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cc40a1063aa7b00784da59111d9bb9a770929c1/comments", "author": null, "committer": null, "parents": [{"sha": "e65f50ec35d3a47891a5dc5ddc06db239139e399", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e65f50ec35d3a47891a5dc5ddc06db239139e399", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e65f50ec35d3a47891a5dc5ddc06db239139e399"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "3faf9cb09d6ec6761f2d10203768ca5fbebf5398", "filename": "gcc/ada/sem_warn.adb", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cc40a1063aa7b00784da59111d9bb9a770929c1/gcc%2Fada%2Fsem_warn.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cc40a1063aa7b00784da59111d9bb9a770929c1/gcc%2Fada%2Fsem_warn.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_warn.adb?ref=1cc40a1063aa7b00784da59111d9bb9a770929c1", "patch": "@@ -1140,14 +1140,21 @@ package body Sem_Warn is\n                          Ekind (E1) = E_Named_Real\n                            or else\n                          Is_Overloadable (E1)\n+\n+                           --  Package case, if the main unit is a package\n+                           --  spec or generic package spec, then there may\n+                           --  be a corresponding body that references this\n+                           --  package in some other file. Otherwise we can\n+                           --  be sure that there is no other reference.\n+\n                            or else\n                              (Ekind (E1) = E_Package\n-                               and then\n-                                (Ekind (E) = E_Function\n-                                  or else Ekind (E) = E_Package_Body\n-                                  or else Ekind (E) = E_Procedure\n-                                  or else Ekind (E) = E_Subprogram_Body\n-                                  or else Ekind (E) = E_Block)))\n+                                and then\n+                                  Ekind (Cunit_Entity (Current_Sem_Unit)) /=\n+                                                          E_Package\n+                                and then\n+                                  Ekind (Cunit_Entity (Current_Sem_Unit)) /=\n+                                                          E_Generic_Package))\n \n                --  Exclude instantiations, since there is no reason why every\n                --  entity in an instantiation should be referenced."}]}