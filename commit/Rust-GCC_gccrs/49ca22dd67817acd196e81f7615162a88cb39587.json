{"sha": "49ca22dd67817acd196e81f7615162a88cb39587", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDljYTIyZGQ2NzgxN2FjZDE5NmU4MWY3NjE1MTYyYTg4Y2IzOTU4Nw==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-12-01T16:33:35Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-12-02T07:21:25Z"}, "message": "diagnostics: ignore -fmax-errors for ICE\n\nRight now I see:\n./xgcc -B. ~/Programming/testcases/json.i -c -O2 -fmax-errors=1\n/home/marxin/Programming/testcases/json.i: In function \u2018json_variant_type\u2019:\n/home/marxin/Programming/testcases/json.i:22:1: error: non-integral type switch statement\n   22 | }\n      | ^\nint *\nswitch (v_2(D)) <default: <L16> [INV], case 0B: <L11> [INV], case 5B: <L12> [INV], case 6B: <L13> [INV], case 7B: <L14> [INV], case 8B: <L15> [INV]>\ncompilation terminated due to -fmax-errors=1.\n\nwith the patch I get:\n\n./xgcc -B. ~/Programming/testcases/json.i -c -O2 -fmax-errors=1 -c\n/home/marxin/Programming/testcases/json.i: In function \u2018json_variant_type\u2019:\n/home/marxin/Programming/testcases/json.i:22:1: error: non-integral type switch statement\n   22 | }\n      | ^\nint *\nswitch (v_2(D)) <default: <L16> [INV], case 0B: <L11> [INV], case 5B: <L12> [INV], case 6B: <L13> [INV], case 7B: <L14> [INV], case 8B: <L15> [INV]>\nduring GIMPLE pass: iftoswitch\n/home/marxin/Programming/testcases/json.i:22:1: internal compiler error: verify_gimple failed\n0xe4478c verify_gimple_in_cfg(function*, bool)\n\t/home/marxin/Programming/gcc/gcc/tree-cfg.c:5467\n0xd201cf execute_function_todo\n\t/home/marxin/Programming/gcc/gcc/passes.c:2042\n0xd2101c do_per_function\n\t/home/marxin/Programming/gcc/gcc/passes.c:1687\n0xd2101c execute_todo\n\t/home/marxin/Programming/gcc/gcc/passes.c:2096\nPlease submit a full bug report,\nwith preprocessed source if appropriate.\nPlease include the complete backtrace with any bug report.\nSee <https://gcc.gnu.org/bugs/> for instructions.\n\ngcc/ChangeLog:\n\n\t* diagnostic.c (diagnostic_report_diagnostic): ICE causes to\n\tterminate compiler immediately, so I guess it should be printed\n\talways.", "tree": {"sha": "d803acc97f894956c58c3f9320dc61a70760a25c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d803acc97f894956c58c3f9320dc61a70760a25c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49ca22dd67817acd196e81f7615162a88cb39587", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49ca22dd67817acd196e81f7615162a88cb39587", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49ca22dd67817acd196e81f7615162a88cb39587", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49ca22dd67817acd196e81f7615162a88cb39587/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c961e94901eb793b1a18d431a1acf7f682eaf04f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c961e94901eb793b1a18d431a1acf7f682eaf04f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c961e94901eb793b1a18d431a1acf7f682eaf04f"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "da20cdb27039cdae147ba035b03d7456b96f63c7", "filename": "gcc/diagnostic.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49ca22dd67817acd196e81f7615162a88cb39587/gcc%2Fdiagnostic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49ca22dd67817acd196e81f7615162a88cb39587/gcc%2Fdiagnostic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.c?ref=49ca22dd67817acd196e81f7615162a88cb39587", "patch": "@@ -1172,7 +1172,7 @@ diagnostic_report_diagnostic (diagnostic_context *context,\n \treturn false;\n     }\n \n-  if (diagnostic->kind != DK_NOTE)\n+  if (diagnostic->kind != DK_NOTE && diagnostic->kind != DK_ICE)\n     diagnostic_check_max_errors (context);\n \n   context->lock++;"}]}