{"sha": "bc5581fe327388fea5af875c028ccb8cfb0b6a1c", "node_id": "C_kwDOANBUbNoAKGJjNTU4MWZlMzI3Mzg4ZmVhNWFmODc1YzAyOGNjYjhjZmIwYjZhMWM", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@gmail.com", "date": "2023-02-01T11:02:17Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@gmail.com", "date": "2023-02-13T09:35:15Z"}, "message": "arc: Don't use millicode thunks unless asked for.\n\nARC has enter_s/leave_s instructions which can save/restore the entire\nfunction context. It is not needed the millicode thunks anylonger when\ncompiling for size, thus, make their usage optional.\n\ngcc/\n\n\t* common/config/arc/arc-common.cc (arc_option_optimization_table):\n\tRemove millicode from list.\n\ngcc/testsuite/\n\n\t* gcc.target/arc/milli-1.c: Update test.", "tree": {"sha": "7475ea09578601df921a0f4f5e9363f379316b8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7475ea09578601df921a0f4f5e9363f379316b8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc5581fe327388fea5af875c028ccb8cfb0b6a1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc5581fe327388fea5af875c028ccb8cfb0b6a1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc5581fe327388fea5af875c028ccb8cfb0b6a1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc5581fe327388fea5af875c028ccb8cfb0b6a1c/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9847c7531e8cab740264ac32e752e825c66f23e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9847c7531e8cab740264ac32e752e825c66f23e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9847c7531e8cab740264ac32e752e825c66f23e0"}], "stats": {"total": 3, "additions": 1, "deletions": 2}, "files": [{"sha": "95f5dd6120110ea6d9e76b8766275848ca5185cf", "filename": "gcc/common/config/arc/arc-common.cc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc5581fe327388fea5af875c028ccb8cfb0b6a1c/gcc%2Fcommon%2Fconfig%2Farc%2Farc-common.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc5581fe327388fea5af875c028ccb8cfb0b6a1c/gcc%2Fcommon%2Fconfig%2Farc%2Farc-common.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Farc%2Farc-common.cc?ref=bc5581fe327388fea5af875c028ccb8cfb0b6a1c", "patch": "@@ -54,7 +54,6 @@ static const struct default_options arc_option_optimization_table[] =\n     { OPT_LEVELS_SIZE, OPT_fsection_anchors, NULL, 1 },\n     { OPT_LEVELS_SIZE, OPT_mcase_vector_pcrel, NULL, 1 },\n     { OPT_LEVELS_SIZE, OPT_msize_level_, NULL, 3 },\n-    { OPT_LEVELS_SIZE, OPT_mmillicode, NULL, 1 },\n     { OPT_LEVELS_SIZE, OPT_fif_conversion, NULL, 0 },\n     { OPT_LEVELS_1_PLUS, OPT_fomit_frame_pointer, NULL, 1 },\n     { OPT_LEVELS_3_PLUS_SPEED_ONLY, OPT_msize_level_, NULL, 0 },"}, {"sha": "5fba064ca6632831725d4c1374b1787c324d5fae", "filename": "gcc/testsuite/gcc.target/arc/milli-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc5581fe327388fea5af875c028ccb8cfb0b6a1c/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fmilli-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc5581fe327388fea5af875c028ccb8cfb0b6a1c/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fmilli-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fmilli-1.c?ref=bc5581fe327388fea5af875c028ccb8cfb0b6a1c", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-Os\" } */\n+/* { dg-options \"-Os -mmillicode\" } */\n \n /* Test if we restore correctly blink when using millicode.  */\n extern void bar (void);"}]}