{"sha": "fa71a5c3eb2243e5f94dd593966693a36470f35d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE3MWE1YzNlYjIyNDNlNWY5NGRkNTkzOTY2NjkzYTM2NDcwZjM1ZA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2004-09-17T22:58:40Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2004-09-17T22:58:40Z"}, "message": "inclhack.def (linux_ia64_ucontext): New fix.\n\n\n\t* inclhack.def (linux_ia64_ucontext): New fix.\n\t* fixincl.x: Regenerate.\n\t* tests/base/sys/ucontext.h: New file.\n\nFrom-SVN: r87677", "tree": {"sha": "3893f30ae520b23d1e5c6755e4cc1cbc3f5f3ef9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3893f30ae520b23d1e5c6755e4cc1cbc3f5f3ef9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa71a5c3eb2243e5f94dd593966693a36470f35d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa71a5c3eb2243e5f94dd593966693a36470f35d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa71a5c3eb2243e5f94dd593966693a36470f35d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa71a5c3eb2243e5f94dd593966693a36470f35d/comments", "author": null, "committer": null, "parents": [{"sha": "6e3363336bc0669518e7b5d5b94adf7d929ff331", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e3363336bc0669518e7b5d5b94adf7d929ff331", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e3363336bc0669518e7b5d5b94adf7d929ff331"}], "stats": {"total": 92, "additions": 87, "deletions": 5}, "files": [{"sha": "e710647bfe4958f0600cc2519359d86f7e31f03d", "filename": "fixincludes/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2FChangeLog?ref=fa71a5c3eb2243e5f94dd593966693a36470f35d", "patch": "@@ -1,3 +1,9 @@\n+2004-09-17  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* inclhack.def (linux_ia64_ucontext): New fix.\n+\t* fixincl.x: Regenerate.\n+\t* tests/base/sys/ucontext.h: New file.\n+\n 2004-09-15  Roger Sayle  <roger@eyesopen.com>\n \n \t* tests/base/sys/time.h: Correct mismatch in 2004-09-10 check-in."}, {"sha": "f6d1300aa58e5eabc0d934cc66e6ad3625cef4c6", "filename": "fixincludes/fixincl.x", "status": "modified", "additions": 48, "deletions": 5, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ffixincl.x?ref=fa71a5c3eb2243e5f94dd593966693a36470f35d", "patch": "@@ -2,11 +2,11 @@\n  * \n  * DO NOT EDIT THIS FILE   (fixincl.x)\n  * \n- * It has been AutoGen-ed  Monday September 13, 2004 at 09:38:32 PM CDT\n+ * It has been AutoGen-ed  Saturday September 18, 2004 at 10:59:03 AM MDT\n  * From the definitions    inclhack.def\n  * and the template file   fixincl\n  */\n-/* DO NOT CVS-MERGE THIS FILE, EITHER Mon Sep 13 21:38:32 CDT 2004\n+/* DO NOT CVS-MERGE THIS FILE, EITHER Sat Sep 18 10:59:03 MDT 2004\n  *\n  * You must regenerate it.  Use the ./genfixes script.\n  *\n@@ -15,7 +15,7 @@\n  * certain ANSI-incompatible system header files which are fixed to work\n  * correctly with ANSI C and placed in a directory that GNU C will search.\n  *\n- * This file contains 178 fixup descriptions.\n+ * This file contains 179 fixup descriptions.\n  *\n  * See README for more information.\n  *\n@@ -3368,6 +3368,43 @@ static const char* apzLimits_IfndefsPatch[] = {\n #endif\",\n     (char*)NULL };\n \n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Linux_Ia64_Ucontext fix\n+ */\n+tSCC zLinux_Ia64_UcontextName[] =\n+     \"linux_ia64_ucontext\";\n+\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zLinux_Ia64_UcontextList[] =\n+  \"|sys/ucontext.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+tSCC* apzLinux_Ia64_UcontextMachs[] = {\n+        \"ia64-*-linux*\",\n+        (const char*)NULL };\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zLinux_Ia64_UcontextSelect0[] =\n+       \"\\\\(\\\\(\\\\(char \\\\*\\\\) &\\\\(\\\\(struct sigcontext \\\\*\\\\) 0\\\\)->sc_gr\\\\[0\\\\]\\\\) - \\\\(char \\\\*\\\\) 0\\\\)\";\n+\n+#define    LINUX_IA64_UCONTEXT_TEST_CT  1\n+static tTestDesc aLinux_Ia64_UcontextTests[] = {\n+  { TT_EGREP,    zLinux_Ia64_UcontextSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Linux_Ia64_Ucontext\n+ */\n+static const char* apzLinux_Ia64_UcontextPatch[] = {\n+    \"format\",\n+    \"__builtin_offsetof (struct sigcontext, sc_gr[0])\",\n+    (char*)NULL };\n+\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Lynxos_No_Warning_In_Sys_Time_H fix\n@@ -7065,9 +7102,9 @@ static const char* apzX11_SprintfPatch[] = {\n  *\n  *  List of all fixes\n  */\n-#define REGEX_COUNT          201\n+#define REGEX_COUNT          202\n #define MACH_LIST_SIZE_LIMIT 261\n-#define FIX_COUNT            178\n+#define FIX_COUNT            179\n \n /*\n  *  Enumerate the fixes\n@@ -7155,6 +7192,7 @@ typedef enum {\n     LIBC1_G_VA_LIST_FIXIDX,\n     LIBC1_IFDEFD_MEMX_FIXIDX,\n     LIMITS_IFNDEFS_FIXIDX,\n+    LINUX_IA64_UCONTEXT_FIXIDX,\n     LYNXOS_NO_WARNING_IN_SYS_TIME_H_FIXIDX,\n     LYNXOS_MISSING_PUTENV_FIXIDX,\n     MACHINE_ANSI_H_VA_LIST_FIXIDX,\n@@ -7664,6 +7702,11 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      LIMITS_IFNDEFS_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aLimits_IfndefsTests,   apzLimits_IfndefsPatch, 0 },\n \n+  {  zLinux_Ia64_UcontextName,    zLinux_Ia64_UcontextList,\n+     apzLinux_Ia64_UcontextMachs,\n+     LINUX_IA64_UCONTEXT_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n+     aLinux_Ia64_UcontextTests,   apzLinux_Ia64_UcontextPatch, 0 },\n+\n   {  zLynxos_No_Warning_In_Sys_Time_HName,    zLynxos_No_Warning_In_Sys_Time_HList,\n      apzLynxos_No_Warning_In_Sys_Time_HMachs,\n      LYNXOS_NO_WARNING_IN_SYS_TIME_H_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,"}, {"sha": "38021c33957ccd6c95d41bdff8cc5eef2890a9de", "filename": "fixincludes/inclhack.def", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Finclhack.def?ref=fa71a5c3eb2243e5f94dd593966693a36470f35d", "patch": "@@ -1872,6 +1872,23 @@ fix = {\n };\n \n \n+/* The /usr/include/sys/ucontext.h on ia64-*linux-gnu systems defines\n+ * an _SC_GR0_OFFSET macro using an idiom that isn't a compile time\n+ * constant on recent versions of g++.\n+ */\n+fix = {\n+    hackname = linux_ia64_ucontext;\n+    files = \"sys/ucontext.h\";\n+    mach = \"ia64-*-linux*\";\n+    select = '\\(\\(\\(char \\*\\) &\\(\\(struct sigcontext \\*\\) 0\\)'\n+             '->sc_gr\\[0\\]\\) - \\(char \\*\\) 0\\)';\n+    c_fix = format;\n+    c_fix_arg = \"__builtin_offsetof \\(struct sigcontext, sc_gr[0]\\)\";\n+    test_text = \"# define _SC_GR0_OFFSET\\t\\\\\\\\\\n\"\n+\t\"\\t(((char *) &((struct sigcontext *) 0)->sc_gr[0]) - (char *) 0)\\n\";\n+};\n+\n+\n /*\n  * Apparently some SVR4 systems typedef longlong_t to long ?\n  */"}, {"sha": "6a873672d6ce7bb91ca1b01f5b6089ba74eb0b24", "filename": "fixincludes/tests/base/sys/ucontext.h", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2Ftests%2Fbase%2Fsys%2Fucontext.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa71a5c3eb2243e5f94dd593966693a36470f35d/fixincludes%2Ftests%2Fbase%2Fsys%2Fucontext.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fsys%2Fucontext.h?ref=fa71a5c3eb2243e5f94dd593966693a36470f35d", "patch": "@@ -0,0 +1,16 @@\n+/*  DO NOT EDIT THIS FILE.\n+\n+    It has been auto-edited by fixincludes from:\n+\n+\t\"fixinc/tests/inc/sys/ucontext.h\"\n+\n+    This had to be done to correct non-standard usages in the\n+    original, manufacturer supplied header file.  */\n+\n+\n+\n+#if defined( LINUX_IA64_UCONTEXT_CHECK )\n+# define _SC_GR0_OFFSET\t\\\n+\t__builtin_offsetof (struct sigcontext, sc_gr[0])\n+\n+#endif  /* LINUX_IA64_UCONTEXT_CHECK */"}]}