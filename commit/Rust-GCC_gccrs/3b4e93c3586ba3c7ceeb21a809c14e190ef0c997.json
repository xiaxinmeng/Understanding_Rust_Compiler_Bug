{"sha": "3b4e93c3586ba3c7ceeb21a809c14e190ef0c997", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I0ZTkzYzM1ODZiYTNjN2NlZWIyMWE4MDljMTRlMTkwZWYwYzk5Nw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2013-12-16T10:52:48Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-12-16T10:52:48Z"}, "message": "re PR ipa/59473 (ice in get_class_context with -O3)\n\n\n\tPR ipa/59473\n\t* ipa-devirt.c (get_class_context): Do not ICE when type is found\n\tat wrong offset.\n\nFrom-SVN: r206012", "tree": {"sha": "0cb8c61a80156dad8a2a1d1cbf4282a695a25f0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0cb8c61a80156dad8a2a1d1cbf4282a695a25f0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997/comments", "author": null, "committer": null, "parents": [{"sha": "e9792e1d9d3c06ad57313443f21663f4c6626340", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9792e1d9d3c06ad57313443f21663f4c6626340", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9792e1d9d3c06ad57313443f21663f4c6626340"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "32cce163e7bb89ff1a8797b0f9da60df64305861", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b4e93c3586ba3c7ceeb21a809c14e190ef0c997", "patch": "@@ -1,3 +1,9 @@\n+2013-12-14   Jan Hubicka  <jh@suse.cz>\n+\n+\tPR ipa/59473\n+\t* ipa-devirt.c (get_class_context): Do not ICE when type is found\n+\tat wrong offset.\n+\n 2013-12-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR libgomp/58756"}, {"sha": "f5b5926504c73ec0fcf7cfc3b736ac598e641c36", "filename": "gcc/ipa-devirt.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997/gcc%2Fipa-devirt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b4e93c3586ba3c7ceeb21a809c14e190ef0c997/gcc%2Fipa-devirt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-devirt.c?ref=3b4e93c3586ba3c7ceeb21a809c14e190ef0c997", "patch": "@@ -848,6 +848,10 @@ get_class_context (ipa_polymorphic_call_context *context,\n       if (TREE_CODE (type) == TREE_CODE (expected_type)\n \t  && types_same_for_odr (type, expected_type))\n \t{\n+\t  /* Type can not contain itself on an non-zero offset.  In that case\n+\t     just give up.  */\n+\t  if (offset != 0)\n+\t    goto give_up;\n \t  gcc_assert (offset == 0);\n \t  return true;\n \t}"}]}