{"sha": "74106ead26b17f3e68b73c6704632cbbbf762a5c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQxMDZlYWQyNmIxN2YzZTY4YjczYzY3MDQ2MzJjYmJiZjc2MmE1Yw==", "commit": {"author": {"name": "George Lander", "email": "george.lander@arm.com", "date": "2017-03-10T12:22:45Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2017-03-10T12:22:45Z"}, "message": "[libstdc++-v3] Fix detection of obsolete isnan\n\nlibstdc++-v3 configure checks whether old glibc inline definitions\nof isnan would conflict with the libstdc++-v3 definitions and\nworks around them if so.  But if g++ 6.x build A is used to build\nanother g++ 6.x B, the configure step for B will pick up the math.h\ninstalled alongside A instead of the glibc version.  configure will\nthen assume that the workaround isn't necessary, leaving B with a\nbroken cmath.\n\nisinf already worked around this.  This patch extends the same fix\nto isnan.  (Thanks to George for the fix.)\n\nlibstdc++-v3/\n2017-03-10  George Lander  <george.lander@arm.com>\n\n\t* acinclude.m4 (glibcxx_cv_obsolete_isnan): Define\n\t_GLIBCXX_INCLUDE_NEXT_C_HEADERS before including math.h.\n\t* configure: Regenerate.\n\nFrom-SVN: r246025", "tree": {"sha": "136a2a10cf6b54b45778457a25cce75815658367", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/136a2a10cf6b54b45778457a25cce75815658367"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74106ead26b17f3e68b73c6704632cbbbf762a5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74106ead26b17f3e68b73c6704632cbbbf762a5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74106ead26b17f3e68b73c6704632cbbbf762a5c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74106ead26b17f3e68b73c6704632cbbbf762a5c/comments", "author": {"login": "gwl-arm", "id": 15774719, "node_id": "MDQ6VXNlcjE1Nzc0NzE5", "avatar_url": "https://avatars.githubusercontent.com/u/15774719?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gwl-arm", "html_url": "https://github.com/gwl-arm", "followers_url": "https://api.github.com/users/gwl-arm/followers", "following_url": "https://api.github.com/users/gwl-arm/following{/other_user}", "gists_url": "https://api.github.com/users/gwl-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/gwl-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gwl-arm/subscriptions", "organizations_url": "https://api.github.com/users/gwl-arm/orgs", "repos_url": "https://api.github.com/users/gwl-arm/repos", "events_url": "https://api.github.com/users/gwl-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/gwl-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f1b0632aabe6473bf810b5e901d979a4570b7de5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1b0632aabe6473bf810b5e901d979a4570b7de5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1b0632aabe6473bf810b5e901d979a4570b7de5"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "d94f6d4831ecbc17fe90ff3e23f1b2549c74545c", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74106ead26b17f3e68b73c6704632cbbbf762a5c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74106ead26b17f3e68b73c6704632cbbbf762a5c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=74106ead26b17f3e68b73c6704632cbbbf762a5c", "patch": "@@ -1,3 +1,9 @@\n+2017-03-10  George Lander  <george.lander@arm.com>\n+\n+\t* acinclude.m4 (glibcxx_cv_obsolete_isnan): Define\n+\t_GLIBCXX_INCLUDE_NEXT_C_HEADERS before including math.h.\n+\t* configure: Regenerate.\n+\n 2017-03-09  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* include/std/functional (_Not_fn): Define macro to simplify"}, {"sha": "5998fe6fdeefa10c81467236d7a80e74bb6f9299", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74106ead26b17f3e68b73c6704632cbbbf762a5c/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74106ead26b17f3e68b73c6704632cbbbf762a5c/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=74106ead26b17f3e68b73c6704632cbbbf762a5c", "patch": "@@ -2297,7 +2297,8 @@ AC_DEFUN([GLIBCXX_CHECK_MATH11_PROTO], [\n       AC_MSG_CHECKING([for obsolete isnan function in <math.h>])\n         AC_CACHE_VAL(glibcxx_cv_obsolete_isnan, [\n           AC_COMPILE_IFELSE([AC_LANG_SOURCE(\n-            [#include <math.h>\n+            [#define _GLIBCXX_INCLUDE_NEXT_C_HEADERS\n+             #include <math.h>\n              #undef isnan\n              namespace std {\n                using ::isnan;"}, {"sha": "29456c4421e658e78f0c7c7782880a2cdc476829", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74106ead26b17f3e68b73c6704632cbbbf762a5c/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74106ead26b17f3e68b73c6704632cbbbf762a5c/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=74106ead26b17f3e68b73c6704632cbbbf762a5c", "patch": "@@ -18390,6 +18390,7 @@ else\n \n           cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n+#define _GLIBCXX_INCLUDE_NEXT_C_HEADERS\n #include <math.h>\n              #undef isnan\n              namespace std {"}]}