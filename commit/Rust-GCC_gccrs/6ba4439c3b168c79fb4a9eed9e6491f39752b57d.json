{"sha": "6ba4439c3b168c79fb4a9eed9e6491f39752b57d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJhNDQzOWMzYjE2OGM3OWZiNGE5ZWVkOWU2NDkxZjM5NzUyYjU3ZA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1997-12-18T19:26:14Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-12-18T19:26:14Z"}, "message": "pt.c (coerce_template_parms): Make sure to digest_init if possible.\n\n\t* pt.c (coerce_template_parms): Make sure to digest_init if\n\tpossible.\n\nFrom-SVN: r17138", "tree": {"sha": "711dc53420aab37361774850bf983dffb281e05d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/711dc53420aab37361774850bf983dffb281e05d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ba4439c3b168c79fb4a9eed9e6491f39752b57d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ba4439c3b168c79fb4a9eed9e6491f39752b57d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ba4439c3b168c79fb4a9eed9e6491f39752b57d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ba4439c3b168c79fb4a9eed9e6491f39752b57d/comments", "author": null, "committer": null, "parents": [{"sha": "337e2b6923fac20657d6ede9881439da3308c236", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/337e2b6923fac20657d6ede9881439da3308c236", "html_url": "https://github.com/Rust-GCC/gccrs/commit/337e2b6923fac20657d6ede9881439da3308c236"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "8899897a0f6287e10f0410c665c781b8db7720f1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ba4439c3b168c79fb4a9eed9e6491f39752b57d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ba4439c3b168c79fb4a9eed9e6491f39752b57d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6ba4439c3b168c79fb4a9eed9e6491f39752b57d", "patch": "@@ -1,5 +1,8 @@\n Thu Dec 18 14:51:50 1997  Mark Mitchell  <mmitchell@usa.net>\n \n+\t* pt.c (coerce_template_parms): Make sure to digest_init if\n+\tpossible.\n+\n \t* decl.c (duplicate_decls): Make the newdecl virtual if the\n \tolddecl was, just as is done with other attributes of olddecl.\n "}, {"sha": "9476d1286f83c49a5fb7f324dbf64e76f3c6c256", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ba4439c3b168c79fb4a9eed9e6491f39752b57d/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ba4439c3b168c79fb4a9eed9e6491f39752b57d/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=6ba4439c3b168c79fb4a9eed9e6491f39752b57d", "patch": "@@ -1079,7 +1079,10 @@ coerce_template_parms (parms, arglist, in_decl)\n \t  if (processing_template_decl)\n \t    val = maybe_fold_nontype_arg (arg);\n \t  else\n-\t    val = digest_init (t, arg, (tree *) 0);\n+\t    val = arg;\n+\n+\t  if (!uses_template_parms (val) && !uses_template_parms (t))\n+\t    val = digest_init (t, val, (tree *) 0);\n \n \t  if (val == error_mark_node \n \t      || (processing_template_decl && uses_template_parms (val)))"}]}