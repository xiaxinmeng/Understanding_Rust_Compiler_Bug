{"sha": "7a3c92a5968ea274e16e23a4eaa56a62ae94839f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2EzYzkyYTU5NjhlYTI3NGUxNmUyM2E0ZWFhNTZhNjJhZTk0ODM5Zg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1998-12-08T22:08:13Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1998-12-08T22:08:13Z"}, "message": "Fix bug found by i960 simulator testing.\n\n\t* i960/i960.h (CONST_COSTS, case CONST_INT): Accept power2_operand\n\tonly when OUTER_CODE is SET.\n\nFrom-SVN: r24199", "tree": {"sha": "aa31d5192cffe1803c8a8a2a0e73ee24385bd206", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa31d5192cffe1803c8a8a2a0e73ee24385bd206"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a3c92a5968ea274e16e23a4eaa56a62ae94839f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a3c92a5968ea274e16e23a4eaa56a62ae94839f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a3c92a5968ea274e16e23a4eaa56a62ae94839f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a3c92a5968ea274e16e23a4eaa56a62ae94839f/comments", "author": null, "committer": null, "parents": [{"sha": "31c24861989997f2820d77da7a2af88887f34708", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31c24861989997f2820d77da7a2af88887f34708", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31c24861989997f2820d77da7a2af88887f34708"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "3b587720ba8bb0cd7cfc67d5ffe2fd72a4fed191", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a3c92a5968ea274e16e23a4eaa56a62ae94839f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a3c92a5968ea274e16e23a4eaa56a62ae94839f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7a3c92a5968ea274e16e23a4eaa56a62ae94839f", "patch": "@@ -1,3 +1,8 @@\n+Tue Dec  8 22:04:33 1998  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* i960/i960.h (CONST_COSTS, case CONST_INT): Accept power2_operand\n+\tonly when OUTER_CODE is SET.\n+\n Tue Dec  8 22:47:15 1998  J\"orn Rennecke <amylaar@cygnus.co.uk>\n \n \t* loop.c (strength_reduce): If scan_start points to the loop exit"}, {"sha": "627dfb085f763331ce64f987ee418149e787cbb0", "filename": "gcc/config/i960/i960.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a3c92a5968ea274e16e23a4eaa56a62ae94839f/gcc%2Fconfig%2Fi960%2Fi960.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a3c92a5968ea274e16e23a4eaa56a62ae94839f/gcc%2Fconfig%2Fi960%2Fi960.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi960%2Fi960.h?ref=7a3c92a5968ea274e16e23a4eaa56a62ae94839f", "patch": "@@ -1190,10 +1190,14 @@ extern struct rtx_def *gen_compare_reg ();\n    that can be non-ldconst operands in rare cases are cost 1.  Other constants\n    have higher costs.  */\n \n+/* Must check for OUTER_CODE of SET for power2_operand, because\n+   reload_cse_move2add calls us with OUTER_CODE of PLUS to decide when\n+   to replace set with add.  */\n+\n #define CONST_COSTS(RTX, CODE, OUTER_CODE)\t\t\t\t\\\n   case CONST_INT:\t\t\t\t\t\t\t\\\n     if ((INTVAL (RTX) >= 0 && INTVAL (RTX) < 32)\t\t\t\\\n-\t|| power2_operand (RTX, VOIDmode))\t\t\t\t\\\n+\t|| (OUTER_CODE == SET && power2_operand (RTX, VOIDmode)))\t\\\n       return 0; \t\t\t\t\t\t\t\\\n     else if (INTVAL (RTX) >= -31 && INTVAL (RTX) < 0)\t\t\t\\\n       return 1;\t\t\t\t\t\t\t\t\\"}]}