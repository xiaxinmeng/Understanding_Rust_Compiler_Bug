{"sha": "e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTc4ZThhMGIxOWY5YmVjYzkwYTBiY2I0Njg0ZmI4M2VhZTEwNTMzZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-04-26T06:54:54Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-04-26T06:54:54Z"}, "message": "diagnostic.h (file_name_as_prefix): Add context argument.\n\n\t* diagnostic.h (file_name_as_prefix): Add context argument.\n\t* diagnostic.c (file_name_as_prefix): Likewise.  Colorize\n\tthe string as locus.\n\t* langhooks.c (lhd_print_error_function): Adjust caller.\ncp/\n\t* error.c (cp_print_error_function): Adjust file_name_as_prefix\n\tcaller.\n\nFrom-SVN: r198331", "tree": {"sha": "445f8e0a123deaa48447d0f3140806f626a413a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/445f8e0a123deaa48447d0f3140806f626a413a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "013e5ef956c191f9f6748615b22b78653a5e762a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/013e5ef956c191f9f6748615b22b78653a5e762a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/013e5ef956c191f9f6748615b22b78653a5e762a"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "18a0ac0b47dcba34c71f74de6a7dc7fc3d72bacb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "patch": "@@ -1,3 +1,10 @@\n+2013-04-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* diagnostic.h (file_name_as_prefix): Add context argument.\n+\t* diagnostic.c (file_name_as_prefix): Likewise.  Colorize\n+\tthe string as locus.\n+\t* langhooks.c (lhd_print_error_function): Adjust caller.\n+\n 2013-04-25  Lawrence Crowl  <crowl@google.com>\n \n \t* var-tracking.c (shared_hash_def::htab):"}, {"sha": "39fbc46db44db5b81808a996e2cad4069b25a1b3", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "patch": "@@ -1,3 +1,8 @@\n+2013-04-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* error.c (cp_print_error_function): Adjust file_name_as_prefix\n+\tcaller.\n+\n 2013-04-25  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/56859"}, {"sha": "c57a5aaa8db663d97e3e71c757ad0057334482e2", "filename": "gcc/cp/error.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "patch": "@@ -2962,7 +2962,7 @@ cp_print_error_function (diagnostic_context *context,\n       const char *file = LOCATION_FILE (diagnostic->location);\n       tree abstract_origin = diagnostic_abstract_origin (diagnostic);\n       char *new_prefix = (file && abstract_origin == NULL)\n-\t\t\t ? file_name_as_prefix (file) : NULL;\n+\t\t\t ? file_name_as_prefix (context, file) : NULL;\n \n       pp_base_set_prefix (context->printer, new_prefix);\n "}, {"sha": "f9a236b9113dcca4d8b29eec4fe05c6d00d154f3", "filename": "gcc/diagnostic.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fdiagnostic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fdiagnostic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.c?ref=e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "patch": "@@ -72,9 +72,12 @@ build_message_string (const char *msg, ...)\n \n /* Same as diagnostic_build_prefix, but only the source FILE is given.  */\n char *\n-file_name_as_prefix (const char *f)\n+file_name_as_prefix (diagnostic_context *context, const char *f)\n {\n-  return build_message_string (\"%s: \", f);\n+  const char *locus_cs\n+    = colorize_start (pp_show_color (context->printer), \"locus\");\n+  const char *locus_ce = colorize_stop (pp_show_color (context->printer));\n+  return build_message_string (\"%s%s:%s \", locus_cs, f, locus_ce);\n }\n \n "}, {"sha": "ae6d2b22aa146dd2426f182517224de30523d124", "filename": "gcc/diagnostic.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fdiagnostic.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Fdiagnostic.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.h?ref=e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "patch": "@@ -293,6 +293,6 @@ void diagnostic_set_caret_max_width (diagnostic_context *context, int value);\n \n \n /* Pure text formatting support functions.  */\n-extern char *file_name_as_prefix (const char *);\n+extern char *file_name_as_prefix (diagnostic_context *, const char *);\n \n #endif /* ! GCC_DIAGNOSTIC_H */"}, {"sha": "901f9b4a3001fe82246c525165d8d2368b8f6e60", "filename": "gcc/langhooks.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Flanghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e78e8a0b19f9becc90a0bcb4684fb83eae10533f/gcc%2Flanghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.c?ref=e78e8a0b19f9becc90a0bcb4684fb83eae10533f", "patch": "@@ -372,7 +372,7 @@ lhd_print_error_function (diagnostic_context *context, const char *file,\n       const char *old_prefix = context->printer->prefix;\n       tree abstract_origin = diagnostic_abstract_origin (diagnostic);\n       char *new_prefix = (file && abstract_origin == NULL)\n-\t\t\t ? file_name_as_prefix (file) : NULL;\n+\t\t\t ? file_name_as_prefix (context, file) : NULL;\n \n       pp_set_prefix (context->printer, new_prefix);\n "}]}