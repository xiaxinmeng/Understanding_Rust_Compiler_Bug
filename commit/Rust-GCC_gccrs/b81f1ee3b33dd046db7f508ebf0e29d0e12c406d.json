{"sha": "b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjgxZjFlZTNiMzNkZDA0NmRiN2Y1MDhlYmYwZTI5ZDBlMTJjNDA2ZA==", "commit": {"author": {"name": "James Greenhalgh", "email": "james.greenhalgh@arm.com", "date": "2015-09-28T09:35:46Z"}, "committer": {"name": "James Greenhalgh", "email": "jgreenhalgh@gcc.gnu.org", "date": "2015-09-28T09:35:46Z"}, "message": "[Patch 1/2 AArch64/ARM] Give AArch64 ROR (Immediate) a new type attribute\n\ngcc/\n\n\t* config/arm/types.md (type): Add rotate_imm.\n\t* config/aarch64/aarch64.md (*ror<mode>3_insn): Split out the\n\tROR immediate case.\n\t(*rorsi3_insn_uxtw): Likewise.\n\t* config/aarch64/thunderx.md (thunderx_shift): Add rotate_imm.\n\t* config/arm/cortex-a53.md (cortex_a53_alu_shift): Add rotate_imm.\n\t* config/arm/cortex-a57.md (cortex_a53_alu): Add rotate_imm.\n\nFrom-SVN: r228197", "tree": {"sha": "dbefab494ec0ba7d100afb2e45aafa1fcc85115e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dbefab494ec0ba7d100afb2e45aafa1fcc85115e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/comments", "author": {"login": "jgreenhalgh-arm", "id": 6104025, "node_id": "MDQ6VXNlcjYxMDQwMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6104025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgreenhalgh-arm", "html_url": "https://github.com/jgreenhalgh-arm", "followers_url": "https://api.github.com/users/jgreenhalgh-arm/followers", "following_url": "https://api.github.com/users/jgreenhalgh-arm/following{/other_user}", "gists_url": "https://api.github.com/users/jgreenhalgh-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgreenhalgh-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgreenhalgh-arm/subscriptions", "organizations_url": "https://api.github.com/users/jgreenhalgh-arm/orgs", "repos_url": "https://api.github.com/users/jgreenhalgh-arm/repos", "events_url": "https://api.github.com/users/jgreenhalgh-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/jgreenhalgh-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6d259b8d1f8e7756477edbef750526ccef38e45d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d259b8d1f8e7756477edbef750526ccef38e45d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d259b8d1f8e7756477edbef750526ccef38e45d"}], "stats": {"total": 32, "additions": 22, "deletions": 10}, "files": [{"sha": "e066bd76b82319b1b7921afea9b7d83c8b39dbfd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "patch": "@@ -1,3 +1,13 @@\n+2015-09-28  James Greenhalgh  <james.greenhalgh@arm.com>\n+\n+\t* config/arm/types.md (type): Add rotate_imm.\n+\t* config/aarch64/aarch64.md (*ror<mode>3_insn): Split out the\n+\tROR immediate case.\n+\t(*rorsi3_insn_uxtw): Likewise.\n+\t* config/aarch64/thunderx.md (thunderx_shift): Add rotate_imm.\n+\t* config/arm/cortex-a53.md (cortex_a53_alu_shift): Add rotate_imm.\n+\t* config/arm/cortex-a57.md (cortex_a53_alu): Add rotate_imm.\n+\n 2015-09-28  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \tPR rtl-optimization/67481"}, {"sha": "e5179dd2bbb393fd32e565ae792b7a6b78a83bd0", "filename": "gcc/config/aarch64/aarch64.md", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Faarch64%2Faarch64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Faarch64%2Faarch64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.md?ref=b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "patch": "@@ -3807,13 +3807,13 @@\n \n ;; Rotate right\n (define_insn \"*ror<mode>3_insn\"\n-  [(set (match_operand:GPI 0 \"register_operand\" \"=r\")\n-        (rotatert:GPI\n-          (match_operand:GPI 1 \"register_operand\" \"r\")\n-          (match_operand:QI 2 \"aarch64_reg_or_shift_imm_<mode>\" \"rUs<cmode>\")))]\n+  [(set (match_operand:GPI 0 \"register_operand\" \"=r,r\")\n+     (rotatert:GPI\n+       (match_operand:GPI 1 \"register_operand\" \"r,r\")\n+       (match_operand:QI 2 \"aarch64_reg_or_shift_imm_<mode>\" \"r,Us<cmode>\")))]\n   \"\"\n   \"ror\\\\t%<w>0, %<w>1, %<w>2\"\n-  [(set_attr \"type\" \"shift_reg\")]\n+  [(set_attr \"type\" \"shift_reg, rotate_imm\")]\n )\n \n ;; zero_extend version of above\n@@ -3902,7 +3902,7 @@\n   operands[3] = GEN_INT (<sizen> - UINTVAL (operands[2]));\n   return \"ror\\\\t%<w>0, %<w>1, %3\";\n }\n-  [(set_attr \"type\" \"shift_imm\")]\n+  [(set_attr \"type\" \"rotate_imm\")]\n )\n \n ;; zero_extend version of the above\n@@ -3916,7 +3916,7 @@\n   operands[3] = GEN_INT (32 - UINTVAL (operands[2]));\n   return \"ror\\\\t%w0, %w1, %3\";\n }\n-  [(set_attr \"type\" \"shift_imm\")]\n+  [(set_attr \"type\" \"rotate_imm\")]\n )\n \n (define_insn \"*<ANY_EXTEND:optab><GPI:mode>_ashl<SHORT:mode>\""}, {"sha": "3dae963fc910156988d4be98e45f745be545afeb", "filename": "gcc/config/aarch64/thunderx.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Faarch64%2Fthunderx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Faarch64%2Fthunderx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Fthunderx.md?ref=b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "patch": "@@ -39,7 +39,7 @@\n \n (define_insn_reservation \"thunderx_shift\" 1\n   (and (eq_attr \"tune\" \"thunderx\")\n-       (eq_attr \"type\" \"bfm,extend,shift_imm,shift_reg,rbit,rev\"))\n+       (eq_attr \"type\" \"bfm,extend,rotate_imm,shift_imm,shift_reg,rbit,rev\"))\n   \"thunderx_pipe0 | thunderx_pipe1\")\n \n "}, {"sha": "3fa0625c130675a87a30f2a1345e20fc426e03c8", "filename": "gcc/config/arm/cortex-a53.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Farm%2Fcortex-a53.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Farm%2Fcortex-a53.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a53.md?ref=b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "patch": "@@ -76,7 +76,7 @@\n                         alu_sreg,alus_sreg,logic_reg,logics_reg,\\\n                         adc_imm,adcs_imm,adc_reg,adcs_reg,\\\n                         adr,bfm,csel,clz,rbit,rev,alu_dsp_reg,\\\n-                        shift_imm,shift_reg,\\\n+                        rotate_imm,shift_imm,shift_reg,\\\n                         mov_imm,mov_reg,mvn_imm,mvn_reg,\\\n                         mrs,multiple,no_insn\"))\n   \"cortex_a53_slot_any\")"}, {"sha": "d6ce4402125fcf168f46ec7d0e42debc5309eccf", "filename": "gcc/config/arm/cortex-a57.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Farm%2Fcortex-a57.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Farm%2Fcortex-a57.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a57.md?ref=b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "patch": "@@ -296,7 +296,7 @@\n \t\t\talu_sreg,alus_sreg,logic_reg,logics_reg,\\\n \t\t\tadc_imm,adcs_imm,adc_reg,adcs_reg,\\\n \t\t\tadr,bfm,clz,rbit,rev,alu_dsp_reg,\\\n-\t\t\tshift_imm,shift_reg,\\\n+\t\t\trotate_imm,shift_imm,shift_reg,\\\n \t\t\tmov_imm,mov_reg,\\\n \t\t\tmvn_imm,mvn_reg,\\\n \t\t\tmrs,multiple,no_insn\"))"}, {"sha": "534be74fe466846bba5bc0d80ea8d1cb41b71f4b", "filename": "gcc/config/arm/types.md", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Farm%2Ftypes.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b81f1ee3b33dd046db7f508ebf0e29d0e12c406d/gcc%2Fconfig%2Farm%2Ftypes.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ftypes.md?ref=b81f1ee3b33dd046db7f508ebf0e29d0e12c406d", "patch": "@@ -120,6 +120,7 @@\n ;                    final output, thus having no impact on scheduling.\n ; rbit               reverse bits.\n ; rev                reverse bytes.\n+; rotate_imm         rotate by immediate.\n ; sdiv               signed division.\n ; shift_imm          simple shift operation (LSL, LSR, ASR, ROR) with an\n ;                    immediate.\n@@ -627,6 +628,7 @@\n   nop,\\\n   rbit,\\\n   rev,\\\n+  rotate_imm,\\\n   sdiv,\\\n   shift_imm,\\\n   shift_reg,\\"}]}