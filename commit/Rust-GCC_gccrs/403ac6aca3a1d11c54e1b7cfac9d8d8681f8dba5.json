{"sha": "403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAzYWM2YWNhM2ExZDExYzU0ZTFiN2NmYWM5ZDhkODY4MWY4ZGJhNQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2006-05-10T21:58:34Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2006-05-10T21:58:34Z"}, "message": "libstdc++.exp (check_v3_target_cxa_atexit): Move to gcc subdir.\n\n\t* testsuite/lib/libstdc++.exp (check_v3_target_cxa_atexit):\n\tMove to gcc subdir.\n\t* testsuite/lib/dg-options.exp (dg-require-iconv): Remove.\n\t(dg-require-cxa-atexit): Move to gcc subdir.\n\nFrom-SVN: r113685", "tree": {"sha": "fea049c53ca313175a647da3c706dcfc0549d462", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fea049c53ca313175a647da3c706dcfc0549d462"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5/comments", "author": null, "committer": null, "parents": [{"sha": "21f638b9b04b977159ff29ac9de97ffec40c607f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21f638b9b04b977159ff29ac9de97ffec40c607f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21f638b9b04b977159ff29ac9de97ffec40c607f"}], "stats": {"total": 110, "additions": 7, "deletions": 103}, "files": [{"sha": "342a71a18a12d62254d9244569e060c025f8176e", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5", "patch": "@@ -1,3 +1,10 @@\n+2006-05-10  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* testsuite/lib/libstdc++.exp (check_v3_target_cxa_atexit):\n+\tMove to gcc subdir.\n+\t* testsuite/lib/dg-options.exp (dg-require-iconv): Remove.\n+\t(dg-require-cxa-atexit): Move to gcc subdir.\n+\n 2006-05-10  Paolo Carlini  <pcarlini@suse.de>\n \t    Peter Doerfler  <gcc@pdoerfler.com>\n "}, {"sha": "e8e740492fbb5baba7fc319cb63e6a256dd3bf32", "filename": "libstdc++-v3/testsuite/lib/dg-options.exp", "status": "modified", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fdg-options.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fdg-options.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fdg-options.exp?ref=403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5", "patch": "@@ -17,16 +17,6 @@\n # Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  \n \n \n-# Copied from GCC.\n-proc dg-require-iconv { args } {\n-    if { ![ check_iconv_available ${args} ] } {\n-\tupvar dg-do-what dg-do-what\n-\tset dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n-\treturn\n-    }\n-    return\n-}\n-\n proc dg-require-namedlocale { args } {\n     if { ![ check_v3_target_namedlocale ] } {\n \tupvar dg-do-what dg-do-what\n@@ -36,15 +26,6 @@ proc dg-require-namedlocale { args } {\n     return\n }\n \n-proc dg-require-cxa-atexit { args } {\n-    if { ![ check_v3_target_cxa_atexit ] } {\n-\tupvar dg-do-what dg-do-what\n-\tset dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n-\treturn\n-    }\n-    return\n-}\n-\n proc dg-require-sharedlib { args } {\n     if { ![ check_v3_target_sharedlib ] } {\n \tupvar dg-do-what dg-do-what"}, {"sha": "6272027bac3f5f8f9b0661e734814534592aa992", "filename": "libstdc++-v3/testsuite/lib/libstdc++.exp", "status": "modified", "additions": 0, "deletions": 84, "changes": 84, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp?ref=403ac6aca3a1d11c54e1b7cfac9d8d8681f8dba5", "patch": "@@ -529,90 +529,6 @@ proc check_v3_target_namedlocale { } {\n     return $et_namedlocale_saved\n }\n \n-proc check_v3_target_cxa_atexit { } {\n-    global et_cxa_atexit\n-    global et_cxa_atexit_target_name\n-    global tool\t\n-\n-    if { ![info exists et_cxa_atexit_target_name] } {\n-\tset et_cxa_atexit_target_name \"\"\n-    }\n-\n-    # If the target has changed since we set the cached value, clear it.\n-    set current_target [current_target_name]\n-    if { $current_target != $et_cxa_atexit_target_name } {\n-\tverbose \"check_v3_target_cxa_atexit: `$et_cxa_atexit_target_name'\" 2\n-\tset et_cxa_atexit_target_name $current_target\n-\tif [info exists et_cxa_atexit] {\n-\t    verbose \"check_v3_target_cxa_atexit: removing cached result\" 2\n-\t    unset et_cxa_atexit\n-\t}\n-    }\n-\n-    if [info exists et_cxa_atexit] {\n-\tverbose \"check_v3_target_cxa_atexit: using cached result\" 2\n-    } else {\n-\tset et_cxa_atexit 0\n-\n-\t# Set up, compile, and execute a C++ test program that depends\n-\t# on correct ordering of static object destructors. This is\n-\t# indicative of the presence and use of __cxa_atexit.\n-\tset src cxaatexit[pid].cc\n-\tset exe cxaatexit[pid].x\n-\n-\tset f [open $src \"w\"]\n-\tputs $f \"#include <stdlib.h>\"\n-\tputs $f \"static unsigned int count;\"\n-\tputs $f \"struct X\"\n-\tputs $f \"{\"\n-\tputs $f \"  X() { count = 1; }\"\n-\tputs $f \"  ~X()\"\n-\tputs $f \"  {\"\n-\tputs $f \"    if (count != 3)\"\n-\tputs $f \"      exit(1);\"\n-\tputs $f \"    count = 4;\"\n-        puts $f \"  }\"\n-        puts $f \"};\"\n-\tputs $f \"void f()\"\n-\tputs $f \"{\"\n-\tputs $f \"  static X x;\"\n-        puts $f \"}\"\n-\tputs $f \"struct Y\"\n-\tputs $f \"{\"\n-\tputs $f \"  Y() { f(); count = 2; }\"\n-\tputs $f \"  ~Y()\"\n-\tputs $f \"  {\"\n-\tputs $f \"    if (count != 2)\"\n-\tputs $f \"      exit(1);\"\n-\tputs $f \"    count = 3;\"\n-        puts $f \"  }\"\n-        puts $f \"};\"\n-\tputs $f \"Y y;\"\n-\tputs $f \"int main()\"\n-\tputs $f \"{ return 0; }\"\n-\tclose $f\n-\n-\tset lines [v3_target_compile $src $exe executable \"\"]\n-\tfile delete $src\n-\n-\tif [string match \"\" $lines] {\n-\t    # No error message, compilation succeeded.\n-\t    set result [${tool}_load \"./$exe\" \"\" \"\"]\n-\t    set status [lindex $result 0]\n-\t    remote_file build delete $exe\n-\n-\t    verbose \"check_v3_target_cxa_atexit: status is <$status>\" 2\n-\n-\t    if { $status == \"pass\" } {\n-\t\tset et_cxa_atexit 1\n-\t    }\n-\t} else {\n-\t    verbose \"check_v3_target_cxa_atexit: compilation failed\" 2\n-\t}\n-    }\n-    return $et_cxa_atexit\n-}\n-\n proc check_v3_target_debug_mode { } {\n     global cxxflags\n     global et_debug_mode"}]}