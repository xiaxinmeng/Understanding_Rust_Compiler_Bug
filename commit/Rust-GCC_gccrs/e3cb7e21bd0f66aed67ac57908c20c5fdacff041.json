{"sha": "e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTNjYjdlMjFiZDBmNjZhZWQ2N2FjNTc5MDhjMjBjNWZkYWNmZjA0MQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2004-12-16T19:14:29Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2004-12-16T19:14:29Z"}, "message": "re PR other/18508 (\"basename: too few arguments\" when building without bootstrap)\n\n2004-12-14  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR other/18508\n\t* config/alpha/t-osf4 (SHLIB_LINK): Use `.backup' as the suffix\n\tto back up the existing shared library.\n\t* config/arm/t-netbsd (SHLIB_LINK): Likewise.\n\t* config/mips/t-slibgcc-irix (SHLIB_LINK): Likewise.\n\t* config/pa/t-hpux-shlib (SHLIB_LINK): Likewise.\n\t* config/sh/t-linux (SHLIB_LINK): Likewise.\n\t* config/t-libunwind-elf (SHLIBUNWIND_LINK): Likewise.\n\t* config/t-slibgcc-darwin (SHLIB_LINK): Likewise.\n\t* config/t-slibgcc-elf-ver (SHLIB_LINK): Likewise.\n\t* config/t-slibgcc-sld (SHLIB_LINK): Likewise.\n\n\t* config/i386/t-nwld (SHLIB_LINK): Don't use the temporary\n\tfile.\n\nFrom-SVN: r92276", "tree": {"sha": "f45cb746a5ca55c5c9fecab1275f7ff6eb516112", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f45cb746a5ca55c5c9fecab1275f7ff6eb516112"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4fdb5c71251e829b24d6df71df3b6004ddd30e86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fdb5c71251e829b24d6df71df3b6004ddd30e86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4fdb5c71251e829b24d6df71df3b6004ddd30e86"}], "stats": {"total": 42, "additions": 27, "deletions": 15}, "files": [{"sha": "b5afd17404e03b02b031b643334d9a0a34f35eea", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -1,3 +1,20 @@\n+2004-12-16  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR other/18508\n+\t* config/alpha/t-osf4 (SHLIB_LINK): Use `.backup' as the suffix\n+\tto back up the existing shared library.\n+\t* config/arm/t-netbsd (SHLIB_LINK): Likewise.\n+\t* config/mips/t-slibgcc-irix (SHLIB_LINK): Likewise.\n+\t* config/pa/t-hpux-shlib (SHLIB_LINK): Likewise.\n+\t* config/sh/t-linux (SHLIB_LINK): Likewise.\n+\t* config/t-libunwind-elf (SHLIBUNWIND_LINK): Likewise.\n+\t* config/t-slibgcc-darwin (SHLIB_LINK): Likewise.\n+\t* config/t-slibgcc-elf-ver (SHLIB_LINK): Likewise.\n+\t* config/t-slibgcc-sld (SHLIB_LINK): Likewise.\n+\n+\t* config/i386/t-nwld (SHLIB_LINK): Don't use the temporary\n+\tfile.\n+\n 2004-12-16  Richard Henderson  <rth@redhat.com>\n \n \t* Makefile.in (MD_DEPS, s-mddeps): New."}, {"sha": "58ce6c2d8d6b3271bb821349fccb974769bbfa80", "filename": "gcc/config/alpha/t-osf4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Falpha%2Ft-osf4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Falpha%2Ft-osf4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Ft-osf4?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -19,7 +19,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-o $(SHLIB_NAME).tmp @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n \trm -f $(SHLIB_SONAME) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n \t$(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)"}, {"sha": "533fab947a1c9c45445bbaec1856a3da4359868d", "filename": "gcc/config/arm/t-netbsd", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Farm%2Ft-netbsd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Farm%2Ft-netbsd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ft-netbsd?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -14,7 +14,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-o $(SHLIB_NAME).tmp @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n \trm -f $(SHLIB_SONAME) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n \t$(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)"}, {"sha": "f56f1f16c1dae35993f51c6ad0f3bc829f8218b0", "filename": "gcc/config/i386/t-nwld", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fi386%2Ft-nwld", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fi386%2Ft-nwld", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ft-nwld?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -46,13 +46,9 @@ SHLIB_LINK = set -e; \\\n \t\tthen echo \"xdcdata @shlib_so_name@.xdc\" >>@shlib_so_name@.def; \\\n \t\telse echo \"WARNING: $(SHLIB_NAME) built without XDC data will not work well.\" 1>&2; \\\n \tfi; \\\n-\t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -o $(SHLIB_NAME).tmp \\\n+\t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -o $(SHLIB_NAME) \\\n \t\t$(SHLIB_SRC) -static-libgcc -lnetware \\\n \t\t-Wl,--Map,--map-info,full,--strip-all,--def-file,@shlib_so_name@.def; \\\n-\tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n-\telse true; fi; \\\n-\tmv $(SHLIB_NAME).tmp $(SHLIB_NAME); \\\n \trm -f @shlib_so_name@.imp; $(LN_S) $(SHLIB_MAP) @shlib_so_name@.imp; \\\n \techo $$$$(($$$$(<libgcc/build)+1)) >libgcc/build\n "}, {"sha": "0eac89e6a1c4a467d85f952dab8a16fd61ef92c7", "filename": "gcc/config/mips/t-slibgcc-irix", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fmips%2Ft-slibgcc-irix", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fmips%2Ft-slibgcc-irix", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-slibgcc-irix?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -15,7 +15,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-o $(SHLIB_NAME).tmp @multilib_flags@ $(SHLIB_OBJS) $(SHLIB_LC) && \\\n \trm -f $(SHLIB_SOLINK) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n \t$(LN_S) $(SHLIB_NAME) $(SHLIB_SOLINK)"}, {"sha": "5183b0625845dbf0505b156ed03b508d31a1378c", "filename": "gcc/config/pa/t-hpux-shlib", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fpa%2Ft-hpux-shlib", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fpa%2Ft-hpux-shlib", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Ft-hpux-shlib?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -8,7 +8,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared  -nodefaultlibs \\\n \t-o $(SHLIB_NAME).tmp @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n         rm -f $(SHLIB_SONAME) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n         $(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)"}, {"sha": "71e96f5315781e20122ff06976f0e59f9b2b9898", "filename": "gcc/config/sh/t-linux", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fsh%2Ft-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Fsh%2Ft-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Ft-linux?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -26,7 +26,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-o $(SHLIB_NAME).tmp @multilib_flags@ $(SHLIB_OBJS) $(SHLIB_LC) && \\\n \trm -f $(SHLIB_SOLINK) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n \t(echo \"/* GNU ld script\"; \\"}, {"sha": "428bc43ed2e8a9151a3e3a9dd94382d42d642eca", "filename": "gcc/config/t-libunwind-elf", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-libunwind-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-libunwind-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-libunwind-elf?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -14,8 +14,7 @@ SHLIBUNWIND_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared \\\n \t@multilib_flags@ $(SHLIB_OBJS) -lc && \\\n \trm -f $(SHLIB_SOLINK) && \\\n \tif [ -f $(SHLIBUNWIND_NAME) ]; then \\\n-\t  mv -f $(SHLIBUNWIND_NAME) \\\n-\t     $(SHLIBUNWIND_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIBUNWIND_NAME) $(SHLIBUNWIND_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIBUNWIND_NAME).tmp $(SHLIBUNWIND_NAME) && \\\n \t$(LN_S) $(SHLIBUNWIND_NAME) $(SHLIB_SOLINK)"}, {"sha": "66d4e777dd56b085d34ebbe96ac0e7f833a83f2d", "filename": "gcc/config/t-slibgcc-darwin", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-slibgcc-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-slibgcc-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-darwin?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -18,7 +18,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -dynamiclib -nodefaultlibs \\\n \t@multilib_flags@ $(SHLIB_OBJS) -lc && \\\n \trm -f $(SHLIB_SOLINK) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n \t$(LN_S) $(SHLIB_NAME) $(SHLIB_SOLINK)"}, {"sha": "e70647aa83118185ea05110a9cd795ecbaf1a511", "filename": "gcc/config/t-slibgcc-elf-ver", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-elf-ver?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -17,7 +17,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-o $(SHLIB_NAME).tmp @multilib_flags@ $(SHLIB_OBJS) $(SHLIB_LC) && \\\n \trm -f $(SHLIB_SOLINK) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n \t$(LN_S) $(SHLIB_NAME) $(SHLIB_SOLINK)"}, {"sha": "64c147806c912bfbf2441bb85094af232b0cc0aa", "filename": "gcc/config/t-slibgcc-sld", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-slibgcc-sld", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3cb7e21bd0f66aed67ac57908c20c5fdacff041/gcc%2Fconfig%2Ft-slibgcc-sld", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-sld?ref=e3cb7e21bd0f66aed67ac57908c20c5fdacff041", "patch": "@@ -14,7 +14,7 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t@multilib_flags@ $(SHLIB_OBJS) -lc && \\\n \trm -f $(SHLIB_SOLINK) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n-\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n+\t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n \t$(LN_S) $(SHLIB_NAME) $(SHLIB_SOLINK)"}]}