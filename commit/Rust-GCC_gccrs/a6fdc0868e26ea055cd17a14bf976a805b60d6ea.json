{"sha": "a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZmZGMwODY4ZTI2ZWEwNTVjZDE3YTE0YmY5NzZhODA1YjYwZDZlYQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2003-04-30T01:28:39Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2003-04-30T01:28:39Z"}, "message": "c-typeck.c (function_types_compatible_p): Ignore incompatible 'volatile' qualifiers on a function's return type in GNU mode.\n\n2003-04-29  Geoffrey Keating  <geoffk@apple.com>\n\n\t* c-typeck.c (function_types_compatible_p): Ignore incompatible\n\t'volatile' qualifiers on a function's return type in GNU mode.\n\nIndex: testsuite/ChangeLog\n2003-04-29  Geoffrey Keating  <geoffk@apple.com>\n\n\t* gcc.dg/noreturn-5.c: New file.\n\t* gcc.dg/noreturn-6.c: New file.\n\nFrom-SVN: r66281", "tree": {"sha": "d99f4d5e6ec477f7b575ba61ababac52e26042c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d99f4d5e6ec477f7b575ba61ababac52e26042c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9c0631a756c7409907a9302e77531a94d9cd6263", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c0631a756c7409907a9302e77531a94d9cd6263", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c0631a756c7409907a9302e77531a94d9cd6263"}], "stats": {"total": 39, "additions": 36, "deletions": 3}, "files": [{"sha": "3b4d998f80accb68be28e93de3eae880745fd905", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "patch": "@@ -1,3 +1,8 @@\n+2003-04-29  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* c-typeck.c (function_types_compatible_p): Ignore incompatible\n+\t'volatile' qualifiers on a function's return type in GNU mode.\n+\n 2003-04-29  Aldy Hernandez  <aldyh@redhat.com>\n \n         * expr.c (emit_group_load): Dump parallels of simd types to"}, {"sha": "cfa2d409cc9a8656216507cecbf383329b9fb03b", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "patch": "@@ -630,9 +630,23 @@ function_types_compatible_p (f1, f2)\n   /* 1 if no need for warning yet, 2 if warning cause has been seen.  */\n   int val = 1;\n   int val1;\n-\n-  if (!(TREE_TYPE (f1) == TREE_TYPE (f2)\n-\t|| (val = comptypes (TREE_TYPE (f1), TREE_TYPE (f2)))))\n+  tree ret1, ret2;\n+\n+  ret1 = TREE_TYPE (f1);\n+  ret2 = TREE_TYPE (f2);\n+\n+  /* 'volatile' qualifiers on a function's return type mean the function\n+     is noreturn.  */\n+  if (pedantic && TYPE_VOLATILE (ret1) != TYPE_VOLATILE (ret2))\n+    pedwarn (\"function return types not compatible due to `volatile'\");\n+  if (TYPE_VOLATILE (ret1))\n+    ret1 = build_qualified_type (TYPE_MAIN_VARIANT (ret1),\n+\t\t\t\t TYPE_QUALS (ret1) & ~TYPE_QUAL_VOLATILE);\n+  if (TYPE_VOLATILE (ret2))\n+    ret2 = build_qualified_type (TYPE_MAIN_VARIANT (ret2),\n+\t\t\t\t TYPE_QUALS (ret2) & ~TYPE_QUAL_VOLATILE);\n+  val = comptypes (ret1, ret2);\n+  if (val == 0)\n     return 0;\n \n   args1 = TYPE_ARG_TYPES (f1);"}, {"sha": "5a7ddceb97c70ff3bf17b185d768494e6118166a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "patch": "@@ -1,5 +1,8 @@\n 2003-04-29  Geoffrey Keating  <geoffk@apple.com>\n \n+\t* gcc.dg/noreturn-5.c: New file.\n+\t* gcc.dg/noreturn-6.c: New file.\n+\n \t* gcc.c-torture/compile/inline-1.c: New file.\n \n 2003-04-29  Mark Mitchell  <mark@codesourcery.com>"}, {"sha": "07381a66d24402d963c849e15ffbcbfde094e9be", "filename": "gcc/testsuite/gcc.dg/noreturn-5.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreturn-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreturn-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreturn-5.c?ref=a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-std=gnu99\" } */\n+/* Check that 'noreturn' and 'volatile extern' are compatible.  \n+   The testsuite uses -ansi -pedantic-errors by default, so this has\n+   to override.  */\n+extern void xxx (int) __attribute__((noreturn));\n+__volatile extern void xxx (int);"}, {"sha": "eb1fd243773c47c9674ae3f9f02f3720e4a097ef", "filename": "gcc/testsuite/gcc.dg/noreturn-6.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreturn-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6fdc0868e26ea055cd17a14bf976a805b60d6ea/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreturn-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreturn-6.c?ref=a6fdc0868e26ea055cd17a14bf976a805b60d6ea", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do compile } */\n+/* Check for volatile behaviour.  */\n+extern int xxx (void);\n+volatile extern int xxx (void);  /* { dg-error \"not compatible\" } */"}]}