{"sha": "310b9b1d761dd294d9dd36d729a5be98e688ad0f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzEwYjliMWQ3NjFkZDI5NGQ5ZGQzNmQ3MjlhNWJlOThlNjg4YWQwZg==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2002-12-19T23:04:55Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2002-12-19T23:04:55Z"}, "message": "rs6000.md (define_attr type): Remove altivec.\n\n        * config/rs6000/rs6000.md (define_attr type): Remove altivec.\n        * config/rs6000/altivec.md (movv4si_internal): Set correct instruction\n        attributes.\n        (movv8hi_internal,movv16qi_internal,movv4sf_internal): Same.\n        (get_vrsave_internal,set_vrsave_internal): Same.\n        (altivec_vspltisb,altivec_vspltish,altivec_vspltisw): Same.\n        (absv16qi2,absv8hi2,absv4si2,absv4sf2): Same\n        (altivec_abss_v16qi,altivec_abss_v8hi,altivec_abss_v4si): Same.\n\nFrom-SVN: r60339", "tree": {"sha": "fe9b9e1bbf866b35cc487659f148272b8fa93546", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe9b9e1bbf866b35cc487659f148272b8fa93546"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/310b9b1d761dd294d9dd36d729a5be98e688ad0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/310b9b1d761dd294d9dd36d729a5be98e688ad0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/310b9b1d761dd294d9dd36d729a5be98e688ad0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/310b9b1d761dd294d9dd36d729a5be98e688ad0f/comments", "author": null, "committer": null, "parents": [{"sha": "e91f04de4bb14746e48091a26234c87287e73163", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e91f04de4bb14746e48091a26234c87287e73163", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e91f04de4bb14746e48091a26234c87287e73163"}], "stats": {"total": 54, "additions": 32, "deletions": 22}, "files": [{"sha": "512ef01facaf56866d5a14119b7401e48852e6ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310b9b1d761dd294d9dd36d729a5be98e688ad0f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310b9b1d761dd294d9dd36d729a5be98e688ad0f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=310b9b1d761dd294d9dd36d729a5be98e688ad0f", "patch": "@@ -1,3 +1,14 @@\n+2002-12-19  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* config/rs6000/rs6000.md (define_attr type): Remove altivec.\n+\t* config/rs6000/altivec.md (movv4si_internal): Set correct instruction\n+\tattributes.\n+\t(movv8hi_internal,movv16qi_internal,movv4sf_internal): Same.\n+\t(get_vrsave_internal,set_vrsave_internal): Same.\n+\t(altivec_vspltisb,altivec_vspltish,altivec_vspltisw): Same.\n+\t(absv16qi2,absv8hi2,absv4si2,absv4sf2): Same\n+\t(altivec_abss_v16qi,altivec_abss_v8hi,altivec_abss_v4si): Same.\n+\n 2002-12-19  Casper S. Hornstrup  <chorns@users.sourceforge.net>\n \t    Danny Smith  <dannysmith@users.sourceforge.net>\n \t    Eric Kohl  <ekohl@rz-online.de>"}, {"sha": "063fe522135fd913edec92f3d8d9e75722cf614a", "filename": "gcc/config/rs6000/altivec.md", "status": "modified", "additions": 20, "deletions": 21, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310b9b1d761dd294d9dd36d729a5be98e688ad0f/gcc%2Fconfig%2Frs6000%2Faltivec.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310b9b1d761dd294d9dd36d729a5be98e688ad0f/gcc%2Fconfig%2Frs6000%2Faltivec.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faltivec.md?ref=310b9b1d761dd294d9dd36d729a5be98e688ad0f", "patch": "@@ -95,7 +95,7 @@\n    stw%U0 %1,%0\\;stw %L1,%L0\\;stw %Y1,%Y0\\;stw %Z1,%Z0\n    lwz%U1 %0,%1\\;lwz %L0,%L1\\;lwz %Y0,%Y1\\;lwz %Z0,%Z1\n    mr %0,%1\\;mr %L0,%L1\\;mr %Y0,%Y1\\;mr %Z0,%Z1\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecstore,vecload,vecsimple,store,load,*\")\n    (set_attr \"length\" \"*,*,*,16,16,16\")])\n \n (define_expand \"movv8hi\"\n@@ -115,7 +115,7 @@\n    stw%U0 %1,%0\\;stw %L1,%L0\\;stw %Y1,%Y0\\;stw %Z1,%Z0\n    lwz%U1 %0,%1\\;lwz %L0,%L1\\;lwz %Y0,%Y1\\;lwz %Z0,%Z1\n    mr %0,%1\\;mr %L0,%L1\\;mr %Y0,%Y1\\;mr %Z0,%Z1\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecstore,vecload,vecsimple,store,load,*\")\n    (set_attr \"length\" \"*,*,*,16,16,16\")])\n \n (define_expand \"movv16qi\"\n@@ -132,10 +132,10 @@\n    stvx %1,%y0\n    lvx %0,%y1\n    vor %0,%1,%1\n-  stw%U0 %1,%0\\;stw %L1,%L0\\;stw %Y1,%Y0\\;stw %Z1,%Z0\n-  lwz%U1 %0,%1\\;lwz %L0,%L1\\;lwz %Y0,%Y1\\;lwz %Z0,%Z1\n-  mr %0,%1\\;mr %L0,%L1\\;mr %Y0,%Y1\\;mr %Z0,%Z1\"\n-  [(set_attr \"type\" \"altivec\")\n+   stw%U0 %1,%0\\;stw %L1,%L0\\;stw %Y1,%Y0\\;stw %Z1,%Z0\n+   lwz%U1 %0,%1\\;lwz %L0,%L1\\;lwz %Y0,%Y1\\;lwz %Z0,%Z1\n+   mr %0,%1\\;mr %L0,%L1\\;mr %Y0,%Y1\\;mr %Z0,%Z1\"\n+  [(set_attr \"type\" \"vecstore,vecload,vecsimple,store,load,*\")\n    (set_attr \"length\" \"*,*,*,16,16,16\")])\n \n (define_expand \"movv4sf\"\n@@ -155,7 +155,7 @@\n    stw%U0 %1,%0\\;stw %L1,%L0\\;stw %Y1,%Y0\\;stw %Z1,%Z0\n    lwz%U1 %0,%1\\;lwz %L0,%L1\\;lwz %Y0,%Y1\\;lwz %Z0,%Z1\n    mr %0,%1\\;mr %L0,%L1\\;mr %Y0,%Y1\\;mr %Z0,%Z1\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecstore,vecload,vecsimple,store,load,*\")\n    (set_attr \"length\" \"*,*,*,16,16,16\")])\n \n (define_insn \"get_vrsave_internal\"\n@@ -169,7 +169,7 @@\n   else\n      return \\\"mfvrsave %0\\\";\n }\"\n-  [(set_attr \"type\" \"altivec\")])\n+  [(set_attr \"type\" \"*\")])\n \n (define_insn \"*set_vrsave_internal\"\n   [(match_parallel 0 \"vrsave_operation\"\n@@ -184,7 +184,7 @@\n   else\n     return \\\"mtvrsave %1\\\";\n }\"\n-  [(set_attr \"type\" \"altivec\")])\n+  [(set_attr \"type\" \"*\")])\n \n ;; Vector clears\n (define_insn \"*movv4si_const0\"\n@@ -1299,29 +1299,28 @@\n         (unspec:V16QI [(match_operand:QI 1 \"immediate_operand\" \"i\")] 139))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisb %0, %1\"\n-  [(set_attr \"type\" \"vecsimple\")])\n-\n+  [(set_attr \"type\" \"vecperm\")])\n \n (define_insn \"altivec_vspltish\"\n   [(set (match_operand:V8HI 0 \"register_operand\" \"=v\")\n         (unspec:V8HI [(match_operand:QI 1 \"immediate_operand\" \"i\")] 140))]\n   \"TARGET_ALTIVEC\"\n   \"vspltish %0, %1\"\n-  [(set_attr \"type\" \"vecsimple\")])\n+  [(set_attr \"type\" \"vecperm\")])\n \n (define_insn \"altivec_vspltisw\"\n   [(set (match_operand:V4SI 0 \"register_operand\" \"=v\")\n         (unspec:V4SI [(match_operand:QI 1 \"immediate_operand\" \"i\")] 141))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisw %0, %1\"\n-  [(set_attr \"type\" \"vecsimple\")])\n+  [(set_attr \"type\" \"vecperm\")])\n \n (define_insn \"\"\n   [(set (match_operand:V4SF 0 \"register_operand\" \"=v\")\n         (unspec:V4SF [(match_operand:QI 1 \"immediate_operand\" \"i\")] 142))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisw %0, %1\"\n-  [(set_attr \"type\" \"vecsimple\")])\n+  [(set_attr \"type\" \"vecperm\")])\n \n (define_insn \"ftruncv4sf2\"\n   [(set (match_operand:V4SF 0 \"register_operand\" \"=v\")\n@@ -1834,7 +1833,7 @@\n    (clobber (match_scratch:V16QI 3 \"=&v\"))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisb %2,0\\;vsububm %3,%2,%1\\;vmaxsb %0,%1,%3\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecsimple\")\n    (set_attr \"length\" \"12\")])\n \n (define_insn \"absv8hi2\"\n@@ -1844,7 +1843,7 @@\n    (clobber (match_scratch:V8HI 3 \"=&v\"))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisb %2,0\\;vsubuhm %3,%2,%1\\;vmaxsh %0,%1,%3\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecsimple\")\n    (set_attr \"length\" \"12\")])\n \n (define_insn \"absv4si2\"\n@@ -1854,7 +1853,7 @@\n    (clobber (match_scratch:V4SI 3 \"=&v\"))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisb %2,0\\;vsubuwm %3,%2,%1\\;vmaxsw %0,%1,%3\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecsimple\")\n    (set_attr \"length\" \"12\")])\n \n (define_insn \"absv4sf2\"\n@@ -1864,7 +1863,7 @@\n    (clobber (match_scratch:V4SF 3 \"=&v\"))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisw %2, -1\\;vslw %3,%2,%2\\;vandc %0,%1,%3\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecsimple\")\n    (set_attr \"length\" \"12\")])\n \n (define_insn \"altivec_abss_v16qi\"\n@@ -1874,7 +1873,7 @@\n    (clobber (match_scratch:V16QI 3 \"=&v\"))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisb %2,0\\;vsubsbs %3,%2,%1\\;vmaxsb %0,%1,%3\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecsimple\")\n    (set_attr \"length\" \"12\")])\n \n (define_insn \"altivec_abss_v8hi\"\n@@ -1884,7 +1883,7 @@\n    (clobber (match_scratch:V8HI 3 \"=&v\"))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisb %2,0\\;vsubshs %3,%2,%1\\;vmaxsh %0,%1,%3\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecsimple\")\n    (set_attr \"length\" \"12\")])\n \n (define_insn \"altivec_abss_v4si\"\n@@ -1894,5 +1893,5 @@\n    (clobber (match_scratch:V4SI 3 \"=&v\"))]\n   \"TARGET_ALTIVEC\"\n   \"vspltisb %2,0\\;vsubsws %3,%2,%1\\;vmaxsw %0,%1,%3\"\n-  [(set_attr \"type\" \"altivec\")\n+  [(set_attr \"type\" \"vecsimple\")\n    (set_attr \"length\" \"12\")])"}, {"sha": "acd5c4764ee9a27519b5c9c03fa6914ae03cd4cd", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310b9b1d761dd294d9dd36d729a5be98e688ad0f/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310b9b1d761dd294d9dd36d729a5be98e688ad0f/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=310b9b1d761dd294d9dd36d729a5be98e688ad0f", "patch": "@@ -40,7 +40,7 @@\n \f\n ;; Define an insn type attribute.  This is used in function unit delay\n ;; computations.\n-(define_attr \"type\" \"integer,load,store,fpload,fpstore,vecload,vecstore,imul,imul2,imul3,lmul,idiv,ldiv,branch,compare,cr_logical,delayed_compare,fpcompare,mtjmpr,fp,dmul,sdiv,ddiv,ssqrt,dsqrt,jmpreg,vecsimple,veccomplex,veccmp,vecperm,vecfloat,altivec\"\n+(define_attr \"type\" \"integer,load,store,fpload,fpstore,vecload,vecstore,imul,imul2,imul3,lmul,idiv,ldiv,branch,compare,cr_logical,delayed_compare,fpcompare,mtjmpr,fp,dmul,sdiv,ddiv,ssqrt,dsqrt,jmpreg,vecsimple,veccomplex,veccmp,vecperm,vecfloat\"\n   (const_string \"integer\"))\n \n ;; Length (in bytes)."}]}