{"sha": "8503f963b046de1f40f9519643528a3fb8f82191", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODUwM2Y5NjNiMDQ2ZGUxZjQwZjk1MTk2NDM1MjhhM2ZiOGY4MjE5MQ==", "commit": {"author": {"name": "Peter Bergner", "email": "bergner@linux.ibm.com", "date": "2019-04-18T22:14:17Z"}, "committer": {"name": "Peter Bergner", "email": "bergner@gcc.gnu.org", "date": "2019-04-18T22:14:17Z"}, "message": "re PR rtl-optimization/87871 (testcases fail after r265398 on arm)\n\n\tPR rtl-optimization/87871\n\t* ira-lives.c (make_object_dead): Don't add conflicts to\n\tTOTAL_CONFLICT_HARD_REGS for register ignore_reg_for_conflicts.\n\nFrom-SVN: r270448", "tree": {"sha": "cd0418af53139a137f8dd617f15eccffc95c5dc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd0418af53139a137f8dd617f15eccffc95c5dc2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8503f963b046de1f40f9519643528a3fb8f82191", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8503f963b046de1f40f9519643528a3fb8f82191", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8503f963b046de1f40f9519643528a3fb8f82191", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8503f963b046de1f40f9519643528a3fb8f82191/comments", "author": {"login": "peter-bergner", "id": 17504345, "node_id": "MDQ6VXNlcjE3NTA0MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter-bergner", "html_url": "https://github.com/peter-bergner", "followers_url": "https://api.github.com/users/peter-bergner/followers", "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}", "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions", "organizations_url": "https://api.github.com/users/peter-bergner/orgs", "repos_url": "https://api.github.com/users/peter-bergner/repos", "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}", "received_events_url": "https://api.github.com/users/peter-bergner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6c76c0e408765f43253b2457363978f8fd5ca6f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c76c0e408765f43253b2457363978f8fd5ca6f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c76c0e408765f43253b2457363978f8fd5ca6f3"}], "stats": {"total": 28, "additions": 18, "deletions": 10}, "files": [{"sha": "c240c54b25f1d7106727654c81534915bde0a17d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8503f963b046de1f40f9519643528a3fb8f82191/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8503f963b046de1f40f9519643528a3fb8f82191/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8503f963b046de1f40f9519643528a3fb8f82191", "patch": "@@ -1,3 +1,9 @@\n+2019-04-18  Peter Bergner  <bergner@linux.ibm.com>\n+\n+\tPR rtl-optimization/87871\n+\t* ira-lives.c (make_object_dead): Don't add conflicts to\n+\tTOTAL_CONFLICT_HARD_REGS for register ignore_reg_for_conflicts.\n+\n 2019-04-18  Martin Sebor  <msebor@redhat.com>\n \n \tPR middle-end/89797"}, {"sha": "faadf08b07387ccc1b3c4a5f339767557ec4165d", "filename": "gcc/ira-lives.c", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8503f963b046de1f40f9519643528a3fb8f82191/gcc%2Fira-lives.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8503f963b046de1f40f9519643528a3fb8f82191/gcc%2Fira-lives.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-lives.c?ref=8503f963b046de1f40f9519643528a3fb8f82191", "patch": "@@ -163,7 +163,9 @@ static void\n make_object_dead (ira_object_t obj)\n {\n   live_range_t lr;\n+  int regno;\n   int ignore_regno = -1;\n+  int ignore_total_regno = -1;\n   int end_regno = -1;\n \n   sparseset_clear_bit (objects_live, OBJECT_CONFLICT_ID (obj));\n@@ -174,16 +176,14 @@ make_object_dead (ira_object_t obj)\n       && REGNO (ignore_reg_for_conflicts) < FIRST_PSEUDO_REGISTER)\n     {\n       end_regno = END_REGNO (ignore_reg_for_conflicts);\n-      int src_regno = ignore_regno = REGNO (ignore_reg_for_conflicts);\n+      ignore_regno = ignore_total_regno = REGNO (ignore_reg_for_conflicts);\n \n-      while (src_regno < end_regno)\n+      for (regno = ignore_regno; regno < end_regno; regno++)\n \t{\n-\t  if (TEST_HARD_REG_BIT (OBJECT_CONFLICT_HARD_REGS (obj), src_regno))\n-\t    {\n-\t      ignore_regno = end_regno = -1;\n-\t      break;\n-\t    }\n-\t  src_regno++;\n+\t  if (TEST_HARD_REG_BIT (OBJECT_CONFLICT_HARD_REGS (obj), regno))\n+\t    ignore_regno = end_regno;\n+\t  if (TEST_HARD_REG_BIT (OBJECT_TOTAL_CONFLICT_HARD_REGS (obj), regno))\n+\t    ignore_total_regno = end_regno;\n \t}\n     }\n \n@@ -192,8 +192,10 @@ make_object_dead (ira_object_t obj)\n \n   /* If IGNORE_REG_FOR_CONFLICTS did not already conflict with OBJ, make\n      sure it still doesn't.  */\n-  for (; ignore_regno < end_regno; ignore_regno++)\n-    CLEAR_HARD_REG_BIT (OBJECT_CONFLICT_HARD_REGS (obj), ignore_regno);\n+  for (regno = ignore_regno; regno < end_regno; regno++)\n+    CLEAR_HARD_REG_BIT (OBJECT_CONFLICT_HARD_REGS (obj), regno);\n+  for (regno = ignore_total_regno; regno < end_regno; regno++)\n+    CLEAR_HARD_REG_BIT (OBJECT_TOTAL_CONFLICT_HARD_REGS (obj), regno);\n \n   lr = OBJECT_LIVE_RANGES (obj);\n   ira_assert (lr != NULL);"}]}