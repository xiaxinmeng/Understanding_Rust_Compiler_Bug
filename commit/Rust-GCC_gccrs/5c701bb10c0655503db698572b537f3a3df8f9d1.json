{"sha": "5c701bb10c0655503db698572b537f3a3df8f9d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWM3MDFiYjEwYzA2NTU1MDNkYjY5ODU3MmI1MzdmM2EzZGY4ZjlkMQ==", "commit": {"author": {"name": "Jeff Sturm", "email": "jsturm@one-point.com", "date": "2001-09-17T23:16:28Z"}, "committer": {"name": "Jeff Sturm", "email": "jsturm@gcc.gnu.org", "date": "2001-09-17T23:16:28Z"}, "message": "except.c (dw2_build_landing_pads): New local clobbers_hard_regs.\n\n\t* except.c (dw2_build_landing_pads): New local\n\tclobbers_hard_regs.  Emit an ASM_INPUT as a scheduling\n\tbarrier after clobbers.  Fixes c++/4012.\n\nFrom-SVN: r45667", "tree": {"sha": "dd7f6e080847210376fcad70b237cd3df3c4dce4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd7f6e080847210376fcad70b237cd3df3c4dce4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c701bb10c0655503db698572b537f3a3df8f9d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c701bb10c0655503db698572b537f3a3df8f9d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c701bb10c0655503db698572b537f3a3df8f9d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c701bb10c0655503db698572b537f3a3df8f9d1/comments", "author": null, "committer": null, "parents": [{"sha": "c793eea7abb23067e67179546acfea0db28af1ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c793eea7abb23067e67179546acfea0db28af1ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c793eea7abb23067e67179546acfea0db28af1ae"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "6a069f1a9681f5a4b688e26eda836ffe4cb2b0aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c701bb10c0655503db698572b537f3a3df8f9d1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c701bb10c0655503db698572b537f3a3df8f9d1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5c701bb10c0655503db698572b537f3a3df8f9d1", "patch": "@@ -1,3 +1,9 @@\n+2001-09-17  Jeff Sturm  <jsturm@one-point.com>\n+\n+\t* except.c (dw2_build_landing_pads): New local\n+\tclobbers_hard_regs.  Emit an ASM_INPUT as a scheduling\n+\tbarrier after clobbers.  Fixes c++/4012.\n+\n 2001-09-17  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* gcc.c (find_file): Use ACONCAT in lieu of alloca/strcpy/strcat."}, {"sha": "bc21b2c07e29646b16458cba3d9f76cb10e9635e", "filename": "gcc/except.c", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c701bb10c0655503db698572b537f3a3df8f9d1/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c701bb10c0655503db698572b537f3a3df8f9d1/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=5c701bb10c0655503db698572b537f3a3df8f9d1", "patch": "@@ -1865,6 +1865,7 @@ dw2_build_landing_pads ()\n     {\n       struct eh_region *region = cfun->eh->region_array[i];\n       rtx seq;\n+      bool clobbers_hard_regs = false;\n \n       /* Mind we don't process a region more than once.  */\n       if (!region || region->region_number != i)\n@@ -1901,7 +1902,19 @@ dw2_build_landing_pads ()\n \t  if (r == INVALID_REGNUM)\n \t    break;\n \t  if (! call_used_regs[r])\n-\t    emit_insn (gen_rtx_CLOBBER (VOIDmode, gen_rtx_REG (Pmode, r)));\n+\t    {\n+\t      emit_insn (gen_rtx_CLOBBER (VOIDmode, gen_rtx_REG (Pmode, r)));\n+\t      clobbers_hard_regs = true;\n+\t    }\n+\t}\n+\n+      if (clobbers_hard_regs)\n+\t{\n+\t  /* @@@ This is a kludge.  Not all machine descriptions define a\n+\t     blockage insn, but we must not allow the code we just generated\n+\t     to be reordered by scheduling.  So emit an ASM_INPUT to act as\n+\t     blockage insn. */\n+\t  emit_insn (gen_rtx_ASM_INPUT (VOIDmode, \"\"));\n \t}\n \n       emit_move_insn (cfun->eh->exc_ptr,"}]}