{"sha": "8b0397a68af1f1f4d5b3dd8287d536ffafbfec95", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIwMzk3YTY4YWYxZjFmNGQ1YjNkZDgyODdkNTM2ZmZhZmJmZWM5NQ==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "drow@mvista.com", "date": "2002-06-12T18:07:32Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-06-12T18:07:32Z"}, "message": "elf.h (DWARF2_DEBUG_INFO): Define.\n\n        * config/mips/elf.h (DWARF2_DEBUG_INFO): Define.\n        * config/mips/mips.c (mips_output_filename): Don't print a\n        \".file\" directive if we are using DWARF-2.\n        (mips_output_function_prologue): Do not emit source file\n        name for TARGET_GAS.\n\nFrom-SVN: r54560", "tree": {"sha": "9c54080b7fa47f986d96a7bf0089af17c30532bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c54080b7fa47f986d96a7bf0089af17c30532bb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95/comments", "author": null, "committer": null, "parents": [{"sha": "6e32abbfc25930c079b643a85750472d50baac00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e32abbfc25930c079b643a85750472d50baac00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e32abbfc25930c079b643a85750472d50baac00"}], "stats": {"total": 32, "additions": 27, "deletions": 5}, "files": [{"sha": "53037b32fe79370945388e9b76f831e60c5b4eef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8b0397a68af1f1f4d5b3dd8287d536ffafbfec95", "patch": "@@ -1,3 +1,11 @@\n+2002-06-12  Daniel Jacobowitz  <drow@mvista.com>\n+\n+\t* config/mips/elf.h (DWARF2_DEBUG_INFO): Define.\n+\t* config/mips/mips.c (mips_output_filename): Don't print a\n+\t\".file\" directive if we are using DWARF-2.\n+\t(mips_output_function_prologue): Do not emit source file\n+\tname for TARGET_GAS.\n+\n Wed Jun 12 16:45:13 CEST 2002  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (shift patterns): Use (TARGET_SHIFT1 || optimize_size) to\n@@ -6,9 +14,9 @@ Wed Jun 12 16:45:13 CEST 2002  Jan Hubicka  <jh@suse.cz>\n \t(TARGET_SHIFT1): New macro.\n \t* i386.c (x86_shift1): New global variable.\n \n-\t* toplev.c (rest_of_compilation): Call find_basic_block pre-loop unconditionally;\n-\tmake loop to rebuild CFG; kill unnecesary find_basic_block calls;\n-\tkill compute_bb_for_insn call.\n+\t* toplev.c (rest_of_compilation): Call find_basic_block pre-loop\n+\tunconditionally; make loop to rebuild CFG; kill unnecesary\n+\tfind_basic_block calls; kill compute_bb_for_insn call.\n \t* cfgbuild.c (find_basic_blocks): Kill compute_bb_for_insn call.\n \t* haifa-sched.c (sched_init): Likewise.\n \t* ssa-ccp.c (ssa_const_prop): Likewise."}, {"sha": "8e22e0bcd6afa66509d4026000175883263e2ed0", "filename": "gcc/config/mips/elf.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95/gcc%2Fconfig%2Fmips%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95/gcc%2Fconfig%2Fmips%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Felf.h?ref=8b0397a68af1f1f4d5b3dd8287d536ffafbfec95", "patch": "@@ -22,6 +22,12 @@ Boston, MA 02111-1307, USA.  */\n /* Use ELF.  */\n #define OBJECT_FORMAT_ELF\n \n+/* All ELF targets can support DWARF-2.  */\n+\n+#ifndef DWARF2_DEBUGGING_INFO\n+#define DWARF2_DEBUGGING_INFO 1\n+#endif\n+\n /* Until we figure out what MIPS ELF targets normally use, just do\n    stabs in ELF.  */\n #ifndef PREFERRED_DEBUGGING_TYPE"}, {"sha": "0203a8827035463f5047fbbe58e3a3677273e504", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b0397a68af1f1f4d5b3dd8287d536ffafbfec95/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=8b0397a68af1f1f4d5b3dd8287d536ffafbfec95", "patch": "@@ -6025,7 +6025,11 @@ mips_output_filename (stream, name)\n   static int first_time = 1;\n   char ltext_label_name[100];\n \n-  if (first_time)\n+  /* If we are emitting DWARF-2, let dwarf2out handle the \".file\"\n+     directives.  */\n+  if (write_symbols == DWARF2_DEBUG)\n+    return;\n+  else if (first_time)\n     {\n       first_time = 0;\n       SET_FILE_NUMBER ();\n@@ -6949,7 +6953,11 @@ mips_output_function_prologue (file, size)\n #endif\n   HOST_WIDE_INT tsize = current_frame_info.total_size;\n \n-  ASM_OUTPUT_SOURCE_FILENAME (file, DECL_SOURCE_FILE (current_function_decl));\n+  /* ??? When is this really needed?  At least the GNU assembler does not\n+     need the source filename more than once in the file, beyond what is\n+     emitted by the debug information.  */\n+  if (!TARGET_GAS)\n+    ASM_OUTPUT_SOURCE_FILENAME (file, DECL_SOURCE_FILE (current_function_decl));\n \n #ifdef SDB_DEBUGGING_INFO\n   if (debug_info_level != DINFO_LEVEL_TERSE && write_symbols == SDB_DEBUG)"}]}