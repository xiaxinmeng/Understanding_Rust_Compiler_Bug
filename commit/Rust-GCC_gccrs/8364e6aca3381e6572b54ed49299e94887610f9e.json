{"sha": "8364e6aca3381e6572b54ed49299e94887610f9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM2NGU2YWNhMzM4MWU2NTcyYjU0ZWQ0OTI5OWU5NDg4NzYxMGY5ZQ==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-05-28T14:02:57Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-05-28T14:02:57Z"}, "message": "frontend-passes.c (matmul_lhs_realloc): Correct allocation size for case A1B2.\n\n2017-05-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\t* frontend-passes.c (matmul_lhs_realloc):  Correct\n\tallocation size for case A1B2.\n\n2017-05-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\t* gfortran.dg/matmul_bounds_12.f90:  New test.\n\nFrom-SVN: r248546", "tree": {"sha": "4f5958447440e1d671791b3ffc5ca822c8f4d4b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f5958447440e1d671791b3ffc5ca822c8f4d4b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8364e6aca3381e6572b54ed49299e94887610f9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8364e6aca3381e6572b54ed49299e94887610f9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8364e6aca3381e6572b54ed49299e94887610f9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8364e6aca3381e6572b54ed49299e94887610f9e/comments", "author": null, "committer": null, "parents": [{"sha": "238108d24d602f5e82d5072e19c2b4133139067b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/238108d24d602f5e82d5072e19c2b4133139067b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/238108d24d602f5e82d5072e19c2b4133139067b"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "c9c6a027d87ecf5a8ffe20b00feb21ad6022ae0a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8364e6aca3381e6572b54ed49299e94887610f9e", "patch": "@@ -1,3 +1,8 @@\n+2017-05-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\t* frontend-passes.c (matmul_lhs_realloc):  Correct\n+\tallocation size for case A1B2.\n+\n 2017-05-25  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \t* dump-parse-tree.c (show_expr):  Also replace"}, {"sha": "62cccc81b67120d747fc1f2b613341ac2c264b36", "filename": "gcc/fortran/frontend-passes.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ffortran%2Ffrontend-passes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ffortran%2Ffrontend-passes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ffrontend-passes.c?ref=8364e6aca3381e6572b54ed49299e94887610f9e", "patch": "@@ -2447,7 +2447,7 @@ matmul_lhs_realloc (gfc_expr *c, gfc_expr *a, gfc_expr *b,\n       break;\n \n     case A1B2:\n-      ar->start[0] = get_array_inq_function (GFC_ISYM_SIZE, b, 1);\n+      ar->start[0] = get_array_inq_function (GFC_ISYM_SIZE, b, 2);\n       cond = build_logical_expr (INTRINSIC_NE,\n \t\t\t\t get_array_inq_function (GFC_ISYM_SIZE, c, 1),\n \t\t\t\t get_array_inq_function (GFC_ISYM_SIZE, b, 2));"}, {"sha": "bdad0677a3ea7882b47721391ec723aa4a9b3757", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8364e6aca3381e6572b54ed49299e94887610f9e", "patch": "@@ -1,3 +1,7 @@\n+2017-05-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\t* gfortran.dg/matmul_bounds_12.f90:  New test.\n+\n 2017-05-27  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR bootstrap/80887"}, {"sha": "01b3df92c3f895c3c2d409555881cce5c5b66271", "filename": "gcc/testsuite/gfortran.dg/matmul_bounds_12.f90", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ftestsuite%2Fgfortran.dg%2Fmatmul_bounds_12.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8364e6aca3381e6572b54ed49299e94887610f9e/gcc%2Ftestsuite%2Fgfortran.dg%2Fmatmul_bounds_12.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fmatmul_bounds_12.f90?ref=8364e6aca3381e6572b54ed49299e94887610f9e", "patch": "@@ -0,0 +1,17 @@\n+! { dg-do run }\n+program main\n+  real, dimension(3,2) :: a\n+  real, dimension(3) :: bp\n+  real, dimension(3) :: res1\n+  real, dimension(:), allocatable :: c3\n+  real, dimension(2) :: res2\n+\n+  data a /-2., 3., -5., 7., -11., 13./\n+  data bp /-23., -31., -41./\n+  data res2 /158., -353./\n+\n+  c3 = matmul(bp,a)\n+  if (size(c3,1) /= 2) call abort\n+  if (any(c3 /= res2)) call abort\n+\n+end program main"}]}