{"sha": "720653a39b081dad186c39084176c29c8ed4b6ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzIwNjUzYTM5YjA4MWRhZDE4NmMzOTA4NDE3NmMyOWM4ZWQ0YjZlZA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-01-22T12:56:23Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-01-22T12:56:23Z"}, "message": "(our_file_name): New variable.\n\n(find_a_file): Ignore filename equal to that in our_file_name.\n(main): Initialize our_file_name.\n\nFrom-SVN: r3299", "tree": {"sha": "1205f2c07f1379a22ab22a1a23eeb7517c3e4483", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1205f2c07f1379a22ab22a1a23eeb7517c3e4483"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/720653a39b081dad186c39084176c29c8ed4b6ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/720653a39b081dad186c39084176c29c8ed4b6ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/720653a39b081dad186c39084176c29c8ed4b6ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/720653a39b081dad186c39084176c29c8ed4b6ed/comments", "author": null, "committer": null, "parents": [{"sha": "4d3cea21c7753c244069178c956b5fa8bec73bc6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d3cea21c7753c244069178c956b5fa8bec73bc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d3cea21c7753c244069178c956b5fa8bec73bc6"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "2cd9b1762d882d009fda429669a847ef95c19e85", "filename": "gcc/collect2.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/720653a39b081dad186c39084176c29c8ed4b6ed/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/720653a39b081dad186c39084176c29c8ed4b6ed/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=720653a39b081dad186c39084176c29c8ed4b6ed", "patch": "@@ -483,6 +483,11 @@ static struct path_prefix cpath, path;\n \n static char *target_machine = TARGET_MACHINE;\n #endif\n+\n+/* Name under which we were executed.  Never return that file in our\n+   searches.  */\n+\n+static char *our_file_name;\n \f\n /* Search for NAME using prefix list PPREFIX.  We only look for executable\n    files. \n@@ -519,14 +524,14 @@ find_a_file (pprefix, name)\n       {\n \tstrcpy (temp, pl->prefix);\n \tstrcat (temp, name);\n-\tif (access (temp, X_OK) == 0)\n+\tif (strcmp (temp, our_file_name) != 0 && access (temp, X_OK) == 0)\n \t  return temp;\n \n #ifdef EXECUTABLE_SUFFIX\n \t/* Some systems have a suffix for executable files.\n \t   So try appending that.  */\n \tstrcat (temp, EXECUTABLE_SUFFIX);\n-\tif (access (temp, X_OK) == 0)\n+\tif (strcmp (temp, our_file_name) != 0 && access (temp, X_OK) == 0)\n \t  return temp;\n #endif\n       }\n@@ -657,6 +662,8 @@ main (argc, argv)\n   vflag = 1;\n #endif\n \n+  our_file_name = argv[0];\n+\n   p = (char *) getenv (\"COLLECT_GCC_OPTIONS\");\n   if (p)\n     while (*p)"}]}