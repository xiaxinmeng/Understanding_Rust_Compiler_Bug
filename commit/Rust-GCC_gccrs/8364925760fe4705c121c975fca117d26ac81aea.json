{"sha": "8364925760fe4705c121c975fca117d26ac81aea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM2NDkyNTc2MGZlNDcwNWMxMjFjOTc1ZmNhMTE3ZDI2YWM4MWFlYQ==", "commit": {"author": {"name": "Pascal Obry", "email": "obry@adacore.com", "date": "2012-02-08T09:29:11Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-02-08T09:29:11Z"}, "message": "prj.ads, prj.adb (For_Project_And_Aggregated_Context): New generic routine with a context parameter.\n\n2012-02-08  Pascal Obry  <obry@adacore.com>\n\n\t* prj.ads, prj.adb (For_Project_And_Aggregated_Context): New\n\tgeneric routine with a context parameter.\n\nFrom-SVN: r183998", "tree": {"sha": "c45d8f19e5e043dd66ac3253929647948d5cab81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c45d8f19e5e043dd66ac3253929647948d5cab81"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8364925760fe4705c121c975fca117d26ac81aea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8364925760fe4705c121c975fca117d26ac81aea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8364925760fe4705c121c975fca117d26ac81aea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8364925760fe4705c121c975fca117d26ac81aea/comments", "author": {"login": "TurboGit", "id": 467069, "node_id": "MDQ6VXNlcjQ2NzA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/467069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TurboGit", "html_url": "https://github.com/TurboGit", "followers_url": "https://api.github.com/users/TurboGit/followers", "following_url": "https://api.github.com/users/TurboGit/following{/other_user}", "gists_url": "https://api.github.com/users/TurboGit/gists{/gist_id}", "starred_url": "https://api.github.com/users/TurboGit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TurboGit/subscriptions", "organizations_url": "https://api.github.com/users/TurboGit/orgs", "repos_url": "https://api.github.com/users/TurboGit/repos", "events_url": "https://api.github.com/users/TurboGit/events{/privacy}", "received_events_url": "https://api.github.com/users/TurboGit/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a8551b5f9cf959cc54c8277f3ddbd7df1842d154", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8551b5f9cf959cc54c8277f3ddbd7df1842d154", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8551b5f9cf959cc54c8277f3ddbd7df1842d154"}], "stats": {"total": 66, "additions": 66, "deletions": 0}, "files": [{"sha": "76ff4fb23fcd065b0f42490455384e8a08dde407", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8364925760fe4705c121c975fca117d26ac81aea/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8364925760fe4705c121c975fca117d26ac81aea/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=8364925760fe4705c121c975fca117d26ac81aea", "patch": "@@ -1,3 +1,8 @@\n+2012-02-08  Pascal Obry  <obry@adacore.com>\n+\n+\t* prj.ads, prj.adb (For_Project_And_Aggregated_Context): New\n+\tgeneric routine with a context parameter.\n+\n 2012-02-08  Robert Dewar  <dewar@adacore.com>\n \n \t* a-coinve.adb, sem_util.adb, sem_ch8.adb, a-cobove.adb,"}, {"sha": "15cb808f0d1d7ae32b201a8a0be0053a09540ca1", "filename": "gcc/ada/prj.adb", "status": "modified", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8364925760fe4705c121c975fca117d26ac81aea/gcc%2Fada%2Fprj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8364925760fe4705c121c975fca117d26ac81aea/gcc%2Fada%2Fprj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.adb?ref=8364925760fe4705c121c975fca117d26ac81aea", "patch": "@@ -1863,6 +1863,56 @@ package body Prj is\n       end if;\n    end For_Project_And_Aggregated;\n \n+   ----------------------------------------\n+   -- For_Project_And_Aggregated_Context --\n+   ----------------------------------------\n+\n+   procedure For_Project_And_Aggregated_Context\n+     (Root_Project : Project_Id;\n+      Root_Tree    : Project_Tree_Ref)\n+   is\n+\n+      procedure Recursive_Process\n+        (Project : Project_Id;\n+         Tree    : Project_Tree_Ref;\n+         Context : Project_Context);\n+      --  Process Project and all aggregated projects recursively\n+\n+      -----------------------\n+      -- Recursive_Process --\n+      -----------------------\n+\n+      procedure Recursive_Process\n+        (Project : Project_Id;\n+         Tree    : Project_Tree_Ref;\n+         Context : Project_Context)\n+      is\n+         Agg : Aggregated_Project_List;\n+         Ctx : Project_Context;\n+      begin\n+         Action (Project, Tree, Context);\n+\n+         if Project.Qualifier in Aggregate_Project then\n+            Ctx :=\n+              (In_Aggregate_Lib      => True,\n+               From_Encapsulated_Lib =>\n+                 Context.From_Encapsulated_Lib\n+                   or else\n+                 Project.Standalone_Library = Encapsulated);\n+\n+            Agg := Project.Aggregated_Projects;\n+            while Agg /= null loop\n+               Recursive_Process (Agg.Project, Agg.Tree, Ctx);\n+               Agg := Agg.Next;\n+            end loop;\n+         end if;\n+      end Recursive_Process;\n+\n+   begin\n+      Recursive_Process\n+        (Root_Project, Root_Tree, Project_Context'(False, False));\n+   end For_Project_And_Aggregated_Context;\n+\n --  Package initialization for Prj\n \n begin"}, {"sha": "44aa94d8151767c535688a20d52fb7c0f208ea73", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8364925760fe4705c121c975fca117d26ac81aea/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8364925760fe4705c121c975fca117d26ac81aea/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=8364925760fe4705c121c975fca117d26ac81aea", "patch": "@@ -1621,6 +1621,17 @@ package Prj is\n       With_State         : in out State;\n       Include_Aggregated : Boolean := True;\n       Imported_First     : Boolean := False);\n+   --  As above but with an associated context\n+\n+   generic\n+      with procedure Action\n+        (Project : Project_Id;\n+         Tree    : Project_Tree_Ref;\n+         Context : Project_Context);\n+   procedure For_Project_And_Aggregated_Context\n+     (Root_Project : Project_Id;\n+      Root_Tree    : Project_Tree_Ref);\n+   --  As above but with an associated context\n \n    function Extend_Name\n      (File        : File_Name_Type;"}]}