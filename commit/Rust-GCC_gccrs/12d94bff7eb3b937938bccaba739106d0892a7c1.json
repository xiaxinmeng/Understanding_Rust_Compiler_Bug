{"sha": "12d94bff7eb3b937938bccaba739106d0892a7c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTJkOTRiZmY3ZWIzYjkzNzkzOGJjY2FiYTczOTEwNmQwODkyYTdjMQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-03-15T12:57:55Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-03-15T12:57:55Z"}, "message": "(objc_module): Eliminate statics variable.\n\nFrom-SVN: r13713", "tree": {"sha": "cf79b35a7ff49b4af5c7653d4c50e135e6808dc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf79b35a7ff49b4af5c7653d4c50e135e6808dc4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12d94bff7eb3b937938bccaba739106d0892a7c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12d94bff7eb3b937938bccaba739106d0892a7c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12d94bff7eb3b937938bccaba739106d0892a7c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12d94bff7eb3b937938bccaba739106d0892a7c1/comments", "author": null, "committer": null, "parents": [{"sha": "d3d71914cbbbf32e38cf96ac8f6760685937956b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3d71914cbbbf32e38cf96ac8f6760685937956b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3d71914cbbbf32e38cf96ac8f6760685937956b"}], "stats": {"total": 34, "additions": 20, "deletions": 14}, "files": [{"sha": "2f5e8deb2b147d95f13102be982317690b67ac00", "filename": "gcc/objc/objc-api.h", "status": "modified", "additions": 20, "deletions": 14, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12d94bff7eb3b937938bccaba739106d0892a7c1/gcc%2Fobjc%2Fobjc-api.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12d94bff7eb3b937938bccaba739106d0892a7c1/gcc%2Fobjc%2Fobjc-api.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-api.h?ref=12d94bff7eb3b937938bccaba739106d0892a7c1", "patch": "@@ -134,6 +134,16 @@ objc_error_handler objc_set_error_handler(objc_error_handler func);\n extern BOOL objc_trace;\n \n \n+/* For every class which happens to have statically allocated instances in\n+   this module, one OBJC_STATIC_INSTANCES is allocated by the compiler.\n+   INSTANCES is NULL terminated and points to all statically allocated\n+   instances of this class.  */\n+struct objc_static_instances\n+{\n+  char *class_name;\n+  id instances[0];\n+};\n+\n /*\n ** Whereas a Module (defined further down) is the root (typically) of a file,\n ** a Symtab is the root of the class and category definitions within the\n@@ -150,23 +160,16 @@ typedef struct objc_symtab {\n   unsigned short cat_def_cnt;                   /* Number of categories \n                                                   compiled (defined) in the \n                                                   module. */\n+\n   void      *defs[1];                           /* Variable array of pointers.\n                                                   cls_def_cnt of type Class \n                                                   followed by cat_def_cnt of\n-                                                  type Category_t. */\n+                                                  type Category_t, followed\n+\t\t\t\t\t\t  by a NULL terminated array\n+\t\t\t\t\t\t  of objc_static_instances. */\n } Symtab,   *Symtab_t;\n \n \n-/* For every class which happens to have statically allocated instances in\n-   this module, one OBJC_STATIC_INSTANCES is allocated by the compiler.\n-   INSTANCES is NULL terminated and points to all statically allocated\n-   instances of this class.  */\n-struct objc_static_instances\n-{\n-  char *class_name;\n-  id instances[0];\n-};\n-\n /*\n ** The compiler generates one of these structures for each module that\n ** composes the executable (eg main.m).  \n@@ -183,9 +186,6 @@ typedef struct objc_module {\n                                                   module was generated.   The \n                                                   name includes the path. */\n \n-  /* Pointer to a NULL terminated array of objc_static_instances.  */\n-  struct objc_static_instances **statics;\n-\n   Symtab_t    symtab;                           /* Pointer to the Symtab of\n                                                   the module.  The Symtab\n                                                   holds an array of \n@@ -443,6 +443,12 @@ BOOL sel_is_mapped (SEL aSel);\n \n extern id class_create_instance(Class class);\n \n+/* You should call this function immediately after a bundle has loaded the\n+   code. This function sends the +load message to all classes/categories\n+   just loaded and then calls the _objc_load_callback function for each\n+   class/category. */\n+extern void objc_send_load (void);\n+\n static inline const char *\n class_get_class_name(Class class)\n {"}]}