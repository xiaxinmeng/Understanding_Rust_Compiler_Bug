{"sha": "6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmFkNzlmMWI4YjlkMDYxZmIzZDgxYjZmOTUwZjcxMTVkNjQ0ZjBiNg==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2000-08-29T17:34:26Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2000-08-29T17:34:26Z"}, "message": "c-decl.c (define_label): Call warning_with_file_and_line and error_with_file_and_line instead of plain...\n\n\t* c-decl.c (define_label): Call warning_with_file_and_line and\n\terror_with_file_and_line instead of plain warning or error.\n\n\t* c-parse.in (label): Use save_filename/save_lineno to ensure\n\tcorrect values for calls to define_label.\n\nFrom-SVN: r36040", "tree": {"sha": "2c1ecb13722eae486296a2d1dc7dd617f60201d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c1ecb13722eae486296a2d1dc7dd617f60201d2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6/comments", "author": null, "committer": null, "parents": [{"sha": "c00f0fb22b193ad055fc552a9213bd5c1b48f032", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c00f0fb22b193ad055fc552a9213bd5c1b48f032", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c00f0fb22b193ad055fc552a9213bd5c1b48f032"}], "stats": {"total": 22, "additions": 16, "deletions": 6}, "files": [{"sha": "add224b1c282e688c3f050580526f31a1a9c6f7f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6", "patch": "@@ -1,3 +1,11 @@\n+2000-08-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* c-decl.c (define_label): Call warning_with_file_and_line and\n+\terror_with_file_and_line instead of plain warning or error.\n+\n+\t* c-parse.in (label): Use save_filename/save_lineno to ensure\n+\tcorrect values for calls to define_label.\n+\n 2000-08-29  Mark Mitchell  <mark@codesourcery.com>\n \n \t* calls.c (expand_call): Don't create a VAR_DECL just to throw it"}, {"sha": "545ac880d98f30a501e9b4f6b35cfd0131bd2f79", "filename": "gcc/c-decl.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6", "patch": "@@ -2747,12 +2747,14 @@ define_label (filename, line, name)\n     }\n \n   if (warn_traditional && !in_system_header && lookup_name (name))\n-    warning (\"traditional C lacks a separate namespace for labels, identifier `%s' conflicts\",\n-\t     IDENTIFIER_POINTER (name));\n+    warning_with_file_and_line (filename, line,\n+\t\t\t\t\"traditional C lacks a separate namespace for labels, identifier `%s' conflicts\",\n+\t\t\t\tIDENTIFIER_POINTER (name));\n \n   if (DECL_INITIAL (decl) != 0)\n     {\n-      error (\"duplicate label `%s'\", IDENTIFIER_POINTER (name));\n+      error_with_file_and_line (filename, line, \"duplicate label `%s'\",\n+\t\t\t\tIDENTIFIER_POINTER (name));\n       return 0;\n     }\n   else"}, {"sha": "588faeb41a188042e17a9b93cacb47bf54c82f6a", "filename": "gcc/c-parse.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=6ad79f1b8b9d061fb3d81b6f950f7115d644f0b6", "patch": "@@ -1951,14 +1951,14 @@ label:\t  CASE expr_no_commas ':'\n \t\t  genrtl_case_label(CASE_LOW(case_label_tree), CASE_HIGH(case_label_tree));\n \t\t  position_after_white_space ();\n \t\t}\n-\t| identifier ':' maybe_attribute\n-\t\t{ tree label = define_label (input_filename, lineno, $1);\n+\t| identifier ':' save_filename save_lineno maybe_attribute\n+\t\t{ tree label = define_label ($3, $4, $1);\n \t\t  stmt_count++;\n \t\t  emit_nop ();\n \t\t  if (label)\n \t\t    {\n \t\t      expand_label (label);\n-\t\t      decl_attributes (label, $3, NULL_TREE);\n+\t\t      decl_attributes (label, $5, NULL_TREE);\n \t\t    }\n \t\t  position_after_white_space (); }\n \t;"}]}