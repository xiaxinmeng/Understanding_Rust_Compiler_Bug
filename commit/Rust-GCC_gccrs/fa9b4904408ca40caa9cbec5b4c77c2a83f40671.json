{"sha": "fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE5YjQ5MDQ0MDhjYTQwY2FhOWNiZWM1YjRjNzdjMmE4M2Y0MDY3MQ==", "commit": {"author": {"name": "Arpad Beszedes", "email": "beszedes@cc.u-szeged.hu", "date": "2003-03-24T01:24:41Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2003-03-24T01:24:41Z"}, "message": "builtins.c (expand_builtin_fputs): When optimizing for size, don't transform fputs into fwrite.\n\ngcc:\n\t* builtins.c (expand_builtin_fputs): When optimizing for size,\n\tdon't transform fputs into fwrite.\ntestsuite:\n\t* gcc.c-torture/execute/stdio-opt-1.c: Adjust test for change to\n\tbuiltin fputs.\n\nFrom-SVN: r64771", "tree": {"sha": "40ad8cb350664cb3951fd8f957ad6361662fe077", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/40ad8cb350664cb3951fd8f957ad6361662fe077"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/comments", "author": null, "committer": null, "parents": [{"sha": "ce1bb3bbbaeebbeea5b9e3b41e98efac1a3530ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce1bb3bbbaeebbeea5b9e3b41e98efac1a3530ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce1bb3bbbaeebbeea5b9e3b41e98efac1a3530ed"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "5e130ce0383f8791a5d2d834fec74ac33fa4186c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "patch": "@@ -1,3 +1,8 @@\n+2003-03-23  Arpad Beszedes <beszedes@cc.u-szeged.hu>\n+\n+\t* builtins.c (expand_builtin_fputs): When optimizing for size,\n+\tdon't transform fputs into fwrite.\n+\n 2003-03-23  Glen Nakamura <glen@imodulo.com>\n \n \tPR c/8224"}, {"sha": "b6fe4b4fbe60821269659184af7029e3bfe5631f", "filename": "gcc/builtins.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "patch": "@@ -3796,8 +3796,12 @@ expand_builtin_fputs (arglist, ignore, unlocked)\n       /* FALLTHROUGH */\n     case 1: /* length is greater than 1, call fwrite.  */\n       {\n-\ttree string_arg = TREE_VALUE (arglist);\n+\ttree string_arg;\n \n+\t/* If optimizing for size keep fputs. */\n+\tif (optimize_size)\n+\t  return 0;\n+\tstring_arg = TREE_VALUE (arglist);\n \t/* New argument list transforming fputs(string, stream) to\n \t   fwrite(string, 1, len, stream).  */\n \targlist = build_tree_list (NULL_TREE, TREE_VALUE (TREE_CHAIN (arglist)));"}, {"sha": "8b85ee443445972b2794a928440f49addd794481", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "patch": "@@ -1,3 +1,8 @@\n+2003-03-23  Arpad Beszedes <beszedes@cc.u-szeged.hu>\n+\n+\t* gcc.c-torture/execute/stdio-opt-1.c: Adjust test for change to\n+\tbuiltin fputs.\n+\n 2003-03-23  Mikulas Patocka <mikulas@artax.karlin.mff.cuni.cz>\n \n \tPR c/8224"}, {"sha": "fc43c5721e883ebc5444ba4e2b462ddd5093cc4f", "filename": "gcc/testsuite/gcc.c-torture/execute/stdio-opt-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fstdio-opt-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa9b4904408ca40caa9cbec5b4c77c2a83f40671/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fstdio-opt-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fstdio-opt-1.c?ref=fa9b4904408ca40caa9cbec5b4c77c2a83f40671", "patch": "@@ -54,7 +54,7 @@ int main()\n   return 0;\n }\n \n-#ifdef __OPTIMIZE__\n+#if defined (__OPTIMIZE__) && ! defined (__OPTIMIZE_SIZE__)\n /* When optimizing, all the above cases should be transformed into\n    something else.  So any remaining calls to the original function\n    should abort.  */"}]}