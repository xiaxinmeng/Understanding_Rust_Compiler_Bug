{"sha": "c5a855ce6e6b55033885ab44417d70eba7a48b57", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzVhODU1Y2U2ZTZiNTUwMzM4ODVhYjQ0NDE3ZDcwZWJhN2E0OGI1Nw==", "commit": {"author": {"name": "Jim Blandy", "email": "jimb@gcc.gnu.org", "date": "1999-04-20T11:00:27Z"}, "committer": {"name": "Jim Blandy", "email": "jimb@gcc.gnu.org", "date": "1999-04-20T11:00:27Z"}, "message": "Fix from Dale Hawkins:\n\n* cplus-dem.c (mop_up): Set typevec_size to zero, so it'll be\nreallocated properly if we use it again.\n* cplus-dem.c (demangle_fund_type): Check for buffer overrun.  Be\nstricter about syntax.  Always null-terminate string.\n\nFrom-SVN: r26562", "tree": {"sha": "cf246382e124c581afa4e2ac223308416eb5459e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf246382e124c581afa4e2ac223308416eb5459e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c5a855ce6e6b55033885ab44417d70eba7a48b57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5a855ce6e6b55033885ab44417d70eba7a48b57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5a855ce6e6b55033885ab44417d70eba7a48b57", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5a855ce6e6b55033885ab44417d70eba7a48b57/comments", "author": null, "committer": null, "parents": [{"sha": "296967fe64ee8b65d64c6b0f4143ced1f50ecc7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/296967fe64ee8b65d64c6b0f4143ced1f50ecc7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/296967fe64ee8b65d64c6b0f4143ced1f50ecc7d"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "e834d2a6a9ca4706666e9220d48bb179b188586f", "filename": "libiberty/cplus-dem.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5a855ce6e6b55033885ab44417d70eba7a48b57/libiberty%2Fcplus-dem.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5a855ce6e6b55033885ab44417d70eba7a48b57/libiberty%2Fcplus-dem.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcplus-dem.c?ref=c5a855ce6e6b55033885ab44417d70eba7a48b57", "patch": "@@ -880,6 +880,7 @@ mop_up (work, declp, success)\n     {\n       free ((char *) work -> typevec);\n       work -> typevec = NULL;\n+      work -> typevec_size = 0;\n     }\n   if (work->tmpl_argvec)\n     {\n@@ -3377,14 +3378,22 @@ demangle_fund_type (work, mangled, result)\n \t{\n \t  int i;\n \t  ++(*mangled);\n-\t  for (i = 0; **mangled && **mangled != '_'; ++(*mangled), ++i)\n+\t  for (i = 0;\n+\t       (i < sizeof (buf) - 1 && **mangled && **mangled != '_');\n+\t       ++(*mangled), ++i)\n \t    buf[i] = **mangled;\n+\t  if (**mangled != '_')\n+\t    {\n+\t      success = 0;\n+\t      break;\n+\t    }\n \t  buf[i] = '\\0';\n \t  ++(*mangled);\n \t}\n       else\n \t{\n \t  strncpy (buf, *mangled, 2);\n+\t  buf[2] = '\\0';\n \t  *mangled += 2;\n \t}\n       sscanf (buf, \"%x\", &dec);"}]}