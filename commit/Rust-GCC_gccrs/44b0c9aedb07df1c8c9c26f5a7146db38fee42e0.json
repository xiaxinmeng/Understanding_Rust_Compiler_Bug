{"sha": "44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDRiMGM5YWVkYjA3ZGYxYzhjOWMyNmY1YTcxNDZkYjM4ZmVlNDJlMA==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2018-07-03T16:38:16Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2018-07-03T16:38:16Z"}, "message": "re PR c++/86201 (ICE: Error reporting routines re-entered)\n\n\tPR c++/86201\n\t* typeck.c (cp_build_binary_op): Check c_inhibit_evaluation_warnings.\n\n\t* g++.dg/diagnostic/pr86201.C: New test.\n\nFrom-SVN: r262353", "tree": {"sha": "32fee22d1ffecef7a59dd8bf161d848659bf28f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/32fee22d1ffecef7a59dd8bf161d848659bf28f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "315aadc8642b72fc2d7172312a35e18074cca85b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/315aadc8642b72fc2d7172312a35e18074cca85b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/315aadc8642b72fc2d7172312a35e18074cca85b"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "e4202e161babe4ace7dab75d0f7315b12079a8f1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "patch": "@@ -1,3 +1,8 @@\n+2018-07-03  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/86201\n+\t* typeck.c (cp_build_binary_op): Check c_inhibit_evaluation_warnings.\n+\n 2018-07-03  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/86378 - functional cast in noexcept-specifier."}, {"sha": "ea4ce9649cd7ff0366860f687a2afc80f874a2b3", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "patch": "@@ -4734,6 +4734,7 @@ cp_build_binary_op (location_t location,\n       if (code0 == VECTOR_TYPE && code1 == VECTOR_TYPE)\n \tgoto vector_compare;\n       if ((complain & tf_warning)\n+\t  && c_inhibit_evaluation_warnings == 0\n \t  && (FLOAT_TYPE_P (type0) || FLOAT_TYPE_P (type1)))\n \twarning (OPT_Wfloat_equal,\n \t\t \"comparing floating point with == or != is unsafe\");"}, {"sha": "2afad58666b80dce1a4122fd61eab8b3cb392b78", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "patch": "@@ -1,3 +1,8 @@\n+2018-07-03  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/86201\n+\t* g++.dg/diagnostic/pr86201.C: New test.\n+\n 2018-07-03  Richard Sandiford  <richard.sandiford@arm.com>\n \n \tPR tree-optimization/85694"}, {"sha": "e7019c22d95d8d5ecd3f6080527ccebec3cf320c", "filename": "gcc/testsuite/g++.dg/diagnostic/pr86201.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fpr86201.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44b0c9aedb07df1c8c9c26f5a7146db38fee42e0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fpr86201.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fpr86201.C?ref=44b0c9aedb07df1c8c9c26f5a7146db38fee42e0", "patch": "@@ -0,0 +1,12 @@\n+// PR c++/86201\n+// { dg-do compile { target c++11 } }\n+\n+template <class U, class V>\n+auto fn1 (V&& v) -> decltype(U(v))\n+{\n+  return; // { dg-error \"return-statement with no value\" }\n+}\n+void fn2 ()\n+{\n+  fn1<bool>(1.0);\n+}"}]}