{"sha": "c6dbe7a56dfb511101ddea98844a7be0027d30a6", "node_id": "C_kwDOANBUbNoAKGM2ZGJlN2E1NmRmYjUxMTEwMWRkZWE5ODg0NGE3YmUwMDI3ZDMwYTY", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2021-09-29T02:01:52Z"}, "committer": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2021-09-29T08:04:15Z"}, "message": "Fix some testcases after my computed goto patch\n\nFor some reason I did not see these failures in my testing.\nSorry about that.  Anyways this fixes the testcases by\nadding a cast to __INTPTR_TYPE__ and then a cast to void*.\n\nCommitted after testing them on x86_64-linux-gnu.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.c-torture/compile/920826-1.c: Fix computed goto.\n\t* gcc.c-torture/compile/pr27863.c: Likewise.\n\t* gcc.c-torture/compile/pr70190.c: Likewise.\n\t* gcc.dg/torture/pr89135.c: Likewise.\n\t* gcc.dg/torture/pr90071.c: Likewise.\n\t* gcc.dg/vect/bb-slp-pr97709.c: Likewise.", "tree": {"sha": "09f0b3147f715f0e944a8f8ab18e349cb32fc38f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/09f0b3147f715f0e944a8f8ab18e349cb32fc38f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6dbe7a56dfb511101ddea98844a7be0027d30a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6dbe7a56dfb511101ddea98844a7be0027d30a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6dbe7a56dfb511101ddea98844a7be0027d30a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6dbe7a56dfb511101ddea98844a7be0027d30a6/comments", "author": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "committer": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2da5ec98516c75aedecf9769b8b804fc03e3bc2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2da5ec98516c75aedecf9769b8b804fc03e3bc2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2da5ec98516c75aedecf9769b8b804fc03e3bc2d"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "2a1754567fa9421113c8abaea5e8d61e241376ee", "filename": "gcc/testsuite/gcc.c-torture/compile/920826-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F920826-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F920826-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F920826-1.c?ref=c6dbe7a56dfb511101ddea98844a7be0027d30a6", "patch": "@@ -1,3 +1,3 @@\n /* { dg-require-effective-target indirect_jumps } */\n \n-f(int*x){goto*(char)*x;}\n+f(int*x){goto*(void*)(__INTPTR_TYPE__)(char)*x;}"}, {"sha": "9dc1ab892276bde7684ff915e2d9e86a255c3ca1", "filename": "gcc/testsuite/gcc.c-torture/compile/pr27863.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27863.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27863.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27863.c?ref=c6dbe7a56dfb511101ddea98844a7be0027d30a6", "patch": "@@ -27,5 +27,5 @@ _loc66:;\n *++esp=(long)&&_loc119;\n  _loc119:;\n SetTermStruc:\n- goto *(*esp--);\n+ goto *(void*)(__INTPTR_TYPE__)(*esp--);\n }"}, {"sha": "6c57b509f6a5ec9b680160675a0cebcd6ab1b515", "filename": "gcc/testsuite/gcc.c-torture/compile/pr70190.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr70190.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr70190.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr70190.c?ref=c6dbe7a56dfb511101ddea98844a7be0027d30a6", "patch": "@@ -8,7 +8,7 @@ fn1 ()\n   static char a[] = \"foo\";\n   static void *b[] = { &&l1, &&l2 };\n   goto *(b[1]);\n- l1: goto *(a[0]);\n+ l1: goto *(void*)(__INTPTR_TYPE__)(a[0]);\n  l2: return 0;\n }\n "}, {"sha": "4cf0533d193cf20f16a33803986fed9fe23444f5", "filename": "gcc/testsuite/gcc.dg/torture/pr89135.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr89135.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr89135.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr89135.c?ref=c6dbe7a56dfb511101ddea98844a7be0027d30a6", "patch": "@@ -28,7 +28,7 @@ bar (void)\n \t  g = foo ();\n \t  *o = g;\n \t  if (c)\n-\t    goto *d;\n+\t    goto *(void*)d;\n \t}\n     }\n   goto *i;"}, {"sha": "1c4099cefe0c426c328330cd992bdb2994580c44", "filename": "gcc/testsuite/gcc.dg/torture/pr90071.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr90071.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr90071.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr90071.c?ref=c6dbe7a56dfb511101ddea98844a7be0027d30a6", "patch": "@@ -21,6 +21,6 @@ h: ++e;\n \t goto i;\n      }\n f:\n-   goto *({ d || e < 0 || e >= 2; });\n+   goto *(void*)(__INTPTR_TYPE__)({ d || e < 0 || e >= 2; });\n    &e;\n }"}, {"sha": "d0f3d0512d946a68b4b8e2c584c9f978decf8d40", "filename": "gcc/testsuite/gcc.dg/vect/bb-slp-pr97709.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr97709.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6dbe7a56dfb511101ddea98844a7be0027d30a6/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr97709.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr97709.c?ref=c6dbe7a56dfb511101ddea98844a7be0027d30a6", "patch": "@@ -12,7 +12,7 @@ e()\n   void *f[] = {&&g, &&h, &&i, &&j};\n   int d, c;\n j:\n-  goto *a;\n+  goto *(void*)(__INTPTR_TYPE__)a;\n g:\n   d = 0;\n h:"}]}