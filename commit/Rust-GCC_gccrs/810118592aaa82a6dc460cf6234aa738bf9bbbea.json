{"sha": "810118592aaa82a6dc460cf6234aa738bf9bbbea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODEwMTE4NTkyYWFhODJhNmRjNDYwY2Y2MjM0YWE3MzhiZjliYmJlYQ==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2019-09-21T22:32:59Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@gcc.gnu.org", "date": "2019-09-21T22:32:59Z"}, "message": "PR middle-end/91830 - Bogus -Warray-bounds on strcpy into a member\n\nPR middle-end/91830 - Bogus -Warray-bounds on strcpy into a member\nof a subobject compiling binutils\n\ngcc/ChangeLog:\n\t* gcc/gimple-ssa-warn-restrict.c (builtin_memref::set_base_and_offset):\n\tSimplify computation of the offset of the referenced subobject.\n\ngcc/testsuite/ChangeLog:\n\t* gcc/testsuite/gcc.dg/Warray-bounds-47.c: New test.\n\nFrom-SVN: r276022", "tree": {"sha": "520a60e61d8c61a5162d4ca8cbb0b7d09e60b3a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/520a60e61d8c61a5162d4ca8cbb0b7d09e60b3a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/810118592aaa82a6dc460cf6234aa738bf9bbbea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/810118592aaa82a6dc460cf6234aa738bf9bbbea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/810118592aaa82a6dc460cf6234aa738bf9bbbea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/810118592aaa82a6dc460cf6234aa738bf9bbbea/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e4df9be4e2bb9f379d2737282f765f1ef6d8d2dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4df9be4e2bb9f379d2737282f765f1ef6d8d2dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4df9be4e2bb9f379d2737282f765f1ef6d8d2dd"}], "stats": {"total": 450, "additions": 442, "deletions": 8}, "files": [{"sha": "72b2151bb9db34826465830538eaeb1ab64bc03b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=810118592aaa82a6dc460cf6234aa738bf9bbbea", "patch": "@@ -1,3 +1,9 @@\n+2019-09-21  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR middle-end/91830\n+\t* gcc/gimple-ssa-warn-restrict.c (builtin_memref::set_base_and_offset):\n+\tSimplify computation of the offset of the referenced subobject.\n+\n 2019-09-21  Iain Sandoe  <iain@sandoe.co.uk>\n \n \t* config/darwin.c (machopic_legitimize_pic_address): Check"}, {"sha": "f452debf93b77ca393432634a6e90131cc8c24e5", "filename": "gcc/gimple-ssa-warn-restrict.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2Fgimple-ssa-warn-restrict.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2Fgimple-ssa-warn-restrict.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-warn-restrict.c?ref=810118592aaa82a6dc460cf6234aa738bf9bbbea", "patch": "@@ -517,14 +517,8 @@ builtin_memref::set_base_and_offset (tree expr)\n \t       struct S { char a, b[3]; } s[2];\n \t       strcpy (s[1].b, \"1234\");\n \t     REFOFF is set to s[1].b - (char*)s.  */\n-      \t  tree basetype = TREE_TYPE (TREE_TYPE (base));\n-\t  if (tree basesize = TYPE_SIZE_UNIT (basetype))\n-\t    if (TREE_CODE (basesize) == INTEGER_CST)\n-\t      {\n-\t\toffset_int size = wi::to_offset (basesize);\n-\t\toffset_int off = tree_to_shwi (memrefoff);\n-\t\trefoff += size * (off / size);\n-\t      }\n+\t  offset_int off = tree_to_shwi (memrefoff);\n+\t  refoff += off;\n       \t}\n \n       if (!integer_zerop (memrefoff))"}, {"sha": "412616d8f33efb0af1417eeffdf909d57258cfc6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=810118592aaa82a6dc460cf6234aa738bf9bbbea", "patch": "@@ -1,3 +1,8 @@\n+2019-09-21  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR middle-end/91830\n+\t* gcc/testsuite/gcc.dg/Warray-bounds-47.c: New test.\n+\n 2019-09-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/30277"}, {"sha": "06ad488d1e0e6409c96491da8e96e9cbd9faae74", "filename": "gcc/testsuite/gcc.dg/Warray-bounds-47.c", "status": "added", "additions": 429, "deletions": 0, "changes": 429, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-47.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/810118592aaa82a6dc460cf6234aa738bf9bbbea/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-47.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-47.c?ref=810118592aaa82a6dc460cf6234aa738bf9bbbea", "patch": "@@ -0,0 +1,429 @@\n+/* PR middle-end/91830 - Bogus -Warray-bounds on strcpy into a member\n+   of a subobject compiling binutils\n+   { dg-do compile }\n+   { dg-options \"-O2 -Wall -ftrack-macro-expansion=0\" } */\n+\n+extern char* strcpy (char*, const char*);\n+extern void sink (void*);\n+\n+#define S36 \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n+\n+#define S(N)   (S36 + sizeof (S36) - N - 1)\n+\n+/* In the test macro, prevent the strcpy to memcpy transformation\n+   by using a local array initialized with the string literal.  Without\n+   it, GCC transforms the strcpy call with memcpy which (unfortunately)\n+   permits accesses that cross subobject boundaries.  */\n+#define T(obj, mem, n)\t\t\t\t\\\n+  do {\t\t\t\t\t\t\\\n+    struct A *pa = &obj;\t\t\t\\\n+    const char a[] = S36;\t\t\t\\\n+    strcpy (pa->mem, a + sizeof a - n - 1);\t\\\n+    sink (&obj);\t\t\t\t\\\n+  } while (0)\n+\n+\n+struct A { char a[3]; char b[5]; };\n+struct B { char c[7]; struct A a; struct A a2[2]; };\n+\n+extern struct B b[];\n+\n+void array_nowarn (int i)\n+{\n+  struct B *pb = b;\n+\n+  T (pb[0].a, a, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, a, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, a, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[1].a, a, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, a, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, a, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a, a, 0);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, a, 1);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, a, 2);        // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[i].a, a, 0);\n+  T (pb[i].a, a, 1);\n+  T (pb[i].a, a, 2);\n+\n+\n+  T (pb[0].a, b, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 3);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 4);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[1].a, b, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 3);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 4);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a, b, 0);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 1);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 2);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 3);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 4);        // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[i].a, b, 0);\n+  T (pb[i].a, b, 1);\n+  T (pb[i].a, b, 2);\n+  T (pb[i].a, b, 3);\n+  T (pb[i].a, b, 4);\n+\n+\n+  T (pb[0].a2[0], b, 0);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 1);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 2);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 3);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 4);      // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[1].a2[0], b, 0);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 1);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 2);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 3);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 4);      // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a2[0], b, 0);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 1);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 2);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 3);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 4);    // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a2[1], b, 0);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 1);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 2);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 3);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 4);    // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[i].a2[0], b, 0);\n+  T (pb[i].a2[0], b, 1);\n+  T (pb[i].a2[0], b, 2);\n+  T (pb[i].a2[0], b, 3);\n+  T (pb[i].a2[0], b, 4);\n+\n+  T (pb[i].a2[1], b, 0);\n+  T (pb[i].a2[1], b, 1);\n+  T (pb[i].a2[1], b, 2);\n+  T (pb[i].a2[1], b, 3);\n+  T (pb[i].a2[1], b, 4);\n+}\n+\n+void array_warn (int i)\n+{\n+  struct B *pb = b;\n+\n+  T (pb[0].a, a, 3);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a, a, 4);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a, a, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a, a, 6);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a, a, 5);        // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a, a, 6);        // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a, a, 7);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a, a, 8);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+\n+\n+  T (pb[0].a, b, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a, b, 6);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a, b, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a, b, 6);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a, b, 5);        // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a, b, 6);        // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a, b, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a, b, 6);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+\n+\n+  T (pb[0].a2[0], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a2[0], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a2[0], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a2[0], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a2[0], b, 5);    // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a2[0], b, 6);    // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a2[0], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[0], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+\n+  T (pb[0].a2[1], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a2[1], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a2[1], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a2[1], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a2[1], b, 5);    // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a2[1], b, 6);    // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a2[1], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[1], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+}\n+\n+void ptr_nowarn (struct B *pb, int i)\n+{\n+  T (pb[-123].a, a, 0);       // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a, a, 1);       // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a, a, 2);       // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-2].a, a, 0);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a, a, 1);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a, a, 2);         // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-1].a, a, 0);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a, a, 1);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a, a, 2);         // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[0].a, a, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, a, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, a, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[1].a, a, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, a, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, a, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a, a, 0);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, a, 1);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, a, 2);        // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[i].a, a, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[i].a, a, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[i].a, a, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+\n+  T (pb[-123].a, b, 0);       // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a, b, 1);       // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a, b, 2);       // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a, b, 3);       // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a, b, 4);       // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-2].a, b, 0);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a, b, 1);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a, b, 2);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a, b, 3);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a, b, 4);         // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-1].a, b, 0);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a, b, 1);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a, b, 2);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a, b, 3);         // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a, b, 4);         // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[0].a, b, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 3);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a, b, 4);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[1].a, b, 0);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 1);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 2);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 3);          // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a, b, 4);          // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a, b, 0);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 1);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 2);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 3);        // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a, b, 4);        // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[i].a, b, 0);\n+  T (pb[i].a, b, 1);\n+  T (pb[i].a, b, 2);\n+  T (pb[i].a, b, 3);\n+  T (pb[i].a, b, 4);\n+\n+\n+  T (pb[-123].a2[0], b, 0);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[0], b, 1);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[0], b, 2);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[0], b, 3);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[0], b, 4);   // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-2].a2[0], b, 0);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[0], b, 1);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[0], b, 2);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[0], b, 3);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[0], b, 4);     // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-1].a2[0], b, 0);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[0], b, 1);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[0], b, 2);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[0], b, 3);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[0], b, 4);     // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[0].a2[0], b, 0);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 1);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 2);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 3);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[0], b, 4);      // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[1].a2[0], b, 0);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 1);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 2);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 3);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[0], b, 4);      // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a2[0], b, 0);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 1);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 2);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 3);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[0], b, 4);    // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[i].a2[0], b, 0);\n+  T (pb[i].a2[0], b, 1);\n+  T (pb[i].a2[0], b, 2);\n+  T (pb[i].a2[0], b, 3);\n+  T (pb[i].a2[0], b, 4);\n+\n+  T (pb[-123].a2[1], b, 0);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[1], b, 1);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[1], b, 2);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[1], b, 3);   // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-123].a2[1], b, 4);   // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-2].a2[1], b, 0);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[1], b, 1);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[1], b, 2);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[1], b, 3);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-2].a2[1], b, 4);     // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[-1].a2[1], b, 0);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[1], b, 1);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[1], b, 2);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[1], b, 3);     // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[-1].a2[1], b, 4);     // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[0].a2[1], b, 0);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[1], b, 1);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[1], b, 2);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[1], b, 3);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[0].a2[1], b, 4);      // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[1].a2[1], b, 0);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[1], b, 1);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[1], b, 2);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[1], b, 3);      // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[1].a2[1], b, 4);      // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[123].a2[1], b, 0);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 1);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 2);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 3);    // { dg-bogus \"\\\\\\[-W\" }\n+  T (pb[123].a2[1], b, 4);    // { dg-bogus \"\\\\\\[-W\" }\n+\n+  T (pb[i].a2[1], b, 0);\n+  T (pb[i].a2[1], b, 1);\n+  T (pb[i].a2[1], b, 2);\n+  T (pb[i].a2[1], b, 3);\n+  T (pb[i].a2[1], b, 4);\n+\n+  T (pb[i].a2[i], b, 0);\n+  T (pb[i].a2[i], b, 1);\n+  T (pb[i].a2[i], b, 2);\n+  T (pb[i].a2[i], b, 3);\n+  T (pb[i].a2[i], b, 4);\n+}\n+\n+void ptr_warn (struct B *pb, int i)\n+{\n+  T (pb[-987].a, a, 8);       // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-654].a, a, 7);       // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-2].a, a, 6);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-2].a, a, 5);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-1].a, a, 3);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-1].a, a, 4);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[0].a, a, 3);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a, a, 4);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a, a, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a, a, 6);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a, a, 7);        // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a, a, 8);        // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a, a, 3);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a, a, 4);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a, a, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+\n+\n+  T (pb[-987].a, b, 10);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-654].a, b, 9);       // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-2].a, b, 8);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-2].a, b, 7);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-1].a, b, 6);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-1].a, b, 5);         // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[0].a, b, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a, b, 6);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a, b, 7);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a, b, 8);          // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a, b, 9);        // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a, b, 10);       // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a, b, 5);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a, b, 6);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a, b, 7);          // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+\n+\n+  T (pb[-987].a2[0], b, 10);  // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-654].a2[0], b, 9);   // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-2].a2[0], b, 8);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-2].a2[0], b, 7);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-1].a2[0], b, 6);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-1].a2[0], b, 5);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[0].a2[0], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a2[0], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a2[0], b, 7);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a2[0], b, 8);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a2[0], b, 9);    // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a2[0], b, 10);   // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a2[0], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[0], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[0], b, 7);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+\n+  T (pb[-987].a2[1], b, 10);  // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-654].a2[1], b, 9);   // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-2].a2[1], b, 8);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-2].a2[1], b, 7);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[-1].a2[1], b, 6);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[-1].a2[1], b, 5);     // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[0].a2[1], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[0].a2[1], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[1].a2[1], b, 7);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[1].a2[1], b, 8);      // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[789].a2[1], b, 9);    // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+  T (pb[789].a2[1], b, 10);   // { dg-warning \"\\\\\\[-Warray-bounds\" }\n+\n+  T (pb[i].a2[1], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[1], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[1], b, 7);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+\n+  T (pb[i].a2[i], b, 5);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[i], b, 6);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+  T (pb[i].a2[i], b, 7);      // { dg-warning \"\\\\\\[-Warray-bounds\" \"pr91848\" { xfail *-*-* } }\n+}"}]}