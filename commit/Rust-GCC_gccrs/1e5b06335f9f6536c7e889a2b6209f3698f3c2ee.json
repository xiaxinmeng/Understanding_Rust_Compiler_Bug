{"sha": "1e5b06335f9f6536c7e889a2b6209f3698f3c2ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU1YjA2MzM1ZjlmNjUzNmM3ZTg4OWEyYjYyMDlmMzY5OGYzYzJlZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2013-05-16T17:41:13Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2013-05-16T17:41:13Z"}, "message": "add quotes\n\nFrom-SVN: r198981", "tree": {"sha": "707902698c5428a9019ec89f5723dd6c3deb0f1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/707902698c5428a9019ec89f5723dd6c3deb0f1e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e5b06335f9f6536c7e889a2b6209f3698f3c2ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e5b06335f9f6536c7e889a2b6209f3698f3c2ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e5b06335f9f6536c7e889a2b6209f3698f3c2ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e5b06335f9f6536c7e889a2b6209f3698f3c2ee/comments", "author": null, "committer": null, "parents": [{"sha": "f14540b6352b1a164ef79ae36d1ae1463efdac46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f14540b6352b1a164ef79ae36d1ae1463efdac46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f14540b6352b1a164ef79ae36d1ae1463efdac46"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "3a6a84c253ae1f2fcdea7ccfb586b0796e3199d5", "filename": "gcc/lock-and-run.sh", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5b06335f9f6536c7e889a2b6209f3698f3c2ee/gcc%2Flock-and-run.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5b06335f9f6536c7e889a2b6209f3698f3c2ee/gcc%2Flock-and-run.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flock-and-run.sh?ref=1e5b06335f9f6536c7e889a2b6209f3698f3c2ee", "patch": "@@ -1,11 +1,14 @@\n #! /bin/sh\n # Shell-based mutex using mkdir.\n \n-lockdir=$1 prog=$2; shift 2 || exit 1\n-count=0\n+lockdir=\"$1\" prog=\"$2\"; shift 2 || exit 1\n+\n # Remember when we started trying to acquire the lock.\n+count=0\n touch lock-stamp.$$\n+\n trap 'rm -r \"$lockdir\" lock-stamp.$$' 0\n+\n until mkdir \"$lockdir\" 2>/dev/null; do\n     # Say something periodically so the user knows what's up.\n     if [ `expr $count % 30` = 0 ]; then\n@@ -24,6 +27,8 @@ until mkdir \"$lockdir\" 2>/dev/null; do\n     sleep 1\n     count=`expr $count + 1`\n done\n+\n echo $prog \"$@\"\n $prog \"$@\"\n+\n # The trap runs on exit."}]}