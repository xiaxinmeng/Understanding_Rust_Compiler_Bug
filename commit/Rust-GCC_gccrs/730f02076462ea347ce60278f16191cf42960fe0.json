{"sha": "730f02076462ea347ce60278f16191cf42960fe0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzMwZjAyMDc2NDYyZWEzNDdjZTYwMjc4ZjE2MTkxY2Y0Mjk2MGZlMA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "1999-12-06T19:53:38Z"}, "committer": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "1999-12-06T19:53:38Z"}, "message": "sparc.h (ASM_DECLARE_REGISTER_GLOBAL): Document .register declaration.\n\n\t* config/sparc/sparc.h (ASM_DECLARE_REGISTER_GLOBAL): Document\n\t.register declaration. Don't use variables with __ prefixes.\n\nFrom-SVN: r30810", "tree": {"sha": "db905cb4135f9d1215bcb7207dee5111b1b313cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db905cb4135f9d1215bcb7207dee5111b1b313cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/730f02076462ea347ce60278f16191cf42960fe0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/730f02076462ea347ce60278f16191cf42960fe0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/730f02076462ea347ce60278f16191cf42960fe0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/730f02076462ea347ce60278f16191cf42960fe0/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1ba305b54cffb88c726e046e72ccbc6c09c6e4b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ba305b54cffb88c726e046e72ccbc6c09c6e4b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ba305b54cffb88c726e046e72ccbc6c09c6e4b8"}], "stats": {"total": 36, "additions": 26, "deletions": 10}, "files": [{"sha": "2932e8c77819a650df4cf45d0c36ab892bedafb9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/730f02076462ea347ce60278f16191cf42960fe0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/730f02076462ea347ce60278f16191cf42960fe0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=730f02076462ea347ce60278f16191cf42960fe0", "patch": "@@ -23,6 +23,9 @@\n \tinformation after SUBREGs are eliminated by optimizations in\n \tthis pass if PROMOTE_FUNCTION_RETURN.\n \n+\t* config/sparc/sparc.h (ASM_DECLARE_REGISTER_GLOBAL): Document\n+\t.register declaration. Don't use variables with __ prefixes.\n+\n Mon Dec  6 12:24:52 1999  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* fold-const.c (optimize_bit_field_compare): Only use one mode"}, {"sha": "ade328a0b970821e75d599a0fdc37f5e0d0c5248", "filename": "gcc/config/sparc/sparc.h", "status": "modified", "additions": 23, "deletions": 10, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/730f02076462ea347ce60278f16191cf42960fe0/gcc%2Fconfig%2Fsparc%2Fsparc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/730f02076462ea347ce60278f16191cf42960fe0/gcc%2Fconfig%2Fsparc%2Fsparc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.h?ref=730f02076462ea347ce60278f16191cf42960fe0", "patch": "@@ -1834,25 +1834,38 @@ do {\t\t\t\t\t\t\t\t\t\\\n } while (0)\n \n /* Output the special assembly code needed to tell the assembler some\n-   register is used as global register variable.  */\n+   register is used as global register variable.  \n+\n+   SPARC 64bit psABI declares registers %g2 and %g3 as application\n+   registers and %g6 and %g7 as OS registers.  Any object using them\n+   should declare (for %g2/%g3 has to, for %g6/%g7 can) that it uses them\n+   and how they are used (scratch or some global variable).\n+   Linker will then refuse to link together objects which use those\n+   registers incompatibly.\n+\n+   Unless the registers are used for scratch, two different global\n+   registers cannot be declared to the same name, so in the unlikely\n+   case of a global register variable occupying more than one register\n+   we prefix the second and following registers with .gnu.part1. etc.  */\n+\n+extern char sparc_hard_reg_printed[8];\n \n #ifdef HAVE_AS_REGISTER_PSEUDO_OP\n #define ASM_DECLARE_REGISTER_GLOBAL(FILE, DECL, REGNO, NAME)\t\t\\\n do {\t\t\t\t\t\t\t\t\t\\\n   if (TARGET_ARCH64)\t\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n-      int __end = HARD_REGNO_NREGS ((REGNO), DECL_MODE (decl)) + (REGNO); \\\n-      int __reg;\t\t\t\t\t\t\t\\\n-      extern char sparc_hard_reg_printed[8];\t\t\t\t\\\n-      for (__reg = (REGNO); __reg < 8 && __reg < __end; __reg++)\t\\\n-\tif ((__reg & ~1) == 2 || (__reg & ~1) == 6)\t\t\t\\\n+      int end = HARD_REGNO_NREGS ((REGNO), DECL_MODE (decl)) + (REGNO); \\\n+      int reg;\t\t\t\t\t\t\t\t\\\n+      for (reg = (REGNO); reg < 8 && reg < end; reg++)\t\t\t\\\n+\tif ((reg & ~1) == 2 || (reg & ~1) == 6)\t\t\t\t\\\n \t  {\t\t\t\t\t\t\t\t\\\n-\t    if (__reg == (REGNO))\t\t\t\t\t\\\n-\t      fprintf ((FILE), \"\\t.register\\t%%g%d, %s\\n\", __reg, (NAME)); \\\n+\t    if (reg == (REGNO))\t\t\t\t\t\t\\\n+\t      fprintf ((FILE), \"\\t.register\\t%%g%d, %s\\n\", reg, (NAME)); \\\n \t    else\t\t\t\t\t\t\t\\\n \t      fprintf ((FILE), \"\\t.register\\t%%g%d, .gnu.part%d.%s\\n\",\t\\\n-\t\t       __reg, __reg - (REGNO), (NAME));\t\t\t\\\n-\t    sparc_hard_reg_printed[__reg] = 1;\t\t\t\t\\\n+\t\t       reg, reg - (REGNO), (NAME));\t\t\t\\\n+\t    sparc_hard_reg_printed[reg] = 1;\t\t\t\t\\\n \t  }\t\t\t\t\t\t\t\t\\\n     }\t\t\t\t\t\t\t\t\t\\\n } while (0)"}]}