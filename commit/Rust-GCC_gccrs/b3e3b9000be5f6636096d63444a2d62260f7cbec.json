{"sha": "b3e3b9000be5f6636096d63444a2d62260f7cbec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNlM2I5MDAwYmU1ZjY2MzYwOTZkNjM0NDRhMmQ2MjI2MGY3Y2JlYw==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2019-12-04T15:40:41Z"}, "committer": {"name": "Wilco Dijkstra", "email": "wilco@gcc.gnu.org", "date": "2019-12-04T15:40:41Z"}, "message": "[ARM] Improve max_cond_insns setting for Cortex cores\n\nTo enable cores to use the correct max_cond_insns setting, use the core-specific\ntuning when a CPU/tune is selected unless -mrestrict-it is explicitly set.\n\nOn Cortex-A57 this gives 1.1% performance gain on SPECINT2006 as well as a\n0.4% codesize reduction.\n\n    gcc/\n\t* config/arm/arm.c (arm_option_override_internal):\n\tUse max_cond_insns from CPU tuning unless -mrestrict-it is used.\n\nFrom-SVN: r278968", "tree": {"sha": "805a29e1b44291cb8264c612c7fcb192b3860740", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/805a29e1b44291cb8264c612c7fcb192b3860740"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3e3b9000be5f6636096d63444a2d62260f7cbec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e3b9000be5f6636096d63444a2d62260f7cbec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3e3b9000be5f6636096d63444a2d62260f7cbec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e3b9000be5f6636096d63444a2d62260f7cbec/comments", "author": null, "committer": null, "parents": [{"sha": "09a214ac6bea2a7148e0694b6b1ab61e02485a53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09a214ac6bea2a7148e0694b6b1ab61e02485a53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09a214ac6bea2a7148e0694b6b1ab61e02485a53"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "eab3089c486b2060c6902e1f32e483cfcc5e79e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e3b9000be5f6636096d63444a2d62260f7cbec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e3b9000be5f6636096d63444a2d62260f7cbec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3e3b9000be5f6636096d63444a2d62260f7cbec", "patch": "@@ -1,3 +1,8 @@\n+2019-12-04  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\t* config/arm/arm.c (arm_option_override_internal):\n+\tUse max_cond_insns from CPU tuning unless -mrestrict-it is used.\n+\n 2019-12-04  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \t* config/aarch64/aarch64.c"}, {"sha": "6eb2afbd85f61cf99c225041ac1a99947a9e2550", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e3b9000be5f6636096d63444a2d62260f7cbec/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e3b9000be5f6636096d63444a2d62260f7cbec/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=b3e3b9000be5f6636096d63444a2d62260f7cbec", "patch": "@@ -3044,6 +3044,11 @@ arm_option_override_internal (struct gcc_options *opts,\n   if (!TARGET_THUMB2_P (opts->x_target_flags) || !arm_arch_notm)\n     opts->x_arm_restrict_it = 0;\n \n+  /* Use the IT size from CPU specific tuning unless -mrestrict-it is used.  */\n+  if (!opts_set->x_arm_restrict_it\n+      && (opts_set->x_arm_cpu_string || opts_set->x_arm_tune_string))\n+    opts->x_arm_restrict_it = 0;\n+\n   /* Enable -munaligned-access by default for\n      - all ARMv6 architecture-based processors when compiling for a 32-bit ISA\n      i.e. Thumb2 and ARM state only."}]}