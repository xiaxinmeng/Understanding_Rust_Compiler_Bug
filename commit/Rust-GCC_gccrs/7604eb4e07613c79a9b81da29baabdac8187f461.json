{"sha": "7604eb4e07613c79a9b81da29baabdac8187f461", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzYwNGViNGUwNzYxM2M3OWE5YjgxZGEyOWJhYWJkYWM4MTg3ZjQ2MQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-01-05T08:42:53Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-01-05T08:42:53Z"}, "message": "re PR other/42611 (ICE in tree_low_cst, at tree.c:5014)\n\n\tPR other/42611\n\t* cfgexpand.c (expand_one_var): Diagnose too large variables.\n\n\t* gcc.dg/pr42611.c: New test.\n\nFrom-SVN: r155641", "tree": {"sha": "63593f477af7cbbcba000ab65e0c226c033919f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63593f477af7cbbcba000ab65e0c226c033919f5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7604eb4e07613c79a9b81da29baabdac8187f461", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7604eb4e07613c79a9b81da29baabdac8187f461", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7604eb4e07613c79a9b81da29baabdac8187f461", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7604eb4e07613c79a9b81da29baabdac8187f461/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "566f27e42ca00f65d101e6a7b0096554a0cc452d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/566f27e42ca00f65d101e6a7b0096554a0cc452d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/566f27e42ca00f65d101e6a7b0096554a0cc452d"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "89398d7eaf3e33bf1778390cd1fbb36cde715956", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7604eb4e07613c79a9b81da29baabdac8187f461", "patch": "@@ -1,5 +1,8 @@\n 2010-01-05  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR other/42611\n+\t* cfgexpand.c (expand_one_var): Diagnose too large variables.\n+\n \tPR tree-optimization/42508\n \t* tree-sra.c (convert_callers): Check for recursive call\n \tby comparing cgraph nodes instead of decls."}, {"sha": "7e542da3320eae90136fb2156267910088c94795", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=7604eb4e07613c79a9b81da29baabdac8187f461", "patch": "@@ -1,5 +1,5 @@\n /* A pass for lowering trees to RTL.\n-   Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009\n+   Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009, 2010\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -1011,6 +1011,14 @@ expand_one_var (tree var, bool toplevel, bool really_expand)\n       if (really_expand)\n         expand_one_register_var (origvar);\n     }\n+  else if (!host_integerp (DECL_SIZE_UNIT (var), 1))\n+    {\n+      if (really_expand)\n+\t{\n+\t  error (\"size of variable %q+D is too large\", var);\n+\t  expand_one_error_var (var);\n+\t}\n+    }\n   else if (defer_stack_allocation (var, toplevel))\n     add_stack_var (origvar);\n   else"}, {"sha": "aea6aa18026c60c99daaee6525b67c93390fb75d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7604eb4e07613c79a9b81da29baabdac8187f461", "patch": "@@ -1,5 +1,8 @@\n 2010-01-05  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR other/42611\n+\t* gcc.dg/pr42611.c: New test.\n+\n \tPR tree-optimization/42508\n \t* g++.dg/opt/pr42508.C: New test.\n "}, {"sha": "c33e248caf500f59da1e3ec42d366c13fbcf6dd1", "filename": "gcc/testsuite/gcc.dg/pr42611.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42611.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7604eb4e07613c79a9b81da29baabdac8187f461/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42611.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42611.c?ref=7604eb4e07613c79a9b81da29baabdac8187f461", "patch": "@@ -0,0 +1,19 @@\n+/* PR other/42611 */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+#define L \\\n+  (sizeof (__SIZE_TYPE__) == 1 ? __SCHAR_MAX__\t\t\t\t\\\n+  : sizeof (__SIZE_TYPE__) == sizeof (short) ? __SHRT_MAX__\t\t\\\n+  : sizeof (__SIZE_TYPE__) == sizeof (int) ? __INT_MAX__\t\t\\\n+  : sizeof (__SIZE_TYPE__) == sizeof (long) ? __LONG_MAX__\t\t\\\n+  : sizeof (__SIZE_TYPE__) == sizeof (long long) ? __LONG_LONG_MAX__\t\\\n+  : __INTMAX_MAX__)\n+struct S { int a; char b[L]; };\n+\n+void\n+foo (void)\n+{\n+  struct S s;\t\t\t\t/* { dg-error \"is too large\" } */\n+  asm volatile (\"\" : : \"r\" (&s));\n+}"}]}