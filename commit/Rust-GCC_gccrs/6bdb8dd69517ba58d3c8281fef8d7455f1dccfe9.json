{"sha": "6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJkYjhkZDY5NTE3YmE1OGQzYzgyODFmZWY4ZDc0NTVmMWRjY2ZlOQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2002-06-28T23:41:19Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2002-06-28T23:41:19Z"}, "message": "* gcse.c (gcse_emit_move_after): Use gen_move_insn to produce the move.\n\nFrom-SVN: r55087", "tree": {"sha": "1ba1471b88635ad1e6a1d35451607c96354b03dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ba1471b88635ad1e6a1d35451607c96354b03dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9/comments", "author": null, "committer": null, "parents": [{"sha": "f1b1186f6c7287df5685e8ebf21d5d4ce73d5647", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1b1186f6c7287df5685e8ebf21d5d4ce73d5647", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1b1186f6c7287df5685e8ebf21d5d4ce73d5647"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "dcdefc80e5472e2349c1913007bdf7ee27570e56", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9", "patch": "@@ -1,3 +1,7 @@\n+2002-06-28  Jan Hubicka  <jh@suse.cz>\n+\n+\t* gcse.c (gcse_emit_move_after): Use gen_move_insn to produce the move.\n+\n 2002-06-28  Stephen Clarke  <stephen.clarke@superh.com>\n \n \t* combine.c (combine_simplify_rtx): Pass the mode of the"}, {"sha": "665be1fd9a35d2b22b1230fa5fd2ce181b23d59c", "filename": "gcc/gcse.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9/gcc%2Fgcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9/gcc%2Fgcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcse.c?ref=6bdb8dd69517ba58d3c8281fef8d7455f1dccfe9", "patch": "@@ -5144,21 +5144,19 @@ gcse_emit_move_after (src, dest, insn)\n      rtx src, dest, insn;\n {\n   rtx new;\n-  rtx set = single_set (insn);\n+  rtx set = single_set (insn), set2;\n   rtx note;\n   rtx eqv;\n \n   /* This should never fail since we're creating a reg->reg copy\n      we've verified to be valid.  */\n \n-  new = emit_insn_after (gen_rtx_SET (VOIDmode, dest, src), insn);\n-\n-  /* want_to_gcse_p verifies that this move will be valid.  Still this call\n-     is mandatory as it may create clobbers required by the pattern.  */\n-  if (insn_invalid_p (insn))\n-    abort ();\n+  new = emit_insn_after (gen_move_insn (dest, src), insn);\n \n   /* Note the equivalence for local CSE pass.  */\n+  set2 = single_set (new);\n+  if (!set2 || !rtx_equal_p (SET_DEST (set2), dest))\n+    return new;\n   if ((note = find_reg_equal_equiv_note (insn)))\n     eqv = XEXP (note, 0);\n   else"}]}