{"sha": "adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWRjMDQ0ODZlZTVkNGIyZjIwZGZkYmE5M2Y4YzRmZDUyZTFlZjliOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-01-21T10:35:18Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-01-21T10:35:18Z"}, "message": "[multiple changes]\n\n2004-01-21  Javier Miranda  <miranda@gnat.com>\n\n\t* exp_aggr.adb (Build_Record_Aggr_Code): Do not build the master\n\tentity if already built in the current scope.\n\n\t* exp_ch9.adb (Build_Master_Entity): Do not set the has_master_entity\n\treminder in internal scopes. Required for nested limited aggregates.\n\n2004-01-21  Doug Rupp  <rupp@gnat.com>\n\n\t* Makefile.in (hyphen): New variable, default value '-'. Set to '_' on\n\tVMS. Replace all occurences of libgnat- and libgnarl- with\n\tlibgnat$(hyphen) and libgnarl$(hyphen).\n\tFixed shared library build problem on VMS.\n\n2004-01-21  Robert Dewar  <dewar@gnat.com>\n\n\t* mlib-prj.adb: Minor reformatting\n\n2004-01-21  Thomas Quinot  <quinot@act-europe.fr>\n\n\t* prj-tree.adb, 7staprop.adb, vms_conv.adb, xr_tabls.adb: Add missing\n\t'constant' keywords for declaration of pointers that are not modified.\n\n\t* exp_pakd.adb: Fix English in comment.\n\n2004-01-21  Ed Schonberg  <schonberg@gnat.com>\n\n\tPR ada/10889\n\t* sem_ch3.adb (Analyze_Subtype_Declaration): For an array subtype,\n\tcopy all attributes of the parent, including the foreign language\n\tconvention.\n\n2004-01-21  Sergey Rybin  <rybin@act-europe.fr>\n\n\tPR ada/10565\n\t* sem_ch9.adb (Analyze_Delay_Alternative): Add expression type check\n\tfor 'delay until' statement.\n\nFrom-SVN: r76271", "tree": {"sha": "3f71d31717704c49c8e652580055d3df47d772f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3f71d31717704c49c8e652580055d3df47d772f6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/comments", "author": null, "committer": null, "parents": [{"sha": "1ef82ef2e4438959b1385c20bd47a1febed98221", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ef82ef2e4438959b1385c20bd47a1febed98221", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ef82ef2e4438959b1385c20bd47a1febed98221"}], "stats": {"total": 298, "additions": 184, "deletions": 114}, "files": [{"sha": "e79d39db1893c95223b252ad9848a37175085fda", "filename": "gcc/ada/7staprop.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2F7staprop.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2F7staprop.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2F7staprop.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  B o d y                                 --\n --                                                                          --\n---         Copyright (C) 1992-2003, Free Software Foundation, Inc.          --\n+--         Copyright (C) 1992-2004, Free Software Foundation, Inc.          --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -218,7 +218,7 @@ package body System.Task_Primitives.Operations is\n    procedure Abort_Handler (Sig : Signal) is\n       pragma Warnings (Off, Sig);\n \n-      T       : Task_ID := Self;\n+      T       : constant Task_ID := Self;\n       Result  : Interfaces.C.int;\n       Old_Set : aliased sigset_t;\n "}, {"sha": "23ccd1eb269d008a290b9d323fa5606479bba86d", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -1,3 +1,42 @@\n+2004-01-21  Javier Miranda  <miranda@gnat.com>\n+\n+\t* exp_aggr.adb (Build_Record_Aggr_Code): Do not build the master\n+\tentity if already built in the current scope.\n+\n+\t* exp_ch9.adb (Build_Master_Entity): Do not set the has_master_entity\n+\treminder in internal scopes. Required for nested limited aggregates.\n+\n+2004-01-21  Doug Rupp  <rupp@gnat.com>\n+\n+\t* Makefile.in (hyphen): New variable, default value '-'. Set to '_' on\n+\tVMS. Replace all occurences of libgnat- and libgnarl- with\n+\tlibgnat$(hyphen) and libgnarl$(hyphen).\n+\tFixed shared library build problem on VMS.\n+\n+2004-01-21  Robert Dewar  <dewar@gnat.com>\n+\n+\t* mlib-prj.adb: Minor reformatting\n+\n+2004-01-21  Thomas Quinot  <quinot@act-europe.fr>\n+\n+\t* prj-tree.adb, 7staprop.adb, vms_conv.adb, xr_tabls.adb: Add missing\n+\t'constant' keywords for declaration of pointers that are not modified.\n+\n+\t* exp_pakd.adb: Fix English in comment.\n+\n+2004-01-21  Ed Schonberg  <schonberg@gnat.com>\n+\n+\tPR ada/10889\n+\t* sem_ch3.adb (Analyze_Subtype_Declaration): For an array subtype,\n+\tcopy all attributes of the parent, including the foreign language\n+\tconvention.\n+\n+2004-01-21  Sergey Rybin  <rybin@act-europe.fr>\n+\n+\tPR ada/10565\n+\t* sem_ch9.adb (Analyze_Delay_Alternative): Add expression type check\n+\tfor 'delay until' statement.\n+\n 2004-01-20  Kelley Cook  <kcook@gcc.gnu.org>\n \n \t* Make-lang.in: Replace $(docdir) with doc."}, {"sha": "ee2da91e8cad6154e7cc79c752867cfee412e110", "filename": "gcc/ada/Makefile.in", "status": "modified", "additions": 23, "deletions": 17, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMakefile.in?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -144,6 +144,7 @@ exeext =\n arext  = .a\n soext  = .so\n shext  =\n+hyphen = -\n \n # Define this as & to perform parallel make on a Sequent.\n # Note that this has some bugs, and it seems currently necessary \n@@ -1126,6 +1127,7 @@ endif\n ifeq ($(strip $(filter-out alpha% ia64 dec vms% openvms% alphavms%,$(host))),)\n \n soext  = .exe\n+hyphen = _\n \n .SUFFIXES: .sym\n \n@@ -1704,12 +1706,12 @@ install-gnatlib: ../stamp-gnatlib\n #     for shared libraries on some targets, e.g. on HP-UX where the x\n #     permission is required.\n \tfor file in gnat gnarl; do \\\n-\t   if [ -f rts/lib$$file-$(LIBRARY_VERSION)$(soext) ]; then \\\n-\t      $(INSTALL) rts/lib$$file-$(LIBRARY_VERSION)$(soext) \\\n+\t   if [ -f rts/lib$$file$(hyphen)$(LIBRARY_VERSION)$(soext) ]; then \\\n+\t      $(INSTALL) rts/lib$$file$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t\t\t $(DESTDIR)$(ADA_RTL_OBJ_DIR); \\\n \t   fi; \\\n \t   if [ -f rts/lib$$file$(soext) ]; then \\\n-\t      $(LN_S) lib$$file-$(LIBRARY_VERSION)$(soext) \\\n+\t      $(LN_S) lib$$file$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t      $(DESTDIR)$(ADA_RTL_OBJ_DIR)/lib$$file$(soext); \\\n \t   fi; \\\n \tdone\n@@ -1892,15 +1894,19 @@ gnatlib-shared-default:\n              gnatlib\n \t$(RM) rts/libgnat$(soext) rts/libgnarl$(soext)\n \tcd rts; ../../xgcc -B../../ -shared $(TARGET_LIBGCC2_CFLAGS) \\\n-\t\t-o libgnat-$(LIBRARY_VERSION)$(soext) \\\n+\t\t-o libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t\t$(GNATRTL_NONTASKING_OBJS) $(LIBGNAT_OBJS) \\\n-\t\t$(SO_OPTS)libgnat-$(LIBRARY_VERSION)$(soext) $(MISCLIB) -lm\n+\t\t$(SO_OPTS)libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t$(MISCLIB) -lm\n \tcd rts; ../../xgcc -B../../ -shared $(TARGET_LIBGCC2_CFLAGS) \\\n-\t\t-o libgnarl-$(LIBRARY_VERSION)$(soext) \\\n+\t\t-o libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t\t$(GNATRTL_TASKING_OBJS) \\\n-\t\t$(SO_OPTS)libgnarl-$(LIBRARY_VERSION)$(soext) $(THREADSLIB)\n-\tcd rts; $(LN_S) libgnat-$(LIBRARY_VERSION)$(soext) libgnat$(soext)\n-\tcd rts; $(LN_S) libgnarl-$(LIBRARY_VERSION)$(soext) libgnarl$(soext)\n+\t\t$(SO_OPTS)libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t$(THREADSLIB)\n+\tcd rts; $(LN_S) libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\tlibgnat$(soext)\n+\tcd rts; $(LN_S) libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\tlibgnarl$(soext)\n \n gnatlib-shared-dual:\n \t$(MAKE) $(FLAGS_TO_PASS) \\\n@@ -1944,14 +1950,14 @@ gnatlib-shared-win32:\n              gnatlib\n \t$(RM) rts/libgnat$(soext) rts/libgnarl$(soext)\n \tcd rts; ../../xgcc -B../../ -shared $(TARGET_LIBGCC2_CFLAGS) \\\n-\t\t-o libgnat-$(LIBRARY_VERSION)$(soext) \\\n+\t\t-o libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t\t$(GNATRTL_NONTASKING_OBJS) $(LIBGNAT_OBJS) \\\n-\t\t$(SO_OPTS)libgnat-$(LIBRARY_VERSION)$(soext) $(MISCLIB)\n+\t\t$(SO_OPTS)libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) $(MISCLIB)\n \tcd rts; ../../xgcc -B../../ -shared $(TARGET_LIBGCC2_CFLAGS) \\\n-\t\t-o libgnarl-$(LIBRARY_VERSION)$(soext) \\\n+\t\t-o libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t\t$(GNATRTL_TASKING_OBJS) \\\n-\t\t$(SO_OPTS)libgnarl-$(LIBRARY_VERSION)$(soext) \\\n-\t\t$(THREADSLIB) -Wl,libgnat-$(LIBRARY_VERSION)$(soext)\n+\t\t$(SO_OPTS)libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t$(THREADSLIB) -Wl,libgnat$(hyphen)$(LIBRARY_VERSION)$(soext)\n \n gnatlib-shared-vms:\n \t$(MAKE) $(FLAGS_TO_PASS) \\\n@@ -1965,7 +1971,7 @@ gnatlib-shared-vms:\n \t$(SHLIB_SYMVEC) >> SYMVEC_$$$$.opt && \\\n \techo \"case_sensitive=NO\" >> SYMVEC_$$$$.opt && \\\n \t../../xgcc -g -B../../ -nostartfiles -shared -shared-libgcc \\\n-\t   -o libgnat_$(LIBRARY_VERSION)$(soext) libgnat.a \\\n+\t   -o libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) libgnat.a \\\n \t   sys\\$$library:trace.exe \\\n \t   --for-linker=/noinform \\\n \t   --for-linker=SYMVEC_$$$$.opt \\\n@@ -1975,8 +1981,8 @@ gnatlib-shared-vms:\n \t$(SHLIB_SYMVEC) >> SYMVEC_$$$$.opt && \\\n \techo \"case_sensitive=NO\" >> SYMVEC_$$$$.opt && \\\n \t../../xgcc -g -B../../ -nostartfiles -shared -shared-libgcc \\\n-\t   -o libgnarl_$(LIBRARY_VERSION)$(soext) \\\n-\t   libgnarl.a libgnat_$(LIBRARY_VERSION)$(soext) \\\n+\t   -o libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t   libgnarl.a libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t   sys\\$$library:trace.exe \\\n \t   --for-linker=/noinform \\\n \t   --for-linker=SYMVEC_$$$$.opt \\"}, {"sha": "7113102095b1895808e50dfe0a04951ab6ae0117", "filename": "gcc/ada/exp_aggr.adb", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fexp_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fexp_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_aggr.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -1949,7 +1949,9 @@ package body Exp_Aggr is\n \n                   if not Inside_Init_Proc and not Inside_Allocator then\n                      Build_Activation_Chain_Entity (N);\n-                     Build_Master_Entity (Etype (N));\n+                     if not Has_Master_Entity (Current_Scope) then\n+                        Build_Master_Entity (Etype (N));\n+                     end if;\n                   end if;\n                end if;\n             end;"}, {"sha": "39a1f31bdecb8d8a55a8903f79596d06e7511d48", "filename": "gcc/ada/exp_ch9.adb", "status": "modified", "additions": 38, "deletions": 8, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fexp_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fexp_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch9.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -1198,15 +1198,37 @@ package body Exp_Ch9 is\n       Loc  : constant Source_Ptr := Sloc (E);\n       P    : Node_Id;\n       Decl : Node_Id;\n-\n+      S    : Entity_Id := Scope (E);\n    begin\n-      --  Nothing to do if we already built a master entity for this scope\n-      --  or if there is no task hierarchy.\n+      --  Ada0Y (AI-287): Do not set/get the has_master_entity reminder in\n+      --  internal scopes. Required for nested limited aggregates.\n+\n+      if not Extensions_Allowed then\n+\n+         --  Nothing to do if we already built a master entity for this scope\n+         --  or if there is no task hierarchy.\n+\n+         if Has_Master_Entity (Scope (E))\n+           or else Restrictions (No_Task_Hierarchy)\n+         then\n+            return;\n+         end if;\n+      else\n+\n+         --  Ada0Y (AI-287): Similar to the \ufffdprevious casebut skipping internal\n+         --  scopes. If we are not inside an internal scope this code is\n+         --  equivalent to the previous code.\n+\n+         while Is_Internal (S) loop\n+            S := Scope (S);\n+         end loop;\n+\n+         if Has_Master_Entity (S)\n+           or else Restrictions (No_Task_Hierarchy)\n+         then\n+            return;\n+         end if;\n \n-      if Has_Master_Entity (Scope (E))\n-        or else Restrictions (No_Task_Hierarchy)\n-      then\n-         return;\n       end if;\n \n       --  Otherwise first build the master entity\n@@ -1226,7 +1248,15 @@ package body Exp_Ch9 is\n       P := Parent (E);\n       Insert_Before (P, Decl);\n       Analyze (Decl);\n-      Set_Has_Master_Entity (Scope (E));\n+\n+      --  Ada0Y (AI-287): Set the has_marter_entity reminder in the\n+      --  non-internal scope selected above.\n+\n+      if not Extensions_Allowed then\n+         Set_Has_Master_Entity (Scope (E));\n+      else\n+         Set_Has_Master_Entity (S);\n+      end if;\n \n       --  Now mark the containing scope as a task master\n "}, {"sha": "36b4b36b97c616f7010344418f21def6a1fbef78", "filename": "gcc/ada/exp_pakd.adb", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fexp_pakd.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fexp_pakd.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_pakd.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -1061,11 +1061,11 @@ package body Exp_Pakd is\n          Set_Parent (Len_Expr, Typ);\n          Analyze_Per_Use_Expression (Len_Expr, Standard_Integer);\n \n-         --  Use a modular type if possible. We can do this if we are we\n-         --  have static bounds, and the length is small enough, and the\n-         --  length is not zero. We exclude the zero length case because the\n-         --  size of things is always at least one, and the zero length object\n-         --  would have an anomous size.\n+         --  Use a modular type if possible. We can do this if we have\n+         --  static bounds, and the length is small enough, and the length\n+         --  is not zero. We exclude the zero length case because the size\n+         --  of things is always at least one, and the zero length object\n+         --  would have an anomalous size.\n \n          if Compile_Time_Known_Value (Len_Expr) then\n             Len_Bits := Expr_Value (Len_Expr) * Csize;"}, {"sha": "7c894e87775d66325ed704b2b659c1c1157bc936", "filename": "gcc/ada/mlib-prj.adb", "status": "modified", "additions": 18, "deletions": 21, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fmlib-prj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fmlib-prj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-prj.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -389,8 +389,9 @@ package body MLib.Prj is\n       -----------------\n \n       procedure Add_ALI_For (Source : Name_Id) is\n-         ALI : constant String := ALI_File_Name (Get_Name_String (Source));\n+         ALI    : constant String := ALI_File_Name (Get_Name_String (Source));\n          ALI_Id : Name_Id;\n+\n       begin\n          if Bind then\n             Add_Argument (ALI);\n@@ -665,7 +666,7 @@ package body MLib.Prj is\n             Element  : Project_Element;\n \n          begin\n-            --  Nothing to do if process has already been processed.\n+            --  Nothing to do if process has already been processed\n \n             if not Processed_Projects.Get (Data.Name) then\n                Processed_Projects.Set (Data.Name, True);\n@@ -879,6 +880,7 @@ package body MLib.Prj is\n             Library_ALIs.Reset;\n             Interface_ALIs.Reset;\n             Processed_ALIs.Reset;\n+\n             for Source in 1 .. Com.Units.Last loop\n                Unit := Com.Units.Table (Source);\n \n@@ -924,12 +926,12 @@ package body MLib.Prj is\n                   exit when not Bind;\n                end if;\n             end loop;\n-\n          end;\n \n          --  Continue setup and call gnatbind if Bind is True\n \n          if Bind then\n+\n             --  Get an eventual --RTS from the ALI file\n \n             if First_ALI /= No_Name then\n@@ -991,7 +993,6 @@ package body MLib.Prj is\n                Com.Fail (\"could not bind standalone library \",\n                          Get_Name_String (Data.Library_Name));\n             end if;\n-\n          end if;\n \n          --  Compile the binder generated file only if Link is true\n@@ -1196,9 +1197,9 @@ package body MLib.Prj is\n                         --  If in the object directory of an extended project,\n                         --  do not consider generated object files.\n \n-                        if In_Main_Object_Directory or else\n-                          Last < 5 or else\n-                          Filename (1 .. B_Start'Length) /= B_Start\n+                        if In_Main_Object_Directory\n+                          or else Last < 5\n+                          or else Filename (1 .. B_Start'Length) /= B_Start\n                         then\n                            Name_Len := Last;\n                            Name_Buffer (1 .. Name_Len) := Filename (1 .. Last);\n@@ -1233,8 +1234,7 @@ package body MLib.Prj is\n                                     Check_Libs (ALI_File);\n \n                                  else\n-                                    --  The object file is a foreign object\n-                                    --  file.\n+                                    --  Object file is a foreign object file\n \n                                     Foreigns.Increment_Last;\n                                     Foreigns.Table (Foreigns.Last) :=\n@@ -1338,7 +1338,6 @@ package body MLib.Prj is\n          if Object_Files'Length = 0 then\n             Com.Fail (\"no object files for library \"\"\" &\n                       Lib_Filename.all & '\"');\n-\n          end if;\n \n          if not Opt.Quiet_Output then\n@@ -1470,8 +1469,7 @@ package body MLib.Prj is\n          Copy_Dir := Projects.Table (For_Project).Library_Dir;\n          Clean (Copy_Dir);\n \n-         --  Call the procedure to build the library, depending on the build\n-         --  mode.\n+         --  Call procedure to build the library, depending on the build mode\n \n          case The_Build_Mode is\n             when Dynamic | Relocatable =>\n@@ -1501,11 +1499,11 @@ package body MLib.Prj is\n                null;\n          end case;\n \n-         --  We need to copy the ALI files from the object directory\n-         --  to the library directory, so that the linker find them there,\n-         --  and does not need to look in the object directory where it would\n-         --  also find the object files; and we don't want that: we want the\n-         --  linker to use the library.\n+         --  We need to copy the ALI files from the object directory to\n+         --  the library directory, so that the linker find them there,\n+         --  and does not need to look in the object directory where it\n+         --  would also find the object files; and we don't want that:\n+         --  we want the linker to use the library.\n \n          --  Copy the ALI files and make the copies read-only. For interfaces,\n          --  mark the copies as interfaces.\n@@ -1521,8 +1519,8 @@ package body MLib.Prj is\n            and then Projects.Table (For_Project).Library_Src_Dir /= No_Name\n          then\n             --  Clean the interface copy directory, if it is not also the\n-            --  library directory. If it is also the library directory, it has\n-            --  already been cleaned before the generation of the library.\n+            --  library directory. If it is also the library directory, it\n+            --  has already been cleaned before generation of the library.\n \n             if Projects.Table (For_Project).Library_Src_Dir /= Copy_Dir then\n                Copy_Dir := Projects.Table (For_Project).Library_Src_Dir;\n@@ -1558,7 +1556,7 @@ package body MLib.Prj is\n \n    procedure Check_Context is\n    begin\n-      --  check that each object file exists\n+      --  Check that each object file exists\n \n       for F in Object_Files'Range loop\n          Check (Object_Files (F).all);\n@@ -1609,7 +1607,6 @@ package body MLib.Prj is\n                if Is_Obj (Name_Buffer (1 .. Name_Len))\n                   and then Name_Buffer (1 .. B_Start'Length) /= B_Start\n                then\n-\n                   --  Get the object file time stamp\n \n                   Obj_TS := File_Stamp (Name_Find);"}, {"sha": "735b3fee9e902075f8848abafe9e8230a7633e92", "filename": "gcc/ada/prj-tree.adb", "status": "modified", "additions": 10, "deletions": 15, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fprj-tree.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fprj-tree.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-tree.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---             Copyright (C) 2001-2003 Free Software Foundation, Inc.       --\n+--             Copyright (C) 2001-2004 Free Software Foundation, Inc.       --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1242,8 +1242,7 @@ package body Prj.Tree is\n    function Project_File_Includes_Unkept_Comments\n      (Node : Project_Node_Id) return Boolean\n    is\n-      Declaration : constant Project_Node_Id :=\n-        Project_Declaration_Of (Node);\n+      Declaration : constant Project_Node_Id := Project_Declaration_Of (Node);\n    begin\n       return Project_Nodes.Table (Declaration).Flag1;\n    end Project_File_Includes_Unkept_Comments;\n@@ -1329,7 +1328,8 @@ package body Prj.Tree is\n    ----------\n \n    procedure Save (S : out Comment_State) is\n-      Cmts : Comments_Ptr := new Comment_Array (1 .. Comments.Last);\n+      Cmts : constant Comments_Ptr := new Comment_Array (1 .. Comments.Last);\n+\n    begin\n       for J in 1 .. Comments.Last loop\n          Cmts (J) := Comments.Table (J);\n@@ -1393,7 +1393,7 @@ package body Prj.Tree is\n                elsif End_Of_Line_Node /= Empty_Node then\n                   declare\n                      Zones : constant Project_Node_Id :=\n-                       Comment_Zones_Of (End_Of_Line_Node);\n+                               Comment_Zones_Of (End_Of_Line_Node);\n                   begin\n                      Project_Nodes.Table (Zones).Value := Comment_Id;\n                   end;\n@@ -1722,8 +1722,7 @@ package body Prj.Tree is\n      (Node : Project_Node_Id;\n       To   : Project_Node_Id)\n    is\n-      Zone : constant Project_Node_Id :=\n-                Comment_Zones_Of (Node);\n+      Zone : constant Project_Node_Id := Comment_Zones_Of (Node);\n    begin\n       Project_Nodes.Table (Zone).Field2 := To;\n    end Set_First_Comment_After;\n@@ -1736,8 +1735,7 @@ package body Prj.Tree is\n      (Node : Project_Node_Id;\n       To   : Project_Node_Id)\n    is\n-      Zone : constant Project_Node_Id :=\n-                Comment_Zones_Of (Node);\n+      Zone : constant Project_Node_Id := Comment_Zones_Of (Node);\n    begin\n       Project_Nodes.Table (Zone).Comments := To;\n    end Set_First_Comment_After_End;\n@@ -1751,8 +1749,7 @@ package body Prj.Tree is\n       To   : Project_Node_Id)\n \n    is\n-      Zone : constant Project_Node_Id :=\n-                Comment_Zones_Of (Node);\n+      Zone : constant Project_Node_Id := Comment_Zones_Of (Node);\n    begin\n       Project_Nodes.Table (Zone).Field1 := To;\n    end Set_First_Comment_Before;\n@@ -1765,8 +1762,7 @@ package body Prj.Tree is\n      (Node : Project_Node_Id;\n       To   : Project_Node_Id)\n    is\n-      Zone : constant Project_Node_Id :=\n-                Comment_Zones_Of (Node);\n+      Zone : constant Project_Node_Id := Comment_Zones_Of (Node);\n    begin\n       Project_Nodes.Table (Zone).Field2 := To;\n    end Set_First_Comment_Before_End;\n@@ -2275,8 +2271,7 @@ package body Prj.Tree is\n      (Node : Project_Node_Id;\n       To   : Boolean)\n    is\n-      Declaration : constant Project_Node_Id :=\n-        Project_Declaration_Of (Node);\n+      Declaration : constant Project_Node_Id := Project_Declaration_Of (Node);\n    begin\n       Project_Nodes.Table (Declaration).Flag1 := To;\n    end Set_Project_File_Includes_Unkept_Comments;"}, {"sha": "23c6aa5571ee7683dd2d3ff7e037aee529b9bddb", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -2115,13 +2115,8 @@ package body Sem_Ch3 is\n \n          case Ekind (T) is\n             when Array_Kind =>\n-               Set_Ekind                (Id, E_Array_Subtype);\n-\n-               --  Shouldn't we call Copy_Array_Subtype_Attributes here???\n-\n-               Set_First_Index          (Id, First_Index        (T));\n-               Set_Is_Aliased           (Id, Is_Aliased         (T));\n-               Set_Is_Constrained       (Id, Is_Constrained     (T));\n+               Set_Ekind                       (Id, E_Array_Subtype);\n+               Copy_Array_Subtype_Attributes   (Id, T);\n \n             when Decimal_Fixed_Point_Kind =>\n                Set_Ekind                (Id, E_Decimal_Fixed_Point_Subtype);"}, {"sha": "454e72c8b7411b327ac92040e036d3bae1cd5221", "filename": "gcc/ada/sem_ch9.adb", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fsem_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fsem_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch9.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2003, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2004, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -483,6 +483,13 @@ package body Sem_Ch9 is\n             Pre_Analyze_And_Resolve (Expr);\n          end if;\n \n+         if Nkind (Delay_Statement (N)) = N_Delay_Until_Statement and then\n+            not Is_RTE (Base_Type (Etype (Expr)), RO_CA_Time)     and then\n+            not Is_RTE (Base_Type (Etype (Expr)), RO_RT_Time)\n+         then\n+            Error_Msg_N (\"expect Time types for `DELAY UNTIL`\", Expr);\n+         end if;\n+\n          Check_Restriction (No_Fixed_Point, Expr);\n       else\n          Analyze (Delay_Statement (N));"}, {"sha": "459d3a115187b68c174747177dc81f217262e2c6", "filename": "gcc/ada/vms_conv.adb", "status": "modified", "additions": 34, "deletions": 35, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fvms_conv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fvms_conv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_conv.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -793,7 +793,7 @@ package body VMS_Conv is\n \n       for C in Real_Command_Type loop\n          declare\n-            Command : Item_Ptr := new Command_Item;\n+            Command : constant Item_Ptr := new Command_Item;\n \n             Last_Switch : Item_Ptr;\n             --  Last switch in list\n@@ -975,8 +975,9 @@ package body VMS_Conv is\n                      P := P + 1; -- bump past =\n                      while P <= SS'Last loop\n                         declare\n-                           Opt : Item_Ptr := new Option_Item;\n+                           Opt : constant Item_Ptr := new Option_Item;\n                            Q   : Natural;\n+\n                         begin\n                            --  Link new option item into options list\n \n@@ -1088,7 +1089,6 @@ package body VMS_Conv is\n                   --  The first one must be a command name\n \n                   if Arg_Num = 1 and then Arg_Idx = Argv'First then\n-\n                      Command := Matching_Name (Arg.all, Commands);\n \n                      if Command = null then\n@@ -1159,8 +1159,7 @@ package body VMS_Conv is\n \n                                     if Sw.Translation = T_File\n                                       and then Sw.Unix_String\n-                                        (Sw.Unix_String'Last)\n-                                    /= '='\n+                                                (Sw.Unix_String'Last) /= '='\n                                     then\n                                        Put (' ');\n                                     end if;\n@@ -1171,8 +1170,8 @@ package body VMS_Conv is\n                                     Put (\"=nnn\");\n                                     Set_Col (53);\n \n-                                    if Sw.Unix_String (Sw.Unix_String'First)\n-                                    = '`'\n+                                    if Sw.Unix_String\n+                                         (Sw.Unix_String'First) = '`'\n                                     then\n                                        Put (Sw.Unix_String\n                                               (Sw.Unix_String'First + 1\n@@ -1187,8 +1186,8 @@ package body VMS_Conv is\n                                     Put (\"=xyz\");\n                                     Set_Col (53);\n \n-                                    if Sw.Unix_String (Sw.Unix_String'First)\n-                                    = '`'\n+                                    if Sw.Unix_String\n+                                         (Sw.Unix_String'First) = '`'\n                                     then\n                                        Put (Sw.Unix_String\n                                               (Sw.Unix_String'First + 1\n@@ -1208,8 +1207,8 @@ package body VMS_Conv is\n \n                                     Put (Sw.Unix_String.all);\n \n-                                    if Sw.Unix_String (Sw.Unix_String'Last)\n-                                    /= '='\n+                                    if Sw.Unix_String\n+                                         (Sw.Unix_String'Last) /= '='\n                                     then\n                                        Put (' ');\n                                     end if;\n@@ -1297,8 +1296,8 @@ package body VMS_Conv is\n                            when File | Optional_File =>\n                               declare\n                                  Normal_File : constant String_Access :=\n-                                   To_Canonical_File_Spec\n-                                     (Arg.all);\n+                                                 To_Canonical_File_Spec\n+                                                   (Arg.all);\n \n                               begin\n                                  Place (' ');\n@@ -1314,12 +1313,12 @@ package body VMS_Conv is\n \n                            when Unlimited_Files =>\n                               declare\n-                                 Normal_File :\n-                                 constant String_Access :=\n-                                   To_Canonical_File_Spec (Arg.all);\n+                                 Normal_File : constant String_Access :=\n+                                                 To_Canonical_File_Spec\n+                                                   (Arg.all);\n \n-                                 File_Is_Wild  : Boolean := False;\n-                                 File_List     : String_Access_List_Access;\n+                                 File_Is_Wild : Boolean := False;\n+                                 File_List    : String_Access_List_Access;\n \n                               begin\n                                  for J in Arg'Range loop\n@@ -1599,8 +1598,8 @@ package body VMS_Conv is\n                                                        (Arg_Num + 1));\n                                        Arg_Num := Arg_Num + 1;\n                                        Arg_Idx := Argv'First;\n-                                       Next_Arg_Idx\n-                                       := Get_Arg_End (Argv.all, Arg_Idx);\n+                                       Next_Arg_Idx :=\n+                                         Get_Arg_End (Argv.all, Arg_Idx);\n                                        Arg := new String'\n                                          (Argv (Arg_Idx .. Next_Arg_Idx));\n                                        goto Tryagain_After_Coalesce;\n@@ -1621,14 +1620,15 @@ package body VMS_Conv is\n                                     declare\n                                        Dir_Is_Wild       : Boolean := False;\n                                        Dir_Maybe_Is_Wild : Boolean := False;\n+\n                                        Dir_List : String_Access_List_Access;\n+\n                                     begin\n                                        P2 := SwP;\n \n                                        while P2 < Endp\n                                          and then Arg (P2 + 1) /= ','\n                                        loop\n-\n                                           --  A wildcard directory spec on\n                                           --  VMS will contain either * or\n                                           --  % or ...\n@@ -1660,8 +1660,9 @@ package body VMS_Conv is\n                                        end loop;\n \n                                        if Dir_Is_Wild then\n-                                          Dir_List := To_Canonical_File_List\n-                                            (Arg (SwP .. P2), True);\n+                                          Dir_List :=\n+                                            To_Canonical_File_List\n+                                              (Arg (SwP .. P2), True);\n \n                                           for J in Dir_List.all'Range loop\n                                              Place_Unix_Switches\n@@ -1696,7 +1697,7 @@ package body VMS_Conv is\n                                     --  here\n \n                                     if Sw.Unix_String\n-                                      (Sw.Unix_String'Last) /= '='\n+                                         (Sw.Unix_String'Last) /= '='\n                                     then\n                                        Place (' ');\n                                     end if;\n@@ -1722,7 +1723,7 @@ package body VMS_Conv is\n \n                                     if Sw.Translation = T_File\n                                       and then Sw.Unix_String\n-                                        (Sw.Unix_String'Last) /= '='\n+                                                 (Sw.Unix_String'Last) /= '='\n                                     then\n                                        Place (' ');\n                                     end if;\n@@ -1733,9 +1734,7 @@ package body VMS_Conv is\n                                  end if;\n \n                               when T_Numeric =>\n-                                 if\n-                                   OK_Integer (Arg (SwP + 2 .. Arg'Last))\n-                                 then\n+                                 if OK_Integer (Arg (SwP + 2 .. Arg'Last)) then\n                                     Place_Unix_Switches (Sw.Unix_String);\n                                     Place (Arg (SwP + 2 .. Arg'Last));\n \n@@ -1748,9 +1747,8 @@ package body VMS_Conv is\n                                  end if;\n \n                               when T_Alphanumplus =>\n-                                 if\n-                                   OK_Alphanumerplus\n-                                     (Arg (SwP + 2 .. Arg'Last))\n+                                 if OK_Alphanumerplus\n+                                      (Arg (SwP + 2 .. Arg'Last))\n                                  then\n                                     Place_Unix_Switches (Sw.Unix_String);\n                                     Place (Arg (SwP + 2 .. Arg'Last));\n@@ -1768,7 +1766,7 @@ package body VMS_Conv is\n                                  --  A String value must be extended to the\n                                  --  end of the Argv, otherwise strings like\n                                  --  \"foo/bar\" get split at the slash.\n-                                 --\n+\n                                  --  The begining and ending of the string\n                                  --  are flagged with embedded nulls which\n                                  --  are removed when building the Spawn\n@@ -1778,6 +1776,7 @@ package body VMS_Conv is\n                                  --  difficult to embed them.\n \n                                  Place_Unix_Switches (Sw.Unix_String);\n+\n                                  if Next_Arg_Idx /= Argv'Last then\n                                     Next_Arg_Idx := Argv'Last;\n                                     Arg := new String'\n@@ -1789,6 +1788,7 @@ package body VMS_Conv is\n                                        SwP := SwP + 1;\n                                     end loop;\n                                  end if;\n+\n                                  Place (ASCII.NUL);\n                                  Place (Arg (SwP + 2 .. Arg'Last));\n                                  Place (ASCII.NUL);\n@@ -1803,9 +1803,8 @@ package body VMS_Conv is\n                                              Sw.Unix_String'First + 5));\n \n                                  if Sw.Unix_String\n-                                   (Sw.Unix_String'First + 7 ..\n-                                      Sw.Unix_String'Last) =\n-                                     \"MAKE\"\n+                                      (Sw.Unix_String'First + 7 ..\n+                                         Sw.Unix_String'Last) = \"MAKE\"\n                                  then\n                                     Make_Commands_Active := null;\n "}, {"sha": "a1d45bfcb581d9bfac4c824b88c35a96fd028133", "filename": "gcc/ada/xr_tabls.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fxr_tabls.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9/gcc%2Fada%2Fxr_tabls.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fxr_tabls.adb?ref=adc04486ee5d4b2f20dfdba93f8c4fd52e1ef9b9", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1998-2003 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1998-2004 Free Software Foundation, Inc.          --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1413,7 +1413,7 @@ package body Xr_Tabls is\n      (Sorted : Boolean := True)\n       return   Declaration_Array_Access\n    is\n-      Arr   : Declaration_Array_Access :=\n+      Arr   : constant Declaration_Array_Access :=\n                 new Declaration_Array (1 .. Entities_Count);\n       Decl  : Declaration_Reference := Entities_HTable.Get_First;\n       Index : Natural               := Arr'First;"}]}