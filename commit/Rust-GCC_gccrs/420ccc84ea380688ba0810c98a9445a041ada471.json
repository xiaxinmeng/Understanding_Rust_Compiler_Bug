{"sha": "420ccc84ea380688ba0810c98a9445a041ada471", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDIwY2NjODRlYTM4MDY4OGJhMDgxMGM5OGE5NDQ1YTA0MWFkYTQ3MQ==", "commit": {"author": {"name": "Stuart Henderson", "email": "shenders@gcc.gnu.org", "date": "2011-05-04T10:48:55Z"}, "committer": {"name": "Stuart Henderson", "email": "shenders@gcc.gnu.org", "date": "2011-05-04T10:48:55Z"}, "message": "2011-05-04  Stuart Henderson  <shenders@gcc.gnu.org>\n\n        From Bernd Schmidt\n        * config/bfin/bfin.h (FUNCTION_PROFILER): Take TARGET_LONG_CALLS into\n        account and save/restore RETS.\n        (PROFILE_BEFORE_PROLOGUE): Define.\n        (ASM_OUTPUT_REG_PUSH, ASM_OUTPUT_REG_POP): Add tab character.  Correct\n        the push insn to use predecrement.\n\nFrom-SVN: r173365", "tree": {"sha": "7dc8c527a183593245b3cf0635e120a94feb8374", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7dc8c527a183593245b3cf0635e120a94feb8374"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/420ccc84ea380688ba0810c98a9445a041ada471", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/420ccc84ea380688ba0810c98a9445a041ada471", "html_url": "https://github.com/Rust-GCC/gccrs/commit/420ccc84ea380688ba0810c98a9445a041ada471", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/420ccc84ea380688ba0810c98a9445a041ada471/comments", "author": null, "committer": null, "parents": [{"sha": "9f8d69ee246583778c5eb61b430eb465477742f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f8d69ee246583778c5eb61b430eb465477742f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f8d69ee246583778c5eb61b430eb465477742f3"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "6f509040f39ac0df4fccd9236c4d8b5c49e8c6b5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/420ccc84ea380688ba0810c98a9445a041ada471/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/420ccc84ea380688ba0810c98a9445a041ada471/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=420ccc84ea380688ba0810c98a9445a041ada471", "patch": "@@ -1,3 +1,12 @@\n+2011-05-04  Stuart Henderson  <shenders@gcc.gnu.org>\n+\n+\tFrom Bernd Schmidt\n+\t* config/bfin/bfin.h (FUNCTION_PROFILER): Take TARGET_LONG_CALLS into\n+\taccount and save/restore RETS.\n+\t(PROFILE_BEFORE_PROLOGUE): Define.\n+\t(ASM_OUTPUT_REG_PUSH, ASM_OUTPUT_REG_POP): Add tab character.  Correct\n+\tthe push insn to use predecrement.\n+\n 2011-05-04  Stuart Henderson  <shenders@gcc.gnu.org>\n \n \tFrom Jie Zhang"}, {"sha": "0d83ad8212666581d7511734d740923168857629", "filename": "gcc/config/bfin/bfin.h", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/420ccc84ea380688ba0810c98a9445a041ada471/gcc%2Fconfig%2Fbfin%2Fbfin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/420ccc84ea380688ba0810c98a9445a041ada471/gcc%2Fconfig%2Fbfin%2Fbfin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.h?ref=420ccc84ea380688ba0810c98a9445a041ada471", "patch": "@@ -1126,16 +1126,26 @@ do { \t\t\t\t\t\t\\\n \n #define ASM_COMMENT_START \"//\"\n \n+#define PROFILE_BEFORE_PROLOGUE\n #define FUNCTION_PROFILER(FILE, LABELNO)\t\\\n   do {\t\t\t\t\t\t\\\n-    fprintf (FILE, \"\\tCALL __mcount;\\n\");\t\\\n+    fprintf (FILE, \"\\t[--SP] = RETS;\\n\");\t\\\n+    if (TARGET_LONG_CALLS)\t\t\t\\\n+      {\t\t\t\t\t\t\\\n+\tfprintf (FILE, \"\\tP2.h = __mcount;\\n\");\t\\\n+\tfprintf (FILE, \"\\tP2.l = __mcount;\\n\");\t\\\n+\tfprintf (FILE, \"\\tCALL (P2);\\n\");\t\\\n+      }\t\t\t\t\t\t\\\n+    else\t\t\t\t\t\\\n+      fprintf (FILE, \"\\tCALL __mcount;\\n\");\t\\\n+    fprintf (FILE, \"\\tRETS = [SP++];\\n\");\t\\\n   } while(0)\n \n #undef NO_PROFILE_COUNTERS\n #define NO_PROFILE_COUNTERS 1\n \n-#define ASM_OUTPUT_REG_PUSH(FILE, REGNO) fprintf (FILE, \"[SP--] = %s;\\n\", reg_names[REGNO])\n-#define ASM_OUTPUT_REG_POP(FILE, REGNO)  fprintf (FILE, \"%s = [SP++];\\n\", reg_names[REGNO])\n+#define ASM_OUTPUT_REG_PUSH(FILE, REGNO) fprintf (FILE, \"\\t[--SP] = %s;\\n\", reg_names[REGNO])\n+#define ASM_OUTPUT_REG_POP(FILE, REGNO)  fprintf (FILE, \"\\t%s = [SP++];\\n\", reg_names[REGNO])\n \n extern rtx bfin_cc_rtx, bfin_rets_rtx;\n "}]}