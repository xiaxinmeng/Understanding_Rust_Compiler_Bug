{"sha": "a7612343f3fbea02e8296d30000bbb26a43ec11c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc2MTIzNDNmM2ZiZWEwMmU4Mjk2ZDMwMDAwYmJiMjZhNDNlYzExYw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2002-12-22T15:02:30Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2002-12-22T15:02:30Z"}, "message": "h8300.c (get_shift_alg): Make shift insn sequences end with a valid cc0 whenever possible.\n\n\t* config/h8300/h8300.c (get_shift_alg): Make shift insn\n\tsequences end with a valid cc0 whenever possible.\n\nFrom-SVN: r60406", "tree": {"sha": "80c7553b09fb4e8ace608fc5116111d379371979", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80c7553b09fb4e8ace608fc5116111d379371979"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7612343f3fbea02e8296d30000bbb26a43ec11c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7612343f3fbea02e8296d30000bbb26a43ec11c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7612343f3fbea02e8296d30000bbb26a43ec11c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7612343f3fbea02e8296d30000bbb26a43ec11c/comments", "author": null, "committer": null, "parents": [{"sha": "8fb52ad1f09bcf187a727e99c8deb1ee71c8f9bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fb52ad1f09bcf187a727e99c8deb1ee71c8f9bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fb52ad1f09bcf187a727e99c8deb1ee71c8f9bc"}], "stats": {"total": 54, "additions": 32, "deletions": 22}, "files": [{"sha": "58962a017eede7ccb71b7c6ad25a9a0611031477", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7612343f3fbea02e8296d30000bbb26a43ec11c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7612343f3fbea02e8296d30000bbb26a43ec11c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a7612343f3fbea02e8296d30000bbb26a43ec11c", "patch": "@@ -1,3 +1,8 @@\n+2002-12-22  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.c (get_shift_alg): Make shift insn\n+\tsequences end with a valid cc0 whenever possible.\n+\n 2002-12-22  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/h8300.md (negsf2): New."}, {"sha": "0eb973dc078f5db059f2690631f2413965afc1dc", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 27, "deletions": 22, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7612343f3fbea02e8296d30000bbb26a43ec11c/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7612343f3fbea02e8296d30000bbb26a43ec11c/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=a7612343f3fbea02e8296d30000bbb26a43ec11c", "patch": "@@ -2590,21 +2590,29 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t    {\n \t    case SHIFT_ASHIFT:\n \t      info->special = \"mov.b\\t%s0,%t0\\n\\tsub.b\\t%s0,%s0\";\n-\t      info->shift1  = \"shal.b\\t%t0\";\n-\t      info->shift2  = \"shal.b\\t#2,%t0\";\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n-\t      info->special = \"mov.b\\t%t0,%s0\\n\\tsub.b\\t%t0,%t0\";\n-\t      info->shift1  = \"shlr.b\\t%s0\";\n-\t      info->shift2  = \"shlr.b\\t#2,%s0\";\n+\t      if (TARGET_H8300)\n+\t\t{\n+\t\t  info->special = \"mov.b\\t%t0,%s0\\n\\tsub.b\\t%t0,%t0\";\n+\t\t  info->shift1  = \"shlr.b\\t%s0\";\n+\t\t}\n+\t      else\n+\t\t{\n+\t\t  info->special = \"mov.b\\t%t0,%s0\\n\\textu.w\\t%T0\";\n+\t\t}\n \t      goto end;\n \t    case SHIFT_ASHIFTRT:\n \t      if (TARGET_H8300)\n-\t\tinfo->special = \"mov.b\\t%t0,%s0\\n\\tbld\\t#7,%s0\\n\\tsubx\\t%t0,%t0\";\n+\t\t{\n+\t\t  info->special = \"mov.b\\t%t0,%s0\\n\\tbld\\t#7,%s0\\n\\tsubx\\t%t0,%t0\";\n+\t\t  info->shift1  = \"shar.b\\t%s0\";\n+\t\t  info->shift2  = \"shar.b\\t#2,%s0\";\n+\t\t}\n \t      else\n-\t\tinfo->special = \"mov.b\\t%t0,%s0\\n\\texts.w\\t%T0\";\n-\t      info->shift1 = \"shar.b\\t%s0\";\n-\t      info->shift2 = \"shar.b\\t#2,%s0\";\n+\t\t{\n+\t\t  info->special = \"mov.b\\t%t0,%s0\\n\\texts.w\\t%T0\";\n+\t\t}\n \t      goto end;\n \t    }\n \t}\n@@ -2730,15 +2738,14 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t\t}\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n-\t      info->special = \"mov.w\\t%e0,%f0\\n\\tsub.w\\t%e0,%e0\";\n \t      if (TARGET_H8300)\n \t\t{\n-\t\t  info->shift1 = \"shlr\\t%x0\\n\\trotxr\\t%w0\";\n+\t\t  info->special = \"mov.w\\t%e0,%f0\\n\\tsub.w\\t%e0,%e0\";\n+\t\t  info->shift1  = \"shlr\\t%x0\\n\\trotxr\\t%w0\";\n \t\t}\n \t      else\n \t\t{\n-\t\t  info->shift1 = \"shlr.l\\t%S0\";\n-\t\t  info->shift2 = \"shlr.l\\t#2,%S0\";\n+\t\t  info->special = \"mov.w\\t%e0,%f0\\n\\textu.l\\t%S0\";\n \t\t}\n \t      goto end;\n \t    case SHIFT_ASHIFTRT:\n@@ -2750,8 +2757,6 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t      else\n \t\t{\n \t\t  info->special = \"mov.w\\t%e0,%f0\\n\\texts.l\\t%S0\";\n-\t\t  info->shift1  = \"shar.l\\t%S0\";\n-\t\t  info->shift2  = \"shar.l\\t#2,%S0\";\n \t\t}\n \t      goto end;\n \t    }\n@@ -2814,9 +2819,9 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      if (TARGET_H8300H)\n-\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\tsub.w\\t%e0,%e0\";\n+\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n \t      else\n-\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\trotl.l\\t#2,%S0\\n\\tsub.w\\t%e0,%e0\";\n+\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\trotl.l\\t#2,%S0\\n\\textu.l\\t%S0\";\n \t      info->shift1  = \"\";\n \t      info->shift2  = \"\";\n \t      goto end;\n@@ -2838,9 +2843,9 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      if (TARGET_H8300H)\n-\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\tsub.w\\t%e0,%e0\";\n+\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n \t      else\n-\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\trotl.l\\t%S0\\n\\tsub.w\\t%e0,%e0\";\n+\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n \t      info->shift1  = \"\";\n \t      info->shift2  = \"\";\n \t      goto end;\n@@ -2862,9 +2867,9 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      if (TARGET_H8300H)\n-\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\tsub.w\\t%e0,%e0\";\n+\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n \t      else\n-\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\tsub.w\\t%e0,%e0\";\n+\t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\textu.l\\t%S0\";\n \t      info->shift1  = \"\";\n \t      info->shift2  = \"\";\n \t      goto end;\n@@ -2900,7 +2905,7 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t\t  info->special = \"shll.l\\t%S0\\n\\txor.l\\t%S0,%S0\\n\\trotxl.l\\t%S0\";\n \t\t  goto end;\n \t\tcase SHIFT_ASHIFTRT:\n-\t\t  info->special = \"shll\\t%e0\\n\\tsubx\\t%w0,%w0\\n\\tmov.b\\t%w0,%x0\\n\\tmov.w\\t%f0,%e0\";\n+\t\t  info->special = \"shll\\t%e0\\n\\tsubx\\t%w0,%w0\\n\\texts.w\\t%T0\\n\\texts.l\\t%S0\";\n \t\t  goto end;\n \t\t}\n \t    }"}]}