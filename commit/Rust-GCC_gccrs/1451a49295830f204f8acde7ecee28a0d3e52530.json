{"sha": "1451a49295830f204f8acde7ecee28a0d3e52530", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQ1MWE0OTI5NTgzMGYyMDRmOGFjZGU3ZWNlZTI4YTBkM2U1MjUzMA==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2001-12-18T21:12:23Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-12-18T21:12:23Z"}, "message": "acinclude.m4 (GLIBCPP_ENABLE_CLOCALE): Extended checking before enabling gnu model.\n\n\n2001-12-18  Benjamin Kosnik  <bkoz@redhat.com>\n\n\t* acinclude.m4 (GLIBCPP_ENABLE_CLOCALE): Extended checking before\n\tenabling gnu model.\n\t* aclocal.m4: Rebuild.\n\t* configure: Rebuild.\n\nFrom-SVN: r48163", "tree": {"sha": "f227d9b0c66bf08c91e9badf39e5b61ef9ffdd26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f227d9b0c66bf08c91e9badf39e5b61ef9ffdd26"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1451a49295830f204f8acde7ecee28a0d3e52530", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1451a49295830f204f8acde7ecee28a0d3e52530", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1451a49295830f204f8acde7ecee28a0d3e52530", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1451a49295830f204f8acde7ecee28a0d3e52530/comments", "author": null, "committer": null, "parents": [{"sha": "e964a852b2c97cd78bfd67806aff817d2439247b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e964a852b2c97cd78bfd67806aff817d2439247b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e964a852b2c97cd78bfd67806aff817d2439247b"}], "stats": {"total": 1884, "additions": 993, "deletions": 891}, "files": [{"sha": "8e1544eb6ad4ed8eb330b7c9087c7d6a5c03870b", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=1451a49295830f204f8acde7ecee28a0d3e52530", "patch": "@@ -1,3 +1,10 @@\n+2001-12-18  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\t* acinclude.m4 (GLIBCPP_ENABLE_CLOCALE): Extended checking before\n+\tenabling gnu model.\n+\t* aclocal.m4: Rebuild.\n+\t* configure: Rebuild.\n+\t\n 2001-12-18  Paolo Carlini  <pcarlini@unitus.it>\n             Nathan Myers  <ncm@cantrip.org>\n \t"}, {"sha": "2d55e534779b7edf8cc16bab2eec605636d05ceb", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 28, "deletions": 2, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=1451a49295830f204f8acde7ecee28a0d3e52530", "patch": "@@ -1052,12 +1052,38 @@ AC_DEFUN(GLIBCPP_ENABLE_CLOCALE, [\n   if test x$enable_clocale_flag = xno; then\n     case x${target_os} in\n       xlinux* | xgnu*)\n-\tAC_EGREP_CPP([ok], [\n+\tAC_EGREP_CPP([_GLIBCPP_ok], [\n         #include <features.h>\n         #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2) \n-          ok\n+          _GLIBCPP_ok\n         #endif\n         ], enable_clocale_flag=gnu, enable_clocale_flag=generic)\n+\n+\t# Test for bugs early in glibc-2.2.x series\n+  \tif test x$enable_clocale_flag = xgnu; then\n+    \t  AC_TRY_RUN([\n+\t  #define _GNU_SOURCE 1\n+\t  #include <locale.h>\n+\t  int main()\n+\t  {\n+  \t    const char __one[] = \"\ufffduglein Augmen\";\n+  \t    const char __two[] = \"\ufffduglein\";\n+  \t    int i;\n+  \t    int j;\n+  \t    __locale_t\tloc;\n+   \t    __locale_t\tloc_dup;\n+  \t    loc = __newlocale(1 << LC_ALL, \"de_DE\", 0);\n+  \t    loc_dup = __duplocale(loc);\n+  \t    i = __strcoll_l(__one, __two, loc);\n+  \t    j = __strcoll_l(__one, __two, loc_dup);\n+  \t    return 0;\n+\t  }\n+\t  ], \n+\t  [enable_clocale_flag=gnu],[enable_clocale_flag=generic],\n+\t  [enable_clocale_flag=generic])\n+  \tfi\n+\n+\t# ... at some point put __strxfrm_l tests in as well.\n         ;;\n       *)\n \tenable_clocale_flag=generic"}, {"sha": "b945d5a293738fd9d9a38ae706b152dba294c7d7", "filename": "libstdc++-v3/aclocal.m4", "status": "modified", "additions": 28, "deletions": 2, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Faclocal.m4?ref=1451a49295830f204f8acde7ecee28a0d3e52530", "patch": "@@ -1064,12 +1064,38 @@ AC_DEFUN(GLIBCPP_ENABLE_CLOCALE, [\n   if test x$enable_clocale_flag = xno; then\n     case x${target_os} in\n       xlinux* | xgnu*)\n-\tAC_EGREP_CPP([ok], [\n+\tAC_EGREP_CPP([_GLIBCPP_ok], [\n         #include <features.h>\n         #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2) \n-          ok\n+          _GLIBCPP_ok\n         #endif\n         ], enable_clocale_flag=gnu, enable_clocale_flag=generic)\n+\n+\t# Test for bugs early in glibc-2.2.x series\n+  \tif test x$enable_clocale_flag = xgnu; then\n+    \t  AC_TRY_RUN([\n+\t  #define _GNU_SOURCE 1\n+\t  #include <locale.h>\n+\t  int main()\n+\t  {\n+  \t    const char __one[] = \"\ufffduglein Augmen\";\n+  \t    const char __two[] = \"\ufffduglein\";\n+  \t    int i;\n+  \t    int j;\n+  \t    __locale_t\tloc;\n+   \t    __locale_t\tloc_dup;\n+  \t    loc = __newlocale(1 << LC_ALL, \"de_DE\", 0);\n+  \t    loc_dup = __duplocale(loc);\n+  \t    i = __strcoll_l(__one, __two, loc);\n+  \t    j = __strcoll_l(__one, __two, loc_dup);\n+  \t    return 0;\n+\t  }\n+\t  ], \n+\t  [enable_clocale_flag=gnu],[enable_clocale_flag=generic],\n+\t  [enable_clocale_flag=generic])\n+  \tfi\n+\n+\t# ... at some point put __strxfrm_l tests in as well.\n         ;;\n       *)\n \tenable_clocale_flag=generic"}, {"sha": "e6307719122e23f352ca280fd712d75e21210053", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 930, "deletions": 887, "changes": 1817, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1451a49295830f204f8acde7ecee28a0d3e52530/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=1451a49295830f204f8acde7ecee28a0d3e52530"}]}