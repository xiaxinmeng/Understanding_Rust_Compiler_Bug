{"sha": "397763d2af80316f05484a8668c3d0dddf2c9811", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzk3NzYzZDJhZjgwMzE2ZjA1NDg0YTg2NjhjM2QwZGRkZjJjOTgxMQ==", "commit": {"author": {"name": "Bud Davis", "email": "bdavis@gcc.gnu.org", "date": "2005-02-23T04:09:17Z"}, "committer": {"name": "Bud Davis", "email": "bdavis@gcc.gnu.org", "date": "2005-02-23T04:09:17Z"}, "message": "[multiple changes]\n\n2004-02-22  Paul Thomas <paulthomas2@wannado.fr>\n            Bud Davis  <bdavis@gfortran.org>\n\n        * io/list_read.c (read_real): Handle separators properly\n        in list directed read.\n\n2005-02-22  Bud Davis  <bdavis@gfortran.org>\n\n        * gfortran.dg/list_read_4.f90: new test.\n\nFrom-SVN: r95436", "tree": {"sha": "de14bff1e5b45413cca3b8e5f95bd35c6730e5ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de14bff1e5b45413cca3b8e5f95bd35c6730e5ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/397763d2af80316f05484a8668c3d0dddf2c9811", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/397763d2af80316f05484a8668c3d0dddf2c9811", "html_url": "https://github.com/Rust-GCC/gccrs/commit/397763d2af80316f05484a8668c3d0dddf2c9811", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/397763d2af80316f05484a8668c3d0dddf2c9811/comments", "author": null, "committer": null, "parents": [{"sha": "e59ba1bccdc8895dd90e52b332869cf8015bd829", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e59ba1bccdc8895dd90e52b332869cf8015bd829", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e59ba1bccdc8895dd90e52b332869cf8015bd829"}], "stats": {"total": 70, "additions": 66, "deletions": 4}, "files": [{"sha": "ddaa9ccad8cf30a4afb5077567d62457699044e8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/397763d2af80316f05484a8668c3d0dddf2c9811/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/397763d2af80316f05484a8668c3d0dddf2c9811/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=397763d2af80316f05484a8668c3d0dddf2c9811", "patch": "@@ -1,3 +1,7 @@\n+2005-02-22  Bud Davis  <bdavis@gfortran.org>\n+\n+\t* gfortran.dg/list_read_4.f90: new test.\n+\n 2005-02-22  Kazu Hirata  <kazu@cs.umass.edu>\n \n \tPR rtl-optimization/20017."}, {"sha": "8260ca2d934eb6f491f5892fa2cdca90e0e87fb2", "filename": "gcc/testsuite/gfortran.dg/list_read_4.f90", "status": "added", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/397763d2af80316f05484a8668c3d0dddf2c9811/gcc%2Ftestsuite%2Fgfortran.dg%2Flist_read_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/397763d2af80316f05484a8668c3d0dddf2c9811/gcc%2Ftestsuite%2Fgfortran.dg%2Flist_read_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Flist_read_4.f90?ref=397763d2af80316f05484a8668c3d0dddf2c9811", "patch": "@@ -0,0 +1,54 @@\n+C { dg-do run }\n+C Test of gfortran list directed read> check delimiters are correctly\n+C treated.  Written in f77 so that g77 will run for comparison.\n+C\n+C f , e and i edit reads are terminated separately by read_real.c\n+C\n+C PThomas                                                   Jan 2005\n+C BDavis        \n+      program list_read_4\n+      integer i(10),l(10),k,j \n+      real x(10),y(10)\n+C expected results\n+      data y / 1.0,2.0,3.0,-1.0,-1.0,-1.0,4.0,4.0,99.0,99.0 /\n+      data l /1,2,3,-1,-1,-1,4,4,99,99/\n+C put them in a file\n+      open (10,status=\"scratch\")\n+      write (10,*) \" 1.0, 2.0 , 3.0,, 2* , 2*4.0 , 5*99.0\"\n+      write (10,*) \" 1.0e0, 2.0e0 , 3.0e0,, 2* , 2*4.0e0 , 5*99.0e0\"\n+      write (10,*) \" 1,   2 ,   3,,   2* , 2*4 ,   5*99\"\n+      write (10,*) \" 1,   2 ,   3,,   2* , 2*4 ,   5*99\"\n+      rewind (10)\n+C\n+      do k = 1,10\n+        x(k) = -1.0\n+      enddo\n+      read (10,*,iostat=ier) x\n+      if (ier.ne.0) call abort\n+      do k = 1,10\n+         if (x(k).ne.y(k)) call abort\n+         x(k) = -1\n+      end do\n+      READ(10,*,iostat=ier) x\n+      if (ier.ne.0) call abort\n+      do k = 1,10\n+         if (x(k).ne.y(k)) call abort\n+         x(k) = -1\n+      end do\n+      READ(10,*,iostat=ier) x\n+      if (ier.ne.0) call abort\n+      do k = 1,10\n+         if (x(k).ne.y(k)) call abort\n+         x(k) = -1\n+      end do\n+C integer\n+      do k = 1,10\n+        i(k) = -1\n+      end do \n+      READ(10,*,iostat=ier) (i(j),j=1,10)\n+      if (ier.ne.0) call abort\n+      do k = 1,10\n+         if (i(k).ne.y(k)) call abort\n+         i(k) = -1\n+      end do\n+      end"}, {"sha": "cdb0868cdb6d440a664732be4c64614be3fb5ffa", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/397763d2af80316f05484a8668c3d0dddf2c9811/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/397763d2af80316f05484a8668c3d0dddf2c9811/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=397763d2af80316f05484a8668c3d0dddf2c9811", "patch": "@@ -1,3 +1,9 @@\n+2004-02-22  Paul Thomas <paulthomas2@wannado.fr>\n+\t    Bud Davis  <bdavis@gfortran.org>\n+\n+\t* io/list_read.c (read_real): Handle separators properly\n+\tin list directed read.\n+\n 2004-02-21  Bud Davis  <bdavis@gfortran.org>\n \n \tPR fortran/20086"}, {"sha": "74a6688b0148c68bcafdf73040efa0aabf43fd6f", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/397763d2af80316f05484a8668c3d0dddf2c9811/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/397763d2af80316f05484a8668c3d0dddf2c9811/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=397763d2af80316f05484a8668c3d0dddf2c9811", "patch": "@@ -1052,8 +1052,6 @@ read_real (int length)\n \t  goto got_repeat;\n \n \tCASE_SEPARATORS:\n-          if (c != '\\n' &&  c != ',')\n-            unget_char (c);    /* Real number that is just a digit-string.  */\n \t  goto done;\n \n \tdefault:\n@@ -1164,8 +1162,6 @@ read_real (int length)\n \t  break;\n \n \tCASE_SEPARATORS:\n-\t  unget_char (c);\n-\t  eat_separator ();\n \t  goto done;\n \n \tdefault:\n@@ -1174,6 +1170,8 @@ read_real (int length)\n     }\n \n  done:\n+  unget_char (c);\n+  eat_separator ();\n   push_char ('\\0');\n   if (convert_real (value, saved_string, length))\n     return;"}]}