{"sha": "cca1130d11997d40bd37603fab5953ccf8061331", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NhMTEzMGQxMTk5N2Q0MGJkMzc2MDNmYWI1OTUzY2NmODA2MTMzMQ==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.vnet.ibm.com", "date": "2013-03-20T13:24:12Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2013-03-20T13:24:12Z"}, "message": "re PR rtl-optimization/56605 (Redundant branch introduced during loop2 phases)\n\ngcc:\n\n2013-03-13  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\t    Steven Bosscher <steven@gcc.gnu.org>\n\n\tPR rtl-optimization/56605\n\t* loop-iv.c (implies_p): Handle equal RTXs and subregs.\n\ngcc/testsuite:\n\n2013-03-13  Bill Schmidt  wschmidt@linux.vnet.ibm.com>\n\n\tPR rtl-optimization/56605\n\t* gcc.target/powerpc/pr56605.c: New.\n\nCo-Authored-By: Steven Bosscher <steven@gcc.gnu.org>\n\nFrom-SVN: r196823", "tree": {"sha": "8d09c10eb8fe0b0c3a6649a5f43982ffed087631", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8d09c10eb8fe0b0c3a6649a5f43982ffed087631"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cca1130d11997d40bd37603fab5953ccf8061331", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca1130d11997d40bd37603fab5953ccf8061331", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cca1130d11997d40bd37603fab5953ccf8061331", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca1130d11997d40bd37603fab5953ccf8061331/comments", "author": {"login": "wschmidt-ibm", "id": 5520937, "node_id": "MDQ6VXNlcjU1MjA5Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5520937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wschmidt-ibm", "html_url": "https://github.com/wschmidt-ibm", "followers_url": "https://api.github.com/users/wschmidt-ibm/followers", "following_url": "https://api.github.com/users/wschmidt-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/wschmidt-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wschmidt-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wschmidt-ibm/subscriptions", "organizations_url": "https://api.github.com/users/wschmidt-ibm/orgs", "repos_url": "https://api.github.com/users/wschmidt-ibm/repos", "events_url": "https://api.github.com/users/wschmidt-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/wschmidt-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "818d4efaa751bfe0f2a69edfb3eeb5a3a0877b63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/818d4efaa751bfe0f2a69edfb3eeb5a3a0877b63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/818d4efaa751bfe0f2a69edfb3eeb5a3a0877b63"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "9579b6a3fb2e0dcc4e991effd7373a2f29b63498", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cca1130d11997d40bd37603fab5953ccf8061331", "patch": "@@ -1,3 +1,9 @@\n+2013-03-20  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\t    Steven Bosscher <steven@gcc.gnu.org>\n+\n+\tPR rtl-optimization/56605\n+\t* loop-iv.c (implies_p): Handle equal RTXs and subregs.\n+\n 2013-03-20  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR bootstrap/56656"}, {"sha": "0847307e1a879a12fe85267650f1a39d20218478", "filename": "gcc/loop-iv.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2Floop-iv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2Floop-iv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop-iv.c?ref=cca1130d11997d40bd37603fab5953ccf8061331", "patch": "@@ -1496,19 +1496,26 @@ implies_p (rtx a, rtx b)\n   rtx op0, op1, opb0, opb1, r;\n   enum machine_mode mode;\n \n+  if (rtx_equal_p (a, b))\n+    return true;\n+\n   if (GET_CODE (a) == EQ)\n     {\n       op0 = XEXP (a, 0);\n       op1 = XEXP (a, 1);\n \n-      if (REG_P (op0))\n+      if (REG_P (op0)\n+\t  || (GET_CODE (op0) == SUBREG\n+\t      && REG_P (SUBREG_REG (op0))))\n \t{\n \t  r = simplify_replace_rtx (b, op0, op1);\n \t  if (r == const_true_rtx)\n \t    return true;\n \t}\n \n-      if (REG_P (op1))\n+      if (REG_P (op1)\n+\t  || (GET_CODE (op1) == SUBREG\n+\t      && REG_P (SUBREG_REG (op1))))\n \t{\n \t  r = simplify_replace_rtx (b, op1, op0);\n \t  if (r == const_true_rtx)"}, {"sha": "29d5d607c5d6b40ff398163c53b764e1135f244f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cca1130d11997d40bd37603fab5953ccf8061331", "patch": "@@ -1,3 +1,8 @@\n+2013-03-20  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\tPR rtl-optimization/56605\n+\t* gcc.target/powerpc/pr56605.c: New.\n+\n 2013-03-20  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \tPR fortran/54932"}, {"sha": "7e5af449d058452ed6c604535eb97796f9fa5db3", "filename": "gcc/testsuite/gcc.target/powerpc/pr56605.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr56605.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca1130d11997d40bd37603fab5953ccf8061331/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr56605.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr56605.c?ref=cca1130d11997d40bd37603fab5953ccf8061331", "patch": "@@ -0,0 +1,13 @@\n+/* PR rtl-optimization/56605 */\n+/* { dg-do compile { target { powerpc64-*-* && lp64 } } } */\n+/* { dg-options \"-O3 -mvsx -mcpu=power7 -fno-unroll-loops -fdump-rtl-loop2_doloop\" } */\n+\n+void foo (short* __restrict sb, int* __restrict ia)\n+{\n+  int i;\n+  for (i = 0; i < 4000; i++)\n+    ia[i] = (int) sb[i];\n+}\n+\n+/* { dg-final { scan-rtl-dump-times \"\\\\\\(compare:CC \\\\\\(subreg:SI \\\\\\(reg:DI\" 1 \"loop2_doloop\" } } */\n+/* { dg-final { cleanup-rtl-dump \"loop2_doloop\" } } */"}]}