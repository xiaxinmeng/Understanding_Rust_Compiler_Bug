{"sha": "645eee7431fef4cc37c5307a6c6f81fcc6c553d4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQ1ZWVlNzQzMWZlZjRjYzM3YzUzMDdhNmM2ZjgxZmNjNmM1NTNkNA==", "commit": {"author": {"name": "Aaron Sawdey", "email": "acsawdey@linux.ibm.com", "date": "2018-11-29T03:56:14Z"}, "committer": {"name": "Aaron Sawdey", "email": "acsawdey@gcc.gnu.org", "date": "2018-11-29T03:56:14Z"}, "message": "rs6000-string.c (expand_block_clear): Change how we determine if unaligned vsx is ok.\n\n2018-11-28  Aaron Sawdey  <acsawdey@linux.ibm.com>\n\n\t* config/rs6000/rs6000-string.c (expand_block_clear): Change how\n\twe determine if unaligned vsx is ok.\n\nFrom-SVN: r266599", "tree": {"sha": "673904390a79b188f271706b80f1a2bbafa46f55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/673904390a79b188f271706b80f1a2bbafa46f55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/645eee7431fef4cc37c5307a6c6f81fcc6c553d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/645eee7431fef4cc37c5307a6c6f81fcc6c553d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/645eee7431fef4cc37c5307a6c6f81fcc6c553d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/645eee7431fef4cc37c5307a6c6f81fcc6c553d4/comments", "author": {"login": "acsawdey", "id": 41373646, "node_id": "MDQ6VXNlcjQxMzczNjQ2", "avatar_url": "https://avatars.githubusercontent.com/u/41373646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acsawdey", "html_url": "https://github.com/acsawdey", "followers_url": "https://api.github.com/users/acsawdey/followers", "following_url": "https://api.github.com/users/acsawdey/following{/other_user}", "gists_url": "https://api.github.com/users/acsawdey/gists{/gist_id}", "starred_url": "https://api.github.com/users/acsawdey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acsawdey/subscriptions", "organizations_url": "https://api.github.com/users/acsawdey/orgs", "repos_url": "https://api.github.com/users/acsawdey/repos", "events_url": "https://api.github.com/users/acsawdey/events{/privacy}", "received_events_url": "https://api.github.com/users/acsawdey/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ffe2c05539d5ec6bfc4154fcdc71c41adf900a29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffe2c05539d5ec6bfc4154fcdc71c41adf900a29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffe2c05539d5ec6bfc4154fcdc71c41adf900a29"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "98f4f3fe3a8599f8f66bb0d539d8b85b923ef85d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/645eee7431fef4cc37c5307a6c6f81fcc6c553d4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/645eee7431fef4cc37c5307a6c6f81fcc6c553d4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=645eee7431fef4cc37c5307a6c6f81fcc6c553d4", "patch": "@@ -1,3 +1,8 @@\n+2018-11-28  Aaron Sawdey  <acsawdey@linux.ibm.com>\n+\n+\t* config/rs6000/rs6000-string.c (expand_block_clear): Change how\n+\twe determine if unaligned vsx is ok.\n+\n 2018-11-28  Jan Hubicka  <jh@suse.cz>\n \n \t* predict.c (determine_unlikely_bbs): Forward declare; also determine"}, {"sha": "bc5bec2045e639c3069a481f8de8dfee159c3a82", "filename": "gcc/config/rs6000/rs6000-string.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/645eee7431fef4cc37c5307a6c6f81fcc6c553d4/gcc%2Fconfig%2Frs6000%2Frs6000-string.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/645eee7431fef4cc37c5307a6c6f81fcc6c553d4/gcc%2Fconfig%2Frs6000%2Frs6000-string.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-string.c?ref=645eee7431fef4cc37c5307a6c6f81fcc6c553d4", "patch": "@@ -85,14 +85,15 @@ expand_block_clear (rtx operands[])\n   if (! optimize_size && bytes > 8 * clear_step)\n     return 0;\n \n+  bool unaligned_vsx_ok = (bytes >= 32 && TARGET_EFFICIENT_UNALIGNED_VSX);\n+\n   for (offset = 0; bytes > 0; offset += clear_bytes, bytes -= clear_bytes)\n     {\n       machine_mode mode = BLKmode;\n       rtx dest;\n \n       if (TARGET_ALTIVEC\n-\t  && ((bytes >= 16 && align >= 128)\n-\t      || (bytes >= 32 && TARGET_EFFICIENT_UNALIGNED_VSX)))\n+\t  && (bytes >= 16 && (align >= 128 || unaligned_vsx_ok)))\n \t{\n \t  clear_bytes = 16;\n \t  mode = V4SImode;"}]}