{"sha": "f4e929877c7e155de2f729c3330353762ce1b0ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjRlOTI5ODc3YzdlMTU1ZGUyZjcyOWMzMzMwMzUzNzYyY2UxYjBlZA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-04-15T01:37:03Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-04-15T01:37:03Z"}, "message": "c-decl.c (grokdeclarator): Reject extern redeclarations of static variables.\n\n\t* c-decl.c (grokdeclarator): Reject extern redeclarations of\n\tstatic variables.\n\n\t* gcc.c-torture/execute/scope-2.c: Move to ...\n\t* gcc.dg/noncompile/scope.c: .... here.\n\nFrom-SVN: r65615", "tree": {"sha": "4c8438b79290bd778e2a8b4953783090eea99c1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4c8438b79290bd778e2a8b4953783090eea99c1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f4e929877c7e155de2f729c3330353762ce1b0ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4e929877c7e155de2f729c3330353762ce1b0ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4e929877c7e155de2f729c3330353762ce1b0ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4e929877c7e155de2f729c3330353762ce1b0ed/comments", "author": null, "committer": null, "parents": [{"sha": "e62370313892135cb00868a78d506d915dcc27cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e62370313892135cb00868a78d506d915dcc27cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e62370313892135cb00868a78d506d915dcc27cc"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "0aa770c92db20fe050533e623e0c103a08e9ddf8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f4e929877c7e155de2f729c3330353762ce1b0ed", "patch": "@@ -1,3 +1,8 @@\n+2003-04-14  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* c-decl.c (grokdeclarator): Reject extern redeclarations of\n+\tstatic variables.\n+\n 2003-04-14  Janis Johnson  <janis287@us.ibm.com>\n \n \t* config/rs6000/rs6000.md (define_constants): Define constants for"}, {"sha": "50b7219b39355838565dea7141c213583582d862", "filename": "gcc/c-decl.c", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=f4e929877c7e155de2f729c3330353762ce1b0ed", "patch": "@@ -4375,7 +4375,22 @@ grokdeclarator (declarator, declspecs, decl_context, initialized)\n \t  }\n \telse if (type_quals)\n \t  type = c_build_qualified_type (type, type_quals);\n-\t  \n+\n+\t/* It is invalid to create an `extern' declaration for a\n+\t   variable if there is a global declaration that is\n+\t   `static'.  */\n+\tif (extern_ref && current_binding_level != global_binding_level)\n+\t  {\n+\t    tree global_decl;\n+\n+\t    global_decl = identifier_global_value (declarator);\n+\t    if (global_decl \n+\t\t&& TREE_CODE (global_decl) == VAR_DECL\n+\t\t&& !TREE_PUBLIC (global_decl))\n+\t      error (\"variable previously declared `static' redeclared \"\n+\t\t     \"`extern'\");\n+\t  }\n+\n \tdecl = build_decl (VAR_DECL, declarator, type);\n \tif (size_varies)\n \t  C_DECL_VARIABLE_SIZE (decl) = 1;"}, {"sha": "ab306f13bec2af9c1e3f959d4e2ea88a1f2b2959", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f4e929877c7e155de2f729c3330353762ce1b0ed", "patch": "@@ -1,3 +1,8 @@\n+2003-04-14  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* gcc.c-torture/execute/scope-2.c: Move to ...\n+\t* gcc.dg/noncompile/scope.c: .... here.\n+\n 2003-04-14  Roger Sayle  <roger@eyesopen.com>\n \n \t* gcc.dg/20030414-2.c: New test case."}, {"sha": "0bfc3f284dbc9fab2a105466c114bd42098c679b", "filename": "gcc/testsuite/gcc.dg/noncompile/scope.c", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2Ftestsuite%2Fgcc.dg%2Fnoncompile%2Fscope.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e929877c7e155de2f729c3330353762ce1b0ed/gcc%2Ftestsuite%2Fgcc.dg%2Fnoncompile%2Fscope.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoncompile%2Fscope.c?ref=f4e929877c7e155de2f729c3330353762ce1b0ed", "patch": "@@ -4,7 +4,7 @@ f ()\n {\n   int v = 4;\n   {\n-    extern int v;\n+    extern int v; /* { dg-error \"static\" } */  \n     if (v != 3)\n       abort ();\n   }", "previous_filename": "gcc/testsuite/gcc.c-torture/execute/scope-2.c"}]}