{"sha": "4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGI4NDczN2Q0N2I3ZTk3ZTExZDg1YzEzYmRlYjg2MWM4OTZhNWE2YQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-10-18T22:57:07Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1999-10-18T22:57:07Z"}, "message": "VMClassLoader.java (getVMClassLoader): New method.\n\n\t* gnu/gcj/runtime/VMClassLoader.java (getVMClassLoader): New\n\tmethod.\n\t(redirect): New static field.\n\t* java/lang/ClassLoader.java (getSystemClassLoader): Now\n\tnative\n\t(getVMClassLoader0): Removed.\n\t* java/lang/natClassLoader.cc (getVMClassLoader0): Removed.\n\t(redirect): Removed.\n\t(getSystemClassLoader): Implemented.\n\nFrom-SVN: r30075", "tree": {"sha": "5e0312d5dc7025957805d8741fe055e5009fc512", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e0312d5dc7025957805d8741fe055e5009fc512"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/comments", "author": null, "committer": null, "parents": [{"sha": "35c95c5a65c1732ad9b0702656a5081e954cf967", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35c95c5a65c1732ad9b0702656a5081e954cf967", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35c95c5a65c1732ad9b0702656a5081e954cf967"}], "stats": {"total": 44, "additions": 30, "deletions": 14}, "files": [{"sha": "cff9145a83ce330042be65a4b5ac0d3f6675cb2c", "filename": "libjava/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "patch": "@@ -1,3 +1,15 @@\n+1999-10-18  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* gnu/gcj/runtime/VMClassLoader.java (getVMClassLoader): New\n+\tmethod.\n+\t(redirect): New static field.\n+\t* java/lang/ClassLoader.java (getSystemClassLoader): Now\n+\tnative\n+\t(getVMClassLoader0): Removed.\n+\t* java/lang/natClassLoader.cc (getVMClassLoader0): Removed.\n+\t(redirect): Removed.\n+\t(getSystemClassLoader): Implemented.\n+\n 1999-10-16  Anthony Green  <green@cygnus.com>\n \n \t* java/lang/ClassLoader.java (getSystemResource): Use"}, {"sha": "cbd5012e3146a8f808521a607fe2eeed9fd8d858", "filename": "libjava/gnu/gcj/runtime/VMClassLoader.java", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2Fgnu%2Fgcj%2Fruntime%2FVMClassLoader.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2Fgnu%2Fgcj%2Fruntime%2FVMClassLoader.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fruntime%2FVMClassLoader.java?ref=4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "patch": "@@ -59,4 +59,15 @@ else if (new File (e).isDirectory ())\n    */\n   protected final native Class findSystemClass(String name) \n     throws java.lang.ClassNotFoundException, java.lang.LinkageError;\n+\n+  // Return the sole VMClassLoader.\n+  private static synchronized VMClassLoader getVMClassLoader ()\n+  {\n+    if (redirect == null)\n+      redirect = new VMClassLoader ();\n+    return redirect;\n+  }\n+\n+  // The only VMClassLoader that can exist.\n+  private static VMClassLoader redirect;\n }"}, {"sha": "dab546ead67a1b1148102fc7d95bbca8192e62cc", "filename": "libjava/java/lang/ClassLoader.java", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2Fjava%2Flang%2FClassLoader.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2Fjava%2Flang%2FClassLoader.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClassLoader.java?ref=4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "patch": "@@ -34,13 +34,7 @@ public ClassLoader getParent ()\n     return parent;\n   }\n     \n-  private static native ClassLoader getVMClassLoader0 ();\n-\n-  static public ClassLoader getSystemClassLoader () {\n-    if (system == null)\n-      system = getVMClassLoader0 ();\n-    return system;\n-  }\n+  public static native ClassLoader getSystemClassLoader ();\n \n   /**\n    * Creates a <code>ClassLoader</code> with no parent."}, {"sha": "ee5f2e78e85383291e0fd0a5223cc57b006662a0", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b84737d47b7e97e11d85c13bdeb861c896a5a6a/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=4b84737d47b7e97e11d85c13bdeb861c896a5a6a", "patch": "@@ -48,14 +48,13 @@ extern java::lang::Class ClassLoaderClass;\n \n /////////// java.lang.ClassLoader native methods ////////////\n \n-static gnu::gcj::runtime::VMClassLoader *redirect = 0;\n-\n-java::lang::ClassLoader*\n-java::lang::ClassLoader::getVMClassLoader0 ()\n+java::lang::ClassLoader *\n+java::lang::ClassLoader::getSystemClassLoader (void)\n {\n-  if (redirect == 0)\n-    redirect = new gnu::gcj::runtime::VMClassLoader;\n-  return redirect;\n+  JvSynchronize sync (&ClassLoaderClass);\n+  if (! system)\n+    system = gnu::gcj::runtime::VMClassLoader::getVMClassLoader ();\n+  return system;\n }\n \n void"}]}