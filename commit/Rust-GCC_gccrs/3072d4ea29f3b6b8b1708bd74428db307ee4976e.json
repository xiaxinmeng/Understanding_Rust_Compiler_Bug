{"sha": "3072d4ea29f3b6b8b1708bd74428db307ee4976e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzA3MmQ0ZWEyOWYzYjZiOGIxNzA4YmQ3NDQyOGRiMzA3ZWU0OTc2ZQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2016-05-25T11:49:03Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2016-05-25T11:49:03Z"}, "message": "re PR tree-optimization/71261 (Trunk GCC hangs on knl and broadwell targets)\n\n2016-05-25  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/71261\n\t* tree-if-conv.c (ifcvt_split_def_stmt): Walk uses on the\n\tinteresting stmt instead of immediate uses when looking\n\tfor the use operand to replace.\n\n\t* c-c++-common/torture/pr71261.c: New testcase.\n\nFrom-SVN: r236701", "tree": {"sha": "b9a8f055bf0c9112231afb930cd0db1fa26f8fcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9a8f055bf0c9112231afb930cd0db1fa26f8fcb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3072d4ea29f3b6b8b1708bd74428db307ee4976e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3072d4ea29f3b6b8b1708bd74428db307ee4976e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3072d4ea29f3b6b8b1708bd74428db307ee4976e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3072d4ea29f3b6b8b1708bd74428db307ee4976e/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a86f2f6f94eeacf73b2f3204a84eda61c15338b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a86f2f6f94eeacf73b2f3204a84eda61c15338b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a86f2f6f94eeacf73b2f3204a84eda61c15338b3"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "aca886c90cb5ad60fa59f0526231cd108de39bc8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3072d4ea29f3b6b8b1708bd74428db307ee4976e", "patch": "@@ -1,3 +1,10 @@\n+2016-05-25  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/71261\n+\t* tree-if-conv.c (ifcvt_split_def_stmt): Walk uses on the\n+\tinteresting stmt instead of immediate uses when looking\n+\tfor the use operand to replace.\n+\n 2016-05-25  Martin Liska  <mliska@suse.cz>\n \n \t* ipa-inline.c (edge_badness): Use 'w/' instead of 'w'."}, {"sha": "abdfdd81baae46cd837671fd9b956dff2913fe7a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3072d4ea29f3b6b8b1708bd74428db307ee4976e", "patch": "@@ -1,3 +1,8 @@\n+2016-05-25  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/71261\n+\t* c-c++-common/torture/pr71261.c: New testcase.\n+\n 2016-05-25  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/71264"}, {"sha": "7290368706f2b20a27746fbe3add32b2f351372b", "filename": "gcc/testsuite/c-c++-common/torture/pr71261.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Ftorture%2Fpr71261.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Ftorture%2Fpr71261.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Ftorture%2Fpr71261.c?ref=3072d4ea29f3b6b8b1708bd74428db307ee4976e", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-mavx2\" { target x86_64-*-* i?86-*-* } } */\n+\n+extern int a, b, c, d, e, f;\n+void fn1()\n+{\n+  for (int g = 0; g < d; g = 1)\n+    for (int h = 0; h < 8; h = h + 2)\n+      for (int i = h; i < h + 2; i = i + 1)\n+\tf = a && e || c && b;\n+}"}, {"sha": "5914a785ae8537a41c1859bcc2ed56ba45183579", "filename": "gcc/tree-if-conv.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2Ftree-if-conv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3072d4ea29f3b6b8b1708bd74428db307ee4976e/gcc%2Ftree-if-conv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-if-conv.c?ref=3072d4ea29f3b6b8b1708bd74428db307ee4976e", "patch": "@@ -2529,7 +2529,7 @@ ifcvt_split_def_stmt (gimple *def_stmt, gimple *use_stmt)\n   gimple *copy_stmt;\n   gimple_stmt_iterator gsi;\n   use_operand_p use_p;\n-  imm_use_iterator imm_iter;\n+  ssa_op_iter iter;\n \n   var = gimple_assign_lhs (def_stmt);\n   copy_stmt = gimple_copy (def_stmt);\n@@ -2548,9 +2548,9 @@ ifcvt_split_def_stmt (gimple *def_stmt, gimple *use_stmt)\n       print_generic_expr (dump_file, lhs, TDF_SLIM);\n       fprintf (dump_file, \"\\n\");\n     }\n-  FOR_EACH_IMM_USE_FAST (use_p, imm_iter, var)\n+  FOR_EACH_SSA_USE_OPERAND (use_p, use_stmt, iter, SSA_OP_USE)\n     {\n-      if (USE_STMT (use_p) != use_stmt)\n+      if (USE_FROM_PTR (use_p) != var)\n \tcontinue;\n       SET_USE (use_p, lhs);\n       break;"}]}