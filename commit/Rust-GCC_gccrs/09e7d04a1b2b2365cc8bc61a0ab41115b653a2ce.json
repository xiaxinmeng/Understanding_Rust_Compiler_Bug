{"sha": "09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDllN2QwNGExYjJiMjM2NWNjOGJjNjFhMGFiNDExMTViNjUzYTJjZQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-11-05T18:27:28Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1999-11-05T18:27:28Z"}, "message": "re GNATS gcj/85 (Compiler optimizes away private methods when native methods might access them)\n\n\t* class.c (finish_class): Emit inlined methods if any native\n\tmethods exist in the class.  Fixes PR gcj/85.\n\nFrom-SVN: r30420", "tree": {"sha": "3b52e6e9e1b58af468ce584c71e1c1a47ce2832b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b52e6e9e1b58af468ce584c71e1c1a47ce2832b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce/comments", "author": null, "committer": null, "parents": [{"sha": "467403ca5587335ab372bc19f8e261af067afe2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/467403ca5587335ab372bc19f8e261af067afe2f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/467403ca5587335ab372bc19f8e261af067afe2f"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "b516afd94073a4ded8e0260fb323db7d05ea81cd", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce", "patch": "@@ -1,3 +1,8 @@\n+1999-11-05  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* class.c (finish_class): Emit inlined methods if any native\n+\tmethods exist in the class.  Fixes PR gcj/85.\n+\n Mon Nov  1 23:42:00 1999  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n \n \t* parse.y (method_header:): Issue error message for rule `type"}, {"sha": "57930fde0bf7facd78e4eadf3145478c898bf446", "filename": "gcc/java/class.c", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=09e7d04a1b2b2365cc8bc61a0ab41115b653a2ce", "patch": "@@ -1205,7 +1205,21 @@ finish_class ()\n {\n   tree method;\n   tree type_methods = TYPE_METHODS (CLASS_TO_HANDLE_TYPE (current_class));\n-  \n+  int saw_native_method = 0;\n+\n+  /* Find out if we have any native methods.  We use this information\n+     later.  */\n+  for (method = type_methods;\n+       method != NULL_TREE;\n+       method = TREE_CHAIN (method))\n+    {\n+      if (METHOD_NATIVE (method))\n+\t{\n+\t  saw_native_method = 1;\n+\t  break;\n+\t}\n+    }\n+\n   /* Emit deferred inline methods. */  \n   for (method = type_methods; method != NULL_TREE; )\n     {\n@@ -1214,7 +1228,8 @@ finish_class ()\n \t  /* It's a deferred inline method.  Decide if we need to emit it. */\n \t  if (flag_keep_inline_functions\n \t      || TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (method))\n-\t      || ! METHOD_PRIVATE (method))\n+\t      || ! METHOD_PRIVATE (method)\n+\t      || saw_native_method)\n \t    {\n \t      temporary_allocation ();\n \t      output_inline_function (method);"}]}