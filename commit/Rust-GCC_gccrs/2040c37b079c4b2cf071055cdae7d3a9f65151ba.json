{"sha": "2040c37b079c4b2cf071055cdae7d3a9f65151ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA0MGMzN2IwNzljNGIyY2YwNzEwNTVjZGFlN2QzYTlmNjUxNTFiYQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1992-09-07T00:42:04Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1992-09-07T00:42:04Z"}, "message": "pa.c (output_function_prologue): Undo Aug.\n\n\t* pa.c (output_function_prologue): Undo Aug. 13 change.\n\tIf profiling, then this function makes calls.  Reflect this in\n\tCALLINFO.\n\t(output_function_epilogue): If profiling, then be restore \"rp\" here.\n\n\t* pa.c (use_milli_regs): Deleted.\n\nFrom-SVN: r2065", "tree": {"sha": "97a043c46ba0e0468596dd4885dc152bf9488417", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97a043c46ba0e0468596dd4885dc152bf9488417"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2040c37b079c4b2cf071055cdae7d3a9f65151ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2040c37b079c4b2cf071055cdae7d3a9f65151ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2040c37b079c4b2cf071055cdae7d3a9f65151ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2040c37b079c4b2cf071055cdae7d3a9f65151ba/comments", "author": null, "committer": null, "parents": [{"sha": "29662692f4e94d257fe73c20b5bb075d3bf5377c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29662692f4e94d257fe73c20b5bb075d3bf5377c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29662692f4e94d257fe73c20b5bb075d3bf5377c"}], "stats": {"total": 20, "additions": 5, "deletions": 15}, "files": [{"sha": "71e644be269bd54022de6bd4e32faa99338c8853", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 5, "deletions": 15, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2040c37b079c4b2cf071055cdae7d3a9f65151ba/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2040c37b079c4b2cf071055cdae7d3a9f65151ba/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=2040c37b079c4b2cf071055cdae7d3a9f65151ba", "patch": "@@ -1464,7 +1464,7 @@ output_function_prologue (file, size, leaf_function)\n   /* Let's not try to bullshit more than we need to here. */\n   /* This might be right a lot of the time */\n   fprintf (file, \"\\t.PROC\\n\\t.CALLINFO FRAME=%d\", actual_fsize);\n-    if (regs_ever_live[2])\n+    if (regs_ever_live[2] || profile_flag)\n       fprintf (file, \",CALLS,SAVE_RP\\n\");\n     else\n       fprintf (file, \",NO_CALLS\\n\");\n@@ -1539,7 +1539,6 @@ output_function_prologue (file, size, leaf_function)\n       for (i = 26, arg_offset = -36 - offsetadj; i >= 23; i--, arg_offset -= 4)\n \tif (regs_ever_live[i])\n \t  print_ldw (file, i, arg_offset, basereg);\n-      print_ldw (file, 2, -20 - offsetadj, basereg);\n     }\n \n   /* Normal register save. */\n@@ -1680,16 +1679,17 @@ output_function_epilogue (file, size, leaf_function)\n   if (frame_pointer_needed)\n     {\n       fprintf (file, \"\\tldo 8(4),30\\n\");\n-      if (regs_ever_live[2])\n+      if (regs_ever_live[2] || profile_flag)\n \tfprintf (file, \"\\tldw -28(0,30),2\\n\");\n       fprintf (file, \"\\tbv 0(2)\\n\\tldwm -8(30),4\\n\");\n     }\n   else if (actual_fsize)\n     {\n-      if (regs_ever_live[2] && VAL_14_BITS_P (actual_fsize + 20))\n+      if ((regs_ever_live[2] || profile_flag)\n+          && VAL_14_BITS_P (actual_fsize + 20))\n \tfprintf (file, \"\\tldw %d(30),2\\n\\tbv 0(2)\\n\\tldo %d(30),30\\n\",\n \t\t -(actual_fsize + 20), -actual_fsize);\n-      else if (regs_ever_live[2])\n+      else if (regs_ever_live[2] || profile_flag)\n \tfprintf (file,\n \t\t \"\\taddil L'%d,30\\n\\tldw %d(1),2\\n\\tbv 0(2)\\n\\tldo R'%d(1),30\\n\",\n \t\t - actual_fsize,\n@@ -2379,16 +2379,6 @@ function_arg_padding (mode, type)\n     return none;\n }\n \n-int\n-use_milli_regs (insn)\n-     rtx insn;\n-{\n-  return (reg_mentioned_p (gen_rtx (REG, SImode, 1), insn) ||\n-\t  reg_mentioned_p (gen_rtx (REG, SImode, 25), insn) ||\n-\t  reg_mentioned_p (gen_rtx (REG, SImode, 26), insn) ||\n-\t  reg_mentioned_p (gen_rtx (REG, SImode, 29), insn) ||\n-\t  reg_mentioned_p (gen_rtx (REG, SImode, 31), insn));\n-}\n \f\n /* Do what is necessary for `va_start'.  The argument is ignored;\n    We look at the current function to determine if stdargs or varargs"}]}