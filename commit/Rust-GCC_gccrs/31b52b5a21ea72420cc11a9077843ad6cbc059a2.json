{"sha": "31b52b5a21ea72420cc11a9077843ad6cbc059a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFiNTJiNWEyMWVhNzI0MjBjYzExYTkwNzc4NDNhZDZjYmMwNTlhMg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2007-10-11T08:11:18Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2007-10-11T08:11:18Z"}, "message": "re PR c/33726 (Type checking error with address-of and volatile and arrays)\n\n2007-10-11  Richard Guenther  <rguenther@suse.de>\n\n\tPR c/33726\n\t* c-typeck.c (build_array_ref): Do not strip qualifiers from\n\tthe array element type.\n\n\t* gcc.dg/pr33726.c: New testcase.\n\nFrom-SVN: r129227", "tree": {"sha": "1ad830132c4e994fd801417643c425df98ea1803", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ad830132c4e994fd801417643c425df98ea1803"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31b52b5a21ea72420cc11a9077843ad6cbc059a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31b52b5a21ea72420cc11a9077843ad6cbc059a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31b52b5a21ea72420cc11a9077843ad6cbc059a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31b52b5a21ea72420cc11a9077843ad6cbc059a2/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "50f0f3665baa3d351d1c15d62a5a93e56d3d3d7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50f0f3665baa3d351d1c15d62a5a93e56d3d3d7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50f0f3665baa3d351d1c15d62a5a93e56d3d3d7e"}], "stats": {"total": 30, "additions": 28, "deletions": 2}, "files": [{"sha": "0d1c15a827dc8602cf803f1886fa0e369a129084", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=31b52b5a21ea72420cc11a9077843ad6cbc059a2", "patch": "@@ -1,3 +1,9 @@\n+2007-10-11  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR c/33726\n+\t* c-typeck.c (build_array_ref): Do not strip qualifiers from\n+\tthe array element type.\n+\n 2007-10-11  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \tPR rtl-optimization/33638"}, {"sha": "3d80ce2f275e51603469d03149fbbfdc659e843f", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=31b52b5a21ea72420cc11a9077843ad6cbc059a2", "patch": "@@ -2113,8 +2113,6 @@ build_array_ref (tree array, tree index)\n \t}\n \n       type = TREE_TYPE (TREE_TYPE (array));\n-      if (TREE_CODE (type) != ARRAY_TYPE)\n-\ttype = TYPE_MAIN_VARIANT (type);\n       rval = build4 (ARRAY_REF, type, array, index, NULL_TREE, NULL_TREE);\n       /* Array ref is const/volatile if the array elements are\n \t or if the array is.  */"}, {"sha": "49f071bc6ae0bdcdc283324349f1fa5e16e75a3e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=31b52b5a21ea72420cc11a9077843ad6cbc059a2", "patch": "@@ -1,3 +1,8 @@\n+2007-10-11  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR c/33726\n+\t* gcc.dg/pr33726.c: New testcase.\n+\n 2007-10-11  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR fortran/33500"}, {"sha": "e87cbc5657358a8c85b5326a5c192b1ef70d1e05", "filename": "gcc/testsuite/gcc.dg/pr33726.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2Ftestsuite%2Fgcc.dg%2Fpr33726.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31b52b5a21ea72420cc11a9077843ad6cbc059a2/gcc%2Ftestsuite%2Fgcc.dg%2Fpr33726.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr33726.c?ref=31b52b5a21ea72420cc11a9077843ad6cbc059a2", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+\n+/* We used to ICE here with type-checking enabled.  */\n+\n+typedef unsigned int U032;\n+typedef volatile struct X {\n+     U032 Monochrome[1];\n+     struct {\n+          U032 WidthHeight;\n+     } UnclippedRectangle[1];\n+} RivaBitmap;\n+void writel(void *);\n+void rivafb_fillrect(RivaBitmap *bm)\n+{\n+  writel((void *)&bm->UnclippedRectangle[0].WidthHeight);\n+}\n+"}]}