{"sha": "58b735b70b03884052c80ac032df90eed7059f8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NThiNzM1YjcwYjAzODg0MDUyYzgwYWMwMzJkZjkwZWVkNzA1OWY4ZA==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2021-07-01T20:07:59Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2021-07-01T20:07:59Z"}, "message": "Fortran: set version field in CFI_cdesc_t to CFI_VERSION\n\nWhen converting a GFC descriptor to a CFI descriptor, it was\nincorrectly copying the version number from the former to the latter.\nIt should be using the value of CFI_VERSION instead (currently 1).\nGoing the other direction, the GFC version field is initialized to\nzero elsewhere, so do that here too.\n\n2021-06-30  Tobias Burnus  <tobias@codesourcery.com>\n\t    Sandra Loosemore  <sandra@codesourcery.com>\n\n\tlibgfortran/\n\t* runtime/ISO_Fortran_binding.c (cfi_desc_to_gfc_desc):\n\tInitialize version field to 0.\n\t(gfc_desc_to_cfi_desc): Initialize version field to CFI_VERSION.", "tree": {"sha": "6a63ca354a1091d8cfe074e580cbca9147f3ec72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a63ca354a1091d8cfe074e580cbca9147f3ec72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58b735b70b03884052c80ac032df90eed7059f8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58b735b70b03884052c80ac032df90eed7059f8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58b735b70b03884052c80ac032df90eed7059f8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58b735b70b03884052c80ac032df90eed7059f8d/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b97486f465ff7ee2ed1a5305bcc211563891c37e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b97486f465ff7ee2ed1a5305bcc211563891c37e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b97486f465ff7ee2ed1a5305bcc211563891c37e"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "73fb4c4e729111077d66ddecf930d36b1861ea31", "filename": "libgfortran/runtime/ISO_Fortran_binding.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58b735b70b03884052c80ac032df90eed7059f8d/libgfortran%2Fruntime%2FISO_Fortran_binding.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58b735b70b03884052c80ac032df90eed7059f8d/libgfortran%2Fruntime%2FISO_Fortran_binding.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fruntime%2FISO_Fortran_binding.c?ref=58b735b70b03884052c80ac032df90eed7059f8d", "patch": "@@ -60,7 +60,7 @@ cfi_desc_to_gfc_desc (gfc_array_void *d, CFI_cdesc_t **s_ptr)\n   else\n     GFC_DESCRIPTOR_SIZE (d) = s->elem_len;\n \n-  d->dtype.version = s->version;\n+  d->dtype.version = 0;\n   GFC_DESCRIPTOR_RANK (d) = (signed char)s->rank;\n \n   d->dtype.attribute = (signed short)s->attribute;\n@@ -104,7 +104,7 @@ gfc_desc_to_cfi_desc (CFI_cdesc_t **d_ptr, const gfc_array_void *s)\n \n   d->base_addr = GFC_DESCRIPTOR_DATA (s);\n   d->elem_len = GFC_DESCRIPTOR_SIZE (s);\n-  d->version = s->dtype.version;\n+  d->version = CFI_VERSION;\n   d->rank = (CFI_rank_t)GFC_DESCRIPTOR_RANK (s);\n   d->attribute = (CFI_attribute_t)s->dtype.attribute;\n "}]}