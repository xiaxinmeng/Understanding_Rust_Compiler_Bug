{"sha": "8dddd002b0e059a7f8a6cd0147afea0d83188cac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGRkZGQwMDJiMGUwNTlhN2Y4YTZjZDAxNDdhZmVhMGQ4MzE4OGNhYw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-04-13T12:15:28Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-04-13T12:15:28Z"}, "message": "(reload): If function has nonlocal label, mark all caller-saved regs\nas used.\n\nFrom-SVN: r13863", "tree": {"sha": "4082173ad82240f8586082eef6fbb98fde6f4dde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4082173ad82240f8586082eef6fbb98fde6f4dde"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8dddd002b0e059a7f8a6cd0147afea0d83188cac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dddd002b0e059a7f8a6cd0147afea0d83188cac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dddd002b0e059a7f8a6cd0147afea0d83188cac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dddd002b0e059a7f8a6cd0147afea0d83188cac/comments", "author": null, "committer": null, "parents": [{"sha": "1f027d54a1f8d5ca34a8924eeea12af92d1075c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f027d54a1f8d5ca34a8924eeea12af92d1075c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f027d54a1f8d5ca34a8924eeea12af92d1075c8"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "42fe5c7565c1b7020968a4983f703510c474ef04", "filename": "gcc/reload1.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dddd002b0e059a7f8a6cd0147afea0d83188cac/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dddd002b0e059a7f8a6cd0147afea0d83188cac/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=8dddd002b0e059a7f8a6cd0147afea0d83188cac", "patch": "@@ -589,10 +589,18 @@ reload (first, global, dumpfile)\n      as homes for pseudo registers.\n      This is done here rather than (eg) in global_alloc\n      because this point is reached even if not optimizing.  */\n-\n   for (i = FIRST_PSEUDO_REGISTER; i < max_regno; i++)\n     mark_home_live (i);\n \n+  /* A function that receives a nonlocal goto must save all call-saved\n+     registers.  */\n+  if (current_function_has_nonlocal_label)\n+    for (i = 0; i < FIRST_PSEUDO_REGISTER; i++)\n+      {\n+\tif (! call_used_regs[i] && ! fixed_regs[i])\n+\t  regs_ever_live[i] = 1;\n+      }\n+\n   for (i = 0; i < scratch_list_length; i++)\n     if (scratch_list[i])\n       mark_scratch_live (scratch_list[i]);"}]}