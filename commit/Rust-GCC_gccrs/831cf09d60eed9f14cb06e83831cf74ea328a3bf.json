{"sha": "831cf09d60eed9f14cb06e83831cf74ea328a3bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODMxY2YwOWQ2MGVlZDlmMTRjYjA2ZTgzODMxY2Y3NGVhMzI4YTNiZg==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2017-11-18T16:13:20Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2017-11-18T16:13:20Z"}, "message": "PR 44292 Enable large record lengths in OPEN and INQUIRE statements\n\nThis is a straightforward change that we can do now that the ABI has\nbeen bumped (again!).\n\nRegtested on x86_64-pc-linux-gnu.\n\ngcc/fortran/ChangeLog:\n\n2017-11-18  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR fortran/44292\n\t* ioparm.def (IOPARM): Make recl_in intio, and recl_out pintio.\n\nlibgfortran/ChangeLog:\n\n2017-11-18  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR fortran/44292\n\t* io/io.h: Make recl_in a GC_IO_INT and recl_out a type\n\tGFC_IO_INT*.\n\ngcc/testsuite/ChangeLog:\n\n2017-11-18  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR fortran/44292\n\t* gfortran.dg/large_recl.f90: New test.\n\nFrom-SVN: r254915", "tree": {"sha": "1f0ffde25ee162d2e83641619ab9b90e6f3791af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f0ffde25ee162d2e83641619ab9b90e6f3791af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/831cf09d60eed9f14cb06e83831cf74ea328a3bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/831cf09d60eed9f14cb06e83831cf74ea328a3bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/831cf09d60eed9f14cb06e83831cf74ea328a3bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/831cf09d60eed9f14cb06e83831cf74ea328a3bf/comments", "author": null, "committer": null, "parents": [{"sha": "a814e35ba380d278f95e703efb0cb672987983f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a814e35ba380d278f95e703efb0cb672987983f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a814e35ba380d278f95e703efb0cb672987983f7"}], "stats": {"total": 40, "additions": 34, "deletions": 6}, "files": [{"sha": "43349019b6f2009c861c0419b13cbd20951e29fd", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=831cf09d60eed9f14cb06e83831cf74ea328a3bf", "patch": "@@ -1,3 +1,8 @@\n+2017-11-18  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR fortran/44292\n+\t* ioparm.def (IOPARM): Make recl_in intio, and recl_out pintio.\n+\n 2017-11-18  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/83012"}, {"sha": "5fc04bc9019b332ddcc13adb341d1c9f541723e9", "filename": "gcc/fortran/ioparm.def", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ffortran%2Fioparm.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ffortran%2Fioparm.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fioparm.def?ref=831cf09d60eed9f14cb06e83831cf74ea328a3bf", "patch": "@@ -34,7 +34,7 @@ IOPARM (common,  line,\t\t0,\t int4)\n IOPARM (common,  iomsg,\t\t1 << 6,  char2)\n IOPARM (common,  iostat,\t1 << 5,  pint4)\n IOPARM (open,    common,\t0,\t common)\n-IOPARM (open,    recl_in,\t1 << 7,  int4)\n+IOPARM (open,    recl_in,\t1 << 7,  intio)\n IOPARM (open,    file,\t\t1 << 8,  char2)\n IOPARM (open,    status,\t1 << 9,  char1)\n IOPARM (open,    access,\t1 << 10, char2)\n@@ -63,7 +63,7 @@ IOPARM (inquire, opened,\t1 << 8,  pint4)\n IOPARM (inquire, number,\t1 << 9,  pint4)\n IOPARM (inquire, named,\t\t1 << 10, pint4)\n IOPARM (inquire, nextrec,\t1 << 11, pint4)\n-IOPARM (inquire, recl_out,\t1 << 12, pint4)\n+IOPARM (inquire, recl_out,\t1 << 12, pintio)\n IOPARM (inquire, strm_pos_out,\t1 << 13, pintio)\n IOPARM (inquire, file,\t\t1 << 14, char1)\n IOPARM (inquire, access,\t1 << 15, char2)"}, {"sha": "25cb660fb385b1f8e505ea49284d08d1c107dbfc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=831cf09d60eed9f14cb06e83831cf74ea328a3bf", "patch": "@@ -1,3 +1,8 @@\n+2017-11-18  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR fortran/44292\n+\t* gfortran.dg/large_recl.f90: New test.\n+\n 2017-11-18  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/83012"}, {"sha": "97ac63f7e4dfbb423d9e1cbbf10928c203c64e42", "filename": "gcc/testsuite/gfortran.dg/large_recl.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ftestsuite%2Fgfortran.dg%2Flarge_recl.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/831cf09d60eed9f14cb06e83831cf74ea328a3bf/gcc%2Ftestsuite%2Fgfortran.dg%2Flarge_recl.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Flarge_recl.f90?ref=831cf09d60eed9f14cb06e83831cf74ea328a3bf", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do run }\n+! PR 44292 Large RECL=\n+program large_recl\n+  implicit none\n+  integer(kind=8) :: r\n+  open(10, status=\"scratch\", recl=12345678901_8, form=\"unformatted\", access=\"direct\")\n+  inquire(10, recl=r)\n+  close(10, status=\"delete\")\n+  if (r /= 12345678901_8) then\n+     call abort()\n+  end if\n+end program large_recl"}, {"sha": "fa5646ba94f2c8f8df9b6d4d7416d669b140ce1e", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/831cf09d60eed9f14cb06e83831cf74ea328a3bf/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/831cf09d60eed9f14cb06e83831cf74ea328a3bf/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=831cf09d60eed9f14cb06e83831cf74ea328a3bf", "patch": "@@ -1,3 +1,9 @@\n+2017-11-18  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR fortran/44292\n+\t* io/io.h: Make recl_in a GC_IO_INT and recl_out a type\n+\tGFC_IO_INT*.\n+\n 2017-11-17  Igor Tsimbalist  <igor.v.tsimbalist@intel.com>\n \n \t* acinclude.m4: Add enable.m4, cet.m4.\n@@ -12,7 +18,7 @@\n \tPR libgfortran/81938\n \tio/format.c (free_format_data): Don't try to free vlist\n \tdescriptors past the end of the fnode array.\n-\t\n+\n 2017-10-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/82233"}, {"sha": "3330bcee6259e491d911f9a6a667c45893c8eb9a", "filename": "libgfortran/io/io.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/831cf09d60eed9f14cb06e83831cf74ea328a3bf/libgfortran%2Fio%2Fio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/831cf09d60eed9f14cb06e83831cf74ea328a3bf/libgfortran%2Fio%2Fio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fio.h?ref=831cf09d60eed9f14cb06e83831cf74ea328a3bf", "patch": "@@ -308,7 +308,7 @@ unit_sign_s;\n typedef struct\n {\n   st_parameter_common common;\n-  GFC_INTEGER_4 recl_in;\n+  GFC_IO_INT recl_in;\n   CHARACTER2 (file);\n   CHARACTER1 (status);\n   CHARACTER2 (access);\n@@ -388,8 +388,8 @@ typedef struct\n {\n   st_parameter_common common;\n   GFC_INTEGER_4 *exist, *opened, *number, *named;\n-  GFC_INTEGER_4 *nextrec, *recl_out;\n-  GFC_IO_INT *strm_pos_out;\n+  GFC_INTEGER_4 *nextrec;\n+  GFC_IO_INT  *recl_out, *strm_pos_out;\n   CHARACTER1 (file);\n   CHARACTER2 (access);\n   CHARACTER1 (form);"}]}