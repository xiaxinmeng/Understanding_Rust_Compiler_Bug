{"sha": "5464963112924aa64a0e82cd856275e2faa66436", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ2NDk2MzExMjkyNGFhNjRhMGU4MmNkODU2Mjc1ZTJmYWE2NjQzNg==", "commit": {"author": {"name": "Toma Tabacu", "email": "toma.tabacu@imgtec.com", "date": "2017-03-06T13:15:30Z"}, "committer": {"name": "Toma Tabacu", "email": "tomtab@gcc.gnu.org", "date": "2017-03-06T13:15:30Z"}, "message": "Add check_effective_target_gettimeofday and use it in gcc.dg/lto/pr60449_0.c.\n\ngcc/\n\t* doc/sourcebuild.texi (Effective-Target Keywords, Environment\n\tattributes): Document gettimeofday.\n\ngcc/testsuite/\n\n\t* gcc.dg/lto/pr60449_0.c: Add dg-require-effective-target for\n\tgettimeofday.  Remove dg-skip-if for AVR.\n\t* lib/target-supports.exp (check_effective_target_gettimeofday):\n\tNew proc.\n\nFrom-SVN: r245921", "tree": {"sha": "50986e8c975549cb85de6e7f01986def77c145a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50986e8c975549cb85de6e7f01986def77c145a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5464963112924aa64a0e82cd856275e2faa66436", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5464963112924aa64a0e82cd856275e2faa66436", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5464963112924aa64a0e82cd856275e2faa66436", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5464963112924aa64a0e82cd856275e2faa66436/comments", "author": null, "committer": null, "parents": [{"sha": "1b31fca70f9f410f389363c17d85533d9bb2178a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b31fca70f9f410f389363c17d85533d9bb2178a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b31fca70f9f410f389363c17d85533d9bb2178a"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "be8b6d9b673df5b6de48d42f28a219e560283705", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5464963112924aa64a0e82cd856275e2faa66436/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5464963112924aa64a0e82cd856275e2faa66436/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5464963112924aa64a0e82cd856275e2faa66436", "patch": "@@ -1,3 +1,8 @@\n+2017-03-06  Toma Tabacu  <toma.tabacu@imgtec.com>\n+\n+\t* doc/sourcebuild.texi (Effective-Target Keywords, Environment\n+\tattributes): Document gettimeofday.\n+\n 2017-03-06  Robin Dapp  <rdapp@linux.vnet.ibm.com>\n \n \t* config/s390/s390.c (s390_option_override_internal): Set"}, {"sha": "da17ff6759108b04da972d881c4a72e4eebc637c", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=5464963112924aa64a0e82cd856275e2faa66436", "patch": "@@ -1914,6 +1914,9 @@ Target is @samp{freestanding} as defined in section 4 of the C99 standard.\n Effectively, it is a target which supports no extra headers or libraries\n other than what is considered essential.\n \n+@item gettimeofday\n+Target supports @code{gettimeofday}.\n+\n @item init_priority\n Target supports constructors with initialization priority arguments.\n "}, {"sha": "f90154a6fa69a996a08a729a2319f434e08d85a6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5464963112924aa64a0e82cd856275e2faa66436", "patch": "@@ -1,3 +1,10 @@\n+2017-03-06  Toma Tabacu  <toma.tabacu@imgtec.com>\n+\n+\t* gcc.dg/lto/pr60449_0.c: Add dg-require-effective-target for\n+\tgettimeofday.  Remove dg-skip-if for AVR.\n+\t* lib/target-supports.exp (check_effective_target_gettimeofday):\n+\tNew proc.\n+\n 2017-03-06  Robin Dapp  <rdapp@linux.vnet.ibm.com>\n \n \t* gcc.target/s390/hotpatch-1.c: Check for nopr %r0."}, {"sha": "e6c3166e94a297559919909483f4274cd9def60d", "filename": "gcc/testsuite/gcc.dg/lto/pr60449_0.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr60449_0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr60449_0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr60449_0.c?ref=5464963112924aa64a0e82cd856275e2faa66436", "patch": "@@ -1,5 +1,5 @@\n /* { dg-lto-do link } */\n-/* { dg-skip-if \"Needs gettimeofday\" { \"avr-*-*\" } } */\n+/* { dg-require-effective-target gettimeofday } */\n \n extern int printf (const char *__restrict __format, ...);\n typedef long int __time_t;"}, {"sha": "d1639dc6701f793d0e999d074efe54179768b8ff", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5464963112924aa64a0e82cd856275e2faa66436/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=5464963112924aa64a0e82cd856275e2faa66436", "patch": "@@ -968,6 +968,11 @@ proc check_effective_target_setrlimit {} {\n     return [check_function_available \"setrlimit\"]\n }\n \n+# Return 1 if the target supports gettimeofday, 0 otherwise.\n+proc check_effective_target_gettimeofday {} {\n+    return [check_function_available \"gettimeofday\"]\n+}\n+\n # Return 1 if the target supports swapcontext, 0 otherwise.\n proc check_effective_target_swapcontext {} {\n     return [check_no_compiler_messages swapcontext executable {"}]}