{"sha": "b92c32643d713bb81e58279ae640fb07c85dd79f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjkyYzMyNjQzZDcxM2JiODFlNTgyNzlhZTY0MGZiMDdjODVkZDc5Zg==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2004-11-16T12:16:52Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2004-11-16T12:16:52Z"}, "message": "re PR target/18447 (Variable with the initial-exec tls-model attribute causes spill failure)\n\n\tPR target/18447\n\t* config/sh/sh.c (prepare_move_operands): Emit blockage insns\n\tbefore and after the insns for getting GOT address in non-PIC\n\tTLS_MODEL_INITIAL_EXEC tls sequence when the first scheduling\n\tis enabled.\n\nFrom-SVN: r90732", "tree": {"sha": "4f523e067b88631f8af83730643d1233101860fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f523e067b88631f8af83730643d1233101860fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b92c32643d713bb81e58279ae640fb07c85dd79f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b92c32643d713bb81e58279ae640fb07c85dd79f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b92c32643d713bb81e58279ae640fb07c85dd79f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b92c32643d713bb81e58279ae640fb07c85dd79f/comments", "author": null, "committer": null, "parents": [{"sha": "db566c7e8147907b4b012f3339ee52fd5320c861", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db566c7e8147907b4b012f3339ee52fd5320c861", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db566c7e8147907b4b012f3339ee52fd5320c861"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "521c31b09e6c23ba599f21e61a5ea732b17c158a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b92c32643d713bb81e58279ae640fb07c85dd79f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b92c32643d713bb81e58279ae640fb07c85dd79f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b92c32643d713bb81e58279ae640fb07c85dd79f", "patch": "@@ -1,3 +1,11 @@\n+2004-11-16  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\tPR target/18447\n+\t* config/sh/sh.c (prepare_move_operands): Emit blockage insns\n+\tbefore and after the insns for getting GOT address in non-PIC\n+\tTLS_MODEL_INITIAL_EXEC tls sequence when the first scheduling\n+\tis enabled.\n+\n 2004-11-16  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* gcc/cse.c (struct change_cc_mode_args): New structure."}, {"sha": "c4c1e1632cd6933816e47c7ac4ab6b6fbbbeede0", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b92c32643d713bb81e58279ae640fb07c85dd79f/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b92c32643d713bb81e58279ae640fb07c85dd79f/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=b92c32643d713bb81e58279ae640fb07c85dd79f", "patch": "@@ -1042,9 +1042,16 @@ prepare_move_operands (rtx operands[], enum machine_mode mode)\n \t    case TLS_MODEL_INITIAL_EXEC:\n \t      if (! flag_pic)\n \t\t{\n+\t\t  /* Don't schedule insns for getting GOT address when\n+\t\t     the first scheduling is enabled, to avoid spill\n+\t\t     failures for R0.  */\n+\t\t  if (flag_schedule_insns)\n+\t\t    emit_insn (gen_blockage ());\n \t\t  emit_insn (gen_GOTaddr2picreg ());\n \t\t  emit_insn (gen_rtx_USE (VOIDmode, gen_rtx_REG (SImode,\n \t\t\t\t\t\t\t\t PIC_REG)));\n+\t\t  if (flag_schedule_insns)\n+\t\t    emit_insn (gen_blockage ());\n \t\t}\n \t      tga_op1 = no_new_pseudos ? op0 : gen_reg_rtx (Pmode);\n \t      tmp = gen_sym2GOTTPOFF (op1);"}]}