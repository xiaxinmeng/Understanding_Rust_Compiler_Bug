{"sha": "9d75804367cd7c3aac109d33a98f3a038cbe8020", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ3NTgwNDM2N2NkN2MzYWFjMTA5ZDMzYTk4ZjNhMDM4Y2JlODAyMA==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T23:39:11Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T23:39:11Z"}, "message": "trans.h (struct gfc_loopinfo): New fields nested and next.\n\n\t* trans.h (struct gfc_loopinfo): New fields nested and next.\n\t* trans-array.c (gfc_add_ss_to_loop): Update list of nested list if\n\tss has non-null nested_ss field.\n\nFrom-SVN: r180897", "tree": {"sha": "8ab21cd593692c98e71455dfbf71efa9255df198", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ab21cd593692c98e71455dfbf71efa9255df198"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d75804367cd7c3aac109d33a98f3a038cbe8020", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d75804367cd7c3aac109d33a98f3a038cbe8020", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d75804367cd7c3aac109d33a98f3a038cbe8020", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d75804367cd7c3aac109d33a98f3a038cbe8020/comments", "author": null, "committer": null, "parents": [{"sha": "06cd4e1b5a55cecb1e19a0302608859429853a12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06cd4e1b5a55cecb1e19a0302608859429853a12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06cd4e1b5a55cecb1e19a0302608859429853a12"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "a8d38424326d0c9db2c04acc4f600d0201309b18", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d75804367cd7c3aac109d33a98f3a038cbe8020/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d75804367cd7c3aac109d33a98f3a038cbe8020/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=9d75804367cd7c3aac109d33a98f3a038cbe8020", "patch": "@@ -1,3 +1,9 @@\n+2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\t* trans.h (struct gfc_loopinfo): New fields nested and next.\n+\t* trans-array.c (gfc_add_ss_to_loop): Update list of nested list if\n+\tss has non-null nested_ss field.\n+\n 2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* trans-array.c (gfc_trans_create_temp_array): Loop over the parents."}, {"sha": "0c1dc895d0d4eac8870803526d3823a237b9186a", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d75804367cd7c3aac109d33a98f3a038cbe8020/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d75804367cd7c3aac109d33a98f3a038cbe8020/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=9d75804367cd7c3aac109d33a98f3a038cbe8020", "patch": "@@ -645,6 +645,7 @@ void\n gfc_add_ss_to_loop (gfc_loopinfo * loop, gfc_ss * head)\n {\n   gfc_ss *ss;\n+  gfc_loopinfo *nested_loop;\n \n   if (head == gfc_ss_terminator)\n     return;\n@@ -654,6 +655,21 @@ gfc_add_ss_to_loop (gfc_loopinfo * loop, gfc_ss * head)\n   ss = head;\n   for (; ss && ss != gfc_ss_terminator; ss = ss->next)\n     {\n+      if (ss->nested_ss)\n+\t{\n+\t  nested_loop = ss->nested_ss->loop;\n+\n+\t  /* More than one ss can belong to the same loop.  Hence, we add the\n+\t     loop to the chain only if it is different from the previously\n+\t     added one, to avoid duplicate nested loops.  */\n+\t  if (nested_loop != loop->nested)\n+\t    {\n+\t      gcc_assert (nested_loop->next == NULL);\n+\t      nested_loop->next = loop->nested;\n+\t      loop->nested = nested_loop;\n+\t    }\n+\t}\n+\n       if (ss->next == gfc_ss_terminator)\n \tss->loop_chain = loop->ss;\n       else"}, {"sha": "0549aa7930132a0de8dba3c3ce237cb3a6fe9409", "filename": "gcc/fortran/trans.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d75804367cd7c3aac109d33a98f3a038cbe8020/gcc%2Ffortran%2Ftrans.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d75804367cd7c3aac109d33a98f3a038cbe8020/gcc%2Ffortran%2Ftrans.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans.h?ref=9d75804367cd7c3aac109d33a98f3a038cbe8020", "patch": "@@ -279,6 +279,9 @@ typedef struct gfc_loopinfo\n   /* The SS describing the temporary used in an assignment.  */\n   gfc_ss *temp_ss;\n \n+  /* Chain of nested loops.  */\n+  struct gfc_loopinfo *nested, *next;\n+\n   /* The scalarization loop index variables.  */\n   tree loopvar[GFC_MAX_DIMENSIONS];\n "}]}