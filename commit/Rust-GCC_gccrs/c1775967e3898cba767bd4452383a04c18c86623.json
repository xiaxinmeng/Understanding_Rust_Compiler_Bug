{"sha": "c1775967e3898cba767bd4452383a04c18c86623", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzE3NzU5NjdlMzg5OGNiYTc2N2JkNDQ1MjM4M2EwNGMxOGM4NjYyMw==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2010-11-20T13:55:14Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2010-11-20T13:55:14Z"}, "message": "Fix size_type_node and sizetype in Fortran frontend\n\nFrom-SVN: r166976", "tree": {"sha": "53f3c7fe640e54a9390a4670cf27c9d347858515", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/53f3c7fe640e54a9390a4670cf27c9d347858515"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1775967e3898cba767bd4452383a04c18c86623", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1775967e3898cba767bd4452383a04c18c86623", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1775967e3898cba767bd4452383a04c18c86623", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1775967e3898cba767bd4452383a04c18c86623/comments", "author": null, "committer": null, "parents": [{"sha": "4942af9b83b8040720ec09a48a0a8f4d0b08bde3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4942af9b83b8040720ec09a48a0a8f4d0b08bde3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4942af9b83b8040720ec09a48a0a8f4d0b08bde3"}], "stats": {"total": 22, "additions": 11, "deletions": 11}, "files": [{"sha": "69312db9fdb9ffd52d9371fbbd720ccca64d5111", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1775967e3898cba767bd4452383a04c18c86623/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1775967e3898cba767bd4452383a04c18c86623/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c1775967e3898cba767bd4452383a04c18c86623", "patch": "@@ -1,3 +1,10 @@\n+2010-11-20  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\t* f95-lang.c (gfc_init_decl_processing): Set size_type_node as\n+\tunsigned int of pointer size and set sizetype based on that.\n+\t* trans-types.c (gfc_init_types): Don't set size_type_node to an\n+\tunsigned type.\n+\n 2010-11-17  Joseph Myers  <joseph@codesourcery.com>\n \n \t* f95-lang.c (gfc_be_parse_file): Take no arguments."}, {"sha": "a3ac86032c660f029809f5365eb96e16c0ace19f", "filename": "gcc/fortran/f95-lang.c", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1775967e3898cba767bd4452383a04c18c86623/gcc%2Ffortran%2Ff95-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1775967e3898cba767bd4452383a04c18c86623/gcc%2Ffortran%2Ff95-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ff95-lang.c?ref=c1775967e3898cba767bd4452383a04c18c86623", "patch": "@@ -582,15 +582,10 @@ gfc_init_decl_processing (void)\n      only use it for actual characters, not for INTEGER(1). Also, we\n      want double_type_node to actually have double precision.  */\n   build_common_tree_nodes (false);\n-  /* x86_64 mingw32 has a sizetype of \"unsigned long long\", most other hosts\n-     have a sizetype of \"unsigned long\". Therefore choose the correct size\n-     in mostly target independent way.  */\n-  if (TYPE_MODE (long_unsigned_type_node) == ptr_mode)\n-    set_sizetype (long_unsigned_type_node);\n-  else if (TYPE_MODE (long_long_unsigned_type_node) == ptr_mode)\n-    set_sizetype (long_long_unsigned_type_node);\n-  else\n-    set_sizetype (long_unsigned_type_node);\n+\n+  size_type_node = gfc_build_uint_type (POINTER_SIZE);\n+  set_sizetype (size_type_node);\n+\n   build_common_tree_nodes_2 (0);\n   void_list_node = build_tree_list (NULL_TREE, void_type_node);\n "}, {"sha": "66dd99e3c4fc598298b6bdb5b27abf4de8103fec", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1775967e3898cba767bd4452383a04c18c86623/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1775967e3898cba767bd4452383a04c18c86623/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=c1775967e3898cba767bd4452383a04c18c86623", "patch": "@@ -919,8 +919,6 @@ gfc_init_types (void)\n   gfc_max_array_element_size\n     = build_int_cst_wide (long_unsigned_type_node, lo, hi);\n \n-  size_type_node = gfc_array_index_type;\n-\n   boolean_type_node = gfc_get_logical_type (gfc_default_logical_kind);\n   boolean_true_node = build_int_cst (boolean_type_node, 1);\n   boolean_false_node = build_int_cst (boolean_type_node, 0);"}]}