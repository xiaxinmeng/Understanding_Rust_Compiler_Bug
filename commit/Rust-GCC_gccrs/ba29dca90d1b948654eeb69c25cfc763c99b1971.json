{"sha": "ba29dca90d1b948654eeb69c25cfc763c99b1971", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmEyOWRjYTkwZDFiOTQ4NjU0ZWViNjljMjVjZmM3NjNjOTliMTk3MQ==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2013-01-09T20:18:44Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2013-01-09T20:18:44Z"}, "message": "re PR fortran/47203 (USE of module with same name as SUBROUTINE not reject, but also not working)\n\n\tPR fortran/47203\n\t* module.c (check_for_ambiguous): Get the current program unit using\n\tgfc_current_ns.\n\n\tPR fortran/47203\n\t* gfortran.dg/use_28.f90: New test.\n\nFrom-SVN: r195065", "tree": {"sha": "770cbf75028c945ef12e5f9224dc66ef0504f10a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/770cbf75028c945ef12e5f9224dc66ef0504f10a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba29dca90d1b948654eeb69c25cfc763c99b1971", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba29dca90d1b948654eeb69c25cfc763c99b1971", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba29dca90d1b948654eeb69c25cfc763c99b1971", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba29dca90d1b948654eeb69c25cfc763c99b1971/comments", "author": null, "committer": null, "parents": [{"sha": "e1f2b72927b8dcad0c745a75d2ae23bce664d3d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1f2b72927b8dcad0c745a75d2ae23bce664d3d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1f2b72927b8dcad0c745a75d2ae23bce664d3d5"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "cfaae77fe02ba3f9af1eba5302c63c70fee5427c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ba29dca90d1b948654eeb69c25cfc763c99b1971", "patch": "@@ -1,3 +1,9 @@\n+2013-01-09  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\tPR fortran/47203\n+\t* module.c (check_for_ambiguous): Get the current program unit using\n+\tgfc_current_ns.\n+\n 2013-01-09  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/55758"}, {"sha": "604acbb13dac5e19c658f70d7e1824192e635f68", "filename": "gcc/fortran/module.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ffortran%2Fmodule.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ffortran%2Fmodule.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmodule.c?ref=ba29dca90d1b948654eeb69c25cfc763c99b1971", "patch": "@@ -4493,7 +4493,7 @@ check_for_ambiguous (gfc_symbol *st_sym, pointer_info *info)\n   module_locus locus;\n   symbol_attribute attr;\n \n-  if (st_sym->ns->proc_name && st_sym->name == st_sym->ns->proc_name->name)\n+  if (st_sym->name == gfc_current_ns->proc_name->name)\n     {\n       gfc_error (\"'%s' of module '%s', imported at %C, is also the name of the \"\n \t\t \"current program unit\", st_sym->name, module_name);"}, {"sha": "238d75217a8b39c0743397bfec2600c96cf3800e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ba29dca90d1b948654eeb69c25cfc763c99b1971", "patch": "@@ -1,3 +1,8 @@\n+2013-01-09  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\tPR fortran/47203\n+\t* gfortran.dg/use_28.f90: New test.\n+\n 2012-01-09  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gfortran.dg/intrinsic_size_3.f90: Make scan-tree-dump-times"}, {"sha": "4972bea4f7ebeb224b94a27108a9f05338651774", "filename": "gcc/testsuite/gfortran.dg/use_28.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ftestsuite%2Fgfortran.dg%2Fuse_28.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba29dca90d1b948654eeb69c25cfc763c99b1971/gcc%2Ftestsuite%2Fgfortran.dg%2Fuse_28.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fuse_28.f90?ref=ba29dca90d1b948654eeb69c25cfc763c99b1971", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do compile }\n+!\n+! PR fortran/47203\n+! The USE statement of a module was not rejected in a procedure with the same\n+! name if the procedure was contained.\n+!\n+! Contributed by Tobias Burnus <burnus@net-b.de>\n+\n+module m\n+end module m\n+\n+call m\n+contains\n+  subroutine m()\n+     use m      ! { dg-error \"is also the name of the current program unit\" }\n+  end subroutine m\n+end\n+"}]}