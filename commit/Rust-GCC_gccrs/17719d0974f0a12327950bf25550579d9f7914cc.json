{"sha": "17719d0974f0a12327950bf25550579d9f7914cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTc3MTlkMDk3NGYwYTEyMzI3OTUwYmYyNTU1MDU3OWQ5Zjc5MTRjYw==", "commit": {"author": {"name": "Han Shen", "email": "shenhan@gcc.gnu.org", "date": "2012-01-06T00:14:32Z"}, "committer": {"name": "Han Shen", "email": "shenhan@gcc.gnu.org", "date": "2012-01-06T00:14:32Z"}, "message": "Translate built-in include paths for sysroot.\n\n\t  gcc/\n\t  * Makefile.in (gcc_gxx_include_dir_add_sysroot): New.\n\t  (PREPROCESSOR_DEFINES): Define GPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT.\n\n\t  * cppdefault.c (cpp_include_defaults): Replace hard coded \"0\" with\n\t  GPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT for \"add_sysroot\" field.\n\n\t  * configure.ac (AC_SUBST): Add gcc_gxx_include_dir_add_sysroot to\n\t  control whether sysroot should be prepended to gxx include dir.\n\n\t  * configure: Regenerate.\n\nFrom-SVN: r182938", "tree": {"sha": "aecf81e21c34cee9bcacb5cb76b633e096d4f169", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aecf81e21c34cee9bcacb5cb76b633e096d4f169"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17719d0974f0a12327950bf25550579d9f7914cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17719d0974f0a12327950bf25550579d9f7914cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17719d0974f0a12327950bf25550579d9f7914cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17719d0974f0a12327950bf25550579d9f7914cc/comments", "author": null, "committer": null, "parents": [{"sha": "b0c99997cc8ea804facfab420f1d7d1a0ecdbac6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0c99997cc8ea804facfab420f1d7d1a0ecdbac6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0c99997cc8ea804facfab420f1d7d1a0ecdbac6"}], "stats": {"total": 51, "additions": 46, "deletions": 5}, "files": [{"sha": "5742ae68ebeda3754592ee2962bde96009118ab6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=17719d0974f0a12327950bf25550579d9f7914cc", "patch": "@@ -1,3 +1,17 @@\n+2012-01-06  Han Shen  <shenhan@google.com>\n+\n+\tTranslate built-in include paths for sysroot.\n+\t* Makefile.in (gcc_gxx_include_dir_add_sysroot): New.\n+\t(PREPROCESSOR_DEFINES): Define GPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT.\n+\n+\t* cppdefault.c (cpp_include_defaults): Replace hard coded \"0\" with\n+\tGPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT for \"add_sysroot\" field.\n+\n+\t* configure.ac (AC_SUBST): Add gcc_gxx_include_dir_add_sysroot to\n+\tcontrol whether sysroot should be prepended to gxx include dir.\n+\n+\t* configure: Regenerate.\n+\n 2012-01-06  Torvald Riegel  <triegel@redhat.com>\n \n \tPR rtl-optimization/51771\n@@ -50,6 +64,7 @@\n \t* cfgloopmanip.c (remove_path): Walk loop hiearchy upwards when\n \tunlooping loops.\n \n+>>>>>>> .r182937\n 2012-01-05  Richard Guenther  <rguenther@suse.de>\n \n \tPR lto/50490"}, {"sha": "a03bb9366bc4a5ec8f5b2afc3f96d06f7920486c", "filename": "gcc/Makefile.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=17719d0974f0a12327950bf25550579d9f7914cc", "patch": "@@ -615,6 +615,7 @@ gcc_tooldir = @gcc_tooldir@\n build_tooldir = $(exec_prefix)/$(target_noncanonical)\n # Directory in which the compiler finds target-independent g++ includes.\n gcc_gxx_include_dir = @gcc_gxx_include_dir@\n+gcc_gxx_include_dir_add_sysroot = @gcc_gxx_include_dir_add_sysroot@\n # Directory to search for site-specific includes.\n local_includedir = $(local_prefix)/include\n includedir = $(prefix)/include\n@@ -3980,6 +3981,7 @@ PREPROCESSOR_DEFINES = \\\n   -DGCC_INCLUDE_DIR=\\\"$(libsubdir)/include\\\" \\\n   -DFIXED_INCLUDE_DIR=\\\"$(libsubdir)/include-fixed\\\" \\\n   -DGPLUSPLUS_INCLUDE_DIR=\\\"$(gcc_gxx_include_dir)\\\" \\\n+  -DGPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT=$(gcc_gxx_include_dir_add_sysroot) \\\n   -DGPLUSPLUS_TOOL_INCLUDE_DIR=\\\"$(gcc_gxx_include_dir)/$(target_noncanonical)\\\" \\\n   -DGPLUSPLUS_BACKWARD_INCLUDE_DIR=\\\"$(gcc_gxx_include_dir)/backward\\\" \\\n   -DLOCAL_INCLUDE_DIR=\\\"$(local_includedir)\\\" \\"}, {"sha": "4dd9faa335f39d904b0f773ce1a3cb8dedd7f176", "filename": "gcc/configure", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=17719d0974f0a12327950bf25550579d9f7914cc", "patch": "@@ -637,6 +637,7 @@ host_xm_defines\n host_xm_include_list\n host_xm_file_list\n host_exeext\n+gcc_gxx_include_dir_add_sysroot\n gcc_gxx_include_dir\n gcc_config_arguments\n float_h_file\n@@ -3313,6 +3314,15 @@ if test x${gcc_gxx_include_dir} = x; then\n   fi\n fi\n \n+gcc_gxx_include_dir_add_sysroot=0\n+if test \"${with_sysroot+set}\" = set; then\n+  gcc_gxx_without_sysroot=`expr \"${gcc_gxx_include_dir}\" : \"${with_sysroot}\"'\\(.*\\)'`\n+  if test \"${gcc_gxx_without_sysroot}\"; then\n+    gcc_gxx_include_dir=\"${gcc_gxx_without_sysroot}\"\n+    gcc_gxx_include_dir_add_sysroot=1\n+  fi\n+fi\n+\n \n # Check whether --with-cpp_install_dir was given.\n if test \"${with_cpp_install_dir+set}\" = set; then :\n@@ -18106,7 +18116,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 18109 \"configure\"\n+#line 18119 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -18212,7 +18222,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 18215 \"configure\"\n+#line 18225 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -27052,6 +27062,7 @@ fi\n \n \n \n+\n \n \n # Echo link setup."}, {"sha": "ffe7148e5dfb5b25d471c52ca672527bdbb08b37", "filename": "gcc/configure.ac", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=17719d0974f0a12327950bf25550579d9f7914cc", "patch": "@@ -145,6 +145,15 @@ if test x${gcc_gxx_include_dir} = x; then\n   fi\n fi\n \n+gcc_gxx_include_dir_add_sysroot=0\n+if test \"${with_sysroot+set}\" = set; then\n+  gcc_gxx_without_sysroot=`expr \"${gcc_gxx_include_dir}\" : \"${with_sysroot}\"'\\(.*\\)'`\n+  if test \"${gcc_gxx_without_sysroot}\"; then\n+    gcc_gxx_include_dir=\"${gcc_gxx_without_sysroot}\"\n+    gcc_gxx_include_dir_add_sysroot=1\n+  fi\n+fi\n+\n AC_ARG_WITH(cpp_install_dir,\n [AC_HELP_STRING([--with-cpp-install-dir=DIR],\n                 [install the user visible C preprocessor in DIR\n@@ -4927,6 +4936,7 @@ AC_SUBST(extra_programs)\n AC_SUBST(float_h_file)\n AC_SUBST(gcc_config_arguments)\n AC_SUBST(gcc_gxx_include_dir)\n+AC_SUBST(gcc_gxx_include_dir_add_sysroot)\n AC_SUBST(host_exeext)\n AC_SUBST(host_xm_file_list)\n AC_SUBST(host_xm_include_list)"}, {"sha": "927083e939dfc5625c8594a4bc930859b253a13a", "filename": "gcc/cppdefault.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2Fcppdefault.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17719d0974f0a12327950bf25550579d9f7914cc/gcc%2Fcppdefault.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppdefault.c?ref=17719d0974f0a12327950bf25550579d9f7914cc", "patch": "@@ -44,15 +44,18 @@ const struct default_include cpp_include_defaults[]\n = {\n #ifdef GPLUSPLUS_INCLUDE_DIR\n     /* Pick up GNU C++ generic include files.  */\n-    { GPLUSPLUS_INCLUDE_DIR, \"G++\", 1, 1, 0, 0 },\n+    { GPLUSPLUS_INCLUDE_DIR, \"G++\", 1, 1,\n+      GPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT, 0 },\n #endif\n #ifdef GPLUSPLUS_TOOL_INCLUDE_DIR\n     /* Pick up GNU C++ target-dependent include files.  */\n-    { GPLUSPLUS_TOOL_INCLUDE_DIR, \"G++\", 1, 1, 0, 1 },\n+    { GPLUSPLUS_TOOL_INCLUDE_DIR, \"G++\", 1, 1,\n+      GPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT, 1 },\n #endif\n #ifdef GPLUSPLUS_BACKWARD_INCLUDE_DIR\n     /* Pick up GNU C++ backward and deprecated include files.  */\n-    { GPLUSPLUS_BACKWARD_INCLUDE_DIR, \"G++\", 1, 1, 0, 0 },\n+    { GPLUSPLUS_BACKWARD_INCLUDE_DIR, \"G++\", 1, 1,\n+      GPLUSPLUS_INCLUDE_DIR_ADD_SYSROOT, 0 },\n #endif\n #ifdef GCC_INCLUDE_DIR\n     /* This is the dir for gcc's private headers.  */"}]}