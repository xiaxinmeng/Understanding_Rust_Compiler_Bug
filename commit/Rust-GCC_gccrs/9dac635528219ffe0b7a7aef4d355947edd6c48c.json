{"sha": "9dac635528219ffe0b7a7aef4d355947edd6c48c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRhYzYzNTUyODIxOWZmZTBiN2E3YWVmNGQzNTU5NDdlZGQ2YzQ4Yw==", "commit": {"author": {"name": "Mark Wielaard", "email": "mark@klomp.org", "date": "2002-10-11T22:10:37Z"}, "committer": {"name": "Mark Wielaard", "email": "mark@gcc.gnu.org", "date": "2002-10-11T22:10:37Z"}, "message": "re PR libgcj/8142 ('$' in class names vs. dlopen 'dynamic string tokens')\n\n\tFix for PR libgcj/8142\n\t* java/lang/natClassLoader.cc (findClass): Skip inner classes when\n\tloading native modules.\n\nFrom-SVN: r58066", "tree": {"sha": "f3e6a4d9f03e1c4c3c0faaf5ccbbb5560b43eef3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f3e6a4d9f03e1c4c3c0faaf5ccbbb5560b43eef3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9dac635528219ffe0b7a7aef4d355947edd6c48c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dac635528219ffe0b7a7aef4d355947edd6c48c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dac635528219ffe0b7a7aef4d355947edd6c48c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dac635528219ffe0b7a7aef4d355947edd6c48c/comments", "author": null, "committer": null, "parents": [{"sha": "45c7cbd930967c9960632245db5f3d6b70be7b79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45c7cbd930967c9960632245db5f3d6b70be7b79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45c7cbd930967c9960632245db5f3d6b70be7b79"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "eaba74a43dd2b4e3d23648d3d43da721892f3fb2", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dac635528219ffe0b7a7aef4d355947edd6c48c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dac635528219ffe0b7a7aef4d355947edd6c48c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9dac635528219ffe0b7a7aef4d355947edd6c48c", "patch": "@@ -1,3 +1,9 @@\n+2002-10-11  Mark Wielaard  <mark@klomp.org>\n+\n+\tFix for PR libgcj/8142\n+\t* java/lang/natClassLoader.cc (findClass): Skip inner classes when\n+\tloading native modules.\n+\n 2002-10-10  Michael Koch  <konqueror@gmx.de>\n \n \t* javax/swing/AbstractListModel.java"}, {"sha": "8bff16997b9906a0f900b47533a7d1e231aa7972", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dac635528219ffe0b7a7aef4d355947edd6c48c/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dac635528219ffe0b7a7aef4d355947edd6c48c/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=9dac635528219ffe0b7a7aef4d355947edd6c48c", "patch": "@@ -204,7 +204,14 @@ gnu::gcj::runtime::VMClassLoader::findClass (jstring name)\n       // by `lib-gnu-pkg.so' and `lib-gnu.so'.  If loading one of\n       // these causes the class to appear in the cache, then use it.\n       java::lang::StringBuffer *sb = new java::lang::StringBuffer (JvNewStringLatin1(\"lib-\"));\n-      jstring so_base_name = (sb->append (name)->toString ())->replace ('.', '-');\n+      // Skip inner classes\n+      jstring cn;\n+      jint ci = name->indexOf('$');\n+      if (ci == -1)\n+\tcn = name;\n+      else\n+\tcn = name->substring (0, ci);\n+      jstring so_base_name = (sb->append (cn)->toString ())->replace ('.', '-');\n \n       // Compare against `3' because that is the length of \"lib\".\n       while (! klass && so_base_name && so_base_name->length() > 3)"}]}