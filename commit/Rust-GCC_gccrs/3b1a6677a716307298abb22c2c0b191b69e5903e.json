{"sha": "3b1a6677a716307298abb22c2c0b191b69e5903e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2IxYTY2NzdhNzE2MzA3Mjk4YWJiMjJjMmMwYjE5MWI2OWU1OTAzZQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2006-01-30T17:06:16Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2006-01-30T17:06:16Z"}, "message": "re PR testsuite/25318 (g++.dg/other/pr22003.C (test for excess errors) fails)\n\n\tPR testsuite/25318\n\t* lib/target-supports.exp (check_effective_target_freorder):\n\tCheck to see if target supports -freorder-blocks-and-partition.\n\t* g++.dg/other/pr22003.C: Use \"dg-require-effective-target freorder\"\n\tinstead of \"dg-require-named-sections\".\n\nFrom-SVN: r110405", "tree": {"sha": "6d3e38911f239d99f2238bf3cececd2d9b0ba7bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d3e38911f239d99f2238bf3cececd2d9b0ba7bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b1a6677a716307298abb22c2c0b191b69e5903e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b1a6677a716307298abb22c2c0b191b69e5903e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b1a6677a716307298abb22c2c0b191b69e5903e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b1a6677a716307298abb22c2c0b191b69e5903e/comments", "author": null, "committer": null, "parents": [{"sha": "6bb862cc973aa22427c41dd482821b7c11c331e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bb862cc973aa22427c41dd482821b7c11c331e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bb862cc973aa22427c41dd482821b7c11c331e2"}], "stats": {"total": 47, "additions": 44, "deletions": 3}, "files": [{"sha": "3a6d317aad71971717c2059f80522849f7e47caf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b1a6677a716307298abb22c2c0b191b69e5903e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b1a6677a716307298abb22c2c0b191b69e5903e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3b1a6677a716307298abb22c2c0b191b69e5903e", "patch": "@@ -1,3 +1,11 @@\n+2006-01-30  Steve Ellcey  <sje@cup.hp.com>\n+\n+\tPR testsuite/25318\n+\t* lib/target-supports.exp (check_effective_target_freorder):\n+\tCheck to see if target supports -freorder-blocks-and-partition.\n+\t* g++.dg/other/pr22003.C: Use \"dg-require-effective-target freorder\"\n+\tinstead of \"dg-require-named-sections\".\n+\n 2006-01-30  J\"orn Rennecke <joern.rennecke@st.com>\n \n \tPR target/14798:"}, {"sha": "222ccac7bebdeaa6bd3482a265359844e05d1dfb", "filename": "gcc/testsuite/g++.dg/other/pr22003.C", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b1a6677a716307298abb22c2c0b191b69e5903e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr22003.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b1a6677a716307298abb22c2c0b191b69e5903e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr22003.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr22003.C?ref=3b1a6677a716307298abb22c2c0b191b69e5903e", "patch": "@@ -1,8 +1,6 @@\n /* PR rtl-optimization/22003 */\n /* { dg-do compile } */\n-/* -freorder-blocks-and-partition is not supported on machines */\n-/* that do not support named sections.  */\n-/* { dg-require-named-sections \"\" } */\n+/* { dg-require-effective-target freorder } */\n /* { dg-options \"-O2 -fno-exceptions -freorder-blocks-and-partition\" } */\n \n struct c1"}, {"sha": "f9ca1a1652dc98172a99384f215380cf5d514a5c", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b1a6677a716307298abb22c2c0b191b69e5903e/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b1a6677a716307298abb22c2c0b191b69e5903e/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=3b1a6677a716307298abb22c2c0b191b69e5903e", "patch": "@@ -503,6 +503,41 @@ proc check_effective_target_fopenmp {} {\n     return $et_fopenmp_saved\n }\n \n+# Return 1 if compilation with -freorder-blocks-and-partition is error-free\n+# for trivial code, 0 otherwise.\n+\n+proc check_effective_target_freorder {} {\n+    global et_freorder_saved\n+    global et_freorder_target_name\n+\n+    if { ![info exists et_freorder_target_name] } {\n+\tset et_freorder_target_name \"\"\n+    }\n+\n+    # If the target has changed since we set the cached value, clear it.\n+    set current_target [current_target_name]\n+    if { $current_target != $et_freorder_target_name } {\n+\tverbose \"check_effective_target_freorder: `$et_freorder_target_name'\" 2\n+\tset et_freorder_target_name $current_target\n+\tif [info exists et_freorder_saved] {\n+\t    verbose \"check_effective_target_freorder: removing cached result\" 2\n+\t    unset et_freorder_saved\n+\t}\n+    }\n+\n+    if [info exists et_freorder_saved] {\n+\tverbose \"check_effective_target_freorder: using cached result\" 2\n+    } else {\n+\tverbose \"check_effective_target_freorder: compiling source\" 2\n+\n+\tset et_freorder_saved [string match \"\" [get_compiler_messages freorder object {\n+\t    void foo (void) { }\n+\t} \"-freorder-blocks-and-partition\"]]\n+    }\n+    verbose \"check_effective_target_freorder: returning $et_freorder_saved\" 2\n+    return $et_freorder_saved\n+}\n+\n # Return 1 if -fpic and -fPIC are supported, as in no warnings or errors\n # emitted, 0 otherwise.  Whether a shared library can actually be built is\n # out of scope for this test."}]}