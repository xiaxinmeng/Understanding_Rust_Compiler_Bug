{"sha": "d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDdiZDk4OWM2ZDdhZjNjMmM3N2MwMDIyYTFkYzRjNDQzOGI4ODEwZA==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-11-08T21:47:50Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-11-08T21:47:50Z"}, "message": "re PR tree-optimization/55191 (ICE in compute_antic at tree-ssa-pre.c:2511)\n\ngcc/\n\tPR tree-optimization/55191\n\t* cfganal.c (connect_infinite_loops_to_exit): Call dfs_deadend here.\n\t(flow_dfs_compute_reverse_execute): Don't call it here.\n\ntestsuite/\n\tPR tree-optimization/55191\n\t* gcc.dg/pr55191.c: New test.\n\nFrom-SVN: r193341", "tree": {"sha": "ca1b207002e81b12401d7342ca360d8f53c065f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca1b207002e81b12401d7342ca360d8f53c065f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/comments", "author": null, "committer": null, "parents": [{"sha": "2a86dbb79b72e3662aea66873888df6923d06472", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a86dbb79b72e3662aea66873888df6923d06472", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a86dbb79b72e3662aea66873888df6923d06472"}], "stats": {"total": 33, "additions": 30, "deletions": 3}, "files": [{"sha": "17089b09100abf3dc7ad00481c13eb071a55069a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "patch": "@@ -1,3 +1,9 @@\n+2012-11-08  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\tPR tree-optimization/55191\n+\t* cfganal.c (connect_infinite_loops_to_exit): Call dfs_deadend here.\n+\t(flow_dfs_compute_reverse_execute): Don't call it here.\n+\n 2012-11-08  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/53145"}, {"sha": "7a76c60e43387bac0bce6d44586e3e9d22171885", "filename": "gcc/cfganal.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2Fcfganal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2Fcfganal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfganal.c?ref=d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "patch": "@@ -452,6 +452,7 @@ void\n connect_infinite_loops_to_exit (void)\n {\n   basic_block unvisited_block = EXIT_BLOCK_PTR;\n+  basic_block deadend_block;\n   struct depth_first_search_dsS dfs_ds;\n \n   /* Perform depth-first search in the reverse graph to find nodes\n@@ -467,8 +468,9 @@ connect_infinite_loops_to_exit (void)\n       if (!unvisited_block)\n \tbreak;\n \n-      make_edge (unvisited_block, EXIT_BLOCK_PTR, EDGE_FAKE);\n-      flow_dfs_compute_reverse_add_bb (&dfs_ds, unvisited_block);\n+      deadend_block = dfs_find_deadend (unvisited_block);\n+      make_edge (deadend_block, EXIT_BLOCK_PTR, EDGE_FAKE);\n+      flow_dfs_compute_reverse_add_bb (&dfs_ds, deadend_block);\n     }\n \n   flow_dfs_compute_reverse_finish (&dfs_ds);\n@@ -958,7 +960,7 @@ flow_dfs_compute_reverse_execute (depth_first_search_ds data,\n   /* Determine if there are unvisited basic blocks.  */\n   FOR_BB_BETWEEN (bb, last_unvisited, NULL, prev_bb)\n     if (!bitmap_bit_p (data->visited_blocks, bb->index))\n-      return dfs_find_deadend (bb);\n+      return bb;\n \n   return NULL;\n }"}, {"sha": "f67250981c32f4f5c7a6bf749ac915c478e4f4d8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "patch": "@@ -1,3 +1,8 @@\n+2012-11-08  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\tPR tree-optimization/55191\n+\t* gcc.dg/pr55191.c: New test.\n+\n 2012-11-08  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/54499"}, {"sha": "568425ce038e90142d7e1ceae8c860f6d34c694c", "filename": "gcc/testsuite/gcc.dg/pr55191.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2Ftestsuite%2Fgcc.dg%2Fpr55191.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d/gcc%2Ftestsuite%2Fgcc.dg%2Fpr55191.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr55191.c?ref=d7bd989c6d7af3c2c77c0022a1dc4c4438b8810d", "patch": "@@ -0,0 +1,14 @@\n+/* PR tree-optimization/55191 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+int a, b;\n+\n+void f(void)\n+{\n+  b = a || b;\n+\n+  for(a = 0; a < 2; a++);\n+  while(1);\n+}\n+"}]}