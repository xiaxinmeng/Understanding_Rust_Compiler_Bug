{"sha": "67248ad043b366d30e97cb6c192593057e798805", "node_id": "C_kwDOANBUbNoAKDY3MjQ4YWQwNDNiMzY2ZDMwZTk3Y2I2YzE5MjU5MzA1N2U3OTg4MDU", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-07-26T09:02:13Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-07-26T10:08:50Z"}, "message": "Improve ptr_derefs_may_alias_p for the case of &STRING_CST\n\nWhen the first pointer happens to be a pointer to a STRING_CST we\ngive up too early since the 2nd pointer handling could still end\nup with a DECL for example which can disambiguate against a STRING_CST\njust fine.\n\n\t* tree-ssa-alias.cc (ptr_derefs_may_alias_p): If ptr1\n\tpoints to a constant continue checking ptr2.", "tree": {"sha": "e2188f8defe1f61110eaff43e9e4ff19a73bf298", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e2188f8defe1f61110eaff43e9e4ff19a73bf298"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67248ad043b366d30e97cb6c192593057e798805", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67248ad043b366d30e97cb6c192593057e798805", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67248ad043b366d30e97cb6c192593057e798805", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67248ad043b366d30e97cb6c192593057e798805/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c906efc700dafe7d30e8b35895f43862ddf7dc8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c906efc700dafe7d30e8b35895f43862ddf7dc8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c906efc700dafe7d30e8b35895f43862ddf7dc8e"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "b4c65da5718b61b6ee628765af7a1ac373508fad", "filename": "gcc/tree-ssa-alias.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67248ad043b366d30e97cb6c192593057e798805/gcc%2Ftree-ssa-alias.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67248ad043b366d30e97cb6c192593057e798805/gcc%2Ftree-ssa-alias.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.cc?ref=67248ad043b366d30e97cb6c192593057e798805", "patch": "@@ -349,7 +349,9 @@ ptr_derefs_may_alias_p (tree ptr1, tree ptr2)\n       else if (base\n \t       && DECL_P (base))\n \treturn ptr_deref_may_alias_decl_p (ptr2, base);\n-      else\n+      /* Try ptr2 when ptr1 points to a constant.  */\n+      else if (base\n+\t       && !CONSTANT_CLASS_P (base))\n \treturn true;\n     }\n   if (TREE_CODE (ptr2) == ADDR_EXPR)"}]}