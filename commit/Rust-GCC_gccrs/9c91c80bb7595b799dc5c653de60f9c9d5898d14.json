{"sha": "9c91c80bb7595b799dc5c653de60f9c9d5898d14", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM5MWM4MGJiNzU5NWI3OTlkYzVjNjUzZGU2MGY5YzlkNTg5OGQxNA==", "commit": {"author": {"name": "Joerg Brunsmann", "email": "joerg_brunsmann@yahoo.de", "date": "2003-01-03T18:05:00Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-01-03T18:05:00Z"}, "message": "Connection.java (proxyPort, [...]): New static fields.\n\n2003-01-03  Joerg Brunsmann  <joerg_brunsmann@yahoo.de>\n\n\t* gnu/gcj/protocol/http/Connection.java (proxyPort, proxyInUse,\n\tproxyHost): New static fields.\n\t(<clinit>): Initialize new fields.\n\t(connect): Use proxy if necessary.\n\t(usingProxy): Implement.\n\nFrom-SVN: r60846", "tree": {"sha": "123ae9a1944193f9543ccfdf28377a32a95408a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/123ae9a1944193f9543ccfdf28377a32a95408a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c91c80bb7595b799dc5c653de60f9c9d5898d14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c91c80bb7595b799dc5c653de60f9c9d5898d14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c91c80bb7595b799dc5c653de60f9c9d5898d14", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c91c80bb7595b799dc5c653de60f9c9d5898d14/comments", "author": null, "committer": null, "parents": [{"sha": "0320cac3d8844f8ea44a8e3a27dd75f385b12061", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0320cac3d8844f8ea44a8e3a27dd75f385b12061", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0320cac3d8844f8ea44a8e3a27dd75f385b12061"}], "stats": {"total": 67, "additions": 55, "deletions": 12}, "files": [{"sha": "14893f95be272d012fc5fe525be9b5576d8df3c8", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c91c80bb7595b799dc5c653de60f9c9d5898d14/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c91c80bb7595b799dc5c653de60f9c9d5898d14/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9c91c80bb7595b799dc5c653de60f9c9d5898d14", "patch": "@@ -1,3 +1,11 @@\n+2003-01-03  Joerg Brunsmann  <joerg_brunsmann@yahoo.de>\n+\n+\t* gnu/gcj/protocol/http/Connection.java (proxyPort, proxyInUse,\n+\tproxyHost): New static fields.\n+\t(<clinit>): Initialize new fields.\n+\t(connect): Use proxy if necessary.\n+\t(usingProxy): Implement.\n+\n 2003-01-03  Eric Blake  <ebb9@email.byu.edu>\n \n \t* java/util/TreeMap.java (fabricateTree): Fix off-by-one error."}, {"sha": "1a6fc0105f91da83c2dc76b0886fb5c3c90896d2", "filename": "libjava/gnu/gcj/protocol/http/Connection.java", "status": "modified", "additions": 47, "deletions": 12, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c91c80bb7595b799dc5c653de60f9c9d5898d14/libjava%2Fgnu%2Fgcj%2Fprotocol%2Fhttp%2FConnection.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c91c80bb7595b799dc5c653de60f9c9d5898d14/libjava%2Fgnu%2Fgcj%2Fprotocol%2Fhttp%2FConnection.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fprotocol%2Fhttp%2FConnection.java?ref=9c91c80bb7595b799dc5c653de60f9c9d5898d14", "patch": "@@ -1,6 +1,6 @@\n // Connection.java - Implementation of HttpURLConnection for http protocol.\n \n-/* Copyright (C) 1999, 2000  Free Software Foundation\n+/* Copyright (C) 1999, 2000, 2003  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -25,10 +25,11 @@\n /**\n  * Written using on-line Java Platform 1.2 API Specification, as well\n  * as \"The Java Class Libraries\", 2nd edition (Addison-Wesley, 1998).\n- * Status:  Minimal subset of functionality.  Proxies and Redirects\n- *\tnot yet handled.  FileNameMap handling needs to be considered.\n- *\tuseCaches, ifModifiedSince, and allowUserInteraction need\n- *\tconsideration as well as doInput and doOutput.\n+ * Status: Minimal subset of functionality.  Proxies only partially\n+ * handled; Redirects not yet handled.  FileNameMap handling needs to\n+ * be considered.  useCaches, ifModifiedSince, and\n+ * allowUserInteraction need consideration as well as doInput and\n+ * doOutput.\n  */\n \n class Connection extends HttpURLConnection\n@@ -40,6 +41,33 @@ class Connection extends HttpURLConnection\n   private Vector hdrVec = new Vector();\n   private BufferedInputStream bufferedIn;\n \n+  private static int proxyPort = 80;\n+  private static boolean proxyInUse = false;\n+  private static String proxyHost = null;\n+\n+  static \n+  {\n+    // Recognize some networking properties listed at\n+    // http://java.sun.com/j2se/1.4/docs/guide/net/properties.html.\n+    String port = null;\n+    proxyHost = System.getProperty(\"http.proxyHost\");\n+    if (proxyHost != null)\n+      {\n+\tproxyInUse = true;\n+\tif ((port = System.getProperty(\"http.proxyPort\")) != null)\n+\t  {\n+\t    try\n+\t      {\n+\t\tproxyPort = Integer.parseInt(port);\n+\t      }\n+\t    catch (Throwable t)\n+\t      {\n+\t\t// Nothing.  \n+\t      }\n+\t  }\n+      }\n+  }\n+\n   public Connection(URL url)\n   {\n     super(url);\n@@ -85,12 +113,20 @@ public void connect() throws IOException\n \n     // Get address and port number.\n     int port;\n-    InetAddress destAddr = InetAddress.getByName(url.getHost());\n-    if ((port = url.getPort()) == -1)\n-      port = 80;\n+    if (proxyInUse)\n+      {\n+\tport = proxyPort;\n+\tsock = new Socket(proxyHost, port);\n+      }\n+    else\n+      {\n+\tInetAddress destAddr = InetAddress.getByName(url.getHost());\n+\tif ((port = url.getPort()) == -1)\n+\t  port = 80;\n+\t// Open socket and output stream.\n+\tsock = new Socket(destAddr, port);\n+      }\n \n-    // Open socket and output stream.\n-    sock = new Socket(destAddr, port);\n     PrintWriter out = new PrintWriter(sock.getOutputStream());\n \n     // Send request including any request properties that were set.\n@@ -123,10 +159,9 @@ public void disconnect()\n       }\n   }\n \n-  // TODO: public boolean usingProxy()\n   public boolean usingProxy()\n   {\n-    return false;\n+    return proxyInUse;\n   }\n \n   // Override default method in URLConnection."}]}