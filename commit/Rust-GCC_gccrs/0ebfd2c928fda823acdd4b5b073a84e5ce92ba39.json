{"sha": "0ebfd2c928fda823acdd4b5b073a84e5ce92ba39", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGViZmQyYzkyOGZkYTgyM2FjZGQ0YjViMDczYTg0ZTVjZTkyYmEzOQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2005-03-16T02:20:05Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2005-03-16T02:20:05Z"}, "message": "re PR tree-optimization/17454 (ICE with --enable-checking=fold)\n\n\n\tPR tree-optimization/17454\n\t* tree.c (tree_size): Add case for TREE_BINFO.\n\t* fold-const.c (fold_checksum_tree): Only clear the overloaded\n\tfield TYPE_CACHED_VALUES if TYPE_CACHED_VALUES_P is set.\n\nFrom-SVN: r96548", "tree": {"sha": "3750c12eff0b65397727b2016b257f02c6c89e51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3750c12eff0b65397727b2016b257f02c6c89e51"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39/comments", "author": null, "committer": null, "parents": [{"sha": "c79e602b6302889036c04a7ca530afc5ae97e053", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c79e602b6302889036c04a7ca530afc5ae97e053", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c79e602b6302889036c04a7ca530afc5ae97e053"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "cb2ec2a291cdb4e8ef74ff5524b34c5df1cff1f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0ebfd2c928fda823acdd4b5b073a84e5ce92ba39", "patch": "@@ -1,3 +1,10 @@\n+2005-03-15  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR tree-optimization/17454\n+\t* tree.c (tree_size): Add case for TREE_BINFO.\n+\t* fold-const.c (fold_checksum_tree): Only clear the overloaded\n+\tfield TYPE_CACHED_VALUES if TYPE_CACHED_VALUES_P is set.\n+\n 2005-03-15  Roger Sayle  <roger@eyesopen.com>\n \n \t* optabs.c (expand_doubleword_mult): Avoid clobbering op0 and"}, {"sha": "13e91530cb05438de10a09f263fb5c3bd0545620", "filename": "gcc/fold-const.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=0ebfd2c928fda823acdd4b5b073a84e5ce92ba39", "patch": "@@ -10049,8 +10049,11 @@ fold_checksum_tree (tree expr, struct md5_ctx *ctx, htab_t ht)\n       expr = (tree) buf;\n       TYPE_POINTER_TO (expr) = NULL;\n       TYPE_REFERENCE_TO (expr) = NULL;\n-      TYPE_CACHED_VALUES_P (expr) = 0;\n-      TYPE_CACHED_VALUES (expr) = NULL;\n+      if (TYPE_CACHED_VALUES_P (expr))\n+\t{\n+\t  TYPE_CACHED_VALUES_P (expr) = 0;\n+\t  TYPE_CACHED_VALUES (expr) = NULL;\n+\t}\n     }\n   md5_process_bytes (expr, tree_size (expr), ctx);\n   fold_checksum_tree (TREE_TYPE (expr), ctx, ht);"}, {"sha": "b1c2458973bdc72f16b71868ec18bec9f23fa670", "filename": "gcc/tree.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ebfd2c928fda823acdd4b5b073a84e5ce92ba39/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=0ebfd2c928fda823acdd4b5b073a84e5ce92ba39", "patch": "@@ -243,6 +243,10 @@ tree_size (tree node)\n       return (sizeof (struct tree_phi_node)\n \t      + (PHI_ARG_CAPACITY (node) - 1) * sizeof (struct phi_arg_d));\n \n+    case TREE_BINFO:\n+      return (offsetof (struct tree_binfo, base_binfos)\n+\t      + VEC_embedded_size (tree, BINFO_N_BASE_BINFOS (node)));\n+\n     case TREE_VEC:\n       return (sizeof (struct tree_vec)\n \t      + (TREE_VEC_LENGTH (node) - 1) * sizeof(char *));"}]}