{"sha": "baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFhYTQwYWVjYTRhOTVhNmUyNTBlMTRlOGYxZThiMmUxMjM5Yzg2NA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2011-09-27T16:12:35Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2011-09-27T16:12:35Z"}, "message": "re PR middle-end/43864 (Same basic blocks should be merged)\n\n2011-09-27  Tom de Vries  <tom@codesourcery.com>\n\n\tPR middle-end/43864\n\t* gcc.dg/fold-compare-2.c (dg-options): Add -fno-tree-tail-merge.\n\t* gcc/testsuite/gcc.dg/uninit-pred-2_c.c: Same.\n\t* gcc.dg/pr43864.c: New test.\n\t* gcc.dg/pr43864-2.c: Same.\n\t* gcc.dg/pr43864-3.c: Same.\n\t* gcc.dg/pr43864-4.c: Same.\n\nFrom-SVN: r179276", "tree": {"sha": "2b71d95dbe1af018b18208abbc8931a37536072c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2b71d95dbe1af018b18208abbc8931a37536072c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "html_url": "https://github.com/Rust-GCC/gccrs/commit/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/comments", "author": null, "committer": null, "parents": [{"sha": "c9e93168073f45d0d2ca8cce8008116ef6b1a86a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9e93168073f45d0d2ca8cce8008116ef6b1a86a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9e93168073f45d0d2ca8cce8008116ef6b1a86a"}], "stats": {"total": 122, "additions": 120, "deletions": 2}, "files": [{"sha": "c237ebb68f843bac28548480797b5adfa2c06826", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "patch": "@@ -1,3 +1,13 @@\n+2011-09-27  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR middle-end/43864\n+\t* gcc.dg/fold-compare-2.c (dg-options): Add -fno-tree-tail-merge.\n+\t* gcc/testsuite/gcc.dg/uninit-pred-2_c.c: Same.\n+\t* gcc.dg/pr43864.c: New test.\n+\t* gcc.dg/pr43864-2.c: Same.\n+\t* gcc.dg/pr43864-3.c: Same.\n+\t* gcc.dg/pr43864-4.c: Same.\n+\n 2011-09-27  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/ipa/inline-5.c: New testcase."}, {"sha": "15ea462d4405d051415fbb9fa274546d96770d29", "filename": "gcc/testsuite/gcc.dg/fold-compare-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-compare-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-compare-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-compare-2.c?ref=baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -fdump-tree-vrp1\" } */\n+/* { dg-options \"-O2 -fno-tree-tail-merge -fdump-tree-vrp1\" } */\n \n extern void abort (void);\n "}, {"sha": "1a0d9491a17878be91749ea2d08c79dc4b14a92b", "filename": "gcc/testsuite/gcc.dg/pr43864-2.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-2.c?ref=baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "patch": "@@ -0,0 +1,22 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-pre\" } */\n+\n+int\n+f (int c, int b, int d)\n+{\n+  int r, e;\n+\n+  if (c)\n+    r = b + d;\n+  else\n+    {\n+      e = b + d;\n+      r = e;\n+    }\n+\n+  return r;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"if \" 0 \"pre\"} } */\n+/* { dg-final { scan-tree-dump-times \"_.*\\\\\\+.*_\" 1 \"pre\"} } */\n+/* { dg-final { cleanup-tree-dump \"pre\" } } */"}, {"sha": "622a56495416b5d49368f1be0a094a61ed1e8b33", "filename": "gcc/testsuite/gcc.dg/pr43864-3.c", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-3.c?ref=baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "patch": "@@ -0,0 +1,23 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-pre\" } */\n+\n+/* Commutative case.  */\n+\n+int f(int c, int b, int d)\n+{\n+  int r, e;\n+\n+  if (c)\n+    r = b + d;\n+  else\n+    {\n+      e = d + b;\n+      r = e;\n+    }\n+\n+  return r;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"if \" 0 \"pre\"} } */\n+/* { dg-final { scan-tree-dump-times \"_.*\\\\\\+.*_\" 1 \"pre\"} } */\n+/* { dg-final { cleanup-tree-dump \"pre\" } } */"}, {"sha": "3e3d643947ddf0890d87b5290230866917b7923f", "filename": "gcc/testsuite/gcc.dg/pr43864-4.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864-4.c?ref=baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "patch": "@@ -0,0 +1,28 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-pre\" } */\n+\n+/* Different stmt order.  */\n+\n+int f(int c, int b, int d)\n+{\n+  int r, r2, e;\n+\n+  if (c)\n+    {\n+      r = b + d;\n+      r2 = d - b;\n+    }\n+  else\n+    {\n+      r2 = d - b;\n+      e = d + b;\n+      r = e;\n+    }\n+\n+  return r - r2;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"if \" 0 \"pre\"} } */\n+/* { dg-final { scan-tree-dump-times \"_.*\\\\\\+.*_\" 1 \"pre\"} } */\n+/* { dg-final { scan-tree-dump-times \" - \" 2 \"pre\"} } */\n+/* { dg-final { cleanup-tree-dump \"pre\" } } */"}, {"sha": "03c2d49c0fc1b6b35b7614f187f19fdb5a46221b", "filename": "gcc/testsuite/gcc.dg/pr43864.c", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr43864.c?ref=baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "patch": "@@ -0,0 +1,35 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-pre\" } */\n+\n+extern void foo (char*, int);\n+extern void mysprintf (char *, char *);\n+extern void myfree (void *);\n+extern int access (char *, int);\n+extern int fopen (char *, int);\n+\n+char *\n+hprofStartupp (char *outputFileName, char *ctx)\n+{\n+  char fileName[1000];\n+  int fp;\n+  mysprintf (fileName, outputFileName);\n+  if (access (fileName, 1) == 0)\n+    {\n+      myfree (ctx);\n+      return 0;\n+    }\n+\n+  fp = fopen (fileName, 0);\n+  if (fp == 0)\n+    {\n+      myfree (ctx);\n+      return 0;\n+    }\n+\n+  foo (outputFileName, fp);\n+\n+  return ctx;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"myfree \\\\(\" 1 \"pre\"} } */\n+/* { dg-final { cleanup-tree-dump \"pre\" } } */"}, {"sha": "bf094d12770c8099152b19f950702818fc52905e", "filename": "gcc/testsuite/gcc.dg/uninit-pred-2_c.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-pred-2_c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baaa40aeca4a95a6e250e14e8f1e8b2e1239c864/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-pred-2_c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-pred-2_c.c?ref=baaa40aeca4a95a6e250e14e8f1e8b2e1239c864", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-Wuninitialized -O2\" } */\n+/* { dg-options \"-Wuninitialized -O2 -fno-tree-tail-merge\" } */\n \n int g;\n void bar (void);"}]}