{"sha": "5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRlMmRmN2JkNGE3MWE3MGVjYmIzZjZjNTE0MTgzODY0ZGM3NWM4YQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-05-14T20:32:59Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-05-14T20:32:59Z"}, "message": "re PR tree-optimization/21563 (A trivial VRP opportunity missed)\n\ngcc/\n\tPR tree-optimization/21563\n\t* tree-vrp.c (compare_value): Return boolean_false_node when\n\tSSA_NAME in \"if (SSA_NAME == CST)\" is strictly smaller than or\n\tstrictly larger than CST.\n\ntestsuite/\n\tPR tree-optimization/21563\n\t* gcc.dg/tree-ssa/pr21563.c: New.\n\nFrom-SVN: r99705", "tree": {"sha": "d87d80e20a98cc3925d2abf5c81ae16134950b55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d87d80e20a98cc3925d2abf5c81ae16134950b55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/comments", "author": null, "committer": null, "parents": [{"sha": "92df92cddae0295ede176f971612090ef32dfbf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92df92cddae0295ede176f971612090ef32dfbf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92df92cddae0295ede176f971612090ef32dfbf9"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "2a1eee872854089f8d3f8497a06f93877af05e07", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "patch": "@@ -3,6 +3,11 @@\n \t* tree-optimize.c (init_tree_optimization_passes): Move\n \tpass_cd_dce in place of the last pass_dce.\n \n+\tPR tree-optimization/21563\n+\t* tree-vrp.c (compare_value): Return boolean_false_node when\n+\tSSA_NAME in \"if (SSA_NAME == CST)\" is strictly smaller than or\n+\tstrictly larger than CST.\n+\n 2005-05-14  Nathan Sidwell  <nathan@codesourcery.com>\n \t    Jan-Benedict Glaw  <jbglaw@lug-owl.de>\n "}, {"sha": "09b2cb73e0a14260d2ef533073201fcd62290045", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "patch": "@@ -1,3 +1,8 @@\n+2005-05-14  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\tPR tree-optimization/21563\n+\t* gcc.dg/tree-ssa/pr21563.c: New.\n+\n 2005-05-14  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/noreturn-7.c: Allow control reaches warning."}, {"sha": "b3c45886eb10a9b209712289ee9087475d644e50", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr21563.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr21563.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr21563.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr21563.c?ref=5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "patch": "@@ -0,0 +1,17 @@\n+/* PR tree-optimization/21563\n+   Make sure VRP folds the second \"if\" statement.  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fno-tree-dominator-opts -fdump-tree-vrp-details\" } */\n+\n+int\n+foo (int a)\n+{\n+  if (a > 1)\n+    if (a == 0)\n+      return 1;\n+  return 0;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"Folding predicate\" 1 \"vrp\"} } */\n+/* { dg-final { cleanup-tree-dump \"vrp\" } } */"}, {"sha": "16fa58b23b181fc4993b6db72d6644ca8c1f4846", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de2df7bd4a71a70ecbb3f6c514183864dc75c8a/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=5de2df7bd4a71a70ecbb3f6c514183864dc75c8a", "patch": "@@ -1204,6 +1204,9 @@ compare_range_with_value (enum tree_code comp, value_range *vr, tree val)\n \t  else if (cmp == -1 || cmp == 1 || cmp == 2)\n \t    return boolean_false_node;\n \t}\n+      else if (compare_values (val, vr->min) == -1\n+\t       || compare_values (vr->max, val) == -1)\n+\treturn boolean_false_node;\n \n       return NULL_TREE;\n     }"}]}