{"sha": "5157150146c3776b5b43dc03fa9f121f111955b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTE1NzE1MDE0NmMzNzc2YjViNDNkYzAzZmE5ZjEyMWYxMTE5NTViNw==", "commit": {"author": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1996-11-05T19:52:23Z"}, "committer": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1996-11-05T19:52:23Z"}, "message": "(see ChangeLog for Oct 29.)\n\nFrom-SVN: r13098", "tree": {"sha": "1c6112662ea2a9d3d80d489ed52388ef32d5ec4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c6112662ea2a9d3d80d489ed52388ef32d5ec4e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5157150146c3776b5b43dc03fa9f121f111955b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5157150146c3776b5b43dc03fa9f121f111955b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5157150146c3776b5b43dc03fa9f121f111955b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5157150146c3776b5b43dc03fa9f121f111955b7/comments", "author": null, "committer": null, "parents": [{"sha": "e07048cd97c529c27c56e945a56bc67f91324550", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e07048cd97c529c27c56e945a56bc67f91324550", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e07048cd97c529c27c56e945a56bc67f91324550"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "4b0522d5b2392cf4d092ff341e075ad4f6e43e98", "filename": "gcc/texinfo.tex", "status": "modified", "additions": 25, "deletions": 7, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5157150146c3776b5b43dc03fa9f121f111955b7/gcc%2Ftexinfo.tex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5157150146c3776b5b43dc03fa9f121f111955b7/gcc%2Ftexinfo.tex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftexinfo.tex?ref=5157150146c3776b5b43dc03fa9f121f111955b7", "patch": "@@ -1,5 +1,5 @@\n %% TeX macros to handle Texinfo files.\n-%% $Id: texinfo.tex,v 2.186 1996/10/25 19:02:12 karl Exp $\n+%% $Id: texinfo.tex,v 2.186 1996/11/05 19:51:16 karl Exp karl $\n \n %  Copyright (C) 1985, 86, 88, 90, 91, 92, 93,\n %                94, 95, 1996 Free Software Foundation, Inc.\n@@ -137,24 +137,39 @@\n %\n %---------------------End change-----------------------\n \n+% Main output routine.\n+\\chardef\\PAGE = 255\n+\\output = {\\onepageout{\\pagecontents\\PAGE}}\n+\n+\\newbox\\headlinebox  \\newbox\\footlinebox\n+\n % \\onepageout takes a vbox as an argument.  Note that \\pagecontents\n % does insertions, but you have to call it yourself.\n-\\chardef\\PAGE=255  \\output={\\onepageout{\\pagecontents\\PAGE}}\n \\def\\onepageout#1{%\n   \\hoffset=\\normaloffset\n   \\ifodd\\pageno  \\advance\\hoffset by \\bindingoffset\n   \\else \\advance\\hoffset by -\\bindingoffset\\fi\n+  %\n+  % Do this outside of the \\shipout so @code etc. will be expanded in\n+  % the headline as they should be, not taken literally (outputting ''code).\n+  \\setbox\\headlinebox = \\vbox{\\let\\hsize=\\pagewidth \\makeheadline}%\n+  \\setbox\\footlinebox = \\vbox{\\let\\hsize=\\pagewidth \\makefootline}%\n+  %\n   {%\n+    % Have to do this stuff outside the \\shipout because we want it to\n+    % take effect in \\write's, yet the group defined by the \\vbox ends\n+    % before the \\shipout runs.\n+    %\n     \\escapechar = `\\\\     % use backslash in output files.\n     \\indexdummies         % don't expand commands in the output.\n     \\normalturnoffactive  % \\ in index entries must not stay \\, e.g., if\n                    % the page break happens to be in the middle of an example.\n     \\shipout\\vbox{%\n-      {\\let\\hsize=\\pagewidth \\makeheadline}%\n+      \\unvbox\\headlinebox\n       \\pagebody{#1}%\n-      {\\let\\hsize=\\pagewidth \\makefootline}%\n+      \\unvbox\\footlinebox\n+    }%\n     }%\n-  }%\n   \\advancepageno\n   \\ifnum\\outputpenalty>-20000 \\else\\dosupereject\\fi\n }\n@@ -2045,7 +2060,10 @@\n  % The table preamble\n  % looks at the current \\colcount to find the correct column width.\n \\global\\everycr{\\noalign{%\n-\\filbreak%% keeps underfull box messages off when table breaks over pages.\n+% \\filbreak%% keeps underfull box messages off when table breaks over pages.\n+% Maybe so, but it also creates really weird page breaks when the table\n+% breaks over pages Wouldn't \\vfil be better?  Wait until the problem\n+% manifests itself, so it can be fixed for real --karl.\n \\global\\colcount=0\\relax}}\n }\n \n@@ -2299,7 +2317,7 @@\n       \\indexdummies % Must do this here, since \\bf, etc expand at this stage\n       \\escapechar=`\\\\\n       {%\n-        \\let\\folio=0 % We will expand all macros now EXCEPT \\folio.\n+        \\let\\folio=0% We will expand all macros now EXCEPT \\folio.\n         \\def\\rawbackslashxx{\\indexbackslash}% \\indexbackslash isn't defined now\n         % so it will be output as is; and it will print as backslash.\n         %"}]}