{"sha": "833bbf60ce6414801d3a381a2a4b1f244bd0d969", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODMzYmJmNjBjZTY0MTQ4MDFkM2EzODFhMmE0YjFmMjQ0YmQwZDk2OQ==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2017-04-04T00:10:02Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2017-04-04T00:10:02Z"}, "message": "simplify-rtx: Fix compare of comparisons (PR60818)\n\nThe function simplify_binary_operation_1 has code that does\n/* Convert (compare (gt (flags) 0) (lt (flags) 0)) to (flags).  */\nbut this transformation is only valid if \"flags\" has the same machine\nmode as the outer compare.  This fixes it.\n\n\n\tPR rtl-optimization/60818\n\t* simplify-rtx.c (simplify_binary_operation_1): Do not replace\n\ta compare of comparisons with the thing compared if this results\n\tin a different machine mode.\n\ngcc/testsuite/\n\tPR rtl-optimization/60818\n\t* gcc.c-torture/compile/pr60818.c: New testcase.\n\nFrom-SVN: r246666", "tree": {"sha": "00a63283331bcb8c6dec0cee8f6b8600a0a657bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00a63283331bcb8c6dec0cee8f6b8600a0a657bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/833bbf60ce6414801d3a381a2a4b1f244bd0d969", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/833bbf60ce6414801d3a381a2a4b1f244bd0d969", "html_url": "https://github.com/Rust-GCC/gccrs/commit/833bbf60ce6414801d3a381a2a4b1f244bd0d969", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/833bbf60ce6414801d3a381a2a4b1f244bd0d969/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5764ee3c8491e3ecff855a319f781a66fca2484e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5764ee3c8491e3ecff855a319f781a66fca2484e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5764ee3c8491e3ecff855a319f781a66fca2484e"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "4d113af985d293e5282966defc40e166b328290e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=833bbf60ce6414801d3a381a2a4b1f244bd0d969", "patch": "@@ -1,3 +1,10 @@\n+2017-04-04  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\tPR rtl-optimization/60818\n+\t* simplify-rtx.c (simplify_binary_operation_1): Do not replace\n+\ta compare of comparisons with the thing compared if this results\n+\tin a different machine mode.\n+\n 2017-04-03  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* alias.c (base_alias_check): Fix typo in comment."}, {"sha": "cff7e4d3e3f15a9ecda18e8396c82d5b8b76710e", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=833bbf60ce6414801d3a381a2a4b1f244bd0d969", "patch": "@@ -2306,10 +2306,10 @@ simplify_binary_operation_1 (enum rtx_code code, machine_mode mode,\n \t      return xop00;\n \n \t    if (REG_P (xop00) && REG_P (xop10)\n-\t\t&& GET_MODE (xop00) == GET_MODE (xop10)\n \t\t&& REGNO (xop00) == REGNO (xop10)\n-\t\t&& GET_MODE_CLASS (GET_MODE (xop00)) == MODE_CC\n-\t\t&& GET_MODE_CLASS (GET_MODE (xop10)) == MODE_CC)\n+\t\t&& GET_MODE (xop00) == mode\n+\t\t&& GET_MODE (xop10) == mode\n+\t\t&& GET_MODE_CLASS (mode) == MODE_CC)\n \t      return xop00;\n \t}\n       break;"}, {"sha": "9ac0c0b8dc985e4eb6126d40b6e18acb9b2c2d50", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=833bbf60ce6414801d3a381a2a4b1f244bd0d969", "patch": "@@ -1,3 +1,8 @@\n+2017-04-04  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\tPR rtl-optimization/60818\n+\t* gcc.c-torture/compile/pr60818.c: New testcase.\n+\n 2017-04-03  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* g++.old-deja/g++.benjamin/scope02.C: Fix typo in comment."}, {"sha": "b6171bbcdf08129c30e1da7e07804df959526991", "filename": "gcc/testsuite/gcc.c-torture/compile/pr60818.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr60818.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/833bbf60ce6414801d3a381a2a4b1f244bd0d969/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr60818.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr60818.c?ref=833bbf60ce6414801d3a381a2a4b1f244bd0d969", "patch": "@@ -0,0 +1,5 @@\n+int\n+lx (int oi, int mb)\n+{\n+  return (oi < mb) < (mb < oi);\n+}"}]}