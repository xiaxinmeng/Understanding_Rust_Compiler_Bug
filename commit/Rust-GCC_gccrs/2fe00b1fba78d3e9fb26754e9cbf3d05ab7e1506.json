{"sha": "2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmZlMDBiMWZiYTc4ZDNlOWZiMjY3NTRlOWNiZjNkMDVhYjdlMTUwNg==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-06-13T21:07:18Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-06-13T21:07:18Z"}, "message": "pretty-print.c: skip color selftests if GCC_COLORS is set\n\ngcc/ChangeLog:\n\t* pretty-print.c (assert_pp_format_colored): Skip the test if\n\tGCC_COLORS is set.\n\t(test_pp_format): Remove comment about GCC_COLORS.\n\nFrom-SVN: r237411", "tree": {"sha": "9787c70e1e33fe0b896403313a0858f2ab27b746", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9787c70e1e33fe0b896403313a0858f2ab27b746"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "09765e3a0a8be2f7bca694a1171ecf050f5400d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09765e3a0a8be2f7bca694a1171ecf050f5400d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09765e3a0a8be2f7bca694a1171ecf050f5400d1"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "cfad51813b03353f7d371269105a1487f5a69238", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506", "patch": "@@ -1,3 +1,9 @@\n+2016-06-13  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* pretty-print.c (assert_pp_format_colored): Skip the test if\n+\tGCC_COLORS is set.\n+\t(test_pp_format): Remove comment about GCC_COLORS.\n+\n 2016-06-13  David Malcolm  <dmalcolm@redhat.com>\n \n \t* input.c (test_reading_source_line): Use SELFTEST_LOCATION."}, {"sha": "325263efd6a53507ca45a368d1cbd4641284bbf1", "filename": "gcc/pretty-print.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506/gcc%2Fpretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506/gcc%2Fpretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpretty-print.c?ref=2fe00b1fba78d3e9fb26754e9cbf3d05ab7e1506", "patch": "@@ -1266,6 +1266,12 @@ static void\n assert_pp_format_colored (const location &loc, const char *expected,\n \t\t\t  const char *fmt, ...)\n {\n+  /* The tests of colorization assume the default color scheme.\n+     If GCC_COLORS is set, then the colors have potentially been\n+     overridden; skip the test.  */\n+  if (getenv (\"GCC_COLORS\"))\n+    return;\n+\n   va_list ap;\n \n   va_start (ap, fmt);\n@@ -1347,7 +1353,6 @@ test_pp_format ()\n   ASSERT_PP_FORMAT_2 (\"normal colored normal 12345678\",\n \t\t      \"normal %rcolored%R normal %x\",\n \t\t      \"error\", 0x12345678);\n-  /* The following assumes an empty value for GCC_COLORS.  */\n   assert_pp_format_colored\n     (SELFTEST_LOCATION,\n      \"normal \\33[01;31m\\33[Kcolored\\33[m\\33[K normal 12345678\","}]}