{"sha": "73ed196896673dd1e48aa1d3a7f69c514de43adc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNlZDE5Njg5NjY3M2RkMWU0OGFhMWQzYTdmNjljNTE0ZGU0M2FkYw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2007-07-04T17:34:16Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2007-07-04T17:34:16Z"}, "message": "visibility-12.c: New test.\n\n\t* gcc.dg/visibility-12.c: New test.\n\t* gcc.dg/visibility-13.c: Likewise.\n\t* g++.dg/ext/visibility-9.C: Likewise.\n\t* g++.dg/ext/visibility-10.C: Likewise.\n\nFrom-SVN: r126330", "tree": {"sha": "74d04107006b6d2b30d4215b80ab88ab26b52661", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74d04107006b6d2b30d4215b80ab88ab26b52661"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73ed196896673dd1e48aa1d3a7f69c514de43adc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73ed196896673dd1e48aa1d3a7f69c514de43adc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73ed196896673dd1e48aa1d3a7f69c514de43adc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73ed196896673dd1e48aa1d3a7f69c514de43adc/comments", "author": null, "committer": null, "parents": [{"sha": "121f163f349a3391fa6b5b2de804b0006bde074e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/121f163f349a3391fa6b5b2de804b0006bde074e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/121f163f349a3391fa6b5b2de804b0006bde074e"}], "stats": {"total": 91, "additions": 84, "deletions": 7}, "files": [{"sha": "63aedcb4b6aae893184b24acf0fd7e6f3f5ba1e7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=73ed196896673dd1e48aa1d3a7f69c514de43adc", "patch": "@@ -1,3 +1,10 @@\n+2007-07-04  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* gcc.dg/visibility-12.c: New test.\n+\t* gcc.dg/visibility-13.c: Likewise.\n+\t* g++.dg/ext/visibility-9.C: Likewise.\n+\t* g++.dg/ext/visibility-10.C: Likewise.\n+\n 2007-07-04  Richard Sandiford  <richard@codesourcery.com>\n \n \t* gcc.dg/sh-relax.c: Skip for VxWorks if non-PIC.\n@@ -462,13 +469,6 @@\n \tPR fortran/32298\n \t* gfortran.dg/minmaxloc_2.f90: New test.\n \n-2007-06-23  Mark Mitchell  <mark@codesourcery.com>\n-\n-\t* gcc.dg/visibility-12.c: New test.\n-\t* gcc.dg/visibility-13.c: Likewise.\n-\t* g++.dg/ext/visibility-9.C: Likewise.\n-\t* g++.dg/ext/visibility-10.C: Likewise.\n-\n 2007-06-23  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/16876"}, {"sha": "312d323092f990f54e7293147aa2bc41efafce43", "filename": "gcc/testsuite/g++.dg/ext/visibility/visibility-10.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fvisibility-10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fvisibility-10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fvisibility-10.C?ref=73ed196896673dd1e48aa1d3a7f69c514de43adc", "patch": "@@ -0,0 +1,19 @@\n+// { dg-require-visibility \"\" }\n+// { dg-require-dll \"\" }\n+\n+extern void __attribute__((dllimport, visibility(\"hidden\"))) \n+  f1(); // { dg-error \"visibility\" }\n+extern void __attribute__((visibility(\"hidden\"), dllimport)) \n+  f2(); // { dg-error \"visibility\" }\n+extern void __attribute__((dllexport, visibility(\"hidden\"))) \n+  f3(); // { dg-error \"visibility\" }\n+extern void __attribute__((visibility(\"hidden\"), dllexport)) \n+  f4(); // { dg-error \"visibility\" }\n+extern void __attribute__((visibility(\"default\"), dllimport))\n+  f5();\n+extern void __attribute__((dllimport, visibility(\"default\")))\n+  f6();\n+extern void __attribute__((visibility(\"default\"), dllexport))\n+  f7();\n+extern void __attribute__((dllexport, visibility(\"default\")))\n+  f8();"}, {"sha": "06b5a17e9425e5f46a5c4394fef7b8a68eaf832d", "filename": "gcc/testsuite/g++.dg/ext/visibility/visibility-9.C", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fvisibility-9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fvisibility-9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fvisibility-9.C?ref=73ed196896673dd1e48aa1d3a7f69c514de43adc", "patch": "@@ -0,0 +1,29 @@\n+// Test that dllimport'd functions have default visibility.\n+// { dg-require-visibility \"\" }\n+// { dg-require-dll \"\" }\n+// { dg-options \"-fvisibility=hidden\" }\n+// { dg-final { scan-not-hidden \"_Z2f1v\" } }\n+// { dg-final { scan-not-hidden \"_ZN1S2f3Ev\" } }\n+\n+extern void  __attribute__((dllimport)) f1();\n+void f2() {\n+  f1();\n+}\n+\n+struct __attribute__((visibility(\"hidden\")) S1 {\n+  __attribute__((dllimport)) void f3();\n+};\n+\n+void f4() {\n+  S1 s1;\n+  s1.f3();\n+}\n+\n+struct S2 {\n+  __attribute__((dllimport)) void f5();\n+};\n+\n+void f6() {\n+  S2 s2;\n+  s2.f5();\n+}"}, {"sha": "6012bd9ce243655a258d5d960c6a740185b74563", "filename": "gcc/testsuite/gcc.dg/visibility-12.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-12.c?ref=73ed196896673dd1e48aa1d3a7f69c514de43adc", "patch": "@@ -0,0 +1,10 @@\n+/* Test that dllimport'd functions have default visibility.  */\n+/* { dg-require-visibility \"\" } */\n+/* { dg-require-dll \"\" } */\n+/* { dg-options \"-fvisibility=hidden\" } */\n+/* { dg-final { scan-not-hidden \"f1\" } } */\n+\n+extern void  __attribute__((dllimport)) f1();\n+void f2() {\n+  f1();\n+}"}, {"sha": "5f7a7c7a0d878c878de50d990908aadfdf8cccfa", "filename": "gcc/testsuite/gcc.dg/visibility-13.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ed196896673dd1e48aa1d3a7f69c514de43adc/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-13.c?ref=73ed196896673dd1e48aa1d3a7f69c514de43adc", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-require-visibility \"\" } */\n+/* { dg-require-dll \"\" } */\n+\n+extern void __attribute__((dllimport, visibility(\"hidden\"))) \n+  f1(); /* { dg-error \"visibility\" } */\n+extern void __attribute__((visibility(\"hidden\"), dllimport)) \n+  f2(); /* { dg-error \"visibility\" } */\n+extern void __attribute__((dllexport, visibility(\"hidden\"))) \n+  f3(); /* { dg-error \"visibility\" } */\n+extern void __attribute__((visibility(\"hidden\"), dllexport)) \n+  f4(); /* { dg-error \"visibility\" } */\n+extern void __attribute__((visibility(\"default\"), dllimport))\n+  f5();\n+extern void __attribute__((dllimport, visibility(\"default\")))\n+  f6();\n+extern void __attribute__((visibility(\"default\"), dllexport))\n+  f7();\n+extern void __attribute__((dllexport, visibility(\"default\")))\n+  f8();"}]}