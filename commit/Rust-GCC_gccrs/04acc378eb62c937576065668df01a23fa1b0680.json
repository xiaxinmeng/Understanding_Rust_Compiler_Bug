{"sha": "04acc378eb62c937576065668df01a23fa1b0680", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRhY2MzNzhlYjYyYzkzNzU3NjA2NTY2OGRmMDFhMjNmYTFiMDY4MA==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2018-03-28T05:04:59Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2018-03-28T05:04:59Z"}, "message": "[PR c++/84968] reject stmt-exprs in noexcept constexprs\n\nWe reject extended statement-expressions in template parameters, so we\nmight as well reject them in constant expressions used in noexcept\nspecifications.\n\nfor  gcc/cp/ChangeLog\n\n\tPR c++/84968\n\t* tree.c (strip_typedefs_expr): Reject STATEMENT_LISTs.\n\nfor  gcc/testsuite/ChangeLog\n\n\tPR c++/84968\n\t* g++.dg/eh/pr84968.C: New.\n\nFrom-SVN: r258913", "tree": {"sha": "9e4b8e9b591e3fc6fa33009cf0b2beb51acb5653", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e4b8e9b591e3fc6fa33009cf0b2beb51acb5653"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04acc378eb62c937576065668df01a23fa1b0680", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04acc378eb62c937576065668df01a23fa1b0680", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04acc378eb62c937576065668df01a23fa1b0680", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04acc378eb62c937576065668df01a23fa1b0680/comments", "author": null, "committer": null, "parents": [{"sha": "d80bb039e612192f7eab8fec30f6b6239f4539a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d80bb039e612192f7eab8fec30f6b6239f4539a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d80bb039e612192f7eab8fec30f6b6239f4539a3"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "23f5d3a7e1b6be2b97f93f5f87df5c0d8e993c60", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=04acc378eb62c937576065668df01a23fa1b0680", "patch": "@@ -1,3 +1,8 @@\n+2018-03-28  Alexandre Oliva <aoliva@redhat.com>\n+\n+\tPR c++/84968\n+\t* tree.c (strip_typedefs_expr): Reject STATEMENT_LISTs.\n+\n 2018-03-27  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/85067"}, {"sha": "e75c88d6e8f8d8375e5fc214a6d5d2efd69da4e4", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=04acc378eb62c937576065668df01a23fa1b0680", "patch": "@@ -1788,6 +1788,10 @@ strip_typedefs_expr (tree t, bool *remove_attributes)\n       error (\"lambda-expression in a constant expression\");\n       return error_mark_node;\n \n+    case STATEMENT_LIST:\n+      error (\"statement-expression in a constant expression\");\n+      return error_mark_node;\n+\n     default:\n       break;\n     }"}, {"sha": "929d4dd575ad050d14714e0b9ccbb064933695f5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=04acc378eb62c937576065668df01a23fa1b0680", "patch": "@@ -1,3 +1,8 @@\n+2018-03-28  Alexandre Oliva <aoliva@redhat.com>\n+\n+\tPR c++/84968\n+\t* g++.dg/eh/pr84968.C: New.\n+\n 2018-03-27  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/84914"}, {"sha": "23c49f477a8855a4cb2e111a1705f673654b834f", "filename": "gcc/testsuite/g++.dg/eh/pr84968.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fpr84968.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04acc378eb62c937576065668df01a23fa1b0680/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fpr84968.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fpr84968.C?ref=04acc378eb62c937576065668df01a23fa1b0680", "patch": "@@ -0,0 +1,15 @@\n+// { dg-do compile { target c++11 } }\n+\n+// { dg-options \"\" }\n+\n+union b;\n+\n+struct S {\n+  template <typename>\n+  void a()\n+    try {\n+    } catch (int ()\n+\t     noexcept (({ union b a; true; }))) // { dg-error \"constant\" }\n+  {\n+  }\n+};"}]}