{"sha": "5034b7bd856d65dff1d8701877e64d3b773c835d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTAzNGI3YmQ4NTZkNjVkZmYxZDg3MDE4NzdlNjRkM2I3NzNjODM1ZA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1996-06-08T22:38:52Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1996-06-08T22:38:52Z"}, "message": "(override_options): Add vr4100 and vr4300 support.\n\nFrom-SVN: r12248", "tree": {"sha": "bf9e6f634e2a2cacbe7543e6fb8505809a2bddb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bf9e6f634e2a2cacbe7543e6fb8505809a2bddb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5034b7bd856d65dff1d8701877e64d3b773c835d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5034b7bd856d65dff1d8701877e64d3b773c835d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5034b7bd856d65dff1d8701877e64d3b773c835d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5034b7bd856d65dff1d8701877e64d3b773c835d/comments", "author": null, "committer": null, "parents": [{"sha": "03b28f881b5eb9bd943fe079e3850c586529eb64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03b28f881b5eb9bd943fe079e3850c586529eb64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03b28f881b5eb9bd943fe079e3850c586529eb64"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "783d93cae9976b6bab87e698b4969203269014af", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5034b7bd856d65dff1d8701877e64d3b773c835d/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5034b7bd856d65dff1d8701877e64d3b773c835d/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=5034b7bd856d65dff1d8701877e64d3b773c835d", "patch": "@@ -3290,7 +3290,15 @@ override_options ()\n   else\n     {\n       char *p = mips_cpu_string;\n+      int seen_v = FALSE;\n \n+      /* We need to cope with the various \"vr\" prefixes for the NEC 4300\n+\t and 4100 processors.  */\n+      if (*p == 'v' || *p == 'V')\n+\t{\n+\t  seen_v = TRUE;\n+\t  p++;\n+        }\n       if (*p == 'r' || *p == 'R')\n \tp++;\n \n@@ -3313,6 +3321,16 @@ override_options ()\n \tcase '4':\n \t  if (!strcmp (p, \"4000\") || !strcmp (p, \"4k\") || !strcmp (p, \"4K\"))\n \t    mips_cpu = PROCESSOR_R4000;\n+          /* The vr4100 is a non-FP ISA III processor with some extra\n+             instructions.  */\n+\t  else if (!strcmp (p, \"4100\")) {\n+            mips_cpu = PROCESSOR_R4100;\n+            target_flags |= MASK_SOFT_FLOAT ;\n+          }\n+\t  /* The vr4300 is a standard ISA III processor, but with a different\n+\t     pipeline.  */\n+\t  else if (!strcmp (p, \"4300\"))\n+            mips_cpu = PROCESSOR_R4300;\n \t  /* The r4400 is exactly the same as the r4000 from the compiler's\n \t     viewpoint.  */\n \t  else if (!strcmp (p, \"4400\"))\n@@ -3339,6 +3357,9 @@ override_options ()\n \t  break;\n \t}\n \n+      if (seen_v && mips_cpu != PROCESSOR_R4300 && mips_cpu != PROCESSOR_R4100)\n+\tmips_cpu = PROCESSOR_DEFAULT;\n+\n       if (mips_cpu == PROCESSOR_DEFAULT)\n \t{\n \t  error (\"bad value (%s) for -mcpu= switch\", mips_cpu_string);\n@@ -3349,6 +3370,8 @@ override_options ()\n   if ((mips_cpu == PROCESSOR_R3000 && mips_isa > 1)\n       || (mips_cpu == PROCESSOR_R6000 && mips_isa > 2)\n       || ((mips_cpu == PROCESSOR_R4000\n+           || mips_cpu == PROCESSOR_R4100\n+           || mips_cpu == PROCESSOR_R4300\n \t   || mips_cpu == PROCESSOR_R4600\n \t   || mips_cpu == PROCESSOR_R4650)\n \t  && mips_isa > 3))"}]}