{"sha": "566f42273467817a31a7a1ae058ba759837eec22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY2ZjQyMjczNDY3ODE3YTMxYTdhMWFlMDU4YmE3NTk4MzdlZWMyMg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-07-31T18:58:02Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-07-31T18:58:02Z"}, "message": "libstdc++: Use c++NN_only effective target to tests\n\nSome tests really are only intended for a specific -std mode, so add a\ntarget selector to make that explicit.\n\nAlso reorder the dg-do directives to come after the dg-options ones, so\nthat the target selector in the dg-do directive is applied after the\ndg-options that sets the -std option.\n\nlibstdc++-v3/ChangeLog:\n\n\t* testsuite/20_util/reference_wrapper/83427.cc: Adjust\n\teffective-target to specific language mode only.\n\t* testsuite/24_iterators/headers/iterator/range_access_c++11.cc:\n\tLikewise.\n\t* testsuite/24_iterators/headers/iterator/range_access_c++14.cc:\n\tLikewise.\n\t* testsuite/24_iterators/headers/iterator/synopsis_c++11.cc:\n\tLikewise.\n\t* testsuite/24_iterators/headers/iterator/synopsis_c++14.cc:\n\tLikewise.\n\t* testsuite/26_numerics/valarray/69116.cc:\n\tLikewise.\n\t* testsuite/30_threads/headers/condition_variable/std_c++0x_neg.cc:\n\tRemove whitespace at end of file.\n\t* testsuite/30_threads/headers/future/std_c++0x_neg.cc:\n\tLikewise.", "tree": {"sha": "3ac17e14b7337954ca02a656f96f2ea75b9751ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ac17e14b7337954ca02a656f96f2ea75b9751ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/566f42273467817a31a7a1ae058ba759837eec22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/566f42273467817a31a7a1ae058ba759837eec22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/566f42273467817a31a7a1ae058ba759837eec22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/566f42273467817a31a7a1ae058ba759837eec22/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6458742a15f899a7d4e7c57bc649119e8f7aa086", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6458742a15f899a7d4e7c57bc649119e8f7aa086", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6458742a15f899a7d4e7c57bc649119e8f7aa086"}], "stats": {"total": 18, "additions": 6, "deletions": 12}, "files": [{"sha": "613da848d72eae92a2b4718016f75af2a0fb2d59", "filename": "libstdc++-v3/testsuite/20_util/reference_wrapper/83427.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Freference_wrapper%2F83427.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Freference_wrapper%2F83427.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Freference_wrapper%2F83427.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -16,7 +16,7 @@\n // <http://www.gnu.org/licenses/>.\n \n // { dg-options \"-std=gnu++17\" }\n-// { dg-do compile { target c++17 } }\n+// { dg-do compile { target c++17_only } }\n \n #include <functional>\n "}, {"sha": "099288716e3fe31a24096eabfbc13968d198c422", "filename": "libstdc++-v3/testsuite/24_iterators/headers/iterator/range_access_c++11.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Frange_access_c%2B%2B11.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Frange_access_c%2B%2B11.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Frange_access_c%2B%2B11.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -1,5 +1,5 @@\n // { dg-options \"-std=gnu++11\" }\n-// { dg-do compile }\n+// { dg-do compile { target c++11_only } }\n \n // Copyright (C) 2010-2020 Free Software Foundation, Inc.\n //"}, {"sha": "f5923386b79544661c3a3713420fbee23b6d22fa", "filename": "libstdc++-v3/testsuite/24_iterators/headers/iterator/range_access_c++14.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Frange_access_c%2B%2B14.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Frange_access_c%2B%2B14.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Frange_access_c%2B%2B14.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -1,5 +1,5 @@\n // { dg-options \"-std=gnu++14\" }\n-// { dg-do compile }\n+// { dg-do compile { target c++14_only } }\n \n // Copyright (C) 2016-2020 Free Software Foundation, Inc.\n //"}, {"sha": "1fd115abd87b3f90cfdb3bdba63c712f10a69819", "filename": "libstdc++-v3/testsuite/24_iterators/headers/iterator/synopsis_c++11.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Fsynopsis_c%2B%2B11.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Fsynopsis_c%2B%2B11.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Fsynopsis_c%2B%2B11.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -1,5 +1,5 @@\n // { dg-options \"-std=gnu++11\" }\n-// { dg-do compile }\n+// { dg-do compile { target c++11_only } }\n // { dg-require-normal-namespace \"\" }\n \n // Copyright (C) 2016-2020 Free Software Foundation, Inc."}, {"sha": "f296c852e7684b837e447024875fe0d3249967f6", "filename": "libstdc++-v3/testsuite/24_iterators/headers/iterator/synopsis_c++14.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Fsynopsis_c%2B%2B14.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Fsynopsis_c%2B%2B14.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fheaders%2Fiterator%2Fsynopsis_c%2B%2B14.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -1,5 +1,5 @@\n // { dg-options \"-std=gnu++14\" }\n-// { dg-do compile }\n+// { dg-do compile { target c++14_only } }\n // { dg-require-normal-namespace \"\" }\n \n // Copyright (C) 2016-2020 Free Software Foundation, Inc."}, {"sha": "579c01cb37d379d716646482d82f1e843026487a", "filename": "libstdc++-v3/testsuite/26_numerics/valarray/69116.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fvalarray%2F69116.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fvalarray%2F69116.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fvalarray%2F69116.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -15,8 +15,8 @@\n // with this library; see the file COPYING3.  If not see\n // <http://www.gnu.org/licenses/>.\n \n-// { dg-do compile }\n // { dg-options \"-std=gnu++98\" }\n+// { dg-do compile { target c++98_only } }\n \n // libstdc++/69116\n "}, {"sha": "45a0c74a9f7b2c94319b7357380b5c4254110c36", "filename": "libstdc++-v3/testsuite/30_threads/headers/condition_variable/std_c++0x_neg.cc", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Fcondition_variable%2Fstd_c%2B%2B0x_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Fcondition_variable%2Fstd_c%2B%2B0x_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Fcondition_variable%2Fstd_c%2B%2B0x_neg.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -21,6 +21,3 @@\n #include <condition_variable>\n \n // { dg-error \"ISO C.. 2011\" \"\" { target *-*-* } 32 }\n-\n-\n-"}, {"sha": "c67214e4b2100df55856be62321163bf8540ccfe", "filename": "libstdc++-v3/testsuite/30_threads/headers/future/std_c++0x_neg.cc", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Ffuture%2Fstd_c%2B%2B0x_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/566f42273467817a31a7a1ae058ba759837eec22/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Ffuture%2Fstd_c%2B%2B0x_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Ffuture%2Fstd_c%2B%2B0x_neg.cc?ref=566f42273467817a31a7a1ae058ba759837eec22", "patch": "@@ -21,6 +21,3 @@\n #include <future>\n \n // { dg-error \"ISO C.. 2011\" \"\" { target *-*-* } 32 }\n-\n-\n-"}]}