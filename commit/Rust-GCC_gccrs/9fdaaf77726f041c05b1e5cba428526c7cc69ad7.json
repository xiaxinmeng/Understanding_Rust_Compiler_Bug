{"sha": "9fdaaf77726f041c05b1e5cba428526c7cc69ad7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWZkYWFmNzc3MjZmMDQxYzA1YjFlNWNiYTQyODUyNmM3Y2M2OWFkNw==", "commit": {"author": {"name": "Qing Zhao", "email": "qing.zhao@oracle.com", "date": "2019-10-23T18:12:39Z"}, "committer": {"name": "Qing Zhao", "email": "qinzhao@gcc.gnu.org", "date": "2019-10-23T18:12:39Z"}, "message": "re PR gcov-profile/91971 (Profile directory concatenated with object file path)\n\n2019-10-23  qing zhao  <qing.zhao@oracle.com>\n\n\tPR gcov-profile/91971\n\t* coverage.c (coverage_init): Mangle the full path of filename when\n\tfilename is a absolute path.\n\nFrom-SVN: r277344", "tree": {"sha": "c49b669b88bf8da74b15fc4ae34b704a40204358", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c49b669b88bf8da74b15fc4ae34b704a40204358"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9fdaaf77726f041c05b1e5cba428526c7cc69ad7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fdaaf77726f041c05b1e5cba428526c7cc69ad7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fdaaf77726f041c05b1e5cba428526c7cc69ad7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fdaaf77726f041c05b1e5cba428526c7cc69ad7/comments", "author": {"login": "qingzhao69", "id": 89154636, "node_id": "MDQ6VXNlcjg5MTU0NjM2", "avatar_url": "https://avatars.githubusercontent.com/u/89154636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qingzhao69", "html_url": "https://github.com/qingzhao69", "followers_url": "https://api.github.com/users/qingzhao69/followers", "following_url": "https://api.github.com/users/qingzhao69/following{/other_user}", "gists_url": "https://api.github.com/users/qingzhao69/gists{/gist_id}", "starred_url": "https://api.github.com/users/qingzhao69/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qingzhao69/subscriptions", "organizations_url": "https://api.github.com/users/qingzhao69/orgs", "repos_url": "https://api.github.com/users/qingzhao69/repos", "events_url": "https://api.github.com/users/qingzhao69/events{/privacy}", "received_events_url": "https://api.github.com/users/qingzhao69/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6d188e4fddff68f4c50f8178104137f71d4c621e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d188e4fddff68f4c50f8178104137f71d4c621e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d188e4fddff68f4c50f8178104137f71d4c621e"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "e1a4213ddddffb266fdbf839a4cf8cbe27085f79", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fdaaf77726f041c05b1e5cba428526c7cc69ad7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fdaaf77726f041c05b1e5cba428526c7cc69ad7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9fdaaf77726f041c05b1e5cba428526c7cc69ad7", "patch": "@@ -1,3 +1,9 @@\n+2019-10-23  qing zhao  <qing.zhao@oracle.com>\n+\n+\tPR gcov-profile/91971\n+\t* coverage.c (coverage_init): Mangle the full path of filename when\n+\tfilename is a absolute path.\n+\n 2019-10-23  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n \n \t* config/msp430/msp430-protos.h (msp430_has_hwmult): New."}, {"sha": "bcba61c9a9affbed6aca79e63bcfaafcdd7418ba", "filename": "gcc/coverage.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fdaaf77726f041c05b1e5cba428526c7cc69ad7/gcc%2Fcoverage.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fdaaf77726f041c05b1e5cba428526c7cc69ad7/gcc%2Fcoverage.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoverage.c?ref=9fdaaf77726f041c05b1e5cba428526c7cc69ad7", "patch": "@@ -1229,6 +1229,14 @@ coverage_init (const char *filename)\n       else\n \tprofile_data_prefix = getpwd ();\n     }\n+  else\n+    {\n+      /* when filename is a absolute path, we also need to mangle the full\n+      path of filename to prevent the profiling data being stored into a\n+      different path than that specified by profile_data_prefix.  */\n+      filename = mangle_path (filename);\n+      len = strlen (filename);\n+    }\n \n   if (profile_data_prefix)\n     prefix_len = strlen (profile_data_prefix);"}]}