{"sha": "b34b1c343600f7587213dafee5e305a8e4000132", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjM0YjFjMzQzNjAwZjc1ODcyMTNkYWZlZTVlMzA1YThlNDAwMDEzMg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2016-01-11T12:33:25Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2016-01-11T12:33:25Z"}, "message": "Remove snprintf from <avx512>_(load|store)<mode>_mask\n\nThis patch removes snprintf from <avx512>_(load|store)<mode>_mask\npatterns.\n\n\t* config/i386/sse.md (<avx512>_load<mode>_mask): Remove\n\tsnprintf.\n\t(<avx512>_store<mode>_mask): Likewise.\n\nFrom-SVN: r232225", "tree": {"sha": "0299b94d12627fc1a244b3813e134531b9192d6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0299b94d12627fc1a244b3813e134531b9192d6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b34b1c343600f7587213dafee5e305a8e4000132", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b34b1c343600f7587213dafee5e305a8e4000132", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b34b1c343600f7587213dafee5e305a8e4000132", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b34b1c343600f7587213dafee5e305a8e4000132/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5baf45323b70abe259bffc89425e9f0155a1a7a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5baf45323b70abe259bffc89425e9f0155a1a7a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5baf45323b70abe259bffc89425e9f0155a1a7a3"}], "stats": {"total": 58, "additions": 22, "deletions": 36}, "files": [{"sha": "ffe643e6084da50c45c1c75472c36803b09b6610", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b34b1c343600f7587213dafee5e305a8e4000132/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b34b1c343600f7587213dafee5e305a8e4000132/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b34b1c343600f7587213dafee5e305a8e4000132", "patch": "@@ -1,3 +1,9 @@\n+2016-01-11  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config/i386/sse.md (<avx512>_load<mode>_mask): Remove\n+\tsnprintf.\n+\t(<avx512>_store<mode>_mask): Likewise.\n+\n 2016-01-11  Bernd Schmidt  <bschmidt@redhat.com>\n             Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n "}, {"sha": "c8e2150a14d855fad5e0cc447477e47c345ed573", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 16, "deletions": 36, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b34b1c343600f7587213dafee5e305a8e4000132/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b34b1c343600f7587213dafee5e305a8e4000132/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=b34b1c343600f7587213dafee5e305a8e4000132", "patch": "@@ -960,30 +960,20 @@\n \t  (match_operand:<avx512fmaskmode> 3 \"register_operand\" \"Yk,Yk\")))]\n   \"TARGET_AVX512F\"\n {\n-  static char buf [64];\n-\n-  const char *insn_op;\n-  const char *sse_suffix;\n-  const char *align;\n   if (FLOAT_MODE_P (GET_MODE_INNER (<MODE>mode)))\n     {\n-      insn_op = \"vmov\";\n-      sse_suffix = \"<ssemodesuffix>\";\n+      if (misaligned_operand (operands[1], <MODE>mode))\n+\treturn \"vmovu<ssemodesuffix>\\t{%1, %0%{%3%}%N2|%0%{%3%}%N2, %1}\";\n+      else\n+\treturn \"vmova<ssemodesuffix>\\t{%1, %0%{%3%}%N2|%0%{%3%}%N2, %1}\";\n     }\n   else\n     {\n-      insn_op = \"vmovdq\";\n-      sse_suffix = \"<ssescalarsize>\";\n+      if (misaligned_operand (operands[1], <MODE>mode))\n+\treturn \"vmovdqu<ssescalarsize>\\t{%1, %0%{%3%}%N2|%0%{%3%}%N2, %1}\";\n+      else\n+\treturn \"vmovdqa<ssescalarsize>\\t{%1, %0%{%3%}%N2|%0%{%3%}%N2, %1}\";\n     }\n-\n-  if (misaligned_operand (operands[1], <MODE>mode))\n-    align = \"u\";\n-  else\n-    align = \"a\";\n-\n-  snprintf (buf, sizeof (buf), \"%s%s%s\\t{%%1, %%0%%{%%3%%}%%N2|%%0%%{%%3%%}%%N2, %%1}\",\n-\t    insn_op, align, sse_suffix);\n-  return buf;\n }\n   [(set_attr \"type\" \"ssemov\")\n    (set_attr \"prefix\" \"evex\")\n@@ -1035,30 +1025,20 @@\n \t  (match_operand:<avx512fmaskmode> 2 \"register_operand\" \"Yk\")))]\n   \"TARGET_AVX512F\"\n {\n-  static char buf [64];\n-\n-  const char *insn_op;\n-  const char *sse_suffix;\n-  const char *align;\n   if (FLOAT_MODE_P (GET_MODE_INNER (<MODE>mode)))\n     {\n-      insn_op = \"vmov\";\n-      sse_suffix = \"<ssemodesuffix>\";\n+      if (misaligned_operand (operands[0], <MODE>mode))\n+\treturn \"vmovu<ssemodesuffix>\\t{%1, %0%{%2%}|%0%{%2%}, %1}\";\n+      else\n+\treturn \"vmova<ssemodesuffix>\\t{%1, %0%{%2%}|%0%{%2%}, %1}\";\n     }\n   else\n     {\n-      insn_op = \"vmovdq\";\n-      sse_suffix = \"<ssescalarsize>\";\n+      if (misaligned_operand (operands[0], <MODE>mode))\n+\treturn \"vmovdqu<ssescalarsize>\\t{%1, %0%{%2%}|%0%{%2%}, %1}\";\n+      else\n+\treturn \"vmovdqa<ssescalarsize>\\t{%1, %0%{%2%}|%0%{%2%}, %1}\";\n     }\n-\n-  if (misaligned_operand (operands[0], <MODE>mode))\n-    align = \"u\";\n-  else\n-    align = \"a\";\n-\n-  snprintf (buf, sizeof (buf), \"%s%s%s\\t{%%1, %%0%%{%%2%%}|%%0%%{%%2%%}, %%1}\",\n-\t    insn_op, align, sse_suffix);\n-  return buf;\n }\n   [(set_attr \"type\" \"ssemov\")\n    (set_attr \"prefix\" \"evex\")"}]}