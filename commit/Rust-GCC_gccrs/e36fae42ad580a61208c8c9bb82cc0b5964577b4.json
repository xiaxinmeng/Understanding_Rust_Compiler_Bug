{"sha": "e36fae42ad580a61208c8c9bb82cc0b5964577b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM2ZmFlNDJhZDU4MGE2MTIwOGM4YzliYjgyY2MwYjU5NjQ1NzdiNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-10-04T23:13:59Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-10-04T23:13:59Z"}, "message": "re PR c++/58448 (ICE on invalid: tree_class_check_failed)\n\n/cp\n2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58448\n\t* pt.c (tsubst): Use error_operand_p on parameter t.\n\n/testsuite\n2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58448\n\t* g++.dg/template/crash117.C: New.\n\nFrom-SVN: r203218", "tree": {"sha": "252ed1bd5ec3edc54add7267dcb314e1006b99e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/252ed1bd5ec3edc54add7267dcb314e1006b99e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e36fae42ad580a61208c8c9bb82cc0b5964577b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e36fae42ad580a61208c8c9bb82cc0b5964577b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e36fae42ad580a61208c8c9bb82cc0b5964577b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e36fae42ad580a61208c8c9bb82cc0b5964577b4/comments", "author": null, "committer": null, "parents": [{"sha": "45d992343314089c4c66b9013dbe62b24a3e5285", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45d992343314089c4c66b9013dbe62b24a3e5285", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45d992343314089c4c66b9013dbe62b24a3e5285"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "571d4edad7c469135359db0c18796f9fd9427478", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e36fae42ad580a61208c8c9bb82cc0b5964577b4", "patch": "@@ -1,3 +1,8 @@\n+2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58448\n+\t* pt.c (tsubst): Use error_operand_p on parameter t.\n+\n 2013-10-04  Marc Glisse  <marc.glisse@inria.fr>\n \n \tPR c++/19476"}, {"sha": "59be037c82ecf4835f64ae42fb3cb7b9a8dabbca", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=e36fae42ad580a61208c8c9bb82cc0b5964577b4", "patch": "@@ -11272,7 +11272,7 @@ tsubst (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n   enum tree_code code;\n   tree type, r = NULL_TREE;\n \n-  if (t == NULL_TREE || t == error_mark_node\n+  if (t == NULL_TREE\n       || t == integer_type_node\n       || t == void_type_node\n       || t == char_type_node\n@@ -11281,6 +11281,9 @@ tsubst (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n       || TREE_CODE (t) == TRANSLATION_UNIT_DECL)\n     return t;\n \n+  if (error_operand_p (t))\n+    return error_mark_node;\n+\n   if (DECL_P (t))\n     return tsubst_decl (t, args, complain);\n "}, {"sha": "dd34bc603e89243e67d345ed17c320b5648d3667", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e36fae42ad580a61208c8c9bb82cc0b5964577b4", "patch": "@@ -1,3 +1,8 @@\n+2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58448\n+\t* g++.dg/template/crash117.C: New.\n+\n 2013-10-04  Marc Glisse  <marc.glisse@inria.fr>\n \n \tPR c++/19476"}, {"sha": "813140edc6ffc24bd5de857c0b90dbeb83f98499", "filename": "gcc/testsuite/g++.dg/template/crash117.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash117.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e36fae42ad580a61208c8c9bb82cc0b5964577b4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash117.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash117.C?ref=e36fae42ad580a61208c8c9bb82cc0b5964577b4", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/58448\n+\n+class SmallVector; struct Types4;\n+template <typename, typename, typename, typename> struct Types {\n+  typedef Types4<>::Constructable // { dg-error \"template|typedef|expected\" }\n+} Types<SmallVector, SmallVector, SmallVector, SmallVector>:: > // { dg-error \"expected\" }"}]}