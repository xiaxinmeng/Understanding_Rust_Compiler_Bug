{"sha": "7f8c0c0504d95c983aa138fd67aa2267f96853f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y4YzBjMDUwNGQ5NWM5ODNhYTEzOGZkNjdhYTIyNjdmOTY4NTNmOQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-08-21T14:11:24Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-08-21T14:11:24Z"}, "message": "compiler: if hidden function referenced by inline, don't hide descriptor\n    \n    Fixes golang/go#33739\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/191037\n\nFrom-SVN: r274800", "tree": {"sha": "723d1df4aa9586b155be9c7470a6bffffa47f103", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/723d1df4aa9586b155be9c7470a6bffffa47f103"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f8c0c0504d95c983aa138fd67aa2267f96853f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f8c0c0504d95c983aa138fd67aa2267f96853f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f8c0c0504d95c983aa138fd67aa2267f96853f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f8c0c0504d95c983aa138fd67aa2267f96853f9/comments", "author": null, "committer": null, "parents": [{"sha": "077eb7af6e296e45e8f333f799170685b4d77b03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/077eb7af6e296e45e8f333f799170685b4d77b03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/077eb7af6e296e45e8f333f799170685b4d77b03"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "29f5ec01637cefe88758e8538c6525f453fa4f1e", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f8c0c0504d95c983aa138fd67aa2267f96853f9/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f8c0c0504d95c983aa138fd67aa2267f96853f9/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=7f8c0c0504d95c983aa138fd67aa2267f96853f9", "patch": "@@ -1,4 +1,4 @@\n-1846b07fec2b91facc02ea269f7ab250b30f90b4\n+7da359f4659fffff051c05ff442037cfa61febd5\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "0cf1710d0c2e5ec58c293c8c419310543703147c", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f8c0c0504d95c983aa138fd67aa2267f96853f9/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f8c0c0504d95c983aa138fd67aa2267f96853f9/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=7f8c0c0504d95c983aa138fd67aa2267f96853f9", "patch": "@@ -1560,10 +1560,14 @@ Func_descriptor_expression::do_get_backend(Translate_context* context)\n \t      || no->name().find(\"equal\") != std::string::npos))\n \tis_exported_runtime = true;\n \n+      bool is_referenced_by_inline =\n+\tno->is_function() && no->func_value()->is_referenced_by_inline();\n+\n       bool is_hidden = ((no->is_function()\n \t\t\t && no->func_value()->enclosing() != NULL)\n \t\t\t|| (Gogo::is_hidden_name(no->name())\n-\t\t\t    && !is_exported_runtime)\n+\t\t\t    && !is_exported_runtime\n+\t\t\t    && !is_referenced_by_inline)\n \t\t\t|| Gogo::is_thunk(no));\n \n       bvar = context->backend()->immutable_struct(var_name, asm_name,"}, {"sha": "4521763611674a9ab697e4c5ec9c9eb5c577fb11", "filename": "gcc/go/gofrontend/gogo.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f8c0c0504d95c983aa138fd67aa2267f96853f9/gcc%2Fgo%2Fgofrontend%2Fgogo.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f8c0c0504d95c983aa138fd67aa2267f96853f9/gcc%2Fgo%2Fgofrontend%2Fgogo.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.h?ref=7f8c0c0504d95c983aa138fd67aa2267f96853f9", "patch": "@@ -1543,6 +1543,11 @@ class Function\n   set_is_inline_only()\n   { this->is_inline_only_ = true; }\n \n+  // Report whether the function is referenced by an inline body.\n+  bool\n+  is_referenced_by_inline() const\n+  { return this->is_referenced_by_inline_; }\n+\n   // Mark the function as referenced by an inline body.\n   void\n   set_is_referenced_by_inline()"}]}