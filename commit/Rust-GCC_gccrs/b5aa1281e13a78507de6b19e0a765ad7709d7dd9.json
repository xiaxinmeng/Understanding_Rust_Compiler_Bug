{"sha": "b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjVhYTEyODFlMTNhNzg1MDdkZTZiMTllMGE3NjVhZDc3MDlkN2RkOQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.vnet.ibm.com", "date": "2017-01-26T04:16:11Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2017-01-26T04:16:11Z"}, "message": "re PR target/79179 (PowerPC64: -mcpu=power9 creates stxsd with bad offset)\n\n[gcc]\n2017-01-25  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\tPR target/79179\n\t* config/rs6000/vsx.md (vsx_extract_<mode>_store): Use wY\n\tconstraint instead of o for the stxsd instruction.\n\n[gcc/testsuite]\n2017-01-25  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\tPR target/79179\n\t* gcc.target/powerpc/pr79179.c: New test.\n\nFrom-SVN: r244917", "tree": {"sha": "67f22883ea37ccfae6a0be003804a504a0ef3599", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67f22883ea37ccfae6a0be003804a504a0ef3599"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/comments", "author": null, "committer": null, "parents": [{"sha": "3b5de3cb71e0771ee5f1abe88ad63e7613699b66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b5de3cb71e0771ee5f1abe88ad63e7613699b66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b5de3cb71e0771ee5f1abe88ad63e7613699b66"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "a068478407a3dcded72e1d5263c68459f07306e4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "patch": "@@ -1,3 +1,9 @@\n+2017-01-25  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/79179\n+\t* config/rs6000/vsx.md (vsx_extract_<mode>_store): Use wY\n+\tconstraint instead of o for the stxsd instruction.\n+\n 2017-01-25  Carl Love  <cel@us.ibm.com>\n \n \t* config/rs6000/rs6000-c (altivec_overloaded_builtins): Fix order"}, {"sha": "b10ade40db6288fbc9249001b5982caedc211807", "filename": "gcc/config/rs6000/vsx.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2Fconfig%2Frs6000%2Fvsx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2Fconfig%2Frs6000%2Fvsx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fvsx.md?ref=b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "patch": "@@ -2323,7 +2323,7 @@\n ;; Optimize storing a single scalar element that is the right location to\n ;; memory\n (define_insn \"*vsx_extract_<mode>_store\"\n-  [(set (match_operand:<VS_scalar> 0 \"memory_operand\" \"=m,Z,o\")\n+  [(set (match_operand:<VS_scalar> 0 \"memory_operand\" \"=m,Z,wY\")\n \t(vec_select:<VS_scalar>\n \t (match_operand:VSX_D 1 \"register_operand\" \"d,wv,wb\")\n \t (parallel [(match_operand:QI 2 \"vsx_scalar_64bit\" \"wD,wD,wD\")])))]"}, {"sha": "1cce52129873a1e893988dc01a5c51b2dc45ad60", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "patch": "@@ -1,3 +1,8 @@\n+2017-01-25  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/79179\n+\t* gcc.target/powerpc/pr79179.c: New test.\n+\n 2017-01-25  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \t* gcc.target/powerpc/vsx-elemrev-4.c: Change expected code"}, {"sha": "0815a2e38b6d49a15e1f7589585cde7c1dc9c83c", "filename": "gcc/testsuite/gcc.target/powerpc/pr79179.c", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79179.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5aa1281e13a78507de6b19e0a765ad7709d7dd9/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79179.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79179.c?ref=b5aa1281e13a78507de6b19e0a765ad7709d7dd9", "patch": "@@ -0,0 +1,23 @@\n+/* { dg-do assemble { target { powerpc*-*-* && lp64 } } } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n+/* { dg-options \"-mcpu=power9 -O3\" } */\n+\n+/* Compile with -O3 -mcpu=power9.  It originally generated\n+\n+        stxsd 12,1(9)\n+\n+   which is illegal.  */\n+\n+#pragma pack(1)\n+struct {\n+        signed : 1;\n+        unsigned long a;\n+} b;\n+\n+void c(void)\n+{\n+        b.a = 0;\n+        for (; b.a <= 45; b.a = (long)b.a + 1)\n+                ;\n+}"}]}