{"sha": "d192828ab610545ea373b5791fecbe6ba083c31d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDE5MjgyOGFiNjEwNTQ1ZWEzNzNiNTc5MWZlY2JlNmJhMDgzYzMxZA==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2003-06-10T18:32:57Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2003-06-10T18:32:57Z"}, "message": "[multiple changes]\n\n2003-06-10  Andrew Pinski  <pinskia@physics.uc.edu>\n\n\t* decl.c (start_cleanup_fn): Move static 'counter' out, mark with GTY.\n\t(start_cleanup_cnt): New.\n\n2003-06-10  Geoffrey Keating  <geoffk@apple.com>\n\n\t* g++.dg/pch/static-1.C: New file.\n\t* g++.dg/pch/static-1.Hs: New file.\n\nFrom-SVN: r67719", "tree": {"sha": "d2cf3b2787ee242a4fd2bb22945e77dec333dccf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d2cf3b2787ee242a4fd2bb22945e77dec333dccf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d192828ab610545ea373b5791fecbe6ba083c31d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d192828ab610545ea373b5791fecbe6ba083c31d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d192828ab610545ea373b5791fecbe6ba083c31d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d192828ab610545ea373b5791fecbe6ba083c31d/comments", "author": null, "committer": null, "parents": [{"sha": "4db8f48acab5d9a6a2dc06ed132c78820f2df326", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4db8f48acab5d9a6a2dc06ed132c78820f2df326", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4db8f48acab5d9a6a2dc06ed132c78820f2df326"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "155a2f1e7c5ccde8ef2c15cc76c57fbd1649ce79", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d192828ab610545ea373b5791fecbe6ba083c31d", "patch": "@@ -1,3 +1,8 @@\n+2003-06-10  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t* decl.c (start_cleanup_fn): Move static 'counter' out, mark with GTY.\n+\t(start_cleanup_cnt): New.\n+\n 2003-06-10  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/11131"}, {"sha": "1340640bc22001021da942f4caf5a38295069b99", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=d192828ab610545ea373b5791fecbe6ba083c31d", "patch": "@@ -8347,10 +8347,11 @@ get_dso_handle_node (void)\n /* Begin a new function with internal linkage whose job will be simply\n    to destroy some particular variable.  */\n \n+static GTY(()) int start_cleanup_cnt;\n+\n static tree\n start_cleanup_fn (void)\n {\n-  static int counter = 0;\n   int old_interface_only = interface_only;\n   int old_interface_unknown = interface_unknown;\n   char name[32];\n@@ -8377,7 +8378,7 @@ start_cleanup_fn (void)\n   /* Build the function type itself.  */\n   fntype = build_function_type (void_type_node, parmtypes);\n   /* Build the name of the function.  */\n-  sprintf (name, \"__tcf_%d\", counter++);\n+  sprintf (name, \"__tcf_%d\", start_cleanup_cnt++);\n   /* Build the function declaration.  */\n   fndecl = build_lang_decl (FUNCTION_DECL, get_identifier (name), fntype);\n   /* It's a function with internal linkage, generated by the"}, {"sha": "f9e8c6eb7e4c17576c9f211aceef484124869159", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d192828ab610545ea373b5791fecbe6ba083c31d", "patch": "@@ -1,3 +1,8 @@\n+2003-06-10  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* g++.dg/pch/static-1.C: New file.\n+\t* g++.dg/pch/static-1.Hs: New file.\n+\n 2003-06-10  Richard Henderson  <rth@redhat.com>\n \n \t* gcc.dg/asm-7.c: Adjust expected warning text."}, {"sha": "21e7789829867ae77f5dd09f7df808db63313a8b", "filename": "gcc/testsuite/g++.dg/pch/static-1.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fstatic-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fstatic-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fstatic-1.C?ref=d192828ab610545ea373b5791fecbe6ba083c31d", "patch": "@@ -0,0 +1,10 @@\n+#include \"static-1.H\"\n+int LocalStaticTest()\n+{\n+        static A sa;\n+}\n+\n+int main(int argc, char **argv)\n+{\n+        A::StaticTest();\n+}"}, {"sha": "d277b787bafa9e1e813424ca911def9928784e72", "filename": "gcc/testsuite/g++.dg/pch/static-1.Hs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fstatic-1.Hs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d192828ab610545ea373b5791fecbe6ba083c31d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fstatic-1.Hs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fstatic-1.Hs?ref=d192828ab610545ea373b5791fecbe6ba083c31d", "patch": "@@ -0,0 +1,13 @@\n+class A\n+{\n+public:\n+        int val;\n+\n+        ~A() {\n+                int i = 2;\n+        }\n+\n+        static void StaticTest() {\n+                static A a;\n+        }\n+};"}]}