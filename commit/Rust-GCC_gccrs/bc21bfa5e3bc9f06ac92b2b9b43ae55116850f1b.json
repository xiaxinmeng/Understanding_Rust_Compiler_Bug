{"sha": "bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMyMWJmYTVlM2JjOWYwNmFjOTJiMmI5YjQzYWU1NTExNjg1MGYxYg==", "commit": {"author": {"name": "Richard Sandiford", "email": "r.sandiford@uk.ibm.com", "date": "2009-07-02T20:55:23Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2009-07-02T20:55:23Z"}, "message": "libgomp.exp (libgomp_init): Use the ALWAYS_CFLAGS options when choosing a multilib.\n\nlibgomp/\n\t* testsuite/lib/libgomp.exp (libgomp_init): Use the ALWAYS_CFLAGS\n\toptions when choosing a multilib.\n\nFrom-SVN: r149195", "tree": {"sha": "f47e5ffb873cb827107ad3df7d662381607ab1e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f47e5ffb873cb827107ad3df7d662381607ab1e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b/comments", "author": null, "committer": null, "parents": [{"sha": "ef3ddd4fa3d29318b5e05886382375712b9c1411", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef3ddd4fa3d29318b5e05886382375712b9c1411", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef3ddd4fa3d29318b5e05886382375712b9c1411"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "6d36e309ebb5a76c1a02024a9716c199e0545793", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b", "patch": "@@ -1,3 +1,8 @@\n+2009-07-02  Richard Sandiford  <r.sandiford@uk.ibm.com>\n+\n+\t* testsuite/lib/libgomp.exp (libgomp_init): Use the ALWAYS_CFLAGS\n+\toptions when choosing a multilib.\n+\n 2009-06-30  Richard Sandiford  <r.sandiford@uk.ibm.com>\n \n \t* testsuite/lib/libgomp.exp (libgomp_init): Don't add \".\" to"}, {"sha": "4712de23e3275b1528b63dbe5e6f41becbefa3d1", "filename": "libgomp/testsuite/lib/libgomp.exp", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b/libgomp%2Ftestsuite%2Flib%2Flibgomp.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b/libgomp%2Ftestsuite%2Flib%2Flibgomp.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flib%2Flibgomp.exp?ref=bc21bfa5e3bc9f06ac92b2b9b43ae55116850f1b", "patch": "@@ -86,9 +86,6 @@ proc libgomp_init { args } {\n \tset CFLAGS \"\"\n     }\n \n-    set always_ld_library_path \"${blddir}/.libs\"\n-    add_path always_ld_library_path [find_libgcc_s $GCC_UNDER_TEST]\n-\n     set ALWAYS_CFLAGS \"\"\n     if { $blddir != \"\" } {\n         lappend ALWAYS_CFLAGS \"additional_flags=-B${blddir}/\"\n@@ -122,6 +119,16 @@ proc libgomp_init { args } {\n \n     # And, gee, turn on OpenMP.\n     lappend ALWAYS_CFLAGS \"additional_flags=-fopenmp\"\n+\n+    set compiler $GCC_UNDER_TEST\n+    foreach flag $ALWAYS_CFLAGS {\n+\tif { [regexp {^(additional_flags|ldflags)=(.*)} $flag d1 d2 option] } {\n+\t    lappend compiler $option\n+\t}\n+    }\n+\n+    set always_ld_library_path \"${blddir}/.libs\"\n+    add_path always_ld_library_path [find_libgcc_s $compiler]\n }\n \n #"}]}