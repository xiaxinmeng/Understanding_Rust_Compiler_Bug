{"sha": "fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZmMmNiOTljOTg3ZjRlOWYwYThkZmZjMGMzYWNkMzYzZjhhMDk3Zg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2003-09-23T21:37:32Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2003-09-23T21:37:32Z"}, "message": "rs6000.c (function_arg_pass_by_reference): Don't pass zero-size arrays by reference.\n\n2003-09-23  Geoffrey Keating  <geoffk@apple.com>\n\n\t* config/rs6000/rs6000.c (function_arg_pass_by_reference): Don't\n\tpass zero-size arrays by reference.\n\t(rs6000_va_arg): Likewise.\n\n2003-09-23  Geoffrey Keating  <geoffk@apple.com>\n\n\t* gcc.dg/darwin-abi-1.c: New file.\n\nFrom-SVN: r71698", "tree": {"sha": "9941b421b5d06bb02a64dfe48d6f1ec11d0330c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9941b421b5d06bb02a64dfe48d6f1ec11d0330c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e5f1132858753ef5c8857323dbef71018fe65822", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5f1132858753ef5c8857323dbef71018fe65822", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5f1132858753ef5c8857323dbef71018fe65822"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "dcb14a952286ba630f8dd2b3add813ab0b52c3fe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "patch": "@@ -1,3 +1,9 @@\n+2003-09-23  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* config/rs6000/rs6000.c (function_arg_pass_by_reference): Don't\n+\tpass zero-size arrays by reference.\n+\t(rs6000_va_arg): Likewise.\n+\n 2003-09-23  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n \t* config.gcc: Set use_fixproto=no in each specific *-gnu*"}, {"sha": "c3e532e0d6e0b47ca3dd5f6a292668eda963b613", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "patch": "@@ -3977,7 +3977,7 @@ function_arg_pass_by_reference (CUMULATIVE_ARGS *cum ATTRIBUTE_UNUSED,\n \n       return 1;\n     }\n-  return type && int_size_in_bytes (type) <= 0;\n+  return type && int_size_in_bytes (type) < 0;\n }\n \f\n /* Perform any needed actions needed for a function that is receiving a\n@@ -4206,7 +4206,7 @@ rs6000_va_arg (tree valist, tree type)\n   if (DEFAULT_ABI != ABI_V4)\n     {\n       /* Variable sized types are passed by reference.  */\n-      if (int_size_in_bytes (type) <= 0)\n+      if (int_size_in_bytes (type) < 0)\n \t{\n \t  u = build_pointer_type (type);\n "}, {"sha": "494bedb59c0bf4773f10762d9d36bd7a1c94d53b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "patch": "@@ -1,3 +1,7 @@\n+2003-09-23  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* gcc.dg/darwin-abi-1.c: New file.\n+\n 2003-09-21  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR target/12281"}, {"sha": "c7c0288e8bbe24e8c232b9beae12f9c9f860851d", "filename": "gcc/testsuite/gcc.dg/darwin-abi-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-abi-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-abi-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-abi-1.c?ref=fff2cb99c987f4e9f0a8dffc0c3acd363f8a097f", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile { target powerpc*-*-darwin* } } */\n+/* { dg-options \"-O\" } */\n+/* { dg-final { scan-assembler \"li r3,12345\\n\\tbl \" } } */\n+\n+/* Check that zero-size structures don't affect parameter passing.  */\n+\n+struct empty { };\n+extern void foo (struct empty e, int a);\n+void bar (void) {\n+  struct empty e;\n+  foo (e, 12345);\n+}"}]}