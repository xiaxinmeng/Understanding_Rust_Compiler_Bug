{"sha": "a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTRhNDQzY2VlMmVhOWMyZGI1NWUyODAyZDQ2YTRkNWI2Y2JlMTc4NA==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel@linux.vnet.ibm.com", "date": "2015-12-02T07:53:03Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2015-12-02T07:53:03Z"}, "message": "S/390: Fix vrepi constraint letter.\n\ngcc/ChangeLog:\n\n2015-12-02  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n\n\t* config/s390/vector.md (\"*vec_splats<mode>\"): Fix constraint\n\tlatter I->K.\n\ngcc/testsuite/ChangeLog:\n\n2015-12-02  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n\n\t* gcc.target/s390/zvector/vec-splat-1.c: New test.\n\nFrom-SVN: r231153", "tree": {"sha": "e6347c3ab91a44625029eaa54e311fdcef8f7a08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6347c3ab91a44625029eaa54e311fdcef8f7a08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/comments", "author": null, "committer": null, "parents": [{"sha": "6f5a59d1d1a4a602ef5fbd581be09dff976cabdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f5a59d1d1a4a602ef5fbd581be09dff976cabdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f5a59d1d1a4a602ef5fbd581be09dff976cabdf"}], "stats": {"total": 55, "additions": 53, "deletions": 2}, "files": [{"sha": "8b6fdbc9eb4a9369bacb157327afd406180aea13", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "patch": "@@ -1,3 +1,8 @@\n+2015-12-02  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n+\n+\t* config/s390/vector.md (\"*vec_splats<mode>\"): Fix constraint\n+\tlatter I->K.\n+\n 2015-12-02  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n \n \t* config/s390/s390.md (\"bswap<mode>2\"): Add support for strv and"}, {"sha": "d8b9b07a24af847d8a641dd0209d31d188b3a0b6", "filename": "gcc/config/s390/vector.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2Fconfig%2Fs390%2Fvector.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2Fconfig%2Fs390%2Fvector.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fvector.md?ref=a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "patch": "@@ -370,11 +370,11 @@\n \n (define_insn \"*vec_splats<mode>\"\n   [(set (match_operand:V_HW                          0 \"register_operand\" \"=v,v,v,v\")\n-\t(vec_duplicate:V_HW (match_operand:<non_vec> 1 \"general_operand\"  \"QR,I,v,d\")))]\n+\t(vec_duplicate:V_HW (match_operand:<non_vec> 1 \"general_operand\"  \"QR,K,v,d\")))]\n   \"TARGET_VX\"\n   \"@\n    vlrep<bhfgq>\\t%v0,%1\n-   vrepi<bhfgq>\\t%v0,%1\n+   vrepi<bhfgq>\\t%v0,%h1\n    vrep<bhfgq>\\t%v0,%v1,0\n    #\"\n   [(set_attr \"op_type\" \"VRX,VRI,VRI,*\")])"}, {"sha": "79e459603e2a05d8284f909ea6fa80db2a0930b1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "patch": "@@ -1,3 +1,7 @@\n+2015-12-02  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n+\n+\t* gcc.target/s390/zvector/vec-splat-1.c: New test.\n+\n 2015-12-02  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n \n \t* gcc.target/s390/bswap-1.c (foo64c, foo32a, foo32c): New functions."}, {"sha": "bab2e2d4028f9089c60f716f682adfe6dab84ed6", "filename": "gcc/testsuite/gcc.target/s390/zvector/vec-splat-1.c", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fvec-splat-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fvec-splat-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fvec-splat-1.c?ref=a4a443cee2ea9c2db55e2802d46a4d5b6cbe1784", "patch": "@@ -0,0 +1,42 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -mzarch -march=z13 -mzvector\" } */\n+\n+#include <vecintrin.h>\n+\n+vector signed char v16qi;\n+vector short       v8hi;\n+vector int         v4si;\n+vector long long   v2di;\n+\n+vector unsigned char      uv16qi;\n+vector unsigned short     uv8hi;\n+vector unsigned int       uv4si;\n+vector unsigned long long uv2di;\n+\n+int\n+foo ()\n+{\n+  v16qi  = vec_splats ((signed char)0x77);\n+  uv16qi = vec_splats ((unsigned char)0x77);\n+\n+  v8hi  = vec_splats ((short int)0x7f0f);\n+  uv8hi = vec_splats ((unsigned short int)0x7f0f);\n+\n+  v4si  = vec_splats ((int)0x7f0f);\n+  uv4si = vec_splats ((unsigned int)0x7f0f);\n+\n+  v2di  = vec_splats ((long long)0x7f0f);\n+  uv2di = vec_splats ((unsigned long long)0x7f0f);\n+}\n+\n+/* { dg-final { scan-assembler-times \"vrepib\\t%v.*,119\" 1 } } */\n+/* { dg-final { scan-assembler-times \"vrepib\\t%v.*,119\" 1 } } */\n+\n+/* { dg-final { scan-assembler-times \"vrepih\\t%v.*,32527\" 1 } } */\n+/* { dg-final { scan-assembler-times \"vrepih\\t%v.*,32527\" 1 } } */\n+\n+/* { dg-final { scan-assembler-times \"vrepif\\t%v.*,32527\" 1 } } */\n+/* { dg-final { scan-assembler-times \"vrepif\\t%v.*,32527\" 1 } } */\n+\n+/* { dg-final { scan-assembler-times \"vrepig\\t%v.*,32527\" 1 } } */\n+/* { dg-final { scan-assembler-times \"vrepig\\t%v.*,32527\" 1 } } */"}]}