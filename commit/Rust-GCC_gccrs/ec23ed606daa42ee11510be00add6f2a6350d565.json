{"sha": "ec23ed606daa42ee11510be00add6f2a6350d565", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWMyM2VkNjA2ZGFhNDJlZTExNTEwYmUwMGFkZDZmMmE2MzUwZDU2NQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2006-03-21T20:59:11Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2006-03-21T20:59:11Z"}, "message": "config.gcc (i[34567]86-*-solaris2*): Add config/sol2-10.h to tm_file on Solaris 10 and later.\n\n2006-03-21  Eric Botcazou  <ebotcazou@libertysurf.fr>\n\n\t* config.gcc (i[34567]86-*-solaris2*): Add config/sol2-10.h to\n\ttm_file on Solaris 10 and later.\n\t(sparc64-*-solaris2*): Likewise.\n\t(sparc-*-solaris2*): Likewise.\n\t* config/sol26.h: Rename to config/sol2-6.h.\n\t* config/sol2-10.h: New file.\n\ntestsuite/\n\n\t* gcc.dg/builtins-config.h (Solaris case): Define HAVE_C99_RUNTIME\n\tif _STDC_C99 is defined.\n\t* gcc.dg/builtins-18.c: Pass -std=c99 on Solaris.\n\t* gcc.dg/builtins-20.c: Likewise.\n\t* gcc.dg/builtins-53.c: Likewise.\n\t* gcc.dg/single-precision-constant.c: Likewise. Also pass\n\t-mmacosx-version-min=10.3 on PowerPC/Darwin.\n\nFrom-SVN: r112255", "tree": {"sha": "f6e4ea73d450d97d8eff8a07a819a047dcbb917b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f6e4ea73d450d97d8eff8a07a819a047dcbb917b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ec23ed606daa42ee11510be00add6f2a6350d565", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec23ed606daa42ee11510be00add6f2a6350d565", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec23ed606daa42ee11510be00add6f2a6350d565", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec23ed606daa42ee11510be00add6f2a6350d565/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5ded46ebfa8a73cd3931b3c1831d38dc4acea753", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ded46ebfa8a73cd3931b3c1831d38dc4acea753", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ded46ebfa8a73cd3931b3c1831d38dc4acea753"}], "stats": {"total": 87, "additions": 76, "deletions": 11}, "files": [{"sha": "176ce6560e7fb1a4c394ab8facef6b6c840d5db4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -1,3 +1,12 @@\n+2006-03-21  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\t* config.gcc (i[34567]86-*-solaris2*): Add config/sol2-10.h to\n+\ttm_file on Solaris 10 and later.\n+\t(sparc64-*-solaris2*): Likewise.\n+\t(sparc-*-solaris2*): Likewise.\n+\t* config/sol26.h: Rename to config/sol2-6.h.\n+\t* config/sol2-10.h: New file.\n+\n 2006-03-21  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR tree-opt/26781"}, {"sha": "92dce31765e4da5ac206eb3eedada9b392eef563", "filename": "gcc/config.gcc", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -1149,7 +1149,11 @@ i[34567]86-*-solaris2*)\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h i386/sysv4.h sol2.h\"\n \tcase ${target} in\n \t*-*-solaris2.[0-6] | *-*-solaris2.[0-6].*)\n-\t\ttm_file=\"${tm_file} sol26.h\"\n+\t\ttm_file=\"${tm_file} sol2-6.h\"\n+\t\t;;\n+\t*-*-solaris2.1[0-9]*)\n+\t\ttm_file=\"${tm_file} sol2-10.h\"\n+\t\t;;\n \tesac\n \ttm_file=\"${tm_file} i386/sol2.h\"\n \ttmake_file=\"t-sol2 i386/t-sol2 t-svr4\"\n@@ -2113,7 +2117,13 @@ sparc-*-rtems*)\n \textra_parts=\"crti.o crtn.o crtbegin.o crtend.o\"\n \t;;\n sparc64-*-solaris2* | sparcv9-*-solaris2*)\n-\ttm_file=\"sparc/biarch64.h ${tm_file} dbxelf.h elfos.h svr4.h sparc/sysv4.h sol2.h sparc/sol2.h sparc/sol2-64.h sparc/sol2-bi.h\"\n+\ttm_file=\"sparc/biarch64.h ${tm_file} dbxelf.h elfos.h svr4.h sparc/sysv4.h sol2.h\"\n+\tcase ${target} in\n+\t*-*-solaris2.1[0-9]*)\n+\t\ttm_file=\"${tm_file} sol2-10.h\"\n+\t\t;;\n+\tesac\n+\ttm_file=\"${tm_file} sparc/sol2.h sparc/sol2-64.h sparc/sol2-bi.h\"\n \tif test x$gnu_ld = xyes; then\n \t\ttm_file=\"${tm_file} sparc/sol2-gld.h sparc/sol2-gld-bi.h\"\n \tfi\n@@ -2142,7 +2152,11 @@ sparc-*-solaris2*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h sparc/sysv4.h sol2.h\"\n \tcase ${target} in\n \t*-*-solaris2.[0-6] | *-*-solaris2.[0-6].*)\n-\t\ttm_file=\"${tm_file} sol26.h\"\n+\t\ttm_file=\"${tm_file} sol2-6.h\"\n+\t\t;;\n+\t*-*-solaris2.1[0-9]*)\n+\t\ttm_file=\"${tm_file} sol2-10.h\"\n+\t\t;;\n \tesac\n \ttm_file=\"${tm_file} sparc/sol2.h\"\n \tif test x$gnu_ld = xyes; then"}, {"sha": "1da6bee10de719d5852b87b234ec1993c625e35e", "filename": "gcc/config/sol2-10.h", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Fconfig%2Fsol2-10.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Fconfig%2Fsol2-10.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsol2-10.h?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -0,0 +1,24 @@\n+/* Operating system specific defines to be used when targeting GCC for any\n+   Solaris 2 system starting from Solaris 10.\n+   Copyright 2006 Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GCC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 51 Franklin Street, Fifth Floor,\n+Boston, MA 02110-1301, USA.  */\n+\n+/* Solaris 10 has the float and long double forms of math functions.  */\n+#undef TARGET_C99_FUNCTIONS\n+#define TARGET_C99_FUNCTIONS 1"}, {"sha": "d5b7dda2a5febbb6bdf4ac71f624ac7e7ac7efeb", "filename": "gcc/config/sol2-6.h", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Fconfig%2Fsol2-6.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Fconfig%2Fsol2-6.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsol2-6.h?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "previous_filename": "gcc/config/sol26.h"}, {"sha": "372ab8c11136c2f3240954ecb8ab24e33924495c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -1,3 +1,13 @@\n+2006-03-21  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\t* gcc.dg/builtins-config.h (Solaris case): Define HAVE_C99_RUNTIME\n+\tif _STDC_C99 is defined.\n+\t* gcc.dg/builtins-18.c: Pass -std=c99 on Solaris.\n+\t* gcc.dg/builtins-20.c: Likewise.\n+\t* gcc.dg/builtins-53.c: Likewise.\n+\t* gcc.dg/single-precision-constant.c: Likewise. Also pass\n+\t-mmacosx-version-min=10.3 on PowerPC/Darwin.\n+\n 2006-03-21  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR tree-opt/26781"}, {"sha": "f4f64c1acb3c9b47d957f8720ed757e4ea94a4a2", "filename": "gcc/testsuite/gcc.dg/builtins-18.c", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-18.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-18.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-18.c?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -8,6 +8,7 @@\n /* { dg-do link } */\n /* { dg-options \"-O2 -ffast-math\" } */\n /* { dg-options \"-O2 -ffast-math -mmacosx-version-min=10.3\" { target powerpc-*-darwin* } } */\n+/* { dg-options \"-O2 -ffast-math -std=c99\" { target *-*-solaris2* } } */\n \n #include \"builtins-config.h\"\n \n@@ -33,9 +34,9 @@ main (void)\n   if (__builtin_cabsf (fc) != 5.0F)\n     link_error ();\n   if (cabsf (3.0F + 4.0iF) != 5.0F)\n-    link_failure ();\n+    link_error ();\n   if (__builtin_cabsf (3.0F + 4.0iF) != 5.0F)\n-    link_failure ();\n+    link_error ();\n #endif\n \n   /* Test doubles.  */\n@@ -44,9 +45,9 @@ main (void)\n   if (__builtin_cabs (dc) != 5.0)\n     link_error ();\n   if (cabs (3.0 + 4.0i) != 5.0)\n-    link_failure ();\n+    link_error ();\n   if (__builtin_cabs (3.0 + 4.0i) != 5.0)\n-    link_failure ();\n+    link_error ();\n \n #ifdef HAVE_C99_RUNTIME\n   /* Test long doubles.  */\n@@ -55,9 +56,9 @@ main (void)\n   if (__builtin_cabsl (ldc) != 5.0L)\n     link_error ();\n   if (cabsl (3.0L + 4.0iL) != 5.0L)\n-    link_failure ();\n+    link_error ();\n   if (__builtin_cabsl (3.0L + 4.0iL) != 5.0L)\n-    link_failure ();\n+    link_error ();\n #endif\n \n   return 0;"}, {"sha": "40a29c4f559ceeedbfb6cc697b4d4cd15ee7da79", "filename": "gcc/testsuite/gcc.dg/builtins-20.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -8,6 +8,7 @@\n /* { dg-do link } */\n /* { dg-options \"-O2 -ffast-math\" } */\n /* { dg-options \"-O2 -ffast-math -mmacosx-version-min=10.3\" { target powerpc-*-darwin* } } */\n+/* { dg-options \"-O2 -ffast-math -std=c99\" { target *-*-solaris2* } } */\n \n #include \"builtins-config.h\"\n "}, {"sha": "048cda92afb1dd3abb61b967b4d038815e550497", "filename": "gcc/testsuite/gcc.dg/builtins-53.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-53.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-53.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-53.c?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -11,6 +11,7 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2 -ffast-math\" } */\n /* { dg-options \"-O2 -ffast-math -mmacosx-version-min=10.3\" { target powerpc-*-darwin* } } */\n+/* { dg-options \"-O2 -ffast-math -std=c99\" { target *-*-solaris2* } } */\n \n #include \"builtins-config.h\"\n "}, {"sha": "6921b80b3a77ec17bafbd97b83f68776a31b32dd", "filename": "gcc/testsuite/gcc.dg/builtins-config.h", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-config.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-config.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-config.h?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -11,8 +11,9 @@\n \n #if defined(__hppa) && defined(__hpux)\n /* PA HP-UX doesn't have the entire C99 runtime.  */\n-#elif defined(__sun)\n-/* Solaris doesn't have the entire C99 runtime.  */\n+#elif defined(__sun) && ! defined (_STDC_C99)\n+/* Solaris up to 9 doesn't have the entire C99 runtime.\n+   Solaris 10 defines _STDC_C99 if __STDC_VERSION__ is >= 199901L.  */\n #elif defined(__sgi)\n /* Irix6 doesn't have the entire C99 runtime.  */\n #elif defined(__FreeBSD__) && (__FreeBSD__ < 5)"}, {"sha": "3cf9f8ffe8750e862d90f36431ec291c69882e7b", "filename": "gcc/testsuite/gcc.dg/single-precision-constant.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fsingle-precision-constant.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec23ed606daa42ee11510be00add6f2a6350d565/gcc%2Ftestsuite%2Fgcc.dg%2Fsingle-precision-constant.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsingle-precision-constant.c?ref=ec23ed606daa42ee11510be00add6f2a6350d565", "patch": "@@ -1,8 +1,12 @@\n /* Test that double precision constants are correctly handled \n    when code is compiled with -fsingle-precision-constant */\n /* Origin: Carlos O'Donell <carlos@codesourcery.com> */\n+\n /* { dg-do run } */\n /* { dg-options \"-fsingle-precision-constant\" } */\n+/* { dg-options \"-fsingle-precision-constant -mmacosx-version-min=10.3\" { target powerpc-*-darwin* } } */\n+/* { dg-options \"-fsingle-precision-constant -std=c99\" { target *-*-solaris2* } } */\n+\n #include <math.h>\n #include <float.h>\n "}]}