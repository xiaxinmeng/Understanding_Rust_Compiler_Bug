{"sha": "90f01468b4c82e895f43432ea6b1504d47d0a294", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTBmMDE0NjhiNGM4MmU4OTVmNDM0MzJlYTZiMTUwNGQ0N2QwYTI5NA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-09-24T22:21:49Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-09-24T22:21:49Z"}, "message": "compiler: Better warning for switch on non-comparable type.\n\nFrom-SVN: r191683", "tree": {"sha": "ba1e66b9f76afe592b6452d54dedc6dc360016a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba1e66b9f76afe592b6452d54dedc6dc360016a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90f01468b4c82e895f43432ea6b1504d47d0a294", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90f01468b4c82e895f43432ea6b1504d47d0a294", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90f01468b4c82e895f43432ea6b1504d47d0a294", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90f01468b4c82e895f43432ea6b1504d47d0a294/comments", "author": null, "committer": null, "parents": [{"sha": "60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60478b9caf9da70dc1301c863bb7c26a1ab5da9f"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "a96e6bd655952e335c2af320835ec0206dff181a", "filename": "gcc/go/gofrontend/statements.cc", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90f01468b4c82e895f43432ea6b1504d47d0a294/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90f01468b4c82e895f43432ea6b1504d47d0a294/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.cc?ref=90f01468b4c82e895f43432ea6b1504d47d0a294", "patch": "@@ -3846,6 +3846,16 @@ Switch_statement::do_lower(Gogo*, Named_object*, Block* enclosing,\n     return new Constant_switch_statement(this->val_, this->clauses_,\n \t\t\t\t\t this->break_label_, loc);\n \n+  if (this->val_ != NULL\n+      && !this->val_->type()->is_comparable()\n+      && !Type::are_compatible_for_comparison(true, this->val_->type(),\n+\t\t\t\t\t      Type::make_nil_type(), NULL))\n+    {\n+      error_at(this->val_->location(),\n+\t       \"cannot switch on value whose type that may not be compared\");\n+      return Statement::make_error_statement(loc);\n+    }\n+\n   Block* b = new Block(enclosing, loc);\n \n   if (this->clauses_->empty())"}]}