{"sha": "ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZhZjRkM2IxMzhkZWVhM2ZkNjc2YzVjOWY3ZDEyNGJlNGIxMmJmYg==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2005-03-21T22:11:11Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2005-03-21T22:11:11Z"}, "message": "re PR middle-end/20557 (FAIL: gcc.dg/pr18628.c)\n\n\n\tPR middle-end/20557\n\t* bb-reorder.c (duplicate_computed_gotos): Use can_duplicate_block_p\n\tto determine whether a block can be duplicated, rather than test\n\twhether the block contains noncopyable insns ourselves.\n\nFrom-SVN: r96836", "tree": {"sha": "28720a371b03ceef348c0a3e1f86dde7d551ed90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28720a371b03ceef348c0a3e1f86dde7d551ed90"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb/comments", "author": null, "committer": null, "parents": [{"sha": "59298b1d60ada7c7e44d7d29cab5c2da8d066614", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59298b1d60ada7c7e44d7d29cab5c2da8d066614", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59298b1d60ada7c7e44d7d29cab5c2da8d066614"}], "stats": {"total": 32, "additions": 15, "deletions": 17}, "files": [{"sha": "c0b07e314b0225c7f24ca49fef445acbb2e72ef0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb", "patch": "@@ -1,3 +1,10 @@\n+2005-03-21  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR middle-end/20557\n+\t* bb-reorder.c (duplicate_computed_gotos): Use can_duplicate_block_p\n+\tto determine whether a block can be duplicated, rather than test\n+\twhether the block contains noncopyable insns ourselves.\n+\n 2005-03-21  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/i860/i860.h (PREDICATE_CODES): Remove nonexistent"}, {"sha": "b7223d7d1aa725c48e0357ef4a67ec5c8e5c1900", "filename": "gcc/bb-reorder.c", "status": "modified", "additions": 8, "deletions": 17, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb/gcc%2Fbb-reorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb/gcc%2Fbb-reorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbb-reorder.c?ref=ffaf4d3b138deea3fd676c5c9f7d124be4b12bfb", "patch": "@@ -2047,24 +2047,15 @@ duplicate_computed_gotos (void)\n \t  int size = 0;\n \n \t  FOR_BB_INSNS (bb, insn)\n-\t    {\n-\t      if (INSN_P (insn))\n-\t\t{\n-\t\t  /* If the insn isn't copyable, don't duplicate\n-\t\t     the block.  */\n-\t\t  if (targetm.cannot_copy_insn_p\n-\t\t      && targetm.cannot_copy_insn_p (insn))\n-\t\t    {\n-\t\t      size = max_size + 1;\n-\t\t      break;\n-\t\t    }\n-\t\t  size += get_attr_length (insn);\n-\t\t}\n-\t      if (size > max_size)\n-\t\tbreak;\n-\t    }\n+\t    if (INSN_P (insn))\n+\t      {\n+\t\tsize += get_attr_length (insn);\n+\t\tif (size > max_size)\n+\t\t  break;\n+\t      }\n \n-\t  if (size <= max_size)\n+\t  if (size <= max_size\n+\t      && can_duplicate_block_p (bb))\n \t    bitmap_set_bit (candidates, bb->index);\n \t}\n     }"}]}