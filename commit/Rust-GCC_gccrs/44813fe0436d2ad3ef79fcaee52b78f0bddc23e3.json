{"sha": "44813fe0436d2ad3ef79fcaee52b78f0bddc23e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQ4MTNmZTA0MzZkMmFkM2VmNzlmY2FlZTUyYjc4ZjBiZGRjMjNlMw==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2012-05-24T20:19:37Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2012-05-24T20:19:37Z"}, "message": "PR 53456 CPU timing fallback using clock_gettime.\n\n2012-05-24  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR fortran/53456\n\t* intrinsics/time_1.h (gf_cputime): Fallback for clock_gettime.\n\nFrom-SVN: r187846", "tree": {"sha": "3281f9f7646bce3c0d7504d2d768e20be21b11b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3281f9f7646bce3c0d7504d2d768e20be21b11b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3/comments", "author": null, "committer": null, "parents": [{"sha": "165ca58dc37d9c10443e5cf1daa836edb355a0f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/165ca58dc37d9c10443e5cf1daa836edb355a0f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/165ca58dc37d9c10443e5cf1daa836edb355a0f0"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "e30622f7440ae45186fde36a3351e29f07f2050e", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=44813fe0436d2ad3ef79fcaee52b78f0bddc23e3", "patch": "@@ -1,3 +1,8 @@\n+2012-05-24  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR fortran/53456\n+\t* intrinsics/time_1.h (gf_cputime): Fallback for clock_gettime.\n+\n 2012-05-23  Janne Blomqvist  <jb@gcc.gnu.org>\n \n \tPR fortran/53456"}, {"sha": "94f2f3d105007a1aec2fc372156de532c7c8f46b", "filename": "libgfortran/intrinsics/time_1.h", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3/libgfortran%2Fintrinsics%2Ftime_1.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44813fe0436d2ad3ef79fcaee52b78f0bddc23e3/libgfortran%2Fintrinsics%2Ftime_1.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Ftime_1.h?ref=44813fe0436d2ad3ef79fcaee52b78f0bddc23e3", "patch": "@@ -1,5 +1,5 @@\n /* Wrappers for platform timing functions.\n-   Copyright (C) 2003, 2007, 2009, 2011 Free Software Foundation, Inc.\n+   Copyright (C) 2003, 2007, 2009, 2011, 2012 Free Software Foundation, Inc.\n \n This file is part of the GNU Fortran runtime library (libgfortran).\n \n@@ -166,6 +166,21 @@ gf_cputime (long *user_sec, long *user_usec, long *system_sec, long *system_usec\n     return -1;\n   return 0;\n \n+#elif defined(HAVE_CLOCK_GETTIME) && (defined(CLOCK_PROCESS_CPUTIME_ID) \\\n+\t\t\t\t      || defined(CLOCK_THREAD_CPUTIME_ID))\n+  /* Newer versions of VxWorks have CLOCK_THREAD_CPUTIME_ID giving\n+     per-thread CPU time.  CLOCK_PROCESS_CPUTIME_ID would be better\n+     but is not available.  */\n+#ifndef CLOCK_PROCESS_CPUTIME_ID\n+#define CLOCK_PROCESS_CPUTIME_ID CLOCK_THREAD_CPUTIME_ID\n+#endif\n+  struct timespec ts;\n+  int err = clock_gettime (CLOCK_PROCESS_CPUTIME_ID, &ts);\n+  *user_sec = ts.tv_sec;\n+  *user_usecs = ts.tv_nsec / 1000;\n+  *system_sec = *system_usec = 0;\n+  return err;\n+\n #else \n   clock_t c = clock ();\n   *user_sec = c / CLOCKS_PER_SEC;"}]}