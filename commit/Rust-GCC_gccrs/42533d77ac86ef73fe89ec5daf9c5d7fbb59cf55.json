{"sha": "42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI1MzNkNzdhYzg2ZWY3M2ZlODllYzVkYWY5YzVkN2ZiYjU5Y2Y1NQ==", "commit": {"author": {"name": "Edmar Wienskoski", "email": "edmar@freescale.com", "date": "2012-06-22T20:13:23Z"}, "committer": {"name": "Edmar Wienskoski", "email": "edmarwjr@gcc.gnu.org", "date": "2012-06-22T20:13:23Z"}, "message": "rs6000.md (define_attr \"type\"): New type popcnt.\n\n2012-06-22  Edmar Wienskoski  <edmar@freescale.com>\n\n\t* config/rs6000/rs6000.md (define_attr \"type\"): New type popcnt.\n\t(popcntb<mode>2): Add attribute type popcnt.\n\t(popcntd<mode>2): Ditto.\n\t* config/rs6000/power4.md (define_insn_reservation): Add type popcnt.\n\t* config/rs6000/power5.md (define_insn_reservation): Ditto.\n\t* config/rs6000/power7.md (define_insn_reservation): Ditto.\n\t* config/rs6000/476.md (define_insn_reservation): Ditto.\n\t* config/rs6000/power6.md (define_insn_reservation): New\n\treservation for popcnt instructions.\n\nFrom-SVN: r188901", "tree": {"sha": "1a803a20b68d903b7d07a0e998cc0ef30c64c603", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a803a20b68d903b7d07a0e998cc0ef30c64c603"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/comments", "author": null, "committer": null, "parents": [{"sha": "50c7ad7e681f51d94310c47f82786657b0239262", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50c7ad7e681f51d94310c47f82786657b0239262", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50c7ad7e681f51d94310c47f82786657b0239262"}], "stats": {"total": 33, "additions": 27, "deletions": 6}, "files": [{"sha": "028f4f60e21d72442fdf05190edfdcd574316134", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "patch": "@@ -1,3 +1,15 @@\n+2012-06-22  Edmar Wienskoski  <edmar@freescale.com>\n+\n+\t* config/rs6000/rs6000.md (define_attr \"type\"): New type popcnt.\n+\t(popcntb<mode>2): Add attribute type popcnt.\n+\t(popcntd<mode>2): Ditto.\n+\t* config/rs6000/power4.md (define_insn_reservation): Add type popcnt.\n+\t* config/rs6000/power5.md (define_insn_reservation): Ditto.\n+\t* config/rs6000/power7.md (define_insn_reservation): Ditto.\n+\t* config/rs6000/476.md (define_insn_reservation): Ditto.\n+\t* config/rs6000/power6.md (define_insn_reservation): New\n+\treservation for popcnt instructions.\n+\n 2012-06-22  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* doc/invoke.texi: Update -mpreferred-stack-boundary=3 warning."}, {"sha": "ad0acc343f75e0919ad2ff8a98aa041d1d521701", "filename": "gcc/config/rs6000/476.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2F476.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2F476.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F476.md?ref=42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "patch": "@@ -71,7 +71,7 @@\n    ppc476_i_pipe|ppc476_lj_pipe\")\n \n (define_insn_reservation \"ppc476-complex-integer\" 1\n-  (and (eq_attr \"type\" \"cmp,cr_logical,delayed_cr,cntlz,isel,isync,sync,trap\")\n+  (and (eq_attr \"type\" \"cmp,cr_logical,delayed_cr,cntlz,isel,isync,sync,trap,popcnt\")\n        (eq_attr \"cpu\" \"ppc476\"))\n   \"ppc476_issue,\\\n    ppc476_i_pipe\")"}, {"sha": "c667a5454115b5500a5c87895cbace473c545ce5", "filename": "gcc/config/rs6000/power5.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Fpower5.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Fpower5.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower5.md?ref=42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "patch": "@@ -142,7 +142,7 @@\n ; Integer latency is 2 cycles\n (define_insn_reservation \"power5-integer\" 2\n   (and (eq_attr \"type\" \"integer,insert_dword,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel\")\n+                        var_shift_rotate,cntlz,exts,isel,popcnt\")\n        (eq_attr \"cpu\" \"power5\"))\n   \"iq_power5\")\n "}, {"sha": "39f19b80a888f2e96af1bea942255230e129fe44", "filename": "gcc/config/rs6000/power6.md", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Fpower6.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Fpower6.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower6.md?ref=42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "patch": "@@ -216,6 +216,11 @@\n        (eq_attr \"cpu\" \"power6\"))\n   \"FXU_power6\")\n \n+(define_insn_reservation \"power6-popcnt\" 1\n+  (and (eq_attr \"type\" \"popcnt\")\n+       (eq_attr \"cpu\" \"power6\"))\n+  \"FXU_power6\")\n+\n (define_insn_reservation \"power6-insert\" 1\n   (and (eq_attr \"type\" \"insert_word\")\n        (eq_attr \"cpu\" \"power6\"))"}, {"sha": "cf7fd3770f9986fda9a2298489df0520b2773907", "filename": "gcc/config/rs6000/power7.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Fpower7.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Fpower7.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower7.md?ref=42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "patch": "@@ -150,7 +150,7 @@\n ; FX Unit\n (define_insn_reservation \"power7-integer\" 1\n   (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n-                        var_shift_rotate,exts,isel\")\n+                        var_shift_rotate,exts,isel,popcnt\")\n        (eq_attr \"cpu\" \"power7\"))\n   \"DU_power7,FXU_power7\")\n "}, {"sha": "b264221cc7add026902b6f8acdc3a63342bb3876", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=42533d77ac86ef73fe89ec5daf9c5d7fbb59cf55", "patch": "@@ -145,7 +145,7 @@\n \f\n ;; Define an insn type attribute.  This is used in function unit delay\n ;; computations.\n-(define_attr \"type\" \"integer,two,three,load,load_ext,load_ext_u,load_ext_ux,load_ux,load_u,store,store_ux,store_u,fpload,fpload_ux,fpload_u,fpstore,fpstore_ux,fpstore_u,vecload,vecstore,imul,imul2,imul3,lmul,idiv,ldiv,insert_word,branch,cmp,fast_compare,compare,var_delayed_compare,delayed_compare,imul_compare,lmul_compare,fpcompare,cr_logical,delayed_cr,mfcr,mfcrf,mtcr,mfjmpr,mtjmpr,fp,fpsimple,dmul,sdiv,ddiv,ssqrt,dsqrt,jmpreg,brinc,vecsimple,veccomplex,vecdiv,veccmp,veccmpsimple,vecperm,vecfloat,vecfdiv,vecdouble,isync,sync,load_l,store_c,shift,trap,insert_dword,var_shift_rotate,cntlz,exts,mffgpr,mftgpr,isel\"\n+(define_attr \"type\" \"integer,two,three,load,load_ext,load_ext_u,load_ext_ux,load_ux,load_u,store,store_ux,store_u,fpload,fpload_ux,fpload_u,fpstore,fpstore_ux,fpstore_u,vecload,vecstore,imul,imul2,imul3,lmul,idiv,ldiv,insert_word,branch,cmp,fast_compare,compare,var_delayed_compare,delayed_compare,imul_compare,lmul_compare,fpcompare,cr_logical,delayed_cr,mfcr,mfcrf,mtcr,mfjmpr,mtjmpr,fp,fpsimple,dmul,sdiv,ddiv,ssqrt,dsqrt,jmpreg,brinc,vecsimple,veccomplex,vecdiv,veccmp,veccmpsimple,vecperm,vecfloat,vecfdiv,vecdouble,isync,sync,load_l,store_c,shift,trap,insert_dword,var_shift_rotate,cntlz,exts,mffgpr,mftgpr,isel,popcnt\"\n   (const_string \"integer\"))\n \n ;; Define floating point instruction sub-types for use with Xfpu.md\n@@ -2332,13 +2332,17 @@\n         (unspec:GPR [(match_operand:GPR 1 \"gpc_reg_operand\" \"r\")]\n                      UNSPEC_POPCNTB))]\n   \"TARGET_POPCNTB\"\n-  \"popcntb %0,%1\")\n+  \"popcntb %0,%1\"\n+  [(set_attr \"length\" \"4\")\n+   (set_attr \"type\" \"popcnt\")])\n \n (define_insn \"popcntd<mode>2\"\n   [(set (match_operand:GPR 0 \"gpc_reg_operand\" \"=r\")\n \t(popcount:GPR (match_operand:GPR 1 \"gpc_reg_operand\" \"r\")))]\n   \"TARGET_POPCNTD\"\n-  \"popcnt<wd> %0,%1\")\n+  \"popcnt<wd> %0,%1\"\n+  [(set_attr \"length\" \"4\")\n+   (set_attr \"type\" \"popcnt\")])\n \n (define_expand \"popcount<mode>2\"\n   [(set (match_operand:GPR 0 \"gpc_reg_operand\" \"\")"}]}