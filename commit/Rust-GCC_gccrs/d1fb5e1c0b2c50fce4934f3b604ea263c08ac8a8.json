{"sha": "d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFmYjVlMWMwYjJjNTBmY2U0OTM0ZjNiNjA0ZWEyNjNjMDhhYzhhOA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2007-02-22T04:39:35Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2007-02-22T04:39:35Z"}, "message": "wrapper.exp (${tool}_maybe_build_wrapper): Allow the caller to set options for compiling testglue.\n\n\t* lib/wrapper.exp (${tool}_maybe_build_wrapper): Allow the caller\n\tto set options for compiling testglue.\n\t* lib/g++.exp (g++_init): Compile testglue with -fexceptions.\n\t* lib/obj-c++.exp (obj-c++_init): Likewise.\n\n\t* testsuite/lib/libstdc++.exp (libstdc++_init): Compile testglue\n\twith -fexceptions.\n\nFrom-SVN: r122217", "tree": {"sha": "dea1b0017af1072f775d7d00642e3ee3f5591be1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dea1b0017af1072f775d7d00642e3ee3f5591be1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/comments", "author": null, "committer": null, "parents": [{"sha": "bc52707a5e70fd384c2afc884b90b074ceda49c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc52707a5e70fd384c2afc884b90b074ceda49c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc52707a5e70fd384c2afc884b90b074ceda49c1"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "282d205d54d22c27d79dedbff833b167ec4cea58", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "patch": "@@ -1,3 +1,10 @@\n+2007-02-21  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* lib/wrapper.exp (${tool}_maybe_build_wrapper): Allow the caller\n+\tto set options for compiling testglue.\n+\t* lib/g++.exp (g++_init): Compile testglue with -fexceptions.\n+\t* lib/obj-c++.exp (obj-c++_init): Likewise.\n+\n 2007-02-21  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/derived_aggregate.adb: New test."}, {"sha": "5e3a09838f6e34d191cecd1e5a79fc6a15dcac30", "filename": "gcc/testsuite/lib/g++.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp?ref=d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "patch": "@@ -221,7 +221,7 @@ proc g++_init { args } {\n \tunset gluefile\n     }\n \n-    g++_maybe_build_wrapper \"${tmpdir}/g++-testglue.o\"\n+    g++_maybe_build_wrapper \"${tmpdir}/g++-testglue.o\" \"-fexceptions\"\n \n     if {![info exists CXXFLAGS]} {\n \tset CXXFLAGS \"\""}, {"sha": "3927e76c0f8ee62300cf8d33929f8150c016fc08", "filename": "gcc/testsuite/lib/obj-c++.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2Flib%2Fobj-c%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2Flib%2Fobj-c%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fobj-c%2B%2B.exp?ref=d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "patch": "@@ -239,7 +239,7 @@ proc obj-c++_init { args } {\n \tunset gluefile\n     }\n \n-    obj-c++_maybe_build_wrapper \"${tmpdir}/obj-c++-testglue.o\"\n+    obj-c++_maybe_build_wrapper \"${tmpdir}/obj-c++-testglue.o\" \"-fexceptions\"\n \n     set ALWAYS_OBJCXXFLAGS \"\"\n "}, {"sha": "c61a21d70214f4393b2c65eb2ecb185d8b5d83f2", "filename": "gcc/testsuite/lib/wrapper.exp", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2Flib%2Fwrapper.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/gcc%2Ftestsuite%2Flib%2Fwrapper.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fwrapper.exp?ref=d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "patch": "@@ -16,20 +16,25 @@\n \n # This file contains GCC-specifics for status wrappers for test programs.\n \n-# ${tool}_maybe_build_wrapper -- Build wrapper object if the target needs it.\n+# ${tool}_maybe_build_wrapper -- Build wrapper object if the target\n+# needs it.  FILENAME is the path to the wrapper file.  If there are\n+# additional arguments, they are command-line options to provide to\n+# the compiler when compiling FILENAME.\n \n-proc ${tool}_maybe_build_wrapper { filename } {\n+proc ${tool}_maybe_build_wrapper { filename args } {\n     global gluefile wrap_flags\n \n     if { [target_info needs_status_wrapper] != \"\" \\\n  \t && [target_info needs_status_wrapper] != \"0\" \\\n \t && ![info exists gluefile] } {\n \tset saved_wrap_compile_flags [target_info wrap_compile_flags]\n+\tset flags [join $args \" \"]\n \t# The wrapper code may contain code that gcc objects on.  This\n \t# became true for dejagnu-1.4.4.  The set of warnings and code\n \t# that gcc objects on may change, so just make sure -w is always\n \t# passed to turn off all warnings.\n-\tset_currtarget_info wrap_compile_flags \"$saved_wrap_compile_flags -w\"\n+\tset_currtarget_info wrap_compile_flags \\\n+\t    \"$saved_wrap_compile_flags -w $flags\"\n \tset result [build_wrapper $filename]\n \tset_currtarget_info wrap_compile_flags \"$saved_wrap_compile_flags\"\n \tif { $result != \"\" } {"}, {"sha": "04ed3a8de03f4e6f6c2031a32a9c8fadb11dbeee", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "patch": "@@ -1,3 +1,8 @@\n+2007-02-20  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* testsuite/lib/libstdc++.exp (libstdc++_init): Compile testglue\n+\twith -fexceptions.\n+\n 2007-02-20  Paolo Carlini  <pcarlini@suse.de>\n \n \tPR libstdc++/28080 (partial)"}, {"sha": "3557d13637fb97d260d8267a30fa8060187abec7", "filename": "libstdc++-v3/testsuite/lib/libstdc++.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp?ref=d1fb5e1c0b2c50fce4934f3b604ea263c08ac8a8", "patch": "@@ -225,7 +225,7 @@ proc libstdc++_init { testfile } {\n \tv3track PCH_CXXFLAGS 2\n     }\n \n-    libstdc++_maybe_build_wrapper \"${objdir}/testglue.o\"\n+    libstdc++_maybe_build_wrapper \"${objdir}/testglue.o\" \"-fexceptions\"\n }\n \n # Callback for cleanup routines."}]}