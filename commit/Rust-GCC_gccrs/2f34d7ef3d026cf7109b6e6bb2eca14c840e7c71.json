{"sha": "2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71", "node_id": "C_kwDOANBUbNoAKDJmMzRkN2VmM2QwMjZjZjcxMDliNmU2YmIyZWNhMTRjODQwZTdjNzE", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2022-01-20T18:12:16Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2022-01-20T18:12:16Z"}, "message": "c++: add testcase for recently fixed PR [PR103631]\n\nWe accept this testcase after r12-6773.\n\n\tPR c++/103631\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/cpp2a/nontype-class51.C: New test.", "tree": {"sha": "ef9b4b20f67941b493ffdb3fa8688a1bbcd33776", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef9b4b20f67941b493ffdb3fa8688a1bbcd33776"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71/comments", "author": null, "committer": null, "parents": [{"sha": "5c12507f5d0bc080e4f346af99824e039236e61c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c12507f5d0bc080e4f346af99824e039236e61c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c12507f5d0bc080e4f346af99824e039236e61c"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "1501aa1c42686c8d28b450d9cfd18cb84d7ff657", "filename": "gcc/testsuite/g++.dg/cpp2a/nontype-class51.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnontype-class51.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnontype-class51.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnontype-class51.C?ref=2f34d7ef3d026cf7109b6e6bb2eca14c840e7c71", "patch": "@@ -0,0 +1,26 @@\n+// PR c++/103631\n+// { dg-do compile { target c++20 } }\n+\n+template<class Target, template<auto> class T>\n+constexpr bool is_specialize_value_v = false;\n+\n+template<template<auto> class T, auto Ts>\n+constexpr bool is_specialize_value_v<T<Ts>, T> = true;\n+\n+template<class Target, template<auto> class T>\n+concept specialize_value = is_specialize_value_v<Target, T>;\n+\n+template<int> struct Test { };\n+\n+template<Test>\n+struct A {\n+  template<class T> void f(T) requires specialize_value<T, A>;\n+};\n+\n+int main() {\n+  A<Test<0>{}> a0;\n+  A<Test<1>{}> a1;\n+  a0.f(a0);\n+  a0.f(a1);\n+  a0.f(0); // { dg-error \"no match\" }\n+}"}]}