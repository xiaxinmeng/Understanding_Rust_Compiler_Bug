{"sha": "f04e40afc115bcf2143f541baa9e4cccef19922a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjA0ZTQwYWZjMTE1YmNmMjE0M2Y1NDFiYWE5ZTRjY2NlZjE5OTIyYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-22T20:07:23Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-22T20:07:23Z"}, "message": "mksysinfo: More fixes to emulate master Go library.\n\nFrom-SVN: r186685", "tree": {"sha": "727c68d58637cfdca680a6ec562c70daced9b676", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/727c68d58637cfdca680a6ec562c70daced9b676"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f04e40afc115bcf2143f541baa9e4cccef19922a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f04e40afc115bcf2143f541baa9e4cccef19922a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f04e40afc115bcf2143f541baa9e4cccef19922a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f04e40afc115bcf2143f541baa9e4cccef19922a/comments", "author": null, "committer": null, "parents": [{"sha": "df32732fa8f155d91b88a998e853ca63621ab3a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df32732fa8f155d91b88a998e853ca63621ab3a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df32732fa8f155d91b88a998e853ca63621ab3a9"}], "stats": {"total": 43, "additions": 30, "deletions": 13}, "files": [{"sha": "91b91bfb0a930b409c6bf0e7717fda3f2c83b8d1", "filename": "libgo/config.h.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfig.h.in?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -48,6 +48,9 @@\n /* Define to 1 if you have the <linux/filter.h> header file. */\n #undef HAVE_LINUX_FILTER_H\n \n+/* Define to 1 if you have the <linux/fs.h> header file. */\n+#undef HAVE_LINUX_FS_H\n+\n /* Define to 1 if you have the <linux/if_addr.h> header file. */\n #undef HAVE_LINUX_IF_ADDR_H\n "}, {"sha": "24b05b9271b3a3b4147e65f585785106d7062890", "filename": "libgo/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -14508,7 +14508,7 @@ no)\n   ;;\n esac\n \n-for ac_header in sys/file.h sys/mman.h syscall.h sys/epoll.h sys/inotify.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h net/route.h netpacket/packet.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/reboot.h netinet/in_syst.h netinet/ip.h netinet/ip_mroute.h netinet/if_ether.h\n+for ac_header in sys/file.h sys/mman.h syscall.h sys/epoll.h sys/inotify.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h net/route.h netpacket/packet.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/fs.h linux/reboot.h netinet/in_syst.h netinet/ip.h netinet/ip_mroute.h netinet/if_ether.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\""}, {"sha": "7da76191404cd7850191b32ffcf32768e335ebaf", "filename": "libgo/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -453,7 +453,7 @@ no)\n   ;;\n esac\n \n-AC_CHECK_HEADERS(sys/file.h sys/mman.h syscall.h sys/epoll.h sys/inotify.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h net/route.h netpacket/packet.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/reboot.h netinet/in_syst.h netinet/ip.h netinet/ip_mroute.h netinet/if_ether.h)\n+AC_CHECK_HEADERS(sys/file.h sys/mman.h syscall.h sys/epoll.h sys/inotify.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h net/route.h netpacket/packet.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/fs.h linux/reboot.h netinet/in_syst.h netinet/ip.h netinet/ip_mroute.h netinet/if_ether.h)\n \n AC_CHECK_HEADERS([linux/filter.h linux/if_addr.h linux/if_ether.h linux/if_tun.h linux/netlink.h linux/rtnetlink.h], [], [],\n [#ifdef HAVE_SYS_SOCKET_H"}, {"sha": "01afa39e0f89e82b14916b7a0331cb847397c1e8", "filename": "libgo/go/os/stat.go", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fos%2Fstat.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fos%2Fstat.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fos%2Fstat.go?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -19,7 +19,7 @@ func fileInfoFromStat(st *syscall.Stat_t, name string) FileInfo {\n \tfs := &fileStat{\n \t\tname:    basename(name),\n \t\tsize:    int64(st.Size),\n-\t\tmodTime: timespecToTime(st.Mtime),\n+\t\tmodTime: timespecToTime(st.Mtim),\n \t\tsys:     st,\n \t}\n \tfs.mode = FileMode(st.Mode & 0777)\n@@ -52,5 +52,5 @@ func timespecToTime(ts syscall.Timespec) time.Time {\n \n // For testing.\n func atime(fi FileInfo) time.Time {\n-\treturn timespecToTime(fi.Sys().(*syscall.Stat_t).Atime)\n+\treturn timespecToTime(fi.Sys().(*syscall.Stat_t).Atim)\n }"}, {"sha": "51a2f71e1bef036ee5903b7a15660d41fb79cb13", "filename": "libgo/go/os/stat_solaris.go", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fos%2Fstat_solaris.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fos%2Fstat_solaris.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fos%2Fstat_solaris.go?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -19,7 +19,7 @@ func fileInfoFromStat(st *syscall.Stat_t, name string) FileInfo {\n \tfs := &fileStat{\n \t\tname:    basename(name),\n \t\tsize:    int64(st.Size),\n-\t\tmodTime: timestrucToTime(st.Mtime),\n+\t\tmodTime: timestrucToTime(st.Mtim),\n \t\tsys:     st,\n \t}\n \tfs.mode = FileMode(st.Mode & 0777)\n@@ -52,5 +52,5 @@ func timestrucToTime(ts syscall.Timestruc) time.Time {\n \n // For testing.\n func atime(fi FileInfo) time.Time {\n-\treturn timestrucToTime(fi.(*fileStat).Sys().(*syscall.Stat_t).Atime)\n+\treturn timestrucToTime(fi.(*fileStat).Sys().(*syscall.Stat_t).Atim)\n }"}, {"sha": "7c9f05e8d52361a39dfbfe1aec203f5e2fc5cd9e", "filename": "libgo/go/syscall/libcall_linux.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -335,7 +335,7 @@ func Splice(rfd int, roff *int64, wfd int, woff *int64, len int, flags int) (n i\n //sys\tTee(rfd int, wfd int, len int, flags int) (n int64, err error)\n //tee(rfd int, wfd int, len Size_t, flags uint) Ssize_t\n \n-func Tgkill(tgid, tid int, sig Signal) error {\n+func Tgkill(tgid int, tid int, sig Signal) error {\n \tr1, _, errno := Syscall(SYS_TGKILL, uintptr(tgid), uintptr(tid), uintptr(sig))\n \tif r1 < 0 {\n \t\treturn errno"}, {"sha": "973759086ceb54c70cb535ac6fdd375ef700f566", "filename": "libgo/go/syscall/socket.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fsyscall%2Fsocket.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fgo%2Fsyscall%2Fsocket.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fsocket.go?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -22,7 +22,7 @@ type Sockaddr interface {\n \n type RawSockaddrAny struct {\n \tAddr RawSockaddr\n-\tPad  [12]int8\n+\tPad  [96]int8\n }\n \n const SizeofSockaddrAny = 0x1c"}, {"sha": "487965bf3bffdbfc1ba9e509e635172a689c7774", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 19, "deletions": 5, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f04e40afc115bcf2143f541baa9e4cccef19922a/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=f04e40afc115bcf2143f541baa9e4cccef19922a", "patch": "@@ -151,6 +151,9 @@ cat > sysinfo.c <<EOF\n #if defined(HAVE_LINUX_ETHER_H)\n #include <linux/ether.h>\n #endif\n+#if defined(HAVE_LINUX_FS_H)\n+#include <linux/fs.h>\n+#endif\n #if defined(HAVE_LINUX_REBOOT_H)\n #include <linux/reboot.h>\n #endif\n@@ -271,6 +274,10 @@ done\n grep '^const __PC' gen-sysinfo.go |\n   sed -e 's/^\\(const \\)__\\(PC[^= ]*\\)\\(.*\\)$/\\1\\2 = __\\2/' >> ${OUT}\n \n+# The PATH_MAX constant.\n+grep '^const _PATH_MAX ' gen-sysinfo.go |\n+  echo 'const PathMax = _PATH_MAX' >> ${OUT}\n+\n # epoll constants.\n grep '^const _EPOLL' gen-sysinfo.go |\n   sed -e 's/^\\(const \\)_\\(EPOLL[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n@@ -470,9 +477,9 @@ fi | sed -e 's/type _stat64/type Stat_t/' \\\n          -e 's/st_size/Size/' \\\n          -e 's/st_blksize/Blksize/' \\\n          -e 's/st_blocks/Blocks/' \\\n-         -e 's/st_atim/Atime/' \\\n-         -e 's/st_mtim/Mtime/' \\\n-         -e 's/st_ctim/Ctime/' \\\n+         -e 's/st_atim/Atim/' \\\n+         -e 's/st_mtim/Mtim/' \\\n+         -e 's/st_ctim/Ctim/' \\\n          -e 's/\\([^a-zA-Z0-9_]\\)_timeval\\([^a-zA-Z0-9_]\\)/\\1Timeval\\2/g' \\\n          -e 's/\\([^a-zA-Z0-9_]\\)_timespec_t\\([^a-zA-Z0-9_]\\)/\\1Timespec\\2/g' \\\n          -e 's/\\([^a-zA-Z0-9_]\\)_timespec\\([^a-zA-Z0-9_]\\)/\\1Timespec\\2/g' \\\n@@ -791,6 +798,7 @@ grep '^type _in_pktinfo ' gen-sysinfo.go | \\\n       -e 's/ipi_ifindex/Ifindex/' \\\n       -e 's/ipi_spec_dst/Spec_dst/' \\\n       -e 's/ipi_addr/Addr/' \\\n+      -e 's/_in_addr/[4]byte/g' \\\n     >> ${OUT}\n \n # The in6_pktinfo struct.\n@@ -826,7 +834,7 @@ for n in IGNBRK BRKINT IGNPAR PARMRK INPCK ISTRIP INLCR IGNCR ICRNL IUCLC \\\n     TCSAFLUSH TCIFLUSH TCOFLUSH TCIOFLUSH TCOOFF TCOON TCIOFF TCION B0 B50 \\\n     B75 B110 B134 B150 B200 B300 B600 B1200 B1800 B2400 B4800 B9600 B19200 \\\n     B38400 B57600 B115200 B230400 B460800 B500000 B576000 B921600 B1000000 \\\n-    B1152000 B1500000 B2000000 B2500000 B3000000 B4000000; do\n+    B1152000 B1500000 B2000000 B2500000 B3000000 B3500000 B4000000; do\n \n     grep \"^const _$n \" gen-sysinfo.go | \\\n \tsed -e 's/^\\(const \\)_\\([^=]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n@@ -910,6 +918,8 @@ grep '^type _rlimit ' gen-sysinfo.go | \\\n # The RLIMIT constants.\n grep '^const _RLIMIT_' gen-sysinfo.go |\n     sed -e 's/^\\(const \\)_\\(RLIMIT_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+grep '^const _RLIM_' gen-sysinfo.go |\n+    sed -e 's/^\\(const \\)_\\(RLIM_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n # The sysinfo struct.\n grep '^type _sysinfo ' gen-sysinfo.go | \\\n@@ -990,6 +1000,7 @@ grep '^type _nlmsgerr ' gen-sysinfo.go | \\\n     sed -e 's/_nlmsgerr/NlMsgerr/' \\\n       -e 's/error/Error/' \\\n       -e 's/msg/Msg/' \\\n+      -e 's/_nlmsghdr/NlMsghdr/' \\\n     >> ${OUT}\n \n # The GNU/Linux rtnexthop struct.\n@@ -1004,6 +1015,8 @@ grep '^type _rtnexthop ' gen-sysinfo.go | \\\n # The GNU/Linux netlink flags.\n grep '^const _NETLINK_' gen-sysinfo.go | \\\n   sed -e 's/^\\(const \\)_\\(NETLINK_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+grep '^const _NLA_' gen-sysinfo.go | \\\n+  sed -e 's/^\\(const \\)_\\(NLA_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n # The GNU/Linux packet socket flags.\n grep '^const _PACKET_' gen-sysinfo.go | \\\n@@ -1018,6 +1031,7 @@ grep '^type _inotify_event ' gen-sysinfo.go | \\\n       -e 's/len/Len/' \\\n       -e 's/name/Name/' \\\n       -e 's/\\[\\]/[0]/' \\\n+      -e 's/\\[0\\]byte/[0]int8/' \\\n     >> ${OUT}\n \n # The Solaris 11 Update 1 _zone_net_addr_t struct.\n@@ -1028,7 +1042,7 @@ grep '^type _zone_net_addr_t ' gen-sysinfo.go | \\\n # Struct sizes.\n set cmsghdr Cmsghdr ip_mreq IPMreq ip_mreqn IPMreqn ipv6_mreq IPv6Mreq \\\n     ifaddrmsg IfAddrmsg ifinfomsg IfInfomsg in_pktinfo Inet4Pktinfo \\\n-    in6_pktinfo Inet6PktInfo inotify_event InotifyEvent linger Linger \\\n+    in6_pktinfo Inet6Pktinfo inotify_event InotifyEvent linger Linger \\\n     msghdr Msghdr nlattr NlAttr nlmsgerr NlMsgerr nlmsghdr NlMsghdr \\\n     rtattr RtAttr rtgenmsg RtGenmsg rtmsg RtMsg rtnexthop RtNexthop \\\n     sock_filter SockFilter sock_fprog SockFprog ucred Ucred"}]}