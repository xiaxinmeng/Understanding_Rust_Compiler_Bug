{"sha": "30e257e5442d40427d6c0fd082251aeae0fe747a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzBlMjU3ZTU0NDJkNDA0MjdkNmMwZmQwODIyNTFhZWFlMGZlNzQ3YQ==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gnu.org", "date": "2008-03-11T16:44:25Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2008-03-11T16:44:25Z"}, "message": "langhooks-def.h (LANG_HOOKS_CLEAR_BINDING_STACK): Delete.\n\n2008-03-11  Paolo Bonzini  <bonzini@gnu.org>\n\n        * langhooks-def.h (LANG_HOOKS_CLEAR_BINDING_STACK): Delete.\n        * langhooks.h (struct lang_hooks): Delete clear_binding_stack member.\n        * toplev.c (compile_file): Don't call it.\n\nfortran:\n2008-03-11  Paolo Bonzini  <bonzini@gnu.org>\n\n        * f95-lang.c (LANG_HOOKS_CLEAR_BINDING_STACK): Delete.\n        (gfc_be_parse_file): Call clear_binding_stack from here.\n\t(gfc_clear_binding_stack): Rename to clear_binding_stack.\n\njava:\n2008-03-11  Paolo Bonzini  <bonzini@gnu.org>\n\n        * jcf-parse.c (java_parse_file): Assert binding levels are\n        left in order.\n        * lang.c (LANG_HOOKS_CLEAR_BINDING_STACK, java_clear_binding_stack):\n        Delete.\n\nFrom-SVN: r133115", "tree": {"sha": "f5b891f3a3c958104c9cd25ecf61b8a80ab3caf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5b891f3a3c958104c9cd25ecf61b8a80ab3caf8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30e257e5442d40427d6c0fd082251aeae0fe747a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30e257e5442d40427d6c0fd082251aeae0fe747a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30e257e5442d40427d6c0fd082251aeae0fe747a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30e257e5442d40427d6c0fd082251aeae0fe747a/comments", "author": {"login": "bonzini", "id": 42082, "node_id": "MDQ6VXNlcjQyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonzini", "html_url": "https://github.com/bonzini", "followers_url": "https://api.github.com/users/bonzini/followers", "following_url": "https://api.github.com/users/bonzini/following{/other_user}", "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "organizations_url": "https://api.github.com/users/bonzini/orgs", "repos_url": "https://api.github.com/users/bonzini/repos", "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "608766dc374a9c28bb52bd2d2031e5e0ec6e6727", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/608766dc374a9c28bb52bd2d2031e5e0ec6e6727", "html_url": "https://github.com/Rust-GCC/gccrs/commit/608766dc374a9c28bb52bd2d2031e5e0ec6e6727"}], "stats": {"total": 50, "additions": 25, "deletions": 25}, "files": [{"sha": "0c265403fd61c3684b0a6630169796601474d6bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -1,3 +1,9 @@\n+2008-03-11  Paolo Bonzini  <bonzini@gnu.org>\n+\n+        * langhooks-def.h (LANG_HOOKS_CLEAR_BINDING_STACK): Delete.\n+        * langhooks.h (struct lang_hooks): Delete clear_binding_stack member.\n+        * toplev.c (compile_file): Don't call it.\n+\n 2008-03-11  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR middle-end/35526"}, {"sha": "8139d524081095b04e7914de16b88384af3db385", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -1,3 +1,9 @@\n+2008-03-11  Paolo Bonzini  <bonzini@gnu.org>\n+\n+        * f95-lang.c (LANG_HOOKS_CLEAR_BINDING_STACK): Delete.\n+        (gfc_be_parse_file): Call clear_binding_stack from here.\n+\t(gfc_clear_binding_stack): Rename to clear_binding_stack.\n+\t\t\n 2008-03-09  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/35474"}, {"sha": "52c0a819025f57b353ac2a592550ff6c223bef0b", "filename": "gcc/fortran/f95-lang.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Ffortran%2Ff95-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Ffortran%2Ff95-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ff95-lang.c?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -96,7 +96,7 @@ static bool gfc_mark_addressable (tree);\n void do_function_end (void);\n int global_bindings_p (void);\n void insert_block (tree);\n-static void gfc_clear_binding_stack (void);\n+static void clear_binding_stack (void);\n static void gfc_be_parse_file (int);\n static alias_set_type gfc_get_alias_set (tree);\n \n@@ -111,7 +111,6 @@ static alias_set_type gfc_get_alias_set (tree);\n #undef LANG_HOOKS_MARK_ADDRESSABLE\n #undef LANG_HOOKS_TYPE_FOR_MODE\n #undef LANG_HOOKS_TYPE_FOR_SIZE\n-#undef LANG_HOOKS_CLEAR_BINDING_STACK\n #undef LANG_HOOKS_GET_ALIAS_SET\n #undef LANG_HOOKS_OMP_PRIVATIZE_BY_REFERENCE\n #undef LANG_HOOKS_OMP_PREDETERMINED_SHARING\n@@ -134,7 +133,6 @@ static alias_set_type gfc_get_alias_set (tree);\n #define LANG_HOOKS_MARK_ADDRESSABLE        gfc_mark_addressable\n #define LANG_HOOKS_TYPE_FOR_MODE           gfc_type_for_mode\n #define LANG_HOOKS_TYPE_FOR_SIZE           gfc_type_for_size\n-#define LANG_HOOKS_CLEAR_BINDING_STACK     gfc_clear_binding_stack\n #define LANG_HOOKS_GET_ALIAS_SET\t   gfc_get_alias_set\n #define LANG_HOOKS_OMP_PRIVATIZE_BY_REFERENCE\tgfc_omp_privatize_by_reference\n #define LANG_HOOKS_OMP_PREDETERMINED_SHARING\tgfc_omp_predetermined_sharing\n@@ -268,6 +266,8 @@ gfc_be_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n   gfc_get_errors (&warnings, &errors);\n   errorcount += errors;\n   warningcount += warnings;\n+\n+  clear_binding_stack ();\n }\n \n \n@@ -536,7 +536,7 @@ pushdecl_top_level (tree x)\n \n /* Clear the binding stack.  */\n static void\n-gfc_clear_binding_stack (void)\n+clear_binding_stack (void)\n {\n   while (!global_bindings_p ())\n     poplevel (0, 0, 0);"}, {"sha": "f783e53a250e5e00043fd6c1ee9c7fcb947bcac1", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -1,3 +1,10 @@\n+2008-03-11  Paolo Bonzini  <bonzini@gnu.org>\n+\n+        * jcf-parse.c (java_parse_file): Assert binding levels are\n+        left in order.\n+        * lang.c (LANG_HOOKS_CLEAR_BINDING_STACK, java_clear_binding_stack):\n+        Delete.\n+\n 2008-03-02  Jakub Jelinek  <jakub@redhat.com>\n \n \t* jcf-dump.c (version): Update copyright notice dates."}, {"sha": "b96798ec68b5648ef92b74ce841926b08699162c", "filename": "gcc/java/jcf-parse.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Fjava%2Fjcf-parse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Fjava%2Fjcf-parse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-parse.c?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -1702,6 +1702,7 @@ java_emit_static_constructor (void)\n     cgraph_build_static_cdtor ('I', body, DEFAULT_INIT_PRIORITY);\n }\n \n+\n void\n java_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n {\n@@ -1952,6 +1953,7 @@ java_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n  finish:\n   /* Arrange for any necessary initialization to happen.  */\n   java_emit_static_constructor ();\n+  gcc_assert (global_bindings_p ());\n \n   /* Only finalize the compilation unit after we've told cgraph which\n      functions have their addresses stored.  */"}, {"sha": "fa9811443e216f343d56d7bfc30ba2bb5c0edba5", "filename": "gcc/java/lang.c", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Fjava%2Flang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Fjava%2Flang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flang.c?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -62,7 +62,6 @@ static bool java_dump_tree (void *, tree);\n static void dump_compound_expr (dump_info_p, tree);\n static bool java_decl_ok_for_sibcall (const_tree);\n static tree java_get_callee_fndecl (const_tree);\n-static void java_clear_binding_stack (void);\n \n static enum classify_record java_classify_record (tree type);\n \n@@ -197,9 +196,6 @@ struct language_function GTY(())\n #undef LANG_HOOKS_GET_CALLEE_FNDECL\n #define LANG_HOOKS_GET_CALLEE_FNDECL java_get_callee_fndecl\n \n-#undef LANG_HOOKS_CLEAR_BINDING_STACK\n-#define LANG_HOOKS_CLEAR_BINDING_STACK java_clear_binding_stack\n-\n #undef LANG_HOOKS_SET_DECL_ASSEMBLER_NAME\n #define LANG_HOOKS_SET_DECL_ASSEMBLER_NAME java_mangle_decl\n \n@@ -949,14 +945,6 @@ java_get_callee_fndecl (const_tree call_expr)\n }\n \n \n-/* Clear the binding stack.  */\n-static void\n-java_clear_binding_stack (void)\n-{\n-  while (!global_bindings_p ())\n-    poplevel (0, 0, 0);\n-}\n-\n static enum classify_record\n java_classify_record (tree type)\n {"}, {"sha": "9f2cc71a431f349d05503801ddccf71554eb235e", "filename": "gcc/langhooks-def.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Flanghooks-def.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Flanghooks-def.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks-def.h?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -85,7 +85,6 @@ extern void lhd_omp_firstprivatize_type_sizes (struct gimplify_omp_ctx *,\n #define LANG_HOOKS_INIT\t\t\thook_bool_void_false\n #define LANG_HOOKS_FINISH\t\tlhd_do_nothing\n #define LANG_HOOKS_PARSE_FILE\t\tlhd_do_nothing_i\n-#define LANG_HOOKS_CLEAR_BINDING_STACK\tlhd_do_nothing\n #define LANG_HOOKS_INIT_OPTIONS\t\thook_uint_uint_constcharptrptr_0\n #define LANG_HOOKS_INITIALIZE_DIAGNOSTICS lhd_initialize_diagnostics\n #define LANG_HOOKS_HANDLE_OPTION\thook_int_size_t_constcharptr_int_0\n@@ -250,7 +249,6 @@ extern tree lhd_make_node (enum tree_code);\n   LANG_HOOKS_INIT, \\\n   LANG_HOOKS_FINISH, \\\n   LANG_HOOKS_PARSE_FILE, \\\n-  LANG_HOOKS_CLEAR_BINDING_STACK, \\\n   LANG_HOOKS_GET_ALIAS_SET, \\\n   LANG_HOOKS_EXPAND_EXPR, \\\n   LANG_HOOKS_EXPAND_DECL, \\"}, {"sha": "9da60f11b23184d5777ca47fe8a6b4921cd29e33", "filename": "gcc/langhooks.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Flanghooks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Flanghooks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.h?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -294,9 +294,6 @@ struct lang_hooks\n      parsers to dump debugging information during parsing.  */\n   void (*parse_file) (int);\n \n-  /* Called immediately after parsing to clear the binding stack.  */\n-  void (*clear_binding_stack) (void);\n-\n   /* Called to obtain the alias set to be used for an expression or type.\n      Returns -1 if the language does nothing special for it.  */\n   alias_set_type (*get_alias_set) (tree);"}, {"sha": "12777aa0a4bbdfe6dd1a5b044b19724d93803691", "filename": "gcc/toplev.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e257e5442d40427d6c0fd082251aeae0fe747a/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=30e257e5442d40427d6c0fd082251aeae0fe747a", "patch": "@@ -958,10 +958,6 @@ compile_file (void)\n      rest_of_compilation for each function).  */\n   lang_hooks.parse_file (set_yydebug);\n \n-  /* In case there were missing block closers,\n-     get us back to the global binding level.  */\n-  lang_hooks.clear_binding_stack ();\n-\n   /* Compilation is now finished except for writing\n      what's left of the symbol table output.  */\n   timevar_pop (TV_PARSE);"}]}