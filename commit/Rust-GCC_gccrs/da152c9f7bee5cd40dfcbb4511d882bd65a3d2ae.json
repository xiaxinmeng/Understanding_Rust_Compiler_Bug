{"sha": "da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGExNTJjOWY3YmVlNWNkNDBkZmNiYjQ1MTFkODgyYmQ2NWEzZDJhZQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2016-04-17T05:22:04Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2016-04-17T05:22:04Z"}, "message": "Propagate dump flags in pass_manager::register_pass\n\n2016-04-17  Tom de Vries  <tom@codesourcery.com>\n\n\tPR other/70183\n\t* passes.c (pass_manager::register_pass): Propagate pflags.\n\n\t* gcc.target/i386/vzeroupper-dump-flags.c: New test.\n\nFrom-SVN: r235072", "tree": {"sha": "f007719809e67c58e12e9efb1d74a56ee091813c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f007719809e67c58e12e9efb1d74a56ee091813c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/comments", "author": null, "committer": null, "parents": [{"sha": "17e7ab87992bddfeb3a5f051e024e94d97cbc0a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17e7ab87992bddfeb3a5f051e024e94d97cbc0a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17e7ab87992bddfeb3a5f051e024e94d97cbc0a8"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "1dfae4020e64c4f6333f9f31d0864b64991b4243", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "patch": "@@ -1,3 +1,8 @@\n+2016-04-17  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR other/70183\n+\t* passes.c (pass_manager::register_pass): Propagate pflags.\n+\n 2016-04-17  Tom de Vries  <tom@codesourcery.com>\n \n \tPR other/68875"}, {"sha": "b9eab06f93fdcca7f63176751ffcbdf02229640e", "filename": "gcc/passes.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "patch": "@@ -1497,8 +1497,12 @@ pass_manager::register_pass (struct register_pass_info *pass_info)\n         tdi = TDI_rtl_all;\n       /* Check if dump-all flag is specified.  */\n       if (dumps->get_dump_file_info (tdi)->pstate)\n-        dumps->get_dump_file_info (added_pass_nodes->pass->static_pass_number)\n+\t{\n+\t  dumps->get_dump_file_info (added_pass_nodes->pass->static_pass_number)\n             ->pstate = dumps->get_dump_file_info (tdi)->pstate;\n+\t  dumps->get_dump_file_info (added_pass_nodes->pass->static_pass_number)\n+\t    ->pflags = dumps->get_dump_file_info (tdi)->pflags;\n+\t}\n       XDELETE (added_pass_nodes);\n       added_pass_nodes = next_node;\n     }"}, {"sha": "79b6afa4c2db2f6252f70bb8ffb2bf49862a988c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "patch": "@@ -1,3 +1,8 @@\n+2016-04-17  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR other/70183\n+\t* gcc.target/i386/vzeroupper-dump-flags.c: New test.\n+\n 2016-04-15  Jan Hubicka  <jh@suse.cz>\n \n \tPR ipa/70018"}, {"sha": "933e59578985b26e073735f9de68c23b17386246", "filename": "gcc/testsuite/gcc.target/i386/vzeroupper-dump-flags.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvzeroupper-dump-flags.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvzeroupper-dump-flags.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvzeroupper-dump-flags.c?ref=da152c9f7bee5cd40dfcbb4511d882bd65a3d2ae", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-options \" -fdump-rtl-all-slim -mavx -mvzeroupper -fexpensive-optimizations\" } */\n+\n+int\n+foo (void)\n+{\n+  return 0;\n+}\n+\n+/* { dg-final { scan-rtl-dump-not \"\\\\(insn \" \"vzeroupper\" } }  */"}]}