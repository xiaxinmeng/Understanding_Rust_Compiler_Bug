{"sha": "561d011953965a425463900548c29187c2898179", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTYxZDAxMTk1Mzk2NWE0MjU0NjM5MDA1NDhjMjkxODdjMjg5ODE3OQ==", "commit": {"author": {"name": "Siddhesh Poyarekar", "email": "siddhesh@sourceware.org", "date": "2018-08-03T01:51:42Z"}, "committer": {"name": "Siddhesh Poyarekar", "email": "siddhesh@gcc.gnu.org", "date": "2018-08-03T01:51:42Z"}, "message": "[aarch64] Fix falkor pipeline description for dup<q>\n\nThere was a typo in the pipeline description where DUP was assigned to\nthe vector pipes for quad mode ops when it really only uses the VTOG\npipes.  Fixing this does not show any noticeable difference in\nperformance (there's a very small bump of 1.7% in x264 but that's\nabout it) in my tests but is the more precise description of operations\nfor falkor.\n\n\t* config/aarch64/falkor.md (falkor_am_1_vxvy_vxvy): Move\n\tneon_dup_q to...\n\t(falkor_am_1_gtov_gtov): ... a new insn reservation.\n\nFrom-SVN: r263285", "tree": {"sha": "c12a319bd1393dcd45fb07c736b6ba9f1da656ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c12a319bd1393dcd45fb07c736b6ba9f1da656ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/561d011953965a425463900548c29187c2898179", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/561d011953965a425463900548c29187c2898179", "html_url": "https://github.com/Rust-GCC/gccrs/commit/561d011953965a425463900548c29187c2898179", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/561d011953965a425463900548c29187c2898179/comments", "author": {"login": "siddhesh", "id": 158582, "node_id": "MDQ6VXNlcjE1ODU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/158582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siddhesh", "html_url": "https://github.com/siddhesh", "followers_url": "https://api.github.com/users/siddhesh/followers", "following_url": "https://api.github.com/users/siddhesh/following{/other_user}", "gists_url": "https://api.github.com/users/siddhesh/gists{/gist_id}", "starred_url": "https://api.github.com/users/siddhesh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siddhesh/subscriptions", "organizations_url": "https://api.github.com/users/siddhesh/orgs", "repos_url": "https://api.github.com/users/siddhesh/repos", "events_url": "https://api.github.com/users/siddhesh/events{/privacy}", "received_events_url": "https://api.github.com/users/siddhesh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "90d981fb124adf29d3e0da41ea7954058c0c8601", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90d981fb124adf29d3e0da41ea7954058c0c8601", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90d981fb124adf29d3e0da41ea7954058c0c8601"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "77d110d3c73d26f73c9abb01e74495d7ba0bf73a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/561d011953965a425463900548c29187c2898179/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/561d011953965a425463900548c29187c2898179/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=561d011953965a425463900548c29187c2898179", "patch": "@@ -1,3 +1,9 @@\n+2018-08-03  Siddhesh Poyarekar  <siddhesh@sourceware.org>\n+\n+\t* config/aarch64/falkor.md (falkor_am_1_vxvy_vxvy): Move\n+\tneon_dup_q to...\n+\t(falkor_am_1_gtov_gtov): ... a new insn reservation.\n+\n 2018-07-19  Ilya Leoshkevich  <iii@linux.ibm.com>\n \n \t* config/nds32/nds32.c (nds32_hard_regno_mode_ok): Replace > with >=."}, {"sha": "45cbff93b24fc516806662dfeb63e4286b0e95cd", "filename": "gcc/config/aarch64/falkor.md", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/561d011953965a425463900548c29187c2898179/gcc%2Fconfig%2Faarch64%2Ffalkor.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/561d011953965a425463900548c29187c2898179/gcc%2Fconfig%2Faarch64%2Ffalkor.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Ffalkor.md?ref=561d011953965a425463900548c29187c2898179", "patch": "@@ -322,6 +322,12 @@\n        (eq_attr \"type\" \"neon_from_gp_q\"))\n   \"falkor_gtov,falkor_gtov\")\n \n+;; DUP  does not use vector pipes in Q mode, only gtov+gtov.\n+(define_insn_reservation \"falkor_am_1_gtov_gtov\" 1\n+  (and (eq_attr \"tune\" \"falkor\")\n+       (eq_attr \"type\" \"neon_dup_q\"))\n+  \"falkor_gtov*2\")\n+\n ;; neon_to_gp_q is used for 32-bit ARM instructions that move 64-bits of data\n ;; so no use needed here.\n \n@@ -337,7 +343,7 @@\n \n (define_insn_reservation \"falkor_am_1_vxvy_vxvy\" 1\n   (and (eq_attr \"tune\" \"falkor\")\n-       (eq_attr \"type\" \"neon_bsl_q,neon_dup_q,neon_ext_q,neon_move_q,neon_rev_q,neon_tbl1_q,neon_permute_q\"))\n+       (eq_attr \"type\" \"neon_bsl_q,neon_ext_q,neon_move_q,neon_rev_q,neon_tbl1_q,neon_permute_q\"))\n   \"falkor_vxvy+falkor_vxvy\")\n \n (define_insn_reservation \"falkor_am_2_vxvy\" 2"}]}