{"sha": "0701ea2e186419367a5698ea73dad8a12466ff63", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDcwMWVhMmUxODY0MTkzNjdhNTY5OGVhNzNkYWQ4YTEyNDY2ZmY2Mw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2006-06-04T09:32:56Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2006-06-04T09:32:56Z"}, "message": "re PR libstdc++/27867 (compile error in repeated application of valarray<>::operator==)\n\n2006-06-04  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR libstdc++/27867\n\t* include/bits/valarray_before.h (struct _BinClos<_Oper, _ValArray,\n\t_ValArray, _Tp, _Tp>): Fix value_type typedef.\n\t* testsuite/26_numerics/valarray/27867.cc: New.\n\nFrom-SVN: r114356", "tree": {"sha": "f808063db09e8cd28e2a3dff98a170d579f9cdcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f808063db09e8cd28e2a3dff98a170d579f9cdcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0701ea2e186419367a5698ea73dad8a12466ff63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0701ea2e186419367a5698ea73dad8a12466ff63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0701ea2e186419367a5698ea73dad8a12466ff63", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0701ea2e186419367a5698ea73dad8a12466ff63/comments", "author": null, "committer": null, "parents": [{"sha": "94e76332ac46967475264f588302fc74e499a9dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94e76332ac46967475264f588302fc74e499a9dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94e76332ac46967475264f588302fc74e499a9dd"}], "stats": {"total": 64, "additions": 62, "deletions": 2}, "files": [{"sha": "0990cbde20ca094ca1a3fd431e4a074c783a0290", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0701ea2e186419367a5698ea73dad8a12466ff63/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0701ea2e186419367a5698ea73dad8a12466ff63/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=0701ea2e186419367a5698ea73dad8a12466ff63", "patch": "@@ -1,3 +1,10 @@\n+2006-06-04  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR libstdc++/27867\n+\t* include/bits/valarray_before.h (struct _BinClos<_Oper, _ValArray,\n+\t_ValArray, _Tp, _Tp>): Fix value_type typedef.\n+\t* testsuite/26_numerics/valarray/27867.cc: New.\n+\n 2006-05-29  Paolo Carlini  <pcarlini@suse.de>\n \n \tPR libstdc++/24692"}, {"sha": "ad771e85e886f406b159703f4b2300d6b68bc159", "filename": "libstdc++-v3/include/bits/valarray_before.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0701ea2e186419367a5698ea73dad8a12466ff63/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fvalarray_before.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0701ea2e186419367a5698ea73dad8a12466ff63/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fvalarray_before.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fvalarray_before.h?ref=0701ea2e186419367a5698ea73dad8a12466ff63", "patch": "@@ -1,6 +1,6 @@\n // The template and inlines for the -*- C++ -*- internal _Meta class.\n \n-// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -589,7 +589,7 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n     : _BinBase<_Oper, valarray<_Tp>, valarray<_Tp> >\n     {\n       typedef _BinBase<_Oper, valarray<_Tp>, valarray<_Tp> > _Base;\n-      typedef _Tp value_type;\n+      typedef typename _Base::value_type value_type;\n \n       _BinClos(const valarray<_Tp>& __v, const valarray<_Tp>& __w)\n       : _Base(__v, __w) {}"}, {"sha": "7c208f4b100c9751f61f76349201944a515304fe", "filename": "libstdc++-v3/testsuite/26_numerics/valarray/27867.cc", "status": "added", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0701ea2e186419367a5698ea73dad8a12466ff63/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fvalarray%2F27867.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0701ea2e186419367a5698ea73dad8a12466ff63/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fvalarray%2F27867.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fvalarray%2F27867.cc?ref=0701ea2e186419367a5698ea73dad8a12466ff63", "patch": "@@ -0,0 +1,53 @@\n+// Copyright (C) 2006 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// As a special exception, you may use this file as part of a free software\n+// library without restriction.  Specifically, if other files instantiate\n+// templates or use macros or inline functions from this file, or you compile\n+// this file and link it with other files to produce an executable, this\n+// file does not by itself cause the resulting executable to be covered by\n+// the GNU General Public License.  This exception does not however\n+// invalidate any other reasons why the executable file might be covered by\n+// the GNU General Public License.\n+\n+#include <valarray>\n+#include <testsuite_hooks.h>\n+\n+// libstdc++/27867\n+void test01()\n+{\n+  bool test __attribute__((unused)) = true;\n+\n+  std::valarray<int> v1(100, 1);\n+  std::valarray<int> v2(100, 1);\n+  std::valarray<bool> v3(true, 1);\n+\n+  std::valarray<bool> resl(1);\n+  resl = ((v1 == v2) == v3);\n+  VERIFY( resl[0] == true );\n+\n+  std::valarray<bool> resr(1);\n+  resr = (v3 == (v1 == v2));\n+  VERIFY( resr[0] == true );\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}]}