{"sha": "f6bac694c268aa6bd605c215f7aae27ff774631d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZiYWM2OTRjMjY4YWE2YmQ2MDVjMjE1ZjdhYWUyN2ZmNzc0NjMxZA==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2010-10-22T19:56:51Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2010-10-22T19:56:51Z"}, "message": "* config/m32c/m32c-lib1.S (m32c_jsri16): Make reentrant.\n\nFrom-SVN: r165859", "tree": {"sha": "cf3f19139965e023b2decc8bbc4c03d514314504", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf3f19139965e023b2decc8bbc4c03d514314504"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6bac694c268aa6bd605c215f7aae27ff774631d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6bac694c268aa6bd605c215f7aae27ff774631d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6bac694c268aa6bd605c215f7aae27ff774631d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6bac694c268aa6bd605c215f7aae27ff774631d/comments", "author": null, "committer": null, "parents": [{"sha": "4d1bc60a12eafe8aed38fff234a4f6ca16f78501", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d1bc60a12eafe8aed38fff234a4f6ca16f78501", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d1bc60a12eafe8aed38fff234a4f6ca16f78501"}], "stats": {"total": 36, "additions": 24, "deletions": 12}, "files": [{"sha": "78802b06bd4e91a4ef39b8e63b6ca39059415d96", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6bac694c268aa6bd605c215f7aae27ff774631d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6bac694c268aa6bd605c215f7aae27ff774631d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f6bac694c268aa6bd605c215f7aae27ff774631d", "patch": "@@ -1,3 +1,7 @@\n+2010-10-22  DJ Delorie  <dj@redhat.com>\n+\n+\t* config/m32c/m32c-lib1.S (m32c_jsri16): Make reentrant.\n+\n 2010-10-22  Paul Koning  <ni1d@arrl.net>\n \n \t* config/pdp11/pdp11.h (IRA_COVER_CLASSES): Define."}, {"sha": "777781b6fda18961cf17e47b1601f9617c386da0", "filename": "gcc/config/m32c/m32c-lib1.S", "status": "modified", "additions": 20, "deletions": 12, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6bac694c268aa6bd605c215f7aae27ff774631d/gcc%2Fconfig%2Fm32c%2Fm32c-lib1.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6bac694c268aa6bd605c215f7aae27ff774631d/gcc%2Fconfig%2Fm32c%2Fm32c-lib1.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fm32c-lib1.S?ref=f6bac694c268aa6bd605c215f7aae27ff774631d", "patch": "@@ -204,20 +204,28 @@ cmpsi_lt:\n #endif\n \n #ifdef L__m32c_jsri16\n-\t.data\n-m32c_jsri_addr:\n-\t.byte\t0, 0, 0\n-m32c_jsri_ret:\n-\t.byte\t0, 0, 0\n-\n \t.text\n+#ifdef A16\n \t.global\tm32c_jsri16\n m32c_jsri16:\n-\tpop.w\tm32c_jsri_ret\n-\tpop.b\tm32c_jsri_ret+2\n-\tpop.w\tm32c_jsri_addr\n-\tpush.b\tm32c_jsri_ret+2\n-\tpush.w\tm32c_jsri_ret\n-\tjmpi.a\tm32c_jsri_addr\n+\tadd.w\t#-1, sp\n+\n+\t/* Read the address (16 bits) and return address (24 bits) off\n+\tthe stack.  */\n+\tmov.w\t4[sp], r0\n+\tmov.w\t1[sp], r3\n+\tmov.b\t3[sp], a0 /* This zero-extends, so the high byte has\n+\t\t\t     zero in it.  */\n+\n+\t/* Write the return address, then new address, to the stack.  */\n+\tmov.w\ta0, 1[sp] /* Just to get the zero in 2[sp].  */\n+\tmov.w\tr0, 0[sp]\n+\tmov.w\tr3, 3[sp]\n+\tmov.b\ta0, 5[sp]\n+\n+\t/* This \"returns\" to the target address, leaving the pending\n+\treturn address on the stack.  */\n+\trts\n+#endif\n \n #endif"}]}