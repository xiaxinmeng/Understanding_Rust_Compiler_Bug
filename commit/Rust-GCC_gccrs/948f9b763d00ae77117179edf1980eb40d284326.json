{"sha": "948f9b763d00ae77117179edf1980eb40d284326", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTQ4ZjliNzYzZDAwYWU3NzExNzE3OWVkZjE5ODBlYjQwZDI4NDMyNg==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2015-02-26T11:56:45Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2015-02-26T11:56:45Z"}, "message": "gcc-dg.exp (cleanup-final-insns-dump): New procedure.\n\n\t* lib/gcc-dg.exp (cleanup-final-insns-dump): New procedure.\n\t* g++.dg/opt/dump1.C (dg-final): Call cleanup-final-insns-dump.\n\nFrom-SVN: r221004", "tree": {"sha": "930c20466fefd823ae632d88a0f849212e1bc745", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/930c20466fefd823ae632d88a0f849212e1bc745"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/948f9b763d00ae77117179edf1980eb40d284326", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/948f9b763d00ae77117179edf1980eb40d284326", "html_url": "https://github.com/Rust-GCC/gccrs/commit/948f9b763d00ae77117179edf1980eb40d284326", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/948f9b763d00ae77117179edf1980eb40d284326/comments", "author": null, "committer": null, "parents": [{"sha": "b24b326283f936111a47350db174620aa1d6115d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b24b326283f936111a47350db174620aa1d6115d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b24b326283f936111a47350db174620aa1d6115d"}], "stats": {"total": 28, "additions": 24, "deletions": 4}, "files": [{"sha": "b1efb2b5bca1a2deb96395e15978e9f75aa211ce", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/948f9b763d00ae77117179edf1980eb40d284326/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/948f9b763d00ae77117179edf1980eb40d284326/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=948f9b763d00ae77117179edf1980eb40d284326", "patch": "@@ -1,3 +1,8 @@\n+2015-02-26  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* lib/gcc-dg.exp (cleanup-final-insns-dump): New procedure.\n+\t* g++.dg/opt/dump1.C (dg-final): Call cleanup-final-insns-dump.\n+\n 2015-02-26  Yuri Rumyantsev  <ysrumyan@gmail.com>\n \n \tPR target/65161\n@@ -209,7 +214,7 @@\n \n 2015-02-19  Maxim Kuvyrkov  <maxim.kuvyrkov@linaro.org>\n \n-\t* testsuite/lib/target-supports.exp (check_compile): Save/restore\n+\t* lib/target-supports.exp (check_compile): Save/restore\n \tadditional_sources that may belong to an actual test.\n \n 2015-02-18  Jakub Jelinek  <jakub@redhat.com>\n@@ -695,7 +700,7 @@\n \t    Brian Rzycki  <b.rzycki@samsung.com>\n \n \tPR tree-optimization/64878\n-\t* testsuite/gcc.dg/tree-ssa/ssa-dom-thread-8.c: New.\n+\t* gcc.dg/tree-ssa/ssa-dom-thread-8.c: New.\n \n 2015-02-06  Jakub Jelinek  <jakub@redhat.com>\n \n@@ -1437,7 +1442,7 @@\n \n 2015-01-21  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n-\t* gcc/testsuite/c-c++-common/tsan/step.c: New testcase.\n+\t* c-c++-common/tsan/step.c: New testcase.\n \n 2015-01-21  Christophe Lyon  <christophe.lyon@linaro.org>\n "}, {"sha": "d263f18e99fd848abfe6e1b1fdeaa74b1d00fddf", "filename": "gcc/testsuite/g++.dg/opt/dump1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/948f9b763d00ae77117179edf1980eb40d284326/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fdump1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/948f9b763d00ae77117179edf1980eb40d284326/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fdump1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fdump1.C?ref=948f9b763d00ae77117179edf1980eb40d284326", "patch": "@@ -1,7 +1,7 @@\n // PR c++/57102\n // { dg-options \"-O2 -fno-inline -fdump-final-insns\" }\n // { dg-do compile { target c++11 } }\n-// { dg-final cleanup-saved-temps }\n+// { dg-final cleanup-final-insns-dump }\n \n namespace std\n {"}, {"sha": "4fa433d9954193907ffe13f64649aacfb5e22a5e", "filename": "gcc/testsuite/lib/gcc-dg.exp", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/948f9b763d00ae77117179edf1980eb40d284326/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/948f9b763d00ae77117179edf1980eb40d284326/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp?ref=948f9b763d00ae77117179edf1980eb40d284326", "patch": "@@ -548,6 +548,21 @@ proc cleanup-ipa-dump { suffix } {\n   cleanup-dump \"\\[0-9\\]\\[0-9\\]\\[0-9\\]i.$suffix\"\n }\n \n+# Remove a final insns dump file for the current test.\n+proc cleanup-final-insns-dump { } {\n+    set testcase [testname-for-summary]\n+    # The name might include a list of options; extract the file name.\n+    set testcase [lindex $testcase 0]\n+    remove-build-file \"[file rootname [file tail $testcase]].s.gkd\"\n+\n+    # Clean up files for additional source files.\n+    if [info exists additional_sources_used] {\n+\tforeach srcfile $additional_sources_used {\n+\t    remove-build-file \"[file rootname [file tail $srcfile]].s.gkd\"\n+\t}\n+    }\n+}\n+\n # Remove a stack usage file for the current test.\n proc cleanup-stack-usage { } {\n     set testcase [testname-for-summary]"}]}