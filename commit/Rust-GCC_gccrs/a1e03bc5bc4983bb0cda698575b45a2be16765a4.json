{"sha": "a1e03bc5bc4983bb0cda698575b45a2be16765a4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTFlMDNiYzViYzQ5ODNiYjBjZGE2OTg1NzViNDVhMmJlMTY3NjVhNA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2013-03-17T02:34:31Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2013-03-17T02:34:31Z"}, "message": "re PR c++/55241 ([C++11] diagnostics show sizeof...(T) as sizeof(T...))\n\n\tPR c++/55241\n\t* error.c (dump_expr) [SIZEOF_EXPR]: Print sizeof... properly.\n\nFrom-SVN: r196726", "tree": {"sha": "676cbc9dba69f0ecdae8dc6f0e2276c2b024032e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/676cbc9dba69f0ecdae8dc6f0e2276c2b024032e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a1e03bc5bc4983bb0cda698575b45a2be16765a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1e03bc5bc4983bb0cda698575b45a2be16765a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1e03bc5bc4983bb0cda698575b45a2be16765a4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1e03bc5bc4983bb0cda698575b45a2be16765a4/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d09b76f1533e68693677cd41527761e8cfafe49f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d09b76f1533e68693677cd41527761e8cfafe49f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d09b76f1533e68693677cd41527761e8cfafe49f"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "5b278201f7b6234d419bd15a2d2bc2db7ff59623", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e03bc5bc4983bb0cda698575b45a2be16765a4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e03bc5bc4983bb0cda698575b45a2be16765a4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a1e03bc5bc4983bb0cda698575b45a2be16765a4", "patch": "@@ -1,5 +1,8 @@\n 2013-03-16  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/55241\n+\t* error.c (dump_expr) [SIZEOF_EXPR]: Print sizeof... properly.\n+\n \t* parser.c (lookup_literal_operator): Correct parm/arg naming\n \tmixup.\n "}, {"sha": "c3dce1dd5b3f69a44fbc271f9eeaec8231d06319", "filename": "gcc/cp/error.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e03bc5bc4983bb0cda698575b45a2be16765a4/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e03bc5bc4983bb0cda698575b45a2be16765a4/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=a1e03bc5bc4983bb0cda698575b45a2be16765a4", "patch": "@@ -1783,6 +1783,8 @@ resolve_virtual_fun_from_obj_type_ref (tree ref)\n static void\n dump_expr (tree t, int flags)\n {\n+  tree op;\n+\n   if (t == 0)\n     return;\n \n@@ -2316,14 +2318,20 @@ dump_expr (tree t, int flags)\n \t  gcc_assert (TREE_CODE (t) == ALIGNOF_EXPR);\n \t  pp_cxx_ws_string (cxx_pp, \"__alignof__\");\n \t}\n+      op = TREE_OPERAND (t, 0);\n+      if (PACK_EXPANSION_P (op))\n+\t{\n+\t  pp_string (cxx_pp, \"...\");\n+\t  op = PACK_EXPANSION_PATTERN (op);\n+\t}\n       pp_cxx_whitespace (cxx_pp);\n       pp_cxx_left_paren (cxx_pp);\n       if (TREE_CODE (t) == SIZEOF_EXPR && SIZEOF_EXPR_TYPE_P (t))\n-\tdump_type (TREE_TYPE (TREE_OPERAND (t, 0)), flags);\n+\tdump_type (TREE_TYPE (op), flags);\n       else if (TYPE_P (TREE_OPERAND (t, 0)))\n-\tdump_type (TREE_OPERAND (t, 0), flags);\n+\tdump_type (op, flags);\n       else\n-\tdump_expr (TREE_OPERAND (t, 0), flags);\n+\tdump_expr (op, flags);\n       pp_cxx_right_paren (cxx_pp);\n       break;\n "}, {"sha": "69f1f988f300804493346a9d9a31a2307a7da009", "filename": "gcc/testsuite/g++.dg/diagnostic/variadic1.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e03bc5bc4983bb0cda698575b45a2be16765a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fvariadic1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e03bc5bc4983bb0cda698575b45a2be16765a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fvariadic1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fvariadic1.C?ref=a1e03bc5bc4983bb0cda698575b45a2be16765a4", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/55241\n+// { dg-do compile { target c++11 } }\n+\n+template<int N> struct B { };\n+template<typename... T> struct A\n+{\n+  B<sizeof...(T)> f();\t\t// { dg-error \"sizeof\\\\.\\\\.\\\\.\" }\n+  B<42> f();\t\t\t// { dg-error \"cannot be overloaded\" }\n+};"}]}