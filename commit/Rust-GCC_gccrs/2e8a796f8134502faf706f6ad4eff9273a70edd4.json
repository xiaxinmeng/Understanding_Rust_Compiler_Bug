{"sha": "2e8a796f8134502faf706f6ad4eff9273a70edd4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmU4YTc5NmY4MTM0NTAyZmFmNzA2ZjZhZDRlZmY5MjczYTcwZWRkNA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2009-02-02T19:40:20Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2009-02-02T19:40:20Z"}, "message": "mips.h (FILE_HAS_64BIT_SYMBOLS): New macro.\n\ngcc/\n\t* config/mips/mips.h (FILE_HAS_64BIT_SYMBOLS): New macro.\n\t(ABI_HAS_64BIT_SYMBOLS): Use it.\n\t(DWARF2_ADDR_SIZE): Use it instead of ABI_HAS_64BIT_SYMBOLS.\n\nFrom-SVN: r143878", "tree": {"sha": "0e78728d60d53b211a2ec9f6124342c43bf25fed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e78728d60d53b211a2ec9f6124342c43bf25fed"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e8a796f8134502faf706f6ad4eff9273a70edd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e8a796f8134502faf706f6ad4eff9273a70edd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e8a796f8134502faf706f6ad4eff9273a70edd4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e8a796f8134502faf706f6ad4eff9273a70edd4/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ce6b9ebbe247f368ea9f75427b53b7065e94b0db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce6b9ebbe247f368ea9f75427b53b7065e94b0db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce6b9ebbe247f368ea9f75427b53b7065e94b0db"}], "stats": {"total": 27, "additions": 23, "deletions": 4}, "files": [{"sha": "3e703aca0269e917e919015b84d911f9455a9367", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e8a796f8134502faf706f6ad4eff9273a70edd4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e8a796f8134502faf706f6ad4eff9273a70edd4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2e8a796f8134502faf706f6ad4eff9273a70edd4", "patch": "@@ -1,3 +1,9 @@\n+2009-02-02  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* config/mips/mips.h (FILE_HAS_64BIT_SYMBOLS): New macro.\n+\t(ABI_HAS_64BIT_SYMBOLS): Use it.\n+\t(DWARF2_ADDR_SIZE): Use it instead of ABI_HAS_64BIT_SYMBOLS.\n+\n 2009-02-02  Paul Brook  <paul@codesourcery.com>\n \n \t* config/arm/arm.md (arm_addsi3): Add r/r/k alternative."}, {"sha": "464148704f3328cca2b2d27ad7c526006a400ceb", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 17, "deletions": 4, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e8a796f8134502faf706f6ad4eff9273a70edd4/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e8a796f8134502faf706f6ad4eff9273a70edd4/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=2e8a796f8134502faf706f6ad4eff9273a70edd4", "patch": "@@ -767,9 +767,15 @@ enum mips_code_readable_setting {\n /* Likewise for 32-bit regs.  */\n #define ABI_NEEDS_32BIT_REGS\t(mips_abi == ABI_32)\n \n-/* True if symbols are 64 bits wide.  At present, n64 is the only\n-   ABI for which this is true.  */\n-#define ABI_HAS_64BIT_SYMBOLS\t(mips_abi == ABI_64 && !TARGET_SYM32)\n+/* True if the file format uses 64-bit symbols.  At present, this is\n+   only true for n64, which uses 64-bit ELF.  */\n+#define FILE_HAS_64BIT_SYMBOLS\t(mips_abi == ABI_64)\n+\n+/* True if symbols are 64 bits wide.  This is usually determined by\n+   the ABI's file format, but it can be overridden by -msym32.  Note that\n+   overriding the size with -msym32 changes the ABI of relocatable objects,\n+   although it doesn't change the ABI of a fully-linked object.  */\n+#define ABI_HAS_64BIT_SYMBOLS\t(FILE_HAS_64BIT_SYMBOLS && !TARGET_SYM32)\n \n /* ISA has instructions for managing 64-bit fp and gp regs (e.g. mips3).  */\n #define ISA_HAS_64BIT_REGS\t(ISA_MIPS3\t\t\t\t\\\n@@ -1218,7 +1224,14 @@ enum mips_code_readable_setting {\n #define PREFERRED_DEBUGGING_TYPE DWARF2_DEBUG\n #endif\n \n-#define DWARF2_ADDR_SIZE (ABI_HAS_64BIT_SYMBOLS ? 8 : 4)\n+/* The size of DWARF addresses should be the same as the size of symbols\n+   in the target file format.  They shouldn't depend on things like -msym32,\n+   because many DWARF consumers do not allow the mixture of address sizes\n+   that one would then get from linking -msym32 code with -msym64 code.\n+\n+   Note that the default POINTER_SIZE test is not appropriate for MIPS.\n+   EABI64 has 64-bit pointers but uses 32-bit ELF.  */\n+#define DWARF2_ADDR_SIZE (FILE_HAS_64BIT_SYMBOLS ? 8 : 4)\n \n /* By default, turn on GDB extensions.  */\n #define DEFAULT_GDB_EXTENSIONS 1"}]}