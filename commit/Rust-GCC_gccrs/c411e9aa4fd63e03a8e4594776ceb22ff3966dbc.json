{"sha": "c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQxMWU5YWE0ZmQ2M2UwM2E4ZTQ1OTQ3NzZjZWIyMmZmMzk2NmRiYw==", "commit": {"author": {"name": "Shiva Chen", "email": "shiva0217@gmail.com", "date": "2018-04-22T09:05:10Z"}, "committer": {"name": "Chung-Ju Wu", "email": "jasonwucj@gcc.gnu.org", "date": "2018-04-22T09:05:10Z"}, "message": "[NDS32] Implment USE_LOAD_POST_INCREMENT, USE_LOAD_POST_DECREMENT, USE_STORE_POST_DECREMENT and USE_STORE_POST_INCREMENT.\n\ngcc/\n\t* config/nds32/nds32-protos.h (nds32_use_load_post_increment): Declare.\n\t* config/nds32/nds32.c (nds32_use_load_post_increment): New.\n\t* config/nds32/nds32.h\n\t(USE_LOAD_POST_INCREMENT, USE_LOAD_POST_DECREMENT): Define.\n\t(USE_STORE_POST_INCREMENT, USE_STORE_POST_DECREMENT): Define.\n\nFrom-SVN: r259552", "tree": {"sha": "18c910d33e9b81820e865510cc9a238f2e9d8e0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18c910d33e9b81820e865510cc9a238f2e9d8e0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/comments", "author": {"login": "ShivaChen", "id": 32083954, "node_id": "MDQ6VXNlcjMyMDgzOTU0", "avatar_url": "https://avatars.githubusercontent.com/u/32083954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShivaChen", "html_url": "https://github.com/ShivaChen", "followers_url": "https://api.github.com/users/ShivaChen/followers", "following_url": "https://api.github.com/users/ShivaChen/following{/other_user}", "gists_url": "https://api.github.com/users/ShivaChen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShivaChen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShivaChen/subscriptions", "organizations_url": "https://api.github.com/users/ShivaChen/orgs", "repos_url": "https://api.github.com/users/ShivaChen/repos", "events_url": "https://api.github.com/users/ShivaChen/events{/privacy}", "received_events_url": "https://api.github.com/users/ShivaChen/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "029db20edd88bf6aa038cc949f70ba5c3890a5fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/029db20edd88bf6aa038cc949f70ba5c3890a5fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/029db20edd88bf6aa038cc949f70ba5c3890a5fc"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "3aa554236ca23328205a59b3c62bc06cdfaa6c73", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "patch": "@@ -1,3 +1,11 @@\n+2018-04-22  Shiva Chen  <shiva0217@gmail.com>\n+\n+\t* config/nds32/nds32-protos.h (nds32_use_load_post_increment): Declare.\n+\t* config/nds32/nds32.c (nds32_use_load_post_increment): New.\n+\t* config/nds32/nds32.h\n+\t(USE_LOAD_POST_INCREMENT, USE_LOAD_POST_DECREMENT): Define.\n+\t(USE_STORE_POST_INCREMENT, USE_STORE_POST_DECREMENT): Define.\n+\n 2018-04-22  Shiva Chen  <shiva0217@gmail.com>\n \n \t* config/nds32/nds32-protos.h (nds32_ls_333_p): Remove."}, {"sha": "e7b7d4170ccd3f92c6c85665bd647e71a8d81bc0", "filename": "gcc/config/nds32/nds32-protos.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2Fconfig%2Fnds32%2Fnds32-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2Fconfig%2Fnds32%2Fnds32-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Fnds32-protos.h?ref=c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "patch": "@@ -275,6 +275,8 @@ rtx extract_branch_target_rtx (rtx_insn *);\n rtx extract_branch_condition_rtx (rtx_insn *);\n } // namespace nds32\n \n+extern bool nds32_use_load_post_increment(machine_mode);\n+\n /* Functions for create nds32 specific optimization pass.  */\n extern rtl_opt_pass *make_pass_nds32_relax_opt (gcc::context *);\n "}, {"sha": "9a8c71204ea1b029e39bb1c2047686745bfa9a1d", "filename": "gcc/config/nds32/nds32.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2Fconfig%2Fnds32%2Fnds32.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2Fconfig%2Fnds32%2Fnds32.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Fnds32.c?ref=c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "patch": "@@ -1354,6 +1354,14 @@ nds32_naked_function_p (tree func)\n   return (t != NULL_TREE);\n }\n \n+/* Function that determine whether a load postincrement is a good thing to use\n+   for a given mode.  */\n+bool\n+nds32_use_load_post_increment (machine_mode mode)\n+{\n+  return (GET_MODE_SIZE (mode) <= GET_MODE_SIZE(E_DImode));\n+}\n+\n /* Function that check if 'X' is a valid address register.\n    The variable 'STRICT' is very important to\n    make decision for register number."}, {"sha": "29edccdd040b5b11db341738c508379e48729368", "filename": "gcc/config/nds32/nds32.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2Fconfig%2Fnds32%2Fnds32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c411e9aa4fd63e03a8e4594776ceb22ff3966dbc/gcc%2Fconfig%2Fnds32%2Fnds32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Fnds32.h?ref=c411e9aa4fd63e03a8e4594776ceb22ff3966dbc", "patch": "@@ -1083,6 +1083,12 @@ enum reg_class\n /* We have \"LW.bi   Rt, [Ra], Rb\" instruction form.  */\n #define HAVE_POST_MODIFY_REG  1\n \n+#define USE_LOAD_POST_INCREMENT(mode) \\\n+  nds32_use_load_post_increment(mode)\n+#define USE_LOAD_POST_DECREMENT(mode) USE_LOAD_POST_INCREMENT(mode)\n+#define USE_STORE_POST_DECREMENT(mode) USE_LOAD_POST_DECREMENT(mode)\n+#define USE_STORE_POST_INCREMENT(mode) USE_LOAD_POST_INCREMENT(mode)\n+\n #define CONSTANT_ADDRESS_P(x) (CONSTANT_P (x) && GET_CODE (x) != CONST_DOUBLE)\n \n #define MAX_REGS_PER_ADDRESS 3"}]}