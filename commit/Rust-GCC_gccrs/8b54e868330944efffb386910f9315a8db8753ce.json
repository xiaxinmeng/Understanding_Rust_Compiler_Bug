{"sha": "8b54e868330944efffb386910f9315a8db8753ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI1NGU4NjgzMzA5NDRlZmZmYjM4NjkxMGY5MzE1YThkYjg3NTNjZQ==", "commit": {"author": {"name": "David Mosberger", "email": "davidm@hpl.hp.com", "date": "2001-06-22T21:35:25Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-06-22T21:35:25Z"}, "message": "crtfastmath.c: New file.\n\n        * config/ia64/crtfastmath.c: New file.\n        * config/ia64/t-ia64 (EXTRA_PARTS): Include it.\n        * config/ia64/linux.h (ENDFILE_SPEC): New.\n\nFrom-SVN: r43515", "tree": {"sha": "aec943f5a2ce57136baf29fa75be1b9687de820a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aec943f5a2ce57136baf29fa75be1b9687de820a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b54e868330944efffb386910f9315a8db8753ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b54e868330944efffb386910f9315a8db8753ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b54e868330944efffb386910f9315a8db8753ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b54e868330944efffb386910f9315a8db8753ce/comments", "author": null, "committer": null, "parents": [{"sha": "41104fd5410c370b682fd08e18bdb440b0d82a11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41104fd5410c370b682fd08e18bdb440b0d82a11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41104fd5410c370b682fd08e18bdb440b0d82a11"}], "stats": {"total": 53, "additions": 52, "deletions": 1}, "files": [{"sha": "1b6a6892ac1dbc8518bba43591bae751b17ed736", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b54e868330944efffb386910f9315a8db8753ce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b54e868330944efffb386910f9315a8db8753ce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8b54e868330944efffb386910f9315a8db8753ce", "patch": "@@ -1,3 +1,9 @@\n+2001-06-22  David Mosberger  <davidm@hpl.hp.com>\n+\n+\t* config/ia64/crtfastmath.c: New file.\n+\t* config/ia64/t-ia64 (EXTRA_PARTS): Include it.\n+\t* config/ia64/linux.h (ENDFILE_SPEC): New.\n+\n 2001-06-22  Toshiyasu Morita  <toshiyasu.morita@hsa.hitachi.com>\n \n \t* config/h8300/h8300.c (asm_file_start): Remove reference to"}, {"sha": "aa0d12021c7b4eaf4204a7adcf7538ff640ef116", "filename": "gcc/config/ia64/crtfastmath.c", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b54e868330944efffb386910f9315a8db8753ce/gcc%2Fconfig%2Fia64%2Fcrtfastmath.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b54e868330944efffb386910f9315a8db8753ce/gcc%2Fconfig%2Fia64%2Fcrtfastmath.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fcrtfastmath.c?ref=8b54e868330944efffb386910f9315a8db8753ce", "patch": "@@ -0,0 +1,37 @@\n+/* Copyright (C) 2001 Free Software Foundation, Inc.\n+   Contributed by David Mosberger <davidm@hpl.hp.com>.\n+\n+   The GNU C Library is free software; you can redistribute it and/or\n+   modify it under the terms of the GNU Library General Public License as\n+   published by the Free Software Foundation; either version 2 of the\n+   License, or (at your option) any later version.\n+\n+   The GNU C Library is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+   Library General Public License for more details.\n+\n+   You should have received a copy of the GNU Library General Public\n+   License along with the GNU C Library; see the file COPYING.LIB.  If not,\n+   write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n+   Boston, MA 02111-1307, USA.  */\n+\n+/* In addition to the permissions in the GNU General Public License, the\n+   Free Software Foundation gives you unlimited permission to link the\n+   compiled version of this file into combinations with other programs,\n+   and to distribute those combinations without any restriction coming\n+   from the use of this file.  (The General Public License restrictions\n+   do apply in other respects; for example, they cover modification of\n+   the file, and distribution when not linked into a combine\n+   executable.)  */\n+\n+/* We could call fesetenv() here but that would create a confusing\n+   dependency on libm (since that is where fesetenv() gets defined.\n+   To avoid this, just do everything locally.  */\n+#define FE_NONIEEE_ENV 0x0009a04d0270037f\n+\n+static void __attribute__((constructor))\n+__ia64_set_fast_math (void)\n+{\n+  __asm__ __volatile__ (\"mov.m ar.fpsr=%0\" : : \"r\"(FE_NONIEEE_ENV));\n+}"}, {"sha": "70a5ab092c14b93d015ba0fdd911dfb476fc80ff", "filename": "gcc/config/ia64/linux.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b54e868330944efffb386910f9315a8db8753ce/gcc%2Fconfig%2Fia64%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b54e868330944efffb386910f9315a8db8753ce/gcc%2Fconfig%2Fia64%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Flinux.h?ref=8b54e868330944efffb386910f9315a8db8753ce", "patch": "@@ -16,6 +16,12 @@\n #undef ASM_SPEC\n #define ASM_SPEC \"-x %{mconstant-gp} %{mauto-pic}\"\n \n+/* Similar to standard Linux, but adding -ffast-math support.  */\n+#undef  ENDFILE_SPEC\n+#define ENDFILE_SPEC \\\n+  \"%{ffast-math|funsafe-math-optimizations:crtfastmath.o%s} \\\n+   %{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n+\n /* Define this for shared library support because it isn't in the main\n    linux.h file.  */\n "}, {"sha": "32e507d6db2d16d25cfc4f79acfb5e95c164c2ba", "filename": "gcc/config/ia64/t-ia64", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b54e868330944efffb386910f9315a8db8753ce/gcc%2Fconfig%2Fia64%2Ft-ia64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b54e868330944efffb386910f9315a8db8753ce/gcc%2Fconfig%2Fia64%2Ft-ia64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Ft-ia64?ref=8b54e868330944efffb386910f9315a8db8753ce", "patch": "@@ -20,7 +20,7 @@ SHLIB_MAPFILES += $(srcdir)/config/ia64/libgcc-ia64.ver\n # For svr4 we build crtbegin.o and crtend.o which serve to add begin and\n # end labels to the .ctors and .dtors section when we link using gcc.\n \n-EXTRA_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o\n+EXTRA_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o crtfastmath.o\n \n # Effectively disable the crtbegin/end rules using crtstuff.c\n T = disable\n@@ -34,6 +34,8 @@ crtbeginS.o: $(srcdir)/config/ia64/crtbegin.asm $(GCC_PASSES)\n \t$(GCC_FOR_TARGET) -DSHARED -c -o crtbeginS.o -x assembler-with-cpp $(srcdir)/config/ia64/crtbegin.asm\n crtendS.o: $(srcdir)/config/ia64/crtend.asm $(GCC_PASSES)\n \t$(GCC_FOR_TARGET) -DSHARED -c -o crtendS.o -x assembler-with-cpp $(srcdir)/config/ia64/crtend.asm\n+crtfastmath.o: $(srcdir)/config/ia64/crtfastmath.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -c -o crtfastmath.o $(srcdir)/config/ia64/crtfastmath.c\n \n EXTRA_HEADERS = $(srcdir)/config/ia64/ia64intrin.h\n LIB2ADDEH = $(srcdir)/config/ia64/unwind-ia64.c $(srcdir)/unwind-sjlj.c"}]}