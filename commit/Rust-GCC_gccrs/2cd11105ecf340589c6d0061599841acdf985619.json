{"sha": "2cd11105ecf340589c6d0061599841acdf985619", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmNkMTExMDVlY2YzNDA1ODljNmQwMDYxNTk5ODQxYWNkZjk4NTYxOQ==", "commit": {"author": {"name": "Anatoly Sokolov", "email": "aesok@post.ru", "date": "2007-03-27T17:53:51Z"}, "committer": {"name": "Anatoly Sokolov", "email": "aesok@gcc.gnu.org", "date": "2007-03-27T17:53:51Z"}, "message": "avr.c (avr_hard_regno_mode_ok): Disallow QImode in stack pointer regs.\n\n\t* config/avr/avr.c (avr_hard_regno_mode_ok): Disallow QImode in stack\n\tpointer regs.\n\t* config/avr/avr.h (REGISTER_NAMES): Rename \"__SPL__\" and \"__SPH__\"\n\tregs to \"__SP_L__\" and \"__SP_H__\".\n\nFrom-SVN: r123263", "tree": {"sha": "32ed8252bb7e43545ecd0027341be03e42ef6318", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/32ed8252bb7e43545ecd0027341be03e42ef6318"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2cd11105ecf340589c6d0061599841acdf985619", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cd11105ecf340589c6d0061599841acdf985619", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2cd11105ecf340589c6d0061599841acdf985619", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cd11105ecf340589c6d0061599841acdf985619/comments", "author": null, "committer": null, "parents": [{"sha": "7558d8101e0d80fbeb7346e1c3084f23b6f95276", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7558d8101e0d80fbeb7346e1c3084f23b6f95276", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7558d8101e0d80fbeb7346e1c3084f23b6f95276"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "05a207e8fae225ab85202b70b4715e9a4f9505c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cd11105ecf340589c6d0061599841acdf985619/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cd11105ecf340589c6d0061599841acdf985619/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2cd11105ecf340589c6d0061599841acdf985619", "patch": "@@ -1,3 +1,10 @@\n+2006-03-27  Anatoly Sokolov <aesok@post.ru>\n+\n+\t* config/avr/avr.c (avr_hard_regno_mode_ok): Disallow QImode in stack\n+\tpointer regs.\n+\t* config/avr/avr.h (REGISTER_NAMES): Rename \"__SPL__\" and \"__SPH__\"\n+\tregs to \"__SP_L__\" and \"__SP_H__\".\n+\n 2007-03-27  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-dfa.c (get_ref_base_and_extent): Replace bit_offset and"}, {"sha": "652c4bb79e851e2a9e805633d7e73286614afbe1", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cd11105ecf340589c6d0061599841acdf985619/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cd11105ecf340589c6d0061599841acdf985619/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=2cd11105ecf340589c6d0061599841acdf985619", "patch": "@@ -5610,6 +5610,10 @@ jump_over_one_insn_p (rtx insn, rtx dest)\n int\n avr_hard_regno_mode_ok (int regno, enum machine_mode mode)\n {\n+  /* Disallow QImode in stack pointer regs.  */\n+  if ((regno == REG_SP || regno == (REG_SP + 1)) && mode == QImode)\n+    return 0;\n+\n   /* The only thing that can go into registers r28:r29 is a Pmode.  */\n   if (regno == REG_Y && mode == Pmode)\n     return 1;"}, {"sha": "1dba48dfe8e25a349acdafcfdd923349d2b52f34", "filename": "gcc/config/avr/avr.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cd11105ecf340589c6d0061599841acdf985619/gcc%2Fconfig%2Favr%2Favr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cd11105ecf340589c6d0061599841acdf985619/gcc%2Fconfig%2Favr%2Favr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.h?ref=2cd11105ecf340589c6d0061599841acdf985619", "patch": "@@ -624,7 +624,7 @@ sprintf (STRING, \"*.%s%lu\", PREFIX, (unsigned long)(NUM))\n     \"r8\",\"r9\",\"r10\",\"r11\",\"r12\",\"r13\",\"r14\",\"r15\",\t\\\n     \"r16\",\"r17\",\"r18\",\"r19\",\"r20\",\"r21\",\"r22\",\"r23\",\t\\\n     \"r24\",\"r25\",\"r26\",\"r27\",\"r28\",\"r29\",\"r30\",\"r31\",\t\\\n-    \"__SPL__\",\"__SPH__\",\"argL\",\"argH\"}\n+    \"__SP_L__\",\"__SP_H__\",\"argL\",\"argH\"}\n \n #define FINAL_PRESCAN_INSN(insn, operand, nop) final_prescan_insn (insn, operand,nop)\n "}]}