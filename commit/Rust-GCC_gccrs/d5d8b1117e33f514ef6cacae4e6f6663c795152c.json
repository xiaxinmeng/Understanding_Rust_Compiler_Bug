{"sha": "d5d8b1117e33f514ef6cacae4e6f6663c795152c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDVkOGIxMTE3ZTMzZjUxNGVmNmNhY2FlNGU2ZjY2NjNjNzk1MTUyYw==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2010-06-26T17:04:16Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2010-06-26T17:04:16Z"}, "message": "collect2.c (main): Remove SWITCHES_NEED_SPACES conditional.\n\n\t* collect2.c (main): Remove SWITCHES_NEED_SPACES conditional.\n\t* doc/tm.texi (SWITCHES_NEED_SPACES): Don't document.\n\t* gcc.c (SWITCHES_NEED_SPACES, switches_need_spaces): Remove.\n\t(static_specs): Remove switches_need_spaces.\n\t(process_command, do_self_spec): Hardcode handling \"-o\" instead of\n\tchecking switches_need_spaces.\n\t* system.h (SWITCHES_NEED_SPACES): Poison.\n\nFrom-SVN: r161436", "tree": {"sha": "7dedea3332fdbb66a9633e1476683abb625fc438", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7dedea3332fdbb66a9633e1476683abb625fc438"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5d8b1117e33f514ef6cacae4e6f6663c795152c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5d8b1117e33f514ef6cacae4e6f6663c795152c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5d8b1117e33f514ef6cacae4e6f6663c795152c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5d8b1117e33f514ef6cacae4e6f6663c795152c/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2706a6158b15ddab733890ac656f2e43e2365ef5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2706a6158b15ddab733890ac656f2e43e2365ef5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2706a6158b15ddab733890ac656f2e43e2365ef5"}], "stats": {"total": 48, "additions": 16, "deletions": 32}, "files": [{"sha": "32d0a00f981183c36f9fd06b0fc1e79d775b699a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d5d8b1117e33f514ef6cacae4e6f6663c795152c", "patch": "@@ -1,3 +1,13 @@\n+2010-06-26  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* collect2.c (main): Remove SWITCHES_NEED_SPACES conditional.\n+\t* doc/tm.texi (SWITCHES_NEED_SPACES): Don't document.\n+\t* gcc.c (SWITCHES_NEED_SPACES, switches_need_spaces): Remove.\n+\t(static_specs): Remove switches_need_spaces.\n+\t(process_command, do_self_spec): Hardcode handling \"-o\" instead of\n+\tchecking switches_need_spaces.\n+\t* system.h (SWITCHES_NEED_SPACES): Poison.\n+\n 2010-06-26  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/44393"}, {"sha": "b26aaf31485a491c84fe37c4aac9562de86aed07", "filename": "gcc/collect2.c", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=d5d8b1117e33f514ef6cacae4e6f6663c795152c", "patch": "@@ -1535,12 +1535,7 @@ main (int argc, char **argv)\n \t    case 'o':\n \t      if (arg[2] == '\\0')\n \t\toutput_file = *ld1++ = *ld2++ = *++argv;\n-\t      else if (1\n-#ifdef SWITCHES_NEED_SPACES\n-\t\t       && ! strchr (SWITCHES_NEED_SPACES, arg[1])\n-#endif\n-\t\t       )\n-\n+\t      else\n \t\toutput_file = &arg[2];\n \t      break;\n "}, {"sha": "c001c8b9faa832d5a9f3ff4e645b96bde0704225", "filename": "gcc/doc/tm.texi", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fdoc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fdoc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi?ref=d5d8b1117e33f514ef6cacae4e6f6663c795152c", "patch": "@@ -141,13 +141,6 @@ should call @code{DEFAULT_SWITCH_CURTAILS_COMPILATION} and then check\n for additional options.\n @end defmac\n \n-@defmac SWITCHES_NEED_SPACES\n-A string-valued C expression which enumerates the options for which\n-the linker needs a space between the option and its argument.\n-\n-If this macro is not defined, the default value is @code{\"\"}.\n-@end defmac\n-\n @defmac TARGET_OPTION_TRANSLATE_TABLE\n If defined, a list of pairs of strings, the first of which is a\n potential command line target to the @file{gcc} driver program, and the"}, {"sha": "6a0dae5c5a030e63bf2dd015c824f0597ff5c8b4", "filename": "gcc/gcc.c", "status": "modified", "additions": 4, "deletions": 18, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=d5d8b1117e33f514ef6cacae4e6f6663c795152c", "patch": "@@ -664,18 +664,6 @@ proper position among the other output files.  */\n   \"%{!shared:%{pg:gcrt0%O%s}%{!pg:%{p:mcrt0%O%s}%{!p:crt0%O%s}}}\"\n #endif\n \n-/* config.h can define SWITCHES_NEED_SPACES to control which options\n-   require spaces between the option and the argument.\n-\n-   We define SWITCHES_NEED_SPACES to include \"o\" by default.  This\n-   causes \"-ofoo.o\" to be split into \"-o foo.o\" during the initial\n-   processing of the command-line, before being seen by the specs\n-   machinery.  This makes sure we record \"foo.o\" as the temporary file\n-   to be deleted in the case of error, rather than \"-ofoo.o\".  */\n-#ifndef SWITCHES_NEED_SPACES\n-#define SWITCHES_NEED_SPACES \"o\"\n-#endif\n-\n /* config.h can define ENDFILE_SPEC to override the default crtn files.  */\n #ifndef ENDFILE_SPEC\n #define ENDFILE_SPEC \"\"\n@@ -811,7 +799,6 @@ static const char *link_gomp_spec = \"\";\n static const char *libgcc_spec = LIBGCC_SPEC;\n static const char *endfile_spec = ENDFILE_SPEC;\n static const char *startfile_spec = STARTFILE_SPEC;\n-static const char *switches_need_spaces = SWITCHES_NEED_SPACES;\n static const char *linker_name_spec = LINKER_NAME;\n static const char *linker_plugin_file_spec = \"\";\n static const char *lto_wrapper_spec = \"\";\n@@ -1651,7 +1638,6 @@ static struct spec_list static_specs[] =\n   INIT_STATIC_SPEC (\"link_gomp\",\t\t&link_gomp_spec),\n   INIT_STATIC_SPEC (\"libgcc\",\t\t\t&libgcc_spec),\n   INIT_STATIC_SPEC (\"startfile\",\t\t&startfile_spec),\n-  INIT_STATIC_SPEC (\"switches_need_spaces\",\t&switches_need_spaces),\n   INIT_STATIC_SPEC (\"cross_compile\",\t\t&cross_compile),\n   INIT_STATIC_SPEC (\"version\",\t\t\t&compiler_version),\n   INIT_STATIC_SPEC (\"multilib\",\t\t\t&multilib_select),\n@@ -4214,9 +4200,9 @@ process_command (int argc, const char **argv)\n \t\t  /* Null-terminate the vector.  */\n \t\t  switches[n_switches].args[j] = 0;\n \t\t}\n-\t      else if (strchr (switches_need_spaces, c))\n+\t      else if (c == 'o')\n \t\t{\n-\t\t  /* On some systems, ld cannot handle some options without\n+\t\t  /* On some systems, ld cannot handle \"-o\" without\n \t\t     a space.  So split the option from its argument.  */\n \t\t  char *part1 = XNEWVEC (char, 2);\n \t\t  part1[0] = c;\n@@ -4786,9 +4772,9 @@ do_self_spec (const char *spec)\n \t      /* Null-terminate the vector.  */\n \t      sw->args[j] = 0;\n \t    }\n-\t  else if (strchr (switches_need_spaces, c))\n+\t  else if (c == 'o')\n \t    {\n-\t      /* On some systems, ld cannot handle some options without\n+\t      /* On some systems, ld cannot handle \"-o\" without\n \t\t a space.  So split the option from its argument.  */\n \t      char *part1 = XNEWVEC (char, 2);\n \t      part1[0] = c;"}, {"sha": "256ebb1f5024c07aba3bae7aa55d2a56080de947", "filename": "gcc/system.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5d8b1117e33f514ef6cacae4e6f6663c795152c/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=d5d8b1117e33f514ef6cacae4e6f6663c795152c", "patch": "@@ -769,7 +769,7 @@ extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;\n \tASM_OUTPUT_SHARED_LOCAL ASM_MAKE_LABEL_LINKONCE\t\t\t   \\\n \tSTACK_CHECK_PROBE_INTERVAL STACK_CHECK_PROBE_LOAD\t\t   \\\n \tORDER_REGS_FOR_LOCAL_ALLOC FUNCTION_OUTGOING_VALUE\t\t   \\\n-\tASM_DECLARE_CONSTANT_NAME MODIFY_TARGET_NAME\n+\tASM_DECLARE_CONSTANT_NAME MODIFY_TARGET_NAME SWITCHES_NEED_SPACES\n \n /* Hooks that are no longer used.  */\n  #pragma GCC poison LANG_HOOKS_FUNCTION_MARK LANG_HOOKS_FUNCTION_FREE\t\\"}]}