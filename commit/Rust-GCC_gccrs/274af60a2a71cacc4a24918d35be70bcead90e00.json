{"sha": "274af60a2a71cacc4a24918d35be70bcead90e00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc0YWY2MGEyYTcxY2FjYzRhMjQ5MThkMzViZTcwYmNlYWQ5MGUwMA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-06-25T02:48:14Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-06-25T02:48:14Z"}, "message": "re PR libfortran/32456 (IO error message should show Unit/Filename)\n\n2007-06-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/32456\n\t* gfortran.dg/secnds-1.f: Revise test to reduce random errors.\n\nFrom-SVN: r125996", "tree": {"sha": "03785d49313fbe2be443ca2c5737cdf2a4f87ba8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03785d49313fbe2be443ca2c5737cdf2a4f87ba8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/274af60a2a71cacc4a24918d35be70bcead90e00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/274af60a2a71cacc4a24918d35be70bcead90e00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/274af60a2a71cacc4a24918d35be70bcead90e00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/274af60a2a71cacc4a24918d35be70bcead90e00/comments", "author": null, "committer": null, "parents": [{"sha": "35fea1100d4d2a870c0a50064ddd89e3df6d8eed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35fea1100d4d2a870c0a50064ddd89e3df6d8eed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35fea1100d4d2a870c0a50064ddd89e3df6d8eed"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "82ac1ce6a96308ca92d63d5f8712f917a392b4f1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/274af60a2a71cacc4a24918d35be70bcead90e00/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/274af60a2a71cacc4a24918d35be70bcead90e00/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=274af60a2a71cacc4a24918d35be70bcead90e00", "patch": "@@ -1,3 +1,8 @@\n+2007-06-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/32456\n+\t* gfortran.dg/secnds-1.f: Revise test to reduce random errors.\n+\t\n 2007-06-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/32456"}, {"sha": "c5f528357ad02611d83c46ae2baeae602ff36246", "filename": "gcc/testsuite/gfortran.dg/secnds-1.f", "status": "modified", "additions": 15, "deletions": 8, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/274af60a2a71cacc4a24918d35be70bcead90e00/gcc%2Ftestsuite%2Fgfortran.dg%2Fsecnds-1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/274af60a2a71cacc4a24918d35be70bcead90e00/gcc%2Ftestsuite%2Fgfortran.dg%2Fsecnds-1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fsecnds-1.f?ref=274af60a2a71cacc4a24918d35be70bcead90e00", "patch": "@@ -6,18 +6,25 @@\n C\n       character*20 dum1, dum2, dum3\n       real t1, t1a, t2, t2a\n-      real*8 dat1, dat2\n-      integer i, j, values(8)\n+      real*4 dat1, dat2\n+      integer i, j, values(8), k\n       t1 = secnds (0.0)\n       call date_and_time (dum1, dum2, dum3, values)\n       t1a = secnds (0.0)\n-      dat1 = 0.001*real (values(8)) + real (values(7)) +\n-     &        60.0*real (values(6)) + 3600.0* real (values(5))\n-      if (((dat1 - t1) < 0.) .or. ((dat1 - t1) > (t1a - t1))) call abort ()\n+      dat1 = 0.001 * real(values(8)) + real(values(7)) +\n+     &        60.0 * real(values(6)) + 3600.0 * real(values(5))\n+      ! handle midnight shift\n+      if ((t1a - t1) < -12.0*3600.0 ) t1 = t1 - 24.0*3600.0\n+      if ((t1a - dat1) < -12.0*3600.0 ) dat1 = dat1 - 24.0*3600.0\n+      if ((dat1 < nearest(t1, -1.)) .or. (dat1  > nearest(t1a, 1.)))\n+     &    call abort ()\n       t2a = secnds (t1a)\n       call date_and_time (dum1, dum2, dum3, values)\n       t2 = secnds (t1)\n-      dat2 = 0.001*real (values(8)) + real (values(7)) +\n-     &        60.0*real (values(6)) + 3600.0* real (values(5))\n-      if (((dat2 - dat1) < t2a) .or. ((dat2 - dat1) > t2)) call abort ()\n+      dat2 = 0.001 * real(values(8)) + real(values(7)) +\n+     &        60.0 * real(values(6)) + 3600.0 * real(values(5))\n+      ! handle midnight shift\n+      if ((dat2 - dat1) < -12.0*3600.0 ) dat1 = dat1 - 24.0*3600.0\n+      if (((dat2 - dat1) < t2a - 0.008) .or.\n+     &    ((dat2 - dat1) > t2 + 0.008)) call abort ()\n       end"}]}