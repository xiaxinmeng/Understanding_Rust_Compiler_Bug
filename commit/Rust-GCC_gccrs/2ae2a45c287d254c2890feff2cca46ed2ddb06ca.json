{"sha": "2ae2a45c287d254c2890feff2cca46ed2ddb06ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFlMmE0NWMyODdkMjU0YzI4OTBmZWZmMmNjYTQ2ZWQyZGRiMDZjYQ==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2021-04-27T17:00:53Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2021-04-27T17:03:08Z"}, "message": "Remove malformed dg-warning directives.\n\ngcc/testsuite/ChangeLog:\n\tPR testsuite/100272\n\t* g++.dg/ext/flexary13.C: Remove malformed directives.", "tree": {"sha": "ee48ac8cf6b222613efb6069c89097d3695b9054", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee48ac8cf6b222613efb6069c89097d3695b9054"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ae2a45c287d254c2890feff2cca46ed2ddb06ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ae2a45c287d254c2890feff2cca46ed2ddb06ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ae2a45c287d254c2890feff2cca46ed2ddb06ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ae2a45c287d254c2890feff2cca46ed2ddb06ca/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f82658338756fe9a38a728aa542d786a0e889e21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f82658338756fe9a38a728aa542d786a0e889e21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f82658338756fe9a38a728aa542d786a0e889e21"}], "stats": {"total": 24, "additions": 10, "deletions": 14}, "files": [{"sha": "1acfa2e7a9895da2b8459dd15d0af4f682c68147", "filename": "gcc/testsuite/g++.dg/ext/flexary13.C", "status": "modified", "additions": 10, "deletions": 14, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ae2a45c287d254c2890feff2cca46ed2ddb06ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fflexary13.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ae2a45c287d254c2890feff2cca46ed2ddb06ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fflexary13.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fflexary13.C?ref=2ae2a45c287d254c2890feff2cca46ed2ddb06ca", "patch": "@@ -17,44 +17,40 @@ int32_t i = 12345678;\n int main ()\n {\n   {\n+    // OK.  Does not assign any elements to flexible array.\n     Ax s = { 0 };\n     ASSERT (s.n == 0);\n   }\n   {\n-    static Ax s =\n-      { 0, { } };   // dg-warning \"initialization of a flexible array member\" }\n+    // OK only for statically allocated objects, otherwise error.\n+    static Ax s = { 0, { } };\n     ASSERT (s.n == 0);\n   }\n   {\n-    static Ax s =\n-      { 1, { 2 } };   // dg-warning \"initialization of a flexible array member\" }\n+    static Ax s = { 1, { 2 } };\n     ASSERT (s.n == 1 && s.a [0] == 2);\n   }\n   {\n-    static Ax s =\n-      { 2, { 3, 4 } }; // dg-warning \"initialization of a flexible array member\" }\n+    static Ax s = { 2, { 3, 4 } };\n     ASSERT (s.n = 2 && s.a [0] == 3 && s.a [1] == 4);\n   }\n   {\n-    static Ax s =\n-      { 123, i };   // dg-warning \"initialization of a flexible array member\" }\n+    static Ax s = { 123, i };\n     ASSERT (s.n == 123 && s.a [0] == i);\n   }\n   {\n-    static Ax s =\n-      { 456, { i } }; // dg-warning \"initialization of a flexible array member\" }\n+    static Ax s = { 456, { i } };\n     ASSERT (s.n == 456 && s.a [0] == i);\n   }\n   {\n     int32_t j = i + 1, k = j + 1;\n-    static Ax s =\n-      { 3, { i, j, k } }; // dg-warning \"initialization of a flexible array member\" }\n+    static Ax s = { 3, { i, j, k } };\n     ASSERT (s.n == 3 && s.a [0] == i && s.a [1] == j && s.a [2] == k);\n   }\n \n   {\n-    AAx s =\n-      { 1, { 2 } };   // dg-warning \"initialization of a flexible array member\" }\n+    // OK.  Does not assign any elements to flexible array.\n+    AAx s = { 1, { 2 } };\n     ASSERT (s.i == 1 && s.ax.n == 2);\n   }\n }"}]}