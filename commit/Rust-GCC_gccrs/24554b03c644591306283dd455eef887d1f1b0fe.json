{"sha": "24554b03c644591306283dd455eef887d1f1b0fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ1NTRiMDNjNjQ0NTkxMzA2MjgzZGQ0NTVlZWY4ODdkMWYxYjBmZQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1999-09-12T06:30:39Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1999-09-12T06:30:39Z"}, "message": "tree.c (save_tree_status): Revert 10 Sep change.\n\n        * tree.c (save_tree_status): Revert 10 Sep change.\n        (restore_tree_status): Likewise.  Call obstack_free with NULL\n        before freeing the obstack proper.\n\nFrom-SVN: r29355", "tree": {"sha": "88853ad115b0c3604e2de43f3c0a9c852fdb276a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88853ad115b0c3604e2de43f3c0a9c852fdb276a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/24554b03c644591306283dd455eef887d1f1b0fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24554b03c644591306283dd455eef887d1f1b0fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24554b03c644591306283dd455eef887d1f1b0fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24554b03c644591306283dd455eef887d1f1b0fe/comments", "author": null, "committer": null, "parents": [{"sha": "1497faf6be0086785ed49a0fd0177d78d9ce346c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1497faf6be0086785ed49a0fd0177d78d9ce346c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1497faf6be0086785ed49a0fd0177d78d9ce346c"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "da73161fe1b9a844e00437e4a9b1c287e7558a13", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/24554b03c644591306283dd455eef887d1f1b0fe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/24554b03c644591306283dd455eef887d1f1b0fe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=24554b03c644591306283dd455eef887d1f1b0fe", "patch": "@@ -1,3 +1,9 @@\n+Sat Sep 11 23:28:33 1999  Richard Henderson  <rth@cygnus.com>\n+\n+\t* tree.c (save_tree_status): Revert 10 Sep change.\n+\t(restore_tree_status): Likewise.  Call obstack_free with NULL \n+\tbefore freeing the obstack proper.\n+\n Sat Sep 11 23:23:46 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* cse.c (cse_main): If gc'ing, collect around cse_basic_block."}, {"sha": "ca471a92bc681478eb0c9cd671e1a3483dfd2faf", "filename": "gcc/tree.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/24554b03c644591306283dd455eef887d1f1b0fe/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/24554b03c644591306283dd455eef887d1f1b0fe/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=24554b03c644591306283dd455eef887d1f1b0fe", "patch": "@@ -365,7 +365,8 @@ save_tree_status (p)\n   function_maybepermanent_obstack\n     = (struct obstack *) xmalloc (sizeof (struct obstack));\n   gcc_obstack_init (function_maybepermanent_obstack);\n-  maybepermanent_firstobj = NULL;\n+  maybepermanent_firstobj\n+    = (char *) obstack_finish (function_maybepermanent_obstack);\n \n   function_obstack = (struct obstack *) xmalloc (sizeof (struct obstack));\n   gcc_obstack_init (function_obstack);\n@@ -394,14 +395,16 @@ restore_tree_status (p)\n   /* Free saveable storage used by the function just compiled and not\n      saved.  */\n   obstack_free (function_maybepermanent_obstack, maybepermanent_firstobj);\n+  if (obstack_empty_p (function_maybepermanent_obstack))\n+    {\n+      obstack_free (function_maybepermanent_obstack, NULL);\n+      free (function_maybepermanent_obstack);\n+    }\n \n   obstack_free (&temporary_obstack, temporary_firstobj);\n   obstack_free (&momentary_obstack, momentary_function_firstobj);\n \n   obstack_free (function_obstack, NULL);\n-\n-  if (maybepermanent_firstobj == NULL)\n-    free (function_maybepermanent_obstack);\n   free (function_obstack);\n \n   temporary_firstobj = p->temporary_firstobj;"}]}