{"sha": "814d86ddced44318c4195052ab7c4f227771bb76", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODE0ZDg2ZGRjZWQ0NDMxOGM0MTk1MDUyYWI3YzRmMjI3NzcxYmI3Ng==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2021-03-11T15:23:56Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2021-05-11T13:13:30Z"}, "message": "Remove libhsail-rt.\n\nChangeLog:\n\n\t* Makefile.def: Remove libhsail-rt.\n\t* Makefile.in: Likewise.\n\t* configure.ac: Likewise.\n\t* configure: Regenerate.\n\t* libhsail-rt/ChangeLog: Removed.\n\t* libhsail-rt/Makefile.am: Removed.\n\t* libhsail-rt/Makefile.in: Removed.\n\t* libhsail-rt/README: Removed.\n\t* libhsail-rt/aclocal.m4: Removed.\n\t* libhsail-rt/configure: Removed.\n\t* libhsail-rt/configure.ac: Removed.\n\t* libhsail-rt/configure.tgt: Removed.\n\t* libhsail-rt/include/internal/fibers.h: Removed.\n\t* libhsail-rt/include/internal/phsa-queue-interface.h: Removed.\n\t* libhsail-rt/include/internal/phsa-rt.h: Removed.\n\t* libhsail-rt/include/internal/workitems.h: Removed.\n\t* libhsail-rt/rt/arithmetic.c: Removed.\n\t* libhsail-rt/rt/atomics.c: Removed.\n\t* libhsail-rt/rt/bitstring.c: Removed.\n\t* libhsail-rt/rt/fbarrier.c: Removed.\n\t* libhsail-rt/rt/fibers.c: Removed.\n\t* libhsail-rt/rt/fp16.c: Removed.\n\t* libhsail-rt/rt/misc.c: Removed.\n\t* libhsail-rt/rt/multimedia.c: Removed.\n\t* libhsail-rt/rt/queue.c: Removed.\n\t* libhsail-rt/rt/sat_arithmetic.c: Removed.\n\t* libhsail-rt/rt/segment.c: Removed.\n\t* libhsail-rt/rt/workitems.c: Removed.\n\t* libhsail-rt/target-config.h.in: Removed.\n\ncontrib/ChangeLog:\n\n\t* gcc_update: Remove libhsail-rt folder.\n\t* update-copyright.py: Likewise.", "tree": {"sha": "ba3e5a3be7ab4a4c5f952b584e290330913ac1a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba3e5a3be7ab4a4c5f952b584e290330913ac1a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/814d86ddced44318c4195052ab7c4f227771bb76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/814d86ddced44318c4195052ab7c4f227771bb76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/814d86ddced44318c4195052ab7c4f227771bb76", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/814d86ddced44318c4195052ab7c4f227771bb76/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "900b1c27b963c8244c7547943d4a8d03dfacc6f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/900b1c27b963c8244c7547943d4a8d03dfacc6f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/900b1c27b963c8244c7547943d4a8d03dfacc6f4"}], "stats": {"total": 23641, "additions": 0, "deletions": 23641}, "files": [{"sha": "3930d9976a66c17a506be0504c99d71a13453808", "filename": "Makefile.def", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/814d86ddced44318c4195052ab7c4f227771bb76/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/814d86ddced44318c4195052ab7c4f227771bb76/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=814d86ddced44318c4195052ab7c4f227771bb76", "patch": "@@ -166,7 +166,6 @@ target_modules = { module= libquadmath; };\n target_modules = { module= libgfortran; };\n target_modules = { module= libobjc; };\n target_modules = { module= libgo; };\n-target_modules = { module= libhsail-rt; };\n target_modules = { module= libphobos;\n \t\t   lib_path=src/.libs; };\n target_modules = { module= libtermcap; no_check=true;\n@@ -651,8 +650,6 @@ languages = { language=obj-c++;\tgcc-check-target=check-obj-c++; };\n languages = { language=go;\tgcc-check-target=check-go;\n \t\t\t\tlib-check-target=check-target-libgo;\n \t\t\t\tlib-check-target=check-gotools; };\n-languages = { language=brig;\tgcc-check-target=check-brig;\n-\t\t\t\tlib-check-target=check-target-libhsail-rt; };\n languages = { language=d;\tgcc-check-target=check-d;\n \t\t\t\tlib-check-target=check-target-libphobos; };\n "}, {"sha": "b6cf33077a4b8d934b6dedc0839f0557fc16905a", "filename": "Makefile.in", "status": "modified", "additions": 0, "deletions": 489, "changes": 489, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/814d86ddced44318c4195052ab7c4f227771bb76/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/814d86ddced44318c4195052ab7c4f227771bb76/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=814d86ddced44318c4195052ab7c4f227771bb76", "patch": "@@ -1058,7 +1058,6 @@ configure-target:  \\\n     maybe-configure-target-libgfortran \\\n     maybe-configure-target-libobjc \\\n     maybe-configure-target-libgo \\\n-    maybe-configure-target-libhsail-rt \\\n     maybe-configure-target-libphobos \\\n     maybe-configure-target-libtermcap \\\n     maybe-configure-target-winsup \\\n@@ -1231,7 +1230,6 @@ all-target: maybe-all-target-libquadmath\n all-target: maybe-all-target-libgfortran\n all-target: maybe-all-target-libobjc\n all-target: maybe-all-target-libgo\n-all-target: maybe-all-target-libhsail-rt\n all-target: maybe-all-target-libphobos\n all-target: maybe-all-target-libtermcap\n all-target: maybe-all-target-winsup\n@@ -1329,7 +1327,6 @@ info-target: maybe-info-target-libquadmath\n info-target: maybe-info-target-libgfortran\n info-target: maybe-info-target-libobjc\n info-target: maybe-info-target-libgo\n-info-target: maybe-info-target-libhsail-rt\n info-target: maybe-info-target-libphobos\n info-target: maybe-info-target-libtermcap\n info-target: maybe-info-target-winsup\n@@ -1420,7 +1417,6 @@ dvi-target: maybe-dvi-target-libquadmath\n dvi-target: maybe-dvi-target-libgfortran\n dvi-target: maybe-dvi-target-libobjc\n dvi-target: maybe-dvi-target-libgo\n-dvi-target: maybe-dvi-target-libhsail-rt\n dvi-target: maybe-dvi-target-libphobos\n dvi-target: maybe-dvi-target-libtermcap\n dvi-target: maybe-dvi-target-winsup\n@@ -1511,7 +1507,6 @@ pdf-target: maybe-pdf-target-libquadmath\n pdf-target: maybe-pdf-target-libgfortran\n pdf-target: maybe-pdf-target-libobjc\n pdf-target: maybe-pdf-target-libgo\n-pdf-target: maybe-pdf-target-libhsail-rt\n pdf-target: maybe-pdf-target-libphobos\n pdf-target: maybe-pdf-target-libtermcap\n pdf-target: maybe-pdf-target-winsup\n@@ -1602,7 +1597,6 @@ html-target: maybe-html-target-libquadmath\n html-target: maybe-html-target-libgfortran\n html-target: maybe-html-target-libobjc\n html-target: maybe-html-target-libgo\n-html-target: maybe-html-target-libhsail-rt\n html-target: maybe-html-target-libphobos\n html-target: maybe-html-target-libtermcap\n html-target: maybe-html-target-winsup\n@@ -1693,7 +1687,6 @@ TAGS-target: maybe-TAGS-target-libquadmath\n TAGS-target: maybe-TAGS-target-libgfortran\n TAGS-target: maybe-TAGS-target-libobjc\n TAGS-target: maybe-TAGS-target-libgo\n-TAGS-target: maybe-TAGS-target-libhsail-rt\n TAGS-target: maybe-TAGS-target-libphobos\n TAGS-target: maybe-TAGS-target-libtermcap\n TAGS-target: maybe-TAGS-target-winsup\n@@ -1784,7 +1777,6 @@ install-info-target: maybe-install-info-target-libquadmath\n install-info-target: maybe-install-info-target-libgfortran\n install-info-target: maybe-install-info-target-libobjc\n install-info-target: maybe-install-info-target-libgo\n-install-info-target: maybe-install-info-target-libhsail-rt\n install-info-target: maybe-install-info-target-libphobos\n install-info-target: maybe-install-info-target-libtermcap\n install-info-target: maybe-install-info-target-winsup\n@@ -1875,7 +1867,6 @@ install-pdf-target: maybe-install-pdf-target-libquadmath\n install-pdf-target: maybe-install-pdf-target-libgfortran\n install-pdf-target: maybe-install-pdf-target-libobjc\n install-pdf-target: maybe-install-pdf-target-libgo\n-install-pdf-target: maybe-install-pdf-target-libhsail-rt\n install-pdf-target: maybe-install-pdf-target-libphobos\n install-pdf-target: maybe-install-pdf-target-libtermcap\n install-pdf-target: maybe-install-pdf-target-winsup\n@@ -1966,7 +1957,6 @@ install-html-target: maybe-install-html-target-libquadmath\n install-html-target: maybe-install-html-target-libgfortran\n install-html-target: maybe-install-html-target-libobjc\n install-html-target: maybe-install-html-target-libgo\n-install-html-target: maybe-install-html-target-libhsail-rt\n install-html-target: maybe-install-html-target-libphobos\n install-html-target: maybe-install-html-target-libtermcap\n install-html-target: maybe-install-html-target-winsup\n@@ -2057,7 +2047,6 @@ installcheck-target: maybe-installcheck-target-libquadmath\n installcheck-target: maybe-installcheck-target-libgfortran\n installcheck-target: maybe-installcheck-target-libobjc\n installcheck-target: maybe-installcheck-target-libgo\n-installcheck-target: maybe-installcheck-target-libhsail-rt\n installcheck-target: maybe-installcheck-target-libphobos\n installcheck-target: maybe-installcheck-target-libtermcap\n installcheck-target: maybe-installcheck-target-winsup\n@@ -2148,7 +2137,6 @@ mostlyclean-target: maybe-mostlyclean-target-libquadmath\n mostlyclean-target: maybe-mostlyclean-target-libgfortran\n mostlyclean-target: maybe-mostlyclean-target-libobjc\n mostlyclean-target: maybe-mostlyclean-target-libgo\n-mostlyclean-target: maybe-mostlyclean-target-libhsail-rt\n mostlyclean-target: maybe-mostlyclean-target-libphobos\n mostlyclean-target: maybe-mostlyclean-target-libtermcap\n mostlyclean-target: maybe-mostlyclean-target-winsup\n@@ -2239,7 +2227,6 @@ clean-target: maybe-clean-target-libquadmath\n clean-target: maybe-clean-target-libgfortran\n clean-target: maybe-clean-target-libobjc\n clean-target: maybe-clean-target-libgo\n-clean-target: maybe-clean-target-libhsail-rt\n clean-target: maybe-clean-target-libphobos\n clean-target: maybe-clean-target-libtermcap\n clean-target: maybe-clean-target-winsup\n@@ -2330,7 +2317,6 @@ distclean-target: maybe-distclean-target-libquadmath\n distclean-target: maybe-distclean-target-libgfortran\n distclean-target: maybe-distclean-target-libobjc\n distclean-target: maybe-distclean-target-libgo\n-distclean-target: maybe-distclean-target-libhsail-rt\n distclean-target: maybe-distclean-target-libphobos\n distclean-target: maybe-distclean-target-libtermcap\n distclean-target: maybe-distclean-target-winsup\n@@ -2421,7 +2407,6 @@ maintainer-clean-target: maybe-maintainer-clean-target-libquadmath\n maintainer-clean-target: maybe-maintainer-clean-target-libgfortran\n maintainer-clean-target: maybe-maintainer-clean-target-libobjc\n maintainer-clean-target: maybe-maintainer-clean-target-libgo\n-maintainer-clean-target: maybe-maintainer-clean-target-libhsail-rt\n maintainer-clean-target: maybe-maintainer-clean-target-libphobos\n maintainer-clean-target: maybe-maintainer-clean-target-libtermcap\n maintainer-clean-target: maybe-maintainer-clean-target-winsup\n@@ -2568,7 +2553,6 @@ check-target:  \\\n     maybe-check-target-libgfortran \\\n     maybe-check-target-libobjc \\\n     maybe-check-target-libgo \\\n-    maybe-check-target-libhsail-rt \\\n     maybe-check-target-libphobos \\\n     maybe-check-target-libtermcap \\\n     maybe-check-target-winsup \\\n@@ -2761,7 +2745,6 @@ install-target:  \\\n     maybe-install-target-libgfortran \\\n     maybe-install-target-libobjc \\\n     maybe-install-target-libgo \\\n-    maybe-install-target-libhsail-rt \\\n     maybe-install-target-libphobos \\\n     maybe-install-target-libtermcap \\\n     maybe-install-target-winsup \\\n@@ -2872,7 +2855,6 @@ install-strip-target:  \\\n     maybe-install-strip-target-libgfortran \\\n     maybe-install-strip-target-libobjc \\\n     maybe-install-strip-target-libgo \\\n-    maybe-install-strip-target-libhsail-rt \\\n     maybe-install-strip-target-libphobos \\\n     maybe-install-strip-target-libtermcap \\\n     maybe-install-strip-target-winsup \\\n@@ -50752,464 +50734,6 @@ maintainer-clean-target-libgo:\n \n \n \n-.PHONY: configure-target-libhsail-rt maybe-configure-target-libhsail-rt\n-maybe-configure-target-libhsail-rt:\n-@if gcc-bootstrap\n-configure-target-libhsail-rt: stage_current\n-@endif gcc-bootstrap\n-@if target-libhsail-rt\n-maybe-configure-target-libhsail-rt: configure-target-libhsail-rt\n-configure-target-libhsail-rt: \n-\t@: $(MAKE); $(unstage)\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\techo \"Checking multilib configuration for libhsail-rt...\"; \\\n-\t$(SHELL) $(srcdir)/mkinstalldirs $(TARGET_SUBDIR)/libhsail-rt; \\\n-\t$(CC_FOR_TARGET) --print-multi-lib > $(TARGET_SUBDIR)/libhsail-rt/multilib.tmp 2> /dev/null; \\\n-\tif test -r $(TARGET_SUBDIR)/libhsail-rt/multilib.out; then \\\n-\t  if cmp -s $(TARGET_SUBDIR)/libhsail-rt/multilib.tmp $(TARGET_SUBDIR)/libhsail-rt/multilib.out; then \\\n-\t    rm -f $(TARGET_SUBDIR)/libhsail-rt/multilib.tmp; \\\n-\t  else \\\n-\t    rm -f $(TARGET_SUBDIR)/libhsail-rt/Makefile; \\\n-\t    mv $(TARGET_SUBDIR)/libhsail-rt/multilib.tmp $(TARGET_SUBDIR)/libhsail-rt/multilib.out; \\\n-\t  fi; \\\n-\telse \\\n-\t  mv $(TARGET_SUBDIR)/libhsail-rt/multilib.tmp $(TARGET_SUBDIR)/libhsail-rt/multilib.out; \\\n-\tfi; \\\n-\ttest ! -f $(TARGET_SUBDIR)/libhsail-rt/Makefile || exit 0; \\\n-\t$(SHELL) $(srcdir)/mkinstalldirs $(TARGET_SUBDIR)/libhsail-rt; \\\n-\t$(NORMAL_TARGET_EXPORTS)  \\\n-\techo Configuring in $(TARGET_SUBDIR)/libhsail-rt; \\\n-\tcd \"$(TARGET_SUBDIR)/libhsail-rt\" || exit 1; \\\n-\tcase $(srcdir) in \\\n-\t  /* | [A-Za-z]:[\\\\/]*) topdir=$(srcdir) ;; \\\n-\t  *) topdir=`echo $(TARGET_SUBDIR)/libhsail-rt/ | \\\n-\t\tsed -e 's,\\./,,g' -e 's,[^/]*/,../,g' `$(srcdir) ;; \\\n-\tesac; \\\n-\tmodule_srcdir=libhsail-rt; \\\n-\trm -f no-such-file || : ; \\\n-\tCONFIG_SITE=no-such-file $(SHELL) \\\n-\t  $$s/$$module_srcdir/configure \\\n-\t  --srcdir=$${topdir}/$$module_srcdir \\\n-\t  $(TARGET_CONFIGARGS) --build=${build_alias} --host=${target_alias} \\\n-\t  --target=${target_alias}  \\\n-\t  || exit 1\n-@endif target-libhsail-rt\n-\n-\n-\n-\n-\n-.PHONY: all-target-libhsail-rt maybe-all-target-libhsail-rt\n-maybe-all-target-libhsail-rt:\n-@if gcc-bootstrap\n-all-target-libhsail-rt: stage_current\n-@endif gcc-bootstrap\n-@if target-libhsail-rt\n-TARGET-target-libhsail-rt=all\n-maybe-all-target-libhsail-rt: all-target-libhsail-rt\n-all-target-libhsail-rt: configure-target-libhsail-rt\n-\t@: $(MAKE); $(unstage)\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS)  \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) $(EXTRA_TARGET_FLAGS)   \\\n-\t\t$(TARGET-target-libhsail-rt))\n-@endif target-libhsail-rt\n-\n-\n-\n-\n-\n-.PHONY: check-target-libhsail-rt maybe-check-target-libhsail-rt\n-maybe-check-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-check-target-libhsail-rt: check-target-libhsail-rt\n-\n-check-target-libhsail-rt:\n-\t@: $(MAKE); $(unstage)\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(TARGET_FLAGS_TO_PASS)   check)\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: install-target-libhsail-rt maybe-install-target-libhsail-rt\n-maybe-install-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-install-target-libhsail-rt: install-target-libhsail-rt\n-\n-install-target-libhsail-rt: installdirs\n-\t@: $(MAKE); $(unstage)\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(TARGET_FLAGS_TO_PASS)  install)\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: install-strip-target-libhsail-rt maybe-install-strip-target-libhsail-rt\n-maybe-install-strip-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-install-strip-target-libhsail-rt: install-strip-target-libhsail-rt\n-\n-install-strip-target-libhsail-rt: installdirs\n-\t@: $(MAKE); $(unstage)\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(TARGET_FLAGS_TO_PASS)  install-strip)\n-\n-@endif target-libhsail-rt\n-\n-# Other targets (info, dvi, pdf, etc.)\n-\n-.PHONY: maybe-info-target-libhsail-rt info-target-libhsail-rt\n-maybe-info-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-info-target-libhsail-rt: info-target-libhsail-rt\n-\n-info-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing info in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           info) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-dvi-target-libhsail-rt dvi-target-libhsail-rt\n-maybe-dvi-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-dvi-target-libhsail-rt: dvi-target-libhsail-rt\n-\n-dvi-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing dvi in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           dvi) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-pdf-target-libhsail-rt pdf-target-libhsail-rt\n-maybe-pdf-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-pdf-target-libhsail-rt: pdf-target-libhsail-rt\n-\n-pdf-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing pdf in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           pdf) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-html-target-libhsail-rt html-target-libhsail-rt\n-maybe-html-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-html-target-libhsail-rt: html-target-libhsail-rt\n-\n-html-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing html in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           html) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-TAGS-target-libhsail-rt TAGS-target-libhsail-rt\n-maybe-TAGS-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-TAGS-target-libhsail-rt: TAGS-target-libhsail-rt\n-\n-TAGS-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing TAGS in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           TAGS) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-install-info-target-libhsail-rt install-info-target-libhsail-rt\n-maybe-install-info-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-install-info-target-libhsail-rt: install-info-target-libhsail-rt\n-\n-install-info-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \\\n-    info-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing install-info in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           install-info) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-install-pdf-target-libhsail-rt install-pdf-target-libhsail-rt\n-maybe-install-pdf-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-install-pdf-target-libhsail-rt: install-pdf-target-libhsail-rt\n-\n-install-pdf-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \\\n-    pdf-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing install-pdf in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           install-pdf) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-install-html-target-libhsail-rt install-html-target-libhsail-rt\n-maybe-install-html-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-install-html-target-libhsail-rt: install-html-target-libhsail-rt\n-\n-install-html-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \\\n-    html-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing install-html in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           install-html) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-installcheck-target-libhsail-rt installcheck-target-libhsail-rt\n-maybe-installcheck-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-installcheck-target-libhsail-rt: installcheck-target-libhsail-rt\n-\n-installcheck-target-libhsail-rt: \\\n-    configure-target-libhsail-rt \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing installcheck in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           installcheck) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-mostlyclean-target-libhsail-rt mostlyclean-target-libhsail-rt\n-maybe-mostlyclean-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-mostlyclean-target-libhsail-rt: mostlyclean-target-libhsail-rt\n-\n-mostlyclean-target-libhsail-rt: \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing mostlyclean in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           mostlyclean) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-clean-target-libhsail-rt clean-target-libhsail-rt\n-maybe-clean-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-clean-target-libhsail-rt: clean-target-libhsail-rt\n-\n-clean-target-libhsail-rt: \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing clean in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           clean) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-distclean-target-libhsail-rt distclean-target-libhsail-rt\n-maybe-distclean-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-distclean-target-libhsail-rt: distclean-target-libhsail-rt\n-\n-distclean-target-libhsail-rt: \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing distclean in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           distclean) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-.PHONY: maybe-maintainer-clean-target-libhsail-rt maintainer-clean-target-libhsail-rt\n-maybe-maintainer-clean-target-libhsail-rt:\n-@if target-libhsail-rt\n-maybe-maintainer-clean-target-libhsail-rt: maintainer-clean-target-libhsail-rt\n-\n-maintainer-clean-target-libhsail-rt: \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f $(TARGET_SUBDIR)/libhsail-rt/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(NORMAL_TARGET_EXPORTS) \\\n-\techo \"Doing maintainer-clean in $(TARGET_SUBDIR)/libhsail-rt\"; \\\n-\tfor flag in $(EXTRA_TARGET_FLAGS); do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\t(cd $(TARGET_SUBDIR)/libhsail-rt && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t           maintainer-clean) \\\n-\t  || exit 1\n-\n-@endif target-libhsail-rt\n-\n-\n-\n-\n-\n .PHONY: configure-target-libphobos maybe-configure-target-libphobos\n maybe-configure-target-libphobos:\n @if gcc-bootstrap\n@@ -57045,14 +56569,6 @@ check-gcc-go:\n \t(cd gcc && $(MAKE) $(GCC_FLAGS_TO_PASS) check-go);\n check-go: check-gcc-go check-target-libgo check-gotools\n \n-.PHONY: check-gcc-brig check-brig\n-check-gcc-brig:\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(HOST_EXPORTS) \\\n-\t(cd gcc && $(MAKE) $(GCC_FLAGS_TO_PASS) check-brig);\n-check-brig: check-gcc-brig check-target-libhsail-rt\n-\n .PHONY: check-gcc-d check-d\n check-gcc-d:\n \tr=`${PWD_COMMAND}`; export r; \\\n@@ -60464,7 +59980,6 @@ configure-target-libquadmath: stage_last\n configure-target-libgfortran: stage_last\n configure-target-libobjc: stage_last\n configure-target-libgo: stage_last\n-configure-target-libhsail-rt: stage_last\n configure-target-libphobos: stage_last\n configure-target-libtermcap: stage_last\n configure-target-winsup: stage_last\n@@ -60499,7 +60014,6 @@ configure-target-libquadmath: maybe-all-gcc\n configure-target-libgfortran: maybe-all-gcc\n configure-target-libobjc: maybe-all-gcc\n configure-target-libgo: maybe-all-gcc\n-configure-target-libhsail-rt: maybe-all-gcc\n configure-target-libphobos: maybe-all-gcc\n configure-target-libtermcap: maybe-all-gcc\n configure-target-winsup: maybe-all-gcc\n@@ -61794,7 +61308,6 @@ configure-target-libquadmath: maybe-all-target-libgcc\n configure-target-libgfortran: maybe-all-target-libgcc\n configure-target-libobjc: maybe-all-target-libgcc\n configure-target-libgo: maybe-all-target-libgcc\n-configure-target-libhsail-rt: maybe-all-target-libgcc\n configure-target-libphobos: maybe-all-target-libgcc\n configure-target-libtermcap: maybe-all-target-libgcc\n configure-target-winsup: maybe-all-target-libgcc\n@@ -61832,8 +61345,6 @@ configure-target-libobjc: maybe-all-target-newlib maybe-all-target-libgloss\n \n configure-target-libgo: maybe-all-target-newlib maybe-all-target-libgloss\n \n-configure-target-libhsail-rt: maybe-all-target-newlib maybe-all-target-libgloss\n-\n configure-target-libphobos: maybe-all-target-newlib maybe-all-target-libgloss\n \n configure-target-libtermcap: maybe-all-target-newlib maybe-all-target-libgloss"}, {"sha": "3715d169dbfe7174800dbcc3047f8d7c9a7c4f1b", "filename": "configure", "status": "modified", "additions": 0, "deletions": 24, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/814d86ddced44318c4195052ab7c4f227771bb76/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/814d86ddced44318c4195052ab7c4f227771bb76/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=814d86ddced44318c4195052ab7c4f227771bb76", "patch": "@@ -2812,7 +2812,6 @@ target_libraries=\"target-libgcc \\\n \t\ttarget-newlib \\\n \t\ttarget-libgomp \\\n \t\ttarget-liboffloadmic \\\n-\t\ttarget-libhsail-rt \\\n \t\ttarget-libatomic \\\n \t\ttarget-libitm \\\n \t\ttarget-libstdc++-v3 \\\n@@ -3332,29 +3331,6 @@ $as_echo \"yes\" >&6; }\n     fi\n fi\n \n-\n-# Disable libhsail-rt on unsupported systems.\n-if test -d ${srcdir}/libhsail-rt; then\n-    if test x$enable_libhsail_rt = x; then\n-        { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for libhsail-rt support\" >&5\n-$as_echo_n \"checking for libhsail-rt support... \" >&6; }\n-        if (srcdir=${srcdir}/libhsail-rt; \\\n-                . ${srcdir}/configure.tgt; \\\n-                test -n \"$UNSUPPORTED\")\n-        then\n-            { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-            unsupported_languages=\"$unsupported_languages brig\"\n-            # This implicitly disables also target-libhsail-rt as it won't\n-            # get added to the build without BRIG FE.\n-        else\n-            { $as_echo \"$as_me:${as_lineno-$LINENO}: result: yes\" >&5\n-$as_echo \"yes\" >&6; }\n-        fi\n-    fi\n-fi\n-\n-\n # Disable libquadmath for some systems.\n case \"${target}\" in\n   avr-*-*)"}, {"sha": "626e2106cba7cba62572913e8e4121a67bf430d6", "filename": "configure.ac", "status": "modified", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/814d86ddced44318c4195052ab7c4f227771bb76/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/814d86ddced44318c4195052ab7c4f227771bb76/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=814d86ddced44318c4195052ab7c4f227771bb76", "patch": "@@ -151,7 +151,6 @@ target_libraries=\"target-libgcc \\\n \t\ttarget-newlib \\\n \t\ttarget-libgomp \\\n \t\ttarget-liboffloadmic \\\n-\t\ttarget-libhsail-rt \\\n \t\ttarget-libatomic \\\n \t\ttarget-libitm \\\n \t\ttarget-libstdc++-v3 \\\n@@ -609,26 +608,6 @@ if test -d ${srcdir}/libvtv; then\n     fi\n fi\n \n-\n-# Disable libhsail-rt on unsupported systems.\n-if test -d ${srcdir}/libhsail-rt; then\n-    if test x$enable_libhsail_rt = x; then\n-        AC_MSG_CHECKING([for libhsail-rt support])\n-        if (srcdir=${srcdir}/libhsail-rt; \\\n-                . ${srcdir}/configure.tgt; \\\n-                test -n \"$UNSUPPORTED\")\n-        then\n-            AC_MSG_RESULT([no])\n-            unsupported_languages=\"$unsupported_languages brig\"\n-            # This implicitly disables also target-libhsail-rt as it won't\n-            # get added to the build without BRIG FE.\n-        else\n-            AC_MSG_RESULT([yes])\n-        fi\n-    fi\n-fi\n-\n-\n # Disable libquadmath for some systems.\n case \"${target}\" in\n   avr-*-*)"}, {"sha": "80fac9fc995d744ac2b4b1d450f566e3c3c2babc", "filename": "contrib/gcc_update", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/814d86ddced44318c4195052ab7c4f227771bb76/contrib%2Fgcc_update", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/814d86ddced44318c4195052ab7c4f227771bb76/contrib%2Fgcc_update", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc_update?ref=814d86ddced44318c4195052ab7c4f227771bb76", "patch": "@@ -141,10 +141,6 @@ libgomp/testsuite/Makefile.in: libgomp/testsuite/Makefile.am libgomp/aclocal.m4\n libgomp/configure.ac: libgomp/plugin/configfrag.ac\n libgomp/configure: libgomp/configure.ac libgomp/aclocal.m4\n libgomp/config.h.in: libgomp/configure.ac libgomp/aclocal.m4\n-libhsail-rt/aclocal.m4: libhsail-rt/configure.ac\n-libhsail-rt/Makefile.in: libhsail-rt/Makefile.am libhsail-rt/aclocal.m4\n-libhsail-rt/configure: libhsail-rt/configure.ac libhsail-rt/aclocal.m4\n-libhsail-rt/target-config.h.in: libhsail-rt/configure.ac libhsail-rt/aclocal.m4\n libitm/aclocal.m4: libitm/configure.ac libitm/acinclude.m4\n libitm/Makefile.in: libitm/Makefile.am libitm/aclocal.m4\n libitm/testsuite/Makefile.in: libitm/testsuite/Makefile.am libitm/aclocal.m4"}, {"sha": "83c761acc558eb6f555f2ef4eb8addcdbbdec3e8", "filename": "contrib/update-copyright.py", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/814d86ddced44318c4195052ab7c4f227771bb76/contrib%2Fupdate-copyright.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/814d86ddced44318c4195052ab7c4f227771bb76/contrib%2Fupdate-copyright.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fupdate-copyright.py?ref=814d86ddced44318c4195052ab7c4f227771bb76", "patch": "@@ -755,7 +755,6 @@ def __init__ (self):\n         self.add_dir ('libgfortran')\n         # libgo is imported from upstream.\n         self.add_dir ('libgomp')\n-        self.add_dir ('libhsail-rt')\n         self.add_dir ('libiberty')\n         self.add_dir ('libitm')\n         self.add_dir ('libobjc')\n@@ -782,7 +781,6 @@ def __init__ (self):\n             'libgcc',\n             'libgfortran',\n             'libgomp',\n-            'libhsail-rt',\n             'libiberty',\n             'libitm',\n             'libobjc',"}, {"sha": "6eb56c78aeedb57d5f2fdb21633ca8887b4fa674", "filename": "libhsail-rt/ChangeLog", "status": "removed", "additions": 0, "deletions": 164, "changes": 164, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2FChangeLog?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,164 +0,0 @@\n-2021-01-05  Samuel Thibault  <samuel.thibault@ens-lyon.org>\n-\n-\t* configure: Re-generate.\n-\n-2020-12-05  Iain Sandoe  <iain@sandoe.co.uk>\n-\n-\tPR target/97865\n-\t* configure: Regenerate.\n-\n-2020-11-29  John David Anglin  <danglin@gcc.gnu.org>\n-\n-\t* configure: Regenerate.\n-\n-2020-01-24  Maciej W. Rozycki  <macro@wdc.com>\n-\n-\t* configure.ac: Handle `--with-toolexeclibdir='.\n-\t* Makefile.in: Regenerate.\n-\t* aclocal.m4: Regenerate.\n-\t* configure: Regenerate.\n-\n-2020-01-01  Jakub Jelinek  <jakub@redhat.com>\n-\n-\tUpdate copyright years.\n-\n-2019-09-27  Maciej W. Rozycki  <macro@wdc.com>\n-\n-\t* configure: Regenerate.\n-\n-2019-01-01  Jakub Jelinek  <jakub@redhat.com>\n-\n-\tUpdate copyright years.\n-\n-2018-10-31  Joseph Myers  <joseph@codesourcery.com>\n-\n-\tPR bootstrap/82856\n-\t* configure.ac: Remove AC_PREREQ.\n-\t* Makefile.in, aclocal.m4, configure: Regenerate.\n-\n-2018-05-04  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n-\n-\t* include/internal/phsa-rt.h: Whitespace cleanup.\n-\t* include/internal/workitems.h: Store work item ID data to easily\n-\taccessible locations.\n-\t* rt/workitems.c: Same.\n-\n-2018-05-04  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n-\n-\t* rt/workitems.c: Fix an alloca stack underflow.\n-\n-2018-04-18  David Malcolm  <dmalcolm@redhat.com>\n-\n-\tPR jit/85384\n-\t* configure: Regenerate.\n-\n-2018-01-03  Jakub Jelinek  <jakub@redhat.com>\n-\n-\tUpdate copyright years.\n-\n-2017-09-27  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n-\n-\t* include/internal/phsa-rt.h: Support for improved group segment\n-\thandling with a stack-like allocation scheme.\n-\t* include/internal/workitems.h: Likewise.\n-\t* rt/workitems.c: Likewise.\n-\n-2017-09-25  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n-\n-\t* rt/workitems.c: Assume the host runtime allocates the work group\n-\tmemory.\n-\n-2017-05-03  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n-\n-\t* rt/workitems.c: Removed a leftover comment.\n-\t* rt/arithmetic.c (__hsail_class_f32, __hsail_class_f64): Fix the\n-\tcheck for signaling/non-signalling NaN. Add class_f64 default\n-\timplementation.\n-\n-2017-02-01  Jakub Jelinek  <jakub@redhat.com>\n-\n-\t* configure.tgt: Fix i?86-*-linux* entry.\n-\t* rt/sat_arithmetic.c (__hsail_sat_add_u32, __hsail_sat_add_u64,\n-\t__hsail_sat_add_s32, __hsail_sat_add_s64): Use __builtin_add_overflow.\n-\t(__hsail_sat_sub_u8, __hsail_sat_sub_u16): Remove pointless for overflow\n-\tover maximum.\n-\t(__hsail_sat_sub_u32, __hsail_sat_sub_u64, __hsail_sat_sub_s32,\n-\t__hsail_sat_sub_s64): Use __builtin_sub_overflow.\n-\t(__hsail_sat_mul_u32, __hsail_sat_mul_u64, __hsail_sat_mul_s32,\n-\t__hsail_sat_mul_s64): Use __builtin_mul_overflow.\n-\t* rt/arithmetic.c (__hsail_borrow_u32, __hsail_borrow_u64): Use\n-\t__builtin_sub_overflow_p.\n-\t(__hsail_carry_u32, __hsail_carry_u64): Use __builtin_add_overflow_p.\n-\t* rt/misc.c (__hsail_groupbaseptr, __hsail_kernargbaseptr_u64):\n-\tCast pointers to uintptr_t first before casting to some other integral\n-\ttype.\n-\t* rt/segment.c (__hsail_segmentp_private, __hsail_segmentp_group): Likewise.\n-\t* rt/queue.c (__hsail_ldqueuereadindex, __hsail_ldqueuewriteindex,\n-\t__hsail_addqueuewriteindex, __hsail_casqueuewriteindex,\n-\t__hsail_stqueuereadindex, __hsail_stqueuewriteindex): Cast integral value\n-\tto uintptr_t first before casting to pointer.\n-\t* rt/workitems.c (__hsail_alloca_pop_frame): Cast memcpy first argument to\n-\tvoid * to avoid warning.\n-\n-2017-01-27  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n-\n-\t* configure.tgt: Moved the white list of supported targets here\n-\tfrom configure.ac.  Added i[3456789]86-*-linux* as a supported env\n-\tfor the BRIG FE.\n-\t* README: Added a proper description of what libhsail-rt is.\n-\n-2017-01-26  Jakub Jelinek  <jakub@redhat.com>\n-\n-\tUpdate copyright years.\n-\n-2017-01-25  Thomas Schwinge  <thomas@codesourcery.com>\n-\n-\t* config.h.in: Remove stale file.\n-\n-\t* configure.ac: Don't instantiate AC_CONFIG_MACRO_DIR.\n-\t* configure: Regenerate.\n-\n-2017-01-25  Jakub Jelinek  <jakub@redhat.com>\n-\n-\tPR other/79046\n-\t* configure.ac: Add GCC_BASE_VER.\n-\t* Makefile.am (gcc_version): Use @get_gcc_base_ver@ instead of cat to\n-\tget version from BASE-VER file.\n-\t(ACLOCAL_AMFLAGS): Set to -I .. -I ../config .\n-\t* aclocal.m4: Regenerated.\n-\t* configure: Regenerated.\n-\t* Makefile.in: Regenerated.\n-\n-2017-01-24  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka@parmance.com>\n-\t    Martin Jambor  <mjambor@suse.cz>\n-\n-\t* Makefile.am: New file.\n-\t* target-config.h.in: Likewise.\n-\t* configure.ac: Likewise.\n-\t* configure: Likewise.\n-\t* config.h.in: Likewise.\n-\t* aclocal.m4: Likewise.\n-\t* README: Likewise.\n-\t* Makefile.in: Likewise.\n-\t* include/internal/fibers.h: Likewise.\n-\t* include/internal/phsa-queue-interface.h: Likewise.\n-\t* include/internal/phsa-rt.h: Likewise.\n-\t* include/internal/workitems.h: Likewise.\n-\t* rt/arithmetic.c: Likewise.\n-\t* rt/atomics.c: Likewise.\n-\t* rt/bitstring.c: Likewise.\n-\t* rt/fbarrier.c: Likewise.\n-\t* rt/fibers.c: Likewise.\n-\t* rt/fp16.c: Likewise.\n-\t* rt/misc.c: Likewise.\n-\t* rt/multimedia.c: Likewise.\n-\t* rt/queue.c: Likewise.\n-\t* rt/sat_arithmetic.c: Likewise.\n-\t* rt/segment.c: Likewise.\n-\t* rt/workitems.c: Likewise.\n-\f\n-Copyright (C) 2017-2021 Free Software Foundation, Inc.\n-\n-Copying and distribution of this file, with or without modification,\n-are permitted in any medium without royalty provided the copyright\n-notice and this notice are preserved."}, {"sha": "e85427e3eaba5b293be6438afd45ed5b1b139b2d", "filename": "libhsail-rt/Makefile.am", "status": "removed", "additions": 0, "deletions": 122, "changes": 122, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2FMakefile.am?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,122 +0,0 @@\n-# Makefile.am -- libhsail-rt library Makefile.\n-\n-# Starting point copied from libcilkrts:\n-#  @copyright\n-#  Copyright (C) 2011, 2013, Intel Corporation\n-#  All rights reserved.\n-#\n-#  @copyright\n-#  Redistribution and use in source and binary forms, with or without\n-#  modification, are permitted provided that the following conditions\n-#  are met:\n-#\n-#    * Redistributions of source code must retain the above copyright\n-#      notice, this list of conditions and the following disclaimer.\n-#    * Redistributions in binary form must reproduce the above copyright\n-#      notice, this list of conditions and the following disclaimer in\n-#      the documentation and/or other materials provided with the\n-#      distribution.\n-#    * Neither the name of Intel Corporation nor the names of its\n-#      contributors may be used to endorse or promote products derived\n-#      from this software without specific prior written permission.\n-#\n-#  @copyright\n-#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n-#  \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n-#  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n-#  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n-#  HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\n-#  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n-#  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS\n-#  OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED\n-#  AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n-#  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY\n-#  WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n-#  POSSIBILITY OF SUCH DAMAGE.\n-\n-# libhsail-rt modifications:\n-# Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-# for General Processor Tech.\n-# Use of this source code is governed by a BSD-style\n-# license that can be found in the LICENSE file.\n-\n-# Process this file with autoreconf to produce Makefile.in.\n-\n-AUTOMAKE_OPTIONS = foreign subdir-objects\n-\n-gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n-\n-MAINT_CHARSET = latin1\n-\n-mkinstalldirs = $(SHELL) $(toplevel_srcdir)/mkinstalldirs\n-\n-ACLOCAL_AMFLAGS = -I .. -I ../config\n-\n-WARN_CFLAGS = $(WARN_FLAGS) $(WERROR)\n-\n-# -I/-D flags to pass when compiling.\n-AM_CPPFLAGS = -I$(srcdir)/rt -I$(srcdir)/include/internal\n-\n-AM_CFLAGS = \\\n-\t-I $(srcdir)/../include \\\n-\t-I $(srcdir)/../libgcc \\\n-\t-I $(MULTIBUILDTOP)../../gcc/include $(PTH_CFLAGS)\n-\n-toolexeclib_LTLIBRARIES = libhsail-rt.la\n-\n-runtime_files = \\\n-\trt/arithmetic.c \\\n-\trt/atomics.c \\\n-\trt/bitstring.c \\\n-\trt/fbarrier.c \\\n-\trt/fp16.c \\\n-\trt/misc.c \\\n-\trt/multimedia.c \\\n-\trt/queue.c \\\n-\trt/sat_arithmetic.c \\\n-\trt/segment.c \\\n-\trt/workitems.c \\\n-\trt/fibers.c\n-\n-libhsail_rt_la_SOURCES = $(runtime_files)\n-libhsail_rt_la_LDFLAGS  = -rpath '$(libdir)'\n-\n-# Work around what appears to be a GNU make bug handling MAKEFLAGS\n-# values defined in terms of make variables, as is the case for CC and\n-# friends when we are called from the top level Makefile.\n-AM_MAKEFLAGS = \\\n-       \"AR_FLAGS=$(AR_FLAGS)\" \\\n-       \"CC_FOR_BUILD=$(CC_FOR_BUILD)\" \\\n-       \"CFLAGS=$(CFLAGS)\" \\\n-       \"CXXFLAGS=$(CXXFLAGS)\" \\\n-       \"CFLAGS_FOR_BUILD=$(CFLAGS_FOR_BUILD)\" \\\n-       \"CFLAGS_FOR_TARGET=$(CFLAGS_FOR_TARGET)\" \\\n-       \"INSTALL=$(INSTALL)\" \\\n-       \"INSTALL_DATA=$(INSTALL_DATA)\" \\\n-       \"INSTALL_PROGRAM=$(INSTALL_PROGRAM)\" \\\n-       \"INSTALL_SCRIPT=$(INSTALL_SCRIPT)\" \\\n-       \"JC1FLAGS=$(JC1FLAGS)\" \\\n-       \"LDFLAGS=$(LDFLAGS)\" \\\n-       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n-       \"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)\" \\\n-       \"MAKE=$(MAKE)\" \\\n-       \"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \\\n-       \"PICFLAG=$(PICFLAG)\" \\\n-       \"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)\" \\\n-       \"SHELL=$(SHELL)\" \\\n-       \"RUNTESTFLAGS=$(RUNTESTFLAGS)\" \\\n-       \"exec_prefix=$(exec_prefix)\" \\\n-       \"infodir=$(infodir)\" \\\n-       \"libdir=$(libdir)\" \\\n-       \"prefix=$(prefix)\" \\\n-       \"includedir=$(includedir)\" \\\n-       \"AR=$(AR)\" \\\n-       \"AS=$(AS)\" \\\n-       \"LD=$(LD)\" \\\n-       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n-       \"NM=$(NM)\" \\\n-       \"PICFLAG=$(PICFLAG)\" \\\n-       \"RANLIB=$(RANLIB)\" \\\n-       \"DESTDIR=$(DESTDIR)\"\n-\n-MAKEOVERRIDES="}, {"sha": "84ad4127c368586b7a4e19b5601d3dca39d1df57", "filename": "libhsail-rt/Makefile.in", "status": "removed", "additions": 0, "deletions": 817, "changes": 817, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2FMakefile.in?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,817 +0,0 @@\n-# Makefile.in generated by automake 1.15.1 from Makefile.am.\n-# @configure_input@\n-\n-# Copyright (C) 1994-2017 Free Software Foundation, Inc.\n-\n-# This Makefile.in is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n-# even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n-# PARTICULAR PURPOSE.\n-\n-@SET_MAKE@\n-\n-# Makefile.am -- libhsail-rt library Makefile.\n-\n-# Starting point copied from libcilkrts:\n-#  @copyright\n-#  Copyright (C) 2011, 2013, Intel Corporation\n-#  All rights reserved.\n-#\n-#  @copyright\n-#  Redistribution and use in source and binary forms, with or without\n-#  modification, are permitted provided that the following conditions\n-#  are met:\n-#\n-#    * Redistributions of source code must retain the above copyright\n-#      notice, this list of conditions and the following disclaimer.\n-#    * Redistributions in binary form must reproduce the above copyright\n-#      notice, this list of conditions and the following disclaimer in\n-#      the documentation and/or other materials provided with the\n-#      distribution.\n-#    * Neither the name of Intel Corporation nor the names of its\n-#      contributors may be used to endorse or promote products derived\n-#      from this software without specific prior written permission.\n-#\n-#  @copyright\n-#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n-#  \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n-#  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n-#  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n-#  HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\n-#  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n-#  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS\n-#  OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED\n-#  AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n-#  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY\n-#  WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n-#  POSSIBILITY OF SUCH DAMAGE.\n-\n-# libhsail-rt modifications:\n-# Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-# for General Processor Tech.\n-# Use of this source code is governed by a BSD-style\n-# license that can be found in the LICENSE file.\n-\n-# Process this file with autoreconf to produce Makefile.in.\n-\n-VPATH = @srcdir@\n-am__is_gnu_make = { \\\n-  if test -z '$(MAKELEVEL)'; then \\\n-    false; \\\n-  elif test -n '$(MAKE_HOST)'; then \\\n-    true; \\\n-  elif test -n '$(MAKE_VERSION)' && test -n '$(CURDIR)'; then \\\n-    true; \\\n-  else \\\n-    false; \\\n-  fi; \\\n-}\n-am__make_running_with_option = \\\n-  case $${target_option-} in \\\n-      ?) ;; \\\n-      *) echo \"am__make_running_with_option: internal error: invalid\" \\\n-              \"target option '$${target_option-}' specified\" >&2; \\\n-         exit 1;; \\\n-  esac; \\\n-  has_opt=no; \\\n-  sane_makeflags=$$MAKEFLAGS; \\\n-  if $(am__is_gnu_make); then \\\n-    sane_makeflags=$$MFLAGS; \\\n-  else \\\n-    case $$MAKEFLAGS in \\\n-      *\\\\[\\ \\\t]*) \\\n-        bs=\\\\; \\\n-        sane_makeflags=`printf '%s\\n' \"$$MAKEFLAGS\" \\\n-          | sed \"s/$$bs$$bs[$$bs $$bs\t]*//g\"`;; \\\n-    esac; \\\n-  fi; \\\n-  skip_next=no; \\\n-  strip_trailopt () \\\n-  { \\\n-    flg=`printf '%s\\n' \"$$flg\" | sed \"s/$$1.*$$//\"`; \\\n-  }; \\\n-  for flg in $$sane_makeflags; do \\\n-    test $$skip_next = yes && { skip_next=no; continue; }; \\\n-    case $$flg in \\\n-      *=*|--*) continue;; \\\n-        -*I) strip_trailopt 'I'; skip_next=yes;; \\\n-      -*I?*) strip_trailopt 'I';; \\\n-        -*O) strip_trailopt 'O'; skip_next=yes;; \\\n-      -*O?*) strip_trailopt 'O';; \\\n-        -*l) strip_trailopt 'l'; skip_next=yes;; \\\n-      -*l?*) strip_trailopt 'l';; \\\n-      -[dEDm]) skip_next=yes;; \\\n-      -[JT]) skip_next=yes;; \\\n-    esac; \\\n-    case $$flg in \\\n-      *$$target_option*) has_opt=yes; break;; \\\n-    esac; \\\n-  done; \\\n-  test $$has_opt = yes\n-am__make_dryrun = (target_option=n; $(am__make_running_with_option))\n-am__make_keepgoing = (target_option=k; $(am__make_running_with_option))\n-pkgdatadir = $(datadir)/@PACKAGE@\n-pkgincludedir = $(includedir)/@PACKAGE@\n-pkglibdir = $(libdir)/@PACKAGE@\n-pkglibexecdir = $(libexecdir)/@PACKAGE@\n-am__cd = CDPATH=\"$${ZSH_VERSION+.}$(PATH_SEPARATOR)\" && cd\n-install_sh_DATA = $(install_sh) -c -m 644\n-install_sh_PROGRAM = $(install_sh) -c\n-install_sh_SCRIPT = $(install_sh) -c\n-INSTALL_HEADER = $(INSTALL_DATA)\n-transform = $(program_transform_name)\n-NORMAL_INSTALL = :\n-PRE_INSTALL = :\n-POST_INSTALL = :\n-NORMAL_UNINSTALL = :\n-PRE_UNINSTALL = :\n-POST_UNINSTALL = :\n-build_triplet = @build@\n-host_triplet = @host@\n-target_triplet = @target@\n-subdir = .\n-ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n-am__aclocal_m4_deps = $(top_srcdir)/../config/acx.m4 \\\n-\t$(top_srcdir)/../config/depstand.m4 \\\n-\t$(top_srcdir)/../config/lead-dot.m4 \\\n-\t$(top_srcdir)/../config/override.m4 \\\n-\t$(top_srcdir)/../config/toolexeclibdir.m4 \\\n-\t$(top_srcdir)/../libtool.m4 $(top_srcdir)/../ltoptions.m4 \\\n-\t$(top_srcdir)/../ltsugar.m4 $(top_srcdir)/../ltversion.m4 \\\n-\t$(top_srcdir)/../lt~obsolete.m4 $(top_srcdir)/configure.ac\n-am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n-\t$(ACLOCAL_M4)\n-DIST_COMMON = $(srcdir)/Makefile.am $(top_srcdir)/configure \\\n-\t$(am__configure_deps)\n-am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \\\n- configure.lineno config.status.lineno\n-CONFIG_HEADER = target-config.h\n-CONFIG_CLEAN_FILES =\n-CONFIG_CLEAN_VPATH_FILES =\n-am__vpath_adj_setup = srcdirstrip=`echo \"$(srcdir)\" | sed 's|.|.|g'`;\n-am__vpath_adj = case $$p in \\\n-    $(srcdir)/*) f=`echo \"$$p\" | sed \"s|^$$srcdirstrip/||\"`;; \\\n-    *) f=$$p;; \\\n-  esac;\n-am__strip_dir = f=`echo $$p | sed -e 's|^.*/||'`;\n-am__install_max = 40\n-am__nobase_strip_setup = \\\n-  srcdirstrip=`echo \"$(srcdir)\" | sed 's/[].[^$$\\\\*|]/\\\\\\\\&/g'`\n-am__nobase_strip = \\\n-  for p in $$list; do echo \"$$p\"; done | sed -e \"s|$$srcdirstrip/||\"\n-am__nobase_list = $(am__nobase_strip_setup); \\\n-  for p in $$list; do echo \"$$p $$p\"; done | \\\n-  sed \"s| $$srcdirstrip/| |;\"' / .*\\//!s/ .*/ ./; s,\\( .*\\)/[^/]*$$,\\1,' | \\\n-  $(AWK) 'BEGIN { files[\".\"] = \"\" } { files[$$2] = files[$$2] \" \" $$1; \\\n-    if (++n[$$2] == $(am__install_max)) \\\n-      { print $$2, files[$$2]; n[$$2] = 0; files[$$2] = \"\" } } \\\n-    END { for (dir in files) print dir, files[dir] }'\n-am__base_list = \\\n-  sed '$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;s/\\n/ /g' | \\\n-  sed '$$!N;$$!N;$$!N;$$!N;s/\\n/ /g'\n-am__uninstall_files_from_dir = { \\\n-  test -z \"$$files\" \\\n-    || { test ! -d \"$$dir\" && test ! -f \"$$dir\" && test ! -r \"$$dir\"; } \\\n-    || { echo \" ( cd '$$dir' && rm -f\" $$files \")\"; \\\n-         $(am__cd) \"$$dir\" && rm -f $$files; }; \\\n-  }\n-am__installdirs = \"$(DESTDIR)$(toolexeclibdir)\"\n-LTLIBRARIES = $(toolexeclib_LTLIBRARIES)\n-libhsail_rt_la_LIBADD =\n-am__dirstamp = $(am__leading_dot)dirstamp\n-am__objects_1 = rt/arithmetic.lo rt/atomics.lo rt/bitstring.lo \\\n-\trt/fbarrier.lo rt/fp16.lo rt/misc.lo rt/multimedia.lo \\\n-\trt/queue.lo rt/sat_arithmetic.lo rt/segment.lo rt/workitems.lo \\\n-\trt/fibers.lo\n-am_libhsail_rt_la_OBJECTS = $(am__objects_1)\n-libhsail_rt_la_OBJECTS = $(am_libhsail_rt_la_OBJECTS)\n-AM_V_lt = $(am__v_lt_@AM_V@)\n-am__v_lt_ = $(am__v_lt_@AM_DEFAULT_V@)\n-am__v_lt_0 = --silent\n-am__v_lt_1 = \n-libhsail_rt_la_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC \\\n-\t$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CCLD) \\\n-\t$(AM_CFLAGS) $(CFLAGS) $(libhsail_rt_la_LDFLAGS) $(LDFLAGS) -o \\\n-\t$@\n-AM_V_P = $(am__v_P_@AM_V@)\n-am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)\n-am__v_P_0 = false\n-am__v_P_1 = :\n-AM_V_GEN = $(am__v_GEN_@AM_V@)\n-am__v_GEN_ = $(am__v_GEN_@AM_DEFAULT_V@)\n-am__v_GEN_0 = @echo \"  GEN     \" $@;\n-am__v_GEN_1 = \n-AM_V_at = $(am__v_at_@AM_V@)\n-am__v_at_ = $(am__v_at_@AM_DEFAULT_V@)\n-am__v_at_0 = @\n-am__v_at_1 = \n-DEFAULT_INCLUDES = -I.@am__isrc@\n-depcomp = $(SHELL) $(top_srcdir)/../depcomp\n-am__depfiles_maybe = depfiles\n-am__mv = mv -f\n-COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \\\n-\t$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n-LTCOMPILE = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \\\n-\t$(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) \\\n-\t$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \\\n-\t$(AM_CFLAGS) $(CFLAGS)\n-AM_V_CC = $(am__v_CC_@AM_V@)\n-am__v_CC_ = $(am__v_CC_@AM_DEFAULT_V@)\n-am__v_CC_0 = @echo \"  CC      \" $@;\n-am__v_CC_1 = \n-CCLD = $(CC)\n-LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \\\n-\t$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \\\n-\t$(AM_LDFLAGS) $(LDFLAGS) -o $@\n-AM_V_CCLD = $(am__v_CCLD_@AM_V@)\n-am__v_CCLD_ = $(am__v_CCLD_@AM_DEFAULT_V@)\n-am__v_CCLD_0 = @echo \"  CCLD    \" $@;\n-am__v_CCLD_1 = \n-SOURCES = $(libhsail_rt_la_SOURCES)\n-am__can_run_installinfo = \\\n-  case $$AM_UPDATE_INFO_DIR in \\\n-    n|no|NO) false;; \\\n-    *) (install-info --version) >/dev/null 2>&1;; \\\n-  esac\n-am__tagged_files = $(HEADERS) $(SOURCES) $(TAGS_FILES) \\\n-\t$(LISP)target-config.h.in\n-# Read a list of newline-separated strings from the standard input,\n-# and print each of them once, without duplicates.  Input order is\n-# *not* preserved.\n-am__uniquify_input = $(AWK) '\\\n-  BEGIN { nonempty = 0; } \\\n-  { items[$$0] = 1; nonempty = 1; } \\\n-  END { if (nonempty) { for (i in items) print i; }; } \\\n-'\n-# Make sure the list of sources is unique.  This is necessary because,\n-# e.g., the same source file might be shared among _SOURCES variables\n-# for different programs/libraries.\n-am__define_uniq_tagged_files = \\\n-  list='$(am__tagged_files)'; \\\n-  unique=`for i in $$list; do \\\n-    if test -f \"$$i\"; then echo $$i; else echo $(srcdir)/$$i; fi; \\\n-  done | $(am__uniquify_input)`\n-ETAGS = etags\n-CTAGS = ctags\n-CSCOPE = cscope\n-AM_RECURSIVE_TARGETS = cscope\n-ACLOCAL = @ACLOCAL@\n-AMTAR = @AMTAR@\n-AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@\n-AR = @AR@\n-AUTOCONF = @AUTOCONF@\n-AUTOHEADER = @AUTOHEADER@\n-AUTOMAKE = @AUTOMAKE@\n-AWK = @AWK@\n-CC = @CC@\n-CCDEPMODE = @CCDEPMODE@\n-CFLAGS = @CFLAGS@\n-CPP = @CPP@\n-CPPFLAGS = @CPPFLAGS@\n-CXX = @CXX@\n-CXXCPP = @CXXCPP@\n-CXXDEPMODE = @CXXDEPMODE@\n-CXXFLAGS = @CXXFLAGS@\n-CYGPATH_W = @CYGPATH_W@\n-DEFS = @DEFS@\n-DEPDIR = @DEPDIR@\n-DSYMUTIL = @DSYMUTIL@\n-DUMPBIN = @DUMPBIN@\n-ECHO_C = @ECHO_C@\n-ECHO_N = @ECHO_N@\n-ECHO_T = @ECHO_T@\n-EGREP = @EGREP@\n-EXEEXT = @EXEEXT@\n-FGREP = @FGREP@\n-GREP = @GREP@\n-INSTALL = @INSTALL@\n-INSTALL_DATA = @INSTALL_DATA@\n-INSTALL_PROGRAM = @INSTALL_PROGRAM@\n-INSTALL_SCRIPT = @INSTALL_SCRIPT@\n-INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n-LD = @LD@\n-LDFLAGS = @LDFLAGS@\n-LIBOBJS = @LIBOBJS@\n-LIBS = @LIBS@\n-LIBTOOL = @LIBTOOL@\n-LIPO = @LIPO@\n-LN_S = @LN_S@\n-LTLIBOBJS = @LTLIBOBJS@\n-MAINT = @MAINT@\n-MAKEINFO = @MAKEINFO@\n-MKDIR_P = @MKDIR_P@\n-NM = @NM@\n-NMEDIT = @NMEDIT@\n-OBJDUMP = @OBJDUMP@\n-OBJEXT = @OBJEXT@\n-OTOOL = @OTOOL@\n-OTOOL64 = @OTOOL64@\n-PACKAGE = @PACKAGE@\n-PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@\n-PACKAGE_NAME = @PACKAGE_NAME@\n-PACKAGE_STRING = @PACKAGE_STRING@\n-PACKAGE_TARNAME = @PACKAGE_TARNAME@\n-PACKAGE_URL = @PACKAGE_URL@\n-PACKAGE_VERSION = @PACKAGE_VERSION@\n-PATH_SEPARATOR = @PATH_SEPARATOR@\n-RANLIB = @RANLIB@\n-SED = @SED@\n-SET_MAKE = @SET_MAKE@\n-SHELL = @SHELL@\n-STRIP = @STRIP@\n-VERSION = @VERSION@\n-abs_builddir = @abs_builddir@\n-abs_srcdir = @abs_srcdir@\n-abs_top_builddir = @abs_top_builddir@\n-abs_top_srcdir = @abs_top_srcdir@\n-ac_ct_CC = @ac_ct_CC@\n-ac_ct_CXX = @ac_ct_CXX@\n-ac_ct_DUMPBIN = @ac_ct_DUMPBIN@\n-am__include = @am__include@\n-am__leading_dot = @am__leading_dot@\n-am__quote = @am__quote@\n-am__tar = @am__tar@\n-am__untar = @am__untar@\n-bindir = @bindir@\n-build = @build@\n-build_alias = @build_alias@\n-build_cpu = @build_cpu@\n-build_os = @build_os@\n-build_vendor = @build_vendor@\n-builddir = @builddir@\n-config_dir = @config_dir@\n-datadir = @datadir@\n-datarootdir = @datarootdir@\n-docdir = @docdir@\n-dvidir = @dvidir@\n-exec_prefix = @exec_prefix@\n-get_gcc_base_ver = @get_gcc_base_ver@\n-host = @host@\n-host_alias = @host_alias@\n-host_cpu = @host_cpu@\n-host_os = @host_os@\n-host_vendor = @host_vendor@\n-htmldir = @htmldir@\n-includedir = @includedir@\n-infodir = @infodir@\n-install_sh = @install_sh@\n-libdir = @libdir@\n-libexecdir = @libexecdir@\n-localedir = @localedir@\n-localstatedir = @localstatedir@\n-mandir = @mandir@\n-mkdir_p = @mkdir_p@\n-oldincludedir = @oldincludedir@\n-pdfdir = @pdfdir@\n-prefix = @prefix@\n-program_transform_name = @program_transform_name@\n-psdir = @psdir@\n-sbindir = @sbindir@\n-sharedstatedir = @sharedstatedir@\n-srcdir = @srcdir@\n-sysconfdir = @sysconfdir@\n-target = @target@\n-target_alias = @target_alias@\n-target_cpu = @target_cpu@\n-target_os = @target_os@\n-target_vendor = @target_vendor@\n-toolexecdir = @toolexecdir@\n-toolexeclibdir = @toolexeclibdir@\n-top_build_prefix = @top_build_prefix@\n-top_builddir = @top_builddir@\n-top_srcdir = @top_srcdir@\n-AUTOMAKE_OPTIONS = foreign subdir-objects\n-gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n-MAINT_CHARSET = latin1\n-mkinstalldirs = $(SHELL) $(toplevel_srcdir)/mkinstalldirs\n-ACLOCAL_AMFLAGS = -I .. -I ../config\n-WARN_CFLAGS = $(WARN_FLAGS) $(WERROR)\n-\n-# -I/-D flags to pass when compiling.\n-AM_CPPFLAGS = -I$(srcdir)/rt -I$(srcdir)/include/internal\n-AM_CFLAGS = \\\n-\t-I $(srcdir)/../include \\\n-\t-I $(srcdir)/../libgcc \\\n-\t-I $(MULTIBUILDTOP)../../gcc/include $(PTH_CFLAGS)\n-\n-toolexeclib_LTLIBRARIES = libhsail-rt.la\n-runtime_files = \\\n-\trt/arithmetic.c \\\n-\trt/atomics.c \\\n-\trt/bitstring.c \\\n-\trt/fbarrier.c \\\n-\trt/fp16.c \\\n-\trt/misc.c \\\n-\trt/multimedia.c \\\n-\trt/queue.c \\\n-\trt/sat_arithmetic.c \\\n-\trt/segment.c \\\n-\trt/workitems.c \\\n-\trt/fibers.c\n-\n-libhsail_rt_la_SOURCES = $(runtime_files)\n-libhsail_rt_la_LDFLAGS = -rpath '$(libdir)'\n-\n-# Work around what appears to be a GNU make bug handling MAKEFLAGS\n-# values defined in terms of make variables, as is the case for CC and\n-# friends when we are called from the top level Makefile.\n-AM_MAKEFLAGS = \\\n-       \"AR_FLAGS=$(AR_FLAGS)\" \\\n-       \"CC_FOR_BUILD=$(CC_FOR_BUILD)\" \\\n-       \"CFLAGS=$(CFLAGS)\" \\\n-       \"CXXFLAGS=$(CXXFLAGS)\" \\\n-       \"CFLAGS_FOR_BUILD=$(CFLAGS_FOR_BUILD)\" \\\n-       \"CFLAGS_FOR_TARGET=$(CFLAGS_FOR_TARGET)\" \\\n-       \"INSTALL=$(INSTALL)\" \\\n-       \"INSTALL_DATA=$(INSTALL_DATA)\" \\\n-       \"INSTALL_PROGRAM=$(INSTALL_PROGRAM)\" \\\n-       \"INSTALL_SCRIPT=$(INSTALL_SCRIPT)\" \\\n-       \"JC1FLAGS=$(JC1FLAGS)\" \\\n-       \"LDFLAGS=$(LDFLAGS)\" \\\n-       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n-       \"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)\" \\\n-       \"MAKE=$(MAKE)\" \\\n-       \"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \\\n-       \"PICFLAG=$(PICFLAG)\" \\\n-       \"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)\" \\\n-       \"SHELL=$(SHELL)\" \\\n-       \"RUNTESTFLAGS=$(RUNTESTFLAGS)\" \\\n-       \"exec_prefix=$(exec_prefix)\" \\\n-       \"infodir=$(infodir)\" \\\n-       \"libdir=$(libdir)\" \\\n-       \"prefix=$(prefix)\" \\\n-       \"includedir=$(includedir)\" \\\n-       \"AR=$(AR)\" \\\n-       \"AS=$(AS)\" \\\n-       \"LD=$(LD)\" \\\n-       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n-       \"NM=$(NM)\" \\\n-       \"PICFLAG=$(PICFLAG)\" \\\n-       \"RANLIB=$(RANLIB)\" \\\n-       \"DESTDIR=$(DESTDIR)\"\n-\n-MAKEOVERRIDES = \n-all: target-config.h\n-\t$(MAKE) $(AM_MAKEFLAGS) all-am\n-\n-.SUFFIXES:\n-.SUFFIXES: .c .lo .o .obj\n-am--refresh: Makefile\n-\t@:\n-$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am  $(am__configure_deps)\n-\t@for dep in $?; do \\\n-\t  case '$(am__configure_deps)' in \\\n-\t    *$$dep*) \\\n-\t      echo ' cd $(srcdir) && $(AUTOMAKE) --foreign'; \\\n-\t      $(am__cd) $(srcdir) && $(AUTOMAKE) --foreign \\\n-\t\t&& exit 0; \\\n-\t      exit 1;; \\\n-\t  esac; \\\n-\tdone; \\\n-\techo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign Makefile'; \\\n-\t$(am__cd) $(top_srcdir) && \\\n-\t  $(AUTOMAKE) --foreign Makefile\n-Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status\n-\t@case '$?' in \\\n-\t  *config.status*) \\\n-\t    echo ' $(SHELL) ./config.status'; \\\n-\t    $(SHELL) ./config.status;; \\\n-\t  *) \\\n-\t    echo ' cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe)'; \\\n-\t    cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe);; \\\n-\tesac;\n-\n-$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n-\t$(SHELL) ./config.status --recheck\n-\n-$(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)\n-\t$(am__cd) $(srcdir) && $(AUTOCONF)\n-$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)\n-\t$(am__cd) $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)\n-$(am__aclocal_m4_deps):\n-\n-target-config.h: stamp-h1\n-\t@test -f $@ || rm -f stamp-h1\n-\t@test -f $@ || $(MAKE) $(AM_MAKEFLAGS) stamp-h1\n-\n-stamp-h1: $(srcdir)/target-config.h.in $(top_builddir)/config.status\n-\t@rm -f stamp-h1\n-\tcd $(top_builddir) && $(SHELL) ./config.status target-config.h\n-$(srcdir)/target-config.h.in: @MAINTAINER_MODE_TRUE@ $(am__configure_deps) \n-\t($(am__cd) $(top_srcdir) && $(AUTOHEADER))\n-\trm -f stamp-h1\n-\ttouch $@\n-\n-distclean-hdr:\n-\t-rm -f target-config.h stamp-h1\n-\n-install-toolexeclibLTLIBRARIES: $(toolexeclib_LTLIBRARIES)\n-\t@$(NORMAL_INSTALL)\n-\t@list='$(toolexeclib_LTLIBRARIES)'; test -n \"$(toolexeclibdir)\" || list=; \\\n-\tlist2=; for p in $$list; do \\\n-\t  if test -f $$p; then \\\n-\t    list2=\"$$list2 $$p\"; \\\n-\t  else :; fi; \\\n-\tdone; \\\n-\ttest -z \"$$list2\" || { \\\n-\t  echo \" $(MKDIR_P) '$(DESTDIR)$(toolexeclibdir)'\"; \\\n-\t  $(MKDIR_P) \"$(DESTDIR)$(toolexeclibdir)\" || exit 1; \\\n-\t  echo \" $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(toolexeclibdir)'\"; \\\n-\t  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 \"$(DESTDIR)$(toolexeclibdir)\"; \\\n-\t}\n-\n-uninstall-toolexeclibLTLIBRARIES:\n-\t@$(NORMAL_UNINSTALL)\n-\t@list='$(toolexeclib_LTLIBRARIES)'; test -n \"$(toolexeclibdir)\" || list=; \\\n-\tfor p in $$list; do \\\n-\t  $(am__strip_dir) \\\n-\t  echo \" $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=uninstall rm -f '$(DESTDIR)$(toolexeclibdir)/$$f'\"; \\\n-\t  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=uninstall rm -f \"$(DESTDIR)$(toolexeclibdir)/$$f\"; \\\n-\tdone\n-\n-clean-toolexeclibLTLIBRARIES:\n-\t-test -z \"$(toolexeclib_LTLIBRARIES)\" || rm -f $(toolexeclib_LTLIBRARIES)\n-\t@list='$(toolexeclib_LTLIBRARIES)'; \\\n-\tlocs=`for p in $$list; do echo $$p; done | \\\n-\t      sed 's|^[^/]*$$|.|; s|/[^/]*$$||; s|$$|/so_locations|' | \\\n-\t      sort -u`; \\\n-\ttest -z \"$$locs\" || { \\\n-\t  echo rm -f $${locs}; \\\n-\t  rm -f $${locs}; \\\n-\t}\n-rt/$(am__dirstamp):\n-\t@$(MKDIR_P) rt\n-\t@: > rt/$(am__dirstamp)\n-rt/$(DEPDIR)/$(am__dirstamp):\n-\t@$(MKDIR_P) rt/$(DEPDIR)\n-\t@: > rt/$(DEPDIR)/$(am__dirstamp)\n-rt/arithmetic.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/atomics.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/bitstring.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/fbarrier.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/fp16.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/misc.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/multimedia.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/queue.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/sat_arithmetic.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/segment.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/workitems.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-rt/fibers.lo: rt/$(am__dirstamp) rt/$(DEPDIR)/$(am__dirstamp)\n-\n-libhsail-rt.la: $(libhsail_rt_la_OBJECTS) $(libhsail_rt_la_DEPENDENCIES) $(EXTRA_libhsail_rt_la_DEPENDENCIES) \n-\t$(AM_V_CCLD)$(libhsail_rt_la_LINK) -rpath $(toolexeclibdir) $(libhsail_rt_la_OBJECTS) $(libhsail_rt_la_LIBADD) $(LIBS)\n-\n-mostlyclean-compile:\n-\t-rm -f *.$(OBJEXT)\n-\t-rm -f rt/*.$(OBJEXT)\n-\t-rm -f rt/*.lo\n-\n-distclean-compile:\n-\t-rm -f *.tab.c\n-\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/arithmetic.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/atomics.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/bitstring.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/fbarrier.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/fibers.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/fp16.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/misc.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/multimedia.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/queue.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/sat_arithmetic.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/segment.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@rt/$(DEPDIR)/workitems.Plo@am__quote@\n-\n-.c.o:\n-@am__fastdepCC_TRUE@\t$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\\.o$$||'`;\\\n-@am__fastdepCC_TRUE@\t$(COMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ $< &&\\\n-@am__fastdepCC_TRUE@\t$(am__mv) $$depbase.Tpo $$depbase.Po\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\t$(AM_V_CC)source='$<' object='$@' libtool=no @AMDEPBACKSLASH@\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n-@am__fastdepCC_FALSE@\t$(AM_V_CC@am__nodep@)$(COMPILE) -c -o $@ $<\n-\n-.c.obj:\n-@am__fastdepCC_TRUE@\t$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\\.obj$$||'`;\\\n-@am__fastdepCC_TRUE@\t$(COMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ `$(CYGPATH_W) '$<'` &&\\\n-@am__fastdepCC_TRUE@\t$(am__mv) $$depbase.Tpo $$depbase.Po\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\t$(AM_V_CC)source='$<' object='$@' libtool=no @AMDEPBACKSLASH@\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n-@am__fastdepCC_FALSE@\t$(AM_V_CC@am__nodep@)$(COMPILE) -c -o $@ `$(CYGPATH_W) '$<'`\n-\n-.c.lo:\n-@am__fastdepCC_TRUE@\t$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\\.lo$$||'`;\\\n-@am__fastdepCC_TRUE@\t$(LTCOMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ $< &&\\\n-@am__fastdepCC_TRUE@\t$(am__mv) $$depbase.Tpo $$depbase.Plo\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\t$(AM_V_CC)source='$<' object='$@' libtool=yes @AMDEPBACKSLASH@\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n-@am__fastdepCC_FALSE@\t$(AM_V_CC@am__nodep@)$(LTCOMPILE) -c -o $@ $<\n-\n-mostlyclean-libtool:\n-\t-rm -f *.lo\n-\n-clean-libtool:\n-\t-rm -rf .libs _libs\n-\t-rm -rf rt/.libs rt/_libs\n-\n-distclean-libtool:\n-\t-rm -f libtool config.lt\n-\n-ID: $(am__tagged_files)\n-\t$(am__define_uniq_tagged_files); mkid -fID $$unique\n-tags: tags-am\n-TAGS: tags\n-\n-tags-am: $(TAGS_DEPENDENCIES) $(am__tagged_files)\n-\tset x; \\\n-\there=`pwd`; \\\n-\t$(am__define_uniq_tagged_files); \\\n-\tshift; \\\n-\tif test -z \"$(ETAGS_ARGS)$$*$$unique\"; then :; else \\\n-\t  test -n \"$$unique\" || unique=$$empty_fix; \\\n-\t  if test $$# -gt 0; then \\\n-\t    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \\\n-\t      \"$$@\" $$unique; \\\n-\t  else \\\n-\t    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \\\n-\t      $$unique; \\\n-\t  fi; \\\n-\tfi\n-ctags: ctags-am\n-\n-CTAGS: ctags\n-ctags-am: $(TAGS_DEPENDENCIES) $(am__tagged_files)\n-\t$(am__define_uniq_tagged_files); \\\n-\ttest -z \"$(CTAGS_ARGS)$$unique\" \\\n-\t  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \\\n-\t     $$unique\n-\n-GTAGS:\n-\there=`$(am__cd) $(top_builddir) && pwd` \\\n-\t  && $(am__cd) $(top_srcdir) \\\n-\t  && gtags -i $(GTAGS_ARGS) \"$$here\"\n-cscope: cscope.files\n-\ttest ! -s cscope.files \\\n-\t  || $(CSCOPE) -b -q $(AM_CSCOPEFLAGS) $(CSCOPEFLAGS) -i cscope.files $(CSCOPE_ARGS)\n-clean-cscope:\n-\t-rm -f cscope.files\n-cscope.files: clean-cscope cscopelist\n-cscopelist: cscopelist-am\n-\n-cscopelist-am: $(am__tagged_files)\n-\tlist='$(am__tagged_files)'; \\\n-\tcase \"$(srcdir)\" in \\\n-\t  [\\\\/]* | ?:[\\\\/]*) sdir=\"$(srcdir)\" ;; \\\n-\t  *) sdir=$(subdir)/$(srcdir) ;; \\\n-\tesac; \\\n-\tfor i in $$list; do \\\n-\t  if test -f \"$$i\"; then \\\n-\t    echo \"$(subdir)/$$i\"; \\\n-\t  else \\\n-\t    echo \"$$sdir/$$i\"; \\\n-\t  fi; \\\n-\tdone >> $(top_builddir)/cscope.files\n-\n-distclean-tags:\n-\t-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags\n-\t-rm -f cscope.out cscope.in.out cscope.po.out cscope.files\n-check-am: all-am\n-check: check-am\n-all-am: Makefile $(LTLIBRARIES) target-config.h\n-installdirs:\n-\tfor dir in \"$(DESTDIR)$(toolexeclibdir)\"; do \\\n-\t  test -z \"$$dir\" || $(MKDIR_P) \"$$dir\"; \\\n-\tdone\n-install: install-am\n-install-exec: install-exec-am\n-install-data: install-data-am\n-uninstall: uninstall-am\n-\n-install-am: all-am\n-\t@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am\n-\n-installcheck: installcheck-am\n-install-strip:\n-\tif test -z '$(STRIP)'; then \\\n-\t  $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" \\\n-\t    install_sh_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" INSTALL_STRIP_FLAG=-s \\\n-\t      install; \\\n-\telse \\\n-\t  $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" \\\n-\t    install_sh_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" INSTALL_STRIP_FLAG=-s \\\n-\t    \"INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'\" install; \\\n-\tfi\n-mostlyclean-generic:\n-\n-clean-generic:\n-\n-distclean-generic:\n-\t-test -z \"$(CONFIG_CLEAN_FILES)\" || rm -f $(CONFIG_CLEAN_FILES)\n-\t-test . = \"$(srcdir)\" || test -z \"$(CONFIG_CLEAN_VPATH_FILES)\" || rm -f $(CONFIG_CLEAN_VPATH_FILES)\n-\t-rm -f rt/$(DEPDIR)/$(am__dirstamp)\n-\t-rm -f rt/$(am__dirstamp)\n-\n-maintainer-clean-generic:\n-\t@echo \"This command is intended for maintainers to use\"\n-\t@echo \"it deletes files that may require special tools to rebuild.\"\n-clean: clean-am\n-\n-clean-am: clean-generic clean-libtool clean-toolexeclibLTLIBRARIES \\\n-\tmostlyclean-am\n-\n-distclean: distclean-am\n-\t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n-\t-rm -rf rt/$(DEPDIR)\n-\t-rm -f Makefile\n-distclean-am: clean-am distclean-compile distclean-generic \\\n-\tdistclean-hdr distclean-libtool distclean-tags\n-\n-dvi: dvi-am\n-\n-dvi-am:\n-\n-html: html-am\n-\n-html-am:\n-\n-info: info-am\n-\n-info-am:\n-\n-install-data-am:\n-\n-install-dvi: install-dvi-am\n-\n-install-dvi-am:\n-\n-install-exec-am: install-toolexeclibLTLIBRARIES\n-\n-install-html: install-html-am\n-\n-install-html-am:\n-\n-install-info: install-info-am\n-\n-install-info-am:\n-\n-install-man:\n-\n-install-pdf: install-pdf-am\n-\n-install-pdf-am:\n-\n-install-ps: install-ps-am\n-\n-install-ps-am:\n-\n-installcheck-am:\n-\n-maintainer-clean: maintainer-clean-am\n-\t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n-\t-rm -rf $(top_srcdir)/autom4te.cache\n-\t-rm -rf rt/$(DEPDIR)\n-\t-rm -f Makefile\n-maintainer-clean-am: distclean-am maintainer-clean-generic\n-\n-mostlyclean: mostlyclean-am\n-\n-mostlyclean-am: mostlyclean-compile mostlyclean-generic \\\n-\tmostlyclean-libtool\n-\n-pdf: pdf-am\n-\n-pdf-am:\n-\n-ps: ps-am\n-\n-ps-am:\n-\n-uninstall-am: uninstall-toolexeclibLTLIBRARIES\n-\n-.MAKE: all install-am install-strip\n-\n-.PHONY: CTAGS GTAGS TAGS all all-am am--refresh check check-am clean \\\n-\tclean-cscope clean-generic clean-libtool \\\n-\tclean-toolexeclibLTLIBRARIES cscope cscopelist-am ctags \\\n-\tctags-am distclean distclean-compile distclean-generic \\\n-\tdistclean-hdr distclean-libtool distclean-tags dvi dvi-am html \\\n-\thtml-am info info-am install install-am install-data \\\n-\tinstall-data-am install-dvi install-dvi-am install-exec \\\n-\tinstall-exec-am install-html install-html-am install-info \\\n-\tinstall-info-am install-man install-pdf install-pdf-am \\\n-\tinstall-ps install-ps-am install-strip \\\n-\tinstall-toolexeclibLTLIBRARIES installcheck installcheck-am \\\n-\tinstalldirs maintainer-clean maintainer-clean-generic \\\n-\tmostlyclean mostlyclean-compile mostlyclean-generic \\\n-\tmostlyclean-libtool pdf pdf-am ps ps-am tags tags-am uninstall \\\n-\tuninstall-am uninstall-toolexeclibLTLIBRARIES\n-\n-.PRECIOUS: Makefile\n-\n-\n-# Tell versions [3.59,3.63) of GNU make to not export all variables.\n-# Otherwise a system limit (for SysV at least) may be exceeded.\n-.NOEXPORT:"}, {"sha": "64c2107ea3de92ef3ce2e7f194fcb57b751d9ab7", "filename": "libhsail-rt/README", "status": "removed", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FREADME", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2FREADME", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2FREADME?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,10 +0,0 @@\n-This library implements the agent-side runtime functionality required\n-to run HSA finalized programs produced by the BRIG frontend.\n-\n-The library contains both the code required to run kernels on the agent\n-and also functions implementing more complex HSAIL instructions.\n-\n-rt/workitems.c contains the runtime entry function that manages multiple\n-work-item execution using fibers or simple for-loops (in case of work groups\n-without barriers).  Otherwise, the rest of the source files mostly contain\n-functions that typically map directly to HSAIL instructions."}, {"sha": "0e98ed6070ccc1a31e5b242747712da82806a262", "filename": "libhsail-rt/aclocal.m4", "status": "removed", "additions": 0, "deletions": 1179, "changes": 1179, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Faclocal.m4?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,1179 +0,0 @@\n-# generated automatically by aclocal 1.15.1 -*- Autoconf -*-\n-\n-# Copyright (C) 1996-2017 Free Software Foundation, Inc.\n-\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n-# even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n-# PARTICULAR PURPOSE.\n-\n-m4_ifndef([AC_CONFIG_MACRO_DIRS], [m4_defun([_AM_CONFIG_MACRO_DIRS], [])m4_defun([AC_CONFIG_MACRO_DIRS], [_AM_CONFIG_MACRO_DIRS($@)])])\n-m4_ifndef([AC_AUTOCONF_VERSION],\n-  [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl\n-m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.69],,\n-[m4_warning([this file was generated for autoconf 2.69.\n-You have another version of autoconf.  It may work, but is not guaranteed to.\n-If you have problems, you may need to regenerate the build system entirely.\n-To do so, use the procedure documented by the package, typically 'autoreconf'.])])\n-\n-# Copyright (C) 2002-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_AUTOMAKE_VERSION(VERSION)\n-# ----------------------------\n-# Automake X.Y traces this macro to ensure aclocal.m4 has been\n-# generated from the m4 files accompanying Automake X.Y.\n-# (This private macro should not be called outside this file.)\n-AC_DEFUN([AM_AUTOMAKE_VERSION],\n-[am__api_version='1.15'\n-dnl Some users find AM_AUTOMAKE_VERSION and mistake it for a way to\n-dnl require some minimum version.  Point them to the right macro.\n-m4_if([$1], [1.15.1], [],\n-      [AC_FATAL([Do not call $0, use AM_INIT_AUTOMAKE([$1]).])])dnl\n-])\n-\n-# _AM_AUTOCONF_VERSION(VERSION)\n-# -----------------------------\n-# aclocal traces this macro to find the Autoconf version.\n-# This is a private macro too.  Using m4_define simplifies\n-# the logic in aclocal, which can simply ignore this definition.\n-m4_define([_AM_AUTOCONF_VERSION], [])\n-\n-# AM_SET_CURRENT_AUTOMAKE_VERSION\n-# -------------------------------\n-# Call AM_AUTOMAKE_VERSION and AM_AUTOMAKE_VERSION so they can be traced.\n-# This function is AC_REQUIREd by AM_INIT_AUTOMAKE.\n-AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],\n-[AM_AUTOMAKE_VERSION([1.15.1])dnl\n-m4_ifndef([AC_AUTOCONF_VERSION],\n-  [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl\n-_AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])\n-\n-# AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-\n-\n-# Copyright (C) 2001-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets\n-# $ac_aux_dir to '$srcdir/foo'.  In other projects, it is set to\n-# '$srcdir', '$srcdir/..', or '$srcdir/../..'.\n-#\n-# Of course, Automake must honor this variable whenever it calls a\n-# tool from the auxiliary directory.  The problem is that $srcdir (and\n-# therefore $ac_aux_dir as well) can be either absolute or relative,\n-# depending on how configure is run.  This is pretty annoying, since\n-# it makes $ac_aux_dir quite unusable in subdirectories: in the top\n-# source directory, any form will work fine, but in subdirectories a\n-# relative path needs to be adjusted first.\n-#\n-# $ac_aux_dir/missing\n-#    fails when called from a subdirectory if $ac_aux_dir is relative\n-# $top_srcdir/$ac_aux_dir/missing\n-#    fails if $ac_aux_dir is absolute,\n-#    fails when called from a subdirectory in a VPATH build with\n-#          a relative $ac_aux_dir\n-#\n-# The reason of the latter failure is that $top_srcdir and $ac_aux_dir\n-# are both prefixed by $srcdir.  In an in-source build this is usually\n-# harmless because $srcdir is '.', but things will broke when you\n-# start a VPATH build or use an absolute $srcdir.\n-#\n-# So we could use something similar to $top_srcdir/$ac_aux_dir/missing,\n-# iff we strip the leading $srcdir from $ac_aux_dir.  That would be:\n-#   am_aux_dir='\\$(top_srcdir)/'`expr \"$ac_aux_dir\" : \"$srcdir//*\\(.*\\)\"`\n-# and then we would define $MISSING as\n-#   MISSING=\"\\${SHELL} $am_aux_dir/missing\"\n-# This will work as long as MISSING is not called from configure, because\n-# unfortunately $(top_srcdir) has no meaning in configure.\n-# However there are other variables, like CC, which are often used in\n-# configure, and could therefore not use this \"fixed\" $ac_aux_dir.\n-#\n-# Another solution, used here, is to always expand $ac_aux_dir to an\n-# absolute PATH.  The drawback is that using absolute paths prevent a\n-# configured tree to be moved without reconfiguration.\n-\n-AC_DEFUN([AM_AUX_DIR_EXPAND],\n-[AC_REQUIRE([AC_CONFIG_AUX_DIR_DEFAULT])dnl\n-# Expand $ac_aux_dir to an absolute path.\n-am_aux_dir=`cd \"$ac_aux_dir\" && pwd`\n-])\n-\n-# AM_CONDITIONAL                                            -*- Autoconf -*-\n-\n-# Copyright (C) 1997-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_CONDITIONAL(NAME, SHELL-CONDITION)\n-# -------------------------------------\n-# Define a conditional.\n-AC_DEFUN([AM_CONDITIONAL],\n-[AC_PREREQ([2.52])dnl\n- m4_if([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],\n-       [$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl\n-AC_SUBST([$1_TRUE])dnl\n-AC_SUBST([$1_FALSE])dnl\n-_AM_SUBST_NOTMAKE([$1_TRUE])dnl\n-_AM_SUBST_NOTMAKE([$1_FALSE])dnl\n-m4_define([_AM_COND_VALUE_$1], [$2])dnl\n-if $2; then\n-  $1_TRUE=\n-  $1_FALSE='#'\n-else\n-  $1_TRUE='#'\n-  $1_FALSE=\n-fi\n-AC_CONFIG_COMMANDS_PRE(\n-[if test -z \"${$1_TRUE}\" && test -z \"${$1_FALSE}\"; then\n-  AC_MSG_ERROR([[conditional \"$1\" was never defined.\n-Usually this means the macro was only invoked conditionally.]])\n-fi])])\n-\n-# Copyright (C) 1999-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-\n-# There are a few dirty hacks below to avoid letting 'AC_PROG_CC' be\n-# written in clear, in which case automake, when reading aclocal.m4,\n-# will think it sees a *use*, and therefore will trigger all it's\n-# C support machinery.  Also note that it means that autoscan, seeing\n-# CC etc. in the Makefile, will ask for an AC_PROG_CC use...\n-\n-\n-# _AM_DEPENDENCIES(NAME)\n-# ----------------------\n-# See how the compiler implements dependency checking.\n-# NAME is \"CC\", \"CXX\", \"OBJC\", \"OBJCXX\", \"UPC\", or \"GJC\".\n-# We try a few techniques and use that to set a single cache variable.\n-#\n-# We don't AC_REQUIRE the corresponding AC_PROG_CC since the latter was\n-# modified to invoke _AM_DEPENDENCIES(CC); we would have a circular\n-# dependency, and given that the user is not expected to run this macro,\n-# just rely on AC_PROG_CC.\n-AC_DEFUN([_AM_DEPENDENCIES],\n-[AC_REQUIRE([AM_SET_DEPDIR])dnl\n-AC_REQUIRE([AM_OUTPUT_DEPENDENCY_COMMANDS])dnl\n-AC_REQUIRE([AM_MAKE_INCLUDE])dnl\n-AC_REQUIRE([AM_DEP_TRACK])dnl\n-\n-m4_if([$1], [CC],   [depcc=\"$CC\"   am_compiler_list=],\n-      [$1], [CXX],  [depcc=\"$CXX\"  am_compiler_list=],\n-      [$1], [OBJC], [depcc=\"$OBJC\" am_compiler_list='gcc3 gcc'],\n-      [$1], [OBJCXX], [depcc=\"$OBJCXX\" am_compiler_list='gcc3 gcc'],\n-      [$1], [UPC],  [depcc=\"$UPC\"  am_compiler_list=],\n-      [$1], [GCJ],  [depcc=\"$GCJ\"  am_compiler_list='gcc3 gcc'],\n-                    [depcc=\"$$1\"   am_compiler_list=])\n-\n-AC_CACHE_CHECK([dependency style of $depcc],\n-               [am_cv_$1_dependencies_compiler_type],\n-[if test -z \"$AMDEP_TRUE\" && test -f \"$am_depcomp\"; then\n-  # We make a subdir and do the tests there.  Otherwise we can end up\n-  # making bogus files that we don't know about and never remove.  For\n-  # instance it was reported that on HP-UX the gcc test will end up\n-  # making a dummy file named 'D' -- because '-MD' means \"put the output\n-  # in D\".\n-  rm -rf conftest.dir\n-  mkdir conftest.dir\n-  # Copy depcomp to subdir because otherwise we won't find it if we're\n-  # using a relative directory.\n-  cp \"$am_depcomp\" conftest.dir\n-  cd conftest.dir\n-  # We will build objects and dependencies in a subdirectory because\n-  # it helps to detect inapplicable dependency modes.  For instance\n-  # both Tru64's cc and ICC support -MD to output dependencies as a\n-  # side effect of compilation, but ICC will put the dependencies in\n-  # the current directory while Tru64 will put them in the object\n-  # directory.\n-  mkdir sub\n-\n-  am_cv_$1_dependencies_compiler_type=none\n-  if test \"$am_compiler_list\" = \"\"; then\n-     am_compiler_list=`sed -n ['s/^#*\\([a-zA-Z0-9]*\\))$/\\1/p'] < ./depcomp`\n-  fi\n-  am__universal=false\n-  m4_case([$1], [CC],\n-    [case \" $depcc \" in #(\n-     *\\ -arch\\ *\\ -arch\\ *) am__universal=true ;;\n-     esac],\n-    [CXX],\n-    [case \" $depcc \" in #(\n-     *\\ -arch\\ *\\ -arch\\ *) am__universal=true ;;\n-     esac])\n-\n-  for depmode in $am_compiler_list; do\n-    # Setup a source with many dependencies, because some compilers\n-    # like to wrap large dependency lists on column 80 (with \\), and\n-    # we should not choose a depcomp mode which is confused by this.\n-    #\n-    # We need to recreate these files for each test, as the compiler may\n-    # overwrite some of them when testing with obscure command lines.\n-    # This happens at least with the AIX C compiler.\n-    : > sub/conftest.c\n-    for i in 1 2 3 4 5 6; do\n-      echo '#include \"conftst'$i'.h\"' >> sub/conftest.c\n-      # Using \": > sub/conftst$i.h\" creates only sub/conftst1.h with\n-      # Solaris 10 /bin/sh.\n-      echo '/* dummy */' > sub/conftst$i.h\n-    done\n-    echo \"${am__include} ${am__quote}sub/conftest.Po${am__quote}\" > confmf\n-\n-    # We check with '-c' and '-o' for the sake of the \"dashmstdout\"\n-    # mode.  It turns out that the SunPro C++ compiler does not properly\n-    # handle '-M -o', and we need to detect this.  Also, some Intel\n-    # versions had trouble with output in subdirs.\n-    am__obj=sub/conftest.${OBJEXT-o}\n-    am__minus_obj=\"-o $am__obj\"\n-    case $depmode in\n-    gcc)\n-      # This depmode causes a compiler race in universal mode.\n-      test \"$am__universal\" = false || continue\n-      ;;\n-    nosideeffect)\n-      # After this tag, mechanisms are not by side-effect, so they'll\n-      # only be used when explicitly requested.\n-      if test \"x$enable_dependency_tracking\" = xyes; then\n-\tcontinue\n-      else\n-\tbreak\n-      fi\n-      ;;\n-    msvc7 | msvc7msys | msvisualcpp | msvcmsys)\n-      # This compiler won't grok '-c -o', but also, the minuso test has\n-      # not run yet.  These depmodes are late enough in the game, and\n-      # so weak that their functioning should not be impacted.\n-      am__obj=conftest.${OBJEXT-o}\n-      am__minus_obj=\n-      ;;\n-    none) break ;;\n-    esac\n-    if depmode=$depmode \\\n-       source=sub/conftest.c object=$am__obj \\\n-       depfile=sub/conftest.Po tmpdepfile=sub/conftest.TPo \\\n-       $SHELL ./depcomp $depcc -c $am__minus_obj sub/conftest.c \\\n-         >/dev/null 2>conftest.err &&\n-       grep sub/conftst1.h sub/conftest.Po > /dev/null 2>&1 &&\n-       grep sub/conftst6.h sub/conftest.Po > /dev/null 2>&1 &&\n-       grep $am__obj sub/conftest.Po > /dev/null 2>&1 &&\n-       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then\n-      # icc doesn't choke on unknown options, it will just issue warnings\n-      # or remarks (even with -Werror).  So we grep stderr for any message\n-      # that says an option was ignored or not supported.\n-      # When given -MP, icc 7.0 and 7.1 complain thusly:\n-      #   icc: Command line warning: ignoring option '-M'; no argument required\n-      # The diagnosis changed in icc 8.0:\n-      #   icc: Command line remark: option '-MP' not supported\n-      if (grep 'ignoring option' conftest.err ||\n-          grep 'not supported' conftest.err) >/dev/null 2>&1; then :; else\n-        am_cv_$1_dependencies_compiler_type=$depmode\n-        break\n-      fi\n-    fi\n-  done\n-\n-  cd ..\n-  rm -rf conftest.dir\n-else\n-  am_cv_$1_dependencies_compiler_type=none\n-fi\n-])\n-AC_SUBST([$1DEPMODE], [depmode=$am_cv_$1_dependencies_compiler_type])\n-AM_CONDITIONAL([am__fastdep$1], [\n-  test \"x$enable_dependency_tracking\" != xno \\\n-  && test \"$am_cv_$1_dependencies_compiler_type\" = gcc3])\n-])\n-\n-\n-# AM_SET_DEPDIR\n-# -------------\n-# Choose a directory name for dependency files.\n-# This macro is AC_REQUIREd in _AM_DEPENDENCIES.\n-AC_DEFUN([AM_SET_DEPDIR],\n-[AC_REQUIRE([AM_SET_LEADING_DOT])dnl\n-AC_SUBST([DEPDIR], [\"${am__leading_dot}deps\"])dnl\n-])\n-\n-\n-# AM_DEP_TRACK\n-# ------------\n-AC_DEFUN([AM_DEP_TRACK],\n-[AC_ARG_ENABLE([dependency-tracking], [dnl\n-AS_HELP_STRING(\n-  [--enable-dependency-tracking],\n-  [do not reject slow dependency extractors])\n-AS_HELP_STRING(\n-  [--disable-dependency-tracking],\n-  [speeds up one-time build])])\n-if test \"x$enable_dependency_tracking\" != xno; then\n-  am_depcomp=\"$ac_aux_dir/depcomp\"\n-  AMDEPBACKSLASH='\\'\n-  am__nodep='_no'\n-fi\n-AM_CONDITIONAL([AMDEP], [test \"x$enable_dependency_tracking\" != xno])\n-AC_SUBST([AMDEPBACKSLASH])dnl\n-_AM_SUBST_NOTMAKE([AMDEPBACKSLASH])dnl\n-AC_SUBST([am__nodep])dnl\n-_AM_SUBST_NOTMAKE([am__nodep])dnl\n-])\n-\n-# Generate code to set up dependency tracking.              -*- Autoconf -*-\n-\n-# Copyright (C) 1999-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-\n-# _AM_OUTPUT_DEPENDENCY_COMMANDS\n-# ------------------------------\n-AC_DEFUN([_AM_OUTPUT_DEPENDENCY_COMMANDS],\n-[{\n-  # Older Autoconf quotes --file arguments for eval, but not when files\n-  # are listed without --file.  Let's play safe and only enable the eval\n-  # if we detect the quoting.\n-  case $CONFIG_FILES in\n-  *\\'*) eval set x \"$CONFIG_FILES\" ;;\n-  *)   set x $CONFIG_FILES ;;\n-  esac\n-  shift\n-  for mf\n-  do\n-    # Strip MF so we end up with the name of the file.\n-    mf=`echo \"$mf\" | sed -e 's/:.*$//'`\n-    # Check whether this is an Automake generated Makefile or not.\n-    # We used to match only the files named 'Makefile.in', but\n-    # some people rename them; so instead we look at the file content.\n-    # Grep'ing the first line is not enough: some people post-process\n-    # each Makefile.in and add a new line on top of each file to say so.\n-    # Grep'ing the whole file is not good either: AIX grep has a line\n-    # limit of 2048, but all sed's we know have understand at least 4000.\n-    if sed -n 's,^#.*generated by automake.*,X,p' \"$mf\" | grep X >/dev/null 2>&1; then\n-      dirpart=`AS_DIRNAME(\"$mf\")`\n-    else\n-      continue\n-    fi\n-    # Extract the definition of DEPDIR, am__include, and am__quote\n-    # from the Makefile without running 'make'.\n-    DEPDIR=`sed -n 's/^DEPDIR = //p' < \"$mf\"`\n-    test -z \"$DEPDIR\" && continue\n-    am__include=`sed -n 's/^am__include = //p' < \"$mf\"`\n-    test -z \"$am__include\" && continue\n-    am__quote=`sed -n 's/^am__quote = //p' < \"$mf\"`\n-    # Find all dependency output files, they are included files with\n-    # $(DEPDIR) in their names.  We invoke sed twice because it is the\n-    # simplest approach to changing $(DEPDIR) to its actual value in the\n-    # expansion.\n-    for file in `sed -n \"\n-      s/^$am__include $am__quote\\(.*(DEPDIR).*\\)$am__quote\"'$/\\1/p' <\"$mf\" | \\\n-\t sed -e 's/\\$(DEPDIR)/'\"$DEPDIR\"'/g'`; do\n-      # Make sure the directory exists.\n-      test -f \"$dirpart/$file\" && continue\n-      fdir=`AS_DIRNAME([\"$file\"])`\n-      AS_MKDIR_P([$dirpart/$fdir])\n-      # echo \"creating $dirpart/$file\"\n-      echo '# dummy' > \"$dirpart/$file\"\n-    done\n-  done\n-}\n-])# _AM_OUTPUT_DEPENDENCY_COMMANDS\n-\n-\n-# AM_OUTPUT_DEPENDENCY_COMMANDS\n-# -----------------------------\n-# This macro should only be invoked once -- use via AC_REQUIRE.\n-#\n-# This code is only required when automatic dependency tracking\n-# is enabled.  FIXME.  This creates each '.P' file that we will\n-# need in order to bootstrap the dependency handling code.\n-AC_DEFUN([AM_OUTPUT_DEPENDENCY_COMMANDS],\n-[AC_CONFIG_COMMANDS([depfiles],\n-     [test x\"$AMDEP_TRUE\" != x\"\" || _AM_OUTPUT_DEPENDENCY_COMMANDS],\n-     [AMDEP_TRUE=\"$AMDEP_TRUE\" ac_aux_dir=\"$ac_aux_dir\"])\n-])\n-\n-# Do all the work for Automake.                             -*- Autoconf -*-\n-\n-# Copyright (C) 1996-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# This macro actually does too much.  Some checks are only needed if\n-# your package does certain things.  But this isn't really a big deal.\n-\n-dnl Redefine AC_PROG_CC to automatically invoke _AM_PROG_CC_C_O.\n-m4_define([AC_PROG_CC],\n-m4_defn([AC_PROG_CC])\n-[_AM_PROG_CC_C_O\n-])\n-\n-# AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])\n-# AM_INIT_AUTOMAKE([OPTIONS])\n-# -----------------------------------------------\n-# The call with PACKAGE and VERSION arguments is the old style\n-# call (pre autoconf-2.50), which is being phased out.  PACKAGE\n-# and VERSION should now be passed to AC_INIT and removed from\n-# the call to AM_INIT_AUTOMAKE.\n-# We support both call styles for the transition.  After\n-# the next Automake release, Autoconf can make the AC_INIT\n-# arguments mandatory, and then we can depend on a new Autoconf\n-# release and drop the old call support.\n-AC_DEFUN([AM_INIT_AUTOMAKE],\n-[AC_PREREQ([2.65])dnl\n-dnl Autoconf wants to disallow AM_ names.  We explicitly allow\n-dnl the ones we care about.\n-m4_pattern_allow([^AM_[A-Z]+FLAGS$])dnl\n-AC_REQUIRE([AM_SET_CURRENT_AUTOMAKE_VERSION])dnl\n-AC_REQUIRE([AC_PROG_INSTALL])dnl\n-if test \"`cd $srcdir && pwd`\" != \"`pwd`\"; then\n-  # Use -I$(srcdir) only when $(srcdir) != ., so that make's output\n-  # is not polluted with repeated \"-I.\"\n-  AC_SUBST([am__isrc], [' -I$(srcdir)'])_AM_SUBST_NOTMAKE([am__isrc])dnl\n-  # test to see if srcdir already configured\n-  if test -f $srcdir/config.status; then\n-    AC_MSG_ERROR([source directory already configured; run \"make distclean\" there first])\n-  fi\n-fi\n-\n-# test whether we have cygpath\n-if test -z \"$CYGPATH_W\"; then\n-  if (cygpath --version) >/dev/null 2>/dev/null; then\n-    CYGPATH_W='cygpath -w'\n-  else\n-    CYGPATH_W=echo\n-  fi\n-fi\n-AC_SUBST([CYGPATH_W])\n-\n-# Define the identity of the package.\n-dnl Distinguish between old-style and new-style calls.\n-m4_ifval([$2],\n-[AC_DIAGNOSE([obsolete],\n-             [$0: two- and three-arguments forms are deprecated.])\n-m4_ifval([$3], [_AM_SET_OPTION([no-define])])dnl\n- AC_SUBST([PACKAGE], [$1])dnl\n- AC_SUBST([VERSION], [$2])],\n-[_AM_SET_OPTIONS([$1])dnl\n-dnl Diagnose old-style AC_INIT with new-style AM_AUTOMAKE_INIT.\n-m4_if(\n-  m4_ifdef([AC_PACKAGE_NAME], [ok]):m4_ifdef([AC_PACKAGE_VERSION], [ok]),\n-  [ok:ok],,\n-  [m4_fatal([AC_INIT should be called with package and version arguments])])dnl\n- AC_SUBST([PACKAGE], ['AC_PACKAGE_TARNAME'])dnl\n- AC_SUBST([VERSION], ['AC_PACKAGE_VERSION'])])dnl\n-\n-_AM_IF_OPTION([no-define],,\n-[AC_DEFINE_UNQUOTED([PACKAGE], [\"$PACKAGE\"], [Name of package])\n- AC_DEFINE_UNQUOTED([VERSION], [\"$VERSION\"], [Version number of package])])dnl\n-\n-# Some tools Automake needs.\n-AC_REQUIRE([AM_SANITY_CHECK])dnl\n-AC_REQUIRE([AC_ARG_PROGRAM])dnl\n-AM_MISSING_PROG([ACLOCAL], [aclocal-${am__api_version}])\n-AM_MISSING_PROG([AUTOCONF], [autoconf])\n-AM_MISSING_PROG([AUTOMAKE], [automake-${am__api_version}])\n-AM_MISSING_PROG([AUTOHEADER], [autoheader])\n-AM_MISSING_PROG([MAKEINFO], [makeinfo])\n-AC_REQUIRE([AM_PROG_INSTALL_SH])dnl\n-AC_REQUIRE([AM_PROG_INSTALL_STRIP])dnl\n-AC_REQUIRE([AC_PROG_MKDIR_P])dnl\n-# For better backward compatibility.  To be removed once Automake 1.9.x\n-# dies out for good.  For more background, see:\n-# <http://lists.gnu.org/archive/html/automake/2012-07/msg00001.html>\n-# <http://lists.gnu.org/archive/html/automake/2012-07/msg00014.html>\n-AC_SUBST([mkdir_p], ['$(MKDIR_P)'])\n-# We need awk for the \"check\" target (and possibly the TAP driver).  The\n-# system \"awk\" is bad on some platforms.\n-AC_REQUIRE([AC_PROG_AWK])dnl\n-AC_REQUIRE([AC_PROG_MAKE_SET])dnl\n-AC_REQUIRE([AM_SET_LEADING_DOT])dnl\n-_AM_IF_OPTION([tar-ustar], [_AM_PROG_TAR([ustar])],\n-\t      [_AM_IF_OPTION([tar-pax], [_AM_PROG_TAR([pax])],\n-\t\t\t     [_AM_PROG_TAR([v7])])])\n-_AM_IF_OPTION([no-dependencies],,\n-[AC_PROVIDE_IFELSE([AC_PROG_CC],\n-\t\t  [_AM_DEPENDENCIES([CC])],\n-\t\t  [m4_define([AC_PROG_CC],\n-\t\t\t     m4_defn([AC_PROG_CC])[_AM_DEPENDENCIES([CC])])])dnl\n-AC_PROVIDE_IFELSE([AC_PROG_CXX],\n-\t\t  [_AM_DEPENDENCIES([CXX])],\n-\t\t  [m4_define([AC_PROG_CXX],\n-\t\t\t     m4_defn([AC_PROG_CXX])[_AM_DEPENDENCIES([CXX])])])dnl\n-AC_PROVIDE_IFELSE([AC_PROG_OBJC],\n-\t\t  [_AM_DEPENDENCIES([OBJC])],\n-\t\t  [m4_define([AC_PROG_OBJC],\n-\t\t\t     m4_defn([AC_PROG_OBJC])[_AM_DEPENDENCIES([OBJC])])])dnl\n-AC_PROVIDE_IFELSE([AC_PROG_OBJCXX],\n-\t\t  [_AM_DEPENDENCIES([OBJCXX])],\n-\t\t  [m4_define([AC_PROG_OBJCXX],\n-\t\t\t     m4_defn([AC_PROG_OBJCXX])[_AM_DEPENDENCIES([OBJCXX])])])dnl\n-])\n-AC_REQUIRE([AM_SILENT_RULES])dnl\n-dnl The testsuite driver may need to know about EXEEXT, so add the\n-dnl 'am__EXEEXT' conditional if _AM_COMPILER_EXEEXT was seen.  This\n-dnl macro is hooked onto _AC_COMPILER_EXEEXT early, see below.\n-AC_CONFIG_COMMANDS_PRE(dnl\n-[m4_provide_if([_AM_COMPILER_EXEEXT],\n-  [AM_CONDITIONAL([am__EXEEXT], [test -n \"$EXEEXT\"])])])dnl\n-\n-# POSIX will say in a future version that running \"rm -f\" with no argument\n-# is OK; and we want to be able to make that assumption in our Makefile\n-# recipes.  So use an aggressive probe to check that the usage we want is\n-# actually supported \"in the wild\" to an acceptable degree.\n-# See automake bug#10828.\n-# To make any issue more visible, cause the running configure to be aborted\n-# by default if the 'rm' program in use doesn't match our expectations; the\n-# user can still override this though.\n-if rm -f && rm -fr && rm -rf; then : OK; else\n-  cat >&2 <<'END'\n-Oops!\n-\n-Your 'rm' program seems unable to run without file operands specified\n-on the command line, even when the '-f' option is present.  This is contrary\n-to the behaviour of most rm programs out there, and not conforming with\n-the upcoming POSIX standard: <http://austingroupbugs.net/view.php?id=542>\n-\n-Please tell bug-automake@gnu.org about your system, including the value\n-of your $PATH and any error possibly output before this message.  This\n-can help us improve future automake versions.\n-\n-END\n-  if test x\"$ACCEPT_INFERIOR_RM_PROGRAM\" = x\"yes\"; then\n-    echo 'Configuration will proceed anyway, since you have set the' >&2\n-    echo 'ACCEPT_INFERIOR_RM_PROGRAM variable to \"yes\"' >&2\n-    echo >&2\n-  else\n-    cat >&2 <<'END'\n-Aborting the configuration process, to ensure you take notice of the issue.\n-\n-You can download and install GNU coreutils to get an 'rm' implementation\n-that behaves properly: <http://www.gnu.org/software/coreutils/>.\n-\n-If you want to complete the configuration process using your problematic\n-'rm' anyway, export the environment variable ACCEPT_INFERIOR_RM_PROGRAM\n-to \"yes\", and re-run configure.\n-\n-END\n-    AC_MSG_ERROR([Your 'rm' program is bad, sorry.])\n-  fi\n-fi\n-dnl The trailing newline in this macro's definition is deliberate, for\n-dnl backward compatibility and to allow trailing 'dnl'-style comments\n-dnl after the AM_INIT_AUTOMAKE invocation. See automake bug#16841.\n-])\n-\n-dnl Hook into '_AC_COMPILER_EXEEXT' early to learn its expansion.  Do not\n-dnl add the conditional right here, as _AC_COMPILER_EXEEXT may be further\n-dnl mangled by Autoconf and run in a shell conditional statement.\n-m4_define([_AC_COMPILER_EXEEXT],\n-m4_defn([_AC_COMPILER_EXEEXT])[m4_provide([_AM_COMPILER_EXEEXT])])\n-\n-# When config.status generates a header, we must update the stamp-h file.\n-# This file resides in the same directory as the config header\n-# that is generated.  The stamp files are numbered to have different names.\n-\n-# Autoconf calls _AC_AM_CONFIG_HEADER_HOOK (when defined) in the\n-# loop where config.status creates the headers, so we can generate\n-# our stamp files there.\n-AC_DEFUN([_AC_AM_CONFIG_HEADER_HOOK],\n-[# Compute $1's index in $config_headers.\n-_am_arg=$1\n-_am_stamp_count=1\n-for _am_header in $config_headers :; do\n-  case $_am_header in\n-    $_am_arg | $_am_arg:* )\n-      break ;;\n-    * )\n-      _am_stamp_count=`expr $_am_stamp_count + 1` ;;\n-  esac\n-done\n-echo \"timestamp for $_am_arg\" >`AS_DIRNAME([\"$_am_arg\"])`/stamp-h[]$_am_stamp_count])\n-\n-# Copyright (C) 2001-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_PROG_INSTALL_SH\n-# ------------------\n-# Define $install_sh.\n-AC_DEFUN([AM_PROG_INSTALL_SH],\n-[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl\n-if test x\"${install_sh+set}\" != xset; then\n-  case $am_aux_dir in\n-  *\\ * | *\\\t*)\n-    install_sh=\"\\${SHELL} '$am_aux_dir/install-sh'\" ;;\n-  *)\n-    install_sh=\"\\${SHELL} $am_aux_dir/install-sh\"\n-  esac\n-fi\n-AC_SUBST([install_sh])])\n-\n-# Add --enable-maintainer-mode option to configure.         -*- Autoconf -*-\n-# From Jim Meyering\n-\n-# Copyright (C) 1996-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_MAINTAINER_MODE([DEFAULT-MODE])\n-# ----------------------------------\n-# Control maintainer-specific portions of Makefiles.\n-# Default is to disable them, unless 'enable' is passed literally.\n-# For symmetry, 'disable' may be passed as well.  Anyway, the user\n-# can override the default with the --enable/--disable switch.\n-AC_DEFUN([AM_MAINTAINER_MODE],\n-[m4_case(m4_default([$1], [disable]),\n-       [enable], [m4_define([am_maintainer_other], [disable])],\n-       [disable], [m4_define([am_maintainer_other], [enable])],\n-       [m4_define([am_maintainer_other], [enable])\n-        m4_warn([syntax], [unexpected argument to AM@&t@_MAINTAINER_MODE: $1])])\n-AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])\n-  dnl maintainer-mode's default is 'disable' unless 'enable' is passed\n-  AC_ARG_ENABLE([maintainer-mode],\n-    [AS_HELP_STRING([--]am_maintainer_other[-maintainer-mode],\n-      am_maintainer_other[ make rules and dependencies not useful\n-      (and sometimes confusing) to the casual installer])],\n-    [USE_MAINTAINER_MODE=$enableval],\n-    [USE_MAINTAINER_MODE=]m4_if(am_maintainer_other, [enable], [no], [yes]))\n-  AC_MSG_RESULT([$USE_MAINTAINER_MODE])\n-  AM_CONDITIONAL([MAINTAINER_MODE], [test $USE_MAINTAINER_MODE = yes])\n-  MAINT=$MAINTAINER_MODE_TRUE\n-  AC_SUBST([MAINT])dnl\n-]\n-)\n-\n-# Check to see how 'make' treats includes.\t            -*- Autoconf -*-\n-\n-# Copyright (C) 2001-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_MAKE_INCLUDE()\n-# -----------------\n-# Check to see how make treats includes.\n-AC_DEFUN([AM_MAKE_INCLUDE],\n-[am_make=${MAKE-make}\n-cat > confinc << 'END'\n-am__doit:\n-\t@echo this is the am__doit target\n-.PHONY: am__doit\n-END\n-# If we don't find an include directive, just comment out the code.\n-AC_MSG_CHECKING([for style of include used by $am_make])\n-am__include=\"#\"\n-am__quote=\n-_am_result=none\n-# First try GNU make style include.\n-echo \"include confinc\" > confmf\n-# Ignore all kinds of additional output from 'make'.\n-case `$am_make -s -f confmf 2> /dev/null` in #(\n-*the\\ am__doit\\ target*)\n-  am__include=include\n-  am__quote=\n-  _am_result=GNU\n-  ;;\n-esac\n-# Now try BSD make style include.\n-if test \"$am__include\" = \"#\"; then\n-   echo '.include \"confinc\"' > confmf\n-   case `$am_make -s -f confmf 2> /dev/null` in #(\n-   *the\\ am__doit\\ target*)\n-     am__include=.include\n-     am__quote=\"\\\"\"\n-     _am_result=BSD\n-     ;;\n-   esac\n-fi\n-AC_SUBST([am__include])\n-AC_SUBST([am__quote])\n-AC_MSG_RESULT([$_am_result])\n-rm -f confinc confmf\n-])\n-\n-# Fake the existence of programs that GNU maintainers use.  -*- Autoconf -*-\n-\n-# Copyright (C) 1997-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_MISSING_PROG(NAME, PROGRAM)\n-# ------------------------------\n-AC_DEFUN([AM_MISSING_PROG],\n-[AC_REQUIRE([AM_MISSING_HAS_RUN])\n-$1=${$1-\"${am_missing_run}$2\"}\n-AC_SUBST($1)])\n-\n-# AM_MISSING_HAS_RUN\n-# ------------------\n-# Define MISSING if not defined so far and test if it is modern enough.\n-# If it is, set am_missing_run to use it, otherwise, to nothing.\n-AC_DEFUN([AM_MISSING_HAS_RUN],\n-[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl\n-AC_REQUIRE_AUX_FILE([missing])dnl\n-if test x\"${MISSING+set}\" != xset; then\n-  case $am_aux_dir in\n-  *\\ * | *\\\t*)\n-    MISSING=\"\\${SHELL} \\\"$am_aux_dir/missing\\\"\" ;;\n-  *)\n-    MISSING=\"\\${SHELL} $am_aux_dir/missing\" ;;\n-  esac\n-fi\n-# Use eval to expand $SHELL\n-if eval \"$MISSING --is-lightweight\"; then\n-  am_missing_run=\"$MISSING \"\n-else\n-  am_missing_run=\n-  AC_MSG_WARN(['missing' script is too old or missing])\n-fi\n-])\n-\n-# Helper functions for option handling.                     -*- Autoconf -*-\n-\n-# Copyright (C) 2001-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# _AM_MANGLE_OPTION(NAME)\n-# -----------------------\n-AC_DEFUN([_AM_MANGLE_OPTION],\n-[[_AM_OPTION_]m4_bpatsubst($1, [[^a-zA-Z0-9_]], [_])])\n-\n-# _AM_SET_OPTION(NAME)\n-# --------------------\n-# Set option NAME.  Presently that only means defining a flag for this option.\n-AC_DEFUN([_AM_SET_OPTION],\n-[m4_define(_AM_MANGLE_OPTION([$1]), [1])])\n-\n-# _AM_SET_OPTIONS(OPTIONS)\n-# ------------------------\n-# OPTIONS is a space-separated list of Automake options.\n-AC_DEFUN([_AM_SET_OPTIONS],\n-[m4_foreach_w([_AM_Option], [$1], [_AM_SET_OPTION(_AM_Option)])])\n-\n-# _AM_IF_OPTION(OPTION, IF-SET, [IF-NOT-SET])\n-# -------------------------------------------\n-# Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.\n-AC_DEFUN([_AM_IF_OPTION],\n-[m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])\n-\n-# Copyright (C) 1999-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# _AM_PROG_CC_C_O\n-# ---------------\n-# Like AC_PROG_CC_C_O, but changed for automake.  We rewrite AC_PROG_CC\n-# to automatically call this.\n-AC_DEFUN([_AM_PROG_CC_C_O],\n-[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl\n-AC_REQUIRE_AUX_FILE([compile])dnl\n-AC_LANG_PUSH([C])dnl\n-AC_CACHE_CHECK(\n-  [whether $CC understands -c and -o together],\n-  [am_cv_prog_cc_c_o],\n-  [AC_LANG_CONFTEST([AC_LANG_PROGRAM([])])\n-  # Make sure it works both with $CC and with simple cc.\n-  # Following AC_PROG_CC_C_O, we do the test twice because some\n-  # compilers refuse to overwrite an existing .o file with -o,\n-  # though they will create one.\n-  am_cv_prog_cc_c_o=yes\n-  for am_i in 1 2; do\n-    if AM_RUN_LOG([$CC -c conftest.$ac_ext -o conftest2.$ac_objext]) \\\n-         && test -f conftest2.$ac_objext; then\n-      : OK\n-    else\n-      am_cv_prog_cc_c_o=no\n-      break\n-    fi\n-  done\n-  rm -f core conftest*\n-  unset am_i])\n-if test \"$am_cv_prog_cc_c_o\" != yes; then\n-   # Losing compiler, so override with the script.\n-   # FIXME: It is wrong to rewrite CC.\n-   # But if we don't then we get into trouble of one sort or another.\n-   # A longer-term fix would be to have automake use am__CC in this case,\n-   # and then we could set am__CC=\"\\$(top_srcdir)/compile \\$(CC)\"\n-   CC=\"$am_aux_dir/compile $CC\"\n-fi\n-AC_LANG_POP([C])])\n-\n-# For backward compatibility.\n-AC_DEFUN_ONCE([AM_PROG_CC_C_O], [AC_REQUIRE([AC_PROG_CC])])\n-\n-# Copyright (C) 2001-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_RUN_LOG(COMMAND)\n-# -------------------\n-# Run COMMAND, save the exit status in ac_status, and log it.\n-# (This has been adapted from Autoconf's _AC_RUN_LOG macro.)\n-AC_DEFUN([AM_RUN_LOG],\n-[{ echo \"$as_me:$LINENO: $1\" >&AS_MESSAGE_LOG_FD\n-   ($1) >&AS_MESSAGE_LOG_FD 2>&AS_MESSAGE_LOG_FD\n-   ac_status=$?\n-   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&AS_MESSAGE_LOG_FD\n-   (exit $ac_status); }])\n-\n-# Check to make sure that the build environment is sane.    -*- Autoconf -*-\n-\n-# Copyright (C) 1996-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_SANITY_CHECK\n-# ---------------\n-AC_DEFUN([AM_SANITY_CHECK],\n-[AC_MSG_CHECKING([whether build environment is sane])\n-# Reject unsafe characters in $srcdir or the absolute working directory\n-# name.  Accept space and tab only in the latter.\n-am_lf='\n-'\n-case `pwd` in\n-  *[[\\\\\\\"\\#\\$\\&\\'\\`$am_lf]]*)\n-    AC_MSG_ERROR([unsafe absolute working directory name]);;\n-esac\n-case $srcdir in\n-  *[[\\\\\\\"\\#\\$\\&\\'\\`$am_lf\\ \\\t]]*)\n-    AC_MSG_ERROR([unsafe srcdir value: '$srcdir']);;\n-esac\n-\n-# Do 'set' in a subshell so we don't clobber the current shell's\n-# arguments.  Must try -L first in case configure is actually a\n-# symlink; some systems play weird games with the mod time of symlinks\n-# (eg FreeBSD returns the mod time of the symlink's containing\n-# directory).\n-if (\n-   am_has_slept=no\n-   for am_try in 1 2; do\n-     echo \"timestamp, slept: $am_has_slept\" > conftest.file\n-     set X `ls -Lt \"$srcdir/configure\" conftest.file 2> /dev/null`\n-     if test \"$[*]\" = \"X\"; then\n-\t# -L didn't work.\n-\tset X `ls -t \"$srcdir/configure\" conftest.file`\n-     fi\n-     if test \"$[*]\" != \"X $srcdir/configure conftest.file\" \\\n-\t&& test \"$[*]\" != \"X conftest.file $srcdir/configure\"; then\n-\n-\t# If neither matched, then we have a broken ls.  This can happen\n-\t# if, for instance, CONFIG_SHELL is bash and it inherits a\n-\t# broken ls alias from the environment.  This has actually\n-\t# happened.  Such a system could not be considered \"sane\".\n-\tAC_MSG_ERROR([ls -t appears to fail.  Make sure there is not a broken\n-  alias in your environment])\n-     fi\n-     if test \"$[2]\" = conftest.file || test $am_try -eq 2; then\n-       break\n-     fi\n-     # Just in case.\n-     sleep 1\n-     am_has_slept=yes\n-   done\n-   test \"$[2]\" = conftest.file\n-   )\n-then\n-   # Ok.\n-   :\n-else\n-   AC_MSG_ERROR([newly created file is older than distributed files!\n-Check your system clock])\n-fi\n-AC_MSG_RESULT([yes])\n-# If we didn't sleep, we still need to ensure time stamps of config.status and\n-# generated files are strictly newer.\n-am_sleep_pid=\n-if grep 'slept: no' conftest.file >/dev/null 2>&1; then\n-  ( sleep 1 ) &\n-  am_sleep_pid=$!\n-fi\n-AC_CONFIG_COMMANDS_PRE(\n-  [AC_MSG_CHECKING([that generated files are newer than configure])\n-   if test -n \"$am_sleep_pid\"; then\n-     # Hide warnings about reused PIDs.\n-     wait $am_sleep_pid 2>/dev/null\n-   fi\n-   AC_MSG_RESULT([done])])\n-rm -f conftest.file\n-])\n-\n-# Copyright (C) 2009-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_SILENT_RULES([DEFAULT])\n-# --------------------------\n-# Enable less verbose build rules; with the default set to DEFAULT\n-# (\"yes\" being less verbose, \"no\" or empty being verbose).\n-AC_DEFUN([AM_SILENT_RULES],\n-[AC_ARG_ENABLE([silent-rules], [dnl\n-AS_HELP_STRING(\n-  [--enable-silent-rules],\n-  [less verbose build output (undo: \"make V=1\")])\n-AS_HELP_STRING(\n-  [--disable-silent-rules],\n-  [verbose build output (undo: \"make V=0\")])dnl\n-])\n-case $enable_silent_rules in @%:@ (((\n-  yes) AM_DEFAULT_VERBOSITY=0;;\n-   no) AM_DEFAULT_VERBOSITY=1;;\n-    *) AM_DEFAULT_VERBOSITY=m4_if([$1], [yes], [0], [1]);;\n-esac\n-dnl\n-dnl A few 'make' implementations (e.g., NonStop OS and NextStep)\n-dnl do not support nested variable expansions.\n-dnl See automake bug#9928 and bug#10237.\n-am_make=${MAKE-make}\n-AC_CACHE_CHECK([whether $am_make supports nested variables],\n-   [am_cv_make_support_nested_variables],\n-   [if AS_ECHO([['TRUE=$(BAR$(V))\n-BAR0=false\n-BAR1=true\n-V=1\n-am__doit:\n-\t@$(TRUE)\n-.PHONY: am__doit']]) | $am_make -f - >/dev/null 2>&1; then\n-  am_cv_make_support_nested_variables=yes\n-else\n-  am_cv_make_support_nested_variables=no\n-fi])\n-if test $am_cv_make_support_nested_variables = yes; then\n-  dnl Using '$V' instead of '$(V)' breaks IRIX make.\n-  AM_V='$(V)'\n-  AM_DEFAULT_V='$(AM_DEFAULT_VERBOSITY)'\n-else\n-  AM_V=$AM_DEFAULT_VERBOSITY\n-  AM_DEFAULT_V=$AM_DEFAULT_VERBOSITY\n-fi\n-AC_SUBST([AM_V])dnl\n-AM_SUBST_NOTMAKE([AM_V])dnl\n-AC_SUBST([AM_DEFAULT_V])dnl\n-AM_SUBST_NOTMAKE([AM_DEFAULT_V])dnl\n-AC_SUBST([AM_DEFAULT_VERBOSITY])dnl\n-AM_BACKSLASH='\\'\n-AC_SUBST([AM_BACKSLASH])dnl\n-_AM_SUBST_NOTMAKE([AM_BACKSLASH])dnl\n-])\n-\n-# Copyright (C) 2001-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# AM_PROG_INSTALL_STRIP\n-# ---------------------\n-# One issue with vendor 'install' (even GNU) is that you can't\n-# specify the program used to strip binaries.  This is especially\n-# annoying in cross-compiling environments, where the build's strip\n-# is unlikely to handle the host's binaries.\n-# Fortunately install-sh will honor a STRIPPROG variable, so we\n-# always use install-sh in \"make install-strip\", and initialize\n-# STRIPPROG with the value of the STRIP variable (set by the user).\n-AC_DEFUN([AM_PROG_INSTALL_STRIP],\n-[AC_REQUIRE([AM_PROG_INSTALL_SH])dnl\n-# Installed binaries are usually stripped using 'strip' when the user\n-# run \"make install-strip\".  However 'strip' might not be the right\n-# tool to use in cross-compilation environments, therefore Automake\n-# will honor the 'STRIP' environment variable to overrule this program.\n-dnl Don't test for $cross_compiling = yes, because it might be 'maybe'.\n-if test \"$cross_compiling\" != no; then\n-  AC_CHECK_TOOL([STRIP], [strip], :)\n-fi\n-INSTALL_STRIP_PROGRAM=\"\\$(install_sh) -c -s\"\n-AC_SUBST([INSTALL_STRIP_PROGRAM])])\n-\n-# Copyright (C) 2006-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# _AM_SUBST_NOTMAKE(VARIABLE)\n-# ---------------------------\n-# Prevent Automake from outputting VARIABLE = @VARIABLE@ in Makefile.in.\n-# This macro is traced by Automake.\n-AC_DEFUN([_AM_SUBST_NOTMAKE])\n-\n-# AM_SUBST_NOTMAKE(VARIABLE)\n-# --------------------------\n-# Public sister of _AM_SUBST_NOTMAKE.\n-AC_DEFUN([AM_SUBST_NOTMAKE], [_AM_SUBST_NOTMAKE($@)])\n-\n-# Check how to create a tarball.                            -*- Autoconf -*-\n-\n-# Copyright (C) 2004-2017 Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# _AM_PROG_TAR(FORMAT)\n-# --------------------\n-# Check how to create a tarball in format FORMAT.\n-# FORMAT should be one of 'v7', 'ustar', or 'pax'.\n-#\n-# Substitute a variable $(am__tar) that is a command\n-# writing to stdout a FORMAT-tarball containing the directory\n-# $tardir.\n-#     tardir=directory && $(am__tar) > result.tar\n-#\n-# Substitute a variable $(am__untar) that extract such\n-# a tarball read from stdin.\n-#     $(am__untar) < result.tar\n-#\n-AC_DEFUN([_AM_PROG_TAR],\n-[# Always define AMTAR for backward compatibility.  Yes, it's still used\n-# in the wild :-(  We should find a proper way to deprecate it ...\n-AC_SUBST([AMTAR], ['$${TAR-tar}'])\n-\n-# We'll loop over all known methods to create a tar archive until one works.\n-_am_tools='gnutar m4_if([$1], [ustar], [plaintar]) pax cpio none'\n-\n-m4_if([$1], [v7],\n-  [am__tar='$${TAR-tar} chof - \"$$tardir\"' am__untar='$${TAR-tar} xf -'],\n-\n-  [m4_case([$1],\n-    [ustar],\n-     [# The POSIX 1988 'ustar' format is defined with fixed-size fields.\n-      # There is notably a 21 bits limit for the UID and the GID.  In fact,\n-      # the 'pax' utility can hang on bigger UID/GID (see automake bug#8343\n-      # and bug#13588).\n-      am_max_uid=2097151 # 2^21 - 1\n-      am_max_gid=$am_max_uid\n-      # The $UID and $GID variables are not portable, so we need to resort\n-      # to the POSIX-mandated id(1) utility.  Errors in the 'id' calls\n-      # below are definitely unexpected, so allow the users to see them\n-      # (that is, avoid stderr redirection).\n-      am_uid=`id -u || echo unknown`\n-      am_gid=`id -g || echo unknown`\n-      AC_MSG_CHECKING([whether UID '$am_uid' is supported by ustar format])\n-      if test $am_uid -le $am_max_uid; then\n-         AC_MSG_RESULT([yes])\n-      else\n-         AC_MSG_RESULT([no])\n-         _am_tools=none\n-      fi\n-      AC_MSG_CHECKING([whether GID '$am_gid' is supported by ustar format])\n-      if test $am_gid -le $am_max_gid; then\n-         AC_MSG_RESULT([yes])\n-      else\n-        AC_MSG_RESULT([no])\n-        _am_tools=none\n-      fi],\n-\n-  [pax],\n-    [],\n-\n-  [m4_fatal([Unknown tar format])])\n-\n-  AC_MSG_CHECKING([how to create a $1 tar archive])\n-\n-  # Go ahead even if we have the value already cached.  We do so because we\n-  # need to set the values for the 'am__tar' and 'am__untar' variables.\n-  _am_tools=${am_cv_prog_tar_$1-$_am_tools}\n-\n-  for _am_tool in $_am_tools; do\n-    case $_am_tool in\n-    gnutar)\n-      for _am_tar in tar gnutar gtar; do\n-        AM_RUN_LOG([$_am_tar --version]) && break\n-      done\n-      am__tar=\"$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - \"'\"$$tardir\"'\n-      am__tar_=\"$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - \"'\"$tardir\"'\n-      am__untar=\"$_am_tar -xf -\"\n-      ;;\n-    plaintar)\n-      # Must skip GNU tar: if it does not support --format= it doesn't create\n-      # ustar tarball either.\n-      (tar --version) >/dev/null 2>&1 && continue\n-      am__tar='tar chf - \"$$tardir\"'\n-      am__tar_='tar chf - \"$tardir\"'\n-      am__untar='tar xf -'\n-      ;;\n-    pax)\n-      am__tar='pax -L -x $1 -w \"$$tardir\"'\n-      am__tar_='pax -L -x $1 -w \"$tardir\"'\n-      am__untar='pax -r'\n-      ;;\n-    cpio)\n-      am__tar='find \"$$tardir\" -print | cpio -o -H $1 -L'\n-      am__tar_='find \"$tardir\" -print | cpio -o -H $1 -L'\n-      am__untar='cpio -i -H $1 -d'\n-      ;;\n-    none)\n-      am__tar=false\n-      am__tar_=false\n-      am__untar=false\n-      ;;\n-    esac\n-\n-    # If the value was cached, stop now.  We just wanted to have am__tar\n-    # and am__untar set.\n-    test -n \"${am_cv_prog_tar_$1}\" && break\n-\n-    # tar/untar a dummy directory, and stop if the command works.\n-    rm -rf conftest.dir\n-    mkdir conftest.dir\n-    echo GrepMe > conftest.dir/file\n-    AM_RUN_LOG([tardir=conftest.dir && eval $am__tar_ >conftest.tar])\n-    rm -rf conftest.dir\n-    if test -s conftest.tar; then\n-      AM_RUN_LOG([$am__untar <conftest.tar])\n-      AM_RUN_LOG([cat conftest.dir/file])\n-      grep GrepMe conftest.dir/file >/dev/null 2>&1 && break\n-    fi\n-  done\n-  rm -rf conftest.dir\n-\n-  AC_CACHE_VAL([am_cv_prog_tar_$1], [am_cv_prog_tar_$1=$_am_tool])\n-  AC_MSG_RESULT([$am_cv_prog_tar_$1])])\n-\n-AC_SUBST([am__tar])\n-AC_SUBST([am__untar])\n-]) # _AM_PROG_TAR\n-\n-m4_include([../config/acx.m4])\n-m4_include([../config/depstand.m4])\n-m4_include([../config/lead-dot.m4])\n-m4_include([../config/override.m4])\n-m4_include([../config/toolexeclibdir.m4])\n-m4_include([../libtool.m4])\n-m4_include([../ltoptions.m4])\n-m4_include([../ltsugar.m4])\n-m4_include([../ltversion.m4])\n-m4_include([../lt~obsolete.m4])"}, {"sha": "c6bf7f7b9d0874860fa661eae5e39d92b9d7bb78", "filename": "libhsail-rt/configure", "status": "removed", "additions": 0, "deletions": 17327, "changes": 17327, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Fconfigure?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4"}, {"sha": "f024b64ad93b66e0528e3c4348fa8a0f2e03b874", "filename": "libhsail-rt/configure.ac", "status": "removed", "additions": 0, "deletions": 160, "changes": 160, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Fconfigure.ac?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,160 +0,0 @@\n-# Starting point copied from libcilkrts:\n-#\n-#  @copyright\n-#  Copyright (C) 2011-2013, Intel Corporation\n-#  All rights reserved.\n-#\n-#  @copyright\n-#  Redistribution and use in source and binary forms, with or without\n-#  modification, are permitted provided that the following conditions\n-#  are met:\n-#\n-#    * Redistributions of source code must retain the above copyright\n-#      notice, this list of conditions and the following disclaimer.\n-#    * Redistributions in binary form must reproduce the above copyright\n-#      notice, this list of conditions and the following disclaimer in\n-#      the documentation and/or other materials provided with the\n-#      distribution.\n-#    * Neither the name of Intel Corporation nor the names of its\n-#      contributors may be used to endorse or promote products derived\n-#      from this software without specific prior written permission.\n-#\n-#  @copyright\n-#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n-#  \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n-#  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n-#  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n-#  HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\n-#  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n-#  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS\n-#  OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED\n-#  AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n-#  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY\n-#  WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n-#  POSSIBILITY OF SUCH DAMAGE.\n-\n-AC_INIT([phsa HSAIL runtime library], [1.0], [pekka.jaaskelainen@parmance.com])\n-\n-# Needed to define ${target}.  Needs to be very early to avoid annoying\n-# warning about calling AC_ARG_PROGRAM before AC_CANONICAL_SYSTEM\n-AC_CANONICAL_SYSTEM\n-target_alias=${target_alias-$host_alias}\n-AC_SUBST(target_alias)\n-AM_INIT_AUTOMAKE([1.11.6 foreign no-dist])\n-\n-AM_MAINTAINER_MODE\n-\n-AC_PROG_CC\n-AC_PROG_CXX\n-# AC_PROG_LIBTOOL\n-AC_CONFIG_FILES([Makefile])\n-\n-if test \"${multilib}\" = \"yes\"; then\n-  multilib_arg=\"--enable-multilib\"\n-else\n-  multilib_arg=\n-fi\n-\n-AC_MSG_CHECKING([for --enable-version-specific-runtime-libs])\n-AC_ARG_ENABLE([version-specific-runtime-libs],\n-  AC_HELP_STRING([--enable-version-specific-runtime-libs],\n-                 [Specify that runtime libraries should be installed in a compi\n-ler-specific directory]),\n-  [case \"$enableval\" in\n-    yes) enable_version_specific_runtime_libs=yes ;;\n-    no)  enable_version_specific_runtime_libs=no ;;\n-    *)   AC_MSG_ERROR([Unknown argument to enable/disable version-specific libs\n-]);;\n-   esac],\n-  [enable_version_specific_runtime_libs=no])\n-AC_MSG_RESULT($enable_version_specific_runtime_libs)\n-\n-GCC_WITH_TOOLEXECLIBDIR\n-\n-# Calculate toolexeclibdir\n-# Also toolexecdir, though it's only used in toolexeclibdir\n-case ${enable_version_specific_runtime_libs} in\n-  yes)\n-    # Need the gcc compiler version to know where to install libraries\n-    # and header files if --enable-version-specific-runtime-libs option\n-    # is selected.\n-    toolexecdir='$(libdir)/gcc/$(target_alias)'\n-    toolexeclibdir='$(toolexecdir)/$(gcc_version)$(MULTISUBDIR)'\n-    ;;\n-  no)\n-    if test -n \"$with_cross_host\" &&\n-       test x\"$with_cross_host\" != x\"no\"; then\n-      # Install a library built with a cross compiler in tooldir, not libdir.\n-      toolexecdir='$(exec_prefix)/$(target_alias)'\n-      case ${with_toolexeclibdir} in\n-\tno)\n-\t  toolexeclibdir='$(toolexecdir)/lib'\n-\t  ;;\n-\t*)\n-\t  toolexeclibdir=${with_toolexeclibdir}\n-\t  ;;\n-      esac\n-    else\n-      toolexecdir='$(libdir)/gcc-lib/$(target_alias)'\n-      toolexeclibdir='$(libdir)'\n-    fi\n-    multi_os_directory=`$CC -print-multi-os-directory`\n-    case $multi_os_directory in\n-      .) ;; # Avoid trailing /.\n-      *) toolexeclibdir=$toolexeclibdir/$multi_os_directory ;;\n-    esac\n-    ;;\n-esac\n-\n-# Set config_dir based on the target.  config_dir specifies where to get\n-# target-specific files.  The generic implementation is incomplete, but\n-# contains information on what's needed\n-case \"${target}\" in\n-\n-  x86_64-*-*)\n-    config_dir=\"x86\"\n-    ;;\n-\n-  i?86-*-*)\n-    config_dir=\"x86\"\n-    ;;\n-\n-  *)\n-    config_dir=\"generic\"\n-    ;;\n-\n-esac\n-AC_SUBST(config_dir)\n-\n-# We have linker scripts for appropriate operating systems\n-linux_linker_script=no\n-case \"${host}\" in\n-    *-*-linux*)\n-        linux_linker_script=yes\n-        ;;\n-esac\n-AM_CONDITIONAL(LINUX_LINKER_SCRIPT, test \"$linux_linker_script\" = \"yes\")\n-\n-mac_linker_script=no\n-case \"${host}\" in\n-    *-*-apple*)\n-        mac_linker_script=yes\n-        ;;\n-esac\n-AM_CONDITIONAL(MAC_LINKER_SCRIPT, test \"$mac_linker_script\" = \"yes\")\n-\n-AC_LIBTOOL_DLOPEN\n-AM_PROG_LIBTOOL\n-AC_SUBST(toolexecdir)\n-AC_SUBST(toolexeclibdir)\n-\n-AC_CONFIG_HEADER(target-config.h)\n-\n-AC_CHECK_SIZEOF([int])\n-AC_CHECK_SIZEOF([void*])\n-\n-# Determine what GCC version number to use in filesystem paths.\n-GCC_BASE_VER\n-\n-# Must be last\n-AC_OUTPUT"}, {"sha": "fd85a0c468e01c8aac6122f66f83403317bbfc43", "filename": "libhsail-rt/configure.tgt", "status": "removed", "additions": 0, "deletions": 36, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Fconfigure.tgt?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,36 +0,0 @@\n-# -*- shell-script -*-\n-#  Copyright (C) 2012-2021 Free Software Foundation, Inc.\n-#  Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-#  for General Processor Tech.\n-#\n-#  This file is part of the libhsail-rt.\n-#\n-#  Permission is hereby granted, free of charge, to any person obtaining a\n-#  copy of this software and associated documentation files\n-#  (the \"Software\"), to deal in the Software without restriction, including\n-#  without limitation the rights to use, copy, modify, merge, publish,\n-#  distribute, sublicense, and/or sell copies of the Software, and to\n-#  permit persons to whom the Software is furnished to do so, subject to\n-#  the following conditions:\n-#\n-#  The above copyright notice and this permission notice shall be included\n-#  in all copies or substantial portions of the Software.\n-#\n-#  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-#  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-#  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-#  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-#  DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-#  OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-#  USE OR OTHER DEALINGS IN THE SOFTWARE.\n-\n-# Disable the BRIG frontend and libhsail-rt on untested or known\n-# broken systems. Currently it has been tested only on x86_64 Linux\n-# of the upstream gcc targets. More targets shall be added after testing.\n-case \"${target}\" in\n-  x86_64-*-linux* | i?86-*-linux*)\n-    ;;\n-    *)\n-    UNSUPPORTED=1\n-    ;;\n-esac"}, {"sha": "ec6238909e6e41db80df0c08dea940f5add3d1fe", "filename": "libhsail-rt/include/internal/fibers.h", "status": "removed", "additions": 0, "deletions": 99, "changes": 99, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Ffibers.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Ffibers.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Finclude%2Finternal%2Ffibers.h?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,99 +0,0 @@\n-/* fibers.h -- an extremely simple lightweight thread (fiber) implementation\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#ifndef PHSA_RT_FIBERS_H\n-#define PHSA_RT_FIBERS_H\n-\n-#include <ucontext.h>\n-\n-typedef enum\n-{\n-  /* Ready to run.  */\n-  FIBER_STATUS_READY,\n-  /* Exited by calling fiber_thread_exit.  */\n-  FIBER_STATUS_EXITED,\n-  /* Joined by the main thread.  */\n-  FIBER_STATUS_JOINED\n-} fiber_status_t;\n-\n-/* A light weight thread (fiber).  */\n-struct fiber_s\n-{\n-  ucontext_t context;\n-  volatile fiber_status_t status;\n-  struct fiber_s *next;\n-  struct fiber_s *prev;\n-};\n-\n-typedef struct fiber_s fiber_t;\n-\n-typedef void (*fiber_function_t)(int, int);\n-\n-/* Initializes the fiber with the start function given as the first\n-   argument, and the argument to pass to the start function,\n-   as the second.  The allocated stack size is given as the last argument.  */\n-void\n-fiber_init (fiber_t *fiber, fiber_function_t start_function, void *arg,\n-\t    size_t stack_size, size_t stack_align);\n-\n-/* Terminates the fiber execution from within the fiber itself.  */\n-void\n-fiber_exit ();\n-\n-/* Blocks until the given fiber returns.  Frees the resources allocated\n-   for the fiber.  After join returns, the fiber itself can be deleted.  */\n-void\n-fiber_join (fiber_t *fiber);\n-\n-/* Co-operatively transfer execution turn to other fibers.  */\n-void\n-fiber_yield ();\n-\n-/* A multi-entry barrier.  After the last fiber has reached the\n-   barrier, it is automatically re-initialized to the threshold.  */\n-typedef struct\n-{\n-  /* The barrier participant count.  */\n-  volatile size_t threshold;\n-  /* Number of fibers that have reached the barrier.  */\n-  volatile size_t reached;\n-  /* Number of fibers that are waiting at the barrier.  */\n-  volatile size_t waiting_count;\n-} fiber_barrier_t;\n-\n-/* Reach the given barrier.  Blocks (co-operatively switches the execution\n-   fibers) until all other parties have reached it.  Returns 0 only in case\n-   the calling fiber was the first one to return from the barrier.  */\n-size_t\n-fiber_barrier_reach (fiber_barrier_t *barrier);\n-\n-/* Initializes the given barrier.  */\n-void\n-fiber_barrier_init (fiber_barrier_t *barrier, size_t threshold);\n-\n-void *\n-fiber_int_args_to_ptr (int arg0, int arg1);\n-\n-#endif"}, {"sha": "9b7c4cfd41da6d0455bb60715eef7e8ce12bd0bc", "filename": "libhsail-rt/include/internal/phsa-queue-interface.h", "status": "removed", "additions": 0, "deletions": 60, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Fphsa-queue-interface.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Fphsa-queue-interface.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Finclude%2Finternal%2Fphsa-queue-interface.h?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,60 +0,0 @@\n-/* phsa_queue_interface.h -- Definition for a minimalistic generic in-memory\n-   representation of a user mode queue to be used with the phsa/gccbrig\n-   implementation.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#ifndef PHSA_QUEUE_INTERFACE_H\n-#define PHSA_QUEUE_INTERFACE_H\n-\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif\n-\n-#include <stdbool.h>\n-#include <stddef.h>\n-#include <stdint.h>\n-#include \"hsa.h\"\n-\n-typedef __attribute__ ((aligned (64))) struct phsa_queue_s\n-{\n-  /* An HSA Architectured Queue object.  Must be in the beginning\n-     of the struct to enable direct pointer casting between hsa_queue_\n-     and phsa_queue_t.  */\n-  hsa_queue_t hsa_queue;\n-\n-  volatile uint64_t write_index;\n-  volatile uint64_t read_index;\n-\n-  /* True if global mem addresses are 64b.  */\n-  uint64_t is_ptr64 : 1;\n-\n-} phsa_queue_t;\n-\n-#ifdef __cplusplus\n-}\n-#endif\n-\n-#endif"}, {"sha": "c3a33f2ff58c099f1ec101e3a6be794bb5e10cb9", "filename": "libhsail-rt/include/internal/phsa-rt.h", "status": "removed", "additions": 0, "deletions": 94, "changes": 94, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Fphsa-rt.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Fphsa-rt.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Finclude%2Finternal%2Fphsa-rt.h?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,94 +0,0 @@\n-/* phsa-rt.h -- Data structures and functions of the PHSA device side runtime\n-   scheduler, and HSAIL built-ins.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#ifndef PHSA_RT_H\n-#define PHSA_RT_H\n-\n-#include <stdbool.h>\n-#include <stdint.h>\n-#include \"hsa.h\"\n-\n-#define PHSA_MAX_WG_SIZE 1024 * 10\n-\n-/* Pointer type for the public facing kernel launcher function generated\n-   by gccbrig.  This launches the actual kernel for all work groups and\n-   work items in the grid.  */\n-typedef void (*gccbrigKernelLauncherFunc) (void *context, void *);\n-\n-/* Pointer type for kernel functions produced by gccbrig from the HSAIL.\n-   This is private from outside the device binary and only called by\n-   the launcher.  */\n-typedef void (*gccbrigKernelFunc) (unsigned char *, void *, void *, uint32_t,\n-\t\t\t\t   void *);\n-\n-/* Context data that is passed to the kernel function, initialized\n-   by the runtime to the current launch information.  The data is\n-   used by different id functions etc.\n-\n-   The struct is used by both the launcher and the targeted device,\n-   thus the fields must have the same alignment/padding in both sides.\n-*/\n-typedef struct\n-{\n-  /* Data set by the HSA Runtime's kernel launcher.  */\n-  hsa_kernel_dispatch_packet_t *dp;\n-\n-  size_t packet_id;\n-\n-  /* Data set by the device-side launcher.  */\n-  gccbrigKernelFunc kernel;\n-\n-  /* The range of a work groups this dispatch should execute.  */\n-  size_t wg_min_x;\n-  size_t wg_min_y;\n-  size_t wg_min_z;\n-\n-  size_t wg_max_x;\n-  size_t wg_max_y;\n-  size_t wg_max_z;\n-\n-  /* The barrier used to synch the work-items before executing a new WG.  */\n-  void *wg_start_barrier;\n-\n-  /* The barrier to wait at after executing a work-group.  */\n-  void *wg_completion_barrier;\n-\n-  /* The barrier used to synchronize WIs in case of the 'barrier' HSAIL\n-     instruction.  */\n-  void *wg_sync_barrier;\n-\n-  /* This should be set to the flat address of the beginning of the group\n-     segment.  */\n-  size_t group_segment_start_addr;\n-\n-  /* This must be set to the correct aligned flat address space location from\n-     where the kernel can actually read its arguments.  Might point to the\n-     original global kernarg space.  */\n-  void *kernarg_addr;\n-} PHSAKernelLaunchData;\n-\n-#endif"}, {"sha": "a919b0a61e3f24fc604baa5e2f130c067eacec76", "filename": "libhsail-rt/include/internal/workitems.h", "status": "removed", "additions": 0, "deletions": 142, "changes": 142, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Fworkitems.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Finclude%2Finternal%2Fworkitems.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Finclude%2Finternal%2Fworkitems.h?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,142 +0,0 @@\n-/* workitems.h -- Types for context data passed as hidden parameters to special\n-   built-ins.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#ifndef PHSA_RT_WORKITEMS_H\n-#define PHSA_RT_WORKITEMS_H\n-\n-/* As the simple fibers implementation relies only on ucontext, we can\n-   assume is found by default as it is part of glibc.  However, for partial\n-   HSAIL support on platforms without having it available, the following define\n-   can be undefined.  */\n-#define HAVE_FIBERS\n-\n-#ifdef HAVE_FIBERS\n-#include \"fibers.h\"\n-#endif\n-\n-#include <stdint.h>\n-#include \"phsa-rt.h\"\n-\n-/* Data identifying a single work-group instance.  */\n-\n-typedef struct\n-{\n-  /* This is 1 in case there are more work groups to execute.\n-     If 0, the work-item threads should finish themselves.  */\n-  int more_wgs;\n-\n-  /* If the local size does not evenly divide the grid size, will have\n-     leftover WIs in the last execution.  */\n-  int leftover_wg;\n-  int last_wg;\n-\n-  /* (Flat) pointer to the beginning of the group segment allocated\n-     to the work-group.  */\n-  void *group_base_ptr;\n-\n-  /* The offset in the group memory for the kernel local group variables.\n-     To support module scope group variables, there might be need to preseve\n-     room for them in the beginning of the group segment.  */\n-  uint32_t initial_group_offset;\n-\n-  /* Similarly to the private segment that gets space allocated for all\n-     WIs in the work-group.  */\n-  void *private_base_ptr;\n-  uint32_t private_segment_total_size;\n-\n-  /* The first flat address of the group segment allocated for\n-     the given work group.  */\n-  uint64_t group_segment_base_addr;\n-\n-  /* Offset from the beginning of the private segment to the start of\n-     the previously allocated chunk of dynamic work-item memory (alloca)\n-     by any WI in the WG.\n-\n-     Initially set to private_segment_total_size to denote no dynamic\n-     allocations have been made.  The dynamic allocations are done downwards\n-     from the private segment end.  */\n-  uint32_t alloca_stack_p;\n-  /* The position of the first word in the current function's alloca\n-     stack frame.  Initialized to point outside the private segment.  */\n-  uint32_t alloca_frame_p;\n-\n-  /* The group id of the currently executed WG.  This is for fiber based\n-     execution.  The group ids are duplicated also to the per WI context\n-     struct for simplified single pointer access in the GCCBRIG produced\n-     code.\n-   */\n-\n-  uint32_t x;\n-  uint32_t y;\n-  uint32_t z;\n-\n-} PHSAWorkGroup;\n-\n-/* Data identifying a single work-item, passed to the work-item thread in case\n-   of a fiber based work-group execution.  */\n-\n-typedef struct\n-{\n-  /* NOTE: These members STARTing here should not be moved as they are\n-     accessed directly by code emitted by BRIG FE.   */\n-\n-  /* The local id of the current WI. */\n-\n-  uint32_t x;\n-  uint32_t y;\n-  uint32_t z;\n-\n-  /* The group id of the currently executed WG.  */\n-\n-  uint32_t group_x;\n-  uint32_t group_y;\n-  uint32_t group_z;\n-\n-  /* The local size of a complete WG.  */\n-\n-  uint32_t wg_size_x;\n-  uint32_t wg_size_y;\n-  uint32_t wg_size_z;\n-\n-  /* The local size of the current WG.  */\n-\n-  uint32_t cur_wg_size_x;\n-  uint32_t cur_wg_size_y;\n-  uint32_t cur_wg_size_z;\n-\n-  /* NOTE: Fixed members END here.  */\n-\n-  PHSAKernelLaunchData *launch_data;\n-  /* Identifies and keeps book of the currently executed WG of the WI swarm.  */\n-  volatile PHSAWorkGroup *wg;\n-#ifdef HAVE_FIBERS\n-  fiber_t fiber;\n-#endif\n-} __attribute__((packed)) PHSAWorkItem;\n-\n-\n-#endif"}, {"sha": "3335643b026088c1fb983162c1320d39ed987db7", "filename": "libhsail-rt/rt/arithmetic.c", "status": "removed", "additions": 0, "deletions": 475, "changes": 475, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Farithmetic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Farithmetic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Farithmetic.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,475 +0,0 @@\n-/* arithmetic.c -- Builtins for HSAIL arithmetic instructions for which\n-   there is no feasible direct gcc GENERIC expression.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <stdio.h>\n-#include <stdint.h>\n-#include <limits.h>\n-#include <math.h>\n-#include <float.h>\n-\n-/* HSAIL defines INT_MIN % -1 to be 0 while with C it's undefined,\n-   and causes an overflow exception at least with gcc and C on IA-32.  */\n-\n-int32_t\n-__hsail_rem_s32 (int32_t dividend, int32_t divisor)\n-{\n-  if (dividend == INT_MIN && divisor == -1)\n-    return 0;\n-  else\n-    return dividend % divisor;\n-}\n-\n-int64_t\n-__hsail_rem_s64 (int64_t dividend, int64_t divisor)\n-{\n-  if (dividend == INT64_MIN && divisor == -1)\n-    return 0;\n-  else\n-    return dividend % divisor;\n-}\n-\n-/* HSAIL has defined behavior for min and max when one of the operands is\n-   NaN: in that case the other operand is returned.  In C and with gcc's\n-   MIN_EXPR/MAX_EXPR, the returned operand is undefined.  */\n-\n-float\n-__hsail_min_f32 (float a, float b)\n-{\n-  if (isnan (a))\n-    return b;\n-  else if (isnan (b))\n-    return a;\n-  else if (a == 0.0f && b == 0.0f)\n-    return signbit (a) ? a : b;\n-  else if (a > b)\n-    return b;\n-  else\n-    return a;\n-}\n-\n-double\n-__hsail_min_f64 (double a, double b)\n-{\n-  if (isnan (a))\n-    return b;\n-  else if (isnan (b))\n-    return a;\n-  else if (a > b)\n-    return b;\n-  else\n-    return a;\n-}\n-\n-float\n-__hsail_max_f32 (float a, float b)\n-{\n-  if (isnan (a))\n-    return b;\n-  else if (isnan (b))\n-    return a;\n-  else if (a == 0.0f && b == 0.0f && signbit (a))\n-    return b;\n-  else if (a < b)\n-    return b;\n-  else\n-    return a;\n-}\n-\n-double\n-__hsail_max_f64 (double a, double b)\n-{\n-  if (isnan (a))\n-    return b;\n-  else if (isnan (b))\n-    return a;\n-  else if (a == 0.0 && b == 0.0 && signbit (a))\n-    return b;\n-  else if (a < b)\n-    return b;\n-  else\n-    return a;\n-}\n-\n-uint8_t\n-__hsail_cvt_zeroi_sat_u8_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) UINT8_MAX)\n-    return UINT8_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint8_t) a;\n-}\n-\n-int8_t\n-__hsail_cvt_zeroi_sat_s8_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) INT8_MAX)\n-    return INT8_MAX;\n-  if (a <= (float) INT8_MIN)\n-    return INT8_MIN;\n-  return (int8_t) a;\n-}\n-\n-uint16_t\n-__hsail_cvt_zeroi_sat_u16_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) UINT16_MAX)\n-    return UINT16_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint16_t) a;\n-}\n-\n-int16_t\n-__hsail_cvt_zeroi_sat_s16_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) INT16_MAX)\n-    return INT16_MAX;\n-  if (a <= (float) INT16_MIN)\n-    return INT16_MIN;\n-  return (int16_t) a;\n-}\n-\n-uint32_t\n-__hsail_cvt_zeroi_sat_u32_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) UINT32_MAX)\n-    return UINT32_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint32_t) a;\n-}\n-\n-int32_t\n-__hsail_cvt_zeroi_sat_s32_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) INT32_MAX)\n-    return INT32_MAX;\n-  if (a <= (float) INT32_MIN)\n-    return INT32_MIN;\n-  return (int32_t) a;\n-}\n-\n-uint64_t\n-__hsail_cvt_zeroi_sat_u64_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) UINT64_MAX)\n-    return UINT64_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint64_t) a;\n-}\n-\n-int64_t\n-__hsail_cvt_zeroi_sat_s64_f32 (float a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (float) INT64_MAX)\n-    return INT64_MAX;\n-  if (a <= (float) INT64_MIN)\n-    return INT64_MIN;\n-  return (int64_t) a;\n-}\n-\n-uint8_t\n-__hsail_cvt_zeroi_sat_u8_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) UINT8_MAX)\n-    return UINT8_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint8_t) a;\n-}\n-\n-int8_t\n-__hsail_cvt_zeroi_sat_s8_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) INT8_MAX)\n-    return INT8_MAX;\n-  if (a <= (double) INT8_MIN)\n-    return INT8_MIN;\n-  return (int8_t) a;\n-}\n-\n-uint16_t\n-__hsail_cvt_zeroi_sat_u16_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) UINT16_MAX)\n-    return UINT16_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint16_t) a;\n-}\n-\n-int16_t\n-__hsail_cvt_zeroi_sat_s16_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) INT16_MAX)\n-    return INT16_MAX;\n-  if (a <= (double) INT16_MIN)\n-    return INT16_MIN;\n-  return (int16_t) a;\n-}\n-\n-uint32_t\n-__hsail_cvt_zeroi_sat_u32_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) UINT32_MAX)\n-    return UINT32_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint32_t) a;\n-}\n-\n-int32_t\n-__hsail_cvt_zeroi_sat_s32_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) INT32_MAX)\n-    return INT32_MAX;\n-  if (a <= (double) INT32_MIN)\n-    return INT32_MIN;\n-  return (int32_t) a;\n-}\n-\n-uint64_t\n-__hsail_cvt_zeroi_sat_u64_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) UINT64_MAX)\n-    return UINT64_MAX;\n-  else if (a <= 0.0f)\n-    return 0;\n-  return (uint64_t) a;\n-}\n-\n-int64_t\n-__hsail_cvt_zeroi_sat_s64_f64 (double a)\n-{\n-  if (isnan (a))\n-    return 0;\n-  if (a >= (double) INT64_MAX)\n-    return INT64_MAX;\n-  if (a <= (double) INT64_MIN)\n-    return INT64_MIN;\n-  return (int64_t) a;\n-}\n-\n-\n-/* Flush the operand to zero in case it's a denormalized number.\n-   Do not cause any exceptions in case of NaNs.  */\n-\n-float\n-__hsail_ftz_f32 (float a)\n-{\n-  if (isnan (a) || isinf (a) || a == 0.0f)\n-    return a;\n-\n-  if (a < 0.0f)\n-    {\n-      if (-a < FLT_MIN)\n-\treturn -0.0f;\n-    }\n-  else\n-    {\n-      if (a < FLT_MIN)\n-\treturn 0.0f;\n-    }\n-  return a;\n-}\n-\n-#define F16_MIN (6.10e-5)\n-\n-/* Flush the single precision operand to zero in case it's considered\n-   a denormalized number in case it was a f16.  Do not cause any exceptions\n-   in case of NaNs.  */\n-\n-float\n-__hsail_ftz_f32_f16 (float a)\n-{\n-  if (isnan (a) || isinf (a) || a == 0.0f)\n-    return a;\n-\n-  if (a < 0.0f)\n-    {\n-      if (-a < F16_MIN)\n-\treturn -0.0f;\n-    }\n-  else\n-    {\n-      if (a < F16_MIN)\n-\treturn 0.0f;\n-    }\n-  return a;\n-}\n-\n-double\n-__hsail_ftz_f64 (double a)\n-{\n-  if (isnan (a) || isinf (a) || a == 0.0d)\n-    return a;\n-\n-  if (a < 0.0d)\n-    {\n-      if (-a < DBL_MIN)\n-\treturn -0.0d;\n-    }\n-  else\n-    {\n-      if (a < DBL_MIN)\n-\treturn 0.0d;\n-    }\n-  return a;\n-}\n-\n-uint32_t\n-__hsail_borrow_u32 (uint32_t a, uint32_t b)\n-{\n-  return __builtin_sub_overflow_p (a, b, a);\n-}\n-\n-uint64_t\n-__hsail_borrow_u64 (uint64_t a, uint64_t b)\n-{\n-  return __builtin_sub_overflow_p (a, b, a);\n-}\n-\n-uint32_t\n-__hsail_carry_u32 (uint32_t a, uint32_t b)\n-{\n-  return __builtin_add_overflow_p (a, b, a);\n-}\n-\n-uint64_t\n-__hsail_carry_u64 (uint64_t a, uint64_t b)\n-{\n-  return __builtin_add_overflow_p (a, b, a);\n-}\n-\n-float\n-__hsail_fract_f32 (float a)\n-{\n-  int exp;\n-  if (isinf (a))\n-    return signbit (a) == 0 ? 0.0f : -0.0f;\n-  if (isnan (a) || a == 0.0f)\n-    return a;\n-  else\n-    return fminf (a - floorf (a), 0x1.fffffep-1f);\n-}\n-\n-double\n-__hsail_fract_f64 (double a)\n-{\n-  int exp;\n-  if (isinf (a))\n-    return 0.0f * isinf (a);\n-  if (isnan (a) || a == 0.0f)\n-    return a;\n-  else\n-    return fmin (a - floor (a), 0x1.fffffffffffffp-1d);\n-}\n-\n-uint32_t\n-__hsail_class_f32 (float a, uint32_t flags)\n-{\n-  return (flags & 0x0001 && isnan (a) && !(*(uint32_t *) &a & (1ul << 22)))\n-    || (flags & 0x0002 && isnan (a) && (*(uint32_t *) &a & (1ul << 22)))\n-    || (flags & 0x0004 && isinf (a) && a < 0.0f)\n-    || (flags & 0x0008 && isnormal (a) && signbit (a))\n-    || (flags & 0x0010 && a < 0.0f && a > -FLT_MIN)\n-    || (flags & 0x0020 && a == 0.0f && signbit (a))\n-    || (flags & 0x0040 && a == 0.0f && !signbit (a))\n-    || (flags & 0x0080 && a > 0.0f && a < FLT_MIN)\n-    || (flags & 0x0100 && isnormal (a) && !signbit (a))\n-    || (flags & 0x0200 && isinf (a) && a >= 0.0f);\n-}\n-\n-uint32_t\n-__hsail_class_f64 (double a, uint32_t flags)\n-{\n-  return (flags & 0x0001 && isnan (a) && !(*(uint64_t *) &a & (1ul << 51)))\n-    || (flags & 0x0002 && isnan (a) && (*(uint64_t *) &a & (1ul << 51)))\n-    || (flags & 0x0004 && isinf (a) && a < 0.0f)\n-    || (flags & 0x0008 && isnormal (a) && signbit (a))\n-    || (flags & 0x0010 && a < 0.0f && a > -FLT_MIN)\n-    || (flags & 0x0020 && a == 0.0f && signbit (a))\n-    || (flags & 0x0040 && a == 0.0f && !signbit (a))\n-    || (flags & 0x0080 && a > 0.0f && a < FLT_MIN)\n-    || (flags & 0x0100 && isnormal (a) && !signbit (a))\n-    || (flags & 0x0200 && isinf (a) && a >= 0.0f);\n-}\n-\n-\n-/* 'class' for a f32-converted f16 which should otherwise be treated like f32\n- except for its limits.  */\n-\n-uint32_t\n-__hsail_class_f32_f16 (float a, uint32_t flags)\n-{\n-  return (flags & 0x0001 && isnan (a) && !(*(uint32_t *) &a & 0x40000000))\n-\t || (flags & 0x0002 && isnan (a) && (*(uint32_t *) &a & 0x40000000))\n-\t || (flags & 0x0004 && isinf (a) && a < 0.0f)\n-\t || (flags & 0x0008 && a != 0.0f && !isinf (a) && !isnan (a)\n-\t     && a <= -F16_MIN)\n-\t || (flags & 0x0010 && a != 0.0f && !isinf (a) && !isnan (a) && a < 0.0f\n-\t     && a > -F16_MIN)\n-\t || (flags & 0x0020 && a == 0.0f && signbit (a))\n-\t || (flags & 0x0040 && a == 0.0f && !signbit (a))\n-\t || (flags & 0x0080 && a != 0.0f && !isinf (a) && !isnan (a) && a > 0.0f\n-\t     && a < F16_MIN)\n-\t || (flags & 0x0100 && a != 0.0f && !isinf (a) && !isnan (a)\n-\t     && a >= F16_MIN)\n-\t || (flags & 0x0200 && isinf (a) && a >= 0.0f);\n-}"}, {"sha": "baf78257a107209c92fefb43f104cf49a3fac70e", "filename": "libhsail-rt/rt/atomics.c", "status": "removed", "additions": 0, "deletions": 115, "changes": 115, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fatomics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fatomics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fatomics.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,115 +0,0 @@\n-/* atomic.c -- Builtins for HSAIL atomic instructions for which\n-   there is no feasible direct gcc GENERIC expression.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <stdint.h>\n-#include <stdio.h>\n-\n-#define DO_ATOMICALLY(T, OPERATION)\t\t\t\t\t\\\n-  int done = 0;\t\t\t\t\t\t\t\t\\\n-  T old_value;\t\t\t\t\t\t\t\t\\\n-  T new_value;\t\t\t\t\t\t\t\t\\\n-  while (!done)\t\t\t\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      old_value = *ptr;\t\t\t\t\t\t\t\\\n-      new_value = OPERATION;\t\t\t\t\t\t\\\n-      done = __sync_bool_compare_and_swap (ptr, old_value, new_value);\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  return old_value\n-\n-int32_t\n-__hsail_atomic_min_s32 (int32_t *ptr, int32_t a)\n-{\n-  DO_ATOMICALLY (int32_t, (old_value < a) ? old_value : a);\n-}\n-\n-int64_t\n-__hsail_atomic_min_s64 (int64_t *ptr, int64_t a)\n-{\n-  DO_ATOMICALLY (int64_t, (old_value < a) ? old_value : a);\n-}\n-\n-uint32_t\n-__hsail_atomic_min_u32 (uint32_t *ptr, uint32_t a)\n-{\n-  DO_ATOMICALLY (uint32_t, (old_value < a) ? old_value : a);\n-}\n-\n-uint64_t\n-__hsail_atomic_min_u64 (uint64_t *ptr, uint64_t a)\n-{\n-  DO_ATOMICALLY (uint64_t, (old_value < a) ? old_value : a);\n-}\n-\n-uint32_t\n-__hsail_atomic_max_u32 (uint32_t *ptr, uint32_t a)\n-{\n-  DO_ATOMICALLY (uint32_t, (old_value > a) ? old_value : a);\n-}\n-\n-int32_t\n-__hsail_atomic_max_s32 (int32_t *ptr, int32_t a)\n-{\n-  DO_ATOMICALLY (int32_t, (old_value > a) ? old_value : a);\n-}\n-\n-uint64_t\n-__hsail_atomic_max_u64 (uint64_t *ptr, uint64_t a)\n-{\n-  DO_ATOMICALLY (uint64_t, (old_value > a) ? old_value : a);\n-}\n-\n-int64_t\n-__hsail_atomic_max_s64 (int64_t *ptr, int64_t a)\n-{\n-  DO_ATOMICALLY (int64_t, (old_value > a) ? old_value : a);\n-}\n-\n-uint32_t\n-__hsail_atomic_wrapinc_u32 (uint32_t *ptr, uint32_t a)\n-{\n-  DO_ATOMICALLY (uint32_t, (old_value >= a) ? 0 : (old_value + 1));\n-}\n-\n-uint64_t\n-__hsail_atomic_wrapinc_u64 (uint64_t *ptr, uint64_t a)\n-{\n-  DO_ATOMICALLY (uint64_t, (old_value >= a) ? 0 : (old_value + 1));\n-}\n-\n-uint32_t\n-__hsail_atomic_wrapdec_u32 (uint32_t *ptr, uint32_t a)\n-{\n-  DO_ATOMICALLY (uint32_t,\n-\t\t ((old_value == 0) || (old_value > a)) ? a : (old_value - 1));\n-}\n-\n-uint64_t\n-__hsail_atomic_wrapdec_u64 (uint64_t *ptr, uint64_t a)\n-{\n-  DO_ATOMICALLY (uint64_t,\n-\t\t ((old_value == 0) || (old_value > a)) ? a : (old_value - 1));\n-}"}, {"sha": "dbfbf83553108bc371f060f9c186ab18a2e97c39", "filename": "libhsail-rt/rt/bitstring.c", "status": "removed", "additions": 0, "deletions": 190, "changes": 190, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fbitstring.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fbitstring.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fbitstring.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,190 +0,0 @@\n-/* bitstring.c -- Builtins for HSAIL bitstring instructions.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <stdint.h>\n-#include <limits.h>\n-\n-#define BITEXTRACT(DEST_TYPE, SRC0, SRC1, SRC2)\t\t\t\t\\\n-  uint32_t offset = SRC1 & (sizeof (DEST_TYPE) * 8 - 1);\t\t\\\n-  uint32_t width = SRC2 & (sizeof (DEST_TYPE) * 8 - 1);\t\t\t\\\n-  if (width == 0)\t\t\t\t\t\t\t\\\n-    return 0;\t\t\t\t\t\t\t\t\\\n-  else\t\t\t\t\t\t\t\t\t\\\n-    return (SRC0 << (sizeof (DEST_TYPE) * 8 - width - offset))\t\t\\\n-      >> (sizeof (DEST_TYPE) * 8 - width)\n-\n-uint32_t\n-__hsail_bitextract_u32 (uint32_t src0, uint32_t src1, uint32_t src2)\n-{\n-  BITEXTRACT (uint32_t, src0, src1, src2);\n-}\n-\n-int32_t\n-__hsail_bitextract_s32 (int32_t src0, uint32_t src1, uint32_t src2)\n-{\n-  BITEXTRACT (int32_t, src0, src1, src2);\n-}\n-\n-uint64_t\n-__hsail_bitextract_u64 (uint64_t src0, uint32_t src1, uint32_t src2)\n-{\n-  BITEXTRACT (uint64_t, src0, src1, src2);\n-}\n-\n-int64_t\n-__hsail_bitextract_s64 (int64_t src0, uint32_t src1, uint32_t src2)\n-{\n-  BITEXTRACT (int64_t, src0, src1, src2);\n-}\n-\n-#define BITINSERT(DEST_TYPE, SRC0, SRC1, SRC2, SRC3)\t\t\t\\\n-  uint32_t offset = SRC2 & (sizeof (DEST_TYPE) * 8 - 1);\t\t\\\n-  uint32_t width = SRC3 & (sizeof (DEST_TYPE) * 8 - 1);\t\t\t\\\n-  DEST_TYPE mask = ((DEST_TYPE) 1 << width) - 1;\t\t\t\\\n-  return (SRC0 & ~(mask << offset)) | ((SRC1 & mask) << offset)\n-\n-uint32_t\n-__hsail_bitinsert_u32 (uint32_t src0, uint32_t src1, uint32_t src2,\n-\t\t\t      uint32_t src3)\n-{\n-  BITINSERT (uint32_t, src0, src1, src2, src3);\n-}\n-\n-int64_t\n-__hsail_bitinsert_u64 (uint64_t src0, uint64_t src1, uint32_t src2,\n-\t\t\t      uint32_t src3)\n-{\n-  BITINSERT (uint64_t, src0, src1, src2, src3);\n-}\n-\n-#define BITMASK(DEST_TYPE, SRC0, SRC1)\t\t\t\t\t\\\n-  uint32_t offset = SRC0 & (sizeof (DEST_TYPE) * 8 - 1);\t\t\\\n-  uint32_t width = SRC1 & (sizeof (DEST_TYPE) * 8 - 1);\t\t\t\\\n-  DEST_TYPE mask = ((DEST_TYPE) 1 << width) - 1;\t\t\t\\\n-  return mask << offset\n-\n-uint32_t\n-__hsail_bitmask_u32 (uint32_t src0, uint32_t src1)\n-{\n-  BITMASK (uint32_t, src0, src1);\n-}\n-\n-uint64_t\n-__hsail_bitmask_u64 (uint32_t src0, uint32_t src1)\n-{\n-  BITMASK (uint64_t, src0, src1);\n-}\n-\n-/* The dummy, but readable version from\n-   http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious\n-   This (also) often maps to a single instruction in DSPs.  */\n-\n-#define BITREV(DEST_TYPE, SRC)\t\t\t\t\t\t\\\n-  DEST_TYPE v = SRC;\t\t\t\t\t\t\t\\\n-  DEST_TYPE r = v;\t\t\t\t\t\t\t\\\n-  int s = sizeof (SRC) * CHAR_BIT - 1;\t\t\t\t\t\\\n-  \t\t\t\t\t\t\t\t\t\\\n-  for (v >>= 1; v; v >>= 1)\t\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      r <<= 1;\t\t\t\t\t\t\t\t\\\n-      r |= v & 1;\t\t\t\t\t\t\t\\\n-      s--;\t\t\t\t\t\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  return r << s\n-\n-uint32_t\n-__hsail_bitrev_u32 (uint32_t src0)\n-{\n-  BITREV (uint32_t, src0);\n-}\n-\n-uint64_t\n-__hsail_bitrev_u64 (uint64_t src0)\n-{\n-  BITREV (uint64_t, src0);\n-}\n-\n-uint32_t\n-__hsail_bitselect_u32 (uint32_t src0, uint32_t src1, uint32_t src2)\n-{\n-  return (src1 & src0) | (src2 & ~src0);\n-}\n-\n-uint64_t\n-__hsail_bitselect_u64 (uint64_t src0, uint64_t src1, uint64_t src2)\n-{\n-  return (src1 & src0) | (src2 & ~src0);\n-}\n-\n-/* Due to the defined behavior with 0, we cannot use the gcc builtin\n-   __builtin_clz* () directly. __builtin_ffs () has defined behavior, but\n-   returns 0 while HSAIL requires to return -1.  */\n-\n-uint32_t\n-__hsail_firstbit_u32 (uint32_t src0)\n-{\n-  if (src0 == 0)\n-    return -1;\n-  return __builtin_clz (src0);\n-}\n-\n-uint32_t\n-__hsail_firstbit_s32 (int32_t src0)\n-{\n-  uint32_t converted = src0 >= 0 ? src0 : ~src0;\n-  return __hsail_firstbit_u32 (converted);\n-}\n-\n-uint32_t\n-__hsail_firstbit_u64 (uint64_t src0)\n-{\n-  if (src0 == 0)\n-    return -1;\n-  return __builtin_clzl (src0);\n-}\n-\n-uint32_t\n-__hsail_firstbit_s64 (int64_t src0)\n-{\n-  uint64_t converted = src0 >= 0 ? src0 : ~src0;\n-  return __hsail_firstbit_u64 (converted);\n-}\n-\n-uint32_t\n-__hsail_lastbit_u32 (uint32_t src0)\n-{\n-  if (src0 == 0)\n-    return -1;\n-  return __builtin_ctz (src0);\n-}\n-\n-uint32_t\n-__hsail_lastbit_u64 (uint64_t src0)\n-{\n-  if (src0 == 0)\n-    return -1;\n-  return __builtin_ctzl (src0);\n-}"}, {"sha": "ca67d247a3dd11a453f4b6070c3e2fe60da2735b", "filename": "libhsail-rt/rt/fbarrier.c", "status": "removed", "additions": 0, "deletions": 87, "changes": 87, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Ffbarrier.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Ffbarrier.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Ffbarrier.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,87 +0,0 @@\n-/* fbarrier.c -- HSAIL fbarrier built-ins.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <stdlib.h>\n-#include <signal.h>\n-\n-#include \"workitems.h\"\n-#include \"phsa-rt.h\"\n-\n-#ifdef HAVE_FIBERS\n-#include \"fibers.h\"\n-\n-typedef fiber_barrier_t fbarrier;\n-\n-void\n-__hsail_initfbar (uint32_t addr, PHSAWorkItem *wi)\n-{\n-  fbarrier *fbar = (fbarrier *) (wi->wg->group_base_ptr + addr);\n-  fbar->threshold = 0;\n-  fbar->reached = 0;\n-  fbar->waiting_count = 0;\n-}\n-\n-void\n-__hsail_releasefbar (uint32_t addr, PHSAWorkItem *wi)\n-{\n-  fbarrier *fbar = (fbarrier *) (wi->wg->group_base_ptr + addr);\n-  fbar->threshold = 0;\n-  fbar->reached = 0;\n-  fbar->waiting_count = 0;\n-}\n-\n-void\n-__hsail_joinfbar (uint32_t addr, PHSAWorkItem *wi)\n-{\n-  fbarrier *fbar = (fbarrier *) (wi->wg->group_base_ptr + addr);\n-  ++fbar->threshold;\n-}\n-\n-void\n-__hsail_leavefbar (uint32_t addr, PHSAWorkItem *wi)\n-{\n-  fbarrier *fbar = (fbarrier *) (wi->wg->group_base_ptr + addr);\n-  --fbar->threshold;\n-}\n-\n-void\n-__hsail_waitfbar (uint32_t addr, PHSAWorkItem *wi)\n-{\n-  fbarrier *fbar = (fbarrier *) (wi->wg->group_base_ptr + addr);\n-  fiber_barrier_reach (fbar);\n-}\n-\n-void\n-__hsail_arrivefbar (uint32_t addr, PHSAWorkItem *wi)\n-{\n-  fbarrier *fbar = (fbarrier *) (wi->wg->group_base_ptr + addr);\n-  ++fbar->reached;\n-  if (fbar->reached == fbar->threshold)\n-    fbar->reached = 0;\n-}\n-\n-#endif\n-"}, {"sha": "56da61c70a5a8e8d09e6f4593f73e19e242ffca3", "filename": "libhsail-rt/rt/fibers.c", "status": "removed", "additions": 0, "deletions": 220, "changes": 220, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Ffibers.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Ffibers.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Ffibers.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,220 +0,0 @@\n-/* fibers.c -- extremely simple lightweight thread (fiber) implementation\n-   Copyright (C) 2016-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <stdlib.h>\n-#include <stdio.h>\n-#include <stdint.h>\n-\n-#include \"target-config.h\"\n-\n-#include \"fibers.h\"\n-\n-void\n-phsa_fatal_error (int code);\n-\n-ucontext_t main_context;\n-\n-/* The last fiber in the linked list.  */\n-static fiber_t *tail_fiber = NULL;\n-/* The first fiber in the linked list.  */\n-static fiber_t *head_fiber = NULL;\n-/* The fiber currently being executed.  */\n-static fiber_t *current_fiber = NULL;\n-\n-/* Makecontext accepts only integer arguments.  We need to split the\n-   pointer argument in case pointer does not fit into int.  This helper\n-   function can be used to restore the pointer from the arguments.  */\n-\n-void *\n-fiber_int_args_to_ptr (int arg0, int arg1)\n-{\n-  void *ptr = NULL;\n-#if SIZEOF_VOIDP == 8 && SIZEOF_INT == 4\n-  ptr = (void*)(((uint64_t) arg0 & (uint64_t) 0xFFFFFFFF)\n-\t\t| ((uint64_t) arg1 << 32));\n-#elif SIZEOF_VOIDP == 4 && SIZEOF_INT == 4\n-  ptr = (void*)arg0;\n-#else\n-# error Unsupported pointer/int size.\n-#endif\n-  return ptr;\n-}\n-\n-void\n-fiber_init (fiber_t *fiber, fiber_function_t start_function, void *arg,\n-\t    size_t stack_size, size_t stack_align)\n-{\n-  int arg0, arg1;\n-  if (getcontext (&fiber->context) != 0)\n-    phsa_fatal_error (3);\n-  if (posix_memalign (&fiber->context.uc_stack.ss_sp, stack_align, stack_size)\n-      != 0)\n-    phsa_fatal_error (4);\n-  fiber->context.uc_stack.ss_size = stack_size;\n-  fiber->context.uc_link = &main_context;\n-\n-  /* makecontext () accepts only integer arguments.  Split the\n-     pointer argument to two args in the case pointer does not fit\n-     into one int.  */\n-#if SIZEOF_VOIDP == 8 && SIZEOF_INT == 4\n-  arg0 = (int32_t) 0xFFFFFFFF & (uint64_t)arg;\n-  arg1 = (int32_t) 0xFFFFFFFF & ((uint64_t)arg >> 32);\n-#elif SIZEOF_VOIDP == 4 && SIZEOF_INT == 4\n-  arg0 = (int)arg;\n-  arg1 = 0;\n-#else\n-# error Unsupported pointer/int size.\n-#endif\n-\n-  makecontext (&fiber->context, (void*)start_function, 2, arg0, arg1);\n-\n-  fiber->status = FIBER_STATUS_READY;\n-  fiber->next = NULL;\n-  fiber->prev = NULL;\n-\n-  /* Create a linked list of the created fibers.  Append the new one at\n-     the end.  */\n-  if (tail_fiber == NULL)\n-    tail_fiber = fiber;\n-  else\n-    {\n-      tail_fiber->next = fiber;\n-      fiber->prev = tail_fiber;\n-      tail_fiber = fiber;\n-    }\n-\n-  if (head_fiber == NULL)\n-    head_fiber = fiber;\n-}\n-\n-void\n-fiber_exit ()\n-{\n-  fiber_status_t old_status = current_fiber->status;\n-  current_fiber->status = FIBER_STATUS_EXITED;\n-  if (old_status == FIBER_STATUS_JOINED)\n-    /* In case this thread has been joined, return back to the joiner.  */\n-    swapcontext (&current_fiber->context, &main_context);\n-  else\n-    /* In case the thread exited while being yielded from another thread,\n-       switch back to another fiber.  */\n-    fiber_yield ();\n-}\n-\n-void\n-fiber_join (fiber_t *fiber)\n-{\n-  fiber_t *next_ready_fiber = NULL;\n-  current_fiber = fiber;\n-  if (fiber->status != FIBER_STATUS_EXITED)\n-    {\n-      fiber->status = FIBER_STATUS_JOINED;\n-      while (fiber->status != FIBER_STATUS_EXITED)\n-\tswapcontext (&main_context, &fiber->context);\n-    }\n-\n-  /* Remove the successfully joined fiber from the linked list so we won't\n-     access it later (the fiber itself might be freed after the join).  */\n-  if (fiber->prev != NULL)\n-    fiber->prev->next = fiber->next;\n-\n-  if (fiber->next != NULL)\n-    fiber->next->prev = fiber->prev;\n-\n-  if (head_fiber == fiber)\n-    head_fiber = fiber->next;\n-\n-  if (tail_fiber == fiber)\n-    tail_fiber = fiber->prev;\n-\n-  free (fiber->context.uc_stack.ss_sp);\n-}\n-\n-void\n-fiber_yield ()\n-{\n-  fiber_t *next_ready_fiber = current_fiber;\n-\n-  if (current_fiber == head_fiber\n-      && current_fiber == tail_fiber)\n-    {\n-      /* If the last fiber exits independently, there is no\n-\t fiber to switch to.  Switch to the main context in that\n-\t case.  */\n-      if (current_fiber->status == FIBER_STATUS_EXITED)\n-\tswapcontext (&current_fiber->context, &main_context);\n-    }\n-\n-  do {\n-    next_ready_fiber = next_ready_fiber->next != NULL\n-      ? next_ready_fiber->next : head_fiber;\n-  } while (next_ready_fiber != current_fiber\n-\t   && next_ready_fiber->status == FIBER_STATUS_EXITED);\n-\n-  fiber_t *old_current_fiber = current_fiber;\n-  current_fiber = next_ready_fiber;\n-  swapcontext (&old_current_fiber->context, &next_ready_fiber->context);\n-}\n-\n-size_t\n-fiber_barrier_reach (fiber_barrier_t *barrier)\n-{\n-  /* Yield once to ensure that there are no fibers waiting for\n-     a previous triggering of the barrier in the waiting_count\n-     loop.  This should release them before we update the reached\n-     counter again.  */\n-  fiber_yield ();\n-\n-  barrier->reached++;\n-  ++barrier->waiting_count;\n-  while (barrier->reached < barrier->threshold)\n-    fiber_yield ();\n-  --barrier->waiting_count;\n-\n-  /* Wait until all the fibers have reached this point.  */\n-  while (barrier->waiting_count > 0)\n-    fiber_yield ();\n-\n-  /* Now all fibers have been released from the barrier waiting\n-     loop.  We can now safely reset the reach count for new triggering.  */\n-  if (barrier->reached > 0)\n-    {\n-      barrier->reached = 0;\n-      return 0;\n-    }\n-  return 1;\n-}\n-\n-void\n-fiber_barrier_init (fiber_barrier_t *barrier, size_t threshold)\n-{\n-  barrier->threshold = threshold;\n-  barrier->waiting_count = 0;\n-  barrier->reached = 0;\n-}"}, {"sha": "b6e9f57e4ef45bc9684a2b563b53fac517b9a5a3", "filename": "libhsail-rt/rt/fp16.c", "status": "removed", "additions": 0, "deletions": 135, "changes": 135, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Ffp16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Ffp16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Ffp16.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,135 +0,0 @@\n-/* Half-float conversion routines.  Code mostly borrowed from the ARM's\n-   builtin function.\n-\n-   Copyright (C) 2008-2021 Free Software Foundation, Inc.\n-   Contributed by CodeSourcery.\n-\n-   This file is free software; you can redistribute it and/or modify it\n-   under the terms of the GNU General Public License as published by the\n-   Free Software Foundation; either version 3, or (at your option) any\n-   later version.\n-\n-   This file is distributed in the hope that it will be useful, but\n-   WITHOUT ANY WARRANTY; without even the implied warranty of\n-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n-   General Public License for more details.\n-\n-   Under Section 7 of GPL version 3, you are granted additional\n-   permissions described in the GCC Runtime Library Exception, version\n-   3.1, as published by the Free Software Foundation.\n-\n-   You should have received a copy of the GNU General Public License and\n-   a copy of the GCC Runtime Library Exception along with this program;\n-   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n-   <http://www.gnu.org/licenses/>.  */\n-\n-static inline unsigned short\n-__gnu_f2h_internal (unsigned int a, int ieee)\n-{\n-  unsigned short sign = (a >> 16) & 0x8000;\n-  int aexp = (a >> 23) & 0xff;\n-  unsigned int mantissa = a & 0x007fffff;\n-  unsigned int mask;\n-  unsigned int increment;\n-\n-  if (aexp == 0xff)\n-    {\n-      if (!ieee)\n-\treturn sign;\n-      if (mantissa == 0)\n-\treturn sign | 0x7c00; /* Infinity.  */\n-      /* Remaining cases are NaNs.  Convert SNaN to QNaN.  */\n-      return sign | 0x7e00 | (mantissa >> 13);\n-    }\n-\n-  if (aexp == 0 && mantissa == 0)\n-    return sign;\n-\n-  aexp -= 127;\n-\n-  /* Decimal point between bits 22 and 23.  */\n-  mantissa |= 0x00800000;\n-  if (aexp < -14)\n-    {\n-      mask = 0x00ffffff;\n-      if (aexp >= -25)\n-\tmask >>= 25 + aexp;\n-    }\n-  else\n-    mask = 0x00001fff;\n-\n-  /* Round.  */\n-  if (mantissa & mask)\n-    {\n-      increment = (mask + 1) >> 1;\n-      if ((mantissa & mask) == increment)\n-\tincrement = mantissa & (increment << 1);\n-      mantissa += increment;\n-      if (mantissa >= 0x01000000)\n-\t{\n-\t  mantissa >>= 1;\n-\t  aexp++;\n-\t}\n-    }\n-\n-  if (ieee)\n-    {\n-      if (aexp > 15)\n-\treturn sign | 0x7c00;\n-    }\n-  else\n-    {\n-      if (aexp > 16)\n-\treturn sign | 0x7fff;\n-    }\n-\n-  if (aexp < -24)\n-    return sign;\n-\n-  if (aexp < -14)\n-    {\n-      mantissa >>= -14 - aexp;\n-      aexp = -14;\n-    }\n-\n-  /* We leave the leading 1 in the mantissa, and subtract one\n-     from the exponent bias to compensate.  */\n-  return sign | (((aexp + 14) << 10) + (mantissa >> 13));\n-}\n-\n-static unsigned int\n-__gnu_h2f_internal (unsigned short a, int ieee)\n-{\n-  unsigned int sign = (unsigned int) (a & 0x8000) << 16;\n-  int aexp = (a >> 10) & 0x1f;\n-  unsigned int mantissa = a & 0x3ff;\n-\n-  if (aexp == 0x1f && ieee)\n-    return sign | 0x7f800000 | (mantissa << 13);\n-\n-  if (aexp == 0)\n-    {\n-      int shift;\n-\n-      if (mantissa == 0)\n-\treturn sign;\n-\n-      shift = __builtin_clz (mantissa) - 21;\n-      mantissa <<= shift;\n-      aexp = -shift;\n-    }\n-\n-  return sign | (((aexp + 0x70) << 23) + (mantissa << 13));\n-}\n-\n-unsigned short\n-__hsail_f32_to_f16 (unsigned int a)\n-{\n-  return __gnu_f2h_internal (a, 1);\n-}\n-\n-unsigned int\n-__hsail_f16_to_f32 (unsigned short a)\n-{\n-  return __gnu_h2f_internal (a, 1);\n-}"}, {"sha": "1a02711e88719f614c161ec7a59b07378ae4c5f0", "filename": "libhsail-rt/rt/misc.c", "status": "removed", "additions": 0, "deletions": 89, "changes": 89, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fmisc.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,89 +0,0 @@\n-/* misc.c -- Builtins for HSAIL misc instructions.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <stdint.h>\n-#include <time.h>\n-\n-#include \"workitems.h\"\n-\n-/* Return the monotonic clock as nanoseconds.  */\n-\n-uint64_t\n-__hsail_clock ()\n-{\n-  struct timespec t;\n-  clock_gettime (CLOCK_MONOTONIC, &t);\n-  return (uint64_t) t.tv_sec * 1000000000 + (uint64_t) t.tv_nsec;\n-}\n-\n-uint32_t\n-__hsail_cuid (PHSAWorkItem *wi)\n-{\n-  /* All WIs are executed with a single compute unit (core/thread)\n-     for now.  */\n-  return 0;\n-}\n-\n-uint32_t\n-__hsail_maxcuid (PHSAWorkItem *wi)\n-{\n-  /* All WIs are executed with a single compute unit (core/thread)\n-     for now.  */\n-  return 0;\n-}\n-\n-void\n-__hsail_debugtrap (uint32_t src, PHSAWorkItem *wi)\n-{\n-  /* Could we produce a SIGTRAP signal here to drop to gdb\n-     console, or similar?  In any case, the execution of the\n-     kernel should halt.\n-  */\n-  return;\n-}\n-\n-uint32_t\n-__hsail_groupbaseptr (PHSAWorkItem *wi)\n-{\n-  return (uint32_t) (uintptr_t) (wi->wg->group_base_ptr\n-\t\t\t\t - wi->launch_data->group_segment_start_addr);\n-}\n-\n-uint64_t\n-__hsail_kernargbaseptr_u64 (PHSAWorkItem *wi)\n-{\n-  /* For now assume only a single kernarg allocation at a time.\n-     Proper kernarg memory management to do.  */\n-  return (uint64_t) (uintptr_t) wi->launch_data->kernarg_addr;\n-}\n-\n-uint32_t\n-__hsail_kernargbaseptr_u32 (PHSAWorkItem *wi)\n-{\n-  /* For now assume only a single kernarg allocation at a time.\n-     Proper kernarg memory management to do.  */\n-  return 0;\n-}"}, {"sha": "f6f391c2e2c32d195a04423cb1b2f08af99ac6f3", "filename": "libhsail-rt/rt/multimedia.c", "status": "removed", "additions": 0, "deletions": 135, "changes": 135, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fmultimedia.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fmultimedia.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fmultimedia.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,135 +0,0 @@\n-/* multimedia.c -- Builtins for HSAIL multimedia instructions.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <math.h>\n-#include <stdint.h>\n-\n-uint32_t\n-__hsail_bitalign (uint64_t lower, uint64_t upper, uint32_t shift_amount)\n-{\n-  shift_amount = shift_amount & 31;\n-  uint64_t packed_value = (upper << 32) | lower;\n-  return (packed_value >> shift_amount) & 0xFFFFFFFF;\n-}\n-\n-uint32_t\n-__hsail_bytealign (uint64_t lower, uint64_t upper, uint32_t shift_amount)\n-{\n-  shift_amount = (shift_amount & 3) * 8;\n-  uint64_t packed_value = (upper << 32) | lower;\n-  return (packed_value >> shift_amount) & 0xFFFFFFFF;\n-}\n-\n-uint32_t\n-__hsail_lerp (uint32_t a, uint32_t b, uint32_t c)\n-{\n-  uint32_t e3\n-    = (((((a >> 24) & 0xff) + ((b >> 24) & 0xff) + ((c >> 24) & 0x1)) / 2)\n-       & 0xff)\n-      << 24;\n-  uint32_t e2\n-    = (((((a >> 16) & 0xff) + ((b >> 16) & 0xff) + ((c >> 16) & 0x1)) / 2)\n-       & 0xff)\n-      << 16;\n-  uint32_t e1\n-    = (((((a >> 8) & 0xff) + ((b >> 8) & 0xff) + ((c >> 8) & 0x1)) / 2) & 0xff)\n-      << 8;\n-  uint32_t e0 = (((a & 0xff) + (b & 0xff) + (c & 0x1)) / 2) & 0xff;\n-\n-  return e3 | e2 | e1 | e0;\n-}\n-\n-static uint8_t\n-cvt_neari_sat_u8_f32 (float a)\n-{\n-  if (isinf (a))\n-    {\n-      if (signbit (a)) return 0;\n-      else return 255;\n-    }\n-  else if (isnan (a)) return 0;\n-  else if (a < 0.0)\n-    return 0;\n-  else if (a > 255.0)\n-    return 255;\n-  else\n-    return (uint8_t) a;\n-}\n-\n-uint32_t\n-__hsail_packcvt (float a, float b, float c, float d)\n-{\n-  return (uint32_t) cvt_neari_sat_u8_f32 (a)\n-\t | (uint32_t) cvt_neari_sat_u8_f32 (b) << 8\n-\t | (uint32_t) cvt_neari_sat_u8_f32 (c) << 16\n-\t | (uint32_t) cvt_neari_sat_u8_f32 (d) << 24;\n-}\n-\n-float\n-__hsail_unpackcvt (uint32_t val, uint32_t index)\n-{\n-  return (float) ((val >> (index * 8)) & 0xff);\n-}\n-\n-static uint32_t\n-abs_diff (uint32_t a, uint32_t b)\n-{\n-  if (a < b)\n-    return b - a;\n-  else\n-    return a - b;\n-}\n-\n-uint32_t\n-__hsail_sad_u8x4 (uint32_t a, uint32_t b, uint32_t add)\n-{\n-  return abs_diff ((a >> 24) & 0xff, (b >> 24) & 0xff)\n-\t + abs_diff ((a >> 16) & 0xff, (b >> 16) & 0xff)\n-\t + abs_diff ((a >> 8) & 0xff, (b >> 8) & 0xff)\n-\t + abs_diff ((a >> 0) & 0xff, (b >> 0) & 0xff) + add;\n-}\n-\n-uint32_t\n-__hsail_sad_u16x2 (uint32_t a, uint32_t b, uint32_t add)\n-{\n-  return abs_diff ((a >> 16) & 0xffff, (b >> 16) & 0xffff)\n-\t + abs_diff ((a >> 0) & 0xffff, (b >> 0) & 0xffff) + add;\n-}\n-\n-uint32_t\n-__hsail_sad_u32 (uint32_t a, uint32_t b, uint32_t add)\n-{\n-  return abs_diff (a, b) + add;\n-}\n-\n-uint32_t\n-__hsail_sadhi_u16x2_u8x4 (uint32_t a, uint32_t b, uint32_t add)\n-{\n-  return (abs_diff ((a >> 24) & 0xff, (b >> 24) & 0xff) << 16)\n-\t + (abs_diff ((a >> 16) & 0xff, (b >> 16) & 0xff) << 16)\n-\t + (abs_diff ((a >> 8) & 0xff, (b >> 8) & 0xff) << 16)\n-\t + (abs_diff ((a >> 0) & 0xff, (b >> 0) & 0xff) << 16) + add;\n-}"}, {"sha": "a91eb8c457b5c44424c5d872d0d414f7d2ac7d06", "filename": "libhsail-rt/rt/queue.c", "status": "removed", "additions": 0, "deletions": 71, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fqueue.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fqueue.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fqueue.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,71 +0,0 @@\n-/* queue.c -- Builtins for HSAIL queue related instructions.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include \"phsa-queue-interface.h\"\n-\n-uint64_t\n-__hsail_ldqueuereadindex (uint64_t queue_addr)\n-{\n-  phsa_queue_t *queue = (phsa_queue_t *) (uintptr_t) queue_addr;\n-  return queue->read_index;\n-}\n-\n-uint64_t\n-__hsail_ldqueuewriteindex (uint64_t queue_addr)\n-{\n-  phsa_queue_t *queue = (phsa_queue_t *) (uintptr_t) queue_addr;\n-  return queue->write_index;\n-}\n-\n-uint64_t\n-__hsail_addqueuewriteindex (uint64_t queue_addr, uint64_t value)\n-{\n-  phsa_queue_t *queue = (phsa_queue_t *) (uintptr_t) queue_addr;\n-  return __sync_fetch_and_add (&queue->write_index, value);\n-}\n-\n-uint64_t\n-__hsail_casqueuewriteindex (uint64_t queue_addr, uint64_t cmp_value,\n-\t\t\t\t   uint64_t new_value)\n-{\n-  phsa_queue_t *queue = (phsa_queue_t *) (uintptr_t) queue_addr;\n-  return __sync_val_compare_and_swap (&queue->write_index, cmp_value,\n-\t\t\t\t      new_value);\n-}\n-\n-void\n-__hsail_stqueuereadindex (uint64_t queue_addr, uint64_t value)\n-{\n-  phsa_queue_t *queue = (phsa_queue_t *) (uintptr_t) queue_addr;\n-  queue->read_index = value;\n-}\n-\n-void\n-__hsail_stqueuewriteindex (uint64_t queue_addr, uint64_t value)\n-{\n-  phsa_queue_t *queue = (phsa_queue_t *) (uintptr_t) queue_addr;\n-  queue->write_index = value;\n-}"}, {"sha": "8e0dee2f89f0463d12b75df6c134f45c4020cf1d", "filename": "libhsail-rt/rt/sat_arithmetic.c", "status": "removed", "additions": 0, "deletions": 267, "changes": 267, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fsat_arithmetic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fsat_arithmetic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fsat_arithmetic.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,267 +0,0 @@\n-/* sat_arithmetic.c -- Builtins for HSAIL saturating arithmetic instructions.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include <stdint.h>\n-\n-uint8_t\n-__hsail_sat_add_u8 (uint8_t a, uint8_t b)\n-{\n-  uint16_t c = (uint16_t) a + (uint16_t) b;\n-  if (c > UINT8_MAX)\n-    return UINT8_MAX;\n-  else\n-    return c;\n-}\n-\n-uint16_t\n-__hsail_sat_add_u16 (uint16_t a, uint16_t b)\n-{\n-  uint32_t c = (uint32_t) a + (uint32_t) b;\n-  if (c > UINT16_MAX)\n-    return UINT16_MAX;\n-  else\n-    return c;\n-}\n-\n-uint32_t\n-__hsail_sat_add_u32 (uint32_t a, uint32_t b)\n-{\n-  uint32_t c;\n-  if (__builtin_add_overflow (a, b, &c))\n-    return UINT32_MAX;\n-  return c;\n-}\n-\n-uint64_t\n-__hsail_sat_add_u64 (uint64_t a, uint64_t b)\n-{\n-  uint64_t c;\n-  if (__builtin_add_overflow (a, b, &c))\n-    return UINT64_MAX;\n-  return c;\n-}\n-\n-int8_t\n-__hsail_sat_add_s8 (int8_t a, int8_t b)\n-{\n-  int16_t c = (int16_t) a + (int16_t) b;\n-  if (c > INT8_MAX)\n-    return INT8_MAX;\n-  else if (c < INT8_MIN)\n-    return INT8_MIN;\n-  else\n-    return c;\n-}\n-\n-int16_t\n-__hsail_sat_add_s16 (int16_t a, int16_t b)\n-{\n-  int32_t c = (int32_t) a + (int32_t) b;\n-  if (c > INT16_MAX)\n-    return INT16_MAX;\n-  else if (c < INT16_MIN)\n-    return INT16_MIN;\n-  else\n-    return c;\n-}\n-\n-int32_t\n-__hsail_sat_add_s32 (int32_t a, int32_t b)\n-{\n-  int32_t c;\n-  if (__builtin_add_overflow (a, b, &c))\n-    return b < 0 ? INT32_MIN : INT32_MAX;\n-  return c;\n-}\n-\n-int64_t\n-__hsail_sat_add_s64 (int64_t a, int64_t b)\n-{\n-  int64_t c;\n-  if (__builtin_add_overflow (a, b, &c))\n-    return b < 0 ? INT64_MIN : INT64_MAX;\n-  return c;\n-}\n-\n-uint8_t\n-__hsail_sat_sub_u8 (uint8_t a, uint8_t b)\n-{\n-  int16_t c = (uint16_t) a - (uint16_t) b;\n-  if (c < 0)\n-    return 0;\n-  else\n-    return c;\n-}\n-\n-uint16_t\n-__hsail_sat_sub_u16 (uint16_t a, uint16_t b)\n-{\n-  int32_t c = (uint32_t) a - (uint32_t) b;\n-  if (c < 0)\n-    return 0;\n-  else\n-    return c;\n-}\n-\n-uint32_t\n-__hsail_sat_sub_u32 (uint32_t a, uint32_t b)\n-{\n-  uint32_t c;\n-  if (__builtin_sub_overflow (a, b, &c))\n-    return 0;\n-  return c;\n-}\n-\n-uint64_t\n-__hsail_sat_sub_u64 (uint64_t a, uint64_t b)\n-{\n-  uint64_t c;\n-  if (__builtin_sub_overflow (a, b, &c))\n-    return 0;\n-  return c;\n-}\n-\n-int8_t\n-__hsail_sat_sub_s8 (int8_t a, int8_t b)\n-{\n-  int16_t c = (int16_t) a - (int16_t) b;\n-  if (c > INT8_MAX)\n-    return INT8_MAX;\n-  else if (c < INT8_MIN)\n-    return INT8_MIN;\n-  else\n-    return c;\n-}\n-\n-int16_t\n-__hsail_sat_sub_s16 (int16_t a, int16_t b)\n-{\n-  int32_t c = (int32_t) a - (int32_t) b;\n-  if (c > INT16_MAX)\n-    return INT16_MAX;\n-  else if (c < INT16_MIN)\n-    return INT16_MIN;\n-  else\n-    return c;\n-}\n-\n-int32_t\n-__hsail_sat_sub_s32 (int32_t a, int32_t b)\n-{\n-  int32_t c;\n-  if (__builtin_sub_overflow (a, b, &c))\n-    return b < 0 ? INT32_MAX : INT32_MIN;\n-  return c;\n-}\n-\n-int64_t\n-__hsail_sat_sub_s64 (int64_t a, int64_t b)\n-{\n-  int64_t c;\n-  if (__builtin_sub_overflow (a, b, &c))\n-    return b < 0 ? INT64_MAX : INT64_MIN;\n-  return c;\n-}\n-\n-uint8_t\n-__hsail_sat_mul_u8 (uint8_t a, uint8_t b)\n-{\n-  uint16_t c = (uint16_t) a * (uint16_t) b;\n-  if (c > UINT8_MAX)\n-    return UINT8_MAX;\n-  else\n-    return c;\n-}\n-\n-uint16_t\n-__hsail_sat_mul_u16 (uint16_t a, uint16_t b)\n-{\n-  uint32_t c = (uint32_t) a * (uint32_t) b;\n-  if (c > UINT16_MAX)\n-    return UINT16_MAX;\n-  else\n-    return c;\n-}\n-\n-uint32_t\n-__hsail_sat_mul_u32 (uint32_t a, uint32_t b)\n-{\n-  uint32_t c;\n-  if (__builtin_mul_overflow (a, b, &c))\n-    return UINT32_MAX;\n-  return c;\n-}\n-\n-uint64_t\n-__hsail_sat_mul_u64 (uint64_t a, uint64_t b)\n-{\n-  uint64_t c;\n-  if (__builtin_mul_overflow (a, b, &c))\n-    return UINT64_MAX;\n-  return c;\n-}\n-\n-int8_t\n-__hsail_sat_mul_s8 (int8_t a, int8_t b)\n-{\n-  int16_t c = (int16_t) a * (int16_t) b;\n-  if (c > INT8_MAX)\n-    return INT8_MAX;\n-  else if (c < INT8_MIN)\n-    return INT8_MIN;\n-  else\n-    return c;\n-}\n-\n-int16_t\n-__hsail_sat_mul_s16 (int16_t a, int16_t b)\n-{\n-  int32_t c = (int32_t) a * (int32_t) b;\n-  if (c > INT16_MAX)\n-    return INT16_MAX;\n-  else if (c < INT16_MIN)\n-    return INT16_MIN;\n-  else\n-    return c;\n-}\n-\n-int32_t\n-__hsail_sat_mul_s32 (int32_t a, int32_t b)\n-{\n-  int32_t c;\n-  if (__builtin_mul_overflow (a, b, &c))\n-    return ((a > 0) ^ (b > 0)) ? INT32_MIN : INT32_MAX;\n-  return c;\n-}\n-\n-int64_t\n-__hsail_sat_mul_s64 (int64_t a, int64_t b)\n-{\n-  int64_t c;\n-  if (__builtin_mul_overflow (a, b, &c))\n-    return ((a > 0) ^ (b > 0)) ? INT64_MIN : INT64_MAX;\n-  return c;\n-}"}, {"sha": "f25310c751504748b52a6f824237a3155cd64319", "filename": "libhsail-rt/rt/segment.c", "status": "removed", "additions": 0, "deletions": 59, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fsegment.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fsegment.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fsegment.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,59 +0,0 @@\n-/* segment.c -- Builtins for HSAIL segment related instructions.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-#include \"workitems.h\"\n-\n-uint32_t\n-__hsail_segmentp_private (uint64_t flat_addr, PHSAWorkItem *wi)\n-{\n-  if (flat_addr == 0)\n-    return 1;\n-  else\n-    return ((void *) (uintptr_t) flat_addr >= wi->wg->private_base_ptr\n-\t    && ((void *) (uintptr_t) flat_addr\n-\t\t< (wi->wg->private_base_ptr\n-\t\t   + wi->wg->private_segment_total_size)));\n-}\n-\n-uint32_t\n-__hsail_segmentp_group (uint64_t flat_addr, PHSAWorkItem *wi)\n-{\n-  if (flat_addr == 0)\n-    return 1;\n-  else\n-    return ((void *) (uintptr_t) flat_addr >= wi->wg->group_base_ptr\n-\t    && ((void *) (uintptr_t) flat_addr\n-\t\t< (wi->wg->group_base_ptr\n-\t\t   + wi->launch_data->dp->group_segment_size)));\n-}\n-\n-uint32_t\n-__hsail_segmentp_global (uint64_t flat_addr, PHSAWorkItem *wi)\n-{\n-  return (flat_addr == 0\n-\t  || (!__hsail_segmentp_private (flat_addr, wi)\n-\t      && !__hsail_segmentp_group (flat_addr, wi)));\n-}"}, {"sha": "88af6585cab39ff72a1ba72f105ed3f5bfb66fda", "filename": "libhsail-rt/rt/workitems.c", "status": "removed", "additions": 0, "deletions": 977, "changes": 977, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fworkitems.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Frt%2Fworkitems.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Frt%2Fworkitems.c?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,977 +0,0 @@\n-/* workitems.c -- The main runtime entry that performs work-item execution in\n-   various ways and the builtin functions closely related to the\n-   implementation.\n-\n-   Copyright (C) 2015-2021 Free Software Foundation, Inc.\n-   Contributed by Pekka Jaaskelainen <pekka.jaaskelainen@parmance.com>\n-   for General Processor Tech.\n-\n-   Permission is hereby granted, free of charge, to any person obtaining a\n-   copy of this software and associated documentation files\n-   (the \"Software\"), to deal in the Software without restriction, including\n-   without limitation the rights to use, copy, modify, merge, publish,\n-   distribute, sublicense, and/or sell copies of the Software, and to\n-   permit persons to whom the Software is furnished to do so, subject to\n-   the following conditions:\n-\n-   The above copyright notice and this permission notice shall be included\n-   in all copies or substantial portions of the Software.\n-\n-   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n-   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n-   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n-   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n-   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n-   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n-   USE OR OTHER DEALINGS IN THE SOFTWARE.\n-*/\n-\n-/* The fiber based multiple work-item work-group execution uses ucontext\n-   based user mode threading.  However, if gccbrig is able to optimize the\n-   kernel to a much faster work-group function that implements the multiple\n-   WI execution using loops instead of fibers requiring slow context switches,\n-   the fiber-based implementation won't be called.\n- */\n-\n-#include <stdlib.h>\n-#include <signal.h>\n-#include <string.h>\n-\n-#include \"workitems.h\"\n-#include \"phsa-rt.h\"\n-\n-#ifdef HAVE_FIBERS\n-#include \"fibers.h\"\n-#endif\n-\n-#ifdef BENCHMARK_PHSA_RT\n-#include <stdio.h>\n-#include <time.h>\n-\n-static uint64_t wi_count = 0;\n-static uint64_t wis_skipped = 0;\n-static uint64_t wi_total = 0;\n-static clock_t start_time;\n-\n-#endif\n-\n-#ifdef DEBUG_PHSA_RT\n-#include <stdio.h>\n-#endif\n-\n-#define PRIVATE_SEGMENT_ALIGN 256\n-#define FIBER_STACK_SIZE (64*1024)\n-#define GROUP_SEGMENT_ALIGN 256\n-\n-/* Preserve this amount of additional space in the alloca stack as we need to\n-   store the alloca frame pointer to the alloca frame, thus must preserve\n-   space for it.  This thus supports at most 1024 functions with allocas in\n-   a call chain.  */\n-#define ALLOCA_OVERHEAD 1024*4\n-\n-uint32_t __hsail_workitemabsid (uint32_t dim, PHSAWorkItem *context);\n-\n-uint32_t __hsail_workitemid (uint32_t dim, PHSAWorkItem *context);\n-\n-uint32_t __hsail_gridgroups (uint32_t dim, PHSAWorkItem *context);\n-\n-uint32_t __hsail_currentworkgroupsize (uint32_t dim, PHSAWorkItem *wi);\n-\n-uint32_t __hsail_workgroupsize (uint32_t dim, PHSAWorkItem *wi);\n-\n-void\n-phsa_fatal_error (int code)\n-{\n-  exit (code);\n-}\n-\n-#ifdef HAVE_FIBERS\n-/* ucontext-based work-item thread implementation.  Runs all work-items in\n-   separate fibers.  */\n-\n-static void\n-phsa_work_item_thread (int arg0, int arg1)\n-{\n-  void *arg = fiber_int_args_to_ptr (arg0, arg1);\n-\n-  PHSAWorkItem *wi = (PHSAWorkItem *) arg;\n-  volatile PHSAWorkGroup *wg = wi->wg;\n-  PHSAKernelLaunchData *l_data = wi->launch_data;\n-\n-  do\n-    {\n-      int retcode\n-\t= fiber_barrier_reach ((fiber_barrier_t *) l_data->wg_start_barrier);\n-\n-      /* At this point the threads can assume that either more_wgs is 0 or\n-\t the current_work_group_* is set to point to the WG executed next.  */\n-      if (!wi->wg->more_wgs)\n-\tbreak;\n-\n-      wi->group_x = wg->x;\n-      wi->group_y = wg->y;\n-      wi->group_z = wg->z;\n-\n-      wi->cur_wg_size_x = __hsail_currentworkgroupsize (0, wi);\n-      wi->cur_wg_size_y = __hsail_currentworkgroupsize (1, wi);\n-      wi->cur_wg_size_z = __hsail_currentworkgroupsize (2, wi);\n-\n-#ifdef DEBUG_PHSA_RT\n-      printf (\n-\t\"Running work-item %lu/%lu/%lu for wg %lu/%lu/%lu / %lu/%lu/%lu...\\n\",\n-\twi->x, wi->y, wi->z, wi->group_x, wi->group_y, wi->group_z,\n-\tl_data->wg_max_x, l_data->wg_max_y, l_data->wg_max_z);\n-#endif\n-\n-      if (wi->x < __hsail_currentworkgroupsize (0, wi)\n-\t  && wi->y < __hsail_currentworkgroupsize (1, wi)\n-\t  && wi->z < __hsail_currentworkgroupsize (2, wi))\n-\t{\n-\t  l_data->kernel (l_data->kernarg_addr, wi, wg->group_base_ptr,\n-\t\t\t  wg->initial_group_offset, wg->private_base_ptr);\n-#ifdef DEBUG_PHSA_RT\n-\t  printf (\"done.\\n\");\n-#endif\n-#ifdef BENCHMARK_PHSA_RT\n-\t  wi_count++;\n-#endif\n-\t}\n-      else\n-\t{\n-#ifdef DEBUG_PHSA_RT\n-\t  printf (\"skipped (partial WG).\\n\");\n-#endif\n-#ifdef BENCHMARK_PHSA_RT\n-\t  wis_skipped++;\n-#endif\n-\t}\n-\n-      retcode\n-\t= fiber_barrier_reach ((fiber_barrier_t *)\n-\t\t\t       l_data->wg_completion_barrier);\n-\n-      /* The first thread updates the WG to execute next etc.  */\n-\n-      if (retcode == 0)\n-\t{\n-#ifdef EXECUTE_WGS_BACKWARDS\n-\t  if (wg->x == l_data->wg_min_x)\n-\t    {\n-\t      wg->x = l_data->wg_max_x - 1;\n-\t      if (wg->y == l_data->wg_min_y)\n-\t\t{\n-\t\t  wg->y = l_data->wg_max_y - 1;\n-\t\t  if (wg->z == l_data->wg_min_z)\n-\t\t    wg->more_wgs = 0;\n-\t\t  else\n-\t\t    wg->z--;\n-\t\t}\n-\t      else\n-\t\twg->y--;\n-\t    }\n-\t  else\n-\t    wg->x--;\n-#else\n-\t  if (wg->x + 1 >= l_data->wg_max_x)\n-\t    {\n-\t      wg->x = l_data->wg_min_x;\n-\t      if (wg->y + 1 >= l_data->wg_max_y)\n-\t\t{\n-\t\t  wg->y = l_data->wg_min_y;\n-\t\t  if (wg->z + 1 >= l_data->wg_max_z)\n-\t\t    wg->more_wgs = 0;\n-\t\t  else\n-\t\t    wg->z++;\n-\t\t}\n-\t      else\n-\t\twg->y++;\n-\t    }\n-\t  else\n-\t    wg->x++;\n-#endif\n-\t  wi->group_x = wg->x;\n-\t  wi->group_y = wg->y;\n-\t  wi->group_z = wg->z;\n-\n-\t  wi->cur_wg_size_x = __hsail_currentworkgroupsize (0, wi);\n-\t  wi->cur_wg_size_y = __hsail_currentworkgroupsize (1, wi);\n-\t  wi->cur_wg_size_z = __hsail_currentworkgroupsize (2, wi);\n-\n-\t  /* Reinitialize the work-group barrier according to the new WG's\n-\t     size, which might not be the same as the previous ones, due\n-\t     to \"partial WGs\".  */\n-\t  size_t wg_size = __hsail_currentworkgroupsize (0, wi)\n-\t\t\t   * __hsail_currentworkgroupsize (1, wi)\n-\t\t\t   * __hsail_currentworkgroupsize (2, wi);\n-\n-#ifdef DEBUG_PHSA_RT\n-\t  printf (\"Reinitializing the WG barrier to %lu.\\n\", wg_size);\n-#endif\n-\t  fiber_barrier_init ((fiber_barrier_t *)\n-\t\t\t      wi->launch_data->wg_sync_barrier,\n-\t\t\t      wg_size);\n-\n-#ifdef BENCHMARK_PHSA_RT\n-\t  if (wi_count % 1000 == 0)\n-\t    {\n-\t      clock_t spent_time = clock () - start_time;\n-\t      double spent_time_sec = (double) spent_time / CLOCKS_PER_SEC;\n-\t      double wis_per_sec = wi_count / spent_time_sec;\n-\t      uint64_t eta_sec\n-\t\t= (wi_total - wi_count - wis_skipped) / wis_per_sec;\n-\n-\t      printf (\"%lu WIs executed %lu skipped in %lus (%lu WIs/s, ETA in \"\n-\t\t      \"%lu s)\\n\",\n-\t\t      wi_count, wis_skipped, (uint64_t) spent_time_sec,\n-\t\t      (uint64_t) wis_per_sec, (uint64_t) eta_sec);\n-\t    }\n-#endif\n-\t}\n-    }\n-  while (1);\n-\n-  fiber_exit ();\n-}\n-#endif\n-\n-#define MIN(a, b) ((a < b) ? a : b)\n-#define MAX(a, b) ((a > b) ? a : b)\n-\n-#ifdef HAVE_FIBERS\n-/* Spawns a given number of work-items to execute a set of work-groups,\n-   blocks until their completion.  */\n-\n-static void\n-phsa_execute_wi_gang (PHSAKernelLaunchData *context, void *group_base_ptr,\n-\t\t      uint32_t group_local_offset, size_t wg_size_x,\n-\t\t      size_t wg_size_y, size_t wg_size_z)\n-{\n-  PHSAWorkItem *wi_threads = NULL;\n-  PHSAWorkGroup wg;\n-  size_t flat_wi_id = 0, x, y, z, max_x, max_y, max_z;\n-  uint32_t group_x, group_y, group_z;\n-  fiber_barrier_t wg_start_barrier;\n-  fiber_barrier_t wg_completion_barrier;\n-  fiber_barrier_t wg_sync_barrier;\n-\n-  max_x = wg_size_x == 0 ? 1 : wg_size_x;\n-  max_y = wg_size_y == 0 ? 1 : wg_size_y;\n-  max_z = wg_size_z == 0 ? 1 : wg_size_z;\n-\n-  size_t wg_size = max_x * max_y * max_z;\n-  if (wg_size > PHSA_MAX_WG_SIZE)\n-    phsa_fatal_error (2);\n-\n-  wg.private_segment_total_size = context->dp->private_segment_size * wg_size;\n-  if (wg.private_segment_total_size > 0\n-      && posix_memalign (&wg.private_base_ptr, PRIVATE_SEGMENT_ALIGN,\n-\t\t\t wg.private_segment_total_size)\n-\t   != 0)\n-    phsa_fatal_error (3);\n-\n-  wg.alloca_stack_p = wg.private_segment_total_size + ALLOCA_OVERHEAD;\n-  wg.alloca_frame_p = wg.alloca_stack_p;\n-  wg.initial_group_offset = group_local_offset;\n-\n-#ifdef EXECUTE_WGS_BACKWARDS\n-  group_x = context->wg_max_x - 1;\n-  group_y = context->wg_max_y - 1;\n-  group_z = context->wg_max_z - 1;\n-#else\n-  group_x = context->wg_min_x;\n-  group_y = context->wg_min_y;\n-  group_z = context->wg_min_z;\n-#endif\n-\n-  fiber_barrier_init (&wg_sync_barrier, wg_size);\n-  fiber_barrier_init (&wg_start_barrier, wg_size);\n-  fiber_barrier_init (&wg_completion_barrier, wg_size);\n-\n-  context->wg_start_barrier = &wg_start_barrier;\n-  context->wg_sync_barrier = &wg_sync_barrier;\n-  context->wg_completion_barrier = &wg_completion_barrier;\n-\n-  wg.more_wgs = 1;\n-  wg.group_base_ptr = group_base_ptr;\n-\n-#ifdef BENCHMARK_PHSA_RT\n-  wi_count = 0;\n-  wis_skipped = 0;\n-  start_time = clock ();\n-#endif\n-  wi_threads = malloc (sizeof (PHSAWorkItem) * max_x * max_y * max_z);\n-  for (x = 0; x < max_x; ++x)\n-    for (y = 0; y < max_y; ++y)\n-      for (z = 0; z < max_z; ++z)\n-\t{\n-\t  PHSAWorkItem *wi = &wi_threads[flat_wi_id];\n-\t  wi->launch_data = context;\n-\t  wi->wg = &wg;\n-\n-\t  wg.x = wi->group_x = group_x;\n-\t  wg.y = wi->group_y = group_y;\n-\t  wg.z = wi->group_z = group_z;\n-\n-\t  wi->wg_size_x = context->dp->workgroup_size_x;\n-\t  wi->wg_size_y = context->dp->workgroup_size_y;\n-\t  wi->wg_size_z = context->dp->workgroup_size_z;\n-\n-\t  wi->cur_wg_size_x = __hsail_currentworkgroupsize (0, wi);\n-\t  wi->cur_wg_size_y = __hsail_currentworkgroupsize (1, wi);\n-\t  wi->cur_wg_size_z = __hsail_currentworkgroupsize (2, wi);\n-\n-\t  wi->x = x;\n-\t  wi->y = y;\n-\t  wi->z = z;\n-\n-\t  /* TODO: set the stack size according to the private\n-\t\t   segment size.  Too big stack consumes huge amount of\n-\t\t   memory in case of huge number of WIs and a too small stack\n-\t\t   will fail in mysterious and potentially dangerous ways.  */\n-\n-\t  fiber_init (&wi->fiber, phsa_work_item_thread, wi,\n-\t\t      FIBER_STACK_SIZE, PRIVATE_SEGMENT_ALIGN);\n-\t  ++flat_wi_id;\n-\t}\n-\n-  do\n-    {\n-      --flat_wi_id;\n-      fiber_join (&wi_threads[flat_wi_id].fiber);\n-    }\n-  while (flat_wi_id > 0);\n-\n-  if (wg.private_segment_total_size > 0)\n-    free (wg.private_base_ptr);\n-\n-  free (wi_threads);\n-}\n-\n-/* Spawn the work-item threads to execute work-groups and let\n-   them execute all the WGs, including a potential partial WG.  */\n-\n-static void\n-phsa_spawn_work_items (PHSAKernelLaunchData *context, void *group_base_ptr,\n-\t\t       uint32_t group_local_offset)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = context->dp;\n-  size_t x, y, z;\n-\n-  context->group_segment_start_addr = (size_t) group_base_ptr;\n-\n-  /* HSA seems to allow the WG size to be larger than the grid size.  We need to\n-     saturate the effective WG size to the grid size to prevent the extra WIs\n-     from executing.  */\n-  size_t sat_wg_size_x, sat_wg_size_y, sat_wg_size_z, sat_wg_size;\n-  sat_wg_size_x = MIN (dp->workgroup_size_x, dp->grid_size_x);\n-  sat_wg_size_y = MIN (dp->workgroup_size_y, dp->grid_size_y);\n-  sat_wg_size_z = MIN (dp->workgroup_size_z, dp->grid_size_z);\n-  sat_wg_size = sat_wg_size_x * sat_wg_size_y * sat_wg_size_z;\n-\n-#ifdef BENCHMARK_PHSA_RT\n-  wi_total = (uint64_t) dp->grid_size_x\n-\t     * (dp->grid_size_y > 0 ? dp->grid_size_y : 1)\n-\t     * (dp->grid_size_z > 0 ? dp->grid_size_z : 1);\n-#endif\n-\n-  /* For now execute all work groups in a single coarse thread (does not utilize\n-     multicore/multithread).  */\n-  context->wg_min_x = context->wg_min_y = context->wg_min_z = 0;\n-\n-  int dims = dp->setup & 0x3;\n-\n-  context->wg_max_x = ((uint64_t) dp->grid_size_x + dp->workgroup_size_x - 1)\n-\t\t      / dp->workgroup_size_x;\n-\n-  context->wg_max_y\n-    = dims < 2 ? 1 : ((uint64_t) dp->grid_size_y + dp->workgroup_size_y - 1)\n-\t\t       / dp->workgroup_size_y;\n-\n-  context->wg_max_z\n-    = dims < 3 ? 1 : ((uint64_t) dp->grid_size_z + dp->workgroup_size_z - 1)\n-\t\t       / dp->workgroup_size_z;\n-\n-#ifdef DEBUG_PHSA_RT\n-  printf (\"### launching work-groups %lu/%lu/%lu to %lu/%lu/%lu with \"\n-\t  \"wg size %lu/%lu/%lu grid size %u/%u/%u\\n\",\n-\t  context->wg_min_x, context->wg_min_y, context->wg_min_z,\n-\t  context->wg_max_x, context->wg_max_y, context->wg_max_z,\n-\t  sat_wg_size_x, sat_wg_size_y, sat_wg_size_z, dp->grid_size_x,\n-\t  dp->grid_size_y, dp->grid_size_z);\n-#endif\n-\n-  phsa_execute_wi_gang (context, group_base_ptr, group_local_offset,\n-\t\t\tsat_wg_size_x, sat_wg_size_y, sat_wg_size_z);\n-}\n-#endif\n-\n-/* Executes the given work-group function for all work groups in the grid.\n-\n-   A work-group function is a version of the original kernel which executes\n-   the kernel for all work-items in a work-group.  It is produced by gccbrig\n-   if it can handle the kernel's barrier usage and is much faster way to\n-   execute massive numbers of work-items in a non-SPMD machine than fibers\n-   (easily 100x faster).  */\n-static void\n-phsa_execute_work_groups (PHSAKernelLaunchData *context, void *group_base_ptr,\n-\t\t\t  uint32_t group_local_offset)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = context->dp;\n-  size_t x, y, z, wg_x, wg_y, wg_z;\n-\n-  context->group_segment_start_addr = (size_t) group_base_ptr;\n-\n-  /* HSA seems to allow the WG size to be larger than the grid size.  We need\n-     to saturate the effective WG size to the grid size to prevent the extra WIs\n-     from executing.  */\n-  size_t sat_wg_size_x, sat_wg_size_y, sat_wg_size_z, sat_wg_size;\n-  sat_wg_size_x = MIN (dp->workgroup_size_x, dp->grid_size_x);\n-  sat_wg_size_y = MIN (dp->workgroup_size_y, dp->grid_size_y);\n-  sat_wg_size_z = MIN (dp->workgroup_size_z, dp->grid_size_z);\n-  sat_wg_size = sat_wg_size_x * sat_wg_size_y * sat_wg_size_z;\n-\n-#ifdef BENCHMARK_PHSA_RT\n-  wi_total = (uint64_t) dp->grid_size_x\n-\t     * (dp->grid_size_y > 0 ? dp->grid_size_y : 1)\n-\t     * (dp->grid_size_z > 0 ? dp->grid_size_z : 1);\n-#endif\n-\n-  context->wg_min_x = context->wg_min_y = context->wg_min_z = 0;\n-\n-  int dims = dp->setup & 0x3;\n-\n-  context->wg_max_x = ((uint64_t) dp->grid_size_x + dp->workgroup_size_x - 1)\n-\t\t      / dp->workgroup_size_x;\n-\n-  context->wg_max_y\n-    = dims < 2 ? 1 : ((uint64_t) dp->grid_size_y + dp->workgroup_size_y - 1)\n-\t\t       / dp->workgroup_size_y;\n-\n-  context->wg_max_z\n-    = dims < 3 ? 1 : ((uint64_t) dp->grid_size_z + dp->workgroup_size_z - 1)\n-\t\t       / dp->workgroup_size_z;\n-\n-#ifdef DEBUG_PHSA_RT\n-  printf (\"### launching work-groups %lu/%lu/%lu to %lu/%lu/%lu with \"\n-\t  \"wg size %lu/%lu/%lu grid size %u/%u/%u\\n\",\n-\t  context->wg_min_x, context->wg_min_y, context->wg_min_z,\n-\t  context->wg_max_x, context->wg_max_y, context->wg_max_z,\n-\t  sat_wg_size_x, sat_wg_size_y, sat_wg_size_z, dp->grid_size_x,\n-\t  dp->grid_size_y, dp->grid_size_z);\n-#endif\n-\n-  PHSAWorkItem wi;\n-  PHSAWorkGroup wg;\n-  wi.wg = &wg;\n-  wi.x = wi.y = wi.z = 0;\n-  wi.launch_data = context;\n-\n-#ifdef BENCHMARK_PHSA_RT\n-  start_time = clock ();\n-  uint64_t wg_count = 0;\n-#endif\n-\n-  size_t wg_size = __hsail_workgroupsize (0, &wi)\n-\t\t   * __hsail_workgroupsize (1, &wi)\n-\t\t   * __hsail_workgroupsize (2, &wi);\n-\n-  void *private_base_ptr = NULL;\n-  if (dp->private_segment_size > 0\n-      && posix_memalign (&private_base_ptr, PRIVATE_SEGMENT_ALIGN,\n-\t\t\t dp->private_segment_size * wg_size)\n-\t   != 0)\n-    phsa_fatal_error (3);\n-\n-  wg.alloca_stack_p = dp->private_segment_size * wg_size + ALLOCA_OVERHEAD;\n-  wg.alloca_frame_p = wg.alloca_stack_p;\n-\n-  wg.private_base_ptr = private_base_ptr;\n-  wg.group_base_ptr = group_base_ptr;\n-\n-#ifdef DEBUG_PHSA_RT\n-  printf (\"priv seg size %u wg_size %lu @ %p\\n\", dp->private_segment_size,\n-\t  wg_size, private_base_ptr);\n-#endif\n-\n-  for (wg_z = context->wg_min_z; wg_z < context->wg_max_z; ++wg_z)\n-    for (wg_y = context->wg_min_y; wg_y < context->wg_max_y; ++wg_y)\n-      for (wg_x = context->wg_min_x; wg_x < context->wg_max_x; ++wg_x)\n-\t{\n-\t  wi.group_x = wg_x;\n-\t  wi.group_y = wg_y;\n-\t  wi.group_z = wg_z;\n-\n-\t  wi.wg_size_x = context->dp->workgroup_size_x;\n-\t  wi.wg_size_y = context->dp->workgroup_size_y;\n-\t  wi.wg_size_z = context->dp->workgroup_size_z;\n-\n-\t  wi.cur_wg_size_x = __hsail_currentworkgroupsize (0, &wi);\n-\t  wi.cur_wg_size_y = __hsail_currentworkgroupsize (1, &wi);\n-\t  wi.cur_wg_size_z = __hsail_currentworkgroupsize (2, &wi);\n-\n-\t  context->kernel (context->kernarg_addr, &wi, group_base_ptr,\n-\t\t\t   group_local_offset, private_base_ptr);\n-\n-#if defined (BENCHMARK_PHSA_RT)\n-\t  wg_count++;\n-\t  if (wg_count % 1000000 == 0)\n-\t    {\n-\t      clock_t spent_time = clock () - start_time;\n-\t      uint64_t wi_count = wg_x * sat_wg_size_x + wg_y * sat_wg_size_y\n-\t\t\t\t  + wg_z * sat_wg_size_z;\n-\t      double spent_time_sec = (double) spent_time / CLOCKS_PER_SEC;\n-\t      double wis_per_sec = wi_count / spent_time_sec;\n-\t      uint64_t eta_sec = (wi_total - wi_count) / wis_per_sec;\n-\n-\t      printf (\"%lu WIs executed in %lus (%lu WIs/s, ETA in %lu s)\\n\",\n-\t\t      wi_count, (uint64_t) spent_time_sec,\n-\t\t      (uint64_t) wis_per_sec, (uint64_t) eta_sec);\n-\t    }\n-#endif\n-\t}\n-\n-#ifdef BENCHMARK_PHSA_RT\n-  clock_t spent_time = clock () - start_time;\n-  double spent_time_sec = (double) spent_time / CLOCKS_PER_SEC;\n-  double wis_per_sec = wi_total / spent_time_sec;\n-\n-  printf (\"### %lu WIs executed in %lu s (%lu WIs / s)\\n\", wi_total,\n-\t  (uint64_t) spent_time_sec, (uint64_t) wis_per_sec);\n-#endif\n-  free (private_base_ptr);\n-  private_base_ptr = NULL;\n-}\n-\n-/* gccbrig generates the following from each HSAIL kernel:\n-\n-   1) The actual kernel function (a single work-item kernel or a work-group\n-      function) generated from HSAIL (BRIG).\n-\n-\t static void _Kernel (void* args, void* context, void* group_base_ptr)\n-\t {\n-\t   ...\n-\t }\n-\n-  2) A public facing kernel function that is called from the PHSA runtime:\n-\n-   a) A single work-item function (that requires fibers for multi-WI):\n-\n-      void Kernel (void* context)\n-      {\n-\t __launch_launch_kernel (_Kernel, context);\n-      }\n-\n-      or\n-\n-    b) a when gccbrig could generate a work-group function:\n-\n-      void Kernel (void* context)\n-      {\n-\t\t__hsail_launch_wg_function (_Kernel, context);\n-      }\n-*/\n-\n-#ifdef HAVE_FIBERS\n-\n-void\n-__hsail_launch_kernel (gccbrigKernelFunc kernel, PHSAKernelLaunchData *context,\n-\t\t       void *group_base_ptr, uint32_t group_local_offset)\n-{\n-  context->kernel = kernel;\n-  phsa_spawn_work_items (context, group_base_ptr, group_local_offset);\n-}\n-#endif\n-\n-void\n-__hsail_launch_wg_function (gccbrigKernelFunc kernel,\n-\t\t\t    PHSAKernelLaunchData *context, void *group_base_ptr,\n-\t\t\t    uint32_t group_local_offset)\n-{\n-  context->kernel = kernel;\n-  phsa_execute_work_groups (context, group_base_ptr, group_local_offset);\n-}\n-\n-uint32_t\n-__hsail_workitemabsid (uint32_t dim, PHSAWorkItem *context)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = context->launch_data->dp;\n-\n-  uint32_t id;\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      /* Overflow semantics in the case of WG dim > grid dim.  */\n-      id = ((uint64_t) context->group_x * dp->workgroup_size_x + context->x)\n-\t   % dp->grid_size_x;\n-      break;\n-    case 1:\n-      id = ((uint64_t) context->group_y * dp->workgroup_size_y + context->y)\n-\t   % dp->grid_size_y;\n-      break;\n-    case 2:\n-      id = ((uint64_t) context->group_z * dp->workgroup_size_z + context->z)\n-\t   % dp->grid_size_z;\n-      break;\n-    }\n-  return id;\n-}\n-\n-uint64_t\n-__hsail_workitemabsid_u64 (uint32_t dim, PHSAWorkItem *context)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = context->launch_data->dp;\n-\n-  uint64_t id;\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      /* Overflow semantics in the case of WG dim > grid dim.  */\n-      id = ((uint64_t) context->group_x * dp->workgroup_size_x + context->x)\n-\t   % dp->grid_size_x;\n-      break;\n-    case 1:\n-      id = ((uint64_t) context->group_y * dp->workgroup_size_y + context->y)\n-\t   % dp->grid_size_y;\n-      break;\n-    case 2:\n-      id = ((uint64_t) context->group_z * dp->workgroup_size_z + context->z)\n-\t   % dp->grid_size_z;\n-      break;\n-    }\n-  return id;\n-}\n-\n-\n-uint32_t\n-__hsail_workitemid (uint32_t dim, PHSAWorkItem *context)\n-{\n-  PHSAWorkItem *c = (PHSAWorkItem *) context;\n-  hsa_kernel_dispatch_packet_t *dp = context->launch_data->dp;\n-\n-  /* The number of dimensions is in the two least significant bits.  */\n-  int dims = dp->setup & 0x3;\n-\n-  uint32_t id;\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      id = c->x;\n-      break;\n-    case 1:\n-      id = dims < 2 ? 0 : c->y;\n-      break;\n-    case 2:\n-      id = dims < 3 ? 0 : c->z;\n-      break;\n-    }\n-  return id;\n-}\n-\n-uint32_t\n-__hsail_gridgroups (uint32_t dim, PHSAWorkItem *context)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = context->launch_data->dp;\n-  int dims = dp->setup & 0x3;\n-\n-  uint32_t id;\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      id = (dp->grid_size_x + dp->workgroup_size_x - 1) / dp->workgroup_size_x;\n-      break;\n-    case 1:\n-      id = dims < 2 ? 1 : (dp->grid_size_y + dp->workgroup_size_y - 1)\n-\t\t\t    / dp->workgroup_size_y;\n-      break;\n-    case 2:\n-      id = dims < 3 ? 1 : (dp->grid_size_z + dp->workgroup_size_z - 1)\n-\t\t\t    / dp->workgroup_size_z;\n-      break;\n-    }\n-  return id;\n-}\n-\n-uint32_t\n-__hsail_workitemflatid (PHSAWorkItem *c)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = c->launch_data->dp;\n-\n-  return c->x + c->y * dp->workgroup_size_x\n-\t + c->z * dp->workgroup_size_x * dp->workgroup_size_y;\n-}\n-\n-uint32_t\n-__hsail_currentworkitemflatid (PHSAWorkItem *c)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = c->launch_data->dp;\n-\n-  return c->x + c->y * __hsail_currentworkgroupsize (0, c)\n-\t + c->z * __hsail_currentworkgroupsize (0, c)\n-\t     * __hsail_currentworkgroupsize (1, c);\n-}\n-\n-void\n-__hsail_setworkitemid (uint32_t dim, uint32_t id, PHSAWorkItem *context)\n-{\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      context->x = id;\n-      break;\n-    case 1:\n-      context->y = id;\n-      break;\n-    case 2:\n-      context->z = id;\n-      break;\n-    }\n-}\n-\n-uint64_t\n-__hsail_workitemflatabsid_u64 (PHSAWorkItem *context)\n-{\n-  PHSAWorkItem *c = (PHSAWorkItem *) context;\n-  hsa_kernel_dispatch_packet_t *dp = context->launch_data->dp;\n-\n-  /* Work-item flattened absolute ID = ID0 + ID1 * max0 + ID2 * max0 * max1.  */\n-  uint64_t id0 = __hsail_workitemabsid (0, context);\n-  uint64_t id1 = __hsail_workitemabsid (1, context);\n-  uint64_t id2 = __hsail_workitemabsid (2, context);\n-\n-  uint64_t max0 = dp->grid_size_x;\n-  uint64_t max1 = dp->grid_size_y;\n-  uint64_t id = id0 + id1 * max0 + id2 * max0 * max1;\n-\n-  return id;\n-}\n-\n-uint32_t\n-__hsail_workitemflatabsid_u32 (PHSAWorkItem *context)\n-{\n-  PHSAWorkItem *c = (PHSAWorkItem *) context;\n-  hsa_kernel_dispatch_packet_t *dp = context->launch_data->dp;\n-\n-  /* work-item flattened absolute ID = ID0 + ID1 * max0 + ID2 * max0 * max1.  */\n-  uint64_t id0 = __hsail_workitemabsid (0, context);\n-  uint64_t id1 = __hsail_workitemabsid (1, context);\n-  uint64_t id2 = __hsail_workitemabsid (2, context);\n-\n-  uint64_t max0 = dp->grid_size_x;\n-  uint64_t max1 = dp->grid_size_y;\n-  uint64_t id = id0 + id1 * max0 + id2 * max0 * max1;\n-  return (uint32_t) id;\n-}\n-\n-uint32_t\n-__hsail_currentworkgroupsize (uint32_t dim, PHSAWorkItem *wi)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = wi->launch_data->dp;\n-  uint32_t wg_size = 0;\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      if ((uint64_t) wi->group_x < dp->grid_size_x / dp->workgroup_size_x)\n-\twg_size = dp->workgroup_size_x; /* Full WG.  */\n-      else\n-\twg_size = dp->grid_size_x % dp->workgroup_size_x; /* Partial WG.  */\n-      break;\n-    case 1:\n-      if ((uint64_t) wi->group_y < dp->grid_size_y / dp->workgroup_size_y)\n-\twg_size = dp->workgroup_size_y; /* Full WG.  */\n-      else\n-\twg_size = dp->grid_size_y % dp->workgroup_size_y; /* Partial WG.  */\n-      break;\n-    case 2:\n-      if ((uint64_t) wi->group_z < dp->grid_size_z / dp->workgroup_size_z)\n-\twg_size = dp->workgroup_size_z; /* Full WG.  */\n-      else\n-\twg_size = dp->grid_size_z % dp->workgroup_size_z; /* Partial WG.  */\n-      break;\n-    }\n-  return wg_size;\n-}\n-\n-uint32_t\n-__hsail_workgroupsize (uint32_t dim, PHSAWorkItem *wi)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = wi->launch_data->dp;\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      return dp->workgroup_size_x;\n-    case 1:\n-      return dp->workgroup_size_y;\n-    case 2:\n-      return dp->workgroup_size_z;\n-    }\n-}\n-\n-uint32_t\n-__hsail_gridsize (uint32_t dim, PHSAWorkItem *wi)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = wi->launch_data->dp;\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      return dp->grid_size_x;\n-    case 1:\n-      return dp->grid_size_y;\n-    case 2:\n-      return dp->grid_size_z;\n-    }\n-}\n-\n-uint32_t\n-__hsail_workgroupid (uint32_t dim, PHSAWorkItem *wi)\n-{\n-  switch (dim)\n-    {\n-    default:\n-    case 0:\n-      return wi->group_x;\n-    case 1:\n-      return wi->group_y;\n-    case 2:\n-      return wi->group_z;\n-    }\n-}\n-\n-uint32_t\n-__hsail_dim (PHSAWorkItem *wi)\n-{\n-  hsa_kernel_dispatch_packet_t *dp = wi->launch_data->dp;\n-  return dp->setup & 0x3;\n-}\n-\n-uint64_t\n-__hsail_packetid (PHSAWorkItem *wi)\n-{\n-  return wi->launch_data->packet_id;\n-}\n-\n-uint32_t\n-__hsail_packetcompletionsig_sig32 (PHSAWorkItem *wi)\n-{\n-  return (uint32_t) wi->launch_data->dp->completion_signal.handle;\n-}\n-\n-uint64_t\n-__hsail_packetcompletionsig_sig64 (PHSAWorkItem *wi)\n-{\n-  return (uint64_t) (wi->launch_data->dp->completion_signal.handle);\n-}\n-\n-#ifdef HAVE_FIBERS\n-void\n-__hsail_barrier (PHSAWorkItem *wi)\n-{\n-  fiber_barrier_reach ((fiber_barrier_t *) wi->launch_data->wg_sync_barrier);\n-}\n-#endif\n-\n-/* Return a 32b private segment address that points to a dynamically\n-   allocated chunk of 'size' with 'align'.\n-\n-   Allocates the space from the end of the private segment allocated\n-   for the whole work group.  In implementations with separate private\n-   memories per WI, we will need to have a stack pointer per WI.  But in\n-   the current implementation, the segment is shared, so we possibly\n-   save some space in case all WIs do not call the alloca.\n-\n-   The \"alloca frames\" are organized as follows:\n-\n-   wg->alloca_stack_p points to the last allocated data (initially\n-   outside the private segment)\n-   wg->alloca_frame_p points to the first address _outside_ the current\n-   function's allocations (initially to the same as alloca_stack_p)\n-\n-   The data is allocated downwards from the end of the private segment.\n-\n-   In the beginning of a new function which has allocas, a new alloca\n-   frame is pushed which adds the current alloca_frame_p (the current\n-   function's frame starting point) to the top of the alloca stack and\n-   alloca_frame_p is set to the current stack position.\n-\n-   At the exit points of a function with allocas, the alloca frame\n-   is popped before returning.  This involves popping the alloca_frame_p\n-   to the one of the previous function in the call stack, and alloca_stack_p\n-   similarly, to the position of the last word alloca'd by the previous\n-   function.\n- */\n-\n-uint32_t\n-__hsail_alloca (uint32_t size, uint32_t align, PHSAWorkItem *wi)\n-{\n-  volatile PHSAWorkGroup *wg = wi->wg;\n-  int64_t new_pos = wg->alloca_stack_p - size;\n-  while (new_pos % align != 0)\n-    new_pos--;\n-  if (new_pos < 0)\n-    phsa_fatal_error (2);\n-\n-  wg->alloca_stack_p = new_pos;\n-\n-#ifdef DEBUG_ALLOCA\n-  printf (\"--- alloca (%u, %u) sp @%u fp @%u\\n\", size, align,\n-\t  wg->alloca_stack_p, wg->alloca_frame_p);\n-#endif\n-  return new_pos;\n-}\n-\n-/* Initializes a new \"alloca frame\" in the private segment.\n-   This should be called at all the function entry points in case\n-   the function contains at least one call to alloca.  */\n-\n-void\n-__hsail_alloca_push_frame (PHSAWorkItem *wi)\n-{\n-  volatile PHSAWorkGroup *wg = wi->wg;\n-\n-  /* Store the alloca_frame_p without any alignment padding so\n-     we know exactly where the previous frame ended after popping\n-     it.  */\n-#ifdef DEBUG_ALLOCA\n-  printf (\"--- push frame \");\n-#endif\n-  uint32_t last_word_offs = __hsail_alloca (4, 1, wi);\n-  memcpy (wg->private_base_ptr + last_word_offs,\n-\t  (const void *) &wg->alloca_frame_p, 4);\n-  wg->alloca_frame_p = last_word_offs;\n-\n-#ifdef DEBUG_ALLOCA\n-  printf (\"--- sp @%u fp @%u\\n\", wg->alloca_stack_p, wg->alloca_frame_p);\n-#endif\n-}\n-\n-/* Frees the current \"alloca frame\" and restores the frame\n-   pointer.\n-   This should be called at all the function return points in case\n-   the function contains at least one call to alloca.  Restores the\n-   alloca stack to the condition it was before pushing the frame\n-   the last time.  */\n-void\n-__hsail_alloca_pop_frame (PHSAWorkItem *wi)\n-{\n-  volatile PHSAWorkGroup *wg = wi->wg;\n-\n-  wg->alloca_stack_p = wg->alloca_frame_p;\n-  memcpy ((void *) &wg->alloca_frame_p,\n-\t  (const void *) (wg->private_base_ptr + wg->alloca_frame_p), 4);\n-  /* Now frame_p points to the beginning of the previous function's\n-     frame and stack_p to its end.  */\n-\n-  wg->alloca_stack_p += 4;\n-\n-#ifdef DEBUG_ALLOCA\n-  printf (\"--- pop frame sp @%u fp @%u\\n\", wg->alloca_stack_p,\n-\t  wg->alloca_frame_p);\n-#endif\n-}"}, {"sha": "28aeaf3a3e29b17b9ac3e53a1f83fedfd133a91d", "filename": "libhsail-rt/target-config.h.in", "status": "removed", "additions": 0, "deletions": 68, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Ftarget-config.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900b1c27b963c8244c7547943d4a8d03dfacc6f4/libhsail-rt%2Ftarget-config.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Ftarget-config.h.in?ref=900b1c27b963c8244c7547943d4a8d03dfacc6f4", "patch": "@@ -1,68 +0,0 @@\n-/* target-config.h.in.  Generated from configure.ac by autoheader.  */\n-\n-/* Define to 1 if you have the <dlfcn.h> header file. */\n-#undef HAVE_DLFCN_H\n-\n-/* Define to 1 if you have the <inttypes.h> header file. */\n-#undef HAVE_INTTYPES_H\n-\n-/* Define to 1 if you have the <memory.h> header file. */\n-#undef HAVE_MEMORY_H\n-\n-/* Define to 1 if you have the <stdint.h> header file. */\n-#undef HAVE_STDINT_H\n-\n-/* Define to 1 if you have the <stdlib.h> header file. */\n-#undef HAVE_STDLIB_H\n-\n-/* Define to 1 if you have the <strings.h> header file. */\n-#undef HAVE_STRINGS_H\n-\n-/* Define to 1 if you have the <string.h> header file. */\n-#undef HAVE_STRING_H\n-\n-/* Define to 1 if you have the <sys/stat.h> header file. */\n-#undef HAVE_SYS_STAT_H\n-\n-/* Define to 1 if you have the <sys/types.h> header file. */\n-#undef HAVE_SYS_TYPES_H\n-\n-/* Define to 1 if you have the <unistd.h> header file. */\n-#undef HAVE_UNISTD_H\n-\n-/* Define to the sub-directory in which libtool stores uninstalled libraries.\n-   */\n-#undef LT_OBJDIR\n-\n-/* Name of package */\n-#undef PACKAGE\n-\n-/* Define to the address where bug reports for this package should be sent. */\n-#undef PACKAGE_BUGREPORT\n-\n-/* Define to the full name of this package. */\n-#undef PACKAGE_NAME\n-\n-/* Define to the full name and version of this package. */\n-#undef PACKAGE_STRING\n-\n-/* Define to the one symbol short name of this package. */\n-#undef PACKAGE_TARNAME\n-\n-/* Define to the home page for this package. */\n-#undef PACKAGE_URL\n-\n-/* Define to the version of this package. */\n-#undef PACKAGE_VERSION\n-\n-/* The size of `int', as computed by sizeof. */\n-#undef SIZEOF_INT\n-\n-/* The size of `void*', as computed by sizeof. */\n-#undef SIZEOF_VOIDP\n-\n-/* Define to 1 if you have the ANSI C header files. */\n-#undef STDC_HEADERS\n-\n-/* Version number of package */\n-#undef VERSION"}]}