{"sha": "584e5527f93a30910ad0b8e694cae2f10e04d7ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg0ZTU1MjdmOTNhMzA5MTBhZDBiOGU2OTRjYWUyZjEwZTA0ZDdlZQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-02-03T22:38:34Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-02-03T22:38:34Z"}, "message": "iris5.h (ASM_OUTPUT_ASCII): Use mips_output_ascii to put the original string in a comment.\n\n\t* config/mips/iris5.h (ASM_OUTPUT_ASCII): Use mips_output_ascii to\n\tput the original string in a comment.\n\t* config/mips/mips-protos.h (mips_output_ascii): Add prefix argument.\n\t* config/mips/mips.c (mips_output_ascii): Likewise.\n\t* config/mips/mips.h (ASM_OUTPUT_ASCII): Adjust accordingly.\n\nFrom-SVN: r77195", "tree": {"sha": "064b7e1d5b05db94486ddee26a50d04a7f259f96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/064b7e1d5b05db94486ddee26a50d04a7f259f96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/584e5527f93a30910ad0b8e694cae2f10e04d7ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/584e5527f93a30910ad0b8e694cae2f10e04d7ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/584e5527f93a30910ad0b8e694cae2f10e04d7ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/584e5527f93a30910ad0b8e694cae2f10e04d7ee/comments", "author": null, "committer": null, "parents": [{"sha": "9b2b33751f07f30f97a0cfc1ddbff33b4e7c9e30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b2b33751f07f30f97a0cfc1ddbff33b4e7c9e30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b2b33751f07f30f97a0cfc1ddbff33b4e7c9e30"}], "stats": {"total": 28, "additions": 21, "deletions": 7}, "files": [{"sha": "c1b0859f4bf5d9472380b5339aa757af44321547", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=584e5527f93a30910ad0b8e694cae2f10e04d7ee", "patch": "@@ -1,3 +1,11 @@\n+2004-02-03  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/iris5.h (ASM_OUTPUT_ASCII): Use mips_output_ascii to\n+\tput the original string in a comment.\n+\t* config/mips/mips-protos.h (mips_output_ascii): Add prefix argument.\n+\t* config/mips/mips.c (mips_output_ascii): Likewise.\n+\t* config/mips/mips.h (ASM_OUTPUT_ASCII): Adjust accordingly.\n+\n 2004-02-03  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* system.h (GIV_SORT_CRITERION): Poison."}, {"sha": "c1edeed295d611e5883a4406b4d299ce76d1b189", "filename": "gcc/config/mips/iris5.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Firis5.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Firis5.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis5.h?ref=584e5527f93a30910ad0b8e694cae2f10e04d7ee", "patch": "@@ -193,13 +193,16 @@ Boston, MA 02111-1307, USA.  */\n #define MIPS_DEFAULT_GVALUE 0\n \n /* Some assemblers have a bug that causes backslash escaped chars in .ascii\n-   to be misassembled, so we just completely avoid it.  */\n+   to be misassembled, so avoid it by using .byte instead.  Write the original\n+   string in a comment, partly to improve readability and partly for the sake\n+   of scan-assembler-type tests.  */\n #undef ASM_OUTPUT_ASCII\n #define ASM_OUTPUT_ASCII(FILE,PTR,LEN)\t\t\t\t\\\n do {\t\t\t\t\t\t\t\t\\\n   const unsigned char *s_ = (const unsigned char *)(PTR);\t\\\n   unsigned len_ = (LEN);\t\t\t\t\t\\\n   unsigned i_;\t\t\t\t\t\t\t\\\n+  mips_output_ascii (FILE, (const char *) s_, len_, \"\\t# \");\t\\\n   for (i_ = 0; i_ < len_; s_++, i_++)\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\\\n       if ((i_ % 8) == 0)\t\t\t\t\t\\"}, {"sha": "8a55e1ac1255b70449e4468bec3c034b00fcbd2d", "filename": "gcc/config/mips/mips-protos.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Fmips-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Fmips-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-protos.h?ref=584e5527f93a30910ad0b8e694cae2f10e04d7ee", "patch": "@@ -101,7 +101,7 @@ extern void irix_output_external_libcall (rtx);\n #endif\n extern void mips_output_filename (FILE *, const char *);\n extern void mips_output_lineno (FILE *, int);\n-extern void mips_output_ascii (FILE *, const char *, size_t);\n+extern void mips_output_ascii (FILE *, const char *, size_t, const char *);\n extern void mips_output_aligned_bss (FILE *, tree, const char *,\n \t\t\t\t     unsigned HOST_WIDE_INT, int);\n extern void mips_declare_object (FILE *, const char *, const char *,"}, {"sha": "9b07a0dd64ef2184054c19d3f497c6628f399f57", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=584e5527f93a30910ad0b8e694cae2f10e04d7ee", "patch": "@@ -5816,17 +5816,20 @@ mips_output_lineno (FILE *stream, int line)\n     }\n }\n \f\n-/* Output an ASCII string, in a space-saving way.  */\n+/* Output an ASCII string, in a space-saving way.  PREFIX is the string\n+   that should be written before the opening quote, such as \"\\t.ascii\\t\"\n+   for real string data or \"\\t# \" for a comment.  */\n \n void\n-mips_output_ascii (FILE *stream, const char *string_param, size_t len)\n+mips_output_ascii (FILE *stream, const char *string_param, size_t len,\n+\t\t   const char *prefix)\n {\n   size_t i;\n   int cur_pos = 17;\n   register const unsigned char *string =\n     (const unsigned char *)string_param;\n \n-  fprintf (stream, \"\\t.ascii\\t\\\"\");\n+  fprintf (stream, \"%s\\\"\", prefix);\n   for (i = 0; i < len; i++)\n     {\n       register int c = string[i];\n@@ -5886,7 +5889,7 @@ mips_output_ascii (FILE *stream, const char *string_param, size_t len)\n       if (cur_pos > 72 && i+1 < len)\n \t{\n \t  cur_pos = 17;\n-\t  fprintf (stream, \"\\\"\\n\\t.ascii\\t\\\"\");\n+\t  fprintf (stream, \"\\\"\\n%s\\\"\", prefix);\n \t}\n     }\n   fprintf (stream, \"\\\"\\n\");"}, {"sha": "6b137e422bb8981601adb5dc4740792a40ab643d", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584e5527f93a30910ad0b8e694cae2f10e04d7ee/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=584e5527f93a30910ad0b8e694cae2f10e04d7ee", "patch": "@@ -3301,7 +3301,7 @@ do {\t\t\t\t\t\t\t\t\t\\\n /* This is how to output a string.  */\n #undef ASM_OUTPUT_ASCII\n #define ASM_OUTPUT_ASCII(STREAM, STRING, LEN)\t\t\t\t\\\n-  mips_output_ascii (STREAM, STRING, LEN)\n+  mips_output_ascii (STREAM, STRING, LEN, \"\\t.ascii\\t\")\n \n /* Output #ident as a in the read-only data section.  */\n #undef  ASM_OUTPUT_IDENT"}]}