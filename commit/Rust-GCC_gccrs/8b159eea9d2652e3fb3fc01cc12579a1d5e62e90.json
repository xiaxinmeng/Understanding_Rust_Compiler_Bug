{"sha": "8b159eea9d2652e3fb3fc01cc12579a1d5e62e90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIxNTllZWE5ZDI2NTJlM2ZiM2ZjMDFjYzEyNTc5YTFkNWU2MmU5MA==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2008-11-13T21:06:38Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2008-11-13T21:06:38Z"}, "message": "re PR libgomp/37938 (libgomp testsuite failures on ia64-linux)\n\n\tPR libgomp/37938\n\t* config/linux/ia64/mutex.h: New.\n\nFrom-SVN: r141830", "tree": {"sha": "89a71d1adeefaab1bfae0b5fce498761248fcc13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89a71d1adeefaab1bfae0b5fce498761248fcc13"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90/comments", "author": null, "committer": null, "parents": [{"sha": "2db56bbc02cebb8fd46a62776ef209f4e945ae18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2db56bbc02cebb8fd46a62776ef209f4e945ae18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2db56bbc02cebb8fd46a62776ef209f4e945ae18"}], "stats": {"total": 73, "additions": 73, "deletions": 0}, "files": [{"sha": "ed7b7a1683af831e7a003cf47850401a2b715c6c", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=8b159eea9d2652e3fb3fc01cc12579a1d5e62e90", "patch": "@@ -1,3 +1,8 @@\n+2008-11-13  Steve Ellcey  <sje@cup.hp.com>\n+\n+\tPR libgomp/37938\n+\t* config/linux/ia64/mutex.h: New.\n+\n 2008-11-04  Tobias Burnus  <burnus@net-b.de>\n \n \tPR libgomp/37935"}, {"sha": "b3c954f11dad188dbca0edd6d9d96cb95b0ec2e0", "filename": "libgomp/config/linux/ia64/mutex.h", "status": "added", "additions": 68, "deletions": 0, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90/libgomp%2Fconfig%2Flinux%2Fia64%2Fmutex.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b159eea9d2652e3fb3fc01cc12579a1d5e62e90/libgomp%2Fconfig%2Flinux%2Fia64%2Fmutex.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfig%2Flinux%2Fia64%2Fmutex.h?ref=8b159eea9d2652e3fb3fc01cc12579a1d5e62e90", "patch": "@@ -0,0 +1,68 @@\n+/* Copyright (C) 2005, 2008 Free Software Foundation, Inc.\n+   Contributed by Richard Henderson <rth@redhat.com>.\n+\n+   This file is part of the GNU OpenMP Library (libgomp).\n+\n+   Libgomp is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU Lesser General Public License as published by\n+   the Free Software Foundation; either version 2.1 of the License, or\n+   (at your option) any later version.\n+\n+   Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for\n+   more details.\n+\n+   You should have received a copy of the GNU Lesser General Public License \n+   along with libgomp; see the file COPYING.LIB.  If not, write to the\n+   Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,\n+   MA 02110-1301, USA.  */\n+\n+/* As a special exception, if you link this library with other files, some\n+   of which are compiled with GCC, to produce an executable, this library\n+   does not by itself cause the resulting executable to be covered by the\n+   GNU General Public License.  This exception does not however invalidate\n+   any other reasons why the executable file might be covered by the GNU\n+   General Public License.  */\n+\n+/* This is a Linux specific implementation of a mutex synchronization\n+   mechanism for libgomp.  This type is private to the library.  This\n+   implementation uses atomic instructions and the futex syscall.  */\n+\n+#ifndef GOMP_MUTEX_H\n+#define GOMP_MUTEX_H 1\n+\n+typedef int gomp_mutex_t;\n+\n+#define GOMP_MUTEX_INIT_0 1\n+\n+static inline void gomp_mutex_init (gomp_mutex_t *mutex)\n+{\n+  *mutex = 0;\n+}\n+\n+extern void gomp_mutex_lock_slow (gomp_mutex_t *mutex);\n+static inline void gomp_mutex_lock (gomp_mutex_t *mutex)\n+{\n+  if (!__sync_bool_compare_and_swap (mutex, 0, 1))\n+    gomp_mutex_lock_slow (mutex);\n+}\n+\n+extern void gomp_mutex_unlock_slow (gomp_mutex_t *mutex);\n+\n+/* IA64 needs a __sync_synchronize call before __sync_lock_test_and_set\n+   because __sync_lock_test_and_set is not a full memory fence.  */\n+static inline void gomp_mutex_unlock (gomp_mutex_t *mutex)\n+{\n+  int val;\n+  __sync_synchronize ();\n+  val = __sync_lock_test_and_set (mutex, 0);\n+  if (__builtin_expect (val > 1, 0))\n+    gomp_mutex_unlock_slow (mutex);\n+}\n+\n+static inline void gomp_mutex_destroy (gomp_mutex_t *mutex)\n+{\n+}\n+\n+#endif /* GOMP_MUTEX_H */"}]}