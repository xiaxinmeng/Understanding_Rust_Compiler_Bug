{"sha": "ba42c30445cef0aef15405d92361a536e12ae865", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE0MmMzMDQ0NWNlZjBhZWYxNTQwNWQ5MjM2MWE1MzZlMTJhZTg2NQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-10-07T11:56:41Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-10-07T12:06:52Z"}, "message": "c++:  Adding exception specs can changed dependentness\n\nMaking an exception variant can cause a non-dependent function type to\nbecome dependent (since c++17 eh-specs are part of the type).  The\nsame is (possibly?) true for adding a late return type.  Fixed thusly.\nMy upcoming local extern-decl changes have a test case that covers\nthis (which was how I found it).\n\n\tgcc/cp/\n\t* tree.c (build_cp_fntype_variant): Clear\n\tTYPE_DEPENDENT_P_VALID if necessary.", "tree": {"sha": "50b6985ac77c2bd6f2de178e6bc8a1e9ab8c6b7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50b6985ac77c2bd6f2de178e6bc8a1e9ab8c6b7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba42c30445cef0aef15405d92361a536e12ae865", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba42c30445cef0aef15405d92361a536e12ae865", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba42c30445cef0aef15405d92361a536e12ae865", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba42c30445cef0aef15405d92361a536e12ae865/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76136f7f0ce8f4e27ac194af6429d378360b7b41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76136f7f0ce8f4e27ac194af6429d378360b7b41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76136f7f0ce8f4e27ac194af6429d378360b7b41"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "074fa0c025e6a25a81995b10b2a2322c9d58fc3d", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba42c30445cef0aef15405d92361a536e12ae865/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba42c30445cef0aef15405d92361a536e12ae865/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=ba42c30445cef0aef15405d92361a536e12ae865", "patch": "@@ -2638,6 +2638,9 @@ build_cp_fntype_variant (tree type, cp_ref_qualifier rqual,\n \n   /* Need to build a new variant.  */\n   v = build_variant_type_copy (type);\n+  if (!TYPE_DEPENDENT_P (v))\n+    /* We no longer know that it's not type-dependent.  */\n+    TYPE_DEPENDENT_P_VALID (v) = false;\n   TYPE_RAISES_EXCEPTIONS (v) = raises;\n   TYPE_HAS_LATE_RETURN_TYPE (v) = late;\n   switch (rqual)"}]}