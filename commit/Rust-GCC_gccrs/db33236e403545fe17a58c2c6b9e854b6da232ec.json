{"sha": "db33236e403545fe17a58c2c6b9e854b6da232ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGIzMzIzNmU0MDM1NDVmZTE3YTU4YzJjNmI5ZTg1NGI2ZGEyMzJlYw==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2004-02-17T22:07:51Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2004-02-17T22:07:51Z"}, "message": "combine.c (simplify_if_then_else): Do not replace (if_then_else (ne reg 0) (0) (const_int)) by (reg) if...\n\nChangeLog:\n\n\t* combine.c (simplify_if_then_else): Do not replace\n\t(if_then_else (ne reg 0) (0) (const_int)) by (reg) if the\n\tmodes differ.\n\ntestsuite/ChangeLog:\n\n\t* gcc.dg/20040217-1.c: New test.\n\nFrom-SVN: r77988", "tree": {"sha": "89b22e8b379997542e1eaaf88a11e7c7254da0c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89b22e8b379997542e1eaaf88a11e7c7254da0c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db33236e403545fe17a58c2c6b9e854b6da232ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db33236e403545fe17a58c2c6b9e854b6da232ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db33236e403545fe17a58c2c6b9e854b6da232ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db33236e403545fe17a58c2c6b9e854b6da232ec/comments", "author": null, "committer": null, "parents": [{"sha": "e4c6167fec4df608a4ddc25e2947e14e21a77831", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4c6167fec4df608a4ddc25e2947e14e21a77831", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4c6167fec4df608a4ddc25e2947e14e21a77831"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "700cccd81c87c6dd98435f86b4279fd736661d42", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=db33236e403545fe17a58c2c6b9e854b6da232ec", "patch": "@@ -1,3 +1,9 @@\n+2004-02-17  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\t* combine.c (simplify_if_then_else): Do not replace \n+\t(if_then_else (ne reg 0) (0) (const_int)) by (reg) if the\n+\tmodes differ.\n+\n 2004-02017  Steven Bosscher  <stevenb@suse.de>\n \n \t* (c-decl.c, c-semantics.c, calls.c, cgraph.c, cgraphunit.c,"}, {"sha": "3cf8ae076f105a688d48390a34f0ac4691e4753f", "filename": "gcc/combine.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=db33236e403545fe17a58c2c6b9e854b6da232ec", "patch": "@@ -4930,6 +4930,7 @@ simplify_if_then_else (rtx x)\n   /* (IF_THEN_ELSE (NE REG 0) (0) (8)) is REG for nonzero_bits (REG) == 8.  */\n   if (true_code == NE && XEXP (cond, 1) == const0_rtx\n       && false_rtx == const0_rtx && GET_CODE (true_rtx) == CONST_INT\n+      && GET_MODE (XEXP (cond, 0)) == mode\n       && (INTVAL (true_rtx) & GET_MODE_MASK (mode))\n \t  == nonzero_bits (XEXP (cond, 0), mode)\n       && (i = exact_log2 (INTVAL (true_rtx) & GET_MODE_MASK (mode))) >= 0)"}, {"sha": "52863b0e859b881f38d8d4fa1ba5bdb471a0e870", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=db33236e403545fe17a58c2c6b9e854b6da232ec", "patch": "@@ -1,3 +1,7 @@\n+2004-02-17  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\t* gcc.dg/20040217-1.c: New test.\n+\n 2004-02-17  Zack Weinberg  <zack@codesourcery.com>\n \n \t* gcc.c-torture/execute/990208-1.x: Delete."}, {"sha": "7ca7388fe7cf5b5ad74c4b7fce1ce88007a76005", "filename": "gcc/testsuite/gcc.dg/20040217-1.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2Ftestsuite%2Fgcc.dg%2F20040217-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db33236e403545fe17a58c2c6b9e854b6da232ec/gcc%2Ftestsuite%2Fgcc.dg%2F20040217-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20040217-1.c?ref=db33236e403545fe17a58c2c6b9e854b6da232ec", "patch": "@@ -0,0 +1,19 @@\n+/* This used to ICE on s390x due to a bug in simplify_if_then_else.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+extern void use (int);\n+void test (void)\n+{\n+  union \n+   {\n+     unsigned long ul;\n+     signed char sc;\n+   } u;\n+\n+  u.sc = 8;\n+  u.sc &= 25;\n+\n+  use (u.sc);\n+}\n+"}]}