{"sha": "32988c4a989e6ebf0068eca9d890c3041baa7f3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI5ODhjNGE5ODllNmViZjAwNjhlY2E5ZDg5MGMzMDQxYmFhN2YzYg==", "commit": {"author": {"name": "Roland McGrath", "email": "roland@gcc.gnu.org", "date": "1995-07-26T12:18:04Z"}, "committer": {"name": "Roland McGrath", "email": "roland@gcc.gnu.org", "date": "1995-07-26T12:18:04Z"}, "message": "(STAGESTUFF): Add stamp-crtS.\n\n(crtbeginS.o, crtendS.o, stamp-crtS): New rules; just like crtbegin.o et\nal, but compiled using -fPIC.\n\nFrom-SVN: r10160", "tree": {"sha": "52e15412e1f559e37c37d0468f4efcbcf611ad92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52e15412e1f559e37c37d0468f4efcbcf611ad92"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32988c4a989e6ebf0068eca9d890c3041baa7f3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32988c4a989e6ebf0068eca9d890c3041baa7f3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32988c4a989e6ebf0068eca9d890c3041baa7f3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32988c4a989e6ebf0068eca9d890c3041baa7f3b/comments", "author": null, "committer": null, "parents": [{"sha": "480ae58f31f44c7369688344e15286cf3a187075", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/480ae58f31f44c7369688344e15286cf3a187075", "html_url": "https://github.com/Rust-GCC/gccrs/commit/480ae58f31f44c7369688344e15286cf3a187075"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "742775d60d8b48204c84b6d5aba882939ed3375e", "filename": "gcc/Makefile.in", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32988c4a989e6ebf0068eca9d890c3041baa7f3b/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32988c4a989e6ebf0068eca9d890c3041baa7f3b/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=32988c4a989e6ebf0068eca9d890c3041baa7f3b", "patch": "@@ -514,7 +514,7 @@ STAGESTUFF = *$(objext) insn-flags.h insn-config.h insn-codes.h \\\n  insn-attr.h insn-attrtab.c insn-opinit.c \\\n  stamp-flags stamp-config stamp-codes \\\n  stamp-output stamp-recog stamp-emit stamp-extract stamp-peep \\\n- stamp-attr stamp-attrtab stamp-opinit stamp-proto stamp-crt \\\n+ stamp-attr stamp-attrtab stamp-opinit stamp-proto stamp-crt stamp-crtS \\\n  genemit$(exeext) genoutput$(exeext) genrecog$(exeext) genextract$(exeext) \\\n  genflags$(exeext) gencodes$(exeext) genconfig$(exeext) genpeep$(exeext) \\\n  genattrtab$(exeext) genattr$(exeext) genopinit$(exeext) \\\n@@ -999,7 +999,8 @@ sublibobjc.a: cc1obj stmp-int-hdrs libgcc2.ready\n \t  GCC_CFLAGS=\"$(GCC_CFLAGS)\"\n \n # Compile two additional files that are linked with every program\n-# linked using GCC on system V, for the sake of C++ constructors.\n+# linked using GCC on systems using COFF or ELF, for the sake of C++\n+# constructors.\n crtbegin.o: stamp-crt ; @true\n crtend.o: stamp-crt; @true\n \n@@ -1013,6 +1014,21 @@ stamp-crt:\tcrtstuff.c $(GCC_PASSES) $(CONFIG_H) gbl-ctors.h\n \t  -g0 -c $(srcdir)/crtstuff.c\n \tmv crtstuff$(objext) crtend$(objext)\n \ttouch stamp-crt\n+\n+# On some systems we also want to install versions of these files\n+# compiled using PIC for use in shared libraries.\n+crtbeginS.o crtendS.o: stamp-crtS ; @true\n+\n+stamp-crtS:\tcrtstuff.c $(GCC_PASSES) $(CONFIG_H) gbl-ctors.h\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(CRTSTUFF_T_CFLAGS) \\\n+\t  -DCRT_BEGIN -finhibit-size-directive -fno-inline-functions \\\n+\t  -g0 -c $(srcdir)/crtstuff.c -fPIC\n+\tmv crtstuff$(objext) crtbeginS$(objext)\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(CRTSTUFF_T_CFLAGS) \\\n+\t  -DCRT_END -finhibit-size-directive -fno-inline-functions \\\n+\t  -g0 -c $(srcdir)/crtstuff.c -fPIC\n+\tmv crtstuff$(objext) crtendS$(objext)\n+\ttouch stamp-crtS\n \f\n # Compiling object files from source files.\n "}]}