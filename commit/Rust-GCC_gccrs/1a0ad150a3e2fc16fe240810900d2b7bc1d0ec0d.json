{"sha": "1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWEwYWQxNTBhM2UyZmMxNmZlMjQwODEwOTAwZDJiN2JjMWQwZWMwZA==", "commit": {"author": {"name": "Andi Kleen", "email": "ak@linux.intel.com", "date": "2013-04-23T03:10:16Z"}, "committer": {"name": "Andi Kleen", "email": "ak@gcc.gnu.org", "date": "2013-04-23T03:10:16Z"}, "message": "Print lto report at the right place\n\nThe LTO report is currently printed when the type merging hash tables\nare already destroyed, which makes them always show up as empty.\nPrint it earlier. Right now it's printed twice.\n\ngcc/:\n\n2013-04-22  Andi Kleen  <ak@linux.intel.com>\n\n\t* lto/lto.c (print_lto_report_1): Declare early.\n\t(read_cgraph_and_symbols): Call print_lto_report_1 early.\n\nFrom-SVN: r198173", "tree": {"sha": "137a24775822a70a771a287544196e8195585978", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/137a24775822a70a771a287544196e8195585978"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d/comments", "author": null, "committer": null, "parents": [{"sha": "057f8f20df4a1ef022ea917f4e7690b3092089c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/057f8f20df4a1ef022ea917f4e7690b3092089c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/057f8f20df4a1ef022ea917f4e7690b3092089c9"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "082dfc646050124c07ece4f34ef00e679b0e4bdf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d", "patch": "@@ -1,3 +1,8 @@\n+2013-04-22  Andi Kleen  <ak@linux.intel.com>\n+\n+\t* lto/lto.c (print_lto_report_1): Declare early.\n+\t(read_cgraph_and_symbols): Call print_lto_report_1 early.\n+\n 2013-04-22  Andi Kleen  <ak@linux.intel.com>\n \n \t* common.opt (-flto-report-wpa): Add."}, {"sha": "18af8c462175201d8047749885fef32159a92f11", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=1a0ad150a3e2fc16fe240810900d2b7bc1d0ec0d", "patch": "@@ -2895,6 +2895,8 @@ lto_flatten_files (struct lto_file_decl_data **orig, int count, int last_file_ix\n static int real_file_count;\n static GTY((length (\"real_file_count + 1\"))) struct lto_file_decl_data **real_file_decl_data;\n \n+static void print_lto_report_1 (void);\n+\n /* Read all the symbols from the input files FNAMES.  NFILES is the\n    number of files requested in the command line.  Instantiate a\n    global call graph by aggregating all the sub-graphs found in each\n@@ -2986,6 +2988,10 @@ read_cgraph_and_symbols (unsigned nfiles, const char **fnames)\n   if (resolution_file_name)\n     fclose (resolution);\n \n+  /* Show the LTO report before launching LTRANS.  */\n+  if (flag_lto_report || (flag_wpa && flag_lto_report_wpa))\n+    print_lto_report_1 ();\n+\n   /* Free gimple type merging datastructures.  */\n   htab_delete (gimple_types);\n   gimple_types = NULL;"}]}