{"sha": "136a1c15d70712b65429ca8028fb2fe2d38df501", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTM2YTFjMTVkNzA3MTJiNjU0MjljYTgwMjhmYjJmZTJkMzhkZjUwMQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-11-10T02:27:16Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-11-10T02:27:16Z"}, "message": "re PR c++/50837 ([c++0x] static_assert and constexpr in template class)\n\n/cp\n2011-11-09  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/50837\n\t* pt.c (tsubst_copy_and_build) [IDENTIFIER_NODE]: In C++11 mode\n\tpass allow_non_integral_constant_expression_p = true to\n\tfinish_id_expression.\n\n/testsuite\n2011-11-09  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/50837\n\t* g++.dg/cpp0x/static_assert5.C: New.\n\t* g++.dg/template/nontype13.C: Tweak.\n\nFrom-SVN: r181248", "tree": {"sha": "82f3953d64b0c335c589440e58ddeb6dba44ac21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82f3953d64b0c335c589440e58ddeb6dba44ac21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/136a1c15d70712b65429ca8028fb2fe2d38df501", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/136a1c15d70712b65429ca8028fb2fe2d38df501", "html_url": "https://github.com/Rust-GCC/gccrs/commit/136a1c15d70712b65429ca8028fb2fe2d38df501", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/136a1c15d70712b65429ca8028fb2fe2d38df501/comments", "author": null, "committer": null, "parents": [{"sha": "430616e7a7a321e216aeaeccc3da35aa23c0080f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/430616e7a7a321e216aeaeccc3da35aa23c0080f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/430616e7a7a321e216aeaeccc3da35aa23c0080f"}], "stats": {"total": 40, "additions": 37, "deletions": 3}, "files": [{"sha": "33bfa33403df96bc99f95d50f8931a1d674bcdf3", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=136a1c15d70712b65429ca8028fb2fe2d38df501", "patch": "@@ -1,3 +1,10 @@\n+2011-11-09  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/50837\n+\t* pt.c (tsubst_copy_and_build) [IDENTIFIER_NODE]: In C++11 mode\n+\tpass allow_non_integral_constant_expression_p = true to\n+\tfinish_id_expression.\n+\n 2011-11-09  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/50972"}, {"sha": "da5497ea5c753cac7da5fa614fba6d0f5cb4865a", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=136a1c15d70712b65429ca8028fb2fe2d38df501", "patch": "@@ -13233,7 +13233,7 @@ tsubst_copy_and_build (tree t,\n \tdecl = finish_id_expression (t, decl, NULL_TREE,\n \t\t\t\t     &idk,\n \t\t\t\t     integral_constant_expression_p,\n-\t\t\t\t     /*allow_non_integral_constant_expression_p=*/false,\n+          /*allow_non_integral_constant_expression_p=*/(cxx_dialect >= cxx0x),\n \t\t\t\t     &non_integral_constant_expression_p,\n \t\t\t\t     /*template_p=*/false,\n \t\t\t\t     /*done=*/true,"}, {"sha": "c5004a413909fae6a232f0c354121f575be18744", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=136a1c15d70712b65429ca8028fb2fe2d38df501", "patch": "@@ -1,3 +1,9 @@\n+2011-11-09  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/50837\n+\t* g++.dg/cpp0x/static_assert5.C: New.\n+\t* g++.dg/template/nontype13.C: Tweak.\n+\n 2011-11-09  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/50972\n@@ -25,7 +31,7 @@\n \n 2011-11-09  Patrick Marlier  <patrick.marlier@gmail.com>\n \n-\t* gcc.dg/tm/memopt-1.c:  Adjust regexp. \n+\t* gcc.dg/tm/memopt-1.c:  Adjust regexp.\n \n 2011-11-09  Jason Merrill  <jason@redhat.com>\n "}, {"sha": "b918796220cc0b7e3925358a3fa2100813a6b0c6", "filename": "gcc/testsuite/g++.dg/cpp0x/static_assert5.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fstatic_assert5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fstatic_assert5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fstatic_assert5.C?ref=136a1c15d70712b65429ca8028fb2fe2d38df501", "patch": "@@ -0,0 +1,21 @@\n+// PR c++/50837\n+// { dg-options \"-std=c++0x\" }\n+\n+template<class T>\n+struct z\n+{\n+  static constexpr bool test_constexpr()\n+  {\n+    return true;\n+  }\n+\n+  static void test()\n+  {\n+    static_assert(test_constexpr(), \"test1\");\n+  }\n+};\n+\n+int main()\n+{\n+  z<int>::test();\n+}"}, {"sha": "d604da9445416b6d87e71a7e3e0b7c04b3657694", "filename": "gcc/testsuite/g++.dg/template/nontype13.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fnontype13.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/136a1c15d70712b65429ca8028fb2fe2d38df501/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fnontype13.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fnontype13.C?ref=136a1c15d70712b65429ca8028fb2fe2d38df501", "patch": "@@ -11,7 +11,7 @@ struct Dummy\n   template<bool B>\n   void tester()\n   {\n-    bar<evil>()(); // { dg-error \"constant\" }\n+    bar<evil>()(); // { dg-error \"constant|template\" }\n   }\n   template<bool B>\n   struct bar"}]}