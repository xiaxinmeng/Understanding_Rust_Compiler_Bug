{"sha": "26b3e568a60e9fd851efb436531752a5e49e6419", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjZiM2U1NjhhNjBlOWZkODUxZWZiNDM2NTMxNzUyYTVlNDllNjQxOQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-03-23T10:39:49Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-03-23T10:39:49Z"}, "message": "[PR94044] Fix ICE with sizeof<argumentpack>\n\nThanks to Jim for figuring out how to reproduce the problem, I was\nable to apply pr94044-jig.diff to poorly hash the specialization\ntable. (That places all the specializations of a particular template\nin the same bucket, forcing us to compare the arguments.)\n\nThe testcase creates sizeof_exprs containing argument packs, and we\ncan no longer use same_type_p on those.\n\n\tPR c++/94044\n\t* tree.c (cp_tree_equal) [SIZEOF_EXPR]: Detect argument pack\n\toperand.", "tree": {"sha": "f358753890093dc116d3fca84127d00863278378", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f358753890093dc116d3fca84127d00863278378"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26b3e568a60e9fd851efb436531752a5e49e6419", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26b3e568a60e9fd851efb436531752a5e49e6419", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26b3e568a60e9fd851efb436531752a5e49e6419", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26b3e568a60e9fd851efb436531752a5e49e6419/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a2090b04e54ffccc64ad2dfd5b46eb4bb8ce482", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a2090b04e54ffccc64ad2dfd5b46eb4bb8ce482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a2090b04e54ffccc64ad2dfd5b46eb4bb8ce482"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "3340f47d506406fa09b4eb8228aa5ef3c035adb0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26b3e568a60e9fd851efb436531752a5e49e6419/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26b3e568a60e9fd851efb436531752a5e49e6419/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=26b3e568a60e9fd851efb436531752a5e49e6419", "patch": "@@ -1,3 +1,9 @@\n+2020-03-23  nathans  <nathan@acm.org>\n+\n+\tPR c++/94044\n+\t* tree.c (cp_tree_equal) [SIZEOF_EXPR]: Detect argument pack\n+\toperand.\n+\n 2020-03-21  Patrick Palka  <ppalka@redhat.com>\n \n \tPR c++/94066"}, {"sha": "b85967e1bfab63e0ddc187d7f5778653ff68173f", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26b3e568a60e9fd851efb436531752a5e49e6419/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26b3e568a60e9fd851efb436531752a5e49e6419/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=26b3e568a60e9fd851efb436531752a5e49e6419", "patch": "@@ -3802,9 +3802,13 @@ cp_tree_equal (tree t1, tree t2)\n \t    if (SIZEOF_EXPR_TYPE_P (t2))\n \t      o2 = TREE_TYPE (o2);\n \t  }\n+\n \tif (TREE_CODE (o1) != TREE_CODE (o2))\n \t  return false;\n-\tif (TYPE_P (o1))\n+\n+\tif (ARGUMENT_PACK_P (o1))\n+\t  return template_args_equal (o1, o2);\n+\telse if (TYPE_P (o1))\n \t  return same_type_p (o1, o2);\n \telse\n \t  return cp_tree_equal (o1, o2);"}]}