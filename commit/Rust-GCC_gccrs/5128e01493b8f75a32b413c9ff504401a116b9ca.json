{"sha": "5128e01493b8f75a32b413c9ff504401a116b9ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTEyOGUwMTQ5M2I4Zjc1YTMyYjQxM2M5ZmY1MDQ0MDFhMTE2YjljYQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2012-12-06T14:36:55Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2012-12-06T14:36:55Z"}, "message": "re PR c++/55564 (internal error using decltype of a template type parameter for late-specified function result type)\n\n\tPR c++/55564\n\t* pt.c (unify) [ARRAY_TYPE]: Unify the element type before the bounds.\n\nFrom-SVN: r194248", "tree": {"sha": "97e761a9c4c402a66ef11fbffd1bd5d2b18e85ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97e761a9c4c402a66ef11fbffd1bd5d2b18e85ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5128e01493b8f75a32b413c9ff504401a116b9ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5128e01493b8f75a32b413c9ff504401a116b9ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5128e01493b8f75a32b413c9ff504401a116b9ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5128e01493b8f75a32b413c9ff504401a116b9ca/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "37376165bef26d983aa60dc02be6a745d43ed168", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37376165bef26d983aa60dc02be6a745d43ed168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37376165bef26d983aa60dc02be6a745d43ed168"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "917f3e95a94bbbb1eb2334a097e074501759d5aa", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128e01493b8f75a32b413c9ff504401a116b9ca/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128e01493b8f75a32b413c9ff504401a116b9ca/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5128e01493b8f75a32b413c9ff504401a116b9ca", "patch": "@@ -1,3 +1,8 @@\n+2012-12-06  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/55564\n+\t* pt.c (unify) [ARRAY_TYPE]: Unify the element type before the bounds.\n+\n 2012-12-03  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/54170"}, {"sha": "27084a23598e3de5f2a9e8b38d49f54a47f292be", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128e01493b8f75a32b413c9ff504401a116b9ca/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128e01493b8f75a32b413c9ff504401a116b9ca/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=5128e01493b8f75a32b413c9ff504401a116b9ca", "patch": "@@ -16593,6 +16593,8 @@ unify (tree tparms, tree targs, tree parm, tree arg, int strict,\n       if ((TYPE_DOMAIN (parm) == NULL_TREE)\n \t  != (TYPE_DOMAIN (arg) == NULL_TREE))\n \treturn unify_type_mismatch (explain_p, parm, arg);\n+      RECUR_AND_CHECK_FAILURE (tparms, targs, TREE_TYPE (parm), TREE_TYPE (arg),\n+\t\t\t       strict & UNIFY_ALLOW_MORE_CV_QUAL, explain_p);\n       if (TYPE_DOMAIN (parm) != NULL_TREE)\n \t{\n \t  tree parm_max;\n@@ -16651,8 +16653,7 @@ unify (tree tparms, tree targs, tree parm, tree arg, int strict,\n \t  RECUR_AND_CHECK_FAILURE (tparms, targs, parm_max, arg_max,\n \t\t\t\t   UNIFY_ALLOW_INTEGER, explain_p);\n \t}\n-      return unify (tparms, targs, TREE_TYPE (parm), TREE_TYPE (arg),\n-\t\t    strict & UNIFY_ALLOW_MORE_CV_QUAL, explain_p);\n+      return unify_success (explain_p);\n \n     case REAL_TYPE:\n     case COMPLEX_TYPE:"}, {"sha": "8e2abaa679916fb085bf6de4346adcc94da57fb7", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype47.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128e01493b8f75a32b413c9ff504401a116b9ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype47.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128e01493b8f75a32b413c9ff504401a116b9ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype47.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype47.C?ref=5128e01493b8f75a32b413c9ff504401a116b9ca", "patch": "@@ -0,0 +1,12 @@\n+// PR c++/55564\n+// { dg-options -std=c++11 }\n+\n+template <typename T, decltype(sizeof(T)) N>\n+auto array_size(T(&)[N]) -> decltype(N) { return N; }\n+\n+int main() {\n+  int simple[4] = {};\n+  int result =  array_size(simple);\n+\n+  return result;\n+}"}]}