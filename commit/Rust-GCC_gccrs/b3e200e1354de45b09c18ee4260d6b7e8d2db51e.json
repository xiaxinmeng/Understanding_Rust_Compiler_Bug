{"sha": "b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNlMjAwZTEzNTRkZTQ1YjA5YzE4ZWU0MjYwZDZiN2U4ZDJkYjUxZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-07-31T07:59:18Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-07-31T07:59:18Z"}, "message": "re PR preprocessor/36649 (-H option doesn't work as expected)\n\n\tPR preprocessor/36649\n\t* c-pch.c (c_common_read_pch): Save and restore\n\tline_table->trace_includes across PCH restore.\n\n\t* gcc.dg/pch/cpp-3.c: New test.\n\t* gcc.dg/pch/cpp-3.hs: New file.\n\t* gcc.dg/pch/cpp-3a.h: New file.\n\t* gcc.dg/pch/cpp-3b.h: New file.\n\nFrom-SVN: r138360", "tree": {"sha": "434e7706c89f9b173975a8006a41288a3516ae87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/434e7706c89f9b173975a8006a41288a3516ae87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/comments", "author": null, "committer": null, "parents": [{"sha": "035b2a77778b299d14841ea162974615d111153e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/035b2a77778b299d14841ea162974615d111153e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/035b2a77778b299d14841ea162974615d111153e"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "57a4f1640ab15e6092813fd22f8bac564b316fa1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "patch": "@@ -1,3 +1,9 @@\n+2008-07-31  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR preprocessor/36649\n+\t* c-pch.c (c_common_read_pch): Save and restore\n+\tline_table->trace_includes across PCH restore.\n+\n 2008-07-30  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR ada/36554\n@@ -6,7 +12,7 @@\n 2008-07-30  Rafael Avila de Espindola  <espindola@google.com>\n \n \tPR 36974\n-\t* final.c (call_from_call_insn): Handle COND_EXEC\n+\t* final.c (call_from_call_insn): Handle COND_EXEC.\n \n 2008-07-30  H.J. Lu  <hongjiu.lu@intel.com>\n "}, {"sha": "520b866e30df2ff53046a0c1ee6344d9fa10b197", "filename": "gcc/c-pch.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Fc-pch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Fc-pch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-pch.c?ref=b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "patch": "@@ -367,6 +367,7 @@ c_common_read_pch (cpp_reader *pfile, const char *name,\n   struct c_pch_header h;\n   struct save_macro_data *smd;\n   expanded_location saved_loc;\n+  bool saved_trace_includes;\n \n   f = fdopen (fd, \"rb\");\n   if (f == NULL)\n@@ -412,6 +413,7 @@ c_common_read_pch (cpp_reader *pfile, const char *name,\n \n   /* Save the location and then restore it after reading the PCH.  */\n   saved_loc = expand_location (line_table->highest_line);\n+  saved_trace_includes = line_table->trace_includes;\n \n   cpp_prepare_state (pfile, &smd);\n \n@@ -425,6 +427,7 @@ c_common_read_pch (cpp_reader *pfile, const char *name,\n \n   fclose (f);\n \n+  line_table->trace_includes = saved_trace_includes;\n   cpp_set_line_map (pfile, line_table);\n   linemap_add (line_table, LC_RENAME, 0, saved_loc.file, saved_loc.line);\n "}, {"sha": "8534f8c1a271e3f57ef8f2128f0e33f7f3f36fd4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "patch": "@@ -1,3 +1,8 @@\n+2008-07-31  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/36278\n+\t* g++.dg/debug/namespace2.C: New test.\n+\n 2008-07-30  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/boolean_expr.ad[sb]: New test."}, {"sha": "25b5ca4077ff97c3b671097036115ebdc10277a9", "filename": "gcc/testsuite/gcc.dg/pch/cpp-3.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3.c?ref=b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "patch": "@@ -0,0 +1,13 @@\n+/* PR preprocessor/36649 */\n+/* { dg-do compile } */\n+/* { dg-options \"-H -I.\" } */\n+/* { dg-message \"cpp-3.h\\[^\\n\\]*(\\n\\[^\\n\\]*cpp-3.c)?\\n\\[^\\n\\]*cpp-3a.h\\n\\[^\\n\\]*cpp-3b.h\" \"\" { target *-*-* } 0 } */\n+\n+#include \"cpp-3.h\"\n+#include \"cpp-3a.h\"\n+\n+int\n+main (void)\n+{\n+  return 0;\n+}"}, {"sha": "40a8c178f10d9e85a2873c83247c3f2fe553f408", "filename": "gcc/testsuite/gcc.dg/pch/cpp-3.hs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3.hs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3.hs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3.hs?ref=b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "patch": "@@ -0,0 +1 @@\n+/* empty */"}, {"sha": "2cc9fd2f9a5ea4cc456b1a07e920a0f347da8db4", "filename": "gcc/testsuite/gcc.dg/pch/cpp-3a.h", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3a.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3a.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3a.h?ref=b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "patch": "@@ -0,0 +1 @@\n+#include \"cpp-3b.h\""}, {"sha": "40a8c178f10d9e85a2873c83247c3f2fe553f408", "filename": "gcc/testsuite/gcc.dg/pch/cpp-3b.h", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3b.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e200e1354de45b09c18ee4260d6b7e8d2db51e/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3b.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fcpp-3b.h?ref=b3e200e1354de45b09c18ee4260d6b7e8d2db51e", "patch": "@@ -0,0 +1 @@\n+/* empty */"}]}