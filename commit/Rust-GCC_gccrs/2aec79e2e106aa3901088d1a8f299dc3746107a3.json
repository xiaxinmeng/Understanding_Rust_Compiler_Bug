{"sha": "2aec79e2e106aa3901088d1a8f299dc3746107a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFlYzc5ZTJlMTA2YWEzOTAxMDg4ZDFhOGYyOTlkYzM3NDYxMDdhMw==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1995-05-13T01:51:10Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1995-05-13T01:51:10Z"}, "message": "(find_basic_blocks): Only perform n_basic_blocks sanity check on first pass...\n\n(find_basic_blocks): Only perform n_basic_blocks sanity\ncheck on first pass, and on second pass ensure it has the correct value.\n\nFrom-SVN: r9671", "tree": {"sha": "23e8a241fe09d6c61b3154ffe7fd3575f9fd4794", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23e8a241fe09d6c61b3154ffe7fd3575f9fd4794"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2aec79e2e106aa3901088d1a8f299dc3746107a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aec79e2e106aa3901088d1a8f299dc3746107a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2aec79e2e106aa3901088d1a8f299dc3746107a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aec79e2e106aa3901088d1a8f299dc3746107a3/comments", "author": null, "committer": null, "parents": [{"sha": "64c01f8071113aff84414204e9d63cff3701bfb7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64c01f8071113aff84414204e9d63cff3701bfb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64c01f8071113aff84414204e9d63cff3701bfb7"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "d7467e5bb1e6348e226e52356bac45851e3a69bd", "filename": "gcc/flow.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aec79e2e106aa3901088d1a8f299dc3746107a3/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aec79e2e106aa3901088d1a8f299dc3746107a3/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=2aec79e2e106aa3901088d1a8f299dc3746107a3", "patch": "@@ -485,8 +485,12 @@ find_basic_blocks (f, nonlocal_label_list)\n \tprev_code = code;\n     }\n \n-  if (i + 1 != n_basic_blocks)\n+  /* During the second pass, `n_basic_blocks' is only an upper bound.\n+     Only perform the sanity check for the first pass, and on the second\n+     pass ensure `n_basic_blocks' is set to the correct value.  */\n+  if (pass == 1 && i + 1 != n_basic_blocks)\n     abort ();\n+  n_basic_blocks = i + 1;\n \n   /* Don't delete the labels (in this function)\n      that are referenced by non-jump instructions.  */\n@@ -743,6 +747,10 @@ find_basic_blocks (f, nonlocal_label_list)\n \t{\n \t  pass++;\n \t  n_basic_blocks -= deleted;\n+\t  /* `n_basic_blocks' may not be correct at this point: two previously\n+\t     separate blocks may now be merged.  That's ok though as we\n+\t     recalculate it during the second pass.  It certainly can't be\n+\t     any larger than the current value.  */\n \t  goto restart;\n \t}\n     }"}]}