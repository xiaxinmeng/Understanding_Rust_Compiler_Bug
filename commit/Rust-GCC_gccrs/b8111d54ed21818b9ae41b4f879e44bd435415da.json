{"sha": "b8111d54ed21818b9ae41b4f879e44bd435415da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjgxMTFkNTRlZDIxODE4YjlhZTQxYjRmODc5ZTQ0YmQ0MzU0MTVkYQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb.gcc@gmail.com", "date": "2007-11-26T12:15:02Z"}, "committer": {"name": "Revital Eres", "email": "revitale@gcc.gnu.org", "date": "2007-11-26T12:15:02Z"}, "message": "re PR rtl-optimization/34085 (ICE with -freorder-blocks-and-partition)\n\nFix PR rtl-optimization/34085\n\nCo-Authored-By: Revital Eres <eres@il.ibm.com>\n\nFrom-SVN: r130435", "tree": {"sha": "8e512b9e4e6a3b1209dbef4e1921d3c247a4d37c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e512b9e4e6a3b1209dbef4e1921d3c247a4d37c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b8111d54ed21818b9ae41b4f879e44bd435415da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8111d54ed21818b9ae41b4f879e44bd435415da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8111d54ed21818b9ae41b4f879e44bd435415da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8111d54ed21818b9ae41b4f879e44bd435415da/comments", "author": null, "committer": null, "parents": [{"sha": "128d8f68ab2497d74f3b128b1e04a5e03956b45d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/128d8f68ab2497d74f3b128b1e04a5e03956b45d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/128d8f68ab2497d74f3b128b1e04a5e03956b45d"}], "stats": {"total": 55, "additions": 55, "deletions": 0}, "files": [{"sha": "4a6466c988ecb34ceeaede3aa0c1f01ce284f734", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b8111d54ed21818b9ae41b4f879e44bd435415da", "patch": "@@ -1,3 +1,10 @@\n+2007-11-26  Steven Bosscher  <stevenb.gcc@gmail.com> \n+\t    Revital Eres  <eres@il.ibm.com> \n+\n+\tPR middle-end/34085\n+\t* bb-reorder.c (insert_section_boundary_note): Clear\n+\tBLOCK_FOR_INSN in NOTE_INSN_SWITCH_TEXT_SECTIONS.\n+\n 2007-11-26  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \t* config/mips/elfoabi.h (DRIVER_SELF_SPECS): Add missing comma."}, {"sha": "e997dc62b333b5cea4dbc92f43e1143c9e6cde9b", "filename": "gcc/bb-reorder.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2Fbb-reorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2Fbb-reorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbb-reorder.c?ref=b8111d54ed21818b9ae41b4f879e44bd435415da", "patch": "@@ -1947,6 +1947,9 @@ insert_section_boundary_note (void)\n \t{\n \t  new_note = emit_note_before (NOTE_INSN_SWITCH_TEXT_SECTIONS,\n \t\t\t\t       BB_HEAD (bb));\n+\t  /* ??? This kind of note always lives between basic blocks,\n+\t     but add_insn_before will set BLOCK_FOR_INSN anyway.  */\n+\t  BLOCK_FOR_INSN (new_note) = NULL;\n \t  break;\n \t}\n     }"}, {"sha": "cb45e6e8c172523484c8d2c29f30817a43b06c6d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b8111d54ed21818b9ae41b4f879e44bd435415da", "patch": "@@ -1,3 +1,9 @@\n+2007-11-26  Steven Bosscher  <stevenb.gcc@gmail.com>\n+\t    Revital Eres  <eres@il.ibm.com>\n+\n+\tPR rtl-optimization/34085\n+\t* gcc.dg/tree-prof (bb-reorg.c): New test.\n+\n 2007-11-26  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \t* lib/target-supports.exp (check_effective_target_mips_soft_float):"}, {"sha": "f850c9bfd1e144b3834a88556facd896bd3be13e", "filename": "gcc/testsuite/gcc.dg/tree-prof/bb-reorg.c", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Fbb-reorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8111d54ed21818b9ae41b4f879e44bd435415da/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Fbb-reorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Fbb-reorg.c?ref=b8111d54ed21818b9ae41b4f879e44bd435415da", "patch": "@@ -0,0 +1,39 @@\n+/* { dg-require-effective-target freorder } */\n+/* { dg-options \"-O2 -freorder-blocks-and-partition\" } */\n+\n+#include <string.h>\n+\n+#define SIZE 1000\n+int t0 = 0;\n+const char *t2[SIZE];\n+char buf[SIZE];\n+\n+void\n+foo (void)\n+{\n+  char *s = buf;\n+  t0 = 1;\n+\n+  for (;;)\n+    {\n+      if (*s == '\\0')\n+\tbreak;\n+      else\n+\t{\n+\t  t2[t0] = s;\n+\t  t0++;\n+\t}\n+      *s++ = '\\0';\n+    }\n+  t2[t0] = NULL;\n+}\n+\n+\n+int\n+main ()\n+{\n+  strcpy (buf, \"hello\");\n+  foo ();\n+  return 0; \n+}\n+"}]}