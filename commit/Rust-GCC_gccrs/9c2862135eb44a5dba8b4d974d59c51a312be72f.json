{"sha": "9c2862135eb44a5dba8b4d974d59c51a312be72f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWMyODYyMTM1ZWI0NGE1ZGJhOGI0ZDk3NGQ1OWM1MWEzMTJiZTcyZg==", "commit": {"author": {"name": "Matt Kraai", "email": "kraai@gcc.gnu.org", "date": "2003-07-03T21:49:54Z"}, "committer": {"name": "Matt Kraai", "email": "kraai@gcc.gnu.org", "date": "2003-07-03T21:49:54Z"}, "message": "misc.c (gnat_argv): Revert last change.\n\n\t* misc.c (gnat_argv): Revert last change.\n\t(gnat_handle_option, gnat_init_options): Copy arguments.\n\nFrom-SVN: r68904", "tree": {"sha": "01537e5524663e8048e83abb22e9d1c74a9444e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01537e5524663e8048e83abb22e9d1c74a9444e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c2862135eb44a5dba8b4d974d59c51a312be72f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c2862135eb44a5dba8b4d974d59c51a312be72f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c2862135eb44a5dba8b4d974d59c51a312be72f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c2862135eb44a5dba8b4d974d59c51a312be72f/comments", "author": null, "committer": null, "parents": [{"sha": "0a9530a9d7cf389493916027f9980fcbf028b602", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a9530a9d7cf389493916027f9980fcbf028b602", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a9530a9d7cf389493916027f9980fcbf028b602"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "ca6573c44fdc9a4156254162f72963d68b86e993", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c2862135eb44a5dba8b4d974d59c51a312be72f/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c2862135eb44a5dba8b4d974d59c51a312be72f/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=9c2862135eb44a5dba8b4d974d59c51a312be72f", "patch": "@@ -1,6 +1,11 @@\n+2003-07-04  Matt Kraai  <kraai@alumni.cmu.edu>\n+\n+\t* misc.c (gnat_argv): Revert last change.\n+\t(gnat_handle_option, gnat_init_options): Copy arguments.\n+\n 2003-07-03  Neil Booth  <neil@daikokuya.co.uk>\n \n-\t* misc.c (save_argv): Make const.\n+\t* misc.c (gnat_argv): Make const.\n \n 2003-07-02  Neil Booth  <neil@daikokuya.co.uk>\n "}, {"sha": "ca9a036149256915ec68c15c83d4c6e7e39d7211", "filename": "gcc/ada/misc.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c2862135eb44a5dba8b4d974d59c51a312be72f/gcc%2Fada%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c2862135eb44a5dba8b4d974d59c51a312be72f/gcc%2Fada%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmisc.c?ref=9c2862135eb44a5dba8b4d974d59c51a312be72f", "patch": "@@ -186,7 +186,7 @@ const char **save_argv;\n /* gnat standard argc argv */\n \n extern int gnat_argc;\n-extern const char **gnat_argv;\n+extern char **gnat_argv;\n \n static void internal_error_function\tPARAMS ((const char *, va_list *));\n static void gnat_adjust_rli\t\tPARAMS ((record_layout_info));\n@@ -269,7 +269,7 @@ gnat_handle_option (size_t scode, const char *arg, int value ATTRIBUTE_UNUSED)\n \t    if (save_argv[++i][0] != '-')\n \t      {\n \t\t/* Preserve output filename as GCC doesn't save it for GNAT. */\n-\t\tgnat_argv[gnat_argc] = save_argv[i];\n+\t\tgnat_argv[gnat_argc] = xstrdup (save_argv[i]);\n \t\tgnat_argc++;\n \t\tbreak;\n \t      }\n@@ -286,7 +286,7 @@ gnat_init_options (unsigned int argc, const char **argv)\n {\n   /* Initialize gnat_argv with save_argv size.  */\n   gnat_argv = (char **) xmalloc ((argc + 1) * sizeof (argv[0])); \n-  gnat_argv[0] = argv[0];     /* name of the command */ \n+  gnat_argv[0] = xstrdup (argv[0]);     /* name of the command */ \n   gnat_argc = 1;\n \n   save_argc = argc;"}]}