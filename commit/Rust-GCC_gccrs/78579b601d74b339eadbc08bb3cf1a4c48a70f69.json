{"sha": "78579b601d74b339eadbc08bb3cf1a4c48a70f69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg1NzliNjAxZDc0YjMzOWVhZGJjMDhiYjNjZjFhNGM0OGE3MGY2OQ==", "commit": {"author": {"name": "Bud Davis", "email": "bdavis9659@comcast.net", "date": "2004-12-02T04:29:00Z"}, "committer": {"name": "Bud Davis", "email": "bdavis@gcc.gnu.org", "date": "2004-12-02T04:29:00Z"}, "message": "re PR libfortran/18284 (BACKSPACE broken)\n\n2004-12-02  Bud Davis  <bdavis9659@comcast.net>\n\n        PR libfortran/18284\n        * io/unix.c (fd_alloc_w_at): Update file_length when extending.\n        * io/backspace.c (formatted_backspace): Reset endfile after backspace.\n\n        PR fortran/18284\n        * gfortran.dg/backspace.f90\n\nFrom-SVN: r91612", "tree": {"sha": "745d1aebc5887dc0f235b340b7d4bbafb28bbc61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/745d1aebc5887dc0f235b340b7d4bbafb28bbc61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/78579b601d74b339eadbc08bb3cf1a4c48a70f69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78579b601d74b339eadbc08bb3cf1a4c48a70f69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78579b601d74b339eadbc08bb3cf1a4c48a70f69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78579b601d74b339eadbc08bb3cf1a4c48a70f69/comments", "author": null, "committer": null, "parents": [{"sha": "f177a087002cef5c40eab070151d6dee4e39d346", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f177a087002cef5c40eab070151d6dee4e39d346", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f177a087002cef5c40eab070151d6dee4e39d346"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "da801f07a69b34cf37f26b1f9500bafdd3519c41", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78579b601d74b339eadbc08bb3cf1a4c48a70f69/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78579b601d74b339eadbc08bb3cf1a4c48a70f69/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=78579b601d74b339eadbc08bb3cf1a4c48a70f69", "patch": "@@ -1,3 +1,8 @@\n+2004-12-02  Bud Davis  <bdavis9659@comcast.net>\n+\n+\tPR fortran/18284\n+\t* gfortran.dg/backspace.f90\n+\n 2004-12-02  Bud Davis  <bdavis9659@comcast.net>\n \n \t* gfortran.dg/inquire.f90: New test."}, {"sha": "4f0b9e975d63100c43d642e4c92c23695fe33054", "filename": "gcc/testsuite/gfortran.dg/backspace.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78579b601d74b339eadbc08bb3cf1a4c48a70f69/gcc%2Ftestsuite%2Fgfortran.dg%2Fbackspace.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78579b601d74b339eadbc08bb3cf1a4c48a70f69/gcc%2Ftestsuite%2Fgfortran.dg%2Fbackspace.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fbackspace.f90?ref=78579b601d74b339eadbc08bb3cf1a4c48a70f69", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do run }\n+!pr18284 BACKSPACE broken\n+       open(unit=10,access='SEQUENTIAL',status='SCRATCH')\n+       do I = 1,200\n+         write(10,*)I\n+       end do\n+       backspace(10)\n+       backspace(10)\n+       read(10,*)I\n+       if (I.NE.199) call abort\n+       end"}, {"sha": "a0b3ec12cf45ea023fd45958a9766c4ae49214b6", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78579b601d74b339eadbc08bb3cf1a4c48a70f69/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78579b601d74b339eadbc08bb3cf1a4c48a70f69/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=78579b601d74b339eadbc08bb3cf1a4c48a70f69", "patch": "@@ -1,3 +1,9 @@\n+2004-12-02  Bud Davis  <bdavis9659@comcast.net>\n+\n+\tPR libfortran/18284\n+\t* io/unix.c (fd_alloc_w_at): Update file_length when extending.\n+\t* io/backspace.c (formatted_backspace): Reset endfile after backspace.\n+\n 2004-12-02  Bud Davis  <bdavis9659@comcast.net>\n \n \t* io/inquire.c (inquire_via_unit): do not allow a direct access"}, {"sha": "e378adf90e673ec296ea18cc478bf3842a2e0863", "filename": "libgfortran/io/backspace.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78579b601d74b339eadbc08bb3cf1a4c48a70f69/libgfortran%2Fio%2Fbackspace.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78579b601d74b339eadbc08bb3cf1a4c48a70f69/libgfortran%2Fio%2Fbackspace.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fbackspace.c?ref=78579b601d74b339eadbc08bb3cf1a4c48a70f69", "patch": "@@ -77,6 +77,7 @@ formatted_backspace (void)\n   if (sseek (current_unit->s, base) == FAILURE)\n     goto io_error;\n   current_unit->last_record--;\n+  current_unit->endfile = NO_ENDFILE;\n \n   return;\n "}, {"sha": "8e3afbdfdc5e1ad8ee024f9e17bb69e8136e8222", "filename": "libgfortran/io/unix.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78579b601d74b339eadbc08bb3cf1a4c48a70f69/libgfortran%2Fio%2Funix.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78579b601d74b339eadbc08bb3cf1a4c48a70f69/libgfortran%2Fio%2Funix.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funix.c?ref=78579b601d74b339eadbc08bb3cf1a4c48a70f69", "patch": "@@ -462,6 +462,9 @@ fd_alloc_w_at (unix_stream * s, int *len, gfc_offset where)\n \n   s->logical_offset = where + *len;\n \n+  if (where + *len > s->file_length)\n+    s->file_length = where + *len;\n+\n   n = s->logical_offset - s->buffer_offset;\n   if (n > s->active)\n     s->active = n;"}]}