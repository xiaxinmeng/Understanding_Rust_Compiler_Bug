{"sha": "ae66da3ba5136550245f96339e8d48d565903cd2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWU2NmRhM2JhNTEzNjU1MDI0NWY5NjMzOWU4ZDQ4ZDU2NTkwM2NkMg==", "commit": {"author": {"name": "Ralf Wildenhues", "email": "Ralf.Wildenhues@gmx.de", "date": "2009-08-15T07:02:33Z"}, "committer": {"name": "Ralf Wildenhues", "email": "rwild@gcc.gnu.org", "date": "2009-08-15T07:02:33Z"}, "message": "configure.ac: Move guarded checks for CC and CXX ...\n\nlibstdc++-v3/\n\t* configure.ac: Move guarded checks for CC and CXX ...\n\t* acinclude.m4 (GLIBCXX_CONFIGURE): ... from here.\n\t* configure: Regenerate.\n\nFrom-SVN: r150788", "tree": {"sha": "0cec67570cc453f9e2d808c5fb0d6678d45be00d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0cec67570cc453f9e2d808c5fb0d6678d45be00d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae66da3ba5136550245f96339e8d48d565903cd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae66da3ba5136550245f96339e8d48d565903cd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae66da3ba5136550245f96339e8d48d565903cd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae66da3ba5136550245f96339e8d48d565903cd2/comments", "author": null, "committer": null, "parents": [{"sha": "dc869601f4f2082e186e487a0c5529c6b06530dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc869601f4f2082e186e487a0c5529c6b06530dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc869601f4f2082e186e487a0c5529c6b06530dd"}], "stats": {"total": 710, "additions": 358, "deletions": 352}, "files": [{"sha": "5d2d508213e772bebd70c6fa06ca60969c5033b2", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=ae66da3ba5136550245f96339e8d48d565903cd2", "patch": "@@ -1,3 +1,9 @@\n+2009-08-15  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n+\n+\t* configure.ac: Move guarded checks for CC and CXX ...\n+\t* acinclude.m4 (GLIBCXX_CONFIGURE): ... from here.\n+\t* configure: Regenerate.\n+\n 2009-08-14  Edward Smith-Rowland  <3dw4rd@verizon.net>\n \t    Paolo Carlini  <paolo.carlini@oracle.com>\n "}, {"sha": "45e0229e4be74270e559f3cfb99b24f799ce7470", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=ae66da3ba5136550245f96339e8d48d565903cd2", "patch": "@@ -79,35 +79,6 @@ AC_DEFUN([GLIBCXX_CONFIGURE], [\n     AC_HELP_STRING([--with-newlib],\n                    [assume newlib as a system C library]))\n \n-  # We're almost certainly being configured before anything else which uses\n-  # C++, so all of our AC_PROG_* discoveries will be cached.  It's vital that\n-  # we not cache the value of CXX that we \"discover\" here, because it's set\n-  # to something unique for us and libjava.  Other target libraries need to\n-  # find CXX for themselves.  We yank the rug out from under the normal AC_*\n-  # process by sneakily renaming the cache variable.  This also lets us debug\n-  # the value of \"our\" CXX in postmortems.\n-  #\n-  # We must also force CXX to /not/ be a precious variable, otherwise the\n-  # wrong (non-multilib-adjusted) value will be used in multilibs.  This\n-  # little trick also affects CPPFLAGS, CXXFLAGS, and LDFLAGS.  And as a side\n-  # effect, CXXFLAGS is no longer automagically subst'd, so we have to do\n-  # that ourselves.  Un-preciousing AC_PROG_CC also affects CC and CFLAGS.\n-  #\n-  # -fno-builtin must be present here so that a non-conflicting form of\n-  # std::exit can be guessed by AC_PROG_CXX, and used in later tests.\n-\n-  m4_define([ac_cv_prog_CXX],[glibcxx_cv_prog_CXX])\n-  m4_rename([_AC_ARG_VAR_PRECIOUS],[glibcxx_PRECIOUS])\n-  m4_define([_AC_ARG_VAR_PRECIOUS],[])\n-  save_CXXFLAGS=\"$CXXFLAGS\"\n-  CXXFLAGS=\"$CXXFLAGS -fno-builtin\"\n-  AC_PROG_CC\n-  AC_PROG_CXX\n-  CXXFLAGS=\"$save_CXXFLAGS\"\n-  m4_rename_force([glibcxx_PRECIOUS],[_AC_ARG_VAR_PRECIOUS])\n-  AC_SUBST(CFLAGS)\n-  AC_SUBST(CXXFLAGS)\n-\n   # Will set LN_S to either 'ln -s', 'ln', or 'cp -p' (if linking isn't\n   # available).  Uncomment the next line to force a particular method.\n   AC_PROG_LN_S"}, {"sha": "60b5ac5920e6c4263e0966e7b3901f5904a11123", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 322, "deletions": 322, "changes": 644, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=ae66da3ba5136550245f96339e8d48d565903cd2", "patch": "@@ -458,7 +458,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS libtool_VERSION multi_basedir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar glibcxx_builddir glibcxx_srcdir toplevel_srcdir CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LN_S AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT CPP CPPFLAGS EGREP LIBTOOL SED FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM OBJDUMP ac_ct_OBJDUMP lt_ECHO DSYMUTIL ac_ct_DSYMUTIL NMEDIT ac_ct_NMEDIT LIPO ac_ct_LIPO OTOOL ac_ct_OTOOL OTOOL64 ac_ct_OTOOL64 LDFLAGS CXXCPP enable_shared enable_static GLIBCXX_HOSTED_TRUE GLIBCXX_HOSTED_FALSE GLIBCXX_BUILD_PCH_TRUE GLIBCXX_BUILD_PCH_FALSE glibcxx_PCHFLAGS glibcxx_thread_h WERROR SECTION_FLAGS CSTDIO_H BASIC_FILE_H BASIC_FILE_CC check_msgfmt glibcxx_MOFILES glibcxx_POFILES glibcxx_localedir USE_NLS CLOCALE_H CMESSAGES_H CCODECVT_CC CCOLLATE_CC CCTYPE_CC CMESSAGES_CC CMONEY_CC CNUMERIC_CC CTIME_H CTIME_CC CLOCALE_CC CLOCALE_INTERNAL_H ALLOCATOR_H ALLOCATOR_NAME C_INCLUDE_DIR GLIBCXX_C_HEADERS_C_TRUE GLIBCXX_C_HEADERS_C_FALSE GLIBCXX_C_HEADERS_C_STD_TRUE GLIBCXX_C_HEADERS_C_STD_FALSE GLIBCXX_C_HEADERS_C_GLOBAL_TRUE GLIBCXX_C_HEADERS_C_GLOBAL_FALSE GLIBCXX_C_HEADERS_COMPATIBILITY_TRUE GLIBCXX_C_HEADERS_COMPATIBILITY_FALSE GLIBCXX_C_HEADERS_EXTRA_TRUE GLIBCXX_C_HEADERS_EXTRA_FALSE DEBUG_FLAGS GLIBCXX_BUILD_DEBUG_TRUE GLIBCXX_BUILD_DEBUG_FALSE ENABLE_PARALLEL_TRUE ENABLE_PARALLEL_FALSE EXTRA_CXX_FLAGS GLIBCXX_LIBS SECTION_LDFLAGS OPT_LDFLAGS LIBICONV LTLIBICONV SYMVER_FILE port_specific_symbol_files ENABLE_SYMVERS_TRUE ENABLE_SYMVERS_FALSE ENABLE_SYMVERS_GNU_TRUE ENABLE_SYMVERS_GNU_FALSE ENABLE_SYMVERS_GNU_NAMESPACE_TRUE ENABLE_SYMVERS_GNU_NAMESPACE_FALSE ENABLE_SYMVERS_DARWIN_TRUE ENABLE_SYMVERS_DARWIN_FALSE ENABLE_VISIBILITY_TRUE ENABLE_VISIBILITY_FALSE GLIBCXX_LDBL_COMPAT_TRUE GLIBCXX_LDBL_COMPAT_FALSE baseline_dir ATOMICITY_SRCDIR ATOMIC_WORD_SRCDIR ATOMIC_FLAGS CPU_DEFINES_SRCDIR ABI_TWEAKS_SRCDIR OS_INC_SRCDIR ERROR_CONSTANTS_SRCDIR glibcxx_prefixdir gxx_include_dir glibcxx_toolexecdir glibcxx_toolexeclibdir GLIBCXX_INCLUDES TOPLEVEL_INCLUDES OPTIMIZE_CXXFLAGS WARN_FLAGS LIBSUPCXX_PICFLAGS LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS libtool_VERSION multi_basedir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS glibcxx_builddir glibcxx_srcdir toplevel_srcdir LN_S AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT CPP CPPFLAGS EGREP LIBTOOL SED FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM OBJDUMP ac_ct_OBJDUMP lt_ECHO DSYMUTIL ac_ct_DSYMUTIL NMEDIT ac_ct_NMEDIT LIPO ac_ct_LIPO OTOOL ac_ct_OTOOL OTOOL64 ac_ct_OTOOL64 LDFLAGS CXXCPP enable_shared enable_static GLIBCXX_HOSTED_TRUE GLIBCXX_HOSTED_FALSE GLIBCXX_BUILD_PCH_TRUE GLIBCXX_BUILD_PCH_FALSE glibcxx_PCHFLAGS glibcxx_thread_h WERROR SECTION_FLAGS CSTDIO_H BASIC_FILE_H BASIC_FILE_CC check_msgfmt glibcxx_MOFILES glibcxx_POFILES glibcxx_localedir USE_NLS CLOCALE_H CMESSAGES_H CCODECVT_CC CCOLLATE_CC CCTYPE_CC CMESSAGES_CC CMONEY_CC CNUMERIC_CC CTIME_H CTIME_CC CLOCALE_CC CLOCALE_INTERNAL_H ALLOCATOR_H ALLOCATOR_NAME C_INCLUDE_DIR GLIBCXX_C_HEADERS_C_TRUE GLIBCXX_C_HEADERS_C_FALSE GLIBCXX_C_HEADERS_C_STD_TRUE GLIBCXX_C_HEADERS_C_STD_FALSE GLIBCXX_C_HEADERS_C_GLOBAL_TRUE GLIBCXX_C_HEADERS_C_GLOBAL_FALSE GLIBCXX_C_HEADERS_COMPATIBILITY_TRUE GLIBCXX_C_HEADERS_COMPATIBILITY_FALSE GLIBCXX_C_HEADERS_EXTRA_TRUE GLIBCXX_C_HEADERS_EXTRA_FALSE DEBUG_FLAGS GLIBCXX_BUILD_DEBUG_TRUE GLIBCXX_BUILD_DEBUG_FALSE ENABLE_PARALLEL_TRUE ENABLE_PARALLEL_FALSE EXTRA_CXX_FLAGS GLIBCXX_LIBS SECTION_LDFLAGS OPT_LDFLAGS LIBICONV LTLIBICONV SYMVER_FILE port_specific_symbol_files ENABLE_SYMVERS_TRUE ENABLE_SYMVERS_FALSE ENABLE_SYMVERS_GNU_TRUE ENABLE_SYMVERS_GNU_FALSE ENABLE_SYMVERS_GNU_NAMESPACE_TRUE ENABLE_SYMVERS_GNU_NAMESPACE_FALSE ENABLE_SYMVERS_DARWIN_TRUE ENABLE_SYMVERS_DARWIN_FALSE ENABLE_VISIBILITY_TRUE ENABLE_VISIBILITY_FALSE GLIBCXX_LDBL_COMPAT_TRUE GLIBCXX_LDBL_COMPAT_FALSE baseline_dir ATOMICITY_SRCDIR ATOMIC_WORD_SRCDIR ATOMIC_FLAGS CPU_DEFINES_SRCDIR ABI_TWEAKS_SRCDIR OS_INC_SRCDIR ERROR_CONSTANTS_SRCDIR glibcxx_prefixdir gxx_include_dir glibcxx_toolexecdir glibcxx_toolexeclibdir GLIBCXX_INCLUDES TOPLEVEL_INCLUDES OPTIMIZE_CXXFLAGS WARN_FLAGS LIBSUPCXX_PICFLAGS LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n ac_pwd=`pwd`\n \n@@ -2193,331 +2193,33 @@ am__tar='${AMTAR} chof - \"$$tardir\"'; am__untar='${AMTAR} xf -'\n \n \n \n-# Runs configure.host, finds CC, CXX, and assorted other critical bits.  Sets\n-# up critical shell variables.\n-\n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-echo \"$as_me:$LINENO: checking how to run the C preprocessor\" >&5\n-echo $ECHO_N \"checking how to run the C preprocessor... $ECHO_C\" >&6\n-# On Suns, sometimes $CPP names a directory.\n-if test -n \"$CPP\" && test -d \"$CPP\"; then\n-  CPP=\n-fi\n-if test -z \"$CPP\"; then\n-  if test \"${ac_cv_prog_CPP+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-      # Double quotes because CPP needs to be expanded\n-    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n-    do\n-      ac_preproc_ok=false\n-for ac_c_preproc_warn_flag in '' yes\n-do\n-  # Use a header file that comes with gcc, so configuring glibc\n-  # with a fresh cross-compiler works.\n-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n-  # <limits.h> exists even on freestanding compilers.\n-  # On the NeXT, cc -E runs the code through the compiler's parser,\n-  # not just through cpp. \"Syntax error\" is here to catch this case.\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#ifdef __STDC__\n-# include <limits.h>\n-#else\n-# include <assert.h>\n-#endif\n-\t\t     Syntax error\n-_ACEOF\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } >/dev/null; then\n-  if test -s conftest.err; then\n-    ac_cpp_err=$ac_c_preproc_warn_flag\n-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n-  else\n-    ac_cpp_err=\n-  fi\n-else\n-  ac_cpp_err=yes\n-fi\n-if test -z \"$ac_cpp_err\"; then\n-  :\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-  # Broken: fails on valid input.\n-continue\n-fi\n-rm -f conftest.err conftest.$ac_ext\n-\n-  # OK, works on sane cases.  Now check whether non-existent headers\n-  # can be detected and how.\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#include <ac_nonexistent.h>\n-_ACEOF\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } >/dev/null; then\n-  if test -s conftest.err; then\n-    ac_cpp_err=$ac_c_preproc_warn_flag\n-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n-  else\n-    ac_cpp_err=\n-  fi\n-else\n-  ac_cpp_err=yes\n-fi\n-if test -z \"$ac_cpp_err\"; then\n-  # Broken: success on invalid input.\n-continue\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-  # Passes both tests.\n-ac_preproc_ok=:\n-break\n-fi\n-rm -f conftest.err conftest.$ac_ext\n-\n-done\n-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n-rm -f conftest.err conftest.$ac_ext\n-if $ac_preproc_ok; then\n-  break\n-fi\n-\n-    done\n-    ac_cv_prog_CPP=$CPP\n-\n-fi\n-  CPP=$ac_cv_prog_CPP\n-else\n-  ac_cv_prog_CPP=$CPP\n-fi\n-echo \"$as_me:$LINENO: result: $CPP\" >&5\n-echo \"${ECHO_T}$CPP\" >&6\n-ac_preproc_ok=false\n-for ac_c_preproc_warn_flag in '' yes\n-do\n-  # Use a header file that comes with gcc, so configuring glibc\n-  # with a fresh cross-compiler works.\n-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n-  # <limits.h> exists even on freestanding compilers.\n-  # On the NeXT, cc -E runs the code through the compiler's parser,\n-  # not just through cpp. \"Syntax error\" is here to catch this case.\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#ifdef __STDC__\n-# include <limits.h>\n-#else\n-# include <assert.h>\n-#endif\n-\t\t     Syntax error\n-_ACEOF\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } >/dev/null; then\n-  if test -s conftest.err; then\n-    ac_cpp_err=$ac_c_preproc_warn_flag\n-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n-  else\n-    ac_cpp_err=\n-  fi\n-else\n-  ac_cpp_err=yes\n-fi\n-if test -z \"$ac_cpp_err\"; then\n-  :\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n+# We're almost certainly being configured before anything else which uses\n+# C++, so all of our AC_PROG_* discoveries will be cached.  It's vital that\n+# we not cache the value of CXX that we \"discover\" here, because it's set\n+# to something unique for us and libjava.  Other target libraries need to\n+# find CXX for themselves.  We yank the rug out from under the normal AC_*\n+# process by sneakily renaming the cache variable.  This also lets us debug\n+# the value of \"our\" CXX in postmortems.\n+#\n+# We must also force CXX to /not/ be a precious variable, otherwise the\n+# wrong (non-multilib-adjusted) value will be used in multilibs.  This\n+# little trick also affects CPPFLAGS, CXXFLAGS, and LDFLAGS.  And as a side\n+# effect, CXXFLAGS is no longer automagically subst'd, so we have to do\n+# that ourselves.  Un-preciousing AC_PROG_CC also affects CC and CFLAGS.\n+#\n+# -fno-builtin must be present here so that a non-conflicting form of\n+# std::exit can be guessed by AC_PROG_CXX, and used in later tests.\n \n-  # Broken: fails on valid input.\n-continue\n-fi\n-rm -f conftest.err conftest.$ac_ext\n \n-  # OK, works on sane cases.  Now check whether non-existent headers\n-  # can be detected and how.\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#include <ac_nonexistent.h>\n-_ACEOF\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } >/dev/null; then\n-  if test -s conftest.err; then\n-    ac_cpp_err=$ac_c_preproc_warn_flag\n-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n-  else\n-    ac_cpp_err=\n-  fi\n-else\n-  ac_cpp_err=yes\n-fi\n-if test -z \"$ac_cpp_err\"; then\n-  # Broken: success on invalid input.\n-continue\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n \n-  # Passes both tests.\n-ac_preproc_ok=:\n-break\n-fi\n-rm -f conftest.err conftest.$ac_ext\n-\n-done\n-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n-rm -f conftest.err conftest.$ac_ext\n-if $ac_preproc_ok; then\n-  :\n-else\n-  { { echo \"$as_me:$LINENO: error: in \\`$ac_pwd':\" >&5\n-echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n-{ { echo \"$as_me:$LINENO: error: C preprocessor \\\"$CPP\\\" fails sanity check\n-See \\`config.log' for more details.\" >&5\n-echo \"$as_me: error: C preprocessor \\\"$CPP\\\" fails sanity check\n-See \\`config.log' for more details.\" >&2;}\n-   { (exit 1); exit 1; }; }; }\n-fi\n \n+save_CXXFLAGS=\"$CXXFLAGS\"\n+CXXFLAGS=\"$CXXFLAGS -fno-builtin\"\n ac_ext=c\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-\n-\n-echo \"$as_me:$LINENO: checking for egrep\" >&5\n-echo $ECHO_N \"checking for egrep... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_egrep+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  if echo a | (grep -E '(a|b)') >/dev/null 2>&1\n-    then ac_cv_prog_egrep='grep -E'\n-    else ac_cv_prog_egrep='egrep'\n-    fi\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_egrep\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_egrep\" >&6\n- EGREP=$ac_cv_prog_egrep\n-\n-\n-\n-  # Keep these sync'd with the list in Makefile.am.  The first provides an\n-  # expandable list at autoconf time; the second provides an expandable list\n-  # (i.e., shell variable) at configure time.\n-\n-  SUBDIRS='include libsupc++ python src doc po testsuite'\n-\n-  # These need to be absolute paths, yet at the same time need to\n-  # canonicalize only relative paths, because then amd will not unmount\n-  # drives. Thus the use of PWDCMD: set it to 'pawd' or 'amq -w' if using amd.\n-  glibcxx_builddir=`${PWDCMD-pwd}`\n-  case $srcdir in\n-    \\\\/$* | ?:\\\\/*) glibcxx_srcdir=${srcdir} ;;\n-    *) glibcxx_srcdir=`cd \"$srcdir\" && ${PWDCMD-pwd} || echo \"$srcdir\"` ;;\n-  esac\n-  toplevel_srcdir=${glibcxx_srcdir}/..\n-\n-\n-\n-\n-  # We use these options to decide which functions to include.  They are\n-  # set from the top level.\n-\n-# Check whether --with-target-subdir or --without-target-subdir was given.\n-if test \"${with_target_subdir+set}\" = set; then\n-  withval=\"$with_target_subdir\"\n-\n-fi;\n-\n-\n-# Check whether --with-cross-host or --without-cross-host was given.\n-if test \"${with_cross_host+set}\" = set; then\n-  withval=\"$with_cross_host\"\n-\n-fi;\n-\n-\n-# Check whether --with-newlib or --without-newlib was given.\n-if test \"${with_newlib+set}\" = set; then\n-  withval=\"$with_newlib\"\n-\n-fi;\n-\n-  # We're almost certainly being configured before anything else which uses\n-  # C++, so all of our AC_PROG_* discoveries will be cached.  It's vital that\n-  # we not cache the value of CXX that we \"discover\" here, because it's set\n-  # to something unique for us and libjava.  Other target libraries need to\n-  # find CXX for themselves.  We yank the rug out from under the normal AC_*\n-  # process by sneakily renaming the cache variable.  This also lets us debug\n-  # the value of \"our\" CXX in postmortems.\n-  #\n-  # We must also force CXX to /not/ be a precious variable, otherwise the\n-  # wrong (non-multilib-adjusted) value will be used in multilibs.  This\n-  # little trick also affects CPPFLAGS, CXXFLAGS, and LDFLAGS.  And as a side\n-  # effect, CXXFLAGS is no longer automagically subst'd, so we have to do\n-  # that ourselves.  Un-preciousing AC_PROG_CC also affects CC and CFLAGS.\n-  #\n-  # -fno-builtin must be present here so that a non-conflicting form of\n-  # std::exit can be guessed by AC_PROG_CXX, and used in later tests.\n-\n-\n-\n-\n-  save_CXXFLAGS=\"$CXXFLAGS\"\n-  CXXFLAGS=\"$CXXFLAGS -fno-builtin\"\n-  ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"${ac_tool_prefix}gcc\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}gcc; ac_word=$2\n@@ -3487,7 +3189,7 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n-  ac_ext=cc\n+ac_ext=cc\n ac_cpp='$CXXCPP $CPPFLAGS'\n ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n@@ -3842,11 +3544,309 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n-  CXXFLAGS=\"$save_CXXFLAGS\"\n+CXXFLAGS=\"$save_CXXFLAGS\"\n \n \n \n \n+# Runs configure.host, and assorted other critical bits.  Sets\n+# up critical shell variables.\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+echo \"$as_me:$LINENO: checking how to run the C preprocessor\" >&5\n+echo $ECHO_N \"checking how to run the C preprocessor... $ECHO_C\" >&6\n+# On Suns, sometimes $CPP names a directory.\n+if test -n \"$CPP\" && test -d \"$CPP\"; then\n+  CPP=\n+fi\n+if test -z \"$CPP\"; then\n+  if test \"${ac_cv_prog_CPP+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+      # Double quotes because CPP needs to be expanded\n+    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n+    do\n+      ac_preproc_ok=false\n+for ac_c_preproc_warn_flag in '' yes\n+do\n+  # Use a header file that comes with gcc, so configuring glibc\n+  # with a fresh cross-compiler works.\n+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+  # <limits.h> exists even on freestanding compilers.\n+  # On the NeXT, cc -E runs the code through the compiler's parser,\n+  # not just through cpp. \"Syntax error\" is here to catch this case.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\t\t     Syntax error\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  :\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  # Broken: fails on valid input.\n+continue\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+\n+  # OK, works on sane cases.  Now check whether non-existent headers\n+  # can be detected and how.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <ac_nonexistent.h>\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  # Broken: success on invalid input.\n+continue\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  # Passes both tests.\n+ac_preproc_ok=:\n+break\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+\n+done\n+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n+rm -f conftest.err conftest.$ac_ext\n+if $ac_preproc_ok; then\n+  break\n+fi\n+\n+    done\n+    ac_cv_prog_CPP=$CPP\n+\n+fi\n+  CPP=$ac_cv_prog_CPP\n+else\n+  ac_cv_prog_CPP=$CPP\n+fi\n+echo \"$as_me:$LINENO: result: $CPP\" >&5\n+echo \"${ECHO_T}$CPP\" >&6\n+ac_preproc_ok=false\n+for ac_c_preproc_warn_flag in '' yes\n+do\n+  # Use a header file that comes with gcc, so configuring glibc\n+  # with a fresh cross-compiler works.\n+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+  # <limits.h> exists even on freestanding compilers.\n+  # On the NeXT, cc -E runs the code through the compiler's parser,\n+  # not just through cpp. \"Syntax error\" is here to catch this case.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\t\t     Syntax error\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  :\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  # Broken: fails on valid input.\n+continue\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+\n+  # OK, works on sane cases.  Now check whether non-existent headers\n+  # can be detected and how.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <ac_nonexistent.h>\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  # Broken: success on invalid input.\n+continue\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  # Passes both tests.\n+ac_preproc_ok=:\n+break\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+\n+done\n+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n+rm -f conftest.err conftest.$ac_ext\n+if $ac_preproc_ok; then\n+  :\n+else\n+  { { echo \"$as_me:$LINENO: error: in \\`$ac_pwd':\" >&5\n+echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n+{ { echo \"$as_me:$LINENO: error: C preprocessor \\\"$CPP\\\" fails sanity check\n+See \\`config.log' for more details.\" >&5\n+echo \"$as_me: error: C preprocessor \\\"$CPP\\\" fails sanity check\n+See \\`config.log' for more details.\" >&2;}\n+   { (exit 1); exit 1; }; }; }\n+fi\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n+\n+echo \"$as_me:$LINENO: checking for egrep\" >&5\n+echo $ECHO_N \"checking for egrep... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_egrep+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if echo a | (grep -E '(a|b)') >/dev/null 2>&1\n+    then ac_cv_prog_egrep='grep -E'\n+    else ac_cv_prog_egrep='egrep'\n+    fi\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_prog_egrep\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_egrep\" >&6\n+ EGREP=$ac_cv_prog_egrep\n+\n+\n+\n+  # Keep these sync'd with the list in Makefile.am.  The first provides an\n+  # expandable list at autoconf time; the second provides an expandable list\n+  # (i.e., shell variable) at configure time.\n+\n+  SUBDIRS='include libsupc++ python src doc po testsuite'\n+\n+  # These need to be absolute paths, yet at the same time need to\n+  # canonicalize only relative paths, because then amd will not unmount\n+  # drives. Thus the use of PWDCMD: set it to 'pawd' or 'amq -w' if using amd.\n+  glibcxx_builddir=`${PWDCMD-pwd}`\n+  case $srcdir in\n+    \\\\/$* | ?:\\\\/*) glibcxx_srcdir=${srcdir} ;;\n+    *) glibcxx_srcdir=`cd \"$srcdir\" && ${PWDCMD-pwd} || echo \"$srcdir\"` ;;\n+  esac\n+  toplevel_srcdir=${glibcxx_srcdir}/..\n+\n+\n+\n+\n+  # We use these options to decide which functions to include.  They are\n+  # set from the top level.\n+\n+# Check whether --with-target-subdir or --without-target-subdir was given.\n+if test \"${with_target_subdir+set}\" = set; then\n+  withval=\"$with_target_subdir\"\n+\n+fi;\n+\n+\n+# Check whether --with-cross-host or --without-cross-host was given.\n+if test \"${with_cross_host+set}\" = set; then\n+  withval=\"$with_cross_host\"\n+\n+fi;\n+\n+\n+# Check whether --with-newlib or --without-newlib was given.\n+if test \"${with_newlib+set}\" = set; then\n+  withval=\"$with_newlib\"\n+\n+fi;\n+\n   # Will set LN_S to either 'ln -s', 'ln', or 'cp -p' (if linking isn't\n   # available).  Uncomment the next line to force a particular method.\n   echo \"$as_me:$LINENO: checking whether ln -s works\" >&5\n@@ -137261,9 +137261,6 @@ s,@am__leading_dot@,$am__leading_dot,;t t\n s,@AMTAR@,$AMTAR,;t t\n s,@am__tar@,$am__tar,;t t\n s,@am__untar@,$am__untar,;t t\n-s,@glibcxx_builddir@,$glibcxx_builddir,;t t\n-s,@glibcxx_srcdir@,$glibcxx_srcdir,;t t\n-s,@toplevel_srcdir@,$toplevel_srcdir,;t t\n s,@CC@,$CC,;t t\n s,@ac_ct_CC@,$ac_ct_CC,;t t\n s,@EXEEXT@,$EXEEXT,;t t\n@@ -137272,6 +137269,9 @@ s,@CXX@,$CXX,;t t\n s,@ac_ct_CXX@,$ac_ct_CXX,;t t\n s,@CFLAGS@,$CFLAGS,;t t\n s,@CXXFLAGS@,$CXXFLAGS,;t t\n+s,@glibcxx_builddir@,$glibcxx_builddir,;t t\n+s,@glibcxx_srcdir@,$glibcxx_srcdir,;t t\n+s,@toplevel_srcdir@,$toplevel_srcdir,;t t\n s,@LN_S@,$LN_S,;t t\n s,@AS@,$AS,;t t\n s,@ac_ct_AS@,$ac_ct_AS,;t t"}, {"sha": "0b1edfd7c75eb5eaf793fd1a231ede88614b741b", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 30, "deletions": 1, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae66da3ba5136550245f96339e8d48d565903cd2/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=ae66da3ba5136550245f96339e8d48d565903cd2", "patch": "@@ -78,7 +78,36 @@ AM_INIT_AUTOMAKE([1.9.3 no-define foreign no-dependencies -Wall -Wno-portability\n AH_TEMPLATE(PACKAGE, [Name of package])\n AH_TEMPLATE(VERSION, [Version number of package])\n \n-# Runs configure.host, finds CC, CXX, and assorted other critical bits.  Sets\n+# We're almost certainly being configured before anything else which uses\n+# C++, so all of our AC_PROG_* discoveries will be cached.  It's vital that\n+# we not cache the value of CXX that we \"discover\" here, because it's set\n+# to something unique for us and libjava.  Other target libraries need to\n+# find CXX for themselves.  We yank the rug out from under the normal AC_*\n+# process by sneakily renaming the cache variable.  This also lets us debug\n+# the value of \"our\" CXX in postmortems.\n+#\n+# We must also force CXX to /not/ be a precious variable, otherwise the\n+# wrong (non-multilib-adjusted) value will be used in multilibs.  This\n+# little trick also affects CPPFLAGS, CXXFLAGS, and LDFLAGS.  And as a side\n+# effect, CXXFLAGS is no longer automagically subst'd, so we have to do\n+# that ourselves.  Un-preciousing AC_PROG_CC also affects CC and CFLAGS.\n+#\n+# -fno-builtin must be present here so that a non-conflicting form of\n+# std::exit can be guessed by AC_PROG_CXX, and used in later tests.\n+\n+m4_define([ac_cv_prog_CXX],[glibcxx_cv_prog_CXX])\n+m4_rename([_AC_ARG_VAR_PRECIOUS],[glibcxx_PRECIOUS])\n+m4_define([_AC_ARG_VAR_PRECIOUS],[])\n+save_CXXFLAGS=\"$CXXFLAGS\"\n+CXXFLAGS=\"$CXXFLAGS -fno-builtin\"\n+AC_PROG_CC\n+AC_PROG_CXX\n+CXXFLAGS=\"$save_CXXFLAGS\"\n+m4_rename_force([glibcxx_PRECIOUS],[_AC_ARG_VAR_PRECIOUS])\n+AC_SUBST(CFLAGS)\n+AC_SUBST(CXXFLAGS)\n+\n+# Runs configure.host, and assorted other critical bits.  Sets\n # up critical shell variables.\n GLIBCXX_CONFIGURE\n "}]}