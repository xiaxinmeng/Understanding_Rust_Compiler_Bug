{"sha": "4b49c3657f581b4f484f7dd380d174a95449cdd1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGI0OWMzNjU3ZjU4MWI0ZjQ4NGY3ZGQzODBkMTc0YTk1NDQ5Y2RkMQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2001-01-09T09:30:43Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2001-01-09T09:30:43Z"}, "message": "cppinit.c (cpp_cleanup): NULLify macro_buffer and zero macro_buffer_len.\n\n* cppinit.c (cpp_cleanup): NULLify macro_buffer and zero\nmacro_buffer_len.\n* cppmacro.c (cpp_macro_definition): Reset macro_buffer_len when\nrealloc()ing macro_buffer.\n\nFrom-SVN: r38821", "tree": {"sha": "6a914eec78331aa78c3ba5cf75eb5831f611cb32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a914eec78331aa78c3ba5cf75eb5831f611cb32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4b49c3657f581b4f484f7dd380d174a95449cdd1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b49c3657f581b4f484f7dd380d174a95449cdd1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b49c3657f581b4f484f7dd380d174a95449cdd1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b49c3657f581b4f484f7dd380d174a95449cdd1/comments", "author": null, "committer": null, "parents": [{"sha": "bad48d7ebd711c4e79d6ae31602c9fb805d2d5b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bad48d7ebd711c4e79d6ae31602c9fb805d2d5b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bad48d7ebd711c4e79d6ae31602c9fb805d2d5b7"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "5bc2e8a1b2f5efa325de656a723850a78850b74e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b49c3657f581b4f484f7dd380d174a95449cdd1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b49c3657f581b4f484f7dd380d174a95449cdd1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4b49c3657f581b4f484f7dd380d174a95449cdd1", "patch": "@@ -1,5 +1,10 @@\n 2001-01-09  Alexandre Oliva  <aoliva@redhat.com>\n \n+\t* cppinit.c (cpp_cleanup): NULLify macro_buffer and zero\n+\tmacro_buffer_len.\n+\t* cppmacro.c (cpp_macro_definition): Reset macro_buffer_len when\n+\trealloc()ing macro_buffer.\n+\n \t* hwint.h (HOST_BITS_PER_WIDE_INT, HOST_WIDE_INT): Use long long\n \tif it's wider than long and the target's long is wider than the\n \thost's."}, {"sha": "44e10c830b69c7c136d53393d6c650751c6df622", "filename": "gcc/cppinit.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b49c3657f581b4f484f7dd380d174a95449cdd1/gcc%2Fcppinit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b49c3657f581b4f484f7dd380d174a95449cdd1/gcc%2Fcppinit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppinit.c?ref=4b49c3657f581b4f484f7dd380d174a95449cdd1", "patch": "@@ -570,7 +570,11 @@ cpp_cleanup (pfile)\n     cpp_pop_buffer (pfile);\n \n   if (pfile->macro_buffer)\n-    free ((PTR) pfile->macro_buffer);\n+    {\n+      free ((PTR) pfile->macro_buffer);\n+      pfile->macro_buffer = NULL;\n+      pfile->macro_buffer_len = 0;\n+    }\n \n   deps_free (pfile->deps);\n "}, {"sha": "1539552076bea82e041656980864e4546259cbf0", "filename": "gcc/cppmacro.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b49c3657f581b4f484f7dd380d174a95449cdd1/gcc%2Fcppmacro.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b49c3657f581b4f484f7dd380d174a95449cdd1/gcc%2Fcppmacro.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppmacro.c?ref=4b49c3657f581b4f484f7dd380d174a95449cdd1", "patch": "@@ -1,6 +1,6 @@\n /* Part of CPP library.  (Macro and #define handling.)\n    Copyright (C) 1986, 1987, 1989, 1992, 1993, 1994, 1995, 1996, 1998,\n-   1999, 2000 Free Software Foundation, Inc.\n+   1999, 2000, 2001 Free Software Foundation, Inc.\n    Written by Per Bothner, 1994.\n    Based on CCCP program by Paul Rubin, June 1986\n    Adapted to ANSI C, Richard Stallman, Jan 1987\n@@ -1568,7 +1568,10 @@ cpp_macro_definition (pfile, node)\n     }\n \n   if (len > pfile->macro_buffer_len)\n-    pfile->macro_buffer = (U_CHAR *) xrealloc (pfile->macro_buffer, len);\n+    {\n+      pfile->macro_buffer = (U_CHAR *) xrealloc (pfile->macro_buffer, len);\n+      pfile->macro_buffer_len = len;\n+    }\n   buffer = pfile->macro_buffer;\n \n   /* Parameter names.  */"}]}