{"sha": "97c5d522c6ee36b7ed1824d1eb6b8f30172c1818", "node_id": "C_kwDOANBUbNoAKDk3YzVkNTIyYzZlZTM2YjdlZDE4MjRkMWViNmI4ZjMwMTcyYzE4MTg", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-07-06T10:18:57Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-09-21T15:24:59Z"}, "message": "[Ada] Follow-up tweaks to System.Dwarf_Line\n\ngcc/ada/\n\n\t* libgnat/s-dwalin.adb (Skip_Form): Fix cases of DW_FORM_addrx\n\tand DW_FORM_implicit_const.  Replace Constraint_Error with\n\tDwarf_Error.", "tree": {"sha": "a6da96ce91f2206f76a1d7ac533d832ec879cc88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6da96ce91f2206f76a1d7ac533d832ec879cc88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97c5d522c6ee36b7ed1824d1eb6b8f30172c1818", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97c5d522c6ee36b7ed1824d1eb6b8f30172c1818", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97c5d522c6ee36b7ed1824d1eb6b8f30172c1818", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97c5d522c6ee36b7ed1824d1eb6b8f30172c1818/comments", "author": null, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf7aa7d8e8523ca246804ba7c8ef6ab4c7910cb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf7aa7d8e8523ca246804ba7c8ef6ab4c7910cb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf7aa7d8e8523ca246804ba7c8ef6ab4c7910cb8"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "74700e68bfc8ca7b3ca20c8ca7b6f78df42af491", "filename": "gcc/ada/libgnat/s-dwalin.adb", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97c5d522c6ee36b7ed1824d1eb6b8f30172c1818/gcc%2Fada%2Flibgnat%2Fs-dwalin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97c5d522c6ee36b7ed1824d1eb6b8f30172c1818/gcc%2Fada%2Flibgnat%2Fs-dwalin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fs-dwalin.adb?ref=97c5d522c6ee36b7ed1824d1eb6b8f30172c1818", "patch": "@@ -1114,8 +1114,6 @@ package body System.Dwarf_Lines is\n       case Form is\n          when DW_FORM_addr =>\n             Skip := Offset (Ptr_Sz);\n-         when DW_FORM_addrx =>\n-            Skip := Offset (uint32'(Read_LEB128 (S)));\n          when DW_FORM_block1 =>\n             Skip := Offset (uint8'(Read (S)));\n          when DW_FORM_block2 =>\n@@ -1161,19 +1159,20 @@ package body System.Dwarf_Lines is\n             begin\n                return;\n             end;\n-         when DW_FORM_udata\n-            | DW_FORM_ref_udata\n+         when DW_FORM_addrx\n             | DW_FORM_loclistx\n+            | DW_FORM_ref_udata\n             | DW_FORM_rnglistx\n             | DW_FORM_strx\n+            | DW_FORM_udata\n            =>\n             declare\n                Val : constant uint32 := Read_LEB128 (S);\n                pragma Unreferenced (Val);\n             begin\n                return;\n             end;\n-         when DW_FORM_flag_present =>\n+         when DW_FORM_flag_present | DW_FORM_implicit_const =>\n             return;\n          when DW_FORM_ref_addr\n             | DW_FORM_sec_offset\n@@ -1187,10 +1186,10 @@ package body System.Dwarf_Lines is\n                null;\n             end loop;\n             return;\n-         when DW_FORM_implicit_const | DW_FORM_indirect =>\n-            raise Constraint_Error;\n+         when DW_FORM_indirect =>\n+            raise Dwarf_Error with \"DW_FORM_indirect not implemented\";\n          when others =>\n-            raise Constraint_Error;\n+            raise Dwarf_Error with \"DWARF form not implemented\";\n       end case;\n \n       Seek (S, Tell (S) + Skip);"}]}