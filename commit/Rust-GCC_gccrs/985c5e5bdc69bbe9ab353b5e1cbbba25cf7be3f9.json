{"sha": "985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg1YzVlNWJkYzY5YmJlOWFiMzUzYjVlMWNiYmJhMjVjZjdiZTNmOQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-07-02T11:40:08Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-07-02T11:40:08Z"}, "message": "(LIBGCC_SPEC): Removed.\n\n(CC1_SPEC): Add %{profile:-p}.\n({CPP,LIB,LINK}_SPEC): Choose glibc 1 or 2 depending on USE_GNULIBC_1.\n\nFrom-SVN: r14380", "tree": {"sha": "c13febc1f9b71b7502172cc78c4787fd46928ebd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c13febc1f9b71b7502172cc78c4787fd46928ebd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9/comments", "author": null, "committer": null, "parents": [{"sha": "d7308c0c971677f7b1e13d83b133d7e200cd758c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7308c0c971677f7b1e13d83b133d7e200cd758c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7308c0c971677f7b1e13d83b133d7e200cd758c"}], "stats": {"total": 41, "additions": 33, "deletions": 8}, "files": [{"sha": "8129e4265e089f1bce947672e362a663abd8758b", "filename": "gcc/config/sparc/linux.h", "status": "modified", "additions": 33, "deletions": 8, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9/gcc%2Fconfig%2Fsparc%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9/gcc%2Fconfig%2Fsparc%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Flinux.h?ref=985c5e5bdc69bbe9ab353b5e1cbbba25cf7be3f9", "patch": "@@ -1,5 +1,5 @@\n /* Definitions for SPARC running Linux with ELF\n-   Copyright (C) 1996 Free Software Foundation, Inc.\n+   Copyright (C) 1996, 1997 Free Software Foundation, Inc.\n    Contributed by Eddie C. Dost (ecd@skynet.be)\n \n This file is part of GNU CC.\n@@ -56,10 +56,6 @@ Boston, MA 02111-1307, USA.  */\n         fprintf (FILE, \"\\t.version\\t\\\"01.01\\\"\\n\");                      \\\n   } while (0)\n \n-#undef  LIBGCC_SPEC\n-#define LIBGCC_SPEC \\\n-  \"%{!shared:-lgcc}\"\n-\n /* Provide a STARTFILE_SPEC appropriate for Linux.  Here we add\n    the Linux magical crtbegin.o file (see crtstuff.c) which\n    provides part of the support for getting C++ file-scope static\n@@ -81,6 +77,15 @@ Boston, MA 02111-1307, USA.  */\n #define ENDFILE_SPEC \\\n   \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n \n+/* This is for -profile to use -lc_p instead of -lc. */\n+#undef\tCC1_SPEC\n+#define\tCC1_SPEC \"%{profile:-p} \\\n+%{sun4:} %{target:} \\\n+%{mcypress:-mcpu=cypress} \\\n+%{msparclite:-mcpu=sparclite} %{mf930:-mcpu=f930} %{mf934:-mcpu=f934} \\\n+%{mv8:-mcpu=v8} %{msupersparc:-mcpu=supersparc} \\\n+\"\n+\n #undef TARGET_VERSION\n #define TARGET_VERSION fprintf (stderr, \" (sparc Linux/ELF)\");\n \n@@ -100,17 +105,27 @@ Boston, MA 02111-1307, USA.  */\n #define CPP_PREDEFINES \"-D__ELF__ -Dunix -Dsparc -Dlinux -Asystem(unix) -Asystem(posix) -Acpu(sparc) -Amachine(sparc)\"\n \n #undef CPP_SPEC\n+#ifdef USE_GNULIBC_1\n #define CPP_SPEC \"%{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{msparclite:-D__sparclite__} %{mv8:-D__sparc_v8__} %{msupersparc:-D__supersparc__ -D__sparc_v8__} %{posix:-D_POSIX_SOURCE}\"\n+#else\n+#define CPP_SPEC \"%{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{msparclite:-D__sparclite__} %{mv8:-D__sparc_v8__} %{msupersparc:-D__supersparc__ -D__sparc_v8__} %{posix:-D_POSIX_SOURCE} %{pthread:-D_REENTRANT}\"\n+#endif\n \n #undef LIB_SPEC\n-#if 1\n /* We no longer link with libc_p.a or libg.a by default. If you\n  * want to profile or debug the Linux C library, please add\n  * -lc_p or -ggdb to LDFLAGS at the link time, respectively.\n  */\n+#if 1\n+#ifdef USE_GNULIBC_1\n+#define LIB_SPEC \\\n+  \"%{!shared: %{p:-lgmon} %{pg:-lgmon} %{profile:-lgmon -lc_p} \\\n+     %{!profile:%{!ggdb:-lc} %{ggdb:-lg}}}\"\n+#else\n #define LIB_SPEC \\\n-  \"%{!shared: %{mieee-fp:-lieee} %{p:-lgmon} %{pg:-lgmon} \\\n-     %{!ggdb:-lc} %{ggdb:-lg}}\"\n+  \"%{!shared: %{mieee-fp:-lieee} %{pthread:-lpthread} \\\n+     %{profile:-lc_p} %{!profile: -lc}}\"\n+#endif\n #else\n #define LIB_SPEC \\\n   \"%{!shared: \\\n@@ -135,6 +150,7 @@ Boston, MA 02111-1307, USA.  */\n /* If ELF is the default format, we should not use /lib/elf. */\n \n #undef  LINK_SPEC\n+#ifdef USE_GNULIBC_1\n #ifndef LINUX_DEFAULT_ELF\n #define LINK_SPEC \"-m elf32_sparc -Y P,/usr/lib %{shared:-shared} \\\n   %{!shared: \\\n@@ -152,6 +168,15 @@ Boston, MA 02111-1307, USA.  */\n         %{!dynamic-linker:-dynamic-linker /lib/ld-linux.so.1}} \\\n         %{static:-static}}}\"\n #endif\n+#else\n+#define LINK_SPEC \"-m elf32_sparc -Y P,/usr/lib %{shared:-shared} \\\n+  %{!shared: \\\n+    %{!ibcs: \\\n+      %{!static: \\\n+        %{rdynamic:-export-dynamic} \\\n+        %{!dynamic-linker:-dynamic-linker /lib/ld-linux.so.2}} \\\n+        %{static:-static}}}\"\n+#endif\n \n /* The sun bundled assembler doesn't accept -Yd, (and neither does gas).\n    It's safe to pass -s always, even if -g is not used. */"}]}