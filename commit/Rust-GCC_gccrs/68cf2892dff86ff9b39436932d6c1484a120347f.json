{"sha": "68cf2892dff86ff9b39436932d6c1484a120347f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjhjZjI4OTJkZmY4NmZmOWIzOTQzNjkzMmQ2YzE0ODRhMTIwMzQ3Zg==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2018-09-28T22:30:45Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2018-09-28T22:30:45Z"}, "message": "rs5000: Delete all specific asm_cpu_* and ASM_CPU_*_SPEC\n\nNow that e.g. ASM_CPU_POWER5_SPEC is always \"-mpower5\" it is clearer and\neasier to just write that directly.\n\n\n\t* config/rs6000/driver-rs6000.c (asm_names): Adjust the entries for\n\tpower5 .. power9 to remove indirection.\n\t* config/rs6000/rs6000.h (ASM_CPU_POWER5_SPEC, ASM_CPU_POWER6_SPEC,\n\tASM_CPU_POWER7_SPEC, ASM_CPU_POWER8_SPEC, ASM_CPU_POWER9_SPEC,\n\tASM_CPU_476_SPEC): Delete.\n\t(ASM_CPU_SPEC): Adjust.\n\t(EXTRA_SPECS): Delete asm_cpu_power5, asm_cpu_power6, asm_cpu_power7,\n\tasm_cpu_power8, asm_cpu_power9, asm_cpu_476.\n\nFrom-SVN: r264704", "tree": {"sha": "a1094dcc743e025ca569cb5c1dc5262e41c32f91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a1094dcc743e025ca569cb5c1dc5262e41c32f91"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/68cf2892dff86ff9b39436932d6c1484a120347f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68cf2892dff86ff9b39436932d6c1484a120347f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68cf2892dff86ff9b39436932d6c1484a120347f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68cf2892dff86ff9b39436932d6c1484a120347f/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f0ca30bf140486165af102ba9823f99b8eb0e558", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0ca30bf140486165af102ba9823f99b8eb0e558", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0ca30bf140486165af102ba9823f99b8eb0e558"}], "stats": {"total": 65, "additions": 31, "deletions": 34}, "files": [{"sha": "0f703f5c0fb5792add779cb61d08c459130fc1a8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cf2892dff86ff9b39436932d6c1484a120347f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cf2892dff86ff9b39436932d6c1484a120347f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=68cf2892dff86ff9b39436932d6c1484a120347f", "patch": "@@ -1,3 +1,14 @@\n+2018-09-28  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config/rs6000/driver-rs6000.c (asm_names): Adjust the entries for\n+\tpower5 .. power9 to remove indirection.\n+\t* config/rs6000/rs6000.h (ASM_CPU_POWER5_SPEC, ASM_CPU_POWER6_SPEC,\n+\tASM_CPU_POWER7_SPEC, ASM_CPU_POWER8_SPEC, ASM_CPU_POWER9_SPEC,\n+\tASM_CPU_476_SPEC): Delete.\n+\t(ASM_CPU_SPEC): Adjust.\n+\t(EXTRA_SPECS): Delete asm_cpu_power5, asm_cpu_power6, asm_cpu_power7,\n+\tasm_cpu_power8, asm_cpu_power9, asm_cpu_476.\n+\n 2018-09-28  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config.in: Delete HAVE_AS_DCI."}, {"sha": "948888b4c793f0e4df57176d6155085b02ce3d82", "filename": "gcc/config/rs6000/driver-rs6000.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cf2892dff86ff9b39436932d6c1484a120347f/gcc%2Fconfig%2Frs6000%2Fdriver-rs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cf2892dff86ff9b39436932d6c1484a120347f/gcc%2Fconfig%2Frs6000%2Fdriver-rs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fdriver-rs6000.c?ref=68cf2892dff86ff9b39436932d6c1484a120347f", "patch": "@@ -468,13 +468,13 @@ static const struct asm_name asm_names[] = {\n   { \"cell\",\t\"-mcell\" },\n   { \"power3\",\t\"-mppc64\" },\n   { \"power4\",\t\"-mpower4\" },\n-  { \"power5\",\t\"%(asm_cpu_power5)\" },\n-  { \"power5+\",\t\"%(asm_cpu_power5)\" },\n-  { \"power6\",\t\"%(asm_cpu_power6) -maltivec\" },\n-  { \"power6x\",\t\"%(asm_cpu_power6) -maltivec\" },\n-  { \"power7\",\t\"%(asm_cpu_power7)\" },\n-  { \"power8\",\t\"%(asm_cpu_power8)\" },\n-  { \"power9\",\t\"%(asm_cpu_power9)\" },\n+  { \"power5\",\t\"-mpower5\" },\n+  { \"power5+\",\t\"-mpower5\" },\n+  { \"power6\",\t\"-mpower6 -maltivec\" },\n+  { \"power6x\",\t\"-mpower6 -maltivec\" },\n+  { \"power7\",\t\"-mpower7\" },\n+  { \"power8\",\t\"-mpower8\" },\n+  { \"power9\",\t\"-mpower9\" },\n   { \"powerpc\",\t\"-mppc\" },\n   { \"rs64a\",\t\"-mppc64\" },\n   { \"401\",\t\"-mppc\" },"}, {"sha": "86a7fb83bd84fa25239e82c86bac8f53a311ec72", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 13, "deletions": 27, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68cf2892dff86ff9b39436932d6c1484a120347f/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68cf2892dff86ff9b39436932d6c1484a120347f/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=68cf2892dff86ff9b39436932d6c1484a120347f", "patch": "@@ -72,14 +72,6 @@\n #define PPC405_ERRATUM77 0\n #endif\n \n-#define ASM_CPU_POWER5_SPEC \"-mpower5\"\n-#define ASM_CPU_POWER6_SPEC \"-mpower6 -maltivec\"\n-#define ASM_CPU_POWER7_SPEC \"-mpower7\"\n-#define ASM_CPU_POWER8_SPEC \"-mpower8\"\n-#define ASM_CPU_POWER9_SPEC \"-mpower9\"\n-\n-#define ASM_CPU_476_SPEC \"-m476\"\n-\n /* Common ASM definitions used by ASM_SPEC among the various targets for\n    handling -mcpu=xxx switches.  There is a parallel list in driver-rs6000.c to\n    provide the default assembler options if the user uses -mcpu=native, so if\n@@ -93,16 +85,16 @@\n %{mcpu=cell: -mcell} \\\n %{mcpu=power3: -mppc64} \\\n %{mcpu=power4: -mpower4} \\\n-%{mcpu=power5: %(asm_cpu_power5)} \\\n-%{mcpu=power5+: %(asm_cpu_power5)} \\\n-%{mcpu=power6: %(asm_cpu_power6) -maltivec} \\\n-%{mcpu=power6x: %(asm_cpu_power6) -maltivec} \\\n-%{mcpu=power7: %(asm_cpu_power7)} \\\n-%{mcpu=power8: %{!mpower9-vector: %(asm_cpu_power8)}} \\\n-%{mcpu=power9: %(asm_cpu_power9)} \\\n+%{mcpu=power5: -mpower5} \\\n+%{mcpu=power5+: -mpower5} \\\n+%{mcpu=power6: -mpower6 -maltivec} \\\n+%{mcpu=power6x: -mpower6 -maltivec} \\\n+%{mcpu=power7: -mpower7} \\\n+%{mcpu=power8: %{!mpower9-vector: -mpower8}} \\\n+%{mcpu=power9: -mpower9} \\\n %{mcpu=a2: -ma2} \\\n %{mcpu=powerpc: -mppc} \\\n-%{mcpu=powerpc64le: %(asm_cpu_power8)} \\\n+%{mcpu=powerpc64le: -mpower8} \\\n %{mcpu=rs64a: -mppc64} \\\n %{mcpu=401: -mppc} \\\n %{mcpu=403: -m403} \\\n@@ -112,8 +104,8 @@\n %{mcpu=440fp: -m440} \\\n %{mcpu=464: -m440} \\\n %{mcpu=464fp: -m440} \\\n-%{mcpu=476: %(asm_cpu_476)} \\\n-%{mcpu=476fp: %(asm_cpu_476)} \\\n+%{mcpu=476: -m476} \\\n+%{mcpu=476fp: -m476} \\\n %{mcpu=505: -mppc} \\\n %{mcpu=601: -m601} \\\n %{mcpu=602: -mppc} \\\n@@ -145,9 +137,9 @@\n %{mcpu=e5500: -me5500} \\\n %{mcpu=e6500: -me6500} \\\n %{maltivec: -maltivec} \\\n-%{mvsx: -mvsx %{!maltivec: -maltivec} %{!mcpu*: %(asm_cpu_power7)}} \\\n-%{mpower8-vector|mcrypto|mdirect-move|mhtm: %{!mcpu*: %(asm_cpu_power8)}} \\\n-%{mpower9-vector: %{!mcpu*|mcpu=power8: %(asm_cpu_power9)}} \\\n+%{mvsx: -mvsx %{!maltivec: -maltivec} %{!mcpu*: -mpower7}} \\\n+%{mpower8-vector|mcrypto|mdirect-move|mhtm: %{!mcpu*: -mpower8}} \\\n+%{mpower9-vector: %{!mcpu*|mcpu=power8: -mpower9}} \\\n -many\"\n \n #define CPP_DEFAULT_SPEC \"\"\n@@ -172,12 +164,6 @@\n   { \"asm_cpu_native\",\t\tASM_CPU_NATIVE_SPEC },\t\t\t\\\n   { \"asm_default\",\t\tASM_DEFAULT_SPEC },\t\t\t\\\n   { \"cc1_cpu\",\t\t\tCC1_CPU_SPEC },\t\t\t\t\\\n-  { \"asm_cpu_power5\",\t\tASM_CPU_POWER5_SPEC },\t\t\t\\\n-  { \"asm_cpu_power6\",\t\tASM_CPU_POWER6_SPEC },\t\t\t\\\n-  { \"asm_cpu_power7\",\t\tASM_CPU_POWER7_SPEC },\t\t\t\\\n-  { \"asm_cpu_power8\",\t\tASM_CPU_POWER8_SPEC },\t\t\t\\\n-  { \"asm_cpu_power9\",\t\tASM_CPU_POWER9_SPEC },\t\t\t\\\n-  { \"asm_cpu_476\",\t\tASM_CPU_476_SPEC },\t\t\t\\\n   SUBTARGET_EXTRA_SPECS\n \n /* -mcpu=native handling only makes sense with compiler running on"}]}