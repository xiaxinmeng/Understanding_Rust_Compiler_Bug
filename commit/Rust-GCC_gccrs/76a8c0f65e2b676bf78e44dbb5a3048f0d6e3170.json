{"sha": "76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzZhOGMwZjY1ZTJiNjc2YmY3OGU0NGRiYjVhMzA0OGYwZDZlMzE3MA==", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-02-24T22:13:40Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-02-25T18:04:33Z"}, "message": "libstdc++: LWG 3397 basic_istream_view::iterator should not provide iterator_category\n\nlibstdc++-v3/ChangeLog:\n\n\tLWG 3397 basic_istream_view::iterator should not provide\n\titerator_category\n\t* include/std/ranges (basic_istream_view:_Iterator::iterator_category):\n\tRename to ...\n\t(basic_istream_view:_Iterator::iterator_concept): ... this.\n\t* testsuite/std/ranges/istream_view.cc: Augment test.", "tree": {"sha": "e4ede990f82cee12f11a2b725c176e37facb64f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4ede990f82cee12f11a2b725c176e37facb64f8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170/comments", "author": null, "committer": null, "parents": [{"sha": "ec15da7c33055c37ba58cb778a4414aae49f16ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec15da7c33055c37ba58cb778a4414aae49f16ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec15da7c33055c37ba58cb778a4414aae49f16ba"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "071ba3a2a0460aeab9f259e8d9b05e23efeeba0d", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170", "patch": "@@ -1,5 +1,12 @@\n 2020-02-25  Patrick Palka  <ppalka@redhat.com>\n \n+\tLWG 3397 basic_istream_view::iterator should not provide\n+\titerator_category\n+\t* include/std/ranges (basic_istream_view:_Iterator::iterator_category):\n+\tRename to ...\n+\t(basic_istream_view:_Iterator::iterator_concept): ... this.\n+\t* testsuite/std/ranges/istream_view.cc: Augment test.\n+\n \tLWG 3325 Constrain return type of transformation function for\n \ttransform_view\n \t* include/std/ranges (transform_view): Constrain the return type of the"}, {"sha": "a7f4da957ef1d720710149ee6d6bf98d401684b4", "filename": "libstdc++-v3/include/std/ranges", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges?ref=76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170", "patch": "@@ -971,7 +971,7 @@ namespace views\n       struct _Iterator\n       {\n       public:\n-\tusing iterator_category = input_iterator_tag;\n+\tusing iterator_concept = input_iterator_tag;\n \tusing difference_type = ptrdiff_t;\n \tusing value_type = _Val;\n "}, {"sha": "f74e05e347a9b2bbdab10f111b801322d1340a11", "filename": "libstdc++-v3/testsuite/std/ranges/istream_view.cc", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fistream_view.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fistream_view.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fistream_view.cc?ref=76a8c0f65e2b676bf78e44dbb5a3048f0d6e3170", "patch": "@@ -68,10 +68,26 @@ test03()\n   VERIFY( ranges::equal(v, (int[]){0,1,2,3,4}) );\n }\n \n+template<typename T>\n+concept has_iterator_category = requires { typename T::iterator_category; };\n+\n+void\n+test04()\n+{\n+  std::istringstream s(\"12345\");\n+  auto v = ranges::istream_view<char>(s);\n+  // LWG 3397\n+  using It = ranges::iterator_t<decltype(v)>;\n+  static_assert(!has_iterator_category<It>);\n+  static_assert(std::input_iterator<It>);\n+  static_assert(!std::forward_iterator<It>);\n+}\n+\n int\n main()\n {\n   test01();\n   test02();\n   test03();\n+  test04();\n }"}]}