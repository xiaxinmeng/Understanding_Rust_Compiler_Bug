{"sha": "596e808cf6cc91f556838099b832bd01ce71e828", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTk2ZTgwOGNmNmNjOTFmNTU2ODM4MDk5YjgzMmJkMDFjZTcxZTgyOA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2014-08-22T18:39:16Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2014-08-22T18:39:16Z"}, "message": "c.opt (Wcomment): Use CPP, Var and LangEnabledBy.\n\ngcc/c-family/ChangeLog:\n\n2014-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* c.opt (Wcomment): Use CPP, Var and LangEnabledBy.\n\t(Wmultichar): Likewise.\n\t(Wdate-time): Use C-family languages instead of Common. Use CPP\n\tand Var.\n\t* c-opts.c (c_common_handle_option): Do not handle the above\n\toptions here.\n\t(sanitize_cpp_opts): Likewise.\n\ngcc/testsuite/ChangeLog:\n\n2014-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* g++.dg/warn/wdate-time.C: Remove.\n\t* gcc.dg/wdate-time.c: Move from here...\n\t* c-c++-common/wdate-time.c: ... to here.\n\nFrom-SVN: r214350", "tree": {"sha": "6489058639e3b1df63ce8eeb1d0b4fbd5b3eb3b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6489058639e3b1df63ce8eeb1d0b4fbd5b3eb3b1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/596e808cf6cc91f556838099b832bd01ce71e828", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/596e808cf6cc91f556838099b832bd01ce71e828", "html_url": "https://github.com/Rust-GCC/gccrs/commit/596e808cf6cc91f556838099b832bd01ce71e828", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/596e808cf6cc91f556838099b832bd01ce71e828/comments", "author": null, "committer": null, "parents": [{"sha": "1d4555205a6e40cafd2dc6828e70de48959f34f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d4555205a6e40cafd2dc6828e70de48959f34f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d4555205a6e40cafd2dc6828e70de48959f34f6"}], "stats": {"total": 46, "additions": 20, "deletions": 26}, "files": [{"sha": "3bc50ef25261e31868c391172374f472d4afb0c5", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=596e808cf6cc91f556838099b832bd01ce71e828", "patch": "@@ -1,3 +1,13 @@\n+2014-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* c.opt (Wcomment): Use CPP, Var and LangEnabledBy.\n+\t(Wmultichar): Likewise.\n+\t(Wdate-time): Use C-family languages instead of Common. Use CPP\n+\tand Var.\n+\t* c-opts.c (c_common_handle_option): Do not handle the above\n+\toptions here.\n+\t(sanitize_cpp_opts): Likewise.\n+\n 2014-08-21  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR fortran/44054"}, {"sha": "ddc480be1dd14cc8f000fba43e528626f42c50a8", "filename": "gcc/c-family/c-opts.c", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Fc-family%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Fc-family%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-opts.c?ref=596e808cf6cc91f556838099b832bd01ce71e828", "patch": "@@ -382,18 +382,13 @@ c_common_handle_option (size_t scode, const char *arg, int value,\n       /* ??? Don't add new options here. Use LangEnabledBy in c.opt.  */\n \n       cpp_opts->warn_trigraphs = value;\n-      cpp_opts->warn_comments = value;\n       cpp_opts->warn_num_sign_change = value;\n       break;\n \n     case OPT_Wbuiltin_macro_redefined:\n       cpp_opts->warn_builtin_macro_redefined = value;\n       break;\n \n-    case OPT_Wcomment:\n-      cpp_opts->warn_comments = value;\n-      break;\n-\n     case OPT_Wc___compat:\n       cpp_opts->warn_cxx_operator_names = value;\n       break;\n@@ -421,12 +416,8 @@ c_common_handle_option (size_t scode, const char *arg, int value,\n     case OPT_Wmissing_include_dirs:\n       cpp_opts->warn_missing_include_dirs = value;\n       break;\n-\n-    case OPT_Wmultichar:\n-      cpp_opts->warn_multichar = value;\n-      break;\n-\n     case OPT_Wnormalized_:\n+      /* FIXME: Move all this to c.opt.  */\n       if (kind == DK_ERROR)\n \t{\n \t  gcc_assert (!arg);\n@@ -1310,7 +1301,6 @@ sanitize_cpp_opts (void)\n \n   cpp_opts->unsigned_char = !flag_signed_char;\n   cpp_opts->stdc_0_in_system_headers = STDC_0_IN_SYSTEM_HEADERS;\n-  cpp_opts->warn_date_time = cpp_warn_date_time;\n   cpp_opts->cpp_warn_c90_c99_compat = warn_c90_c99_compat;\n \n   /* Wlong-long is disabled by default. It is enabled by:"}, {"sha": "140e89f613ca75780b005c1226f2981de9144e58", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=596e808cf6cc91f556838099b832bd01ce71e828", "patch": "@@ -328,7 +328,7 @@ C ObjC C++ ObjC++ Var(warn_clobbered) Warning EnabledBy(Wextra)\n Warn about variables that might be changed by \\\"longjmp\\\" or \\\"vfork\\\"\n \n Wcomment\n-C ObjC C++ ObjC++ Warning\n+C ObjC C++ ObjC++ CPP(warn_comments) Var(cpp_warn_comment) Warning LangEnabledBy(C ObjC C++ ObjC++,Wall)\n Warn about possibly nested block comments, and C++ comments spanning more than one physical line\n \n Wcomments\n@@ -598,7 +598,7 @@ Wmudflap\n C ObjC C++ ObjC++ Ignore Warn(switch %qs is no longer supported)\n \n Wmultichar\n-C ObjC C++ ObjC++ Warning\n+C ObjC C++ ObjC++ CPP(warn_multichar) Var(cpp_warn_multichar) Warning\n Warn about use of multi-character character constants\n \n Wnarrowing\n@@ -702,7 +702,7 @@ C ObjC C++ ObjC++ Var(warn_pragmas) Init(1) Warning\n Warn about misuses of pragmas\n \n Wdate-time\n-Common Var(cpp_warn_date_time) Warning\n+C ObjC C++ ObjC++ CPP(warn_date_time) Var(cpp_warn_date_time) Warning\n Warn about __TIME__, __DATE__ and __TIMESTAMP__ usage\n \n Wproperty-assign-default"}, {"sha": "b47e090442360f3041d59fb6dd2cfda2e975ef99", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=596e808cf6cc91f556838099b832bd01ce71e828", "patch": "@@ -1,3 +1,9 @@\n+2014-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* g++.dg/warn/wdate-time.C: Remove.\n+\t* gcc.dg/wdate-time.c: Move from here...\n+\t* c-c++-common/wdate-time.c: ... to here.\n+\n 2014-08-22  Joost VandeVondele  <Joost.VandeVondele@mat.ethz.ch>\n \n \t* gfortran.dg/use_without_only_1.f90: New test."}, {"sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391", "filename": "gcc/testsuite/c-c++-common/wdate-time.c", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fwdate-time.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/596e808cf6cc91f556838099b832bd01ce71e828/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fwdate-time.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fwdate-time.c?ref=596e808cf6cc91f556838099b832bd01ce71e828"}, {"sha": "0ff27b4cd6fcea4564ffc39a094197b653b41609", "filename": "gcc/testsuite/g++.dg/warn/wdate-time.C", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d4555205a6e40cafd2dc6828e70de48959f34f6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fwdate-time.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d4555205a6e40cafd2dc6828e70de48959f34f6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fwdate-time.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fwdate-time.C?ref=1d4555205a6e40cafd2dc6828e70de48959f34f6", "patch": "@@ -1,6 +0,0 @@\n-/* { dg-do compile } */\n-/* { dg-options \"-Wdate-time\" } */\n-\n-const char time[] = __TIME__;  /* { dg-warning \"might prevent reproducible builds\" }  */\n-const char date[] = __DATE__;  /* { dg-warning \"might prevent reproducible builds\" }  */\n-const char timestamp[] = __TIMESTAMP__;  /* { dg-warning \"might prevent reproducible builds\" }  */"}, {"sha": "0ff27b4cd6fcea4564ffc39a094197b653b41609", "filename": "gcc/testsuite/gcc.dg/wdate-time.c", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d4555205a6e40cafd2dc6828e70de48959f34f6/gcc%2Ftestsuite%2Fgcc.dg%2Fwdate-time.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d4555205a6e40cafd2dc6828e70de48959f34f6/gcc%2Ftestsuite%2Fgcc.dg%2Fwdate-time.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fwdate-time.c?ref=1d4555205a6e40cafd2dc6828e70de48959f34f6", "patch": "@@ -1,6 +0,0 @@\n-/* { dg-do compile } */\n-/* { dg-options \"-Wdate-time\" } */\n-\n-const char time[] = __TIME__;  /* { dg-warning \"might prevent reproducible builds\" }  */\n-const char date[] = __DATE__;  /* { dg-warning \"might prevent reproducible builds\" }  */\n-const char timestamp[] = __TIMESTAMP__;  /* { dg-warning \"might prevent reproducible builds\" }  */"}]}