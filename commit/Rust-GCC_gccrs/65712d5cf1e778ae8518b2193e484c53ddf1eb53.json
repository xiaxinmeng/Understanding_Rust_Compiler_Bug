{"sha": "65712d5cf1e778ae8518b2193e484c53ddf1eb53", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjU3MTJkNWNmMWU3NzhhZTg1MThiMjE5M2U0ODRjNTNkZGYxZWI1Mw==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2011-05-23T17:57:35Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2011-05-23T17:57:35Z"}, "message": "re PR rtl-optimization/48826 (ICE in dwarf2out_var_location, at dwarf2out.c:22013)\n\ngcc/\n\tPR rtl-optimization/48826\n\t* emit-rtl.c (try_split): When splitting a call that is followed\n\tby a NOTE_INSN_CALL_ARG_LOCATION, move the note after the new call.\n\nFrom-SVN: r174080", "tree": {"sha": "cbcfd8af4785e068775d431b87251e68e62356bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cbcfd8af4785e068775d431b87251e68e62356bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/65712d5cf1e778ae8518b2193e484c53ddf1eb53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65712d5cf1e778ae8518b2193e484c53ddf1eb53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65712d5cf1e778ae8518b2193e484c53ddf1eb53", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65712d5cf1e778ae8518b2193e484c53ddf1eb53/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9025085e6aa1f39e8e20f2f33be85bb2f2f05753", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9025085e6aa1f39e8e20f2f33be85bb2f2f05753", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9025085e6aa1f39e8e20f2f33be85bb2f2f05753"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "97719219e4f23d9e512cce3fd767a401a465e6ab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65712d5cf1e778ae8518b2193e484c53ddf1eb53/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65712d5cf1e778ae8518b2193e484c53ddf1eb53/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=65712d5cf1e778ae8518b2193e484c53ddf1eb53", "patch": "@@ -1,3 +1,9 @@\n+2011-05-23  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\tPR rtl-optimization/48826\n+\t* emit-rtl.c (try_split): When splitting a call that is followed\n+\tby a NOTE_INSN_CALL_ARG_LOCATION, move the note after the new call.\n+\n 2011-05-23  Jakub Jelinek  <jakub@redhat.com>\n \n \t* cfgexpand.c (expand_debug_expr): For unused non-addressable"}, {"sha": "988072b2cbfaf1898b13f6774aa3d0a4731a7868", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 25, "deletions": 2, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65712d5cf1e778ae8518b2193e484c53ddf1eb53/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65712d5cf1e778ae8518b2193e484c53ddf1eb53/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=65712d5cf1e778ae8518b2193e484c53ddf1eb53", "patch": "@@ -3470,17 +3470,40 @@ try_split (rtx pat, rtx trial, int last)\n     }\n \n   /* If we are splitting a CALL_INSN, look for the CALL_INSN\n-     in SEQ and copy our CALL_INSN_FUNCTION_USAGE to it.  */\n+     in SEQ and copy any additional information across.  */\n   if (CALL_P (trial))\n     {\n       for (insn = insn_last; insn ; insn = PREV_INSN (insn))\n \tif (CALL_P (insn))\n \t  {\n-\t    rtx *p = &CALL_INSN_FUNCTION_USAGE (insn);\n+\t    rtx next, *p;\n+\n+\t    /* Add the old CALL_INSN_FUNCTION_USAGE to whatever the\n+\t       target may have explicitly specified.  */\n+\t    p = &CALL_INSN_FUNCTION_USAGE (insn);\n \t    while (*p)\n \t      p = &XEXP (*p, 1);\n \t    *p = CALL_INSN_FUNCTION_USAGE (trial);\n+\n+\t    /* If the old call was a sibling call, the new one must\n+\t       be too.  */\n \t    SIBLING_CALL_P (insn) = SIBLING_CALL_P (trial);\n+\n+\t    /* If the new call is the last instruction in the sequence,\n+\t       it will effectively replace the old call in-situ.  Otherwise\n+\t       we must move any following NOTE_INSN_CALL_ARG_LOCATION note\n+\t       so that it comes immediately after the new call.  */\n+\t    if (NEXT_INSN (insn))\n+\t      {\n+\t\tnext = NEXT_INSN (trial);\n+\t\tif (next\n+\t\t    && NOTE_P (next)\n+\t\t    && NOTE_KIND (next) == NOTE_INSN_CALL_ARG_LOCATION)\n+\t\t  {\n+\t\t    remove_insn (next);\n+\t\t    add_insn_after (next, insn, NULL);\n+\t\t  }\n+\t      }\n \t  }\n     }\n "}]}