{"sha": "3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZlNzkzZGY3YzQ5NTJiZGU0N2IyODExMjEwYjdlMmMyY2MwZmY5Nw==", "commit": {"author": {"name": "Trevor Saunders", "email": "tbsaunde+gcc@tbsaunde.org", "date": "2017-07-29T01:39:31Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2017-07-29T01:39:31Z"}, "message": "simplify the bitmap alloc_stat functions with c++\n\ngcc/fortran/ChangeLog:\n\n2017-07-28  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* resolve.c (find_reachable_labels): Adjust.\n\ngcc/ChangeLog:\n\n2017-07-28  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* bitmap.c (bitmap_obstack_alloc_stat): Rename to bitmap_alloc.\n\t(bitmap_gc_alloc_stat): Rename to bitmap_gc_alloc.\n\t* bitmap.h (bitmap_obstack_alloc_stat): Adjust prototype.\n\t(bitmap_gc_alloc_stat): Likewise.\n\t(BITMAP_ALLOC, BITMAP_GGC_ALLOC): Adjust.\n\nFrom-SVN: r250709", "tree": {"sha": "ce4087bee2f7a4036894fef11f1f55c23a5d9a14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ce4087bee2f7a4036894fef11f1f55c23a5d9a14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/comments", "author": null, "committer": null, "parents": [{"sha": "22a7303de24b120c7124d0b2a4ad778bd452319e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22a7303de24b120c7124d0b2a4ad778bd452319e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22a7303de24b120c7124d0b2a4ad778bd452319e"}], "stats": {"total": 32, "additions": 19, "deletions": 13}, "files": [{"sha": "514167e6f8bc8564f7b72fdb690c7ce4d861cd6b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "patch": "@@ -1,3 +1,11 @@\n+2017-07-28  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* bitmap.c (bitmap_obstack_alloc_stat): Rename to bitmap_alloc.\n+\t(bitmap_gc_alloc_stat): Rename to bitmap_gc_alloc.\n+\t* bitmap.h (bitmap_obstack_alloc_stat): Adjust prototype.\n+\t(bitmap_gc_alloc_stat): Likewise.\n+\t(BITMAP_ALLOC, BITMAP_GGC_ALLOC): Adjust.\n+\n 2017-07-28  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* rtl.c (shallow_copy_rtx_stat): Remove _stat from name."}, {"sha": "be8d0cc624741adc44b67a3ce860c69e80ea1477", "filename": "gcc/bitmap.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Fbitmap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Fbitmap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbitmap.c?ref=3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "patch": "@@ -273,7 +273,7 @@ bitmap_obstack_release (bitmap_obstack *bit_obstack)\n    it on the default bitmap obstack.  */\n \n bitmap\n-bitmap_obstack_alloc_stat (bitmap_obstack *bit_obstack MEM_STAT_DECL)\n+bitmap_alloc (bitmap_obstack *bit_obstack MEM_STAT_DECL)\n {\n   bitmap map;\n \n@@ -295,7 +295,7 @@ bitmap_obstack_alloc_stat (bitmap_obstack *bit_obstack MEM_STAT_DECL)\n /* Create a new GCd bitmap.  */\n \n bitmap\n-bitmap_gc_alloc_stat (ALONE_MEM_STAT_DECL)\n+bitmap_gc_alloc (ALONE_MEM_STAT_DECL)\n {\n   bitmap map;\n "}, {"sha": "ca047666dc1f8d84c0506f221b09bd92835b4c06", "filename": "gcc/bitmap.h", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Fbitmap.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Fbitmap.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbitmap.h?ref=3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "patch": "@@ -345,10 +345,10 @@ bitmap_initialize_stat (bitmap head, bitmap_obstack *obstack MEM_STAT_DECL)\n #define bitmap_initialize(h,o) bitmap_initialize_stat (h,o MEM_STAT_INFO)\n \n /* Allocate and free bitmaps from obstack, malloc and gc'd memory.  */\n-extern bitmap bitmap_obstack_alloc_stat (bitmap_obstack *obstack MEM_STAT_DECL);\n-#define bitmap_obstack_alloc(t) bitmap_obstack_alloc_stat (t MEM_STAT_INFO)\n-extern bitmap bitmap_gc_alloc_stat (ALONE_MEM_STAT_DECL);\n-#define bitmap_gc_alloc() bitmap_gc_alloc_stat (ALONE_MEM_STAT_INFO)\n+extern bitmap bitmap_alloc (bitmap_obstack *obstack CXX_MEM_STAT_INFO);\n+#define BITMAP_ALLOC bitmap_alloc\n+extern bitmap bitmap_gc_alloc (ALONE_CXX_MEM_STAT_INFO);\n+#define BITMAP_GGC_ALLOC bitmap_gc_alloc\n extern void bitmap_obstack_free (bitmap);\n \n /* A few compatibility/functions macros for compatibility with sbitmaps */\n@@ -365,12 +365,6 @@ extern unsigned bitmap_last_set_bit (const_bitmap);\n /* Compute bitmap hash (for purposes of hashing etc.)  */\n extern hashval_t bitmap_hash (const_bitmap);\n \n-/* Allocate a bitmap from a bit obstack.  */\n-#define BITMAP_ALLOC(OBSTACK) bitmap_obstack_alloc (OBSTACK)\n-\n-/* Allocate a gc'd bitmap.  */\n-#define BITMAP_GGC_ALLOC() bitmap_gc_alloc ()\n-\n /* Do any cleanup needed on a bitmap when it is no longer used.  */\n #define BITMAP_FREE(BITMAP) \\\n        ((void) (bitmap_obstack_free ((bitmap) BITMAP), (BITMAP) = (bitmap) NULL))"}, {"sha": "2b9aba6d8f723afeb05f589fbd300ec6364193f6", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "patch": "@@ -1,3 +1,7 @@\n+2017-07-28  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* resolve.c (find_reachable_labels): Adjust.\n+\n 2017-07-25  Jakub Jelinek  <jakub@redhat.com>\n \n \t* ioparm.def: Use 1U << 31 instead of 1 << 31 as flags2 mask."}, {"sha": "5caf76761ee66e61749e75c9b72721caa0336a3b", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe793df7c4952bde47b2811210b7e2c2cc0ff97/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=3fe793df7c4952bde47b2811210b7e2c2cc0ff97", "patch": "@@ -9098,7 +9098,7 @@ find_reachable_labels (gfc_code *block)\n   if (!block)\n     return;\n \n-  cs_base->reachable_labels = bitmap_obstack_alloc (&labels_obstack);\n+  cs_base->reachable_labels = bitmap_alloc (&labels_obstack);\n \n   /* Collect labels in this block.  We don't keep those corresponding\n      to END {IF|SELECT}, these are checked in resolve_branch by going"}]}