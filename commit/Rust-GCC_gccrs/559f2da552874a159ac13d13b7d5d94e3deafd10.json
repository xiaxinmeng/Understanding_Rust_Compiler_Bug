{"sha": "559f2da552874a159ac13d13b7d5d94e3deafd10", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTU5ZjJkYTU1Mjg3NGExNTlhYzEzZDEzYjdkNWQ5NGUzZGVhZmQxMA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-10-14T23:20:58Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-10-14T23:20:58Z"}, "message": "re PR c/17023 (ICE with nested functions in parameter declaration)\n\n        PR c/17023\n        * c-decl.c (store_parm_decls_oldstyle): Care for parameter type\n        as error_mark_node.\n        * c-parse.in (compstmt_primary_start): Check cur_stmt_list non-null\n        instaed of current_function_decl non-null.\n\nFrom-SVN: r89063", "tree": {"sha": "7534024d48e27ca0af83286859f217f61e28cc3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7534024d48e27ca0af83286859f217f61e28cc3c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/559f2da552874a159ac13d13b7d5d94e3deafd10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/559f2da552874a159ac13d13b7d5d94e3deafd10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/559f2da552874a159ac13d13b7d5d94e3deafd10", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/559f2da552874a159ac13d13b7d5d94e3deafd10/comments", "author": null, "committer": null, "parents": [{"sha": "0c58f841a52644c9845b3c136f3264e6a728ba76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c58f841a52644c9845b3c136f3264e6a728ba76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c58f841a52644c9845b3c136f3264e6a728ba76"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "6be32d736490deeed1b63083b190560715dffba0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=559f2da552874a159ac13d13b7d5d94e3deafd10", "patch": "@@ -1,3 +1,11 @@\n+2004-10-14  Richard Henderson  <rth@redhat.com>\n+\n+\tPR c/17023\n+\t* c-decl.c (store_parm_decls_oldstyle): Care for parameter type\n+\tas error_mark_node.\n+\t* c-parse.in (compstmt_primary_start): Check cur_stmt_list non-null\n+\tinstaed of current_function_decl non-null.\n+\n 2004-10-14  Matt Austern  <austern@apple.com>\n \n \t* pointer-set.c: New file, special-purpose hash table."}, {"sha": "9e9813d7f78416f014330aec087906438c25b95a", "filename": "gcc/c-decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=559f2da552874a159ac13d13b7d5d94e3deafd10", "patch": "@@ -6002,7 +6002,8 @@ store_parm_decls_oldstyle (tree fndecl, const struct c_arg_info *arg_info)\n       if (TREE_CODE (parm) != PARM_DECL)\n \tcontinue;\n \n-      if (!COMPLETE_TYPE_P (TREE_TYPE (parm)))\n+      if (TREE_TYPE (parm) != error_mark_node\n+\t  && !COMPLETE_TYPE_P (TREE_TYPE (parm)))\n \t{\n \t  error (\"%Jparameter %qD has incomplete type\", parm, parm);\n \t  TREE_TYPE (parm) = error_mark_node;"}, {"sha": "289e7c101af4090b6510e01fefc5d6298260eae7", "filename": "gcc/c-parse.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=559f2da552874a159ac13d13b7d5d94e3deafd10", "patch": "@@ -2033,7 +2033,7 @@ compstmt_contents_nonempty:\n \n compstmt_primary_start:\n \t'(' '{'\n-\t\t{ if (current_function_decl == 0)\n+\t\t{ if (cur_stmt_list == NULL)\n \t\t    {\n \t\t      error (\"braced-group within expression allowed \"\n \t\t\t     \"only inside a function\");"}, {"sha": "699844074ed630be31caba6750f9e228ef16c2e0", "filename": "gcc/testsuite/gcc.dg/20041014-1.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2Ftestsuite%2Fgcc.dg%2F20041014-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/559f2da552874a159ac13d13b7d5d94e3deafd10/gcc%2Ftestsuite%2Fgcc.dg%2F20041014-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20041014-1.c?ref=559f2da552874a159ac13d13b7d5d94e3deafd10", "patch": "@@ -0,0 +1,10 @@\n+/* PR c/17023 */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+void\n+f(a, b)\n+     int a;\n+     int b[({ void h() {} 1; })];\t/* { dg-error \"braced-group\" } */\n+{\n+}"}]}