{"sha": "1949d7540a0322993bcae2f8893e2dbd29209040", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTk0OWQ3NTQwYTAzMjI5OTNiY2FlMmY4ODkzZTJkYmQyOTIwOTA0MA==", "commit": {"author": {"name": "Matthias Kretz", "email": "m.kretz@gsi.de", "date": "2021-06-30T08:41:33Z"}, "committer": {"name": "Matthias Kretz", "email": "m.kretz@gsi.de", "date": "2021-09-20T13:13:11Z"}, "message": "c-family: Add more predefined macros for math flags\n\nLibrary code, especially in headers, sometimes needs to know how the\ncompiler interprets / optimizes floating-point types and operations.\nThis information can be used for additional optimizations or for\nensuring correctness. This change makes -freciprocal-math,\n-fno-signed-zeros, -fno-trapping-math, -fassociative-math, and\n-frounding-math report their state via corresponding pre-defined macros.\n\nSigned-off-by: Matthias Kretz <m.kretz@gsi.de>\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.dg/associative-math-1.c: New test.\n\t* gcc.dg/associative-math-2.c: New test.\n\t* gcc.dg/no-signed-zeros-1.c: New test.\n\t* gcc.dg/no-signed-zeros-2.c: New test.\n\t* gcc.dg/no-trapping-math-1.c: New test.\n\t* gcc.dg/no-trapping-math-2.c: New test.\n\t* gcc.dg/reciprocal-math-1.c: New test.\n\t* gcc.dg/reciprocal-math-2.c: New test.\n\t* gcc.dg/rounding-math-1.c: New test.\n\t* gcc.dg/rounding-math-2.c: New test.\n\ngcc/c-family/ChangeLog:\n\n\t* c-cppbuiltin.c (c_cpp_builtins_optimize_pragma): Define or\n\tundefine __RECIPROCAL_MATH__, __NO_SIGNED_ZEROS__,\n\t__NO_TRAPPING_MATH__, __ASSOCIATIVE_MATH__, and\n\t__ROUNDING_MATH__ according to the new optimization flags.\n\ngcc/ChangeLog:\n\n\t* cppbuiltin.c (define_builtin_macros_for_compilation_flags):\n\tDefine __RECIPROCAL_MATH__, __NO_SIGNED_ZEROS__,\n\t__NO_TRAPPING_MATH__, __ASSOCIATIVE_MATH__, and\n\t__ROUNDING_MATH__ according to their corresponding flags.\n\t* doc/cpp.texi: Document __RECIPROCAL_MATH__,\n\t__NO_SIGNED_ZEROS__, __NO_TRAPPING_MATH__, __ASSOCIATIVE_MATH__,\n\tand __ROUNDING_MATH__.", "tree": {"sha": "d0c88b42ad3ae57574993673ea95ff691b2f4ecf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0c88b42ad3ae57574993673ea95ff691b2f4ecf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1949d7540a0322993bcae2f8893e2dbd29209040", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1949d7540a0322993bcae2f8893e2dbd29209040", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1949d7540a0322993bcae2f8893e2dbd29209040", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1949d7540a0322993bcae2f8893e2dbd29209040/comments", "author": {"login": "mattkretz", "id": 3306474, "node_id": "MDQ6VXNlcjMzMDY0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3306474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattkretz", "html_url": "https://github.com/mattkretz", "followers_url": "https://api.github.com/users/mattkretz/followers", "following_url": "https://api.github.com/users/mattkretz/following{/other_user}", "gists_url": "https://api.github.com/users/mattkretz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattkretz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattkretz/subscriptions", "organizations_url": "https://api.github.com/users/mattkretz/orgs", "repos_url": "https://api.github.com/users/mattkretz/repos", "events_url": "https://api.github.com/users/mattkretz/events{/privacy}", "received_events_url": "https://api.github.com/users/mattkretz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mattkretz", "id": 3306474, "node_id": "MDQ6VXNlcjMzMDY0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3306474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattkretz", "html_url": "https://github.com/mattkretz", "followers_url": "https://api.github.com/users/mattkretz/followers", "following_url": "https://api.github.com/users/mattkretz/following{/other_user}", "gists_url": "https://api.github.com/users/mattkretz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattkretz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattkretz/subscriptions", "organizations_url": "https://api.github.com/users/mattkretz/orgs", "repos_url": "https://api.github.com/users/mattkretz/repos", "events_url": "https://api.github.com/users/mattkretz/events{/privacy}", "received_events_url": "https://api.github.com/users/mattkretz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71a4bdada59d2d6d1f17c949eaf9377ebb7a8854", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71a4bdada59d2d6d1f17c949eaf9377ebb7a8854", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71a4bdada59d2d6d1f17c949eaf9377ebb7a8854"}], "stats": {"total": 223, "additions": 223, "deletions": 0}, "files": [{"sha": "a2992733114e56b697a0bf6fcb48128dccaef131", "filename": "gcc/c-family/c-cppbuiltin.c", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Fc-family%2Fc-cppbuiltin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Fc-family%2Fc-cppbuiltin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-cppbuiltin.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -628,6 +628,31 @@ c_cpp_builtins_optimize_pragma (cpp_reader *pfile, tree prev_tree,\n       cpp_undef (pfile, \"__FINITE_MATH_ONLY__\");\n       cpp_define_unused (pfile, \"__FINITE_MATH_ONLY__=0\");\n     }\n+\n+  if (!prev->x_flag_reciprocal_math && cur->x_flag_reciprocal_math)\n+    cpp_define_unused (pfile, \"__RECIPROCAL_MATH__\");\n+  else if (prev->x_flag_reciprocal_math && !cur->x_flag_reciprocal_math)\n+    cpp_undef (pfile, \"__RECIPROCAL_MATH__\");\n+\n+  if (!prev->x_flag_signed_zeros && cur->x_flag_signed_zeros)\n+    cpp_undef (pfile, \"__NO_SIGNED_ZEROS__\");\n+  else if (prev->x_flag_signed_zeros && !cur->x_flag_signed_zeros)\n+    cpp_define_unused (pfile, \"__NO_SIGNED_ZEROS__\");\n+\n+  if (!prev->x_flag_trapping_math && cur->x_flag_trapping_math)\n+    cpp_undef (pfile, \"__NO_TRAPPING_MATH__\");\n+  else if (prev->x_flag_trapping_math && !cur->x_flag_trapping_math)\n+    cpp_define_unused (pfile, \"__NO_TRAPPING_MATH__\");\n+\n+  if (!prev->x_flag_associative_math && cur->x_flag_associative_math)\n+    cpp_define_unused (pfile, \"__ASSOCIATIVE_MATH__\");\n+  else if (prev->x_flag_associative_math && !cur->x_flag_associative_math)\n+    cpp_undef (pfile, \"__ASSOCIATIVE_MATH__\");\n+\n+  if (!prev->x_flag_rounding_math && cur->x_flag_rounding_math)\n+    cpp_define_unused (pfile, \"__ROUNDING_MATH__\");\n+  else if (prev->x_flag_rounding_math && !cur->x_flag_rounding_math)\n+    cpp_undef (pfile, \"__ROUNDING_MATH__\");\n }\n \n "}, {"sha": "e112ee832830efb045d7fe77f57a1839ae51e5ba", "filename": "gcc/cppbuiltin.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Fcppbuiltin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Fcppbuiltin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppbuiltin.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -110,6 +110,16 @@ define_builtin_macros_for_compilation_flags (cpp_reader *pfile)\n     cpp_define (pfile, \"__SUPPORT_SNAN__\");\n   if (!flag_errno_math)\n     cpp_define (pfile, \"__NO_MATH_ERRNO__\");\n+  if (flag_reciprocal_math)\n+    cpp_define (pfile, \"__RECIPROCAL_MATH__\");\n+  if (!flag_signed_zeros)\n+    cpp_define (pfile, \"__NO_SIGNED_ZEROS__\");\n+  if (!flag_trapping_math)\n+    cpp_define (pfile, \"__NO_TRAPPING_MATH__\");\n+  if (flag_associative_math)\n+    cpp_define (pfile, \"__ASSOCIATIVE_MATH__\");\n+  if (flag_rounding_math)\n+    cpp_define (pfile, \"__ROUNDING_MATH__\");\n \n   cpp_define_formatted (pfile, \"__FINITE_MATH_ONLY__=%d\",\n \t\t\tflag_finite_math_only);"}, {"sha": "53f7204504cf8f42a4a83a0e20af253c0e450664", "filename": "gcc/doc/cpp.texi", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Fdoc%2Fcpp.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Fdoc%2Fcpp.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fcpp.texi?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -2462,6 +2462,24 @@ features are supported by GCC.\n This macro is defined if @option{-fno-math-errno} is used, or enabled\n by another option such as @option{-ffast-math} or by default.\n \n+@item __RECIPROCAL_MATH__\n+This macro is defined if @option{-freciprocal-math} is used, or enabled\n+by another option such as @option{-ffast-math} or by default.\n+\n+@item __NO_SIGNED_ZEROS__\n+This macro is defined if @option{-fno-signed-zeros} is used, or enabled\n+by another option such as @option{-ffast-math} or by default.\n+\n+@item __NO_TRAPPING_MATH__\n+This macro is defined if @option{-fno-trapping-math} is used.\n+\n+@item __ASSOCIATIVE_MATH__\n+This macro is defined if @option{-fassociative-math} is used, or enabled\n+by another option such as @option{-ffast-math} or by default.\n+\n+@item __ROUNDING_MATH__\n+This macro is defined if @option{-frounding-math} is used.\n+\n @item __GNUC_EXECUTION_CHARSET_NAME\n @itemx __GNUC_WIDE_EXECUTION_CHARSET_NAME\n These macros are defined to expand to a narrow string literal of"}, {"sha": "3f9ce5b4bf724f9026451ddcc08c9b71efee6e24", "filename": "gcc/testsuite/gcc.dg/associative-math-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fassociative-math-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fassociative-math-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fassociative-math-1.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __ASSOCIATIVE_MATH__ is defined with -fassociative-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fassociative-math -fno-signed-zeros -fno-trapping-math\" } */\n+\n+#ifndef __ASSOCIATIVE_MATH__\n+#error \"__ASSOCIATIVE_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-associative-math\"\n+#ifdef __ASSOCIATIVE_MATH__\n+#error \"__ASSOCIATIVE_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fassociative-math\"\n+#ifndef __ASSOCIATIVE_MATH__\n+#error \"__ASSOCIATIVE_MATH__ not defined\"\n+#endif"}, {"sha": "764d6f01bdbffbe4129071cbab05d5eb67bc5c1d", "filename": "gcc/testsuite/gcc.dg/associative-math-2.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fassociative-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fassociative-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fassociative-math-2.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __ASSOCIATIVE_MATH__ is not defined with -fno-associative-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-associative-math\" } */\n+\n+#ifdef __ASSOCIATIVE_MATH__\n+#error \"__ASSOCIATIVE_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fassociative-math\"\n+#ifndef __ASSOCIATIVE_MATH__\n+#error \"__ASSOCIATIVE_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-associative-math\"\n+#ifdef __ASSOCIATIVE_MATH__\n+#error \"__ASSOCIATIVE_MATH__ defined\"\n+#endif"}, {"sha": "3b9cd71c84fc8ce88877d9efb1d5b00568d1566a", "filename": "gcc/testsuite/gcc.dg/no-signed-zeros-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-signed-zeros-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-signed-zeros-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fno-signed-zeros-1.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __NO_SIGNED_ZEROS__ is defined with -fno-signed-zeros.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-signed-zeros\" } */\n+\n+#ifndef __NO_SIGNED_ZEROS__\n+#error \"__NO_SIGNED_ZEROS__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fsigned-zeros\"\n+#ifdef __NO_SIGNED_ZEROS__\n+#error \"__NO_SIGNED_ZEROS__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-signed-zeros\"\n+#ifndef __NO_SIGNED_ZEROS__\n+#error \"__NO_SIGNED_ZEROS__ not defined\"\n+#endif"}, {"sha": "865a29f686311e9e9b8267e069d8552b0a69123d", "filename": "gcc/testsuite/gcc.dg/no-signed-zeros-2.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-signed-zeros-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-signed-zeros-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fno-signed-zeros-2.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __NO_SIGNED_ZEROS__ is not defined with -fsigned-zeros.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fsigned-zeros\" } */\n+\n+#ifdef __NO_SIGNED_ZEROS__\n+#error \"__NO_SIGNED_ZEROS__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-signed-zeros\"\n+#ifndef __NO_SIGNED_ZEROS__\n+#error \"__NO_SIGNED_ZEROS__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fsigned-zeros\"\n+#ifdef __NO_SIGNED_ZEROS__\n+#error \"__NO_SIGNED_ZEROS__ defined\"\n+#endif"}, {"sha": "f4faec9a7a3aa732d8eb013a1895ae117c5820a4", "filename": "gcc/testsuite/gcc.dg/no-trapping-math-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-trapping-math-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-trapping-math-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fno-trapping-math-1.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __NO_TRAPPING_MATH__ is defined with -fno-trapping-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-trapping-math\" } */\n+\n+#ifndef __NO_TRAPPING_MATH__\n+#error \"__NO_TRAPPING_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-ftrapping-math\"\n+#ifdef __NO_TRAPPING_MATH__\n+#error \"__NO_TRAPPING_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-trapping-math\"\n+#ifndef __NO_TRAPPING_MATH__\n+#error \"__NO_TRAPPING_MATH__ not defined\"\n+#endif"}, {"sha": "1904b5db453d3ed6d25388d5744573ee306c37dc", "filename": "gcc/testsuite/gcc.dg/no-trapping-math-2.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-trapping-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Fno-trapping-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fno-trapping-math-2.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __NO_TRAPPING_MATH__ is not defined with -ftrapping-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-ftrapping-math\" } */\n+\n+#ifdef __NO_TRAPPING_MATH__\n+#error \"__NO_TRAPPING_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-trapping-math\"\n+#ifndef __NO_TRAPPING_MATH__\n+#error \"__NO_TRAPPING_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-ftrapping-math\"\n+#ifdef __NO_TRAPPING_MATH__\n+#error \"__NO_TRAPPING_MATH__ defined\"\n+#endif"}, {"sha": "49173e23166efd18ada089c65424b6f52a315fc5", "filename": "gcc/testsuite/gcc.dg/reciprocal-math-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Freciprocal-math-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Freciprocal-math-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Freciprocal-math-1.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __RECIPROCAL_MATH__ is defined with -freciprocal-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-freciprocal-math\" } */\n+\n+#ifndef __RECIPROCAL_MATH__\n+#error \"__RECIPROCAL_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-reciprocal-math\"\n+#ifdef __RECIPROCAL_MATH__\n+#error \"__RECIPROCAL_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-freciprocal-math\"\n+#ifndef __RECIPROCAL_MATH__\n+#error \"__RECIPROCAL_MATH__ not defined\"\n+#endif"}, {"sha": "959baa794b042470dd71825889085fc2d3c92f8f", "filename": "gcc/testsuite/gcc.dg/reciprocal-math-2.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Freciprocal-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Freciprocal-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Freciprocal-math-2.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __RECIPROCAL_MATH__ is not defined with -fno-reciprocal-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-reciprocal-math\" } */\n+\n+#ifdef __RECIPROCAL_MATH__\n+#error \"__RECIPROCAL_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-freciprocal-math\"\n+#ifndef __RECIPROCAL_MATH__\n+#error \"__RECIPROCAL_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-reciprocal-math\"\n+#ifdef __RECIPROCAL_MATH__\n+#error \"__RECIPROCAL_MATH__ defined\"\n+#endif"}, {"sha": "3b13549e48ac2c23413bef370c1b1301a3d7d1a0", "filename": "gcc/testsuite/gcc.dg/rounding-math-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Frounding-math-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Frounding-math-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Frounding-math-1.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __ROUNDING_MATH__ is defined with -frounding-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-frounding-math\" } */\n+\n+#ifndef __ROUNDING_MATH__\n+#error \"__ROUNDING_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-rounding-math\"\n+#ifdef __ROUNDING_MATH__\n+#error \"__ROUNDING_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-frounding-math\"\n+#ifndef __ROUNDING_MATH__\n+#error \"__ROUNDING_MATH__ not defined\"\n+#endif"}, {"sha": "6468a84c4c742c7aa690e8a43e7ddbff9de4fe89", "filename": "gcc/testsuite/gcc.dg/rounding-math-2.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Frounding-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1949d7540a0322993bcae2f8893e2dbd29209040/gcc%2Ftestsuite%2Fgcc.dg%2Frounding-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Frounding-math-2.c?ref=1949d7540a0322993bcae2f8893e2dbd29209040", "patch": "@@ -0,0 +1,17 @@\n+/* Test __ROUNDING_MATH__ is not defined with -fno-rounding-math.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-rounding-math\" } */\n+\n+#ifdef __ROUNDING_MATH__\n+#error \"__ROUNDING_MATH__ defined\"\n+#endif\n+\n+#pragma GCC optimize \"-frounding-math\"\n+#ifndef __ROUNDING_MATH__\n+#error \"__ROUNDING_MATH__ not defined\"\n+#endif\n+\n+#pragma GCC optimize \"-fno-rounding-math\"\n+#ifdef __ROUNDING_MATH__\n+#error \"__ROUNDING_MATH__ defined\"\n+#endif"}]}