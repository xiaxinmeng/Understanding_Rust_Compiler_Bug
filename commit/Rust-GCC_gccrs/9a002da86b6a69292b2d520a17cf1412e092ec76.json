{"sha": "9a002da86b6a69292b2d520a17cf1412e092ec76", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWEwMDJkYTg2YjZhNjkyOTJiMmQ1MjBhMTdjZjE0MTJlMDkyZWM3Ng==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2013-01-09T18:19:16Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2013-01-09T18:19:16Z"}, "message": "re PR middle-end/55114 (gcc.dg/builtins-53.c ICEs on mips64 soft-float)\n\ngcc/\n\tPR middle-end/55114\n\t* expr.h (maybe_emit_group_store): Declare.\n\t* expr.c (maybe_emit_group_store): New function.\n\t* builtins.c (expand_builtin_int_roundingfn): Call it.\n\t(expand_builtin_int_roundingfn_2): Likewise.\n\nFrom-SVN: r195060", "tree": {"sha": "d95935d5d4ca6f06429b4ffd9a9f54942215415d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d95935d5d4ca6f06429b4ffd9a9f54942215415d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a002da86b6a69292b2d520a17cf1412e092ec76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a002da86b6a69292b2d520a17cf1412e092ec76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a002da86b6a69292b2d520a17cf1412e092ec76", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a002da86b6a69292b2d520a17cf1412e092ec76/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "511dcace074c36f4c8d7fcf835ba795fa82268c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/511dcace074c36f4c8d7fcf835ba795fa82268c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/511dcace074c36f4c8d7fcf835ba795fa82268c0"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "e57b0a48aa289c40e755c49bd3ecb68af59b8015", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9a002da86b6a69292b2d520a17cf1412e092ec76", "patch": "@@ -1,3 +1,11 @@\n+2013-01-09  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\tPR middle-end/55114\n+\t* expr.h (maybe_emit_group_store): Declare.\n+\t* expr.c (maybe_emit_group_store): New function.\n+\t* builtins.c (expand_builtin_int_roundingfn): Call it.\n+\t(expand_builtin_int_roundingfn_2): Likewise.\n+\n 2013-01-09  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/pr55829"}, {"sha": "2b615a17c100d727f59c21c5dff0eb1cc2cc5520", "filename": "gcc/builtins.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=9a002da86b6a69292b2d520a17cf1412e092ec76", "patch": "@@ -2753,6 +2753,7 @@ expand_builtin_int_roundingfn (tree exp, rtx target)\n   exp = build_call_nofold_loc (EXPR_LOCATION (exp), fallback_fndecl, 1, arg);\n \n   tmp = expand_normal (exp);\n+  tmp = maybe_emit_group_store (tmp, TREE_TYPE (exp));\n \n   /* Truncate the result of floating point optab to integer\n      via expand_fix ().  */\n@@ -2856,6 +2857,7 @@ expand_builtin_int_roundingfn_2 (tree exp, rtx target)\n \t\t\t\t   fallback_fndecl, 1, arg);\n \n       target = expand_call (exp, NULL_RTX, target == const0_rtx);\n+      target = maybe_emit_group_store (target, TREE_TYPE (exp));\n       return convert_to_mode (mode, target, 0);\n     }\n "}, {"sha": "08da907b3327380cc7641f1b0f48a9d07b7840d7", "filename": "gcc/expr.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=9a002da86b6a69292b2d520a17cf1412e092ec76", "patch": "@@ -2079,6 +2079,23 @@ emit_group_store (rtx orig_dst, rtx src, tree type ATTRIBUTE_UNUSED, int ssize)\n     emit_move_insn (orig_dst, dst);\n }\n \n+/* Return a form of X that does not use a PARALLEL.  TYPE is the type\n+   of the value stored in X.  */\n+\n+rtx\n+maybe_emit_group_store (rtx x, tree type)\n+{\n+  enum machine_mode mode = TYPE_MODE (type);\n+  gcc_checking_assert (GET_MODE (x) == VOIDmode || GET_MODE (x) == mode);\n+  if (GET_CODE (x) == PARALLEL)\n+    {\n+      rtx result = gen_reg_rtx (mode);\n+      emit_group_store (result, x, type, int_size_in_bytes (type));\n+      return result;\n+    }\n+  return x;\n+}\n+\n /* Copy a BLKmode object of TYPE out of a register SRCREG into TARGET.\n \n    This is used on targets that return BLKmode values in registers.  */"}, {"sha": "b143d8eeb95bc497ad879c7ddf7046c043fbf399", "filename": "gcc/expr.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2Fexpr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a002da86b6a69292b2d520a17cf1412e092ec76/gcc%2Fexpr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.h?ref=9a002da86b6a69292b2d520a17cf1412e092ec76", "patch": "@@ -334,6 +334,8 @@ extern rtx emit_group_move_into_temps (rtx);\n    PARALLEL.  */\n extern void emit_group_store (rtx, rtx, tree, int);\n \n+extern rtx maybe_emit_group_store (rtx, tree);\n+\n /* Copy BLKmode object from a set of registers.  */\n extern void copy_blkmode_from_reg (rtx, rtx, tree);\n "}]}