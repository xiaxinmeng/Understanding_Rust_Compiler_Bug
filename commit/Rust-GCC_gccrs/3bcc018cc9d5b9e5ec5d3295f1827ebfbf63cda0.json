{"sha": "3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2JjYzAxOGNjOWQ1YjllNWVjNWQzMjk1ZjE4MjdlYmZiZjYzY2RhMA==", "commit": {"author": {"name": "Erik Edelmann", "email": "eedelman@gcc.gnu.org", "date": "2006-01-08T17:52:57Z"}, "committer": {"name": "Erik Edelmann", "email": "eedelman@gcc.gnu.org", "date": "2006-01-08T17:52:57Z"}, "message": "re PR fortran/25093 (PUBLIC function of PRIVATE type)\n\nfortran/\n2005-01-08  Erik Edelmann  <eedelman@gcc.gnu.org>\n\n        PR fortran/25093\n        * resolve.c (resolve_fntype): Check that PUBLIC functions\n         aren't of PRIVATE type.\n\ntestsuite/\n2005-01-08  Erik Edelmann  <eedelman@gcc.gnu.org>\n\n        PR fortran/25093\n        * gfortran.dg/private_type_4.f90: New.\n\nFrom-SVN: r109474", "tree": {"sha": "87bb6c97883a4bd19b1beffaf6b7d2992026c6bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87bb6c97883a4bd19b1beffaf6b7d2992026c6bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/comments", "author": null, "committer": null, "parents": [{"sha": "cf1e03717aecec7390802df60679b2921a4d3f91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf1e03717aecec7390802df60679b2921a4d3f91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf1e03717aecec7390802df60679b2921a4d3f91"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "5cb9a7bc5273c9cd942c5f28a2844310db7a208a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "patch": "@@ -1,3 +1,9 @@\n+2005-01-08  Erik Edelmann  <eedelman@gcc.gnu.org>\n+\n+\tPR fortran/25093\n+\t* resolve.c (resolve_fntype): Check that PUBLIC functions\n+\taren't of PRIVATE type.\n+\n 2005-01-07  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \t* decl.c (gfc_match_function_decl): Correctly error out in case of"}, {"sha": "1169842a5711f780fcd57874e3b16b6f08892e06", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "patch": "@@ -5626,6 +5626,15 @@ resolve_fntype (gfc_namespace * ns)\n       sym->attr.untyped = 1;\n     }\n \n+  if (sym->ts.type == BT_DERIVED && !sym->ts.derived->attr.use_assoc\n+      && !gfc_check_access (sym->ts.derived->attr.access,\n+                            sym->ts.derived->ns->default_access)\n+      && gfc_check_access (sym->attr.access, sym->ns->default_access))\n+    {\n+      gfc_error (\"PUBLIC function '%s' at %L cannot be of PRIVATE type '%s'\",\n+                 sym->name, &sym->declared_at, sym->ts.derived->name);\n+    }\n+\n   if (ns->entries)\n     for (el = ns->entries->next; el; el = el->next)\n       {"}, {"sha": "2d143ce19a869c6eb003881e4258a58480cc7b6b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "patch": "@@ -1,3 +1,8 @@\n+2005-01-08  Erik Edelmann  <eedelman@gcc.gnu.org>\n+\n+\tPR fortran/25093\n+\t* gfortran.dg/private_type_4.f90: New.\n+\n 2005-01-07  Richard Guenther  <rguenther@suse.de>\n \n \t* gcc.dg/tree-ssa/loop-15.c: Use optimized dump."}, {"sha": "a5b5578c45ae5d5a7bccbeb84abbea8d848da54f", "filename": "gcc/testsuite/gfortran.dg/private_type_4.f90", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ftestsuite%2Fgfortran.dg%2Fprivate_type_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0/gcc%2Ftestsuite%2Fgfortran.dg%2Fprivate_type_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fprivate_type_4.f90?ref=3bcc018cc9d5b9e5ec5d3295f1827ebfbf63cda0", "patch": "@@ -0,0 +1,17 @@\n+! { dg-do compile }\n+! PR 25093: Check that a PUBLIC function can't be of PRIVATE type\n+module m1\n+\n+    type :: t1\n+        integer :: i\n+    end type t1\n+\n+    private :: t1\n+    public :: f1     ! { dg-error \"cannot be of PRIVATE type\" }\n+\n+contains\n+\n+    type(t1) function f1()\n+    end function\n+\n+end module"}]}