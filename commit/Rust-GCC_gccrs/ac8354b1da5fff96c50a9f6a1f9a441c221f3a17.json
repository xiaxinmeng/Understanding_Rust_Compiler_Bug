{"sha": "ac8354b1da5fff96c50a9f6a1f9a441c221f3a17", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWM4MzU0YjFkYTVmZmY5NmM1MGE5ZjZhMWY5YTQ0MWMyMjFmM2ExNw==", "commit": {"author": {"name": "James E Wilson", "email": "wilson@tuliptree.org", "date": "2003-07-11T06:44:40Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2003-07-11T06:44:40Z"}, "message": "re PR rtl-optimization/9745 ([powerpc] miscompiles libmcrypt (alias problem during loop))\n\nPR optimization/9745\n* loop.c (loop_iv_add_mult_emit_before): Call loop_regs_update before\nloop_insn_emit_before.\n(loop_iv_add_mult_sink, loop_iv_add_mult_hoist): Likewise.\n\nFrom-SVN: r69220", "tree": {"sha": "61032f35b38631d7d417c84e9e248af1d2d2a114", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61032f35b38631d7d417c84e9e248af1d2d2a114"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17/comments", "author": {"login": "jim-wilson", "id": 11654017, "node_id": "MDQ6VXNlcjExNjU0MDE3", "avatar_url": "https://avatars.githubusercontent.com/u/11654017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jim-wilson", "html_url": "https://github.com/jim-wilson", "followers_url": "https://api.github.com/users/jim-wilson/followers", "following_url": "https://api.github.com/users/jim-wilson/following{/other_user}", "gists_url": "https://api.github.com/users/jim-wilson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jim-wilson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jim-wilson/subscriptions", "organizations_url": "https://api.github.com/users/jim-wilson/orgs", "repos_url": "https://api.github.com/users/jim-wilson/repos", "events_url": "https://api.github.com/users/jim-wilson/events{/privacy}", "received_events_url": "https://api.github.com/users/jim-wilson/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c3c359327077fc9bb020ef9306dfbd7c4a483e39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3c359327077fc9bb020ef9306dfbd7c4a483e39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3c359327077fc9bb020ef9306dfbd7c4a483e39"}], "stats": {"total": 28, "additions": 19, "deletions": 9}, "files": [{"sha": "b175bdf684b5e909fadcaa08797bd993a83dec57", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ac8354b1da5fff96c50a9f6a1f9a441c221f3a17", "patch": "@@ -1,3 +1,10 @@\n+2003-07-10  James E Wilson  <wilson@tuliptree.org>\n+\n+\tPR optimization/9745\n+\t* loop.c (loop_iv_add_mult_emit_before): Call loop_regs_update before\n+\tloop_insn_emit_before.\n+\t(loop_iv_add_mult_sink, loop_iv_add_mult_hoist): Likewise.\n+\t\n 2003-07-10  Zack Weinberg  <zack@codesourcery.com>\n \n \t* cppcharset.c: Fix comment."}, {"sha": "fdb8995534ad69bda63bcfd7f46dc3d890e96efe", "filename": "gcc/loop.c", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac8354b1da5fff96c50a9f6a1f9a441c221f3a17/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=ac8354b1da5fff96c50a9f6a1f9a441c221f3a17", "patch": "@@ -7737,11 +7737,12 @@ loop_iv_add_mult_emit_before (const struct loop *loop, rtx b, rtx m, rtx a,\n   update_reg_last_use (b, before_insn);\n   update_reg_last_use (m, before_insn);\n \n-  loop_insn_emit_before (loop, before_bb, before_insn, seq);\n-\n   /* It is possible that the expansion created lots of new registers.\n-     Iterate over the sequence we just created and record them all.  */\n+     Iterate over the sequence we just created and record them all.  We\n+     must do this before inserting the sequence.  */\n   loop_regs_update (loop, seq);\n+\n+  loop_insn_emit_before (loop, before_bb, before_insn, seq);\n }\n \n \n@@ -7764,11 +7765,12 @@ loop_iv_add_mult_sink (const struct loop *loop, rtx b, rtx m, rtx a, rtx reg)\n   update_reg_last_use (b, loop->sink);\n   update_reg_last_use (m, loop->sink);\n \n-  loop_insn_sink (loop, seq);\n-\n   /* It is possible that the expansion created lots of new registers.\n-     Iterate over the sequence we just created and record them all.  */\n+     Iterate over the sequence we just created and record them all.  We\n+     must do this before inserting the sequence.  */\n   loop_regs_update (loop, seq);\n+\n+  loop_insn_sink (loop, seq);\n }\n \n \n@@ -7784,11 +7786,12 @@ loop_iv_add_mult_hoist (const struct loop *loop, rtx b, rtx m, rtx a, rtx reg)\n   /* Use copy_rtx to prevent unexpected sharing of these rtx.  */\n   seq = gen_add_mult (copy_rtx (b), copy_rtx (m), copy_rtx (a), reg);\n \n-  loop_insn_hoist (loop, seq);\n-\n   /* It is possible that the expansion created lots of new registers.\n-     Iterate over the sequence we just created and record them all.  */\n+     Iterate over the sequence we just created and record them all.  We\n+     must do this before inserting the sequence.  */\n   loop_regs_update (loop, seq);\n+\n+  loop_insn_hoist (loop, seq);\n }\n \n "}]}