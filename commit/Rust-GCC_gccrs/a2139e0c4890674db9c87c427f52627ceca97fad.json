{"sha": "a2139e0c4890674db9c87c427f52627ceca97fad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIxMzllMGM0ODkwNjc0ZGI5Yzg3YzQyN2Y1MjYyN2NlY2E5N2ZhZA==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@waitaki.otago.ac.nz", "date": "2002-02-20T04:14:15Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2002-02-20T04:14:15Z"}, "message": "libjava.exp: Add \"xfail-byte-output\" and \"xfail-source-output\".\n\n\t* lib/libjava.exp: Add \"xfail-byte-output\" and \"xfail-source-output\".\n\tDon't display expected and actual output for a failed output test.\n\n\t* libjava.lang/ArrayStore.java: New file.\n\t* libjava.lang/ArrayStore.out: New file.\n\t* libjava.lang/ArrayStore.xfail: New file. xfail-byte-output.\n\t* libjava.lang/ArrayStore2.java: New file.\n\t* libjava.lang/ArrayStore2.out: New file.\n\t* libjava.lang/ArrayStore2.xfail: New file. xfail-source-output.\n\nFrom-SVN: r49888", "tree": {"sha": "fcde10e26a580a87707fc919a83f9b708b94bc41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fcde10e26a580a87707fc919a83f9b708b94bc41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2139e0c4890674db9c87c427f52627ceca97fad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2139e0c4890674db9c87c427f52627ceca97fad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2139e0c4890674db9c87c427f52627ceca97fad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2139e0c4890674db9c87c427f52627ceca97fad/comments", "author": null, "committer": null, "parents": [{"sha": "6ea868b758701be4ac1fe50fb40bac04a0a3ba74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ea868b758701be4ac1fe50fb40bac04a0a3ba74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ea868b758701be4ac1fe50fb40bac04a0a3ba74"}], "stats": {"total": 121, "additions": 117, "deletions": 4}, "files": [{"sha": "b9f5d6219bfea59a273820e72f3cbe26f8ce78ca", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -1,7 +1,22 @@\n+2002-02-20  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\t* lib/libjava.exp: Add \"xfail-byte-output\" and \"xfail-source-output\".\n+\tDon't display expected and actual output for a failed output test.\n+\n+\t* libjava.lang/ArrayStore.java: New file.\n+\t* libjava.lang/ArrayStore.out: New file.\n+\t* libjava.lang/ArrayStore.xfail: New file. xfail-byte-output.\n+\t* libjava.lang/ArrayStore2.java: New file.\n+\t* libjava.lang/ArrayStore2.out: New file.\n+\t* libjava.lang/ArrayStore2.xfail: New file. xfail-source-output.\n+\n 2002-02-18  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n \n \t* libjava.lang/err7.xfail: Removed.\n \t* libjava.lang/err8.xfail: Removed.\n+\t\n+\t* libjava.lang/ArrayStore.java: New file.\n+\t* libjava.lang/ArrayStore.out: New file.\n \n 2002-02-10  Tom Tromey  <tromey@redhat.com>\n "}, {"sha": "50996aa4ad913627471f5c4ad75eb4dfcee0f6c0", "filename": "libjava/testsuite/lib/libjava.exp", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flib%2Flibjava.exp?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -510,12 +510,13 @@ proc test_libjava_from_source { options srcfile compile_args inpfile resultfile\n     if {[info exists opts(xfail-output)]} {\n \tsetup_xfail *-*-*\n     }\n+    if {[info exists opts(xfail-source-output)]} {\n+\tsetup_xfail *-*-*\n+    }\n     if { $passed == 1 } {\n \tpass \"$errname output from source compiled test\"\n \teval gcj_cleanup $removeList\n     } else {\n-\tclone_output \"expected was $expected\"\n-\tclone_output \"output was $output\"\n \tfail \"$errname output from source compiled test\"\n     }\n     close $id;\n@@ -737,6 +738,9 @@ proc test_libjava_from_javac { options srcfile compile_args inpfile resultfile e\n     if {[info exists opts(xfail-output)]} {\n \tsetup_xfail *-*-*\n     }\n+    if {[info exists opts(xfail-byte-output)]} {\n+\tsetup_xfail *-*-*\n+    }\n     if {$options == \"regexp_match\"} {\n \tif [regexp $expected $output] {\n \t    set passed 1;\n@@ -750,8 +754,6 @@ proc test_libjava_from_javac { options srcfile compile_args inpfile resultfile e\n \tpass \"$errname output from bytecode->native test\"\n \teval gcj_cleanup $removeList\n     } else {\n-\tclone_output \"expected was $expected\"\n-\tclone_output \"output was $output\"\n \tfail \"$errname output from bytecode->native test\"\n     }\n     close $id;\n@@ -774,6 +776,10 @@ proc test_libjava_from_javac { options srcfile compile_args inpfile resultfile e\n #   `xfail-exec'  exec will fail\n #   `xfail-output'\n #                 output will be wrong\n+#   `xfail-byte-output'\n+#                 output will be wrong when compiled from bytecode\n+#   `xfail-source-output'\n+#                 output will be wrong when compiled from source code\n #   `need-threads'\n #                 test relies on thread support\n #"}, {"sha": "9afac71c2b57a621acce64825a0c2c0277450600", "filename": "libjava/testsuite/libjava.lang/ArrayStore.java", "status": "added", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.java?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -0,0 +1,52 @@\n+public class ArrayStore\n+{\n+  public static void main(String[] args)\n+  {\n+    ArrayStore s = new ArrayStore();\n+\n+    /* Check that bounds check takes precedence over array store check. */\n+    try \n+    {\n+      s.a(new String[1]);\n+    }\n+    catch (Exception x)\n+    {\n+      System.out.println (x.getClass().getName());\n+    }\n+\n+    try \n+    {\n+      s.a(new String[2]);\n+    }\n+    catch (Exception x)\n+    {\n+      System.out.println (x.getClass().getName());\n+    }\n+\n+    /* Check that += operator on String[] element works and throws bounds \n+       exception. */\n+    try \n+    {\n+      s.b(new String[1]);\n+    }\n+    catch (Exception x)\n+    {\n+      System.out.println (x.getClass().getName());\n+    }\n+\n+    String[] sb = new String[2];\n+    sb[1] = \"foo\";\n+    s.b(sb);\n+    System.out.println (sb[1]);\n+  }\n+\n+  void a(Object[] oa)\n+  {\n+    oa[1] = new Integer(2);\n+  }\n+\n+  void b(String[] sa)\n+  {\n+    sa[1] += \"bar\";\n+  }\n+}"}, {"sha": "b22379de2a5d017f7ff04955a5ec2983da97a508", "filename": "libjava/testsuite/libjava.lang/ArrayStore.out", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.out", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.out", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.out?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -0,0 +1,4 @@\n+java.lang.ArrayIndexOutOfBoundsException\n+java.lang.ArrayStoreException\n+java.lang.ArrayIndexOutOfBoundsException\n+foobar"}, {"sha": "7728fd25dcfe55d9be44665d3ec6dbd2d27e7b9d", "filename": "libjava/testsuite/libjava.lang/ArrayStore.xfail", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.xfail", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.xfail", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore.xfail?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -0,0 +1 @@\n+xfail-byte-output"}, {"sha": "1364d39b40ef449d79d2037332774b9fec3ea1dc", "filename": "libjava/testsuite/libjava.lang/ArrayStore2.java", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.java?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -0,0 +1,31 @@\n+public class ArrayStore2\n+{\n+  public static void main(String[] args)\n+  {\n+    new ArrayStore2().a(new Object[2], 3);\n+  }\n+\n+  void a(Object[] oa, int i)\n+  {\n+    try\n+    {\n+      oa[index()] = obj();\n+    }\n+    catch (Exception x)\n+    {\n+      System.out.println (x.getClass().getName());\n+    }\n+  }\n+\n+  int index()\n+  {\n+    System.out.println (\"index\");\n+    return 3;\n+  }\n+\n+  Object obj()\n+  {\n+    System.out.println (\"rhs\");\n+    return new Object();\n+  }\n+}"}, {"sha": "89dddb244b216c4c5e3c7bd86ec3f7b60e412b2e", "filename": "libjava/testsuite/libjava.lang/ArrayStore2.out", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.out", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.out", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.out?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -0,0 +1,3 @@\n+index\n+rhs\n+java.lang.ArrayIndexOutOfBoundsException"}, {"sha": "e4c7ce34df98e80c34bcea1848d20a445a263491", "filename": "libjava/testsuite/libjava.lang/ArrayStore2.xfail", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.xfail", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2139e0c4890674db9c87c427f52627ceca97fad/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.xfail", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2FArrayStore2.xfail?ref=a2139e0c4890674db9c87c427f52627ceca97fad", "patch": "@@ -0,0 +1 @@\n+xfail-source-output"}]}