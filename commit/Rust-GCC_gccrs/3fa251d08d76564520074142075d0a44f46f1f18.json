{"sha": "3fa251d08d76564520074142075d0a44f46f1f18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZhMjUxZDA4ZDc2NTY0NTIwMDc0MTQyMDc1ZDBhNDRmNDZmMWYxOA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-11-19T11:25:50Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-11-19T11:25:50Z"}, "message": "makegpr.adb (Compile): Put the compiling switches (in package Compiler and on the command line)...\n\n\t* makegpr.adb (Compile): Put the compiling switches (in package\n\tCompiler and on the command line) immediately after \"-c\", instead of\n\tat the end of the command line invocation of the compiler, when\n\tcompiling a non-Ada file.\n\t(Build_Global_Archive): When there is no need to rebuild the archive,\n\tset Global_Archive_Exists, so that the archive is passed to the linker\n\tif one is needed.\n\nFrom-SVN: r90914", "tree": {"sha": "c801588240096066ead5027300f6c9a4f228b344", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c801588240096066ead5027300f6c9a4f228b344"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fa251d08d76564520074142075d0a44f46f1f18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fa251d08d76564520074142075d0a44f46f1f18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fa251d08d76564520074142075d0a44f46f1f18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fa251d08d76564520074142075d0a44f46f1f18/comments", "author": null, "committer": null, "parents": [{"sha": "f0747897b654c6b9937a82de4a78542646858ff2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0747897b654c6b9937a82de4a78542646858ff2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0747897b654c6b9937a82de4a78542646858ff2"}], "stats": {"total": 20, "additions": 13, "deletions": 7}, "files": [{"sha": "fc6768caa85c1dc23f566e32b69d75c27e62a256", "filename": "gcc/ada/makegpr.adb", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fa251d08d76564520074142075d0a44f46f1f18/gcc%2Fada%2Fmakegpr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fa251d08d76564520074142075d0a44f46f1f18/gcc%2Fada%2Fmakegpr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakegpr.adb?ref=3fa251d08d76564520074142075d0a44f46f1f18", "patch": "@@ -1176,6 +1176,11 @@ package body Makegpr is\n             Write_Line  (\"      -> up to date\");\n          end if;\n \n+         --  No need to create a global archive, if there is no object\n+         --  file to put into.\n+\n+         Global_Archive_Exists := Last_Source /= 0;\n+\n       --  Archive needs to be rebuilt\n \n       else\n@@ -2169,9 +2174,16 @@ package body Makegpr is\n            (Lang_Names (Source.Language), Verbose_Mode);\n       end if;\n \n+      Add_Argument (Dash_c, True);\n+\n+      --  Add the compiling switches for this source found in\n+      --  package Compiler of the project file, if they exist.\n+\n+      Add_Switches\n+        (Data, Compiler, Source.Language, Source.File_Name);\n+\n       --  Specify the source to be compiled\n \n-      Add_Argument (Dash_c, True);\n       Add_Argument (Get_Name_String (Source.Path_Name), True);\n \n       --  If non static library project, compile with the PIC option if there\n@@ -2197,12 +2209,6 @@ package body Makegpr is\n             Verbose_Mode);\n       end if;\n \n-      --  Add the compiling switches for this source found in\n-      --  package Compiler of the project file, if they exist.\n-\n-      Add_Switches\n-        (Data, Compiler, Source.Language, Source.File_Name);\n-\n       --  Add the compiling switches for the language specified\n       --  on the command line, if any.\n "}]}