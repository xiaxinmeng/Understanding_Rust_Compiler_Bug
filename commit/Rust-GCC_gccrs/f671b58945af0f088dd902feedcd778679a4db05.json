{"sha": "f671b58945af0f088dd902feedcd778679a4db05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjY3MWI1ODk0NWFmMGYwODhkZDkwMmZlZWRjZDc3ODY3OWE0ZGIwNQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-07T23:38:47Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-07T23:38:47Z"}, "message": "runtime: Fixes for Alpha.\n\nFrom-SVN: r204551", "tree": {"sha": "c4edc5814a87f3524da04a042c7dccbbd5d29531", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4edc5814a87f3524da04a042c7dccbbd5d29531"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f671b58945af0f088dd902feedcd778679a4db05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f671b58945af0f088dd902feedcd778679a4db05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f671b58945af0f088dd902feedcd778679a4db05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f671b58945af0f088dd902feedcd778679a4db05/comments", "author": null, "committer": null, "parents": [{"sha": "50c7654b96ef45499bdde32d5a0acd097a911ece", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50c7654b96ef45499bdde32d5a0acd097a911ece", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50c7654b96ef45499bdde32d5a0acd097a911ece"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "62070f37943faa862253a66b84513eba34be7a9c", "filename": "libgo/runtime/mheap.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f671b58945af0f088dd902feedcd778679a4db05/libgo%2Fruntime%2Fmheap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f671b58945af0f088dd902feedcd778679a4db05/libgo%2Fruntime%2Fmheap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fmheap.c?ref=f671b58945af0f088dd902feedcd778679a4db05", "patch": "@@ -68,6 +68,7 @@ runtime_MHeap_Init(MHeap *h)\n void\n runtime_MHeap_MapSpans(MHeap *h)\n {\n+\tuintptr pagesize;\n \tuintptr n;\n \n \t// Map spans array, PageSize at a time.\n@@ -76,6 +77,8 @@ runtime_MHeap_MapSpans(MHeap *h)\n \t\tn -= (uintptr)h->arena_start;\n \tn = n / PageSize * sizeof(h->spans[0]);\n \tn = ROUND(n, PageSize);\n+\tpagesize = getpagesize();\n+\tn = ROUND(n, pagesize);\n \tif(h->spans_mapped >= n)\n \t\treturn;\n \truntime_SysMap((byte*)h->spans + h->spans_mapped, n - h->spans_mapped, &mstats.other_sys);"}, {"sha": "7011f14f8a5b61119df49beab746625fe49c9e5c", "filename": "libgo/runtime/proc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f671b58945af0f088dd902feedcd778679a4db05/libgo%2Fruntime%2Fproc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f671b58945af0f088dd902feedcd778679a4db05/libgo%2Fruntime%2Fproc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fproc.c?ref=f671b58945af0f088dd902feedcd778679a4db05", "patch": "@@ -2098,7 +2098,7 @@ runtime_malg(int32 stacksize, byte** ret_stack, size_t* ret_stacksize)\n \t\t__splitstack_block_signals_context(&newg->stack_context[0],\n \t\t\t\t\t\t   &dont_block_signals, nil);\n #else\n-\t\t*ret_stack = runtime_mallocgc(stacksize, FlagNoProfiling|FlagNoGC, 0, 0);\n+\t\t*ret_stack = runtime_mallocgc(stacksize, 0, FlagNoProfiling|FlagNoGC);\n \t\t*ret_stacksize = stacksize;\n \t\tnewg->gcinitial_sp = *ret_stack;\n \t\tnewg->gcstack_size = stacksize;"}]}