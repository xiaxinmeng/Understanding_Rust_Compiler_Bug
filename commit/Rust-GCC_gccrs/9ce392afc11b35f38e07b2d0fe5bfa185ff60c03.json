{"sha": "9ce392afc11b35f38e07b2d0fe5bfa185ff60c03", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWNlMzkyYWZjMTFiMzVmMzhlMDdiMmQwZmU1YmZhMTg1ZmY2MGMwMw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-04-14T11:07:51Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1999-04-14T11:07:51Z"}, "message": "natInetAddress.cc (lookup): On glibc2.0 systems, make buffer larger to work around bug.\n\n\t* java/net/natInetAddress.cc (lookup): On glibc2.0 systems, make\n\tbuffer larger to work around bug.\n\tFrom Bryce McKinlay <bryce@albatross.co.nz>.\n\nFrom-SVN: r26447", "tree": {"sha": "a8b990639562638134a7fd4bda47d244d7e98248", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a8b990639562638134a7fd4bda47d244d7e98248"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03/comments", "author": null, "committer": null, "parents": [{"sha": "d8265d2995912b37d74cd9a9dd18f5beff04e66d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8265d2995912b37d74cd9a9dd18f5beff04e66d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8265d2995912b37d74cd9a9dd18f5beff04e66d"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "beed92336d369e5ad880ae9263ebef4816512d58", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9ce392afc11b35f38e07b2d0fe5bfa185ff60c03", "patch": "@@ -1,3 +1,9 @@\n+1999-04-14  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* java/net/natInetAddress.cc (lookup): On glibc2.0 systems, make\n+\tbuffer larger to work around bug.\n+\tFrom Bryce McKinlay <bryce@albatross.co.nz>.\n+\n 1999-04-14  Andrew Haley  <aph@cygnus.com>\n \n  \t* java/lang/natDouble.java (doubleToLongBits): ensure that all"}, {"sha": "c591ea6f89efba88b9e73045d3cb0c127c8fa59a", "filename": "libjava/java/net/natInetAddress.cc", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03/libjava%2Fjava%2Fnet%2FnatInetAddress.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ce392afc11b35f38e07b2d0fe5bfa185ff60c03/libjava%2Fjava%2Fnet%2FnatInetAddress.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FnatInetAddress.cc?ref=9ce392afc11b35f38e07b2d0fe5bfa185ff60c03", "patch": "@@ -97,7 +97,14 @@ java::net::InetAddress::lookup (jstring host, java::net::InetAddress* iaddr,\n   struct hostent *hptr = NULL;\n #if defined (HAVE_GETHOSTBYNAME_R) || defined (HAVE_GETHOSTBYADDR_R)\n   struct hostent hent_r;\n+#if defined (__GLIBC__) && __GLIBC__ == 2 && __GLIBC_MINOR__ == 0\n+  // glibc 2.0.7 has a bug where gethostbyname_r won't return an error\n+  // if the buffer is too small.  So in this case we size the buffer\n+  // the same way that glibc does.  This is fixed in glibc 2.1.\n+  char fixed_buffer[1024];\n+#else\n   char fixed_buffer[200];\n+#endif\n   char *buffer_r = fixed_buffer;\n   int size_r = sizeof (fixed_buffer);\n #endif"}]}