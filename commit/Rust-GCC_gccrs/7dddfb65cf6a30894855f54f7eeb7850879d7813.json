{"sha": "7dddfb65cf6a30894855f54f7eeb7850879d7813", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RkZGZiNjVjZjZhMzA4OTQ4NTVmNTRmN2VlYjc4NTA4NzlkNzgxMw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2001-10-27T10:17:44Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2001-10-27T10:17:44Z"}, "message": "cfgcleanup.c (merge_blocks_move_predecessor_nojumps, [...]): Set BB_UPDATE_LIFE.\n\n\t* cfgcleanup.c (merge_blocks_move_predecessor_nojumps,\n\tmerge_blocks_move_successors_nojumps): Set BB_UPDATE_LIFE.\n\t(merge_blocks): Properly udpate life after making edge nonfallthru.\n\t* cfgrtl.c (merge_blocks_nomove): Update global_live_at_end.\n\nFrom-SVN: r46564", "tree": {"sha": "b89b7e441f71e3ff0c9fc64935848e5820a54a0c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b89b7e441f71e3ff0c9fc64935848e5820a54a0c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dddfb65cf6a30894855f54f7eeb7850879d7813", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dddfb65cf6a30894855f54f7eeb7850879d7813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dddfb65cf6a30894855f54f7eeb7850879d7813", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dddfb65cf6a30894855f54f7eeb7850879d7813/comments", "author": null, "committer": null, "parents": [{"sha": "ba087771c0b6f374aff33c820c686cc4f707a41c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba087771c0b6f374aff33c820c686cc4f707a41c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba087771c0b6f374aff33c820c686cc4f707a41c"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "686842ae328bc97469e510dc344578add14976ce", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dddfb65cf6a30894855f54f7eeb7850879d7813/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dddfb65cf6a30894855f54f7eeb7850879d7813/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7dddfb65cf6a30894855f54f7eeb7850879d7813", "patch": "@@ -1,3 +1,10 @@\n+Sat Oct 27 12:12:09 CEST 2001  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cfgcleanup.c (merge_blocks_move_predecessor_nojumps,\n+\tmerge_blocks_move_successors_nojumps): Set BB_UPDATE_LIFE.\n+\t(merge_blocks): Properly udpate life after making edge nonfallthru.\n+\t* cfgrtl.c (merge_blocks_nomove): Update global_live_at_end.\n+\n 2001-10-26  Kazu Hirata  <kazu@hxi.com>\n \n \t* config/h8300/h8300.c (get_shift_alg): Remove redundant code."}, {"sha": "f3869095db6b9bb2037a02e621647737c4b70a5e", "filename": "gcc/cfgcleanup.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dddfb65cf6a30894855f54f7eeb7850879d7813/gcc%2Fcfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dddfb65cf6a30894855f54f7eeb7850879d7813/gcc%2Fcfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgcleanup.c?ref=7dddfb65cf6a30894855f54f7eeb7850879d7813", "patch": "@@ -334,6 +334,7 @@ merge_blocks_move_predecessor_nojumps (a, b)\n   /* Scramble the insn chain.  */\n   if (a->end != PREV_INSN (b->head))\n     reorder_insns_nobb (a->head, a->end, PREV_INSN (b->head));\n+  BB_SET_FLAG (a, BB_UPDATE_LIFE);\n \n   if (rtl_dump_file)\n     {\n@@ -402,6 +403,7 @@ merge_blocks_move_successor_nojumps (a, b)\n \n   /* Now blocks A and B are contiguous.  Merge them.  */\n   merge_blocks_nomove (a, b);\n+  BB_SET_FLAG (a, BB_UPDATE_LIFE);\n \n   if (rtl_dump_file)\n     {\n@@ -488,10 +490,14 @@ merge_blocks (e, b, c, mode)\n \n       if (b_has_incoming_fallthru)\n \t{\n+\t  rtx bb;\n \t  if (b_fallthru_edge->src == ENTRY_BLOCK_PTR)\n \t    return false;\n-\t  BB_SET_FLAG (b_fallthru_edge, BB_UPDATE_LIFE);\n-\t  notice_new_block (force_nonfallthru (b_fallthru_edge));\n+\t  bb = force_nonfallthru (b_fallthru_edge);\n+\t  if (bb)\n+\t    notice_new_block (bb);\n+\t  else\n+\t    BB_SET_FLAG (b_fallthru_edge->src, BB_UPDATE_LIFE);\n \t}\n       merge_blocks_move_predecessor_nojumps (b, c);\n       return true;"}, {"sha": "88a6f498468bb566adec79a4f0dff3d60414823c", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dddfb65cf6a30894855f54f7eeb7850879d7813/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dddfb65cf6a30894855f54f7eeb7850879d7813/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=7dddfb65cf6a30894855f54f7eeb7850879d7813", "patch": "@@ -603,6 +603,7 @@ merge_blocks_nomove (a, b)\n \n   /* B hasn't quite yet ceased to exist.  Attempt to prevent mishap.  */\n   b->pred = b->succ = NULL;\n+  a->global_live_at_end = b->global_live_at_end;\n \n   expunge_block (b);\n "}]}