{"sha": "7c14db4032fe0e34140dacf08c4ffadde404f414", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2MxNGRiNDAzMmZlMGUzNDE0MGRhY2YwOGM0ZmZhZGRlNDA0ZjQxNA==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2016-07-04T10:29:02Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-07-04T10:29:02Z"}, "message": "ghost.adb (Prune_Node): A freeze node for an ignored ghost entity must be pruned as well.\n\n2016-07-04  Ed Schonberg  <schonberg@adacore.com>\n\n\t* ghost.adb (Prune_Node): A freeze node for an ignored ghost\n\tentity must be pruned as well.\n\nFrom-SVN: r237967", "tree": {"sha": "d62e8f4d28c53958138a7bbff4ad9ec6da10422e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d62e8f4d28c53958138a7bbff4ad9ec6da10422e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c14db4032fe0e34140dacf08c4ffadde404f414", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c14db4032fe0e34140dacf08c4ffadde404f414", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c14db4032fe0e34140dacf08c4ffadde404f414", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c14db4032fe0e34140dacf08c4ffadde404f414/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "607114db6a0ae4c23ca0937cb1744f7110c6cd36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/607114db6a0ae4c23ca0937cb1744f7110c6cd36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/607114db6a0ae4c23ca0937cb1744f7110c6cd36"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "8672bdc301fad9078efb934a522b98253e832e77", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c14db4032fe0e34140dacf08c4ffadde404f414/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c14db4032fe0e34140dacf08c4ffadde404f414/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7c14db4032fe0e34140dacf08c4ffadde404f414", "patch": "@@ -1,3 +1,8 @@\n+2016-07-04  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* ghost.adb (Prune_Node): A freeze node for an ignored ghost\n+\tentity must be pruned as well.\n+\n 2016-07-04  Gary Dismukes  <dismukes@adacore.com>\n \n \t* sem_type.adb, einfo.ads, freeze.adb, exp_ch6.adb: Minor reformatting"}, {"sha": "8add17ae1eeb1e5a8060824ab5b36bdbfe14cfed", "filename": "gcc/ada/ghost.adb", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c14db4032fe0e34140dacf08c4ffadde404f414/gcc%2Fada%2Fghost.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c14db4032fe0e34140dacf08c4ffadde404f414/gcc%2Fada%2Fghost.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fghost.adb?ref=7c14db4032fe0e34140dacf08c4ffadde404f414", "patch": "@@ -1174,6 +1174,15 @@ package body Ghost is\n                Prune (N);\n                return Skip;\n \n+            --  A freeze node for an ignored ghost entity must be pruned as\n+            --  well, to prevent meaningless references in the back end.\n+\n+            elsif Nkind (N) = N_Freeze_Entity\n+              and then Is_Ignored_Ghost_Entity (Entity (N))\n+            then\n+               Prune (N);\n+               return Skip;\n+\n             --  Scoping constructs such as blocks, packages, subprograms and\n             --  bodies offer some flexibility with respect to pruning.\n "}]}