{"sha": "cb2fdc843bcf2d552617effd1eac292d498f6728", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2IyZmRjODQzYmNmMmQ1NTI2MTdlZmZkMWVhYzI5MmQ0OThmNjcyOA==", "commit": {"author": {"name": "Gavin Romig-Koch", "email": "gavin@cygnus.com", "date": "1998-10-20T08:03:37Z"}, "committer": {"name": "Gavin Romig-Koch", "email": "gavin@gcc.gnu.org", "date": "1998-10-20T08:03:37Z"}, "message": "regclass.c (fix_register): Add error message.\n\n\t* regclass.c (fix_register): Add error message.\n\t* invoke.texi (-fcall-used-REG,-fcall-saved-REG): Note the\n\t  new error message\n\nFrom-SVN: r23198", "tree": {"sha": "5eba030480cb280d271f97b3b1653791f1de3428", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5eba030480cb280d271f97b3b1653791f1de3428"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb2fdc843bcf2d552617effd1eac292d498f6728", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb2fdc843bcf2d552617effd1eac292d498f6728", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb2fdc843bcf2d552617effd1eac292d498f6728", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb2fdc843bcf2d552617effd1eac292d498f6728/comments", "author": null, "committer": null, "parents": [{"sha": "0ca3fb0a168e9db2bd5405855d3932f62b08b7c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ca3fb0a168e9db2bd5405855d3932f62b08b7c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ca3fb0a168e9db2bd5405855d3932f62b08b7c9"}], "stats": {"total": 41, "additions": 33, "deletions": 8}, "files": [{"sha": "89bdf960f98329373b6a66597a0211688bdc42bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb2fdc843bcf2d552617effd1eac292d498f6728/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb2fdc843bcf2d552617effd1eac292d498f6728/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cb2fdc843bcf2d552617effd1eac292d498f6728", "patch": "@@ -1,3 +1,9 @@\n+Tue Oct 20 10:59:02 1998  Gavin Romig-Koch  <gavin@cygnus.com>\n+\n+\t* regclass.c (fix_register): Add error message.\n+\t* invoke.texi (-fcall-used-REG,-fcall-saved-REG): Note the\n+\t  new error message.\n+\n Tue Oct 20 10:12:17 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* c-decl.c (warn_missing_noreturn): New global variable."}, {"sha": "6bc075cdc5a8fff51ae3a4f8363bde6228342385", "filename": "gcc/invoke.texi", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb2fdc843bcf2d552617effd1eac292d498f6728/gcc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb2fdc843bcf2d552617effd1eac292d498f6728/gcc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Finvoke.texi?ref=cb2fdc843bcf2d552617effd1eac292d498f6728", "patch": "@@ -5819,9 +5819,9 @@ clobbered by function calls.  It may be allocated for temporaries or\n variables that do not live across a call.  Functions compiled this way\n will not save and restore the register @var{reg}.\n \n-Use of this flag for a register that has a fixed pervasive role in the\n-machine's execution model, such as the stack pointer or frame pointer,\n-will produce disastrous results.\n+It is an error to used this flag with the frame pointer or stack pointer.\n+Use of this flag for other registers that have fixed pervasive roles in\n+the machine's execution model will produce disastrous results.\n \n This flag does not have a negative form, because it specifies a\n three-way choice.\n@@ -5832,9 +5832,9 @@ functions.  It may be allocated even for temporaries or variables that\n live across a call.  Functions compiled this way will save and restore\n the register @var{reg} if they use it.\n \n-Use of this flag for a register that has a fixed pervasive role in the\n-machine's execution model, such as the stack pointer or frame pointer,\n-will produce disastrous results.\n+It is an error to used this flag with the frame pointer or stack pointer.\n+Use of this flag for other registers that have fixed pervasive roles in\n+the machine's execution model will produce disastrous results.\n \n A different sort of disaster will result from the use of this flag for\n a register in which function values may be returned."}, {"sha": "73960c80a99c16a3408ee378b051a85dd20be0e2", "filename": "gcc/regclass.c", "status": "modified", "additions": 21, "deletions": 2, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb2fdc843bcf2d552617effd1eac292d498f6728/gcc%2Fregclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb2fdc843bcf2d552617effd1eac292d498f6728/gcc%2Fregclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregclass.c?ref=cb2fdc843bcf2d552617effd1eac292d498f6728", "patch": "@@ -574,8 +574,27 @@ fix_register (name, fixed, call_used)\n \n   if ((i = decode_reg_name (name)) >= 0)\n     {\n-      fixed_regs[i] = fixed;\n-      call_used_regs[i] = call_used;\n+      if ((i == STACK_POINTER_REGNUM\n+#ifdef HARD_FRAME_POINTER_REGNUM\n+\t   || i == HARD_FRAME_POINTER_REGNUM\n+#else\n+\t   || i == FRAME_POINTER_REGNUM\n+#endif\n+\t   )\n+\t  && (fixed == 0 || call_used == 0))\n+\t{\n+\t  static char* what_option[2][2] = {\n+\t    \"call-saved\", \"call-used\", \n+\t    \"no-such-option\", \"fixed\" };\n+\t  \n+\t  error (\"can't use '%s' as a %s register\", name, \n+\t\t what_option[fixed][call_used]);\n+\t}\n+      else\n+\t{\n+\t  fixed_regs[i] = fixed;\n+\t  call_used_regs[i] = call_used;\n+\t}\n     }\n   else\n     {"}]}