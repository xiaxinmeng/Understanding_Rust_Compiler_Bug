{"sha": "701b8964b2b94331221474a6d44b0caf0d0eae6b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzAxYjg5NjRiMmI5NDMzMTIyMTQ3NGE2ZDQ0YjBjYWYwZDBlYWU2Yg==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2006-03-03T00:07:54Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2006-03-03T00:07:54Z"}, "message": "tree-vrp.c (remove_range_assertions): Do not update statements unnecessarily.\n\n\t* tree-vrp.c (remove_range_assertions): Do not update statements unnecessarily.\n\nFrom-SVN: r111654", "tree": {"sha": "1b03931413452b5bfbb76fd6d8f880dc373d4c4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b03931413452b5bfbb76fd6d8f880dc373d4c4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/701b8964b2b94331221474a6d44b0caf0d0eae6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/701b8964b2b94331221474a6d44b0caf0d0eae6b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/701b8964b2b94331221474a6d44b0caf0d0eae6b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/701b8964b2b94331221474a6d44b0caf0d0eae6b/comments", "author": null, "committer": null, "parents": [{"sha": "599941607016f0574a55d77ba0cab0415fffdde6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/599941607016f0574a55d77ba0cab0415fffdde6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/599941607016f0574a55d77ba0cab0415fffdde6"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "5c933ac8c43a2b017d4263e3947af104b0254bef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/701b8964b2b94331221474a6d44b0caf0d0eae6b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/701b8964b2b94331221474a6d44b0caf0d0eae6b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=701b8964b2b94331221474a6d44b0caf0d0eae6b", "patch": "@@ -1,3 +1,7 @@\n+2006-03-02  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\t* tree-vrp.c (remove_range_assertions): Do not update statements unnecessarily.\n+\n 2006-03-02  Zdenek Dvorak <dvorakz@suse.cz>\n \n \t* cse.c (rest_of_handle_cse): Do not pass CLEANUP_PRE_LOOP to cfg"}, {"sha": "f6d0a6d0c8e8df55851650614fe34c2d77baae20", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/701b8964b2b94331221474a6d44b0caf0d0eae6b/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/701b8964b2b94331221474a6d44b0caf0d0eae6b/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=701b8964b2b94331221474a6d44b0caf0d0eae6b", "patch": "@@ -3198,21 +3198,19 @@ remove_range_assertions (void)\n \tif (TREE_CODE (stmt) == MODIFY_EXPR\n \t    && TREE_CODE (TREE_OPERAND (stmt, 1)) == ASSERT_EXPR)\n \t  {\n-\t    tree rhs = TREE_OPERAND (stmt, 1);\n+\t    tree rhs = TREE_OPERAND (stmt, 1), var;\n \t    tree cond = fold (ASSERT_EXPR_COND (rhs));\n \t    use_operand_p use_p;\n \t    imm_use_iterator iter;\n \n \t    gcc_assert (cond != boolean_false_node);\n-\t    TREE_OPERAND (stmt, 1) = ASSERT_EXPR_VAR (rhs);\n-\t    update_stmt (stmt);\n \n-\t    /* The statement is now a copy.  Propagate the RHS into\n-\t       every use of the LHS.  */\n+\t    /* Propagate the RHS into every use of the LHS.  */\n+\t    var = ASSERT_EXPR_VAR (rhs);\n \t    FOR_EACH_IMM_USE_SAFE (use_p, iter, TREE_OPERAND (stmt, 0))\n \t      {\n-\t\tSET_USE (use_p, ASSERT_EXPR_VAR (rhs));\n-\t\tupdate_stmt (USE_STMT (use_p));\n+\t\tSET_USE (use_p, var);\n+\t\tgcc_assert (TREE_CODE (var) == SSA_NAME);\n \t      }\n \n \t    /* And finally, remove the copy, it is not needed.  */"}]}