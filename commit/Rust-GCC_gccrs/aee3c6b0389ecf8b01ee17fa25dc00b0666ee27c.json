{"sha": "aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWVlM2M2YjAzODllY2Y4YjAxZWUxN2ZhMjVkYzAwYjA2NjZlZTI3Yw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "2000-08-24T23:48:25Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2000-08-24T23:48:25Z"}, "message": "Fix ia64-linux setjmp failures due to attribute aligned on typedef bug.\n\n\t* c-common.c (decl_attributes, case A_ALIGN): Revert last change.\n\tCopy type in a TYPE_DECL, just like pushdecl does.\n\nFrom-SVN: r35966", "tree": {"sha": "70d3c839eb90150ba7ddac50375f76c2c2778b2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70d3c839eb90150ba7ddac50375f76c2c2778b2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c/comments", "author": null, "committer": null, "parents": [{"sha": "a1066c99f7071d94c76612f303b57fab60fdc067", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1066c99f7071d94c76612f303b57fab60fdc067", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1066c99f7071d94c76612f303b57fab60fdc067"}], "stats": {"total": 27, "additions": 19, "deletions": 8}, "files": [{"sha": "40f8f0b6c69c34ea85cfb7add7a26780a9e70ff3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c", "patch": "@@ -1,3 +1,8 @@\n+2000-08-24  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* c-common.c (decl_attributes, case A_ALIGN): Revert last change.\n+\tCopy type in a TYPE_DECL, just like pushdecl does.\n+\n 2000-08-24  Richard Henderson  <rth@cygnus.com>\n \n \t* toplev.c (main): Enable flag_reorder_blocks at -O2."}, {"sha": "e2e57c58113b2deb4479b8da68b18f8dfa6b26ec", "filename": "gcc/c-common.c", "status": "modified", "additions": 14, "deletions": 8, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=aee3c6b0389ecf8b01ee17fa25dc00b0666ee27c", "patch": "@@ -788,16 +788,22 @@ decl_attributes (node, attributes, prefix_attributes)\n \t      error (\"requested alignment is too large\");\n \t    else if (is_type)\n \t      {\n-\t\tif (decl)\n+\t\t/* If we have a TYPE_DECL, then copy the type, so that we\n+\t\t   don't accidentally modify a builtin type.  See pushdecl.  */\n+\t\tif (decl && TREE_TYPE (decl) != error_mark_node\n+\t\t    && DECL_ORIGINAL_TYPE (decl) == NULL_TREE)\n \t\t  {\n-\t\t    DECL_ALIGN (decl) = (1 << i) * BITS_PER_UNIT;\n-\t\t    DECL_USER_ALIGN (decl) = 1;\n-\t\t  }\n-\t\telse\n-\t\t  {\n-\t\t    TYPE_ALIGN (type) = (1 << i) * BITS_PER_UNIT;\n-\t\t    TYPE_USER_ALIGN (type) = 1;\n+\t\t    tree tt = TREE_TYPE (decl);\n+\t\t    DECL_ORIGINAL_TYPE (decl) = tt;\n+\t\t    tt = build_type_copy (tt);\n+\t\t    TYPE_NAME (tt) = decl;\n+\t\t    TREE_USED (tt) = TREE_USED (decl);\n+\t\t    TREE_TYPE (decl) = tt;\n+\t\t    type = tt;\n \t\t  }\n+\n+\t\tTYPE_ALIGN (type) = (1 << i) * BITS_PER_UNIT;\n+\t\tTYPE_USER_ALIGN (type) = 1;\n \t      }\n \t    else if (TREE_CODE (decl) != VAR_DECL\n \t\t     && TREE_CODE (decl) != FIELD_DECL)"}]}