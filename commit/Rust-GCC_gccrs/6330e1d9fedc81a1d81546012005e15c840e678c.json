{"sha": "6330e1d9fedc81a1d81546012005e15c840e678c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjMzMGUxZDlmZWRjODFhMWQ4MTU0NjAxMjAwNWUxNWM4NDBlNjc4Yw==", "commit": {"author": {"name": "Ralf Wildenhues", "email": "Ralf.Wildenhues@gmx.de", "date": "2009-09-02T22:11:54Z"}, "committer": {"name": "Ralf Wildenhues", "email": "rwild@gcc.gnu.org", "date": "2009-09-02T22:11:54Z"}, "message": "v3: fix config.status instantiation of subdir makefiles.\n\nlibstdc++-v3/:\n\t* configure.ac: Replace AC_CONFIG_COMMANDS([default])\n\tinstantiation with additional commands issued for each Makefile\n\tin glibcxx_SUBDIRS, so `./config.status subdir/Makefile' also\n\truns these commands.\n\tAdd a separate AC_CONFIG_COMMANDS([generate-headers]) for\n\trunning `make' in include, passing `pch_build=' to `make'.\n\t* configure: Regenerate.\n\nFrom-SVN: r151352", "tree": {"sha": "86edea893a0bf1459489d3c0c3582fe754ab73e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86edea893a0bf1459489d3c0c3582fe754ab73e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6330e1d9fedc81a1d81546012005e15c840e678c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6330e1d9fedc81a1d81546012005e15c840e678c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6330e1d9fedc81a1d81546012005e15c840e678c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6330e1d9fedc81a1d81546012005e15c840e678c/comments", "author": null, "committer": null, "parents": [{"sha": "865dfe398b530c3c952d031d2c9a1d212be01c23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/865dfe398b530c3c952d031d2c9a1d212be01c23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/865dfe398b530c3c952d031d2c9a1d212be01c23"}], "stats": {"total": 161, "additions": 95, "deletions": 66}, "files": [{"sha": "d0562a6d89caf16d1ac281282141aba63559de89", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6330e1d9fedc81a1d81546012005e15c840e678c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6330e1d9fedc81a1d81546012005e15c840e678c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=6330e1d9fedc81a1d81546012005e15c840e678c", "patch": "@@ -1,5 +1,13 @@\n 2009-09-02  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n+\t* configure.ac: Replace AC_CONFIG_COMMANDS([default])\n+\tinstantiation with additional commands issued for each Makefile\n+\tin glibcxx_SUBDIRS, so `./config.status subdir/Makefile' also\n+\truns these commands.\n+\tAdd a separate AC_CONFIG_COMMANDS([generate-headers]) for\n+\trunning `make' in include, passing `pch_build=' to `make'.\n+\t* configure: Regenerate.\n+\n \tPR libstdc++/41220\n \t* include/Makefile.am (CLEANFILES): Add stamp-host.\n \t* include/Makefile.in: Regenerate."}, {"sha": "2d0c97782cf4b8e34453529f238c5b8e851ea8f6", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 69, "deletions": 32, "changes": 101, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6330e1d9fedc81a1d81546012005e15c840e678c/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6330e1d9fedc81a1d81546012005e15c840e678c/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=6330e1d9fedc81a1d81546012005e15c840e678c", "patch": "@@ -59052,12 +59052,23 @@ else\n fi\n \n \n-ac_config_files=\"$ac_config_files Makefile include/Makefile libsupc++/Makefile python/Makefile src/Makefile doc/Makefile po/Makefile testsuite/Makefile\"\n+ac_config_files=\"$ac_config_files Makefile\"\n \n ac_config_files=\"$ac_config_files scripts/testsuite_flags\"\n \n \n-ac_config_commands=\"$ac_config_commands default\"\n+# Multilibs need MULTISUBDIR defined correctly in certain makefiles so\n+# that multilib installs will end up installed in the correct place.\n+# The testsuite needs it for multilib-aware ABI baseline files.\n+# To work around this not being passed down from config-ml.in ->\n+# srcdir/Makefile.am -> srcdir/{src,libsupc++,...}/Makefile.am, manually\n+# append it here.  Only modify Makefiles that have just been created.\n+#\n+# Also, get rid of this simulated-VPATH thing that automake does.\n+ac_config_files=\"$ac_config_files include/Makefile libsupc++/Makefile python/Makefile src/Makefile doc/Makefile po/Makefile testsuite/Makefile\"\n+\n+\n+ac_config_commands=\"$ac_config_commands generate-headers\"\n \n \n cat >confcache <<\\_ACEOF\n@@ -60196,11 +60207,6 @@ ac_cv_type_int_fast32_t=\"$ac_cv_type_int_fast32_t\"\n ac_cv_sizeof_void_p=\"$ac_cv_sizeof_void_p\"\n \n \n-# Variables needed in config.status (file generation) which aren't already\n-# passed by autoconf.\n-SUBDIRS=\"$SUBDIRS\"\n-\n-\n _ACEOF\n \n cat >>$CONFIG_STATUS <<\\_ACEOF || ac_write_fail=1\n@@ -60214,15 +60220,15 @@ do\n     \"libtool\") CONFIG_COMMANDS=\"$CONFIG_COMMANDS libtool\" ;;\n     \"include/gstdint.h\") CONFIG_COMMANDS=\"$CONFIG_COMMANDS include/gstdint.h\" ;;\n     \"Makefile\") CONFIG_FILES=\"$CONFIG_FILES Makefile\" ;;\n+    \"scripts/testsuite_flags\") CONFIG_FILES=\"$CONFIG_FILES scripts/testsuite_flags\" ;;\n     \"include/Makefile\") CONFIG_FILES=\"$CONFIG_FILES include/Makefile\" ;;\n     \"libsupc++/Makefile\") CONFIG_FILES=\"$CONFIG_FILES libsupc++/Makefile\" ;;\n     \"python/Makefile\") CONFIG_FILES=\"$CONFIG_FILES python/Makefile\" ;;\n     \"src/Makefile\") CONFIG_FILES=\"$CONFIG_FILES src/Makefile\" ;;\n     \"doc/Makefile\") CONFIG_FILES=\"$CONFIG_FILES doc/Makefile\" ;;\n     \"po/Makefile\") CONFIG_FILES=\"$CONFIG_FILES po/Makefile\" ;;\n     \"testsuite/Makefile\") CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n-    \"scripts/testsuite_flags\") CONFIG_FILES=\"$CONFIG_FILES scripts/testsuite_flags\" ;;\n-    \"default\") CONFIG_COMMANDS=\"$CONFIG_COMMANDS default\" ;;\n+    \"generate-headers\") CONFIG_COMMANDS=\"$CONFIG_COMMANDS generate-headers\" ;;\n \n   *) as_fn_error \"invalid argument: \\`$ac_config_target'\" \"$LINENO\" 5;;\n   esac\n@@ -61946,32 +61952,63 @@ fi\n \n  ;;\n     \"scripts/testsuite_flags\":F) chmod +x scripts/testsuite_flags ;;\n-    \"default\":C) if test -n \"$CONFIG_FILES\"; then\n-   # Multilibs need MULTISUBDIR defined correctly in certain makefiles so\n-   # that multilib installs will end up installed in the correct place.\n-   # The testsuite needs it for multilib-aware ABI baseline files.\n-   # To work around this not being passed down from config-ml.in ->\n-   # srcdir/Makefile.am -> srcdir/{src,libsupc++,...}/Makefile.am, manually\n-   # append it here.  Only modify Makefiles that have just been created.\n-   #\n-   # Also, get rid of this simulated-VPATH thing that automake does.\n-   cat > vpsed << \\_EOF\n+    \"include/Makefile\":F) cat > vpsed$$ << \\_EOF\n s!`test -f '$<' || echo '$(srcdir)/'`!!\n _EOF\n-   for i in $SUBDIRS; do\n-    case $CONFIG_FILES in\n-     *${i}/Makefile*)\n-       #echo \"Adding MULTISUBDIR to $i/Makefile\"\n-       sed -f vpsed $i/Makefile > tmp\n-       grep '^MULTISUBDIR =' Makefile >> tmp\n-       mv tmp $i/Makefile\n-       ;;\n-    esac\n-   done\n-   rm vpsed\n- fi\n- (cd include && ${MAKE-make})\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n+ ;;\n+    \"libsupc++/Makefile\":F) cat > vpsed$$ << \\_EOF\n+s!`test -f '$<' || echo '$(srcdir)/'`!!\n+_EOF\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n+ ;;\n+    \"python/Makefile\":F) cat > vpsed$$ << \\_EOF\n+s!`test -f '$<' || echo '$(srcdir)/'`!!\n+_EOF\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n+ ;;\n+    \"src/Makefile\":F) cat > vpsed$$ << \\_EOF\n+s!`test -f '$<' || echo '$(srcdir)/'`!!\n+_EOF\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n+ ;;\n+    \"doc/Makefile\":F) cat > vpsed$$ << \\_EOF\n+s!`test -f '$<' || echo '$(srcdir)/'`!!\n+_EOF\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n+ ;;\n+    \"po/Makefile\":F) cat > vpsed$$ << \\_EOF\n+s!`test -f '$<' || echo '$(srcdir)/'`!!\n+_EOF\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n+ ;;\n+    \"testsuite/Makefile\":F) cat > vpsed$$ << \\_EOF\n+s!`test -f '$<' || echo '$(srcdir)/'`!!\n+_EOF\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n  ;;\n+    \"generate-headers\":C) (cd include && ${MAKE-make} pch_build= ) ;;\n \n   esac\n done # for ac_tag"}, {"sha": "e8f680526e9add75b880b14f924168a7d914e0aa", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 18, "deletions": 34, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6330e1d9fedc81a1d81546012005e15c840e678c/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6330e1d9fedc81a1d81546012005e15c840e678c/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=6330e1d9fedc81a1d81546012005e15c840e678c", "patch": "@@ -388,45 +388,29 @@ AC_SUBST(LIBSUPCXX_PICFLAGS)\n dnl In autoconf 2.5x, AC_OUTPUT is replaced by four AC_CONFIG_* macros,\n dnl which can all be called multiple times as needed, plus one (different)\n dnl AC_OUTPUT macro.  This one lists the files to be created:\n-AC_CONFIG_FILES( \\\n-  Makefile \\\n-  AC_FOREACH([DIR], glibcxx_SUBDIRS, [DIR/Makefile ])\n-  )\n+AC_CONFIG_FILES(Makefile)\n AC_CONFIG_FILES([scripts/testsuite_flags],[chmod +x scripts/testsuite_flags])\n \n-dnl These commands are run at the end of config.status:\n-AC_CONFIG_COMMANDS([default],\n-[if test -n \"$CONFIG_FILES\"; then\n-   # Multilibs need MULTISUBDIR defined correctly in certain makefiles so\n-   # that multilib installs will end up installed in the correct place.\n-   # The testsuite needs it for multilib-aware ABI baseline files.\n-   # To work around this not being passed down from config-ml.in ->\n-   # srcdir/Makefile.am -> srcdir/{src,libsupc++,...}/Makefile.am, manually\n-   # append it here.  Only modify Makefiles that have just been created.\n-   #\n-   # Also, get rid of this simulated-VPATH thing that automake does.\n-   cat > vpsed << \\_EOF\n+# Multilibs need MULTISUBDIR defined correctly in certain makefiles so\n+# that multilib installs will end up installed in the correct place.\n+# The testsuite needs it for multilib-aware ABI baseline files.\n+# To work around this not being passed down from config-ml.in ->\n+# srcdir/Makefile.am -> srcdir/{src,libsupc++,...}/Makefile.am, manually\n+# append it here.  Only modify Makefiles that have just been created.\n+#\n+# Also, get rid of this simulated-VPATH thing that automake does.\n+AC_CONFIG_FILES(AC_FOREACH([DIR], glibcxx_SUBDIRS, [DIR/Makefile ]),\n+  [cat > vpsed$$ << \\_EOF\n s!`test -f '$<' || echo '$(srcdir)/'`!!\n _EOF\n-   for i in $SUBDIRS; do\n-    case $CONFIG_FILES in\n-     *${i}/Makefile*)\n-       #echo \"Adding MULTISUBDIR to $i/Makefile\"\n-       sed -f vpsed $i/Makefile > tmp\n-       grep '^MULTISUBDIR =' Makefile >> tmp\n-       mv tmp $i/Makefile\n-       ;;\n-    esac\n-   done\n-   rm vpsed\n- fi\n- (cd include && ${MAKE-make})\n-],\n-[\n-# Variables needed in config.status (file generation) which aren't already\n-# passed by autoconf.\n-SUBDIRS=\"$SUBDIRS\"\n+   sed -f vpsed$$ $ac_file > tmp$$\n+   grep '^MULTISUBDIR =' Makefile >> tmp$$\n+   mv tmp$$ $ac_file\n+   rm vpsed$$\n ])\n \n+AC_CONFIG_COMMANDS([generate-headers],\n+  [(cd include && ${MAKE-make} pch_build= )])\n+\n dnl And this actually makes things happen:\n AC_OUTPUT"}]}