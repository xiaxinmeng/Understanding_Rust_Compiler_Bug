{"sha": "6096cf988169ef5abe461db3487ffe11761c4662", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA5NmNmOTg4MTY5ZWY1YWJlNDYxZGIzNDg3ZmZlMTE3NjFjNDY2Mg==", "commit": {"author": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1998-09-22T07:22:00Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1998-09-22T07:22:00Z"}, "message": "Syntax error in sed script, combine '//' fixes\n\nFrom-SVN: r22544", "tree": {"sha": "bfb929a4c2c644f2efb7b7c04acfa5bcd45a946b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bfb929a4c2c644f2efb7b7c04acfa5bcd45a946b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6096cf988169ef5abe461db3487ffe11761c4662", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6096cf988169ef5abe461db3487ffe11761c4662", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6096cf988169ef5abe461db3487ffe11761c4662", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6096cf988169ef5abe461db3487ffe11761c4662/comments", "author": null, "committer": null, "parents": [{"sha": "da7275888fa162596e91c62809d10c398806a225", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da7275888fa162596e91c62809d10c398806a225", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da7275888fa162596e91c62809d10c398806a225"}], "stats": {"total": 76, "additions": 45, "deletions": 31}, "files": [{"sha": "6c04a4800c03a2b06edb302cb572c469334e0b81", "filename": "contrib/fixinc/inclhack.def", "status": "modified", "additions": 45, "deletions": 31, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6096cf988169ef5abe461db3487ffe11761c4662/contrib%2Ffixinc%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6096cf988169ef5abe461db3487ffe11761c4662/contrib%2Ffixinc%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ffixinc%2Finclhack.def?ref=6096cf988169ef5abe461db3487ffe11761c4662", "patch": "@@ -251,7 +251,7 @@ fix = {\n     sed = \"/#[ \\t]*define[ \\t]*[ \\t]BSD43__IO/\" 's/\\'\\([cgx]\\)\\'/\\1/g';\n };\n \n-\n+#IFDEF no_more\n /*\n  *  And also with the HP-UX 10 and HP-UX 11 sys/pci.h file\n  */\n@@ -298,6 +298,49 @@ fix = {\n     select   = \"Wind River\";\n     sed      = \"s|//.*$||g\";\n };\n+#endif\n+\n+/*\n+ *  Remove the double-slash comments\n+ *  They *must* be removed so it will not create nested comments!!\n+ *  However, they will *not* be removed if '++' is in any part of\n+ *  the file name, or if the name ends with \".hh\" or \".H\".\n+ *\n+ *  There *used* to be a number of similar problems in various OSes:\n+\n+ *  Turning // comments into normal comments trashes this IRIX 4.0.1\n+ *  header file, which embeds // comments inside multi-line\n+ *  comments.  If this looks like the IRIX header file, we refix it by\n+ *  just throwing away the // comments.\n+\n+ *  Same problem with a file from SunOS 4.1.3 : a header file containing\n+ *  the string \"//\" embedded in \"/ * * /\"\n+\n+ *  There is a similar problem with the VxWorks drv/netif/if_med.h file.\n+\n+ *  And also with the HP-UX 10 and HP-UX 11 sys/pci.h file\n+ */\n+fix = {\n+    hackname = no_double_slash;\n+    test     = '-z \"`echo ${file}|egrep \\'++$|\\.hh$|\\.H$\\'`\"';\n+    select = '//[^*]';\n+    sed    = '/\\/\\/[^*]/' \"s|//.*$||g\";\n+};\n+\n+\n+/*\n+ *  Multiline comment after typedef on IRIX 4.0.1.\n+ */\n+fix = {\n+    hackname = irix_bogus_cxx_cmnt;\n+    files  = \"elf_abi.h\";\n+    files  = \"elf.h\";\n+    /*\n+     *  This really looks like it is replacing \"/ * * /\" with \"//\"\n+     *  Shouldn't the replacement really be \" ## \"?\n+     */\n+    sed      = 's@\"/\\*\"\\*/@\"//\"@';\n+};\n \n \n /*\n@@ -532,21 +575,6 @@ fix = {\n };\n \n \n-/*\n- *  Multiline comment after typedef on IRIX 4.0.1.\n- */\n-fix = {\n-    hackname = irix_bogus_cxx_cmnt;\n-    files  = \"elf_abi.h\";\n-    files  = \"elf.h\";\n-    /*\n-     *  This really looks like it is replacing \"/ * * /\" with \"//\"\n-     *  Shouldn't the replacement really be \" ## \"?\n-     */\n-    sed      = 's@\"/\\*\"\\*/@\"//\"@';\n-};\n-\n-\n /*\n  *  IRIX 4.0.5 <rpc/auth.h> uses struct sockaddr\n  *  in prototype without previous definition.\n@@ -1039,20 +1067,6 @@ fix = {\n };\n \n \n-/*\n- *  Remove the double-slash comments\n- *  They *must* be removed so it will not create nested comments!!\n- *  However, they will *not* be removed if '++' is in any part of\n- *  the file name, or if the name ends with \".hh\" or \".H\".\n- */\n-fix = {\n-    hackname = no_double_slash;\n-    test     = '-z \"`echo ${file}|egrep \\'++|\\.hh$|\\.H$\\'`\"';\n-    select = '//[^*]';\n-    sed    = '/\\/\\/[^*]/' \"s|//\\\\(.*\\\\)$|/* \\\\1 */|\";\n-};\n-\n-\n /*\n  *  a missing semi-colon at the end of the nodeent structure definition.\n  */\n@@ -1817,7 +1831,7 @@ fix = {\n     select = \"typedef[ \\t]+[a-z_][ \\ta-z_]*[ \\t]\"\n              \"(size|ptrdiff|wchar)_t\";\n \n-      sed  = \"/^[ \\t]*\\*[ \\t]*typedef unsigned int size_t;/N\";\n+      sed  = \"/^[ \\t]*\\\\*[ \\t]*typedef unsigned int size_t;/N\";\n \n       sed  = \"s/^\\\\([ \\t]*\\\\*[ \\t]*typedef unsigned int size_t;\\\\n\"\n                \"[ \\t]*\\\\*\\\\/\\\\)/\\\\1\\\\\\n\""}]}