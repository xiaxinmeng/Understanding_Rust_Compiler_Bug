{"sha": "2d7756fa264b9975f7d779bc2e658a6741314e14", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQ3NzU2ZmEyNjRiOTk3NWY3ZDc3OWJjMmU2NThhNjc0MTMxNGUxNA==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2008-04-08T06:48:07Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-04-08T06:48:07Z"}, "message": "a-ztdeau.adb, [...] (Puts_Dec): Fix error in computing Fore when Exp > 0\n\n2008-04-08  Robert Dewar  <dewar@adacore.com>\n\n\t* a-ztdeau.adb, a-tideau.adb, a-wtdeau.adb (Puts_Dec): Fix error in\n\tcomputing Fore when Exp > 0\n\nFrom-SVN: r134021", "tree": {"sha": "e7c3056dbb2b784441ba566cfe999bb88cb521cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7c3056dbb2b784441ba566cfe999bb88cb521cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d7756fa264b9975f7d779bc2e658a6741314e14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d7756fa264b9975f7d779bc2e658a6741314e14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d7756fa264b9975f7d779bc2e658a6741314e14", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d7756fa264b9975f7d779bc2e658a6741314e14/comments", "author": null, "committer": null, "parents": [{"sha": "f2cbd970083b0c0af05fb2cfca08ad4e8d02dc41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2cbd970083b0c0af05fb2cfca08ad4e8d02dc41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2cbd970083b0c0af05fb2cfca08ad4e8d02dc41"}], "stats": {"total": 54, "additions": 39, "deletions": 15}, "files": [{"sha": "b9e39dcb586ff57002dd3744133821c5b6215d46", "filename": "gcc/ada/a-tideau.adb", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d7756fa264b9975f7d779bc2e658a6741314e14/gcc%2Fada%2Fa-tideau.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d7756fa264b9975f7d779bc2e658a6741314e14/gcc%2Fada%2Fa-tideau.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-tideau.adb?ref=2d7756fa264b9975f7d779bc2e658a6741314e14", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -201,16 +201,24 @@ package body Ada.Text_IO.Decimal_Aux is\n       Ptr  : Natural := 0;\n \n    begin\n-      if Exp = 0 then\n-         Fore := To'Length - 1 - Aft;\n-      else\n-         Fore := To'Length - 2 - Aft - Exp;\n+      --  Compute Fore, allowing for Aft digits and the decimal dot\n+\n+      Fore := To'Length - Field'Max (1, Aft) - 1;\n+\n+      --  Allow for Exp and two more for E+ or E- if exponent present\n+\n+      if Exp /= 0 then\n+         Fore := Fore - 2 - Exp;\n       end if;\n \n+      --  Make sure we have enough room\n+\n       if Fore < 1 then\n          raise Layout_Error;\n       end if;\n \n+      --  Do the conversion and check length of result\n+\n       Set_Image_Decimal (Item, Buf, Ptr, Scale, Fore, Aft, Exp);\n \n       if Ptr > To'Length then"}, {"sha": "1a9752fb8c2beb00eea9c643efbffec2fc9ea24e", "filename": "gcc/ada/a-wtdeau.adb", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d7756fa264b9975f7d779bc2e658a6741314e14/gcc%2Fada%2Fa-wtdeau.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d7756fa264b9975f7d779bc2e658a6741314e14/gcc%2Fada%2Fa-wtdeau.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-wtdeau.adb?ref=2d7756fa264b9975f7d779bc2e658a6741314e14", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -203,16 +203,24 @@ package body Ada.Wide_Text_IO.Decimal_Aux is\n       Ptr  : Natural := 0;\n \n    begin\n-      if Exp = 0 then\n-         Fore := To'Length - 1 - Aft;\n-      else\n-         Fore := To'Length - 2 - Aft - Exp;\n+      --  Compute Fore, allowing for Aft digits and the decimal dot\n+\n+      Fore := To'Length - Field'Max (1, Aft) - 1;\n+\n+      --  Allow for Exp and two more for E+ or E- if exponent present\n+\n+      if Exp /= 0 then\n+         Fore := Fore - 2 - Exp;\n       end if;\n \n+      --  Make sure we have enough room\n+\n       if Fore < 1 then\n          raise Layout_Error;\n       end if;\n \n+      --  Do the conversion and check length of result\n+\n       Set_Image_Decimal (Item, Buf, Ptr, Scale, Fore, Aft, Exp);\n \n       if Ptr > To'Length then"}, {"sha": "e7f13ecc57bc3701f71929fe41e4b4f3efd628ef", "filename": "gcc/ada/a-ztdeau.adb", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d7756fa264b9975f7d779bc2e658a6741314e14/gcc%2Fada%2Fa-ztdeau.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d7756fa264b9975f7d779bc2e658a6741314e14/gcc%2Fada%2Fa-ztdeau.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-ztdeau.adb?ref=2d7756fa264b9975f7d779bc2e658a6741314e14", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -203,16 +203,24 @@ package body Ada.Wide_Wide_Text_IO.Decimal_Aux is\n       Ptr  : Natural := 0;\n \n    begin\n-      if Exp = 0 then\n-         Fore := To'Length - 1 - Aft;\n-      else\n-         Fore := To'Length - 2 - Aft - Exp;\n+      --  Compute Fore, allowing for Aft digits and the decimal dot\n+\n+      Fore := To'Length - Field'Max (1, Aft) - 1;\n+\n+      --  Allow for Exp and two more for E+ or E- if exponent present\n+\n+      if Exp /= 0 then\n+         Fore := Fore - 2 - Exp;\n       end if;\n \n+      --  Make sure we have enough room\n+\n       if Fore < 1 then\n          raise Layout_Error;\n       end if;\n \n+      --  Do the conversion and check length of result\n+\n       Set_Image_Decimal (Item, Buf, Ptr, Scale, Fore, Aft, Exp);\n \n       if Ptr > To'Length then"}]}