{"sha": "73ac190a5e191440d3536b14c0a9c4b7390f216a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNhYzE5MGE1ZTE5MTQ0MGQzNTM2YjE0YzBhOWM0YjczOTBmMjE2YQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2011-12-30T21:11:20Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-12-30T21:11:20Z"}, "message": "re PR c++/51316 (alignof doesn't work with arrays of unknown bound)\n\n/c-family\n2011-12-30  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51316\n\t* c-common.c (c_sizeof_or_alignof_type): In C++ allow for alignof\n\tof array types with an unknown bound.\n\n/testsuite\n2011-12-30  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51316\n\t* g++.dg/cpp0x/alignof4.C: New.\n\nFrom-SVN: r182746", "tree": {"sha": "d54e69c5f0daae838273b12157274dec079aee1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d54e69c5f0daae838273b12157274dec079aee1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73ac190a5e191440d3536b14c0a9c4b7390f216a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73ac190a5e191440d3536b14c0a9c4b7390f216a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73ac190a5e191440d3536b14c0a9c4b7390f216a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73ac190a5e191440d3536b14c0a9c4b7390f216a/comments", "author": null, "committer": null, "parents": [{"sha": "30c34af582f54fa59d3983ef5d091b427dab8f7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30c34af582f54fa59d3983ef5d091b427dab8f7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30c34af582f54fa59d3983ef5d091b427dab8f7f"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "7850829108ae1920a4638c5958eff860465f7efd", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=73ac190a5e191440d3536b14c0a9c4b7390f216a", "patch": "@@ -1,3 +1,9 @@\n+2011-12-30  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/51316\n+\t* c-common.c (c_sizeof_or_alignof_type): In C++ allow for alignof\n+\tof array types with an unknown bound.\n+\n 2011-12-20  Joseph Myers  <joseph@codesourcery.com>\n \n \t* c-common.c (flag_isoc99): Update comment to refer to C11."}, {"sha": "013c71a6420f01969aa8753973daabcdd11d2ea1", "filename": "gcc/c-family/c-common.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Fc-family%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Fc-family%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.c?ref=73ac190a5e191440d3536b14c0a9c4b7390f216a", "patch": "@@ -4382,13 +4382,22 @@ c_sizeof_or_alignof_type (location_t loc,\n         return error_mark_node;\n       value = size_one_node;\n     }\n-  else if (!COMPLETE_TYPE_P (type))\n+  else if (!COMPLETE_TYPE_P (type)\n+\t   && (!c_dialect_cxx () || is_sizeof || type_code != ARRAY_TYPE))\n     {\n       if (complain)\n-\terror_at (loc, \"invalid application of %qs to incomplete type %qT \",\n+\terror_at (loc, \"invalid application of %qs to incomplete type %qT\",\n \t\t  op_name, type);\n       return error_mark_node;\n     }\n+  else if (c_dialect_cxx () && type_code == ARRAY_TYPE\n+\t   && !COMPLETE_TYPE_P (TREE_TYPE (type)))\n+    {\n+      if (complain)\n+\terror_at (loc, \"invalid application of %qs to array type %qT of \"\n+\t\t  \"incomplete element type\", op_name, type);\n+      return error_mark_node;\n+    }\n   else\n     {\n       if (is_sizeof)"}, {"sha": "34662342a8f127dbc19515e05ae719e82f74c78a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=73ac190a5e191440d3536b14c0a9c4b7390f216a", "patch": "@@ -1,3 +1,8 @@\n+2011-12-30  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/51316\n+\t* g++.dg/cpp0x/alignof4.C: New.\n+\n 2011-12-29  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR testsuite/51702"}, {"sha": "92d636faf0965268bd4b0ed63036cfa96bceeade", "filename": "gcc/testsuite/g++.dg/cpp0x/alignof4.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignof4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73ac190a5e191440d3536b14c0a9c4b7390f216a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignof4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignof4.C?ref=73ac190a5e191440d3536b14c0a9c4b7390f216a", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/51316\n+// { dg-options \"-std=c++0x\" }\n+\n+int main()\n+{\n+  alignof(int []);\n+}"}]}