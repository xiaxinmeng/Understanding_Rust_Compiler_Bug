{"sha": "51004cb5839a2825ae15b563e7054ac66deda24a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTEwMDRjYjU4MzlhMjgyNWFlMTViNTYzZTcwNTRhYzY2ZGVkYTI0YQ==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@gnat.com", "date": "2004-10-04T14:53:52Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-10-04T14:53:52Z"}, "message": "mlib-tgt-tru64.adb, [...] (Build_Dynamic_Library): New parameter Options_2.\n\n2004-10-04  Vincent Celier  <celier@gnat.com>\n\n\t* mlib-tgt-tru64.adb, mlib-tgt-aix.adb, mlib-tgt-irix.adb,\n\tmlib-tgt-hpux.adb, mlib-tgt-linux.adb, mlib-tgt-solaris.adb,\n\tmlib-tgt-vms-alpha.adb, mlib-tgt-vms-ia64.adb, mlib-tgt-mingw.adb,\n\tmlib-tgt-vxworks.adb, mlib-tgt.adb (Build_Dynamic_Library): New\n\tparameter Options_2.\n\n\t* mlib-prj.ads, mlib-prj.adb (Build_Library): Call\n\tBuild_Dynamic_Library with an empty Options_2.\n\n\t* mlib-utl.ads, mlib-utl.adb (Gcc): Parameter Options_2 has no\n\tdefault anymore.\n\n\t* makegpr.adb (Get_Imported_Directories.add): Remove trailing\n\tdirectory separator, if any.\n\t(Gprmake): Do not allow mains on the command line for library projects.\n\tDo not attempt to link when the project is a library project.\n\t(Library_Opts): New table to store Library_Options.\n\t(Build_Library): If Library_Options is specified, pass these options\n\twhen building a shared library.\n\nFrom-SVN: r88490", "tree": {"sha": "82ff6cb4ad487fb3197b3201c544213d8c85879f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82ff6cb4ad487fb3197b3201c544213d8c85879f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/51004cb5839a2825ae15b563e7054ac66deda24a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51004cb5839a2825ae15b563e7054ac66deda24a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51004cb5839a2825ae15b563e7054ac66deda24a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51004cb5839a2825ae15b563e7054ac66deda24a/comments", "author": null, "committer": null, "parents": [{"sha": "3b37ffbf15e7cc9e47a772f54de00bcec7737e74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b37ffbf15e7cc9e47a772f54de00bcec7737e74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b37ffbf15e7cc9e47a772f54de00bcec7737e74"}], "stats": {"total": 216, "additions": 169, "deletions": 47}, "files": [{"sha": "463a4d3e498da2ef325a0a715b06a27033c7242e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -1,3 +1,25 @@\n+2004-10-04  Vincent Celier  <celier@gnat.com>\n+\n+\t* mlib-tgt-tru64.adb, mlib-tgt-aix.adb, mlib-tgt-irix.adb, \n+\tmlib-tgt-hpux.adb, mlib-tgt-linux.adb, mlib-tgt-solaris.adb, \n+\tmlib-tgt-vms-alpha.adb, mlib-tgt-vms-ia64.adb, mlib-tgt-mingw.adb, \n+\tmlib-tgt-vxworks.adb, mlib-tgt.adb (Build_Dynamic_Library): New\n+\tparameter Options_2.\n+\n+\t* mlib-prj.ads, mlib-prj.adb (Build_Library): Call\n+\tBuild_Dynamic_Library with an empty Options_2.\n+\n+\t* mlib-utl.ads, mlib-utl.adb (Gcc): Parameter Options_2 has no\n+\tdefault anymore.\n+\n+\t* makegpr.adb (Get_Imported_Directories.add): Remove trailing\n+\tdirectory separator, if any.\n+\t(Gprmake): Do not allow mains on the command line for library projects.\n+\tDo not attempt to link when the project is a library project.\n+\t(Library_Opts): New table to store Library_Options.\n+\t(Build_Library): If Library_Options is specified, pass these options\n+\twhen building a shared library.\n+\n 2004-10-04  Jose Ruiz  <ruiz@act-europe.fr>\n \n \t* s-tposen.adb (Service_Entry): The object must be always unlocked at"}, {"sha": "30f1519930796616d9311a73cc06db8d487cb3a7", "filename": "gcc/ada/makegpr.adb", "status": "modified", "additions": 85, "deletions": 18, "changes": 103, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmakegpr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmakegpr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakegpr.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -65,7 +65,7 @@ package body Makegpr is\n    --  The name of a linking script, built one the fly, when there are C++\n    --  sources and the C++ compiler is not g++.\n \n-   No_Argument : constant Argument_List := (1 .. 0 => null);\n+   No_Argument : aliased Argument_List := (1 .. 0 => null);\n    --  Null argument list representing case of no arguments\n \n    FD : Process_Descriptor;\n@@ -184,6 +184,15 @@ package body Makegpr is\n       Table_Name           => \"Makegpr.Linker_Options\");\n    --  Table to store the linking options\n \n+   package Library_Opts is new Table.Table\n+     (Table_Component_Type => String_Access,\n+      Table_Index_Type     => Integer,\n+      Table_Low_Bound      => 1,\n+      Table_Initial        => 20,\n+      Table_Increment      => 100,\n+      Table_Name           => \"Makegpr.Library_Opts\");\n+   --  Table to store the linking options\n+\n    package Ada_Mains is new Table.Table\n      (Table_Component_Type => String_Access,\n       Table_Index_Type     => Integer,\n@@ -1339,6 +1348,7 @@ package body Makegpr is\n       Time_Stamp  : Time_Stamp_Type;\n       Driver_Name : Name_Id := No_Name;\n \n+      Lib_Opts : Argument_List_Access := No_Argument'Unrestricted_Access;\n    begin\n       Check_Archive_Builder;\n \n@@ -1571,11 +1581,47 @@ package body Makegpr is\n                   end if;\n                end if;\n \n+               --  If Library_Options is specified, add these options\n+\n+               declare\n+                  Library_Options : constant Variable_Value :=\n+                                      Value_Of\n+                                        (Name_Library_Options,\n+                                         Data.Decl.Attributes);\n+\n+               begin\n+                  if not Library_Options.Default then\n+                     declare\n+                        Current : String_List_Id := Library_Options.Values;\n+                        Element : String_Element;\n+\n+                     begin\n+                        while Current /= Nil_String loop\n+                           Element := String_Elements.Table (Current);\n+                           Get_Name_String (Element.Value);\n+\n+                           if Name_Len /= 0 then\n+                              Library_Opts.Increment_Last;\n+                              Library_Opts.Table (Library_Opts.Last) :=\n+                                new String'(Name_Buffer (1 .. Name_Len));\n+                           end if;\n+\n+                           Current := Element.Next;\n+                        end loop;\n+                     end;\n+                  end if;\n+\n+                  Lib_Opts :=\n+                    new Argument_List'(Argument_List\n+                       (Library_Opts.Table (1 .. Library_Opts.Last)));\n+               end;\n+\n                MLib.Tgt.Build_Dynamic_Library\n                  (Ofiles       => Arguments (1 .. Last_Argument),\n                   Foreign      => Arguments (1 .. Last_Argument),\n                   Afiles       => No_Argument,\n                   Options      => No_Argument,\n+                  Options_2    => Lib_Opts.all,\n                   Interfaces   => No_Argument,\n                   Lib_Filename => Get_Name_String (Data.Library_Name),\n                   Lib_Dir      => Get_Name_String (Data.Library_Dir),\n@@ -2827,6 +2873,15 @@ package body Makegpr is\n                Get_Name_String (Element.Value);\n \n                if Name_Len > 0 then\n+                  --  Remove a trailing directory separator: this may cause\n+                  --  problems on Windows.\n+\n+                  if Name_Len > 1\n+                    and then Name_Buffer (Name_Len) = Directory_Separator\n+                  then\n+                     Name_Len := Name_Len - 1;\n+                  end if;\n+\n                   declare\n                      Arg : constant String :=\n                              \"-I\" & Name_Buffer (1 .. Name_Len);\n@@ -3002,32 +3057,44 @@ package body Makegpr is\n          end if;\n \n       else\n-         --  First check for C++, to link libraries with g++, rather than gcc\n+         declare\n+            Data : constant Prj.Project_Data := Projects.Table (Main_Project);\n+         begin\n+            if Data.Library and then Mains.Number_Of_Mains /= 0 then\n+               Osint.Fail\n+                 (\"Cannot specify mains on the command line \" &\n+                  \"for a Library Project\");\n+            end if;\n \n-         Check_For_C_Plus_Plus;\n+            --  First check for C++, to link libraries with g++,\n+            --  rather than gcc.\n \n-         --  Compile sources and build archives for library project,\n-         --  if necessary.\n+            Check_For_C_Plus_Plus;\n \n-         Compile_Sources;\n+            --  Compile sources and build archives for library project,\n+            --  if necessary.\n \n-         --  When Keep_Going is True, if we had some errors, fail now,\n-         --  reporting the number of compilation errors.\n-         --  Do not attempt to link.\n+            Compile_Sources;\n \n-         Report_Total_Errors (\"compilation\");\n+            --  When Keep_Going is True, if we had some errors, fail now,\n+            --  reporting the number of compilation errors.\n+            --  Do not attempt to link.\n \n-         --  If -c was not specified, link the executables, if there are any.\n+            Report_Total_Errors (\"compilation\");\n \n-         if not Compile_Only then\n-            Build_Global_Archive;\n-            Link_Executables;\n-         end if;\n+            --  If -c was not specified, link the executables,\n+            --  if there are any.\n \n-         --  When Keep_Going is True, if we had some errors, fail, reporting\n-         --  the number of linking errors.\n+            if not Compile_Only and then not Data.Library then\n+               Build_Global_Archive;\n+               Link_Executables;\n+            end if;\n+\n+            --  When Keep_Going is True, if we had some errors, fail, reporting\n+            --  the number of linking errors.\n \n-         Report_Total_Errors (\"linking\");\n+            Report_Total_Errors (\"linking\");\n+         end;\n       end if;\n    end Gprmake;\n "}, {"sha": "1bfe6b175bddf3a584860d691147dfa7d6cd4710", "filename": "gcc/ada/mlib-prj.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-prj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-prj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-prj.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -1465,6 +1465,7 @@ package body MLib.Prj is\n                   Foreign       => Foreign_Objects.all,\n                   Afiles        => Ali_Files.all,\n                   Options       => Options.all,\n+                  Options_2     => No_Argument_List,\n                   Interfaces    => Arguments (1 .. Argument_Number),\n                   Lib_Filename  => Lib_Filename.all,\n                   Lib_Dir       => Lib_Dirpath.all,"}, {"sha": "a0afe8797506ebde44c0b19f90a02866ddb3a889", "filename": "gcc/ada/mlib-tgt-aix.adb", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-aix.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-aix.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-aix.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -69,7 +69,7 @@ package body MLib.Tgt is\n    --  The switches to use when linking a library against libgnarl when using\n    --  FSU threads.\n \n-   Thread_Options : Argument_List_Access := null;\n+   Thread_Options : Argument_List_Access := Empty_Argument_List;\n    --  Designate the thread switches to used when linking a library against\n    --  libgnarl. Depends on the thread library (Native or FSU). Resolved for\n    --  the first library linked against libgnarl.\n@@ -119,6 +119,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -142,8 +143,8 @@ package body MLib.Tgt is\n       --  The switch for automatic initialization of Stand-Alone Libraries.\n       --  Changed to a real switch when Auto_Init is True.\n \n-      Options_2 : Argument_List_Access := Empty_Argument_List;\n-      --  Changed to the thread options, if -lgnarl is specified\n+      Thread_Opts : Argument_List_Access := Empty_Argument_List;\n+      --  Set to Thread_Options if -lgnarl is found in the Options\n \n    begin\n       if Opt.Verbose_Mode then\n@@ -203,19 +204,19 @@ package body MLib.Tgt is\n                end;\n             end if;\n \n-            Options_2 := Thread_Options;\n+            Thread_Opts := Thread_Options;\n             exit;\n          end if;\n       end loop;\n \n       --  Finally, call GCC (or the driver specified) to build the library\n \n       MLib.Utl.Gcc\n-           (Output_File => Lib_File,\n-            Objects     => Ofiles,\n-            Options     => Options & Bexpall_Option & Init_Fini.all,\n-            Driver_Name => Driver_Name,\n-            Options_2   => Options_2.all);\n+        (Output_File => Lib_File,\n+         Objects     => Ofiles,\n+         Options     => Options & Bexpall_Option & Init_Fini.all,\n+         Driver_Name => Driver_Name,\n+         Options_2   => Options_2 & Thread_Opts.all);\n    end Build_Dynamic_Library;\n \n    -------------"}, {"sha": "a438b762f6e2efb28da248970d1a699766a2e8e8", "filename": "gcc/ada/mlib-tgt-hpux.adb", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-hpux.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-hpux.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-hpux.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -99,6 +99,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -147,6 +148,7 @@ package body MLib.Tgt is\n            (Output_File => Lib_File,\n             Objects     => Ofiles,\n             Options     => Common_Options & Init_Fini.all,\n+            Options_2   => Options_2,\n             Driver_Name => Driver_Name);\n \n       else\n@@ -157,6 +159,7 @@ package body MLib.Tgt is\n               (Output_File => Lib_Version,\n                Objects     => Ofiles,\n                Options     => Common_Options & Version_Arg & Init_Fini.all,\n+               Options_2   => Options_2,\n                Driver_Name => Driver_Name);\n             Symbolic_Link_Needed := Lib_Version /= Lib_File;\n \n@@ -165,6 +168,7 @@ package body MLib.Tgt is\n               (Output_File => Lib_Dir & Directory_Separator & Lib_Version,\n                Objects     => Ofiles,\n                Options     => Common_Options & Version_Arg & Init_Fini.all,\n+               Options_2   => Options_2,\n                Driver_Name => Driver_Name);\n             Symbolic_Link_Needed :=\n               Lib_Dir & Directory_Separator & Lib_Version /= Lib_File;"}, {"sha": "25fc1c13e15fcd36e4c861c4b8a57ff1fe89fcc5", "filename": "gcc/ada/mlib-tgt-irix.adb", "status": "modified", "additions": 17, "deletions": 9, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-irix.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-irix.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-irix.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -100,6 +100,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -127,10 +128,10 @@ package body MLib.Tgt is\n       --  After moving -lxxx to Options_2, N_Options up to index Options_Last\n       --  will contain the Options to pass to MLib.Utl.Gcc.\n \n-      Options_2      : Argument_List (Options'Range);\n-      Options_2_Last : Natural := Options_2'First - 1;\n-      --  Options_2 up to index Options_2_Last will contain the Options_2 to\n-      --  pass to MLib.Utl.Gcc.\n+      Real_Options_2 : Argument_List (1 .. Options'Length + Options_2'Length);\n+      Real_Options_2_Last : Natural := 0;\n+      --  Real_Options_2 up to index Real_Options_2_Last will contain the\n+      --  Options_2 to pass to MLib.Utl.Gcc.\n \n    begin\n       if Opt.Verbose_Mode then\n@@ -159,8 +160,8 @@ package body MLib.Tgt is\n             if Arg'Length > 2\n               and then Arg (Arg'First .. Arg'First + 1) = \"-l\"\n             then\n-               Options_2_Last := Options_2_Last + 1;\n-               Options_2 (Options_2_Last) := Arg;\n+               Real_Options_2_Last := Real_Options_2_Last + 1;\n+               Real_Options_2 (Real_Options_2_Last) := Arg;\n                N_Options (Index .. Options_Last - 1) :=\n                  N_Options (Index + 1 .. Options_Last);\n                Options_Last := Options_Last - 1;\n@@ -171,14 +172,21 @@ package body MLib.Tgt is\n          end loop;\n       end;\n \n+      --  Add to Real_Options_2 the argument Options_2\n+\n+      Real_Options_2\n+        (Real_Options_2_Last + 1 .. Real_Options_2_Last + Options_2'Length) :=\n+        Options_2;\n+      Real_Options_2_Last := Real_Options_2_Last + Options_2'Length;\n+\n       if Lib_Version = \"\" then\n          MLib.Utl.Gcc\n            (Output_File => Lib_File,\n             Objects     => Ofiles,\n             Options     => N_Options (N_Options'First .. Options_Last) &\n                            Init_Fini.all,\n             Driver_Name => Driver_Name,\n-            Options_2   => Options_2 (Options_2'First .. Options_2_Last));\n+            Options_2   => Real_Options_2 (1 .. Real_Options_2_Last));\n \n       else\n          Version_Arg := new String'(\"-Wl,-soname,\" & Lib_Version);\n@@ -190,7 +198,7 @@ package body MLib.Tgt is\n                Options     => N_Options (N_Options'First .. Options_Last) &\n                               Version_Arg & Init_Fini.all,\n                Driver_Name => Driver_Name,\n-               Options_2   => Options_2 (Options_2'First .. Options_2_Last));\n+               Options_2   => Real_Options_2 (1 .. Real_Options_2_Last));\n             Symbolic_Link_Needed := Lib_Version /= Lib_File;\n \n          else\n@@ -200,7 +208,7 @@ package body MLib.Tgt is\n                Options     => N_Options (N_Options'First .. Options_Last) &\n                               Version_Arg & Init_Fini.all,\n                Driver_Name => Driver_Name,\n-               Options_2   => Options_2 (Options_2'First .. Options_2_Last));\n+               Options_2   => Real_Options_2 (1 .. Real_Options_2_Last));\n             Symbolic_Link_Needed :=\n               Lib_Dir & Directory_Separator & Lib_Version /= Lib_File;\n          end if;"}, {"sha": "a3b82a4cda6af31adc07103b91c3a52cae002308", "filename": "gcc/ada/mlib-tgt-linux.adb", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-linux.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-linux.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-linux.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -103,6 +103,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -144,7 +145,8 @@ package body MLib.Tgt is\n            (Output_File => Lib_File,\n             Objects     => Ofiles,\n             Options     => Options & Init_Fini.all,\n-            Driver_Name => Driver_Name);\n+            Driver_Name => Driver_Name,\n+            Options_2   => Options_2);\n \n       else\n          Version_Arg := new String'(\"-Wl,-soname,\" & Lib_Version);\n@@ -154,15 +156,17 @@ package body MLib.Tgt is\n               (Output_File => Lib_Version,\n                Objects     => Ofiles,\n                Options     => Options & Version_Arg & Init_Fini.all,\n-               Driver_Name => Driver_Name);\n+               Driver_Name => Driver_Name,\n+               Options_2   => Options_2);\n             Symbolic_Link_Needed := Lib_Version /= Lib_File;\n \n          else\n             Utl.Gcc\n               (Output_File => Lib_Dir & Directory_Separator & Lib_Version,\n                Objects     => Ofiles,\n                Options     => Options & Version_Arg & Init_Fini.all,\n-               Driver_Name => Driver_Name);\n+               Driver_Name => Driver_Name,\n+               Options_2   => Options_2);\n             Symbolic_Link_Needed :=\n               Lib_Dir & Directory_Separator & Lib_Version /= Lib_File;\n          end if;"}, {"sha": "0dddb89a6bdfaf176bd45ffb9598cedc6e8cc3e9", "filename": "gcc/ada/mlib-tgt-mingw.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-mingw.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -91,6 +91,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -122,7 +123,7 @@ package body MLib.Tgt is\n         (Output_File => Lib_File,\n          Objects     => Ofiles,\n          Options     => Tools.No_Argument_List,\n-         Options_2   => Options,\n+         Options_2   => Options & Options_2,\n          Driver_Name => Driver_Name);\n    end Build_Dynamic_Library;\n "}, {"sha": "4052debc4fc99191361a6f9933f94d6ef33136de", "filename": "gcc/ada/mlib-tgt-solaris.adb", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-solaris.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-solaris.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-solaris.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -97,6 +97,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -140,6 +141,7 @@ package body MLib.Tgt is\n            (Output_File => Lib_File,\n             Objects     => Ofiles,\n             Options     => Options & Init_Fini.all,\n+            Options_2   => Options_2,\n             Driver_Name => Driver_Name);\n \n       else\n@@ -150,6 +152,7 @@ package body MLib.Tgt is\n               (Output_File => Lib_Version,\n                Objects     => Ofiles,\n                Options     => Options & Version_Arg & Init_Fini.all,\n+               Options_2   => Options_2,\n                Driver_Name => Driver_Name);\n             Symbolic_Link_Needed := Lib_Version /= Lib_File;\n \n@@ -158,6 +161,7 @@ package body MLib.Tgt is\n               (Output_File => Lib_Dir & Directory_Separator & Lib_Version,\n                Objects     => Ofiles,\n                Options     => Options & Version_Arg & Init_Fini.all,\n+               Options_2   => Options_2,\n                Driver_Name => Driver_Name);\n             Symbolic_Link_Needed :=\n               Lib_Dir & Directory_Separator & Lib_Version /= Lib_File;"}, {"sha": "89be1edac386a81b85369ad5cd1cc2fb3169eed7", "filename": "gcc/ada/mlib-tgt-tru64.adb", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-tru64.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-tru64.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-tru64.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -105,6 +105,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -149,6 +150,7 @@ package body MLib.Tgt is\n               Options &\n               Expect_Unresolved'Access &\n               Init_Fini.all,\n+            Options_2   => Options_2,\n             Driver_Name => Driver_Name);\n \n       else\n@@ -163,6 +165,7 @@ package body MLib.Tgt is\n                  Version_Arg &\n                  Expect_Unresolved'Access &\n                  Init_Fini.all,\n+               Options_2   => Options_2,\n                Driver_Name => Driver_Name);\n             Symbolic_Link_Needed := Lib_Version /= Lib_File;\n \n@@ -175,6 +178,7 @@ package body MLib.Tgt is\n                  Version_Arg &\n                  Expect_Unresolved'Access &\n                  Init_Fini.all,\n+               Options_2   => Options_2,\n                Driver_Name => Driver_Name);\n             Symbolic_Link_Needed :=\n               Lib_Dir & Directory_Separator & Lib_Version /= Lib_File;"}, {"sha": "07f06cf59e01337ecb7bf6483c53f2cac36ce8f1", "filename": "gcc/ada/mlib-tgt-vms-alpha.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-vms-alpha.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-vms-alpha.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-vms-alpha.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -127,6 +127,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -499,7 +500,7 @@ package body MLib.Tgt is\n          Options     => VMS_Options,\n          Options_2   => Link_With_Shared_Libgcc.all &\n                         Opts (Opts'First .. Last_Opt) &\n-                        Opts2 (Opts2'First .. Last_Opt2),\n+                        Opts2 (Opts2'First .. Last_Opt2) & Options_2,\n          Driver_Name => Driver_Name);\n \n       --  The auto-init object file need to be deleted, so that it will not"}, {"sha": "c4bd070393203a0a664ca315c96efdd4573b8e29", "filename": "gcc/ada/mlib-tgt-vms-ia64.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-vms-ia64.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-vms-ia64.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-vms-ia64.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -127,6 +127,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -532,7 +533,7 @@ package body MLib.Tgt is\n          Options     => VMS_Options,\n          Options_2   => Link_With_Shared_Libgcc.all &\n                         Opts (Opts'First .. Last_Opt) &\n-                        Opts2 (Opts2'First .. Last_Opt2),\n+                        Opts2 (Opts2'First .. Last_Opt2) & Options_2,\n          Driver_Name => Driver_Name);\n \n       --  The auto-init object file need to be deleted, so that it will not"}, {"sha": "a304b51a4abc9e723c488df199d32a506a839c35", "filename": "gcc/ada/mlib-tgt-vxworks.adb", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-vxworks.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt-vxworks.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-vxworks.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -90,6 +90,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -102,6 +103,7 @@ package body MLib.Tgt is\n       pragma Unreferenced (Foreign);\n       pragma Unreferenced (Afiles);\n       pragma Unreferenced (Options);\n+      pragma Unreferenced (Options_2);\n       pragma Unreferenced (Interfaces);\n       pragma Unreferenced (Lib_Filename);\n       pragma Unreferenced (Lib_Dir);"}, {"sha": "a31adbd95bb52b8cb507b54dba35c75d96a1499e", "filename": "gcc/ada/mlib-tgt.adb", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-tgt.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -76,6 +76,7 @@ package body MLib.Tgt is\n       Foreign      : Argument_List;\n       Afiles       : Argument_List;\n       Options      : Argument_List;\n+      Options_2    : Argument_List;\n       Interfaces   : Argument_List;\n       Lib_Filename : String;\n       Lib_Dir      : String;\n@@ -88,6 +89,7 @@ package body MLib.Tgt is\n       pragma Unreferenced (Foreign);\n       pragma Unreferenced (Afiles);\n       pragma Unreferenced (Options);\n+      pragma Unreferenced (Options_2);\n       pragma Unreferenced (Interfaces);\n       pragma Unreferenced (Lib_Filename);\n       pragma Unreferenced (Lib_Dir);"}, {"sha": "f61386af3cc4d7f3e7239e719023d4eafed7fd60", "filename": "gcc/ada/mlib-utl.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-utl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-utl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-utl.adb?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -156,8 +156,8 @@ package body MLib.Utl is\n      (Output_File : String;\n       Objects     : Argument_List;\n       Options     : Argument_List;\n-      Driver_Name : Name_Id       := No_Name;\n-      Options_2   : Argument_List := No_Argument_List)\n+      Options_2   : Argument_List;\n+      Driver_Name : Name_Id := No_Name)\n    is\n       Arguments :\n         OS_Lib.Argument_List"}, {"sha": "87612db4fad65fa37269a52cfef785dcefe463fc", "filename": "gcc/ada/mlib-utl.ads", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-utl.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51004cb5839a2825ae15b563e7054ac66deda24a/gcc%2Fada%2Fmlib-utl.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-utl.ads?ref=51004cb5839a2825ae15b563e7054ac66deda24a", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---            Copyright (C) 2001-2003, Ada Core Technologies, Inc           --\n+--            Copyright (C) 2001-2004, Ada Core Technologies, Inc           --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -40,8 +40,8 @@ package MLib.Utl is\n      (Output_File : String;\n       Objects     : Argument_List;\n       Options     : Argument_List;\n-      Driver_Name : Name_Id       := No_Name;\n-      Options_2   : Argument_List := No_Argument_List);\n+      Options_2   : Argument_List;\n+      Driver_Name : Name_Id := No_Name);\n    --  Driver_Name indicates the \"driver\" to invoke; by default, the \"driver\"\n    --  is gcc.\n    --  This procedure invokes the driver to create a shared library."}]}