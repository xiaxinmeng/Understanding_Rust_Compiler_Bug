{"sha": "d984c8ef7d4c467e80159dc010358c703dfa7fce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk4NGM4ZWY3ZDRjNDY3ZTgwMTU5ZGMwMTAzNThjNzAzZGZhN2ZjZQ==", "commit": {"author": {"name": "Xinliang David Li", "email": "davidxl@google.com", "date": "2011-04-29T17:13:23Z"}, "committer": {"name": "Xinliang David Li", "email": "davidxl@gcc.gnu.org", "date": "2011-04-29T17:13:23Z"}, "message": "use tls for ic vars\n\nFrom-SVN: r173177", "tree": {"sha": "59d3c54a746b457f6cb108cccbb5acecb2d38909", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59d3c54a746b457f6cb108cccbb5acecb2d38909"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d984c8ef7d4c467e80159dc010358c703dfa7fce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d984c8ef7d4c467e80159dc010358c703dfa7fce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d984c8ef7d4c467e80159dc010358c703dfa7fce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d984c8ef7d4c467e80159dc010358c703dfa7fce/comments", "author": {"login": "vns-mn", "id": 57157229, "node_id": "MDQ6VXNlcjU3MTU3MjI5", "avatar_url": "https://avatars.githubusercontent.com/u/57157229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vns-mn", "html_url": "https://github.com/vns-mn", "followers_url": "https://api.github.com/users/vns-mn/followers", "following_url": "https://api.github.com/users/vns-mn/following{/other_user}", "gists_url": "https://api.github.com/users/vns-mn/gists{/gist_id}", "starred_url": "https://api.github.com/users/vns-mn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vns-mn/subscriptions", "organizations_url": "https://api.github.com/users/vns-mn/orgs", "repos_url": "https://api.github.com/users/vns-mn/repos", "events_url": "https://api.github.com/users/vns-mn/events{/privacy}", "received_events_url": "https://api.github.com/users/vns-mn/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "12578be73d300173f75624b75d1336d17d97c116", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12578be73d300173f75624b75d1336d17d97c116", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12578be73d300173f75624b75d1336d17d97c116"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "ced5c1f13f6e317bc645d2b414311a380fa7e9e2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d984c8ef7d4c467e80159dc010358c703dfa7fce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d984c8ef7d4c467e80159dc010358c703dfa7fce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d984c8ef7d4c467e80159dc010358c703dfa7fce", "patch": "@@ -1,3 +1,10 @@\n+2011-04-27  Xinliang David Li  <davidxl@google.com>\n+\n+\t* tree-profile.c (init_ic_make_global_vars): Set\n+\ttls attribute on ic vars.\n+\t* coverage.c (coverage_end_function): Initialize\n+\tfunction_list with zero.\n+\n 2011-04-29  Richard Guenther  <rguenther@suse.de>\n \n \t* builtins.c (fold_builtin_classify_type): Use integer_type_node"}, {"sha": "cf045d54dd41b9248bfecff52cfe062d1c3e85db", "filename": "gcc/coverage.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d984c8ef7d4c467e80159dc010358c703dfa7fce/gcc%2Fcoverage.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d984c8ef7d4c467e80159dc010358c703dfa7fce/gcc%2Fcoverage.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoverage.c?ref=d984c8ef7d4c467e80159dc010358c703dfa7fce", "patch": "@@ -647,7 +647,7 @@ coverage_end_function (unsigned lineno_checksum, unsigned cfg_checksum)\n     {\n       struct function_list *item;\n \n-      item = XNEW (struct function_list);\n+      item = XCNEW (struct function_list);\n \n       *functions_tail = item;\n       functions_tail = &item->next;"}, {"sha": "69d77f07892ea58811557b89107da60ccd25d816", "filename": "gcc/tree-profile.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d984c8ef7d4c467e80159dc010358c703dfa7fce/gcc%2Ftree-profile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d984c8ef7d4c467e80159dc010358c703dfa7fce/gcc%2Ftree-profile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-profile.c?ref=d984c8ef7d4c467e80159dc010358c703dfa7fce", "patch": "@@ -44,6 +44,8 @@ along with GCC; see the file COPYING3.  If not see\n #include \"value-prof.h\"\n #include \"cgraph.h\"\n #include \"profile.h\"\n+#include \"target.h\"\n+#include \"output.h\"\n \n static GTY(()) tree gcov_type_node;\n static GTY(()) tree gcov_type_tmp_var;\n@@ -80,6 +82,10 @@ init_ic_make_global_vars (void)\n   TREE_PUBLIC (ic_void_ptr_var) = 0;\n   DECL_ARTIFICIAL (ic_void_ptr_var) = 1;\n   DECL_INITIAL (ic_void_ptr_var) = NULL;\n+  if (targetm.have_tls)\n+    DECL_TLS_MODEL (ic_void_ptr_var) =\n+      decl_default_tls_model (ic_void_ptr_var);\n+\n   varpool_finalize_decl (ic_void_ptr_var);\n   varpool_mark_needed_node (varpool_node (ic_void_ptr_var));\n \n@@ -92,6 +98,10 @@ init_ic_make_global_vars (void)\n   TREE_PUBLIC (ic_gcov_type_ptr_var) = 0;\n   DECL_ARTIFICIAL (ic_gcov_type_ptr_var) = 1;\n   DECL_INITIAL (ic_gcov_type_ptr_var) = NULL;\n+  if (targetm.have_tls)\n+    DECL_TLS_MODEL (ic_gcov_type_ptr_var) =\n+      decl_default_tls_model (ic_gcov_type_ptr_var);\n+\n   varpool_finalize_decl (ic_gcov_type_ptr_var);\n   varpool_mark_needed_node (varpool_node (ic_gcov_type_ptr_var));\n }"}]}