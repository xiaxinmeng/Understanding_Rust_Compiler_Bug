{"sha": "2d0933a2523e8f6ce0fc5115b550b778a549fbcc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQwOTMzYTI1MjNlOGY2Y2UwZmM1MTE1YjU1MGI3NzhhNTQ5ZmJjYw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-06T10:35:56Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-06T10:35:56Z"}, "message": "(output_function_prologue): pea/move: Fix typos.\n\nasm_fprintf(\"add%.[wl] ...): Undo previous change.\n\nFrom-SVN: r6970", "tree": {"sha": "ff795955c4bde57611e7a97b41670695751f5111", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff795955c4bde57611e7a97b41670695751f5111"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d0933a2523e8f6ce0fc5115b550b778a549fbcc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d0933a2523e8f6ce0fc5115b550b778a549fbcc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d0933a2523e8f6ce0fc5115b550b778a549fbcc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d0933a2523e8f6ce0fc5115b550b778a549fbcc/comments", "author": null, "committer": null, "parents": [{"sha": "a78a8d589e87c8c008b068393ea9610ab88ed5e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a78a8d589e87c8c008b068393ea9610ab88ed5e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a78a8d589e87c8c008b068393ea9610ab88ed5e5"}], "stats": {"total": 32, "additions": 26, "deletions": 6}, "files": [{"sha": "8d73d2b60558325c63257c9c0ef18cc52c0481a3", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 26, "deletions": 6, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d0933a2523e8f6ce0fc5115b550b778a549fbcc/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d0933a2523e8f6ce0fc5115b550b778a549fbcc/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=2d0933a2523e8f6ce0fc5115b550b778a549fbcc", "patch": "@@ -93,15 +93,15 @@ output_function_prologue (stream, size)\n \n   if (frame_pointer_needed)\n     {\n-      if (fsize == 0 && TARGET_68040_ONLY)\n+      if (fsize == 0 && TARGET_68040)\n \t{\n \t/* on the 68040, pea + move is faster than link.w 0 */\n #ifdef MOTOROLA\n \t  asm_fprintf (stream, \"\\tpea (%s)\\n\\tmove.l %s,%s\\n\",\n \t       reg_names[FRAME_POINTER_REGNUM], reg_names[STACK_POINTER_REGNUM],\n \t       reg_names[FRAME_POINTER_REGNUM]);\n #else\n-\t  asm_fprintf (stream, \"\\tpea %s\\@\\n\\tmovel %s,%s\\n\",\n+\t  asm_fprintf (stream, \"\\tpea %s@\\n\\tmovel %s,%s\\n\",\n \t       reg_names[FRAME_POINTER_REGNUM], reg_names[STACK_POINTER_REGNUM],\n \t       reg_names[FRAME_POINTER_REGNUM]);\n #endif\n@@ -143,11 +143,21 @@ output_function_prologue (stream, size)\n       /* Adding negative number is faster on the 68040.  */\n       if (fsize + 4 < 0x8000)\n \t{\n-\t  asm_fprintf (stream, \"\\tadd%.w %0I%d,%Rsp\\n\", - (fsize + 4));\n+\t/* asm_fprintf() cannot handle %. */\n+#ifdef MOTOROLA\n+\t  asm_fprintf (stream, \"\\tadd.w %0I%d,%Rsp\\n\", - (fsize + 4));\n+#else\n+\t  asm_fprintf (stream, \"\\taddw %0I%d,%Rsp\\n\", - (fsize + 4));\n+#endif\n \t}\n       else\n \t{\n-\t  asm_fprintf (stream, \"\\tadd%.l %0I%d,%Rsp\\n\", - (fsize + 4));\n+\t/* asm_fprintf() cannot handle %. */\n+#ifdef MOTOROLA\n+\t  asm_fprintf (stream, \"\\tadd.l %0I%d,%Rsp\\n\", - (fsize + 4));\n+#else\n+\t  asm_fprintf (stream, \"\\taddl %0I%d,%Rsp\\n\", - (fsize + 4));\n+#endif\n \t}\n     }\n #ifdef SUPPORT_SUN_FPA\n@@ -501,11 +511,21 @@ output_function_epilogue (stream, size)\n     {\n       if (fsize + 4 < 0x8000)\n \t{\n-\t  asm_fprintf (stream, \"\\tadd%.w %0I%d,%Rsp\\n\", fsize + 4);\n+\t/* asm_fprintf() cannot handle %. */\n+#ifdef MOTOROLA\n+\t  asm_fprintf (stream, \"\\tadd.w %0I%d,%Rsp\\n\", fsize + 4);\n+#else\n+\t  asm_fprintf (stream, \"\\taddw %0I%d,%Rsp\\n\", fsize + 4);\n+#endif\n \t}\n       else\n \t{\n-\t  asm_fprintf (stream, \"\\tadd%.l %0I%d,%Rsp\\n\", fsize + 4);\n+\t/* asm_fprintf() cannot handle %. */\n+#ifdef MOTOROLA\n+\t  asm_fprintf (stream, \"\\tadd.l %0I%d,%Rsp\\n\", fsize + 4);\n+#else\n+\t  asm_fprintf (stream, \"\\taddl %0I%d,%Rsp\\n\", fsize + 4);\n+#endif\n \t}\n     }\n   if (current_function_pops_args)"}]}