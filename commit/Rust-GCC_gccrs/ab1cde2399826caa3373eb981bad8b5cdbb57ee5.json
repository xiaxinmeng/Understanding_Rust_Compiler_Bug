{"sha": "ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWIxY2RlMjM5OTgyNmNhYTMzNzNlYjk4MWJhZDhiNWNkYmI1N2VlNQ==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2008-05-06T02:59:12Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2008-05-06T02:59:12Z"}, "message": "target_supports.exp (check_effective_target_4byte_wchar_t): New proc.\n\n\t* lib/target_supports.exp (check_effective_target_4byte_wchar_t):\n\tNew proc.\n\t* gcc.dg/utf16-4.c: Use it.\n\t* gcc.dg/utf32-4.c: Use it.\n\t* g++.dg/ext/utf16-4.C: Use it.\n\t* gcc.dg/ext/utf32-4.C: Use it.\n\nFrom-SVN: r134971", "tree": {"sha": "672c6b5d84da75b05931884b93791362772bdc97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/672c6b5d84da75b05931884b93791362772bdc97"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/comments", "author": null, "committer": null, "parents": [{"sha": "0d07fcad0836b13aaa6141258c533bcc3a4e521e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d07fcad0836b13aaa6141258c533bcc3a4e521e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d07fcad0836b13aaa6141258c533bcc3a4e521e"}], "stats": {"total": 28, "additions": 23, "deletions": 5}, "files": [{"sha": "9adb755b6006b8244793409b2f360c4069030e2d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "patch": "@@ -1,3 +1,12 @@\n+2008-05-06  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\t* lib/target_supports.exp (check_effective_target_4byte_wchar_t):\n+\tNew proc.\n+\t* gcc.dg/utf16-4.c: Use it.\n+\t* gcc.dg/utf32-4.c: Use it.\n+\t* g++.dg/ext/utf16-4.C: Use it.\n+\t* gcc.dg/ext/utf32-4.C: Use it.\n+\n 2008-05-05  Danny Smith  <dannysmith@users.sourceforge.net>\n \n \t* gfortran.dg/dev_null.f90. Remove and replace with..."}, {"sha": "21cdb53bdeb8f68e4fdbc8cf25b3297d59104852", "filename": "gcc/testsuite/g++.dg/ext/utf16-4.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Futf16-4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Futf16-4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Futf16-4.C?ref=ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "patch": "@@ -13,6 +13,6 @@ const static char16_t\tc5 = U'\\u2029';\n const static char16_t\tc6 = U'\\U00064321';\t/* { dg-warning \"implicitly truncated\" } */\n const static char16_t\tc7 = L'a';\n const static char16_t\tc8 = L'\\u2029';\n-const static char16_t\tc9 = L'\\U00064321';\t/* { dg-warning \"implicitly truncated\" } */\n-\n+const static char16_t\tc9 = L'\\U00064321';\t/* { dg-warning \"implicitly truncated\" \"\" { target { 4byte_wchar_t } } 16 } */\n+\t\t\t\t\t\t/* { dg-warning \"constant too long\" \"\" { target { ! 4byte_wchar_t } } 16 } */\n int main () {}"}, {"sha": "5da2e822702b219405abaa4f0a7b57072fe21268", "filename": "gcc/testsuite/g++.dg/ext/utf32-4.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Futf32-4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Futf32-4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Futf32-4.C?ref=ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "patch": "@@ -13,6 +13,6 @@ const static char32_t\tc5 = u'\\u2029';\n const static char32_t\tc6 = u'\\U00064321';\t/* { dg-warning \"constant too long\" } */\n const static char32_t\tc7 = L'a';\n const static char32_t\tc8 = L'\\u2029';\n-const static char32_t\tc9 = L'\\U00064321';\n+const static char32_t\tc9 = L'\\U00064321';     /* { dg-warning \"constant too long\" { target { ! 4byte_wchar_t } } } */  \n \n int main () {}"}, {"sha": "86597b370e1ccacaa5a931456ecc6c706527dc6f", "filename": "gcc/testsuite/gcc.dg/utf16-4.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fgcc.dg%2Futf16-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fgcc.dg%2Futf16-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Futf16-4.c?ref=ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "patch": "@@ -15,6 +15,7 @@ char16_t\tc5 = U'\\u2029';\n char16_t\tc6 = U'\\U00064321';\t/* { dg-warning \"implicitly truncated\" } */\n char16_t\tc7 = L'a';\n char16_t\tc8 = L'\\u2029';\n-char16_t\tc9 = L'\\U00064321';\t/* { dg-warning \"implicitly truncated\" } */\n+char16_t \tc9 = L'\\U00064321';\t/* { dg-warning \"implicitly truncated\" \"\" { target { 4byte_wchar_t } } 18 } */\n+\t\t\t\t\t/* { dg-warning \"constant too long\" \"\" { target { ! 4byte_wchar_t } } 18 } */\n \n int main () {}"}, {"sha": "48d84fd421905788667e07ea9366b6697830b9d9", "filename": "gcc/testsuite/gcc.dg/utf32-4.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fgcc.dg%2Futf32-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Fgcc.dg%2Futf32-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Futf32-4.c?ref=ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "patch": "@@ -15,6 +15,6 @@ char32_t\tc5 = u'\\u2029';\n char32_t\tc6 = u'\\U00064321';\t/* { dg-warning \"constant too long\" } */\n char32_t\tc7 = L'a';\n char32_t\tc8 = L'\\u2029';\n-char32_t\tc9 = L'\\U00064321';\n+char32_t\tc9 = L'\\U00064321';     /* { dg-warning \"constant too long\" { target { ! 4byte_wchar_t } } } */  \n \n int main () {}"}, {"sha": "e071934a947b348ee779dd2d940a138b49b3fba7", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1cde2399826caa3373eb981bad8b5cdbb57ee5/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=ab1cde2399826caa3373eb981bad8b5cdbb57ee5", "patch": "@@ -2352,3 +2352,11 @@ proc check_effective_target_c99_runtime { } {\n \t    $contents [add_options_for_c99_runtime \"\"]\n     }]\n }\n+\n+# Return 1 if  target wchar_t is at least 4 bytes.\n+\n+proc check_effective_target_4byte_wchar_t { } {\n+    return [check_no_compiler_messages 4byte_wchar_t object {\n+\tint dummy[sizeof (wchar_t) >= 4 ? 1 : -1];\n+    }]\n+}"}]}