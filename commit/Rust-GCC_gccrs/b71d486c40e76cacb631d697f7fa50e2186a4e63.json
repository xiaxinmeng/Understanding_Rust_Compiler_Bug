{"sha": "b71d486c40e76cacb631d697f7fa50e2186a4e63", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjcxZDQ4NmM0MGU3NmNhY2I2MzFkNjk3ZjdmYTUwZTIxODZhNGU2Mw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2003-10-13T22:08:51Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-10-13T22:08:51Z"}, "message": "natClassLoader.cc (_Jv_InitNewClassFields): Removed.\n\n\t* java/lang/natClassLoader.cc (_Jv_InitNewClassFields): Removed.\n\t(defineClass): Updated.\n\t(_Jv_NewClass): Likewise.\n\t* prims.cc (_Jv_InitPrimClass): Don't call\n\t_Jv_InitNewClassFields.\n\nFrom-SVN: r72444", "tree": {"sha": "dcbaefce19d8a24b0a5a3728e7e50f5d87e8c3ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dcbaefce19d8a24b0a5a3728e7e50f5d87e8c3ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b71d486c40e76cacb631d697f7fa50e2186a4e63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b71d486c40e76cacb631d697f7fa50e2186a4e63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b71d486c40e76cacb631d697f7fa50e2186a4e63", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b71d486c40e76cacb631d697f7fa50e2186a4e63/comments", "author": null, "committer": null, "parents": [{"sha": "c1783330fd225245b2bb2d2ce066a242178bcf55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1783330fd225245b2bb2d2ce066a242178bcf55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1783330fd225245b2bb2d2ce066a242178bcf55"}], "stats": {"total": 47, "additions": 8, "deletions": 39}, "files": [{"sha": "67280d95943782efb0cd8afef53436a97a60bb81", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71d486c40e76cacb631d697f7fa50e2186a4e63/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71d486c40e76cacb631d697f7fa50e2186a4e63/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=b71d486c40e76cacb631d697f7fa50e2186a4e63", "patch": "@@ -1,3 +1,11 @@\n+2003-10-13  Tom Tromey  <tromey@redhat.com>\n+\n+\t* java/lang/natClassLoader.cc (_Jv_InitNewClassFields): Removed.\n+\t(defineClass): Updated.\n+\t(_Jv_NewClass): Likewise.\n+\t* prims.cc (_Jv_InitPrimClass): Don't call\n+\t_Jv_InitNewClassFields.\n+\n 2003-10-13  Taras Judge  <taras.judge@shaw.ca>\n \n \tPR libgcj/12592"}, {"sha": "5e7c943c620ac4d963a5157a57c942b8cc9dace8", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 0, "deletions": 37, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71d486c40e76cacb631d697f7fa50e2186a4e63/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71d486c40e76cacb631d697f7fa50e2186a4e63/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=b71d486c40e76cacb631d697f7fa50e2186a4e63", "patch": "@@ -55,7 +55,6 @@ java::lang::VMClassLoader::defineClass (java::lang::ClassLoader *loader,\n   jclass klass;\n   klass = (jclass) JvAllocObject (&java::lang::Class::class$,\n \t\t\t\t  sizeof (_Jv_InterpClass));\n-  _Jv_InitNewClassFields (klass);\n \n   // Synchronize on the class, so that it is not attempted initialized\n   // until we're done loading.\n@@ -521,47 +520,11 @@ _Jv_FindClass (_Jv_Utf8Const *name, java::lang::ClassLoader *loader)\n   return klass;\n }\n \n-void\n-_Jv_InitNewClassFields (jclass ret)\n-{\n-  ret->next = NULL;\n-  ret->name = NULL;\n-  ret->accflags = 0;\n-  ret->superclass = NULL;\n-  ret->constants.size = 0;\n-  ret->constants.tags = NULL;\n-  ret->constants.data = NULL;\n-  ret->methods = NULL;\n-  ret->method_count = 0;\n-  ret->vtable_method_count = 0;\n-  ret->fields = NULL;\n-  ret->size_in_bytes = 0;\n-  ret->field_count = 0;\n-  ret->static_field_count = 0;\n-  ret->vtable = NULL;\n-  ret->otable_syms = NULL;\n-  ret->atable = NULL;\n-  ret->atable_syms = NULL;\n-  ret->interfaces = NULL;\n-  ret->loader = NULL;\n-  ret->interface_count = 0;\n-  ret->state = JV_STATE_NOTHING;\n-  ret->thread = NULL;\n-  ret->depth = 0;\n-  ret->ancestors = NULL;\n-  ret->idt = NULL;\n-  ret->arrayclass = NULL;\n-  ret->protectionDomain = NULL;\n-  ret->signers = NULL;\n-  ret->chain = NULL;\n-}\n-\n jclass\n _Jv_NewClass (_Jv_Utf8Const *name, jclass superclass,\n \t      java::lang::ClassLoader *loader)\n {\n   jclass ret = (jclass) JvAllocObject (&java::lang::Class::class$);\n-  _Jv_InitNewClassFields (ret);\n   ret->name = name;\n   ret->superclass = superclass;\n   ret->loader = loader;"}, {"sha": "71cd8c3ece0f9d2cc233a408c52d0535fb1e61d5", "filename": "libjava/prims.cc", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71d486c40e76cacb631d697f7fa50e2186a4e63/libjava%2Fprims.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71d486c40e76cacb631d697f7fa50e2186a4e63/libjava%2Fprims.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fprims.cc?ref=b71d486c40e76cacb631d697f7fa50e2186a4e63", "patch": "@@ -633,8 +633,6 @@ _Jv_InitPrimClass (jclass cl, char *cname, char sig, int len,\n {    \n   using namespace java::lang::reflect;\n \n-  _Jv_InitNewClassFields (cl);\n-\n   // We must set the vtable for the class; the Java constructor\n   // doesn't do this.\n   (*(_Jv_VTable **) cl) = java::lang::Class::class$.vtable;"}]}