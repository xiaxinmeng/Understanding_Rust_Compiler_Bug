{"sha": "ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2UxYmI2NWI0ZDJiMmQ0YWEyYTRhYmViYmZhM2I0ZGQ1MDM5NTYwMA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2003-07-08T15:10:16Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2003-07-08T15:10:16Z"}, "message": "system.h: Poison MAP_CHARACTER.\n\n\t* system.h: Poison MAP_CHARACTER.\n\t* config/i370/i370-protos.h (mvs_map_char): Delete.\n\t* config/i370/i370.c (ascebc, ebcasc, mvs_map_char): Delete.\n\t* config/i370/i370.h (MAP_CHARACTER): Delete definition.\n\t(ASM_OUTPUT_ASCII): Don't use MAP_CHARACTER.\nf:\n\t* lex.c: Remove error block #ifdef MAP_CHARACTER.\n\nFrom-SVN: r69086", "tree": {"sha": "77106000e798179437149be54b129143ca695b28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77106000e798179437149be54b129143ca695b28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/comments", "author": null, "committer": null, "parents": [{"sha": "6c637082635685f695414e3af7d5f8c1f8fb6a07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c637082635685f695414e3af7d5f8c1f8fb6a07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c637082635685f695414e3af7d5f8c1f8fb6a07"}], "stats": {"total": 179, "additions": 13, "deletions": 166}, "files": [{"sha": "b78e6860c72ddd7681614a50c251ad8f482ad8de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "patch": "@@ -1,3 +1,11 @@\n+2003-07-08  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* system.h: Poison MAP_CHARACTER.\n+\t* config/i370/i370-protos.h (mvs_map_char): Delete.\n+\t* config/i370/i370.c (ascebc, ebcasc, mvs_map_char): Delete.\n+\t* config/i370/i370.h (MAP_CHARACTER): Delete definition.\n+\t(ASM_OUTPUT_ASCII): Don't use MAP_CHARACTER.\n+\n 2003-07-08  Danny Smith  <dannysmith@users.sourceforge.net>\n \n \t* toplev.c (randomize): Correct call to time()."}, {"sha": "29737aa4f8076e82a6fcf87f72d53a121e070e35", "filename": "gcc/config/i370/i370-protos.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fconfig%2Fi370%2Fi370-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fconfig%2Fi370%2Fi370-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi370%2Fi370-protos.h?ref=ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "patch": "@@ -39,7 +39,6 @@ extern int unsigned_jump_follows_p PARAMS ((rtx));\n extern int handle_pragma PARAMS ((int (*)(void), void (*)(int), const char *));\n #endif /* TREE_CODE */\n \n-extern char mvs_map_char PARAMS ((int));\n extern void mvs_add_label PARAMS ((int));\n extern int mvs_check_label PARAMS ((int));\n extern int mvs_check_page PARAMS ((FILE *, int, int));"}, {"sha": "b5ad7ceb16776067660c5c3f27ba153c3c2076f1", "filename": "gcc/config/i370/i370.c", "status": "modified", "additions": 0, "deletions": 147, "changes": 147, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fconfig%2Fi370%2Fi370.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fconfig%2Fi370%2Fi370.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi370%2Fi370.c?ref=ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "patch": "@@ -176,131 +176,6 @@ static const char *const mvs_function_table[MVS_FUNCTION_TABLE_LENGTH] =\n #endif /* TARGET_HLASM */\n /* ===================================================== */\n \n-#if defined(TARGET_EBCDIC) && HOST_CHARSET == HOST_CHARSET_ASCII\n-/* ASCII to EBCDIC conversion table.  */\n-static const unsigned char ascebc[256] =\n-{\n- /*00  NL    SH    SX    EX    ET    NQ    AK    BL */\n-     0x00, 0x01, 0x02, 0x03, 0x37, 0x2D, 0x2E, 0x2F,\n- /*08  BS    HT    LF    VT    FF    CR    SO    SI */\n-     0x16, 0x05, 0x15, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,\n- /*10  DL    D1    D2    D3    D4    NK    SN    EB */\n-     0x10, 0x11, 0x12, 0x13, 0x3C, 0x3D, 0x32, 0x26,\n- /*18  CN    EM    SB    EC    FS    GS    RS    US */\n-     0x18, 0x19, 0x3F, 0x27, 0x1C, 0x1D, 0x1E, 0x1F,\n- /*20  SP     !     \"     #     $     %     &     ' */\n-     0x40, 0x5A, 0x7F, 0x7B, 0x5B, 0x6C, 0x50, 0x7D,\n- /*28   (     )     *     +     ,     -    .      / */\n-     0x4D, 0x5D, 0x5C, 0x4E, 0x6B, 0x60, 0x4B, 0x61,\n- /*30   0     1     2     3     4     5     6     7 */\n-     0xF0, 0xF1, 0xF2, 0xF3, 0xF4, 0xF5, 0xF6, 0xF7,\n- /*38   8     9     :     ;     <     =     >     ? */\n-     0xF8, 0xF9, 0x7A, 0x5E, 0x4C, 0x7E, 0x6E, 0x6F,\n- /*40   @     A     B     C     D     E     F     G */\n-     0x7C, 0xC1, 0xC2, 0xC3, 0xC4, 0xC5, 0xC6, 0xC7,\n- /*48   H     I     J     K     L     M     N     O */\n-     0xC8, 0xC9, 0xD1, 0xD2, 0xD3, 0xD4, 0xD5, 0xD6,\n- /*50   P     Q     R     S     T     U     V     W */\n-     0xD7, 0xD8, 0xD9, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6,\n- /*58   X     Y     Z     [     \\     ]     ^     _ */\n-     0xE7, 0xE8, 0xE9, 0xAD, 0xE0, 0xBD, 0x5F, 0x6D,\n- /*60   `     a     b     c     d     e     f     g */\n-     0x79, 0x81, 0x82, 0x83, 0x84, 0x85, 0x86, 0x87,\n- /*68   h     i     j     k     l     m     n     o */\n-     0x88, 0x89, 0x91, 0x92, 0x93, 0x94, 0x95, 0x96,\n- /*70   p     q     r     s     t     u     v     w */\n-     0x97, 0x98, 0x99, 0xA2, 0xA3, 0xA4, 0xA5, 0xA6,\n- /*78   x     y     z     {     |     }     ~    DL */\n-     0xA7, 0xA8, 0xA9, 0xC0, 0x4F, 0xD0, 0xA1, 0x07,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,\n-     0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0xFF\n-};\n-#endif /* target EBCDIC, host ASCII */\n-\n-#if !defined(TARGET_EBCDIC) && HOST_CHARSET == HOST_CHARSET_EBCDIC\n-/* EBCDIC to ASCII conversion table.  */\n-static const unsigned char ebcasc[256] =\n-{\n- /*00  NU    SH    SX    EX    PF    HT    LC    DL */\n-     0x00, 0x01, 0x02, 0x03, 0x00, 0x09, 0x00, 0x7F,\n- /*08              SM    VT    FF    CR    SO    SI */\n-     0x00, 0x00, 0x00, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,\n- /*10  DE    D1    D2    TM    RS    NL    BS    IL */\n-     0x10, 0x11, 0x12, 0x13, 0x14, 0x0A, 0x08, 0x00,\n- /*18  CN    EM    CC    C1    FS    GS    RS    US */\n-     0x18, 0x19, 0x00, 0x00, 0x1C, 0x1D, 0x1E, 0x1F,\n- /*20  DS    SS    FS          BP    LF    EB    EC */\n-     0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x17, 0x1B,\n- /*28              SM    C2    EQ    AK    BL       */\n-     0x00, 0x00, 0x00, 0x00, 0x05, 0x06, 0x07, 0x00,\n- /*30              SY          PN    RS    UC    ET */\n-     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04,\n- /*38                    C3    D4    NK          SU */\n-     0x00, 0x00, 0x00, 0x00, 0x14, 0x15, 0x00, 0x1A,\n- /*40  SP                                           */\n-     0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*48                     .     <     (     +     | */\n-     0x00, 0x00, 0x00, 0x2E, 0x3C, 0x28, 0x2B, 0x7C,\n- /*50   &                                           */\n-     0x26, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*58               !     $     *     )     ;     ^ */\n-     0x00, 0x00, 0x21, 0x24, 0x2A, 0x29, 0x3B, 0x5E,\n- /*60   -     /                                     */\n-     0x2D, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*68                     ,     %     _     >     ? */\n-     0x00, 0x00, 0x00, 0x2C, 0x25, 0x5F, 0x3E, 0x3F,\n- /*70                                               */\n-     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*78         `     :     #     @     '     =     \" */\n-     0x00, 0x60, 0x3A, 0x23, 0x40, 0x27, 0x3D, 0x22,\n- /*80         a     b     c     d     e     f     g */\n-     0x00, 0x61, 0x62, 0x63, 0x64, 0x65, 0x66, 0x67,\n- /*88   h     i           {                         */\n-     0x68, 0x69, 0x00, 0x7B, 0x00, 0x00, 0x00, 0x00,\n- /*90         j     k     l     m     n     o     p */\n-     0x00, 0x6A, 0x6B, 0x6C, 0x6D, 0x6E, 0x6F, 0x70,\n- /*98   q     r           }                         */\n-     0x71, 0x72, 0x00, 0x7D, 0x00, 0x00, 0x00, 0x00,\n- /*A0         ~     s     t     u     v     w     x */\n-     0x00, 0x7E, 0x73, 0x74, 0x75, 0x76, 0x77, 0x78,\n- /*A8   y     z                       [             */\n-     0x79, 0x7A, 0x00, 0x00, 0x00, 0x5B, 0x00, 0x00,\n- /*B0                                               */\n-     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*B8                                 ]             */\n-     0x00, 0x00, 0x00, 0x00, 0x00, 0x5D, 0x00, 0x00,\n- /*C0   {     A     B     C     D     E     F     G */\n-     0x7B, 0x41, 0x42, 0x43, 0x44, 0x45, 0x46, 0x47,\n- /*C8   H     I                                     */\n-     0x48, 0x49, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*D0   }     J     K     L     M     N     O     P */\n-     0x7D, 0x4A, 0x4B, 0x4C, 0x4D, 0x4E, 0x4F, 0x50,\n- /*D8   Q     R                                     */\n-     0x51, 0x52, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*E0   \\           S     T     U     V     W     X */\n-     0x5C, 0x00, 0x53, 0x54, 0x55, 0x56, 0x57, 0x58,\n- /*E8   Y     Z                                     */\n-     0x59, 0x5A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n- /*F0   0     1     2     3     4     5     6     7 */\n-     0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37,\n- /*F8   8     9                                     */\n-     0x38, 0x39, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF\n-};\n-#endif /* target ASCII, host EBCDIC */\n \f\n /* Initialize the GCC target structure.  */\n #ifdef TARGET_HLASM\n@@ -342,28 +217,6 @@ override_options ()\n   real_format_for_mode[DFmode - QFmode] = &i370_double_format;\n }\n \n-\n-/* Map characters from one character set to another.\n-   C is the character to be translated.  */\n-\n-char\n-mvs_map_char (c)\n-     int c;\n-{\n-#if defined(TARGET_EBCDIC) && HOST_CHARSET == HOST_CHARSET_ASCII\n-  fprintf (stderr, \"mvs_map_char: TE & !HE: c = %02x\\n\", c);\n-  return ascebc[c];\n-#else\n-#if !defined(TARGET_EBCDIC) && HOST_CHARSET == HOST_CHARSET_EBCDIC\n-  fprintf (stderr, \"mvs_map_char: !TE & HE: c = %02x\\n\", c);\n-  return ebcasc[c];\n-#else\n-  fprintf (stderr, \"mvs_map_char: !TE & !HE: c = %02x\\n\", c);\n-  return c;\n-#endif\n-#endif\n-}\n-\n /* ===================================================== */\n /* The following three routines are used to determine whther \n    forward branch is on this page, or is a far jump.  We use"}, {"sha": "8c0a1961672ff339d932d6baed9fcd4c7497178e", "filename": "gcc/config/i370/i370.h", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fconfig%2Fi370%2Fi370.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fconfig%2Fi370%2Fi370.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi370%2Fi370.h?ref=ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "patch": "@@ -137,17 +137,6 @@ extern size_t mvs_function_name_length;\n \n #define TARGET_FLOAT_FORMAT IBM_FLOAT_FORMAT\n \n-/* Define character mapping for cross-compiling.  */\n-/* but only define it if really needed, since otherwise it will break builds */\n-\n-#ifdef TARGET_EBCDIC\n-#if HOST_CHARSET == HOST_CHARSET_EBCDIC\n-#define MAP_CHARACTER(c) ((char)(c))\n-#else\n-#define MAP_CHARACTER(c) ((char)mvs_map_char (c))\n-#endif\n-#endif\n-\n #ifdef TARGET_HLASM\n /* HLASM requires #pragma map.  */\n #define REGISTER_TARGET_PRAGMAS() c_register_pragma (0, \"map\", i370_pr_map)\n@@ -1131,7 +1120,6 @@ enum reg_class\n \t  if (j % MVS_ASCII_TEXT_LENGTH != 0 )\t\t\t\t\\\n \t    fprintf (FILE, \"'\\n\");\t\t\t\t\t\\\n \t  j = -1;\t\t\t\t\t\t\t\\\n-\t  if (c == '&') c = MAP_CHARACTER (c);\t\t\t\t\\\n \t  fprintf (FILE, \"\\tDC\\tX'%X'\\n\", c );\t\t\t\t\\\n \t}\t\t\t\t\t\t\t\t\\\n       else\t\t\t\t\t\t\t\t\\"}, {"sha": "8a7b7579ff7c126c4a320f855e633e16a7fa6816", "filename": "gcc/f/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Ff%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Ff%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2FChangeLog?ref=ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "patch": "@@ -1,3 +1,7 @@\n+2003-07-08  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* lex.c: Remove error block #ifdef MAP_CHARACTER.\n+\n Mon Jul  7 18:13:22 2003  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* com.c (bison_rule_pushlevel_, bison_rule_compstmt_): Adjust"}, {"sha": "4d0429fe0e8e9cc41d6b005b4cbc71792af7c42f", "filename": "gcc/f/lex.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Ff%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Ff%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Flex.c?ref=ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "patch": "@@ -219,11 +219,6 @@ ffelex_append_to_token_ (char c)\n       ffelex_token_->size <<= 1;\n       assert (ffelex_token_->length < ffelex_token_->size);\n     }\n-#ifdef MAP_CHARACTER\n-Sorry, MAP_CHARACTER is not going to work as expected in GNU Fortran,\n-please contact fortran@gnu.org if you wish to fund work to\n-port g77 to non-ASCII machines.\n-#endif\n   ffelex_token_->text[ffelex_token_->length++] = c;\n }\n "}, {"sha": "3a7e18038a7081a14ee886f6f01a38b6c0fb57d7", "filename": "gcc/system.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=ce1bb65b4d2b2d4aa2a4abebbfa3b4dd50395600", "patch": "@@ -609,7 +609,7 @@ typedef char _Bool;\n \tDBX_LBRAC_FIRST DBX_OUTPUT_ENUM DBX_OUTPUT_SOURCE_FILENAME\t   \\\n \tDBX_WORKING_DIRECTORY INSN_CACHE_DEPTH INSN_CACHE_SIZE\t\t   \\\n \tINSN_CACHE_LINE_WIDTH INIT_SECTION_PREAMBLE NEED_ATEXIT ON_EXIT\t   \\\n-\tEXIT_BODY OBJECT_FORMAT_ROSE MULTIBYTE_CHARS\n+\tEXIT_BODY OBJECT_FORMAT_ROSE MULTIBYTE_CHARS MAP_CHARACTER\n \n /* Hooks that are no longer used.  */\n  #pragma GCC poison LANG_HOOKS_FUNCTION_MARK LANG_HOOKS_FUNCTION_FREE\t\\"}]}