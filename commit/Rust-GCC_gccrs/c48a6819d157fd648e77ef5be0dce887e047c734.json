{"sha": "c48a6819d157fd648e77ef5be0dce887e047c734", "node_id": "C_kwDOANBUbNoAKGM0OGE2ODE5ZDE1N2ZkNjQ4ZTc3ZWY1YmUwZGNlODg3ZTA0N2M3MzQ", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2022-02-09T16:57:02Z"}, "committer": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2022-02-09T16:57:02Z"}, "message": "aarch64: Tighten general_operand predicates\n\nThis patch fixes some case in which *general_operand was used over\n*nonimmediate_operand by patterns that don't accept immediates.\nThis avoids some complication with later patches.\n\ngcc/\n\t* config/aarch64/aarch64-simd.md (aarch64_simd_vec_set<mode>): Use\n\taarch64_simd_nonimmediate_operand instead of\n\taarch64_simd_general_operand.\n\t(@aarch64_combinez<mode>): Use nonimmediate_operand instead of\n\tgeneral_operand.\n\t(@aarch64_combinez_be<mode>): Likewise.", "tree": {"sha": "c79259a544bf5ff0a2ed1dba7599fbc4125dadea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c79259a544bf5ff0a2ed1dba7599fbc4125dadea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c48a6819d157fd648e77ef5be0dce887e047c734", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c48a6819d157fd648e77ef5be0dce887e047c734", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c48a6819d157fd648e77ef5be0dce887e047c734", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c48a6819d157fd648e77ef5be0dce887e047c734/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ee50b4383a0dca88172c3a821418344bd7391956", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee50b4383a0dca88172c3a821418344bd7391956", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee50b4383a0dca88172c3a821418344bd7391956"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "9529bdb49974b7ec03be0bcfeb55599dab4433a6", "filename": "gcc/config/aarch64/aarch64-simd.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c48a6819d157fd648e77ef5be0dce887e047c734/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c48a6819d157fd648e77ef5be0dce887e047c734/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md?ref=c48a6819d157fd648e77ef5be0dce887e047c734", "patch": "@@ -1039,7 +1039,7 @@\n   [(set (match_operand:VALL_F16 0 \"register_operand\" \"=w,w,w\")\n \t(vec_merge:VALL_F16\n \t    (vec_duplicate:VALL_F16\n-\t\t(match_operand:<VEL> 1 \"aarch64_simd_general_operand\" \"w,?r,Utv\"))\n+\t\t(match_operand:<VEL> 1 \"aarch64_simd_nonimmediate_operand\" \"w,?r,Utv\"))\n \t    (match_operand:VALL_F16 3 \"register_operand\" \"0,0,0\")\n \t    (match_operand:SI 2 \"immediate_operand\" \"i,i,i\")))]\n   \"TARGET_SIMD\"\n@@ -4380,7 +4380,7 @@\n (define_insn \"@aarch64_combinez<mode>\"\n   [(set (match_operand:<VDBL> 0 \"register_operand\" \"=w,w,w\")\n \t(vec_concat:<VDBL>\n-\t  (match_operand:VDC 1 \"general_operand\" \"w,?r,m\")\n+\t  (match_operand:VDC 1 \"nonimmediate_operand\" \"w,?r,m\")\n \t  (match_operand:VDC 2 \"aarch64_simd_or_scalar_imm_zero\")))]\n   \"TARGET_SIMD && !BYTES_BIG_ENDIAN\"\n   \"@\n@@ -4395,7 +4395,7 @@\n   [(set (match_operand:<VDBL> 0 \"register_operand\" \"=w,w,w\")\n         (vec_concat:<VDBL>\n \t  (match_operand:VDC 2 \"aarch64_simd_or_scalar_imm_zero\")\n-\t  (match_operand:VDC 1 \"general_operand\" \"w,?r,m\")))]\n+\t  (match_operand:VDC 1 \"nonimmediate_operand\" \"w,?r,m\")))]\n   \"TARGET_SIMD && BYTES_BIG_ENDIAN\"\n   \"@\n    mov\\\\t%0.8b, %1.8b"}]}