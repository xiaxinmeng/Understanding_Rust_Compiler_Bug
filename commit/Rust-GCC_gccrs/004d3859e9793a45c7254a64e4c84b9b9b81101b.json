{"sha": "004d3859e9793a45c7254a64e4c84b9b9b81101b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDA0ZDM4NTllOTc5M2E0NWM3MjU0YTY0ZTRjODRiOWI5YjgxMTAxYg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2005-04-12T01:46:38Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2005-04-12T01:46:38Z"}, "message": "i386.h (TARGET_FPMATH_DEFAULT): New.\n\n\t* config/i386/i386.h (TARGET_FPMATH_DEFAULT): New.\n\t* config/i386/darwin.h (TARGET_FPMATH_DEFAULT): New.\n\t* config/i386/i386.c (override_options): Use TARGET_FPMATH_DEFAULT.\n\n\t* config/i386/darwin.h (ASM_SPEC): Use -arch i386 not -arch i686.\n\t(SUBTARGET_EXTRA_SPECS): Always 'i386'.\n\nFrom-SVN: r98001", "tree": {"sha": "4bd062a1014896dc831ea2af7c73bae2e1723bdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4bd062a1014896dc831ea2af7c73bae2e1723bdf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/004d3859e9793a45c7254a64e4c84b9b9b81101b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/004d3859e9793a45c7254a64e4c84b9b9b81101b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/004d3859e9793a45c7254a64e4c84b9b9b81101b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/004d3859e9793a45c7254a64e4c84b9b9b81101b/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "92b0bb67877046d21c1b208410f38081c82ff862", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92b0bb67877046d21c1b208410f38081c82ff862", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92b0bb67877046d21c1b208410f38081c82ff862"}], "stats": {"total": 30, "additions": 21, "deletions": 9}, "files": [{"sha": "80308c82263993e58402d7e3e34e9acf146adba1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=004d3859e9793a45c7254a64e4c84b9b9b81101b", "patch": "@@ -26,6 +26,13 @@\n \t\n 2005-04-11  Geoffrey Keating  <geoffk@apple.com>\n \n+\t* config/i386/i386.h (TARGET_FPMATH_DEFAULT): New.\n+\t* config/i386/darwin.h (TARGET_FPMATH_DEFAULT): New.\n+\t* config/i386/i386.c (override_options): Use TARGET_FPMATH_DEFAULT.\n+\n+\t* config/i386/darwin.h (ASM_SPEC): Use -arch i386 not -arch i686.\n+\t(SUBTARGET_EXTRA_SPECS): Always 'i386'.\n+\n \t* dwarf2out.c (output_line_info): Don't try to dereference\n \ta NULL current_function_decl.\n "}, {"sha": "b526e22d8b17fe4c21dbf511d9cd30695ac6a4bf", "filename": "gcc/config/i386/darwin.h", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2Fconfig%2Fi386%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2Fconfig%2Fi386%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fdarwin.h?ref=004d3859e9793a45c7254a64e4c84b9b9b81101b", "patch": "@@ -1,5 +1,5 @@\n /* Target definitions for x86 running Darwin.\n-   Copyright (C) 2001, 2002, 2004 Free Software Foundation, Inc.\n+   Copyright (C) 2001, 2002, 2004, 2005 Free Software Foundation, Inc.\n    Contributed by Apple Computer Inc.\n \n This file is part of GCC.\n@@ -25,6 +25,9 @@ Boston, MA 02111-1307, USA.  */\n \n #define TARGET_VERSION fprintf (stderr, \" (i686 Darwin)\");\n \n+#undef TARGET_FPMATH_DEFAULT\n+#define TARGET_FPMATH_DEFAULT (TARGET_SSE ? FPMATH_SSE : FPMATH_387)\n+\n #define TARGET_OS_CPP_BUILTINS()                \\\n   do                                            \\\n     {                                           \\\n@@ -43,13 +46,12 @@ Boston, MA 02111-1307, USA.  */\n   %{g: %{!fno-eliminate-unused-debug-symbols: -feliminate-unused-debug-symbols }}\"\n \n #undef ASM_SPEC\n-#define ASM_SPEC \"-arch i686 -force_cpusubtype_ALL\"\n+#define ASM_SPEC \"-arch i386 -force_cpusubtype_ALL\"\n \n #undef SUBTARGET_EXTRA_SPECS\n #define SUBTARGET_EXTRA_SPECS\t\t\t\t\t\\\n-  { \"darwin_arch\", \"i686\" },\t\t\t\t\t\\\n-  { \"darwin_subarch\", \"%{march=pentium3:pentIIm3;:i686}\" },\n-   \n+  { \"darwin_arch\", \"i386\" },\t\t\t\t\t\\\n+  { \"darwin_subarch\", \"i386\" },\n \n /* Use the following macro for any Darwin/x86-specific command-line option\n    translation.  */"}, {"sha": "b567069d92d6984f04dbca4ef18e7195bfd0a56e", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=004d3859e9793a45c7254a64e4c84b9b9b81101b", "patch": "@@ -1516,19 +1516,17 @@ override_options (void)\n       target_flags\n \t|= ((MASK_SSE2 | MASK_SSE | MASK_MMX | MASK_128BIT_LONG_DOUBLE)\n \t    & ~target_flags_explicit);\n-\n-      if (TARGET_SSE)\n-\tix86_fpmath = FPMATH_SSE;\n      }\n   else\n     {\n-      ix86_fpmath = FPMATH_387;\n       /* i386 ABI does not specify red zone.  It still makes sense to use it\n          when programmer takes care to stack from being destroyed.  */\n       if (!(target_flags_explicit & MASK_NO_RED_ZONE))\n         target_flags |= MASK_NO_RED_ZONE;\n     }\n \n+  ix86_fpmath = TARGET_FPMATH_DEFAULT;\n+\n   if (ix86_fpmath_string != 0)\n     {\n       if (! strcmp (ix86_fpmath_string, \"387\"))"}, {"sha": "20bd099423fc48673149f0c145e0993452452c20", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/004d3859e9793a45c7254a64e4c84b9b9b81101b/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=004d3859e9793a45c7254a64e4c84b9b9b81101b", "patch": "@@ -104,6 +104,11 @@ extern int target_flags;\n #endif\n #endif\n \n+#ifndef TARGET_FPMATH_DEFAULT\n+#define TARGET_FPMATH_DEFAULT \\\n+  (TARGET_64BIT && TARGET_SSE ? FPMATH_SSE : FPMATH_387)\n+#endif\n+\n /* Masks for the -m switches */\n #define MASK_80387\t\t0x00000001\t/* Hardware floating point */\n #define MASK_RTD\t\t0x00000002\t/* Use ret that pops args */"}]}