{"sha": "45b1f7c746372e7dc48d79c9b5089ce12cbef1e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDViMWY3Yzc0NjM3MmU3ZGM0OGQ3OWM5YjUwODljZTEyY2JlZjFlNQ==", "commit": {"author": {"name": "Chris Lattner", "email": "sabre@nondot.org", "date": "2002-05-29T16:23:28Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2002-05-29T16:23:28Z"}, "message": "ssa.c (rename_insn_1): Rename uses of undefined registers to prevent confusion if/when...\n\n        * ssa.c (rename_insn_1): Rename uses of undefined registers to\n        prevent confusion if/when the register is defined.\n\nFrom-SVN: r54002", "tree": {"sha": "f1b44f9766fda4f8d9db58e1db1518dcec79af29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1b44f9766fda4f8d9db58e1db1518dcec79af29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5/comments", "author": {"login": "lattner", "id": 15152540, "node_id": "MDQ6VXNlcjE1MTUyNTQw", "avatar_url": "https://avatars.githubusercontent.com/u/15152540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lattner", "html_url": "https://github.com/lattner", "followers_url": "https://api.github.com/users/lattner/followers", "following_url": "https://api.github.com/users/lattner/following{/other_user}", "gists_url": "https://api.github.com/users/lattner/gists{/gist_id}", "starred_url": "https://api.github.com/users/lattner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lattner/subscriptions", "organizations_url": "https://api.github.com/users/lattner/orgs", "repos_url": "https://api.github.com/users/lattner/repos", "events_url": "https://api.github.com/users/lattner/events{/privacy}", "received_events_url": "https://api.github.com/users/lattner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "049746c29128f9db517609685aab00f030374f8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/049746c29128f9db517609685aab00f030374f8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/049746c29128f9db517609685aab00f030374f8e"}], "stats": {"total": 27, "additions": 20, "deletions": 7}, "files": [{"sha": "9ff0f270de46d5c6810f410ef1f51b53e2e5d9a7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=45b1f7c746372e7dc48d79c9b5089ce12cbef1e5", "patch": "@@ -1,3 +1,8 @@\n+2002-05-29  Chris Lattner  <sabre@nondot.org>\n+\n+        * ssa.c (rename_insn_1): Rename uses of undefined registers to\n+        prevent confusion if/when the register is defined.\n+\n 2002-05-29  Hans-Peter Nilsson  <hp@axis.com>\n \n \tPR target/6838"}, {"sha": "b81a8ac78312200051f177d4dac0ec3baabc40f9", "filename": "gcc/ssa.c", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5/gcc%2Fssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45b1f7c746372e7dc48d79c9b5089ce12cbef1e5/gcc%2Fssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fssa.c?ref=45b1f7c746372e7dc48d79c9b5089ce12cbef1e5", "patch": "@@ -916,18 +916,26 @@ rename_insn_1 (ptr, data)\n       }\n \n     case REG:\n-      if (CONVERT_REGISTER_TO_SSA_P (REGNO (x)) &&\n-\t  REGNO (x) < ssa_max_reg_num)\n+      if (CONVERT_REGISTER_TO_SSA_P (REGNO (x))\n+\t  && REGNO (x) < ssa_max_reg_num)\n \t{\n \t  rtx new_reg = ssa_rename_to_lookup (x);\n \n-\t  if (new_reg != NULL_RTX && new_reg != RENAME_NO_RTX)\n+\t  if (new_reg != RENAME_NO_RTX)\n \t    {\n-\t      if (GET_MODE (x) != GET_MODE (new_reg))\n-\t\tabort ();\n-\t      *ptr = new_reg;\n+\t      if (new_reg != NULL_RTX)\n+\t\t{\n+\t\t  if (GET_MODE (x) != GET_MODE (new_reg))\n+\t\t    abort ();\n+\t\t  *ptr = new_reg;\n+\t\t}\n+\t      else\n+\t\t{\n+\t\t  /* Undefined value used, rename it to a new pseudo register so\n+\t\t     that it cannot conflict with an existing register */\n+\t\t  *ptr = gen_reg_rtx (GET_MODE(x));\n+\t\t}\n \t    }\n-\t  /* Else this is a use before a set.  Warn?  */\n \t}\n       return -1;\n "}]}