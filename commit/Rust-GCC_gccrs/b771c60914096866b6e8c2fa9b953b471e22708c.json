{"sha": "b771c60914096866b6e8c2fa9b953b471e22708c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjc3MWM2MDkxNDA5Njg2NmI2ZThjMmZhOWI5NTNiNDcxZTIyNzA4Yw==", "commit": {"author": {"name": "Alexander Monakov", "email": "amonakov@gcc.gnu.org", "date": "2017-07-25T14:33:39Z"}, "committer": {"name": "Alexander Monakov", "email": "amonakov@gcc.gnu.org", "date": "2017-07-25T14:33:39Z"}, "message": "match.pd: reassociate multiplications\n\n\t* match.pd ((X * CST) * Y): Reassociate to (X * Y) * CST.\ntestsuite/\n\t* gcc.dg/tree-ssa/assoc-2.c: New testcase.\n\nFrom-SVN: r250523", "tree": {"sha": "dcd6f6ff1120d626198f1b8910da526b1b57b890", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dcd6f6ff1120d626198f1b8910da526b1b57b890"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b771c60914096866b6e8c2fa9b953b471e22708c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b771c60914096866b6e8c2fa9b953b471e22708c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b771c60914096866b6e8c2fa9b953b471e22708c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b771c60914096866b6e8c2fa9b953b471e22708c/comments", "author": null, "committer": null, "parents": [{"sha": "417ca0117a1a9a8aaf5bc5ca530adfd68cb00399", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/417ca0117a1a9a8aaf5bc5ca530adfd68cb00399", "html_url": "https://github.com/Rust-GCC/gccrs/commit/417ca0117a1a9a8aaf5bc5ca530adfd68cb00399"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "654227cd55ddcc6ba4610500b1b2da4d82f2fbb5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b771c60914096866b6e8c2fa9b953b471e22708c", "patch": "@@ -1,4 +1,8 @@\n-2017-07-07  Torsten Duwe  <duwe@suse.de>\n+2017-07-25  Alexander Monakov  <amonakov@ispras.ru>\n+\n+\t* match.pd ((X * CST) * Y): Reassociate to (X * Y) * CST.\n+\n+2017-07-25  Torsten Duwe  <duwe@suse.de>\n \n \t* common.opt: Introduce -fpatchable-function-entry\n \tcommand line option, and its variables function_entry_patch_area_size"}, {"sha": "39e1e5c8384f32e515064dbd4ec963d4d765e44f", "filename": "gcc/match.pd", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2Fmatch.pd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2Fmatch.pd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatch.pd?ref=b771c60914096866b6e8c2fa9b953b471e22708c", "patch": "@@ -2213,6 +2213,14 @@ DEFINE_INT_AND_FLOAT_ROUND_FN (RINT)\n  (mult @0 integer_minus_onep)\n  (negate @0))\n \n+/* Reassociate (X * CST) * Y to (X * Y) * CST.  This does not introduce\n+   signed overflow for CST != 0 && CST != -1.  */\n+(simplify\n+ (mult:c (mult:s @0 INTEGER_CST@1) @2)\n+ (if (TREE_CODE (@2) != INTEGER_CST\n+      && !integer_zerop (@1) && !integer_minus_onep (@1))\n+  (mult (mult @0 @2) @1)))\n+\n /* True if we can easily extract the real and imaginary parts of a complex\n    number.  */\n (match compositional_complex"}, {"sha": "a5c00b4e25ba068a8d5d635a3159f5d1dbfe1d54", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b771c60914096866b6e8c2fa9b953b471e22708c", "patch": "@@ -1,4 +1,8 @@\n-2017-07-07  Torsten Duwe  <duwe@suse.de>\n+2017-07-25  Alexander Monakov  <amonakov@ispras.ru>\n+\n+\t* gcc.dg/tree-ssa/assoc-2.c: New testcase.\n+\n+2017-07-25  Torsten Duwe  <duwe@suse.de>\n \n \t* c-c++-common/patchable_function_entry-default.c: New test.\n \t* c-c++-common/patchable_function_entry-decl.c: Likewise."}, {"sha": "a92c88226e55a4a6ae156f6d6feec35f430e4e35", "filename": "gcc/testsuite/gcc.dg/tree-ssa/assoc-2.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fassoc-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b771c60914096866b6e8c2fa9b953b471e22708c/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fassoc-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fassoc-2.c?ref=b771c60914096866b6e8c2fa9b953b471e22708c", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -fdump-tree-gimple-raw -fdump-tree-optimized-raw\" } */\n+\n+int f0(int a, int b){\n+  return a * 33 * b * 55;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"mult_expr\" 2 \"gimple\" } } */"}]}