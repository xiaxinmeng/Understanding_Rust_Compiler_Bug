{"sha": "5b5e456f0187406e17444b6e40d974f94524f2a2", "node_id": "C_kwDOANBUbNoAKDViNWU0NTZmMDE4NzQwNmUxNzQ0NGI2ZTQwZDk3NGY5NDUyNGYyYTI", "commit": {"author": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2022-03-03T08:22:42Z"}, "committer": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2022-03-03T09:43:35Z"}, "message": "[nvptx] Build libraries with mptx=3.1\n\nIn gcc-5 to gcc-11, the ptx isa version was 3.1.\n\nOn trunk, the default is now 6.0, which is also what will be the value in\nthe libraries.\n\nConsequently, there may be setups with an older driver that worked with\ngcc-11, but will become unsupported with gcc-12.\n\nFix this by building the libraries with mptx=3.1.\n\nAfter this, setups with an older driver still won't work out of the box\nwith gcc-12, because the default ptx isa version has changed, but should work\nafter specifying mptx=3.1.\n\ngcc/ChangeLog:\n\n2022-03-03  Tom de Vries  <tdevries@suse.de>\n\n\t* config/nvptx/t-nvptx (MULTILIB_EXTRA_OPTS): Add mptx=3.1.", "tree": {"sha": "9b220a9f3874cde0fabd7cd27046292d36e3df3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b220a9f3874cde0fabd7cd27046292d36e3df3f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b5e456f0187406e17444b6e40d974f94524f2a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b5e456f0187406e17444b6e40d974f94524f2a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b5e456f0187406e17444b6e40d974f94524f2a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b5e456f0187406e17444b6e40d974f94524f2a2/comments", "author": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07667c911b1827fb98a1b5da621d51d8fcf0409a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07667c911b1827fb98a1b5da621d51d8fcf0409a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07667c911b1827fb98a1b5da621d51d8fcf0409a"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "8f67264d1328ed306e6dd908d0a67dd80c4cff78", "filename": "gcc/config/nvptx/t-nvptx", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b5e456f0187406e17444b6e40d974f94524f2a2/gcc%2Fconfig%2Fnvptx%2Ft-nvptx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b5e456f0187406e17444b6e40d974f94524f2a2/gcc%2Fconfig%2Fnvptx%2Ft-nvptx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Ft-nvptx?ref=5b5e456f0187406e17444b6e40d974f94524f2a2", "patch": "@@ -32,4 +32,4 @@ s-nvptx-gen-opt: $(srcdir)/config/nvptx/nvptx-sm.def\n \n MULTILIB_OPTIONS = mgomp\n \n-MULTILIB_EXTRA_OPTS = misa=sm_30\n+MULTILIB_EXTRA_OPTS = misa=sm_30 mptx=3.1"}]}