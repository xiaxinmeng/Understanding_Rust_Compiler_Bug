{"sha": "cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2MyZGU5MmQ1YTRmYmM2NmNiY2ZkMWM5MTg3YzRlYmVjYzRmNDZiMw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2012-02-27T13:51:50Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2012-02-27T13:51:50Z"}, "message": "Fix Solaris symbol versioning (PR libstdc++/52188)\n\n\tcontrib:\n\tPR libstdc++/52188\n\t* make_sunver.pl: Remove #ifdef handling.\n\n\tlibgomp:\n\tPR libstdc++/52188\n\t* acinclude.m4 (LIBGOMP_ENABLE_SYMVERS): Remove\tsymvers_renaming.\n\tRemove ENABLE_SYMVERS_SOL2.\n\t* configure: Regenerate.\n\t* Makefile.am [LIBGOMP_BUILD_VERSIONED_SHLIB] (comma): New variable.\n\t(PREPROCESS): New variable.\n\t(libgomp.ver): New target.\n\t[LIBGOMP_BUILD_VERSIONED_SHLIB &&\n\tLIBGOMP_BUILD_VERSIONED_SHLIB_GNU]: Remove\n\tLIBGOMP_BUILD_VERSIONED_SHLIB_SOL2 handling.\n\tUse libgomp.ver.\n\t[LIBGOMP_BUILD_VERSIONED_SHLIB_SUN]: Use libgomp.ver, libgomp.ver-sun.\n\t* Makefile.in: Regenerate.\n\n\tlibstdc++-v3:\n\tPR libstdc++/52188\n\t* acinclude.m4 (GLIBCXX_ENABLE_SYMVERS): Remove symvers_renaming.\n\tRemove ENABLE_SYMVERS_SOL2.\n\t* configure: Regenerate.\n\t* src/Makefile.am [ENABLE_SYMVERS] (libstdc++-symbols.ver):\n\tPostprocess mapfile.\n\t[ENABLE_SYMVERS_GNU]: Remove ENABLE_SYMVERS_SOL2 handling.\n\t* src/Makefile.in: Regenerate.\n\n\t* config/abi/pre/gnu.ver (GLIBCXX_3.4.5) [!__sun__ && !__svr4__]:\n\tDon't export\n\t_ZNSt19istreambuf_iteratorI[cw]St11char_traitsI[cw]EEppEv.\n\nFrom-SVN: r184598", "tree": {"sha": "1021fa2934b370402c6c9d89778a3c5d3dae290a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1021fa2934b370402c6c9d89778a3c5d3dae290a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f59280cf80e22bf30bcbb173e9f100959e5ed768", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f59280cf80e22bf30bcbb173e9f100959e5ed768", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f59280cf80e22bf30bcbb173e9f100959e5ed768"}], "stats": {"total": 247, "additions": 111, "deletions": 136}, "files": [{"sha": "50948870945c2ff9856816a1dc4f91f3e0f258b2", "filename": "contrib/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -1,3 +1,8 @@\n+2012-02-27  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR libstdc++/52188\n+\t* make_sunver.pl: Remove #ifdef handling.\n+\n 2012-02-17   Doug Kwan  <dougkwan@google.com>\n \n \t* contrib/testsuite-management/validate_failures.py"}, {"sha": "afdf973f5da440d8eb9bbe733dca663694b0a568", "filename": "contrib/make_sunver.pl", "status": "modified", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/contrib%2Fmake_sunver.pl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/contrib%2Fmake_sunver.pl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fmake_sunver.pl?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -156,9 +156,6 @@\n # We're currently inside `extern \"C++\"', which Sun ld doesn't understand.\n my $in_extern = 0;\n \n-# We're currently inside a conditional section: just skip it.\n-my $in_ifdef = 0;\n-\n # The c++filt command to use.  This *must* be GNU c++filt; the Sun Studio\n # c++filt doesn't handle the GNU mangling style.\n my $cxxfilt = $ENV{'CXXFILT'} || \"c++filt\";\n@@ -183,15 +180,6 @@\n print \"#\\n\\n\";\n \n while (<F>) {\n-    # End of skipped section.\n-    if (/^[ \\t]*\\#endif/) {\n-\t$in_ifdef = 0;\n-\tnext;\n-    }\n-\n-    # Just skip a conditional section.\n-    if ($in_ifdef) { next; }\n-\n     # Lines of the form '};'\n     if (/^([ \\t]*)(\\}[ \\t]*;[ \\t]*)$/) {\n \t$glob = 'glob';\n@@ -216,15 +204,6 @@\n \tprint; next;\n     }\n \n-    # Special comments that look like C preprocessor conditionals.\n-    # Just skip the contents for now.\n-    # FIXME: Allow passing in conditionals from the command line to really\n-    # control the skipping.\n-    if (/^[ \\t]*\\#ifdef/) {\n-\t$in_ifdef = 1;\n-\tnext;\n-    }\n-\n     # Comment and blank lines\n     if (/^[ \\t]*\\#/) { print; next; }\n     if (/^[ \\t]*$/) { print; next; }"}, {"sha": "c0d578f3e9e4dc8694bb5df38faeadb6e78e1948", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -1,3 +1,19 @@\n+2012-02-27  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR libstdc++/52188\n+\t* acinclude.m4 (LIBGOMP_ENABLE_SYMVERS): Remove\tsymvers_renaming.\n+\tRemove ENABLE_SYMVERS_SOL2.\n+\t* configure: Regenerate.\n+\t* Makefile.am [LIBGOMP_BUILD_VERSIONED_SHLIB] (comma): New variable.\n+\t(PREPROCESS): New variable.\n+\t(libgomp.ver): New target.\n+\t[LIBGOMP_BUILD_VERSIONED_SHLIB &&\n+\tLIBGOMP_BUILD_VERSIONED_SHLIB_GNU]: Remove\n+\tLIBGOMP_BUILD_VERSIONED_SHLIB_SOL2 handling.\n+\tUse libgomp.ver.\n+\t[LIBGOMP_BUILD_VERSIONED_SHLIB_SUN]: Use libgomp.ver, libgomp.ver-sun.\n+\t* Makefile.in: Regenerate.\n+\n 2012-02-14  Walter Lee  <walt@tilera.com>\n \n \t* configure.tgt: Handle tilegx and tilepro."}, {"sha": "2bc4986ad18dcaea89f2ee09ed7f93b5fd5dafa7", "filename": "libgomp/Makefile.am", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FMakefile.am?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -22,26 +22,26 @@ toolexeclib_LTLIBRARIES = libgomp.la\n nodist_toolexeclib_HEADERS = libgomp.spec\n \n if LIBGOMP_BUILD_VERSIONED_SHLIB\n+# -Wc is only a libtool option.\n+comma = ,\n+PREPROCESS = $(subst -Wc$(comma), , $(COMPILE)) -E\n+\n+libgomp.ver: $(top_srcdir)/libgomp.map\n+\t$(EGREP) -v '#(#| |$$)' $< | \\\n+\t  $(PREPROCESS) -P -include config.h - > $@ || (rm -f $@ ; exit 1)\n+\n if LIBGOMP_BUILD_VERSIONED_SHLIB_GNU\n-if LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2\n-libgomp_version_script = -Wl,--version-script,libgomp.map-sol2\n-libgomp_version_dep = libgomp.map-sol2\n-libgomp.map-sol2 : $(top_srcdir)/libgomp.map\n-\tsed -e '/^#ifdef HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT/,/^#endif/d' $< \\\n-\t > $@ || (rm -f $@ ; exit 1)\n-else\n-libgomp_version_script = -Wl,--version-script,$(top_srcdir)/libgomp.map\n-libgomp_version_dep = $(top_srcdir)/libgomp.map\n-endif\n+libgomp_version_script = -Wl,--version-script,libgomp.ver\n+libgomp_version_dep = libgomp.ver\n endif\n if LIBGOMP_BUILD_VERSIONED_SHLIB_SUN\n-libgomp_version_script = -Wl,-M,libgomp.map-sun\n-libgomp_version_dep = libgomp.map-sun\n-libgomp.map-sun : $(top_srcdir)/libgomp.map \\\n+libgomp_version_script = -Wl,-M,libgomp.ver-sun\n+libgomp_version_dep = libgomp.ver-sun\n+libgomp.ver-sun : libgomp.ver \\\n \t\t$(top_srcdir)/../contrib/make_sunver.pl \\\n \t\t$(libgomp_la_OBJECTS) $(libgomp_la_LIBADD)\n \tperl $(top_srcdir)/../contrib/make_sunver.pl \\\n-\t  $(top_srcdir)/libgomp.map \\\n+\t  libgomp.ver \\\n \t  $(libgomp_la_OBJECTS:%.lo=.libs/%.o) \\\n \t `echo $(libgomp_la_LIBADD) | \\\n \t    sed 's,/\\([^/.]*\\)\\.la,/.libs/\\1.a,g'` \\"}, {"sha": "ecc010eda4ba8da2309b9bb1f962139b110bdda7", "filename": "libgomp/Makefile.in", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FMakefile.in?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -298,14 +298,16 @@ AM_CFLAGS = $(XCFLAGS)\n AM_LDFLAGS = $(XLDFLAGS) $(SECTION_LDFLAGS) $(OPT_LDFLAGS)\n toolexeclib_LTLIBRARIES = libgomp.la\n nodist_toolexeclib_HEADERS = libgomp.spec\n+\n+# -Wc is only a libtool option.\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@comma = ,\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@PREPROCESS = $(subst -Wc$(comma), , $(COMPILE)) -E\n @LIBGOMP_BUILD_VERSIONED_SHLIB_FALSE@libgomp_version_script = \n-@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_FALSE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_script = -Wl,--version-script,$(top_srcdir)/libgomp.map\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_script = -Wl,--version-script,libgomp.map-sol2\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_script = -Wl,-M,libgomp.map-sun\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_script = -Wl,--version-script,libgomp.ver\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_script = -Wl,-M,libgomp.ver-sun\n @LIBGOMP_BUILD_VERSIONED_SHLIB_FALSE@libgomp_version_dep = \n-@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_FALSE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_dep = $(top_srcdir)/libgomp.map\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_dep = libgomp.map-sol2\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_dep = libgomp.map-sun\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_dep = libgomp.ver\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp_version_dep = libgomp.ver-sun\n libgomp_version_info = -version-info $(libtool_VERSION)\n libgomp_la_LDFLAGS = $(libgomp_version_info) $(libgomp_version_script) \\\n         $(lt_host_flags)\n@@ -1066,14 +1068,15 @@ uninstall-am: uninstall-dvi-am uninstall-html-am uninstall-info-am \\\n \n \n vpath % $(strip $(search_path))\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp.map-sol2 : $(top_srcdir)/libgomp.map\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\tsed -e '/^#ifdef HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT/,/^#endif/d' $< \\\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t > $@ || (rm -f $@ ; exit 1)\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp.map-sun : $(top_srcdir)/libgomp.map \\\n+\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp.ver: $(top_srcdir)/libgomp.map\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t$(EGREP) -v '#(#| |$$)' $< | \\\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t  $(PREPROCESS) -P -include config.h - > $@ || (rm -f $@ ; exit 1)\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@libgomp.ver-sun : libgomp.ver \\\n @LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t\t$(top_srcdir)/../contrib/make_sunver.pl \\\n @LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t\t$(libgomp_la_OBJECTS) $(libgomp_la_LIBADD)\n @LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\tperl $(top_srcdir)/../contrib/make_sunver.pl \\\n-@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t  $(top_srcdir)/libgomp.map \\\n+@LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t  libgomp.ver \\\n @LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t  $(libgomp_la_OBJECTS:%.lo=.libs/%.o) \\\n @LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t `echo $(libgomp_la_LIBADD) | \\\n @LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE@@LIBGOMP_BUILD_VERSIONED_SHLIB_TRUE@\t    sed 's,/\\([^/.]*\\)\\.la,/.libs/\\1.a,g'` \\"}, {"sha": "d43aa88547484998ac58c26116b1fcdf89ee586e", "filename": "libgomp/acinclude.m4", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Facinclude.m4?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -355,15 +355,12 @@ if test $enable_symvers != no ; then\n      # The Solaris 2 runtime linker doesn't support the GNU extension of\n      # binding the same symbol to different versions\n      solaris2*)\n-       symvers_renaming=no ;;\n+       ;;\n      # Other platforms with GNU symbol versioning (GNU/Linux, more?) do.\n      *)\n        AC_DEFINE(HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT, 1,\n          [Define to 1 if the target runtime linker supports binding the same symbol to different versions.])\n-       symvers_renaming=yes ;;\n+       ;;\n     esac\n-else\n-    symvers_renaming=no\n fi\n-AM_CONDITIONAL(LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2, test $symvers_renaming = no)\n ])"}, {"sha": "8ed841a06e05c6b64ecd1019a6ecd20f840e37dc", "filename": "libgomp/configure", "status": "modified", "additions": 4, "deletions": 20, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -619,8 +619,6 @@ link_gomp\n XLDFLAGS\n XCFLAGS\n config_path\n-LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_FALSE\n-LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE\n LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_FALSE\n LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE\n LIBGOMP_BUILD_VERSIONED_SHLIB_GNU_FALSE\n@@ -11082,7 +11080,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11085 \"configure\"\n+#line 11083 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11188,7 +11186,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11191 \"configure\"\n+#line 11189 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -15994,27 +15992,17 @@ if test $enable_symvers != no ; then\n      # The Solaris 2 runtime linker doesn't support the GNU extension of\n      # binding the same symbol to different versions\n      solaris2*)\n-       symvers_renaming=no ;;\n+       ;;\n      # Other platforms with GNU symbol versioning (GNU/Linux, more?) do.\n      *)\n \n $as_echo \"#define HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT 1\" >>confdefs.h\n \n-       symvers_renaming=yes ;;\n+       ;;\n     esac\n-else\n-    symvers_renaming=no\n-fi\n- if test $symvers_renaming = no; then\n-  LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE=\n-  LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_FALSE='#'\n-else\n-  LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE='#'\n-  LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_FALSE=\n fi\n \n \n-\n if test $enable_symvers = gnu; then\n \n $as_echo \"#define LIBGOMP_GNU_SYMBOL_VERSIONING 1\" >>confdefs.h\n@@ -16404,10 +16392,6 @@ if test -z \"${LIBGOMP_BUILD_VERSIONED_SHLIB_SUN_TRUE}\" && test -z \"${LIBGOMP_BUI\n   as_fn_error \"conditional \\\"LIBGOMP_BUILD_VERSIONED_SHLIB_SUN\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n fi\n-if test -z \"${LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_TRUE}\" && test -z \"${LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2_FALSE}\"; then\n-  as_fn_error \"conditional \\\"LIBGOMP_BUILD_VERSIONED_SHLIB_SOL2\\\" was never defined.\n-Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n-fi\n if test -z \"${USE_FORTRAN_TRUE}\" && test -z \"${USE_FORTRAN_FALSE}\"; then\n   as_fn_error \"conditional \\\"USE_FORTRAN\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5"}, {"sha": "7b26bef24676284c59255b6f6f0dd3d00e35a5eb", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -1,3 +1,18 @@\n+2012-02-27  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR libstdc++/52188\n+\t* acinclude.m4 (GLIBCXX_ENABLE_SYMVERS): Remove symvers_renaming.\n+\tRemove ENABLE_SYMVERS_SOL2.\n+\t* configure: Regenerate.\n+\t* src/Makefile.am [ENABLE_SYMVERS] (libstdc++-symbols.ver):\n+\tPostprocess mapfile.\n+\t[ENABLE_SYMVERS_GNU]: Remove ENABLE_SYMVERS_SOL2 handling.\n+\t* src/Makefile.in: Regenerate.\n+\n+\t* config/abi/pre/gnu.ver (GLIBCXX_3.4.5) [!__sun__ && !__svr4__]:\n+\tDon't export\n+\t_ZNSt19istreambuf_iteratorI[cw]St11char_traitsI[cw]EEppEv.\n+\n 2012-02-25  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \tPR testsuite/52201"}, {"sha": "fe37a91a397931a05c91782d7dad9c757ab2c577", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -3264,17 +3264,14 @@ if test $enable_symvers != no ; then\n      # The Solaris 2 runtime linker doesn't support the GNU extension of\n      # binding the same symbol to different versions\n      solaris2*)\n-       symvers_renaming=no  ;;\n+       ;;\n      # Other platforms with GNU symbol versioning (GNU/Linux, more?) do.\n      *)\n        AC_DEFINE(HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT, 1,\n \t [Define to 1 if the target runtime linker supports binding the same symbol to different versions.])\n-       symvers_renaming=yes  ;;\n+       ;;\n     esac\n-else\n-    symvers_renaming=no\n fi\n-GLIBCXX_CONDITIONAL(ENABLE_SYMVERS_SOL2, test $symvers_renaming = no)\n \n # Now, set up compatibility support, if any.\n # In addition, need this to deal with std::size_t mangling in"}, {"sha": "b99a812168067b1d91ce8f119ced447b8658fb77", "filename": "libstdc++-v3/config/abi/pre/gnu.ver", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -1,7 +1,7 @@\n ## Linker script for GNU versioning (GNU ld 2.13.91+ only.)\n ##\n-## Copyright (C) 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011\n-## Free Software Foundation, Inc.\n+## Copyright (C) 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n+## 2011, 2012 Free Software Foundation, Inc.\n ##\n ## This file is part of the GNU ISO C++ Library.  This library is free\n ## software; you can redistribute it and/or modify it under the\n@@ -890,8 +890,12 @@ GLIBCXX_3.4.5 {\n \n     _ZNSt11char_traitsI[cw]E2eqERK[cw]S2_;\n \n+    # Those template instantiations weren't exported on Solaris in GCC 4.6\n+    # and aren't necessary for correct operation, so don't emit them now\n+    # (PR libstdc++/52188).\n+#if !defined(__sun__) && !defined(__svr4__)\n     _ZNSt19istreambuf_iteratorI[cw]St11char_traitsI[cw]EEppEv;\n-\n+#endif\n } GLIBCXX_3.4.4;\n \n GLIBCXX_3.4.6 {"}, {"sha": "d3444e050999335801267698730e4c020f923df2", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 12, "deletions": 30, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -644,8 +644,6 @@ GLIBCXX_LDBL_COMPAT_TRUE\n ENABLE_VISIBILITY_FALSE\n ENABLE_VISIBILITY_TRUE\n libtool_VERSION\n-ENABLE_SYMVERS_SOL2_FALSE\n-ENABLE_SYMVERS_SOL2_TRUE\n ENABLE_SYMVERS_SUN_FALSE\n ENABLE_SYMVERS_SUN_TRUE\n ENABLE_SYMVERS_DARWIN_FALSE\n@@ -11499,7 +11497,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11502 \"configure\"\n+#line 11500 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11605,7 +11603,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11608 \"configure\"\n+#line 11606 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -14963,7 +14961,7 @@ fi\n     #\n     # Fake what AC_TRY_COMPILE does.  XXX Look at redoing this new-style.\n     cat > conftest.$ac_ext << EOF\n-#line 14966 \"configure\"\n+#line 14964 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -15298,7 +15296,7 @@ $as_echo \"$glibcxx_cv_atomic_long_long\" >&6; }\n   # Fake what AC_TRY_COMPILE does.\n \n     cat > conftest.$ac_ext << EOF\n-#line 15301 \"configure\"\n+#line 15299 \"configure\"\n int main()\n {\n   typedef bool atomic_type;\n@@ -15333,7 +15331,7 @@ $as_echo \"$glibcxx_cv_atomic_bool\" >&6; }\n     rm -f conftest*\n \n     cat > conftest.$ac_ext << EOF\n-#line 15336 \"configure\"\n+#line 15334 \"configure\"\n int main()\n {\n   typedef short atomic_type;\n@@ -15368,7 +15366,7 @@ $as_echo \"$glibcxx_cv_atomic_short\" >&6; }\n     rm -f conftest*\n \n     cat > conftest.$ac_ext << EOF\n-#line 15371 \"configure\"\n+#line 15369 \"configure\"\n int main()\n {\n   // NB: _Atomic_word not necessarily int.\n@@ -15404,7 +15402,7 @@ $as_echo \"$glibcxx_cv_atomic_int\" >&6; }\n     rm -f conftest*\n \n     cat > conftest.$ac_ext << EOF\n-#line 15407 \"configure\"\n+#line 15405 \"configure\"\n int main()\n {\n   typedef long long atomic_type;\n@@ -15484,7 +15482,7 @@ $as_echo \"$as_me: WARNING: Performance of certain classes will degrade as a resu\n   # unnecessary for this test.\n \n     cat > conftest.$ac_ext << EOF\n-#line 15487 \"configure\"\n+#line 15485 \"configure\"\n int main()\n {\n   _Decimal32 d1;\n@@ -15526,7 +15524,7 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n   # unnecessary for this test.\n \n     cat > conftest.$ac_ext << EOF\n-#line 15529 \"configure\"\n+#line 15527 \"configure\"\n template<typename T1, typename T2>\n   struct same\n   { typedef T2 type; };\n@@ -15560,7 +15558,7 @@ $as_echo \"$enable_int128\" >&6; }\n     rm -f conftest*\n \n     cat > conftest.$ac_ext << EOF\n-#line 15563 \"configure\"\n+#line 15561 \"configure\"\n template<typename T1, typename T2>\n   struct same\n   { typedef T2 type; };\n@@ -64998,19 +64996,16 @@ if test $enable_symvers != no ; then\n      # The Solaris 2 runtime linker doesn't support the GNU extension of\n      # binding the same symbol to different versions\n      solaris2*)\n-       symvers_renaming=no  ;;\n+       ;;\n      # Other platforms with GNU symbol versioning (GNU/Linux, more?) do.\n      *)\n \n $as_echo \"#define HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT 1\" >>confdefs.h\n \n-       symvers_renaming=yes  ;;\n+       ;;\n     esac\n-else\n-    symvers_renaming=no\n fi\n \n-\n # Now, set up compatibility support, if any.\n # In addition, need this to deal with std::size_t mangling in\n # src/compatibility.cc.  In a perfect world, could use\n@@ -66201,15 +66196,6 @@ else\n fi\n \n \n-    if test $symvers_renaming = no; then\n-  ENABLE_SYMVERS_SOL2_TRUE=\n-  ENABLE_SYMVERS_SOL2_FALSE='#'\n-else\n-  ENABLE_SYMVERS_SOL2_TRUE='#'\n-  ENABLE_SYMVERS_SOL2_FALSE=\n-fi\n-\n-\n     if test $enable_libstdcxx_visibility = yes; then\n   ENABLE_VISIBILITY_TRUE=\n   ENABLE_VISIBILITY_FALSE='#'\n@@ -66637,10 +66623,6 @@ if test -z \"${ENABLE_SYMVERS_SUN_TRUE}\" && test -z \"${ENABLE_SYMVERS_SUN_FALSE}\"\n   as_fn_error \"conditional \\\"ENABLE_SYMVERS_SUN\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n fi\n-if test -z \"${ENABLE_SYMVERS_SOL2_TRUE}\" && test -z \"${ENABLE_SYMVERS_SOL2_FALSE}\"; then\n-  as_fn_error \"conditional \\\"ENABLE_SYMVERS_SOL2\\\" was never defined.\n-Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n-fi\n if test -z \"${ENABLE_VISIBILITY_TRUE}\" && test -z \"${ENABLE_VISIBILITY_FALSE}\"; then\n   as_fn_error \"conditional \\\"ENABLE_VISIBILITY\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5"}, {"sha": "f3ca0d7960e8f06e72fa840fa727d2754efc2c8c", "filename": "libstdc++-v3/src/Makefile.am", "status": "modified", "additions": 9, "deletions": 14, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -102,34 +102,29 @@ CXXLINK = $(LIBTOOL) --tag CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link \\\n if ENABLE_SYMVERS\n libstdc++-symbols.ver:  ${glibcxx_srcdir}/$(SYMVER_FILE) \\\n \t\t$(port_specific_symbol_files)\n-\tcp ${glibcxx_srcdir}/$(SYMVER_FILE) ./libstdc++-symbols.ver\n-\tchmod +w ./libstdc++-symbols.ver\n+\tcp ${glibcxx_srcdir}/$(SYMVER_FILE) $@.tmp\n+\tchmod +w $@.tmp\n \tif test \"x$(port_specific_symbol_files)\" != x; then \\\n \t  if grep '^# Appended to version file.' \\\n \t       $(port_specific_symbol_files) /dev/null > /dev/null 2>&1; then \\\n-\t    cat $(port_specific_symbol_files) >> $@; \\\n+\t    cat $(port_specific_symbol_files) >> $@.tmp; \\\n \t  else \\\n-\t    sed -n '1,/DO NOT DELETE/p' $@ > tmp.top; \\\n-\t    sed -n '/DO NOT DELETE/,$$p' $@ > tmp.bottom; \\\n-\t    cat tmp.top $(port_specific_symbol_files) tmp.bottom > $@; \\\n+\t    sed -n '1,/DO NOT DELETE/p' $@.tmp > tmp.top; \\\n+\t    sed -n '/DO NOT DELETE/,$$p' $@.tmp > tmp.bottom; \\\n+\t    cat tmp.top $(port_specific_symbol_files) tmp.bottom > $@.tmp; \\\n \t    rm tmp.top tmp.bottom; \\\n \t  fi; \\\n \tfi\n+\t$(EGREP) -v '#(#| |$$)' $@.tmp | \\\n+\t  $(COMPILE) -E -P -include config.h - > $@ || (rm -f $@ ; exit 1)\n+\trm -f $@.tmp\n \n CLEANFILES = libstdc++-symbols.ver\n \n if ENABLE_SYMVERS_GNU\n-if ENABLE_SYMVERS_SOL2\n-version_arg = -Wl,--version-script,libstdc++-symbols.ver-sol2\n-version_dep = libstdc++-symbols.ver-sol2\n-libstdc++-symbols.ver-sol2 : libstdc++-symbols.ver\n-\tsed -e '/^#ifdef HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT/,/^#endif/d' $< \\\n-\t > $@ || (rm -f $@ ; exit 1)\n-else\n version_arg = -Wl,--version-script=libstdc++-symbols.ver\n version_dep = libstdc++-symbols.ver\n endif\n-endif\n if ENABLE_SYMVERS_GNU_NAMESPACE\n version_arg = -Wl,--version-script=libstdc++-symbols.ver\n version_dep = libstdc++-symbols.ver"}, {"sha": "17a6fb281a9b472c4e65b4d98060791cde9f92bd", "filename": "libstdc++-v3/src/Makefile.in", "status": "modified", "additions": 11, "deletions": 13, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in?ref=cc2de92d5a4fbc66cbcfd1c9187c4ebecc4f46b3", "patch": "@@ -399,14 +399,12 @@ CXXLINK = $(LIBTOOL) --tag CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link \\\n @ENABLE_SYMVERS_DARWIN_TRUE@@ENABLE_SYMVERS_TRUE@version_arg = -Wl,-exported_symbols_list,libstdc++-symbols.explist\n @ENABLE_SYMVERS_FALSE@version_arg = \n @ENABLE_SYMVERS_GNU_NAMESPACE_TRUE@@ENABLE_SYMVERS_TRUE@version_arg = -Wl,--version-script=libstdc++-symbols.ver\n-@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_SOL2_FALSE@@ENABLE_SYMVERS_TRUE@version_arg = -Wl,--version-script=libstdc++-symbols.ver\n-@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_SOL2_TRUE@@ENABLE_SYMVERS_TRUE@version_arg = -Wl,--version-script,libstdc++-symbols.ver-sol2\n+@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_TRUE@version_arg = -Wl,--version-script=libstdc++-symbols.ver\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@version_arg = -Wl,-M,libstdc++-symbols.ver-sun\n @ENABLE_SYMVERS_DARWIN_TRUE@@ENABLE_SYMVERS_TRUE@version_dep = libstdc++-symbols.explist\n @ENABLE_SYMVERS_FALSE@version_dep = \n @ENABLE_SYMVERS_GNU_NAMESPACE_TRUE@@ENABLE_SYMVERS_TRUE@version_dep = libstdc++-symbols.ver\n-@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_SOL2_FALSE@@ENABLE_SYMVERS_TRUE@version_dep = libstdc++-symbols.ver\n-@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_SOL2_TRUE@@ENABLE_SYMVERS_TRUE@version_dep = libstdc++-symbols.ver-sol2\n+@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_TRUE@version_dep = libstdc++-symbols.ver\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@version_dep = libstdc++-symbols.ver-sun\n @GLIBCXX_BUILD_DEBUG_FALSE@STAMP_DEBUG = \n \n@@ -765,22 +763,22 @@ vpath % $(top_srcdir)\n # Symbol versioning for shared libraries.\n @ENABLE_SYMVERS_TRUE@libstdc++-symbols.ver:  ${glibcxx_srcdir}/$(SYMVER_FILE) \\\n @ENABLE_SYMVERS_TRUE@\t\t$(port_specific_symbol_files)\n-@ENABLE_SYMVERS_TRUE@\tcp ${glibcxx_srcdir}/$(SYMVER_FILE) ./libstdc++-symbols.ver\n-@ENABLE_SYMVERS_TRUE@\tchmod +w ./libstdc++-symbols.ver\n+@ENABLE_SYMVERS_TRUE@\tcp ${glibcxx_srcdir}/$(SYMVER_FILE) $@.tmp\n+@ENABLE_SYMVERS_TRUE@\tchmod +w $@.tmp\n @ENABLE_SYMVERS_TRUE@\tif test \"x$(port_specific_symbol_files)\" != x; then \\\n @ENABLE_SYMVERS_TRUE@\t  if grep '^# Appended to version file.' \\\n @ENABLE_SYMVERS_TRUE@\t       $(port_specific_symbol_files) /dev/null > /dev/null 2>&1; then \\\n-@ENABLE_SYMVERS_TRUE@\t    cat $(port_specific_symbol_files) >> $@; \\\n+@ENABLE_SYMVERS_TRUE@\t    cat $(port_specific_symbol_files) >> $@.tmp; \\\n @ENABLE_SYMVERS_TRUE@\t  else \\\n-@ENABLE_SYMVERS_TRUE@\t    sed -n '1,/DO NOT DELETE/p' $@ > tmp.top; \\\n-@ENABLE_SYMVERS_TRUE@\t    sed -n '/DO NOT DELETE/,$$p' $@ > tmp.bottom; \\\n-@ENABLE_SYMVERS_TRUE@\t    cat tmp.top $(port_specific_symbol_files) tmp.bottom > $@; \\\n+@ENABLE_SYMVERS_TRUE@\t    sed -n '1,/DO NOT DELETE/p' $@.tmp > tmp.top; \\\n+@ENABLE_SYMVERS_TRUE@\t    sed -n '/DO NOT DELETE/,$$p' $@.tmp > tmp.bottom; \\\n+@ENABLE_SYMVERS_TRUE@\t    cat tmp.top $(port_specific_symbol_files) tmp.bottom > $@.tmp; \\\n @ENABLE_SYMVERS_TRUE@\t    rm tmp.top tmp.bottom; \\\n @ENABLE_SYMVERS_TRUE@\t  fi; \\\n @ENABLE_SYMVERS_TRUE@\tfi\n-@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_SOL2_TRUE@@ENABLE_SYMVERS_TRUE@libstdc++-symbols.ver-sol2 : libstdc++-symbols.ver\n-@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_SOL2_TRUE@@ENABLE_SYMVERS_TRUE@\tsed -e '/^#ifdef HAVE_SYMVER_SYMBOL_RENAMING_RUNTIME_SUPPORT/,/^#endif/d' $< \\\n-@ENABLE_SYMVERS_GNU_TRUE@@ENABLE_SYMVERS_SOL2_TRUE@@ENABLE_SYMVERS_TRUE@\t > $@ || (rm -f $@ ; exit 1)\n+@ENABLE_SYMVERS_TRUE@\t$(EGREP) -v '#(#| |$$)' $@.tmp | \\\n+@ENABLE_SYMVERS_TRUE@\t  $(COMPILE) -E -P -include config.h - > $@ || (rm -f $@ ; exit 1)\n+@ENABLE_SYMVERS_TRUE@\trm -f $@.tmp\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@libstdc++-symbols.ver-sun : libstdc++-symbols.ver \\\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t\t$(toplevel_srcdir)/contrib/make_sunver.pl \\\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t\t$(libstdc___la_OBJECTS) $(libstdc___la_LIBADD)"}]}