{"sha": "97216ca891349cb06e86c929d6ec4f76d79e5a62", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTcyMTZjYTg5MTM0OWNiMDZlODZjOTI5ZDZlYzRmNzZkNzllNWE2Mg==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2011-08-29T10:06:16Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-29T10:06:16Z"}, "message": "sem_res.adb (Resolve_Actuals): Use base type to determine whether an access subtype is access_to_subprogram...\n\n2011-08-29  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_res.adb (Resolve_Actuals): Use base type to determine whether an\n\taccess subtype is access_to_subprogram, when applying checks for\n\tRM 3.10.2 (27).\n\nFrom-SVN: r178185", "tree": {"sha": "65d3c9d1cc631c7d03783defc139d982469f2130", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/65d3c9d1cc631c7d03783defc139d982469f2130"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97216ca891349cb06e86c929d6ec4f76d79e5a62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97216ca891349cb06e86c929d6ec4f76d79e5a62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97216ca891349cb06e86c929d6ec4f76d79e5a62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97216ca891349cb06e86c929d6ec4f76d79e5a62/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d3cb4cc0df047020719e5eaa3f5be0c17f256f2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3cb4cc0df047020719e5eaa3f5be0c17f256f2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3cb4cc0df047020719e5eaa3f5be0c17f256f2c"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "bae5e1ba533a6e4521eea1ce697ea5a080a4ec03", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97216ca891349cb06e86c929d6ec4f76d79e5a62/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97216ca891349cb06e86c929d6ec4f76d79e5a62/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=97216ca891349cb06e86c929d6ec4f76d79e5a62", "patch": "@@ -1,3 +1,9 @@\n+2011-08-29  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_res.adb (Resolve_Actuals): Use base type to determine whether an\n+\taccess subtype is access_to_subprogram, when applying checks for\n+\tRM 3.10.2 (27).\n+\n 2011-08-29  Matthew Heaney  <heaney@adacore.com>\n \n \t* a-comutr.adb, a-cimutr.adb, a-cbmutr.adb (Splice_Subtree): Only check"}, {"sha": "51e4f4319c2add134313e188aa190aae015b3a01", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97216ca891349cb06e86c929d6ec4f76d79e5a62/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97216ca891349cb06e86c929d6ec4f76d79e5a62/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=97216ca891349cb06e86c929d6ec4f76d79e5a62", "patch": "@@ -3987,14 +3987,17 @@ package body Sem_Res is\n                     (\"& is not a dispatching operation of &!\", A, Nam);\n                end if;\n \n+            --  Apply the checks described in 3.10.2(27): if the context is a\n+            --  specific access-to-object, the actual cannot be class-wide.\n+            --  Use base type to exclude access_to_subprogram cases.\n+\n             elsif Is_Access_Type (A_Typ)\n               and then Is_Access_Type (F_Typ)\n-              and then Ekind (F_Typ) /= E_Access_Subprogram_Type\n-              and then Ekind (F_Typ) /= E_Anonymous_Access_Subprogram_Type\n+              and then not Is_Access_Subprogram_Type (Base_Type (F_Typ))\n               and then (Is_Class_Wide_Type (Designated_Type (A_Typ))\n                          or else (Nkind (A) = N_Attribute_Reference\n                                    and then\n-                                     Is_Class_Wide_Type (Etype (Prefix (A)))))\n+                                  Is_Class_Wide_Type (Etype (Prefix (A)))))\n               and then not Is_Class_Wide_Type (Designated_Type (F_Typ))\n               and then not Is_Controlling_Formal (F)\n \n@@ -4008,9 +4011,7 @@ package body Sem_Res is\n                Error_Msg_N\n                  (\"access to class-wide argument not allowed here!\", A);\n \n-               if Is_Subprogram (Nam)\n-                 and then Comes_From_Source (Nam)\n-               then\n+               if Is_Subprogram (Nam) and then Comes_From_Source (Nam) then\n                   Error_Msg_Node_2 := Designated_Type (F_Typ);\n                   Error_Msg_NE\n                     (\"& is not a dispatching operation of &!\", A, Nam);"}]}