{"sha": "eeb06b1bda88e2f16a75d75d8095753bdd3966c0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWViMDZiMWJkYTg4ZTJmMTZhNzVkNzVkODA5NTc1M2JkZDM5NjZjMA==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.com", "date": "2001-09-25T12:26:25Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2001-09-25T12:26:25Z"}, "message": "Add target_flags mask bit to builtin definitions\n\nFrom-SVN: r45805", "tree": {"sha": "240c3cf0748834ce0e68e7ac4852662917301124", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/240c3cf0748834ce0e68e7ac4852662917301124"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eeb06b1bda88e2f16a75d75d8095753bdd3966c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eeb06b1bda88e2f16a75d75d8095753bdd3966c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eeb06b1bda88e2f16a75d75d8095753bdd3966c0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eeb06b1bda88e2f16a75d75d8095753bdd3966c0/comments", "author": null, "committer": null, "parents": [{"sha": "69d544c26c6c168325c2f036ce7c7a1807207242", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69d544c26c6c168325c2f036ce7c7a1807207242", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69d544c26c6c168325c2f036ce7c7a1807207242"}], "stats": {"total": 442, "additions": 227, "deletions": 215}, "files": [{"sha": "1e8f96dca05b8de4c5d1740bceebe1f24d7bbd4e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eeb06b1bda88e2f16a75d75d8095753bdd3966c0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eeb06b1bda88e2f16a75d75d8095753bdd3966c0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eeb06b1bda88e2f16a75d75d8095753bdd3966c0", "patch": "@@ -1,3 +1,15 @@\n+2001-09-25  Bernd Schmidt  <bernds@redhat.com>\n+\n+\tFrom Graham Stott  <grahams@redhat.com>\n+\t(def_builtin): Only define builtins appropriate for target_flags.  All\n+\tcallers changed.\n+\t(builtin_decsription): Add new field mask which is used to determine\n+\twhen to define the builtin via the macro def_builtin.\n+\n+\t(bdesc_comi): Initialise new mask fields.\n+\t(bdesc_2srg): Likewise.\n+\t(bdesc_1arg): Likewise.\n+\n 2001-09-25  Graham Stott  <grahams@redhat.com>\n \n \t* sibcall.c (skip_copy_to_return_value): Tighten return value"}, {"sha": "1dfa799d05e83d4c3a7e8df3d7728efef4602d66", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 215, "deletions": 215, "changes": 430, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eeb06b1bda88e2f16a75d75d8095753bdd3966c0/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eeb06b1bda88e2f16a75d75d8095753bdd3966c0/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=eeb06b1bda88e2f16a75d75d8095753bdd3966c0", "patch": "@@ -10181,11 +10181,16 @@ x86_initialize_trampoline (tramp, fnaddr, cxt)\n \tabort();\n     }\n }\n+\f\n+#define def_builtin(MASK, NAME, TYPE, CODE)\t\t\t\t\\\n+do {\t\t\t\t\t\t\t\t\t\\\n+  if ((MASK) & target_flags)\t\t\t\t\t\t\\\n+    builtin_function ((NAME), (TYPE), (CODE), BUILT_IN_MD, NULL);\t\\\n+} while (0)\n \n-#define def_builtin(NAME, TYPE, CODE) \\\n-  builtin_function ((NAME), (TYPE), (CODE), BUILT_IN_MD, NULL)\n struct builtin_description\n {\n+  unsigned int mask;\n   enum insn_code icode;\n   const char * name;\n   enum ix86_builtins code;\n@@ -10195,170 +10200,169 @@ struct builtin_description\n \n static struct builtin_description bdesc_comi[] =\n {\n-  { CODE_FOR_sse_comi, \"__builtin_ia32_comieq\", IX86_BUILTIN_COMIEQSS, EQ, 0 },\n-  { CODE_FOR_sse_comi, \"__builtin_ia32_comilt\", IX86_BUILTIN_COMILTSS, LT, 0 },\n-  { CODE_FOR_sse_comi, \"__builtin_ia32_comile\", IX86_BUILTIN_COMILESS, LE, 0 },\n-  { CODE_FOR_sse_comi, \"__builtin_ia32_comigt\", IX86_BUILTIN_COMIGTSS, LT, 1 },\n-  { CODE_FOR_sse_comi, \"__builtin_ia32_comige\", IX86_BUILTIN_COMIGESS, LE, 1 },\n-  { CODE_FOR_sse_comi, \"__builtin_ia32_comineq\", IX86_BUILTIN_COMINEQSS, NE, 0 },\n-  { CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomieq\", IX86_BUILTIN_UCOMIEQSS, EQ, 0 },\n-  { CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomilt\", IX86_BUILTIN_UCOMILTSS, LT, 0 },\n-  { CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomile\", IX86_BUILTIN_UCOMILESS, LE, 0 },\n-  { CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomigt\", IX86_BUILTIN_UCOMIGTSS, LT, 1 },\n-  { CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomige\", IX86_BUILTIN_UCOMIGESS, LE, 1 },\n-  { CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomineq\", IX86_BUILTIN_UCOMINEQSS, NE, 0 }\n+  { MASK_SSE, CODE_FOR_sse_comi, \"__builtin_ia32_comieq\", IX86_BUILTIN_COMIEQSS, EQ, 0 },\n+  { MASK_SSE, CODE_FOR_sse_comi, \"__builtin_ia32_comilt\", IX86_BUILTIN_COMILTSS, LT, 0 },\n+  { MASK_SSE, CODE_FOR_sse_comi, \"__builtin_ia32_comile\", IX86_BUILTIN_COMILESS, LE, 0 },\n+  { MASK_SSE, CODE_FOR_sse_comi, \"__builtin_ia32_comigt\", IX86_BUILTIN_COMIGTSS, LT, 1 },\n+  { MASK_SSE, CODE_FOR_sse_comi, \"__builtin_ia32_comige\", IX86_BUILTIN_COMIGESS, LE, 1 },\n+  { MASK_SSE, CODE_FOR_sse_comi, \"__builtin_ia32_comineq\", IX86_BUILTIN_COMINEQSS, NE, 0 },\n+  { MASK_SSE, CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomieq\", IX86_BUILTIN_UCOMIEQSS, EQ, 0 },\n+  { MASK_SSE, CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomilt\", IX86_BUILTIN_UCOMILTSS, LT, 0 },\n+  { MASK_SSE, CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomile\", IX86_BUILTIN_UCOMILESS, LE, 0 },\n+  { MASK_SSE, CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomigt\", IX86_BUILTIN_UCOMIGTSS, LT, 1 },\n+  { MASK_SSE, CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomige\", IX86_BUILTIN_UCOMIGESS, LE, 1 },\n+  { MASK_SSE, CODE_FOR_sse_ucomi, \"__builtin_ia32_ucomineq\", IX86_BUILTIN_UCOMINEQSS, NE, 0 }\n };\n \n static struct builtin_description bdesc_2arg[] =\n {\n   /* SSE */\n-  { CODE_FOR_addv4sf3, \"__builtin_ia32_addps\", IX86_BUILTIN_ADDPS, 0, 0 },\n-  { CODE_FOR_subv4sf3, \"__builtin_ia32_subps\", IX86_BUILTIN_SUBPS, 0, 0 },\n-  { CODE_FOR_mulv4sf3, \"__builtin_ia32_mulps\", IX86_BUILTIN_MULPS, 0, 0 },\n-  { CODE_FOR_divv4sf3, \"__builtin_ia32_divps\", IX86_BUILTIN_DIVPS, 0, 0 },\n-  { CODE_FOR_vmaddv4sf3,  \"__builtin_ia32_addss\", IX86_BUILTIN_ADDSS, 0, 0 },\n-  { CODE_FOR_vmsubv4sf3,  \"__builtin_ia32_subss\", IX86_BUILTIN_SUBSS, 0, 0 },\n-  { CODE_FOR_vmmulv4sf3,  \"__builtin_ia32_mulss\", IX86_BUILTIN_MULSS, 0, 0 },\n-  { CODE_FOR_vmdivv4sf3,  \"__builtin_ia32_divss\", IX86_BUILTIN_DIVSS, 0, 0 },\n-\n-  { CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpeqps\", IX86_BUILTIN_CMPEQPS, EQ, 0 },\n-  { CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpltps\", IX86_BUILTIN_CMPLTPS, LT, 0 },\n-  { CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpleps\", IX86_BUILTIN_CMPLEPS, LE, 0 },\n-  { CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpgtps\", IX86_BUILTIN_CMPGTPS, LT, 1 },\n-  { CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpgeps\", IX86_BUILTIN_CMPGEPS, LE, 1 },\n-  { CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpunordps\", IX86_BUILTIN_CMPUNORDPS, UNORDERED, 0 },\n-  { CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpneqps\", IX86_BUILTIN_CMPNEQPS, EQ, 0 },\n-  { CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpnltps\", IX86_BUILTIN_CMPNLTPS, LT, 0 },\n-  { CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpnleps\", IX86_BUILTIN_CMPNLEPS, LE, 0 },\n-  { CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpngtps\", IX86_BUILTIN_CMPNGTPS, LT, 1 },\n-  { CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpngeps\", IX86_BUILTIN_CMPNGEPS, LE, 1 },\n-  { CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpordps\", IX86_BUILTIN_CMPORDPS, UNORDERED, 0 },\n-  { CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpeqss\", IX86_BUILTIN_CMPEQSS, EQ, 0 },\n-  { CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpltss\", IX86_BUILTIN_CMPLTSS, LT, 0 },\n-  { CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpless\", IX86_BUILTIN_CMPLESS, LE, 0 },\n-  { CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpgtss\", IX86_BUILTIN_CMPGTSS, LT, 1 },\n-  { CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpgess\", IX86_BUILTIN_CMPGESS, LE, 1 },\n-  { CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpunordss\", IX86_BUILTIN_CMPUNORDSS, UNORDERED, 0 },\n-  { CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpneqss\", IX86_BUILTIN_CMPNEQSS, EQ, 0 },\n-  { CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpnltss\", IX86_BUILTIN_CMPNLTSS, LT, 0 },\n-  { CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpnless\", IX86_BUILTIN_CMPNLESS, LE, 0 },\n-  { CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpngtss\", IX86_BUILTIN_CMPNGTSS, LT, 1 },\n-  { CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpngess\", IX86_BUILTIN_CMPNGESS, LE, 1 },\n-  { CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpordss\", IX86_BUILTIN_CMPORDSS, UNORDERED, 0 },\n-\n-  { CODE_FOR_sminv4sf3, \"__builtin_ia32_minps\", IX86_BUILTIN_MINPS, 0, 0 },\n-  { CODE_FOR_smaxv4sf3, \"__builtin_ia32_maxps\", IX86_BUILTIN_MAXPS, 0, 0 },\n-  { CODE_FOR_vmsminv4sf3, \"__builtin_ia32_minss\", IX86_BUILTIN_MINSS, 0, 0 },\n-  { CODE_FOR_vmsmaxv4sf3, \"__builtin_ia32_maxss\", IX86_BUILTIN_MAXSS, 0, 0 },\n-\n-  { CODE_FOR_sse_andti3, \"__builtin_ia32_andps\", IX86_BUILTIN_ANDPS, 0, 0 },\n-  { CODE_FOR_sse_nandti3,  \"__builtin_ia32_andnps\", IX86_BUILTIN_ANDNPS, 0, 0 },\n-  { CODE_FOR_sse_iorti3, \"__builtin_ia32_orps\", IX86_BUILTIN_ORPS, 0, 0 },\n-  { CODE_FOR_sse_xorti3,  \"__builtin_ia32_xorps\", IX86_BUILTIN_XORPS, 0, 0 },\n-\n-  { CODE_FOR_sse_movss,  \"__builtin_ia32_movss\", IX86_BUILTIN_MOVSS, 0, 0 },\n-  { CODE_FOR_sse_movhlps,  \"__builtin_ia32_movhlps\", IX86_BUILTIN_MOVHLPS, 0, 0 },\n-  { CODE_FOR_sse_movlhps,  \"__builtin_ia32_movlhps\", IX86_BUILTIN_MOVLHPS, 0, 0 },\n-  { CODE_FOR_sse_unpckhps, \"__builtin_ia32_unpckhps\", IX86_BUILTIN_UNPCKHPS, 0, 0 },\n-  { CODE_FOR_sse_unpcklps, \"__builtin_ia32_unpcklps\", IX86_BUILTIN_UNPCKLPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_addv4sf3, \"__builtin_ia32_addps\", IX86_BUILTIN_ADDPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_subv4sf3, \"__builtin_ia32_subps\", IX86_BUILTIN_SUBPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_mulv4sf3, \"__builtin_ia32_mulps\", IX86_BUILTIN_MULPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_divv4sf3, \"__builtin_ia32_divps\", IX86_BUILTIN_DIVPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_vmaddv4sf3,  \"__builtin_ia32_addss\", IX86_BUILTIN_ADDSS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_vmsubv4sf3,  \"__builtin_ia32_subss\", IX86_BUILTIN_SUBSS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_vmmulv4sf3,  \"__builtin_ia32_mulss\", IX86_BUILTIN_MULSS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_vmdivv4sf3,  \"__builtin_ia32_divss\", IX86_BUILTIN_DIVSS, 0, 0 },\n+\n+  { MASK_SSE, CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpeqps\", IX86_BUILTIN_CMPEQPS, EQ, 0 },\n+  { MASK_SSE, CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpltps\", IX86_BUILTIN_CMPLTPS, LT, 0 },\n+  { MASK_SSE, CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpleps\", IX86_BUILTIN_CMPLEPS, LE, 0 },\n+  { MASK_SSE, CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpgtps\", IX86_BUILTIN_CMPGTPS, LT, 1 },\n+  { MASK_SSE, CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpgeps\", IX86_BUILTIN_CMPGEPS, LE, 1 },\n+  { MASK_SSE, CODE_FOR_maskcmpv4sf3, \"__builtin_ia32_cmpunordps\", IX86_BUILTIN_CMPUNORDPS, UNORDERED, 0 },\n+  { MASK_SSE, CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpneqps\", IX86_BUILTIN_CMPNEQPS, EQ, 0 },\n+  { MASK_SSE, CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpnltps\", IX86_BUILTIN_CMPNLTPS, LT, 0 },\n+  { MASK_SSE, CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpnleps\", IX86_BUILTIN_CMPNLEPS, LE, 0 },\n+  { MASK_SSE, CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpngtps\", IX86_BUILTIN_CMPNGTPS, LT, 1 },\n+  { MASK_SSE, CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpngeps\", IX86_BUILTIN_CMPNGEPS, LE, 1 },\n+  { MASK_SSE, CODE_FOR_maskncmpv4sf3, \"__builtin_ia32_cmpordps\", IX86_BUILTIN_CMPORDPS, UNORDERED, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpeqss\", IX86_BUILTIN_CMPEQSS, EQ, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpltss\", IX86_BUILTIN_CMPLTSS, LT, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpless\", IX86_BUILTIN_CMPLESS, LE, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpgtss\", IX86_BUILTIN_CMPGTSS, LT, 1 },\n+  { MASK_SSE, CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpgess\", IX86_BUILTIN_CMPGESS, LE, 1 },\n+  { MASK_SSE, CODE_FOR_vmmaskcmpv4sf3, \"__builtin_ia32_cmpunordss\", IX86_BUILTIN_CMPUNORDSS, UNORDERED, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpneqss\", IX86_BUILTIN_CMPNEQSS, EQ, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpnltss\", IX86_BUILTIN_CMPNLTSS, LT, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpnless\", IX86_BUILTIN_CMPNLESS, LE, 0 },\n+  { MASK_SSE, CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpngtss\", IX86_BUILTIN_CMPNGTSS, LT, 1 },\n+  { MASK_SSE, CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpngess\", IX86_BUILTIN_CMPNGESS, LE, 1 },\n+  { MASK_SSE, CODE_FOR_vmmaskncmpv4sf3, \"__builtin_ia32_cmpordss\", IX86_BUILTIN_CMPORDSS, UNORDERED, 0 },\n+\n+  { MASK_SSE, CODE_FOR_sminv4sf3, \"__builtin_ia32_minps\", IX86_BUILTIN_MINPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_smaxv4sf3, \"__builtin_ia32_maxps\", IX86_BUILTIN_MAXPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_vmsminv4sf3, \"__builtin_ia32_minss\", IX86_BUILTIN_MINSS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_vmsmaxv4sf3, \"__builtin_ia32_maxss\", IX86_BUILTIN_MAXSS, 0, 0 },\n+\n+  { MASK_SSE, CODE_FOR_sse_andti3, \"__builtin_ia32_andps\", IX86_BUILTIN_ANDPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_nandti3,  \"__builtin_ia32_andnps\", IX86_BUILTIN_ANDNPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_iorti3, \"__builtin_ia32_orps\", IX86_BUILTIN_ORPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_xorti3,  \"__builtin_ia32_xorps\", IX86_BUILTIN_XORPS, 0, 0 },\n+\n+  { MASK_SSE, CODE_FOR_sse_movss,  \"__builtin_ia32_movss\", IX86_BUILTIN_MOVSS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_movhlps,  \"__builtin_ia32_movhlps\", IX86_BUILTIN_MOVHLPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_movlhps,  \"__builtin_ia32_movlhps\", IX86_BUILTIN_MOVLHPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_unpckhps, \"__builtin_ia32_unpckhps\", IX86_BUILTIN_UNPCKHPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_unpcklps, \"__builtin_ia32_unpcklps\", IX86_BUILTIN_UNPCKLPS, 0, 0 },\n \n   /* MMX */\n-  { CODE_FOR_addv8qi3, \"__builtin_ia32_paddb\", IX86_BUILTIN_PADDB, 0, 0 },\n-  { CODE_FOR_addv4hi3, \"__builtin_ia32_paddw\", IX86_BUILTIN_PADDW, 0, 0 },\n-  { CODE_FOR_addv2si3, \"__builtin_ia32_paddd\", IX86_BUILTIN_PADDD, 0, 0 },\n-  { CODE_FOR_subv8qi3, \"__builtin_ia32_psubb\", IX86_BUILTIN_PSUBB, 0, 0 },\n-  { CODE_FOR_subv4hi3, \"__builtin_ia32_psubw\", IX86_BUILTIN_PSUBW, 0, 0 },\n-  { CODE_FOR_subv2si3, \"__builtin_ia32_psubd\", IX86_BUILTIN_PSUBD, 0, 0 },\n-\n-  { CODE_FOR_ssaddv8qi3, \"__builtin_ia32_paddsb\", IX86_BUILTIN_PADDSB, 0, 0 },\n-  { CODE_FOR_ssaddv4hi3, \"__builtin_ia32_paddsw\", IX86_BUILTIN_PADDSW, 0, 0 },\n-  { CODE_FOR_sssubv8qi3, \"__builtin_ia32_psubsb\", IX86_BUILTIN_PSUBSB, 0, 0 },\n-  { CODE_FOR_sssubv4hi3, \"__builtin_ia32_psubsw\", IX86_BUILTIN_PSUBSW, 0, 0 },\n-  { CODE_FOR_usaddv8qi3, \"__builtin_ia32_paddusb\", IX86_BUILTIN_PADDUSB, 0, 0 },\n-  { CODE_FOR_usaddv4hi3, \"__builtin_ia32_paddusw\", IX86_BUILTIN_PADDUSW, 0, 0 },\n-  { CODE_FOR_ussubv8qi3, \"__builtin_ia32_psubusb\", IX86_BUILTIN_PSUBUSB, 0, 0 },\n-  { CODE_FOR_ussubv4hi3, \"__builtin_ia32_psubusw\", IX86_BUILTIN_PSUBUSW, 0, 0 },\n-\n-  { CODE_FOR_mulv4hi3, \"__builtin_ia32_pmullw\", IX86_BUILTIN_PMULLW, 0, 0 },\n-  { CODE_FOR_smulv4hi3_highpart, \"__builtin_ia32_pmulhw\", IX86_BUILTIN_PMULHW, 0, 0 },\n-  { CODE_FOR_umulv4hi3_highpart, \"__builtin_ia32_pmulhuw\", IX86_BUILTIN_PMULHUW, 0, 0 },\n-\n-  { CODE_FOR_mmx_anddi3, \"__builtin_ia32_pand\", IX86_BUILTIN_PAND, 0, 0 },\n-  { CODE_FOR_mmx_nanddi3, \"__builtin_ia32_pandn\", IX86_BUILTIN_PANDN, 0, 0 },\n-  { CODE_FOR_mmx_iordi3, \"__builtin_ia32_por\", IX86_BUILTIN_POR, 0, 0 },\n-  { CODE_FOR_mmx_xordi3, \"__builtin_ia32_pxor\", IX86_BUILTIN_PXOR, 0, 0 },\n-\n-  { CODE_FOR_mmx_uavgv8qi3, \"__builtin_ia32_pavgb\", IX86_BUILTIN_PAVGB, 0, 0 },\n-  { CODE_FOR_mmx_uavgv4hi3, \"__builtin_ia32_pavgw\", IX86_BUILTIN_PAVGW, 0, 0 },\n-\n-  { CODE_FOR_eqv8qi3, \"__builtin_ia32_pcmpeqb\", IX86_BUILTIN_PCMPEQB, 0, 0 },\n-  { CODE_FOR_eqv4hi3, \"__builtin_ia32_pcmpeqw\", IX86_BUILTIN_PCMPEQW, 0, 0 },\n-  { CODE_FOR_eqv2si3, \"__builtin_ia32_pcmpeqd\", IX86_BUILTIN_PCMPEQD, 0, 0 },\n-  { CODE_FOR_gtv8qi3, \"__builtin_ia32_pcmpgtb\", IX86_BUILTIN_PCMPGTB, 0, 0 },\n-  { CODE_FOR_gtv4hi3, \"__builtin_ia32_pcmpgtw\", IX86_BUILTIN_PCMPGTW, 0, 0 },\n-  { CODE_FOR_gtv2si3, \"__builtin_ia32_pcmpgtd\", IX86_BUILTIN_PCMPGTD, 0, 0 },\n-\n-  { CODE_FOR_umaxv8qi3, \"__builtin_ia32_pmaxub\", IX86_BUILTIN_PMAXUB, 0, 0 },\n-  { CODE_FOR_smaxv4hi3, \"__builtin_ia32_pmaxsw\", IX86_BUILTIN_PMAXSW, 0, 0 },\n-  { CODE_FOR_uminv8qi3, \"__builtin_ia32_pminub\", IX86_BUILTIN_PMINUB, 0, 0 },\n-  { CODE_FOR_sminv4hi3, \"__builtin_ia32_pminsw\", IX86_BUILTIN_PMINSW, 0, 0 },\n-\n-  { CODE_FOR_mmx_punpckhbw, \"__builtin_ia32_punpckhbw\", IX86_BUILTIN_PUNPCKHBW, 0, 0 },\n-  { CODE_FOR_mmx_punpckhwd, \"__builtin_ia32_punpckhwd\", IX86_BUILTIN_PUNPCKHWD, 0, 0 },\n-  { CODE_FOR_mmx_punpckhdq, \"__builtin_ia32_punpckhdq\", IX86_BUILTIN_PUNPCKHDQ, 0, 0 },\n-  { CODE_FOR_mmx_punpcklbw, \"__builtin_ia32_punpcklbw\", IX86_BUILTIN_PUNPCKLBW, 0, 0 },\n-  { CODE_FOR_mmx_punpcklwd, \"__builtin_ia32_punpcklwd\", IX86_BUILTIN_PUNPCKLWD, 0, 0 },\n-  { CODE_FOR_mmx_punpckldq, \"__builtin_ia32_punpckldq\", IX86_BUILTIN_PUNPCKLDQ, 0, 0 },\n+  { MASK_MMX, CODE_FOR_addv8qi3, \"__builtin_ia32_paddb\", IX86_BUILTIN_PADDB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_addv4hi3, \"__builtin_ia32_paddw\", IX86_BUILTIN_PADDW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_addv2si3, \"__builtin_ia32_paddd\", IX86_BUILTIN_PADDD, 0, 0 },\n+  { MASK_MMX, CODE_FOR_subv8qi3, \"__builtin_ia32_psubb\", IX86_BUILTIN_PSUBB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_subv4hi3, \"__builtin_ia32_psubw\", IX86_BUILTIN_PSUBW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_subv2si3, \"__builtin_ia32_psubd\", IX86_BUILTIN_PSUBD, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_ssaddv8qi3, \"__builtin_ia32_paddsb\", IX86_BUILTIN_PADDSB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ssaddv4hi3, \"__builtin_ia32_paddsw\", IX86_BUILTIN_PADDSW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_sssubv8qi3, \"__builtin_ia32_psubsb\", IX86_BUILTIN_PSUBSB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_sssubv4hi3, \"__builtin_ia32_psubsw\", IX86_BUILTIN_PSUBSW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_usaddv8qi3, \"__builtin_ia32_paddusb\", IX86_BUILTIN_PADDUSB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_usaddv4hi3, \"__builtin_ia32_paddusw\", IX86_BUILTIN_PADDUSW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ussubv8qi3, \"__builtin_ia32_psubusb\", IX86_BUILTIN_PSUBUSB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ussubv4hi3, \"__builtin_ia32_psubusw\", IX86_BUILTIN_PSUBUSW, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_mulv4hi3, \"__builtin_ia32_pmullw\", IX86_BUILTIN_PMULLW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_smulv4hi3_highpart, \"__builtin_ia32_pmulhw\", IX86_BUILTIN_PMULHW, 0, 0 },\n+  { MASK_SSE, CODE_FOR_umulv4hi3_highpart, \"__builtin_ia32_pmulhuw\", IX86_BUILTIN_PMULHUW, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_mmx_anddi3, \"__builtin_ia32_pand\", IX86_BUILTIN_PAND, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_nanddi3, \"__builtin_ia32_pandn\", IX86_BUILTIN_PANDN, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_iordi3, \"__builtin_ia32_por\", IX86_BUILTIN_POR, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_xordi3, \"__builtin_ia32_pxor\", IX86_BUILTIN_PXOR, 0, 0 },\n+\n+  { MASK_SSE, CODE_FOR_mmx_uavgv8qi3, \"__builtin_ia32_pavgb\", IX86_BUILTIN_PAVGB, 0, 0 },\n+  { MASK_SSE, CODE_FOR_mmx_uavgv4hi3, \"__builtin_ia32_pavgw\", IX86_BUILTIN_PAVGW, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_eqv8qi3, \"__builtin_ia32_pcmpeqb\", IX86_BUILTIN_PCMPEQB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_eqv4hi3, \"__builtin_ia32_pcmpeqw\", IX86_BUILTIN_PCMPEQW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_eqv2si3, \"__builtin_ia32_pcmpeqd\", IX86_BUILTIN_PCMPEQD, 0, 0 },\n+  { MASK_MMX, CODE_FOR_gtv8qi3, \"__builtin_ia32_pcmpgtb\", IX86_BUILTIN_PCMPGTB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_gtv4hi3, \"__builtin_ia32_pcmpgtw\", IX86_BUILTIN_PCMPGTW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_gtv2si3, \"__builtin_ia32_pcmpgtd\", IX86_BUILTIN_PCMPGTD, 0, 0 },\n+\n+  { MASK_SSE, CODE_FOR_umaxv8qi3, \"__builtin_ia32_pmaxub\", IX86_BUILTIN_PMAXUB, 0, 0 },\n+  { MASK_SSE, CODE_FOR_smaxv4hi3, \"__builtin_ia32_pmaxsw\", IX86_BUILTIN_PMAXSW, 0, 0 },\n+  { MASK_SSE, CODE_FOR_uminv8qi3, \"__builtin_ia32_pminub\", IX86_BUILTIN_PMINUB, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sminv4hi3, \"__builtin_ia32_pminsw\", IX86_BUILTIN_PMINSW, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_mmx_punpckhbw, \"__builtin_ia32_punpckhbw\", IX86_BUILTIN_PUNPCKHBW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_punpckhwd, \"__builtin_ia32_punpckhwd\", IX86_BUILTIN_PUNPCKHWD, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_punpckhdq, \"__builtin_ia32_punpckhdq\", IX86_BUILTIN_PUNPCKHDQ, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_punpcklbw, \"__builtin_ia32_punpcklbw\", IX86_BUILTIN_PUNPCKLBW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_punpcklwd, \"__builtin_ia32_punpcklwd\", IX86_BUILTIN_PUNPCKLWD, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_punpckldq, \"__builtin_ia32_punpckldq\", IX86_BUILTIN_PUNPCKLDQ, 0, 0 },\n \n   /* Special.  */\n-  { CODE_FOR_mmx_packsswb, 0, IX86_BUILTIN_PACKSSWB, 0, 0 },\n-  { CODE_FOR_mmx_packssdw, 0, IX86_BUILTIN_PACKSSDW, 0, 0 },\n-  { CODE_FOR_mmx_packuswb, 0, IX86_BUILTIN_PACKUSWB, 0, 0 },\n-\n-  { CODE_FOR_cvtpi2ps, 0, IX86_BUILTIN_CVTPI2PS, 0, 0 },\n-  { CODE_FOR_cvtsi2ss, 0, IX86_BUILTIN_CVTSI2SS, 0, 0 },\n-\n-  { CODE_FOR_ashlv4hi3, 0, IX86_BUILTIN_PSLLW, 0, 0 },\n-  { CODE_FOR_ashlv4hi3, 0, IX86_BUILTIN_PSLLWI, 0, 0 },\n-  { CODE_FOR_ashlv2si3, 0, IX86_BUILTIN_PSLLD, 0, 0 },\n-  { CODE_FOR_ashlv2si3, 0, IX86_BUILTIN_PSLLDI, 0, 0 },\n-  { CODE_FOR_mmx_ashldi3, 0, IX86_BUILTIN_PSLLQ, 0, 0 },\n-  { CODE_FOR_mmx_ashldi3, 0, IX86_BUILTIN_PSLLQI, 0, 0 },\n-\n-  { CODE_FOR_lshrv4hi3, 0, IX86_BUILTIN_PSRLW, 0, 0 },\n-  { CODE_FOR_lshrv4hi3, 0, IX86_BUILTIN_PSRLWI, 0, 0 },\n-  { CODE_FOR_lshrv2si3, 0, IX86_BUILTIN_PSRLD, 0, 0 },\n-  { CODE_FOR_lshrv2si3, 0, IX86_BUILTIN_PSRLDI, 0, 0 },\n-  { CODE_FOR_mmx_lshrdi3, 0, IX86_BUILTIN_PSRLQ, 0, 0 },\n-  { CODE_FOR_mmx_lshrdi3, 0, IX86_BUILTIN_PSRLQI, 0, 0 },\n-\n-  { CODE_FOR_ashrv4hi3, 0, IX86_BUILTIN_PSRAW, 0, 0 },\n-  { CODE_FOR_ashrv4hi3, 0, IX86_BUILTIN_PSRAWI, 0, 0 },\n-  { CODE_FOR_ashrv2si3, 0, IX86_BUILTIN_PSRAD, 0, 0 },\n-  { CODE_FOR_ashrv2si3, 0, IX86_BUILTIN_PSRADI, 0, 0 },\n-\n-  { CODE_FOR_mmx_psadbw, 0, IX86_BUILTIN_PSADBW, 0, 0 },\n-  { CODE_FOR_mmx_pmaddwd, 0, IX86_BUILTIN_PMADDWD, 0, 0 }\n+  { MASK_MMX, CODE_FOR_mmx_packsswb, 0, IX86_BUILTIN_PACKSSWB, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_packssdw, 0, IX86_BUILTIN_PACKSSDW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_packuswb, 0, IX86_BUILTIN_PACKUSWB, 0, 0 },\n+\n+  { MASK_SSE, CODE_FOR_cvtpi2ps, 0, IX86_BUILTIN_CVTPI2PS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_cvtsi2ss, 0, IX86_BUILTIN_CVTSI2SS, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_ashlv4hi3, 0, IX86_BUILTIN_PSLLW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ashlv4hi3, 0, IX86_BUILTIN_PSLLWI, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ashlv2si3, 0, IX86_BUILTIN_PSLLD, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ashlv2si3, 0, IX86_BUILTIN_PSLLDI, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_ashldi3, 0, IX86_BUILTIN_PSLLQ, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_ashldi3, 0, IX86_BUILTIN_PSLLQI, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_lshrv4hi3, 0, IX86_BUILTIN_PSRLW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_lshrv4hi3, 0, IX86_BUILTIN_PSRLWI, 0, 0 },\n+  { MASK_MMX, CODE_FOR_lshrv2si3, 0, IX86_BUILTIN_PSRLD, 0, 0 },\n+  { MASK_MMX, CODE_FOR_lshrv2si3, 0, IX86_BUILTIN_PSRLDI, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_lshrdi3, 0, IX86_BUILTIN_PSRLQ, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_lshrdi3, 0, IX86_BUILTIN_PSRLQI, 0, 0 },\n+\n+  { MASK_MMX, CODE_FOR_ashrv4hi3, 0, IX86_BUILTIN_PSRAW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ashrv4hi3, 0, IX86_BUILTIN_PSRAWI, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ashrv2si3, 0, IX86_BUILTIN_PSRAD, 0, 0 },\n+  { MASK_MMX, CODE_FOR_ashrv2si3, 0, IX86_BUILTIN_PSRADI, 0, 0 },\n+\n+  { MASK_SSE, CODE_FOR_mmx_psadbw, 0, IX86_BUILTIN_PSADBW, 0, 0 },\n+  { MASK_MMX, CODE_FOR_mmx_pmaddwd, 0, IX86_BUILTIN_PMADDWD, 0, 0 }\n \n };\n \n static struct builtin_description bdesc_1arg[] =\n {\n-  { CODE_FOR_mmx_pmovmskb, 0, IX86_BUILTIN_PMOVMSKB, 0, 0 },\n-  { CODE_FOR_sse_movmskps, 0, IX86_BUILTIN_MOVMSKPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_mmx_pmovmskb, 0, IX86_BUILTIN_PMOVMSKB, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sse_movmskps, 0, IX86_BUILTIN_MOVMSKPS, 0, 0 },\n \n-  { CODE_FOR_sqrtv4sf2, 0, IX86_BUILTIN_SQRTPS, 0, 0 },\n-  { CODE_FOR_rsqrtv4sf2, 0, IX86_BUILTIN_RSQRTPS, 0, 0 },\n-  { CODE_FOR_rcpv4sf2, 0, IX86_BUILTIN_RCPPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_sqrtv4sf2, 0, IX86_BUILTIN_SQRTPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_rsqrtv4sf2, 0, IX86_BUILTIN_RSQRTPS, 0, 0 },\n+  { MASK_SSE, CODE_FOR_rcpv4sf2, 0, IX86_BUILTIN_RCPPS, 0, 0 },\n \n-  { CODE_FOR_cvtps2pi, 0, IX86_BUILTIN_CVTPS2PI, 0, 0 },\n-  { CODE_FOR_cvtss2si, 0, IX86_BUILTIN_CVTSS2SI, 0, 0 },\n-  { CODE_FOR_cvttps2pi, 0, IX86_BUILTIN_CVTTPS2PI, 0, 0 },\n-  { CODE_FOR_cvttss2si, 0, IX86_BUILTIN_CVTTSS2SI, 0, 0 }\n+  { MASK_SSE, CODE_FOR_cvtps2pi, 0, IX86_BUILTIN_CVTPS2PI, 0, 0 },\n+  { MASK_SSE, CODE_FOR_cvtss2si, 0, IX86_BUILTIN_CVTSS2SI, 0, 0 },\n+  { MASK_SSE, CODE_FOR_cvttps2pi, 0, IX86_BUILTIN_CVTTPS2PI, 0, 0 },\n+  { MASK_SSE, CODE_FOR_cvttss2si, 0, IX86_BUILTIN_CVTTSS2SI, 0, 0 }\n \n };\n \n-/* Set up all the target-specific builtins.  */\n void\n ix86_init_builtins ()\n {\n@@ -10633,93 +10637,89 @@ ix86_init_mmx_sse_builtins ()\n \t  || d->icode == CODE_FOR_vmmaskncmpv4sf3)\n \ttype = v4si_ftype_v4sf_v4sf;\n \n-      def_builtin (d->name, type, d->code);\n+      def_builtin (d->mask, d->name, type, d->code);\n     }\n \n   /* Add the remaining MMX insns with somewhat more complicated types.  */\n-  def_builtin (\"__builtin_ia32_m_from_int\", v2si_ftype_int, IX86_BUILTIN_M_FROM_INT);\n-  def_builtin (\"__builtin_ia32_m_to_int\", int_ftype_v2si, IX86_BUILTIN_M_TO_INT);\n-  def_builtin (\"__builtin_ia32_mmx_zero\", di_ftype_void, IX86_BUILTIN_MMX_ZERO);\n-  def_builtin (\"__builtin_ia32_emms\", void_ftype_void, IX86_BUILTIN_EMMS);\n-  def_builtin (\"__builtin_ia32_ldmxcsr\", void_ftype_unsigned, IX86_BUILTIN_LDMXCSR);\n-  def_builtin (\"__builtin_ia32_stmxcsr\", unsigned_ftype_void, IX86_BUILTIN_STMXCSR);\n-  def_builtin (\"__builtin_ia32_psllw\", v4hi_ftype_v4hi_di, IX86_BUILTIN_PSLLW);\n-  def_builtin (\"__builtin_ia32_pslld\", v2si_ftype_v2si_di, IX86_BUILTIN_PSLLD);\n-  def_builtin (\"__builtin_ia32_psllq\", di_ftype_di_di, IX86_BUILTIN_PSLLQ);\n-\n-  def_builtin (\"__builtin_ia32_psrlw\", v4hi_ftype_v4hi_di, IX86_BUILTIN_PSRLW);\n-  def_builtin (\"__builtin_ia32_psrld\", v2si_ftype_v2si_di, IX86_BUILTIN_PSRLD);\n-  def_builtin (\"__builtin_ia32_psrlq\", di_ftype_di_di, IX86_BUILTIN_PSRLQ);\n-\n-  def_builtin (\"__builtin_ia32_psraw\", v4hi_ftype_v4hi_di, IX86_BUILTIN_PSRAW);\n-  def_builtin (\"__builtin_ia32_psrad\", v2si_ftype_v2si_di, IX86_BUILTIN_PSRAD);\n-\n-  def_builtin (\"__builtin_ia32_pshufw\", v4hi_ftype_v4hi_int, IX86_BUILTIN_PSHUFW);\n-  def_builtin (\"__builtin_ia32_pmaddwd\", v2si_ftype_v4hi_v4hi, IX86_BUILTIN_PMADDWD);\n-\n-  /* Everything beyond this point is SSE only.  */\n-  if (! TARGET_SSE)\n-    return;\n+  def_builtin (MASK_MMX, \"__builtin_ia32_m_from_int\", v2si_ftype_int, IX86_BUILTIN_M_FROM_INT);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_m_to_int\", int_ftype_v2si, IX86_BUILTIN_M_TO_INT);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_mmx_zero\", di_ftype_void, IX86_BUILTIN_MMX_ZERO);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_emms\", void_ftype_void, IX86_BUILTIN_EMMS);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_ldmxcsr\", void_ftype_unsigned, IX86_BUILTIN_LDMXCSR);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_stmxcsr\", unsigned_ftype_void, IX86_BUILTIN_STMXCSR);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_psllw\", v4hi_ftype_v4hi_di, IX86_BUILTIN_PSLLW);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_pslld\", v2si_ftype_v2si_di, IX86_BUILTIN_PSLLD);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_psllq\", di_ftype_di_di, IX86_BUILTIN_PSLLQ);\n+\n+  def_builtin (MASK_MMX, \"__builtin_ia32_psrlw\", v4hi_ftype_v4hi_di, IX86_BUILTIN_PSRLW);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_psrld\", v2si_ftype_v2si_di, IX86_BUILTIN_PSRLD);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_psrlq\", di_ftype_di_di, IX86_BUILTIN_PSRLQ);\n+\n+  def_builtin (MASK_MMX, \"__builtin_ia32_psraw\", v4hi_ftype_v4hi_di, IX86_BUILTIN_PSRAW);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_psrad\", v2si_ftype_v2si_di, IX86_BUILTIN_PSRAD);\n+\n+  def_builtin (MASK_MMX, \"__builtin_ia32_pshufw\", v4hi_ftype_v4hi_int, IX86_BUILTIN_PSHUFW);\n+  def_builtin (MASK_MMX, \"__builtin_ia32_pmaddwd\", v2si_ftype_v4hi_v4hi, IX86_BUILTIN_PMADDWD);\n \n   /* comi/ucomi insns.  */\n   for (i = 0, d = bdesc_comi; i < sizeof (bdesc_comi) / sizeof *d; i++, d++)\n-    def_builtin (d->name, int_ftype_v4sf_v4sf, d->code);\n+    def_builtin (d->mask, d->name, int_ftype_v4sf_v4sf, d->code);\n \n-  def_builtin (\"__builtin_ia32_packsswb\", v8qi_ftype_v4hi_v4hi, IX86_BUILTIN_PACKSSWB);\n-  def_builtin (\"__builtin_ia32_packssdw\", v4hi_ftype_v2si_v2si, IX86_BUILTIN_PACKSSDW);\n-  def_builtin (\"__builtin_ia32_packuswb\", v8qi_ftype_v4hi_v4hi, IX86_BUILTIN_PACKUSWB);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_packsswb\", v8qi_ftype_v4hi_v4hi, IX86_BUILTIN_PACKSSWB);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_packssdw\", v4hi_ftype_v2si_v2si, IX86_BUILTIN_PACKSSDW);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_packuswb\", v8qi_ftype_v4hi_v4hi, IX86_BUILTIN_PACKUSWB);\n \n-  def_builtin (\"__builtin_ia32_cvtpi2ps\", v4sf_ftype_v4sf_v2si, IX86_BUILTIN_CVTPI2PS);\n-  def_builtin (\"__builtin_ia32_cvtps2pi\", v2si_ftype_v4sf, IX86_BUILTIN_CVTPS2PI);\n-  def_builtin (\"__builtin_ia32_cvtsi2ss\", v4sf_ftype_v4sf_int, IX86_BUILTIN_CVTSI2SS);\n-  def_builtin (\"__builtin_ia32_cvtss2si\", int_ftype_v4sf, IX86_BUILTIN_CVTSS2SI);\n-  def_builtin (\"__builtin_ia32_cvttps2pi\", v2si_ftype_v4sf, IX86_BUILTIN_CVTTPS2PI);\n-  def_builtin (\"__builtin_ia32_cvttss2si\", int_ftype_v4sf, IX86_BUILTIN_CVTTSS2SI);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_cvtpi2ps\", v4sf_ftype_v4sf_v2si, IX86_BUILTIN_CVTPI2PS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_cvtps2pi\", v2si_ftype_v4sf, IX86_BUILTIN_CVTPS2PI);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_cvtsi2ss\", v4sf_ftype_v4sf_int, IX86_BUILTIN_CVTSI2SS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_cvtss2si\", int_ftype_v4sf, IX86_BUILTIN_CVTSS2SI);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_cvttps2pi\", v2si_ftype_v4sf, IX86_BUILTIN_CVTTPS2PI);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_cvttss2si\", int_ftype_v4sf, IX86_BUILTIN_CVTTSS2SI);\n \n-  def_builtin (\"__builtin_ia32_pextrw\", int_ftype_v4hi_int, IX86_BUILTIN_PEXTRW);\n-  def_builtin (\"__builtin_ia32_pinsrw\", v4hi_ftype_v4hi_int_int, IX86_BUILTIN_PINSRW);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_pextrw\", int_ftype_v4hi_int, IX86_BUILTIN_PEXTRW);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_pinsrw\", v4hi_ftype_v4hi_int_int, IX86_BUILTIN_PINSRW);\n \n-  def_builtin (\"__builtin_ia32_maskmovq\", void_ftype_v8qi_v8qi_pchar, IX86_BUILTIN_MASKMOVQ);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_maskmovq\", void_ftype_v8qi_v8qi_pchar, IX86_BUILTIN_MASKMOVQ);\n \n-  def_builtin (\"__builtin_ia32_loadaps\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADAPS);\n-  def_builtin (\"__builtin_ia32_loadups\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADUPS);\n-  def_builtin (\"__builtin_ia32_loadss\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADSS);\n-  def_builtin (\"__builtin_ia32_storeaps\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STOREAPS);\n-  def_builtin (\"__builtin_ia32_storeups\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STOREUPS);\n-  def_builtin (\"__builtin_ia32_storess\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STORESS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_loadaps\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADAPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_loadups\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADUPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_loadss\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADSS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_storeaps\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STOREAPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_storeups\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STOREUPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_storess\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STORESS);\n \n-  def_builtin (\"__builtin_ia32_loadhps\", v4sf_ftype_v4sf_pv2si, IX86_BUILTIN_LOADHPS);\n-  def_builtin (\"__builtin_ia32_loadlps\", v4sf_ftype_v4sf_pv2si, IX86_BUILTIN_LOADLPS);\n-  def_builtin (\"__builtin_ia32_storehps\", v4sf_ftype_pv2si_v4sf, IX86_BUILTIN_STOREHPS);\n-  def_builtin (\"__builtin_ia32_storelps\", v4sf_ftype_pv2si_v4sf, IX86_BUILTIN_STORELPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_loadhps\", v4sf_ftype_v4sf_pv2si, IX86_BUILTIN_LOADHPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_loadlps\", v4sf_ftype_v4sf_pv2si, IX86_BUILTIN_LOADLPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_storehps\", v4sf_ftype_pv2si_v4sf, IX86_BUILTIN_STOREHPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_storelps\", v4sf_ftype_pv2si_v4sf, IX86_BUILTIN_STORELPS);\n \n-  def_builtin (\"__builtin_ia32_movmskps\", int_ftype_v4sf, IX86_BUILTIN_MOVMSKPS);\n-  def_builtin (\"__builtin_ia32_pmovmskb\", int_ftype_v8qi, IX86_BUILTIN_PMOVMSKB);\n-  def_builtin (\"__builtin_ia32_movntps\", void_ftype_pfloat_v4sf, IX86_BUILTIN_MOVNTPS);\n-  def_builtin (\"__builtin_ia32_movntq\", void_ftype_pdi_di, IX86_BUILTIN_MOVNTQ);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_movmskps\", int_ftype_v4sf, IX86_BUILTIN_MOVMSKPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_pmovmskb\", int_ftype_v8qi, IX86_BUILTIN_PMOVMSKB);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_movntps\", void_ftype_pfloat_v4sf, IX86_BUILTIN_MOVNTPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_movntq\", void_ftype_pdi_di, IX86_BUILTIN_MOVNTQ);\n \n-  def_builtin (\"__builtin_ia32_sfence\", void_ftype_void, IX86_BUILTIN_SFENCE);\n-  def_builtin (\"__builtin_ia32_prefetch\", void_ftype_pchar_int, IX86_BUILTIN_PREFETCH);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_sfence\", void_ftype_void, IX86_BUILTIN_SFENCE);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_prefetch\", void_ftype_pchar_int, IX86_BUILTIN_PREFETCH);\n \n-  def_builtin (\"__builtin_ia32_psadbw\", v4hi_ftype_v8qi_v8qi, IX86_BUILTIN_PSADBW);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_psadbw\", v4hi_ftype_v8qi_v8qi, IX86_BUILTIN_PSADBW);\n \n-  def_builtin (\"__builtin_ia32_rcpps\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPPS);\n-  def_builtin (\"__builtin_ia32_rcpss\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPSS);\n-  def_builtin (\"__builtin_ia32_rsqrtps\", v4sf_ftype_v4sf, IX86_BUILTIN_RSQRTPS);\n-  def_builtin (\"__builtin_ia32_rsqrtss\", v4sf_ftype_v4sf, IX86_BUILTIN_RSQRTSS);\n-  def_builtin (\"__builtin_ia32_sqrtps\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTPS);\n-  def_builtin (\"__builtin_ia32_sqrtss\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTSS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_rcpps\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_rcpss\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPSS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_rsqrtps\", v4sf_ftype_v4sf, IX86_BUILTIN_RSQRTPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_rsqrtss\", v4sf_ftype_v4sf, IX86_BUILTIN_RSQRTSS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_sqrtps\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_sqrtss\", v4sf_ftype_v4sf, IX86_BUILTIN_SQRTSS);\n \n-  def_builtin (\"__builtin_ia32_shufps\", v4sf_ftype_v4sf_v4sf_int, IX86_BUILTIN_SHUFPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_shufps\", v4sf_ftype_v4sf_v4sf_int, IX86_BUILTIN_SHUFPS);\n \n   /* Composite intrinsics.  */\n-  def_builtin (\"__builtin_ia32_setps1\", v4sf_ftype_float, IX86_BUILTIN_SETPS1);\n-  def_builtin (\"__builtin_ia32_setps\", v4sf_ftype_float_float_float_float, IX86_BUILTIN_SETPS);\n-  def_builtin (\"__builtin_ia32_setzerops\", ti_ftype_void, IX86_BUILTIN_CLRPS);\n-  def_builtin (\"__builtin_ia32_loadps1\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADPS1);\n-  def_builtin (\"__builtin_ia32_loadrps\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADRPS);\n-  def_builtin (\"__builtin_ia32_storeps1\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STOREPS1);\n-  def_builtin (\"__builtin_ia32_storerps\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STORERPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_setps1\", v4sf_ftype_float, IX86_BUILTIN_SETPS1);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_setps\", v4sf_ftype_float_float_float_float, IX86_BUILTIN_SETPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_setzerops\", ti_ftype_void, IX86_BUILTIN_CLRPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_loadps1\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADPS1);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_loadrps\", v4sf_ftype_pfloat, IX86_BUILTIN_LOADRPS);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_storeps1\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STOREPS1);\n+  def_builtin (MASK_SSE, \"__builtin_ia32_storerps\", void_ftype_pfloat_v4sf, IX86_BUILTIN_STORERPS);\n }\n \n /* Errors in the source file can cause expand_expr to return const0_rtx"}]}