{"sha": "c891b860da6589c40b7040252e9ffd3302b15ef4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg5MWI4NjBkYTY1ODljNDBiNzA0MDI1MmU5ZmZkMzMwMmIxNWVmNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2004-07-29T15:54:50Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2004-07-29T15:54:50Z"}, "message": "PR libstdc++/12658 (continued)\n\n2004-07-29  Paolo Carlini  <pcarlini@suse.de>\n            Petur Runolfsson  <peturr02@ru.is>\n\n\tPR libstdc++/12658 (continued)\n\t* src/locale_init.cc (locale::locale, locale::global): Use\n\ta single locale_mutex instead of two separate mutexes.\n\nCo-Authored-By: Petur Runolfsson <peturr02@ru.is>\n\nFrom-SVN: r85301", "tree": {"sha": "ced381a81b481b7230cd18dc06b89d8b5dec7910", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ced381a81b481b7230cd18dc06b89d8b5dec7910"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c891b860da6589c40b7040252e9ffd3302b15ef4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c891b860da6589c40b7040252e9ffd3302b15ef4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c891b860da6589c40b7040252e9ffd3302b15ef4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c891b860da6589c40b7040252e9ffd3302b15ef4/comments", "author": null, "committer": null, "parents": [{"sha": "727d709b73dbf2bcb675e33d8fab34e2b2218133", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/727d709b73dbf2bcb675e33d8fab34e2b2218133", "html_url": "https://github.com/Rust-GCC/gccrs/commit/727d709b73dbf2bcb675e33d8fab34e2b2218133"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "12a415fe92e6551bafe501eb38feeabc15bd53e3", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c891b860da6589c40b7040252e9ffd3302b15ef4/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c891b860da6589c40b7040252e9ffd3302b15ef4/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c891b860da6589c40b7040252e9ffd3302b15ef4", "patch": "@@ -1,3 +1,10 @@\n+2004-07-29  Paolo Carlini  <pcarlini@suse.de>\n+            Petur Runolfsson  <peturr02@ru.is>\n+\n+\tPR libstdc++/12658 (continued)\n+\t* src/locale_init.cc (locale::locale, locale::global): Use\n+\ta single locale_mutex instead of two separate mutexes.\n+\n 2004-07-29  Paolo Carlini  <pcarlini@suse.de>\n \n \tPR libstdc++/16813"}, {"sha": "fafe03af7abb23f491b51cd7c553c57695323d58", "filename": "libstdc++-v3/src/locale_init.cc", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c891b860da6589c40b7040252e9ffd3302b15ef4/libstdc%2B%2B-v3%2Fsrc%2Flocale_init.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c891b860da6589c40b7040252e9ffd3302b15ef4/libstdc%2B%2B-v3%2Fsrc%2Flocale_init.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Flocale_init.cc?ref=c891b860da6589c40b7040252e9ffd3302b15ef4", "patch": "@@ -89,9 +89,8 @@ namespace __gnu_internal\n   extern std::__timepunct_cache<wchar_t>\t timepunct_cache_w;\n #endif\n \n-  // Mutex objects for locale initialization.\n-  __glibcxx_mutex_define_initialized(locale_cons_mutex);\n-  __glibcxx_mutex_define_initialized(locale_global_mutex);\n+  // Mutex object for locale initialization.\n+  __glibcxx_mutex_define_initialized(locale_mutex);\n } // namespace __gnu_internal\n \n namespace std \n@@ -101,7 +100,7 @@ namespace std\n   locale::locale() throw() : _M_impl(0)\n   { \n     _S_initialize();\n-    __gnu_cxx::lock sentry(__gnu_internal::locale_cons_mutex);\n+    __gnu_cxx::lock sentry(__gnu_internal::locale_mutex);\n     _S_global->_M_add_reference();\n     _M_impl = _S_global;\n   }\n@@ -112,7 +111,7 @@ namespace std\n     _S_initialize();\n     _Impl* __old;\n     {\n-      __gnu_cxx::lock sentry(__gnu_internal::locale_global_mutex);\n+      __gnu_cxx::lock sentry(__gnu_internal::locale_mutex);\n       __old = _S_global;\n       __other._M_impl->_M_add_reference();\n       _S_global = __other._M_impl;"}]}