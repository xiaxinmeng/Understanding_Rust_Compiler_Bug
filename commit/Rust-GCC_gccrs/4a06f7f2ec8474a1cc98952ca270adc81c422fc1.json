{"sha": "4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGEwNmY3ZjJlYzg0NzRhMWNjOTg5NTJjYTI3MGFkYzgxYzQyMmZjMQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2003-02-21T20:33:50Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2003-02-21T20:33:50Z"}, "message": "physmem.c (physmem_total): Use getsysinfo on Tru64 UNIX.\n\n\t* physmem.c (physmem_total) [HAVE_GETSYSINFO]: Use getsysinfo on\n\tTru64 UNIX.\n\t(physmem_available) [HAVE_TABLE && HAVE_SYS_TABLE_H]: Use table on\n\tTru64 UNIX.\n\n\t* configure.in (AC_CHECK_HEADERS): Check for sys/sysinfo.h,\n\tmachine/hal_sysinfo.h, sys/table.h.\n\t(checkfuncs, AC_CHECKFUNCS): Check for getsysinfo, table.\n\t* configure, config.in: Regenerate.\n\nFrom-SVN: r63241", "tree": {"sha": "6c552af30d13caf2270655116cccc34ae08607c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c552af30d13caf2270655116cccc34ae08607c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/comments", "author": null, "committer": null, "parents": [{"sha": "5dc3a78ce076b29e9614a897dfdb41497fe5190d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dc3a78ce076b29e9614a897dfdb41497fe5190d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dc3a78ce076b29e9614a897dfdb41497fe5190d"}], "stats": {"total": 232, "additions": 150, "deletions": 82}, "files": [{"sha": "71b8a0f274382fc22492fa162fa99a70034e09af", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "patch": "@@ -1,3 +1,15 @@\n+2003-02-21  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* physmem.c (physmem_total) [HAVE_GETSYSINFO]: Use getsysinfo on\n+\tTru64 UNIX.\n+\t(physmem_available) [HAVE_TABLE && HAVE_SYS_TABLE_H]: Use table on\n+\tTru64 UNIX.\n+\n+\t* configure.in (AC_CHECK_HEADERS): Check for sys/sysinfo.h,\n+\tmachine/hal_sysinfo.h, sys/table.h.\n+\t(checkfuncs, AC_CHECKFUNCS): Check for getsysinfo, table.\n+\t* configure, config.in: Regenerate.\n+\n 2003-02-21  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* configure.in: Check for sys/sysmp.h and sysmp."}, {"sha": "cd2e7356e5f339375910232d4a6d8ed60683aaaa", "filename": "libiberty/config.in", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfig.in?ref=4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "patch": "@@ -81,6 +81,9 @@\n /* Define if you have the getrusage function.  */\n #undef HAVE_GETRUSAGE\n \n+/* Define if you have the getsysinfo function.  */\n+#undef HAVE_GETSYSINFO\n+\n /* Define if you have the gettimeofday function.  */\n #undef HAVE_GETTIMEOFDAY\n \n@@ -183,6 +186,9 @@\n /* Define if you have the sysmp function.  */\n #undef HAVE_SYSMP\n \n+/* Define if you have the table function.  */\n+#undef HAVE_TABLE\n+\n /* Define if you have the times function.  */\n #undef HAVE_TIMES\n \n@@ -213,6 +219,9 @@\n /* Define if you have the <limits.h> header file.  */\n #undef HAVE_LIMITS_H\n \n+/* Define if you have the <machine/hal_sysinfo.h> header file.  */\n+#undef HAVE_MACHINE_HAL_SYSINFO_H\n+\n /* Define if you have the <stdlib.h> header file.  */\n #undef HAVE_STDLIB_H\n \n@@ -240,9 +249,15 @@\n /* Define if you have the <sys/stat.h> header file.  */\n #undef HAVE_SYS_STAT_H\n \n+/* Define if you have the <sys/sysinfo.h> header file.  */\n+#undef HAVE_SYS_SYSINFO_H\n+\n /* Define if you have the <sys/sysmp.h> header file.  */\n #undef HAVE_SYS_SYSMP_H\n \n+/* Define if you have the <sys/table.h> header file.  */\n+#undef HAVE_SYS_TABLE_H\n+\n /* Define if you have the <sys/time.h> header file.  */\n #undef HAVE_SYS_TIME_H\n "}, {"sha": "4d5b9ac33fc454139450d7b268bc927b0ae6bc1e", "filename": "libiberty/configure", "status": "modified", "additions": 81, "deletions": 80, "changes": 161, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "patch": "@@ -1356,7 +1356,7 @@ else\n fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n-for ac_hdr in sys/file.h sys/param.h limits.h stdlib.h string.h unistd.h strings.h sys/time.h time.h sys/resource.h sys/stat.h sys/mman.h fcntl.h alloca.h sys/pstat.h sys/sysmp.h\n+for ac_hdr in sys/file.h sys/param.h limits.h stdlib.h string.h unistd.h strings.h sys/time.h time.h sys/resource.h sys/stat.h sys/mman.h fcntl.h alloca.h sys/pstat.h sys/sysmp.h sys/sysinfo.h machine/hal_sysinfo.h sys/table.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n@@ -1739,19 +1739,20 @@ vars=\"sys_errlist sys_nerr sys_siglist\"\n \n checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times sbrk gettimeofday\"\n checkfuncs=\"$checkfuncs realpath canonicalize_file_name pstat_getstatic pstat_getdynamic sysmp\"\n+checkfuncs=\"$checkfuncs getsysinfo table\"\n \n # These are neither executed nor required, but they help keep\n # autoheader happy without adding a bunch of text to acconfig.h.\n if test \"x\" = \"y\"; then\n   for ac_func in asprintf atexit basename bcmp bcopy bsearch bzero calloc clock\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1750: checking for $ac_func\" >&5\n+echo \"configure:1751: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1755 \"configure\"\n+#line 1756 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1774,7 +1775,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1778: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1779: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1801,12 +1802,12 @@ done\n   for ac_func in getcwd getpagesize index insque mkstemps memchr memcmp memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1805: checking for $ac_func\" >&5\n+echo \"configure:1806: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1810 \"configure\"\n+#line 1811 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1829,7 +1830,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1833: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1834: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1856,12 +1857,12 @@ done\n   for ac_func in memmove memset putenv random rename rindex sigsetmask\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1860: checking for $ac_func\" >&5\n+echo \"configure:1861: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1865 \"configure\"\n+#line 1866 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1884,7 +1885,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1888: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1889: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1911,12 +1912,12 @@ done\n   for ac_func in strcasecmp setenv strchr strdup strncasecmp strrchr strstr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1915: checking for $ac_func\" >&5\n+echo \"configure:1916: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1920 \"configure\"\n+#line 1921 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1939,7 +1940,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1943: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1944: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1966,12 +1967,12 @@ done\n   for ac_func in strtod strtol strtoul tmpnam vasprintf vfprintf vprintf\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1970: checking for $ac_func\" >&5\n+echo \"configure:1971: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1975 \"configure\"\n+#line 1976 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1994,7 +1995,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1998: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1999: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2021,12 +2022,12 @@ done\n   for ac_func in vsprintf waitpid getrusage on_exit psignal strerror strsignal\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2025: checking for $ac_func\" >&5\n+echo \"configure:2026: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2030 \"configure\"\n+#line 2031 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2049,7 +2050,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2053: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2054: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2076,12 +2077,12 @@ done\n   for ac_func in sysconf times sbrk gettimeofday ffs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2080: checking for $ac_func\" >&5\n+echo \"configure:2081: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2085 \"configure\"\n+#line 2086 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2104,7 +2105,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2108: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2109: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2128,15 +2129,15 @@ else\n fi\n done\n \n-  for ac_func in pstat_getstatic pstat_getdynamic sysmp\n+  for ac_func in pstat_getstatic pstat_getdynamic sysmp getsysinfo table\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2135: checking for $ac_func\" >&5\n+echo \"configure:2136: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2140 \"configure\"\n+#line 2141 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2159,7 +2160,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2163: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2164: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2186,12 +2187,12 @@ done\n   for ac_func in realpath canonicalize_file_name\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2190: checking for $ac_func\" >&5\n+echo \"configure:2191: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2195 \"configure\"\n+#line 2196 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2214,7 +2215,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2218: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2219: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2444,7 +2445,7 @@ if test -z \"${setobjs}\"; then\n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:2448: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:2449: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -2455,12 +2456,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 2459 \"configure\"\n+#line 2460 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:2464: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2465: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -2486,19 +2487,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:2490: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:2491: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2497: checking for $ac_func\" >&5\n+echo \"configure:2498: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2502 \"configure\"\n+#line 2503 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2521,7 +2522,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2525: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2526: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2548,12 +2549,12 @@ done\n \n \n   echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:2552: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:2553: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2557 \"configure\"\n+#line 2558 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -2578,12 +2579,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n   for ac_func in _getb67 GETB67 getb67; do\n     echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2582: checking for $ac_func\" >&5\n+echo \"configure:2583: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2587 \"configure\"\n+#line 2588 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2606,7 +2607,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2610: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2611: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2632,15 +2633,15 @@ fi\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:2636: checking stack direction for C alloca\" >&5\n+echo \"configure:2637: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2644 \"configure\"\n+#line 2645 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -2659,7 +2660,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:2663: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2664: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -2681,17 +2682,17 @@ EOF\n \n   ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2685: checking for vfork.h\" >&5\n+echo \"configure:2686: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2690 \"configure\"\n+#line 2691 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2695: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2696: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2716,18 +2717,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2720: checking for working vfork\" >&5\n+echo \"configure:2721: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2726: checking for vfork\" >&5\n+echo \"configure:2727: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2731 \"configure\"\n+#line 2732 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2750,7 +2751,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2754: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2755: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2772,7 +2773,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2776 \"configure\"\n+#line 2777 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2867,7 +2868,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2871: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2872: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2899,12 +2900,12 @@ fi\n     for ac_func in _doprnt\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2903: checking for $ac_func\" >&5\n+echo \"configure:2904: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2908 \"configure\"\n+#line 2909 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2927,7 +2928,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2931: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2932: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2957,12 +2958,12 @@ done\n     for ac_func in _doprnt\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2961: checking for $ac_func\" >&5\n+echo \"configure:2962: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2966 \"configure\"\n+#line 2967 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2985,7 +2986,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2989: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2990: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3013,19 +3014,19 @@ done\n \n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:3017: checking for $v\" >&5\n+echo \"configure:3018: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3022 \"configure\"\n+#line 3023 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v []; p = $v;\n ; return 0; }\n EOF\n-if { (eval echo configure:3029: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3030: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -3051,12 +3052,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3055: checking for $ac_func\" >&5\n+echo \"configure:3056: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3060 \"configure\"\n+#line 3061 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3079,7 +3080,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3083: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3084: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3104,12 +3105,12 @@ fi\n done\n \n   echo $ac_n \"checking whether canonicalize_file_name must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:3108: checking whether canonicalize_file_name must be declared\" >&5\n+echo \"configure:3109: checking whether canonicalize_file_name must be declared\" >&5\n if eval \"test \\\"`echo '$''{'libiberty_cv_decl_needed_canonicalize_file_name'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3113 \"configure\"\n+#line 3114 \"configure\"\n #include \"confdefs.h\"\n \n #include \"confdefs.h\"\n@@ -3131,7 +3132,7 @@ int main() {\n char *(*pfn) = (char *(*)) canonicalize_file_name\n ; return 0; }\n EOF\n-if { (eval echo configure:3135: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3136: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libiberty_cv_decl_needed_canonicalize_file_name=no\n else\n@@ -3167,17 +3168,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:3171: checking for $ac_hdr\" >&5\n+echo \"configure:3172: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3176 \"configure\"\n+#line 3177 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3181: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3182: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3206,12 +3207,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3210: checking for $ac_func\" >&5\n+echo \"configure:3211: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3215 \"configure\"\n+#line 3216 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3234,7 +3235,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3238: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3239: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3259,15 +3260,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:3263: checking for working mmap\" >&5\n+echo \"configure:3264: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3271 \"configure\"\n+#line 3272 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -3407,7 +3408,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:3411: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3412: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -3431,15 +3432,15 @@ fi\n \n \n echo $ac_n \"checking for working strncmp\"\"... $ac_c\" 1>&6\n-echo \"configure:3435: checking for working strncmp\" >&5\n+echo \"configure:3436: checking for working strncmp\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_strncmp_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_strncmp_works=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3443 \"configure\"\n+#line 3444 \"configure\"\n #include \"confdefs.h\"\n \n /* Test by Jim Wilson and Kaveh Ghazi.\n@@ -3503,7 +3504,7 @@ main ()\n }\n \n EOF\n-if { (eval echo configure:3507: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3508: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_strncmp_works=yes\n else"}, {"sha": "3b842fcd6873fac6ed4cddfc24953634d0931f59", "filename": "libiberty/configure.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "patch": "@@ -142,7 +142,7 @@ AC_SUBST_FILE(host_makefile_frag)\n # It's OK to check for header files.  Although the compiler may not be\n # able to link anything, it had better be able to at least compile\n # something.\n-AC_CHECK_HEADERS(sys/file.h sys/param.h limits.h stdlib.h string.h unistd.h strings.h sys/time.h time.h sys/resource.h sys/stat.h sys/mman.h fcntl.h alloca.h sys/pstat.h sys/sysmp.h)\n+AC_CHECK_HEADERS(sys/file.h sys/param.h limits.h stdlib.h string.h unistd.h strings.h sys/time.h time.h sys/resource.h sys/stat.h sys/mman.h fcntl.h alloca.h sys/pstat.h sys/sysmp.h sys/sysinfo.h machine/hal_sysinfo.h sys/table.h)\n AC_HEADER_SYS_WAIT\n AC_HEADER_TIME\n \n@@ -208,6 +208,7 @@ vars=\"sys_errlist sys_nerr sys_siglist\"\n \n checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times sbrk gettimeofday\"\n checkfuncs=\"$checkfuncs realpath canonicalize_file_name pstat_getstatic pstat_getdynamic sysmp\"\n+checkfuncs=\"$checkfuncs getsysinfo table\"\n \n # These are neither executed nor required, but they help keep\n # autoheader happy without adding a bunch of text to acconfig.h.\n@@ -219,7 +220,7 @@ if test \"x\" = \"y\"; then\n   AC_CHECK_FUNCS(strtod strtol strtoul tmpnam vasprintf vfprintf vprintf)\n   AC_CHECK_FUNCS(vsprintf waitpid getrusage on_exit psignal strerror strsignal)\n   AC_CHECK_FUNCS(sysconf times sbrk gettimeofday ffs)\n-  AC_CHECK_FUNCS(pstat_getstatic pstat_getdynamic sysmp)\n+  AC_CHECK_FUNCS(pstat_getstatic pstat_getdynamic sysmp getsysinfo table)\n   AC_CHECK_FUNCS(realpath canonicalize_file_name)\n   AC_DEFINE(HAVE_SYS_ERRLIST, 1, [Define if you have the sys_errlist variable.])\n   AC_DEFINE(HAVE_SYS_NERR,    1, [Define if you have the sys_nerr variable.])"}, {"sha": "2011f0251bd1a3df3667909ac8854e8a03260722", "filename": "libiberty/physmem.c", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fphysmem.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a06f7f2ec8474a1cc98952ca270adc81c422fc1/libiberty%2Fphysmem.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fphysmem.c?ref=4a06f7f2ec8474a1cc98952ca270adc81c422fc1", "patch": "@@ -33,6 +33,15 @@\n #include <sys/sysmp.h>\n #endif\n \n+#if HAVE_SYS_SYSINFO_H && HAVE_MACHINE_HAL_SYSINFO_H\n+#  include <sys/sysinfo.h>\n+#  include <machine/hal_sysinfo.h>\n+#endif\n+\n+#if HAVE_SYS_TABLE_H\n+#  include <sys/table.h>\n+#endif\n+\n #include \"libiberty.h\"\n \n /* Return the total amount of physical memory.  */\n@@ -74,6 +83,21 @@ physmem_total ()\n   }\n #endif\n \n+#if HAVE_GETSYSINFO\n+  { /* This works on Tru64 UNIX V4/5.  */\n+    int physmem;\n+\n+    if (getsysinfo (GSI_PHYSMEM, (caddr_t) &physmem, sizeof (physmem),\n+\t\t    NULL, NULL, NULL) == 1)\n+      {\n+\tdouble kbytes = physmem;\n+\n+\tif (0 <= kbytes)\n+\t  return kbytes * 1024.0;\n+      }\n+  }\n+#endif\n+\n   /* Return 0 if we can't determine the value.  */\n   return 0;\n }\n@@ -119,6 +143,21 @@ physmem_available ()\n   }\n #endif\n \n+#if HAVE_TABLE && HAVE_SYS_TABLE_H\n+  { /* This works on Tru64 UNIX V4/5.  */\n+    struct tbl_vmstats vmstats;\n+\n+    if (table (TBL_VMSTATS, 0, &vmstats, 1, sizeof (vmstats)) == 1)\n+      {\n+\tdouble pages = vmstats.free_count;\n+\tdouble pagesize = vmstats.pagesize;\n+\n+\tif (0 <= pages && 0 <= pagesize)\n+\t  return pages * pagesize;\n+      }\n+  }\n+#endif\n+\n   /* Guess 25% of physical memory.  */\n   return physmem_total () / 4;\n }"}]}