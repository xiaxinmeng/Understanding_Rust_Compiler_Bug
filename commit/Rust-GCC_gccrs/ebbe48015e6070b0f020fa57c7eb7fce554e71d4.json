{"sha": "ebbe48015e6070b0f020fa57c7eb7fce554e71d4", "node_id": "C_kwDOANBUbNoAKGViYmU0ODAxNWU2MDcwYjBmMDIwZmE1N2M3ZWI3ZmNlNTU0ZTcxZDQ", "commit": {"author": {"name": "Etienne Servais", "email": "servais@adacore.com", "date": "2022-01-17T15:26:00Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-05-09T09:27:37Z"}, "message": "[Ada] Fully qualify name in JSON representation info\n\nThe current termination condition of the recursion is wrong.  When in\nJSON mode, names should be fully qualified. This requires to stop not at\nthe first encountered compilation unit but to recurse up to Standard.\n\ngcc/ada/\n\n\t* repinfo.adb (List_Name): Rework termination condition.", "tree": {"sha": "b2175bcd5f5e610a9fcd1e6fa423b69bdfbe7e9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2175bcd5f5e610a9fcd1e6fa423b69bdfbe7e9e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ebbe48015e6070b0f020fa57c7eb7fce554e71d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebbe48015e6070b0f020fa57c7eb7fce554e71d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ebbe48015e6070b0f020fa57c7eb7fce554e71d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebbe48015e6070b0f020fa57c7eb7fce554e71d4/comments", "author": {"login": "vser1", "id": 8308457, "node_id": "MDQ6VXNlcjgzMDg0NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8308457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vser1", "html_url": "https://github.com/vser1", "followers_url": "https://api.github.com/users/vser1/followers", "following_url": "https://api.github.com/users/vser1/following{/other_user}", "gists_url": "https://api.github.com/users/vser1/gists{/gist_id}", "starred_url": "https://api.github.com/users/vser1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vser1/subscriptions", "organizations_url": "https://api.github.com/users/vser1/orgs", "repos_url": "https://api.github.com/users/vser1/repos", "events_url": "https://api.github.com/users/vser1/events{/privacy}", "received_events_url": "https://api.github.com/users/vser1/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a746131d375283f28e6e0a3e45bddffb6d1ebfcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a746131d375283f28e6e0a3e45bddffb6d1ebfcd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a746131d375283f28e6e0a3e45bddffb6d1ebfcd"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "ed7312c0f944182d360af1f10f6a0f0b9224640c", "filename": "gcc/ada/repinfo.adb", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebbe48015e6070b0f020fa57c7eb7fce554e71d4/gcc%2Fada%2Frepinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebbe48015e6070b0f020fa57c7eb7fce554e71d4/gcc%2Fada%2Frepinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frepinfo.adb?ref=ebbe48015e6070b0f020fa57c7eb7fce554e71d4", "patch": "@@ -44,6 +44,7 @@ with Sinfo.Nodes;    use Sinfo.Nodes;\n with Sinfo.Utils;    use Sinfo.Utils;\n with Sinput;         use Sinput;\n with Snames;         use Snames;\n+with Stand;          use Stand;\n with Stringt;        use Stringt;\n with Table;\n with Ttypes;\n@@ -874,10 +875,11 @@ package body Repinfo is\n       C : Character;\n \n    begin\n-      --  List the qualified name recursively, except\n-      --  at compilation unit level in default mode.\n+      --  In JSON mode, we recurse up to Standard. This is also valid in\n+      --  default mode where we recurse up to the first compilation unit and\n+      --  should not get to Standard.\n \n-      if Is_Compilation_Unit (Ent) then\n+      if Scope (Ent) = Standard_Standard then\n          null;\n       elsif not Is_Compilation_Unit (Scope (Ent))\n         or else List_Representation_Info_To_JSON"}]}