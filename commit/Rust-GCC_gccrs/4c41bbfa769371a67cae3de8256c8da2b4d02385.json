{"sha": "4c41bbfa769371a67cae3de8256c8da2b4d02385", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGM0MWJiZmE3NjkzNzFhNjdjYWUzZGU4MjU2YzhkYTJiNGQwMjM4NQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-07-01T02:20:59Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-07-01T02:20:59Z"}, "message": "(ALLOCA_FLAGS, ALLOCA_FINISH, AS): Deleted.\n\n(INSTALL): Deleted.\n(duplicate_decls): If newdecl for builtin function\nhas same return mode as the builtin, keep the builtin\nbut use newdecl's return type.\n\nFrom-SVN: r1366", "tree": {"sha": "bc2049dadf794dfc8d9fe04afb96a095a4fc6721", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc2049dadf794dfc8d9fe04afb96a095a4fc6721"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c41bbfa769371a67cae3de8256c8da2b4d02385", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c41bbfa769371a67cae3de8256c8da2b4d02385", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c41bbfa769371a67cae3de8256c8da2b4d02385", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c41bbfa769371a67cae3de8256c8da2b4d02385/comments", "author": null, "committer": null, "parents": [{"sha": "7212eb444263275379e7b7b7c0daf2b841a760c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7212eb444263275379e7b7b7c0daf2b841a760c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7212eb444263275379e7b7b7c0daf2b841a760c2"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "4cd33a07e6a4b78780b3e4f9e37cd1fc067af6dc", "filename": "gcc/c-decl.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c41bbfa769371a67cae3de8256c8da2b4d02385/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c41bbfa769371a67cae3de8256c8da2b4d02385/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=4c41bbfa769371a67cae3de8256c8da2b4d02385", "patch": "@@ -1204,6 +1204,19 @@ duplicate_decls (newdecl, olddecl)\n \t  return 0;\n \t}\n       else if (!types_match)\n+\t{\n+          /* Accept the return type of the new declaration if same modes.  */\n+\t  tree oldreturntype = TREE_TYPE (TREE_TYPE (olddecl));\n+\t  tree newreturntype = TREE_TYPE (TREE_TYPE (newdecl));\n+          if (TYPE_MODE (oldreturntype) == TYPE_MODE (newreturntype))\n+            {\n+              TREE_TYPE (TREE_TYPE (olddecl)) = newreturntype;\n+              types_match = comptypes (TREE_TYPE (newdecl), TREE_TYPE (olddecl));\n+\t      if (!types_match)\n+\t\tTREE_TYPE (TREE_TYPE (olddecl)) = oldreturntype;\n+\t    }\n+\t}\n+      if (!types_match)\n \t{\n \t  /* If types don't match for a built-in, throw away the built-in.  */\n \t  warning_with_decl (newdecl, \"conflicting types for built-in function `%s'\");"}]}