{"sha": "12e2fea92c88bf62ef9a5c03bdf0817ceb706300", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTJlMmZlYTkyYzg4YmY2MmVmOWE1YzAzYmRmMDgxN2NlYjcwNjMwMA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-02-13T01:55:24Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-02-13T01:55:24Z"}, "message": "(STARTFILE_SPEC): Add crtbeginS.o if -shared.\n\n(CC1_SPEC): New.\n(LIB_SPEC): Remove %{mieee-fp:-lieee}; use -lc_p for -profile.\n\nFrom-SVN: r11246", "tree": {"sha": "4ae73f828093897cdae635e60f647853e55e8b44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ae73f828093897cdae635e60f647853e55e8b44"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12e2fea92c88bf62ef9a5c03bdf0817ceb706300", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12e2fea92c88bf62ef9a5c03bdf0817ceb706300", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12e2fea92c88bf62ef9a5c03bdf0817ceb706300", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12e2fea92c88bf62ef9a5c03bdf0817ceb706300/comments", "author": null, "committer": null, "parents": [{"sha": "dcd93d0494b579a734f7c83cc6d13c567c34ddea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcd93d0494b579a734f7c83cc6d13c567c34ddea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcd93d0494b579a734f7c83cc6d13c567c34ddea"}], "stats": {"total": 32, "additions": 19, "deletions": 13}, "files": [{"sha": "eaa74f040adc7937cbb3b56b57232eaaba602e87", "filename": "gcc/config/linux.h", "status": "modified", "additions": 19, "deletions": 13, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12e2fea92c88bf62ef9a5c03bdf0817ceb706300/gcc%2Fconfig%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12e2fea92c88bf62ef9a5c03bdf0817ceb706300/gcc%2Fconfig%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Flinux.h?ref=12e2fea92c88bf62ef9a5c03bdf0817ceb706300", "patch": "@@ -67,21 +67,12 @@ Boston, MA 02111-1307, USA.  */\n    object constructed before entering `main'. */\n    \n #undef\tSTARTFILE_SPEC\n-#if 0\n-#define STARTFILE_SPEC \\\n-  \"%{!shared: \\\n-     %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} \\\n-\t\t       %{!p:%{profile:gcrt1.o%s} \\\n-\t\t\t %{!profile:crt1.o%s%}}}} \\\n-   crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n-#else\n #define STARTFILE_SPEC \\\n   \"%{!shared: \\\n      %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} \\\n \t\t       %{!p:%{profile:gcrt1.o%s} \\\n \t\t\t %{!profile:crt1.o%s}}}} \\\n-   crti.o%s crtbegin.o%s\"\n-#endif\n+   crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n \n /* Provide a ENDFILE_SPEC appropriate for Linux.  Here we tack on\n    the Linux magical crtend.o file (see crtstuff.c) which\n@@ -90,10 +81,25 @@ Boston, MA 02111-1307, USA.  */\n    Linux \"finalizer\" file, `crtn.o'.  */\n \n #undef\tENDFILE_SPEC\n-#if 0\n #define ENDFILE_SPEC \\\n   \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n+\n+/* This is for -profile to use -lc_p instead of -lc. */\n+#undef  CC1_SPEC\n+#define CC1_SPEC \"%{profile:-p}\"\n+\n+#undef\tLIB_SPEC\n+#if 1\n+/* We no longer link with libc_p.a or libg.a by default. If you\n+ * want to profile or debug the Linux C library, please add\n+ * -profile or -ggdb to LDFLAGS at the link time, respectively.\n+ */\n+#define LIB_SPEC \\\n+  \"%{!shared: %{p:-lgmon} %{pg:-lgmon} %{profile:-lgmon -lc_p} \\\n+     %{!profile:%{!ggdb:-lc} %{ggdb:-lg}}}\"\n #else\n-#define ENDFILE_SPEC \\\n-  \"crtend.o%s crtn.o%s\"\n+#define LIB_SPEC \\\n+  \"%{!shared: \\\n+     %{p:-lgmon -lc_p} %{pg:-lgmon -lc_p} \\\n+       %{!p:%{!pg:%{!g*:-lc} %{g*:-lg}}}}\"\n #endif"}]}