{"sha": "9311f3f613826baba9506671cfd94227108853a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTMxMWYzZjYxMzgyNmJhYmE5NTA2NjcxY2ZkOTQyMjcxMDg4NTNhOQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-03-30T23:07:27Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-03-30T23:07:27Z"}, "message": "* dojump.c (do_jump): Copy SUBREGs into a pseudo for comparison.\n\nFrom-SVN: r65060", "tree": {"sha": "dbb11f2059db5f960133c611cbd811745b901d63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dbb11f2059db5f960133c611cbd811745b901d63"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9311f3f613826baba9506671cfd94227108853a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9311f3f613826baba9506671cfd94227108853a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9311f3f613826baba9506671cfd94227108853a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9311f3f613826baba9506671cfd94227108853a9/comments", "author": null, "committer": null, "parents": [{"sha": "c717c5af279f31b4e469f01469d17a7720c56d54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c717c5af279f31b4e469f01469d17a7720c56d54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c717c5af279f31b4e469f01469d17a7720c56d54"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "a51e1433eda4c5ae5dfd3f3cf79d99b04ff4af8d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9311f3f613826baba9506671cfd94227108853a9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9311f3f613826baba9506671cfd94227108853a9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9311f3f613826baba9506671cfd94227108853a9", "patch": "@@ -1,3 +1,7 @@\n+2003-03-30  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* dojump.c (do_jump): Copy SUBREGs into a pseudo for comparison.\n+\n 2003-03-30  DJ Delorie  <dj@redhat.com>\n \n \t* profile.c (instrument_edges): Make sure any newly created"}, {"sha": "6921d2b72becc7b5894543ccaa32c238c9f8802d", "filename": "gcc/dojump.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9311f3f613826baba9506671cfd94227108853a9/gcc%2Fdojump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9311f3f613826baba9506671cfd94227108853a9/gcc%2Fdojump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdojump.c?ref=9311f3f613826baba9506671cfd94227108853a9", "patch": "@@ -588,10 +588,15 @@ do_jump (exp, if_false_label, if_true_label)\n         /* Note swapping the labels gives us not-equal.  */\n         do_jump_by_parts_equality_rtx (temp, if_true_label, if_false_label);\n       else if (GET_MODE (temp) != VOIDmode)\n-        do_compare_rtx_and_jump (temp, CONST0_RTX (GET_MODE (temp)),\n-                                 NE, TREE_UNSIGNED (TREE_TYPE (exp)),\n-                                 GET_MODE (temp), NULL_RTX,\n-                                 if_false_label, if_true_label);\n+\t{\n+\t  /* The RTL optimizers prefer comparisons against pseudos.  */\n+\t  if (GET_CODE (temp) == SUBREG)\n+\t    temp = copy_to_reg (temp);\n+\t  do_compare_rtx_and_jump (temp, CONST0_RTX (GET_MODE (temp)),\n+\t\t\t\t   NE, TREE_UNSIGNED (TREE_TYPE (exp)),\n+\t\t\t\t   GET_MODE (temp), NULL_RTX,\n+\t\t\t\t   if_false_label, if_true_label);\n+\t}\n       else\n         abort ();\n     }"}]}