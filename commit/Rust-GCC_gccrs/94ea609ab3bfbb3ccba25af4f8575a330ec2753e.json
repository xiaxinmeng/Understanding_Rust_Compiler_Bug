{"sha": "94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTRlYTYwOWFiM2JmYmIzY2NiYTI1YWY0Zjg1NzVhMzMwZWMyNzUzZQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-03-25T17:04:16Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-03-25T17:04:16Z"}, "message": "re PR boehm-gc/11412 (boehm-gc testing problems)\n\n\tPR boehm-gc/11412\n\t* configure.ac (THREADCFLAGS): New variable.\n\tUse it instead of INCLUDES, AM_CPPFLAGS.\n\t<*-*-kfreebsd*-gnu> (THREADDLLIBS): Rename to THREADLIBS.\n\tRemove DG/UX support.\n\t(AC_CONFIG_FILES): Add testsuite/Makefile.\n\t* Makefile.am (AUTOMAKE_OPTIONS): Use foreign instead of cygnus.\n\t(SUBDIRS): Add testsuite.\n\t(libgcjgc_la_LIBADD): Remove $(UNWINDLIBS).\n\t(AM_CXXFLAGS): Add $(THREADCFLAGS).\n\t(AM_CFLAGS): Likewise.\n\tRemove TESTS related variables.\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\t* testsuite/Makefile.am: New file.\n\t* testsuite/Makefile.in: New file.\n\t* testsuite/lib/boehm-gc.exp: New file.\n\t* testsuite/config/default.exp: New file.\n\t* testsuite/boehm-gc.c/c.exp: New file.\n\t* testsuite/boehm-gc.lib/lib.exp: New file.\n\t* tests/test.c: Move ...\n\t* testsuite/boehm-gc.c/gctest.c: ... here.\n\t* tests/leak_test.c, tests/middle.c, tests/thread_leak_test.c,\n\ttests/trace_test.c: Move ...\n\t* testsuite/boehm-gc.c: ... here.\n\t* testsuite/boehm-gc.c/trace_test.c: Skip everywhere.\n\t* tests/staticrootslib.c, tests/staticrootstest.c: Move ...\n\t* testsuite/boehm-gc.lib: ... here.\n\t* testsuite/boehm-gc.lib/staticrootstest.c: Use dg-add-shlib\n\tstaticrootslib.c.\n\t* tests/test_cpp.cc: Move ...\n\t* testsuite/boehm-gc.c++: ... here.\n\nFrom-SVN: r171514", "tree": {"sha": "bca5a11be904a41f7a02366de822a87a8d289f46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bca5a11be904a41f7a02366de822a87a8d289f46"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/comments", "author": null, "committer": null, "parents": [{"sha": "6c4e299723b232528d96b081ddb816aeb7ea8497", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c4e299723b232528d96b081ddb816aeb7ea8497", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c4e299723b232528d96b081ddb816aeb7ea8497"}], "stats": {"total": 1653, "additions": 1206, "deletions": 447}, "files": [{"sha": "2b68938e18d38c12102ccfc10a5e1304961e491b", "filename": "boehm-gc/Makefile.am", "status": "modified", "additions": 5, "deletions": 42, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FMakefile.am?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -4,10 +4,10 @@\n ## files that should be in the distribution are not mentioned in this\n ## Makefile.am.\n \n-AUTOMAKE_OPTIONS = cygnus subdir-objects\n+AUTOMAKE_OPTIONS = foreign subdir-objects\n ACLOCAL_AMFLAGS = -I .. -I ../config\n \n-SUBDIRS = include\n+SUBDIRS = include testsuite\n \n noinst_LTLIBRARIES = libgcjgc.la libgcjgc_convenience.la\n \n@@ -35,56 +35,19 @@ sparc_sunos4_mach_dep.s ia64_save_regs_in_stack.s\n \n # Include THREADLIBS here to ensure that the correct versions of\n # linuxthread semaphore functions get linked:\n-libgcjgc_la_LIBADD = $(addobjs) $(THREADLIBS) $(UNWINDLIBS)\n+libgcjgc_la_LIBADD = $(addobjs) $(THREADLIBS)\n libgcjgc_la_DEPENDENCIES = $(addobjs)\n libgcjgc_la_LDFLAGS = $(extra_ldflags_libgc) -version-info 1:2:0 -rpath $(toolexeclibdir)\n libgcjgc_la_LINK = $(LINK) $(libgcjgc_la_LDFLAGS)\n \n libgcjgc_convenience_la_LIBADD = $(addobjs)\n libgcjgc_convenience_la_DEPENDENCIES = $(addobjs)\n \n-AM_CXXFLAGS = $(GC_CFLAGS)\n-AM_CFLAGS = $(GC_CFLAGS)\n+AM_CXXFLAGS = $(GC_CFLAGS) $(THREADCFLAGS)\n+AM_CFLAGS = $(GC_CFLAGS) $(THREADCFLAGS)\n AM_LDFLAGS = $(shell $(top_srcdir)/../libtool-ldflags $(LDFLAGS))\n override CFLAGS := $(filter-out $(O0_CFLAGS), $(CFLAGS)) $(O0_CFLAGS)\n \n-test_ldadd = libgcjgc.la $(THREADLIBS) $(UNWINDLIBS) $(EXTRA_TEST_LIBS)\n-\n-check_PROGRAMS = gctest\n-gctest_SOURCES = tests/test.c\n-gctest_LDADD = $(test_ldadd)\n-gctest_LDFLAGS = -shared-libgcc\n-gctest_LINK = $(LINK) $(gctest_LDFLAGS)\n-TESTS_ENVIRONMENT = LD_LIBRARY_PATH=../../$(MULTIBUILDTOP)gcc\n-TESTS = gctest\n-\n-TESTS += leaktest$(EXEEXT)\n-check_PROGRAMS += leaktest\n-leaktest_SOURCES = tests/leak_test.c\n-leaktest_LDADD = $(test_ldadd)\n-leaktest_LDFLAGS = -shared-libgcc\n-leaktest_LINK = $(LINK) $(leaktest_LDFLAGS)\n-\n-TESTS += middletest$(EXEEXT)\n-check_PROGRAMS += middletest\n-middletest_SOURCES = tests/middle.c\n-middletest_LDADD = $(test_ldadd)\n-middletest_LDFLAGS = -shared-libgcc\n-middletest_LINK = $(LINK) $(middletest_LDFLAGS)\n-\n-TESTS += staticrootstest$(EXEEXT)\n-check_PROGRAMS += staticrootstest\n-staticrootstest_SOURCES = tests/staticrootstest.c\n-staticrootstest_LDADD = $(test_ldadd) libstaticrootslib.la\n-staticrootstest_LDFLAGS = -shared-libgcc\n-staticrootstest_LINK = $(LINK) $(staticrootstest_LDFLAGS)\n-check_LTLIBRARIES = libstaticrootslib.la\n-libstaticrootslib_la_SOURCES = tests/staticrootslib.c\n-libstaticrootslib_la_LIBADD = libgcjgc_convenience.la\n-libstaticrootslib_la_LDFLAGS = -version-info 1:2:0 -no-undefined \\\n-\t\t\t\t-rpath /nowhere -shared-libgcc\n-libstaticrootslib_la_DEPENDENCIES = libgcjgc_convenience.la\n-\n ## FIXME: we shouldn't have to do this, but automake forces us to.\n .s.lo:\n ## We use -Wp,-P to strip #line directives.  Irix `as' chokes on"}, {"sha": "e1a3b70ca347f1ffd404b927dcb6ebcc2d1e1850", "filename": "boehm-gc/Makefile.in", "status": "modified", "additions": 312, "deletions": 221, "changes": 533, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FMakefile.in?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -35,14 +35,14 @@ POST_UNINSTALL = :\n build_triplet = @build@\n host_triplet = @host@\n target_triplet = @target@\n-check_PROGRAMS = gctest$(EXEEXT) leaktest$(EXEEXT) middletest$(EXEEXT) \\\n-\tstaticrootstest$(EXEEXT)\n-TESTS = gctest$(EXEEXT) leaktest$(EXEEXT) middletest$(EXEEXT) \\\n-\tstaticrootstest$(EXEEXT)\n subdir = .\n-DIST_COMMON = ChangeLog $(srcdir)/Makefile.in $(srcdir)/Makefile.am \\\n-\t$(top_srcdir)/configure $(am__configure_deps) \\\n-\t$(srcdir)/../mkinstalldirs $(srcdir)/threads.mk.in\n+DIST_COMMON = $(am__configure_deps) $(srcdir)/../compile \\\n+\t$(srcdir)/../config.guess $(srcdir)/../config.sub \\\n+\t$(srcdir)/../depcomp $(srcdir)/../install-sh \\\n+\t$(srcdir)/../ltmain.sh $(srcdir)/../missing \\\n+\t$(srcdir)/../mkinstalldirs $(srcdir)/Makefile.am \\\n+\t$(srcdir)/Makefile.in $(srcdir)/threads.mk.in \\\n+\t$(top_srcdir)/configure ChangeLog depcomp\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/../config/acx.m4 \\\n \t$(top_srcdir)/../config/depstand.m4 \\\n@@ -63,6 +63,14 @@ CONFIG_CLEAN_FILES = threads.mk\n CONFIG_CLEAN_VPATH_FILES =\n LTLIBRARIES = $(noinst_LTLIBRARIES)\n am__DEPENDENCIES_1 =\n+am__libgcjgc_la_SOURCES_DIST = allchblk.c alloc.c blacklst.c \\\n+\tchecksums.c dbg_mlc.c dyn_load.c finalize.c gc_dlopen.c \\\n+\tgcj_mlc.c headers.c malloc.c mallocx.c mark.c mark_rts.c \\\n+\tmisc.c new_hblk.c obj_map.c os_dep.c pcr_interface.c \\\n+\tptr_chck.c real_malloc.c reclaim.c specific.c stubborn.c \\\n+\ttypd_mlc.c backgraph.c win32_threads.c pthread_support.c \\\n+\tpthread_stop_world.c darwin_stop_world.c \\\n+\tpowerpc_darwin_mach_dep.s\n @POWERPC_DARWIN_TRUE@am__objects_1 = powerpc_darwin_mach_dep.lo\n am_libgcjgc_la_OBJECTS = allchblk.lo alloc.lo blacklst.lo checksums.lo \\\n \tdbg_mlc.lo dyn_load.lo finalize.lo gc_dlopen.lo gcj_mlc.lo \\\n@@ -72,6 +80,14 @@ am_libgcjgc_la_OBJECTS = allchblk.lo alloc.lo blacklst.lo checksums.lo \\\n \tbackgraph.lo win32_threads.lo pthread_support.lo \\\n \tpthread_stop_world.lo darwin_stop_world.lo $(am__objects_1)\n libgcjgc_la_OBJECTS = $(am_libgcjgc_la_OBJECTS)\n+am__libgcjgc_convenience_la_SOURCES_DIST = allchblk.c alloc.c \\\n+\tblacklst.c checksums.c dbg_mlc.c dyn_load.c finalize.c \\\n+\tgc_dlopen.c gcj_mlc.c headers.c malloc.c mallocx.c mark.c \\\n+\tmark_rts.c misc.c new_hblk.c obj_map.c os_dep.c \\\n+\tpcr_interface.c ptr_chck.c real_malloc.c reclaim.c specific.c \\\n+\tstubborn.c typd_mlc.c backgraph.c win32_threads.c \\\n+\tpthread_support.c pthread_stop_world.c darwin_stop_world.c \\\n+\tpowerpc_darwin_mach_dep.s\n am__objects_2 = allchblk.lo alloc.lo blacklst.lo checksums.lo \\\n \tdbg_mlc.lo dyn_load.lo finalize.lo gc_dlopen.lo gcj_mlc.lo \\\n \theaders.lo malloc.lo mallocx.lo mark.lo mark_rts.lo misc.lo \\\n@@ -82,30 +98,10 @@ am__objects_2 = allchblk.lo alloc.lo blacklst.lo checksums.lo \\\n am_libgcjgc_convenience_la_OBJECTS = $(am__objects_2)\n libgcjgc_convenience_la_OBJECTS =  \\\n \t$(am_libgcjgc_convenience_la_OBJECTS)\n-am__dirstamp = $(am__leading_dot)dirstamp\n-am_libstaticrootslib_la_OBJECTS = tests/staticrootslib.lo\n-libstaticrootslib_la_OBJECTS = $(am_libstaticrootslib_la_OBJECTS)\n-libstaticrootslib_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \\\n-\t$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \\\n-\t$(libstaticrootslib_la_LDFLAGS) $(LDFLAGS) -o $@\n-am_gctest_OBJECTS = tests/test.$(OBJEXT)\n-gctest_OBJECTS = $(am_gctest_OBJECTS)\n-am__DEPENDENCIES_2 = libgcjgc.la $(am__DEPENDENCIES_1) \\\n-\t$(am__DEPENDENCIES_1)\n-gctest_DEPENDENCIES = $(am__DEPENDENCIES_2)\n-am_leaktest_OBJECTS = tests/leak_test.$(OBJEXT)\n-leaktest_OBJECTS = $(am_leaktest_OBJECTS)\n-leaktest_DEPENDENCIES = $(am__DEPENDENCIES_2)\n-am_middletest_OBJECTS = tests/middle.$(OBJEXT)\n-middletest_OBJECTS = $(am_middletest_OBJECTS)\n-middletest_DEPENDENCIES = $(am__DEPENDENCIES_2)\n-am_staticrootstest_OBJECTS = tests/staticrootstest.$(OBJEXT)\n-staticrootstest_OBJECTS = $(am_staticrootstest_OBJECTS)\n-staticrootstest_DEPENDENCIES = $(am__DEPENDENCIES_2) \\\n-\tlibstaticrootslib.la\n DEFAULT_INCLUDES = -I.@am__isrc@ -I$(top_builddir)/include\n-depcomp =\n-am__depfiles_maybe =\n+depcomp = $(SHELL) $(top_srcdir)/../depcomp\n+am__depfiles_maybe = depfiles\n+am__mv = mv -f\n COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \\\n \t$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n LTCOMPILE = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \\\n@@ -118,10 +114,9 @@ LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \\\n CCASCOMPILE = $(CCAS) $(AM_CCASFLAGS) $(CCASFLAGS)\n LTCCASCOMPILE = $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \\\n \t--mode=compile $(CCAS) $(AM_CCASFLAGS) $(CCASFLAGS)\n-SOURCES = $(libgcjgc_la_SOURCES) $(libgcjgc_convenience_la_SOURCES) \\\n-\t$(libstaticrootslib_la_SOURCES) $(gctest_SOURCES) \\\n-\t$(leaktest_SOURCES) $(middletest_SOURCES) \\\n-\t$(staticrootstest_SOURCES)\n+SOURCES = $(libgcjgc_la_SOURCES) $(libgcjgc_convenience_la_SOURCES)\n+DIST_SOURCES = $(am__libgcjgc_la_SOURCES_DIST) \\\n+\t$(am__libgcjgc_convenience_la_SOURCES_DIST)\n MULTISRCTOP = \n MULTIBUILDTOP = \n MULTIDIRS = \n@@ -138,12 +133,47 @@ RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \\\n RECURSIVE_CLEAN_TARGETS = mostlyclean-recursive clean-recursive\t\\\n   distclean-recursive maintainer-clean-recursive\n AM_RECURSIVE_TARGETS = $(RECURSIVE_TARGETS:-recursive=) \\\n-\t$(RECURSIVE_CLEAN_TARGETS:-recursive=) tags TAGS ctags CTAGS\n+\t$(RECURSIVE_CLEAN_TARGETS:-recursive=) tags TAGS ctags CTAGS \\\n+\tdistdir dist dist-all distcheck\n ETAGS = etags\n CTAGS = ctags\n-am__tty_colors = \\\n-red=; grn=; lgn=; blu=; std=\n DIST_SUBDIRS = $(SUBDIRS)\n+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)\n+distdir = $(PACKAGE)-$(VERSION)\n+top_distdir = $(distdir)\n+am__remove_distdir = \\\n+  { test ! -d \"$(distdir)\" \\\n+    || { find \"$(distdir)\" -type d ! -perm -200 -exec chmod u+w {} ';' \\\n+         && rm -fr \"$(distdir)\"; }; }\n+am__relativize = \\\n+  dir0=`pwd`; \\\n+  sed_first='s,^\\([^/]*\\)/.*$$,\\1,'; \\\n+  sed_rest='s,^[^/]*/*,,'; \\\n+  sed_last='s,^.*/\\([^/]*\\)$$,\\1,'; \\\n+  sed_butlast='s,/*[^/]*$$,,'; \\\n+  while test -n \"$$dir1\"; do \\\n+    first=`echo \"$$dir1\" | sed -e \"$$sed_first\"`; \\\n+    if test \"$$first\" != \".\"; then \\\n+      if test \"$$first\" = \"..\"; then \\\n+        dir2=`echo \"$$dir0\" | sed -e \"$$sed_last\"`/\"$$dir2\"; \\\n+        dir0=`echo \"$$dir0\" | sed -e \"$$sed_butlast\"`; \\\n+      else \\\n+        first2=`echo \"$$dir2\" | sed -e \"$$sed_first\"`; \\\n+        if test \"$$first2\" = \"$$first\"; then \\\n+          dir2=`echo \"$$dir2\" | sed -e \"$$sed_rest\"`; \\\n+        else \\\n+          dir2=\"../$$dir2\"; \\\n+        fi; \\\n+        dir0=\"$$dir0\"/\"$$first\"; \\\n+      fi; \\\n+    fi; \\\n+    dir1=`echo \"$$dir1\" | sed -e \"$$sed_rest\"`; \\\n+  done; \\\n+  reldir=\"$$dir2\"\n+DIST_ARCHIVES = $(distdir).tar.gz\n+GZIP_ENV = --best\n+distuninstallcheck_listfiles = find . -type f -print\n+distcleancheck_listfiles = find . -type f -print\n ACLOCAL = @ACLOCAL@\n AMTAR = @AMTAR@\n AM_CPPFLAGS = @AM_CPPFLAGS@\n@@ -214,6 +244,7 @@ SED = @SED@\n SET_MAKE = @SET_MAKE@\n SHELL = @SHELL@\n STRIP = @STRIP@\n+THREADCFLAGS = @THREADCFLAGS@\n THREADLIBS = @THREADLIBS@\n VERSION = @VERSION@\n abs_builddir = @abs_builddir@\n@@ -283,9 +314,9 @@ toolexeclibdir = @toolexeclibdir@\n top_build_prefix = @top_build_prefix@\n top_builddir = @top_builddir@\n top_srcdir = @top_srcdir@\n-AUTOMAKE_OPTIONS = cygnus subdir-objects\n+AUTOMAKE_OPTIONS = foreign subdir-objects\n ACLOCAL_AMFLAGS = -I .. -I ../config\n-SUBDIRS = include\n+SUBDIRS = include testsuite\n noinst_LTLIBRARIES = libgcjgc.la libgcjgc_convenience.la\n @POWERPC_DARWIN_FALSE@asm_libgcjgc_sources = \n @POWERPC_DARWIN_TRUE@asm_libgcjgc_sources = powerpc_darwin_mach_dep.s\n@@ -307,40 +338,15 @@ sparc_sunos4_mach_dep.s ia64_save_regs_in_stack.s\n \n # Include THREADLIBS here to ensure that the correct versions of\n # linuxthread semaphore functions get linked:\n-libgcjgc_la_LIBADD = $(addobjs) $(THREADLIBS) $(UNWINDLIBS)\n+libgcjgc_la_LIBADD = $(addobjs) $(THREADLIBS)\n libgcjgc_la_DEPENDENCIES = $(addobjs)\n libgcjgc_la_LDFLAGS = $(extra_ldflags_libgc) -version-info 1:2:0 -rpath $(toolexeclibdir)\n libgcjgc_la_LINK = $(LINK) $(libgcjgc_la_LDFLAGS)\n libgcjgc_convenience_la_LIBADD = $(addobjs)\n libgcjgc_convenience_la_DEPENDENCIES = $(addobjs)\n-AM_CXXFLAGS = $(GC_CFLAGS)\n-AM_CFLAGS = $(GC_CFLAGS)\n+AM_CXXFLAGS = $(GC_CFLAGS) $(THREADCFLAGS)\n+AM_CFLAGS = $(GC_CFLAGS) $(THREADCFLAGS)\n AM_LDFLAGS = $(shell $(top_srcdir)/../libtool-ldflags $(LDFLAGS))\n-test_ldadd = libgcjgc.la $(THREADLIBS) $(UNWINDLIBS) $(EXTRA_TEST_LIBS)\n-gctest_SOURCES = tests/test.c\n-gctest_LDADD = $(test_ldadd)\n-gctest_LDFLAGS = -shared-libgcc\n-gctest_LINK = $(LINK) $(gctest_LDFLAGS)\n-TESTS_ENVIRONMENT = LD_LIBRARY_PATH=../../$(MULTIBUILDTOP)gcc\n-leaktest_SOURCES = tests/leak_test.c\n-leaktest_LDADD = $(test_ldadd)\n-leaktest_LDFLAGS = -shared-libgcc\n-leaktest_LINK = $(LINK) $(leaktest_LDFLAGS)\n-middletest_SOURCES = tests/middle.c\n-middletest_LDADD = $(test_ldadd)\n-middletest_LDFLAGS = -shared-libgcc\n-middletest_LINK = $(LINK) $(middletest_LDFLAGS)\n-staticrootstest_SOURCES = tests/staticrootstest.c\n-staticrootstest_LDADD = $(test_ldadd) libstaticrootslib.la\n-staticrootstest_LDFLAGS = -shared-libgcc\n-staticrootstest_LINK = $(LINK) $(staticrootstest_LDFLAGS)\n-check_LTLIBRARIES = libstaticrootslib.la\n-libstaticrootslib_la_SOURCES = tests/staticrootslib.c\n-libstaticrootslib_la_LIBADD = libgcjgc_convenience.la\n-libstaticrootslib_la_LDFLAGS = -version-info 1:2:0 -no-undefined \\\n-\t\t\t\t-rpath /nowhere -shared-libgcc\n-\n-libstaticrootslib_la_DEPENDENCIES = libgcjgc_convenience.la\n \n # Work around what appears to be a GNU make bug handling MAKEFLAGS\n # values defined in terms of make variables, as is the case for CC and\n@@ -426,15 +432,6 @@ $(am__aclocal_m4_deps):\n threads.mk: $(top_builddir)/config.status $(srcdir)/threads.mk.in\n \tcd $(top_builddir) && $(SHELL) ./config.status $@\n \n-clean-checkLTLIBRARIES:\n-\t-test -z \"$(check_LTLIBRARIES)\" || rm -f $(check_LTLIBRARIES)\n-\t@list='$(check_LTLIBRARIES)'; for p in $$list; do \\\n-\t  dir=\"`echo $$p | sed -e 's|/[^/]*$$||'`\"; \\\n-\t  test \"$$dir\" != \"$$p\" || dir=.; \\\n-\t  echo \"rm -f \\\"$${dir}/so_locations\\\"\"; \\\n-\t  rm -f \"$${dir}/so_locations\"; \\\n-\tdone\n-\n clean-noinstLTLIBRARIES:\n \t-test -z \"$(noinst_LTLIBRARIES)\" || rm -f $(noinst_LTLIBRARIES)\n \t@list='$(noinst_LTLIBRARIES)'; for p in $$list; do \\\n@@ -447,58 +444,67 @@ libgcjgc.la: $(libgcjgc_la_OBJECTS) $(libgcjgc_la_DEPENDENCIES)\n \t$(libgcjgc_la_LINK)  $(libgcjgc_la_OBJECTS) $(libgcjgc_la_LIBADD) $(LIBS)\n libgcjgc_convenience.la: $(libgcjgc_convenience_la_OBJECTS) $(libgcjgc_convenience_la_DEPENDENCIES) \n \t$(LINK)  $(libgcjgc_convenience_la_OBJECTS) $(libgcjgc_convenience_la_LIBADD) $(LIBS)\n-tests/$(am__dirstamp):\n-\t@$(MKDIR_P) tests\n-\t@: > tests/$(am__dirstamp)\n-tests/staticrootslib.lo: tests/$(am__dirstamp)\n-libstaticrootslib.la: $(libstaticrootslib_la_OBJECTS) $(libstaticrootslib_la_DEPENDENCIES) \n-\t$(libstaticrootslib_la_LINK)  $(libstaticrootslib_la_OBJECTS) $(libstaticrootslib_la_LIBADD) $(LIBS)\n-\n-clean-checkPROGRAMS:\n-\t@list='$(check_PROGRAMS)'; test -n \"$$list\" || exit 0; \\\n-\techo \" rm -f\" $$list; \\\n-\trm -f $$list || exit $$?; \\\n-\ttest -n \"$(EXEEXT)\" || exit 0; \\\n-\tlist=`for p in $$list; do echo \"$$p\"; done | sed 's/$(EXEEXT)$$//'`; \\\n-\techo \" rm -f\" $$list; \\\n-\trm -f $$list\n-tests/test.$(OBJEXT): tests/$(am__dirstamp)\n-gctest$(EXEEXT): $(gctest_OBJECTS) $(gctest_DEPENDENCIES) \n-\t@rm -f gctest$(EXEEXT)\n-\t$(gctest_LINK) $(gctest_OBJECTS) $(gctest_LDADD) $(LIBS)\n-tests/leak_test.$(OBJEXT): tests/$(am__dirstamp)\n-leaktest$(EXEEXT): $(leaktest_OBJECTS) $(leaktest_DEPENDENCIES) \n-\t@rm -f leaktest$(EXEEXT)\n-\t$(leaktest_LINK) $(leaktest_OBJECTS) $(leaktest_LDADD) $(LIBS)\n-tests/middle.$(OBJEXT): tests/$(am__dirstamp)\n-middletest$(EXEEXT): $(middletest_OBJECTS) $(middletest_DEPENDENCIES) \n-\t@rm -f middletest$(EXEEXT)\n-\t$(middletest_LINK) $(middletest_OBJECTS) $(middletest_LDADD) $(LIBS)\n-tests/staticrootstest.$(OBJEXT): tests/$(am__dirstamp)\n-staticrootstest$(EXEEXT): $(staticrootstest_OBJECTS) $(staticrootstest_DEPENDENCIES) \n-\t@rm -f staticrootstest$(EXEEXT)\n-\t$(staticrootstest_LINK) $(staticrootstest_OBJECTS) $(staticrootstest_LDADD) $(LIBS)\n \n mostlyclean-compile:\n \t-rm -f *.$(OBJEXT)\n-\t-rm -f tests/leak_test.$(OBJEXT)\n-\t-rm -f tests/middle.$(OBJEXT)\n-\t-rm -f tests/staticrootslib.$(OBJEXT)\n-\t-rm -f tests/staticrootslib.lo\n-\t-rm -f tests/staticrootstest.$(OBJEXT)\n-\t-rm -f tests/test.$(OBJEXT)\n \n distclean-compile:\n \t-rm -f *.tab.c\n \n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/allchblk.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/alloc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/backgraph.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/blacklst.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/checksums.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/darwin_stop_world.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dbg_mlc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dyn_load.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/finalize.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/gc_dlopen.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/gcj_mlc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/headers.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/malloc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mallocx.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mark.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mark_rts.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/misc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/new_hblk.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/obj_map.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/os_dep.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pcr_interface.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pthread_stop_world.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pthread_support.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ptr_chck.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/real_malloc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/reclaim.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/specific.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/stubborn.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/typd_mlc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/win32_threads.Plo@am__quote@\n+\n .c.o:\n-\t$(COMPILE) -c -o $@ $<\n+@am__fastdepCC_TRUE@\tdepbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\\.o$$||'`;\\\n+@am__fastdepCC_TRUE@\t$(COMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ $< &&\\\n+@am__fastdepCC_TRUE@\t$(am__mv) $$depbase.Tpo $$depbase.Po\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='$<' object='$@' libtool=no @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCC_FALSE@\t$(COMPILE) -c -o $@ $<\n \n .c.obj:\n-\t$(COMPILE) -c -o $@ `$(CYGPATH_W) '$<'`\n+@am__fastdepCC_TRUE@\tdepbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\\.obj$$||'`;\\\n+@am__fastdepCC_TRUE@\t$(COMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ `$(CYGPATH_W) '$<'` &&\\\n+@am__fastdepCC_TRUE@\t$(am__mv) $$depbase.Tpo $$depbase.Po\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='$<' object='$@' libtool=no @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCC_FALSE@\t$(COMPILE) -c -o $@ `$(CYGPATH_W) '$<'`\n \n .c.lo:\n-\t$(LTCOMPILE) -c -o $@ $<\n+@am__fastdepCC_TRUE@\tdepbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\\.lo$$||'`;\\\n+@am__fastdepCC_TRUE@\t$(LTCOMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ $< &&\\\n+@am__fastdepCC_TRUE@\t$(am__mv) $$depbase.Tpo $$depbase.Plo\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='$<' object='$@' libtool=yes @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCC_FALSE@\t$(LTCOMPILE) -c -o $@ $<\n \n .s.o:\n \t$(CCASCOMPILE) -c -o $@ $<\n@@ -511,7 +517,6 @@ mostlyclean-libtool:\n \n clean-libtool:\n \t-rm -rf .libs _libs\n-\t-rm -rf tests/.libs tests/_libs\n \n distclean-libtool:\n \t-rm -f libtool config.lt\n@@ -668,99 +673,182 @@ GTAGS:\n distclean-tags:\n \t-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags\n \n-check-TESTS: $(TESTS)\n-\t@failed=0; all=0; xfail=0; xpass=0; skip=0; \\\n-\tsrcdir=$(srcdir); export srcdir; \\\n-\tlist=' $(TESTS) '; \\\n-\t$(am__tty_colors); \\\n-\tif test -n \"$$list\"; then \\\n-\t  for tst in $$list; do \\\n-\t    if test -f ./$$tst; then dir=./; \\\n-\t    elif test -f $$tst; then dir=; \\\n-\t    else dir=\"$(srcdir)/\"; fi; \\\n-\t    if $(TESTS_ENVIRONMENT) $${dir}$$tst; then \\\n-\t      all=`expr $$all + 1`; \\\n-\t      case \" $(XFAIL_TESTS) \" in \\\n-\t      *[\\ \\\t]$$tst[\\ \\\t]*) \\\n-\t\txpass=`expr $$xpass + 1`; \\\n-\t\tfailed=`expr $$failed + 1`; \\\n-\t\tcol=$$red; res=XPASS; \\\n-\t      ;; \\\n-\t      *) \\\n-\t\tcol=$$grn; res=PASS; \\\n-\t      ;; \\\n-\t      esac; \\\n-\t    elif test $$? -ne 77; then \\\n-\t      all=`expr $$all + 1`; \\\n-\t      case \" $(XFAIL_TESTS) \" in \\\n-\t      *[\\ \\\t]$$tst[\\ \\\t]*) \\\n-\t\txfail=`expr $$xfail + 1`; \\\n-\t\tcol=$$lgn; res=XFAIL; \\\n-\t      ;; \\\n-\t      *) \\\n-\t\tfailed=`expr $$failed + 1`; \\\n-\t\tcol=$$red; res=FAIL; \\\n-\t      ;; \\\n-\t      esac; \\\n-\t    else \\\n-\t      skip=`expr $$skip + 1`; \\\n-\t      col=$$blu; res=SKIP; \\\n+distdir: $(DISTFILES)\n+\t$(am__remove_distdir)\n+\ttest -d \"$(distdir)\" || mkdir \"$(distdir)\"\n+\t@srcdirstrip=`echo \"$(srcdir)\" | sed 's/[].[^$$\\\\*]/\\\\\\\\&/g'`; \\\n+\ttopsrcdirstrip=`echo \"$(top_srcdir)\" | sed 's/[].[^$$\\\\*]/\\\\\\\\&/g'`; \\\n+\tlist='$(DISTFILES)'; \\\n+\t  dist_files=`for file in $$list; do echo $$file; done | \\\n+\t  sed -e \"s|^$$srcdirstrip/||;t\" \\\n+\t      -e \"s|^$$topsrcdirstrip/|$(top_builddir)/|;t\"`; \\\n+\tcase $$dist_files in \\\n+\t  */*) $(MKDIR_P) `echo \"$$dist_files\" | \\\n+\t\t\t   sed '/\\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \\\n+\t\t\t   sort -u` ;; \\\n+\tesac; \\\n+\tfor file in $$dist_files; do \\\n+\t  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \\\n+\t  if test -d $$d/$$file; then \\\n+\t    dir=`echo \"/$$file\" | sed -e 's,/[^/]*$$,,'`; \\\n+\t    if test -d \"$(distdir)/$$file\"; then \\\n+\t      find \"$(distdir)/$$file\" -type d ! -perm -700 -exec chmod u+rwx {} \\;; \\\n \t    fi; \\\n-\t    echo \"$${col}$$res$${std}: $$tst\"; \\\n-\t  done; \\\n-\t  if test \"$$all\" -eq 1; then \\\n-\t    tests=\"test\"; \\\n-\t    All=\"\"; \\\n-\t  else \\\n-\t    tests=\"tests\"; \\\n-\t    All=\"All \"; \\\n-\t  fi; \\\n-\t  if test \"$$failed\" -eq 0; then \\\n-\t    if test \"$$xfail\" -eq 0; then \\\n-\t      banner=\"$$All$$all $$tests passed\"; \\\n-\t    else \\\n-\t      if test \"$$xfail\" -eq 1; then failures=failure; else failures=failures; fi; \\\n-\t      banner=\"$$All$$all $$tests behaved as expected ($$xfail expected $$failures)\"; \\\n+\t    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \\\n+\t      cp -fpR $(srcdir)/$$file \"$(distdir)$$dir\" || exit 1; \\\n+\t      find \"$(distdir)/$$file\" -type d ! -perm -700 -exec chmod u+rwx {} \\;; \\\n \t    fi; \\\n+\t    cp -fpR $$d/$$file \"$(distdir)$$dir\" || exit 1; \\\n \t  else \\\n-\t    if test \"$$xpass\" -eq 0; then \\\n-\t      banner=\"$$failed of $$all $$tests failed\"; \\\n-\t    else \\\n-\t      if test \"$$xpass\" -eq 1; then passes=pass; else passes=passes; fi; \\\n-\t      banner=\"$$failed of $$all $$tests did not behave as expected ($$xpass unexpected $$passes)\"; \\\n-\t    fi; \\\n-\t  fi; \\\n-\t  dashes=\"$$banner\"; \\\n-\t  skipped=\"\"; \\\n-\t  if test \"$$skip\" -ne 0; then \\\n-\t    if test \"$$skip\" -eq 1; then \\\n-\t      skipped=\"($$skip test was not run)\"; \\\n-\t    else \\\n-\t      skipped=\"($$skip tests were not run)\"; \\\n-\t    fi; \\\n-\t    test `echo \"$$skipped\" | wc -c` -le `echo \"$$banner\" | wc -c` || \\\n-\t      dashes=\"$$skipped\"; \\\n+\t    test -f \"$(distdir)/$$file\" \\\n+\t    || cp -p $$d/$$file \"$(distdir)/$$file\" \\\n+\t    || exit 1; \\\n \t  fi; \\\n-\t  report=\"\"; \\\n-\t  if test \"$$failed\" -ne 0 && test -n \"$(PACKAGE_BUGREPORT)\"; then \\\n-\t    report=\"Please report to $(PACKAGE_BUGREPORT)\"; \\\n-\t    test `echo \"$$report\" | wc -c` -le `echo \"$$banner\" | wc -c` || \\\n-\t      dashes=\"$$report\"; \\\n+\tdone\n+\t@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \\\n+\t  if test \"$$subdir\" = .; then :; else \\\n+\t    test -d \"$(distdir)/$$subdir\" \\\n+\t    || $(MKDIR_P) \"$(distdir)/$$subdir\" \\\n+\t    || exit 1; \\\n \t  fi; \\\n-\t  dashes=`echo \"$$dashes\" | sed s/./=/g`; \\\n-\t  if test \"$$failed\" -eq 0; then \\\n-\t    echo \"$$grn$$dashes\"; \\\n-\t  else \\\n-\t    echo \"$$red$$dashes\"; \\\n+\tdone\n+\t@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \\\n+\t  if test \"$$subdir\" = .; then :; else \\\n+\t    dir1=$$subdir; dir2=\"$(distdir)/$$subdir\"; \\\n+\t    $(am__relativize); \\\n+\t    new_distdir=$$reldir; \\\n+\t    dir1=$$subdir; dir2=\"$(top_distdir)\"; \\\n+\t    $(am__relativize); \\\n+\t    new_top_distdir=$$reldir; \\\n+\t    echo \" (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) top_distdir=\"$$new_top_distdir\" distdir=\"$$new_distdir\" \\\\\"; \\\n+\t    echo \"     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)\"; \\\n+\t    ($(am__cd) $$subdir && \\\n+\t      $(MAKE) $(AM_MAKEFLAGS) \\\n+\t        top_distdir=\"$$new_top_distdir\" \\\n+\t        distdir=\"$$new_distdir\" \\\n+\t\tam__remove_distdir=: \\\n+\t\tam__skip_length_check=: \\\n+\t\tam__skip_mode_fix=: \\\n+\t        distdir) \\\n+\t      || exit 1; \\\n \t  fi; \\\n-\t  echo \"$$banner\"; \\\n-\t  test -z \"$$skipped\" || echo \"$$skipped\"; \\\n-\t  test -z \"$$report\" || echo \"$$report\"; \\\n-\t  echo \"$$dashes$$std\"; \\\n-\t  test \"$$failed\" -eq 0; \\\n-\telse :; fi\n-check-am: $(check_LTLIBRARIES) $(check_PROGRAMS)\n-\t$(MAKE) $(AM_MAKEFLAGS) check-TESTS\n+\tdone\n+\t-test -n \"$(am__skip_mode_fix)\" \\\n+\t|| find \"$(distdir)\" -type d ! -perm -755 \\\n+\t\t-exec chmod u+rwx,go+rx {} \\; -o \\\n+\t  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \\; -o \\\n+\t  ! -type d ! -perm -400 -exec chmod a+r {} \\; -o \\\n+\t  ! -type d ! -perm -444 -exec $(install_sh) -c -m a+r {} {} \\; \\\n+\t|| chmod -R a+r \"$(distdir)\"\n+dist-gzip: distdir\n+\ttardir=$(distdir) && $(am__tar) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz\n+\t$(am__remove_distdir)\n+\n+dist-bzip2: distdir\n+\ttardir=$(distdir) && $(am__tar) | bzip2 -9 -c >$(distdir).tar.bz2\n+\t$(am__remove_distdir)\n+\n+dist-lzma: distdir\n+\ttardir=$(distdir) && $(am__tar) | lzma -9 -c >$(distdir).tar.lzma\n+\t$(am__remove_distdir)\n+\n+dist-xz: distdir\n+\ttardir=$(distdir) && $(am__tar) | xz -c >$(distdir).tar.xz\n+\t$(am__remove_distdir)\n+\n+dist-tarZ: distdir\n+\ttardir=$(distdir) && $(am__tar) | compress -c >$(distdir).tar.Z\n+\t$(am__remove_distdir)\n+\n+dist-shar: distdir\n+\tshar $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).shar.gz\n+\t$(am__remove_distdir)\n+\n+dist-zip: distdir\n+\t-rm -f $(distdir).zip\n+\tzip -rq $(distdir).zip $(distdir)\n+\t$(am__remove_distdir)\n+\n+dist dist-all: distdir\n+\ttardir=$(distdir) && $(am__tar) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz\n+\t$(am__remove_distdir)\n+\n+# This target untars the dist file and tries a VPATH configuration.  Then\n+# it guarantees that the distribution is self-contained by making another\n+# tarfile.\n+distcheck: dist\n+\tcase '$(DIST_ARCHIVES)' in \\\n+\t*.tar.gz*) \\\n+\t  GZIP=$(GZIP_ENV) gzip -dc $(distdir).tar.gz | $(am__untar) ;;\\\n+\t*.tar.bz2*) \\\n+\t  bzip2 -dc $(distdir).tar.bz2 | $(am__untar) ;;\\\n+\t*.tar.lzma*) \\\n+\t  lzma -dc $(distdir).tar.lzma | $(am__untar) ;;\\\n+\t*.tar.xz*) \\\n+\t  xz -dc $(distdir).tar.xz | $(am__untar) ;;\\\n+\t*.tar.Z*) \\\n+\t  uncompress -c $(distdir).tar.Z | $(am__untar) ;;\\\n+\t*.shar.gz*) \\\n+\t  GZIP=$(GZIP_ENV) gzip -dc $(distdir).shar.gz | unshar ;;\\\n+\t*.zip*) \\\n+\t  unzip $(distdir).zip ;;\\\n+\tesac\n+\tchmod -R a-w $(distdir); chmod a+w $(distdir)\n+\tmkdir $(distdir)/_build\n+\tmkdir $(distdir)/_inst\n+\tchmod a-w $(distdir)\n+\ttest -d $(distdir)/_build || exit 0; \\\n+\tdc_install_base=`$(am__cd) $(distdir)/_inst && pwd | sed -e 's,^[^:\\\\/]:[\\\\/],/,'` \\\n+\t  && dc_destdir=\"$${TMPDIR-/tmp}/am-dc-$$$$/\" \\\n+\t  && am__cwd=`pwd` \\\n+\t  && $(am__cd) $(distdir)/_build \\\n+\t  && ../configure --srcdir=.. --prefix=\"$$dc_install_base\" \\\n+\t    $(DISTCHECK_CONFIGURE_FLAGS) \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) dvi \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) check \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) install \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) installcheck \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) uninstall \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) distuninstallcheck_dir=\"$$dc_install_base\" \\\n+\t        distuninstallcheck \\\n+\t  && chmod -R a-w \"$$dc_install_base\" \\\n+\t  && ({ \\\n+\t       (cd ../.. && umask 077 && mkdir \"$$dc_destdir\") \\\n+\t       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR=\"$$dc_destdir\" install \\\n+\t       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR=\"$$dc_destdir\" uninstall \\\n+\t       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR=\"$$dc_destdir\" \\\n+\t            distuninstallcheck_dir=\"$$dc_destdir\" distuninstallcheck; \\\n+\t      } || { rm -rf \"$$dc_destdir\"; exit 1; }) \\\n+\t  && rm -rf \"$$dc_destdir\" \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) dist \\\n+\t  && rm -rf $(DIST_ARCHIVES) \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) distcleancheck \\\n+\t  && cd \"$$am__cwd\" \\\n+\t  || exit 1\n+\t$(am__remove_distdir)\n+\t@(echo \"$(distdir) archives ready for distribution: \"; \\\n+\t  list='$(DIST_ARCHIVES)'; for i in $$list; do echo $$i; done) | \\\n+\t  sed -e 1h -e 1s/./=/g -e 1p -e 1x -e '$$p' -e '$$x'\n+distuninstallcheck:\n+\t@$(am__cd) '$(distuninstallcheck_dir)' \\\n+\t&& test `$(distuninstallcheck_listfiles) | wc -l` -le 1 \\\n+\t   || { echo \"ERROR: files left after uninstall:\" ; \\\n+\t        if test -n \"$(DESTDIR)\"; then \\\n+\t          echo \"  (check DESTDIR support)\"; \\\n+\t        fi ; \\\n+\t        $(distuninstallcheck_listfiles) ; \\\n+\t        exit 1; } >&2\n+distcleancheck: distclean\n+\t@if test '$(srcdir)' = . ; then \\\n+\t  echo \"ERROR: distcleancheck can only run from a VPATH build\" ; \\\n+\t  exit 1 ; \\\n+\tfi\n+\t@test `$(distcleancheck_listfiles) | wc -l` -eq 0 \\\n+\t  || { echo \"ERROR: files left in build directory after distclean:\" ; \\\n+\t       $(distcleancheck_listfiles) ; \\\n+\t       exit 1; } >&2\n+check-am: all-am\n check: check-recursive\n all-am: Makefile $(LTLIBRARIES) all-multi\n installdirs: installdirs-recursive\n@@ -786,18 +874,18 @@ clean-generic:\n distclean-generic:\n \t-test -z \"$(CONFIG_CLEAN_FILES)\" || rm -f $(CONFIG_CLEAN_FILES)\n \t-test . = \"$(srcdir)\" || test -z \"$(CONFIG_CLEAN_VPATH_FILES)\" || rm -f $(CONFIG_CLEAN_VPATH_FILES)\n-\t-rm -f tests/$(am__dirstamp)\n \n maintainer-clean-generic:\n \t@echo \"This command is intended for maintainers to use\"\n \t@echo \"it deletes files that may require special tools to rebuild.\"\n clean: clean-multi clean-recursive\n \n-clean-am: clean-checkLTLIBRARIES clean-checkPROGRAMS clean-generic \\\n-\tclean-libtool clean-noinstLTLIBRARIES mostlyclean-am\n+clean-am: clean-generic clean-libtool clean-noinstLTLIBRARIES \\\n+\tmostlyclean-am\n \n distclean: distclean-multi distclean-recursive\n \t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n+\t-rm -rf ./$(DEPDIR)\n \t-rm -f Makefile\n distclean-am: clean-am distclean-compile distclean-generic \\\n \tdistclean-libtool distclean-tags\n@@ -845,6 +933,7 @@ installcheck-am:\n maintainer-clean: maintainer-clean-multi maintainer-clean-recursive\n \t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n \t-rm -rf $(top_srcdir)/autom4te.cache\n+\t-rm -rf ./$(DEPDIR)\n \t-rm -f Makefile\n maintainer-clean-am: distclean-am maintainer-clean-generic\n \n@@ -864,23 +953,25 @@ ps-am:\n uninstall-am:\n \n .MAKE: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) all-multi \\\n-\tcheck-am clean-multi ctags-recursive distclean-multi \\\n-\tinstall-am install-multi install-strip maintainer-clean-multi \\\n+\tclean-multi ctags-recursive distclean-multi install-am \\\n+\tinstall-multi install-strip maintainer-clean-multi \\\n \tmostlyclean-multi tags-recursive\n \n .PHONY: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) CTAGS GTAGS \\\n-\tall all-am all-multi am--refresh check check-TESTS check-am \\\n-\tclean clean-checkLTLIBRARIES clean-checkPROGRAMS clean-generic \\\n-\tclean-libtool clean-multi clean-noinstLTLIBRARIES ctags \\\n-\tctags-recursive distclean distclean-compile distclean-generic \\\n-\tdistclean-libtool distclean-multi distclean-tags dvi dvi-am \\\n-\thtml html-am info info-am install install-am install-data \\\n-\tinstall-data-am install-dvi install-dvi-am install-exec \\\n-\tinstall-exec-am install-html install-html-am install-info \\\n-\tinstall-info-am install-man install-multi install-pdf \\\n-\tinstall-pdf-am install-ps install-ps-am install-strip \\\n-\tinstallcheck installcheck-am installdirs installdirs-am \\\n-\tmaintainer-clean maintainer-clean-generic \\\n+\tall all-am all-multi am--refresh check check-am clean \\\n+\tclean-generic clean-libtool clean-multi \\\n+\tclean-noinstLTLIBRARIES ctags ctags-recursive dist dist-all \\\n+\tdist-bzip2 dist-gzip dist-lzma dist-shar dist-tarZ dist-xz \\\n+\tdist-zip distcheck distclean distclean-compile \\\n+\tdistclean-generic distclean-libtool distclean-multi \\\n+\tdistclean-tags distcleancheck distdir distuninstallcheck dvi \\\n+\tdvi-am html html-am info info-am install install-am \\\n+\tinstall-data install-data-am install-dvi install-dvi-am \\\n+\tinstall-exec install-exec-am install-html install-html-am \\\n+\tinstall-info install-info-am install-man install-multi \\\n+\tinstall-pdf install-pdf-am install-ps install-ps-am \\\n+\tinstall-strip installcheck installcheck-am installdirs \\\n+\tinstalldirs-am maintainer-clean maintainer-clean-generic \\\n \tmaintainer-clean-multi mostlyclean mostlyclean-compile \\\n \tmostlyclean-generic mostlyclean-libtool mostlyclean-multi pdf \\\n \tpdf-am ps ps-am tags tags-recursive uninstall uninstall-am"}, {"sha": "8da6b17add0360bb6627bef53b2017fb714b7b85", "filename": "boehm-gc/configure", "status": "modified", "additions": 13, "deletions": 144, "changes": 157, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fconfigure?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -618,6 +618,7 @@ extra_ldflags_libgc\n POWERPC_DARWIN_FALSE\n POWERPC_DARWIN_TRUE\n THREADLIBS\n+THREADCFLAGS\n CXXCPP\n CPP\n OTOOL64\n@@ -1943,93 +1944,6 @@ $as_echo \"$ac_res\" >&6; }\n   eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n \n } # ac_fn_c_check_member\n-\n-# ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES\n-# -------------------------------------------------------\n-# Tests whether HEADER exists, giving a warning if it cannot be compiled using\n-# the include files in INCLUDES and setting the cache variable VAR\n-# accordingly.\n-ac_fn_c_check_header_mongrel ()\n-{\n-  as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n-  if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $2\" >&5\n-$as_echo_n \"checking for $2... \" >&6; }\n-if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n-  $as_echo_n \"(cached) \" >&6\n-fi\n-eval ac_res=\\$$3\n-\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n-$as_echo \"$ac_res\" >&6; }\n-else\n-  # Is the header compilable?\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking $2 usability\" >&5\n-$as_echo_n \"checking $2 usability... \" >&6; }\n-cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-$4\n-#include <$2>\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_header_compiler=yes\n-else\n-  ac_header_compiler=no\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler\" >&5\n-$as_echo \"$ac_header_compiler\" >&6; }\n-\n-# Is the header present?\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking $2 presence\" >&5\n-$as_echo_n \"checking $2 presence... \" >&6; }\n-cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#include <$2>\n-_ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n-  ac_header_preproc=yes\n-else\n-  ac_header_preproc=no\n-fi\n-rm -f conftest.err conftest.$ac_ext\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc\" >&5\n-$as_echo \"$ac_header_preproc\" >&6; }\n-\n-# So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((\n-  yes:no: )\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!\" >&5\n-$as_echo \"$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result\" >&5\n-$as_echo \"$as_me: WARNING: $2: proceeding with the compiler's result\" >&2;}\n-    ;;\n-  no:yes:* )\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled\" >&5\n-$as_echo \"$as_me: WARNING: $2: present but cannot be compiled\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?\" >&5\n-$as_echo \"$as_me: WARNING: $2:     check for missing prerequisite headers?\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation\" >&5\n-$as_echo \"$as_me: WARNING: $2: see the Autoconf documentation\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \\\"Present But Cannot Be Compiled\\\"\" >&5\n-$as_echo \"$as_me: WARNING: $2:     section \\\"Present But Cannot Be Compiled\\\"\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result\" >&5\n-$as_echo \"$as_me: WARNING: $2: proceeding with the compiler's result\" >&2;}\n-    ;;\n-esac\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $2\" >&5\n-$as_echo_n \"checking for $2... \" >&6; }\n-if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  eval \"$3=\\$ac_header_compiler\"\n-fi\n-eval ac_res=\\$$3\n-\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n-$as_echo \"$ac_res\" >&6; }\n-fi\n-  eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n-\n-} # ac_fn_c_check_header_mongrel\n cat >config.log <<_ACEOF\n This file contains any messages produced by compilers while\n running configure, to aid debugging if configure makes a mistake.\n@@ -11390,7 +11304,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11393 \"configure\"\n+#line 11307 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11496,7 +11410,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11499 \"configure\"\n+#line 11413 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -14792,6 +14706,7 @@ fi\n \n \n AM_CPPFLAGS=\"-I`cd $srcdir && ${PWDCMD-pwd}`/include\"\n+THREADCFLAGS=\n THREADLIBS=\n case \"$THREADS\" in\n  no | none | single)\n@@ -14855,11 +14770,11 @@ $as_echo \"#define _REENTRANT 1\" >>confdefs.h\n \t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: \\\"Only HP-UX 11 POSIX threads are supported.\\\"\" >&5\n $as_echo \"$as_me: WARNING: \\\"Only HP-UX 11 POSIX threads are supported.\\\"\" >&2;}\n \t;;\n-      *-*-kfreebsd*-gnu)\n+     *-*-kfreebsd*-gnu)\n        $as_echo \"#define GC_FREEBSD_THREADS 1\" >>confdefs.h\n \n-       INCLUDES=\"$INCLUDES -pthread\"\n-       THREADDLLIBS=-pthread\n+       THREADCFLAGS=-pthread\n+       THREADLIBS=-pthread\n        $as_echo \"#define _REENTRANT 1\" >>confdefs.h\n \n          if test \"${enable_parallel_mark}\" = yes; then\n@@ -14871,14 +14786,14 @@ $as_echo \"$as_me: WARNING: \\\"Only HP-UX 11 POSIX threads are supported.\\\"\" >&2;}\n \n $as_echo \"#define USE_COMPILER_TLS 1\" >>confdefs.h\n \n-               ;;\n+       ;;\n      *-*-freebsd*)\n \t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: \\\"FreeBSD does not yet fully support threads with Boehm GC.\\\"\" >&5\n $as_echo \"$as_me: WARNING: \\\"FreeBSD does not yet fully support threads with Boehm GC.\\\"\" >&2;}\n \n $as_echo \"#define GC_FREEBSD_THREADS 1\" >>confdefs.h\n \n-\tAM_CPPFLAGS=\"$AM_CPPFLAGS -pthread\"\n+\tTHREADCFLAGS=-pthread\n \tTHREADLIBS=-pthread\n       \t;;\n      *-*-solaris2.8*)\n@@ -14935,7 +14850,7 @@ $as_echo \"#define GC_OSF1_THREADS 1\" >>confdefs.h\n \t  # May want to enable it in other cases, too.\n \t  # Measurements havent yet been done.\n \tfi\n-\tAM_CPPFLAGS=\"$AM_CPPFLAGS -pthread\"\n+\tTHREADCFLAGS=-pthread\n \tTHREADLIBS=\"-lpthread -lrt\"\n \t;;\n     esac\n@@ -14944,27 +14859,6 @@ $as_echo \"#define GC_OSF1_THREADS 1\" >>confdefs.h\n     $as_echo \"#define GC_WIN32_THREADS 1\" >>confdefs.h\n \n             ;;\n- dgux386)\n-    THREADS=dgux386\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $THREADLIBS\" >&5\n-$as_echo \"$THREADLIBS\" >&6; }\n-    # Use pthread GCC  switch\n-    THREADLIBS=-pthread\n-    if test \"${enable_parallel_mark}\" = yes; then\n-        $as_echo \"#define PARALLEL_MARK 1\" >>confdefs.h\n-\n-    fi\n-    $as_echo \"#define THREAD_LOCAL_ALLOC 1\" >>confdefs.h\n-\n-\n-$as_echo \"#define GC_DGUX386_THREADS 1\" >>confdefs.h\n-\n-\n-$as_echo \"#define DGUX_THREADS 1\" >>confdefs.h\n-\n-    # Enable _POSIX4A_DRAFT10_SOURCE with flag -pthread\n-    AM_CPPFLAGS=\"-pthread $AM_CPPFLAGS\"\n-    ;;\n  aix)\n     THREADS=posix\n     THREADLIBS=-lpthread\n@@ -14982,6 +14876,7 @@ $as_echo \"#define DGUX_THREADS 1\" >>confdefs.h\n esac\n \n \n+\n case \"$host\" in\n    powerpc-*-darwin*)\n       powerpc_darwin=true\n@@ -15322,29 +15217,6 @@ addobjs=\"$addobjs $machdep\"\n \n \n \n-#\n-# Check for AViiON Machines running DGUX\n-#\n-ac_is_dgux=no\n-ac_fn_c_check_header_mongrel \"$LINENO\" \"sys/dg_sys_info.h\" \"ac_cv_header_sys_dg_sys_info_h\" \"$ac_includes_default\"\n-if test \"x$ac_cv_header_sys_dg_sys_info_h\" = x\"\"yes; then :\n-  ac_is_dgux=yes\n-fi\n-\n-\n-\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking if host is AViiON running DGUX\" >&5\n-$as_echo_n \"checking if host is AViiON running DGUX... \" >&6; }\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_is_dgux\" >&5\n-$as_echo \"$ac_is_dgux\" >&6; }\n-    ## :GOTCHA: we do not check anything but sys/dg_sys_info.h\n-if test $ac_is_dgux = yes; then\n-    if test \"$enable_full_debug\" = \"yes\"; then\n-        GC_CFLAGS=\"$GC_CFLAGS -mstandard\"\n-    fi\n-    GC_CFLAGS=\"$GC_CFLAGS -DDGUX -D_DGUX_SOURCE -Di386 -mno-legend\"\n-fi\n-\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether GCC optimization should be disabled\" >&5\n $as_echo_n \"checking whether GCC optimization should be disabled... \" >&6; }\n O0_CFLAGS=\n@@ -15407,10 +15279,6 @@ $as_echo \"$as_me: WARNING: \\\"Client must not use -fomit-frame-pointer.\\\"\" >&2;}\n $as_echo \"#define SAVE_CALL_COUNT 8\" >>confdefs.h\n \n       ;;\n-      i345686-*-dgux*)\n-\t$as_echo \"#define MAKE_BACK_GRAPH 1\" >>confdefs.h\n-\n-      ;;\n     esac\n   fi\n fi\n@@ -15447,7 +15315,7 @@ fi\n ac_config_headers=\"$ac_config_headers include/gc_config.h include/gc_ext_config.h\"\n \n \n-ac_config_files=\"$ac_config_files Makefile include/Makefile threads.mk\"\n+ac_config_files=\"$ac_config_files Makefile include/Makefile testsuite/Makefile threads.mk\"\n \n cat >confcache <<\\_ACEOF\n # This file is a shell script that caches the results of configure\n@@ -16552,6 +16420,7 @@ do\n     \"include/gc_ext_config.h\") CONFIG_HEADERS=\"$CONFIG_HEADERS include/gc_ext_config.h\" ;;\n     \"Makefile\") CONFIG_FILES=\"$CONFIG_FILES Makefile\" ;;\n     \"include/Makefile\") CONFIG_FILES=\"$CONFIG_FILES include/Makefile\" ;;\n+    \"testsuite/Makefile\") CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n     \"threads.mk\") CONFIG_FILES=\"$CONFIG_FILES threads.mk\" ;;\n \n   *) as_fn_error \"invalid argument: \\`$ac_config_target'\" \"$LINENO\" 5;;"}, {"sha": "88f5b8063e74734292993d779efa8124a026424a", "filename": "boehm-gc/configure.ac", "status": "modified", "additions": 9, "deletions": 40, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fconfigure.ac?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -123,6 +123,7 @@ AC_ARG_ENABLE(parallel-mark,\n )\n \n AM_CPPFLAGS=\"-I`cd $srcdir && ${PWDCMD-pwd}`/include\"\n+THREADCFLAGS=\n THREADLIBS=\n case \"$THREADS\" in\n  no | none | single)\n@@ -163,21 +164,21 @@ case \"$THREADS\" in\n      *-*-hpux10*)\n \tAC_MSG_WARN(\"Only HP-UX 11 POSIX threads are supported.\")\n \t;;\n-      *-*-kfreebsd*-gnu)\n+     *-*-kfreebsd*-gnu)\n        AC_DEFINE(GC_FREEBSD_THREADS)\n-       INCLUDES=\"$INCLUDES -pthread\"\n-       THREADDLLIBS=-pthread\n+       THREADCFLAGS=-pthread\n+       THREADLIBS=-pthread\n        AC_DEFINE(_REENTRANT)\n          if test \"${enable_parallel_mark}\" = yes; then\n          AC_DEFINE(PARALLEL_MARK)\n        fi\n        AC_DEFINE(THREAD_LOCAL_ALLOC)\n        AC_DEFINE(USE_COMPILER_TLS, 1,[use tls for boehm])\n-               ;;\n+       ;;\n      *-*-freebsd*)\n \tAC_MSG_WARN(\"FreeBSD does not yet fully support threads with Boehm GC.\")\n \tAC_DEFINE(GC_FREEBSD_THREADS,1,[support FreeBSD threads])\n-\tAM_CPPFLAGS=\"$AM_CPPFLAGS -pthread\"\n+\tTHREADCFLAGS=-pthread\n \tTHREADLIBS=-pthread\n       \t;;\n      *-*-solaris2.8*)\n@@ -218,7 +219,7 @@ case \"$THREADS\" in\n \t  # May want to enable it in other cases, too.\n \t  # Measurements havent yet been done.\n \tfi\n-\tAM_CPPFLAGS=\"$AM_CPPFLAGS -pthread\"\n+\tTHREADCFLAGS=-pthread\n \tTHREADLIBS=\"-lpthread -lrt\"\n \t;;\n     esac\n@@ -228,20 +229,6 @@ case \"$THREADS\" in\n     dnl Old wine getenv may not return NULL for missing entry.\n     dnl Define EMPTY_GETENV_RESULTS here to work around the bug.\n     ;;\n- dgux386)\n-    THREADS=dgux386\n-AC_MSG_RESULT($THREADLIBS)\n-    # Use pthread GCC  switch\n-    THREADLIBS=-pthread\n-    if test \"${enable_parallel_mark}\" = yes; then\n-        AC_DEFINE(PARALLEL_MARK,1)\n-    fi\n-    AC_DEFINE(THREAD_LOCAL_ALLOC,1)\n-    AC_DEFINE(GC_DGUX386_THREADS,1,[support for DB/UX on I386 threads])\n-    AC_DEFINE(DGUX_THREADS,1,[No description])\n-    # Enable _POSIX4A_DRAFT10_SOURCE with flag -pthread\n-    AM_CPPFLAGS=\"-pthread $AM_CPPFLAGS\"\n-    ;;\n  aix)\n     THREADS=posix\n     THREADLIBS=-lpthread\n@@ -255,6 +242,7 @@ AC_MSG_RESULT($THREADLIBS)\n     AC_MSG_ERROR($THREADS is an unknown thread package)\n     ;;\n esac\n+AC_SUBST(THREADCFLAGS)\n AC_SUBST(THREADLIBS)\n \n case \"$host\" in\n@@ -455,22 +443,6 @@ AC_SUBST(addincludes)\n AC_SUBST(addlibs)\n AC_SUBST(addtests)\n \n-#\n-# Check for AViiON Machines running DGUX\n-#\n-ac_is_dgux=no\n-AC_CHECK_HEADER(sys/dg_sys_info.h, [ac_is_dgux=yes])\n-\n-AC_MSG_CHECKING(if host is AViiON running DGUX)\n-AC_MSG_RESULT($ac_is_dgux)\n-    ## :GOTCHA: we do not check anything but sys/dg_sys_info.h\n-if test $ac_is_dgux = yes; then\n-    if test \"$enable_full_debug\" = \"yes\"; then\n-        GC_CFLAGS=\"$GC_CFLAGS -mstandard\"\n-    fi\n-    GC_CFLAGS=\"$GC_CFLAGS -DDGUX -D_DGUX_SOURCE -Di386 -mno-legend\"\n-fi\n-\n dnl As of 4.13a2, the collector will not properly work on Solaris when\n dnl built with gcc and -O.  So we remove -O in the appropriate case.\n dnl Not needed anymore on Solaris.\n@@ -513,9 +485,6 @@ AC_ARG_ENABLE(gc-debug,\n \tAC_MSG_WARN(\"Client must not use -fomit-frame-pointer.\")\n \tAC_DEFINE(SAVE_CALL_COUNT, 8, [number of call frames saved with objects allocated through the debugging interface])\n       ;;\n-      i[3456]86-*-dgux*)\n-\tAC_DEFINE(MAKE_BACK_GRAPH,1)\n-      ;;\n     esac \n   fi])\n \n@@ -547,5 +516,5 @@ fi\n \n AC_CONFIG_HEADERS([include/gc_config.h include/gc_ext_config.h])\n \n-AC_CONFIG_FILES(Makefile include/Makefile threads.mk)\n+AC_CONFIG_FILES(Makefile include/Makefile testsuite/Makefile threads.mk)\n AC_OUTPUT"}, {"sha": "db67a999adf01550ba10da919a04335bd439a5bb", "filename": "boehm-gc/include/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Finclude%2FMakefile.in?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -130,6 +130,7 @@ SED = @SED@\n SET_MAKE = @SET_MAKE@\n SHELL = @SHELL@\n STRIP = @STRIP@\n+THREADCFLAGS = @THREADCFLAGS@\n THREADLIBS = @THREADLIBS@\n VERSION = @VERSION@\n abs_builddir = @abs_builddir@"}, {"sha": "98010bd1f69dff22d5c53351f3cf66d7c844f1b9", "filename": "boehm-gc/testsuite/Makefile.am", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2FMakefile.am?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -0,0 +1,37 @@\n+## Process this file with automake to produce Makefile.in.\n+\n+AUTOMAKE_OPTIONS = foreign dejagnu\n+\n+EXPECT = expect\n+\n+# Override default.\n+DEJATOOL = boehm-gc\n+\n+CLEANFILES = *.exe core* *.log *.sum\n+\n+# We need more things in site.exp, but automake completely controls the\n+# creation of that file; there's no way to append to it without messing up\n+# the dependancy chains.  So we overrule automake.  This rule is exactly\n+# what it would have generated, plus our own additions.\n+site.exp: Makefile\n+\t@echo 'Making a new site.exp file...'\n+\t@echo '## these variables are automatically generated by make ##' >site.tmp\n+\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n+\t@echo '# edit the last section' >>site.tmp\n+\t@echo 'set srcdir $(srcdir)' >>site.tmp\n+\t@echo \"set objdir `pwd`\" >>site.tmp\n+\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n+\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n+\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n+\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n+\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@echo 'set threadcflags \"$(THREADCFLAGS)\"' >>site.tmp\n+\t@echo 'set threadlibs \"$(THREADLIBS)\"' >>site.tmp\n+\t@echo 'set extra_test_libs \"$(EXTRA_TEST_LIBS)\"' >>site.tmp\n+\t@echo '## All variables above are generated by configure. Do Not Edit ##' >>site.tmp\n+\t@test ! -f site.exp || \\\n+\t  sed '1,/^## All variables above are.*##/ d' site.exp >> site.tmp\n+\t@-rm -f site.bak\n+\t@test ! -f site.exp || mv site.exp site.bak\n+\t@mv site.tmp site.exp"}, {"sha": "b12a5c51558e2fbfd6c5a893812fb411dbee9877", "filename": "boehm-gc/testsuite/Makefile.in", "status": "added", "additions": 442, "deletions": 0, "changes": 442, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2FMakefile.in?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -0,0 +1,442 @@\n+# Makefile.in generated by automake 1.11.1 from Makefile.am.\n+# @configure_input@\n+\n+# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,\n+# 2003, 2004, 2005, 2006, 2007, 2008, 2009  Free Software Foundation,\n+# Inc.\n+# This Makefile.in is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+# PARTICULAR PURPOSE.\n+\n+@SET_MAKE@\n+VPATH = @srcdir@\n+pkgdatadir = $(datadir)/@PACKAGE@\n+pkgincludedir = $(includedir)/@PACKAGE@\n+pkglibdir = $(libdir)/@PACKAGE@\n+pkglibexecdir = $(libexecdir)/@PACKAGE@\n+am__cd = CDPATH=\"$${ZSH_VERSION+.}$(PATH_SEPARATOR)\" && cd\n+install_sh_DATA = $(install_sh) -c -m 644\n+install_sh_PROGRAM = $(install_sh) -c\n+install_sh_SCRIPT = $(install_sh) -c\n+INSTALL_HEADER = $(INSTALL_DATA)\n+transform = $(program_transform_name)\n+NORMAL_INSTALL = :\n+PRE_INSTALL = :\n+POST_INSTALL = :\n+NORMAL_UNINSTALL = :\n+PRE_UNINSTALL = :\n+POST_UNINSTALL = :\n+build_triplet = @build@\n+host_triplet = @host@\n+target_triplet = @target@\n+subdir = testsuite\n+DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in\n+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n+am__aclocal_m4_deps = $(top_srcdir)/../config/acx.m4 \\\n+\t$(top_srcdir)/../config/depstand.m4 \\\n+\t$(top_srcdir)/../config/lead-dot.m4 \\\n+\t$(top_srcdir)/../config/multi.m4 \\\n+\t$(top_srcdir)/../config/no-executables.m4 \\\n+\t$(top_srcdir)/../config/override.m4 \\\n+\t$(top_srcdir)/../libtool.m4 $(top_srcdir)/../ltoptions.m4 \\\n+\t$(top_srcdir)/../ltsugar.m4 $(top_srcdir)/../ltversion.m4 \\\n+\t$(top_srcdir)/../lt~obsolete.m4 $(top_srcdir)/configure.ac\n+am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n+\t$(ACLOCAL_M4)\n+CONFIG_HEADER = $(top_builddir)/include/gc_config.h \\\n+\t$(top_builddir)/include/gc_ext_config.h\n+CONFIG_CLEAN_FILES =\n+CONFIG_CLEAN_VPATH_FILES =\n+SOURCES =\n+DIST_SOURCES =\n+RUNTESTDEFAULTFLAGS = --tool $$tool --srcdir $$srcdir\n+RUNTEST = runtest\n+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)\n+ACLOCAL = @ACLOCAL@\n+AMTAR = @AMTAR@\n+AM_CPPFLAGS = @AM_CPPFLAGS@\n+AR = @AR@\n+AS = @AS@\n+AUTOCONF = @AUTOCONF@\n+AUTOHEADER = @AUTOHEADER@\n+AUTOMAKE = @AUTOMAKE@\n+AWK = @AWK@\n+CC = @CC@\n+CCAS = @CCAS@\n+CCASFLAGS = @CCASFLAGS@\n+CCDEPMODE = @CCDEPMODE@\n+CFLAGS = @CFLAGS@\n+CPP = @CPP@\n+CPPFLAGS = @CPPFLAGS@\n+CXX = @CXX@\n+CXXCPP = @CXXCPP@\n+CXXDEPMODE = @CXXDEPMODE@\n+CXXFLAGS = @CXXFLAGS@\n+CYGPATH_W = @CYGPATH_W@\n+DEFS = @DEFS@\n+DEPDIR = @DEPDIR@\n+DSYMUTIL = @DSYMUTIL@\n+DUMPBIN = @DUMPBIN@\n+ECHO_C = @ECHO_C@\n+ECHO_N = @ECHO_N@\n+ECHO_T = @ECHO_T@\n+EGREP = @EGREP@\n+EXEEXT = @EXEEXT@\n+EXTRA_TEST_LIBS = @EXTRA_TEST_LIBS@\n+FGREP = @FGREP@\n+GC_CFLAGS = @GC_CFLAGS@\n+GREP = @GREP@\n+INSTALL = @INSTALL@\n+INSTALL_DATA = @INSTALL_DATA@\n+INSTALL_PROGRAM = @INSTALL_PROGRAM@\n+INSTALL_SCRIPT = @INSTALL_SCRIPT@\n+INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LD = @LD@\n+LDFLAGS = @LDFLAGS@\n+LIBOBJS = @LIBOBJS@\n+LIBS = @LIBS@\n+LIBTOOL = @LIBTOOL@\n+LIPO = @LIPO@\n+LN_S = @LN_S@\n+LTLIBOBJS = @LTLIBOBJS@\n+MAINT = @MAINT@\n+MAKEINFO = @MAKEINFO@\n+MKDIR_P = @MKDIR_P@\n+NM = @NM@\n+NMEDIT = @NMEDIT@\n+O0_CFLAGS = @O0_CFLAGS@\n+OBJDUMP = @OBJDUMP@\n+OBJEXT = @OBJEXT@\n+OTOOL = @OTOOL@\n+OTOOL64 = @OTOOL64@\n+PACKAGE = @PACKAGE@\n+PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@\n+PACKAGE_NAME = @PACKAGE_NAME@\n+PACKAGE_STRING = @PACKAGE_STRING@\n+PACKAGE_TARNAME = @PACKAGE_TARNAME@\n+PACKAGE_URL = @PACKAGE_URL@\n+PACKAGE_VERSION = @PACKAGE_VERSION@\n+PATH_SEPARATOR = @PATH_SEPARATOR@\n+RANLIB = @RANLIB@\n+SED = @SED@\n+SET_MAKE = @SET_MAKE@\n+SHELL = @SHELL@\n+STRIP = @STRIP@\n+THREADCFLAGS = @THREADCFLAGS@\n+THREADLIBS = @THREADLIBS@\n+VERSION = @VERSION@\n+abs_builddir = @abs_builddir@\n+abs_srcdir = @abs_srcdir@\n+abs_top_builddir = @abs_top_builddir@\n+abs_top_srcdir = @abs_top_srcdir@\n+ac_ct_CC = @ac_ct_CC@\n+ac_ct_CXX = @ac_ct_CXX@\n+ac_ct_DUMPBIN = @ac_ct_DUMPBIN@\n+addincludes = @addincludes@\n+addlibs = @addlibs@\n+addobjs = @addobjs@\n+addtests = @addtests@\n+am__include = @am__include@\n+am__leading_dot = @am__leading_dot@\n+am__quote = @am__quote@\n+am__tar = @am__tar@\n+am__untar = @am__untar@\n+bindir = @bindir@\n+build = @build@\n+build_alias = @build_alias@\n+build_cpu = @build_cpu@\n+build_os = @build_os@\n+build_vendor = @build_vendor@\n+builddir = @builddir@\n+datadir = @datadir@\n+datarootdir = @datarootdir@\n+docdir = @docdir@\n+dvidir = @dvidir@\n+exec_prefix = @exec_prefix@\n+extra_ldflags_libgc = @extra_ldflags_libgc@\n+host = @host@\n+host_alias = @host_alias@\n+host_cpu = @host_cpu@\n+host_os = @host_os@\n+host_vendor = @host_vendor@\n+htmldir = @htmldir@\n+includedir = @includedir@\n+infodir = @infodir@\n+install_sh = @install_sh@\n+libdir = @libdir@\n+libexecdir = @libexecdir@\n+localedir = @localedir@\n+localstatedir = @localstatedir@\n+mandir = @mandir@\n+mkdir_p = @mkdir_p@\n+mkinstalldirs = @mkinstalldirs@\n+multi_basedir = @multi_basedir@\n+oldincludedir = @oldincludedir@\n+pdfdir = @pdfdir@\n+prefix = @prefix@\n+program_transform_name = @program_transform_name@\n+psdir = @psdir@\n+sbindir = @sbindir@\n+sharedstatedir = @sharedstatedir@\n+srcdir = @srcdir@\n+sysconfdir = @sysconfdir@\n+target = @target@\n+target_alias = @target_alias@\n+target_all = @target_all@\n+target_cpu = @target_cpu@\n+target_noncanonical = @target_noncanonical@\n+target_os = @target_os@\n+target_vendor = @target_vendor@\n+toolexecdir = @toolexecdir@\n+toolexeclibdir = @toolexeclibdir@\n+top_build_prefix = @top_build_prefix@\n+top_builddir = @top_builddir@\n+top_srcdir = @top_srcdir@\n+AUTOMAKE_OPTIONS = foreign dejagnu\n+EXPECT = expect\n+\n+# Override default.\n+DEJATOOL = boehm-gc\n+CLEANFILES = *.exe core* *.log *.sum\n+all: all-am\n+\n+.SUFFIXES:\n+$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am  $(am__configure_deps)\n+\t@for dep in $?; do \\\n+\t  case '$(am__configure_deps)' in \\\n+\t    *$$dep*) \\\n+\t      ( cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh ) \\\n+\t        && { if test -f $@; then exit 0; else break; fi; }; \\\n+\t      exit 1;; \\\n+\t  esac; \\\n+\tdone; \\\n+\techo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign testsuite/Makefile'; \\\n+\t$(am__cd) $(top_srcdir) && \\\n+\t  $(AUTOMAKE) --foreign testsuite/Makefile\n+.PRECIOUS: Makefile\n+Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status\n+\t@case '$?' in \\\n+\t  *config.status*) \\\n+\t    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \\\n+\t  *) \\\n+\t    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \\\n+\t    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \\\n+\tesac;\n+\n+$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n+\tcd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh\n+\n+$(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)\n+\tcd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh\n+$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)\n+\tcd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh\n+$(am__aclocal_m4_deps):\n+\n+mostlyclean-libtool:\n+\t-rm -f *.lo\n+\n+clean-libtool:\n+\t-rm -rf .libs _libs\n+tags: TAGS\n+TAGS:\n+\n+ctags: CTAGS\n+CTAGS:\n+\n+\n+check-DEJAGNU: site.exp\n+\tsrcdir=`$(am__cd) $(srcdir) && pwd`; export srcdir; \\\n+\tEXPECT=$(EXPECT); export EXPECT; \\\n+\truntest=$(RUNTEST); \\\n+\tif $(SHELL) -c \"$$runtest --version\" > /dev/null 2>&1; then \\\n+\t  exit_status=0; l='$(DEJATOOL)'; for tool in $$l; do \\\n+\t    if $$runtest $(AM_RUNTESTFLAGS) $(RUNTESTDEFAULTFLAGS) $(RUNTESTFLAGS); \\\n+\t    then :; else exit_status=1; fi; \\\n+\t  done; \\\n+\telse echo \"WARNING: could not find \\`runtest'\" 1>&2; :;\\\n+\tfi; \\\n+\texit $$exit_status\n+\n+distclean-DEJAGNU:\n+\t-rm -f site.exp site.bak\n+\t-l='$(DEJATOOL)'; for tool in $$l; do \\\n+\t  rm -f $$tool.sum $$tool.log; \\\n+\tdone\n+\n+distdir: $(DISTFILES)\n+\t@srcdirstrip=`echo \"$(srcdir)\" | sed 's/[].[^$$\\\\*]/\\\\\\\\&/g'`; \\\n+\ttopsrcdirstrip=`echo \"$(top_srcdir)\" | sed 's/[].[^$$\\\\*]/\\\\\\\\&/g'`; \\\n+\tlist='$(DISTFILES)'; \\\n+\t  dist_files=`for file in $$list; do echo $$file; done | \\\n+\t  sed -e \"s|^$$srcdirstrip/||;t\" \\\n+\t      -e \"s|^$$topsrcdirstrip/|$(top_builddir)/|;t\"`; \\\n+\tcase $$dist_files in \\\n+\t  */*) $(MKDIR_P) `echo \"$$dist_files\" | \\\n+\t\t\t   sed '/\\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \\\n+\t\t\t   sort -u` ;; \\\n+\tesac; \\\n+\tfor file in $$dist_files; do \\\n+\t  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \\\n+\t  if test -d $$d/$$file; then \\\n+\t    dir=`echo \"/$$file\" | sed -e 's,/[^/]*$$,,'`; \\\n+\t    if test -d \"$(distdir)/$$file\"; then \\\n+\t      find \"$(distdir)/$$file\" -type d ! -perm -700 -exec chmod u+rwx {} \\;; \\\n+\t    fi; \\\n+\t    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \\\n+\t      cp -fpR $(srcdir)/$$file \"$(distdir)$$dir\" || exit 1; \\\n+\t      find \"$(distdir)/$$file\" -type d ! -perm -700 -exec chmod u+rwx {} \\;; \\\n+\t    fi; \\\n+\t    cp -fpR $$d/$$file \"$(distdir)$$dir\" || exit 1; \\\n+\t  else \\\n+\t    test -f \"$(distdir)/$$file\" \\\n+\t    || cp -p $$d/$$file \"$(distdir)/$$file\" \\\n+\t    || exit 1; \\\n+\t  fi; \\\n+\tdone\n+check-am: all-am\n+\t$(MAKE) $(AM_MAKEFLAGS) check-DEJAGNU\n+check: check-am\n+all-am: Makefile\n+installdirs:\n+install: install-am\n+install-exec: install-exec-am\n+install-data: install-data-am\n+uninstall: uninstall-am\n+\n+install-am: all-am\n+\t@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am\n+\n+installcheck: installcheck-am\n+install-strip:\n+\t$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" \\\n+\t  install_sh_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" INSTALL_STRIP_FLAG=-s \\\n+\t  `test -z '$(STRIP)' || \\\n+\t    echo \"INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'\"` install\n+mostlyclean-generic:\n+\n+clean-generic:\n+\t-test -z \"$(CLEANFILES)\" || rm -f $(CLEANFILES)\n+\n+distclean-generic:\n+\t-test -z \"$(CONFIG_CLEAN_FILES)\" || rm -f $(CONFIG_CLEAN_FILES)\n+\t-test . = \"$(srcdir)\" || test -z \"$(CONFIG_CLEAN_VPATH_FILES)\" || rm -f $(CONFIG_CLEAN_VPATH_FILES)\n+\n+maintainer-clean-generic:\n+\t@echo \"This command is intended for maintainers to use\"\n+\t@echo \"it deletes files that may require special tools to rebuild.\"\n+clean: clean-am\n+\n+clean-am: clean-generic clean-libtool mostlyclean-am\n+\n+distclean: distclean-am\n+\t-rm -f Makefile\n+distclean-am: clean-am distclean-DEJAGNU distclean-generic\n+\n+dvi: dvi-am\n+\n+dvi-am:\n+\n+html: html-am\n+\n+html-am:\n+\n+info: info-am\n+\n+info-am:\n+\n+install-data-am:\n+\n+install-dvi: install-dvi-am\n+\n+install-dvi-am:\n+\n+install-exec-am:\n+\n+install-html: install-html-am\n+\n+install-html-am:\n+\n+install-info: install-info-am\n+\n+install-info-am:\n+\n+install-man:\n+\n+install-pdf: install-pdf-am\n+\n+install-pdf-am:\n+\n+install-ps: install-ps-am\n+\n+install-ps-am:\n+\n+installcheck-am:\n+\n+maintainer-clean: maintainer-clean-am\n+\t-rm -f Makefile\n+maintainer-clean-am: distclean-am maintainer-clean-generic\n+\n+mostlyclean: mostlyclean-am\n+\n+mostlyclean-am: mostlyclean-generic mostlyclean-libtool\n+\n+pdf: pdf-am\n+\n+pdf-am:\n+\n+ps: ps-am\n+\n+ps-am:\n+\n+uninstall-am:\n+\n+.MAKE: check-am install-am install-strip\n+\n+.PHONY: all all-am check check-DEJAGNU check-am clean clean-generic \\\n+\tclean-libtool distclean distclean-DEJAGNU distclean-generic \\\n+\tdistclean-libtool distdir dvi dvi-am html html-am info info-am \\\n+\tinstall install-am install-data install-data-am install-dvi \\\n+\tinstall-dvi-am install-exec install-exec-am install-html \\\n+\tinstall-html-am install-info install-info-am install-man \\\n+\tinstall-pdf install-pdf-am install-ps install-ps-am \\\n+\tinstall-strip installcheck installcheck-am installdirs \\\n+\tmaintainer-clean maintainer-clean-generic mostlyclean \\\n+\tmostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \\\n+\tuninstall uninstall-am\n+\n+\n+# We need more things in site.exp, but automake completely controls the\n+# creation of that file; there's no way to append to it without messing up\n+# the dependancy chains.  So we overrule automake.  This rule is exactly\n+# what it would have generated, plus our own additions.\n+site.exp: Makefile\n+\t@echo 'Making a new site.exp file...'\n+\t@echo '## these variables are automatically generated by make ##' >site.tmp\n+\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n+\t@echo '# edit the last section' >>site.tmp\n+\t@echo 'set srcdir $(srcdir)' >>site.tmp\n+\t@echo \"set objdir `pwd`\" >>site.tmp\n+\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n+\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n+\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n+\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n+\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@echo 'set threadcflags \"$(THREADCFLAGS)\"' >>site.tmp\n+\t@echo 'set threadlibs \"$(THREADLIBS)\"' >>site.tmp\n+\t@echo 'set extra_test_libs \"$(EXTRA_TEST_LIBS)\"' >>site.tmp\n+\t@echo '## All variables above are generated by configure. Do Not Edit ##' >>site.tmp\n+\t@test ! -f site.exp || \\\n+\t  sed '1,/^## All variables above are.*##/ d' site.exp >> site.tmp\n+\t@-rm -f site.bak\n+\t@test ! -f site.exp || mv site.exp site.bak\n+\t@mv site.tmp site.exp\n+\n+# Tell versions [3.59,3.63) of GNU make to not export all variables.\n+# Otherwise a system limit (for SysV at least) may be exceeded.\n+.NOEXPORT:"}, {"sha": "6661e411927fba49ccc3d45dac85756ad4ad2d21", "filename": "boehm-gc/testsuite/boehm-gc.c++/test_cpp.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2B%2B%2Ftest_cpp.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2B%2B%2Ftest_cpp.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2B%2B%2Ftest_cpp.cc?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "previous_filename": "boehm-gc/tests/test_cpp.cc"}, {"sha": "fea4660034886b813b342cfda590311baa83a183", "filename": "boehm-gc/testsuite/boehm-gc.c/c.exp", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fc.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fc.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fc.exp?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -0,0 +1,22 @@\n+# Copyright (C) 2011 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+dg-init\n+boehm-gc-init\n+\n+boehm-gc-dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/*.c]] \"-O2\" \"\"\n+\n+dg-finish"}, {"sha": "1180ab152ad0d46fe44e6ac52fc21f5b2e3f866f", "filename": "boehm-gc/testsuite/boehm-gc.c/gctest.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fgctest.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fgctest.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fgctest.c?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "previous_filename": "boehm-gc/tests/test.c"}, {"sha": "bf563ac1c16c0301d94dbfe59cae10774e0ee111", "filename": "boehm-gc/testsuite/boehm-gc.c/leak_test.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fleak_test.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fleak_test.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fleak_test.c?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "previous_filename": "boehm-gc/tests/leak_test.c"}, {"sha": "5d9360af521dfe1839667dc8c6dc748dec39b090", "filename": "boehm-gc/testsuite/boehm-gc.c/middle.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fmiddle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fmiddle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fmiddle.c?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "previous_filename": "boehm-gc/tests/middle.c"}, {"sha": "eb4cb9bd0184e86e18fa5b345ad58e187a38b240", "filename": "boehm-gc/testsuite/boehm-gc.c/thread_leak_test.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fthread_leak_test.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fthread_leak_test.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Fthread_leak_test.c?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "previous_filename": "boehm-gc/tests/thread_leak_test.c"}, {"sha": "00bcadf19ad3a4763626f21d8e47d29dac77323e", "filename": "boehm-gc/testsuite/boehm-gc.c/trace_test.c", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Ftrace_test.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Ftrace_test.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.c%2Ftrace_test.c?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -1,3 +1,5 @@\n+/* { dg-skip-if \"requires --enable-gc-debug\" *-*-* } */\n+\n #include <stdio.h>\n #define GC_DEBUG\n #include \"gc.h\"", "previous_filename": "boehm-gc/tests/trace_test.c"}, {"sha": "f7b83d85ed5739ad390941128d740769e7d68ab3", "filename": "boehm-gc/testsuite/boehm-gc.lib/lib.exp", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Flib.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Flib.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Flib.exp?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -0,0 +1,26 @@\n+# Copyright (C) 2011 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+dg-init\n+boehm-gc-init\n+\n+# Gather list of tests, skipping library source files.\n+set tests [lsort [glob -nocomplain $srcdir/$subdir/*.c]]\n+set tests [prune $tests $srcdir/$subdir/*lib.c]\n+\n+boehm-gc-dg-runtest $tests \"-O2\" \"\"\n+\n+dg-finish"}, {"sha": "6e13278a6c0858382938ad9d5a54f63e93647b96", "filename": "boehm-gc/testsuite/boehm-gc.lib/staticrootslib.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Fstaticrootslib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Fstaticrootslib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Fstaticrootslib.c?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "previous_filename": "boehm-gc/tests/staticrootslib.c"}, {"sha": "a029ccf4276b9c7a3229b75719028d21d2d64ce5", "filename": "boehm-gc/testsuite/boehm-gc.lib/staticrootstest.c", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Fstaticrootstest.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Fstaticrootstest.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fboehm-gc.lib%2Fstaticrootstest.c?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -1,3 +1,5 @@\n+/* { dg-add-shlib \"staticrootslib.c\" } */\n+\n #include <stdio.h>\n \n #ifndef GC_DEBUG", "previous_filename": "boehm-gc/tests/staticrootstest.c"}, {"sha": "90967cccc18afeb470c705244f4cb9e44f15eb0d", "filename": "boehm-gc/testsuite/config/default.exp", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fconfig%2Fdefault.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Fconfig%2Fdefault.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Fconfig%2Fdefault.exp?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -0,0 +1 @@\n+load_lib \"standard.exp\""}, {"sha": "2376102e9bd57959d7ceec410892587bb893acbf", "filename": "boehm-gc/testsuite/lib/boehm-gc.exp", "status": "added", "additions": 334, "deletions": 0, "changes": 334, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Flib%2Fboehm-gc.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94ea609ab3bfbb3ccba25af4f8575a330ec2753e/boehm-gc%2Ftestsuite%2Flib%2Fboehm-gc.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Ftestsuite%2Flib%2Fboehm-gc.exp?ref=94ea609ab3bfbb3ccba25af4f8575a330ec2753e", "patch": "@@ -0,0 +1,334 @@\n+# Copyright (C) 2011 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+proc load_gcc_lib { filename } {\n+    global srcdir loaded_libs\n+    load_file $srcdir/../../gcc/testsuite/lib/$filename\n+    set loaded_libs($filename) \"\"\n+}\n+\n+load_lib dg.exp\n+load_gcc_lib target-libpath.exp\n+load_gcc_lib wrapper.exp\n+# Required by target-supports-dg.exp.\n+load_gcc_lib target-supports.exp\n+# For dg-skip-if.\n+load_gcc_lib target-supports-dg.exp\n+# For ${tool}_exit.\n+load_gcc_lib gcc-defs.exp\n+# For prune_gcc_output.\n+load_gcc_lib prune.exp\n+\n+set dg-do-what-default run\n+\n+# Define boehm-gc callbacks for dg.exp.\n+\n+# FIXME: The next two are independent of boehm-gc; move to some library.\n+proc ${tool}-dg-test-1 { target_compile prog do_what extra_tool_flags } {\n+\n+    # Set up the compiler flags, based on what we're going to do.\n+\n+    set options [list]\n+    switch $do_what {\n+\t\"compile\" {\n+\t    set compile_type \"assembly\"\n+\t    set output_file \"[file rootname [file tail $prog]].s\"\n+\t}\n+        \"assemble\" {\n+            set compile_type \"object\"\n+            set output_file \"[file rootname [file tail $prog]].o\"\n+        }\n+        \"ltassemble\" {\n+\t    # Needs to be different from assemble since we cannot determine\n+\t    # from $prog whether to produce a regular or a libtool object.\n+            set compile_type \"object\"\n+            set output_file \"[file rootname [file tail $prog]].lo\"\n+        }\n+\t\"link\" {\n+\t    set compile_type \"executable\"\n+\t    # Don't add .exe extension, libtool may strip if from output file.\n+\t    set output_file \"[file rootname [file tail $prog]]\"\n+\t    # If we're linking a libtool object, produce a libtool library.\n+\t    if { [file extension $prog] == \".lo\" } {\n+\t\tset output_file \"lib$output_file.la\"\n+\t    }\n+\t}\n+\t\"run\" {\n+\t    set compile_type \"executable\"\n+\t    # FIXME: \"./\" is to cope with \".\" not being in $PATH.\n+\t    # Should this be handled elsewhere?\n+\t    # YES.\n+\t    set output_file \"./[file rootname [file tail $prog]]\"\n+\t    # This is the only place where we care if an executable was\n+\t    # created or not.  If it was, dg.exp will try to run it.\n+\t    remote_file build delete $output_file\n+\t}\n+\tdefault {\n+\t    perror \"$do_what: not a valid dg-do keyword\"\n+\t    return \"\"\n+\t}\n+    }\n+\n+    if { $extra_tool_flags != \"\" } {\n+\tlappend options \"additional_flags=$extra_tool_flags\"\n+    }\n+\n+    set comp_output [$target_compile \"$prog\" \"$output_file\" \"$compile_type\" $options];\n+\n+    return [list $comp_output $output_file]\n+}\n+\n+proc ${tool}-dg-test { prog do_what extra_tool_flags } {\n+    global tool\n+\n+    return [${tool}-dg-test-1 ${tool}_target_compile $prog $do_what $extra_tool_flags]\n+}\n+\n+proc boehm-gc-init { args } {\n+    global gluefile wrap_flags\n+    global srcdir\n+    global blddirgc\n+    global TOOL_EXECUTABLE\n+    global GCC_UNDER_TEST\n+    global objdir\n+    global gc_include\n+    global gc_lib\n+    global gc_lib_conv\n+    global tool\n+    global tool_root_dir\n+    global ld_library_path\n+\n+    set blddirgc [lookfor_file [get_multilibs] ${tool}]\n+    verbose \"blddirgc: $blddirgc\"\n+\n+    if ![info exists GCC_UNDER_TEST] then {\n+\tif [info exists TOOL_EXECUTABLE] {\n+\t    set GCC_UNDER_TEST $TOOL_EXECUTABLE\n+\t} else {\n+\t    set GCC_UNDER_TEST \"[find_gcc]\"\n+\t}\n+    }\n+\n+    set gccdir [lookfor_file $tool_root_dir gcc/libgcc.a]\n+    if {$gccdir != \"\"} {\n+\tset gccdir [file dirname $gccdir]\n+    }\n+    verbose \"gccdir: $gccdir\"\n+\n+    set ld_library_path \".\"\n+    append ld_library_path \":${gccdir}\"\n+\n+    set compiler \"${gccdir}/xgcc\"\n+    if { [is_remote host] == 0 && [which $compiler] != 0 } {\n+\tforeach i \"[exec $compiler --print-multi-lib]\" {\n+\t    set mldir \"\"\n+\t    regexp -- \"\\[a-z0-9=_/\\.-\\]*;\" $i mldir\n+\t    set mldir [string trimright $mldir \"\\;@\"]\n+\t    if { \"$mldir\" == \".\" } {\n+\t\tcontinue\n+\t    }\n+\t    if { [llength [glob -nocomplain ${gccdir}/${mldir}/libgcc_s*.so.*]] >= 1 } {\n+\t\tappend ld_library_path \":${gccdir}/${mldir}\"\n+\t    }\n+\t}\n+    }\n+    # Add the library path for boehm-gc.\n+    append ld_library_path \":${blddirgc}/.libs\"\n+\n+    # Add the library path for boehm-gc.lib libtool libraries.\n+    append ld_library_path \":.libs\"\n+\n+    verbose \"ld_library_path: $ld_library_path\"\n+\n+    # Point to the headers in boehm-gc.\n+    set gc_include \"${blddirgc}/include\"\n+    verbose \"gc_include: $gc_include\"\n+\n+    set gc_lib \"${blddirgc}/libgcjgc.la\"\n+    verbose \"gc_lib: $gc_lib\"\n+\n+    set gc_lib_conv \"${blddirgc}/libgcjgc_convenience.la\"\n+    verbose \"gc_lib_conv: $gc_lib_conv\"\n+\n+    set_ld_library_path_env_vars\n+    boehm-gc_maybe_build_wrapper \"${objdir}/testglue.o\"\n+}\n+\n+proc boehm-gc_target_compile { source dest type options } {\n+    global gluefile wrap_flags;\n+    global srcdir\n+    global TOOL_OPTIONS\n+    global GCC_UNDER_TEST\n+    global libtool\n+    global gc_include\n+    global gc_lib\n+    global gc_lib_conv\n+    global threadcflags\n+    global threadlibs\n+    global extra_test_libs\n+\n+    if { [target_info needs_status_wrapper]!=\"\" && [info exists gluefile] } {\n+\tlappend options \"libs=${gluefile}\"\n+\tlappend options \"ldflags=$wrap_flags\"\n+    }\n+\n+    # TOOL_OPTIONS must come first, so that it doesn't override testcase\n+    # specific options.\n+    if [info exists TOOL_OPTIONS] {\n+\tlappend options [concat \"additional_flags=$TOOL_OPTIONS\" $options];\n+    }\n+\n+    # Map type to libtool mode.\n+    switch $type {\n+\t\"object\" {\n+\t    set mode \"compile\"\n+\t}\n+\t\"executable\" {\n+\t    set mode \"link\"\n+\t}\n+\tdefault {\n+\t    perror \"$type: unhandled type\"\n+\t    return \"\"\n+\t}\n+    }\n+\n+    # Set this once for reuse in boehm-gc.lib/lib.exp.\n+    set libtool \"../libtool\"\n+    # We have to run silently to avoid DejaGnu lossage.\n+    lappend options \"compiler=$libtool --silent --tag=CC --mode=$mode \\\n+    \t$GCC_UNDER_TEST\"\n+\n+    lappend options \"additional_flags=-I${gc_include} -I${srcdir}/../include\"\n+    lappend options \"additional_flags=${threadcflags}\"\n+\n+    lappend options \"libs=-Wc,-shared-libgcc\"\n+    \n+    if { [file extension $dest] == \".la\" } {\n+\tlappend options \"libs=${gc_lib_conv}\"\n+    } else {\n+\tlappend options \"libs=${gc_lib}\"\n+    }\n+    lappend options \"libs=${threadlibs} ${extra_test_libs}\"\n+\n+    verbose \"options: $options\"\n+    return [target_compile $source $dest $type $options]\n+}\n+\n+# Prune harmless messages.\n+proc boehm-gc-dg-prune { system text } {\n+    # Prune the same messages as the gcc testsuite does.\n+    set text [prune_gcc_output $text]\n+\n+    # Ignore harmless Darwin ranlib warnings.\n+    regsub -all \"(^|\\n)(ranlib: file: \\[^\\n\\]* has no symbols\\n?)+\" $text \"\\\\1\" text\n+\n+    return $text\n+}\n+\n+# Build shared library from LIB.\n+proc boehm-gc-build-shlib { lib flags extra-flags } {\n+    global subdir\n+    global dg-do-what-default\n+    global libtool\n+    global gc_lib_conv\n+\n+    # Determine basename.\n+    set basename \"[file rootname [file tail $lib]]\"\n+    verbose \"basename: $basename\"\n+\n+    # DejaGnu 1.4.4 doesn't support nested calls to dg-test.  Restore\n+    # original state before calling it again.\n+    if { [info procs dg-save-unknown] != [list] } {\n+\trename unknown \"\"\n+\trename dg-save-unknown unknown\n+    }\n+\n+    set saved-dg-do-what ${dg-do-what-default}\n+\n+    # Compile $lib into libtool object.\n+    set dg-do-what-default ltassemble\n+    dg-test -keep-output $lib $flags ${extra-flags}\n+\n+    # FIXME: Explain options.\n+    set shopt \"-version-info 1:2:0 -no-undefined -rpath /nowhere\"\n+\n+    # There's no way to get output_file out of dg-test, only\n+    # ${tool}-dg-test returns it, so hardcode that here.\n+    set dg-do-what-default link\n+    dg-test -keep-output $basename.lo $flags \"${extra-flags} $shopt\"\n+\n+    set dg-do-what-default ${saved-dg-do-what}\n+\n+    # Restore unknown, dg-save-unknown as DejaGnu 1.4.4 dg-test expects them.\n+    if { [info procs dg-save-unknown] == [list] } {\n+    \trename unknown dg-save-unknown\n+\tproc unknown {} {\n+\t}\n+    }\n+\n+    remote_exec host $libtool \"--mode=clean rm -f $basename.lo\"\n+\n+    return lib$basename.la\n+}\n+\n+# Handle dg-add-shlib.\n+proc dg-add-shlib { args } {\n+    global tool\n+    global srcdir subdir\n+    global shlib\n+\n+    if { [llength $args] > 2 } {\n+\terror \"[lindex $args 0]: too many arguments\"\n+\treturn\n+    }\n+\n+    set lib [lindex $args 1]\n+    set lib \"$srcdir/$subdir/$lib\"\n+    verbose -log \"dg-add-shlib $lib\"\n+\n+    upvar tool_flags flags\n+    upvar default_extra_tool_flags extra-flags\n+    # Build support library.\n+    set shlib [boehm-gc-build-shlib $lib $flags ${extra-flags}]\n+\n+    uplevel lappend tool_flags $shlib\n+}\n+\n+# Run boehm-gc testcases.\n+proc boehm-gc-dg-runtest { testcases flags extra-flags } {\n+    global runtests\n+    global libtool\n+    global shlib\n+\n+    set shlib \"\"\n+\n+    foreach testcase $testcases {\n+\t# If we're only testing specific files and this isn't one of them,\n+\t# skip it.\n+\tif ![runtest_file_p $runtests $testcase] {\n+\t    return\n+\t}\n+\n+\t# Run testcase.\n+\t# Keep output, otherwise libtool below won't remove the corresponding\n+\t# file in .libs.\n+\tdg-test -keep-output $testcase $flags ${extra-flags}\n+\n+\t# Remove $execname and eventually $shlib.\n+\tremote_exec host $libtool \"--mode=clean rm -f \\\n+\t\t[file rootname [file tail $testcase]] $shlib\"\n+    }\n+}"}]}