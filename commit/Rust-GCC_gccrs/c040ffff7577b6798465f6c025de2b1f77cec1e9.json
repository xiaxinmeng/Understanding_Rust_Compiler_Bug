{"sha": "c040ffff7577b6798465f6c025de2b1f77cec1e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzA0MGZmZmY3NTc3YjY3OTg0NjVmNmMwMjVkZTJiMWY3N2NlYzFlOQ==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2005-11-10T21:49:29Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-11-10T21:49:29Z"}, "message": "re PR fortran/24643 (Unclassifiable statement on implicitly typed character substring)\n\nfortran/\nPR fortran/24643\n* primary.c (match_varspec): Check for implicitly typed CHARACTER\nvariables before matching substrings.\n\ntestsuite/\nPR fortran/24643\n* gfortran.dg/implicit_6.f90, gfortran.dg/implicit_7.f90: New.\n\nFrom-SVN: r106753", "tree": {"sha": "175d54b20da14c63f04d177c7e4554d912932378", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/175d54b20da14c63f04d177c7e4554d912932378"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c040ffff7577b6798465f6c025de2b1f77cec1e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c040ffff7577b6798465f6c025de2b1f77cec1e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c040ffff7577b6798465f6c025de2b1f77cec1e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c040ffff7577b6798465f6c025de2b1f77cec1e9/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f4b73288dd35d516ff8a3b2b5ba19715beaaace", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f4b73288dd35d516ff8a3b2b5ba19715beaaace", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f4b73288dd35d516ff8a3b2b5ba19715beaaace"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "fbedea28f87c5723973e618cfd43e9776be675c7", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c040ffff7577b6798465f6c025de2b1f77cec1e9", "patch": "@@ -1,3 +1,9 @@\n+2005-11-10  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/24643\n+\t* primary.c (match_varspec): Check for implicitly typed CHARACTER\n+\tvariables before matching substrings.\n+\n 2005-11-09  Steven G. Kargl  <kargls@comcast.net>\n \n \t* trans-intrinsic.c: Typo in comment."}, {"sha": "1cb5d231e4ff848cf6c9e5b661f8db4fb5ddf3f1", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=c040ffff7577b6798465f6c025de2b1f77cec1e9", "patch": "@@ -1634,6 +1634,15 @@ match_varspec (gfc_expr * primary, int equiv_flag)\n     }\n \n check_substring:\n+  if (primary->ts.type == BT_UNKNOWN)\n+    {\n+      if (gfc_get_default_type (sym, sym->ns)->type == BT_CHARACTER)\n+       {\n+         gfc_set_default_type (sym, 0, sym->ns);\n+         primary->ts = sym->ts;\n+       }\n+    }\n+\n   if (primary->ts.type == BT_CHARACTER)\n     {\n       switch (match_substring (primary->ts.cl, equiv_flag, &substring))"}, {"sha": "ec545ea1a979685e814808d920dbd8f203d52501", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c040ffff7577b6798465f6c025de2b1f77cec1e9", "patch": "@@ -1,3 +1,8 @@\n+2005-11-10  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/24643\n+\t* gfortran.dg/implicit_6.f90, gfortran.dg/implicit_7.f90: New.\n+\n 2005-11-10  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* gcc.dg/attr-weakref-1.c: Add exit (0) to avoid spurious"}, {"sha": "bb7fe3221abdd19aa044d1876fc32db0486674b2", "filename": "gcc/testsuite/gfortran.dg/implicit_6.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_6.f90?ref=c040ffff7577b6798465f6c025de2b1f77cec1e9", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile }\n+! PR 24643\n+! substring references on implicitly typed CHARACTER variables didn't work\n+        PROGRAM P\n+        IMPLICIT CHARACTER*8 (Y)\n+        YLOCAL='A'\n+        YBTABLE=YLOCAL(1:2)\n+        END"}, {"sha": "750d2454f37165c183420524490c7718307190d5", "filename": "gcc/testsuite/gfortran.dg/implicit_7.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c040ffff7577b6798465f6c025de2b1f77cec1e9/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_7.f90?ref=c040ffff7577b6798465f6c025de2b1f77cec1e9", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do compile }\n+! PR 24643\n+! This tests a case where the compiler used to ICE in an early\n+! incarnation of the patch\n+ylocal=1\n+ybtable=ylocal(1:2)  ! { dg-error \"Unclassifiable\" }\n+end"}]}