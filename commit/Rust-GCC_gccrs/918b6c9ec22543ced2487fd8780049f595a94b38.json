{"sha": "918b6c9ec22543ced2487fd8780049f595a94b38", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTE4YjZjOWVjMjI1NDNjZWQyNDg3ZmQ4NzgwMDQ5ZjU5NWE5NGIzOA==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-03-22T15:20:17Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-03-22T15:20:17Z"}, "message": "re PR fortran/80142 (Warning: No location in expression ... with -O / -ffrontend-optimize)\n\n2017-03-22  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/80142\n\t* frontend-passes.c (combine_array_constructor): Take\n\tlocation of new expression from constructor expression instead\n\tof constructor.\n\n2017-03-22  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/80142\n\t* gfortran.dg/any_loc.f90: New test case.\n\nFrom-SVN: r246388", "tree": {"sha": "04d07422c565ded933af59995d6e0beebad319aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04d07422c565ded933af59995d6e0beebad319aa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/918b6c9ec22543ced2487fd8780049f595a94b38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/918b6c9ec22543ced2487fd8780049f595a94b38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/918b6c9ec22543ced2487fd8780049f595a94b38", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/918b6c9ec22543ced2487fd8780049f595a94b38/comments", "author": null, "committer": null, "parents": [{"sha": "b1fb3cb042fe2bb006c5382ab9e7c2aba24b786b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1fb3cb042fe2bb006c5382ab9e7c2aba24b786b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1fb3cb042fe2bb006c5382ab9e7c2aba24b786b"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "1dce756ecc6c4618ba5e467c5b8172417e3ff965", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=918b6c9ec22543ced2487fd8780049f595a94b38", "patch": "@@ -1,3 +1,10 @@\n+2017-03-22  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/80142\n+\t* frontend-passes.c (combine_array_constructor): Take\n+\tlocation of new expression from constructor expression instead\n+\tof constructor.\n+\n 2017-03-18  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/79676"}, {"sha": "459967d5c35b62471aecce1c0b592e985fd80b37", "filename": "gcc/fortran/frontend-passes.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ffortran%2Ffrontend-passes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ffortran%2Ffrontend-passes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ffrontend-passes.c?ref=918b6c9ec22543ced2487fd8780049f595a94b38", "patch": "@@ -1381,7 +1381,7 @@ combine_array_constructor (gfc_expr *e)\n       new_expr->ts = e->ts;\n       new_expr->expr_type = EXPR_OP;\n       new_expr->rank = c->expr->rank;\n-      new_expr->where = c->where;\n+      new_expr->where = c->expr->where;\n       new_expr->value.op.op = e->value.op.op;\n \n       if (scalar_first)"}, {"sha": "53474a1b1aa2aed3b75663ad617986db5ff63773", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=918b6c9ec22543ced2487fd8780049f595a94b38", "patch": "@@ -1,3 +1,8 @@\n+2017-03-22  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/80142\n+\t* gfortran.dg/any_loc.f90: New test case.\n+\n 2017-03-22  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n \n \tPR target/80082"}, {"sha": "1a220508d9e8b7845163c3ce96a4e1c3a9fcd91a", "filename": "gcc/testsuite/gfortran.dg/any_loc.f90", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ftestsuite%2Fgfortran.dg%2Fany_loc.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/918b6c9ec22543ced2487fd8780049f595a94b38/gcc%2Ftestsuite%2Fgfortran.dg%2Fany_loc.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fany_loc.f90?ref=918b6c9ec22543ced2487fd8780049f595a94b38", "patch": "@@ -0,0 +1,27 @@\n+! { dg-do compile }\n+! { dg-options \"-ffrontend-optimize\" }\n+! PR fortran/80142 - the location on the expression of the\n+! unrolled any statement was not correctly set.\n+! Test case by Harald Anlauf.\n+MODULE gfcbug140\n+  implicit none\n+  integer ,parameter :: WV_NONE        =  1\n+  integer, parameter :: WV_CDV_4       =  23\n+  integer, parameter :: WV_CDV_8       =  24\n+  integer, parameter :: wv_CDV_list(2) = [ WV_CDV_4, WV_CDV_8 ]\n+  integer            :: basis          = WV_NONE\n+contains\n+  subroutine wave_1d (x)\n+    real, intent(inout) :: x(:,:)\n+    integer             :: oldbase\n+    oldbase = basis\n+    if (any (basis == wv_CDV_list(:))) then\n+    end if\n+    basis = oldbase\n+  end subroutine wave_1d\n+  !-\n+  subroutine mr_gp_mat (A)\n+    real, intent(inout) :: A (:,:)\n+    call wave_1d (A)\n+  end subroutine mr_gp_mat\n+end module gfcbug140"}]}