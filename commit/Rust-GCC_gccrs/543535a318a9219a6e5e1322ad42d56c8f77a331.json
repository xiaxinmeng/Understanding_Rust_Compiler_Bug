{"sha": "543535a318a9219a6e5e1322ad42d56c8f77a331", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQzNTM1YTMxOGE5MjE5YTZlNWUxMzIyYWQ0MmQ1NmM4Zjc3YTMzMQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2007-06-20T14:57:10Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2007-06-20T14:57:10Z"}, "message": "re PR fortran/32140 (Miscompilation with -O1)\n\n2007-06-20  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\tRichard Guenther  <rguenther@suse.de>\n\n\tPR fortran/32140\n\t* trans.c (gfc_build_addr_expr): Use the correct types.\n\n\t* gfortran.fortran-torture/execute/pr32140.f90: New testcase.\n\nCo-Authored-By: Richard Guenther <rguenther@suse.de>\n\nFrom-SVN: r125886", "tree": {"sha": "86489f33ca274a6acfa793a6e56fa8df7a6f6f96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86489f33ca274a6acfa793a6e56fa8df7a6f6f96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/543535a318a9219a6e5e1322ad42d56c8f77a331", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/543535a318a9219a6e5e1322ad42d56c8f77a331", "html_url": "https://github.com/Rust-GCC/gccrs/commit/543535a318a9219a6e5e1322ad42d56c8f77a331", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/543535a318a9219a6e5e1322ad42d56c8f77a331/comments", "author": null, "committer": null, "parents": [{"sha": "8dba2dedd374f19d663a1d727bc4404b3665029f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dba2dedd374f19d663a1d727bc4404b3665029f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dba2dedd374f19d663a1d727bc4404b3665029f"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "fbda11c53402458fc71bb058eed517d4e228dfb8", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=543535a318a9219a6e5e1322ad42d56c8f77a331", "patch": "@@ -1,3 +1,9 @@\n+2007-06-20  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\tRichard Guenther  <rguenther@suse.de>\n+\n+\tPR fortran/32140\n+\t* trans.c (gfc_build_addr_expr): Use the correct types.\n+\n 2007-06-19  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/20863"}, {"sha": "81cd12e21cdefc8548ffab635fb1313a680bd5ff", "filename": "gcc/fortran/trans.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ffortran%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ffortran%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans.c?ref=543535a318a9219a6e5e1322ad42d56c8f77a331", "patch": "@@ -266,7 +266,15 @@ gfc_build_addr_expr (tree type, tree t)\n       && TREE_CODE (base_type) == ARRAY_TYPE\n       && TYPE_MAIN_VARIANT (TREE_TYPE (type))\n \t == TYPE_MAIN_VARIANT (TREE_TYPE (base_type)))\n-    natural_type = type;\n+    {\n+      tree min_val = size_zero_node;\n+      tree type_domain = TYPE_DOMAIN (base_type);\n+      if (type_domain && TYPE_MIN_VALUE (type_domain))\n+        min_val = TYPE_MIN_VALUE (type_domain);\n+      t = build4 (ARRAY_REF, TREE_TYPE (type), t, min_val,\n+\t\t  NULL_TREE, NULL_TREE);\n+      natural_type = type;\n+    }\n   else\n     natural_type = build_pointer_type (base_type);\n "}, {"sha": "716b764d93d9b0692330951747a81d50408d5534", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=543535a318a9219a6e5e1322ad42d56c8f77a331", "patch": "@@ -1,3 +1,9 @@\n+2007-06-20  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\tRichard Guenther  <rguenther@suse.de>\n+\n+\tPR fortran/32140\n+\t* gfortran.fortran-torture/execute/pr32140.f90: New testcase.\n+\n 2007-06-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/31959"}, {"sha": "a756e27792f28739f426a0e24c35fb681d310d34", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/pr32140.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fpr32140.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/543535a318a9219a6e5e1322ad42d56c8f77a331/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fpr32140.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fpr32140.f90?ref=543535a318a9219a6e5e1322ad42d56c8f77a331", "patch": "@@ -0,0 +1,16 @@\n+MODULE TEST\n+CONTAINS\n+PURE FUNCTION s2a_3(s1,s2,s3) RESULT(a)\n+    CHARACTER(LEN=*), INTENT(IN)             :: s1, s2, s3\n+    CHARACTER(LEN=4), DIMENSION(3)        :: a\n+\n+  a(1)=s1; a(2)=s2; a(3)=s3\n+END FUNCTION\n+END MODULE\n+\n+USE TEST\n+character(len=12) :: line\n+write(line,'(3A4)') s2a_3(\"a\",\"bb\",\"ccc\")\n+IF (line.NE.\"a   bb  ccc\") CALL ABORT()\n+END\n+"}]}