{"sha": "b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjg0OGRlZDFkYWE5YjdkMWE5OWJjNGJmYjQxOGZjOWY4NmFlODdhZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2000-07-07T23:49:18Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2000-07-07T23:49:18Z"}, "message": "i386.md (call_pop, [...]): Do not set current_function_uses_pic_offset_table for calls to static functions...\n\n\t* i386.md (call_pop, call, call_value_pop): Do not set\n\tcurrent_function_uses_pic_offset_table for calls to static\n\tfunctions or indirect calls.\n\nFrom-SVN: r34916", "tree": {"sha": "b3ce3f7d24b3a4168fd604c78858d2d36eb922cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3ce3f7d24b3a4168fd604c78858d2d36eb922cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad/comments", "author": null, "committer": null, "parents": [{"sha": "12c2c7aa823ae975e2d5e3cd07af5dfc5ecdb13b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12c2c7aa823ae975e2d5e3cd07af5dfc5ecdb13b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12c2c7aa823ae975e2d5e3cd07af5dfc5ecdb13b"}], "stats": {"total": 40, "additions": 26, "deletions": 14}, "files": [{"sha": "decd31face41903efe72c1556eae48ea56e88ebe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad", "patch": "@@ -1,3 +1,9 @@\n+Sat Jul  8 01:38:25 MET DST 2000  Jan Hubicka  <jh@suse.cz>\n+\n+\t* i386.md (call_pop, call, call_value_pop): Do not set\n+\tcurrent_function_uses_pic_offset_table for calls to static\n+\tfunctions or indirect calls.\n+\n 2000-07-07  Jim Wilson  <wilson@cygnus.com>\n \n \t* config/ia64/ia64.c (rws_access_reg): New local write_count.  If"}, {"sha": "ab2f894f749748246ebd104b443dc1f5a5b97d21", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 20, "deletions": 14, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=b848ded1daa9b7d1a99bc4bfb418fc9f86ae87ad", "patch": "@@ -8200,11 +8200,12 @@\n       emit_insn (gen_call (operands[0], operands[1]));\n       DONE;\n     }\n-\n-  /* ??? Not true for calls to static functions.  */\n-  if (flag_pic)\n+  /* Static functions and indirect calls don't need\n+     current_function_uses_pic_offset_table.  */\n+  if (flag_pic\n+      && constant_call_address_operand (operands[1], SImode)\n+      && !SYMBOL_REF_FLAG (XEXP (operands[1], 0)))\n     current_function_uses_pic_offset_table = 1;\n-\n   if (! call_insn_operand (operands[0], QImode))\n     XEXP (operands[0], 0) = copy_to_mode_reg (Pmode, XEXP (operands[0], 0));\n }\")\n@@ -8254,10 +8255,12 @@\n   \"\"\n   \"\n {\n-  /* ??? Not true for calls to static functions.  */\n-  if (flag_pic)\n+  /* Static functions and indirect calls don't need\n+     current_function_uses_pic_offset_table.  */\n+  if (flag_pic\n+      && constant_call_address_operand (operands[1], SImode)\n+      && !SYMBOL_REF_FLAG (XEXP (operands[1], 0)))\n     current_function_uses_pic_offset_table = 1;\n-\n   if (! call_insn_operand (operands[0], QImode))\n     XEXP (operands[0], 0) = copy_to_mode_reg (Pmode, XEXP (operands[0], 0));\n }\")\n@@ -8314,11 +8317,12 @@\n       emit_insn (gen_call_value (operands[0], operands[1], operands[2]));\n       DONE;\n     }\n-\n-  /* ??? Not true for calls to static functions.  */\n-  if (flag_pic)\n+  /* Static functions and indirect calls don't need\n+     current_function_uses_pic_offset_table.  */\n+  if (flag_pic\n+      && constant_call_address_operand (operands[1], SImode)\n+      && !SYMBOL_REF_FLAG (XEXP (operands[1], 0)))\n     current_function_uses_pic_offset_table = 1;\n-\n   if (! call_insn_operand (operands[1], QImode))\n     XEXP (operands[1], 0) = copy_to_mode_reg (Pmode, XEXP (operands[1], 0));\n }\")\n@@ -8331,10 +8335,12 @@\n   \"\"\n   \"\n {\n-  /* ??? Not true for calls to static functions.  */\n-  if (flag_pic)\n+  /* Static functions and indirect calls don't need\n+     current_function_uses_pic_offset_table.  */\n+  if (flag_pic\n+      && constant_call_address_operand (operands[1], SImode)\n+      && !SYMBOL_REF_FLAG (XEXP (operands[1], 0)))\n     current_function_uses_pic_offset_table = 1;\n-\n   if (! call_insn_operand (operands[1], QImode))\n     XEXP (operands[1], 0) = copy_to_mode_reg (Pmode, XEXP (operands[1], 0));\n }\")"}]}