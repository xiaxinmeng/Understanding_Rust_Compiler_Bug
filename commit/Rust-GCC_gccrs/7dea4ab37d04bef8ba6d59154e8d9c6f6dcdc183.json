{"sha": "7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RlYTRhYjM3ZDA0YmVmOGJhNmQ1OTE1NGU4ZDljNmY2ZGNkYzE4Mw==", "commit": {"author": {"name": "Cesar Philippidis", "email": "cesar@codesourcery.com", "date": "2016-05-20T17:33:44Z"}, "committer": {"name": "Cesar Philippidis", "email": "cesar@gcc.gnu.org", "date": "2016-05-20T17:33:44Z"}, "message": "nvptx.md (sincossf3): New pattern.\n\n\tgcc/\n\t* config/nvptx/nvptx.md (sincossf3): New pattern.\n\n\tgcc/testsuite/\n\t* gcc.target/nvptx/sincos.c: New test.\n\nFrom-SVN: r236523", "tree": {"sha": "3583a0df12293570d05df70bf3aca4c15bd55129", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3583a0df12293570d05df70bf3aca4c15bd55129"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/comments", "author": {"login": "cesarjp", "id": 4576177, "node_id": "MDQ6VXNlcjQ1NzYxNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4576177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cesarjp", "html_url": "https://github.com/cesarjp", "followers_url": "https://api.github.com/users/cesarjp/followers", "following_url": "https://api.github.com/users/cesarjp/following{/other_user}", "gists_url": "https://api.github.com/users/cesarjp/gists{/gist_id}", "starred_url": "https://api.github.com/users/cesarjp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cesarjp/subscriptions", "organizations_url": "https://api.github.com/users/cesarjp/orgs", "repos_url": "https://api.github.com/users/cesarjp/repos", "events_url": "https://api.github.com/users/cesarjp/events{/privacy}", "received_events_url": "https://api.github.com/users/cesarjp/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ef98d365adbe44502de2af37e773cc474f4767c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef98d365adbe44502de2af37e773cc474f4767c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef98d365adbe44502de2af37e773cc474f4767c6"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "69d61eefc9d51681ae09f89c31e9ad355bbc2094", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "patch": "@@ -1,3 +1,7 @@\n+2016-05-20  Cesar Philippidis  <cesar@codesourcery.com>\n+\n+\t* config/nvptx/nvptx.md (sincossf3): New pattern.\n+\n 2016-05-20  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/70738"}, {"sha": "e48412de6a6f6b299f65a63f968c5e988a6d374e", "filename": "gcc/config/nvptx/nvptx.md", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2Fconfig%2Fnvptx%2Fnvptx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2Fconfig%2Fnvptx%2Fnvptx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.md?ref=7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "patch": "@@ -794,6 +794,17 @@\n   \"\"\n   \"%.\\\\tsqrt%#%t0\\\\t%0, %1;\")\n \n+(define_expand \"sincossf3\"\n+  [(set (match_operand:SF 0 \"nvptx_register_operand\" \"=R\")\n+\t(unspec:SF [(match_operand:SF 2 \"nvptx_register_operand\" \"R\")]\n+\t           UNSPEC_COS))\n+   (set (match_operand:SF 1 \"nvptx_register_operand\" \"=R\")\n+\t(unspec:SF [(match_dup 2)] UNSPEC_SIN))]\n+  \"flag_unsafe_math_optimizations\"\n+{\n+  operands[2] = make_safe_from (operands[2], operands[0]);\n+})\n+\n (define_insn \"sinsf2\"\n   [(set (match_operand:SF 0 \"nvptx_register_operand\" \"=R\")\n \t(unspec:SF [(match_operand:SF 1 \"nvptx_register_operand\" \"R\")]"}, {"sha": "919c1241f3a0e63796909bd2ab0ccd14ab7a0d04", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "patch": "@@ -1,3 +1,7 @@\n+2016-05-20  Cesar Philippidis  <cesar@codesourcery.com>\n+\n+\t* gcc.target/nvptx/sincos.c: New test.\n+\n 2016-05-20  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/70572"}, {"sha": "921ec41e69013e594c12af054dacfa7645d36d91", "filename": "gcc/testsuite/gcc.target/nvptx/sincos.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Fsincos.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Fsincos.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Fsincos.c?ref=7dea4ab37d04bef8ba6d59154e8d9c6f6dcdc183", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ffast-math\" } */\n+\n+extern float sinf (float);\n+extern float cosf (float);\n+\n+float\n+sincos_add (float x)\n+{\n+  float s = sinf (x);\n+  float c = cosf (x);\n+\n+  return s + c;\n+}\n+\n+/* { dg-final { scan-assembler-times \"sin.approx.f32\" 1 } } */\n+/* { dg-final { scan-assembler-times \"cos.approx.f32\" 1 } } */"}]}