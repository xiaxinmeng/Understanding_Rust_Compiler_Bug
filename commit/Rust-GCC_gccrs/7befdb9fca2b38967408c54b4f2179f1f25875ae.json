{"sha": "7befdb9fca2b38967408c54b4f2179f1f25875ae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2JlZmRiOWZjYTJiMzg5Njc0MDhjNTRiNGYyMTc5ZjFmMjU4NzVhZQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2002-09-30T18:06:58Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2002-09-30T18:06:58Z"}, "message": "class.c (build_vtbl_initializer): Add cast.\n\n\t* class.c (build_vtbl_initializer): Add cast.\n\t(add_vcall_offset_vtbl_entries_1):\n\tUse TARGET_VTABLE_DATA_ENTRY_DISTANCE for offset.\n\nFrom-SVN: r57659", "tree": {"sha": "8bde1465090dcea7cb5f04c2cb04135030fea85d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bde1465090dcea7cb5f04c2cb04135030fea85d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7befdb9fca2b38967408c54b4f2179f1f25875ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7befdb9fca2b38967408c54b4f2179f1f25875ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7befdb9fca2b38967408c54b4f2179f1f25875ae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7befdb9fca2b38967408c54b4f2179f1f25875ae/comments", "author": null, "committer": null, "parents": [{"sha": "f2bf5da86df7166c04d59d3cd9d3902eb424fbbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2bf5da86df7166c04d59d3cd9d3902eb424fbbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2bf5da86df7166c04d59d3cd9d3902eb424fbbb"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "c3690f3dca1bc7ae987764dba5886a8dbe3c86f2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7befdb9fca2b38967408c54b4f2179f1f25875ae/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7befdb9fca2b38967408c54b4f2179f1f25875ae/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7befdb9fca2b38967408c54b4f2179f1f25875ae", "patch": "@@ -1,3 +1,9 @@\n+2002-09-30  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* class.c (build_vtbl_initializer): Add cast.\n+\t(add_vcall_offset_vtbl_entries_1):\n+\tUse TARGET_VTABLE_DATA_ENTRY_DISTANCE for offset.\n+\n 2002-09-30  Mark Mitchell  <mark@codesourcery.com>\n \n \t* class.c (walk_subobject_offsets): Correct the calculation of"}, {"sha": "5d46eaa3c4e5e9f5a14f0a3d3c25fb45690d2f38", "filename": "gcc/cp/class.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7befdb9fca2b38967408c54b4f2179f1f25875ae/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7befdb9fca2b38967408c54b4f2179f1f25875ae/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=7befdb9fca2b38967408c54b4f2179f1f25875ae", "patch": "@@ -7616,7 +7616,10 @@ build_vtbl_initializer (binfo, orig_binfo, t, rtti_binfo, non_fn_entries_p)\n \t  int i;\n \n \t  for (i = 1; i < TARGET_VTABLE_DATA_ENTRY_DISTANCE; ++i)\n-\t    add = tree_cons (NULL_TREE, null_pointer_node, add);\n+\t    add = tree_cons (NULL_TREE,\n+\t\t\t     build_c_cast (vtable_entry_type,\n+\t\t\t\t     size_zero_node),\n+\t\t\t     add);\n \t  *prev = add;\n \t}\n     }\n@@ -8061,7 +8064,8 @@ add_vcall_offset_vtbl_entries_1 (binfo, vid)\n \n       /* The next vcall offset will be found at a more negative\n \t offset.  */\n-      vid->index = size_binop (MINUS_EXPR, vid->index, ssize_int (1));\n+      vid->index = size_binop (MINUS_EXPR, vid->index,\n+\t\t\t       ssize_int (TARGET_VTABLE_DATA_ENTRY_DISTANCE));\n \n       /* Keep track of this function.  */\n       VARRAY_PUSH_TREE (vid->fns, derived_virtuals);"}]}