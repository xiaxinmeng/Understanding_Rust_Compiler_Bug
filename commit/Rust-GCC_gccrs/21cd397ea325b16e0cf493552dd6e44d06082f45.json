{"sha": "21cd397ea325b16e0cf493552dd6e44d06082f45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjFjZDM5N2VhMzI1YjE2ZTBjZjQ5MzU1MmRkNmU0NGQwNjA4MmY0NQ==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2015-05-11T21:03:50Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2015-05-11T21:03:50Z"}, "message": "Fix fortran/66100 bound simplification ICE\n\n        PR fortran/66100\ngcc/fortran/\n        * simplify.c (simplify_bound): Fix assert to accept subobject * arrays.\ngcc/testsuite/\n        * gfortran.dg/bound_simplification_6.f90: New.\n\nFrom-SVN: r223019", "tree": {"sha": "5a292cf0b9169109a599d885af6a97ff5385a944", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a292cf0b9169109a599d885af6a97ff5385a944"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/21cd397ea325b16e0cf493552dd6e44d06082f45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21cd397ea325b16e0cf493552dd6e44d06082f45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21cd397ea325b16e0cf493552dd6e44d06082f45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21cd397ea325b16e0cf493552dd6e44d06082f45/comments", "author": null, "committer": null, "parents": [{"sha": "caadc44d7b7dd110da85d5564749036cc4538cf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caadc44d7b7dd110da85d5564749036cc4538cf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/caadc44d7b7dd110da85d5564749036cc4538cf8"}], "stats": {"total": 41, "additions": 39, "deletions": 2}, "files": [{"sha": "fb6824513aa962c311ee96852ba9194cb768af87", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=21cd397ea325b16e0cf493552dd6e44d06082f45", "patch": "@@ -1,3 +1,8 @@\n+2015-05-11  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\tPR fortran/66100\n+\t* simplify.c (simplify_bound): Fix assert to accept subobject arrays.\n+\n 2015-05-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/66041"}, {"sha": "f49c6c08851e9720dff8aedda5387a9286891096", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=21cd397ea325b16e0cf493552dd6e44d06082f45", "patch": "@@ -3463,8 +3463,8 @@ simplify_bound (gfc_expr *array, gfc_expr *dim, gfc_expr *kind, int upper)\n   gcc_assert (!as\n \t      || (as->type != AS_DEFERRED\n \t\t  && array->expr_type == EXPR_VARIABLE\n-\t\t  && !array->symtree->n.sym->attr.allocatable\n-\t\t  && !array->symtree->n.sym->attr.pointer));\n+\t\t  && !gfc_expr_attr (array).allocatable\n+\t\t  && !gfc_expr_attr (array).pointer));\n \n   if (dim == NULL)\n     {"}, {"sha": "0c97ea2f84113bdb882fe324e4a6ce7792a848c9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=21cd397ea325b16e0cf493552dd6e44d06082f45", "patch": "@@ -1,3 +1,8 @@\n+2015-05-11  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\tPR fortran/66100\n+\t* gfortran.dg/bound_simplification_6.f90: New.\n+\n 2015-05-11  Steve Ellcey  <sellcey@mips.com>\n \n \t* gcc.target/mips/branch-1.c: Pass argument to bar()."}, {"sha": "fb178364d1519405df9ab9f94d705e965f72d58d", "filename": "gcc/testsuite/gfortran.dg/bound_simplification_6.f90", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ftestsuite%2Fgfortran.dg%2Fbound_simplification_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21cd397ea325b16e0cf493552dd6e44d06082f45/gcc%2Ftestsuite%2Fgfortran.dg%2Fbound_simplification_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fbound_simplification_6.f90?ref=21cd397ea325b16e0cf493552dd6e44d06082f45", "patch": "@@ -0,0 +1,27 @@\n+! { dg-do compile }\n+! { dg-additional-options \"-fdump-tree-original\" }\n+!\n+! PR fortran/66100\n+! ICE on lbound simplification\n+!\n+! Original test case by Joost VandeVondele <Joost.VandeVondele@mat.ethz.ch>\n+! Reduced by Thomas Koenig <tkoenig@gcc.gnu.org>\n+!\n+MODULE qs_integrate_potential_low\n+  INTEGER, PARAMETER :: dp = 8\n+  TYPE cell_type\n+    REAL(KIND=8) :: h_inv(3,3)\n+  END TYPE\n+  TYPE(cell_type), POINTER                 :: cell\n+  REAL(KIND=dp), DIMENSION(3)              :: rp\n+  CONTAINS\n+    SUBROUTINE integrate_general_opt()\n+    REAL(KIND=dp) :: gp(3)\n+    INTEGER :: ng\n+    if (any(lbound(cell%h_inv) /= 1)) call abort\n+    if (any(ubound(cell%h_inv) /= 3)) call abort\n+    END SUBROUTINE integrate_general_opt\n+END MODULE qs_integrate_potential_low\n+! { dg-final { scan-tree-dump-not \"bound\" \"original\" } }\n+! { dg-final { scan-tree-dump-not \"abort\" \"original\" } }\n+! { dg-final { cleanup-tree-dump \"original\" } }"}]}