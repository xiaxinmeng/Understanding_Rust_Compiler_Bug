{"sha": "b204e984c7689767e4a853ca09e7fda1406a201b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjIwNGU5ODRjNzY4OTc2N2U0YTg1M2NhMDllN2ZkYTE0MDZhMjAxYg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2015-10-26T11:44:33Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-26T11:44:33Z"}, "message": "osint-c.ads: Minor comment update.\n\n2015-10-26  Arnaud Charlet  <charlet@adacore.com>\n\n\t* osint-c.ads: Minor comment update.\n\n2015-10-26  Arnaud Charlet  <charlet@adacore.com>\n\n\t* s-osinte-hpux.ads, s-osinte-aix.ads, s-osinte-solaris-posix.ads,\n\ts-osinte-darwin.ads, s-osinte-android.ads, s-osinte-freebsd.ads,\n\ts-taprop-posix.adb (Get_Page_Size): C function returns an int. Adjust\n\tcallers accordingly.\n\nFrom-SVN: r229342", "tree": {"sha": "3940af943be39472ac7134b67bf09a1d249fc6b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3940af943be39472ac7134b67bf09a1d249fc6b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b204e984c7689767e4a853ca09e7fda1406a201b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b204e984c7689767e4a853ca09e7fda1406a201b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b204e984c7689767e4a853ca09e7fda1406a201b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b204e984c7689767e4a853ca09e7fda1406a201b/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "356ffab8a2f26638a14d77c2e926fee9c4a67ad1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/356ffab8a2f26638a14d77c2e926fee9c4a67ad1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/356ffab8a2f26638a14d77c2e926fee9c4a67ad1"}], "stats": {"total": 60, "additions": 32, "deletions": 28}, "files": [{"sha": "76f1356b279d39d4be846ab20982b12d321cfb99", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -1,3 +1,14 @@\n+2015-10-26  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* osint-c.ads: Minor comment update.\n+\n+2015-10-26  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* s-osinte-hpux.ads, s-osinte-aix.ads, s-osinte-solaris-posix.ads,\n+\ts-osinte-darwin.ads, s-osinte-android.ads, s-osinte-freebsd.ads,\n+\ts-taprop-posix.adb (Get_Page_Size): C function returns an int. Adjust\n+\tcallers accordingly.\n+\n 2015-10-26  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* exp_ch4.adb (Is_OK_Object_Reference): New routine."}, {"sha": "6819ec037ad15db69e991d7f30b9b6e80dd27d84", "filename": "gcc/ada/osint-c.ads", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fosint-c.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fosint-c.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint-c.ads?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -111,8 +111,7 @@ package Osint.C is\n    procedure Set_File_Name (Ext : String);\n    --  Sets a default file name from the main compiler source name. Ext is the\n    --  extension, e.g. \"ali\" for a library information file. The name is in\n-   --  Name_Buffer (with length in Name_Len) on return. This is visible in\n-   --  the spec since it used directly by clients in the .Net case.\n+   --  Name_Buffer (with length in Name_Len) on return.\n \n    --------------------------------\n    -- Library Information Output --"}, {"sha": "02e843718b645e12782e9698e1347e4d8909faa7", "filename": "gcc/ada/s-osinte-aix.ads", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-aix.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-aix.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-aix.ads?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --             Copyright (C) 1991-1994, Florida State University            --\n---          Copyright (C) 1995-2014, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1995-2015, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -319,8 +319,7 @@ package System.OS_Interface is\n    --  Returns the stack base of the specified thread. Only call this function\n    --  when Stack_Base_Available is True.\n \n-   function Get_Page_Size return size_t;\n-   function Get_Page_Size return Address;\n+   function Get_Page_Size return int;\n    pragma Import (C, Get_Page_Size, \"getpagesize\");\n    --  Returns the size of a page\n "}, {"sha": "88dc03eb7ca901991e9de2c29508f4df47c45514", "filename": "gcc/ada/s-osinte-android.ads", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-android.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-android.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-android.ads?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -317,8 +317,7 @@ package System.OS_Interface is\n      return Address is (Null_Address);\n    --  This is a dummy procedure to share some GNULLI files\n \n-   function Get_Page_Size return size_t;\n-   function Get_Page_Size return Address;\n+   function Get_Page_Size return int;\n    pragma Import (C, Get_Page_Size, \"_getpagesize\");\n    --  Returns the size of a page\n "}, {"sha": "0dbbdfe0599cc30f9fa91537be482d8339562b11", "filename": "gcc/ada/s-osinte-darwin.ads", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-darwin.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-darwin.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-darwin.ads?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --             Copyright (C) 1991-1994, Florida State University            --\n---          Copyright (C) 1995-2014, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1995-2015, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -299,8 +299,7 @@ package System.OS_Interface is\n    --  returns the stack base of the specified thread. Only call this function\n    --  when Stack_Base_Available is True.\n \n-   function Get_Page_Size return size_t;\n-   function Get_Page_Size return System.Address;\n+   function Get_Page_Size return int;\n    pragma Import (C, Get_Page_Size, \"getpagesize\");\n    --  Returns the size of a page\n "}, {"sha": "8a0eec63c6e4296fd9f7cafbf71cbbca66fa283b", "filename": "gcc/ada/s-osinte-freebsd.ads", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-freebsd.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-freebsd.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-freebsd.ads?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -7,7 +7,7 @@\n --                                   S p e c                                --\n --                                                                          --\n --             Copyright (C) 1991-1994, Florida State University            --\n---          Copyright (C) 1995-2014, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1995-2015, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -332,8 +332,7 @@ package System.OS_Interface is\n    --  returns the stack base of the specified thread. Only call this function\n    --  when Stack_Base_Available is True.\n \n-   function Get_Page_Size return size_t;\n-   function Get_Page_Size return Address;\n+   function Get_Page_Size return int;\n    pragma Import (C, Get_Page_Size, \"getpagesize\");\n    --  Returns the size of a page\n "}, {"sha": "ab22dad81c84a98c3898655d75c38c6934e294e5", "filename": "gcc/ada/s-osinte-hpux.ads", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-hpux.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-hpux.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-hpux.ads?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --               Copyright (C) 1991-1994, Florida State University          --\n---            Copyright (C) 1995-2014, Free Software Foundation, Inc.       --\n+--            Copyright (C) 1995-2015, Free Software Foundation, Inc.       --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -301,8 +301,7 @@ package System.OS_Interface is\n    --  Returns the stack base of the specified thread. Only call this function\n    --  when Stack_Base_Available is True.\n \n-   function Get_Page_Size return size_t;\n-   function Get_Page_Size return Address;\n+   function Get_Page_Size return int;\n    pragma Import (C, Get_Page_Size, \"getpagesize\");\n    --  Returns the size of a page\n "}, {"sha": "09f9f1f34905238612edeee3e3bf498d9e7048a7", "filename": "gcc/ada/s-osinte-solaris-posix.ads", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-solaris-posix.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-osinte-solaris-posix.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-solaris-posix.ads?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --             Copyright (C) 1991-1994, Florida State University            --\n---          Copyright (C) 1995-2014, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1995-2015, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -300,8 +300,7 @@ package System.OS_Interface is\n    --  Returns the stack base of the specified thread. Only call this function\n    --  when Stack_Base_Available is True.\n \n-   function Get_Page_Size return size_t;\n-   function Get_Page_Size return Address;\n+   function Get_Page_Size return int;\n    pragma Import (C, Get_Page_Size, \"getpagesize\");\n    --  Returns the size of a page\n "}, {"sha": "5ed7badc85384c13010272a9faebfe47cc3271c9", "filename": "gcc/ada/s-taprop-posix.adb", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-taprop-posix.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b204e984c7689767e4a853ca09e7fda1406a201b/gcc%2Fada%2Fs-taprop-posix.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-taprop-posix.adb?ref=b204e984c7689767e4a853ca09e7fda1406a201b", "patch": "@@ -315,21 +315,20 @@ package body System.Task_Primitives.Operations is\n \n    procedure Stack_Guard (T : ST.Task_Id; On : Boolean) is\n       Stack_Base : constant Address := Get_Stack_Base (T.Common.LL.Thread);\n-      Guard_Page_Address : Address;\n-\n-      Res : Interfaces.C.int;\n+      Page_Size  : Address;\n+      Res        : Interfaces.C.int;\n \n    begin\n       if Stack_Base_Available then\n \n          --  Compute the guard page address\n \n-         Guard_Page_Address :=\n-           Stack_Base - (Stack_Base mod Get_Page_Size) + Get_Page_Size;\n-\n+         Page_Size := Address (Get_Page_Size);\n          Res :=\n-           mprotect (Guard_Page_Address, Get_Page_Size,\n-                     prot => (if On then PROT_ON else PROT_OFF));\n+           mprotect\n+             (Stack_Base - (Stack_Base mod Page_Size) + Page_Size,\n+              size_t (Page_Size),\n+              prot => (if On then PROT_ON else PROT_OFF));\n          pragma Assert (Res = 0);\n       end if;\n    end Stack_Guard;\n@@ -978,7 +977,8 @@ package body System.Task_Primitives.Operations is\n    is\n       Attributes          : aliased pthread_attr_t;\n       Adjusted_Stack_Size : Interfaces.C.size_t;\n-      Page_Size           : constant Interfaces.C.size_t := Get_Page_Size;\n+      Page_Size           : constant Interfaces.C.size_t :=\n+                              Interfaces.C.size_t (Get_Page_Size);\n       Result              : Interfaces.C.int;\n \n       function Thread_Body_Access is new"}]}