{"sha": "565e35c947856aca0d02fd0db6456a5ba1611739", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY1ZTM1Yzk0Nzg1NmFjYTBkMDJmZDBkYjY0NTZhNWJhMTYxMTczOQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-01-18T19:33:01Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-01-18T19:33:01Z"}, "message": "m68k.md (cmpsi): Remove outdated flag_pic handling.\n\ngcc/\n\t* config/m68k/m68k.md (cmpsi): Remove outdated flag_pic handling.\n\ngcc/testsuite/\n200x-xx-xx  Nathan Sidwell  <nathan@codesourcery.com>\n\n\t* gcc.dg/m68k-pic-1.c: New.\n\nFrom-SVN: r120919", "tree": {"sha": "b6893787de4482b49a5a727d8cdfb4c7bd281bf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6893787de4482b49a5a727d8cdfb4c7bd281bf8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/565e35c947856aca0d02fd0db6456a5ba1611739", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/565e35c947856aca0d02fd0db6456a5ba1611739", "html_url": "https://github.com/Rust-GCC/gccrs/commit/565e35c947856aca0d02fd0db6456a5ba1611739", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/565e35c947856aca0d02fd0db6456a5ba1611739/comments", "author": null, "committer": null, "parents": [{"sha": "36e04090c1fe913d3f1a2d5bf2f8cc9c645083f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36e04090c1fe913d3f1a2d5bf2f8cc9c645083f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36e04090c1fe913d3f1a2d5bf2f8cc9c645083f5"}], "stats": {"total": 37, "additions": 26, "deletions": 11}, "files": [{"sha": "91d9a0c91d34a703622172a470fbf1df501b8b0c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=565e35c947856aca0d02fd0db6456a5ba1611739", "patch": "@@ -1,3 +1,7 @@\n+2007-01-18  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* config/m68k/m68k.md (cmpsi): Remove outdated flag_pic handling.\n+\n 2007-01-18  Kazu Hirata  <kazu@codesourcery.com>\n \t    Richard Sandiford  <richard@codesourcery.com>\n "}, {"sha": "f7971923706144738883c9975ec7d9ac4e19a17a", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=565e35c947856aca0d02fd0db6456a5ba1611739", "patch": "@@ -308,24 +308,13 @@\n     }\n })\n \n-;; This is the second \"hook\" for PIC code (in addition to movsi). See\n-;; comment of movsi for a description of PIC handling.\n (define_expand \"cmpsi\"\n   [(set (cc0)\n \t(compare (match_operand:SI 0 \"nonimmediate_operand\" \"\")\n \t\t (match_operand:SI 1 \"general_operand\" \"\")))]\n   \"\"\n {\n   m68k_last_compare_had_fp_operands = 0;\n-  if (flag_pic && !TARGET_PCREL && symbolic_operand (operands[1], SImode))\n-    {\n-      /* The source is an address which requires PIC relocation.\n-         Call legitimize_pic_address with the source, mode, and a relocation\n-         register (a new pseudo, or the final destination if reload_in_progress\n-         is set).   Then fall through normally */\n-      rtx temp = reload_in_progress ? operands[0] : gen_reg_rtx (Pmode);\n-      operands[1] = legitimize_pic_address (operands[1], SImode, temp);\n-    }\n })\n \n ;; A composite of the cmp, cmpa, cmpi & cmpm m68000 op codes."}, {"sha": "bac8a24077f96e2f5a546c3bfcda2c8ba10cd676", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=565e35c947856aca0d02fd0db6456a5ba1611739", "patch": "@@ -1,3 +1,7 @@\n+2007-01-18  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* gcc.dg/m68k-pic-1.c: New.\n+\n 2007-01-18  Roger Sayle  <roger@eyesopen.com>\n \n \t* gfortran.dg/array_memcpy_4.f90: New test case."}, {"sha": "631c2527501517f0d22b517fcb86dbb4c3704322", "filename": "gcc/testsuite/gcc.dg/m68k-pic-1.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2Ftestsuite%2Fgcc.dg%2Fm68k-pic-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565e35c947856aca0d02fd0db6456a5ba1611739/gcc%2Ftestsuite%2Fgcc.dg%2Fm68k-pic-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fm68k-pic-1.c?ref=565e35c947856aca0d02fd0db6456a5ba1611739", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile { target m68k-*-* } }  */\n+/* { dg-options \"-O2 -fpic\" }  */\n+\n+extern void Foo (void *);\n+\n+char *ary[] = {\"a\", \"b\", \"c\", \"d\", \"e\"};\n+\n+void Bar (void)\n+{\n+  int cnt = 0;\n+\n+  for (cnt = 0; cnt < 4;  ++cnt)\n+    {\n+      char *ptr = ary[cnt];\n+\n+      Foo (&ptr);\n+    }\n+}"}]}