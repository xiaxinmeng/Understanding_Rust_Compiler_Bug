{"sha": "e128aaa6e5d792425afffdeac421f5076c15b9f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTEyOGFhYTZlNWQ3OTI0MjVhZmZmZGVhYzQyMWY1MDc2YzE1YjlmMA==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@linux.ibm.com", "date": "2020-12-16T18:33:44Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@linux.ibm.com", "date": "2020-12-16T18:50:35Z"}, "message": "Fix instruction length for MMA insns.\n\nPrefixed instructions should not have their length explicitly set to '8'. The function get_attr_length() will adjust the length appropriately based on the value of the \"prefixed\" attribute.\n\n2020-12-16  Pat Haugen  <pthaugen@linux.ibm.com>\n\ngcc/\n\t* config/rs6000/mma.md (*movxo, mma_<vvi4i4i8>, mma_<avvi4i4i8>,\n\tmma_<vvi4i4i2>, mma_<avvi4i4i2>, mma_<vvi4i4>, mma_<avvi4i4>,\n\tmma_<pvi4i2>, mma_<apvi4i2>, mma_<vvi4i4i4>, mma_<avvi4i4i4>):\n\tRemove explicit setting of length attribute.", "tree": {"sha": "c2768d2fbfcf202fa5e8a6436e21a63415cf07df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2768d2fbfcf202fa5e8a6436e21a63415cf07df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e128aaa6e5d792425afffdeac421f5076c15b9f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e128aaa6e5d792425afffdeac421f5076c15b9f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e128aaa6e5d792425afffdeac421f5076c15b9f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e128aaa6e5d792425afffdeac421f5076c15b9f0/comments", "author": null, "committer": null, "parents": [{"sha": "8379916b167de9bebc32401526b6f53d06dca349", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8379916b167de9bebc32401526b6f53d06dca349", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8379916b167de9bebc32401526b6f53d06dca349"}], "stats": {"total": 32, "additions": 11, "deletions": 21}, "files": [{"sha": "ef4394416b6f872a3e883346c44048880a64a77c", "filename": "gcc/config/rs6000/mma.md", "status": "modified", "additions": 11, "deletions": 21, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e128aaa6e5d792425afffdeac421f5076c15b9f0/gcc%2Fconfig%2Frs6000%2Fmma.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e128aaa6e5d792425afffdeac421f5076c15b9f0/gcc%2Fconfig%2Frs6000%2Fmma.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fmma.md?ref=e128aaa6e5d792425afffdeac421f5076c15b9f0", "patch": "@@ -318,7 +318,7 @@\n   DONE;\n }\n   [(set_attr \"type\" \"vecload,vecstore,veclogical\")\n-   (set_attr \"length\" \"8,8,16\")\n+   (set_attr \"length\" \"*,*,16\")\n    (set_attr \"max_prefixed_insns\" \"2,2,*\")])\n \n (define_expand \"mma_assemble_pair\"\n@@ -539,8 +539,7 @@\n \t\t    MMA_VVI4I4I8))]\n   \"TARGET_MMA\"\n   \"<vvi4i4i8> %A0,%x1,%x2,%3,%4,%5\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<avvi4i4i8>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -553,8 +552,7 @@\n \t\t    MMA_AVVI4I4I8))]\n   \"TARGET_MMA\"\n   \"<avvi4i4i8> %A0,%x2,%x3,%4,%5,%6\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<vvi4i4i2>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -566,8 +564,7 @@\n \t\t    MMA_VVI4I4I2))]\n   \"TARGET_MMA\"\n   \"<vvi4i4i2> %A0,%x1,%x2,%3,%4,%5\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<avvi4i4i2>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -580,8 +577,7 @@\n \t\t    MMA_AVVI4I4I2))]\n   \"TARGET_MMA\"\n   \"<avvi4i4i2> %A0,%x2,%x3,%4,%5,%6\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<vvi4i4>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -592,8 +588,7 @@\n \t\t    MMA_VVI4I4))]\n   \"TARGET_MMA\"\n   \"<vvi4i4> %A0,%x1,%x2,%3,%4\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<avvi4i4>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -605,8 +600,7 @@\n \t\t    MMA_AVVI4I4))]\n   \"TARGET_MMA\"\n   \"<avvi4i4> %A0,%x2,%x3,%4,%5\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<pvi4i2>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -617,8 +611,7 @@\n \t\t    MMA_PVI4I2))]\n   \"TARGET_MMA\"\n   \"<pvi4i2> %A0,%x1,%x2,%3,%4\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<apvi4i2>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -630,8 +623,7 @@\n \t\t    MMA_APVI4I2))]\n   \"TARGET_MMA\"\n   \"<apvi4i2> %A0,%x2,%x3,%4,%5\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<vvi4i4i4>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -643,8 +635,7 @@\n \t\t    MMA_VVI4I4I4))]\n   \"TARGET_MMA\"\n   \"<vvi4i4i4> %A0,%x1,%x2,%3,%4,%5\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])\n \n (define_insn \"mma_<avvi4i4i4>\"\n   [(set (match_operand:XO 0 \"fpr_reg_operand\" \"=&d\")\n@@ -657,5 +648,4 @@\n \t\t    MMA_AVVI4I4I4))]\n   \"TARGET_MMA\"\n   \"<avvi4i4i4> %A0,%x2,%x3,%4,%5,%6\"\n-  [(set_attr \"type\" \"mma\")\n-   (set_attr \"length\" \"8\")])\n+  [(set_attr \"type\" \"mma\")])"}]}