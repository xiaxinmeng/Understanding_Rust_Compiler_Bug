{"sha": "9bbc95654de572e68a6afe4dd892721d34304ed6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWJiYzk1NjU0ZGU1NzJlNjhhNmFmZTRkZDg5MjcyMWQzNDMwNGVkNg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-05-20T17:13:47Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-05-20T17:13:47Z"}, "message": "re PR c++/12288 (unintelligible error message for constructor declaration with misspelled type)\n\n/cp\n2013-05-20  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/12288\n\t* parser.c (cp_parser_parameter_declaration): Check return value\n\tof cp_parser_parse_and_diagnose_invalid_type_name.\n\n/testsuite\n2013-05-20  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/12288\n\t* g++.dg/parse/error52.C: New.\n\t* g++.dg/parse/error3.C: Adjust.\n\t* g++.dg/parse/error36.C: Likewise.\n\nFrom-SVN: r199115", "tree": {"sha": "8374e95e085b76ea9278b61fa12de7e51d6bc314", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8374e95e085b76ea9278b61fa12de7e51d6bc314"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9bbc95654de572e68a6afe4dd892721d34304ed6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bbc95654de572e68a6afe4dd892721d34304ed6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bbc95654de572e68a6afe4dd892721d34304ed6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bbc95654de572e68a6afe4dd892721d34304ed6/comments", "author": null, "committer": null, "parents": [{"sha": "32bfcf80647d3fd3a658c7032a5aebe767341893", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32bfcf80647d3fd3a658c7032a5aebe767341893", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32bfcf80647d3fd3a658c7032a5aebe767341893"}], "stats": {"total": 31, "additions": 27, "deletions": 4}, "files": [{"sha": "d1e3bb65c36226855c085dbf69dbe0fbf843449d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9bbc95654de572e68a6afe4dd892721d34304ed6", "patch": "@@ -1,3 +1,9 @@\n+2013-05-20  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/12288\n+\t* parser.c (cp_parser_parameter_declaration): Check return value\n+\tof cp_parser_parse_and_diagnose_invalid_type_name.\n+\n 2013-05-20  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/57319"}, {"sha": "c3096d372abcf5a3d22cc4a345b22a208261da6f", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=9bbc95654de572e68a6afe4dd892721d34304ed6", "patch": "@@ -17844,8 +17844,9 @@ cp_parser_parameter_declaration (cp_parser *parser,\n \t\t\t\t&declares_class_or_enum);\n \n   /* Complain about missing 'typename' or other invalid type names.  */\n-  if (!decl_specifiers.any_type_specifiers_p)\n-    cp_parser_parse_and_diagnose_invalid_type_name (parser);\n+  if (!decl_specifiers.any_type_specifiers_p\n+      && cp_parser_parse_and_diagnose_invalid_type_name (parser))\n+    decl_specifiers.type = error_mark_node;\n \n   /* If an error occurred, there's no reason to attempt to parse the\n      rest of the declaration.  */"}, {"sha": "4e8e6e4282d500a7d629d6de4672c05fb8b9395f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9bbc95654de572e68a6afe4dd892721d34304ed6", "patch": "@@ -1,3 +1,10 @@\n+2013-05-20  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/12288\n+\t* g++.dg/parse/error52.C: New.\n+\t* g++.dg/parse/error3.C: Adjust.\n+\t* g++.dg/parse/error36.C: Likewise.\n+\n 2013-05-20  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/56547"}, {"sha": "938ab45b24c5469a837f46b786f6ebb65e46a3d2", "filename": "gcc/testsuite/g++.dg/parse/error3.C", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror3.C?ref=9bbc95654de572e68a6afe4dd892721d34304ed6", "patch": "@@ -5,5 +5,4 @@ static void InstantiateConstraint(const float&, unsigned,\n                                   void(*AddFunction)(const TYPE&,bool&,\n                                                      char*, char*,\n                                                      unsigned*));\n-// { dg-error \"64: ISO C\\\\+\\\\+ forbids declaration of 'parameter' with no type\" \"forbids\" { target *-*-* }  { 5 } }\n // { dg-error \"60: 'TYPE' does not name a type\" \"does not\" { target *-*-* } { 5 } }"}, {"sha": "92e27a928dfce41d3054fe9d87bb38f90f4bde3d", "filename": "gcc/testsuite/g++.dg/parse/error36.C", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror36.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror36.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror36.C?ref=9bbc95654de572e68a6afe4dd892721d34304ed6", "patch": "@@ -26,7 +26,6 @@ template <class T> struct B\n // PR c++/40738\n template <class T>\n void g(const A<T>::type &t);\t// { dg-error \"typename\" \"typename\" }\n-// { dg-error \"no type\" \"no type\" { target *-*-* } 28 }\n \n // PR c++/18451\n template <class T> A<T>::B A<T>::b; // { dg-error \"typename\" }"}, {"sha": "d1c6e4a857d366236b0491a8176b4da5728e61a9", "filename": "gcc/testsuite/g++.dg/parse/error52.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror52.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bbc95654de572e68a6afe4dd892721d34304ed6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror52.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror52.C?ref=9bbc95654de572e68a6afe4dd892721d34304ed6", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/12288\n+\n+class X {};\n+\n+struct S {\n+  explicit S (const X::T&) {}  // { dg-error \"does not name a type\" }\n+};\n+\n+class Y {};\n+\n+typedef Y::T xt;               // { dg-error \"does not name a type\" }"}]}