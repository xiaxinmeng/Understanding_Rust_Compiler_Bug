{"sha": "d747d0057c694f600da48ff11a0cf6b10aea9dbf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDc0N2QwMDU3YzY5NGY2MDBkYTQ4ZmYxMWEwY2Y2YjEwYWVhOWRiZg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2015-12-10T14:06:15Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2015-12-10T14:06:15Z"}, "message": "trans.c (Call_to_gnu): Remove guard for NULL_EXPR.\n\n\t* gcc-interface/trans.c (Call_to_gnu): Remove guard for NULL_EXPR.\n\t* gcc-interface/utils2.c (gnat_rewrite_reference) <ERROR_MARK>: Return\n\tthe reference unmodified.\n\t<NULL_EXPR>: New case.  Likewise.\n\nFrom-SVN: r231513", "tree": {"sha": "6b85bdf8dd69f0b774a2373b3cacb5e86e94d32a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b85bdf8dd69f0b774a2373b3cacb5e86e94d32a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d747d0057c694f600da48ff11a0cf6b10aea9dbf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d747d0057c694f600da48ff11a0cf6b10aea9dbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d747d0057c694f600da48ff11a0cf6b10aea9dbf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d747d0057c694f600da48ff11a0cf6b10aea9dbf/comments", "author": null, "committer": null, "parents": [{"sha": "6b4f890601a9bb1ff803cef04ee5779d49befb97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b4f890601a9bb1ff803cef04ee5779d49befb97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b4f890601a9bb1ff803cef04ee5779d49befb97"}], "stats": {"total": 64, "additions": 60, "deletions": 4}, "files": [{"sha": "10758ff1cb5045c1a3e51069e13c7b4c4c11e083", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d747d0057c694f600da48ff11a0cf6b10aea9dbf", "patch": "@@ -1,3 +1,10 @@\n+2015-12-10  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (Call_to_gnu): Remove guard for NULL_EXPR.\n+\t* gcc-interface/utils2.c (gnat_rewrite_reference) <ERROR_MARK>: Return\n+\tthe reference unmodified.\n+\t<NULL_EXPR>: New case.  Likewise.\n+\n 2015-12-10  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/gigi.h (create_var_decl): Adjust comment."}, {"sha": "d8d5ce20c969d92cf2740d1ce5c85778db4a2c82", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=d747d0057c694f600da48ff11a0cf6b10aea9dbf", "patch": "@@ -4407,9 +4407,7 @@ Call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target,\n       /* If it's possible we may need to use this expression twice, make sure\n \t that any side-effects are handled via SAVE_EXPRs; likewise if we need\n \t to force side-effects before the call.  */\n-      if (Ekind (gnat_formal) != E_In_Parameter\n-\t  && !is_by_ref_formal_parm\n-\t  && TREE_CODE (gnu_name) != NULL_EXPR)\n+      if (Ekind (gnat_formal) != E_In_Parameter && !is_by_ref_formal_parm)\n \t{\n \t  tree init = NULL_TREE;\n \t  gnu_name = gnat_stabilize_reference (gnu_name, true, &init);"}, {"sha": "8af121e73978cca19cb230a43cd134864b889c04", "filename": "gcc/ada/gcc-interface/utils2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Fada%2Fgcc-interface%2Futils2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Fada%2Fgcc-interface%2Futils2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils2.c?ref=d747d0057c694f600da48ff11a0cf6b10aea9dbf", "patch": "@@ -2733,7 +2733,8 @@ gnat_rewrite_reference (tree ref, rewrite_fn func, void *data, tree *init)\n       break;\n \n     case ERROR_MARK:\n-      return error_mark_node;\n+    case NULL_EXPR:\n+      return ref;\n \n     default:\n       gcc_unreachable ();"}, {"sha": "c4f66a851710664f13f4260f12bec7fb151e5966", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d747d0057c694f600da48ff11a0cf6b10aea9dbf", "patch": "@@ -1,3 +1,8 @@\n+2015-12-10  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/array25.adb: New test.\n+\t* gnat.dg/array25_pkg.ad[sb]: New helper.\n+\n 2015-12-10  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* lib/target-supports.exp (check_effective_target_arc_atomic): New"}, {"sha": "68dd3cbe19d03861cc0fba9c991efb936e304738", "filename": "gcc/testsuite/gnat.dg/array25.adb", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2Fgnat.dg%2Farray25.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2Fgnat.dg%2Farray25.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Farray25.adb?ref=d747d0057c694f600da48ff11a0cf6b10aea9dbf", "patch": "@@ -0,0 +1,11 @@\n+-- { dg-do compile }\n+\n+with Array25_Pkg;\n+\n+procedure Array25 is\n+\n+   package My_Pkg is new Array25_Pkg (0, 0);\n+\n+begin\n+   null;\n+end;"}, {"sha": "9bb2fa5b545713d9efd977570703b4198a2b8cfa", "filename": "gcc/testsuite/gnat.dg/array25_pkg.adb", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2Fgnat.dg%2Farray25_pkg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2Fgnat.dg%2Farray25_pkg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Farray25_pkg.adb?ref=d747d0057c694f600da48ff11a0cf6b10aea9dbf", "patch": "@@ -0,0 +1,15 @@\n+package body Array25_Pkg is\n+\n+   procedure Get_Inner (A : out Arr1) is\n+   begin\n+      null;\n+   end;\n+\n+   procedure Get (A : out Arr2) is\n+   begin\n+      for I in Arr2'Range loop\n+         Get_Inner (A (I).Data);\n+      end loop;\n+   end;\n+\n+end Array25_Pkg;"}, {"sha": "1965bab249b4a007680a83928dae9cb4114c6e4b", "filename": "gcc/testsuite/gnat.dg/array25_pkg.ads", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2Fgnat.dg%2Farray25_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d747d0057c694f600da48ff11a0cf6b10aea9dbf/gcc%2Ftestsuite%2Fgnat.dg%2Farray25_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Farray25_pkg.ads?ref=d747d0057c694f600da48ff11a0cf6b10aea9dbf", "patch": "@@ -0,0 +1,19 @@\n+generic\n+\n+   UB1 : Natural;\n+\n+   UB2 : Natural;\n+\n+package Array25_Pkg is\n+\n+   type Arr1 is array (1 .. UB1) of Integer;\n+\n+   type Rec is record\n+      Data : Arr1;\n+   end record;\n+\n+   type Arr2  is array (1 .. UB2) of Rec;\n+\n+   procedure Get (A : out Arr2);\n+\n+end Array25_Pkg;"}]}