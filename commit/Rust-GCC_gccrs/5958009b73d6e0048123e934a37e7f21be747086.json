{"sha": "5958009b73d6e0048123e934a37e7f21be747086", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTk1ODAwOWI3M2Q2ZTAwNDgxMjNlOTM0YTM3ZTdmMjFiZTc0NzA4Ng==", "commit": {"author": {"name": "Andi Kleen", "email": "ak@linux.intel.com", "date": "2011-10-16T23:22:32Z"}, "committer": {"name": "Andi Kleen", "email": "ak@gcc.gnu.org", "date": "2011-10-16T23:22:32Z"}, "message": "Add error checking to lto_section_read\n\ngcc/lto/:\n\n2011-10-09  Andi Kleen  <ak@linux.intel.com>\n\n\t* lto.c (lto_section_read): Call fatal_error on IO or mmap errors.\n\nFrom-SVN: r180065", "tree": {"sha": "c8444e075b56d5055f9758411b4aa1770e43cfcc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8444e075b56d5055f9758411b4aa1770e43cfcc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5958009b73d6e0048123e934a37e7f21be747086", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5958009b73d6e0048123e934a37e7f21be747086", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5958009b73d6e0048123e934a37e7f21be747086", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5958009b73d6e0048123e934a37e7f21be747086/comments", "author": null, "committer": null, "parents": [{"sha": "b74bdc61455f557fff3f87ac0984b01d137ada27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b74bdc61455f557fff3f87ac0984b01d137ada27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b74bdc61455f557fff3f87ac0984b01d137ada27"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "12f75ada5b76ae34167ecc54f9c9f6efef88634c", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5958009b73d6e0048123e934a37e7f21be747086/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5958009b73d6e0048123e934a37e7f21be747086/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=5958009b73d6e0048123e934a37e7f21be747086", "patch": "@@ -1,3 +1,7 @@\n+2011-10-09  Andi Kleen  <ak@linux.intel.com>\n+\n+\t* lto.c (lto_section_read): Call fatal_error on IO or mmap errors.\n+\n 2011-10-11  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \t* lto-lang.c (def_builtin_1): Delete old interface with two"}, {"sha": "63af047640d68fa14205a11d8a90bf776b17c7fd", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5958009b73d6e0048123e934a37e7f21be747086/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5958009b73d6e0048123e934a37e7f21be747086/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=5958009b73d6e0048123e934a37e7f21be747086", "patch": "@@ -1237,7 +1237,10 @@ lto_read_section_data (struct lto_file_decl_data *file_data,\n     {\n       fd = open (file_data->file_name, O_RDONLY|O_BINARY);\n       if (fd == -1)\n-\treturn NULL;\n+        {\n+\t  fatal_error (\"Cannot open %s\", file_data->file_name);\n+\t  return NULL;\n+        }\n       fd_name = xstrdup (file_data->file_name);\n     }\n \n@@ -1255,7 +1258,10 @@ lto_read_section_data (struct lto_file_decl_data *file_data,\n   result = (char *) mmap (NULL, computed_len, PROT_READ, MAP_PRIVATE,\n \t\t\t  fd, computed_offset);\n   if (result == MAP_FAILED)\n-    return NULL;\n+    {\n+      fatal_error (\"Cannot map %s\", file_data->file_name);\n+      return NULL;\n+    }\n \n   return result + diff;\n #else\n@@ -1264,6 +1270,7 @@ lto_read_section_data (struct lto_file_decl_data *file_data,\n       || read (fd, result, len) != (ssize_t) len)\n     {\n       free (result);\n+      fatal_error (\"Cannot read %s\", file_data->file_name);\n       result = NULL;\n     }\n #ifdef __MINGW32__"}]}