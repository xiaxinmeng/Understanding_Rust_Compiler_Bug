{"sha": "922a784c4f6ab28e0619c55d1b4d20c1503082f1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTIyYTc4NGM0ZjZhYjI4ZTA2MTljNTVkMWI0ZDIwYzE1MDMwODJmMQ==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2012-07-22T14:55:38Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2012-07-22T14:55:38Z"}, "message": "Emit executable-stack note correctly for CRIS targets.\n\n\t* config/cris/cris.c (cris_file_end): New function.\n\t(TARGET_ASM_FILE_END): Define.\n\nFrom-SVN: r189755", "tree": {"sha": "a011a417558d03aa844dae3843d373b7d216bf03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a011a417558d03aa844dae3843d373b7d216bf03"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/922a784c4f6ab28e0619c55d1b4d20c1503082f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/922a784c4f6ab28e0619c55d1b4d20c1503082f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/922a784c4f6ab28e0619c55d1b4d20c1503082f1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/922a784c4f6ab28e0619c55d1b4d20c1503082f1/comments", "author": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "eb448bee82b18bb8130c2d848e6c9e89e8503bd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb448bee82b18bb8130c2d848e6c9e89e8503bd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb448bee82b18bb8130c2d848e6c9e89e8503bd0"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "321d96de6ec1b1acb0089940089c4a9986ce34f5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/922a784c4f6ab28e0619c55d1b4d20c1503082f1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/922a784c4f6ab28e0619c55d1b4d20c1503082f1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=922a784c4f6ab28e0619c55d1b4d20c1503082f1", "patch": "@@ -1,3 +1,9 @@\n+2012-07-22  Hans-Peter Nilsson  <hp@axis.com>\n+\n+\tEmit executable-stack note correctly for CRIS targets.\n+\t* config/cris/cris.c (cris_file_end): New function.\n+\t(TARGET_ASM_FILE_END): Define.\n+\n 2012-07-22  Chung-Lin Tang  <cltang@codesourcery.com>\n \t    Maxim Kuvyrkov  <maxim@codesourcery.com>\n \t    NetLogic Microsystems Inc."}, {"sha": "4a73c81683341caa34df4805af1d86bf920ca1be", "filename": "gcc/config/cris/cris.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/922a784c4f6ab28e0619c55d1b4d20c1503082f1/gcc%2Fconfig%2Fcris%2Fcris.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/922a784c4f6ab28e0619c55d1b4d20c1503082f1/gcc%2Fconfig%2Fcris%2Fcris.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Fcris.c?ref=922a784c4f6ab28e0619c55d1b4d20c1503082f1", "patch": "@@ -153,6 +153,7 @@ static void cris_trampoline_init (rtx, tree, rtx);\n static rtx cris_function_value(const_tree, const_tree, bool);\n static rtx cris_libcall_value (enum machine_mode, const_rtx);\n static bool cris_function_value_regno_p (const unsigned int);\n+static void cris_file_end (void);\n \n /* This is the parsed result of the \"-max-stack-stackframe=\" option.  If\n    it (still) is zero, then there was no such option given.  */\n@@ -199,6 +200,8 @@ int cris_cpu_version = CRIS_DEFAULT_CPU_VERSION;\n \n #undef TARGET_ASM_FILE_START\n #define TARGET_ASM_FILE_START cris_file_start\n+#undef TARGET_ASM_FILE_END\n+#define TARGET_ASM_FILE_END cris_file_end\n \n #undef TARGET_INIT_LIBFUNCS\n #define TARGET_INIT_LIBFUNCS cris_init_libfuncs\n@@ -2747,6 +2750,17 @@ cris_file_start (void)\n   default_file_start ();\n }\n \n+/* Output that goes at the end of the file, similarly.  */\n+\n+static void\n+cris_file_end (void)\n+{\n+  /* For CRIS, the default is to assume *no* executable stack, so output\n+     an executable-stack-note only when needed.  */\n+  if (TARGET_LINUX && trampolines_created)\n+    file_end_indicate_exec_stack ();\n+}\n+\n /* Rename the function calls for integer multiply and divide.  */\n static void\n cris_init_libfuncs (void)"}]}