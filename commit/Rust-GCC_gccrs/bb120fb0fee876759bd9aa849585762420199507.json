{"sha": "bb120fb0fee876759bd9aa849585762420199507", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmIxMjBmYjBmZWU4NzY3NTliZDlhYTg0OTU4NTc2MjQyMDE5OTUwNw==", "commit": {"author": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2018-07-07T11:08:27Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2018-07-07T11:08:27Z"}, "message": "Fix sigsegv on -fdump-tree-all-enumerate_locals\n\n2018-07-07  Tom de Vries  <tdevries@suse.de>\n\n\t* tree-dfa.c (dump_enumerated_decls): Handle cfun->cfg == NULL.\n\n\t* gcc.misc-tests/options.exp (check_for_all_options): Clean up dump\n\tfiles.\n\t(get_dump_flags): New proc.\n\t(toplevel): Test all dump flags.\n\nFrom-SVN: r262500", "tree": {"sha": "cbdfe73145dbf5ccb4c97eef25233f4e3f39beae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cbdfe73145dbf5ccb4c97eef25233f4e3f39beae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb120fb0fee876759bd9aa849585762420199507", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb120fb0fee876759bd9aa849585762420199507", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb120fb0fee876759bd9aa849585762420199507", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb120fb0fee876759bd9aa849585762420199507/comments", "author": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e730a0ef11a788bb00034e007b320c6608c17e66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e730a0ef11a788bb00034e007b320c6608c17e66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e730a0ef11a788bb00034e007b320c6608c17e66"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "350ebf518c5ec37b3a0ae7391d750a9776260efc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb120fb0fee876759bd9aa849585762420199507/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb120fb0fee876759bd9aa849585762420199507/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bb120fb0fee876759bd9aa849585762420199507", "patch": "@@ -1,3 +1,7 @@\n+2018-07-07  Tom de Vries  <tdevries@suse.de>\n+\n+\t* tree-dfa.c (dump_enumerated_decls): Handle cfun->cfg == NULL.\n+\n 2018-07-07  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* tree-vrp.c (vrp_int_const_binop): Change overflow type to"}, {"sha": "04d705d68d2bd325f17b0991f10709fb595f342a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb120fb0fee876759bd9aa849585762420199507/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb120fb0fee876759bd9aa849585762420199507/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bb120fb0fee876759bd9aa849585762420199507", "patch": "@@ -1,3 +1,10 @@\n+2018-07-07  Tom de Vries  <tdevries@suse.de>\n+\n+\t* gcc.misc-tests/options.exp (check_for_all_options): Clean up dump\n+\tfiles.\n+\t(get_dump_flags): New proc.\n+\t(toplevel): Test all dump flags.\n+\n 2018-07-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/stack_usage6.adb: New test."}, {"sha": "faeae705c086678f3627f6fbe7cf239b2d0b4ef9", "filename": "gcc/testsuite/gcc.misc-tests/options.exp", "status": "modified", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb120fb0fee876759bd9aa849585762420199507/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb120fb0fee876759bd9aa849585762420199507/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp?ref=bb120fb0fee876759bd9aa849585762420199507", "patch": "@@ -52,6 +52,10 @@ proc check_for_all_options {language gcc_options compiler_pattern as_pattern ld_\n     }\n     set gcc_output [gcc_target_compile $filename.c $filename.x executable $gcc_options]\n     remote_file build delete $filename.c $filename.x $filename.gcno\n+    set dumpfiles [glob -nocomplain $filename.c.*]\n+    foreach dumpfile $dumpfiles {\n+\tremote_file build delete $dumpfile\n+    }   \n \n     if {![regexp -- \"/${compiler}(\\\\.exe)? -quiet.*$compiler_pattern\" $gcc_output]} {\n \tfail \"$test (compiler options)\"\n@@ -70,4 +74,38 @@ proc check_for_all_options {language gcc_options compiler_pattern as_pattern ld_\n \n check_for_all_options c {--coverage} {-fprofile-arcs -ftest-coverage} {} {-lgcov}\n \n+proc get_dump_flags {} {\n+    set res [list]\n+\n+    global srcdir\n+    set file \"$srcdir/../dumpfile.c\"\n+    \n+    set a [open $file]\n+    set lines [split [read $a] \"\\n\"]\n+    close $a\n+\n+    set domatch 0\n+    foreach line $lines {\n+\tif { [regexp \"dump_options.* =\" $line] } {\n+\t    set domatch 1\n+\t} elseif { [regexp \"^\\};\" $line] } {\n+\t    set domatch 0\n+\t}\n+\tif { $domatch } {\n+\t    if { [regexp \"\\\"(.*)\\\"\" $line match submatch] } {\n+\t\tlappend res $submatch\n+\t    }\n+\t}\n+    }\n+\n+    return $res\n+}\n+\n+foreach flag [get_dump_flags] {\n+    check_for_all_options c -fdump-tree-all-$flag {} {} {}\n+    check_for_all_options c -fdump-ipa-all-$flag {} {} {}\n+    check_for_all_options c -fdump-rtl-all-$flag {} {} {}\n+    check_for_all_options c -fdump-lang-all-$flag {} {} {}\n+}\n+\n gcc_parallel_test_enable 1"}, {"sha": "ee2ff2958dbe53f13fc3bbd1d2840170cec12960", "filename": "gcc/tree-dfa.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb120fb0fee876759bd9aa849585762420199507/gcc%2Ftree-dfa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb120fb0fee876759bd9aa849585762420199507/gcc%2Ftree-dfa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-dfa.c?ref=bb120fb0fee876759bd9aa849585762420199507", "patch": "@@ -992,6 +992,9 @@ dump_enumerated_decls_push (tree *tp, int *walk_subtrees, void *data)\n void\n dump_enumerated_decls (FILE *file, dump_flags_t flags)\n {\n+  if (!cfun->cfg)\n+    return;\n+\n   basic_block bb;\n   struct walk_stmt_info wi;\n   auto_vec<numbered_tree, 40> decl_list;"}]}