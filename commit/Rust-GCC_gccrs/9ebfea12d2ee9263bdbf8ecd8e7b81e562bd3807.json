{"sha": "9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWViZmVhMTJkMmVlOTI2M2JkYmY4ZWNkOGU3YjgxZTU2MmJkMzgwNw==", "commit": {"author": {"name": "Steve Ellcey", "email": "sellcey@imgtec.com", "date": "2015-06-18T15:17:49Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2015-06-18T15:17:49Z"}, "message": "mips.c (mips_rtx_costs): Remove HONOR_NAN check.\n\n2015-06-18  Steve Ellcey  <sellcey@imgtec.com>\n\n\t* config/mips/mips.c (mips_rtx_costs): Remove HONOR_NAN check.\n\t* config/mips/mips.md (*madd4<mode>): Ditto.\n\t(*nmadd3<mode>) Ditto.\n\t(*nmadd4<mode>_fastmath): Ditto.\n\t(*nmadd3<mode>_fastmath): Ditto.\n\t(*nmsub4<mode>): Ditto.\n\t(*nmsub3<mode>): Ditto.\n\t(*nmsub4<mode>_fastmath): Ditto.\n\t(*nmsub3<mode>_fastmath): Ditto.\n\nFrom-SVN: r224625", "tree": {"sha": "3537c52221eee9683af638d97894033492d80e94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3537c52221eee9683af638d97894033492d80e94"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807/comments", "author": null, "committer": null, "parents": [{"sha": "769430b29ce63353fa10f5122e406578eaea3328", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/769430b29ce63353fa10f5122e406578eaea3328", "html_url": "https://github.com/Rust-GCC/gccrs/commit/769430b29ce63353fa10f5122e406578eaea3328"}], "stats": {"total": 45, "additions": 27, "deletions": 18}, "files": [{"sha": "f2ba06f61bbc4773a11c2b3f29a193093434edc4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807", "patch": "@@ -1,3 +1,15 @@\n+2015-06-18  Steve Ellcey  <sellcey@imgtec.com>\n+\n+\t* config/mips/mips.c (mips_rtx_costs): Remove HONOR_NAN check.\n+\t* config/mips/mips.md (*madd4<mode>): Ditto.\n+\t(*nmadd3<mode>) Ditto.\n+\t(*nmadd4<mode>_fastmath): Ditto.\n+\t(*nmadd3<mode>_fastmath): Ditto.\n+\t(*nmsub4<mode>): Ditto.\n+\t(*nmsub3<mode>): Ditto.\n+\t(*nmsub4<mode>_fastmath): Ditto.\n+\t(*nmsub3<mode>_fastmath): Ditto.\n+\n 2015-06-18  Michael Matz  <matz@suse.de>\n \n \tPR middle-end/66253"}, {"sha": "1c837cf7c901cedb2e5157c71cde1b6a8943d485", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807", "patch": "@@ -4069,7 +4069,6 @@ mips_rtx_costs (rtx x, int code, int outer_code, int opno ATTRIBUTE_UNUSED,\n       if (float_mode_p\n \t  && (ISA_HAS_NMADD4_NMSUB4 || ISA_HAS_NMADD3_NMSUB3)\n \t  && TARGET_FUSED_MADD\n-\t  && !HONOR_NANS (mode)\n \t  && !HONOR_SIGNED_ZEROS (mode))\n \t{\n \t  /* See if we can use NMADD or NMSUB.  See mips.md for the\n@@ -4137,7 +4136,6 @@ mips_rtx_costs (rtx x, int code, int outer_code, int opno ATTRIBUTE_UNUSED,\n       if (float_mode_p\n \t  && (ISA_HAS_NMADD4_NMSUB4 || ISA_HAS_NMADD3_NMSUB3)\n \t  && TARGET_FUSED_MADD\n-\t  && !HONOR_NANS (mode)\n \t  && HONOR_SIGNED_ZEROS (mode))\n \t{\n \t  /* See if we can use NMADD or NMSUB.  See mips.md for the"}, {"sha": "f6912e11c2d33df82b459f1234eed0f936aff4ec", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 15, "deletions": 16, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=9ebfea12d2ee9263bdbf8ecd8e7b81e562bd3807", "patch": "@@ -2475,6 +2475,13 @@\n \n ;; Floating point multiply accumulate instructions.\n \n+;; The various multiply accumulate instructions can be used even when\n+;; HONOR_NANS is true because while IEEE 754-2008 requires the negate\n+;; operation to negate the sign of a NAN and the MIPS neg instruction does\n+;; not do this, the multiply and add (or minus) parts of these instructions\n+;; have no requirement on how the sign of a NAN is handled and so the final\n+;; sign bit of the entire operation is undefined.\n+\n (define_insn \"*madd4<mode>\"\n   [(set (match_operand:ANYF 0 \"register_operand\" \"=f\")\n \t(plus:ANYF (mult:ANYF (match_operand:ANYF 1 \"register_operand\" \"f\")\n@@ -2533,8 +2540,7 @@\n \t\t   (match_operand:ANYF 3 \"register_operand\" \"f\"))))]\n   \"ISA_HAS_NMADD4_NMSUB4\n    && TARGET_FUSED_MADD\n-   && HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmadd.<fmt>\\t%0,%3,%1,%2\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n@@ -2547,8 +2553,7 @@\n \t\t   (match_operand:ANYF 3 \"register_operand\" \"0\"))))]\n   \"ISA_HAS_NMADD3_NMSUB3\n    && TARGET_FUSED_MADD\n-   && HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmadd.<fmt>\\t%0,%1,%2\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n@@ -2561,8 +2566,7 @@\n \t (match_operand:ANYF 3 \"register_operand\" \"f\")))]\n   \"ISA_HAS_NMADD4_NMSUB4\n    && TARGET_FUSED_MADD\n-   && !HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && !HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmadd.<fmt>\\t%0,%3,%1,%2\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n@@ -2575,8 +2579,7 @@\n \t (match_operand:ANYF 3 \"register_operand\" \"0\")))]\n   \"ISA_HAS_NMADD3_NMSUB3\n    && TARGET_FUSED_MADD\n-   && !HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && !HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmadd.<fmt>\\t%0,%1,%2\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n@@ -2589,8 +2592,7 @@\n \t\t   (match_operand:ANYF 1 \"register_operand\" \"f\"))))]\n   \"ISA_HAS_NMADD4_NMSUB4\n    && TARGET_FUSED_MADD\n-   && HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmsub.<fmt>\\t%0,%1,%2,%3\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n@@ -2603,8 +2605,7 @@\n \t\t   (match_operand:ANYF 1 \"register_operand\" \"0\"))))]\n   \"ISA_HAS_NMADD3_NMSUB3\n    && TARGET_FUSED_MADD\n-   && HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmsub.<fmt>\\t%0,%1,%2\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n@@ -2617,8 +2618,7 @@\n \t\t    (match_operand:ANYF 3 \"register_operand\" \"f\"))))]\n   \"ISA_HAS_NMADD4_NMSUB4\n    && TARGET_FUSED_MADD\n-   && !HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && !HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmsub.<fmt>\\t%0,%1,%2,%3\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n@@ -2631,8 +2631,7 @@\n \t\t    (match_operand:ANYF 3 \"register_operand\" \"0\"))))]\n   \"ISA_HAS_NMADD3_NMSUB3\n    && TARGET_FUSED_MADD\n-   && !HONOR_SIGNED_ZEROS (<MODE>mode)\n-   && !HONOR_NANS (<MODE>mode)\"\n+   && !HONOR_SIGNED_ZEROS (<MODE>mode)\"\n   \"nmsub.<fmt>\\t%0,%1,%2\"\n   [(set_attr \"type\" \"fmadd\")\n    (set_attr \"mode\" \"<UNITMODE>\")])"}]}