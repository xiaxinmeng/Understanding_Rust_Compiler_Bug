{"sha": "b3af75af77c55d0858432052c04bc40bfff56090", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNhZjc1YWY3N2M1NWQwODU4NDMyMDUyYzA0YmM0MGJmZmY1NjA5MA==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2008-05-27T08:50:22Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-05-27T08:50:22Z"}, "message": "prj-attr.adb: Add new project level attribute Map_File_Option\n\n2008-05-27  Vincent Celier  <celier@adacore.com>\n\n\t* prj-attr.adb: Add new project level attribute Map_File_Option\n\t\n\t* prj-nmsc.adb (Process_Linker): Process new attribute Map_File_Option\n\t\n\t* prj.ads: Minor reformatting and comment update\n\t(Project_Configuration): New component Map_File_Option\n\t\n\t* snames.adb: New standard name Map_File_Option\n\t\n\t* snames.ads: New standard name Map_File_Option\n\nFrom-SVN: r135981", "tree": {"sha": "85cc871b8628bcf5f84760586518f62740a3ef42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85cc871b8628bcf5f84760586518f62740a3ef42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3af75af77c55d0858432052c04bc40bfff56090", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3af75af77c55d0858432052c04bc40bfff56090", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3af75af77c55d0858432052c04bc40bfff56090", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3af75af77c55d0858432052c04bc40bfff56090/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "eca5286b1c804cc4e9d3d34482b6a098dfd1d5c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eca5286b1c804cc4e9d3d34482b6a098dfd1d5c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eca5286b1c804cc4e9d3d34482b6a098dfd1d5c9"}], "stats": {"total": 239, "additions": 122, "deletions": 117}, "files": [{"sha": "6f6c888b4e6c400c5e3b4b1abd2f75e35e41a66f", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=b3af75af77c55d0858432052c04bc40bfff56090", "patch": "@@ -231,6 +231,7 @@ package body Prj.Attr is\n    \"Ladefault_switches#\" &\n    \"Lcswitches#\" &\n    \"LVlinker_options#\" &\n+   \"SVmap_file_option#\" &\n \n    --  Configuration - Linking\n "}, {"sha": "b04ce2603bf8e14f1c0a56450154cae9bf9c1826", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=b3af75af77c55d0858432052c04bc40bfff56090", "patch": "@@ -1831,9 +1831,7 @@ package body Prj.Nmsc is\n                      Data.Config.Linker :=\n                        Path_Name_Type (Attribute.Value.Value);\n \n-                  elsif\n-                    Attribute.Name = Name_Required_Switches\n-                  then\n+                  elsif Attribute.Name = Name_Required_Switches then\n \n                      --  Attribute Required_Switches: the minimum\n                      --  options to use when invoking the linker\n@@ -1843,6 +1841,8 @@ package body Prj.Nmsc is\n                           From_List => Attribute.Value.Values,\n                           In_Tree   => In_Tree);\n \n+                  elsif Attribute.Name = Name_Map_File_Option then\n+                     Data.Config.Map_File_Option := Attribute.Value.Value;\n                   end if;\n                end if;\n \n@@ -3854,8 +3854,8 @@ package body Prj.Nmsc is\n                      Error_Msg\n                        (Project, In_Tree,\n                         Continuation.all &\n-                        \"library project %% cannot extend project %% \" &\n-                        \"that is not a library project\",\n+                        \"shared library project %% cannot extend \" &\n+                        \"project %% that is not a library project\",\n                         Data.Location);\n                      Continuation := Continuation_String'Access;\n "}, {"sha": "a27e3a31f8165d9e5a65024bff1c0812e1b837ce", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 69, "deletions": 67, "changes": 136, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=b3af75af77c55d0858432052c04bc40bfff56090", "patch": "@@ -1125,104 +1125,106 @@ package Prj is\n    --  The table that contains the lists of project files\n \n    type Project_Configuration is record\n-         Run_Path_Option          : Name_List_Index := No_Name_List;\n-         --  The option to use when linking to specify the path where to look\n-         --  for libraries.\n+      Run_Path_Option               : Name_List_Index := No_Name_List;\n+      --  The option to use when linking to specify the path where to look for\n+      --  libraries.\n \n-         Executable_Suffix        : Name_Id         := No_Name;\n-         --  The suffix of executables, when specified in the configuration\n-         --  or in package Builder of the main project. When this is not\n-         --  specified, the executable suffix is the default for the platform.\n+      Executable_Suffix             : Name_Id         := No_Name;\n+      --  The suffix of executables, when specified in the configuration or in\n+      --  package Builder of the main project. When this is not specified, the\n+      --  executable suffix is the default for the platform.\n \n-         --  Linking\n+      --  Linking\n \n-         Linker                   : Path_Name_Type  := No_Path;\n-         --  Path name of the linker driver. Specified in the configuration\n-         --  or in the package Builder of the main project.\n+      Linker                        : Path_Name_Type  := No_Path;\n+      --  Path name of the linker driver. Specified in the configuration or in\n+      --  the package Builder of the main project.\n \n-         Minimum_Linker_Options   : Name_List_Index := No_Name_List;\n-         --  The minimum options for the linker driver. Specified in the\n-         --  configuration.\n+      Map_File_Option               : Name_Id := No_Name;\n+      --  Option to use when invoking the linker to build a map file\n \n-         Linker_Executable_Option : Name_List_Index := No_Name_List;\n-         --  The option(s) to indicate the name of the executable in the\n-         --  linker command. Specified in the configuration. When not\n-         --  specified, default to -o <executable name>.\n+      Minimum_Linker_Options        : Name_List_Index := No_Name_List;\n+      --  The minimum options for the linker driver. Specified in the\n+      --  configuration.\n \n-         Linker_Lib_Dir_Option    : Name_Id         := No_Name;\n-         --  The option to specify where to find a library for linking.\n-         --  Specified in the configuration. When not specified, defaults to\n-         --  \"-L\".\n+      Linker_Executable_Option      : Name_List_Index := No_Name_List;\n+      --  The option(s) to indicate the name of the executable in the linker\n+      --  command. Specified in the configuration. When not specified, default\n+      --  to -o <executable name>.\n \n-         Linker_Lib_Name_Option   : Name_Id         := No_Name;\n-         --  The option to specify the name of a library for linking. Specified\n-         --  in the configuration. When not specified, defaults to \"-l\".\n+      Linker_Lib_Dir_Option         : Name_Id         := No_Name;\n+      --  The option to specify where to find a library for linking. Specified\n+      --  in the configuration. When not specified, defaults to \"-L\".\n \n-         --  Libraries\n+      Linker_Lib_Name_Option        : Name_Id         := No_Name;\n+      --  The option to specify the name of a library for linking. Specified in\n+      --  the configuration. When not specified, defaults to \"-l\".\n \n-         Library_Builder          : Path_Name_Type  := No_Path;\n-         --  The executable to build library (specified in the configuration)\n+      --  Libraries\n \n-         Lib_Support              : Library_Support := None;\n-         --  The level of library support. Specified in the configuration.\n-         --  Support is none, static libraries only or both static and shared\n-         --  libraries.\n+      Library_Builder               : Path_Name_Type  := No_Path;\n+      --  The executable to build library (specified in the configuration)\n \n-         --  Archives\n+      Lib_Support                   : Library_Support := None;\n+      --  The level of library support. Specified in the configuration. Support\n+      --  is none, static libraries only or both static and shared libraries.\n \n-         Archive_Builder          : Name_List_Index := No_Name_List;\n-         --  The name of the executable to build archives, with the minimum\n-         --  switches. Specified in the configuration.\n+      Archive_Builder               : Name_List_Index := No_Name_List;\n+      --  The name of the executable to build archives, with the minimum\n+      --  switches. Specified in the configuration.\n \n-         Archive_Builder_Append_Option : Name_List_Index := No_Name_List;\n-         --  The options to append object files to an archive\n+      Archive_Builder_Append_Option : Name_List_Index := No_Name_List;\n+      --  The options to append object files to an archive\n \n-         Archive_Indexer          : Name_List_Index := No_Name_List;\n-         --  The name of the executable to index archives, with the minimum\n-         --  switches. Specified in the configuration.\n+      Archive_Indexer               : Name_List_Index := No_Name_List;\n+      --  The name of the executable to index archives, with the minimum\n+      --  switches. Specified in the configuration.\n \n-         Archive_Suffix           : File_Name_Type  := No_File;\n-         --  The suffix of archives. Specified in the configuration. When not\n-         --  specified, defaults to \".a\".\n+      Archive_Suffix                : File_Name_Type  := No_File;\n+      --  The suffix of archives. Specified in the configuration. When not\n+      --  specified, defaults to \".a\".\n \n-         Lib_Partial_Linker       : Name_List_Index := No_Name_List;\n+      Lib_Partial_Linker            : Name_List_Index := No_Name_List;\n \n-         --  Shared libraries\n+      --  Shared libraries\n \n-         Shared_Lib_Driver             : File_Name_Type  := No_File;\n-         --  The driver to link shared libraries. Set with attribute\n-         --  Library_GCC. Default to gcc.\n+      Shared_Lib_Driver             : File_Name_Type  := No_File;\n+      --  The driver to link shared libraries. Set with attribute Library_GCC.\n+      --  Default to gcc.\n \n-         Shared_Lib_Prefix        : File_Name_Type  := No_File;\n-         --  Part of a shared library file name that precedes the name of the\n-         --  library. Specified in the configuration. When not specified,\n-         --  defaults to \"lib\".\n+      Shared_Lib_Prefix             : File_Name_Type  := No_File;\n+      --  Part of a shared library file name that precedes the name of the\n+      --  library. Specified in the configuration. When not specified, defaults\n+      --  to \"lib\".\n \n-         Shared_Lib_Suffix        : File_Name_Type  := No_File;\n-         --  Suffix of shared libraries, after the library name in the shared\n-         --  library name. Specified in the configuration. When not specified,\n-         --  default to \".so\".\n+      Shared_Lib_Suffix             : File_Name_Type  := No_File;\n+      --  Suffix of shared libraries, after the library name in the shared\n+      --  library name. Specified in the configuration. When not specified,\n+      --  default to \".so\".\n \n-         Shared_Lib_Min_Options   : Name_List_Index := No_Name_List;\n-         --  Comment ???\n+      Shared_Lib_Min_Options        : Name_List_Index := No_Name_List;\n+      --  The minimum options to use when building a shared library\n \n-         Lib_Version_Options      : Name_List_Index := No_Name_List;\n-         --  Comment ???\n+      Lib_Version_Options           : Name_List_Index := No_Name_List;\n+      --  The options to use to specify a library version\n \n-         Symbolic_Link_Supported  : Boolean         := False;\n-         --  Comment ???\n+      Symbolic_Link_Supported       : Boolean         := False;\n+      --  True if the platform supports symbolic link files\n \n-         Lib_Maj_Min_Id_Supported : Boolean         := False;\n-         --  Comment ???\n+      Lib_Maj_Min_Id_Supported      : Boolean         := False;\n+      --  True if platform supports library major and minor options, such as\n+      --  libname.so -> libname.so.2 -> libname.so.2.4\n \n-         Auto_Init_Supported      : Boolean         := False;\n-         --  Comment ???\n+      Auto_Init_Supported           : Boolean         := False;\n+      --  True if automatic initialisation is supported for shared stand-alone\n+      --  libraries.\n    end record;\n \n    Default_Project_Config : constant Project_Configuration :=\n                               (Run_Path_Option               => No_Name_List,\n                                Executable_Suffix             => No_Name,\n                                Linker                        => No_Path,\n+                               Map_File_Option               => No_Name,\n                                Minimum_Linker_Options        => No_Name_List,\n                                Linker_Executable_Option      => No_Name_List,\n                                Linker_Lib_Dir_Option         => No_Name,"}, {"sha": "7d4cdddc479d97011158b74459060e33d4689bfa", "filename": "gcc/ada/snames.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fsnames.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fsnames.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.adb?ref=b3af75af77c55d0858432052c04bc40bfff56090", "patch": "@@ -767,6 +767,7 @@ package body Snames is\n      \"local_config_file#\" &\n      \"local_configuration_pragmas#\" &\n      \"locally_removed_files#\" &\n+     \"map_file_option#\" &\n      \"mapping_file_switches#\" &\n      \"mapping_spec_suffix#\" &\n      \"mapping_body_suffix#\" &"}, {"sha": "c2001e68aa4787a20fd5562632c43b99e4690314", "filename": "gcc/ada/snames.ads", "status": "modified", "additions": 46, "deletions": 45, "changes": 91, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fsnames.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3af75af77c55d0858432052c04bc40bfff56090/gcc%2Fada%2Fsnames.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads?ref=b3af75af77c55d0858432052c04bc40bfff56090", "patch": "@@ -1088,63 +1088,64 @@ package Snames is\n    Name_Local_Config_File              : constant Name_Id := N + 706;\n    Name_Local_Configuration_Pragmas    : constant Name_Id := N + 707;\n    Name_Locally_Removed_Files          : constant Name_Id := N + 708;\n-   Name_Mapping_File_Switches          : constant Name_Id := N + 709;\n-   Name_Mapping_Spec_Suffix            : constant Name_Id := N + 710;\n-   Name_Mapping_Body_Suffix            : constant Name_Id := N + 711;\n-   Name_Metrics                        : constant Name_Id := N + 712;\n-   Name_Naming                         : constant Name_Id := N + 713;\n-   Name_Object_Generated               : constant Name_Id := N + 714;\n-   Name_Objects_Linked                 : constant Name_Id := N + 715;\n-   Name_Objects_Path                   : constant Name_Id := N + 716;\n-   Name_Objects_Path_File              : constant Name_Id := N + 717;\n-   Name_Object_Dir                     : constant Name_Id := N + 718;\n-   Name_Pic_Option                     : constant Name_Id := N + 719;\n-   Name_Pretty_Printer                 : constant Name_Id := N + 720;\n-   Name_Prefix                         : constant Name_Id := N + 721;\n-   Name_Project                        : constant Name_Id := N + 722;\n-   Name_Roots                          : constant Name_Id := N + 723;\n-   Name_Required_Switches              : constant Name_Id := N + 724;\n-   Name_Run_Path_Option                : constant Name_Id := N + 725;\n-   Name_Runtime_Project                : constant Name_Id := N + 726;\n-   Name_Shared_Library_Minimum_Switches : constant Name_Id := N + 727;\n-   Name_Shared_Library_Prefix          : constant Name_Id := N + 728;\n-   Name_Shared_Library_Suffix          : constant Name_Id := N + 729;\n-   Name_Separate_Suffix                : constant Name_Id := N + 730;\n-   Name_Source_Dirs                    : constant Name_Id := N + 731;\n-   Name_Source_Files                   : constant Name_Id := N + 732;\n-   Name_Source_List_File               : constant Name_Id := N + 733;\n-   Name_Spec                           : constant Name_Id := N + 734;\n-   Name_Spec_Suffix                    : constant Name_Id := N + 735;\n-   Name_Specification                  : constant Name_Id := N + 736;\n-   Name_Specification_Exceptions       : constant Name_Id := N + 737;\n-   Name_Specification_Suffix           : constant Name_Id := N + 738;\n-   Name_Stack                          : constant Name_Id := N + 739;\n-   Name_Switches                       : constant Name_Id := N + 740;\n-   Name_Symbolic_Link_Supported        : constant Name_Id := N + 741;\n-   Name_Sync                           : constant Name_Id := N + 742;\n-   Name_Synchronize                    : constant Name_Id := N + 743;\n-   Name_Toolchain_Description          : constant Name_Id := N + 744;\n-   Name_Toolchain_Version              : constant Name_Id := N + 745;\n-   Name_Runtime_Library_Dir            : constant Name_Id := N + 746;\n+   Name_Map_File_Option                : constant Name_Id := N + 709;\n+   Name_Mapping_File_Switches          : constant Name_Id := N + 710;\n+   Name_Mapping_Spec_Suffix            : constant Name_Id := N + 711;\n+   Name_Mapping_Body_Suffix            : constant Name_Id := N + 712;\n+   Name_Metrics                        : constant Name_Id := N + 713;\n+   Name_Naming                         : constant Name_Id := N + 714;\n+   Name_Object_Generated               : constant Name_Id := N + 715;\n+   Name_Objects_Linked                 : constant Name_Id := N + 716;\n+   Name_Objects_Path                   : constant Name_Id := N + 717;\n+   Name_Objects_Path_File              : constant Name_Id := N + 718;\n+   Name_Object_Dir                     : constant Name_Id := N + 719;\n+   Name_Pic_Option                     : constant Name_Id := N + 720;\n+   Name_Pretty_Printer                 : constant Name_Id := N + 721;\n+   Name_Prefix                         : constant Name_Id := N + 722;\n+   Name_Project                        : constant Name_Id := N + 723;\n+   Name_Roots                          : constant Name_Id := N + 724;\n+   Name_Required_Switches              : constant Name_Id := N + 725;\n+   Name_Run_Path_Option                : constant Name_Id := N + 726;\n+   Name_Runtime_Project                : constant Name_Id := N + 727;\n+   Name_Shared_Library_Minimum_Switches : constant Name_Id := N + 728;\n+   Name_Shared_Library_Prefix          : constant Name_Id := N + 729;\n+   Name_Shared_Library_Suffix          : constant Name_Id := N + 730;\n+   Name_Separate_Suffix                : constant Name_Id := N + 731;\n+   Name_Source_Dirs                    : constant Name_Id := N + 732;\n+   Name_Source_Files                   : constant Name_Id := N + 733;\n+   Name_Source_List_File               : constant Name_Id := N + 734;\n+   Name_Spec                           : constant Name_Id := N + 735;\n+   Name_Spec_Suffix                    : constant Name_Id := N + 736;\n+   Name_Specification                  : constant Name_Id := N + 737;\n+   Name_Specification_Exceptions       : constant Name_Id := N + 738;\n+   Name_Specification_Suffix           : constant Name_Id := N + 739;\n+   Name_Stack                          : constant Name_Id := N + 740;\n+   Name_Switches                       : constant Name_Id := N + 741;\n+   Name_Symbolic_Link_Supported        : constant Name_Id := N + 742;\n+   Name_Sync                           : constant Name_Id := N + 743;\n+   Name_Synchronize                    : constant Name_Id := N + 744;\n+   Name_Toolchain_Description          : constant Name_Id := N + 745;\n+   Name_Toolchain_Version              : constant Name_Id := N + 746;\n+   Name_Runtime_Library_Dir            : constant Name_Id := N + 747;\n \n    --  Other miscellaneous names used in front end\n \n-   Name_Unaligned_Valid                : constant Name_Id := N + 747;\n+   Name_Unaligned_Valid                : constant Name_Id := N + 748;\n \n    --  Ada 2005 reserved words\n \n-   First_2005_Reserved_Word            : constant Name_Id := N + 748;\n-   Name_Interface                      : constant Name_Id := N + 748;\n-   Name_Overriding                     : constant Name_Id := N + 749;\n-   Name_Synchronized                   : constant Name_Id := N + 750;\n-   Last_2005_Reserved_Word             : constant Name_Id := N + 750;\n+   First_2005_Reserved_Word            : constant Name_Id := N + 749;\n+   Name_Interface                      : constant Name_Id := N + 749;\n+   Name_Overriding                     : constant Name_Id := N + 750;\n+   Name_Synchronized                   : constant Name_Id := N + 751;\n+   Last_2005_Reserved_Word             : constant Name_Id := N + 751;\n \n    subtype Ada_2005_Reserved_Words is\n      Name_Id range First_2005_Reserved_Word .. Last_2005_Reserved_Word;\n \n    --  Mark last defined name for consistency check in Snames body\n \n-   Last_Predefined_Name                : constant Name_Id := N + 750;\n+   Last_Predefined_Name                : constant Name_Id := N + 751;\n \n    ---------------------------------------\n    -- Subtypes Defining Name Categories --"}]}