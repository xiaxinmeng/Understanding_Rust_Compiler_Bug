{"sha": "fed3b7b43192f7168f083cef98e70555d8898f94", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmVkM2I3YjQzMTkyZjcxNjhmMDgzY2VmOThlNzA1NTVkODg5OGY5NA==", "commit": {"author": {"name": "Stephen M. Webb", "email": "stephen@bregmasoft.com", "date": "2001-07-18T17:58:37Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-07-18T17:58:37Z"}, "message": "ostream.tcc (ostream::put): Fixed error condition check.\n\n\n2001-07-18  Stephen M. Webb  <stephen@bregmasoft..com>\n            Roman Sulzhyk  <roman_sulzhyk@yahoo.com>\n\n        libstdc++/3599\n        * include/bits/ostream.tcc (ostream::put): Fixed error condition check.\n        * testsuite/27_io/streambuf.cc (test07): Added new regression test.\n\nCo-Authored-By: Roman Sulzhyk <roman_sulzhyk@yahoo.com>\n\nFrom-SVN: r44122", "tree": {"sha": "5b8039dd8e3565b2f8c58dff6b3f92f7c7ac5803", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b8039dd8e3565b2f8c58dff6b3f92f7c7ac5803"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fed3b7b43192f7168f083cef98e70555d8898f94", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fed3b7b43192f7168f083cef98e70555d8898f94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fed3b7b43192f7168f083cef98e70555d8898f94", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fed3b7b43192f7168f083cef98e70555d8898f94/comments", "author": null, "committer": null, "parents": [{"sha": "6a65ea5be3974fda8ad750906ae553914f1c5f0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a65ea5be3974fda8ad750906ae553914f1c5f0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a65ea5be3974fda8ad750906ae553914f1c5f0b"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "dda8697c157d08cf57b7bbbc19014f42f6ad3ae9", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fed3b7b43192f7168f083cef98e70555d8898f94/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fed3b7b43192f7168f083cef98e70555d8898f94/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=fed3b7b43192f7168f083cef98e70555d8898f94", "patch": "@@ -1,3 +1,10 @@\n+2001-07-18  Stephen M. Webb  <stephen@bregmasoft..com>\n+            Roman Sulzhyk  <roman_sulzhyk@yahoo.com>\n+\n+        libstdc++/3599\n+        * include/bits/ostream.tcc (ostream::put): Fixed error condition check.\n+        * testsuite/27_io/streambuf.cc (test07): Added new regression test.\n+\n 2001-07-17  Stephen M. Webb   <stephen@bregmasoft.com>r\n \n \tAll occurrences of the __value_type() and __distance_type()"}, {"sha": "c24f29530056d33be90e81170241504c21574c6f", "filename": "libstdc++-v3/include/bits/ostream.tcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fed3b7b43192f7168f083cef98e70555d8898f94/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fostream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fed3b7b43192f7168f083cef98e70555d8898f94/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fostream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fostream.tcc?ref=fed3b7b43192f7168f083cef98e70555d8898f94", "patch": "@@ -358,7 +358,7 @@ namespace std\n       if (__cerb) \n \t{\n \t  int_type __put = rdbuf()->sputc(__c); \n-\t  if (__put != traits_type::to_int_type(__c))\n+\t  if (traits_type::eq_int_type(__put, traits_type::eof()))\n \t    this->setstate(ios_base::badbit);\n \t}\n       return *this;"}, {"sha": "68456432b73387674e2262c97052abfb820797d3", "filename": "libstdc++-v3/testsuite/27_io/streambuf.cc", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fed3b7b43192f7168f083cef98e70555d8898f94/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fstreambuf.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fed3b7b43192f7168f083cef98e70555d8898f94/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fstreambuf.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fstreambuf.cc?ref=fed3b7b43192f7168f083cef98e70555d8898f94", "patch": "@@ -337,6 +337,30 @@ namespace gnu\n class gnu::something_derived : std::streambuf { };\n #endif\n \n+// libstdc++/3599\n+class testbuf2 : public std::streambuf\n+{\n+public:\n+  typedef std::streambuf::traits_type traits_type;\n+\n+  testbuf2() : std::streambuf() { }\n+ \n+protected:\n+  int_type \n+  overflow(int_type c = traits_type::eof()) \n+  { return traits_type::not_eof(0); }\n+};\n+\n+void\n+test07()\n+{\n+  testbuf2 ob;\n+  std::ostream out(&ob); \n+\n+  VERIFY(out << \"gasp\");\n+  VERIFY(out << std::endl);\n+}\n+\n int main() \n {\n   test01();\n@@ -345,5 +369,7 @@ int main()\n \n   test04();\n   test05();\n+\n+  test07();\n   return 0;\n }"}]}