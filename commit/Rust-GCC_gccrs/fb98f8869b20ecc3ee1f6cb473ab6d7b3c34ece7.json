{"sha": "fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmI5OGY4ODY5YjIwZWNjM2VlMWY2Y2I0NzNhYjZkN2IzYzM0ZWNlNw==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2014-12-02T13:35:10Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2014-12-02T13:35:10Z"}, "message": "re PR rtl-optimization/63718 (ARM Thumb1 bootstrap fail after fuse-caller-save info in cprop-hardreg)\n\n2014-12-02  Tom de Vries  <tom@codesourcery.com>\n\n\tPR rtl-optimization/63718\n\t* config/arm/arm.c (arm_option_override): Disable fuse-caller-save for\n\tThumb1.\n\nFrom-SVN: r218271", "tree": {"sha": "d740a6ef24472cc788d1ae6549262f7ea9cfa7ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d740a6ef24472cc788d1ae6549262f7ea9cfa7ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7/comments", "author": null, "committer": null, "parents": [{"sha": "e3376050fc1981c8510a720291569c6abaf4e2ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3376050fc1981c8510a720291569c6abaf4e2ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3376050fc1981c8510a720291569c6abaf4e2ef"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "3eacc5a258837833a45a89770b8402a3c04b95c2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7", "patch": "@@ -1,3 +1,9 @@\n+2014-12-02  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR rtl-optimization/63718\n+\t* config/arm/arm.c (arm_option_override): Disable fuse-caller-save for\n+\tThumb1.\n+\n 2014-12-02  Richard Biener  <rguenther@suse.de>\n \n \t* match.pd: When combining divisions exclude the degenerate"}, {"sha": "f3be6cfc7f4092098734f228169c51704ea94103", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=fb98f8869b20ecc3ee1f6cb473ab6d7b3c34ece7", "patch": "@@ -3105,6 +3105,18 @@ arm_option_override (void)\n       && (!arm_arch7 || !current_tune->prefer_ldrd_strd))\n     flag_schedule_fusion = 0;\n \n+  /* In Thumb1 mode, we emit the epilogue in RTL, but the last insn\n+     - epilogue_insns - does not accurately model the corresponding insns\n+     emitted in the asm file.  In particular, see the comment in thumb_exit\n+     'Find out how many of the (return) argument registers we can corrupt'.\n+     As a consequence, the epilogue may clobber registers without\n+     fuse-caller-save finding out about it.  Therefore, disable fuse-caller-save\n+     in Thumb1 mode.\n+     TODO: Accurately model clobbers for epilogue_insns and reenable\n+     fuse-caller-save.  */\n+  if (TARGET_THUMB1)\n+    flag_use_caller_save = 0;\n+\n   /* Register global variables with the garbage collector.  */\n   arm_add_gc_roots ();\n }"}]}