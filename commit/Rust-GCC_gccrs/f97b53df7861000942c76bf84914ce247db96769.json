{"sha": "f97b53df7861000942c76bf84914ce247db96769", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk3YjUzZGY3ODYxMDAwOTQyYzc2YmY4NDkxNGNlMjQ3ZGI5Njc2OQ==", "commit": {"author": {"name": "Bryce McKinlay", "email": "mckinlay@redhat.com", "date": "2004-08-10T15:41:15Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2004-08-10T15:41:15Z"}, "message": "java-gimplify.c (java_gimplify_new_array_init): Use create_tmp_var.\n\n2004-08-10  Bryce McKinlay  <mckinlay@redhat.com>\n\n\t* java-gimplify.c (java_gimplify_new_array_init): Use\n\tcreate_tmp_var. Don't create BLOCK here or call\n\tjava_gimplify_block.\n\nFrom-SVN: r85756", "tree": {"sha": "9dcc5aba0032213c474b293fd463c790720cda3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9dcc5aba0032213c474b293fd463c790720cda3d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f97b53df7861000942c76bf84914ce247db96769", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f97b53df7861000942c76bf84914ce247db96769", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f97b53df7861000942c76bf84914ce247db96769", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f97b53df7861000942c76bf84914ce247db96769/comments", "author": null, "committer": null, "parents": [{"sha": "7e04b67b775a32da7ccaa79897755601bdf53467", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e04b67b775a32da7ccaa79897755601bdf53467", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e04b67b775a32da7ccaa79897755601bdf53467"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "a1e5a0506f63981d690666724cc621a16620ffa8", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f97b53df7861000942c76bf84914ce247db96769/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f97b53df7861000942c76bf84914ce247db96769/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=f97b53df7861000942c76bf84914ce247db96769", "patch": "@@ -1,3 +1,8 @@\n+2004-08-10  Bryce McKinlay  <mckinlay@redhat.com>\n+\n+\t* java-gimplify.c (java_gimplify_new_array_init): Use create_tmp_var.\n+\tDon't create BLOCK here or call java_gimplify_block.\n+\n 2004-08-09  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* java-tree.h (flag_deprecated): Removed."}, {"sha": "2d3be9995a3cace4f00b3f6ddd97c81ce9808f60", "filename": "gcc/java/java-gimplify.c", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f97b53df7861000942c76bf84914ce247db96769/gcc%2Fjava%2Fjava-gimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f97b53df7861000942c76bf84914ce247db96769/gcc%2Fjava%2Fjava-gimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjava-gimplify.c?ref=f97b53df7861000942c76bf84914ce247db96769", "patch": "@@ -247,18 +247,12 @@ java_gimplify_new_array_init (tree exp)\n   tree values = CONSTRUCTOR_ELTS (init);\n \n   tree array_ptr_type = build_pointer_type (array_type);\n-  tree block = build0 (BLOCK, array_ptr_type);\n-  tree tmp = build_decl (VAR_DECL, get_identifier (\"<tmp>\"), array_ptr_type);\n-  tree array = build_decl (VAR_DECL, get_identifier (\"<array>\"),\n-\t\t\t   array_ptr_type);\n+  tree tmp = create_tmp_var (array_ptr_type, \"array\");\n   tree body = build2 (MODIFY_EXPR, array_ptr_type, tmp,\n \t\t      build_new_array (element_type, length));\n \n   int index = 0;\n \n-  DECL_CONTEXT (array) = current_function_decl;\n-  DECL_CONTEXT (tmp) = current_function_decl;\n-\n   /* FIXME: try to allocate array statically?  */\n   while (values != NULL_TREE)\n     {\n@@ -276,12 +270,7 @@ java_gimplify_new_array_init (tree exp)\n       values = TREE_CHAIN (values);\n     }\n \n-  body = build2 (COMPOUND_EXPR, array_ptr_type, body,\n-\t\t build2 (MODIFY_EXPR, array_ptr_type, array, tmp));\n-  TREE_CHAIN (tmp) = array;\n-  BLOCK_VARS (block) = tmp;\n-  BLOCK_EXPR_BODY (block) = body;\n-  return java_gimplify_block (block);\n+  return build2 (COMPOUND_EXPR, array_ptr_type, body, tmp);\n }\n \n static tree"}]}