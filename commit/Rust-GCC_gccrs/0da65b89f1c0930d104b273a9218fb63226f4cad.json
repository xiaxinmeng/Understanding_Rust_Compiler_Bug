{"sha": "0da65b89f1c0930d104b273a9218fb63226f4cad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGRhNjViODlmMWMwOTMwZDEwNGIyNzNhOTIxOGZiNjMyMjZmNGNhZA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2002-07-20T22:24:58Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2002-07-20T22:24:58Z"}, "message": "simplify-rtx.c (simplify_relational_operation): Optimize abs(x) < 0.0 (and abs(x) >= 0.0 when using -ffast-math).\n\n\n\t* simplify-rtx.c (simplify_relational_operation): Optimize\n\tabs(x) < 0.0 (and abs(x) >= 0.0 when using -ffast-math).\n\n\t* gcc.c-torture/execute/20020720-1.c: New test case.\n\nFrom-SVN: r55614", "tree": {"sha": "e37fb51103098113d2493eb7dee473ac4dd1ec99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e37fb51103098113d2493eb7dee473ac4dd1ec99"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0da65b89f1c0930d104b273a9218fb63226f4cad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0da65b89f1c0930d104b273a9218fb63226f4cad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0da65b89f1c0930d104b273a9218fb63226f4cad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0da65b89f1c0930d104b273a9218fb63226f4cad/comments", "author": null, "committer": null, "parents": [{"sha": "68cd2524d653124382c131d4a739c7f33a95c6b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68cd2524d653124382c131d4a739c7f33a95c6b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68cd2524d653124382c131d4a739c7f33a95c6b1"}], "stats": {"total": 67, "additions": 67, "deletions": 0}, "files": [{"sha": "833b857e7c193ecc8079bbd80e8b246e028b9de2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0da65b89f1c0930d104b273a9218fb63226f4cad", "patch": "@@ -1,3 +1,8 @@\n+2002-07-20  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* simplify-rtx.c (simplify_relational_operation): Optimize\n+\tabs(x) < 0.0 (and abs(x) >= 0.0 when using -ffast-math).\n+\n 2002-07-20  Michae Matz  <matz@suse.de>\n \n \t* ra-build.c: (remember_web_was_spilled): Use GENERAL_REGS."}, {"sha": "b98c47581f12c78205d1e9b49a6f96c4416bd4bf", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=0da65b89f1c0930d104b273a9218fb63226f4cad", "patch": "@@ -2075,6 +2075,28 @@ simplify_relational_operation (code, mode, op0, op1)\n \t    return const0_rtx;\n \t  break;\n \n+\tcase LT:\n+\t  /* Optimize abs(x) < 0.0.  */\n+\t  if (trueop1 == CONST0_RTX (mode))\n+\t    {\n+\t      tem = GET_CODE (trueop0) == FLOAT_EXTEND ? XEXP (trueop0, 0)\n+\t\t\t\t\t\t       : trueop0;\n+\t      if (GET_CODE (tem) == ABS)\n+\t\treturn const0_rtx;\n+\t    }\n+\t  break;\n+\n+\tcase GE:\n+\t  /* Optimize abs(x) >= 0.0.  */\n+\t  if (trueop1 == CONST0_RTX (mode) && !HONOR_NANS (mode))\n+\t    {\n+\t      tem = GET_CODE (trueop0) == FLOAT_EXTEND ? XEXP (trueop0, 0)\n+\t\t\t\t\t\t       : trueop0;\n+\t      if (GET_CODE (tem) == ABS)\n+\t\treturn const1_rtx;\n+\t    }\n+\t  break;\n+\n \tdefault:\n \t  break;\n \t}"}, {"sha": "5388182c101d752548fd25ab3e72a3a38eb0d50e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0da65b89f1c0930d104b273a9218fb63226f4cad", "patch": "@@ -1,3 +1,7 @@\n+2002-07-20  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* gcc.c-torture/execute/20020720-1.c: New testcase.\n+\n 2002-07-20  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* gcc.dg/cpp/Wsignprom.c: New tests."}, {"sha": "c70bc748a2290a2072c1fffeb1b6f72ee24e7826", "filename": "gcc/testsuite/gcc.c-torture/execute/20020720-1.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20020720-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0da65b89f1c0930d104b273a9218fb63226f4cad/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20020720-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20020720-1.c?ref=0da65b89f1c0930d104b273a9218fb63226f4cad", "patch": "@@ -0,0 +1,36 @@\n+/* Copyright (C) 2002  Free Software Foundation.\n+\n+   Ensure that fabs(x) < 0.0 optimization is working.\n+\n+   Written by Roger Sayle, 20th July 2002.  */\n+\n+extern void abort (void);\n+extern double fabs (double);\n+extern void link_error (void);\n+\n+void\n+foo (double x)\n+{\n+  double p, q;\n+\n+  p = fabs (x);\n+  q = 0.0;\n+  if (p < q)\n+    link_error ();\n+}\n+\n+int\n+main()\n+{\n+  foo (1.0);\n+  return 0;\n+}\n+\n+#ifndef __OPTIMIZE__\n+void\n+link_error ()\n+{\n+  abort ();\n+}\n+#endif\n+"}]}