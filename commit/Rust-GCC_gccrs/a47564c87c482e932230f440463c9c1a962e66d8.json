{"sha": "a47564c87c482e932230f440463c9c1a962e66d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQ3NTY0Yzg3YzQ4MmU5MzIyMzBmNDQwNDYzYzljMWE5NjJlNjZkOA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2006-03-16T16:34:05Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2006-03-16T16:34:05Z"}, "message": "re PR middle-end/21781 (real.c incorrectly values zero with a large exponent)\n\n\n\tPR middle-end/21781\n\t* real.c (real_from_string): If the mantissa is zero, don't bother\n\tparsing the exponent as the result should always be zero.\n\n\t* gcc.dg/real-const-1.c: New test case.\n\nFrom-SVN: r112136", "tree": {"sha": "a2a57c56bccf00dd8cdef7eec61b9feab32f21c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2a57c56bccf00dd8cdef7eec61b9feab32f21c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a47564c87c482e932230f440463c9c1a962e66d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a47564c87c482e932230f440463c9c1a962e66d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a47564c87c482e932230f440463c9c1a962e66d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a47564c87c482e932230f440463c9c1a962e66d8/comments", "author": null, "committer": null, "parents": [{"sha": "349f4ea14a4b563b86ef48a3f4dde6643ae91226", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/349f4ea14a4b563b86ef48a3f4dde6643ae91226", "html_url": "https://github.com/Rust-GCC/gccrs/commit/349f4ea14a4b563b86ef48a3f4dde6643ae91226"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "3dac824d2d9da68ffc8b3590209142d1b50b503e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a47564c87c482e932230f440463c9c1a962e66d8", "patch": "@@ -1,3 +1,9 @@\n+2006-03-16  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR middle-end/21781\n+\t* real.c (real_from_string): If the mantissa is zero, don't bother\n+\tparsing the exponent as the result should always be zero.\n+\n 2006-03-16  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* simplify-rtx.c (simplify_plus_minus): Simplify within CONST terms."}, {"sha": "1e1083f9abe4d5ba2e02d22f8e683aec9d5e55f7", "filename": "gcc/real.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2Freal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2Freal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freal.c?ref=a47564c87c482e932230f440463c9c1a962e66d8", "patch": "@@ -1862,6 +1862,11 @@ real_from_string (REAL_VALUE_TYPE *r, const char *str)\n \t      str++;\n \t    }\n \t}\n+\n+      /* If the mantissa is zero, ignore the exponent.  */\n+      if (!cmp_significand_0 (r))\n+\tgoto underflow;\n+\n       if (*str == 'p' || *str == 'P')\n \t{\n \t  bool exp_neg = false;\n@@ -1934,6 +1939,10 @@ real_from_string (REAL_VALUE_TYPE *r, const char *str)\n \t    }\n \t}\n \n+      /* If the mantissa is zero, ignore the exponent.  */\n+      if (r->cl == rvc_zero)\n+\tgoto underflow;\n+\n       if (*str == 'e' || *str == 'E')\n \t{\n \t  bool exp_neg = false;"}, {"sha": "90dc7004ae1085e8f6629ee97af489a61f2984ba", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a47564c87c482e932230f440463c9c1a962e66d8", "patch": "@@ -1,3 +1,8 @@\n+2006-03-16  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR middle-end/21781\n+\t* gcc.dg/real-const-1.c: New test case.\n+\n 2006-03-15  Geoffrey Keating  <geoffk@apple.com>\n \n \t* g++.old-deja/g++.other/init18.C: New."}, {"sha": "3e2bbfde8fc8ffabdc794141c595ec052d4cad53", "filename": "gcc/testsuite/gcc.dg/real-const-1.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2Ftestsuite%2Fgcc.dg%2Freal-const-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a47564c87c482e932230f440463c9c1a962e66d8/gcc%2Ftestsuite%2Fgcc.dg%2Freal-const-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Freal-const-1.c?ref=a47564c87c482e932230f440463c9c1a962e66d8", "patch": "@@ -0,0 +1,4 @@\n+/* PR middle-end/21781.  */\n+/* { dg-do compile } */\n+\n+int f[.0e200000000 == 0?1:-1];"}]}