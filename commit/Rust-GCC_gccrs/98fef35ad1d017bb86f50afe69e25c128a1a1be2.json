{"sha": "98fef35ad1d017bb86f50afe69e25c128a1a1be2", "node_id": "C_kwDOANBUbNoAKDk4ZmVmMzVhZDFkMDE3YmI4NmY1MGFmZTY5ZTI1YzEyOGExYTFiZTI", "commit": {"author": {"name": "J\u00f8rgen Kvalsvik", "email": "jorgen.kvalsvik@woven-planet.global", "date": "2022-10-07T11:29:20Z"}, "committer": {"name": "J\u00f8rgen Kvalsvik", "email": "jorgen.kvalsvik@woven-planet.global", "date": "2022-10-14T08:46:28Z"}, "message": "gcov: test line count for label in then/else block\n\nAdd a test to catch regression in line counts for labels on top of\nthen/else blocks. Only the 'goto <label>' should contribute to the line\ncounter for the label, not the if.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.misc-tests/gcov-4.c: New testcase.", "tree": {"sha": "102bd098aff7c07a7706aa4cfc816477d98d6c1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/102bd098aff7c07a7706aa4cfc816477d98d6c1b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98fef35ad1d017bb86f50afe69e25c128a1a1be2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98fef35ad1d017bb86f50afe69e25c128a1a1be2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98fef35ad1d017bb86f50afe69e25c128a1a1be2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98fef35ad1d017bb86f50afe69e25c128a1a1be2/comments", "author": null, "committer": null, "parents": [{"sha": "4b04292b76e89b332ae70208aabf8f0e12f3a63f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b04292b76e89b332ae70208aabf8f0e12f3a63f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b04292b76e89b332ae70208aabf8f0e12f3a63f"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "da7929ef7fcd30f00d0c68a451e95c3d8ee4a587", "filename": "gcc/testsuite/gcc.misc-tests/gcov-4.c", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98fef35ad1d017bb86f50afe69e25c128a1a1be2/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98fef35ad1d017bb86f50afe69e25c128a1a1be2/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-4.c?ref=98fef35ad1d017bb86f50afe69e25c128a1a1be2", "patch": "@@ -110,13 +110,37 @@ test_goto2 (int f)\n   return 8;\t\t\t\t/* count(1) */\n }\n \n+int\n+test_goto3 (int i, int j)\n+{\n+    if (j) goto else_;\t\t/* count(1) */\n+\n+top:\n+    if (i)\t\t\t/* count(1) */\n+      {\n+\ti = do_something (i);\n+      }\n+    else\n+      {\n+else_:\t\t\t\t/* count(1) */\n+\tj = do_something (j);\t/* count(2) */\n+\tif (j)\t\t\t/* count(2) */\n+\t  {\n+\t    j = 0;\t\t/* count(1) */\n+\t    goto top;\t\t/* count(1) */\n+\t  }\n+      }\n+    return 16;\n+}\n+\n void\n call_goto ()\n {\n   goto_val += test_goto1 (0);\n   goto_val += test_goto1 (1);\n   goto_val += test_goto2 (3);\n   goto_val += test_goto2 (30);\n+  goto_val += test_goto3 (0, 1);\n }\n \n /* Check nested if-then-else statements. */\n@@ -260,7 +284,7 @@ main()\n   call_unref ();\n   if ((for_val1 != 12)\n       || (for_val2 != 87)\n-      || (goto_val != 15)\n+      || (goto_val != 31)\n       || (ifelse_val1 != 31)\n       || (ifelse_val2 != 23)\n       || (ifelse_val3 != 246)"}]}