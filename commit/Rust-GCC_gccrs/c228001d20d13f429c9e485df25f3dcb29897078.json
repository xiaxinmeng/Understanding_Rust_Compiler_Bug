{"sha": "c228001d20d13f429c9e485df25f3dcb29897078", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzIyODAwMWQyMGQxM2Y0MjljOWU0ODVkZjI1ZjNkY2IyOTg5NzA3OA==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1993-01-01T17:19:41Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1993-01-01T17:19:41Z"}, "message": "pa.md (movdf const_double): Fix lengths.\n\n        * pa.md (movdf const_double): Fix lengths.\n        (floatsisf patterns): Likewise.\n        (floatsidf patterns): Likewise.\n\nFrom-SVN: r3042", "tree": {"sha": "6c6288ccbfef7229a137734a49a27f4f464bb299", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c6288ccbfef7229a137734a49a27f4f464bb299"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c228001d20d13f429c9e485df25f3dcb29897078", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c228001d20d13f429c9e485df25f3dcb29897078", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c228001d20d13f429c9e485df25f3dcb29897078", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c228001d20d13f429c9e485df25f3dcb29897078/comments", "author": null, "committer": null, "parents": [{"sha": "7c522d5919c1941499fc2077f2d0cf5b069db67e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c522d5919c1941499fc2077f2d0cf5b069db67e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c522d5919c1941499fc2077f2d0cf5b069db67e"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "bd629d52cbb8f00432a65c43d25b02e670693e68", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c228001d20d13f429c9e485df25f3dcb29897078/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c228001d20d13f429c9e485df25f3dcb29897078/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=c228001d20d13f429c9e485df25f3dcb29897078", "patch": "@@ -1091,6 +1091,8 @@\n ;; This pattern forces (set (reg:DF ...) (const_double ...))\n ;; to be reloaded by putting the constant into memory.\n ;; It must come before the more general movdf pattern.\n+;; In the 3rd alternative case -- we know we will not be using a \n+;; general register, so we can be sure length is just 1.\n (define_insn \"\"\n   [(set (match_operand:DF 0 \"general_operand\" \"=?r,r,fx\")\n \t(match_operand:DF 1 \"\" \"?E,G,m\"))]\n@@ -1108,7 +1110,7 @@\n     }\n }\"\n   [(set_attr \"type\" \"load,move,fpload\")\n-   (set_attr \"length\" \"3,2,3\")])\n+   (set_attr \"length\" \"3,2,1\")])\n \n (define_expand \"movdf\"\n   [(set (match_operand:DF 0 \"general_operand\" \"\")\n@@ -1443,40 +1445,48 @@\n ;; This pattern forces (set (reg:SF ...) (float:SF (const_int ...)))\n ;; to be reloaded by putting the constant into memory.\n ;; It must come before the more general floatsisf2 pattern.\n+;; Note length will always be 2 since we know we are loading\n+;; operand 1 from memory and the target is a FP register.\n (define_insn \"\"\n   [(set (match_operand:SF 0 \"general_operand\" \"=fx\")\n \t(float:SF (match_operand:SI 1 \"const_int_operand\" \"m\")))]\n   \"\"\n   \"* return output_floatsisf2 (operands);\"\n   [(set_attr \"type\" \"fpalu\")\n-   (set_attr \"length\" \"3\")])\n+   (set_attr \"length\" \"2\")])\n \n+;; Note length will always be 1 since we only allow FP registers\n+;; for the source and target.\n (define_insn \"floatsisf2\"\n   [(set (match_operand:SF 0 \"general_operand\" \"=fx\")\n \t(float:SF (match_operand:SI 1 \"register_operand\" \"fx\")))]\n   \"\"\n   \"* return output_floatsisf2 (operands);\"\n   [(set_attr \"type\" \"fpalu\")\n-   (set_attr \"length\" \"3\")])\n+   (set_attr \"length\" \"1\")])\n \n ;; This pattern forces (set (reg:DF ...) (float:DF (const_int ...)))\n ;; to be reloaded by putting the constant into memory.\n ;; It must come before the more general floatsidf2 pattern.\n+;; Note length will always be 2 since we know we are loading\n+;; operand 1 from memory and the target is a FP register.\n (define_insn \"\"\n   [(set (match_operand:DF 0 \"general_operand\" \"=fx\")\n \t(float:DF (match_operand:SI 1 \"const_int_operand\" \"m\")))]\n   \"\"\n   \"* return output_floatsidf2 (operands);\"\n   [(set_attr \"type\" \"fpalu\")\n-   (set_attr \"length\" \"3\")])\n+   (set_attr \"length\" \"2\")])\n \n+;; Note length will always be 1 since we only allow FP registers\n+;; for the source and target.\n (define_insn \"floatsidf2\"\n   [(set (match_operand:DF 0 \"general_operand\" \"=fx\")\n \t(float:DF (match_operand:SI 1 \"register_operand\" \"fx\")))]\n   \"\"\n   \"* return output_floatsidf2 (operands);\"\n   [(set_attr \"type\" \"fpalu\")\n-   (set_attr \"length\" \"3\")])\n+   (set_attr \"length\" \"1\")])\n \n ;; Convert a float to an actual integer.\n ;; Truncation is performed as part of the conversion."}]}