{"sha": "56873e134278518a658a25bb928b473a51f57b95", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY4NzNlMTM0Mjc4NTE4YTY1OGEyNWJiOTI4YjQ3M2E1MWY1N2I5NQ==", "commit": {"author": {"name": "Evgeny Stupachenko", "email": "evstupac@gmail.com", "date": "2014-10-23T16:52:11Z"}, "committer": {"name": "Ilya Verbin", "email": "iverbin@gcc.gnu.org", "date": "2014-10-23T16:52:11Z"}, "message": "re PR target/63534 (Bootstrap failure on x86_64/i686-linux)\n\n\tPR target/63534\n\tPR target/63618\ngcc/\n\t* cse.c (delete_trivially_dead_insns): Consider PIC register is used\n\twhile it is pseudo.\n\t* dse.c (deletable_insn_p): Likewise.\ngcc/testsuite/\n\t* gcc.target/i386/pr63618.c: New test.\n\nFrom-SVN: r216596", "tree": {"sha": "762dafe16440a2ac39820ecedae967e46f1e97ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/762dafe16440a2ac39820ecedae967e46f1e97ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/56873e134278518a658a25bb928b473a51f57b95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56873e134278518a658a25bb928b473a51f57b95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56873e134278518a658a25bb928b473a51f57b95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56873e134278518a658a25bb928b473a51f57b95/comments", "author": {"login": "evstupac", "id": 38332307, "node_id": "MDQ6VXNlcjM4MzMyMzA3", "avatar_url": "https://avatars.githubusercontent.com/u/38332307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evstupac", "html_url": "https://github.com/evstupac", "followers_url": "https://api.github.com/users/evstupac/followers", "following_url": "https://api.github.com/users/evstupac/following{/other_user}", "gists_url": "https://api.github.com/users/evstupac/gists{/gist_id}", "starred_url": "https://api.github.com/users/evstupac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evstupac/subscriptions", "organizations_url": "https://api.github.com/users/evstupac/orgs", "repos_url": "https://api.github.com/users/evstupac/repos", "events_url": "https://api.github.com/users/evstupac/events{/privacy}", "received_events_url": "https://api.github.com/users/evstupac/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1bc5a4513e09efd42f22ccbc25ff8cd7ec5619f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bc5a4513e09efd42f22ccbc25ff8cd7ec5619f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bc5a4513e09efd42f22ccbc25ff8cd7ec5619f5"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "70f6e0db9f50dc28e16254608f847338f6a62ab0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56873e134278518a658a25bb928b473a51f57b95/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56873e134278518a658a25bb928b473a51f57b95/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=56873e134278518a658a25bb928b473a51f57b95", "patch": "@@ -1,3 +1,11 @@\n+2014-10-23  Evgeny Stupachenko  <evstupac@gmail.com>\n+\n+\tPR target/63534\n+\tPR target/63618\n+\t* cse.c (delete_trivially_dead_insns): Consider PIC register is used\n+\twhile it is pseudo.\n+\t* dse.c (deletable_insn_p): Likewise.\n+\n 2014-10-23  Georg-Johann Lay  <avr@gjlay.de>\n \n \t* config/avr/avr.c: Fix GNU coding rules and typos."}, {"sha": "80c43beccf1bbb6642419e2a55f80f6c203194a5", "filename": "gcc/cse.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56873e134278518a658a25bb928b473a51f57b95/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56873e134278518a658a25bb928b473a51f57b95/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=56873e134278518a658a25bb928b473a51f57b95", "patch": "@@ -6957,6 +6957,12 @@ delete_trivially_dead_insns (rtx_insn *insns, int nreg)\n       /* If no debug insns can be present, COUNTS is just an array\n \t which counts how many times each pseudo is used.  */\n     }\n+  /* Pseudo PIC register should be considered as used due to possible\n+     new usages generated.  */\n+  if (!reload_completed\n+      && pic_offset_table_rtx\n+      && REGNO (pic_offset_table_rtx) >= FIRST_PSEUDO_REGISTER)\n+    counts[REGNO (pic_offset_table_rtx)]++;\n   /* Go from the last insn to the first and delete insns that only set unused\n      registers or copy a register to itself.  As we delete an insn, remove\n      usage counts for registers it uses."}, {"sha": "a52a59c604d4f7ff8f65bb1929a1486e84ea069c", "filename": "gcc/dce.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56873e134278518a658a25bb928b473a51f57b95/gcc%2Fdce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56873e134278518a658a25bb928b473a51f57b95/gcc%2Fdce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdce.c?ref=56873e134278518a658a25bb928b473a51f57b95", "patch": "@@ -127,6 +127,10 @@ deletable_insn_p (rtx_insn *insn, bool fast, bitmap arg_stores)\n     if (HARD_REGISTER_NUM_P (DF_REF_REGNO (def))\n \t&& global_regs[DF_REF_REGNO (def)])\n       return false;\n+    /* Initialization of pseudo PIC register should never be removed.  */\n+    else if (DF_REF_REG (def) == pic_offset_table_rtx\n+\t     && REGNO (pic_offset_table_rtx) >= FIRST_PSEUDO_REGISTER)\n+      return false;\n \n   body = PATTERN (insn);\n   switch (GET_CODE (body))"}, {"sha": "e5105419355aa5fea5d7b129dd4bd10ceda3e0ad", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56873e134278518a658a25bb928b473a51f57b95/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56873e134278518a658a25bb928b473a51f57b95/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=56873e134278518a658a25bb928b473a51f57b95", "patch": "@@ -1,3 +1,8 @@\n+2014-10-23  Evgeny Stupachenko  <evstupac@gmail.com>\n+\n+\tPR target/63618\n+\t* gcc.target/i386/pr63618.c: New test.\n+\n 2014-10-23  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/63626"}, {"sha": "70e1ee4b057baff42e1de07fced5ebe0eecd7bf2", "filename": "gcc/testsuite/gcc.target/i386/pr63618.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56873e134278518a658a25bb928b473a51f57b95/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr63618.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56873e134278518a658a25bb928b473a51f57b95/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr63618.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr63618.c?ref=56873e134278518a658a25bb928b473a51f57b95", "patch": "@@ -0,0 +1,34 @@\n+/* PR target/63618 */\n+/* { dg-do run } */\n+/* { dg-options \"-O2 -mtune=corei7 -fno-inline\" } */\n+/* { dg-additional-options \"-msse4.2\" { target sse4 } } */\n+/* { dg-additional-options \"-fpic\" { target fpic } } */\n+\n+static const __float128 cf = 0.1E+10Q;\n+\n+__float128\n+f128_square(__float128 x)\n+{\n+  return x * x;\n+}\n+\n+__float128\n+f128_p3(__float128 x)\n+{\n+  return x * x * x;\n+}\n+\n+__float128\n+cond_f128_square (__float128 x, int p)\n+{\n+  x = f128_p3 (x);\n+  if (p)\n+    x = f128_square(cf);\n+  return x;\n+}\n+\n+int main()\n+{\n+  __float128 x = cond_f128_square (cf, 1);\n+  return (int)(x < cf);\n+}"}]}