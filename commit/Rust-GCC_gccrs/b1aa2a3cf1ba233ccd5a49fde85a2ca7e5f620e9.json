{"sha": "b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9", "node_id": "C_kwDOANBUbNoAKGIxYWEyYTNjZjFiYTIzM2NjZDVhNDlmZGU4NWEyY2E3ZTVmNjIwZTk", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2022-01-24T16:47:13Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2022-01-24T16:47:13Z"}, "message": "c++: Fix non-portable default argument of make_auto_1 [PR104197]\n\nAvoid using the macro current_template_depth, which expands to an\nexpression that uses __FUNCTION__, within the signature of a function.\n\n\tPR c++/104197\n\ngcc/cp/ChangeLog:\n\n\t* pt.cc (make_auto_1): Use -1 as a placeholder default argument\n\tfor level.", "tree": {"sha": "dac41103080fcdb4277a7d9263981ea00dec0b9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dac41103080fcdb4277a7d9263981ea00dec0b9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9/comments", "author": null, "committer": null, "parents": [{"sha": "2a908f3da07c9e94b8a19e966b45daf0140107e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a908f3da07c9e94b8a19e966b45daf0140107e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a908f3da07c9e94b8a19e966b45daf0140107e8"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "8f50b9c4d3c2e2e18b148f091d6a89cfb5c63e9c", "filename": "gcc/cp/pt.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9/gcc%2Fcp%2Fpt.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9/gcc%2Fcp%2Fpt.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.cc?ref=b1aa2a3cf1ba233ccd5a49fde85a2ca7e5f620e9", "patch": "@@ -28477,9 +28477,10 @@ make_args_non_dependent (vec<tree, va_gc> *args)\n    by default.  If set_canonical is true, we set TYPE_CANONICAL on it.  */\n \n static tree\n-make_auto_1 (tree name, bool set_canonical,\n-\t     int level = current_template_depth + 1)\n+make_auto_1 (tree name, bool set_canonical, int level = -1)\n {\n+  if (level == -1)\n+    level = current_template_depth + 1;\n   tree au = cxx_make_type (TEMPLATE_TYPE_PARM);\n   TYPE_NAME (au) = build_decl (input_location, TYPE_DECL, name, au);\n   TYPE_STUB_DECL (au) = TYPE_NAME (au);"}]}