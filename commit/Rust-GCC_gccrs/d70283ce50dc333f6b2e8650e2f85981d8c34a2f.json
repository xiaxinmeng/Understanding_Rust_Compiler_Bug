{"sha": "d70283ce50dc333f6b2e8650e2f85981d8c34a2f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDcwMjgzY2U1MGRjMzMzZjZiMmU4NjUwZTJmODU5ODFkOGMzNGEyZg==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-08-02T06:46:43Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-08-02T06:46:43Z"}, "message": "Initial revision\n\nFrom-SVN: r21536", "tree": {"sha": "2c9482e989f07f5c43b7f84ae447bf43769f5641", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c9482e989f07f5c43b7f84ae447bf43769f5641"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d70283ce50dc333f6b2e8650e2f85981d8c34a2f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d70283ce50dc333f6b2e8650e2f85981d8c34a2f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d70283ce50dc333f6b2e8650e2f85981d8c34a2f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d70283ce50dc333f6b2e8650e2f85981d8c34a2f/comments", "author": null, "committer": null, "parents": [{"sha": "19b7a780f4aa53761e35aea1c963a06b454e0f7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19b7a780f4aa53761e35aea1c963a06b454e0f7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19b7a780f4aa53761e35aea1c963a06b454e0f7e"}], "stats": {"total": 756, "additions": 756, "deletions": 0}, "files": [{"sha": "b70a7c8df675b2d32cd0a27127de696e3ca673db", "filename": "gcc/ABOUT-GCC-NLS", "status": "added", "additions": 542, "deletions": 0, "changes": 542, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d70283ce50dc333f6b2e8650e2f85981d8c34a2f/gcc%2FABOUT-GCC-NLS", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d70283ce50dc333f6b2e8650e2f85981d8c34a2f/gcc%2FABOUT-GCC-NLS", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FABOUT-GCC-NLS?ref=d70283ce50dc333f6b2e8650e2f85981d8c34a2f", "patch": "@@ -0,0 +1,542 @@\n+Notes on GCC's Native Language Support\n+\n+GCC's Native Language Support (NLS) is relatively new and\n+experimental, so NLS is currently disabled by default.  Use\n+configure's --enable-nls option to enable it.  Eventually, NLS will be\n+enabled by default, and you'll need --disable-nls to disable it.  You\n+must enable NLS in order to make a GCC distribution.\n+\n+By and large, only diagnostic messages have been internationalized.\n+Some work remains in other areas; for example, GCC does not yet allow\n+non-ASCII letters in identifiers.\n+\n+Not all of GCC's diagnostic messages have been internationalized.\n+Programs like `enquire' and `genattr' are not internationalized, as\n+their users are GCC maintainers who typically need to be able to read\n+English anyway; internationalizing them would thus entail needless\n+work for the human translators.  And no one has yet gotten around to\n+internationalizing the messages in the C++ compiler, or in the\n+specialized MIPS-specific programs mips-tdump and mips-tfile.\n+\n+The GCC library should not contain any messages that need\n+internationalization, because it operates below the\n+internationalization library.\n+\n+Currently, the only language translation supplied is en_UK (British English).\n+\n+Unlike some other GNU programs, the GCC sources contain few instances\n+of explicit translation calls like _(\"string\").  Instead, the\n+diagnostic printing routines automatically translate their arguments.\n+For example, GCC source code should not contain calls like `error\n+(_(\"unterminated comment\"))'; it should contain calls like `error\n+(\"unterminated comment\")' instead, as it is the `error' function's\n+responsibility to translate the message before the user sees it.\n+\n+By convention, any function parameter in the GCC sources whose name\n+ends in `msgid' is expected to be a message requiring translation.\n+For example, the `error' function's first parameter is named `msgid'.\n+GCC's exgettext script uses this convention to determine which\n+function parameter strings need to be translated.  The exgettext\n+script also assumes that any occurrence of `%eMSGID}' on a source\n+line, where MSGID does not contain `%' or `}', corresponds to a\n+message MSGID that requires translation; this is needed to identify\n+diagnostics in GCC spec strings.\n+\n+If you enable NLS and modify source files, you'll need to use a\n+special version of the GNU gettext package to propagate the\n+modifications to the translation tables.  Apply the following patch\n+(use `patch -p0') to GNU gettext 0.10.35, which you can retrieve from:\n+\n+ftp://alpha.gnu.org/gnu/gettext-0.10.35.tar.gz\n+\n+This patch has been submitted to the GNU gettext maintainer, so\n+eventually we shouldn't need this special gettext version.\n+\n+This patch is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+This patch is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with this patch; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.\n+\n+1998-07-26  Paul Eggert  <eggert@twinsun.com>\n+\n+\t* po/Makefile.in.in (maintainer-clean): Remove cat-id-tbl.c and\n+\tstamp-cat-id.\n+\n+1998-07-24  Paul Eggert  <eggert@twinsun.com>\n+\n+\t* po/Makefile.in.in (cat-id-tbl.o): Depend on\n+\t$(top_srcdir)/intl/libgettext.h, not ../intl/libgettext.h.\n+\n+1998-07-20  Paul Eggert  <eggert@twinsun.com>\n+\n+\t* po/Makefile.in.in (.po.pox, all-yes, $(srcdir)/cat-id-tbl.c,\n+\t$(srcdir)/stamp-cat-id, update-po): Prepend `$(srcdir)/' to\n+\tfiles built in the source directory; this is needed for\n+\tVPATH-based make in Solaris 2.6.\n+\n+1998-07-17  Paul Eggert  <eggert@twinsun.com>\n+\n+\tAdd support for user-specified argument numbers for keywords.\n+\tExtract all strings from a keyword arg, not just the first one.\n+\tHandle parenthesized commas inside keyword args correctly.\n+\tWarn about nested keywords.\n+\n+\t* doc/gettext.texi: Document --keyword=id:argnum.\n+\n+\t* src/xgettext.c (scan_c_file):\n+\tWarn about nested keywords, e.g. _(_(\"xxx\")).\n+\tWarn also about not-yet-implemented but allowed nesting, e.g.\n+\tdcgettext(..._(\"xxx\")..., \"yyy\").\n+\tGet all strings in a keyword arg, not just the first one.\n+\tHandle parenthesized commas inside keyword args correctly.\n+\n+\t* src/xget-lex.h (enum xgettext_token_type_ty):\n+\tReplace xgettext_token_type_keyword1 and\n+\txgettext_token_type_keyword2 with just plain\n+\txgettext_token_type_keyword; it now has argnum value.\n+\tAdd xgettext_token_type_rp.\n+\t(struct xgettext_token_ty): Add argnum member.\n+\tline_number and file_name are now also set for\n+\txgettext_token_type_keyword.\n+\t(xgettext_lex_keyword): Arg is const char *.\n+\n+\t* src/xget-lex.c: Include \"hash.h\".\n+\t(enum token_type_ty): Add token_type_rp.\n+\t(keywords): Now a hash table.\n+\t(phase5_get): Return token_type_rp for ')'.\n+\t(xgettext_lex, xgettext_lex_keyword): Add support for keyword argnums.\n+\t(xgettext_lex): Return xgettext_token_type_rp for ')'.\n+\tReport keyword argnum, line number, and file name back to caller.\n+\n+1998-07-09  Paul Eggert  <eggert@twinsun.com>\n+\n+        * intl/Makefile.in (uninstall):\n+\tDo nothing unless $(PACKAGE) is gettext.\n+\n+===================================================================\n+RCS file: doc/gettext.texi,v\n+retrieving revision 0.10.35.0\n+retrieving revision 0.10.35.1\n+diff -pu -r0.10.35.0 -r0.10.35.1\n+--- doc/gettext.texi\t1998/05/01 05:53:32\t0.10.35.0\n++++ doc/gettext.texi\t1998/07/18 00:25:15\t0.10.35.1\n+@@ -1854,13 +1854,19 @@ List of directories searched for input f\n+ Join messages with existing file.\n+ \n+ @item -k @var{word}\n+-@itemx --keyword[=@var{word}]\n+-Additonal keyword to be looked for (without @var{word} means not to\n++@itemx --keyword[=@var{keywordspec}]\n++Additonal keyword to be looked for (without @var{keywordspec} means not to\n+ use default keywords).\n+ \n+-The default keywords, which are always looked for if not explicitly\n+-disabled, are @code{gettext}, @code{dgettext}, @code{dcgettext} and\n+-@code{gettext_noop}.\n++If @var{keywordspec} is a C identifer @var{id}, @code{xgettext} looks\n++for strings in the first argument of each call to the function or macro\n++@var{id}.  If @var{keywordspec} is of the form\n++@samp{@var{id}:@var{argnum}}, @code{xgettext} looks for strings in the\n++@var{argnum}th argument of the call.\n++\n++The default keyword specifications, which are always looked for if not\n++explicitly disabled, are @code{gettext}, @code{dgettext:2},\n++@code{dcgettext:2} and @code{gettext_noop}.\n+ \n+ @item -m [@var{string}]\n+ @itemx --msgstr-prefix[=@var{string}]\n+===================================================================\n+RCS file: intl/Makefile.in,v\n+retrieving revision 0.10.35.0\n+retrieving revision 0.10.35.1\n+diff -pu -r0.10.35.0 -r0.10.35.1\n+--- intl/Makefile.in\t1998/04/27 21:53:18\t0.10.35.0\n++++ intl/Makefile.in\t1998/07/09 21:39:18\t0.10.35.1\n+@@ -143,10 +143,14 @@ install-data: all\n+ installcheck:\n+ \n+ uninstall:\n+-\tdists=\"$(DISTFILES.common)\"; \\\n+-\tfor file in $$dists; do \\\n+-\t  rm -f $(gettextsrcdir)/$$file; \\\n+-\tdone\n++\tif test \"$(PACKAGE)\" = \"gettext\"; then \\\n++\t  dists=\"$(DISTFILES.common)\"; \\\n++\t  for file in $$dists; do \\\n++\t    rm -f $(gettextsrcdir)/$$file; \\\n++\t  done\n++\telse \\\n++\t  : ; \\\n++\tfi\n+ \n+ info dvi:\n+ \n+===================================================================\n+RCS file: src/xget-lex.c,v\n+retrieving revision 0.10.35.0\n+retrieving revision 0.10.35.1\n+diff -pu -r0.10.35.0 -r0.10.35.1\n+--- src/xget-lex.c\t1998/07/09 22:49:48\t0.10.35.0\n++++ src/xget-lex.c\t1998/07/18 00:25:15\t0.10.35.1\n+@@ -33,6 +33,7 @@\n+ #include \"error.h\"\n+ #include \"system.h\"\n+ #include \"libgettext.h\"\n++#include \"hash.h\"\n+ #include \"str-list.h\"\n+ #include \"xget-lex.h\"\n+ \n+@@ -83,6 +84,7 @@ enum token_type_ty\n+   token_type_eoln,\n+   token_type_hash,\n+   token_type_lp,\n++  token_type_rp,\n+   token_type_comma,\n+   token_type_name,\n+   token_type_number,\n+@@ -109,7 +111,7 @@ static FILE *fp;\n+ static int trigraphs;\n+ static int cplusplus_comments;\n+ static string_list_ty *comment;\n+-static string_list_ty *keywords;\n++static hash_table keywords;\n+ static int default_keywords = 1;\n+ \n+ /* These are for tracking whether comments count as immediately before\n+@@ -941,6 +943,10 @@ phase5_get (tp)\n+       tp->type = token_type_lp;\n+       return;\n+ \n++    case ')':\n++      tp->type = token_type_rp;\n++      return;\n++\n+     case ',':\n+       tp->type = token_type_comma;\n+       return;\n+@@ -1179,6 +1185,7 @@ xgettext_lex (tp)\n+   while (1)\n+     {\n+       token_ty token;\n++      void *keyword_value;\n+ \n+       phase8_get (&token);\n+       switch (token.type)\n+@@ -1213,17 +1220,20 @@ xgettext_lex (tp)\n+ \t  if (default_keywords)\n+ \t    {\n+ \t      xgettext_lex_keyword (\"gettext\");\n+-\t      xgettext_lex_keyword (\"dgettext\");\n+-\t      xgettext_lex_keyword (\"dcgettext\");\n++\t      xgettext_lex_keyword (\"dgettext:2\");\n++\t      xgettext_lex_keyword (\"dcgettext:2\");\n+ \t      xgettext_lex_keyword (\"gettext_noop\");\n+ \t      default_keywords = 0;\n+ \t    }\n+ \n+-\t  if (string_list_member (keywords, token.string))\n+-\t    {\n+-\t      tp->type = (strcmp (token.string, \"dgettext\") == 0\n+-\t\t\t  || strcmp (token.string, \"dcgettext\") == 0)\n+-\t\t? xgettext_token_type_keyword2 : xgettext_token_type_keyword1;\n++\t  if (find_entry (&keywords, token.string, strlen (token.string),\n++\t\t\t  &keyword_value)\n++\t      == 0)\n++\t    {\n++\t      tp->type = xgettext_token_type_keyword;\n++\t      tp->argnum = (int) keyword_value;\n++\t      tp->line_number = token.line_number;\n++\t      tp->file_name = logical_file_name;\n+ \t    }\n+ \t  else\n+ \t    tp->type = xgettext_token_type_symbol;\n+@@ -1236,6 +1246,12 @@ xgettext_lex (tp)\n+ \t  tp->type = xgettext_token_type_lp;\n+ \t  return;\n+ \n++\tcase token_type_rp:\n++\t  last_non_comment_line = newline_count;\n++\n++\t  tp->type = xgettext_token_type_rp;\n++\t  return;\n++\n+ \tcase token_type_comma:\n+ \t  last_non_comment_line = newline_count;\n+ \n+@@ -1263,16 +1279,32 @@ xgettext_lex (tp)\n+ \n+ void\n+ xgettext_lex_keyword (name)\n+-     char *name;\n++     const char *name;\n+ {\n+   if (name == NULL)\n+     default_keywords = 0;\n+   else\n+     {\n+-      if (keywords == NULL)\n+-\tkeywords = string_list_alloc ();\n++      int argnum;\n++      size_t len;\n++      const char *sp;\n++\n++      if (keywords.table == NULL)\n++\tinit_hash (&keywords, 100);\n++\n++      sp = strchr (name, ':');\n++      if (sp)\n++\t{\n++\t  len = sp - name;\n++\t  argnum = atoi (sp + 1);\n++\t}\n++      else\n++\t{\n++\t  len = strlen (name);\n++\t  argnum = 1;\n++\t}\n+ \n+-      string_list_append_unique (keywords, name);\n++      insert_entry (&keywords, name, len, (void *) argnum);\n+     }\n+ }\n+ \n+===================================================================\n+RCS file: src/xget-lex.h,v\n+retrieving revision 0.10.35.0\n+retrieving revision 0.10.35.1\n+diff -pu -r0.10.35.0 -r0.10.35.1\n+--- src/xget-lex.h\t1998/07/09 22:49:48\t0.10.35.0\n++++ src/xget-lex.h\t1998/07/18 00:25:15\t0.10.35.1\n+@@ -23,9 +23,9 @@ Foundation, Inc., 59 Temple Place - Suit\n+ enum xgettext_token_type_ty\n+ {\n+   xgettext_token_type_eof,\n+-  xgettext_token_type_keyword1,\n+-  xgettext_token_type_keyword2,\n++  xgettext_token_type_keyword,\n+   xgettext_token_type_lp,\n++  xgettext_token_type_rp,\n+   xgettext_token_type_comma,\n+   xgettext_token_type_string_literal,\n+   xgettext_token_type_symbol\n+@@ -37,8 +37,14 @@ struct xgettext_token_ty\n+ {\n+   xgettext_token_type_ty type;\n+ \n+-  /* These 3 are only set for xgettext_token_type_string_literal.  */\n++  /* This 1 is set only for xgettext_token_type_keyword.  */\n++  int argnum;\n++\n++  /* This 1 is set only for xgettext_token_type_string_literal.  */\n+   char *string;\n++\n++  /* These 2 are set only for xgettext_token_type_keyword and\n++     xgettext_token_type_string_literal.  */\n+   int line_number;\n+   char *file_name;\n+ };\n+@@ -50,7 +56,7 @@ void xgettext_lex PARAMS ((xgettext_toke\n+ const char *xgettext_lex_comment PARAMS ((size_t __n));\n+ void xgettext_lex_comment_reset PARAMS ((void));\n+ /* void xgettext_lex_filepos PARAMS ((char **, int *)); FIXME needed?  */\n+-void xgettext_lex_keyword PARAMS ((char *__name));\n++void xgettext_lex_keyword PARAMS ((const char *__name));\n+ void xgettext_lex_cplusplus PARAMS ((void));\n+ void xgettext_lex_trigraphs PARAMS ((void));\n+ \n+===================================================================\n+RCS file: src/xgettext.c,v\n+retrieving revision 0.10.35.0\n+retrieving revision 0.10.35.1\n+diff -pu -r0.10.35.0 -r0.10.35.1\n+--- src/xgettext.c\t1998/07/09 22:49:48\t0.10.35.0\n++++ src/xgettext.c\t1998/07/18 00:25:15\t0.10.35.1\n+@@ -835,6 +835,8 @@ scan_c_file(filename, mlp, is_cpp_file)\n+      int is_cpp_file;\n+ {\n+   int state;\n++  int commas_to_skip;\t/* defined only when in states 1 and 2 */\n++  int paren_nesting;\t/* defined only when in state 2 */\n+ \n+   /* Inform scanner whether we have C++ files or not.  */\n+   if (is_cpp_file)\n+@@ -854,63 +856,79 @@ scan_c_file(filename, mlp, is_cpp_file)\n+    {\n+      xgettext_token_ty token;\n+ \n+-     /* A simple state machine is used to do the recognising:\n++     /* A state machine is used to do the recognising:\n+         State 0 = waiting for something to happen\n+-        State 1 = seen one of our keywords with string in first parameter\n+-        State 2 = was in state 1 and now saw a left paren\n+-\tState 3 = seen one of our keywords with string in second parameter\n+-\tState 4 = was in state 3 and now saw a left paren\n+-\tState 5 = waiting for comma after being in state 4\n+-\tState 6 = saw comma after being in state 5  */\n++        State 1 = seen one of our keywords\n++        State 2 = waiting for part of an argument */\n+      xgettext_lex (&token);\n+      switch (token.type)\n+        {\n+-       case xgettext_token_type_keyword1:\n++       case xgettext_token_type_keyword:\n++\t if (!extract_all && state == 2)\n++\t   {\n++\t     if (commas_to_skip == 0)\n++\t       {\n++\t\t error (0, 0,\n++\t\t\t_(\"%s:%d: warning: keyword nested in keyword arg\"),\n++\t\t\ttoken.file_name, token.line_number);\n++\t\t continue;\n++\t       }\n++\n++\t     /* Here we should nest properly, but this would require a\n++\t\tpotentially unbounded stack.  We haven't run across an\n++\t\texample that needs this functionality yet.  For now,\n++\t\twe punt and forget the outer keyword.  */\n++\t     error (0, 0,\n++\t\t    _(\"%s:%d: warning: keyword between outer keyword and its arg\"),\n++\t\t    token.file_name, token.line_number);\n++\t   }\n++\t commas_to_skip = token.argnum - 1;\n+ \t state = 1;\n+ \t continue;\n+ \n+-       case xgettext_token_type_keyword2:\n+-\t state = 3;\n+-\t continue;\n+-\n+        case xgettext_token_type_lp:\n+ \t switch (state)\n+ \t   {\n+ \t   case 1:\n++\t     paren_nesting = 0;\n+ \t     state = 2;\n+ \t     break;\n+-\t   case 3:\n+-\t     state = 4;\n++\t   case 2:\n++\t     paren_nesting++;\n+ \t     break;\n+-\t   default:\n+-\t     state = 0;\n+ \t   }\n+ \t continue;\n+ \n++       case xgettext_token_type_rp:\n++\t if (state == 2 && paren_nesting != 0)\n++\t   paren_nesting--;\n++\t else\n++\t   state = 0;\n++\t continue;\n++\n+        case xgettext_token_type_comma:\n+-\t state = state == 5 ? 6 : 0;\n++\t if (state == 2 && commas_to_skip != 0)\n++\t   commas_to_skip -= paren_nesting == 0;\n++\t else\n++\t   state = 0;\n+ \t continue;\n+ \n+        case xgettext_token_type_string_literal:\n+-\t if (extract_all || state == 2 || state == 6)\n+-\t   {\n+-\t     remember_a_message (mlp, &token);\n+-\t     state = 0;\n+-\t   }\n++\t if (extract_all || (state == 2 && commas_to_skip == 0))\n++\t   remember_a_message (mlp, &token);\n+ \t else\n+ \t   {\n+ \t     free (token.string);\n+-\t     state = (state == 4 || state == 5) ? 5 : 0;\n++\t     state = state == 2 ? 2 : 0;\n+ \t   }\n+ \t continue;\n+ \n+        case xgettext_token_type_symbol:\n+-\t state = (state == 4 || state == 5) ? 5 : 0;\n++\t state = state == 2 ? 2 : 0;\n+ \t continue;\n+ \n+        default:\n+-\t state = 0;\n+-\t continue;\n++\t abort ();\n+ \n+        case xgettext_token_type_eof:\n+ \t break;\n+===================================================================\n+RCS file: po/Makefile.in.in,v\n+retrieving revision 0.10.35.0\n+retrieving revision 0.10.35.5\n+diff -u -r0.10.35.0 -r0.10.35.5\n+--- po/Makefile.in.in\t1998/07/20 20:20:38\t0.10.35.0\n++++ po/Makefile.in.in\t1998/07/26 09:07:52\t0.10.35.5\n+@@ -62,7 +62,7 @@\n+ \t$(COMPILE) $<\n+ \n+ .po.pox:\n+-\t$(MAKE) $(PACKAGE).pot\n++\t$(MAKE) $(srcdir)/$(PACKAGE).pot\n+ \t$(MSGMERGE) $< $(srcdir)/$(PACKAGE).pot -o $*.pox\n+ \n+ .po.mo:\n+@@ -79,7 +79,7 @@\n+ \n+ all: all-@USE_NLS@\n+ \n+-all-yes: cat-id-tbl.c $(CATALOGS)\n++all-yes: $(srcdir)/cat-id-tbl.c $(CATALOGS)\n+ all-no:\n+ \n+ $(srcdir)/$(PACKAGE).pot: $(POTFILES)\n+@@ -90,8 +90,8 @@\n+ \t   || ( rm -f $(srcdir)/$(PACKAGE).pot \\\n+ \t\t&& mv $(PACKAGE).po $(srcdir)/$(PACKAGE).pot )\n+ \n+-$(srcdir)/cat-id-tbl.c: stamp-cat-id; @:\n+-$(srcdir)/stamp-cat-id: $(PACKAGE).pot\n++$(srcdir)/cat-id-tbl.c: $(srcdir)/stamp-cat-id; @:\n++$(srcdir)/stamp-cat-id: $(srcdir)/$(PACKAGE).pot\n+ \trm -f cat-id-tbl.tmp\n+ \tsed -f ../intl/po2tbl.sed $(srcdir)/$(PACKAGE).pot \\\n+ \t\t| sed -e \"s/@PACKAGE NAME@/$(PACKAGE)/\" > cat-id-tbl.tmp\n+@@ -180,7 +180,8 @@\n+ \n+ check: all\n+ \n+-cat-id-tbl.o: ../intl/libgettext.h\n++cat-id-tbl.o: $(srcdir)/cat-id-tbl.c $(top_srcdir)/intl/libgettext.h\n++\t$(COMPILE) $(srcdir)/cat-id-tbl.c\n+ \n+ dvi info tags TAGS ID:\n+ \n+@@ -196,7 +197,7 @@\n+ maintainer-clean: distclean\n+ \t@echo \"This command is intended for maintainers to use;\"\n+ \t@echo \"it deletes files that may require special tools to rebuild.\"\n+-\trm -f $(GMOFILES)\n++\trm -f $(GMOFILES) cat-id-tbl.c stamp-cat-id\n+ \n+ distdir = ../$(PACKAGE)-$(VERSION)/$(subdir)\n+ dist distdir: update-po $(DISTFILES)\n+@@ -207,7 +208,7 @@\n+ \tdone\n+ \n+ update-po: Makefile\n+-\t$(MAKE) $(PACKAGE).pot\n++\t$(MAKE) $(srcdir)/$(PACKAGE).pot\n+ \tPATH=`pwd`/../src:$$PATH; \\\n+ \tcd $(srcdir); \\\n+ \tcatalogs='$(CATALOGS)'; \\"}, {"sha": "93d553cba76407f4e169e134b8947178240176ef", "filename": "gcc/exgettext", "status": "added", "additions": 118, "deletions": 0, "changes": 118, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d70283ce50dc333f6b2e8650e2f85981d8c34a2f/gcc%2Fexgettext", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d70283ce50dc333f6b2e8650e2f85981d8c34a2f/gcc%2Fexgettext", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexgettext?ref=d70283ce50dc333f6b2e8650e2f85981d8c34a2f", "patch": "@@ -0,0 +1,118 @@\n+#! /bin/sh\n+# Wrapper around gettext for GCC sources.\n+# Copyright 1998 Free Software Foundation, Inc.\n+\n+# Written by Paul Eggert <eggert@twinsun.com>.\n+\n+# This file is part of GNU CC.\n+\n+# GNU CC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# GNU CC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with GNU CC; see the file COPYING.  If not, write to\n+# the Free Software Foundation, 59 Temple Place - Suite 330,\n+# Boston, MA 02111-1307, USA.\n+\n+# Set environment to default value, if not already set.\n+: ${AWK=awk}\n+\n+# The argument to this wrapper is the xgettext command to be executed.\n+# Extract the xgettext program name from the rest of the command.\n+xgettext=${1?}\n+shift\n+\n+# Save work if we're just wrapping a no-op.\n+case $xgettext in\n+:) exit;;\n+esac\n+\n+# Find the files to be scanned, and the directory to scan them from.\n+directory=.\n+files=\n+for i\n+do\n+  case $i in\n+  --directory=*)\n+    directory=`expr \" $i\" : ' --directory=\\(.*\\)'`;;\n+  --files-from=*)\n+    files_from=`expr \" $i\" : ' --files-from=\\(.*\\)'`\n+    files=`$AWK '/^[^#]/ { print }' $files_from`;;\n+  esac\n+done\n+\n+# Generate keyword options for xgettext,\n+# by scanning for declarations of functions\n+# whose parameter names end in \"msgid\".\n+generate_keyword_options='\n+  /^[A-Z_a-z].*\\(.*msgid[,)]/ {\n+\n+    paren_index = index($0, \"(\")\n+\n+    name = substr($0, 1, paren_index - 1)\n+    sub(/[^0-9A-Z_a-z]*$/, \"\", name)\n+    sub(/[\t ]+PARAMS/, \"\", name)\n+    sub(/[\t ]+VPROTO/, \"\", name)\n+    sub(/.*[^0-9A-Z_a-z]/, \"\", name)\n+\n+    args = substr($0, paren_index)\n+    sub(/msgid[,)].*/, \"\", args)\n+    for (n = 1; sub(/^[^,]*,/, \"\", args); n++) {\n+      continue;\n+    }\n+\n+    if (n == 1) {\n+      keyword = name\n+    } else {\n+      keyword = name \":\" n\n+    }\n+\n+    if (! keyword_seen[keyword]++) {\n+      print \"--keyword=\" keyword\n+    }\n+  }\n+'\n+keyword_options=`(\n+  cd $directory &&\n+  $AWK \"$generate_keyword_options\" $files < /dev/null\n+)` || exit\n+\n+# Generate temporary file reflecting the %e strings in the scanned files.\n+tmp=tmp-emsgids.c\n+\n+generate_emsgids='\n+  /%e.*}/ {\n+    line = $0\n+    while ((percent_index = index(line, \"%e\")) != 0) {\n+      line = substr(line, percent_index + 2)\n+      bracket_index = index(line, \"}\")\n+      if (bracket_index == 0) {\n+\tcontinue\n+      }\n+      msgid = substr(line, 1, bracket_index - 1)\n+      if (index(msgid, \"%\") != 0) {\n+        continue\n+      }\n+      printf \"#line %d \\\"%s\\\"\\n\", FNR, FILENAME\n+      printf \"_(\\\"%s\\\")\\n\", msgid\n+      line = substr(line, bracket_index + 1)\n+    }\n+  }\n+' \n+(cd $directory &&\n+ $AWK \"$generate_emsgids\" $files < /dev/null\n+) > $directory/$tmp || exit\n+\n+# Run the xgettext command, with temporary added as a file to scan.\n+\"$xgettext\" $keyword_options ${1+\"$@\"} $tmp || exit\n+\n+# Clean up.\n+# If we don't get here, `make clean' will remove this file later.\n+rm -f $directory/$tmp"}, {"sha": "67e8adbd86b40af296bf03bb5f21b8d96f9e3f81", "filename": "gcc/tmp-emsgids.c", "status": "added", "additions": 96, "deletions": 0, "changes": 96, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d70283ce50dc333f6b2e8650e2f85981d8c34a2f/gcc%2Ftmp-emsgids.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d70283ce50dc333f6b2e8650e2f85981d8c34a2f/gcc%2Ftmp-emsgids.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftmp-emsgids.c?ref=d70283ce50dc333f6b2e8650e2f85981d8c34a2f", "patch": "@@ -0,0 +1,96 @@\n+#line 59 \"config/arc/arc.h\"\n+_(\"may not use both -EB and -EL\")\n+#line 176 \"config/arm/arm.h\"\n+_(\"-mapcs-26 and -mapcs-32 may not be used together\")\n+#line 187 \"config/arm/arm.h\"\n+_(\"-msoft-float and -mhard_float may not be used together\")\n+#line 198 \"config/arm/arm.h\"\n+_(\"-mbig-endian and -mlittle-endian may not be used together\")\n+#line 72 \"config/arm/riscix.h\"\n+_(\"-mbsd and -pedantic incompatible\")\n+#line 73 \"config/arm/riscix.h\"\n+_(\"-mbsd and -mxopen incompatible\")\n+#line 74 \"config/arm/riscix.h\"\n+_(\"-mxopen and -pedantic incompatible\")\n+#line 133 \"config/arm/riscix.h\"\n+_(\"-mbsd and -pedantic incompatible\")\n+#line 134 \"config/arm/riscix.h\"\n+_(\"-mbsd and -mxopen incompatible\")\n+#line 135 \"config/arm/riscix.h\"\n+_(\"-mxopen and -pedantic incompatible\")\n+#line 126 \"config/dsp16xx/dsp16xx.h\"\n+_(\"A -ifile option requires a -map option\")\n+#line 135 \"config/dsp16xx/dsp16xx.h\"\n+_(\"A -ifile option requires a -map option\")\n+#line 809 \"config/i386/sco5.h\"\n+_(\"-static not valid with -mcoff\")\n+#line 810 \"config/i386/sco5.h\"\n+_(\"-shared not valid with -mcoff\")\n+#line 811 \"config/i386/sco5.h\"\n+_(\"-symbolic not valid with -mcoff\")\n+#line 847 \"config/i386/sco5.h\"\n+_(\"-fpic is not valid with -mcoff\")\n+#line 848 \"config/i386/sco5.h\"\n+_(\"-fPIC is not valid with -mcoff\")\n+#line 882 \"config/i386/sco5.h\"\n+_(\"-static not valid with -mcoff\")\n+#line 883 \"config/i386/sco5.h\"\n+_(\"-shared not valid with -mcoff\")\n+#line 884 \"config/i386/sco5.h\"\n+_(\"-symbolic not valid with -mcoff\")\n+#line 885 \"config/i386/sco5.h\"\n+_(\"-fpic not valid with -mcoff\")\n+#line 886 \"config/i386/sco5.h\"\n+_(\"-fPIC not valid with -mcoff\")\n+#line 305 \"config/i860/fx2800.h\"\n+_(\"-p option not supported: use -pg instead\")\n+#line 674 \"config/mips/mips.h\"\n+_(\"-pipe is not supported.\")\n+#line 811 \"config/mips/mips.h\"\n+_(\"may not use both -mfp64 and -msingle-float\")\n+#line 812 \"config/mips/mips.h\"\n+_(\"may not use both -mfp64 and -m4650\")\n+#line 815 \"config/mips/mips.h\"\n+_(\"may not use both -EB and -EL\")\n+#line 27 \"config/mips/r3900.h\"\n+_(\"-mhard-float not supported.\")\n+#line 29 \"config/mips/r3900.h\"\n+_(\"-msingle-float and -msoft-float can not both be specified.\")\n+#line 41 \"config/mips/r3900.h\"\n+_(\"-mhard-float not supported.\")\n+#line 43 \"config/mips/r3900.h\"\n+_(\"-msingle-float and -msoft-float can not both be specified.\")\n+#line 166 \"config/nextstep.h\"\n+_(\"-p profiling is no longer supported.  Use -pg instead.\")\n+#line 169 \"config/nextstep.h\"\n+_(\"-p profiling is no longer supported.  Use -pg instead.\")\n+#line 36 \"config/vax/vax.h\"\n+_(\"profiling not supported with -mg\\n\")\n+#line 37 \"config/vax/vax.h\"\n+_(\"profiling not supported with -mg\\n\")\n+#line 32 \"cp/lang-specs.h\"\n+_(\"GNU C++ does not support -C without using -E\")\n+#line 45 \"cp/lang-specs.h\"\n+_(\"-pg and -fomit-frame-pointer are incompatible\")\n+#line 56 \"cp/lang-specs.h\"\n+_(\"-pg and -fomit-frame-pointer are incompatible\")\n+#line 603 \"gcc.c\"\n+_(\"GNU C does not support -C without using -E\")\n+#line 617 \"gcc.c\"\n+_(\"-pg and -fomit-frame-pointer are incompatible\")\n+#line 624 \"gcc.c\"\n+_(\"GNU C does not support -C without using -E\")\n+#line 633 \"gcc.c\"\n+_(\"-E required when input is from standard input\")\n+#line 637 \"gcc.c\"\n+_(\"GNU C does not support -C without using -E\")\n+#line 652 \"gcc.c\"\n+_(\"-pg and -fomit-frame-pointer are incompatible\")\n+#line 659 \"gcc.c\"\n+_(\"Compilation of header file requested\")\n+#line 661 \"gcc.c\"\n+_(\"GNU C does not support -C without using -E\")\n+#line 676 \"gcc.c\"\n+_(\"-pg and -fomit-frame-pointer are incompatible\")\n+#line 689 \"gcc.c\"\n+_(\"GNU C does not support -C without using -E\")"}]}