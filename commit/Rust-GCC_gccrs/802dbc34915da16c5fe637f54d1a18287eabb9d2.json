{"sha": "802dbc34915da16c5fe637f54d1a18287eabb9d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODAyZGJjMzQ5MTVkYTE2YzVmZTYzN2Y1NGQxYTE4Mjg3ZWFiYjlkMg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1999-04-12T10:54:06Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-04-12T10:54:06Z"}, "message": "* pt.c (lookup_template_class): Look through implict typename.\n\nFrom-SVN: r26370", "tree": {"sha": "67a5e4c759c9487c2aaec6fd69f7fdeada5e766c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67a5e4c759c9487c2aaec6fd69f7fdeada5e766c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/802dbc34915da16c5fe637f54d1a18287eabb9d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/802dbc34915da16c5fe637f54d1a18287eabb9d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/802dbc34915da16c5fe637f54d1a18287eabb9d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/802dbc34915da16c5fe637f54d1a18287eabb9d2/comments", "author": null, "committer": null, "parents": [{"sha": "660c731419d11aad952688dd1a603e51c3095442", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/660c731419d11aad952688dd1a603e51c3095442", "html_url": "https://github.com/Rust-GCC/gccrs/commit/660c731419d11aad952688dd1a603e51c3095442"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "992aaa9daf7c9e383ad4440d6d7d60a1f4764d05", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/802dbc34915da16c5fe637f54d1a18287eabb9d2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/802dbc34915da16c5fe637f54d1a18287eabb9d2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=802dbc34915da16c5fe637f54d1a18287eabb9d2", "patch": "@@ -1,3 +1,7 @@\n+1999-04-12  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* pt.c (lookup_template_class): Look through implict typename.\n+\n 1999-04-11  Mark Mitchell  <mark@codesourcery.com>\n \n \t* friend.c (add_friend): Deal gracefully with error_mark_node."}, {"sha": "e8de776998099795ddad5f49c567f3f1e901ead4", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/802dbc34915da16c5fe637f54d1a18287eabb9d2/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/802dbc34915da16c5fe637f54d1a18287eabb9d2/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=802dbc34915da16c5fe637f54d1a18287eabb9d2", "patch": "@@ -3581,9 +3581,16 @@ lookup_template_class (d1, arglist, in_decl, context, entering_scope)\n     }\n   else if (TREE_CODE (d1) == TYPE_DECL && IS_AGGR_TYPE (TREE_TYPE (d1)))\n     {\n-      if (CLASSTYPE_TEMPLATE_INFO (TREE_TYPE (d1)))\n+      tree type = TREE_TYPE (d1);\n+\n+      /* If we are declaring a constructor, say A<T>::A<T>, we will get\n+\t an implicit typename for the second A.  Deal with it.  */\n+      if (TREE_CODE (type) == TYPENAME_TYPE && TREE_TYPE (type))\n+\ttype = TREE_TYPE (type);\n+\t\n+      if (CLASSTYPE_TEMPLATE_INFO (type))\n \t{\n-\t  template = CLASSTYPE_TI_TEMPLATE (TREE_TYPE (d1));\n+\t  template = CLASSTYPE_TI_TEMPLATE (type);\n \t  d1 = DECL_NAME (template);\n \t}\n     }"}]}