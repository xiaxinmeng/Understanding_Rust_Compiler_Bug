{"sha": "c86c54e6d12b84a346c77e7101c758c78555c1f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg2YzU0ZTZkMTJiODRhMzQ2Yzc3ZTcxMDFjNzU4Yzc4NTU1YzFmMw==", "commit": {"author": {"name": "John Carter", "email": "john.carter@tait.co.nz", "date": "2002-11-01T15:21:17Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2002-11-01T15:21:17Z"}, "message": "re PR libstdc++/7961 (compare( char *) implemented incorrectly.)\n\n2002-11-01  John Carter  <john.carter@tait.co.nz>\n\n\tPR libstdc++/7961\n\t* include/bits/basic_string.tcc\n\t(compare(const _CharT* __s)): Don't access __s past its length.\n\nFrom-SVN: r58717", "tree": {"sha": "e9db3d9ecc9aed3287139b8ed768e611f1fedca1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9db3d9ecc9aed3287139b8ed768e611f1fedca1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c86c54e6d12b84a346c77e7101c758c78555c1f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c86c54e6d12b84a346c77e7101c758c78555c1f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c86c54e6d12b84a346c77e7101c758c78555c1f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c86c54e6d12b84a346c77e7101c758c78555c1f3/comments", "author": null, "committer": null, "parents": [{"sha": "d5db54a12c1fec54208876b4137ab09851fe6565", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5db54a12c1fec54208876b4137ab09851fe6565", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5db54a12c1fec54208876b4137ab09851fe6565"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "734aa7f11ef62c37a4a2c72d4a1257c38a270c96", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c86c54e6d12b84a346c77e7101c758c78555c1f3/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c86c54e6d12b84a346c77e7101c758c78555c1f3/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c86c54e6d12b84a346c77e7101c758c78555c1f3", "patch": "@@ -1,3 +1,9 @@\n+2002-11-01  John Carter  <john.carter@tait.co.nz>\n+\n+\tPR libstdc++/7961\n+\t* include/bits/basic_string.tcc\n+\t(compare(const _CharT* __s)): Don't access __s past its length.\n+\n 2002-10-31  Benjamin Kosnik  <bkoz@redhat.com>\n \n \tPR libstdc++/8348"}, {"sha": "198f190eae891e754cae476846e995b1cd5caeff", "filename": "libstdc++-v3/include/bits/basic_string.tcc", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c86c54e6d12b84a346c77e7101c758c78555c1f3/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c86c54e6d12b84a346c77e7101c758c78555c1f3/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc?ref=c86c54e6d12b84a346c77e7101c758c78555c1f3", "patch": "@@ -884,9 +884,11 @@ namespace std\n     compare(const _CharT* __s) const\n     {\n       size_type __size = this->size();\n-      int __r = traits_type::compare(_M_data(), __s, __size);\n+      size_type __osize = traits_type::length(__s);\n+      size_type __len = min(__size, __osize);\n+      int __r = traits_type::compare(_M_data(), __s, __len);\n       if (!__r)\n-\t__r = __size - traits_type::length(__s);\n+\t__r = __size - __osize;\n       return __r;\n     }\n "}]}