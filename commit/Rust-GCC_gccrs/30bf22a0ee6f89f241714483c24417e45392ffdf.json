{"sha": "30bf22a0ee6f89f241714483c24417e45392ffdf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzBiZjIyYTBlZTZmODlmMjQxNzE0NDgzYzI0NDE3ZTQ1MzkyZmZkZg==", "commit": {"author": {"name": "Mike Stump", "email": "mrs@apple.com", "date": "2004-07-11T05:13:12Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "2004-07-11T05:13:12Z"}, "message": "decl2.c (import_export_class): Never export/import vtables with inline key functions.\n\n        * decl2.c (import_export_class): Never export/import vtables\n        with inline key functions.\n\nFrom-SVN: r84493", "tree": {"sha": "3b2399aa188627c9e88f1d6ad2c117774f3346c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b2399aa188627c9e88f1d6ad2c117774f3346c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30bf22a0ee6f89f241714483c24417e45392ffdf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30bf22a0ee6f89f241714483c24417e45392ffdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30bf22a0ee6f89f241714483c24417e45392ffdf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30bf22a0ee6f89f241714483c24417e45392ffdf/comments", "author": null, "committer": null, "parents": [{"sha": "8242b64a88f219d9c3fb49c30116712c10bc95b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8242b64a88f219d9c3fb49c30116712c10bc95b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8242b64a88f219d9c3fb49c30116712c10bc95b9"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "2639623445db61f01b237c9ba827d7ac79350388", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30bf22a0ee6f89f241714483c24417e45392ffdf/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30bf22a0ee6f89f241714483c24417e45392ffdf/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=30bf22a0ee6f89f241714483c24417e45392ffdf", "patch": "@@ -1,3 +1,8 @@\n+2004-07-10  Mike Stump  <mrs@apple.com>\n+\n+\t* decl2.c (import_export_class): Never export/import vtables\n+\twith inline key functions.\n+\n 2004-07-09  Steven Bosscher  <stevenb@suse.de>\n \n \t* typeck.c (c_expand_asm_operands): Remove."}, {"sha": "4465873c01806ab857a548ffacf192df64ac9dda", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30bf22a0ee6f89f241714483c24417e45392ffdf/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30bf22a0ee6f89f241714483c24417e45392ffdf/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=30bf22a0ee6f89f241714483c24417e45392ffdf", "patch": "@@ -1501,7 +1501,14 @@ import_export_class (tree ctype)\n       && TYPE_POLYMORPHIC_P (ctype))\n     {\n       tree method = CLASSTYPE_KEY_METHOD (ctype);\n-      if (method)\n+\n+      /* If weak symbol support is not available, then we must be\n+\t careful not to emit the vtable when the key function is\n+\t inline.  An inline function can be defined in multiple\n+\t translation units.  If we were to emit the vtable in each\n+\t translation unit containing a definition, we would get\n+\t multiple definition errors at link-time.  */\n+      if (method && (flag_weak || ! DECL_DECLARED_INLINE_P (method)))\n \timport_export = (DECL_REALLY_EXTERN (method) ? -1 : 1);\n     }\n "}]}