{"sha": "61cd123468adec0b7428057c2f043bff8ea24354", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjFjZDEyMzQ2OGFkZWMwYjc0MjgwNTdjMmYwNDNiZmY4ZWEyNDM1NA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1998-04-21T22:08:05Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-04-21T22:08:05Z"}, "message": "* decl2.c (grokfield): Remangle the name of a member TYPE_DECL.\n\nFrom-SVN: r19369", "tree": {"sha": "f17185b25101f1fd17454f7b408faa7cc2504d32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f17185b25101f1fd17454f7b408faa7cc2504d32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/61cd123468adec0b7428057c2f043bff8ea24354", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61cd123468adec0b7428057c2f043bff8ea24354", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61cd123468adec0b7428057c2f043bff8ea24354", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61cd123468adec0b7428057c2f043bff8ea24354/comments", "author": null, "committer": null, "parents": [{"sha": "1701f21e5231f328d532adb1709caf5fe7ae2717", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1701f21e5231f328d532adb1709caf5fe7ae2717", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1701f21e5231f328d532adb1709caf5fe7ae2717"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "9e690446789742edb487d3f8b5411e1c2be4fb42", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61cd123468adec0b7428057c2f043bff8ea24354/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61cd123468adec0b7428057c2f043bff8ea24354/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=61cd123468adec0b7428057c2f043bff8ea24354", "patch": "@@ -5,6 +5,8 @@ Tue Apr 21 22:00:04 1998  Mark Mitchell  <mmitchell@usa.net>\n \t* decl2.c (check_member_template): Set DECL_IGNORED for member\n \tclass templates, too.\n \n+\t* decl2.c (grokfield): Remangle the name of a member TYPE_DECL.\n+\n Tue Apr 21 18:59:11 1998  Benjamin Kosnik  <bkoz@rhino.cygnus.com>\n \n \t* decl.c (duplicate_decls): Only check DECL_FRIEND_P if function."}, {"sha": "52900c478c8697552fc4c09f5d2aaa64e5cabf99", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61cd123468adec0b7428057c2f043bff8ea24354/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61cd123468adec0b7428057c2f043bff8ea24354/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=61cd123468adec0b7428057c2f043bff8ea24354", "patch": "@@ -1579,6 +1579,12 @@ grokfield (declarator, declspecs, init, asmspec_tree, attrlist)\n       DECL_CLASS_CONTEXT (value) = current_class_type;\n       CLASSTYPE_LOCAL_TYPEDECLS (current_class_type) = 1;\n \n+      /* Now that we've updated the context, we need to remangle the\n+\t name for this TYPE_DECL.  */\n+      DECL_ASSEMBLER_NAME (value) = DECL_NAME (value);\n+      DECL_ASSEMBLER_NAME (value) =\n+\tget_identifier (build_overload_name (TREE_TYPE (value), 1, 1));\n+\n       pushdecl_class_level (value);\n       return value;\n     }"}, {"sha": "110e4814515559ab20d877eef6849849c5bd0712", "filename": "gcc/testsuite/g++.old-deja/g++.pt/typedef3.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61cd123468adec0b7428057c2f043bff8ea24354/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypedef3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61cd123468adec0b7428057c2f043bff8ea24354/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypedef3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypedef3.C?ref=61cd123468adec0b7428057c2f043bff8ea24354", "patch": "@@ -0,0 +1,25 @@\n+// Build don't link:\n+\n+template <class T>\n+void f(T, T)\n+{\n+}\n+\n+struct A {\n+  typedef enum {\n+    VAL1\n+  } result_t;\n+};\n+\n+struct B {\n+  typedef enum {\n+    VAL2\n+  } result_t;\n+};\n+\n+\n+void g()\n+{\n+  f(A::VAL1, A::VAL1);\n+  f(B::VAL2, B::VAL2);\n+}"}]}