{"sha": "ade7386a03439cde2997eb321da42f0f77c771f4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWRlNzM4NmEwMzQzOWNkZTI5OTdlYjMyMWRhNDJmMGY3N2M3NzFmNA==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@s-direktnet.de", "date": "1997-12-16T22:51:00Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-12-16T22:51:00Z"}, "message": "fixincludes (size_t): Add support for Motorola's stdlib.h which fails to provide a definition for size_t.\n\n        * fixincludes (size_t): Add support for Motorola's stdlib.h\n        which fails to provide a definition for size_t.\n        (fabs/hypot): Provide a prototype for fabs on m88k-motorola-sysv3.\n        (strlen,strspn,strcspn return value): Handle different layout on sysV88.\n        (hypot): Provide a fake for hypot for m88k-motorola-sysv3.\nFixes from Manfred.\n\nFrom-SVN: r17120", "tree": {"sha": "cc42e39d77a3a433ee763d6e9fe3505ecef60656", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc42e39d77a3a433ee763d6e9fe3505ecef60656"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ade7386a03439cde2997eb321da42f0f77c771f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ade7386a03439cde2997eb321da42f0f77c771f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ade7386a03439cde2997eb321da42f0f77c771f4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ade7386a03439cde2997eb321da42f0f77c771f4/comments", "author": null, "committer": null, "parents": [{"sha": "a24ebe1badf00553185c196c79f1e756e26a6a57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a24ebe1badf00553185c196c79f1e756e26a6a57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a24ebe1badf00553185c196c79f1e756e26a6a57"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "64ba2e69e0da5b41898c26499c787f132a0aa8f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ade7386a03439cde2997eb321da42f0f77c771f4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ade7386a03439cde2997eb321da42f0f77c771f4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ade7386a03439cde2997eb321da42f0f77c771f4", "patch": "@@ -1,5 +1,11 @@\n Tue Dec 16 23:44:54 1997  Manfred Hollstein  <manfred@s-direktnet.de>\n \n+\t* fixincludes (size_t): Add support for Motorola's stdlib.h\n+\twhich fails to provide a definition for size_t.\n+\t(fabs/hypot): Provide a prototype for fabs on m88k-motorola-sysv3.\n+\t(strlen,strspn,strcspn return value): Handle different layout on sysV88.\n+\t(hypot): Provide a fake for hypot for m88k-motorola-sysv3.\n+\n \t* m68k/xm-mot3300.h (ADD_MISSING_POSIX, ADD_MISSING_XOPEN): Define to\n \tprevent unresolved externals in libio.\n \t* m88k/xm-sysv3.h (ADD_MISSING_POSIX, ADD_MISSING_XOPEN): Likewise.\n@@ -121,7 +127,7 @@ Fri Oct 10 17:58:31 CEST 1997  Marc Lehmann <pcg@goof.com>\n \n Thu Dec 11 23:55:17 1997  Manfred Hollstein  <manfred@s-direktnet.de>\n \n-\t* fixincludes (str{len,spn,cspn} return value): Handle different\n+\t* fixincludes (strlen,strspn,strcspn return value): Handle different\n \tlayout on sysV88.\n \t(hypot): Provide a fake for hypot which is broken on \n \tm88k-motorola-sysv3."}, {"sha": "42d81b9161ca1e3490f7bcffb452039a14e82934", "filename": "gcc/fixincludes", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ade7386a03439cde2997eb321da42f0f77c771f4/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ade7386a03439cde2997eb321da42f0f77c771f4/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=ade7386a03439cde2997eb321da42f0f77c771f4", "patch": "@@ -366,6 +366,13 @@ for file in sys/types.h stdlib.h sys/stdtypes.h stddef.h memory.h unistd.h; do\n   if [ -r ${LIB}/$file ]; then\n     echo Fixing size_t, ptrdiff_t and wchar_t in $file\n     sed \\\n+      -e '/^[ \t]*\\*[ \t]*typedef unsigned int size_t;/N'\t\\\n+      -e 's/^\\([ \t]*\\*[ \t]*typedef unsigned int size_t;\\n[ \t]*\\*\\/\\)/\\1\\\n+#ifndef __SIZE_TYPE__\\\n+#define __SIZE_TYPE__ long unsigned int\\\n+#endif\\\n+typedef __SIZE_TYPE__ size_t;\\\n+/'\t\\\n       -e '/typedef[ \t][ \t]*[a-z_][ \ta-z_]*[ \t]size_t/i\\\n #ifndef __SIZE_TYPE__\\\n #define __SIZE_TYPE__ long unsigned int\\\n@@ -2300,6 +2307,8 @@ done\n # libm.a on m88k-motorola-sysv3 contains a stupid optimization for function\n # hypot(), which returns the second argument without even looking at its value\n # if the other is 0.0\n+# Another drawback is that fix-header doesn't fix fabs' prototype, and I have\n+#  no idea why.\n file=math.h\n if [ $target_canonical = m88k-motorola-sysv3 ]; then\n   if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n@@ -2309,8 +2318,10 @@ if [ $target_canonical = m88k-motorola-sysv3 ]; then\n   fi\n \n   if [ -r ${LIB}/$file ]; then\n-    echo Fixing $file, hypot definition\n-    sed -e '/^extern double hypot();$/a\\\n+    echo Fixing $file, fabs/hypot definition\n+    sed \\\n+      -e 's/extern double floor(), ceil(), fmod(), fabs();/extern double floor(), ceil(), fmod(), fabs _PARAMS((double));/' \\\n+      -e '/^extern double hypot();$/a\\\n \\/* Workaround a stupid Motorola optimization if one\\\n    of x or y is 0.0 and the other is negative!  *\\/\\\n #ifdef __STDC__\\"}]}