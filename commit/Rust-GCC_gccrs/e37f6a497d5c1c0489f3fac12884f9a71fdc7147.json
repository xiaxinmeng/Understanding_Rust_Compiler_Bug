{"sha": "e37f6a497d5c1c0489f3fac12884f9a71fdc7147", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM3ZjZhNDk3ZDVjMWMwNDg5ZjNmYWMxMjg4NGY5YTcxZmRjNzE0Nw==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb.gcc@gmail.com", "date": "2008-02-09T00:30:13Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2008-02-09T00:30:13Z"}, "message": "re PR middle-end/34627 (Incorrect branching with -Ox on hppa)\n\n\tPR middle-end/34627\n\tcombine.c (simplify_if_then_else): Make sure the comparison is\n\tagainst const0_rtx when simplifying to (abs x) or (neg (abs X)).\n\nFrom-SVN: r132193", "tree": {"sha": "19f4088dad593151e91dea9b14493ce23ab72dc5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19f4088dad593151e91dea9b14493ce23ab72dc5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e37f6a497d5c1c0489f3fac12884f9a71fdc7147", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e37f6a497d5c1c0489f3fac12884f9a71fdc7147", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e37f6a497d5c1c0489f3fac12884f9a71fdc7147", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e37f6a497d5c1c0489f3fac12884f9a71fdc7147/comments", "author": null, "committer": null, "parents": [{"sha": "264940793b5f32b0ec420857940f80b23e159e78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/264940793b5f32b0ec420857940f80b23e159e78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/264940793b5f32b0ec420857940f80b23e159e78"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "918ff4b802686aa133838261b39b0f0dbd856367", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37f6a497d5c1c0489f3fac12884f9a71fdc7147/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37f6a497d5c1c0489f3fac12884f9a71fdc7147/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e37f6a497d5c1c0489f3fac12884f9a71fdc7147", "patch": "@@ -1,3 +1,9 @@\n+2008-02-08  Steven Bosscher  <stevenb.gcc@gmail.com>\n+\n+\tPR middle-end/34627\n+\tcombine.c (simplify_if_then_else): Make sure the comparison is\n+\tagainst const0_rtx when simplifying to (abs x) or (neg (abs X)).\n+\n 2008-02-08  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \tPR bootstrap/35051"}, {"sha": "b812b33ac41da965ed9c346bd1cf7f6cbf2ade58", "filename": "gcc/combine.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37f6a497d5c1c0489f3fac12884f9a71fdc7147/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37f6a497d5c1c0489f3fac12884f9a71fdc7147/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=e37f6a497d5c1c0489f3fac12884f9a71fdc7147", "patch": "@@ -5393,9 +5393,10 @@ simplify_if_then_else (rtx x)\n   /* Look for cases where we have (abs x) or (neg (abs X)).  */\n \n   if (GET_MODE_CLASS (mode) == MODE_INT\n+      && comparison_p\n+      && XEXP (cond, 1) == const0_rtx\n       && GET_CODE (false_rtx) == NEG\n       && rtx_equal_p (true_rtx, XEXP (false_rtx, 0))\n-      && comparison_p\n       && rtx_equal_p (true_rtx, XEXP (cond, 0))\n       && ! side_effects_p (true_rtx))\n     switch (true_code)"}]}