{"sha": "ce5c2061b4af3befc13438b23dad9ad138783b98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U1YzIwNjFiNGFmM2JlZmMxMzQzOGIyM2RhZDlhZDEzODc4M2I5OA==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2012-03-30T09:26:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-03-30T09:26:59Z"}, "message": "lib-xref-alfa.adb, [...]: Minor addition of comments and refactoring.\n\n2012-03-30  Yannick Moy  <moy@adacore.com>\n\n\t* lib-xref-alfa.adb, alloc.ads, lib-xref.ads: Minor addition of\n\tcomments and refactoring.\n\nFrom-SVN: r186004", "tree": {"sha": "08b03c8da7ffae834919fb93cf630e4f4d626687", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08b03c8da7ffae834919fb93cf630e4f4d626687"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce5c2061b4af3befc13438b23dad9ad138783b98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce5c2061b4af3befc13438b23dad9ad138783b98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce5c2061b4af3befc13438b23dad9ad138783b98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce5c2061b4af3befc13438b23dad9ad138783b98/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5b0113d67139911a6d51c1232adce252821684eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b0113d67139911a6d51c1232adce252821684eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b0113d67139911a6d51c1232adce252821684eb"}], "stats": {"total": 61, "additions": 27, "deletions": 34}, "files": [{"sha": "9c0d4791c39a14922085e6a48de4d8c07e1162bb", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ce5c2061b4af3befc13438b23dad9ad138783b98", "patch": "@@ -1,3 +1,8 @@\n+2012-03-30  Yannick Moy  <moy@adacore.com>\n+\n+\t* lib-xref-alfa.adb, alloc.ads, lib-xref.ads: Minor addition of\n+\tcomments and refactoring.\n+\n 2012-03-30  Robert Dewar  <dewar@adacore.com>\n \n \t* lib-xref.adb, lib-xref-alfa.adb: Minor reformatting & code"}, {"sha": "18a2be62157f1873adde12e00b4b458067a5739d", "filename": "gcc/ada/alloc.ads", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2Falloc.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2Falloc.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Falloc.ads?ref=ce5c2061b4af3befc13438b23dad9ad138783b98", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2009, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -157,4 +157,7 @@ package Alloc is\n    Xrefs_Initial                    : constant := 5_000;   -- Cross-refs\n    Xrefs_Increment                  : constant := 300;\n \n+   Drefs_Initial                    : constant := 5;       -- Dereferences\n+   Drefs_Increment                  : constant := 1_000;\n+\n end Alloc;"}, {"sha": "e3ef7b005b916122215bf4df921609edfcfebd11", "filename": "gcc/ada/lib-xref-alfa.adb", "status": "modified", "additions": 12, "deletions": 30, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2Flib-xref-alfa.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2Flib-xref-alfa.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref-alfa.adb?ref=ce5c2061b4af3befc13438b23dad9ad138783b98", "patch": "@@ -73,15 +73,13 @@ package body Alfa is\n      Table_Component_Type => Xref_Entry,\n      Table_Index_Type     => Xref_Entry_Number,\n      Table_Low_Bound      => 1,\n-     Table_Initial        => Alloc.Xrefs_Initial,\n-     Table_Increment      => Alloc.Xrefs_Increment,\n+     Table_Initial        => Alloc.Drefs_Initial,\n+     Table_Increment      => Alloc.Drefs_Increment,\n      Table_Name           => \"Drefs\");\n    --  Table of cross-references for reads and writes through explicit\n    --  dereferences, that are output as reads/writes to the special variable\n    --  \"Heap\". These references are added to the regular references when\n    --  computing Alfa cross-references.\n-   --\n-   --  Why is Alloc.Xrefs_* used here ??? seems clearly wrong.\n \n    -----------------------\n    -- Local Subprograms --\n@@ -338,16 +336,17 @@ package body Alfa is\n \n       package Sorting is new GNAT.Heap_Sort_G (Move, Lt);\n \n-      --  Comment required for this package ???\n-      --  Why is an internal package used here at all ???\n+      --  Internal package to build a correspondance between entities and scope\n+      --  numbers used in Alfa cross references.\n \n       package Scopes is\n          No_Scope : constant Nat := 0;\n+\n          function Get_Scope_Num (N : Entity_Id) return Nat;\n-         --  Comment required ???\n+         --  Return the scope number associated to entity N\n \n          procedure Set_Scope_Num (N : Entity_Id; Num : Nat);\n-         --  Comment required ???\n+         --  Associate entity N to scope number Num\n       end Scopes;\n \n       ------------\n@@ -395,7 +394,8 @@ package body Alfa is\n       --  not suitable for local cross-references.\n \n       Nrefs_Add : constant Nat := Drefs.Last;\n-      --  Comment needed ???\n+      --  Number of additional references which correspond to dereferences in\n+      --  the source code.\n \n       Rnums : array (0 .. Nrefs + Nrefs_Add) of Nat;\n       --  This array contains numbers of references in the Xrefs table. This\n@@ -1150,18 +1150,8 @@ package body Alfa is\n       elsif Nkind (Lu) = N_Package_Body then\n          Traverse_Package_Body (Lu, Process, Inside_Stubs);\n \n-      --  ??? TBD\n-\n-      elsif Nkind (Lu) = N_Generic_Package_Declaration then\n-         null;\n-\n-      --  ??? TBD\n-\n-      elsif Nkind (Lu) in N_Generic_Instantiation then\n-         null;\n-\n       --  All other cases of compilation units (e.g. renamings), are not\n-      --  declarations.\n+      --  declarations, or else generic declarations which are ignored.\n \n       else\n          null;\n@@ -1200,11 +1190,6 @@ package body Alfa is\n             when N_Package_Declaration =>\n                Traverse_Package_Declaration (N, Process, Inside_Stubs);\n \n-            --  Generic package declaration ??? TBD\n-\n-            when N_Generic_Package_Declaration =>\n-               null;\n-\n             --  Package body\n \n             when N_Package_Body =>\n@@ -1231,11 +1216,6 @@ package body Alfa is\n             when N_Subprogram_Declaration =>\n                null;\n \n-            --  Generic subprogram declaration ??? TBD\n-\n-            when N_Generic_Subprogram_Declaration =>\n-               null;\n-\n             --  Subprogram body\n \n             when N_Subprogram_Body =>\n@@ -1322,6 +1302,8 @@ package body Alfa is\n                Traverse_Declarations_Or_Statements\n                  (Statements (N), Process, Inside_Stubs);\n \n+            --  Generic declarations are ignored\n+\n             when others =>\n                null;\n          end case;"}, {"sha": "7bdc1582b5e8dd059dee0fcb3b9a2bff50485d5d", "filename": "gcc/ada/lib-xref.ads", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2Flib-xref.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce5c2061b4af3befc13438b23dad9ad138783b98/gcc%2Fada%2Flib-xref.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref.ads?ref=ce5c2061b4af3befc13438b23dad9ad138783b98", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1998-2011, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1998-2012, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -605,10 +605,13 @@ package Lib.Xref is\n         (CU           : Node_Id;\n          Process      : Node_Processing;\n          Inside_Stubs : Boolean);\n-      --  This procedure is undocumented ???\n+      --  Call Process on all declarations in compilation unit CU. If\n+      --  Inside_Stubs is True, then the body of stubs is also traversed.\n+      --  Generic declarations are ignored.\n \n       procedure Traverse_All_Compilation_Units (Process : Node_Processing);\n-      --  Call Process on all declarations through all compilation units\n+      --  Call Process on all declarations through all compilation units.\n+      --  Generic declarations are ignored.\n \n       procedure Collect_Alfa (Sdep_Table : Unit_Ref_Table; Num_Sdep : Nat);\n       --  Collect Alfa information from library units (for files and scopes)"}]}