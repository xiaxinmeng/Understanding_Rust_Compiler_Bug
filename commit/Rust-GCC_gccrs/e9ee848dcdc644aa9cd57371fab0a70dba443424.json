{"sha": "e9ee848dcdc644aa9cd57371fab0a70dba443424", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTllZTg0OGRjZGM2NDRhYTljZDU3MzcxZmFiMGE3MGRiYTQ0MzQyNA==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-01-23T13:34:59Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-01-23T13:34:59Z"}, "message": "Remove wrong bail out in prune_topn_counter.\n\n\t* libgcov-driver.c (prune_topn_counter): Remove\n\tcheck for -1 as we only prune run-time counters\n\tthat do not generate an invalid state.", "tree": {"sha": "054a6d28532558ec671861d5ac58f020ef1de7d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/054a6d28532558ec671861d5ac58f020ef1de7d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9ee848dcdc644aa9cd57371fab0a70dba443424", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEE6I4wzqqylQBfXaRhTcGC3A+nN4UFAl4poQMACgkQTcGC3A+n\nN4X6nggAv47qe0V0yK5DTXuZLZrfnX8vWBwokA4ITLbhuG5Sm6SB6J6jNSKtNvmx\nA/d1B0b++1jNd/KXoJw+vr4LxOVyRiPIWrX0+vMUR5Y09Rv7wb+iLFESypHqOjLC\nMx123zHQvsb2wil2i1luoCVuwmygf6nBNvyvVIi7ddBXNfDXG/PAtKOlU4p3gKbo\nNyHoM8kQYp67vXP688MDf0+s3rsF5IUkHc3zQwRyfaPkxJ/Oz5iBaMjul5A0dF80\nM/ZI02yC0ORBcN7gxVv9cFYAhivibW4qLs03gyRaDw3MGYkapIs/KHwP007wa+sf\no8EnUePzFB6TjhpKZn/sOsAooZ+Sgw==\n=h+Pw\n-----END PGP SIGNATURE-----", "payload": "tree 054a6d28532558ec671861d5ac58f020ef1de7d1\nparent 14e5e74698b98f4cbe398cb989dfa27765cbca6e\nauthor Martin Liska <mliska@suse.cz> 1579786499 +0100\ncommitter Martin Liska <mliska@suse.cz> 1579786499 +0100\n\nRemove wrong bail out in prune_topn_counter.\n\n\t* libgcov-driver.c (prune_topn_counter): Remove\n\tcheck for -1 as we only prune run-time counters\n\tthat do not generate an invalid state.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9ee848dcdc644aa9cd57371fab0a70dba443424", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9ee848dcdc644aa9cd57371fab0a70dba443424", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9ee848dcdc644aa9cd57371fab0a70dba443424/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14e5e74698b98f4cbe398cb989dfa27765cbca6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14e5e74698b98f4cbe398cb989dfa27765cbca6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14e5e74698b98f4cbe398cb989dfa27765cbca6e"}], "stats": {"total": 21, "additions": 11, "deletions": 10}, "files": [{"sha": "bd8cc383804c10e18c5d21e1b9538b15c6f62130", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9ee848dcdc644aa9cd57371fab0a70dba443424/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9ee848dcdc644aa9cd57371fab0a70dba443424/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=e9ee848dcdc644aa9cd57371fab0a70dba443424", "patch": "@@ -1,3 +1,9 @@\n+2020-01-23  Martin Liska  <mliska@suse.cz>\n+\n+\t* libgcov-driver.c (prune_topn_counter): Remove\n+\tcheck for -1 as we only prune run-time counters\n+\tthat do not generate an invalid state.\n+\n 2020-01-22  Martin Liska  <mliska@suse.cz>\n \n \tPR tree-optimization/92924"}, {"sha": "fb320738e1e8652adae8330f5985ecbe077f3672", "filename": "libgcc/libgcov-driver.c", "status": "modified", "additions": 5, "deletions": 10, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9ee848dcdc644aa9cd57371fab0a70dba443424/libgcc%2Flibgcov-driver.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9ee848dcdc644aa9cd57371fab0a70dba443424/libgcc%2Flibgcov-driver.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-driver.c?ref=e9ee848dcdc644aa9cd57371fab0a70dba443424", "patch": "@@ -219,17 +219,12 @@ static struct gcov_fn_buffer *fn_buffer;\n static void\n prune_topn_counter (gcov_type *counters, gcov_type all)\n {\n-  if (counters[1] == -1)\n-    return;\n-\n   for (unsigned i = 0; i < GCOV_TOPN_VALUES; i++)\n-    {\n-      if (counters[2 * i + 1] < all)\n-\t{\n-\t  counters[2 * i] = 0;\n-\t  counters[2 * i + 1] = 0;\n-\t}\n-    }\n+    if (counters[2 * i + 1] < all)\n+      {\n+\tcounters[2 * i] = 0;\n+\tcounters[2 * i + 1] = 0;\n+      }\n }\n \n /* Prune counters so that they are ready to store or merge.  */"}]}