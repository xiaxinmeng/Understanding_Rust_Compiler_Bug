{"sha": "6cdd696f3e0d0e0243bf2362a74c691285caadd5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNkZDY5NmYzZTBkMGUwMjQzYmYyMzYyYTc0YzY5MTI4NWNhYWRkNQ==", "commit": {"author": {"name": "Mark Wielaard", "email": "mark@klomp.org", "date": "2018-07-10T22:44:30Z"}, "committer": {"name": "Mark Wielaard", "email": "mark@gcc.gnu.org", "date": "2018-07-10T22:44:30Z"}, "message": "PR debug/86459 - Fix -gsplit-dwarf -g3 gcc_assert\n\nThere was a typo in the output_macinfo_op gcc_assert.\nThe function is called dwarf_FORM, not dwarf_form.\nAdd the provided testcase from the bug to test -gsplit-dwarf -g3.\n\ngcc/ChangeLog:\n\n\tPR debug/86459\n\t* dwarf2out.c (output_macinfo_op): Fix dwarf_FORM typo in gcc_assert.\n\ngcc/testsuite/ChangeLog:\n\n\tPR debug/86459\n\t* gcc.dg/pr86459.c: New test.\n\nFrom-SVN: r262545", "tree": {"sha": "e77d84581ed63306b3897b59a463f902ed619a34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e77d84581ed63306b3897b59a463f902ed619a34"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6cdd696f3e0d0e0243bf2362a74c691285caadd5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cdd696f3e0d0e0243bf2362a74c691285caadd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cdd696f3e0d0e0243bf2362a74c691285caadd5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cdd696f3e0d0e0243bf2362a74c691285caadd5/comments", "author": null, "committer": null, "parents": [{"sha": "a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "a333a523b8e97fc0296742784e566ece4e214069", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6cdd696f3e0d0e0243bf2362a74c691285caadd5", "patch": "@@ -1,3 +1,8 @@\n+2018-07-10  Mark Wielaard  <mark@klomp.org>\n+\n+\tPR debug/86459\n+\t* dwarf2out.c (output_macinfo_op): Fix dwarf_FORM typo in gcc_assert.\n+\n 2018-07-10  Richard Biener  <rguenther@suse.de>\n \n \t* hash-map.h (hash_map::iterator::operator*): Return"}, {"sha": "4640a22e14acb2efd6292aa512479df1cbf9bc49", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=6cdd696f3e0d0e0243bf2362a74c691285caadd5", "patch": "@@ -28066,7 +28066,7 @@ output_macinfo_op (macinfo_entry *ref)\n       node = find_AT_string (ref->info);\n       gcc_assert (node\n \t\t  && (node->form == DW_FORM_strp\n-\t\t      || node->form == dwarf_form (DW_FORM_strx)));\n+\t\t      || node->form == dwarf_FORM (DW_FORM_strx)));\n       dw2_asm_output_data (1, ref->code,\n \t\t\t   ref->code == DW_MACRO_define_strp\n \t\t\t   ? \"Define macro strp\""}, {"sha": "fa1b01acadfb5cbd364080b599b9ddec4633ff61", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6cdd696f3e0d0e0243bf2362a74c691285caadd5", "patch": "@@ -1,3 +1,8 @@\n+2018-07-10  Mark Wielaard  <mark@klomp.org>\n+\n+\tPR debug/86459\n+\t* gcc.dg/pr86459.c: New test.\n+\n 2018-07-10  Martin Sebor  <msebor@redhat.com>\n \n \tPR testsuite/86461"}, {"sha": "7856a372dcc89519c773c25a67f62a30c63e7bca", "filename": "gcc/testsuite/gcc.dg/pr86459.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2Ftestsuite%2Fgcc.dg%2Fpr86459.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cdd696f3e0d0e0243bf2362a74c691285caadd5/gcc%2Ftestsuite%2Fgcc.dg%2Fpr86459.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr86459.c?ref=6cdd696f3e0d0e0243bf2362a74c691285caadd5", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-g -O2 -fno-var-tracking-assignments -gsplit-dwarf -g3\" } */\n+\n+/* Same as pr86064.c but compiled with -g3 it showed an issue in\n+   output_macinfo_op because of a typo in an assert.  */\n+\n+int a;\n+__attribute__((__cold__)) void b();\n+\n+void e(int *);\n+int f();\n+\n+void c() {\n+  int d;\n+  e(&d);\n+  a = d;\n+  if (f())\n+    b();\n+}"}]}