{"sha": "ff6bb9dde10ab665a35bb75527313cd9f7d52f8e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY2YmI5ZGRlMTBhYjY2NWEzNWJiNzU1MjczMTNjZDlmN2Q1MmY4ZQ==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.ibm.com", "date": "2021-08-27T14:55:29Z"}, "committer": {"name": "Bill Schmidt", "email": "wschmidt@linux.ibm.com", "date": "2021-08-27T15:58:20Z"}, "message": "rs6000: Execute the automatic built-in initialization code\n\n2021-08-27  Bill Schmidt  <wschmidt@linux.ibm.com>\n\ngcc/\n\t* config/rs6000/rs6000-call.c (rs6000-builtins.h): New #include.\n\t(rs6000_init_builtins): Call rs6000_init_generated_builtins.  Skip the\n\told initialization logic when new builtins are enabled.\n\t* config/rs6000/rs6000-gen-builtins.c (write_decls): Rename\n\trs6000_autoinit_builtins to rs6000_init_generated_builtins.\n\t(write_init_file): Likewise.", "tree": {"sha": "8d35168d4bb5414cbe4d3273bb094a5cbd5fe5c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8d35168d4bb5414cbe4d3273bb094a5cbd5fe5c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e/comments", "author": null, "committer": null, "parents": [{"sha": "9b025925eceaf207e3d0104cddace753ac6dabd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b025925eceaf207e3d0104cddace753ac6dabd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b025925eceaf207e3d0104cddace753ac6dabd5"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "87f97098ea4900fa9c9f854e18be3195d32399e9", "filename": "gcc/config/rs6000/rs6000-call.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-call.c?ref=ff6bb9dde10ab665a35bb75527313cd9f7d52f8e", "patch": "@@ -69,6 +69,7 @@\n #include \"opts.h\"\n \n #include \"rs6000-internal.h\"\n+#include \"rs6000-builtins.h\"\n \n #if TARGET_MACHO\n #include \"gstab.h\"  /* for N_SLINE */\n@@ -13647,6 +13648,17 @@ rs6000_init_builtins (void)\n     = build_pointer_type (build_qualified_type (void_type_node,\n \t\t\t\t\t\tTYPE_QUAL_CONST));\n \n+  /* Execute the autogenerated initialization code for builtins.  */\n+  rs6000_init_generated_builtins ();\n+\n+  if (new_builtins_are_live)\n+    {\n+#ifdef SUBTARGET_INIT_BUILTINS\n+      SUBTARGET_INIT_BUILTINS;\n+#endif\n+      return;\n+    }\n+\n   /* Create Altivec, VSX and MMA builtins on machines with at least the\n      general purpose extensions (970 and newer) to allow the use of\n      the target attribute.  */"}, {"sha": "f3d6156400ae05d800b1b92d067dfc7f3ab35b7f", "filename": "gcc/config/rs6000/rs6000-gen-builtins.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e/gcc%2Fconfig%2Frs6000%2Frs6000-gen-builtins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6bb9dde10ab665a35bb75527313cd9f7d52f8e/gcc%2Fconfig%2Frs6000%2Frs6000-gen-builtins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-gen-builtins.c?ref=ff6bb9dde10ab665a35bb75527313cd9f7d52f8e", "patch": "@@ -2312,7 +2312,7 @@ write_decls (void)\n \t   \"extern ovlddata rs6000_instance_info[RS6000_INST_MAX];\\n\");\n   fprintf (header_file, \"extern ovldrecord rs6000_overload_info[];\\n\\n\");\n \n-  fprintf (header_file, \"extern void rs6000_autoinit_builtins ();\\n\\n\");\n+  fprintf (header_file, \"extern void rs6000_init_generated_builtins ();\\n\\n\");\n   fprintf (header_file,\n \t   \"extern bool rs6000_new_builtin_is_supported_p \"\n \t   \"(rs6000_gen_builtins);\\n\");\n@@ -2794,7 +2794,7 @@ write_init_file (void)\n   fprintf (init_file, \"\\n\");\n \n   fprintf (init_file, \"void\\n\");\n-  fprintf (init_file, \"rs6000_autoinit_builtins ()\\n\");\n+  fprintf (init_file, \"rs6000_init_generated_builtins ()\\n\");\n   fprintf (init_file, \"{\\n\");\n   fprintf (init_file, \"  tree t;\\n\");\n   rbt_inorder_callback (&fntype_rbt, fntype_rbt.rbt_root, write_fntype_init);"}]}