{"sha": "dadf084c7d11bd965764c9346760e5439a2b987a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGFkZjA4NGM3ZDExYmQ5NjU3NjRjOTM0Njc2MGU1NDM5YTJiOTg3YQ==", "commit": {"author": {"name": "Jiong Wang", "email": "jiong.wang@arm.com", "date": "2014-06-10T14:38:15Z"}, "committer": {"name": "Marcus Shawcroft", "email": "mshawcroft@gcc.gnu.org", "date": "2014-06-10T14:38:15Z"}, "message": "[AArch64] Fix layout of frame layout code.\n\nFrom-SVN: r211416", "tree": {"sha": "77041e3e57219effbecc4644558bd91724911960", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77041e3e57219effbecc4644558bd91724911960"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dadf084c7d11bd965764c9346760e5439a2b987a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dadf084c7d11bd965764c9346760e5439a2b987a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dadf084c7d11bd965764c9346760e5439a2b987a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dadf084c7d11bd965764c9346760e5439a2b987a/comments", "author": null, "committer": null, "parents": [{"sha": "2a74759f9ed10c57b7fe38c5285adb6e77b3746e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a74759f9ed10c57b7fe38c5285adb6e77b3746e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a74759f9ed10c57b7fe38c5285adb6e77b3746e"}], "stats": {"total": 32, "additions": 18, "deletions": 14}, "files": [{"sha": "760cdae52379242aee2aa9af44bceb2e0f3afc77", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dadf084c7d11bd965764c9346760e5439a2b987a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dadf084c7d11bd965764c9346760e5439a2b987a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dadf084c7d11bd965764c9346760e5439a2b987a", "patch": "@@ -1,3 +1,8 @@\n+2014-06-10  Jiong Wang  <jiong.wang@arm.com>\n+\n+\t* config/aarch64/aarch64.c (aarch64_save_or_restore_fprs)\n+\t(aarch64_save_or_restore_callee_save_registers): Fix layout.\n+\n 2014-06-10  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/aarch64/aarch64-simd.md (aarch64_sqdmulh_lane<mode>):"}, {"sha": "f2968fff30b5e4768730d483c43f05982a96e2a2", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 13, "deletions": 14, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dadf084c7d11bd965764c9346760e5439a2b987a/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dadf084c7d11bd965764c9346760e5439a2b987a/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=dadf084c7d11bd965764c9346760e5439a2b987a", "patch": "@@ -1917,7 +1917,6 @@ aarch64_save_or_restore_fprs (int start_offset, int increment,\n   rtx (*gen_mem_ref)(enum machine_mode, rtx)\n     = (frame_pointer_needed)? gen_frame_mem : gen_rtx_MEM;\n \n-\n   for (regno = V0_REGNUM; regno <= V31_REGNUM; regno++)\n     {\n       if (aarch64_register_saved_on_entry (regno))\n@@ -1935,10 +1934,12 @@ aarch64_save_or_restore_fprs (int start_offset, int increment,\n \t    {\n \t      /* Empty loop.  */\n \t    }\n+\n \t  if (regno2 <= V31_REGNUM &&\n \t      aarch64_register_saved_on_entry (regno2))\n \t    {\n \t      rtx mem2;\n+\n \t      /* Next highest register to be saved.  */\n \t      mem2 = gen_mem_ref (DFmode,\n \t\t\t\t  plus_constant\n@@ -1964,10 +1965,10 @@ aarch64_save_or_restore_fprs (int start_offset, int increment,\n \t\t\t\tgen_rtx_REG (DFmode, regno2));\n \t\t}\n \n-\t\t  /* The first part of a frame-related parallel insn\n-\t\t     is always assumed to be relevant to the frame\n-\t\t     calculations; subsequent parts, are only\n-\t\t     frame-related if explicitly marked.  */\n+\t      /* The first part of a frame-related parallel insn is\n+\t\t always assumed to be relevant to the frame\n+\t\t calculations; subsequent parts, are only\n+\t\t frame-related if explicitly marked.  */\n \t      RTX_FRAME_RELATED_P (XVECEXP (PATTERN (insn), 0, 1)) = 1;\n \t      regno = regno2;\n \t      start_offset += increment * 2;\n@@ -1987,15 +1988,14 @@ aarch64_save_or_restore_fprs (int start_offset, int increment,\n \t  RTX_FRAME_RELATED_P (insn) = 1;\n \t}\n     }\n-\n }\n \n \n /* offset from the stack pointer of where the saves and\n    restore's have to happen.  */\n static void\n aarch64_save_or_restore_callee_save_registers (HOST_WIDE_INT offset,\n-\t\t\t\t\t    bool restore)\n+\t\t\t\t\t       bool restore)\n {\n   rtx insn;\n   rtx base_rtx = stack_pointer_rtx;\n@@ -2027,6 +2027,7 @@ aarch64_save_or_restore_callee_save_registers (HOST_WIDE_INT offset,\n \t      aarch64_register_saved_on_entry (regno2))\n \t    {\n \t      rtx mem2;\n+\n \t      /* Next highest register to be saved.  */\n \t      mem2 = gen_mem_ref (Pmode,\n \t\t\t\t  plus_constant\n@@ -2050,12 +2051,11 @@ aarch64_save_or_restore_callee_save_registers (HOST_WIDE_INT offset,\n \t\t  add_reg_note (insn, REG_CFA_RESTORE, gen_rtx_REG (DImode, regno2));\n \t\t}\n \n-\t\t  /* The first part of a frame-related parallel insn\n-\t\t     is always assumed to be relevant to the frame\n-\t\t     calculations; subsequent parts, are only\n-\t\t     frame-related if explicitly marked.  */\n-\t      RTX_FRAME_RELATED_P (XVECEXP (PATTERN (insn), 0,\n-\t\t\t\t\t    1)) = 1;\n+\t      /* The first part of a frame-related parallel insn is\n+\t\t always assumed to be relevant to the frame\n+\t\t calculations; subsequent parts, are only\n+\t\t frame-related if explicitly marked.  */\n+\t      RTX_FRAME_RELATED_P (XVECEXP (PATTERN (insn), 0, 1)) = 1;\n \t      regno = regno2;\n \t      start_offset += increment * 2;\n \t    }\n@@ -2075,7 +2075,6 @@ aarch64_save_or_restore_callee_save_registers (HOST_WIDE_INT offset,\n     }\n \n   aarch64_save_or_restore_fprs (start_offset, increment, restore, base_rtx);\n-\n }\n \n /* AArch64 stack frames generated by this compiler look like:"}]}