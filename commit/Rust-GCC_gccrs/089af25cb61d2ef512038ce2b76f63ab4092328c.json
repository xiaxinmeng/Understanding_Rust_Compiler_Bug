{"sha": "089af25cb61d2ef512038ce2b76f63ab4092328c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDg5YWYyNWNiNjFkMmVmNTEyMDM4Y2UyYjc2ZjYzYWI0MDkyMzI4Yw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-09-01T00:50:54Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-09-01T00:50:54Z"}, "message": "C: Fix missing spaces in 'struct' fix-it hints\n\nIn r237714 I added fix-it hints to the C frontend for missing \"struct\"\nkeywords e.g.:\n\nspellcheck-typenames.c:69:1: error: unknown type name \u2018foo_t\u2019; use\n\u2018struct\u2019 keyword to refer to the type\n foo_t *foo_ptr;\n ^~~~~\n struct \n\nHowever when using the (not yet in trunk) option\n -fdiagnostics-generate-patch,\nthe generated patch is nonsensical:\n\n  -foo_t *foo_ptr;\n  +structfoo_t *foo_ptr;\n\nFix the fix-its by adding a trailing space to each one, giving:\n\n  -foo_t *foo_ptr;\n  +struct foo_t *foo_ptr;\n\ngcc/c/ChangeLog:\n\t* c-parser.c (c_parser_declaration_or_fndef): Add trailing space\n\tto the insertion fixits for \"struct\", \"union\", and \"enum\".\n\nFrom-SVN: r239912", "tree": {"sha": "beb58f7bd4e805570f23f4411287d644452667ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/beb58f7bd4e805570f23f4411287d644452667ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/089af25cb61d2ef512038ce2b76f63ab4092328c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/089af25cb61d2ef512038ce2b76f63ab4092328c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/089af25cb61d2ef512038ce2b76f63ab4092328c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/089af25cb61d2ef512038ce2b76f63ab4092328c/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "76e6cb83159730524cf336a1461b5f6fdd0cab54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76e6cb83159730524cf336a1461b5f6fdd0cab54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76e6cb83159730524cf336a1461b5f6fdd0cab54"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "3ac6648b45a2f6c4b599b9e72fd5e89eb41cd4a0", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/089af25cb61d2ef512038ce2b76f63ab4092328c/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/089af25cb61d2ef512038ce2b76f63ab4092328c/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=089af25cb61d2ef512038ce2b76f63ab4092328c", "patch": "@@ -1,3 +1,8 @@\n+2016-08-31  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* c-parser.c (c_parser_declaration_or_fndef): Add trailing space\n+\tto the insertion fixits for \"struct\", \"union\", and \"enum\".\n+\n 2016-08-30  David Malcolm  <dmalcolm@redhat.com>\n \n \t* c-decl.c (implicit_decl_warning): Use add_fixit_replace"}, {"sha": "0581899e307dd782cd1d6c45c0a8a050f9928f4b", "filename": "gcc/c/c-parser.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/089af25cb61d2ef512038ce2b76f63ab4092328c/gcc%2Fc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/089af25cb61d2ef512038ce2b76f63ab4092328c/gcc%2Fc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-parser.c?ref=089af25cb61d2ef512038ce2b76f63ab4092328c", "patch": "@@ -1685,23 +1685,23 @@ c_parser_declaration_or_fndef (c_parser *parser, bool fndef_ok,\n       if (tag_exists_p (RECORD_TYPE, name))\n \t{\n \t  /* This is not C++ with its implicit typedef.  */\n-\t  richloc.add_fixit_insert (\"struct\");\n+\t  richloc.add_fixit_insert (\"struct \");\n \t  error_at_rich_loc (&richloc,\n \t\t\t     \"unknown type name %qE;\"\n \t\t\t     \" use %<struct%> keyword to refer to the type\",\n \t\t\t     name);\n \t}\n       else if (tag_exists_p (UNION_TYPE, name))\n \t{\n-\t  richloc.add_fixit_insert (\"union\");\n+\t  richloc.add_fixit_insert (\"union \");\n \t  error_at_rich_loc (&richloc,\n \t\t\t     \"unknown type name %qE;\"\n \t\t\t     \" use %<union%> keyword to refer to the type\",\n \t\t\t     name);\n \t}\n       else if (tag_exists_p (ENUMERAL_TYPE, name))\n \t{\n-\t  richloc.add_fixit_insert (\"enum\");\n+\t  richloc.add_fixit_insert (\"enum \");\n \t  error_at_rich_loc (&richloc,\n \t\t\t     \"unknown type name %qE;\"\n \t\t\t     \" use %<enum%> keyword to refer to the type\","}]}