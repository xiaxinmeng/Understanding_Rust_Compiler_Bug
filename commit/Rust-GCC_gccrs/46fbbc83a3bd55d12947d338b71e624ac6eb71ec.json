{"sha": "46fbbc83a3bd55d12947d338b71e624ac6eb71ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZmYmJjODNhM2JkNTVkMTI5NDdkMzM4YjcxZTYyNGFjNmViNzFlYw==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2008-08-06T09:42:31Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-06T09:42:31Z"}, "message": "Makefile.in, [...]: Remove obsolete targets referencing gen-soccon When generating s-oscons.ads...\n\n2008-08-06  Thomas Quinot  <quinot@adacore.com>\n\n\t* gcc-interface/Makefile.in, gcc-interface/Make-lang.in:\n\tRemove obsolete targets referencing gen-soccon\n\tWhen generating s-oscons.ads, use a file name that includes the\n\tTHREAD_KIND, to ensure that the (potentially different) version from a\n\tprevious build with a different threads flavour does not get reused.\n\nFrom-SVN: r138787", "tree": {"sha": "e6d0bf0acc9659bb83670e30112a3bc832d884e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6d0bf0acc9659bb83670e30112a3bc832d884e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46fbbc83a3bd55d12947d338b71e624ac6eb71ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46fbbc83a3bd55d12947d338b71e624ac6eb71ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46fbbc83a3bd55d12947d338b71e624ac6eb71ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46fbbc83a3bd55d12947d338b71e624ac6eb71ec/comments", "author": null, "committer": null, "parents": [{"sha": "c6aecf3bee303042c654da91ea56a36766c16ebf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6aecf3bee303042c654da91ea56a36766c16ebf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6aecf3bee303042c654da91ea56a36766c16ebf"}], "stats": {"total": 26, "additions": 5, "deletions": 21}, "files": [{"sha": "0fa4d87f2b352278d8c9f94eafcd916249a2c326", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 4, "deletions": 15, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46fbbc83a3bd55d12947d338b71e624ac6eb71ec/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46fbbc83a3bd55d12947d338b71e624ac6eb71ec/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=46fbbc83a3bd55d12947d338b71e624ac6eb71ec", "patch": "@@ -309,17 +309,6 @@ gnatbind$(exeext): ada/b_gnatb.o $(CONFIG_H) $(GNATBIND_OBJS)\n gnat-cross: force\n \tmake $(GNAT1_ADA_OBJS) CC=\"gcc -B../stage1/\" CFLAGS=\"-S -gnatp\" \\\n \t\t$(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) HOST_CFLAGS= HOST_CC=cc\n-\n-gen-soccon: force\n-\t$(MAKE) -C ada $(FLAGS_TO_PASS)  \\\n-\t   GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n-\t   GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n-\t   TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n-\t   THREAD_KIND=\"$(THREAD_KIND)\" \\\n-\t   TRACE=\"$(TRACE)\" \\\n-\t   LIBGNAT_OBJS=gen-soccon \\\n-\t   gnatlib\n-\n \f\n # Build hooks:\n \n@@ -951,17 +940,17 @@ OSCONS_CPP=../../../xgcc -B../../../ -E -C \\\n OSCONS_EXTRACT=../../../xgcc -S -B../../../ s-oscons-tmplt.i\n endif\n \n-ada/s-oscons.ads : ada/s-oscons-tmplt.c ada/gsocket.h ada/xoscons.adb ada/xutil.ads ada/xutil.adb\n+ada/s-oscons-$(THREAD_KIND).ads : ada/s-oscons-tmplt.c ada/gsocket.h ada/xoscons.adb ada/xutil.ads ada/xutil.adb\n \t-$(MKDIR) ada/bldtools/oscons\n \t$(RM) $(addprefix ada/bldtools/oscons/,$(notdir $^))\n \t$(CP) $^ ada/bldtools/oscons\n-\t(cd ada/bldtools/oscons; gnatmake -q xoscons ; \\\n+\t(cd ada/bldtools/oscons ; gnatmake -q xoscons ; \\\n \t\t$(RM) s-oscons-tmplt.i s-oscons-tmplt.s ; \\\n \t\t$(OSCONS_CPP) ; \\\n \t\t$(OSCONS_EXTRACT) ; \\\n \t\t./xoscons ; \\\n-\t\t$(RM) ../../s-oscons.ads ; \\\n-\t\t$(CP) s-oscons.ads ../../s-oscons.ads)\n+\t\t$(RM) ../../s-oscons-$(THREAD_KIND).ads ; \\\n+\t\t$(CP) s-oscons.ads ../../s-oscons-$(THREAD_KIND).ads)\n \n update-sources : ada/treeprs.ads ada/einfo.h ada/sinfo.h ada/nmake.adb \\\n \tada/nmake.ads"}, {"sha": "913add5451bc89f99942eeb0206a41a5184e3f99", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46fbbc83a3bd55d12947d338b71e624ac6eb71ec/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46fbbc83a3bd55d12947d338b71e624ac6eb71ec/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=46fbbc83a3bd55d12947d338b71e624ac6eb71ec", "patch": "@@ -1966,7 +1966,7 @@ install-gnatlib: ../stamp-gnatlib-$(RTSDIR)\n \t                $(RTSDIR)/$(word 1,$(subst <, ,$(PAIR)));)\n # Copy generated target dependent sources\n \t$(RM) $(RTSDIR)/s-oscons.ads\n-\t(cd $(RTSDIR); $(LN_S) ../s-oscons.ads s-oscons.ads)\n+\t(cd $(RTSDIR); $(LN_S) ../s-oscons-$(THREAD_KIND).ads s-oscons.ads)\n \t$(RM) ../stamp-gnatlib-$(RTSDIR)\n \ttouch ../stamp-gnatlib1-$(RTSDIR)\n \n@@ -2286,11 +2286,6 @@ raise-gcc.o : raise-gcc.c raise.h\n raise.o   : raise.c raise.h\n vx_stack_info.o : vx_stack_info.c\n \n-gen-soccon: gen-soccon.c gsocket.h\n-\t$(CC) $(ALL_CFLAGS) $(ADA_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n-\t\t-UIN_GCC -DTARGET=\\\"$(target_alias)\\\" \\\n-\t\t$< $(OUTPUT_OPTION)\n-\n cio.o     : cio.c\n \t$(CC) -c $(ALL_CFLAGS) $(ADA_CFLAGS) \\\n \t\t $(ALL_CPPFLAGS) $(INCLUDES) $< $(OUTPUT_OPTION)"}]}