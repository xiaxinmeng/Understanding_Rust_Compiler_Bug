{"sha": "d4c0c9f6352d49c09f436670b2e9821469a15c1d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRjMGM5ZjYzNTJkNDljMDlmNDM2NjcwYjJlOTgyMTQ2OWExNWMxZA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-06-04T11:00:09Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-06-04T11:00:09Z"}, "message": "re PR lto/41584 (WHOPR doesn't grok empty units)\n\n2010-06-04  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/41584\n\t* cgraph.h (struct varpool_node): Add lto_file_data field.\n\t* lto-cgraph.c (input_varpool_node): Initialize it.\n\n\tlto/\n\t* lto.c (lto_1_to_1_map): Use the proper file_data for\n\tvarpool nodes.\n\nFrom-SVN: r160258", "tree": {"sha": "bf17c26958a31c8d281981f79bbbeb418d5ca820", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bf17c26958a31c8d281981f79bbbeb418d5ca820"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4c0c9f6352d49c09f436670b2e9821469a15c1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4c0c9f6352d49c09f436670b2e9821469a15c1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4c0c9f6352d49c09f436670b2e9821469a15c1d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4c0c9f6352d49c09f436670b2e9821469a15c1d/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "addcce0450edc8fa3b448d25728658a7b8df1052", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/addcce0450edc8fa3b448d25728658a7b8df1052", "html_url": "https://github.com/Rust-GCC/gccrs/commit/addcce0450edc8fa3b448d25728658a7b8df1052"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "8ad6bf66ce950f93f0f0f642b9516c48be213003", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d4c0c9f6352d49c09f436670b2e9821469a15c1d", "patch": "@@ -1,3 +1,9 @@\n+2010-06-04  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/41584\n+\t* cgraph.h (struct varpool_node): Add lto_file_data field.\n+\t* lto-cgraph.c (input_varpool_node): Initialize it.\n+\n 2010-06-04  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/predicates.md (pic_symbolic_operand): Remove predicate."}, {"sha": "48a6c3f2e9a5a2d45375984caeaf9b3078639f67", "filename": "gcc/cgraph.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=d4c0c9f6352d49c09f436670b2e9821469a15c1d", "patch": "@@ -466,6 +466,8 @@ struct GTY((chain_next (\"%h.next\"), chain_prev (\"%h.prev\"))) varpool_node {\n   /* Circular list of nodes in the same comdat group if non-NULL.  */\n   struct varpool_node *same_comdat_group;\n   struct ipa_ref_list ref_list;\n+  /* File stream where this node is being written to.  */\n+  struct lto_file_decl_data * lto_file_data;\n   PTR GTY ((skip)) aux;\n   /* Ordering of all cgraph nodes.  */\n   int order;"}, {"sha": "079593271ed36e9ddf74c61d0fbc5530dab1d441", "filename": "gcc/lto-cgraph.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Flto-cgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Flto-cgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-cgraph.c?ref=d4c0c9f6352d49c09f436670b2e9821469a15c1d", "patch": "@@ -1089,6 +1089,7 @@ input_varpool_node (struct lto_file_decl_data *file_data,\n   decl_index = lto_input_uleb128 (ib);\n   var_decl = lto_file_decl_data_get_var_decl (file_data, decl_index);\n   node = varpool_node (var_decl);\n+  node->lto_file_data = file_data;\n \n   bp = lto_input_bitpack (ib);\n   node->externally_visible = bp_unpack_value (bp, 1);"}, {"sha": "f7f2703badd807bf02c843f37d4675bb609cbd71", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=d4c0c9f6352d49c09f436670b2e9821469a15c1d", "patch": "@@ -1,3 +1,9 @@\n+2010-06-04  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/41584\n+\t* lto.c (lto_1_to_1_map): Use the proper file_data for\n+\tvarpool nodes.\n+\n 2010-05-30  Jan Hubicka  <jh@suse.cz>\n \n \t* lto.c (promote_var, promote_fn, lto_wpa_write_files): Dump"}, {"sha": "fd474b68486304c0db41a19df7452f4440c148e8", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4c0c9f6352d49c09f436670b2e9821469a15c1d/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=d4c0c9f6352d49c09f436670b2e9821469a15c1d", "patch": "@@ -599,6 +599,7 @@ lto_1_to_1_map (void)\n     {\n       if (vnode->alias || !vnode->needed)\n \tcontinue;\n+      file_data = vnode->lto_file_data;\n       slot = pointer_map_contains (pmap, file_data);\n       if (slot)\n \tpartition = (ltrans_partition) *slot;"}]}