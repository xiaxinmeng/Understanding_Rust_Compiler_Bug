{"sha": "48acf1b78b128d2cace0705d159db7e2791756cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhhY2YxYjc4YjEyOGQyY2FjZTA3MDVkMTU5ZGI3ZTI3OTE3NTZjZg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-09-27T08:53:08Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-09-27T08:53:08Z"}, "message": "re PR tree-optimization/50363 (internal compiler error: verify_gimple failed)\n\n2011-09-27  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/50363\n\t* tree-ssa-pre.c (create_expression_by_pieces): Handle\n\tpointer conversions in POINTER_PLUS_EXPRs properly.\n\n\t* gcc.dg/torture/pr50363.c: New testcase.\n\nFrom-SVN: r179247", "tree": {"sha": "9119cbca0e6b9b1947798c5560d4da7cae77f886", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9119cbca0e6b9b1947798c5560d4da7cae77f886"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48acf1b78b128d2cace0705d159db7e2791756cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48acf1b78b128d2cace0705d159db7e2791756cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48acf1b78b128d2cace0705d159db7e2791756cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48acf1b78b128d2cace0705d159db7e2791756cf/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ddfd2edf327e1866603b825cc1c1d6a3d3cf48f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddfd2edf327e1866603b825cc1c1d6a3d3cf48f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ddfd2edf327e1866603b825cc1c1d6a3d3cf48f4"}], "stats": {"total": 35, "additions": 30, "deletions": 5}, "files": [{"sha": "57d5bfddb53b02d0924c1ea52162bb89b90aebe3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=48acf1b78b128d2cace0705d159db7e2791756cf", "patch": "@@ -1,3 +1,9 @@\n+2011-09-27  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/50363\n+\t* tree-ssa-pre.c (create_expression_by_pieces): Handle\n+\tpointer conversions in POINTER_PLUS_EXPRs properly.\n+\n 2011-09-27  Richard Sandiford  <richard.sandiford@linaro.org>\n \n \t* config/arm/neon.md (neon_vget_highv16qi, neon_vget_highv8hi)"}, {"sha": "b1e8477c03476526ef8f5df008f9cf70d718e949", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=48acf1b78b128d2cace0705d159db7e2791756cf", "patch": "@@ -1,3 +1,8 @@\n+2011-09-27  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/50363\n+\t* gcc.dg/torture/pr50363.c: New testcase.\n+\n 2011-09-26  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/45012"}, {"sha": "eb350198a437dda7c0306964f92267c6c4f50ff3", "filename": "gcc/testsuite/gcc.dg/torture/pr50363.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr50363.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr50363.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr50363.c?ref=48acf1b78b128d2cace0705d159db7e2791756cf", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-tree-ch -fno-tree-fre\" } */\n+\n+void\n+foo (int *__restrict__ * r, int n)\n+{\n+  int *p;\n+  for (p = *r; p < *r + n; p++)\n+    ;\n+}"}, {"sha": "5c112c080a6444f3e22cdfb122e09956e840b990", "filename": "gcc/tree-ssa-pre.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2Ftree-ssa-pre.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48acf1b78b128d2cace0705d159db7e2791756cf/gcc%2Ftree-ssa-pre.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-pre.c?ref=48acf1b78b128d2cace0705d159db7e2791756cf", "patch": "@@ -3085,11 +3085,15 @@ create_expression_by_pieces (basic_block block, pre_expr expr,\n \t\t\t\t\t\t    stmts, domstmt);\n \t    if (!genop[i])\n \t      return NULL_TREE;\n-\t    /* Ensure genop[1] is a ptrofftype for POINTER_PLUS_EXPR.  It\n-\t       may be a constant with the wrong type.  */\n-\t    if (i == 1\n-\t\t&& nary->opcode == POINTER_PLUS_EXPR)\n-\t      genop[i] = convert_to_ptrofftype (genop[i]);\n+\t    /* Ensure genop[] is properly typed for POINTER_PLUS_EXPR.  It\n+\t       may have conversions stripped.  */\n+\t    if (nary->opcode == POINTER_PLUS_EXPR)\n+\t      {\n+\t\tif (i == 0)\n+\t\t  genop[i] = fold_convert (nary->type, genop[i]);\n+\t\telse if (i == 1)\n+\t\t  genop[i] = convert_to_ptrofftype (genop[i]);\n+\t      }\n \t    else\n \t      genop[i] = fold_convert (TREE_TYPE (nary->op[i]), genop[i]);\n \t  }"}]}