{"sha": "473b1e05c3232ef6b131a83c828519fd536f7dee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDczYjFlMDVjMzIzMmVmNmIxMzFhODNjODI4NTE5ZmQ1MzZmN2RlZQ==", "commit": {"author": {"name": "Xinliang David Li", "email": "davidxl@google.com", "date": "2013-04-23T00:14:38Z"}, "committer": {"name": "Xinliang David Li", "email": "davidxl@gcc.gnu.org", "date": "2013-04-23T00:14:38Z"}, "message": "Display profile info in graph cfg dump\n\nFrom-SVN: r198165", "tree": {"sha": "00b5311d556f69bf0037a3017b1849686bfd3d1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00b5311d556f69bf0037a3017b1849686bfd3d1d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/473b1e05c3232ef6b131a83c828519fd536f7dee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/473b1e05c3232ef6b131a83c828519fd536f7dee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/473b1e05c3232ef6b131a83c828519fd536f7dee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/473b1e05c3232ef6b131a83c828519fd536f7dee/comments", "author": {"login": "vns-mn", "id": 57157229, "node_id": "MDQ6VXNlcjU3MTU3MjI5", "avatar_url": "https://avatars.githubusercontent.com/u/57157229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vns-mn", "html_url": "https://github.com/vns-mn", "followers_url": "https://api.github.com/users/vns-mn/followers", "following_url": "https://api.github.com/users/vns-mn/following{/other_user}", "gists_url": "https://api.github.com/users/vns-mn/gists{/gist_id}", "starred_url": "https://api.github.com/users/vns-mn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vns-mn/subscriptions", "organizations_url": "https://api.github.com/users/vns-mn/orgs", "repos_url": "https://api.github.com/users/vns-mn/repos", "events_url": "https://api.github.com/users/vns-mn/events{/privacy}", "received_events_url": "https://api.github.com/users/vns-mn/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b1485a33a3422fb8a2022d59660509cd9a3ea717", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1485a33a3422fb8a2022d59660509cd9a3ea717", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1485a33a3422fb8a2022d59660509cd9a3ea717"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "3ea7fa7654f16dc9645440a101ca40d7ce511fe3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=473b1e05c3232ef6b131a83c828519fd536f7dee", "patch": "@@ -1,3 +1,9 @@\n+2013-04-22  Xinliang David Li  <davidxl@google.com>\n+\n+\t* graph.c (draw_cfg_node_succ_edges): Add branch probility as label.\n+\t* cfghhooks.c (dump_bb_for_graph): Dump profile count and frquency.\n+\t* Makefile.in: New dependency\n+\n 2013-04-22  Catherine Moore  <clm@codesourcery.com>\n             David Daney <ddaney.cavm@gmail.com>\n "}, {"sha": "e265730ec937ab7c75bc782c89d055bc6266eefa", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=473b1e05c3232ef6b131a83c828519fd536f7dee", "patch": "@@ -3123,7 +3123,7 @@ cfg.o : cfg.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(DUMPFILE_H) \\\n    $(GGC_H) $(OBSTACK_H) alloc-pool.h $(HASH_TABLE_H) $(CFGLOOP_H) $(TREE_H) \\\n    $(BASIC_BLOCK_H)\n cfghooks.o: cfghooks.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(RTL_H) \\\n-   $(TREE_H) $(BASIC_BLOCK_H) $(TREE_FLOW_H) $(TIMEVAR_H) toplev.h $(DIAGNOSTIC_CORE_H) $(CFGLOOP_H)\n+   $(TREE_H) $(BASIC_BLOCK_H) $(TREE_FLOW_H) $(TIMEVAR_H) toplev.h $(DIAGNOSTIC_CORE_H) $(CFGLOOP_H) $(PRETTY_PRINT_H)\n cfgexpand.o : cfgexpand.c $(TREE_FLOW_H) $(CONFIG_H) $(SYSTEM_H) \\\n    $(RTL_H) $(TREE_H) $(TM_P_H) $(EXPR_H) $(FUNCTION_H) $(TM_H) \\\n    coretypes.h $(EXCEPT_H) langhooks.h $(TREE_PASS_H) $(RTL_H) \\"}, {"sha": "6832aabff9e2d7780a64a532d1efceeb8a140522", "filename": "gcc/cfghooks.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2Fcfghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2Fcfghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfghooks.c?ref=473b1e05c3232ef6b131a83c828519fd536f7dee", "patch": "@@ -30,6 +30,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"timevar.h\"\n #include \"diagnostic-core.h\"\n #include \"cfgloop.h\"\n+#include \"pretty-print.h\"\n \n /* A pointer to one of the hooks containers.  */\n static struct cfg_hooks *cfg_hooks;\n@@ -308,6 +309,10 @@ dump_bb_for_graph (pretty_printer *pp, basic_block bb)\n   if (!cfg_hooks->dump_bb_for_graph)\n     internal_error (\"%s does not support dump_bb_for_graph\",\n \t\t    cfg_hooks->name);\n+  if (bb->count)\n+    pp_printf (pp, \"COUNT:\" HOST_WIDEST_INT_PRINT_DEC, bb->count);\n+  pp_printf (pp, \" FREQ:%i |\", bb->frequency);\n+  pp_write_text_to_stream (pp);\n   cfg_hooks->dump_bb_for_graph (pp, bb);\n }\n "}, {"sha": "6aebb22afff1e90f355623920d502101b8d11b20", "filename": "gcc/graph.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2Fgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/473b1e05c3232ef6b131a83c828519fd536f7dee/gcc%2Fgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraph.c?ref=473b1e05c3232ef6b131a83c828519fd536f7dee", "patch": "@@ -155,11 +155,12 @@ draw_cfg_node_succ_edges (pretty_printer *pp, int funcdef_no, basic_block bb)\n \n       pp_printf (pp,\n \t\t \"\\tfn_%d_basic_block_%d:s -> fn_%d_basic_block_%d:n \"\n-\t\t \"[style=%s,color=%s,weight=%d,constraint=%s];\\n\",\n+\t\t \"[style=%s,color=%s,weight=%d,constraint=%s, label=\\\"[%i%%]\\\"];\\n\",\n \t\t funcdef_no, e->src->index,\n \t\t funcdef_no, e->dest->index,\n \t\t style, color, weight,\n-\t\t (e->flags & (EDGE_FAKE | EDGE_DFS_BACK)) ? \"false\" : \"true\");\n+\t\t (e->flags & (EDGE_FAKE | EDGE_DFS_BACK)) ? \"false\" : \"true\",\n+\t\t e->probability * 100 / REG_BR_PROB_BASE);\n     }\n   pp_flush (pp);\n }"}]}