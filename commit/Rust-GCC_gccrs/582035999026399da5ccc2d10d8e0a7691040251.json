{"sha": "582035999026399da5ccc2d10d8e0a7691040251", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTgyMDM1OTk5MDI2Mzk5ZGE1Y2NjMmQxMGQ4ZTBhNzY5MTA0MDI1MQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2005-02-17T23:50:02Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2005-02-17T23:50:02Z"}, "message": "re PR tree-optimization/18947 ([non-UAAT] external inline and normal function of the same name)\n\n\tPR tree-optimization/18947\n\t* cgraphunit.c (cgraph_finalize_function): When redefining an extern\n\tinline, remove all nodes that are inlined into the extern inline\n\tbeing redefined.\n\n\t* gcc.c-torture/compile/20050215-1.c: New test.\n\t* gcc.c-torture/compile/20050215-2.c: New test.\n\t* gcc.c-torture/compile/20050215-3.c: New test.\n\nFrom-SVN: r95207", "tree": {"sha": "c8d718fc6dcc552bb2e503ca60d1d787e1f0197b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8d718fc6dcc552bb2e503ca60d1d787e1f0197b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/582035999026399da5ccc2d10d8e0a7691040251", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/582035999026399da5ccc2d10d8e0a7691040251", "html_url": "https://github.com/Rust-GCC/gccrs/commit/582035999026399da5ccc2d10d8e0a7691040251", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/582035999026399da5ccc2d10d8e0a7691040251/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c8d3e15a95f73a50e02c226b52bd9e9c5060120e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8d3e15a95f73a50e02c226b52bd9e9c5060120e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8d3e15a95f73a50e02c226b52bd9e9c5060120e"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "610d47ac393f5aa49fe1318ee13e74e8dfa370db", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/582035999026399da5ccc2d10d8e0a7691040251/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/582035999026399da5ccc2d10d8e0a7691040251/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=582035999026399da5ccc2d10d8e0a7691040251", "patch": "@@ -1,3 +1,10 @@\n+2005-02-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/18947\n+\t* cgraphunit.c (cgraph_finalize_function): When redefining an extern\n+\tinline, remove all nodes that are inlined into the extern inline\n+\tbeing redefined.\n+\n 2005-02-17  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* bt-load.c, cfgloop.c, convert.c, dominance.c, global.c,"}, {"sha": "b9931602e0386cee9233aab6b07369bd9afad837", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=582035999026399da5ccc2d10d8e0a7691040251", "patch": "@@ -346,6 +346,16 @@ cgraph_finalize_function (tree decl, bool nested)\n       memset (&node->rtl, 0, sizeof (node->rtl));\n       node->analyzed = false;\n       node->local.redefined_extern_inline = true;\n+\n+      if (!flag_unit_at_a_time)\n+\t{\n+\t  struct cgraph_node *n;\n+\n+\t  for (n = cgraph_nodes; n; n = n->next)\n+\t    if (n->global.inlined_to == node)\n+\t      cgraph_remove_node (n);\n+\t}\n+\n       while (node->callees)\n \tcgraph_remove_edge (node->callees);\n "}, {"sha": "ccfd4ef6929469d9653371cf6c4e548e2a3b9122", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=582035999026399da5ccc2d10d8e0a7691040251", "patch": "@@ -1,3 +1,10 @@\n+2005-02-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/18947\n+\t* gcc.c-torture/compile/20050215-1.c: New test.\n+\t* gcc.c-torture/compile/20050215-2.c: New test.\n+\t* gcc.c-torture/compile/20050215-3.c: New test.\n+\n 2005-02-17  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR c++/20028"}, {"sha": "e9717797a10d4c6cb4ab16f10ddfb335b07c51e8", "filename": "gcc/testsuite/gcc.c-torture/compile/20050215-1.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-1.c?ref=582035999026399da5ccc2d10d8e0a7691040251", "patch": "@@ -0,0 +1,4 @@\n+/* PR tree-optimization/18947 */\n+extern __inline void f1 (void) { }\n+extern __inline void f2 (void) { f1 (); }\n+void f2 (void) {}"}, {"sha": "44550d04ce7dfa1210133f0b93f6031a32c98e44", "filename": "gcc/testsuite/gcc.c-torture/compile/20050215-2.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-2.c?ref=582035999026399da5ccc2d10d8e0a7691040251", "patch": "@@ -0,0 +1,7 @@\n+/* PR tree-optimization/18947 */\n+int v;\n+extern __inline void f1 (void) { v++; }\n+void f4 (void) { f1 (); }\n+extern __inline void f2 (void) { f1 (); }\n+void f3 (void) { f2 (); }\n+void f2 (void) { f1 (); }"}, {"sha": "7a35eb6d0c179f8062afea45a0a9332bd26bf0aa", "filename": "gcc/testsuite/gcc.c-torture/compile/20050215-3.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/582035999026399da5ccc2d10d8e0a7691040251/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20050215-3.c?ref=582035999026399da5ccc2d10d8e0a7691040251", "patch": "@@ -0,0 +1,8 @@\n+/* PR tree-optimization/18947 */\n+int v;\n+extern __inline void f0 (void) { v++; }\n+extern __inline void f1 (void) { f0 (); }\n+void f4 (void) { f1 (); }\n+extern __inline void f2 (void) { f1 (); }\n+void f3 (void) { f2 (); }\n+void f2 (void) { f1 (); }"}]}