{"sha": "38081436e5f140e391668f265e0b0705983187d4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzgwODE0MzZlNWYxNDBlMzkxNjY4ZjI2NWUwYjA3MDU5ODMxODdkNA==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2018-01-12T15:57:40Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2018-01-12T15:57:40Z"}, "message": "Guard against incomplete AVX512F support in Solaris as\n\n\t* lib/target-supports.exp (check_effective_target_avx512f): Also\n\tcheck for __builtin_ia32_addsd_round,\n\t__builtin_ia32_getmantsd_round.\n\t* gcc.target/i386/i386.exp (check_effective_target_avx512f):\n\tRemove.\n\nFrom-SVN: r256588", "tree": {"sha": "ab16584b81fb90fcc675386f38ef2491015c0f7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab16584b81fb90fcc675386f38ef2491015c0f7b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38081436e5f140e391668f265e0b0705983187d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38081436e5f140e391668f265e0b0705983187d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38081436e5f140e391668f265e0b0705983187d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38081436e5f140e391668f265e0b0705983187d4/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c0a465457beb663430257375ba529af74b0e4e56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0a465457beb663430257375ba529af74b0e4e56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0a465457beb663430257375ba529af74b0e4e56"}], "stats": {"total": 31, "additions": 19, "deletions": 12}, "files": [{"sha": "e9617740193ab00546b19d2f5920332c41f09ce9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38081436e5f140e391668f265e0b0705983187d4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38081436e5f140e391668f265e0b0705983187d4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=38081436e5f140e391668f265e0b0705983187d4", "patch": "@@ -1,3 +1,11 @@\n+2018-01-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* lib/target-supports.exp (check_effective_target_avx512f): Also\n+\tcheck for __builtin_ia32_addsd_round,\n+\t__builtin_ia32_getmantsd_round.\n+\t* gcc.target/i386/i386.exp (check_effective_target_avx512f):\n+\tRemove.\n+\n 2018-01-12  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \tPR target/83629"}, {"sha": "57e23a91676c59ee6ccd6951f002fadc923e4a1a", "filename": "gcc/testsuite/gcc.target/i386/i386.exp", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38081436e5f140e391668f265e0b0705983187d4/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fi386.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38081436e5f140e391668f265e0b0705983187d4/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fi386.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fi386.exp?ref=38081436e5f140e391668f265e0b0705983187d4", "patch": "@@ -230,18 +230,6 @@ proc check_effective_target_rtm { } {\n     } \"-mrtm\" ]\n }\n \n-# Return 1 if avx512f instructions can be compiled.\n-proc check_effective_target_avx512f { } {\n-    return [check_no_compiler_messages avx512f object {\n-\ttypedef long long __v8di __attribute__ ((__vector_size__ (64)));\n-\t__v8di\n-\tmm512_and_epi64  (__v8di __X, __v8di __Y)\n-\t{\n-            return __builtin_ia32_pandq512_mask (__X, __Y, __X, -1);\n-\t}\n-    } \"-mavx512f\" ]\n-}\n-\n # Return 1 if avx512vl instructions can be compiled.\n proc check_effective_target_avx512vl { } {\n     return [check_no_compiler_messages avx512vl object {"}, {"sha": "8ad34357685bf10bdcf19aab9accd99dffc92325", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38081436e5f140e391668f265e0b0705983187d4/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38081436e5f140e391668f265e0b0705983187d4/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=38081436e5f140e391668f265e0b0705983187d4", "patch": "@@ -7918,11 +7918,22 @@ proc check_prefer_avx128 { } {\n proc check_effective_target_avx512f { } {\n     return [check_no_compiler_messages avx512f object {\n \ttypedef double __m512d __attribute__ ((__vector_size__ (64)));\n+\ttypedef double __m128d __attribute__ ((__vector_size__ (16)));\n \n \t__m512d _mm512_add (__m512d a)\n \t{\n \t  return __builtin_ia32_addpd512_mask (a, a, a, 1, 4);\n \t}\n+\n+\t__m128d _mm128_add (__m128d a)\n+\t{\n+\t  return __builtin_ia32_addsd_round (a, a, 8);\n+\t}\n+\n+\t__m128d _mm128_getmant (__m128d a)\n+\t{\n+\t  return __builtin_ia32_getmantsd_round (a, a, 0, 8);\n+\t}\n     } \"-O2 -mavx512f\" ]\n }\n "}]}