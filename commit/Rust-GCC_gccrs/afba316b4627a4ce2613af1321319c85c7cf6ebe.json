{"sha": "afba316b4627a4ce2613af1321319c85c7cf6ebe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZiYTMxNmI0NjI3YTRjZTI2MTNhZjEzMjEzMTljODVjN2NmNmViZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2012-09-04T19:35:02Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2012-09-04T19:35:02Z"}, "message": "re PR c++/54198 (\"error: invalid use of incomplete type\" when building Chromium)\n\n\tPR c++/54198\n\t* decl.c (check_default_argument): Set cp_unevaluated_operand\n\taround call to perform_implicit_conversion_flags.\n\nFrom-SVN: r190949", "tree": {"sha": "e73fbab07bf2629e125cd71f85977259ffc29c4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e73fbab07bf2629e125cd71f85977259ffc29c4e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afba316b4627a4ce2613af1321319c85c7cf6ebe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afba316b4627a4ce2613af1321319c85c7cf6ebe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afba316b4627a4ce2613af1321319c85c7cf6ebe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afba316b4627a4ce2613af1321319c85c7cf6ebe/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "427b8bb8d72906eb1d4f631cea84e82c4e091247", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/427b8bb8d72906eb1d4f631cea84e82c4e091247", "html_url": "https://github.com/Rust-GCC/gccrs/commit/427b8bb8d72906eb1d4f631cea84e82c4e091247"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "9148bbe07719e03370fb38f5acb3c42dc47526e6", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=afba316b4627a4ce2613af1321319c85c7cf6ebe", "patch": "@@ -1,5 +1,9 @@\n 2012-09-04  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/54198\n+\t* decl.c (check_default_argument): Set cp_unevaluated_operand\n+\taround call to perform_implicit_conversion_flags.\n+\n \tPR c++/54437\n \tPR c++/51213\n \t* pt.c (fn_type_unification): Call coerce_template_parms before"}, {"sha": "8024373f09b9bc33758ecd290a6bbbb5c586eafc", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=afba316b4627a4ce2613af1321319c85c7cf6ebe", "patch": "@@ -10575,8 +10575,10 @@ check_default_argument (tree decl, tree arg)\n \n      A default argument expression is implicitly converted to the\n      parameter type.  */\n+  ++cp_unevaluated_operand;\n   perform_implicit_conversion_flags (decl_type, arg, tf_warning_or_error,\n \t\t\t\t     LOOKUP_NORMAL);\n+  --cp_unevaluated_operand;\n \n   if (warn_zero_as_null_pointer_constant\n       && c_inhibit_evaluation_warnings == 0"}, {"sha": "0082a9c877119b3aac5eb27b61bc37e72acc113b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=afba316b4627a4ce2613af1321319c85c7cf6ebe", "patch": "@@ -1,5 +1,8 @@\n 2012-09-04  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/54198\n+\t* g++.dg/template/defarg15.C: New.\n+\n \tPR c++/54437\n \t* g++.dg/template/access24.C: New.\n "}, {"sha": "fea3deee71c966442ab8200422370f6a011e7855", "filename": "gcc/testsuite/g++.dg/template/defarg15.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdefarg15.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afba316b4627a4ce2613af1321319c85c7cf6ebe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdefarg15.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdefarg15.C?ref=afba316b4627a4ce2613af1321319c85c7cf6ebe", "patch": "@@ -0,0 +1,19 @@\n+// PR c++/54198\n+\n+template <typename T> void\n+refIfNotNull (T* p1)\n+{\n+    p1->ref;\n+}\n+template <typename T> struct A\n+{\n+    A (T* p1)\n+    {\n+        refIfNotNull (p1);\n+    }\n+};\n+class B;\n+class C\n+{\n+    void getParent (A <B> = 0);\n+};"}]}