{"sha": "95040e7e207dc0a2024c2ed10b8b15de4b369ece", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUwNDBlN2UyMDdkYzBhMjAyNGMyZWQxMGI4YjE1ZGU0YjM2OWVjZQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-11T17:59:09Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-11T17:59:09Z"}, "message": "re PR fortran/91715 (ICE in resolve_fntype, at fortran/resolve.c:16884)\n\n2019-10-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91715\n\t* decl.c (gfc_match_prefix): If matching a type-spec returns an error,\n\tit's an error so re-act correctly.\n\n2019-10-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91715\n\t* gfortran.dg/function_kinds_5.f90: Prune run-on error.\n\t* gfortran.dg/pr85543.f90: Ditto.\n\t* gfortran.dg/pr91715.f90: New test.\n\nFrom-SVN: r276899", "tree": {"sha": "8f70733c486c7065e27036658477ec7d39e849f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f70733c486c7065e27036658477ec7d39e849f5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95040e7e207dc0a2024c2ed10b8b15de4b369ece", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95040e7e207dc0a2024c2ed10b8b15de4b369ece", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95040e7e207dc0a2024c2ed10b8b15de4b369ece", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95040e7e207dc0a2024c2ed10b8b15de4b369ece/comments", "author": null, "committer": null, "parents": [{"sha": "405e87e8259b6e70bdf31544bb0e5d147e6f301a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/405e87e8259b6e70bdf31544bb0e5d147e6f301a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/405e87e8259b6e70bdf31544bb0e5d147e6f301a"}], "stats": {"total": 36, "additions": 30, "deletions": 6}, "files": [{"sha": "7819bd4001afeb5cce3c26e98a2246f1d6978b64", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=95040e7e207dc0a2024c2ed10b8b15de4b369ece", "patch": "@@ -1,3 +1,9 @@\n+2019-10-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91715\n+\t* decl.c (gfc_match_prefix): If matching a type-spec returns an error,\n+\tit's an error so re-act correctly.\n+\n 2019-10-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/92018"}, {"sha": "9cda824ac0598d180dfa3e18fea692404859f5f5", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=95040e7e207dc0a2024c2ed10b8b15de4b369ece", "patch": "@@ -6202,13 +6202,17 @@ gfc_match_prefix (gfc_typespec *ts)\n \t  found_prefix = true;\n \t}\n \n-      if (!seen_type && ts != NULL\n-\t  && gfc_match_decl_type_spec (ts, 0) == MATCH_YES\n-\t  && gfc_match_space () == MATCH_YES)\n+      if (!seen_type && ts != NULL)\n \t{\n-\n-\t  seen_type = true;\n-\t  found_prefix = true;\n+\t  match m;\n+\t  m = gfc_match_decl_type_spec (ts, 0);\n+\t  if (m == MATCH_ERROR)\n+\t    goto error;\n+\t  if (m == MATCH_YES && gfc_match_space () == MATCH_YES)\n+\t    {\n+\t      seen_type = true;\n+\t      found_prefix = true;\n+\t    }\n \t}\n \n       if (gfc_match (\"elemental% \") == MATCH_YES)"}, {"sha": "b11a1bf7d7dcda426a13a954ea24c95cdd4b339b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=95040e7e207dc0a2024c2ed10b8b15de4b369ece", "patch": "@@ -1,3 +1,10 @@\n+2019-10-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91715\n+\t* gfortran.dg/function_kinds_5.f90: Prune run-on error.\n+\t* gfortran.dg/pr85543.f90: Ditto.\n+\t* gfortran.dg/pr91715.f90: New test.\n+\n 2019-10-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/92018"}, {"sha": "106431fe206c9b72a1758bfa4b580bdd3cf634d6", "filename": "gcc/testsuite/gfortran.dg/function_kinds_5.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunction_kinds_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunction_kinds_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunction_kinds_5.f90?ref=95040e7e207dc0a2024c2ed10b8b15de4b369ece", "patch": "@@ -8,3 +8,4 @@\n real (bad_kind(0d0)) function foo () ! { dg-error \"must be an intrinsic function\" }\n   foo = real (kind (foo))\n end function\n+! { dg-prune-output \"Bad kind expression for function\" }"}, {"sha": "b0faa8d59276e22cdac33195f023e55ec6abfd3d", "filename": "gcc/testsuite/gfortran.dg/pr85543.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr85543.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr85543.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr85543.f90?ref=95040e7e207dc0a2024c2ed10b8b15de4b369ece", "patch": "@@ -6,3 +6,4 @@ program p\n    real(z()) function f()  ! { dg-error \"in initialization expression at\" }\n    end\n end\n+! { dg-prune-output \"Bad kind expression for function\" }"}, {"sha": "a3d9b8d1d9a2f7ed3914962777b894c801af85ec", "filename": "gcc/testsuite/gfortran.dg/pr91715.f90", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91715.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95040e7e207dc0a2024c2ed10b8b15de4b369ece/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91715.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91715.f90?ref=95040e7e207dc0a2024c2ed10b8b15de4b369ece", "patch": "@@ -0,0 +1,5 @@\n+! { dg-do compile }\n+! PR fortran/91715\n+! Code contributed Gerhard Steinmetz\n+character(1function f()  ! { dg-error \"Syntax error in CHARACTER\" }\n+end"}]}