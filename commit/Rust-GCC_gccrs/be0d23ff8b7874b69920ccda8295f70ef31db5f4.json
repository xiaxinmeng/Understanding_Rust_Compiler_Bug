{"sha": "be0d23ff8b7874b69920ccda8295f70ef31db5f4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmUwZDIzZmY4Yjc4NzRiNjk5MjBjY2RhODI5NWY3MGVmMzFkYjVmNA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-06-10T08:29:36Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-06-10T08:29:36Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r1184", "tree": {"sha": "333a931b07f2315f118e4b40d753493279efecf4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/333a931b07f2315f118e4b40d753493279efecf4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be0d23ff8b7874b69920ccda8295f70ef31db5f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be0d23ff8b7874b69920ccda8295f70ef31db5f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be0d23ff8b7874b69920ccda8295f70ef31db5f4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be0d23ff8b7874b69920ccda8295f70ef31db5f4/comments", "author": null, "committer": null, "parents": [{"sha": "b076a285a49898add7a3549c16b1bba2bb875060", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b076a285a49898add7a3549c16b1bba2bb875060", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b076a285a49898add7a3549c16b1bba2bb875060"}], "stats": {"total": 33, "additions": 17, "deletions": 16}, "files": [{"sha": "d478a0512eddddc99cfcc514166071fa959ae73a", "filename": "gcc/Makefile.in", "status": "modified", "additions": 17, "deletions": 16, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be0d23ff8b7874b69920ccda8295f70ef31db5f4/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be0d23ff8b7874b69920ccda8295f70ef31db5f4/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=be0d23ff8b7874b69920ccda8295f70ef31db5f4", "patch": "@@ -25,9 +25,6 @@\n # Suppress smart makes who think they know how to automake Yacc files\n .y.c:\n \n-.NOEXPORT: # This tells GNU Make version 3\n-\t   # not to put all the variables in the environment.\n-\n # Variables that exist for you to override.\n # See below for how to change them for certain systems.\n \n@@ -262,6 +259,9 @@ INSTALL_TARGET=install-native\n # or `all.cross' (for cross compilers).\n all: all.indirect\n \n+# This tells GNU Make version 3 not to put all variables in the environment.\n+.NOEXPORT:\n+\n # sed inserts variable overrides after the following line.\n ####\n \f\n@@ -493,7 +493,7 @@ float.h: enquire\n enquire: enquire.o $(GCC_PARTS)\n \t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(ENQUIRE_LDFLAGS) enquire.o -o $@\n enquire.o: $(srcdir)/enquire.c $(GCC_PASSES)\n-\t-if [ \"$(srcdir)\" != \".\" ]; then rm -f enquire.c; else true; fi\n+\t-if [ \"$(srcdir)\" != \".\" ]; then rm -f ./enquire.c; else true; fi\n \t-cp $(srcdir)/enquire.c . > /dev/null 2>&1\n # Breaking this line caused a problem with one version of GNU make.\n \t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(ALL_CPPFLAGS) $(ENQUIRE_CFLAGS) -I. -c enquire.c\n@@ -1231,7 +1231,7 @@ mostlyclean:\n \t-rm -f *.greg *.lreg *.combine *.flow *.cse *.jump *.rtl *.tree *.loop\n \t-rm -f *.dbr *.jump2 *.sched *.cse2 *.sched2 *.stack\n # Delete some files made during installation.\n-\t-rm -f specs float.h enquire SYSCALLS.c SYSCALLS.c.X\n+\t-rm -f specs float.h enquire SYSCALLS.c.X SYSCALLS.c\n \t-rm -f collect collect2 ld mips-tfile mips-tdump alloca.s\n # Delete unwanted output files from TeX.\n \t-rm -f *.toc *.log *.vr *.fn *.cp *.tp *.ky *.pg\n@@ -1248,7 +1248,7 @@ clean: mostlyclean\n # Using unprotoize.c is not quite right in the first place, \n # but what better way is there?\n \t-rm -f libgcc.a libgcc1.a libgcc2.a libgcc2.ready libgcc1.null\n-\t-rm -f *.dvi unprotoize.c\n+\t-rm -f *.dvi\n \n # Delete all files that users would normally create\n # while building and installing GCC.\n@@ -1261,7 +1261,8 @@ distclean: clean\n # that shouldn't be in the distribution.\n extraclean: distclean\n \t-rm -rf =* #* *~* config/=* config/#* config/*~*\n-\t-rm -f *.dvi *.oaux patch* config/patch* *.orig *.rej *.d *.Z *.tar\n+\t-rm -f patch* *.orig *.rej config/patch* config/*.orig config/*.rej\n+\t-rm -f *.dvi *.oaux *.d *.Z *.tar *.xtar\n \t-rm -f *.s *.s[0-9] *.i install1.texi\n \n # Get rid of every file that's generated from some other file.\n@@ -1569,19 +1570,25 @@ gcc.xtar.Z: gcc.xtar\n gcc.xtar: doc\n \tif grep -s \"for version ${version}\" gcc.texi; \\\n \tthen true; \\\n-\telse echo \"You must update the version number in `gcc.texi'\"; \\\n+\telse echo \"You must update the version number in \\`gcc.texi'\"; exit 1;\\\n \tfi\n+# Update the version number in README\n+\tawk '$$1 \" \" $$2 \" \" $$3 == \"This directory contains\" \\\n+\t\t{ $$6 = version; print $$0 } \\\n+\t     $$1 \" \" $$2 \" \" $$3 != \"This directory contains\"' \\\n+\t  version=$(version) README > tmp.README\n+\tmv tmp.README README\n \t-rm -rf gcc-$(version) tmp\t\n # Put all the files in a temporary subdirectory\n # which has the name that we want to have in the tar file.\n \tmkdir tmp\n \tmkdir tmp/config\n \tfor file in *[0-9a-zA-Z+]; do \\\n-\t  ln $$file tmp || cp $$file tmp; \\\n+\t  ln $$file tmp > /dev/null 2>&1 || cp $$file tmp; \\\n \tdone\n \tcd config; \\\n \tfor file in *[0-9a-zA-Z+]; do \\\n-\t  ln $$file ../tmp/config || cp $$file ../tmp/config; \\\n+\t  ln $$file ../tmp/config >/dev/null 2>&1 || cp $$file ../tmp/config; \\\n \tdone\n \tln .gdbinit tmp\n \tmv tmp gcc-$(version)\n@@ -1591,12 +1598,6 @@ gcc.xtar: doc\n \ttar chf gcc.xtar gcc-$(version)\n # Get rid of the temporary directory.\n \trm -rf gcc-$(version)\n-# Update the version number in README\n-\tawk '$$1 \" \" $$2 \" \" $$3 == \"This directory contains\" \\\n-\t\t{ $$6 = version; print $$0 } \\\n-\t     $$1 \" \" $$2 \" \" $$3 != \"This directory contains\"' \\\n-\t  version=$(version) README > tmp.README\n-\tmv tmp.README README\n \n # do make -f ../gcc/Makefile maketest DIR=../gcc\n # in the intended test directory to make it a suitable test directory."}]}