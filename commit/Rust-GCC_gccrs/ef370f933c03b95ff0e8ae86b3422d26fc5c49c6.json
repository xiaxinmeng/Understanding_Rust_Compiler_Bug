{"sha": "ef370f933c03b95ff0e8ae86b3422d26fc5c49c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWYzNzBmOTMzYzAzYjk1ZmYwZThhZTg2YjM0MjJkMjZmYzVjNDljNg==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-12-31T14:51:56Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-01-02T19:56:19Z"}, "message": "Darwin : Adjust defaults for the linker.\n\nIdeally, the linker will be queried for its version and that will be\nused to determine capabilities that cannot be discovered from\nreasonable configuration testing.\n\nWhen building cross tools, this might not be possible, and we have\nstrategies for providing useful defaults.  These are adjusted here to\nrefect current choices.\n\ngcc/ChangeLog:\n\n\t* config/darwin.h (MIN_LD64_NO_COAL_SECTS): Adjust.\n\tAmend handling for LD64_VERSION fallback defaults.", "tree": {"sha": "f6a7b824c7f360b2b464c484109bf29a085e94e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f6a7b824c7f360b2b464c484109bf29a085e94e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef370f933c03b95ff0e8ae86b3422d26fc5c49c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef370f933c03b95ff0e8ae86b3422d26fc5c49c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef370f933c03b95ff0e8ae86b3422d26fc5c49c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef370f933c03b95ff0e8ae86b3422d26fc5c49c6/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a04f09dc7616ebe76ee71aa50eee54f1115f1f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a04f09dc7616ebe76ee71aa50eee54f1115f1f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a04f09dc7616ebe76ee71aa50eee54f1115f1f2"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "e40a98394d3da6a46a516864f5f4c37cadb4153b", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef370f933c03b95ff0e8ae86b3422d26fc5c49c6/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef370f933c03b95ff0e8ae86b3422d26fc5c49c6/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=ef370f933c03b95ff0e8ae86b3422d26fc5c49c6", "patch": "@@ -1094,16 +1094,20 @@ extern void darwin_driver_init (unsigned int *,struct cl_decoded_option **);\n /* Later versions of ld64 support coalescing weak code/data without requiring\n    that they be placed in specially identified sections.  This is the earliest\n    _tested_ version known to support this so far.  */\n-#define MIN_LD64_NO_COAL_SECTS \"236.4\"\n+#define MIN_LD64_NO_COAL_SECTS \"236.3\"\n \n /* From at least version 62.1, ld64 can build symbol indirection stubs as\n    needed, and there is no need for the compiler to emit them.  */\n #define MIN_LD64_OMIT_STUBS \"62.1\"\n \n+/* If we have no definition for the linker version, pick the minimum version\n+   that will bootstrap the compiler.  */\n #ifndef LD64_VERSION\n-#define LD64_VERSION \"62.1\"\n-#else\n-#define DEF_LD64 LD64_VERSION\n+# ifndef  DEF_LD64\n+#  define LD64_VERSION \"85.2.1\"\n+# else\n+#  define LD64_VERSION DEF_LD64\n+# endif\n #endif\n \n #endif /* CONFIG_DARWIN_H */"}]}