{"sha": "69352933301e0f67078fff8404b1eeb5c14d6b60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjkzNTI5MzMzMDFlMGY2NzA3OGZmZjg0MDRiMWVlYjVjMTRkNmI2MA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-21T16:57:24Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-21T16:57:24Z"}, "message": "re PR fortran/51991 (Wrong error message with variables named \"SAVE*\")\n\n2019-06-21  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/51991\n\t* decl.c (gfc_match_save): If SAVE was not seen, return MATCH_NO\n\tinstead issuing an error message and returning MATCH_ERROR.\n\n2019-06-21  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/51991\n\tgfortran.dg/pr51991.f90\n\nFrom-SVN: r272556", "tree": {"sha": "58bb3033b42cfcef20656edd064fdc2996736334", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58bb3033b42cfcef20656edd064fdc2996736334"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/69352933301e0f67078fff8404b1eeb5c14d6b60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69352933301e0f67078fff8404b1eeb5c14d6b60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69352933301e0f67078fff8404b1eeb5c14d6b60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69352933301e0f67078fff8404b1eeb5c14d6b60/comments", "author": null, "committer": null, "parents": [{"sha": "84338a14985c5f7b064a181180d221be16019978", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84338a14985c5f7b064a181180d221be16019978", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84338a14985c5f7b064a181180d221be16019978"}], "stats": {"total": 41, "additions": 39, "deletions": 2}, "files": [{"sha": "6a3bd62e77404c8e1af4c8c6660f17b2ac34f134", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=69352933301e0f67078fff8404b1eeb5c14d6b60", "patch": "@@ -1,3 +1,9 @@\n+2019-06-21  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/51991\n+\t* decl.c (gfc_match_save): If SAVE was not seen, return MATCH_NO\n+\tinstead issuing an error message and returning MATCH_ERROR.\n+\n 2019-06-20  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/77632"}, {"sha": "d338a94bc74e82416b46cc64c248288fc2b306d5", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=69352933301e0f67078fff8404b1eeb5c14d6b60", "patch": "@@ -9302,8 +9302,13 @@ gfc_match_save (void)\n   return MATCH_YES;\n \n syntax:\n-  gfc_error (\"Syntax error in SAVE statement at %C\");\n-  return MATCH_ERROR;\n+  if (gfc_current_ns->seen_save)\n+    {\n+      gfc_error (\"Syntax error in SAVE statement at %C\");\n+      return MATCH_ERROR;\n+    }\n+  else\n+      return MATCH_NO;\n }\n \n "}, {"sha": "9826e3de00262594f5d3a6c276a676852d82e9d3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=69352933301e0f67078fff8404b1eeb5c14d6b60", "patch": "@@ -1,3 +1,8 @@\n+2019-06-21  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/51991\n+\tgfortran.dg/pr51991.f90\n+\n 2019-06-21  Jeff Law  <law@redhat.com>\n \n         PR tree-optimization/90949"}, {"sha": "30a18e27a48da519c8aefa1cf3ab57ece3b7f7fb", "filename": "gcc/testsuite/gfortran.dg/pr51991.f90", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr51991.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69352933301e0f67078fff8404b1eeb5c14d6b60/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr51991.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr51991.f90?ref=69352933301e0f67078fff8404b1eeb5c14d6b60", "patch": "@@ -0,0 +1,21 @@\n+! { dg-do compile }\n+! PR fortran/51991\n+! Orginal code contributed by Sebastien Bardeau <bardeau at iram dot fr>\n+module mymod\n+  type :: mytyp\n+    integer :: i\n+  end type mytyp\n+contains\n+  subroutine mysub\n+    implicit none\n+    type(mytyp) :: a\n+    integer :: i,j\n+    i = a%i\n+    !\n+    ! Prior to patching gfortran, the following lined generated a syntax\n+    ! error with the SAVE statement.  Now, gfortran generates an error\n+    ! that indicates 'j' is not a component of 'mytyp'.\n+    !\n+    j = a%j    ! { dg-error \"is not a member of the\" }\n+  end subroutine mysub\n+end module mymod"}]}