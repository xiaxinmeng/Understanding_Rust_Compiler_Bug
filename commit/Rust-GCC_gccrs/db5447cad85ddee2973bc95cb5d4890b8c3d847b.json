{"sha": "db5447cad85ddee2973bc95cb5d4890b8c3d847b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI1NDQ3Y2FkODVkZGVlMjk3M2JjOTVjYjVkNDg5MGI4YzNkODQ3Yg==", "commit": {"author": {"name": "Kugan Vivekanandarajah", "email": "kuganv@linaro.org", "date": "2016-05-30T10:45:19Z"}, "committer": {"name": "Kugan Vivekanandarajah", "email": "kugan@gcc.gnu.org", "date": "2016-05-30T10:45:19Z"}, "message": "re PR tree-optimization/71252 (ICE: verify_ssa failed : definition in block 7 does not dominate use in block 6)\n\ngcc/ChangeLog:\n\n2016-05-30  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\n\tPR middle-end/71252\n\t* tree-ssa-reassoc.c (swap_ops_for_binary_stmt): Fix swap such that\n\tall fields including stmt_to_insert are swapped.\n\n\ngcc/testsuite/ChangeLog:\n\n2016-05-30  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\n\tPR middle-end/71252\n\t* gcc.dg/tree-ssa/pr71252-2.c: New test.\n\nFrom-SVN: r236875", "tree": {"sha": "32ce00e2bcfd9fa901b79d69966b3b9c1446ac01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/32ce00e2bcfd9fa901b79d69966b3b9c1446ac01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db5447cad85ddee2973bc95cb5d4890b8c3d847b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db5447cad85ddee2973bc95cb5d4890b8c3d847b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db5447cad85ddee2973bc95cb5d4890b8c3d847b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db5447cad85ddee2973bc95cb5d4890b8c3d847b/comments", "author": null, "committer": null, "parents": [{"sha": "98bdbb39a6676776c528f3b51ce740669c06d708", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98bdbb39a6676776c528f3b51ce740669c06d708", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98bdbb39a6676776c528f3b51ce740669c06d708"}], "stats": {"total": 36, "additions": 22, "deletions": 14}, "files": [{"sha": "c88748f8840f882dc290f4f20bc6fa5389eb4aad", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=db5447cad85ddee2973bc95cb5d4890b8c3d847b", "patch": "@@ -1,3 +1,9 @@\n+2016-05-30  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\n+\tPR middle-end/71252\n+\t* tree-ssa-reassoc.c (swap_ops_for_binary_stmt): Fix swap such that\n+\tall fields including stmt_to_insert are swapped.\n+\n 2016-05-30  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* predict.h (force_edge_cold): Declare."}, {"sha": "37f06b78c9946a17c9da4b76a32300020a5a25a1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=db5447cad85ddee2973bc95cb5d4890b8c3d847b", "patch": "@@ -1,3 +1,8 @@\n+2016-05-30  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\n+\tPR middle-end/71252\n+\t* gcc.dg/tree-ssa/pr71252-2.c: New test.\n+\n 2016-05-30  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* gcc.dg/tree-ssa/cunroll-12.c: New testcase."}, {"sha": "e621d3eb469a5b02f62cb4bff8a36a001a79c18d", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr71252-2.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr71252-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr71252-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr71252-2.c?ref=db5447cad85ddee2973bc95cb5d4890b8c3d847b", "patch": "@@ -0,0 +1,9 @@\n+/* PR middle-end/71252 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+unsigned a;\n+int b, c;\n+void fn1 ()\n+{\n+  b = a + c + 3 + c;\n+}"}, {"sha": "d13be29ffc772507b899f80d45082aff493d8f0d", "filename": "gcc/tree-ssa-reassoc.c", "status": "modified", "additions": 2, "deletions": 14, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2Ftree-ssa-reassoc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db5447cad85ddee2973bc95cb5d4890b8c3d847b/gcc%2Ftree-ssa-reassoc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-reassoc.c?ref=db5447cad85ddee2973bc95cb5d4890b8c3d847b", "patch": "@@ -3763,25 +3763,13 @@ swap_ops_for_binary_stmt (vec<operand_entry *> ops,\n       || (stmt && is_phi_for_stmt (stmt, oe3->op)\n \t  && !is_phi_for_stmt (stmt, oe1->op)\n \t  && !is_phi_for_stmt (stmt, oe2->op)))\n-    {\n-      operand_entry temp = *oe3;\n-      oe3->op = oe1->op;\n-      oe3->rank = oe1->rank;\n-      oe1->op = temp.op;\n-      oe1->rank= temp.rank;\n-    }\n+    std::swap (*oe1, *oe3);\n   else if ((oe1->rank == oe3->rank\n \t    && oe2->rank != oe3->rank)\n \t   || (stmt && is_phi_for_stmt (stmt, oe2->op)\n \t       && !is_phi_for_stmt (stmt, oe1->op)\n \t       && !is_phi_for_stmt (stmt, oe3->op)))\n-    {\n-      operand_entry temp = *oe2;\n-      oe2->op = oe1->op;\n-      oe2->rank = oe1->rank;\n-      oe1->op = temp.op;\n-      oe1->rank = temp.rank;\n-    }\n+    std::swap (*oe1, *oe3);\n }\n \n /* If definition of RHS1 or RHS2 dominates STMT, return the later of those"}]}