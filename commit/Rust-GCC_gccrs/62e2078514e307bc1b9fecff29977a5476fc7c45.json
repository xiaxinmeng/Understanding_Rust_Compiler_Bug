{"sha": "62e2078514e307bc1b9fecff29977a5476fc7c45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjJlMjA3ODUxNGUzMDdiYzFiOWZlY2ZmMjk5NzdhNTQ3NmZjN2M0NQ==", "commit": {"author": {"name": "Trevor Saunders", "email": "tbsaunde+gcc@tbsaunde.org", "date": "2016-07-26T10:43:58Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2016-07-26T10:43:58Z"}, "message": "add auto_sbitmap class\n\ngcc/ChangeLog:\n\n2016-07-26  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* sbitmap.h (auto_sbitmap): New class.\n\nFrom-SVN: r238747", "tree": {"sha": "299a1eee3dbe30e13d670994cfbc8dd09e612ece", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/299a1eee3dbe30e13d670994cfbc8dd09e612ece"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62e2078514e307bc1b9fecff29977a5476fc7c45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62e2078514e307bc1b9fecff29977a5476fc7c45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62e2078514e307bc1b9fecff29977a5476fc7c45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62e2078514e307bc1b9fecff29977a5476fc7c45/comments", "author": null, "committer": null, "parents": [{"sha": "3ef7d2236b0f8cf6fbb52086343ef0728356f161", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ef7d2236b0f8cf6fbb52086343ef0728356f161", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ef7d2236b0f8cf6fbb52086343ef0728356f161"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "79f79ebc55b38f4ec190cd0eac06519065fe341b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62e2078514e307bc1b9fecff29977a5476fc7c45/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62e2078514e307bc1b9fecff29977a5476fc7c45/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=62e2078514e307bc1b9fecff29977a5476fc7c45", "patch": "@@ -1,3 +1,7 @@\n+2016-07-26  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* sbitmap.h (auto_sbitmap): New class.\n+\n 2016-07-26  Alan Modra  <amodra@gmail.com>\n \n \tPR target/72103"}, {"sha": "bd734f96eddafa1ea4b90247de2f52bd3e413016", "filename": "gcc/sbitmap.h", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62e2078514e307bc1b9fecff29977a5476fc7c45/gcc%2Fsbitmap.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62e2078514e307bc1b9fecff29977a5476fc7c45/gcc%2Fsbitmap.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsbitmap.h?ref=62e2078514e307bc1b9fecff29977a5476fc7c45", "patch": "@@ -256,4 +256,29 @@ extern int bitmap_last_set_bit (const_sbitmap);\n \n extern void debug_bitmap (const_sbitmap);\n extern sbitmap sbitmap_realloc (sbitmap, unsigned int);\n+\n+/* a class that ties the lifetime of a sbitmap to its scope.  */\n+class auto_sbitmap\n+{\n+public:\n+  explicit auto_sbitmap (unsigned int size) :\n+    m_bitmap (sbitmap_alloc (size)) {}\n+  ~auto_sbitmap () { sbitmap_free (m_bitmap); }\n+\n+  /* Allow calling sbitmap functions on our bitmap.  */\n+  operator sbitmap () { return m_bitmap; }\n+\n+private:\n+  /* Prevent making a copy that refers to our sbitmap.  */\n+  auto_sbitmap (const auto_sbitmap &);\n+  auto_sbitmap &operator = (const auto_sbitmap &);\n+#if __cplusplus >= 201103L\n+  auto_sbitmap (auto_sbitmap &&);\n+  auto_sbitmap &operator = (auto_sbitmap &&);\n+#endif\n+\n+  /* The bitmap we are managing.  */\n+  sbitmap m_bitmap;\n+};\n+\n #endif /* ! GCC_SBITMAP_H */"}]}