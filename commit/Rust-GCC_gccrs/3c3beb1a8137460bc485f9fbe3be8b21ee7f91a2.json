{"sha": "3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2MzYmViMWE4MTM3NDYwYmM0ODVmOWZiZTNiZThiMjFlZTdmOTFhMg==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2020-11-12T11:49:53Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2020-11-12T11:51:36Z"}, "message": "Add test case for PR 97799.\n\ngcc/testsuite/ChangeLog:\n\n\t* gfortran.dg/entry_23.f: New test.", "tree": {"sha": "7cc3956519b8054138bfb17dc9eb9232e071bb9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7cc3956519b8054138bfb17dc9eb9232e071bb9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2/comments", "author": null, "committer": null, "parents": [{"sha": "512c6ba04102295fccc62a173ee0086ca733c920", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/512c6ba04102295fccc62a173ee0086ca733c920", "html_url": "https://github.com/Rust-GCC/gccrs/commit/512c6ba04102295fccc62a173ee0086ca733c920"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "ebc5f6681aa279a5032bacd7d900dc928e132c7e", "filename": "gcc/testsuite/gfortran.dg/entry_23.f", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2/gcc%2Ftestsuite%2Fgfortran.dg%2Fentry_23.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2/gcc%2Ftestsuite%2Fgfortran.dg%2Fentry_23.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fentry_23.f?ref=3c3beb1a8137460bc485f9fbe3be8b21ee7f91a2", "patch": "@@ -0,0 +1,57 @@\n+! { dg-do run }\n+! PR 97799 - this used to segfault intermittently.\n+! Test case by George Hockney.\n+      PROGRAM MAIN\n+      IMPLICIT NONE\n+\n+      character *(20) CA(4)  ! four cells of length 20\n+\n+      call CHAR_ENTRY(CA)  ! call char_sub through entry\n+\n+      write (*,*) CA       ! write result -- not needed for bug\n+      call CHAR_SUB(CA)    ! call char_sb directly -- not needed\n+      write (*,*) CA       ! write result -- not needed for bug\n+      STOP\n+      END\n+\n+\n+\n+      SUBROUTINE CHAR_SUB(CARRAY)  ! sets carray cells to 'Something'\n+      IMPLICIT NONE\n+\n+      CHARACTER*(*)       CARRAY(*)\n+\n+      integer i\n+      integer nelts\n+\n+      nelts = 4    ! same as size of array in main program\n+      write (*,*) 'CHAR_SUB'\n+      write (*,*) 'len(carray(1))', len(carray(1)) ! len is OK at 20\n+      call flush() ! since the next loop segfaults\n+      do 1 i=1, nelts  \n+         CARRAY(i) = 'Something'\n+  1   continue\n+      RETURN\n+      END\n+\n+\n+      SUBROUTINE             TOP_ENTRY\n+!\n+! TOP_ENTRY is never called directly.  It organizes entry points\n+! and sometimes saves variables for other entry points.  Its\n+! signature does not matter for the failure\n+!\n+      IMPLICIT NONE\n+!\n+! Declare input variables for all entry points.  Just one here\n+!\n+      CHARACTER*(*)       CARRAY(*)\n+!\n+!  Entry point CHAR_ENTRY\n+!\n+      ENTRY  CHAR_ENTRY( CARRAY)\n+      CALL   CHAR_SUB(CARRAY)\n+      RETURN\n+\n+      END SUBROUTINE TOP_ENTRY\n+"}]}