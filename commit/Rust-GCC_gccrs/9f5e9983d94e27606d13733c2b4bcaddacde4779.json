{"sha": "9f5e9983d94e27606d13733c2b4bcaddacde4779", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWY1ZTk5ODNkOTRlMjc2MDZkMTM3MzNjMmI0YmNhZGRhY2RlNDc3OQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-03-27T21:36:53Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-03-27T21:36:53Z"}, "message": "tree-inline.c: Include gt-tree-inline.h.\n\n\t* tree-inline.c: Include gt-tree-inline.h.\n\t(clone_fn_id_num): New variable.\n\t(clone_function_name): New function.\n\t(tree_function_versioning): Use it.\n\t* Makefile.in (GTFILES): Add tree-inline.c.\n\n\t* gcc.dg/ipa/ipacost-1.c: Adjust match pattern for change\n\tin clone naming.\n\nFrom-SVN: r145126", "tree": {"sha": "54f39b0da10cb19b9d49d6ea27070c46a5afa928", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54f39b0da10cb19b9d49d6ea27070c46a5afa928"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9f5e9983d94e27606d13733c2b4bcaddacde4779", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f5e9983d94e27606d13733c2b4bcaddacde4779", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f5e9983d94e27606d13733c2b4bcaddacde4779", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f5e9983d94e27606d13733c2b4bcaddacde4779/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a143dc135e37cef5f228e79a4b0acadacf83e6e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a143dc135e37cef5f228e79a4b0acadacf83e6e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a143dc135e37cef5f228e79a4b0acadacf83e6e6"}], "stats": {"total": 45, "additions": 42, "deletions": 3}, "files": [{"sha": "b1e391a249ece60f0386bb46c3a4f4fca0ad04af", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9f5e9983d94e27606d13733c2b4bcaddacde4779", "patch": "@@ -1,3 +1,11 @@\n+2009-03-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* tree-inline.c: Include gt-tree-inline.h.\n+\t(clone_fn_id_num): New variable.\n+\t(clone_function_name): New function.\n+\t(tree_function_versioning): Use it.\n+\t* Makefile.in (GTFILES): Add tree-inline.c.\n+\n 2009-03-27  Mark Mitchell  <mark@codesourcery.com>\n \n \t* BASE-VER: Change to 4.5.0."}, {"sha": "e973c2a8c7f310e236b5b44b8de16b46bf78e45e", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=9f5e9983d94e27606d13733c2b4bcaddacde4779", "patch": "@@ -3308,7 +3308,7 @@ GTFILES = $(CPP_ID_DATA_H) $(srcdir)/input.h $(srcdir)/coretypes.h \\\n   $(srcdir)/tree-ssa-propagate.c \\\n   $(srcdir)/tree-phinodes.c \\\n   $(srcdir)/ipa-reference.c $(srcdir)/tree-ssa-structalias.h \\\n-  $(srcdir)/tree-ssa-structalias.c \\\n+  $(srcdir)/tree-ssa-structalias.c $(srcdir)/tree-inline.c \\\n   @all_gtfiles@\n \n # Compute the list of GT header files from the corresponding C sources,"}, {"sha": "295eb89745a46bda7d11656bc60544e30f17f5b6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9f5e9983d94e27606d13733c2b4bcaddacde4779", "patch": "@@ -1,3 +1,8 @@\n+2009-03-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc.dg/ipa/ipacost-1.c: Adjust match pattern for change\n+\tin clone naming.\n+\n 2009-03-27  Xinliang David Li  <davidxl@google.com>\n \n \tPR tree-optimization/39557"}, {"sha": "1c75c6cfde5cd2bfc8be6372cb9197aa005f250a", "filename": "gcc/testsuite/gcc.dg/ipa/ipacost-1.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fipacost-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fipacost-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fipacost-1.c?ref=9f5e9983d94e27606d13733c2b4bcaddacde4779", "patch": "@@ -53,6 +53,7 @@ main()\n /* { dg-final { scan-ipa-dump-times \"versioned function i_can_be_propagated_fully \" 1 \"cp\"  } } */\n /* { dg-final { scan-ipa-dump-not \"versioned function i_can_not_be_propagated_fully2\" \"cp\"  } } */\n /* { dg-final { scan-ipa-dump-not \"versioned function i_can_not_be_propagated_fully \" \"cp\"  } } */\n-/* { dg-final { scan-tree-dump-not \"i_can_be_propagated\" \"optimized\"  } } */\n+/* { dg-final { scan-tree-dump-not \"i_can_be_propagated_fully \" \"optimized\"  } } */\n+/* { dg-final { scan-tree-dump-not \"i_can_be_propagated_fully2 \" \"optimized\"  } } */\n /* { dg-final { cleanup-ipa-dump \"cp\" } } */\n /* { dg-final { cleanup-tree-dump \"optimized\" } } */"}, {"sha": "e6a2fb301eb2dfa10dc059dcbf68d3a52582b116", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 26, "deletions": 1, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f5e9983d94e27606d13733c2b4bcaddacde4779/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=9f5e9983d94e27606d13733c2b4bcaddacde4779", "patch": "@@ -4268,6 +4268,29 @@ tree_versionable_function_p (tree fndecl)\n   return true;\n }\n \n+/* Create a new name for omp child function.  Returns an identifier.  */\n+\n+static GTY(()) unsigned int clone_fn_id_num;\n+\n+static tree\n+clone_function_name (tree decl)\n+{\n+  tree name = DECL_ASSEMBLER_NAME (decl);\n+  size_t len = IDENTIFIER_LENGTH (name);\n+  char *tmp_name, *prefix;\n+\n+  prefix = XALLOCAVEC (char, len + strlen (\"_clone\") + 1);\n+  memcpy (prefix, IDENTIFIER_POINTER (name), len);\n+  strcpy (prefix + len, \"_clone\");\n+#ifndef NO_DOT_IN_LABEL\n+  prefix[len] = '.';\n+#elif !defined NO_DOLLAR_IN_LABEL\n+  prefix[len] = '$';\n+#endif\n+  ASM_FORMAT_PRIVATE_NAME (tmp_name, prefix, clone_fn_id_num++);\n+  return get_identifier (tmp_name);\n+}\n+\n /* Create a copy of a function's tree.\n    OLD_DECL and NEW_DECL are FUNCTION_DECL tree nodes\n    of the original function and the new copied function\n@@ -4315,7 +4338,7 @@ tree_function_versioning (tree old_decl, tree new_decl, varray_type tree_map,\n   /* Generate a new name for the new version. */\n   if (!update_clones)\n     {\n-      DECL_NAME (new_decl) =  create_tmp_var_name (NULL);\n+      DECL_NAME (new_decl) = clone_function_name (old_decl);\n       SET_DECL_ASSEMBLER_NAME (new_decl, DECL_NAME (new_decl));\n       SET_DECL_RTL (new_decl, NULL_RTX);\n       id.statements_to_fold = pointer_set_create ();\n@@ -4520,3 +4543,5 @@ tree_can_inline_p (tree caller, tree callee)\n   /* Allow the backend to decide if inlining is ok.  */\n   return targetm.target_option.can_inline_p (caller, callee);\n }\n+\n+#include \"gt-tree-inline.h\""}]}