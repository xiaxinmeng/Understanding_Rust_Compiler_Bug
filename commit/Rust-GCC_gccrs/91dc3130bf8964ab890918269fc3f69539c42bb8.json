{"sha": "91dc3130bf8964ab890918269fc3f69539c42bb8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTFkYzMxMzBiZjg5NjRhYjg5MDkxODI2OWZjM2Y2OTUzOWM0MmJiOA==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2001-10-23T22:39:06Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2001-10-23T22:39:06Z"}, "message": "darwin-protos.h (constructor_section, [...]): Prototype.\n\n\t* darwin-protos.h (constructor_section, destructor_section,\n\tmod_init_section, mod_term_section): Prototype.\n\t* darwin.c (machopic_finish, update_non_lazy_ptrs, update_stubs):\n\tConst-ify.\n\t* darwin.h (ASM_DECLARE_OBJECT_NAME, ASM_DECLARE_FUNCTION_NAME):\n\tLikewise.\n\t(SECTION_FUNCTION): Prototype `FUNCTION'.  Delete\n\tobjc_section_init declaration.\n\t(EXTRA_SECTION_FUNCTIONS): Prototype objc_section_init.\n\t(objc_section_init, try_section_alias): Make static.\n\t(alias_section): Make static and hide unused function.\n\t(ASM_GENERATE_INTERNAL_LABEL): Fix format specifier warning.\n\nFrom-SVN: r46447", "tree": {"sha": "cb4da29020192aa15873d573eab51b6544eb48ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb4da29020192aa15873d573eab51b6544eb48ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/91dc3130bf8964ab890918269fc3f69539c42bb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91dc3130bf8964ab890918269fc3f69539c42bb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91dc3130bf8964ab890918269fc3f69539c42bb8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91dc3130bf8964ab890918269fc3f69539c42bb8/comments", "author": null, "committer": null, "parents": [{"sha": "ee701fade725293f69b24694c27c80b2e308b903", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee701fade725293f69b24694c27c80b2e308b903", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee701fade725293f69b24694c27c80b2e308b903"}], "stats": {"total": 51, "additions": 38, "deletions": 13}, "files": [{"sha": "36e9e695c54c1de011a09fbb3f86aa0e68966501", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=91dc3130bf8964ab890918269fc3f69539c42bb8", "patch": "@@ -1,3 +1,18 @@\n+2001-10-23  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* darwin-protos.h (constructor_section, destructor_section,\n+\tmod_init_section, mod_term_section): Prototype.\n+\t* darwin.c (machopic_finish, update_non_lazy_ptrs, update_stubs):\n+\tConst-ify.\n+\t* darwin.h (ASM_DECLARE_OBJECT_NAME, ASM_DECLARE_FUNCTION_NAME):\n+\tLikewise.\n+\t(SECTION_FUNCTION): Prototype `FUNCTION'.  Delete\n+\tobjc_section_init declaration.\n+\t(EXTRA_SECTION_FUNCTIONS): Prototype objc_section_init.\n+\t(objc_section_init, try_section_alias): Make static.\n+\t(alias_section): Make static and hide unused function.\n+\t(ASM_GENERATE_INTERNAL_LABEL): Fix format specifier warning.\n+\n Tue Oct 23 13:05:53 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* alias.c (can_address_p): Compnonents are not addressable if"}, {"sha": "208d93fb7db3a975df7f715aabaece7d767b789a", "filename": "gcc/config/darwin-protos.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2Fconfig%2Fdarwin-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2Fconfig%2Fdarwin-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin-protos.h?ref=91dc3130bf8964ab890918269fc3f69539c42bb8", "patch": "@@ -33,6 +33,11 @@ extern void machopic_symbol_stub_section PARAMS ((void));\n extern void machopic_lazy_symbol_ptr_section PARAMS ((void));\n extern void machopic_nl_symbol_ptr_section PARAMS ((void));\n \n+extern void constructor_section PARAMS ((void));\n+extern void destructor_section PARAMS ((void));\n+extern void mod_init_section PARAMS ((void));\n+extern void mod_term_section PARAMS ((void));\n+\n #ifdef RTX_CODE\n \n extern int machopic_operand_p PARAMS ((rtx));"}, {"sha": "158f375c4cbac3e71cb8891e7827f9027b145909", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=91dc3130bf8964ab890918269fc3f69539c42bb8", "patch": "@@ -885,8 +885,8 @@ machopic_finish (asm_out_file)\n        temp != NULL_TREE;\n        temp = TREE_CHAIN (temp))\n     {\n-      char *sym_name = IDENTIFIER_POINTER (TREE_VALUE (temp));\n-      char *stub_name = IDENTIFIER_POINTER (TREE_PURPOSE (temp));\n+      const char *sym_name = IDENTIFIER_POINTER (TREE_VALUE (temp));\n+      const char *stub_name = IDENTIFIER_POINTER (TREE_PURPOSE (temp));\n       char *sym;\n       char *stub;\n \n@@ -1066,7 +1066,7 @@ static void\n update_non_lazy_ptrs (name)\n      const char *name;\n {\n-  char *name1, *name2;\n+  const char *name1, *name2;\n   tree temp;\n \n   STRIP_NAME_ENCODING (name1, name);\n@@ -1097,7 +1097,7 @@ static void\n update_stubs (name)\n      const char *name;\n {\n-  char *name1, *name2;\n+  const char *name1, *name2;\n   tree temp;\n \n   STRIP_NAME_ENCODING (name1, name);"}, {"sha": "a7a96f31ff35d9fd2ded445cde37d9993c873a61", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91dc3130bf8964ab890918269fc3f69539c42bb8/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=91dc3130bf8964ab890918269fc3f69539c42bb8", "patch": "@@ -204,7 +204,7 @@ do { text_section ();\t\t\t\t\t\t\t\\\n #undef ASM_DECLARE_OBJECT_NAME\n #define ASM_DECLARE_OBJECT_NAME(FILE, NAME, DECL)\t\t\t\\\n   do {\t\t\t\t\t\t\t\t\t\\\n-    char *xname = NAME;                                                 \\\n+    const char *xname = NAME;                                           \\\n     if (GET_CODE (XEXP (DECL_RTL (DECL), 0)) != SYMBOL_REF)             \\\n       xname = IDENTIFIER_POINTER (DECL_NAME (DECL));                    \\\n     if ((TREE_STATIC (DECL)                                             \\\n@@ -220,7 +220,7 @@ do { text_section ();\t\t\t\t\t\t\t\\\n \n #define ASM_DECLARE_FUNCTION_NAME(FILE, NAME, DECL)                     \\\n   do {\t\t\t\t\t\t\t\t\t\\\n-    char *xname = NAME;                                                 \\\n+    const char *xname = NAME;                                           \\\n     if (GET_CODE (XEXP (DECL_RTL (DECL), 0)) != SYMBOL_REF)             \\\n       xname = IDENTIFIER_POINTER (DECL_NAME (DECL));                    \\\n     if ((TREE_STATIC (DECL)                                             \\\n@@ -310,11 +310,10 @@ do { text_section ();\t\t\t\t\t\t\t\\\n \n #undef\tSECTION_FUNCTION\n #define SECTION_FUNCTION(FUNCTION, SECTION, DIRECTIVE, OBJC)\t\t\\\n+extern void FUNCTION PARAMS ((void));\t\t\t\t\t\\\n void\t\t\t\t\t\t\t\t\t\\\n FUNCTION ()\t\t\t\t\t\t\t\t\\\n {\t\t\t\t\t\t\t\t\t\\\n-  extern void objc_section_init ();\t\t\t\t\t\\\n-  \t\t\t\t\t\t\t\t\t\\\n   if (in_section != SECTION)\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n       if (OBJC)\t\t\t\t\t\t\t\t\\\n@@ -357,6 +356,7 @@ do { if (!strcmp (alias_name, name))\t\t\t\t\t\\\n \n #undef\tEXTRA_SECTION_FUNCTIONS\n #define EXTRA_SECTION_FUNCTIONS\t\t\t\\\n+static void objc_section_init PARAMS ((void));\t\\\n SECTION_FUNCTION (const_section,\t\t\\\n                   in_const,\t\t\t\\\n                   \".const\", 0)\t\t\t\\\n@@ -464,7 +464,7 @@ SECTION_FUNCTION (darwin_eh_frame_section,\t\t\\\n \t\tin_darwin_eh_frame,\t\t\t\\\n \t\t\".section __TEXT,__eh_frame\", 0)\t\\\n \t\t\t\t\t\t\t\\\n-void\t\t\t\t\t\t\\\n+static void\t\t\t\t\t\\\n objc_section_init ()\t\t\t\t\\\n {\t\t\t\t\t\t\\\n   static int been_here = 0;\t\t\t\\\n@@ -497,14 +497,18 @@ objc_section_init ()\t\t\t\t\\\n     }\t\t\t\t\t\t\\\n } \t\t\t\t\t\t\\\n static tree section_alias[(int) num_sections];\t\\\n-void try_section_alias () \t\t\t\\\n+static void try_section_alias PARAMS ((void));\t\\\n+static void try_section_alias () \t\t\\\n {\t\t\t\t\t\t\\\n     if (section_alias[in_section] && asm_out_file) \\\n       fprintf (asm_out_file, \"%s\\n\",\t\t\\\n \t       IDENTIFIER_POINTER (section_alias[in_section]));\t\\\n }      \t\t\t\t\t\t\\\n-void alias_section (name, alias)\t\t\t\\\n-     char *name, *alias;\t\t\t\t\\\n+\n+#if 0\n+static void alias_section PARAMS ((const char *, const char *)); \\\n+static void alias_section (name, alias)\t\t\t\\\n+     const char *name, *alias;\t\t\t\t\\\n {\t\t\t\t\t\t\t\\\n     ALIAS_SECTION (in_data, \"data\");\t\t\t\\\n     ALIAS_SECTION (in_text, \"text\");\t\t\t\\\n@@ -514,6 +518,7 @@ void alias_section (name, alias)\t\t\t\\\n     ALIAS_SECTION (in_literal4, \"literal4\");\t\t\\\n     ALIAS_SECTION (in_literal8, \"literal8\");\t\t\\\n }\n+#endif\n \n #undef\tREADONLY_DATA_SECTION\n #define READONLY_DATA_SECTION const_section\n@@ -685,7 +690,7 @@ void alias_section (name, alias)\t\t\t\\\n \n #undef ASM_GENERATE_INTERNAL_LABEL\n #define ASM_GENERATE_INTERNAL_LABEL(LABEL,PREFIX,NUM)\t\\\n-  sprintf (LABEL, \"*%s%d\", PREFIX, NUM)\n+  sprintf (LABEL, \"*%s%ld\", PREFIX, (long)(NUM))\n \n /* This is how to output an internal numbered label where PREFIX is\n    the class of label and NUM is the number within the class.  */"}]}