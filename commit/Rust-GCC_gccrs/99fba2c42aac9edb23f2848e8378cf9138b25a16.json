{"sha": "99fba2c42aac9edb23f2848e8378cf9138b25a16", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTlmYmEyYzQyYWFjOWVkYjIzZjI4NDhlODM3OGNmOTEzOGIyNWExNg==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.org", "date": "2009-12-26T18:49:55Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2009-12-26T18:49:55Z"}, "message": "configure.ac: Define FFI_MMAP_EXEC_WRIT for the given targets.\n\n2009-12-26  Andreas Tobler  <a.tobler@schweiz.org>\n\n\t* configure.ac: Define FFI_MMAP_EXEC_WRIT for the given targets.\n\t* configure: Regenerate.\n\t* fficonfig.h.in: Likewise.\n\t* src/closures.c: Remove the FFI_MMAP_EXEC_WRIT definition for\n\tSolaris/x86.\n\nFrom-SVN: r155475", "tree": {"sha": "1662bd43280fd0c940233f8e229b9a2eaec7361e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1662bd43280fd0c940233f8e229b9a2eaec7361e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99fba2c42aac9edb23f2848e8378cf9138b25a16", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99fba2c42aac9edb23f2848e8378cf9138b25a16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99fba2c42aac9edb23f2848e8378cf9138b25a16", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99fba2c42aac9edb23f2848e8378cf9138b25a16/comments", "author": null, "committer": null, "parents": [{"sha": "302486f4fb52bf49b2a3b581e24c30b9a680da91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/302486f4fb52bf49b2a3b581e24c30b9a680da91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/302486f4fb52bf49b2a3b581e24c30b9a680da91"}], "stats": {"total": 32, "additions": 27, "deletions": 5}, "files": [{"sha": "9d06305c58a3d29a865192b7fb864c09512bd4f0", "filename": "libffi/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=99fba2c42aac9edb23f2848e8378cf9138b25a16", "patch": "@@ -1,3 +1,11 @@\n+2009-12-26  Andreas Tobler  <a.tobler@schweiz.org>\n+\n+\t* configure.ac: Define FFI_MMAP_EXEC_WRIT for the given targets.\n+\t* configure: Regenerate.\n+\t* fficonfig.h.in: Likewise.\n+\t* src/closures.c: Remove the FFI_MMAP_EXEC_WRIT definition for\n+\tSolaris/x86.\n+\n 2009-12-26  Andreas Schwab  <schwab@linux-m68k.org>\n \n \t* src/powerpc/ffi.c (ffi_prep_args_SYSV): Advance intarg_count"}, {"sha": "aa40a0136610eac629260e179afcce65236e5fd8", "filename": "libffi/configure", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fconfigure?ref=99fba2c42aac9edb23f2848e8378cf9138b25a16", "patch": "@@ -12405,6 +12405,14 @@ $as_echo \"#define HAVE_AS_X86_PCREL 1\" >>confdefs.h\n     fi\n fi\n \n+case \"$target\" in\n+     *-apple-darwin10* | *-*-freebsd* | *-*-openbsd* | *-pc-solaris*)\n+\n+$as_echo \"#define FFI_MMAP_EXEC_WRIT 1\" >>confdefs.h\n+\n+     ;;\n+esac\n+\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether .eh_frame section should be read-only\" >&5\n $as_echo_n \"checking whether .eh_frame section should be read-only... \" >&6; }\n if test \"${libffi_cv_ro_eh_frame+set}\" = set; then :"}, {"sha": "f101f4941770ab74a0fdd0160544d71310153951", "filename": "libffi/configure.ac", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fconfigure.ac?ref=99fba2c42aac9edb23f2848e8378cf9138b25a16", "patch": "@@ -271,6 +271,14 @@ if test x$TARGET = xX86 || test x$TARGET = xX86_WIN32 || test x$TARGET = xX86_64\n     fi\n fi\n \n+case \"$target\" in\n+     *-apple-darwin10* | *-*-freebsd* | *-*-openbsd* | *-pc-solaris*)\n+       AC_DEFINE(FFI_MMAP_EXEC_WRIT, 1,\n+                 [Cannot use malloc on this target, so, we revert to\n+                   alternative means])\n+     ;;\n+esac\n+\n AC_CACHE_CHECK([whether .eh_frame section should be read-only],\n     libffi_cv_ro_eh_frame, [\n \tlibffi_cv_ro_eh_frame=no"}, {"sha": "e03bbf90b275cdfa98d40d72bf317a9c5a8a166e", "filename": "libffi/fficonfig.h.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Ffficonfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Ffficonfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Ffficonfig.h.in?ref=99fba2c42aac9edb23f2848e8378cf9138b25a16", "patch": "@@ -17,6 +17,9 @@\n /* Define this if you want extra debugging. */\n #undef FFI_DEBUG\n \n+/* Cannot use malloc on this target, so, we revert to alternative means */\n+#undef FFI_MMAP_EXEC_WRIT\n+\n /* Define this is you do not want support for the raw API. */\n #undef FFI_NO_RAW_API\n "}, {"sha": "0b156e0f00d592ecf731bdc80181c16c1f36f4ef", "filename": "libffi/src/closures.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Fsrc%2Fclosures.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99fba2c42aac9edb23f2848e8378cf9138b25a16/libffi%2Fsrc%2Fclosures.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fclosures.c?ref=99fba2c42aac9edb23f2848e8378cf9138b25a16", "patch": "@@ -50,11 +50,6 @@\n    executable memory. */\n #  define FFI_MMAP_EXEC_WRIT 1\n # endif\n-# if defined(X86_64) && defined(__sun__) && defined(__svr4__)\n-/* The data segment on 64-bit Solaris/x86 isn't executable, so use mmap\n-   instead.  */\n-#  define FFI_MMAP_EXEC_WRIT 1\n-# endif\n #endif\n \n #if FFI_MMAP_EXEC_WRIT && !defined FFI_MMAP_EXEC_SELINUX"}]}