{"sha": "8c0ede34a2381fae5012efa703f0277bfc9b6358", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGMwZWRlMzRhMjM4MWZhZTUwMTJlZmE3MDNmMDI3N2JmYzliNjM1OA==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "2000-01-04T07:26:08Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2000-01-04T07:26:08Z"}, "message": "regclass.c (regclass): Properly compute loop_cost.\n\n        * regclass.c (regclass): Properly compute loop_cost.  Adjust\n        comments.\n\nFrom-SVN: r31192", "tree": {"sha": "df113e819b87f51b0ac10ba17b994a0cce2a92ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/df113e819b87f51b0ac10ba17b994a0cce2a92ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c0ede34a2381fae5012efa703f0277bfc9b6358", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c0ede34a2381fae5012efa703f0277bfc9b6358", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c0ede34a2381fae5012efa703f0277bfc9b6358", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c0ede34a2381fae5012efa703f0277bfc9b6358/comments", "author": null, "committer": null, "parents": [{"sha": "4963c995cc86f829725ad41a44674aa49ee82ef4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4963c995cc86f829725ad41a44674aa49ee82ef4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4963c995cc86f829725ad41a44674aa49ee82ef4"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "fe4c381fba8cda3c9848ba8c273a57c176155196", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c0ede34a2381fae5012efa703f0277bfc9b6358/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c0ede34a2381fae5012efa703f0277bfc9b6358/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8c0ede34a2381fae5012efa703f0277bfc9b6358", "patch": "@@ -1,5 +1,8 @@\n Tue Jan  4 00:18:46 2000  Jeffrey A Law  (law@cygnus.com)\n \n+\t* regclass.c (regclass): Properly compute loop_cost.  Adjust\n+\tcomments.\n+\n \t* regclass.c: Fix minor whitespace problems.\n \n 2000-01-03  Anthony Green  <green@cygnus.com>"}, {"sha": "667250c7cc6b965a38ff205d870130ee9d025d04", "filename": "gcc/regclass.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c0ede34a2381fae5012efa703f0277bfc9b6358/gcc%2Fregclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c0ede34a2381fae5012efa703f0277bfc9b6358/gcc%2Fregclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregclass.c?ref=8c0ede34a2381fae5012efa703f0277bfc9b6358", "patch": "@@ -1100,13 +1100,17 @@ regclass (f, nregs, dump)\n \t    basic_block bb = BASIC_BLOCK (index);\n \n \t    /* Show that an insn inside a loop is likely to be executed three\n-\t       times more than insns outside a loop.  This is much more aggressive\n-\t       than the assumptions made elsewhere and is being tried as an\n-\t       experiment.  */\n+\t       times more than insns outside a loop.  This is much more\n+\t       aggressive than the assumptions made elsewhere and is being\n+\t       tried as an experiment. \n+\n+\t       Note that a block's loop depth starts at zero, not one!  We\n+\t       must not subract one from the loop depth as that could give\n+\t       a negative shift count below.  */\n \t    if (optimize_size)\n \t      loop_cost = 1;\n \t    else\n-\t      loop_cost = 1 << (2 * MIN (bb->loop_depth - 1, 5));\n+\t      loop_cost = 1 << (2 * MIN (bb->loop_depth, 5));\n \t    for (insn = bb->head; ; insn = NEXT_INSN (insn))\n \t      {\n \t\tinsn = scan_one_insn (insn, pass);"}]}