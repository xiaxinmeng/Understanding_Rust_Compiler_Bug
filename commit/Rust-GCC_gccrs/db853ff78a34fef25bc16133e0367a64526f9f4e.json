{"sha": "db853ff78a34fef25bc16133e0367a64526f9f4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI4NTNmZjc4YTM0ZmVmMjViYzE2MTMzZTAzNjdhNjQ1MjZmOWY0ZQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-08-12T18:56:14Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-08-16T16:51:42Z"}, "message": "libstdc++: Install GDB pretty printers for debug library\n\nThe additional libraries installed by --enable-libstdcxx-debug are built\nwithout optimization to aid debugging, but the Python pretty printers\nare not installed alongside them. This means that you can step through\nthe unoptimized library code, but at the expense of pretty printing the\nlibrary types.\n\nThis remedies the situation by installing another copy of the GDB hooks\nalongside the debug version of libstdc++.so.\n\nSigned-off-by: Jonathan Wakely <jwakely@redhat.com>\n\nlibstdc++-v3/ChangeLog:\n\n\t* python/Makefile.am [GLIBCXX_BUILD_DEBUG] (install-data-local):\n\tInstall another copy of the GDB hook.\n\t* python/Makefile.in: Regenerate.", "tree": {"sha": "efc33ee3625dd9cbf0abd076ec1e08b7a2879ab3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/efc33ee3625dd9cbf0abd076ec1e08b7a2879ab3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db853ff78a34fef25bc16133e0367a64526f9f4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db853ff78a34fef25bc16133e0367a64526f9f4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db853ff78a34fef25bc16133e0367a64526f9f4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db853ff78a34fef25bc16133e0367a64526f9f4e/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8cdcea51c0fd753e6a652c9b236e91b3a6e0911c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cdcea51c0fd753e6a652c9b236e91b3a6e0911c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cdcea51c0fd753e6a652c9b236e91b3a6e0911c"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "bc4a26651d8265557db163968137a2d7f2169f73", "filename": "libstdc++-v3/python/Makefile.am", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db853ff78a34fef25bc16133e0367a64526f9f4e/libstdc%2B%2B-v3%2Fpython%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db853ff78a34fef25bc16133e0367a64526f9f4e/libstdc%2B%2B-v3%2Fpython%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fpython%2FMakefile.am?ref=db853ff78a34fef25bc16133e0367a64526f9f4e", "patch": "@@ -29,6 +29,12 @@ else\n pythondir = $(datadir)/gcc-$(gcc_version)/python\n endif\n \n+if GLIBCXX_BUILD_DEBUG\n+debug_gdb_py = YES\n+else\n+debug_gdb_py =\n+endif\n+\n all-local: gdb.py\n \n nobase_python_DATA = \\\n@@ -53,4 +59,8 @@ install-data-local: gdb.py\n \t\t  $(DESTDIR)$(toolexeclibdir)/libstdc++.la`; \\\n \tfi; \\\n \techo \" $(INSTALL_DATA) gdb.py $(DESTDIR)$(toolexeclibdir)/$$libname-gdb.py\"; \\\n-\t$(INSTALL_DATA) gdb.py $(DESTDIR)$(toolexeclibdir)/$$libname-gdb.py\n+\t$(INSTALL_DATA) gdb.py $(DESTDIR)$(toolexeclibdir)/$$libname-gdb.py ; \\\n+\tif [ -n \"$(debug_gdb_py)\" ]; then \\\n+\t  sed \"/^libdir = /s;'$$;/debug';\" gdb.py > debug-gdb.py ; \\\n+\t  $(INSTALL_DATA) debug-gdb.py $(DESTDIR)$(toolexeclibdir)/debug/$$libname-gdb.py ; \\\n+\tfi"}, {"sha": "b3b56c41597e39d28b9ae807f50f428e4bba4ffb", "filename": "libstdc++-v3/python/Makefile.in", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db853ff78a34fef25bc16133e0367a64526f9f4e/libstdc%2B%2B-v3%2Fpython%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db853ff78a34fef25bc16133e0367a64526f9f4e/libstdc%2B%2B-v3%2Fpython%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fpython%2FMakefile.in?ref=db853ff78a34fef25bc16133e0367a64526f9f4e", "patch": "@@ -403,6 +403,8 @@ WARN_CXXFLAGS = \\\n AM_CPPFLAGS = $(GLIBCXX_INCLUDES) $(CPPFLAGS)\n @ENABLE_PYTHONDIR_FALSE@pythondir = $(datadir)/gcc-$(gcc_version)/python\n @ENABLE_PYTHONDIR_TRUE@pythondir = $(prefix)/$(python_mod_dir)\n+@GLIBCXX_BUILD_DEBUG_FALSE@debug_gdb_py = \n+@GLIBCXX_BUILD_DEBUG_TRUE@debug_gdb_py = YES\n nobase_python_DATA = \\\n     libstdcxx/v6/printers.py \\\n     libstdcxx/v6/xmethods.py \\\n@@ -614,7 +616,11 @@ install-data-local: gdb.py\n \t\t  $(DESTDIR)$(toolexeclibdir)/libstdc++.la`; \\\n \tfi; \\\n \techo \" $(INSTALL_DATA) gdb.py $(DESTDIR)$(toolexeclibdir)/$$libname-gdb.py\"; \\\n-\t$(INSTALL_DATA) gdb.py $(DESTDIR)$(toolexeclibdir)/$$libname-gdb.py\n+\t$(INSTALL_DATA) gdb.py $(DESTDIR)$(toolexeclibdir)/$$libname-gdb.py ; \\\n+\tif [ -n \"$(debug_gdb_py)\" ]; then \\\n+\t  sed \"/^libdir = /s;'$$;/debug';\" gdb.py > debug-gdb.py ; \\\n+\t  $(INSTALL_DATA) debug-gdb.py $(DESTDIR)$(toolexeclibdir)/debug/$$libname-gdb.py ; \\\n+\tfi\n \n # Tell versions [3.59,3.63) of GNU make to not export all variables.\n # Otherwise a system limit (for SysV at least) may be exceeded."}]}