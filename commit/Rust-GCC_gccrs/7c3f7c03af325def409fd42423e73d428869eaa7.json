{"sha": "7c3f7c03af325def409fd42423e73d428869eaa7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2MzZjdjMDNhZjMyNWRlZjQwOWZkNDI0MjNlNzNkNDI4ODY5ZWFhNw==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1999-04-06T14:27:19Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1999-04-06T14:27:19Z"}, "message": "parse.y (patch_binop): Don't fold if non-constant and emiting class files.\n\n\ufffd\n\t* parse.y (patch_binop):  Don't fold if non-constant and emiting\n\tclass files.\n\nFrom-SVN: r26215", "tree": {"sha": "0b4960d2845a6d5f9a6c6ec8bf5ea71278fa8f71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b4960d2845a6d5f9a6c6ec8bf5ea71278fa8f71"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c3f7c03af325def409fd42423e73d428869eaa7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c3f7c03af325def409fd42423e73d428869eaa7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c3f7c03af325def409fd42423e73d428869eaa7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c3f7c03af325def409fd42423e73d428869eaa7/comments", "author": null, "committer": null, "parents": [{"sha": "d1472141a50b9ba3e1f8552be2b2b69a82801087", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1472141a50b9ba3e1f8552be2b2b69a82801087", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1472141a50b9ba3e1f8552be2b2b69a82801087"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "69f18618b724b7137253ad0e99572db4c9ce0b95", "filename": "gcc/java/parse.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c3f7c03af325def409fd42423e73d428869eaa7/gcc%2Fjava%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c3f7c03af325def409fd42423e73d428869eaa7/gcc%2Fjava%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.c?ref=7c3f7c03af325def409fd42423e73d428869eaa7", "patch": "@@ -11971,8 +11971,12 @@ patch_binop (node, wfl_op1, wfl_op2)\n   TREE_TYPE (node) = prom_type;\n   TREE_SIDE_EFFECTS (node) = TREE_SIDE_EFFECTS (op1) | TREE_SIDE_EFFECTS (op2);\n   \n-  /* fold does not respect side-effect order as required for Java but not C. */\n-  if (! TREE_SIDE_EFFECTS (node))\n+  /* fold does not respect side-effect order as required for Java but not C.\n+   * Also, it sometimes create SAVE_EXPRs which are bad when emitting\n+   * bytecode.\n+   */\n+  if (flag_emit_class_files ? (TREE_CONSTANT (op1) && TREE_CONSTANT (op2))\n+      : ! TREE_SIDE_EFFECTS (node))\n     node = fold (node);\n   return node;\n }"}]}