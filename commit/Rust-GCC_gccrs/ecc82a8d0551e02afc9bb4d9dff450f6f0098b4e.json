{"sha": "ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNjODJhOGQwNTUxZTAyYWZjOWJiNGQ5ZGZmNDUwZjZmMDA5OGI0ZQ==", "commit": {"author": {"name": "Andrew Waterman", "email": "andrew@sifive.com", "date": "2017-11-05T00:30:40Z"}, "committer": {"name": "Palmer Dabbelt", "email": "palmer@gcc.gnu.org", "date": "2017-11-05T00:30:40Z"}, "message": "RISC-V: Set SLOW_BYTE_ACCESS=1\n\nWhen implementing the RISC-V port, I took the name of this macro at\nface value.  It appears we were mistaken in what this means, here's a\nquote from the SPARC port that better describes what SLOW_BYTE_ACCESS\ndoes\n\n    /* Nonzero if access to memory by bytes is slow and undesirable.\n       For RISC chips, it means that access to memory by bytes is no\n       better than access by words when possible, so grab a whole word\n       and maybe make use of that.  */\n\nI've added the comment to our port as well.\n\nSee https://gcc.gnu.org/ml/gcc/2017-08/msg00202.html for more\ndiscussion.  Thanks to Michael Clark and Andrew Pinski for the help!\n\ngcc/ChangeLog\n\n2017-11-04  Andrew Waterman  <andrew@sifive.com>\n\n        * config/riscv/riscv.h (SLOW_BYTE_ACCESS): Change to 1.\n\nFrom-SVN: r254416", "tree": {"sha": "271bc9ce736e4248272134f3f89c16dee2d9ac9a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/271bc9ce736e4248272134f3f89c16dee2d9ac9a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e/comments", "author": {"login": "aswaterman", "id": 1031106, "node_id": "MDQ6VXNlcjEwMzExMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1031106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aswaterman", "html_url": "https://github.com/aswaterman", "followers_url": "https://api.github.com/users/aswaterman/followers", "following_url": "https://api.github.com/users/aswaterman/following{/other_user}", "gists_url": "https://api.github.com/users/aswaterman/gists{/gist_id}", "starred_url": "https://api.github.com/users/aswaterman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aswaterman/subscriptions", "organizations_url": "https://api.github.com/users/aswaterman/orgs", "repos_url": "https://api.github.com/users/aswaterman/repos", "events_url": "https://api.github.com/users/aswaterman/events{/privacy}", "received_events_url": "https://api.github.com/users/aswaterman/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d327feb3d71cfc51c09ed375fa333ff552745f5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d327feb3d71cfc51c09ed375fa333ff552745f5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d327feb3d71cfc51c09ed375fa333ff552745f5d"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "285ac2014df87e429d82beff5301a0888105c094", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e", "patch": "@@ -1,3 +1,7 @@\n+2017-11-04  Andrew Waterman  <andrew@sifive.com>\n+\n+\t* config/riscv/riscv.h (SLOW_BYTE_ACCESS): Change to 1.\n+\n 2017-11-04  Daniel Santos  <daniel.santos@pobox.com>\n \n \tconfig/i386/i386.c (choose_basereg): Use optional scratch"}, {"sha": "a802a3f8cbbb49791ae9fc1d8df4f28ded41f92e", "filename": "gcc/config/riscv/riscv.h", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e/gcc%2Fconfig%2Friscv%2Friscv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e/gcc%2Fconfig%2Friscv%2Friscv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.h?ref=ecc82a8d0551e02afc9bb4d9dff450f6f0098b4e", "patch": "@@ -615,7 +615,12 @@ typedef struct {\n #define MOVE_MAX UNITS_PER_WORD\n #define MAX_MOVE_MAX 8\n \n-#define SLOW_BYTE_ACCESS 0\n+/* The SPARC port says:\n+   Nonzero if access to memory by bytes is slow and undesirable.\n+   For RISC chips, it means that access to memory by bytes is no\n+   better than access by words when possible, so grab a whole word\n+   and maybe make use of that.  */\n+#define SLOW_BYTE_ACCESS 1\n \n #define SHIFT_COUNT_TRUNCATED 1\n "}]}