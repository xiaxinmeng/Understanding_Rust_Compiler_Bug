{"sha": "a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZiNjVkZmYyZjlkZDlmODRjZWMzYzk3NjQ0YTI0NDhjMWZmN2ZlOQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1992-09-26T22:37:56Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1992-09-26T22:37:56Z"}, "message": "RISC-OS rev 5, DEC OSF/1 changes.\n\nFrom-SVN: r2256", "tree": {"sha": "e2b710d5855fd832ce4802d9b541e9e127e02349", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e2b710d5855fd832ce4802d9b541e9e127e02349"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/comments", "author": null, "committer": null, "parents": [{"sha": "fd3f89a9a2b60953c698eb5431716f2e3ad4db5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd3f89a9a2b60953c698eb5431716f2e3ad4db5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd3f89a9a2b60953c698eb5431716f2e3ad4db5a"}], "stats": {"total": 85, "additions": 37, "deletions": 48}, "files": [{"sha": "f640f94ffce520edbe4a8e1df401453021ad1555", "filename": "gcc/config.sub", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig.sub", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig.sub", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.sub?ref=a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "patch": "@@ -473,7 +473,7 @@ case $os in\n \t      | -vms* | -sco* | -esix* | -isc* | -aix* | -sunos* | -hpux* \\\n \t      | -unos* | -osf* | -luna* | -dgux* | -solari* | -sym* \\\n \t      | -amigados* | -msdos* | -newsos* | -unicos* | -aos* \\\n-\t      | -nindy* | -vxworks* | -ebmon* | -hds* | -m88kbcs*)\n+\t      | -nindy* | -vxworks* | -ebmon* | -hds* | -m88kbcs* | -riscos*)\n \t\t;;\n \t-osfrose*)\n \t\tos=-osfrose"}, {"sha": "d6a7f9a80fbe7882f997a888b30b11f14ce2daaa", "filename": "gcc/config/i386/osfrose.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fi386%2Fosfrose.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fi386%2Fosfrose.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fosfrose.h?ref=a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "patch": "@@ -113,6 +113,14 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #endif\n #define STARTFILE_SPEC \"%{pg:gcrt0.o%s}%{!pg:%{p:mcrt0.o%s}%{!p:crt0.o%s}}\"\n \n+#undef TARGET_VERSION_INTERNAL\n+#undef TARGET_VERSION\n+\n+#define I386_VERSION \" 80386, OSF/rose objects\"\n+\n+#define TARGET_VERSION_INTERNAL(STREAM) fputs (I386_VERSION, STREAM)\n+#define TARGET_VERSION TARGET_VERSION_INTERNAL (stderr)\n+\n #ifdef  MACHINE_TYPE\n #undef  MACHINE_TYPE\n #endif"}, {"sha": "fb48ce6c9f17f38756b723920131fe872c99ac46", "filename": "gcc/config/mips/dec-osf1.h", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fdec-osf1.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fdec-osf1.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fdec-osf1.h?ref=a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "patch": "@@ -27,10 +27,21 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n %{!mgas: \\\n \t%{EL} %{!EL: -EL} \\\n \t%{EB: %e-EB not supported} \\\n-\t%{mips1} %{mips2} %{mips3} \\\n-\t%{bestGnum} %{shared} %{non_shared}}\"\n+\t%{mips1} %{mips2} %{mips3} %{bestGnum} \\\n+\t%{shared} %{non_shared} %{!shared: %!{non_shared: -non_shared}}}\"\n \n #include \"decstatn.h\"\n \n+/* Specify size_t, ptrdiff_t, and wchar_t types.  */\n+#undef\tSIZE_TYPE\n+#undef\tPTRDIFF_TYPE\n+#undef\tWCHAR_TYPE\n+#undef\tWCHAR_TYPE_SIZE\n+\n+#define SIZE_TYPE\t\"long unsigned int\"\n+#define PTRDIFF_TYPE\t\"int\"\n+#define WCHAR_TYPE\t\"short unsigned int\"\n+#define WCHAR_TYPE_SIZE SHORT_TYPE_SIZE\n+\n /* turn off collect2 COFF support, since ldfcn now has elf declaration */\n #undef OBJECT_FORMAT_COFF"}, {"sha": "7252ce757c6e43ced0f3bdb37405651cbf2a04f2", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 1, "deletions": 41, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "patch": "@@ -2693,54 +2693,14 @@ trace (s, s1, s2)\n \f\n #ifdef SIGINFO\n \n-#include <sys/wait.h>\n-\n static void\n siginfo (signo)\n      int signo;\n {\n-  char select_pgrp[15];\n-  char *argv[4];\n-  pid_t pid;\n-  pid_t pgrp;\n-  int status;\n-\n   fprintf (stderr, \"compiling '%s' in '%s'\\n\",\n \t   (current_function_name != (char *)0) ? current_function_name : \"<toplevel>\",\n \t   (current_function_file != (char *)0) ? current_function_file : \"<no file>\");\n-\n-  pgrp = getpgrp ();\n-  if (pgrp != -1)\n-    sprintf (select_pgrp, \"-g%d\", pgrp);\n-  else\n-    strcpy (select_pgrp, \"-a\");\n-\n-  /* Spawn a ps to tell about current memory usage, etc. */\n-  argv[0] = \"ps\";\n-  argv[1] = \"-ouser,pid,pri,nice,usertime,systime,pcpu,cp,inblock,oublock,vsize,rss,pmem,ucomm\";\n-  argv[2] = select_pgrp;\n-  argv[3] = (char *)0;\n-\n-  pid = vfork ();\n-  if (pid == 0)\t\t\t/* child context */\n-    {\n-      execv (\"/usr/bin/ps\", argv);\n-      execv (\"/usr/sbin/ps\", argv);\n-      execvp (\"ps\", argv);\n-      perror (\"ps\");\n-      _exit (1);\n-    }\n-\n-  else if (pid > 0)\t\t/* parent context */\n-    {\n-      void (*sigint)(int)  = signal (SIGINT, SIG_IGN);\n-      void (*sigquit)(int) = signal (SIGQUIT, SIG_IGN);\n-\n-      (void) waitpid (pid, &status, 0);\n-\n-      (void) signal (SIGINT,  sigint);\n-      (void) signal (SIGQUIT, sigquit);\n-    }\n+  fflush (stderr);\n }\n #endif /* SIGINFO */\n "}, {"sha": "93baee59f17d7ee08ef023e8863864e6a9c6e6d6", "filename": "gcc/config/mips/osfrose.h", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fosfrose.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fosfrose.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fosfrose.h?ref=a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "patch": "@@ -1,5 +1,6 @@\n-/* Definitions of target machine for GNU compiler.  DECstation (OSF/1 with OSF/rose) version.\n-   Copyright (C) 1991 Free Software Foundation, Inc.\n+/* Definitions of target machine for GNU compiler.\n+   DECstation (OSF/1 reference port with OSF/rose) version.\n+   Copyright (C) 1991, 1992 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -73,7 +74,7 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #define STARTFILE_SPEC \"%{pg:gcrt0.o%s}%{!pg:%{p:mcrt0.o%s}%{!p:crt0.o%s}}\"\n \n-#define MACHINE_TYPE \"DECstation running OSF/1 with OSF/rose objects\"\n+#define MACHINE_TYPE \"DECstation with OSF/rose objects\"\n \n #ifndef MD_EXEC_PREFIX\n #define MD_EXEC_PREFIX\t\t\"/usr/ccs/gcc/\""}, {"sha": "2791917c878b3d63c8b80614e15a476545704c43", "filename": "gcc/config/mips/xm-mips.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fxm-mips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fconfig%2Fmips%2Fxm-mips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fxm-mips.h?ref=a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "patch": "@@ -74,7 +74,7 @@ extern char * alloca ();\n #endif /* not MIPS_OVERRIDE_ALLOCA */\n \n /* Say if we have vprintf.  BSD Mips targets probably don't have vfprintf.  */\n-#if defined(__OSF1__) ||  defined(__OSF__)\n+#if defined(__OSF1__) || defined(__OSF__) || defined(__osf__)\n #define HAVE_VFPRINTF\n #define HAVE_PUTENV\n "}, {"sha": "53320e3011e1faa3cb2c26f801a7a0483c648f6a", "filename": "gcc/mips-tfile.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fmips-tfile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9/gcc%2Fmips-tfile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmips-tfile.c?ref=a6b65dff2f9dd9f84cec3c97644a2448c1ff7fe9", "patch": "@@ -637,7 +637,11 @@ typedef char *CPTR_T;\n    the fact that including stddef.h gets you GCC's version\n    instead of the standard one it's not worth it to fix it.  */\n \n+#if defined(__OSF1__) || defined(__OSF__) || defined(__osf__)\n+#define Size_t\t\tlong unsigned int\n+#else\n #define Size_t\t\tunsigned int\n+#endif\n #define Ptrdiff_t\tint\n \n /* The following might be called from obstack or malloc,\n@@ -655,8 +659,13 @@ extern void\txfree\t\t__proto((PTR_T));\n extern void\tfatal();\t/* can't use prototypes here */\n extern void\terror();\n \n+#if !defined(__OSF1__) && !defined(__OSF__) && !defined(__osf__)\n extern char *index ();\n extern char *rindex ();\n+#else\n+#undef rindex\n+#undef index\n+#endif\n \f\n #ifndef MIPS_DEBUGGING_INFO\n "}]}