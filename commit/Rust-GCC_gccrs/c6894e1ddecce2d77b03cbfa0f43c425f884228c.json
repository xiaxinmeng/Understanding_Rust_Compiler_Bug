{"sha": "c6894e1ddecce2d77b03cbfa0f43c425f884228c", "node_id": "C_kwDOANBUbNoAKGM2ODk0ZTFkZGVjY2UyZDc3YjAzY2JmYTBmNDNjNDI1Zjg4NDIyOGM", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-07-25T13:57:32Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-07-28T10:38:09Z"}, "message": "contrib: use sphinx-build from a venv\n\nmaintainer-scripts/ChangeLog:\n\n\t* update_web_docs_git: Use sphinx-build from a venv so that\n\twe can use a recent version.", "tree": {"sha": "262af1882c5db2141c9b3c529db8b570bfc72212", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/262af1882c5db2141c9b3c529db8b570bfc72212"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6894e1ddecce2d77b03cbfa0f43c425f884228c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6894e1ddecce2d77b03cbfa0f43c425f884228c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6894e1ddecce2d77b03cbfa0f43c425f884228c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6894e1ddecce2d77b03cbfa0f43c425f884228c/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "75a392d0317ee0a5af1fdcb0669322df96b34f80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75a392d0317ee0a5af1fdcb0669322df96b34f80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75a392d0317ee0a5af1fdcb0669322df96b34f80"}], "stats": {"total": 21, "additions": 6, "deletions": 15}, "files": [{"sha": "6c38e213562dfd448da15202b333d4ca1f856253", "filename": "maintainer-scripts/update_web_docs_git", "status": "modified", "additions": 6, "deletions": 15, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6894e1ddecce2d77b03cbfa0f43c425f884228c/maintainer-scripts%2Fupdate_web_docs_git", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6894e1ddecce2d77b03cbfa0f43c425f884228c/maintainer-scripts%2Fupdate_web_docs_git", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fupdate_web_docs_git?ref=c6894e1ddecce2d77b03cbfa0f43c425f884228c", "patch": "@@ -176,23 +176,14 @@ for file in $MANUALS; do\n   fi\n done\n \n-# The jit is a special-case, using sphinx rather than texinfo.\n-# Specifically, the jit docs need sphinx 1.0 or later.\n+# The jit is a special-case, using Sphinx rather than texinfo.\n+# Specifically, the jit docs need Sphinx 3.0 or later.\n #\n-# The jit/docs Makefile uses the executable $(SPHINXBUILD),\n-# defaulting to \"sphinx-build\".\n-#\n-# sphinx is packaged in Fedora and EPEL 6 within \"python-sphinx\",\n-# in RHEL 8 within \"python3-sphinx\",\n-# and in openSUSE within \"python-Sphinx\".\n-#\n-# For EPEL6, python-sphinx is sphinx 0.6.6, which is missing various\n-# directives (e.g. \":c:macro:\"), so we need the variant\n-# python-sphinx10 package.  The latter installs its executable as\n-#   /usr/bin/sphinx-1.0-build\n-# so we needed to override SPHINXBUILD with this when invoking \"make\".\n+# Use the Sphinx installed in a virtual environment so that\n+# we don't depend on a system package.\n+\n pushd gcc/gcc/jit/docs\n-make html || true\n+make html SPHINXBUILD=/home/gccadmin/venv/bin/sphinx-build || true\n popd\n cp -a gcc/gcc/jit/docs/_build/html jit\n mkdir -p $DOCSDIR/jit"}]}