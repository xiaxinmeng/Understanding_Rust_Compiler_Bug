{"sha": "33502a3a8ce760840d3e71dfe0dab9910514327e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzM1MDJhM2E4Y2U3NjA4NDBkM2U3MWRmZTBkYWI5OTEwNTE0MzI3ZQ==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2020-05-30T18:02:52Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-07-10T09:16:23Z"}, "message": "[Ada] Fix detection of actual parameters for procedure calls\n\ngcc/ada/\n\n\t* sem_ch8.adb (Is_Actual_Parameter): Fix processing when parent\n\tis a procedure call statement; extend comment.", "tree": {"sha": "1bfe298fd7d0ff4ab0f120f46ab9df0bac2d7f92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bfe298fd7d0ff4ab0f120f46ab9df0bac2d7f92"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33502a3a8ce760840d3e71dfe0dab9910514327e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33502a3a8ce760840d3e71dfe0dab9910514327e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33502a3a8ce760840d3e71dfe0dab9910514327e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33502a3a8ce760840d3e71dfe0dab9910514327e/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "619395467573f4cc869e441d99b112f5c1df9bbe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/619395467573f4cc869e441d99b112f5c1df9bbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/619395467573f4cc869e441d99b112f5c1df9bbe"}], "stats": {"total": 34, "additions": 24, "deletions": 10}, "files": [{"sha": "08414b2170c21ac457e2fd867f853a234ab304c9", "filename": "gcc/ada/sem_ch8.adb", "status": "modified", "additions": 24, "deletions": 10, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33502a3a8ce760840d3e71dfe0dab9910514327e/gcc%2Fada%2Fsem_ch8.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33502a3a8ce760840d3e71dfe0dab9910514327e/gcc%2Fada%2Fsem_ch8.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch8.adb?ref=33502a3a8ce760840d3e71dfe0dab9910514327e", "patch": "@@ -5020,7 +5020,12 @@ package body Sem_Ch8 is\n       --  not know what procedure is being called if the procedure might be\n       --  overloaded, so it is premature to go setting referenced flags or\n       --  making calls to Generate_Reference. We will wait till Resolve_Actuals\n-      --  for that processing\n+      --  for that processing.\n+      --  Note: there is a similar routine Sem_Util.Is_Actual_Parameter, but\n+      --  it works for both function and procedure calls, while here we are\n+      --  only concerned with procedure calls (and with entry calls as well,\n+      --  but they are parsed as procedure calls and only later rewritten to\n+      --  entry calls).\n \n       function Known_But_Invisible (E : Entity_Id) return Boolean;\n       --  This function determines whether a reference to the entity E, which\n@@ -5141,15 +5146,24 @@ package body Sem_Ch8 is\n \n       function Is_Actual_Parameter return Boolean is\n       begin\n-         return\n-           Nkind (N) = N_Identifier\n-             and then\n-               (Nkind (Parent (N)) = N_Procedure_Call_Statement\n-                 or else\n-                   (Nkind (Parent (N)) = N_Parameter_Association\n-                     and then N = Explicit_Actual_Parameter (Parent (N))\n-                     and then Nkind (Parent (Parent (N))) =\n-                                          N_Procedure_Call_Statement));\n+         if Nkind (N) = N_Identifier then\n+            case Nkind (Parent (N)) is\n+               when N_Procedure_Call_Statement =>\n+                  return Is_List_Member (N)\n+                    and then List_Containing (N) =\n+                      Parameter_Associations (Parent (N));\n+\n+               when N_Parameter_Association =>\n+                  return N = Explicit_Actual_Parameter (Parent (N))\n+                    and then Nkind (Parent (Parent (N))) =\n+                               N_Procedure_Call_Statement;\n+\n+               when others =>\n+                  return False;\n+            end case;\n+         else\n+            return False;\n+         end if;\n       end Is_Actual_Parameter;\n \n       -------------------------"}]}