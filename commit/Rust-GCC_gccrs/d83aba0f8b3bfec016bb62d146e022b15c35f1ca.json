{"sha": "d83aba0f8b3bfec016bb62d146e022b15c35f1ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDgzYWJhMGY4YjNiZmVjMDE2YmI2MmQxNDZlMDIyYjE1YzM1ZjFjYQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-05-17T06:50:51Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-05-17T06:50:51Z"}, "message": "optabs.c (expand_unop): Try implementing negation using subtraction from zero.\n\n\t* optabs.c (expand_unop): Try implementing negation using subtraction\n\tfrom zero.\n\nFrom-SVN: r81933", "tree": {"sha": "131eefbed273dab9a9fd55429e994aa6633bb521", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/131eefbed273dab9a9fd55429e994aa6633bb521"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d83aba0f8b3bfec016bb62d146e022b15c35f1ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d83aba0f8b3bfec016bb62d146e022b15c35f1ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d83aba0f8b3bfec016bb62d146e022b15c35f1ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d83aba0f8b3bfec016bb62d146e022b15c35f1ca/comments", "author": null, "committer": null, "parents": [{"sha": "15581992c8bbae7f8b4b75e088bcd61edc2355f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15581992c8bbae7f8b4b75e088bcd61edc2355f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15581992c8bbae7f8b4b75e088bcd61edc2355f3"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "80bbf2a57ada725aa7f45733f200d5e7f82e8244", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d83aba0f8b3bfec016bb62d146e022b15c35f1ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d83aba0f8b3bfec016bb62d146e022b15c35f1ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d83aba0f8b3bfec016bb62d146e022b15c35f1ca", "patch": "@@ -1,3 +1,8 @@\n+2004-05-17  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* optabs.c (expand_unop): Try implementing negation using subtraction\n+\tfrom zero.\n+\n 2004-05-16  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \t* pa.md:  Fix typo from last change.  Remove DFmode move to and from"}, {"sha": "562eb2902f9b21d0e48829e94f1eac7255a48be3", "filename": "gcc/optabs.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d83aba0f8b3bfec016bb62d146e022b15c35f1ca/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d83aba0f8b3bfec016bb62d146e022b15c35f1ca/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=d83aba0f8b3bfec016bb62d146e022b15c35f1ca", "patch": "@@ -2737,6 +2737,15 @@ expand_unop (enum machine_mode mode, optab unoptab, rtx op0, rtx target,\n \treturn temp;\n     }\n \n+  /* If there is no negation pattern, try subtracting from zero.  */\n+  if (unoptab == neg_optab && class == MODE_INT)\n+    {\n+      temp = expand_binop (mode, sub_optab, CONST0_RTX (mode), op0,\n+                           target, unsignedp, OPTAB_DIRECT);\n+      if (temp)\n+\treturn temp;\n+    }\n+\n  try_libcall:\n   /* Now try a library call in this mode.  */\n   if (unoptab->handlers[(int) mode].libfunc)"}]}