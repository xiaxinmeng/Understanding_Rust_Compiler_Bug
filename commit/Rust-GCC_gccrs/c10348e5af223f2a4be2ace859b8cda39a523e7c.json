{"sha": "c10348e5af223f2a4be2ace859b8cda39a523e7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzEwMzQ4ZTVhZjIyM2YyYTRiZTJhY2U4NTliOGNkYTM5YTUyM2U3Yw==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2009-06-05T06:17:51Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2009-06-05T06:17:51Z"}, "message": "tree-nested.c (finalize_nesting_tree_1): Declare the frame_decl in the binding tree.\n\n* tree-nested.c (finalize_nesting_tree_1): Declare the\nframe_decl in the binding tree.\n\nFrom-SVN: r148198", "tree": {"sha": "b2ce09ca844dc9b449fab42c7a8e53e9c493be0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2ce09ca844dc9b449fab42c7a8e53e9c493be0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c10348e5af223f2a4be2ace859b8cda39a523e7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c10348e5af223f2a4be2ace859b8cda39a523e7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c10348e5af223f2a4be2ace859b8cda39a523e7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c10348e5af223f2a4be2ace859b8cda39a523e7c/comments", "author": null, "committer": null, "parents": [{"sha": "d560566ab0860d1111cde7f89362a88649bc7ed1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d560566ab0860d1111cde7f89362a88649bc7ed1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d560566ab0860d1111cde7f89362a88649bc7ed1"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "5dc609ea6c296f85aa46eb9cd6a9e1daa1f69b82", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c10348e5af223f2a4be2ace859b8cda39a523e7c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c10348e5af223f2a4be2ace859b8cda39a523e7c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c10348e5af223f2a4be2ace859b8cda39a523e7c", "patch": "@@ -1,3 +1,8 @@\n+2009-06-05  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* tree-nested.c (finalize_nesting_tree_1): Declare the\n+\tframe_decl in the binding tree.\n+\n 2009-06-04  Cary Coutant  <ccoutant@google.com>\n \n \t* basic-block.h (struct basic_block_def): Add discriminator field."}, {"sha": "df5577091a0429ebef2baae0f297a7961c7c1239", "filename": "gcc/tree-nested.c", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c10348e5af223f2a4be2ace859b8cda39a523e7c/gcc%2Ftree-nested.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c10348e5af223f2a4be2ace859b8cda39a523e7c/gcc%2Ftree-nested.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-nested.c?ref=c10348e5af223f2a4be2ace859b8cda39a523e7c", "patch": "@@ -1,5 +1,5 @@\n /* Nested function decomposition for GIMPLE.\n-   Copyright (C) 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.\n+   Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009 Free Software Foundation, Inc.\n \n    This file is part of GCC.\n \n@@ -2179,10 +2179,26 @@ finalize_nesting_tree_1 (struct nesting_info *root)\n       /* In some cases the frame type will trigger the -Wpadded warning.\n \t This is not helpful; suppress it. */\n       int save_warn_padded = warn_padded;\n+      tree *adjust;\n+\n       warn_padded = 0;\n       layout_type (root->frame_type);\n       warn_padded = save_warn_padded;\n       layout_decl (root->frame_decl, 0);\n+\n+      /* Remove root->frame_decl from root->new_local_var_chain, so\n+\t that we can declare it also in the lexical blocks, which\n+\t helps ensure virtual regs that end up appearing in its RTL\n+\t expression get substituted in instantiate_virtual_regs().  */\n+      for (adjust = &root->new_local_var_chain;\n+\t   *adjust != root->frame_decl;\n+\t   adjust = &TREE_CHAIN (*adjust))\n+\tgcc_assert (TREE_CHAIN (*adjust));\n+      *adjust = TREE_CHAIN (*adjust);\n+\n+      TREE_CHAIN (root->frame_decl) = NULL_TREE;\n+      declare_vars (root->frame_decl,\n+\t\t    gimple_seq_first_stmt (gimple_body (context)), true);\n     }\n \n   /* If any parameters were referenced non-locally, then we need to "}]}