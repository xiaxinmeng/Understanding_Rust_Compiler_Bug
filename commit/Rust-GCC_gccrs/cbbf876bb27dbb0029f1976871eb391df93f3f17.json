{"sha": "cbbf876bb27dbb0029f1976871eb391df93f3f17", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JiZjg3NmJiMjdkYmIwMDI5ZjE5NzY4NzFlYjM5MWRmOTNmM2YxNw==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-03-22T00:15:53Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-03-22T00:15:53Z"}, "message": "fixproto: Define NULL and size_t in generated stdlib.h and unistd.h.\n\n\t* fixproto: Define NULL and size_t in generated stdlib.h and\n\tunistd.h.  Kill unused required_stdlib_h, required_unistd_h.\n\tRearrange file generation loop for readability.  Generate time.h,\n\tstring.h if missing.\n\t* tsystem.h: Include <string.h>, <time.h> unconditionally.\n\t* config.gcc: Blow away POSIX defines.\n\nFrom-SVN: r64690", "tree": {"sha": "e13defe058f91208c3aa103fb0a8832f989ef1a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e13defe058f91208c3aa103fb0a8832f989ef1a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cbbf876bb27dbb0029f1976871eb391df93f3f17", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbbf876bb27dbb0029f1976871eb391df93f3f17", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbbf876bb27dbb0029f1976871eb391df93f3f17", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbbf876bb27dbb0029f1976871eb391df93f3f17/comments", "author": null, "committer": null, "parents": [{"sha": "84fcbe0aef414f9a4e7cf180e4dc258e69ba028e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84fcbe0aef414f9a4e7cf180e4dc258e69ba028e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84fcbe0aef414f9a4e7cf180e4dc258e69ba028e"}], "stats": {"total": 186, "additions": 54, "deletions": 132}, "files": [{"sha": "2d8245c01a54ffa29ce16401efad34e61628a9db", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cbbf876bb27dbb0029f1976871eb391df93f3f17", "patch": "@@ -1,3 +1,12 @@\n+2003-03-21  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* fixproto: Define NULL and size_t in generated stdlib.h and\n+\tunistd.h.  Kill unused required_stdlib_h, required_unistd_h.\n+\tRearrange file generation loop for readability.  Generate time.h,\n+\tstring.h if missing.\n+\t* tsystem.h: Include <string.h>, <time.h> unconditionally.\n+\t* config.gcc: Blow away POSIX defines.\n+\n 2003-03-22  Stephane Carrez  <stcarrez@nerim.fr>\n \n \t* config/m68hc11/m68hc11.md (\"call_value\"): Fix trap check."}, {"sha": "d8354d0290b1cbbc31f77d7a37854932ffbf4212", "filename": "gcc/config.gcc", "status": "modified", "additions": 6, "deletions": 105, "changes": 111, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=cbbf876bb27dbb0029f1976871eb391df93f3f17", "patch": "@@ -347,7 +347,6 @@ esac\n # Common parts for widely ported systems.\n case $machine in\n *-*-linux*)\n-\txm_defines=POSIX\n \tcase $machine in\n \t*-*-linux*ecoff* | *-*-linux*libc1* | *-*-linux*oldld* | *-*-linux*aout*)\n \t\t;;\n@@ -365,7 +364,6 @@ case $machine in\n \t# On the Hurd, the setup is just about the same on\n \t# each different CPU.  The specific machines that we\n \t# support are matched above and just set $cpu_type.\n-\txm_defines=POSIX\n \ttm_file=\"${cpu_type}/gnu.h\"\n \textra_parts=\"crtbegin.o crtend.o crtbeginS.o crtendS.o crtbeginT.o\"\n \t# GNU always uses ELF.\n@@ -388,15 +386,13 @@ case $machine in\n *-*-openbsd*)\n \ttm_file=${cpu_type}/openbsd.h\n \ttmake_file=\"t-libc-ok t-openbsd t-libgcc-pic\"\n-\txm_defines=POSIX\n \tif test x$enable_threads = xyes; then\n \t\tthread_file='posix'\n \t\ttmake_file=\"${tmake_file} t-openbsd-thread\"\n \tfi\n \t;;\n *-*-netbsd*)\n \ttmake_file=\"t-slibgcc-elf-ver t-libc-ok t-netbsd\"\n-\txm_defines=POSIX\n \tgas=yes\n \tgnu_ld=yes\n \n@@ -463,7 +459,6 @@ case $machine in\n \tesac\n \ttmake_file=\"t-slibgcc-elf-ver t-freebsd\"\n \txmake_file=none\n-\txm_defines=POSIX\n \tcase x${enable_threads} in\n \txno) fbsd_tm_file=\"${fbsd_tm_file} freebsd-nthr.h\";;\n \tx | xyes | xpthreads | xposix)\n@@ -497,7 +492,6 @@ case $machine in\n \ttm_file=\"${tm_file} elfos.h svr4.h vxworks.h\"\n \tthread_file='vxworks'\n \tuse_collect2=yes\n-\txm_defines=POSIX\n \t;;\n esac\n \n@@ -533,7 +527,6 @@ alpha-*-interix)\n \t# GAS + IEEE_CONFORMANT\n \ttarget_cpu_default=\"MASK_GAS|MASK_IEEE_CONFORMANT\"\n \n-\txm_defines=POSIX\n \ttmake_file=\"alpha/t-alpha t-interix alpha/t-interix alpha/t-ieee\"\n \tif test x$enable_threads = xyes ; then\n \t\tthread_file='posix'\n@@ -587,7 +580,6 @@ alpha*-*-openbsd*)\n \t;;\n \n alpha*-dec-osf[45]*)\n-\txm_defines=POSIX\n \tif test x$stabs = xyes\n \tthen\n \t\ttm_file=\"${tm_file} dbx.h\"\n@@ -618,7 +610,6 @@ alpha*-dec-osf[45]*)\n \tesac\n \t;;\n alpha64-dec-*vms*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} alpha/vms.h alpha/vms64.h\"\n \txm_file=\"alpha/xm-vms.h\"\n \ttmake_file=\"alpha/t-alpha alpha/t-vms alpha/t-vms64 alpha/t-ieee\"\n@@ -636,7 +627,6 @@ alpha64-dec-*vms*)\n \tlocal_prefix=/gnu\n \t;;\n alpha*-dec-*vms*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} alpha/vms.h\"\n \txm_file=alpha/xm-vms.h\n \ttmake_file=\"alpha/t-alpha alpha/t-vms alpha/t-ieee\"\n@@ -707,7 +697,6 @@ arm*-*-ecos-elf)\n \ttmake_file=arm/t-arm-elf\n \t;;\n arm*-*-rtems*)\n-\txm_defines=POSIX\n \ttm_file=\"dbxelf.h elfos.h arm/unknown-elf.h arm/elf.h arm/aout.h arm/arm.h arm/rtems-elf.h rtems.h\"\n \ttmake_file=\"arm/t-arm-elf t-rtems\"\n \tif test x$enable_threads = xyes; then\n@@ -734,7 +723,6 @@ arm-*-pe*)\n avr-*-*)\n \t;;\n c4x-*-rtems* | tic4x-*-rtems*)\n-\txm_defines=POSIX\n \ttmake_file=\"c4x/t-c4x t-rtems\"\n \ttm_file=\"c4x/c4x.h c4x/rtems.h rtems.h\"\n \tif test x$enable_threads = xyes; then\n@@ -777,7 +765,6 @@ frv-*-elf)\n \ttmake_file=frv/t-frv\n \t;;\n h8300-*-rtems*)\n-\txm_defines=POSIX\n \ttmake_file=\"h8300/t-h8300 t-rtems\"\n \ttm_file=\"h8300/h8300.h h8300/rtems.h rtems.h\"\n \tif test x$enable_threads = xyes; then\n@@ -822,7 +809,6 @@ hppa1.1-*-osf*)\n \tuse_collect2=yes\n \t;;\n hppa1.1-*-rtems*)\n-\txm_defines=POSIX\n \ttarget_cpu_default=\"(MASK_JUMP_IN_DELAY | MASK_PORTABLE_RUNTIME | MASK_GAS | MASK_NO_SPACE_REGS | MASK_SOFT_FLOAT)\"\n \ttm_file=\"${tm_file} pa/pa32-regs.h dbxelf.h elfos.h pa/elf.h pa/pa-pro-end.h libgloss.h pa/rtems.h rtems.h\"\n \ttmake_file=\"pa/t-bsd pa/t-pro t-rtems\"\n@@ -852,14 +838,12 @@ hppa1.0-*-bsd*)\n \t;;\n hppa1.0-*-hpux7*)\n \ttm_file=\"pa/pa-oldas.h ${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux7.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tinstall_headers_dir=install-headers-cpio\n \tuse_collect2=yes\n \t;;\n hppa1.0-*-hpux8.0[0-2]*)\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tif test x$gas != xyes\n \tthen\n@@ -871,7 +855,6 @@ hppa1.0-*-hpux8.0[0-2]*)\n hppa1.1-*-hpux8.0[0-2]*)\n \ttarget_cpu_default=\"MASK_PA_11\"\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tif test x$gas != xyes\n \tthen\n@@ -883,22 +866,19 @@ hppa1.1-*-hpux8.0[0-2]*)\n hppa1.1-*-hpux8*)\n \ttarget_cpu_default=\"MASK_PA_11\"\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tinstall_headers_dir=install-headers-cpio\n \tuse_collect2=yes\n \t;;\n hppa1.0-*-hpux8*)\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tinstall_headers_dir=install-headers-cpio\n \tuse_collect2=yes\n \t;;\n hppa1.1-*-hpux10* | hppa2*-*-hpux10*)\n \ttarget_cpu_default=\"MASK_PA_11\"\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/long_double.h pa/som.h pa/pa-hpux.h pa/pa-hpux10.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"pa/t-pa pa/t-pa-hpux pa/t-hpux-shlib\"\n \txmake_file=\"pa/x-ada\"\n \tif test x$enable_threads = x; then\n@@ -914,7 +894,6 @@ hppa1.1-*-hpux10* | hppa2*-*-hpux10*)\n \t;;\n hppa1.0-*-hpux10*)\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/long_double.h pa/som.h pa/pa-hpux.h pa/pa-hpux10.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"pa/t-pa pa/t-pa-hpux pa/t-hpux-shlib\"\n \txmake_file=\"pa/x-ada\"\n \tif test x$enable_threads = x; then\n@@ -929,7 +908,6 @@ hppa1.0-*-hpux10*)\n \tuse_collect2=yes\n \t;;\n hppa*64*-*-hpux11*)\n-\txm_defines=POSIX\n \tif test x$gas = xyes\n \tthen\n \t\ttm_file=\"pa/pa64-start.h ${tm_file} dbxelf.h elfos.h  \\\n@@ -961,7 +939,6 @@ hppa*64*-*-hpux11*)\n hppa1.1-*-hpux11* | hppa2*-*-hpux11*)\n \ttarget_cpu_default=\"MASK_PA_11\"\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/long_double.h pa/som.h pa/pa-hpux.h pa/pa-hpux11.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"pa/t-pa pa/t-pa-hpux pa/t-hpux-shlib\"\n \txmake_file=\"pa/x-ada\"\n #\tif test x$enable_threads = x; then\n@@ -976,7 +953,6 @@ hppa1.1-*-hpux11* | hppa2*-*-hpux11*)\n \t;;\n hppa1.0-*-hpux11*)\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/long_double.h pa/som.h pa/pa-hpux.h pa/pa-hpux11.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"pa/t-pa pa/t-pa-hpux pa/t-hpux-shlib\"\n \txmake_file=\"pa/x-ada\"\n #\tif test x$enable_threads = x; then\n@@ -992,29 +968,25 @@ hppa1.0-*-hpux11*)\n hppa1.1-*-hpux* | hppa2*-*-hpux*)\n \ttarget_cpu_default=\"MASK_PA_11\"\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h pa/pa-hpux9.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tinstall_headers_dir=install-headers-cpio\n \tuse_collect2=yes\n \t;;\n hppa1.0-*-hpux*)\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h pa/pa-hpux9.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tinstall_headers_dir=install-headers-cpio\n \tuse_collect2=yes\n \t;;\n hppa1.1-*-hiux* | hppa2*-*-hiux*)\n \ttarget_cpu_default=\"MASK_PA_11\"\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h pa/pa-hiux.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tinstall_headers_dir=install-headers-cpio\n \tuse_collect2=yes\n \t;;\n hppa1.0-*-hiux*)\n \ttm_file=\"${tm_file} pa/pa32-regs.h pa/som.h pa/pa-hpux.h pa/pa-hiux.h\"\n-\txm_defines=POSIX\n \ttmake_file=pa/t-pa-hpux\n \tinstall_headers_dir=install-headers-cpio\n \tuse_collect2=yes\n@@ -1035,14 +1007,14 @@ hppa*-*-mpeix*)\n \tuse_collect2=yes\n \t;;\n i370-*-opened*)\t\t\t # IBM 360/370/390 Architecture\n-\txm_defines='POSIX FATAL_EXIT_CODE=12'\n+\txm_defines='FATAL_EXIT_CODE=12'\n \ttm_file=i370/oe.h\n \ttmake_file=\"i370/t-oe i370/t-i370\"\n \tc_target_objs=\"i370-c.o\"\n \tcxx_target_objs=\"i370-c.o\"\n \t;;\n i370-*-mvs*)\n-\txm_defines='POSIX FATAL_EXIT_CODE=12'\n+\txm_defines='FATAL_EXIT_CODE=12'\n \ttm_file=i370/mvs.h\n \ttmake_file=\"i370/t-i370\"\n \tc_target_objs=\"i370-c.o\"\n@@ -1058,12 +1030,11 @@ i[34567]86-*-darwin*)\n \ttm_file=\"${tm_file} i386/darwin.h\"\n \t;;\n i[34567]86-*-elf*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h i386/i386elf.h\"\n \ttmake_file=\"i386/t-i386elf t-svr4\"\n \t;;\n i[34567]86-ncr-sysv4*)\t\t# NCR 3000 - ix86 running system V.4\n-\txm_defines=\"POSIX SMALL_ARG_MAX\"\n+\txm_defines=\"SMALL_ARG_MAX\"\n \tif test x$stabs = xyes -a x$gas = xyes\n \tthen\n \t\ttm_file=i386/sysv4gdb.h\n@@ -1082,7 +1053,7 @@ i[34567]86-sequent-ptx4* | i[34567]86-sequent-sysv4*)\n \tthen\n \t\ttm_file=\"${tm_file} usegas.h\"\n \tfi\n-\txm_defines=\"POSIX SMALL_ARG_MAX\"\n+\txm_defines=\"SMALL_ARG_MAX\"\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h ptx4.h i386/ptx4-i.h\"\n \ttmake_file=t-svr4\n \textra_parts=\"crtbegin.o crtend.o\"\n@@ -1096,7 +1067,6 @@ i[34567]86-*-aout*)\n \ttm_file=\"${tm_file} i386/unix.h i386/bsd.h i386/gas.h i386/gstabs.h i386/i386-aout.h\"\n \t;;\n i[34567]86-*-beoself* | i[34567]86-*-beos*)\n-\txm_defines=POSIX\n \ttmake_file='i386/t-beos i386/t-crtpic'\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h i386/beos-elf.h\"\n \textra_parts='crtbegin.o crtend.o'\n@@ -1208,7 +1178,6 @@ i[34567]86-go32-rtems* | i[34567]86-*-rtemscoff*)\n \texit 1\n \t;;\n i[34567]86-*-rtems*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h i386/i386elf.h i386/rtemself.h rtems.h\"\n \textra_parts=\"crtbegin.o crtend.o crti.o crtn.o\"\n \ttmake_file=\"i386/t-rtems-i386 i386/t-crtstuff t-rtems\"\n@@ -1217,7 +1186,6 @@ i[34567]86-*-rtems*)\n \tfi\n \t;;\n i[34567]86-*-sco3.2v5*)\t# 80386 running SCO Open Server 5\n-\txm_defines=POSIX\n \tinstall_headers_dir=install-headers-cpio\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h i386/sco5.h\"\n \tif test x$gas = xyes\n@@ -1230,7 +1198,7 @@ i[34567]86-*-sco3.2v5*)\t# 80386 running SCO Open Server 5\n \textra_parts=\"crti.o crtbegin.o crtend.o crtbeginS.o crtendS.o\"\n \t;;\n i[34567]86-*-solaris2*)\n-\txm_defines=\"POSIX SMALL_ARG_MAX\"\n+\txm_defines=\"SMALL_ARG_MAX\"\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h i386/sysv4.h sol2.h i386/sol2.h\"\n \ttmake_file=\"i386/t-sol2 t-svr4\"\n \tif test x$gnu_ld = xyes; then\n@@ -1254,7 +1222,6 @@ i[34567]86-*-solaris2*)\n \tfi\n \t;;\n i[34567]86-*-sysv5*)           # Intel x86 on System V Release 5\n-       xm_defines=POSIX\n        tm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h i386/sysv4.h i386/sysv5.h\"\n        if test x$stabs = xyes\n        then\n@@ -1267,7 +1234,7 @@ i[34567]86-*-sysv5*)           # Intel x86 on System V Release 5\n        fi\n        ;;\n i[34567]86-*-sysv4*)\t\t# Intel 80386's running system V.4\n-\txm_defines=\"POSIX SMALL_ARG_MAX\"\n+\txm_defines=\"SMALL_ARG_MAX\"\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h i386/sysv4.h i386/sysv4-cpp.h\"\n \tif test x$stabs = xyes\n \tthen\n@@ -1277,14 +1244,12 @@ i[34567]86-*-sysv4*)\t\t# Intel 80386's running system V.4\n \textra_parts=\"crtbegin.o crtend.o\"\n \t;;\n i[34567]86-*-udk*)      # Intel x86 on SCO UW/OSR5 Dev Kit\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h i386/sysv4.h i386/sysv5.h i386/udk.h\"\n \ttmake_file=\"i386/t-crtpic i386/t-udk t-svr4\"\n \textra_parts=\"crtbegin.o crtend.o\"\n \tinstall_headers_dir=install-headers-cpio\n \t;;\n i[34567]86-*-sysv*)\t\t# Intel 80386's running system V\n-\txm_defines=POSIX\n \tif test x$gas = xyes\n \tthen\n \t\tif test x$stabs = xyes\n@@ -1309,7 +1274,6 @@ i386-*-vsta)\t\t\t# Intel 80386's running VSTa kernel\n \ttm_file=\"${tm_file} i386/vsta.h\"\n \t;;\n i[34567]86-*-win32)\n-\txm_defines=POSIX\n \txm_file=i386/xm-cygwin.h\n \ttmake_file=i386/t-cygwin\n \ttm_file=\"${tm_file} i386/win32.h\"\n@@ -1321,7 +1285,6 @@ i[34567]86-*-win32)\n \t;;\n i[34567]86-*-pe | i[34567]86-*-cygwin*)\n \ttm_file=\"${tm_file} i386/unix.h i386/bsd.h i386/gas.h dbxcoff.h i386/cygming.h i386/cygwin.h\"\n-\txm_defines=POSIX\n \txm_file=i386/xm-cygwin.h\n \ttmake_file=\"i386/t-cygming i386/t-cygwin\"\n \tfloat_format=i386\n@@ -1335,7 +1298,6 @@ i[34567]86-*-pe | i[34567]86-*-cygwin*)\n \t;;\n i[34567]86-*-mingw32*)\n \ttm_file=\"${tm_file} i386/unix.h i386/bsd.h i386/gas.h dbxcoff.h i386/cygming.h i386/mingw32.h\"\n-\txm_defines=POSIX\n \txm_file=i386/xm-mingw32.h\n \ttmake_file=\"i386/t-cygming i386/t-mingw32\"\n \tfloat_format=i386\n@@ -1363,7 +1325,6 @@ i[34567]86-*-uwin*)\n \t;;\n i[34567]86-*-interix3*)\n \ttm_file=\"${tm_file} i386/unix.h i386/bsd.h i386/gas.h i386/i386-interix.h i386/i386-interix3.h interix.h interix3.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"t-interix i386/t-interix\"\n \textra_objs=winnt.o\n \txmake_file=\"x-interix\"\n@@ -1376,7 +1337,6 @@ i[34567]86-*-interix3*)\n \t;;\n i[34567]86-*-interix*)\n \ttm_file=\"${tm_file} i386/unix.h i386/bsd.h i386/gas.h i386/i386-interix.h interix.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"t-interix i386/t-interix\"\n \textra_objs=winnt.o\n \tif test x$enable_threads = xyes ; then\n@@ -1393,7 +1353,6 @@ i960-*-coff*)\n \tcxx_target_objs=\"i960-c.o\"\n \t;;\n i960-*-rtems)\n-\txm_defines=POSIX\n \ttmake_file=\"i960/t-960bare t-rtems\"\n \ttm_file=\"${tm_file} dbxcoff.h i960/i960-coff.h i960/rtems.h rtems.h\"\n \tif test x$enable_threads = xyes; then\n@@ -1474,7 +1433,6 @@ m68000-hp-bsd*)\t\t\t# HP 9000/200 running BSD\n \tuse_collect2=yes\n \t;;\n m68000-hp-hpux*)\t\t# HP 9000 series 300\n-\txm_defines=POSIX\n \tif test x$gas = xyes\n \tthen\n \t\ttm_file=m68k/hp310g.h\n@@ -1494,7 +1452,6 @@ m68000-sun-sunos4*)\n \tuse_collect2=yes\n \t;;\n m68000-att-sysv*)\n-\txm_defines=POSIX\n \tif test x$gas = xyes\n \tthen\n \t\ttm_file=m68k/3b1g.h\n@@ -1505,7 +1462,6 @@ m68000-att-sysv*)\n \t;;\n m68k-atari-sysv4*)              # Atari variant of V.4.\n \ttm_file=m68k/atari.h\n-\txm_defines=POSIX\n \ttmake_file=t-svr4\n \textra_parts=\"crtbegin.o crtend.o\"\n \t;;\n@@ -1516,7 +1472,6 @@ m68k-apollo-sysv* | m68k-bull-sysv*)\n \t;;\n m68k-motorola-sysv*)\n \ttm_file=m68k/mot3300.h\n-\txm_defines=POSIX\n \tif test x$gas = xyes\n \tthen\n \t\tif test x$gnu_ld = xyes\n@@ -1540,26 +1495,21 @@ m68k-motorola-sysv*)\n \t;;\n m68k-ncr-sysv*)\t\t\t# NCR Tower 32 SVR3\n \ttm_file=m68k/tower-as.h\n-\txm_defines=POSIX\n \textra_parts=\"crtbegin.o crtend.o\"\n \t;;\n m68k-plexus-sysv*)\n \ttm_file=m68k/plexus.h\n-\txm_defines=POSIX\n \tuse_collect2=yes\n \t;;\n m68k-tti-*)\n \ttm_file=m68k/pbb.h\n-\txm_defines=POSIX\n \t;;\n m68k-crds-unos*)\n-\txm_defines=POSIX\n \ttm_file=m68k/crds.h\n \tuse_collect2=yes\n \t;;\n m68k-cbm-sysv4*)\t\t# Commodore variant of V.4.\n \ttm_file=m68k/amix.h\n-\txm_defines=POSIX\n \ttmake_file=t-svr4\n \textra_parts=\"crtbegin.o crtend.o\"\n \t;;\n@@ -1576,7 +1526,6 @@ m68k-hp-bsd*)\t\t\t# HP 9000/3xx running Berkeley Unix\n \tuse_collect2=yes\n \t;;\n m68k-hp-hpux7*)\t# HP 9000 series 300 running HPUX version 7.\n-\txm_defines=POSIX\n \tif test x$gas = xyes\n \tthen\n \t\txmake_file=m68k/x-hp320g\n@@ -1589,7 +1538,6 @@ m68k-hp-hpux7*)\t# HP 9000 series 300 running HPUX version 7.\n \tuse_collect2=yes\n \t;;\n m68k-hp-hpux*)\t# HP 9000 series 300\n-\txm_defines=POSIX\n \tif test x$gas = xyes\n \tthen\n \t\txmake_file=m68k/x-hp320g\n@@ -1633,7 +1581,6 @@ m68k-*-coff*)\n \t;;\n m68020-*-elf* | m68k-*-elf*)\n \ttm_file=\"m68k/m68k-none.h m68k/m68kelf.h dbxelf.h elfos.h m68k/m68kemb.h m68k/m68020-elf.h\"\n-\txm_defines=POSIX\n \ttmake_file=m68k/t-m68kelf\n \textra_parts=\"crtbegin.o crtend.o\"\n \t;;\n@@ -1662,7 +1609,6 @@ m68k*-*-openbsd*)\n \t;;\n m68k-*-sysv4*)\t\t\t# Motorola m68k's running system V.4\n \ttm_file=m68k/m68kv4.h\n-\txm_defines=POSIX\n \ttmake_file=t-svr4\n \textra_parts=\"crtbegin.o crtend.o\"\n \t;;\n@@ -1695,7 +1641,6 @@ m68k-*-rtemscoff*)\t# would otherwise be caught by m68k-*-rtems*\n \texit 1\n \t;;\n m68k-*-rtems*)\n-\txm_defines=POSIX\n \ttmake_file=\"m68k/t-m68kbare t-rtems m68k/t-crtstuff\"\n \ttm_file=\"m68k/m68k-none.h m68k/m68kelf.h dbxelf.h elfos.h m68k/m68kemb.h m68k/m68020-elf.h m68k/rtemself.h rtems.h\"\n \textra_parts=\"crtbegin.o crtend.o\"\n@@ -1704,15 +1649,13 @@ m68k-*-rtems*)\n \tfi\n \t;;\n m88k-*-aout*)\n-\txm_defines=POSIX\n \ttm_file=m88k/m88k-aout.h\n \t;;\n m88k-*-openbsd*)\n \ttmake_file=\"${tmake_file} m88k/t-luna-gas\"\n \ttm_file=\"m88k/aout-dbx.h aoutos.h m88k/m88k.h openbsd.h ${tm_file}\"\n \t;;\n m88k-*-sysv4*)\n-\txm_defines=POSIX\n \ttm_file=\"dbxelf.h elfos.h svr4.h m88k/sysv4.h\"\n \textra_parts=\"crtbegin.o crtend.o\"\n \ttmake_file=m88k/t-sysv4\n@@ -1740,7 +1683,6 @@ mips-sgi-irix6*o32)\t\t# SGI System V.4., IRIX 6, O32 ABI\n \tfi\n \ttm_file=\"${tm_file} mips/iris6-o32.h\"\n \ttmake_file=\"${tmake_file} mips/t-iris mips/t-iris5-6\"\n-\txm_defines=POSIX\n \txm_file=mips/xm-iris5.h\n \t# mips-tfile doesn't work yet\n \t# See comment in mips/iris5.h file.\n@@ -1757,14 +1699,12 @@ mips-sgi-irix6*)\t\t# SGI System V.4., IRIX 6\n \t\ttm_file=mips/iris6.h\n \tfi\n \ttmake_file=\"mips/t-iris mips/t-iris5-6 mips/t-iris6\"\n-\txm_defines=POSIX\n #\tif test x$enable_threads = xyes; then\n #\t\tthread_file='irix'\n #\tfi\n \t;;\n mips-sgi-irix5cross64)\t\t# Irix5 host, Irix 6 target, cross64\n \ttm_file=\"mips/iris6.h mips/cross64.h\"\n-\txm_defines=POSIX\n \txm_file=mips/xm-iris5.h\n \ttmake_file=\"mips/t-iris mips/t-cross64\"\n \t# See comment in mips/iris[56].h files.\n@@ -1785,7 +1725,6 @@ mips-sni-sysv4)\n \telse\n \t\ttm_file=mips/sni-svr4.h\n \tfi\n-\txm_defines=POSIX\n         if test x$gnu_ld != xyes\n         then\n                 use_collect2=yes\n@@ -1805,7 +1744,6 @@ mips-sgi-irix5*)\t\t# SGI System V.4., IRIX 5\n \t\ttmake_file=mips/t-iris5-as\n \tfi\n \ttmake_file=\"${tmake_file} mips/t-iris mips/t-iris5-6\"\n-\txm_defines=POSIX\n \txm_file=mips/xm-iris5.h\n \t# mips-tfile doesn't work yet\n \t# See comment in mips/iris5.h file.\n@@ -1915,7 +1853,6 @@ mips64orion-*-elf* | mips64orionel-*-elf*)\n \ttm_defines=\"MIPS_ISA_DEFAULT=3 MIPS_ABI_DEFAULT=ABI_O64\"\n \t;;\n mips64orion-*-rtems*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} mips/elforion.h mips/elf64.h mips/rtems64.h rtems.h\"\n \ttmake_file=\"mips/t-elf t-rtems\"\n \ttmake_file=mips/t-elf\n@@ -1926,7 +1863,6 @@ mips64orion-*-rtems*)\n \tfi\n \t;;\n mips*-*-rtems*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} mips/elf.h mips/rtems.h rtems.h\"\n \ttmake_file=\"mips/t-elf t-rtems\"\n \tif test x$enable_threads = xyes; then\n@@ -1993,7 +1929,6 @@ powerpc64-*-gnu*)\n \t;;\n powerpc-*-beos*)\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/beos.h rs6000/xcoff.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"rs6000/t-fprules rs6000/t-beos\"\n \textra_headers=\n \t;;\n@@ -2013,15 +1948,13 @@ powerpc*-*-freebsd*)\n \t;;\n powerpc-*-sysv*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcos rs6000/t-ppccomm\"\n \t;;\n powerpc-*-netbsd*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h netbsd.h netbsd-elf.h freebsd-spec.h rs6000/sysv4.h rs6000/netbsd.h\"\n \ttmake_file=\"${tmake_file} rs6000/t-netbsd\"\n \t;;\n powerpc-*-chorusos*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h chorus.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcos rs6000/t-ppccomm\"\n \tcase x${enable_threads} in\n@@ -2031,42 +1964,34 @@ powerpc-*-chorusos*)\n \tesac\n \t;;\n powerpc-*-eabiaix*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/eabi.h rs6000/eabiaix.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n \t;;\n powerpc-*-eabispe*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/eabi.h rs6000/eabispe.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcendian rs6000/t-ppccomm\"\n \t;;\n powerpc-*-eabisimaltivec*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/eabi.h rs6000/eabisim.h rs6000/eabialtivec.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcendian rs6000/t-ppccomm\"\n \t;;\n powerpc-*-eabisim*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/eabi.h rs6000/eabisim.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n \t;;\n powerpc-*-elf*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n \t;;\n powerpc-*-eabialtivec*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/eabi.h rs6000/eabialtivec.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcendian rs6000/t-ppccomm\"\n \t;;\n powerpc-*-eabi*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/eabi.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n \t;;\n powerpc-*-rtems*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/eabi.h rs6000/rtems.h rtems.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-rtems t-rtems rs6000/t-ppccomm\"\n \tif test x$enable_threads = xyes; then\n@@ -2111,87 +2036,73 @@ powerpc-wrs-vxworks*)\n \textra_headers=ppc-asm.h\n \t;;\n powerpc-wrs-windiss*)\n-        xm_defines=POSIX\n \ttm_file=\"${tm_file} elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/windiss.h\"\n         tmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n         thread_file=\"\"\n         ;;\n powerpcle-*-sysv*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/sysv4le.h\"\n-\txm_defines=POSIX\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcos rs6000/t-ppccomm\"\n \t;;\n powerpcle-*-elf*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/sysv4le.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n \t;;\n powerpcle-*-eabisim*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/sysv4le.h rs6000/eabi.h rs6000/eabisim.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n \t;;\n powerpcle-*-eabi*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h freebsd-spec.h rs6000/sysv4.h rs6000/sysv4le.h rs6000/eabi.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcgas rs6000/t-ppccomm\"\n \t;;\n rs6000-ibm-aix3.[01]*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix31.h rs6000/xcoff.h\"\n \tuse_collect2=yes\n \t;;\n rs6000-ibm-aix3.2.[456789]* | powerpc-ibm-aix3.2.[456789]*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix3newas.h rs6000/xcoff.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-newas\"\n \tuse_collect2=yes\n \textra_headers=\n \t;;\n rs6000-ibm-aix4.[12]* | powerpc-ibm-aix4.[12]*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix41.h rs6000/xcoff.h\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-newas\"\n \tuse_collect2=yes\n \textra_headers=\n \t;;\n rs6000-ibm-aix4.[3456789]* | powerpc-ibm-aix4.[3456789]*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix43.h rs6000/xcoff.h\"\n \ttmake_file=rs6000/t-aix43\n \tuse_collect2=yes\n \tthread_file='aix'\n \textra_headers=\n \t;;\n rs6000-ibm-aix5.1.* | powerpc-ibm-aix5.1.*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix51.h rs6000/xcoff.h\"\n \ttmake_file=rs6000/t-aix43\n \tuse_collect2=yes\n \tthread_file='aix'\n \textra_headers=\n \t;;\n rs6000-ibm-aix[56789].* | powerpc-ibm-aix[56789].*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix52.h rs6000/xcoff.h\"\n \ttmake_file=rs6000/t-aix52\n \tuse_collect2=yes\n \tthread_file='aix'\n \textra_headers=\n \t;;\n rs6000-ibm-aix*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/xcoff.h\"\n \tuse_collect2=yes\n \t;;\n rs6000-bull-bosx)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} rs6000/aix.h rs6000/xcoff.h\"\n \tuse_collect2=yes\n \t;;\n rs6000-*-mach*)\n \ttm_file=\"${tm_file} rs6000/mach.h\"\n-\txm_defines=POSIX\n \tuse_collect2=yes\n \t;;\n rs6000-*-lynxos*)\n@@ -2238,15 +2149,13 @@ sh-*-elf* | sh[2346l]*-*-elf*)\n \tesac\n \t;;\n sh-*-rtemself*)\n-\txm_defines=POSIX\n \ttmake_file=\"sh/t-sh sh/t-elf t-rtems\"\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h sh/embed-elf.h sh/rtemself.h rtems.h\"\n \tif test x$enable_threads = xyes; then\n \t  thread_file='rtems'\n \tfi\n \t;;\n sh-*-rtems*)\n-\txm_defines=POSIX\n \ttmake_file=\"sh/t-sh t-rtems\"\n \ttm_file=\"${tm_file} sh/coff.h sh/rtems.h rtems.h\"\n \tif test x$enable_threads = xyes; then\n@@ -2320,7 +2229,6 @@ sh-*-*)\n \t;;\n sparc-tti-*)\n \ttm_file=\"${tm_file} sparc/pbd.h\"\n-\txm_defines=POSIX\n \t;;\n sparc-*-aout*)\n \ttmake_file=sparc/t-sparcbare\n@@ -2393,7 +2301,6 @@ sparc-*-rtemsaout*)\t# would otherwise be caught by sparc-*-rtems*\n \texit 1\n \t;;\n sparc-*-rtems*)\n-\txm_defines=POSIX\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h sparc/sysv4.h sol2.h sparc/sol2.h sparc/elf.h sparc/rtemself.h rtems.h\"\n \ttmake_file=\"sparc/t-elf sparc/t-crtfm t-rtems\"\n \textra_parts=\"crti.o crtn.o crtbegin.o crtend.o\"\n@@ -2409,7 +2316,6 @@ sparc64-*-solaris2* | sparcv9-*-solaris2*)\n \tif test x$gas = xyes; then\n \t\ttm_file=\"${tm_file} sparc/sol2-gas-bi.h\"\n \tfi\n-\txm_defines=POSIX\n \ttmake_file=\"sparc/t-sol2 sparc/t-sol2-64 sparc/t-crtfm\"\n \tif test x$gnu_ld = xyes; then\n \t\ttmake_file=\"$tmake_file t-slibgcc-elf-ver\"\n@@ -2433,7 +2339,6 @@ sparc64-*-solaris2* | sparcv9-*-solaris2*)\n \tneed_64bit_hwint=yes\n \t;;\n sparc-hal-solaris2*)\n-        xm_defines=POSIX\n         tm_file=\"${tm_file} dbxelf.h elfos.h svr4.h sparc/sysv4.h sol2.h sparc/sol2.h sparc/hal.h\"\n         tmake_file=\"sparc/t-halos sparc/t-sol2 sparc/t-crtfm\"\n \tif test x$gnu_ld = xyes; then\n@@ -2474,7 +2379,6 @@ sparc-*-solaris2*)\n \t\tneed_64bit_hwint=yes\n \t\t;;\n \tesac\n-\txm_defines=POSIX\n \textra_parts=\"crt1.o crti.o crtn.o gcrt1.o gmon.o crtbegin.o crtend.o\"\n \tif test x${enable_threads} = x; then\n \t    enable_threads=$have_pthread_h\n@@ -2508,7 +2412,6 @@ sparc-*-sunos3*)\n \t;;\n sparc-*-sysv4*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h sparc/sysv4.h\"\n-\txm_defines=POSIX\n \ttmake_file=t-svr4\n \textra_parts=\"crtbegin.o crtend.o\"\n \t;;\n@@ -2595,7 +2498,6 @@ thumb*-*-*)\n *** when the -mthumb switch is given to the compiler.\" 1>&2; exit 1; }\n \t;;\n v850-*-rtems*)\n-\txm_defines=POSIX\n \ttm_file=\"dbxelf.h elfos.h svr4.h ${tm_file} v850/v850.h v850/rtems.h rtems.h\"\n \ttmake_file=\"v850/t-v850 t-rtems\"\n \tif test x$stabs = xyes\n@@ -2639,7 +2541,6 @@ vax-*-bsd*)\t\t\t# VAXen running BSD\n \t;;\n vax-*-sysv*)\t\t\t# VAXen running system V\n \ttm_file=\"${tm_file} vax/vaxv.h\"\n-\txm_defines=POSIX\n \t;;\n vax-*-netbsdelf*)\n \ttm_file=\"${tm_file} elfos.h netbsd.h netbsd-elf.h vax/elf.h vax/netbsd-elf.h\""}, {"sha": "8bffaa9110f05bd9fd71a1aa7f3c6b6c3f184f5c", "filename": "gcc/fixproto", "status": "modified", "additions": 37, "deletions": 21, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2Ffixproto", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2Ffixproto", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixproto?ref=cbbf876bb27dbb0029f1976871eb391df93f3f17", "patch": "@@ -4,7 +4,8 @@\n #\tfixproto TARGET-DIR SOURCE-DIR-ALL SOURCE-DIR-STD\n #\n # COPYRIGHT\n-#\tCopyright (C) 1993, 1994, 1997, 1998, 2002 Free Software Foundation, Inc.\n+#\tCopyright (C) 1993, 1994, 1997, 1998, 2002, 2003\n+#       Free Software Foundation, Inc.\n #\tThis file is part of GCC.\n #\n #\tGCC is free software; you can redistribute it and/or modify\n@@ -133,13 +134,6 @@ if [ `echo $* | wc -w` != 0 ] ; then\n   done\n fi\n \n-required_stdlib_h=\"abort abs atexit atof atoi atol bsearch calloc exit free getenv labs malloc putenv qsort rand realloc srand strtod strtol strtoul system\"\n-# \"div ldiv\", - ignored because these depend on div_t, ldiv_t\n-# ignore these: \"mblen mbstowcs mbstowc wcstombs wctomb\"\n-# Left out getgroups, because SunOS4 has incompatible BSD and SVR4 versions.\n-# Should perhaps also add NULL\n-required_unistd_h=\"_exit access alarm chdir chown close ctermid cuserid dup dup2 execl execle execlp execv execve execvp fork fpathconf getcwd getegid geteuid getgid getlogin getopt getpgrp getpid getppid getuid isatty link lseek pathconf pause pipe read rmdir setgid setpgid setsid setuid sleep sysconf tcgetpgrp tcsetpgrp ttyname unlink write\"\n-\n done_dirs=\"\"\n subdirs_made=\"\"\n echo \"\" >fixproto.list\n@@ -283,35 +277,57 @@ done\n \n # This might be more cleanly moved into the main loop, by adding\n # a <dummy> source directory at the end.  FIXME!\n-for rel_source_file in unistd.h stdlib.h\n-do\n-  if grep \"$rel_source_file\" fixproto.list >/dev/null\n-  then true\n+\n+# All the headers we create define size_t and NULL.\n+for rel_source_file in unistd.h stdlib.h string.h time.h ; do\n+  if grep \"$rel_source_file\" fixproto.list >/dev/null ; then\n+    : # It exists, we don't need to make it\n   else\n     echo Adding missing $rel_source_file\n     rel_source_ident=`echo $rel_source_file | tr ./ __`\n-    required_list=`eval echo '${required_'${rel_source_ident}'-}'`\n     cat >tmp.h <<EOF\n+/* Fake ${rel_source_file}, created by GCC.\n+   The functions declared in this file do not necessarily exist in\n+   your C library. */\n #ifndef __${rel_source_ident}\n #define __${rel_source_ident}\n-EOF\n-    if test $rel_source_file = stdlib.h\n-    then\n-      # Make sure it contains a definition of size_t.\n-      cat >>tmp.h <<EOF\n \n+#define __need_NULL\n #define __need_size_t\n #include <stddef.h>\n EOF\n-    fi\n+    # Insert special stuff for particular files here.\n+    case ${rel_source_file} in\n+      time.h)\n+        # If time.h doesn't exist, find out if sys/time.h does.\n+        if test -f $src_dir_std/sys/time.h \\\n+            || grep \"sys/time.h\" fixproto.list >/dev/null ; then\n+          # It does; include it and hope it has the needed declarations.\n+          # Some versions require sys/types.h.\n+          cat >>tmp.h <<EOF\n+\n+#include <sys/types.h>\n+#include <sys/time.h>\n+EOF\n+        else\n+          # It doesn't.  Make up plausible definitions for time_t, clock_t.\n+          # Forward-declare struct tm.  Hope nobody tries to use it.  (Odds\n+          # are they won't.)\n+          cat >>tmp.h <<EOF\n+\n+typedef long time_t;\n+typedef long clock_t;\n+struct tm;\n+EOF\n+        fi ;;\n+    esac\n     cat >>tmp.h <<EOF\n \n #endif /* __${rel_source_ident} */\n EOF\n     ${FIX_HEADER} $rel_source_file tmp.h $abs_target_dir/$rel_source_file ${DEFINES} $include_path\n     if test $? != 0 ; then exit 1 ; fi\n-    if test -f $abs_target_dir/$rel_source_file\n-    then\n+    if test -f $abs_target_dir/$rel_source_file ; then\n       rm tmp.h\n     else\n       mv tmp.h $abs_target_dir/$rel_source_file"}, {"sha": "511d5cf36f9310a084579305c1d62dd61541233b", "filename": "gcc/tsystem.h", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2Ftsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbbf876bb27dbb0029f1976871eb391df93f3f17/gcc%2Ftsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftsystem.h?ref=cbbf876bb27dbb0029f1976871eb391df93f3f17", "patch": "@@ -73,20 +73,16 @@ extern int atexit (void (*)(void));\n extern int errno;\n #endif\n \n-#ifdef POSIX\n-#include <string.h>\n-#endif\n-\n /* GCC (fixproto) guarantees these system headers exist.  */\n+#include <string.h>\n #include <stdlib.h>\n #include <unistd.h>\n \n /* GCC supplies this header.  */\n #include <limits.h>\n \n-#ifdef POSIX\n+/* GCC (fixproto) guarantees this system headers exists.  */\n #include <time.h>\n-#endif\n \n #endif /* inhibit_libc */\n "}]}