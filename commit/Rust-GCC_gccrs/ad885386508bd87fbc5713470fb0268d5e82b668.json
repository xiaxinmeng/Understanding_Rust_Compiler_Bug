{"sha": "ad885386508bd87fbc5713470fb0268d5e82b668", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQ4ODUzODY1MDhiZDg3ZmJjNTcxMzQ3MGZiMDI2OGQ1ZTgyYjY2OA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-08-22T15:01:42Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-08-22T15:01:42Z"}, "message": "re PR tree-optimization/50133 (ICE: SIGSEGV in vect_finish_stmt_generation (gimple.h:4821) with -ftree-vectorize -fno-tree-loop-im)\n\n\tPR tree-optimization/50133\n\t* tree-vect-stmts.c (vect_finish_stmt_generation): Copy location\n\tfrom stmt instead of some statement around gsi.\n\n\t* gcc.dg/pr50133.c: New test.\n\nFrom-SVN: r177958", "tree": {"sha": "72d4329bd13fcbb56fd16050ae5a13b418dfc1e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/72d4329bd13fcbb56fd16050ae5a13b418dfc1e4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad885386508bd87fbc5713470fb0268d5e82b668", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad885386508bd87fbc5713470fb0268d5e82b668", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad885386508bd87fbc5713470fb0268d5e82b668", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad885386508bd87fbc5713470fb0268d5e82b668/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e4269c7843070aa3ebc7c9e2e81c2e8a8d941c50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4269c7843070aa3ebc7c9e2e81c2e8a8d941c50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4269c7843070aa3ebc7c9e2e81c2e8a8d941c50"}], "stats": {"total": 34, "additions": 26, "deletions": 8}, "files": [{"sha": "b0aaf468f54370b1d7faf17bd7d40e25863126c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ad885386508bd87fbc5713470fb0268d5e82b668", "patch": "@@ -1,5 +1,9 @@\n 2011-08-22  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/50133\n+\t* tree-vect-stmts.c (vect_finish_stmt_generation): Copy location\n+\tfrom stmt instead of some statement around gsi.\n+\n \tPR middle-end/50141\n \t* expr.c (get_bit_range): Only use DECL_THREAD_LOCAL_P if\n \tinnerdecl is a VAR_DECL."}, {"sha": "67a5e89e1abcd5794d11647587761ce490bb02e8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ad885386508bd87fbc5713470fb0268d5e82b668", "patch": "@@ -1,5 +1,8 @@\n 2011-08-22  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/50133\n+\t* gcc.dg/pr50133.c: New test.\n+\n \tPR middle-end/50141\n \t* c-c++-common/cxxbitfields-6.c: New test.\n "}, {"sha": "2c0f490cfbe8171ebd0e2a163e17e83b9a1114b2", "filename": "gcc/testsuite/gcc.dg/pr50133.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2Ftestsuite%2Fgcc.dg%2Fpr50133.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2Ftestsuite%2Fgcc.dg%2Fpr50133.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr50133.c?ref=ad885386508bd87fbc5713470fb0268d5e82b668", "patch": "@@ -0,0 +1,18 @@\n+/* PR tree-optimization/50133 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O -ftree-vectorize -fno-tree-loop-im\" } */\n+\n+extern int A[], B[];\n+\n+void\n+foo (int z)\n+{\n+  int j, i;\n+  for (j = 0; j < 32; j++)\n+    {\n+      int a = A[0];\n+      for (i = 0; i < 16; i++)\n+\ta = A[i] ? a : z;\n+      B[j] = a;\n+    }\n+}"}, {"sha": "bab19b8845b498b6f5fe44e57c754f24dc068508", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad885386508bd87fbc5713470fb0268d5e82b668/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=ad885386508bd87fbc5713470fb0268d5e82b668", "patch": "@@ -1419,7 +1419,6 @@ vect_finish_stmt_generation (gimple stmt, gimple vec_stmt,\n   stmt_vec_info stmt_info = vinfo_for_stmt (stmt);\n   loop_vec_info loop_vinfo = STMT_VINFO_LOOP_VINFO (stmt_info);\n   bb_vec_info bb_vinfo = STMT_VINFO_BB_VINFO (stmt_info);\n-  gimple_stmt_iterator si;\n \n   gcc_assert (gimple_code (stmt) != GIMPLE_LABEL);\n \n@@ -1434,13 +1433,7 @@ vect_finish_stmt_generation (gimple stmt, gimple vec_stmt,\n       print_gimple_stmt (vect_dump, vec_stmt, 0, TDF_SLIM);\n     }\n \n-  si = *gsi;\n-  if (is_gimple_debug (gsi_stmt (si)))\n-    {\n-      gsi_next_nondebug (&si);\n-      gcc_assert (!gsi_end_p (si));\n-    }\n-  gimple_set_location (vec_stmt, gimple_location (gsi_stmt (si)));\n+  gimple_set_location (vec_stmt, gimple_location (stmt));\n }\n \n /* Checks if CALL can be vectorized in type VECTYPE.  Returns"}]}