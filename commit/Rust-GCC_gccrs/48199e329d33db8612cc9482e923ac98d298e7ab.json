{"sha": "48199e329d33db8612cc9482e923ac98d298e7ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDgxOTllMzI5ZDMzZGI4NjEyY2M5NDgyZTkyM2FjOThkMjk4ZTdhYg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-07-03T02:22:00Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-07-03T02:22:00Z"}, "message": "(smuldi3_highpart, smuldi3_highpart_internal,\n\numuldi3_highpart, umuldi3_highpart_internal): New patterns.\n\nFrom-SVN: r7649", "tree": {"sha": "27c0c6a9627c5776ead5a687663cd8e72925bd4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27c0c6a9627c5776ead5a687663cd8e72925bd4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48199e329d33db8612cc9482e923ac98d298e7ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48199e329d33db8612cc9482e923ac98d298e7ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48199e329d33db8612cc9482e923ac98d298e7ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48199e329d33db8612cc9482e923ac98d298e7ab/comments", "author": null, "committer": null, "parents": [{"sha": "f0c94be0eb12ba81c9c2c893ba6d85a8bd28267f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0c94be0eb12ba81c9c2c893ba6d85a8bd28267f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0c94be0eb12ba81c9c2c893ba6d85a8bd28267f"}], "stats": {"total": 112, "additions": 112, "deletions": 0}, "files": [{"sha": "98151db85075354a62be27fb1278741da68f9f88", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 112, "deletions": 0, "changes": 112, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48199e329d33db8612cc9482e923ac98d298e7ab/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48199e329d33db8612cc9482e923ac98d298e7ab/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=48199e329d33db8612cc9482e923ac98d298e7ab", "patch": "@@ -1069,6 +1069,118 @@\n   [(set_attr \"type\"\t\"imul\")\n    (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1\")])\n+\n+(define_insn \"smuldi3_highpart\"\n+  [(set (match_operand:DI 0 \"register_operand\" \"=d\")\n+\t(truncate:DI\n+\t (lshiftrt:TI (mult:TI (sign_extend:TI (match_operand:DI 1 \"register_operand\" \"d\"))\n+\t\t\t       (sign_extend:TI (match_operand:DI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 64))))\n+   (clobber (reg:DI 64))\n+   (clobber (reg:DI 65))]\n+  \"TARGET_64BIT\"\n+  \"*\n+{\n+  rtx xoperands[10];\n+\n+  xoperands[0] = operands[0];\n+  xoperands[1] = gen_rtx (REG, DImode, HI_REGNUM);\n+\n+  output_asm_insn (\\\"dmult\\\\t%1,%2\\\", operands);\n+  output_asm_insn (mips_move_1word (xoperands, insn, TRUE), xoperands);\n+  return \\\"\\\";\n+}\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"DI\")\n+   (set_attr \"length\"\t\"3\")])\t\t;; mult + mfhi + delay\n+\n+(define_split\n+  [(set (match_operand:DI 0 \"register_operand\" \"\")\n+\t(truncate:DI\n+\t (lshiftrt:TI (mult:TI (sign_extend:TI (match_operand:DI 1 \"register_operand\" \"d\"))\n+\t\t\t       (sign_extend:TI (match_operand:DI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 64))))\n+   (clobber (reg:DI 64))\n+   (clobber (reg:DI 65))]\n+  \"TARGET_64BIT && !TARGET_DEBUG_D_MODE\"\n+  [(parallel [(set (reg:DI 64)\t\t;; high register\n+\t\t   (truncate:DI\n+\t\t    (lshiftrt:TI (mult:TI (sign_extend:TI (match_dup 1))\n+\t\t\t\t\t  (sign_extend:TI (match_dup 2)))\n+\t\t\t\t (const_int 64))))\n+\t      (clobber (reg:DI 65))])\n+   (set (match_dup 0)\n+\t(reg:DI 64))]\n+  \"\")\n+\n+(define_insn \"smuldi3_highpart_internal\"\n+  [(set (reg:DI 64)\t\t\t;; high register\n+\t(truncate:DI\n+\t (lshiftrt:TI (mult:TI (sign_extend:TI (match_operand:DI 0 \"register_operand\" \"d\"))\n+\t\t\t       (sign_extend:TI (match_operand:DI 1 \"register_operand\" \"d\")))\n+\t\t      (const_int 64))))\n+   (clobber (reg:DI 65))]\n+  \"TARGET_64BIT\"\n+  \"dmult\\\\t%0,%1\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"DI\")\n+   (set_attr \"length\"\t\"1\")])\n+\n+(define_insn \"umuldi3_highpart\"\n+  [(set (match_operand:DI 0 \"register_operand\" \"=d\")\n+\t(truncate:DI\n+\t (lshiftrt:TI (mult:TI (zero_extend:TI (match_operand:DI 1 \"register_operand\" \"d\"))\n+\t\t\t       (zero_extend:TI (match_operand:DI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 64))))\n+   (clobber (reg:DI 64))\n+   (clobber (reg:DI 65))]\n+  \"TARGET_64BIT\"\n+  \"*\n+{\n+  rtx xoperands[10];\n+\n+  xoperands[0] = operands[0];\n+  xoperands[1] = gen_rtx (REG, DImode, HI_REGNUM);\n+\n+  output_asm_insn (\\\"dmultu\\\\t%1,%2\\\", operands);\n+  output_asm_insn (mips_move_1word (xoperands, insn, FALSE), xoperands);\n+  return \\\"\\\";\n+}\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"DI\")\n+   (set_attr \"length\"\t\"3\")])\t\t;; multu + mfhi + delay\n+\n+(define_split\n+  [(set (match_operand:DI 0 \"register_operand\" \"\")\n+\t(truncate:DI\n+\t (lshiftrt:TI (mult:TI (zero_extend:TI (match_operand:DI 1 \"register_operand\" \"d\"))\n+\t\t\t       (zero_extend:TI (match_operand:DI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 64))))\n+   (clobber (reg:DI 64))\n+   (clobber (reg:DI 65))]\n+  \"TARGET_64BIT && !TARGET_DEBUG_D_MODE\"\n+  [(parallel [(set (reg:DI 64)\t\t;; high register\n+\t\t   (truncate:DI\n+\t\t    (lshiftrt:TI (mult:TI (zero_extend:TI (match_dup 1))\n+\t\t\t\t\t  (zero_extend:TI (match_dup 2)))\n+\t\t\t\t (const_int 64))))\n+\t      (clobber (reg:DI 65))])\n+   (set (match_dup 0)\n+\t(reg:DI 64))]\n+  \"\")\n+\n+(define_insn \"umuldi3_highpart_internal\"\n+  [(set (reg:DI 64)\t\t\t;; high register\n+\t(truncate:DI\n+\t (lshiftrt:TI (mult:TI (zero_extend:TI (match_operand:DI 0 \"register_operand\" \"d\"))\n+\t\t\t       (zero_extend:TI (match_operand:DI 1 \"register_operand\" \"d\")))\n+\t\t      (const_int 64))))\n+   (clobber (reg:DI 65))]\n+  \"TARGET_64BIT\"\n+  \"dmultu\\\\t%0,%1\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"DI\")\n+   (set_attr \"length\"\t\"1\")])\n \f\n ;;\n ;;  ...................."}]}