{"sha": "6174dcf37580c05ea846cfe0659a61574f7ae71c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjE3NGRjZjM3NTgwYzA1ZWE4NDZjZmUwNjU5YTYxNTc0ZjdhZTcxYw==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@gcc.gnu.org", "date": "1998-06-24T06:16:19Z"}, "committer": {"name": "Manfred Hollstein", "email": "manfred@gcc.gnu.org", "date": "1998-06-24T06:16:19Z"}, "message": "configure (gcc_version): Initialize properly depending on how and where configure is started.\n\nd\negcs/ChangeLog:\n1998-06-24  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* configure (gcc_version): Initialize properly depending on\n\thow and where configure is started.\n\t(recursion line): Pass a --with-gcc-version=${gcc_version}\n\tto configures in subdirs.\negcs/libf2c/ChangeLog.egcs:\n1998-06-24  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* Makefile.in (version): Rename to gcc_version.\n\t* configure.in (version): Likewise.\n\t(gcc_version): Add code to use an option passed from parent configure.\n\t* configure: Regenerate.\negcs/libio/ChangeLog:\n1998-06-24  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* config.shared (FLAGS_TO_PASS): Add gcc_version.\n\nFrom-SVN: r20687", "tree": {"sha": "3409e844fbcc8a605cb26bbf1a75caad955bf377", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3409e844fbcc8a605cb26bbf1a75caad955bf377"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6174dcf37580c05ea846cfe0659a61574f7ae71c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6174dcf37580c05ea846cfe0659a61574f7ae71c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6174dcf37580c05ea846cfe0659a61574f7ae71c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6174dcf37580c05ea846cfe0659a61574f7ae71c/comments", "author": null, "committer": null, "parents": [{"sha": "50c4c9f7bd041492d7c736f51ef0622a67e7c8b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50c4c9f7bd041492d7c736f51ef0622a67e7c8b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50c4c9f7bd041492d7c736f51ef0622a67e7c8b1"}], "stats": {"total": 67, "additions": 53, "deletions": 14}, "files": [{"sha": "fdbaef7575d2afbc56da8a90c3bc9a1ed302253a", "filename": "configure", "status": "modified", "additions": 26, "deletions": 5, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6174dcf37580c05ea846cfe0659a61574f7ae71c/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6174dcf37580c05ea846cfe0659a61574f7ae71c/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=6174dcf37580c05ea846cfe0659a61574f7ae71c", "patch": "@@ -701,10 +701,31 @@ if [ \"${program_prefix}\" != \"\" ] ; then\n     program_transform_name=\"-e s,^,${program_prefix}, ${program_transform_name}\"\n fi\n \n-# If gcc's sources are available, extract its version number which is used by\n-# $libsubdir.\n-if [ -f $srcdir/gcc/version.c ]; then\n-    gcc_version=`sed -e 's/.*\\\"\\([^ \\\"]*\\)[ \\\"].*/\\1/' < ${srcdir}/gcc/version.c`\n+# Check whether --with-gcc-version was given.\n+if [ \"${with_gcc_version+set}\" = set ]; then\n+    gcc_version=\"$with_gcc_version\"\n+else\n+    if [ \"${srcdir}\" = \".\" ] ; then\n+\tif [ \"${with_target_subdir}\" != \".\" ] ; then\n+\t    topsrcdir=${with_multisrctop}../..\n+\telse\n+\t    topsrcdir=${with_multisrctop}..\n+\tfi\n+    else\n+\tcase ${srcdir} in\n+\t    */*/* )\t# Need to do this only in subdirectories.\n+\t\ttopsrcdir=${srcdir}/..\n+\t\t;;\n+\t    * )\t\t# We are already in the topsrcdir.\n+\t\ttopsrcdir=${srcdir}\n+\t\t;;\n+\tesac\n+    fi\n+    # If gcc's sources are available, extract its version number which is used by\n+    # $libsubdir.\n+    if [ -f ${topsrcdir}/gcc/version.c ] ; then\n+\tgcc_version=`sed -e 's/.*\\\"\\([^ \\\"]*\\)[ \\\"].*/\\1/' < ${topsrcdir}/gcc/version.c`\n+    fi\n fi\n \n # If CC and CXX are not set in the environment, and the Makefile\n@@ -1447,7 +1468,7 @@ if [ -z \"${norecursion}\" -a -n \"${configdirs}\" ] ; then\n \t\t\tif [ ! -z \"${recprog}\" ] ; then\n \t                        if eval ${config_shell} ${recprog} ${verbose} ${buildopt} --host=${host_alias} --target=${target_alias} \\\n         \t                        ${prefixoption} ${tmpdiroption} ${exec_prefixoption} \\\n-                \t                ${srcdiroption} ${program_prefixoption} ${program_suffixoption} ${program_transform_nameoption} ${site_option} ${withoptions} ${withoutoptions} ${enableoptions} ${disableoptions} ${floating_pointoption} ${cache_file_option} ${removing} ${other_options} ${redirect} ; then\n+                \t                ${srcdiroption} ${program_prefixoption} ${program_suffixoption} ${program_transform_nameoption} ${site_option} --with-gcc-version=${gcc_version} ${withoptions} ${withoutoptions} ${enableoptions} ${disableoptions} ${floating_pointoption} ${cache_file_option} ${removing} ${other_options} ${redirect} ; then\n \t                                true\n         \t                else\n \t\t\t\t\techo Configure in `pwd` failed, exiting. 1>&2"}, {"sha": "b3d046bc3c6c79b9cb8a5a1e8bf6d964ef2cdaf9", "filename": "libf2c/Makefile.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6174dcf37580c05ea846cfe0659a61574f7ae71c/libf2c%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6174dcf37580c05ea846cfe0659a61574f7ae71c/libf2c%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libf2c%2FMakefile.in?ref=6174dcf37580c05ea846cfe0659a61574f7ae71c", "patch": "@@ -27,7 +27,7 @@ srcdir = @srcdir@\n prefix = @prefix@\n exec_prefix = @exec_prefix@\n target_alias = @target_alias@\n-version = @version@\n+gcc_version = @gcc_version@\n \n bindir = $(exec_prefix)/bin\n libdir = $(exec_prefix)/lib\n@@ -36,7 +36,7 @@ mandir = $(prefix)/man\n infodir = $(prefix)/info\n includedir = $(prefix)/include\n docdir = $(datadir)/doc\n-libsubdir = $(libdir)/gcc-lib/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc-lib/$(target_alias)/$(gcc_version)\n \n TO_TOPDIR = ..\n "}, {"sha": "63163a841663ec61084f4347a0bbd64bb2541898", "filename": "libf2c/configure", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6174dcf37580c05ea846cfe0659a61574f7ae71c/libf2c%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6174dcf37580c05ea846cfe0659a61574f7ae71c/libf2c%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libf2c%2Fconfigure?ref=6174dcf37580c05ea846cfe0659a61574f7ae71c", "patch": "@@ -1862,7 +1862,16 @@ test -f libI77/makefile && mv libI77/makefile  libI77/makefile.ori\n test -f libU77/makefile && mv libU77/makefile  libU77/makefile.ori\n \n # Get the version number from the toplevel\n-version=`sed -e 's/.*\\\"\\([^ \\\"]*\\)[ \\\"].*/\\1/' < ${srcdir}/../gcc/version.c`\n+if test x${with_gcc_version} = x; then\n+  # Try to get the version number from a hopefully existing gcc directory.\n+  if test -d ${srcdir}/../gcc; then\n+    gcc_version=`sed -e 's/.*\\\"\\([^ \\\"]*\\)[ \\\"].*/\\1/' < ${srcdir}/../gcc/version.c`\n+  else\n+    gcc_version=UNKNOWN\n+  fi\n+else\n+  gcc_version=${with_gcc_version}\n+fi\n \n ac_aux_dir=\n for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do\n@@ -1911,7 +1920,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:1915: checking host system type\" >&5\n+echo \"configure:1924: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -1932,7 +1941,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:1936: checking target system type\" >&5\n+echo \"configure:1945: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -1950,7 +1959,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:1954: checking build system type\" >&5\n+echo \"configure:1963: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -2126,7 +2135,7 @@ s%@RANLIB_TEST@%$RANLIB_TEST%g\n s%@CPP@%$CPP%g\n s%@F2C_INTEGER@%$F2C_INTEGER%g\n s%@F2C_LONGINT@%$F2C_LONGINT%g\n-s%@version@%$version%g\n+s%@gcc_version@%$gcc_version%g\n s%@host@%$host%g\n s%@host_alias@%$host_alias%g\n s%@host_cpu@%$host_cpu%g"}, {"sha": "bd1145f30beb6be0126b8b6aff62dc22c56314b5", "filename": "libf2c/configure.in", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6174dcf37580c05ea846cfe0659a61574f7ae71c/libf2c%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6174dcf37580c05ea846cfe0659a61574f7ae71c/libf2c%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libf2c%2Fconfigure.in?ref=6174dcf37580c05ea846cfe0659a61574f7ae71c", "patch": "@@ -344,8 +344,17 @@ test -f libI77/makefile && mv libI77/makefile  libI77/makefile.ori\n test -f libU77/makefile && mv libU77/makefile  libU77/makefile.ori\n \n # Get the version number from the toplevel\n-version=`sed -e 's/.*\\\"\\([[^ \\\"]]*\\)[[ \\\"]].*/\\1/' < ${srcdir}/../gcc/version.c`\n-AC_SUBST(version)\n+if test x${with_gcc_version} = x; then\n+  # Try to get the version number from a hopefully existing gcc directory.\n+  if test -d ${srcdir}/../gcc; then\n+    gcc_version=`sed -e 's/.*\\\"\\([[^ \\\"]]*\\)[[ \\\"]].*/\\1/' < ${srcdir}/../gcc/version.c`\n+  else\n+    gcc_version=UNKNOWN\n+  fi\n+else\n+  gcc_version=${with_gcc_version}\n+fi\n+AC_SUBST(gcc_version)\n AC_CANONICAL_SYSTEM\n AC_SUBST(target_alias)\n "}]}