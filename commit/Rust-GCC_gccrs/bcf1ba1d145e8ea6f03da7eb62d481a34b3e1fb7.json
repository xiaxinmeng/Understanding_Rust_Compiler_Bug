{"sha": "bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmNmMWJhMWQxNDVlOGVhNmYwM2RhN2ViNjJkNDgxYTM0YjNlMWZiNw==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@dcc.unicamp.br", "date": "1999-05-17T23:07:40Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-05-17T23:07:40Z"}, "message": "Makefile.in (stmp-fixproto): Pass location of mkinstalldirs to fixproto.\n\n        * Makefile.in (stmp-fixproto): Pass location of mkinstalldirs to\n        fixproto.\n        * fixproto: Avoid unportable constructs such as `basename' and\n        `mkdir -p'.  Use mkinstalldirs from the environment if `mkdir -p'\n        fails.\n\nFrom-SVN: r26983", "tree": {"sha": "e646352b1a9e17b3208c431f4b4dc9842b44affb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e646352b1a9e17b3208c431f4b4dc9842b44affb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7/comments", "author": null, "committer": null, "parents": [{"sha": "a9a00d29b4180f7f98d7e7db13fe1f96a8359211", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9a00d29b4180f7f98d7e7db13fe1f96a8359211", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9a00d29b4180f7f98d7e7db13fe1f96a8359211"}], "stats": {"total": 33, "additions": 28, "deletions": 5}, "files": [{"sha": "1308fab09314d25e440087c125b0365356125b51", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7", "patch": "@@ -1,5 +1,11 @@\n Mon May 17 23:56:39 1999  Alexandre Oliva  <oliva@dcc.unicamp.br>\n \n+\t* Makefile.in (stmp-fixproto): Pass location of mkinstalldirs to\n+\tfixproto.\n+\t* fixproto: Avoid unportable constructs such as `basename' and\n+\t`mkdir -p'.  Use mkinstalldirs from the environment if `mkdir -p'\n+\tfails.\n+\n \t* fixinc/fixincl.c: Remove #error, it is not portable.\n \n Mon May 17 23:50:41 1999  Marc Espie <espie@cvs.openbsd.org>"}, {"sha": "36e9261ccb9fddd0d737c543f5278d95447bc02f", "filename": "gcc/Makefile.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7", "patch": "@@ -2244,6 +2244,8 @@ stmp-fixproto: fixhdr.ready fixproto stmp-headers\n \telse \\\n \t  : This line works around a 'make' bug in BSDI 1.1.; \\\n \t  FIXPROTO_DEFINES=\"$(FIXPROTO_DEFINES)\"; export FIXPROTO_DEFINES; \\\n+\t  mkinstalldirs=\"$(SHELL) $(srcdir)/mkinstalldirs\"; \\\n+\t    export mkinstalldirs; \\\n \t  if [ -d $(SYSTEM_HEADER_DIR) ] ; then \\\n \t    $(SHELL) ${srcdir}/fixproto include include $(SYSTEM_HEADER_DIR); \\\n \t  else true; fi; \\"}, {"sha": "9e022113ea08c0afa884d0622305763c064acf34", "filename": "gcc/fixproto", "status": "modified", "additions": 20, "deletions": 5, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7/gcc%2Ffixproto", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7/gcc%2Ffixproto", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixproto?ref=bcf1ba1d145e8ea6f03da7eb62d481a34b3e1fb7", "patch": "@@ -54,12 +54,27 @@\n #\tRon Guilmette (rfg@netcom.com) (original idea and code)\n #\tPer Bothner (bothner@cygnus.com) (major re-write)\n \n-progname=$0\n-progname=`basename $progname`\n+dirname=`echo \"$0\" | sed 's,^[^/]*$,.,;s,//*[^/]*$,,'`\n+progname=`echo \"$0\" | sed 's,.*/,,'`\n original_dir=`pwd`\n FIX_HEADER=${FIX_HEADER-$original_dir/fix-header}\n DEFINES=\"-D__STDC__=0 -D__cplusplus ${FIXPROTO_DEFINES}\"\n \n+if mkdir -p . 2> /dev/null; then\n+  # Great, mkdir accepts -p\n+  mkinstalldirs=\"mkdir -p\"\n+else\n+  # We expect mkinstalldirs to be passed in the environment.\n+  # If it is not, assume it is in the directory that contains this script.\n+  mkinstalldirs=${mkinstalldirs-\"/bin/sh $dirname/mkinstalldirs\"}\n+  if $mkinstalldirs . 2> /dev/null; then\n+    :\n+  else\n+    # But, in case of failure, fallback to plain mkdir, and hope it works\n+    mkinstalldirs=mkdir\n+  fi\n+fi\n+\n if [ `echo $1 | wc -w` = 0 ] ; then\n   echo $progname\\: usage\\: $progname target-dir \\[ source-dir \\.\\.\\. \\]\n   exit 1\n@@ -94,7 +109,7 @@ fi\n \n if [ \\! -d $abs_target_dir ] ; then\n   echo $progname\\: creating directory $rel_target_dir\n-  mkdir -p $abs_target_dir\n+  $mkinstalldirs $abs_target_dir\n fi\n \n echo $progname\\: populating \\`$rel_target_dir\\'\n@@ -175,7 +190,7 @@ for code in ALL STD ; do\n \n       abs_target_subdir=${abs_target_dir}/${rel_source_subdir}\n       if [ \\! -d $abs_target_subdir ] ; then\n-\tif mkdir -p $abs_target_subdir ; then\n+\tif $mkinstalldirs $abs_target_subdir ; then\n \t  subdirs_made=\"$abs_target_subdir $subdirs_made\"\n \tfi\n       fi\n@@ -202,7 +217,7 @@ for code in ALL STD ; do\n \t      # Create the dir where this file will go when fixed.\n \t      xxdir=`echo ./$file | sed -e 's|/[^/]*$||'`\n \t      if [ \\! -d $abs_target_subdir/$xxdir ] ; then\n-\t\tif mkdir -p $abs_target_subdir/$xxdir ; then\n+\t\tif $mkinstalldirs $abs_target_subdir/$xxdir ; then\n \t\t  subdirs_made=\"$abs_target_subdir/$xxdir $subdirs_made\"\n \t\tfi\n \t      fi"}]}