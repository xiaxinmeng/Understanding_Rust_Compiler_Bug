{"sha": "ddf54e5aa0dac6956f9fa42a7e11c2915236cad0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGRmNTRlNWFhMGRhYzY5NTZmOWZhNDJhN2UxMWMyOTE1MjM2Y2FkMA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-06-03T16:08:49Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-06-03T16:08:49Z"}, "message": "re PR lto/41921 (Cross language don't work with typedef unnamed structs)\n\n2010-06-03  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/41921\n\t* lib/lto.exp: Always load gcc.exp.\n\t(lto-obj): For C source files invoke gcc_target_compile.\n\t* g++.dg/lto/20100603-1_0.C: New testcase.\n\t* g++.dg/lto/20100603-1_1.c: Likewise.\n\nFrom-SVN: r160227", "tree": {"sha": "1436a158a648be25d38bfc6ee88a83f4fce39130", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1436a158a648be25d38bfc6ee88a83f4fce39130"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ddf54e5aa0dac6956f9fa42a7e11c2915236cad0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddf54e5aa0dac6956f9fa42a7e11c2915236cad0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ddf54e5aa0dac6956f9fa42a7e11c2915236cad0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddf54e5aa0dac6956f9fa42a7e11c2915236cad0/comments", "author": null, "committer": null, "parents": [{"sha": "f5f92f6d3bc3e0d1758cc7ae8e8ccc9f2850895e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5f92f6d3bc3e0d1758cc7ae8e8ccc9f2850895e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5f92f6d3bc3e0d1758cc7ae8e8ccc9f2850895e"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "282b57f0b390c8eed700131a9aa9efd85f6cf6d6", "filename": "gcc/testsuite/lib/lto.exp", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ddf54e5aa0dac6956f9fa42a7e11c2915236cad0/gcc%2Ftestsuite%2Flib%2Flto.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ddf54e5aa0dac6956f9fa42a7e11c2915236cad0/gcc%2Ftestsuite%2Flib%2Flto.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Flto.exp?ref=ddf54e5aa0dac6956f9fa42a7e11c2915236cad0", "patch": "@@ -110,6 +110,7 @@ set lto_skip_list $LTO_SKIPS\n \n load_lib dg.exp\n load_lib gcc-dg.exp\n+load_lib gcc.exp\n \n # lto-obj -- compile to an object file\n #\n@@ -137,7 +138,13 @@ proc lto-obj { source dest optall optfile optstr xfaildata } {\n     lappend options \"additional_flags=$optall $optfile\"\n \n     set compiler_conditional_xfail_data $xfaildata\n-    set comp_output [${tool}_target_compile \"$source\" \"$dest\" object $options]\n+\n+    # Allow C source files to mix freely with other languages\n+    if [ string match \"*.c\" $source ] then {\n+      set comp_output [gcc_target_compile \"$source\" \"$dest\" object $options]\n+    } else {\n+      set comp_output [${tool}_target_compile \"$source\" \"$dest\" object $options]\n+    }\n     # Prune unimportant visibility warnings before checking output.\n     set comp_output [lto_prune_warns $comp_output]\n     ${tool}_check_compile \"$testcase $dest assemble\" $optstr $dest $comp_output"}]}