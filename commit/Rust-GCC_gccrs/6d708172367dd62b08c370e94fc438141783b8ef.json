{"sha": "6d708172367dd62b08c370e94fc438141783b8ef", "node_id": "C_kwDOANBUbNoAKDZkNzA4MTcyMzY3ZGQ2MmIwOGMzNzBlOTRmYzQzODE0MTc4M2I4ZWY", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-01-04T14:54:22Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-01-11T22:49:49Z"}, "message": "libgfortran: -mabi=ieeelongdouble I/O fix\n\nThe following patch fixes:\nFAIL: gfortran.dg/fmt_en.f90   -O0  output pattern test\nFAIL: gfortran.dg/fmt_en.f90   -O1  output pattern test\nFAIL: gfortran.dg/fmt_en.f90   -O2  output pattern test\nFAIL: gfortran.dg/fmt_en.f90   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  output pattern test\nFAIL: gfortran.dg/fmt_en.f90   -O3 -g  output pattern test\nFAIL: gfortran.dg/fmt_en.f90   -Os  output pattern test\nFAIL: gfortran.dg/fmt_en_rd.f90   -O0  output pattern test\nFAIL: gfortran.dg/fmt_en_rd.f90   -O1  output pattern test\nFAIL: gfortran.dg/fmt_en_rd.f90   -O2  output pattern test\nFAIL: gfortran.dg/fmt_en_rd.f90   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  output pattern test\nFAIL: gfortran.dg/fmt_en_rd.f90   -O3 -g  output pattern test\nFAIL: gfortran.dg/fmt_en_rd.f90   -Os  output pattern test\nFAIL: gfortran.dg/fmt_en_rn.f90   -O0  output pattern test\nFAIL: gfortran.dg/fmt_en_rn.f90   -O1  output pattern test\nFAIL: gfortran.dg/fmt_en_rn.f90   -O2  output pattern test\nFAIL: gfortran.dg/fmt_en_rn.f90   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  output pattern test\nFAIL: gfortran.dg/fmt_en_rn.f90   -O3 -g  output pattern test\nFAIL: gfortran.dg/fmt_en_rn.f90   -Os  output pattern test\nFAIL: gfortran.dg/fmt_en_ru.f90   -O0  output pattern test\nFAIL: gfortran.dg/fmt_en_ru.f90   -O1  output pattern test\nFAIL: gfortran.dg/fmt_en_ru.f90   -O2  output pattern test\nFAIL: gfortran.dg/fmt_en_ru.f90   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  output pattern test\nFAIL: gfortran.dg/fmt_en_ru.f90   -O3 -g  output pattern test\nFAIL: gfortran.dg/fmt_en_ru.f90   -Os  output pattern test\nFAIL: gfortran.dg/fmt_en_rz.f90   -O0  output pattern test\nFAIL: gfortran.dg/fmt_en_rz.f90   -O1  output pattern test\nFAIL: gfortran.dg/fmt_en_rz.f90   -O2  output pattern test\nFAIL: gfortran.dg/fmt_en_rz.f90   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  output pattern test\nFAIL: gfortran.dg/fmt_en_rz.f90   -O3 -g  output pattern test\nFAIL: gfortran.dg/fmt_en_rz.f90   -Os  output pattern test\nFAIL: gfortran.dg/fmt_g0_7.f08   -O0  execution test\nFAIL: gfortran.dg/fmt_g0_7.f08   -O1  execution test\nFAIL: gfortran.dg/fmt_g0_7.f08   -O2  execution test\nFAIL: gfortran.dg/fmt_g0_7.f08   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  execution test\nFAIL: gfortran.dg/fmt_g0_7.f08   -O3 -g  execution test\nFAIL: gfortran.dg/fmt_g0_7.f08   -Os  execution test\nFAIL: gfortran.dg/fmt_pf.f90   -O0  output pattern test\nFAIL: gfortran.dg/fmt_pf.f90   -O1  output pattern test\nFAIL: gfortran.dg/fmt_pf.f90   -O2  output pattern test\nFAIL: gfortran.dg/fmt_pf.f90   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  output pattern test\nFAIL: gfortran.dg/fmt_pf.f90   -O3 -g  output pattern test\nFAIL: gfortran.dg/fmt_pf.f90   -Os  output pattern test\nFAIL: gfortran.dg/large_real_kind_1.f90   -O0  execution test\nFAIL: gfortran.dg/large_real_kind_1.f90   -O1  execution test\nFAIL: gfortran.dg/large_real_kind_1.f90   -O2  execution test\nFAIL: gfortran.dg/large_real_kind_1.f90   -O3 -fomit-frame-pointer -funroll-loops -fpeel-loops -ftracer -finline-functions  execution test\nFAIL: gfortran.dg/large_real_kind_1.f90   -O3 -g  execution test\nFAIL: gfortran.dg/large_real_kind_1.f90   -Os  execution test\n\n2022-01-04  Jakub Jelinek  <jakub@redhat.com>\n\n\t* io/write_float.def (CALCULATE_EXP): If HAVE_GFC_REAL_17, also use\n\tCALCULATE_EXP(17).\n\t(determine_en_precision): Use 17 instead of 16 as first EN_PREC\n\targument for kind 17.\n\t(get_float_string): Use 17 instead of 16 as first FORMAT_FLOAT\n\targument for kind 17.", "tree": {"sha": "ce6cadb7363cbef5460e1df38a2780b2febac737", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ce6cadb7363cbef5460e1df38a2780b2febac737"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d708172367dd62b08c370e94fc438141783b8ef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d708172367dd62b08c370e94fc438141783b8ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d708172367dd62b08c370e94fc438141783b8ef", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d708172367dd62b08c370e94fc438141783b8ef/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07c60b8e33c614a6cdd9fe3de7f409319b6a239a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07c60b8e33c614a6cdd9fe3de7f409319b6a239a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07c60b8e33c614a6cdd9fe3de7f409319b6a239a"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "1f4be0d3b94342eba40fd2b1b38630153750ce7f", "filename": "libgfortran/io/write_float.def", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d708172367dd62b08c370e94fc438141783b8ef/libgfortran%2Fio%2Fwrite_float.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d708172367dd62b08c370e94fc438141783b8ef/libgfortran%2Fio%2Fwrite_float.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fwrite_float.def?ref=6d708172367dd62b08c370e94fc438141783b8ef", "patch": "@@ -799,6 +799,10 @@ CALCULATE_EXP(10)\n #ifdef HAVE_GFC_REAL_16\n CALCULATE_EXP(16)\n #endif\n+\n+#ifdef HAVE_GFC_REAL_17\n+CALCULATE_EXP(17)\n+#endif\n #undef CALCULATE_EXP\n \n \n@@ -942,7 +946,7 @@ determine_en_precision (st_parameter_dt *dtp, const fnode *f,\n #endif\n #ifdef HAVE_GFC_REAL_17\n     case 17:\n-      EN_PREC(16,Q)\n+      EN_PREC(17,Q)\n #endif\n       break;\n     default:\n@@ -1150,7 +1154,7 @@ get_float_string (st_parameter_dt *dtp, const fnode *f, const char *source,\n #endif\n #ifdef HAVE_GFC_REAL_17\n     case 17:\n-      FORMAT_FLOAT(16,Q)\n+      FORMAT_FLOAT(17,Q)\n       break;\n #endif\n     default:"}]}