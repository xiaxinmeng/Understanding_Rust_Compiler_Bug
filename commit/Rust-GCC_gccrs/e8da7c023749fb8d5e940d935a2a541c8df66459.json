{"sha": "e8da7c023749fb8d5e940d935a2a541c8df66459", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZThkYTdjMDIzNzQ5ZmI4ZDVlOTQwZDkzNWEyYTU0MWM4ZGY2NjQ1OQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "erich@gnu.org", "date": "1994-06-23T16:02:41Z"}, "committer": {"name": "Richard Earnshaw", "email": "erich@gnu.org", "date": "1994-06-23T16:02:41Z"}, "message": "Delete some dead code.\n\n(STARTFILE_SPEC): Look in the correct places for start files.\n(LIB_SPEC): Define.\n(LINK_SPEC): Define.\n(TARGET_WHEN_DEBUGGING): Delete.\n(DEFAULT_SIGNED_CHAR): Set to unsigned.\n(SIZE_TYPE, PTRDIFF_TYPE, TARGET_EDOM): Define.\n\nFrom-SVN: r7535", "tree": {"sha": "2ab4650eea90c8653bd9c23abee013a724d14c85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2ab4650eea90c8653bd9c23abee013a724d14c85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e8da7c023749fb8d5e940d935a2a541c8df66459", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8da7c023749fb8d5e940d935a2a541c8df66459", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8da7c023749fb8d5e940d935a2a541c8df66459", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8da7c023749fb8d5e940d935a2a541c8df66459/comments", "author": null, "committer": null, "parents": [{"sha": "7ea544d4ce07a7948c4b39263539a8d537f3706c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ea544d4ce07a7948c4b39263539a8d537f3706c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ea544d4ce07a7948c4b39263539a8d537f3706c"}], "stats": {"total": 58, "additions": 38, "deletions": 20}, "files": [{"sha": "bb2d287b1e73f4c056a01d87879b4a46f05794a5", "filename": "gcc/config/arm/riscix.h", "status": "modified", "additions": 38, "deletions": 20, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8da7c023749fb8d5e940d935a2a541c8df66459/gcc%2Fconfig%2Farm%2Friscix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8da7c023749fb8d5e940d935a2a541c8df66459/gcc%2Fconfig%2Farm%2Friscix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Friscix.h?ref=e8da7c023749fb8d5e940d935a2a541c8df66459", "patch": "@@ -20,18 +20,37 @@ You should have received a copy of the GNU General Public License\n along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n-/* Translation to find startup files.  On RISCiX boxes, gcrt0.o is in\n-   /usr/lib.  */\n-#define STARTFILE_SPEC  \\\n-  \"%{pg:/usr/lib/gcrt0.o%s}%{!pg:%{p:mcrt0.o%s}%{!p:crt0.o%s}}\"\n+/* Translation to find startup files.  On RISC iX boxes,\n+   crt0, mcrt0 and gcrt0.o are in /usr/lib.  */\n+#define STARTFILE_SPEC  \"\\\n+  %{pg:/usr/lib/mcrt0.o%s}\\\n+  %{!pg:%{p:/usr/lib/mcrt0.o%s}\\\n+        %{!p:%{g:/usr/lib/gcrt0.o%s}\\\n+        %{!g:/usr/lib/crt0.o%s}}}\"\n+\n+\n+/* RISC iX has no concept of -lg */\n+/* If -static is specified then link with -lc_n */\n+\n+#ifndef LIB_SPEC\n+#define LIB_SPEC \"\\\n+  %{g*:-lg}\\\n+  %{!p:%{!pg:%{!static:-lc}%{static:-lc_n}}}\\\n+  %{p:-lc_p}\\\n+  %{pg:-lc_p}\"\n+#endif\n+  \n+/* The RISC iX assembler never deletes any symbols from the object module;\n+   and, by default, ld doesn't either.  -X causes local symbols starting\n+   with 'L' to be deleted, which is what we want.  */\n+#ifndef LINK_SPEC\n+#define LINK_SPEC \"-X\"\n+#endif\n \n #ifndef CPP_PREDEFINES\n #define CPP_PREDEFINES  \\\n     \"-Darm -Driscix -Dunix -Asystem(unix) -Acpu(arm) -Amachine(arm)\"\n #endif\n-#if 0\n-#define CPP_PREDEFINES  \"-Darm -Driscos -Acpu(arm) -Amachine(arm)\"\n-#endif\n \n #ifndef CPP_SPEC\n #define CPP_SPEC \"%{m6:-D__arm6__} \\\n@@ -78,33 +97,32 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n /* This is used in ASM_FILE_START */\n #define ARM_OS_NAME \"RISCiX\"\n \n-#ifdef riscos\n-#define TARGET_WHEN_DEBUGGING  3\n-#else\n-#define TARGET_WHEN_DEBUGGING  1\n-#endif\n-\n-/* 'char' is signed by default on RISCiX, unsigned on RISCOS.  */\n-#ifdef riscos\n+/* Unsigned chars produces much better code than signed.  */\n #define DEFAULT_SIGNED_CHAR  0\n-#else\n-#define DEFAULT_SIGNED_CHAR  1\n-#endif\n \n-/* Define this if the target system supports the function atexit form the\n+/* Define this if the target system supports the function atexit from the\n    ANSI C standard.  If this is not defined, and INIT_SECTION_ASM_OP is not\n    defined, a default exit function will be provided to support C++.  \n    The man page only describes on_exit, but atexit is also there.  */\n #define HAVE_ATEXIT 1\n+\n /* Some systems use __main in a way incompatible with its use in gcc, in these\n    cases use the macros NAME__MAIN to give a quoted symbol and SYMBOL__MAIN to\n    give the same symbol without quotes for an alternative entry point.  You\n-   must define both, or niether. */\n+   must define both, or neither. */\n #ifndef NAME__MAIN\n #define NAME__MAIN \"__gccmain\"\n #define SYMBOL__MAIN __gccmain\n #endif\n \n+/* size_t is \"unsigned int\" in RISCiX */\n+#define SIZE_TYPE unsigned int\n+\n+/* ptrdiff_t is \"int\" in RISCiX */\n+#define PTRDIFF_TYPE int\n+\n+/* Maths operation domain error number, EDOM */\n+#define TARGET_EDOM 33\n #include \"arm/arm.h\"\n \n /* The native RISCiX assembler does not support stabs of any kind; because"}]}