{"sha": "63787194e1a9a90650caf40922dc09b31a0501bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM3ODcxOTRlMWE5YTkwNjUwY2FmNDA5MjJkYzA5YjMxYTA1MDFiZA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-04-04T19:11:05Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-04T19:11:05Z"}, "message": "utils.c (finish_record_type): Force structural equality checks if the record type is discriminated.\n\n\t* gcc-interface/utils.c (finish_record_type): Force structural equality\n\tchecks if the record type is discriminated.\n\nFrom-SVN: r145549", "tree": {"sha": "598fac2051dbb237479e17097b44b966cdc5a380", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/598fac2051dbb237479e17097b44b966cdc5a380"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63787194e1a9a90650caf40922dc09b31a0501bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63787194e1a9a90650caf40922dc09b31a0501bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63787194e1a9a90650caf40922dc09b31a0501bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63787194e1a9a90650caf40922dc09b31a0501bd/comments", "author": null, "committer": null, "parents": [{"sha": "5eeeac64dc4204103a5e394ab522c2780b2410f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eeeac64dc4204103a5e394ab522c2780b2410f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5eeeac64dc4204103a5e394ab522c2780b2410f7"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "992b1e0b6a4a20816e64539f494c2a8c354434f8", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63787194e1a9a90650caf40922dc09b31a0501bd/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63787194e1a9a90650caf40922dc09b31a0501bd/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=63787194e1a9a90650caf40922dc09b31a0501bd", "patch": "@@ -1,3 +1,8 @@\n+2009-04-04  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/utils.c (finish_record_type): Force structural equality\n+\tchecks if the record type is discriminated.\n+\n 2009-03-31  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* system-linux-alpha.ads (Functions_Return_By_DSP): Remove."}, {"sha": "51bce2fd4197658c8168d241d204558686ed98e5", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63787194e1a9a90650caf40922dc09b31a0501bd/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63787194e1a9a90650caf40922dc09b31a0501bd/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=63787194e1a9a90650caf40922dc09b31a0501bd", "patch": "@@ -977,6 +977,11 @@ finish_record_type (tree record_type, tree fieldlist, int rep_level,\n   if (code == QUAL_UNION_TYPE)\n     nreverse (fieldlist);\n \n+  /* If the type is discriminated, it can be used to access all its\n+     constrained subtypes, so force structural equality checks.  */\n+  if (CONTAINS_PLACEHOLDER_P (size))\n+    SET_TYPE_STRUCTURAL_EQUALITY (record_type);\n+\n   if (rep_level < 2)\n     {\n       /* If this is a padding record, we never want to make the size smaller"}]}