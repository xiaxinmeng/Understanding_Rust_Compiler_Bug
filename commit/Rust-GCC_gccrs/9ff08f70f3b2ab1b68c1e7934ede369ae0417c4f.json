{"sha": "9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWZmMDhmNzBmM2IyYWIxYjY4YzFlNzkzNGVkZTM2OWFlMDQxN2M0Zg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-02-26T21:11:04Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-02-26T21:11:04Z"}, "message": "(count_reg_usage, case SET): If SRC has side-effects, count a usage of\nDEST in it.\n\nFrom-SVN: r6631", "tree": {"sha": "0ccec64eeb183beb37bb7eca2b541f679aa57043", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ccec64eeb183beb37bb7eca2b541f679aa57043"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f/comments", "author": null, "committer": null, "parents": [{"sha": "766f36c7cf7003b953eccfd91ec09c26a27cc49a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/766f36c7cf7003b953eccfd91ec09c26a27cc49a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/766f36c7cf7003b953eccfd91ec09c26a27cc49a"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "b0294782c0ad17768c1265e8805285446ae7f4ef", "filename": "gcc/cse.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=9ff08f70f3b2ab1b68c1e7934ede369ae0417c4f", "patch": "@@ -8338,7 +8338,16 @@ count_reg_usage (x, counts, dest, incr)\n       /* Unless we are setting a REG, count everything in SET_DEST.  */\n       if (GET_CODE (SET_DEST (x)) != REG)\n \tcount_reg_usage (SET_DEST (x), counts, NULL_RTX, incr);\n-      count_reg_usage (SET_SRC (x), counts, SET_DEST (x), incr);\n+\n+      /* If SRC has side-effects, then we can't delete this insn, so the\n+\t usage of SET_DEST inside SRC counts.\n+\n+\t ??? Strictly-speaking, we might be preserving this insn\n+\t because some other SET has side-effects, but that's hard\n+\t to do and can't happen now.  */\n+      count_reg_usage (SET_SRC (x), counts,\n+\t\t       side_effects_p (SET_SRC (x)) ? NULL_RTX : SET_DEST (x),\n+\t\t       incr);\n       return;\n \n     case INSN:"}]}