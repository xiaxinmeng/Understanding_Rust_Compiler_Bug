{"sha": "a93770efeb027ef5c21c5d4f60dae01fc820c4f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTkzNzcwZWZlYjAyN2VmNWMyMWM1ZDRmNjBkYWUwMWZjODIwYzRmMA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2005-10-14T08:46:55Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2005-10-14T08:46:55Z"}, "message": "re PR java/23620 (Segfault compiling inner interfaces)\n\n\tPR java/23620\n\t* class.c (make_class): Create empty binfo here.\n\t(set_super_info): Only create binfo if we have superclasses.\n\nCo-Authored-By: Wil Mahan <wmahan@gmail.com>\n\nFrom-SVN: r105399", "tree": {"sha": "2185ad06b8afcf4dee078560aaf40bd6d3001429", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2185ad06b8afcf4dee078560aaf40bd6d3001429"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a93770efeb027ef5c21c5d4f60dae01fc820c4f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a93770efeb027ef5c21c5d4f60dae01fc820c4f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a93770efeb027ef5c21c5d4f60dae01fc820c4f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a93770efeb027ef5c21c5d4f60dae01fc820c4f0/comments", "author": null, "committer": null, "parents": [{"sha": "2acb1af9aae1057e9a3af38b4c6f4f40f0f79205", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2acb1af9aae1057e9a3af38b4c6f4f40f0f79205", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2acb1af9aae1057e9a3af38b4c6f4f40f0f79205"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "33c01d7d146d9f4c37727164bd4171dae67f8c13", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93770efeb027ef5c21c5d4f60dae01fc820c4f0/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93770efeb027ef5c21c5d4f60dae01fc820c4f0/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=a93770efeb027ef5c21c5d4f60dae01fc820c4f0", "patch": "@@ -1,3 +1,10 @@\n+2005-10-12  Nathan Sidwell  <nathan@codesourcery.com>\n+\t    Wil Mahan <wmahan@gmail.com>\n+\n+\tPR java/23620\n+\t* class.c (make_class): Create empty binfo here.\n+\t(set_super_info): Only create binfo if we have superclasses.\n+\n 2005-10-03  Ranjit Mathew  <rmathew@gcc.gnu.org>\n \n \tPR java/24127"}, {"sha": "eb9ea71fdb5cb67728ac190fcefedcf64d9bc651", "filename": "gcc/java/class.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93770efeb027ef5c21c5d4f60dae01fc820c4f0/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93770efeb027ef5c21c5d4f60dae01fc820c4f0/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=a93770efeb027ef5c21c5d4f60dae01fc820c4f0", "patch": "@@ -319,6 +319,9 @@ make_class (void)\n {\n   tree type;\n   type = make_node (RECORD_TYPE);\n+  /* Unfortunately we must create the binfo here, so that class\n+     loading works.  */\n+  TYPE_BINFO (type) = make_tree_binfo (0);\n   MAYBE_CREATE_TYPE_TYPE_LANG_SPECIFIC (type);\n \n   return type;\n@@ -468,7 +471,8 @@ set_super_info (int access_flags, tree this_class,\n   if (super_class)\n     total_supers++;\n \n-  TYPE_BINFO (this_class) = make_tree_binfo (total_supers);\n+  if (total_supers)\n+    TYPE_BINFO (this_class) = make_tree_binfo (total_supers);\n   TYPE_VFIELD (this_class) = TYPE_VFIELD (object_type_node);\n   if (super_class)\n     {"}]}