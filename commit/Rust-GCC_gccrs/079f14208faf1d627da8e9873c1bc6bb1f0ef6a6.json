{"sha": "079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDc5ZjE0MjA4ZmFmMWQ2MjdkYThlOTg3M2MxYmM2YmIxZjBlZjZhNg==", "commit": {"author": {"name": "Senthil Kumar Selvaraj", "email": "senthil_kumar.selvaraj@atmel.com", "date": "2014-05-12T15:33:00Z"}, "committer": {"name": "Denis Chertykov", "email": "denisc@gcc.gnu.org", "date": "2014-05-12T15:33:00Z"}, "message": "re PR target/60991 ([avr] Stack corruption when using 24-bit integers __int24 or __memx pointers in large stack frame)\n\ngcc/ChangeLog\n\n\tPR target/60991\n\t* config/avr/avr.c (avr_out_store_psi): Use correct constant\n\tto restore Y.\n\ngcc/testsuite/ChangeLog\n\n\tPR target/60991\n\t* gcc.target/avr/pr60991.c: New testcase.\n\nFrom-SVN: r210325", "tree": {"sha": "8a2fec6d9b34d0a86fca75c51bd4b9df184fbfb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a2fec6d9b34d0a86fca75c51bd4b9df184fbfb9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/comments", "author": null, "committer": null, "parents": [{"sha": "c7ae26aab85ec0ddb4afeb808a32427c1f4b902b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7ae26aab85ec0ddb4afeb808a32427c1f4b902b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7ae26aab85ec0ddb4afeb808a32427c1f4b902b"}], "stats": {"total": 34, "additions": 33, "deletions": 1}, "files": [{"sha": "b5cf3b2ee158926e2e4f67f867ab5b26e310ab23", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "patch": "@@ -1,3 +1,9 @@\n+2014-05-12  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n+\n+\tPR target/60991\n+\t* config/avr/avr.c (avr_out_store_psi): Use correct constant\n+\tto restore Y.\n+\n 2014-05-12  Georg-Johann Lay  <avr@gjlay.de>\n \n \t* config/arm/arm.h (License): Add GCC Runtime Library Exception."}, {"sha": "fc6c9f60072b627356e79fc8bed16b8aaab6e0e9", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "patch": "@@ -3999,7 +3999,7 @@ avr_out_store_psi (rtx insn, rtx *op, int *plen)\n                                 \"std Y+61,%A1\"    CR_TAB\n                                 \"std Y+62,%B1\"    CR_TAB\n                                 \"std Y+63,%C1\"    CR_TAB\n-                                \"sbiw r28,%o0-60\", op, plen, -5);\n+                                \"sbiw r28,%o0-61\", op, plen, -5);\n \n           return avr_asm_len (\"subi r28,lo8(-%o0)\" CR_TAB\n                               \"sbci r29,hi8(-%o0)\" CR_TAB"}, {"sha": "746aa4150664ea7ac0fcff42b03f7b1e92a002bc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "patch": "@@ -1,3 +1,8 @@\n+2014-05-12  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n+\n+\tPR target/60991\n+\t* gcc.target/avr/pr60991.c: New testcase.\n+\n 2014-05-12  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/60054"}, {"sha": "a09f42a62b3f6c056856a0505afeff7b8f3f7f42", "filename": "gcc/testsuite/gcc.target/avr/pr60991.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2Ftestsuite%2Fgcc.target%2Favr%2Fpr60991.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/079f14208faf1d627da8e9873c1bc6bb1f0ef6a6/gcc%2Ftestsuite%2Fgcc.target%2Favr%2Fpr60991.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Favr%2Fpr60991.c?ref=079f14208faf1d627da8e9873c1bc6bb1f0ef6a6", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O1\" } */\n+\n+/* This testcase (simplified from the original bug report) exposes \n+   PR60991. The code generated for writing the __int24 value corrupts\n+   the frame pointer if the offset is <= 63 + MAX_LD_OFFSET */\n+\n+#include <stdlib.h>\n+\n+int main(void)\n+{\n+    volatile char junk[62];\n+    junk[0] = 5;\n+    volatile __int24 staticConfig = 0;\n+\n+    if (junk[0] != 5)\n+      abort();\n+\n+    exit(0);\n+    return 0;\n+}"}]}