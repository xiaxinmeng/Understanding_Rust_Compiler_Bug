{"sha": "047d33a0d40c52a5b227766c9af65d695d10b190", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ3ZDMzYTBkNDBjNTJhNWIyMjc3NjZjOWFmNjVkNjk1ZDEwYjE5MA==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2011-06-04T10:08:09Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2011-06-04T10:08:09Z"}, "message": "re PR debug/48333 (-fcompare-debug failure (length) - \"memmove\" x \"__builtin_memmove\")\n\nPR debug/48333\n* calls.c (emit_call_1): Prefer the __builtin declaration of\nbuiltin functions.\n\nFrom-SVN: r174636", "tree": {"sha": "c32f943e34979d31a3ae1aa747c6a3dc76e55dd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c32f943e34979d31a3ae1aa747c6a3dc76e55dd4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/047d33a0d40c52a5b227766c9af65d695d10b190", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/047d33a0d40c52a5b227766c9af65d695d10b190", "html_url": "https://github.com/Rust-GCC/gccrs/commit/047d33a0d40c52a5b227766c9af65d695d10b190", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/047d33a0d40c52a5b227766c9af65d695d10b190/comments", "author": null, "committer": null, "parents": [{"sha": "57ee85b4394430954a5b2704dbf9d1852cd571fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57ee85b4394430954a5b2704dbf9d1852cd571fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57ee85b4394430954a5b2704dbf9d1852cd571fb"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "c7f031f4ade1479c43a14bbc832311b18a6bc371", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/047d33a0d40c52a5b227766c9af65d695d10b190/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/047d33a0d40c52a5b227766c9af65d695d10b190/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=047d33a0d40c52a5b227766c9af65d695d10b190", "patch": "@@ -1,3 +1,9 @@\n+2011-06-04  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR debug/48333\n+\t* calls.c (emit_call_1): Prefer the __builtin declaration of\n+\tbuiltin functions.\n+\n 2011-06-03   Diego Novillo  <dnovillo@google.com>\n \n \t* lto-streamer-in.c (unpack_value_fields): Remove unneeded asserts."}, {"sha": "f5592c5a6d9461dfaa5e76981c2eb2d64a58e656", "filename": "gcc/calls.c", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/047d33a0d40c52a5b227766c9af65d695d10b190/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/047d33a0d40c52a5b227766c9af65d695d10b190/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=047d33a0d40c52a5b227766c9af65d695d10b190", "patch": "@@ -272,7 +272,20 @@ emit_call_1 (rtx funexp, tree fntree ATTRIBUTE_UNUSED, tree fndecl ATTRIBUTE_UNU\n \n   funmem = gen_rtx_MEM (FUNCTION_MODE, funexp);\n   if (fndecl && TREE_CODE (fndecl) == FUNCTION_DECL)\n-    set_mem_expr (funmem, fndecl);\n+    {\n+      tree t = fndecl;\n+      /* Although a built-in FUNCTION_DECL and its non-__builtin\n+\t counterpart compare equal and get a shared mem_attrs, they\n+\t produce different dump output in compare-debug compilations,\n+\t if an entry gets garbage collected in one compilation, then\n+\t adds a different (but equivalent) entry, while the other\n+\t doesn't run the garbage collector at the same spot and then\n+\t shares the mem_attr with the equivalent entry. */\n+      if (DECL_BUILT_IN_CLASS (t) == BUILT_IN_NORMAL\n+\t  && built_in_decls[DECL_FUNCTION_CODE (t)])\n+\tt = built_in_decls[DECL_FUNCTION_CODE (t)];\n+      set_mem_expr (funmem, t);\n+    }\n   else if (fntree)\n     set_mem_expr (funmem, build_simple_mem_ref (CALL_EXPR_FN (fntree)));\n "}]}