{"sha": "92c3688a97530f013adfd64a394b9a286a20128f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJjMzY4OGE5NzUzMGYwMTNhZGZkNjRhMzk0YjlhMjg2YTIwMTI4Zg==", "commit": {"author": {"name": "Stephen M. Webb", "email": "stephen@bregmasoft.com", "date": "2001-04-02T22:51:25Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-04-02T22:51:25Z"}, "message": "std_cstring.h: Fix for const-correctness.\n\n\n2001-04-02  Stephen M. Webb  <stephen@bregmasoft.com>\n\n\t* include/c_std/bits/std_cstring.h: Fix for const-correctness.\n\t* include/c_std/bits/std_cwchar.h: Same.\n\t* testsuite/21_strings/c_strings.cc: Add.\n\nFrom-SVN: r41019", "tree": {"sha": "c4a0641c9e6392439c1bed0971833e323ca163a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4a0641c9e6392439c1bed0971833e323ca163a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92c3688a97530f013adfd64a394b9a286a20128f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92c3688a97530f013adfd64a394b9a286a20128f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92c3688a97530f013adfd64a394b9a286a20128f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92c3688a97530f013adfd64a394b9a286a20128f/comments", "author": null, "committer": null, "parents": [{"sha": "57df35602ed39e18c94da7f88b8764423f6040e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57df35602ed39e18c94da7f88b8764423f6040e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57df35602ed39e18c94da7f88b8764423f6040e9"}], "stats": {"total": 76, "additions": 66, "deletions": 10}, "files": [{"sha": "ceb86b2c764358b4582cd2370e792e6543b3fef2", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92c3688a97530f013adfd64a394b9a286a20128f/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92c3688a97530f013adfd64a394b9a286a20128f/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=92c3688a97530f013adfd64a394b9a286a20128f", "patch": "@@ -1,3 +1,9 @@\n+2001-04-02  Stephen M. Webb  <stephen@bregmasoft.com> \n+\t\n+\t* include/c_std/bits/std_cstring.h: Fix for const-correctness.\n+\t* include/c_std/bits/std_cwchar.h: Same.\n+\t* testsuite/21_strings/c_strings.cc: Add.\n+\t\n 2001-04-01  Benjamin Kosnik  <bkoz@codesourcery.com>\n \n \t* docs/html/configopts.html: Add --enable-sjlj-exceptions docs."}, {"sha": "52b490264ed0e6a7d8e783306cc7051ff626d94f", "filename": "libstdc++-v3/include/c_std/bits/std_cstring.h", "status": "modified", "additions": 30, "deletions": 5, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92c3688a97530f013adfd64a394b9a286a20128f/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstring.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92c3688a97530f013adfd64a394b9a286a20128f/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstring.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstring.h?ref=92c3688a97530f013adfd64a394b9a286a20128f", "patch": "@@ -79,13 +79,38 @@ namespace std\n   extern \"C\" int strcoll(const char*, const char*); \n   extern \"C\" int strncmp(const char*, const char*, size_t); \n   extern \"C\" size_t strxfrm(char*, const char*, size_t); \n-  extern \"C\" void* memchr(const void*, int, size_t); \n-  extern \"C\" char* strchr(const char*, int); \n+  extern \"C\" const void* memchr(const void*, int, size_t); \n+  inline void*\n+  memchr(void* __p, int __c, size_t __n)\n+  {\n+    return const_cast<void*>(memchr(const_cast<const void*>(__p), __c, __n));\n+  }\n+  extern \"C\" const char* strchr(const char*, int); \n+  inline char*\n+  strchr(char* __s1, int __n)\n+  {\n+    return const_cast<char*>(strchr(const_cast<const char*>(__s1), __n));\n+  }\n   extern \"C\" size_t strcspn(const char*, const char*); \n-  extern \"C\" char* strpbrk(const char*, const char*); \n-  extern \"C\" char* strrchr(const char*, int); \n+  extern \"C\" const char* strpbrk(const char*, const char*); \n+  inline char*\n+  strpbrk(char* __s1, const char* __s2)\n+  {\n+    return const_cast<char*>(strpbrk(const_cast<const char*>(__s1), __s2));\n+  }\n+  extern \"C\" const char* strrchr(const char*, int); \n+  inline char*\n+  strrchr(char* __s1, int __n)\n+  {\n+    return const_cast<char*>(strrchr(const_cast<const char*>(__s1), __n));\n+  }\n   extern \"C\" size_t strspn(const char*, const char*); \n-  extern \"C\" char* strstr(const char*, const char*); \n+  extern \"C\" const char* strstr(const char*, const char*); \n+  inline char*\n+  strstr(char* __s1, const char* __s2)\n+  {\n+    return const_cast<char*>(strstr(const_cast<const char*>(__s1), __s2));\n+  }\n   extern \"C\" char* strtok(char*, const char*); \n   extern \"C\" void* memset(void*, int, size_t); \n   extern \"C\" char* strerror(int); "}, {"sha": "e9e987adfd7aec35330cb78ea7491fa5d257ed46", "filename": "libstdc++-v3/include/c_std/bits/std_cwchar.h", "status": "modified", "additions": 30, "deletions": 5, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92c3688a97530f013adfd64a394b9a286a20128f/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cwchar.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92c3688a97530f013adfd64a394b9a286a20128f/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cwchar.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cwchar.h?ref=92c3688a97530f013adfd64a394b9a286a20128f", "patch": "@@ -157,15 +157,40 @@ namespace std\n   extern \"C\" int wcscoll(const wchar_t*, const wchar_t*); \n   extern \"C\" int wcsncmp(const wchar_t*, const wchar_t*, size_t); \n   extern \"C\" size_t wcsxfrm(wchar_t*, const wchar_t*, size_t); \n-  extern \"C\" wchar_t* wcschr(const wchar_t*, wchar_t); \n+  extern \"C\" const wchar_t* wcschr(const wchar_t*, wchar_t); \n+  inline wchar_t*\n+  wcschr(wchar_t* __p, wchar_t __c)\n+  {\n+    return const_cast<wchar_t*>(wcschr(const_cast<const wchar_t*>(__p), __c));\n+  }\n   extern \"C\" size_t wcscspn(const wchar_t*, const wchar_t*); \n   extern \"C\" size_t wcslen(const wchar_t*); \n-  extern \"C\" wchar_t* wcspbrk(const wchar_t*, const wchar_t*); \n-  extern \"C\" wchar_t* wcsrchr(const wchar_t*, wchar_t); \n+  extern \"C\" const wchar_t* wcspbrk(const wchar_t*, const wchar_t*); \n+  inline wchar_t*\n+  wcspbrk(wchar_t* __s1, wchar_t* __s2)\n+  {\n+    return const_cast<wchar_t*>(wcspbrk(const_cast<const wchar_t*>(__s1), __s2));\n+  }\n+  extern \"C\" const wchar_t* wcsrchr(const wchar_t*, wchar_t); \n+  inline wchar_t*\n+  wcsrchr(wchar_t* __p, wchar_t __c)\n+  {\n+    return const_cast<wchar_t*>(wcsrchr(const_cast<const wchar_t*>(__p), __c));\n+  }\n   extern \"C\" size_t wcsspn(const wchar_t*, const wchar_t*); \n-  extern \"C\" wchar_t* wcsstr(const wchar_t*, const wchar_t*); \n+  extern \"C\" const wchar_t* wcsstr(const wchar_t*, const wchar_t*); \n+  inline wchar_t*\n+  wcsstr(wchar_t* __s1, wchar_t* __s2)\n+  {\n+    return const_cast<wchar_t*>(wcsstr(const_cast<const wchar_t*>(__s1), __s2));\n+  }\n   extern \"C\" wchar_t* wcstok(wchar_t*, const wchar_t*, wchar_t**); \n-  extern \"C\" wchar_t* wmemchr(const wchar_t*, wchar_t, size_t);\n+  extern \"C\" const wchar_t* wmemchr(const wchar_t*, wchar_t, size_t);\n+  inline wchar_t*\n+  wmemchr(wchar_t* __p, wchar_t __c, size_t __n)\n+  {\n+    return const_cast<wchar_t*>(wmemchr(const_cast<const wchar_t*>(__p), __c, __n));\n+  }\n   extern \"C\" int wmemcmp(const wchar_t*, const wchar_t*, size_t); \n   //extern \"C\" int wmemcmp(wchar_t*, const wchar_t*, size_t); \n   extern \"C\" wchar_t* wmemcpy(wchar_t*, const wchar_t*, size_t); "}]}