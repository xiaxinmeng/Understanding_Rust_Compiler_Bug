{"sha": "334a03fd1e560c81ccf7b3a47e7481307fc5babe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzM0YTAzZmQxZTU2MGM4MWNjZjdiM2E0N2U3NDgxMzA3ZmM1YmFiZQ==", "commit": {"author": {"name": "Adam Nemet", "email": "anemet@lnxw.com", "date": "2005-07-25T18:55:29Z"}, "committer": {"name": "Adam Nemet", "email": "nemet@gcc.gnu.org", "date": "2005-07-25T18:55:29Z"}, "message": "profopt.exp (profopt-execute): Check for profiling data files on the target.\n\n        * lib/profopt.exp (profopt-execute): Check for profiling data\n        files on the target.\n\nFrom-SVN: r102366", "tree": {"sha": "3ee78fcce4155dfa0f538469a708296103d24b12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ee78fcce4155dfa0f538469a708296103d24b12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/334a03fd1e560c81ccf7b3a47e7481307fc5babe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/334a03fd1e560c81ccf7b3a47e7481307fc5babe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/334a03fd1e560c81ccf7b3a47e7481307fc5babe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/334a03fd1e560c81ccf7b3a47e7481307fc5babe/comments", "author": null, "committer": null, "parents": [{"sha": "1490f93a3c1bdce96d2dddfae1825821c703ab1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1490f93a3c1bdce96d2dddfae1825821c703ab1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1490f93a3c1bdce96d2dddfae1825821c703ab1c"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "affa4b6933af9a6776d64135d66f363b3a957569", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/334a03fd1e560c81ccf7b3a47e7481307fc5babe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/334a03fd1e560c81ccf7b3a47e7481307fc5babe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=334a03fd1e560c81ccf7b3a47e7481307fc5babe", "patch": "@@ -1,3 +1,8 @@\n+2005-07-25  Adam Nemet  <anemet@lnxw.com>\n+\n+        * lib/profopt.exp (profopt-execute): Check for profiling data\n+        files on the target.\n+\n 2005-07-25  Richard Guenther  <rguenther@gcc.gnu.org>\n \n \t* gcc.dg/tree-ssa/flatten-1.c: Use longer function names"}, {"sha": "a33742cdb850611b4e9c8f1aae07c3c8c2035c91", "filename": "gcc/testsuite/lib/profopt.exp", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/334a03fd1e560c81ccf7b3a47e7481307fc5babe/gcc%2Ftestsuite%2Flib%2Fprofopt.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/334a03fd1e560c81ccf7b3a47e7481307fc5babe/gcc%2Ftestsuite%2Flib%2Fprofopt.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fprofopt.exp?ref=334a03fd1e560c81ccf7b3a47e7481307fc5babe", "patch": "@@ -231,6 +231,8 @@ proc profopt-execute { src } {\n     }\n \n     set executable $tmpdir/[file tail [file rootname $src].x]\n+    set basename [file tail $testcase]\n+    set base [file rootname $basename]\n \n     set count 0\n     foreach option $prof_option_list {\n@@ -245,7 +247,9 @@ proc profopt-execute { src } {\n \tverbose \"Testing $testcase, $option\" 1\n \n \t# Remove old profiling and performance data files.\n-\tprofopt-cleanup $testcase $prof_ext\n+\tforeach ext $prof_ext {\n+\t    remote_file target delete $tmpdir/$base.$ext\n+\t}\n \tif [info exists perf_ext] {\n \t    profopt-cleanup $testcase $perf_ext\n \t}\n@@ -282,9 +286,8 @@ proc profopt-execute { src } {\n \tset missing_file 0\n \t# Make sure the profile data was generated, and fail if not.\n \tif { $status == \"pass\" } {\n-\t    set basename [file tail $testcase]\n-\t    set base [file rootname $basename]\n \t    foreach ext $prof_ext {\n+\t\tremote_upload target $tmpdir/$base.$ext\n \t\tset files [glob -nocomplain $base.$ext]\n \t\tif { $files == \"\" } {\n \t\t    set status \"fail\"\n@@ -335,7 +338,9 @@ proc profopt-execute { src } {\n \t}\n \n \t# Remove the profiling data files.\n-\tprofopt-cleanup $testcase $prof_ext\n+\tforeach ext $prof_ext {\n+\t    remote_file target delete $tmpdir/$base.$ext\n+\t}\n \n \tif { $status != \"pass\" } {\n \t    continue"}]}