{"sha": "ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI1NTVhNWIzZWViYzdjNGI0NmZkYzliMzg3NGY4OGZjOWUwNDU2NQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2008-03-15T11:17:05Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-03-15T11:17:05Z"}, "message": "mmx.md (\"sse2_umulv1siv2di3\"): Rename from \"sse2_umulsidi3\".\n\n        * config/i386/mmx.md (\"sse2_umulv1siv2di3\"): Rename from\n        \"sse2_umulsidi3\".  Use V1DI mode for operand 0.\n        (\"mmx_psadbw\"): Use V1DI mode for operand 0.\n        * config/i386/i386-modes.def (V1SI): New vector mode.\n        * config/i386/i386.c (struct builtin_description)\n        [IX86_BUILTIN_PMULUDQ]: Use CODE_FOR_sse2_umulv1siv1di3.\n        (v1di_ftype_v8qi_v8qi): Rename from di_ftype_v8qi_v8qi.\n        (v1di_ftype_v2si_v2si): Rename from di_ftype_v2si_v2si.\n        (ix86_init_mmx_sse_builtins) [__builtin_ia32_psadbw]: Use\n        v1di_ftype_v8qi_v8qi type.\n        [__builtin_ia32_pmuludq]: Use v1di_ftype_v2si_v2si type.\n\nFrom-SVN: r133243", "tree": {"sha": "1d6cf143b311552dfb5cf3c3cf4451a57e70d4f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d6cf143b311552dfb5cf3c3cf4451a57e70d4f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "79f34d07641508d76e58ed97f01facbd64ffdebd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79f34d07641508d76e58ed97f01facbd64ffdebd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79f34d07641508d76e58ed97f01facbd64ffdebd"}], "stats": {"total": 58, "additions": 38, "deletions": 20}, "files": [{"sha": "36867fc84edead96ac55c7c693bdfa8084684a12", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "patch": "@@ -1,3 +1,20 @@\n+2008-03-15  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/mmx.md (\"sse2_umulv1siv2di3\"): Rename from\n+\t\"sse2_umulsidi3\".  Use V1DI mode for operand 0.\n+\t(\"mmx_psadbw\"): Use V1DI mode for operand 0.\n+\t* config/i386/i386-modes.def (V1SI): New vector mode.\n+\t* config/i386/i386.c (struct builtin_description)\n+\t[IX86_BUILTIN_PMULUDQ]: Use CODE_FOR_sse2_umulv1siv1di3.\n+\t(v1di_ftype_v8qi_v8qi): Rename from di_ftype_v8qi_v8qi.\n+\t(v1di_ftype_v2si_v2si): Rename from di_ftype_v2si_v2si.\n+\t(ix86_init_mmx_sse_builtins) [__builtin_ia32_psadbw]: Use\n+\tv1di_ftype_v8qi_v8qi type.\n+\t[__builtin_ia32_pmuludq]: Use v1di_ftype_v2si_v2si type.\n+\n+\t* doc/extend.texi (X86 Built-in Functions) [__builtin_ia32_psadbw,\n+\t__builtin_ia32_pmuludq]: Fix the mode of return value.\n+\n 2008-03-15  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/35595"}, {"sha": "d94b1b929c4a8da0e5ccdd51bd5e2efabc7d0c6f", "filename": "gcc/config/i386/i386-modes.def", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fconfig%2Fi386%2Fi386-modes.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fconfig%2Fi386%2Fi386-modes.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-modes.def?ref=ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "patch": "@@ -80,6 +80,7 @@ VECTOR_MODES (INT, 16);       /* V16QI V8HI V4SI V2DI */\n VECTOR_MODES (FLOAT, 8);      /*            V4HF V2SF */\n VECTOR_MODES (FLOAT, 16);     /*       V8HF V4SF V2DF */\n VECTOR_MODE (INT, DI, 1);     /*                 V1DI */\n+VECTOR_MODE (INT, SI, 1);     /*                 V1SI */\n VECTOR_MODE (INT, QI, 2);     /*                 V2QI */\n VECTOR_MODE (INT, DI, 4);     /*                 V4DI */\n VECTOR_MODE (INT, SI, 8);     /*                 V8SI */"}, {"sha": "883f226b96839082aaf460eb9997d2a5c955b484", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "patch": "@@ -18122,7 +18122,7 @@ static const struct builtin_description bdesc_2arg[] =\n   { OPTION_MASK_ISA_SSE2, CODE_FOR_umulv8hi3_highpart, \"__builtin_ia32_pmulhuw128\", IX86_BUILTIN_PMULHUW128, UNKNOWN, 0 },\n   { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_psadbw, 0, IX86_BUILTIN_PSADBW128, UNKNOWN, 0 },\n \n-  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_umulsidi3, 0, IX86_BUILTIN_PMULUDQ, UNKNOWN, 0 },\n+  { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_umulv1siv1di3, 0, IX86_BUILTIN_PMULUDQ, UNKNOWN, 0 },\n   { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_umulv2siv2di3, 0, IX86_BUILTIN_PMULUDQ128, UNKNOWN, 0 },\n \n   { OPTION_MASK_ISA_SSE2, CODE_FOR_sse2_pmaddwd, 0, IX86_BUILTIN_PMADDWD128, UNKNOWN, 0 },\n@@ -18826,11 +18826,11 @@ ix86_init_mmx_sse_builtins (void)\n   tree v4si_ftype_v8hi_v8hi\n     = build_function_type_list (V4SI_type_node,\n \t\t\t\tV8HI_type_node, V8HI_type_node, NULL_TREE);\n-  tree di_ftype_v8qi_v8qi\n-    = build_function_type_list (long_long_unsigned_type_node,\n+  tree v1di_ftype_v8qi_v8qi\n+    = build_function_type_list (V1DI_type_node,\n \t\t\t\tV8QI_type_node, V8QI_type_node, NULL_TREE);\n-  tree di_ftype_v2si_v2si\n-    = build_function_type_list (long_long_unsigned_type_node,\n+  tree v1di_ftype_v2si_v2si\n+    = build_function_type_list (V1DI_type_node,\n \t\t\t\tV2SI_type_node, V2SI_type_node, NULL_TREE);\n   tree v2di_ftype_v16qi_v16qi\n     = build_function_type_list (V2DI_type_node,\n@@ -19318,7 +19318,7 @@ ix86_init_mmx_sse_builtins (void)\n \n   def_builtin (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_sfence\", void_ftype_void, IX86_BUILTIN_SFENCE);\n \n-  def_builtin_const (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_psadbw\", di_ftype_v8qi_v8qi, IX86_BUILTIN_PSADBW);\n+  def_builtin_const (OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_3DNOW_A, \"__builtin_ia32_psadbw\", v1di_ftype_v8qi_v8qi, IX86_BUILTIN_PSADBW);\n \n   def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rcpps\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPPS);\n   def_builtin_const (OPTION_MASK_ISA_SSE, \"__builtin_ia32_rcpss\", v4sf_ftype_v4sf, IX86_BUILTIN_RCPSS);\n@@ -19422,7 +19422,7 @@ ix86_init_mmx_sse_builtins (void)\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_loaddqu\", v16qi_ftype_pcchar, IX86_BUILTIN_LOADDQU);\n   def_builtin (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_storedqu\", void_ftype_pchar_v16qi, IX86_BUILTIN_STOREDQU);\n \n-  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_pmuludq\", di_ftype_v2si_v2si, IX86_BUILTIN_PMULUDQ);\n+  def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_pmuludq\", v1di_ftype_v2si_v2si, IX86_BUILTIN_PMULUDQ);\n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_pmuludq128\", v2di_ftype_v4si_v4si, IX86_BUILTIN_PMULUDQ128);\n \n   def_builtin_const (OPTION_MASK_ISA_SSE2, \"__builtin_ia32_pslldqi128\", v2di_ftype_v2di_int, IX86_BUILTIN_PSLLDQI128);"}, {"sha": "2238a3ffd14000a6e9ba1b4c9499ee51207afcd3", "filename": "gcc/config/i386/mmx.md", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fconfig%2Fi386%2Fmmx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fconfig%2Fi386%2Fmmx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fmmx.md?ref=ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "patch": "@@ -699,15 +699,15 @@\n   [(set_attr \"type\" \"mmxmul\")\n    (set_attr \"mode\" \"DI\")])\n \n-(define_insn \"sse2_umulsidi3\"\n-  [(set (match_operand:DI 0 \"register_operand\" \"=y\")\n-        (mult:DI\n-\t  (zero_extend:DI\n-\t    (vec_select:SI\n+(define_insn \"sse2_umulv1siv1di3\"\n+  [(set (match_operand:V1DI 0 \"register_operand\" \"=y\")\n+        (mult:V1DI\n+\t  (zero_extend:V1DI\n+\t    (vec_select:V1SI\n \t      (match_operand:V2SI 1 \"nonimmediate_operand\" \"%0\")\n \t      (parallel [(const_int 0)])))\n-\t  (zero_extend:DI\n-\t    (vec_select:SI\n+\t  (zero_extend:V1DI\n+\t    (vec_select:V1SI\n \t      (match_operand:V2SI 2 \"nonimmediate_operand\" \"ym\")\n \t      (parallel [(const_int 0)])))))]\n   \"TARGET_SSE2 && ix86_binary_operator_ok (MULT, V2SImode, operands)\"\n@@ -1293,10 +1293,10 @@\n    (set_attr \"mode\" \"DI\")])\n \n (define_insn \"mmx_psadbw\"\n-  [(set (match_operand:DI 0 \"register_operand\" \"=y\")\n-        (unspec:DI [(match_operand:V8QI 1 \"register_operand\" \"0\")\n-\t\t    (match_operand:V8QI 2 \"nonimmediate_operand\" \"ym\")]\n-\t\t   UNSPEC_PSADBW))]\n+  [(set (match_operand:V1DI 0 \"register_operand\" \"=y\")\n+        (unspec:V1DI [(match_operand:V8QI 1 \"register_operand\" \"0\")\n+\t\t      (match_operand:V8QI 2 \"nonimmediate_operand\" \"ym\")]\n+\t\t     UNSPEC_PSADBW))]\n   \"TARGET_SSE || TARGET_3DNOW_A\"\n   \"psadbw\\t{%2, %0|%0, %2}\"\n   [(set_attr \"type\" \"mmxshft\")"}, {"sha": "26a8e70b7fa7a2c2568067087735d0a41edfd52e", "filename": "gcc/doc/extend.texi", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fdoc%2Fextend.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565/gcc%2Fdoc%2Fextend.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fextend.texi?ref=ab555a5b3eebc7c4b46fdc9b3874f88fc9e04565", "patch": "@@ -7505,7 +7505,7 @@ instruction that is part of the name.\n v4hi __builtin_ia32_pmulhuw (v4hi, v4hi)\n v8qi __builtin_ia32_pavgb (v8qi, v8qi)\n v4hi __builtin_ia32_pavgw (v4hi, v4hi)\n-v4hi __builtin_ia32_psadbw (v8qi, v8qi)\n+v1di __builtin_ia32_psadbw (v8qi, v8qi)\n v8qi __builtin_ia32_pmaxub (v8qi, v8qi)\n v4hi __builtin_ia32_pmaxsw (v4hi, v4hi)\n v8qi __builtin_ia32_pminub (v8qi, v8qi)\n@@ -7753,7 +7753,7 @@ void __builtin_ia32_lfence (void)\n void __builtin_ia32_mfence (void)\n v16qi __builtin_ia32_loaddqu (const char *)\n void __builtin_ia32_storedqu (char *, v16qi)\n-unsigned long long __builtin_ia32_pmuludq (v2si, v2si)\n+v1di __builtin_ia32_pmuludq (v2si, v2si)\n v2di __builtin_ia32_pmuludq128 (v4si, v4si)\n v8hi __builtin_ia32_psllw128 (v8hi, v8hi)\n v4si __builtin_ia32_pslld128 (v4si, v4si)"}]}