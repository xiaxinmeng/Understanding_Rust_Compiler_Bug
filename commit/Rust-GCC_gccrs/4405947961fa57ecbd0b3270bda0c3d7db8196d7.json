{"sha": "4405947961fa57ecbd0b3270bda0c3d7db8196d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQwNTk0Nzk2MWZhNTdlY2JkMGIzMjcwYmRhMGMzZDdkYjgxOTZkNw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-11-23T18:55:50Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-11-23T18:55:50Z"}, "message": "decl.c (gnat_to_gnu_entity): Pass the list of attributes when building the corresponding variable of a constant.\n\n\t* gcc-interface/decl.c (gnat_to_gnu_entity) <E_Variable>: Pass the list\n\tof attributes when building the corresponding variable of a constant.\n\t* gcc-interface/utils.c (create_var_decl_1): Do not process attributes\n\tfor constants.\n\nFrom-SVN: r154458", "tree": {"sha": "c59b1845ae54b4bff9e737ce6ec358e0e146715e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c59b1845ae54b4bff9e737ce6ec358e0e146715e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4405947961fa57ecbd0b3270bda0c3d7db8196d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4405947961fa57ecbd0b3270bda0c3d7db8196d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4405947961fa57ecbd0b3270bda0c3d7db8196d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4405947961fa57ecbd0b3270bda0c3d7db8196d7/comments", "author": null, "committer": null, "parents": [{"sha": "c5b966389e4baac448326c1639d672d7f82577e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5b966389e4baac448326c1639d672d7f82577e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5b966389e4baac448326c1639d672d7f82577e3"}], "stats": {"total": 30, "additions": 25, "deletions": 5}, "files": [{"sha": "08b9b7d6d888f65df36d2c69ab1f2ac69d4f1703", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4405947961fa57ecbd0b3270bda0c3d7db8196d7", "patch": "@@ -1,3 +1,10 @@\n+2009-11-23  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity) <E_Variable>: Pass the list\n+\tof attributes when building the corresponding variable of a constant.\n+\t* gcc-interface/utils.c (create_var_decl_1): Do not process attributes\n+\tfor constants.\n+\n 2009-11-23  Eric Botcazou  <ebotcazou@adacore.com>\n             Laurent GUERBY  <laurent@guerby.net>\n "}, {"sha": "ceb1f349ce8d773d93e54a10c11e138f6a56b35f", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=4405947961fa57ecbd0b3270bda0c3d7db8196d7", "patch": "@@ -1366,7 +1366,7 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n \t    tree gnu_corr_var\n \t      = create_true_var_decl (gnu_entity_name, gnu_ext_name, gnu_type,\n \t\t\t\t      gnu_expr, true, Is_Public (gnat_entity),\n-\t\t\t\t      !definition, static_p, NULL,\n+\t\t\t\t      !definition, static_p, attr_list,\n \t\t\t\t      gnat_entity);\n \n \t    SET_DECL_CONST_CORRESPONDING_VAR (gnu_decl, gnu_corr_var);"}, {"sha": "ae2bf74442157318df732ff3723dd94dd6a956fe", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=4405947961fa57ecbd0b3270bda0c3d7db8196d7", "patch": "@@ -1404,10 +1404,12 @@ create_var_decl_1 (tree var_name, tree asm_name, tree type, tree var_init,\n \t   != null_pointer_node)\n     DECL_IGNORED_P (var_decl) = 1;\n \n-  if (asm_name && VAR_OR_FUNCTION_DECL_P (var_decl))\n-    SET_DECL_ASSEMBLER_NAME (var_decl, asm_name);\n-\n-  process_attributes (var_decl, attr_list);\n+  if (TREE_CODE (var_decl) == VAR_DECL)\n+    {\n+      if (asm_name)\n+\tSET_DECL_ASSEMBLER_NAME (var_decl, asm_name);\n+      process_attributes (var_decl, attr_list);\n+    }\n \n   /* Add this decl to the current binding level.  */\n   gnat_pushdecl (var_decl, gnat_node);"}, {"sha": "70ae905122ba08b8ab046959ab72e1fe8e2896d4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4405947961fa57ecbd0b3270bda0c3d7db8196d7", "patch": "@@ -1,3 +1,7 @@\n+2009-11-23  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/specs/weak1.ads: New test.\n+\n 2009-11-23  Steve Ellcey  <sje@cup.hp.com>\n \n \t* gcc.dg/debug/dwarf2/inline2.c: Modify scan."}, {"sha": "82cddc09ac27156233f7fc6e61465c55772a927d", "filename": "gcc/testsuite/gnat.dg/specs/weak1.ads", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fweak1.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4405947961fa57ecbd0b3270bda0c3d7db8196d7/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fweak1.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fweak1.ads?ref=4405947961fa57ecbd0b3270bda0c3d7db8196d7", "patch": "@@ -0,0 +1,7 @@\n+package Weak1 is\n+\n+   Myconst : constant Integer := 1234;\n+   pragma Export (C, Myconst, \"myconst\");\n+   pragma Weak_External (Myconst);\n+\n+end Weak1;"}]}