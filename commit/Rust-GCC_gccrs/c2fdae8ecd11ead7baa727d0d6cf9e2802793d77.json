{"sha": "c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzJmZGFlOGVjZDExZWFkN2JhYTcyN2QwZDZjZjllMjgwMjc5M2Q3Nw==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1994-07-22T13:55:40Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1994-07-22T13:55:40Z"}, "message": "DJ patches for MSDOS\n\nFrom-SVN: r7792", "tree": {"sha": "6a3f684e55b76db7fd75b93e15184b2d735eb521", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a3f684e55b76db7fd75b93e15184b2d735eb521"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/comments", "author": null, "committer": null, "parents": [{"sha": "bcd8cec87159f60a589cf7adc5b93d252db21286", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcd8cec87159f60a589cf7adc5b93d252db21286", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcd8cec87159f60a589cf7adc5b93d252db21286"}], "stats": {"total": 137, "additions": 78, "deletions": 59}, "files": [{"sha": "3e202e8d509b75ee80a1a629ae282505be43c2f5", "filename": "gcc/config/msdos/configur.bat", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fconfig%2Fmsdos%2Fconfigur.bat", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fconfig%2Fmsdos%2Fconfigur.bat", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsdos%2Fconfigur.bat?ref=c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "patch": "@@ -0,0 +1,33 @@\n+@echo off\r\n+echo Configuring GCC for go32\r\n+rem This batch file assumes a unix-type \"sed\" program\r\n+\r\n+if not exist config\\msdos\\configure.bat chdir ..\\..\r\n+\r\n+update config\\i386\\xm-dos.h config.h\r\n+update config\\i386\\xm-dos.h hconfig.h\r\n+update config\\i386\\xm-dos.h tconfig.h\r\n+update config\\i386\\go32.h tm.h\r\n+update config\\i386\\i386.md md\r\n+update config\\i386\\i386.c aux-output.c\r\n+\r\n+echo # Makefile generated by \"configure.bat\"> Makefile\r\n+echo all.dos: cccp cc1 cc1obj xgcc s-objlist >> Makefile\r\n+sed -f config/msdos/top.sed Makefile.in >> Makefile\r\n+\r\n+set LANG=\r\n+\r\n+if not exist cp\\make-lang.in goto no_cp\r\n+sed -f config/msdos/top.sed cp\\make-lang.in >> Makefile\r\n+sed -f config/msdos/top.sed cp\\makefile.in > cp\\Makefile\r\n+set LANG=%LANG% c++.&\t\r\n+:no_cp\r\n+\r\n+echo lang.mostlyclean: %LANG% | sed \"s/&/mostlyclean/g\" >> Makefile\r\n+echo lang.clean: %LANG% | sed \"s/&/clean/g\" >> Makefile\r\n+echo lang.distclean: %LANG% | sed \"s/&/distclean/g\" >> Makefile\r\n+echo lang.realclean: %LANG% | sed \"s/&/realclean/g\" >> Makefile\r\n+\r\n+echo #define MULTILIB_SELECT \". ;\" > multilib.h1\r\n+update multilib.h1 multilib.h\r\n+del multilib.h1\r"}, {"sha": "68636504da5b9478654d505b24e8eeaf404a69e7", "filename": "gcc/config/msdos/top.sed", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fconfig%2Fmsdos%2Ftop.sed", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fconfig%2Fmsdos%2Ftop.sed", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsdos%2Ftop.sed?ref=c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "patch": "@@ -0,0 +1,38 @@\n+/\\.o[ \t]*:/ s/config.status//\n+/^multilib.h/ s/multilib/not-multilib/\n+/^target=/ c\\\n+target=go32\n+/^xmake_file=/ d\n+/^tmake_file=/ d\n+/^version=/ c\\\n+version=2.6.0\n+s/CC = cc/CC = gcc/\n+s/:\\$/: \\$/g\n+s/^\t\\ *\\.\\//\tgo32 /\n+s/<\\ *\\$(srcdir)\\//< $(srcdir)\\\\/g\n+s/^\t\\$(srcdir)\\/move-if-change/\tupdate/\n+s/^USE_/# USE_/\n+s/`echo \\$(srcdir)\\///g\n+s/ | sed 's,\\^\\\\\\.\\/,,'`//g\n+s/^\tcd \\$(srcdir)[ \t]*;/\t/\n+/^# USE_HOST_OBSTACK/ i\\\n+USE_HOST_OBSTACK=obstack.o\n+/^stamp-attrtab/,/update/ {\n+  /\\\\/d\n+  /fi/d\n+  /update/ i\\\n+\t  go32 genattrtab md > t-attrtab.c\n+}\n+/^enquire[ \t]*:/ s/\\$(GCC_PARTS)//g\n+/^enquire.o[ \t]*:/ s/\\$(GCC_PASSES)//g\n+/^GCC_FOR_TARGET =/ c\\\n+GCC_FOR_TARGET = gcc\n+s/; *@true//\n+s/stamp-/s-/g\n+s/tmp-/t-/g\n+/> *s-objlist/ c\\\n+\techo.exe -o s-objlist $(addprefix ../,$(OBJS) $(BC_OBJS))\n+/^OBJS.*s-objlist/ s?`cat ../s-objlist`?@../s-objlist?\n+s/^\\(SUBDIR_OBSTACK *=\\).*$/\\1 ..\\/obstack.o/\n+s/^\\(SUBDIR_USE_ALLOCA *=\\).*$/\\1/\n+s/^\\(SUBDIR_MALLOC *=\\).*$/\\1/"}, {"sha": "bbe72e73bb22f8c785562cec3e58ac9a5182bb01", "filename": "gcc/configure.bat", "status": "modified", "additions": 2, "deletions": 54, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fconfigure.bat", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fconfigure.bat", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.bat?ref=c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "patch": "@@ -1,54 +1,2 @@\n-@echo off\n-echo Configuring GCC for go32\n-rem This batch file assumes a unix-type \"sed\" program\n-\n-update config\\i386\\xm-dos.h config.h\n-update config\\i386\\xm-dos.h hconfig.h\n-update config\\i386\\xm-dos.h tconfig.h\n-update config\\i386\\go32.h tm.h\n-update config\\i386\\i386.md md\n-update config\\i386\\i386.c aux-output.c\n-\n-echo # Makefile generated by \"configure.bat\"> Makefile\n-echo all.dos: cccp cc1 cc1plus cc1obj xgcc>> Makefile\n-\n-if exist config.sed del config.sed\n-\n-echo \"/\\.o[ \t]*:/ s/config.status//\t\t\t\">> config.sed\n-echo \"/^target=/ c\\\t\t\t\t\t\">> config.sed\n-echo \"target=go32\t\t\t\t\t\">> config.sed\n-echo \"/^version=/ c\\\t\t\t\t\t\">> config.sed\n-sed -e \"s/.*\\\"\\([^ \\\"]*\\)[ \\\"].*/version=\\1/\" version.c  >> config.sed\n-echo \"s/CC = cc/CC = gcc/\t\t\t\t\">> config.sed\n-echo \"s/:\\$/: \\$/g\t\t\t\t\t\">> config.sed\n-echo \"s/^\t\\ *\\.\\//\tgo32 /\t\t\t\">> config.sed\n-echo \"s/<\\ *\\$(srcdir)\\//< $(srcdir)\\\\/g\t\t\">> config.sed\n-echo \"s/^\t\\$(srcdir)\\/move-if-change/\tupdate/\t\">> config.sed\n-echo \"s/^USE_/# USE_/\t\t\t\t\t\">> config.sed\n-echo \"s/`echo \\$(srcdir)\\///g\t\t\t\t\">> config.sed\n-echo \"s/ | sed 's,\\^\\\\\\.\\/,,'`//g\t\t\t\">> config.sed\n-echo \"s/^\tcd \\$(srcdir)[ \t]*;/\t/\t\t\">> config.sed\n-\n-echo \"/^# USE_HOST_OBSTACK/ i\\\t\t\t\t\">> config.sed\n-echo \"USE_HOST_OBSTACK=obstack.o\t\t\t\">> config.sed\n-\n-echo \"/^stamp-attrtab/,/update/ {\t\t\t\">> config.sed\n-echo \"  /\\\\/d\t\t\t\t\t\t\">> config.sed\n-echo \"  /fi/d\t\t\t\t\t\t\">> config.sed\n-echo \"  /update/ i\\\t\t\t\t\t\">> config.sed\n-echo \"\t  go32 genattrtab md > t-attrtab.c\t\t\">> config.sed\n-echo \"}\t\t\t\t\t\t\t\">> config.sed\n-\n-echo \"/^enquire[ \t]*:/ s/\\$(GCC_PARTS)//g\t\t\">> config.sed\n-echo \"/^enquire.o[ \t]*:/ s/\\$(GCC_PASSES)//g\t\">> config.sed\n-echo \"/^GCC_FOR_TARGET =/ c\\\t\t\t\t\">> config.sed\n-echo \"GCC_FOR_TARGET = gcc\t\t\t\t\">> config.sed\n-\n-echo \"s/; *@true//\t\t\t\t\t\">> config.sed\n-echo \"s/stamp-/s-/g\t\t\t\t\t\">> config.sed\n-echo \"s/tmp-/t-/g\t\t\t\t\t\">> config.sed\n-\n-sed -e \"s/^\\\"//\" -e \"s/\\\"$//\" -e \"s/[ \t]*$//\" config.sed > config2.sed\n-sed -f config2.sed Makefile.in >> Makefile\n-del config.sed\n-del config2.sed\n+@echo off\r\n+config\\msdos\\configure %1 %2 %3 %4\r"}, {"sha": "52e38ff923152f4cfd1fbb2904b1975267ce1ffe", "filename": "gcc/gcc.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2fdae8ecd11ead7baa727d0d6cf9e2802793d77/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=c2fdae8ecd11ead7baa727d0d6cf9e2802793d77", "patch": "@@ -1873,17 +1873,17 @@ static int last_pipe_input;\n #ifndef OS2\n #ifdef __MSDOS__\n \n-/* Declare these to avoid compilation error.  They won't be called.  */\n-int execv(const char *a, const char **b){}\n-int execvp(const char *a, const char **b){}\n-\n+#include <process.h>\n static int\n pexecute (search_flag, program, argv, not_last)\n      int search_flag;\n      char *program;\n      char *argv[];\n      int not_last;\n {\n+#ifdef __GO32__\n+  int i = (search_flag ? spawnv : spawnvp) (1, program, argv);\n+#else\n   char *scmd, *rf;\n   FILE *argfile;\n   int i, el = search_flag ? 0 : 4;\n@@ -1912,13 +1912,13 @@ pexecute (search_flag, program, argv, not_last)\n   i = system (scmd);\n \n   remove (rf);\n+#endif\n   \n   if (i == -1)\n     {\n       perror_exec (program);\n       return MIN_FATAL_STATUS << 8;\n     }\n-\n   return i << 8;\n }\n "}]}