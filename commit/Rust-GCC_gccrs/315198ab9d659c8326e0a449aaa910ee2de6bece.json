{"sha": "315198ab9d659c8326e0a449aaa910ee2de6bece", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzE1MTk4YWI5ZDY1OWM4MzI2ZTBhNDQ5YWFhOTEwZWUyZGU2YmVjZQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-06-14T21:48:40Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-06-14T21:48:40Z"}, "message": "(stdio.h math.h ctype.h sys/{limits.h,fcntl.h,dirent.h}):\n\nFix STDC/POSIX and other things for Interactive\tUnix 2.2 or later.\n\nFrom-SVN: r4678", "tree": {"sha": "eb7f1b0a8931b1cf29bd17f9b6531d3c8faa18ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb7f1b0a8931b1cf29bd17f9b6531d3c8faa18ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/315198ab9d659c8326e0a449aaa910ee2de6bece", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/315198ab9d659c8326e0a449aaa910ee2de6bece", "html_url": "https://github.com/Rust-GCC/gccrs/commit/315198ab9d659c8326e0a449aaa910ee2de6bece", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/315198ab9d659c8326e0a449aaa910ee2de6bece/comments", "author": null, "committer": null, "parents": [{"sha": "3008222343f1160e317ac2528719a855e6b79b88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3008222343f1160e317ac2528719a855e6b79b88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3008222343f1160e317ac2528719a855e6b79b88"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "13a493b817e306d204925ae7fe22e0a1a493d267", "filename": "gcc/fixincludes", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/315198ab9d659c8326e0a449aaa910ee2de6bece/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/315198ab9d659c8326e0a449aaa910ee2de6bece/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=315198ab9d659c8326e0a449aaa910ee2de6bece", "patch": "@@ -1062,6 +1062,41 @@ then\n   ln -s ${INPUT}/multimedia/audio_hdr.h ${LIB}/multimedia 2>/dev/null\n fi\n \n+# Determine if we're on Interactive Unix 2.2 or later, in which case we\n+# need to fix some additional files.  This is the same test for ISC that\n+# Autoconf uses.\n+if test -d /etc/conf/kconfig.d \\\n+    && grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1; then\n+  echo \"Fixing ISC __STDC__ goof in several files...\"\n+  for name in stdio.h math.h ctype.h sys/limits.h sys/fcntl.h sys/dirent.h; do\n+    echo $name\n+    if test -r ${LIB}/$name; then\n+      file=${LIB}/$name\n+    else\n+      file=${INPUT}/$name\n+    fi\n+    # On Interactive 2.2, certain traditional Unix definitions\n+    # (notably getc and putc in stdio.h) are omitted if __STDC__ is\n+    # defined, not just if _POSIX_SOURCE is defined.  This makes it\n+    # impossible to compile any nontrivial program except with -posix.\n+    sed \\\n+'s/!defined(__STDC__) && !defined(_POSIX_SOURCE)/!defined(_POSIX_SOURCE)/' \\\n+\t    < $file > ${LIB}/$name.\n+    mv ${LIB}/$name. ${LIB}/$name\n+  done\n+  \n+  echo \"Fixing ISC fmod declaration\"\n+  # This one's already been fixed for other things.\n+  file=${LIB}/math.h\n+  sed 's/fmod(double)/fmod(double, double)/' <$file >$file.\n+  mv $file. $file\n+  \n+  echo \"Fixing nested comments in ISC <sys/limits.h>\"\n+  file=sys/limits.h\n+  sed '/CHILD_MAX/s,/\\* Max, Max,' < ${INPUT}/$file >${LIB}/$file.\n+  sed '/OPEN_MAX/s,/\\* Max, Max,' < ${LIB}/$file. >${LIB}/$file\n+fi\n+\n # These files on Ultrix 4.2 put comments around instances of #endif\n # __mips.  When the sed expression turns that into #endif /* __mips */\n # the comment ends prematurely."}]}