{"sha": "31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFjNWVlZTEwMjZmNDUwMGZmZjBmNjU1ZTZiMjI0Y2MwZTk0YTZhNQ==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2006-07-01T15:03:30Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2006-07-01T15:03:30Z"}, "message": "re PR fortran/19259 (\";\" as first nonblank character on a line should be an error)\n\n2006-07-01  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n\nfortran/\nPR fortran/19259\n* parse.c (next_free): Error out on line starting with semicolon.\n(next_fixed): Fix formatting.  Error out on line starting with\nsemicolon.\ntestsuite/\nPR fortran/19259\n* gfortran.dg/semicolon_fixed.c: New.\n* gfortran.dg/semicolon_free.c: New.\n\nFrom-SVN: r115115", "tree": {"sha": "1eb307f6fa4e38e619d276c51d3bc7619e1bbd41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1eb307f6fa4e38e619d276c51d3bc7619e1bbd41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e72a66fcdc314a8fd2a785d6252ddc61d8456d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e72a66fcdc314a8fd2a785d6252ddc61d8456d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e72a66fcdc314a8fd2a785d6252ddc61d8456d0"}], "stats": {"total": 57, "additions": 55, "deletions": 2}, "files": [{"sha": "84ecdae4617a2acea8538a57ef670d03839a2aa7", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "patch": "@@ -1,3 +1,10 @@\n+2006-07-01  Tobias Schl\ufffd\ufffdter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/19259\n+\t* parse.c (next_free): Error out on line starting with semicolon.\n+\t(next_fixed): Fix formatting.  Error out on line starting with\n+\tsemicolon.\n+\n 2006-06-30  Kazu Hirata  <kazu@codesourcery.com>\n \n \t* check.c: Fix a comment typo."}, {"sha": "972805eeb42303c06e693daf1eb96150116134f2", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 24, "deletions": 2, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "patch": "@@ -410,8 +410,9 @@ static gfc_statement\n next_free (void)\n {\n   match m;\n-  int c, d, cnt;\n+  int c, d, cnt, at_bol;\n \n+  at_bol = gfc_at_bol ();\n   gfc_gobble_whitespace ();\n \n   c = gfc_peek_char ();\n@@ -447,6 +448,14 @@ next_free (void)\n \n \t  gfc_gobble_whitespace ();\n \n+\t  if (at_bol && gfc_peek_char () == ';')\n+\t    {\n+\t      gfc_error_now\n+\t\t(\"Semicolon at %C needs to be preceded by statement\");\n+\t      gfc_next_char (); /* Eat up the semicolon.  */\n+\t      return ST_NONE;\n+\t    }\n+\n \t  if (gfc_match_eos () == MATCH_YES)\n \t    {\n \t      gfc_warning_now\n@@ -474,6 +483,13 @@ next_free (void)\n \t}\n     }\n \n+  if (at_bol && c == ';')\n+    {\n+      gfc_error_now (\"Semicolon at %C needs to be preceded by statement\");\n+      gfc_next_char (); /* Eat up the semicolon.  */\n+      return ST_NONE;\n+    }\n+\n   return decode_statement ();\n }\n \n@@ -571,7 +587,7 @@ next_fixed (void)\n   if (c == '\\n')\n     goto blank_line;\n \n-  if (c != ' ' && c!= '0')\n+  if (c != ' ' && c != '0')\n     {\n       gfc_buffer_error (0);\n       gfc_error (\"Bad continuation line at %C\");\n@@ -593,6 +609,12 @@ next_fixed (void)\n     goto blank_line;\n   gfc_current_locus = loc;\n \n+  if (c == ';')\n+    {\n+      gfc_error_now (\"Semicolon at %C needs to be preceded by statement\");\n+      return ST_NONE;\n+    }\n+\n   if (gfc_match_eos () == MATCH_YES)\n     goto blank_line;\n "}, {"sha": "617aef5ee7153c85555c9cae371a34dc752dcc06", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "patch": "@@ -1,3 +1,9 @@\n+2006-07-01  Tobias Schl\ufffdter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/19259\n+\t* gfortran.dg/semicolon_fixed.c: New.\n+\t* gfortran.dg/semicolon_free.c: New.\n+\n 2006-06-30  Mike Stump  <mrs@apple.com>\n \n \t* g++.dg/ext/visibility/fvisibility-override2.C: Fix for systems"}, {"sha": "2c667ae0cb9764e75d1df773a622f2ebd19c9fb5", "filename": "gcc/testsuite/gfortran.dg/semicolon_fixed.f", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ftestsuite%2Fgfortran.dg%2Fsemicolon_fixed.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ftestsuite%2Fgfortran.dg%2Fsemicolon_fixed.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fsemicolon_fixed.f?ref=31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do compile }\n+! PR 19259 Semicolon cannot start a line\n+      x=1; y=1;\n+      x=2;;\n+      x=3;\n+      ;                         ! { dg-error \"Semicolon at\" }\n+      ;;                        ! { dg-error \"Semicolon at\" }\n+ 900  ;                         ! { dg-error \"Semicolon at\" }\n+      end"}, {"sha": "28e8da2b285d5945aaa21dbb5a32d744a856d7ea", "filename": "gcc/testsuite/gfortran.dg/semicolon_free.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ftestsuite%2Fgfortran.dg%2Fsemicolon_free.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31c5eee1026f4500fff0f655e6b224cc0e94a6a5/gcc%2Ftestsuite%2Fgfortran.dg%2Fsemicolon_free.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fsemicolon_free.f90?ref=31c5eee1026f4500fff0f655e6b224cc0e94a6a5", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do compile }\n+! PR 19259 Semicolon cannot start a line\n+x=1; y=1;\n+x=2;;\n+x=3;\n+ ; ! { dg-error \"Semicolon at\" }\n+;; ! { dg-error \"Semicolon at\" }\n+111 ; ! { dg-error \"Semicolon at\" }\n+end"}]}