{"sha": "8dc56a2244cfe35cbdb53e0f586c16f90a2677e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGRjNTZhMjI0NGNmZTM1Y2JkYjUzZTBmNTg2YzE2ZjkwYTI2NzdlNA==", "commit": {"author": {"name": "Jim Wilson", "email": "jimw@sifive.com", "date": "2019-11-01T20:35:12Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2019-11-01T20:35:12Z"}, "message": "RISC-V: Build soft-float divide routines for -mno-fdiv.\n\nUsing -mno-fdiv gives linker errors unless we build the missing divide\nroutines in libgcc always.  There is at least one university project\ndesigning RISC-V parts without FP divide that wants to use the option.\n\n\tlibgcc/\n\t* config/riscv/t-softfp32 (softfp_extra): Add FP divide routines\n\nFrom-SVN: r277723", "tree": {"sha": "36b8771939940a546ff3d1b3be2e849fb2c83dd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36b8771939940a546ff3d1b3be2e849fb2c83dd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4/comments", "author": null, "committer": null, "parents": [{"sha": "2df0c2315a21a05838c8015d27678d236f4d0cd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2df0c2315a21a05838c8015d27678d236f4d0cd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2df0c2315a21a05838c8015d27678d236f4d0cd4"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "4a855cbeefd1373c9000f81a8707879c498ee06a", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=8dc56a2244cfe35cbdb53e0f586c16f90a2677e4", "patch": "@@ -1,3 +1,7 @@\n+2019-11-01  Jim Wilson  <jimw@sifive.com>\n+\n+\t* config/riscv/t-softfp32 (softfp_extra): Add FP divide routines\n+\n 2019-10-23  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n \n \t* config/msp430/lib2hw_mul.S: Fix wrong syntax in branch instruction."}, {"sha": "59be1df827eadebb753c705c405091e28294ca21", "filename": "libgcc/config/riscv/t-softfp32", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4/libgcc%2Fconfig%2Friscv%2Ft-softfp32", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dc56a2244cfe35cbdb53e0f586c16f90a2677e4/libgcc%2Fconfig%2Friscv%2Ft-softfp32", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Friscv%2Ft-softfp32?ref=8dc56a2244cfe35cbdb53e0f586c16f90a2677e4", "patch": "@@ -12,15 +12,32 @@ softfp_float_modes := tf\n softfp_extensions := sftf dftf\n softfp_truncations := tfsf tfdf\n \n+# Enable divide routines to make -mno-fdiv work.\n+softfp_extras := divsf3 divdf3\n+\n else\n+# !ABI_DOUBLE\n \n softfp_float_modes := df tf\n softfp_extensions := sfdf sftf dftf\n softfp_truncations := dfsf tfsf tfdf\n \n ifndef ABI_SINGLE\n softfp_float_modes += sf\n+else\n+# ABI_SINGLE\n+\n+# Enable divide routines to make -mno-fdiv work.\n+softfp_extras := divsf3\n+\n endif\n \n endif\n+\n+else\n+# ABI_QUAD\n+\n+# Enable divide routines to make -mno-fdiv work.\n+softfp_extras := divsf3 divdf3 divtf3\n+\n endif"}]}