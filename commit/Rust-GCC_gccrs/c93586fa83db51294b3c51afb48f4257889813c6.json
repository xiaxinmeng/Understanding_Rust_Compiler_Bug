{"sha": "c93586fa83db51294b3c51afb48f4257889813c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzkzNTg2ZmE4M2RiNTEyOTRiM2M1MWFmYjQ4ZjQyNTc4ODk4MTNjNg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2001-06-19T13:32:57Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-06-19T13:32:57Z"}, "message": "except.c (initialize_handler_parm): Expect __cxa_begin_catch to return pointers to data members by reference rather...\n\n        * except.c (initialize_handler_parm): Expect __cxa_begin_catch to\n        return pointers to data members by reference rather than by value.\n\nFrom-SVN: r43456", "tree": {"sha": "48b0614bf523c8f7d3db4688d1f9c30f28e5b134", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48b0614bf523c8f7d3db4688d1f9c30f28e5b134"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c93586fa83db51294b3c51afb48f4257889813c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c93586fa83db51294b3c51afb48f4257889813c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c93586fa83db51294b3c51afb48f4257889813c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c93586fa83db51294b3c51afb48f4257889813c6/comments", "author": null, "committer": null, "parents": [{"sha": "a0d4ddde2c0436823cea3c68af73127f624b15ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0d4ddde2c0436823cea3c68af73127f624b15ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0d4ddde2c0436823cea3c68af73127f624b15ca"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "ea5de138d545c0ae7fde0126c949a8dfc41a14fb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93586fa83db51294b3c51afb48f4257889813c6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93586fa83db51294b3c51afb48f4257889813c6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c93586fa83db51294b3c51afb48f4257889813c6", "patch": "@@ -1,3 +1,8 @@\n+2001-06-19  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* except.c (initialize_handler_parm): Expect __cxa_begin_catch to\n+\treturn pointers to data members by reference rather than by value.\n+\n 2001-06-18  Jason Merrill  <jason_merrill@redhat.com>\n \n \tImplement the Named Return Value optimization."}, {"sha": "46ffd6e5b760a74dd95987185192ce2df3caa0f6", "filename": "gcc/cp/except.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93586fa83db51294b3c51afb48f4257889813c6/gcc%2Fcp%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93586fa83db51294b3c51afb48f4257889813c6/gcc%2Fcp%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fexcept.c?ref=c93586fa83db51294b3c51afb48f4257889813c6", "patch": "@@ -348,7 +348,7 @@ initialize_handler_parm (decl, exp)\n      adjusted by value from __cxa_begin_catch.  Others are returned by \n      reference.  */\n   init_type = TREE_TYPE (decl);\n-  if (TREE_CODE (init_type) != POINTER_TYPE\n+  if (! TYPE_PTR_P (init_type)\n       && TREE_CODE (init_type) != REFERENCE_TYPE)\n     init_type = build_reference_type (init_type);\n \n@@ -357,8 +357,8 @@ initialize_handler_parm (decl, exp)\n \n   /* Since pointers are passed by value, initialize a reference to\n      pointer catch parm with the address of the temporary.  */\n-  if (TREE_CODE (init_type) == REFERENCE_TYPE \n-      && TREE_CODE (TREE_TYPE (init_type)) == POINTER_TYPE)\n+  if (TREE_CODE (init_type) == REFERENCE_TYPE\n+      && TYPE_PTR_P (TREE_TYPE (init_type)))\n     exp = build_unary_op (ADDR_EXPR, exp, 1);\n \n   exp = ocp_convert (init_type, exp, CONV_IMPLICIT|CONV_FORCE_TEMP, 0);"}, {"sha": "ba70612033bf352d15b2f5a5284d3e630fef307f", "filename": "gcc/testsuite/g++.old-deja/g++.eh/ptrmem1.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93586fa83db51294b3c51afb48f4257889813c6/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.eh%2Fptrmem1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93586fa83db51294b3c51afb48f4257889813c6/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.eh%2Fptrmem1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.eh%2Fptrmem1.C?ref=c93586fa83db51294b3c51afb48f4257889813c6", "patch": "@@ -0,0 +1,15 @@\n+extern \"C\" void exit (int);\n+extern \"C\" void abort (void);\n+struct A { int i; };\n+int main ()\n+{\n+  try { throw &A::i; }\n+  catch (int A::*p)\n+    {\n+      if (p == &A::i)\n+\texit (0);\n+      else\n+\tabort ();\n+    }\n+  abort ();\n+}"}]}