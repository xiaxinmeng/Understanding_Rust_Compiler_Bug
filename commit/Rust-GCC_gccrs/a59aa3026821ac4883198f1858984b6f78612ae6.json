{"sha": "a59aa3026821ac4883198f1858984b6f78612ae6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTU5YWEzMDI2ODIxYWM0ODgzMTk4ZjE4NTg5ODRiNmY3ODYxMmFlNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2020-02-10T14:50:17Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2020-02-10T14:50:17Z"}, "message": "c-format: -Wformat-diag fix [PR93641]\n\nThe last argument to strncasecmp is incorrect, so it matched even when\ncan%' wasn't followed by t.  Also, the !ISALPHA (format_chars[1]) test\nlooks pointless, format_chars[1] must be ' if strncasecmp succeeded and\nso will never be ISALPHA.\n\n2020-02-10  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR other/93641\n\t* c-format.c (check_plain): Fix up last argument of strncasecmp.\n\tRemove useless extra test.\n\n\t* gcc.dg/format/gcc_diag-11.c (test_cdiag_bad_words): Add two further\n\ttests.", "tree": {"sha": "43b27a683d641376e51fcc4983df9c4faa96cfbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/43b27a683d641376e51fcc4983df9c4faa96cfbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a59aa3026821ac4883198f1858984b6f78612ae6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a59aa3026821ac4883198f1858984b6f78612ae6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a59aa3026821ac4883198f1858984b6f78612ae6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a59aa3026821ac4883198f1858984b6f78612ae6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5602b48b2ed84feb1a5792e3d73b00b42138ca6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5602b48b2ed84feb1a5792e3d73b00b42138ca6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5602b48b2ed84feb1a5792e3d73b00b42138ca6e"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "4ba4448006ab66abc0225271682222838c92a1e6", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=a59aa3026821ac4883198f1858984b6f78612ae6", "patch": "@@ -1,3 +1,9 @@\n+2020-02-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR other/93641\n+\t* c-format.c (check_plain): Fix up last argument of strncasecmp.\n+\tRemove useless extra test.\n+\n 2020-02-03  Julian Brown  <julian@codesourcery.com>\n \t    Tobias Burnus  <tobias@codesourcery.com>\n "}, {"sha": "51fd31e4d972143398c8c2f45a317c854b6ec2fd", "filename": "gcc/c-family/c-format.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Fc-family%2Fc-format.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Fc-family%2Fc-format.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-format.c?ref=a59aa3026821ac4883198f1858984b6f78612ae6", "patch": "@@ -3270,8 +3270,7 @@ check_plain (location_t format_string_loc, tree format_string_cst,\n \t\t\t       \"quoted %qs directive in format; \"\n \t\t\t       \"use %qs instead\", \"%s\", \"%qs\");\n       else if (format_chars - orig_format_chars > 2\n-\t       && !strncasecmp (format_chars - 3, \"can%'t\", 5)\n-\t       && !ISALPHA (format_chars[1]))\n+\t       && !strncasecmp (format_chars - 3, \"can%'t\", 6))\n \tformat_warning_substr (format_string_loc,\n \t\t\t       format_string_cst,\n \t\t\t       fmtchrpos - 3, fmtchrpos + 3, opt,"}, {"sha": "b3966ec6d9020e6fd4ab7de6dfc3ecf4b8bda40e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a59aa3026821ac4883198f1858984b6f78612ae6", "patch": "@@ -1,3 +1,9 @@\n+2020-02-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR other/93641\n+\t* gcc.dg/format/gcc_diag-11.c (test_cdiag_bad_words): Add two further\n+\ttests.\n+\n 2020-02-10  Feng Xue  <fxue@os.amperecomputing.com>\n \n \tPR ipa/93203"}, {"sha": "262e7e5ff9916afec4bdd4d6a782cc43d0857b51", "filename": "gcc/testsuite/gcc.dg/format/gcc_diag-11.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Ftestsuite%2Fgcc.dg%2Fformat%2Fgcc_diag-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a59aa3026821ac4883198f1858984b6f78612ae6/gcc%2Ftestsuite%2Fgcc.dg%2Fformat%2Fgcc_diag-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fformat%2Fgcc_diag-11.c?ref=a59aa3026821ac4883198f1858984b6f78612ae6", "patch": "@@ -400,6 +400,8 @@ void test_cdiag_bad_words (tree t, gimple *gc)\n   cdiag (\"you can't do that\"); /* { dg-warning \"contraction 'can't' in format\" } */\n   cdiag (\"you can%'t do that\");/* { dg-warning \"contraction 'can%'t' in format\" } */\n   cdiag (\"Can%'t touch this.\");/* { dg-warning \"contraction 'Can%'t' in format\" } */\n+  cdiag (\"can%'\");\n+  cdiag (\"can%' whatever\");\n   cdiag (\"on the commandline\");/* { dg-warning \"misspelled term 'commandline' in format; use 'command line' instead\" } */\n   cdiag (\"command line option\");/* { dg-warning \"misspelled term 'command line option' in format; use 'command-line option' instead\" } */\n   cdiag (\"it mustn't be\");     /* { dg-warning \"contraction 'mustn't' in format\" } */"}]}