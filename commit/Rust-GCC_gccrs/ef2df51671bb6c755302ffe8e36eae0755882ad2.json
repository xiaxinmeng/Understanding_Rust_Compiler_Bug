{"sha": "ef2df51671bb6c755302ffe8e36eae0755882ad2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWYyZGY1MTY3MWJiNmM3NTUzMDJmZmU4ZTM2ZWFlMDc1NTg4MmFkMg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-07-06T08:26:44Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-07-06T08:26:44Z"}, "message": "[s390] Fix ambiguous .md attribute uses\n\nThis patch is part of a series that fixes ambiguous attribute\nuses in .md files, i.e. cases in which attributes didn't use\n<ITER:ATTR> to specify an iterator, and in which <ATTR> could\nhave different values depending on the iterator chosen.\n\nThe vx-builtins.md part changes the choice of <mode> from the\nimplicit <VFCMP:mode> to an explicit <VF_HW:mode> (i.e. from the\nmode of the comparison result to the mode of the operands being\ncompared).  That seemed like the intended behaviour given later\npatterns like vec_cmpeq<mode>_cc.\n\nThe use of BFP in the s390.md LNDFR pattern looks like a typo,\nsince the operand to (abs ...) has to have the same mode as the result.\nThe only effect before this series was to create some extra variants\nthat would never match, making it harmless apart from very minor code\nbloat.\n\n2019-07-06  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* config/s390/s390.md (*negabs<FP:mode>2_nocc): Use FP for\n\toperand 1.\n\t* config/s390/vx-builtins.md (*vec_cmp<insn_cmp><mode>_cconly):\n\tMake the choice of <mode> explicit, giving...\n\t(*vec_cmp<insn_cmp><VF_HW:mode>_cconly): ...this.\n\nFrom-SVN: r273162", "tree": {"sha": "93c55ae89a44df72b1ba94d42e33819a12a0ba1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/93c55ae89a44df72b1ba94d42e33819a12a0ba1d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef2df51671bb6c755302ffe8e36eae0755882ad2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef2df51671bb6c755302ffe8e36eae0755882ad2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef2df51671bb6c755302ffe8e36eae0755882ad2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef2df51671bb6c755302ffe8e36eae0755882ad2/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a0cb70b7ea2b522f02a2384fbe1103d69904f916", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0cb70b7ea2b522f02a2384fbe1103d69904f916", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0cb70b7ea2b522f02a2384fbe1103d69904f916"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "3694a7716f84ea26532bc25526b226fec9caadd1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef2df51671bb6c755302ffe8e36eae0755882ad2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef2df51671bb6c755302ffe8e36eae0755882ad2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ef2df51671bb6c755302ffe8e36eae0755882ad2", "patch": "@@ -1,3 +1,11 @@\n+2019-07-06  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* config/s390/s390.md (*negabs<FP:mode>2_nocc): Use FP for\n+\toperand 1.\n+\t* config/s390/vx-builtins.md (*vec_cmp<insn_cmp><mode>_cconly):\n+\tMake the choice of <mode> explicit, giving...\n+\t(*vec_cmp<insn_cmp><VF_HW:mode>_cconly): ...this.\n+\n 2019-07-06  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* config/i386/i386.md (*fop_<X87MODEF:mode>_3_i387)"}, {"sha": "79451d7aef36bcae31cc1b1125c6c115bbc9536e", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef2df51671bb6c755302ffe8e36eae0755882ad2/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef2df51671bb6c755302ffe8e36eae0755882ad2/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=ef2df51671bb6c755302ffe8e36eae0755882ad2", "patch": "@@ -8821,8 +8821,8 @@\n \n ; lndfr\n (define_insn \"*negabs<mode>2_nocc\"\n-  [(set (match_operand:FP 0 \"register_operand\"                  \"=f\")\n-        (neg:FP (abs:FP (match_operand:BFP 1 \"register_operand\" \"<fT0>\"))))]\n+  [(set (match_operand:FP 0 \"register_operand\"                 \"=f\")\n+        (neg:FP (abs:FP (match_operand:FP 1 \"register_operand\" \"<fT0>\"))))]\n   \"TARGET_DFP\"\n   \"lndfr\\t%0,%1\"\n   [(set_attr \"op_type\"  \"RRE\")"}, {"sha": "c71aae032ee2e3bcda0ac048708d09f9b1b0fbf0", "filename": "gcc/config/s390/vx-builtins.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef2df51671bb6c755302ffe8e36eae0755882ad2/gcc%2Fconfig%2Fs390%2Fvx-builtins.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef2df51671bb6c755302ffe8e36eae0755882ad2/gcc%2Fconfig%2Fs390%2Fvx-builtins.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fvx-builtins.md?ref=ef2df51671bb6c755302ffe8e36eae0755882ad2", "patch": "@@ -2046,7 +2046,7 @@\n ;;\n \n ; vfcesbs, vfcedbs, wfcexbs, vfchsbs, vfchdbs, wfchxbs, vfchesbs, vfchedbs, wfchexbs\n-(define_insn \"*vec_cmp<insn_cmp><mode>_cconly\"\n+(define_insn \"*vec_cmp<insn_cmp><VF_HW:mode>_cconly\"\n   [(set (reg:VFCMP CC_REGNUM)\n \t(compare:VFCMP (match_operand:VF_HW 0 \"register_operand\" \"v\")\n \t\t       (match_operand:VF_HW 1 \"register_operand\" \"v\")))"}]}