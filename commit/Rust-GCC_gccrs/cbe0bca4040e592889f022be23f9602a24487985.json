{"sha": "cbe0bca4040e592889f022be23f9602a24487985", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JlMGJjYTQwNDBlNTkyODg5ZjAyMmJlMjNmOTYwMmEyNDQ4Nzk4NQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2019-01-10T13:21:54Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2019-01-10T13:21:54Z"}, "message": "Check AI_NUMERICSERV is defined before using it\n\nThe AI_NUMERICSERV constant is missing from old Darwin systems, so only\nuse it if it's supported.\n\n\t* include/experimental/internet [AI_NUMERICSERV]\n\t(resolver_base::numeric_service): Define conditionally.\n\t* testsuite/experimental/net/internet/resolver/base.cc: Test it\n\tconditionally.\n\t* testsuite/experimental/net/internet/resolver/ops/lookup.cc:\n\tLikewise.\n\nFrom-SVN: r267809", "tree": {"sha": "52e8698eea13b0734dfc744626be60deea91a589", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52e8698eea13b0734dfc744626be60deea91a589"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cbe0bca4040e592889f022be23f9602a24487985", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbe0bca4040e592889f022be23f9602a24487985", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbe0bca4040e592889f022be23f9602a24487985", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbe0bca4040e592889f022be23f9602a24487985/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3799b164fac7576ada4cad5a5069cbe911b4849", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3799b164fac7576ada4cad5a5069cbe911b4849", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3799b164fac7576ada4cad5a5069cbe911b4849"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "19a12f8e1637a1c5cc0fe4a25298547be4aff4db", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=cbe0bca4040e592889f022be23f9602a24487985", "patch": "@@ -1,3 +1,12 @@\n+2019-01-10  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* include/experimental/internet [AI_NUMERICSERV]\n+\t(resolver_base::numeric_service): Define conditionally.\n+\t* testsuite/experimental/net/internet/resolver/base.cc: Test it\n+\tconditionally.\n+\t* testsuite/experimental/net/internet/resolver/ops/lookup.cc:\n+\tLikewise.\n+\n 2019-01-10  Ville Voutilainen  <ville.voutilainen@gmail.com>\n \t    Jonathan Wakely  <jwakely@redhat.com>\n "}, {"sha": "07c62e697cd6600a726ae679052513dd33dac4fb", "filename": "libstdc++-v3/include/experimental/internet", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Finternet", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Finternet", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Finternet?ref=cbe0bca4040e592889f022be23f9602a24487985", "patch": "@@ -1629,15 +1629,19 @@ namespace ip\n       __flags_passive\t\t\t= AI_PASSIVE,\n       __flags_canonical_name\t\t= AI_CANONNAME,\n       __flags_numeric_host\t\t= AI_NUMERICHOST,\n+#ifdef AI_NUMERICSERV\n       __flags_numeric_service\t\t= AI_NUMERICSERV,\n+#endif\n       __flags_v4_mapped\t\t\t= AI_V4MAPPED,\n       __flags_all_matching\t\t= AI_ALL,\n       __flags_address_configured\t= AI_ADDRCONFIG\n     };\n     static constexpr flags passive\t\t= __flags_passive;\n     static constexpr flags canonical_name\t= __flags_canonical_name;\n     static constexpr flags numeric_host\t\t= __flags_numeric_host;\n+#ifdef AI_NUMERICSERV\n     static constexpr flags numeric_service\t= __flags_numeric_service;\n+#endif\n     static constexpr flags v4_mapped\t\t= __flags_v4_mapped;\n     static constexpr flags all_matching\t\t= __flags_all_matching;\n     static constexpr flags address_configured\t= __flags_address_configured;"}, {"sha": "746557af65673dd1744ecdf804d2c65e75fe8710", "filename": "libstdc++-v3/testsuite/experimental/net/internet/resolver/base.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fnet%2Finternet%2Fresolver%2Fbase.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fnet%2Finternet%2Fresolver%2Fbase.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fnet%2Finternet%2Fresolver%2Fbase.cc?ref=cbe0bca4040e592889f022be23f9602a24487985", "patch": "@@ -49,7 +49,9 @@ test01()\n   (void) resolver::passive;\n   (void) resolver::canonical_name;\n   (void) resolver::numeric_host;\n+#ifdef AI_NUMERICSERV\n   (void) resolver::numeric_service;\n+#endif\n   (void) resolver::v4_mapped;\n   (void) resolver::all_matching;\n   (void) resolver::address_configured;"}, {"sha": "39fb7fd77087eb64fe652bd3e26e6f9aa58a7efd", "filename": "libstdc++-v3/testsuite/experimental/net/internet/resolver/ops/lookup.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fnet%2Finternet%2Fresolver%2Fops%2Flookup.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe0bca4040e592889f022be23f9602a24487985/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fnet%2Finternet%2Fresolver%2Fops%2Flookup.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fnet%2Finternet%2Fresolver%2Fops%2Flookup.cc?ref=cbe0bca4040e592889f022be23f9602a24487985", "patch": "@@ -49,7 +49,10 @@ test02()\n   std::error_code ec;\n   io_context ctx;\n   ip::tcp::resolver resolv(ctx);\n-  auto flags = ip::resolver_base::numeric_host | ip::tcp::resolver::numeric_service;\n+  auto flags = ip::resolver_base::numeric_host;\n+#ifdef AI_NUMERICSERV\n+  flags |= ip::tcp::resolver::numeric_service;\n+#endif\n   auto addrs = resolv.resolve(\"127.0.0.1\", \"42\", flags, ec);\n   VERIFY( !ec );\n   VERIFY( addrs.size() > 0 );"}]}