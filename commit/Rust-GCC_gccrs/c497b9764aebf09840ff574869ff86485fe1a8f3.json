{"sha": "c497b9764aebf09840ff574869ff86485fe1a8f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ5N2I5NzY0YWViZjA5ODQwZmY1NzQ4NjlmZjg2NDg1ZmUxYThmMw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2004-03-09T18:44:02Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2004-03-09T18:44:02Z"}, "message": "re PR c++/14397 (Access check for wrong copy constructor)\n\ncp:\n\tPR c++/14397\n\t* call.c (convert_like_real): Build a const qualified temporary,\n\twhen testing ctor access.\ntestsuite:\n\tPR c++/14397\n\t* g++.dg/overload/ref1.C: New.\n\nFrom-SVN: r79196", "tree": {"sha": "074374cde384b02640d55bbe9f668f276e000148", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/074374cde384b02640d55bbe9f668f276e000148"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c497b9764aebf09840ff574869ff86485fe1a8f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c497b9764aebf09840ff574869ff86485fe1a8f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c497b9764aebf09840ff574869ff86485fe1a8f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c497b9764aebf09840ff574869ff86485fe1a8f3/comments", "author": null, "committer": null, "parents": [{"sha": "205b4f1d480c1604a2ad81d92121065679980d12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/205b4f1d480c1604a2ad81d92121065679980d12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/205b4f1d480c1604a2ad81d92121065679980d12"}], "stats": {"total": 39, "additions": 36, "deletions": 3}, "files": [{"sha": "a0d2b0674921d0894493ea770febd891bf5cfd7e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c497b9764aebf09840ff574869ff86485fe1a8f3", "patch": "@@ -1,3 +1,9 @@\n+2004-03-09  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/14397\n+\t* call.c (convert_like_real): Build a const qualified temporary,\n+\twhen testing ctor access.\n+\n 2004-03-09  Mark Mitchell  <mark@codesourcery.com>\n \n \t* call.c (initialize_reference): Fix typo."}, {"sha": "320159ba9e7f8e8d8f50bde221c87aff45beeaa0", "filename": "gcc/cp/call.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=c497b9764aebf09840ff574869ff86485fe1a8f3", "patch": "@@ -4209,9 +4209,10 @@ convert_like_real (conversion *convs, tree expr, tree fn, int argnum,\n       if (convs->check_copy_constructor_p)\n \t/* Generate a temporary copy purely to generate the required\n \t   diagnostics.  */\n-\tbuild_temp (build_dummy_object (totype), totype, \n-\t\t    LOOKUP_NORMAL|LOOKUP_ONLYCONVERTING,\n-\t\t    &diagnostic_fn);\n+\tbuild_temp\n+\t  (build_dummy_object\n+\t   (build_qualified_type (totype, TYPE_QUAL_CONST)),\n+\t   totype, LOOKUP_NORMAL|LOOKUP_ONLYCONVERTING, &diagnostic_fn);\n \treturn expr;\n     case ck_ambig:\n       /* Call build_user_type_conversion again for the error.  */"}, {"sha": "6f61dd7e5e0eedc6832307c8112ba88ed24fb763", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c497b9764aebf09840ff574869ff86485fe1a8f3", "patch": "@@ -1,3 +1,8 @@\n+2004-03-09  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/14397\n+\t* g++.dg/overload/ref1.C: New.\n+\n 2004-03-09  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n \tPR c++/14409"}, {"sha": "e239d88a438a2a2ade39abe6eb4774918c40c0a9", "filename": "gcc/testsuite/g++.dg/overload/ref1.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2Fref1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c497b9764aebf09840ff574869ff86485fe1a8f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2Fref1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2Fref1.C?ref=c497b9764aebf09840ff574869ff86485fe1a8f3", "patch": "@@ -0,0 +1,21 @@\n+// Copyright (C) 2004 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 5 Mar 2004 <nathan@codesourcery.com>\n+\n+// Origin: schmid@snake.iap.physik.tu-darmstadt.de\n+// Bug 14397: Bogus access error.\n+\n+struct S { \n+    S (int); \n+    S(S const&); \n+  private: \n+    S(S&); \n+}; \n+ \n+S foo() \n+{ \n+  int result = 0;\n+  \n+  S s ((0,S (result)));\n+  \n+  return S (result); \n+} "}]}