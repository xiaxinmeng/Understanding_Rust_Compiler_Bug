{"sha": "1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWY3MDQ5MWI5OTEwZWFhN2RkYTcxYmI2ZTZkNThjZDZmMjEyZWM5ZQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2006-12-12T22:45:25Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2006-12-12T22:45:25Z"}, "message": "re PR tree-optimization/28624 (latent segfault in remove_phi_node)\n\n2006-12-12  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR tree-opt/28624\n        * tree-ssa-dom.c (eliminate_degenerate_phis): Use a temporary\n        bitmap for EXECUTE_IF_SET_IN_BITMAP.\n\nFrom-SVN: r119802", "tree": {"sha": "c9ee45c247f883b9ab539f9271bf2a207a589001", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9ee45c247f883b9ab539f9271bf2a207a589001"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e/comments", "author": null, "committer": null, "parents": [{"sha": "0890b981c9051f9b94d9a481dcf5bfd0d80d2313", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0890b981c9051f9b94d9a481dcf5bfd0d80d2313", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0890b981c9051f9b94d9a481dcf5bfd0d80d2313"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "0e5e595601dfcb8a34cf16b18e4b31dbb54d3c90", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e", "patch": "@@ -1,3 +1,9 @@\n+2006-12-12  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR tree-opt/28624\n+\t* tree-ssa-dom.c (eliminate_degenerate_phis): Use a temporary \n+\tbitmap for EXECUTE_IF_SET_IN_BITMAP.\n+\n 2006-12-12  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR tree-opt/28436"}, {"sha": "73ddc0a9dbacea7bf463ead39bf82dafc6079dc1", "filename": "gcc/tree-ssa-dom.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e/gcc%2Ftree-ssa-dom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e/gcc%2Ftree-ssa-dom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dom.c?ref=1f70491b9910eaa7dda71bb6e6d58cd6f212ec9e", "patch": "@@ -2466,6 +2466,7 @@ static unsigned int\n eliminate_degenerate_phis (void)\n {\n   bitmap interesting_names;\n+  bitmap interesting_names1;\n \n   /* Bitmap of blocks which need EH information updated.  We can not\n      update it on-the-fly as doing so invalidates the dominator tree.  */\n@@ -2482,6 +2483,7 @@ eliminate_degenerate_phis (void)\n      Experiments have show we generally get better compilation\n      time behavior with bitmaps rather than sbitmaps.  */\n   interesting_names = BITMAP_ALLOC (NULL);\n+  interesting_names1 = BITMAP_ALLOC (NULL);\n \n   /* First phase.  Eliminate degenerate PHIs via a dominator\n      walk of the CFG.\n@@ -2503,7 +2505,12 @@ eliminate_degenerate_phis (void)\n       unsigned int i;\n       bitmap_iterator bi;\n \n-      EXECUTE_IF_SET_IN_BITMAP (interesting_names, 0, i, bi)\n+      /* EXECUTE_IF_SET_IN_BITMAP does not like its bitmap\n+\t changed during the loop.  Copy it to another bitmap and\n+\t use that.  */\n+      bitmap_copy (interesting_names1, interesting_names);\n+\n+      EXECUTE_IF_SET_IN_BITMAP (interesting_names1, 0, i, bi)\n \t{\n \t  tree name = ssa_name (i);\n \n@@ -2524,6 +2531,7 @@ eliminate_degenerate_phis (void)\n     }\n \n   BITMAP_FREE (interesting_names);\n+  BITMAP_FREE (interesting_names1);\n   if (cfg_altered)\n     free_dominance_info (CDI_DOMINATORS);\n   return 0;"}]}