{"sha": "f24f089748291299d1feb3e8b3f84ecf735956bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI0ZjA4OTc0ODI5MTI5OWQxZmViM2U4YjNmODRlY2Y3MzU5NTZiZg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-11-23T22:27:34Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-11-23T22:27:34Z"}, "message": "h8300.c (push): Call push_h8300hs_normal in normal mode.\n\n\t* config/h8300/h8300.c (push): Call push_h8300hs_normal in\n\tnormal mode.\n\t(pop): Call pop_h8300hs_normal in normal mode.\n\t* config/h8300/h8300.md: Likewise.\n\t(pushqi1_h8300hs_normal): New.\n\t(pushqi1): Call pushqi1_h8300hs_normal in normal mode.\n\t(pushhi1_h8300hs_normal): New.\n\t(pushhi1): Call pushhi1_h8300hs_normal in normal mode.\n\t(push_h8300hs_normal): New.\n\t(pop_h8300hs_normal): Likewise.\n\nFrom-SVN: r73862", "tree": {"sha": "8bff9a48bb798da5d39cb5846e97b49584c6a20c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bff9a48bb798da5d39cb5846e97b49584c6a20c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f24f089748291299d1feb3e8b3f84ecf735956bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f24f089748291299d1feb3e8b3f84ecf735956bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f24f089748291299d1feb3e8b3f84ecf735956bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f24f089748291299d1feb3e8b3f84ecf735956bf/comments", "author": null, "committer": null, "parents": [{"sha": "a5d8d874fa06f52faab6d1821cae180fc566d279", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5d8d874fa06f52faab6d1821cae180fc566d279", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5d8d874fa06f52faab6d1821cae180fc566d279"}], "stats": {"total": 65, "additions": 60, "deletions": 5}, "files": [{"sha": "177edd2e95d8ad4d873670c9e35eca5d3dfea797", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f24f089748291299d1feb3e8b3f84ecf735956bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f24f089748291299d1feb3e8b3f84ecf735956bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f24f089748291299d1feb3e8b3f84ecf735956bf", "patch": "@@ -1,4 +1,17 @@\n-2003-11-03  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+2003-11-23  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.c (push): Call push_h8300hs_normal in\n+\tnormal mode.\n+\t(pop): Call pop_h8300hs_normal in normal mode.\n+\t* config/h8300/h8300.md: Likewise.\n+\t(pushqi1_h8300hs_normal): New.\n+\t(pushqi1): Call pushqi1_h8300hs_normal in normal mode.\n+\t(pushhi1_h8300hs_normal): New.\n+\t(pushhi1): Call pushhi1_h8300hs_normal in normal mode.\n+\t(push_h8300hs_normal): New.\n+\t(pop_h8300hs_normal): Likewise.\n+\n+2003-11-23  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n \n \t* genattrtab.c (count_sub_rtxs): Removed.\n "}, {"sha": "41c7f843a702aeb97a61e44eb840647f8b705680", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f24f089748291299d1feb3e8b3f84ecf735956bf/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f24f089748291299d1feb3e8b3f84ecf735956bf/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=f24f089748291299d1feb3e8b3f84ecf735956bf", "patch": "@@ -434,8 +434,10 @@ push (int rn)\n \n   if (TARGET_H8300)\n     x = gen_push_h8300 (reg);\n-  else\n+  else if (!TARGET_NORMAL_MODE)\n     x = gen_push_h8300hs (reg);\n+  else\n+    x = gen_push_h8300hs_normal (reg);\n   x = emit_insn (x);\n   REG_NOTES (x) = gen_rtx_EXPR_LIST (REG_INC, stack_pointer_rtx, 0);\n }\n@@ -450,8 +452,10 @@ pop (int rn)\n \n   if (TARGET_H8300)\n     x = gen_pop_h8300 (reg);\n-  else\n+  else if (!TARGET_NORMAL_MODE)\n     x = gen_pop_h8300hs (reg);\n+  else\n+    x = gen_pop_h8300hs_normal (reg);\n   x = emit_insn (x);\n   REG_NOTES (x) = gen_rtx_EXPR_LIST (REG_INC, stack_pointer_rtx, 0);\n }"}, {"sha": "8a0580308c2118e347e77f6ba83e4029fbc0009e", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 40, "deletions": 2, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f24f089748291299d1feb3e8b3f84ecf735956bf/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f24f089748291299d1feb3e8b3f84ecf735956bf/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=f24f089748291299d1feb3e8b3f84ecf735956bf", "patch": "@@ -140,15 +140,28 @@\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"clobber\")])\n \n+(define_insn \"pushqi1_h8300hs_normal\"\n+  [(parallel [(set (reg:HI SP_REG)\n+\t\t   (plus:HI (reg:HI SP_REG) (const_int -4)))\n+\t      (set (mem:QI (plus:HI (reg:HI SP_REG) (const_int -3)))\n+\t\t   (match_operand:QI 0 \"register_operand\" \"r\"))])]\n+  \"(TARGET_H8300H || TARGET_H8300S)\n+   && operands[0] != stack_pointer_rtx\"\n+  \"mov.l\\\\t%S0,@-er7\"\n+  [(set_attr \"length\" \"4\")\n+   (set_attr \"cc\" \"clobber\")])\n+\n (define_expand \"pushqi1\"\n   [(use (match_operand:QI 0 \"register_operand\" \"\"))]\n   \"\"\n   \"\n {\n   if (TARGET_H8300)\n     emit_insn (gen_pushqi1_h8300 (operands[0]));\n-  else\n+  else if (!TARGET_NORMAL_MODE)\n     emit_insn (gen_pushqi1_h8300hs (operands[0]));\n+  else\n+    emit_insn (gen_pushqi1_h8300hs_normal (operands[0]));\n   DONE;\n }\")\n \n@@ -232,15 +245,28 @@\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"clobber\")])\n \n+(define_insn \"pushhi1_h8300hs_normal\"\n+  [(parallel [(set (reg:HI SP_REG)\n+\t\t   (plus:HI (reg:HI SP_REG) (const_int -4)))\n+\t      (set (mem:HI (plus:HI (reg:HI SP_REG) (const_int -2)))\n+\t\t   (match_operand:HI 0 \"register_operand\" \"r\"))])]\n+  \"(TARGET_H8300H || TARGET_H8300S)\n+   && operands[0] != stack_pointer_rtx\"\n+  \"mov.l\\\\t%S0,@-er7\"\n+  [(set_attr \"length\" \"4\")\n+   (set_attr \"cc\" \"clobber\")])\n+\n (define_expand \"pushhi1\"\n   [(use (match_operand:HI 0 \"register_operand\" \"\"))]\n   \"\"\n   \"\n {\n   if (TARGET_H8300)\n     emit_insn (gen_pushhi1_h8300 (operands[0]));\n-  else\n+  else if (!TARGET_NORMAL_MODE)\n     emit_insn (gen_pushhi1_h8300hs (operands[0]));\n+  else\n+    emit_insn (gen_pushhi1_h8300hs_normal (operands[0]));\n   DONE;\n }\")\n \n@@ -1847,6 +1873,12 @@\n   \"TARGET_H8300H && TARGET_H8300S\"\n   \"\")\n \n+(define_expand \"push_h8300hs_normal\"\n+  [(set (mem:SI (pre_dec:HI (reg:HI SP_REG)))\n+        (match_operand:SI 0 \"register_operand\" \"=r\"))]\n+  \"TARGET_NORMAL_MODE\"\n+  \"\")\n+\n (define_expand \"pop_h8300\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n \t(mem:HI (post_inc:HI (reg:HI SP_REG))))]\n@@ -1859,6 +1891,12 @@\n   \"TARGET_H8300H && TARGET_H8300S\"\n   \"\")\n \n+(define_expand \"pop_h8300hs_normal\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n+\t(mem:SI (post_inc:HI (reg:HI SP_REG))))]\n+  \"TARGET_NORMAL_MODE\"\n+  \"\")\n+\n (define_insn \"stm_h8300s_2\"\n   [(parallel\n      [(set (reg:SI SP_REG)"}]}