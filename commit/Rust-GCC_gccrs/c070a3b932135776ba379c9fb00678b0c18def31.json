{"sha": "c070a3b932135776ba379c9fb00678b0c18def31", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzA3MGEzYjkzMjEzNTc3NmJhMzc5YzlmYjAwNjc4YjBjMThkZWYzMQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2010-11-06T03:44:58Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-11-06T03:44:58Z"}, "message": "explow.c (allocate_dynamic_stack_space): Check MALLOC_ABI_ALIGNMENT.\n\n\t* explow.c (allocate_dynamic_stack_space): Check\n\tMALLOC_ABI_ALIGNMENT.\n\nFrom-SVN: r166393", "tree": {"sha": "82e55b0dd3dc5f943dfbdb761128bc2192d48909", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82e55b0dd3dc5f943dfbdb761128bc2192d48909"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c070a3b932135776ba379c9fb00678b0c18def31", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c070a3b932135776ba379c9fb00678b0c18def31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c070a3b932135776ba379c9fb00678b0c18def31", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c070a3b932135776ba379c9fb00678b0c18def31/comments", "author": null, "committer": null, "parents": [{"sha": "cde99631613bb609d8880e98ebac2057b10c09b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cde99631613bb609d8880e98ebac2057b10c09b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cde99631613bb609d8880e98ebac2057b10c09b6"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "75d23de0da78087cac82a7d4cca73b3074a504a6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c070a3b932135776ba379c9fb00678b0c18def31/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c070a3b932135776ba379c9fb00678b0c18def31/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c070a3b932135776ba379c9fb00678b0c18def31", "patch": "@@ -1,3 +1,8 @@\n+2010-11-05  Ian Lance Taylor  <iant@google.com>\n+\n+\t* explow.c (allocate_dynamic_stack_space): Check\n+\tMALLOC_ABI_ALIGNMENT.\n+\n 2010-11-05  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/44772"}, {"sha": "85e93447940c66980c52b992b4d3befa01d8660a", "filename": "gcc/explow.c", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c070a3b932135776ba379c9fb00678b0c18def31/gcc%2Fexplow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c070a3b932135776ba379c9fb00678b0c18def31/gcc%2Fexplow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexplow.c?ref=c070a3b932135776ba379c9fb00678b0c18def31", "patch": "@@ -1356,13 +1356,18 @@ allocate_dynamic_stack_space (rtx size, unsigned size_align,\n #endif\n \n       /* The __morestack_allocate_stack_space function will allocate\n-\t memory using malloc.  We don't know that the alignment of the\n-\t memory returned by malloc will meet REQUIRED_ALIGN.  Increase\n-\t SIZE to make sure we allocate enough space.  */\n-      ask = expand_binop (Pmode, add_optab, size,\n-\t\t\t  GEN_INT (required_align / BITS_PER_UNIT - 1),\n-\t\t\t  NULL_RTX, 1, OPTAB_LIB_WIDEN);\n-      must_align = true;\n+\t memory using malloc.  If the alignment of the memory returned\n+\t by malloc does not meet REQUIRED_ALIGN, we increase SIZE to\n+\t make sure we allocate enough space.  */\n+      if (MALLOC_ABI_ALIGNMENT >= required_align)\n+\task = size;\n+      else\n+\t{\n+\t  ask = expand_binop (Pmode, add_optab, size,\n+\t\t\t      GEN_INT (required_align / BITS_PER_UNIT - 1),\n+\t\t\t      NULL_RTX, 1, OPTAB_LIB_WIDEN);\n+\t  must_align = true;\n+\t}\n \n       func = init_one_libfunc (\"__morestack_allocate_stack_space\");\n "}]}