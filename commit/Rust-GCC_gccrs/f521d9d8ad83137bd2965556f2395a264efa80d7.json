{"sha": "f521d9d8ad83137bd2965556f2395a264efa80d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjUyMWQ5ZDhhZDgzMTM3YmQyOTY1NTU2ZjIzOTVhMjY0ZWZhODBkNw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2019-02-15T07:17:24Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-02-15T07:17:24Z"}, "message": "re PR other/89342 (ICE in maybe_default_option, at opts.c:347)\n\n\tPR other/89342\n\t* optc-save-gen.awk: Handle optimize_fast like optimize_size or\n\toptimize_debug.\n\t* opth-gen.awk: Likewise.\n\n\t* gcc.dg/pr89342.c: New test.\n\nFrom-SVN: r268924", "tree": {"sha": "619ab47720d6b4e80b5c45a661ea8ff0285ecb36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/619ab47720d6b4e80b5c45a661ea8ff0285ecb36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f521d9d8ad83137bd2965556f2395a264efa80d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f521d9d8ad83137bd2965556f2395a264efa80d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f521d9d8ad83137bd2965556f2395a264efa80d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f521d9d8ad83137bd2965556f2395a264efa80d7/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8a9f2a6bbd6bdf164ca987edac34ac72447881a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a9f2a6bbd6bdf164ca987edac34ac72447881a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a9f2a6bbd6bdf164ca987edac34ac72447881a5"}], "stats": {"total": 39, "additions": 34, "deletions": 5}, "files": [{"sha": "6045ad0d2484288522582b1eaa37b9e4194af155", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f521d9d8ad83137bd2965556f2395a264efa80d7", "patch": "@@ -1,3 +1,10 @@\n+2019-02-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR other/89342\n+\t* optc-save-gen.awk: Handle optimize_fast like optimize_size or\n+\toptimize_debug.\n+\t* opth-gen.awk: Likewise.\n+\n 2019-02-15  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.h (TARGET_SUBTARGET64_ISA_DEFAULT):"}, {"sha": "7ecd1eb9cc7eafbdb6fdf6d0109ef854e79faf8c", "filename": "gcc/optc-save-gen.awk", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Foptc-save-gen.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Foptc-save-gen.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptc-save-gen.awk?ref=f521d9d8ad83137bd2965556f2395a264efa80d7", "patch": "@@ -81,7 +81,7 @@ print \"void\";\n print \"cl_optimization_save (struct cl_optimization *ptr, struct gcc_options *opts)\";\n print \"{\";\n \n-n_opt_char = 3;\n+n_opt_char = 4;\n n_opt_short = 0;\n n_opt_int = 0;\n n_opt_enum = 0;\n@@ -90,9 +90,11 @@ n_opt_other = 0;\n var_opt_char[0] = \"optimize\";\n var_opt_char[1] = \"optimize_size\";\n var_opt_char[2] = \"optimize_debug\";\n+var_opt_char[3] = \"optimize_fast\";\n var_opt_range[\"optimize\"] = \"0, 255\";\n var_opt_range[\"optimize_size\"] = \"0, 1\";\n var_opt_range[\"optimize_debug\"] = \"0, 1\";\n+var_opt_range[\"optimize_fast\"] = \"0, 1\";\n \n # Sort by size to mimic how the structure is laid out to be friendlier to the\n # cache.\n@@ -767,16 +769,19 @@ for (i = 0; i < n_target_val; i++) {\n \n print \"}\";\n \n-n_opt_val = 3;\n+n_opt_val = 4;\n var_opt_val[0] = \"x_optimize\"\n var_opt_val_type[0] = \"char \"\n var_opt_hash[0] = 1;\n var_opt_val[1] = \"x_optimize_size\"\n+var_opt_val_type[1] = \"char \"\n var_opt_hash[1] = 1;\n var_opt_val[2] = \"x_optimize_debug\"\n-var_opt_hash[2] = 1;\n-var_opt_val_type[1] = \"char \"\n var_opt_val_type[2] = \"char \"\n+var_opt_hash[2] = 1;\n+var_opt_val[3] = \"x_optimize_fast\"\n+var_opt_val_type[3] = \"char \"\n+var_opt_hash[3] = 1;\n for (i = 0; i < n_opts; i++) {\n \tif (flag_set_p(\"(Optimization|PerFunction)\", flags[i])) {\n \t\tname = var_name(flags[i])"}, {"sha": "297456f62e78d5619ad428e4be88ff564cdcf46e", "filename": "gcc/opth-gen.awk", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Fopth-gen.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Fopth-gen.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopth-gen.awk?ref=f521d9d8ad83137bd2965556f2395a264efa80d7", "patch": "@@ -132,14 +132,15 @@ print \"/* Structure to save/restore optimization and target specific options.  *\n print \"struct GTY(()) cl_optimization\";\n print \"{\";\n \n-n_opt_char = 3;\n+n_opt_char = 4;\n n_opt_short = 0;\n n_opt_int = 0;\n n_opt_enum = 0;\n n_opt_other = 0;\n var_opt_char[0] = \"unsigned char x_optimize\";\n var_opt_char[1] = \"unsigned char x_optimize_size\";\n var_opt_char[2] = \"unsigned char x_optimize_debug\";\n+var_opt_char[3] = \"unsigned char x_optimize_fast\";\n \n for (i = 0; i < n_opts; i++) {\n \tif (flag_set_p(\"(Optimization|PerFunction)\", flags[i])) {"}, {"sha": "f122cd78037af7f3a9ebff91e5369adfe55c858f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f521d9d8ad83137bd2965556f2395a264efa80d7", "patch": "@@ -1,3 +1,8 @@\n+2019-02-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR other/89342\n+\t* gcc.dg/pr89342.c: New test.\n+\n 2019-02-14  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/89354"}, {"sha": "3bc779c1ddc0bab34942e69003408f1f7d8b049b", "filename": "gcc/testsuite/gcc.dg/pr89342.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89342.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f521d9d8ad83137bd2965556f2395a264efa80d7/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89342.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89342.c?ref=f521d9d8ad83137bd2965556f2395a264efa80d7", "patch": "@@ -0,0 +1,11 @@\n+/* PR other/89342 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O0\" } */\n+\n+__attribute__((optimize(\"Ofast\")))\n+void foo (void)\n+{\n+  __attribute__((optimize(\"no-inline\")))\n+  void bar (void) {}\n+  bar ();\n+}"}]}