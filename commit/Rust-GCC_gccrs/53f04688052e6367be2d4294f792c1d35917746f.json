{"sha": "53f04688052e6367be2d4294f792c1d35917746f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNmMDQ2ODgwNTJlNjM2N2JlMmQ0Mjk0Zjc5MmMxZDM1OTE3NzQ2Zg==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2014-08-21T08:53:25Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2014-08-21T08:53:25Z"}, "message": "try_split returns an rtx_insn\n\n2014-08-21  David Malcolm  <dmalcolm@redhat.com>\n\n\t* rtl.h (try_split): Strengthen return type from rtx to rtx_insn *.\n\n\t* emit-rtl.c (try_split): Likewise, also for locals \"before\" and\n\t\"after\".  For now, don't strengthen param \"trial\", which requires\n\tadding checked casts when returning it.\n\nFrom-SVN: r214260", "tree": {"sha": "0b6d1e063ada11b8ec1e68c6ab780ad80727d3a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b6d1e063ada11b8ec1e68c6ab780ad80727d3a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53f04688052e6367be2d4294f792c1d35917746f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53f04688052e6367be2d4294f792c1d35917746f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53f04688052e6367be2d4294f792c1d35917746f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53f04688052e6367be2d4294f792c1d35917746f/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f630fc6ab056ba999b808a0784107320bbebb445", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f630fc6ab056ba999b808a0784107320bbebb445", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f630fc6ab056ba999b808a0784107320bbebb445"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "518d86f3eab965d7ac0d752655038ffa4af318eb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53f04688052e6367be2d4294f792c1d35917746f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53f04688052e6367be2d4294f792c1d35917746f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=53f04688052e6367be2d4294f792c1d35917746f", "patch": "@@ -1,3 +1,11 @@\n+2014-08-21  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* rtl.h (try_split): Strengthen return type from rtx to rtx_insn *.\n+\n+\t* emit-rtl.c (try_split): Likewise, also for locals \"before\" and\n+\t\"after\".  For now, don't strengthen param \"trial\", which requires\n+\tadding checked casts when returning it.\n+\n 2014-08-21  David Malcolm  <dmalcolm@redhat.com>\n \n \t* debug.h (struct gcc_debug_hooks): Strengthen param 1 of hook"}, {"sha": "2d7d854095970052588a827f29c9bd72264479da", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53f04688052e6367be2d4294f792c1d35917746f/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53f04688052e6367be2d4294f792c1d35917746f/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=53f04688052e6367be2d4294f792c1d35917746f", "patch": "@@ -3551,11 +3551,11 @@ mark_label_nuses (rtx x)\n    replacement insn depending on the value of LAST.  Otherwise, it\n    returns TRIAL.  If the insn to be returned can be split, it will be.  */\n \n-rtx\n+rtx_insn *\n try_split (rtx pat, rtx trial, int last)\n {\n-  rtx before = PREV_INSN (trial);\n-  rtx after = NEXT_INSN (trial);\n+  rtx_insn *before = PREV_INSN (trial);\n+  rtx_insn *after = NEXT_INSN (trial);\n   int has_barrier = 0;\n   rtx note, seq, tem;\n   int probability;\n@@ -3565,7 +3565,7 @@ try_split (rtx pat, rtx trial, int last)\n \n   /* We're not good at redistributing frame information.  */\n   if (RTX_FRAME_RELATED_P (trial))\n-    return trial;\n+    return as_a <rtx_insn *> (trial);\n \n   if (any_condjump_p (trial)\n       && (note = find_reg_note (trial, REG_BR_PROB, 0)))\n@@ -3585,7 +3585,7 @@ try_split (rtx pat, rtx trial, int last)\n     }\n \n   if (!seq)\n-    return trial;\n+    return as_a <rtx_insn *> (trial);\n \n   /* Avoid infinite loop if any insn of the result matches\n      the original pattern.  */\n@@ -3594,7 +3594,7 @@ try_split (rtx pat, rtx trial, int last)\n     {\n       if (INSN_P (insn_last)\n \t  && rtx_equal_p (PATTERN (insn_last), pat))\n-\treturn trial;\n+\treturn as_a <rtx_insn *> (trial);\n       if (!NEXT_INSN (insn_last))\n \tbreak;\n       insn_last = NEXT_INSN (insn_last);"}, {"sha": "f9713f1fcbc1e2147b59d165862dfe844965a386", "filename": "gcc/rtl.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53f04688052e6367be2d4294f792c1d35917746f/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53f04688052e6367be2d4294f792c1d35917746f/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=53f04688052e6367be2d4294f792c1d35917746f", "patch": "@@ -2465,7 +2465,7 @@ extern rtx delete_related_insns (rtx);\n extern rtx *find_constant_term_loc (rtx *);\n \n /* In emit-rtl.c  */\n-extern rtx try_split (rtx, rtx, int);\n+extern rtx_insn *try_split (rtx, rtx, int);\n extern int split_branch_probability;\n \n /* In unknown file  */"}]}