{"sha": "840e7b5148eb5894ee29e8d6267b56903412eeac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODQwZTdiNTE0OGViNTg5NGVlMjllOGQ2MjY3YjU2OTAzNDEyZWVhYw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-05-10T02:53:43Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-05-10T02:53:43Z"}, "message": "calls.c (expand_call): Increment currently_expanding_call before calling optimize_tail_recursion.\n\n        * calls.c (expand_call): Increment currently_expanding_call\n        before calling optimize_tail_recursion.\n\nFrom-SVN: r33813", "tree": {"sha": "602d20853be1672bef4dc7382191c3fdfa73cbc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/602d20853be1672bef4dc7382191c3fdfa73cbc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/840e7b5148eb5894ee29e8d6267b56903412eeac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/840e7b5148eb5894ee29e8d6267b56903412eeac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/840e7b5148eb5894ee29e8d6267b56903412eeac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/840e7b5148eb5894ee29e8d6267b56903412eeac/comments", "author": null, "committer": null, "parents": [{"sha": "9e9ada4541daa5b83467f9eaedf04dffbf12e1ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e9ada4541daa5b83467f9eaedf04dffbf12e1ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e9ada4541daa5b83467f9eaedf04dffbf12e1ce"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "e91f0b2ed7e82277d0e3003daf39532034b3bab4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/840e7b5148eb5894ee29e8d6267b56903412eeac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/840e7b5148eb5894ee29e8d6267b56903412eeac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=840e7b5148eb5894ee29e8d6267b56903412eeac", "patch": "@@ -1,3 +1,8 @@\n+2000-05-09  Richard Henderson  <rth@cygnus.com>\n+\n+\t* calls.c (expand_call): Increment currently_expanding_call\n+\tbefore calling optimize_tail_recursion.\n+\n Tue May  9 18:54:16 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* reload1.c (reload_combine): Fix errors in last change."}, {"sha": "0c1693afa62a8874d409b79962c257b2bbed983d", "filename": "gcc/calls.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/840e7b5148eb5894ee29e8d6267b56903412eeac/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/840e7b5148eb5894ee29e8d6267b56903412eeac/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=840e7b5148eb5894ee29e8d6267b56903412eeac", "patch": "@@ -2305,9 +2305,9 @@ expand_call (exp, target, ignore)\n      This is most often true of sjlj-exceptions, which we couldn't\n      tail-call to anyway.  */\n \n-  if (!flag_optimize_sibling_calls\n+  if (currently_expanding_call++ != 0\n+      || !flag_optimize_sibling_calls\n       || !rtx_equal_function_value_matters\n-      || currently_expanding_call\n       || !stmt_loop_nest_empty ()\n       || any_pending_cleanups (1)\n       || args_size.var)\n@@ -2448,8 +2448,6 @@ expand_call (exp, target, ignore)\n       stack_pointer_delta = save_stack_pointer_delta;\n     }\n \n-  currently_expanding_call++;\n-\n   if (profile_arc_flag && (flags & ECF_FORK_OR_EXEC))\n     {\n       /* A fork duplicates the profile information, and an exec discards"}]}