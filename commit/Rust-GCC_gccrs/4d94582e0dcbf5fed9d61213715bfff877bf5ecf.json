{"sha": "4d94582e0dcbf5fed9d61213715bfff877bf5ecf", "node_id": "C_kwDOANBUbNoAKDRkOTQ1ODJlMGRjYmY1ZmVkOWQ2MTIxMzcxNWJmZmY4NzdiZjVlY2Y", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2022-06-11T10:28:36Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2022-09-26T14:03:36Z"}, "message": "nvptx: Introduce dummy multilib option for default '-misa=sm_30'\n\n... primarily in preparation for later changes.\n\n\tgcc/\n\t* config.gcc (TM_MULTILIB_CONFIG) [nvptx]: Set to '$with_arch'.\n\t* config/nvptx/t-nvptx (MULTILIB_OPTIONS, MULTILIB_MATCHES)\n\t(MULTILIB_EXCEPTIONS): Handle it.", "tree": {"sha": "f307587aecd949ee2b0caf5e195e57b1e3ae1284", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f307587aecd949ee2b0caf5e195e57b1e3ae1284"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d94582e0dcbf5fed9d61213715bfff877bf5ecf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d94582e0dcbf5fed9d61213715bfff877bf5ecf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d94582e0dcbf5fed9d61213715bfff877bf5ecf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d94582e0dcbf5fed9d61213715bfff877bf5ecf/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "108b99b6c45ed8fbad6776539a639244b63191f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/108b99b6c45ed8fbad6776539a639244b63191f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/108b99b6c45ed8fbad6776539a639244b63191f5"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "d130f49699dcd102bc65d33d611a513e9369ea71", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d94582e0dcbf5fed9d61213715bfff877bf5ecf/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d94582e0dcbf5fed9d61213715bfff877bf5ecf/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=4d94582e0dcbf5fed9d61213715bfff877bf5ecf", "patch": "@@ -5298,6 +5298,7 @@ case \"${target}\" in\n \n \tnvptx-*)\n \t\tsupported_defaults=arch\n+\t\tTM_MULTILIB_CONFIG=$with_arch\n \t\tcase $with_arch in\n \t\t\tsm_30 )\n \t\t\t\t# OK; default."}, {"sha": "c797d57690f4a355b7a88c4d8700bc9fc9695d0d", "filename": "gcc/config/nvptx/t-nvptx", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d94582e0dcbf5fed9d61213715bfff877bf5ecf/gcc%2Fconfig%2Fnvptx%2Ft-nvptx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d94582e0dcbf5fed9d61213715bfff877bf5ecf/gcc%2Fconfig%2Fnvptx%2Ft-nvptx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Ft-nvptx?ref=4d94582e0dcbf5fed9d61213715bfff877bf5ecf", "patch": "@@ -31,4 +31,22 @@ s-nvptx-gen-opt: $(srcdir)/config/nvptx/nvptx-sm.def \\\n \t  tmp-nvptx-gen.opt $(srcdir)/config/nvptx/nvptx-gen.opt\n \t$(STAMP) s-nvptx-gen-opt\n \n-MULTILIB_OPTIONS = mgomp mptx=3.1\n+\n+# Multilib setup.\n+\n+MULTILIB_OPTIONS =\n+MULTILIB_MATCHES =\n+MULTILIB_EXCEPTIONS =\n+\n+MULTILIB_OPTIONS += mgomp\n+\n+multilib_options_isa_list := $(TM_MULTILIB_CONFIG)\n+multilib_options_isa_default := $(word 1,$(multilib_options_isa_list))\n+# Add the default '-misa' as a multilib option:\n+MULTILIB_OPTIONS += misa=$(multilib_options_isa_default)\n+# ..., but don't handle it specially (remap to default):\n+MULTILIB_MATCHES += .=misa?$(multilib_options_isa_default)\n+# ..., and don't actually build it:\n+MULTILIB_EXCEPTIONS += *misa=$(multilib_options_isa_default)*\n+\n+MULTILIB_OPTIONS += mptx=3.1"}]}