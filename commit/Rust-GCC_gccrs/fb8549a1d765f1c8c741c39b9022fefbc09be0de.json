{"sha": "fb8549a1d765f1c8c741c39b9022fefbc09be0de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmI4NTQ5YTFkNzY1ZjFjOGM3NDFjMzliOTAyMmZlZmJjMDliZTBkZQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2006-10-17T02:01:27Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2006-10-17T02:01:27Z"}, "message": "re PR c++/27270 (ICE in process_init_constructor_array, at cp/typeck2.c:788)\n\n\tPR c++/27270\n\t* typeck2.c (process_init_constructor_array): Reword comment.\n\t* pt.c (tsubst_copy_and_built): Call reshape_init before calling\n\tdigest_init.\n\tPR c++/27270\n\t* g++.dg/ext/complit8.C: New test.\n\nFrom-SVN: r117814", "tree": {"sha": "1089efe692fb9971979e0d3ba4cda22269ebb472", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1089efe692fb9971979e0d3ba4cda22269ebb472"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fb8549a1d765f1c8c741c39b9022fefbc09be0de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb8549a1d765f1c8c741c39b9022fefbc09be0de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb8549a1d765f1c8c741c39b9022fefbc09be0de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb8549a1d765f1c8c741c39b9022fefbc09be0de/comments", "author": null, "committer": null, "parents": [{"sha": "26da58ddfaccabb2243f08d10c390e7f1f452873", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26da58ddfaccabb2243f08d10c390e7f1f452873", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26da58ddfaccabb2243f08d10c390e7f1f452873"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "e603fd5e4749bdf91ead735808c90315109c26e5", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fb8549a1d765f1c8c741c39b9022fefbc09be0de", "patch": "@@ -1,5 +1,10 @@\n 2006-10-16  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/27270\n+\t* typeck2.c (process_init_constructor_array): Reword comment.\n+\t* pt.c (tsubst_copy_and_built): Call reshape_init before calling\n+\tdigest_init.\n+\n \tPR c++/29408\n \t* parser.c (cp_parser_using_declaration): Stop parsing when\n \tsomething goes wrong with an access declaration."}, {"sha": "ce5a80915f98cc20c7727dfff9595465e700ee0b", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=fb8549a1d765f1c8c741c39b9022fefbc09be0de", "patch": "@@ -9351,7 +9351,10 @@ tsubst_copy_and_build (tree t,\n \tTREE_HAS_CONSTRUCTOR (r) = TREE_HAS_CONSTRUCTOR (t);\n \n \tif (type)\n-\t  return digest_init (type, r);\n+\t  {\n+\t    r = reshape_init (type, r);\n+\t    return digest_init (type, r);\n+\t  }\n \treturn r;\n       }\n "}, {"sha": "725c85fa59718d328b76c3fc536b4383947c3717", "filename": "gcc/cp/typeck2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Fcp%2Ftypeck2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Fcp%2Ftypeck2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck2.c?ref=fb8549a1d765f1c8c741c39b9022fefbc09be0de", "patch": "@@ -791,8 +791,8 @@ process_init_constructor_array (tree type, tree init)\n     /* Vectors are like simple fixed-size arrays.  */\n     len = TYPE_VECTOR_SUBPARTS (type);\n \n-  /* There cannot be more initializers than needed (or reshape_init would\n-     detect this before we do.  */\n+  /* There cannot be more initializers than needed as otherwise\n+     reshape_init would have already rejected the initializer.  */\n   if (!unbounded)\n     gcc_assert (VEC_length (constructor_elt, v) <= len);\n "}, {"sha": "603cbedee8a792cbdf035f6eb502a32e10bb251d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fb8549a1d765f1c8c741c39b9022fefbc09be0de", "patch": "@@ -1,5 +1,8 @@\n 2006-10-16  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/27270\n+\t* g++.dg/ext/complit8.C: New test.\n+\n \tPR c++/29408\n \t* g++.dg/parse/dtor12.C: New test.\n "}, {"sha": "b778b4b92b637b1e7ae9574c5ccc20ee4e8cad5c", "filename": "gcc/testsuite/g++.dg/ext/complit8.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fcomplit8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb8549a1d765f1c8c741c39b9022fefbc09be0de/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fcomplit8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fcomplit8.C?ref=fb8549a1d765f1c8c741c39b9022fefbc09be0de", "patch": "@@ -0,0 +1,12 @@\n+// PR c++/27270\n+// { dg-options \"\" }\n+\n+template<typename Entry>\n+struct Array {\n+  Entry *array[32];\n+  Array () :\n+    array ( (Entry*[1]) { 0, 0 } ) // { dg-error \"initializers|conversion\" }\n+  {}\n+};\n+\n+Array<void*> a;"}]}