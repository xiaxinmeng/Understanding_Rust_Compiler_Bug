{"sha": "a18801474ab1eaccefe977859bc8b1764dbd0312", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE4ODAxNDc0YWIxZWFjY2VmZTk3Nzg1OWJjOGIxNzY0ZGJkMDMxMg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2011-07-05T17:06:09Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2011-07-05T17:06:09Z"}, "message": "ia64: Remove ia64_dwarf2out_def_steady_cfa.\n\nThis defines nothing that we can't deduce already, so remove it.\n\n        * config/ia64/ia64.c (ia64_dwarf2out_def_steady_cfa): Remove.\n        (process_cfa_adjust_cfa, ia64_asm_unwind_emit): Don't call it.\n\nFrom-SVN: r175872", "tree": {"sha": "f21626235d9de9473c6b593d9fce7e102c3ece59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f21626235d9de9473c6b593d9fce7e102c3ece59"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a18801474ab1eaccefe977859bc8b1764dbd0312", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a18801474ab1eaccefe977859bc8b1764dbd0312", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a18801474ab1eaccefe977859bc8b1764dbd0312", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a18801474ab1eaccefe977859bc8b1764dbd0312/comments", "author": null, "committer": null, "parents": [{"sha": "9f2ff8e5c985bb72bc6190be916618279abeb7ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f2ff8e5c985bb72bc6190be916618279abeb7ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f2ff8e5c985bb72bc6190be916618279abeb7ce"}], "stats": {"total": 27, "additions": 3, "deletions": 24}, "files": [{"sha": "1dbd9261139fddc894bb729a560d1c327c5570a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a18801474ab1eaccefe977859bc8b1764dbd0312/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a18801474ab1eaccefe977859bc8b1764dbd0312/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a18801474ab1eaccefe977859bc8b1764dbd0312", "patch": "@@ -1,5 +1,8 @@\n 2011-07-05  Richard Henderson  <rth@redhat.com>\n \n+\t* config/ia64/ia64.c (ia64_dwarf2out_def_steady_cfa): Remove.\n+\t(process_cfa_adjust_cfa, ia64_asm_unwind_emit): Don't call it.\n+\n \t* config/ia64/ia64.c (ia64_expand_prologue): Emit REG_CFA_REGISTER\n \tfor ar.pfs save at alloc insn.\n "}, {"sha": "bb3fc4d7e92b5661bc6e3c9a17890441f2b9ece9", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 0, "deletions": 24, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a18801474ab1eaccefe977859bc8b1764dbd0312/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a18801474ab1eaccefe977859bc8b1764dbd0312/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=a18801474ab1eaccefe977859bc8b1764dbd0312", "patch": "@@ -9642,26 +9642,6 @@ ia64_emit_deleted_label_after_insn (rtx insn)\n   return xstrdup (label);\n }\n \n-/* Define the CFA after INSN with the steady-state definition.  */\n-\n-static void\n-ia64_dwarf2out_def_steady_cfa (rtx insn, bool frame)\n-{\n-  rtx fp = frame_pointer_needed\n-    ? hard_frame_pointer_rtx\n-    : stack_pointer_rtx;\n-  const char *label = ia64_emit_deleted_label_after_insn (insn);\n-\n-  if (!frame)\n-    return;\n-\n-  dwarf2out_def_cfa\n-    (label, REGNO (fp),\n-     ia64_initial_elimination_offset\n-     (REGNO (arg_pointer_rtx), REGNO (fp))\n-     + ARG_POINTER_CFA_OFFSET (current_function_decl));\n-}\n-\n /* All we need to do here is avoid a crash in the generic dwarf2\n    processing.  The real CFA definition is set up above.  */\n \n@@ -9727,7 +9707,6 @@ process_cfa_adjust_cfa (FILE *asm_out_file, rtx pat, rtx insn,\n \t\tfprintf (asm_out_file,\n \t\t\t \"\\t.fframe \"HOST_WIDE_INT_PRINT_DEC\"\\n\",\n \t\t\t -INTVAL (op1));\n-\t      ia64_dwarf2out_def_steady_cfa (insn, frame);\n \t    }\n \t  else\n \t    process_epilogue (asm_out_file, insn, unwind, frame);\n@@ -9746,7 +9725,6 @@ process_cfa_adjust_cfa (FILE *asm_out_file, rtx pat, rtx insn,\n       if (unwind)\n \tfprintf (asm_out_file, \"\\t.vframe r%d\\n\",\n \t\t ia64_dbx_register_number (REGNO (dest)));\n-      ia64_dwarf2out_def_steady_cfa (insn, frame);\n     }\n   else\n     gcc_unreachable ();\n@@ -9946,8 +9924,6 @@ ia64_asm_unwind_emit (FILE *asm_out_file, rtx insn)\n \t      fprintf (asm_out_file, \"\\t.copy_state %d\\n\",\n \t\t       cfun->machine->state_num);\n \t    }\n-\t  if (IA64_CHANGE_CFA_IN_EPILOGUE)\n-\t    ia64_dwarf2out_def_steady_cfa (insn, frame);\n \t  need_copy_state = false;\n \t}\n     }"}]}