{"sha": "8dfa3bb06ec4c13b185595beefbacf4455979d1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGRmYTNiYjA2ZWM0YzEzYjE4NTU5NWJlZWZiYWNmNDQ1NTk3OWQxZg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2003-03-18T16:32:12Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2003-03-18T16:32:12Z"}, "message": "* i386.md (cvtts?2si peep2): New.\n\nFrom-SVN: r64537", "tree": {"sha": "96da835e1fcc5008f6951eb668fa2713473ba0ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96da835e1fcc5008f6951eb668fa2713473ba0ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8dfa3bb06ec4c13b185595beefbacf4455979d1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dfa3bb06ec4c13b185595beefbacf4455979d1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dfa3bb06ec4c13b185595beefbacf4455979d1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dfa3bb06ec4c13b185595beefbacf4455979d1f/comments", "author": null, "committer": null, "parents": [{"sha": "1e78888716719edb9b1ba19dd92086ed70fb3613", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e78888716719edb9b1ba19dd92086ed70fb3613", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e78888716719edb9b1ba19dd92086ed70fb3613"}], "stats": {"total": 60, "additions": 60, "deletions": 0}, "files": [{"sha": "46daf2702b625735bb05e29fbc119f2881c284bc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8dfa3bb06ec4c13b185595beefbacf4455979d1f", "patch": "@@ -1,3 +1,7 @@\n+Tue Mar 18 13:15:08 CET 2003  Jan Hubicka  <jh@suse.cz>\n+\n+\t* i386.md (cvtts?2si peep2): New.\n+\n 2003-03-18  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/h8300.md (*iorsi3_two_qi_zext): New."}, {"sha": "22b6a14a3b145edfa64eb88a814e91cbb69b7302", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=8dfa3bb06ec4c13b185595beefbacf4455979d1f", "patch": "@@ -4516,6 +4516,16 @@\n    (set (match_dup 0) (fix:DI (match_dup 2)))]\n   \"\")\n \n+;; Avoid vector decoded form of the instruction.\n+(define_peephole2\n+  [(match_scratch:SF 2 \"x\")\n+   (set (match_operand:DI 0 \"register_operand\" \"\")\n+\t(fix:DI (match_operand:SF 1 \"memory_operand\" \"\")))]\n+  \"TARGET_K8 && !optimize_size\"\n+  [(set (match_dup 2) (match_dup 1))\n+   (set (match_dup 0) (fix:DI (match_dup 2)))]\n+  \"\")\n+\n (define_insn \"fix_truncdfdi_sse\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=r,r\")\n \t(fix:DI (match_operand:DF 1 \"nonimmediate_operand\" \"Y,Ym\")))]\n@@ -4534,6 +4544,16 @@\n    (set (match_dup 0) (fix:DI (match_dup 2)))]\n   \"\")\n \n+;; Avoid vector decoded form of the instruction.\n+(define_peephole2\n+  [(match_scratch:DF 2 \"Y\")\n+   (set (match_operand:DI 0 \"register_operand\" \"\")\n+\t(fix:DI (match_operand:DF 1 \"memory_operand\" \"\")))]\n+  \"TARGET_K8 && !optimize_size\"\n+  [(set (match_dup 2) (match_dup 1))\n+   (set (match_dup 0) (fix:DI (match_dup 2)))]\n+  \"\")\n+\n ;; Signed conversion to SImode.\n \n (define_expand \"fix_truncxfsi2\"\n@@ -4647,6 +4667,16 @@\n    (set (match_dup 0) (fix:SI (match_dup 2)))]\n   \"\")\n \n+;; Avoid vector decoded form of the instruction.\n+(define_peephole2\n+  [(match_scratch:SF 2 \"x\")\n+   (set (match_operand:SI 0 \"register_operand\" \"\")\n+\t(fix:SI (match_operand:SF 1 \"memory_operand\" \"\")))]\n+  \"TARGET_K8 && !optimize_size\"\n+  [(set (match_dup 2) (match_dup 1))\n+   (set (match_dup 0) (fix:SI (match_dup 2)))]\n+  \"\")\n+\n (define_insn \"fix_truncdfsi_sse\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r,r\")\n \t(fix:SI (match_operand:DF 1 \"nonimmediate_operand\" \"Y,Ym\")))]\n@@ -4655,6 +4685,16 @@\n   [(set_attr \"type\" \"sseicvt\")\n    (set_attr \"athlon_decode\" \"double,vector\")])\n \n+;; Avoid vector decoded form of the instruction.\n+(define_peephole2\n+  [(match_scratch:DF 2 \"Y\")\n+   (set (match_operand:SI 0 \"register_operand\" \"\")\n+\t(fix:SI (match_operand:DF 1 \"memory_operand\" \"\")))]\n+  \"TARGET_K8 && !optimize_size\"\n+  [(set (match_dup 2) (match_dup 1))\n+   (set (match_dup 0) (fix:SI (match_dup 2)))]\n+  \"\")\n+\n ;; Avoid vector decoded form of the instruction.\n (define_peephole2\n   [(match_scratch:DF 2 \"Y\")"}, {"sha": "08fa15bb669660aa92f5145b841269524b25faf3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8dfa3bb06ec4c13b185595beefbacf4455979d1f", "patch": "@@ -1,3 +1,7 @@\n+Tue Mar 18 13:14:05 CET 2003  Jan Hubicka  <jh@suse.cz>\n+\n+\t* gcc.dg/i386-cvt-1.c: New test.\n+\n 2003-03-17  Zack Weinberg  <zack@codesourcery.com>\n \n         * objc.dg/naming-1.m: Use \"(parse|syntax) error\"."}, {"sha": "c4558d7a1f206aa9413c4d8d7b812f56bcbe5f13", "filename": "gcc/testsuite/gcc.dg/i386-cvt-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-cvt-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dfa3bb06ec4c13b185595beefbacf4455979d1f/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-cvt-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-cvt-1.c?ref=8dfa3bb06ec4c13b185595beefbacf4455979d1f", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile { target i?86-*-* x86_64-*-* } } */\n+/* { dg-options \"-O2 -march=k8 -mfpmath=sse\" } */\n+/* { dg-final { scan-assembler \"cvttsd2si.*xmm\" } } */\n+/* { dg-final { scan-assembler \"cvttss2si.*xmm\" } } */\n+int a,a1;\n+double b;\n+float b1;\n+t()\n+{\n+\ta=b;\n+\ta1=b1;\n+}"}]}