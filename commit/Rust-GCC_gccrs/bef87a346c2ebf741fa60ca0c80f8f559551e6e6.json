{"sha": "bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmVmODdhMzQ2YzJlYmY3NDFmYTYwY2EwYzgwZjhmNTU5NTUxZTZlNg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-03-25T18:41:28Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-03-25T18:41:28Z"}, "message": "dominance.c (free_dominance_info): Speed up by freeing et data structures without maintaining other nodes.\n\n\t* dominance.c (free_dominance_info): Speed up by freeing et\n\tdata structures without maintaining other nodes.\n\t* et-forest.c (et_free_tree_force): New.\n\t* et-forest.h: Add a prototype for et_free_tree_force.\n\nFrom-SVN: r97054", "tree": {"sha": "36dc2c60cc0910678a8a57037651dc2c5999e4b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36dc2c60cc0910678a8a57037651dc2c5999e4b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/comments", "author": null, "committer": null, "parents": [{"sha": "ccb527e4b7a69db20ae01dbd4bfe7b79d8ace6ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccb527e4b7a69db20ae01dbd4bfe7b79d8ace6ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccb527e4b7a69db20ae01dbd4bfe7b79d8ace6ec"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "f968b30cccaf1910ad3a7f55d760c7ae8b441559", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "patch": "@@ -1,3 +1,10 @@\n+2005-03-25  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* dominance.c (free_dominance_info): Speed up by freeing et\n+\tdata structures without maintaining other nodes.\n+\t* et-forest.c (et_free_tree_force): New.\n+\t* et-forest.h: Add a prototype for et_free_tree_force.\n+\n 2005-03-25  John David Anglin  <dave.anglin@nrc-crnc.gc.ca>\n \n \tPR target/15491"}, {"sha": "d48701d96a5a72d5ed2d8552b58b1a5d655c4bc7", "filename": "gcc/dominance.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2Fdominance.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2Fdominance.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdominance.c?ref=bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "patch": "@@ -659,11 +659,11 @@ free_dominance_info (enum cdi_direction dir)\n \n   FOR_ALL_BB (bb)\n     {\n-      delete_from_dominance_info (dir, bb);\n+      et_free_tree_force (bb->dom[dir]);\n+      bb->dom[dir] = NULL;\n     }\n \n-  /* If there are any nodes left, something is wrong.  */\n-  gcc_assert (!n_bbs_in_dom_tree[dir]);\n+  n_bbs_in_dom_tree[dir] = 0;\n \n   dom_computed[dir] = DOM_NONE;\n }"}, {"sha": "df7c22aff407d31f71e297e4961c2d3b4ecf4eec", "filename": "gcc/et-forest.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2Fet-forest.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2Fet-forest.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fet-forest.c?ref=bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "patch": "@@ -499,6 +499,15 @@ et_free_tree (struct et_node *t)\n   pool_free (et_nodes, t);\n }\n \n+/* Releases et tree T without maintaining other nodes.  */\n+\n+void\n+et_free_tree_force (struct et_node *t)\n+{\n+  pool_free (et_occurrences, t->rightmost_occ);\n+  pool_free (et_nodes, t);\n+}\n+\n /* Sets father of et tree T to FATHER.  */\n \n void"}, {"sha": "79d4bc9723d4dd8300f5cb1ef23aca94311f4694", "filename": "gcc/et-forest.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2Fet-forest.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef87a346c2ebf741fa60ca0c80f8f559551e6e6/gcc%2Fet-forest.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fet-forest.h?ref=bef87a346c2ebf741fa60ca0c80f8f559551e6e6", "patch": "@@ -73,6 +73,7 @@ struct et_node\n \n struct et_node *et_new_tree (void *data);\n void et_free_tree (struct et_node *);\n+void et_free_tree_force (struct et_node *);\n void et_set_father (struct et_node *, struct et_node *);\n void et_split (struct et_node *);\n struct et_node *et_nca (struct et_node *, struct et_node *);"}]}