{"sha": "6a790a69809ba41915575baff46d8c4316129526", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmE3OTBhNjk4MDliYTQxOTE1NTc1YmFmZjQ2ZDhjNDMxNjEyOTUyNg==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2009-12-05T20:11:52Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2009-12-05T20:11:52Z"}, "message": "Add TARGET_FUSED_MADD to FMA4 insns.\n\n\t* config/i386/i386.c (TARGET_DEFAULT_TARGET_FLAGS): Add\n\tMASK_FUSED_MADD.\n\t* config/i386/i386.h (CC1_CPU_SPEC_1): Remove\n\t\"'-mfused-madd' was removed\".\n\t* config/i386/i386.opt (mfused-madd): New.\n\t* config/i386/sse.md: Add TARGET_FUSED_MADD to FMA4 insns.\n\t* doc/invoke.texi (-mfused-madd, -mno-fused-madd): Document.\n\nFrom-SVN: r155015", "tree": {"sha": "76d2384e76e5bca4d4ee4720df47f7fd61f4d223", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76d2384e76e5bca4d4ee4720df47f7fd61f4d223"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6a790a69809ba41915575baff46d8c4316129526", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a790a69809ba41915575baff46d8c4316129526", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a790a69809ba41915575baff46d8c4316129526", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a790a69809ba41915575baff46d8c4316129526/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70d60e880112dcdb7553b648c901817ce5f72cdc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70d60e880112dcdb7553b648c901817ce5f72cdc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70d60e880112dcdb7553b648c901817ce5f72cdc"}], "stats": {"total": 152, "additions": 107, "deletions": 45}, "files": [{"sha": "41868078a8eed9936c66dd6713b1c6d2f222ca0f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a790a69809ba41915575baff46d8c4316129526/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a790a69809ba41915575baff46d8c4316129526/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6a790a69809ba41915575baff46d8c4316129526", "patch": "@@ -1,3 +1,13 @@\n+2009-12-05  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* config/i386/i386.c (TARGET_DEFAULT_TARGET_FLAGS): Add\n+\tMASK_FUSED_MADD.\n+\t* config/i386/i386.h (CC1_CPU_SPEC_1): Remove\n+\t\"'-mfused-madd' was removed\".\n+\t* config/i386/i386.opt (mfused-madd): New.\n+\t* config/i386/sse.md: Add TARGET_FUSED_MADD to FMA4 insns.\n+\t* doc/invoke.texi (-mfused-madd, -mno-fused-madd): Document.\n+\n 2009-12-05  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \t* pa64-hpux.h (LIB_SPEC): Handle -rdynamic."}, {"sha": "6cd9d7dc74042097e755bae8f8e09ff244a886d8", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=6a790a69809ba41915575baff46d8c4316129526", "patch": "@@ -30307,7 +30307,8 @@ ix86_enum_va_list (int idx, const char **pname, tree *ptree)\n #define TARGET_DEFAULT_TARGET_FLAGS\t\\\n   (TARGET_DEFAULT\t\t\t\\\n    | TARGET_SUBTARGET_DEFAULT\t\t\\\n-   | TARGET_TLS_DIRECT_SEG_REFS_DEFAULT)\n+   | TARGET_TLS_DIRECT_SEG_REFS_DEFAULT \\\n+   | MASK_FUSED_MADD)\n \n #undef TARGET_HANDLE_OPTION\n #define TARGET_HANDLE_OPTION ix86_handle_option"}, {"sha": "860d234efbd1613790af35a1960a4fb671bc175d", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=6a790a69809ba41915575baff46d8c4316129526", "patch": "@@ -546,8 +546,6 @@ extern const char *host_detect_local_cpu (int argc, const char **argv);\n %n`-mintel-syntax' is deprecated. Use `-masm=intel' instead.\\n} \\\n %{msse5:-mavx \\\n %n'-msse5' was removed.\\n} \\\n-%{mfused-madd:-mavx \\\n-%n'-mfused-madd' was removed.\\n} \\\n %{mno-intel-syntax:-masm=att \\\n %n`-mno-intel-syntax' is deprecated. Use `-masm=att' instead.\\n}\"\n "}, {"sha": "0afdd1197f613bd4222fd8468e19b7d2dc17e68e", "filename": "gcc/config/i386/i386.opt", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fi386.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fi386.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.opt?ref=6a790a69809ba41915575baff46d8c4316129526", "patch": "@@ -244,6 +244,12 @@ mcld\n Target Report Mask(CLD) Save\n Generate cld instruction in the function prologue.\n \n+mfused-madd\n+Target Report Mask(FUSED_MADD) Save\n+Enable automatic generation of fused floating point multiply-add instructions\n+if the ISA supports such instructions.  The -mfused-madd option is on by\n+default.\n+\n ;; ISA support\n \n m32"}, {"sha": "9524d4f7957a011222a29e82e5a0e193cdf37ca4", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 80, "deletions": 40, "changes": 120, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=6a790a69809ba41915575baff46d8c4316129526", "patch": "@@ -1709,7 +1709,8 @@\n \t  (match_operand:FMA4MODEF4 1 \"register_operand\" \"%x,x\")\n \t  (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t (match_operand:FMA4MODEF4 3 \"nonimmediate_operand\" \"xm,x\")))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmadd<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1741,7 +1742,8 @@\n \t  (match_operand:FMA4MODEF4 1 \"register_operand\" \"%x,x\")\n \t  (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t (match_operand:FMA4MODEF4 3 \"nonimmediate_operand\" \"xm,x\")))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsub<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1775,7 +1777,8 @@\n \t (mult:FMA4MODEF4\n \t  (match_operand:FMA4MODEF4 1 \"register_operand\" \"%x,x\")\n \t  (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\"))))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmadd<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1809,7 +1812,8 @@\n \t   (match_operand:FMA4MODEF4 1 \"register_operand\" \"%x,x\"))\n \t  (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t (match_operand:FMA4MODEF4 3 \"nonimmediate_operand\" \"xm,x\")))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmsub<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1843,7 +1847,8 @@\n \t  (match_operand:SSEMODEF4 1 \"register_operand\" \"%x,x\")\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"xm,x\")))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1879,7 +1884,8 @@\n \t  (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))\n \t (match_dup 0)\n \t (const_int 1)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1893,7 +1899,8 @@\n \t  (match_operand:SSEMODEF4 1 \"register_operand\" \"%x,x\")\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"xm,x\")))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1929,7 +1936,8 @@\n \t  (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))\n \t (match_dup 0)\n \t (const_int 1)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1945,7 +1953,8 @@\n \t (mult:SSEMODEF4\n \t  (match_operand:SSEMODEF4 1 \"register_operand\" \"%x,x\")\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,m\"))))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1981,7 +1990,8 @@\n \t   (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,m\")))\n \t (match_dup 0)\n \t (const_int 1)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1997,7 +2007,8 @@\n \t   (match_operand:SSEMODEF4 1 \"register_operand\" \"%x,x\"))\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"xm,x\")))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2037,7 +2048,8 @@\n \t  (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))\n \t (match_dup 0)\n \t (const_int 1)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2053,7 +2065,8 @@\n \t    (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t   (match_operand:FMA4MODEF4 3 \"nonimmediate_operand\" \"xm,x\"))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmadd<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2067,7 +2080,8 @@\n \t    (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t   (match_operand:FMA4MODEF4 3 \"nonimmediate_operand\" \"xm,x\"))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsub<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2081,7 +2095,8 @@\n \t    (match_operand:FMA4MODEF4 1 \"register_operand\" \"%x,x\")\n \t    (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\")))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmadd<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2096,7 +2111,8 @@\n \t    (match_operand:FMA4MODEF4 2 \"nonimmediate_operand\" \"x,m\"))\n \t   (match_operand:FMA4MODEF4 3 \"nonimmediate_operand\" \"xm,x\"))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmsub<fma4modesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2111,7 +2127,8 @@\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,m\"))\n \t   (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2125,7 +2142,8 @@\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,m\"))\n \t   (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2139,7 +2157,8 @@\n \t    (match_operand:SSEMODEF2P 1 \"register_operand\" \"%x,x\")\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,m\")))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2154,7 +2173,8 @@\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,m\"))\n \t   (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -2173,7 +2193,8 @@\n \t   (match_dup 0)\n \t   (const_int 1))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -2190,7 +2211,8 @@\n \t   (match_dup 0)\n \t   (const_int 1))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -2207,7 +2229,8 @@\n \t   (match_dup 0)\n \t   (const_int 1))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -2225,7 +2248,8 @@\n \t   (match_dup 0)\n \t   (const_int 1))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfnmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -2250,7 +2274,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 170)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V8SF\")])\n@@ -2269,7 +2294,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 10)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4DF\")])\n@@ -2288,7 +2314,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 10)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4SF\")])\n@@ -2307,7 +2334,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 2)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V2DF\")])\n@@ -2326,7 +2354,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 85)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V8SF\")])\n@@ -2345,7 +2374,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 5)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4DF\")])\n@@ -2364,7 +2394,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 5)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4SF\")])\n@@ -2383,7 +2414,8 @@\n \t      (match_dup 2))\n \t    (match_dup 3))\n \t  (const_int 1)))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V2DF\")])\n@@ -2406,7 +2438,8 @@\n \t     (match_dup 3))\n \t   (const_int 170))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V8SF\")])\n@@ -2427,7 +2460,8 @@\n \t     (match_dup 3))\n \t   (const_int 10))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4DF\")])\n@@ -2448,7 +2482,8 @@\n \t     (match_dup 3))\n \t   (const_int 10))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4SF\")])\n@@ -2469,7 +2504,8 @@\n \t     (match_dup 3))\n \t   (const_int 2))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmaddsubpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V2DF\")])\n@@ -2490,7 +2526,8 @@\n \t     (match_dup 3))\n \t   (const_int 85))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V8SF\")])\n@@ -2511,7 +2548,8 @@\n \t     (match_dup 3))\n \t   (const_int 5))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4DF\")])\n@@ -2532,7 +2570,8 @@\n \t     (match_dup 3))\n \t   (const_int 5))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddps\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V4SF\")])\n@@ -2553,7 +2592,8 @@\n \t     (match_dup 3))\n \t   (const_int 1))]\n \t UNSPEC_FMA4_INTRINSIC))]\n-  \"TARGET_FMA4 && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n+  \"TARGET_FMA4 && TARGET_FUSED_MADD\n+   && !(MEM_P (operands[2]) && MEM_P (operands[3]))\"\n   \"vfmsubaddpd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"V2DF\")])"}, {"sha": "22fad8fe88c14620a33a10d73fb4832cb30c58b0", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a790a69809ba41915575baff46d8c4316129526/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=6a790a69809ba41915575baff46d8c4316129526", "patch": "@@ -593,7 +593,7 @@ Objective-C and Objective-C++ Dialects}.\n -mincoming-stack-boundary=@var{num}\n -mcld -mcx16 -msahf -mmovbe -mcrc32 -mrecip @gol\n -mmmx  -msse  -msse2 -msse3 -mssse3 -msse4.1 -msse4.2 -msse4 -mavx @gol\n--maes -mpclmul @gol\n+-maes -mpclmul -mfused-madd @gol\n -msse4a -m3dnow -mpopcnt -mabm -mfma4 -mxop -mlwp @gol\n -mthreads  -mno-align-stringops  -minline-all-stringops @gol\n -minline-stringops-dynamically -mstringop-strategy=@var{alg} @gol\n@@ -12062,6 +12062,13 @@ supported architecture, using the appropriate flags.  In particular,\n the file containing the CPU detection code should be compiled without\n these options.\n \n+@item -mfused-madd\n+@itemx -mno-fused-madd\n+@opindex mfused-madd\n+@opindex mno-fused-madd\n+Do (don't) generate code that uses the fused multiply/add or multiply/subtract\n+instructions.  The default is to use these instructions.\n+\n @item -mcld\n @opindex mcld\n This option instructs GCC to emit a @code{cld} instruction in the prologue\n@@ -12397,7 +12404,7 @@ Do not generate inline code for sqrt.\n @opindex mfused-madd\n @opindex mno-fused-madd\n Do (don't) generate code that uses the fused multiply/add or multiply/subtract\n-instructions.    The default is to use these instructions.\n+instructions.  The default is to use these instructions.\n \n @item -mno-dwarf2-asm\n @itemx -mdwarf2-asm"}]}