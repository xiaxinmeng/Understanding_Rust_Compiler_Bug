{"sha": "aa79283408d03841fae2f24d94b5385c978b5a0b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWE3OTI4MzQwOGQwMzg0MWZhZTJmMjRkOTRiNTM4NWM5NzhiNWEwYg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2007-10-15T17:05:19Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2007-10-15T17:05:19Z"}, "message": "re PR middle-end/33706 (gcc_assert failure in verify_eh_edges)\n\ngcc/ChangeLog:\nPR middle-end/33706\n* tree-inline.c (copy_bb): Use bsi_replace to replace a\n__builtin_va_arg_pack-containing call stmt.\ngcc/testsuite/ChangeLog:\nPR middle-end/33706\n* gcc.dg/va-arg-pack-2.c: New.\n\nFrom-SVN: r129355", "tree": {"sha": "731a989575c8ab26aad22c508cf9f5228d2d8afd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/731a989575c8ab26aad22c508cf9f5228d2d8afd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aa79283408d03841fae2f24d94b5385c978b5a0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa79283408d03841fae2f24d94b5385c978b5a0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa79283408d03841fae2f24d94b5385c978b5a0b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa79283408d03841fae2f24d94b5385c978b5a0b/comments", "author": null, "committer": null, "parents": [{"sha": "608a3be9053899916d4f6655e8fc2d1790f9b9d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/608a3be9053899916d4f6655e8fc2d1790f9b9d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/608a3be9053899916d4f6655e8fc2d1790f9b9d5"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "f627ef7d157d61deec851408f33be1a2344d2f50", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aa79283408d03841fae2f24d94b5385c978b5a0b", "patch": "@@ -1,3 +1,9 @@\n+2007-10-15  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR middle-end/33706\n+\t* tree-inline.c (copy_bb): Use bsi_replace to replace a\n+\t__builtin_va_arg_pack-containing call stmt.\n+\n 2007-10-15  Razya Ladelsky  <razya@il.ibm.com>\n \n         * matrix-reorg.c (gate_matrix_reorg): Don't comment out whole"}, {"sha": "7f09cddb89ca9521584fced0d203d99f04acaebe", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aa79283408d03841fae2f24d94b5385c978b5a0b", "patch": "@@ -1,3 +1,8 @@\n+2007-10-15  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR middle-end/33706\n+\t* gcc.dg/va-arg-pack-2.c: New.\n+\n 2007-10-15  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/33619"}, {"sha": "417248a2a0140ba1dc29eb9a4c7a703b0d4de6aa", "filename": "gcc/testsuite/gcc.dg/va-arg-pack-2.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-pack-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-pack-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-pack-2.c?ref=aa79283408d03841fae2f24d94b5385c978b5a0b", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+extern void noreturn (int status, ...);\n+\n+extern inline __attribute ((always_inline)) void\n+error (int status, ...)\n+{\n+  if (__builtin_constant_p (status))\n+    noreturn (status, __builtin_va_arg_pack ());\n+}\n+\n+void\n+f (void)\n+{\n+  error (1);\n+}"}, {"sha": "7ebfbcd4a6ce20a0b8e79d7e1a9c68cef64b348f", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa79283408d03841fae2f24d94b5385c978b5a0b/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=aa79283408d03841fae2f24d94b5385c978b5a0b", "patch": "@@ -863,9 +863,18 @@ copy_bb (copy_body_data *id, basic_block bb, int frequency_scale, int count_scal\n \t\t  if (TREE_CODE (*call_ptr) == WITH_SIZE_EXPR)\n \t\t    call_ptr = &TREE_OPERAND (*call_ptr, 0);\n \t\t  gcc_assert (*call_ptr == call);\n-\t\t  *call_ptr = new_call;\n-\t\t  stmt = *stmtp;\n-\t\t  update_stmt (stmt);\n+\t\t  if (call_ptr == stmtp)\n+\t\t    {\n+\t\t      bsi_replace (&copy_bsi, new_call, true);\n+\t\t      stmtp = bsi_stmt_ptr (copy_bsi);\n+\t\t      stmt = *stmtp;\n+\t\t    }\n+\t\t  else\n+\t\t    {\n+\t\t      *call_ptr = new_call;\n+\t\t      stmt = *stmtp;\n+\t\t      update_stmt (stmt);\n+\t\t    }\n \t\t}\n \t      else if (call\n \t\t       && id->call_expr"}]}