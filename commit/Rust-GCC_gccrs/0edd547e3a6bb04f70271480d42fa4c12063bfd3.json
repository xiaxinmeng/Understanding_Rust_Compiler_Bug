{"sha": "0edd547e3a6bb04f70271480d42fa4c12063bfd3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVkZDU0N2UzYTZiYjA0ZjcwMjcxNDgwZDQyZmE0YzEyMDYzYmZkMw==", "commit": {"author": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1996-09-30T17:39:54Z"}, "committer": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1996-09-30T17:39:54Z"}, "message": "Changes for Texinfo 3.8 release; see ChangeLog.\n\nFrom-SVN: r12874", "tree": {"sha": "52dfff2428cb0af1d3c44733dd4235023207c309", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52dfff2428cb0af1d3c44733dd4235023207c309"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0edd547e3a6bb04f70271480d42fa4c12063bfd3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0edd547e3a6bb04f70271480d42fa4c12063bfd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0edd547e3a6bb04f70271480d42fa4c12063bfd3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0edd547e3a6bb04f70271480d42fa4c12063bfd3/comments", "author": null, "committer": null, "parents": [{"sha": "4639555c1fb991cf1b721e5038306fbfcdd3f112", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4639555c1fb991cf1b721e5038306fbfcdd3f112", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4639555c1fb991cf1b721e5038306fbfcdd3f112"}], "stats": {"total": 275, "additions": 169, "deletions": 106}, "files": [{"sha": "abc38f84e4cd6e0a1018bb5761e859726e9c77fc", "filename": "gcc/texinfo.tex", "status": "modified", "additions": 169, "deletions": 106, "changes": 275, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0edd547e3a6bb04f70271480d42fa4c12063bfd3/gcc%2Ftexinfo.tex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0edd547e3a6bb04f70271480d42fa4c12063bfd3/gcc%2Ftexinfo.tex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftexinfo.tex?ref=0edd547e3a6bb04f70271480d42fa4c12063bfd3", "patch": "@@ -35,7 +35,7 @@\n \n % This automatically updates the version number based on RCS.\n \\def\\deftexinfoversion$#1: #2 ${\\def\\texinfoversion{#2}}\n-\\deftexinfoversion$Revision: 2.182 $\n+\\deftexinfoversion$Revision: 2.183 $\n \\message{Loading texinfo package [Version \\texinfoversion]:}\n \n % If in a .fmt file, print the version number\n@@ -46,20 +46,20 @@\n \n % Save some parts of plain tex whose names we will redefine.\n \n-\\let\\ptextilde=\\~\n-\\let\\ptexlbrace=\\{\n-\\let\\ptexrbrace=\\}\n-\\let\\ptexdots=\\dots\n-\\let\\ptexdot=\\.\n-\\let\\ptexstar=\\*\n-\\let\\ptexend=\\end\n-\\let\\ptexbullet=\\bullet\n \\let\\ptexb=\\b\n+\\let\\ptexbullet=\\bullet\n \\let\\ptexc=\\c\n+\\let\\ptexcomma=\\,\n+\\let\\ptexdot=\\.\n+\\let\\ptexdots=\\dots\n+\\let\\ptexend=\\end\n+\\let\\ptexequiv = \\equiv\n \\let\\ptexi=\\i\n+\\let\\ptexlbrace=\\{\n+\\let\\ptexrbrace=\\}\n+\\let\\ptexstar=\\*\n \\let\\ptext=\\t\n-\\let\\ptexl=\\l\n-\\let\\ptexL=\\L\n+\\let\\ptextilde=\\~\n \n % Be sure we're in horizontal mode when doing a tie, since we make space\n % equivalent to this in @example-like environments. Otherwise, a space\n@@ -138,15 +138,24 @@\n %---------------------End change-----------------------\n \n % \\onepageout takes a vbox as an argument.  Note that \\pagecontents\n-% does insertions itself, but you have to call it yourself.\n+% does insertions, but you have to call it yourself.\n \\chardef\\PAGE=255  \\output={\\onepageout{\\pagecontents\\PAGE}}\n-\\def\\onepageout#1{\\hoffset=\\normaloffset\n-\\ifodd\\pageno  \\advance\\hoffset by \\bindingoffset\n-\\else \\advance\\hoffset by -\\bindingoffset\\fi\n-{\\escapechar=`\\\\\\relax % makes sure backslash is used in output files.\n-\\shipout\\vbox{{\\let\\hsize=\\pagewidth \\makeheadline} \\pagebody{#1}%\n-{\\let\\hsize=\\pagewidth \\makefootline}}}%\n-\\advancepageno \\ifnum\\outputpenalty>-20000 \\else\\dosupereject\\fi}\n+\\def\\onepageout#1{%\n+  \\hoffset=\\normaloffset\n+  \\ifodd\\pageno  \\advance\\hoffset by \\bindingoffset\n+  \\else \\advance\\hoffset by -\\bindingoffset\\fi\n+  {%\n+    \\escapechar = `\\\\ % use backslash in output files.\n+    \\indexdummies\n+    \\shipout\\vbox{%\n+      {\\let\\hsize=\\pagewidth \\makeheadline}%\n+      \\pagebody{#1}%\n+      {\\let\\hsize=\\pagewidth \\makefootline}%\n+    }%\n+  }%\n+  \\advancepageno\n+  \\ifnum\\outputpenalty>-20000 \\else\\dosupereject\\fi\n+}\n \n %%%% For @cropmarks command %%%%\n \n@@ -367,11 +376,43 @@\n %\\def\\'{{'}}\n \n % Used to generate quoted braces.\n-\n \\def\\mylbrace {{\\tt \\char '173}}\n \\def\\myrbrace {{\\tt \\char '175}}\n \\let\\{=\\mylbrace\n \\let\\}=\\myrbrace\n+\\begingroup\n+  % Definitions to produce actual \\{ & \\} command in an index.\n+  \\catcode`\\{ = 12 \\catcode`\\} = 12\n+  \\catcode`\\[ = 1 \\catcode`\\] = 2\n+  \\catcode`\\@ = 0 \\catcode`\\\\ = 12\n+  @gdef@lbracecmd[\\{]%\n+  @gdef@rbracecmd[\\}]%\n+@endgroup\n+\n+% Accents: @, @dotaccent @ringaccent @ubaraccent @udotaccent\n+% Others are defined by plain TeX: @` @' @\" @^ @~ @= @v @H.\n+\\let\\, = \\c\n+\\let\\dotaccent = \\.\n+\\def\\ringaccent#1{{\\accent23 #1}}\n+\\let\\tieaccent = \\t\n+\\let\\ubaraccent = \\b\n+\\let\\udotaccent = \\d\n+\n+% Other special characters: @questiondown @exclamdown\n+% Plain TeX defines: @AA @AE @O @OE @L (and lowercase versions) @ss.\n+\\def\\questiondown{?`}\n+\\def\\exclamdown{!`}\n+\n+% Dotless i and dotless j, used for accents.\n+\\def\\imacro{i}\n+\\def\\jmacro{j}\n+\\def\\dotless#1{%\n+  \\def\\temp{#1}%\n+  \\ifx\\temp\\imacro \\ptexi\n+  \\else\\ifx\\temp\\jmacro \\j\n+  \\else \\errmessage{@dotless can be used only with i or j}%\n+  \\fi\\fi\n+}\n \n % @: forces normal size whitespace following.\n \\def\\:{\\spacefactor=1000 }\n@@ -726,6 +767,7 @@\n     \\immediate\\write16{If you are running another version of TeX, relax.}\n     \\immediate\\write16{If you are running Unix TeX 3.0, kill this TeX process.}\n     \\immediate\\write16{  Then upgrade your TeX installation if you can.}\n+    \\immediate\\write16{  (See ftp://ftp.gnu.ai.mit.edu/pub/gnu/TeX.README.)}\n     \\immediate\\write16{If you are stuck with version 3.0, run the}\n     \\immediate\\write16{  script ``tex3patch'' from the Texinfo distribution}\n     \\immediate\\write16{  to use a workaround.}\n@@ -933,6 +975,7 @@\n \\expandafter\\expandafter\\expandafter\\appendixsetref{\\lastnode}\\fi\n \\global\\let\\lastnode=\\relax}\n \n+% @refill is a no-op.\n \\let\\refill=\\relax\n \n % @setfilename is done at the beginning of every texinfo file.\n@@ -1287,7 +1330,10 @@\n \n \\def\\kbd#1{\\def\\look{#1}\\expandafter\\kbdfoo\\look??\\par}\n \n-\\def\\l#1{{\\li #1}\\null}\t\t%\n+% @l was never documented to mean ``switch to the Lisp font'',\n+% and it is not used as such in any manual I can find.  We need it for\n+% Polish suppressed-l.  --karl, 22sep96.\n+%\\def\\l#1{{\\li #1}\\null}\n \n \\def\\r#1{{\\rm #1}}\t\t% roman font\n % Use of \\lowercase was suggested.\n@@ -1929,7 +1975,8 @@\n                                      % We don't need this so we don't use it.\n     \\else\n        \\global\\advance\\colcount by1\n-       \\setbox0=\\hbox{#1}%\n+       \\setbox0=\\hbox{#1 }% Add a normal word space as a separator;\n+                          % typically that is always in the input, anyway.\n        \\expandafter\\xdef\\csname col\\the\\colcount\\endcsname{\\the\\wd0}%\n     \\fi%\n   \\fi%\n@@ -1990,7 +2037,7 @@\n  % In either case we will make \\leftskip=\\multitablecolspace:\n \\leftskip=\\multitablecolspace\n \\fi\n-\\noindent##}\\cr%\n+\\noindent##\\multistrut}\\cr%\n  % \\everycr will reset column counter, \\colcount, at the end of\n  % each line. Every column  entry will cause \\colcount to advance by one. \n  % The table preamble\n@@ -2003,11 +2050,10 @@\n \\def\\setmultitablespacing{% test to see if user has set \\multitablelinespace.\n % If so, do nothing. If not, give it an appropriate dimension based on\n % current baselineskip.\n-\\setbox0=\\vbox{Xy}\n \\ifdim\\multitablelinespace=0pt\n %% strut to put in table in case some entry doesn't have descenders,\n %% to keep lines equally spaced\n-\\gdef\\multistrut{\\vrule height\\ht0 depth\\dp0 width0pt\\relax}\n+\\let\\multistrut = \\strut\n %% Test to see if parskip is larger than space between lines of\n %% table. If not, do nothing. \n %%        If so, set to same dimension as multitablelinespace.\n@@ -2126,24 +2172,31 @@\n \\def\\L{\\realbackslash L}%\n \\def\\ss{\\realbackslash ss}%\n % Take care of texinfo commands likely to appear in an index entry.\n+% (Must be a way to avoid doing expansion at all, and thus not have to\n+% laboriously list every single command here.)\n+\\def\\@{@}% will be @@ when we switch to @ as escape char.\n+%\\let\\{ = \\lbracecmd\n+%\\let\\} = \\rbracecmd\n \\def\\_{{\\realbackslash _}}%\n \\def\\w{\\realbackslash w }%\n \\def\\bf{\\realbackslash bf }%\n-\\def\\rm{\\realbackslash rm }%\n+%\\def\\rm{\\realbackslash rm }%\n \\def\\sl{\\realbackslash sl }%\n \\def\\sf{\\realbackslash sf}%\n \\def\\tt{\\realbackslash tt}%\n \\def\\gtr{\\realbackslash gtr}%\n \\def\\less{\\realbackslash less}%\n \\def\\hat{\\realbackslash hat}%\n-\\def\\char{\\realbackslash char}%\n+%\\def\\char{\\realbackslash char}%\n \\def\\TeX{\\realbackslash TeX}%\n \\def\\dots{\\realbackslash dots }%\n \\def\\copyright{\\realbackslash copyright }%\n \\def\\tclose##1{\\realbackslash tclose {##1}}%\n \\def\\code##1{\\realbackslash code {##1}}%\n+\\def\\dotless##1{\\realbackslash dotless {##1}}%\n \\def\\samp##1{\\realbackslash samp {##1}}%\n-\\def\\t##1{\\realbackslash r {##1}}%\n+\\def\\,##1{\\realbackslash ,{##1}}%\n+\\def\\t##1{\\realbackslash t {##1}}%\n \\def\\r##1{\\realbackslash r {##1}}%\n \\def\\i##1{\\realbackslash i {##1}}%\n \\def\\b##1{\\realbackslash b {##1}}%\n@@ -2171,6 +2224,7 @@\n \n \\def\\indexnofonts{%\n % Just ignore accents.\n+\\let\\,=\\indexdummyfont\n \\let\\\"=\\indexdummyfont\n \\let\\`=\\indexdummyfont\n \\let\\'=\\indexdummyfont\n@@ -2183,6 +2237,7 @@\n \\let\\u=\\indexdummyfont\n \\let\\v=\\indexdummyfont\n \\let\\H=\\indexdummyfont\n+\\let\\dotless=\\indexdummyfont\n % Take care of the plain tex special European modified letters.\n \\def\\oe{oe}%\n \\def\\ae{ae}%\n@@ -2216,6 +2271,7 @@\n \\let\\var=\\indexdummyfont\n \\let\\TeX=\\indexdummytex\n \\let\\dots=\\indexdummydots\n+\\def\\@{@}%\n }\n \n % To define \\realbackslash, we must make \\ not be an escape.\n@@ -2231,29 +2287,37 @@\n % workhorse for all \\fooindexes\n % #1 is name of index, #2 is stuff to put there\n \\def\\doind #1#2{%\n-% Put the index entry in the margin if desired.\n-\\ifx\\SETmarginindex\\relax\\else%\n-\\insert\\margin{\\hbox{\\vrule height8pt depth3pt width0pt #2}}%\n-\\fi%\n-{\\count10=\\lastpenalty %\n-{\\indexdummies % Must do this here, since \\bf, etc expand at this stage\n-\\escapechar=`\\\\%\n-{\\let\\folio=0% Expand all macros now EXCEPT \\folio\n-\\def\\rawbackslashxx{\\indexbackslash}% \\indexbackslash isn't defined now\n-% so it will be output as is; and it will print as backslash in the indx.\n-%\n-% Now process the index-string once, with all font commands turned off,\n-% to get the string to sort the index by.\n-{\\indexnofonts\n-\\xdef\\temp1{#2}%\n-}%\n-% Now produce the complete index entry.  We process the index-string again,\n-% this time with font commands expanded, to get what to print in the index.\n-\\edef\\temp{%\n-\\write \\csname#1indfile\\endcsname{%\n-\\realbackslash entry {\\temp1}{\\folio}{#2}}}%\n-\\temp }%\n-}\\penalty\\count10}}\n+  % Put the index entry in the margin if desired.\n+  \\ifx\\SETmarginindex\\relax\\else\n+    \\insert\\margin{\\hbox{\\vrule height8pt depth3pt width0pt #2}}%\n+  \\fi\n+  {%\n+    \\count255=\\lastpenalty\n+    {%\n+      \\indexdummies % Must do this here, since \\bf, etc expand at this stage\n+      \\escapechar=`\\\\\n+      {%\n+        \\let\\folio=0 % We will expand all macros now EXCEPT \\folio.\n+        \\def\\rawbackslashxx{\\indexbackslash}% \\indexbackslash isn't defined now\n+        % so it will be output as is; and it will print as backslash.\n+        %\n+        % First process the index-string with all font commands turned off\n+        % to get the string to sort by.\n+        {\\indexnofonts \\xdef\\indexsorttmp{#2}}%\n+        %\n+        % Now produce the complete index entry, with both the sort key and the\n+        % original text, including any font commands.\n+        \\toks0 = {#2}%\n+        \\edef\\temp{%\n+          \\write\\csname#1indfile\\endcsname{%\n+            \\realbackslash entry{\\indexsorttmp}{\\folio}{\\the\\toks0}}%\n+        }%\n+        \\temp\n+      }%\n+    }%\n+    \\penalty\\count255\n+  }%\n+}\n \n \\def\\dosubind #1#2#3{%\n {\\count10=\\lastpenalty %\n@@ -2325,6 +2389,8 @@\n   % character.  It would be better to use @, but that's too big a change\n   % to make right now.\n   \\catcode`\\\\ = 0\n+  \\catcode`\\@ = 11\n+  \\escapechar = `\\\\\n   \\begindoublecolumns\n   %\n   % See if the index file exists and is nonempty.\n@@ -2440,15 +2506,15 @@\n \\noindent\\hskip\\secondaryindent\\hbox{#1}\\indexdotfill #2\\par\n }}\n \n-%% Define two-column mode, which is used in indexes.\n-%% Adapted from the TeXbook, page 416.\n-\\catcode `\\@=11\n+% Define two-column mode, which we use to typeset indexes.\n+% Adapted from the TeXbook, page 416, which is to say,\n+% the manmac.tex format used to print the TeXbook itself.\n+\\catcode`\\@=11\n \n \\newbox\\partialpage\n-\n \\newdimen\\doublecolumnhsize\n \n-\\def\\begindoublecolumns{\\begingroup\n+\\def\\begindoublecolumns{\\begingroup % ended by \\enddoublecolumns\n   % Grab any single-column material above us.\n   \\output = {\\global\\setbox\\partialpage\n     =\\vbox{\\unvbox255\\kern -\\topskip \\kern \\baselineskip}}%\n@@ -2481,48 +2547,47 @@\n   % Double the \\vsize as well.  (We don't need a separate register here,\n   % since nobody clobbers \\vsize.)\n   \\vsize = 2\\vsize\n-  \\doublecolumnpagegoal\n }\n-\n-\\def\\enddoublecolumns{\\eject \\endgroup \\pagegoal=\\vsize \\unvbox\\partialpage}\n-\n-\\def\\doublecolumnsplit{\\splittopskip=\\topskip \\splitmaxdepth=\\maxdepth\n-  \\global\\dimen@=\\pageheight \\global\\advance\\dimen@ by-\\ht\\partialpage\n-  \\global\\setbox1=\\vsplit255 to\\dimen@ \\global\\setbox0=\\vbox{\\unvbox1}\n-  \\global\\setbox3=\\vsplit255 to\\dimen@ \\global\\setbox2=\\vbox{\\unvbox3}\n-  \\ifdim\\ht0>\\dimen@ \\setbox255=\\vbox{\\unvbox0\\unvbox2} \\global\\setbox255=\\copy5 \\fi\n-  \\ifdim\\ht2>\\dimen@ \\setbox255=\\vbox{\\unvbox0\\unvbox2} \\global\\setbox255=\\copy5 \\fi\n+\\def\\doublecolumnout{%\n+  \\splittopskip=\\topskip \\splitmaxdepth=\\maxdepth\n+  % Get the available space for the double columns -- the normal\n+  % (undoubled) page height minus any material left over from the\n+  % previous page.\n+  \\dimen@=\\pageheight \\advance\\dimen@ by-\\ht\\partialpage\n+  % box0 will be the left-hand column, box1 the right.\n+  \\setbox0=\\vsplit255 to\\dimen@ \\setbox2=\\vsplit255 to\\dimen@\n+  \\onepageout\\pagesofar\n+  \\unvbox255 \\penalty\\outputpenalty\n }\n-\\def\\doublecolumnpagegoal{%\n-  \\dimen@=\\vsize \\advance\\dimen@ by-2\\ht\\partialpage \\global\\pagegoal=\\dimen@\n+\\def\\pagesofar{%\n+  % The contents of the output page -- any previous material,\n+  % followed by the two boxes we just split.\n+  \\unvbox\\partialpage\n+  \\hsize = \\doublecolumnhsize\n+  \\wd0=\\hsize \\wd2=\\hsize \\hbox to\\pagewidth{\\box0\\hfil\\box2}%\n }\n-\\def\\pagesofar{\\unvbox\\partialpage %\n-  \\hsize=\\doublecolumnhsize % have to restore this since output routine\n-  \\wd0=\\hsize \\wd2=\\hsize \\hbox to\\pagewidth{\\box0\\hfil\\box2}}\n-\\def\\doublecolumnout{%\n-  \\setbox5=\\copy255\n-  {\\vbadness=10000 \\doublecolumnsplit}\n-  \\ifvbox255\n-    \\setbox0=\\vtop to\\dimen@{\\unvbox0}\n-    \\setbox2=\\vtop to\\dimen@{\\unvbox2}\n-    \\onepageout\\pagesofar \\unvbox255 \\penalty\\outputpenalty\n-  \\else\n-    \\setbox0=\\vbox{\\unvbox5}\n-    \\ifvbox0\n-      \\dimen@=\\ht0 \\advance\\dimen@ by\\topskip \\advance\\dimen@ by-\\baselineskip\n-      \\divide\\dimen@ by2 \\splittopskip=\\topskip \\splitmaxdepth=\\maxdepth\n-      {\\vbadness=10000\n-\t\\loop \\global\\setbox5=\\copy0\n-          \\setbox1=\\vsplit5 to\\dimen@\n-          \\setbox3=\\vsplit5 to\\dimen@\n-          \\ifvbox5 \\global\\advance\\dimen@ by1pt \\repeat\n-        \\setbox0=\\vbox to\\dimen@{\\unvbox1}\n-        \\setbox2=\\vbox to\\dimen@{\\unvbox3}\n-        \\global\\setbox\\partialpage=\\vbox{\\pagesofar}\n-        \\doublecolumnpagegoal\n-      }\n-    \\fi\n-  \\fi\n+\\def\\enddoublecolumns{%\n+  \\output={\\balancecolumns}\\eject % split what we have\n+  \\endgroup\n+  % Back to normal single-column typesetting, but take account of the\n+  % fact that we just accumulated some stuff on the output page.\n+  \\pagegoal=\\vsize \n+}\n+\\def\\balancecolumns{%\n+  % Called on the last page of the double column material.\n+  \\setbox0=\\vbox{\\unvbox255}%\n+  \\dimen@ = \\ht0\n+  \\advance\\dimen@ by \\topskip\n+  \\advance\\dimen@ by-\\baselineskip\n+  \\divide\\dimen@ by 2\n+  \\splittopskip = \\topskip\n+  % Loop until we get a decent breakpoint.\n+  {\\vbadness=10000 \\loop \\global\\setbox3=\\copy0\n+    \\global\\setbox1=\\vsplit3 to\\dimen@\n+    \\ifdim\\ht3>\\dimen@ \\global\\advance\\dimen@ by1pt \\repeat}%\n+  \\setbox0=\\vbox to\\dimen@{\\unvbox1}%\n+  \\setbox2=\\vbox to\\dimen@{\\unvbox3}%\n+  \\pagesofar\n }\n \\catcode `\\@=\\other\n \n@@ -3100,6 +3165,7 @@\n       \\secfonts\n       \\let\\rm=\\shortcontrm \\let\\bf=\\shortcontbf \\let\\sl=\\shortcontsl\n       \\rm\n+      \\hyphenpenalty = 10000\n       \\advance\\baselineskip by 1pt % Open it up a little.\n       \\def\\secentry ##1##2##3##4{}\n       \\def\\unnumbsecentry ##1##2{}\n@@ -3143,7 +3209,7 @@\n   % This space should be plenty, since a single number is .5em, and the\n   % widest letter (M) is 1em, at least in the Computer Modern fonts.\n   % (This space doesn't include the extra space that gets added after\n-  % the label; that gets put in in \\shortchapentry above.)\n+  % the label; that gets put in by \\shortchapentry above.)\n   \\advance\\dimen0 by 1.1em\n   \\hbox to \\dimen0{#1\\hfil}%\n }\n@@ -3164,22 +3230,21 @@\n   \\dosubsubsecentry{#2.#3.#4.#5\\labelspace#1}{#6}}\n \\def\\unnumbsubsubsecentry#1#2{\\dosubsubsecentry{#1}{#2}}\n \n-\n % This parameter controls the indentation of the various levels.\n \\newdimen\\tocindent \\tocindent = 3pc\n \n % Now for the actual typesetting. In all these, #1 is the text and #2 is the\n % page number.\n %\n-% If the toc has to be broken over pages, we would want to be at chapters\n+% If the toc has to be broken over pages, we want it to be at chapters\n % if at all possible; hence the \\penalty.\n \\def\\dochapentry#1#2{%\n-   \\penalty-300 \\vskip\\baselineskip\n+   \\penalty-300 \\vskip1\\baselineskip plus.33\\baselineskip minus.25\\baselineskip\n    \\begingroup\n      \\chapentryfonts\n      \\tocentry{#1}{\\dopageno{#2}}%\n    \\endgroup\n-   \\nobreak\\vskip .25\\baselineskip\n+   \\nobreak\\vskip .25\\baselineskip plus.1\\baselineskip\n }\n \n \\def\\dosecentry#1#2{\\begingroup\n@@ -3204,7 +3269,7 @@\n %\n % \\turnoffactive is for the sake of @\" used for umlauts.\n \\def\\tocentry#1#2{\\begingroup\n-  \\hyphenpenalty = 10000\n+  \\vskip 0pt plus1pt % allow a little stretch for the sake of nice page breaks\n   \\entry{\\turnoffactive #1}{\\turnoffactive #2}%\n \\endgroup}\n \n@@ -3229,8 +3294,6 @@\n \\newbox\\pushcharbox    \\newbox\\bullbox\n \\newbox\\equivbox       \\newbox\\errorbox\n \n-\\let\\ptexequiv = \\equiv\n-\n %{\\tentt\n %\\global\\setbox\\dblarrowbox = \\hbox to 1em{\\hfil$\\Rightarrow$\\hfil}\n %\\global\\setbox\\longdblarrowbox = \\hbox to 1em{\\hfil$\\mapsto$\\hfil}\n@@ -3277,14 +3340,15 @@\n \\catcode `\\$=3 \\catcode `\\&=4 \\catcode `\\#=6\n \\catcode `\\^=7 \\catcode `\\_=8 \\catcode `\\~=13 \\let~=\\tie\n \\catcode `\\%=14\n-\\catcode 43=12\n+\\catcode 43=12 % plus\n \\catcode`\\\"=12\n \\catcode`\\==12\n \\catcode`\\|=12\n \\catcode`\\<=12\n \\catcode`\\>=12\n \\escapechar=`\\\\\n %\n+\\let\\,=\\ptexcomma\n \\let\\~=\\ptextilde\n \\let\\{=\\ptexlbrace\n \\let\\}=\\ptexrbrace\n@@ -3295,8 +3359,7 @@\n \\def\\enddots{\\relax\\ifmmode\\endldots\\else$\\mathsurround=0pt \\endldots\\,$\\fi}\n \\def\\@{@}%\n \\let\\bullet=\\ptexbullet\n-\\let\\b=\\ptexb \\let\\c=\\ptexc \\let\\i=\\ptexi \\let\\t=\\ptext \\let\\l=\\ptexl\n-\\let\\L=\\ptexL\n+\\let\\b=\\ptexb \\let\\c=\\ptexc \\let\\i=\\ptexi \\let\\t=\\ptext\n %\n \\let\\Etex=\\endgroup}\n "}]}