{"sha": "6e5c4eaf2d14988795ca342a36c8ceb97d06149f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU1YzRlYWYyZDE0OTg4Nzk1Y2EzNDJhMzZjOGNlYjk3ZDA2MTQ5Zg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2003-03-07T23:10:42Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2003-03-07T23:10:42Z"}, "message": "lang-specs.h (objective-c-header): Use .gch not .pch; support -no-integrated-cpp.\n\n\t* objc/lang-specs.h (objective-c-header): Use .gch not .pch;\n\tsupport -no-integrated-cpp.\n\n\t* c-pch.c (get_ident): Use c_language_kind and flag_objc rather\n\tthan langhooks.name.\n\nFrom-SVN: r63955", "tree": {"sha": "e0f19033a092c5359834a3029af7cb4e54689dac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e0f19033a092c5359834a3029af7cb4e54689dac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e5c4eaf2d14988795ca342a36c8ceb97d06149f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e5c4eaf2d14988795ca342a36c8ceb97d06149f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e5c4eaf2d14988795ca342a36c8ceb97d06149f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e5c4eaf2d14988795ca342a36c8ceb97d06149f/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9a97e40ae1202ee33bd14c477652ef60fdd606ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a97e40ae1202ee33bd14c477652ef60fdd606ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a97e40ae1202ee33bd14c477652ef60fdd606ad"}], "stats": {"total": 30, "additions": 17, "deletions": 13}, "files": [{"sha": "0802120fbfd14f33637e3becb97bfbc88fca1d88", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e5c4eaf2d14988795ca342a36c8ceb97d06149f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e5c4eaf2d14988795ca342a36c8ceb97d06149f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6e5c4eaf2d14988795ca342a36c8ceb97d06149f", "patch": "@@ -1,3 +1,11 @@\n+2003-03-07  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* objc/lang-specs.h (objective-c-header): Use .gch not .pch;\n+\tsupport -no-integrated-cpp.\n+\n+\t* c-pch.c (get_ident): Use c_language_kind and flag_objc rather\n+\tthan langhooks.name.\n+\n 2003-03-07  Michael Matz  <matz@suse.de>\n \n \t* df.h (enum df_ref_flags.DF_REF_STRIPPED): New."}, {"sha": "d8c6b9e87adf606cab28b7dda52fe7b6481db00b", "filename": "gcc/c-pch.c", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e5c4eaf2d14988795ca342a36c8ceb97d06149f/gcc%2Fc-pch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e5c4eaf2d14988795ca342a36c8ceb97d06149f/gcc%2Fc-pch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-pch.c?ref=6e5c4eaf2d14988795ca342a36c8ceb97d06149f", "patch": "@@ -52,14 +52,10 @@ get_ident()\n   static const char template[IDENT_LENGTH] = \"gpch.010\";\n   \n   memcpy (result, template, IDENT_LENGTH);\n-  if (strcmp (lang_hooks.name, \"GNU C\") == 0)\n-    result[4] = 'C';\n-  else if (strcmp (lang_hooks.name, \"GNU C++\") == 0)\n-    result[4] = '+';\n-  else if (strcmp (lang_hooks.name, \"GNU Objective-C\") == 0)\n-    result[4] = 'o';\n-  else if (strcmp (lang_hooks.name, \"GNU Objective-C++\") == 0)\n-    result[4] = 'O';\n+  if (c_language == clk_c)\n+    result[4] = flag_objc ? 'o' : 'C';\n+  else if (c_language == clk_cplusplus)\n+    result[4] = flag_objc ? 'O' : '+';\n   else\n     abort ();\n   return result;"}, {"sha": "0e7a46f5dae31f7ce0bab123a30c0fde1aa90469", "filename": "gcc/objc/lang-specs.h", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e5c4eaf2d14988795ca342a36c8ceb97d06149f/gcc%2Fobjc%2Flang-specs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e5c4eaf2d14988795ca342a36c8ceb97d06149f/gcc%2Fobjc%2Flang-specs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Flang-specs.h?ref=6e5c4eaf2d14988795ca342a36c8ceb97d06149f", "patch": "@@ -44,11 +44,11 @@ Boston, MA 02111-1307, USA.  */\n       %{!E:%{!M:%{!MM:\\\n \t%{traditional|ftraditional|traditional-cpp:\\\n %eGNU Objective C no longer supports traditional compilation}\\\n-\t%{save-temps:cc1obj -E %(cpp_options) %b.mi \\n\\\n+\t%{save-temps|no-integrated-cpp:cc1obj -E %(cpp_options) %b.mi \\n\\\n \t    cc1obj -fpreprocessed %b.mi %(cc1_options) %{gen-decls}\\\n-                        -o %g.s %{!o*:--output-pch=%i.pch}\\\n+                        -o %g.s %{!o*:--output-pch=%i.gch}\\\n                         %W{o*:--output-pch=%*}%V}\\\n-\t%{!save-temps:\\\n+\t%{!save-temps:%{!no-integrated-cpp:\\\n \t    cc1obj %(cpp_unique_options) %(cc1_options) %{gen-decls}\\\n-                        -o %g.s %{!o*:--output-pch=%i.pch}\\\n-                        %W{o*:--output-pch=%*}%V}}}}\", 0},\n+                        -o %g.s %{!o*:--output-pch=%i.gch}\\\n+                        %W{o*:--output-pch=%*}%V}}}}}\", 0},"}]}