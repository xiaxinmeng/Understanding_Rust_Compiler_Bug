{"sha": "a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk2YmYwZDNjZWI0MTEyOTljYzVkZWRmYzc3MDVkZTlhYzIxOTg4YQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2014-06-04T09:31:25Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2014-06-04T09:31:25Z"}, "message": "Make coverage_compute_cfg_checksum callable with arg.\n\n\t* coverage.h (coverage_compute_cfg_checksum): Argument added.\n\t* coverage.c (coverage_compute_cfg_checksum): Likewise.\n\t* profile.c (branch_prob): Likewise.\n\nFrom-SVN: r211217", "tree": {"sha": "ba3780120bafe130806deba7072ed5222d5dc54b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba3780120bafe130806deba7072ed5222d5dc54b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7d2268ead3f156afba5c23c563b9690f9f59012e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d2268ead3f156afba5c23c563b9690f9f59012e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d2268ead3f156afba5c23c563b9690f9f59012e"}], "stats": {"total": 20, "additions": 13, "deletions": 7}, "files": [{"sha": "853a0346a9ba422b4ee164bff4868226160e66d9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "patch": "@@ -1,3 +1,9 @@\n+2014-06-04  Martin Liska  <mliska@suse.cz>\n+\n+\t* coverage.h (coverage_compute_cfg_checksum): Argument added.\n+\t* coverage.c (coverage_compute_cfg_checksum): Likewise.\n+\t* profile.c (branch_prob): Likewise.\n+\n 2014-06-04  Martin Jambor  <mjambor@suse.cz>\n \n \tPR ipa/61340"}, {"sha": "44b616c7872a7ec711eb638b570cf105af3fc791", "filename": "gcc/coverage.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2Fcoverage.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2Fcoverage.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoverage.c?ref=a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "patch": "@@ -583,7 +583,7 @@ coverage_compute_profile_id (struct cgraph_node *n)\n   return chksum & 0x7fffffff;\n }\n \n-/* Compute cfg checksum for the current function.\n+/* Compute cfg checksum for the function FN given as argument.\n    The checksum is calculated carefully so that\n    source code changes that doesn't affect the control flow graph\n    won't change the checksum.\n@@ -594,12 +594,12 @@ coverage_compute_profile_id (struct cgraph_node *n)\n    but the compiler won't detect the change and use the wrong profile data.  */\n \n unsigned\n-coverage_compute_cfg_checksum (void)\n+coverage_compute_cfg_checksum (struct function *fn)\n {\n   basic_block bb;\n-  unsigned chksum = n_basic_blocks_for_fn (cfun);\n+  unsigned chksum = n_basic_blocks_for_fn (fn);\n \n-  FOR_EACH_BB_FN (bb, cfun)\n+  FOR_EACH_BB_FN (bb, fn)\n     {\n       edge e;\n       edge_iterator ei;"}, {"sha": "a144e0b86a08d80e4381cdabb5541b9767d14766", "filename": "gcc/coverage.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2Fcoverage.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2Fcoverage.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoverage.h?ref=a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "patch": "@@ -32,8 +32,8 @@ extern int coverage_begin_function (unsigned, unsigned);\n /* Complete the coverage information for the current function.  */\n extern void coverage_end_function (unsigned, unsigned);\n \n-/* Compute the control flow checksum for the current function.  */\n-extern unsigned coverage_compute_cfg_checksum (void);\n+/* Compute the control flow checksum for the function FN given as argument.  */\n+extern unsigned coverage_compute_cfg_checksum (struct function *fn);\n \n /* Compute the profile id of function N.  */\n extern unsigned coverage_compute_profile_id (struct cgraph_node *n);"}, {"sha": "4e82eab1138aa43fcb4fdafd799476b78dba5e90", "filename": "gcc/profile.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2Fprofile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a96bf0d3ceb411299cc5dedfc7705de9ac21988a/gcc%2Fprofile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprofile.c?ref=a96bf0d3ceb411299cc5dedfc7705de9ac21988a", "patch": "@@ -1195,7 +1195,7 @@ branch_prob (void)\n      the checksum in only once place, since it depends on the shape\n      of the control flow which can change during \n      various transformations.  */\n-  cfg_checksum = coverage_compute_cfg_checksum ();\n+  cfg_checksum = coverage_compute_cfg_checksum (cfun);\n   lineno_checksum = coverage_compute_lineno_checksum ();\n \n   /* Write the data from which gcov can reconstruct the basic block"}]}