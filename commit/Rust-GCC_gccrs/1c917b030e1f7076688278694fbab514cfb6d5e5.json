{"sha": "1c917b030e1f7076688278694fbab514cfb6d5e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWM5MTdiMDMwZTFmNzA3NjY4ODI3ODY5NGZiYWI1MTRjZmI2ZDVlNQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-03-30T17:10:50Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-03-30T17:10:50Z"}, "message": "re PR libstdc++/31401 (string find behaves strange when searching from npos)\n\n2007-03-30  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR libstdc++/31401\n\t* include/bits/basic_string.tcc (find(const _CharT*, size_type,\n\tsize_type)): Avoid unsigned overflow.\n\t* testsuite/21_strings/basic_string/find/char/4.cc: New.\n\t* testsuite/21_strings/basic_string/find/wchar_t/4.cc: Likewise.\n\nFrom-SVN: r123361", "tree": {"sha": "45cb6f7f117eabf22d8299a204a9221417d24735", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45cb6f7f117eabf22d8299a204a9221417d24735"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c917b030e1f7076688278694fbab514cfb6d5e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c917b030e1f7076688278694fbab514cfb6d5e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c917b030e1f7076688278694fbab514cfb6d5e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c917b030e1f7076688278694fbab514cfb6d5e5/comments", "author": null, "committer": null, "parents": [{"sha": "f86289d5e59595566d058f3024402aa9ebfdad18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f86289d5e59595566d058f3024402aa9ebfdad18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f86289d5e59595566d058f3024402aa9ebfdad18"}], "stats": {"total": 96, "additions": 95, "deletions": 1}, "files": [{"sha": "7483907ac0de54989ba3ca074e9ee0097d38abba", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=1c917b030e1f7076688278694fbab514cfb6d5e5", "patch": "@@ -1,3 +1,11 @@\n+2007-03-30  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR libstdc++/31401\n+\t* include/bits/basic_string.tcc (find(const _CharT*, size_type,\n+\tsize_type)): Avoid unsigned overflow.\n+\t* testsuite/21_strings/basic_string/find/char/4.cc: New.\n+\t* testsuite/21_strings/basic_string/find/wchar_t/4.cc: Likewise.\n+\n 2007-03-27  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/bits/fstream.tcc (basic_filebuf<>::underflow):"}, {"sha": "78428c1eff69ca214b73b052b4d69ffe94af8321", "filename": "libstdc++-v3/include/bits/basic_string.tcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc?ref=1c917b030e1f7076688278694fbab514cfb6d5e5", "patch": "@@ -727,7 +727,7 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n \n       if (__n <= __size)\n \t{\n-\t  for (; __pos + __n <= __size; ++__pos)\n+\t  for (; __pos <= __size - __n; ++__pos)\n \t    if (traits_type::eq(__data[__pos], __s[0])\n \t\t&& traits_type::compare(__data + __pos + 1,\n \t\t\t\t\t__s + 1, __n - 1) == 0)"}, {"sha": "7d6e8c018479109ec47c5dacb022cf3d33075346", "filename": "libstdc++-v3/testsuite/21_strings/basic_string/find/char/4.cc", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Ffind%2Fchar%2F4.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Ffind%2Fchar%2F4.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Ffind%2Fchar%2F4.cc?ref=1c917b030e1f7076688278694fbab514cfb6d5e5", "patch": "@@ -0,0 +1,43 @@\n+// 2007-03-30  Paolo Carlini  <pcarlini@suse.de>\n+\n+// Copyright (C) 2007 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// 21.3.6.1 basic_string find\n+\n+#include <string>\n+#include <testsuite_hooks.h>\n+\n+// libstdc++/31401\n+void test01()\n+{\n+  bool test __attribute__((unused)) = true;\n+  typedef std::string::size_type csize_type;\n+  csize_type npos = std::string::npos;\n+\n+  std::string use = \"anu\";\n+  csize_type pos1 = use.find(\"a\", npos);\n+\n+  VERIFY( pos1 == npos );\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}, {"sha": "ea34d9925fe8dd57a5d9d080fb1076b97994cfa0", "filename": "libstdc++-v3/testsuite/21_strings/basic_string/find/wchar_t/4.cc", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Ffind%2Fwchar_t%2F4.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c917b030e1f7076688278694fbab514cfb6d5e5/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Ffind%2Fwchar_t%2F4.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Ffind%2Fwchar_t%2F4.cc?ref=1c917b030e1f7076688278694fbab514cfb6d5e5", "patch": "@@ -0,0 +1,43 @@\n+// 2007-03-30  Paolo Carlini  <pcarlini@suse.de>\n+\n+// Copyright (C) 2007 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// 21.3.6.1 basic_string find\n+\n+#include <string>\n+#include <testsuite_hooks.h>\n+\n+// libstdc++/31401\n+void test01()\n+{\n+  bool test __attribute__((unused)) = true;\n+  typedef std::wstring::size_type csize_type;\n+  csize_type npos = std::wstring::npos;\n+\n+  std::wstring use = L\"anu\";\n+  csize_type pos1 = use.find(L\"a\", npos);\n+\n+  VERIFY( pos1 == npos );\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}]}