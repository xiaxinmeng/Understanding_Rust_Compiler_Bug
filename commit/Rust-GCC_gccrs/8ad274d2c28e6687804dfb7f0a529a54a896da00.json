{"sha": "8ad274d2c28e6687804dfb7f0a529a54a896da00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGFkMjc0ZDJjMjhlNjY4NzgwNGRmYjdmMGE1MjlhNTRhODk2ZGEwMA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-07-09T16:03:14Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-07-09T16:03:14Z"}, "message": "ipa-cp.c (devirtualization_time_bonus): Walk through aliases.\n\n\n\t* ipa-cp.c (devirtualization_time_bonus): Walk through aliases.\n\t* ipa-inline-analysis.c (estimate_edge_devirt_benefit): Likewise.\n\nFrom-SVN: r212395", "tree": {"sha": "5cee96de52b8985dfd8d07c01815452e6c25067d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5cee96de52b8985dfd8d07c01815452e6c25067d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ad274d2c28e6687804dfb7f0a529a54a896da00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ad274d2c28e6687804dfb7f0a529a54a896da00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ad274d2c28e6687804dfb7f0a529a54a896da00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ad274d2c28e6687804dfb7f0a529a54a896da00/comments", "author": null, "committer": null, "parents": [{"sha": "9af4687354ee7ca7acc3ec7d5aac008858851612", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9af4687354ee7ca7acc3ec7d5aac008858851612", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9af4687354ee7ca7acc3ec7d5aac008858851612"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "0b94921a18449c69cb6afe4f0fcd095897a9cf04", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad274d2c28e6687804dfb7f0a529a54a896da00/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad274d2c28e6687804dfb7f0a529a54a896da00/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8ad274d2c28e6687804dfb7f0a529a54a896da00", "patch": "@@ -1,3 +1,8 @@\n+2014-07-08  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* ipa-cp.c (devirtualization_time_bonus): Walk through aliases.\n+\t* ipa-inline-analysis.c (estimate_edge_devirt_benefit): Likewise.\n+\n 2014-07-08  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* rs6000/rs6000-protos.h (rs6000_xcoff_declare_object_name): Declare."}, {"sha": "b6d66d90eafa37293f2f466cba61925f12ddca54", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad274d2c28e6687804dfb7f0a529a54a896da00/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad274d2c28e6687804dfb7f0a529a54a896da00/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=8ad274d2c28e6687804dfb7f0a529a54a896da00", "patch": "@@ -1671,6 +1671,7 @@ devirtualization_time_bonus (struct cgraph_node *node,\n     {\n       struct cgraph_node *callee;\n       struct inline_summary *isummary;\n+      enum availability avail;\n       tree target;\n \n       target = ipa_get_indirect_edge_target (ie, known_csts, known_binfos,\n@@ -1683,6 +1684,9 @@ devirtualization_time_bonus (struct cgraph_node *node,\n       callee = cgraph_get_node (target);\n       if (!callee || !callee->definition)\n \tcontinue;\n+      callee = cgraph_function_node (callee, &avail);\n+      if (avail < AVAIL_AVAILABLE)\n+\tcontinue;\n       isummary = inline_summary (callee);\n       if (!isummary->inlinable)\n \tcontinue;"}, {"sha": "9e66a4c5a5c91399405c2b20dbd5525616050348", "filename": "gcc/ipa-inline-analysis.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad274d2c28e6687804dfb7f0a529a54a896da00/gcc%2Fipa-inline-analysis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad274d2c28e6687804dfb7f0a529a54a896da00/gcc%2Fipa-inline-analysis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-analysis.c?ref=8ad274d2c28e6687804dfb7f0a529a54a896da00", "patch": "@@ -2971,6 +2971,7 @@ estimate_edge_devirt_benefit (struct cgraph_edge *ie,\n   tree target;\n   struct cgraph_node *callee;\n   struct inline_summary *isummary;\n+  enum availability avail;\n \n   if (!known_vals.exists () && !known_binfos.exists ())\n     return false;\n@@ -2991,6 +2992,9 @@ estimate_edge_devirt_benefit (struct cgraph_edge *ie,\n   callee = cgraph_get_node (target);\n   if (!callee || !callee->definition)\n     return false;\n+  callee = cgraph_function_node (callee, &avail);\n+  if (avail < AVAIL_AVAILABLE)\n+    return false;\n   isummary = inline_summary (callee);\n   return isummary->inlinable;\n }"}]}