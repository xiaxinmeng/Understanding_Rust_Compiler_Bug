{"sha": "2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmNmNGFhNzljODExYzVjNjU4YzBhNjZiY2I3MDI3OGM4ZmJlODljZQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-20T22:16:29Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-20T22:16:29Z"}, "message": "re PR fortran/77632 ([F08] Pointer initialisation does not quite work with arrays)\n\n2019-06-20  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/77632\n\t* /decl.c (variable_decl): Mark a variable that is a target in pointer\n\tinitialization when in PROGRAM, MODULE, or SUBMODULE scope with an\n\timplicit save.\n\n2019-06-20  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/77632\n\t* gfortran.dg/pr77632_1.f90: New test.\n\nFrom-SVN: r272526", "tree": {"sha": "2d0d87e8c5501c2538a3175b681001dd2d5edcf4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d0d87e8c5501c2538a3175b681001dd2d5edcf4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/comments", "author": null, "committer": null, "parents": [{"sha": "c35f57c5bd2b7d3fcf04f7bb8134db43c5b31059", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c35f57c5bd2b7d3fcf04f7bb8134db43c5b31059", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c35f57c5bd2b7d3fcf04f7bb8134db43c5b31059"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "56aca1f9b1e2971e2a141367173a904fd7ec9a36", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "patch": "@@ -1,3 +1,10 @@\n+2019-06-20  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/77632\n+\t* /decl.c (variable_decl): Mark a variable that is a target in pointer\n+\tinitialization when in PROGRAM, MODULE, or SUBMODULE scope with an\n+\timplicit save.\n+\n 2019-06-20  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/86587"}, {"sha": "f5517f0d75f0d38f06164628cf5e0c2cebbe3c72", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "patch": "@@ -2779,6 +2779,16 @@ variable_decl (int elem)\n \t  m = match_pointer_init (&initializer, 0);\n \t  if (m != MATCH_YES)\n \t    goto cleanup;\n+\n+\t  /* The target of a pointer initialization must have the SAVE\n+\t     attribute.  A variable in PROGRAM, MODULE, or SUBMODULE scope\n+\t     is implicit SAVEd.  Explicitly, set the SAVE_IMPLICIT value.  */\n+\t  if (initializer->expr_type == EXPR_VARIABLE\n+\t      && initializer->symtree->n.sym->attr.save == SAVE_NONE\n+\t      && (gfc_current_state () == COMP_PROGRAM\n+\t\t  || gfc_current_state () == COMP_MODULE\n+\t\t  || gfc_current_state () == COMP_SUBMODULE))\n+\t    initializer->symtree->n.sym->attr.save = SAVE_IMPLICIT;\n \t}\n       else if (gfc_match_char ('=') == MATCH_YES)\n \t{"}, {"sha": "440284de43fe2d0db84b4ebaaeb5a7661b49137b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "patch": "@@ -1,3 +1,8 @@\n+2019-06-20  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/77632\n+\t* gfortran.dg/pr77632_1.f90: New test.\n+\n 2019-06-20  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/68265"}, {"sha": "13fed5991a61e731fe7a2503135e4b183f5ef77f", "filename": "gcc/testsuite/gfortran.dg/pr77632_1.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr77632_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr77632_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr77632_1.f90?ref=2cf4aa79c811c5c658c0a66bcb70278c8fbe89ce", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do run }\n+program foo\n+   implicit none\n+   real, target :: a\n+   real, pointer :: b => a\n+   if (associated(b, a) .eqv. .false.) stop 1\n+end program foo"}]}