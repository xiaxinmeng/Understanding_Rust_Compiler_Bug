{"sha": "5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRiYTBmYjg0NTNlNzFjNmYwM2Y3YTAwYjQxMDE2ZmMzMjdmODlmOQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-12-21T13:59:57Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-12-21T13:59:57Z"}, "message": "re PR fortran/30202 ([4.1 only] ICE in trans-array.c)\n\n2006-12-21  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/30202\n\t* trans-array.c (gfc_conv_function_call): Use parmse.expr for\n\tthe nullifying of intent(out) arguments rather than the backend\n\tdeclaration.\n\n2006-12-21  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/30202\n\t* gfortran.dg/alloc_comp_basics_3.f90: New test.\n\nFrom-SVN: r120109", "tree": {"sha": "2f27f438293ad3f36bf84e1596b786342734d958", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f27f438293ad3f36bf84e1596b786342734d958"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/comments", "author": null, "committer": null, "parents": [{"sha": "5075abae44d4c23e075a7210635306ea21e55305", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5075abae44d4c23e075a7210635306ea21e55305", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5075abae44d4c23e075a7210635306ea21e55305"}], "stats": {"total": 34, "additions": 31, "deletions": 3}, "files": [{"sha": "c0dd40a16e388b13b96d196c63bda2e22acbe14c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "patch": "@@ -1,3 +1,10 @@\n+2006-12-21  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/30202\n+\t* trans-array.c (gfc_conv_function_call): Use parmse.expr for\n+\tthe nullifying of intent(out) arguments rather than the backend\n+\tdeclaration.\n+\n 2006-12-20  Tobias Schl\ufffd\ufffdter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/25392"}, {"sha": "6d46cd42263f40bd3efc26466df9e3638fa389c6", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "patch": "@@ -2068,9 +2068,7 @@ gfc_conv_function_call (gfc_se * se, gfc_symbol * sym,\n               if (fsym && fsym->attr.allocatable\n                   && fsym->attr.intent == INTENT_OUT)\n                 {\n-\t\t  tmp = e->symtree->n.sym->backend_decl;\n-\t\t  if (e->symtree->n.sym->attr.dummy)\n-                    tmp = build_fold_indirect_ref (tmp);\n+                  tmp = build_fold_indirect_ref (parmse.expr);\n                   tmp = gfc_trans_dealloc_allocated (tmp);\n                   gfc_add_expr_to_block (&se->pre, tmp);\n                 }"}, {"sha": "fb6666e68d098b0ce7ba6264ce1b6878f9f8712a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "patch": "@@ -1,3 +1,8 @@\n+2006-12-21  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/30202\n+\t* gfortran.dg/alloc_comp_basics_3.f90: New test.\n+\n 2006-12-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/30262"}, {"sha": "9140cd2ac4901b3ad66453dcff191f5c924f1bef", "filename": "gcc/testsuite/gfortran.dg/alloc_comp_basics_3.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ftestsuite%2Fgfortran.dg%2Falloc_comp_basics_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dba0fb8453e71c6f03f7a00b41016fc327f89f9/gcc%2Ftestsuite%2Fgfortran.dg%2Falloc_comp_basics_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Falloc_comp_basics_3.f90?ref=5dba0fb8453e71c6f03f7a00b41016fc327f89f9", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do compile }\n+! Test the patch for PR30202 in which the INTENT(OUT)\n+! caused an ICE.\n+!\n+! Contributed by Salvatore Filippone <sfilippone@uniroma2.it>\n+!\n+program class_scal_p\n+  implicit none\n+  type scal_p\n+    real, allocatable :: b(:)\n+  end type scal_p\n+  type(scal_p) :: pd\n+  call psb_geallv(pd%b)\n+contains\n+  subroutine psb_geallv(x)\n+    real, allocatable, intent(out) :: x(:)\n+  end subroutine psb_geallv\n+end program class_scal_p"}]}