{"sha": "c4dc2125063be04a54d030075a03e4ded7be38d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzRkYzIxMjUwNjNiZTA0YTU0ZDAzMDA3NWEwM2U0ZGVkN2JlMzhkNQ==", "commit": {"author": {"name": "Hristian Kirtchev", "email": "kirtchev@adacore.com", "date": "2016-04-21T09:41:45Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-04-21T09:41:45Z"}, "message": "lib-writ.adb, [...]: Minor reformatting and code cleanup.\n\n2016-04-21  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* lib-writ.adb, sem_ch6.adb: Minor reformatting and code cleanup.\n\t* sem.adb: Fix comment.\n\nFrom-SVN: r235325", "tree": {"sha": "6d8e765851bda29c331dba2b60fa20ad467534e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d8e765851bda29c331dba2b60fa20ad467534e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c4dc2125063be04a54d030075a03e4ded7be38d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4dc2125063be04a54d030075a03e4ded7be38d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4dc2125063be04a54d030075a03e4ded7be38d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4dc2125063be04a54d030075a03e4ded7be38d5/comments", "author": {"login": "kirtchev-adacore", "id": 60669983, "node_id": "MDQ6VXNlcjYwNjY5OTgz", "avatar_url": "https://avatars.githubusercontent.com/u/60669983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kirtchev-adacore", "html_url": "https://github.com/kirtchev-adacore", "followers_url": "https://api.github.com/users/kirtchev-adacore/followers", "following_url": "https://api.github.com/users/kirtchev-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/kirtchev-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/kirtchev-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kirtchev-adacore/subscriptions", "organizations_url": "https://api.github.com/users/kirtchev-adacore/orgs", "repos_url": "https://api.github.com/users/kirtchev-adacore/repos", "events_url": "https://api.github.com/users/kirtchev-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/kirtchev-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c42aba6bb38df822c6b1cd3cb6c59c5b6eef88e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c42aba6bb38df822c6b1cd3cb6c59c5b6eef88e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c42aba6bb38df822c6b1cd3cb6c59c5b6eef88e3"}], "stats": {"total": 37, "additions": 24, "deletions": 13}, "files": [{"sha": "73c31eeabe6c96ef04f265e156e9d3e545363e2f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c4dc2125063be04a54d030075a03e4ded7be38d5", "patch": "@@ -1,3 +1,8 @@\n+2016-04-21  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* lib-writ.adb, sem_ch6.adb: Minor reformatting and code cleanup.\n+\t* sem.adb: Fix comment.\n+\n 2016-04-21  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem_ch3.adb (Analyze_Subtype_Declaration): A subtype"}, {"sha": "37f574b0442a59eebd4f79ed2ec8d910f4772e35", "filename": "gcc/ada/lib-writ.adb", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2Flib-writ.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2Flib-writ.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-writ.adb?ref=c4dc2125063be04a54d030075a03e4ded7be38d5", "patch": "@@ -43,6 +43,7 @@ with Par;\n with Par_SCO;  use Par_SCO;\n with Restrict; use Restrict;\n with Rident;   use Rident;\n+with Stand;    use Stand;\n with Scn;      use Scn;\n with Sem_Eval; use Sem_Eval;\n with Sinfo;    use Sinfo;\n@@ -155,9 +156,9 @@ package body Lib.Writ is\n         OA_Setting        => 'O',\n         SPARK_Mode_Pragma => Empty);\n \n-      --  Parse system.ads so that the checksum is set right,\n-      --  Style checks are not applied. The Ekind is set to ensure\n-      --  that this reference is always present in the ali file.\n+      --  Parse system.ads so that the checksum is set right. Style checks are\n+      --  not applied. The Ekind is set to ensure that this reference is always\n+      --  present in the ali file.\n \n       declare\n          Save_Mindex : constant Nat := Multiple_Unit_Index;\n@@ -167,7 +168,8 @@ package body Lib.Writ is\n          Style_Check := False;\n          Initialize_Scanner (Units.Last, System_Source_File_Index);\n          Discard_List (Par (Configuration_Pragmas => False));\n-         Set_Ekind (Cunit_Entity (Units.Last),  E_Package);\n+         Set_Ekind (Cunit_Entity (Units.Last), E_Package);\n+         Set_Scope (Cunit_Entity (Units.Last), Standard_Standard);\n          Style_Check := Save_Style;\n          Multiple_Unit_Index := Save_Mindex;\n       end;\n@@ -1435,9 +1437,13 @@ package body Lib.Writ is\n             --  context of a unit loaded through a limited_with clause. These\n             --  units are never analyzed, and thus the main unit does not\n             --  really have a dependency on them.\n+            --  Subunits are always compiled in the context of the parent,\n+            --  and their file table entries are not properly decorated, they\n+            --  are recognized syntactically.\n \n             if Present (Cunit_Entity (Unum))\n               and then Ekind (Cunit_Entity (Unum)) = E_Void\n+              and then Nkind (Unit (Cunit (Unum))) /= N_Subunit\n             then\n                goto Next_Unit;\n             end if;\n@@ -1465,9 +1471,9 @@ package body Lib.Writ is\n                Write_Info_Char (' ');\n                Write_Info_Str (Get_Hex_String (Source_Checksum (Sind)));\n \n-               --  If the dependency comes from a limited_with clause,\n-               --  record limited_checksum.\n-               --  Disable for now, until full checksum changes are checked.\n+               --  If the dependency comes from a limited_with clause, record\n+               --  limited_checksum. This is disabled until full checksum\n+               --  changes are checked.\n \n                --  if Present (Cunit_Entity (Unum))\n                --    and then From_Limited_With (Cunit_Entity (Unum))"}, {"sha": "7ed6a15adf9230c37a6acca0134b3364ade0e767", "filename": "gcc/ada/sem.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2Fsem.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2Fsem.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem.adb?ref=c4dc2125063be04a54d030075a03e4ded7be38d5", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2015, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2016, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -999,7 +999,7 @@ package body Sem is\n       if Present (M) then\n \n          --  If we are not at the end of the list, then the easiest\n-         --  coding is simply to insert before our successor\n+         --  coding is simply to insert before our successor.\n \n          if Present (Next (N)) then\n             Insert_Before_And_Analyze (Next (N), M);"}, {"sha": "1a996da0db8fee3a339f42fa47510ef86776e033", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4dc2125063be04a54d030075a03e4ded7be38d5/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=c4dc2125063be04a54d030075a03e4ded7be38d5", "patch": "@@ -3302,7 +3302,7 @@ package body Sem_Ch6 is\n \n       --  If we are generating C and this is a function returning a constrained\n       --  array type for which we must create a procedure with an extra out\n-      --  parameter, build and analyze the body now.  The procedure declaration\n+      --  parameter, build and analyze the body now. The procedure declaration\n       --  has already been created. We reuse the source body of the function,\n       --  because in an instance it may contain global references that cannot\n       --  be reanalyzed. The source function itself is not used any further,\n@@ -3319,9 +3319,9 @@ package body Sem_Ch6 is\n          Rewrite (N, Build_Procedure_Body_Form (Spec_Id, N));\n          Analyze (N);\n \n-         --  The entity for the created procedure must remain invisible,\n-         --  so it does not participate in resolution of subsequent\n-         --  references to the function.\n+         --  The entity for the created procedure must remain invisible, so it\n+         --  does not participate in resolution of subsequent references to the\n+         --  function.\n \n          Set_Is_Immediately_Visible (Corresponding_Spec (N), False);\n          return;"}]}