{"sha": "f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFlOTJhNDNlOWFlYzJmMDUyY2ZjNWMyMGIyZTc5M2Y5N2ZjMThkYQ==", "commit": {"author": {"name": "Andi Kleen", "email": "ak@linux.intel.com", "date": "2010-10-03T15:56:06Z"}, "committer": {"name": "Andi Kleen", "email": "ak@gcc.gnu.org", "date": "2010-10-03T15:56:06Z"}, "message": "lto-cgraph.c (input_cgraph): Check for missing sections.\n\ngcc/\n    \n2010-10-03  Andi Kleen <ak@linux.intel.com>\n    \n\t* lto-cgraph.c (input_cgraph): Check for missing sections.\n    \ngcc/lto/\n   \n2010-10-03  Andi Kleen <ak@linux.intel.com>\n    \n    \t* lto.c (lto_file_finalize): Replace gcc_assert for missing section\n          with fatal_error.\n\nFrom-SVN: r164916", "tree": {"sha": "2f77cbde52e5c00f2f5f388bfdf925fbad4acbeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f77cbde52e5c00f2f5f388bfdf925fbad4acbeb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/comments", "author": null, "committer": null, "parents": [{"sha": "5ed69344502acbe8e141a5b480bd31296f9ba5cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ed69344502acbe8e141a5b480bd31296f9ba5cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ed69344502acbe8e141a5b480bd31296f9ba5cd"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "9f3a3155c80f29d9df545057dcc7ebdf0418b228", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "patch": "@@ -1,3 +1,7 @@\n+2010-10-03  Andi Kleen <ak@linux.intel.com>\n+\n+    \t* lto-cgraph.c (input_cgraph): Check for missing sections.\n+\n 2010-10-03  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.md (*ashl<mode>3_mask): Change operand 2 preticate"}, {"sha": "b61e5d167615591ea41848a020a249683704d81f", "filename": "gcc/lto-cgraph.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2Flto-cgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2Flto-cgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-cgraph.c?ref=f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "patch": "@@ -1468,6 +1468,8 @@ input_cgraph (void)\n \n       ib = lto_create_simple_input_block (file_data, LTO_section_cgraph,\n \t\t\t\t\t  &data, &len);\n+      if (!ib) \n+\tfatal_error (\"Cannot find LTO cgraph in %s\\n\", file_data->file_name);\n       input_profile_summary (ib);\n       file_data->cgraph_node_encoder = lto_cgraph_encoder_new ();\n       nodes = input_cgraph_1 (file_data, ib);\n@@ -1476,12 +1478,16 @@ input_cgraph (void)\n \n       ib = lto_create_simple_input_block (file_data, LTO_section_varpool,\n \t\t\t\t\t  &data, &len);\n+      if (!ib)\n+\tfatal_error (\"Cannot find LTO varpool in %s\\n\", file_data->file_name);\n       varpool = input_varpool_1 (file_data, ib);\n       lto_destroy_simple_input_block (file_data, LTO_section_varpool,\n \t\t\t\t      ib, data, len);\n \n       ib = lto_create_simple_input_block (file_data, LTO_section_refs,\n \t\t\t\t\t  &data, &len);\n+      if (!ib)\n+\tfatal_error(\"Cannot find LTO section refs in %s\\n\", file_data->file_name);\n       input_refs (ib, nodes, varpool);\n       lto_destroy_simple_input_block (file_data, LTO_section_refs,\n \t\t\t\t      ib, data, len);"}, {"sha": "5c8ac55d0dc8368ea23cb228d3f4eb21c543da5f", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "patch": "@@ -1,3 +1,8 @@\n+2010-10-03  Andi Kleen <ak@linux.intel.com>\n+\n+    \t* lto.c (lto_file_finalize): Replace gcc_assert for missing section\n+          with fatal_error.\n+\n 2010-09-28  Jan Hubicka  <jh@suse.cz>\n \n \t* lto-lang.c (handle_leaf_attribute): New function."}, {"sha": "2fbea7332d4ae91716335b240c83ad3f8df2ba29", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1e92a43e9aec2f052cfc5c20b2e793f97fc18da/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=f1e92a43e9aec2f052cfc5c20b2e793f97fc18da", "patch": "@@ -493,7 +493,11 @@ lto_file_finalize (struct lto_file_decl_data *file_data, lto_file *file)\n   file_data->renaming_hash_table = lto_create_renaming_table ();\n   file_data->file_name = file->filename;\n   data = lto_get_section_data (file_data, LTO_section_decls, NULL, &len);\n-  gcc_assert (data != NULL);\n+  if (data == NULL)\n+    {\n+      internal_error (\"Cannot read LTO decls from %s\", file_data->file_name);\n+      return;\n+    }\n   lto_read_decls (file_data, data, file_data->resolutions);\n   lto_free_section_data (file_data, LTO_section_decls, NULL, data, len);\n }"}]}