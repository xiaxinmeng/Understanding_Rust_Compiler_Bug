{"sha": "508dabda235646a3093d923d0afbc3867adb083a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTA4ZGFiZGEyMzU2NDZhMzA5M2Q5MjNkMGFmYmMzODY3YWRiMDgzYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2007-07-06T17:57:58Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2007-07-06T17:57:58Z"}, "message": "re PR middle-end/32441 (ICE in expand_expr_real_1, at expr.c:7109)\n\n2007-07-06  Ian Lance Taylor  <iant@google.com>\n            Zack Weinberg  <zackw@panix.com>\n\n\tPR middle-end/32441\n\t* builtins.c (std_expand_builtin_va_start): Don't use make_tree.\n\nCo-Authored-By: Zack Weinberg <zackw@panix.com>\n\nFrom-SVN: r126424", "tree": {"sha": "98f90d13896c0cd9efd3b15dc89f527d2fab3d6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98f90d13896c0cd9efd3b15dc89f527d2fab3d6e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/508dabda235646a3093d923d0afbc3867adb083a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/508dabda235646a3093d923d0afbc3867adb083a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/508dabda235646a3093d923d0afbc3867adb083a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/508dabda235646a3093d923d0afbc3867adb083a/comments", "author": null, "committer": null, "parents": [{"sha": "e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0ff69ab1195bfc3fcc0c5f91cf5fea89acf54ff"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "8bf43ab5c578854edfd29bc612eccf3115782c21", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/508dabda235646a3093d923d0afbc3867adb083a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/508dabda235646a3093d923d0afbc3867adb083a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=508dabda235646a3093d923d0afbc3867adb083a", "patch": "@@ -1,3 +1,9 @@\n+2007-07-06  Ian Lance Taylor  <iant@google.com>\n+            Zack Weinberg  <zackw@panix.com>\n+\n+\tPR middle-end/32441\n+\t* builtins.c (std_expand_builtin_va_start): Don't use make_tree.\n+\n 2007-07-06  Richard Sandiford  <richard@codesourcery.com>\n \n \t* config/sh/sh.md (*prefetch_i4): Disable for TARGET_VXWORKS_RTP."}, {"sha": "45dea02084205b348dafd0e6e062a3cf380f6b34", "filename": "gcc/builtins.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/508dabda235646a3093d923d0afbc3867adb083a/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/508dabda235646a3093d923d0afbc3867adb083a/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=508dabda235646a3093d923d0afbc3867adb083a", "patch": "@@ -4649,14 +4649,8 @@ std_build_builtin_va_list (void)\n void\n std_expand_builtin_va_start (tree valist, rtx nextarg)\n {\n-  tree t;\n-  t = make_tree (sizetype, nextarg);\n-  t = fold_convert (ptr_type_node, t);\n-\n-  t = build2 (MODIFY_EXPR, TREE_TYPE (valist), valist, t);\n-  TREE_SIDE_EFFECTS (t) = 1;\n-\n-  expand_expr (t, const0_rtx, VOIDmode, EXPAND_NORMAL);\n+  rtx va_r = expand_expr (valist, NULL_RTX, VOIDmode, EXPAND_WRITE);\n+  convert_move (va_r, nextarg, 0);\n }\n \n /* Expand EXP, a call to __builtin_va_start.  */"}]}