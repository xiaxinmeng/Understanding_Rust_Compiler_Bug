{"sha": "dfbc6cbe30524f817b427c19756dd13aecf31d09", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZiYzZjYmUzMDUyNGY4MTdiNDI3YzE5NzU2ZGQxM2FlY2YzMWQwOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-04-20T10:31:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-04-20T10:31:59Z"}, "message": "[multiple changes]\n\n2016-04-20  Arnaud Charlet  <charlet@adacore.com>\n\n\t* sem_ch9.adb (Analyze_Task_Type_Declaration): Shut down warning\n\tin codepeer mode.\n\n2016-04-20  Vincent Celier  <celier@adacore.com>\n\n\t* make.adb: Code cleanup.\n\n2016-04-20  Arnaud Charlet  <charlet@adacore.com>\n\n\t* exp_ch4.adb (Expand_Allocator_Expression): Help C code\n\tgeneration.\n\nFrom-SVN: r235257", "tree": {"sha": "1450459ed241e29280343492df32a4ee34c18ce6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1450459ed241e29280343492df32a4ee34c18ce6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfbc6cbe30524f817b427c19756dd13aecf31d09", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfbc6cbe30524f817b427c19756dd13aecf31d09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfbc6cbe30524f817b427c19756dd13aecf31d09", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfbc6cbe30524f817b427c19756dd13aecf31d09/comments", "author": null, "committer": null, "parents": [{"sha": "06f6c43f5c0d8df09010ec690b237bc62e3b6d02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06f6c43f5c0d8df09010ec690b237bc62e3b6d02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06f6c43f5c0d8df09010ec690b237bc62e3b6d02"}], "stats": {"total": 28, "additions": 21, "deletions": 7}, "files": [{"sha": "b516cbc642db06d6122a6bd8a755d36eaf72bd5b", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=dfbc6cbe30524f817b427c19756dd13aecf31d09", "patch": "@@ -1,3 +1,17 @@\n+2016-04-20  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* sem_ch9.adb (Analyze_Task_Type_Declaration): Shut down warning\n+\tin codepeer mode.\n+\n+2016-04-20  Vincent Celier  <celier@adacore.com>\n+\n+\t* make.adb: Code cleanup.\n+\n+2016-04-20  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* exp_ch4.adb (Expand_Allocator_Expression): Help C code\n+\tgeneration.\n+\n 2016-04-20  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* sem_ch12.adb (Copy_Generic_Node): Handle the special"}, {"sha": "190664071a35d9160d21f493a0064a4632e3bb58", "filename": "gcc/ada/exp_ch4.adb", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2Fexp_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2Fexp_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch4.adb?ref=dfbc6cbe30524f817b427c19756dd13aecf31d09", "patch": "@@ -1281,7 +1281,12 @@ package body Exp_Ch4 is\n             Displace_Allocator_Pointer (N);\n          end if;\n \n-      elsif Aggr_In_Place then\n+      --  Always force the generation of a temporary for aggregates when\n+      --  generating C code, to simplify the work in the code generator.\n+\n+      elsif Aggr_In_Place\n+        or else (Generate_C_Code and then Nkind (Exp) = N_Aggregate)\n+      then\n          Temp := Make_Temporary (Loc, 'P', N);\n          Temp_Decl :=\n            Make_Object_Declaration (Loc,"}, {"sha": "a072513a28869002d62126bab4b62fa933ad0b05", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=dfbc6cbe30524f817b427c19756dd13aecf31d09", "patch": "@@ -6506,12 +6506,6 @@ package body Make is\n          Make_Failed (\"-i and -D cannot be used simultaneously\");\n       end if;\n \n-      --  Warn about 'gnatmake -P'\n-\n-      if Project_File_Name /= null then\n-         Make_Failed (\"project file name missing after -P\");\n-      end if;\n-\n       --  If --subdirs= is specified, but not -P, this is equivalent to -D,\n       --  except that the directory is created if it does not exist.\n "}, {"sha": "03c584bba716208d96672000cec5acc8813ee0e0", "filename": "gcc/ada/sem_ch9.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2Fsem_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbc6cbe30524f817b427c19756dd13aecf31d09/gcc%2Fada%2Fsem_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch9.adb?ref=dfbc6cbe30524f817b427c19756dd13aecf31d09", "patch": "@@ -3077,6 +3077,7 @@ package body Sem_Ch9 is\n       if Restriction_Check_Required (No_Task_Hierarchy)\n         and then not Is_Library_Level_Entity (T)\n         and then Comes_From_Source (T)\n+        and then not CodePeer_Mode\n       then\n          Error_Msg_Sloc := Restrictions_Loc (No_Task_Hierarchy);\n "}]}