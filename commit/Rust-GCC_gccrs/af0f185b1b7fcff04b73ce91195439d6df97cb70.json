{"sha": "af0f185b1b7fcff04b73ce91195439d6df97cb70", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWYwZjE4NWIxYjdmY2ZmMDRiNzNjZTkxMTk1NDM5ZDZkZjk3Y2I3MA==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2003-09-22T07:18:09Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2003-09-22T07:18:09Z"}, "message": "re PR target/12281 (not emiting function which is static and marked as inline)\n\n2003-09-21  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR target/12281\n        * config/darwin.c (machopic_validate_stub_or_non_lazy_ptr): Call\n        mark_referenced instead of setting TREE_SYMBOL_REFERENCED.\n\n2003-09-21  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR target/12281\n        * gcc.c-torture/compile/20030921-1.c: New test.\n\nFrom-SVN: r71648", "tree": {"sha": "647c1f7191a782d3c384439c42fd2ffc800cb980", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/647c1f7191a782d3c384439c42fd2ffc800cb980"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af0f185b1b7fcff04b73ce91195439d6df97cb70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af0f185b1b7fcff04b73ce91195439d6df97cb70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af0f185b1b7fcff04b73ce91195439d6df97cb70", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af0f185b1b7fcff04b73ce91195439d6df97cb70/comments", "author": null, "committer": null, "parents": [{"sha": "de582cfbb98b6f155499b2a261a6e336f951b625", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de582cfbb98b6f155499b2a261a6e336f951b625", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de582cfbb98b6f155499b2a261a6e336f951b625"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "b67008fc39c9280160799317de6d0a781211fcc7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=af0f185b1b7fcff04b73ce91195439d6df97cb70", "patch": "@@ -1,3 +1,9 @@\n+2003-09-21  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR target/12281\n+\t* config/darwin.c (machopic_validate_stub_or_non_lazy_ptr): Call\n+\tmark_referenced instead of setting TREE_SYMBOL_REFERENCED.\n+\n 2003-09-22  Olivier Hainque  <hainque@act-europe.fr>\n \n \tPR target/9786"}, {"sha": "4e1c45c6012453bc12f4f1eb7e07691f597df538", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=af0f185b1b7fcff04b73ce91195439d6df97cb70", "patch": "@@ -398,12 +398,12 @@ machopic_validate_stub_or_non_lazy_ptr (const char *name, int validate_stub)\n \t     original symbol as being referenced.  */\n           TREE_USED (temp) = 1;\n \t  if (TREE_CODE (TREE_VALUE (temp)) == IDENTIFIER_NODE)\n-\t    TREE_SYMBOL_REFERENCED (TREE_VALUE (temp)) = 1;\n+\t    mark_referenced (TREE_VALUE (temp));\n \t  real_name = IDENTIFIER_POINTER (TREE_VALUE (temp));\n \t  real_name = darwin_strip_name_encoding (real_name);\n \t  id2 = maybe_get_identifier (real_name);\n \t  if (id2)\n-\t    TREE_SYMBOL_REFERENCED (id2) = 1;\n+\t    mark_referenced (id2);\n \t}\n }\n "}, {"sha": "a06118698a1beb9d07b422cde7d015ca06a5f48c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=af0f185b1b7fcff04b73ce91195439d6df97cb70", "patch": "@@ -1,3 +1,8 @@\n+2003-09-21  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR target/12281\n+\t* gcc.c-torture/compile/20030921-1.c: New test.\n+\n 2003-09-22  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \t* g++.dg/opt/reg-stack2.C: New test."}, {"sha": "8199dc657f24a140bee6631c3d40482f3ee8abe5", "filename": "gcc/testsuite/gcc.c-torture/compile/20030921-1.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20030921-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0f185b1b7fcff04b73ce91195439d6df97cb70/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20030921-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20030921-1.c?ref=af0f185b1b7fcff04b73ce91195439d6df97cb70", "patch": "@@ -0,0 +1,10 @@\n+/* PR 12281  The darwin back-end was causing the function \n+   f is not being emitted. TREE_SYMBOL_REFERENCED was being set\n+   instead of calling mark_referenced.  */\n+\n+\n+static void f(void);\n+void g(void (*x) (void)){x();}\n+static inline void f(void){}\n+void h(){g(f);}\n+int main(){h();return 0;}"}]}