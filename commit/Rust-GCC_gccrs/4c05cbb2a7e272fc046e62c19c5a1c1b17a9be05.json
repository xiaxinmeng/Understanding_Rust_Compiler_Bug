{"sha": "4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGMwNWNiYjJhN2UyNzJmYzA0NmU2MmMxOWM1YTFjMWIxN2E5YmUwNQ==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2010-10-28T19:57:17Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2010-10-28T19:57:17Z"}, "message": "moxie-protos.h (moxie_function_arg): Delete.\n\n\t* config/moxie/moxie-protos.h (moxie_function_arg): Delete.\n\t* config/moxie/moxie.h (FUNCTION_ARG, FUNCTION_ARG_ADVANCE): Delete.\n\t(MOXIE_FUNCTION_ARG_SIZE): Move to...\n\t* config/moxie/moxie.c (MOXIE_FUNCTION_ARG_SIZE): ...here.\n\t(moxie_function_arg): Make static.  Take a const_tree and a bool.\n\t(moxie_function_arg_advance): New function.\n\t(TARGET_FUNCTION_ARG, TARGET_FUNCTION_ARG_ADVANCE): Define.\n\nFrom-SVN: r166037", "tree": {"sha": "27531d3f2162a38a1ee50ce3e9eb70916df46170", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27531d3f2162a38a1ee50ce3e9eb70916df46170"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/comments", "author": null, "committer": null, "parents": [{"sha": "ce236858e339040a4814a70f62282ad5da7d9c34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce236858e339040a4814a70f62282ad5da7d9c34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce236858e339040a4814a70f62282ad5da7d9c34"}], "stats": {"total": 55, "additions": 33, "deletions": 22}, "files": [{"sha": "34d3e9199827d472bc017dd7edeeb09d0876ce4b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "patch": "@@ -1,3 +1,13 @@\n+2010-10-28  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* config/moxie/moxie-protos.h (moxie_function_arg): Delete.\n+\t* config/moxie/moxie.h (FUNCTION_ARG, FUNCTION_ARG_ADVANCE): Delete.\n+\t(MOXIE_FUNCTION_ARG_SIZE): Move to...\n+\t* config/moxie/moxie.c (MOXIE_FUNCTION_ARG_SIZE): ...here.\n+\t(moxie_function_arg): Make static.  Take a const_tree and a bool.\n+\t(moxie_function_arg_advance): New function.\n+\t(TARGET_FUNCTION_ARG, TARGET_FUNCTION_ARG_ADVANCE): Define.\n+\n 2010-10-28  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* config/mn10300/mn10300-protos.h (function_arg): Delete."}, {"sha": "7d939f58873c5f9eca43a008c032389f7d5c4943", "filename": "gcc/config/moxie/moxie-protos.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2Fconfig%2Fmoxie%2Fmoxie-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2Fconfig%2Fmoxie%2Fmoxie-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmoxie%2Fmoxie-protos.h?ref=4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "patch": "@@ -23,7 +23,3 @@ extern void  moxie_expand_epilogue (void);\n extern int   moxie_initial_elimination_offset (int, int);\n extern void  moxie_print_operand (FILE *, rtx, int);\n extern void  moxie_print_operand_address (FILE *, rtx);\n-#ifdef RTX_CODE\n-extern rtx   moxie_function_arg (CUMULATIVE_ARGS, \n-\t\t\t\t enum machine_mode, tree, int);\n-#endif /* RTX_CODE */"}, {"sha": "d2a6b66562880e3f9e3cda7a6458376cc5d89515", "filename": "gcc/config/moxie/moxie.c", "status": "modified", "additions": 23, "deletions": 5, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2Fconfig%2Fmoxie%2Fmoxie.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2Fconfig%2Fmoxie%2Fmoxie.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmoxie%2Fmoxie.c?ref=4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "patch": "@@ -409,16 +409,30 @@ moxie_fixed_condition_code_regs (unsigned int *p1, unsigned int *p2)\n /* Return the next register to be used to hold a function argument or\n    NULL_RTX if there's no more space.  */\n \n-rtx\n-moxie_function_arg (CUMULATIVE_ARGS cum, enum machine_mode mode,\n-\t\t    tree type ATTRIBUTE_UNUSED, int named ATTRIBUTE_UNUSED)\n+static rtx\n+moxie_function_arg (CUMULATIVE_ARGS *cum, enum machine_mode mode,\n+\t\t    const_tree type ATTRIBUTE_UNUSED,\n+\t\t    bool named ATTRIBUTE_UNUSED)\n {\n-  if (cum < 8)\n-    return gen_rtx_REG (mode, cum);\n+  if (*cum < 8)\n+    return gen_rtx_REG (mode, *cum);\n   else \n     return NULL_RTX;\n }\n \n+#define MOXIE_FUNCTION_ARG_SIZE(MODE, TYPE)\t\\\n+  ((MODE) != BLKmode ? GET_MODE_SIZE (MODE)\t\\\n+   : (unsigned) int_size_in_bytes (TYPE))\n+\n+static void\n+moxie_function_arg_advance (CUMULATIVE_ARGS *cum, enum machine_mode mode,\n+\t\t\t    const_tree type, bool named ATTRIBUTE_UNUSED)\n+{\n+  *cum = (*cum < MOXIE_R6\n+\t  ? *cum + ((3 + MOXIE_FUNCTION_ARG_SIZE (mode, type)) / 4)\n+\t  : *cum);\n+}\n+\n /* Return non-zero if the function argument described by TYPE is to be\n    passed by reference.  */\n \n@@ -539,6 +553,10 @@ moxie_trampoline_init (rtx m_tramp, tree fndecl, rtx chain_value)\n #define TARGET_PASS_BY_REFERENCE        moxie_pass_by_reference\n #undef  TARGET_ARG_PARTIAL_BYTES\n #define TARGET_ARG_PARTIAL_BYTES        moxie_arg_partial_bytes\n+#undef  TARGET_FUNCTION_ARG\n+#define TARGET_FUNCTION_ARG\t\tmoxie_function_arg\n+#undef  TARGET_FUNCTION_ARG_ADVANCE\n+#define TARGET_FUNCTION_ARG_ADVANCE\tmoxie_function_arg_advance\n \n \n #undef  TARGET_SETUP_INCOMING_VARARGS"}, {"sha": "0cfc11b352b5a3ae41049462f97b016f4b42f75b", "filename": "gcc/config/moxie/moxie.h", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2Fconfig%2Fmoxie%2Fmoxie.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05/gcc%2Fconfig%2Fmoxie%2Fmoxie.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmoxie%2Fmoxie.h?ref=4c05cbb2a7e272fc046e62c19c5a1c1b17a9be05", "patch": "@@ -231,11 +231,6 @@ enum reg_class\n \n /* Passing Arguments in Registers */\n \n-/* A C expression that controls whether a function argument is passed\n-   in a register, and which register.  */\n-#define FUNCTION_ARG(CUM,MODE,TYPE,NAMED) \\\n-  moxie_function_arg(CUM,MODE,TYPE,NAMED)\n-\n /* A C type for declaring a variable that is used as the first\n    argument of `FUNCTION_ARG' and other related values.  */\n #define CUMULATIVE_ARGS unsigned int\n@@ -253,14 +248,6 @@ enum reg_class\n #define INIT_CUMULATIVE_ARGS(CUM,FNTYPE,LIBNAME,FNDECL,N_NAMED_ARGS) \\\n   (CUM = MOXIE_R0)\n \n-#define MOXIE_FUNCTION_ARG_SIZE(MODE, TYPE)\t\\\n-  ((MODE) != BLKmode ? GET_MODE_SIZE (MODE)\t\\\n-   : (unsigned) int_size_in_bytes (TYPE))\n-\n-#define FUNCTION_ARG_ADVANCE(CUM,MODE,TYPE,NAMED) \\\n-  (CUM = (CUM < MOXIE_R6 ?                        \\\n-          CUM + ((3 + MOXIE_FUNCTION_ARG_SIZE(MODE,TYPE))/4) : CUM ))\n-\n /* How Scalar Function Values Are Returned */\n \n /* STACK AND CALLING */"}]}