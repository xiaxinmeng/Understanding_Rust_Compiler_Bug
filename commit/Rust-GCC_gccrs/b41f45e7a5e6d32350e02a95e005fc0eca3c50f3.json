{"sha": "b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjQxZjQ1ZTdhNWU2ZDMyMzUwZTAyYTk1ZTAwNWZjMGVjYTNjNTBmMw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2017-01-06T13:28:43Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2017-01-06T13:28:43Z"}, "message": "[multiple changes]\n\n2017-01-06  Bob Duff  <duff@adacore.com>\n\n\t* bindgen.adb (Gen_Adainit, Gen_Adafinal): Change\n\t\"Bind_Main_Program\" to \"not Bind_For_Library\", because otherwise\n\twe won't generate the call to s_stalib_adafinal when the main\n\tis not written in Ada.\n\n2017-01-06  Bob Duff  <duff@adacore.com>\n\n\t* sem_prag.adb: Minor: remove pragma Warnings.\n\n2017-01-06  Tristan Gingold  <gingold@adacore.com>\n\n\t* Makefile.rtl: Do not compile s-stchop by default.\n\nFrom-SVN: r244154", "tree": {"sha": "7e44a29bf3fc13eb70e6f19afe608bd81ab318e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e44a29bf3fc13eb70e6f19afe608bd81ab318e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/comments", "author": null, "committer": null, "parents": [{"sha": "8b790281d58c106e62033432f6352a1b40d4be2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b790281d58c106e62033432f6352a1b40d4be2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b790281d58c106e62033432f6352a1b40d4be2d"}], "stats": {"total": 30, "additions": 24, "deletions": 6}, "files": [{"sha": "a7921c53cb4e053d3983451e5d9a76ef2f65de4c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "patch": "@@ -1,3 +1,18 @@\n+2017-01-06  Bob Duff  <duff@adacore.com>\n+\n+\t* bindgen.adb (Gen_Adainit, Gen_Adafinal): Change\n+\t\"Bind_Main_Program\" to \"not Bind_For_Library\", because otherwise\n+\twe won't generate the call to s_stalib_adafinal when the main\n+\tis not written in Ada.\n+\n+2017-01-06  Bob Duff  <duff@adacore.com>\n+\n+\t* sem_prag.adb: Minor: remove pragma Warnings.\n+\n+2017-01-06  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* Makefile.rtl: Do not compile s-stchop by default.\n+\n 2017-01-06  Patrick Bernardi  <bernardi@adacore.com>\n \n \t* aspects.adb, aspects.ads, exp_ch3.adb, exp_ch9.adb, par-prag.adb,"}, {"sha": "5f5c3a84e0acb4ced913c880fd14a1fb65de31b6", "filename": "gcc/ada/Makefile.rtl", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2FMakefile.rtl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2FMakefile.rtl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMakefile.rtl?ref=b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "patch": "@@ -658,7 +658,6 @@ GNATRTL_NONTASKING_OBJS= \\\n   s-stache$(objext) \\\n   s-stalib$(objext) \\\n   s-stausa$(objext) \\\n-  s-stchop$(objext) \\\n   s-stoele$(objext) \\\n   s-stopoo$(objext) \\\n   s-stposu$(objext) \\"}, {"sha": "0955b1aba4a89ad155a6283267b3e780d8755d82", "filename": "gcc/ada/bindgen.adb", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2Fbindgen.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2Fbindgen.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbindgen.adb?ref=b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "patch": "@@ -415,7 +415,13 @@ package body Bindgen is\n    begin\n       WBI (\"   procedure \" & Ada_Final_Name.all & \" is\");\n \n-      if Bind_Main_Program and not CodePeer_Mode then\n+      --  Call s_stalib_adafinal to await termination of tasks and so on. We\n+      --  want to do this if there is a main program, either in Ada or in some\n+      --  other language. (Note that Bind_Main_Program is True for Ada mains,\n+      --  but False for mains in other languages.) We do not want to do this if\n+      --  we're binding a library.\n+\n+      if not Bind_For_Library and not CodePeer_Mode then\n          WBI (\"      procedure s_stalib_adafinal;\");\n          Set_String (\"      pragma Import (C, s_stalib_adafinal, \");\n          Set_String (\"\"\"system__standard_library__adafinal\"\");\");\n@@ -442,7 +448,7 @@ package body Bindgen is\n       --  on whether this is the main program or a library.\n \n       if not CodePeer_Mode then\n-         if Bind_Main_Program then\n+         if not Bind_For_Library then\n             WBI (\"      s_stalib_adafinal;\");\n          elsif Lib_Final_Built then\n             WBI (\"      finalize_library;\");\n@@ -906,7 +912,7 @@ package body Bindgen is\n       --  tasks are non-terminating, so we do not want library-level\n       --  finalization.\n \n-      elsif Bind_Main_Program\n+      elsif not Bind_For_Library\n         and then not Configurable_Run_Time_On_Target\n         and then not Suppress_Standard_Library_On_Target\n       then"}, {"sha": "608acd0a3f2914c10cff7ec60a8ff3dfd8035e12", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b41f45e7a5e6d32350e02a95e005fc0eca3c50f3/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=b41f45e7a5e6d32350e02a95e005fc0eca3c50f3", "patch": "@@ -19042,7 +19042,6 @@ package body Sem_Prag is\n          --           [New_Name =>] IDENTIFIER,\n          --           [Renamed  =>] pragma_IDENTIFIER);\n \n-         pragma Warnings (Off);\n          when Pragma_Rename_Pragma => Rename_Pragma : declare\n             New_Name : constant Node_Id := Get_Pragma_Arg (Arg1);\n             Old_Name : constant Node_Id := Get_Pragma_Arg (Arg2);\n@@ -19076,7 +19075,6 @@ package body Sem_Prag is\n \n             Map_Pragma_Name (From => Chars (New_Name), To => Chars (Old_Name));\n          end Rename_Pragma;\n-         pragma Warnings (On);\n \n          -------------\n          -- Polling --"}]}