{"sha": "38c2f655ffa5cf2f335c2772ec484702d891a7c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhjMmY2NTVmZmE1Y2YyZjMzNWMyNzcyZWM0ODQ3MDJkODkxYTdjMw==", "commit": {"author": {"name": "Maroua Maalej", "email": "maalej@adacore.com", "date": "2018-10-09T15:06:30Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-10-09T15:06:30Z"}, "message": "[Ada] SPARK: fix bug related to non access object permissions\n\n2018-10-09  Maroua Maalej  <maalej@adacore.com>\n\ngcc/ada/\n\n\t* sem_spark.adb (Check_Declaration): fix bug related to non\n\taccess object permissions.\n\nFrom-SVN: r264979", "tree": {"sha": "191daf19dd73e3798d397c213a5332d2cd9f26c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/191daf19dd73e3798d397c213a5332d2cd9f26c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38c2f655ffa5cf2f335c2772ec484702d891a7c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38c2f655ffa5cf2f335c2772ec484702d891a7c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38c2f655ffa5cf2f335c2772ec484702d891a7c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38c2f655ffa5cf2f335c2772ec484702d891a7c3/comments", "author": null, "committer": null, "parents": [{"sha": "827845b8291910e7815ffcafe58d48a78c3ea410", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/827845b8291910e7815ffcafe58d48a78c3ea410", "html_url": "https://github.com/Rust-GCC/gccrs/commit/827845b8291910e7815ffcafe58d48a78c3ea410"}], "stats": {"total": 25, "additions": 7, "deletions": 18}, "files": [{"sha": "fada99d05e1c019dbb46305f74fe10d37bd599f5", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c2f655ffa5cf2f335c2772ec484702d891a7c3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c2f655ffa5cf2f335c2772ec484702d891a7c3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=38c2f655ffa5cf2f335c2772ec484702d891a7c3", "patch": "@@ -1,3 +1,8 @@\n+2018-10-09  Maroua Maalej  <maalej@adacore.com>\n+\n+\t* sem_spark.adb (Check_Declaration): fix bug related to non\n+\taccess object permissions.\n+\n 2018-10-09  Doug Rupp  <rupp@adacore.com>\n \n \t* libgnat/a-ncelfu.ads: Fix name in header to match package."}, {"sha": "0fe7c1b881cd30ed7b90e68dd505f3c96f19dd48", "filename": "gcc/ada/sem_spark.adb", "status": "modified", "additions": 2, "deletions": 18, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c2f655ffa5cf2f335c2772ec484702d891a7c3/gcc%2Fada%2Fsem_spark.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c2f655ffa5cf2f335c2772ec484702d891a7c3/gcc%2Fada%2Fsem_spark.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_spark.adb?ref=38c2f655ffa5cf2f335c2772ec484702d891a7c3", "patch": "@@ -1052,30 +1052,14 @@ package body Sem_SPARK is\n                      end if;\n                   end if;\n \n-               elsif Nkind_In (Expression (Decl),\n-                               N_Attribute_Reference,\n-                               N_Attribute_Reference,\n-                               N_Expanded_Name,\n-                               N_Explicit_Dereference,\n-                               N_Indexed_Component,\n-                               N_Reference,\n-                               N_Selected_Component,\n-                               N_Slice)\n-               then\n-                  if Is_Access_Type (Etype (Prefix (Expression (Decl))))\n-                    or else Is_Deep (Etype (Prefix (Expression (Decl))))\n-                  then\n-                     Current_Checking_Mode := Observe;\n-                     Check := True;\n-                  end if;\n                end if;\n             end if;\n \n             if Check then\n                Check_Node (Expression (Decl));\n             end if;\n \n-            --  If lhs is not a pointer, we still give it the appropriate\n+            --  If lhs is not a pointer, we still give it the unrestricted\n             --  state which is useless but not harmful.\n \n             declare\n@@ -1215,7 +1199,7 @@ package body Sem_SPARK is\n          when N_Attribute_Reference =>\n             case Attribute_Name (Expr) is\n                when Name_Access =>\n-                  Error_Msg_N (\"access attribute not allowed in SPARK\", Expr);\n+                  Error_Msg_N (\"access attribute not allowed\", Expr);\n \n                when Name_Last\n                   | Name_First"}]}