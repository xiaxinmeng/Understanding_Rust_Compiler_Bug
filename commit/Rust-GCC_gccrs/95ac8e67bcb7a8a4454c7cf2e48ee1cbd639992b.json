{"sha": "95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTVhYzhlNjdiY2I3YThhNDQ1NGM3Y2YyZTQ4ZWUxY2JkNjM5OTkyYg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-09-19T19:42:00Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-09-19T19:42:00Z"}, "message": "(smax, smin, umax, umin): Add define_splits.\n\nFrom-SVN: r2169", "tree": {"sha": "9fdb998d89f3b2fe518746ed42e687c065564da8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fdb998d89f3b2fe518746ed42e687c065564da8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b/comments", "author": null, "committer": null, "parents": [{"sha": "df3d94ed38439480dca837415ccd2181d982a23c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df3d94ed38439480dca837415ccd2181d982a23c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df3d94ed38439480dca837415ccd2181d982a23c"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "9da114a46470fc4832402f8c2464d44f542432c2", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 28, "deletions": 1, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=95ac8e67bcb7a8a4454c7cf2e48ee1cbd639992b", "patch": "@@ -271,7 +271,8 @@\n \n ;; For SMIN, SMAX, UMIN, and UMAX, we use DEFINE_EXPAND's that involve a doz[i]\n ;; instruction and some auxiliary computations.  Then we just have a single\n-;; DEFINE_INSN for doz[i].\n+;; DEFINE_INSN for doz[i] and the define_splits to make them if made by\n+;; combine.\n \n (define_expand \"sminsi3\"\n   [(set (match_dup 3)\n@@ -285,6 +286,19 @@\n   \"\n { operands[3] = gen_reg_rtx (SImode); }\")\n \n+(define_split\n+  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"\")\n+\t(smin:SI (match_operand:SI 1 \"gpc_reg_operand\" \"\")\n+\t\t (match_operand:SI 2 \"reg_or_short_operand\" \"\")))\n+   (clobber (match_operand:SI 3 \"gpc_reg_operand\" \"\"))]\n+  \"\"\n+  [(set (match_dup 3)\n+\t(if_then_else:SI (gt:SI (match_dup 1) (match_dup 2))\n+\t\t\t (const_int 0)\n+\t\t\t (minus:SI (match_dup 2) (match_dup 1))))\n+   (set (match_dup 0) (minus:SI (match_dup 2) (match_dup 3)))]\n+  \"\")\n+\n (define_expand \"smaxsi3\"\n   [(set (match_dup 3)\n \t(if_then_else:SI (gt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"\")\n@@ -297,6 +311,19 @@\n   \"\n { operands[3] = gen_reg_rtx (SImode); }\")\n \n+(define_split\n+  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"\")\n+\t(smax:SI (match_operand:SI 1 \"gpc_reg_operand\" \"\")\n+\t\t (match_operand:SI 2 \"reg_or_short_operand\" \"\")))\n+   (clobber (match_operand:SI 3 \"gpc_reg_operand\" \"\"))]\n+  \"\"\n+  [(set (match_dup 3)\n+\t(if_then_else:SI (gt:SI (match_dup 1) (match_dup 2))\n+\t\t\t (const_int 0)\n+\t\t\t (minus:SI (match_dup 2) (match_dup 1))))\n+   (set (match_dup 0) (plus:SI (match_dup 3) (match_dup 1)))]\n+  \"\")\n+\n (define_expand \"uminsi3\"\n   [(set (match_dup 3) (xor:SI (match_operand:SI 1 \"gpc_reg_operand\" \"\")\n \t\t\t      (const_int -2147483648)))"}]}