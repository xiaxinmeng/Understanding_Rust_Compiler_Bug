{"sha": "66d3fe476a583950232d7da789d2dc51747602ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjZkM2ZlNDc2YTU4Mzk1MDIzMmQ3ZGE3ODlkMmRjNTE3NDc2MDJjZQ==", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2005-05-04T20:31:11Z"}, "committer": {"name": "Andrew Macleod", "email": "amacleod@gcc.gnu.org", "date": "2005-05-04T20:31:11Z"}, "message": "tree-flow-inline.h (op_iter_init_use, [...]): Assert that the flags are of appropriate types.\n\n\n2005-05-04  Andrew MacLeod  <amacleod@redhat.com>\n\n\t* tree-flow-inline.h (op_iter_init_use, op_iter_init_def): Assert that\n\tthe flags are of appropriate types.\n\t(num_ssa_operands): Generalize using the generic interface.\n\t* tree-ssa-dce.c (remove_dead_stmt): Don't ask for kills on a DEF\n\titerator.\n\nFrom-SVN: r99227", "tree": {"sha": "0272e730378c798ede3c199d454d5d1a72a23fa2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0272e730378c798ede3c199d454d5d1a72a23fa2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66d3fe476a583950232d7da789d2dc51747602ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66d3fe476a583950232d7da789d2dc51747602ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66d3fe476a583950232d7da789d2dc51747602ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66d3fe476a583950232d7da789d2dc51747602ce/comments", "author": null, "committer": null, "parents": [{"sha": "158a48bee4999945672c1e6b55ae64db1edd6f6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/158a48bee4999945672c1e6b55ae64db1edd6f6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/158a48bee4999945672c1e6b55ae64db1edd6f6f"}], "stats": {"total": 30, "additions": 13, "deletions": 17}, "files": [{"sha": "391f438c5494665e22f5c877f6ccb0fadc5f8ce8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66d3fe476a583950232d7da789d2dc51747602ce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66d3fe476a583950232d7da789d2dc51747602ce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=66d3fe476a583950232d7da789d2dc51747602ce", "patch": "@@ -1,3 +1,11 @@\n+2005-05-04  Andrew MacLeod  <amacleod@redhat.com>\n+\n+\t* tree-flow-inline.h (op_iter_init_use, op_iter_init_def): Assert that\n+\tthe flags are of appropriate types.\n+\t(num_ssa_operands): Generalize using the generic interface.\n+\t* tree-ssa-dce.c (remove_dead_stmt): Don't ask for kills on a DEF\n+\titerator.\n+\n 2005-05-04  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* protoize.c (version_flag, quiet_flag, nochange_flag, nosave_flag)"}, {"sha": "063d1a47e121aee6bb5031fb3415ef073a23e4ac", "filename": "gcc/tree-flow-inline.h", "status": "modified", "additions": 4, "deletions": 15, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66d3fe476a583950232d7da789d2dc51747602ce/gcc%2Ftree-flow-inline.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66d3fe476a583950232d7da789d2dc51747602ce/gcc%2Ftree-flow-inline.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-flow-inline.h?ref=66d3fe476a583950232d7da789d2dc51747602ce", "patch": "@@ -1005,6 +1005,7 @@ op_iter_init (ssa_op_iter *ptr, tree stmt, int flags)\n static inline use_operand_p\n op_iter_init_use (ssa_op_iter *ptr, tree stmt, int flags)\n {\n+  gcc_assert ((flags & SSA_OP_ALL_DEFS) == 0);\n   op_iter_init (ptr, stmt, flags);\n   ptr->iter_type = ssa_op_iter_use;\n   return op_iter_next_use (ptr);\n@@ -1015,6 +1016,7 @@ op_iter_init_use (ssa_op_iter *ptr, tree stmt, int flags)\n static inline def_operand_p\n op_iter_init_def (ssa_op_iter *ptr, tree stmt, int flags)\n {\n+  gcc_assert ((flags & (SSA_OP_ALL_USES | SSA_OP_VIRTUAL_KILLS)) == 0);\n   op_iter_init (ptr, stmt, flags);\n   ptr->iter_type = ssa_op_iter_def;\n   return op_iter_next_def (ptr);\n@@ -1175,24 +1177,11 @@ static inline int\n num_ssa_operands (tree stmt, int flags)\n {\n   ssa_op_iter iter;\n+  tree t;\n   int num = 0;\n \n-  op_iter_init (&iter, stmt, flags);\n-  for ( ; iter.defs; iter.defs = iter.defs->next)\n+  FOR_EACH_SSA_TREE_OPERAND (t, stmt, iter, flags)\n     num++;\n-  for ( ; iter.uses; iter.uses = iter.uses->next)\n-    num++;\n-  for ( ; iter.vuses; iter.vuses = iter.vuses->next)\n-    num++;\n-  for ( ; iter.maydefs; iter.maydefs = iter.maydefs->next)\n-    num++;\n-  for ( ; iter.mayuses; iter.mayuses = iter.mayuses->next)\n-    num++;\n-  for ( ; iter.mustdefs; iter.mustdefs = iter.mustdefs->next)\n-    num++;\n-  for ( ; iter.mustkills; iter.mustkills = iter.mustkills->next)\n-    num++;\n-\n   return num;\n }\n "}, {"sha": "92c9e9b935aafd6a45d8ddc90bebedccb35ccbb6", "filename": "gcc/tree-ssa-dce.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66d3fe476a583950232d7da789d2dc51747602ce/gcc%2Ftree-ssa-dce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66d3fe476a583950232d7da789d2dc51747602ce/gcc%2Ftree-ssa-dce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dce.c?ref=66d3fe476a583950232d7da789d2dc51747602ce", "patch": "@@ -769,8 +769,7 @@ remove_dead_stmt (block_stmt_iterator *i, basic_block bb)\n         remove_edge (EDGE_SUCC (bb, 1));\n     }\n   \n-  FOR_EACH_SSA_DEF_OPERAND (def_p, t, iter, \n-\t\t\t    SSA_OP_VIRTUAL_DEFS | SSA_OP_VIRTUAL_KILLS)\n+  FOR_EACH_SSA_DEF_OPERAND (def_p, t, iter, SSA_OP_VIRTUAL_DEFS)\n     {\n       tree def = DEF_FROM_PTR (def_p);\n       mark_sym_for_renaming (SSA_NAME_VAR (def));"}]}