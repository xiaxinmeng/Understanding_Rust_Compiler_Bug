{"sha": "acddf6665f067bc98a2529a699b1d4509a7387cb", "node_id": "C_kwDOANBUbNoAKGFjZGRmNjY2NWYwNjdiYzk4YTI1MjlhNjk5YjFkNDUwOWE3Mzg3Y2I", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2023-01-14T00:15:41Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2023-01-14T00:15:41Z"}, "message": "[PR40457] [arm] expand SI-aligned movdi into pair of movsi\n\nWhen expanding a misaligned DImode move, emit aligned SImode moves if\nthe parts are sufficiently aligned.  This enables neighboring stores\nto be peephole-combined into stm, as expected by the PR40457 testcase,\neven after SLP vectorizes the originally aligned SImode stores into a\nmisaligned DImode store.\n\n\nfor  gcc/ChangeLog\n\n\tPR target/40457\n\t* config/arm/arm.md (movmisaligndi): Prefer aligned SImode\n\tmoves.", "tree": {"sha": "227b4f66c644f9021590583a961bf5a317471337", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/227b4f66c644f9021590583a961bf5a317471337"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/acddf6665f067bc98a2529a699b1d4509a7387cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acddf6665f067bc98a2529a699b1d4509a7387cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acddf6665f067bc98a2529a699b1d4509a7387cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acddf6665f067bc98a2529a699b1d4509a7387cb/comments", "author": null, "committer": null, "parents": [{"sha": "ccd4df81aa6537c3c935b026905f6e2fd839654e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccd4df81aa6537c3c935b026905f6e2fd839654e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccd4df81aa6537c3c935b026905f6e2fd839654e"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "3710c5cac56bc7a453403e53c8ddf726bd9ff697", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acddf6665f067bc98a2529a699b1d4509a7387cb/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acddf6665f067bc98a2529a699b1d4509a7387cb/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=acddf6665f067bc98a2529a699b1d4509a7387cb", "patch": "@@ -12783,8 +12783,16 @@\n   rtx hi_op0 = gen_highpart_mode (SImode, DImode, operands[0]);\n   rtx hi_op1 = gen_highpart_mode (SImode, DImode, operands[1]);\n \n-  emit_insn (gen_movmisalignsi (lo_op0, lo_op1));\n-  emit_insn (gen_movmisalignsi (hi_op0, hi_op1));\n+  if (aligned_operand (lo_op0, SImode) && aligned_operand (lo_op1, SImode))\n+    {\n+      emit_move_insn (lo_op0, lo_op1);\n+      emit_move_insn (hi_op0, hi_op1);\n+    }\n+  else\n+    {\n+      emit_insn (gen_movmisalignsi (lo_op0, lo_op1));\n+      emit_insn (gen_movmisalignsi (hi_op0, hi_op1));\n+    }\n   DONE;\n })\n "}]}