{"sha": "04a751889435ce14f2aca6880add30c2ff3319e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRhNzUxODg5NDM1Y2UxNGYyYWNhNjg4MGFkZDMwYzJmZjMzMTllMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-09-15T22:16:33Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-09-15T22:16:33Z"}, "message": "varasm.c (default_function_rdodata_section): Make sure to pass along a decl for a link-once section.\n\n\t* varasm.c (default_function_rdodata_section): Make sure to pass\n\talong a decl for a link-once section.\n\n\t* g++.dg/opt/switch1.C: New test.\n\nFrom-SVN: r87569", "tree": {"sha": "566d466153ee9549192da89f45dbe3df248a8b67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/566d466153ee9549192da89f45dbe3df248a8b67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04a751889435ce14f2aca6880add30c2ff3319e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04a751889435ce14f2aca6880add30c2ff3319e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04a751889435ce14f2aca6880add30c2ff3319e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04a751889435ce14f2aca6880add30c2ff3319e3/comments", "author": null, "committer": null, "parents": [{"sha": "9544bea1fa3dc43b43672d76c46cb7354cd18626", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9544bea1fa3dc43b43672d76c46cb7354cd18626", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9544bea1fa3dc43b43672d76c46cb7354cd18626"}], "stats": {"total": 34, "additions": 33, "deletions": 1}, "files": [{"sha": "d9620165672c51f22c961255e4feae932bbdcc34", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=04a751889435ce14f2aca6880add30c2ff3319e3", "patch": "@@ -1,3 +1,8 @@\n+2004-09-15  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* varasm.c (default_function_rdodata_section): Make sure to pass\n+\talong a decl for a link-once section.\n+\n 2004-09-15  Richard Henderson  <rth@redhat.com>\n \n \t* tree-ssa-operands.c (add_call_clobber_ops): Fix unused variable"}, {"sha": "f9dfb7f6751c5ce331ee84d3a1f76480ec4390d0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=04a751889435ce14f2aca6880add30c2ff3319e3", "patch": "@@ -1,3 +1,7 @@\n+2004-09-15  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* g++.dg/opt/switch1.C: New test.\n+\n 2004-09-15  Joseph S. Myers  <jsm@polyomino.org.uk>\n \n \t* g++.dg/ext/member-attr.C, g++.dg/warn/deprecated.C,"}, {"sha": "c21630d752b607926122c6ae27070dd46c79aa54", "filename": "gcc/testsuite/g++.dg/opt/switch1.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fswitch1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fswitch1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fswitch1.C?ref=04a751889435ce14f2aca6880add30c2ff3319e3", "patch": "@@ -0,0 +1,23 @@\n+// { dg-options \"-O1\" }\n+\n+template <typename T>\n+int f(T t) {\n+  switch (t) {\n+  case 1:\n+    return 5;\n+  case 2:\n+    return 6;\n+  case 3:\n+    return -4;\n+  case 4:\n+    return 8;\n+  case 5:\n+    return 12;\n+  case 6:\n+    return 13;\n+  default:\n+    return -27;\n+  }\n+}\n+\n+template int f(int);"}, {"sha": "05d60eb44d152e305761c194508f29dd0be2ab10", "filename": "gcc/varasm.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04a751889435ce14f2aca6880add30c2ff3319e3/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=04a751889435ce14f2aca6880add30c2ff3319e3", "patch": "@@ -600,7 +600,7 @@ default_function_rodata_section (tree decl)\n \n \t  memcpy (rname, name, len);\n \t  rname[14] = 'r';\n-\t  named_section_flags (rname, SECTION_LINKONCE);\n+\t  named_section_real (rname, SECTION_LINKONCE, decl);\n \t  return;\n \t}\n       /* For .text.foo we want to use .rodata.foo.  */"}]}