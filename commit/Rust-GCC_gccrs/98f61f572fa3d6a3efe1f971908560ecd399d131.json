{"sha": "98f61f572fa3d6a3efe1f971908560ecd399d131", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThmNjFmNTcyZmEzZDZhM2VmZTFmOTcxOTA4NTYwZWNkMzk5ZDEzMQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2004-10-28T00:16:57Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2004-10-28T00:16:57Z"}, "message": "typeof-2.c: Needs aliases as well as weak.\n\n\t* gcc.dg/weak/typeof-2.c: Needs aliases as well as weak.\n\t* gcc.dg/weak/weak-3.c: Likewise.\n\t* gcc.dg/weak/weak-5.c: Likewise.\n\t* gcc.dg/weak/weak-9.c: Likewise.\n\t* lib/file-format.exp (gcc_target_object_format): Darwin has Mach-O.\n\t* lib/target-supports.exp (check_weak_available): Mach-O does weak.\n\nFrom-SVN: r89723", "tree": {"sha": "f23ae7fe1076bca999f9f2ab787eb7cb7a23e8ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f23ae7fe1076bca999f9f2ab787eb7cb7a23e8ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98f61f572fa3d6a3efe1f971908560ecd399d131", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98f61f572fa3d6a3efe1f971908560ecd399d131", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98f61f572fa3d6a3efe1f971908560ecd399d131", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98f61f572fa3d6a3efe1f971908560ecd399d131/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "02c2429ce922484805a33f28cdc3b29a7e801b83", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02c2429ce922484805a33f28cdc3b29a7e801b83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02c2429ce922484805a33f28cdc3b29a7e801b83"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "cecd7fad6362145ec97700f5aea1e2ddaf53bf3c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=98f61f572fa3d6a3efe1f971908560ecd399d131", "patch": "@@ -1,5 +1,12 @@\n 2004-10-27  Geoffrey Keating  <geoffk@apple.com>\n \n+\t* gcc.dg/weak/typeof-2.c: Needs aliases as well as weak.\n+\t* gcc.dg/weak/weak-3.c: Likewise.\n+\t* gcc.dg/weak/weak-5.c: Likewise.\n+\t* gcc.dg/weak/weak-9.c: Likewise.\n+\t* lib/file-format.exp (gcc_target_object_format): Darwin has Mach-O.\n+\t* lib/target-supports.exp (check_weak_available): Mach-O does weak.\n+\n \t* gcc.dg/darwin-weakimport-1.c: New.\n \n 2004-10-28  Ben Elliston  <bje@au.ibm.com>"}, {"sha": "0ff192b05230efc97134e6320e2e961ea0581a96", "filename": "gcc/testsuite/gcc.dg/weak/typeof-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Ftypeof-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Ftypeof-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Ftypeof-2.c?ref=98f61f572fa3d6a3efe1f971908560ecd399d131", "patch": "@@ -1,6 +1,7 @@\n /* Test typeof with __asm redirection. */\n /* { dg-do compile } */\n /* { dg-require-weak \"\" } */\n+/* { dg-require-alias \"\" } */\n /* { dg-options \"-O2\" } */\n \n extern int foo1 (int x) __asm (\"baz1\");"}, {"sha": "c9448f032cf2d8c3ce7a5bb336272c1177cc4734", "filename": "gcc/testsuite/gcc.dg/weak/weak-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-3.c?ref=98f61f572fa3d6a3efe1f971908560ecd399d131", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-require-alias \"\" } */\n /* { dg-require-weak \"\" } */\n /* { dg-options \"-fno-common\" } */\n "}, {"sha": "a8aca2875448cad07389a5d2bc898a7d21568fa5", "filename": "gcc/testsuite/gcc.dg/weak/weak-5.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-5.c?ref=98f61f572fa3d6a3efe1f971908560ecd399d131", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-require-weak \"\" } */\n+/* { dg-require-alias \"\" } */\n /* { dg-options \"-fno-common\" } */\n \n /* { dg-final { scan-assembler \"weak\\[^ \\t\\]*\\[ \\t\\]_?vfoo1a\" } } */"}, {"sha": "95e8f809f38f1521f1f80c3629a6c2ae5224b415", "filename": "gcc/testsuite/gcc.dg/weak/weak-9.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fweak%2Fweak-9.c?ref=98f61f572fa3d6a3efe1f971908560ecd399d131", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-require-weak \"\" } */\n+/* { dg-require-alias \"\" } */\n /* { dg-options \"-fno-common\" } */\n \n /* { dg-final { scan-assembler \"weak\\[^ \\t\\]*\\[ \\t\\]_?f1\" } } */"}, {"sha": "7be398eeb3aaad66eea4c5ae2291ace8981c0454", "filename": "gcc/testsuite/lib/file-format.exp", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Flib%2Ffile-format.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Flib%2Ffile-format.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ffile-format.exp?ref=98f61f572fa3d6a3efe1f971908560ecd399d131", "patch": "@@ -24,10 +24,14 @@\n \n proc gcc_target_object_format { } { \n     global gcc_target_object_format_saved\n+    global target_triplet\n     global tool\n \n     if [info exists gcc_target_object_format_saved] {\n         verbose \"gcc_target_object_format returning saved $gcc_target_object_format_saved\" 2\n+    } elseif { [string match \"*-*-darwin*\" $target_triplet] } {\n+\t# Darwin doesn't necessarily have objdump, so hand-code it.\n+\tset gcc_target_object_format_saved mach-o\n     } else {\n         set objdump_name [find_binutils_prog objdump]\n         set open_file [open objfmtst.c w]"}, {"sha": "a737f5db186f5e996b0930c531be76a1b1a74bb6", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f61f572fa3d6a3efe1f971908560ecd399d131/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=98f61f572fa3d6a3efe1f971908560ecd399d131", "patch": "@@ -57,6 +57,7 @@ proc check_weak_available { } {\n         elf      { return 1 }\n         ecoff    { return 1 }\n         a.out    { return 1 }\n+\tmach-o\t { return 1 }\n         unknown  { return -1 }\n         default  { return 0 }\n     }"}]}