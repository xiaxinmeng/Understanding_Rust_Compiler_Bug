{"sha": "c686e630c3b8896de88ec42206e6a67cac8ae8f1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzY4NmU2MzBjM2I4ODk2ZGU4OGVjNDIyMDZlNmE2N2NhYzhhZThmMQ==", "commit": {"author": {"name": "Robert Schuster", "email": "thebohemian@gmx.net", "date": "2005-02-07T20:34:17Z"}, "committer": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "2005-02-07T20:34:17Z"}, "message": "ISO_8859_1.java, [...]: Fixed canonical names and aliases according to...\n\n2005-02-07  Robert Schuster  <thebohemian@gmx.net>\n\n        * gnu/java/nio/charset/ISO_8859_1.java,\n        gnu/java/nio/charset/US_ASCII.java,\n        gnu/java/nio/charset/UTF_16.java,\n        gnu/java/nio/charset/UTF_16_LE.java,\n        gnu/java/nio/charset/UTF_16_BE.java,\n        gnu/java/nio/charset/UTF_8.java: Fixed canonical names\n         and aliases according to\n         \"http://www.iana.org/assignments/character-sets\",\n         \"http://java.sun.com/j2se/1.5.0/docs/guide/intl/encoding.doc.html\"\n         and \"http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\".\n        * gnu/java/nio/charset/Provider.java: Made charset lookup\n         case-insensitive which fixes bug #11740.\n\nFrom-SVN: r94711", "tree": {"sha": "613fa4cd0999190543e05cc29e93f444bfe26f14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/613fa4cd0999190543e05cc29e93f444bfe26f14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c686e630c3b8896de88ec42206e6a67cac8ae8f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c686e630c3b8896de88ec42206e6a67cac8ae8f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c686e630c3b8896de88ec42206e6a67cac8ae8f1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c686e630c3b8896de88ec42206e6a67cac8ae8f1/comments", "author": {"login": "thebohemian", "id": 336602, "node_id": "MDQ6VXNlcjMzNjYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/336602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thebohemian", "html_url": "https://github.com/thebohemian", "followers_url": "https://api.github.com/users/thebohemian/followers", "following_url": "https://api.github.com/users/thebohemian/following{/other_user}", "gists_url": "https://api.github.com/users/thebohemian/gists{/gist_id}", "starred_url": "https://api.github.com/users/thebohemian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thebohemian/subscriptions", "organizations_url": "https://api.github.com/users/thebohemian/orgs", "repos_url": "https://api.github.com/users/thebohemian/repos", "events_url": "https://api.github.com/users/thebohemian/events{/privacy}", "received_events_url": "https://api.github.com/users/thebohemian/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f0d87cdad8ae2f4b34e4dfe313bc91e716636ba7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0d87cdad8ae2f4b34e4dfe313bc91e716636ba7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0d87cdad8ae2f4b34e4dfe313bc91e716636ba7"}], "stats": {"total": 165, "additions": 139, "deletions": 26}, "files": [{"sha": "9de22810639245f847a1964769f1e0b71e63f3b6", "filename": "libjava/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,3 +1,18 @@\n+2005-02-07  Robert Schuster  <thebohemian@gmx.net>\n+\n+\t* gnu/java/nio/charset/ISO_8859_1.java,\n+\tgnu/java/nio/charset/US_ASCII.java, \n+\tgnu/java/nio/charset/UTF_16.java,\n+\tgnu/java/nio/charset/UTF_16_LE.java,\n+\tgnu/java/nio/charset/UTF_16_BE.java,\n+\tgnu/java/nio/charset/UTF_8.java: Fixed canonical names\n+\t and aliases according to\n+\t \"http://www.iana.org/assignments/character-sets\",\n+\t \"http://java.sun.com/j2se/1.5.0/docs/guide/intl/encoding.doc.html\"\n+\t and \"http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\".\n+\t* gnu/java/nio/charset/Provider.java: Made charset lookup\n+\t case-insensitive which fixes bug #11740. \n+\n 2005-02-07  Tom Tromey  <tromey@redhat.com>\n \n \tPR libgcj/19611:"}, {"sha": "45fe5cc6fbac302970858fa8861ac56451d9337c", "filename": "libjava/gnu/java/nio/charset/ISO_8859_1.java", "status": "modified", "additions": 23, "deletions": 2, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FISO_8859_1.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FISO_8859_1.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FISO_8859_1.java?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,5 +1,5 @@\n /* ISO_8859_1.java -- \n-   Copyright (C) 2002, 2004 Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2004, 2005 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -53,7 +53,28 @@ final class ISO_8859_1 extends Charset\n {\n   ISO_8859_1 ()\n   {\n-    super (\"ISO-8859-1\", new String[]{\"ISO-LATIN-1\"});\n+    /* Canonical charset name chosen according to:\n+     * http://java.sun.com/j2se/1.5.0/docs/guide/intl/encoding.doc.html\n+     */\n+    super (\"ISO-8859-1\", new String[] {\n+        /* These names are provided by \n+         * http://www.iana.org/assignments/character-sets\n+         */\n+        \"iso-ir-100\",\n+        \"ISO_8859-1\",\n+        \"latin1\",\n+        \"l1\",\n+        \"IBM819\",\n+        \"CP819\",\n+        \"csISOLatin1\",\n+        \"8859_1\",\n+        /* These names are provided by\n+         * http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\n+         */\n+        \"ISO8859_1\", \"ISO_8859_1\", \"ibm-819\", \"ISO_8859-1:1987\",\n+        \"819\"\n+        });\n+\n   }\n \n   public boolean contains (Charset cs)"}, {"sha": "1a5606813cb902e3f945ed2e85d10cf9c42d935d", "filename": "libjava/gnu/java/nio/charset/Provider.java", "status": "modified", "additions": 33, "deletions": 14, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FProvider.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FProvider.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FProvider.java?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,5 +1,5 @@\n /* Provider.java -- \n-   Copyright (C) 2002 Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2005 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -48,6 +48,7 @@\n  * {@link Charset#charsetForName} and * {@link Charset#availableCharsets}.\n  *\n  * @author Jesse Rosenstock\n+ * @author Robert Schuster (thebohemian@gmx.net)\n  * @see Charset\n  */\n public final class Provider extends CharsetProvider\n@@ -63,21 +64,21 @@ public final class Provider extends CharsetProvider\n   }\n \n   /**\n-   * Map from charset name to charset canonical name.\n+   * Map from charset name to charset canonical name. The strings\n+   * are all lower-case to allow case-insensitive retrieval of\n+   * Charset instances. \n    */\n   private final HashMap canonicalNames;\n \n   /**\n-   * Map from canonical name to Charset.\n+   * Map from lower-case canonical name to Charset.\n    * TODO: We may want to use soft references.  We would then need to keep\n    * track of the class name to regenerate the object.\n    */\n   private final HashMap charsets;\n \n   private Provider ()\n   {\n-    // FIXME: We might need to make the name comparison case insensitive.\n-    // Verify this with the Sun JDK.\n     canonicalNames = new HashMap ();\n     charsets = new HashMap ();\n \n@@ -106,24 +107,42 @@ public Iterator charsets ()\n                       .iterator ();\n   }\n \n+  /**\n+   * Returns a Charset instance by converting the given\n+   * name to lower-case, looking up the canonical charset\n+   * name and finally looking up the Charset with that name.\n+   * \n+   * <p>The lookup is therefore case-insensitive.</p>\n+   * \n+   *  @returns The Charset having <code>charsetName</code>\n+   *  as its alias or null if no such Charset exist.\n+   */\n   public Charset charsetForName (String charsetName)\n   {\n-    return (Charset) charsets.get (canonicalize (charsetName));\n-  }\n-\n-  private Object canonicalize (String charsetName)\n-  {\n-    Object o = canonicalNames.get (charsetName);\n-    return o == null ? charsetName : o;\n+    return (Charset) charsets.get(canonicalNames.get(charsetName.toLowerCase()));\n   }\n \n+  /**\n+   * Puts a Charset under its canonical name into the 'charsets' map.\n+   * Then puts a mapping from all its alias names to the canonical name.\n+   * \n+   * <p>All names are converted to lower-case</p>.\n+   * \n+   * @param cs\n+   */\n   private void addCharset (Charset cs)\n   {\n-    String canonicalName = cs.name ();\n+    String canonicalName = cs.name().toLowerCase();\n     charsets.put (canonicalName, cs);\n+    \n+    /* Adds a mapping between the canonical name\n+     * itself making a lookup using that name\n+     * no special case.\n+     */  \n+    canonicalNames.put(canonicalName, canonicalName);\n \n     for (Iterator i = cs.aliases ().iterator (); i.hasNext (); )\n-      canonicalNames.put (i.next (), canonicalName);\n+      canonicalNames.put (((String) i.next()).toLowerCase(), canonicalName);\n   }\n \n   public static synchronized Provider provider ()"}, {"sha": "f2c66960b6dee20ccb9a710982d1438cc3ec32d4", "filename": "libjava/gnu/java/nio/charset/US_ASCII.java", "status": "modified", "additions": 24, "deletions": 2, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUS_ASCII.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUS_ASCII.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUS_ASCII.java?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,5 +1,5 @@\n /* US_ASCII.java -- \n-   Copyright (C) 2002, 2004 Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2004, 2005 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -53,7 +53,29 @@ final class US_ASCII extends Charset\n {\n   US_ASCII ()\n   {\n-    super (\"US-ASCII\", new String[]{\"ISO646-US\"});\n+    /* Canonical charset name chosen according to:\n+     * http://java.sun.com/j2se/1.5.0/docs/guide/intl/encoding.doc.html\n+     */\n+    super (\"US-ASCII\", new String[] {\n+        /* These names are provided by \n+         * http://www.iana.org/assignments/character-sets\n+         */\n+        \"iso-ir-6\",\n+        \"ANSI_X3.4-1986\",\n+        \"ISO_646.irv:1991\",\n+        \"ASCII\",\n+        \"ISO646-US\",\n+        \"ASCII\",\n+        \"us\",\n+        \"IBM367\",\n+        \"cp367\",\n+        \"csASCII\",\n+        /* These names are provided by\n+         * http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\n+         */\n+        \"ANSI_X3.4-1968\", \"iso_646.irv:1983\", \"ascii7\", \"646\",\n+        \"windows-20127\"\n+        });\n   }\n \n   public boolean contains (Charset cs)"}, {"sha": "1737101d75d47bda1ce10d5a1febea68fec68e7b", "filename": "libjava/gnu/java/nio/charset/UTF_16.java", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16.java?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,5 +1,5 @@\n /* UTF_16.java -- \n-   Copyright (C) 2002, 2004  Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2004, 2005  Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -51,7 +51,14 @@ final class UTF_16 extends Charset\n {\n   UTF_16 ()\n   {\n-    super (\"UTF-16\", null);\n+    super (\"UTF-16\", new String[] {\n+        // witnessed by the internet\n+        \"UTF16\",\n+        /* These names are provided by\n+         * http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\n+         */\n+        \"ISO-10646-UCS-2\", \"unicode\", \"csUnicode\", \"ucs-2\"\n+    });\n   }\n \n   public boolean contains (Charset cs)"}, {"sha": "dc0d136985004b3f124a0f44ef2b50c7c027c5b3", "filename": "libjava/gnu/java/nio/charset/UTF_16BE.java", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16BE.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16BE.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16BE.java?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,5 +1,5 @@\n /* UTF_16BE.java -- \n-   Copyright (C) 2002, 2004  Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2004, 2005  Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -51,7 +51,18 @@ final class UTF_16BE extends Charset\n {\n   UTF_16BE ()\n   {\n-    super (\"UTF-16BE\", null);\n+    super (\"UTF-16BE\",  new String[] {\n+        // witnessed by the internet\n+        \"UTF16BE\",\n+        /* These names are provided by\n+         * http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\n+         */\n+        \"x-utf-16be\", \"ibm-1200\", \"ibm-1201\", \"ibm-5297\",\n+        \"ibm-13488\", \"ibm-17584\", \"windows-1201\", \"cp1200\", \"cp1201\",\n+        \"UTF16_BigEndian\",\n+        // see http://java.sun.com/j2se/1.5.0/docs/guide/intl/encoding.doc.html\n+        \"UnicodeBigUnmarked\"\n+    });\n   }\n \n   public boolean contains (Charset cs)"}, {"sha": "87ceab3033e3bf922957542ea244b675ec73c6b9", "filename": "libjava/gnu/java/nio/charset/UTF_16LE.java", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16LE.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16LE.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_16LE.java?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,5 +1,5 @@\n /* UTF_16LE.java -- \n-   Copyright (C) 2002, 2004  Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2004, 2005  Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -51,7 +51,17 @@ final class UTF_16LE extends Charset\n {\n   UTF_16LE ()\n   {\n-    super (\"UTF-16LE\", null);\n+    super (\"UTF-16LE\", new String[] {\n+        // witnessed by the internet\n+        \"UTF16LE\", \n+        /* These names are provided by\n+         * http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\n+         */\n+        \"x-utf-16le\", \"ibm-1202\", \"ibm-13490\", \"ibm-17586\",\n+        \"UTF16_LittleEndian\",\n+        // see http://java.sun.com/j2se/1.5.0/docs/guide/intl/encoding.doc.html\n+        \"UnicodeLittleUnmarked\"\n+    });\n   }\n \n   public boolean contains (Charset cs)"}, {"sha": "c2714363949392a68d1e886d4c3ba63dfebc1f3e", "filename": "libjava/gnu/java/nio/charset/UTF_8.java", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_8.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c686e630c3b8896de88ec42206e6a67cac8ae8f1/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_8.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fcharset%2FUTF_8.java?ref=c686e630c3b8896de88ec42206e6a67cac8ae8f1", "patch": "@@ -1,5 +1,5 @@\n /* UTF_8.java -- \n-   Copyright (C) 2002, 2004 Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2004, 2005  Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -62,7 +62,15 @@ final class UTF_8 extends Charset\n {\n   UTF_8 ()\n   {\n-    super (\"UTF-8\", null);\n+    super (\"UTF-8\", new String[] {\n+        /* These names are provided by\n+         * http://oss.software.ibm.com/cgi-bin/icu/convexp?s=ALL\n+         */\n+        \"ibm-1208\", \"ibm-1209\", \"ibm-5304\", \"ibm-5305\",\n+        \"windows-65001\", \"cp1208\",\n+        // see http://java.sun.com/j2se/1.5.0/docs/guide/intl/encoding.doc.html\n+        \"UTF8\"\n+    });\n   }\n \n   public boolean contains (Charset cs)"}]}