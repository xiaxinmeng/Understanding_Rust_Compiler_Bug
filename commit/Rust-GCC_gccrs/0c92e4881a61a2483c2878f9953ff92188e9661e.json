{"sha": "0c92e4881a61a2483c2878f9953ff92188e9661e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM5MmU0ODgxYTYxYTI0ODNjMjg3OGY5OTUzZmY5MjE4OGU5NjYxZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2014-07-19T19:30:11Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2014-07-19T19:30:11Z"}, "message": "* toplev.c (output_stack_usage): Adjust the location of the warning.\n\nFrom-SVN: r212850", "tree": {"sha": "c4cc7dab7556683b62fa9c331f471a18b2c08d06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4cc7dab7556683b62fa9c331f471a18b2c08d06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c92e4881a61a2483c2878f9953ff92188e9661e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c92e4881a61a2483c2878f9953ff92188e9661e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c92e4881a61a2483c2878f9953ff92188e9661e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c92e4881a61a2483c2878f9953ff92188e9661e/comments", "author": null, "committer": null, "parents": [{"sha": "773162d72a5150ecb675dd82eee76cea3c02c225", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773162d72a5150ecb675dd82eee76cea3c02c225", "html_url": "https://github.com/Rust-GCC/gccrs/commit/773162d72a5150ecb675dd82eee76cea3c02c225"}], "stats": {"total": 38, "additions": 24, "deletions": 14}, "files": [{"sha": "2edfb6740601914eaa1c6c3663652d3fbacc0a2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0c92e4881a61a2483c2878f9953ff92188e9661e", "patch": "@@ -1,3 +1,7 @@\n+2014-07-19  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* toplev.c (output_stack_usage): Adjust the location of the warning.\n+\n 2014-07-19  Daniel Cederman  <cederman@gaisler.com>\n \n \t* config/sparc/sync.md (*membar_storeload_leon3): New insn."}, {"sha": "c879f56315fb1b74fabd31717f4f5d6a19819aa1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0c92e4881a61a2483c2878f9953ff92188e9661e", "patch": "@@ -1,3 +1,7 @@\n+2014-07-19  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc.dg/stack-usage-2.c: Adjust.\n+\n 2014-07-18  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/61794"}, {"sha": "df7e55f05602043a88879489903703d082f568e8", "filename": "gcc/testsuite/gcc.dg/stack-usage-2.c", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2Ftestsuite%2Fgcc.dg%2Fstack-usage-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2Ftestsuite%2Fgcc.dg%2Fstack-usage-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fstack-usage-2.c?ref=0c92e4881a61a2483c2878f9953ff92188e9661e", "patch": "@@ -1,33 +1,32 @@\n /* { dg-do compile } */\n /* { dg-options \"-Wstack-usage=512\" } */\n \n-int foo1 (void)\n+int foo1 (void)  /* { dg-bogus \"stack usage\" } */\n {\n   char arr[16];\n   arr[0] = 1;\n   return 0;\n-} /* { dg-bogus \"stack usage\" } */\n+}\n \n-int foo2 (void)\n+int foo2 (void)  /* { dg-warning \"stack usage is \\[0-9\\]* bytes\" } */\n {\n   char arr[1024];\n   arr[0] = 1;\n   return 0;\n-} /* { dg-warning \"stack usage is \\[0-9\\]* bytes\" } */\n+}\n \n-int foo3 (void)\n+int foo3 (void) /* { dg-warning \"stack usage might be \\[0-9\\]* bytes\" } */\n {\n   char arr[1024] __attribute__((aligned (512)));\n   arr[0] = 1;\n   /* Force dynamic realignment of argument pointer.  */\n   __builtin_apply ((void (*)()) foo2, 0, 0);\n   return 0;\n+}\n \n-} /* { dg-warning \"stack usage might be \\[0-9\\]* bytes\" } */\n-\n-int foo4 (int n)\n+int foo4 (int n) /* { dg-warning \"stack usage might be unbounded\" } */\n {\n   char arr[n];\n   arr[0] = 1;\n   return 0;\n-} /* { dg-warning \"stack usage might be unbounded\" } */\n+}"}, {"sha": "1c9befdaa60ff788f95cc151786d624fcf22bf0a", "filename": "gcc/toplev.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c92e4881a61a2483c2878f9953ff92188e9661e/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=0c92e4881a61a2483c2878f9953ff92188e9661e", "patch": "@@ -1052,16 +1052,19 @@ output_stack_usage (void)\n \n   if (warn_stack_usage >= 0)\n     {\n+      const location_t loc = DECL_SOURCE_LOCATION (current_function_decl);\n+\n       if (stack_usage_kind == DYNAMIC)\n-\twarning (OPT_Wstack_usage_, \"stack usage might be unbounded\");\n+\twarning_at (loc, OPT_Wstack_usage_, \"stack usage might be unbounded\");\n       else if (stack_usage > warn_stack_usage)\n \t{\n \t  if (stack_usage_kind == DYNAMIC_BOUNDED)\n-\t    warning (OPT_Wstack_usage_, \"stack usage might be %wd bytes\",\n-\t\t     stack_usage);\n+\t    warning_at (loc,\n+\t\t\tOPT_Wstack_usage_, \"stack usage might be %wd bytes\",\n+\t\t\tstack_usage);\n \t  else\n-\t    warning (OPT_Wstack_usage_, \"stack usage is %wd bytes\",\n-\t\t     stack_usage);\n+\t    warning_at (loc, OPT_Wstack_usage_, \"stack usage is %wd bytes\",\n+\t\t\tstack_usage);\n \t}\n     }\n }"}]}