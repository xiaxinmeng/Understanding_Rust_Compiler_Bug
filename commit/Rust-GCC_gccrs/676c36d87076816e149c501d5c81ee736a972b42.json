{"sha": "676c36d87076816e149c501d5c81ee736a972b42", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njc2YzM2ZDg3MDc2ODE2ZTE0OWM1MDFkNWM4MWVlNzM2YTk3MmI0Mg==", "commit": {"author": {"name": "Mark Wielaard", "email": "mjw@redhat.com", "date": "2014-07-09T10:56:39Z"}, "committer": {"name": "Mark Wielaard", "email": "mark@gcc.gnu.org", "date": "2014-07-09T10:56:39Z"}, "message": "java: Use build_qualified_type instead of build_type_variant.\n\ngcc/java/ChangeLog\n\n\t* builtins.c (putVolatile_builtin): Use build_qualified_type\n\tinstead of build_type_variant.\n\t(getVolatile_builtin): Likewise.\n\t(build_classdollar_field): Likewise.\n\nFrom-SVN: r212389", "tree": {"sha": "31030883be64cd10b3e92c9a6f112ca068d731dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31030883be64cd10b3e92c9a6f112ca068d731dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/676c36d87076816e149c501d5c81ee736a972b42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/676c36d87076816e149c501d5c81ee736a972b42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/676c36d87076816e149c501d5c81ee736a972b42", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/676c36d87076816e149c501d5c81ee736a972b42/comments", "author": null, "committer": null, "parents": [{"sha": "059345ce40dc68e771f4e38c64597bbe56194551", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/059345ce40dc68e771f4e38c64597bbe56194551", "html_url": "https://github.com/Rust-GCC/gccrs/commit/059345ce40dc68e771f4e38c64597bbe56194551"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "d12b664d38a4562af212872bda138f6e112fa7dc", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676c36d87076816e149c501d5c81ee736a972b42/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676c36d87076816e149c501d5c81ee736a972b42/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=676c36d87076816e149c501d5c81ee736a972b42", "patch": "@@ -1,3 +1,10 @@\n+2014-07-08  Mark Wielaard  <mjw@redhat.com>\n+\n+\t* builtins.c (putVolatile_builtin): Use build_qualified_type\n+\tinstead of build_type_variant.\n+\t(getVolatile_builtin): Likewise.\n+\t(build_classdollar_field): Likewise.\n+\n 2014-06-24  Trevor Saunders  <tsaunders@mozilla.com>\n \n \t* jcf-io.c: Adjust."}, {"sha": "12c427daedae46f91400ee9ad6018c016b132a0f", "filename": "gcc/java/builtins.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676c36d87076816e149c501d5c81ee736a972b42/gcc%2Fjava%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676c36d87076816e149c501d5c81ee736a972b42/gcc%2Fjava%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fbuiltins.c?ref=676c36d87076816e149c501d5c81ee736a972b42", "patch": "@@ -394,7 +394,8 @@ putVolatile_builtin (tree method_return_type ATTRIBUTE_UNUSED,\n   \n   addr = build_addr_sum (value_type, obj_arg, offset_arg);\n   addr \n-    = fold_convert (build_pointer_type (build_type_variant (value_type, 0, 1)),\n+    = fold_convert (build_pointer_type (build_qualified_type\n+\t\t\t\t\t(value_type, TYPE_QUAL_VOLATILE)),\n \t\t    addr);\n   \n   stmt = build_call_expr (builtin_decl_explicit (BUILT_IN_SYNC_SYNCHRONIZE), 0);\n@@ -418,8 +419,9 @@ getVolatile_builtin (tree method_return_type ATTRIBUTE_UNUSED,\n \n   addr = build_addr_sum (method_return_type, obj_arg, offset_arg);\n   addr \n-    = fold_convert (build_pointer_type (build_type_variant \n-\t\t\t\t\t(method_return_type, 0, 1)), addr);\n+    = fold_convert (build_pointer_type (build_qualified_type\n+\t\t\t\t\t(method_return_type,\n+\t\t\t\t\t TYPE_QUAL_VOLATILE)), addr);\n   \n   stmt = build_call_expr (builtin_decl_explicit (BUILT_IN_SYNC_SYNCHRONIZE), 0);\n   tmp = build_decl (BUILTINS_LOCATION, VAR_DECL, NULL, method_return_type);"}, {"sha": "0d51165050eca8fbe95f3668456cb0afdc28a3ca", "filename": "gcc/java/class.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676c36d87076816e149c501d5c81ee736a972b42/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676c36d87076816e149c501d5c81ee736a972b42/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=676c36d87076816e149c501d5c81ee736a972b42", "patch": "@@ -1067,11 +1067,11 @@ build_classdollar_field (tree type)\n       decl \n \t= build_decl (input_location,\n \t\t      VAR_DECL, decl_name, \n-\t\t      (build_type_variant \n+\t\t      (build_qualified_type\n \t\t       (build_pointer_type \n-\t\t\t(build_type_variant (class_type_node, \n-\t\t\t\t\t     /* const */ 1, 0)),\n-\t\t\t/* const */ 1, 0)));\n+\t\t\t(build_qualified_type (class_type_node,\n+\t\t\t\t\t       TYPE_QUAL_CONST)),\n+\t\t\tTYPE_QUAL_CONST)));\n       TREE_STATIC (decl) = 1;\n       TREE_CONSTANT (decl) = 1;\n       TREE_READONLY (decl) = 1;"}]}