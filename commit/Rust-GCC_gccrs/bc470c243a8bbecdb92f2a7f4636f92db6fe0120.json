{"sha": "bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmM0NzBjMjQzYThiYmVjZGI5MmYyYTdmNDYzNmY5MmRiNmZlMDEyMA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-01-02T17:07:15Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-01-02T17:07:15Z"}, "message": "re PR rtl-optimization/47028 (gcc.dg/tree-ssa/tailrecursion-[57].c FAIL with -foptimize-sibling-calls -fno-forward-propagate -fno-tree-copy-prop -fno-tree-dominator-opts)\n\n\tPR rtl-optimization/47028\n\t* cfgexpand.c (gimple_expand_cfg): Insert entry edge\n\tinsertions after parm_birth_insn instead of at the beginning\n\tof first bb.\n\n\t* gcc.dg/pr47028.c: New test.\n\nFrom-SVN: r168401", "tree": {"sha": "5ef681ee68f0e49503bc7fb851a8a95b133b3c40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ef681ee68f0e49503bc7fb851a8a95b133b3c40"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7dfef5845a42894b26155ecc65844a03f1b4fb5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dfef5845a42894b26155ecc65844a03f1b4fb5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dfef5845a42894b26155ecc65844a03f1b4fb5e"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "343e51056f02ba5f4c5082cf71606b29a4936ec1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "patch": "@@ -1,3 +1,10 @@\n+2011-01-02  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/47028\n+\t* cfgexpand.c (gimple_expand_cfg): Insert entry edge\n+\tinsertions after parm_birth_insn instead of at the beginning\n+\tof first bb.\n+\n 2011-01-02  Mingjie Xing  <mingjie.xing@gmail.com>\n \n \t* doc/generic.texi: Remove duplicated \"@subsubsection Statements\"."}, {"sha": "13c63be12ef866c396ca246248ea3df72645d2ff", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "patch": "@@ -4085,7 +4085,19 @@ gimple_expand_cfg (void)\n       for (ei = ei_start (bb->succs); (e = ei_safe_edge (ei)); )\n \t{\n \t  if (e->insns.r)\n-\t    commit_one_edge_insertion (e);\n+\t    {\n+\t      /* Avoid putting insns before parm_birth_insn.  */\n+\t      if (e->src == ENTRY_BLOCK_PTR\n+\t\t  && single_succ_p (ENTRY_BLOCK_PTR)\n+\t\t  && parm_birth_insn)\n+\t\t{\n+\t\t  rtx insns = e->insns.r;\n+\t\t  e->insns.r = NULL_RTX;\n+\t\t  emit_insn_after_noloc (insns, parm_birth_insn, e->dest);\n+\t\t}\n+\t      else\n+\t\tcommit_one_edge_insertion (e);\n+\t    }\n \t  else\n \t    ei_next (&ei);\n \t}"}, {"sha": "09e47cfca258512f3c2437a7321969fae8af3d7a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "patch": "@@ -1,3 +1,8 @@\n+2011-01-02  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/47028\n+\t* gcc.dg/pr47028.c: New test.\n+\n 2011-01-02  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \t* objc.dg/protocol-forward-1.m: Removed TODO."}, {"sha": "3f80ff1c5e759354d7573eb0edbe11c63f56b2d7", "filename": "gcc/testsuite/gcc.dg/pr47028.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47028.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc470c243a8bbecdb92f2a7f4636f92db6fe0120/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47028.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47028.c?ref=bc470c243a8bbecdb92f2a7f4636f92db6fe0120", "patch": "@@ -0,0 +1,19 @@\n+/* PR rtl-optimization/47028 */\n+/* { dg-do run } */\n+/* { dg-options \"-O -foptimize-sibling-calls -fno-forward-propagate -fno-tree-copy-prop -fno-tree-dominator-opts\" } */\n+\n+int\n+fib (int n)\n+{\n+  if (n <= 1)\n+    return 1;\n+  return fib (n - 2) + fib (n - 1);\n+}\n+\n+int\n+main (void)\n+{\n+  if (fib (5) != 8)\n+    __builtin_abort ();\n+  return 0;\n+}"}]}