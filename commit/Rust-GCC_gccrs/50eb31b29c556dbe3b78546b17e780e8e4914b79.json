{"sha": "50eb31b29c556dbe3b78546b17e780e8e4914b79", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTBlYjMxYjI5YzU1NmRiZTNiNzg1NDZiMTdlNzgwZThlNDkxNGI3OQ==", "commit": {"author": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1994-02-04T16:29:24Z"}, "committer": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1994-02-04T16:29:24Z"}, "message": "Assume -muse-div-instruction -mno-check-zero-division\n\nFrom-SVN: r6482", "tree": {"sha": "dc1c898e47710b68c929bb7857b8fa5a8f64e63a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc1c898e47710b68c929bb7857b8fa5a8f64e63a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50eb31b29c556dbe3b78546b17e780e8e4914b79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50eb31b29c556dbe3b78546b17e780e8e4914b79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50eb31b29c556dbe3b78546b17e780e8e4914b79", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50eb31b29c556dbe3b78546b17e780e8e4914b79/comments", "author": null, "committer": null, "parents": [{"sha": "cf5f6f140926446028b057b4f894b30c1cec57db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf5f6f140926446028b057b4f894b30c1cec57db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf5f6f140926446028b057b4f894b30c1cec57db"}], "stats": {"total": 176, "additions": 98, "deletions": 78}, "files": [{"sha": "010944ab436ae4ef455e3ab9620eb3d89df9e574", "filename": "gcc/config/m88k/dgux.h", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50eb31b29c556dbe3b78546b17e780e8e4914b79/gcc%2Fconfig%2Fm88k%2Fdgux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50eb31b29c556dbe3b78546b17e780e8e4914b79/gcc%2Fconfig%2Fm88k%2Fdgux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fdgux.h?ref=50eb31b29c556dbe3b78546b17e780e8e4914b79", "patch": "@@ -3,7 +3,7 @@\n    Copyright (C) 1988, 1989, 1990, 1991 Free Software Foundation, Inc.\n    Contributed by Michael Tiemann (tiemann@mcc.com)\n    Enhanced by Michael Meissner (meissner@osf.org)\n-   Version 2 port by Tom Wood (Tom_Wood@NeXT.com)\n+   Version 2 port by Tom Wood (twood@pets.sps.mot.com)\n \n This file is part of GNU CC.\n \n@@ -22,16 +22,16 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n /* You're not seeing double!  To transition to dwarf debugging, both are\n-   supported.  The option -msvr4 and -mversion-03.00 specify (for DG/UX)\n-   `real' elf.  With these combinations, -g means dwarf.  */\n+   supported.  The option -msvr4 specifies elf.  With these combinations, \n+   -g means dwarf.  */\n /* DWARF_DEBUGGING_INFO defined in svr4.h.  */\n #define SDB_DEBUGGING_INFO\n #define PREFERRED_DEBUGGING_TYPE \\\n-  (GET_VERSION_0300_SYNTAX ? DWARF_DEBUG : SDB_DEBUG)\n-/* This controls a bug fix in cp-decl.c.\n-   For version 2.6, someone should figure out the right condition.  */\n-#define RMS_QUICK_HACK_1\n+  (TARGET_SVR4 ? DWARF_DEBUG : SDB_DEBUG)\n \n+#ifndef VERSION_INFO2\n+#define VERSION_INFO2   \"$Revision: 1.6 $\"\n+#endif\n #ifndef NO_BUGS\n #define AS_BUG_IMMEDIATE_LABEL\n /* The DG/UX 4.30 assembler doesn't accept the symbol `fcr63'.  */\n@@ -73,7 +73,7 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #undef\tCPP_PREDEFINES\n #define CPP_PREDEFINES \"-Dm88000 -Dm88k -Dunix -DDGUX -D__CLASSIFY_TYPE__=2\\\n-   -D__svr4__ -Asystem(unix) -Asystem(svr4) -Acpu(m88k) -Amachine(m88k)\"\n+   -D__svr4__ -Asystem(unix) -Acpu(m88k) -Amachine(m88k)\"\n \n /* If -m88100 is in effect, add -Dm88100; similarly for -m88110.\n    Here, the CPU_DEFAULT is assumed to be -m88000.  If not -ansi,\n@@ -90,7 +90,7 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n %{V} %{v:%{!V:-V}} %{pipe:%{!.s: - }\\\n %{msvr4:%{mversion-03.00:-KV3}%{!mversion-03.00:%{mversion-*:-KV%*}}}}\\\n %{!mlegend:%{mstandard:-Wc,off}}\\\n-%{mlegend:-Wc,-fix-bb,-h\\\"gcc-2.3.3\\\",-s\\\"%i\\\"\\\n+%{mlegend:-Wc,-fix-bb,-h\\\"gcc-\" VERSION_INFO2 \"\\\",-s\\\"%i\\\"\\\n %{traditional:,-lc}%{!traditional:,-lansi-c}\\\n %{mstandard:,-keep-std}\\\n %{mkeep-coff:,-keep-coff}\\\n@@ -125,27 +125,27 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \t\t\t  %{!ansi:%{traditional:/lib/values-Xt.o} \\\n \t\t\t   %{!traditional:/usr/lib/values-Xa.o}}}}}\"\n \n+#undef\tGPLUSPLUS_INCLUDE_DIR\n+#define GPLUSPLUS_INCLUDE_DIR \"/usr/opt/g++/lib/g++-include\"\n+\n /* Fast DG/UX version of profiler that does not require lots of\n    registers to be stored.  */\n #undef\tFUNCTION_PROFILER\n #define FUNCTION_PROFILER(FILE, LABELNO) \\\n   output_function_profiler (FILE, LABELNO, \"gcc.mcount\", 0)\n \n-/* DGUX V.4 isn't quite ELF--yet.  */\n-#undef  VERSION_0300_SYNTAX\n-#define VERSION_0300_SYNTAX (TARGET_SVR4 && m88k_version_0300)\n-\n-/* Same, but used before OVERRIDE_OPTIONS has been processed.  */\n-#define GET_VERSION_0300_SYNTAX \\\n-  (TARGET_SVR4 && m88k_version != 0 && strcmp (m88k_version, \"03.00\") >= 0)\n-\n /* Output the legend info for mxdb when debugging except if standard\n    debugging information only is explicitly requested.  */\n #undef  ASM_FIRST_LINE\n #define ASM_FIRST_LINE(FILE)\t\t\t\t\t\t\\\n   do {\t\t\t\t\t\t\t\t\t\\\n-    if (m88k_version)\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\t%s\\t \\\"%s\\\"\\n\", VERSION_ASM_OP, m88k_version);\t\\\n+    if (TARGET_SVR4)\t\t\t\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+\tif (TARGET_88110)\t\t\t\t\t\t\\\n+\t  fprintf (FILE, \"\\t%s\\t \\\"%s\\\"\\n\", VERSION_ASM_OP, \"04.00\");   \\\n+\telse\t\t\t\t\t\t\t\t\\\n+\t  fprintf (FILE, \"\\t%s\\t \\\"%s\\\"\\n\", VERSION_ASM_OP, \"03.00\");   \\\n+      }\t\t\t\t\t\t\t\t\t\\\n     if (write_symbols != NO_DEBUG\t\t\t\t\t\\\n \t&& ! (TARGET_STANDARD && ! TARGET_LEGEND))\t\t\t\\\n       {\t\t\t\t\t\t\t\t\t\\\n@@ -172,15 +172,15 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n    -mversion-STRING option used.  */\n #if !defined (CRT_BEGIN) && !defined (CRT_END)\n #undef\tINIT_SECTION_ASM_OP\n-#define INIT_SECTION_ASM_OP (VERSION_0300_SYNTAX\t\t\\\n-\t\t\t     ? \"section\\t .init,\\\"xa\\\"\"\t\\\n+#define INIT_SECTION_ASM_OP (TARGET_SVR4\t\t\t\\\n+\t\t\t     ? \"section\\t .init,\\\"xa\\\"\"\t\t\\\n \t\t\t     : \"section\\t .init,\\\"x\\\"\")\n #undef\tCTORS_SECTION_ASM_OP\n-#define CTORS_SECTION_ASM_OP (VERSION_0300_SYNTAX\t\t\\\n+#define CTORS_SECTION_ASM_OP (TARGET_SVR4\t\t\t\\\n \t\t\t      ? \"section\\t .ctors,\\\"aw\\\"\"\t\\\n \t\t\t      : \"section\\t .ctors,\\\"d\\\"\")\n #undef\tDTORS_SECTION_ASM_OP\n-#define DTORS_SECTION_ASM_OP (VERSION_0300_SYNTAX\t\t\\\n+#define DTORS_SECTION_ASM_OP (TARGET_SVR4\t\t\t\\\n \t\t\t      ? \"section\\t .dtors,\\\"aw\\\"\"\t\\\n \t\t\t      : \"section\\t .dtors,\\\"d\\\"\")\n #endif /* crtstuff.c */"}, {"sha": "1520589fba4d605debd16f667d9a6e6a517ce38b", "filename": "gcc/config/m88k/m88k.h", "status": "modified", "additions": 75, "deletions": 55, "changes": 130, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50eb31b29c556dbe3b78546b17e780e8e4914b79/gcc%2Fconfig%2Fm88k%2Fm88k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50eb31b29c556dbe3b78546b17e780e8e4914b79/gcc%2Fconfig%2Fm88k%2Fm88k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fm88k.h?ref=50eb31b29c556dbe3b78546b17e780e8e4914b79", "patch": "@@ -3,7 +3,7 @@\n    Copyright (C) 1988, 1989, 1990, 1991, 1993 Free Software Foundation, Inc.\n    Contributed by Michael Tiemann (tiemann@mcc.com)\n    Enhanced by Michael Meissner (meissner@osf.org)\n-   Version 2 port by Tom Wood (Tom_Wood@NeXT.com)\n+   Version 2 port by Tom Wood (twood@pets.sps.mot.com)\n \n This file is part of GNU CC.\n \n@@ -79,26 +79,37 @@ enum m88k_instruction {\n   m88k_oru_or\n };\n \n+/* Which processor to schedule for.  The elements of the enumeration\n+   must match exactly the cpu attribute in the m88k.md machine description. */\n+\n+enum processor_type {\n+  PROCESSOR_M88100,\n+  PROCESSOR_M88110,\n+  PROCESSOR_M88000,\n+};\n+\n+/* Recast the cpu class to be the cpu attribute.  */\n+#define m88k_cpu_attr ((enum attr_cpu)m88k_cpu)\n+\n /* External variables/functions defined in m88k.c.  */\n \n extern char *m88k_pound_sign;\n extern char *m88k_short_data;\n extern char *m88k_version;\n extern char m88k_volatile_code;\n \n-extern int m88k_gp_threshold;\n+extern unsigned m88k_gp_threshold;\n extern int m88k_prologue_done;\n extern int m88k_function_number;\n extern int m88k_fp_offset;\n extern int m88k_stack_size;\n extern int m88k_case_index;\n-extern int m88k_version_0300;\n \n extern struct rtx_def *m88k_compare_reg;\n extern struct rtx_def *m88k_compare_op0;\n extern struct rtx_def *m88k_compare_op1;\n \n-extern enum attr_cpu m88k_cpu;\n+extern enum processor_type m88k_cpu;\n \n extern int null_prologue ();\n extern int integer_ok_for_set ();\n@@ -157,6 +168,7 @@ extern char * reg_names[];\n #define MONITOR_GCC 0\n #endif\n \f\n+/*** Controlling the Compilation Driver, `gcc' ***/\n /* Show we can debug even without a frame pointer.  */\n #define CAN_DEBUG_WITHOUT_FP\n \n@@ -176,17 +188,23 @@ extern char * reg_names[];\n \n /* Names to predefine in the preprocessor for this target machine.\n    Redefined in m88kv3.h, m88kv4.h, m88kdgux.h, and m88kluna.h.  */\n-#define CPP_PREDEFINES \"-Dm88000 -Dm88k -Dunix -D__CLASSIFY_TYPE__=2 -Asystem(unix) -Acpu(m88k) -Amachine(m88k)\"\n+#define CPP_PREDEFINES \"-Dm88000 -Dm88k -Dunix -D__CLASSIFY_TYPE__=2\"\n \n #define TARGET_VERSION fprintf (stderr, \" (%s%s)\", \\\n \t\t\t\tVERSION_INFO1, VERSION_INFO2)\n \n /* Print subsidiary information on the compiler version in use.\n    Redefined in m88kv4.h, and m88kluna.h.  */\n #define VERSION_INFO1\t\"88open OCS/BCS, \"\n-#define VERSION_INFO2\t\"12/16/92\"\n-#define VERSION_STRING\tversion_string\n-#define\tTM_SCCS_ID\t\"@(#)m88k.h\t2.3.3.2 12/16/92 08:26:09\"\n+#ifndef VERSION_INFO2\n+#define VERSION_INFO2   \"$Revision: 1.15 $\"\n+#endif\n+#ifndef VERSION_STRING\n+#define VERSION_STRING  version_string\n+#define TM_RCS_ID      \"@(#)\" __FILE__ \" $Revision: 1.15 $ \" __DATE__\n+#else\n+#define TM_RCS_ID      \"@(#)\" __FILE__ \" \" VERSION_INFO2 \" \" __DATE__\n+#endif\n \n /* Run-time compilation parameters selecting different hardware subsets.  */\n \n@@ -286,33 +304,28 @@ extern char * reg_names[];\n     if ((target_flags & MASK_88000) == 0)\t\t\t\t     \\\n       target_flags |= CPU_DEFAULT;\t\t\t\t\t     \\\n \t\t\t\t\t\t\t\t\t     \\\n-    m88k_cpu = (TARGET_88000 ? CPU_M88000\t\t\t\t     \\\n-\t\t: (TARGET_88100 ? CPU_M88100 : CPU_M88110));\t\t     \\\n+    if (TARGET_88110)\t\t\t\t\t\t\t     \\\n+      {\t\t\t\t\t\t\t\t\t     \\\n+        target_flags |= MASK_USE_DIV;\t\t\t\t\t     \\\n+        target_flags &= ~MASK_CHECK_ZERO_DIV;\t\t\t\t     \\\n+      }\t\t\t\t\t\t\t\t\t     \\\n+      \t\t\t\t\t\t\t\t\t     \\\n+    m88k_cpu = (TARGET_88000 ? PROCESSOR_M88000\t\t\t\t     \\\n+\t\t: (TARGET_88100 ? PROCESSOR_M88100 : PROCESSOR_M88110));\t\t     \\\n \t\t\t\t\t\t\t\t\t     \\\n     if (TARGET_BIG_PIC)\t\t\t\t\t\t\t     \\\n       flag_pic = 2;\t\t\t\t\t\t\t     \\\n \t\t\t\t\t\t\t\t\t     \\\n     if ((target_flags & MASK_EITHER_LARGE_SHIFT) == MASK_EITHER_LARGE_SHIFT) \\\n       error (\"-mtrap-large-shift and -mhandle-large-shift are incompatible\");\\\n \t\t\t\t\t\t\t\t\t     \\\n-    m88k_version_0300 = (m88k_version != 0\t\t\t\t     \\\n-\t\t\t && strcmp (m88k_version, \"03.00\") >= 0);\t     \\\n-\t\t\t\t\t\t\t\t\t     \\\n-    if (VERSION_0300_SYNTAX)\t\t\t\t\t\t     \\\n+    if (TARGET_SVR4)\t\t\t\t\t\t     \t     \\\n       {\t\t\t\t\t\t\t\t\t     \\\n \tfor (i = 0; i < FIRST_PSEUDO_REGISTER; i++)\t\t\t     \\\n \t  reg_names[i]--;\t\t\t\t\t\t     \\\n \tm88k_pound_sign = \"#\";\t\t\t\t\t\t     \\\n-\tif (m88k_version == 0)\t\t\t\t\t\t     \\\n-\t  m88k_version = VERSION_0400_SYNTAX ? \"04.00\" : \"03.00\";\t     \\\n-\telse if (strcmp (m88k_version, \"03.00\") < 0)\t\t\t     \\\n-\t  error (\"Specified assembler version (%s) is less that 03.00\",\t     \\\n-\t\t m88k_version);\t\t\t\t\t\t     \\\n       }\t\t\t\t\t\t\t\t\t     \\\n \t\t\t\t\t\t\t\t\t     \\\n-    m88k_version_0300 = (m88k_version != 0\t\t\t\t     \\\n-\t\t\t && strcmp (m88k_version, \"03.00\") >= 0);\t     \\\n-\t\t\t\t\t\t\t\t\t     \\\n     if (m88k_short_data)\t\t\t\t\t\t     \\\n       {\t\t\t\t\t\t\t\t\t     \\\n \tchar *p = m88k_short_data;\t\t\t\t\t     \\\n@@ -325,6 +338,8 @@ extern char * reg_names[];\n \t      break;\t\t\t\t\t\t\t     \\\n \t    }\t\t\t\t\t\t\t\t     \\\n \tm88k_gp_threshold = atoi (m88k_short_data);\t\t\t     \\\n+\tif (m88k_gp_threshold > 0x7fffffff)\t\t\t\t     \\\n+\t  error (\"-mshort-data-%s is too large \", m88k_short_data);          \\\n \tif (flag_pic)\t\t\t\t\t\t\t     \\\n \t  error (\"-mshort-data-%s and PIC are incompatible\", m88k_short_data); \\\n       }\t\t\t\t\t\t\t\t\t     \\\n@@ -1229,11 +1244,16 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n /* #define HAVE_PRE_DECREMENT */\n /* #define HAVE_PRE_INCREMENT */\n \n-/* Recognize any constant value that is a valid address.  */\n+/* Recognize any constant value that is a valid address.\n+   When PIC, we do not accept an address that would require a scratch reg\n+   to load into a register.  */\n+\n #define CONSTANT_ADDRESS_P(X)   \\\n   (GET_CODE (X) == LABEL_REF || GET_CODE (X) == SYMBOL_REF\t\t\\\n-   || GET_CODE (X) == CONST_INT || GET_CODE (X) == CONST\t\t\\\n-   || GET_CODE (X) == HIGH)\n+   || GET_CODE (X) == CONST_INT || GET_CODE (X) == HIGH                 \\\n+   || (GET_CODE (X) == CONST                                            \\\n+       && ! (flag_pic && pic_address_needs_scratch (X))))\n+\n \n /* Maximum number of registers that can appear in a valid memory address.  */\n #define MAX_REGS_PER_ADDRESS 2\n@@ -1392,6 +1412,12 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n /* Nonzero if the constant value X is a legitimate general operand.\n    It is given that X satisfies CONSTANT_P or is a CONST_DOUBLE.  */\n #define LEGITIMATE_CONSTANT_P(X) (1)\n+\n+/* Define this, so that when PIC, reload won't try to reload invalid\n+   addresses which require two reload registers.  */\n+\n+#define LEGITIMATE_PIC_OPERAND_P(X)  (! pic_address_needs_scratch (X))\n+\n \f\n /*** Condition Code Information ***/\n \n@@ -1426,7 +1452,7 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n   {\"add_operand\", {SUBREG, REG, CONST_INT}},\t\t\t\t\\\n   {\"reg_or_bbx_mask_operand\", {SUBREG, REG, CONST_INT}},\t\t\\\n   {\"real_or_0_operand\", {SUBREG, REG, CONST_DOUBLE}},\t\t\t\\\n-  {\"reg_or_0_operand\", {SUBREG, REG, CONST_INT}},\t\t\t\\\n+  {\"reg_or_0_operand\", {SUBREG, REG, CONST_INT}},                       \\\n   {\"relop\", {EQ, NE, LT, LE, GE, GT, LTU, LEU, GEU, GTU}},\t\t\\\n   {\"even_relop\", {EQ, LT, GT, LTU, GTU}},\t\t\\\n   {\"odd_relop\", { NE, LE, GE, LEU, GEU}},\t\t\\\n@@ -1486,15 +1512,9 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n    in one reasonably fast instruction.  */\n #define MOVE_MAX 8\n \n-/* Define if operations between registers always perform the operation\n-   on the full register even if a narrower mode is specified.  */\n-#define WORD_REGISTER_OPERATIONS\n-\n-/* Define if loading in MODE, an integral mode narrower than BITS_PER_WORD\n-   will either zero-extend or sign-extend.  The value of this macro should\n-   be the code that says which one of the two operations is implicitly\n-   done, NIL if none.  */\n-#define LOAD_EXTEND_OP(MODE) ZERO_EXTEND\n+/* Define if normal loads of shorter-than-word items from memory clears\n+   the rest of the bigs in the register.  */\n+#define BYTE_LOADS_ZERO_EXTEND\n \n /* Zero if access to memory by bytes is faster.  */\n #define SLOW_BYTE_ACCESS 1\n@@ -1659,12 +1679,6 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n \n /* Control the assembler format that we output.  */\n \n-/* Which assembler syntax.  Redefined in m88kdgux.h.  */\n-#define VERSION_0300_SYNTAX TARGET_SVR4\n-\n-/* At some point, m88kv4.h will redefine this.  */\n-#define VERSION_0400_SYNTAX 0\n-\n /* Allow pseudo-ops to be overridden.  Override these in svr[34].h.  */\n #undef\tINT_ASM_OP\n #undef\tASCII_DATA_ASM_OP\n@@ -1687,10 +1701,10 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n #define DATA_SECTION_ASM_OP\t\"data\"\n \n /* Other sections.  */\n-#define CONST_SECTION_ASM_OP (VERSION_0300_SYNTAX\t\t\\\n+#define CONST_SECTION_ASM_OP (TARGET_SVR4\t\t\t\\\n \t\t\t      ? \"section\\t .rodata,\\\"a\\\"\"\t\\\n \t\t\t      : \"section\\t .rodata,\\\"x\\\"\")\n-#define TDESC_SECTION_ASM_OP (VERSION_0300_SYNTAX\t\t\\\n+#define TDESC_SECTION_ASM_OP (TARGET_SVR4\t\t\t\\\n \t\t\t      ? \"section\\t .tdesc,\\\"a\\\"\"\t\\\n \t\t\t      : \"section\\t .tdesc,\\\"x\\\"\")\n \n@@ -1784,8 +1798,13 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n \n #define ASM_FIRST_LINE(FILE)\t\t\t\t\t\t\\\n   do {\t\t\t\t\t\t\t\t\t\\\n-    if (m88k_version)\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\t%s\\t \\\"%s\\\"\\n\", VERSION_ASM_OP, m88k_version);\t\\\n+    if (TARGET_SVR4)\t\t\t\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+\tif (TARGET_88110)\t\t\t\t\t\t\\\n+\t  fprintf (FILE, \"\\t%s\\t \\\"%s\\\"\\n\", VERSION_ASM_OP, \"04.00\");   \\\n+\telse\t\t\t\t\t\t\t\t\\\n+\t  fprintf (FILE, \"\\t%s\\t \\\"%s\\\"\\n\", VERSION_ASM_OP, \"03.00\");   \\\n+      }\t\t\t\t\t\t\t\t\t\\\n   } while (0)\n \n /* Override svr[34].h.  */\n@@ -1797,10 +1816,7 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n #undef\tASM_FILE_END\n \n #define ASM_OUTPUT_SOURCE_FILENAME(FILE, NAME) \\\n-  do {\tfprintf (FILE, \"\\t%s\\t \", FILE_ASM_OP);\t\t\t\\\n-\toutput_quoted_string (FILE, NAME);\t\t\t\\\n-\tfprintf (FILE, \"\\n\");\t\t\t\t\t\\\n-  } while (0)\n+  fprintf (FILE, \"\\t%s\\t \\\"%s\\\"\\n\", FILE_ASM_OP, NAME)\n \n #ifdef SDB_DEBUGGING_INFO\n #define ASM_OUTPUT_SOURCE_LINE(FILE, LINE)\t\t\t\\\n@@ -1974,7 +1990,7 @@ do {\t\t\t\t\t\t\t\t\t \\\n #undef\tASM_OUTPUT_LABELREF\n #define ASM_OUTPUT_LABELREF(FILE,NAME)\t\t\t\\\n   {\t\t\t\t\t\t\t\\\n-    if (! TARGET_NO_UNDERSCORES && ! VERSION_0300_SYNTAX) \\\n+    if (!TARGET_NO_UNDERSCORES && !TARGET_SVR4) \t\\\n       fputc ('_', FILE);\t\t\t\t\\\n     fputs (NAME, FILE);\t\t\t\t\t\\\n   }\n@@ -1986,11 +2002,11 @@ do {\t\t\t\t\t\t\t\t\t \\\n #undef ASM_OUTPUT_INTERNAL_LABEL\n #ifdef AS_BUG_DOT_LABELS /* The assembler requires a declaration of local.  */\n #define ASM_OUTPUT_INTERNAL_LABEL(FILE,PREFIX,NUM)\t\t\t\\\n-  fprintf (FILE, VERSION_0300_SYNTAX ? \".%s%d:\\n\\t%s\\t .%s%d\\n\" : \"@%s%d:\\n\", \\\n+  fprintf (FILE, TARGET_SVR4 ? \".%s%d:\\n\\t%s\\t .%s%d\\n\" : \"@%s%d:\\n\", \\\n \t   PREFIX, NUM, INTERNAL_ASM_OP, PREFIX, NUM)\n #else\n #define ASM_OUTPUT_INTERNAL_LABEL(FILE,PREFIX,NUM)\t\t\t\\\n-  fprintf (FILE, VERSION_0300_SYNTAX ? \".%s%d:\\n\" : \"@%s%d:\\n\", PREFIX, NUM)\n+  fprintf (FILE, TARGET_SVR4 ? \".%s%d:\\n\" : \"@%s%d:\\n\", PREFIX, NUM)\n #endif /* AS_BUG_DOT_LABELS */\n \n /* This is how to store into the string LABEL\n@@ -2002,7 +2018,7 @@ do {\t\t\t\t\t\t\t\t\t \\\n \n #undef ASM_GENERATE_INTERNAL_LABEL\n #define ASM_GENERATE_INTERNAL_LABEL(LABEL,PREFIX,NUM)\t\t\t\\\n-  sprintf (LABEL, VERSION_0300_SYNTAX ? \"*.%s%d\" : \"*@%s%d\", PREFIX, NUM)\n+  sprintf (LABEL, TARGET_SVR4 ? \"*.%s%d\" : \"*@%s%d\", PREFIX, NUM)\n \n /* Internal macro to get a single precision floating point value into\n    an int, so we can print it's value in hex.  */\n@@ -2502,8 +2518,7 @@ sdata_section ()\t\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n       if (! flag_writable_strings)\t\t\t\t\t\\\n \tconst_section ();\t\t\t\t\t\t\\\n-      else if (m88k_gp_threshold > 0\t\t\t\t\t\\\n-\t       && TREE_STRING_LENGTH (DECL) <= m88k_gp_threshold)\t\\\n+      else if ( TREE_STRING_LENGTH (DECL) <= m88k_gp_threshold)\t\t\\\n \tsdata_section ();\t\t\t\t\t\t\\\n       else\t\t\t\t\t\t\t\t\\\n \tdata_section ();\t\t\t\t\t\t\\\n@@ -2565,3 +2580,8 @@ sdata_section ()\t\t\t\t\t\t\t\\\n \n /* Print a memory address as an operand to reference that memory location.  */\n #define PRINT_OPERAND_ADDRESS(FILE, ADDR) print_operand_address (FILE, ADDR)\n+\n+/* This says not to strength reduce the addr calculations within loops\n+   (otherwise it does not take advantage of m88k scaled loads and stores */\n+\n+#define DONT_REDUCE_ADDR"}]}