{"sha": "a5586c386574da2397048bf12b0793a23db405a7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTU1ODZjMzg2NTc0ZGEyMzk3MDQ4YmYxMmIwNzkzYTIzZGI0MDVhNw==", "commit": {"author": {"name": "Thomas Fitzsimmons", "email": "fitzsim@redhat.com", "date": "2003-10-08T23:38:45Z"}, "committer": {"name": "Thomas Fitzsimmons", "email": "fitzsim@gcc.gnu.org", "date": "2003-10-08T23:38:45Z"}, "message": "2003-10-08  Thomas Fitzsimmons  <fitzsim@redhat.com>\n\n\t* gnu/java/awt/peer/gtk/GtkButtonPeer.java,\n\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkButtonPeer.c\n\t(gtkSetFont): Handle BOLD and ITALIC style specifiers.\n\t(gtkWidgetSetForeground): New method.\n\t* gnu/java/awt/peer/gtk/GtkComponentPeer.java,\n\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkComponentPeer.c\n\t(gtkWidgetSetBackground, gtkWidgetSetForeground): New methods.\n\t(setBackground, setForeground): Implement.\n\t* gnu/java/awt/peer/gtk/GtkTextAreaPeer.java,\n\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkTextAreaPeer.c\n\t(gtkSetFont): Handle BOLD and ITALIC style specifiers.\n\t* gnu/java/awt/peer/gtk/GtkTextFieldPeer.java,\n\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkTextFieldPeer.c: Likewise.\n\t* jni/gtk-peer/gnu_java_awt_peer_gtk_GdkGraphics.c (drawString):\n\tPosition PangoLayout relative to text's baseline.\n\t* jni/gtk-peer/gtkpeer.h: Define AWT font style constants.\n\n\t* java/awt/FlowLayout.java (layoutContainer): Fix offset problem\n\tfor CENTER and RIGHT alignments.\n\nFrom-SVN: r72246", "tree": {"sha": "76a4f1fc8f638f10480fcb4655420078f47c600b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76a4f1fc8f638f10480fcb4655420078f47c600b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5586c386574da2397048bf12b0793a23db405a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5586c386574da2397048bf12b0793a23db405a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5586c386574da2397048bf12b0793a23db405a7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5586c386574da2397048bf12b0793a23db405a7/comments", "author": null, "committer": null, "parents": [{"sha": "769e49eb03b412604d9909b9e9c8ab4a87703dd1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/769e49eb03b412604d9909b9e9c8ab4a87703dd1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/769e49eb03b412604d9909b9e9c8ab4a87703dd1"}], "stats": {"total": 186, "additions": 160, "deletions": 26}, "files": [{"sha": "322cbf28e9224d150c247c2a5f39c0530e3bfd99", "filename": "libjava/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -1,3 +1,25 @@\n+2003-10-08  Thomas Fitzsimmons  <fitzsim@redhat.com>\n+\n+\t* gnu/java/awt/peer/gtk/GtkButtonPeer.java,\n+\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkButtonPeer.c\n+\t(gtkSetFont): Handle BOLD and ITALIC style specifiers.\n+\t(gtkWidgetSetForeground): New method.\n+\t* gnu/java/awt/peer/gtk/GtkComponentPeer.java,\n+\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkComponentPeer.c\n+\t(gtkWidgetSetBackground, gtkWidgetSetForeground): New methods.\n+\t(setBackground, setForeground): Implement.\n+\t* gnu/java/awt/peer/gtk/GtkTextAreaPeer.java,\n+\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkTextAreaPeer.c\n+\t(gtkSetFont): Handle BOLD and ITALIC style specifiers.\n+\t* gnu/java/awt/peer/gtk/GtkTextFieldPeer.java,\n+\tjni/gtk-peer/gnu_java_awt_peer_gtk_GtkTextFieldPeer.c: Likewise.\n+\t* jni/gtk-peer/gnu_java_awt_peer_gtk_GdkGraphics.c (drawString):\n+\tPosition PangoLayout relative to text's baseline.\n+\t* jni/gtk-peer/gtkpeer.h: Define AWT font style constants.\n+\n+\t* java/awt/FlowLayout.java (layoutContainer): Fix offset problem\n+\tfor CENTER and RIGHT alignments.\n+\n 2003-10-08  Michael Koch  <konqueror@gmx.de>\n \n \t* java/security/Security.java: Reformated."}, {"sha": "1b057507b02d615c0db78dadd547af0c558a5b75", "filename": "libjava/gnu/java/awt/peer/gtk/GtkButtonPeer.java", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkButtonPeer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkButtonPeer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkButtonPeer.java?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -51,7 +51,8 @@ public class GtkButtonPeer extends GtkComponentPeer\n {\n   native void create ();\n \n-  native void gtkSetFont(String xlfd, int size);\n+  native void gtkSetFont(String name, int style, int size);\n+  native void gtkWidgetSetForeground (int red, int green, int blue);\n \n   public GtkButtonPeer (Button b)\n   {\n@@ -95,6 +96,6 @@ public void getArgs (Component component, GtkArgList args)\n \n   public void setFont (Font f)\n   {\n-    gtkSetFont(f.getName(), f.getSize());\n+    gtkSetFont(f.getName(), f.getStyle(), f.getSize());\n   }\n }"}, {"sha": "f3676f3a7aaff7924fb967959bb87762a418dfa8", "filename": "libjava/gnu/java/awt/peer/gtk/GtkComponentPeer.java", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -86,6 +86,8 @@ public class GtkComponentPeer extends GtkGenericPeer\n   native void gtkWidgetGetDimensions(int[] dim);\n   native void gtkWidgetGetLocationOnScreen(int[] point);\n   native void gtkWidgetSetCursor (int type);\n+  native void gtkWidgetSetBackground (int red, int green, int blue);\n+  native void gtkWidgetSetForeground (int red, int green, int blue);\n \n   void create ()\n   {\n@@ -114,12 +116,10 @@ protected GtkComponentPeer (Component awtComponent)\n \n       connectHooks ();\n \n-      if (awtComponent.getForeground () == null)\n-\tawtComponent.setForeground (getForeground ());\n-      if (awtComponent.getBackground () == null)\n-\tawtComponent.setBackground (getBackground ());\n-      //        if (c.getFont () == null)\n-      //  \tc.setFont (cp.getFont ());\n+      if (awtComponent.getForeground () != null)\n+\tsetForeground (awtComponent.getForeground ());\n+      if (awtComponent.getBackground () != null)\n+\tsetBackground (awtComponent.getBackground ());\n       if (awtComponent.getFont() != null)\n \tsetFont(awtComponent.getFont());\n \n@@ -276,7 +276,7 @@ public void reshape (int x, int y, int width, int height)\n \n   public void setBackground (Color c) \n   {\n-    // System.out.println (\"setBackground [UNIMPLEMENTED\");\n+    gtkWidgetSetBackground (c.getRed(), c.getGreen(), c.getBlue());\n   }\n \n   native public void setNativeBounds (int x, int y, int width, int height);\n@@ -314,7 +314,7 @@ public void setFont (Font f)\n \n   public void setForeground (Color c) \n   {\n-    // System.out.println (\"setForeground [UNIMPLEMENTED\");\n+    gtkWidgetSetForeground (c.getRed(), c.getGreen(), c.getBlue());\n   }\n \n   public Color getForeground ()"}, {"sha": "c38207c90cb39d1d90c016bba8e35bbb912a775d", "filename": "libjava/gnu/java/awt/peer/gtk/GtkTextAreaPeer.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkTextAreaPeer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkTextAreaPeer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkTextAreaPeer.java?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -48,7 +48,7 @@ public class GtkTextAreaPeer extends GtkTextComponentPeer\n {\n   native void create (int scrollbarVisibility);\n \n-  native void gtkSetFont(String xlfd, int size);\n+  native void gtkSetFont(String name, int style, int size);\n \n   void create ()\n   {\n@@ -106,6 +106,6 @@ public void insertText (String str, int pos)\n \n   public void setFont (Font f)\n   {\n-    gtkSetFont(f.getName(), f.getSize());\n+    gtkSetFont(f.getName(), f.getStyle(), f.getSize());\n   }\n }"}, {"sha": "98f55d0717c42ba7d0d8cd23d0cb226b375c9b27", "filename": "libjava/gnu/java/awt/peer/gtk/GtkTextFieldPeer.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkTextFieldPeer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkTextFieldPeer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkTextFieldPeer.java?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -55,7 +55,7 @@ public class GtkTextFieldPeer extends GtkTextComponentPeer\n \n   native void gtkEntryGetSize (int dims[]);\n \n-  native void gtkSetFont(String xlfd, int size);\n+  native void gtkSetFont(String name, int style, int size);\n \n   public GtkTextFieldPeer (TextField tf)\n   {\n@@ -104,7 +104,7 @@ public void setEchoCharacter (char c)\n \n   public void setFont (Font f)\n   {\n-    gtkSetFont(f.getName(), f.getSize());\n+    gtkSetFont(f.getName(), f.getStyle(), f.getSize());\n   }\n \n   public void handleEvent (AWTEvent e)"}, {"sha": "d26b8d13c2bc5215427ff1cfc570e8ebe050e7ab", "filename": "libjava/java/awt/FlowLayout.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjava%2Fawt%2FFlowLayout.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjava%2Fawt%2FFlowLayout.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fawt%2FFlowLayout.java?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -205,9 +205,9 @@ else if (align == TRAILING)\n \t    if (myalign == LEFT)\n \t      x = ins.left + hgap;\n \t    else if (myalign == CENTER)\n-\t      x = (d.width - new_w) / 2;\n+\t      x = ins.left + (d.width - new_w) / 2 + hgap;\n \t    else\n-\t      x = d.width - new_w;\n+\t      x = ins.left + (d.width - new_w) + hgap;\n \n \t    for (int k = i; k < j; ++k)\n \t      {"}, {"sha": "713d594ccd78edc54a4a81aea4515de0b6c58f7b", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GdkGraphics.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GdkGraphics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GdkGraphics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GdkGraphics.c?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -193,9 +193,11 @@ JNIEXPORT void JNICALL Java_gnu_java_awt_peer_gtk_GdkGraphics_drawString\n   struct graphics *g;\n   const char *cstr;\n   const char *font_name;\n+  int baseline_y;\n   PangoFontDescription *font_desc;\n   PangoContext *context;\n   PangoLayout *layout;\n+  PangoLayoutIter *iter;\n \n   g = (struct graphics *) NSA_GET_PTR (env, obj);\n \n@@ -213,11 +215,15 @@ JNIEXPORT void JNICALL Java_gnu_java_awt_peer_gtk_GdkGraphics_drawString\n   layout = pango_layout_new (context);\n \n   pango_layout_set_text (layout, cstr, -1);\n+  iter = pango_layout_get_iter (layout);\n+\n+  baseline_y = pango_layout_iter_get_baseline (iter);\n \n   gdk_draw_layout (g->drawable, g->gc, \n-  \t\t   x + g->x_offset, y + g->y_offset, layout);\n+  \t\t   x + g->x_offset, y + g->y_offset - (baseline_y / PANGO_SCALE), layout);\n \n   pango_font_description_free (font_desc);\n+  pango_layout_iter_free (iter);\n \n   gdk_threads_leave ();\n "}, {"sha": "a52f54ce35ffb39d367b6a93b5d86403e7e8b0d4", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkButtonPeer.c", "status": "modified", "additions": 37, "deletions": 3, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkButtonPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkButtonPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkButtonPeer.c?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -53,7 +53,7 @@ JNIEXPORT void JNICALL Java_gnu_java_awt_peer_gtk_GtkButtonPeer_create\n \n JNIEXPORT void JNICALL \n Java_gnu_java_awt_peer_gtk_GtkButtonPeer_gtkSetFont\n-  (JNIEnv *env, jobject obj, jstring jname, jint size)\n+  (JNIEnv *env, jobject obj, jstring name, jint style, jint size)\n {\n   const char *font_name;\n   void *ptr;\n@@ -69,18 +69,52 @@ Java_gnu_java_awt_peer_gtk_GtkButtonPeer_gtkSetFont\n   if (!label)\n       return;\n \n-  font_name = (*env)->GetStringUTFChars (env, jname, NULL);\n+  font_name = (*env)->GetStringUTFChars (env, name, NULL);\n \n   gdk_threads_enter();\n \n   font_desc = pango_font_description_from_string (font_name);\n   pango_font_description_set_size (font_desc, size * PANGO_SCALE);\n \n+  if (style & AWT_STYLE_BOLD)\n+    pango_font_description_set_weight (font_desc, PANGO_WEIGHT_BOLD);\n+\n+  if (style & AWT_STYLE_ITALIC)\n+    pango_font_description_set_style (font_desc, PANGO_STYLE_OBLIQUE);\n+\n   gtk_widget_modify_font (GTK_WIDGET(label), font_desc);\n \n   pango_font_description_free (font_desc);\n \n   gdk_threads_leave();\n \n-  (*env)->ReleaseStringUTFChars (env, jname, font_name);\n+  (*env)->ReleaseStringUTFChars (env, name, font_name);\n+}\n+\n+JNIEXPORT void JNICALL \n+Java_gnu_java_awt_peer_gtk_GtkButtonPeer_gtkWidgetSetForeground\n+  (JNIEnv *env, jobject obj, jint red, jint green, jint blue)\n+{\n+  GdkColor color;\n+  GtkWidget *label;\n+  void *ptr;\n+\n+  ptr = NSA_GET_PTR (env, obj);\n+\n+  color.red = (red / 255.0) * 65535;\n+  color.green = (green / 255.0) * 65535;\n+  color.blue = (blue / 255.0) * 65535;\n+\n+  gdk_threads_enter ();\n+\n+  label = gtk_bin_get_child (GTK_BIN(ptr));\n+\n+  if (!label)\n+      return;\n+\n+  gtk_widget_modify_fg (label, GTK_STATE_NORMAL, &color);\n+  gtk_widget_modify_fg (label, GTK_STATE_ACTIVE, &color);\n+  gtk_widget_modify_fg (label, GTK_STATE_PRELIGHT, &color);\n+\n+  gdk_threads_leave ();\n }"}, {"sha": "98e8e8cbe9f290723fdb21686a117848b68f4bdd", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkComponentPeer.c", "status": "modified", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkComponentPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkComponentPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkComponentPeer.c?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -276,6 +276,61 @@ Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkWidgetGetForeground\n   return array;\n }\n \n+JNIEXPORT void JNICALL \n+Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkWidgetSetBackground\n+  (JNIEnv *env, jobject obj, jint red, jint green, jint blue)\n+{\n+  GdkColor normal_color;\n+  GdkColor active_color;\n+  GtkWidget *widget;\n+  void *ptr;\n+\n+  ptr = NSA_GET_PTR (env, obj);\n+\n+  normal_color.red = (red / 255.0) * 65535;\n+  normal_color.green = (green / 255.0) * 65535;\n+  normal_color.blue = (blue / 255.0) * 65535;\n+\n+  /* This calculation only approximates the active colors produced by\n+     Sun's AWT. */\n+  active_color.red = 0.85 * (red / 255.0) * 65535;\n+  active_color.green = 0.85 * (green / 255.0) * 65535;\n+  active_color.blue = 0.85 * (blue / 255.0) * 65535;\n+\n+  gdk_threads_enter ();\n+\n+  widget = GTK_WIDGET (ptr);\n+\n+  gtk_widget_modify_bg (widget, GTK_STATE_NORMAL, &normal_color);\n+  gtk_widget_modify_bg (widget, GTK_STATE_ACTIVE, &active_color);\n+  gtk_widget_modify_bg (widget, GTK_STATE_PRELIGHT, &normal_color);\n+\n+  gdk_threads_leave ();\n+}\n+\n+JNIEXPORT void JNICALL \n+Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkWidgetSetForeground\n+  (JNIEnv *env, jobject obj, jint red, jint green, jint blue)\n+{\n+  GdkColor color;\n+  GtkWidget *widget;\n+  void *ptr;\n+\n+  ptr = NSA_GET_PTR (env, obj);\n+\n+  color.red = (red / 255.0) * 65535;\n+  color.green = (green / 255.0) * 65535;\n+  color.blue = (blue / 255.0) * 65535;\n+\n+  gdk_threads_enter ();\n+\n+  widget = GTK_WIDGET (ptr);\n+\n+  gtk_widget_modify_fg (widget, GTK_STATE_NORMAL, &color);\n+\n+  gdk_threads_leave ();\n+}\n+\n void\n set_visible (GtkWidget *widget, jboolean visible)\n {"}, {"sha": "2964dc377012445bb3e56a90b944541864ed692f", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkTextAreaPeer.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkTextAreaPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkTextAreaPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkTextAreaPeer.c?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -158,7 +158,7 @@ Java_gnu_java_awt_peer_gtk_GtkTextAreaPeer_replaceRange\n \n JNIEXPORT void JNICALL\n Java_gnu_java_awt_peer_gtk_GtkTextAreaPeer_gtkSetFont\n-  (JNIEnv *env, jobject obj, jstring jname, jint size)\n+  (JNIEnv *env, jobject obj, jstring name, jint style, jint size)\n {\n   const char *font_name;\n   void *ptr;\n@@ -169,18 +169,24 @@ Java_gnu_java_awt_peer_gtk_GtkTextAreaPeer_gtkSetFont\n \n   text = GTK_WIDGET (TEXT_FROM_SW (ptr));\n \n-  font_name = (*env)->GetStringUTFChars (env, jname, NULL);\n+  font_name = (*env)->GetStringUTFChars (env, name, NULL);\n \n   gdk_threads_enter();\n \n   font_desc = pango_font_description_from_string (font_name);\n   pango_font_description_set_size (font_desc, size * PANGO_SCALE);\n \n+  if (style & AWT_STYLE_BOLD)\n+    pango_font_description_set_weight (font_desc, PANGO_WEIGHT_BOLD);\n+\n+  if (style & AWT_STYLE_ITALIC)\n+    pango_font_description_set_style (font_desc, PANGO_STYLE_OBLIQUE);\n+\n   gtk_widget_modify_font (GTK_WIDGET(text), font_desc);\n \n   pango_font_description_free (font_desc);\n \n   gdk_threads_leave();\n \n-  (*env)->ReleaseStringUTFChars (env, jname, font_name);\n+  (*env)->ReleaseStringUTFChars (env, name, font_name);\n }"}, {"sha": "a7bbb02f8a943a6bdf31295d6e5f524465a61946", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkTextFieldPeer.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkTextFieldPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkTextFieldPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkTextFieldPeer.c?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -102,7 +102,7 @@ Java_gnu_java_awt_peer_gtk_GtkTextFieldPeer_setEchoChar\n \n JNIEXPORT void JNICALL\n Java_gnu_java_awt_peer_gtk_GtkTextFieldPeer_gtkSetFont\n-  (JNIEnv *env, jobject obj, jstring jname, jint size)\n+  (JNIEnv *env, jobject obj, jstring name, jint style, jint size)\n {\n   const char *font_name;\n   void *ptr;\n@@ -112,18 +112,24 @@ Java_gnu_java_awt_peer_gtk_GtkTextFieldPeer_gtkSetFont\n   ptr = NSA_GET_PTR (env, obj);\n \n   entry = GTK_WIDGET (ptr);\n-  font_name = (*env)->GetStringUTFChars (env, jname, NULL);\n+  font_name = (*env)->GetStringUTFChars (env, name, NULL);\n \n   gdk_threads_enter();\n \n   font_desc = pango_font_description_from_string (font_name);\n   pango_font_description_set_size (font_desc, size * PANGO_SCALE);\n \n+  if (style & AWT_STYLE_BOLD)\n+    pango_font_description_set_weight (font_desc, PANGO_WEIGHT_BOLD);\n+\n+  if (style & AWT_STYLE_ITALIC)\n+    pango_font_description_set_style (font_desc, PANGO_STYLE_OBLIQUE);\n+\n   gtk_widget_modify_font (GTK_WIDGET(entry), font_desc);\n \n   pango_font_description_free (font_desc);\n \n   gdk_threads_leave();\n \n-  (*env)->ReleaseStringUTFChars (env, jname, font_name);\n+  (*env)->ReleaseStringUTFChars (env, name, font_name);\n }"}, {"sha": "b76de30a4417f0cf2bdfd0436acf13b8409dbb28", "filename": "libjava/jni/gtk-peer/gtkpeer.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgtkpeer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5586c386574da2397048bf12b0793a23db405a7/libjava%2Fjni%2Fgtk-peer%2Fgtkpeer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgtkpeer.h?ref=a5586c386574da2397048bf12b0793a23db405a7", "patch": "@@ -347,6 +347,10 @@ struct graphics\n #define AWT_FOCUS_LOST 1004\n #define AWT_FOCUS_GAINED 1005\n \n+#define AWT_STYLE_PLAIN  0\n+#define AWT_STYLE_BOLD   1\n+#define AWT_STYLE_ITALIC 2\n+\n extern jmethodID setBoundsCallbackID;\n \n extern jmethodID postActionEventID;"}]}