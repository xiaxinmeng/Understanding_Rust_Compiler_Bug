{"sha": "56fc943329299ed3b53ddefd9bcdec997ee9cc71", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTZmYzk0MzMyOTI5OWVkM2I1M2RkZWZkOWJjZGVjOTk3ZWU5Y2M3MQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-03-01T19:56:14Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-03-01T19:56:14Z"}, "message": "compiler: avoid crashing on bad self-referential type\n    \n    The compiler was crashing partway through emitting an error for a bad\n    self-referential struct type (which refers to one of its own fields\n    via an unsafe.Offset expression). Tweak the offset logic to check for\n    this class of type error and exit cleanly.\n    \n    Fixes golang/go#24180\n    \n    Reviewed-on: https://go-review.googlesource.com/97855\n\nFrom-SVN: r258112", "tree": {"sha": "642557ee91807bd6032e46f1e207e9ca9f92ddb7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/642557ee91807bd6032e46f1e207e9ca9f92ddb7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/56fc943329299ed3b53ddefd9bcdec997ee9cc71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56fc943329299ed3b53ddefd9bcdec997ee9cc71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56fc943329299ed3b53ddefd9bcdec997ee9cc71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56fc943329299ed3b53ddefd9bcdec997ee9cc71/comments", "author": null, "committer": null, "parents": [{"sha": "eedaaaf7d7892011245b1e2054ca917c6d81c213", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eedaaaf7d7892011245b1e2054ca917c6d81c213", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eedaaaf7d7892011245b1e2054ca917c6d81c213"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "dee5f671184e97cac03391847652e2745fbe8184", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56fc943329299ed3b53ddefd9bcdec997ee9cc71/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56fc943329299ed3b53ddefd9bcdec997ee9cc71/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=56fc943329299ed3b53ddefd9bcdec997ee9cc71", "patch": "@@ -1,4 +1,4 @@\n-821960465883fbdd96568f2325f55ee4b05de1cb\n+262d629b1592f681fef396166a671e46cdb31230\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "109d6b469316e37feef221b7e625984ee205cc72", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56fc943329299ed3b53ddefd9bcdec997ee9cc71/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56fc943329299ed3b53ddefd9bcdec997ee9cc71/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=56fc943329299ed3b53ddefd9bcdec997ee9cc71", "patch": "@@ -8224,6 +8224,11 @@ Builtin_call_expression::do_numeric_constant_value(Numeric_constant* nc) const\n             return false;\n           if (st->named_type() != NULL)\n             st->named_type()->convert(this->gogo_);\n+          if (st->is_error_type())\n+            {\n+              go_assert(saw_errors());\n+              return false;\n+            }\n           int64_t offset;\n           this->seen_ = true;\n           bool ok = st->struct_type()->backend_field_offset(this->gogo_,"}]}