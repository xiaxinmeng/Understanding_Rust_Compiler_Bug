{"sha": "cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2RmYTJiMjRkMjQ5NmYzMDRjNjViZjQ4YTZiYzRmNjZiYmMyZTY5OA==", "commit": {"author": {"name": "Ville Voutilainen", "email": "ville@gcc.gnu.org", "date": "2016-05-28T08:22:15Z"}, "committer": {"name": "Ville Voutilainen", "email": "ville@gcc.gnu.org", "date": "2016-05-28T08:22:15Z"}, "message": "Revert the attempted fix for c++/69855, it breaks bootstrap.\n\nFrom-SVN: r236844", "tree": {"sha": "2f388984bf65046a29d0ad233d65a85e6403373f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f388984bf65046a29d0ad233d65a85e6403373f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698/comments", "author": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3c82ff9a9f831481d45a370476743d73f6704a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3c82ff9a9f831481d45a370476743d73f6704a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3c82ff9a9f831481d45a370476743d73f6704a3"}], "stats": {"total": 73, "additions": 5, "deletions": 68}, "files": [{"sha": "cbd520955751dea6ec833bc43e8ee91ef950b2c7", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698", "patch": "@@ -929,24 +929,6 @@ pushdecl_maybe_friend_1 (tree x, bool is_friend)\n \t      DECL_ANTICIPATED (t) = 1;\n \t      DECL_HIDDEN_FRIEND_P (t) = 1;\n \t    }\n-\n-\t  if (TREE_CODE (x) == FUNCTION_DECL\n-\t      && DECL_LOCAL_FUNCTION_P (x)\n-\t      && !DECL_OMP_DECLARE_REDUCTION_P (x)\n-\t      && !type_dependent_expression_p (x))\n-\t    {\n-\t      /* PR c++/69855, a local function declaration\n-\t\t is stripped from template info and pushed to\n-\t\t the local scope as a hidden declaration. This\n-\t\t allows ill-formed overloads even in other scopes\n-\t\t to be diagnosed both at the local declaration site\n-\t\t and after it.  */\n-\t      tree t2 = copy_decl (t);\n-\t      DECL_USE_TEMPLATE (t2) = 0;\n-\t      DECL_TEMPLATE_INFO (t2) = NULL_TREE;\n-\t      DECL_ANTICIPATED (t2) = 1;\n-\t      push_overloaded_decl (t2, PUSH_GLOBAL, is_friend);\n-\t    }\n \t}\n \n       if (t != x || DECL_FUNCTION_TEMPLATE_P (t))"}, {"sha": "dc2d73370325c140e1fb6733f1595e080384e159", "filename": "gcc/testsuite/g++.dg/overload/69855.C", "status": "removed", "additions": 0, "deletions": 44, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3c82ff9a9f831481d45a370476743d73f6704a3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2F69855.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3c82ff9a9f831481d45a370476743d73f6704a3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2F69855.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2F69855.C?ref=f3c82ff9a9f831481d45a370476743d73f6704a3", "patch": "@@ -1,44 +0,0 @@\n-// PR c++/69855\n-// { dg-do compile }\n-\n-int get();\n-void f() {\n-  char get(); // { dg-error \"ambiguating\" }\n-}\n-\n-int get2();\n-char get2(int);\n-void f2() {\n-  char get2(); // { dg-error \"ambiguating\" }\n-}\n-\n-char get3(int);\n-void f3() {\n-  char get3();\n-}\n-\n-void f4() {\n-  char get4();\n-}\n-int get4(); // { dg-error \"ambiguating\" }\n-\n-void get5();\n-\n-template <class T> struct X\n-{\n-  void g()\n-  {\n-    int get5(); // { dg-error \"ambiguating\" }\n-  }\n-};\n-\n-\n-template <class T> struct X2\n-{\n-  void g()\n-  {\n-    int get6();\n-  }\n-};\n-\n-void get6(); // { dg-error \"ambiguating\" }"}, {"sha": "42f70aeb997d6188b96fa8c89ea555237a85d746", "filename": "gcc/testsuite/g++.old-deja/g++.law/missed-error2.C", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fmissed-error2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fmissed-error2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fmissed-error2.C?ref=cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698", "patch": "@@ -25,10 +25,9 @@ int main() {\n    foo(4, -37, 14.39, 14.38);\n }\n \n-// 971006 we no longer gave an error for this since we emit a hard error\n-// about the declaration above, but after the fix for PR c++/69855\n-// this declaration emits a diagnostic again\n-static void foo(int i, int j, double x, double y) { // { dg-error \"extern|static\" }\n+// 971006 we no longer give an error for this since we emit a hard error\n+// about the declaration above\n+static void foo(int i, int j, double x, double y) { \n \n    std::cout << \"Max(int): \" << max(i,j) << \" Max(double): \" <<\n max(x,y) << '\\n';"}, {"sha": "160cbe541a112a1b433ae6114900315bfec3264a", "filename": "gcc/testsuite/g++.old-deja/g++.pt/crash3.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash3.C?ref=cdfa2b24d2496f304c65bf48a6bc4f66bbc2e698", "patch": "@@ -10,7 +10,7 @@ public:\n     }\n     CVector<long> g() const\n     {\n-       CVector<long> v2();\n-       return v2;\n+       CVector<long> v();\n+       return v;\n     }\n };"}]}