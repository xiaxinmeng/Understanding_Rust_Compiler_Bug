{"sha": "3d09a9fd048212286ab967ed8b83b72d2f6859a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2QwOWE5ZmQwNDgyMTIyODZhYjk2N2VkOGI4M2I3MmQyZjY4NTlhMg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-05-22T22:45:55Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-05-22T22:45:55Z"}, "message": "re PR c++/57352 (internal compiler error in cp_parser_abort_tentative_parse at cp/parser.c:22878)\n\n/cp\n2013-05-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/57352\n\t* parser.c (cp_parser_conversion_type_id): Set up\n\tparser->type_definition_forbidden_message before calling\n\tcp_parser_type_specifier_seq.\n\n/testsuite\n2013-05-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/57352\n\t* g++.dg/parse/crash62.C: New.\n\nFrom-SVN: r199224", "tree": {"sha": "c22b9a33beef489198af70273707be39d102a950", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c22b9a33beef489198af70273707be39d102a950"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d09a9fd048212286ab967ed8b83b72d2f6859a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d09a9fd048212286ab967ed8b83b72d2f6859a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d09a9fd048212286ab967ed8b83b72d2f6859a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d09a9fd048212286ab967ed8b83b72d2f6859a2/comments", "author": null, "committer": null, "parents": [{"sha": "4623df015adf47d07e271ab7364016eca01a9e29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4623df015adf47d07e271ab7364016eca01a9e29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4623df015adf47d07e271ab7364016eca01a9e29"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "f665312bdeb9539e4aacecc2213ef856eb517c8f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3d09a9fd048212286ab967ed8b83b72d2f6859a2", "patch": "@@ -1,3 +1,10 @@\n+2013-05-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/57352\n+\t* parser.c (cp_parser_conversion_type_id): Set up\n+\tparser->type_definition_forbidden_message before calling\n+\tcp_parser_type_specifier_seq.\n+\n 2013-05-22  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/57211"}, {"sha": "061b5714790e5910add0c23223ecd1aa20d1ef70", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=3d09a9fd048212286ab967ed8b83b72d2f6859a2", "patch": "@@ -11715,13 +11715,22 @@ cp_parser_conversion_type_id (cp_parser* parser)\n   cp_decl_specifier_seq type_specifiers;\n   cp_declarator *declarator;\n   tree type_specified;\n+  const char *saved_message;\n \n   /* Parse the attributes.  */\n   attributes = cp_parser_attributes_opt (parser);\n+\n+  saved_message = parser->type_definition_forbidden_message;\n+  parser->type_definition_forbidden_message\n+    = G_(\"types may not be defined in a conversion-type-id\");\n+\n   /* Parse the type-specifiers.  */\n   cp_parser_type_specifier_seq (parser, /*is_declaration=*/false,\n \t\t\t\t/*is_trailing_return=*/false,\n \t\t\t\t&type_specifiers);\n+\n+  parser->type_definition_forbidden_message = saved_message;\n+\n   /* If that didn't work, stop.  */\n   if (type_specifiers.type == error_mark_node)\n     return error_mark_node;"}, {"sha": "80657f43c3e97a775cd507c03b5bfe3a563a71fe", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3d09a9fd048212286ab967ed8b83b72d2f6859a2", "patch": "@@ -1,3 +1,8 @@\n+2013-05-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/57352\n+\t* g++.dg/parse/crash62.C: New.\n+\n 2013-05-22  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \t    Pat Haugen <pthaugen@us.ibm.com>\n \t    Peter Bergner <bergner@vnet.ibm.com>"}, {"sha": "230d162f0b24015f0d37f35c65b45c24fc6aba9d", "filename": "gcc/testsuite/g++.dg/parse/crash62.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash62.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d09a9fd048212286ab967ed8b83b72d2f6859a2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash62.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash62.C?ref=3d09a9fd048212286ab967ed8b83b72d2f6859a2", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/57352\n+\n+struct x\n+{\n+  operator class {} ();  // { dg-error \"types|expected\" }\n+};"}]}