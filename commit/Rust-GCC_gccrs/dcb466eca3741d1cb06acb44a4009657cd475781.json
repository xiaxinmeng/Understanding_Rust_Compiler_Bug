{"sha": "dcb466eca3741d1cb06acb44a4009657cd475781", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNiNDY2ZWNhMzc0MWQxY2IwNmFjYjQ0YTQwMDk2NTdjZDQ3NTc4MQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-10-31T16:38:21Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-10-31T16:38:21Z"}, "message": "re PR c++/77948 (Option processing of -std=c++11 -std=gnu++11 doesn't reset ext_numeric_literals)\n\n\tPR c++/77948\n\t* c.opt (fext-numeric-literals): Add Var and Init.\n\t* c-opts.c (c_common_handle_option): Don't clear\n\tcpp_opts->ext_numeric_literals for -std=c++{11,14,1z}.\n\t(c_common_post_options): Clear it here if not set\n\texplicitly.\n\n\t* g++.dg/cpp0x/pr77948-1.C: New test.\n\t* g++.dg/cpp0x/pr77948-2.C: New test.\n\t* g++.dg/cpp0x/pr77948-3.C: New test.\n\t* g++.dg/cpp0x/pr77948-4.C: New test.\n\t* g++.dg/cpp0x/pr77948-5.C: New test.\n\t* g++.dg/cpp0x/pr77948-6.C: New test.\n\nFrom-SVN: r241707", "tree": {"sha": "8c64fede4c4066c5dff6e9d102527ca44edf645e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c64fede4c4066c5dff6e9d102527ca44edf645e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcb466eca3741d1cb06acb44a4009657cd475781", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcb466eca3741d1cb06acb44a4009657cd475781", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcb466eca3741d1cb06acb44a4009657cd475781", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcb466eca3741d1cb06acb44a4009657cd475781/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1e4fa9b11255ea15a3510dfd1e3011ffebdcc530", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e4fa9b11255ea15a3510dfd1e3011ffebdcc530", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e4fa9b11255ea15a3510dfd1e3011ffebdcc530"}], "stats": {"total": 102, "additions": 86, "deletions": 16}, "files": [{"sha": "6457418030224d654ac24d8c79a01f03157f0ecf", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -1,3 +1,12 @@\n+2016-10-31  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/77948\n+\t* c.opt (fext-numeric-literals): Add Var and Init.\n+\t* c-opts.c (c_common_handle_option): Don't clear\n+\tcpp_opts->ext_numeric_literals for -std=c++{11,14,1z}.\n+\t(c_common_post_options): Clear it here if not set\n+\texplicitly.\n+\n 2016-10-28  Aldy Hernandez  <aldyh@redhat.com>\n \n \tPR debug/77773"}, {"sha": "4a0b9952fa691c75fcabf9da4324ef34d24f5f51", "filename": "gcc/c-family/c-opts.c", "status": "modified", "additions": 8, "deletions": 15, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Fc-family%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Fc-family%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-opts.c?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -624,31 +624,19 @@ c_common_handle_option (size_t scode, const char *arg, int value,\n     case OPT_std_c__11:\n     case OPT_std_gnu__11:\n       if (!preprocessing_asm_p)\n-\t{\n-\t  set_std_cxx11 (code == OPT_std_c__11 /* ISO */);\n-\t  if (code == OPT_std_c__11)\n-\t    cpp_opts->ext_numeric_literals = 0;\n-\t}\n+\tset_std_cxx11 (code == OPT_std_c__11 /* ISO */);\n       break;\n \n     case OPT_std_c__14:\n     case OPT_std_gnu__14:\n       if (!preprocessing_asm_p)\n-\t{\n-\t  set_std_cxx14 (code == OPT_std_c__14 /* ISO */);\n-\t  if (code == OPT_std_c__14)\n-\t    cpp_opts->ext_numeric_literals = 0;\n-\t}\n+\tset_std_cxx14 (code == OPT_std_c__14 /* ISO */);\n       break;\n \n     case OPT_std_c__1z:\n     case OPT_std_gnu__1z:\n       if (!preprocessing_asm_p)\n-\t{\n-\t  set_std_cxx1z (code == OPT_std_c__1z /* ISO */);\n-\t  if (code == OPT_std_c__1z)\n-\t    cpp_opts->ext_numeric_literals = 0;\n-\t}\n+\tset_std_cxx1z (code == OPT_std_c__1z /* ISO */);\n       break;\n \n     case OPT_std_c90:\n@@ -923,6 +911,11 @@ c_common_post_options (const char **pfilename)\n \n       if (warn_narrowing == -1)\n \twarn_narrowing = 1;\n+\n+      /* Unless -f{,no-}ext-numeric-literals has been used explicitly,\n+\t for -std=c++{11,14,1z} default to -fno-ext-numeric-literals.  */\n+      if (flag_iso && !global_options_set.x_flag_ext_numeric_literals)\n+\tcpp_opts->ext_numeric_literals = 0;\n     }\n   else if (warn_narrowing == -1)\n     warn_narrowing = 0;"}, {"sha": "7e86dbf6bb7bac4b476cca2186f5f2984258a098", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -1705,7 +1705,7 @@ C ObjC C++ ObjC++ Joined\n -femit-struct-debug-detailed=<spec-list>\tDetailed reduced debug info for structs.\n \n fext-numeric-literals\n-C++ ObjC++\n+C++ ObjC++ Var(flag_ext_numeric_literals) Init(1)\n Interpret imaginary, fixed-point, or other gnu number suffix as the corresponding\n number literal rather than a user-defined number literal.\n "}, {"sha": "c298d498eb8a875a8628f078d7cb630534f344c8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -1,5 +1,13 @@\n 2016-10-31  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/77948\n+\t* g++.dg/cpp0x/pr77948-1.C: New test.\n+\t* g++.dg/cpp0x/pr77948-2.C: New test.\n+\t* g++.dg/cpp0x/pr77948-3.C: New test.\n+\t* g++.dg/cpp0x/pr77948-4.C: New test.\n+\t* g++.dg/cpp0x/pr77948-5.C: New test.\n+\t* g++.dg/cpp0x/pr77948-6.C: New test.\n+\n \tPR tree-optimization/77860\n \t* gcc.dg/pr77860.c: New test.\n "}, {"sha": "e7795e95b7fa4169c7093263a776cc6a75b4139d", "filename": "gcc/testsuite/g++.dg/cpp0x/pr77948-1.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-1.C?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/77948\n+// { dg-do compile }\n+// { dg-options \"-std=c++11 -std=gnu++11\" }\n+\n+void\n+foo ()\n+{\n+  auto qfp = 1.0q; // { dg-error \"unsupported\" \"\" { target { ! has_q_floating_suffix } } }\n+  auto Qfp = 1.0Q; // { dg-error \"unsupported\" \"\" { target { ! has_q_floating_suffix } } }\n+}"}, {"sha": "7b84c5fdea155c27c95ba6888cf9086e13a0c73a", "filename": "gcc/testsuite/g++.dg/cpp0x/pr77948-2.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-2.C?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/77948\n+// { dg-do compile }\n+// { dg-options \"-std=gnu++11 -std=c++11\" }\n+\n+void\n+foo ()\n+{\n+  auto qfp = 1.0q; // { dg-error \"unable to find numeric literal operator\" }\n+  auto Qfp = 1.0Q; // { dg-error \"unable to find numeric literal operator\" }\n+}"}, {"sha": "64d4f5b14cc759b0380dfb2b4dd61f4c2e844a23", "filename": "gcc/testsuite/g++.dg/cpp0x/pr77948-3.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-3.C?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/77948\n+// { dg-do compile }\n+// { dg-options \"-std=c++11 -std=gnu++98\" }\n+\n+void\n+foo ()\n+{\n+  double qfp = 1.0q; // { dg-error \"unsupported\" \"\" { target { ! has_q_floating_suffix } } }\n+  double Qfp = 1.0Q; // { dg-error \"unsupported\" \"\" { target { ! has_q_floating_suffix } } }\n+}"}, {"sha": "7b66b983bfa039f8052dcfe39fd123abe3b686fb", "filename": "gcc/testsuite/g++.dg/cpp0x/pr77948-4.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-4.C?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/77948\n+// { dg-do compile }\n+// { dg-options \"-std=c++11 -std=c++98\" }\n+\n+void\n+foo ()\n+{\n+  double qfp = 1.0q; // { dg-error \"unsupported\" \"\" { target { ! has_q_floating_suffix } } }\n+  double Qfp = 1.0Q; // { dg-error \"unsupported\" \"\" { target { ! has_q_floating_suffix } } }\n+}"}, {"sha": "bec34a15fbd9fef644ade549785badbf486585b0", "filename": "gcc/testsuite/g++.dg/cpp0x/pr77948-5.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-5.C?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/77948\n+// { dg-do compile }\n+// { dg-options \"-std=gnu++98 -std=c++11\" }\n+\n+void\n+foo ()\n+{\n+  auto qfp = 1.0q; // { dg-error \"unable to find numeric literal operator\" }\n+  auto Qfp = 1.0Q; // { dg-error \"unable to find numeric literal operator\" }\n+}"}, {"sha": "b8a13b5540a4e9a1c4e2c2688602d4225652c497", "filename": "gcc/testsuite/g++.dg/cpp0x/pr77948-6.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb466eca3741d1cb06acb44a4009657cd475781/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr77948-6.C?ref=dcb466eca3741d1cb06acb44a4009657cd475781", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/77948\n+// { dg-do compile }\n+// { dg-options \"-std=c++98 -std=c++11\" }\n+\n+void\n+foo ()\n+{\n+  auto qfp = 1.0q; // { dg-error \"unable to find numeric literal operator\" }\n+  auto Qfp = 1.0Q; // { dg-error \"unable to find numeric literal operator\" }\n+}"}]}