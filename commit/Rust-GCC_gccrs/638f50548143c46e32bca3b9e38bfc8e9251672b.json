{"sha": "638f50548143c46e32bca3b9e38bfc8e9251672b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM4ZjUwNTQ4MTQzYzQ2ZTMyYmNhM2I5ZTM4YmZjOGU5MjUxNjcyYg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-26T12:03:29Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-26T12:03:29Z"}, "message": "[multiple changes]\n\n2015-10-26  Javier Miranda  <miranda@adacore.com>\n\n\t* exp_ch6.adb (Expand_N_Subprogram_Declaration): Skip the frontend\n\ttransformation of functions that return a constrained array into\n\ta procedure when they are unchecked_conversion instances.\n\n2015-10-26  Gary Dismukes  <dismukes@adacore.com>\n\n\t* s-os_lib.ads: Minor reformatting/rewording.\n\nFrom-SVN: r229350", "tree": {"sha": "4a8b54474e773e468dd4769af6852f425578bf66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a8b54474e773e468dd4769af6852f425578bf66"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/638f50548143c46e32bca3b9e38bfc8e9251672b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/638f50548143c46e32bca3b9e38bfc8e9251672b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/638f50548143c46e32bca3b9e38bfc8e9251672b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/638f50548143c46e32bca3b9e38bfc8e9251672b/comments", "author": null, "committer": null, "parents": [{"sha": "b30fc1f9d6ca2ad28b3c136e88049a285533df8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30fc1f9d6ca2ad28b3c136e88049a285533df8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b30fc1f9d6ca2ad28b3c136e88049a285533df8f"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "1da9491fcb445f93621abae3df5917a629727199", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638f50548143c46e32bca3b9e38bfc8e9251672b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638f50548143c46e32bca3b9e38bfc8e9251672b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=638f50548143c46e32bca3b9e38bfc8e9251672b", "patch": "@@ -1,3 +1,13 @@\n+2015-10-26  Javier Miranda  <miranda@adacore.com>\n+\n+\t* exp_ch6.adb (Expand_N_Subprogram_Declaration): Skip the frontend\n+\ttransformation of functions that return a constrained array into\n+\ta procedure when they are unchecked_conversion instances.\n+\n+2015-10-26  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* s-os_lib.ads: Minor reformatting/rewording.\n+\n 2015-10-26  Arnaud Charlet  <charlet@adacore.com>\n \n \t* debug.adb: Introduce debug flag -gnatd.5."}, {"sha": "b8488584290666cbad848c89659380b887908881", "filename": "gcc/ada/exp_ch6.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638f50548143c46e32bca3b9e38bfc8e9251672b/gcc%2Fada%2Fexp_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638f50548143c46e32bca3b9e38bfc8e9251672b/gcc%2Fada%2Fexp_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch6.adb?ref=638f50548143c46e32bca3b9e38bfc8e9251672b", "patch": "@@ -5666,10 +5666,15 @@ package body Exp_Ch6 is\n       --  constrained array type into a procedure with an out parameter\n       --  that carries the return value.\n \n+      --  We skip this transformation for unchecked conversions, since they\n+      --  are not needed by the C generator (and this also produces cleaner\n+      --  output).\n+\n       if Modify_Tree_For_C\n         and then Nkind (Specification (N)) = N_Function_Specification\n         and then Is_Array_Type (Etype (Subp))\n         and then Is_Constrained (Etype (Subp))\n+        and then not Is_Unchecked_Conversion_Instance (Subp)\n       then\n          Build_Procedure_Form;\n       end if;"}, {"sha": "4c03c700f5af038cc83975e7f1dbac8dbdd45496", "filename": "gcc/ada/s-os_lib.ads", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638f50548143c46e32bca3b9e38bfc8e9251672b/gcc%2Fada%2Fs-os_lib.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638f50548143c46e32bca3b9e38bfc8e9251672b/gcc%2Fada%2Fs-os_lib.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-os_lib.ads?ref=638f50548143c46e32bca3b9e38bfc8e9251672b", "patch": "@@ -877,14 +877,12 @@ package System.OS_Lib is\n    --  there is no notion of executables under this OS.\n \n    procedure Kill (Pid : Process_Id; Hard_Kill : Boolean := True);\n-   --  Kill process known as Pid by the OS. Does nothing if Pid is\n-   --  Invalid_Pid or on platforms where it is not supported like\n-   --  VxWorks.\n-   --  Hard_Kill is True by default and in this case the process\n-   --  is terminated immediately. If Hard_Kill is False a signal\n-   --  SIGINT is sent to the process on POSIX OS or a CTRL-C event\n-   --  on Windows, this let the process a chance to quit properly\n-   --  using a corresponding handler.\n+   --  Kill the process designated by Pid. Does nothing if Pid is Invalid_Pid\n+   --  or on platforms where it is not supported, such as VxWorks. Hard_Kill\n+   --  is True by default, and when True the process is terminated immediately.\n+   --  If Hard_Kill is False, then a signal SIGINT is sent to the process on\n+   --  POSIX OS or a ctrl-C event on Windows, allowing the process a chance to\n+   --  terminate properly using a corresponding handler.\n \n    function Argument_String_To_List\n      (Arg_String : String) return Argument_List_Access;"}]}