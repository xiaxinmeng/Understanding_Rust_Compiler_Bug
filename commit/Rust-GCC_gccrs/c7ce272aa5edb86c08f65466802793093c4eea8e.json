{"sha": "c7ce272aa5edb86c08f65466802793093c4eea8e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdjZTI3MmFhNWVkYjg2YzA4ZjY1NDY2ODAyNzkzMDkzYzRlZWE4ZQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-03-07T22:44:22Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-03-07T22:44:22Z"}, "message": "libjava.exp (test_libjava_from_javac): Removed hack for interfaces.\n\n\t* lib/libjava.exp (test_libjava_from_javac): Removed hack for\n\tinterfaces.  Fail if jv-scan reports a parse error.\n\nFrom-SVN: r32392", "tree": {"sha": "1b7925b9b2a92106e001e64530cf58284e8d5f57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b7925b9b2a92106e001e64530cf58284e8d5f57"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7ce272aa5edb86c08f65466802793093c4eea8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7ce272aa5edb86c08f65466802793093c4eea8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7ce272aa5edb86c08f65466802793093c4eea8e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7ce272aa5edb86c08f65466802793093c4eea8e/comments", "author": null, "committer": null, "parents": [{"sha": "1729c265058cc349c8298bebc01b684a012bc8f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1729c265058cc349c8298bebc01b684a012bc8f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1729c265058cc349c8298bebc01b684a012bc8f6"}], "stats": {"total": 36, "additions": 23, "deletions": 13}, "files": [{"sha": "fbf93e66d5f11a0e126e0d596730f314106956cd", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ce272aa5edb86c08f65466802793093c4eea8e/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ce272aa5edb86c08f65466802793093c4eea8e/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=c7ce272aa5edb86c08f65466802793093c4eea8e", "patch": "@@ -1,5 +1,8 @@\n 2000-03-07  Tom Tromey  <tromey@cygnus.com>\n \n+\t* lib/libjava.exp (test_libjava_from_javac): Removed hack for\n+\tinterfaces.  Fail if jv-scan reports a parse error.\n+\n \tTest for PR gcj/162:\n \t* libjava.lang/PR162.out: New file.\n \t* libjava.lang/PR162.java: New file."}, {"sha": "c561a3a7d70b3c42cf23bb4e5aa3ba0a09c90c5a", "filename": "libjava/testsuite/lib/libjava.exp", "status": "modified", "additions": 20, "deletions": 13, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ce272aa5edb86c08f65466802793093c4eea8e/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ce272aa5edb86c08f65466802793093c4eea8e/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flib%2Flibjava.exp?ref=c7ce272aa5edb86c08f65466802793093c4eea8e", "patch": "@@ -495,20 +495,27 @@ proc test_libjava_from_javac { options srcfile compile_args inpfile resultfile e\n \t\t     [target_compile $srcfile \"\" none \\\n \t\t\t\"compiler=$jvscan additional_flags=--list-class\"]]\n     verbose \"class list is $class_out\"\n-    # FIXME: As of Wed Feb 24 1999, `jv-scan --list-class' prints\n-    # nothing if the file contains an interface and not a class.  I\n-    # believe this is a jv-scan bug.\n-    if {$class_out == \"\"} then {\n-\tset class_files \\\n-\t  [list $objdir/[file rootname [file tail $srcfile]].class]\n-    } else {\n-\t# Turn \"a b\" into \"a.class b.class\".\n-\t# Also, turn \"foo.bar\" into \"foo/bar.class\".\n-\tset class_files {}\n-        foreach file [split [string trim $class_out]] {\n-\t    set file [join [split $file .] /]\n-\t    lappend class_files $objdir/$file.class\n+\n+    if {[string match \"*parse error*\" $main_name]\n+\t|| [string match \"*parse error*\" $class_out]} {\n+\t# Do the remaining fails.\n+\tsetup_xfail \"*-*-*\"\n+\tfail \"$errname compilation from bytecode\"\n+\tif {! [info exists opts(no-exec)]} {\n+\t    setup_xfail \"*-*-*\"\n+\t    fail \"$errname execution from bytecode->native test\"\n+\t    setup_xfail \"*-*-*\"\n+\t    fail \"$errname output from bytecode->native test\"\n \t}\n+\treturn\n+    }\n+\n+    # Turn \"a b\" into \"a.class b.class\".\n+    # Also, turn \"foo.bar\" into \"foo/bar.class\".\n+    set class_files {}\n+    foreach file [split [string trim $class_out]] {\n+\tset file [join [split $file .] /]\n+\tlappend class_files $objdir/$file.class\n     }\n \n     # Usually it is an error for a test program not to have a `main'"}]}