{"sha": "048b0d2ef95ac9432d33e780f0e6d3337e966244", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ4YjBkMmVmOTVhYzk0MzJkMzNlNzgwZjBlNmQzMzM3ZTk2NjI0NA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-01-30T11:28:37Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-01-30T11:28:37Z"}, "message": "reload.c (secondary_memlocs_elim_used): New static variable.\n\n\n\t* reload.c (secondary_memlocs_elim_used): New static variable.\n\t(get_secondary_mem): Update it.\n\t(find_reloads): Use it.\n\nFrom-SVN: r76950", "tree": {"sha": "73cec5c623e50233779dbc24a86aa5650a30803f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/73cec5c623e50233779dbc24a86aa5650a30803f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/048b0d2ef95ac9432d33e780f0e6d3337e966244", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/048b0d2ef95ac9432d33e780f0e6d3337e966244", "html_url": "https://github.com/Rust-GCC/gccrs/commit/048b0d2ef95ac9432d33e780f0e6d3337e966244", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/048b0d2ef95ac9432d33e780f0e6d3337e966244/comments", "author": null, "committer": null, "parents": [{"sha": "1f2eae8da546be392626ab4d9da1fdc1364b95fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f2eae8da546be392626ab4d9da1fdc1364b95fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f2eae8da546be392626ab4d9da1fdc1364b95fd"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "83aa8d24f0f8b4b5ca3edbcc9056d523617502f2", "filename": "gcc/reload.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/048b0d2ef95ac9432d33e780f0e6d3337e966244/gcc%2Freload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/048b0d2ef95ac9432d33e780f0e6d3337e966244/gcc%2Freload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload.c?ref=048b0d2ef95ac9432d33e780f0e6d3337e966244", "patch": "@@ -173,6 +173,7 @@ struct decomposition\n \n static rtx secondary_memlocs[NUM_MACHINE_MODES];\n static rtx secondary_memlocs_elim[NUM_MACHINE_MODES][MAX_RECOG_OPERANDS];\n+static int secondary_memlocs_elim_used = 0;\n #endif\n \n /* The instruction we are doing reloads for;\n@@ -644,6 +645,8 @@ get_secondary_mem (rtx x ATTRIBUTE_UNUSED, enum machine_mode mode,\n     }\n \n   secondary_memlocs_elim[(int) mode][opnum] = loc;\n+  if (secondary_memlocs_elim_used <= opnum)\n+    secondary_memlocs_elim_used = opnum + 1;\n   return loc;\n }\n \n@@ -2540,7 +2543,12 @@ find_reloads (rtx insn, int replace, int ind_levels, int live_known,\n   /* The eliminated forms of any secondary memory locations are per-insn, so\n      clear them out here.  */\n \n-  memset (secondary_memlocs_elim, 0, sizeof secondary_memlocs_elim);\n+  if (secondary_memlocs_elim_used)\n+    {\n+      memset (secondary_memlocs_elim, 0,\n+\t      sizeof (secondary_memlocs_elim[0]) * secondary_memlocs_elim_used);\n+      secondary_memlocs_elim_used = 0;\n+    }\n #endif\n \n   /* Dispose quickly of (set (reg..) (reg..)) if both have hard regs and it"}]}