{"sha": "a5b947fa660dddce05e02f23de61d77063c2573b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTViOTQ3ZmE2NjBkZGRjZTA1ZTAyZjIzZGU2MWQ3NzA2M2MyNTczYg==", "commit": {"author": {"name": "George Spelvin", "email": "linux@sciencehorizons.net", "date": "2016-12-12T11:25:51Z"}, "committer": {"name": "Georg-Johann Lay", "email": "gjl@gcc.gnu.org", "date": "2016-12-12T11:25:51Z"}, "message": "lib1funcs.S (__ashldi3): Use __tmp_reg__ to restore R16 instead of push + pop.\n\nlibgcc/\n\t2016-12-12  George Spelvin  <linux@sciencehorizons.net>\n\t* config/avr/lib1funcs.S (__ashldi3): Use __tmp_reg__ to restore\n\tR16 instead of push + pop.\n\t(__ashrdi3, __lshrdi3): Same. And use __zero_reg__ for signs.\n\nFrom-SVN: r243545", "tree": {"sha": "68bc34bf4049fac9c3b91df7ad1ba496975288c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68bc34bf4049fac9c3b91df7ad1ba496975288c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5b947fa660dddce05e02f23de61d77063c2573b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5b947fa660dddce05e02f23de61d77063c2573b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5b947fa660dddce05e02f23de61d77063c2573b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5b947fa660dddce05e02f23de61d77063c2573b/comments", "author": null, "committer": {"login": "sprintersb", "id": 8905355, "node_id": "MDQ6VXNlcjg5MDUzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/8905355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sprintersb", "html_url": "https://github.com/sprintersb", "followers_url": "https://api.github.com/users/sprintersb/followers", "following_url": "https://api.github.com/users/sprintersb/following{/other_user}", "gists_url": "https://api.github.com/users/sprintersb/gists{/gist_id}", "starred_url": "https://api.github.com/users/sprintersb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sprintersb/subscriptions", "organizations_url": "https://api.github.com/users/sprintersb/orgs", "repos_url": "https://api.github.com/users/sprintersb/repos", "events_url": "https://api.github.com/users/sprintersb/events{/privacy}", "received_events_url": "https://api.github.com/users/sprintersb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e9034937bfc7a938a152e9fa9ecb806c7077602", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e9034937bfc7a938a152e9fa9ecb806c7077602", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e9034937bfc7a938a152e9fa9ecb806c7077602"}], "stats": {"total": 35, "additions": 24, "deletions": 11}, "files": [{"sha": "5f8854c6e0e3e119b8c2b337e22c9797b6022613", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b947fa660dddce05e02f23de61d77063c2573b/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b947fa660dddce05e02f23de61d77063c2573b/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=a5b947fa660dddce05e02f23de61d77063c2573b", "patch": "@@ -1,3 +1,9 @@\n+2016-12-12  George Spelvin  <linux@sciencehorizons.net>\n+\n+\t* config/avr/lib1funcs.S (__ashldi3): Use __tmp_reg__ to restore\n+\tR16 instead of push + pop.\n+\t(__ashrdi3, __lshrdi3): Same. And use __zero_reg__ for signs.\n+\n 2016-12-10  Krister Walfridsson  <krister.walfridsson@gmail.com>\n \n \t* config.host (i[34567]86-*-netbsdelf*): Add i386/t-crtstuff to"}, {"sha": "6ca2b82a8cdc2dc0b347167c979816bc3313831b", "filename": "libgcc/config/avr/lib1funcs.S", "status": "modified", "additions": 18, "deletions": 11, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b947fa660dddce05e02f23de61d77063c2573b/libgcc%2Fconfig%2Favr%2Flib1funcs.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b947fa660dddce05e02f23de61d77063c2573b/libgcc%2Fconfig%2Favr%2Flib1funcs.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Favr%2Flib1funcs.S?ref=a5b947fa660dddce05e02f23de61d77063c2573b", "patch": "@@ -3113,20 +3113,22 @@ ENDF __bswapdi2\n  **********************************/\n \n #if defined (L_ashrdi3)\n+\n+#define SS __zero_reg__\n+\n ;; Arithmetic shift right\n ;; r25:r18 = ashr64 (r25:r18, r17:r16)\n DEFUN __ashrdi3\n-    bst     r25, 7\n-    bld     __zero_reg__, 0\n+    sbrc    r25, 7\n+    neg     SS\n     ;; FALLTHRU\n ENDF  __ashrdi3\n \n ;; Logic shift right\n ;; r25:r18 = lshr64 (r25:r18, r17:r16)\n DEFUN __lshrdi3\n-    lsr     __zero_reg__\n-    sbc     __tmp_reg__, __tmp_reg__\n-    push    r16\n+    ;; Signs are in SS (zero_reg)\n+    mov     __tmp_reg__, r16\n 0:  cpi     r16, 8\n     brlo 2f\n     subi    r16, 8\n@@ -3137,9 +3139,9 @@ DEFUN __lshrdi3\n     mov     r22, r23\n     mov     r23, r24\n     mov     r24, r25\n-    mov     r25, __tmp_reg__\n+    mov     r25, SS\n     rjmp 0b\n-1:  asr     __tmp_reg__\n+1:  asr     SS\n     ror     r25\n     ror     r24\n     ror     r23\n@@ -3150,16 +3152,21 @@ DEFUN __lshrdi3\n     ror     r18\n 2:  dec     r16\n     brpl 1b\n-    pop     r16\n+    clr     __zero_reg__\n+    mov     r16, __tmp_reg__\n     ret\n ENDF __lshrdi3\n+\n+#undef SS\n+\n #endif /* defined (L_ashrdi3) */\n \n #if defined (L_ashldi3)\n ;; Shift left\n ;; r25:r18 = ashl64 (r25:r18, r17:r16)\n+;; This function does not clobber T.\n DEFUN __ashldi3\n-    push    r16\n+    mov     __tmp_reg__, r16\n 0:  cpi     r16, 8\n     brlo 2f\n     mov     r25, r24\n@@ -3182,13 +3189,13 @@ DEFUN __ashldi3\n     rol     r25\n 2:  dec     r16\n     brpl 1b\n-    pop     r16\n+    mov     r16, __tmp_reg__\n     ret\n ENDF __ashldi3\n #endif /* defined (L_ashldi3) */\n \n #if defined (L_rotldi3)\n-;; Shift left\n+;; Rotate left\n ;; r25:r18 = rotl64 (r25:r18, r17:r16)\n DEFUN __rotldi3\n     push    r16"}]}