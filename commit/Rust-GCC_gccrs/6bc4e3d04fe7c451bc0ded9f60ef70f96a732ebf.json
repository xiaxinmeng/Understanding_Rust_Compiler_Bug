{"sha": "6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJjNGUzZDA0ZmU3YzQ1MWJjMGRlZDlmNjBlZjcwZjk2YTczMmViZg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-03-02T03:07:56Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-03-02T03:07:56Z"}, "message": "(build_unary_op): Warn if increment `struct unknown *'.\n\nFrom-SVN: r3585", "tree": {"sha": "25c76b46460933a7a095ec20f5cc7b21215d1884", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25c76b46460933a7a095ec20f5cc7b21215d1884"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf/comments", "author": null, "committer": null, "parents": [{"sha": "429819203e1a237e28bda2c99c0a49d5501590e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/429819203e1a237e28bda2c99c0a49d5501590e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/429819203e1a237e28bda2c99c0a49d5501590e2"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "6f2004842803e15b296b2cca97899a549fcf4435", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=6bc4e3d04fe7c451bc0ded9f60ef70f96a732ebf", "patch": "@@ -3014,9 +3014,16 @@ build_unary_op (code, xarg, noconvert)\n \n \tif (typecode == POINTER_TYPE)\n \t  {\n-\t    if ((pedantic || warn_pointer_arith)\n-\t\t&& (TREE_CODE (TREE_TYPE (result_type)) == FUNCTION_TYPE\n-\t\t    || TREE_CODE (TREE_TYPE (result_type)) == VOID_TYPE))\n+\t    /* If pointer target is an undefined struct,\n+\t       we just cannot know how to do the arithmetic.  */\n+\t    if (TYPE_SIZE (TREE_TYPE (result_type)) == 0)\n+\t      error (\"%s of pointer to unknown structure\",\n+\t\t       ((code == PREINCREMENT_EXPR\n+\t\t\t || code == POSTINCREMENT_EXPR)\n+\t\t\t? \"increment\" : \"decrement\"));\n+\t    else if ((pedantic || warn_pointer_arith)\n+\t\t     && (TREE_CODE (TREE_TYPE (result_type)) == FUNCTION_TYPE\n+\t\t\t || TREE_CODE (TREE_TYPE (result_type)) == VOID_TYPE))\n \t      pedwarn (\"wrong type argument to %s\",\n \t\t       ((code == PREINCREMENT_EXPR\n \t\t\t || code == POSTINCREMENT_EXPR)"}]}