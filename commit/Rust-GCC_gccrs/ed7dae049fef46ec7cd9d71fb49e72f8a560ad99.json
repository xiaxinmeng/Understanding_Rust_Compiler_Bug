{"sha": "ed7dae049fef46ec7cd9d71fb49e72f8a560ad99", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQ3ZGFlMDQ5ZmVmNDZlYzdjZDlkNzFmYjQ5ZTcyZjhhNTYwYWQ5OQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-02-11T21:08:02Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-02-11T21:08:02Z"}, "message": "(specs): Use %O instead of \"o\" for object file suffix.\n\n(do_spec_1, case 'O'): New option.\n\nFrom-SVN: r8908", "tree": {"sha": "077e20255d9cef95629177190cfa5021737a8935", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/077e20255d9cef95629177190cfa5021737a8935"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed7dae049fef46ec7cd9d71fb49e72f8a560ad99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed7dae049fef46ec7cd9d71fb49e72f8a560ad99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed7dae049fef46ec7cd9d71fb49e72f8a560ad99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed7dae049fef46ec7cd9d71fb49e72f8a560ad99/comments", "author": null, "committer": null, "parents": [{"sha": "c40f7b333a8201eaf4af5c77297f9a1e39371325", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c40f7b333a8201eaf4af5c77297f9a1e39371325", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c40f7b333a8201eaf4af5c77297f9a1e39371325"}], "stats": {"total": 31, "additions": 21, "deletions": 10}, "files": [{"sha": "610b074d10ce044c361bcf72f220d78a54e16bad", "filename": "gcc/gcc.c", "status": "modified", "additions": 21, "deletions": 10, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed7dae049fef46ec7cd9d71fb49e72f8a560ad99/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed7dae049fef46ec7cd9d71fb49e72f8a560ad99/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=ed7dae049fef46ec7cd9d71fb49e72f8a560ad99", "patch": "@@ -144,6 +144,11 @@ compilation is specified by a string called a \"spec\".  */\n #define EXECUTABLE_SUFFIX \"\"\n #endif\n \n+/* By default, the suffix for object files is the letter \"o\". */\n+#ifndef OBJECT_SUFFIX\n+#define OBJECT_SUFFIX \"o\"\n+#endif\n+\n /* By default, colon separates directories in a path.  */\n #ifndef PATH_SEPARATOR\n #define PATH_SEPARATOR ':'\n@@ -334,6 +339,7 @@ or with constant text in a single argument.\n \tInput files whose names have no recognized suffix are not compiled\n \tat all, but they are included among the output files, so they will\n \tbe linked.\n+ %O\tsubstitutes the suffix for object files.\n  %p\tsubstitutes the standard macro predefinitions for the\n \tcurrent target machine.  Use this when running cpp.\n  %P\tlike %p, but puts `__' before and after the name of each macro.\n@@ -476,7 +482,7 @@ proper position among the other output files.  */\n /* config.h can define STARTFILE_SPEC to override the default crt0 files.  */\n #ifndef STARTFILE_SPEC\n #define STARTFILE_SPEC  \\\n-  \"%{!shared:%{pg:gcrt0.o%s}%{!pg:%{p:mcrt0.o%s}%{!p:crt0.o%s}}}\"\n+  \"%{!shared:%{pg:gcrt0.%O%s}%{!pg:%{p:mcrt0.%O%s}%{!p:crt0.%O%s}}}\"\n #endif\n \n /* config.h can define SWITCHES_NEED_SPACES to control passing -o and -L.\n@@ -597,7 +603,7 @@ static struct compiler default_compilers[] =\n \t\t   %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t   %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n               %{!S:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-\t\t      %{c:%W{o*}%{!o*:-o %w%b.o}}%{!c:-o %d%w%u.o}\\\n+\t\t      %{c:%W{o*}%{!o*:-o %w%b.%O}}%{!c:-o %d%w%u.%O}\\\n                       %{!pipe:%g.s} %A\\n }}}}\"},\n   {\"-\",\n    \"%{E:cpp -lang-c %{nostdinc*} %{C} %{v} %{A*} %{I*} %{P} %I\\\n@@ -632,7 +638,7 @@ static struct compiler default_compilers[] =\n \t\t   %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t   %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n               %{!S:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-\t\t      %{c:%W{o*}%{!o*:-o %w%b.o}}%{!c:-o %d%w%u.o}\\\n+\t\t      %{c:%W{o*}%{!o*:-o %w%b.%O}}%{!c:-o %d%w%u.%O}\\\n                       %{!pipe:%g.s} %A\\n }}}}\"},\n   {\".h\", \"@c-header\"},\n   {\"@c-header\",\n@@ -690,7 +696,7 @@ static struct compiler default_compilers[] =\n \t\t\t    %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t\t    %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}}|\\n\\\n               %{!S:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-\t\t      %{c:%W{o*}%{!o*:-o %w%b.o}}%{!c:-o %d%w%u.o}\\\n+\t\t      %{c:%W{o*}%{!o*:-o %w%b.%O}}%{!c:-o %d%w%u.%O}\\\n                       %{!pipe:%g.s} %A\\n }}}}\"},\n   {\".i\", \"@cpp-output\"},\n   {\"@cpp-output\",\n@@ -701,7 +707,7 @@ static struct compiler default_compilers[] =\n \t\t\t%{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t\t%{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n \t\t     %{!S:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-\t\t\t     %{c:%W{o*}%{!o*:-o %w%b.o}}%{!c:-o %d%w%u.o}\\\n+\t\t\t     %{c:%W{o*}%{!o*:-o %w%b.%O}}%{!c:-o %d%w%u.%O}\\\n \t\t\t     %{!pipe:%g.s} %A\\n }}}}\"},\n   {\".ii\", \"@c++-cpp-output\"},\n   {\"@c++-cpp-output\",\n@@ -712,12 +718,12 @@ static struct compiler default_compilers[] =\n \t\t\t    %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t\t    %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n \t            %{!S:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-\t\t\t    %{c:%W{o*}%{!o*:-o %w%b.o}}%{!c:-o %d%w%u.o}\\\n+\t\t\t    %{c:%W{o*}%{!o*:-o %w%b.%O}}%{!c:-o %d%w%u.%O}\\\n \t\t\t    %{!pipe:%g.s} %A\\n }}}}\"},\n   {\".s\", \"@assembler\"},\n   {\"@assembler\",\n    \"%{!M:%{!MM:%{!E:%{!S:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-\t\t            %{c:%W{o*}%{!o*:-o %w%b.o}}%{!c:-o %d%w%u.o}\\\n+\t\t            %{c:%W{o*}%{!o*:-o %w%b.%O}}%{!c:-o %d%w%u.%O}\\\n \t\t\t    %i %A\\n }}}}\"},\n   {\".S\", \"@assembler-with-cpp\"},\n   {\"@assembler-with-cpp\",\n@@ -730,7 +736,7 @@ static struct compiler default_compilers[] =\n \t%{g*} %{W*} %{w} %{pedantic*} %{H} %{d*} %C %{D*} %{U*} %{i*} %Z\\\n         %i %{!M:%{!MM:%{!E:%{!pipe:%g.s}}}}%{E:%W{o*}}%{M:%W{o*}}%{MM:%W{o*}} |\\n\",\n    \"%{!M:%{!MM:%{!E:%{!S:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-                    %{c:%W{o*}%{!o*:-o %w%b.o}}%{!c:-o %d%w%u.o}\\\n+                    %{c:%W{o*}%{!o*:-o %w%b.%O}}%{!c:-o %d%w%u.%O}\\\n \t\t    %{!pipe:%g.s} %A\\n }}}}\"},\n   {\".ads\", \"@ada\"},\n   {\".adb\", \"@ada\"},\n@@ -742,8 +748,8 @@ static struct compiler default_compilers[] =\n \t\t\t  %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t\t  %i %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n \t\t    %{!S:%{!gnatc:%{!gnats:as %{R} %{j} %{J} %{h} %{d2} %a %Y\\\n-\t\t\t\t\t      %{c:%W{o*}%{!o*:-o %w%b.o}}\\\n-\t\t\t\t\t      %{!c:-o %d%w%u.o} %{!pipe:%g.s} %A\\n}}}}}} \"},\n+\t\t\t\t\t      %{c:%W{o*}%{!o*:-o %w%b.%O}}\\\n+\t\t\t\t\t      %{!c:-o %d%w%u.%O} %{!pipe:%g.s} %A\\n}}}}}} \"},\n   /* Mark end of table */\n   {0, 0}\n };\n@@ -3387,6 +3393,11 @@ do_spec_1 (spec, inswitch, soft_matched_part)\n \t    }\n \t    break;\n \n+\t  case 'O':\n+\t    obstack_grow (&obstack, OBJECT_SUFFIX, strlen (OBJECT_SUFFIX));\n+\t    arg_going = 1;\n+\t    break;\n+\n \t  case 's':\n \t    this_is_library_file = 1;\n \t    break;"}]}