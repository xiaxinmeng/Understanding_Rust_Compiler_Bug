{"sha": "0b9066cf56f688034561c58adb5cadaf102abb26", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGI5MDY2Y2Y1NmY2ODgwMzQ1NjFjNThhZGI1Y2FkYWYxMDJhYmIyNg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2012-04-04T12:12:00Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-04-04T12:12:00Z"}, "message": "re PR bootstrap/52808 (LTO bootstrap failed with bootstrap-profiled)\n\n2012-04-04  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/52808\n\t* tracer.c (tail_duplicate): Do not tail-duplicate loop header\n\tblocks.\n\t* Makefile.in (tracer.o): Depend on $(CFGLOOP_H).\n\nFrom-SVN: r186135", "tree": {"sha": "13d32354865b2db700fa6e4a168efb3e44ba9d0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13d32354865b2db700fa6e4a168efb3e44ba9d0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b9066cf56f688034561c58adb5cadaf102abb26", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b9066cf56f688034561c58adb5cadaf102abb26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b9066cf56f688034561c58adb5cadaf102abb26", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b9066cf56f688034561c58adb5cadaf102abb26/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c1a969777ff9f9dc0a92b69a261df0232e376009", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1a969777ff9f9dc0a92b69a261df0232e376009", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1a969777ff9f9dc0a92b69a261df0232e376009"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "70f59a49150183987045c7d516624a2601f22d4f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b9066cf56f688034561c58adb5cadaf102abb26/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b9066cf56f688034561c58adb5cadaf102abb26/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0b9066cf56f688034561c58adb5cadaf102abb26", "patch": "@@ -1,3 +1,10 @@\n+2012-04-04  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/52808\n+\t* tracer.c (tail_duplicate): Do not tail-duplicate loop header\n+\tblocks.\n+\t* Makefile.in (tracer.o): Depend on $(CFGLOOP_H).\n+\n 2012-04-04  Tristan Gingold  <gingold@adacore.com>\n \n \t* expr.c (expand_expr_real_2): Handle larger sizetype in"}, {"sha": "9c4d4fe22c6f10aa8bd8c2f9ae8caa9a22a928dd", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b9066cf56f688034561c58adb5cadaf102abb26/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b9066cf56f688034561c58adb5cadaf102abb26/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=0b9066cf56f688034561c58adb5cadaf102abb26", "patch": "@@ -3391,7 +3391,7 @@ bb-reorder.o : bb-reorder.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) \\\n tracer.o : tracer.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(RTL_H) \\\n    $(TREE_H) $(BASIC_BLOCK_H) hard-reg-set.h output.h $(CFGLAYOUT_H) \\\n    $(FLAGS_H) $(TIMEVAR_H) $(PARAMS_H) $(COVERAGE_H) $(FIBHEAP_H) \\\n-   $(TREE_PASS_H) $(TREE_FLOW_H) $(TREE_INLINE_H)\n+   $(TREE_PASS_H) $(TREE_FLOW_H) $(TREE_INLINE_H) $(CFGLOOP_H)\n cfglayout.o : cfglayout.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) \\\n    $(RTL_H) $(TREE_H) insn-config.h $(BASIC_BLOCK_H) hard-reg-set.h output.h \\\n    $(FUNCTION_H) $(CFGLAYOUT_H) $(CFGLOOP_H) $(TARGET_H) gt-cfglayout.h \\"}, {"sha": "ce95f56bbbe699436246f6636cdcc87abdbeeeff", "filename": "gcc/tracer.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b9066cf56f688034561c58adb5cadaf102abb26/gcc%2Ftracer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b9066cf56f688034561c58adb5cadaf102abb26/gcc%2Ftracer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftracer.c?ref=0b9066cf56f688034561c58adb5cadaf102abb26", "patch": "@@ -52,6 +52,7 @@\n #include \"tree-pass.h\"\n #include \"tree-flow.h\"\n #include \"tree-inline.h\"\n+#include \"cfgloop.h\"\n \n static int count_insns (basic_block);\n static bool ignore_bb_p (const_basic_block);\n@@ -307,7 +308,13 @@ tail_duplicate (void)\n \t    }\n \t  traced_insns += bb2->frequency * counts [bb2->index];\n \t  if (EDGE_COUNT (bb2->preds) > 1\n-\t      && can_duplicate_block_p (bb2))\n+\t      && can_duplicate_block_p (bb2)\n+\t      /* We have the tendency to duplicate the loop header\n+\t         of all do { } while loops.  Do not do that - it is\n+\t\t not profitable and it might create a loop with multiple\n+\t\t entries or at least rotate the loop.  */\n+\t      && (!current_loops\n+\t\t  || bb2->loop_father->header != bb2))\n \t    {\n \t      edge e;\n \t      basic_block copy;"}]}