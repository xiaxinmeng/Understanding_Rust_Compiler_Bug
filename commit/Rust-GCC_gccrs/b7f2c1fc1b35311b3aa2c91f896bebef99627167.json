{"sha": "b7f2c1fc1b35311b3aa2c91f896bebef99627167", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdmMmMxZmMxYjM1MzExYjNhYTJjOTFmODk2YmViZWY5OTYyNzE2Nw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-05-26T09:50:08Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-05-26T09:50:08Z"}, "message": "fold-const.c (fold): STRIP_NOPS when deciding whether or not something is a candidate for...\n\n        * fold-const.c (fold): STRIP_NOPS when deciding whether or not\n\tsomething is a candidate for optimize_bit_field_compare.\n\nFrom-SVN: r27169", "tree": {"sha": "d0255fced8e152416795cc0a88338b002ca6e8b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0255fced8e152416795cc0a88338b002ca6e8b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7f2c1fc1b35311b3aa2c91f896bebef99627167", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7f2c1fc1b35311b3aa2c91f896bebef99627167", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7f2c1fc1b35311b3aa2c91f896bebef99627167", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7f2c1fc1b35311b3aa2c91f896bebef99627167/comments", "author": null, "committer": null, "parents": [{"sha": "f20b5577f8d9aeada63329b028d91769c7df4884", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f20b5577f8d9aeada63329b028d91769c7df4884", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f20b5577f8d9aeada63329b028d91769c7df4884"}], "stats": {"total": 29, "additions": 19, "deletions": 10}, "files": [{"sha": "2739bd98d9715bc7f18cafc51d666a1c9eecc1cc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7f2c1fc1b35311b3aa2c91f896bebef99627167/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7f2c1fc1b35311b3aa2c91f896bebef99627167/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b7f2c1fc1b35311b3aa2c91f896bebef99627167", "patch": "@@ -1,3 +1,8 @@\n+Wed May 26 09:53:05 1999  Mark Mitchell  <mark@codesourcery.com>\n+\n+        * fold-const.c (fold): STRIP_NOPS when deciding whether or not\n+\tsomething is a candidate for optimize_bit_field_compare.\n+\n Wed May 26 09:40:02 1999  Mark Mitchell  <mark@codesourcery.com>\n \n \t* gcc.texi (Passes): Document branch-shortening."}, {"sha": "b67ff82868dfebc643961f5269c53cc32a757343", "filename": "gcc/fold-const.c", "status": "modified", "additions": 14, "deletions": 10, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7f2c1fc1b35311b3aa2c91f896bebef99627167/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7f2c1fc1b35311b3aa2c91f896bebef99627167/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=b7f2c1fc1b35311b3aa2c91f896bebef99627167", "patch": "@@ -6036,16 +6036,20 @@ fold (expr)\n \t}\n \n       /* If this is a comparison of a field, we may be able to simplify it.  */\n-      if ((TREE_CODE (arg0) == COMPONENT_REF\n-\t   || TREE_CODE (arg0) == BIT_FIELD_REF)\n-\t  && (code == EQ_EXPR || code == NE_EXPR)\n-\t  /* Handle the constant case even without -O\n-\t     to make sure the warnings are given.  */\n-\t  && (optimize || TREE_CODE (arg1) == INTEGER_CST))\n-\t{\n-\t  t1 = optimize_bit_field_compare (code, type, arg0, arg1);\n-\t  return t1 ? t1 : t;\n-\t}\n+      {\n+\ttree xarg0 = arg0;\n+\tSTRIP_NOPS (xarg0);\n+\tif ((TREE_CODE (xarg0) == COMPONENT_REF\n+\t     || TREE_CODE (xarg0) == BIT_FIELD_REF)\n+\t    && (code == EQ_EXPR || code == NE_EXPR)\n+\t    /* Handle the constant case even without -O\n+\t       to make sure the warnings are given.  */\n+\t    && (optimize || TREE_CODE (arg1) == INTEGER_CST))\n+\t  {\n+\t    t1 = optimize_bit_field_compare (code, type, xarg0, arg1);\n+\t    return t1 ? t1 : t;\n+\t  }\n+      }\n \n       /* If this is a comparison of complex values and either or both sides\n \t are a COMPLEX_EXPR or COMPLEX_CST, it is best to split up the"}]}