{"sha": "3df45f179a29e223d795502b80c1a877bca47a14", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RmNDVmMTc5YTI5ZTIyM2Q3OTU1MDJiODBjMWE4NzdiY2E0N2ExNA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-11-15T08:47:21Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-11-15T08:47:21Z"}, "message": "re PR rtl-optimization/88018 (ICE in insert_insn_on_edge at cfgrtl.c:1952 since r255066)\n\n\tPR rtl-optimization/88018\n\t* cfgrtl.c (fixup_abnormal_edges): Guard moving insns to fallthru edge\n\ton the presence of fallthru edge, rather than if it is a USE or not.\n\n\t* g++.dg/tsan/pr88018.C: New test.\n\nFrom-SVN: r266174", "tree": {"sha": "798e8b51907ec9f74ec6e2dec464b2fa447733ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/798e8b51907ec9f74ec6e2dec464b2fa447733ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3df45f179a29e223d795502b80c1a877bca47a14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3df45f179a29e223d795502b80c1a877bca47a14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3df45f179a29e223d795502b80c1a877bca47a14", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3df45f179a29e223d795502b80c1a877bca47a14/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ef0519fd4f688558fe2de79e741529655724478d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef0519fd4f688558fe2de79e741529655724478d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef0519fd4f688558fe2de79e741529655724478d"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "4bf430757dca783cc480176c16d876ebaff5613f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3df45f179a29e223d795502b80c1a877bca47a14/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3df45f179a29e223d795502b80c1a877bca47a14/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3df45f179a29e223d795502b80c1a877bca47a14", "patch": "@@ -1,3 +1,9 @@\n+2018-11-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/88018\n+\t* cfgrtl.c (fixup_abnormal_edges): Guard moving insns to fallthru edge\n+\ton the presence of fallthru edge, rather than if it is a USE or not.\n+\n 2018-11-15  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/87917"}, {"sha": "3d4a114cbbb9d5a674f01a3f526490d089e7b381", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3df45f179a29e223d795502b80c1a877bca47a14/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3df45f179a29e223d795502b80c1a877bca47a14/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=3df45f179a29e223d795502b80c1a877bca47a14", "patch": "@@ -3332,8 +3332,15 @@ fixup_abnormal_edges (void)\n \t\t\t If it's placed after a trapping call (i.e. that\n \t\t\t call is the last insn anyway), we have no fallthru\n \t\t\t edge.  Simply delete this use and don't try to insert\n-\t\t\t on the non-existent edge.  */\n-\t\t      if (GET_CODE (PATTERN (insn)) != USE)\n+\t\t\t on the non-existent edge.\n+\t\t\t Similarly, sometimes a call that can throw is\n+\t\t\t followed in the source with __builtin_unreachable (),\n+\t\t\t meaning that there is UB if the call returns rather\n+\t\t\t than throws.  If there weren't any instructions\n+\t\t\t following such calls before, supposedly even the ones\n+\t\t\t we've deleted aren't significant and can be\n+\t\t\t removed.  */\n+\t\t      if (e)\n \t\t\t{\n \t\t\t  /* We're not deleting it, we're moving it.  */\n \t\t\t  insn->set_undeleted ();"}, {"sha": "3c6c47f6766c671b5f669affbb68c920c43dcb9d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3df45f179a29e223d795502b80c1a877bca47a14/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3df45f179a29e223d795502b80c1a877bca47a14/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3df45f179a29e223d795502b80c1a877bca47a14", "patch": "@@ -1,3 +1,8 @@\n+2018-11-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/88018\n+\t* g++.dg/tsan/pr88018.C: New test.\n+\n 2018-11-15  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/87917"}]}