{"sha": "0c64a9cab4d4e776f2e0ba05ead2837ebc55f902", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM2NGE5Y2FiNGQ0ZTc3NmYyZTBiYTA1ZWFkMjgzN2ViYzU1ZjkwMg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-07-18T02:26:44Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-07-18T02:26:44Z"}, "message": "decl.c (lookup_name_real): Pull out single function here.\n\n\t* decl.c (lookup_name_real): Pull out single function here.\n\t(select_decl): Not here.\n\t(unqualified_namespace_lookup): Use CP_DECL_CONTEXT.\n\nFrom-SVN: r21268", "tree": {"sha": "d04d91d44d59712021c27b92fdddecee31324ea4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d04d91d44d59712021c27b92fdddecee31324ea4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902/comments", "author": null, "committer": null, "parents": [{"sha": "f193b4b996b99f0edb008fb0889f84fed7b4048c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f193b4b996b99f0edb008fb0889f84fed7b4048c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f193b4b996b99f0edb008fb0889f84fed7b4048c"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "5a3699df76cb87af81ba6cff56515d7620c43963", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0c64a9cab4d4e776f2e0ba05ead2837ebc55f902", "patch": "@@ -1,5 +1,9 @@\n 1998-07-17  Jason Merrill  <jason@yorick.cygnus.com>\n \n+\t* decl.c (lookup_name_real): Pull out single function here.\n+\t(select_decl): Not here.\n+\t(unqualified_namespace_lookup): Use CP_DECL_CONTEXT.\n+\n \t* decl.c (qualify_lookup): Tweak again.\n \n \t* pt.c (lookup_template_class): Don't mess with the context of the"}, {"sha": "913b9abd00aed3aa97d9351ebbb74d0e8a23df92", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c64a9cab4d4e776f2e0ba05ead2837ebc55f902/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=0c64a9cab4d4e776f2e0ba05ead2837ebc55f902", "patch": "@@ -4792,10 +4792,6 @@ select_decl (binding, flags)\n \t   && (!looking_for_template || TREE_CODE (val) != TEMPLATE_DECL))\n     val = NULL_TREE;\n \n-  /* If we have a single function from a using decl, pull it out.  */\n-  if (val && TREE_CODE (val) == OVERLOAD && ! really_overloaded_fn (val))\n-    val = OVL_FUNCTION (val);\n-\n   return val;\n }\n \n@@ -4848,9 +4844,7 @@ unqualified_namespace_lookup (name, flags)\n       val = select_decl (b, flags);\n       if (scope == global_namespace)\n \tbreak;\n-      scope = DECL_CONTEXT (scope);\n-      if (scope == NULL_TREE)\n-\tscope = global_namespace;\n+      scope = CP_DECL_CONTEXT (scope);\n     }\n   return val;\n }\n@@ -5102,6 +5096,10 @@ lookup_name_real (name, prefer_type, nonclass, namespaces_only)\n \tval = TYPE_MAIN_DECL (IDENTIFIER_TYPE_VALUE (name));\n       else if (TREE_TYPE (val) == error_mark_node)\n \tval = error_mark_node;\n+\n+      /* If we have a single function from a using decl, pull it out.  */\n+      if (TREE_CODE (val) == OVERLOAD && ! really_overloaded_fn (val))\n+\tval = OVL_FUNCTION (val);\n     }\n   else if (from_obj)\n     val = from_obj;"}]}