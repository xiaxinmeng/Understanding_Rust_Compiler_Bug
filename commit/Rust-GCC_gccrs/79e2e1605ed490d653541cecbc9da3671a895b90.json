{"sha": "79e2e1605ed490d653541cecbc9da3671a895b90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzllMmUxNjA1ZWQ0OTBkNjUzNTQxY2VjYmM5ZGEzNjcxYTg5NWI5MA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2001-10-30T04:43:03Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-10-30T04:43:03Z"}, "message": "tradcpp.c: Include intl.h.\n\n\t* tradcpp.c: Include intl.h.  Rename WARNING, ERROR, FATAL to\n\tMT_WARNING, MT_ERROR, MT_FATAL.\n\t(main): Call gcc_init_libintl.\n\t(v_message): Call gettext on msgid and \"warning: \"\n\t* tradcif.y: Include intl.h.\n\t(yyerror): Make parameter definition consistent with\n\tprototype.  Call gettext on msgid argument.\n\nFrom-SVN: r46627", "tree": {"sha": "d270717c81142b7949de669e9c7af60208e669ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d270717c81142b7949de669e9c7af60208e669ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/79e2e1605ed490d653541cecbc9da3671a895b90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79e2e1605ed490d653541cecbc9da3671a895b90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79e2e1605ed490d653541cecbc9da3671a895b90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79e2e1605ed490d653541cecbc9da3671a895b90/comments", "author": null, "committer": null, "parents": [{"sha": "bae5261adbac2ef2c69532d85da0a224dfc2650d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bae5261adbac2ef2c69532d85da0a224dfc2650d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bae5261adbac2ef2c69532d85da0a224dfc2650d"}], "stats": {"total": 40, "additions": 27, "deletions": 13}, "files": [{"sha": "54698ba7d91978c09305dd4afd3b1c0f824b91ce", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79e2e1605ed490d653541cecbc9da3671a895b90/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79e2e1605ed490d653541cecbc9da3671a895b90/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=79e2e1605ed490d653541cecbc9da3671a895b90", "patch": "@@ -1,3 +1,13 @@\n+2001-10-29  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* tradcpp.c: Include intl.h.  Rename WARNING, ERROR, FATAL to\n+\tMT_WARNING, MT_ERROR, MT_FATAL.\n+\t(main): Call gcc_init_libintl.\n+\t(v_message): Call gettext on msgid and \"warning: \"\n+\t* tradcif.y: Include intl.h.\n+\t(yyerror): Make parameter definition consistent with\n+\tprototype.  Call gettext on msgid argument.\n+\n 2001-10-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* combine.c (num_sign_bit_copies): Avoid signed/unsigned"}, {"sha": "7cedecc2dafb1dedac78b398375d0d107bdae662", "filename": "gcc/tradcif.y", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79e2e1605ed490d653541cecbc9da3671a895b90/gcc%2Ftradcif.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79e2e1605ed490d653541cecbc9da3671a895b90/gcc%2Ftradcif.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftradcif.y?ref=79e2e1605ed490d653541cecbc9da3671a895b90", "patch": "@@ -24,6 +24,7 @@ Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */\n %{\n #include \"config.h\"\n #include \"system.h\"\n+#include \"intl.h\"\n #include \"tradcpp.h\"\n #include <setjmp.h>\n \n@@ -533,10 +534,10 @@ parse_escape (string_ptr)\n }\n \n static void\n-yyerror (s)\n-     const char *s;\n+yyerror (msgid)\n+     const char *msgid;\n {\n-  error (\"%s\", s);\n+  error (\"%s\", _(msgid));\n   longjmp (parse_return_error, 1);\n }\n \f"}, {"sha": "730dfaa27cd380347a6d37195ca0cb2ce7c9babb", "filename": "gcc/tradcpp.c", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79e2e1605ed490d653541cecbc9da3671a895b90/gcc%2Ftradcpp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79e2e1605ed490d653541cecbc9da3671a895b90/gcc%2Ftradcpp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftradcpp.c?ref=79e2e1605ed490d653541cecbc9da3671a895b90", "patch": "@@ -25,6 +25,7 @@ Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */\n #include \"cppdefault.h\"\n #include \"tradcpp.h\"\n #include \"mkdeps.h\"\n+#include \"intl.h\"\n \n typedef unsigned char U_CHAR;\n \n@@ -382,7 +383,7 @@ static int comp_def_part\t PARAMS ((int, const U_CHAR *, int,\n static void delete_macro\t PARAMS ((HASHNODE *));\n \n /* First arg to v_message.  */\n-enum msgtype { WARNING = 0, ERROR, FATAL };\n+enum msgtype { MT_WARNING = 0, MT_ERROR, MT_FATAL };\n static void v_message\t\t PARAMS ((enum msgtype mtype, int line,\n \t\t\t\t\t  const char *msgid, va_list ap))\n      ATTRIBUTE_PRINTF (3, 0);\n@@ -538,6 +539,8 @@ main (argc, argv)\n \n   max_include_len = cpp_GCC_INCLUDE_DIR_len + 7;  /* ??? */\n \n+  gcc_init_libintl ();\n+\n   /* It's simplest to just create this struct whether or not it will\n      be needed.  */\n   deps = deps_init ();\n@@ -4654,7 +4657,7 @@ v_message (mtype, line, msgid, ap)\n   const char *fname = 0;\n   int i;\n \n-  if (mtype == WARNING && inhibit_warnings)\n+  if (mtype == MT_WARNING && inhibit_warnings)\n     return;\n \n   for (i = indepth; i >= 0; i--)\n@@ -4670,13 +4673,13 @@ v_message (mtype, line, msgid, ap)\n   else\n     fprintf (stderr, \"%s: \", progname);\n \n-  if (mtype == WARNING)\n-    fputs (\"warning: \", stderr);\n+  if (mtype == MT_WARNING)\n+    fputs (_(\"warning: \"), stderr);\n \n-  vfprintf (stderr, msgid, ap);\n+  vfprintf (stderr, _(msgid), ap);\n   putc ('\\n', stderr);\n \n-  if (mtype == ERROR)\n+  if (mtype == MT_ERROR)\n     errors++;\n }\n \n@@ -4689,7 +4692,7 @@ error VPARAMS ((const char *msgid, ...))\n   VA_OPEN(ap, msgid);\n   VA_FIXEDARG (ap, const char *, msgid);\n \n-  v_message (ERROR, 0, msgid, ap);\n+  v_message (MT_ERROR, 0, msgid, ap);\n   VA_CLOSE (ap);\n }\n \n@@ -4700,7 +4703,7 @@ error_with_line VPARAMS ((int line, const char *msgid, ...))\n   VA_FIXEDARG (ap, int, line);\n   VA_FIXEDARG (ap, const char *, msgid);\n \n-  v_message (ERROR, line, msgid, ap);\n+  v_message (MT_ERROR, line, msgid, ap);\n   VA_CLOSE (ap);\n }\n \n@@ -4719,7 +4722,7 @@ warning VPARAMS ((const char *msgid, ...))\n   VA_OPEN(ap, msgid);\n   VA_FIXEDARG (ap, const char *, msgid);\n \n-  v_message (WARNING, 0, msgid, ap);\n+  v_message (MT_WARNING, 0, msgid, ap);\n   VA_CLOSE (ap);\n }\n \n@@ -4729,7 +4732,7 @@ fatal VPARAMS ((const char *msgid, ...))\n   VA_OPEN(ap, msgid);\n   VA_FIXEDARG (ap, const char *, msgid);\n \n-  v_message (FATAL, 0, msgid, ap);\n+  v_message (MT_FATAL, 0, msgid, ap);\n   VA_CLOSE (ap);\n   exit (FATAL_EXIT_CODE);\n }"}]}