{"sha": "ea5f7a19924085268110c3f0bfa01da3456b4e85", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE1ZjdhMTk5MjQwODUyNjgxMTBjM2YwYmZhMDFkYTM0NTZiNGU4NQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-08-05T07:13:56Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-08-05T07:13:56Z"}, "message": "i386.c (ix86_expand_prologue): If the function uses a frame pointer, restore eax with an ebp-relative address.\n\n\t* config/i386/i386.c (ix86_expand_prologue): If the function uses a\n\tframe pointer, restore eax with an ebp-relative address.\n\nFrom-SVN: r85595", "tree": {"sha": "6da5d9b96b65f4dc9716e0104c3010cbd6600df8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6da5d9b96b65f4dc9716e0104c3010cbd6600df8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea5f7a19924085268110c3f0bfa01da3456b4e85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea5f7a19924085268110c3f0bfa01da3456b4e85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea5f7a19924085268110c3f0bfa01da3456b4e85", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea5f7a19924085268110c3f0bfa01da3456b4e85/comments", "author": null, "committer": null, "parents": [{"sha": "fce731b52f63132ac56268b256b11acc4f652cbd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fce731b52f63132ac56268b256b11acc4f652cbd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fce731b52f63132ac56268b256b11acc4f652cbd"}], "stats": {"total": 49, "additions": 48, "deletions": 1}, "files": [{"sha": "5df219577c69351729c78607fec008b8953ca11a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ea5f7a19924085268110c3f0bfa01da3456b4e85", "patch": "@@ -1,3 +1,8 @@\n+2004-08-05  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/i386/i386.c (ix86_expand_prologue): If the function uses a\n+\tframe pointer, restore eax with an ebp-relative address.\n+\n 2004-08-04  Geoffrey Keating  <geoffk@apple.com>\n \n \tPR 14516"}, {"sha": "f05ff5e5ede975b7111609ce0e3e6675335d970d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=ea5f7a19924085268110c3f0bfa01da3456b4e85", "patch": "@@ -5399,7 +5399,14 @@ ix86_expand_prologue (void)\n \n       if (eax_live)\n \t{\n-\t  rtx t = plus_constant (stack_pointer_rtx, allocate);\n+\t  rtx t;\n+\t  if (frame_pointer_needed)\n+\t    t = plus_constant (hard_frame_pointer_rtx,\n+\t\t\t       allocate\n+\t\t\t       - frame.to_allocate\n+\t\t\t       - frame.nregs * UNITS_PER_WORD);\n+\t  else\n+\t    t = plus_constant (stack_pointer_rtx, allocate);\n \t  emit_move_insn (eax, gen_rtx_MEM (SImode, t));\n \t}\n     }"}, {"sha": "3eadb5adb43fa0d70d467199eec1276ce5a8be76", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ea5f7a19924085268110c3f0bfa01da3456b4e85", "patch": "@@ -1,3 +1,7 @@\n+2004-08-05  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* gcc.c-torture/execute/20040805-1.c: New test.\n+\n 2004-08-04  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* gcc.dg/20020118-1.c: Declare abort."}, {"sha": "f09fc49a26884c49e8f33c3a3be808277a0f1713", "filename": "gcc/testsuite/gcc.c-torture/execute/20040805-1.c", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20040805-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea5f7a19924085268110c3f0bfa01da3456b4e85/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20040805-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20040805-1.c?ref=ea5f7a19924085268110c3f0bfa01da3456b4e85", "patch": "@@ -0,0 +1,31 @@\n+#if __INT_MAX__ < 32768 || (defined(STACK_SIZE) && STACK_SIZE < 0x12000)\n+int main () { exit (0); }\n+#else\n+int a[2] = { 2, 3 };\n+\n+static int __attribute__((noinline))\n+bar (int x, void *b)\n+{\n+  a[0]++;\n+  return x;\n+}\n+\n+static int __attribute__((noinline))\n+foo (int x)\n+{\n+  char buf[0x10000];\n+  int y = a[0];\n+  a[1] = y;\n+  x = bar (x, buf);\n+  y = bar (y, buf);\n+  return x + y;\n+}\n+\n+int\n+main ()\n+{\n+  if (foo (100) != 102)\n+    abort ();\n+  exit (0);\n+}\n+#endif"}]}