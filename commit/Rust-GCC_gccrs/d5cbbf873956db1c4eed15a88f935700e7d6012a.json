{"sha": "d5cbbf873956db1c4eed15a88f935700e7d6012a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDVjYmJmODczOTU2ZGIxYzRlZWQxNWE4OGY5MzU3MDBlN2Q2MDEyYQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2018-07-12T12:56:45Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-07-12T12:56:45Z"}, "message": "lto-streamer-out.c (DFS::DFS_write_tree_body): Do not stream DECL_FCONTEXT\n\n\n\t* lto-streamer-out.c (DFS::DFS_write_tree_body): Do not stream\n\tDECL_FCONTEXT\n\t(hash_tree): Do not hash DECL_FCONTEXT\n\t* tree-streamer-in.c (lto_input_ts_field_decl_tree_pointers):\n\tDo not stream DECL_FCONTEXT.\n\t* tree-streamer-out.c (write_ts_field_decl_tree_pointers): Likewise.\n\t* tree.c (free_lang_data_in_decl): Free DECL_FCONTEXT.\n\nFrom-SVN: r262585", "tree": {"sha": "ab073b0219efe2dea86d85c77c333d9c36bdc03e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab073b0219efe2dea86d85c77c333d9c36bdc03e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5cbbf873956db1c4eed15a88f935700e7d6012a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5cbbf873956db1c4eed15a88f935700e7d6012a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5cbbf873956db1c4eed15a88f935700e7d6012a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5cbbf873956db1c4eed15a88f935700e7d6012a/comments", "author": null, "committer": null, "parents": [{"sha": "4405d067adffd5b0d5e0099596fa33e5506d68c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4405d067adffd5b0d5e0099596fa33e5506d68c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4405d067adffd5b0d5e0099596fa33e5506d68c8"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "89d8fa87b3e19fcb0065537fcb78b6f644684cf7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d5cbbf873956db1c4eed15a88f935700e7d6012a", "patch": "@@ -1,3 +1,13 @@\n+2018-07-12  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* lto-streamer-out.c (DFS::DFS_write_tree_body): Do not stream\n+\tDECL_FCONTEXT\n+\t(hash_tree): Do not hash DECL_FCONTEXT\n+\t* tree-streamer-in.c (lto_input_ts_field_decl_tree_pointers):\n+\tDo not stream DECL_FCONTEXT.\n+\t* tree-streamer-out.c (write_ts_field_decl_tree_pointers): Likewise.\n+\t* tree.c (free_lang_data_in_decl): Free DECL_FCONTEXT.\n+\n 2018-07-12  Richard Biener  <rguenther@suse.de>\n \n \tPR debug/86462"}, {"sha": "bdbe591f8a1618017450a0b7eb21a2ab0a7c22e9", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=d5cbbf873956db1c4eed15a88f935700e7d6012a", "patch": "@@ -832,7 +832,7 @@ DFS::DFS_write_tree_body (struct output_block *ob,\n       DFS_follow_tree_edge (DECL_BIT_FIELD_TYPE (expr));\n       DFS_follow_tree_edge (DECL_BIT_FIELD_REPRESENTATIVE (expr));\n       DFS_follow_tree_edge (DECL_FIELD_BIT_OFFSET (expr));\n-      DFS_follow_tree_edge (DECL_FCONTEXT (expr));\n+      gcc_checking_assert (!DECL_FCONTEXT (expr));\n     }\n \n   if (CODE_CONTAINS_STRUCT (code, TS_FUNCTION_DECL))\n@@ -1249,7 +1249,6 @@ hash_tree (struct streamer_tree_cache_d *cache, hash_map<tree, hashval_t> *map,\n       visit (DECL_BIT_FIELD_TYPE (t));\n       visit (DECL_BIT_FIELD_REPRESENTATIVE (t));\n       visit (DECL_FIELD_BIT_OFFSET (t));\n-      visit (DECL_FCONTEXT (t));\n     }\n \n   if (CODE_CONTAINS_STRUCT (code, TS_FUNCTION_DECL))"}, {"sha": "43cd9a4cad1323f1a208883302c4bfbd20755953", "filename": "gcc/tree-streamer-in.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Ftree-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Ftree-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer-in.c?ref=d5cbbf873956db1c4eed15a88f935700e7d6012a", "patch": "@@ -758,7 +758,6 @@ lto_input_ts_field_decl_tree_pointers (struct lto_input_block *ib,\n   DECL_BIT_FIELD_TYPE (expr) = stream_read_tree (ib, data_in);\n   DECL_BIT_FIELD_REPRESENTATIVE (expr) = stream_read_tree (ib, data_in);\n   DECL_FIELD_BIT_OFFSET (expr) = stream_read_tree (ib, data_in);\n-  DECL_FCONTEXT (expr) = stream_read_tree (ib, data_in);\n }\n \n "}, {"sha": "a68cd4b135bf9c44ea613952d8a2cf86a664a638", "filename": "gcc/tree-streamer-out.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Ftree-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Ftree-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer-out.c?ref=d5cbbf873956db1c4eed15a88f935700e7d6012a", "patch": "@@ -646,7 +646,6 @@ write_ts_field_decl_tree_pointers (struct output_block *ob, tree expr,\n   stream_write_tree (ob, DECL_BIT_FIELD_TYPE (expr), ref_p);\n   stream_write_tree (ob, DECL_BIT_FIELD_REPRESENTATIVE (expr), ref_p);\n   stream_write_tree (ob, DECL_FIELD_BIT_OFFSET (expr), ref_p);\n-  stream_write_tree (ob, DECL_FCONTEXT (expr), ref_p);\n }\n \n "}, {"sha": "bace9c8af2e3237e51f2a3f96afabfa1cedae8dd", "filename": "gcc/tree.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5cbbf873956db1c4eed15a88f935700e7d6012a/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=d5cbbf873956db1c4eed15a88f935700e7d6012a", "patch": "@@ -5280,6 +5280,7 @@ free_lang_data_in_decl (tree decl)\n   free_lang_data_in_one_sizepos (&DECL_SIZE_UNIT (decl));\n   if (TREE_CODE (decl) == FIELD_DECL)\n     {\n+      DECL_FCONTEXT (decl) = NULL;\n       free_lang_data_in_one_sizepos (&DECL_FIELD_OFFSET (decl));\n       if (TREE_CODE (DECL_CONTEXT (decl)) == QUAL_UNION_TYPE)\n \tDECL_QUALIFIER (decl) = NULL_TREE;"}]}