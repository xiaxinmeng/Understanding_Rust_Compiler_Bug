{"sha": "27a725e2935ad18edd9a92a2555f543d72af391d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjdhNzI1ZTI5MzVhZDE4ZWRkOWE5MmEyNTU1ZjU0M2Q3MmFmMzkxZA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-10-10T14:42:14Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-10-10T14:42:14Z"}, "message": "re PR c++/24275 (Previously accepted code fails with 4.0.2)\n\n\tPR c++/24275\n\t* pt.c (instantiate_decl): Instantiate the initializer of\n\ta static data member in the namespace containing the class\n\tcontaining the static data member.\n\tPR c++/24275\n\t* g++.dg/template/static19.C: New test.\n\nFrom-SVN: r105173", "tree": {"sha": "71a75c334ad104b81d807cee2f2e9f8da74252dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/71a75c334ad104b81d807cee2f2e9f8da74252dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27a725e2935ad18edd9a92a2555f543d72af391d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27a725e2935ad18edd9a92a2555f543d72af391d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27a725e2935ad18edd9a92a2555f543d72af391d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27a725e2935ad18edd9a92a2555f543d72af391d/comments", "author": null, "committer": null, "parents": [{"sha": "f0d60e22101308e3ed63e42ec33257742cc07380", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0d60e22101308e3ed63e42ec33257742cc07380", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0d60e22101308e3ed63e42ec33257742cc07380"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "2bd96a6d57bfe98daaf09811dd5e98a382ceef01", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27a725e2935ad18edd9a92a2555f543d72af391d/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27a725e2935ad18edd9a92a2555f543d72af391d/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=27a725e2935ad18edd9a92a2555f543d72af391d", "patch": "@@ -11558,12 +11558,15 @@ instantiate_decl (tree d, int defer_ok,\n \t  && !DECL_INITIAL (d) \n \t  && DECL_INITIAL (code_pattern))\n \t{\n+\t  tree ns = decl_namespace_context (d);\n+\t  push_nested_namespace (ns);\n \t  push_nested_class (DECL_CONTEXT (d));\n \t  DECL_INITIAL (d)\n \t    = tsubst_expr (DECL_INITIAL (code_pattern), \n \t\t\t   args,\n \t\t\t   tf_error | tf_warning, NULL_TREE);\n \t  pop_nested_class ();\n+\t  pop_nested_namespace (ns);\n \t}\n \n       /* We restore the source position here because it's used by"}, {"sha": "d720127b8f8e1d138c98f49af0f23af4bbc9fd9f", "filename": "gcc/testsuite/g++.dg/template/static19.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27a725e2935ad18edd9a92a2555f543d72af391d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic19.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27a725e2935ad18edd9a92a2555f543d72af391d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic19.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic19.C?ref=27a725e2935ad18edd9a92a2555f543d72af391d", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/24275\n+\n+template <bool val>  struct bool_var {\n+  static const bool value = val;\n+};\n+namespace is_inc_ {\n+  struct any {\n+    template <class T> any(T const&);\n+  };\n+  int operator++(any const&);\n+  template <class T>   struct impl {\n+    static T &x;\n+    static const bool value = sizeof(++x) == 1;\n+  };\n+}\n+template<typename T> struct is_incr : bool_var< is_inc_::impl<T>::value> {};\n+struct not_incr{};\n+typedef int sa1[ is_incr<not_incr>::value ? -1 : 1];"}]}