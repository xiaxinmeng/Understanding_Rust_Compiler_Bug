{"sha": "b79a08f6c4b57f701b6a879365b5506003cefba7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjc5YTA4ZjZjNGI1N2Y3MDFiNmE4NzkzNjViNTUwNjAwM2NlZmJhNw==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-06-11T21:58:31Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-06-11T21:58:31Z"}, "message": "re PR target/44481 (__builtin_parity() causes ICE in trunc_int_for_mode())\n\n\tPR target/44481\n\t* config/i386/i386.md (UNSPEC_PARITY): New unspec.\n\t(paritydi2_cmp): Use UNSPEC_PARITY unspec insted of parity RTX.\n\t(partiysi2_cmp): Ditto.\n\t(*partiyhi2_cmp): Ditto.\n\t(*parityqi2_cmp): Remove.\n\ntestsuite/ChangeLog:\n\n\tPR target/44481\n\t* gcc.target/i386/pr44481.c: New test.\n\nFrom-SVN: r160638", "tree": {"sha": "0018d742cb5a16c65f66b16a0f90e1cd47d47c2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0018d742cb5a16c65f66b16a0f90e1cd47d47c2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b79a08f6c4b57f701b6a879365b5506003cefba7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b79a08f6c4b57f701b6a879365b5506003cefba7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b79a08f6c4b57f701b6a879365b5506003cefba7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b79a08f6c4b57f701b6a879365b5506003cefba7/comments", "author": null, "committer": null, "parents": [{"sha": "d5568f03cda87e0e877d957f9613990e75bec269", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5568f03cda87e0e877d957f9613990e75bec269", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5568f03cda87e0e877d957f9613990e75bec269"}], "stats": {"total": 59, "additions": 41, "deletions": 18}, "files": [{"sha": "7b5980b39acbe9df94f77ca0b186c9ed19df0ec7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b79a08f6c4b57f701b6a879365b5506003cefba7", "patch": "@@ -1,8 +1,16 @@\n+2010-06-11  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/44481\n+\t* config/i386/i386.md (UNSPEC_PARITY): New unspec.\n+\t(paritydi2_cmp): Use UNSPEC_PARITY unspec insted of parity RTX.\n+\t(partiysi2_cmp): Ditto.\n+\t(*partiyhi2_cmp): Ditto.\n+\t(*parityqi2_cmp): Remove.\n+\n 2010-06-11  Jan Hubicka  <jh@suse.cz>\n \n-\t* bitmap.h (+bmp_iter_next_bit): New.\n-\t(bmp_iter_set, bmp_iter_and, bmp_iter_and_compl):\n-\tUse it.\n+\t* bitmap.h (bmp_iter_next_bit): New.\n+\t(bmp_iter_set, bmp_iter_and, bmp_iter_and_compl): Use it.\n \n 2010-06-11  Sandra Loosemore  <sandra@codesourcery.com>\n             Eric Botcazou  <ebotcazou@adacore.com>"}, {"sha": "675b8c9ab6d87d9aae611752c50ce7534d30b9ab", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 9, "deletions": 13, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=b79a08f6c4b57f701b6a879365b5506003cefba7", "patch": "@@ -97,6 +97,7 @@\n   UNSPEC_SCAS\n   UNSPEC_FNSTSW\n   UNSPEC_SAHF\n+  UNSPEC_PARITY\n   UNSPEC_FSTCW\n   UNSPEC_ADD_CARRY\n   UNSPEC_FLDCW\n@@ -12186,7 +12187,8 @@\n \n (define_insn_and_split \"paritydi2_cmp\"\n   [(set (reg:CC FLAGS_REG)\n-\t(parity:CC (match_operand:DI 3 \"register_operand\" \"0\")))\n+\t(unspec:CC [(match_operand:DI 3 \"register_operand\" \"0\")]\n+\t\t   UNSPEC_PARITY))\n    (clobber (match_scratch:DI 0 \"=r\"))\n    (clobber (match_scratch:SI 1 \"=&r\"))\n    (clobber (match_scratch:HI 2 \"=Q\"))]\n@@ -12199,7 +12201,7 @@\n       (clobber (reg:CC FLAGS_REG))])\n    (parallel\n      [(set (reg:CC FLAGS_REG)\n-\t   (parity:CC (match_dup 1)))\n+\t   (unspec:CC [(match_dup 1)] UNSPEC_PARITY))\n       (clobber (match_dup 1))\n       (clobber (match_dup 2))])]\n {\n@@ -12216,7 +12218,8 @@\n \n (define_insn_and_split \"paritysi2_cmp\"\n   [(set (reg:CC FLAGS_REG)\n-\t(parity:CC (match_operand:SI 2 \"register_operand\" \"0\")))\n+\t(unspec:CC [(match_operand:SI 2 \"register_operand\" \"0\")]\n+\t\t   UNSPEC_PARITY))\n    (clobber (match_scratch:SI 0 \"=r\"))\n    (clobber (match_scratch:HI 1 \"=&Q\"))]\n   \"! TARGET_POPCNT\"\n@@ -12228,7 +12231,7 @@\n       (clobber (reg:CC FLAGS_REG))])\n    (parallel\n      [(set (reg:CC FLAGS_REG)\n-\t   (parity:CC (match_dup 1)))\n+\t   (unspec:CC [(match_dup 1)] UNSPEC_PARITY))\n       (clobber (match_dup 1))])]\n {\n   operands[3] = gen_lowpart (HImode, operands[2]);\n@@ -12239,20 +12242,13 @@\n \n (define_insn \"*parityhi2_cmp\"\n   [(set (reg:CC FLAGS_REG)\n-\t(parity:CC (match_operand:HI 1 \"register_operand\" \"0\")))\n+\t(unspec:CC [(match_operand:HI 1 \"register_operand\" \"0\")]\n+\t\t   UNSPEC_PARITY))\n    (clobber (match_scratch:HI 0 \"=Q\"))]\n   \"! TARGET_POPCNT\"\n   \"xor{b}\\t{%h0, %b0|%b0, %h0}\"\n   [(set_attr \"length\" \"2\")\n    (set_attr \"mode\" \"HI\")])\n-\n-(define_insn \"*parityqi2_cmp\"\n-  [(set (reg:CC FLAGS_REG)\n-\t(parity:CC (match_operand:QI 0 \"register_operand\" \"q\")))]\n-  \"! TARGET_POPCNT\"\n-  \"test{b}\\t%0, %0\"\n-  [(set_attr \"length\" \"2\")\n-   (set_attr \"mode\" \"QI\")])\n \f\n ;; Thread-local storage patterns for ELF.\n ;;"}, {"sha": "885f215b9213a0fbebd4587dc673ebda3ef4c7cd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b79a08f6c4b57f701b6a879365b5506003cefba7", "patch": "@@ -1,3 +1,8 @@\n+2010-06-11  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/44481\n+\t* gcc.target/i386/pr44481.c: New test.\n+\n 2010-06-11  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc.dg/pr42461.c: Compile at -O2 instead of -O.\n@@ -8,7 +13,7 @@\n \t* gcc.dg/tree-ssa/pr44483.c: New.\n \n 2010-06-11  Paul Brook  <paul@codesourcery.com>\n- \n+\n \t* g++.dg/other/arm-neon-1.C: New test.\n \n 2010-06-11  Paul Thomas  <pault@gcc.gnu.org>\n@@ -159,7 +164,7 @@\n \n 2010-06-08  Andrew Pinski <pinskia@gmail.com>\n \t    Shujing Zhao  <pearly.zhao@oracle.com>\n-\t\n+\n \tPR c/37724\n \t* gcc.dg/c90-const-expr-10.c: Adjust.\n \t* gcc.dg/c99-const-expr-10.c: Adjust."}, {"sha": "701268b5656055d6242dd4ff9d77fc4fc7e16ba4", "filename": "gcc/testsuite/gcc.target/i386/pr44481.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr44481.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b79a08f6c4b57f701b6a879365b5506003cefba7/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr44481.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr44481.c?ref=b79a08f6c4b57f701b6a879365b5506003cefba7", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+static inline unsigned\n+parity (unsigned x)\n+{\n+  return (unsigned) __builtin_parity (x);\n+}\n+\n+unsigned\n+f (unsigned rpoly)\n+{\n+  return parity (rpoly & 1) ^ parity (rpoly & 6);\n+}"}]}