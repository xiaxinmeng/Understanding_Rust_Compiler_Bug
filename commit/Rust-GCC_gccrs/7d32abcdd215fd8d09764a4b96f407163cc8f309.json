{"sha": "7d32abcdd215fd8d09764a4b96f407163cc8f309", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QzMmFiY2RkMjE1ZmQ4ZDA5NzY0YTRiOTZmNDA3MTYzY2M4ZjMwOQ==", "commit": {"author": {"name": "Per Bothner", "email": "per@bothner.com", "date": "2001-03-16T04:32:05Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2001-03-16T04:32:05Z"}, "message": "jvspec.c (lang_specific_driver): Fix -C handling.\n\n\n\t* jvspec.c (lang_specific_driver):  Fix -C handling.\n\tCheck -save-temps to see if temp @FILE should be deleted.\n\tFollow-up to/fix for February 16 patch.\n\nFrom-SVN: r40530", "tree": {"sha": "6759c9ca5b3f9354dd7cc01e84453603c3218085", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6759c9ca5b3f9354dd7cc01e84453603c3218085"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d32abcdd215fd8d09764a4b96f407163cc8f309", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d32abcdd215fd8d09764a4b96f407163cc8f309", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d32abcdd215fd8d09764a4b96f407163cc8f309", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d32abcdd215fd8d09764a4b96f407163cc8f309/comments", "author": {"login": "PerBothner", "id": 10293361, "node_id": "MDQ6VXNlcjEwMjkzMzYx", "avatar_url": "https://avatars.githubusercontent.com/u/10293361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PerBothner", "html_url": "https://github.com/PerBothner", "followers_url": "https://api.github.com/users/PerBothner/followers", "following_url": "https://api.github.com/users/PerBothner/following{/other_user}", "gists_url": "https://api.github.com/users/PerBothner/gists{/gist_id}", "starred_url": "https://api.github.com/users/PerBothner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PerBothner/subscriptions", "organizations_url": "https://api.github.com/users/PerBothner/orgs", "repos_url": "https://api.github.com/users/PerBothner/repos", "events_url": "https://api.github.com/users/PerBothner/events{/privacy}", "received_events_url": "https://api.github.com/users/PerBothner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "19f8e04bff25d9c494c95f994b3ec2b4cc7b7f77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19f8e04bff25d9c494c95f994b3ec2b4cc7b7f77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19f8e04bff25d9c494c95f994b3ec2b4cc7b7f77"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "ebc9592f03652486515a6533a492e8d2d0e83543", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d32abcdd215fd8d09764a4b96f407163cc8f309/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d32abcdd215fd8d09764a4b96f407163cc8f309/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=7d32abcdd215fd8d09764a4b96f407163cc8f309", "patch": "@@ -1,5 +1,9 @@\n 2001-03-13  Per Bothner  <per@bothner.com>\n \n+\t* jvspec.c (lang_specific_driver):  Fix -C handling.\n+\tCheck -save-temps to see if temp @FILE should be deleted.\n+\tFollow-up to/fix for February 16 patch.\n+\n \t* verify.c (verify_jvm_instructions):  Better error msgs for dup.\n \t(type_stack_dup):  Remove no-longer neded error check.\n "}, {"sha": "f1d55c65e8f9623a5a6578454dc8e90088eb6360", "filename": "gcc/java/jvspec.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d32abcdd215fd8d09764a4b96f407163cc8f309/gcc%2Fjava%2Fjvspec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d32abcdd215fd8d09764a4b96f407163cc8f309/gcc%2Fjava%2Fjvspec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjvspec.c?ref=7d32abcdd215fd8d09764a4b96f407163cc8f309", "patch": "@@ -101,6 +101,8 @@ lang_specific_driver (in_argc, in_argv, in_added_libraries)\n   /* If non-zero, the user gave us the `-v' flag.  */ \n   int saw_verbose_flag = 0;\n \n+  int saw_save_temps = 0;\n+\n   /* This will be 0 if we encounter a situation where we should not\n      link in libgcj.  */\n   int library = 1;\n@@ -302,6 +304,8 @@ lang_specific_driver (in_argc, in_argv, in_added_libraries)\n \t      will_link = 0;\n \t      continue;\n \t    }\n+          else if (strcmp (argv[i], \"-save-temps\") == 0)\n+\t    saw_save_temps = 1;\n           else if (strcmp (argv[i], \"-static-libgcc\") == 0\n                    || strcmp (argv[i], \"-static\") == 0)\n \t    shared_libgcc = 0;\n@@ -363,7 +367,8 @@ lang_specific_driver (in_argc, in_argv, in_added_libraries)\n       if (saw_o)\n \tfatal (\"cannot specify both -C and -o\");\n     }\n-  if (saw_o && java_files_count + (saw_C ? 0 : class_files_count) > 1)\n+  if ((saw_o && java_files_count + class_files_count > 1)\n+      || (saw_C && java_files_count > 1))\n     combine_inputs = 1;\n   if (class_files_count > 1)\n     combine_inputs = 1;\n@@ -373,7 +378,7 @@ lang_specific_driver (in_argc, in_argv, in_added_libraries)\n       filelist_filename = make_temp_file (\"jx\");\n       if (filelist_filename == NULL)\n \tfatal (\"cannot create temporary file\");\n-      record_temp_file (filelist_filename, 1, 0);\n+      record_temp_file (filelist_filename, ! saw_save_temps, 0);\n       filelist_file = fopen (filelist_filename, \"w\");\n       if (filelist_file == NULL)\n \tpfatal_with_name (filelist_filename);"}]}