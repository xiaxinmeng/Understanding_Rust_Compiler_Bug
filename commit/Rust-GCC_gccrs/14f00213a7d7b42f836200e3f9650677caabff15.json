{"sha": "14f00213a7d7b42f836200e3f9650677caabff15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTRmMDAyMTNhN2Q3YjQyZjgzNjIwMGUzZjk2NTA2NzdjYWFiZmYxNQ==", "commit": {"author": {"name": "Franz Sirl", "email": "Franz.Sirl-kernel@lauterbach.com", "date": "2003-02-25T23:11:55Z"}, "committer": {"name": "Franz Sirl", "email": "sirl@gcc.gnu.org", "date": "2003-02-25T23:11:55Z"}, "message": "re PR target/9732 ([ppc32] Wrong code with -O2 -fPIC)\n\n\t2003-02-25  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>\n\n\tPR target/9732\n\t* config/rs6000/rs6000.c (first_reg_to_save): Handle\n\tPIC_OFFSET_TABLE_REGNUM for -fPIC too.\n\t(rs6000_emit_prologue): Likewise.\n\t(rs6000_emit_epilogue): Likewise.\n\t* config/rs6000/rs6000.h (CONDITIONAL_REGISTER_USAGE): Make\n\tPIC_OFFSET_TABLE_REGNUM a fixed register for -fPIC.\n\nFrom-SVN: r63423", "tree": {"sha": "5b1471a85fa181b5a5a2f3d4232a349c2d9b0ee8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b1471a85fa181b5a5a2f3d4232a349c2d9b0ee8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14f00213a7d7b42f836200e3f9650677caabff15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14f00213a7d7b42f836200e3f9650677caabff15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14f00213a7d7b42f836200e3f9650677caabff15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14f00213a7d7b42f836200e3f9650677caabff15/comments", "author": {"login": "jinkama-san", "id": 1462162, "node_id": "MDQ6VXNlcjE0NjIxNjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1462162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinkama-san", "html_url": "https://github.com/jinkama-san", "followers_url": "https://api.github.com/users/jinkama-san/followers", "following_url": "https://api.github.com/users/jinkama-san/following{/other_user}", "gists_url": "https://api.github.com/users/jinkama-san/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinkama-san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinkama-san/subscriptions", "organizations_url": "https://api.github.com/users/jinkama-san/orgs", "repos_url": "https://api.github.com/users/jinkama-san/repos", "events_url": "https://api.github.com/users/jinkama-san/events{/privacy}", "received_events_url": "https://api.github.com/users/jinkama-san/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8164b17107f599ed129b0574236e3738fa43dbef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8164b17107f599ed129b0574236e3738fa43dbef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8164b17107f599ed129b0574236e3738fa43dbef"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "3bc23a7ecf4390e5aa57b9e8ba7d60fcd5e39109", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14f00213a7d7b42f836200e3f9650677caabff15/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14f00213a7d7b42f836200e3f9650677caabff15/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=14f00213a7d7b42f836200e3f9650677caabff15", "patch": "@@ -1,3 +1,13 @@\n+2003-02-25  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>\n+\n+\tPR target/9732\n+\t* config/rs6000/rs6000.c (first_reg_to_save): Handle\n+\tPIC_OFFSET_TABLE_REGNUM for -fPIC too.\n+\t(rs6000_emit_prologue): Likewise.\n+\t(rs6000_emit_epilogue): Likewise.\n+\t* config/rs6000/rs6000.h (CONDITIONAL_REGISTER_USAGE): Make\n+\tPIC_OFFSET_TABLE_REGNUM a fixed register for -fPIC.\n+\n 2003-02-25  Richard Henderson  <rth@redhat.com>\n \n \t* real.c (real_to_integer2): Force overflow result only for"}, {"sha": "9189614484a7de5011e0ae6b766d0b68061f2da5", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14f00213a7d7b42f836200e3f9650677caabff15/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14f00213a7d7b42f836200e3f9650677caabff15/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=14f00213a7d7b42f836200e3f9650677caabff15", "patch": "@@ -8918,7 +8918,7 @@ first_reg_to_save ()\n     if (regs_ever_live[first_reg] \n \t&& (! call_used_regs[first_reg]\n \t    || (first_reg == RS6000_PIC_OFFSET_TABLE_REGNUM\n-\t\t&& ((DEFAULT_ABI == ABI_V4 && flag_pic == 1)\n+\t\t&& ((DEFAULT_ABI == ABI_V4 && flag_pic != 0)\n \t\t    || (DEFAULT_ABI == ABI_DARWIN && flag_pic)))))\n       break;\n \n@@ -10503,7 +10503,7 @@ rs6000_emit_prologue ()\n \tif ((regs_ever_live[info->first_gp_reg_save+i] \n \t     && ! call_used_regs[info->first_gp_reg_save+i])\n \t    || (i+info->first_gp_reg_save == RS6000_PIC_OFFSET_TABLE_REGNUM\n-\t\t&& ((DEFAULT_ABI == ABI_V4 && flag_pic == 1)\n+\t\t&& ((DEFAULT_ABI == ABI_V4 && flag_pic != 0)\n \t\t    || (DEFAULT_ABI == ABI_DARWIN && flag_pic))))\n \t  {\n \t    rtx addr, reg, mem;\n@@ -10919,7 +10919,7 @@ rs6000_emit_epilogue (sibcall)\n       if ((regs_ever_live[info->first_gp_reg_save+i] \n \t   && ! call_used_regs[info->first_gp_reg_save+i])\n \t  || (i+info->first_gp_reg_save == RS6000_PIC_OFFSET_TABLE_REGNUM\n-\t      && ((DEFAULT_ABI == ABI_V4 && flag_pic == 1)\n+\t      && ((DEFAULT_ABI == ABI_V4 && flag_pic != 0)\n \t\t  || (DEFAULT_ABI == ABI_DARWIN && flag_pic))))\n \t{\n \t  rtx addr = gen_rtx_PLUS (Pmode, frame_reg_rtx, "}, {"sha": "da04dc02fe7786a7c0cca24be86a42e39b7171e3", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14f00213a7d7b42f836200e3f9650677caabff15/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14f00213a7d7b42f836200e3f9650677caabff15/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=14f00213a7d7b42f836200e3f9650677caabff15", "patch": "@@ -988,6 +988,10 @@ extern int rs6000_default_long_calls;\n     for (i = 32; i < 64; i++)\t\t\t\t\t\t\\\n       fixed_regs[i] = call_used_regs[i]\t\t\t\t\t\\\n         = call_really_used_regs[i] = 1;\t\t\t\t\t\\\n+  if (DEFAULT_ABI == ABI_V4\t\t\t\t\t\t\\\n+      && PIC_OFFSET_TABLE_REGNUM != INVALID_REGNUM\t\t\t\\\n+      && flag_pic == 2)\t\t\t\t\t\t\t\\\n+    fixed_regs[RS6000_PIC_OFFSET_TABLE_REGNUM] = 1;\t\t\t\\\n   if (DEFAULT_ABI == ABI_V4\t\t\t\t\t\t\\\n       && PIC_OFFSET_TABLE_REGNUM != INVALID_REGNUM\t\t\t\\\n       && flag_pic == 1)\t\t\t\t\t\t\t\\"}]}