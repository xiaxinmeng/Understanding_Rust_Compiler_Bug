{"sha": "3698f44e0eaa13abd10a7e80de48a06f151d5d3d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzY5OGY0NGUwZWFhMTNhYmQxMGE3ZTgwZGU0OGEwNmYxNTFkNWQzZA==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@s-direktnet.de", "date": "1998-01-26T22:54:52Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-01-26T22:54:52Z"}, "message": "libgcc2.c (__clear_insn_cache): On sysV68 enable the memctl stuff only if MCT_TEXT is #define'd.\n\n        * libgcc2.c (__clear_insn_cache): On sysV68 enable the memctl\n        stuff only if MCT_TEXT is #define'd.\n\nFrom-SVN: r17496", "tree": {"sha": "ceb6aa6d7c4e146161912b7b8bc3967f50829426", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ceb6aa6d7c4e146161912b7b8bc3967f50829426"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3698f44e0eaa13abd10a7e80de48a06f151d5d3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3698f44e0eaa13abd10a7e80de48a06f151d5d3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3698f44e0eaa13abd10a7e80de48a06f151d5d3d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3698f44e0eaa13abd10a7e80de48a06f151d5d3d/comments", "author": null, "committer": null, "parents": [{"sha": "ac8a456ac75d4466455b21db57f947704a4ed458", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac8a456ac75d4466455b21db57f947704a4ed458", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac8a456ac75d4466455b21db57f947704a4ed458"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "3ec5d67effec2cb9e9c211ecd7ccc375baaf776b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3698f44e0eaa13abd10a7e80de48a06f151d5d3d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3698f44e0eaa13abd10a7e80de48a06f151d5d3d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3698f44e0eaa13abd10a7e80de48a06f151d5d3d", "patch": "@@ -1,3 +1,8 @@\n+Mon Jan 26 23:57:39 1998  Manfred Hollstein  <manfred@s-direktnet.de>\n+\n+\t* libgcc2.c (__clear_insn_cache): On sysV68 enable the memctl\n+\tstuff only if MCT_TEXT is #define'd.\n+\n Mon Jan 26 23:52:51 1998  Markus F.X.J. Oberhumer <k3040e4@c210.edvz.uni-linz.ac.at>\n \n \t* configure.in (i*86-pc-msdosdjgpp): Treat like msdos & go32"}, {"sha": "673d2f316d14edcdada675a17a5d70809bdeb647", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3698f44e0eaa13abd10a7e80de48a06f151d5d3d/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3698f44e0eaa13abd10a7e80de48a06f151d5d3d/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=3698f44e0eaa13abd10a7e80de48a06f151d5d3d", "patch": "@@ -2724,7 +2724,10 @@ __enable_execute_stack ()\n \n /* Motorola forgot to put memctl.o in the libp version of libc881.a,\n    so define it here, because we need it in __clear_insn_cache below */\n+/* On older versions of this OS, no memctl or MCT_TEXT are defined;\n+   hence we enable this stuff only if MCT_TEXT is #define'd.  */\n \n+#ifdef MCT_TEXT\n asm(\"\\n\\\n \tglobal memctl\\n\\\n memctl:\\n\\\n@@ -2735,13 +2738,15 @@ memctl:\\n\\\n noerror:\\n\\\n \tmovq &0,%d0\\n\\\n \trts\");\n+#endif\n \n /* Clear instruction cache so we can call trampolines on stack.\n    This is called from FINALIZE_TRAMPOLINE in mot3300.h.  */\n \n void\n __clear_insn_cache ()\n {\n+#ifdef MCT_TEXT\n   int save_errno;\n \n   /* Preserve errno, because users would be surprised to have\n@@ -2752,6 +2757,7 @@ __clear_insn_cache ()\n      No need to use an address derived from _start or %sp, as 0 works also. */\n   memctl(0, 4096, MCT_TEXT);\n   errno = save_errno;\n+#endif\n }\n \n #endif /* __sysV68__ */"}]}