{"sha": "3518424d4bf6a9654c7fea7f046ed839e888b1d6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUxODQyNGQ0YmY2YTk2NTRjN2ZlYTdmMDQ2ZWQ4MzllODg4YjFkNg==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2019-10-29T08:44:52Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-10-29T08:44:52Z"}, "message": "Print header in dump_memory_report.\n\n2019-10-29  Martin Liska  <mliska@suse.cz>\n\n\t* cgraphunit.c (symbol_table::compile): Pass\n\ttitle as dump_memory_report argument.\n\t* toplev.c (dump_memory_report):  New argument.\n\t(finalize): Pass new argument.\n\t* toplev.h (dump_memory_report): Add argument.\n2019-10-29  Martin Liska  <mliska@suse.cz>\n\n\t* lto.c (do_whole_program_analysis): Pass\n\ttitle as dump_memory_report argument.\n\nFrom-SVN: r277559", "tree": {"sha": "4d388155baecc27cb214fe9e5777075963377fe7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d388155baecc27cb214fe9e5777075963377fe7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3518424d4bf6a9654c7fea7f046ed839e888b1d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3518424d4bf6a9654c7fea7f046ed839e888b1d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3518424d4bf6a9654c7fea7f046ed839e888b1d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3518424d4bf6a9654c7fea7f046ed839e888b1d6/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "58cc99af1d829d545299c9958f0666b837914cee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58cc99af1d829d545299c9958f0666b837914cee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58cc99af1d829d545299c9958f0666b837914cee"}], "stats": {"total": 51, "additions": 31, "deletions": 20}, "files": [{"sha": "51097bba5441343622cdb04653b0c9869407746a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3518424d4bf6a9654c7fea7f046ed839e888b1d6", "patch": "@@ -1,3 +1,11 @@\n+2019-10-29  Martin Liska  <mliska@suse.cz>\n+\n+\t* cgraphunit.c (symbol_table::compile): Pass\n+\ttitle as dump_memory_report argument.\n+\t* toplev.c (dump_memory_report):  New argument.\n+\t(finalize): Pass new argument.\n+\t* toplev.h (dump_memory_report): Add argument.\n+\n 2019-10-29  Martin Liska  <mliska@suse.cz>\n \n \t* ggc-common.c: Move Leak to the first column."}, {"sha": "6ec24432351f374ab5e8f2f39b72db0c70ab0f59", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=3518424d4bf6a9654c7fea7f046ed839e888b1d6", "patch": "@@ -2602,10 +2602,7 @@ symbol_table::compile (void)\n \n   timevar_push (TV_CGRAPHOPT);\n   if (pre_ipa_mem_report)\n-    {\n-      fprintf (stderr, \"Memory consumption before IPA\\n\");\n-      dump_memory_report ();\n-    }\n+    dump_memory_report (\"Memory consumption before IPA\");\n   if (!quiet_flag)\n     fprintf (stderr, \"Performing interprocedural optimizations\\n\");\n   state = IPA;\n@@ -2637,10 +2634,7 @@ symbol_table::compile (void)\n       symtab->dump (dump_file);\n     }\n   if (post_ipa_mem_report)\n-    {\n-      fprintf (stderr, \"Memory consumption after IPA\\n\");\n-      dump_memory_report ();\n-    }\n+    dump_memory_report (\"Memory consumption after IPA\");\n   timevar_pop (TV_CGRAPHOPT);\n \n   /* Output everything.  */"}, {"sha": "3592dda25593a12c371259a7a1c11f04e952f405", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=3518424d4bf6a9654c7fea7f046ed839e888b1d6", "patch": "@@ -1,3 +1,8 @@\n+2019-10-29  Martin Liska  <mliska@suse.cz>\n+\n+\t* lto.c (do_whole_program_analysis): Pass\n+\ttitle as dump_memory_report argument.\n+\n 2019-10-29  Martin Liska  <mliska@suse.cz>\n \n \t* lto.c (do_whole_program_analysis): Remove argument."}, {"sha": "27ea341e04cb3e7cd89ac5ae6712588a53416738", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=3518424d4bf6a9654c7fea7f046ed839e888b1d6", "patch": "@@ -455,10 +455,7 @@ do_whole_program_analysis (void)\n   timevar_push (TV_WHOPR_WPA);\n \n   if (pre_ipa_mem_report)\n-    {\n-      fprintf (stderr, \"Memory consumption before IPA\\n\");\n-      dump_memory_report ();\n-    }\n+    dump_memory_report (\"Memory consumption before IPA\");\n \n   symtab->function_flags_ready = true;\n \n@@ -537,16 +534,13 @@ do_whole_program_analysis (void)\n   timevar_stop (TV_PHASE_STREAM_OUT);\n \n   if (post_ipa_mem_report)\n-    {\n-      fprintf (stderr, \"Memory consumption after IPA\\n\");\n-      dump_memory_report ();\n-    }\n+    dump_memory_report (\"Memory consumption after IPA\");\n \n   /* Show the LTO report before launching LTRANS.  */\n   if (flag_lto_report || (flag_wpa && flag_lto_report_wpa))\n     print_lto_report_1 ();\n   if (mem_report_wpa)\n-    dump_memory_report ();\n+    dump_memory_report (\"Final\");\n }\n \n /* Create artificial pointers for \"omp declare target link\" vars.  */"}, {"sha": "00a5e83212601bef62ea9a254ddbeae35cde8e6e", "filename": "gcc/toplev.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=3518424d4bf6a9654c7fea7f046ed839e888b1d6", "patch": "@@ -1994,8 +1994,17 @@ target_reinit (void)\n }\n \n void\n-dump_memory_report ()\n+dump_memory_report (const char *header)\n {\n+  /* Print significant header.  */\n+  fputc ('\\n', stderr);\n+  for (unsigned i = 0; i < 80; i++)\n+    fputc ('#', stderr);\n+  fprintf (stderr, \"\\n# %-77s#\\n\", header);\n+  for (unsigned i = 0; i < 80; i++)\n+    fputc ('#', stderr);\n+  fputs (\"\\n\\n\", stderr);\n+\n   dump_line_table_statistics ();\n   ggc_print_statistics ();\n   stringpool_statistics ();\n@@ -2058,7 +2067,7 @@ finalize (bool no_backend)\n     }\n \n   if (mem_report)\n-    dump_memory_report ();\n+    dump_memory_report (\"Final\");\n \n   if (profile_report)\n     dump_profile_report ();"}, {"sha": "8814a5e11f8c85c521ab45d1874c568093bb15d1", "filename": "gcc/toplev.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Ftoplev.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3518424d4bf6a9654c7fea7f046ed839e888b1d6/gcc%2Ftoplev.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.h?ref=3518424d4bf6a9654c7fea7f046ed839e888b1d6", "patch": "@@ -66,7 +66,8 @@ extern bool wrapup_global_declarations (tree *, int);\n \n extern void global_decl_processing (void);\n \n-extern void dump_memory_report ();\n+extern void\n+dump_memory_report (const char *);\n extern void dump_profile_report (void);\n \n extern void target_reinit (void);"}]}