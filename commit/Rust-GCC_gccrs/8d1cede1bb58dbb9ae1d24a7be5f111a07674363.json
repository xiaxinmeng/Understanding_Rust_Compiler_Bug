{"sha": "8d1cede1bb58dbb9ae1d24a7be5f111a07674363", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQxY2VkZTFiYjU4ZGJiOWFlMWQyNGE3YmU1ZjExMWEwNzY3NDM2Mw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-10-02T11:01:01Z"}, "committer": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-10-02T11:01:01Z"}, "message": "Add poly_int64 streaming support\n\n2020-10-02  Jan Hubicka  <hubicka@ucw.cz>\n\n\t* data-streamer-in.c (streamer_read_poly_int64): New function.\n\t* data-streamer-out.c (streamer_write_poly_int64): New function.\n\t* data-streamer.h (streamer_write_poly_int64): Declare.\n\t(streamer_read_poly_int64): Declare.", "tree": {"sha": "6ed3118bf7fa61edb6f9ea7237bba9cc979508ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ed3118bf7fa61edb6f9ea7237bba9cc979508ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d1cede1bb58dbb9ae1d24a7be5f111a07674363", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d1cede1bb58dbb9ae1d24a7be5f111a07674363", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d1cede1bb58dbb9ae1d24a7be5f111a07674363", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d1cede1bb58dbb9ae1d24a7be5f111a07674363/comments", "author": null, "committer": null, "parents": [{"sha": "0eb5e901f6e25a7b8a9790a7a8c209147fb649ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eb5e901f6e25a7b8a9790a7a8c209147fb649ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0eb5e901f6e25a7b8a9790a7a8c209147fb649ec"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "7abb48af9b8703a28912c02846b1ee50076cfd7c", "filename": "gcc/data-streamer-in.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d1cede1bb58dbb9ae1d24a7be5f111a07674363/gcc%2Fdata-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d1cede1bb58dbb9ae1d24a7be5f111a07674363/gcc%2Fdata-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdata-streamer-in.c?ref=8d1cede1bb58dbb9ae1d24a7be5f111a07674363", "patch": "@@ -186,6 +186,17 @@ streamer_read_poly_uint64 (class lto_input_block *ib)\n   return res;\n }\n \n+/* Read a poly_int64 from IB.  */\n+\n+poly_int64\n+streamer_read_poly_int64 (class lto_input_block *ib)\n+{\n+  poly_int64 res;\n+  for (unsigned int i = 0; i < NUM_POLY_INT_COEFFS; ++i)\n+    res.coeffs[i] = streamer_read_hwi (ib);\n+  return res;\n+}\n+\n /* Read gcov_type value from IB.  */\n \n gcov_type"}, {"sha": "fb8a90ab2c0bcec50b9696ee830e16a6693ecd8d", "filename": "gcc/data-streamer-out.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d1cede1bb58dbb9ae1d24a7be5f111a07674363/gcc%2Fdata-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d1cede1bb58dbb9ae1d24a7be5f111a07674363/gcc%2Fdata-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdata-streamer-out.c?ref=8d1cede1bb58dbb9ae1d24a7be5f111a07674363", "patch": "@@ -229,6 +229,15 @@ streamer_write_poly_uint64 (struct output_block *ob, poly_uint64 work)\n     streamer_write_uhwi_stream (ob->main_stream, work.coeffs[i]);\n }\n \n+/* Write a poly_int64 value WORK to OB->main_stream.  */\n+\n+void\n+streamer_write_poly_int64 (struct output_block *ob, poly_int64 work)\n+{\n+  for (int i = 0; i < NUM_POLY_INT_COEFFS; ++i)\n+    streamer_write_hwi_stream (ob->main_stream, work.coeffs[i]);\n+}\n+\n /* Write a gcov counter value WORK to OB->main_stream.  */\n \n void"}, {"sha": "6ab586f8b1175adce80ab70f06a305fe4b63a765", "filename": "gcc/data-streamer.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d1cede1bb58dbb9ae1d24a7be5f111a07674363/gcc%2Fdata-streamer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d1cede1bb58dbb9ae1d24a7be5f111a07674363/gcc%2Fdata-streamer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdata-streamer.h?ref=8d1cede1bb58dbb9ae1d24a7be5f111a07674363", "patch": "@@ -54,6 +54,7 @@ void streamer_write_zero (struct output_block *);\n void streamer_write_uhwi (struct output_block *, unsigned HOST_WIDE_INT);\n void streamer_write_hwi (struct output_block *, HOST_WIDE_INT);\n void streamer_write_poly_uint64 (struct output_block *, poly_uint64);\n+void streamer_write_poly_int64 (struct output_block *, poly_int64);\n void streamer_write_gcov_count (struct output_block *, gcov_type);\n void streamer_write_string (struct output_block *, struct lto_output_stream *,\n \t\t\t    const char *, bool);\n@@ -84,6 +85,7 @@ const char *bp_unpack_string (class data_in *, struct bitpack_d *);\n unsigned HOST_WIDE_INT streamer_read_uhwi (class lto_input_block *);\n HOST_WIDE_INT streamer_read_hwi (class lto_input_block *);\n poly_uint64 streamer_read_poly_uint64 (class lto_input_block *);\n+poly_int64 streamer_read_poly_int64 (class lto_input_block *);\n gcov_type streamer_read_gcov_count (class lto_input_block *);\n wide_int streamer_read_wide_int (class lto_input_block *);\n widest_int streamer_read_widest_int (class lto_input_block *);"}]}