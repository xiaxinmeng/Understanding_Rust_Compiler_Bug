{"sha": "f7d2b51386ac44e68b07a2dac212a70d1bda0b02", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjdkMmI1MTM4NmFjNDRlNjhiMDdhMmRhYzIxMmE3MGQxYmRhMGIwMg==", "commit": {"author": {"name": "Joey Ye", "email": "jye2@gcc.gnu.org", "date": "2015-01-14T08:17:15Z"}, "committer": {"name": "Joey Ye", "email": "jye2@gcc.gnu.org", "date": "2015-01-14T08:17:15Z"}, "message": "arm.c (arm_compute_save_reg_mask): Do not save lr in case of tail call.\n\n2015-01-14  Joey Ye  <joey.ye@arm.com>\n\n        * config/arm/arm.c (arm_compute_save_reg_mask):\n        Do not save lr in case of tail call.\n        * config/arm/thumb2.md (*thumb2_pop_single): New pattern.\n\nFrom-SVN: r219578", "tree": {"sha": "6944aa3baeb016fba2b3d66b9fde5bacdb781ca0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6944aa3baeb016fba2b3d66b9fde5bacdb781ca0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f7d2b51386ac44e68b07a2dac212a70d1bda0b02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7d2b51386ac44e68b07a2dac212a70d1bda0b02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7d2b51386ac44e68b07a2dac212a70d1bda0b02", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7d2b51386ac44e68b07a2dac212a70d1bda0b02/comments", "author": null, "committer": null, "parents": [{"sha": "de1b5c17fd1418f01f0a57d03023c21d888dc97c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de1b5c17fd1418f01f0a57d03023c21d888dc97c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de1b5c17fd1418f01f0a57d03023c21d888dc97c"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "7a0a9a3b0963830f5e632c9e9146c9c9f2305bc8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7d2b51386ac44e68b07a2dac212a70d1bda0b02/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7d2b51386ac44e68b07a2dac212a70d1bda0b02/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f7d2b51386ac44e68b07a2dac212a70d1bda0b02", "patch": "@@ -1,3 +1,9 @@\n+2015-01-14  Joey Ye  <joey.ye@arm.com>\n+\n+\t* config/arm/arm.c (arm_compute_save_reg_mask):\n+\tDo not save lr in case of tail call.\n+\t* config/arm/thumb2.md (*thumb2_pop_single): New pattern.\n+\n 2015-01-13  Martin Uecker <uecker@eecs.berkeley.edu>\n \n \t* tree-vrp.c (check_array_ref): Emit more warnings\n@@ -26,7 +32,7 @@\n \t(gimple_init_edge_profiler): Likewise.\n \t(gimple_gen_ic_func_profiler): Likewise.\n \n-2015-01-15  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n+2015-01-13  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n \n \t* ipa-inline.c (inline_small_functions): Swap the operands in\n \tenum."}, {"sha": "1a92753d52fa97c37c6df0122fd43fd36f6957b4", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7d2b51386ac44e68b07a2dac212a70d1bda0b02/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7d2b51386ac44e68b07a2dac212a70d1bda0b02/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=f7d2b51386ac44e68b07a2dac212a70d1bda0b02", "patch": "@@ -19191,6 +19191,7 @@ arm_compute_save_reg_mask (void)\n       || (save_reg_mask\n \t  && optimize_size\n \t  && ARM_FUNC_TYPE (func_type) == ARM_FT_NORMAL\n+\t  && !crtl->tail_call_emit\n \t  && !crtl->calls_eh_return))\n     save_reg_mask |= 1 << LR_REGNUM;\n "}, {"sha": "1f681479d5d8d57d0596b24986ad53667f8bf2dc", "filename": "gcc/config/arm/thumb2.md", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7d2b51386ac44e68b07a2dac212a70d1bda0b02/gcc%2Fconfig%2Farm%2Fthumb2.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7d2b51386ac44e68b07a2dac212a70d1bda0b02/gcc%2Fconfig%2Farm%2Fthumb2.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fthumb2.md?ref=f7d2b51386ac44e68b07a2dac212a70d1bda0b02", "patch": "@@ -267,6 +267,17 @@\n    (set_attr \"type\" \"multiple\")]\n )\n \n+;; Pop a single register as its size is preferred over a post-incremental load\n+(define_insn \"*thumb2_pop_single\"\n+  [(set (match_operand:SI 0 \"low_register_operand\" \"=r\")\n+        (mem:SI (post_inc:SI (reg:SI SP_REGNUM))))]\n+  \"TARGET_THUMB2 && (reload_in_progress || reload_completed)\"\n+  \"pop\\t{%0}\"\n+  [(set_attr \"type\" \"load1\")\n+   (set_attr \"length\" \"2\")\n+   (set_attr \"predicable\" \"yes\")]\n+)\n+\n ;; We have two alternatives here for memory loads (and similarly for stores)\n ;; to reflect the fact that the permissible constant pool ranges differ\n ;; between ldr instructions taking low regs and ldr instructions taking high"}]}