{"sha": "2b76013c9a51825a9447cb693c2bb75ed35aa265", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI3NjAxM2M5YTUxODI1YTk0NDdjYjY5M2MyYmI3NWVkMzVhYTI2NQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-10-01T00:43:27Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-10-01T00:43:27Z"}, "message": "cp-tree.h (lang_decl_flags): Add global_ctor_p and global_dtor_p.\n\n\t* cp-tree.h (lang_decl_flags): Add global_ctor_p and\n\tglobal_dtor_p.  Add init_priority.\n\t(DECL_ACCESS): Adjust accordingly.\n\t(DECL_GLOBAL_CTOR_P, DECL_GLOBAL_DTOR_P): New macros.\n\t(GLOBAL_INIT_PRIORITY): Likewise.\n\t* decl.c (lang_mark_tree): Adjust accordingly.\n\t(start_objects): Set DECL_GLOBAL_CTOR_P, DECL_GLOBAL_DTOR_P,\n\tand GLOBAL_INIT_PRIORITY.\n\t* dump.c (dequeue_and_dump): Print them.\n\t* ir.texi: Document them.\n\nFrom-SVN: r29738", "tree": {"sha": "b8a2be7d40a01a5d28174020f20aacf15182a232", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b8a2be7d40a01a5d28174020f20aacf15182a232"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b76013c9a51825a9447cb693c2bb75ed35aa265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b76013c9a51825a9447cb693c2bb75ed35aa265", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b76013c9a51825a9447cb693c2bb75ed35aa265", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b76013c9a51825a9447cb693c2bb75ed35aa265/comments", "author": null, "committer": null, "parents": [{"sha": "b65fcf051f2d887decd5ffa5bd947c01ff88dc46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b65fcf051f2d887decd5ffa5bd947c01ff88dc46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b65fcf051f2d887decd5ffa5bd947c01ff88dc46"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "b3cdad48dd9b4b1df37b19a67e7b55cf1f53402b", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b76013c9a51825a9447cb693c2bb75ed35aa265/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b76013c9a51825a9447cb693c2bb75ed35aa265/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=2b76013c9a51825a9447cb693c2bb75ed35aa265", "patch": "@@ -2811,6 +2811,13 @@ start_objects (method_type, initp)\n   /* Mark this declaration as used to avoid spurious warnings.  */\n   TREE_USED (current_function_decl) = 1;\n \n+  /* Mark this function as a global constructor or destructor.  */\n+  if (method_type == 'I')\n+    DECL_GLOBAL_CTOR_P (current_function_decl) = 1;\n+  else\n+    DECL_GLOBAL_DTOR_P (current_function_decl) = 1;\n+  GLOBAL_INIT_PRIORITY (current_function_decl) = initp;\n+\n   body = begin_compound_stmt (/*has_no_scope=*/0);\n \n   /* We cannot allow these functions to be elided, even if they do not"}]}