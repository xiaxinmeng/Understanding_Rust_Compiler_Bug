{"sha": "fc5e3cd436d97e82a45a6966585c9daf9b56f2ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmM1ZTNjZDQzNmQ5N2U4MmE0NWE2OTY2NTg1YzlkYWY5YjU2ZjJlYQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2009-10-15T18:09:59Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2009-10-15T18:09:59Z"}, "message": "target-supports.exp (add_options_for_bind_pic_locally): New.\n\n\t* lib/target-supports.exp (add_options_for_bind_pic_locally): New.\n\t* gcc.dg/tree-ssa/ipa-cp-1.c: Bind pic locally.\n\nFrom-SVN: r152857", "tree": {"sha": "b231ae3e8ffaff2e99acd19206eba45af8f6d06a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b231ae3e8ffaff2e99acd19206eba45af8f6d06a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea/comments", "author": null, "committer": null, "parents": [{"sha": "f6ee328a5bc36c32848a944df487f6b49a783405", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6ee328a5bc36c32848a944df487f6b49a783405", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6ee328a5bc36c32848a944df487f6b49a783405"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "4129a3e3aa0be4c1c8bf52caeac0ac0215d14126", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fc5e3cd436d97e82a45a6966585c9daf9b56f2ea", "patch": "@@ -1,3 +1,8 @@\n+2009-10-15  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* lib/target-supports.exp (add_options_for_bind_pic_locally): New.\n+\t* gcc.dg/tree-ssa/ipa-cp-1.c: Bind pic locally.\n+\n 2009-10-15  Richard Guenther  <rguenther@suse.de>\n \n \tPR lto/41669"}, {"sha": "b9c67a6260976868b874d533676dae8c5b21edbc", "filename": "gcc/testsuite/gcc.dg/tree-ssa/ipa-cp-1.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fipa-cp-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fipa-cp-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fipa-cp-1.c?ref=fc5e3cd436d97e82a45a6966585c9daf9b56f2ea", "patch": "@@ -1,5 +1,7 @@\n /* { dg-do compile } */\n /* { dg-options \"-O3 -fdump-tree-optimized -fno-inline\" } */\n+/* { dg-add-options bind_pic_locally } */\n+\n int\n very_long_function(int a)\n {"}, {"sha": "f8e83ec0988a69a81c3b07fe86ea7723ca57fc94", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5e3cd436d97e82a45a6966585c9daf9b56f2ea/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=fc5e3cd436d97e82a45a6966585c9daf9b56f2ea", "patch": "@@ -2984,6 +2984,28 @@ proc add_options_for_ieee { flags } {\n     return $flags\n }\n \n+# Add to FLAGS the flags needed to enable functions to bind locally\n+# when using pic/PIC passes in the testsuite.\n+\n+proc add_options_for_bind_pic_locally { flags } {\n+    if {[check_no_compiler_messages using_pic2 assembly {\n+        #if __PIC__ != 2\n+        #error FOO\n+        #endif\n+    }]} {\n+\treturn \"$flags -fPIE\"\n+    }\n+    if {[check_no_compiler_messages using_pic1 assembly {\n+        #if __PIC__ != 1\n+        #error FOO\n+        #endif\n+    }]} {\n+\treturn \"$flags -fpie\"\n+    }\n+\n+    return $flags\n+}\n+\n # Return 1 if the target provides a full C99 runtime.\n \n proc check_effective_target_c99_runtime { } {"}]}