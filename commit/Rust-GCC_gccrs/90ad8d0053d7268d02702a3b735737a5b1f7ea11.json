{"sha": "90ad8d0053d7268d02702a3b735737a5b1f7ea11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTBhZDhkMDA1M2Q3MjY4ZDAyNzAyYTNiNzM1NzM3YTViMWY3ZWExMQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2014-10-16T12:42:41Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2014-10-16T12:42:41Z"}, "message": "Assert no use with SSA_NAME_IN_FREELIST before using freelist.\n\n2014-10-16  Tom de Vries  <tom@codesourcery.com>\n\n\t* tree-into-ssa.c (update_ssa): Assert that there's no ssa use operand\n\twith SSA_NAME_IN_FREELIST.\n\nFrom-SVN: r216318", "tree": {"sha": "5107f0c554e588bb3d6a6133f58e90df08dc10e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5107f0c554e588bb3d6a6133f58e90df08dc10e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90ad8d0053d7268d02702a3b735737a5b1f7ea11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90ad8d0053d7268d02702a3b735737a5b1f7ea11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90ad8d0053d7268d02702a3b735737a5b1f7ea11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90ad8d0053d7268d02702a3b735737a5b1f7ea11/comments", "author": null, "committer": null, "parents": [{"sha": "f6d2e222bc13e5bc8b96ae17a4cb3104be6407dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6d2e222bc13e5bc8b96ae17a4cb3104be6407dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6d2e222bc13e5bc8b96ae17a4cb3104be6407dd"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "5f398d3b940eb89dd5b90f85c80d816683f17fd3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90ad8d0053d7268d02702a3b735737a5b1f7ea11/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90ad8d0053d7268d02702a3b735737a5b1f7ea11/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=90ad8d0053d7268d02702a3b735737a5b1f7ea11", "patch": "@@ -1,3 +1,8 @@\n+2014-10-16  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* tree-into-ssa.c (update_ssa): Assert that there's no ssa use operand\n+\twith SSA_NAME_IN_FREELIST.\n+\n 2014-10-16  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/63554"}, {"sha": "f1983f1ac7306916c6f56b6acae9c3af03eb31ed", "filename": "gcc/tree-into-ssa.c", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90ad8d0053d7268d02702a3b735737a5b1f7ea11/gcc%2Ftree-into-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90ad8d0053d7268d02702a3b735737a5b1f7ea11/gcc%2Ftree-into-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-into-ssa.c?ref=90ad8d0053d7268d02702a3b735737a5b1f7ea11", "patch": "@@ -3161,6 +3161,45 @@ update_ssa (unsigned update_flags)\n   if (!need_ssa_update_p (cfun))\n     return;\n \n+#ifdef ENABLE_CHECKING\n+  timevar_push (TV_TREE_STMT_VERIFY);\n+\n+  bool err = false;\n+\n+  FOR_EACH_BB_FN (bb, cfun)\n+    {\n+      gimple_stmt_iterator gsi;\n+      for (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n+\t{\n+\t  gimple stmt = gsi_stmt (gsi);\n+\n+\t  ssa_op_iter i;\n+\t  use_operand_p use_p;\n+\t  FOR_EACH_SSA_USE_OPERAND (use_p, stmt, i, SSA_OP_ALL_USES)\n+\t    {\n+\t      tree use = USE_FROM_PTR (use_p);\n+\t      if (TREE_CODE (use) != SSA_NAME)\n+\t\tcontinue;\n+\n+\t      if (SSA_NAME_IN_FREE_LIST (use))\n+\t\t{\n+\t\t  error (\"statement uses released SSA name:\");\n+\t\t  debug_gimple_stmt (stmt);\n+\t\t  fprintf (stderr, \"The use of \");\n+\t\t  print_generic_expr (stderr, use, 0);\n+\t\t  fprintf (stderr,\" should have been replaced\\n\");\n+\t\t  err = true;\n+\t\t}\n+\t    }\n+\t}\n+    }\n+\n+  if (err)\n+    internal_error (\"cannot update SSA form\");\n+\n+  timevar_pop (TV_TREE_STMT_VERIFY);\n+#endif\n+\n   timevar_push (TV_TREE_SSA_INCREMENTAL);\n \n   if (dump_file && (dump_flags & TDF_DETAILS))"}]}