{"sha": "9d9305ea5de90380a24dc2557bc28c1ed621bd9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ5MzA1ZWE1ZGU5MDM4MGEyNGRjMjU1N2JjMjhjMWVkNjIxYmQ5ZQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-04-29T08:49:08Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-04-29T08:49:08Z"}, "message": "osf.S (UA_SI, [...]): Define.\n\n\t* src/alpha/osf.S (UA_SI, FDE_ENCODING, FDE_ENCODE, FDE_ARANGE):\n\tDefine.\n\tUse them to handle ELF vs. ECOFF differences.\n\t[__osf__] (_GLOBAL__F_ffi_call_osf): Define.\n\nFrom-SVN: r173151", "tree": {"sha": "17b48b4b75626c5b0439993a77c53e5cdf93f233", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/17b48b4b75626c5b0439993a77c53e5cdf93f233"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d9305ea5de90380a24dc2557bc28c1ed621bd9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d9305ea5de90380a24dc2557bc28c1ed621bd9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d9305ea5de90380a24dc2557bc28c1ed621bd9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d9305ea5de90380a24dc2557bc28c1ed621bd9e/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5c24671b5a3a57b7dcb0c4ba02f3694ffa159788", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c24671b5a3a57b7dcb0c4ba02f3694ffa159788", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c24671b5a3a57b7dcb0c4ba02f3694ffa159788"}], "stats": {"total": 64, "additions": 46, "deletions": 18}, "files": [{"sha": "e9cacff750518678d015d5b3c63e2dd901a5703e", "filename": "libffi/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d9305ea5de90380a24dc2557bc28c1ed621bd9e/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d9305ea5de90380a24dc2557bc28c1ed621bd9e/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=9d9305ea5de90380a24dc2557bc28c1ed621bd9e", "patch": "@@ -1,3 +1,10 @@\n+2011-04-29  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* src/alpha/osf.S (UA_SI, FDE_ENCODING, FDE_ENCODE, FDE_ARANGE):\n+\tDefine.\n+\tUse them to handle ELF vs. ECOFF differences.\n+\t[__osf__] (_GLOBAL__F_ffi_call_osf): Define.\n+\n 2011-02-13  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* configure: Regenerate."}, {"sha": "6b9f4dfa0314675955da3e17176fe43e5aa7c208", "filename": "libffi/src/alpha/osf.S", "status": "modified", "additions": 39, "deletions": 18, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d9305ea5de90380a24dc2557bc28c1ed621bd9e/libffi%2Fsrc%2Falpha%2Fosf.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d9305ea5de90380a24dc2557bc28c1ed621bd9e/libffi%2Fsrc%2Falpha%2Fosf.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Falpha%2Fosf.S?ref=9d9305ea5de90380a24dc2557bc28c1ed621bd9e", "patch": "@@ -1,5 +1,5 @@\n /* -----------------------------------------------------------------------\n-   osf.S - Copyright (c) 1998, 2001, 2007, 2008 Red Hat\n+   osf.S - Copyright (c) 1998, 2001, 2007, 2008, 2011 Red Hat\n    \n    Alpha/OSF Foreign Function Interface \n \n@@ -298,34 +298,52 @@ $load_table:\n #error \"osf.S out of sync with ffi.h\"\n #endif\n \n+#ifdef __ELF__\n+# define UA_SI\t\t.4byte\n+# define FDE_ENCODING\t0x1b\t/* pcrel sdata4 */\n+# define FDE_ENCODE(X)\t.4byte X-.\n+# define FDE_ARANGE(X)\t.4byte X\n+#elif defined __osf__\n+# define UA_SI\t\t.align 0; .long\n+# define FDE_ENCODING\t0x50\t/* aligned absolute */\n+# define FDE_ENCODE(X)\t.align 3; .quad X\n+# define FDE_ARANGE(X)\t.align 0; .quad X\n+#endif\n+\n #ifdef __ELF__\n \t.section\t.eh_frame,EH_FRAME_FLAGS,@progbits\n+#elif defined __osf__\n+\t.data\n+\t.align 3\n+\t.globl _GLOBAL__F_ffi_call_osf\n+_GLOBAL__F_ffi_call_osf:\n+#endif\n __FRAME_BEGIN__:\n-\t.4byte\t$LECIE1-$LSCIE1\t# Length of Common Information Entry\n+\tUA_SI\t$LECIE1-$LSCIE1\t# Length of Common Information Entry\n $LSCIE1:\n-\t.4byte\t0x0\t\t# CIE Identifier Tag\n+\tUA_SI\t0x0\t\t# CIE Identifier Tag\n \t.byte\t0x1\t\t# CIE Version\n \t.ascii \"zR\\0\"\t\t# CIE Augmentation\n \t.byte\t0x1\t\t# uleb128 0x1; CIE Code Alignment Factor\n \t.byte\t0x78\t\t# sleb128 -8; CIE Data Alignment Factor\n \t.byte\t26\t\t# CIE RA Column\n \t.byte\t0x1\t\t# uleb128 0x1; Augmentation size\n-\t.byte\t0x1b\t\t# FDE Encoding (pcrel sdata4)\n+\t.byte\tFDE_ENCODING\t# FDE Encoding\n \t.byte\t0xc\t\t# DW_CFA_def_cfa\n \t.byte\t30\t\t# uleb128 column 30\n \t.byte\t0\t\t# uleb128 offset 0\n \t.align 3\n $LECIE1:\n $LSFDE1:\n-\t.4byte\t$LEFDE1-$LASFDE1\t\t# FDE Length\n+\tUA_SI\t$LEFDE1-$LASFDE1\t\t# FDE Length\n $LASFDE1:\n-\t.4byte\t$LASFDE1-__FRAME_BEGIN__\t# FDE CIE offset\n-\t.4byte\t$LFB1-.\t\t# FDE initial location\n-\t.4byte\t$LFE1-$LFB1\t# FDE address range\n+\tUA_SI\t$LASFDE1-__FRAME_BEGIN__\t# FDE CIE offset\n+\tFDE_ENCODE($LFB1)\t\t\t# FDE initial location\n+\tFDE_ARANGE($LFE1-$LFB1)\t\t\t# FDE address range\n \t.byte\t0x0\t\t# uleb128 0x0; Augmentation size\n \n \t.byte\t0x4\t\t# DW_CFA_advance_loc4\n-\t.4byte\t$LCFI1-$LFB1\n+\tUA_SI\t$LCFI1-$LFB1\n \t.byte\t0x9a\t\t# DW_CFA_offset, column 26\n \t.byte\t4\t\t# uleb128 4*-8\n \t.byte\t0x8f\t\t# DW_CFA_offset, column 15\n@@ -335,32 +353,35 @@ $LASFDE1:\n \t.byte\t32\t\t# uleb128 offset 32\n \n \t.byte\t0x4\t\t# DW_CFA_advance_loc4\n-\t.4byte\t$LCFI2-$LCFI1\n+\tUA_SI\t$LCFI2-$LCFI1\n \t.byte\t0xda\t\t# DW_CFA_restore, column 26\n \t.align 3\n $LEFDE1:\n \n $LSFDE3:\n-\t.4byte\t$LEFDE3-$LASFDE3\t\t# FDE Length\n+\tUA_SI\t$LEFDE3-$LASFDE3\t\t# FDE Length\n $LASFDE3:\n-\t.4byte\t$LASFDE3-__FRAME_BEGIN__\t# FDE CIE offset\n-\t.4byte\t$LFB2-.\t\t# FDE initial location\n-\t.4byte\t$LFE2-$LFB2\t# FDE address range\n+\tUA_SI\t$LASFDE3-__FRAME_BEGIN__\t# FDE CIE offset\n+\tFDE_ENCODE($LFB2)\t\t\t# FDE initial location\n+\tFDE_ARANGE($LFE2-$LFB2)\t\t\t# FDE address range\n \t.byte\t0x0\t\t# uleb128 0x0; Augmentation size\n \n \t.byte\t0x4\t\t# DW_CFA_advance_loc4\n-\t.4byte\t$LCFI5-$LFB2\n+\tUA_SI\t$LCFI5-$LFB2\n \t.byte\t0xe\t\t# DW_CFA_def_cfa_offset\n \t.byte\t0x80,0x1\t# uleb128 128\n \n \t.byte\t0x4\t\t# DW_CFA_advance_loc4\n-\t.4byte\t$LCFI6-$LCFI5\n+\tUA_SI\t$LCFI6-$LCFI5\n \t.byte\t0x9a\t\t# DW_CFA_offset, column 26\n \t.byte\t16\t\t# uleb128 offset 16*-8\n \t.align 3\n $LEFDE3:\n+#if defined __osf__\n+\t.align 0\n+\t.long\t0\t\t# End of Table\n+#endif\n \n-#ifdef __linux__\n+#if defined __ELF__ && defined __linux__\n \t.section\t.note.GNU-stack,\"\",@progbits\n #endif\n-#endif"}]}