{"sha": "da4b1927592af0290ddb71acf7a9f6d71cd004cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE0YjE5Mjc1OTJhZjAyOTBkZGI3MWFjZjdhOWY2ZDcxY2QwMDRjZA==", "commit": {"author": {"name": "Mumit Khan", "email": "khan@xraylith.wisc.edu", "date": "1999-03-24T21:46:41Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-03-24T21:46:41Z"}, "message": "configure.in (AC_PREREQ): Update to 2.13.\n\n\ufffd\n        * configure.in (AC_PREREQ): Update to 2.13.\n        (AC_EXEEXT): Call to find possible file extension.\n        (compiler_name): Use.\n        * configure: Regenerate.\n\nFrom-SVN: r25955", "tree": {"sha": "efe21aa22ffd29b4373bd44f6da0ed16586330ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/efe21aa22ffd29b4373bd44f6da0ed16586330ce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da4b1927592af0290ddb71acf7a9f6d71cd004cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da4b1927592af0290ddb71acf7a9f6d71cd004cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da4b1927592af0290ddb71acf7a9f6d71cd004cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da4b1927592af0290ddb71acf7a9f6d71cd004cd/comments", "author": null, "committer": null, "parents": [{"sha": "e33abc2d025bd5ad26bc367d4aa88eab8fe5f4bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e33abc2d025bd5ad26bc367d4aa88eab8fe5f4bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e33abc2d025bd5ad26bc367d4aa88eab8fe5f4bc"}], "stats": {"total": 708, "additions": 537, "deletions": 171}, "files": [{"sha": "3c203117a4e930b7693ef239d36a56f77a2f4189", "filename": "libchill/configure", "status": "modified", "additions": 259, "deletions": 82, "changes": 341, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da4b1927592af0290ddb71acf7a9f6d71cd004cd/libchill%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da4b1927592af0290ddb71acf7a9f6d71cd004cd/libchill%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libchill%2Fconfigure?ref=da4b1927592af0290ddb71acf7a9f6d71cd004cd", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n \n # Guess values for system-dependent variables and create Makefiles.\n-# Generated automatically using autoconf version 2.12.1 \n+# Generated automatically using autoconf version 2.13 \n # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.\n #\n # This configure script is free software; the Free Software Foundation\n@@ -333,7 +333,7 @@ EOF\n     verbose=yes ;;\n \n   -version | --version | --versio | --versi | --vers)\n-    echo \"configure generated by autoconf version 2.12.1\"\n+    echo \"configure generated by autoconf version 2.13\"\n     exit 0 ;;\n \n   -with-* | --with-*)\n@@ -503,9 +503,11 @@ ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n-ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n cross_compiling=$ac_cv_prog_cc_cross\n \n+ac_exeext=\n+ac_objext=o\n if (echo \"testing\\c\"; echo 1,2,3) | grep c >/dev/null; then\n   # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.\n   if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then\n@@ -549,50 +551,153 @@ ac_config_sub=$ac_aux_dir/config.sub\n ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.\n \n \n-# If the language specific compiler does not exist, but the \"gcc\" directory does,\n-# we do not build anything. Note, $r is set by the top-level Makefile.\n+# We have to handle 3 cases -- native, cross and canadian cross -- and\n+# the extension returned from this macro needs to be treated as a possible\n+# scenario and not the only one.\n+echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n+echo \"configure:559: checking for Cygwin environment\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 564 \"configure\"\n+#include \"confdefs.h\"\n+\n+int main() {\n+\n+#ifndef __CYGWIN__\n+#define __CYGWIN__ __CYGWIN32__\n+#endif\n+return __CYGWIN__;\n+; return 0; }\n+EOF\n+if { (eval echo configure:575: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_cygwin=yes\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_cygwin=no\n+fi\n+rm -f conftest*\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n+CYGWIN=\n+test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n+echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n+echo \"configure:592: checking for mingw32 environment\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 597 \"configure\"\n+#include \"confdefs.h\"\n+\n+int main() {\n+return __MINGW32__;\n+; return 0; }\n+EOF\n+if { (eval echo configure:604: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_mingw32=yes\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_mingw32=no\n+fi\n+rm -f conftest*\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_mingw32\" 1>&6\n+MINGW32=\n+test \"$ac_cv_mingw32\" = yes && MINGW32=yes\n+\n+\n+echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n+echo \"configure:623: checking for executable suffix\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$CYGWIN\" = yes || test \"$MINGW32\" = yes; then\n+  ac_cv_exeext=.exe\n+else\n+  rm -f conftest*\n+  echo 'int main () { return 0; }' > conftest.$ac_ext\n+  ac_cv_exeext=\n+  if { (eval echo configure:633: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+    for file in conftest.*; do\n+      case $file in\n+      *.c | *.o | *.obj | *.ilk | *.pdb) ;;\n+      *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;\n+      esac\n+    done\n+  else\n+    { echo \"configure: error: installation or configuration problem: compiler cannot create executables.\" 1>&2; exit 1; }\n+  fi\n+  rm -f conftest*\n+  test x\"${ac_cv_exeext}\" = x && ac_cv_exeext=no\n+fi\n+fi\n+\n+EXEEXT=\"\"\n+test x\"${ac_cv_exeext}\" != xno && EXEEXT=${ac_cv_exeext}\n+echo \"$ac_t\"\"${ac_cv_exeext}\" 1>&6\n+ac_exeext=$EXEEXT\n+\n+\n+# If the language specific compiler does not exist, but the \"gcc\" directory \n+# does, we do not build anything. Note, $r is set by the top-level Makefile.\n+# Note that when we look for the compiler, we search both with and without\n+# extension to handle cross and canadian cross builds. \n compiler_name=cc1chill\n rm -f skip-this-dir\n echo $ac_n \"checking if compiler $compiler_name has been built\"\"... $ac_c\" 1>&6\n-echo \"configure:558: checking if compiler $compiler_name has been built\" >&5\n+echo \"configure:661: checking if compiler $compiler_name has been built\" >&5\n if eval \"test \\\"`echo '$''{'chill_cv_compiler_exists'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   chill_cv_compiler_exists=yes\n-\tif test -n \"$r\"; then\n-\t\tif test -d \"$r\"/gcc; then\n-\t\t\tif test -f \"$r\"/gcc/$compiler_name; then\n-\t\t\t\ttrue\n-\t\t\telse\n-\t\t\t\tchill_cv_compiler_exists=no\n-\t\t\t\techo \"rm -f config.cache config.log multilib.out\" > skip-this-dir\n-\t\t\tfi\n-\t\tfi\n-\tfi\n-\t\n+if test -n \"$r\"; then\n+  if test -d \"$r\"/gcc; then\n+    if test -f \"$r\"/gcc/$compiler_name \\\n+       || test -f \"$r\"/gcc/$compiler_name$EXEEXT; then\n+      true\n+    else\n+      chill_cv_compiler_exists=no\n+      echo \"rm -f config.cache config.log multilib.out\" > skip-this-dir\n+    fi\n+  fi\n+fi\n+\n fi\n \n echo \"$ac_t\"\"$chill_cv_compiler_exists\" 1>&6\n if test x$chill_cv_compiler_exists = xno\n then\n-\trm -f Makefile conftest* confdefs* core\n-\texit 0\n+  rm -f Makefile conftest* confdefs* core\n+  exit 0\n fi\n \n # For chill we'll set CC to point at the built gcc, but this will get it into\n # the makefiles\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:588: checking for $ac_word\" >&5\n+echo \"configure:692: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$CC\"; then\n   ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n-  for ac_dir in $PATH; do\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n       ac_cv_prog_CC=\"gcc\"\n@@ -613,16 +718,17 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:617: checking for $ac_word\" >&5\n+echo \"configure:722: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$CC\"; then\n   ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   ac_prog_rejected=no\n-  for ac_dir in $PATH; do\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n       if test \"$ac_dir/$ac_word\" = \"/usr/ucb/cc\"; then\n@@ -657,25 +763,61 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n fi\n \n+  if test -z \"$CC\"; then\n+    case \"`uname -s`\" in\n+    *win32* | *WIN32*)\n+      # Extract the first word of \"cl\", so it can be a program name with args.\n+set dummy cl; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:773: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_CC=\"cl\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+CC=\"$ac_cv_prog_CC\"\n+if test -n \"$CC\"; then\n+  echo \"$ac_t\"\"$CC\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+ ;;\n+    esac\n+  fi\n   test -z \"$CC\" && { echo \"configure: error: no acceptable cc found in \\$PATH\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:665: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:805: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n-ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n cross_compiling=$ac_cv_prog_cc_cross\n \n-cat > conftest.$ac_ext <<EOF\n-#line 675 \"configure\"\n+cat > conftest.$ac_ext << EOF\n+\n+#line 816 \"configure\"\n #include \"confdefs.h\"\n+\n main(){return(0);}\n EOF\n-if { (eval echo configure:679: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:821: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -689,18 +831,24 @@ else\n   ac_cv_prog_cc_works=no\n fi\n rm -fr conftest*\n+ac_ext=c\n+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+cross_compiling=$ac_cv_prog_cc_cross\n \n echo \"$ac_t\"\"$ac_cv_prog_cc_works\" 1>&6\n if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:699: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:847: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:704: checking whether we are using GNU C\" >&5\n+echo \"configure:852: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -709,7 +857,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:713: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:861: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -720,11 +868,15 @@ echo \"$ac_t\"\"$ac_cv_prog_gcc\" 1>&6\n \n if test $ac_cv_prog_gcc = yes; then\n   GCC=yes\n-  ac_test_CFLAGS=\"${CFLAGS+set}\"\n-  ac_save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\n-  echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:728: checking whether ${CC-cc} accepts -g\" >&5\n+else\n+  GCC=\n+fi\n+\n+ac_test_CFLAGS=\"${CFLAGS+set}\"\n+ac_save_CFLAGS=\"$CFLAGS\"\n+CFLAGS=\n+echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n+echo \"configure:880: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -739,23 +891,27 @@ rm -f conftest*\n fi\n \n echo \"$ac_t\"\"$ac_cv_prog_cc_g\" 1>&6\n-  if test \"$ac_test_CFLAGS\" = set; then\n-    CFLAGS=\"$ac_save_CFLAGS\"\n-  elif test $ac_cv_prog_cc_g = yes; then\n+if test \"$ac_test_CFLAGS\" = set; then\n+  CFLAGS=\"$ac_save_CFLAGS\"\n+elif test $ac_cv_prog_cc_g = yes; then\n+  if test \"$GCC\" = yes; then\n     CFLAGS=\"-g -O2\"\n   else\n-    CFLAGS=\"-O2\"\n+    CFLAGS=\"-g\"\n   fi\n else\n-  GCC=\n-  test \"${CFLAGS+set}\" = set || CFLAGS=\"-g\"\n+  if test \"$GCC\" = yes; then\n+    CFLAGS=\"-O2\"\n+  else\n+    CFLAGS=\n+  fi\n fi\n \n \n test \"$AR\" || AR=ar\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:759: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:915: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -785,7 +941,7 @@ fi\n \n # Sanity check for the cross-compilation case:\n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:789: checking how to run the C preprocessor\" >&5\n+echo \"configure:945: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -800,14 +956,14 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 804 \"configure\"\n+#line 960 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:810: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:966: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n else\n@@ -817,14 +973,31 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 821 \"configure\"\n+#line 977 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:827: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:983: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  :\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  CPP=\"${CC-cc} -nologo -E\"\n+  cat > conftest.$ac_ext <<EOF\n+#line 994 \"configure\"\n+#include \"confdefs.h\"\n+#include <assert.h>\n+Syntax Error\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1000: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n else\n@@ -836,6 +1009,8 @@ else\n fi\n rm -f conftest*\n fi\n+rm -f conftest*\n+fi\n rm -f conftest*\n   ac_cv_prog_CPP=\"$CPP\"\n fi\n@@ -847,18 +1022,18 @@ echo \"$ac_t\"\"$CPP\" 1>&6\n \n ac_safe=`echo \"stdio.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for stdio.h\"\"... $ac_c\" 1>&6\n-echo \"configure:851: checking for stdio.h\" >&5\n+echo \"configure:1026: checking for stdio.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 856 \"configure\"\n+#line 1031 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:861: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1036: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   eval \"ac_cv_header_$ac_safe=yes\"\n@@ -885,21 +1060,21 @@ fi\n \n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:889: checking for ANSI C header files\" >&5\n+echo \"configure:1064: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 894 \"configure\"\n+#line 1069 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:902: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1077: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   ac_cv_header_stdc=yes\n@@ -915,7 +1090,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 919 \"configure\"\n+#line 1094 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -933,7 +1108,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 937 \"configure\"\n+#line 1112 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -954,7 +1129,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 958 \"configure\"\n+#line 1133 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -965,7 +1140,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:969: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1144: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -990,12 +1165,12 @@ fi\n \n \n echo $ac_n \"checking for posix\"\"... $ac_c\" 1>&6\n-echo \"configure:994: checking for posix\" >&5\n+echo \"configure:1169: checking for posix\" >&5\n if eval \"test \\\"`echo '$''{'chill_cv_header_posix'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 999 \"configure\"\n+#line 1174 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <unistd.h>\n@@ -1021,12 +1196,12 @@ echo \"$ac_t\"\"$chill_cv_header_posix\" 1>&6\n # We can rely on the GNU library being posix-ish.  I guess checking the \n # header isn't actually like checking the functions, though...\n echo $ac_n \"checking for GNU library\"\"... $ac_c\" 1>&6\n-echo \"configure:1025: checking for GNU library\" >&5\n+echo \"configure:1200: checking for GNU library\" >&5\n if eval \"test \\\"`echo '$''{'chill_cv_lib_gnu'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1030 \"configure\"\n+#line 1205 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n #ifdef __GNU_LIBRARY__\n@@ -1049,12 +1224,12 @@ fi\n echo \"$ac_t\"\"$chill_cv_lib_gnu\" 1>&6\n \n echo $ac_n \"checking return type of signal handlers\"\"... $ac_c\" 1>&6\n-echo \"configure:1053: checking return type of signal handlers\" >&5\n+echo \"configure:1228: checking return type of signal handlers\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_signal'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1058 \"configure\"\n+#line 1233 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <signal.h>\n@@ -1071,7 +1246,7 @@ int main() {\n int i;\n ; return 0; }\n EOF\n-if { (eval echo configure:1075: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1250: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_type_signal=void\n else\n@@ -1092,12 +1267,12 @@ EOF\n # we'll get atexit by default\n if test $ac_cv_header_stdc != yes; then\n echo $ac_n \"checking for atexit\"\"... $ac_c\" 1>&6\n-echo \"configure:1096: checking for atexit\" >&5\n+echo \"configure:1271: checking for atexit\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_atexit'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1101 \"configure\"\n+#line 1276 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char atexit(); below.  */\n@@ -1120,7 +1295,7 @@ atexit();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1124: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1299: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_atexit=yes\"\n else\n@@ -1145,12 +1320,12 @@ else\n EOF\n \n   echo $ac_n \"checking for onexit\"\"... $ac_c\" 1>&6\n-echo \"configure:1149: checking for onexit\" >&5\n+echo \"configure:1324: checking for onexit\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_onexit'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1154 \"configure\"\n+#line 1329 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char onexit(); below.  */\n@@ -1173,7 +1348,7 @@ onexit();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1177: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1352: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_onexit=yes\"\n else\n@@ -1191,12 +1366,12 @@ if eval \"test \\\"`echo '$ac_cv_func_'onexit`\\\" = yes\"; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for on_exit\"\"... $ac_c\" 1>&6\n-echo \"configure:1195: checking for on_exit\" >&5\n+echo \"configure:1370: checking for on_exit\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_on_exit'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1200 \"configure\"\n+#line 1375 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char on_exit(); below.  */\n@@ -1219,7 +1394,7 @@ on_exit();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1223: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1398: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_on_exit=yes\"\n else\n@@ -1272,7 +1447,7 @@ EOF\n # Ultrix sh set writes to stderr and can't be redirected directly,\n # and sets the high bit in the cache file unless we assign to the vars.\n (set) 2>&1 |\n-  case `(ac_space=' '; set) 2>&1 | grep ac_space` in\n+  case `(ac_space=' '; set | grep ac_space) 2>&1` in\n   *ac_space=\\ *)\n     # `set' does not quote correctly, so add quotes (double-quote substitution\n     # turns \\\\\\\\ into \\\\, and sed turns \\\\ into \\).\n@@ -1351,7 +1526,7 @@ do\n     echo \"running \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion\"\n     exec \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;\n   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)\n-    echo \"$CONFIG_STATUS generated by autoconf version 2.12.1\"\n+    echo \"$CONFIG_STATUS generated by autoconf version 2.13\"\n     exit 0 ;;\n   -help | --help | --hel | --he | --h)\n     echo \"\\$ac_cs_usage\"; exit 0 ;;\n@@ -1374,6 +1549,7 @@ s%@SHELL@%$SHELL%g\n s%@CFLAGS@%$CFLAGS%g\n s%@CPPFLAGS@%$CPPFLAGS%g\n s%@CXXFLAGS@%$CXXFLAGS%g\n+s%@FFLAGS@%$FFLAGS%g\n s%@DEFS@%$DEFS%g\n s%@LDFLAGS@%$LDFLAGS%g\n s%@LIBS@%$LIBS%g\n@@ -1392,6 +1568,7 @@ s%@includedir@%$includedir%g\n s%@oldincludedir@%$oldincludedir%g\n s%@infodir@%$infodir%g\n s%@mandir@%$mandir%g\n+s%@EXEEXT@%$EXEEXT%g\n s%@CC@%$CC%g\n s%@AR@%$AR%g\n s%@SET_MAKE@%$SET_MAKE%g"}, {"sha": "3728ea3ec8316e78c157c7f2164aaec993e52cdb", "filename": "libobjc/configure", "status": "modified", "additions": 252, "deletions": 71, "changes": 323, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da4b1927592af0290ddb71acf7a9f6d71cd004cd/libobjc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da4b1927592af0290ddb71acf7a9f6d71cd004cd/libobjc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure?ref=da4b1927592af0290ddb71acf7a9f6d71cd004cd", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n \n # Guess values for system-dependent variables and create Makefiles.\n-# Generated automatically using autoconf version 2.12.1 \n+# Generated automatically using autoconf version 2.13 \n # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.\n #\n # This configure script is free software; the Free Software Foundation\n@@ -336,7 +336,7 @@ EOF\n     verbose=yes ;;\n \n   -version | --version | --versio | --versi | --vers)\n-    echo \"configure generated by autoconf version 2.12.1\"\n+    echo \"configure generated by autoconf version 2.13\"\n     exit 0 ;;\n \n   -with-* | --with-*)\n@@ -506,9 +506,11 @@ ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n-ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n cross_compiling=$ac_cv_prog_cc_cross\n \n+ac_exeext=\n+ac_objext=o\n if (echo \"testing\\c\"; echo 1,2,3) | grep c >/dev/null; then\n   # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.\n   if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then\n@@ -553,50 +555,153 @@ ac_config_sub=$ac_aux_dir/config.sub\n ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.\n \n \n-# If the language specific compiler does not exist, but the \"gcc\" directory does,\n-# we do not build anything. Note, $r is set by the top-level Makefile.\n+# We have to handle 3 cases -- native, cross and canadian cross -- and\n+# the extension returned from this macro needs to be treated as a possible\n+# scenario and not the only one.\n+echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n+echo \"configure:563: checking for Cygwin environment\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 568 \"configure\"\n+#include \"confdefs.h\"\n+\n+int main() {\n+\n+#ifndef __CYGWIN__\n+#define __CYGWIN__ __CYGWIN32__\n+#endif\n+return __CYGWIN__;\n+; return 0; }\n+EOF\n+if { (eval echo configure:579: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_cygwin=yes\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_cygwin=no\n+fi\n+rm -f conftest*\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n+CYGWIN=\n+test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n+echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n+echo \"configure:596: checking for mingw32 environment\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 601 \"configure\"\n+#include \"confdefs.h\"\n+\n+int main() {\n+return __MINGW32__;\n+; return 0; }\n+EOF\n+if { (eval echo configure:608: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_mingw32=yes\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_mingw32=no\n+fi\n+rm -f conftest*\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_mingw32\" 1>&6\n+MINGW32=\n+test \"$ac_cv_mingw32\" = yes && MINGW32=yes\n+\n+\n+echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n+echo \"configure:627: checking for executable suffix\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$CYGWIN\" = yes || test \"$MINGW32\" = yes; then\n+  ac_cv_exeext=.exe\n+else\n+  rm -f conftest*\n+  echo 'int main () { return 0; }' > conftest.$ac_ext\n+  ac_cv_exeext=\n+  if { (eval echo configure:637: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+    for file in conftest.*; do\n+      case $file in\n+      *.c | *.o | *.obj | *.ilk | *.pdb) ;;\n+      *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;\n+      esac\n+    done\n+  else\n+    { echo \"configure: error: installation or configuration problem: compiler cannot create executables.\" 1>&2; exit 1; }\n+  fi\n+  rm -f conftest*\n+  test x\"${ac_cv_exeext}\" = x && ac_cv_exeext=no\n+fi\n+fi\n+\n+EXEEXT=\"\"\n+test x\"${ac_cv_exeext}\" != xno && EXEEXT=${ac_cv_exeext}\n+echo \"$ac_t\"\"${ac_cv_exeext}\" 1>&6\n+ac_exeext=$EXEEXT\n+\n+\n+# If the language specific compiler does not exist, but the \"gcc\" directory \n+# does, we do not build anything. Note, $r is set by the top-level Makefile.\n+# Note that when we look for the compiler, we search both with and without\n+# extension to handle cross and canadian cross builds. \n compiler_name=cc1obj\n rm -f skip-this-dir\n echo $ac_n \"checking if compiler $compiler_name has been built\"\"... $ac_c\" 1>&6\n-echo \"configure:562: checking if compiler $compiler_name has been built\" >&5\n+echo \"configure:665: checking if compiler $compiler_name has been built\" >&5\n if eval \"test \\\"`echo '$''{'objc_cv_compiler_exists'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   objc_cv_compiler_exists=yes\n-\tif test -n \"$r\"; then\n-\t\tif test -d \"$r\"/gcc; then\n-\t\t\tif test -f \"$r\"/gcc/$compiler_name; then\n-\t\t\t\ttrue\n-\t\t\telse\n-\t\t\t\tobjc_cv_compiler_exists=no\n-\t\t\t\techo \"rm -f config.cache config.log multilib.out\" > skip-this-dir\n-\t\t\tfi\n-\t\tfi\n-\tfi\n-\t\n+if test -n \"$r\"; then\n+  if test -d \"$r\"/gcc; then\n+    if test -f \"$r\"/gcc/$compiler_name \\\n+       || test -f \"$r\"/gcc/$compiler_name$EXEEXT; then\n+      true\n+    else\n+      objc_cv_compiler_exists=no\n+      echo \"rm -f config.cache config.log multilib.out\" > skip-this-dir\n+    fi\n+  fi\n+fi\n+\n fi\n \n echo \"$ac_t\"\"$objc_cv_compiler_exists\" 1>&6\n if test x$objc_cv_compiler_exists = xno\n then\n-\trm -f Makefile conftest* confdefs* core\n-\texit 0\n+  rm -f Makefile conftest* confdefs* core\n+  exit 0\n fi\n \n # For ObjC we'll set CC to point at the built gcc, but this will get it into\n # the makefiles\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:592: checking for $ac_word\" >&5\n+echo \"configure:696: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$CC\"; then\n   ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n-  for ac_dir in $PATH; do\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n       ac_cv_prog_CC=\"gcc\"\n@@ -617,16 +722,17 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:621: checking for $ac_word\" >&5\n+echo \"configure:726: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$CC\"; then\n   ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   ac_prog_rejected=no\n-  for ac_dir in $PATH; do\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n       if test \"$ac_dir/$ac_word\" = \"/usr/ucb/cc\"; then\n@@ -661,25 +767,61 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n fi\n \n+  if test -z \"$CC\"; then\n+    case \"`uname -s`\" in\n+    *win32* | *WIN32*)\n+      # Extract the first word of \"cl\", so it can be a program name with args.\n+set dummy cl; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:777: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_CC=\"cl\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+CC=\"$ac_cv_prog_CC\"\n+if test -n \"$CC\"; then\n+  echo \"$ac_t\"\"$CC\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+ ;;\n+    esac\n+  fi\n   test -z \"$CC\" && { echo \"configure: error: no acceptable cc found in \\$PATH\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:669: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:809: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n-ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n cross_compiling=$ac_cv_prog_cc_cross\n \n-cat > conftest.$ac_ext <<EOF\n-#line 679 \"configure\"\n+cat > conftest.$ac_ext << EOF\n+\n+#line 820 \"configure\"\n #include \"confdefs.h\"\n+\n main(){return(0);}\n EOF\n-if { (eval echo configure:683: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:825: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -693,18 +835,24 @@ else\n   ac_cv_prog_cc_works=no\n fi\n rm -fr conftest*\n+ac_ext=c\n+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+cross_compiling=$ac_cv_prog_cc_cross\n \n echo \"$ac_t\"\"$ac_cv_prog_cc_works\" 1>&6\n if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:703: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:851: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:708: checking whether we are using GNU C\" >&5\n+echo \"configure:856: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -713,7 +861,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:717: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:865: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -724,11 +872,15 @@ echo \"$ac_t\"\"$ac_cv_prog_gcc\" 1>&6\n \n if test $ac_cv_prog_gcc = yes; then\n   GCC=yes\n-  ac_test_CFLAGS=\"${CFLAGS+set}\"\n-  ac_save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\n-  echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:732: checking whether ${CC-cc} accepts -g\" >&5\n+else\n+  GCC=\n+fi\n+\n+ac_test_CFLAGS=\"${CFLAGS+set}\"\n+ac_save_CFLAGS=\"$CFLAGS\"\n+CFLAGS=\n+echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n+echo \"configure:884: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -743,16 +895,20 @@ rm -f conftest*\n fi\n \n echo \"$ac_t\"\"$ac_cv_prog_cc_g\" 1>&6\n-  if test \"$ac_test_CFLAGS\" = set; then\n-    CFLAGS=\"$ac_save_CFLAGS\"\n-  elif test $ac_cv_prog_cc_g = yes; then\n+if test \"$ac_test_CFLAGS\" = set; then\n+  CFLAGS=\"$ac_save_CFLAGS\"\n+elif test $ac_cv_prog_cc_g = yes; then\n+  if test \"$GCC\" = yes; then\n     CFLAGS=\"-g -O2\"\n   else\n-    CFLAGS=\"-O2\"\n+    CFLAGS=\"-g\"\n   fi\n else\n-  GCC=\n-  test \"${CFLAGS+set}\" = set || CFLAGS=\"-g\"\n+  if test \"$GCC\" = yes; then\n+    CFLAGS=\"-O2\"\n+  else\n+    CFLAGS=\n+  fi\n fi\n \n \n@@ -764,15 +920,16 @@ else\n   # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:768: checking for $ac_word\" >&5\n+echo \"configure:924: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$RANLIB\"; then\n   ac_cv_prog_RANLIB=\"$RANLIB\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n-  for ac_dir in $PATH; do\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n       ac_cv_prog_RANLIB=\"ranlib\"\n@@ -803,12 +960,12 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:807: checking for a BSD compatible install\" >&5\n+echo \"configure:964: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-    IFS=\"${IFS= \t}\"; ac_save_IFS=\"$IFS\"; IFS=\"${IFS}:\"\n+    IFS=\"${IFS= \t}\"; ac_save_IFS=\"$IFS\"; IFS=\":\"\n   for ac_dir in $PATH; do\n     # Account for people who put trailing slashes in PATH elements.\n     case \"$ac_dir/\" in\n@@ -851,13 +1008,15 @@ echo \"$ac_t\"\"$INSTALL\" 1>&6\n # It thinks the first close brace ends the variable substitution.\n test -z \"$INSTALL_PROGRAM\" && INSTALL_PROGRAM='${INSTALL}'\n \n+test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n+\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n \n \n # Sanity check for the cross-compilation case:\n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:861: checking how to run the C preprocessor\" >&5\n+echo \"configure:1020: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -872,14 +1031,14 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 876 \"configure\"\n+#line 1035 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:882: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1041: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n else\n@@ -889,14 +1048,31 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 893 \"configure\"\n+#line 1052 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:899: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1058: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  :\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  CPP=\"${CC-cc} -nologo -E\"\n+  cat > conftest.$ac_ext <<EOF\n+#line 1069 \"configure\"\n+#include \"confdefs.h\"\n+#include <assert.h>\n+Syntax Error\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1075: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n else\n@@ -908,6 +1084,8 @@ else\n fi\n rm -f conftest*\n fi\n+rm -f conftest*\n+fi\n rm -f conftest*\n   ac_cv_prog_CPP=\"$CPP\"\n fi\n@@ -919,18 +1097,18 @@ echo \"$ac_t\"\"$CPP\" 1>&6\n \n ac_safe=`echo \"stdio.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for stdio.h\"\"... $ac_c\" 1>&6\n-echo \"configure:923: checking for stdio.h\" >&5\n+echo \"configure:1101: checking for stdio.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 928 \"configure\"\n+#line 1106 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:933: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1111: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   eval \"ac_cv_header_$ac_safe=yes\"\n@@ -957,21 +1135,21 @@ fi\n \n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:961: checking for ANSI C header files\" >&5\n+echo \"configure:1139: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 966 \"configure\"\n+#line 1144 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:974: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1152: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   ac_cv_header_stdc=yes\n@@ -987,7 +1165,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 991 \"configure\"\n+#line 1169 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1005,7 +1183,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1009 \"configure\"\n+#line 1187 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1026,7 +1204,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1030 \"configure\"\n+#line 1208 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1037,7 +1215,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1041: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1219: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1064,7 +1242,7 @@ fi\n # Determine the name of the GCC thread file.\n \n echo $ac_n \"checking for thread file\"\"... $ac_c\" 1>&6\n-echo \"configure:1068: checking for thread file\" >&5\n+echo \"configure:1246: checking for thread file\" >&5\n if eval \"test \\\"`echo '$''{'objc_cv_thread_file'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1119,7 +1297,7 @@ EOF\n # Ultrix sh set writes to stderr and can't be redirected directly,\n # and sets the high bit in the cache file unless we assign to the vars.\n (set) 2>&1 |\n-  case `(ac_space=' '; set) 2>&1 | grep ac_space` in\n+  case `(ac_space=' '; set | grep ac_space) 2>&1` in\n   *ac_space=\\ *)\n     # `set' does not quote correctly, so add quotes (double-quote substitution\n     # turns \\\\\\\\ into \\\\, and sed turns \\\\ into \\).\n@@ -1198,7 +1376,7 @@ do\n     echo \"running \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion\"\n     exec \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;\n   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)\n-    echo \"$CONFIG_STATUS generated by autoconf version 2.12.1\"\n+    echo \"$CONFIG_STATUS generated by autoconf version 2.13\"\n     exit 0 ;;\n   -help | --help | --hel | --he | --h)\n     echo \"\\$ac_cs_usage\"; exit 0 ;;\n@@ -1222,6 +1400,7 @@ s%@SHELL@%$SHELL%g\n s%@CFLAGS@%$CFLAGS%g\n s%@CPPFLAGS@%$CPPFLAGS%g\n s%@CXXFLAGS@%$CXXFLAGS%g\n+s%@FFLAGS@%$FFLAGS%g\n s%@DEFS@%$DEFS%g\n s%@LDFLAGS@%$LDFLAGS%g\n s%@LIBS@%$LIBS%g\n@@ -1240,10 +1419,12 @@ s%@includedir@%$includedir%g\n s%@oldincludedir@%$oldincludedir%g\n s%@infodir@%$infodir%g\n s%@mandir@%$mandir%g\n+s%@EXEEXT@%$EXEEXT%g\n s%@CC@%$CC%g\n s%@AR@%$AR%g\n s%@RANLIB@%$RANLIB%g\n s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g\n+s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g\n s%@INSTALL_DATA@%$INSTALL_DATA%g\n s%@CPP@%$CPP%g\n s%@OBJC_THREAD_FILE@%$OBJC_THREAD_FILE%g"}, {"sha": "619ba32a9eb508ee451b4a222c70bfd5f5f7044c", "filename": "libobjc/configure.in", "status": "modified", "additions": 26, "deletions": 18, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da4b1927592af0290ddb71acf7a9f6d71cd004cd/libobjc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da4b1927592af0290ddb71acf7a9f6d71cd004cd/libobjc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure.in?ref=da4b1927592af0290ddb71acf7a9f6d71cd004cd", "patch": "@@ -1,5 +1,5 @@\n # Process this file with autoconf to produce a configure script.\n-#   Copyright (C) 1995, 1997, 1998 Free Software Foundation, Inc.\n+#   Copyright (C) 1995, 1997, 1998, 1999 Free Software Foundation, Inc.\n #   Contributed by Dave Love (d.love@dl.ac.uk).\n #\n #This file is part of GNU Objective C.\n@@ -19,7 +19,7 @@\n #the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #02111-1307, USA.\n \n-AC_PREREQ(2.12.1)\n+AC_PREREQ(2.13)\n AC_INIT(objc/objc.h)\n #AC_CONFIG_HEADER(config.h)\n \n@@ -36,29 +36,37 @@ dnl This is needed for a multilibbed build in the source tree so\n dnl that install-sh and config.sub get found.\n AC_CONFIG_AUX_DIR($topsrcdir)\n \n-# If the language specific compiler does not exist, but the \"gcc\" directory does,\n-# we do not build anything. Note, $r is set by the top-level Makefile.\n+# We have to handle 3 cases -- native, cross and canadian cross -- and\n+# the extension returned from this macro needs to be treated as a possible\n+# scenario and not the only one.\n+AC_EXEEXT\n+\n+# If the language specific compiler does not exist, but the \"gcc\" directory \n+# does, we do not build anything. Note, $r is set by the top-level Makefile.\n+# Note that when we look for the compiler, we search both with and without\n+# extension to handle cross and canadian cross builds. \n compiler_name=cc1obj\n rm -f skip-this-dir\n AC_MSG_CHECKING(if compiler $compiler_name has been built)\n AC_CACHE_VAL(objc_cv_compiler_exists,\n-\t[objc_cv_compiler_exists=yes\n-\tif test -n \"$r\"; then\n-\t\tif test -d \"$r\"/gcc; then\n-\t\t\tif test -f \"$r\"/gcc/$compiler_name; then\n-\t\t\t\ttrue\n-\t\t\telse\n-\t\t\t\tobjc_cv_compiler_exists=no\n-\t\t\t\techo \"rm -f config.cache config.log multilib.out\" > skip-this-dir\n-\t\t\tfi\n-\t\tfi\n-\tfi\n-\t])\n+[objc_cv_compiler_exists=yes\n+if test -n \"$r\"; then\n+  if test -d \"$r\"/gcc; then\n+    if test -f \"$r\"/gcc/$compiler_name \\\n+       || test -f \"$r\"/gcc/$compiler_name$EXEEXT; then\n+      true\n+    else\n+      objc_cv_compiler_exists=no\n+      echo \"rm -f config.cache config.log multilib.out\" > skip-this-dir\n+    fi\n+  fi\n+fi\n+])\n AC_MSG_RESULT($objc_cv_compiler_exists)\n if test x$objc_cv_compiler_exists = xno\n then\n-\trm -f Makefile conftest* confdefs* core\n-\texit 0\n+  rm -f Makefile conftest* confdefs* core\n+  exit 0\n fi\n \n dnl Checks for programs."}]}