{"sha": "07d81318b69883d9c0c4eec6c792d41ecdf8e55b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDdkODEzMThiNjk4ODNkOWMwYzRlZWM2Yzc5MmQ0MWVjZGY4ZTU1Yg==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2002-04-26T00:09:43Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2002-04-26T00:09:43Z"}, "message": "* gcc.dg/i386-memset-1.c: New test case for PR target/6456.\n\nFrom-SVN: r52771", "tree": {"sha": "9b16b90d13608c17bdea7f68db5f32011c2872ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b16b90d13608c17bdea7f68db5f32011c2872ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07d81318b69883d9c0c4eec6c792d41ecdf8e55b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07d81318b69883d9c0c4eec6c792d41ecdf8e55b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07d81318b69883d9c0c4eec6c792d41ecdf8e55b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07d81318b69883d9c0c4eec6c792d41ecdf8e55b/comments", "author": null, "committer": null, "parents": [{"sha": "eb7715a4823b5be907c0dcea2d71d5cae7b72c10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb7715a4823b5be907c0dcea2d71d5cae7b72c10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb7715a4823b5be907c0dcea2d71d5cae7b72c10"}], "stats": {"total": 104, "additions": 104, "deletions": 0}, "files": [{"sha": "2edcdb424b0b95cb531730961df113b5a57fcf1c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07d81318b69883d9c0c4eec6c792d41ecdf8e55b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07d81318b69883d9c0c4eec6c792d41ecdf8e55b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=07d81318b69883d9c0c4eec6c792d41ecdf8e55b", "patch": "@@ -1,3 +1,7 @@\n+2002-04-25  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* gcc.dg/i386-memset-1.c: New test case for PR target/6456.\n+\n 2002-04-25  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* gcc.c-torture/execute/20020227-1.x: New file, xfail on 64-bit"}, {"sha": "f450dd7287ef81de7cd414a54e0035eb361aa66f", "filename": "gcc/testsuite/gcc.dg/i386-memset-1.c", "status": "added", "additions": 100, "deletions": 0, "changes": 100, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07d81318b69883d9c0c4eec6c792d41ecdf8e55b/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-memset-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07d81318b69883d9c0c4eec6c792d41ecdf8e55b/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-memset-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-memset-1.c?ref=07d81318b69883d9c0c4eec6c792d41ecdf8e55b", "patch": "@@ -0,0 +1,100 @@\n+/* Copyright (C) 2002  Free Software Foundation.\n+\n+   Test -minline-all-stringops memset with various combinations of pointer\n+   alignments and lengths to make sure builtin optimizations are correct.\n+   PR target/6456.\n+\n+   Written by Michael Meissner, March 9, 2002.\n+   Target by Roger Sayle, April 25, 2002.  */\n+\n+/* { dg-do run { target \"i?86-*-*\" } } */\n+/* { dg-options \"-O2 -minline-all-stringops\" } */\n+\n+#ifndef MAX_OFFSET\n+#define MAX_OFFSET (sizeof (long long))\n+#endif\n+\n+#ifndef MAX_COPY\n+#define MAX_COPY (8 * sizeof (long long))\n+#endif\n+\n+#ifndef MAX_EXTRA\n+#define MAX_EXTRA (sizeof (long long))\n+#endif\n+\n+#define MAX_LENGTH (MAX_OFFSET + MAX_COPY + MAX_EXTRA)\n+\n+static union {\n+  char buf[MAX_LENGTH];\n+  long long align_int;\n+  long double align_fp;\n+} u;\n+\n+char A = 'A';\n+\n+main ()\n+{\n+  int off, len, i;\n+  char *p, *q;\n+\n+  for (off = 0; off < MAX_OFFSET; off++)\n+    for (len = 1; len < MAX_COPY; len++)\n+      {\n+\tfor (i = 0; i < MAX_LENGTH; i++)\n+\t  u.buf[i] = 'a';\n+\n+\tp = memset (u.buf + off, '\\0', len);\n+\tif (p != u.buf + off)\n+\t  abort ();\n+\n+\tq = u.buf;\n+\tfor (i = 0; i < off; i++, q++)\n+\t  if (*q != 'a')\n+\t    abort ();\n+\n+\tfor (i = 0; i < len; i++, q++)\n+\t  if (*q != '\\0')\n+\t    abort ();\n+\n+\tfor (i = 0; i < MAX_EXTRA; i++, q++)\n+\t  if (*q != 'a')\n+\t    abort ();\n+\n+\tp = memset (u.buf + off, A, len);\n+\tif (p != u.buf + off)\n+\t  abort ();\n+\n+\tq = u.buf;\n+\tfor (i = 0; i < off; i++, q++)\n+\t  if (*q != 'a')\n+\t    abort ();\n+\n+\tfor (i = 0; i < len; i++, q++)\n+\t  if (*q != 'A')\n+\t    abort ();\n+\n+\tfor (i = 0; i < MAX_EXTRA; i++, q++)\n+\t  if (*q != 'a')\n+\t    abort ();\n+\n+\tp = memset (u.buf + off, 'B', len);\n+\tif (p != u.buf + off)\n+\t  abort ();\n+\n+\tq = u.buf;\n+\tfor (i = 0; i < off; i++, q++)\n+\t  if (*q != 'a')\n+\t    abort ();\n+\n+\tfor (i = 0; i < len; i++, q++)\n+\t  if (*q != 'B')\n+\t    abort ();\n+\n+\tfor (i = 0; i < MAX_EXTRA; i++, q++)\n+\t  if (*q != 'a')\n+\t    abort ();\n+      }\n+\n+  exit(0);\n+}\n+"}]}