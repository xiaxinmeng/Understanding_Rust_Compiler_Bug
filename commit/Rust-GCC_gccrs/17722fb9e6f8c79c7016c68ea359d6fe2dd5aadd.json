{"sha": "17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTc3MjJmYjllNmY4Yzc5YzcwMTZjNjhlYTM1OWQ2ZmUyZGQ1YWFkZA==", "commit": {"author": {"name": "Senthil Kumar Selvaraj", "email": "senthil_kumar.selvaraj@atmel.com", "date": "2017-03-28T10:55:18Z"}, "committer": {"name": "Senthil Kumar Selvaraj", "email": "saaadhu@gcc.gnu.org", "date": "2017-03-28T10:55:18Z"}, "message": "Fix broken tests for avr target\n\nThese tests assume {unsigned,} ints are 32 bits or wider. Explicitly\nspecify __{U}INT32_TYPE__ for targets with __SIZEOF_INT__ < 4.\n\ngcc/testsuite/\n\n2017-03-28  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n\n\t* gcc.c-torture/execute/pr79121.c:Use __{U}INT32_TYPE__ for targets\n\twith sizeof(int) < 4.\n\t* gcc.c-torture/execute/pr79737-1.c (struct S): Likewise.\n\t* gcc.c-torture/execute/pr79737-2.c: Likewise.\n\t* gcc.dg/torture/pr79777.c: Likewise.\n\t* gcc.dg/torture/pr79910.c: Likewise.\n\nFrom-SVN: r246529", "tree": {"sha": "3e99b7e467b519adc2fdf74c9a90c329b6da8562", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e99b7e467b519adc2fdf74c9a90c329b6da8562"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/comments", "author": null, "committer": {"login": "saaadhu", "id": 532256, "node_id": "MDQ6VXNlcjUzMjI1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/532256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saaadhu", "html_url": "https://github.com/saaadhu", "followers_url": "https://api.github.com/users/saaadhu/followers", "following_url": "https://api.github.com/users/saaadhu/following{/other_user}", "gists_url": "https://api.github.com/users/saaadhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/saaadhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saaadhu/subscriptions", "organizations_url": "https://api.github.com/users/saaadhu/orgs", "repos_url": "https://api.github.com/users/saaadhu/repos", "events_url": "https://api.github.com/users/saaadhu/events{/privacy}", "received_events_url": "https://api.github.com/users/saaadhu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41f447177cd863ae2bdf8f77801517e8007b4e2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41f447177cd863ae2bdf8f77801517e8007b4e2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41f447177cd863ae2bdf8f77801517e8007b4e2b"}], "stats": {"total": 72, "additions": 55, "deletions": 17}, "files": [{"sha": "fe42af1b3bbfdfe0b54af069d9da2f29d3d7ee85", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "patch": "@@ -1,3 +1,12 @@\n+2017-03-28  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n+\n+\t* gcc.c-torture/execute/pr79121.c:Use __{U}INT32_TYPE__ for targets\n+\twith sizeof(int) < 4.\n+\t* gcc.c-torture/execute/pr79737-1.c (struct S): Likewise.\n+\t* gcc.c-torture/execute/pr79737-2.c: Likewise.\n+\t* gcc.dg/torture/pr79777.c: Likewise.\n+\t* gcc.dg/torture/pr79910.c: Likewise.\n+\n 2017-03-28  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/80222"}, {"sha": "5593acc7d297d26ed0f6ccd047a22872e12b2070", "filename": "gcc/testsuite/gcc.c-torture/execute/pr79121.c", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79121.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79121.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79121.c?ref=17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "patch": "@@ -1,21 +1,29 @@\n+#if __SIZEOF_INT__ < 4\n+  __extension__ typedef __UINT32_TYPE__ uint32_t;\n+  __extension__ typedef __INT32_TYPE__ int32_t;\n+#else\n+  typedef unsigned uint32_t;\n+  typedef int int32_t;\n+#endif\n+\n extern void abort (void);\n \n-__attribute__ ((noinline, noclone)) unsigned long long f1 (int x)\n+__attribute__ ((noinline, noclone)) unsigned long long f1 (int32_t x)\n {\n   return ((unsigned long long) x) << 4;\n }\n \n-__attribute__ ((noinline, noclone)) long long f2 (unsigned x)\n+__attribute__ ((noinline, noclone)) long long f2 (uint32_t x)\n {\n   return ((long long) x) << 4;\n }\n \n-__attribute__ ((noinline, noclone)) unsigned long long f3 (unsigned x)\n+__attribute__ ((noinline, noclone)) unsigned long long f3 (uint32_t x)\n {\n   return ((unsigned long long) x) << 4;\n }\n \n-__attribute__ ((noinline, noclone)) long long f4 (int x)\n+__attribute__ ((noinline, noclone)) long long f4 (int32_t x)\n {\n   return ((long long) x) << 4;\n }"}, {"sha": "f7fa5f9ea9b7a99054084ed7c38c462f734217d4", "filename": "gcc/testsuite/gcc.c-torture/execute/pr79737-1.c", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79737-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79737-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79737-1.c?ref=17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "patch": "@@ -1,13 +1,19 @@\n /* PR tree-optimization/79737 */\n \n+#if __SIZEOF_INT__ < 4\n+  __extension__ typedef __INT32_TYPE__ int32_t;\n+#else\n+  typedef int int32_t;\n+#endif\n+\n #pragma pack(1)\n struct S\n {\n-  int b:18;\n-  int c:1;\n-  int d:24;\n-  int e:15;\n-  int f:14;\n+  int32_t b:18;\n+  int32_t c:1;\n+  int32_t d:24;\n+  int32_t e:15;\n+  int32_t f:14;\n } i;\n int g, j, k;\n static struct S h;"}, {"sha": "56a6ad8f663b0a578f28c3aa2cda15874a6a62cc", "filename": "gcc/testsuite/gcc.c-torture/execute/pr79737-2.c", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79737-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79737-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr79737-2.c?ref=17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "patch": "@@ -1,13 +1,19 @@\n /* PR tree-optimization/79737 */\n \n+#if __SIZEOF_INT__ < 4\n+  __extension__ typedef __INT32_TYPE__ int32_t;\n+#else\n+  typedef int int32_t;\n+#endif\n+\n #pragma pack(1)\n struct S\n {\n-  int b:18;\n-  int c:1;\n-  int d:24;\n-  int e:15;\n-  int f:14;\n+  int32_t b:18;\n+  int32_t c:1;\n+  int32_t d:24;\n+  int32_t e:15;\n+  int32_t f:14;\n } i, j;\n \n void"}, {"sha": "40d6740d2a44cc06667811921def543ec973050b", "filename": "gcc/testsuite/gcc.dg/torture/pr79777.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79777.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79777.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79777.c?ref=17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "patch": "@@ -1,9 +1,14 @@\n /* { dg-do compile } */\n \n typedef unsigned short __u16;\n-typedef unsigned int __u32;\n+#if __SIZEOF_INT__ < 4\n+  __extension__ typedef __UINT32_TYPE__ __u32;\n+  __extension__ typedef __UINT32_TYPE__ u32;\n+#else\n+  typedef unsigned int __u32;\n+  typedef unsigned int u32;\n+#endif\n typedef unsigned char u8;\n-typedef unsigned int u32;\n typedef __u16 __le16;\n typedef __u32 __le32;\n typedef u32 secno;"}, {"sha": "280dda1a49fb08261f35569a4675265c6b6ea33f", "filename": "gcc/testsuite/gcc.dg/torture/pr79910.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79910.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79910.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79910.c?ref=17722fb9e6f8c79c7016c68ea359d6fe2dd5aadd", "patch": "@@ -2,7 +2,11 @@\n /* { dg-additional-options \"-fweb\" } */\n \n typedef unsigned char u8;\n-typedef unsigned int u32;\n+#if __SIZEOF_INT__ < 4\n+  __extension__ typedef __UINT32_TYPE__ u32;\n+#else\n+  typedef unsigned int u32;\n+#endif\n typedef unsigned long long u64;\n int a;\n "}]}