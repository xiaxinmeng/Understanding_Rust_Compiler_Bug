{"sha": "cbbd439a33e889a1a47b103951c53472fc8558eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JiZDQzOWEzM2U4ODlhMWE0N2IxMDM5NTFjNTM0NzJmYzg1NThlYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2021-08-02T23:27:02Z"}, "committer": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2021-08-03T23:36:20Z"}, "message": "compiler: check slice to pointer-to-array conversion element type\n\nWhen checking a slice to pointer-to-array conversion, I forgot to\nverify that the elements types are identical.\n\nFor golang/go#395\n\nReviewed-on: https://go-review.googlesource.com/c/gofrontend/+/339329", "tree": {"sha": "5accf4216504db9d9f0d269cac79d1427303ae4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5accf4216504db9d9f0d269cac79d1427303ae4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cbbd439a33e889a1a47b103951c53472fc8558eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbbd439a33e889a1a47b103951c53472fc8558eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbbd439a33e889a1a47b103951c53472fc8558eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbbd439a33e889a1a47b103951c53472fc8558eb/comments", "author": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a7794b469f897e0141817785738e2faa73119b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a7794b469f897e0141817785738e2faa73119b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a7794b469f897e0141817785738e2faa73119b5"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "801e039a155034b83102eda28594f83070f5c86a", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbbd439a33e889a1a47b103951c53472fc8558eb/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbbd439a33e889a1a47b103951c53472fc8558eb/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=cbbd439a33e889a1a47b103951c53472fc8558eb", "patch": "@@ -1,4 +1,4 @@\n-0a4d612e6b211780b294717503fc739bbd1f509c\n+54361805bd611d896042b879ee7f6d2d4d088537\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "51a8b7e4322c66b327b9d19dceb4d54ec7ed2042", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbbd439a33e889a1a47b103951c53472fc8558eb/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbbd439a33e889a1a47b103951c53472fc8558eb/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=cbbd439a33e889a1a47b103951c53472fc8558eb", "patch": "@@ -3962,7 +3962,10 @@ Type_conversion_expression::do_lower(Gogo*, Named_object*,\n   if (type->points_to() != NULL\n       && type->points_to()->array_type() != NULL\n       && !type->points_to()->is_slice_type()\n-      && val->type()->is_slice_type())\n+      && val->type()->is_slice_type()\n+      && Type::are_identical(type->points_to()->array_type()->element_type(),\n+\t\t\t     val->type()->array_type()->element_type(),\n+\t\t\t     0, NULL))\n     {\n       Temporary_statement* val_temp = NULL;\n       if (!val->is_multi_eval_safe())"}, {"sha": "0c44186f507d65caaa31cfe7f51c5580b2d542ba", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbbd439a33e889a1a47b103951c53472fc8558eb/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbbd439a33e889a1a47b103951c53472fc8558eb/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=cbbd439a33e889a1a47b103951c53472fc8558eb", "patch": "@@ -846,7 +846,9 @@ Type::are_convertible(const Type* lhs, const Type* rhs, std::string* reason)\n   if (rhs->is_slice_type()\n       && lhs->points_to() != NULL\n       && lhs->points_to()->array_type() != NULL\n-      && !lhs->points_to()->is_slice_type())\n+      && !lhs->points_to()->is_slice_type()\n+      && Type::are_identical(lhs->points_to()->array_type()->element_type(),\n+\t\t\t     rhs->array_type()->element_type(), 0, reason))\n     return true;\n \n   // An unsafe.Pointer type may be converted to any pointer type or to"}]}