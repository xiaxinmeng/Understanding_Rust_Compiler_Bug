{"sha": "3beac9100a2cb243f88591bab2ae74f36be71a7d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2JlYWM5MTAwYTJjYjI0M2Y4ODU5MWJhYjJhZTc0ZjM2YmU3MWE3ZA==", "commit": {"author": {"name": "Bastian Blank", "email": "waldi@debian.org", "date": "2005-09-13T15:15:37Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-09-13T15:15:37Z"}, "message": "re PR c++/16171 ([ABI] Problems with standard names in different namespaces)\n\n\tPR c++/16171\n\t* mangle.c (find_substitution): Do not use special substitutions\n\tfor identifiers not in std::.\n\n\tPR c++/16171\n\t* g++.dg/abi/mangle26.C: New test.\n\t* g++.dg/abi/mangle27.C: New test.\n\t* g++.dg/abi/mangle28.C: New test.\n\t* g++.dg/abi/mangle29.C: New test.\n\nFrom-SVN: r104228", "tree": {"sha": "1e691a55dae74caad99952616ac3ffb85960b120", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e691a55dae74caad99952616ac3ffb85960b120"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3beac9100a2cb243f88591bab2ae74f36be71a7d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3beac9100a2cb243f88591bab2ae74f36be71a7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3beac9100a2cb243f88591bab2ae74f36be71a7d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3beac9100a2cb243f88591bab2ae74f36be71a7d/comments", "author": null, "committer": null, "parents": [{"sha": "7b09c6a4992b1b43eb00155f02b841969d48c5ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b09c6a4992b1b43eb00155f02b841969d48c5ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b09c6a4992b1b43eb00155f02b841969d48c5ae"}], "stats": {"total": 77, "additions": 72, "deletions": 5}, "files": [{"sha": "4033dc30096efcdd72a0ebeeadba37a627dd0352", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3beac9100a2cb243f88591bab2ae74f36be71a7d", "patch": "@@ -1,3 +1,9 @@\n+2005-09-13  Bastian Blank <waldi@debian.org>\n+\n+\tPR c++/16171\n+\t* mangle.c (find_substitution): Do not use special substitutions\n+\tfor identifiers not in std::.\n+\t\n 2005-09-13  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/23839"}, {"sha": "9dca2a56c55c3cf527eba53deca362e8f390ecdd", "filename": "gcc/cp/mangle.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Fcp%2Fmangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Fcp%2Fmangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmangle.c?ref=3beac9100a2cb243f88591bab2ae74f36be71a7d", "patch": "@@ -606,20 +606,19 @@ find_substitution (tree node)\n \t\t\t\t       SUBID_CHAR_TRAITS))\n \t{\n \t  /* Got them.  Is this basic_istream?  */\n-\t  tree name = DECL_NAME (CLASSTYPE_TI_TEMPLATE (type));\n-\t  if (name == subst_identifiers[SUBID_BASIC_ISTREAM])\n+\t  if (is_std_substitution (decl, SUBID_BASIC_ISTREAM))\n \t    {\n \t      write_string (\"Si\");\n \t      return 1;\n \t    }\n \t  /* Or basic_ostream?  */\n-\t  else if (name == subst_identifiers[SUBID_BASIC_OSTREAM])\n+\t  else if (is_std_substitution (decl, SUBID_BASIC_OSTREAM))\n \t    {\n \t      write_string (\"So\");\n \t      return 1;\n \t    }\n \t  /* Or basic_iostream?  */\n-\t  else if (name == subst_identifiers[SUBID_BASIC_IOSTREAM])\n+\t  else if (is_std_substitution (decl, SUBID_BASIC_IOSTREAM))\n \t    {\n \t      write_string (\"Sd\");\n \t      return 1;"}, {"sha": "c192765cdd866423556ada8563bf026ca858a02c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3beac9100a2cb243f88591bab2ae74f36be71a7d", "patch": "@@ -1,4 +1,10 @@\n-2005-09-13  Mark Mitchell  <mark@codesourcery.com>\n+2005-09-13  Bastian Blank <waldi@debian.org>\n+\n+\tPR c++/16171\n+\t* g++.dg/abi/mangle26.C: New test. \n+\t* g++.dg/abi/mangle27.C: New test. \n+\t* g++.dg/abi/mangle28.C: New test. \n+\t* g++.dg/abi/mangle29.C: New test. \n \n \tPR c++/23839\n \t* g++.dg/parse/register1.C: New test."}, {"sha": "cfec4b938724138d41b10dc82168edd7f99f0d66", "filename": "gcc/testsuite/g++.dg/abi/mangle26.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle26.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle26.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle26.C?ref=3beac9100a2cb243f88591bab2ae74f36be71a7d", "patch": "@@ -0,0 +1,14 @@\n+// Test of std mangling\n+\n+// { dg-do compile }\n+// { dg-options \"-fno-inline\" }\n+\n+namespace std {\n+  struct A {\n+    virtual void f () { }\n+  };\n+}\n+\n+std::A a;\n+\n+// { dg-final { scan-assembler \"\\n_?_ZNSt1AC1Ev\\[: \\t\\n\\]\" } }"}, {"sha": "da4efbae696c80396e3516393842c9c1d3275f83", "filename": "gcc/testsuite/g++.dg/abi/mangle27.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle27.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle27.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle27.C?ref=3beac9100a2cb243f88591bab2ae74f36be71a7d", "patch": "@@ -0,0 +1,14 @@\n+// Test of std::basic_iostream<char, std::char_traits<char> > mangling\n+\n+// { dg-do compile }\n+// { dg-options \"-fno-inline\" }\n+\n+namespace std {\n+  template<typename> struct char_traits;\n+\n+  template<typename, typename> struct basic_iostream { basic_iostream(){} };\n+}\n+\n+std::basic_iostream<char,std::char_traits<char> > s1;\n+\n+// { dg-final { scan-assembler \"\\n_?_ZNSdC1Ev\\[: \\t\\n\\]\" } }"}, {"sha": "b8c40ca8d856b1e4485d307ea2cbc7e400c773e9", "filename": "gcc/testsuite/g++.dg/abi/mangle28.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle28.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle28.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle28.C?ref=3beac9100a2cb243f88591bab2ae74f36be71a7d", "patch": "@@ -0,0 +1,14 @@\n+// Test of std::basic_istream<char, std::char_traits<char> > mangling\n+\n+// { dg-do compile }\n+// { dg-options \"-fno-inline\" }\n+\n+namespace std {\n+  template<typename> struct char_traits;\n+\n+  template<typename, typename> struct basic_istream { basic_istream(){} };\n+}\n+\n+std::basic_istream<char,std::char_traits<char> > s1;\n+\n+// { dg-final { scan-assembler \"\\n_?_ZNSiC1Ev\\[: \\t\\n\\]\" } }"}, {"sha": "4f64efb676a4d8f4da80177ab9ad9fc544b8deb2", "filename": "gcc/testsuite/g++.dg/abi/mangle29.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle29.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3beac9100a2cb243f88591bab2ae74f36be71a7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle29.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle29.C?ref=3beac9100a2cb243f88591bab2ae74f36be71a7d", "patch": "@@ -0,0 +1,14 @@\n+// Test of std::basic_ostream<char, std::char_traits<char> > mangling\n+\n+// { dg-do compile }\n+// { dg-options \"-fno-inline\" }\n+\n+namespace std {\n+  template<typename> struct char_traits;\n+\n+  template<typename, typename> struct basic_ostream { basic_ostream(){} };\n+}\n+\n+std::basic_ostream<char,std::char_traits<char> > s1;\n+\n+// { dg-final { scan-assembler \"\\n_?_ZNSoC1Ev\\[: \\t\\n\\]\" } }"}]}