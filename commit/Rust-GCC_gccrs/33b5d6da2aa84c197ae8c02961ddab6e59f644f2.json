{"sha": "33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNiNWQ2ZGEyYWE4NGMxOTdhZThjMDI5NjFkZGFiNmU1OWY2NDRmMg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-11-05T15:22:36Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-11-05T15:22:36Z"}, "message": "re PR c++/58724 (ICE with attribute [[gnu::visibility(\"default\")]] on namespace)\n\n2013-11-05  Paolo Carlini  <paolo.carlini@oracle.com>\n\t\n\tPR c++/58724\n\t* doc/extend.texi [visibility (\"visibility_type\")]: Add example\n\tabout visibility attribute on namespace declaration.\n\n/cp\n2013-11-05  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58724\n\t* name-lookup.c (handle_namespace_attrs): Use get_attribute_name.\n\n/testsuite\n2013-11-05  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58724\n\t* g++.dg/cpp0x/gen-attrs-56.C: New.\n\nFrom-SVN: r204401", "tree": {"sha": "466135e745930151a8d682369297d991fd462955", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/466135e745930151a8d682369297d991fd462955"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/comments", "author": null, "committer": null, "parents": [{"sha": "9c39fca1bf518dd6b0642811c2571f4cdf9d02d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c39fca1bf518dd6b0642811c2571f4cdf9d02d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c39fca1bf518dd6b0642811c2571f4cdf9d02d8"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "6067ee54f626f8fc9b98e684fb9fea6548576ec5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "patch": "@@ -1,3 +1,9 @@\n+2013-11-05  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58724\n+\t* doc/extend.texi [visibility (\"visibility_type\")]: Add example\n+\tabout visibility attribute on namespace declaration.\n+\n 2013-11-05  Richard Biener  <rguenther@suse.de>\n \n \tPR ipa/58492\n@@ -27,7 +33,7 @@\n \n 2013-11-05  Andrew MacLeod  <amacleod@redhat.com>\n \n-\t* tree-outof-ssa.c (queue_phi_copy_p): Combine phi_ssa_name_p from \n+\t* tree-outof-ssa.c (queue_phi_copy_p): Combine phi_ssa_name_p from\n \tgimple.h and the rest of the condition in eliminate_build.\n \t(eliminate_build): Call new routine.\n \t* gimple.h (phi_ssa_name_p): Delete."}, {"sha": "fb9e0c6826906442a6f76155927c9452a8182120", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "patch": "@@ -1,3 +1,8 @@\n+2013-11-05  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58724\n+\t* name-lookup.c (handle_namespace_attrs): Use get_attribute_name.\n+\n 2013-11-05  Tobias Burnus  <burnus@net-b.de>\n \n \t* parser.c (cp_parser_omp_for, cp_parser_omp_parallel,"}, {"sha": "ced596e310a4ef3f041a26b3289d6f3c0ea8383c", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "patch": "@@ -3571,7 +3571,7 @@ handle_namespace_attrs (tree ns, tree attributes)\n \n   for (d = attributes; d; d = TREE_CHAIN (d))\n     {\n-      tree name = TREE_PURPOSE (d);\n+      tree name = get_attribute_name (d);\n       tree args = TREE_VALUE (d);\n \n       if (is_attribute_p (\"visibility\", name))"}, {"sha": "0d72819b1b0e28acf3231c6596acb2925d0fe442", "filename": "gcc/doc/extend.texi", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Fdoc%2Fextend.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Fdoc%2Fextend.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fextend.texi?ref=33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "patch": "@@ -4275,6 +4275,12 @@ the One Definition Rule; for example, it is usually not useful to mark\n an inline method as hidden without marking the whole class as hidden.\n \n A C++ namespace declaration can also have the visibility attribute.\n+\n+@smallexample\n+namespace nspace1 __attribute__ ((visibility (\"protected\")))\n+@{ /* @r{Do something.} */; @}\n+@end smallexample\n+\n This attribute applies only to the particular namespace body, not to\n other definitions of the same namespace; it is equivalent to using\n @samp{#pragma GCC visibility} before and after the namespace"}, {"sha": "61461633e59a1412127fbccd8b18cd3ccb7d4e1c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "patch": "@@ -1,3 +1,8 @@\n+2013-11-05  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58724\n+\t* g++.dg/cpp0x/gen-attrs-56.C: New.\n+\n 2013-11-05  Richard Biener  <rguenther@suse.de>\n \n \tPR ipa/58492"}, {"sha": "f331ed369ace9de3d0dda5efe84dd1f7d801bc6f", "filename": "gcc/testsuite/g++.dg/cpp0x/gen-attrs-56.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fgen-attrs-56.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33b5d6da2aa84c197ae8c02961ddab6e59f644f2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fgen-attrs-56.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fgen-attrs-56.C?ref=33b5d6da2aa84c197ae8c02961ddab6e59f644f2", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/58724\n+// { dg-do compile { target c++11 } }\n+\n+namespace foo __attribute__((visibility(\"default\"))) {}\n+namespace bar [[gnu::visibility(\"default\")]] {}"}]}