{"sha": "586add7f93c60fe76dd2cede61801f83aadae7cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg2YWRkN2Y5M2M2MGZlNzZkZDJjZWRlNjE4MDFmODNhYWRhZTdjZA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-12-04T23:48:45Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-12-04T23:48:45Z"}, "message": "re PR c++/84636 (internal compiler error: Segmentation fault (identifier_p()/grokdeclarator()))\n\n/cp\n2018-12-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/84636\n\t* decl.c (grokdeclarator): Avoid crashing on an anonymous bit-field\n\twith function type.\n\n/testsuite\n2018-12-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/84636\n\t* g++.dg/parse/bitfield6.C: New.\n\nFrom-SVN: r266807", "tree": {"sha": "f907c5f6c811555ecc63753fc5305e8d869dea26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f907c5f6c811555ecc63753fc5305e8d869dea26"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/586add7f93c60fe76dd2cede61801f83aadae7cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/586add7f93c60fe76dd2cede61801f83aadae7cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/586add7f93c60fe76dd2cede61801f83aadae7cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/586add7f93c60fe76dd2cede61801f83aadae7cd/comments", "author": null, "committer": null, "parents": [{"sha": "6c620b0744af235ceb1c07c214772895e0f73c15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c620b0744af235ceb1c07c214772895e0f73c15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c620b0744af235ceb1c07c214772895e0f73c15"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "253af3ba1347a0a2296fc2aa6669a61571f9fd25", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=586add7f93c60fe76dd2cede61801f83aadae7cd", "patch": "@@ -1,3 +1,9 @@\n+2018-12-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/84636\n+\t* decl.c (grokdeclarator): Avoid crashing on an anonymous bit-field\n+\twith function type.\n+\n 2018-12-04  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/88184 - ICE when treating name as template-name."}, {"sha": "e662f63bb0f07ffafecb8c9a3f7eb6c81e163755", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=586add7f93c60fe76dd2cede61801f83aadae7cd", "patch": "@@ -12187,7 +12187,8 @@ grokdeclarator (const cp_declarator *declarator,\n     }\n \n   if (ctype && TREE_CODE (type) == FUNCTION_TYPE && staticp < 2\n-      && !(identifier_p (unqualified_id)\n+      && !(unqualified_id\n+\t   && identifier_p (unqualified_id)\n \t   && IDENTIFIER_NEWDEL_OP_P (unqualified_id)))\n     {\n       cp_cv_quals real_quals = memfn_quals;\n@@ -12267,8 +12268,7 @@ grokdeclarator (const cp_declarator *declarator,\n \t    error (\"invalid use of %<::%>\");\n \t    return error_mark_node;\n \t  }\n-\telse if (TREE_CODE (type) == FUNCTION_TYPE\n-\t\t || TREE_CODE (type) == METHOD_TYPE)\n+\telse if (FUNC_OR_METHOD_TYPE_P (type) && unqualified_id)\n \t  {\n \t    int publicp = 0;\n \t    tree function_context;"}, {"sha": "d02b6f37235939e33ddf02e49d6b4317d25ab285", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=586add7f93c60fe76dd2cede61801f83aadae7cd", "patch": "@@ -1,3 +1,8 @@\n+2018-12-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/84636\n+\t* g++.dg/parse/bitfield6.C: New.\n+\n 2018-12-04  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/87320"}, {"sha": "dad0b681c66ca262ea8ca3d9588a5ba958d22455", "filename": "gcc/testsuite/g++.dg/parse/bitfield6.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fbitfield6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586add7f93c60fe76dd2cede61801f83aadae7cd/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fbitfield6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fbitfield6.C?ref=586add7f93c60fe76dd2cede61801f83aadae7cd", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/84636\n+\n+typedef void a();\n+struct A {\n+a: 1;  // { dg-error \"bit-field .\\\\<anonymous\\\\>. with non-integral type\" }\n+};"}]}