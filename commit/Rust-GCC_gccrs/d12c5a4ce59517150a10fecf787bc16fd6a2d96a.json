{"sha": "d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDEyYzVhNGNlNTk1MTcxNTBhMTBmZWNmNzg3YmMxNmZkNmEyZDk2YQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2004-12-04T09:22:32Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2004-12-04T09:22:32Z"}, "message": "mklibgcc.in: Build shared libgcc and shared libunwind in gcc/.\n\n\t* mklibgcc.in: Build shared libgcc and shared libunwind in gcc/.\n\tDon't subst shlib_dir for SHLIB_LINK, SHLIBUNWIND_LINK,\n\tSHLIB_INSTALL, and SHLIBUNWIND_INSTALL.\n\t* config/i386/t-nwld (SHLIB_NAME): Use shlib_base_name in place of\n\tshlib_dir and shlib_so_name.\n\t* config/mips/t-slibgcc-irix (SHLIB_NAME): Likewise.\n\t* config/t-libunwind-elf (SHLIB_NAME): Likewise.\n\t* config/t-slibgcc-darwin (SHLIB_NAME): Likewise.\n\t* config/t-slibgcc-elf-ver (SHLIB_NAME): Likewise.\n\t* config/t-slibgcc-sld (SHLIB_NAME): Likewise.\n\t(SHLIB_LINK): Don't use shlib_dir when creating symlink.\n\nFrom-SVN: r91724", "tree": {"sha": "cda19c328108111f0a80088112160d7d214ff2ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cda19c328108111f0a80088112160d7d214ff2ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/comments", "author": null, "committer": null, "parents": [{"sha": "493bc46004681c9ab631a38fc62f086f6274aaea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/493bc46004681c9ab631a38fc62f086f6274aaea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/493bc46004681c9ab631a38fc62f086f6274aaea"}], "stats": {"total": 60, "additions": 34, "deletions": 26}, "files": [{"sha": "e6b2b70eb1840bfc633908ab7bf14b9c8d5b3da8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 20, "deletions": 6, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -1,10 +1,24 @@\n+2004-12-04  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* mklibgcc.in: Build shared libgcc and shared libunwind in gcc/.\n+\tDon't subst shlib_dir for SHLIB_LINK, SHLIBUNWIND_LINK,\n+\tSHLIB_INSTALL, and SHLIBUNWIND_INSTALL.\n+\t* config/i386/t-nwld (SHLIB_NAME): Use shlib_base_name in place of\n+\tshlib_dir and shlib_so_name.\n+\t* config/mips/t-slibgcc-irix (SHLIB_NAME): Likewise.\n+\t* config/t-libunwind-elf (SHLIB_NAME): Likewise.\n+\t* config/t-slibgcc-darwin (SHLIB_NAME): Likewise.\n+\t* config/t-slibgcc-elf-ver (SHLIB_NAME): Likewise.\n+\t* config/t-slibgcc-sld (SHLIB_NAME): Likewise.\n+\t(SHLIB_LINK): Don't use shlib_dir when creating symlink.\n+\n 2004-12-03  Roger Sayle  <roger@eyesopen.com>\n \n \t* doc/tm.texi (TARGET_DELEGITIMIZE_ADDRESS): Document target hook.\n \n 2004-12-03  Richard Henderson  <rth@redhat.com>\n \n-\t* alias.c (component_uses_parent_alias_set): Rename from \n+\t* alias.c (component_uses_parent_alias_set): Rename from\n \tcan_address_p.  Return bool.  Reverse the sense of the result.\n \tReinstate the check for alias set zero.\n \t(get_alias_set): Update to match.\n@@ -190,11 +204,11 @@\n \n 2004-12-01  Jeff Law  <law@redhat.com>\n \n-        * tree-eh.c (save_eptr, save_filt): Now file scoped statics.\n-        (honor_protect_cleanup_actions): Only create save_eptr and\n-        save_filt if they do not already exist.\n-        (lower_eh_constructs): Wipe all knowledge of save_eptr and\n-        save_filt before returning.\n+\t* tree-eh.c (save_eptr, save_filt): Now file scoped statics.\n+\t(honor_protect_cleanup_actions): Only create save_eptr and\n+\tsave_filt if they do not already exist.\n+\t(lower_eh_constructs): Wipe all knowledge of save_eptr and\n+\tsave_filt before returning.\n \n 2004-12-02  Kazu Hirata  <kazu@cs.umass.edu>\n "}, {"sha": "37c88c0da3d03523dbb2b298654862e1ff095ad9", "filename": "gcc/config/i386/t-nwld", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Fi386%2Ft-nwld", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Fi386%2Ft-nwld", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ft-nwld?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -30,7 +30,7 @@ s-crt0: $(srcdir)/unwind-dw2-fde.h\n \n SHLIB_EXT = .nlm\n SHLIB_SONAME = @shlib_so_name@.nlm\n-SHLIB_NAME = @shlib_dir@@shlib_so_name@.nlm\n+SHLIB_NAME = @shlib_base_name@.nlm\n SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@\n SHLIB_DEF = $(srcdir)/config/i386/netware-libgcc.def\n SHLIB_MAP = $(srcdir)/config/i386/netware-libgcc.exp"}, {"sha": "b28514f0c39b75bc9abc7a111bdc8a7c787cdeaa", "filename": "gcc/config/mips/t-slibgcc-irix", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Fmips%2Ft-slibgcc-irix", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Fmips%2Ft-slibgcc-irix", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-slibgcc-irix?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -4,7 +4,7 @@ SHLIB_EXT = .so\n SHLIB_SOLINK = @shlib_base_name@.so\n SHLIB_SOVERSION = 1\n SHLIB_SONAME = @shlib_so_name@.so.$(SHLIB_SOVERSION)\n-SHLIB_NAME = @shlib_dir@@shlib_so_name@.so.$(SHLIB_SOVERSION)\n+SHLIB_NAME = @shlib_base_name@.so.$(SHLIB_SOVERSION)\n SHLIB_MAP = @shlib_map_file@\n SHLIB_OBJS = @shlib_objs@\n SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@"}, {"sha": "7ba247a6afa6d2b9de73b8edf7470bb444878d02", "filename": "gcc/config/t-libunwind-elf", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-libunwind-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-libunwind-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-libunwind-elf?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -6,7 +6,7 @@ LIBUNWINDDEP = unwind.inc unwind-dw2-fde.h unwind-dw2-fde.c\n \n SHLIBUNWIND_SOVERSION = 7\n SHLIBUNWIND_SONAME = @shlib_so_name@.so.$(SHLIBUNWIND_SOVERSION)\n-SHLIBUNWIND_NAME = @shlib_dir@@shlib_so_name@.so.$(SHLIBUNWIND_SOVERSION)\n+SHLIBUNWIND_NAME = @shlib_base_name@.so.$(SHLIBUNWIND_SOVERSION)\n \n SHLIBUNWIND_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared \\\n \t-nodefaultlibs -Wl,-h,$(SHLIBUNWIND_SONAME) \\"}, {"sha": "865f16fae7723385572d17bbf493c49432347390", "filename": "gcc/config/t-slibgcc-darwin", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-slibgcc-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-slibgcc-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-darwin?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -5,7 +5,7 @@ SHLIB_VERSTRING = -compatibility_version $(SHLIB_MINOR) -current_version $(SHLIB\n SHLIB_EXT = .dylib\n SHLIB_SOLINK = @shlib_base_name@.dylib\n SHLIB_SONAME = @shlib_so_name@.$(SHLIB_MINOR).$(SHLIB_REVISION).dylib\n-SHLIB_NAME = @shlib_dir@@shlib_so_name@.$(SHLIB_MINOR).$(SHLIB_REVISION).dylib\n+SHLIB_NAME = @shlib_base_name@.$(SHLIB_MINOR).$(SHLIB_REVISION).dylib\n SHLIB_MAP = @shlib_map_file@\n SHLIB_OBJS = @shlib_objs@\n SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@"}, {"sha": "bf03277e0eb721cd003e18c78d4f357a0b11fb10", "filename": "gcc/config/t-slibgcc-elf-ver", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-elf-ver?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -5,7 +5,7 @@ SHLIB_EXT = .so\n SHLIB_SOLINK = @shlib_base_name@.so\n SHLIB_SOVERSION = 1\n SHLIB_SONAME = @shlib_so_name@.so.$(SHLIB_SOVERSION)\n-SHLIB_NAME = @shlib_dir@@shlib_so_name@.so.$(SHLIB_SOVERSION)\n+SHLIB_NAME = @shlib_base_name@.so.$(SHLIB_SOVERSION)\n SHLIB_MAP = @shlib_map_file@\n SHLIB_OBJS = @shlib_objs@\n SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@"}, {"sha": "9a81af9ceb718a090dfbb0fa95a198e82d8ed251", "filename": "gcc/config/t-slibgcc-sld", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-slibgcc-sld", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fconfig%2Ft-slibgcc-sld", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-sld?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -3,7 +3,7 @@\n SHLIB_EXT = .so\n SHLIB_SOLINK = @shlib_base_name@.so\n SHLIB_SONAME = @shlib_so_name@.so.1\n-SHLIB_NAME = @shlib_dir@@shlib_so_name@.so.1\n+SHLIB_NAME = @shlib_base_name@.so.1\n SHLIB_MAP = @shlib_map_file@\n SHLIB_OBJS = @shlib_objs@\n SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@\n@@ -12,12 +12,12 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-Wl,-h,$(SHLIB_SONAME) -Wl,-z,text -Wl,-z,defs \\\n \t-Wl,-M,$(SHLIB_MAP) -o $(SHLIB_NAME).tmp \\\n \t@multilib_flags@ $(SHLIB_OBJS) -lc && \\\n-\trm -f @shlib_dir@$(SHLIB_SOLINK) && \\\n+\trm -f $(SHLIB_SOLINK) && \\\n \tif [ -f $(SHLIB_NAME) ]; then \\\n \t  mv -f $(SHLIB_NAME) $(SHLIB_NAME).`basename $(STAGE_PREFIX)`; \\\n \telse true; fi && \\\n \tmv $(SHLIB_NAME).tmp $(SHLIB_NAME) && \\\n-\t$(LN_S) $(SHLIB_SONAME) @shlib_dir@$(SHLIB_SOLINK)\n+\t$(LN_S) $(SHLIB_SONAME) $(SHLIB_SOLINK)\n # $(slibdir) double quoted to protect it from expansion while building\n # libgcc.mk.  We want this delayed until actual install time.\n SHLIB_INSTALL = \\"}, {"sha": "9729f2b41d10891025e7dcef77fd22c70cbec949", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 6, "deletions": 12, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d12c5a4ce59517150a10fecf787bc16fd6a2d96a/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=d12c5a4ce59517150a10fecf787bc16fd6a2d96a", "patch": "@@ -173,21 +173,21 @@ for ml in $MULTILIBS; do\n     if [ -z \"$SHLIB_MULTILIB\" ]; then\n       if [ \"$dir\" = . ]; then\n \tlibgcc_eh_a=$dir/libgcc_eh.a\n-\tlibgcc_s_so_base=$dir/libgcc_s\n+\tlibgcc_s_so_base=libgcc_s\n \tlibgcc_s_so=${libgcc_s_so_base}${SHLIB_EXT}\n \tlibgcc_s_soname=libgcc_s\n \tif [ \"$LIBUNWIND\" ]; then\n-\t  libunwind_so_base=$dir/libunwind\n+\t  libunwind_so_base=libunwind\n \t  libunwind_so=${libunwind_so_base}${SHLIB_EXT}\n \t  libunwind_soname=libunwind\n \tfi\n       else\n \tlibgcc_eh_a=$dir/libgcc_eh.a\n-\tlibgcc_s_so_base=$dir/libgcc_s_${suffix}\n+\tlibgcc_s_so_base=libgcc_s_${suffix}\n \tlibgcc_s_so=${libgcc_s_so_base}${SHLIB_EXT}\n \tlibgcc_s_soname=libgcc_s_${suffix}\n \tif [ \"$LIBUNWIND\" ]; then\n-\t  libunwind_so_base=$dir/libunwind_${suffix}\n+\t  libunwind_so_base=libunwind_${suffix}\n \t  libunwind_so=${libunwind_so_base}${SHLIB_EXT}\n \tfi\n       fi\n@@ -215,11 +215,11 @@ for ml in $MULTILIBS; do\n \n     elif [ \"$SHLIB_MULTILIB\" = \"$dir\" ]; then\n       libgcc_eh_a=$dir/libgcc_eh.a\n-      libgcc_s_so_base=$dir/libgcc_s\n+      libgcc_s_so_base=libgcc_s\n       libgcc_s_so=${libgcc_s_so_base}${SHLIB_EXT}\n       libgcc_s_soname=libgcc_s\n       if [ \"$LIBUNWIND\" ]; then\n-\tlibunwind_so_base=$dir/libunwind\n+\tlibunwind_so_base=libunwind\n \tlibunwind_so=${libunwind_so_base}${SHLIB_EXT}\n \tlibunwind_soname=libunwind\n       fi\n@@ -774,7 +774,6 @@ EOF\n \t       -e \"s%@shlib_base_name@%$libgcc_s_so_base%g\" \\\n \t       -e \"s%@shlib_so_name@%$libgcc_s_soname%g\" \\\n \t       -e \"s%@shlib_map_file@%$mapfile%g\" \\\n-\t       -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n \t       -e \"s%@shlib_slibdir_qual@%$shlib_dir_qual%g\"\n     echo \"all: $libgcc_s_so\"\n   fi\n@@ -788,7 +787,6 @@ EOF\n \t\t -e \"s%@shlib_objs@%\\$(objects)%g\" \\\n \t\t -e \"s%@shlib_base_name@%$libunwind_so_base%g\" \\\n \t\t -e \"s%@shlib_so_name@%$libunwind_soname%g\" \\\n-\t\t -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n \t\t -e \"s%@shlib_slibdir_qual@%$shlib_dir_qual%g\"\n     echo \"all: $libunwind_so\"\n   fi\n@@ -870,13 +868,11 @@ for ml in $MULTILIBS; do\n       echo \"\t$SHLIB_INSTALL\" \\\n \t| sed -e \"s%@shlib_base_name@%$shlib_base_name%g\" \\\n \t      -e \"s%@shlib_so_name@%$shlib_so_name%g\" \\\n-\t      -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n \t      -e \"s%@shlib_slibdir_qual@%$shlib_slibdir_qual%g\"\n       if [ \"$LIBUNWIND\" ]; then\n \techo \"\t$SHLIBUNWIND_INSTALL\" \\\n \t   | sed -e \"s%@shlib_base_name@%$shlibunwind_base_name%g\" \\\n \t\t -e \"s%@shlib_so_name@%$shlibunwind_so_name%g\" \\\n-\t\t -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n \t\t -e \"s%@shlib_slibdir_qual@%$shlib_slibdir_qual%g\"\n \tlibunwinddir='$(DESTDIR)$(slibdir)$(shlib_slibdir_qual)/$(shlib_dir)'\n \techo '\t$(INSTALL_DATA)' ${dir}/libunwind.a ${libunwinddir}/\n@@ -887,13 +883,11 @@ for ml in $MULTILIBS; do\n       echo \"\t$SHLIB_INSTALL\" \\\n \t| sed -e \"s%@shlib_base_name@%$shlib_base_name%g\" \\\n \t      -e \"s%@shlib_so_name@%$shlib_base_name%g\" \\\n-\t      -e \"s%@shlib_dir@%%g\" \\\n \t      -e \"s%@shlib_slibdir_qual@%%g\"\n       if [ \"$LIBUNWIND\" ]; then\n \techo \"\t$SHLIBUNWIND_INSTALL\" \\\n \t   | sed -e \"s%@shlib_base_name@%$shlibunwind_base_name%g\" \\\n \t\t -e \"s%@shlib_so_name@%$shlibunwind_base_name%g\" \\\n-\t\t -e \"s%@shlib_dir@%%g\" \\\n \t\t -e \"s%@shlib_slibdir_qual@%%g\"\n \tlibunwinddir='$(DESTDIR)$(slibdir)'\n \techo '\t$(INSTALL_DATA)' ${dir}/libunwind.a ${libunwinddir}/"}]}