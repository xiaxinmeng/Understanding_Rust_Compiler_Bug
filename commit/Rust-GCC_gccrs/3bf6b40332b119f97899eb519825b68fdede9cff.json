{"sha": "3bf6b40332b119f97899eb519825b68fdede9cff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2JmNmI0MDMzMmIxMTlmOTc4OTllYjUxOTgyNWI2OGZkZWRlOWNmZg==", "commit": {"author": {"name": "Jack Howarth", "email": "howarth@bromo.med.uc.edu", "date": "2010-02-15T23:52:53Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-02-15T23:52:53Z"}, "message": "re PR target/42854 (FAIL: gcc.dg/darwin-weakimport-[13].c scan-assembler-not *)\n\n\tPR target/42854\n\t* config/darwin.h (ASM_WEAKEN_DECL): Don't check weak attribute\n\tif weak_import attribute is present.\n\t* config/darwin.c (machopic_select_section): Likewise.\n\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r156786", "tree": {"sha": "fff12ed514e5dae13576d677404f9e7f3b18f3bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fff12ed514e5dae13576d677404f9e7f3b18f3bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3bf6b40332b119f97899eb519825b68fdede9cff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bf6b40332b119f97899eb519825b68fdede9cff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bf6b40332b119f97899eb519825b68fdede9cff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bf6b40332b119f97899eb519825b68fdede9cff/comments", "author": null, "committer": null, "parents": [{"sha": "6dbe8a32689db1c38aa106d678754f069bccd682", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dbe8a32689db1c38aa106d678754f069bccd682", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6dbe8a32689db1c38aa106d678754f069bccd682"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "9f65cdde1fb7ab2273e15906153bea6d503f7687", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bf6b40332b119f97899eb519825b68fdede9cff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bf6b40332b119f97899eb519825b68fdede9cff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3bf6b40332b119f97899eb519825b68fdede9cff", "patch": "@@ -1,3 +1,11 @@\n+2010-02-16  Jack Howarth <howarth@bromo.med.uc.edu>\n+            Jakub Jelinek <jakub@redhat.com>\n+\n+\tPR target/42854\n+\t* config/darwin.h (ASM_WEAKEN_DECL): Don't check weak attribute\n+\tif weak_import attribute is present.\n+\t* config/darwin.c (machopic_select_section): Likewise.\n+\n 2010-02-15  Joern Rennecke  <joern.rennecke@embecosm.com>\n \n \t* doc/tm.texi (TARGET_VECTORIZE_BUILTIN_VECTORIZATION_COST): Document."}, {"sha": "3ca507cc0a3724f2e6ac124b2bd585a678868b66", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bf6b40332b119f97899eb519825b68fdede9cff/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bf6b40332b119f97899eb519825b68fdede9cff/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=3bf6b40332b119f97899eb519825b68fdede9cff", "patch": "@@ -1177,9 +1177,8 @@ machopic_select_section (tree decl,\n {\n   bool weak = (DECL_P (decl)\n \t       && DECL_WEAK (decl)\n-\t       && (lookup_attribute (\"weak\", DECL_ATTRIBUTES (decl))\n-\t\t   || ! lookup_attribute (\"weak_import\",\n-\t\t\t\t\t  DECL_ATTRIBUTES (decl))));\n+\t       && !lookup_attribute (\"weak_import\",\n+\t       DECL_ATTRIBUTES (decl)));\n   section *base_section;\n \n   switch (categorize_decl_for_section (decl, reloc))"}, {"sha": "763040bfe4c6dcbddfc1092d4a85d1f65417a75c", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bf6b40332b119f97899eb519825b68fdede9cff/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bf6b40332b119f97899eb519825b68fdede9cff/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=3bf6b40332b119f97899eb519825b68fdede9cff", "patch": "@@ -502,8 +502,7 @@ extern GTY(()) int darwin_ms_struct;\n       targetm.asm_out.globalize_label (FILE, NAME);\t\t\t\\\n     if (DECL_EXTERNAL (DECL))\t\t\t\t\t\t\\\n       fputs (\"\\t.weak_reference \", FILE);\t\t\t\t\\\n-    else if (! lookup_attribute (\"weak\", DECL_ATTRIBUTES (DECL))\t\\\n-\t&& lookup_attribute (\"weak_import\", DECL_ATTRIBUTES (DECL)))\t\\\n+    else if (lookup_attribute (\"weak_import\", DECL_ATTRIBUTES (DECL)))\t\\\n       break;\t\t\t\t\t\t\t\t\\\n     else if (TREE_PUBLIC (DECL))\t\t\t\t\t\\\n       fputs (\"\\t.weak_definition \", FILE);\t\t\t\t\\"}]}