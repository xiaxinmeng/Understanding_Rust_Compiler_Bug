{"sha": "e097f8873d8389995b81b2794f7ec718064fb8b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTA5N2Y4ODczZDgzODk5OTViODFiMjc5NGY3ZWM3MTgwNjRmYjhiNg==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2006-02-18T00:35:13Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2006-02-18T00:35:13Z"}, "message": "ffi.c (ffi_closure_helper_SYSV): Remove unused variable and cast integer to void * if needed.\n\n\t* src/sh/ffi.c (ffi_closure_helper_SYSV): Remove unused variable\n\tand cast integer to void * if needed.  Update the pointer to\n\tthe FP register saved area correctly.\n\nFrom-SVN: r111225", "tree": {"sha": "979210fcf1532855829f967a4fdd19327886843b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/979210fcf1532855829f967a4fdd19327886843b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e097f8873d8389995b81b2794f7ec718064fb8b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e097f8873d8389995b81b2794f7ec718064fb8b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e097f8873d8389995b81b2794f7ec718064fb8b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e097f8873d8389995b81b2794f7ec718064fb8b6/comments", "author": null, "committer": null, "parents": [{"sha": "a30425018e7567900b7f51354ae994f7f5b47335", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a30425018e7567900b7f51354ae994f7f5b47335", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a30425018e7567900b7f51354ae994f7f5b47335"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "2ed033e89db914c1971e4e37634332345309aebe", "filename": "libffi/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e097f8873d8389995b81b2794f7ec718064fb8b6/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e097f8873d8389995b81b2794f7ec718064fb8b6/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=e097f8873d8389995b81b2794f7ec718064fb8b6", "patch": "@@ -1,3 +1,9 @@\n+2006-02-18  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\t* src/sh/ffi.c (ffi_closure_helper_SYSV): Remove unused variable\n+\tand cast integer to void * if needed.  Update the pointer to\n+\tthe FP register saved area correctly.\n+\t\n 2006-02-17  Andreas Tobler  <a.tobler@schweiz.ch>\n \n \t* testsuite/libffi.call/nested_struct6.c: XFAIL this test until PR25630"}, {"sha": "2bcb98196a4ab629687fd5006163d5d85f635bf9", "filename": "libffi/src/sh/ffi.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e097f8873d8389995b81b2794f7ec718064fb8b6/libffi%2Fsrc%2Fsh%2Fffi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e097f8873d8389995b81b2794f7ec718064fb8b6/libffi%2Fsrc%2Fsh%2Fffi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fsh%2Fffi.c?ref=e097f8873d8389995b81b2794f7ec718064fb8b6", "patch": "@@ -1,5 +1,5 @@\n /* -----------------------------------------------------------------------\n-   ffi.c - Copyright (c) 2002, 2003, 2004, 2005 Kaz Kojima\n+   ffi.c - Copyright (c) 2002, 2003, 2004, 2005, 2006 Kaz Kojima\n    \n    SuperH Foreign Function Interface \n \n@@ -535,7 +535,6 @@ ffi_closure_helper_SYSV (ffi_closure *closure, void *rvalue,\n   int freg = 0;\n #endif\n   ffi_cif *cif; \n-  double temp; \n \n   cif = closure->cif;\n   avalue = alloca(cif->nargs * sizeof(void *));\n@@ -544,7 +543,7 @@ ffi_closure_helper_SYSV (ffi_closure *closure, void *rvalue,\n      returns the data directly to the caller.  */\n   if (cif->rtype->type == FFI_TYPE_STRUCT && STRUCT_VALUE_ADDRESS_WITH_ARG)\n     {\n-      rvalue = *pgr++;\n+      rvalue = (void *) *pgr++;\n       ireg = 1;\n     }\n   else\n@@ -611,6 +610,8 @@ ffi_closure_helper_SYSV (ffi_closure *closure, void *rvalue,\n \t{\n \t  if (freg + 1 >= NFREGARG)\n \t    continue;\n+\t  if (freg & 1)\n+\t    pfr++;\n \t  freg = (freg + 1) & ~1;\n \t  freg += 2;\n \t  avalue[i] = pfr;"}]}