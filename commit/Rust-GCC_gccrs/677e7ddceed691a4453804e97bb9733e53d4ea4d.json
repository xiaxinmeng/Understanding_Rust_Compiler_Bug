{"sha": "677e7ddceed691a4453804e97bb9733e53d4ea4d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njc3ZTdkZGNlZWQ2OTFhNDQ1MzgwNGU5N2JiOTczM2U1M2Q0ZWE0ZA==", "commit": {"author": {"name": "Loren J. Rittle", "email": "ljrittle@acm.org", "date": "2004-01-07T17:40:45Z"}, "committer": {"name": "Loren J. Rittle", "email": "ljrittle@gcc.gnu.org", "date": "2004-01-07T17:40:45Z"}, "message": "(re-open) PR libstdc++/12658\n\n\t(re-open) PR libstdc++/12658\n\t* src/locale_init.cc (locale::locale): Remove ill-scoped mutex.\n\t(locale::global): Likewise.\n\nFrom-SVN: r75509", "tree": {"sha": "ac99b727fda2c48a1c2fd0c89c051048b349e8c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac99b727fda2c48a1c2fd0c89c051048b349e8c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/677e7ddceed691a4453804e97bb9733e53d4ea4d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/677e7ddceed691a4453804e97bb9733e53d4ea4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/677e7ddceed691a4453804e97bb9733e53d4ea4d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/677e7ddceed691a4453804e97bb9733e53d4ea4d/comments", "author": null, "committer": null, "parents": [{"sha": "d8f5bd5016ed9acb54fe3680c7a0c82e3f6c5fc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8f5bd5016ed9acb54fe3680c7a0c82e3f6c5fc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8f5bd5016ed9acb54fe3680c7a0c82e3f6c5fc1"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "d98e25b5ef614605504dbd37284f9dbd8cacd5b9", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/677e7ddceed691a4453804e97bb9733e53d4ea4d/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/677e7ddceed691a4453804e97bb9733e53d4ea4d/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=677e7ddceed691a4453804e97bb9733e53d4ea4d", "patch": "@@ -1,3 +1,9 @@\n+2004-01-07  Loren J. Rittle  <ljrittle@acm.org>\n+\n+\t(re-open) PR libstdc++/12658\n+\t* src/locale_init.cc (locale::locale): Remove ill-scoped mutex.\n+\t(locale::global): Likewise.\n+\n 2004-01-07  Paolo Carlini  <pcarlini@suse.de>\n \n \t* testsuite/27_io/basic_istream/extractors_other/char/9318-in.cc:"}, {"sha": "2eb45c85e4c502127a767b8d4b1947c29af60f7e", "filename": "libstdc++-v3/src/locale_init.cc", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/677e7ddceed691a4453804e97bb9733e53d4ea4d/libstdc%2B%2B-v3%2Fsrc%2Flocale_init.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/677e7ddceed691a4453804e97bb9733e53d4ea4d/libstdc%2B%2B-v3%2Fsrc%2Flocale_init.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Flocale_init.cc?ref=677e7ddceed691a4453804e97bb9733e53d4ea4d", "patch": "@@ -97,26 +97,20 @@ namespace std\n   locale::locale() throw()\n   { \n     _S_initialize(); \n-    __glibcxx_mutex_define_initialized(lock);\n-    __glibcxx_mutex_lock(lock);\n     _S_global->_M_add_reference();\n     _M_impl = _S_global;\n-    __glibcxx_mutex_unlock(lock);\n   }\n \n   locale\n   locale::global(const locale& __other)\n   {\n     _S_initialize();\n-    __glibcxx_mutex_define_initialized(lock);\n-    __glibcxx_mutex_lock(lock);\n     _Impl* __old = _S_global;\n     __other._M_impl->_M_add_reference();\n     _S_global = __other._M_impl; \n     if (_S_global->_M_check_same_name() \n \t&& (std::strcmp(_S_global->_M_names[0], \"*\") != 0))\n       setlocale(LC_ALL, __other.name().c_str());\n-    __glibcxx_mutex_unlock(lock);\n \n     // Reference count sanity check: one reference removed for the\n     // subsition of __other locale, one added by return-by-value. Net"}]}