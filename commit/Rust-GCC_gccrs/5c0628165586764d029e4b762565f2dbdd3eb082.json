{"sha": "5c0628165586764d029e4b762565f2dbdd3eb082", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWMwNjI4MTY1NTg2NzY0ZDAyOWU0Yjc2MjU2NWYyZGJkZDNlYjA4Mg==", "commit": {"author": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "1992-08-19T06:17:27Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "1992-08-19T06:17:27Z"}, "message": "expr.c (expand_expr): The first expansion of a TARGET_EXPR is marked by DECL_RTL (slot) being filled...\n\n        * expr.c (expand_expr): The first expansion of a TARGET_EXPR\n        is marked by DECL_RTL (slot) being filled in AND TREE_OPERAND\n        (exp, 1) being wiped-out with a NULL_TREE, not just the\n        DECL_RTL (slot) being filled in.\n\nFrom-SVN: r1893", "tree": {"sha": "1c1692dadd2feef0d77f45f1a35938678d9ae9ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c1692dadd2feef0d77f45f1a35938678d9ae9ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c0628165586764d029e4b762565f2dbdd3eb082", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c0628165586764d029e4b762565f2dbdd3eb082", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c0628165586764d029e4b762565f2dbdd3eb082", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c0628165586764d029e4b762565f2dbdd3eb082/comments", "author": null, "committer": null, "parents": [{"sha": "741be22fac7f944131ef30b42e55089128c2065b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/741be22fac7f944131ef30b42e55089128c2065b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/741be22fac7f944131ef30b42e55089128c2065b"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "315474d835f17bb0347cd4cddb07096feca867a7", "filename": "gcc/expr.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c0628165586764d029e4b762565f2dbdd3eb082/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c0628165586764d029e4b762565f2dbdd3eb082/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=5c0628165586764d029e4b762565f2dbdd3eb082", "patch": "@@ -4634,6 +4634,7 @@ expand_expr (exp, target, tmode, modifier)\n \t   or copied into our original target.  */\n \n \ttree slot = TREE_OPERAND (exp, 0);\n+\ttree exp1;\n \n \tif (TREE_CODE (slot) != VAR_DECL)\n \t  abort ();\n@@ -4643,9 +4644,10 @@ expand_expr (exp, target, tmode, modifier)\n \t    if (DECL_RTL (slot) != 0)\n \t      {\n \t\ttarget = DECL_RTL (slot);\n-\t\t/* We have already expanded the slot, so don't do\n+\t\t/* If we have already expanded the slot, so don't do\n \t\t   it again.  (mrs)  */\n-\t\treturn target;\n+\t\tif (TREE_OPERAND (exp, 1) == NULL_TREE)\n+\t\t  return target;\n \t      }\n \t    else\n \t      {\n@@ -4689,7 +4691,11 @@ expand_expr (exp, target, tmode, modifier)\n \t    DECL_RTL (slot) = target;\n \t  }\n \n-\treturn expand_expr (TREE_OPERAND (exp, 1), target, tmode, modifier);\n+\texp1 = TREE_OPERAND (exp, 1);\n+\t/* Mark it as expanded.  */\n+\tTREE_OPERAND (exp, 1) = NULL_TREE;\n+\n+\treturn expand_expr (exp1, target, tmode, modifier);\n       }\n \n     case INIT_EXPR:"}]}