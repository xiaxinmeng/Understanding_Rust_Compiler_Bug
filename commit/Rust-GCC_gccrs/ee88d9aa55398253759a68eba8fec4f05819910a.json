{"sha": "ee88d9aa55398253759a68eba8fec4f05819910a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWU4OGQ5YWE1NTM5ODI1Mzc1OWE2OGViYThmZWM0ZjA1ODE5OTEwYQ==", "commit": {"author": {"name": "Maxim Kuvyrkov", "email": "maxim@codesourcery.com", "date": "2009-06-01T14:45:18Z"}, "committer": {"name": "Maxim Kuvyrkov", "email": "mkuvyrkov@gcc.gnu.org", "date": "2009-06-01T14:45:18Z"}, "message": "Revert due to PR40320:\n\n\t\n\t2009-06-01  Maxim Kuvyrkov  <maxim@codesourcery.com>\n\t* calls.c (emit_library_call_value_1): Don't force_operand for move\n\tand push insns.\n\nFrom-SVN: r148046", "tree": {"sha": "2159c6df6b397b405dbe18edb1e54b9ddb038a45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2159c6df6b397b405dbe18edb1e54b9ddb038a45"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee88d9aa55398253759a68eba8fec4f05819910a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee88d9aa55398253759a68eba8fec4f05819910a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee88d9aa55398253759a68eba8fec4f05819910a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee88d9aa55398253759a68eba8fec4f05819910a/comments", "author": null, "committer": null, "parents": [{"sha": "324c9b0242c7ea8604f8aa694d75a2e4ba075636", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/324c9b0242c7ea8604f8aa694d75a2e4ba075636", "html_url": "https://github.com/Rust-GCC/gccrs/commit/324c9b0242c7ea8604f8aa694d75a2e4ba075636"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "82b15ed63e259abd868d2b3ec3f92fbb20c877b5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee88d9aa55398253759a68eba8fec4f05819910a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee88d9aa55398253759a68eba8fec4f05819910a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee88d9aa55398253759a68eba8fec4f05819910a", "patch": "@@ -1,3 +1,11 @@\n+2009-06-01  Maxim Kuvyrkov  <maxim@codesourcery.com>\n+\n+\tRevert due to PR40320:\n+\t\n+\t2009-06-01  Maxim Kuvyrkov  <maxim@codesourcery.com>\n+\t* calls.c (emit_library_call_value_1): Don't force_operand for move\n+\tand push insns.\n+\n 2009-06-01  Olivier Hainque  <hainque@adacore.com>\n             Eric Botcazou  <botcazou@adacore.com>\n "}, {"sha": "c10b0cd3abadb2f5b532997633031d53f5be3151", "filename": "gcc/calls.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee88d9aa55398253759a68eba8fec4f05819910a/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee88d9aa55398253759a68eba8fec4f05819910a/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=ee88d9aa55398253759a68eba8fec4f05819910a", "patch": "@@ -3412,6 +3412,11 @@ emit_library_call_value_1 (int retval, rtx orgfun, rtx value,\n \n       nargs++;\n \n+      /* Make sure it is a reasonable operand for a move or push insn.  */\n+      if (!REG_P (addr) && !MEM_P (addr)\n+\t  && ! (CONSTANT_P (addr) && LEGITIMATE_CONSTANT_P (addr)))\n+\taddr = force_operand (addr, NULL_RTX);\n+\n       argvec[count].value = addr;\n       argvec[count].mode = Pmode;\n       argvec[count].partial = 0;\n@@ -3447,6 +3452,11 @@ emit_library_call_value_1 (int retval, rtx orgfun, rtx value,\n       gcc_assert (mode != BLKmode\n \t\t  && (GET_MODE (val) == mode || GET_MODE (val) == VOIDmode));\n \n+      /* Make sure it is a reasonable operand for a move or push insn.  */\n+      if (!REG_P (val) && !MEM_P (val)\n+\t  && ! (CONSTANT_P (val) && LEGITIMATE_CONSTANT_P (val)))\n+\tval = force_operand (val, NULL_RTX);\n+\n       if (pass_by_reference (&args_so_far, mode, NULL_TREE, 1))\n \t{\n \t  rtx slot;"}]}