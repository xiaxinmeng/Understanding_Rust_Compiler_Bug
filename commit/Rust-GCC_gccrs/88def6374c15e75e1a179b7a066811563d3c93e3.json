{"sha": "88def6374c15e75e1a179b7a066811563d3c93e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODhkZWY2Mzc0YzE1ZTc1ZTFhMTc5YjdhMDY2ODExNTYzZDNjOTNlMw==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2014-02-25T20:34:44Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2014-02-25T20:34:44Z"}, "message": "re PR rtl-optimization/60317 (find_hard_regno_for compile time hog in libvpx)\n\n2014-02-25  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/60317\n\t* params.def (PARAM_LRA_MAX_CONSIDERED_RELOAD_PSEUDOS): New.\n\t* params.h (LRA_MAX_CONSIDERED_RELOAD_PSEUDOS): New.\n\t* lra-assigns.c: Include params.h.\n\t(spill_for): Use LRA_MAX_CONSIDERED_RELOAD_PSEUDOS as guard for\n\tother reload pseudos considerations.\n\nFrom-SVN: r208155", "tree": {"sha": "71b4ad742f98532f60c9692fb44c11d65b6b35f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/71b4ad742f98532f60c9692fb44c11d65b6b35f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88def6374c15e75e1a179b7a066811563d3c93e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88def6374c15e75e1a179b7a066811563d3c93e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88def6374c15e75e1a179b7a066811563d3c93e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88def6374c15e75e1a179b7a066811563d3c93e3/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6e6eaecc6ab7c461f13e7a76fa3ab85b721242e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e6eaecc6ab7c461f13e7a76fa3ab85b721242e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e6eaecc6ab7c461f13e7a76fa3ab85b721242e8"}], "stats": {"total": 35, "additions": 27, "deletions": 8}, "files": [{"sha": "616d8ec3c93ac2178b8960b99cd5600843c7c16d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=88def6374c15e75e1a179b7a066811563d3c93e3", "patch": "@@ -1,3 +1,12 @@\n+2014-02-25  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/60317\n+\t* params.def (PARAM_LRA_MAX_CONSIDERED_RELOAD_PSEUDOS): New.\n+\t* params.h (LRA_MAX_CONSIDERED_RELOAD_PSEUDOS): New.\n+\t* lra-assigns.c: Include params.h.\n+\t(spill_for): Use LRA_MAX_CONSIDERED_RELOAD_PSEUDOS as guard for\n+\tother reload pseudos considerations.\n+\n 2014-02-25  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \t* config/rs6000/vector.md (*vector_unordered<mode>): Change split"}, {"sha": "f94ebe62e89dd3e73bfefe327b7b705d340a3138", "filename": "gcc/lra-assigns.c", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2Flra-assigns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2Flra-assigns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-assigns.c?ref=88def6374c15e75e1a179b7a066811563d3c93e3", "patch": "@@ -94,6 +94,7 @@ along with GCC; see the file COPYING3.\tIf not see\n #include \"df.h\"\n #include \"ira.h\"\n #include \"sparseset.h\"\n+#include \"params.h\"\n #include \"lra-int.h\"\n \n /* Array containing corresponding values of function\n@@ -896,14 +897,16 @@ spill_for (int regno, bitmap spilled_pseudo_bitmap)\n \t    }\n \t}\n       n = 0;\n-      EXECUTE_IF_SET_IN_SPARSESET (live_range_reload_inheritance_pseudos,\n-\t\t\t\t   reload_regno)\n-\tif ((int) reload_regno != regno\n-\t    && (ira_reg_classes_intersect_p\n-\t\t[rclass][regno_allocno_class_array[reload_regno]])\n-\t    && live_pseudos_reg_renumber[reload_regno] < 0\n-\t    && find_hard_regno_for (reload_regno, &cost, -1) < 0)\n-\t  sorted_reload_pseudos[n++] = reload_regno;\n+      if (sparseset_cardinality (live_range_reload_inheritance_pseudos)\n+\t  <= LRA_MAX_CONSIDERED_RELOAD_PSEUDOS)\n+\tEXECUTE_IF_SET_IN_SPARSESET (live_range_reload_inheritance_pseudos,\n+\t\t\t\t     reload_regno)\n+\t  if ((int) reload_regno != regno\n+\t      && (ira_reg_classes_intersect_p\n+\t\t  [rclass][regno_allocno_class_array[reload_regno]])\n+\t      && live_pseudos_reg_renumber[reload_regno] < 0\n+\t      && find_hard_regno_for (reload_regno, &cost, -1) < 0)\n+\t    sorted_reload_pseudos[n++] = reload_regno;\n       EXECUTE_IF_SET_IN_BITMAP (&spill_pseudos_bitmap, 0, spill_regno, bi)\n \t{\n \t  update_lives (spill_regno, true);"}, {"sha": "dd2e2cd1a9905dd2aa34e29d4be29c816550fe5d", "filename": "gcc/params.def", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2Fparams.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2Fparams.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fparams.def?ref=88def6374c15e75e1a179b7a066811563d3c93e3", "patch": "@@ -821,6 +821,11 @@ DEFPARAM (PARAM_IRA_LOOP_RESERVED_REGS,\n \t  \"The number of registers in each class kept unused by loop invariant motion\",\n \t  2, 0, 0)\n \n+DEFPARAM (PARAM_LRA_MAX_CONSIDERED_RELOAD_PSEUDOS,\n+\t  \"lra-max-considered-reload-pseudos\",\n+\t  \"The max number of reload pseudos which are considered during spilling a non-reload pseudo\",\n+\t  500, 0, 0)\n+\n /* Switch initialization conversion will refuse to create arrays that are\n    bigger than this parameter times the number of switch branches.  */\n "}, {"sha": "0d6daa205c0b74de41f22fc49ff7c2aaa54688ec", "filename": "gcc/params.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2Fparams.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88def6374c15e75e1a179b7a066811563d3c93e3/gcc%2Fparams.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fparams.h?ref=88def6374c15e75e1a179b7a066811563d3c93e3", "patch": "@@ -196,6 +196,8 @@ extern void init_param_values (int *params);\n   PARAM_VALUE (PARAM_IRA_MAX_CONFLICT_TABLE_SIZE)\n #define IRA_LOOP_RESERVED_REGS \\\n   PARAM_VALUE (PARAM_IRA_LOOP_RESERVED_REGS)\n+#define LRA_MAX_CONSIDERED_RELOAD_PSEUDOS \\\n+  PARAM_VALUE (PARAM_LRA_MAX_CONSIDERED_RELOAD_PSEUDOS)\n #define SWITCH_CONVERSION_BRANCH_RATIO \\\n   PARAM_VALUE (PARAM_SWITCH_CONVERSION_BRANCH_RATIO)\n #define LOOP_INVARIANT_MAX_BBS_IN_LOOP \\"}]}