{"sha": "32436219b6f789d1400d15e1da117d741033bf2e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI0MzYyMTliNmY3ODlkMTQwMGQxNWUxZGExMTdkNzQxMDMzYmYyZQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-25T17:33:21Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-25T17:33:21Z"}, "message": "(duplicate_decls): For builtins, create new function\ntype instead of trying to modify old one.\n\n(c_decode_option): Decode -Wreturn-type.\n\nFrom-SVN: r2794", "tree": {"sha": "59bfadcf80bb3f7ecbb9e9f4177389620ce7167d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59bfadcf80bb3f7ecbb9e9f4177389620ce7167d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32436219b6f789d1400d15e1da117d741033bf2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32436219b6f789d1400d15e1da117d741033bf2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32436219b6f789d1400d15e1da117d741033bf2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32436219b6f789d1400d15e1da117d741033bf2e/comments", "author": null, "committer": null, "parents": [{"sha": "8adfad0f10f5c5c96a174c3ffb196e9c6a0b31d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8adfad0f10f5c5c96a174c3ffb196e9c6a0b31d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8adfad0f10f5c5c96a174c3ffb196e9c6a0b31d3"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "7c7cab71d05cdc995a66ecc6a4d2c777d9b7c669", "filename": "gcc/c-decl.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32436219b6f789d1400d15e1da117d741033bf2e/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32436219b6f789d1400d15e1da117d741033bf2e/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=32436219b6f789d1400d15e1da117d741033bf2e", "patch": "@@ -1305,10 +1305,15 @@ duplicate_decls (newdecl, olddecl)\n \t  tree newreturntype = TREE_TYPE (TREE_TYPE (newdecl));\n           if (TYPE_MODE (oldreturntype) == TYPE_MODE (newreturntype))\n             {\n-              TREE_TYPE (TREE_TYPE (olddecl)) = newreturntype;\n-              types_match = comptypes (TREE_TYPE (newdecl), TREE_TYPE (olddecl));\n-\t      if (!types_match)\n-\t\tTREE_TYPE (TREE_TYPE (olddecl)) = oldreturntype;\n+\t      /* Function types may be shared, so we can't just modify\n+\t\t the return type of olddecl's function type.  */\n+\t      tree newtype\n+\t\t= build_function_type (newreturntype,\n+\t\t\t\t       TYPE_ARG_TYPES (TREE_TYPE (olddecl)));\n+\t      \n+              types_match = comptypes (TREE_TYPE (newdecl), newtype);\n+\t      if (types_match)\n+\t\tTREE_TYPE (olddecl) = newtype;\n \t    }\n \t}\n       if (!types_match)"}]}