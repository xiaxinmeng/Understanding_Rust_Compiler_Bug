{"sha": "2fd157813c4964033e156ccb7df8889cd2afee99", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmZkMTU3ODEzYzQ5NjQwMzNlMTU2Y2NiN2RmODg4OWNkMmFmZWU5OQ==", "commit": {"author": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2020-09-13T18:47:59Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2020-09-13T18:47:59Z"}, "message": "Improve costs for DImode shifts of interger constants.\n\n2020-09-13  Roger Sayle  <roger@nextmovesoftware.com>\n\ngcc/ChangeLog\n\t* config/pa/pa.c (hppa_rtx_costs) [ASHIFT, ASHIFTRT, LSHIFTRT]:\n\tProvide accurate costs for DImode shifts of integer constants.", "tree": {"sha": "dc630961840d3916fc66e1d8c05fca0c7e82b68d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc630961840d3916fc66e1d8c05fca0c7e82b68d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2fd157813c4964033e156ccb7df8889cd2afee99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fd157813c4964033e156ccb7df8889cd2afee99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fd157813c4964033e156ccb7df8889cd2afee99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fd157813c4964033e156ccb7df8889cd2afee99/comments", "author": null, "committer": null, "parents": [{"sha": "5de41c886207a3a0ff1f44ce0a5a644e9d9a17f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5de41c886207a3a0ff1f44ce0a5a644e9d9a17f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5de41c886207a3a0ff1f44ce0a5a644e9d9a17f8"}], "stats": {"total": 33, "additions": 21, "deletions": 12}, "files": [{"sha": "210e44f76601fb19f93f2773ad12a896eb3b1280", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 21, "deletions": 12, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fd157813c4964033e156ccb7df8889cd2afee99/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fd157813c4964033e156ccb7df8889cd2afee99/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=2fd157813c4964033e156ccb7df8889cd2afee99", "patch": "@@ -1630,13 +1630,16 @@ hppa_rtx_costs (rtx x, machine_mode mode, int outer_code,\n     case ASHIFT:\n       if (mode == DImode)\n \t{\n-\t  if (TARGET_64BIT)\n-\t    *total = COSTS_N_INSNS (3);\n-\t  else if (REG_P (XEXP (x, 0)) && CONST_INT_P (XEXP (x, 1)))\n+\t  if (REG_P (XEXP (x, 0)) && CONST_INT_P (XEXP (x, 1)))\n \t    {\n-\t      *total = COSTS_N_INSNS (2);\n+\t      if (TARGET_64BIT)\n+\t\t*total = COSTS_N_INSNS (1);\n+\t      else\n+\t\t*total = COSTS_N_INSNS (2);\n \t      return true;\n \t    }\n+\t  else if (TARGET_64BIT)\n+\t    *total = COSTS_N_INSNS (3);\n \t  else if (speed)\n \t    *total = COSTS_N_INSNS (13);\n \t  else\n@@ -1661,13 +1664,16 @@ hppa_rtx_costs (rtx x, machine_mode mode, int outer_code,\n     case ASHIFTRT:\n       if (mode == DImode)\n \t{\n-\t  if (TARGET_64BIT)\n-\t    *total = COSTS_N_INSNS (3);\n-\t  else if (REG_P (XEXP (x, 0)) && CONST_INT_P (XEXP (x, 1)))\n+\t  if (REG_P (XEXP (x, 0)) && CONST_INT_P (XEXP (x, 1)))\n \t    {\n-\t      *total = COSTS_N_INSNS (2);\n+\t      if (TARGET_64BIT)\n+\t\t*total = COSTS_N_INSNS (1);\n+\t      else\n+\t\t*total = COSTS_N_INSNS (2);\n \t      return true;\n \t    }\n+\t  else if (TARGET_64BIT)\n+\t    *total = COSTS_N_INSNS (3);\n \t  else if (speed)\n \t    *total = COSTS_N_INSNS (14);\n \t  else\n@@ -1692,13 +1698,16 @@ hppa_rtx_costs (rtx x, machine_mode mode, int outer_code,\n     case LSHIFTRT:\n       if (mode == DImode)\n \t{\n-\t  if (TARGET_64BIT)\n-\t    *total = COSTS_N_INSNS (2);\n-\t  else if (REG_P (XEXP (x, 0)) && CONST_INT_P (XEXP (x, 1)))\n+\t  if (REG_P (XEXP (x, 0)) && CONST_INT_P (XEXP (x, 1)))\n \t    {\n-\t      *total = COSTS_N_INSNS (2);\n+\t      if (TARGET_64BIT)\n+\t\t*total = COSTS_N_INSNS (1);\n+\t      else\n+\t\t*total = COSTS_N_INSNS (2);\n \t      return true;\n \t    }\n+\t  else if (TARGET_64BIT)\n+\t    *total = COSTS_N_INSNS (2);\n \t  else if (speed)\n \t    *total = COSTS_N_INSNS (12);\n \t  else"}]}