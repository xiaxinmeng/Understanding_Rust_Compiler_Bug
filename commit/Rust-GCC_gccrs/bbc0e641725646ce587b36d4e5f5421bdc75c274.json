{"sha": "bbc0e641725646ce587b36d4e5f5421bdc75c274", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmJjMGU2NDE3MjU2NDZjZTU4N2IzNmQ0ZTVmNTQyMWJkYzc1YzI3NA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-05-15T18:56:11Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-05-15T18:56:11Z"}, "message": "tree.h (BINFO_SIZE, [...]): New macros.\n\n\t* tree.h (BINFO_SIZE, TYPE_BINFO_SIZE): New macros.\n\t* stor-layout.c (layout_record): Set it.\n\t* toplev.c (rest_of_compilation): Don't defer nested functions.\n\nFrom-SVN: r19781", "tree": {"sha": "1e9ea8e3425f9eed96ace4ef5003802673438c69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e9ea8e3425f9eed96ace4ef5003802673438c69"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bbc0e641725646ce587b36d4e5f5421bdc75c274", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbc0e641725646ce587b36d4e5f5421bdc75c274", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bbc0e641725646ce587b36d4e5f5421bdc75c274", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbc0e641725646ce587b36d4e5f5421bdc75c274/comments", "author": null, "committer": null, "parents": [{"sha": "92834d7d83c3cf2e798407bad2435a3aa6c716e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92834d7d83c3cf2e798407bad2435a3aa6c716e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92834d7d83c3cf2e798407bad2435a3aa6c716e8"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "f4066258538bfe64012f49800ae13f72a29ba262", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bbc0e641725646ce587b36d4e5f5421bdc75c274", "patch": "@@ -1,3 +1,12 @@\n+Fri May 15 18:55:22 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* tree.h (BINFO_SIZE, TYPE_BINFO_SIZE): New macros.\n+\t* stor-layout.c (layout_record): Set it.\n+\n+Fri May 15 18:49:30 1998  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* toplev.c (rest_of_compilation): Don't defer nested functions.\n+\n Fri May 15 17:42:52 1998  Bob Manson  <manson@charmed.cygnus.com>\n \n \t* config/rs6000/rs6000.c (rs6000_stack_info): Align the stack bottom"}, {"sha": "c5c4d1cf7330dac4f9acfac3d224c34b236fd3f0", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=bbc0e641725646ce587b36d4e5f5421bdc75c274", "patch": "@@ -549,6 +549,11 @@ layout_record (rec)\n   TYPE_ALIGN (rec) = MAX (TYPE_ALIGN (rec), record_align);\n #endif\n \n+  /* Record the un-rounded size in the binfo node.  But first we check\n+     the size of TYPE_BINFO to make sure that BINFO_SIZE is available.  */\n+  if (TYPE_BINFO (rec) && TREE_VEC_LENGTH (TYPE_BINFO (rec)) >= 6)\n+    TYPE_BINFO_SIZE (rec) = TYPE_SIZE (rec);\n+\n #ifdef ROUND_TYPE_SIZE\n   TYPE_SIZE (rec) = ROUND_TYPE_SIZE (rec, TYPE_SIZE (rec), TYPE_ALIGN (rec));\n #else"}, {"sha": "107b1c4f1caebf8a6937d14787d61a3785b510f5", "filename": "gcc/toplev.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=bbc0e641725646ce587b36d4e5f5421bdc75c274", "patch": "@@ -3023,7 +3023,8 @@ rest_of_compilation (decl)\n \t for those functions that need to be output.  Also defer those\n \t functions that we are supposed to defer.  We cannot defer\n \t functions containing nested functions since the nested function\n-\t data is in our non-saved obstack.  */\n+\t data is in our non-saved obstack.  We cannot defer nested\n+\t functions for the same reason.  */\n \n       /* If this is a nested inline, remove ADDRESSOF now so we can\n \t finish compiling ourselves.  Otherwise, wait until EOF.\n@@ -3038,6 +3039,7 @@ rest_of_compilation (decl)\n \t}\n \n       if (! current_function_contains_functions\n+\t  && ! decl_function_context (decl)\n \t  && (DECL_DEFER_OUTPUT (decl)\n \t      || (DECL_INLINE (decl)\n \t\t  && ((! TREE_PUBLIC (decl) && ! TREE_ADDRESSABLE (decl)"}, {"sha": "9643f5dcaa62f9121a5102759be1326022c82aee", "filename": "gcc/tree.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc0e641725646ce587b36d4e5f5421bdc75c274/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=bbc0e641725646ce587b36d4e5f5421bdc75c274", "patch": "@@ -899,7 +899,8 @@ struct tree_type\n    class pointer\" for the given inheritance.  */\n #define BINFO_VPTR_FIELD(NODE) TREE_VEC_ELT ((NODE), 5)\n \n-/* The size of a base class subobject of this type.  */\n+/* The size of a base class subobject of this type.  Not all frontends\n+   currently allocate the space for this field.  */\n #define BINFO_SIZE(NODE) TREE_VEC_ELT ((NODE), 6)\n #define TYPE_BINFO_SIZE(NODE) BINFO_SIZE (TYPE_BINFO (NODE))\n "}]}