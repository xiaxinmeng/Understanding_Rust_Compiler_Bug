{"sha": "244541410209602edc266168fdb1adba099eee88", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ0NTQxNDEwMjA5NjAyZWRjMjY2MTY4ZmRiMWFkYmEwOTllZWU4OA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2012-05-04T00:31:55Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2012-05-04T00:31:55Z"}, "message": "re PR c++/24985 (caret diagnostics)\n\n2012-05-04  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\tPR c++/24985\ngcc/\n\t* tree-diagnostic.c (maybe_unwind_expanded_macro_loc): Show caret\n\tfor macro expansion.\n\nFrom-SVN: r187134", "tree": {"sha": "8275d8ff37b3da3474071310070829e8593a0098", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8275d8ff37b3da3474071310070829e8593a0098"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/244541410209602edc266168fdb1adba099eee88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/244541410209602edc266168fdb1adba099eee88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/244541410209602edc266168fdb1adba099eee88", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/244541410209602edc266168fdb1adba099eee88/comments", "author": null, "committer": null, "parents": [{"sha": "07c49ed5a6fc1b48281492c19e6658bd0ffe25b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07c49ed5a6fc1b48281492c19e6658bd0ffe25b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07c49ed5a6fc1b48281492c19e6658bd0ffe25b6"}], "stats": {"total": 24, "additions": 15, "deletions": 9}, "files": [{"sha": "635e914b3896c713ad7309a63c4a02f7ff13cf6f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/244541410209602edc266168fdb1adba099eee88/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/244541410209602edc266168fdb1adba099eee88/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=244541410209602edc266168fdb1adba099eee88", "patch": "@@ -1,3 +1,9 @@\n+2012-05-04  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\tPR c++/24985\n+\t* tree-diagnostic.c (maybe_unwind_expanded_macro_loc): Show caret\n+\tfor macro expansion.\n+\n 2012-05-03  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \t* flags.h (flag_permissive): Do not declare."}, {"sha": "cbdbb778259b9673ddf4ee082d2b9111b75ea3a7", "filename": "gcc/tree-diagnostic.c", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/244541410209602edc266168fdb1adba099eee88/gcc%2Ftree-diagnostic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/244541410209602edc266168fdb1adba099eee88/gcc%2Ftree-diagnostic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-diagnostic.c?ref=244541410209602edc266168fdb1adba099eee88", "patch": "@@ -187,30 +187,30 @@ maybe_unwind_expanded_macro_loc (diagnostic_context *context,\n                                     LRK_MACRO_DEFINITION_LOCATION, NULL);\n \n         saved_kind = diagnostic->kind;\n-        saved_prefix = context->printer->prefix;\n+        saved_prefix = pp_get_prefix (context->printer);\n         saved_location = diagnostic->location;\n \n         diagnostic->kind = DK_NOTE;\n         diagnostic->location = resolved_def_loc;\n-        pp_base_set_prefix (context->printer,\n-                            diagnostic_build_prefix (context,\n-                                                     diagnostic));\n+        pp_set_prefix (context->printer,\n+                       diagnostic_build_prefix (context, diagnostic));\n         pp_newline (context->printer);\n         pp_printf (context->printer, \"in expansion of macro '%s'\",\n                    linemap_map_get_macro_name (iter->map));\n         pp_destroy_prefix (context->printer);\n+        diagnostic_show_locus (context, diagnostic);\n \n         diagnostic->location = resolved_exp_loc;\n-        pp_base_set_prefix (context->printer,\n-                            diagnostic_build_prefix (context,\n-                                                     diagnostic));\n+        pp_set_prefix (context->printer,\n+                       diagnostic_build_prefix (context, diagnostic));\n         pp_newline (context->printer);\n-        pp_printf (context->printer, \"expanded from here\");\n+        pp_string (context->printer, \"expanded from here\");\n         pp_destroy_prefix (context->printer);\n+        diagnostic_show_locus (context, diagnostic);\n \n         diagnostic->kind = saved_kind;\n         diagnostic->location = saved_location;\n-        context->printer->prefix = saved_prefix;\n+        pp_set_prefix (context->printer, saved_prefix);\n       }\n \n   VEC_free (loc_map_pair, heap, loc_vec);"}]}