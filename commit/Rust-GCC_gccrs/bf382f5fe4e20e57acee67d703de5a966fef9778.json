{"sha": "bf382f5fe4e20e57acee67d703de5a966fef9778", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmYzODJmNWZlNGUyMGU1N2FjZWU2N2Q3MDNkZTVhOTY2ZmVmOTc3OA==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-03-21T12:24:17Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-03-21T12:24:17Z"}, "message": "re PR bootstrap/48135 (build fails on Solaris2.8 due to Glob.pm not found within /usr/perl5)\n\n\tlibgfortran:\n\tPR bootstrap/48135\n\t* configure.ac (gfortran_use_symver): Handle --disable-symvers.\n\t* configure: Regenerate.\n\n\tlibgomp:\n\tPR bootstrap/48135\n\t* acinclude.m4 (enable_symvers): Handle --disable-symvers.\n\t* configure: Regenerate.\n\n\tlibjava:\n\tPR bootstrap/48135\n\t* configure.ac (libjava_cv_anon_version_script): Handle\n\t--disable-symvers.\n\t* configure: Regenerate.\n\n\tlibquadmath:\n\tPR bootstrap/48135\n\t* configure.ac (quadmath_use_symver): Handle --disable-symvers.\n\t* configure: Regenerate.\n\n\tlibssp:\n\tPR bootstrap/48135\n\t* configure.ac (ssp_use_symver): Handle --disable-symvers.\n\t* configure: Regenerate.\n\nFrom-SVN: r171224", "tree": {"sha": "c3c01a371518143bca8c2b52a8d562eedd9df53c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3c01a371518143bca8c2b52a8d562eedd9df53c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf382f5fe4e20e57acee67d703de5a966fef9778", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf382f5fe4e20e57acee67d703de5a966fef9778", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf382f5fe4e20e57acee67d703de5a966fef9778", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf382f5fe4e20e57acee67d703de5a966fef9778/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "084239f46790abefca35ea30345b338549e59c0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/084239f46790abefca35ea30345b338549e59c0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/084239f46790abefca35ea30345b338549e59c0a"}], "stats": {"total": 480, "additions": 301, "deletions": 179}, "files": [{"sha": "2eac89c7eb6e4d3a7a8538648f58a10a9f959c0d", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -1,3 +1,9 @@\n+2011-03-21  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR bootstrap/48135\n+\t* configure.ac (gfortran_use_symver): Handle --disable-symvers.\n+\t* configure: Regenerate.\n+\n 2011-03-19  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \tPR fortran/35667"}, {"sha": "53df412c89b62ead062870fefd7c16483ac402f3", "filename": "libgfortran/configure", "status": "modified", "additions": 28, "deletions": 17, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libgfortran%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libgfortran%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fconfigure?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -757,6 +757,7 @@ enable_intermodule\n enable_maintainer_mode\n enable_multilib\n enable_dependency_tracking\n+enable_symvers\n enable_shared\n enable_static\n with_pic\n@@ -1406,6 +1407,7 @@ Optional Features:\n   --enable-multilib       build many library versions (default)\n   --disable-dependency-tracking  speeds up one-time build\n   --enable-dependency-tracking   do not reject slow dependency extractors\n+  --disable-symvers       disable symbol versioning for libgfortran\n   --enable-shared[=PKGS]  build shared libraries [default=yes]\n   --enable-static[=PKGS]  build static libraries [default=yes]\n   --enable-fast-install[=PKGS]\n@@ -5564,14 +5566,22 @@ fi\n # Check for symbol versioning (copied from libssp).\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether symbol versioning is supported\" >&5\n $as_echo_n \"checking whether symbol versioning is supported... \" >&6; }\n-save_LDFLAGS=\"$LDFLAGS\"\n-LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n-cat > conftest.map <<EOF\n+# Check whether --enable-symvers was given.\n+if test \"${enable_symvers+set}\" = set; then :\n+  enableval=$enable_symvers; gfortran_use_symver=$enableval\n+else\n+  gfortran_use_symver=yes\n+fi\n+\n+if test \"x$gfortran_use_symver\" = xyes; then\n+  save_LDFLAGS=\"$LDFLAGS\"\n+  LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n+  cat > conftest.map <<EOF\n FOO_1.0 {\n   global: *foo*; bar; local: *;\n };\n EOF\n-if test x$gcc_no_link = xyes; then\n+  if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -5592,18 +5602,18 @@ else\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-if test x$gfortran_use_symver = xno; then\n-  case \"$target_os\" in\n-    solaris2*)\n-      LDFLAGS=\"$save_LDFLAGS\"\n-      LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n-      # Sun ld cannot handle wildcards and treats all entries as undefined.\n-      cat > conftest.map <<EOF\n+  if test x$gfortran_use_symver = xno; then\n+    case \"$target_os\" in\n+      solaris2*)\n+        LDFLAGS=\"$save_LDFLAGS\"\n+        LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n+        # Sun ld cannot handle wildcards and treats all entries as undefined.\n+        cat > conftest.map <<EOF\n FOO_1.0 {\n   global: foo; local: *;\n };\n EOF\n-      if test x$gcc_no_link = xyes; then\n+        if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -5624,10 +5634,11 @@ else\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-      ;;\n-  esac\n+        ;;\n+    esac\n+  fi\n+  LDFLAGS=\"$save_LDFLAGS\"\n fi\n-LDFLAGS=\"$save_LDFLAGS\"\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gfortran_use_symver\" >&5\n $as_echo \"$gfortran_use_symver\" >&6; }\n  if test \"x$gfortran_use_symver\" != xno; then\n@@ -12101,7 +12112,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12104 \"configure\"\n+#line 12115 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12207,7 +12218,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12210 \"configure\"\n+#line 12221 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H"}, {"sha": "588f9997e56758701f63cf70bedf4991a947bc52", "filename": "libgfortran/configure.ac", "status": "modified", "additions": 22, "deletions": 15, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libgfortran%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libgfortran%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fconfigure.ac?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -144,30 +144,37 @@ AC_SUBST(CFLAGS)\n \n # Check for symbol versioning (copied from libssp).\n AC_MSG_CHECKING([whether symbol versioning is supported])\n-save_LDFLAGS=\"$LDFLAGS\"\n-LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n-cat > conftest.map <<EOF\n+AC_ARG_ENABLE(symvers,\n+AS_HELP_STRING([--disable-symvers],\n+  [disable symbol versioning for libgfortran]),\n+gfortran_use_symver=$enableval,\n+gfortran_use_symver=yes)\n+if test \"x$gfortran_use_symver\" = xyes; then\n+  save_LDFLAGS=\"$LDFLAGS\"\n+  LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n+  cat > conftest.map <<EOF\n FOO_1.0 {\n   global: *foo*; bar; local: *;\n };\n EOF\n-AC_LINK_IFELSE([AC_LANG_PROGRAM([[int foo;]],[[]])],[gfortran_use_symver=gnu],[gfortran_use_symver=no])\n-if test x$gfortran_use_symver = xno; then\n-  case \"$target_os\" in\n-    solaris2*)\n-      LDFLAGS=\"$save_LDFLAGS\"\n-      LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n-      # Sun ld cannot handle wildcards and treats all entries as undefined.\n-      cat > conftest.map <<EOF\n+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[int foo;]],[[]])],[gfortran_use_symver=gnu],[gfortran_use_symver=no])\n+  if test x$gfortran_use_symver = xno; then\n+    case \"$target_os\" in\n+      solaris2*)\n+        LDFLAGS=\"$save_LDFLAGS\"\n+        LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n+        # Sun ld cannot handle wildcards and treats all entries as undefined.\n+        cat > conftest.map <<EOF\n FOO_1.0 {\n   global: foo; local: *;\n };\n EOF\n-      AC_LINK_IFELSE([AC_LANG_PROGRAM([[int foo;]],[[]])],[gfortran_use_symver=sun],[gfortran_use_symver=no])\n-      ;;\n-  esac\n+        AC_LINK_IFELSE([AC_LANG_PROGRAM([[int foo;]],[[]])],[gfortran_use_symver=sun],[gfortran_use_symver=no])\n+        ;;\n+    esac\n+  fi\n+  LDFLAGS=\"$save_LDFLAGS\"\n fi\n-LDFLAGS=\"$save_LDFLAGS\"\n AC_MSG_RESULT($gfortran_use_symver)\n AM_CONDITIONAL(LIBGFOR_USE_SYMVER, [test \"x$gfortran_use_symver\" != xno])\n AM_CONDITIONAL(LIBGFOR_USE_SYMVER_GNU, [test \"x$gfortran_use_symver\" = xgnu])"}, {"sha": "52ea1433548a835eb47d0bb0b8e65d428efd1c92", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -1,3 +1,9 @@\n+2011-03-21  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR bootstrap/48135\n+\t* acinclude.m4 (enable_symvers): Handle --disable-symvers.\n+\t* configure: Regenerate.\n+\n 2011-02-27  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR fortran/47886"}, {"sha": "4a4b62f01c3e0c750625a8d50d34b4e00c21f76c", "filename": "libgomp/acinclude.m4", "status": "modified", "additions": 17, "deletions": 13, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libgomp%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libgomp%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Facinclude.m4?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -228,20 +228,24 @@ LIBGOMP_ENABLE(symvers,yes,[=STYLE],\n # If we never went through the LIBGOMP_CHECK_LINKER_FEATURES macro, then we\n # don't know enough about $LD to do tricks...\n AC_REQUIRE([LIBGOMP_CHECK_LINKER_FEATURES])\n-# FIXME  The following test is too strict, in theory.\n-if test $enable_shared = no || test \"x$LD\" = x; then\n-  enable_symvers=no\n-else\n-  if test $with_gnu_ld = yes ; then\n-    enable_symvers=gnu\n+\n+# Turn a 'yes' into a suitable default.\n+if test x$enable_symvers = xyes ; then\n+  # FIXME  The following test is too strict, in theory.\n+  if test $enable_shared = no || test \"x$LD\" = x; then\n+    enable_symvers=no\n   else\n-    case ${target_os} in\n-      # Sun symbol versioning exists since Solaris 2.5.\n-      solaris2.[[5-9]]* | solaris2.1[[0-9]]*)\n-        enable_symvers=sun ;;\n-      *)\n-        enable_symvers=no ;;\n-    esac\n+    if test $with_gnu_ld = yes ; then\n+      enable_symvers=gnu\n+    else\n+      case ${target_os} in\n+        # Sun symbol versioning exists since Solaris 2.5.\n+        solaris2.[[5-9]]* | solaris2.1[[0-9]]*)\n+          enable_symvers=sun ;;\n+        *)\n+          enable_symvers=no ;;\n+      esac\n+    fi\n   fi\n fi\n "}, {"sha": "50dc29a6201417fdf17440cb8085a11e19f63837", "filename": "libgomp/configure", "status": "modified", "additions": 17, "deletions": 13, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -15780,20 +15780,24 @@ fi\n # If we never went through the LIBGOMP_CHECK_LINKER_FEATURES macro, then we\n # don't know enough about $LD to do tricks...\n \n-# FIXME  The following test is too strict, in theory.\n-if test $enable_shared = no || test \"x$LD\" = x; then\n-  enable_symvers=no\n-else\n-  if test $with_gnu_ld = yes ; then\n-    enable_symvers=gnu\n+\n+# Turn a 'yes' into a suitable default.\n+if test x$enable_symvers = xyes ; then\n+  # FIXME  The following test is too strict, in theory.\n+  if test $enable_shared = no || test \"x$LD\" = x; then\n+    enable_symvers=no\n   else\n-    case ${target_os} in\n-      # Sun symbol versioning exists since Solaris 2.5.\n-      solaris2.[5-9]* | solaris2.1[0-9]*)\n-        enable_symvers=sun ;;\n-      *)\n-        enable_symvers=no ;;\n-    esac\n+    if test $with_gnu_ld = yes ; then\n+      enable_symvers=gnu\n+    else\n+      case ${target_os} in\n+        # Sun symbol versioning exists since Solaris 2.5.\n+        solaris2.[5-9]* | solaris2.1[0-9]*)\n+          enable_symvers=sun ;;\n+        *)\n+          enable_symvers=no ;;\n+      esac\n+    fi\n   fi\n fi\n "}, {"sha": "21eeee54943866e5b9f0ca7a4d0b6ac5b8f299bd", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -1,3 +1,10 @@\n+2011-03-21  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR bootstrap/48135\n+\t* configure.ac (libjava_cv_anon_version_script): Handle\n+\t--disable-symvers.\n+\t* configure: Regenerate.\n+\n 2011-02-14  Gary Benson  <gbenson@redhat.com>\n \n \t* libjava/contrib/aot-compile.in: Add our module directory"}, {"sha": "2a57e13af57fb81ead9c001d8d73911cc2708318", "filename": "libjava/configure", "status": "modified", "additions": 37, "deletions": 20, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -959,6 +959,7 @@ enable_rpath\n with_libiconv_prefix\n enable_tls\n with_system_libunwind\n+enable_symvers\n with_python_dir\n enable_aot_compile_rpm\n enable_java_home\n@@ -1648,6 +1649,7 @@ Optional Features:\n   --enable-java-gc=TYPE   choose garbage collector (default is boehm)\n   --disable-rpath         do not hardcode runtime library paths\n   --enable-tls            Use thread-local storage [default=yes]\n+  --disable-symvers       disable symbol versioning for libjava\n   --enable-aot-compile-rpm\n                           enable installation of aot-compile-rpm [default=no]\n   --enable-java-home      create a standard JDK-style directory layout in the\n@@ -13344,7 +13346,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13347 \"configure\"\n+#line 13349 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13450,7 +13452,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13453 \"configure\"\n+#line 13455 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -19443,7 +19445,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then :\n   enableval=$enable_sjlj_exceptions; :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 19446 \"configure\"\n+#line 19448 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -24530,12 +24532,24 @@ $as_echo_n \"checking whether ld supports anonymous version scripts... \" >&6; }\n if test \"${libjava_cv_anon_version_script+set}\" = set; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-  save_CFLAGS=\"$CFLAGS\"; save_LDFLAGS=\"$LDFLAGS\"\n-   libjava_cv_anon_version_script=no\n-   CFLAGS=\"$CFLAGS -fPIC\";\n-   LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n-   echo '{ global: globalsymb*; local: *; };' > conftest.map\n-   if test x$gcc_no_link = xyes; then\n+  # Check whether --enable-symvers was given.\n+if test \"${enable_symvers+set}\" = set; then :\n+  enableval=$enable_symvers; case \"$enableval\" in\n+         yes) libjava_cv_anon_version_script=yes ;;\n+         no)  libjava_cv_anon_version_script=no ;;\n+         *)   as_fn_error \"Unknown argument to enable/disable symvers\" \"$LINENO\" 5;;\n+        esac\n+else\n+  libjava_cv_anon_version_script=yes\n+\n+fi\n+\n+   if test x$libjava_cv_anon_version_script = xyes; then\n+     save_CFLAGS=\"$CFLAGS\"; save_LDFLAGS=\"$LDFLAGS\"\n+     CFLAGS=\"$CFLAGS -fPIC\";\n+     LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n+     echo '{ global: globalsymb*; local: *; };' > conftest.map\n+     if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -24551,17 +24565,19 @@ main ()\n _ACEOF\n if ac_fn_c_try_link \"$LINENO\"; then :\n   libjava_cv_anon_version_script=gnu\n+else\n+  libjava_cv_anon_version_script=no\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-   if test x$libjava_cv_anon_version_script = xno; then\n-     case \"$target_os\" in\n-       solaris2*)\n-         LDFLAGS=\"$save_LDFLAGS\"\n-         LDFLAGS=\"$LDFLAGS -shared -Wl,-M,conftest.map\"\n-         # Sun ld doesn't understand wildcards here.\n-         echo '{ global: globalsymbol; local: *; };' > conftest.map\n-         if test x$gcc_no_link = xyes; then\n+     if test x$libjava_cv_anon_version_script = xno; then\n+       case \"$target_os\" in\n+         solaris2*)\n+           LDFLAGS=\"$save_LDFLAGS\"\n+           LDFLAGS=\"$LDFLAGS -shared -Wl,-M,conftest.map\"\n+           # Sun ld doesn't understand wildcards here.\n+           echo '{ global: globalsymbol; local: *; };' > conftest.map\n+           if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -24580,10 +24596,11 @@ if ac_fn_c_try_link \"$LINENO\"; then :\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-         ;;\n-     esac\n+           ;;\n+       esac\n+     fi\n+     CFLAGS=\"$save_CFLAGS\"; LDFLAGS=\"$save_LDFLAGS\"\n    fi\n-   CFLAGS=\"$save_CFLAGS\"; LDFLAGS=\"$save_LDFLAGS\"\n \n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $libjava_cv_anon_version_script\" >&5"}, {"sha": "c5bb1a04f98533736062ea9b83016612ed296a82", "filename": "libjava/configure.ac", "status": "modified", "additions": 31, "deletions": 19, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -1800,26 +1800,38 @@ GCC_CHECK_UNWIND_GETIPINFO\n # See if linker supports anonymous version scripts.\n AC_CACHE_CHECK([whether ld supports anonymous version scripts],\n   [libjava_cv_anon_version_script],\n-  [save_CFLAGS=\"$CFLAGS\"; save_LDFLAGS=\"$LDFLAGS\"\n-   libjava_cv_anon_version_script=no\n-   CFLAGS=\"$CFLAGS -fPIC\";\n-   LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n-   echo '{ global: globalsymb*; local: *; };' > conftest.map\n-   AC_TRY_LINK(void globalsymbol (void) {} void localsymbol (void) {},,\n-\t       [libjava_cv_anon_version_script=gnu], [])\n-   if test x$libjava_cv_anon_version_script = xno; then\n-     case \"$target_os\" in\n-       solaris2*)\n-         LDFLAGS=\"$save_LDFLAGS\"\n-         LDFLAGS=\"$LDFLAGS -shared -Wl,-M,conftest.map\"\n-         # Sun ld doesn't understand wildcards here.\n-         echo '{ global: globalsymbol; local: *; };' > conftest.map\n-         AC_TRY_LINK(void globalsymbol (void) {} void localsymbol (void) {},,\n-\t \t     [libjava_cv_anon_version_script=sun], [])\n-         ;;\n-     esac\n+  [AC_ARG_ENABLE(symvers,\n+     AS_HELP_STRING([--disable-symvers],\n+\t\t    [disable symbol versioning for libjava]),\n+       [case \"$enableval\" in\n+         yes) libjava_cv_anon_version_script=yes ;;\n+         no)  libjava_cv_anon_version_script=no ;;\n+         *)   AC_MSG_ERROR([Unknown argument to enable/disable symvers]);;\n+        esac],\n+       [libjava_cv_anon_version_script=yes]\n+   )\n+   if test x$libjava_cv_anon_version_script = xyes; then\n+     save_CFLAGS=\"$CFLAGS\"; save_LDFLAGS=\"$LDFLAGS\"\n+     CFLAGS=\"$CFLAGS -fPIC\";\n+     LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n+     echo '{ global: globalsymb*; local: *; };' > conftest.map\n+     AC_TRY_LINK(void globalsymbol (void) {} void localsymbol (void) {},,\n+\t         [libjava_cv_anon_version_script=gnu],\n+\t\t [libjava_cv_anon_version_script=no])\n+     if test x$libjava_cv_anon_version_script = xno; then\n+       case \"$target_os\" in\n+         solaris2*)\n+           LDFLAGS=\"$save_LDFLAGS\"\n+           LDFLAGS=\"$LDFLAGS -shared -Wl,-M,conftest.map\"\n+           # Sun ld doesn't understand wildcards here.\n+           echo '{ global: globalsymbol; local: *; };' > conftest.map\n+           AC_TRY_LINK(void globalsymbol (void) {} void localsymbol (void) {},,\n+\t \t       [libjava_cv_anon_version_script=sun], [])\n+           ;;\n+       esac\n+     fi\n+     CFLAGS=\"$save_CFLAGS\"; LDFLAGS=\"$save_LDFLAGS\"\n    fi\n-   CFLAGS=\"$save_CFLAGS\"; LDFLAGS=\"$save_LDFLAGS\"\n   ])\n AM_CONDITIONAL(ANONVERSCRIPT, test \"$libjava_cv_anon_version_script\" != no)\n AM_CONDITIONAL(ANONVERSCRIPT_GNU, test \"$libjava_cv_anon_version_script\" = gnu)"}, {"sha": "080b387b89aa32ec489a0109bac6fc6ee52dd140", "filename": "libquadmath/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libquadmath%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libquadmath%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libquadmath%2FChangeLog?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -1,3 +1,9 @@\n+2011-03-21  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR bootstrap/48135\n+\t* configure.ac (quadmath_use_symver): Handle --disable-symvers.\n+\t* configure: Regenerate.\n+\n 2011-02-28  Jakub Jelinek  <jakub@redhat.com>\n \n \t* printf/quadmath-printf.c (quadmath_snprintf): Make sure"}, {"sha": "7f78ea158686af296df8a32beb7bd14fdf76fc92", "filename": "libquadmath/configure", "status": "modified", "additions": 32, "deletions": 21, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libquadmath%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libquadmath%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libquadmath%2Fconfigure?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -747,6 +747,7 @@ with_gnu_ld\n enable_libtool_lock\n enable_maintainer_mode\n enable_multilib\n+enable_symvers\n enable_generated_files_in_srcdir\n '\n       ac_precious_vars='build_alias\n@@ -1391,6 +1392,7 @@ Optional Features:\n   --enable-maintainer-mode  enable make rules and dependencies not useful\n \t\t\t  (and sometimes confusing) to the casual installer\n   --enable-multilib       build many library versions (default)\n+  --disable-symvers       disable symbol versioning for libquadmath\n   --enable-generated-files-in-srcdir\n                           put copies of generated files in source dir intended\n                           for creating source tarballs for users without\n@@ -10511,7 +10513,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10514 \"configure\"\n+#line 10516 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10617,7 +10619,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10620 \"configure\"\n+#line 10622 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12339,19 +12341,27 @@ CFLAGS=\"$saved_CFLAGS\"\n # Check for symbol versioning (copied from libssp).\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether symbol versioning is supported\" >&5\n $as_echo_n \"checking whether symbol versioning is supported... \" >&6; }\n-if test x$gcc_no_link = xyes; then\n-  # If we cannot link, we cannot build shared libraries, so do not use\n-  # symbol versioning.\n-  quadmath_use_symver=no\n+# Check whether --enable-symvers was given.\n+if test \"${enable_symvers+set}\" = set; then :\n+  enableval=$enable_symvers; quadmath_use_symver=$enableval\n else\n-  save_LDFLAGS=\"$LDFLAGS\"\n-  LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n-  cat > conftest.map <<EOF\n+  quadmath_use_symver=yes\n+fi\n+\n+if test \"x$quadmath_use_symver\" = xyes; then\n+  if test x$gcc_no_link = xyes; then\n+    # If we cannot link, we cannot build shared libraries, so do not use\n+    # symbol versioning.\n+    quadmath_use_symver=no\n+  else\n+    save_LDFLAGS=\"$LDFLAGS\"\n+    LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n+    cat > conftest.map <<EOF\n FOO_1.0 {\n   global: *foo*; bar; local: *;\n };\n EOF\n-  if test x$gcc_no_link = xyes; then\n+    if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -12372,18 +12382,18 @@ else\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-  if test x$quadmath_use_symver = xno; then\n-    case \"$target_os\" in\n-      solaris2*)\n-        LDFLAGS=\"$save_LDFLAGS\"\n-        LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n-        # Sun ld cannot handle wildcards and treats all entries as undefined.\n-        cat > conftest.map <<EOF\n+    if test x$quadmath_use_symver = xno; then\n+      case \"$target_os\" in\n+        solaris2*)\n+          LDFLAGS=\"$save_LDFLAGS\"\n+          LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n+          # Sun ld cannot handle wildcards and treats all entries as undefined.\n+          cat > conftest.map <<EOF\n FOO_1.0 {\n   global: foo; local: *;\n };\n EOF\n-        if test x$gcc_no_link = xyes; then\n+          if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -12404,10 +12414,11 @@ else\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-        ;;\n-    esac\n+          ;;\n+      esac\n+    fi\n+    LDFLAGS=\"$save_LDFLAGS\"\n   fi\n-  LDFLAGS=\"$save_LDFLAGS\"\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $quadmath_use_symver\" >&5\n $as_echo \"$quadmath_use_symver\" >&6; }"}, {"sha": "512b9f81391550aca9eef376f2c37e57d6cf0207", "filename": "libquadmath/configure.ac", "status": "modified", "additions": 27, "deletions": 20, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libquadmath%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libquadmath%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libquadmath%2Fconfigure.ac?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -164,35 +164,42 @@ CFLAGS=\"$saved_CFLAGS\"\n \n # Check for symbol versioning (copied from libssp).\n AC_MSG_CHECKING([whether symbol versioning is supported])\n-if test x$gcc_no_link = xyes; then\n-  # If we cannot link, we cannot build shared libraries, so do not use\n-  # symbol versioning.\n-  quadmath_use_symver=no\n-else\n-  save_LDFLAGS=\"$LDFLAGS\"\n-  LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n-  cat > conftest.map <<EOF\n+AC_ARG_ENABLE(symvers,\n+AS_HELP_STRING([--disable-symvers],\n+  [disable symbol versioning for libquadmath]),\n+quadmath_use_symver=$enableval,\n+quadmath_use_symver=yes)\n+if test \"x$quadmath_use_symver\" = xyes; then\n+  if test x$gcc_no_link = xyes; then\n+    # If we cannot link, we cannot build shared libraries, so do not use\n+    # symbol versioning.\n+    quadmath_use_symver=no\n+  else\n+    save_LDFLAGS=\"$LDFLAGS\"\n+    LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n+    cat > conftest.map <<EOF\n FOO_1.0 {\n   global: *foo*; bar; local: *;\n };\n EOF\n-  AC_TRY_LINK([int foo;],[],[quadmath_use_symver=gnu],[quadmath_use_symver=no])\n-  if test x$quadmath_use_symver = xno; then\n-    case \"$target_os\" in\n-      solaris2*)\n-        LDFLAGS=\"$save_LDFLAGS\"\n-        LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n-        # Sun ld cannot handle wildcards and treats all entries as undefined.\n-        cat > conftest.map <<EOF\n+    AC_TRY_LINK([int foo;],[],[quadmath_use_symver=gnu],[quadmath_use_symver=no])\n+    if test x$quadmath_use_symver = xno; then\n+      case \"$target_os\" in\n+        solaris2*)\n+          LDFLAGS=\"$save_LDFLAGS\"\n+          LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n+          # Sun ld cannot handle wildcards and treats all entries as undefined.\n+          cat > conftest.map <<EOF\n FOO_1.0 {\n   global: foo; local: *;\n };\n EOF\n-        AC_TRY_LINK([int foo;],[],[quadmath_use_symver=sun],[quadmath_use_symver=no])\n-        ;;\n-    esac\n+          AC_TRY_LINK([int foo;],[],[quadmath_use_symver=sun],[quadmath_use_symver=no])\n+          ;;\n+      esac\n+    fi\n+    LDFLAGS=\"$save_LDFLAGS\"\n   fi\n-  LDFLAGS=\"$save_LDFLAGS\"\n fi\n AC_MSG_RESULT($quadmath_use_symver)\n AM_CONDITIONAL(LIBQUAD_USE_SYMVER, [test \"x$quadmath_use_symver\" != xno])"}, {"sha": "d8f42a94dab9342b358b8c61e6fbaacec2abde62", "filename": "libssp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libssp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libssp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2FChangeLog?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -1,3 +1,9 @@\n+2011-03-21  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR bootstrap/48135\n+\t* configure.ac (ssp_use_symver): Handle --disable-symvers.\n+\t* configure: Regenerate.\n+\n 2011-02-13  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* Makefile.in: Regenerate."}, {"sha": "b1edcb4295bbb68b2f92a3bc1618108f80d65dac", "filename": "libssp/configure", "status": "modified", "additions": 32, "deletions": 21, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libssp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libssp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2Fconfigure?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -734,6 +734,7 @@ enable_version_specific_runtime_libs\n enable_maintainer_mode\n enable_multilib\n enable_dependency_tracking\n+enable_symvers\n enable_shared\n enable_static\n with_pic\n@@ -1372,6 +1373,7 @@ Optional Features:\n   --enable-multilib       build many library versions (default)\n   --disable-dependency-tracking  speeds up one-time build\n   --enable-dependency-tracking   do not reject slow dependency extractors\n+  --disable-symvers       disable symbol versioning for libssp\n   --enable-shared[=PKGS]  build shared libraries [default=yes]\n   --enable-static[=PKGS]  build static libraries [default=yes]\n   --enable-fast-install[=PKGS]\n@@ -4098,19 +4100,27 @@ fi\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether symbol versioning is supported\" >&5\n $as_echo_n \"checking whether symbol versioning is supported... \" >&6; }\n-if test x$gcc_no_link = xyes; then\n-  # If we cannot link, we cannot build shared libraries, so do not use\n-  # symbol versioning.\n-  ssp_use_symver=no\n+# Check whether --enable-symvers was given.\n+if test \"${enable_symvers+set}\" = set; then :\n+  enableval=$enable_symvers; ssp_use_symver=$enableval\n else\n-  save_LDFLAGS=\"$LDFLAGS\"\n-  LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n-  cat > conftest.map <<EOF\n+  ssp_use_symver=yes\n+fi\n+\n+if test \"x$ssp_use_symver\" = xyes; then\n+  if test x$gcc_no_link = xyes; then\n+    # If we cannot link, we cannot build shared libraries, so do not use\n+    # symbol versioning.\n+    ssp_use_symver=no\n+  else\n+    save_LDFLAGS=\"$LDFLAGS\"\n+    LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n+    cat > conftest.map <<EOF\n FOO_1.0 {\n   global: *foo*; bar; local: *;\n };\n EOF\n-  if test x$gcc_no_link = xyes; then\n+    if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -4131,18 +4141,18 @@ else\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-  if test x$ssp_use_symver = xno; then\n-    case \"$target_os\" in\n-      solaris2*)\n-        LDFLAGS=\"$save_LDFLAGS\"\n-        LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n-        # Sun ld cannot handle wildcards and treats all entries as undefined.\n-        cat > conftest.map <<EOF\n+    if test x$ssp_use_symver = xno; then\n+      case \"$target_os\" in\n+        solaris2*)\n+          LDFLAGS=\"$save_LDFLAGS\"\n+          LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n+          # Sun ld cannot handle wildcards and treats all entries as undefined.\n+          cat > conftest.map <<EOF\n FOO_1.0 {\n   global: foo; local: *;\n };\n EOF\n-        if test x$gcc_no_link = xyes; then\n+          if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n@@ -4163,10 +4173,11 @@ else\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-    \t;;\n-    esac\n+\t  ;;\n+      esac\n+    fi\n+    LDFLAGS=\"$save_LDFLAGS\"\n   fi\n-  LDFLAGS=\"$save_LDFLAGS\"\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ssp_use_symver\" >&5\n $as_echo \"$ssp_use_symver\" >&6; }\n@@ -10639,7 +10650,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10642 \"configure\"\n+#line 10653 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10745,7 +10756,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10748 \"configure\"\n+#line 10759 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H"}, {"sha": "0eee36ce014aa1680c0652451598f8be2b4895aa", "filename": "libssp/configure.ac", "status": "modified", "additions": 27, "deletions": 20, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf382f5fe4e20e57acee67d703de5a966fef9778/libssp%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf382f5fe4e20e57acee67d703de5a966fef9778/libssp%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2Fconfigure.ac?ref=bf382f5fe4e20e57acee67d703de5a966fef9778", "patch": "@@ -72,35 +72,42 @@ if test x$ssp_hidden = xyes; then\n fi\n \n AC_MSG_CHECKING([whether symbol versioning is supported])\n-if test x$gcc_no_link = xyes; then\n-  # If we cannot link, we cannot build shared libraries, so do not use\n-  # symbol versioning.\n-  ssp_use_symver=no\n-else\n-  save_LDFLAGS=\"$LDFLAGS\"\n-  LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n-  cat > conftest.map <<EOF\n+AC_ARG_ENABLE(symvers,\n+AS_HELP_STRING([--disable-symvers],\n+  [disable symbol versioning for libssp]),\n+ssp_use_symver=$enableval,\n+ssp_use_symver=yes)\n+if test \"x$ssp_use_symver\" = xyes; then\n+  if test x$gcc_no_link = xyes; then\n+    # If we cannot link, we cannot build shared libraries, so do not use\n+    # symbol versioning.\n+    ssp_use_symver=no\n+  else\n+    save_LDFLAGS=\"$LDFLAGS\"\n+    LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,--version-script,./conftest.map\"\n+    cat > conftest.map <<EOF\n FOO_1.0 {\n   global: *foo*; bar; local: *;\n };\n EOF\n-  AC_TRY_LINK([int foo;],[],[ssp_use_symver=gnu],[ssp_use_symver=no])\n-  if test x$ssp_use_symver = xno; then\n-    case \"$target_os\" in\n-      solaris2*)\n-        LDFLAGS=\"$save_LDFLAGS\"\n-        LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n-        # Sun ld cannot handle wildcards and treats all entries as undefined.\n-        cat > conftest.map <<EOF\n+    AC_TRY_LINK([int foo;],[],[ssp_use_symver=gnu],[ssp_use_symver=no])\n+    if test x$ssp_use_symver = xno; then\n+      case \"$target_os\" in\n+        solaris2*)\n+          LDFLAGS=\"$save_LDFLAGS\"\n+          LDFLAGS=\"$LDFLAGS -fPIC -shared -Wl,-M,./conftest.map\"\n+          # Sun ld cannot handle wildcards and treats all entries as undefined.\n+          cat > conftest.map <<EOF\n FOO_1.0 {\n   global: foo; local: *;\n };\n EOF\n-        AC_TRY_LINK([int foo;],[],[ssp_use_symver=sun],[ssp_use_symver=no])\n-    \t;;\n-    esac\n+          AC_TRY_LINK([int foo;],[],[ssp_use_symver=sun],[ssp_use_symver=no])\n+\t  ;;\n+      esac\n+    fi\n+    LDFLAGS=\"$save_LDFLAGS\"\n   fi\n-  LDFLAGS=\"$save_LDFLAGS\"\n fi\n AC_MSG_RESULT($ssp_use_symver)\n AM_CONDITIONAL(LIBSSP_USE_SYMVER, [test \"x$ssp_use_symver\" != xno])"}]}