{"sha": "be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmU1YWViNjBkNjExOWRjMjFjOTkxNzUxZmI0N2RmZGNkNjU3ZjNjMA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-10-26T07:28:25Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-10-26T07:28:25Z"}, "message": "Makefile.in (site.exp): Define HAVE_LIBSTDCXX_V3.\n\n\t* Makefile.in (site.exp): Define HAVE_LIBSTDCXX_V3.\n\t* configure.in (enable-libstdcxx-v3): Arrange to have\n\tHAVE_LIBSTDCXX_V3 substituted into the output files.\n\n\t* lib/g++.exp (g++_include_flags): Trust HAVE_LIBSTDCXX_V3\n\tto tell us whether or not we are using V3.\n\n\t* Makefile.in (check): Don't make mkcheck executable.\n\t(check-install): Likewise.\n\t* configure.in (AC_OUTPUT): Make mkcheck executable.\n\t* mkcheck.in (top_srcdir): New variable.\n\t(INC_PATH): Set the path to the backward and ext directories\n\tcorrectly.\n\nFrom-SVN: r37068", "tree": {"sha": "404ab9777c883f211f32a764fa3b7d9c9df52940", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/404ab9777c883f211f32a764fa3b7d9c9df52940"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/comments", "author": null, "committer": null, "parents": [{"sha": "5f9cd837907a3c3cc5158b688e68f37227974a8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f9cd837907a3c3cc5158b688e68f37227974a8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f9cd837907a3c3cc5158b688e68f37227974a8d"}], "stats": {"total": 74, "additions": 52, "deletions": 22}, "files": [{"sha": "25f59732367b79b0f81ae89931a89268deb4c8c4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -1,3 +1,9 @@\n+2000-10-25  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* Makefile.in (site.exp): Define HAVE_LIBSTDCXX_V3.\n+\t* configure.in (enable-libstdcxx-v3): Arrange to have\n+\tHAVE_LIBSTDCXX_V3 substituted into the output files.\n+\n 2000-10-25  Richard Henderson  <rth@redhat.com>\n \n \t* recog.c (constrain_operands): Initialize which_alternative"}, {"sha": "380cfdfa18febc6d62daac02f0b9046dfc40b977", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -2593,6 +2593,7 @@ site.exp: ./config.status Makefile\n # CFLAGS is set even though it's empty to show we reserve the right to set it.\n \t@echo \"set CFLAGS \\\"\\\"\" >> ./tmp0\n \t@echo \"set CXXFLAGS \\\"-I$(objdir)/../$(target_subdir)libio -I\\$$srcdir/../libg++/src -I\\$$srcdir/../libio -I\\$$srcdir/../libstdc++ -I\\$$srcdir/../libstdc++/stl -L$(objdir)/../$(target_subdir)libg++ -L$(objdir)/../$(target_subdir)libstdc++\\\"\" >> ./tmp0\n+\t@echo \"set HAVE_LIBSTDCXX_V3 @HAVE_LIBSTDCXX_V3@\" >> ./tmp0\n # If newlib has been configured, we need to pass -B to gcc so it can find\n # newlib's crt0.o if it exists.  This will cause a \"path prefix not used\"\n # message if it doesn't, but the testsuite is supposed to ignore the message -"}, {"sha": "95ae6fb09a8cf2125010820ff14185293b111db8", "filename": "gcc/configure", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -1575,7 +1575,7 @@ esac\n \n \n # Find some useful tools\n-for ac_prog in mawk gawk nawk awk\n+for ac_prog in gawk mawk nawk awk\n do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n@@ -9522,9 +9522,11 @@ fi\n \n if test x$enable_libstdcxx_v3 = xyes; then\n   echo \"$ac_t\"\"v3\" 1>&6\n+  HAVE_LIBSTDCXX_V3=1\n   ac_esn=1\n else\n   echo \"$ac_t\"\"v2\" 1>&6\n+  HAVE_LIBSTDCXX_V3=0\n   ac_esn=0\n fi\n cat >> confdefs.h <<EOF\n@@ -9533,8 +9535,9 @@ EOF\n \n \n \n+\n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:9538: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:9541: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -10033,6 +10036,7 @@ s%@GGC@%$GGC%g\n s%@zlibdir@%$zlibdir%g\n s%@zlibinc@%$zlibinc%g\n s%@GXX_ABI_FLAG@%$GXX_ABI_FLAG%g\n+s%@HAVE_LIBSTDCXX_V3@%$HAVE_LIBSTDCXX_V3%g\n s%@MAINT@%$MAINT%g\n s%@build_canonical@%$build_canonical%g\n s%@host_canonical@%$host_canonical%g"}, {"sha": "b05d5b57ad0bef57b94a06e5288b68850e252977", "filename": "gcc/configure.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -4907,13 +4907,16 @@ AC_ARG_ENABLE(libstdcxx-v3,\n \n if test x$enable_libstdcxx_v3 = xyes; then\n   AC_MSG_RESULT(v3)\n+  HAVE_LIBSTDCXX_V3=1\n   ac_esn=1\n else\n   AC_MSG_RESULT(v2)\n+  HAVE_LIBSTDCXX_V3=0\n   ac_esn=0\n fi\n AC_DEFINE_UNQUOTED(ENABLE_STD_NAMESPACE, $ac_esn,\n   [Define to 1 if you want to enable namespaces (-fhonor-std) by default.])\n+AC_SUBST(HAVE_LIBSTDCXX_V3)\n \n dnl Very limited version of automake's enable-maintainer-mode\n "}, {"sha": "0790ff28a2c013de35ca04b63175ed6a27dc7bf6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -1,3 +1,8 @@\n+2000-10-25  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* lib/g++.exp (g++_include_flags): Trust HAVE_LIBSTDCXX_V3\n+\tto tell us whether or not we are using V3.\n+\n 2000-10-26  Gabriel Dos Reis  <gdr@codesourcery.com>\n \n \t* g++.old-deja/g++.pt/memtemp77.C (main): Adjust comparaison"}, {"sha": "8fe1f2a4c4a030631991b4f2c9e78f80ca6177e7", "filename": "gcc/testsuite/lib/g++.exp", "status": "modified", "additions": 13, "deletions": 14, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -68,30 +68,29 @@ proc g++_version { } {\n #\n proc g++_include_flags { args } {\n     global srcdir\n+    global HAVE_LIBSTDCXX_V3\n+\n+    set flags \"\"\n \n     if [is_remote host] {\n-      return \"\"\n+      return \"${flags}\"\n     }\n \n-    set gccpath [get_multilibs]\n-    set libio_dir \"\"\n-    set flags \"\"\n-\n     set dir [lookfor_file ${srcdir} libg++]\n     if { ${dir} != \"\" } {\n       append flags \"-I${dir} -I${dir}/src \"\n     }\n-    set odir_v2 [lookfor_file ${gccpath} libstdc++]\n-    set sdir_v2 [lookfor_file ${srcdir} libstdc++]\n-    if { ${odir_v2} != \"\" } {\n-      append flags \"-I${sdir_v2} -I${sdir_v2}/stl \"\n-    } else {\n+\n+    set gccpath [get_multilibs]\n+\n+    if { ${HAVE_LIBSTDCXX_V3} } {\n       set odir_v3 [lookfor_file ${gccpath} libstdc++-v3]\n       set sdir_v3 [lookfor_file ${srcdir} libstdc++-v3]\n-      if { ${odir_v3} != \"\" } {\n-        append flags [exec ${odir_v3}/mkcheck 2 ${odir_v3} ${sdir_v3}]\n-      }\n-      # else we're probably testing an already-installed GCC.\n+      append flags [exec ${odir_v3}/mkcheck 2 ${odir_v3} ${sdir_v3}]\n+    } else {\n+      set odir_v2 [lookfor_file ${gccpath} libstdc++]\n+      set sdir_v2 [lookfor_file ${srcdir} libstdc++]\n+      append flags \"-I${sdir_v2} -I${sdir_v2}/stl \"\n     }\n \n     return \"$flags\""}, {"sha": "b1c0457498fbc0c61e931742ce44b984c04814a1", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -1,3 +1,12 @@\n+2000-10-25  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* Makefile.in (check): Don't make mkcheck executable.\n+\t(check-install): Likewise.\n+\t* configure.in (AC_OUTPUT): Make mkcheck executable.\n+\t* mkcheck.in (top_srcdir): New variable.\n+\t(INC_PATH): Set the path to the backward and ext directories\n+\tcorrectly.\n+\t\n 2000-10-25  Phil Edwards  <pme@sources.redhat.com>\n \n         * configure.in:  Check for gconv.h."}, {"sha": "793b83c51591bb786c9d97f0727ae85b41f29bcf", "filename": "libstdc++-v3/Makefile.in", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FMakefile.in?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -1,6 +1,6 @@\n # Makefile.in generated automatically by automake 1.4 from Makefile.am\n \n-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.\n+# Copyright (C) 1994, 1995-8, 1999, 2000 Free Software Foundation, Inc.\n # This Makefile.in is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n@@ -407,11 +407,9 @@ mostlyclean distclean maintainer-clean\n # because then the paths will be full pathnames, not relative\n # pathnames. (-Wl,--rpath seems to like this better.)\n check:  $(top_builddir)/mkcheck\n-\tchmod +x  $(top_builddir)/mkcheck\n \t$(top_builddir)/mkcheck 0 `pwd` $(top_srcdir)\n \n check-install: $(top_builddir)/mkcheck\n-\tchmod +x  $(top_builddir)/mkcheck\n \t$(top_builddir)/mkcheck 1 `pwd` $(top_srcdir) $(prefix)\n \n # Multilib Makefile bits."}, {"sha": "6a97f8b31ac87a0c59f619a3e89cbd9f6b0cad46", "filename": "libstdc++-v3/aclocal.m4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Faclocal.m4?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -1,6 +1,6 @@\n dnl aclocal.m4 generated automatically by aclocal 1.4\n \n-dnl Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.\n+dnl Copyright (C) 1994, 1995-8, 1999, 2000 Free Software Foundation, Inc.\n dnl This file is free software; the Free Software Foundation\n dnl gives unlimited permission to copy and/or distribute it,\n dnl with or without modifications, as long as this notice is preserved."}, {"sha": "dda142fc13a699bb39e1398ae2a1de9afbe1fab2", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -19327,6 +19327,8 @@ if test -n \"$CONFIG_FILES\"; then\n   ac_file=Makefile . ${glibcpp_basedir}/../config-ml.in\n   grep '^MULTISUBDIR =' Makefile >> src/Makefile\n fi\n+chmod +x mkcheck\n+\n exit 0\n EOF\n chmod +x $CONFIG_STATUS"}, {"sha": "43156719c4bb05e3a217b89a2fac2073ae7b449c", "filename": "libstdc++-v3/configure.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.in?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -223,7 +223,9 @@ AC_OUTPUT(mkcheck Makefile src/Makefile libmath/Makefile libio/Makefile libsupc+\n [if test -n \"$CONFIG_FILES\"; then\n   ac_file=Makefile . ${glibcpp_basedir}/../config-ml.in\n   grep '^MULTISUBDIR =' Makefile >> src/Makefile\n-fi],\n+fi\n+chmod +x mkcheck\n+],\n srcdir=${srcdir}\n host=${host}\n target=${target}"}, {"sha": "a2e4e15fc4c3fb2c0e1bd49369b3d4f4e77ed8b2", "filename": "libstdc++-v3/mkcheck.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Fmkcheck.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5aeb60d6119dc21c991751fb47dfdcd657f3c0/libstdc%2B%2B-v3%2Fmkcheck.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fmkcheck.in?ref=be5aeb60d6119dc21c991751fb47dfdcd657f3c0", "patch": "@@ -54,6 +54,7 @@ if [ $WHICH -eq 1 ]; then\n fi\n \n # INC_PATH == include path to new headers for use on gcc command-line\n+top_srcdir=@top_srcdir@\n C_DIR=\"`basename @C_INCLUDE_DIR@`\"\n if [ $WHICH != \"1\" ]; then\n   INC_PATH=\"@CSHADOW_FLAGS@ -I$BUILD_DIR -I$BUILD_DIR/libio \\\n@@ -65,7 +66,7 @@ elif [ $WHICH -eq 1 ]; then\n fi\n \n if [ $WHICH -eq 2 ]; then\n-  echo $INC_PATH -I$SRC_DIR/backward -I$SRC_DIR/ext\n+  echo $INC_PATH -I$SRC_DIR/include/backward -I$SRC_DIR/include/ext\n   exit 0;\n fi\n "}]}