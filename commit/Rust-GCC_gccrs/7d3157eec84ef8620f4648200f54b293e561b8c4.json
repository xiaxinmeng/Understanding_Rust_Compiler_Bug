{"sha": "7d3157eec84ef8620f4648200f54b293e561b8c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QzMTU3ZWVjODRlZjg2MjBmNDY0ODIwMGY1NGIyOTNlNTYxYjhjNA==", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-06-21T09:33:55Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-06-21T09:33:55Z"}, "message": "Merge #513\n\n513: Fix up test suite buglets r=philberty a=tromey\n\nMark Wielaard pointed out that the i8u8.rs test that I recently\r\nintroduced has a bug: it checks the DW_AT_language attribute, not\r\nDW_AT_encoding.\r\n\r\nSorry about this.\r\n\r\nThis patch fixes this problem.  I've verified that this notices the\r\nfailure after temporarily backing out the corresponding GCC change.\r\n\r\nThis patch also fixes another problem that he found, namely that it's\r\npossible for these tests to find the wrong answer, because the hex\r\nvalue that is checked for might be a prefix of some longer value.\r\nThis patch also adds a whitespace check to avoid this potential\r\nproblem.\r\n\n\nCo-authored-by: Tom Tromey <tom@tromey.com>", "tree": {"sha": "ea151c53744428c8ae9984bac03e25c279e0b533", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea151c53744428c8ae9984bac03e25c279e0b533"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d3157eec84ef8620f4648200f54b293e561b8c4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg0F0DCRBK7hj4Ov3rIwAA0MUIAH1Obzp67G4OHAPGWsZrYSuD\nVlSDQUbBXeoHu6EK3lrZfAxjCNJ6U1aN3p8PDhWKSeIv60Ttt+RTIqtO2xURc50b\njZdaWtqq0BVrnXBU2g7Rc9vmrZDR4le039cVnlEx4EVEBWUDlqH/hJ+JoazciXYb\nFmQvs1q38vR1wuRi2RelBtoR/yevWvP5fnph3lCdOA5MFcnz1qCS4H5JCoxPunAG\n8oAg8j+wSxMO6CURrMAoT5ubzFGYohuzd0/mBK9EWJ1DtHKEaUOlg7FurcMEaOzq\nukbRxS91lXP1wrf8Jkzk72X9Cf8nX61XKSSx8pcr/0cIZXLbAS4wK+770qXQ4qU=\n=MeiT\n-----END PGP SIGNATURE-----\n", "payload": "tree ea151c53744428c8ae9984bac03e25c279e0b533\nparent 8528f4b25f59cf10c093715d56f7a37c4ab6b732\nparent 485f4cf7a672b66c1a15c6bdf275f2f06c173f56\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1624268035 +0000\ncommitter GitHub <noreply@github.com> 1624268035 +0000\n\nMerge #513\n\n513: Fix up test suite buglets r=philberty a=tromey\n\nMark Wielaard pointed out that the i8u8.rs test that I recently\r\nintroduced has a bug: it checks the DW_AT_language attribute, not\r\nDW_AT_encoding.\r\n\r\nSorry about this.\r\n\r\nThis patch fixes this problem.  I've verified that this notices the\r\nfailure after temporarily backing out the corresponding GCC change.\r\n\r\nThis patch also fixes another problem that he found, namely that it's\r\npossible for these tests to find the wrong answer, because the hex\r\nvalue that is checked for might be a prefix of some longer value.\r\nThis patch also adds a whitespace check to avoid this potential\r\nproblem.\r\n\n\nCo-authored-by: Tom Tromey <tom@tromey.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d3157eec84ef8620f4648200f54b293e561b8c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d3157eec84ef8620f4648200f54b293e561b8c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d3157eec84ef8620f4648200f54b293e561b8c4/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8528f4b25f59cf10c093715d56f7a37c4ab6b732", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8528f4b25f59cf10c093715d56f7a37c4ab6b732", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8528f4b25f59cf10c093715d56f7a37c4ab6b732"}, {"sha": "485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/485f4cf7a672b66c1a15c6bdf275f2f06c173f56"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "69e7ab0b17f0854651649b6ea8fc473f31ebd4b8", "filename": "gcc/testsuite/rust/debug/chartype.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Fchartype.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Fchartype.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Fchartype.rs?ref=7d3157eec84ef8620f4648200f54b293e561b8c4", "patch": "@@ -6,5 +6,5 @@ fn main () {\n // DW_ATE_UTF entered in DWARF 4.\n // { dg-options \"-w -gdwarf-4 -dA\" }\n // DW_ATE_UTF = 0x10\n-// { dg-final { scan-assembler \"0x10\\[^\\n\\r]* DW_AT_encoding\" } } */\n+// { dg-final { scan-assembler \"0x10\\[ \\t]\\[^\\n\\r]* DW_AT_encoding\" } } */\n }"}, {"sha": "1cd21a4a8ffc70a69480596c40e7149810be63c3", "filename": "gcc/testsuite/rust/debug/i8u8.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Fi8u8.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Fi8u8.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Fi8u8.rs?ref=7d3157eec84ef8620f4648200f54b293e561b8c4", "patch": "@@ -6,7 +6,7 @@ fn main () {\n // Use -w to avoid warnings about the unused variables\n // { dg-options \"-w -g -dA\" }\n // DW_ATE_signed_char = 6\n-// { dg-final { scan-assembler-not \"0x6\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler-not \"0x6\\[ \\t]\\[^\\n\\r]* DW_AT_encoding\" } } */\n // DW_ATE_unsigned_char = 8\n-// { dg-final { scan-assembler-not \"0x8\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler-not \"0x8\\[ \\t]\\[^\\n\\r]* DW_AT_encoding\" } } */\n }"}, {"sha": "12e0b587a02e4d1215539e5bf344cf789cf408fe", "filename": "gcc/testsuite/rust/debug/lang.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs?ref=7d3157eec84ef8620f4648200f54b293e561b8c4", "patch": "@@ -2,5 +2,5 @@ fn main () {\n // { dg-do compile }\n // { dg-options \"-gdwarf-5 -dA\" }\n // DW_LANG_Rust is 0x1c\n-// { dg-final { scan-assembler \"0x1c\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler \"0x1c\\[ \\t]\\[^\\n\\r]* DW_AT_language\" } } */\n }"}, {"sha": "ddacf0e43924d69ccb14a31f54ee8d3650545eaa", "filename": "gcc/testsuite/rust/debug/oldlang.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d3157eec84ef8620f4648200f54b293e561b8c4/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs?ref=7d3157eec84ef8620f4648200f54b293e561b8c4", "patch": "@@ -2,5 +2,5 @@ fn main () {\n // { dg-do compile }\n // { dg-options \"-gstrict-dwarf -gdwarf-3 -dA\" }\n // DW_LANG_Rust_old is 0x9000\n-// { dg-final { scan-assembler \"0x9000\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler \"0x9000\\[ \\t]\\[^\\n\\r]* DW_AT_language\" } } */\n }"}]}