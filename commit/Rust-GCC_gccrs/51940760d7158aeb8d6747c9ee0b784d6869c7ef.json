{"sha": "51940760d7158aeb8d6747c9ee0b784d6869c7ef", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTE5NDA3NjBkNzE1OGFlYjhkNjc0N2M5ZWUwYjc4NGQ2ODY5YzdlZg==", "commit": {"author": {"name": "Giuliano Belinassi", "email": "giuliano.belinassi@usp.br", "date": "2019-10-22T19:05:49Z"}, "committer": {"name": "Giuliano Belinassi", "email": "giulianob@gcc.gnu.org", "date": "2019-10-22T19:05:49Z"}, "message": "Fix incorrect merge of conflictant names in `dump_graphviz`\n\nWhen using lto-dump -callgraph with two or more .o files containing distinct\nfunctions with the same name, dump_graphviz incorrectly merged those functions\ninto a single node. This patch fixes this issue by calling `dump_name` instead\nof `name`, therefore concat'ing the function name with the node's id.\n\nTo understeand what was the issue, let's say you have two files:\n\na.c: static void foo (void) { do_something (); }\n\nb.c: static void foo (void) { do_something_else (); }\n\nThese are distinct functions and should be represented as distinct nodes in the\ncallgraph dump.\n\n2019-10-22  Giuliano Belinassi  <giuliano.belinassi@usp.br>\n\n\t* cgraph.c (dump_graphviz): Change name to dump_name\n\nFrom-SVN: r277299", "tree": {"sha": "993abc2f50f8beb33742c5dff8d85c752ee51746", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/993abc2f50f8beb33742c5dff8d85c752ee51746"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/51940760d7158aeb8d6747c9ee0b784d6869c7ef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51940760d7158aeb8d6747c9ee0b784d6869c7ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51940760d7158aeb8d6747c9ee0b784d6869c7ef", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51940760d7158aeb8d6747c9ee0b784d6869c7ef/comments", "author": null, "committer": null, "parents": [{"sha": "ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "f3450eea61780c581ebd2fef48c5e8b2795f4acc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51940760d7158aeb8d6747c9ee0b784d6869c7ef/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51940760d7158aeb8d6747c9ee0b784d6869c7ef/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=51940760d7158aeb8d6747c9ee0b784d6869c7ef", "patch": "@@ -1,3 +1,7 @@\n+2019-10-22  Giuliano Belinassi  <giuliano.belinassi@usp.br>\n+\n+\t* cgraph.c (dump_graphviz): Change name to dump_name\n+\n 2019-10-22  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* config/arm/arm.md (rsbsi_carryin_reg): New pattern."}, {"sha": "671306db5ca4048fae668c22c37b56a51e117801", "filename": "gcc/cgraph.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51940760d7158aeb8d6747c9ee0b784d6869c7ef/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51940760d7158aeb8d6747c9ee0b784d6869c7ef/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=51940760d7158aeb8d6747c9ee0b784d6869c7ef", "patch": "@@ -2155,7 +2155,7 @@ cgraph_node::dump_graphviz (FILE *f)\n     {\n       cgraph_node *callee = edge->callee;\n \n-      fprintf (f, \"\\t\\\"%s\\\" -> \\\"%s\\\"\\n\", name (), callee->name ());\n+      fprintf (f, \"\\t\\\"%s\\\" -> \\\"%s\\\"\\n\", dump_name (), callee->dump_name ());\n     }\n }\n "}]}