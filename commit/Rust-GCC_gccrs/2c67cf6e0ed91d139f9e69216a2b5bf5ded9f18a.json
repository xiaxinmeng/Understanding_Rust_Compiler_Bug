{"sha": "2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM2N2NmNmUwZWQ5MWQxMzlmOWU2OTIxNmEyYjViZjVkZWQ5ZjE4YQ==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2011-05-03T15:52:20Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2011-05-03T15:52:20Z"}, "message": "stormy16 (xstormy16_init_builtins): Call build_function_type_list instead of build_function_type.\n\n\t* config/stormy16/stormy16 (xstormy16_init_builtins): Call\n\tbuild_function_type_list instead of build_function_type.\n\tRearrange initialization of `args' to do so.\n\nFrom-SVN: r173321", "tree": {"sha": "173156979ce67b7a8fa8c28b3e6b2fc7c7923132", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/173156979ce67b7a8fa8c28b3e6b2fc7c7923132"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a/comments", "author": null, "committer": null, "parents": [{"sha": "f9ac28ad2ced981a32734766949a3d608f6538e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9ac28ad2ced981a32734766949a3d608f6538e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9ac28ad2ced981a32734766949a3d608f6538e3"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "6817e7b13b5b4321219fd9a57a783bbc4e2ac588", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a", "patch": "@@ -1,3 +1,9 @@\n+2011-05-03  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* config/stormy16/stormy16 (xstormy16_init_builtins): Call\n+\tbuild_function_type_list instead of build_function_type.\n+\tRearrange initialization of `args' to do so.\n+\n 2011-05-03  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* config/i386/i386.c (ix86_code_end): Call build_function_type_list"}, {"sha": "1a90e16da08f355e1a60f08561befbd6c39e2104", "filename": "gcc/config/stormy16/stormy16.c", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a/gcc%2Fconfig%2Fstormy16%2Fstormy16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a/gcc%2Fconfig%2Fstormy16%2Fstormy16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16.c?ref=2c67cf6e0ed91d139f9e69216a2b5bf5ded9f18a", "patch": "@@ -2255,15 +2255,21 @@ static struct\n static void\n xstormy16_init_builtins (void)\n {\n-  tree args, ret_type, arg;\n-  int i, a;\n+  tree args[2], ret_type, arg = NULL_TREE, ftype;\n+  int i, a, n_args;\n \n   ret_type = void_type_node;\n \n   for (i = 0; s16builtins[i].name; i++)\n     {\n-      args = void_list_node;\n-      for (a = strlen (s16builtins[i].arg_types) - 1; a >= 0; a--)\n+      n_args = strlen (s16builtins[i].arg_types) - 1;\n+\n+      gcc_assert (n_args <= (int) ARRAY_SIZE (args));\n+\n+      for (a = n_args; a >= 0; a--)\n+\targs[a] = NULL_TREE;\n+\n+      for (a = n_args; a >= 0; a--)\n \t{\n \t  switch (s16builtins[i].arg_types[a])\n \t    {\n@@ -2276,10 +2282,10 @@ xstormy16_init_builtins (void)\n \t  if (a == 0)\n \t    ret_type = arg;\n \t  else\n-\t    args = tree_cons (NULL_TREE, arg, args);\n+\t    args[a-1] = arg;\n \t}\n-      add_builtin_function (s16builtins[i].name,\n-\t\t\t    build_function_type (ret_type, args),\n+      ftype = build_function_type_list (ret_type, arg[0], arg[1], NULL_TREE);\n+      add_builtin_function (s16builtins[i].name, ftype,\n \t\t\t    i, BUILT_IN_MD, NULL, NULL);\n     }\n }"}]}