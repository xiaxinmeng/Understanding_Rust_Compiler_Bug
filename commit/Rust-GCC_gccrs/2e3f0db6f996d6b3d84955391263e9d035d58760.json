{"sha": "2e3f0db6f996d6b3d84955391263e9d035d58760", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmUzZjBkYjZmOTk2ZDZiM2Q4NDk1NTM5MTI2M2U5ZDAzNWQ1ODc2MA==", "commit": {"author": {"name": "Dale Johannesen", "email": "dalej@apple.com", "date": "2005-06-10T01:16:52Z"}, "committer": {"name": "Dale Johannesen", "email": "dalej@gcc.gnu.org", "date": "2005-06-10T01:16:52Z"}, "message": "i386.c (optimization_options): Make -fno-math-errno the default on Darwin.\n\n2005-06-09  Dale Johannesen  <dalej@apple.com>\n\n        * config/i386/i386.c (optimization_options):  Make -fno-math-errno\n        the default on Darwin.\n        * config/rs6000/rs6000.c (optimization_options):  Ditto.\n        * doc/invoke.texi (-fno-math-errno): Document.\n\n2005-06-09  Dale Johannesen  <dalej@apple.com>\n\n        * config/rs6000/rs6000.c (TARGET_INSN_VALID_WITHIN_DOLOOP):\n        Change to TARGET_INVALID_WITHIN_DOLOOP.\n\nFrom-SVN: r100813", "tree": {"sha": "be41b63edfaa93227ab09b71f4485a27df0f3511", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be41b63edfaa93227ab09b71f4485a27df0f3511"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e3f0db6f996d6b3d84955391263e9d035d58760", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e3f0db6f996d6b3d84955391263e9d035d58760", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e3f0db6f996d6b3d84955391263e9d035d58760", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e3f0db6f996d6b3d84955391263e9d035d58760/comments", "author": null, "committer": null, "parents": [{"sha": "e94412761a952781f4b29043a8f11e8b53a9e159", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e94412761a952781f4b29043a8f11e8b53a9e159", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e94412761a952781f4b29043a8f11e8b53a9e159"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "b91d5d064bfded06942f3695d937255cfcc45aa8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2e3f0db6f996d6b3d84955391263e9d035d58760", "patch": "@@ -1,3 +1,15 @@\n+2005-06-09  Dale Johannesen  <dalej@apple.com>\n+\n+\t* config/i386/i386.c (optimization_options):  Make -fno-math-errno\n+\tthe default on Darwin.\n+\t* config/rs6000/rs6000.c (optimization_options):  Ditto.\n+\t* doc/invoke.texi (-fno-math-errno): Document.\n+\n+2005-06-09  Dale Johannesen  <dalej@apple.com>\n+\n+\t* config/rs6000/rs6000.c (TARGET_INSN_VALID_WITHIN_DOLOOP):\n+\tChange to TARGET_INVALID_WITHIN_DOLOOP.\n+\n 2005-06-09  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/rs6000.md (eq): Convert to define_insn_and_split."}, {"sha": "8dd2d152dc77df2bf0006bd17fc45d91c73add6d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=2e3f0db6f996d6b3d84955391263e9d035d58760", "patch": "@@ -1636,6 +1636,11 @@ optimization_options (int level, int size ATTRIBUTE_UNUSED)\n     flag_schedule_insns = 0;\n #endif\n \n+  if (TARGET_MACHO)\n+    /* The Darwin libraries never set errno, so we might as well\n+       avoid calling them when that's the only reason we would.  */\n+    flag_errno_math = 0;\n+\n   /* The default values of these switches depend on the TARGET_64BIT\n      that is not known at this moment.  Mark these values with 2 and\n      let user the to override these.  In case there is no command line option"}, {"sha": "5aa2558d0fb1e7885d588e238cfd0200f3356068", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=2e3f0db6f996d6b3d84955391263e9d035d58760", "patch": "@@ -906,8 +906,8 @@ static const char alt_reg_names[][8] =\n #undef TARGET_FUNCTION_OK_FOR_SIBCALL\n #define TARGET_FUNCTION_OK_FOR_SIBCALL rs6000_function_ok_for_sibcall\n \n-#undef TARGET_INSN_VALID_WITHIN_DOLOOP\n-#define TARGET_INSN_VALID_WITHIN_DOLOOP rs6000_invalid_within_doloop\n+#undef TARGET_INVALID_WITHIN_DOLOOP\n+#define TARGET_INVALID_WITHIN_DOLOOP rs6000_invalid_within_doloop\n \n #undef TARGET_RTX_COSTS\n #define TARGET_RTX_COSTS rs6000_rtx_costs\n@@ -1543,6 +1543,10 @@ rs6000_parse_tls_size_option (void)\n void\n optimization_options (int level ATTRIBUTE_UNUSED, int size ATTRIBUTE_UNUSED)\n {\n+  if (DEFAULT_ABI == ABI_DARWIN)\n+    /* The Darwin libraries never set errno, so we might as well\n+       avoid calling them when that's the only reason we would.  */\n+    flag_errno_math = 0;\n }\n \n /* Implement TARGET_HANDLE_OPTION.  */"}, {"sha": "8b12244b828d17f1f976b7b5d65b9687c0fc4d6e", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3f0db6f996d6b3d84955391263e9d035d58760/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=2e3f0db6f996d6b3d84955391263e9d035d58760", "patch": "@@ -5331,6 +5331,10 @@ math functions.\n \n The default is @option{-fmath-errno}.\n \n+On Darwin systems, the math library never sets @code{errno}.  There is therefore\n+no reason for the compiler to consider the possibility that it might,\n+and @option{-fno-math-errno} is the default.\n+\n @item -funsafe-math-optimizations\n @opindex funsafe-math-optimizations\n Allow optimizations for floating-point arithmetic that (a) assume"}]}