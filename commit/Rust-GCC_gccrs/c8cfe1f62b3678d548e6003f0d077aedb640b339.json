{"sha": "c8cfe1f62b3678d548e6003f0d077aedb640b339", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzhjZmUxZjYyYjM2NzhkNTQ4ZTYwMDNmMGQwNzdhZWRiNjQwYjMzOQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-11T13:24:02Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-11T13:24:02Z"}, "message": "(add_to_delay_list): Clear any cached block information for INSN.\n\nFrom-SVN: r4084", "tree": {"sha": "2b551da989644d262baf0812d23613e4ea06bdb7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2b551da989644d262baf0812d23613e4ea06bdb7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c8cfe1f62b3678d548e6003f0d077aedb640b339", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8cfe1f62b3678d548e6003f0d077aedb640b339", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8cfe1f62b3678d548e6003f0d077aedb640b339", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8cfe1f62b3678d548e6003f0d077aedb640b339/comments", "author": null, "committer": null, "parents": [{"sha": "cbcf989d7f0543b2c391268bd625b6624c198608", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbcf989d7f0543b2c391268bd625b6624c198608", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbcf989d7f0543b2c391268bd625b6624c198608"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "47526fc9cfff2ad215806e6d1bc8d81d0a96aa71", "filename": "gcc/reorg.c", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8cfe1f62b3678d548e6003f0d077aedb640b339/gcc%2Freorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8cfe1f62b3678d548e6003f0d077aedb640b339/gcc%2Freorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freorg.c?ref=c8cfe1f62b3678d548e6003f0d077aedb640b339", "patch": "@@ -879,9 +879,24 @@ add_to_delay_list (insn, delay_list)\n      rtx insn;\n      rtx delay_list;\n {\n-  /* If we have an empty list, just make a new list element.  */\n+  /* If we have an empty list, just make a new list element.  If\n+     INSN has it's block number recorded, clear it since we may\n+     be moving the insn to a new block.  */\n+\n   if (delay_list == 0)\n-    return gen_rtx (INSN_LIST, VOIDmode, insn, NULL_RTX);\n+    {\n+      struct target_info *tinfo;\n+      \n+      for (tinfo = target_hash_table[INSN_UID (insn) % TARGET_HASH_PRIME];\n+\t   tinfo; tinfo = tinfo->next)\n+\tif (tinfo->uid == INSN_UID (insn))\n+\t  break;\n+\n+      if (tinfo)\n+\ttinfo->block = -1;\n+\n+      return gen_rtx (INSN_LIST, VOIDmode, insn, NULL_RTX);\n+    }\n \n   /* Otherwise this must be an INSN_LIST.  Add INSN to the end of the\n      list.  */"}]}