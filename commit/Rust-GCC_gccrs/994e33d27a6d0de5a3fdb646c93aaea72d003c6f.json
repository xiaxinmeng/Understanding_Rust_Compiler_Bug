{"sha": "994e33d27a6d0de5a3fdb646c93aaea72d003c6f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTk0ZTMzZDI3YTZkMGRlNWEzZmRiNjQ2YzkzYWFlYTcyZDAwM2M2Zg==", "commit": {"author": {"name": "Claire Dross", "email": "dross@adacore.com", "date": "2019-09-17T08:03:02Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-09-17T08:03:02Z"}, "message": "[Ada] Add Remove primitive on functional maps\n\nA primitive for removing a mapping from a functional map has been added.\n\n2019-09-17  Claire Dross  <dross@adacore.com>\n\ngcc/ada/\n\n\t* libgnat/a-cofuma.ads, libgnat/a-cofuma.adb (Remove): New\n\tfunction which returns a copy of the input container without a\n\tgiven mapping.\n\nFrom-SVN: r275797", "tree": {"sha": "f4cb6dfbc1e9d2b6229a07d17af5224a9aae99a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f4cb6dfbc1e9d2b6229a07d17af5224a9aae99a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/994e33d27a6d0de5a3fdb646c93aaea72d003c6f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/994e33d27a6d0de5a3fdb646c93aaea72d003c6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/994e33d27a6d0de5a3fdb646c93aaea72d003c6f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/994e33d27a6d0de5a3fdb646c93aaea72d003c6f/comments", "author": {"login": "clairedross", "id": 8180017, "node_id": "MDQ6VXNlcjgxODAwMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8180017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clairedross", "html_url": "https://github.com/clairedross", "followers_url": "https://api.github.com/users/clairedross/followers", "following_url": "https://api.github.com/users/clairedross/following{/other_user}", "gists_url": "https://api.github.com/users/clairedross/gists{/gist_id}", "starred_url": "https://api.github.com/users/clairedross/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clairedross/subscriptions", "organizations_url": "https://api.github.com/users/clairedross/orgs", "repos_url": "https://api.github.com/users/clairedross/repos", "events_url": "https://api.github.com/users/clairedross/events{/privacy}", "received_events_url": "https://api.github.com/users/clairedross/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e34716b8dd8836a565b4cf0c26f7244161f194f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e34716b8dd8836a565b4cf0c26f7244161f194f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e34716b8dd8836a565b4cf0c26f7244161f194f1"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "b327857a8fee6078ab516316a10c3da3bd449662", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/994e33d27a6d0de5a3fdb646c93aaea72d003c6f/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/994e33d27a6d0de5a3fdb646c93aaea72d003c6f/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=994e33d27a6d0de5a3fdb646c93aaea72d003c6f", "patch": "@@ -1,3 +1,9 @@\n+2019-09-17  Claire Dross  <dross@adacore.com>\n+\n+\t* libgnat/a-cofuma.ads, libgnat/a-cofuma.adb (Remove): New\n+\tfunction which returns a copy of the input container without a\n+\tgiven mapping.\n+\n 2019-09-17  Yannick Moy  <moy@adacore.com>\n \n \t* libgnat/s-arit64.adb (Double_Divide): Correctly handle the"}, {"sha": "d963f6e623b6018489ba4a3a53fffaf9ef61a1e8", "filename": "gcc/ada/libgnat/a-cofuma.adb", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/994e33d27a6d0de5a3fdb646c93aaea72d003c6f/gcc%2Fada%2Flibgnat%2Fa-cofuma.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/994e33d27a6d0de5a3fdb646c93aaea72d003c6f/gcc%2Fada%2Flibgnat%2Fa-cofuma.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-cofuma.adb?ref=994e33d27a6d0de5a3fdb646c93aaea72d003c6f", "patch": "@@ -243,6 +243,18 @@ package body Ada.Containers.Functional_Maps with SPARK_Mode => Off is\n       return Length (Container.Elements);\n    end Length;\n \n+   ------------\n+   -- Remove --\n+   ------------\n+\n+   function Remove (Container : Map; Key : Key_Type) return Map is\n+      I : constant Extended_Index := Find (Container.Keys, Key);\n+   begin\n+      return\n+        (Keys     => Remove (Container.Keys, I),\n+         Elements => Remove (Container.Elements, I));\n+   end Remove;\n+\n    ---------------\n    -- Same_Keys --\n    ---------------"}, {"sha": "e458b06e77378c65737510b45f5929eb03a5657d", "filename": "gcc/ada/libgnat/a-cofuma.ads", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/994e33d27a6d0de5a3fdb646c93aaea72d003c6f/gcc%2Fada%2Flibgnat%2Fa-cofuma.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/994e33d27a6d0de5a3fdb646c93aaea72d003c6f/gcc%2Fada%2Flibgnat%2Fa-cofuma.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-cofuma.ads?ref=994e33d27a6d0de5a3fdb646c93aaea72d003c6f", "patch": "@@ -243,6 +243,20 @@ package Ada.Containers.Functional_Maps with SPARK_Mode is\n          and Container <= Add'Result\n          and Keys_Included_Except (Add'Result, Container, New_Key);\n \n+   function Remove\n+     (Container : Map;\n+      Key       : Key_Type) return Map\n+   --  Returns Container without any mapping for Key\n+\n+   with\n+     Global => null,\n+     Pre    => Has_Key (Container, Key),\n+     Post   =>\n+       Length (Container) = Length (Remove'Result) + 1\n+         and not Has_Key (Remove'Result, Key)\n+         and Remove'Result <= Container\n+         and Keys_Included_Except (Container, Remove'Result, Key);\n+\n    function Set\n      (Container : Map;\n       Key       : Key_Type;"}]}