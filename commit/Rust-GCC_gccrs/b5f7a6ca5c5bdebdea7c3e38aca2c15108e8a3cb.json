{"sha": "b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjVmN2E2Y2E1YzViZGViZGVhN2MzZTM4YWNhMmMxNTEwOGU4YTNjYg==", "commit": {"author": {"name": "Jack Howarth", "email": "howarth.at.gcc@gmail.com", "date": "2015-01-28T21:23:14Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "2015-01-28T21:23:14Z"}, "message": "re PR libgomp/64635 (darwin produces libgomp-plugin-host_nonshm.1.dylib but tries to load libgomp-plugin-host_nonshm.so.1)\n\n2015-01-28  Jack Howarth  <howarth.at.gcc@gmail.com>\n\n\tPR libgomp/64635\n\t* configure.tgt (*-*-aix*): Use config_path \"aix posix\".\n\t(*-*-darwin*): Use config_path \"bsd darwin posix\".\n\t(*-*-hpux*): Use config_path \"hpux posix\".\n\t* target.c: Add include of plugin-suffix.h and use\n\tSONAME_SUFFIX macro.\n\t* config/aix/plugin-suffix.h: New file.\n\t* config/darwin/plugin-suffix.h: New file.\n\t* config/hpux/plugin-suffix.h: New file.\n\t* config/posix/plugin-suffix.h: New file.\n\nFrom-SVN: r220218", "tree": {"sha": "184f01104b6f7c1b0e1f0834f1f1caba8376a5e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/184f01104b6f7c1b0e1f0834f1f1caba8376a5e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/comments", "author": null, "committer": null, "parents": [{"sha": "c761dca15efdd733a1488be40dfccc5a55811c04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c761dca15efdd733a1488be40dfccc5a55811c04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c761dca15efdd733a1488be40dfccc5a55811c04"}], "stats": {"total": 101, "additions": 99, "deletions": 2}, "files": [{"sha": "7e7c36ba55b632bd89a9d0a3b055baf9dd40f27e", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "patch": "@@ -1,3 +1,16 @@\n+2015-01-28  Jack Howarth  <howarth.at.gcc@gmail.com>\n+\n+\tPR libgomp/64635\n+\t* configure.tgt (*-*-aix*): Use config_path \"aix posix\".\n+\t(*-*-darwin*): Use config_path \"bsd darwin posix\".\n+\t(*-*-hpux*): Use config_path \"hpux posix\".\n+\t* target.c: Add include of plugin-suffix.h and use\n+\tSONAME_SUFFIX macro.\n+\t* config/aix/plugin-suffix.h: New file.\n+\t* config/darwin/plugin-suffix.h: New file.\n+\t* config/hpux/plugin-suffix.h: New file.\n+\t* config/posix/plugin-suffix.h: New file.\n+\n 2015-01-23  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/64734"}, {"sha": "e329b04bcc4c897229a4621c9cbd0433d55428b0", "filename": "libgomp/config/darwin/plugin-suffix.h", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfig%2Fdarwin%2Fplugin-suffix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfig%2Fdarwin%2Fplugin-suffix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfig%2Fdarwin%2Fplugin-suffix.h?ref=b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "patch": "@@ -0,0 +1,26 @@\n+/* Copyright (C) 2015 Free Software Foundation, Inc.\n+   Contributed by Jack Howarth <howarth.at.gcc@gmail.com>\n+\n+   This file is part of the GNU Offloading and Multi Processing Library\n+   (libgomp).\n+\n+   Libgomp is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+   more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#define SONAME_SUFFIX(n) (\".\" #n \".dylib\")"}, {"sha": "2709e0e1a6634c99f374e40554c3d0ada6ecedbb", "filename": "libgomp/config/hpux/plugin-suffix.h", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfig%2Fhpux%2Fplugin-suffix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfig%2Fhpux%2Fplugin-suffix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfig%2Fhpux%2Fplugin-suffix.h?ref=b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "patch": "@@ -0,0 +1,26 @@\n+/* Copyright (C) 2015 Free Software Foundation, Inc.\n+   Contributed by Jack Howarth <howarth.at.gcc@gmail.com>\n+\n+   This file is part of the GNU Offloading and Multi Processing Library\n+   (libgomp).\n+\n+   Libgomp is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+   more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#define SONAME_SUFFIX(n) (\".sl.\" #n)"}, {"sha": "31a7ce196d9b9e87b6a73fb7cbe36febd8f8b716", "filename": "libgomp/config/posix/plugin-suffix.h", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfig%2Fposix%2Fplugin-suffix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfig%2Fposix%2Fplugin-suffix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfig%2Fposix%2Fplugin-suffix.h?ref=b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "patch": "@@ -0,0 +1,26 @@\n+/* Copyright (C) 2015 Free Software Foundation, Inc.\n+   Contributed by Jack Howarth <howarth.at.gcc@gmail.com>\n+\n+   This file is part of the GNU Offloading and Multi Processing Library\n+   (libgomp).\n+\n+   Libgomp is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+   more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#define SONAME_SUFFIX(n) (\".so.\" #n)"}, {"sha": "7c06450e0dbed179a66560480998cfe7188c9d9b", "filename": "libgomp/configure.tgt", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure.tgt?ref=b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "patch": "@@ -113,6 +113,7 @@ fi\n case \"${target}\" in\n \n   *-*-hpux*)\n+\tconfig_path=\"hpux posix\"\n \tcase \"${target}\" in\n \t  *-*-hpux11*)\n \t     # HPUX v11.x requires -lrt to resolve sem_init in libgomp.la\n@@ -132,14 +133,18 @@ case \"${target}\" in\n \t;;\n \n   *-*-darwin*)\n-\tconfig_path=\"bsd posix\"\n+\tconfig_path=\"bsd darwin posix\"\n \t;;\n \n   *-*-freebsd*)\n \t# Need to link with -lpthread so libgomp.so is self-contained.\n \tXLDFLAGS=\"${XLDFLAGS} -lpthread\"\n \t;;\n \n+  *-*-aix*)\n+\tconfig_path=\"aix posix\"\n+\t;;\n+\n   *)\n \t;;\n "}, {"sha": "73e757a9ec1087255455dea5e58176e236035937", "filename": "libgomp/target.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Ftarget.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb/libgomp%2Ftarget.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftarget.c?ref=b5f7a6ca5c5bdebdea7c3e38aca2c15108e8a3cb", "patch": "@@ -38,6 +38,7 @@\n \n #ifdef PLUGIN_SUPPORT\n #include <dlfcn.h>\n+#include \"plugin-suffix.h\"\n #endif\n \n static void gomp_target_init (void);\n@@ -1054,7 +1055,7 @@ static void\n gomp_target_init (void)\n {\n   const char *prefix =\"libgomp-plugin-\";\n-  const char *suffix = \".so.1\";\n+  const char *suffix = SONAME_SUFFIX (1);\n   const char *cur, *next;\n   char *plugin_name;\n   int i, new_num_devices;"}]}