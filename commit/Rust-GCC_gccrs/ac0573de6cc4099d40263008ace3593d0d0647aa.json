{"sha": "ac0573de6cc4099d40263008ace3593d0d0647aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWMwNTczZGU2Y2M0MDk5ZDQwMjYzMDA4YWNlMzU5M2QwZDA2NDdhYQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2019-12-03T20:29:35Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2019-12-03T20:29:35Z"}, "message": "ipa-fnsummary.c: Include tree-into-ssa.h.\n\n\n\n\t* ipa-fnsummary.c: Include tree-into-ssa.h.\n\t(compute_fn_summary): Call update_ssa.\n\nFrom-SVN: r278946", "tree": {"sha": "253281be4145c192245a81de51e6fc654d19edd9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/253281be4145c192245a81de51e6fc654d19edd9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac0573de6cc4099d40263008ace3593d0d0647aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac0573de6cc4099d40263008ace3593d0d0647aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac0573de6cc4099d40263008ace3593d0d0647aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac0573de6cc4099d40263008ace3593d0d0647aa/comments", "author": null, "committer": null, "parents": [{"sha": "ee1de08d4d22648cf3168caa60e283135755da85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee1de08d4d22648cf3168caa60e283135755da85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee1de08d4d22648cf3168caa60e283135755da85"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "cffe0fb58a917a20d7187ae5c7e46c4e615c91f0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac0573de6cc4099d40263008ace3593d0d0647aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac0573de6cc4099d40263008ace3593d0d0647aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ac0573de6cc4099d40263008ace3593d0d0647aa", "patch": "@@ -1,3 +1,8 @@\n+2019-12-03  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* ipa-fnsummary.c: Include tree-into-ssa.h.\n+\t(compute_fn_summary): Call update_ssa.\n+\n 2019-12-03  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* cgraph.c (cgraph_node::verify_node): Check that calls_comdat_local"}, {"sha": "a46b1445765f7001d43e831ef7c8c692810756fe", "filename": "gcc/ipa-fnsummary.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac0573de6cc4099d40263008ace3593d0d0647aa/gcc%2Fipa-fnsummary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac0573de6cc4099d40263008ace3593d0d0647aa/gcc%2Fipa-fnsummary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-fnsummary.c?ref=ac0573de6cc4099d40263008ace3593d0d0647aa", "patch": "@@ -82,6 +82,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"gimplify.h\"\n #include \"stringpool.h\"\n #include \"attribs.h\"\n+#include \"tree-into-ssa.h\"\n \n /* Summaries.  */\n fast_function_summary <ipa_fn_summary *, va_gc> *ipa_fn_summaries;\n@@ -2891,6 +2892,10 @@ compute_fn_summary (struct cgraph_node *node, bool early)\n        /* Even is_gimple_min_invariant rely on current_function_decl.  */\n        push_cfun (DECL_STRUCT_FUNCTION (node->decl));\n \n+       /* During IPA profile merging we may be called w/o virtual SSA form\n+\t  built.  */\n+       update_ssa (TODO_update_ssa_only_virtuals);\n+\n        /* Can this function be inlined at all?  */\n        if (!opt_for_fn (node->decl, optimize)\n \t   && !lookup_attribute (\"always_inline\","}]}