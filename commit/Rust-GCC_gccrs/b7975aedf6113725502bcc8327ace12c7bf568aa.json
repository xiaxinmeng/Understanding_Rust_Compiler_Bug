{"sha": "b7975aedf6113725502bcc8327ace12c7bf568aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjc5NzVhZWRmNjExMzcyNTUwMmJjYzgzMjdhY2UxMmM3YmY1NjhhYQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1999-03-10T17:58:08Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-03-10T17:58:08Z"}, "message": "semantics.c (begin_class_definition): Call build_self_reference.\n\n\t* semantics.c (begin_class_definition): Call build_self_reference.\n\t(finish_member_declaration): Set DECL_CONTEXT for TYPE_DECLs.\n\nFrom-SVN: r25672", "tree": {"sha": "0051d4dcb001b40feda8bab18279561ee87c825a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0051d4dcb001b40feda8bab18279561ee87c825a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7975aedf6113725502bcc8327ace12c7bf568aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7975aedf6113725502bcc8327ace12c7bf568aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7975aedf6113725502bcc8327ace12c7bf568aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7975aedf6113725502bcc8327ace12c7bf568aa/comments", "author": null, "committer": null, "parents": [{"sha": "1e61a9d9525b97af480e78ce0d6effbcf2386edd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e61a9d9525b97af480e78ce0d6effbcf2386edd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e61a9d9525b97af480e78ce0d6effbcf2386edd"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "2c7eace4e641c7c919aa0e612dcbc9248c61766a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7975aedf6113725502bcc8327ace12c7bf568aa/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7975aedf6113725502bcc8327ace12c7bf568aa/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b7975aedf6113725502bcc8327ace12c7bf568aa", "patch": "@@ -1,5 +1,8 @@\n 1999-03-10  Mark Mitchell  <mark@markmitchell.com>\n \n+\t* semantics.c (begin_class_definition): Call build_self_reference.\n+\t(finish_member_declaration): Set DECL_CONTEXT for TYPE_DECLs.\n+\n \t* search.c (assert_canonical_unmarked): Fix typo in prototype.\n \n \t* search.c (dfs_canonical_queue): New function."}, {"sha": "6471fd15866f43f27be49a1a783b3294c496becb", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7975aedf6113725502bcc8327ace12c7bf568aa/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7975aedf6113725502bcc8327ace12c7bf568aa/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=b7975aedf6113725502bcc8327ace12c7bf568aa", "patch": "@@ -1327,6 +1327,9 @@ begin_class_definition (t)\n      that we can get it back later.  */\n   begin_tree ();\n \n+  /* Make a declaration for this class in its own scope.  */\n+  build_self_reference ();\n+\n   return t;\n }\n \n@@ -1365,11 +1368,6 @@ finish_member_declaration (decl)\n        finish_struct.  Presumably it is already set as the function is\n        parsed.  Perhaps DECL_CLASS_CONTEXT is already set, too?  */\n     DECL_CLASS_CONTEXT (decl) = current_class_type;\n-  else if (TREE_CODE (decl) == TYPE_DECL)\n-    /* Historically, DECL_CONTEXT was not set for a TYPE_DECL in\n-       finish_struct, so we do not do it here either.  Perhaps we\n-       should, though.  */\n-      ;\n   else\n     DECL_CONTEXT (decl) = current_class_type;\n "}]}