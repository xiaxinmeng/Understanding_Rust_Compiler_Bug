{"sha": "c1361791ef590dd32aaff5c6d4c6561fb6e94cfb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzEzNjE3OTFlZjU5MGRkMzJhYWZmNWM2ZDRjNjU2MWZiNmU5NGNmYg==", "commit": {"author": {"name": "Brendan Kehoe", "email": "brendan@cygnus.com", "date": "1999-10-14T17:39:30Z"}, "committer": {"name": "Brendan Kehoe", "email": "brendan@gcc.gnu.org", "date": "1999-10-14T17:39:30Z"}, "message": "memcheck.exp: Make sure a remote host is equipped with driver.h and driver.o so it can...\n\n\t* execute/memcheck/memcheck.exp: Make sure a remote\n\thost is equipped with driver.h and driver.o so it can actually\n\tcompile and run the tests.\n\nFrom-SVN: r29982", "tree": {"sha": "5eed3adc1801565f22fa3fcc4b4fcc36f68f6a9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5eed3adc1801565f22fa3fcc4b4fcc36f68f6a9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb/comments", "author": null, "committer": null, "parents": [{"sha": "1ebadc609b97abf76eddff241200b4dcf8b10eb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ebadc609b97abf76eddff241200b4dcf8b10eb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ebadc609b97abf76eddff241200b4dcf8b10eb9"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "fec03d0bed4b002cb60b83a67c825cb88cba104c", "filename": "gcc/testsuite/gcc.c-torture/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb/gcc%2Ftestsuite%2Fgcc.c-torture%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb/gcc%2Ftestsuite%2Fgcc.c-torture%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2FChangeLog?ref=c1361791ef590dd32aaff5c6d4c6561fb6e94cfb", "patch": "@@ -1,3 +1,9 @@\n+1999-10-13  Brendan Kehoe  <brendan@cygnus.com>\n+\n+\t* execute/memcheck/memcheck.exp: Make sure a remote\n+\thost is equipped with driver.h and driver.o so it can actually\n+\tcompile and run the tests.\n+\n Fri Oct  8 18:46:11 1999  Bernd Schmidt  <bernds@cygnus.co.uk>\n \n \t* compile/991008-1.c: New test."}, {"sha": "29fb8975f6521c93faa3856be72b07225df5822a", "filename": "gcc/testsuite/gcc.c-torture/execute/memcheck/memcheck.exp", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fmemcheck%2Fmemcheck.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1361791ef590dd32aaff5c6d4c6561fb6e94cfb/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fmemcheck%2Fmemcheck.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fmemcheck%2Fmemcheck.exp?ref=c1361791ef590dd32aaff5c6d4c6561fb6e94cfb", "patch": "@@ -43,7 +43,29 @@ if $idx>=0 {\n } else {\n     error \"list can't find driver.c in $srcdir/$subdir\"\n }\n+\n+# Compiling driver.c on a remote host requires our ability to also\n+# find its driver.h header.\n+if [is_remote host] {\n+    remote_download host $srcdir/$subdir/driver.h\n+}\n+\n+#\n+#  Do the compile.\n+#\n gcc_target_compile $srcdir/$subdir/driver.c driver.o object {additional_flags=-w additional_flags=-g}\n+\n+# In target.exp:default_target_compile, we download the resulting a.out\n+# to our local driver.o file, and delete a.out on the host.  This doesn't\n+# work for this set of tests, since each test needs to link against driver.o.\n+# So, to get around this we put it back.  This was chosen instead of actually\n+# modifying target.exp to somehow provide the option to keep the file on\n+# the remote host, since there aren't yet (in late 1999) enough tests\n+# doing this to warrant the change. \n+if [is_remote host] {\n+    remote_download host driver.o\n+}\n+\n foreach src $tests {\n     # If we're only testing specific files and this isn't one of them, skip it.\n     if ![runtest_file_p $runtests $src] then {\n@@ -52,3 +74,9 @@ foreach src $tests {\n \n     c-torture-execute $src \"-fcheck-memory-usage driver.o\"\n }\n+\n+# Clean up after ourselves.\n+if [is_remote host] {\n+    remote_file host delete driver.o\n+}\n+"}]}