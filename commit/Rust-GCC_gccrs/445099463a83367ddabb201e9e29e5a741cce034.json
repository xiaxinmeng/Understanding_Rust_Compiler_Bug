{"sha": "445099463a83367ddabb201e9e29e5a741cce034", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQ1MDk5NDYzYTgzMzY3ZGRhYmIyMDFlOWUyOWU1YTc0MWNjZTAzNA==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2009-04-07T07:10:43Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@gcc.gnu.org", "date": "2009-04-07T07:10:43Z"}, "message": "config.gcc (sh-*-*): Add sysroot-suffix.h to tm_file.\n\n2009-04-07  Andrew Stubbs  <ams@codesourcery.com>\n\n\t* config.gcc (sh-*-*): Add sysroot-suffix.h to tm_file.\n\tAdd t-sysroot-suffix to tmake_file.\n\t* config/print-sysroot-suffix.sh: New file.\n\t* config/t-sysroot-suffix: New file.\n\nFrom-SVN: r145650", "tree": {"sha": "526ae7157e73d862c1134d52ac5d3f136108c3a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/526ae7157e73d862c1134d52ac5d3f136108c3a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/445099463a83367ddabb201e9e29e5a741cce034", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/445099463a83367ddabb201e9e29e5a741cce034", "html_url": "https://github.com/Rust-GCC/gccrs/commit/445099463a83367ddabb201e9e29e5a741cce034", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/445099463a83367ddabb201e9e29e5a741cce034/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ca22d882809dac6f2bf5d87edd0f16a1c0889ebe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca22d882809dac6f2bf5d87edd0f16a1c0889ebe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca22d882809dac6f2bf5d87edd0f16a1c0889ebe"}], "stats": {"total": 161, "additions": 161, "deletions": 0}, "files": [{"sha": "7219666f64cf2472a1e241f2fef67c89cb457000", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/445099463a83367ddabb201e9e29e5a741cce034/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/445099463a83367ddabb201e9e29e5a741cce034/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=445099463a83367ddabb201e9e29e5a741cce034", "patch": "@@ -1,3 +1,10 @@\n+2009-04-07  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* config.gcc (sh-*-*): Add sysroot-suffix.h to tm_file.\n+\tAdd t-sysroot-suffix to tmake_file.\n+\t* config/print-sysroot-suffix.sh: New file.\n+\t* config/t-sysroot-suffix: New file.\n+\n 2009-04-07  Ben Elliston  <bje@au.ibm.com>\n \n \t* libgcc2.c (INFINITY): Use __builtin_huge_val, not __builtin_inf,"}, {"sha": "ff94f8f07d2ac8eb6420ab96ac97f3d14b99952c", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/445099463a83367ddabb201e9e29e5a741cce034/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/445099463a83367ddabb201e9e29e5a741cce034/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=445099463a83367ddabb201e9e29e5a741cce034", "patch": "@@ -2139,6 +2139,8 @@ sh-*-symbianelf* | sh[12346l]*-*-symbianelf* | \\\n \tif test x${enable_incomplete_targets} = xyes ; then\n \t\ttm_defines=\"$tm_defines SUPPORT_SH1=1 SUPPORT_SH2E=1 SUPPORT_SH4=1 SUPPORT_SH4_SINGLE=1 SUPPORT_SH2A=1 SUPPORT_SH2A_SINGLE=1 SUPPORT_SH5_32MEDIA=1 SUPPORT_SH5_32MEDIA_NOFPU=1 SUPPORT_SH5_64MEDIA=1 SUPPORT_SH5_64MEDIA_NOFPU=1\"\n \tfi\n+\ttm_file=\"$tm_file ./sysroot-suffix.h\"\n+\ttmake_file=\"$tmake_file t-sysroot-suffix\"\n \t;;\n sh-*-rtems*)\n \ttmake_file=\"sh/t-sh sh/t-elf t-rtems sh/t-rtems\""}, {"sha": "55579ad864bc66975858fbc0668ea0572bb04997", "filename": "gcc/config/print-sysroot-suffix.sh", "status": "added", "additions": 145, "deletions": 0, "changes": 145, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/445099463a83367ddabb201e9e29e5a741cce034/gcc%2Fconfig%2Fprint-sysroot-suffix.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/445099463a83367ddabb201e9e29e5a741cce034/gcc%2Fconfig%2Fprint-sysroot-suffix.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fprint-sysroot-suffix.sh?ref=445099463a83367ddabb201e9e29e5a741cce034", "patch": "@@ -0,0 +1,145 @@\n+#! /bin/sh\n+# Script to generate SYSROOT_SUFFIX_SPEC equivalent to MULTILIB_OSDIRNAMES\n+# Arguments are MULTILIB_OSDIRNAMES, MULTILIB_OPTIONS and MULTILIB_MATCHES.\n+\n+# Copyright (C) 2009 Free Software Foundation, Inc.\n+\n+# This file is part of GCC.\n+\n+# GCC is free software; you can redistribute it and/or modify it under\n+# the terms of the GNU General Public License as published by the Free\n+# Software Foundation; either version 3, or (at your option) any later\n+# version.\n+\n+# GCC is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.  \n+\n+# This shell script produces a header file fragment that defines\n+# SYSROOT_SUFFIX_SPEC.  It assumes that the sysroots will have the same\n+# structure and names used by the multilibs.\n+\n+# Invocation:\n+#   print-sysroot-suffix.sh \\\n+#          MULTILIB_OSDIRNAMES \\\n+#          MULTILIB_OPTIONS \\\n+#          MULTILIB_MATCHES \\\n+#      > t-sysroot-suffix.h\n+\n+# The three options exactly correspond to the variables of the same\n+# names defined in the tmake_file fragments.\n+\n+# Example:\n+#   sh ./gcc/config/print-sysroot-suffix.sh \"a=A\" \"a b/c/d\" \"\"\n+# =>\n+#   #undef SYSROOT_SUFFIX_SPEC\n+#   #define SYSROOT_SUFFIX_SPEC \"\" \\\n+#   \"%{a:\" \\\n+#     \"%{b:A/b/;\" \\\n+#     \"c:A/c/;\" \\\n+#     \"d:A/d/;\" \\\n+#     \":A/};\" \\\n+#   \":}\"\n+\n+# The script uses temporary subscripts in order to permit a recursive\n+# algorithm without the use of functions.\n+\n+set -e\n+\n+dirnames=\"$1\"\n+options=\"$2\"\n+matches=\"$3\"\n+\n+cat > print-sysroot-suffix3.sh <<\\EOF\n+#! /bin/sh\n+# Print all the multilib matches for this option\n+result=\"$1\"\n+EOF\n+for x in $matches; do\n+  l=`echo $x | sed -e 's/=.*$//' -e 's/?/=/g'`\n+  r=`echo $x | sed -e 's/^.*=//' -e 's/?/=/g'`\n+  echo \"[ \\\"\\$1\\\" = \\\"$l\\\" ] && result=\\\"\\$result|$r\\\"\" >> print-sysroot-suffix3.sh\n+done\n+echo 'echo $result' >> print-sysroot-suffix3.sh\n+chmod +x print-sysroot-suffix3.sh\n+\n+cat > print-sysroot-suffix2.sh <<\\EOF\n+#! /bin/sh\n+# Recursive script to enumerate all multilib combinations, match against\n+# multilib directories and output a spec string of the result.\n+# Will fold identical trees.\n+\n+padding=\"$1\"\n+optstring=\"$2\"\n+shift 2\n+n=\"\\\" \\\\\n+$padding\\\"\"\n+if [ $# = 0 ]; then\n+EOF\n+\n+pat=\n+for x in $dirnames; do\n+  p=`echo $x | sed -e 's,=!,/$=/,'`\n+  pat=\"$pat -e 's=^//$p='\"\n+done\n+echo '  optstring=`echo \"/$optstring\" | sed '\"$pat\\`\" >> print-sysroot-suffix2.sh\n+cat >> print-sysroot-suffix2.sh <<\\EOF\n+  case $optstring in\n+  //*)\n+    ;;\n+  *)\n+    echo \"$optstring\"\n+    ;;\n+  esac\n+else\n+  thisopt=\"$1\"\n+  shift\n+  bit=\n+  lastcond=\n+  result=\n+  for x in `echo \"$thisopt\" | sed -e 's,/, ,g'`; do\n+    case $x in\n+EOF\n+for x in `echo \"$options\" | sed -e 's,/, ,g'`; do\n+  match=`./print-sysroot-suffix3.sh \"$x\"`\n+  echo \"$x) optmatch=\\\"$match\\\" ;;\" >> print-sysroot-suffix2.sh\n+done\n+cat >> print-sysroot-suffix2.sh <<\\EOF\n+    esac\n+    bit=`\"$0\" \"$padding  \" \"$optstring$x/\" \"$@\"`\n+    if [ -z \"$lastopt\" ]; then\n+      lastopt=\"$optmatch\"\n+    else\n+      if [ \"$lastbit\" = \"$bit\" ]; then\n+\tlastopt=\"$lastopt|$optmatch\"\n+      else\n+\tresult=\"$result$lastopt:$lastbit;$n\"\n+\tlastopt=\"$optmatch\"\n+      fi\n+    fi\n+    lastbit=\"$bit\"\n+  done\n+  bit=`\"$0\" \"$padding  \" \"$optstring\" \"$@\"`\n+  if [ \"$bit\" = \"$lastbit\" ]; then\n+    if [ -z \"$result\" ]; then\n+      echo \"$bit\"\n+    else\n+      echo \"$n%{$result:$bit}\"\n+    fi\n+  else\n+    echo \"$n%{$result$lastopt:$lastbit;$n:$bit}\"\n+  fi\n+fi\n+EOF\n+\n+chmod +x ./print-sysroot-suffix2.sh\n+result=`./print-sysroot-suffix2.sh \"\" \"/\" $options`\n+echo \"#undef SYSROOT_SUFFIX_SPEC\"\n+echo \"#define SYSROOT_SUFFIX_SPEC \\\"$result\\\"\"\n+rm print-sysroot-suffix2.sh\n+rm print-sysroot-suffix3.sh"}, {"sha": "08b4f949e3cbc981b7d340df094d6cbae57a7dd3", "filename": "gcc/config/t-sysroot-suffix", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/445099463a83367ddabb201e9e29e5a741cce034/gcc%2Fconfig%2Ft-sysroot-suffix", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/445099463a83367ddabb201e9e29e5a741cce034/gcc%2Fconfig%2Ft-sysroot-suffix", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-sysroot-suffix?ref=445099463a83367ddabb201e9e29e5a741cce034", "patch": "@@ -0,0 +1,7 @@\n+# Generate SYSROOT_SUFFIX_SPEC from MULTILIB_OSDIRNAMES\n+\n+sysroot-suffix.h: $(srcdir)/config/print-sysroot-suffix.sh\n+\t$(SHELL) $(srcdir)/config/print-sysroot-suffix.sh \\\n+\t  \"$(MULTILIB_OSDIRNAMES)\" \"$(MULTILIB_OPTIONS)\" \\\n+\t  \"$(MULTILIB_MATCHES)\" > tmp-sysroot-suffix.h\n+\tmv tmp-sysroot-suffix.h $@"}]}