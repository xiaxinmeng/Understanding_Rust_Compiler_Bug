{"sha": "22c4957e6b744aed9b442a6e0075fbb70f469b47", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJjNDk1N2U2Yjc0NGFlZDliNDQyYTZlMDA3NWZiYjcwZjQ2OWI0Nw==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@cygnus.com", "date": "1998-04-27T08:49:53Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1998-04-27T08:49:53Z"}, "message": "Redefine abort to report linenumber and filename of the error\n\nFrom-SVN: r19423", "tree": {"sha": "2ed7d0789f9ba1f4d88b4964a3f3e56422310726", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2ed7d0789f9ba1f4d88b4964a3f3e56422310726"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22c4957e6b744aed9b442a6e0075fbb70f469b47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22c4957e6b744aed9b442a6e0075fbb70f469b47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22c4957e6b744aed9b442a6e0075fbb70f469b47", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22c4957e6b744aed9b442a6e0075fbb70f469b47/comments", "author": null, "committer": null, "parents": [{"sha": "563c063f761d5f25fe0cb3821f36f9635b9832b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/563c063f761d5f25fe0cb3821f36f9635b9832b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/563c063f761d5f25fe0cb3821f36f9635b9832b3"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "fe4592baf328acfc6de01cd5fd4c510a747efd8c", "filename": "gcc/.gdbinit", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22c4957e6b744aed9b442a6e0075fbb70f469b47/gcc%2F.gdbinit", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22c4957e6b744aed9b442a6e0075fbb70f469b47/gcc%2F.gdbinit", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2F.gdbinit?ref=22c4957e6b744aed9b442a6e0075fbb70f469b47", "patch": "@@ -90,6 +90,11 @@ end\n # stdio stop working and therefore the `pr' command below as well.\n b abort\n \n+# Put breakpoints at exit and fancy_abort in case abort is mapped\n+# to either fprintf/exit or fancy_abort.\n+b exit\n+b fancy_abort\n+\n # Make gdb complain about symbol reading errors.  This is so that gcc\n # developers can see and fix bugs in gcc debug output.\n set complaints 20"}, {"sha": "23e212d1b982a94a10ead81fab2752711db2039d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22c4957e6b744aed9b442a6e0075fbb70f469b47/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22c4957e6b744aed9b442a6e0075fbb70f469b47/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=22c4957e6b744aed9b442a6e0075fbb70f469b47", "patch": "@@ -1,5 +1,11 @@\n Mon Apr 27 08:55:23 1998  Michael Meissner  <meissner@cygnus.com>\n \n+\t* system.h (abort): If abort is not defined, and neither is\n+\tUSE_SYSTEM_ABORT, redefine abort to call fprintf and exit,\n+\treporting the line and filename of the error.\n+\n+\t* .gdbinit: Add breakpoints on exit and fancy_abort.\n+\n \t* final.c (split_double): Avoid a compiler warning if\n \tBITS_PER_WORD is less than or equal to HOST_BIT_PER_WIDE_INT.\n "}, {"sha": "e381c2db794a8e138b3f9102d9430b795608fae1", "filename": "gcc/system.h", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22c4957e6b744aed9b442a6e0075fbb70f469b47/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22c4957e6b744aed9b442a6e0075fbb70f469b47/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=22c4957e6b744aed9b442a6e0075fbb70f469b47", "patch": "@@ -188,4 +188,33 @@ extern void free ();\n extern char *getenv ();\n #endif\n \n+/* Redefine abort to report an internal error w/o coredump, and reporting the\n+   location of the error in the source file.  */\n+#ifndef abort\n+#ifndef __STDC__\n+#ifndef __GNUC__\n+#ifndef USE_SYSTEM_ABORT\n+#define USE_SYSTEM_ABORT\n+#endif /* !USE_SYSTEM_ABORT */\n+#endif /* !__GNUC__ */\n+#endif /* !__STDC__ */\n+\n+#ifndef USE_SYSTEM_ABORT\n+#if __GNUC__ < 2 || (__GNUC__ == 2 && __GNUC_MINOR__ < 7)\n+#define abort()\t\t\t\t\t\t\t\t\\\n+(fprintf (stderr,\t\t\t\t\t\t\t\\\n+\t  \"%s:%d: Internal compiler error\\n\", __FILE__, __LINE__),\t\\\n+ exit (FATAL_EXIT_CODE))\n+\n+#else\n+#define abort()\t\t\t\t\t\t\t\t\\\n+(fprintf (stderr,\t\t\t\t\t\t\t\\\n+\t  \"%s:%d: Internal compiler error in function %s\\n\",\t\t\\\n+\t  __FILE__, __LINE__, __PRETTY_FUNCTION__),\t\t\t\\\n+ exit (FATAL_EXIT_CODE))\n+\n+#endif /* recent gcc */\n+#endif /* !USE_SYSTEM_ABORT */\n+#endif /* !abort */\n+\n #endif /* __GCC_SYSTEM_H__ */"}]}