{"sha": "572ae4769aebdf9e2ca738674f698f2a4b3347cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcyYWU0NzY5YWViZGY5ZTJjYTczODY3NGY2OThmMmE0YjMzNDdjZA==", "commit": {"author": {"name": "Changpeng Fang", "email": "changpeng.fang@amd.com", "date": "2010-03-04T12:12:50Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-03-04T12:12:50Z"}, "message": "Fix PR43209: Do not decrease the cost of an IV candidate when the cost is infinite.\n\n2010-03-03  Changpeng Fang  <changpeng.fang@amd.com>\n\n      PR middle-end/43209\n      * tree-ssa-loop-ivopts.c (determine_use_iv_cost_condition): Do not decrease\n      the cost of an IV candidate when the cost is infinite.\n\n      * gcc.dg/tree-ssa/ivopts-4.c: New.\n\nFrom-SVN: r157217", "tree": {"sha": "ebedb017ebbb3aaafa250c0876b89feb978c51d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebedb017ebbb3aaafa250c0876b89feb978c51d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/572ae4769aebdf9e2ca738674f698f2a4b3347cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/572ae4769aebdf9e2ca738674f698f2a4b3347cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/572ae4769aebdf9e2ca738674f698f2a4b3347cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/572ae4769aebdf9e2ca738674f698f2a4b3347cd/comments", "author": {"login": "changpeng", "id": 4239661, "node_id": "MDQ6VXNlcjQyMzk2NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4239661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/changpeng", "html_url": "https://github.com/changpeng", "followers_url": "https://api.github.com/users/changpeng/followers", "following_url": "https://api.github.com/users/changpeng/following{/other_user}", "gists_url": "https://api.github.com/users/changpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/changpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/changpeng/subscriptions", "organizations_url": "https://api.github.com/users/changpeng/orgs", "repos_url": "https://api.github.com/users/changpeng/repos", "events_url": "https://api.github.com/users/changpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/changpeng/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8723eb6ec75ec0b362c02f61578750e4fd49cc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8723eb6ec75ec0b362c02f61578750e4fd49cc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8723eb6ec75ec0b362c02f61578750e4fd49cc4"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "93b2d76f77d2fc9944930f12e3fcdafdb432dc34", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=572ae4769aebdf9e2ca738674f698f2a4b3347cd", "patch": "@@ -1,3 +1,9 @@\n+2010-03-04  Changpeng Fang  <changpeng.fang@amd.com>\n+\n+      PR middle-end/43209\n+      * tree-ssa-loop-ivopts.c (determine_use_iv_cost_condition): Do not decrease\n+      the cost of an IV candidate when the cost is infinite.\n+\n 2010-03-04  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* doc/extend.texi (Vector Extensions, X86 Built-in Functions):"}, {"sha": "5565dd3240d050f29816b7bb3790642dd1e08689", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=572ae4769aebdf9e2ca738674f698f2a4b3347cd", "patch": "@@ -1,3 +1,8 @@\n+2010-03-04  Changpeng Fang  <changpeng.fang@amd.com>\n+\n+      PR middle-end/43209\n+      * gcc.dg/tree-ssa/ivopts-4.c: New.\n+\n 2010-03-03  Janis Johnson  <janis187@us.ibm.com>\n \n \t* lib/target-supports-dg.exp (check-flags): Provide defaults for"}, {"sha": "9080152398683919119022d824fd1ffe6c878d42", "filename": "gcc/testsuite/gcc.dg/tree-ssa/ivopts-4.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fivopts-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fivopts-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fivopts-4.c?ref=572ae4769aebdf9e2ca738674f698f2a4b3347cd", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1\" } */\n+void foo(int *p, long i, int j)\n+{\n+  do {\n+      p[i]++;\n+  } while (i += j);\n+}"}, {"sha": "e6565dbdf990c4ef963fb153b8d3b00f54b42ca6", "filename": "gcc/tree-ssa-loop-ivopts.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2Ftree-ssa-loop-ivopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/572ae4769aebdf9e2ca738674f698f2a4b3347cd/gcc%2Ftree-ssa-loop-ivopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-ivopts.c?ref=572ae4769aebdf9e2ca738674f698f2a4b3347cd", "patch": "@@ -1,5 +1,5 @@\n /* Induction variable optimizations.\n-   Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009\n+   Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -4121,7 +4121,8 @@ determine_use_iv_cost_condition (struct ivopts_data *data,\n      TODO: The constant that we're substracting from the cost should\n      be target-dependent.  This information should be added to the\n      target costs for each backend.  */\n-  if (integer_zerop (*bound_cst)\n+  if (!infinite_cost_p (elim_cost) /* Do not try to decrease infinite! */\n+      && integer_zerop (*bound_cst)\n       && (operand_equal_p (*control_var, cand->var_after, 0)\n \t  || operand_equal_p (*control_var, cand->var_before, 0)))\n     elim_cost.cost -= 1;"}]}