{"sha": "9a71ece17f1eabb004fbccf7ec4354a8a6f571c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWE3MWVjZTE3ZjFlYWJiMDA0ZmJjY2Y3ZWM0MzU0YThhNmY1NzFjOQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-02-15T21:37:22Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-02-15T21:37:22Z"}, "message": "gcse.c (bypass_block): Use BLOCK_FOR_INSN for resolving LABEL_REFs.\n\n        * gcse.c (bypass_block): Use BLOCK_FOR_INSN for resolving LABEL_REFs.\n        (bypass_conditional_jumps): Accept computed_jump_p insns as well.\n\nFrom-SVN: r62945", "tree": {"sha": "527f579453d4d1fff1041f381e325811ebbb07f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/527f579453d4d1fff1041f381e325811ebbb07f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9/comments", "author": null, "committer": null, "parents": [{"sha": "99dc72775ffa084451dfc05947102ea2f176e25e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99dc72775ffa084451dfc05947102ea2f176e25e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99dc72775ffa084451dfc05947102ea2f176e25e"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "26201f375d0afaf47256763701ee9fc3eb16d2fe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9a71ece17f1eabb004fbccf7ec4354a8a6f571c9", "patch": "@@ -1,3 +1,8 @@\n+2003-02-15  Richard Henderson  <rth@redhat.com>\n+\n+\t* gcse.c (bypass_block): Use BLOCK_FOR_INSN for resolving LABEL_REFs.\n+\t(bypass_conditional_jumps): Accept computed_jump_p insns as well.\n+\n 2003-02-15  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/rs6000.h (processor_type): Add PPC440."}, {"sha": "f5bb66d0053d0ef486d6a812ec7614ecb04fdb9a", "filename": "gcc/gcse.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9/gcc%2Fgcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a71ece17f1eabb004fbccf7ec4354a8a6f571c9/gcc%2Fgcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcse.c?ref=9a71ece17f1eabb004fbccf7ec4354a8a6f571c9", "patch": "@@ -4809,7 +4809,7 @@ bypass_block (bb, setcc, jump)\n \t  if (new == pc_rtx)\n \t    dest = FALLTHRU_EDGE (bb)->dest;\n \t  else if (GET_CODE (new) == LABEL_REF)\n-\t    dest = BRANCH_EDGE (bb)->dest;\n+\t    dest = BLOCK_FOR_INSN (XEXP (new, 0));\n \t  else\n \t    dest = NULL;\n \n@@ -4848,7 +4848,9 @@ bypass_block (bb, setcc, jump)\n /* Find basic blocks with more than one predecessor that only contain a\n    single conditional jump.  If the result of the comparison is known at\n    compile-time from any incoming edge, redirect that edge to the\n-   appropriate target.  Returns nonzero if a change was made.  */\n+   appropriate target.  Returns nonzero if a change was made.\n+\n+   This function is now mis-named, because we also handle indirect jumps.  */\n \n static int\n bypass_conditional_jumps ()\n@@ -4891,7 +4893,8 @@ bypass_conditional_jumps ()\n \t      }\n \t    else if (GET_CODE (insn) == JUMP_INSN)\n \t      {\n-\t\tif (any_condjump_p (insn) && onlyjump_p (insn))\n+\t\tif ((any_condjump_p (insn) || computed_jump_p (insn))\n+\t\t    && onlyjump_p (insn))\n \t\t  changed |= bypass_block (bb, setcc, insn);\n \t\tbreak;\n \t      }"}]}