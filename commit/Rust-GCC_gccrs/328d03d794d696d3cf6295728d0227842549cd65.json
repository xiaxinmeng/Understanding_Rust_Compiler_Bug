{"sha": "328d03d794d696d3cf6295728d0227842549cd65", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI4ZDAzZDc5NGQ2OTZkM2NmNjI5NTcyOGQwMjI3ODQyNTQ5Y2Q2NQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-11-26T10:14:51Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-11-26T10:14:51Z"}, "message": "rtti.c (build_dynamic_cast): Handle template case here.\n\n\t* rtti.c (build_dynamic_cast): Handle template case here.\n\t(build_dynamic_cast_1): Not here.\n\nFrom-SVN: r16729", "tree": {"sha": "fb0f11f83e95a9d461ae40db842fe8d3d8c797c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb0f11f83e95a9d461ae40db842fe8d3d8c797c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/328d03d794d696d3cf6295728d0227842549cd65", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/328d03d794d696d3cf6295728d0227842549cd65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/328d03d794d696d3cf6295728d0227842549cd65", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/328d03d794d696d3cf6295728d0227842549cd65/comments", "author": null, "committer": null, "parents": [{"sha": "19754d4cf629426a7fed01c0e0a53b89bf994c35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19754d4cf629426a7fed01c0e0a53b89bf994c35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19754d4cf629426a7fed01c0e0a53b89bf994c35"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "e81268db0322bcb60e017d907f7de08b591623ce", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/328d03d794d696d3cf6295728d0227842549cd65/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/328d03d794d696d3cf6295728d0227842549cd65/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=328d03d794d696d3cf6295728d0227842549cd65", "patch": "@@ -1,5 +1,8 @@\n Wed Nov 26 01:11:24 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n+\t* rtti.c (build_dynamic_cast): Handle template case here.\n+\t(build_dynamic_cast_1): Not here.\n+\n \t* typeck2.c (digest_init): Make copies where appropriate.\n \n \t* decl2.c (delete_sanity): resolve_offset_ref."}, {"sha": "4940696272292288acdd0e14c45aa8e18a8494f9", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/328d03d794d696d3cf6295728d0227842549cd65/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/328d03d794d696d3cf6295728d0227842549cd65/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=328d03d794d696d3cf6295728d0227842549cd65", "patch": "@@ -428,15 +428,6 @@ build_dynamic_cast_1 (type, expr)\n   enum tree_code ec;\n   tree dcast_fn;\n \n-  if (type == error_mark_node || expr == error_mark_node)\n-    return error_mark_node;\n-  \n-  if (processing_template_decl)\n-    {\n-      tree t = build_min (DYNAMIC_CAST_EXPR, type, expr);\n-      return t;\n-    }\n-\n   assert (exprtype != NULL_TREE);\n   ec = TREE_CODE (exprtype);\n \n@@ -647,6 +638,12 @@ tree\n build_dynamic_cast (type, expr)\n      tree type, expr;\n {\n+  if (type == error_mark_node || expr == error_mark_node)\n+    return error_mark_node;\n+  \n+  if (processing_template_decl)\n+    return build_min (DYNAMIC_CAST_EXPR, type, expr);\n+\n   return convert_from_reference (build_dynamic_cast_1 (type, expr));\n }\n \f"}]}