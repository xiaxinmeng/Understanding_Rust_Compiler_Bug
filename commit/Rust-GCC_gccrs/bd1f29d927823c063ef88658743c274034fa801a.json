{"sha": "bd1f29d927823c063ef88658743c274034fa801a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQxZjI5ZDkyNzgyM2MwNjNlZjg4NjU4NzQzYzI3NDAzNGZhODAxYQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-04-15T18:22:51Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-04-15T18:22:51Z"}, "message": "tree-ssa-structalias.c (get_constraint_for_component_ref): Do not punt for STRING_CST.\n\n\t* tree-ssa-structalias.c (get_constraint_for_component_ref): Do not\n\tpunt for STRING_CST.\n\t(get_constraint_for): Deal with STRING_CST here instead.\n\nFrom-SVN: r134325", "tree": {"sha": "49ecfa881aa4a0f0a8fb837b144c464b196367d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49ecfa881aa4a0f0a8fb837b144c464b196367d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd1f29d927823c063ef88658743c274034fa801a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd1f29d927823c063ef88658743c274034fa801a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd1f29d927823c063ef88658743c274034fa801a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd1f29d927823c063ef88658743c274034fa801a/comments", "author": null, "committer": null, "parents": [{"sha": "3bb3bb2d6e6690c10b502ac21189ae739672d7c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bb3bb2d6e6690c10b502ac21189ae739672d7c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bb3bb2d6e6690c10b502ac21189ae739672d7c4"}], "stats": {"total": 49, "additions": 44, "deletions": 5}, "files": [{"sha": "253893342803bd76418969b0938a47994759772e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd1f29d927823c063ef88658743c274034fa801a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd1f29d927823c063ef88658743c274034fa801a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bd1f29d927823c063ef88658743c274034fa801a", "patch": "@@ -1,3 +1,9 @@\n+2008-04-15  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree-ssa-structalias.c (get_constraint_for_component_ref): Do not\n+\tpunt for STRING_CST.\n+\t(get_constraint_for): Deal with STRING_CST here instead.\n+\n 2008-04-15  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-ssa-propagate.c (substitute_and_fold): Substitute"}, {"sha": "81940dafcdaf8cf16553f40fd111bcc85c0d8cd4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd1f29d927823c063ef88658743c274034fa801a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd1f29d927823c063ef88658743c274034fa801a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bd1f29d927823c063ef88658743c274034fa801a", "patch": "@@ -1,3 +1,7 @@\n+2008-04-15  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/string_slice2.adb: New test.\n+\n 2008-04-15  Richard Guenther  <rguenther@suse.de>\n \n \t* gcc.dg/fold-compare-2.c: Adjust testcase."}, {"sha": "e9a9efaa132e59df7822bf3a97134a2d086adb4d", "filename": "gcc/testsuite/gnat.dg/string_slice2.adb", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd1f29d927823c063ef88658743c274034fa801a/gcc%2Ftestsuite%2Fgnat.dg%2Fstring_slice2.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd1f29d927823c063ef88658743c274034fa801a/gcc%2Ftestsuite%2Fgnat.dg%2Fstring_slice2.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstring_slice2.adb?ref=bd1f29d927823c063ef88658743c274034fa801a", "patch": "@@ -0,0 +1,24 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O\" }\n+\n+with Ada.Strings;\n+with Ada.Strings.Fixed;\n+\n+procedure String_Slice2 is\n+\n+   package ASF renames Ada.Strings.Fixed;\n+\n+   Delete_String  : String(1..10);\n+   Source_String2 : String(1..12) := \"abcdefghijkl\";\n+\n+begin\n+\n+   Delete_String := Source_String2(1..10);\n+\n+   ASF.Delete(Source  => Delete_String,\n+              From    => 6,\n+              Through => Delete_String'Last,\n+              Justify => Ada.Strings.Left,\n+              Pad     => 'x');\n+\n+end;"}, {"sha": "6f6eff422dafb8d459265df4fe868f27de7ac8d5", "filename": "gcc/tree-ssa-structalias.c", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd1f29d927823c063ef88658743c274034fa801a/gcc%2Ftree-ssa-structalias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd1f29d927823c063ef88658743c274034fa801a/gcc%2Ftree-ssa-structalias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-structalias.c?ref=bd1f29d927823c063ef88658743c274034fa801a", "patch": "@@ -2657,11 +2657,6 @@ get_constraint_for_component_ref (tree t, VEC(ce_s, heap) **results)\n \n   t = get_ref_base_and_extent (t, &bitpos, &bitsize, &bitmaxsize);\n \n-  /* String constants are readonly, so there is nothing to really do\n-     here.  */\n-  if (TREE_CODE (t) == STRING_CST)\n-    return;\n-\n   get_constraint_for (t, results);\n   result = VEC_last (ce_s, *results);\n   result->offset = bitpos;\n@@ -2779,6 +2774,16 @@ get_constraint_for (tree t, VEC (ce_s, heap) **results)\n       return;\n     }\n \n+  /* String constants are read-only.  */\n+  if (TREE_CODE (t) == STRING_CST)\n+    {\n+      temp.var = readonly_id;\n+      temp.type = SCALAR;\n+      temp.offset = 0;\n+      VEC_safe_push (ce_s, heap, *results, &temp);\n+      return;\n+    }\n+\n   switch (TREE_CODE_CLASS (TREE_CODE (t)))\n     {\n     case tcc_expression:"}]}