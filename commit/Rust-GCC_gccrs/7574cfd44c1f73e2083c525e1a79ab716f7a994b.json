{"sha": "7574cfd44c1f73e2083c525e1a79ab716f7a994b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU3NGNmZDQ0YzFmNzNlMjA4M2M1MjVlMWE3OWFiNzE2ZjdhOTk0Yg==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-10-26T18:25:14Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-10-26T18:25:14Z"}, "message": "Show INSN_UIDs in compact mode\n\ngcc/ChangeLog:\n\t* print-rtl.c (rtx_writer::print_rtx_operand_code_u): Print\n\tINSN_UIDs for all insns in compact mode.\n\t(rtx_writer::print_rtx): Likewise.\n\t* print-rtl.h (rtx_writer::flag_compact): Update comment.\n\t* rtl-tests.c (selftest::test_dumping_insns): Update expected\n\toutput to include INSN_UID.\n\t(selftest::test_uncond_jump): Likewise.\n\nFrom-SVN: r241593", "tree": {"sha": "7a4e43895ef2a596be72dfbe2ecda75d47f6b056", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a4e43895ef2a596be72dfbe2ecda75d47f6b056"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7574cfd44c1f73e2083c525e1a79ab716f7a994b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7574cfd44c1f73e2083c525e1a79ab716f7a994b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7574cfd44c1f73e2083c525e1a79ab716f7a994b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7574cfd44c1f73e2083c525e1a79ab716f7a994b/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a0019047b8acbda653ba0b250940fe29fca38a6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0019047b8acbda653ba0b250940fe29fca38a6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0019047b8acbda653ba0b250940fe29fca38a6e"}], "stats": {"total": 26, "additions": 17, "deletions": 9}, "files": [{"sha": "02a37f61933867719b6bb7a48a270b885ec1a404", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7574cfd44c1f73e2083c525e1a79ab716f7a994b", "patch": "@@ -1,3 +1,13 @@\n+2016-10-26  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* print-rtl.c (rtx_writer::print_rtx_operand_code_u): Print\n+\tINSN_UIDs for all insns in compact mode.\n+\t(rtx_writer::print_rtx): Likewise.\n+\t* print-rtl.h (rtx_writer::flag_compact): Update comment.\n+\t* rtl-tests.c (selftest::test_dumping_insns): Update expected\n+\toutput to include INSN_UID.\n+\t(selftest::test_uncond_jump): Likewise.\n+\n 2016-10-26  Pat Haugen  <pthaugen@us.ibm.com>\n \n \t* haifa-sched.c (call_used_regs_num): Rename to..."}, {"sha": "341ecdfedb84fb500b54c2a49934afda4b62672c", "filename": "gcc/print-rtl.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2Fprint-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2Fprint-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl.c?ref=7574cfd44c1f73e2083c525e1a79ab716f7a994b", "patch": "@@ -423,8 +423,8 @@ rtx_writer::print_rtx_operand_code_r (const_rtx in_rtx)\n void\n rtx_writer::print_rtx_operand_code_u (const_rtx in_rtx, int idx)\n {\n-  /* Don't print insn UIDs in compact mode, apart from in LABEL_REFs.  */\n-  if (m_compact && GET_CODE (in_rtx) != LABEL_REF)\n+  /* Don't print insn UIDs for PREV/NEXT_INSN in compact mode.  */\n+  if (m_compact && INSN_CHAIN_CODE_P (GET_CODE (in_rtx)) && idx < 2)\n     return;\n \n   if (XEXP (in_rtx, idx) != NULL)\n@@ -672,10 +672,8 @@ rtx_writer::print_rtx (const_rtx in_rtx)\n     idx = 5;\n #endif\n \n-  /* For insns, print the INSN_UID.\n-     In compact mode, we only print the INSN_UID of CODE_LABELs.  */\n-  if (INSN_CHAIN_CODE_P (GET_CODE (in_rtx))\n-      && (!m_compact || GET_CODE (in_rtx) == CODE_LABEL))\n+  /* For insns, print the INSN_UID.  */\n+  if (INSN_CHAIN_CODE_P (GET_CODE (in_rtx)))\n     {\n       if (flag_dump_unnumbered)\n \tfprintf (m_outfile, \" #\");"}, {"sha": "8496ffa1491f158a2074d9d6475d257bea48bb4f", "filename": "gcc/print-rtl.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2Fprint-rtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2Fprint-rtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl.h?ref=7574cfd44c1f73e2083c525e1a79ab716f7a994b", "patch": "@@ -50,7 +50,7 @@ class rtx_writer\n   bool m_simple;\n \n   /* If true, use compact dump format:\n-     - INSN_UIDs are omitted, except for jumps and CODE_LABELs,\n+     - PREV/NEXT_INSN UIDs are omitted\n      - INSN_CODEs are omitted,\n      - register numbers are omitted for hard and virtual regs, and\n        non-virtual pseudos are offset relative to the first such reg, and"}, {"sha": "4e534b2316f60ad151d9e4acf6c665f672fc3768", "filename": "gcc/rtl-tests.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2Frtl-tests.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7574cfd44c1f73e2083c525e1a79ab716f7a994b/gcc%2Frtl-tests.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl-tests.c?ref=7574cfd44c1f73e2083c525e1a79ab716f7a994b", "patch": "@@ -121,7 +121,7 @@ test_dumping_insns ()\n   /* Barriers.  */\n   rtx_barrier *barrier = as_a <rtx_barrier *> (rtx_alloc (BARRIER));\n   SET_NEXT_INSN (barrier) = NULL;\n-  ASSERT_RTL_DUMP_EQ (\"(cbarrier)\\n\", barrier);\n+  ASSERT_RTL_DUMP_EQ (\"(cbarrier 0)\\n\", barrier);\n \n   /* Labels.  */\n   rtx_insn *label = gen_label_rtx ();\n@@ -179,7 +179,7 @@ test_uncond_jump ()\n   ASSERT_TRUE (onlyjump_p (jump_insn));\n   ASSERT_TRUE (control_flow_insn_p (jump_insn));\n \n-  ASSERT_RTL_DUMP_EQ (\"(cjump_insn (set (pc)\\n\"\n+  ASSERT_RTL_DUMP_EQ (\"(cjump_insn 1 (set (pc)\\n\"\n \t\t      \"        (label_ref 0))\\n\"\n \t\t      \"     (nil))\\n\",\n \t\t      jump_insn);"}]}