{"sha": "48a78aee68fe0d88f01fcdef61782b4f8008f651", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhhNzhhZWU2OGZlMGQ4OGYwMWZjZGVmNjE3ODJiNGY4MDA4ZjY1MQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2015-11-20T19:50:46Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2015-11-20T19:50:46Z"}, "message": "re PR middle-end/68221 (libgomp reduction-11/12 failures)\n\n\tPR middle-end/68221\n\t* omp-low.c (lower_rec_input_clauses): If C/C++ array reduction\n\thas non-zero bias, subtract it in integer type instead of\n\tpointer plus of negated bias.\n\n\t* testsuite/libgomp.c/reduction-11.c: Remove xfail.\n\t* testsuite/libgomp.c/reduction-12.c: Likewise.\n\t* testsuite/libgomp.c++/reduction-11.C: Likewise.\n\t* testsuite/libgomp.c++/reduction-12.C: Likewise.\n\nFrom-SVN: r230672", "tree": {"sha": "c24052cb2cd36bcb89e5c282738b57518e6c0e94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c24052cb2cd36bcb89e5c282738b57518e6c0e94"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48a78aee68fe0d88f01fcdef61782b4f8008f651", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48a78aee68fe0d88f01fcdef61782b4f8008f651", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48a78aee68fe0d88f01fcdef61782b4f8008f651", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48a78aee68fe0d88f01fcdef61782b4f8008f651/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9a784760f136a97e6cc39816788ca4ddff0193af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a784760f136a97e6cc39816788ca4ddff0193af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a784760f136a97e6cc39816788ca4ddff0193af"}], "stats": {"total": 33, "additions": 24, "deletions": 9}, "files": [{"sha": "4d3e5b3680f57830ee210ccdda7d493a0aadca64", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a78aee68fe0d88f01fcdef61782b4f8008f651/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a78aee68fe0d88f01fcdef61782b4f8008f651/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=48a78aee68fe0d88f01fcdef61782b4f8008f651", "patch": "@@ -1,5 +1,10 @@\n 2015-11-20  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/68221\n+\t* omp-low.c (lower_rec_input_clauses): If C/C++ array reduction\n+\thas non-zero bias, subtract it in integer type instead of\n+\tpointer plus of negated bias.\n+\n \tPR middle-end/68339\n \t* omp-low.c (expand_simd_clones): Call node->get_body () before\n \tallocating stuff in GC."}, {"sha": "b47864eae6e94d6f35689ab568ce41b149334c74", "filename": "gcc/omp-low.c", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a78aee68fe0d88f01fcdef61782b4f8008f651/gcc%2Fomp-low.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a78aee68fe0d88f01fcdef61782b4f8008f651/gcc%2Fomp-low.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fomp-low.c?ref=48a78aee68fe0d88f01fcdef61782b4f8008f651", "patch": "@@ -4444,11 +4444,13 @@ lower_rec_input_clauses (tree clauses, gimple_seq *ilist, gimple_seq *dlist,\n \n \t      if (!integer_zerop (bias))\n \t\t{\n-\t\t  bias = fold_convert_loc (clause_loc, sizetype, bias);\n-\t\t  bias = fold_build1_loc (clause_loc, NEGATE_EXPR,\n-\t\t\t\t\t  sizetype, bias);\n-\t\t  x = fold_build2_loc (clause_loc, POINTER_PLUS_EXPR,\n-\t\t\t\t       TREE_TYPE (x), x, bias);\n+\t\t  bias = fold_convert_loc (clause_loc, pointer_sized_int_node,\n+\t\t\t\t\t   bias);\n+\t\t  yb = fold_convert_loc (clause_loc, pointer_sized_int_node,\n+\t\t\t\t\t x);\n+\t\t  yb = fold_build2_loc (clause_loc, MINUS_EXPR,\n+\t\t\t\t\tpointer_sized_int_node, yb, bias);\n+\t\t  x = fold_convert_loc (clause_loc, TREE_TYPE (x), yb);\n \t\t  yb = create_tmp_var (ptype, name);\n \t\t  gimplify_assign (yb, x, ilist);\n \t\t  x = yb;"}, {"sha": "7de19b0a25bfaa2d6cf72758a3aca9c55ed741ba", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=48a78aee68fe0d88f01fcdef61782b4f8008f651", "patch": "@@ -1,3 +1,11 @@\n+2015-11-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/68221\n+\t* testsuite/libgomp.c/reduction-11.c: Remove xfail.\n+\t* testsuite/libgomp.c/reduction-12.c: Likewise.\n+\t* testsuite/libgomp.c++/reduction-11.C: Likewise.\n+\t* testsuite/libgomp.c++/reduction-12.C: Likewise.\n+\n 2015-11-19  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* libgomp.oacc-c-c++-common/reduction-dbl.c: New."}, {"sha": "67c7320cf5c78017e69c90db366793e8ccb38231", "filename": "libgomp/testsuite/libgomp.c++/reduction-11.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Freduction-11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Freduction-11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Freduction-11.C?ref=48a78aee68fe0d88f01fcdef61782b4f8008f651", "patch": "@@ -1,4 +1,4 @@\n-// { dg-do run { xfail *-*-* } }\n+// { dg-do run }\n \n char z[10] = { 0 };\n "}, {"sha": "1495549a956ed0ae34be8c48325cc5c1e8f20617", "filename": "libgomp/testsuite/libgomp.c++/reduction-12.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Freduction-12.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Freduction-12.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Freduction-12.C?ref=48a78aee68fe0d88f01fcdef61782b4f8008f651", "patch": "@@ -1,4 +1,4 @@\n-// { dg-do run { xfail *-*-* } }\n+// { dg-do run }\n \n template <typename T>\n struct A"}, {"sha": "264c6fc075f6e545fced6b45f3c51bd4a628078b", "filename": "libgomp/testsuite/libgomp.c/reduction-11.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2Freduction-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2Freduction-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Freduction-11.c?ref=48a78aee68fe0d88f01fcdef61782b4f8008f651", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run { xfail *-*-* } } */\n+/* { dg-do run } */\n \n char z[10] = { 0 };\n "}, {"sha": "97c5766cf4edf914e1ff499588fc6a1fcc8be491", "filename": "libgomp/testsuite/libgomp.c/reduction-12.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2Freduction-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a78aee68fe0d88f01fcdef61782b4f8008f651/libgomp%2Ftestsuite%2Flibgomp.c%2Freduction-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Freduction-12.c?ref=48a78aee68fe0d88f01fcdef61782b4f8008f651", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do run { xfail *-*-* } } */\n+/* { dg-do run } */\n \n struct A { int t; };\n struct B { char t; };"}]}