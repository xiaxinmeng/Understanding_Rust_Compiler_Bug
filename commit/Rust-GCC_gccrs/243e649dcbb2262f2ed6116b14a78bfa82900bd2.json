{"sha": "243e649dcbb2262f2ed6116b14a78bfa82900bd2", "node_id": "C_kwDOANBUbNoAKDI0M2U2NDlkY2JiMjI2MmYyZWQ2MTE2YjE0YTc4YmZhODI5MDBiZDI", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2022-04-03T12:40:34Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2022-04-03T13:16:39Z"}, "message": "d: Remove Wtemplates warnings from the code generation pass\n\nThese have been superceded by the front-end's own internal tracking of\ninstantiations, exposed by `-ftransition=templates'.\n\ngcc/d/ChangeLog:\n\n\t* d-lang.cc: Include dmd/template.h.\n\t(d_parse_file): Call printTemplateStats when vtemplates is set.\n\t* decl.cc (start_function): Remove OPT_Wtemplates warning.\n\t* lang.opt (Wtemplates): Remove.", "tree": {"sha": "a3d07733174ada5063179007294f6e4e911d4546", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3d07733174ada5063179007294f6e4e911d4546"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/243e649dcbb2262f2ed6116b14a78bfa82900bd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/243e649dcbb2262f2ed6116b14a78bfa82900bd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/243e649dcbb2262f2ed6116b14a78bfa82900bd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/243e649dcbb2262f2ed6116b14a78bfa82900bd2/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0847ad33b908af88bca1e6980d0b977316d05e18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0847ad33b908af88bca1e6980d0b977316d05e18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0847ad33b908af88bca1e6980d0b977316d05e18"}], "stats": {"total": 19, "additions": 5, "deletions": 14}, "files": [{"sha": "69571628336840796522f0562904e8a2988e92b3", "filename": "gcc/d/d-lang.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/243e649dcbb2262f2ed6116b14a78bfa82900bd2/gcc%2Fd%2Fd-lang.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/243e649dcbb2262f2ed6116b14a78bfa82900bd2/gcc%2Fd%2Fd-lang.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fd-lang.cc?ref=243e649dcbb2262f2ed6116b14a78bfa82900bd2", "patch": "@@ -33,6 +33,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"dmd/module.h\"\n #include \"dmd/mtype.h\"\n #include \"dmd/target.h\"\n+#include \"dmd/template.h\"\n \n #include \"opts.h\"\n #include \"alias.h\"\n@@ -1306,6 +1307,9 @@ d_parse_file (void)\n \t}\n     }\n \n+  if (global.params.vtemplates)\n+    printTemplateStats ();\n+\n   /* Generate JSON files.  */\n   if (global.params.doJsonGeneration)\n     {"}, {"sha": "86ea1761f4f53eb6c23f48f9f411b2b2d1f9e5a7", "filename": "gcc/d/decl.cc", "status": "modified", "additions": 1, "deletions": 10, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/243e649dcbb2262f2ed6116b14a78bfa82900bd2/gcc%2Fd%2Fdecl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/243e649dcbb2262f2ed6116b14a78bfa82900bd2/gcc%2Fd%2Fdecl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdecl.cc?ref=243e649dcbb2262f2ed6116b14a78bfa82900bd2", "patch": "@@ -1891,16 +1891,7 @@ start_function (FuncDeclaration *fd)\n      modules not in this compilation, or thunk aliases.  */\n   TemplateInstance *ti = fd->isInstantiated ();\n   if (ti && ti->needsCodegen ())\n-    {\n-      /* Warn about templates instantiated in this compilation.  */\n-      if (ti == fd->parent)\n-\t{\n-\t  warning (OPT_Wtemplates, \"%s %qs instantiated\",\n-\t\t   ti->kind (), ti->toPrettyChars (false));\n-\t}\n-\n-      DECL_EXTERNAL (fndecl) = 0;\n-    }\n+    DECL_EXTERNAL (fndecl) = 0;\n   else\n     {\n       Module *md = fd->getModule ();"}, {"sha": "51e8e5c7e004a4217a715336a55579ba444c746f", "filename": "gcc/d/lang.opt", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/243e649dcbb2262f2ed6116b14a78bfa82900bd2/gcc%2Fd%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/243e649dcbb2262f2ed6116b14a78bfa82900bd2/gcc%2Fd%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Flang.opt?ref=243e649dcbb2262f2ed6116b14a78bfa82900bd2", "patch": "@@ -138,10 +138,6 @@ Wspeculative\n D\n Warn from speculative compiles such as __traits(compiles).\n \n-Wtemplates\n-D\n-; Documented in C\n-\n Wunknown-pragmas\n D Var(warn_unknown_pragmas) LangEnabledBy(D, Wextra)\n ; Documented in C"}]}