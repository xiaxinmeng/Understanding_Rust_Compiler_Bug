{"sha": "cf9d76188a45f75f60b307b8a776279d6ad5e630", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Y5ZDc2MTg4YTQ1Zjc1ZjYwYjMwN2I4YTc3NjI3OWQ2YWQ1ZTYzMA==", "commit": {"author": {"name": "Angel Nunez Mencias", "email": "anunez@de.ibm.com", "date": "2006-02-20T08:42:27Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2006-02-20T08:42:27Z"}, "message": "s390.c (legitimize_pic_address): Assertions checking for non tls symbols added.\n\n2006-02-20  Angel Nunez Mencias  <anunez@de.ibm.com>\n\n\t* config/s390/s390.c (legitimize_pic_address): Assertions checking\n\tfor non tls symbols added.\n\t(legitimize_address): Do nothing for PLUS expressions if one of the\n\taddends is a tls symbol reference.\n\nFrom-SVN: r111296", "tree": {"sha": "64de3ebe12fc600ba8302084fa34cdef4be4d4e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64de3ebe12fc600ba8302084fa34cdef4be4d4e4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf9d76188a45f75f60b307b8a776279d6ad5e630", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf9d76188a45f75f60b307b8a776279d6ad5e630", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf9d76188a45f75f60b307b8a776279d6ad5e630", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf9d76188a45f75f60b307b8a776279d6ad5e630/comments", "author": {"login": "anunezde", "id": 28813386, "node_id": "MDQ6VXNlcjI4ODEzMzg2", "avatar_url": "https://avatars.githubusercontent.com/u/28813386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anunezde", "html_url": "https://github.com/anunezde", "followers_url": "https://api.github.com/users/anunezde/followers", "following_url": "https://api.github.com/users/anunezde/following{/other_user}", "gists_url": "https://api.github.com/users/anunezde/gists{/gist_id}", "starred_url": "https://api.github.com/users/anunezde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anunezde/subscriptions", "organizations_url": "https://api.github.com/users/anunezde/orgs", "repos_url": "https://api.github.com/users/anunezde/repos", "events_url": "https://api.github.com/users/anunezde/events{/privacy}", "received_events_url": "https://api.github.com/users/anunezde/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cc11cc9b0fc9846ab9bd4914edc28cbdf406f9c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc11cc9b0fc9846ab9bd4914edc28cbdf406f9c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc11cc9b0fc9846ab9bd4914edc28cbdf406f9c1"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "ce38f1879c183981e7764f978e1ee0a9ed2ab492", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf9d76188a45f75f60b307b8a776279d6ad5e630/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf9d76188a45f75f60b307b8a776279d6ad5e630/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cf9d76188a45f75f60b307b8a776279d6ad5e630", "patch": "@@ -1,3 +1,10 @@\n+2006-02-20  Angel Nunez Mencias  <anunez@de.ibm.com>\n+\n+\t* config/s390/s390.c (legitimize_pic_address): Assertions checking\n+\tfor non tls symbols added.\n+\t(legitimize_address): Do nothing for PLUS expressions if one of the\n+\taddends is a tls symbol reference.\n+\n 2006-02-20  Paolo Bonzini  <bonzini@gnu.org>\n \n \tPR bootstrap/25476"}, {"sha": "3eeb4acb0b6dbb21dc6e061b9b05181e2988e5be", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf9d76188a45f75f60b307b8a776279d6ad5e630/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf9d76188a45f75f60b307b8a776279d6ad5e630/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=cf9d76188a45f75f60b307b8a776279d6ad5e630", "patch": "@@ -2821,6 +2821,8 @@ legitimize_pic_address (rtx orig, rtx reg)\n   rtx new = orig;\n   rtx base;\n \n+  gcc_assert (!TLS_SYMBOLIC_CONST (addr));\n+\n   if (GET_CODE (addr) == LABEL_REF\n       || (GET_CODE (addr) == SYMBOL_REF && SYMBOL_REF_LOCAL_P (addr)))\n     {\n@@ -2973,6 +2975,10 @@ legitimize_pic_address (rtx orig, rtx reg)\n       if (GET_CODE (addr) == PLUS)\n \t{\n \t  rtx op0 = XEXP (addr, 0), op1 = XEXP (addr, 1);\n+\n+\t  gcc_assert (!TLS_SYMBOLIC_CONST (op0));\n+\t  gcc_assert (!TLS_SYMBOLIC_CONST (op1));\n+\n \t  /* Check first to see if this is a constant offset\n              from a local symbol reference.  */\n \t  if ((GET_CODE (op0) == LABEL_REF\n@@ -3345,6 +3351,12 @@ legitimize_address (rtx x, rtx oldx ATTRIBUTE_UNUSED,\n       if (legitimate_address_p (mode, x, FALSE))\n \treturn x;\n     }\n+  else if (GET_CODE (x) == PLUS\n+\t   && (TLS_SYMBOLIC_CONST (XEXP (x, 0)) \n+\t       || TLS_SYMBOLIC_CONST (XEXP (x, 1))))\n+    {\n+      return x;\n+    }\n   else if (flag_pic)\n     {\n       if (SYMBOLIC_CONST (x)"}]}