{"sha": "27eac88a3f23ef7efbbd725504963cffc71dcad4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjdlYWM4OGEzZjIzZWY3ZWZiYmQ3MjU1MDQ5NjNjZmZjNzFkY2FkNA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-09-17T10:41:07Z"}, "committer": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-09-17T10:41:07Z"}, "message": "Fix availability of functions in other partitions\n\n\t* cgraph.c (cgraph_node::get_availability): Fix availability of\n\tfunctions in other partitions\n\t* varpool.c (varpool_node::get_availability): Likewise.", "tree": {"sha": "69239f5d420fd5435430fa153f2d5dd5ab029000", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69239f5d420fd5435430fa153f2d5dd5ab029000"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27eac88a3f23ef7efbbd725504963cffc71dcad4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27eac88a3f23ef7efbbd725504963cffc71dcad4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27eac88a3f23ef7efbbd725504963cffc71dcad4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27eac88a3f23ef7efbbd725504963cffc71dcad4/comments", "author": null, "committer": null, "parents": [{"sha": "ec7ef3042106fd5981bfaa86dc32965a508d05f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec7ef3042106fd5981bfaa86dc32965a508d05f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec7ef3042106fd5981bfaa86dc32965a508d05f3"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "b43adaac7c034f09d0a5693343fdf8d4ea5e72b8", "filename": "gcc/cgraph.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27eac88a3f23ef7efbbd725504963cffc71dcad4/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27eac88a3f23ef7efbbd725504963cffc71dcad4/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=27eac88a3f23ef7efbbd725504963cffc71dcad4", "patch": "@@ -2360,7 +2360,7 @@ cgraph_node::get_availability (symtab_node *ref)\n \tref = cref->inlined_to;\n     }\n   enum availability avail;\n-  if (!analyzed)\n+  if (!analyzed && !in_other_partition)\n     avail = AVAIL_NOT_AVAILABLE;\n   else if (local)\n     avail = AVAIL_LOCAL;"}, {"sha": "31ea2132331b2f9695e0b7f85efa0ec1ce04a04e", "filename": "gcc/varpool.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27eac88a3f23ef7efbbd725504963cffc71dcad4/gcc%2Fvarpool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27eac88a3f23ef7efbbd725504963cffc71dcad4/gcc%2Fvarpool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarpool.c?ref=27eac88a3f23ef7efbbd725504963cffc71dcad4", "patch": "@@ -479,7 +479,7 @@ varpool_node::add (tree decl)\n enum availability\n varpool_node::get_availability (symtab_node *ref)\n {\n-  if (!definition)\n+  if (!definition && !in_other_partition)\n     return AVAIL_NOT_AVAILABLE;\n   if (!TREE_PUBLIC (decl))\n     return AVAIL_AVAILABLE;"}]}