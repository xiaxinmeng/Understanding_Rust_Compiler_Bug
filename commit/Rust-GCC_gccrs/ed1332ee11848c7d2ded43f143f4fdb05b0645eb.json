{"sha": "ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQxMzMyZWUxMTg0OGM3ZDJkZWQ0M2YxNDNmNGZkYjA1YjA2NDVlYg==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2015-06-25T12:33:14Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2015-06-25T12:33:14Z"}, "message": "bfin.c (bfin_expand_prologue): Set current_function_static_stack_size if flag_stack_usage_info is set.\n\n     * config/bfin/bfin.c (bfin_expand_prologue): Set\n     current_function_static_stack_size if flag_stack_usage_info is\n     set.\n     * config/ft32/ft32.c (ft32_expand_prologue): Likewise.\n     * config/h8300/h8300.c (h8300_expand_prologue): Likewise.\n     * config/iq2000/iq2000.c (iq2000_expand_prologue): Likewise.\n     * config/m32c/m32c.c (m32c_emit_prologue): Likewise.\n\ntest * gcc.dg/stack-usage-1.c: Add SIZE values for V850, MN10300,\n     H8300 and M32R targets.\n\nFrom-SVN: r224937", "tree": {"sha": "27202676cf7d947ed2645eea121293263fb264d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27202676cf7d947ed2645eea121293263fb264d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b092fe39d0163b45c9ff4ac7754a544bb0892d68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b092fe39d0163b45c9ff4ac7754a544bb0892d68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b092fe39d0163b45c9ff4ac7754a544bb0892d68"}], "stats": {"total": 50, "additions": 47, "deletions": 3}, "files": [{"sha": "f51931079db617700a2df54dd8f86756a78be01c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -1,3 +1,13 @@\n+2015-06-25  Nick Clifton  <nickc@redhat.com>\n+\n+\t* config/bfin/bfin.c (bfin_expand_prologue): Set\n+\tcurrent_function_static_stack_size if flag_stack_usage_info is\n+        set.\n+\t* config/ft32/ft32.c (ft32_expand_prologue): Likewise.\n+\t* config/h8300/h8300.c (h8300_expand_prologue): Likewise.\n+\t* config/iq2000/iq2000.c (iq2000_expand_prologue): Likewise.\n+\t* config/m32c/m32c.c (m32c_emit_prologue): Likewise.\n+\n 2015-06-25  Tom de Vries  <tom@codesourcery.com>\n \n \t* tree-ssa-loop-manip.c (canonicalize_loop_ivs): Don't claim in header"}, {"sha": "dade478541fc290517f19734bf3bbc5dd61c0ee4", "filename": "gcc/config/bfin/bfin.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fbfin%2Fbfin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fbfin%2Fbfin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.c?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -1090,6 +1090,9 @@ bfin_expand_prologue (void)\n   tree attrs = TYPE_ATTRIBUTES (TREE_TYPE (current_function_decl));\n   bool all = lookup_attribute (\"saveall\", attrs) != NULL_TREE;\n \n+  if (flag_stack_usage_info)\n+    current_function_static_stack_size = frame_size;\n+\n   if (fkind != SUBROUTINE)\n     {\n       expand_interrupt_handler_prologue (spreg, fkind, all);"}, {"sha": "1630c9c04c4c97fef168c3a6b12f45fba9d2f0c9", "filename": "gcc/config/ft32/ft32.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fft32%2Fft32.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fft32%2Fft32.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fft32%2Fft32.c?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -59,7 +59,7 @@\n #include \"basic-block.h\"\n #include \"df.h\"\n #include \"builtins.h\"\n-\n+#include \"emit-rtl.h\"\n \n #include <stdint.h>\n \n@@ -199,7 +199,7 @@ ft32_print_operand (FILE * file, rtx x, int code)\n       return;\n \n     case 'm':\n-      fprintf (file, \"%d\", -INTVAL(x));\n+      fprintf (file, \"%ld\", (long) (- INTVAL(x)));\n       return;\n \n     case 'd':                   // a DW spec, from an integer alignment (for BLKmode insns)\n@@ -456,6 +456,9 @@ ft32_expand_prologue (void)\n \n   ft32_compute_frame ();\n \n+  if (flag_stack_usage_info)\n+    current_function_static_stack_size = cfun->machine->size_for_adjusting_sp;\n+\n   if (!must_link () && (cfun->machine->callee_saved_reg_size == 4))\n     {\n       insn ="}, {"sha": "a1722a88c0da6659cb563bd62efb7a172ca8fe59", "filename": "gcc/config/ft32/ft32.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fft32%2Fft32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fft32%2Fft32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fft32%2Fft32.h?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -248,7 +248,7 @@ enum reg_class\n \n /* Define this macro if pushing a word onto the stack moves the stack\n    pointer to a smaller address.  */\n-#define STACK_GROWS_DOWNWARD\n+#define STACK_GROWS_DOWNWARD 1\n \n #define INITIAL_FRAME_POINTER_OFFSET(DEPTH) (DEPTH) = 0\n "}, {"sha": "4c7828a7131ba1a1e11641db4f735a918645f75b", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -896,6 +896,12 @@ h8300_expand_prologue (void)\n \n   /* Leave room for locals.  */\n   h8300_emit_stack_adjustment (-1, round_frame_size (get_frame_size ()), true);\n+\n+  if (flag_stack_usage_info)\n+    current_function_static_stack_size\n+      = round_frame_size (get_frame_size ())\n+      + (__builtin_popcount (saved_regs) * UNITS_PER_WORD)\n+      + (frame_pointer_needed ? UNITS_PER_WORD : 0);\n }\n \n /* Return nonzero if we can use \"rts\" for the function currently being"}, {"sha": "a16add75e32b406f3a508286cc390a58148bfb1c", "filename": "gcc/config/iq2000/iq2000.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fiq2000%2Fiq2000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fiq2000%2Fiq2000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fiq2000%2Fiq2000.c?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -2072,6 +2072,9 @@ iq2000_expand_prologue (void)\n \t}\n     }\n \n+  if (flag_stack_usage_info)\n+    current_function_static_stack_size = cfun->machine->total_size;\n+\n   emit_insn (gen_blockage ());\n }\n \f"}, {"sha": "83209aa2a3702303446c9e6dce52c3aaa5a6b570", "filename": "gcc/config/m32c/m32c.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fm32c%2Fm32c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fm32c%2Fm32c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fm32c.c?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -4123,6 +4123,9 @@ m32c_emit_prologue (void)\n       && !m32c_function_needs_enter ())\n     cfun->machine->use_rts = 1;\n \n+  if (flag_stack_usage_info)\n+    current_function_static_stack_size = frame_size;\n+  \n   if (frame_size > 254)\n     {\n       extra_frame_size = frame_size - 254;"}, {"sha": "cc40b4578b0433aca7831f57845f0e44e5c5e66c", "filename": "gcc/config/m32r/m32r.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fm32r%2Fm32r.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Fconfig%2Fm32r%2Fm32r.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32r%2Fm32r.c?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -1665,6 +1665,9 @@ m32r_expand_prologue (void)\n   if (! current_frame_info.initialized)\n     m32r_compute_frame_size (get_frame_size ());\n \n+  if (flag_stack_usage_info)\n+    current_function_static_stack_size = current_frame_info.total_size;\n+\n   gmask = current_frame_info.gmask;\n \n   /* These cases shouldn't happen.  Catch them now.  */"}, {"sha": "cb0c5bc5eea9e0ce1b54a62af22ddba15b3115b3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -1,3 +1,8 @@\n+2015-06-25  Nick Clifton  <nickc@redhat.com>\n+\n+\t* gcc.dg/stack-usage-1.c: Add SIZE values for V850, MN10300,\n+\tH8300 and M32R targets.\n+\n 2015-06-24  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR fortran/66528"}, {"sha": "55edc7ec61f448c97d9df22a10ca5c9aac58880a", "filename": "gcc/testsuite/gcc.dg/stack-usage-1.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Ftestsuite%2Fgcc.dg%2Fstack-usage-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1332ee11848c7d2ded43f143f4fdb05b0645eb/gcc%2Ftestsuite%2Fgcc.dg%2Fstack-usage-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fstack-usage-1.c?ref=ed1332ee11848c7d2ded43f143f4fdb05b0645eb", "patch": "@@ -81,6 +81,14 @@\n #  define SIZE 254\n #elif defined (__nios2__)\n #  define SIZE 252\n+#elif defined (__v850__)\n+#define SIZE 260\n+#elif defined (__mn10300__)\n+#define SIZE 252\n+#elif defined (__H8300SX__) || defined (__H8300S__) || defined (__H8300H__) || defined (__H8300__) \n+#define SIZE 252\n+#elif defined (__M32R__)\n+#define SIZE 252\n #else\n #  define SIZE 256\n #endif"}]}