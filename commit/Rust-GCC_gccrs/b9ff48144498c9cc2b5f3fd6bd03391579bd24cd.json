{"sha": "b9ff48144498c9cc2b5f3fd6bd03391579bd24cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjlmZjQ4MTQ0NDk4YzljYzJiNWYzZmQ2YmQwMzM5MTU3OWJkMjRjZA==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2000-01-28T16:34:00Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2000-01-28T16:34:00Z"}, "message": "diagnostic.c (build_message_string, [...]): Add ATTRIBUTE_PRINTF_*.\n\n        * diagnostic.c (build_message_string, output_printf,\n        line_wrapper_printf): Add ATTRIBUTE_PRINTF_*.\n        (build_location_prefix): Fix non-literal format string.\n\nFrom-SVN: r31669", "tree": {"sha": "97c01775857a42a4024e110809051cea97ee6677", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97c01775857a42a4024e110809051cea97ee6677"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd/comments", "author": null, "committer": null, "parents": [{"sha": "7267d6924e8ce13cbb4003cb6fe2a83702f8b0cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7267d6924e8ce13cbb4003cb6fe2a83702f8b0cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7267d6924e8ce13cbb4003cb6fe2a83702f8b0cc"}], "stats": {"total": 36, "additions": 26, "deletions": 10}, "files": [{"sha": "0ed01230f794620b6eef62c0da76cd23f9adcde0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b9ff48144498c9cc2b5f3fd6bd03391579bd24cd", "patch": "@@ -1,3 +1,9 @@\n+2000-01-28  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* diagnostic.c (build_message_string, output_printf,\n+\tline_wrapper_printf): Add ATTRIBUTE_PRINTF_*.\n+\t(build_location_prefix): Fix non-literal format string.\n+\n 2000-01-27  Richard Henderson  <rth@cygnus.com>\n \n         * alpha.md (trunctfsf2): New."}, {"sha": "97ec8c00d06317e5d201c92ab0b980763192dd0d", "filename": "gcc/diagnostic.c", "status": "modified", "additions": 20, "deletions": 10, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd/gcc%2Fdiagnostic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9ff48144498c9cc2b5f3fd6bd03391579bd24cd/gcc%2Fdiagnostic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.c?ref=b9ff48144498c9cc2b5f3fd6bd03391579bd24cd", "patch": "@@ -63,12 +63,15 @@ static void output_append PARAMS ((struct output_buffer *, const char *,\n static void output_puts PARAMS ((struct output_buffer *, const char *));\n static void dump_output PARAMS ((struct output_buffer *, FILE *));\n static const char *vbuild_message_string PARAMS ((const char *, va_list));\n-static const char *build_message_string PARAMS ((const char *, ...));\n+static const char *build_message_string PARAMS ((const char *, ...))\n+     ATTRIBUTE_PRINTF_1;\n static const char *build_location_prefix PARAMS ((const char *, int, int));\n static void voutput_notice PARAMS ((struct output_buffer *, const char *,\n \t\t\t\t    va_list));\n-static void output_printf PARAMS ((struct output_buffer *, const char *, ...));\n-static void line_wrapper_printf PARAMS ((FILE *, const char *, ...));\n+static void output_printf PARAMS ((struct output_buffer *, const char *, ...))\n+     ATTRIBUTE_PRINTF_2;\n+static void line_wrapper_printf PARAMS ((FILE *, const char *, ...))\n+     ATTRIBUTE_PRINTF_2;\n static void vline_wrapper_message_with_location PARAMS ((const char *, int,\n \t\t\t\t\t\t\t int, const char *,\n \t\t\t\t\t\t\t va_list));\n@@ -315,13 +318,20 @@ build_location_prefix (file, line, warn)\n      int line;\n      int warn;\n {\n-  const char *fmt = file\n-    ? (warn ? \"%s:%d: warning: \" : \"%s:%d: \")\n-    : (warn ? \"%s: warning: \" : \"%s: \");\n-\n-  return file\n-    ? build_message_string (fmt, file, line)\n-    : build_message_string (fmt, progname);\n+  if (file)\n+    {\n+      if (warn)\n+\treturn build_message_string (\"%s:%d: warning: \", file, line);\n+      else\n+\treturn build_message_string (\"%s:%d: \", file, line);\n+    }\n+  else\n+    {\n+      if (warn)\n+\treturn build_message_string (\"%s: warning: \", progname);\n+      else\n+\treturn build_message_string (\"%s: \", progname);\n+    }\n }\n \n /* Format a MESSAGE into BUFFER.  Automatically wrap lines.  */"}]}