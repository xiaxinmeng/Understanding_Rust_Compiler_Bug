{"sha": "a962b0a184bd0ec65f09de619f4d4555b0e1d965", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk2MmIwYTE4NGJkMGVjNjVmMDlkZTYxOWY0ZDQ1NTViMGUxZDk2NQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-21T07:27:26Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-21T07:27:26Z"}, "message": "decl.c (gnat_to_gnu_entity): Do not set force_global for imported subprograms.\n\n\t* gcc-interface/decl.c (gnat_to_gnu_entity): Do not set force_global\n\tfor imported subprograms.\n\nFrom-SVN: r146469", "tree": {"sha": "55f9187c0b6f69afbb0bd905dfd069a6e794ec8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55f9187c0b6f69afbb0bd905dfd069a6e794ec8a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a962b0a184bd0ec65f09de619f4d4555b0e1d965", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a962b0a184bd0ec65f09de619f4d4555b0e1d965", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a962b0a184bd0ec65f09de619f4d4555b0e1d965", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a962b0a184bd0ec65f09de619f4d4555b0e1d965/comments", "author": null, "committer": null, "parents": [{"sha": "2f283818fcf75a4e94037882f3d305dea89f3a74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f283818fcf75a4e94037882f3d305dea89f3a74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f283818fcf75a4e94037882f3d305dea89f3a74"}], "stats": {"total": 49, "additions": 41, "deletions": 8}, "files": [{"sha": "3b93881a9a03b37be5fe1cf4c5687e96870d12aa", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a962b0a184bd0ec65f09de619f4d4555b0e1d965", "patch": "@@ -1,3 +1,8 @@\n+2009-04-21  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity): Do not set force_global\n+\tfor imported subprograms.\n+\n 2009-04-21  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity) <object>: Do not make"}, {"sha": "898af248a33354bc1bf4ee88eae26dcd98f718ca", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=a962b0a184bd0ec65f09de619f4d4555b0e1d965", "patch": "@@ -332,13 +332,12 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n      another compilation unit) public entities, show we are at global level\n      for the purpose of computing scopes.  Don't do this for components or\n      discriminants since the relevant test is whether or not the record is\n-     being defined.  But do this for Imported functions or procedures in\n-     all cases.  */\n-  if ((!definition && Is_Public (gnat_entity)\n-       && !Is_Statically_Allocated (gnat_entity)\n-       && kind != E_Discriminant && kind != E_Component)\n-      || (Is_Imported (gnat_entity)\n-\t  && (kind == E_Function || kind == E_Procedure)))\n+     being defined.  */\n+  if (!definition\n+      && Is_Public (gnat_entity)\n+      && !Is_Statically_Allocated (gnat_entity)\n+      && kind != E_Component\n+      && kind != E_Discriminant)\n     force_global++, this_global = true;\n \n   /* Handle any attributes directly attached to the entity.  */"}, {"sha": "a81f64a5cd739ada8d871febbff7075d031555b8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a962b0a184bd0ec65f09de619f4d4555b0e1d965", "patch": "@@ -1,6 +1,11 @@\n+2009-04-21  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/import1.ad[sb]: New test.\n+\n 2009-04-20  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n-\t* objc/execute/exceptions/handler-1.m: For the NeXT runtime, just return 0.\n+\t* objc/execute/exceptions/handler-1.m: For the NeXT runtime, just\n+\treturn 0.\n \n 2009-04-20  Tobias Burnus  <burnus@net-b.de>\n "}, {"sha": "4e4056098b58919c39a474af125dc116859ca82c", "filename": "gcc/testsuite/gnat.dg/import1.adb", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Ftestsuite%2Fgnat.dg%2Fimport1.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Ftestsuite%2Fgnat.dg%2Fimport1.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fimport1.adb?ref=a962b0a184bd0ec65f09de619f4d4555b0e1d965", "patch": "@@ -0,0 +1,17 @@\n+-- { dg-do compile }\r\n+-- { dg-options \"-g\" }\r\n+\r\n+package body Import1 is\r\n+\r\n+   procedure Create (Bounds : Arr) is\r\n+      type Bound_Array is array (Bounds'Range) of Integer;\r\n+\r\n+      procedure Proc (Ptr : access Bound_Array);\r\n+      pragma Import (C, Proc);\r\n+\r\n+      Temp : aliased Bound_Array;\r\n+   begin\r\n+      Proc (Temp'Access);\r\n+   end;\r\n+\r\n+end Import1;\r"}, {"sha": "cb00a0caf4043b7651fc871c56f451be85d859e3", "filename": "gcc/testsuite/gnat.dg/import1.ads", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Ftestsuite%2Fgnat.dg%2Fimport1.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a962b0a184bd0ec65f09de619f4d4555b0e1d965/gcc%2Ftestsuite%2Fgnat.dg%2Fimport1.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fimport1.ads?ref=a962b0a184bd0ec65f09de619f4d4555b0e1d965", "patch": "@@ -0,0 +1,7 @@\n+package Import1 is\r\n+\r\n+   type Arr is array (Positive range <>) of Integer;\r\n+\r\n+   procedure Create (Bounds : Arr);\r\n+\r\n+end Import1;\r"}]}