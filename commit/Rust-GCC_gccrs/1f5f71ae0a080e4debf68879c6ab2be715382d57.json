{"sha": "1f5f71ae0a080e4debf68879c6ab2be715382d57", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWY1ZjcxYWUwYTA4MGU0ZGViZjY4ODc5YzZhYjJiZTcxNTM4MmQ1Nw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-28T22:10:10Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-28T22:10:10Z"}, "message": "(output_prolog): Use mr, lis, and li instructions.\n\nUse subf instruction if TARGET_POWERPC.\n(output_epilog): Use cal/addi instruction.\n\nFrom-SVN: r7168", "tree": {"sha": "16d4b98801b3792cf394f49e714f858ba62ea5e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16d4b98801b3792cf394f49e714f858ba62ea5e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f5f71ae0a080e4debf68879c6ab2be715382d57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f5f71ae0a080e4debf68879c6ab2be715382d57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f5f71ae0a080e4debf68879c6ab2be715382d57", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f5f71ae0a080e4debf68879c6ab2be715382d57/comments", "author": null, "committer": null, "parents": [{"sha": "6e151478b53a3c7fc92bf213376f04952a867a2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e151478b53a3c7fc92bf213376f04952a867a2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e151478b53a3c7fc92bf213376f04952a867a2b"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "06c216f01dbc6e7bea6cb34c18c9d573cfcc857c", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f5f71ae0a080e4debf68879c6ab2be715382d57/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f5f71ae0a080e4debf68879c6ab2be715382d57/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=1f5f71ae0a080e4debf68879c6ab2be715382d57", "patch": "@@ -1535,16 +1535,19 @@ output_prolog (file, size)\n \tasm_fprintf (file, \"\\t{stu|stwu} 1,%d(1)\\n\", - total_size);\n       else\n \t{\n-\t  asm_fprintf (file, \"\\t{cau|addis} 0,0,%d\\n\\t{oril|ori} 0,0,%d\\n\",\n+\t  asm_fprintf (file, \"\\t{cau 0,0,%d|lis 0,%d}\\n\\t{oril 0,0,%d|li 0,%d}\\n\",\n \t\t   (total_size >> 16) & 0xffff, total_size & 0xffff);\n-\t  asm_fprintf (file, \"\\t{sf|subfc} 12,0,1\\n\");\n-\t  asm_fprintf (file, \"\\t{st|stw} 1,0(12)\\n\\t{oril|ori} 1,12,0\\n\");\n+\t  if (TARGET_POWERPC)\n+\t    asm_fprintf (file, \"\\tsubf 12,0,1\\n\");\n+\t  else\n+\t    asm_fprintf (file, \"\\t{sf|subfc} 12,0,1\\n\");\n+\t  asm_fprintf (file, \"\\t{st|stw} 1,0(12)\\n\\tmr 1,12\\n\");\n \t}\n     }\n \n   /* Set frame pointer, if needed.  */\n   if (frame_pointer_needed)\n-    asm_fprintf (file, \"\\t{oril|ori} 31,1,0\\n\");\n+    asm_fprintf (file, \"\\tmr 31,1\\n\");\n \n   /* If TARGET_MINIMAL_TOC, and the constant pool is needed, then load the\n      TOC_TABLE address into register 30.  */\n@@ -1589,7 +1592,7 @@ output_epilog (file, size)\n \t  || total_size > 32767)\n \tasm_fprintf (file, \"\\t{l|lwz} 1,0(1)\\n\");\n       else if (must_push)\n-\tasm_fprintf (file, \"\\t{ai|addic} 1,1,%d\\n\", total_size);\n+\tasm_fprintf (file, \"\\t{cal 1,%d(1)|addi 1,1,%d}\\n\", total_size);\n \n       /* Get the old lr if we saved it.  */\n       if (regs_ever_live[65])"}]}