{"sha": "bffad7f1cf127cbc4b103db2f30317e9f59422fd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZmYWQ3ZjFjZjEyN2NiYzRiMTAzZGIyZjMwMzE3ZTlmNTk0MjJmZA==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2010-05-28T23:13:18Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2010-05-28T23:13:18Z"}, "message": "c-common.h: Add FIXME for awkward split of c_register_addr_space.\n\ngcc/ChangeLog:\n\t* c-common.h: Add FIXME for awkward split of c_register_addr_space.\n\t* c-common.c (c_register_addr_space): Remove here.\n\t* c-decl.c (c_register_addr_space): Re-add here.\n\ncp/ChangeLog:\n\t* tree.c (c_register_addr_space): Add stub.\n\nFrom-SVN: r160006", "tree": {"sha": "10c0cab781166ed9521df083f46d8b46e2cb8deb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10c0cab781166ed9521df083f46d8b46e2cb8deb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bffad7f1cf127cbc4b103db2f30317e9f59422fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bffad7f1cf127cbc4b103db2f30317e9f59422fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bffad7f1cf127cbc4b103db2f30317e9f59422fd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bffad7f1cf127cbc4b103db2f30317e9f59422fd/comments", "author": null, "committer": null, "parents": [{"sha": "d685a689926729886f15c873b3a97b91464e063e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d685a689926729886f15c873b3a97b91464e063e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d685a689926729886f15c873b3a97b91464e063e"}], "stats": {"total": 62, "additions": 42, "deletions": 20}, "files": [{"sha": "be57481b0c350c6f06a425b25500a31c96af09de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bffad7f1cf127cbc4b103db2f30317e9f59422fd", "patch": "@@ -1,3 +1,9 @@\n+2010-05-29  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* c-common.h: Add FIXME for awkward split of c_register_addr_space.\n+\t* c-common.c (c_register_addr_space): Remove here.\n+\t* c-decl.c (c_register_addr_space): Re-add here.\n+\n 2010-05-28  Mike Stump  <mikestump@comcast.net>\n \n \t* config/darwin-c.c: Remove c-tree.h include."}, {"sha": "328634728e84a8f3a54aa1ccd70430b2423536a3", "filename": "gcc/c-common.c", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=bffad7f1cf127cbc4b103db2f30317e9f59422fd", "patch": "@@ -853,26 +853,6 @@ const struct attribute_spec c_common_format_attribute_table[] =\n   { NULL,                     0, 0, false, false, false, NULL }\n };\n \n-\n-/* Register reserved keyword WORD as qualifier for address space AS.  */\n-\n-void\n-c_register_addr_space (const char *word, addr_space_t as)\n-{\n-  int rid = RID_FIRST_ADDR_SPACE + as;\n-  tree id;\n-\n-  /* Address space qualifiers are only supported\n-     in C with GNU extensions enabled.  */\n-  if (c_dialect_cxx () || c_dialect_objc () || flag_no_asm)\n-    return;\n-\n-  id = get_identifier (word);\n-  C_SET_RID_CODE (id, rid);\n-  C_IS_RESERVED_WORD (id) = 1;\n-  ridpointers [rid] = id;\n-}\n-\n /* Return identifier for address space AS.  */\n \n const char *"}, {"sha": "3056cae3aa1e3a4416d1ed26ce97b2a494ec8372", "filename": "gcc/c-common.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fc-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fc-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.h?ref=bffad7f1cf127cbc4b103db2f30317e9f59422fd", "patch": "@@ -799,7 +799,10 @@ extern const struct attribute_spec c_common_format_attribute_table[];\n \n extern tree (*make_fname_decl) (location_t, tree, int);\n \n+/* In c-decl.c and cp/tree.c.  FIXME.  */\n extern void c_register_addr_space (const char *str, addr_space_t as);\n+\n+/* In c-common.c.  */\n extern const char *c_addr_space_name (addr_space_t as);\n extern tree identifier_global_value (tree);\n extern void record_builtin_type (enum rid, const char *, tree);"}, {"sha": "82632d99345e5ec9906c3243abed0fab38e65221", "filename": "gcc/c-decl.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=bffad7f1cf127cbc4b103db2f30317e9f59422fd", "patch": "@@ -9672,4 +9672,23 @@ c_write_global_declarations (void)\n   ext_block = NULL;\n }\n \n+/* Register reserved keyword WORD as qualifier for address space AS.  */\n+\n+void\n+c_register_addr_space (const char *word, addr_space_t as)\n+{\n+  int rid = RID_FIRST_ADDR_SPACE + as;\n+  tree id;\n+\n+  /* Address space qualifiers are only supported\n+     in C with GNU extensions enabled.  */\n+  if (c_dialect_objc () || flag_no_asm)\n+    return;\n+\n+  id = get_identifier (word);\n+  C_SET_RID_CODE (id, rid);\n+  C_IS_RESERVED_WORD (id) = 1;\n+  ridpointers [rid] = id;\n+}\n+\n #include \"gt-c-decl.h\""}, {"sha": "d9164d2e4dd5089df7ee10caebd9e4328abedb89", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=bffad7f1cf127cbc4b103db2f30317e9f59422fd", "patch": "@@ -1,3 +1,7 @@\n+2010-05-29  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* tree.c (c_register_addr_space): Add stub.\n+\n 2010-05-28  Joseph Myers  <joseph@codesourcery.com>\n \n \t* g++spec.c (lang_specific_driver): Use fatal_error instead of"}, {"sha": "9a5ee0fb2d81a4bd12b17f413fb613d7e07aff69", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffad7f1cf127cbc4b103db2f30317e9f59422fd/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=bffad7f1cf127cbc4b103db2f30317e9f59422fd", "patch": "@@ -3199,6 +3199,16 @@ cp_free_lang_data (tree t)\n     }\n }\n \n+/* Stub for c-common.  Please keep in sync with c-decl.c.\n+   FIXME: If address space support is target specific, then this\n+   should be a C target hook.  But currently this is not possible,\n+   because this function is called via REGISTER_TARGET_PRAGMAS.  */\n+void\n+c_register_addr_space (const char *word ATTRIBUTE_UNUSED,\n+\t\t       addr_space_t as ATTRIBUTE_UNUSED)\n+{\n+}\n+\n \f\n #if defined ENABLE_TREE_CHECKING && (GCC_VERSION >= 2007)\n /* Complain that some language-specific thing hanging off a tree"}]}