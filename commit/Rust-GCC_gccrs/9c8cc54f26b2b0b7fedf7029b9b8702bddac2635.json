{"sha": "9c8cc54f26b2b0b7fedf7029b9b8702bddac2635", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM4Y2M1NGYyNmIyYjBiN2ZlZGY3MDI5YjliODcwMmJkZGFjMjYzNQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "1998-09-19T07:57:44Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "1998-09-19T07:57:44Z"}, "message": "arm.c (bad_signed_byte_operand): Check both arms of a sum in a memory address.\n\n* arm.c (bad_signed_byte_operand): Check both arms of a sum in\na memory address.\n* arm.md (splits for *extendqihi_insn and *extendqisi_insn): Handle\nmemory addresses that are not in standard canonical form.\n\nFrom-SVN: r22478", "tree": {"sha": "0d2d5a15724833ebde59a1a201e04441d1b90528", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d2d5a15724833ebde59a1a201e04441d1b90528"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635/comments", "author": null, "committer": null, "parents": [{"sha": "332072dbd12841f96ec5f6a5048777a8d7ad266d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/332072dbd12841f96ec5f6a5048777a8d7ad266d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/332072dbd12841f96ec5f6a5048777a8d7ad266d"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "37e463792aff58350fe93b3383feef55aace7c78", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9c8cc54f26b2b0b7fedf7029b9b8702bddac2635", "patch": "@@ -5,6 +5,11 @@ Sat Sep 19 07:33:36 1998  Richard Earnshaw (rearnsha@arm.com)\n \t(arm_reorg): Handle cases where we need the address of an item in\n \tthe pool.\n \n+\t* arm.c (bad_signed_byte_operand): Check both arms of a sum in\n+\ta memory address.\n+\t* arm.md (splits for *extendqihi_insn and *extendqisi_insn): Handle\n+\tmemory addresses that are not in standard canonical form.\n+\n Sat Sep 19 01:00:32 1998  Michael Hayes  (mph@elec.canterbury.ac.nz)\n \n \t* README.C4X: New file with information about the c4x ports."}, {"sha": "9a808a80f8dc4a4d6ffec51e9f5482de551e6853", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=9c8cc54f26b2b0b7fedf7029b9b8702bddac2635", "patch": "@@ -1769,7 +1769,9 @@ bad_signed_byte_operand (op, mode)\n \n   /* A sum of anything more complex than reg + reg or reg + const is bad */\n   if ((GET_CODE (op) == PLUS || GET_CODE (op) == MINUS)\n-      && ! s_register_operand (XEXP (op, 0), VOIDmode))\n+      && (! s_register_operand (XEXP (op, 0), VOIDmode)\n+\t  || (! s_register_operand (XEXP (op, 1), VOIDmode)\n+\t      && GET_CODE (XEXP (op, 1)) != CONST_INT)))\n     return 1;\n \n   /* Big constants are also bad */"}, {"sha": "18093c784e7e3744859e5a094fac727e63c7b6dd", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c8cc54f26b2b0b7fedf7029b9b8702bddac2635/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=9c8cc54f26b2b0b7fedf7029b9b8702bddac2635", "patch": "@@ -2399,6 +2399,12 @@\n \tXEXP (operands[2], 0) = plus_constant (operands[3], low);\n \toperands[1] = plus_constant (XEXP (operands[1], 0), offset - low);\n       }\n+    /* Ensure the sum is in correct canonical form */\n+    else if (GET_CODE (operands[1]) == PLUS\n+\t     && GET_CODE (XEXP (operands[1], 1)) != CONST_INT\n+\t     && ! s_register_operand (XEXP (operands[1], 1), VOIDmode))\n+      operands[1] = gen_rtx (PLUS, GET_MODE (operands[1]),\n+\t\t\t     XEXP (operands[1], 1), XEXP (operands[1], 0));\n   }\n \")\n \n@@ -2464,6 +2470,12 @@\n \tXEXP (operands[2], 0) = plus_constant (operands[0], low);\n \toperands[1] = plus_constant (XEXP (operands[1], 0), offset - low);\n       }\n+    /* Ensure the sum is in correct canonical form */\n+    else if (GET_CODE (operands[1]) == PLUS\n+\t     && GET_CODE (XEXP (operands[1], 1)) != CONST_INT\n+\t     && ! s_register_operand (XEXP (operands[1], 1), VOIDmode))\n+      operands[1] = gen_rtx (PLUS, GET_MODE (operands[1]),\n+\t\t\t     XEXP (operands[1], 1), XEXP (operands[1], 0));\n   }\n \")\n "}]}