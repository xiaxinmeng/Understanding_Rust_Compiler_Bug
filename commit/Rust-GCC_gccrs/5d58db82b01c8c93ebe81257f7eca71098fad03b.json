{"sha": "5d58db82b01c8c93ebe81257f7eca71098fad03b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQ1OGRiODJiMDFjOGM5M2ViZTgxMjU3ZjdlY2E3MTA5OGZhZDAzYg==", "commit": {"author": {"name": "Patrick Palka", "email": "patrick@parcs.ath.cx", "date": "2015-06-02T17:50:13Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2015-06-02T17:50:13Z"}, "message": "cp-tree.h (init_error): Remove declaration.\n\n\t* cp-tree.h (init_error): Remove declaration.\n\t* error.c (scratch_pretty_printer): Rename to ...\n\t(actual_pretty_printer): ... this.\n\t(cxx_pp): Constify and update accordingly.\n\t(init_error): Remove definition.\n\t* lex.c (cxx_init): Do not call init_error.\n\nFrom-SVN: r224037", "tree": {"sha": "ef91ed22923e9247fad2ce790e2e86b7b33ba0ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef91ed22923e9247fad2ce790e2e86b7b33ba0ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d58db82b01c8c93ebe81257f7eca71098fad03b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d58db82b01c8c93ebe81257f7eca71098fad03b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d58db82b01c8c93ebe81257f7eca71098fad03b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d58db82b01c8c93ebe81257f7eca71098fad03b/comments", "author": null, "committer": null, "parents": [{"sha": "1a607203b23e1429dd128b106d5a476a8fd1a8a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a607203b23e1429dd128b106d5a476a8fd1a8a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a607203b23e1429dd128b106d5a476a8fd1a8a4"}], "stats": {"total": 25, "additions": 11, "deletions": 14}, "files": [{"sha": "b6a8ab546612c26845ef7310abb23088fd23139f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5d58db82b01c8c93ebe81257f7eca71098fad03b", "patch": "@@ -1,3 +1,12 @@\n+2015-06-02  Patrick Palka <patrick@parcs.ath.cx>\n+\n+\t* cp-tree.h (init_error): Remove declaration.\n+\t* error.c (scratch_pretty_printer): Rename to ...\n+\t(actual_pretty_printer): ... this.\n+\t(cxx_pp): Constify and update accordingly.\n+\t(init_error): Remove definition.\n+\t* lex.c (cxx_init): Do not call init_error.\n+\n 2015-06-02  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/61683"}, {"sha": "9107fa68b642acf0abadbfc2e542e2dd10719219", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=5d58db82b01c8c93ebe81257f7eca71098fad03b", "patch": "@@ -5505,7 +5505,6 @@ extern tree vtv_finish_verification_constructor_init_function (tree);\n extern bool cp_omp_mappable_type\t\t(tree);\n \n /* in error.c */\n-extern void init_error\t\t\t\t(void);\n extern const char *type_as_string\t\t(tree, int);\n extern const char *type_as_string_translate\t(tree, int);\n extern const char *decl_as_string\t\t(tree, int);"}, {"sha": "690cb0c50d341037df021ad5b2db18241a436942", "filename": "gcc/cp/error.c", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=5d58db82b01c8c93ebe81257f7eca71098fad03b", "patch": "@@ -54,8 +54,8 @@ along with GCC; see the file COPYING3.  If not see\n    tree -> string functions that are occasionally called from the\n    debugger or by the front-end for things like\n    __PRETTY_FUNCTION__.  */\n-static cxx_pretty_printer scratch_pretty_printer;\n-static cxx_pretty_printer * cxx_pp = &scratch_pretty_printer;\n+static cxx_pretty_printer actual_pretty_printer;\n+static cxx_pretty_printer * const cxx_pp = &actual_pretty_printer;\n \n /* Translate if being used for diagnostics, but not for dump files or\n    __PRETTY_FUNCTION.  */\n@@ -140,16 +140,6 @@ cxx_initialize_diagnostics (diagnostic_context *context)\n   diagnostic_format_decoder (context) = cp_printer;\n }\n \n-/* Initialize the global cxx_pp that is used as the memory store for\n-   the string representation of C++ AST.  See the description of\n-   cxx_pp above.  */\n-\n-void\n-init_error (void)\n-{\n-  new (cxx_pp) cxx_pretty_printer ();\n-}\n-\n /* Dump a scope, if deemed necessary.  */\n \n static void"}, {"sha": "bde15bcb2d6a2a5be093394af4c49b9c23c2b1b8", "filename": "gcc/cp/lex.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d58db82b01c8c93ebe81257f7eca71098fad03b/gcc%2Fcp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Flex.c?ref=5d58db82b01c8c93ebe81257f7eca71098fad03b", "patch": "@@ -259,7 +259,6 @@ cxx_init (void)\n   init_cp_semantics ();\n   init_operators ();\n   init_method ();\n-  init_error ();\n \n   current_function_decl = NULL;\n "}]}