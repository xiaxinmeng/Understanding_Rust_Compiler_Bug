{"sha": "45ea41fe8a833e4605ce0a1af794530030d483e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDVlYTQxZmU4YTgzM2U0NjA1Y2UwYTFhZjc5NDUzMDAzMGQ0ODNlNA==", "commit": {"author": {"name": "Hale Wang", "email": "hale.wang@arm.com", "date": "2014-11-06T07:02:30Z"}, "committer": {"name": "Hale Wang", "email": "halewang@gcc.gnu.org", "date": "2014-11-06T07:02:30Z"}, "message": "arm-cores.def: Add support for -mcpu=cortex-m0.small-multiply,cortex-m0plus.small-multiply...\n\n2014-11-06  Hale Wang  <Hale.Wang@arm.com>\n\n\t* config/arm/arm-cores.def: Add support for\n\t-mcpu=cortex-m0.small-multiply,cortex-m0plus.small-multiply,\n\tcortex-m1.small-multiply.\n\t* config/arm/arm-tables.opt: Regenerate.\n\t* config/arm/arm-tune.md: Regenerate.\n\t* config/arm/arm.c: Update the rtx-costs for MUL.\n\t* config/arm/bpabi.h: Handle\n\t-mcpu=cortex-m0.small-multiply,cortex-m0plus.small-multiply,\n\tcortex-m1.small-multiply.\n\t* doc/invoke.texi: Document\n\t-mcpu=cortex-m0.small-multiply,cortex-m0plus.small-multiply,\n\tcortex-m1.small-multiply.\n\t* testsuite/gcc.target/arm/small-multiply-m0-1.c: New test case.\n\t* testsuite/gcc.target/arm/small-multiply-m0-2.c: Likewise.\n\t* testsuite/gcc.target/arm/small-multiply-m0-3.c: Likewise.\n\t* testsuite/gcc.target/arm/small-multiply-m0plus-1.c: Likewise.\n\t* testsuite/gcc.target/arm/small-multiply-m0plus-2.c: Likewise.\n\t* testsuite/gcc.target/arm/small-multiply-m0plus-3.c: Likewise.\n\t* testsuite/gcc.target/arm/small-multiply-m1-1.c: Likewise.\n\t* testsuite/gcc.target/arm/small-multiply-m1-2.c: Likewise.\n\t* testsuite/gcc.target/arm/small-multiply-m1-3.c: Likewise.\n\nFrom-SVN: r217175", "tree": {"sha": "e98251d1647ed505ef5315995b1d1ee5ae231df6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e98251d1647ed505ef5315995b1d1ee5ae231df6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45ea41fe8a833e4605ce0a1af794530030d483e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45ea41fe8a833e4605ce0a1af794530030d483e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45ea41fe8a833e4605ce0a1af794530030d483e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45ea41fe8a833e4605ce0a1af794530030d483e4/comments", "author": null, "committer": null, "parents": [{"sha": "3db7c8e4b4bef047836ad61ba8a0e5319869ad97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3db7c8e4b4bef047836ad61ba8a0e5319869ad97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3db7c8e4b4bef047836ad61ba8a0e5319869ad97"}], "stats": {"total": 176, "additions": 174, "deletions": 2}, "files": [{"sha": "0a2748bf9095cc60d86ef7f9d8fead768c9987d5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -1,3 +1,27 @@\n+2014-11-06  Hale Wang  <Hale.Wang@arm.com>\n+\n+\t* config/arm/arm-cores.def: Add support for\n+\t-mcpu=cortex-m0.small-multiply,cortex-m0plus.small-multiply,\n+\tcortex-m1.small-multiply.\n+\t* config/arm/arm-tables.opt: Regenerate.\n+\t* config/arm/arm-tune.md: Regenerate.\n+\t* config/arm/arm.c: Update the rtx-costs for MUL.\n+\t* config/arm/bpabi.h: Handle\n+\t-mcpu=cortex-m0.small-multiply,cortex-m0plus.small-multiply,\n+\tcortex-m1.small-multiply.\n+\t* doc/invoke.texi: Document\n+\t-mcpu=cortex-m0.small-multiply,cortex-m0plus.small-multiply,\n+\tcortex-m1.small-multiply.\n+\t* testsuite/gcc.target/arm/small-multiply-m0-1.c: New test case.\n+\t* testsuite/gcc.target/arm/small-multiply-m0-2.c: Likewise.\n+\t* testsuite/gcc.target/arm/small-multiply-m0-3.c: Likewise.\n+\t* testsuite/gcc.target/arm/small-multiply-m0plus-1.c: Likewise.\n+\t* testsuite/gcc.target/arm/small-multiply-m0plus-2.c: Likewise.\n+\t* testsuite/gcc.target/arm/small-multiply-m0plus-3.c: Likewise.\n+\t* testsuite/gcc.target/arm/small-multiply-m1-1.c: Likewise.\n+\t* testsuite/gcc.target/arm/small-multiply-m1-2.c: Likewise.\n+\t* testsuite/gcc.target/arm/small-multiply-m1-3.c: Likewise.\n+\n 2014-11-06  Hale Wang  <Hale.Wang@arm.com>\n \n \t* config/arm/arm.c: Add cortex-m7 tune."}, {"sha": "d5067b0e9b9255181a95c116e3131c98c89ff79e", "filename": "gcc/config/arm/arm-cores.def", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm-cores.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm-cores.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-cores.def?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -137,6 +137,11 @@ ARM_CORE(\"cortex-m1\",\t\tcortexm1, cortexm1,\t\t6M, FL_LDSCHED, v6m)\n ARM_CORE(\"cortex-m0\",\t\tcortexm0, cortexm0,\t\t6M, FL_LDSCHED, v6m)\n ARM_CORE(\"cortex-m0plus\",\tcortexm0plus, cortexm0plus,\t6M, FL_LDSCHED, v6m)\n \n+/* V6M Architecture Processors for small-multiply implementations.  */\n+ARM_CORE(\"cortex-m1.small-multiply\",\tcortexm1smallmultiply, cortexm1,\t6M, FL_LDSCHED | FL_SMALLMUL, v6m)\n+ARM_CORE(\"cortex-m0.small-multiply\",\tcortexm0smallmultiply, cortexm0,\t6M, FL_LDSCHED | FL_SMALLMUL, v6m)\n+ARM_CORE(\"cortex-m0plus.small-multiply\",cortexm0plussmallmultiply, cortexm0plus,6M, FL_LDSCHED | FL_SMALLMUL, v6m)\n+\n /* V7 Architecture Processors */\n ARM_CORE(\"generic-armv7-a\",\tgenericv7a, genericv7a,\t\t7A,  FL_LDSCHED, cortex)\n ARM_CORE(\"cortex-a5\",\t\tcortexa5, cortexa5,\t\t7A,  FL_LDSCHED, cortex_a5)"}, {"sha": "9c7e944bfcbc7a3f3e5cbfa625b56b0099c842da", "filename": "gcc/config/arm/arm-tables.opt", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm-tables.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm-tables.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-tables.opt?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -240,6 +240,15 @@ Enum(processor_type) String(cortex-m0) Value(cortexm0)\n EnumValue\n Enum(processor_type) String(cortex-m0plus) Value(cortexm0plus)\n \n+EnumValue\n+Enum(processor_type) String(cortex-m1.small-multiply) Value(cortexm1smallmultiply)\n+\n+EnumValue\n+Enum(processor_type) String(cortex-m0.small-multiply) Value(cortexm0smallmultiply)\n+\n+EnumValue\n+Enum(processor_type) String(cortex-m0plus.small-multiply) Value(cortexm0plussmallmultiply)\n+\n EnumValue\n Enum(processor_type) String(generic-armv7-a) Value(genericv7a)\n "}, {"sha": "84355d69e467652069c4649d26685f2dba20a6e9", "filename": "gcc/config/arm/arm-tune.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm-tune.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm-tune.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-tune.md?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -25,6 +25,7 @@\n \tarm1176jzs,arm1176jzfs,mpcorenovfp,\n \tmpcore,arm1156t2s,arm1156t2fs,\n \tcortexm1,cortexm0,cortexm0plus,\n+\tcortexm1smallmultiply,cortexm0smallmultiply,cortexm0plussmallmultiply,\n \tgenericv7a,cortexa5,cortexa7,\n \tcortexa8,cortexa9,cortexa12,\n \tcortexa15,cortexr4,cortexr4f,"}, {"sha": "9e07d600c94a01f562334e591f35ebeffc573d6c", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -770,6 +770,8 @@ static int thumb_call_reg_needed;\n #define FL_ARCH8      (1 << 24)       /* Architecture 8.  */\n #define FL_CRC32      (1 << 25)\t      /* ARMv8 CRC32 instructions.  */\n \n+#define FL_SMALLMUL   (1 << 26)       /* Small multiply supported.  */\n+\n #define FL_IWMMXT     (1 << 29)\t      /* XScale v2 or \"Intel Wireless MMX technology\".  */\n #define FL_IWMMXT2    (1 << 30)       /* \"Intel Wireless MMX2 technology\".  */\n \n@@ -933,6 +935,9 @@ int arm_condexec_masklen = 0;\n /* Nonzero if chip supports the ARMv8 CRC instructions.  */\n int arm_arch_crc = 0;\n \n+/* Nonzero if the core has a very small, high-latency, multiply unit.  */\n+int arm_m_profile_small_mul = 0;\n+\n /* The condition codes of the ARM, and the inverse function.  */\n static const char * const arm_condition_codes[] =\n {\n@@ -2824,6 +2829,7 @@ arm_option_override (void)\n   arm_arch_arm_hwdiv = (insn_flags & FL_ARM_DIV) != 0;\n   arm_tune_cortex_a9 = (arm_tune == cortexa9) != 0;\n   arm_arch_crc = (insn_flags & FL_CRC32) != 0;\n+  arm_m_profile_small_mul = (insn_flags & FL_SMALLMUL) != 0;\n   if (arm_restrict_it == 2)\n     arm_restrict_it = arm_arch8 && TARGET_THUMB2;\n \n@@ -8960,7 +8966,13 @@ thumb1_size_rtx_costs (rtx x, enum rtx_code code, enum rtx_code outer)\n           /* Thumb1 mul instruction can't operate on const. We must Load it\n              into a register first.  */\n           int const_size = thumb1_size_rtx_costs (XEXP (x, 1), CONST_INT, SET);\n-          return COSTS_N_INSNS (1) + const_size;\n+\t  /* For the targets which have a very small and high-latency multiply\n+\t     unit, we prefer to synthesize the mult with up to 5 instructions,\n+\t     giving a good balance between size and performance.  */\n+\t  if (arm_arch6m && arm_m_profile_small_mul)\n+\t    return COSTS_N_INSNS (5);\n+\t  else\n+\t    return COSTS_N_INSNS (1) + const_size;\n         }\n       return COSTS_N_INSNS (1);\n \n@@ -11378,7 +11390,11 @@ arm_9e_rtx_costs (rtx x, enum rtx_code code, enum rtx_code outer_code,\n       switch (code)\n \t{\n \tcase MULT:\n-\t  *total = COSTS_N_INSNS (3);\n+\t  /* Small multiply: 32 cycles for an integer multiply inst.  */\n+\t  if (arm_arch6m && arm_m_profile_small_mul)\n+\t    *total = COSTS_N_INSNS (32);\n+\t  else\n+\t    *total = COSTS_N_INSNS (3);\n \t  return true;\n \n \tdefault:"}, {"sha": "f99e1af1e1ad27f0cfbc0cfb9e9daa80ebe49f65", "filename": "gcc/config/arm/bpabi.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Fbpabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fconfig%2Farm%2Fbpabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fbpabi.h?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -70,6 +70,9 @@\n    |mcpu=cortex-a53\t\t\t\t\t\\\n    |mcpu=cortex-a57\t\t\t\t\t\\\n    |mcpu=cortex-a57.cortex-a53\t\t\t\t\\\n+   |mcpu=cortex-m1.small-multiply                       \\\n+   |mcpu=cortex-m0.small-multiply                       \\\n+   |mcpu=cortex-m0plus.small-multiply\t\t\t\\\n    |mcpu=generic-armv7-a                                \\\n    |march=armv7ve\t                                \\\n    |march=armv7-m|mcpu=cortex-m3                        \\\n@@ -87,6 +90,9 @@\n    |mcpu=cortex-a53\t\t\t\t\t\\\n    |mcpu=cortex-a57\t\t\t\t\t\\\n    |mcpu=cortex-a57.cortex-a53\t\t\t\t\\\n+   |mcpu=cortex-m1.small-multiply                       \\\n+   |mcpu=cortex-m0.small-multiply                       \\\n+   |mcpu=cortex-m0plus.small-multiply                   \\\n    |mcpu=marvell-pj4\t\t\t\t\t\\\n    |mcpu=generic-armv7-a                                \\\n    |march=armv7ve\t                                \\"}, {"sha": "209c8f68bc982782f3a0a9fe3fe1e19d03b05906", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -12747,6 +12747,9 @@ Permissible names are: @samp{arm2}, @samp{arm250},\n @samp{cortex-m1},\n @samp{cortex-m0},\n @samp{cortex-m0plus},\n+@samp{cortex-m1.small-multiply},\n+@samp{cortex-m0.small-multiply},\n+@samp{cortex-m0plus.small-multiply},\n @samp{marvell-pj4},\n @samp{xscale}, @samp{iwmmxt}, @samp{iwmmxt2}, @samp{ep9312},\n @samp{fa526}, @samp{fa626},"}, {"sha": "77ec603e623ac738ebc50433971b77a218ab2d8b", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m0-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-1.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m0.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m0.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m0.small-multiply -mthumb -O2\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x123456;\n+}\n+\n+/* { dg-final { scan-assembler-not \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "c89b3bacf34b1f40dfee705faf7e62d1d76791bb", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m0-2.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-2.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m0.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m0.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m0.small-multiply -mthumb -Os\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x123456;\n+}\n+\n+/* { dg-final { scan-assembler \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "b2df109ff639f38fd97fb8409b9d00895e6dc719", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m0-3.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0-3.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m0.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m0.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m0.small-multiply -mthumb -Os\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x13;\n+}\n+\n+/* { dg-final { scan-assembler-not \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "08a450bd06076b6347366dd1267e495ec49ac61d", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m0plus-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-1.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m0plus.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m0plus.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m0plus.small-multiply -mthumb -O2\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x123456;\n+}\n+\n+/* { dg-final { scan-assembler-not \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "17b52d3270e0fa36587fb27b556953dc5c5d7bfa", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m0plus-2.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-2.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m0plus.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m0plus.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m0plus.small-multiply -mthumb -Os\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x123456;\n+}\n+\n+/* { dg-final { scan-assembler \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "af69c7566f3ebae79cbbae86d7f3a5e380328f51", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m0plus-3.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m0plus-3.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m0plus.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m0plus.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m0plus.small-multiply -mthumb -Os\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x13;\n+}\n+\n+/* { dg-final { scan-assembler-not \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "d265aafbb5a232d6030f8cecd51df87fd818f313", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m1-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-1.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m1.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m1.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m1.small-multiply -mthumb -O2\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x123456;\n+}\n+\n+/* { dg-final { scan-assembler-not \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "c50891c1b4c0abfea2c1a75c5509fa1173d82ccf", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m1-2.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-2.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m1.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m1.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m1.small-multiply -mthumb -Os\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x123456;\n+}\n+\n+/* { dg-final { scan-assembler \"\\[\\\\t \\]+mul\" } } */"}, {"sha": "1da21a62ac40554f930b32d52cfcb566ea267c58", "filename": "gcc/testsuite/gcc.target/arm/small-multiply-m1-3.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45ea41fe8a833e4605ce0a1af794530030d483e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsmall-multiply-m1-3.c?ref=45ea41fe8a833e4605ce0a1af794530030d483e4", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+/* { dg-skip-if \"Test is specific to cortex-m1.small-multiply\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=cortex-m1.small-multiply\" } } */\n+/* { dg-options \"-mcpu=cortex-m1.small-multiply -mthumb -Os\" } */\n+\n+int\n+test (int a)\n+{\n+  return a * 0x13;\n+}\n+\n+/* { dg-final { scan-assembler-not \"\\[\\\\t \\]+mul\" } } */"}]}