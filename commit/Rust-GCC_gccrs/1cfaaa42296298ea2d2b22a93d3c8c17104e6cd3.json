{"sha": "1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "node_id": "C_kwDOANBUbNoAKDFjZmFhYTQyMjk2Mjk4ZWEyZDJiMjJhOTNkM2M4YzE3MTA0ZTZjZDM", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2023-01-19T11:15:14Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2023-01-19T13:47:59Z"}, "message": "modula2/108144 - fix --enable-version-specific-runtime-libs\n\nThe following fixes --enable-version-specific-runtime-libs for\nthe modula2 target libraries.  The issue is that the install\nhappens via for example\n\ntoolexeclib_LTLIBRARIES = libm2cor.la\n\nand toolexeclibdir is set to $(toolexecdir)/$(gcc_version)$(MULTISUBDIR)\nbut the Makefile.am do not define $(gcc_version) but instead\n$(version) which is used locally to define libsubdir.  The fix\nis to consistently define and use $(gcc_version), also properly\nsupporting --with-gcc-major-version-only\n\n\tPR modula2/108144\nlibgm2/\n\t* configure.ac: Add GCC_BASE_VER.\n\t* configure: Re-generate.\n\t* Makefile.am: Use @get_gcc_base_ver@ for gcc_version.\n\t* libm2cor/Makefile.am: Likewise.  Use gcc_version instead\n\tof version.\n\t* libm2iso/Makefile.am: Likewise.\n\t* libm2log/Makefile.am: Likewise.\n\t* libm2min/Makefile.am: Likewise.\n\t* libm2pim/Makefile.am: Likewise.\n\t* Makefile.in: Re-generate.\n\t* libm2cor/Makefile.in: Likewise.\n\t* libm2iso/Makefile.in: Likewise.\n\t* libm2log/Makefile.in: Likewise.\n\t* libm2min/Makefile.in: Likewise.\n\t* libm2pim/Makefile.in: Likewise.", "tree": {"sha": "5886396635b2553c133385a93bffc273d645a07d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5886396635b2553c133385a93bffc273d645a07d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "05b9868b182bb9ed2013b39a0bc6297354a0db49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05b9868b182bb9ed2013b39a0bc6297354a0db49", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05b9868b182bb9ed2013b39a0bc6297354a0db49"}], "stats": {"total": 76, "additions": 52, "deletions": 24}, "files": [{"sha": "524ea6c7124075f3637d5c94a9fb8feb37e2c049", "filename": "libgm2/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2FMakefile.am?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -32,7 +32,7 @@ MAKEOVERRIDES=\n \n AM_CFLAGS = -I $(srcdir)/../libgcc -I $(MULTIBUILDTOP)../../gcc/include\n \n-gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n TOP_GCCDIR := $(shell cd $(top_srcdir) && cd .. && pwd)\n \n GCC_DIR = $(TOP_GCCDIR)/gcc"}, {"sha": "ac01eafe45cf50f73241eedef7c166ba107f8e6b", "filename": "libgm2/Makefile.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2FMakefile.in?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -264,6 +264,7 @@ dvidir = @dvidir@\n enable_shared = @enable_shared@\n enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n+get_gcc_base_ver = @get_gcc_base_ver@\n host = @host@\n host_alias = @host_alias@\n host_cpu = @host_cpu@\n@@ -336,7 +337,7 @@ ACLOCAL_AMFLAGS = -I . -I .. -I ../config\n # Multilib support.\n MAKEOVERRIDES = \n AM_CFLAGS = -I $(srcdir)/../libgcc -I $(MULTIBUILDTOP)../../gcc/include\n-gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n TOP_GCCDIR := $(shell cd $(top_srcdir) && cd .. && pwd)\n GCC_DIR = $(TOP_GCCDIR)/gcc\n GM2_SRC = $(GCC_DIR)/m2"}, {"sha": "8b2c28cb163d540949bd2f653a9e8332098ad7bf", "filename": "libgm2/configure", "status": "modified", "additions": 21, "deletions": 2, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Fconfigure?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -634,6 +634,7 @@ ac_subst_vars='am__EXEEXT_FALSE\n am__EXEEXT_TRUE\n LTLIBOBJS\n LIBOBJS\n+get_gcc_base_ver\n TARGET_DARWIN_FALSE\n TARGET_DARWIN_TRUE\n BUILD_LOGLIB_FALSE\n@@ -805,6 +806,7 @@ with_pic\n enable_fast_install\n with_gnu_ld\n enable_libtool_lock\n+with_gcc_major_version_only\n '\n       ac_precious_vars='build_alias\n host_alias\n@@ -1464,6 +1466,8 @@ Optional Packages:\n   --with-pic              try to use only PIC/non-PIC objects [default=use\n                           both]\n   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]\n+  --with-gcc-major-version-only\n+                          use only GCC major number in filesystem paths\n \n Some influential environment variables:\n   CC          C compiler command\n@@ -12700,7 +12704,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12703 \"configure\"\n+#line 12707 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12806,7 +12810,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12809 \"configure\"\n+#line 12813 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -19696,6 +19700,21 @@ else\n fi\n \n \n+# Determine what GCC version number to use in filesystem paths.\n+\n+  get_gcc_base_ver=\"cat\"\n+\n+# Check whether --with-gcc-major-version-only was given.\n+if test \"${with_gcc_major_version_only+set}\" = set; then :\n+  withval=$with_gcc_major_version_only; if test x$with_gcc_major_version_only = xyes ; then\n+        get_gcc_base_ver=\"sed -e 's/^\\([0-9]*\\).*/\\1/'\"\n+      fi\n+\n+fi\n+\n+\n+\n+\n \n ac_config_files=\"$ac_config_files Makefile libm2min/Makefile libm2pim/Makefile libm2iso/Makefile libm2cor/Makefile libm2log/Makefile\"\n "}, {"sha": "c2732943c21f5d0646033bc704aabd503b2642aa", "filename": "libgm2/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Fconfigure.ac?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -381,6 +381,9 @@ AM_CONDITIONAL([BUILD_CORLIB], [test x$BUILD_CORLIB = xtrue])\n AM_CONDITIONAL([BUILD_LOGLIB], [test x$BUILD_LOGLIB = xtrue])\n AM_CONDITIONAL([TARGET_DARWIN], [test x$M2_TARGET_OS = xdarwin])\n \n+# Determine what GCC version number to use in filesystem paths.\n+GCC_BASE_VER\n+\n AC_CONFIG_SRCDIR([Makefile.am])\n AC_CONFIG_FILES([Makefile libm2min/Makefile libm2pim/Makefile libm2iso/Makefile\n                  libm2cor/Makefile libm2log/Makefile])"}, {"sha": "3f4b5085d1ad42217c293121d185da1d3909f688", "filename": "libgm2/libm2cor/Makefile.am", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2cor%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2cor%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2cor%2FMakefile.am?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -24,10 +24,10 @@ VPATH = . @srcdir@ @srcdir@/../../gcc/m2/gm2-libs-coroutines\n # Multilib support.\n MAKEOVERRIDES=\n \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n # Used to install the shared libgcc.\n slibdir = @slibdir@\n "}, {"sha": "2820a8a6f96f526715bab89148ecc602945ae1f1", "filename": "libgm2/libm2cor/Makefile.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2cor%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2cor%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2cor%2FMakefile.in?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -340,6 +340,7 @@ dvidir = @dvidir@\n enable_shared = @enable_shared@\n enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n+get_gcc_base_ver = @get_gcc_base_ver@\n host = @host@\n host_alias = @host_alias@\n host_cpu = @host_cpu@\n@@ -387,10 +388,10 @@ ACLOCAL_AMFLAGS = -I . -I .. -I ../config\n \n # Multilib support.\n MAKEOVERRIDES = \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)\n MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)\n MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)"}, {"sha": "90917bbba7b7371c0c079603aa9b40075edcc4e1", "filename": "libgm2/libm2iso/Makefile.am", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2iso%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2iso%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2iso%2FMakefile.am?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -24,10 +24,10 @@ VPATH = . @srcdir@ @srcdir@/../../gcc/m2/gm2-libs-iso\n # Multilib support.\n MAKEOVERRIDES=\n \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n # Used to install the shared libgcc.\n # was slibdir = @slibdir@\n slibdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)$(MULTISUBDIR)"}, {"sha": "fe77b9d3697bbd30f81f012b29ab33e88da5324a", "filename": "libgm2/libm2iso/Makefile.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2iso%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2iso%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2iso%2FMakefile.in?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -364,6 +364,7 @@ dvidir = @dvidir@\n enable_shared = @enable_shared@\n enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n+get_gcc_base_ver = @get_gcc_base_ver@\n host = @host@\n host_alias = @host_alias@\n host_cpu = @host_cpu@\n@@ -412,10 +413,10 @@ ACLOCAL_AMFLAGS = -I . -I .. -I ../config\n \n # Multilib support.\n MAKEOVERRIDES = \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)\n MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)\n MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)"}, {"sha": "915438e3ec9ad34aae9a9c4388d47bc355e88f2e", "filename": "libgm2/libm2log/Makefile.am", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2log%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2log%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2log%2FMakefile.am?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -24,10 +24,10 @@ VPATH = . @srcdir@ @srcdir@/../../gcc/m2/gm2-libs-pim\n # Multilib support.\n MAKEOVERRIDES=\n \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n # Used to install the shared libgcc.\n slibdir = @slibdir@\n "}, {"sha": "47a980c771ad4d46caa02a28f153cc213d2e6436", "filename": "libgm2/libm2log/Makefile.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2log%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2log%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2log%2FMakefile.in?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -329,6 +329,7 @@ dvidir = @dvidir@\n enable_shared = @enable_shared@\n enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n+get_gcc_base_ver = @get_gcc_base_ver@\n host = @host@\n host_alias = @host_alias@\n host_cpu = @host_cpu@\n@@ -376,10 +377,10 @@ ACLOCAL_AMFLAGS = -I . -I .. -I ../config\n \n # Multilib support.\n MAKEOVERRIDES = \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)\n MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)\n MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)"}, {"sha": "b2f145a63be406325adb8c636051d75cb94b5eb2", "filename": "libgm2/libm2min/Makefile.am", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2min%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2min%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2min%2FMakefile.am?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -24,10 +24,10 @@ VPATH = . @srcdir@/../../gcc/m2/gm2-libs-min\n # Multilib support.\n MAKEOVERRIDES=\n \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n # Used to install the shared libgcc.\n slibdir = @slibdir@\n "}, {"sha": "efbfe09b0a80432cc792e1f2f733106a56f7ec3e", "filename": "libgm2/libm2min/Makefile.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2min%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2min%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2min%2FMakefile.in?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -319,6 +319,7 @@ dvidir = @dvidir@\n enable_shared = @enable_shared@\n enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n+get_gcc_base_ver = @get_gcc_base_ver@\n host = @host@\n host_alias = @host_alias@\n host_cpu = @host_cpu@\n@@ -366,10 +367,10 @@ ACLOCAL_AMFLAGS = -I . -I .. -I ../config\n \n # Multilib support.\n MAKEOVERRIDES = \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)\n MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)\n MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)"}, {"sha": "c1a189adb91afd135ccbdc76e1ecaecc02fb1b66", "filename": "libgm2/libm2pim/Makefile.am", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2pim%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2pim%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2FMakefile.am?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -24,10 +24,10 @@ VPATH = . @srcdir@ @srcdir@/../../gcc/m2/gm2-libs\n # Multilib support.\n MAKEOVERRIDES=\n \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n # Used to install the shared libgcc.\n slibdir = @slibdir@\n "}, {"sha": "44ee4e28426ad3bb99c4828936b421a80a9b193a", "filename": "libgm2/libm2pim/Makefile.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2pim%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3/libgm2%2Flibm2pim%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2FMakefile.in?ref=1cfaaa42296298ea2d2b22a93d3c8c17104e6cd3", "patch": "@@ -354,6 +354,7 @@ dvidir = @dvidir@\n enable_shared = @enable_shared@\n enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n+get_gcc_base_ver = @get_gcc_base_ver@\n host = @host@\n host_alias = @host_alias@\n host_cpu = @host_cpu@\n@@ -401,10 +402,10 @@ ACLOCAL_AMFLAGS = -I . -I .. -I ../config\n \n # Multilib support.\n MAKEOVERRIDES = \n-version := $(shell $(CC) -dumpversion)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n # Directory in which the compiler finds libraries etc.\n-libsubdir = $(libdir)/gcc/$(target_alias)/$(version)\n+libsubdir = $(libdir)/gcc/$(target_alias)/$(gcc_version)\n MULTIDIR := $(shell $(CC) $(CFLAGS) -print-multi-directory)\n MULTIOSDIR := $(shell $(CC) $(CFLAGS) -print-multi-os-directory)\n MULTIOSSUBDIR := $(shell if test x$(MULTIOSDIR) != x.; then echo /$(MULTIOSDIR); fi)"}]}