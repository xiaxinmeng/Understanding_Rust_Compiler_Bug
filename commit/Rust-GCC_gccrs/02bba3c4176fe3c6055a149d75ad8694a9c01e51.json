{"sha": "02bba3c4176fe3c6055a149d75ad8694a9c01e51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDJiYmEzYzQxNzZmZTNjNjA1NWExNDlkNzVhZDg2OTRhOWMwMWU1MQ==", "commit": {"author": {"name": "Gary Benson", "email": "gbenson@redhat.com", "date": "2007-02-15T14:42:23Z"}, "committer": {"name": "Gary Benson", "email": "gary@gcc.gnu.org", "date": "2007-02-15T14:42:23Z"}, "message": "2007-02-15  Gary Benson  <gbenson@redhat.com>\n\n\t* gnu/javax/management/Server.java\n\t(registerMBean): Always register objects that implement the\n\tMBeanRegistration interface, and check the name returned by\n\tpreRegister before using it.\n\nFrom-SVN: r121995", "tree": {"sha": "1dc69dc91ab2e6bc77def8d3e640ba6689bde95c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1dc69dc91ab2e6bc77def8d3e640ba6689bde95c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02bba3c4176fe3c6055a149d75ad8694a9c01e51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02bba3c4176fe3c6055a149d75ad8694a9c01e51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02bba3c4176fe3c6055a149d75ad8694a9c01e51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02bba3c4176fe3c6055a149d75ad8694a9c01e51/comments", "author": null, "committer": null, "parents": [{"sha": "b102a4f7e8915a66d95c104bcfa443f60f792261", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b102a4f7e8915a66d95c104bcfa443f60f792261", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b102a4f7e8915a66d95c104bcfa443f60f792261"}], "stats": {"total": 35, "additions": 25, "deletions": 10}, "files": [{"sha": "a4faec8c89b9c0a57868678812d50bbd44f142a3", "filename": "libjava/classpath/ChangeLog.gcj", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2FChangeLog.gcj", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2FChangeLog.gcj", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2FChangeLog.gcj?ref=02bba3c4176fe3c6055a149d75ad8694a9c01e51", "patch": "@@ -1,3 +1,10 @@\n+2007-02-15  Gary Benson  <gbenson@redhat.com>\n+\n+\t* gnu/javax/management/Server.java\n+\t(registerMBean): Always register objects that implement the\n+\tMBeanRegistration interface, and check the name returned by\n+\tpreRegister before using it.\n+\n 2007-02-15  Gary Benson  <gbenson@redhat.com>\n \n \t* javax/management/ObjectName.java:"}, {"sha": "aa39c75ad46c49734c1559337c7800472e429c4b", "filename": "libjava/classpath/gnu/javax/management/Server.java", "status": "modified", "additions": 18, "deletions": 10, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Fgnu%2Fjavax%2Fmanagement%2FServer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Fgnu%2Fjavax%2Fmanagement%2FServer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Fgnu%2Fjavax%2Fmanagement%2FServer.java?ref=02bba3c4176fe3c6055a149d75ad8694a9c01e51", "patch": "@@ -1657,19 +1657,27 @@ public ObjectInstance registerMBean(Object obj, ObjectName name)\n     MBeanRegistration register = null;\n     if (obj instanceof MBeanRegistration)\n       register = (MBeanRegistration) obj;\n-    if (name == null)\n+    if (name == null && register == null)\n+      {\n+\tRuntimeException e =\n+\t  new IllegalArgumentException(\"The name was null and \" +\n+\t\t\t\t       \"the bean does not implement \" +\n+\t\t\t\t       \"MBeanRegistration.\");\n+\tthrow new RuntimeOperationsException(e);\n+      }\n+    if (register != null)\n       {\n-\tif (register == null)\n-\t  {\n-\t    RuntimeException e =\n-\t      new IllegalArgumentException(\"The name was null and \" +\n-\t\t\t\t\t   \"the bean does not implement \" +\n-\t\t\t\t\t   \"MBeanRegistration.\");\n-\t    throw new RuntimeOperationsException(e);\n-\t  }\n \ttry\n \t  {\n-\t    name = register.preRegister(this, null);\n+\t    name = register.preRegister(this, name);\n+\t    if (name == null)\n+\t      {\n+\t\tRuntimeException e =\n+\t\t  new NullPointerException(\"The name returned by \" +\n+\t\t\t\t\t   \"MBeanRegistration.preRegister() \" +\n+\t\t\t\t\t   \"was null\");\n+\t\tthrow e;\n+\t      }\n \t    if (sm != null)\n \t      sm.checkPermission(new MBeanPermission(className, null, name,\n \t\t\t\t\t\t     \"registerMBean\"));"}, {"sha": "0840244605904cdac09ef5d8b2b3455be6da784e", "filename": "libjava/classpath/lib/gnu/javax/management/Server$ServerInfo.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerInfo.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerInfo.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerInfo.class?ref=02bba3c4176fe3c6055a149d75ad8694a9c01e51"}, {"sha": "134351e7b96ec1f766671e563b7f055b8e15a995", "filename": "libjava/classpath/lib/gnu/javax/management/Server$ServerInputStream.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerInputStream.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerInputStream.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerInputStream.class?ref=02bba3c4176fe3c6055a149d75ad8694a9c01e51"}, {"sha": "dd98c5beb34c2e82028ebf29f5e30bb845f6a50e", "filename": "libjava/classpath/lib/gnu/javax/management/Server$ServerNotificationListener.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerNotificationListener.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerNotificationListener.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer%24ServerNotificationListener.class?ref=02bba3c4176fe3c6055a149d75ad8694a9c01e51"}, {"sha": "41154ad8bf3bb4be9db9c0beb276d0ff11effd9d", "filename": "libjava/classpath/lib/gnu/javax/management/Server.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02bba3c4176fe3c6055a149d75ad8694a9c01e51/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fgnu%2Fjavax%2Fmanagement%2FServer.class?ref=02bba3c4176fe3c6055a149d75ad8694a9c01e51"}]}