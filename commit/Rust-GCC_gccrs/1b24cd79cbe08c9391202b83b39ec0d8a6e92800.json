{"sha": "1b24cd79cbe08c9391202b83b39ec0d8a6e92800", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWIyNGNkNzljYmUwOGM5MzkxMjAyYjgzYjM5ZWMwZDhhNmU5MjgwMA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-10-24T00:53:05Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-10-24T00:53:05Z"}, "message": "re PR middle-end/11414 (Segementation fault compiling csets.adb)\n\n\n\tPR middle-end/11414\n\t* loop.c (load_mems): Use redirect_jump to forward jumps from\n\tthe original loop end label to the new \"loop sink\" block's label.\n\nFrom-SVN: r72876", "tree": {"sha": "16169e3b0ae191a2517d3ca85d8440981607daa7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16169e3b0ae191a2517d3ca85d8440981607daa7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b24cd79cbe08c9391202b83b39ec0d8a6e92800", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b24cd79cbe08c9391202b83b39ec0d8a6e92800", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b24cd79cbe08c9391202b83b39ec0d8a6e92800", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b24cd79cbe08c9391202b83b39ec0d8a6e92800/comments", "author": null, "committer": null, "parents": [{"sha": "9ab791c04479a779de0a91bba2acc26a35fb8c2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ab791c04479a779de0a91bba2acc26a35fb8c2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ab791c04479a779de0a91bba2acc26a35fb8c2c"}], "stats": {"total": 24, "additions": 11, "deletions": 13}, "files": [{"sha": "e414c23e4d56d3357fb96c5825111539055dc248", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b24cd79cbe08c9391202b83b39ec0d8a6e92800/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b24cd79cbe08c9391202b83b39ec0d8a6e92800/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1b24cd79cbe08c9391202b83b39ec0d8a6e92800", "patch": "@@ -1,3 +1,9 @@\n+2003-10-23  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR middle-end/11414\n+\t* loop.c (load_mems): Use redirect_jump to forward jumps from\n+\tthe original loop end label to the new \"loop sink\" block's label.\n+\n 2003-10-23  Roger Sayle  <roger@eyesopen.com>\n \n \tPR middle-end/12705"}, {"sha": "667833d64a51a917a16caae51b4dba8d506e214c", "filename": "gcc/loop.c", "status": "modified", "additions": 5, "deletions": 13, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b24cd79cbe08c9391202b83b39ec0d8a6e92800/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b24cd79cbe08c9391202b83b39ec0d8a6e92800/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=1b24cd79cbe08c9391202b83b39ec0d8a6e92800", "patch": "@@ -10005,20 +10005,12 @@ load_mems (const struct loop *loop)\n \t}\n     }\n \n+  /* Now, we need to replace all references to the previous exit\n+     label with the new one.  */\n   if (label != NULL_RTX && end_label != NULL_RTX)\n-    {\n-      /* Now, we need to replace all references to the previous exit\n-\t label with the new one.  */\n-      replace_label_data rr;\n-      rr.r1 = end_label;\n-      rr.r2 = label;\n-      rr.update_label_nuses = true;\n-\n-      for (p = loop->start; p != loop->end; p = NEXT_INSN (p))\n-\t{\n-\t  for_each_rtx (&p, replace_label, &rr);\n-\t}\n-    }\n+    for (p = loop->start; p != loop->end; p = NEXT_INSN (p))\n+      if (GET_CODE (p) == JUMP_INSN && JUMP_LABEL (p) == end_label)\n+\tredirect_jump (p, label, false);\n \n   cselib_finish ();\n }"}]}