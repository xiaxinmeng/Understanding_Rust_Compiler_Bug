{"sha": "4a1db8e16460fddf419fa96e64d0e41d2d19e3de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGExZGI4ZTE2NDYwZmRkZjQxOWZhOTZlNjRkMGU0MWQyZDE5ZTNkZQ==", "commit": {"author": {"name": "Ganesh Gopalasubramanian", "email": "Ganesh.Gopalasubramanian@amd.com", "date": "2013-11-06T05:38:09Z"}, "committer": {"name": "Ganesh Gopalasubramanian", "email": "gganesh@gcc.gnu.org", "date": "2013-11-06T05:38:09Z"}, "message": "scheduler improvements for BD architectures\n\nFrom-SVN: r204442", "tree": {"sha": "72c1866db7362c2294af57b73f110258ae449b60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/72c1866db7362c2294af57b73f110258ae449b60"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a1db8e16460fddf419fa96e64d0e41d2d19e3de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a1db8e16460fddf419fa96e64d0e41d2d19e3de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a1db8e16460fddf419fa96e64d0e41d2d19e3de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a1db8e16460fddf419fa96e64d0e41d2d19e3de/comments", "author": {"login": "ganeshgit", "id": 5275884, "node_id": "MDQ6VXNlcjUyNzU4ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5275884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ganeshgit", "html_url": "https://github.com/ganeshgit", "followers_url": "https://api.github.com/users/ganeshgit/followers", "following_url": "https://api.github.com/users/ganeshgit/following{/other_user}", "gists_url": "https://api.github.com/users/ganeshgit/gists{/gist_id}", "starred_url": "https://api.github.com/users/ganeshgit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ganeshgit/subscriptions", "organizations_url": "https://api.github.com/users/ganeshgit/orgs", "repos_url": "https://api.github.com/users/ganeshgit/repos", "events_url": "https://api.github.com/users/ganeshgit/events{/privacy}", "received_events_url": "https://api.github.com/users/ganeshgit/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3118d595a64f3673786c8c06642f92d95bf6b27c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3118d595a64f3673786c8c06642f92d95bf6b27c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3118d595a64f3673786c8c06642f92d95bf6b27c"}], "stats": {"total": 40, "additions": 29, "deletions": 11}, "files": [{"sha": "453176f8822c157a0b82ecbb26552d2c288f0c8a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a1db8e16460fddf419fa96e64d0e41d2d19e3de/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a1db8e16460fddf419fa96e64d0e41d2d19e3de/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a1db8e16460fddf419fa96e64d0e41d2d19e3de", "patch": "@@ -1,3 +1,12 @@\n+2013-11-06  Ganesh Gopalasubramanian  <Ganesh.Gopalasubramanian@amd.com>\n+\n+\t* config/i386/bdver3.md : Added two additional decoder units \n+\tto support issue rate of 4 and remodeled vector unit.\n+\t* config/i386/i386.c (ix86_issue_rate): Issue rate for BD\n+\tarchitectures is set to 4.\n+\t* config/i386/i386.c (ia32_multipass_dfa_lookahead): DFA\n+\tlookahead is set to 4 for BD architectures.\n+\n 2013-11-05  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \t* config/rs6000/rs6000.c (rs6000_option_override_internal):"}, {"sha": "421a3d1b30efdf786d089b9c97c6d20480804600", "filename": "gcc/config/i386/bdver3.md", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a1db8e16460fddf419fa96e64d0e41d2d19e3de/gcc%2Fconfig%2Fi386%2Fbdver3.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a1db8e16460fddf419fa96e64d0e41d2d19e3de/gcc%2Fconfig%2Fi386%2Fbdver3.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fbdver3.md?ref=4a1db8e16460fddf419fa96e64d0e41d2d19e3de", "patch": "@@ -34,20 +34,22 @@\n \n (define_cpu_unit \"bdver3-decode0\" \"bdver3\")\n (define_cpu_unit \"bdver3-decode1\" \"bdver3\")\n-(define_cpu_unit \"bdver3-decodev\" \"bdver3\")\n+(define_cpu_unit \"bdver3-decode2\" \"bdver3\")\n+(define_cpu_unit \"bdver3-decode3\" \"bdver3\")\n \n ;; Double decoded instructions take two cycles whereas\n ;; direct instructions take one cycle.\n-;; Therefore four direct instructions can be decoded by\n-;; two decoders in two cycles.\n ;; Vectorpath instructions are single issue instructions.\n-;; So, we have separate unit for vector instructions.\n-(exclusion_set \"bdver3-decodev\" \"bdver3-decode0,bdver3-decode1\")\n+;; So, we engage all units vector instructions.\n+(define_reservation \"bdver3-vector\" \"bdver3-decode0+bdver3-decode1+bdver3-decode2+bdver3-decode3\")\n+\n+;; Direct instructions can be issued to any of the four decoders\n+(define_reservation \"bdver3-direct\" \"(bdver3-decode0|bdver3-decode1|bdver3-decode2|bdver3-decode3)\")\n \n-(define_reservation \"bdver3-vector\" \"bdver3-decodev\")\n-(define_reservation \"bdver3-direct\" \"(bdver3-decode0|bdver3-decode1)\")\n ;; Double instructions take two cycles to decode.\n-(define_reservation \"bdver3-double\" \"(bdver3-decode0|bdver3-decode1)*2\")\n+(define_reservation \"bdver3-double\" \"(bdver3-decode0,bdver3-decode0)|\n+               (bdver3-decode1,bdver3-decode1)| (bdver3-decode2,bdver3-decode2)|\n+               (bdver3-decode3,bdver3-decode3)\")\n \n (define_cpu_unit \"bdver3-ieu0\" \"bdver3_ieu\")\n (define_cpu_unit \"bdver3-ieu1\" \"bdver3_ieu\")"}, {"sha": "119233273231c6ae687eafc421a26d45991383da", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a1db8e16460fddf419fa96e64d0e41d2d19e3de/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a1db8e16460fddf419fa96e64d0e41d2d19e3de/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=4a1db8e16460fddf419fa96e64d0e41d2d19e3de", "patch": "@@ -24830,12 +24830,12 @@ ix86_issue_rate (void)\n     case PROCESSOR_K8:\n     case PROCESSOR_AMDFAM10:\n     case PROCESSOR_GENERIC:\n-    case PROCESSOR_BDVER1:\n-    case PROCESSOR_BDVER2:\n-    case PROCESSOR_BDVER3:\n     case PROCESSOR_BTVER1:\n       return 3;\n \n+    case PROCESSOR_BDVER1:\n+    case PROCESSOR_BDVER2:\n+    case PROCESSOR_BDVER3:\n     case PROCESSOR_CORE2:\n     case PROCESSOR_COREI7:\n     case PROCESSOR_COREI7_AVX:\n@@ -25212,6 +25212,13 @@ ia32_multipass_dfa_lookahead (void)\n     case PROCESSOR_K6:\n       return 1;\n \n+    case PROCESSOR_BDVER1:\n+    case PROCESSOR_BDVER2:\n+    case PROCESSOR_BDVER3:\n+      /* We use lookahead value 4 for BD both before and after reload\n+\t schedules. Plan is to have value 8 included for O3. */\n+        return 4;\n+\n     case PROCESSOR_CORE2:\n     case PROCESSOR_COREI7:\n     case PROCESSOR_COREI7_AVX:"}]}