{"sha": "1604422ce4cfec62a1870a758cd781bb84b8e7f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTYwNDQyMmNlNGNmZWM2MmExODcwYTc1OGNkNzgxYmI4NGI4ZTdmNg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-08-29T23:15:47Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-08-29T23:15:47Z"}, "message": "(finish_struct): If transparent_union attribute specified, validate it\nonce we finish laying the union out.\n\nFrom-SVN: r10293", "tree": {"sha": "2640e2e2a60a5e11f849e8bf283123b42e741536", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2640e2e2a60a5e11f849e8bf283123b42e741536"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1604422ce4cfec62a1870a758cd781bb84b8e7f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1604422ce4cfec62a1870a758cd781bb84b8e7f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1604422ce4cfec62a1870a758cd781bb84b8e7f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1604422ce4cfec62a1870a758cd781bb84b8e7f6/comments", "author": null, "committer": null, "parents": [{"sha": "1bcf5b08b03cebe9de80330e00d0f6473fdf18ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bcf5b08b03cebe9de80330e00d0f6473fdf18ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bcf5b08b03cebe9de80330e00d0f6473fdf18ee"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "def045fda641ff40ec0722a928be3396bdc2140d", "filename": "gcc/c-decl.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1604422ce4cfec62a1870a758cd781bb84b8e7f6/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1604422ce4cfec62a1870a758cd781bb84b8e7f6/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=1604422ce4cfec62a1870a758cd781bb84b8e7f6", "patch": "@@ -5678,6 +5678,16 @@ finish_struct (t, fieldlist, attributes)\n \t  TREE_TYPE (x) = integer_type_node;\n       }\n \n+  /* If this was supposed to be a transparent union, but we can't\n+     make it one, warn and turn off the flag.  */\n+  if (TREE_CODE (t) == UNION_TYPE\n+      && TYPE_TRANSPARENT_UNION (t)\n+      && TYPE_MODE (t) != DECL_MODE (TYPE_FIELDS (t)))\n+    {\n+      TYPE_TRANSPARENT_UNION (t) = 0;\n+      warning (\"cannot make `%s' a transparent union\");\n+    }\n+\n   /* If this structure or union completes the type of any previous\n      variable declaration, lay it out and output its rtl.  */\n "}]}