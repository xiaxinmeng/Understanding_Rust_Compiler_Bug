{"sha": "045ac3671593f6cb1a087a22cc9b8bff2b357198", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ1YWMzNjcxNTkzZjZjYjFhMDg3YTIyY2M5YjhiZmYyYjM1NzE5OA==", "commit": {"author": {"name": "Daniel Franke", "email": "franke.daniel@gmail.com", "date": "2009-04-10T14:12:01Z"}, "committer": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2009-04-10T14:12:01Z"}, "message": "re PR fortran/38709 (ICE on zero-sized array in initialization expression)\n\ngcc/fortran/:\n2009-04-10  Daniel Franke  <franke.daniel@gmail.com>\n\n        PR fortran/38709\n        * expr.c (find_array_section): Leave early on zero-sized arrays.\n\n\ngcc/testsuite/:\n2009-04-10  Daniel Franke  <franke.daniel@gmail.com>\n\n        PR fortran/38709\n        * gfortran.dg/zero_sized_6.f90: New.\n\nFrom-SVN: r145909", "tree": {"sha": "ab3b7a160655ccb16d9d08df721888359e61b9f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab3b7a160655ccb16d9d08df721888359e61b9f6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/045ac3671593f6cb1a087a22cc9b8bff2b357198", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/045ac3671593f6cb1a087a22cc9b8bff2b357198", "html_url": "https://github.com/Rust-GCC/gccrs/commit/045ac3671593f6cb1a087a22cc9b8bff2b357198", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/045ac3671593f6cb1a087a22cc9b8bff2b357198/comments", "author": {"login": "dfranke76", "id": 15729164, "node_id": "MDQ6VXNlcjE1NzI5MTY0", "avatar_url": "https://avatars.githubusercontent.com/u/15729164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dfranke76", "html_url": "https://github.com/dfranke76", "followers_url": "https://api.github.com/users/dfranke76/followers", "following_url": "https://api.github.com/users/dfranke76/following{/other_user}", "gists_url": "https://api.github.com/users/dfranke76/gists{/gist_id}", "starred_url": "https://api.github.com/users/dfranke76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dfranke76/subscriptions", "organizations_url": "https://api.github.com/users/dfranke76/orgs", "repos_url": "https://api.github.com/users/dfranke76/repos", "events_url": "https://api.github.com/users/dfranke76/events{/privacy}", "received_events_url": "https://api.github.com/users/dfranke76/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7ef455560c88e6a757602afb0f7b3f9e1e2068f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ef455560c88e6a757602afb0f7b3f9e1e2068f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ef455560c88e6a757602afb0f7b3f9e1e2068f7"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "4b053706484e5a9d74ed95b5e245c3a6ccd3e65a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=045ac3671593f6cb1a087a22cc9b8bff2b357198", "patch": "@@ -1,3 +1,8 @@\n+2009-04-10  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\tPR fortran/38709\n+\t* expr.c (find_array_section): Leave early on zero-sized arrays.\n+\n 2009-04-09  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/36704"}, {"sha": "02143c2e33772633c46fdfbd4e705c18e867b76c", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=045ac3671593f6cb1a087a22cc9b8bff2b357198", "patch": "@@ -1210,7 +1210,12 @@ find_array_section (gfc_expr *expr, gfc_ref *ref)\n \t    }\n \n \t  gcc_assert (begin->rank == 1);\n-\t  gcc_assert (begin->shape);\n+\t  /* Zero-sized arrays have no shape and no elements, stop early.  */\n+\t  if (!begin->shape) \n+\t    {\n+\t      mpz_init_set_ui (nelts, 0);\n+\t      break;\n+\t    }\n \n \t  vecsub[d] = begin->value.constructor;\n \t  mpz_set (ctr[d], vecsub[d]->expr->value.integer);"}, {"sha": "002a1cdf1ee3df6397a640eb75b4777efb8c8f2c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=045ac3671593f6cb1a087a22cc9b8bff2b357198", "patch": "@@ -1,3 +1,8 @@\n+2009-04-10  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\tPR fortran/38709\n+\t* gfortran.dg/zero_sized_6.f90: New.\n+\n 2009-04-10  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR  c++/20118"}, {"sha": "30ed8dfaaf5c539fc23aa1e7877867309924df47", "filename": "gcc/testsuite/gfortran.dg/zero_sized_6.f90", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ftestsuite%2Fgfortran.dg%2Fzero_sized_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/045ac3671593f6cb1a087a22cc9b8bff2b357198/gcc%2Ftestsuite%2Fgfortran.dg%2Fzero_sized_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fzero_sized_6.f90?ref=045ac3671593f6cb1a087a22cc9b8bff2b357198", "patch": "@@ -0,0 +1,6 @@\n+! { dg-do \"compile\" }\n+! PR38709 - ICE-on-invalid on zero-sized array in init-expr.\n+\n+  INTEGER, PARAMETER :: a(1) = (/ 1 /)\n+  INTEGER, PARAMETER :: i = a(shape(1))   ! { dg-error \"Incompatible ranks\" }\n+END"}]}