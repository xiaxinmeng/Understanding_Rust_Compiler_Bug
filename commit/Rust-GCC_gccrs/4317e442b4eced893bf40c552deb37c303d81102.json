{"sha": "4317e442b4eced893bf40c552deb37c303d81102", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDMxN2U0NDJiNGVjZWQ4OTNiZjQwYzU1MmRlYjM3YzMwM2Q4MTEwMg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-03T08:11:09Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-03T08:11:09Z"}, "message": "[multiple changes]\n\n2011-08-03  Robert Dewar  <dewar@adacore.com>\n\n\t* exp_ch5.adb, sem_prag.adb, exp_ch4.adb: Minor reformatting.\n\n2011-08-03  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch3.adb (Build_Itype_Reference): do not create an itype reference\n\tfor an itype created within a generic unit.\n\n2011-08-03  Eric Botcazou  <ebotcazou@adacore.com>\n\n\t* gnat_ugn.texi (Switches for gcc): Make it clearer that -fno-inline\n\tsuppresses all inlining.\n\nFrom-SVN: r177238", "tree": {"sha": "34781cfe66f1ce62937f09661a0f8d793f5a3e9b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34781cfe66f1ce62937f09661a0f8d793f5a3e9b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4317e442b4eced893bf40c552deb37c303d81102", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4317e442b4eced893bf40c552deb37c303d81102", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4317e442b4eced893bf40c552deb37c303d81102", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4317e442b4eced893bf40c552deb37c303d81102/comments", "author": null, "committer": null, "parents": [{"sha": "53f29d4f64e462e90aff1a949ab7f06f8e342c49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53f29d4f64e462e90aff1a949ab7f06f8e342c49", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53f29d4f64e462e90aff1a949ab7f06f8e342c49"}], "stats": {"total": 68, "additions": 42, "deletions": 26}, "files": [{"sha": "85d42bdb2ea12c1dd92ae2607f319840a91ebe22", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4317e442b4eced893bf40c552deb37c303d81102", "patch": "@@ -1,3 +1,17 @@\n+2011-08-03  Robert Dewar  <dewar@adacore.com>\n+\n+\t* exp_ch5.adb, sem_prag.adb, exp_ch4.adb: Minor reformatting.\n+\n+2011-08-03  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch3.adb (Build_Itype_Reference): do not create an itype reference\n+\tfor an itype created within a generic unit.\n+\n+2011-08-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat_ugn.texi (Switches for gcc): Make it clearer that -fno-inline\n+\tsuppresses all inlining.\n+\n 2011-08-03  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_ch3.adb, sem_res.adb, exp_ch13.adb, exp_disp.adb,"}, {"sha": "27e6279764eec20342e5a937b00c49ac630a794f", "filename": "gcc/ada/exp_ch4.adb", "status": "modified", "additions": 9, "deletions": 12, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fexp_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fexp_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch4.adb?ref=4317e442b4eced893bf40c552deb37c303d81102", "patch": "@@ -7596,15 +7596,13 @@ package body Exp_Ch4 is\n \n       function Is_Subtype_Declaration return Boolean;\n       --  The replacement of a discriminant reference by its value is required\n-      --  if this is part of the initialization of an temporary generated by\n-      --  a change of representation. This shows up as the construction of a\n+      --  if this is part of the initialization of an temporary generated by a\n+      --  change of representation. This shows up as the construction of a\n       --  discriminant constraint for a subtype declared at the same point as\n-      --  the entity in the prefix of the selected component.\n-      --  We recognize this case when the context of the reference is:\n-      --\n-      --   subtype ST is T(Obj.D);\n-      --\n-      --   The entity for Obj comes from source, and ST has the same sloc.\n+      --  the entity in the prefix of the selected component. We recognize this\n+      --  case when the context of the reference is:\n+      --    subtype ST is T(Obj.D);\n+      --  where the entity for Obj comes from source, and ST has the same sloc.\n \n       -----------------------\n       -- In_Left_Hand_Side --\n@@ -7625,7 +7623,6 @@ package body Exp_Ch4 is\n \n       function Is_Subtype_Declaration return Boolean is\n          Par : constant Node_Id := Parent (N);\n-\n       begin\n          return\n            Nkind (Par) = N_Index_Or_Discriminant_Constraint\n@@ -7767,9 +7764,9 @@ package body Exp_Ch4 is\n \n                   if Disc = Entity (Selector_Name (N))\n                     and then (Is_Entity_Name (Dval)\n-                              or else Nkind (Dval) = N_Integer_Literal\n-                              or else Is_Subtype_Declaration\n-                              or else Is_Static_Expression (Dval))\n+                               or else Nkind (Dval) = N_Integer_Literal\n+                               or else Is_Subtype_Declaration\n+                               or else Is_Static_Expression (Dval))\n                   then\n                      --  Here we have the matching discriminant. Check for\n                      --  the case of a discriminant of a component that is"}, {"sha": "51ae183bc358cfe1cd04e2dc0efb8eae062c0aa2", "filename": "gcc/ada/exp_ch5.adb", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fexp_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fexp_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch5.adb?ref=4317e442b4eced893bf40c552deb37c303d81102", "patch": "@@ -1934,13 +1934,13 @@ package body Exp_Ch5 is\n \n                --  If the type is tagged, we may as well use the predefined\n                --  primitive assignment. This avoids inlining a lot of code\n-               --  and in the class-wide case, the assignment is replaced by a\n-               --  dispatching call to _assign. It is suppressed in the case of\n-               --  assignments created by the expander that correspond to\n-               --  initializations, where we do want to copy the tag\n-               --  (Expand_Ctrl_Actions flag is set True in this case).\n-               --  It is also suppressed if restriction No_Dispatching_Calls is\n-               --  in force because in that case predefined primitives are not\n+               --  and in the class-wide case, the assignment is replaced\n+               --  by a dispatching call to _assign. It is suppressed in the\n+               --  case of assignments created by the expander that correspond\n+               --  to initializations, where we do want to copy the tag\n+               --  (Expand_Ctrl_Actions flag is set True in this case). It is\n+               --  also suppressed if restriction No_Dispatching_Calls is in\n+               --  force because in that case predefined primitives are not\n                --  generated.\n \n                or else (Is_Tagged_Type (Typ)"}, {"sha": "dd90a835feaf8399431eecd31c506507a753a489", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=4317e442b4eced893bf40c552deb37c303d81102", "patch": "@@ -3961,10 +3961,9 @@ and @command{gcc} cannot be used to run the GNAT binder.\n \n @item -fno-inline\n @cindex @option{-fno-inline} (@command{gcc})\n-Suppresses all back-end inlining, even if other optimization or inlining\n-switches are set.\n-This includes suppression of inlining that results\n-from the use of the pragma @code{Inline_Always}.\n+Suppresses all inlining, even if other optimization or inlining\n+switches are set.  This includes suppression of inlining that\n+results from the use of the pragma @code{Inline_Always}.\n Any occurrences of pragma @code{Inline} or @code{Inline_Always}\n are ignored, and @option{-gnatn} and @option{-gnatN} have no\n effect if this switch is present."}, {"sha": "aa6f6b249f8ababec3bdf23d81deade4ac54ef97", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=4317e442b4eced893bf40c552deb37c303d81102", "patch": "@@ -8631,8 +8631,15 @@ package body Sem_Ch3 is\n    is\n       IR : constant Node_Id := Make_Itype_Reference (Sloc (Nod));\n    begin\n-      Set_Itype (IR, Ityp);\n-      Insert_After (Nod, IR);\n+\n+      --  Itype references are only created for use by the back-end.\n+\n+      if Inside_A_Generic then\n+         return;\n+      else\n+         Set_Itype (IR, Ityp);\n+         Insert_After (Nod, IR);\n+      end if;\n    end Build_Itype_Reference;\n \n    ------------------------"}, {"sha": "4d6a55ca408d6330b3a1c53a8fd371e5bbd4704c", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4317e442b4eced893bf40c552deb37c303d81102/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=4317e442b4eced893bf40c552deb37c303d81102", "patch": "@@ -4729,7 +4729,6 @@ package body Sem_Prag is\n          if Is_Generic_Instance (Subprogram_Def) then\n             Set_Encoded_Interface_Name\n               (Alias (Get_Base_Subprogram (Subprogram_Def)), Link_Nam);\n-\n          else\n             Set_Encoded_Interface_Name\n               (Get_Base_Subprogram (Subprogram_Def), Link_Nam);"}]}