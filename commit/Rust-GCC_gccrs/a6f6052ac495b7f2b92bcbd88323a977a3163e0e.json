{"sha": "a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZmNjA1MmFjNDk1YjdmMmI5MmJjYmQ4ODMyM2E5NzdhMzE2M2UwZQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-01-10T22:57:04Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-01-10T22:57:04Z"}, "message": "re PR c++/9120 (miscompilation of function with references to undeclared objects and functions)\n\n\tPR c++/9120\n\t* parser.c (cp_parser_scope_through_which_access_occurs): Handle\n\tan object_type which is not a class type.\n\n\tPR c++/9120\n\t* g++.dg/parse/dtor1.C: New file.\n\nFrom-SVN: r61174", "tree": {"sha": "783dc4956bd952d3d99f6137db38b9308c64e33f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/783dc4956bd952d3d99f6137db38b9308c64e33f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/comments", "author": null, "committer": null, "parents": [{"sha": "19cc0dd4ade36a02400c5d89f89efdd3145c0bfb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19cc0dd4ade36a02400c5d89f89efdd3145c0bfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19cc0dd4ade36a02400c5d89f89efdd3145c0bfb"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "0764979fcd75bdfc12518a3a5843320db2664e23", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "patch": "@@ -1,3 +1,9 @@\n+2003-01-10  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/9120\n+\t* parser.c (cp_parser_scope_through_which_access_occurs): Handle\n+\tan object_type which is not a class type.\n+\n 2003-01-10  Geoffrey Keating  <geoffk@apple.com>\n \n \t* parser.c (cp_parser_late_parsing_for_member): Don't cast to void."}, {"sha": "ebd919d970f561e79d6a814a4e4c6ae6b7eb5b43", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "patch": "@@ -2230,7 +2230,17 @@ cp_parser_scope_through_which_access_occurs (decl,\n   if (!TYPE_P (scope))\n     return NULL_TREE;\n   /* Figure out the type through which DECL is being accessed.  */\n-  if (object_type && DERIVED_FROM_P (scope, object_type))\n+  if (object_type \n+      /* OBJECT_TYPE might not be a class type; consider:\n+\n+\t   class A { typedef int I; };\n+\t   I *p;\n+\t   p->A::I::~I();\n+\n+         In this case, we will have \"A::I\" as the DECL, but \"I\" as the\n+\t OBJECT_TYPE.  */\n+      && CLASS_TYPE_P (object_type)\n+      && DERIVED_FROM_P (scope, object_type))\n     /* If we are processing a `->' or `.' expression, use the type of the\n        left-hand side.  */\n     qualifying_type = object_type;"}, {"sha": "b6f1d50da8410e42e595b8043c8a204e04a4c2eb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "patch": "@@ -1,5 +1,8 @@\n 2003-01-10  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/9120\n+\t* g++.dg/parse/dtor1.C: New file.\n+\n \tPR c++/9128\n \t* g++.dg/rtti/typeid1.C: New file.\n "}, {"sha": "08d070ea5e4398903a489ee901775ae6727c5570", "filename": "gcc/testsuite/g++.dg/parse/dtor1.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdtor1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6f6052ac495b7f2b92bcbd88323a977a3163e0e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdtor1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdtor1.C?ref=a6f6052ac495b7f2b92bcbd88323a977a3163e0e", "patch": "@@ -0,0 +1,6 @@\n+struct A { typedef int I; };\n+int main(void)\n+{\n+        int * p;\n+        p->A::I::~I();\n+}"}]}