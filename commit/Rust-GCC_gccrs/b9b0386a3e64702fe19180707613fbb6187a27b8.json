{"sha": "b9b0386a3e64702fe19180707613fbb6187a27b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjliMDM4NmEzZTY0NzAyZmUxOTE4MDcwNzYxM2ZiYjYxODdhMjdiOA==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2019-03-25T23:33:36Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2019-03-25T23:33:36Z"}, "message": "re PR rtl-optimization/88347 (ICE in begin_move_insn, at sched-ebb.c:175)\n\n\tPR rtl-optimization/88347\n\tPR rtl-optimization/88423\n\t* sched-deps.c (sched_analyze_insn): Take into account that for\n\ttablejumps the barrier appears after a label and a jump_table_data.\n\n\t* gcc.c-torture/compile/pr88347.c: New test.\n\t* gcc.c-torture/compile/pr88423.c: New test.\n\nFrom-SVN: r269928", "tree": {"sha": "19da2bc05717221c2748d84150167c1a782aec09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19da2bc05717221c2748d84150167c1a782aec09"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9b0386a3e64702fe19180707613fbb6187a27b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9b0386a3e64702fe19180707613fbb6187a27b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9b0386a3e64702fe19180707613fbb6187a27b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9b0386a3e64702fe19180707613fbb6187a27b8/comments", "author": null, "committer": null, "parents": [{"sha": "0c9992c8b5e07e7295c8be65586a2a82e7f191e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c9992c8b5e07e7295c8be65586a2a82e7f191e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c9992c8b5e07e7295c8be65586a2a82e7f191e5"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "457b598f1e504c9f3d33379bf8166ce9909fcb39", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b9b0386a3e64702fe19180707613fbb6187a27b8", "patch": "@@ -1,3 +1,10 @@\n+2019-03-25  Alexander Monakov  <amonakov@ispras.ru>\n+\n+\tPR rtl-optimization/88347\n+\tPR rtl-optimization/88423\n+\t* sched-deps.c (sched_analyze_insn): Take into account that for\n+\ttablejumps the barrier appears after a label and a jump_table_data.\n+\n 2019-03-25  Martin Sebor  <msebor@redhat.com>\n \n \tPR c/89812"}, {"sha": "eda0c669771c35355e91efeaadab3cf0ac3fcfeb", "filename": "gcc/sched-deps.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Fsched-deps.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Fsched-deps.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-deps.c?ref=b9b0386a3e64702fe19180707613fbb6187a27b8", "patch": "@@ -3005,6 +3005,11 @@ sched_analyze_insn (struct deps_desc *deps, rtx x, rtx_insn *insn)\n   if (JUMP_P (insn))\n     {\n       rtx_insn *next = next_nonnote_nondebug_insn (insn);\n+      /* ??? For tablejumps, the barrier may appear not immediately after\n+         the jump, but after a label and a jump_table_data insn.  */\n+      if (next && LABEL_P (next) && NEXT_INSN (next)\n+\t  && JUMP_TABLE_DATA_P (NEXT_INSN (next)))\n+\tnext = NEXT_INSN (NEXT_INSN (next));\n       if (next && BARRIER_P (next))\n \treg_pending_barrier = MOVE_BARRIER;\n       else"}, {"sha": "ddd5f50a8a9934a43805af772c92ff26fec49e19", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b9b0386a3e64702fe19180707613fbb6187a27b8", "patch": "@@ -1,3 +1,10 @@\n+2019-03-25  David Malcolm  <dmalcolm@redhat.com>\n+\n+\tPR rtl-optimization/88347\n+\tPR rtl-optimization/88423\n+\t* gcc.c-torture/compile/pr88347.c: New test.\n+\t* gcc.c-torture/compile/pr88423.c: New test.\n+\n 2019-03-25  Martin Sebor  <msebor@redhat.com>\n \n \tPR c/89812"}, {"sha": "4e9b438d8ef030a75f9f8609e4eb3a1ece7146e9", "filename": "gcc/testsuite/gcc.c-torture/compile/pr88347.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr88347.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr88347.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr88347.c?ref=b9b0386a3e64702fe19180707613fbb6187a27b8", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do compile { target { powerpc-*-* powerpcle-*-* } } } */\n+/* { dg-options \"-mcpu=603e -fsched-stalled-insns -fsched2-use-superblocks -fschedule-insns2 -fno-dce -fno-guess-branch-probability --param max-cse-insns=4\" } */\n+\n+#include \"../../gcc.target/powerpc/ppc-switch-2.c\""}, {"sha": "494881718cc9aad8ae669466b246e6ff94c89284", "filename": "gcc/testsuite/gcc.c-torture/compile/pr88423.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr88423.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9b0386a3e64702fe19180707613fbb6187a27b8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr88423.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr88423.c?ref=b9b0386a3e64702fe19180707613fbb6187a27b8", "patch": "@@ -0,0 +1,5 @@\n+/* { dg-do compile { target { i?86-*-* x86_64-*-* } } } */\n+/* { dg-options \"-march=skylake -fPIC -fsched2-use-superblocks -fno-if-conversion\" } */\n+/* { dg-require-effective-target fpic } */\n+\n+#include \"../../gcc.dg/20030309-1.c\""}]}