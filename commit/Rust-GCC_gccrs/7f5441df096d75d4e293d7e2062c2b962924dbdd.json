{"sha": "7f5441df096d75d4e293d7e2062c2b962924dbdd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y1NDQxZGYwOTZkNzVkNGUyOTNkN2UyMDYyYzJiOTYyOTI0ZGJkZA==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-03-22T20:12:34Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-03-22T20:12:34Z"}, "message": "re PR target/38085 (gcc -m64 -pg generates invalid assembler code on Solaris 10/x86)\n\n\tgcc:\n\tPR target/38085\n\t* config/i386/i386.c (x86_function_profiler)\n\t[!NO_PROFILE_COUNTERS]: Fix typo.\n\t* config/i386/gmon-sol2.c (_mcleanup) [__x86_64__]: Use call\n\tinstead of callq.\n\n\tlibgcc:\n\tPR target/38085\n\t* config/i386/t-sol2 ($(T)gmon.o): Use CFLAGS instead of\n\tMULTILIB_CFLAGS.\n\t($(T)gcrt1.o): Likewise.\n\t($(T)crt1.o): Likewise.\n\t($(T)crti.o): Likewise.\n\t($(T)crtn.o): Likewise.\n\nFrom-SVN: r157648", "tree": {"sha": "6df365bdd709eb2f8ab6b85b6a2b205669849b6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6df365bdd709eb2f8ab6b85b6a2b205669849b6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f5441df096d75d4e293d7e2062c2b962924dbdd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f5441df096d75d4e293d7e2062c2b962924dbdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f5441df096d75d4e293d7e2062c2b962924dbdd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f5441df096d75d4e293d7e2062c2b962924dbdd/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d4f3924a905135bbcdfab16fe704941ee3879e57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4f3924a905135bbcdfab16fe704941ee3879e57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4f3924a905135bbcdfab16fe704941ee3879e57"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "bfca2171be22b9da53153156c6d5e23e5cd86e59", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f5441df096d75d4e293d7e2062c2b962924dbdd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f5441df096d75d4e293d7e2062c2b962924dbdd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7f5441df096d75d4e293d7e2062c2b962924dbdd", "patch": "@@ -1,3 +1,11 @@\n+2010-03-22  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR target/38085\n+\t* config/i386/i386.c (x86_function_profiler)\n+\t[!NO_PROFILE_COUNTERS]: Fix typo.\n+\t* config/i386/gmon-sol2.c (_mcleanup) [__x86_64__]: Use call\n+\tinstead of callq.\n+\n 2010-03-22  Janis Johnson  <janis187@us.ibm.com>\n \t    Rainer Orth <ro@CeBiTec.Uni-Bielefeld.DE>\n "}, {"sha": "e0923a0770f6aeed436b3afbd8da8f9a58335569", "filename": "gcc/config/i386/gmon-sol2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f5441df096d75d4e293d7e2062c2b962924dbdd/gcc%2Fconfig%2Fi386%2Fgmon-sol2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f5441df096d75d4e293d7e2062c2b962924dbdd/gcc%2Fconfig%2Fi386%2Fgmon-sol2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fgmon-sol2.c?ref=7f5441df096d75d4e293d7e2062c2b962924dbdd", "patch": "@@ -268,7 +268,7 @@ asm(\".globl _mcount\\n\"\n        FROMPCINDEX (via the frame pointer.  */\n     \"\\tmovq\\t0x38(%rsp),%rdi\\n\"\n     \"\\tmovq\\t0x8(%rbp),%rsi\\n\"\n-    \"\\tcallq\\tinternal_mcount\\n\"\n+    \"\\tcall\\tinternal_mcount\\n\"\n     /* Restore the saved registers.  */\n     \"\\tmovq\\t0x30(%rsp),%r9\\n\"\n     \"\\tmovq\\t0x28(%rsp),%r8\\n\""}, {"sha": "56207657ba120063c99e99cb8f2677318c41dd13", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f5441df096d75d4e293d7e2062c2b962924dbdd/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f5441df096d75d4e293d7e2062c2b962924dbdd/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=7f5441df096d75d4e293d7e2062c2b962924dbdd", "patch": "@@ -26369,7 +26369,7 @@ x86_function_profiler (FILE *file, int labelno ATTRIBUTE_UNUSED)\n   if (TARGET_64BIT)\n     {\n #ifndef NO_PROFILE_COUNTERS\n-      fprintf (file, \"\\tleaq\\t\" LPREFIX \"P%d@(%%rip),%%r11\\n\", labelno);\n+      fprintf (file, \"\\tleaq\\t\" LPREFIX \"P%d(%%rip),%%r11\\n\", labelno);\n #endif\n \n       if (DEFAULT_ABI == SYSV_ABI && flag_pic)"}, {"sha": "db348ba349c201da7d87d40a7037ad8fed41c5e1", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f5441df096d75d4e293d7e2062c2b962924dbdd/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f5441df096d75d4e293d7e2062c2b962924dbdd/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=7f5441df096d75d4e293d7e2062c2b962924dbdd", "patch": "@@ -1,3 +1,13 @@\n+2010-03-22  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR target/38085\n+\t* config/i386/t-sol2 ($(T)gmon.o): Use CFLAGS instead of\n+\tMULTILIB_CFLAGS.\n+\t($(T)gcrt1.o): Likewise.\n+\t($(T)crt1.o): Likewise.\n+\t($(T)crti.o): Likewise.\n+\t($(T)crtn.o): Likewise.\n+\n 2010-03-01  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \tPR other/42980"}, {"sha": "351d7fb90e774670232bd7f8cda4d8e5995081f3", "filename": "libgcc/config/i386/t-sol2", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f5441df096d75d4e293d7e2062c2b962924dbdd/libgcc%2Fconfig%2Fi386%2Ft-sol2", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f5441df096d75d4e293d7e2062c2b962924dbdd/libgcc%2Fconfig%2Fi386%2Ft-sol2", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2Ft-sol2?ref=7f5441df096d75d4e293d7e2062c2b962924dbdd", "patch": "@@ -1,6 +1,6 @@\n # gmon build rule:\n $(T)gmon.o:\t$(gcc_srcdir)/config/i386/gmon-sol2.c $(GCC_PASSES) $(CONFIG_H)\n-\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) \\\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(CFLAGS) \\\n \t\t-c $(gcc_srcdir)/config/i386/gmon-sol2.c -o $(T)gmon.o\n \n # Assemble startup files.\n@@ -9,16 +9,16 @@ $(T)gmon.o:\t$(gcc_srcdir)/config/i386/gmon-sol2.c $(GCC_PASSES) $(CONFIG_H)\n # the comments with sed.  This bug may only be in the Early Access releases.\n $(T)gcrt1.o: $(gcc_srcdir)/config/i386/sol2-gc1.asm $(GCC_PASSES)\n \tsed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-gc1.asm >gcrt1.s\n-\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)gcrt1.o gcrt1.s\n+\t$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)gcrt1.o gcrt1.s\n $(T)crt1.o: $(gcc_srcdir)/config/i386/sol2-c1.asm $(GCC_PASSES)\n \tsed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-c1.asm >crt1.s\n-\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crt1.o crt1.s\n+\t$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)crt1.o crt1.s\n $(T)crti.o: $(gcc_srcdir)/config/i386/sol2-ci.asm $(GCC_PASSES)\n \tsed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-ci.asm >crti.s\n-\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crti.o crti.s\n+\t$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)crti.o crti.s\n $(T)crtn.o: $(gcc_srcdir)/config/i386/sol2-cn.asm $(GCC_PASSES)\n \tsed -e '/^!/d' <$(gcc_srcdir)/config/i386/sol2-cn.asm >crtn.s\n-\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crtn.o crtn.s\n+\t$(GCC_FOR_TARGET) $(CFLAGS) -c -o $(T)crtn.o crtn.s\n \n # We need to use -fPIC when we are using gcc to compile the routines in\n # crtstuff.c.  This is only really needed when we are going to use gcc/g++"}]}