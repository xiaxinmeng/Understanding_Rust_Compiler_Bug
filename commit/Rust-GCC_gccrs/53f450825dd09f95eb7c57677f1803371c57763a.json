{"sha": "53f450825dd09f95eb7c57677f1803371c57763a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNmNDUwODI1ZGQwOWY5NWViN2M1NzY3N2YxODAzMzcxYzU3NzYzYQ==", "commit": {"author": {"name": "Jozef Lawrynowicz", "email": "jozef.l@mittosystems.com", "date": "2019-10-07T20:05:30Z"}, "committer": {"name": "Jozef Lawrynowicz", "email": "jozefl@gcc.gnu.org", "date": "2019-10-07T20:05:30Z"}, "message": "msp430-protos.h (msp430_split_addsi): New prototype.\n\n2019-10-07  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n\n\t* config/msp430/msp430-protos.h (msp430_split_addsi): New prototype.\n\t* config/msp430/msp430.c (msp430_split_addsi): New.\n\t* config/msp430/msp430.md: Call msp430_split_addsi () instead of using\n\ta block of C code for splitting addsi.\n\nFrom-SVN: r276670", "tree": {"sha": "331aaa0202c6bbec814f063a5eaeabc4eb5dd840", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/331aaa0202c6bbec814f063a5eaeabc4eb5dd840"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53f450825dd09f95eb7c57677f1803371c57763a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53f450825dd09f95eb7c57677f1803371c57763a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53f450825dd09f95eb7c57677f1803371c57763a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53f450825dd09f95eb7c57677f1803371c57763a/comments", "author": {"login": "jozefl-mitto", "id": 36524004, "node_id": "MDQ6VXNlcjM2NTI0MDA0", "avatar_url": "https://avatars.githubusercontent.com/u/36524004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jozefl-mitto", "html_url": "https://github.com/jozefl-mitto", "followers_url": "https://api.github.com/users/jozefl-mitto/followers", "following_url": "https://api.github.com/users/jozefl-mitto/following{/other_user}", "gists_url": "https://api.github.com/users/jozefl-mitto/gists{/gist_id}", "starred_url": "https://api.github.com/users/jozefl-mitto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jozefl-mitto/subscriptions", "organizations_url": "https://api.github.com/users/jozefl-mitto/orgs", "repos_url": "https://api.github.com/users/jozefl-mitto/repos", "events_url": "https://api.github.com/users/jozefl-mitto/events{/privacy}", "received_events_url": "https://api.github.com/users/jozefl-mitto/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "36d387f2f098d6d1e1e77d19e38f3b6221ccde2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36d387f2f098d6d1e1e77d19e38f3b6221ccde2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36d387f2f098d6d1e1e77d19e38f3b6221ccde2b"}], "stats": {"total": 51, "additions": 34, "deletions": 17}, "files": [{"sha": "91ebb5a114c8576eeff66a2d830f6480049fba51", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=53f450825dd09f95eb7c57677f1803371c57763a", "patch": "@@ -1,3 +1,10 @@\n+2019-10-07  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n+\n+\t* config/msp430/msp430-protos.h (msp430_split_addsi): New prototype.\n+\t* config/msp430/msp430.c (msp430_split_addsi): New.\n+\t* config/msp430/msp430.md: Call msp430_split_addsi () instead of using\n+\ta block of C code for splitting addsi.\n+\n 2019-10-07  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386-expand.c (ix86_expand_floorceildf_32,"}, {"sha": "37ca48297acc4436ae3a25607e7908d8931eec6e", "filename": "gcc/config/msp430/msp430-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2Fconfig%2Fmsp430%2Fmsp430-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2Fconfig%2Fmsp430%2Fmsp430-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430-protos.h?ref=53f450825dd09f95eb7c57677f1803371c57763a", "patch": "@@ -44,6 +44,7 @@ void\tmsp430_output_labelref (FILE *, const char *);\n void\tmsp430_register_pragmas (void);\n rtx\tmsp430_return_addr_rtx (int);\n void\tmsp430_split_movsi (rtx *);\n+int msp430_split_addsi (rtx *);\n void    msp430_start_function (FILE *, const char *, tree);\n rtx\tmsp430_subreg (machine_mode, rtx, machine_mode, int);\n bool    msp430_use_f5_series_hwmult (void);"}, {"sha": "add19bdb97ce957b8a4967838a67bef6e8a0af0a", "filename": "gcc/config/msp430/msp430.c", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.c?ref=53f450825dd09f95eb7c57677f1803371c57763a", "patch": "@@ -2841,6 +2841,29 @@ msp430_subreg (machine_mode mode, rtx r, machine_mode omode, int byte)\n   return rv;\n }\n \n+int\n+msp430_split_addsi (rtx *operands)\n+{\n+  operands[3] = msp430_subreg (HImode, operands[0], SImode, 0);\n+  operands[4] = msp430_subreg (HImode, operands[1], SImode, 0);\n+  operands[5] = msp430_subreg (HImode, operands[2], SImode, 0);\n+  operands[6] = msp430_subreg (HImode, operands[0], SImode, 2);\n+  operands[7] = msp430_subreg (HImode, operands[1], SImode, 2);\n+  operands[8] = msp430_subreg (HImode, operands[2], SImode, 2);\n+\n+  /* BZ 64160: Do not use this splitter when the dest partially overlaps the\n+     source.  */\n+  if (reg_overlap_mentioned_p (operands[3], operands[7])\n+      || reg_overlap_mentioned_p (operands[3], operands[8]))\n+    return 1;\n+\n+  if (GET_CODE (operands[5]) == CONST_INT)\n+    operands[9] = GEN_INT (INTVAL (operands[5]) & 0xffff);\n+  else\n+    operands[9] = gen_rtx_ZERO_EXTEND (SImode, operands[5]);\n+  return 0;\n+}\n+\n /* Called by movsi_x to generate the HImode operands.  */\n void\n msp430_split_movsi (rtx *operands)"}, {"sha": "e1c61f5ea3d12c20cc0a4f035e1c623064f952f4", "filename": "gcc/config/msp430/msp430.md", "status": "modified", "additions": 3, "deletions": 17, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2Fconfig%2Fmsp430%2Fmsp430.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53f450825dd09f95eb7c57677f1803371c57763a/gcc%2Fconfig%2Fmsp430%2Fmsp430.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.md?ref=53f450825dd09f95eb7c57677f1803371c57763a", "patch": "@@ -423,23 +423,9 @@\n \t\t (zero_extend:HI (reg:BI CARRY))))\n    ]\n   \"\n-   operands[3] = msp430_subreg (HImode, operands[0], SImode, 0);\n-   operands[4] = msp430_subreg (HImode, operands[1], SImode, 0);\n-   operands[5] = msp430_subreg (HImode, operands[2], SImode, 0);\n-   operands[6] = msp430_subreg (HImode, operands[0], SImode, 2);\n-   operands[7] = msp430_subreg (HImode, operands[1], SImode, 2);\n-   operands[8] = msp430_subreg (HImode, operands[2], SImode, 2);\n-\n-   /* BZ 64160: Do not use this splitter when the dest partially overlaps the source.  */\n-   if (reg_overlap_mentioned_p (operands[3], operands[7])\n-       || reg_overlap_mentioned_p (operands[3], operands[8]))\n-      FAIL;\n-\n-   if (GET_CODE (operands[5]) == CONST_INT)\n-     operands[9] = GEN_INT (INTVAL (operands[5]) & 0xffff);\n-   else\n-     operands[9] = gen_rtx_ZERO_EXTEND (SImode, operands[5]);\n-   \"\n+  if (msp430_split_addsi (operands))\n+    FAIL;\n+  \"\n   )\n \n "}]}