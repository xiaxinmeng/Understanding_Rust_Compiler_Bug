{"sha": "011a31984dbaed1aabe358a3d7a46a239a86afb3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDExYTMxOTg0ZGJhZWQxYWFiZTM1OGEzZDdhNDZhMjM5YTg2YWZiMw==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-07-25T13:45:02Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-07-25T13:45:02Z"}, "message": "target-supports.exp (check_effective_target_static): New procedure.\n\n\t* lib/target-supports.exp (check_effective_target_static): New\n\tprocedure.\n\t* gcc.dg/special/gcsec-1.c (dg-options): Use -static only when\n\tsupported.\n\t* g++.old-deja/g++.law/weak.C: Require static effective target.\n\nFrom-SVN: r150080", "tree": {"sha": "b128f10b07ee43b10c821597a326137ebbd9b386", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b128f10b07ee43b10c821597a326137ebbd9b386"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/011a31984dbaed1aabe358a3d7a46a239a86afb3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/011a31984dbaed1aabe358a3d7a46a239a86afb3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/011a31984dbaed1aabe358a3d7a46a239a86afb3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/011a31984dbaed1aabe358a3d7a46a239a86afb3/comments", "author": null, "committer": null, "parents": [{"sha": "9618fb3c1bf9bf211109d87c435804f164202bda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9618fb3c1bf9bf211109d87c435804f164202bda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9618fb3c1bf9bf211109d87c435804f164202bda"}], "stats": {"total": 28, "additions": 21, "deletions": 7}, "files": [{"sha": "20391535d9abff282e03863a395c8d75bcb530c8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=011a31984dbaed1aabe358a3d7a46a239a86afb3", "patch": "@@ -272,7 +272,7 @@\n 2009-07-23  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/40832\n-\t* config/i386/i386.c (output_387_ffreep): Rewrite to return\n+\t* config/i386/i386.c (output_387_ffreep): Rewrite to use\n \tASM_SHORT instead of .word.\n \t* config/i386/i386.md (*tls_global_dynamic_64): Use ASM_SHORT\n \tinstead of .word in asm template.\n@@ -286,8 +286,8 @@\n \t* ira.c (setup_cover_and_important_classes): Don't setup\n \tira_important_class_nums.  Add cover classes to the end of\n \timportant classes.\n-\t(cover_class_order, comp_reg_classes_func,\n-\treorder_important_classes): New.\n+\t(cover_class_order, comp_reg_classes_func, reorder_important_classes):\n+\tNew.\n \t(find_reg_class_closure): Use reorder_important_classes.\n \n \t* config/i386/i386.h (IRA_COVER_CLASSES): Remove."}, {"sha": "b70c78f942afac10eefd592240ad13ff81b5663c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=011a31984dbaed1aabe358a3d7a46a239a86afb3", "patch": "@@ -1,3 +1,11 @@\n+2009-07-25  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_static): New\n+\tprocedure.\n+\t* gcc.dg/special/gcsec-1.c (dg-options): Use -static only when\n+\tsupported.\n+\t* g++.old-deja/g++.law/weak.C: Require static effective target.\n+\n 2009-07-25  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/39630"}, {"sha": "99a0f1772e557a4d7e2fd09dca2228b839693ec5", "filename": "gcc/testsuite/g++.old-deja/g++.law/weak.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fweak.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fweak.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fweak.C?ref=011a31984dbaed1aabe358a3d7a46a239a86afb3", "patch": "@@ -1,4 +1,5 @@\n // { dg-do link { target i?86-*-linux* x86_64-*-linux* } }\n+// { dg-require-effective-target static }\n // { dg-options \"-static\" }\n // Bug: g++ fails to instantiate operator<<.\n "}, {"sha": "ef1434fbe8b084631793a63aee8ccab3478bb692", "filename": "gcc/testsuite/gcc.dg/special/gcsec-1.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2Fgcc.dg%2Fspecial%2Fgcsec-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2Fgcc.dg%2Fspecial%2Fgcsec-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fspecial%2Fgcsec-1.c?ref=011a31984dbaed1aabe358a3d7a46a239a86afb3", "patch": "@@ -3,10 +3,8 @@\n /* { dg-do run { xfail rs6000-*-aix* powerpc*-*-aix* } } */\n /* { dg-require-gc-sections \"\" } */\n \n-/* { dg-options \"-ffunction-sections -fdata-sections -Wl,--gc-sections -static\" } */\n-/* { dg-options \"-ffunction-sections -fdata-sections -Wl,--gc-sections -static\" { target native } } */\n-/* Solaris 10 does not support static linking; there is no libc.a.  */\n-/* { dg-options \"-ffunction-sections -fdata-sections -Wl,--gc-sections\" { target *-*-netware* i?86-*-solaris2.1[0-9] } } */\n+/* { dg-options \"-ffunction-sections -fdata-sections -Wl,--gc-sections\" } */\n+/* { dg-options \"-ffunction-sections -fdata-sections -Wl,--gc-sections -static\" { target static } } */\n \n #include <stdlib.h>\n "}, {"sha": "c847de090e762748c9e3d68d41db2c42dcabde61", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/011a31984dbaed1aabe358a3d7a46a239a86afb3/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=011a31984dbaed1aabe358a3d7a46a239a86afb3", "patch": "@@ -625,6 +625,13 @@ proc check_effective_target_pe_aligned_commons {} {\n     return 0\n }\n \n+# Return 1 if the target supports -static\n+proc check_effective_target_static {} {\n+    return [check_no_compiler_messages static executable {\n+\tint main (void) { return 0; }\n+    } \"-static\"]\n+}\n+\n # Return 1 if the target supports -fstack-protector\n proc check_effective_target_fstack_protector {} {\n     return [check_runtime fstack_protector {"}]}