{"sha": "fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQyZWY1OTZiNWZlNmJmZGYxMGJlZDFjOGE0YjQxMDBkOGEwNzcyYQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2007-05-18T01:15:28Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2007-05-18T01:15:28Z"}, "message": "re PR middle-end/30251 (Evaluate bessel functions at compile-time)\n\n\tPR middle-end/30251\n\t* builtins.c (fold_builtin_1): Handle y0, y1.\n\t(fold_builtin_2): Handle yn.\n\ntestsuite:\n\t* gcc.dg/torture/builtin-math-2.c: Test y0, y1, yn.\n\t* gcc.dg/torture/builtin-math-4.c: Likewise.\n\nFrom-SVN: r124819", "tree": {"sha": "ddd282748d3d85c9d507e031c8331541a5e8978d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ddd282748d3d85c9d507e031c8331541a5e8978d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/comments", "author": null, "committer": null, "parents": [{"sha": "550b31876707cbf91d22ca6c37d032302d2048d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/550b31876707cbf91d22ca6c37d032302d2048d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/550b31876707cbf91d22ca6c37d032302d2048d9"}], "stats": {"total": 78, "additions": 78, "deletions": 0}, "files": [{"sha": "66c9acc7e8d05dc879525cd565f50912759a7f9f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "patch": "@@ -1,5 +1,9 @@\n 2007-05-17  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n+\tPR middle-end/30251\n+\t* builtins.c (fold_builtin_1): Handle y0, y1.\n+\t(fold_builtin_2): Handle yn.\n+\n \tPR middle-end/30251\n \t* builtins.c (do_mpfr_bessel_n): New.\n \t(fold_builtin_1): Handle BUILT_IN_J0 and BUILT_IN_J1."}, {"sha": "da6bbc6e51029f6c25a888c64a52c6edec698453", "filename": "gcc/builtins.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "patch": "@@ -9783,6 +9783,18 @@ fold_builtin_1 (tree fndecl, tree arg0, bool ignore)\n \treturn do_mpfr_arg1 (arg0, type, mpfr_j1,\n \t\t\t     NULL, NULL, 0);\n     break;\n+\n+    CASE_FLT_FN (BUILT_IN_Y0):\n+      if (validate_arg (arg0, REAL_TYPE))\n+\treturn do_mpfr_arg1 (arg0, type, mpfr_y0,\n+\t\t\t     &dconst0, NULL, false);\n+    break;\n+\n+    CASE_FLT_FN (BUILT_IN_Y1):\n+      if (validate_arg (arg0, REAL_TYPE))\n+\treturn do_mpfr_arg1 (arg0, type, mpfr_y1,\n+\t\t\t     &dconst0, NULL, false);\n+    break;\n #endif\n \n     CASE_FLT_FN (BUILT_IN_NAN):\n@@ -9901,6 +9913,13 @@ fold_builtin_2 (tree fndecl, tree arg0, tree arg1, bool ignore)\n \t  && validate_arg (arg1, REAL_TYPE))\n \treturn do_mpfr_bessel_n (arg0, arg1, type, mpfr_jn, NULL, 0);\n     break;\n+\n+    CASE_FLT_FN (BUILT_IN_YN):\n+      if (validate_arg (arg0, INTEGER_TYPE)\n+\t  && validate_arg (arg1, REAL_TYPE))\n+\treturn do_mpfr_bessel_n (arg0, arg1, type, mpfr_yn,\n+\t\t\t\t &dconst0, false);\n+    break;\n #endif\n \n     CASE_FLT_FN (BUILT_IN_ATAN2):"}, {"sha": "5d13049eb8293d09728a0e4c2a37c57db9178f9c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "patch": "@@ -1,5 +1,8 @@\n 2007-05-17  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n+\t* gcc.dg/torture/builtin-math-2.c: Test y0, y1, yn.\n+\t* gcc.dg/torture/builtin-math-4.c: Likewise.\n+\n \t* gcc.dg/torture/builtin-math-4.c: New test.\n \n 2007-05-17  Janis Johnson  <janis187@us.ibm.com>"}, {"sha": "f3cdaf623a860dee66c3c18b2d5df2e1af52e20d", "filename": "gcc/testsuite/gcc.dg/torture/builtin-math-2.c", "status": "modified", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c?ref=fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "patch": "@@ -24,6 +24,12 @@ extern void fool (long double);\n   fool (__builtin_##FUNC##l (ARG1##L, ARG2##L)); \\\n } while (0)\n \n+#define TESTIT2_I1(FUNC, ARG1, ARG2) do { \\\n+  foof (__builtin_##FUNC##f (ARG1, ARG2##F)); \\\n+  foo (__builtin_##FUNC (ARG1, ARG2)); \\\n+  fool (__builtin_##FUNC##l (ARG1, ARG2##L)); \\\n+} while (0)\n+\n #define TESTIT2_I2ALL(FUNC, ARGF, MAXF, ARGD, MAXD, ARGLD, MAXLD) do { \\\n   foof (__builtin_##FUNC##f (ARGF, MAXF)); \\\n   foo (__builtin_##FUNC (ARGD, MAXD)); \\\n@@ -228,6 +234,24 @@ void bar()\n   foof (__builtin_ilogbf (-__builtin_nanf(\"\")));\n   foo (__builtin_ilogb (-__builtin_nan(\"\")));\n   fool (__builtin_ilogbl (-__builtin_nanl(\"\")));\n+\n+  /* The y* arg must be [0 ... Inf] EXclusive.  */\n+  TESTIT (y0, -1.0);\n+  TESTIT (y0, 0.0);\n+  TESTIT (y0, -0.0);\n+\n+  TESTIT (y1, -1.0);\n+  TESTIT (y1, 0.0);\n+  TESTIT (y1, -0.0);\n+\n+  TESTIT2_I1 (yn, 2, -1.0);\n+  TESTIT2_I1 (yn, 2, 0.0);\n+  TESTIT2_I1 (yn, 2, -0.0);\n+\n+  TESTIT2_I1 (yn, -3, -1.0);\n+  TESTIT2_I1 (yn, -3, 0.0);\n+  TESTIT2_I1 (yn, -3, -0.0);\n+\n }\n \n /* { dg-final { scan-tree-dump-times \"exp2 \" 9 \"original\" } } */\n@@ -284,4 +308,13 @@ void bar()\n /* { dg-final { scan-tree-dump-times \"ilogb \" 6 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"ilogbf\" 6 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"ilogbl\" 6 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"y0 \" 3 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"y0f\" 3 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"y0l\" 3 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"y1 \" 3 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"y1f\" 3 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"y1l\" 3 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"yn \" 6 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"ynf\" 6 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"ynl\" 6 \"original\" } } */\n /* { dg-final { cleanup-tree-dump \"original\" } } */"}, {"sha": "b7b8e5e7d55359d8e95c12e98d683b51bbb51762", "filename": "gcc/testsuite/gcc.dg/torture/builtin-math-4.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-4.c?ref=fd2ef596b5fe6bfdf10bed1c8a4b4100d8a0772a", "patch": "@@ -113,5 +113,24 @@ int main (void)\n   TESTIT2_R (jn, -5, 4.6, -0.21, -0.20); /* jn(-5,4.6) == -0.207... */\n   TESTIT2_R (jn, -5, -4.6, 0.20, 0.21); /* jn(-5,-4.6) == 0.207... */\n \n+  TESTIT_R (y0, 5.0, -0.31, -0.30); /* y0(5) == -0.308... */\n+  TESTIT_R (y0, 0.1, -1.54, -1.53); /* y0(0.1) == -1.534... */\n+\n+  TESTIT_R (y1, 5.0, 0.14, 0.15); /* y1(5) == 0.147... */\n+  TESTIT_R (y1, 0.1, -6.46, -6.45); /* y1(0.1) == -6.458... */\n+\n+  TESTIT2_R (yn, -1, 3.0, -0.33, -0.32); /* yn(-1,3) == -0.324... */\n+  TESTIT2_R (yn, -1, 0.25, 2.70, 2.71); /* yn(-1,0.25) == 2.704... */\n+\n+  TESTIT2_R (yn, 2, 4.0, 0.21, 0.22); /* yn(2,4) == 0.215... */\n+  TESTIT2_R (yn, 2, 0.9, -1.95, -1.94); /* yn(2,0.9) == -1.945... */\n+  TESTIT2_R (yn, -2, 4.0, 0.21, 0.22); /* yn(-2,4) == 0.215... */\n+  TESTIT2_R (yn, -2, 0.9, -1.95, -1.94); /* yn(-2,0.9) == -1.945... */\n+\n+  TESTIT2_R (yn, 3, 6.0, 0.32, 0.33); /* yn(3,6) == 0.328... */\n+  TESTIT2_R (yn, 3, 0.89, -8.03, -8.02); /* yn(3,0.89) == -8.020... */\n+  TESTIT2_R (yn, -3, 8.0, -0.03, -0.02); /* yn(-3,8) == -0.026... */\n+  TESTIT2_R (yn, -3, 0.99, 5.98, 5.99); /* yn(-3,0.99) == 5.982... */\n+  \n   return 0;\n }"}]}