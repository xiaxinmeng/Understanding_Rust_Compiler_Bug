{"sha": "8750672faeaa9c633e2b2051c01fab6c6ceef81b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc1MDY3MmZhZWFhOWM2MzNlMmIyMDUxYzAxZmFiNmM2Y2VlZjgxYg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-03-04T10:27:10Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-03-04T10:27:10Z"}, "message": "re PR target/47975 (ICE: in expand_shift, at expmed.c:2299 when using 256b vectors without -mavx)\n\n2011-03-04  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/47975\n\t* optabs.c (optab_for_tree_code): Do not use VECTOR_MODE_P.\n\n\t* gcc.dg/torture/pr47975.c: New testcase.\n\nFrom-SVN: r170672", "tree": {"sha": "cdba557b51d02ff0ac444f8c3d9acf9254b78dba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cdba557b51d02ff0ac444f8c3d9acf9254b78dba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8750672faeaa9c633e2b2051c01fab6c6ceef81b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8750672faeaa9c633e2b2051c01fab6c6ceef81b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8750672faeaa9c633e2b2051c01fab6c6ceef81b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8750672faeaa9c633e2b2051c01fab6c6ceef81b/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d1ad70b2b01e5b5be46e5c683d78eb14c8a34b1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ad70b2b01e5b5be46e5c683d78eb14c8a34b1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1ad70b2b01e5b5be46e5c683d78eb14c8a34b1e"}], "stats": {"total": 27, "additions": 23, "deletions": 4}, "files": [{"sha": "a968fe7449e1d7b71f742021578f5be070357c77", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8750672faeaa9c633e2b2051c01fab6c6ceef81b", "patch": "@@ -1,3 +1,8 @@\n+2011-03-04  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/47975\n+\t* optabs.c (optab_for_tree_code): Do not use VECTOR_MODE_P.\n+\n 2011-03-04  Richard Henderson  <rth@redhat.com>\n \n \t* explow.c (emit_stack_save): Remove 'after' parameter."}, {"sha": "6be8db03cce70f48ba2ee17e9cd88757b81f28fc", "filename": "gcc/optabs.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=8750672faeaa9c633e2b2051c01fab6c6ceef81b", "patch": "@@ -303,7 +303,7 @@ optab_for_tree_code (enum tree_code code, const_tree type,\n       return TYPE_UNSIGNED (type) ? udiv_optab : sdiv_optab;\n \n     case LSHIFT_EXPR:\n-      if (VECTOR_MODE_P (TYPE_MODE (type)))\n+      if (TREE_CODE (type) == VECTOR_TYPE)\n \t{\n \t  if (subtype == optab_vector)\n \t    return TYPE_SATURATING (type) ? NULL : vashl_optab;\n@@ -315,7 +315,7 @@ optab_for_tree_code (enum tree_code code, const_tree type,\n       return ashl_optab;\n \n     case RSHIFT_EXPR:\n-      if (VECTOR_MODE_P (TYPE_MODE (type)))\n+      if (TREE_CODE (type) == VECTOR_TYPE)\n \t{\n \t  if (subtype == optab_vector)\n \t    return TYPE_UNSIGNED (type) ? vlshr_optab : vashr_optab;\n@@ -325,7 +325,7 @@ optab_for_tree_code (enum tree_code code, const_tree type,\n       return TYPE_UNSIGNED (type) ? lshr_optab : ashr_optab;\n \n     case LROTATE_EXPR:\n-      if (VECTOR_MODE_P (TYPE_MODE (type)))\n+      if (TREE_CODE (type) == VECTOR_TYPE)\n \t{\n \t  if (subtype == optab_vector)\n \t    return vrotl_optab;\n@@ -335,7 +335,7 @@ optab_for_tree_code (enum tree_code code, const_tree type,\n       return rotl_optab;\n \n     case RROTATE_EXPR:\n-      if (VECTOR_MODE_P (TYPE_MODE (type)))\n+      if (TREE_CODE (type) == VECTOR_TYPE)\n \t{\n \t  if (subtype == optab_vector)\n \t    return vrotr_optab;"}, {"sha": "c10542285755267b5deacc475aa35ac319e1cb71", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8750672faeaa9c633e2b2051c01fab6c6ceef81b", "patch": "@@ -1,3 +1,8 @@\n+2011-03-04  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/47975\n+\t* gcc.dg/torture/pr47975.c: New testcase.\n+\n 2011-03-03  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/47974"}, {"sha": "2919452a02470e402140ca1d5791ace1bcaaaa82", "filename": "gcc/testsuite/gcc.dg/torture/pr47975.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr47975.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8750672faeaa9c633e2b2051c01fab6c6ceef81b/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr47975.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr47975.c?ref=8750672faeaa9c633e2b2051c01fab6c6ceef81b", "patch": "@@ -0,0 +1,9 @@\n+/* { dg-do compile } */\n+\n+int __attribute__ ((vector_size (32))) x;\n+\n+void\n+foo (void)\n+{\n+  x <<= x;\n+}"}]}