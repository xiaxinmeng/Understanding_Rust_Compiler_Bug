{"sha": "781e6f76683d17b29125d28f52be00151321b772", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzgxZTZmNzY2ODNkMTdiMjkxMjVkMjhmNTJiZTAwMTUxMzIxYjc3Mg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-12-21T18:56:02Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-12-21T18:56:02Z"}, "message": "(mulhisi3): Add truncate to mulhisi3 to fix bug and change from define_insn to...\n\n(mulhisi3): Add truncate to mulhisi3 to fix bug and change from\ndefine_insn to define_expand to survive register presssure.\n\nFrom-SVN: r8683", "tree": {"sha": "c59b8d262d7d6d04f49437c72ab74b79e1b9abef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c59b8d262d7d6d04f49437c72ab74b79e1b9abef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/781e6f76683d17b29125d28f52be00151321b772", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/781e6f76683d17b29125d28f52be00151321b772", "html_url": "https://github.com/Rust-GCC/gccrs/commit/781e6f76683d17b29125d28f52be00151321b772", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/781e6f76683d17b29125d28f52be00151321b772/comments", "author": null, "committer": null, "parents": [{"sha": "76ebc969d32ea4ad8a7fd7a98a30f093906b2847", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76ebc969d32ea4ad8a7fd7a98a30f093906b2847", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76ebc969d32ea4ad8a7fd7a98a30f093906b2847"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "10673c78224f6bb17c5cbbcb09cfe2c1ffaaf679", "filename": "gcc/config/pdp11/pdp11.md", "status": "modified", "additions": 22, "deletions": 2, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/781e6f76683d17b29125d28f52be00151321b772/gcc%2Fconfig%2Fpdp11%2Fpdp11.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/781e6f76683d17b29125d28f52be00151321b772/gcc%2Fconfig%2Fpdp11%2Fpdp11.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpdp11%2Fpdp11.md?ref=781e6f76683d17b29125d28f52be00151321b772", "patch": "@@ -1670,14 +1670,34 @@\n   [(set_attr \"length\" \"1,2\")])\n \n ;; 32 bit result\n-(define_insn \"mulhisi3\"\n+(define_expand \"mulhisi3\"\n+  [(set (match_dup 3)\n+\t(match_operand:HI 1 \"general_operand\" \"g,g\"))\n+   (set (match_operand:SI 0 \"register_operand\" \"=r,r\") ; even numbered!\n+\t(mult:SI (truncate:HI \n+                  (match_dup 0))\n+\t\t (match_operand:HI 2 \"general_operand\" \"rR,Qi\")))]\n+  \"TARGET_45\"\n+  \"operands[3] = gen_lowpart(HImode, operands[1]);\")\n+\n+(define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r,r\") ; even numbered!\n-\t(mult:SI (match_operand:HI 1 \"register_operand\" \"%0,0\")\n+\t(mult:SI (truncate:HI \n+                  (match_operand:SI 1 \"register_operand\" \"%0,0\"))\n \t\t (match_operand:HI 2 \"general_operand\" \"rR,Qi\")))]\n   \"TARGET_45\"\n   \"mul %2, %0\"\n   [(set_attr \"length\" \"1,2\")])\n \n+;(define_insn \"mulhisi3\"\n+;  [(set (match_operand:SI 0 \"register_operand\" \"=r,r\") ; even numbered!\n+;\t(mult:SI (truncate:HI \n+;                  (match_operand:SI 1 \"register_operand\" \"%0,0\"))\n+;\t\t (match_operand:HI 2 \"general_operand\" \"rR,Qi\")))]\n+;  \"TARGET_45\"\n+;  \"mul %2, %0\"\n+;  [(set_attr \"length\" \"1,2\")])\n+\n ;;- divide\n ;; how can I use the remainder ? - \n ;; modsidi and move upper register to lower ????"}]}