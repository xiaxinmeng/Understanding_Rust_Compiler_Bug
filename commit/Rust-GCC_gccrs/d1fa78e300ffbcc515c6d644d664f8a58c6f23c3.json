{"sha": "d1fa78e300ffbcc515c6d644d664f8a58c6f23c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFmYTc4ZTMwMGZmYmNjNTE1YzZkNjQ0ZDY2NGY4YTU4YzZmMjNjMw==", "commit": {"author": {"name": "Jose Ruiz", "email": "ruiz@adacore.com", "date": "2006-10-31T17:47:01Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-10-31T17:47:01Z"}, "message": "s-osinte-vxworks.ads, [...]:\n\n2006-10-31  Jose Ruiz  <ruiz@adacore.com>\n\n\t* s-osinte-vxworks.ads, s-osinte-vxworks.adb: \n\t(getpid): New body for this function that uses the underlying taskIdSelf\n\tfunction for VxWorks 5 and VxWorks 6 in kernel mode.\n\t(unsigned_int): New type, modular to allow logical bit operations.\n\t(taskOptionsGet): New imported function.\n\n\t* s-taspri-vxworks.ads (Private_Data): Change the type for the LWP\n\tfield to be compliant with the type used by the corresponding operating\n\tsystem primitive.\n\nFrom-SVN: r118239", "tree": {"sha": "3336477fa0f5d707b79b80880d884a20d663703f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3336477fa0f5d707b79b80880d884a20d663703f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3/comments", "author": {"login": "JoseRuizAdaCore", "id": 22770339, "node_id": "MDQ6VXNlcjIyNzcwMzM5", "avatar_url": "https://avatars.githubusercontent.com/u/22770339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoseRuizAdaCore", "html_url": "https://github.com/JoseRuizAdaCore", "followers_url": "https://api.github.com/users/JoseRuizAdaCore/followers", "following_url": "https://api.github.com/users/JoseRuizAdaCore/following{/other_user}", "gists_url": "https://api.github.com/users/JoseRuizAdaCore/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoseRuizAdaCore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoseRuizAdaCore/subscriptions", "organizations_url": "https://api.github.com/users/JoseRuizAdaCore/orgs", "repos_url": "https://api.github.com/users/JoseRuizAdaCore/repos", "events_url": "https://api.github.com/users/JoseRuizAdaCore/events{/privacy}", "received_events_url": "https://api.github.com/users/JoseRuizAdaCore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8dbb621ea24e804d0deac2bcef1f0edd9ae874fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dbb621ea24e804d0deac2bcef1f0edd9ae874fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dbb621ea24e804d0deac2bcef1f0edd9ae874fb"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "6cad500cda3a410afbe185b6ce7324d6b3652746", "filename": "gcc/ada/s-osinte-vxworks.adb", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3/gcc%2Fada%2Fs-osinte-vxworks.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3/gcc%2Fada%2Fs-osinte-vxworks.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-vxworks.adb?ref=d1fa78e300ffbcc515c6d644d664f8a58c6f23c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                   B o d y                                --\n --                                                                          --\n---             Copyright (C) 1997-2005 Free Software Foundation             --\n+--             Copyright (C) 1997-2006 Free Software Foundation             --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -47,6 +47,18 @@ package body System.OS_Interface is\n    Low_Priority : constant := 255;\n    --  VxWorks native (default) lowest scheduling priority.\n \n+   ------------\n+   -- getpid --\n+   ------------\n+\n+   function getpid return t_id is\n+   begin\n+      --  VxWorks 5 (and VxWorks 6 in kernel mode) does not have a getpid\n+      --  function. taskIdSelf is the equivalent routine.\n+\n+      return taskIdSelf;\n+   end getpid;\n+\n    ----------\n    -- kill --\n    ----------"}, {"sha": "c7511525378756ad09f8f8322e76dd422b7f1e8c", "filename": "gcc/ada/s-osinte-vxworks.ads", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3/gcc%2Fada%2Fs-osinte-vxworks.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3/gcc%2Fada%2Fs-osinte-vxworks.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-vxworks.ads?ref=d1fa78e300ffbcc515c6d644d664f8a58c6f23c3", "patch": "@@ -48,6 +48,7 @@ package System.OS_Interface is\n \n    subtype int        is Interfaces.C.int;\n    subtype short      is Short_Integer;\n+   type unsigned_int  is mod 2 ** int'Size;\n    type long          is new Long_Integer;\n    type unsigned_long is mod 2 ** long'Size;\n    type size_t        is mod 2 ** Standard'Address_Size;\n@@ -154,8 +155,7 @@ package System.OS_Interface is\n    pragma Inline (kill);\n \n    function getpid return t_id;\n-   pragma Import (C, getpid, \"taskIdSelf\");\n-   --  VxWorks doesn't have getpid; taskIdSelf is the equivalent routine.\n+   pragma Inline (getpid);\n \n    ----------\n    -- Time --\n@@ -218,6 +218,9 @@ package System.OS_Interface is\n    function taskIdSelf return t_id;\n    pragma Import (C, taskIdSelf, \"taskIdSelf\");\n \n+   function taskOptionsGet (tid : t_id; pOptions : access int) return int;\n+   pragma Import (C, taskOptionsGet, \"taskOptionsGet\");\n+\n    function taskSuspend (tid : t_id) return int;\n    pragma Import (C, taskSuspend, \"taskSuspend\");\n "}, {"sha": "e42535cae008053cdc8d5308aa6674ebd701d168", "filename": "gcc/ada/s-taspri-vxworks.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3/gcc%2Fada%2Fs-taspri-vxworks.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fa78e300ffbcc515c6d644d664f8a58c6f23c3/gcc%2Fada%2Fs-taspri-vxworks.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-taspri-vxworks.ads?ref=d1fa78e300ffbcc515c6d644d664f8a58c6f23c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---          Copyright (C) 2001-2005 Free Software Foundation, Inc.          --\n+--          Copyright (C) 2001-2006 Free Software Foundation, Inc.          --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -102,7 +102,7 @@ private\n       --  use lock on those operations and the only thing we have to\n       --  make sure is that they are updated in atomic fashion.\n \n-      LWP : aliased System.Address;\n+      LWP : aliased System.OS_Interface.t_id := 0;\n       --  The purpose of this field is to provide a better tasking support on\n       --  gdb. The order of the two first fields (Thread and LWP) is important.\n       --  On targets where lwp is not relevant, this is equivalent to Thread."}]}