{"sha": "d30fc980ac0178eb8a64277c063d518cb691f1d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMwZmM5ODBhYzAxNzhlYjhhNjQyNzdjMDYzZDUxOGNiNjkxZjFkMg==", "commit": {"author": {"name": "Jiong Wang", "email": "jiong.wang@arm.com", "date": "2014-11-12T09:37:01Z"}, "committer": {"name": "Jiong Wang", "email": "jiwang@gcc.gnu.org", "date": "2014-11-12T09:37:01Z"}, "message": "[PATCH][dejagnu] truncate absolute file path into relative for dg-output\n\n  gcc/testsuite/\n    * lib/gcc-dg.exp (${tool}_load): Truncate gcc output.\n    * lib/prune.exp (prune_gcc_output): New absolute path to relative path\n    truncation pattern.\n\nFrom-SVN: r217408", "tree": {"sha": "419a5d263f6bcb1ea4ba8d091fb42f0c96f27946", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/419a5d263f6bcb1ea4ba8d091fb42f0c96f27946"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d30fc980ac0178eb8a64277c063d518cb691f1d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d30fc980ac0178eb8a64277c063d518cb691f1d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d30fc980ac0178eb8a64277c063d518cb691f1d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d30fc980ac0178eb8a64277c063d518cb691f1d2/comments", "author": null, "committer": null, "parents": [{"sha": "e02101ff0ada598ec3777dfecc56ee3b84fdfa31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e02101ff0ada598ec3777dfecc56ee3b84fdfa31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e02101ff0ada598ec3777dfecc56ee3b84fdfa31"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "1cb9e1cc36f21e671cde3bf6442eb7f5b5193fc5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d30fc980ac0178eb8a64277c063d518cb691f1d2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d30fc980ac0178eb8a64277c063d518cb691f1d2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d30fc980ac0178eb8a64277c063d518cb691f1d2", "patch": "@@ -1,3 +1,9 @@\n+2014-11-12  Jiong Wang  <jiong.wang@arm.com>\n+\n+\t* lib/gcc-dg.exp (${tool}_load): Truncate gcc output.\n+\t* lib/prune.exp (prune_gcc_output): New absolute path to relative path\n+\ttruncation pattern.\n+\n 2014-11-12  Andreas Tobler  <andreast@gcc.gnu.org>\n \n \t* gcc.target/arm/eabi1.c: Replace arm*-*-*eabi* and arm*-*-symbianelf*"}, {"sha": "8168a77a441d31f32d702fd2a8db11d7f91cbea5", "filename": "gcc/testsuite/lib/gcc-dg.exp", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d30fc980ac0178eb8a64277c063d518cb691f1d2/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d30fc980ac0178eb8a64277c063d518cb691f1d2/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp?ref=d30fc980ac0178eb8a64277c063d518cb691f1d2", "patch": "@@ -281,6 +281,8 @@ if { [info procs ${tool}_load] != [list] \\\n \t    }\n \t    set result [list $status [lindex $result 1]]\n \t}\n+\n+\tset result [list [lindex $result 0] [prune_gcc_output [lindex $result 1]]]\n \treturn $result\n     }\n }"}, {"sha": "65028c21190ac4b71b39aaa61cf0a7e0a284d3f5", "filename": "gcc/testsuite/lib/prune.exp", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d30fc980ac0178eb8a64277c063d518cb691f1d2/gcc%2Ftestsuite%2Flib%2Fprune.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d30fc980ac0178eb8a64277c063d518cb691f1d2/gcc%2Ftestsuite%2Flib%2Fprune.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fprune.exp?ref=d30fc980ac0178eb8a64277c063d518cb691f1d2", "patch": "@@ -22,6 +22,8 @@ if ![info exists TEST_ALWAYS_FLAGS] {\n set TEST_ALWAYS_FLAGS \"-fno-diagnostics-show-caret -fdiagnostics-color=never $TEST_ALWAYS_FLAGS\"\n \n proc prune_gcc_output { text } {\n+    global srcdir\n+\n     #send_user \"Before:$text\\n\"\n \n     regsub -all \"(^|\\n)(\\[^\\n\\]*: )?In ((static member |lambda )?function|member|method|(copy )?constructor|destructor|instantiation|substitution|program|subroutine|block-data)\\[^\\n\\]*\" $text \"\" text\n@@ -66,6 +68,11 @@ proc prune_gcc_output { text } {\n     # Ignore harmless warnings from Xcode 4.0.\n     regsub -all \"(^|\\n)\\[^\\n\\]*ld: warning: could not create compact unwind for\\[^\\n\\]*\" $text \"\" text\n \n+    # Truncate absolute file path into relative path.\n+    set topdir \"[file dirname [file dirname [file dirname $srcdir]]]\"\n+    regsub -all \"$srcdir\\/\" $text \"\" text\n+    regsub -all \"$topdir\\/\" $text \"\" text\n+\n     #send_user \"After:$text\\n\"\n \n     return $text"}]}