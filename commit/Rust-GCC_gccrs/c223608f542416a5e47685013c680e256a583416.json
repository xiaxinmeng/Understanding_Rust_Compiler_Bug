{"sha": "c223608f542416a5e47685013c680e256a583416", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzIyMzYwOGY1NDI0MTZhNWU0NzY4NTAxM2M2ODBlMjU2YTU4MzQxNg==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2018-11-30T20:38:57Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2018-11-30T20:38:57Z"}, "message": "Add libgomp.oacc-fortran/lib-16-2.f90\n\nThis is a copy of libgomp.oacc-fortran/lib-16.f90, but does 'include\n\"openacc_lib.h\"' instead of 'use openacc'.\n\n\tlibgomp/\n\t* testsuite/libgomp.oacc-fortran/lib-16-2.f90: New file.\n\nFrom-SVN: r266683", "tree": {"sha": "5d194303498a9ceb6b8443b8bfba13f2eff270b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5d194303498a9ceb6b8443b8bfba13f2eff270b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c223608f542416a5e47685013c680e256a583416", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c223608f542416a5e47685013c680e256a583416", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c223608f542416a5e47685013c680e256a583416", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c223608f542416a5e47685013c680e256a583416/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9cb95c07fae669d450a0d29579e300ff52b45822", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cb95c07fae669d450a0d29579e300ff52b45822", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cb95c07fae669d450a0d29579e300ff52b45822"}], "stats": {"total": 63, "additions": 63, "deletions": 0}, "files": [{"sha": "a9dcbd808200a5457e09282f06f1017bf8cc7b62", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c223608f542416a5e47685013c680e256a583416/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c223608f542416a5e47685013c680e256a583416/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=c223608f542416a5e47685013c680e256a583416", "patch": "@@ -1,3 +1,7 @@\n+2018-11-30  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\t* testsuite/libgomp.oacc-fortran/lib-16-2.f90: New file.\n+\n 2018-10-19  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/88182"}, {"sha": "fa76f65912fb2d74ca8a4d0104bb9c6dca27698f", "filename": "libgomp/testsuite/libgomp.oacc-fortran/lib-16-2.f90", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c223608f542416a5e47685013c680e256a583416/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Flib-16-2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c223608f542416a5e47685013c680e256a583416/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Flib-16-2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Flib-16-2.f90?ref=c223608f542416a5e47685013c680e256a583416", "patch": "@@ -0,0 +1,58 @@\n+! See also \"lib-16.f90\".\n+! { dg-do run }\n+! { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-DACC_MEM_SHARED=0\" } }\n+\n+program main\n+  implicit none\n+  include \"openacc_lib.h\"\n+\n+  integer, parameter :: N = 256\n+  integer, allocatable :: h(:)\n+  integer :: i\n+  integer :: async = 5\n+\n+  allocate (h(N))\n+\n+  do i = 1, N\n+    h(i) = i\n+  end do \n+\n+  call acc_copyin (h)\n+\n+  do i = 1, N\n+    h(i) = i + i\n+  end do \n+\n+  call acc_update_device_async (h, sizeof (h), async)\n+\n+  if (acc_is_present (h) .neqv. .TRUE.) call abort\n+\n+  h(:) = 0\n+\n+  call acc_copyout_async (h, sizeof (h), async)\n+\n+  call acc_wait (async)\n+\n+  do i = 1, N\n+    if (h(i) /= i + i) call abort\n+  end do \n+\n+  call acc_copyin (h, sizeof (h))\n+\n+  h(:) = 0\n+\n+  call acc_update_self_async (h, sizeof (h), async)\n+  \n+  if (acc_is_present (h) .neqv. .TRUE.) call abort\n+\n+  do i = 1, N\n+    if (h(i) /= i + i) call abort\n+  end do \n+\n+  call acc_delete_async (h, async)\n+\n+  call acc_wait (async)\n+\n+  if (acc_is_present (h) .neqv. .FALSE.) call abort\n+  \n+end program"}, {"sha": "011f9cf31db4b1f8db724c5e79feae8072054656", "filename": "libgomp/testsuite/libgomp.oacc-fortran/lib-16.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c223608f542416a5e47685013c680e256a583416/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Flib-16.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c223608f542416a5e47685013c680e256a583416/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Flib-16.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Flib-16.f90?ref=c223608f542416a5e47685013c680e256a583416", "patch": "@@ -1,3 +1,4 @@\n+! See also \"lib-16-2.f90\".\n ! { dg-do run }\n ! { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-DACC_MEM_SHARED=0\" } }\n "}]}