{"sha": "f81c1b60f257f47b08ed9e03585b81922b9ec31e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjgxYzFiNjBmMjU3ZjQ3YjA4ZWQ5ZTAzNTg1YjgxOTIyYjllYzMxZQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@gmail.com", "date": "2006-11-20T04:51:47Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2006-11-20T04:51:47Z"}, "message": "re PR rtl-optimization/29879 (ICE: verify_flow_info: loop_father but no loops)\n\n2006-11-19  Andrew Pinski  <pinskia@gmail.com>\n\n        PR rtl-opt/29879\n        * fwprop.c (loops): Remove.\n        (forward_propagate_into): Use current_loops instead of\n        loops.\n        (fwprop_init): Call loop_optimizer_init instead of\n        flow_loops_find.\n        (fwprop_done): Call loop_optimizer_finalize instead of\n        flow_loops_free.\n        (fwprop): Use current_loops instead of loo\n\nFrom-SVN: r119010", "tree": {"sha": "8f0d473dbf3e7ac02950c8f90bc7545a3ffab15d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f0d473dbf3e7ac02950c8f90bc7545a3ffab15d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f81c1b60f257f47b08ed9e03585b81922b9ec31e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f81c1b60f257f47b08ed9e03585b81922b9ec31e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f81c1b60f257f47b08ed9e03585b81922b9ec31e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f81c1b60f257f47b08ed9e03585b81922b9ec31e/comments", "author": {"login": "pinskia", "id": 8496799, "node_id": "MDQ6VXNlcjg0OTY3OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8496799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinskia", "html_url": "https://github.com/pinskia", "followers_url": "https://api.github.com/users/pinskia/followers", "following_url": "https://api.github.com/users/pinskia/following{/other_user}", "gists_url": "https://api.github.com/users/pinskia/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinskia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinskia/subscriptions", "organizations_url": "https://api.github.com/users/pinskia/orgs", "repos_url": "https://api.github.com/users/pinskia/repos", "events_url": "https://api.github.com/users/pinskia/events{/privacy}", "received_events_url": "https://api.github.com/users/pinskia/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7f420d0d6459fdef0017363d95837cdaee9384fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f420d0d6459fdef0017363d95837cdaee9384fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f420d0d6459fdef0017363d95837cdaee9384fa"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "9742a6c0c2bad4b489c1c1c0cf5442c165d85b11", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f81c1b60f257f47b08ed9e03585b81922b9ec31e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f81c1b60f257f47b08ed9e03585b81922b9ec31e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f81c1b60f257f47b08ed9e03585b81922b9ec31e", "patch": "@@ -1,3 +1,15 @@\n+2006-11-19  Andrew Pinski  <pinskia@gmail.com>\n+\n+\tPR rtl-opt/29879\n+\t* fwprop.c (loops): Remove.\n+\t(forward_propagate_into): Use current_loops instead of\n+\tloops.\n+\t(fwprop_init): Call loop_optimizer_init instead of\n+\tflow_loops_find.\n+\t(fwprop_done): Call loop_optimizer_finalize instead of\n+\tflow_loops_free.\n+\t(fwprop): Use current_loops instead of loops.\n+\n 2006-11-19  Gabriel Dos Reis  <gdr@integrable-solutions.net>\n \n \tPR c++/8586"}, {"sha": "9dbf4749e2efe26ca5b2eda7a0f217ac7c2e5a86", "filename": "gcc/fwprop.c", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f81c1b60f257f47b08ed9e03585b81922b9ec31e/gcc%2Ffwprop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f81c1b60f257f47b08ed9e03585b81922b9ec31e/gcc%2Ffwprop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffwprop.c?ref=f81c1b60f257f47b08ed9e03585b81922b9ec31e", "patch": "@@ -104,7 +104,6 @@ Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA\n    where the first two insns are now dead.  */\n \n \n-static struct loops loops;\n static struct df *df;\n static int num_changes;\n \n@@ -859,7 +858,7 @@ forward_propagate_into (struct df_ref *use)\n \n   /* Do not propagate loop invariant definitions inside the loop if\n      we are going to unroll.  */\n-  if (loops.num > 0\n+  if (current_loops\n       && DF_REF_BB (def)->loop_father != DF_REF_BB (use)->loop_father)\n     return;\n \n@@ -896,7 +895,7 @@ fwprop_init (void)\n      before df_analyze, because flow_loops_find may introduce new jump\n      insns (sadly) if we are not working in cfglayout mode.  */\n   if (flag_rerun_cse_after_loop && (flag_unroll_loops || flag_peel_loops))\n-    flow_loops_find (&loops);\n+    loop_optimizer_init (0);\n \n   /* Now set up the dataflow problem (we only want use-def chains) and\n      put the dataflow solver to work.  */\n@@ -912,10 +911,7 @@ fwprop_done (void)\n   df_finish (df);\n \n   if (flag_rerun_cse_after_loop && (flag_unroll_loops || flag_peel_loops))\n-    {\n-      flow_loops_free (&loops);\n-      loops.num = 0;\n-    }\n+    loop_optimizer_finalize ();\n \n   free_dominance_info (CDI_DOMINATORS);\n   cleanup_cfg (0);\n@@ -955,7 +951,7 @@ fwprop (void)\n     {\n       struct df_ref *use = DF_USES_GET (df, i);\n       if (use)\n-\tif (loops.num == 0\n+\tif (!current_loops \n \t    || DF_REF_TYPE (use) == DF_REF_REG_USE\n \t    || DF_REF_BB (use)->loop_father == NULL)\n \t  forward_propagate_into (use);"}]}