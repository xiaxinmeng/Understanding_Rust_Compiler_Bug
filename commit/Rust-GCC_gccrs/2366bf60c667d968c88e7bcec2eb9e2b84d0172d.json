{"sha": "2366bf60c667d968c88e7bcec2eb9e2b84d0172d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjM2NmJmNjBjNjY3ZDk2OGM4OGU3YmNlYzJlYjllMmI4NGQwMTcyZA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2019-10-19T07:44:49Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2019-10-19T07:44:49Z"}, "message": "[Darwin, testsuite] Fix Wnonnull on Darwin.\n\nDarwin does not mark entries in string.h with nonnull attributes\nso the test fails.  Since the purpose of the test is to check that\nthe warnings are issued for an inlined function, not that the target\nheaders are marked up, we can provide marked up headers for Darwin.\n\ngcc/testsuite/ChangeLog:\n\n2019-10-19  Iain Sandoe  <iain@sandoe.co.uk>\n\n\t* gcc.dg/Wnonnull.c: Add attributed function declarations for\n\tmemcpy and strlen for Darwin.\n\nFrom-SVN: r277202", "tree": {"sha": "5009ca1e441c11a7a25bfd267edb541add82788c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5009ca1e441c11a7a25bfd267edb541add82788c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2366bf60c667d968c88e7bcec2eb9e2b84d0172d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2366bf60c667d968c88e7bcec2eb9e2b84d0172d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2366bf60c667d968c88e7bcec2eb9e2b84d0172d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2366bf60c667d968c88e7bcec2eb9e2b84d0172d/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dc7e9feb19598ea98afb14b18507562211d55349", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc7e9feb19598ea98afb14b18507562211d55349", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc7e9feb19598ea98afb14b18507562211d55349"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "6fc0c826d4cf579ecd28e62ad08487bb85a09a94", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2366bf60c667d968c88e7bcec2eb9e2b84d0172d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2366bf60c667d968c88e7bcec2eb9e2b84d0172d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2366bf60c667d968c88e7bcec2eb9e2b84d0172d", "patch": "@@ -1,3 +1,8 @@\n+2019-10-19  Iain Sandoe  <iain@sandoe.co.uk>\n+\n+\t* gcc.dg/Wnonnull.c: Add attributed function declarations for\n+\tmemcpy and strlen for Darwin.\n+\n 2019-10-18  Martin Sebor  <msebor@redhat.com>\n \n \tPR tree-optimization/92157"}, {"sha": "a165baa99f556b629abb20f2949d57b345bbcd2c", "filename": "gcc/testsuite/gcc.dg/Wnonnull.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2366bf60c667d968c88e7bcec2eb9e2b84d0172d/gcc%2Ftestsuite%2Fgcc.dg%2FWnonnull.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2366bf60c667d968c88e7bcec2eb9e2b84d0172d/gcc%2Ftestsuite%2Fgcc.dg%2FWnonnull.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWnonnull.c?ref=2366bf60c667d968c88e7bcec2eb9e2b84d0172d", "patch": "@@ -2,7 +2,16 @@\n    { dg-do compile }\n    { dg-options \"-O2 -Wall\" } */\n \n+#ifndef __APPLE__\n #include <string.h>\n+#else\n+/* OSX headers do not mark up the nonnull elements yet.  */\n+# include <stddef.h>\n+extern size_t strlen (const char *__s)\n+\t\t      __attribute ((pure)) __attribute ((nonnull (1)));\n+extern void *memcpy (void *__restrict __dest, const void *__restrict __src,\n+\t\t     size_t __n) __attribute ((nonnull (1, 2)));\n+#endif\n \n char buf[100];\n "}]}