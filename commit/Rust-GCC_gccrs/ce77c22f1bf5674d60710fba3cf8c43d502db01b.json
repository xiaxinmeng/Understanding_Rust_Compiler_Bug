{"sha": "ce77c22f1bf5674d60710fba3cf8c43d502db01b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U3N2MyMmYxYmY1Njc0ZDYwNzEwZmJhM2NmOGM0M2Q1MDJkYjAxYg==", "commit": {"author": {"name": "Jeffrey Yasskin", "email": "jyasskin@google.com", "date": "2011-07-27T18:38:48Z"}, "committer": {"name": "Jeffrey Yasskin", "email": "jyasskin@gcc.gnu.org", "date": "2011-07-27T18:38:48Z"}, "message": "Propagate the source location of a template's function_decl to the template_decl built out of it.\n\nPropagate the source location of a template's function_decl to the\ntemplate_decl built out of it.  Without this, specializations\ngenerated before the template was defined get the location of the\nclosing ')' instead of the location of the template's name, which can\nproduce inconsistent locations between translation units, which makes\ngold's ODR checker unhappy.\n\n\t* gcc/cp/pt.c (build_template_decl): Copy the function_decl's source\n\tlocation to the new template_decl.\n\t* gcc/testsuite/g++.old-deja/g++.pt/crash60.C: Updated.\n\t* libstdc++-v3/testsuite/20_util/weak_ptr/comparison/cmp_neg.cc: Updated.\n\nFrom-SVN: r176845", "tree": {"sha": "0046d7d004c0b89fc7974e8ca5f38cc5ebe79a08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0046d7d004c0b89fc7974e8ca5f38cc5ebe79a08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce77c22f1bf5674d60710fba3cf8c43d502db01b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce77c22f1bf5674d60710fba3cf8c43d502db01b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce77c22f1bf5674d60710fba3cf8c43d502db01b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce77c22f1bf5674d60710fba3cf8c43d502db01b/comments", "author": {"login": "jyasskin", "id": 83420, "node_id": "MDQ6VXNlcjgzNDIw", "avatar_url": "https://avatars.githubusercontent.com/u/83420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyasskin", "html_url": "https://github.com/jyasskin", "followers_url": "https://api.github.com/users/jyasskin/followers", "following_url": "https://api.github.com/users/jyasskin/following{/other_user}", "gists_url": "https://api.github.com/users/jyasskin/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyasskin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyasskin/subscriptions", "organizations_url": "https://api.github.com/users/jyasskin/orgs", "repos_url": "https://api.github.com/users/jyasskin/repos", "events_url": "https://api.github.com/users/jyasskin/events{/privacy}", "received_events_url": "https://api.github.com/users/jyasskin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f22cfb2e4ef3c8749a4814ebd5d0b39173b05b18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f22cfb2e4ef3c8749a4814ebd5d0b39173b05b18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f22cfb2e4ef3c8749a4814ebd5d0b39173b05b18"}], "stats": {"total": 34, "additions": 24, "deletions": 10}, "files": [{"sha": "653a0ab4d49fd51c261c352a60001f625fb21cbf", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ce77c22f1bf5674d60710fba3cf8c43d502db01b", "patch": "@@ -1,3 +1,8 @@\n+2011-07-27  Jeffrey Yasskin  <jyasskin@google.com>\n+\n+\t* pt.c (build_template_decl): Copy the function_decl's\n+\tsource location to the new template_decl.\n+\n 2011-07-26  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/49776"}, {"sha": "b9e09af7e2638c3be18be206c66b60d9bdea3dc5", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=ce77c22f1bf5674d60710fba3cf8c43d502db01b", "patch": "@@ -4121,6 +4121,7 @@ build_template_decl (tree decl, tree parms, bool member_template_p)\n   tree tmpl = build_lang_decl (TEMPLATE_DECL, DECL_NAME (decl), NULL_TREE);\n   DECL_TEMPLATE_PARMS (tmpl) = parms;\n   DECL_CONTEXT (tmpl) = DECL_CONTEXT (decl);\n+  DECL_SOURCE_LOCATION (tmpl) = DECL_SOURCE_LOCATION (decl);\n   DECL_MEMBER_TEMPLATE_P (tmpl) = member_template_p;\n \n   return tmpl;"}, {"sha": "952c3ca1136e54353a1a00124ded37d776f96828", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ce77c22f1bf5674d60710fba3cf8c43d502db01b", "patch": "@@ -1,3 +1,7 @@\n+2011-07-27  Jeffrey Yasskin  <jyasskin@google.com>\n+\n+\t* g++.old-deja/g++.pt/crash60.C: Updated.\n+\n 2011-07-27  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/49866"}, {"sha": "1be4678e1f4cc75feebf9edec1dc0bc8db22e170", "filename": "gcc/testsuite/g++.old-deja/g++.pt/crash60.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash60.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce77c22f1bf5674d60710fba3cf8c43d502db01b/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash60.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash60.C?ref=ce77c22f1bf5674d60710fba3cf8c43d502db01b", "patch": "@@ -5,9 +5,9 @@\n // We ICE'd rather than fail to instantiate.\n \n template< typename SID, class SDR >\n-void k( SID sid, SDR* p,\n+void k( SID sid, SDR* p,\t// { dg-error \"no type named 'T'\" }\n  void (SDR::*)\n- ( typename SID::T ) );\t\t// { dg-error \"no type named 'T'\" }\n+ ( typename SID::T ) );\n \n struct E { };\n struct S { void f( int ); };"}, {"sha": "dd6723fb3f80cd901dc7be0f58f85c9da8c2ed8a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce77c22f1bf5674d60710fba3cf8c43d502db01b/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce77c22f1bf5674d60710fba3cf8c43d502db01b/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=ce77c22f1bf5674d60710fba3cf8c43d502db01b", "patch": "@@ -1,3 +1,7 @@\n+2011-07-27  Jeffrey Yasskin  <jyasskin@google.com>\n+\n+\t* testsuite/20_util/weak_ptr/comparison/cmp_neg.cc: Updated.\n+\n 2011-07-25  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/std/array (at): Remove constexpr when -fno-exceptions."}, {"sha": "6eecc2d2aeb72c5ff98204f949d2193bc8ca3a90", "filename": "libstdc++-v3/testsuite/20_util/weak_ptr/comparison/cmp_neg.cc", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce77c22f1bf5674d60710fba3cf8c43d502db01b/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fweak_ptr%2Fcomparison%2Fcmp_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce77c22f1bf5674d60710fba3cf8c43d502db01b/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fweak_ptr%2Fcomparison%2Fcmp_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fweak_ptr%2Fcomparison%2Fcmp_neg.cc?ref=ce77c22f1bf5674d60710fba3cf8c43d502db01b", "patch": "@@ -44,16 +44,16 @@ main()\n \n // { dg-warning \"note\" \"\" { target *-*-* } 370 }\n // { dg-warning \"note\" \"\" { target *-*-* } 365 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 357 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 356 }\n // { dg-warning \"note\" \"\" { target *-*-* } 1103 }\n // { dg-warning \"note\" \"\" { target *-*-* } 1098 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 1090 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 1089 }\n // { dg-warning \"note\" \"\" { target *-*-* } 485 }\n // { dg-warning \"note\" \"\" { target *-*-* } 479 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 469 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 814 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 1056 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 1050 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 342 }\n-// { dg-warning \"note\" \"\" { target *-*-* } 292 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 468 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 813 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 1055 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 1049 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 341 }\n+// { dg-warning \"note\" \"\" { target *-*-* } 291 }\n // { dg-warning \"note\" \"\" { target *-*-* } 224 }"}]}