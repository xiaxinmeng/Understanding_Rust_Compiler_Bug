{"sha": "66c432a7eed45367b05c3982ded2bbd15dcaf0d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjZjNDMyYTdlZWQ0NTM2N2IwNWMzOTgyZGVkMmJiZDE1ZGNhZjBkNQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-03-02T18:10:41Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-03-02T18:10:41Z"}, "message": "(output_function_prologue): Use m68k svr4 PIC format to load the address of...\n\n(output_function_prologue): Use m68k svr4 PIC format to\nload the address of _GLOBAL_OFFSET_TABLE_ into PIC_OFFSET_TABLE_REG\nin function prologue when doing PIC.\n\n(print_operand_address): Always add \"@GOT\" suffix for the\nglobal object operand when doing PIC.\n\nFrom-SVN: r3595", "tree": {"sha": "993836c3443e07de1f50d05e90f891a86bcd1d74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/993836c3443e07de1f50d05e90f891a86bcd1d74"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66c432a7eed45367b05c3982ded2bbd15dcaf0d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66c432a7eed45367b05c3982ded2bbd15dcaf0d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66c432a7eed45367b05c3982ded2bbd15dcaf0d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66c432a7eed45367b05c3982ded2bbd15dcaf0d5/comments", "author": null, "committer": null, "parents": [{"sha": "2b362d2c866f4e3f70a66b2293b340e4ad406877", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b362d2c866f4e3f70a66b2293b340e4ad406877", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b362d2c866f4e3f70a66b2293b340e4ad406877"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "a5d210cd4934a153d890f4567c36c451bb54f275", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66c432a7eed45367b05c3982ded2bbd15dcaf0d5/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66c432a7eed45367b05c3982ded2bbd15dcaf0d5/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=66c432a7eed45367b05c3982ded2bbd15dcaf0d5", "patch": "@@ -216,10 +216,7 @@ output_function_prologue (stream, size)\n   if (flag_pic && current_function_uses_pic_offset_table)\n     {\n #ifdef MOTOROLA\n-      asm_fprintf (stream, \"\\t%Omove.l %0I__GLOBAL_OFFSET_TABLE_, %s\\n\",\n-\t\t   reg_names[PIC_OFFSET_TABLE_REGNUM]);\n-      asm_fprintf (stream, \"\\tlea.l (%Rpc,%s.l),%s\\n\",\n-\t\t   reg_names[PIC_OFFSET_TABLE_REGNUM],\n+      asm_fprintf (stream, \"\\t%Olea (%Rpc, %U_GLOBAL_OFFSET_TABLE_@GOTPC), %s\\n\",\n \t\t   reg_names[PIC_OFFSET_TABLE_REGNUM]);\n #else\n       asm_fprintf (stream, \"\\tmovel %0I__GLOBAL_OFFSET_TABLE_, %s\\n\",\n@@ -1873,10 +1870,8 @@ print_operand_address (file, addr)\n \t    if (addr != 0)\n \t      {\n \t\toutput_addr_const (file, addr);\n-\t        if ((flag_pic == 1) && (breg == pic_offset_table_rtx))\n-\t          fprintf (file, \".w\");\n-\t        if ((flag_pic == 2) && (breg == pic_offset_table_rtx))\n-\t          fprintf (file, \".l\");\n+\t        if (flag_pic && (breg == pic_offset_table_rtx))\n+\t          fprintf (file, \"@GOT\");\n \t      }\n \t    fprintf (file, \"(%s\", reg_names[REGNO (breg)]);\n \t    if (ireg != 0)"}]}