{"sha": "41ec61d3ef99e27e1d2584836ce8c6483c628689", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDFlYzYxZDNlZjk5ZTI3ZTFkMjU4NDgzNmNlOGM2NDgzYzYyODY4OQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2016-03-30T12:38:36Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2016-03-30T12:38:36Z"}, "message": "Properly check conflict between DRAP register and __builtin_eh_return\n\nSince %ecx can't be used for both DRAP register and __builtin_eh_return,\nwe need to check if crtl->drap_reg uses %ecx before using %ecx for\n__builtin_eh_return.\n\n\tPR target/70439\n\t* config/i386/i386.c (ix86_expand_epilogue): Properly check\n\tconflict between DRAP register and __builtin_eh_return.\n\nFrom-SVN: r234559", "tree": {"sha": "5d8238b92b23513b70abcdb0a8fbab5089543d85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5d8238b92b23513b70abcdb0a8fbab5089543d85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/41ec61d3ef99e27e1d2584836ce8c6483c628689", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41ec61d3ef99e27e1d2584836ce8c6483c628689", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41ec61d3ef99e27e1d2584836ce8c6483c628689", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41ec61d3ef99e27e1d2584836ce8c6483c628689/comments", "author": null, "committer": null, "parents": [{"sha": "a5463d23252d2e2532f2499381a9bdfbce39abd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5463d23252d2e2532f2499381a9bdfbce39abd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5463d23252d2e2532f2499381a9bdfbce39abd4"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "f700a25e1c0f551db6f13319ec85244d24e2a714", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41ec61d3ef99e27e1d2584836ce8c6483c628689/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41ec61d3ef99e27e1d2584836ce8c6483c628689/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=41ec61d3ef99e27e1d2584836ce8c6483c628689", "patch": "@@ -13463,9 +13463,11 @@ ix86_expand_epilogue (int style)\n \t  rtx sa = EH_RETURN_STACKADJ_RTX;\n \t  rtx_insn *insn;\n \n-\t  /* Stack align doesn't work with eh_return.  */\n-\t  gcc_assert (!stack_realign_drap);\n-\t  /* Neither does regparm nested functions.  */\n+\t  /* %ecx can't be used for both DRAP register and eh_return.  */\n+\t  if (crtl->drap_reg)\n+\t    gcc_assert (REGNO (crtl->drap_reg) != CX_REG);\n+\n+\t  /* regparm nested functions don't work with eh_return.  */\n \t  gcc_assert (!ix86_static_chain_on_stack);\n \n \t  if (frame_pointer_needed)"}]}