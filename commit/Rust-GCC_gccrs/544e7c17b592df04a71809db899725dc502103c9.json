{"sha": "544e7c17b592df04a71809db899725dc502103c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ0ZTdjMTdiNTkyZGYwNGE3MTgwOWRiODk5NzI1ZGM1MDIxMDNjOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-05T14:18:54Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-05T14:18:54Z"}, "message": "[multiple changes]\n\n2011-09-05  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* s-finmas.adb (Set_Finalize_Address (Address,\n\tFinalize_Address_Ptr)): Renamed to Set_Heterogeneous_Finalize_Address.\n\t(Set_Finalize_Address (in out Finalization_Master,\n\tFinalize_Address_Ptr): Add synchronization code.\n\t* s-finmas.ads (Set_Finalize_Address (Address,\n\tFinalize_Address_Ptr)): Renamed to Set_Heterogeneous_Finalize_Address.\n\t* s-stposu.adb (Allocate_Any_Controlled): Update the call to\n\tSet_Finalize_Address for the heterogeneous case.\n\n2011-09-05  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch3.adb: Undo previous change, not suitable after all.\n\n2011-09-05  Robert Dewar  <dewar@adacore.com>\n\n\t* einfo.ads: Minor comment clarification.\n\nFrom-SVN: r178550", "tree": {"sha": "f3011102073b1225ca7b45b4eb2636bba562246c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f3011102073b1225ca7b45b4eb2636bba562246c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/544e7c17b592df04a71809db899725dc502103c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544e7c17b592df04a71809db899725dc502103c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/544e7c17b592df04a71809db899725dc502103c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544e7c17b592df04a71809db899725dc502103c9/comments", "author": null, "committer": null, "parents": [{"sha": "0613fb3358d0a523ed8148c589852c28b4aa1eb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0613fb3358d0a523ed8148c589852c28b4aa1eb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0613fb3358d0a523ed8148c589852c28b4aa1eb9"}], "stats": {"total": 45, "additions": 31, "deletions": 14}, "files": [{"sha": "b4ddbf396347e6cedad3898a3a5dcf2e5445dd2d", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=544e7c17b592df04a71809db899725dc502103c9", "patch": "@@ -1,3 +1,22 @@\n+2011-09-05  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* s-finmas.adb (Set_Finalize_Address (Address,\n+\tFinalize_Address_Ptr)): Renamed to Set_Heterogeneous_Finalize_Address.\n+\t(Set_Finalize_Address (in out Finalization_Master,\n+\tFinalize_Address_Ptr): Add synchronization code.\n+\t* s-finmas.ads (Set_Finalize_Address (Address,\n+\tFinalize_Address_Ptr)): Renamed to Set_Heterogeneous_Finalize_Address.\n+\t* s-stposu.adb (Allocate_Any_Controlled): Update the call to\n+\tSet_Finalize_Address for the heterogeneous case.\n+\n+2011-09-05  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch3.adb: Undo previous change, not suitable after all.\n+\n+2011-09-05  Robert Dewar  <dewar@adacore.com>\n+\n+\t* einfo.ads: Minor comment clarification.\n+\n 2011-09-05  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* exp_ch6.adb (Move_Activation_Chain): Rewritten. The routine"}, {"sha": "c2657dc32643bf901283f27701791b6b47f28d4b", "filename": "gcc/ada/einfo.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Feinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Feinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.ads?ref=544e7c17b592df04a71809db899725dc502103c9", "patch": "@@ -391,7 +391,7 @@ package Einfo is\n --       that holds value of the Aft attribute for the type.\n \n --    Alias (Node18)\n---       Present in overloaded entities (literals, subprograms, entries) and\n+--       Present in overloadable entities (literals, subprograms, entries) and\n --       subprograms that cover a primitive operation of an abstract interface\n --       (that is, subprograms with the Interface_Alias attribute). In case of\n --       overloaded entities it points to the parent subprogram of a derived"}, {"sha": "cfeb816a374430711bedb246e93ac5bd7544d41d", "filename": "gcc/ada/s-finmas.adb", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fs-finmas.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fs-finmas.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-finmas.adb?ref=544e7c17b592df04a71809db899725dc502103c9", "patch": "@@ -463,22 +463,24 @@ package body System.Finalization_Masters is\n       Fin_Addr_Ptr : Finalize_Address_Ptr)\n    is\n    begin\n+      Lock_Task.all;\n       Master.Finalize_Address := Fin_Addr_Ptr;\n+      Unlock_Task.all;\n    end Set_Finalize_Address;\n \n-   --------------------------\n-   -- Set_Finalize_Address --\n-   --------------------------\n+   ----------------------------------------\n+   -- Set_Heterogeneous_Finalize_Address --\n+   ----------------------------------------\n \n-   procedure Set_Finalize_Address\n+   procedure Set_Heterogeneous_Finalize_Address\n      (Obj          : System.Address;\n       Fin_Addr_Ptr : Finalize_Address_Ptr)\n    is\n    begin\n       Lock_Task.all;\n       Finalize_Address_Table.Set (Obj, Fin_Addr_Ptr);\n       Unlock_Task.all;\n-   end Set_Finalize_Address;\n+   end Set_Heterogeneous_Finalize_Address;\n \n    --------------------------\n    -- Set_Is_Heterogeneous --"}, {"sha": "fc4d143b00eaf0c1d8b237aeae1b88bdc91d2fae", "filename": "gcc/ada/s-finmas.ads", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fs-finmas.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fs-finmas.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-finmas.ads?ref=544e7c17b592df04a71809db899725dc502103c9", "patch": "@@ -119,10 +119,9 @@ package System.Finalization_Masters is\n    procedure Set_Finalize_Address\n      (Master       : in out Finalization_Master;\n       Fin_Addr_Ptr : Finalize_Address_Ptr);\n-   --  Set the clean up routine of a finalization master. Note: this routine\n-   --  must precede the one below since RTSfind needs to match this one.\n+   --  Set the clean up routine of a finalization master\n \n-   procedure Set_Finalize_Address\n+   procedure Set_Heterogeneous_Finalize_Address\n      (Obj          : System.Address;\n       Fin_Addr_Ptr : Finalize_Address_Ptr);\n    --  Add a relation pair object - Finalize_Address to the internal hash table"}, {"sha": "4fbacfac3b3ee8a79f7a994a366adfcfb0053a5c", "filename": "gcc/ada/s-stposu.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fs-stposu.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fs-stposu.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-stposu.adb?ref=544e7c17b592df04a71809db899725dc502103c9", "patch": "@@ -286,7 +286,7 @@ package body System.Storage_Pools.Subpools is\n          --    2) Certain cases of anonymous access types usage\n \n          else\n-            Set_Finalize_Address (Addr, Fin_Address);\n+            Set_Heterogeneous_Finalize_Address (Addr, Fin_Address);\n             Finalize_Address_Table_In_Use := True;\n          end if;\n "}, {"sha": "8802ae52077b9b745efc0914c1ec0b1135ca8282", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7c17b592df04a71809db899725dc502103c9/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=544e7c17b592df04a71809db899725dc502103c9", "patch": "@@ -17052,16 +17052,13 @@ package body Sem_Ch3 is\n \n          --  The Base_Type is already completed, we can complete the subtype\n          --  now. We have to create a new entity with the same name, Thus we\n-         --  can't use Create_Itype. The entity may be exchanged when entering\n-         --  exiting a package body, so it has to have a proper parent field,\n-         --  so that the tree is always properly formatted for ASIS.\n+         --  can't use Create_Itype.\n \n          --  This is messy, should be fixed ???\n \n          Full := Make_Defining_Identifier (Sloc (Id), Chars (Id));\n          Set_Is_Itype (Full);\n          Set_Associated_Node_For_Itype (Full, Related_Nod);\n-         Set_Parent (Full, Parent (Id));\n          Complete_Private_Subtype (Id, Full, Full_B, Related_Nod);\n       end if;\n "}]}