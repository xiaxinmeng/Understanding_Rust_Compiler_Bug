{"sha": "97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTdiNmQ1NWIxYjZkNDM1NjQ2MmJjYmE0YTRmZjc2YzNjY2Y3ODcyYw==", "commit": {"author": {"name": "Matt Austern", "email": "austern@apple.com", "date": "2004-03-08T19:03:10Z"}, "committer": {"name": "Matt Austern", "email": "austern@gcc.gnu.org", "date": "2004-03-08T19:03:10Z"}, "message": "re PR debug/14079 (wrong debug info for extern boolean variable in debug mode)\n\nPR debug/14079\n* name-lookup.c (add_decl_to_level): Add extern variables, as well as static, to static_decls array.\n\nFrom-SVN: r79122", "tree": {"sha": "dd8318bc04cd1a6e99fb8047b989acc23ac7c29b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd8318bc04cd1a6e99fb8047b989acc23ac7c29b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c/comments", "author": null, "committer": null, "parents": [{"sha": "23bd99da2c830a41179bf06fbf1c3b1053f7d4f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23bd99da2c830a41179bf06fbf1c3b1053f7d4f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23bd99da2c830a41179bf06fbf1c3b1053f7d4f1"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "70f15ffd29897625a05577854f2afd936e5aaac7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c", "patch": "@@ -1,3 +1,9 @@\n+2004-03-08  Matt Austern  <austern@apple.com>\n+\n+\tPR debug/14079\n+\t* name-lookup.c (add_decl_to_level): Add extern variables, as well\n+\tas static, to static_decls array.\n+\t\n 2004-03-05  Jason Merrill  <jason@redhat.com>\n \n \t* tree.c (list_hash_pieces): s/TYPE_HASH/TREE_HASH/."}, {"sha": "1da453a016dbf747da9274b025027a7d3a2e1531", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=97b6d55b1b6d4356462bcba4a4ff76c3ccf7872c", "patch": "@@ -526,9 +526,13 @@ add_decl_to_level (tree decl, cxx_scope *b)\n       b->names = decl;\n       b->names_size++;\n \n-      /* If appropriate, add decl to separate list of statics.  */\n+      /* If appropriate, add decl to separate list of statics.  We\n+\t include extern variables because they might turn out to be \n+\t static later.  It's OK for this list to contain a few false\n+\t positives. */\n       if (b->kind == sk_namespace)\n-\tif ((TREE_CODE (decl) == VAR_DECL && TREE_STATIC (decl))\n+\tif ((TREE_CODE (decl) == VAR_DECL\n+\t     && (TREE_STATIC (decl) || DECL_EXTERNAL (decl)))\n \t    || (TREE_CODE (decl) == FUNCTION_DECL\n \t\t&& (!TREE_PUBLIC (decl) || DECL_DECLARED_INLINE_P (decl))))\n \t  VARRAY_PUSH_TREE (b->static_decls, decl);"}]}