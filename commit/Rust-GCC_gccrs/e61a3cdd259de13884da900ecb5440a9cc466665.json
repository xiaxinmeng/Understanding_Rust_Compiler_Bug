{"sha": "e61a3cdd259de13884da900ecb5440a9cc466665", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTYxYTNjZGQyNTlkZTEzODg0ZGE5MDBlY2I1NDQwYTljYzQ2NjY2NQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2017-06-16T21:06:07Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2017-06-16T21:06:07Z"}, "message": "[arm] Rework multlib builds for symbianelf\n\n\nSymbianelf used to build multilib for armv5t with softfp, but that\narchitecture doesn't really support floating point instructions.  This\npatch reworks the multilib configuration to use armv5te as the base\nwhen building for floating point.\n\nI'm not sure just how useful the symbian port is these days, so this\nhas only been very lightly tested (checks that libgcc builds for all\nmultilib variants).  Perhaps we should consider deprecating this\nconfig?\n\n\t* config/arm/t-symbian: Rewrite for new option infrastructure.\n\nFrom-SVN: r249304", "tree": {"sha": "8a5b75877fe8f2163e010484450432659ccba2f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a5b75877fe8f2163e010484450432659ccba2f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e61a3cdd259de13884da900ecb5440a9cc466665", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e61a3cdd259de13884da900ecb5440a9cc466665", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e61a3cdd259de13884da900ecb5440a9cc466665", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e61a3cdd259de13884da900ecb5440a9cc466665/comments", "author": null, "committer": null, "parents": [{"sha": "99d6bcf7ae8980e04dabe8b86df9c70ad04dc5ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99d6bcf7ae8980e04dabe8b86df9c70ad04dc5ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99d6bcf7ae8980e04dabe8b86df9c70ad04dc5ba"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "6f73286654a9aeb8cf0854cbc26c3d60d7f88ab4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e61a3cdd259de13884da900ecb5440a9cc466665/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e61a3cdd259de13884da900ecb5440a9cc466665/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e61a3cdd259de13884da900ecb5440a9cc466665", "patch": "@@ -1,3 +1,7 @@\n+2017-06-16  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* config/arm/t-symbian: Rewrite for new option infrastructure.\n+\n 2017-06-16  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* config/arm/t-phoenix (MULTILIB_REUSE): Clear variable."}, {"sha": "003651ebfe142739624a7d84fc9bf05c27861ed3", "filename": "gcc/config/arm/t-symbian", "status": "modified", "additions": 32, "deletions": 2, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e61a3cdd259de13884da900ecb5440a9cc466665/gcc%2Fconfig%2Farm%2Ft-symbian", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e61a3cdd259de13884da900ecb5440a9cc466665/gcc%2Fconfig%2Farm%2Ft-symbian", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ft-symbian?ref=e61a3cdd259de13884da900ecb5440a9cc466665", "patch": "@@ -22,5 +22,35 @@ EXTRA_HEADERS += $(srcdir)/ginclude/unwind-arm-common.h\n # multilib for those without -- using the soft-float ABI in both\n # cases.  Symbian OS object should be compiled with interworking\n # enabled, so there are no separate thumb-mode libraries.\n-MULTILIB_OPTIONS     = mfloat-abi=softfp\n-MULTILIB_DIRNAMES    = softfp\n+\n+# Reset all the multilib variables.\n+MULTILIB_OPTIONS\t=\n+MULTILIB_DIRNAMES\t=\n+MULTILIB_EXCEPTIONS\t=\n+MULTILIB_REUSE\t\t=\n+MULTILIB_MATCHES\t=\n+MULTILIB_REQUIRED\t=\n+\n+MULTILIB_OPTIONS\t+= march=armv5te+fp\n+MULTILIB_DIRNAMES\t+= v5te\n+\n+MULTILIB_OPTIONS\t+= mfloat-abi=softfp\n+MULTILIB_DIRNAMES\t+= softfp\n+\n+MULTLILIB_REQUIRED\t+= march=armv5te+fp/mfloat-abi=softfp\n+\n+MULTILIB_MATCHES\t+= $(foreach ARCH, $(all_early_arch), \\\n+\t\t\t     march?armv5te+fp=march?$(ARCH)+fp)\n+\n+MULTILIB_MATCHES\t+= $(foreach FPARCH, $(v7a_fps), \\\n+\t\t             march?armv5te+fp=march?armv7-a+$(FPARCH))\n+\n+MULTILIB_MATCHES\t+= $(foreach FPARCH, $(v7ve_fps), \\\n+\t\t             march?armv5te+fp=march?armv7ve+$(FPARCH))\n+\n+MULTILIB_MATCHES\t+= $(foreach ARCH, $(all_v7_a_r), \\\n+\t\t\t     march?armv5te+fp=march?$(ARCH)+fp)\n+\n+MULTILIB_MATCHES\t+= $(foreach ARCH, $(all_v8_archs), \\\n+\t\t\t     $(foreach FPARCH, $(v8_fps), \\\n+\t\t\t       march?armv5te+fp=march?$(ARCH)+$(FPARCH)))"}]}