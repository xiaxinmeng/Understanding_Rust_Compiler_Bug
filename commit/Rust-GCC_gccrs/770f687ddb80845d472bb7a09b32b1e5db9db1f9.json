{"sha": "770f687ddb80845d472bb7a09b32b1e5db9db1f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcwZjY4N2RkYjgwODQ1ZDQ3MmJiN2EwOWIzMmIxZTVkYjlkYjFmOQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2014-07-25T15:02:17Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2014-07-25T15:02:17Z"}, "message": "libgcov-driver.c (set_gcov_dump_complete, [...]): Remove global functions polluting user's namespace.\n\n\t* libgcov-driver.c (set_gcov_dump_complete,\n\treset_gcov_dump_complete, get_gcov_dump_complete): Remove global\n\tfunctions polluting user's namespace.\n\t(gcov_exit): Set variable directly.\n\t(gcov_clear): Reset variable directly.\n\t* libgcov-interface.c (get_gcov_dymp_complete,\n\treset_gov_dump_complete): Remove declarations.\n\t(__gcov_reset, __gcov_dump): Don't call them.\n\nFrom-SVN: r213058", "tree": {"sha": "4fadbd1c386c2a51b3ad02dbc7c0627bd7c874da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4fadbd1c386c2a51b3ad02dbc7c0627bd7c874da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/770f687ddb80845d472bb7a09b32b1e5db9db1f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770f687ddb80845d472bb7a09b32b1e5db9db1f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/770f687ddb80845d472bb7a09b32b1e5db9db1f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770f687ddb80845d472bb7a09b32b1e5db9db1f9/comments", "author": null, "committer": null, "parents": [{"sha": "e8326772b37d81b232634e2ec43da4f4f4ea5567", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8326772b37d81b232634e2ec43da4f4f4ea5567", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8326772b37d81b232634e2ec43da4f4f4ea5567"}], "stats": {"total": 56, "additions": 18, "deletions": 38}, "files": [{"sha": "3878903c6633d12711392671ccf637d25338e1ca", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770f687ddb80845d472bb7a09b32b1e5db9db1f9/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770f687ddb80845d472bb7a09b32b1e5db9db1f9/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=770f687ddb80845d472bb7a09b32b1e5db9db1f9", "patch": "@@ -1,8 +1,21 @@\n+2014-07-25  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* libgcov-driver.c (set_gcov_dump_complete,\n+\treset_gcov_dump_complete, get_gcov_dump_complete): Remove global\n+\tfunctions polluting user's namespace.\n+\t(gcov_exit): Set variable directly.\n+\t(gcov_clear): Reset variable directly.\n+\t* libgcov-interface.c (get_gcov_dymp_complete,\n+\treset_gov_dump_complete): Remove declarations.\n+\t(__gcov_reset, __gcov_dump): Don't call them.\n+\n 2014-07-24  DJ Delorie  <dj@redhat.com>\n \n \t* config/i386/cygming-crtbegin.c (deregister_frame_fn): Newly public.\n-\t(__gcc_deregister_frame): Move logic to detect deregister function to...\n-\t(__gcc_register_frame): here, so it's consistent with the register logic.\n+\t(__gcc_deregister_frame): Move logic to detect deregister function\n+\tto ...\n+\t(__gcc_register_frame): here, so it's consistent with the register\n+\tlogic.\n \n 2014-07-23  Nathan Sidwell  <nathan@acm.org>\n "}, {"sha": "f47f2b85e6a62770272604c4aecb054b8cbc30e3", "filename": "libgcc/libgcov-driver.c", "status": "modified", "additions": 3, "deletions": 29, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770f687ddb80845d472bb7a09b32b1e5db9db1f9/libgcc%2Flibgcov-driver.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770f687ddb80845d472bb7a09b32b1e5db9db1f9/libgcc%2Flibgcov-driver.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-driver.c?ref=770f687ddb80845d472bb7a09b32b1e5db9db1f9", "patch": "@@ -51,9 +51,6 @@ static int gcov_error (const char *, ...);\n /* The following functions can be called from outside of this file.  */\n extern void gcov_clear (void) ATTRIBUTE_HIDDEN;\n extern void gcov_exit (void) ATTRIBUTE_HIDDEN;\n-extern void set_gcov_dump_complete (void) ATTRIBUTE_HIDDEN;\n-extern void reset_gcov_dump_complete (void) ATTRIBUTE_HIDDEN;\n-extern int get_gcov_dump_complete (void) ATTRIBUTE_HIDDEN;\n \n struct gcov_fn_buffer\n {\n@@ -86,32 +83,6 @@ size_t gcov_max_filename = 0;\n /* Flag when the profile has already been dumped via __gcov_dump().  */\n static int gcov_dump_complete;\n \n-/* A global function that get the vaule of gcov_dump_complete.  */\n-\n-int\n-get_gcov_dump_complete (void)\n-{\n-  return gcov_dump_complete;\n-}\n-\n-/* A global functino that set the vaule of gcov_dump_complete. Will\n-   be used in __gcov_dump() in libgcov-interface.c.  */\n-\n-void\n-set_gcov_dump_complete (void)\n-{\n-  gcov_dump_complete = 1;\n-}\n-\n-/* A global functino that set the vaule of gcov_dump_complete. Will\n-   be used in __gcov_reset() in libgcov-interface.c.  */\n-\n-void\n-reset_gcov_dump_complete (void)\n-{\n-  gcov_dump_complete = 0;\n-}\n-\n static struct gcov_fn_buffer *\n free_fn_data (const struct gcov_info *gi_ptr, struct gcov_fn_buffer *buffer,\n               unsigned limit)\n@@ -795,6 +766,8 @@ gcov_exit (void)\n   if (gcov_dump_complete)\n     return;\n \n+  gcov_dump_complete = 1;\n+  \n   crc32 = gcov_exit_compute_summary (&this_prg);\n \n   allocate_filename_struct (&gf);\n@@ -818,6 +791,7 @@ gcov_clear (void)\n {\n   const struct gcov_info *gi_ptr;\n \n+  gcov_dump_complete = 0;\n   for (gi_ptr = gcov_list; gi_ptr; gi_ptr = gi_ptr->next)\n     {\n       unsigned f_ix;"}, {"sha": "a1a91f2567c2c26d4c97e4c16f6337227b8f3c76", "filename": "libgcc/libgcov-interface.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770f687ddb80845d472bb7a09b32b1e5db9db1f9/libgcc%2Flibgcov-interface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770f687ddb80845d472bb7a09b32b1e5db9db1f9/libgcc%2Flibgcov-interface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-interface.c?ref=770f687ddb80845d472bb7a09b32b1e5db9db1f9", "patch": "@@ -44,8 +44,6 @@ void __gcov_dump (void) {}\n \n extern void gcov_clear (void) ATTRIBUTE_HIDDEN;\n extern void gcov_exit (void) ATTRIBUTE_HIDDEN;\n-extern void set_gcov_dump_complete (void) ATTRIBUTE_HIDDEN;\n-extern void reset_gcov_dump_complete (void) ATTRIBUTE_HIDDEN;\n \n #ifdef L_gcov_flush\n \n@@ -95,9 +93,6 @@ void\n __gcov_reset (void)\n {\n   gcov_clear ();\n-  /* Re-enable dumping to support collecting profile in multiple regions\n-     of interest.  */\n-  reset_gcov_dump_complete ();\n }\n \n #endif /* L_gcov_reset */\n@@ -111,8 +106,6 @@ void\n __gcov_dump (void)\n {\n   gcov_exit ();\n-  /* Prevent profile from being dumped a second time on application exit.  */\n-  set_gcov_dump_complete ();\n }\n \n #endif /* L_gcov_dump */"}]}