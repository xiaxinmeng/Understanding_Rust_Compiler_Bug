{"sha": "355866de6545110b8e3e02b6c47447d868235e66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzU1ODY2ZGU2NTQ1MTEwYjhlM2UwMmI2YzQ3NDQ3ZDg2ODIzNWU2Ng==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2005-09-01T08:54:40Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2005-09-01T08:54:40Z"}, "message": "re PR tree-optimization/15366 ([3.4 only][unit-at-a-time] -fno-inline-functions is ignored for static functions)\n\n2005-09-01  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/15366\n\t* common.opt: Add -finline-functions-called-once.\n\tPut -fearly-inlining in alphabetically ordered place.\n\t* doc/invoke.texi: Document new option.\n\t* ipa-inline.c (cgraph_decide_inlining): Honour\n\tflag_inline_functions_called_once.\n\nFrom-SVN: r103722", "tree": {"sha": "c2efaa501141cb154f0baf039de17b5444cf03a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2efaa501141cb154f0baf039de17b5444cf03a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/355866de6545110b8e3e02b6c47447d868235e66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/355866de6545110b8e3e02b6c47447d868235e66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/355866de6545110b8e3e02b6c47447d868235e66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/355866de6545110b8e3e02b6c47447d868235e66/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a1340af76f9d389c82a39326c619c859f634aa04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1340af76f9d389c82a39326c619c859f634aa04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1340af76f9d389c82a39326c619c859f634aa04"}], "stats": {"total": 37, "additions": 31, "deletions": 6}, "files": [{"sha": "62686b0d5e27efe901455d0a794988d5342a16aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/355866de6545110b8e3e02b6c47447d868235e66/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/355866de6545110b8e3e02b6c47447d868235e66/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=355866de6545110b8e3e02b6c47447d868235e66", "patch": "@@ -1,3 +1,12 @@\n+2005-09-01  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/15366\n+\t* common.opt: Add -finline-functions-called-once.\n+\tPut -fearly-inlining in alphabetically ordered place.\n+\t* doc/invoke.texi: Document new option.\n+\t* ipa-inline.c (cgraph_decide_inlining): Honour\n+\tflag_inline_functions_called_once.\n+\n 2005-09-01  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/23478"}, {"sha": "d7a7a2d67bedea25f59d3ea2d157a9764e257810", "filename": "gcc/common.opt", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/355866de6545110b8e3e02b6c47447d868235e66/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/355866de6545110b8e3e02b6c47447d868235e66/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=355866de6545110b8e3e02b6c47447d868235e66", "patch": "@@ -359,6 +359,10 @@ fdump-unnumbered\n Common Report Var(flag_dump_unnumbered) VarExists\n Suppress output of instruction numbers and line number notes in debugging dumps\n \n+fearly-inlining\n+Common Report Var(flag_early_inlining) Init(1)\n+Perform early inlining\n+\n feliminate-dwarf2-dups\n Common Report Var(flag_eliminate_dwarf2_dups)\n Perform DWARF2 duplicate elimination\n@@ -480,9 +484,9 @@ finline-functions\n Common Report Var(flag_inline_functions)\n Integrate simple functions into their callers\n \n-fearly-inlining\n-Common Report Var(flag_early_inlining) Init(1)\n-Perform early inlining\n+finline-functions-called-once\n+Common Report Var(flag_inline_functions_called_once) Init(1)\n+Integrate functions called once into their callers\n \n finline-limit-\n Common RejectNegative Joined UInteger"}, {"sha": "7328e9a0e6d86ae34a0d9b2c1e093a2feb44078e", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/355866de6545110b8e3e02b6c47447d868235e66/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/355866de6545110b8e3e02b6c47447d868235e66/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=355866de6545110b8e3e02b6c47447d868235e66", "patch": "@@ -306,7 +306,8 @@ Objective-C and Objective-C++ Dialects}.\n -fforce-addr  -ffunction-sections @gol\n -fgcse  -fgcse-lm  -fgcse-sm  -fgcse-las  -fgcse-after-reload @gol\n -floop-optimize -fcrossjumping  -fif-conversion  -fif-conversion2 @gol\n--finline-functions  -finline-limit=@var{n}  -fkeep-inline-functions @gol\n+-finline-functions  -finline-functions-called-once @gol\n+-finline-limit=@var{n}  -fkeep-inline-functions @gol\n -fkeep-static-consts  -fmerge-constants  -fmerge-all-constants @gol\n -fmodulo-sched -fno-branch-count-reg @gol\n -fno-default-inline  -fno-defer-pop -floop-optimize2 -fmove-loop-invariants @gol\n@@ -4480,6 +4481,15 @@ assembler code in its own right.\n \n Enabled at level @option{-O3}.\n \n+@item -finline-functions-called-once\n+@opindex finline-functions-called-once\n+Consider all @code{static} functions called once for inlining into their\n+caller even if they are not marked @code{inline}.  If a call to a given\n+function is integrated, then the function is not output as assembler code\n+in its own right.\n+\n+Enabled if @option{-funit-at-a-time} is enabled.\n+\n @item -fearly-inlining\n @opindex fearly-inlining\n Inline functions marked by @code{always_inline} and functions whose body seems"}, {"sha": "927813e2d7489f81548366e4a2483b2abf77f6ee", "filename": "gcc/ipa-inline.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/355866de6545110b8e3e02b6c47447d868235e66/gcc%2Fipa-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/355866de6545110b8e3e02b6c47447d868235e66/gcc%2Fipa-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline.c?ref=355866de6545110b8e3e02b6c47447d868235e66", "patch": "@@ -944,9 +944,11 @@ cgraph_decide_inlining (void)\n     }\n \n   if (!flag_really_no_inline)\n-    {\n-      cgraph_decide_inlining_of_small_functions ();\n+    cgraph_decide_inlining_of_small_functions ();\n \n+  if (!flag_really_no_inline\n+      && flag_inline_functions_called_once)\n+    {\n       if (dump_file)\n \tfprintf (dump_file, \"\\nDeciding on functions called once:\\n\");\n "}]}