{"sha": "811e4f15d616e4501d5beff25075bfea57a2f1aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODExZTRmMTVkNjE2ZTQ1MDFkNWJlZmYyNTA3NWJmZWE1N2EyZjFhYQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2014-09-06T08:08:36Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2014-09-06T08:08:36Z"}, "message": "Fix IRA_HARD_REGNO_ADD_COST_MULTIPLIER in ira_tune_allocno_costs\n\n2014-09-06  Tom de Vries  <tom@codesourcery.com>\n\n\t* ira-costs.c (ira_tune_allocno_costs): Don't conditionalize\n\tIRA_HARD_REGNO_ADD_COST_MULTIPLIER code on\n\tALLOCNO_CROSSED_CALLS_CLOBBERED_REGS.\n\nFrom-SVN: r214988", "tree": {"sha": "be8aa4847fbb06e39c4310cac65cf8624dcac97d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be8aa4847fbb06e39c4310cac65cf8624dcac97d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/811e4f15d616e4501d5beff25075bfea57a2f1aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/811e4f15d616e4501d5beff25075bfea57a2f1aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/811e4f15d616e4501d5beff25075bfea57a2f1aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/811e4f15d616e4501d5beff25075bfea57a2f1aa/comments", "author": null, "committer": null, "parents": [{"sha": "da27f5567c0dd3fccf035e14bb7010a0538648e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da27f5567c0dd3fccf035e14bb7010a0538648e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da27f5567c0dd3fccf035e14bb7010a0538648e4"}], "stats": {"total": 28, "additions": 16, "deletions": 12}, "files": [{"sha": "97408f1ee11b34dd0f06f4d554e45bdff9a956d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/811e4f15d616e4501d5beff25075bfea57a2f1aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/811e4f15d616e4501d5beff25075bfea57a2f1aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=811e4f15d616e4501d5beff25075bfea57a2f1aa", "patch": "@@ -1,3 +1,9 @@\n+2014-09-06  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* ira-costs.c (ira_tune_allocno_costs): Don't conditionalize\n+\tIRA_HARD_REGNO_ADD_COST_MULTIPLIER code on\n+\tALLOCNO_CROSSED_CALLS_CLOBBERED_REGS.\n+\n 2014-09-05  Dominique Dhumieres  <dominiq@lps.ens.fr>\n \n \tPR target/63188"}, {"sha": "57239f5b19b28cb8f70067ef58dd871616f771c3", "filename": "gcc/ira-costs.c", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/811e4f15d616e4501d5beff25075bfea57a2f1aa/gcc%2Fira-costs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/811e4f15d616e4501d5beff25075bfea57a2f1aa/gcc%2Fira-costs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-costs.c?ref=811e4f15d616e4501d5beff25075bfea57a2f1aa", "patch": "@@ -2217,21 +2217,19 @@ ira_tune_allocno_costs (void)\n \t      crossed_calls_clobber_regs\n \t\t= &(ALLOCNO_CROSSED_CALLS_CLOBBERED_REGS (a));\n \t      if (ira_hard_reg_set_intersection_p (regno, mode,\n-\t\t\t\t\t\t   *crossed_calls_clobber_regs))\n-\t\t{\n-\t\t  if (ira_hard_reg_set_intersection_p (regno, mode,\n+\t\t\t\t\t\t   *crossed_calls_clobber_regs)\n+\t\t  && (ira_hard_reg_set_intersection_p (regno, mode,\n \t\t\t\t\t\t       call_used_reg_set)\n-\t\t      || HARD_REGNO_CALL_PART_CLOBBERED (regno, mode))\n-\t\t    cost += (ALLOCNO_CALL_FREQ (a)\n-\t\t\t     * (ira_memory_move_cost[mode][rclass][0]\n-\t\t\t\t+ ira_memory_move_cost[mode][rclass][1]));\n+\t\t      || HARD_REGNO_CALL_PART_CLOBBERED (regno, mode)))\n+\t\tcost += (ALLOCNO_CALL_FREQ (a)\n+\t\t\t * (ira_memory_move_cost[mode][rclass][0]\n+\t\t\t    + ira_memory_move_cost[mode][rclass][1]));\n #ifdef IRA_HARD_REGNO_ADD_COST_MULTIPLIER\n-\t\t  cost += ((ira_memory_move_cost[mode][rclass][0]\n-\t\t\t    + ira_memory_move_cost[mode][rclass][1])\n-\t\t\t   * ALLOCNO_FREQ (a)\n-\t\t\t   * IRA_HARD_REGNO_ADD_COST_MULTIPLIER (regno) / 2);\n+\t      cost += ((ira_memory_move_cost[mode][rclass][0]\n+\t\t\t+ ira_memory_move_cost[mode][rclass][1])\n+\t\t       * ALLOCNO_FREQ (a)\n+\t\t       * IRA_HARD_REGNO_ADD_COST_MULTIPLIER (regno) / 2);\n #endif\n-\t\t}\n \t      if (INT_MAX - cost < reg_costs[j])\n \t\treg_costs[j] = INT_MAX;\n \t      else"}]}