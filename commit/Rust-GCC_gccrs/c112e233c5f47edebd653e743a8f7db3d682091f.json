{"sha": "c112e233c5f47edebd653e743a8f7db3d682091f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzExMmUyMzNjNWY0N2VkZWJkNjUzZTc0M2E4ZjdkYjNkNjgyMDkxZg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-01-30T20:27:57Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-01-30T20:27:57Z"}, "message": "alpha.c (alpha_expand_epilogue): Don't emit the return insn.\n\n        * alpha.c (alpha_expand_epilogue): Don't emit the return insn.\n        * alpha.h (EPILOGUE_USES): New.  Mark $26 live.\n        * alpha.md (return): Turn into an expander.\n        (return_internal): Don't use $26.\n        (epilogue): Emit the return insn.\n\nFrom-SVN: r31702", "tree": {"sha": "c2542d820daff8a5a2c194680c8513ce6d319c79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2542d820daff8a5a2c194680c8513ce6d319c79"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c112e233c5f47edebd653e743a8f7db3d682091f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c112e233c5f47edebd653e743a8f7db3d682091f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c112e233c5f47edebd653e743a8f7db3d682091f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c112e233c5f47edebd653e743a8f7db3d682091f/comments", "author": null, "committer": null, "parents": [{"sha": "51ec054c3aa3fa4db27a2d939f9ebe686bfaa247", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51ec054c3aa3fa4db27a2d939f9ebe686bfaa247", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51ec054c3aa3fa4db27a2d939f9ebe686bfaa247"}], "stats": {"total": 31, "additions": 18, "deletions": 13}, "files": [{"sha": "07875c83f02a116eed3e0b5739617407fccbd32a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c112e233c5f47edebd653e743a8f7db3d682091f", "patch": "@@ -1,3 +1,11 @@\n+2000-01-30  Richard Henderson  <rth@cygnus.com>\n+\n+\t* alpha.c (alpha_expand_epilogue): Don't emit the return insn.\n+\t* alpha.h (EPILOGUE_USES): New.  Mark $26 live.\n+\t* alpha.md (return): Turn into an expander.\n+\t(return_internal): Don't use $26.\n+\t(epilogue): Emit the return insn.\n+\n 2000-01-30  Richard Henderson  <rth@cygnus.com>\n \n \t* alpha.md (negtf2, abstf2): Fix word order thinko."}, {"sha": "36f831d648c437c9c79e8afd74bd20634091a20e", "filename": "gcc/config/alpha/alpha.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2Fconfig%2Falpha%2Falpha.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2Fconfig%2Falpha%2Falpha.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Falpha.c?ref=c112e233c5f47edebd653e743a8f7db3d682091f", "patch": "@@ -4721,9 +4721,6 @@ alpha_expand_epilogue ()\n \t\t\t       gen_rtx_REG (DImode, vms_save_fp_regno)));\n         }\n     }\n-\n-  /* Return.  */\n-  emit_jump_insn (gen_return_internal ());\n }\n \n /* Output the rest of the textual info surrounding the epilogue.  */"}, {"sha": "1d64f37e4bd7037baaa6adb3bdc6b2466c0df10d", "filename": "gcc/config/alpha/alpha.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2Fconfig%2Falpha%2Falpha.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2Fconfig%2Falpha%2Falpha.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Falpha.h?ref=c112e233c5f47edebd653e743a8f7db3d682091f", "patch": "@@ -1267,6 +1267,10 @@ struct machine_function\n    No definition is equivalent to always zero.  */\n \n #define EXIT_IGNORE_STACK 1\n+\n+/* Define registers used by the epilogue and return instruction.  */\n+\n+#define EPILOGUE_USES(REGNO)\t((REGNO) == 26)\n \f\n /* Output assembler code for a block containing the constant parts\n    of a trampoline, leaving space for the variable parts."}, {"sha": "03e499dba01abcfa5a82ba85ea77f96db5515f42", "filename": "gcc/config/alpha/alpha.md", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2Fconfig%2Falpha%2Falpha.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c112e233c5f47edebd653e743a8f7db3d682091f/gcc%2Fconfig%2Falpha%2Falpha.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Falpha.md?ref=c112e233c5f47edebd653e743a8f7db3d682091f", "patch": "@@ -3984,17 +3984,13 @@\n   \"br $31,%l0\"\n   [(set_attr \"type\" \"ibr\")])\n \n-(define_insn \"return\"\n+(define_expand \"return\"\n   [(return)]\n   \"direct_return ()\"\n-  \"ret $31,($26),1\"\n-  [(set_attr \"type\" \"ibr\")])\n+  \"\")\n \n-;; Use a different pattern for functions which have non-trivial\n-;; epilogues so as not to confuse jump and reorg.\n-(define_insn \"return_internal\"\n-  [(use (reg:DI 26))\n-   (return)]\n+(define_insn \"*return_internal\"\n+  [(return)]\n   \"\"\n   \"ret $31,($26),1\"\n   [(set_attr \"type\" \"ibr\")])\n@@ -5431,9 +5427,9 @@\n   \"mov %1,%0\")\n \n (define_expand \"epilogue\"\n-  [(clobber (const_int 0))]\n+  [(return)]\n   \"\"\n-  \"alpha_expand_epilogue (); DONE;\")\n+  \"alpha_expand_epilogue ();\")\n \n (define_expand \"eh_epilogue\"\n   [(use (match_operand:DI 0 \"register_operand\" \"r\"))"}]}