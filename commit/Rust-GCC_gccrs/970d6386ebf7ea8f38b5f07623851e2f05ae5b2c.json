{"sha": "970d6386ebf7ea8f38b5f07623851e2f05ae5b2c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTcwZDYzODZlYmY3ZWE4ZjM4YjVmMDc2MjM4NTFlMmYwNWFlNWIyYw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-07-02T08:07:55Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-07-02T08:07:55Z"}, "message": "decl.c (duplicate_decls): Preserve DECL_ORIGINAL_TYPE for a TYPE_DECL.\n\n\t* decl.c (duplicate_decls): Preserve DECL_ORIGINAL_TYPE for a\n\tTYPE_DECL.\n\t* typeck.c (commonparms): Remove obstack manipulations.\n\nFrom-SVN: r34830", "tree": {"sha": "ceffe76df9701db4337f77af2aae38e1560cbd08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ceffe76df9701db4337f77af2aae38e1560cbd08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c/comments", "author": null, "committer": null, "parents": [{"sha": "9de09d7375066662663a44edfdb25aefb60415e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9de09d7375066662663a44edfdb25aefb60415e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9de09d7375066662663a44edfdb25aefb60415e0"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "5160b3c92901f4af10631d9c73d8dee17e5e40e6", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=970d6386ebf7ea8f38b5f07623851e2f05ae5b2c", "patch": "@@ -1,3 +1,9 @@\n+2000-07-02  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* decl.c (duplicate_decls): Preserve DECL_ORIGINAL_TYPE for a\n+\tTYPE_DECL.\n+\t* typeck.c (commonparms): Remove obstack manipulations.\n+\n 2000-07-01  Benjamin Chelf  <chelf@codesourcery.com>\n \n         * Make-lang.in (cc1plus$(exeext)): Added c-semantics.o."}, {"sha": "af3f84bdfdf92e35079b9bb23d12c4289bfbe466", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=970d6386ebf7ea8f38b5f07623851e2f05ae5b2c", "patch": "@@ -3487,6 +3487,8 @@ duplicate_decls (newdecl, olddecl)\n \t  CLASSTYPE_FRIEND_CLASSES (newtype)\n \t    = CLASSTYPE_FRIEND_CLASSES (oldtype);\n \t}\n+\n+      DECL_ORIGINAL_TYPE (newdecl) = DECL_ORIGINAL_TYPE (olddecl);\n     }\n \n   /* Copy all the DECL_... slots specified in the new decl\n@@ -8033,7 +8035,6 @@ destroy_local_var (decl)\n }\n \n \n-\n /* Finish processing of a declaration;\n    install its line number and initial value.\n    If the length of an array type is not known before,"}, {"sha": "cfa2c346c958e90ea2bce4e9e43173b9d3ff188a", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/970d6386ebf7ea8f38b5f07623851e2f05ae5b2c/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=970d6386ebf7ea8f38b5f07623851e2f05ae5b2c", "patch": "@@ -263,7 +263,6 @@ commonparms (p1, p2)\n   tree oldargs = p1, newargs, n;\n   int i, len;\n   int any_change = 0;\n-  char *first_obj = (char *) oballoc (0);\n \n   len = list_length (p1);\n   newargs = tree_last (p1);\n@@ -312,10 +311,7 @@ commonparms (p1, p2)\n \tTREE_VALUE (n) = TREE_VALUE (p1);\n     }\n   if (! any_change)\n-    {\n-      obfree (first_obj);\n-      return oldargs;\n-    }\n+    return oldargs;\n \n   return newargs;\n }"}]}