{"sha": "89d9619dc88f67fee7e9c57d09cdf0203d41c252", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODlkOTYxOWRjODhmNjdmZWU3ZTljNTdkMDljZGYwMjAzZDQxYzI1Mg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-07-02T11:00:16Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-07-02T11:00:16Z"}, "message": "(LINK_SPEC): Pass -shared for -shared.\n\n({CPP,LINK}_SPEC): Choose for glibc 1 or 2 depending on USE_GNULIBC_1.\n\nFrom-SVN: r14376", "tree": {"sha": "09f7a72acc80112e63ad7b6e974a4a654aadd7ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/09f7a72acc80112e63ad7b6e974a4a654aadd7ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/89d9619dc88f67fee7e9c57d09cdf0203d41c252", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89d9619dc88f67fee7e9c57d09cdf0203d41c252", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89d9619dc88f67fee7e9c57d09cdf0203d41c252", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89d9619dc88f67fee7e9c57d09cdf0203d41c252/comments", "author": null, "committer": null, "parents": [{"sha": "c811d261c34d239f8e23897417606ef6a751b390", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c811d261c34d239f8e23897417606ef6a751b390", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c811d261c34d239f8e23897417606ef6a751b390"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "6110fc35a5def14a36de24145a4df9a71eaeb8b2", "filename": "gcc/config/m68k/linux.h", "status": "modified", "additions": 20, "deletions": 2, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89d9619dc88f67fee7e9c57d09cdf0203d41c252/gcc%2Fconfig%2Fm68k%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89d9619dc88f67fee7e9c57d09cdf0203d41c252/gcc%2Fconfig%2Fm68k%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Flinux.h?ref=89d9619dc88f67fee7e9c57d09cdf0203d41c252", "patch": "@@ -106,13 +106,23 @@ Boston, MA 02111-1307, USA.  */\n   \"-D__ELF__ -Dunix -Dmc68000 -Dmc68020 -Dlinux -Asystem(unix) -Asystem(posix) -Acpu(m68k) -Amachine(m68k)\"\n \n #undef CPP_SPEC\n+#ifdef USE_GNULIBC_1\n #if TARGET_DEFAULT & MASK_68881\n #define CPP_SPEC \\\n   \"%{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{!msoft-float:-D__HAVE_68881__} %{posix:-D_POSIX_SOURCE}\"\n #else\n #define CPP_SPEC \\\n   \"%{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{m68881:-D__HAVE_68881__} %{posix:-D_POSIX_SOURCE}\"\n #endif\n+#else\n+#if TARGET_DEFAULT & MASK_68881\n+#define CPP_SPEC \\\n+  \"%{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{!msoft-float:-D__HAVE_68881__} %{posix:-D_POSIX_SOURCE} %{pthread:-D_REENTRANT}\"\n+#else\n+#define CPP_SPEC \\\n+  \"%{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{m68881:-D__HAVE_68881__} %{posix:-D_POSIX_SOURCE} %{pthread:-D_REENTRANT}\"\n+#endif\n+#endif\n \n /* We override the ASM_SPEC from svr4.h because we must pass -m68040 down\n    to the assembler.  */\n@@ -138,21 +148,29 @@ Boston, MA 02111-1307, USA.  */\n /* If ELF is the default format, we should not use /lib/elf. */\n \n #undef\tLINK_SPEC\n+#ifdef USE_GNULIBC_1\n #ifndef LINUX_DEFAULT_ELF\n-#define LINK_SPEC \"-m m68kelf %{shared} %{symbolic:-shared -Bsymbolic} \\\n+#define LINK_SPEC \"-m m68kelf %{shared:-shared} %{symbolic:-shared -Bsymbolic} \\\n   %{!shared:%{!symbolic: \\\n     %{!static: \\\n       %{rdynamic:-export-dynamic} \\\n       %{!dynamic-linker*:-dynamic-linker /lib/elf/ld-linux.so.1} \\\n       %{!rpath*:-rpath /lib/elf/}} %{static}}}\"\n #else\n-#define LINK_SPEC \"-m m68kelf %{shared} %{symbolic:-shared -Bsymbolic} \\\n+#define LINK_SPEC \"-m m68kelf %{shared:-shared} %{symbolic:-shared -Bsymbolic} \\\n   %{!shared:%{!symbolic: \\\n     %{!static: \\\n       %{rdynamic:-export-dynamic} \\\n       %{!dynamic-linker*:-dynamic-linker /lib/ld-linux.so.1}} \\\n     %{static}}}\"\n #endif\n+#else\n+#define LINK_SPEC \"-m m68kelf %{shared:-shared} %{symbolic:-shared -Bsymbolic} \\\n+  %{!shared:%{!symbolic: \\\n+    %{!static: \\\n+      %{rdynamic:-export-dynamic}} \\\n+    %{static}}}\"\n+#endif\n \n /* For compatibility with linux/a.out */\n "}]}