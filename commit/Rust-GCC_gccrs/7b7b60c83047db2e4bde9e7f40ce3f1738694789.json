{"sha": "7b7b60c83047db2e4bde9e7f40ce3f1738694789", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2I3YjYwYzgzMDQ3ZGIyZTRiZGU5ZTdmNDBjZTNmMTczODY5NDc4OQ==", "commit": {"author": {"name": "Ville Voutilainen", "email": "ville.voutilainen@gmail.com", "date": "2017-11-20T14:21:42Z"}, "committer": {"name": "Ville Voutilainen", "email": "ville@gcc.gnu.org", "date": "2017-11-20T14:21:42Z"}, "message": "Implement LWG 2353\n\n* include/bits/stl_iterator_base_funcs.h (next):\nUse InputIterator instead of ForwardIterator.\n* testsuite/24_iterators/operations/lwg2353.cc: New.\n* testsuite/24_iterators/operations/next_neg.cc: Remove.\n\nFrom-SVN: r254957", "tree": {"sha": "18ee860194c5bf079e48a6f3b5f0de4836e5242b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18ee860194c5bf079e48a6f3b5f0de4836e5242b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7b7b60c83047db2e4bde9e7f40ce3f1738694789", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b7b60c83047db2e4bde9e7f40ce3f1738694789", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b7b60c83047db2e4bde9e7f40ce3f1738694789", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b7b60c83047db2e4bde9e7f40ce3f1738694789/comments", "author": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9cdcebf971e71e69a773d729b97cfb55652cca31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cdcebf971e71e69a773d729b97cfb55652cca31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cdcebf971e71e69a773d729b97cfb55652cca31"}], "stats": {"total": 87, "additions": 39, "deletions": 48}, "files": [{"sha": "bdb7de2fe8ea2ca66bc359fe6a79941789a6008a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b7b60c83047db2e4bde9e7f40ce3f1738694789/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b7b60c83047db2e4bde9e7f40ce3f1738694789/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=7b7b60c83047db2e4bde9e7f40ce3f1738694789", "patch": "@@ -1,3 +1,11 @@\n+2017-11-20  Ville Voutilainen  <ville.voutilainen@gmail.com>\n+\n+\tImplement LWG 2353\n+\t* include/bits/stl_iterator_base_funcs.h (next):\n+\tUse InputIterator instead of ForwardIterator.\n+\t* testsuite/24_iterators/operations/lwg2353.cc: New.\n+\t* testsuite/24_iterators/operations/next_neg.cc: Remove.\n+\n 2017-11-18  Edward Smith-Rowland  <3dw4rd@verizon.net>\n \n \tPR libstdc++/pr66689 - comp_ellint_3 and ellint_3 return garbage values"}, {"sha": "ad84b398c84f277e152eee577f93061187426174", "filename": "libstdc++-v3/include/bits/stl_iterator_base_funcs.h", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b7b60c83047db2e4bde9e7f40ce3f1738694789/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_funcs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b7b60c83047db2e4bde9e7f40ce3f1738694789/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_funcs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_funcs.h?ref=7b7b60c83047db2e4bde9e7f40ce3f1738694789", "patch": "@@ -208,14 +208,13 @@ _GLIBCXX_END_NAMESPACE_CONTAINER\n \n #if __cplusplus >= 201103L\n \n-  template<typename _ForwardIterator>\n-    inline _GLIBCXX17_CONSTEXPR _ForwardIterator\n-    next(_ForwardIterator __x, typename\n-\t iterator_traits<_ForwardIterator>::difference_type __n = 1)\n+  template<typename _InputIterator>\n+    inline _GLIBCXX17_CONSTEXPR _InputIterator\n+    next(_InputIterator __x, typename\n+\t iterator_traits<_InputIterator>::difference_type __n = 1)\n     {\n       // concept requirements\n-      __glibcxx_function_requires(_ForwardIteratorConcept<\n-\t\t\t\t  _ForwardIterator>)\n+      __glibcxx_function_requires(_InputIteratorConcept<_InputIterator>)\n       std::advance(__x, __n);\n       return __x;\n     }"}, {"sha": "13b058bab7f91ebbeb7038befd08c04544a593e4", "filename": "libstdc++-v3/testsuite/24_iterators/operations/lwg2353.cc", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b7b60c83047db2e4bde9e7f40ce3f1738694789/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Flwg2353.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b7b60c83047db2e4bde9e7f40ce3f1738694789/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Flwg2353.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Flwg2353.cc?ref=7b7b60c83047db2e4bde9e7f40ce3f1738694789", "patch": "@@ -0,0 +1,26 @@\n+// { dg-options \"-D_GLIBCXX_CONCEPT_CHECKS\" }\n+// { dg-do run { target c++11 } }\n+\n+#include <iterator>\n+#include <utility>\n+#include <sstream>\n+#include <string>\n+#include <testsuite_hooks.h>\n+\n+template<typename Distance, typename InputRange>\n+std::pair<std::istream_iterator<char>, std::istream_iterator<char>>\n+drop(Distance n, InputRange& rng)\n+{\n+  return std::make_pair(std::next(std::istream_iterator<char>(rng), n),\n+\t\t\tstd::istream_iterator<char>()\n+\t\t\t);\n+}\n+\n+int main()\n+{\n+    std::stringstream x(\"let let there be rock\");\n+    x << std::noskipws;\n+    auto y = drop(4, x);\n+    std::string z(y.first, y.second);\n+    VERIFY(z == \"let there be rock\");\n+}"}, {"sha": "f3c20a1956704a4b09efd979c352ff3b3ca5ca0d", "filename": "libstdc++-v3/testsuite/24_iterators/operations/next_neg.cc", "status": "removed", "additions": 0, "deletions": 42, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9cdcebf971e71e69a773d729b97cfb55652cca31/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fnext_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9cdcebf971e71e69a773d729b97cfb55652cca31/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fnext_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fnext_neg.cc?ref=9cdcebf971e71e69a773d729b97cfb55652cca31", "patch": "@@ -1,42 +0,0 @@\n-// Copyright (C) 2015-2017 Free Software Foundation, Inc.\n-//\n-// This file is part of the GNU ISO C++ Library.  This library is free\n-// software; you can redistribute it and/or modify it under the\n-// terms of the GNU General Public License as published by the\n-// Free Software Foundation; either version 3, or (at your option)\n-// any later version.\n-\n-// This library is distributed in the hope that it will be useful,\n-// but WITHOUT ANY WARRANTY; without even the implied warranty of\n-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-// GNU General Public License for more details.\n-\n-// You should have received a copy of the GNU General Public License along\n-// with this library; see the file COPYING3.  If not see\n-// <http://www.gnu.org/licenses/>.\n-\n-// { dg-options \"-D_GLIBCXX_CONCEPT_CHECKS\" }\n-// { dg-do compile { target c++11 } }\n-\n-#include <iterator>\n-\n-struct X {};\n-\n-namespace std\n-{\n-  template<>\n-    struct iterator_traits<const X*> : iterator_traits<X*>\n-    {\n-      using iterator_category = input_iterator_tag;\n-      using reference = const X&;\n-      using pointer = const X*;\n-    };\n-}\n-\n-void\n-test01()\n-{\n-  const X array[1] = { };\n-  std::next(array);\n-  // { dg-error \"input_iterator\" \"\" { target *-*-* } 220 }\n-}"}]}