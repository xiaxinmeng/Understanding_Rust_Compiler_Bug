{"sha": "cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JiMWFiMTA0MDgzZDJmZGE0YjdlZWUzYjhjMWEzODNmZjVjZWQ0ZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-02-10T09:21:12Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-02-10T09:21:12Z"}, "message": "builtins.c (set_builtin_user_assembler_name): Also handle ffs if int is smaller than word.\n\n\t* builtins.c (set_builtin_user_assembler_name): Also handle\n\tffs if int is smaller than word.\n\n\t* gcc.dg/builtin-ffs-1.c: New test.\n\nFrom-SVN: r156646", "tree": {"sha": "adf80efb3b5c83bfd91ae5987fd3e83459dd7815", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/adf80efb3b5c83bfd91ae5987fd3e83459dd7815"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/comments", "author": null, "committer": null, "parents": [{"sha": "f25a2b52ab58ffa3d9c5ba773181d0a9515f9e09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f25a2b52ab58ffa3d9c5ba773181d0a9515f9e09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f25a2b52ab58ffa3d9c5ba773181d0a9515f9e09"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "f540be5212282dbe523b99c6647c0318199d21dc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "patch": "@@ -1,3 +1,8 @@\n+2010-02-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* builtins.c (set_builtin_user_assembler_name): Also handle\n+\tffs if int is smaller than word.\n+\n 2010-02-09  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR middle-end/42973"}, {"sha": "bfff2d54135191ee17b0d0cdd810e74a5687173f", "filename": "gcc/builtins.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "patch": "@@ -13594,6 +13594,14 @@ set_builtin_user_assembler_name (tree decl, const char *asmspec)\n     case BUILT_IN_ABORT:\n       abort_libfunc = set_user_assembler_libfunc (\"abort\", asmspec);\n       break;\n+    case BUILT_IN_FFS:\n+      if (INT_TYPE_SIZE < BITS_PER_WORD)\n+\t{\n+\t  set_user_assembler_libfunc (\"ffs\", asmspec);\n+\t  set_optab_libfunc (ffs_optab, mode_for_size (INT_TYPE_SIZE,\n+\t\t\t\t\t\t       MODE_INT, 0), \"ffs\");\n+\t}\n+      break;\n     default:\n       break;\n     }"}, {"sha": "a2a3c8b8df686c116a5add61152f6a2e75cc49d4", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "patch": "@@ -1,4 +1,4 @@\n-2010-02-09 Jerry DeLisle <jvdelisle@gcc.gnu.org>\n+2010-02-09  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/42999\n \t* array.c (gfc_constant_ac): Do not prevent expansion of constructors"}, {"sha": "59181d7c97c6417af8f4ba1e9a7fbafed024a37a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "patch": "@@ -1,4 +1,8 @@\n-2010-02-09 Jerry DeLisle <jvdelisle@gcc.gnu.org>\n+2010-02-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc.dg/builtin-ffs-1.c: New test.\n+\n+2010-02-09  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/42999\n \t* gfortran.dg/array_constructor_35.f90: New test."}, {"sha": "2bf0e9873db22b3402079de4226252a03b4ef2aa", "filename": "gcc/testsuite/gcc.dg/builtin-ffs-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-ffs-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-ffs-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-ffs-1.c?ref=cbb1ab104083d2fda4b7eee3b8c1a383ff5ced4e", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+extern int ffs (int) __asm (\"__GI_ffs\") __attribute__ ((nothrow, const));\n+\n+int\n+ffsll (long long int i)\n+{\n+  unsigned long long int x = i & -i;\n+  \n+  if (x <= 0xffffffff)\n+    return ffs (i);\n+  else\n+    return 32 + ffs (i >> 32);\n+}\n+\n+/* { dg-final { scan-assembler-not \"\\nffs\\n|\\nffs\\[^a-zA-Z0-9_\\]|\\[^a-zA-Z0-9_\\]ffs\\n\" } } */"}]}