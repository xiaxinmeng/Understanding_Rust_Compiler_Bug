{"sha": "c7a2139bef08cdc8fde38d3d59d88fd2c689e681", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdhMjEzOWJlZjA4Y2RjOGZkZTM4ZDNkNTlkODhmZDJjNjg5ZTY4MQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2007-04-20T23:53:37Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2007-04-20T23:53:37Z"}, "message": "re PR target/31628 (stdcall function is miscompiled)\n\n        PR target/31628\n        * config/i386/i386.c (type_has_variadic_args_p): Look for any\n        TREE_LIST with a void_type_node value, not void_list_node exactly.\n\nFrom-SVN: r124014", "tree": {"sha": "b7e69f3d7ede70da10f796e00a2d8b84345566c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7e69f3d7ede70da10f796e00a2d8b84345566c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7a2139bef08cdc8fde38d3d59d88fd2c689e681", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7a2139bef08cdc8fde38d3d59d88fd2c689e681", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7a2139bef08cdc8fde38d3d59d88fd2c689e681", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7a2139bef08cdc8fde38d3d59d88fd2c689e681/comments", "author": null, "committer": null, "parents": [{"sha": "fda0adca8d936d3bb0089ec25a744e607e4af11c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fda0adca8d936d3bb0089ec25a744e607e4af11c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fda0adca8d936d3bb0089ec25a744e607e4af11c"}], "stats": {"total": 47, "additions": 28, "deletions": 19}, "files": [{"sha": "f60a91b9ef90444b24c6ba27a19f61d334fe8eda", "filename": "gcc/ChangeLog", "status": "modified", "additions": 20, "deletions": 14, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7a2139bef08cdc8fde38d3d59d88fd2c689e681/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7a2139bef08cdc8fde38d3d59d88fd2c689e681/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c7a2139bef08cdc8fde38d3d59d88fd2c689e681", "patch": "@@ -1,3 +1,9 @@\n+2007-04-20  Richard Henderson  <rth@redhat.com>\n+\n+\tPR target/31628\n+\t* config/i386/i386.c (type_has_variadic_args_p): Look for any\n+\tTREE_LIST with a void_type_node value, not void_list_node exactly.\n+\n 2007-04-21  Douglas Gregor  <doug.gregor@gmail.com>\n \n \t* doc/standards.texi: Re-arrange into language-specific\n@@ -307,7 +313,7 @@\n \tcompilation unit.\n \n \t* langhooks-def.h (LANG_HOOKS_GENERIC_TYPE_P): Define.\n-        (LANG_HOOKS_FOR_TYPES_INITIALIZER): Add.\n+\t(LANG_HOOKS_FOR_TYPES_INITIALIZER): Add.\n \tThis hook indicates if a type is generic.  Set it by default\n \tto \"never generic\".\n \t* langhooks.h (struct lang_hooks_for_types): Add a new hook\n@@ -353,7 +359,7 @@\n \n 2007-04-16  Aldy Hernandez  <aldyh@redhat.com>\n \n-        * function.h: Remove sequence_stack extern declaration.\n+\t* function.h: Remove sequence_stack extern declaration.\n \n 2007-04-16  Kazu Hirata  <kazu@codesourcery.com>\n \n@@ -463,7 +469,7 @@\n 2007-04-14  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR c/31520\n-        * c-decl.c (finish_decl): Grab the type of the decl after the call\n+\t* c-decl.c (finish_decl): Grab the type of the decl after the call\n \tto store_init_value.\n \n 2007-04-14  Steven Bosscher  <steven@gcc.gnu.org>\n@@ -573,7 +579,7 @@\n \t[FLOAT_EXTEND]: Use SSE_FLOAT_MODE_P.\n \n 2007-04-12  Paolo Bonzini  <bonzini@gnu.org>\n-            Charles Wilson  <libtool@cwilson.fastmail.fm>\n+\t    Charles Wilson  <libtool@cwilson.fastmail.fm>\n \n \t* Makefile.in (stamp-as, stamp-collect-ld, stamp-nm): Remove.\n \t(libgcc.mvars): Don't depend on them.\n@@ -1318,16 +1324,16 @@\n \n 2007-04-04  Chen Liqin  <liqin@sunnorth.com.cn>\n \n-        * config/score/crti.asm: Change _bss_start to __bss_start.\n-        * config/score/score.h (CONDITIONAL_REGISTER_USAGE): Added.\n-        (OUTGOING_REG_PARM_STACK_SPACE) update.\n-        * config/score/score.opt: add options to make backend support\n-        score5, score5u, score7 and score7d.\n-        * config/score/score.md: Likewise.\n-        * config/score/misc.md: Likewise.\n-        * config/score/mac.md: Likewise.\n-        * doc/invoke.texi: Likewise.\n-        * doc/md.texi: update constraints define.\n+\t* config/score/crti.asm: Change _bss_start to __bss_start.\n+\t* config/score/score.h (CONDITIONAL_REGISTER_USAGE): Added.\n+\t(OUTGOING_REG_PARM_STACK_SPACE) update.\n+\t* config/score/score.opt: add options to make backend support\n+\tscore5, score5u, score7 and score7d.\n+\t* config/score/score.md: Likewise.\n+\t* config/score/misc.md: Likewise.\n+\t* config/score/mac.md: Likewise.\n+\t* doc/invoke.texi: Likewise.\n+\t* doc/md.texi: update constraints define.\n \n 2007-04-03  Richard Henderson  <rth@redhat.com>\n "}, {"sha": "b785f499082cdd573437c7df7f2968801b2a5498", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7a2139bef08cdc8fde38d3d59d88fd2c689e681/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7a2139bef08cdc8fde38d3d59d88fd2c689e681/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=c7a2139bef08cdc8fde38d3d59d88fd2c689e681", "patch": "@@ -2895,12 +2895,15 @@ ix86_eax_live_at_start_p (void)\n static bool\n type_has_variadic_args_p (tree type)\n {\n-  tree t;\n+  tree n, t = TYPE_ARG_TYPES (type);\n \n-  for (t = TYPE_ARG_TYPES (type); t; t = TREE_CHAIN (t))\n-    if (t == void_list_node)\n-      return false;\n-  return true;\n+  if (t == NULL)\n+    return false;\n+\n+  while ((n = TREE_CHAIN (t)) != NULL)\n+    t = n;\n+\n+  return TREE_VALUE (t) != void_type_node;\n }\n \n /* Value is the number of bytes of arguments automatically"}]}