{"sha": "1ad663a82a1fe4993ac63ca028477916dd9535f1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWFkNjYzYTgyYTFmZTQ5OTNhYzYzY2EwMjg0Nzc5MTZkZDk1MzVmMQ==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2011-08-08T17:53:55Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2011-08-08T17:53:55Z"}, "message": "re PR middle-end/49923 (__attribute__((packed)) on ARM is sometimes dropped)\n\n2011-08-08  Martin Jambor  <mjambor@suse.cz>\n\n\tPR middle-end/49923\n\t* tree-sra.c (access_precludes_ipa_sra_p): Also check access\n\tmemory alignment.\n\n\t* testsuite/gcc.dg/tree-ssa/pr49923.c: New test.\n\nFrom-SVN: r177572", "tree": {"sha": "0a2be7250f6278b014273bde5c9bd9112fcd10c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a2be7250f6278b014273bde5c9bd9112fcd10c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ad663a82a1fe4993ac63ca028477916dd9535f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ad663a82a1fe4993ac63ca028477916dd9535f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ad663a82a1fe4993ac63ca028477916dd9535f1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ad663a82a1fe4993ac63ca028477916dd9535f1/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f0efc7aa7705facdb16a39a08137cf748c7d5f30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0efc7aa7705facdb16a39a08137cf748c7d5f30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0efc7aa7705facdb16a39a08137cf748c7d5f30"}], "stats": {"total": 69, "additions": 69, "deletions": 0}, "files": [{"sha": "fc23fcb4a40259c3c23de65cedefcc53ac0568ec", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1ad663a82a1fe4993ac63ca028477916dd9535f1", "patch": "@@ -1,3 +1,9 @@\n+2011-08-08  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR middle-end/49923\n+\t* tree-sra.c (access_precludes_ipa_sra_p): Also check access\n+\tmemory alignment.\n+\n 2011-08-08   Diego Novillo  <dnovillo@google.com>\n \n \t* Makefile.in (LTO_STREAMER_H): Add DIAGNOSTIC_H."}, {"sha": "347975d70910e8b0ea0b5201a255554661659bff", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1ad663a82a1fe4993ac63ca028477916dd9535f1", "patch": "@@ -1,3 +1,8 @@\n+2011-08-08  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR middle-end/49923\n+\t* gcc.dg/tree-ssa/pr49923.c: New test.\n+\n 2011-08-08  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/49781"}, {"sha": "83113f815fd886d723d23f0ecf621573d20836d9", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr49923.c", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr49923.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr49923.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr49923.c?ref=1ad663a82a1fe4993ac63ca028477916dd9535f1", "patch": "@@ -0,0 +1,55 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O3\" } */\n+\n+#define PACKED __attribute__(( packed ))\n+\n+struct PACKED aostk_point_u8 {\n+  unsigned char x;\n+  unsigned char y;\n+};\n+\n+struct PACKED aostk_size_u8 {\n+  unsigned char width;\n+  unsigned char height;\n+};\n+\n+struct PACKED aostk_glyph {\n+\tunsigned short i;\n+\tstruct aostk_size_u8 size;\n+\tchar top;\n+\tstruct aostk_point_u8 advance;\n+\tunsigned char pitch;\n+\tunsigned char* data;\n+\tchar left;\n+};\n+\n+\n+struct PACKED aostk_font {\n+\tunsigned short numglyphs;\n+\tunsigned char height;\n+\tstruct aostk_glyph* glyphs;\n+};\n+\n+struct aostk_font glob_font;\n+\n+static struct aostk_glyph* aostk_get_glyph(struct aostk_font* f, unsigned int c) {\n+\treturn f->glyphs;\n+}\n+\n+int aostk_font_strwidth(struct aostk_font* font, const char* str) {\n+\tstruct aostk_glyph* g = aostk_get_glyph(font, 0);\n+\treturn (g != 0);\n+}\n+\n+struct aostk_font*\n+__attribute__ ((noinline, noclone))\n+get_some_font (void)\n+{\n+  return &glob_font;\n+}\n+\n+int main (int argc, char *argv[])\n+{\n+  return (int) aostk_font_strwidth (get_some_font (), \"sth\");\n+  \n+}"}, {"sha": "ab60748c9709007132d9bffda10c1224b2d4aa97", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ad663a82a1fe4993ac63ca028477916dd9535f1/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=1ad663a82a1fe4993ac63ca028477916dd9535f1", "patch": "@@ -3688,6 +3688,9 @@ access_precludes_ipa_sra_p (struct access *access)\n \t  || gimple_code (access->stmt) == GIMPLE_ASM))\n     return true;\n \n+  if (tree_non_mode_aligned_mem_p (access->expr))\n+    return true;\n+\n   return false;\n }\n "}]}