{"sha": "c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg0MTg0M2Y5ZWMyMTMzNDllY2ZkZjgwYjBlMWEwYTZlOWIxODcyYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-10-14T17:14:49Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-10-14T17:14:49Z"}, "message": "stl_list.h (_List_node<>::_List_node<>(_Args&&...)): Add in C++0x mode.\n\n2008-10-14  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* include/bits/stl_list.h (_List_node<>::_List_node<>(_Args&&...)):\n\tAdd in C++0x mode.\n\t(list<>::_M_create_node<>(_Args&&...)): Use _M_get_Node_allocator.\n\t(list<>::_M_erase(iterator): Likewise, in C++0x mode.\n\t* include/bits/list.tcc (_List_base<>::_M_clear): Likewise.\n\t* testsuite/23_containers/list/requirements/dr438/assign_neg.cc:\n\tAdjust dg-error line number.\n\t* testsuite/23_containers/list/requirements/dr438/insert_neg.cc:\n\tLikewise.\n\t* testsuite/23_containers/list/requirements/dr438/\n\tconstructor_1_neg.cc: Likewise.\n\t* testsuite/23_containers/list/requirements/dr438/\n\tconstructor_2_neg.cc: Likewise.\n\nFrom-SVN: r141113", "tree": {"sha": "0fbe8a8835d68a84c792ca9db735a2182590d552", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0fbe8a8835d68a84c792ca9db735a2182590d552"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/comments", "author": null, "committer": null, "parents": [{"sha": "9c88061824631d4fc318c57b72cfd1913007d50c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c88061824631d4fc318c57b72cfd1913007d50c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c88061824631d4fc318c57b72cfd1913007d50c"}], "stats": {"total": 46, "additions": 38, "deletions": 8}, "files": [{"sha": "05e3e8a3b97f5d51696206e5eea93e303c838fd7", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "patch": "@@ -1,3 +1,19 @@\n+2008-10-14  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* include/bits/stl_list.h (_List_node<>::_List_node<>(_Args&&...)):\n+\tAdd in C++0x mode.\n+\t(list<>::_M_create_node<>(_Args&&...)): Use _M_get_Node_allocator.\n+\t(list<>::_M_erase(iterator): Likewise, in C++0x mode.\n+\t* include/bits/list.tcc (_List_base<>::_M_clear): Likewise.\n+\t* testsuite/23_containers/list/requirements/dr438/assign_neg.cc:\n+\tAdjust dg-error line number.\n+\t* testsuite/23_containers/list/requirements/dr438/insert_neg.cc:\n+\tLikewise.\n+\t* testsuite/23_containers/list/requirements/dr438/\n+\tconstructor_1_neg.cc: Likewise.\n+\t* testsuite/23_containers/list/requirements/dr438/\n+\tconstructor_2_neg.cc: Likewise.\n+\n 2008-10-14  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* include/bits/stl_tree.h (_Rb_tree<>::max_size): Use Node_allocator"}, {"sha": "fc4f6ab0e99de45a7ecaa44cc70a0b981784b0c1", "filename": "libstdc++-v3/include/bits/list.tcc", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flist.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flist.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flist.tcc?ref=c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "patch": "@@ -1,6 +1,6 @@\n // List implementation (out of line) -*- C++ -*-\n \n-// Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007\n+// Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -75,7 +75,11 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD_D)\n \t{\n \t  _Node* __tmp = __cur;\n \t  __cur = static_cast<_Node*>(__cur->_M_next);\n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+\t  _M_get_Node_allocator().destroy(__tmp);\n+#else\n \t  _M_get_Tp_allocator().destroy(&__tmp->_M_data);\n+#endif\n \t  _M_put_node(__tmp);\n \t}\n     }"}, {"sha": "18f6f0276810ab08437a96376d80c88bf52738d0", "filename": "libstdc++-v3/include/bits/stl_list.h", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_list.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_list.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_list.h?ref=c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "patch": "@@ -101,6 +101,12 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD_D)\n     {\n       ///< User's data.\n       _Tp _M_data;\n+\n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+      template<typename... _Args>\n+        _List_node(_Args&&... __args)\n+\t: _List_node_base(), _M_data(std::forward<_Args>(__args)...) { }\n+#endif\n     };\n \n   /**\n@@ -478,8 +484,8 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD_D)\n \t  _Node* __p = this->_M_get_node();\n \t  try\n \t    {\n-\t      _M_get_Tp_allocator().construct(&__p->_M_data,\n-\t\t\t\t\t      std::forward<_Args>(__args)...);\n+\t      _M_get_Node_allocator().construct(__p,\n+\t\t\t\t\t\tstd::forward<_Args>(__args)...);\n \t    }\n \t  catch(...)\n \t    {\n@@ -1423,7 +1429,11 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD_D)\n       {\n         __position._M_node->unhook();\n         _Node* __n = static_cast<_Node*>(__position._M_node);\n-        _M_get_Tp_allocator().destroy(&__n->_M_data);\n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+        _M_get_Node_allocator().destroy(__n);\n+#else\n+\t_M_get_Tp_allocator().destroy(&__n->_M_data);\n+#endif\n         _M_put_node(__n);\n       }\n "}, {"sha": "5e7d7ea855bb3c1ad314a7f078b02a95b3444384", "filename": "libstdc++-v3/testsuite/23_containers/list/requirements/dr438/assign_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fassign_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fassign_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fassign_neg.cc?ref=c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "patch": "@@ -19,7 +19,7 @@\n // USA.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 1383 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1389 }\n // { dg-excess-errors \"\" }\n \n #include <list>"}, {"sha": "dd9a4c3452905cdd7153aa19fecdbcf876e05ede", "filename": "libstdc++-v3/testsuite/23_containers/list/requirements/dr438/constructor_1_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fconstructor_1_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fconstructor_1_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fconstructor_1_neg.cc?ref=c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "patch": "@@ -19,7 +19,7 @@\n // USA.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 1352 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1358 }\n // { dg-excess-errors \"\" }\n \n #include <list>"}, {"sha": "507c60df2fbe5735513a9ab9c1b7ae4f42c789dc", "filename": "libstdc++-v3/testsuite/23_containers/list/requirements/dr438/constructor_2_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fconstructor_2_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fconstructor_2_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Fconstructor_2_neg.cc?ref=c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "patch": "@@ -19,7 +19,7 @@\n // USA.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 1352 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1358 }\n // { dg-excess-errors \"\" }\n \n #include <list>"}, {"sha": "497db793cef2c312affcd95620f99240e2f5cc33", "filename": "libstdc++-v3/testsuite/23_containers/list/requirements/dr438/insert_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Finsert_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c841843f9ec213349ecfdf80b0e1a0a6e9b1872a/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Finsert_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Frequirements%2Fdr438%2Finsert_neg.cc?ref=c841843f9ec213349ecfdf80b0e1a0a6e9b1872a", "patch": "@@ -19,7 +19,7 @@\n // USA.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 1352 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1358 }\n // { dg-excess-errors \"\" }\n \n #include <list>"}]}