{"sha": "4784470a7e8cd54951322fd503985f7c11c1cc1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc4NDQ3MGE3ZThjZDU0OTUxMzIyZmQ1MDM5ODVmN2MxMWMxY2MxYw==", "commit": {"author": {"name": "Kai Tietz", "email": "ktietz@redhat.com", "date": "2014-11-27T13:02:45Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2014-11-27T13:02:45Z"}, "message": "re PR c++/63904 (ICE when accessing array member of constexpr struct)\n\n2014-11-27  Kai Tietz  <ktietz@redhat.com>\n\n\tPR c++/63904\n\t* constexpr.c (cxx_eval_vec_init_1): Avoid\n\ttype-overflow issue.\n\nFrom-SVN: r218123", "tree": {"sha": "a6d6a213575936bc31c53b59016837186d95b357", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6d6a213575936bc31c53b59016837186d95b357"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4784470a7e8cd54951322fd503985f7c11c1cc1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4784470a7e8cd54951322fd503985f7c11c1cc1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4784470a7e8cd54951322fd503985f7c11c1cc1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4784470a7e8cd54951322fd503985f7c11c1cc1c/comments", "author": null, "committer": null, "parents": [{"sha": "4c1bfef7c57993105fcad395f02e4b77cdad1b21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c1bfef7c57993105fcad395f02e4b77cdad1b21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c1bfef7c57993105fcad395f02e4b77cdad1b21"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "a59182bdeb42dab5fb2e58ceb3396940dbf601fa", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4784470a7e8cd54951322fd503985f7c11c1cc1c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4784470a7e8cd54951322fd503985f7c11c1cc1c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=4784470a7e8cd54951322fd503985f7c11c1cc1c", "patch": "@@ -1,3 +1,9 @@\n+2014-11-27  Kai Tietz  <ktietz@redhat.com>\n+\n+\tPR c++/63904\n+\t* constexpr.c (cxx_eval_vec_init_1): Avoid\n+\ttype-overflow issue.\n+\n 2014-11-26  Jason Merrill  <jason@redhat.com>\n \n \tAllow partial specialization of variable templates."}, {"sha": "f4aca4b9408d29615aa4a97e3bbb5f3a0dd4ac22", "filename": "gcc/cp/constexpr.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4784470a7e8cd54951322fd503985f7c11c1cc1c/gcc%2Fcp%2Fconstexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4784470a7e8cd54951322fd503985f7c11c1cc1c/gcc%2Fcp%2Fconstexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fconstexpr.c?ref=4784470a7e8cd54951322fd503985f7c11c1cc1c", "patch": "@@ -2013,12 +2013,12 @@ cxx_eval_vec_init_1 (const constexpr_ctx *ctx, tree atype, tree init,\n \t\t     bool *non_constant_p, bool *overflow_p)\n {\n   tree elttype = TREE_TYPE (atype);\n-  int max = tree_to_shwi (array_type_nelts (atype));\n+  unsigned HOST_WIDE_INT max = tree_to_uhwi (array_type_nelts_top (atype));\n   verify_ctor_sanity (ctx, atype);\n   vec<constructor_elt, va_gc> **p = &CONSTRUCTOR_ELTS (ctx->ctor);\n   vec_alloc (*p, max + 1);\n   bool pre_init = false;\n-  int i;\n+  unsigned HOST_WIDE_INT i;\n \n   /* For the default constructor, build up a call to the default\n      constructor of the element type.  We only need to handle class types\n@@ -2043,7 +2043,7 @@ cxx_eval_vec_init_1 (const constexpr_ctx *ctx, tree atype, tree init,\n       pre_init = true;\n     }\n \n-  for (i = 0; i <= max; ++i)\n+  for (i = 0; i < max; ++i)\n     {\n       tree idx = build_int_cst (size_type_node, i);\n       tree eltinit;"}]}