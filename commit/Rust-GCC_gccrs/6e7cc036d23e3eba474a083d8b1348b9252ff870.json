{"sha": "6e7cc036d23e3eba474a083d8b1348b9252ff870", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU3Y2MwMzZkMjNlM2ViYTQ3NGEwODNkOGIxMzQ4YjkyNTJmZjg3MA==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael.morin@tele2.fr", "date": "2008-11-24T19:04:34Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2008-11-24T19:04:34Z"}, "message": "re PR fortran/38184 (invariant RESHAPE not expanded if SOURCE is empty)\n\n2008-11-24  Mikael Morin  <mikael.morin@tele2.fr>\n\n\tPR fortran/38184\n\t* simplify.c (is_constant_array_expr): Return true instead of false\n\tif the array constructor is empty.\n\n2008-11-24  Mikael Morin  <mikael.morin@tele2.fr>\n\n\tPR fortran/38184\n\t* gfortran.dg/reshape_empty_1.f03: New test.\n\nFrom-SVN: r142168", "tree": {"sha": "8afcec85bbbdbfe33d5210495fcf425aac29a173", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8afcec85bbbdbfe33d5210495fcf425aac29a173"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e7cc036d23e3eba474a083d8b1348b9252ff870", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e7cc036d23e3eba474a083d8b1348b9252ff870", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e7cc036d23e3eba474a083d8b1348b9252ff870", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e7cc036d23e3eba474a083d8b1348b9252ff870/comments", "author": null, "committer": null, "parents": [{"sha": "c63d77544c698d5ee05f194ae241db82b1769497", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c63d77544c698d5ee05f194ae241db82b1769497", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c63d77544c698d5ee05f194ae241db82b1769497"}], "stats": {"total": 34, "additions": 31, "deletions": 3}, "files": [{"sha": "5fe6e9e3e031dd41c35eda8b09b5e6b0fbeaf989", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=6e7cc036d23e3eba474a083d8b1348b9252ff870", "patch": "@@ -1,3 +1,9 @@\n+2008-11-24  Mikael Morin  <mikael.morin@tele2.fr>\n+\n+\tPR fortran/38184\n+\t* simplify.c (is_constant_array_expr): Return true instead of false\n+\tif the array constructor is empty.\n+\n 2008-11-24  Daniel Kraft  <d@domob.eu>\n \n \tPR fortran/37779"}, {"sha": "7922bde6ff16ff71564f2fece4dd355c0c0cf1c0", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=6e7cc036d23e3eba474a083d8b1348b9252ff870", "patch": "@@ -3410,9 +3410,6 @@ is_constant_array_expr (gfc_expr *e)\n   if (e->expr_type != EXPR_ARRAY || !gfc_is_constant_expr (e))\n     return false;\n   \n-  if (e->value.constructor == NULL)\n-    return false;\n-  \n   for (c = e->value.constructor; c; c = c->next)\n     if (c->expr->expr_type != EXPR_CONSTANT)\n       return false;"}, {"sha": "7d040e12e6d64b416ba6769e523138d4bf475ea0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6e7cc036d23e3eba474a083d8b1348b9252ff870", "patch": "@@ -1,3 +1,8 @@\n+2008-11-24  Mikael Morin  <mikael.morin@tele2.fr>\n+\n+\tPR fortran/38184\n+\t* gfortran.dg/reshape_empty_1.f03: New test.\n+\n 2008-11-24  Jack Howarth  <howarth@bromo.med.uc.edu>\n \n \tPR testsuite/38241"}, {"sha": "cac7e7360851f5095d775b138e5c4ff658155207", "filename": "gcc/testsuite/gfortran.dg/reshape_empty_1.f03", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_empty_1.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e7cc036d23e3eba474a083d8b1348b9252ff870/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_empty_1.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_empty_1.f03?ref=6e7cc036d23e3eba474a083d8b1348b9252ff870", "patch": "@@ -0,0 +1,20 @@\n+! { dg-do run }\n+! { dg-options \"-fdump-tree-original\" }\n+!\n+! PR fortran/38184\n+! invariant RESHAPE not expanded if SOURCE is empty.\n+!\n+! Original program by James Van Buskirk\n+\n+integer, parameter :: N = 3\n+integer, parameter :: A(N,N) = reshape([integer::],[N,N],reshape([1],[N+1],[2]))\n+integer, parameter :: K = N*A(2,2)+A(2,3)\n+integer :: B(N,N) = reshape([1,2,2,2,1,2,2,2,1],[3,3])\n+integer :: i\n+i = 5\n+if (any(A /= B)) call abort\n+if (K /= i) call abort\n+end\n+\n+! { dg-final { scan-tree-dump-times \"\\\\\\{1, 2, 2, 2, 1, 2, 2, 2, 1\\\\\\}\" 2 \"original\" } }\n+! { dg-final { cleanup-tree-dump \"original\" } }"}]}