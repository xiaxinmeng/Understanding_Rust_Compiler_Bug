{"sha": "f4290962f769d655fb6fbdbe4d54cee5f0b56658", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQyOTA5NjJmNzY5ZDY1NWZiNmZiZGJlNGQ1NGNlZTVmMGI1NjY1OA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2018-08-21T12:32:53Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-08-21T12:32:53Z"}, "message": "tree.c (find_decls_types_r): Do not check for redundant typedefs.\n\n\n\t* tree.c (find_decls_types_r): Do not check for redundant typedefs.\n\t* tree.h (is_redundant_typedef): Remove.\n\t* dwarf2out.c (is_redundant_typedef): Turn into static function.\n\nFrom-SVN: r263699", "tree": {"sha": "1645ad83adc225fe94cfe763ac9e425b632c5202", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1645ad83adc225fe94cfe763ac9e425b632c5202"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f4290962f769d655fb6fbdbe4d54cee5f0b56658", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4290962f769d655fb6fbdbe4d54cee5f0b56658", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4290962f769d655fb6fbdbe4d54cee5f0b56658", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4290962f769d655fb6fbdbe4d54cee5f0b56658/comments", "author": null, "committer": null, "parents": [{"sha": "b649008486249ff86a068db6117b94b8c7b8a62b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b649008486249ff86a068db6117b94b8c7b8a62b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b649008486249ff86a068db6117b94b8c7b8a62b"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "c856a935e8b6e60f5c579102c0bc5e698b3a4b9b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f4290962f769d655fb6fbdbe4d54cee5f0b56658", "patch": "@@ -1,3 +1,9 @@\n+2018-08-21  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree.c (find_decls_types_r): Do not check for redundant typedefs.\n+\t* tree.h (is_redundant_typedef): Remove.\n+\t* dwarf2out.c (is_redundant_typedef): Turn into static function.\n+\n 2018-08-21  Jan Hubicka  <jh@suse.cz>\n \n \t* tree.c (free_lang_data_in_decl): Remove types from DECL_CONTEXT"}, {"sha": "edf1ac358963177506a9aa10383f03f48359afb4", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=f4290962f769d655fb6fbdbe4d54cee5f0b56658", "patch": "@@ -102,6 +102,7 @@ static void dwarf2out_source_line (unsigned int, unsigned int, const char *,\n static rtx_insn *last_var_location_insn;\n static rtx_insn *cached_next_real_insn;\n static void dwarf2out_decl (tree);\n+static bool is_redundant_typedef (const_tree);\n \n #ifndef XCOFF_DEBUGGING_INFO\n #define XCOFF_DEBUGGING_INFO 0\n@@ -25831,7 +25832,7 @@ decls_for_scope (tree stmt, dw_die_ref context_die)\n \n /* Is this a typedef we can avoid emitting?  */\n \n-bool\n+static bool\n is_redundant_typedef (const_tree decl)\n {\n   if (TYPE_DECL_IS_STUB (decl))"}, {"sha": "f00a519b3020510bbac40f12871511edfe132834", "filename": "gcc/tree.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=f4290962f769d655fb6fbdbe4d54cee5f0b56658", "patch": "@@ -5565,11 +5565,7 @@ find_decls_types_r (tree *tp, int *ws, void *data)\n \t  tem = TYPE_FIELDS (t);\n \t  while (tem)\n \t    {\n-\t      if (TREE_CODE (tem) == FIELD_DECL\n-\t\t  || (TREE_CODE (tem) == TYPE_DECL\n-\t\t      && !DECL_IGNORED_P (tem)\n-\t\t      && debug_info_level > DINFO_LEVEL_TERSE\n-\t\t      && !is_redundant_typedef (tem)))\n+\t      if (TREE_CODE (tem) == FIELD_DECL)\n \t\tfld_worklist_push (tem, fld);\n \t      tem = TREE_CHAIN (tem);\n \t    }"}, {"sha": "5d4f034e0085f6d6ea1e6cbf196ebefbee09137e", "filename": "gcc/tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4290962f769d655fb6fbdbe4d54cee5f0b56658/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=f4290962f769d655fb6fbdbe4d54cee5f0b56658", "patch": "@@ -5805,7 +5805,6 @@ extern void gt_pch_nx (tree &);\n extern void gt_pch_nx (tree &, gt_pointer_operator, void *);\n \n extern bool nonnull_arg_p (const_tree);\n-extern bool is_redundant_typedef (const_tree);\n extern bool default_is_empty_record (const_tree);\n extern HOST_WIDE_INT arg_int_size_in_bytes (const_tree);\n extern tree arg_size_in_bytes (const_tree);"}]}