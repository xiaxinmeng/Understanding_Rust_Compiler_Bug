{"sha": "ad7f0dfea36432e93344c203e427bcedf75a2644", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQ3ZjBkZmVhMzY0MzJlOTMzNDRjMjAzZTQyN2JjZWRmNzVhMjY0NA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-05-18T07:07:44Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-05-18T07:07:44Z"}, "message": "check_GNU_style.sh: Don't cat empty file\n\n2015-05-18  Tom de Vries  <tom@codesourcery.com>\n\n\t* check_GNU_style.sh (g, ag, vg): Don't cat empty file.\n\nFrom-SVN: r223284", "tree": {"sha": "c848add72a05e4dacbf92c0e178c727d3a64b6a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c848add72a05e4dacbf92c0e178c727d3a64b6a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad7f0dfea36432e93344c203e427bcedf75a2644", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad7f0dfea36432e93344c203e427bcedf75a2644", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad7f0dfea36432e93344c203e427bcedf75a2644", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad7f0dfea36432e93344c203e427bcedf75a2644/comments", "author": null, "committer": null, "parents": [{"sha": "847b6e15110004f440d09ac2206ff112e9bafeaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/847b6e15110004f440d09ac2206ff112e9bafeaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/847b6e15110004f440d09ac2206ff112e9bafeaf"}], "stats": {"total": 34, "additions": 28, "deletions": 6}, "files": [{"sha": "8276c9866d9557f868a5d9f6db890b6b883dcdb1", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad7f0dfea36432e93344c203e427bcedf75a2644/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad7f0dfea36432e93344c203e427bcedf75a2644/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=ad7f0dfea36432e93344c203e427bcedf75a2644", "patch": "@@ -1,3 +1,7 @@\n+2015-05-18  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* check_GNU_style.sh (g, ag, vg): Don't cat empty file.\n+\n 2015-05-18  Tom de Vries  <tom@codesourcery.com>\n \n \t* check_GNU_style.sh (g, ag, vg, col): Declare local vars with local."}, {"sha": "ab59b1e6fc0317f2c7e49b081337a7f990feaad9", "filename": "contrib/check_GNU_style.sh", "status": "modified", "additions": 24, "deletions": 6, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad7f0dfea36432e93344c203e427bcedf75a2644/contrib%2Fcheck_GNU_style.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad7f0dfea36432e93344c203e427bcedf75a2644/contrib%2Fcheck_GNU_style.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcheck_GNU_style.sh?ref=ad7f0dfea36432e93344c203e427bcedf75a2644", "patch": "@@ -84,34 +84,52 @@ grep $format '^+' $files \\\n g (){\n     local msg=\"$1\"\n     local arg=\"$2\"\n+\n+    local found=false\n     cat $inp \\\n \t| egrep --color=always -- \"$arg\" \\\n-\t> $tmp && printf \"\\n$msg\\n\"\n-    cat $tmp\n+\t> \"$tmp\" && found=true\n+\n+    if $found; then\n+\tprintf \"\\n$msg\\n\"\n+\tcat \"$tmp\"\n+    fi\n }\n \n # And Grep\n ag (){\n     local msg=\"$1\"\n     local arg1=\"$2\"\n     local arg2=\"$3\"\n+\n+    local found=false\n     cat $inp \\\n \t| egrep --color=always -- \"$arg1\" \\\n \t| egrep --color=always -- \"$arg2\" \\\n-\t> $tmp && printf \"\\n$msg\\n\"\n-    cat $tmp\n+\t> \"$tmp\" && found=true\n+\n+    if $found; then\n+\tprintf \"\\n$msg\\n\"\n+\tcat \"$tmp\"\n+    fi\n }\n \n # reVerse Grep\n vg (){\n     local msg=\"$1\"\n     local varg=\"$2\"\n     local arg=\"$3\"\n+\n+    local found=false\n     cat $inp \\\n \t| egrep -v -- \"$varg\" \\\n \t| egrep --color=always -- \"$arg\" \\\n-\t> $tmp && printf \"\\n$msg\\n\"\n-    cat $tmp\n+\t> \"$tmp\" && found=true\n+\n+    if $found; then\n+\tprintf \"\\n$msg\\n\"\n+\tcat \"$tmp\"\n+    fi\n }\n \n col (){"}]}