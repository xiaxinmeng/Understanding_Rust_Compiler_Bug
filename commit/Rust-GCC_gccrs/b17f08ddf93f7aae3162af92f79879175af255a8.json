{"sha": "b17f08ddf93f7aae3162af92f79879175af255a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjE3ZjA4ZGRmOTNmN2FhZTMxNjJhZjkyZjc5ODc5MTc1YWYyNTVhOA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2014-05-19T14:41:18Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2014-05-19T14:41:18Z"}, "message": "libitm: Enable aarch64\n\nFrom-SVN: r210615", "tree": {"sha": "eede6322fcbfbaaac7b3d6e11a2b43d7460770bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eede6322fcbfbaaac7b3d6e11a2b43d7460770bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b17f08ddf93f7aae3162af92f79879175af255a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b17f08ddf93f7aae3162af92f79879175af255a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b17f08ddf93f7aae3162af92f79879175af255a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b17f08ddf93f7aae3162af92f79879175af255a8/comments", "author": null, "committer": null, "parents": [{"sha": "1d44def2c2faae5f7e5a58fb57e0c9991a339bd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d44def2c2faae5f7e5a58fb57e0c9991a339bd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d44def2c2faae5f7e5a58fb57e0c9991a339bd5"}], "stats": {"total": 145, "additions": 145, "deletions": 0}, "files": [{"sha": "61ef7f1545212dfd944f534bc99fff3a9828bf1c", "filename": "libitm/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FChangeLog?ref=b17f08ddf93f7aae3162af92f79879175af255a8", "patch": "@@ -1,3 +1,9 @@\n+2014-05-19  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/aarch64/sjlj.S: New file.\n+\t* config/aarch64/target.h: New file.\n+\t* configure.tgt: Enable aarch64.\n+\n 2014-04-09  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* config/generic/asmcfi.h: Also check for"}, {"sha": "4207da96638d7e920637e4118ac8ba949b0a3b3d", "filename": "libitm/config/aarch64/sjlj.S", "status": "added", "additions": 93, "deletions": 0, "changes": 93, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2Fconfig%2Faarch64%2Fsjlj.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2Fconfig%2Faarch64%2Fsjlj.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Faarch64%2Fsjlj.S?ref=b17f08ddf93f7aae3162af92f79879175af255a8", "patch": "@@ -0,0 +1,93 @@\n+/* Copyright (C) 2014 Free Software Foundation, Inc.\n+   Contributed by Richard Henderson <rth@redhat.com>.\n+\n+   This file is part of the GNU Transactional Memory Library (libitm).\n+\n+   Libitm is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3 of the License, or\n+   (at your option) any later version.\n+\n+   Libitm is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+   more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#include \"asmcfi.h\"\n+\n+\t.text\n+\t.align\t2\n+\t.global\t_ITM_beginTransaction\n+\t.type\t_ITM_beginTransaction, %function\n+\n+_ITM_beginTransaction:\n+\tcfi_startproc\n+\tmov\tx1, sp\n+\tstp\tx29, x30, [sp, -11*16]!\n+\tcfi_adjust_cfa_offset(11*16)\n+\tcfi_rel_offset(x29, 0)\n+\tcfi_rel_offset(x30, 8)\n+\tmov\tx29, sp\n+\tstp\tx19, x20, [sp, 1*16]\n+\tstp\tx21, x22, [sp, 2*16]\n+\tstp\tx23, x24, [sp, 3*16]\n+\tstp\tx25, x26, [sp, 4*16]\n+\tstp\tx27, x28, [sp, 5*16]\n+\tstp\td8, d9,   [sp, 6*16]\n+\tstp\td10, d11, [sp, 7*16]\n+\tstp\td12, d13, [sp, 8*16]\n+\tstp\td14, d15, [sp, 9*16]\n+\tstr\tx1, [sp, 10*16]\n+\n+\t/* Invoke GTM_begin_transaction with the struct we just built.  */\n+\tmov\tx1, sp\n+\tbl\tGTM_begin_transaction\n+\n+\t/* Return; we don't need to restore any of the call-saved regs.  */\n+\tldp\tx29, x30, [sp]\n+\tadd     sp, sp, #11*16\n+\tcfi_adjust_cfa_offset(-11*16)\n+\tcfi_restore(x29)\n+\tcfi_restore(x30)\n+\tret\n+\tcfi_endproc\n+\t.size\t_ITM_beginTransaction, . - _ITM_beginTransaction\n+\n+\t.align\t2\n+\t.global\tGTM_longjmp\n+\t.hidden\tGTM_longjmp\n+\t.type\tGTM_longjmp, %function\n+\n+GTM_longjmp:\n+\t/* The first parameter becomes the return value (x0).\n+\t   The third parameter is ignored for now.  */\n+\tcfi_startproc\n+\tldp\tx19, x20, [x1, 1*16]\n+\tldp\tx21, x22, [x1, 2*16]\n+\tldp\tx23, x24, [x1, 3*16]\n+\tldp\tx25, x26, [x1, 4*16]\n+\tldp\tx27, x28, [x1, 5*16]\n+\tldp\td8, d9,   [x1, 6*16]\n+\tldp\td10, d11, [x1, 7*16]\n+\tldp\td12, d13, [x1, 8*16]\n+\tldp\td14, d15, [x1, 9*16]\n+\tldr\tx3, [x1, 10*16]\n+\tldp\tx29, x30, [x1]\n+\tcfi_def_cfa(x1, 0)\n+\tmov\tsp, x3\n+\tbr\tx30\n+\tcfi_endproc\n+\t.size\tGTM_longjmp, . - GTM_longjmp\n+\n+#ifdef __linux__\n+.section .note.GNU-stack, \"\", %progbits\n+#endif"}, {"sha": "cb0f33621e87935edf1518690986ccc116a5b630", "filename": "libitm/config/aarch64/target.h", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2Fconfig%2Faarch64%2Ftarget.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2Fconfig%2Faarch64%2Ftarget.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Faarch64%2Ftarget.h?ref=b17f08ddf93f7aae3162af92f79879175af255a8", "patch": "@@ -0,0 +1,45 @@\n+/* Copyright (C) 2014 Free Software Foundation, Inc.\n+   Contributed by Richard Henderson <rth@redhat.com>.\n+\n+   This file is part of the GNU Transactional Memory Library (libitm).\n+\n+   Libitm is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3 of the License, or\n+   (at your option) any later version.\n+\n+   Libitm is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+   more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+namespace GTM HIDDEN {\n+\n+typedef struct gtm_jmpbuf\n+{\n+  unsigned long long fp;\t/* x29 */\n+  unsigned long long pc;\t/* x30 */\n+  unsigned long long gr[10];\t/* x19-x28 */\n+  unsigned long long vr[8];\t/* d8-d15 */\n+  void *cfa;\n+} gtm_jmpbuf;\n+\n+/* ??? The size of one line in hardware caches (in bytes). */\n+#define HW_CACHELINE_SIZE 128\n+\n+static inline void\n+cpu_relax (void)\n+{\n+  __asm volatile (\"\" : : : \"memory\");\n+}\n+\n+} // namespace GTM"}, {"sha": "44c1a144a236e7dda2307abf03b707ba3c304368", "filename": "libitm/configure.tgt", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17f08ddf93f7aae3162af92f79879175af255a8/libitm%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfigure.tgt?ref=b17f08ddf93f7aae3162af92f79879175af255a8", "patch": "@@ -46,6 +46,7 @@ fi\n # Map the target cpu to an ARCH sub-directory.  At the same time,\n # work out any special compilation flags as necessary.\n case \"${target_cpu}\" in\n+  aarch64*)\t\tARCH=aarch64 ;;\n   alpha*)\t\tARCH=alpha ;;\n   rs6000 | powerpc*)\n \tXCFLAGS=\"${XCFLAGS} -mhtm\""}]}