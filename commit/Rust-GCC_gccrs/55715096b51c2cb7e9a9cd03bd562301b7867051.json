{"sha": "55715096b51c2cb7e9a9cd03bd562301b7867051", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTU3MTUwOTZiNTFjMmNiN2U5YTljZDAzYmQ1NjIzMDFiNzg2NzA1MQ==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2011-08-18T06:44:22Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2011-08-18T06:44:22Z"}, "message": "PR c++/45625 - Template parm name doesn't hide outer class scope's member name\n\ngcc/cp/\n\n\t* pt.c (parameter_of_template_p): Handle comparison with DECLs of\n\ttemplate parameters as created by process_template_parm.\n\ngcc/testsuite/\n\n\t* g++.dg/lookup/hidden-var1.C: New test case.\n\nFrom-SVN: r177846", "tree": {"sha": "5ec23b85c1ce0fb11dd5f2aea800a2ffc8cb265e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ec23b85c1ce0fb11dd5f2aea800a2ffc8cb265e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55715096b51c2cb7e9a9cd03bd562301b7867051", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55715096b51c2cb7e9a9cd03bd562301b7867051", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55715096b51c2cb7e9a9cd03bd562301b7867051", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55715096b51c2cb7e9a9cd03bd562301b7867051/comments", "author": null, "committer": null, "parents": [{"sha": "c96012143a5cd5f589032a6e2ae9526e318cf9ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c96012143a5cd5f589032a6e2ae9526e318cf9ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c96012143a5cd5f589032a6e2ae9526e318cf9ea"}], "stats": {"total": 39, "additions": 37, "deletions": 2}, "files": [{"sha": "f95040f86a101cb34b0a5b46286a1f02eeaf0250", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=55715096b51c2cb7e9a9cd03bd562301b7867051", "patch": "@@ -1,3 +1,9 @@\n+2011-08-18  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/45625\n+\t* pt.c (parameter_of_template_p): Handle comparison with DECLs of\n+\ttemplate parameters as created by process_template_parm.\n+\n 2011-08-16  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/50086"}, {"sha": "ed4fe726c205aa22673407a9b8c379fc8ee511c6", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=55715096b51c2cb7e9a9cd03bd562301b7867051", "patch": "@@ -7890,8 +7890,13 @@ parameter_of_template_p (tree parm, tree templ)\n   parms = INNERMOST_TEMPLATE_PARMS (parms);\n \n   for (i = 0; i < TREE_VEC_LENGTH (parms); ++i)\n-    if (parm == TREE_VALUE (TREE_VEC_ELT (parms, i)))\n-      return true;\n+    {\n+      tree p = TREE_VALUE (TREE_VEC_ELT (parms, i));\n+      if (parm == p\n+\t  || (DECL_INITIAL (parm)\n+\t      && DECL_INITIAL (parm) == DECL_INITIAL (p)))\n+\treturn true;\n+    }\n \n   return false;\n }"}, {"sha": "1bcb0313e4c81d3da51969eaeb96ba2c655ae99b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=55715096b51c2cb7e9a9cd03bd562301b7867051", "patch": "@@ -1,3 +1,8 @@\n+2011-08-18  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/45625\n+\t* g++.dg/lookup/hidden-var1.C: New test case.\n+\n 2011-08-17  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/31461"}, {"sha": "6be32b581b21bccbb60ff13f4875f709bca8c7dc", "filename": "gcc/testsuite/g++.dg/lookup/hidden-var1.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fhidden-var1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55715096b51c2cb7e9a9cd03bd562301b7867051/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fhidden-var1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fhidden-var1.C?ref=55715096b51c2cb7e9a9cd03bd562301b7867051", "patch": "@@ -0,0 +1,19 @@\n+// Origin PR c++/45625\n+// { dg-do compile }\n+\n+struct Outer\n+{\n+  static const int value = 1 ;\n+\n+  template< int value >\n+  struct Inner\n+  {\n+    static const int*\n+    get_value()\n+    { \n+      return &value ;// { dg-error \"lvalue required\" }\n+    }\n+  };\n+};\n+\n+template class Outer::Inner<2>;"}]}