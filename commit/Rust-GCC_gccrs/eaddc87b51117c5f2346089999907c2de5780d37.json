{"sha": "eaddc87b51117c5f2346089999907c2de5780d37", "node_id": "C_kwDOANBUbNoAKGVhZGRjODdiNTExMTdjNWYyMzQ2MDg5OTk5OTA3YzJkZTU3ODBkMzc", "commit": {"author": {"name": "Eugene Rozenfeld", "email": "erozen@microsoft.com", "date": "2022-09-16T23:25:25Z"}, "committer": {"name": "Eugene Rozenfeld", "email": "erozen@microsoft.com", "date": "2022-09-16T23:36:11Z"}, "message": "Fix for an AutoFDO test.\n\nAfter https://gcc.gnu.org/git/?p=gcc.git;a=commit;h=c17975d81aaed49ff759c20c68b31304a6953d58\nthe expected inlining in indir-call--prof-2.c test happens during afdo phase instead of einline.\nThis patch adjusts the test accordingly.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.dg/tree-prof/indir-call-prof-2.c: Fix dg-final-use-autofdo.", "tree": {"sha": "ebf2a6b4ac003624643d1aa92cb5a90e68ffec65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebf2a6b4ac003624643d1aa92cb5a90e68ffec65"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eaddc87b51117c5f2346089999907c2de5780d37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaddc87b51117c5f2346089999907c2de5780d37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eaddc87b51117c5f2346089999907c2de5780d37", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaddc87b51117c5f2346089999907c2de5780d37/comments", "author": {"login": "erozenfeld", "id": 10624223, "node_id": "MDQ6VXNlcjEwNjI0MjIz", "avatar_url": "https://avatars.githubusercontent.com/u/10624223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erozenfeld", "html_url": "https://github.com/erozenfeld", "followers_url": "https://api.github.com/users/erozenfeld/followers", "following_url": "https://api.github.com/users/erozenfeld/following{/other_user}", "gists_url": "https://api.github.com/users/erozenfeld/gists{/gist_id}", "starred_url": "https://api.github.com/users/erozenfeld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erozenfeld/subscriptions", "organizations_url": "https://api.github.com/users/erozenfeld/orgs", "repos_url": "https://api.github.com/users/erozenfeld/repos", "events_url": "https://api.github.com/users/erozenfeld/events{/privacy}", "received_events_url": "https://api.github.com/users/erozenfeld/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erozenfeld", "id": 10624223, "node_id": "MDQ6VXNlcjEwNjI0MjIz", "avatar_url": "https://avatars.githubusercontent.com/u/10624223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erozenfeld", "html_url": "https://github.com/erozenfeld", "followers_url": "https://api.github.com/users/erozenfeld/followers", "following_url": "https://api.github.com/users/erozenfeld/following{/other_user}", "gists_url": "https://api.github.com/users/erozenfeld/gists{/gist_id}", "starred_url": "https://api.github.com/users/erozenfeld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erozenfeld/subscriptions", "organizations_url": "https://api.github.com/users/erozenfeld/orgs", "repos_url": "https://api.github.com/users/erozenfeld/repos", "events_url": "https://api.github.com/users/erozenfeld/events{/privacy}", "received_events_url": "https://api.github.com/users/erozenfeld/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e80a1d164d1f996ad08a512c000025a7c2ca893", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e80a1d164d1f996ad08a512c000025a7c2ca893", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e80a1d164d1f996ad08a512c000025a7c2ca893"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "1d64d9f3f62276bbe48d51d2cd14253956550ade", "filename": "gcc/testsuite/gcc.dg/tree-prof/indir-call-prof-2.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaddc87b51117c5f2346089999907c2de5780d37/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Findir-call-prof-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaddc87b51117c5f2346089999907c2de5780d37/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Findir-call-prof-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Findir-call-prof-2.c?ref=eaddc87b51117c5f2346089999907c2de5780d37", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-options \"-O2 -fno-early-inlining -fdump-ipa-profile-optimized -fdump-tree-einline-optimized\" } */\n+/* { dg-options \"-O2 -fno-early-inlining -fdump-ipa-profile-optimized -fdump-ipa-afdo-optimized\" } */\n volatile int one;\n static int\n add1 (int val)\n@@ -31,5 +31,5 @@ main (void)\n }\n /* { dg-final-use-not-autofdo { scan-ipa-dump \"Indirect call -> direct call.* add1 .will resolve by ipa-profile\" \"profile\"} } */\n /* { dg-final-use-not-autofdo { scan-ipa-dump \"Indirect call -> direct call.* sub1 .will resolve by ipa-profile\" \"profile\"} } */\n-/* { dg-final-use-autofdo { scan-tree-dump \"Inlining add1/1 into main/4.\" \"einline\"} } */\n-/* { dg-final-use-autofdo { scan-tree-dump \"Inlining sub1/2 into main/4.\" \"einline\"} } */\n+/* { dg-final-use-autofdo { scan-ipa-dump \"Inlining add1/1 into main/4.\" \"afdo\"} } */\n+/* { dg-final-use-autofdo { scan-ipa-dump \"Inlining sub1/2 into main/4.\" \"afdo\"} } */"}]}