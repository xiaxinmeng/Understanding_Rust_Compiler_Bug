{"sha": "f70308d411efebfce8f15b54fedd21c17d44740c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjcwMzA4ZDQxMWVmZWJmY2U4ZjE1YjU0ZmVkZDIxYzE3ZDQ0NzQwYw==", "commit": {"author": {"name": "Georg-Johann Lay", "email": "avr@gjlay.de", "date": "2012-10-08T08:32:46Z"}, "committer": {"name": "Georg-Johann Lay", "email": "gjl@gcc.gnu.org", "date": "2012-10-08T08:32:46Z"}, "message": "re PR target/54815 ([avr] missed optimization with operations with constant operands)\n\n\tPR target/54815\n\t* config/avr/avr.md (*add<mode>3, add<mode>3, addpsi3): Make\n\tconstraint alternative \"r,0,r\" slighly more expensive.\n\t(sub<mode>3,\n\t(andqi3, andhi3, andpsi3, andsi3): Ditto.\n\t(iorqi3, iorhi3, iorpsi3, iorsi3): Ditto.\n\t(xorhi3, xorpsi3, xorsi3): Ditto.\n\nFrom-SVN: r192198", "tree": {"sha": "ef82840ab6d62bdf028d053d48d6edabdaae0c1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef82840ab6d62bdf028d053d48d6edabdaae0c1f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f70308d411efebfce8f15b54fedd21c17d44740c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f70308d411efebfce8f15b54fedd21c17d44740c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f70308d411efebfce8f15b54fedd21c17d44740c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f70308d411efebfce8f15b54fedd21c17d44740c/comments", "author": null, "committer": {"login": "sprintersb", "id": 8905355, "node_id": "MDQ6VXNlcjg5MDUzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/8905355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sprintersb", "html_url": "https://github.com/sprintersb", "followers_url": "https://api.github.com/users/sprintersb/followers", "following_url": "https://api.github.com/users/sprintersb/following{/other_user}", "gists_url": "https://api.github.com/users/sprintersb/gists{/gist_id}", "starred_url": "https://api.github.com/users/sprintersb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sprintersb/subscriptions", "organizations_url": "https://api.github.com/users/sprintersb/orgs", "repos_url": "https://api.github.com/users/sprintersb/repos", "events_url": "https://api.github.com/users/sprintersb/events{/privacy}", "received_events_url": "https://api.github.com/users/sprintersb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b122a75f8fd79439bda5e0e5d3a96d4fc9a25e3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b122a75f8fd79439bda5e0e5d3a96d4fc9a25e3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b122a75f8fd79439bda5e0e5d3a96d4fc9a25e3e"}], "stats": {"total": 44, "additions": 27, "deletions": 17}, "files": [{"sha": "e87903184529c2c3eed6f73f8e5d3104512c0b49", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f70308d411efebfce8f15b54fedd21c17d44740c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f70308d411efebfce8f15b54fedd21c17d44740c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f70308d411efebfce8f15b54fedd21c17d44740c", "patch": "@@ -1,3 +1,13 @@\n+2012-10-08  Georg-Johann Lay  <avr@gjlay.de>\n+\n+\tPR target/54815\n+\t* config/avr/avr.md (*add<mode>3, add<mode>3, addpsi3): Make\n+\tconstraint alternative \"r,0,r\" slighly more expensive.\n+\t(sub<mode>3,\n+\t(andqi3, andhi3, andpsi3, andsi3): Ditto.\n+\t(iorqi3, iorhi3, iorpsi3, iorsi3): Ditto.\n+\t(xorhi3, xorpsi3, xorsi3): Ditto.\n+\n 2012-10-08  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/54760"}, {"sha": "8b071f02af145b113445935de2024373e15b82e7", "filename": "gcc/config/avr/avr.md", "status": "modified", "additions": 17, "deletions": 17, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f70308d411efebfce8f15b54fedd21c17d44740c/gcc%2Fconfig%2Favr%2Favr.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f70308d411efebfce8f15b54fedd21c17d44740c/gcc%2Fconfig%2Favr%2Favr.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.md?ref=f70308d411efebfce8f15b54fedd21c17d44740c", "patch": "@@ -1177,7 +1177,7 @@\n ;; \"*addhq3\" \"*adduhq3\"\n ;; \"*addha3\" \"*adduha3\"\n (define_insn \"*add<mode>3\"\n-  [(set (match_operand:ALL2 0 \"register_operand\"                    \"=?r,d,!w    ,d\")\n+  [(set (match_operand:ALL2 0 \"register_operand\"                   \"=??r,d,!w    ,d\")\n         (plus:ALL2 (match_operand:ALL2 1 \"register_operand\"          \"%0,0,0     ,0\")\n                    (match_operand:ALL2 2 \"nonmemory_or_const_operand\" \"r,s,IJ YIJ,n Ynn\")))]\n   \"\"\n@@ -1244,7 +1244,7 @@\n ;; \"addsq3\" \"addusq3\"\n ;; \"addsa3\" \"addusa3\"\n (define_insn \"add<mode>3\"\n-  [(set (match_operand:ALL4 0 \"register_operand\"            \"=r,d ,r\")\n+  [(set (match_operand:ALL4 0 \"register_operand\"          \"=??r,d ,r\")\n         (plus:ALL4 (match_operand:ALL4 1 \"register_operand\" \"%0,0 ,0\")\n                    (match_operand:ALL4 2 \"nonmemory_operand\" \"r,i ,n Ynn\")))\n    (clobber (match_scratch:QI 3                             \"=X,X ,&d\"))]\n@@ -1302,7 +1302,7 @@\n    (set_attr \"cc\" \"set_n\")])\n \n (define_insn \"addpsi3\"\n-  [(set (match_operand:PSI 0 \"register_operand\"           \"=r,d ,d,r\")\n+  [(set (match_operand:PSI 0 \"register_operand\"         \"=??r,d ,d,r\")\n         (plus:PSI (match_operand:PSI 1 \"register_operand\" \"%0,0 ,0,0\")\n                   (match_operand:PSI 2 \"nonmemory_operand\" \"r,s ,n,n\")))\n    (clobber (match_scratch:QI 3                           \"=X,X ,X,&d\"))]\n@@ -1356,7 +1356,7 @@\n ;; \"subqi3\"\n ;; \"subqq3\" \"subuqq3\"\n (define_insn \"sub<mode>3\"\n-  [(set (match_operand:ALL1 0 \"register_operand\"                      \"=r,d    ,r  ,r  ,r  ,r\")\n+  [(set (match_operand:ALL1 0 \"register_operand\"                    \"=??r,d    ,r  ,r  ,r  ,r\")\n         (minus:ALL1 (match_operand:ALL1 1 \"register_operand\"           \"0,0    ,0  ,0  ,0  ,0\")\n                     (match_operand:ALL1 2 \"nonmemory_or_const_operand\" \"r,n Ynn,Y01,Ym1,Y02,Ym2\")))]\n   \"\"\n@@ -1374,7 +1374,7 @@\n ;; \"subhq3\" \"subuhq3\"\n ;; \"subha3\" \"subuha3\"\n (define_insn \"sub<mode>3\"\n-  [(set (match_operand:ALL2 0 \"register_operand\"                      \"=r,d    ,*r\")\n+  [(set (match_operand:ALL2 0 \"register_operand\"                    \"=??r,d    ,*r\")\n         (minus:ALL2 (match_operand:ALL2 1 \"register_operand\"           \"0,0    ,0\")\n                     (match_operand:ALL2 2 \"nonmemory_or_const_operand\" \"r,i Ynn,Ynn\")))\n    (clobber (match_scratch:QI 3                                       \"=X,X    ,&d\"))]\n@@ -1411,7 +1411,7 @@\n ;; \"subsq3\" \"subusq3\"\n ;; \"subsa3\" \"subusa3\"\n (define_insn \"sub<mode>3\"\n-  [(set (match_operand:ALL4 0 \"register_operand\"                      \"=r,d    ,r\")\n+  [(set (match_operand:ALL4 0 \"register_operand\"                    \"=??r,d    ,r\")\n         (minus:ALL4 (match_operand:ALL4 1 \"register_operand\"           \"0,0    ,0\")\n                     (match_operand:ALL4 2 \"nonmemory_or_const_operand\" \"r,n Ynn,Ynn\")))\n    (clobber (match_scratch:QI 3                                       \"=X,X    ,&d\"))]\n@@ -2932,7 +2932,7 @@\n ; and\n \n (define_insn \"andqi3\"\n-  [(set (match_operand:QI 0 \"register_operand\" \"=r,d\")\n+  [(set (match_operand:QI 0 \"register_operand\"       \"=??r,d\")\n         (and:QI (match_operand:QI 1 \"register_operand\" \"%0,0\")\n                 (match_operand:QI 2 \"nonmemory_operand\" \"r,i\")))]\n   \"\"\n@@ -2943,7 +2943,7 @@\n    (set_attr \"cc\" \"set_zn,set_zn\")])\n \n (define_insn \"andhi3\"\n-  [(set (match_operand:HI 0 \"register_operand\"         \"=r,d,d,r  ,r\")\n+  [(set (match_operand:HI 0 \"register_operand\"       \"=??r,d,d,r  ,r\")\n         (and:HI (match_operand:HI 1 \"register_operand\" \"%0,0,0,0  ,0\")\n                 (match_operand:HI 2 \"nonmemory_operand\" \"r,s,n,Ca2,n\")))\n    (clobber (match_scratch:QI 3                        \"=X,X,X,X  ,&d\"))]\n@@ -2961,7 +2961,7 @@\n    (set_attr \"cc\" \"set_n,set_n,clobber,clobber,clobber\")])\n \n (define_insn \"andpsi3\"\n-  [(set (match_operand:PSI 0 \"register_operand\"          \"=r,d,r  ,r\")\n+  [(set (match_operand:PSI 0 \"register_operand\"        \"=??r,d,r  ,r\")\n         (and:PSI (match_operand:PSI 1 \"register_operand\" \"%0,0,0  ,0\")\n                  (match_operand:PSI 2 \"nonmemory_operand\" \"r,n,Ca3,n\")))\n    (clobber (match_scratch:QI 3                          \"=X,X,X  ,&d\"))]\n@@ -2979,7 +2979,7 @@\n    (set_attr \"cc\" \"set_n,clobber,clobber,clobber\")])\n \n (define_insn \"andsi3\"\n-  [(set (match_operand:SI 0 \"register_operand\"         \"=r,d,r  ,r\")\n+  [(set (match_operand:SI 0 \"register_operand\"       \"=??r,d,r  ,r\")\n         (and:SI (match_operand:SI 1 \"register_operand\" \"%0,0,0  ,0\")\n                 (match_operand:SI 2 \"nonmemory_operand\" \"r,n,Ca4,n\")))\n    (clobber (match_scratch:QI 3                        \"=X,X,X  ,&d\"))]\n@@ -3014,7 +3014,7 @@\n ;; ior\n \n (define_insn \"iorqi3\"\n-  [(set (match_operand:QI 0 \"register_operand\" \"=r,d\")\n+  [(set (match_operand:QI 0 \"register_operand\"       \"=??r,d\")\n         (ior:QI (match_operand:QI 1 \"register_operand\" \"%0,0\")\n                 (match_operand:QI 2 \"nonmemory_operand\" \"r,i\")))]\n   \"\"\n@@ -3025,7 +3025,7 @@\n    (set_attr \"cc\" \"set_zn,set_zn\")])\n \n (define_insn \"iorhi3\"\n-  [(set (match_operand:HI 0 \"register_operand\"         \"=r,d,d,r  ,r\")\n+  [(set (match_operand:HI 0 \"register_operand\"       \"=??r,d,d,r  ,r\")\n         (ior:HI (match_operand:HI 1 \"register_operand\" \"%0,0,0,0  ,0\")\n                 (match_operand:HI 2 \"nonmemory_operand\" \"r,s,n,Co2,n\")))\n    (clobber (match_scratch:QI 3                        \"=X,X,X,X  ,&d\"))]\n@@ -3043,7 +3043,7 @@\n    (set_attr \"cc\" \"set_n,set_n,clobber,clobber,clobber\")])\n \n (define_insn \"iorpsi3\"\n-  [(set (match_operand:PSI 0 \"register_operand\"          \"=r,d,r  ,r\")\n+  [(set (match_operand:PSI 0 \"register_operand\"        \"=??r,d,r  ,r\")\n         (ior:PSI (match_operand:PSI 1 \"register_operand\" \"%0,0,0  ,0\")\n                  (match_operand:PSI 2 \"nonmemory_operand\" \"r,n,Co3,n\")))\n    (clobber (match_scratch:QI 3                          \"=X,X,X  ,&d\"))]\n@@ -3061,7 +3061,7 @@\n    (set_attr \"cc\" \"set_n,clobber,clobber,clobber\")])\n \n (define_insn \"iorsi3\"\n-  [(set (match_operand:SI 0 \"register_operand\"         \"=r,d,r  ,r\")\n+  [(set (match_operand:SI 0 \"register_operand\"       \"=??r,d,r  ,r\")\n         (ior:SI (match_operand:SI 1 \"register_operand\" \"%0,0,0  ,0\")\n                 (match_operand:SI 2 \"nonmemory_operand\" \"r,n,Co4,n\")))\n    (clobber (match_scratch:QI 3                        \"=X,X,X  ,&d\"))]\n@@ -3092,7 +3092,7 @@\n    (set_attr \"cc\" \"set_zn\")])\n \n (define_insn \"xorhi3\"\n-  [(set (match_operand:HI 0 \"register_operand\"         \"=r,r  ,r\")\n+  [(set (match_operand:HI 0 \"register_operand\"       \"=??r,r  ,r\")\n         (xor:HI (match_operand:HI 1 \"register_operand\" \"%0,0  ,0\")\n                 (match_operand:HI 2 \"nonmemory_operand\" \"r,Cx2,n\")))\n    (clobber (match_scratch:QI 3                        \"=X,X  ,&d\"))]\n@@ -3108,7 +3108,7 @@\n    (set_attr \"cc\" \"set_n,clobber,clobber\")])\n \n (define_insn \"xorpsi3\"\n-  [(set (match_operand:PSI 0 \"register_operand\"          \"=r,r  ,r\")\n+  [(set (match_operand:PSI 0 \"register_operand\"        \"=??r,r  ,r\")\n         (xor:PSI (match_operand:PSI 1 \"register_operand\" \"%0,0  ,0\")\n                  (match_operand:PSI 2 \"nonmemory_operand\" \"r,Cx3,n\")))\n    (clobber (match_scratch:QI 3                          \"=X,X  ,&d\"))]\n@@ -3126,7 +3126,7 @@\n    (set_attr \"cc\" \"set_n,clobber,clobber\")])\n \n (define_insn \"xorsi3\"\n-  [(set (match_operand:SI 0 \"register_operand\"         \"=r,r  ,r\")\n+  [(set (match_operand:SI 0 \"register_operand\"       \"=??r,r  ,r\")\n         (xor:SI (match_operand:SI 1 \"register_operand\" \"%0,0  ,0\")\n                 (match_operand:SI 2 \"nonmemory_operand\" \"r,Cx4,n\")))\n    (clobber (match_scratch:QI 3                        \"=X,X  ,&d\"))]"}]}