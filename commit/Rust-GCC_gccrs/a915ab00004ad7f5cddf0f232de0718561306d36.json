{"sha": "a915ab00004ad7f5cddf0f232de0718561306d36", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTkxNWFiMDAwMDRhZDdmNWNkZGYwZjIzMmRlMDcxODU2MTMwNmQzNg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2009-07-19T10:27:07Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2009-07-19T10:27:07Z"}, "message": "re PR tree-optimization/40676 (internal compiler error: verify_ssa error: definition in block 5 does not dominate use in block 7)\n\n\tPR tree-optimization/40676\n\t* tree-ssa-dce.c (eliminate_unnecessary_stmts): Do renaming on all\n\tvirtual PHIs in empty BBs.\n\n\t* gcc.c-torture/compile/pr40676.c: New testcase.\n\nFrom-SVN: r149789", "tree": {"sha": "18a19d1d0d3ba0f9e6bb73f587b8903c2c74a669", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18a19d1d0d3ba0f9e6bb73f587b8903c2c74a669"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a915ab00004ad7f5cddf0f232de0718561306d36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a915ab00004ad7f5cddf0f232de0718561306d36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a915ab00004ad7f5cddf0f232de0718561306d36", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a915ab00004ad7f5cddf0f232de0718561306d36/comments", "author": null, "committer": null, "parents": [{"sha": "9d43fad9a8360262590cb24df6945bee7a3bc0c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d43fad9a8360262590cb24df6945bee7a3bc0c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d43fad9a8360262590cb24df6945bee7a3bc0c2"}], "stats": {"total": 50, "additions": 48, "deletions": 2}, "files": [{"sha": "c88b30b0eaaddf10f1105d94061a17744f3c1993", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a915ab00004ad7f5cddf0f232de0718561306d36", "patch": "@@ -1,3 +1,9 @@\n+2009-07-19  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimization/40676\n+\t* tree-ssa-dce.c (eliminate_unnecessary_stmts): Do renaming on all\n+\tvirtual PHIs in empty BBs.\n+\n 2009-07-18  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* combine.c (make_compound_operation) <SUBREG>: If force_to_mode"}, {"sha": "6951c22e5bcad1aba72618b37af2c43133bc4357", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a915ab00004ad7f5cddf0f232de0718561306d36", "patch": "@@ -1,3 +1,8 @@\n+2009-07-19  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimization/40676\n+\t* gcc.c-torture/compile/pr40676.c: New testcase.\n+\n 2009-07-18  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* gcc.target/mips/ext-2.c: New test."}, {"sha": "b0426288292bb4004e4d08fb4a7f3bfffe1eecbd", "filename": "gcc/testsuite/gcc.c-torture/compile/pr40676.c", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr40676.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr40676.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr40676.c?ref=a915ab00004ad7f5cddf0f232de0718561306d36", "patch": "@@ -0,0 +1,33 @@\n+extern int f1();\n+extern int f2(void*);\n+extern void* f3(int);\n+int xmsih;\n+typedef unsigned short XWCHAR;\n+\n+inline unsigned int xstrlenW( const XWCHAR *str )\n+{\n+    const XWCHAR *s = str;\n+    while (*s) s++;\n+    return s - str;\n+}\n+\n+\n+static int msi_dialog_register_class( void )\n+{\n+    int cls;\n+\n+    if( !f2( &cls ) )\n+        return 0;\n+    if( !f2( &cls ) )\n+        return 0;\n+    xmsih = f1();\n+    if( !xmsih )\n+        return 0;\n+    return 1;\n+}\n+\n+void *xmsi_dialog_create(const XWCHAR* szDialogName)\n+{\n+    msi_dialog_register_class();\n+    return f3(xstrlenW(szDialogName));\n+}"}, {"sha": "86134ad0970718f9f52b32c882e6d1ce2f88687e", "filename": "gcc/tree-ssa-dce.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2Ftree-ssa-dce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a915ab00004ad7f5cddf0f232de0718561306d36/gcc%2Ftree-ssa-dce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dce.c?ref=a915ab00004ad7f5cddf0f232de0718561306d36", "patch": "@@ -1137,7 +1137,8 @@ eliminate_unnecessary_stmts (void)\n       for (bb = ENTRY_BLOCK_PTR->next_bb; bb != EXIT_BLOCK_PTR; bb = next_bb)\n \t{\n \t  next_bb = bb->next_bb;\n-\t  if (!(bb->flags & BB_REACHABLE))\n+\t  if (!TEST_BIT (bb_contains_live_stmts, bb->index)\n+\t      || !(bb->flags & BB_REACHABLE))\n \t    {\n \t      for (gsi = gsi_start_phis (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n \t\tif (!is_gimple_reg (gimple_phi_result (gsi_stmt (gsi))))\n@@ -1159,7 +1160,8 @@ eliminate_unnecessary_stmts (void)\n \t\t    if (found)\n \t\t      mark_virtual_phi_result_for_renaming (gsi_stmt (gsi));\n \t\t  }\n-\t      delete_basic_block (bb);\n+\t      if (!(bb->flags & BB_REACHABLE))\n+\t        delete_basic_block (bb);\n \t    }\n \t}\n     }"}]}