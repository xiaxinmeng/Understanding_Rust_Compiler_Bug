{"sha": "a1e16658ba99e09a7a6074547c63ee0d17dd4204", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTFlMTY2NThiYTk5ZTA5YTdhNjA3NDU0N2M2M2VlMGQxN2RkNDIwNA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-04-02T09:25:18Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-04-02T09:25:18Z"}, "message": "[multiple changes]\n\n2012-04-02  Jose Ruiz  <ruiz@adacore.com>\n\n\t* gnat_ugn.texi: Add some minimal documentation about how to\n\tuse GNATtest for cross platforms.\n\n2012-04-02  Vincent Celier  <celier@adacore.com>\n\n\t* opt.ads (Object_Path_File_Name): New variable.\n\t* prj-attr.adb: New Compiler attribute Object_Path_Switches.\n\t* prj-nmsc.adb (Process_Compiler): Recognize new attribute\n\tObject_Path_Switches.\n\t* snames.ads-tmpl: New standard name Object_Path_Switches.\n\t* switch-c.adb (Scan_Front_End_Switches): Recognize new switch\n\t-gnateO= and put its value in Opt.Object_Path_File_Name.\n\nFrom-SVN: r186072", "tree": {"sha": "03a63fff1d28e0be853104923b0c74b9e9d253e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03a63fff1d28e0be853104923b0c74b9e9d253e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a1e16658ba99e09a7a6074547c63ee0d17dd4204", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1e16658ba99e09a7a6074547c63ee0d17dd4204", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1e16658ba99e09a7a6074547c63ee0d17dd4204", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1e16658ba99e09a7a6074547c63ee0d17dd4204/comments", "author": null, "committer": null, "parents": [{"sha": "a429e6b3c30e3d917f1e1145146b18d57607cf58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a429e6b3c30e3d917f1e1145146b18d57607cf58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a429e6b3c30e3d917f1e1145146b18d57607cf58"}], "stats": {"total": 75, "additions": 72, "deletions": 3}, "files": [{"sha": "2e4f8e52721a52980986e8189cebe37ee209ac91", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a1e16658ba99e09a7a6074547c63ee0d17dd4204", "patch": "@@ -1,3 +1,18 @@\n+2012-04-02  Jose Ruiz  <ruiz@adacore.com>\n+\n+\t* gnat_ugn.texi: Add some minimal documentation about how to\n+\tuse GNATtest for cross platforms.\n+\n+2012-04-02  Vincent Celier  <celier@adacore.com>\n+\n+\t* opt.ads (Object_Path_File_Name): New variable.\n+\t* prj-attr.adb: New Compiler attribute Object_Path_Switches.\n+\t* prj-nmsc.adb (Process_Compiler): Recognize new attribute\n+\tObject_Path_Switches.\n+\t* snames.ads-tmpl: New standard name Object_Path_Switches.\n+\t* switch-c.adb (Scan_Front_End_Switches): Recognize new switch\n+\t-gnateO= and put its value in Opt.Object_Path_File_Name.\n+\n 2012-04-02  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* exp_ch7.adb (Process_Declarations): Detect a case where"}, {"sha": "9ea8f7c76a7041d9228df65d7c2ad0a140d51335", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 25, "deletions": 2, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=a1e16658ba99e09a7a6074547c63ee0d17dd4204", "patch": "@@ -94,10 +94,12 @@ Texts.  A copy of the license is included in the section entitled\n \n @ifset unw\n @set PLATFORM\n+@set TITLESUFFIX\n @end ifset\n \n @ifset vms\n @set PLATFORM OpenVMS\n+@set TITLESUFFIX for @value{PLATFORM}\n @end ifset\n \n @c @ovar(ARG)\n@@ -115,7 +117,7 @@ Texts.  A copy of the license is included in the section entitled\n @c of the @ovar macro have been expanded inline.\n \n \n-@settitle @value{EDITION} User's Guide @value{PLATFORM}\n+@settitle @value{EDITION} User's Guide @value{TITLESUFFIX}\n @dircategory GNU Ada tools\n @direntry\n * @value{EDITION} User's Guide: (gnat_ugn). @value{PLATFORM}\n@@ -484,6 +486,7 @@ Creating Unit Tests Using gnattest\n * Tagged Types Substitutability Testing::\n * Testing with Contracts::\n * Additional Tests::\n+* Support for other platforms/run-times::\n * Current Limitations::\n \n Other Utility Programs\n@@ -3077,7 +3080,7 @@ $ gnatlink ada_unit file1.o file2.o --LINK=./my_script\n Where CC is the name of the non-GNU C++ compiler.\n \n If the @code{zero cost} exception mechanism is used, and the platform\n-supports automatic registration of exception tables (e.g.@: Solaris or IRIX),\n+supports automatic registration of exception tables (e.g.@: Solaris),\n paths to more objects are required:\n \n @smallexample\n@@ -17988,6 +17991,7 @@ default location.\n * Tagged Types Substitutability Testing::\n * Testing with Contracts::\n * Additional Tests::\n+* Support for other platforms/run-times::\n * Current Limitations::\n @end menu\n \n@@ -18474,6 +18478,25 @@ gnatmake -Pmixing/test_driver.gpr\n mixing/test_runner\n @end smallexample\n \n+@node Support for other platforms/run-times\n+@section Support for other platforms/run-times\n+\n+@noindent\n+@command{gnattest} can be used to generate the test harness for platforms\n+and run-time libraries others than the default native target with the\n+default full run-time. For example, when using a limited run-time library\n+such as Zero FootPrint (ZFP), a simplified harness is generated.\n+\n+Two variables are used to tell the underlying AUnit framework how to generate\n+the test harness: @code{PLATFORM}, which identifies the target, and\n+@code{RUNTIME}, used to determine the run-time library for which the harness\n+is generated. For example, the following options are used to generate the\n+AUnit test harness for a PowerPC ELF target using the ZFP run-time library:\n+\n+@smallexample\n+gnattest -Psimple.gpr -XPLATFORM=powerpc-elf -XRUNTIME=zfp\n+@end smallexample\n+\n @node Current Limitations\n @section Current Limitations\n "}, {"sha": "e59e67eb8e8ea1d6f0ac13548e783dae90494d4a", "filename": "gcc/ada/opt.ads", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fopt.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fopt.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fopt.ads?ref=a1e16658ba99e09a7a6074547c63ee0d17dd4204", "patch": "@@ -987,6 +987,11 @@ package Opt is\n    --  GNATMAKE\n    --  Set to True when an object directory is specified with option -D\n \n+   Object_Path_File_Name : String_Ptr := null;\n+   --  GNAT2WHY\n+   --  Path of the temporary file that contains a list of object directories\n+   --  passed by -gnateO=<obj_pat_file>.\n+\n    One_Compilation_Per_Obj_Dir : Boolean := False;\n    --  GNATMAKE, GPRBUILD\n    --  Set to True with switch --single-compile-per-obj-dir. When True, there"}, {"sha": "8d3d855e789069da6c9138db62da26bc6bedb1b4", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=a1e16658ba99e09a7a6074547c63ee0d17dd4204", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2011, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2012, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -226,6 +226,7 @@ package body Prj.Attr is\n    \"Lainclude_switches#\" &\n    \"Sainclude_path#\" &\n    \"Sainclude_path_file#\" &\n+   \"Laobject_path_switches#\" &\n \n    --  package Builder\n "}, {"sha": "01b39c69d734a5e63186a1243cdd622a64f4af9d", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=a1e16658ba99e09a7a6074547c63ee0d17dd4204", "patch": "@@ -1440,6 +1440,12 @@ package body Prj.Nmsc is\n                                 From_List => Element.Value.Values,\n                                 In_Tree   => Data.Tree);\n \n+                        when Name_Object_Path_Switches =>\n+                           Put (Into_List =>\n+                                  Lang_Index.Config.Object_Path_Switches,\n+                                From_List => Element.Value.Values,\n+                                In_Tree   => Data.Tree);\n+\n                         --  Attribute Compiler_Pic_Option (<language>)\n \n                         when Name_Pic_Option =>"}, {"sha": "c85fdd01d19ea177f49aa300efa00ed738af130d", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=a1e16658ba99e09a7a6074547c63ee0d17dd4204", "patch": "@@ -1199,6 +1199,7 @@ package Snames is\n    Name_Object_File_Switches               : constant Name_Id := N + $;\n    Name_Object_Generated                   : constant Name_Id := N + $;\n    Name_Object_List                        : constant Name_Id := N + $;\n+   Name_Object_Path_Switches               : constant Name_Id := N + $;\n    Name_Objects_Linked                     : constant Name_Id := N + $;\n    Name_Objects_Path                       : constant Name_Id := N + $;\n    Name_Objects_Path_File                  : constant Name_Id := N + $;"}, {"sha": "7cb0ee06a6517a845857c4b7ee2ca50b40a6affa", "filename": "gcc/ada/switch-c.adb", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fswitch-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1e16658ba99e09a7a6074547c63ee0d17dd4204/gcc%2Fada%2Fswitch-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-c.adb?ref=a1e16658ba99e09a7a6074547c63ee0d17dd4204", "patch": "@@ -516,6 +516,24 @@ package body Switch.C is\n                        new String'(Switch_Chars (Ptr .. Max));\n                      return;\n \n+                  --  -gnateO= (object path file)\n+\n+                  when 'O' =>\n+                     Store_Switch := False;\n+                     Ptr := Ptr + 1;\n+\n+                     --  Check for '='\n+\n+                     if Ptr >= Max or else Switch_Chars (Ptr) /= '=' then\n+                        Bad_Switch (\"-gnateO\");\n+\n+                     else\n+                        Object_Path_File_Name :=\n+                          new String'(Switch_Chars (Ptr + 1 .. Max));\n+                     end if;\n+\n+                     return;\n+\n                   --  -gnatep (preprocessing data file)\n \n                   when 'p' =>"}]}