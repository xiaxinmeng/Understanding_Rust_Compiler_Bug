{"sha": "d7f30833549aa0378f41f8cdb132cff5826847fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDdmMzA4MzM1NDlhYTAzNzhmNDFmOGNkYjEzMmNmZjU4MjY4NDdmZQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2004-05-13T15:50:02Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2004-05-13T15:50:02Z"}, "message": "abi.html: Document effect of -fabi-version on value of __GXX_ABI_VERSION...\n\n2004-05-13  Jonathan Wakely  <redi@gcc.gnu.org>\n\n\t* docs/html/abi.html: Document effect of -fabi-version on value\n\tof __GXX_ABI_VERSION, and that it's defined in c-cppbuiltin.c.\n\tFix markup.\n\nFrom-SVN: r81794", "tree": {"sha": "f092d4f53aa906b6aebc2a323c6213028c88ab23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f092d4f53aa906b6aebc2a323c6213028c88ab23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d7f30833549aa0378f41f8cdb132cff5826847fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7f30833549aa0378f41f8cdb132cff5826847fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7f30833549aa0378f41f8cdb132cff5826847fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7f30833549aa0378f41f8cdb132cff5826847fe/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "520f0c480386a790eb5a99a1d3295dd234ea4bce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/520f0c480386a790eb5a99a1d3295dd234ea4bce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/520f0c480386a790eb5a99a1d3295dd234ea4bce"}], "stats": {"total": 181, "additions": 105, "deletions": 76}, "files": [{"sha": "8e8ad9adec6169c037faf0e7f8c96520f38f34b2", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7f30833549aa0378f41f8cdb132cff5826847fe/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7f30833549aa0378f41f8cdb132cff5826847fe/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d7f30833549aa0378f41f8cdb132cff5826847fe", "patch": "@@ -1,3 +1,9 @@\n+2004-05-13  Jonathan Wakely  <redi@gcc.gnu.org>\n+\t\n+\t* docs/html/abi.html: Document effect of -fabi-version on value\n+\tof __GXX_ABI_VERSION, and that it's defined in c-cppbuiltin.c.\n+\tFix markup.\n+\n 2004-05-13  Benjamin Kosnik  <bkoz@redhat.com>\n \n \tPR libstdc++/15074\t"}, {"sha": "421c1706ceadb33df931c787890e126cdb681c5d", "filename": "libstdc++-v3/docs/html/abi.html", "status": "modified", "additions": 99, "deletions": 76, "changes": 175, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7f30833549aa0378f41f8cdb132cff5826847fe/libstdc%2B%2B-v3%2Fdocs%2Fhtml%2Fabi.html", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7f30833549aa0378f41f8cdb132cff5826847fe/libstdc%2B%2B-v3%2Fdocs%2Fhtml%2Fabi.html", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdocs%2Fhtml%2Fabi.html?ref=d7f30833549aa0378f41f8cdb132cff5826847fe", "patch": "@@ -32,7 +32,7 @@ <h1 class=\"centered\"><a name=\"top\">C++ Standard Library ABI</a></h1>\n <!-- ####################################################### -->\n <hr />\n <h3 class=\"left\">\n-  <a name=\"C++interface\">The C++ interface</a>\n+  <a name=\"CXXinterface\">The C++ interface</a>\n </h3>\n \n <p> C++ applications often dependent on specific language support\n@@ -101,7 +101,7 @@ <h3 class=\"left\">\n </p>\n \n <h3 class=\"left\">\n-  <a name=\"ABI versioning\">Versioning</a>\n+  <a name=\"ABI_versioning\">Versioning</a>\n </h3>\n \n <p> The C++ interface has evolved throughout the history of the GNU\n@@ -170,8 +170,8 @@ <h5 class=\"left\">\n     <li>gcc-3.3.3: libgcc_s.so.1</li>\n     <li>gcc-3.4.0: libgcc_s.so.1</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n \n     <li>Release versioning on the libstdc++.so binary, implemented in the same was as the libgcc_s.so binary, above.\n \n@@ -195,8 +195,8 @@ <h5 class=\"left\">\n     <li>gcc-3.3.3: libstdc++.so.5.0.5</li>\n     <li>gcc-3.4.0: libstdc++.so.6.0.0</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n \n     <li>Symbol versioning on the libgcc_s.so binary.\n     <p>mapfile: gcc/libgcc-std.ver</p>\n@@ -220,8 +220,8 @@ <h5 class=\"left\">\n     <li>gcc-3.3.3: GCC_3.0</li>\n     <li>gcc-3.4.0: GCC_3.0</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n \n     <li>Symbol versioning on the libstdc++.so binary.\n \n@@ -254,8 +254,8 @@ <h5 class=\"left\">\n     <li>gcc-3.3.3: GLIBCPP_3.2.3, CXXABI_1.2.1</li>\n     <li>gcc-3.4.0: GLIBCXX_3.4, CXXABI_1.3</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n   \n     <li>\n     <p>Incremental bumping of a compiler pre-defined macro,\n@@ -266,22 +266,26 @@ <h5 class=\"left\">\n     </p>\n     \n     <p>\n-    This macro is defined in the file \"lang-specs.h\" in the gcc/cp directory.\n-    Later versions define it in \"c-common.c\" in the gcc directory.\n+    This macro was defined in the file \"lang-specs.h\" in the gcc/cp directory.\n+    Later versions defined it in \"c-common.c\" in the gcc directory, and from\n+    G++ 3.4 it is defined in c-cppbuiltin.c and its value determined by the\n+    '-fabi-version' command line option.\n     </p>\n \n     <p>\n-    It is versioned as follows:\n+    It is versioned as follows, where 'n' is given by '-fabi-version=n':\n     </p>\n     <ul>\n     <li>gcc-3.0.x: 100</li>\n     <li>gcc-3.1.x: 100 (Error, should be 101)</li>\n     <li>gcc-3.2.x: 102</li>\n     <li>gcc-3.3.x: 102</li>\n-    <li>gcc-3.4.x: 1002</li>\n+    <li>gcc-3.4.x: 102 (when n=1)</li>\n+    <li>gcc-3.4.x: 1000+n (when n&gt;1)</li>\n+    <li>gcc-3.4.x: 999999 (when n=0)</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n \n     <li>\n     <p>Changes to the default compiler option for\n@@ -297,8 +301,8 @@ <h5 class=\"left\">\n     <li>gcc-3.3.x: <code>-fabi-version=1</code></li>\n     <li>gcc-3.4.x: <code>-fabi-version=2</code></li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n \n    <li>\n     <p>Incremental bumping of a library pre-defined macro. For releases\n@@ -335,16 +339,17 @@ <h5 class=\"left\">\n     <li>gcc-3.3.3: 20040214</li>\n     <li>gcc-3.4.0: 20040419</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n \n \n     <li>\n     <p>\n     Incremental bumping of a library pre-defined macro,\n     _GLIBCPP_VERSION. This macro is defined as the released version of\n     the library, as a string literal. This is only implemented in\n-    gcc-3.1.0 releases and higher, and is deprecated in 3.4.\n+    gcc-3.1.0 releases and higher, and is deprecated in 3.4 (where it\n+    is called _GLIBCXX_VERSION).\n     </p>\n \n     <p>\n@@ -375,8 +380,8 @@ <h5 class=\"left\">\n     <li>gcc-3.3.3: \"3.3.3\"</li>\n     <li>gcc-3.4.0: \"version-unused\"</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n \n     <li>\n     <p>\n@@ -389,7 +394,7 @@ <h5 class=\"left\">\n     directory hierarchy corresponding to the C++ compiler's released\n     version. This version corresponds to the variable \"gcc_version\" in\n     \"libstdc++-v3/acinclude.m4,\" and more details can be found in that\n-    file's macro GLIBCPP_CONFIGURE.\n+    file's macro GLIBCXX_CONFIGURE (GLIBCPP_CONFIGURE before gcc-3.4.0).\n     </p>\n     <p>\n     C++ includes are versioned as follows:\n@@ -412,8 +417,8 @@ <h5 class=\"left\">\n     <li>gcc-3.3.3: include/c++/3.3.3</li>\n     <li>gcc-3.4.0: include/c++/3.4.0</li>\n     </ul>\n-    </li>\n     <p></p>\n+    </li>\n   </ul>\n <p>\n   Taken together, these techniques can accurately specify interface\n@@ -457,7 +462,7 @@ <h5 class=\"left\">\n   impact versioning and compatibility.\n </p>\n \n-</p>\n+<p>\n   For more information on configure options, including ABI impacts, see:\n   http://gcc.gnu.org/onlinedocs/libstdc++/configopts.html\n </p>\n@@ -507,11 +512,11 @@ <h5 class=\"left\">\n %g++ hello.cc -o hello.out\n \n %ldd hello.out\n-        libstdc++.so.5 => /usr/lib/libstdc++.so.5 (0x00764000)\n-        libm.so.6 => /lib/tls/libm.so.6 (0x004a8000)\n-        libgcc_s.so.1 => /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x40016000)\n-        libc.so.6 => /lib/tls/libc.so.6 (0x0036d000)\n-        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x00355000)\n+        libstdc++.so.5 =&gt; /usr/lib/libstdc++.so.5 (0x00764000)\n+        libm.so.6 =&gt; /lib/tls/libm.so.6 (0x004a8000)\n+        libgcc_s.so.1 =&gt; /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x40016000)\n+        libc.so.6 =&gt; /lib/tls/libc.so.6 (0x0036d000)\n+        /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x00355000)\n \n %nm hello.out\n </pre>\n@@ -524,7 +529,7 @@ <h5 class=\"left\">\n    <code>      U _ZNSt8ios_base4InitC1Ev@@GLIBCXX_3.4 </code>\n \n <h3 class=\"left\">\n-  <a name=\"ABI allowed\">Library allowed ABI changes</a>\n+  <a name=\"ABI_allowed\">Library allowed ABI changes</a>\n </h3>\n <p>\n The following will cause the library minor version number to\n@@ -543,7 +548,7 @@ <h3 class=\"left\">\n \n \n <h3 class=\"left\">\n-  <a name=\"ABI disallowed\">Library disallowed ABI changes</a>\n+  <a name=\"ABI_disallowed\">Library disallowed ABI changes</a>\n </h3>\n \n <p>\n@@ -574,24 +579,24 @@ <h3 class=\"left\">\n </h3>\n \n <ul>\n- <li>Separation of interface and implementation</li>\n+ <li>Separation of interface and implementation\n <p>This is accomplished by two techniques that separate the API from\n the ABI: forcing undefined references to link against a library binary\n for definitions.\n </p>\n \n- <ul>\n- <li>Include files have declarations, source files have defines</li>\n+ <dl>\n+  <dt>Include files have declarations, source files have defines</dt>\n \n-<p> For non-templatized types, such as much of <code>class\n-locale</code>, the appropriate standard C++ include, say\n-<code>locale</code>, can contain full declarations, while various\n-source files (say <code> locale.cc, locale_init.cc,\n-localename.cc</code>) contain definitions.</p>\n+   <dd> For non-templatized types, such as much of <code>class\n+   locale</code>, the appropriate standard C++ include, say\n+   <code>locale</code>, can contain full declarations, while various\n+   source files (say <code> locale.cc, locale_init.cc,\n+   localename.cc</code>) contain definitions.</dd>\n \n-  <li>Extern template on required types</li>\n+  <dt>Extern template on required types</dt>\n \n-   <p>For parts of the standard that have an explicit list of required\n+   <dd>For parts of the standard that have an explicit list of required\n    instantiations, the GNU extension syntax <code> extern template\n    </code> can be used to control where template definitions\n    reside. By marking required instantiations as <code> extern\n@@ -601,14 +606,15 @@ <h3 class=\"left\">\n    on parts of the standard that require <code> char</code> and <code>\n    wchar_t</code> instantiations, and includes <code>\n    basic_string</code>, the locale facets, and the types in <code>\n-   iostreams</code>.</p>\n+   iostreams</code>.</dd>\n \n- </ul>\n+ </dl>\n  <p> In addition, these techniques have the additional benefit that\n  they reduce binary size, which can increase runtime performance.\n  </p>\n+ </li>\n \n- <li>Namespaces linking symbol definitions to export mapfiles</li>\n+ <li>Namespaces linking symbol definitions to export mapfiles\n \n <p>All symbols in the shared library binary are processed by a linker\n script at build time that either allows or disallows external\n@@ -623,34 +629,37 @@ <h3 class=\"left\">\n \n <p>The following namespaces are transformed by the mapfile:</p>\n \n-<ul>\n-<li><code>namespace std</code></li>\n-<p> Defaults to exporting all symbols in label\n+<dl>\n+<dt><code>namespace std</code></dt>\n+<dd> Defaults to exporting all symbols in label\n <code>GLIBCXX</code> that do not begin with an underscore, ie\n <code>__test_func</code> would not be exported by default. Select\n-exceptional symbols are allowed to be visible.</p>\n+exceptional symbols are allowed to be visible.</dd>\n \n-<li><code>namespace __gnu_cxx</code></li>\n-<p> Defaults to not exporting any symbols in label\n-<code>GLIBCXX</code>, select items are allowed to be visible.</p>\n+<dt><code>namespace __gnu_cxx</code></dt>\n+<dd> Defaults to not exporting any symbols in label\n+<code>GLIBCXX</code>, select items are allowed to be visible.</dd>\n \n-<li><code>namespace __gnu_internal</code></li>\n-<p> Defaults to not exported, no items are allowed to be visible.</p>\n+<dt><code>namespace __gnu_internal</code></dt>\n+<dd> Defaults to not exported, no items are allowed to be visible.</dd>\n \n-<li><code>namespace __cxxabiv1</code>, aliased to <code> namespace abi</code></li>\n-<p> Defaults to not exporting any symbols in label\n-<code>CXXABI</code>, select items are allowed to be visible.</p>\n-</ul>\n+<dt><code>namespace __cxxabiv1</code>, aliased to <code> namespace abi</code></dt>\n+<dd> Defaults to not exporting any symbols in label\n+<code>CXXABI</code>, select items are allowed to be visible.</dd>\n+</dl>\n <p>\n </p>\n+</li>\n \n- <li>Freezing the API</li>\n+ <li>Freezing the API\n  <p>Disallowed changes, as above, are not made on a stable release\n branch. Enforcement tends to be less strict with GNU extensions that\n-standard includes.</p> </ul>\n+standard includes.</p>\n+</li>\n+</ul>\n \n <h3 class=\"left\">\n-  <a name=\"ABI testing\">Testing ABI changes</a>\n+  <a name=\"ABI_testing\">Testing ABI changes</a>\n </h3>\n \n <p>\n@@ -743,7 +752,7 @@ <h3 class=\"left\">\n </p>\n \n <h3 class=\"left\">\n-  <a name=\"ABI multi testing\">Testing Multi-ABI binaries</a>\n+  <a name=\"ABI_multi_testing\">Testing Multi-ABI binaries</a>\n </h3>\n \n <p>\n@@ -784,18 +793,18 @@ <h3 class=\"left\">\n <p> ...with the resulting libraries looking like </p>\n <pre>\n %ldd libone.so.1.0.0\n-        libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x40016000)\n-        libm.so.6 => /lib/tls/libm.so.6 (0x400fa000)\n-        libgcc_s.so.1 => /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x4011c000)\n-        libc.so.6 => /lib/tls/libc.so.6 (0x40125000)\n-        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x00355000)\n+        libstdc++.so.6 =&gt; /usr/lib/libstdc++.so.6 (0x40016000)\n+        libm.so.6 =&gt; /lib/tls/libm.so.6 (0x400fa000)\n+        libgcc_s.so.1 =&gt; /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x4011c000)\n+        libc.so.6 =&gt; /lib/tls/libc.so.6 (0x40125000)\n+        /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x00355000)\n \n %ldd libtwo.so.1.0.0\n-        libstdc++.so.5 => /usr/lib/libstdc++.so.5 (0x40027000)\n-        libm.so.6 => /lib/tls/libm.so.6 (0x400e1000)\n-        libgcc_s.so.1 => /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x40103000)\n-        libc.so.6 => /lib/tls/libc.so.6 (0x4010c000)\n-        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x00355000)\n+        libstdc++.so.5 =&gt; /usr/lib/libstdc++.so.5 (0x40027000)\n+        libm.so.6 =&gt; /lib/tls/libm.so.6 (0x400e1000)\n+        libgcc_s.so.1 =&gt; /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x40103000)\n+        libc.so.6 =&gt; /lib/tls/libc.so.6 (0x4010c000)\n+        /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x00355000)\n \n </pre>\n \n@@ -810,12 +819,12 @@ <h3 class=\"left\">\n </p>\n <pre>\n %ldd a.out\n-        libstdc++.so.5 => /usr/lib/libstdc++.so.5 (0x00764000)\n-        libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x40015000)\n-        libc.so.6 => /lib/tls/libc.so.6 (0x0036d000)\n-        libm.so.6 => /lib/tls/libm.so.6 (0x004a8000)\n-        libgcc_s.so.1 => /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x400e5000)\n-        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x00355000)\n+        libstdc++.so.5 =&gt; /usr/lib/libstdc++.so.5 (0x00764000)\n+        libstdc++.so.6 =&gt; /usr/lib/libstdc++.so.6 (0x40015000)\n+        libc.so.6 =&gt; /lib/tls/libc.so.6 (0x0036d000)\n+        libm.so.6 =&gt; /lib/tls/libm.so.6 (0x004a8000)\n+        libgcc_s.so.1 =&gt; /mnt/hd/bld/gcc/gcc/libgcc_s.so.1 (0x400e5000)\n+        /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x00355000)\n </pre>\n \n <p>\n@@ -830,28 +839,42 @@ <h3 class=\"left\">\n \n <p>\n ABIcheck, a vague idea of checking ABI compatibility\n-http://abicheck.sourceforge.net/\n+<br />\n+<a href=\"http://abicheck.sourceforge.net/\">http://abicheck.sourceforge.net/</a>\n+</p>\n \n <p>\n C++ ABI reference\n-http://www.codesourcery.com/cxx-abi/\n+<br />\n+<a href=\"http://www.codesourcery.com/cxx-abi/\">http://www.codesourcery.com/cxx-abi/</a>\n </p>\n \n <p>\n Intel ABI documentation\n+<br />\n \"Intel\ufffd Compilers for Linux* -Compatibility with the GNU Compilers\"\n+<br />\n (included in icc 6.0)\n </p>\n \n <p>\n Sun Solaris 2.9 docs\n+<br />\n Linker and Libraries Guide (document 816-1386)\n+<br />\n C++ Migration Guide (document 816-2459)\n-http://docs.sun.com/db/prod/solaris.9\n-http://docs.sun.com/?p=/doc/816-1386&a=load\n+<br />\n+<a href=\"http://docs.sun.com/db/prod/solaris.9\">http://docs.sun.com/db/prod/solaris.9</a>\n+<br />\n+<a href=\"http://docs.sun.com/?p=/doc/816-1386&amp;a=load\">http://docs.sun.com/?p=/doc/816-1386&amp;a=load</a>\n </p>\n \n <p>\n Ulrich Drepper, \"ELF Symbol Versioning\"\n-http://people.redhat.com/drepper/symbol-versioning\n+<br />\n+<a href=\"http://people.redhat.com/drepper/symbol-versioning\">http://people.redhat.com/drepper/symbol-versioning</a>\n </p>\n+\n+</body>\n+</html>\n+"}]}