{"sha": "708c4094eea2574473207a45d747994c9c2cbb56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzA4YzQwOTRlZWEyNTc0NDczMjA3YTQ1ZDc0Nzk5NGM5YzJjYmI1Ng==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2018-01-12T20:01:47Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2018-01-12T20:01:47Z"}, "message": "re PR fortran/83525 (open(newunit=funit, status=\"scratch\") fails if an internal file (characters) was read previously.)\n\n2018-01-12  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n        PR libgfortran/83525\n        * gfortran.dg/newunit_5.f90: New test.\n\nFrom-SVN: r256595", "tree": {"sha": "2cc6282ef02ca543b9d5386938c8210646cbed96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2cc6282ef02ca543b9d5386938c8210646cbed96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/708c4094eea2574473207a45d747994c9c2cbb56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/708c4094eea2574473207a45d747994c9c2cbb56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/708c4094eea2574473207a45d747994c9c2cbb56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/708c4094eea2574473207a45d747994c9c2cbb56/comments", "author": null, "committer": null, "parents": [{"sha": "abdca01e866a9471d43a7b21980b71ba9657a1fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abdca01e866a9471d43a7b21980b71ba9657a1fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abdca01e866a9471d43a7b21980b71ba9657a1fe"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "7bec2dd8b10225d344921e7fa64faed2c824704e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/708c4094eea2574473207a45d747994c9c2cbb56/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/708c4094eea2574473207a45d747994c9c2cbb56/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=708c4094eea2574473207a45d747994c9c2cbb56", "patch": "@@ -1,3 +1,8 @@\n+2018-01-12  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/83525\n+\t* gfortran.dg/newunit_5.f90: New test.\n+\n 2018-01-12  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/80481"}, {"sha": "5a238c44036587f0ad36397493dde28b29aebfe4", "filename": "gcc/testsuite/gfortran.dg/newunit_5.f90.f90", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/708c4094eea2574473207a45d747994c9c2cbb56/gcc%2Ftestsuite%2Fgfortran.dg%2Fnewunit_5.f90.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/708c4094eea2574473207a45d747994c9c2cbb56/gcc%2Ftestsuite%2Fgfortran.dg%2Fnewunit_5.f90.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnewunit_5.f90.f90?ref=708c4094eea2574473207a45d747994c9c2cbb56", "patch": "@@ -0,0 +1,20 @@\n+! { dg-do run )\n+! PR83525 Combination of newunit and internal unit was failing.\n+program main\n+  integer :: funit\n+  logical :: isopen\n+  integer :: this, another\n+  character(len=:), allocatable :: message\n+  \n+  message = \"12\"\n+  read(message, *) this\n+  if (this.ne.12) call abort\n+  \n+  open(newunit=funit, status=\"scratch\")\n+  write(funit, *) \"13\"\n+  rewind(funit)\n+  read(funit, *) another\n+  !write(*,*) another\n+  close(funit)\n+  if (another.ne.13) call abort\n+end"}]}