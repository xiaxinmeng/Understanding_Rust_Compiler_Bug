{"sha": "98dc53e3af687b0afd8aad75389a6b1aef919eae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThkYzUzZTNhZjY4N2IwYWZkOGFhZDc1Mzg5YTZiMWFlZjkxOWVhZQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-01-13T13:20:27Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-01-13T13:20:27Z"}, "message": "h8300.md (*andsi3_lshift_n_sb): New.\n\n\t* config/h8300/h8300.md (*andsi3_lshift_n_sb): New.\n\t(*iorsi3_and_lshiftrt_n_sb): Likewise.\n\nFrom-SVN: r61251", "tree": {"sha": "cc358b9be040e0c70b3be32259d348e4ce3a019a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc358b9be040e0c70b3be32259d348e4ce3a019a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98dc53e3af687b0afd8aad75389a6b1aef919eae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98dc53e3af687b0afd8aad75389a6b1aef919eae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98dc53e3af687b0afd8aad75389a6b1aef919eae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98dc53e3af687b0afd8aad75389a6b1aef919eae/comments", "author": null, "committer": null, "parents": [{"sha": "c226b8033919d72734ce96b67cbfebef2879e67b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c226b8033919d72734ce96b67cbfebef2879e67b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c226b8033919d72734ce96b67cbfebef2879e67b"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "32e95b16239ed458eed37d81c55382efd73f3eb8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98dc53e3af687b0afd8aad75389a6b1aef919eae/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98dc53e3af687b0afd8aad75389a6b1aef919eae/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=98dc53e3af687b0afd8aad75389a6b1aef919eae", "patch": "@@ -1,3 +1,8 @@\n+2003-01-13  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.md (*andsi3_lshift_n_sb): New.\n+\t(*iorsi3_and_lshiftrt_n_sb): Likewise.\n+\n 2003-01-12  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/9264"}, {"sha": "5b38e049b93ff223b936dbcf7d37111ff816fd18", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98dc53e3af687b0afd8aad75389a6b1aef919eae/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98dc53e3af687b0afd8aad75389a6b1aef919eae/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=98dc53e3af687b0afd8aad75389a6b1aef919eae", "patch": "@@ -2598,6 +2598,24 @@\n \t      (clobber (scratch:QI))])]\n   \"\")\n \n+;; Accept (A >> 30) & 2 and the like.\n+\n+(define_insn \"*andsi3_lshiftrt_n_sb\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n+\t(and:SI (lshiftrt:SI (match_operand:SI 1 \"register_operand\" \"0\")\n+\t\t\t     (match_operand:SI 2 \"const_int_operand\" \"n\"))\n+\t\t(match_operand:SI 3 \"single_one_operand\" \"n\")))]\n+  \"(TARGET_H8300H || TARGET_H8300S)\n+   && exact_log2 (INTVAL (operands[3])) < 16\n+   && INTVAL (operands[2]) + exact_log2 (INTVAL (operands[3])) == 31\"\n+  \"*\n+{\n+  operands[3] = GEN_INT (exact_log2 (INTVAL (operands[3])));\n+  return \\\"shll.l\\\\t%S0\\;xor.l\\\\t%S0,%S0\\;bst\\\\t%Z3,%Y0\\\";\n+}\"\n+  [(set_attr \"length\" \"8\")\n+   (set_attr \"cc\" \"clobber\")])\n+\n ;; plus:SI\n \n (define_insn \"*addsi3_upper\"\n@@ -2711,6 +2729,17 @@\n   [(set_attr \"length\" \"6\")\n    (set_attr \"cc\" \"set_znv\")])\n \n+(define_insn \"*iorsi3_and_lshiftrt_n_sb\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n+\t(ior:SI (and:SI (lshiftrt:SI (match_operand:SI 1 \"register_operand\" \"r\")\n+\t\t\t\t     (const_int 30))\n+\t\t\t(const_int 2))\n+\t\t(match_operand:SI 2 \"register_operand\" \"0\")))]\n+  \"(TARGET_H8300H || TARGET_H8300S)\"\n+  \"rotl.l\\\\t%S1\\;rotr.l\\\\t%S1\\;bor\\\\t#1,%w0\\;bst\\\\t#1,%w0\"\n+  [(set_attr \"length\" \"8\")\n+   (set_attr \"cc\" \"clobber\")])\n+\n ;; Used to OR the exponent of a float.\n \n (define_insn \"*iorsi3_shift\""}]}