{"sha": "75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzVkNGQ3YmM2OTdkZDE4NTNlODlhOTNlNmM0ZmExZGI5YTcwOWJjMA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-10-09T14:17:34Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-10-11T11:58:29Z"}, "message": "Objective-C, Darwin : Revise the runtime selection options.\n\nFor the NeXT/Darwin runtime as installed on macOS, we now\nneed to deal with changes in ABI and APIs over the range\nof system versions supported.\n\nFor the first phase of these changes, we will make the\nexisting flag_next_runtime carry a value that represents\nthe target OS version.  It might be necessary to extend the\nvalue to represent the ABI ('fragile', V1/V2) or the linker\ncapabilities (some changes to the linker-visible and public\nsymbols are dependent on linker version).\n\nTODO: arrange to set the default NEXT_OBJC_RUNTIME on the\nbasis of the configured target version.\n\ngcc/ChangeLog:\n\n\t* config/darwin.c (darwin_objc2_section): Allow for\n\tvalues > 1 to represent the next runtime.\n\t(darwin_objc1_section): Likewise.\n\t* config/darwin.h (NEXT_OBJC_RUNTIME): Set the default\n\tnext runtime value to be 10.5.8.", "tree": {"sha": "e2eaa4f231ab86d41ed0766dfc59f8fa97a0ea22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e2eaa4f231ab86d41ed0766dfc59f8fa97a0ea22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1cc7476610299eb1969f6a93ee21010ac30f5dd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cc7476610299eb1969f6a93ee21010ac30f5dd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cc7476610299eb1969f6a93ee21010ac30f5dd6"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "b3c1ef3d91842ce8dd06410f34d553687af45101", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0", "patch": "@@ -1439,7 +1439,7 @@ darwin_objc2_section (tree decl ATTRIBUTE_UNUSED, tree meta, section * base)\n   gcc_assert (TREE_CODE (ident) == IDENTIFIER_NODE);\n   p = IDENTIFIER_POINTER (ident);\n \n-  gcc_checking_assert (flag_next_runtime == 1 && flag_objc_abi == 2);\n+  gcc_checking_assert (flag_next_runtime >= 1 && flag_objc_abi == 2);\n \n   objc_metadata_seen = 1;\n \n@@ -1515,7 +1515,7 @@ darwin_objc1_section (tree decl ATTRIBUTE_UNUSED, tree meta, section * base)\n   gcc_assert (TREE_CODE (ident) == IDENTIFIER_NODE);\n   p = IDENTIFIER_POINTER (ident);\n \n-  gcc_checking_assert (flag_next_runtime == 1 && flag_objc_abi < 2);\n+  gcc_checking_assert (flag_next_runtime >= 1 && flag_objc_abi < 2);\n \n   objc_metadata_seen = 1;\n "}, {"sha": "f9d4fec30a030db60694f351b98a7cb6e4f8f167", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=75d4d7bc697dd1853e89a93e6c4fa1db9a709bc0", "patch": "@@ -107,7 +107,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n /* Default to using the NeXT-style runtime, since that's what is\n    pre-installed on Darwin systems.  */\n \n-#define NEXT_OBJC_RUNTIME 1\n+#define NEXT_OBJC_RUNTIME 100508\n \n /* Don't default to pcc-struct-return, because gcc is the only compiler, and\n    we want to retain compatibility with older gcc versions.  */"}]}