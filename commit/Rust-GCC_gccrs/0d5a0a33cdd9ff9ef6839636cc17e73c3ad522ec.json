{"sha": "0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGQ1YTBhMzNjZGQ5ZmY5ZWY2ODM5NjM2Y2MxN2U3M2MzYWQ1MjJlYw==", "commit": {"author": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2017-05-15T08:58:56Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-05-15T08:58:56Z"}, "message": "utils.c (can_materialize_object_renaming_p): Synchronize with GNAT's Exp_Dbug.Debug_Renaming_Declaration...\n\n\t* gcc-interface/utils.c (can_materialize_object_renaming_p):\n\tSynchronize with GNAT's Exp_Dbug.Debug_Renaming_Declaration:\n\tprocess Original_Node instead of expanded names.\n\nFrom-SVN: r248054", "tree": {"sha": "41d581fd4972916d005fae2a8453d66724c5a2ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/41d581fd4972916d005fae2a8453d66724c5a2ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/comments", "author": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "13b6b77304b3b3e0ff36c1854d02ef21a0ad16c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13b6b77304b3b3e0ff36c1854d02ef21a0ad16c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13b6b77304b3b3e0ff36c1854d02ef21a0ad16c9"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "f4c126a7b7234fb73b56a5fe45792f97dbfad17c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "patch": "@@ -1,3 +1,9 @@\n+2017-05-15  Pierre-Marie de Rodat  <derodat@adacore.com>\n+\n+\t* gcc-interface/utils.c (can_materialize_object_renaming_p):\n+\tSynchronize with GNAT's Exp_Dbug.Debug_Renaming_Declaration:\n+\tprocess Original_Node instead of expanded names.\n+\n 2017-05-15  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c (return_value_ok_for_nrv_p): Only apply the"}, {"sha": "b8c5d3d31f6aad0846cfce226bb716ee4b949f41", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "patch": "@@ -5431,11 +5431,16 @@ can_materialize_object_renaming_p (Node_Id expr)\n {\n   while (true)\n     {\n+      expr = Original_Node (expr);\n+\n       switch Nkind (expr)\n \t{\n \tcase N_Identifier:\n \tcase N_Expanded_Name:\n-\t  return true;\n+\t  if (!Present (Renamed_Object (Entity (expr))))\n+\t    return true;\n+\t  expr = Renamed_Object (Entity (expr));\n+\t  break;\n \n \tcase N_Selected_Component:\n \t  {"}, {"sha": "f198fc6b42bb5e95b99e0da23c4b551f4916d7d9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "patch": "@@ -1,3 +1,7 @@\n+2017-05-15  Pierre-Marie de Rodat  <derodat@adacore.com>\n+\n+\t* gnat.dg/specs/pack13.ads: New test.\n+\n 2017-05-14  Martin Sebor  <msebor@redhat.com>\n \n \tPR middle-end/77671"}, {"sha": "4594ab7ca034c647e3805e264a1bf8c57844e27a", "filename": "gcc/testsuite/gnat.dg/specs/pack13.ads", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fpack13.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fpack13.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fpack13.ads?ref=0d5a0a33cdd9ff9ef6839636cc17e73c3ad522ec", "patch": "@@ -0,0 +1,25 @@\n+-- { dg-do compile }\n+\n+package Pack13 is\n+\n+  generic\n+    type Value_Type is private;\n+    Value : in out Value_Type;\n+  package G is end G;\n+\n+  type Rec is record\n+    B : Boolean;\n+  end record;\n+  for Rec use record\n+    B at 0 range 8 .. 8;\n+  end record;\n+  for Rec'size use 9;\n+\n+  type Arr is array (Boolean) of Rec;\n+  pragma Pack (Arr);\n+\n+  A : Arr;\n+\n+  package My_G is new G (Boolean, A(True).B);\n+\n+end Pack13;"}]}