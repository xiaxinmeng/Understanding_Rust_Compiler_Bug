{"sha": "31c8581d25e55cd1a2507e215b5b6046919b2ab3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFjODU4MWQyNWU1NWNkMWEyNTA3ZTIxNWI1YjYwNDY5MTliMmFiMw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1997-11-05T00:50:18Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-11-05T00:50:18Z"}, "message": "Fix nightly testing mips64-elf build failure.\n\n\t* dwarf2out.c (expand_builtin_dwarf_reg_size): New variable mode.\n\tConvert CCmode to word_mode before calling GET_MODE_SIZE.\n\nFrom-SVN: r16326", "tree": {"sha": "bc3a9ef3c7a0fa381a374b7b091a81eb3517c468", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc3a9ef3c7a0fa381a374b7b091a81eb3517c468"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31c8581d25e55cd1a2507e215b5b6046919b2ab3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31c8581d25e55cd1a2507e215b5b6046919b2ab3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31c8581d25e55cd1a2507e215b5b6046919b2ab3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31c8581d25e55cd1a2507e215b5b6046919b2ab3/comments", "author": null, "committer": null, "parents": [{"sha": "7636d567433a0cc3ecbf07ff3c953f7d5b6088e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7636d567433a0cc3ecbf07ff3c953f7d5b6088e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7636d567433a0cc3ecbf07ff3c953f7d5b6088e4"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "2f981e9df7489e913cb7aa58785349344ebb367a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31c8581d25e55cd1a2507e215b5b6046919b2ab3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31c8581d25e55cd1a2507e215b5b6046919b2ab3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=31c8581d25e55cd1a2507e215b5b6046919b2ab3", "patch": "@@ -1,5 +1,8 @@\n Tue Nov  4 12:30:28 1997  Jim Wilson  <wilson@cygnus.com>\n \n+\t* dwarf2out.c (expand_builtin_dwarf_reg_size): New variable mode.\n+\tConvert CCmode to word_mode before calling GET_MODE_SIZE.\n+\n \t* acconfig.h (HAVE_INTTYPES_H): Undef.\n \t* configure.in (inttypes.h): Check for conflicts between sys/types.h\n \tand inttypes.h, and verify that intmax_t is defined."}, {"sha": "d37bbca4a1c5246b89c410fa386dd0208a496bfa", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31c8581d25e55cd1a2507e215b5b6046919b2ab3/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31c8581d25e55cd1a2507e215b5b6046919b2ab3/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=31c8581d25e55cd1a2507e215b5b6046919b2ab3", "patch": "@@ -520,6 +520,7 @@ expand_builtin_dwarf_reg_size (reg_tree, target)\n      tree reg_tree;\n      rtx target;\n {\n+  enum machine_mode mode;\n   int size;\n   struct reg_size_range ranges[5];\n   tree t, t2;\n@@ -535,7 +536,15 @@ expand_builtin_dwarf_reg_size (reg_tree, target)\n       if (DWARF_FRAME_REGNUM (i) == DWARF_FRAME_RETURN_COLUMN)\n \tcontinue;\n \n-      size = GET_MODE_SIZE (reg_raw_mode[i]);\n+      mode = reg_raw_mode[i];\n+      /* CCmode is arbitrarily given a size of 4 bytes.  It is more useful\n+\t to use the same size as word_mode, since that reduces the number\n+\t of ranges we need.  It should not matter, since the result should\n+\t never be used for a condition code register anyways.  */\n+      if (mode == CCmode)\n+\tmode = word_mode;\n+      size = GET_MODE_SIZE (mode);\n+\n       if (size != last_size)\n \t{\n \t  ranges[n_ranges].beg = i;"}]}