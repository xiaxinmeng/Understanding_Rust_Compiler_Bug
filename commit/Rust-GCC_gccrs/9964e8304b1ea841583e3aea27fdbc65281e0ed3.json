{"sha": "9964e8304b1ea841583e3aea27fdbc65281e0ed3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTk2NGU4MzA0YjFlYTg0MTU4M2UzYWVhMjdmZGJjNjUyODFlMGVkMw==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2014-03-20T06:53:01Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2014-03-20T06:53:01Z"}, "message": "re PR fortran/60543 (Function with side effect removed by the optimizer.)\n\n2014-03-19  Tobias Burnus  <burnus@net-b.>\n\n        PR fortran/60543\n        * io.c (check_io_constraints): Use gfc_unset_implicit_pure.\n        * resolve.c (resolve_ordinary_assign): Ditto.\n\nFrom-SVN: r208693", "tree": {"sha": "3627540c9ce583bad2dfc87f4e1d24e50acbbd32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3627540c9ce583bad2dfc87f4e1d24e50acbbd32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9964e8304b1ea841583e3aea27fdbc65281e0ed3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9964e8304b1ea841583e3aea27fdbc65281e0ed3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9964e8304b1ea841583e3aea27fdbc65281e0ed3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9964e8304b1ea841583e3aea27fdbc65281e0ed3/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a69e09c8ec22bddd81bf14361915394c51e7e098", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a69e09c8ec22bddd81bf14361915394c51e7e098", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a69e09c8ec22bddd81bf14361915394c51e7e098"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "31353be2796c0f7705f81142676bb727218d41eb", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9964e8304b1ea841583e3aea27fdbc65281e0ed3/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9964e8304b1ea841583e3aea27fdbc65281e0ed3/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=9964e8304b1ea841583e3aea27fdbc65281e0ed3", "patch": "@@ -1,3 +1,9 @@\n+2014-03-19  Tobias Burnus  <burnus@net-b.>\n+\n+\tPR fortran/60543\n+\t* io.c (check_io_constraints): Use gfc_unset_implicit_pure.\n+\t* resolve.c (resolve_ordinary_assign): Ditto.\n+\n 2014-03-19  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/60543"}, {"sha": "84d0db818de3c1f9b62042d8a434a48f5d71f490", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9964e8304b1ea841583e3aea27fdbc65281e0ed3/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9964e8304b1ea841583e3aea27fdbc65281e0ed3/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=9964e8304b1ea841583e3aea27fdbc65281e0ed3", "patch": "@@ -3259,9 +3259,8 @@ if (condition) \\\n \t\t     \"an internal file in a PURE procedure\",\n \t\t     io_kind_name (k));\n \n-      if (gfc_implicit_pure (NULL) && (k == M_READ || k == M_WRITE))\n-\tgfc_current_ns->proc_name->attr.implicit_pure = 0;\n-\n+      if (k == M_READ || k == M_WRITE)\n+\tgfc_unset_implicit_pure (NULL);\n     }\n \n   if (k != M_READ)"}, {"sha": "6e23e570b179da2e2db8cbf8b1ab82fafe4701c8", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9964e8304b1ea841583e3aea27fdbc65281e0ed3/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9964e8304b1ea841583e3aea27fdbc65281e0ed3/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=9964e8304b1ea841583e3aea27fdbc65281e0ed3", "patch": "@@ -9165,19 +9165,19 @@ resolve_ordinary_assign (gfc_code *code, gfc_namespace *ns)\n       if (lhs->expr_type == EXPR_VARIABLE\n \t    && lhs->symtree->n.sym != gfc_current_ns->proc_name\n \t    && lhs->symtree->n.sym->ns != gfc_current_ns)\n-\tgfc_current_ns->proc_name->attr.implicit_pure = 0;\n+\tgfc_unset_implicit_pure (NULL);\n \n       if (lhs->ts.type == BT_DERIVED\n \t    && lhs->expr_type == EXPR_VARIABLE\n \t    && lhs->ts.u.derived->attr.pointer_comp\n \t    && rhs->expr_type == EXPR_VARIABLE\n \t    && (gfc_impure_variable (rhs->symtree->n.sym)\n \t\t|| gfc_is_coindexed (rhs)))\n-\tgfc_current_ns->proc_name->attr.implicit_pure = 0;\n+\tgfc_unset_implicit_pure (NULL);\n \n       /* Fortran 2008, C1283.  */\n       if (gfc_is_coindexed (lhs))\n-\tgfc_current_ns->proc_name->attr.implicit_pure = 0;\n+\tgfc_unset_implicit_pure (NULL);\n     }\n \n   /* F2008, 7.2.1.2.  */"}]}