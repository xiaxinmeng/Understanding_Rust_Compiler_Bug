{"sha": "006b29ab176c86510f4a5c7d09a90ff657afa7bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDA2YjI5YWIxNzZjODY1MTBmNGE1YzdkMDlhOTBmZjY1N2FmYTdiZA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2009-09-03T19:50:30Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2009-09-03T19:50:30Z"}, "message": "mips.c (USEFUL_INSN_P): Use NONDEBUG_INSN_P instead of INSN_P.\n\ngcc/\n\t* config/mips/mips.c (USEFUL_INSN_P): Use NONDEBUG_INSN_P instead\n\tof INSN_P.\n\t(mips16e_collect_argument_saves): Skip debug instructions.\n\t(mips_74k_agen_init): Use CALL_P || JUMP_P instead of !NONJUMP_INSN_P.\n\t(mips16_lay_out_constants): Use USEFUL_INSN_P instead of INSN_P.\n\t(r10k_insert_cache_barriers): Likewise.\n\t(mips_reorg_process_insns): Likewise.\n\nFrom-SVN: r151391", "tree": {"sha": "a38637fce54717a7673e6da0e36cabbe01732974", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a38637fce54717a7673e6da0e36cabbe01732974"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/006b29ab176c86510f4a5c7d09a90ff657afa7bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/006b29ab176c86510f4a5c7d09a90ff657afa7bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/006b29ab176c86510f4a5c7d09a90ff657afa7bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/006b29ab176c86510f4a5c7d09a90ff657afa7bd/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3734d8fdca0932fa923328b48ce846f800a44bab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3734d8fdca0932fa923328b48ce846f800a44bab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3734d8fdca0932fa923328b48ce846f800a44bab"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "519bbf8cd873ec1312ed9c0af47f17c1a9dcd23f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006b29ab176c86510f4a5c7d09a90ff657afa7bd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006b29ab176c86510f4a5c7d09a90ff657afa7bd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=006b29ab176c86510f4a5c7d09a90ff657afa7bd", "patch": "@@ -1,3 +1,13 @@\n+2009-09-03  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* config/mips/mips.c (USEFUL_INSN_P): Use NONDEBUG_INSN_P instead\n+\tof INSN_P.\n+\t(mips16e_collect_argument_saves): Skip debug instructions.\n+\t(mips_74k_agen_init): Use CALL_P || JUMP_P instead of !NONJUMP_INSN_P.\n+\t(mips16_lay_out_constants): Use USEFUL_INSN_P instead of INSN_P.\n+\t(r10k_insert_cache_barriers): Likewise.\n+\t(mips_reorg_process_insns): Likewise.\n+\n 2009-09-03  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR bootstrap/41241"}, {"sha": "958abce0815b73a743f48938afd454da45c71686", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006b29ab176c86510f4a5c7d09a90ff657afa7bd/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006b29ab176c86510f4a5c7d09a90ff657afa7bd/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=006b29ab176c86510f4a5c7d09a90ff657afa7bd", "patch": "@@ -97,7 +97,7 @@ along with GCC; see the file COPYING3.  If not see\n \n /* True if INSN is a mips.md pattern or asm statement.  */\n #define USEFUL_INSN_P(INSN)\t\t\t\t\t\t\\\n-  (INSN_P (INSN)\t\t\t\t\t\t\t\\\n+  (NONDEBUG_INSN_P (INSN)\t\t\t\t\t\t\\\n    && GET_CODE (PATTERN (INSN)) != USE\t\t\t\t\t\\\n    && GET_CODE (PATTERN (INSN)) != CLOBBER\t\t\t\t\\\n    && GET_CODE (PATTERN (INSN)) != ADDR_VEC\t\t\t\t\\\n@@ -8264,7 +8264,7 @@ mips16e_collect_argument_saves (void)\n   for (insn = get_insns (); insn; insn = next)\n     {\n       next = NEXT_INSN (insn);\n-      if (NOTE_P (insn))\n+      if (NOTE_P (insn) || DEBUG_INSN_P (insn))\n \tcontinue;\n \n       if (!INSN_P (insn))\n@@ -11771,7 +11771,7 @@ static enum attr_type mips_last_74k_agen_insn = TYPE_UNKNOWN;\n static void\n mips_74k_agen_init (rtx insn)\n {\n-  if (!insn || !NONJUMP_INSN_P (insn))\n+  if (!insn || CALL_P (insn) || JUMP_P (insn))\n     mips_last_74k_agen_insn = TYPE_UNKNOWN;\n   else\n     {\n@@ -13080,7 +13080,7 @@ mips16_lay_out_constants (void)\n   for (insn = get_insns (); insn; insn = NEXT_INSN (insn))\n     {\n       /* Rewrite constant pool references in INSN.  */\n-      if (INSN_P (insn))\n+      if (USEFUL_INSN_P (insn))\n \t{\n \t  info.insn = insn;\n \t  info.pool = &pool;\n@@ -13450,7 +13450,7 @@ r10k_insert_cache_barriers (void)\n \t - the first instruction in an unprotected region otherwise.  */\n       for (insn = BB_HEAD (bb); insn != end; insn = NEXT_INSN (insn))\n \t{\n-\t  if (unprotected_region && INSN_P (insn))\n+\t  if (unprotected_region && USEFUL_INSN_P (insn))\n \t    {\n \t      if (recog_memoized (insn) == CODE_FOR_mips_cache)\n \t\t/* This CACHE instruction protects the following code.  */\n@@ -14113,7 +14113,7 @@ mips_reorg_process_insns (void)\n   /* Make a first pass over the instructions, recording all the LO_SUMs.  */\n   for (insn = get_insns (); insn != 0; insn = NEXT_INSN (insn))\n     FOR_EACH_SUBINSN (subinsn, insn)\n-      if (INSN_P (subinsn))\n+      if (USEFUL_INSN_P (subinsn))\n \tfor_each_rtx (&PATTERN (subinsn), mips_record_lo_sum, htab);\n \n   last_insn = 0;\n@@ -14127,7 +14127,7 @@ mips_reorg_process_insns (void)\n   for (insn = get_insns (); insn != 0; insn = next_insn)\n     {\n       next_insn = NEXT_INSN (insn);\n-      if (INSN_P (insn))\n+      if (USEFUL_INSN_P (insn))\n \t{\n \t  if (GET_CODE (PATTERN (insn)) == SEQUENCE)\n \t    {"}]}