{"sha": "4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNkNTY1OGI2MDZlNGE3MmNkYzY0Mzg3ZTViNmJmODA4YmE1ZDgxZA==", "commit": {"author": {"name": "Markus Trippelsdorf", "email": "markus@trippelsdorf.de", "date": "2014-09-19T14:44:09Z"}, "committer": {"name": "Markus Trippelsdorf", "email": "trippels@gcc.gnu.org", "date": "2014-09-19T14:44:09Z"}, "message": "PR ipa/61998 Fix crash -Wsuggest-final-types crash\n\n-Wsuggest-final-types crashes when used on mininal testcases.\nFix by bailing out early when odr_types_ptr is NULL in ipa_devirt()\n\n2014-09-19  Markus Trippelsdorf  <markus@trippelsdorf.de>\n\n        PR ipa/61998\n        * ipa-devirt.c (ipa_devirt): Bail out if odr_types_ptr is NULL.\n\n2014-09-19  Markus Trippelsdorf  <markus@trippelsdorf.de>\n\n        PR ipa/61998\n        * g++.dg/warn/Wsuggest-final-2.C: New testcase.\n\nFrom-SVN: r215392", "tree": {"sha": "8187b8113b0dd373ea44265c8afdac049cbe039a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8187b8113b0dd373ea44265c8afdac049cbe039a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/comments", "author": null, "committer": null, "parents": [{"sha": "5fd4bc96306dccae16acb28c38ab63f213555c04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fd4bc96306dccae16acb28c38ab63f213555c04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5fd4bc96306dccae16acb28c38ab63f213555c04"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "0dc7b3325922aa40b79371d03008f0ff4356c0ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "patch": "@@ -1,3 +1,8 @@\n+2014-09-19  Markus Trippelsdorf  <markus@trippelsdorf.de>\n+\n+\tPR ipa/61998\n+\t* ipa-devirt.c (ipa_devirt): Bail out if odr_types_ptr is NULL.\n+\n 2014-09-19  James Greenhalgh  <james.greenhalgh@arm.com>\n \n \t* doc/md.texi (Modifiers): Consistently use \"read/write\""}, {"sha": "61e87e80240c026d43f566ff07c72fe131e0716f", "filename": "gcc/ipa-devirt.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2Fipa-devirt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2Fipa-devirt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-devirt.c?ref=4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "patch": "@@ -3952,6 +3952,9 @@ ipa_devirt (void)\n   int nmultiple = 0, noverwritable = 0, ndevirtualized = 0, nnotdefined = 0;\n   int nwrong = 0, nok = 0, nexternal = 0, nartificial = 0;\n \n+  if (!odr_types_ptr)\n+    return 0;\n+\n   /* We can output -Wsuggest-final-methods and -Wsuggest-final-types warnings.\n      This is implemented by setting up final_warning_records that are updated\n      by get_polymorphic_call_targets."}, {"sha": "747aad8b6a309a3df68f2228624e2480c64834b8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "patch": "@@ -1,3 +1,8 @@\n+2014-09-19  Markus Trippelsdorf  <markus@trippelsdorf.de>\n+\n+\tPR ipa/61998\n+\t* g++.dg/warn/Wsuggest-final-2.C: New testcase.\n+\n 2014-09-19  Joost VandeVondele  <vondele@gcc.gnu.org>\n \n \tPR fortran/63152"}, {"sha": "51e466d59404963760595a89182e303203e171fd", "filename": "gcc/testsuite/g++.dg/warn/Wsuggest-final-2.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWsuggest-final-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cd5658b606e4a72cdc64387e5b6bf808ba5d81d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWsuggest-final-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWsuggest-final-2.C?ref=4cd5658b606e4a72cdc64387e5b6bf808ba5d81d", "patch": "@@ -0,0 +1,4 @@\n+// PR ipa/61998\n+// { dg-do compile }\n+// { dg-options \"-O2 -Wsuggest-final-types\" }\n+int main () {}"}]}