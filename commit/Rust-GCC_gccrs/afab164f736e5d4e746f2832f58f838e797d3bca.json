{"sha": "afab164f736e5d4e746f2832f58f838e797d3bca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZhYjE2NGY3MzZlNWQ0ZTc0NmYyODMyZjU4ZjgzOGU3OTdkM2JjYQ==", "commit": {"author": {"name": "Emmanuel Briot", "email": "briot@adacore.com", "date": "2011-08-04T09:44:38Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-04T09:44:38Z"}, "message": "g-comlin.adb, [...] (Add_Switch): Put back support for overriding the separator.\n\n2011-08-04  Emmanuel Briot  <briot@adacore.com>\n\n\t* g-comlin.adb, g-comlin.ads (Add_Switch): Put back support for\n\toverriding the separator.\n\nFrom-SVN: r177345", "tree": {"sha": "64f11b7bbbad408ff1e22d79a79b4efa474ecd4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64f11b7bbbad408ff1e22d79a79b4efa474ecd4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afab164f736e5d4e746f2832f58f838e797d3bca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afab164f736e5d4e746f2832f58f838e797d3bca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afab164f736e5d4e746f2832f58f838e797d3bca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afab164f736e5d4e746f2832f58f838e797d3bca/comments", "author": {"login": "briot", "id": 42402, "node_id": "MDQ6VXNlcjQyNDAy", "avatar_url": "https://avatars.githubusercontent.com/u/42402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/briot", "html_url": "https://github.com/briot", "followers_url": "https://api.github.com/users/briot/followers", "following_url": "https://api.github.com/users/briot/following{/other_user}", "gists_url": "https://api.github.com/users/briot/gists{/gist_id}", "starred_url": "https://api.github.com/users/briot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/briot/subscriptions", "organizations_url": "https://api.github.com/users/briot/orgs", "repos_url": "https://api.github.com/users/briot/repos", "events_url": "https://api.github.com/users/briot/events{/privacy}", "received_events_url": "https://api.github.com/users/briot/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fe0ec02f9397eeb71a4ecb1a6fb2b67cfdb9378c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe0ec02f9397eeb71a4ecb1a6fb2b67cfdb9378c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe0ec02f9397eeb71a4ecb1a6fb2b67cfdb9378c"}], "stats": {"total": 49, "additions": 34, "deletions": 15}, "files": [{"sha": "d8a2abe161e142e640c1e4c1f423e9a79b3c1026", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afab164f736e5d4e746f2832f58f838e797d3bca/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afab164f736e5d4e746f2832f58f838e797d3bca/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=afab164f736e5d4e746f2832f58f838e797d3bca", "patch": "@@ -1,3 +1,8 @@\n+2011-08-04  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* g-comlin.adb, g-comlin.ads (Add_Switch): Put back support for\n+\toverriding the separator.\n+\n 2011-08-04  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_aggr.adb, par_sco.adb, sem_type.adb, exp_util.adb, exp_ch9.adb,"}, {"sha": "0d7528946dcce8b2be6888df9afed0802358c143", "filename": "gcc/ada/g-comlin.adb", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afab164f736e5d4e746f2832f58f838e797d3bca/gcc%2Fada%2Fg-comlin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afab164f736e5d4e746f2832f58f838e797d3bca/gcc%2Fada%2Fg-comlin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-comlin.adb?ref=afab164f736e5d4e746f2832f58f838e797d3bca", "patch": "@@ -2113,7 +2113,7 @@ package body GNAT.Command_Line is\n      (Cmd        : in out Command_Line;\n       Switch     : String;\n       Parameter  : String    := \"\";\n-      Separator  : Character := ' ';\n+      Separator  : Character := ASCII.NUL;\n       Section    : String    := \"\";\n       Add_Before : Boolean   := False)\n    is\n@@ -2132,16 +2132,14 @@ package body GNAT.Command_Line is\n      (Cmd        : in out Command_Line;\n       Switch     : String;\n       Parameter  : String := \"\";\n-      Separator  : Character := ' ';\n+      Separator  : Character := ASCII.NUL;\n       Section    : String := \"\";\n       Add_Before : Boolean := False;\n       Success    : out Boolean)\n    is\n-      pragma Unreferenced (Separator);  --  ??? Should be removed eventually\n-\n       procedure Add_Simple_Switch\n         (Simple    : String;\n-         Separator : String;\n+         Sepa      : String;\n          Param     : String;\n          Index     : Integer);\n       --  Add a new switch that has had all its aliases expanded, and switches\n@@ -2153,7 +2151,7 @@ package body GNAT.Command_Line is\n \n       procedure Add_Simple_Switch\n         (Simple    : String;\n-         Separator : String;\n+         Sepa      : String;\n          Param     : String;\n          Index     : Integer)\n       is\n@@ -2168,10 +2166,13 @@ package body GNAT.Command_Line is\n               with \"Invalid switch \" & Simple;\n          end if;\n \n-         if Separator = \"\" then\n+         if Separator /= ASCII.NUL then\n+            Sep := Separator;\n+\n+         elsif Sepa = \"\" then\n             Sep := ASCII.NUL;\n          else\n-            Sep := Separator (Separator'First);\n+            Sep := Sepa (Sepa'First);\n          end if;\n \n          if Cmd.Expanded = null then"}, {"sha": "3b5089428a681b3de3dc1695d2d3a88bc39931ba", "filename": "gcc/ada/g-comlin.ads", "status": "modified", "additions": 20, "deletions": 7, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afab164f736e5d4e746f2832f58f838e797d3bca/gcc%2Fada%2Fg-comlin.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afab164f736e5d4e746f2832f58f838e797d3bca/gcc%2Fada%2Fg-comlin.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-comlin.ads?ref=afab164f736e5d4e746f2832f58f838e797d3bca", "patch": "@@ -599,9 +599,8 @@ package GNAT.Command_Line is\n    --  format (trailing ':', '?', etc for defining a switch with parameters).\n    --\n    --  Switch should also start with the leading '-' (or any other characters).\n-   --  They should all start with the same character, though. If this\n-   --  character is not '-', you will need to call Initialize_Option_Scan to\n-   --  set the proper character for the parser.\n+   --  If this character is not '-', you will need to call\n+   --  Initialize_Option_Scan to set the proper character for the parser.\n    --\n    --  The switches defined in the command_line_configuration object are used\n    --  when ungrouping switches with more that one character after the prefix.\n@@ -812,7 +811,7 @@ package GNAT.Command_Line is\n      (Cmd        : in out Command_Line;\n       Switch     : String;\n       Parameter  : String    := \"\";\n-      Separator  : Character := ' ';\n+      Separator  : Character := ASCII.NUL;\n       Section    : String    := \"\";\n       Add_Before : Boolean   := False);\n    --  Add a new switch to the command line, and combine/group it with existing\n@@ -839,8 +838,22 @@ package GNAT.Command_Line is\n    --  added if not already present. For example, to add the -g switch into the\n    --  -cargs section, you need to call (Cmd, \"-g\", Section => \"-cargs\").\n    --\n-   --  [Separator] is ignored, and kept for backward compatibility only.\n-   --  ??? It might be removed in future versions.\n+   --  [Separator], if specified, overrides the separator that was defined\n+   --  through Define_Switch. For instance, if the switch was defined as\n+   --  \"-from:\", the separator defaults to a space. But if your application\n+   --  uses unusual separators not supported by GNAT.Command_Line (for instance\n+   --  it requires \":\"), you can specify this separator here.\n+   --  For instance,\n+   --     Add_Switch(Cmd, \"-from\", \"bar\", ':')\n+   --  results in\n+   --     -from:bar\n+   --  rather than the default\n+   --     -from bar\n+   --\n+   --  Note however that Getopt doesn't know how to handle \":\" as a separator.\n+   --  So the recommendation is to declare the switch as \"-from!\" (ie no\n+   --  space between the switch and its parameter). Then Getopt will return\n+   --  \":bar\" as the parameter, and you can trim the \":\" in your application.\n    --\n    --  Invalid_Section is raised if Section was not defined in the\n    --  configuration of the command line.\n@@ -852,7 +865,7 @@ package GNAT.Command_Line is\n      (Cmd        : in out Command_Line;\n       Switch     : String;\n       Parameter  : String    := \"\";\n-      Separator  : Character := ' ';\n+      Separator  : Character := ASCII.NUL;\n       Section    : String    := \"\";\n       Add_Before : Boolean   := False;\n       Success    : out Boolean);"}]}