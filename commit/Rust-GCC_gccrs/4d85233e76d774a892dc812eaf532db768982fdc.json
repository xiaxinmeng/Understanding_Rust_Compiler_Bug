{"sha": "4d85233e76d774a892dc812eaf532db768982fdc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGQ4NTIzM2U3NmQ3NzRhODkyZGM4MTJlYWY1MzJkYjc2ODk4MmZkYw==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2013-04-03T14:06:38Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2013-04-03T14:06:38Z"}, "message": "v850e3v5.md (fmasf4): Use fmaf.s on E3V5 architectures.\n\n\t* config/v850/v850e3v5.md (fmasf4): Use fmaf.s on E3V5\n\tarchitectures.\n\t(fmssf4): Use fmsf.s on E3V5 architectures.\n\t(fnmasf4): Use fnmaf.s on E3V5 architectures.\n\t(fnmssf4): Use fnmsf.s on E3V5 architectures.\n\nFrom-SVN: r197413", "tree": {"sha": "2e4ae4cd7a1e696685354b99b1d1bea89279e846", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2e4ae4cd7a1e696685354b99b1d1bea89279e846"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d85233e76d774a892dc812eaf532db768982fdc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d85233e76d774a892dc812eaf532db768982fdc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d85233e76d774a892dc812eaf532db768982fdc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d85233e76d774a892dc812eaf532db768982fdc/comments", "author": null, "committer": null, "parents": [{"sha": "1b2253d4f89a5e605455a0a3a9d0e18b9b3537a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b2253d4f89a5e605455a0a3a9d0e18b9b3537a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b2253d4f89a5e605455a0a3a9d0e18b9b3537a0"}], "stats": {"total": 22, "additions": 13, "deletions": 9}, "files": [{"sha": "a074f651351f8f30da863c072af3506eeaf10f98", "filename": "gcc/config/v850/v850.md", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d85233e76d774a892dc812eaf532db768982fdc/gcc%2Fconfig%2Fv850%2Fv850.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d85233e76d774a892dc812eaf532db768982fdc/gcc%2Fconfig%2Fv850%2Fv850.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850.md?ref=4d85233e76d774a892dc812eaf532db768982fdc", "patch": "@@ -2508,14 +2508,18 @@\n    (set_attr \"cc\" \"none_0hit\")\n    (set_attr \"type\" \"fpu\")])\n \n+;; Note: The FPU-2.0 (ie pre e3v5) versions of these routines do not actually\n+;; need operand 4 to be the same as operand 0.  But the FPU-2.0 versions are\n+;; also deprecated so the loss of flexibility is unimportant.\n+\n ;;; multiply-add\n (define_insn \"fmasf4\"\n   [(set (match_operand:SF         0 \"register_operand\" \"=r\")\n \t(fma:SF (match_operand:SF 1 \"register_operand\" \"r\")\n \t\t(match_operand:SF 2 \"register_operand\" \"r\")\n-\t\t(match_operand:SF 3 \"register_operand\" \"r\")))]\n+\t\t(match_operand:SF 3 \"register_operand\" \"0\")))]\n   \"TARGET_USE_FPU\"\n-  \"maddf.s %2,%1,%3,%0\"\n+  { return TARGET_V850E3V5_UP ? \"fmaf.s %1, %2, %0\" : \"maddf.s %2, %1, %3, %0\"; }\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"none_0hit\")\n    (set_attr \"type\" \"fpu\")])\n@@ -2525,9 +2529,9 @@\n   [(set (match_operand:SF                 0 \"register_operand\" \"=r\")\n \t(fma:SF (match_operand:SF         1 \"register_operand\" \"r\")\n \t\t(match_operand:SF         2 \"register_operand\" \"r\")\n-\t\t(neg:SF (match_operand:SF 3 \"register_operand\" \"r\"))))]\n+\t\t(neg:SF (match_operand:SF 3 \"register_operand\" \"0\"))))]\n   \"TARGET_USE_FPU\"\n-  \"msubf.s %2,%1,%3,%0\"\n+  { return TARGET_V850E3V5_UP ? \"fmsf.s %1, %2, %0\" : \"msubf.s %2, %1, %3, %0\"; }\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"none_0hit\")\n    (set_attr \"type\" \"fpu\")])\n@@ -2537,21 +2541,21 @@\n   [(set (match_operand:SF                 0 \"register_operand\" \"=r\")\n \t(neg:SF (fma:SF (match_operand:SF 1 \"register_operand\" \"r\")\n \t\t\t(match_operand:SF 2 \"register_operand\" \"r\")\n-\t\t\t(match_operand:SF 3 \"register_operand\" \"r\"))))]\n+\t\t\t(match_operand:SF 3 \"register_operand\" \"0\"))))]\n   \"TARGET_USE_FPU\"\n-  \"nmaddf.s %2,%1,%3,%0\"\n+  { return TARGET_V850E3V5_UP ? \"fnmaf.s %1, %2, %0\" : \"nmaddf.s %2, %1, %3, %0\"; }\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"none_0hit\")\n    (set_attr \"type\" \"fpu\")])\n \n ;; negative-multiply-subtract\n (define_insn \"fnmssf4\"\n-  [(set (match_operand:SF                 0 \"register_operand\" \"=r\")\n+  [(set (match_operand:SF                         0 \"register_operand\" \"=r\")\n \t(neg:SF (fma:SF (match_operand:SF         1 \"register_operand\" \"r\")\n \t\t\t(match_operand:SF         2 \"register_operand\" \"r\")\n-\t\t\t(neg:SF (match_operand:SF 3 \"register_operand\" \"r\")))))]\n+\t\t\t(neg:SF (match_operand:SF 3 \"register_operand\" \"0\")))))]\n   \"TARGET_USE_FPU\"\n-  \"nmsubf.s %2,%1,%3,%0\"\n+  { return TARGET_V850E3V5_UP ? \"fnmsf.s %1, %2, %0\" : \"nmsubf.s %2, %1, %3, %0\"; }\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"none_0hit\")\n    (set_attr \"type\" \"fpu\")])"}]}