{"sha": "631270a5cedfad8267a5e7b94901035212713b61", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjMxMjcwYTVjZWRmYWQ4MjY3YTVlN2I5NDkwMTAzNTIxMjcxM2I2MQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2018-03-23T04:09:06Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2018-03-23T04:09:06Z"}, "message": "[PR c++/71251] check tmpl parms in template using decl\n\nCheck that template using decls have the correct number of parm lists.\n\nfor  gcc/cp/ChangeLog\n\n\tPR c++/71251\n\t* parser.c (cp_parser_alias_declaration): Call\n\tparser_check_template_parameters.\n\nfor  gcc/testsuite/ChangeLog\n\n\tPR c++/71251\n\t* g++.dg/cpp0x/pr71251.C: New.\n\nFrom-SVN: r258793", "tree": {"sha": "1b213047c79653678507eef2f63ce198292474f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b213047c79653678507eef2f63ce198292474f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/631270a5cedfad8267a5e7b94901035212713b61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/631270a5cedfad8267a5e7b94901035212713b61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/631270a5cedfad8267a5e7b94901035212713b61", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/631270a5cedfad8267a5e7b94901035212713b61/comments", "author": null, "committer": null, "parents": [{"sha": "5904d9d923bd86849209e55550b7876e513f4896", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5904d9d923bd86849209e55550b7876e513f4896", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5904d9d923bd86849209e55550b7876e513f4896"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "cdbbd4193408ece03a15720d1b8177a6d1401554", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=631270a5cedfad8267a5e7b94901035212713b61", "patch": "@@ -1,4 +1,8 @@\n-2018-03-22  Alexandre Oliva <aoliva@redhat.com>\n+2018-03-23  Alexandre Oliva <aoliva@redhat.com>\n+\n+\tPR c++/71251\n+\t* parser.c (cp_parser_alias_declaration): Call\n+\tparser_check_template_parameters.\n \n \tPR c++/84789\n \t* pt.c (resolve_typename_type): Drop assert that stopped"}, {"sha": "602cc991ff6ed4574f6d100e0e69370522c25f62", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=631270a5cedfad8267a5e7b94901035212713b61", "patch": "@@ -18965,6 +18965,13 @@ cp_parser_alias_declaration (cp_parser* parser)\n \t\t\t       ds_alias,\n \t\t\t       using_token);\n \n+  if (parser->num_template_parameter_lists\n+      && !cp_parser_check_template_parameters (parser,\n+\t\t\t\t\t       /*num_templates=*/0,\n+\t\t\t\t\t       id_location,\n+\t\t\t\t\t       /*declarator=*/NULL))\n+    return error_mark_node;\n+\n   declarator = make_id_declarator (NULL_TREE, id, sfk_none);\n   declarator->id_loc = id_location;\n "}, {"sha": "560e6d38b840b32c3d5d3e8f8234cabdff2286e2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=631270a5cedfad8267a5e7b94901035212713b61", "patch": "@@ -1,4 +1,7 @@\n-2018-03-22  Alexandre Oliva <aoliva@redhat.com>\n+2018-03-23  Alexandre Oliva <aoliva@redhat.com>\n+\n+\tPR c++/71251\n+\t* g++.dg/cpp0x/pr71251.C: New.\n \n \tPR c++/84789\n \t* g++.dg/template/pr84789.C: New."}, {"sha": "3df831bb581d0aa8bacec2a019a9bddf630cc229", "filename": "gcc/testsuite/g++.dg/cpp0x/pr71251.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71251.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631270a5cedfad8267a5e7b94901035212713b61/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71251.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71251.C?ref=631270a5cedfad8267a5e7b94901035212713b61", "patch": "@@ -0,0 +1,15 @@\n+// { dg-do compile { target c++11 } }\n+\n+template<int,int> template<typename>\n+using U = void; // { dg-error \"too many\" }\n+\n+template<typename>\n+using V = void;\n+\n+template<typename> struct X {\n+  template<typename> template<typename>\n+  using U = void; // { dg-error \"too many\" }\n+\n+  template<typename>\n+  using V = void;\n+};"}]}