{"sha": "9adcdfb36597a9aeee255166550511aff2f5da73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWFkY2RmYjM2NTk3YTlhZWVlMjU1MTY2NTUwNTExYWZmMmY1ZGE3Mw==", "commit": {"author": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2005-04-26T19:27:11Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2005-04-26T19:27:11Z"}, "message": "rewind.c (st_rewind): Flush the stream when resetting the mode from WRITING to READING.\n\n        * io/rewind.c (st_rewind): Flush the stream when resetting the mode\n        from WRITING to READING.\n\nFrom-SVN: r98788", "tree": {"sha": "ed58975099dfe96e8daf9ff262535e7afe4c80db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed58975099dfe96e8daf9ff262535e7afe4c80db"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9adcdfb36597a9aeee255166550511aff2f5da73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9adcdfb36597a9aeee255166550511aff2f5da73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9adcdfb36597a9aeee255166550511aff2f5da73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9adcdfb36597a9aeee255166550511aff2f5da73/comments", "author": null, "committer": null, "parents": [{"sha": "2705487a7ef408a74cb31e729a962cacce39749d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2705487a7ef408a74cb31e729a962cacce39749d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2705487a7ef408a74cb31e729a962cacce39749d"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "52f6c9f88fef3a292c1bc7980fcb22d90374c1c9", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9adcdfb36597a9aeee255166550511aff2f5da73/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9adcdfb36597a9aeee255166550511aff2f5da73/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=9adcdfb36597a9aeee255166550511aff2f5da73", "patch": "@@ -1,5 +1,10 @@\n-2005-04-18 Paul Thomas <pault@gcc.gnu.org>\n-\t   Jerry DeLisle <jvdelisle@verizon.net> \n+2005-04-26  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* io/rewind.c (st_rewind): Flush the stream when resetting the mode\n+\tfrom WRITING to READING.\n+\n+2005-04-22  Paul Thomas  <pault@gcc.gnu.org>\n+\t    Jerry DeLisle  <jvdelisle@verizon.net> \n \n \t* io/write.c (nml_write_obj): Provide 1 more byte for ext_name.\n \t* io/list_read.c (nml_get_obj_data): Put extra brackets in get_mem"}, {"sha": "48d57bafaa53a719694e3e7f6253466e49f5e6f5", "filename": "libgfortran/io/rewind.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9adcdfb36597a9aeee255166550511aff2f5da73/libgfortran%2Fio%2Frewind.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9adcdfb36597a9aeee255166550511aff2f5da73/libgfortran%2Fio%2Frewind.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Frewind.c?ref=9adcdfb36597a9aeee255166550511aff2f5da73", "patch": "@@ -54,9 +54,13 @@ st_rewind (void)\n \t  /* If we have been writing to the file, the last written record\n \t     is the last record in the file, so truncate the file now.\n \t     Reset to read mode so two consecutive rewind statements\n-\t     don't delete the file contents.  */\n-          if (u->mode==WRITING)\n-            struncate(u->s);\n+\t     don't delete the file contents.  Flush buffer when switching\n+\t     mode.  */\n+          if (u->mode == WRITING)\n+\t    {\n+\t      flush (u->s);\n+\t      struncate (u->s);\n+\t    }\n \t  u->mode = READING;\n \t  u->last_record = 0;\n \t  if (sseek (u->s, 0) == FAILURE)"}]}