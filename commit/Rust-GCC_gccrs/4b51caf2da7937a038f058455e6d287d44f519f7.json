{"sha": "4b51caf2da7937a038f058455e6d287d44f519f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGI1MWNhZjJkYTc5MzdhMDM4ZjA1ODQ1NWU2ZDI4N2Q0NGY1MTlmNw==", "commit": {"author": {"name": "Kai Tietz", "email": "kai.tietz@onevision.com", "date": "2009-09-21T13:24:37Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2009-09-21T13:24:37Z"}, "message": "i386.c (ix86_expand_epilogue): Adjust offset for xmm register restore.\n\n2009-09-21  Kai Tietz  <kai.tietz@onevision.com>\n\n\t* config/i386/i386.c (ix86_expand_epilogue): Adjust offset for\n\txmm register restore.\n\n2009-09-21  Kai Tietz  <kai.tietz@onevision.com>\n\n\t* gcc.dg/torture/calleesave-sse.c: New.\n\nFrom-SVN: r151918", "tree": {"sha": "5c5d0e9d3727c64bf5fe7ec4d83dee9d121ccfb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c5d0e9d3727c64bf5fe7ec4d83dee9d121ccfb8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4b51caf2da7937a038f058455e6d287d44f519f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b51caf2da7937a038f058455e6d287d44f519f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b51caf2da7937a038f058455e6d287d44f519f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b51caf2da7937a038f058455e6d287d44f519f7/comments", "author": null, "committer": null, "parents": [{"sha": "5b5fba56fea9bbf4a3406fe32d52925dfe5e2f24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b5fba56fea9bbf4a3406fe32d52925dfe5e2f24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b5fba56fea9bbf4a3406fe32d52925dfe5e2f24"}], "stats": {"total": 54, "additions": 53, "deletions": 1}, "files": [{"sha": "9dbabcd1256a6310c3767858e8c5040c9f6845e0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4b51caf2da7937a038f058455e6d287d44f519f7", "patch": "@@ -1,3 +1,8 @@\n+2009-09-21  Kai Tietz  <kai.tietz@onevision.com>\n+\n+\t* config/i386/i386.c (ix86_expand_epilogue): Adjust offset for\n+\txmm register restore.\n+\n 2009-09-21  Jan Hubicka  <jh@suse.cz>\n \n \t* dwarf2out.c (decl_loc_table_eq): Allow decl_loc_table to be NULL."}, {"sha": "335a5260bd126a206d3a94032c87e86fa37a0a5b", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=4b51caf2da7937a038f058455e6d287d44f519f7", "patch": "@@ -8916,7 +8916,7 @@ ix86_expand_epilogue (int style)\n \t\t\t\t     hard_frame_pointer_rtx,\n \t\t\t\t     GEN_INT (offset), style, false);\n           ix86_emit_restore_sse_regs_using_mov (stack_pointer_rtx,\n-\t\t\t\t\t\tframe.to_allocate, red_offset,\n+\t\t\t\t\t\t0, red_offset,\n \t\t\t\t\t\tstyle == 2);\n \t  pro_epilogue_adjust_stack (stack_pointer_rtx, stack_pointer_rtx,\n \t\t\t\t     GEN_INT (frame.nsseregs * 16 + frame.padding0),"}, {"sha": "89f787a2e121afec9db881fa55fd5230fcbf1a79", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4b51caf2da7937a038f058455e6d287d44f519f7", "patch": "@@ -1,3 +1,7 @@\n+2009-09-21  Kai Tietz  <kai.tietz@onevision.com>\n+\n+\t* gcc.dg/torture/calleesave-sse.c: New.\n+\n 2009-09-21  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/guality/inline-params.c: New testcase."}, {"sha": "292791c7259e4e41ea4f1be8e90667edd3bd5ef5", "filename": "gcc/testsuite/gcc.dg/torture/calleesave-sse.c", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fcalleesave-sse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b51caf2da7937a038f058455e6d287d44f519f7/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fcalleesave-sse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fcalleesave-sse.c?ref=4b51caf2da7937a038f058455e6d287d44f519f7", "patch": "@@ -0,0 +1,43 @@\n+/* { dg-do run } */\n+/* { dg-options \"-fno-omit-frame-pointer\" } */\n+\n+#define alloca __builtin_alloca\n+extern void abort (void);\n+\n+__attribute__ ((noinline)) static double\n+bar (double a, double b, double c, double d, char *h)\n+{\n+  *h = 0;\n+  return a * b + b + c;\n+}\n+\n+__attribute__ ((noinline)) static int\n+boo (double a, double b, double c, double d)\n+{\n+  return c * b + a + b;\n+}\n+\n+__attribute__ ((noinline)) static double\n+foo (double a, double b, double c, double d)\n+{\n+ int aa = boo (b, c, d, a);\n+ return bar (a, b, c, d, (char *) alloca (aa))\n+\t+ bar (d, c, b, a, (char *) alloca (aa));\n+}\n+\n+int main ()\n+{\n+  double a = 2.0, b = 3.0, c = 4.0, d = 5.0;\n+  double r1, r2;\n+  int aa;\n+\n+  aa = boo (b, c, d, a);\n+  r1 = bar (a, b, c, d, (char *) alloca (aa))\n+       + bar (d, c, b, a, (char *) alloca (aa));\n+  r2 = foo (a, b, c, d);\n+\n+  if (r1 != r2)\n+    abort ();\n+  return 0;\n+}\n+"}]}