{"sha": "a5ac2cdf941a5b48a05bda9eba942706c33079a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVhYzJjZGY5NDFhNWI0OGEwNWJkYTllYmE5NDI3MDZjMzMwNzlhOA==", "commit": {"author": {"name": "Rafael Avila de Espindola", "email": "espindola@google.com", "date": "2009-11-17T16:49:22Z"}, "committer": {"name": "Rafael Espindola", "email": "espindola@gcc.gnu.org", "date": "2009-11-17T16:49:22Z"}, "message": "lto-symtab.c (lto_symtab_resolve_symbols): Always initialize the nodes.\n\n2009-11-17  Rafael Avila de Espindola  <espindola@google.com>\n\n\t* lto-symtab.c (lto_symtab_resolve_symbols): Always initialize the\n\tnodes.\n\nFrom-SVN: r154258", "tree": {"sha": "8b4e66e4e052ec0cc610772abc8c6471d7a7d7f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b4e66e4e052ec0cc610772abc8c6471d7a7d7f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5ac2cdf941a5b48a05bda9eba942706c33079a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5ac2cdf941a5b48a05bda9eba942706c33079a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5ac2cdf941a5b48a05bda9eba942706c33079a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5ac2cdf941a5b48a05bda9eba942706c33079a8/comments", "author": null, "committer": null, "parents": [{"sha": "5456cefc68db903dcb308729a3d68f619c703660", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5456cefc68db903dcb308729a3d68f619c703660", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5456cefc68db903dcb308729a3d68f619c703660"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "25080b2c96f230ddd044d8133ff7a831f2e5da44", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5ac2cdf941a5b48a05bda9eba942706c33079a8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5ac2cdf941a5b48a05bda9eba942706c33079a8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a5ac2cdf941a5b48a05bda9eba942706c33079a8", "patch": "@@ -1,3 +1,8 @@\n+2009-11-17  Rafael Avila de Espindola  <espindola@google.com>\n+\n+\t* lto-symtab.c (lto_symtab_resolve_symbols): Always initialize the\n+\tnodes.\n+\n 2009-11-17  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \tPR tree-optimization/41857"}, {"sha": "5f98a3515f288f08ba1f1f2440a9160b5a2ec473", "filename": "gcc/lto-symtab.c", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5ac2cdf941a5b48a05bda9eba942706c33079a8/gcc%2Flto-symtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5ac2cdf941a5b48a05bda9eba942706c33079a8/gcc%2Flto-symtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-symtab.c?ref=a5ac2cdf941a5b48a05bda9eba942706c33079a8", "patch": "@@ -376,20 +376,26 @@ lto_symtab_resolve_can_prevail_p (lto_symtab_entry_t e)\n static void\n lto_symtab_resolve_symbols (void **slot)\n {\n-  lto_symtab_entry_t e = (lto_symtab_entry_t) *slot;\n+  lto_symtab_entry_t e;\n   lto_symtab_entry_t prevailing = NULL;\n \n-  /* If the chain is already resolved there is nothing to do.  */\n+  /* Always set e->node so that edges are updated to reflect decl merging. */\n+  for (e = (lto_symtab_entry_t) *slot; e; e = e->next)\n+    {\n+      if (TREE_CODE (e->decl) == FUNCTION_DECL)\n+\te->node = cgraph_get_node (e->decl);\n+    }\n+\n+  e = (lto_symtab_entry_t) *slot;\n+\n+  /* If the chain is already resolved there is nothing else to do.  */\n   if (e->resolution != LDPR_UNKNOWN)\n     return;\n \n   /* Find the single non-replaceable prevailing symbol and\n      diagnose ODR violations.  */\n-  for (; e; e = e->next)\n+  for (e = (lto_symtab_entry_t) *slot; e; e = e->next)\n     {\n-      if (TREE_CODE (e->decl) == FUNCTION_DECL)\n-\te->node = cgraph_get_node (e->decl);\n-\n       if (!lto_symtab_resolve_can_prevail_p (e))\n \t{\n \t  e->resolution = LDPR_RESOLVED_IR;"}]}