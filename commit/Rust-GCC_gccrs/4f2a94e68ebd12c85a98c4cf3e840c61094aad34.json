{"sha": "4f2a94e68ebd12c85a98c4cf3e840c61094aad34", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGYyYTk0ZTY4ZWJkMTJjODVhOThjNGNmM2U4NDBjNjEwOTRhYWQzNA==", "commit": {"author": {"name": "Luis Machado", "email": "luis.machado@linaro.org", "date": "2017-11-17T16:03:37Z"}, "committer": {"name": "Luis Machado", "email": "luisgpm@gcc.gnu.org", "date": "2017-11-17T16:03:37Z"}, "message": "[AArch64] Adjust tuning parameters for Falkor\n\nDisabling software prefetching and switching the autoprefetcher to weak improves\nCPU2017 rate and speed benchmarks for both int and fp sets on Falkor.\n\nSPECrate 2017 fp is up 0.38%\nSPECspeed 2017 fp is up 0.54%\nSPECrate 2017 int is up 3.02%\nSPECspeed 2017 int is up 3.16%\n\nThere are only a couple individual regressions. The biggest one being about 4%\nin parest.\n\nFor SPEC2006, we've noticed the following:\n\nSPECint is up 0.91%\nSPECfp is stable\n\nIn the case of SPEC2006 we noticed both a big regression in mcf (about 20%)\nand a big improvement for hmmer (about 40%).\n\nSince the overall result is positive, we would like to make these new tuning\nsettings the default for Falkor.\n\nWe may revisit the software prefetcher setting in the future, in case we\ncan adjust it enough so it provides us a good balance between improvements and\nregressions (mcf). But for now it is best if it stays off.\n\n2017-11-17  Luis Machado  <luis.machado@linaro.org>\n\n\tgcc/\n\t* config/aarch64/aarch64.c\n\t(qdf24xx_prefetch_tune) <default_opt_level>: Set to -1.\n\t(qdf24xx_tunings) <autoprefetcher_model>: Set to\n\ttune_params::AUTOPREFETCHER_WEAK.\n\nFrom-SVN: r254879", "tree": {"sha": "2deacaf23158733b8502eaaea06832cf11da0d84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2deacaf23158733b8502eaaea06832cf11da0d84"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f2a94e68ebd12c85a98c4cf3e840c61094aad34", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f2a94e68ebd12c85a98c4cf3e840c61094aad34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f2a94e68ebd12c85a98c4cf3e840c61094aad34", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f2a94e68ebd12c85a98c4cf3e840c61094aad34/comments", "author": {"login": "luislinaro", "id": 53092780, "node_id": "MDQ6VXNlcjUzMDkyNzgw", "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luislinaro", "html_url": "https://github.com/luislinaro", "followers_url": "https://api.github.com/users/luislinaro/followers", "following_url": "https://api.github.com/users/luislinaro/following{/other_user}", "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions", "organizations_url": "https://api.github.com/users/luislinaro/orgs", "repos_url": "https://api.github.com/users/luislinaro/repos", "events_url": "https://api.github.com/users/luislinaro/events{/privacy}", "received_events_url": "https://api.github.com/users/luislinaro/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ec132ef20c94c5bc72cdf27138cdff2e0c96800e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec132ef20c94c5bc72cdf27138cdff2e0c96800e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec132ef20c94c5bc72cdf27138cdff2e0c96800e"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "38101fa35502cc1638674c814f0224c8d36d248d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f2a94e68ebd12c85a98c4cf3e840c61094aad34/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f2a94e68ebd12c85a98c4cf3e840c61094aad34/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4f2a94e68ebd12c85a98c4cf3e840c61094aad34", "patch": "@@ -1,3 +1,10 @@\n+2017-11-17  Luis Machado  <luis.machado@linaro.org>\n+\n+\t* config/aarch64/aarch64.c\n+\t(qdf24xx_prefetch_tune) <default_opt_level>: Set to -1.\n+\t(qdf24xx_tunings) <autoprefetcher_model>: Set to\n+\ttune_params::AUTOPREFETCHER_WEAK.\n+\n 2017-11-17  Tamar Christina  <tamar.christina@arm.com>\n \n \tPR target/82641"}, {"sha": "8779cad91d9225441ad44029bfac58a1e3c06096", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f2a94e68ebd12c85a98c4cf3e840c61094aad34/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f2a94e68ebd12c85a98c4cf3e840c61094aad34/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=4f2a94e68ebd12c85a98c4cf3e840c61094aad34", "patch": "@@ -508,7 +508,7 @@ static const cpu_prefetch_tune qdf24xx_prefetch_tune =\n   32,\t\t\t/* l1_cache_size  */\n   64,\t\t\t/* l1_cache_line_size  */\n   1024,\t\t\t/* l2_cache_size  */\n-  3\t\t\t/* default_opt_level  */\n+  -1\t\t\t/* default_opt_level  */\n };\n \n static const cpu_prefetch_tune thunderxt88_prefetch_tune =\n@@ -817,7 +817,7 @@ static const struct tune_params qdf24xx_tunings =\n   2,\t/* min_div_recip_mul_sf.  */\n   2,\t/* min_div_recip_mul_df.  */\n   0,\t/* max_case_values.  */\n-  tune_params::AUTOPREFETCHER_STRONG,\t/* autoprefetcher_model.  */\n+  tune_params::AUTOPREFETCHER_WEAK,\t/* autoprefetcher_model.  */\n   (AARCH64_EXTRA_TUNE_NONE),\t\t/* tune_flags.  */\n   &qdf24xx_prefetch_tune\n };"}]}