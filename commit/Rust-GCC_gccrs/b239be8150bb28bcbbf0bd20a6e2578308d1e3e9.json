{"sha": "b239be8150bb28bcbbf0bd20a6e2578308d1e3e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjIzOWJlODE1MGJiMjhiY2JiZjBiZDIwYTZlMjU3ODMwOGQxZTNlOQ==", "commit": {"author": {"name": "Peter O'Gorman", "email": "peter@pogma.com", "date": "2005-02-26T18:33:11Z"}, "committer": {"name": "Toon Moene", "email": "toon@gcc.gnu.org", "date": "2005-02-26T18:33:11Z"}, "message": "re PR libfortran/17748 (libgfortran contains undefined references to _environ)\n\n2005-02-26  Peter O'Gorman  <peter@pogman.com>\n            Toon Moene  <toon@moene.indiv.nluug.nl>\n\n\tPR libgfortran/17748\n\t* runtime/environ.c: Remove references to environ.\n\t(show_variables): remove GFORTRAN_UNBUFFERED_* and\n\tGFORTRAN_NAME_* because they require environ.\n\t(pattern_scan): Remove function.\n\nCo-Authored-By: Toon Moene <toon@moene.indiv.nluug.nl>\n\nFrom-SVN: r95593", "tree": {"sha": "eb64cb4cb480a3e3e09a79f859da5663dded1d41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb64cb4cb480a3e3e09a79f859da5663dded1d41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9/comments", "author": {"login": "pogma", "id": 607929, "node_id": "MDQ6VXNlcjYwNzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/607929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pogma", "html_url": "https://github.com/pogma", "followers_url": "https://api.github.com/users/pogma/followers", "following_url": "https://api.github.com/users/pogma/following{/other_user}", "gists_url": "https://api.github.com/users/pogma/gists{/gist_id}", "starred_url": "https://api.github.com/users/pogma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pogma/subscriptions", "organizations_url": "https://api.github.com/users/pogma/orgs", "repos_url": "https://api.github.com/users/pogma/repos", "events_url": "https://api.github.com/users/pogma/events{/privacy}", "received_events_url": "https://api.github.com/users/pogma/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c529e0fe2e37607ee722881c877570fbc97143bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c529e0fe2e37607ee722881c877570fbc97143bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c529e0fe2e37607ee722881c877570fbc97143bd"}], "stats": {"total": 70, "additions": 9, "deletions": 61}, "files": [{"sha": "03793e852acb2e147880607ec2e832ffa56e451d", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=b239be8150bb28bcbbf0bd20a6e2578308d1e3e9", "patch": "@@ -1,3 +1,12 @@\n+2005-02-25  Peter O'Gorman  <peter@pogman.com>\n+            Toon Moene  <toon@moene.indiv.nluug.nl>\n+\n+\tPR libgfortran/17748\n+\t* runtime/environ.c: Remove references to environ.\n+\t(show_variables): remove GFORTRAN_UNBUFFERED_* and \n+\tGFORTRAN_NAME_* because they require environ.\n+\t(pattern_scan): Remove function.\n+\n 2004-02-22  Paul Thomas <paulthomas2@wannado.fr>\n \t    Bud Davis  <bdavis@gfortran.org>\n "}, {"sha": "9fb6ed41939052792106dd4abaaf9bc255977662", "filename": "libgfortran/runtime/environ.c", "status": "modified", "additions": 0, "deletions": 61, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9/libgfortran%2Fruntime%2Fenviron.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b239be8150bb28bcbbf0bd20a6e2578308d1e3e9/libgfortran%2Fruntime%2Fenviron.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fruntime%2Fenviron.c?ref=b239be8150bb28bcbbf0bd20a6e2578308d1e3e9", "patch": "@@ -48,7 +48,6 @@ Boston, MA 02111-1307, USA.  */\n \n options_t options = { };\n \n-extern char **environ;\n \n typedef struct variable\n {\n@@ -464,12 +463,6 @@ static variable variable_table[] = {\n   {\"GFORTRAN_SHOW_LOCUS\", 1, &options.locus, init_boolean, show_boolean,\n    \"If TRUE, print filename and line number where runtime errors happen.\"},\n \n-/* GFORTRAN_NAME_xx (where xx is a unit number) gives the names of files\n- * preconnected to those units. */\n-\n-/* GFORTRAN_UNBUFFERED_xx (where xx is a unit number) gives a boolean that is used\n- * to turn off buffering for that unit. */\n-\n   {\"GFORTRAN_OPTIONAL_PLUS\", 0, &options.optional_plus, init_boolean, show_boolean,\n    \"Print optional plus signs in numbers where permitted.  Default FALSE.\"},\n \n@@ -577,43 +570,9 @@ check_buffered (int n)\n }\n \n \n-/* pattern_scan()-- Given an environment string, check that the name\n- * has the same name as the pattern followed by an integer.  On a\n- * match, a pointer to the value is returned and the integer pointed\n- * to by n is updated.  Returns NULL on no match. */\n-\n-static char *\n-pattern_scan (char *env, const char *pattern, int *n)\n-{\n-  char *p;\n-  size_t len;\n-\n-  len = strlen (pattern);\n-  if (strncasecmp (env, pattern, len) != 0)\n-    return NULL;\n-  p = env + len;\n-\n-  if (!isdigit (*p))\n-    return NULL;\n-\n-  while (isdigit (*p))\n-    p++;\n-\n-  if (*p != '=')\n-    return NULL;\n-\n-  *p = '\\0';\n-  *n = atoi (env + len);\n-  *p++ = '=';\n-\n-  return p;\n-}\n-\n-\n void\n show_variables (void)\n {\n-  char *p, **e;\n   variable *v;\n   int n;\n \n@@ -640,26 +599,6 @@ show_variables (void)\n       st_printf (\"%s\\n\\n\", v->desc);\n     }\n \n-  st_printf (\"\\nDefault unit names (GFORTRAN_NAME_x):\\n\");\n-\n-  for (e = environ; *e; e++)\n-    {\n-      p = pattern_scan (*e, \"GFORTRAN_NAME_\", &n);\n-      if (p == NULL)\n-\tcontinue;\n-      st_printf (\"GFORTRAN_NAME_%d         %s\\n\", n, p);\n-    }\n-\n-  st_printf (\"\\nUnit buffering overrides (GFORTRAN_UNBUFFERED_x):\\n\");\n-  for (e = environ; *e; e++)\n-    {\n-      p = pattern_scan (*e, \"GFORTRAN_UNBUFFERED_\", &n);\n-      if (p == NULL)\n-\tcontinue;\n-\n-      st_printf (\"GFORTRAN_UNBUFFERED_%d = %s\\n\", n, p);\n-    }\n-\n   /* System error codes */\n \n   st_printf (\"\\nRuntime error codes:\");"}]}