{"sha": "c6469b460a0cdbf626ea8c961324aabd1e6a40b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzY0NjliNDYwYTBjZGJmNjI2ZWE4Yzk2MTMyNGFhYmQxZTZhNDBiOA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-03-16T06:04:33Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-03-16T06:04:33Z"}, "message": "(main): Report errors in output to pcp_outfile.\n\n(write_output): Use pfatal_with_name for errors.\n\nFrom-SVN: r3755", "tree": {"sha": "d43dabd97fa807da566ade2d265344f4654698bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d43dabd97fa807da566ade2d265344f4654698bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6469b460a0cdbf626ea8c961324aabd1e6a40b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6469b460a0cdbf626ea8c961324aabd1e6a40b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6469b460a0cdbf626ea8c961324aabd1e6a40b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6469b460a0cdbf626ea8c961324aabd1e6a40b8/comments", "author": null, "committer": null, "parents": [{"sha": "af2cc4dd6953054b4a1d068dc5bffeeb6170f37b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af2cc4dd6953054b4a1d068dc5bffeeb6170f37b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af2cc4dd6953054b4a1d068dc5bffeeb6170f37b"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "b6daed9ae7388eb2c55059879a44b3ca0ef227c2", "filename": "gcc/cccp.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6469b460a0cdbf626ea8c961324aabd1e6a40b8/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6469b460a0cdbf626ea8c961324aabd1e6a40b8/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=c6469b460a0cdbf626ea8c961324aabd1e6a40b8", "patch": "@@ -1905,6 +1905,10 @@ main (argc, argv)\n     }\n   }\n \n+  if (pcp_outfile && pcp_outfile != stdout\n+      && (ferror (pcp_outfile) || fclose (pcp_outfile) != 0))\n+    fatal (\"I/O error on `-pcp' output\");\n+\n   if (ferror (stdout) || fclose (stdout) != 0)\n     fatal (\"I/O error on output\");\n \n@@ -4687,9 +4691,9 @@ write_output ()\n \tsprintf (line_command, \"\\n# %d \\\"%s\\\"\\n\",\n \t\t next_string->lineno, next_string->filename);\n \tif (write (fileno (stdout), line_command, strlen (line_command)) < 0)\n-\t  perror_with_name (out_fname);\n+\t  pfatal_with_name (out_fname);\n \tif (write (fileno (stdout), next_string->contents, next_string->len) < 0)\n-\t  perror_with_name (out_fname);\n+\t  pfatal_with_name (out_fname);\n       }\t      \n       next_string = next_string->chain;\n     }\n@@ -4700,7 +4704,7 @@ write_output ()\n \t     : outbuf.bufp - cur_buf_loc);\n       \n       if (write (fileno (stdout), cur_buf_loc, len) < len)\n-\tperror_with_name (out_fname);\n+\tpfatal_with_name (out_fname);\n       cur_buf_loc += len;\n     }\n   }"}]}