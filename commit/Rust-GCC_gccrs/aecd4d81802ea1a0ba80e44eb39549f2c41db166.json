{"sha": "aecd4d81802ea1a0ba80e44eb39549f2c41db166", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWVjZDRkODE4MDJlYTFhMGJhODBlNDRlYjM5NTQ5ZjJjNDFkYjE2Ng==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-01-01T20:22:17Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-01-01T20:22:17Z"}, "message": "re PR debug/42455 (\"-fcompare-debug failure\" at -O2 in 'recent' builds)\n\n2010-01-01  Richard Guenther  <rguenther@suse.de>\n\n\tPR debug/42455\n\t* tree-sra.c (analyze_all_variable_accesses): Work in DECL_UID\n\torder.\n\nFrom-SVN: r155559", "tree": {"sha": "b60d26c70152305eb69b0659a14fa41534340bde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b60d26c70152305eb69b0659a14fa41534340bde"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aecd4d81802ea1a0ba80e44eb39549f2c41db166", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aecd4d81802ea1a0ba80e44eb39549f2c41db166", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aecd4d81802ea1a0ba80e44eb39549f2c41db166", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aecd4d81802ea1a0ba80e44eb39549f2c41db166/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dadab4fd220ff852e68afdd855a5702d3eb22447", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dadab4fd220ff852e68afdd855a5702d3eb22447", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dadab4fd220ff852e68afdd855a5702d3eb22447"}], "stats": {"total": 79, "additions": 45, "deletions": 34}, "files": [{"sha": "81f5e2bef37cf6b7a6ceff2a89c2da82f71ab433", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aecd4d81802ea1a0ba80e44eb39549f2c41db166/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aecd4d81802ea1a0ba80e44eb39549f2c41db166/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aecd4d81802ea1a0ba80e44eb39549f2c41db166", "patch": "@@ -1,3 +1,9 @@\n+2010-01-01  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR debug/42455\n+\t* tree-sra.c (analyze_all_variable_accesses): Work in DECL_UID\n+\torder.\n+\n 2010-01-01  Richard Guenther  <rguenther@suse.de>\n \n \tPR c/42570"}, {"sha": "65d270ff2d1f172673ef6978c8fc5765f6333bbd", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 39, "deletions": 34, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aecd4d81802ea1a0ba80e44eb39549f2c41db166/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aecd4d81802ea1a0ba80e44eb39549f2c41db166/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=aecd4d81802ea1a0ba80e44eb39549f2c41db166", "patch": "@@ -1,7 +1,7 @@\n /* Scalar Replacement of Aggregates (SRA) converts some structure\n    references into scalar references, exposing them to the scalar\n    optimizers.\n-   Copyright (C) 2008, 2009 Free Software Foundation, Inc.\n+   Copyright (C) 2008, 2009, 2010 Free Software Foundation, Inc.\n    Contributed by Martin Jambor <mjambor@suse.cz>\n \n This file is part of GCC.\n@@ -1885,45 +1885,50 @@ propagate_all_subaccesses (void)\n static bool\n analyze_all_variable_accesses (void)\n {\n-  tree var;\n-  referenced_var_iterator rvi;\n   int res = 0;\n+  bitmap tmp = BITMAP_ALLOC (NULL);\n+  bitmap_iterator bi;\n+  unsigned i;\n \n-  FOR_EACH_REFERENCED_VAR (var, rvi)\n-    if (bitmap_bit_p (candidate_bitmap, DECL_UID (var)))\n-      {\n-\tstruct access *access;\n-\n-\taccess = sort_and_splice_var_accesses (var);\n-\tif (access)\n-\t  build_access_trees (access);\n-\telse\n-\t  disqualify_candidate (var,\n-\t\t\t\t\"No or inhibitingly overlapping accesses.\");\n-      }\n+  bitmap_copy (tmp, candidate_bitmap);\n+  EXECUTE_IF_SET_IN_BITMAP (tmp, 0, i, bi)\n+    {\n+      tree var = referenced_var (i);\n+      struct access *access;\n+\n+      access = sort_and_splice_var_accesses (var);\n+      if (access)\n+\tbuild_access_trees (access);\n+      else\n+\tdisqualify_candidate (var,\n+\t\t\t      \"No or inhibitingly overlapping accesses.\");\n+    }\n \n   propagate_all_subaccesses ();\n \n-  FOR_EACH_REFERENCED_VAR (var, rvi)\n-    if (bitmap_bit_p (candidate_bitmap, DECL_UID (var)))\n-      {\n-\tstruct access *access = get_first_repr_for_decl (var);\n+  bitmap_copy (tmp, candidate_bitmap);\n+  EXECUTE_IF_SET_IN_BITMAP (tmp, 0, i, bi)\n+    {\n+      tree var = referenced_var (i);\n+      struct access *access = get_first_repr_for_decl (var);\n \n-\tif (analyze_access_trees (access))\n-\t  {\n-\t    res++;\n-\t    if (dump_file && (dump_flags & TDF_DETAILS))\n-\t      {\n-\t\tfprintf (dump_file, \"\\nAccess trees for \");\n-\t\tprint_generic_expr (dump_file, var, 0);\n-\t\tfprintf (dump_file, \" (UID: %u): \\n\", DECL_UID (var));\n-\t\tdump_access_tree (dump_file, access);\n-\t\tfprintf (dump_file, \"\\n\");\n-\t      }\n-\t  }\n-\telse\n-\t  disqualify_candidate (var, \"No scalar replacements to be created.\");\n-      }\n+      if (analyze_access_trees (access))\n+\t{\n+\t  res++;\n+\t  if (dump_file && (dump_flags & TDF_DETAILS))\n+\t    {\n+\t      fprintf (dump_file, \"\\nAccess trees for \");\n+\t      print_generic_expr (dump_file, var, 0);\n+\t      fprintf (dump_file, \" (UID: %u): \\n\", DECL_UID (var));\n+\t      dump_access_tree (dump_file, access);\n+\t      fprintf (dump_file, \"\\n\");\n+\t    }\n+\t}\n+      else\n+\tdisqualify_candidate (var, \"No scalar replacements to be created.\");\n+    }\n+\n+  BITMAP_FREE (tmp);\n \n   if (res)\n     {"}]}