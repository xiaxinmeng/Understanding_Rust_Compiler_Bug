{"sha": "8cadae7e83c8090de6e91ba835107ead73d553e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGNhZGFlN2U4M2M4MDkwZGU2ZTkxYmE4MzUxMDdlYWQ3M2Q1NTNlNw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2003-03-15T17:06:24Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2003-03-15T17:06:24Z"}, "message": "re PR debug/6387 (-fpic -gdwarf-2 -g1 combination give ICE in dwarf2out)\n\n        PR debug/6387\n        * dwarf2out.c (dwarf2out_decl): If we're at -g1, just stick nested\n        function DIEs at toplevel.\n        (decls_for_scope): At -g1, don't descend into subblocks.\n\nFrom-SVN: r64410", "tree": {"sha": "b3b0dcb311f7dbbc7572f89d71648eaaefa477d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3b0dcb311f7dbbc7572f89d71648eaaefa477d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8cadae7e83c8090de6e91ba835107ead73d553e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cadae7e83c8090de6e91ba835107ead73d553e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cadae7e83c8090de6e91ba835107ead73d553e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cadae7e83c8090de6e91ba835107ead73d553e7/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ac2768ff6b723ab0899f516e4541b38bff595a41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac2768ff6b723ab0899f516e4541b38bff595a41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac2768ff6b723ab0899f516e4541b38bff595a41"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "2a73783cee6d9ea4199241c8fc315fd347e15012", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cadae7e83c8090de6e91ba835107ead73d553e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cadae7e83c8090de6e91ba835107ead73d553e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8cadae7e83c8090de6e91ba835107ead73d553e7", "patch": "@@ -1,3 +1,10 @@\n+2003-03-15  Jason Merrill  <jason@redhat.com>\n+\n+\tPR debug/6387\n+\t* dwarf2out.c (dwarf2out_decl): If we're at -g1, just stick nested\n+\tfunction DIEs at toplevel.\n+\t(decls_for_scope): At -g1, don't descend into subblocks.\n+\n 2003-03-15  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* varasm.c (struct rtx_const): Change type of un.addr member"}, {"sha": "e31fcb878d38865a2368dcc5102dc342e4251454", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cadae7e83c8090de6e91ba835107ead73d553e7/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cadae7e83c8090de6e91ba835107ead73d553e7/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=8cadae7e83c8090de6e91ba835107ead73d553e7", "patch": "@@ -12018,6 +12018,10 @@ decls_for_scope (stmt, context_die, depth)\n \tgen_decl_die (decl, context_die);\n     }\n \n+  /* If we're at -g1, we're not interested in subblocks.  */\n+  if (debug_info_level <= DINFO_LEVEL_TERSE)\n+    return;\n+\n   /* Output the DIEs to represent all sub-blocks (and the items declared\n      therein) of this block.  */\n   for (subblocks = BLOCK_SUBBLOCKS (stmt);\n@@ -12286,7 +12290,9 @@ dwarf2out_decl (decl)\n       /* If we're a nested function, initially use a parent of NULL; if we're\n \t a plain function, this will be fixed up in decls_for_scope.  If\n \t we're a method, it will be ignored, since we already have a DIE.  */\n-      if (decl_function_context (decl))\n+      if (decl_function_context (decl)\n+\t  /* But if we're in terse mode, we don't care about scope.  */\n+\t  && debug_info_level > DINFO_LEVEL_TERSE)\n \tcontext_die = NULL;\n       break;\n "}]}