{"sha": "ecdacbb3050849a2548475f0f632c13df0f38352", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNkYWNiYjMwNTA4NDlhMjU0ODQ3NWYwZjYzMmMxM2RmMGYzODM1Mg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-22T06:17:55Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-22T06:17:55Z"}, "message": "Don't crash on invalid type conversion.\n\nFrom-SVN: r168161", "tree": {"sha": "ca822584da85caa0eb7b9e2aa257c6cc5593c43d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca822584da85caa0eb7b9e2aa257c6cc5593c43d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ecdacbb3050849a2548475f0f632c13df0f38352", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecdacbb3050849a2548475f0f632c13df0f38352", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecdacbb3050849a2548475f0f632c13df0f38352", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecdacbb3050849a2548475f0f632c13df0f38352/comments", "author": null, "committer": null, "parents": [{"sha": "8dcfef8f2b2ad81873c1d2bb55182125e3190557", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dcfef8f2b2ad81873c1d2bb55182125e3190557", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dcfef8f2b2ad81873c1d2bb55182125e3190557"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "114712b8591e55bb8108ec8132d66394aa61e4f3", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecdacbb3050849a2548475f0f632c13df0f38352/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecdacbb3050849a2548475f0f632c13df0f38352/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=ecdacbb3050849a2548475f0f632c13df0f38352", "patch": "@@ -3242,6 +3242,18 @@ Type_conversion_expression::do_check_types(Gogo*)\n   Type* expr_type = this->expr_->type();\n   std::string reason;\n \n+  if (type->is_error_type()\n+      || type->is_undefined()\n+      || expr_type->is_error_type()\n+      || expr_type->is_undefined())\n+    {\n+      // Make sure we emit an error for an undefined type.\n+      type->base();\n+      expr_type->base();\n+      this->set_is_error();\n+      return;\n+    }\n+\n   if (this->may_convert_function_types_\n       && type->function_type() != NULL\n       && expr_type->function_type() != NULL)"}]}