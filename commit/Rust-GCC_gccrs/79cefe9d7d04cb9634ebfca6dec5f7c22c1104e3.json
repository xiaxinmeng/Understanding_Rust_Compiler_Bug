{"sha": "79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzljZWZlOWQ3ZDA0Y2I5NjM0ZWJmY2E2ZGVjNWY3YzIyYzExMDRlMw==", "commit": {"author": {"name": "Doug Rupp", "email": "rupp@adacore.com", "date": "2017-11-16T16:06:48Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2017-11-16T16:06:48Z"}, "message": "Makefile.in: Merge Aarch64 and ARM \"ifeq\" blocks.\n\n2017-11-16  Doug Rupp  <rupp@adacore.com>\n\n\t* gcc-interface/Makefile.in: Merge Aarch64 and ARM \"ifeq\" blocks.\n\nFrom-SVN: r254829", "tree": {"sha": "74b427b03e75211604ef3c6d03dfa39468e8f0fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74b427b03e75211604ef3c6d03dfa39468e8f0fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3/comments", "author": {"login": "Cementitious", "id": 115579865, "node_id": "U_kgDOBuOb2Q", "avatar_url": "https://avatars.githubusercontent.com/u/115579865?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cementitious", "html_url": "https://github.com/Cementitious", "followers_url": "https://api.github.com/users/Cementitious/followers", "following_url": "https://api.github.com/users/Cementitious/following{/other_user}", "gists_url": "https://api.github.com/users/Cementitious/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cementitious/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cementitious/subscriptions", "organizations_url": "https://api.github.com/users/Cementitious/orgs", "repos_url": "https://api.github.com/users/Cementitious/repos", "events_url": "https://api.github.com/users/Cementitious/events{/privacy}", "received_events_url": "https://api.github.com/users/Cementitious/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d2ca577995765e99c5cb21d30ab3baf81398ce39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2ca577995765e99c5cb21d30ab3baf81398ce39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2ca577995765e99c5cb21d30ab3baf81398ce39"}], "stats": {"total": 53, "additions": 37, "deletions": 16}, "files": [{"sha": "28cfd17112b2de9ec369fb4b5827ae042d1d41d6", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3", "patch": "@@ -1,3 +1,7 @@\n+2017-11-16  Doug Rupp  <rupp@adacore.com>\n+\n+\t* gcc-interface/Makefile.in: Merge Aarch64 and ARM \"ifeq\" blocks.\n+\n 2017-11-16  Steve Baird  <baird@adacore.com>\n \n \t* debug.adb: Update another comment to indicate gnat2scil's use of the"}, {"sha": "db67dcbf1879a92929a8500cd7479192b7e840f9", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 33, "deletions": 16, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=79cefe9d7d04cb9634ebfca6dec5f7c22c1104e3", "patch": "@@ -763,17 +763,29 @@ ifeq ($(strip $(filter-out %86 x86_64 wrs vxworks vxworks7,$(target_cpu) $(targe\n   endif\n endif\n \n-# ARM VxWorks\n-ifeq ($(strip $(filter-out arm% coff wrs vx%,$(target_cpu) $(target_vendor) $(target_os))),)\n+# ARM and Aarch64 VxWorks\n+ifeq ($(strip $(filter-out aarch64 arm% coff wrs vx%,$(target_cpu) $(target_vendor) $(target_os))),)\n \n-  ifeq ($(strip $(filter-out vxworks7%, $(target_os))),)\n-     SVX=system-vxworks7\n-     EH_MECHANISM=-arm\n-     SIGTRAMP_OBJ=sigtramp-armvxworks.o\n+  ifeq ($(strip $(filter-out aarch64, $(target_cpu))),)\n+    ARCH_STR=aarch64\n+    SVX=system-vxworks7\n+    EH_MECHANISM=-gcc\n+    SIGTRAMP_OBJ=sigtramp-vxworks.o\n   else\n-     SVX=system-vxworks\n-     EH_MECHANISM=-gcc\n-     SIGTRAMP_OBJ=sigtramp-vxworks.o\n+    ifeq ($(strip $(filter-out arm%, $(target_cpu))),)\n+      ARCH_STR=arm\n+      ifeq ($(strip $(filter-out vxworks7%, $(target_os))),)\n+        SVX=system-vxworks7\n+        EH_MECHANISM=-arm\n+        SIGTRAMP_OBJ=sigtramp-armvxworks.o\n+      else\n+        SVX=system-vxworks\n+        EH_MECHANISM=-gcc\n+        SIGTRAMP_OBJ=sigtramp-vxworks.o\n+      endif\n+    else\n+      ARCH_STR=coff\n+    endif\n   endif\n \n   LIBGNAT_TARGET_PAIRS = \\\n@@ -793,7 +805,7 @@ ifeq ($(strip $(filter-out arm% coff wrs vx%,$(target_cpu) $(target_vendor) $(ta\n   s-taprop.adb<libgnarl/s-taprop__vxworks.adb \\\n   s-tasinf.ads<libgnarl/s-tasinf__vxworks.ads \\\n   s-taspri.ads<libgnarl/s-taspri__vxworks.ads \\\n-  s-vxwork.ads<libgnarl/s-vxwork__arm.ads \\\n+  s-vxwork.ads<libgnarl/s-vxwork__$(ARCH_STR).ads \\\n   g-socthi.ads<libgnat/g-socthi__vxworks.ads \\\n   g-socthi.adb<libgnat/g-socthi__vxworks.adb \\\n   g-stsifd.adb<libgnat/g-stsifd__sockets.adb\n@@ -806,7 +818,7 @@ ifeq ($(strip $(filter-out arm% coff wrs vx%,$(target_cpu) $(target_vendor) $(ta\n     s-vxwext.ads<libgnarl/s-vxwext__rtp.ads \\\n     s-vxwext.adb<libgnarl/s-vxwext__rtp-smp.adb \\\n     s-tpopsp.adb<libgnarl/s-tpopsp__vxworks-tls.adb \\\n-    system.ads<libgnat/$(SVX)-arm-rtp-smp.ads\n+    system.ads<libgnat/$(SVX)-$(ARCH_STR)-rtp-smp.ads\n \n     EXTRA_LIBGNAT_OBJS+=affinity.o\n \n@@ -819,7 +831,7 @@ ifeq ($(strip $(filter-out arm% coff wrs vx%,$(target_cpu) $(target_vendor) $(ta\n       s-tpopsp.adb<libgnarl/s-tpopsp__vxworks-tls.adb \\\n       s-vxwext.ads<libgnarl/s-vxwext__kernel.ads \\\n       s-vxwext.adb<libgnarl/s-vxwext__kernel-smp.adb \\\n-      system.ads<libgnat/$(SVX)-arm.ads\n+      system.ads<libgnat/$(SVX)-$(ARCH_STR).ads\n \n       EXTRA_LIBGNAT_OBJS+=affinity.o\n \n@@ -828,7 +840,7 @@ ifeq ($(strip $(filter-out arm% coff wrs vx%,$(target_cpu) $(target_vendor) $(ta\n     else\n       LIBGNAT_TARGET_PAIRS += \\\n       s-tpopsp.adb<libgnarl/s-tpopsp__vxworks.adb \\\n-      system.ads<libgnat/$(SVX)-arm.ads\n+      system.ads<libgnat/$(SVX)-$(ARCH_STR).ads\n \n       ifeq ($(strip $(filter-out kernel,$(THREAD_KIND))),)\n         LIBGNAT_TARGET_PAIRS += \\\n@@ -847,15 +859,20 @@ ifeq ($(strip $(filter-out arm% coff wrs vx%,$(target_cpu) $(target_vendor) $(ta\n \n   EXTRA_LIBGNAT_OBJS+=vx_stack_info.o\n \n-  ifeq ($(strip $(filter-out vxworks7%, $(target_os))),)\n+  ifeq ($(strip $(filter-out arm vxworks7%, $(target_cpu) $(target_os))),)\n     GCC_SPEC_FILES+=vxworks7-rtp-base-link.spec\n   else\n+    ifeq ($(strip $(filter-out aarch64, $(target_cpu))),)\n+      GCC_SPEC_FILES+=vxworks7-rtp-base-link.spec\n+    endif\n     EXTRA_ADALIB_OBJS+=$(VX_CRTBE_EXTRA_ADALIB_OBJS)\n     EXTRA_LIBGNAT_SRCS+=vx_crtbegin.inc\n     GCC_SPEC_FILES+=vxworks-gnat-crtbe-link.spec\n \n-    GCC_SPEC_FILES+=vxworks-arm-link.spec\n-    GCC_SPEC_FILES+=vxworks-smp-arm-link.spec\n+    ifneq ($(strip $(filter-out vxworks7%, $(target_os))),)\n+      GCC_SPEC_FILES+=vxworks-arm-link.spec\n+      GCC_SPEC_FILES+=vxworks-smp-arm-link.spec\n+    endif\n   endif\n endif\n "}]}