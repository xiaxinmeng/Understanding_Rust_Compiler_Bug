{"sha": "360f7fb4e560e4effa6a3ca4540820400e5f1764", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzYwZjdmYjRlNTYwZTRlZmZhNmEzY2E0NTQwODIwNDAwZTVmMTc2NA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-10-23T02:42:36Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-10-23T02:42:36Z"}, "message": "re PR libfortran/37707 (Namelist read of array of derived type incorrect)\n\n2008-10-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libfortran/37707\n\t* gfortran.dg/namelist_18.f90: Update test.\n\t* gfortran.dg/namelist_55.f90: New test.\n\t* gfortran.dg/namelist_56.f90: New test.\n\nFrom-SVN: r141318", "tree": {"sha": "4999dda78d1b58bac57a0bf12f0c78b761cff5f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4999dda78d1b58bac57a0bf12f0c78b761cff5f8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/360f7fb4e560e4effa6a3ca4540820400e5f1764", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/360f7fb4e560e4effa6a3ca4540820400e5f1764", "html_url": "https://github.com/Rust-GCC/gccrs/commit/360f7fb4e560e4effa6a3ca4540820400e5f1764", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/360f7fb4e560e4effa6a3ca4540820400e5f1764/comments", "author": null, "committer": null, "parents": [{"sha": "a7f5d0542a6cad8303a025b07a48d2855091fefa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7f5d0542a6cad8303a025b07a48d2855091fefa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7f5d0542a6cad8303a025b07a48d2855091fefa"}], "stats": {"total": 80, "additions": 79, "deletions": 1}, "files": [{"sha": "e5bd048b82adc59126a913f3e712522036bc16e6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=360f7fb4e560e4effa6a3ca4540820400e5f1764", "patch": "@@ -1,3 +1,10 @@\n+2008-10-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libfortran/37707\n+\t* gfortran.dg/namelist_18.f90: Update test.\n+\t* gfortran.dg/namelist_55.f90: New test.\n+\t* gfortran.dg/namelist_56.f90: New test.\n+\n 2008-10-22  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n \t* gcc.target/bfin/hisilh.c: New file."}, {"sha": "92b18758b4426ff1ba72f72bab8caf82d357b97c", "filename": "gcc/testsuite/gfortran.dg/namelist_18.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_18.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_18.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_18.f90?ref=360f7fb4e560e4effa6a3ca4540820400e5f1764", "patch": "@@ -14,7 +14,7 @@ program namelist_18\n   read (10, '(a)', iostat = ier) buffer\n   if (ier .ne. 0) call abort ()\n   close (10)\n-  If ((buffer(5:5) /= \"f\") .or. (buffer(9:9) /= \" \")) call abort () \n+  If ((buffer(6:6) /= \"f\") .or. (buffer(9:9) /= \"\"\"\")) call abort () \n \n   open (10, status = \"scratch\", delim =\"quote\")\n   write (10, mynml)"}, {"sha": "20c7a219cd6b338e87cb22612de06827ccaff4ac", "filename": "gcc/testsuite/gfortran.dg/namelist_55.f90", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_55.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_55.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_55.f90?ref=360f7fb4e560e4effa6a3ca4540820400e5f1764", "patch": "@@ -0,0 +1,50 @@\n+! { dg-do run }\n+! PR37707 Namelist read of array of derived type incorrect\n+! Test case from PR, prepared by Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+TYPE geometry\n+   INTEGER :: nlon,nlat,nlev,projection\n+   INTEGER :: center,subcenter,process\n+   REAL    :: west,south,east,north\n+   REAL    :: dlon,dlat\n+   REAL    :: polat,polon\n+   REAL    :: lonc,latc\n+   REAL    :: projlat,projlat2,projlon\n+   CHARACTER(LEN=1) :: arakawa ='#'\n+   INTEGER :: truncx,truncy   ! Spectral truncation\n+   INTEGER :: cie             ! Flag fort CI (0), CIE gridpoint (1)\n+                              ! or CIE spectral (-1)\n+   INTEGER :: nlat_i,nlon_i   ! I length in Y and X direction\n+   INTEGER :: nlat_e ,nlon_e  ! E length in Y and X direction\n+   LOGICAL :: do_geo = .true.\n+END TYPE geometry\n+\n+TYPE shortkey\n+   INTEGER           :: PPP !  2. Parameter\n+   INTEGER           :: NNN ! 12. Gridpoint or spectral field 0 = gridpoint, 1 = spectral\n+   INTEGER           :: INTPM\n+   CHARACTER(LEN=16) :: name\n+END TYPE shortkey\n+INTEGER, PARAMETER :: maxl       = 200  ! Maximum number of levels to be read from namelist\n+INTEGER, PARAMETER :: max_atmkey = 10   ! Maximum number of extra fields in the\n+\n+REAL    :: ahalf(maxl),bhalf(maxl)\n+TYPE (geometry) :: outgeo ; SAVE outgeo  ! Output geometry\n+\n+TYPE (shortkey) ::  atmkey(max_atmkey) ; SAVE atmkey\n+TYPE (shortkey) :: mlevkey(max_atmkey) ; SAVE mlevkey\n+\n+character*600 :: l = \" &NAMINTERP atmkey%ppp = 076,058,062,079, atmkey%nnn = 000,000,000,000, &\n+                     & atmkey%name ='LIQUID_WATER','SOLID_WATER','SNOW','RAIN', OUTGEO%NLEV=10, &\n+                     & AHALF=0.,1.,2.,3.,4.,5.,6.,7.,8.,9., BHALF=0.,1.,2.,3.,4.,5.,6.,7.,8.,9., /\"\n+\n+namelist /naminterp/outgeo,ahalf,bhalf,atmkey\n+print *, outgeo%nlev\n+read(l,nml=naminterp)\n+if (outgeo%nlev /= 10) call abort\n+if (any(ahalf(1:10) .ne. [0.,1.,2.,3.,4.,5.,6.,7.,8.,9.])) call abort\n+if (any(bhalf(1:10) .ne. [0.,1.,2.,3.,4.,5.,6.,7.,8.,9.])) call abort\n+if (any(atmkey(1:4)%ppp .ne. [076,058,062,079])) call abort\n+if (any(atmkey(1:4)%nnn .ne. [0,0,0,0])) call abort\n+if (any(atmkey(1:4)%name .ne. ['LIQUID_WATER','SOLID_WATER ','SNOW        ',&\n+                              &'RAIN        '])) call abort\n+end"}, {"sha": "03fda759f5c3df912e2629539b2dbcf486c8b72e", "filename": "gcc/testsuite/gfortran.dg/namelist_56.f90", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_56.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360f7fb4e560e4effa6a3ca4540820400e5f1764/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_56.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_56.f90?ref=360f7fb4e560e4effa6a3ca4540820400e5f1764", "patch": "@@ -0,0 +1,21 @@\n+! { dg-do run }\n+! PR37707 Namelist read of array of derived type incorrect\n+! Test case from Tobias Burnus\n+  IMPLICIT NONE\n+  integer :: j\n+  character(len=5) :: str(4)\n+  character(len=900) :: nlstr\n+  namelist /nml/ str, j\n+  str = ''\n+  j = -42\n+  nlstr = '&nml str = \"a\", \"b\", \"cde\", j = 5 /'\n+  read(nlstr,nml)\n+  write(99,nml)\n+  rewind(99)\n+  j = -54\n+  str = 'XXXX'\n+  read(99,nml)\n+  if (j.ne.5) call abort\n+  if (any(str.ne.[\"a    \",\"b    \",\"cde  \",\"     \"])) call abort\n+  close(99,status=\"delete\")\n+end"}]}