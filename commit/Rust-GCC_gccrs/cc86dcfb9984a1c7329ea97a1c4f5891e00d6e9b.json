{"sha": "cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2M4NmRjZmI5OTg0YTFjNzMyOWVhOTdhMWM0ZjU4OTFlMDBkNmU5Yg==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-10-02T21:40:55Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-10-02T21:40:55Z"}, "message": "jni.exp (gcj_jni_test_one): For darwin, use -shared-libgcc not -lgcc_s, and explain why.\n\n2005-10-02  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        * testsuite/lib/jni.exp (gcj_jni_test_one): For\n        darwin, use -shared-libgcc not -lgcc_s, and explain why.\n        (gcj_jni_invocation_test_one): Likewise.\n\nFrom-SVN: r104878", "tree": {"sha": "29a5cc220b59e7a1521b9660e3761e7869ac8000", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29a5cc220b59e7a1521b9660e3761e7869ac8000"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b/comments", "author": null, "committer": null, "parents": [{"sha": "c0ad5a317379afbc3dfb0fb1fd4e6fdb98aab8e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0ad5a317379afbc3dfb0fb1fd4e6fdb98aab8e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0ad5a317379afbc3dfb0fb1fd4e6fdb98aab8e2"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "257c011d1addfe555227503171c5d168c45bbbb5", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b", "patch": "@@ -1,3 +1,9 @@\n+2005-10-02  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t* testsuite/lib/jni.exp (gcj_jni_test_one): For\n+\tdarwin, use -shared-libgcc not -lgcc_s, and explain why.\n+\t(gcj_jni_invocation_test_one): Likewise.\n+\n 2005-09-30  Tom Tromey  <tromey@redhat.com>\n \n \tPR libgcj/24051:"}, {"sha": "1810668111fb7a7c915918cdb2d7f751f171f40a", "filename": "libjava/testsuite/libjava.jni/jni.exp", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp?ref=cc86dcfb9984a1c7329ea97a1c4f5891e00d6e9b", "patch": "@@ -131,11 +131,13 @@ proc gcj_jni_test_one {file} {\n       lappend cxxflaglist \"-L$cxxldlibflags\"\n     }\n \n-    # Darwin does not yet have a libgcc_s.dylib library.\n-    # So we add it here. If the libgcc_s is installed, the libstdc++\n-    # would pick it up.\n+    # If you're building the compiler with --prefix set to a place\n+    # where it's not yet installed, then the linker won't be able to\n+    # find the libgcc used by libffi.dylib.  We could pass the\n+    # -dylib_file option, but that's complicated, and it's much easier\n+    # to just make the linker find libgcc using -L options.\n     if { [istarget \"*-*-darwin*\"] } {\n-\tlappend cxxflaglist \"-lgcc_s -lstdc++\"\n+\tlappend cxxflaglist \"-shared-libgcc -lstdc++\"\n     } else {\n \tlappend cxxflaglist \"-lstdc++\"\n     }\n@@ -243,10 +245,13 @@ proc gcj_jni_invocation_test_one {file} {\n \n   set cfile [file rootname $file].c\n   # Darwin needs -liconv linked, otherwise we get some unresolved.\n-  # Also, like in the cxxtest we need to add -lgcc_s since Darwin\n-  # has no libgcc_s.dylib installed yet.\n+  # If you're building the compiler with --prefix set to a place\n+  # where it's not yet installed, then the linker won't be able to\n+  # find the libgcc used by libffi.dylib.  We could pass the\n+  # -dylib_file option, but that's complicated, and it's much easier\n+  # to just make the linker find libgcc using -L options.\n   if { [istarget \"*-*-darwin*\"] } {\n-      set cxxflags \"-L../.libs -lgcc_s -lgcj -liconv\"\n+      set cxxflags \"-L../.libs -shared-libgcc -lgcj -liconv\"\n   } else {\n       global LIBJAVA\n       if [info exists LIBJAVA] {"}]}