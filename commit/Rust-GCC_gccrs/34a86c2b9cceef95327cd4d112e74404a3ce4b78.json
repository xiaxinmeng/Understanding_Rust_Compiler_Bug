{"sha": "34a86c2b9cceef95327cd4d112e74404a3ce4b78", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzRhODZjMmI5Y2NlZWY5NTMyN2NkNGQxMTJlNzQ0MDRhM2NlNGI3OA==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-03-04T07:41:00Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-03-04T07:41:00Z"}, "message": "configure.in: Delete three unused variables.\n\n\t* configure.in: Delete three unused variables.  Move a variable\n\tdefinition closer to its use.  Simplify use_collect2 logic.  Start to\n\torganize.  Simplify tests for in-tree gas and ld.\n\t* configure: Regenerate.\n\nFrom-SVN: r63778", "tree": {"sha": "357511d6959cd6129fec23164368fa78141d2a4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/357511d6959cd6129fec23164368fa78141d2a4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/34a86c2b9cceef95327cd4d112e74404a3ce4b78", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34a86c2b9cceef95327cd4d112e74404a3ce4b78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34a86c2b9cceef95327cd4d112e74404a3ce4b78", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34a86c2b9cceef95327cd4d112e74404a3ce4b78/comments", "author": null, "committer": null, "parents": [{"sha": "c858bf1e21701fe9df45fc286fe5fdeb494e4a0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c858bf1e21701fe9df45fc286fe5fdeb494e4a0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c858bf1e21701fe9df45fc286fe5fdeb494e4a0f"}], "stats": {"total": 1998, "additions": 1039, "deletions": 959}, "files": [{"sha": "747e2f52696fa25c5dc9dffa512904e678a74728", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34a86c2b9cceef95327cd4d112e74404a3ce4b78/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34a86c2b9cceef95327cd4d112e74404a3ce4b78/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=34a86c2b9cceef95327cd4d112e74404a3ce4b78", "patch": "@@ -1,3 +1,10 @@\n+2003-03-04  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* configure.in: Delete three unused variables.  Move a variable\n+\tdefinition closer to its use.  Simplify use_collect2 logic.  Start to\n+\torganize.  Simplify tests for in-tree gas and ld.\n+\t* configure: Regenerate.\n+\n 2003-03-04  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* Makefile.in: Update."}, {"sha": "8180d702048702eaac9633d40311bb9a93860e6a", "filename": "gcc/configure", "status": "modified", "additions": 830, "deletions": 795, "changes": 1625, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34a86c2b9cceef95327cd4d112e74404a3ce4b78/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34a86c2b9cceef95327cd4d112e74404a3ce4b78/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=34a86c2b9cceef95327cd4d112e74404a3ce4b78"}, {"sha": "2231c2921fa4ac103762ea1dccec4c2ba8950542", "filename": "gcc/configure.in", "status": "modified", "additions": 202, "deletions": 164, "changes": 366, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34a86c2b9cceef95327cd4d112e74404a3ce4b78/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34a86c2b9cceef95327cd4d112e74404a3ce4b78/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=34a86c2b9cceef95327cd4d112e74404a3ce4b78", "patch": "@@ -21,15 +21,19 @@\n #Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #02111-1307, USA.\n \n-# Initialization and defaults\n+# --------------------------------\n+# Initialization and sanity checks\n+# --------------------------------\n+\n AC_PREREQ(2.13)\n AC_INIT(tree.c)\n AC_CONFIG_HEADER(auto-host.h:config.in)\n \n-remove=rm\n-hard_link=ln\n-symbolic_link='ln -s'\n-copy=cp\n+# Determine the host, build, and target systems\n+AC_CANONICAL_SYSTEM\n+\n+# Set program_transform_name\n+AC_ARG_PROGRAM\n \n # Check for bogus environment variables.\n # Test if LIBRARY_PATH contains the notation for the current directory\n@@ -84,7 +88,63 @@ AC_MSG_ERROR([\n *** and run configure again.])\n fi\n \n-# Check for additional parameters\n+# -----------\n+# Directories\n+# -----------\n+\n+# Specify the local prefix\n+local_prefix=\n+AC_ARG_WITH(local-prefix,\n+[  --with-local-prefix=DIR specifies directory to put local include],\n+[case \"${withval}\" in\n+yes)\tAC_MSG_ERROR(bad value ${withval} given for local include directory prefix) ;;\n+no)\t;;\n+*)\tlocal_prefix=$with_local_prefix ;;\n+esac])\n+\n+# Default local prefix if it is empty\n+if test x$local_prefix = x; then\n+\tlocal_prefix=/usr/local\n+fi\n+\n+# Don't set gcc_gxx_include_dir to gxx_include_dir since that's only\n+# passed in by the toplevel make and thus we'd get different behavior\n+# depending on where we built the sources.\n+gcc_gxx_include_dir=\n+# Specify the g++ header file directory\n+AC_ARG_WITH(gxx-include-dir,\n+[  --with-gxx-include-dir=DIR\n+                          specifies directory to put g++ header files],\n+[case \"${withval}\" in\n+yes)\tAC_MSG_ERROR(bad value ${withval} given for g++ include directory) ;;\n+no)\t;;\n+*)\tgcc_gxx_include_dir=$with_gxx_include_dir ;;\n+esac])\n+\n+if test x${gcc_gxx_include_dir} = x; then\n+  if test x${enable_version_specific_runtime_libs} = xyes; then\n+    gcc_gxx_include_dir='${libsubdir}/include/c++'\n+  else\n+    topsrcdir=${srcdir}/.. . ${srcdir}/../config.if\n+changequote(<<, >>)dnl\n+    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/include/\"${libstdcxx_incdir}\n+changequote([, ])dnl\n+  fi\n+fi\n+\n+AC_ARG_WITH(cpp_install_dir,\n+[  --with-cpp-install-dir=DIR\n+                          install the user visible C preprocessor in DIR\n+                          (relative to PREFIX) as well as PREFIX/bin],\n+[if test x$withval = xyes; then\n+  AC_MSG_ERROR([option --with-cpp-install-dir requires an argument])\n+elif test x$withval != xno; then\n+  cpp_install_dir=$withval\n+fi])\n+\n+# -------------------\n+# Find default linker\n+# -------------------\n \n # With GNU ld\n AC_ARG_WITH(gnu-ld,\n@@ -106,6 +166,21 @@ if test x\"${DEFAULT_LINKER+set}\" = x\"set\"; then\n \t[Define to enable the use of a default linker.])\n fi\n \n+AC_MSG_CHECKING([whether a default linker was specified])\n+if test x\"${DEFAULT_LINKER+set}\" = x\"set\"; then\n+  if test x\"$gnu_ld_flag\" = x\"no\"; then\n+    AC_MSG_RESULT([yes ($DEFAULT_LINKER)])\n+  else\n+    AC_MSG_RESULT([yes ($DEFAULT_LINKER - GNU ld)])\n+  fi\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+\n+# ----------------------\n+# Find default assembler\n+# ----------------------\n+\n # With GNU as\n AC_ARG_WITH(gnu-as,\n [  --with-gnu-as           arrange to work with GNU as],\n@@ -125,63 +200,20 @@ if test x\"${DEFAULT_ASSEMBLER+set}\" = x\"set\"; then\n \t[Define to enable the use of a default assembler.])\n fi\n \n-# With stabs\n-AC_ARG_WITH(stabs,\n-[  --with-stabs            arrange to use stabs instead of host debug format],\n-stabs=\"$with_stabs\",\n-stabs=no)\n-\n-# With ELF\n-AC_ARG_WITH(elf,\n-[  --with-elf              arrange to use ELF instead of host debug format],\n-elf=\"$with_elf\",\n-elf=no)\n-\n-# Specify the local prefix\n-local_prefix=\n-AC_ARG_WITH(local-prefix,\n-[  --with-local-prefix=DIR specifies directory to put local include],\n-[case \"${withval}\" in\n-yes)\tAC_MSG_ERROR(bad value ${withval} given for local include directory prefix) ;;\n-no)\t;;\n-*)\tlocal_prefix=$with_local_prefix ;;\n-esac])\n-\n-# Default local prefix if it is empty\n-if test x$local_prefix = x; then\n-\tlocal_prefix=/usr/local\n-fi\n-\n-# Don't set gcc_gxx_include_dir to gxx_include_dir since that's only\n-# passed in by the toplevel make and thus we'd get different behavior\n-# depending on where we built the sources.\n-gcc_gxx_include_dir=\n-# Specify the g++ header file directory\n-AC_ARG_WITH(gxx-include-dir,\n-[  --with-gxx-include-dir=DIR\n-                          specifies directory to put g++ header files],\n-[case \"${withval}\" in\n-yes)\tAC_MSG_ERROR(bad value ${withval} given for g++ include directory) ;;\n-no)\t;;\n-*)\tgcc_gxx_include_dir=$with_gxx_include_dir ;;\n-esac])\n-\n-if test x${gcc_gxx_include_dir} = x; then\n-  if test x${enable_version_specific_runtime_libs} = xyes; then\n-    gcc_gxx_include_dir='${libsubdir}/include/c++'\n+AC_MSG_CHECKING([whether a default assembler was specified])\n+if test x\"${DEFAULT_ASSEMBLER+set}\" = x\"set\"; then\n+  if test x\"$gas_flag\" = x\"no\"; then\n+    AC_MSG_RESULT([yes ($DEFAULT_ASSEMBLER)])\n   else\n-    topsrcdir=${srcdir}/.. . ${srcdir}/../config.if\n-changequote(<<, >>)dnl\n-    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/include/\"${libstdcxx_incdir}\n-changequote([, ])dnl\n+    AC_MSG_RESULT([yes ($DEFAULT_ASSEMBLER - GNU as)])\n   fi\n+else\n+  AC_MSG_RESULT(no)\n fi\n \n-# Determine the host, build, and target systems\n-AC_CANONICAL_SYSTEM\n-\n-# Set program_transform_name\n-AC_ARG_PROGRAM\n+# ---------------\n+# Find C compiler\n+# ---------------\n \n # Find the native compiler\n AC_PROG_CC\n@@ -195,9 +227,6 @@ fi\n AC_SUBST(NO_MINUS_C_MINUS_O)\n AC_SUBST(OUTPUT_OPTION)\n \n-# See if GNAT has been installed\n-gcc_AC_PROG_GNAT\n-\n AC_CACHE_CHECK(whether ${CC-cc} accepts -Wno-long-long,\n ac_cv_prog_cc_no_long_long,\n [save_CFLAGS=\"$CFLAGS\"\n@@ -206,6 +235,34 @@ AC_TRY_COMPILE(,,ac_cv_prog_cc_no_long_long=yes,\n \t       ac_cv_prog_cc_no_long_long=no)\n CFLAGS=\"$save_CFLAGS\"])\n \n+AC_PROG_CPP\n+AC_C_INLINE\n+gcc_AC_C_VOLATILE\n+\n+gcc_AC_C_LONG_DOUBLE\n+gcc_AC_C_LONG_LONG\n+gcc_AC_C__BOOL\n+\n+# sizeof(char) is 1 by definition.\n+AC_COMPILE_CHECK_SIZEOF(short)\n+AC_COMPILE_CHECK_SIZEOF(int)\n+AC_COMPILE_CHECK_SIZEOF(long)\n+if test $ac_cv_c_long_long = yes; then\n+  AC_COMPILE_CHECK_SIZEOF(long long)\n+fi\n+if test $ac_cv_c___int64 = yes; then\n+  AC_COMPILE_CHECK_SIZEOF(__int64)\n+fi\n+\n+gcc_AC_C_CHARSET\n+\n+# -----------------\n+# Find Ada compiler\n+# -----------------\n+\n+# See if GNAT has been installed\n+gcc_AC_PROG_GNAT\n+\n if test x$have_gnat != xno ; then \n AC_CACHE_CHECK(whether ${ADAC} accepts -Wno-long-long,\n ac_cv_prog_adac_no_long_long,\n@@ -222,34 +279,17 @@ else\n   ac_cv_prog_adac_no_long_long=yes\n fi\n \n+# ---------------------\n+# Warnings and checking\n+# ---------------------\n+\n strict1_warn=\n if test $ac_cv_prog_cc_no_long_long = yes && \\\n     test $ac_cv_prog_adac_no_long_long = yes ; then\n   strict1_warn=\"-pedantic -Wno-long-long\"\n fi\n AC_SUBST(strict1_warn)\n \n-AC_PROG_CPP\n-AC_C_INLINE\n-gcc_AC_C_VOLATILE\n-\n-gcc_AC_C_LONG_DOUBLE\n-gcc_AC_C_LONG_LONG\n-gcc_AC_C__BOOL\n-\n-# sizeof(char) is 1 by definition.\n-AC_COMPILE_CHECK_SIZEOF(short)\n-AC_COMPILE_CHECK_SIZEOF(int)\n-AC_COMPILE_CHECK_SIZEOF(long)\n-if test $ac_cv_c_long_long = yes; then\n-  AC_COMPILE_CHECK_SIZEOF(long long)\n-fi\n-if test $ac_cv_c___int64 = yes; then\n-  AC_COMPILE_CHECK_SIZEOF(__int64)\n-fi\n-\n-gcc_AC_C_CHARSET\n-\n # If the native compiler is GCC, we can enable warnings even in stage1.  \n # That's useful for people building cross-compilers, or just running a\n # quick `make'.\n@@ -259,12 +299,6 @@ if test \"x$GCC\" = \"xyes\"; then\n fi\n AC_SUBST(warn_cflags)\n \n-# Determine whether or not multilibs are enabled.\n-AC_ARG_ENABLE(multilib,\n-[  --enable-multilib       enable library support for multiple ABIs],\n-[], [enable_multilib=yes])\n-AC_SUBST(enable_multilib)\n-\n # Enable -Werror in bootstrap stage2 and later.\n # Change the default to \"no\" on release branches.\n AC_ARG_ENABLE(werror, \n@@ -392,15 +426,27 @@ esac],\n [coverage_flags=\"\"])\n AC_SUBST(coverage_flags)\n \n-AC_ARG_WITH(cpp_install_dir,\n-[  --with-cpp-install-dir=DIR\n-                          install the user visible C preprocessor in DIR\n-                          (relative to PREFIX) as well as PREFIX/bin],\n-[if test x$withval = xyes; then\n-  AC_MSG_ERROR([option --with-cpp-install-dir requires an argument])\n-elif test x$withval != xno; then\n-  cpp_install_dir=$withval\n-fi])\n+# --------\n+# UNSORTED\n+# --------\n+\n+# With stabs\n+AC_ARG_WITH(stabs,\n+[  --with-stabs            arrange to use stabs instead of host debug format],\n+stabs=\"$with_stabs\",\n+stabs=no)\n+\n+# With ELF\n+AC_ARG_WITH(elf,\n+[  --with-elf              arrange to use ELF instead of host debug format],\n+elf=\"$with_elf\",\n+elf=no)\n+\n+# Determine whether or not multilibs are enabled.\n+AC_ARG_ENABLE(multilib,\n+[  --enable-multilib       enable library support for multiple ABIs],\n+[], [enable_multilib=yes])\n+AC_SUBST(enable_multilib)\n \n # Enable __cxa_atexit for C++.\n AC_ARG_ENABLE(__cxa_atexit,\n@@ -545,28 +591,6 @@ AC_SUBST(stage1_cflags)\n \n AC_PROG_MAKE_SET\n \n-AC_MSG_CHECKING([whether a default assembler was specified])\n-if test x\"${DEFAULT_ASSEMBLER+set}\" = x\"set\"; then\n-    if test x\"$gas_flag\" = x\"no\"; then\n-    \tAC_MSG_RESULT([yes ($DEFAULT_ASSEMBLER)])\n-    else\n-\tAC_MSG_RESULT([yes ($DEFAULT_ASSEMBLER - GNU as)])\n-    fi\n-else\n-    AC_MSG_RESULT(no)\n-fi\n-\n-AC_MSG_CHECKING([whether a default linker was specified])\n-if test x\"${DEFAULT_LINKER+set}\" = x\"set\"; then\n-    if test x\"$gnu_ld_flag\" = x\"no\"; then\n-\tAC_MSG_RESULT([yes ($DEFAULT_LINKER)])\n-    else\n-\tAC_MSG_RESULT([yes ($DEFAULT_LINKER - GNU ld)])\n-    fi\n-else\n-    AC_MSG_RESULT(no)\n-fi\n-\n AC_MSG_CHECKING(for GNU C library)\n AC_CACHE_VAL(gcc_cv_glibc,\n [AC_TRY_COMPILE(\n@@ -865,6 +889,10 @@ if test x\"$use_libunwind_exceptions\" = xyes; then\n \t[Define if gcc should use -lunwind.])\n fi\n \n+# --------------------------------------------------------\n+# Build, host, and target specific configuration fragments\n+# --------------------------------------------------------\n+\n target_gtfiles=\n build_xm_file=\n build_xm_defines=\n@@ -1058,6 +1086,10 @@ build_xm_file=\"${build_auto} ansidecl.h ${build_xm_file}\"\n # put this back in temporarily.\n xm_file=\"ansidecl.h ${xm_file}\"\n \n+# --------\n+# UNSORTED\n+# --------\n+\n # Truncate the target if necessary\n if test x$host_truncate_target != x; then\n \ttarget=`echo $target | sed -e 's/\\(..............\\).*/\\1/'`\n@@ -1188,6 +1220,8 @@ do\n \tfi\n done\n \n+symbolic_link='ln -s'\n+\n # If the host doesn't support symlinks, modify CC in\n # FLAGS_TO_PASS so CC=\"stage1/xgcc -Bstage1/\" works.\n # Otherwise, we can use \"CC=$(CC)\".\n@@ -1330,16 +1364,15 @@ else\n \tdone\n fi\n \n-if test x$use_collect2 = xno; then\n-\tuse_collect2=\n-fi\n-\n # Add a definition of USE_COLLECT2 if system wants one.\n-if test x$use_collect2 != x\n-then\n-\thost_xm_defines=\"${host_xm_defines} USE_COLLECT2\"\n-\txm_defines=\"${xm_defines} USE_COLLECT2\"\n-fi\n+case $use_collect2 in\n+  no) use_collect2= ;;\n+  \"\") ;;\n+  *) \n+    host_xm_defines=\"${host_xm_defines} USE_COLLECT2\"\n+    xm_defines=\"${xm_defines} USE_COLLECT2\"\n+    ;;\n+esac\n \n # If we have gas in the build tree, make a link to it.\n if test -f ../gas/Makefile; then\n@@ -1359,6 +1392,7 @@ fi\n \n # Figure out what assembler we will be using.\n AC_MSG_CHECKING(what assembler to use)\n+in_tree_gas=no\n gcc_cv_as=\n gcc_cv_gas_major_version=\n gcc_cv_gas_minor_version=\n@@ -1371,8 +1405,10 @@ elif test -x \"$AS\"; then\n elif test -x as$host_exeext; then\n \t# Build using assembler in the current directory.\n \tgcc_cv_as=./as$host_exeext\n-elif test -f $gcc_cv_as_gas_srcdir/configure.in -a -f ../gas/Makefile; then\n+elif test -f $gcc_cv_as_gas_srcdir/configure.in \\\n+     && test -f ../gas/Makefile; then\n \t# Single tree build which includes gas.\n+\tin_tree_gas=yes\n \tfor f in $gcc_cv_as_bfd_srcdir/configure $gcc_cv_as_gas_srcdir/configure $gcc_cv_as_gas_srcdir/configure.in $gcc_cv_as_gas_srcdir/Makefile.in\n \tdo\n changequote(,)dnl\n@@ -1448,14 +1484,18 @@ if test \"x$gcc_cv_as\" = x; then\n \t\tfi\n \tdone\n fi\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n-  AC_MSG_RESULT(\"newly built gas\")\n-else\n-  AC_MSG_RESULT($gcc_cv_as)\n-fi\n+case $in_tree_gas in\n+  yes)\n+    AC_MSG_RESULT(\"newly built gas\")\n+    ;;\n+  no)\n+    AC_MSG_RESULT($gcc_cv_as)\n+    ;;\n+esac\n \n # Figure out what linker we will be using.\n AC_MSG_CHECKING(what linker to use)\n+in_tree_ld=no\n gcc_cv_ld=\n gcc_cv_gld_major_version=\n gcc_cv_gld_minor_version=\n@@ -1468,8 +1508,10 @@ elif test -x \"$LD\"; then\n elif test -x ld$host_exeext; then\n \t# Build using linker in the current directory.\n \tgcc_cv_ld=./ld$host_exeext\n-elif test -f $gcc_cv_ld_gld_srcdir/configure.in -a -f ../ld/Makefile; then\n+elif test -f $gcc_cv_ld_gld_srcdir/configure.in \\\n+     && test -f ../ld/Makefile; then\n \t# Single tree build which includes ld.\n+\tin_tree_ld=yes\n \tfor f in $gcc_cv_ld_bfd_srcdir/configure $gcc_cv_ld_gld_srcdir/configure $gcc_cv_ld_gld_srcdir/configure.in $gcc_cv_ld_gld_srcdir/Makefile.in\n \tdo\n changequote(,)dnl\n@@ -1544,11 +1586,14 @@ if test \"x$gcc_cv_ld\" = x; then\n \t\tfi\n \tdone\n fi\n-if test x$gcc_cv_gld_major_version != x -a x$gcc_cv_gld_minor_version != x; then\n-  AC_MSG_RESULT(\"newly built ld\")\n-else\n-  AC_MSG_RESULT($gcc_cv_ld)\n-fi\n+case $in_tree_ld in\n+  yes)\n+    AC_MSG_RESULT(\"newly built ld\")\n+    ;;\n+  no)\n+    AC_MSG_RESULT($gcc_cv_ld)\n+    ;;\n+esac\n \n # Figure out what nm we will be using.\n AC_MSG_CHECKING(what nm to use)\n@@ -1575,7 +1620,7 @@ AC_MSG_RESULT($gcc_cv_objdump)\n # Figure out what assembler alignment features are present.\n AC_MSG_CHECKING(assembler alignment features)\n gcc_cv_as_alignment_features=none\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+if test $in_tree_gas = yes; then\n \t# Gas version 2.6 and later support for .balign and .p2align.\n \t# bytes to skip when using .p2align.\n \tif test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 6 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -1610,7 +1655,7 @@ AC_MSG_RESULT($gcc_cv_as_alignment_features)\n \n AC_MSG_CHECKING(assembler subsection support)\n gcc_cv_as_subsections=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n     gcc_cv_as_subsections=\"working .subsection -1\"\n   fi\n@@ -1648,7 +1693,7 @@ AC_MSG_RESULT($gcc_cv_as_subsections)\n \n AC_MSG_CHECKING(assembler weak support)\n gcc_cv_as_weak=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 2 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n     gcc_cv_as_weak=\"yes\"\n   fi\n@@ -1667,7 +1712,7 @@ AC_MSG_RESULT($gcc_cv_as_weak)\n \n AC_MSG_CHECKING(assembler hidden support)\n gcc_cv_as_hidden=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2\t\\\n \t  -a \"$gcc_cv_gas_minor_version\" -eq 12\t\\\n \t  -a \"$gcc_cv_gas_patch_version\" -ge 1\t\\\n@@ -1742,7 +1787,7 @@ AC_SUBST(libgcc_visibility)\n \n AC_MSG_CHECKING(assembler leb128 support)\n gcc_cv_as_leb128=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 11 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n     gcc_cv_as_leb128=\"yes\"\n   fi\n@@ -1786,7 +1831,7 @@ AC_MSG_RESULT($gcc_cv_as_leb128)\n \n AC_MSG_CHECKING(assembler eh_frame optimization)\n gcc_cv_as_eh_frame=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n     gcc_cv_as_eh_frame=\"yes\"\n   fi\n@@ -1864,7 +1909,7 @@ AC_MSG_RESULT($gcc_cv_as_eh_frame)\n \n AC_MSG_CHECKING(assembler section merging support)\n gcc_cv_as_shf_merge=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n     gcc_cv_as_shf_merge=yes\n   fi\n@@ -2000,8 +2045,7 @@ foo:\t.long\t25\n esac\n if test -z \"$tls_first_major\"; then\n   :\n-elif test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x\n-then\n+elif test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq \"$tls_first_major\" \\\n \t  -a \"$gcc_cv_gas_minor_version\" -ge \"$tls_first_minor\" \\\n \t  -o \"$gcc_cv_gas_major_version\" -gt \"$tls_first_major\"; then\n@@ -2027,9 +2071,7 @@ case \"$target\" in\n     AC_CACHE_CHECK([assembler supports explicit relocations],\n \tgcc_cv_as_explicit_relocs, [\n \tgcc_cv_as_explicit_relocs=unknown\n-\tif test x$gcc_cv_gas_major_version != x \\\n-\t\t-a x$gcc_cv_gas_minor_version != x\n-\tthen\n+\tif test $in_tree_gas = yes ; then\n \t   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n \t           -a \"$gcc_cv_gas_minor_version\" -ge 12 \\\n \t           -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -2186,7 +2228,7 @@ changequote(,)dnl\n changequote([,])dnl\n     AC_MSG_CHECKING(assembler instructions)\n     gcc_cv_as_instructions=\n-    if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n+    if test $in_tree_gas = yes ; then \n       if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n \tgcc_cv_as_instructions=\"filds fists\"\n       fi\n@@ -2209,8 +2251,7 @@ changequote([,])dnl\n \n     AC_MSG_CHECKING(assembler GOTOFF in data directives)\n     gcc_cv_as_gotoff_in_data=no\n-    if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x\n-    then\n+    if test $in_tree_gas = yes ; then\n       if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n \t -a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n \t -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -2287,8 +2328,7 @@ case \"$target\" in\n     insn=\"nop 0\"\n     ;;\n   esac\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x;\n-then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n \t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n \t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n@@ -2327,8 +2367,7 @@ AC_MSG_RESULT($gcc_cv_as_dwarf2_debug_line)\n \n AC_MSG_CHECKING(assembler --gdwarf2 support)\n gcc_cv_as_gdwarf2_flag=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x;\n-then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n \t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n \t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n@@ -2353,8 +2392,7 @@ AC_MSG_RESULT($gcc_cv_as_gdwarf2_flag)\n \n AC_MSG_CHECKING(assembler --gstabs support)\n gcc_cv_as_gstabs_flag=no\n-if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x;\n-then\n+if test $in_tree_gas = yes ; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n \t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n \t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n@@ -2378,7 +2416,7 @@ AC_MSG_RESULT($gcc_cv_as_gstabs_flag)\n \n AC_MSG_CHECKING(linker read-only and read-write section mixing)\n gcc_cv_ld_ro_rw_mix=unknown\n-if test x$gcc_cv_gld_major_version != x -a x$gcc_cv_gld_minor_version != x; then\n+if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 10 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n     gcc_cv_ld_ro_rw_mix=read-write\n   fi\n@@ -2416,7 +2454,7 @@ AC_MSG_RESULT($gcc_cv_ld_ro_rw_mix)\n \n AC_MSG_CHECKING(linker PT_GNU_EH_FRAME support)\n gcc_cv_ld_eh_frame_hdr=no\n-if test x$gcc_cv_gld_major_version != x -a x$gcc_cv_gld_minor_version != x; then\n+if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 12 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n     gcc_cv_ld_eh_frame_hdr=yes\n   fi"}]}