{"sha": "339325b30301c66ae49cefe390585530110befc9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzM5MzI1YjMwMzAxYzY2YWU0OWNlZmUzOTA1ODU1MzAxMTBiZWZjOQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2010-06-21T00:23:06Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2010-06-21T00:23:06Z"}, "message": "compare-debug: Drop LTO sections.\n\ncontrib/ChangeLog:\n* compare-debug: Drop LTO sections.\nconfig/ChangeLog:\n* bootstrap-lto.mk: New.\ngcc/ChangeLog:\n* doc/install.texi: Document bootstrap-lto.\n\nFrom-SVN: r161061", "tree": {"sha": "10127b0ac2c8329bd4281e72b0dc157bd8f3d8b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10127b0ac2c8329bd4281e72b0dc157bd8f3d8b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/339325b30301c66ae49cefe390585530110befc9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/339325b30301c66ae49cefe390585530110befc9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/339325b30301c66ae49cefe390585530110befc9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/339325b30301c66ae49cefe390585530110befc9/comments", "author": null, "committer": null, "parents": [{"sha": "6122686d1336afd10254c45e7fc8f27fb99598da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6122686d1336afd10254c45e7fc8f27fb99598da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6122686d1336afd10254c45e7fc8f27fb99598da"}], "stats": {"total": 49, "additions": 41, "deletions": 8}, "files": [{"sha": "9d18d75f2a7b821ad4ef1964288a01650e19e7a4", "filename": "config/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339325b30301c66ae49cefe390585530110befc9/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339325b30301c66ae49cefe390585530110befc9/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=339325b30301c66ae49cefe390585530110befc9", "patch": "@@ -1,3 +1,7 @@\n+2010-06-20  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* bootstrap-lto.mk: New.\n+\n 2010-06-10  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* override.m4: Remove obsolete (<2.64) definitions."}, {"sha": "14099a08b8d7bb687ac75cab3348b4a940eda6aa", "filename": "config/bootstrap-lto.mk", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339325b30301c66ae49cefe390585530110befc9/config%2Fbootstrap-lto.mk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339325b30301c66ae49cefe390585530110befc9/config%2Fbootstrap-lto.mk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fbootstrap-lto.mk?ref=339325b30301c66ae49cefe390585530110befc9", "patch": "@@ -0,0 +1,8 @@\n+# This option enables LTO for stage2 and stage3.  It requires lto to\n+# be enabled for stage1 with --enable-stage1-languages.\n+\n+STAGE2_CFLAGS += -flto\n+STAGE3_CFLAGS += -flto\n+\n+# Ada fails to build with LTO, turn it off for now.\n+BOOT_ADAFLAGS += -fno-lto"}, {"sha": "12271531ddfc182dbbe6b2bb16664596b120f311", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339325b30301c66ae49cefe390585530110befc9/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339325b30301c66ae49cefe390585530110befc9/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=339325b30301c66ae49cefe390585530110befc9", "patch": "@@ -1,3 +1,7 @@\n+2010-06-20  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* compare-debug: Drop LTO sections.\n+\n 2010-06-15  Bernhard Reutner-Fischer  <aldot@gcc.gnu.org>\n \n \t* gcc_update: Support updating a git clone."}, {"sha": "820721cd9719d930e98d462e62eea21a23757144", "filename": "contrib/compare-debug", "status": "modified", "additions": 16, "deletions": 8, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339325b30301c66ae49cefe390585530110befc9/contrib%2Fcompare-debug", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339325b30301c66ae49cefe390585530110befc9/contrib%2Fcompare-debug", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcompare-debug?ref=339325b30301c66ae49cefe390585530110befc9", "patch": "@@ -100,9 +100,11 @@ else\n   done\n \n   # If we found .eh_frame in one but not the other, or if we could not\n-  # find a command to tell, try to strip off the .eh_frame section\n-  # from both.\n-  if test \"x$cmp1\" != \"x$cmp2\" || test \"x$cmd\" = \"x\"; then\n+  # find a command to tell, or if there are LTO sections, try to strip\n+  # off the .eh_frame and LTO sections from both.\n+  if test \"x$cmp1\" != \"x$cmp2\" || test \"x$cmd\" = \"x\" ||\n+     $cmd --section-headers \"$1.$suf1\" | grep '.gnu.lto_' > /dev/null ||\n+     $cmd --section-headers \"$2.$suf2\" | grep '.gnu.lto_' > /dev/null ; then\n     suf3=$suf1.\n     while test -f \"$1.$suf3\"; do\n       suf3=$suf3.\n@@ -115,21 +117,27 @@ else\n \n     trap 'rm -f \"$1.$suf1\" \"$2.$suf2\" \"$1.$suf3\" \"$2.$suf4\"' 0 1 2 15\n \n-    echo stripping off .eh_frame, then retrying >&2\n+    echo stripping off .eh_frame and LTO sections, then retrying >&2\n+\n+    seclist=\".eh_frame .rel.eh_frame .rela.eh_frame\"\n+    if test \"x$cmd\" != \"x\"; then\n+      seclist=\"$seclist \"`{ $cmd --section-headers \"$1.$suf1\"; $cmd --section-headers \"$2.$suf2\"; } | sed -n 's,.* \\(\\.gnu\\.lto_[^ \t]*\\).*,\\1,p' | sort -u`\n+    fi\n+    rsopts=`for sec in $seclist; do echo \" --remove-section $sec\"; done`\n \n     if (objcopy -v) 2>&1 | grep ' --remove-section' > /dev/null; then\n-      objcopy --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$1.$suf1\" \"$1.$suf3\"\n+      objcopy $rsopts \"$1.$suf1\" \"$1.$suf3\"\n       mv \"$1.$suf3\" \"$1.$suf1\"\n \n-      objcopy --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$2.$suf2\" \"$2.$suf4\"\n+      objcopy $rsopts \"$2.$suf2\" \"$2.$suf4\"\n       mv \"$2.$suf4\" \"$2.$suf2\"\n     elif (strip --help) 2>&1 | grep ' --remove-section' > /dev/null; then\n       cp \"$1.$suf1\" \"$1.$suf3\"\n-      strip --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$1.$suf3\"\n+      strip $rsopts \"$1.$suf3\"\n       mv \"$1.$suf3\" \"$1.$suf1\"\n \n       cp \"$2.$suf2\" \"$2.$suf4\"\n-      strip --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$2.$suf4\"\n+      strip $rsopts \"$2.$suf4\"\n       mv \"$2.$suf4\" \"$2.$suf2\"\n     else\n       echo failed to strip off .eh_frame >&2"}, {"sha": "4895bb108a083afd60129c75d573565cc076c061", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339325b30301c66ae49cefe390585530110befc9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339325b30301c66ae49cefe390585530110befc9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=339325b30301c66ae49cefe390585530110befc9", "patch": "@@ -1,3 +1,7 @@\n+2010-06-20  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* doc/install.texi: Document bootstrap-lto.\n+\n 2010-06-20  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/44248"}, {"sha": "99077d7262da4f39f6a7384334153aef8b0dd386", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339325b30301c66ae49cefe390585530110befc9/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339325b30301c66ae49cefe390585530110befc9/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=339325b30301c66ae49cefe390585530110befc9", "patch": "@@ -2150,6 +2150,11 @@ Removes any @option{-O}-started option from @code{BOOT_CFLAGS}, and adds\n @item @samp{bootstrap-O3}\n Analogous to @code{bootstrap-O1}.\n \n+@item @samp{bootstrap-lto}\n+Enables Link-Time Optimization for host tools during bootstrapping.\n+@samp{BUILD_CONFIG=bootstrap-lto} is equivalent to adding\n+@option{-flto} to @samp{BOOT_CFLAGS}.\n+\n @item @samp{bootstrap-debug}\n Verifies that the compiler generates the same executable code, whether\n or not it is asked to emit debug information.  To this end, this"}]}