{"sha": "fda470306d65092407ba01f9aa85e1941c08eaab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRhNDcwMzA2ZDY1MDkyNDA3YmEwMWY5YWE4NWUxOTQxYzA4ZWFhYg==", "commit": {"author": {"name": "Ovidiu Predescu", "email": "ovidiu@gcc.gnu.org", "date": "2000-08-06T07:54:40Z"}, "committer": {"name": "Ovidiu Predescu", "email": "ovidiu@gcc.gnu.org", "date": "2000-08-06T07:54:40Z"}, "message": "New command line option -fconstant-string-class to allow specifying a user defined constant string class...\n\nNew command line option -fconstant-string-class to allow specifying a\nuser defined constant string class, different from NXConstantString.\n\nFrom-SVN: r35518", "tree": {"sha": "b7cdcf9534e0abd4804ae06417c0a6e1e9575b01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7cdcf9534e0abd4804ae06417c0a6e1e9575b01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fda470306d65092407ba01f9aa85e1941c08eaab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fda470306d65092407ba01f9aa85e1941c08eaab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fda470306d65092407ba01f9aa85e1941c08eaab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fda470306d65092407ba01f9aa85e1941c08eaab/comments", "author": null, "committer": null, "parents": [{"sha": "cf02c6b135843aa2a1ea7e95de7f2c572b7503a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf02c6b135843aa2a1ea7e95de7f2c572b7503a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf02c6b135843aa2a1ea7e95de7f2c572b7503a8"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "fd358a981b5b131d6f1f62728629311fcb91dfca", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda470306d65092407ba01f9aa85e1941c08eaab/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda470306d65092407ba01f9aa85e1941c08eaab/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=fda470306d65092407ba01f9aa85e1941c08eaab", "patch": "@@ -374,6 +374,8 @@ static void ggc_mark_hash_table\t\t\tPARAMS ((void *));\n #define STRING_OBJECT_CLASS_NAME \"NXConstantString\"\n #define PROTOCOL_OBJECT_CLASS_NAME \"Protocol\"\n \n+static const char *constant_string_class_name = NULL;\n+\n static const char *TAG_GETCLASS;\n static const char *TAG_GETMETACLASS;\n static const char *TAG_MSGSEND;\n@@ -797,6 +799,7 @@ lang_decode_option (argc, argv)\n      char **argv;\n {\n   const char *p = argv[0];\n+\n   if (!strcmp (p, \"-lang-objc\"))\n     c_language = clk_objective_c;\n   else if (!strcmp (p, \"-gen-decls\"))\n@@ -819,6 +822,13 @@ lang_decode_option (argc, argv)\n     flag_next_runtime = 1;\n   else if (!strcmp (p, \"-print-objc-runtime-info\"))\n     print_struct_values = 1;\n+#define CSTSTRCLASS \"-fconstant-string-class=\"\n+  else if (!strncmp (p, CSTSTRCLASS, sizeof(CSTSTRCLASS) - 2)) {\n+    if (strlen (argv[0]) <= strlen (CSTSTRCLASS))\n+      error (\"no class name specified as argument to -fconstant-string-class\");\n+    constant_string_class_name = xstrdup(argv[0] + sizeof(CSTSTRCLASS) - 1);\n+  }\n+#undef CSTSTRCLASS\n   else\n     return c_decode_option (argc, argv);\n \n@@ -1382,7 +1392,10 @@ synth_module_prologue ()\n   generate_forward_declaration_to_string_table ();\n \n   /* Forward declare constant_string_id and constant_string_type.  */\n-  constant_string_id = get_identifier (STRING_OBJECT_CLASS_NAME);\n+  if (!constant_string_class_name)\n+    constant_string_class_name = STRING_OBJECT_CLASS_NAME;\n+  \n+  constant_string_id = get_identifier (constant_string_class_name);\n   constant_string_type = xref_tag (RECORD_TYPE, constant_string_id);\n }\n "}]}