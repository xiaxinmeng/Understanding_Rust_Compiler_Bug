{"sha": "ab8e22289cf3abb612686e52c1ea370f0aa6c1b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI4ZTIyMjg5Y2YzYWJiNjEyNjg2ZTUyYzFlYTM3MGYwYWE2YzFiMQ==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2002-02-23T13:42:40Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2002-02-23T13:42:40Z"}, "message": "cppinit.c (output_deps): Correct test for stdout output.\n\n\t* cppinit.c (output_deps): Correct test for stdout output.\n\t(init_dependency_output): Cure warning.\n\nFrom-SVN: r49993", "tree": {"sha": "de2f8a27d5aee9b4df5876515c1a405c129d9ec9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de2f8a27d5aee9b4df5876515c1a405c129d9ec9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1/comments", "author": null, "committer": null, "parents": [{"sha": "ac6f8a15d8351deef5c8d47c59dff863f67c3d55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac6f8a15d8351deef5c8d47c59dff863f67c3d55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac6f8a15d8351deef5c8d47c59dff863f67c3d55"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "6e6db2802c63115b7bb39dce104eb875008254b0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ab8e22289cf3abb612686e52c1ea370f0aa6c1b1", "patch": "@@ -1,3 +1,8 @@\n+2002-02-23  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\t* cppinit.c (output_deps): Correct test for stdout output.\n+\t(init_dependency_output): Cure warning.\n+\n Sat Feb 23 08:42:47 2002  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* expr.c (store_expr): When converting expression to promoted"}, {"sha": "70fc828dd2bf50d97b130ef09f3339b85c6fd5e8", "filename": "gcc/cppinit.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1/gcc%2Fcppinit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab8e22289cf3abb612686e52c1ea370f0aa6c1b1/gcc%2Fcppinit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppinit.c?ref=ab8e22289cf3abb612686e52c1ea370f0aa6c1b1", "patch": "@@ -1102,7 +1102,7 @@ output_deps (pfile)\n     deps_phony_targets (pfile->deps, deps_stream);\n \n   /* Don't close stdout.  */\n-  if (CPP_OPTION (pfile, deps_file))\n+  if (deps_stream != stdout)\n     {\n       if (ferror (deps_stream) || fclose (deps_stream) != 0)\n \tcpp_fatal (pfile, \"I/O error on output\");\n@@ -1875,16 +1875,16 @@ init_dependency_output (pfile)\n       else\n \toutput_file = spec;\n \n+      /* Command line -MF overrides environment variables and default.  */\n+      if (CPP_OPTION (pfile, deps_file) == 0)\n+\tCPP_OPTION (pfile, deps_file) = output_file;\n+\n       CPP_OPTION (pfile, print_deps_append) = 1;\n     }\n-  else\n+  else if (CPP_OPTION (pfile, deps_file) == 0)\n     /* If -M or -MM was seen, default output to wherever was specified\n        with -o.  out_fname is non-NULL here.  */\n-    output_file = CPP_OPTION (pfile, out_fname);\n-\n-  /* Command line -MF overrides environment variables and default.  */\n-  if (CPP_OPTION (pfile, deps_file) == 0)\n-    CPP_OPTION (pfile, deps_file) = output_file;\n+    CPP_OPTION (pfile, deps_file) = CPP_OPTION (pfile, out_fname);\n \n   /* When doing dependencies, we should suppress all output, including\n      -dM, -dI etc.  */"}]}