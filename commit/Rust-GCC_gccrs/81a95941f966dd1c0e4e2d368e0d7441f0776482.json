{"sha": "81a95941f966dd1c0e4e2d368e0d7441f0776482", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODFhOTU5NDFmOTY2ZGQxYzBlNGUyZDM2OGUwZDc0NDFmMDc3NjQ4Mg==", "commit": {"author": {"name": "Sergey Rybin", "email": "rybin@adacore.com", "date": "2018-05-31T10:46:12Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-05-31T10:46:12Z"}, "message": "[Ada] Update gnatelim documentation wrt. compilation of main unit\n\n2018-05-31  Sergey Rybin  <rybin@adacore.com>\n\ngcc/ada/\n\n\t* doc/gnat_ugn/gnat_and_program_execution.rst: gnatelim does not need\n\tthat the main unit to be built before the call, now it computes the\n\tclosure of the main unit itself.\n\t* gnat_ugn.texi: Regenerate.\n\nFrom-SVN: r261001", "tree": {"sha": "90d87c7708c573af08f551abc18febaa5f1ef19d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90d87c7708c573af08f551abc18febaa5f1ef19d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/81a95941f966dd1c0e4e2d368e0d7441f0776482", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81a95941f966dd1c0e4e2d368e0d7441f0776482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81a95941f966dd1c0e4e2d368e0d7441f0776482", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81a95941f966dd1c0e4e2d368e0d7441f0776482/comments", "author": null, "committer": null, "parents": [{"sha": "9104d201d56b2bbd9db93afc09617f88a0cd0f2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9104d201d56b2bbd9db93afc09617f88a0cd0f2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9104d201d56b2bbd9db93afc09617f88a0cd0f2b"}], "stats": {"total": 111, "additions": 29, "deletions": 82}, "files": [{"sha": "45a4bfd031173bb5b290397f885b0a49eb1d7116", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81a95941f966dd1c0e4e2d368e0d7441f0776482/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81a95941f966dd1c0e4e2d368e0d7441f0776482/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=81a95941f966dd1c0e4e2d368e0d7441f0776482", "patch": "@@ -1,3 +1,10 @@\n+2018-05-31  Sergey Rybin  <rybin@adacore.com>\n+\n+\t* doc/gnat_ugn/gnat_and_program_execution.rst: gnatelim does not need\n+\tthat the main unit to be built before the call, now it computes the\n+\tclosure of the main unit itself.\n+\t* gnat_ugn.texi: Regenerate.\n+\n 2018-05-31  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* repinfo.adb (List_Structural_Record_Layout): Set First to false"}, {"sha": "da8a080cfa42f3242f8fc2ecb1b17fe2b83ea8dc", "filename": "gcc/ada/doc/gnat_ugn/gnat_and_program_execution.rst", "status": "modified", "additions": 8, "deletions": 68, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81a95941f966dd1c0e4e2d368e0d7441f0776482/gcc%2Fada%2Fdoc%2Fgnat_ugn%2Fgnat_and_program_execution.rst", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81a95941f966dd1c0e4e2d368e0d7441f0776482/gcc%2Fada%2Fdoc%2Fgnat_ugn%2Fgnat_and_program_execution.rst", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fdoc%2Fgnat_ugn%2Fgnat_and_program_execution.rst?ref=81a95941f966dd1c0e4e2d368e0d7441f0776482", "patch": "@@ -2734,25 +2734,19 @@ appropriate options.\n   used, then in process all the files from the argument project but\n   not just the closure of the main subprogram.\n \n-  After a full successful build of the main subprogram ``gnatelim`` can be\n-  called without  specifying sources to analyse, in this case it computes\n-  the source closure of the main unit from the :file:`ALI` files.\n+  In all the other cases (that are typical cases of ``gnatelim`` usage, when\n+  the only ``gnatelim`` parameter is the name of the source file containing\n+  the main subprogram) gnatelim needs the full closure of the main subprogram.\n+  When called with a project file, gnatelim computes this closure itself.\n+  Otherwise it assumes that it can reuse the results of the previous\n+  build of the main subprogram.\n \n   If the set of sources to be processed by ``gnatelim`` contains sources with\n   preprocessing directives\n   then the needed options should be provided to run preprocessor as a part of\n   the ``gnatelim`` call, and the generated set of pragmas ``Eliminate``\n   will correspond to preprocessed sources.\n \n-  The following command will create the set of :file:`ALI` files needed for\n-  ``gnatelim``:\n-\n-    ::\n-\n-       $ gnatmake -c Main_Prog\n-\n-  Note that ``gnatelim`` does not need object files.\n-\n \n   .. _Running_gnatelim:\n \n@@ -2871,6 +2865,8 @@ appropriate options.\n     of the argument sources). On a multiprocessor machine this speeds up processing\n     of big sets of argument sources. If ``n`` is 0, then the maximum number of\n     parallel tree creations is the number of core processors on the platform.\n+    This possibility is disabled if ``gnatelim`` has to compute the closure\n+    of the main unit.\n \n \n   .. index:: -q (gnatelim)\n@@ -2944,62 +2940,6 @@ appropriate options.\n   of executable.\n \n \n-  .. _Making_Your_Executables_Smaller:\n-\n-  Making Your Executables Smaller\n-  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n-  In order to get a smaller executable for your program you now have to\n-  recompile the program completely with the configuration file containing\n-  pragmas Eliminate generated by gnatelim. If these pragmas are placed in\n-  :file:`gnat.adc` file located in your current directory, just do:\n-\n-    ::\n-\n-       $ gnatmake -f main_prog\n-\n-  (Use the :switch:`-f` option for ``gnatmake`` to\n-  recompile everything\n-  with the set of pragmas ``Eliminate`` that you have obtained with\n-  ``gnatelim``).\n-\n-  Be aware that the set of ``Eliminate`` pragmas is specific to each\n-  program. It is not recommended to merge sets of ``Eliminate``\n-  pragmas created for different programs in one configuration file.\n-\n-\n-  .. _Summary_of_the_gnatelim_Usage_Cycle:\n-\n-  Summary of the ``gnatelim`` Usage Cycle\n-  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n-  Here is a quick summary of the steps to be taken in order to reduce\n-  the size of your executables with ``gnatelim``. You may use\n-  other GNAT options to control the optimization level,\n-  to produce the debugging information, to set search path, etc.\n-\n-  * Create a complete set of :file:`ALI` files (if the program has not been\n-    built already)\n-\n-    ::\n-\n-        $ gnatmake -c main_prog\n-\n-  * Generate a list of ``Eliminate`` pragmas in default configuration file\n-    :file:`gnat.adc` in the current directory\n-\n-    ::\n-\n-        $ gnatelim main_prog >[>] gnat.adc\n-\n-  * Recompile the application\n-\n-    ::\n-\n-        $ gnatmake -f main_prog\n-\n-\n-\n .. index:: Overflow checks\n .. index:: Checks (overflow)\n "}, {"sha": "949551fdee9334e54fccaf7043fc33aa78ce1e8a", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81a95941f966dd1c0e4e2d368e0d7441f0776482/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81a95941f966dd1c0e4e2d368e0d7441f0776482/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=81a95941f966dd1c0e4e2d368e0d7441f0776482", "patch": "@@ -22155,7 +22155,7 @@ appropriate options.\n \n \n @node Overflow Check Handling in GNAT,Performing Dimensionality Analysis in GNAT,Improving Performance,GNAT and Program Execution\n-@anchor{gnat_ugn/gnat_and_program_execution id55}@anchor{16a}@anchor{gnat_ugn/gnat_and_program_execution overflow-check-handling-in-gnat}@anchor{27}\n+@anchor{gnat_ugn/gnat_and_program_execution id53}@anchor{16a}@anchor{gnat_ugn/gnat_and_program_execution overflow-check-handling-in-gnat}@anchor{27}\n @section Overflow Check Handling in GNAT\n \n \n@@ -22171,7 +22171,7 @@ This section explains how to control the handling of overflow checks.\n @end menu\n \n @node Background,Management of Overflows in GNAT,,Overflow Check Handling in GNAT\n-@anchor{gnat_ugn/gnat_and_program_execution id56}@anchor{1c1}@anchor{gnat_ugn/gnat_and_program_execution background}@anchor{1c2}\n+@anchor{gnat_ugn/gnat_and_program_execution id54}@anchor{1c1}@anchor{gnat_ugn/gnat_and_program_execution background}@anchor{1c2}\n @subsection Background\n \n \n@@ -22297,7 +22297,7 @@ exception raised because of the intermediate overflow (and we really\n would prefer this precondition to be considered True at run time).\n \n @node Management of Overflows in GNAT,Specifying the Desired Mode,Background,Overflow Check Handling in GNAT\n-@anchor{gnat_ugn/gnat_and_program_execution id57}@anchor{1c3}@anchor{gnat_ugn/gnat_and_program_execution management-of-overflows-in-gnat}@anchor{1c4}\n+@anchor{gnat_ugn/gnat_and_program_execution id55}@anchor{1c3}@anchor{gnat_ugn/gnat_and_program_execution management-of-overflows-in-gnat}@anchor{1c4}\n @subsection Management of Overflows in GNAT\n \n \n@@ -22411,7 +22411,7 @@ out in the normal manner (with infinite values always failing all\n range checks).\n \n @node Specifying the Desired Mode,Default Settings,Management of Overflows in GNAT,Overflow Check Handling in GNAT\n-@anchor{gnat_ugn/gnat_and_program_execution specifying-the-desired-mode}@anchor{f8}@anchor{gnat_ugn/gnat_and_program_execution id58}@anchor{1c5}\n+@anchor{gnat_ugn/gnat_and_program_execution id56}@anchor{1c5}@anchor{gnat_ugn/gnat_and_program_execution specifying-the-desired-mode}@anchor{f8}\n @subsection Specifying the Desired Mode\n \n \n@@ -22535,7 +22535,7 @@ causing all intermediate operations to be computed using the base\n type (@code{STRICT} mode).\n \n @node Default Settings,Implementation Notes,Specifying the Desired Mode,Overflow Check Handling in GNAT\n-@anchor{gnat_ugn/gnat_and_program_execution id59}@anchor{1c6}@anchor{gnat_ugn/gnat_and_program_execution default-settings}@anchor{1c7}\n+@anchor{gnat_ugn/gnat_and_program_execution id57}@anchor{1c6}@anchor{gnat_ugn/gnat_and_program_execution default-settings}@anchor{1c7}\n @subsection Default Settings\n \n \n@@ -22582,7 +22582,7 @@ checking, but it has no effect on the method used for computing\n intermediate results.\n \n @node Implementation Notes,,Default Settings,Overflow Check Handling in GNAT\n-@anchor{gnat_ugn/gnat_and_program_execution implementation-notes}@anchor{1c8}@anchor{gnat_ugn/gnat_and_program_execution id60}@anchor{1c9}\n+@anchor{gnat_ugn/gnat_and_program_execution implementation-notes}@anchor{1c8}@anchor{gnat_ugn/gnat_and_program_execution id58}@anchor{1c9}\n @subsection Implementation Notes\n \n \n@@ -22630,7 +22630,7 @@ platforms for which @code{Long_Long_Integer} is 64-bits (nearly all GNAT\n platforms).\n \n @node Performing Dimensionality Analysis in GNAT,Stack Related Facilities,Overflow Check Handling in GNAT,GNAT and Program Execution\n-@anchor{gnat_ugn/gnat_and_program_execution id61}@anchor{16b}@anchor{gnat_ugn/gnat_and_program_execution performing-dimensionality-analysis-in-gnat}@anchor{28}\n+@anchor{gnat_ugn/gnat_and_program_execution performing-dimensionality-analysis-in-gnat}@anchor{28}@anchor{gnat_ugn/gnat_and_program_execution id59}@anchor{16b}\n @section Performing Dimensionality Analysis in GNAT\n \n \n@@ -23003,7 +23003,7 @@ passing (the dimension vector for the actual parameter must be equal to the\n dimension vector for the formal parameter).\n \n @node Stack Related Facilities,Memory Management Issues,Performing Dimensionality Analysis in GNAT,GNAT and Program Execution\n-@anchor{gnat_ugn/gnat_and_program_execution stack-related-facilities}@anchor{29}@anchor{gnat_ugn/gnat_and_program_execution id62}@anchor{16c}\n+@anchor{gnat_ugn/gnat_and_program_execution stack-related-facilities}@anchor{29}@anchor{gnat_ugn/gnat_and_program_execution id60}@anchor{16c}\n @section Stack Related Facilities\n \n \n@@ -23019,7 +23019,7 @@ particular, it deals with dynamic and static stack usage measurements.\n @end menu\n \n @node Stack Overflow Checking,Static Stack Usage Analysis,,Stack Related Facilities\n-@anchor{gnat_ugn/gnat_and_program_execution id63}@anchor{1ca}@anchor{gnat_ugn/gnat_and_program_execution stack-overflow-checking}@anchor{f4}\n+@anchor{gnat_ugn/gnat_and_program_execution id61}@anchor{1ca}@anchor{gnat_ugn/gnat_and_program_execution stack-overflow-checking}@anchor{f4}\n @subsection Stack Overflow Checking\n \n \n@@ -23064,7 +23064,7 @@ Consequently, to modify the size of the environment task please refer to your\n operating system documentation.\n \n @node Static Stack Usage Analysis,Dynamic Stack Usage Analysis,Stack Overflow Checking,Stack Related Facilities\n-@anchor{gnat_ugn/gnat_and_program_execution id64}@anchor{1cb}@anchor{gnat_ugn/gnat_and_program_execution static-stack-usage-analysis}@anchor{f5}\n+@anchor{gnat_ugn/gnat_and_program_execution static-stack-usage-analysis}@anchor{f5}@anchor{gnat_ugn/gnat_and_program_execution id62}@anchor{1cb}\n @subsection Static Stack Usage Analysis\n \n \n@@ -23113,7 +23113,7 @@ subprogram whose stack usage might be larger than the specified amount of\n bytes.  The wording is in keeping with the qualifier documented above.\n \n @node Dynamic Stack Usage Analysis,,Static Stack Usage Analysis,Stack Related Facilities\n-@anchor{gnat_ugn/gnat_and_program_execution id65}@anchor{1cc}@anchor{gnat_ugn/gnat_and_program_execution dynamic-stack-usage-analysis}@anchor{121}\n+@anchor{gnat_ugn/gnat_and_program_execution dynamic-stack-usage-analysis}@anchor{121}@anchor{gnat_ugn/gnat_and_program_execution id63}@anchor{1cc}\n @subsection Dynamic Stack Usage Analysis\n \n \n@@ -23192,7 +23192,7 @@ The package @code{GNAT.Task_Stack_Usage} provides facilities to get\n stack-usage reports at run time. See its body for the details.\n \n @node Memory Management Issues,,Stack Related Facilities,GNAT and Program Execution\n-@anchor{gnat_ugn/gnat_and_program_execution id66}@anchor{16d}@anchor{gnat_ugn/gnat_and_program_execution memory-management-issues}@anchor{2a}\n+@anchor{gnat_ugn/gnat_and_program_execution id64}@anchor{16d}@anchor{gnat_ugn/gnat_and_program_execution memory-management-issues}@anchor{2a}\n @section Memory Management Issues\n \n \n@@ -23208,7 +23208,7 @@ incorrect uses of access values (including 'dangling references').\n @end menu\n \n @node Some Useful Memory Pools,The GNAT Debug Pool Facility,,Memory Management Issues\n-@anchor{gnat_ugn/gnat_and_program_execution id67}@anchor{1cd}@anchor{gnat_ugn/gnat_and_program_execution some-useful-memory-pools}@anchor{1ce}\n+@anchor{gnat_ugn/gnat_and_program_execution id65}@anchor{1cd}@anchor{gnat_ugn/gnat_and_program_execution some-useful-memory-pools}@anchor{1ce}\n @subsection Some Useful Memory Pools\n \n \n@@ -23289,7 +23289,7 @@ for T1'Storage_Size use 10_000;\n @end quotation\n \n @node The GNAT Debug Pool Facility,,Some Useful Memory Pools,Memory Management Issues\n-@anchor{gnat_ugn/gnat_and_program_execution id68}@anchor{1cf}@anchor{gnat_ugn/gnat_and_program_execution the-gnat-debug-pool-facility}@anchor{1d0}\n+@anchor{gnat_ugn/gnat_and_program_execution id66}@anchor{1cf}@anchor{gnat_ugn/gnat_and_program_execution the-gnat-debug-pool-facility}@anchor{1d0}\n @subsection The GNAT Debug Pool Facility\n \n "}]}