{"sha": "b377f1cdae22f549852fcdd2cde23143b5fcfce7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjM3N2YxY2RhZTIyZjU0OTg1MmZjZGQyY2RlMjMxNDNiNWZjZmNlNw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-07T21:28:23Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-07T21:28:23Z"}, "message": "Add support for win32's stdcall functions.\n\nFrom-SVN: r9588", "tree": {"sha": "aa09f9a42159d197dca64177b60e5376a5d8905e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa09f9a42159d197dca64177b60e5376a5d8905e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b377f1cdae22f549852fcdd2cde23143b5fcfce7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b377f1cdae22f549852fcdd2cde23143b5fcfce7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b377f1cdae22f549852fcdd2cde23143b5fcfce7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b377f1cdae22f549852fcdd2cde23143b5fcfce7/comments", "author": null, "committer": null, "parents": [{"sha": "53fd9c9a740f9584b8c4112d12cc80a55185c77f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53fd9c9a740f9584b8c4112d12cc80a55185c77f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53fd9c9a740f9584b8c4112d12cc80a55185c77f"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "9d4097748cfdefa920568a537272231c14824c3b", "filename": "gcc/config/i386/go32.h", "status": "modified", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b377f1cdae22f549852fcdd2cde23143b5fcfce7/gcc%2Fconfig%2Fi386%2Fgo32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b377f1cdae22f549852fcdd2cde23143b5fcfce7/gcc%2Fconfig%2Fi386%2Fgo32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fgo32.h?ref=b377f1cdae22f549852fcdd2cde23143b5fcfce7", "patch": "@@ -9,6 +9,60 @@\n \n #include \"i386/gas.h\"\n \n+/* Value is the number of bytes of arguments automatically\n+   popped when returning from a subroutine call.\n+   FUNDECL is the declaration node of the function (as a tree),\n+   FUNTYPE is the data type of the function (as a tree),\n+   or for a library call it is an identifier node for the subroutine name.\n+   SIZE is the number of bytes of arguments passed on the stack.\n+\n+   This only happens if the function declaration has the STDCALL attribute and\n+   the number of arguments is not variable */\n+\n+#undef RETURN_POPS_ARGS\n+#define RETURN_POPS_ARGS(FUNDECL,FUNTYPE,SIZE) \\\n+  ( \\\n+   TREE_CODE (FUNTYPE) == IDENTIFIER_NODE \\\n+   ? \\\n+     0 \\\n+   : \\\n+     ( \\\n+      ((FUNDECL && (TREE_CODE_CLASS (TREE_CODE (FUNDECL)) == 'd') \\\n+\t? \\\n+          lookup_attribute (\"stdcall\", \\\n+\t\t\t    DECL_MACHINE_ATTRIBUTES (FUNDECL)) != NULL_TREE \\\n+\t: 0 \\\n+       ) \\\n+      ) \\\n+      && \\\n+         ( \\\n+          TYPE_ARG_TYPES (FUNTYPE) == 0 \\\n+          || \\\n+            TREE_VALUE (tree_last (TYPE_ARG_TYPES (FUNTYPE))) \\\n+            == void_type_node \\\n+         ) \\\n+     ) \\\n+     ? \\\n+       (SIZE) \\\n+     : \\\n+       (aggregate_value_p (TREE_TYPE (FUNTYPE))) \\\n+       ? \\\n+         GET_MODE_SIZE (Pmode) \\\n+       : \\\n+         0 \\\n+  )\n+\n+/* Value is 1 if the declaration has either of the attributes: CDECL or\n+   STDCALL and 0 otherwise */\n+\n+#define VALID_MACHINE_DECL_ATTRIBUTE(DECL, ATTR, NAME, ARGS) \\\n+  (((TREE_CODE(DECL) == FUNCTION_DECL) \\\n+    || (TREE_CODE(DECL) == FIELD_DECL) \\\n+    || (TREE_CODE(DECL) == TYPE_DECL)) \\\n+   && (is_attribute_p (\"stdcall\", (NAME)) \\\n+       || is_attribute_p (\"cdecl\", (NAME))) \\\n+   && (ARGS) == NULL)\n+\n #ifdef CPP_PREDEFINES\n #undef CPP_PREDEFINES\n #endif"}]}