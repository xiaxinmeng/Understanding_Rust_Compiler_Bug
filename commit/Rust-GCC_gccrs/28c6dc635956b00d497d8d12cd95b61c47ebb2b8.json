{"sha": "28c6dc635956b00d497d8d12cd95b61c47ebb2b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhjNmRjNjM1OTU2YjAwZDQ5N2Q4ZDEyY2Q5NWI2MWM0N2ViYjJiOA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2004-06-22T21:15:29Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2004-06-22T21:15:29Z"}, "message": "re PR c++/16112 (ICE with statement expression in return statement)\n\n        PR c++/16112\n        * cp-gimplify.c (cp_gimplify_init_expr): Look through\n        CLEANUP_POINT_EXPR.\n\nFrom-SVN: r83514", "tree": {"sha": "f28bae23151fc0d321036e3591b21d3023877f30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f28bae23151fc0d321036e3591b21d3023877f30"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28c6dc635956b00d497d8d12cd95b61c47ebb2b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28c6dc635956b00d497d8d12cd95b61c47ebb2b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28c6dc635956b00d497d8d12cd95b61c47ebb2b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28c6dc635956b00d497d8d12cd95b61c47ebb2b8/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "96a4ec035df0805444de4d6c67323f77ed0a79bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96a4ec035df0805444de4d6c67323f77ed0a79bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96a4ec035df0805444de4d6c67323f77ed0a79bc"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "7838ab8d56b8b0eca5f42d368450dbd2eb93bcd7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c6dc635956b00d497d8d12cd95b61c47ebb2b8/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c6dc635956b00d497d8d12cd95b61c47ebb2b8/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=28c6dc635956b00d497d8d12cd95b61c47ebb2b8", "patch": "@@ -1,3 +1,7 @@\n+2004-06-21  Jason Merrill  <jason@redhat.com>\n+\n+\t* cp-gimplify.c (cp_gimplify_init_expr): Look throug\n+\n 2004-06-21  Mark Mitchell  <mark@codesourcery.com>\n \n \t* cp-tree.def (NEW_EXPR): Add a fourth slot."}, {"sha": "db88e052b4df79c2de1536fdaa237002fe483e93", "filename": "gcc/cp/cp-gimplify.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c6dc635956b00d497d8d12cd95b61c47ebb2b8/gcc%2Fcp%2Fcp-gimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c6dc635956b00d497d8d12cd95b61c47ebb2b8/gcc%2Fcp%2Fcp-gimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-gimplify.c?ref=28c6dc635956b00d497d8d12cd95b61c47ebb2b8", "patch": "@@ -116,6 +116,8 @@ cp_gimplify_init_expr (tree *expr_p, tree *pre_p, tree *post_p)\n      case, I guess we'll need to replace references somehow.  */\n   if (TREE_CODE (from) == TARGET_EXPR)\n     from = TARGET_EXPR_INITIAL (from);\n+  if (TREE_CODE (from) == CLEANUP_POINT_EXPR)\n+    from = TREE_OPERAND (from, 0);\n \n   /* Look through any COMPOUND_EXPRs.  */\n   sub = expr_last (from);"}, {"sha": "9a3205c080a6988a57a46466f6d5975b5b5886e2", "filename": "gcc/testsuite/g++.dg/ext/stmtexpr3.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c6dc635956b00d497d8d12cd95b61c47ebb2b8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fstmtexpr3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c6dc635956b00d497d8d12cd95b61c47ebb2b8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fstmtexpr3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fstmtexpr3.C?ref=28c6dc635956b00d497d8d12cd95b61c47ebb2b8", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/16112\n+// { dg-options \"\" }\n+\n+struct A\n+{\n+    A();\n+};\n+\n+A foo() { return ({ A(); }); }"}]}