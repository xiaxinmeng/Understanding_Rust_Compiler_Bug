{"sha": "20ec31d3056be8424863e84d4261d5d5d7945cc7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjBlYzMxZDMwNTZiZTg0MjQ4NjNlODRkNDI2MWQ1ZDVkNzk0NWNjNw==", "commit": {"author": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "1997-04-09T17:50:38Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "1997-04-09T17:50:38Z"}, "message": "(output_stack_adjust): When splitting an adjustment into two parts,\n\nmake sure the stack is aligned at all times.\n\nFrom-SVN: r13846", "tree": {"sha": "cd4a5543949ad7ddd6cdfa98b67b5bf6215814cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd4a5543949ad7ddd6cdfa98b67b5bf6215814cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/20ec31d3056be8424863e84d4261d5d5d7945cc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20ec31d3056be8424863e84d4261d5d5d7945cc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20ec31d3056be8424863e84d4261d5d5d7945cc7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20ec31d3056be8424863e84d4261d5d5d7945cc7/comments", "author": null, "committer": null, "parents": [{"sha": "74452ac3234316852e4f63d48f62db44991649b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74452ac3234316852e4f63d48f62db44991649b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74452ac3234316852e4f63d48f62db44991649b2"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "12a49caa78b2fb04395ec18fe2e9662a103cfc99", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20ec31d3056be8424863e84d4261d5d5d7945cc7/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20ec31d3056be8424863e84d4261d5d5d7945cc7/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=20ec31d3056be8424863e84d4261d5d5d7945cc7", "patch": "@@ -2490,11 +2490,15 @@ output_stack_adjust (size, reg, temp)\n \n       if (! CONST_OK_FOR_I (size))\n \t{\n-\t  if (CONST_OK_FOR_I (size / 2) && CONST_OK_FOR_I (size - size / 2))\n+\t  /* Try to do it with two partial adjustments; however, must make\n+\t     sure that the stack is properly aligned at all times, in case\n+\t     an interrupt occurs between the two partial adjustments. */\n+\t  if (CONST_OK_FOR_I (size / 2 & -4)\n+\t      && CONST_OK_FOR_I (size - (size / 2 & -4)))\n \t    {\n-\t      val = GEN_INT (size / 2);\n+\t      val = GEN_INT (size / 2 & -4);\n \t      emit_insn (gen_addsi3 (reg, reg, val));\n-\t      val = GEN_INT (size - size / 2);\n+\t      val = GEN_INT (size - (size / 2 & -4));\n \t    }\n \t  else\n \t    {"}]}