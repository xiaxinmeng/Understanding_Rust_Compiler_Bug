{"sha": "b00843d2851a8021f148ea11209d205f5b8e6469", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjAwODQzZDI4NTFhODAyMWYxNDhlYTExMjA5ZDIwNWY1YjhlNjQ2OQ==", "commit": {"author": {"name": "Dale Johannesen", "email": "dalej@apple.com", "date": "2004-11-16T01:26:00Z"}, "committer": {"name": "Dale Johannesen", "email": "dalej@gcc.gnu.org", "date": "2004-11-16T01:26:00Z"}, "message": "profile.c (compute_branch_probabilities): Prevent crash with EH in RTL-based profiling.\n\n\n2004-11-15  Dale Johannesen  <dalej@apple.com>\n\n        * profile.c (compute_branch_probabilities):  Prevent\n        crash with EH in RTL-based profiling.\n\nFrom-SVN: r90711", "tree": {"sha": "82ac2ff37928b22b45e27ce54db8f8931281757a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82ac2ff37928b22b45e27ce54db8f8931281757a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b00843d2851a8021f148ea11209d205f5b8e6469", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b00843d2851a8021f148ea11209d205f5b8e6469", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b00843d2851a8021f148ea11209d205f5b8e6469", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b00843d2851a8021f148ea11209d205f5b8e6469/comments", "author": null, "committer": null, "parents": [{"sha": "32f84e48f38788f1f90b370d8835d7686b697554", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32f84e48f38788f1f90b370d8835d7686b697554", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32f84e48f38788f1f90b370d8835d7686b697554"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "eec443fad5eff8cce834e6c83639faf504dcffd4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b00843d2851a8021f148ea11209d205f5b8e6469/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b00843d2851a8021f148ea11209d205f5b8e6469/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b00843d2851a8021f148ea11209d205f5b8e6469", "patch": "@@ -1,3 +1,8 @@\n+2004-11-15  Dale Johannesen  <dalej@apple.com>\n+\n+\t* profile.c (compute_branch_probabilities):  Prevent\n+\tcrash with EH in RTL-based profiling.\n+\n 2004-11-16  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-cfg.c (verify_expr): Replace TREE_OPERAND with"}, {"sha": "318defdafb084c2a1f6136002c9197ca91abed6f", "filename": "gcc/profile.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b00843d2851a8021f148ea11209d205f5b8e6469/gcc%2Fprofile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b00843d2851a8021f148ea11209d205f5b8e6469/gcc%2Fprofile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprofile.c?ref=b00843d2851a8021f148ea11209d205f5b8e6469", "patch": "@@ -569,10 +569,13 @@ compute_branch_probabilities (void)\n \t    }\n \t}\n       /* Otherwise try to preserve the existing REG_BR_PROB probabilities\n-         tree based profile guessing put into code.  */\n+         tree based profile guessing put into code.  BB can be the\n+\t ENTRY_BLOCK, and it can have multiple (fake) successors in\n+\t EH cases, but it still has no code; don't crash in this case.  */\n       else if (profile_status == PROFILE_ABSENT\n \t       && !ir_type ()\n \t       && EDGE_COUNT (bb->succs) > 1\n+\t       && BB_END (bb)\n \t       && (note = find_reg_note (BB_END (bb), REG_BR_PROB, 0)))\n \t{\n \t  int prob = INTVAL (XEXP (note, 0));"}]}