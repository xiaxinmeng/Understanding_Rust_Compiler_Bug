{"sha": "3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2YwNWE0ZjA3MjdiYWM2ZjQ0NTZmYmJlY2RjMTMxNWNjOGJkNTljZg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2018-01-14T11:20:31Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-01-14T11:20:31Z"}, "message": "re PR ipa/83051 (ICE on valid code at -O3: in edge_badness, at ipa-inline.c:1024)\n\n\n\tPR ipa/83051\n\t* gcc.c-torture/compile/pr83051.c: New testcase.\n\t* ipa-inline.c (edge_badness): Tolerate roundoff errors.\n\nFrom-SVN: r256659", "tree": {"sha": "d9cb2c24510576f53ed1943d209df058e1162c80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9cb2c24510576f53ed1943d209df058e1162c80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/comments", "author": null, "committer": null, "parents": [{"sha": "01b9bf0615e178e6c31f8d010cb8df9382b3c2d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01b9bf0615e178e6c31f8d010cb8df9382b3c2d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01b9bf0615e178e6c31f8d010cb8df9382b3c2d4"}], "stats": {"total": 44, "additions": 43, "deletions": 1}, "files": [{"sha": "ed1e0ef13249bf0b9178e1278292e79bdd578d3a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "patch": "@@ -1,3 +1,8 @@\n+2018-01-14  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/83051\n+\t* ipa-inline.c (edge_badness): Tolerate roundoff errors.\n+\n 2018-01-14  Richard Sandiford  <richard.sandiford@linaro.org>\n \n \t* ipa-inline.c (want_inline_small_function_p): Return false if"}, {"sha": "145ffbb5ef0d81fa6af08c47df77c87395352179", "filename": "gcc/ipa-inline.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2Fipa-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2Fipa-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline.c?ref=3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "patch": "@@ -997,7 +997,8 @@ edge_badness (struct cgraph_edge *edge, bool dump)\n   /* Check that inlined time is better, but tolerate some roundoff issues.\n      FIXME: When callee profile drops to 0 we account calls more.  This\n      should be fixed by never doing that.  */\n-  gcc_checking_assert ((edge_time - callee_info->time).to_int () <= 0\n+  gcc_checking_assert ((edge_time * 100\n+\t\t\t- callee_info->time * 101).to_int () <= 0\n \t\t\t|| callee->count.ipa ().initialized_p ());\n   gcc_checking_assert (growth <= callee_info->size);\n "}, {"sha": "c07fada1ac872bdae07e903b3a447b24e2441e7c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "patch": "@@ -1,3 +1,8 @@\n+2018-01-14  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/83051\n+\t* gcc.c-torture/compile/pr83051.c: New testcase.\n+\n 2018-01-14  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n \n \tPR tree-optimization/83501"}, {"sha": "133cabc538b9cb3ef39e08cb75f359a0a05deec8", "filename": "gcc/testsuite/gcc.c-torture/compile/pr83051.c", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr83051.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr83051.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr83051.c?ref=3f05a4f0727bac6f4456fbbecdc1315cc8bd59cf", "patch": "@@ -0,0 +1,31 @@\n+\n+int a[1], b, c, d, e, f, g, h;\n+\n+void fn1 (int p)\n+{ \n+  b = b >> 8 ^ a[b ^ (c & 5)] >> 8 ^ a[(b ^ c) & 5];\n+  b = b >> 8 ^ a[(b ^ c) & 5];\n+}\n+\n+static void fn2 ()\n+{ \n+  int k;\n+  while (1)\n+    while (e)\n+      { \n+        while (g)\n+          while (h)\n+            for (k = 0; k < 6; k++)\n+              while (f)\n+                fn1 (0);\n+        fn1 (0);\n+        fn1 (0);\n+        fn1 (0);\n+      }\n+}\n+\n+int main ()\n+{ \n+  fn2 ();\n+  return 0;\n+}"}]}