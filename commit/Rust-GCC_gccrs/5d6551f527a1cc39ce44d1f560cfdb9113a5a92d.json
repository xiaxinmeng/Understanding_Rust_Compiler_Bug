{"sha": "5d6551f527a1cc39ce44d1f560cfdb9113a5a92d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQ2NTUxZjUyN2ExY2MzOWNlNDRkMWY1NjBjZmRiOTExM2E1YTkyZA==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2018-12-21T05:40:53Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2018-12-21T05:40:53Z"}, "message": "support --with-multilib-list=@name for ARM\n\nIntroduce @name as a means to specify alternate multilib profiles as\narguments to --with-multilib-list.\n\nSo far this is only implemented for ARM.\n\n\nfor  gcc/ChangeLog\n\n\t* config.gcc (tmake_file): Add name to tmake_file for\n        each @name in --with-multilib-list on arm-*-* targets.\n\t* doc/install.texi (with-multilib-list): Document it.\n\nFrom-SVN: r267320", "tree": {"sha": "62b0a6c21f2909fef845b2e09c8b1cbb0ce7ff00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/62b0a6c21f2909fef845b2e09c8b1cbb0ce7ff00"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d/comments", "author": null, "committer": null, "parents": [{"sha": "906a9283a5d53f21f032af8e4a22358b1b0f1ec9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/906a9283a5d53f21f032af8e4a22358b1b0f1ec9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/906a9283a5d53f21f032af8e4a22358b1b0f1ec9"}], "stats": {"total": 62, "additions": 52, "deletions": 10}, "files": [{"sha": "e3eb937e2a57e58e99953cc061baff19a4ce83b5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5d6551f527a1cc39ce44d1f560cfdb9113a5a92d", "patch": "@@ -1,3 +1,9 @@\n+2018-12-21  Alexandre Oliva <oliva@adacore.com>\n+\n+\t* config.gcc (tmake_file): Add name to tmake_file for\n+\teach @name in --with-multilib-list on arm-*-* targets.\n+\t* doc/install.texi (with-multilib-list): Document it.\n+\n 2018-12-21  Jakub Jelinek  <jakub@redhat.com>\n \n \t* tree-vect-data-refs.c (vect_enhance_data_refs_alignment): Use"}, {"sha": "bd75e06486ef7f559546e6f4681c6d34f79700e1", "filename": "gcc/config.gcc", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=5d6551f527a1cc39ce44d1f560cfdb9113a5a92d", "patch": "@@ -3976,13 +3976,23 @@ case \"${target}\" in\n \n \t\t# Add extra multilibs\n \t\tif test \"x$with_multilib_list\" != x; then\n+\t\t\tml=\n \t\t\tarm_multilibs=`echo $with_multilib_list | sed -e 's/,/ /g'`\n \t\t\tif test \"x${arm_multilibs}\" != xdefault ; then\n \t\t\t\tfor arm_multilib in ${arm_multilibs}; do\n \t\t\t\t\tcase ${arm_multilib} in\n \t\t\t\t\taprofile|rmprofile)\n \t\t\t\t\t\ttmake_profile_file=\"arm/t-multilib\"\n \t\t\t\t\t\t;;\n+\t\t\t\t\t@*)\n+\t\t\t\t\t\tml=`echo \"X$arm_multilib\" | sed '1s,^X@,,'`\n+\t\t\t\t\t\tif test -f \"${srcdir}/config/arm/${ml}\"; then\n+\t\t\t\t\t\t\ttmake_file=\"${tmake_file} arm/${ml}\"\n+\t\t\t\t\t\telse\n+\t\t\t\t\t\t\techo \"Error: ${ml} does not exist in ${srcdir}/config/arm\" >&2\n+\t\t\t\t\t\t\texit 1\n+\t\t\t\t\t\tfi\n+\t\t\t\t\t\t;;\n \t\t\t\t\t*)\n \t\t\t\t\t\techo \"Error: --with-multilib-list=${with_multilib_list} not supported.\" 1>&2\n \t\t\t\t\t\texit 1\n@@ -4003,6 +4013,9 @@ case \"${target}\" in\n \t\t\t\t    || test \"x$with_mode\" != x ; then\n \t\t\t\t    echo \"Error: You cannot use any of --with-arch/cpu/fpu/float/mode with --with-multilib-list=${with_multilib_list}\" 1>&2\n \t\t\t\t    exit 1\n+\t\t\t\telif test \"x$ml\" != x ; then\n+\t\t\t\t    echo \"Error: You cannot use builtin multilib profiles along with custom ones\" 1>&2\n+\t\t\t\t    exit 1\n \t\t\t\tfi\n \t\t\t\t# But pass the default value for float-abi\n \t\t\t\t# through to the multilib selector"}, {"sha": "443003b0fde66f8a277ca43c93c3d6787c918ff2", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 33, "deletions": 10, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d6551f527a1cc39ce44d1f560cfdb9113a5a92d/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=5d6551f527a1cc39ce44d1f560cfdb9113a5a92d", "patch": "@@ -1078,18 +1078,41 @@ values and meaning for each target is given below.\n \n @table @code\n @item arm*-*-*\n-@var{list} is a comma separated list of @code{aprofile} and @code{rmprofile}\n-to build multilibs for A or R and M architecture profiles respectively.  Note\n-that, due to some limitation of the current multilib framework, using the\n-combined @code{aprofile,rmprofile} multilibs selects in some cases a less\n-optimal multilib than when using the multilib profile for the architecture\n-targetted.  The special value @code{default} is also accepted and is equivalent\n-to omitting the option, ie. only the default run-time library will be enabled.\n+@var{list} is a comma separated list of @code{aprofile} and\n+@code{rmprofile} to build multilibs for A or R and M architecture\n+profiles respectively.  Note that, due to some limitation of the current\n+multilib framework, using the combined @code{aprofile,rmprofile}\n+multilibs selects in some cases a less optimal multilib than when using\n+the multilib profile for the architecture targetted.  The special value\n+@code{default} is also accepted and is equivalent to omitting the\n+option, i.e., only the default run-time library will be enabled.\n+\n+@var{list} may instead contain @code{@@name}, to use the multilib\n+configuration Makefile fragment @file{name} in @file{gcc/config/arm} in\n+the source tree (it is part of the corresponding sources, after all).\n+It is recommended, but not required, that files used for this purpose to\n+be named starting with @file{t-ml-}, to make their intended purpose\n+self-evident, in line with GCC conventions.  Such files enable custom,\n+user-chosen multilib lists to be configured.  Whether multiple such\n+files can be used together depends on the contents of the supplied\n+files.  See @file{gcc/config/arm/t-multilib} and its supplementary\n+@file{gcc/config/arm/t-*profile} files for an example of what such\n+Makefile fragments might look like for this version of GCC.  The macros\n+expected to be defined in these fragments are not stable across GCC\n+releases, so make sure they define the @code{MULTILIB}-related macros\n+expected by the version of GCC you are building.\n+@ifnothtml\n+@xref{Target Fragment,, Target Makefile Fragments, gccint, GNU Compiler\n+Collection (GCC) Internals}.\n+@end ifnothtml\n+@ifhtml\n+See ``Target Makefile Fragments'' in the internals manual.\n+@end ifhtml\n \n The table below gives the combination of ISAs, architectures, FPUs and\n-floating-point ABIs for which multilibs are built for each accepted value.\n-The union of these options is considered when specifying both @code{aprofile}\n-and @code{rmprofile}.\n+floating-point ABIs for which multilibs are built for each predefined\n+profile.  The union of these options is considered when specifying both\n+@code{aprofile} and @code{rmprofile}.\n \n @multitable @columnfractions .15 .28 .30\n @item Option @tab aprofile @tab rmprofile"}]}