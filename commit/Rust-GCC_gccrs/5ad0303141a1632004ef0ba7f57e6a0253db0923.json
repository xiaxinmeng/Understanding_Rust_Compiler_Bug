{"sha": "5ad0303141a1632004ef0ba7f57e6a0253db0923", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFkMDMwMzE0MWExNjMyMDA0ZWYwYmE3ZjU3ZTZhMDI1M2RiMDkyMw==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2020-07-09T09:52:49Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-10-19T09:53:40Z"}, "message": "[Ada] Alternative display of multi-line messages for GNATprove\n\ngcc/ada/\n\n\t* debug.adb: Use debug switch -gnatdF for this alternative\n\tdisplay of messages.\n\t* errout.adb (Output_Messages): Alternative display when -gnatdF\n\tis used.\n\t* erroutc.adb (Output_Msg_Text): Likewise.", "tree": {"sha": "a3e5daf356c2ec1529e0d8972ca4a01cfb660d8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3e5daf356c2ec1529e0d8972ca4a01cfb660d8c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ad0303141a1632004ef0ba7f57e6a0253db0923", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ad0303141a1632004ef0ba7f57e6a0253db0923", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ad0303141a1632004ef0ba7f57e6a0253db0923", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ad0303141a1632004ef0ba7f57e6a0253db0923/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dc55492d63569da6b0885d9b3a7ee2cff61b9302", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc55492d63569da6b0885d9b3a7ee2cff61b9302", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc55492d63569da6b0885d9b3a7ee2cff61b9302"}], "stats": {"total": 54, "additions": 39, "deletions": 15}, "files": [{"sha": "f00f7471de1327b2d86403e4b9f7cd9934c97a0f", "filename": "gcc/ada/debug.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ad0303141a1632004ef0ba7f57e6a0253db0923/gcc%2Fada%2Fdebug.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ad0303141a1632004ef0ba7f57e6a0253db0923/gcc%2Fada%2Fdebug.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fdebug.adb?ref=5ad0303141a1632004ef0ba7f57e6a0253db0923", "patch": "@@ -69,7 +69,7 @@ package body Debug is\n    --  dC   Output debugging information on check suppression\n    --  dD   Delete elaboration checks in inner level routines\n    --  dE   Apply elaboration checks to predefined units\n-   --  dF\n+   --  dF   Alternative display for messages over multiple lines\n    --  dG   Generate all warnings including those normally suppressed\n    --  dH   Hold (kill) call to gigi\n    --  dI   Inhibit internal name numbering in gnatG listing"}, {"sha": "36e8f6a9c324b75494fa85f90bcabdb5c0523c58", "filename": "gcc/ada/errout.adb", "status": "modified", "additions": 30, "deletions": 13, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ad0303141a1632004ef0ba7f57e6a0253db0923/gcc%2Fada%2Ferrout.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ad0303141a1632004ef0ba7f57e6a0253db0923/gcc%2Fada%2Ferrout.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrout.adb?ref=5ad0303141a1632004ef0ba7f57e6a0253db0923", "patch": "@@ -2052,24 +2052,41 @@ package body Errout is\n          E := First_Error_Msg;\n          while E /= No_Error_Msg loop\n             if not Errors.Table (E).Deleted and then not Debug_Flag_KK then\n-               if Full_Path_Name_For_Brief_Errors then\n-                  Write_Name (Full_Ref_Name (Errors.Table (E).Sfile));\n-               else\n-                  Write_Name (Reference_Name (Errors.Table (E).Sfile));\n+\n+               --  If -gnatdF is used, separate main messages from previous\n+               --  messages with a newline and make continuation messages\n+               --  follow the main message with only an indentation of two\n+               --  space characters, without repeating file:line:col: prefix.\n+\n+               if Debug_Flag_FF then\n+                  if Errors.Table (E).Msg_Cont then\n+                     Write_Str (\"  \");\n+                  else\n+                     Write_Eol;\n+                  end if;\n                end if;\n \n-               Write_Char (':');\n-               Write_Int (Int (Physical_To_Logical\n-                                (Errors.Table (E).Line,\n-                                 Errors.Table (E).Sfile)));\n-               Write_Char (':');\n+               if not (Debug_Flag_FF and then Errors.Table (E).Msg_Cont) then\n+                  if Full_Path_Name_For_Brief_Errors then\n+                     Write_Name (Full_Ref_Name (Errors.Table (E).Sfile));\n+                  else\n+                     Write_Name (Reference_Name (Errors.Table (E).Sfile));\n+                  end if;\n+\n+                  Write_Char (':');\n+                  Write_Int (Int (Physical_To_Logical\n+                             (Errors.Table (E).Line,\n+                                Errors.Table (E).Sfile)));\n+                  Write_Char (':');\n+\n+                  if Errors.Table (E).Col < 10 then\n+                     Write_Char ('0');\n+                  end if;\n \n-               if Errors.Table (E).Col < 10 then\n-                  Write_Char ('0');\n+                  Write_Int (Int (Errors.Table (E).Col));\n+                  Write_Str (\": \");\n                end if;\n \n-               Write_Int (Int (Errors.Table (E).Col));\n-               Write_Str (\": \");\n                Output_Msg_Text (E);\n                Write_Eol;\n             end if;"}, {"sha": "df174f6abe65978d8f2c21363360bac6f2607708", "filename": "gcc/ada/erroutc.adb", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ad0303141a1632004ef0ba7f57e6a0253db0923/gcc%2Fada%2Ferroutc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ad0303141a1632004ef0ba7f57e6a0253db0923/gcc%2Fada%2Ferroutc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferroutc.adb?ref=5ad0303141a1632004ef0ba7f57e6a0253db0923", "patch": "@@ -689,9 +689,16 @@ package body Erroutc is\n          Txt := Text;\n       end if;\n \n+      --  If -gnatdF is used, continuation messages follow the main message\n+      --  with only an indentation of two space characters, without repeating\n+      --  any prefix.\n+\n+      if Debug_Flag_FF and then E_Msg.Msg_Cont then\n+         null;\n+\n       --  For info messages, prefix message with \"info: \"\n \n-      if E_Msg.Info then\n+      elsif E_Msg.Info then\n          Txt := new String'(\"info: \" & Txt.all);\n \n       --  Warning treated as error"}]}