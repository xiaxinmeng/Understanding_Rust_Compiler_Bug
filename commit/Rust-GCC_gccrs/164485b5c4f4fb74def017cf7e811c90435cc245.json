{"sha": "164485b5c4f4fb74def017cf7e811c90435cc245", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTY0NDg1YjVjNGY0ZmI3NGRlZjAxN2NmN2U4MTFjOTA0MzVjYzI0NQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-01-22T23:00:50Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-01-22T23:00:50Z"}, "message": "re PR tree-optimization/83957 (ICE: Segmentation fault (in gimple_phi_arg))\n\n\tPR tree-optimization/83957\n\t* omp-expand.c (expand_omp_for_generic): Ignore virtual PHIs.  Remove\n\tsemicolon after for body surrounded by braces.\n\n\t* gcc.dg/autopar/pr83957.c: New test.\n\nFrom-SVN: r256967", "tree": {"sha": "683e8f190df39ed03429642b043ec45729ce6891", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/683e8f190df39ed03429642b043ec45729ce6891"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/164485b5c4f4fb74def017cf7e811c90435cc245", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/164485b5c4f4fb74def017cf7e811c90435cc245", "html_url": "https://github.com/Rust-GCC/gccrs/commit/164485b5c4f4fb74def017cf7e811c90435cc245", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/164485b5c4f4fb74def017cf7e811c90435cc245/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f5c517f03c53189f5a3381cda85219303480e090", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5c517f03c53189f5a3381cda85219303480e090", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5c517f03c53189f5a3381cda85219303480e090"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "507bb52dc8258275429df7a6447f8564f1f9c5fb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=164485b5c4f4fb74def017cf7e811c90435cc245", "patch": "@@ -1,5 +1,9 @@\n 2018-01-22  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/83957\n+\t* omp-expand.c (expand_omp_for_generic): Ignore virtual PHIs.  Remove\n+\tsemicolon after for body surrounded by braces.\n+\n \tPR tree-optimization/83081\n \t* profile-count.h (profile_probability::split): New method.\n \t* dojump.c (do_jump_1) <case TRUTH_ANDIF_EXPR, case TRUTH_ORIF_EXPR>:"}, {"sha": "90e06310d81a95a2413a740e542bec354f95c622", "filename": "gcc/omp-expand.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2Fomp-expand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2Fomp-expand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fomp-expand.c?ref=164485b5c4f4fb74def017cf7e811c90435cc245", "patch": "@@ -3156,6 +3156,9 @@ expand_omp_for_generic (struct omp_region *region,\n \t      gphi *nphi;\n \t      gphi *exit_phi = psi.phi ();\n \n+\t      if (virtual_operand_p (gimple_phi_result (exit_phi)))\n+\t\tcontinue;\n+\n \t      edge l2_to_l3 = find_edge (l2_bb, l3_bb);\n \t      tree exit_res = PHI_ARG_DEF_FROM_EDGE (exit_phi, l2_to_l3);\n \n@@ -3178,7 +3181,7 @@ expand_omp_for_generic (struct omp_region *region,\n \t      add_phi_arg (nphi, exit_res, l2_to_l0, UNKNOWN_LOCATION);\n \n \t      add_phi_arg (inner_phi, new_res, l0_to_l1, UNKNOWN_LOCATION);\n-\t    };\n+\t    }\n \t}\n \n       set_immediate_dominator (CDI_DOMINATORS, l2_bb,"}, {"sha": "82497ed9641b7dadbdef3a10fc6eff757fa45606", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=164485b5c4f4fb74def017cf7e811c90435cc245", "patch": "@@ -1,5 +1,8 @@\n 2018-01-22  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/83957\n+\t* gcc.dg/autopar/pr83957.c: New test.\n+\n \tPR tree-optimization/83081\n \t* gcc.dg/predict-8.c: Adjust expected probability.\n "}, {"sha": "7d13ee19ce62a0255079ba6bd55cc8041e1c1518", "filename": "gcc/testsuite/gcc.dg/autopar/pr83957.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr83957.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/164485b5c4f4fb74def017cf7e811c90435cc245/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr83957.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr83957.c?ref=164485b5c4f4fb74def017cf7e811c90435cc245", "patch": "@@ -0,0 +1,11 @@\n+/* PR tree-optimization/83957 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -ftree-parallelize-loops=2 -fno-tree-dce --param parloops-schedule=dynamic\" } */\n+\n+void\n+foo (int *x, int y)\n+{\n+  if (y < 0)\n+    for (; y < 1; ++y)\n+      x = &y;\n+}"}]}