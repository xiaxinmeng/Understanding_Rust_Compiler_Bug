{"sha": "f49b1654d331d48b5c268e5bdd4b08cb2ea732bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ5YjE2NTRkMzMxZDQ4YjVjMjY4ZTViZGQ0YjA4Y2IyZWE3MzJiYg==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "1997-12-11T18:19:38Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-12-11T18:19:38Z"}, "message": "* configure.in (target frags): Add *-linux-gnu.\n\nFrom-SVN: r17041", "tree": {"sha": "c36ec57b1e7cd3d4a19aa5ab333c1855b40c786f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c36ec57b1e7cd3d4a19aa5ab333c1855b40c786f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb/comments", "author": null, "committer": null, "parents": [{"sha": "b472527b0fdc204489ee647a6752b29b1291317a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b472527b0fdc204489ee647a6752b29b1291317a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b472527b0fdc204489ee647a6752b29b1291317a"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "39731537eb6a7ccd541da7f130b31b63a116b831", "filename": "libio/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb/libio%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb/libio%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2FChangeLog?ref=f49b1654d331d48b5c268e5bdd4b08cb2ea732bb", "patch": "@@ -1,3 +1,7 @@\n+Thu Dec 11 11:20:59 1997  H.J. Lu  (hjl@gnu.org)\n+\n+\t* configure.in (target frags): Add *-linux-gnu.\n+\n Fri Dec  5 16:22:15 1997  H.J. Lu  (hjl@gnu.org)\n \n \t* streambuf.cc (streambuf::~streambuf): Don't delete _lock"}, {"sha": "63a152a90f175dd7d3bce184f6ff403986b61676", "filename": "libio/configure.in", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb/libio%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f49b1654d331d48b5c268e5bdd4b08cb2ea732bb/libio%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fconfigure.in?ref=f49b1654d331d48b5c268e5bdd4b08cb2ea732bb", "patch": "@@ -64,6 +64,17 @@ case \"${target}\" in\n     cp ${srcdir}/config/linuxaxp1-libc-lock.h libc-lock.h\n     cp ${srcdir}/config/linuxaxp1-stdio-lock.h stdio-lock.h\n     ;;\n+  *-linux-gnu)\n+    # We have a correct libc-lock.h in glibc 2.1 but not all glibc 2.0.\n+    # Create a wrapper if necessary.\n+    (echo \"#include <bits/libc-lock.h>\" | ${CC-cc} -E -) >/dev/null 2>&1 ||\n+      {\n+\techo \"#include_next <libc-lock.h>\" > libc-lock.h\n+\techo 'asm (\".weak _pthread_cleanup_pop_restore\");' >> libc-lock.h\n+\techo 'asm (\".weak _pthread_cleanup_push_defer\");' >> libc-lock.h\n+\n+      }\n+    ;;\n esac\n \n for frag in ${frags}; do"}]}