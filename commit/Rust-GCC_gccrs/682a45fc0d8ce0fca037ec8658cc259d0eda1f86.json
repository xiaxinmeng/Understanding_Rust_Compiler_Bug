{"sha": "682a45fc0d8ce0fca037ec8658cc259d0eda1f86", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjgyYTQ1ZmMwZDhjZTBmY2EwMzdlYzg2NThjYzI1OWQwZWRhMWY4Ng==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2004-03-08T00:38:31Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2004-03-08T00:38:31Z"}, "message": "re PR target/14471 (Workaround for errata regarding multiplication bug)\n\n\tPR target/14471\n\t* configure.ac (Target-specific assembler checks) <cris-*-*>: New\n\tcase, checking for -no-mul-bug-abort option.\n\t* configure, config.in: Regenerate.\n\t* doc/invoke.texi (CRIS Options): Document -mmul-bug-workaround\n\tand -mno-mul-bug-workaround.\n\t* config/cris/cris.md (\"smulsi3_highpart\", \"umulsi3_highpart\")\n\t(\"mulsidi3\", \"umulsidi3\"): Prefix output template with \"%!\".\n\t(\"umulhisi3\", \"umulqihi3\", \"mulsi3\", \"mulqihi3\", \"mulhisi3\"):\n\tDitto.  Make attribute \"slottable\" dependent on TARGET_MUL_BUG.\n\t* config/cris/mulsi3.asm (__Mul) [__CRIS_arch_version >= 10]: Make\n\tsure mulu.d is not last on cache-line.\n\t* config/cris/cris.h (ASM_SPEC): Translate -mno-mul-bug-workaround\n\tinto -no-mul-bug-abort depending on HAVE_AS_MUL_BUG_ABORT_OPTION.\n\t(TARGET_MASK_MUL_BUG, TARGET_MUL_BUG): New macros.\n\t(TARGET_SWITCHES): New options -mmul-bug-workaround and\n\t-mno-mul-bug-workaround.\n\t(TARGET_DEFAULT): Include TARGET_MASK_MUL_BUG.\n\t(PRINT_OPERAND_PUNCT_VALID_P): Include '!'.\n\t* config/cris/cris.c (cris_operand_extend_operator): Clarify\n\trelation to MULT in head comment.\n\t(cris_op_str): Abort for MULT.\n\t(cris_print_operand) <case '!'>: New case.\n\nFrom-SVN: r79086", "tree": {"sha": "9f1a6ba55c54badeca5dce7798dcbd99ee01c1a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f1a6ba55c54badeca5dce7798dcbd99ee01c1a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/682a45fc0d8ce0fca037ec8658cc259d0eda1f86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/682a45fc0d8ce0fca037ec8658cc259d0eda1f86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/682a45fc0d8ce0fca037ec8658cc259d0eda1f86", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/682a45fc0d8ce0fca037ec8658cc259d0eda1f86/comments", "author": null, "committer": null, "parents": [{"sha": "86da66b593538809357d60192ede83d02add681d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86da66b593538809357d60192ede83d02add681d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86da66b593538809357d60192ede83d02add681d"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "c60dbf024f63df89e3ae47b9fd6cb847d1a5c694", "filename": "gcc/configure.ac", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/682a45fc0d8ce0fca037ec8658cc259d0eda1f86/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/682a45fc0d8ce0fca037ec8658cc259d0eda1f86/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=682a45fc0d8ce0fca037ec8658cc259d0eda1f86", "patch": "@@ -2357,6 +2357,14 @@ case \"$target\" in\n   [Define if your assembler supports explicit relocations.])])\n     ;;\n \n+  cris-*-*)\n+    gcc_GAS_CHECK_FEATURE([-no-mul-bug-abort option],\n+      gcc_cv_as_cris_no_mul_bug,[2,15,91],\n+      [-no-mul-bug-abort], [.text],,\n+      [AC_DEFINE(HAVE_AS_NO_MUL_BUG_ABORT_OPTION, 1,\n+\t\t[Define if your assembler supports the -no-mul-bug-abort option.])])\n+    ;;\n+\n   sparc*-*-*)\n     gcc_GAS_CHECK_FEATURE([.register], gcc_cv_as_sparc_register_op,,,\n       [.register %g2, #scratch],,"}]}