{"sha": "046a69e067eef6ec8722ee7334013a10ff34bb7d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ2YTY5ZTA2N2VlZjZlYzg3MjJlZTczMzQwMTNhMTBmZjM0YmI3ZA==", "commit": {"author": {"name": "Daniel Berlin", "email": "dberlin@dberlin.org", "date": "2005-07-11T18:28:36Z"}, "committer": {"name": "Daniel Berlin", "email": "dberlin@gcc.gnu.org", "date": "2005-07-11T18:28:36Z"}, "message": "re PR tree-optimization/22404 (ICE in first_vi_for_offset)\n\n2005-07-11  Daniel Berlin  <dberlin@dberlin.org>\n\n\t* print-tree.c (print_node): Use DECL_ARGUMENT_FLD.\n\t* tree.h (DECL_ARGUMENT_FLD): New macro.\n\n2005-07-11  Daniel Berlin  <dberlin@dberlin.org>\n\n\tFix PR tree-optimization/22404\n\n\t* tree-ssa-structalias.c (create_variable_info_for): Use\n\tcorrect offset.\n\nFrom-SVN: r101894", "tree": {"sha": "9f96c9ce72ce2ed36318bcf256b5205358692d21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f96c9ce72ce2ed36318bcf256b5205358692d21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/046a69e067eef6ec8722ee7334013a10ff34bb7d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/046a69e067eef6ec8722ee7334013a10ff34bb7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/046a69e067eef6ec8722ee7334013a10ff34bb7d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/046a69e067eef6ec8722ee7334013a10ff34bb7d/comments", "author": {"login": "dberlin", "id": 324715, "node_id": "MDQ6VXNlcjMyNDcxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/324715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dberlin", "html_url": "https://github.com/dberlin", "followers_url": "https://api.github.com/users/dberlin/followers", "following_url": "https://api.github.com/users/dberlin/following{/other_user}", "gists_url": "https://api.github.com/users/dberlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dberlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dberlin/subscriptions", "organizations_url": "https://api.github.com/users/dberlin/orgs", "repos_url": "https://api.github.com/users/dberlin/repos", "events_url": "https://api.github.com/users/dberlin/events{/privacy}", "received_events_url": "https://api.github.com/users/dberlin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ebde3ea873a32cd5863575f56d6a3438e7a02f36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebde3ea873a32cd5863575f56d6a3438e7a02f36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ebde3ea873a32cd5863575f56d6a3438e7a02f36"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "9cd1d7581112ce130b082018e8ec79013fcc3e14", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=046a69e067eef6ec8722ee7334013a10ff34bb7d", "patch": "@@ -1,3 +1,15 @@\n+2005-07-11  Daniel Berlin  <dberlin@dberlin.org>\n+\t\n+\t* print-tree.c (print_node): Use DECL_ARGUMENT_FLD.\n+\t* tree.h (DECL_ARGUMENT_FLD): New macro.\n+\n+2005-07-11  Daniel Berlin  <dberlin@dberlin.org>\n+\t\n+\tFix PR tree-optimization/22404\n+\n+\t* tree-ssa-structalias.c (create_variable_info_for): Use\n+\tcorrect offset.\n+\n 2005-07-11  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n \t* config/bfin/bfin.md (cmpsi, compare_eq, compare_ne, compare_lt,"}, {"sha": "954ee2d6a9c79ee1cec72c01b0a81de81da8a9ee", "filename": "gcc/print-tree.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Fprint-tree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Fprint-tree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-tree.c?ref=046a69e067eef6ec8722ee7334013a10ff34bb7d", "patch": "@@ -467,7 +467,7 @@ print_node (FILE *file, const char *prefix, tree node, int indent)\n \t}\n       if (CODE_CONTAINS_STRUCT (code, TS_DECL_NON_COMMON))\n \t{\n-\t  print_node (file, \"arguments\", DECL_ARGUMENTS (node), indent + 4);\n+\t  print_node (file, \"arguments\", DECL_ARGUMENT_FLD (node), indent + 4);\n \t  print_node (file, \"result\", DECL_RESULT_FLD (node), indent + 4);\n \t}\n       print_node_brief (file, \"initial\", DECL_INITIAL (node), indent + 4);"}, {"sha": "2c6b8cd2729464447c6066c1940eb836ada46c20", "filename": "gcc/testsuite/g++.dg/tree-ssa/pr22404.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr22404.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr22404.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr22404.C?ref=046a69e067eef6ec8722ee7334013a10ff34bb7d", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+/* We were not getting the offset of a in B and a in C::B correct, \n+   causing an abort.  */\n+struct A { A(); };\n+\n+struct B : A\n+{\n+    A a;\n+};\n+\n+struct C : B { };\n+\n+C c;"}, {"sha": "27299e764bc8a3b69a6b15a92caed3fa24546331", "filename": "gcc/tree-ssa-structalias.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Ftree-ssa-structalias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Ftree-ssa-structalias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-structalias.c?ref=046a69e067eef6ec8722ee7334013a10ff34bb7d", "patch": "@@ -3065,6 +3065,7 @@ create_variable_info_for (tree decl, const char *name)\n       \n       field = fo->field;\n       vi->size = TREE_INT_CST_LOW (DECL_SIZE (field));\n+      vi->offset = fo->offset;\n       for (i = 1; VEC_iterate (fieldoff_s, fieldstack, i, fo); i++)\n \t{\n \t  varinfo_t newvi;"}, {"sha": "e1007a3caed1532ebab028db873e5b8071abf2f7", "filename": "gcc/tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/046a69e067eef6ec8722ee7334013a10ff34bb7d/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=046a69e067eef6ec8722ee7334013a10ff34bb7d", "patch": "@@ -2631,6 +2631,7 @@ struct tree_decl_non_common GTY(())\n    VAR_DECL and PARM_DECL reserve the arguments slot for language-specific\n    uses.  */\n #define DECL_ARGUMENTS(NODE) (FUNCTION_DECL_CHECK (NODE)->decl_non_common.arguments)\n+#define DECL_ARGUMENT_FLD(NODE) (DECL_NON_COMMON_CHECK (NODE)->decl_non_common.arguments)\n \n /* FUNCTION_DECL inherits from DECL_NON_COMMON because of the use of the\n    arguments/result/saved_tree fields by front ends.   It was either inherit"}]}