{"sha": "5bca794b0df69689d0bcc6d03697f169e543dd2c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWJjYTc5NGIwZGY2OTY4OWQwYmNjNmQwMzY5N2YxNjllNTQzZGQyYw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-06-14T12:30:29Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-06-14T12:30:29Z"}, "message": "re PR bootstrap/44509 (Revision 160626 breaks bootstrap on *-apple-darwin*)\n\n\tPR bootstrap/44509\n\t* c-config-lang.in (gtfiles): Add c-family/c-cppbuiltin.c.\n\t* c-family/c-cppbuiltin.c: Include gt-c-family-c-cppbuiltin.h.\n\t(lazy_hex_fp_values, lazy_hex_fp_value_count): Add GTY(()) markers.\n\t(lazy_hex_fp_value, builtin_define_with_hex_fp_value): Use\n\tggc_strdup instead of xstrdup.\n\n\t* gcc.dg/pr44509.c: New test.\n\nFrom-SVN: r160729", "tree": {"sha": "e71b7a923da3e97aad52cfbe029d629009a66b0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e71b7a923da3e97aad52cfbe029d629009a66b0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5bca794b0df69689d0bcc6d03697f169e543dd2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bca794b0df69689d0bcc6d03697f169e543dd2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bca794b0df69689d0bcc6d03697f169e543dd2c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bca794b0df69689d0bcc6d03697f169e543dd2c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "689cb4acaa076bc1e537298fe71c00102e58e782", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/689cb4acaa076bc1e537298fe71c00102e58e782", "html_url": "https://github.com/Rust-GCC/gccrs/commit/689cb4acaa076bc1e537298fe71c00102e58e782"}], "stats": {"total": 39, "additions": 33, "deletions": 6}, "files": [{"sha": "a2778ae1557299732c869c35526366f19210e537", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5bca794b0df69689d0bcc6d03697f169e543dd2c", "patch": "@@ -1,3 +1,12 @@\n+2010-06-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR bootstrap/44509\n+\t* c-config-lang.in (gtfiles): Add c-family/c-cppbuiltin.c.\n+\t* c-family/c-cppbuiltin.c: Include gt-c-family-c-cppbuiltin.h.\n+\t(lazy_hex_fp_values, lazy_hex_fp_value_count): Add GTY(()) markers.\n+\t(lazy_hex_fp_value, builtin_define_with_hex_fp_value): Use\n+\tggc_strdup instead of xstrdup.\n+\n 2010-06-14  Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/44507 "}, {"sha": "d91380311902633509114b9a8d28897f0ce7f751", "filename": "gcc/c-config-lang.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Fc-config-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Fc-config-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-config-lang.in?ref=5bca794b0df69689d0bcc6d03697f169e543dd2c", "patch": "@@ -22,4 +22,4 @@\n # files used by C that have garbage collection GTY macros in them\n # which therefore need to be scanned by gengtype.c.\n \n-gtfiles=\"\\$(srcdir)/c-lang.c \\$(srcdir)/c-tree.h \\$(srcdir)/c-decl.c \\$(srcdir)/c-family/c-common.c \\$(srcdir)/c-family/c-common.h \\$(srcdir)/c-family/c-pragma.h \\$(srcdir)/c-family/c-pragma.c \\$(srcdir)/c-objc-common.c \\$(srcdir)/c-parser.c \\$(srcdir)/c-lang.h\"\n+gtfiles=\"\\$(srcdir)/c-lang.c \\$(srcdir)/c-tree.h \\$(srcdir)/c-decl.c \\$(srcdir)/c-family/c-common.c \\$(srcdir)/c-family/c-common.h \\$(srcdir)/c-family/c-cppbuiltin.c \\$(srcdir)/c-family/c-pragma.h \\$(srcdir)/c-family/c-pragma.c \\$(srcdir)/c-objc-common.c \\$(srcdir)/c-parser.c \\$(srcdir)/c-lang.h\""}, {"sha": "77a92c39584bc7416fc6713a2f111bb807937ebd", "filename": "gcc/c-family/c-cppbuiltin.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Fc-family%2Fc-cppbuiltin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Fc-family%2Fc-cppbuiltin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-cppbuiltin.c?ref=5bca794b0df69689d0bcc6d03697f169e543dd2c", "patch": "@@ -951,15 +951,16 @@ builtin_define_with_int_value (const char *macro, HOST_WIDE_INT value)\n    array and function allows it to be done lazily when __DBL_MAX__\n    etc. is first used.  */\n \n-static struct\n+struct GTY(()) lazy_hex_fp_value_struct\n {\n   const char *hex_str;\n   cpp_macro *macro;\n   enum machine_mode mode;\n   int digits;\n   const char *fp_suffix;\n-} lazy_hex_fp_values[12];\n-static int lazy_hex_fp_value_count;\n+};\n+static GTY(()) struct lazy_hex_fp_value_struct lazy_hex_fp_values[12];\n+static GTY(()) int lazy_hex_fp_value_count;\n \n static bool\n lazy_hex_fp_value (cpp_reader *pfile ATTRIBUTE_UNUSED,\n@@ -987,7 +988,7 @@ lazy_hex_fp_value (cpp_reader *pfile ATTRIBUTE_UNUSED,\n   gcc_assert (idx < node->value.macro->count);\n   node->value.macro->exp.tokens[idx].val.str.len = strlen (buf1);\n   node->value.macro->exp.tokens[idx].val.str.text\n-    = (const unsigned char *) xstrdup (buf1);\n+    = (const unsigned char *) ggc_strdup (buf1);\n   return true;\n }\n \n@@ -1014,7 +1015,8 @@ builtin_define_with_hex_fp_value (const char *macro,\n       sprintf (buf1, \"%s=%s\", macro, buf2);\n       cpp_define (parse_in, buf1);\n       node = C_CPP_HASHNODE (get_identifier (macro));\n-      lazy_hex_fp_values[lazy_hex_fp_value_count].hex_str = xstrdup (hex_str);\n+      lazy_hex_fp_values[lazy_hex_fp_value_count].hex_str\n+\t= ggc_strdup (hex_str);\n       lazy_hex_fp_values[lazy_hex_fp_value_count].mode = TYPE_MODE (type);\n       lazy_hex_fp_values[lazy_hex_fp_value_count].digits = digits;\n       lazy_hex_fp_values[lazy_hex_fp_value_count].fp_suffix = fp_suffix;\n@@ -1173,3 +1175,5 @@ builtin_define_type_minmax (const char *min_macro, const char *max_macro,\n       cpp_define (parse_in, buf);\n     }\n }\n+\n+#include \"gt-c-family-c-cppbuiltin.h\""}, {"sha": "013f3bf62791cc779f6311c2c0dfecd503fc747f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5bca794b0df69689d0bcc6d03697f169e543dd2c", "patch": "@@ -1,3 +1,8 @@\n+2010-06-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR bootstrap/44509\n+\t* gcc.dg/pr44509.c: New test.\n+\n 2010-06-14  Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/44507 "}, {"sha": "7c50bd0fc2896a3c504184a67e05a9a85369f02c", "filename": "gcc/testsuite/gcc.dg/pr44509.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44509.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bca794b0df69689d0bcc6d03697f169e543dd2c/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44509.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44509.c?ref=5bca794b0df69689d0bcc6d03697f169e543dd2c", "patch": "@@ -0,0 +1,9 @@\n+/* PR bootstrap/44509 */\n+/* { dg-do compile } */\n+/* { dg-options \"--param ggc-min-expand=0 --param ggc-min-heapsize=0\" } */\n+\n+double\n+foo (void)\n+{\n+  return __DBL_MAX__ - __FLT_MAX__;\n+}"}]}