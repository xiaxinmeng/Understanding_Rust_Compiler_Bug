{"sha": "e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTdmNWI5NzFlY2ZhZGFhMGYxZDIxN2UxNjhhNWRjZjhlN2Q5MWJkNw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1999-02-21T13:16:11Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1999-02-21T13:16:11Z"}, "message": "regmove.c (discover_flags_reg): Remove cc0 code.\n\n        * regmove.c (discover_flags_reg): Remove cc0 code.\n        (mark_flags_life_zones) [HAVE_cc0]: Force use of cc0; bail if\n        a potential flags register was identified.\n\nFrom-SVN: r25341", "tree": {"sha": "0461d058afc7f828d1b0d7e92585337b14a2e83c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0461d058afc7f828d1b0d7e92585337b14a2e83c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7/comments", "author": null, "committer": null, "parents": [{"sha": "3f860e2bcd5333748b8e8dcac516c699e8cfaba5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f860e2bcd5333748b8e8dcac516c699e8cfaba5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f860e2bcd5333748b8e8dcac516c699e8cfaba5"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "312bfdde687e61d0b220feb2a0e457154b85050c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7", "patch": "@@ -1,3 +1,9 @@\n+Sun Feb 21 13:15:40 1999  Richard Henderson  <rth@cygnus.com>\n+\n+\t* regmove.c (discover_flags_reg): Remove cc0 code.\n+\t(mark_flags_life_zones) [HAVE_cc0]: Force use of cc0; bail if\n+\ta potential flags register was identified.\n+\n Sat Feb 20 16:16:07 1998  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>\n \n \t* rs6000.md (scc plus ltu): Fix typo in last change."}, {"sha": "1f5940a7fef2c556c5fee3c3b130e4a0dc7ae535", "filename": "gcc/regmove.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7/gcc%2Fregmove.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7/gcc%2Fregmove.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregmove.c?ref=e7f5b971ecfadaa0f1d217e168a5dcf8e7d91bd7", "patch": "@@ -193,12 +193,7 @@ discover_flags_reg ()\n \treturn pc_rtx;\n       found = (GET_CODE (tmp) == REG && REGNO (tmp) < FIRST_PSEUDO_REGISTER);\n \n-#ifdef HAVE_cc0\n-      /* If we're cc0, and we found a potential flags reg, bail.  */\n-      return (found ? pc_rtx : cc0_rtx);\n-#else\n       return (found ? tmp : NULL_RTX);\n-#endif\n     }\n \n   return pc_rtx;\n@@ -228,6 +223,14 @@ mark_flags_life_zones (flags)\n   int flags_nregs;\n   int block;\n \n+#ifdef HAVE_cc0\n+  /* If we found a flags register on a cc0 host, bail.  */\n+  if (flags == NULL_RTX)\n+    flags = cc0_rtx;\n+  else if (flags != cc0_rtx)\n+    flags = pc_rtx;\n+#endif\n+    \n   /* Simple cases first: if no flags, clear all modes.  If confusing,\n      mark the entire function as being in a flags shadow.  */\n   if (flags == NULL_RTX || flags == pc_rtx)"}]}