{"sha": "88664966ce2f31c5200f94b0a45c6abe2d41de1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg2NjQ5NjZjZTJmMzFjNTIwMGY5NGIwYTQ1YzZhYmUyZDQxZGUxZg==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2005-06-16T08:44:23Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-06-16T08:44:23Z"}, "message": "prj-nmsc.adb (Suffix_For): Change default suffix for C++ to \".cpp\"\n\n2005-06-14  Vincent Celier  <celier@adacore.com>\n\n\t* prj-nmsc.adb (Suffix_For): Change default suffix for C++ to \".cpp\"\n\t(Check_Stand_Alone_Library): If the specified reference symbol file does\n\tnot exist, only issue a warning when the symbol policy is not\n\tControlled. And, when symbol policy is Compliant, set the symbol\n\tpolicy to Autonomous.\n\nFrom-SVN: r101053", "tree": {"sha": "a931a367716028735a3b3db029460a62fbf544c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a931a367716028735a3b3db029460a62fbf544c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88664966ce2f31c5200f94b0a45c6abe2d41de1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88664966ce2f31c5200f94b0a45c6abe2d41de1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88664966ce2f31c5200f94b0a45c6abe2d41de1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88664966ce2f31c5200f94b0a45c6abe2d41de1f/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "474e8cbe94811f01d079516efa6c49da18dbbe8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/474e8cbe94811f01d079516efa6c49da18dbbe8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/474e8cbe94811f01d079516efa6c49da18dbbe8c"}], "stats": {"total": 33, "additions": 28, "deletions": 5}, "files": [{"sha": "8feea85b3c8ae0f402064d8e7fa9069fea49510f", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 28, "deletions": 5, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88664966ce2f31c5200f94b0a45c6abe2d41de1f/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88664966ce2f31c5200f94b0a45c6abe2d41de1f/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=88664966ce2f31c5200f94b0a45c6abe2d41de1f", "patch": "@@ -2460,10 +2460,33 @@ package body Prj.Nmsc is\n                   Get_Name_String (Lib_Ref_Symbol_File.Value))\n                then\n                   Error_Msg_Name_1 := Lib_Ref_Symbol_File.Value;\n-                  Error_Msg\n-                    (Project, In_Tree,\n-                     \"library reference symbol file { does not exist\",\n-                     Lib_Ref_Symbol_File.Location);\n+\n+                  --  For controlled symbol policy, it is an error\n+                  --  if the reference symbol file does not exist.\n+\n+                  if Data.Symbol_Data.Symbol_Policy = Controlled then\n+                     Error_Msg\n+                       (Project, In_Tree,\n+                        \"library reference symbol file { does not exist\",\n+                        Lib_Ref_Symbol_File.Location);\n+\n+                  else\n+                     --  For other symbol policies, this is just a warning\n+\n+                     Error_Msg\n+                       (Project, In_Tree,\n+                        \"?library reference symbol file { does not exist\",\n+                        Lib_Ref_Symbol_File.Location);\n+\n+                     --  In addition, if symbol policy is Compliant, it is\n+                     --  changed to Autonomous, because there is no reference\n+                     --  to check against, and we don't want to fail in this\n+                     --  case.\n+\n+                     if Data.Symbol_Data.Symbol_Policy = Compliant then\n+                        Data.Symbol_Data.Symbol_Policy := Autonomous;\n+                     end if;\n+                  end if;\n                end if;\n \n             end if;\n@@ -5069,7 +5092,7 @@ package body Prj.Nmsc is\n                Add_Str_To_Name_Buffer (\".c\");\n \n             when C_Plus_Plus_Language_Index =>\n-               Add_Str_To_Name_Buffer (\".cc\");\n+               Add_Str_To_Name_Buffer (\".cpp\");\n \n             when others =>\n                return No_Name;"}]}