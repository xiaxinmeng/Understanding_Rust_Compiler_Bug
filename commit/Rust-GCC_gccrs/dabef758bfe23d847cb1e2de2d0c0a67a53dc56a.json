{"sha": "dabef758bfe23d847cb1e2de2d0c0a67a53dc56a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGFiZWY3NThiZmUyM2Q4NDdjYjFlMmRlMmQwYzBhNjdhNTNkYzU2YQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2020-09-28T06:39:25Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2020-09-28T07:32:27Z"}, "message": "Revert recent changes to lower_try_finally_dup_block\n\nThis reverts the recent changes made to lower_try_finally_dup_block and\naimed at tweaking the souce location info for __builtin_stack_restore.\n\ngcc/ChangeLog:\n\t* tree-eh.c (lower_try_finally_dup_block): Revert latest change.", "tree": {"sha": "1d9195ab7550a24d6b81b9a8958d78a8fa571f0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d9195ab7550a24d6b81b9a8958d78a8fa571f0f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dabef758bfe23d847cb1e2de2d0c0a67a53dc56a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dabef758bfe23d847cb1e2de2d0c0a67a53dc56a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dabef758bfe23d847cb1e2de2d0c0a67a53dc56a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dabef758bfe23d847cb1e2de2d0c0a67a53dc56a/comments", "author": null, "committer": null, "parents": [{"sha": "4383c595ce5cc6ef6bcb45d2c9caf43002afbc4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4383c595ce5cc6ef6bcb45d2c9caf43002afbc4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4383c595ce5cc6ef6bcb45d2c9caf43002afbc4f"}], "stats": {"total": 12, "additions": 2, "deletions": 10}, "files": [{"sha": "c3314bbd78ca8b799074fc8d5289e7596405b290", "filename": "gcc/tree-eh.c", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dabef758bfe23d847cb1e2de2d0c0a67a53dc56a/gcc%2Ftree-eh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dabef758bfe23d847cb1e2de2d0c0a67a53dc56a/gcc%2Ftree-eh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-eh.c?ref=dabef758bfe23d847cb1e2de2d0c0a67a53dc56a", "patch": "@@ -899,26 +899,18 @@ lower_try_finally_dup_block (gimple_seq seq, struct leh_state *outer_state,\n   gtry *region = NULL;\n   gimple_seq new_seq;\n   gimple_stmt_iterator gsi;\n-  location_t last_loc = UNKNOWN_LOCATION;\n \n   new_seq = copy_gimple_seq_and_replace_locals (seq);\n \n-  for (gsi = gsi_last (new_seq); !gsi_end_p (gsi); gsi_prev (&gsi))\n+  for (gsi = gsi_start (new_seq); !gsi_end_p (gsi); gsi_next (&gsi))\n     {\n       gimple *stmt = gsi_stmt (gsi);\n-      /* We duplicate __builtin_stack_restore at -O0 in the hope of eliminating\n-\t it on the EH paths.  When it is not eliminated, give it the next\n-\t location in the sequence or make it transparent in the debug info.  */\n-      if (gimple_call_builtin_p (stmt, BUILT_IN_STACK_RESTORE))\n-\tgimple_set_location (stmt, last_loc);\n-      else if (LOCATION_LOCUS (gimple_location (stmt)) == UNKNOWN_LOCATION)\n+      if (LOCATION_LOCUS (gimple_location (stmt)) == UNKNOWN_LOCATION)\n \t{\n \t  tree block = gimple_block (stmt);\n \t  gimple_set_location (stmt, loc);\n \t  gimple_set_block (stmt, block);\n \t}\n-      else\n-\tlast_loc = gimple_location (stmt);\n     }\n \n   if (outer_state->tf)"}]}