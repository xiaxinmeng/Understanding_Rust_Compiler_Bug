{"sha": "76015c34a97c58e6e6fb058f8d34a5be56d3a713", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzYwMTVjMzRhOTdjNThlNmU2ZmIwNThmOGQzNGE1YmU1NmQzYTcxMw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2011-06-02T21:52:46Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-06-02T21:52:46Z"}, "message": "cse.c (cse_find_path): Refine change to exclude EDGE_ABNORMAL_CALL edges only...\n\n2011-06-02 \u00a0Eric Botcazou \u00a0<ebotcazou@adacore.com>\n\n\t* cse.c (cse_find_path): Refine change to exclude EDGE_ABNORMAL_CALL\n\tedges only, when there is a non-local label in the function.\n\t* postreload-gcse.c (bb_has_well_behaved_predecessors): Likewise.\n\nFrom-SVN: r174585", "tree": {"sha": "c51807484f6834435dd02de83e9b094a6ed92fe2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c51807484f6834435dd02de83e9b094a6ed92fe2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76015c34a97c58e6e6fb058f8d34a5be56d3a713", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76015c34a97c58e6e6fb058f8d34a5be56d3a713", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76015c34a97c58e6e6fb058f8d34a5be56d3a713", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76015c34a97c58e6e6fb058f8d34a5be56d3a713/comments", "author": null, "committer": null, "parents": [{"sha": "cde3a7a96908f651a844fd43905a64651d42c5af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cde3a7a96908f651a844fd43905a64651d42c5af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cde3a7a96908f651a844fd43905a64651d42c5af"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "4533f582d9b8f9b4b60bca4549bf7ba6b215a163", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76015c34a97c58e6e6fb058f8d34a5be56d3a713/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76015c34a97c58e6e6fb058f8d34a5be56d3a713/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=76015c34a97c58e6e6fb058f8d34a5be56d3a713", "patch": "@@ -1,3 +1,9 @@\n+2011-06-02  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* cse.c (cse_find_path): Refine change to exclude EDGE_ABNORMAL_CALL\n+\tedges only, when there is a non-local label in the function.\n+\t* postreload-gcse.c (bb_has_well_behaved_predecessors): Likewise.\n+\n 2011-06-02  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/constraints.md (Y3): New register constraint."}, {"sha": "cfa2b00216c50a75dde1822fe128d30dcff873a0", "filename": "gcc/cse.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76015c34a97c58e6e6fb058f8d34a5be56d3a713/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76015c34a97c58e6e6fb058f8d34a5be56d3a713/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=76015c34a97c58e6e6fb058f8d34a5be56d3a713", "patch": "@@ -6193,7 +6193,7 @@ cse_find_path (basic_block first_bb, struct cse_basic_block_data *data,\n \t    e = NULL;\n \n \t  if (e\n-\t      && (e->flags & EDGE_ABNORMAL) == 0\n+\t      && !((e->flags & EDGE_ABNORMAL_CALL) && cfun->has_nonlocal_label)\n \t      && e->dest != EXIT_BLOCK_PTR\n \t      && single_pred_p (e->dest)\n \t      /* Avoid visiting basic blocks twice.  The large comment"}, {"sha": "bc55ead744fb7b5bde38f1a90724de9c9436eb0b", "filename": "gcc/postreload-gcse.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76015c34a97c58e6e6fb058f8d34a5be56d3a713/gcc%2Fpostreload-gcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76015c34a97c58e6e6fb058f8d34a5be56d3a713/gcc%2Fpostreload-gcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpostreload-gcse.c?ref=76015c34a97c58e6e6fb058f8d34a5be56d3a713", "patch": "@@ -912,19 +912,20 @@ get_avail_load_store_reg (rtx insn)\n static bool\n bb_has_well_behaved_predecessors (basic_block bb)\n {\n-  unsigned int edge_count = EDGE_COUNT (bb->preds);\n   edge pred;\n   edge_iterator ei;\n \n-  if (edge_count == 0\n-      || (edge_count == 1 && (single_pred_edge (bb)->flags & EDGE_ABNORMAL)))\n+  if (EDGE_COUNT (bb->preds) == 0)\n     return false;\n \n   FOR_EACH_EDGE (pred, ei, bb->preds)\n     {\n       if ((pred->flags & EDGE_ABNORMAL) && EDGE_CRITICAL_P (pred))\n \treturn false;\n \n+      if ((pred->flags & EDGE_ABNORMAL_CALL) && cfun->has_nonlocal_label)\n+\treturn false;\n+\n       if (JUMP_TABLE_DATA_P (BB_END (pred->src)))\n \treturn false;\n     }"}]}