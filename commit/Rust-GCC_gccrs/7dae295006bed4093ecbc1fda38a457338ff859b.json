{"sha": "7dae295006bed4093ecbc1fda38a457338ff859b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RhZTI5NTAwNmJlZDQwOTNlY2JjMWZkYTM4YTQ1NzMzOGZmODU5Yg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-01-03T10:00:30Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-01-03T10:00:30Z"}, "message": "tree.c (handle_nodiscard_attribute): Improve warning location.\n\n/cp\n2019-01-03  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* tree.c (handle_nodiscard_attribute): Improve warning location.\n\n/testsuite\n2019-01-03  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/cpp1z/nodiscard3.C: Test locations too.\n\nFrom-SVN: r267547", "tree": {"sha": "19facb6202780a0dd512e3e283e6948274c30f3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19facb6202780a0dd512e3e283e6948274c30f3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dae295006bed4093ecbc1fda38a457338ff859b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dae295006bed4093ecbc1fda38a457338ff859b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dae295006bed4093ecbc1fda38a457338ff859b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dae295006bed4093ecbc1fda38a457338ff859b/comments", "author": null, "committer": null, "parents": [{"sha": "d1409ea5a2f7597be28178e933d7fa695416ee78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1409ea5a2f7597be28178e933d7fa695416ee78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1409ea5a2f7597be28178e933d7fa695416ee78"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "5b94654b10a80cfe9d3977f2c1837aa486e6033a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7dae295006bed4093ecbc1fda38a457338ff859b", "patch": "@@ -1,3 +1,7 @@\n+2019-01-03  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* tree.c (handle_nodiscard_attribute): Improve warning location.\n+\n 2019-01-02  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/88612 - ICE with -Waddress-of-packed-member."}, {"sha": "4db89a4e5a65980165e03cf65763f7973cf1ff63", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=7dae295006bed4093ecbc1fda38a457338ff859b", "patch": "@@ -4372,8 +4372,9 @@ handle_nodiscard_attribute (tree *node, tree name, tree /*args*/,\n   if (TREE_CODE (*node) == FUNCTION_DECL)\n     {\n       if (VOID_TYPE_P (TREE_TYPE (TREE_TYPE (*node))))\n-\twarning (OPT_Wattributes, \"%qE attribute applied to %qD with void \"\n-\t\t \"return type\", name, *node);\n+\twarning_at (DECL_SOURCE_LOCATION (*node),\n+\t\t    OPT_Wattributes, \"%qE attribute applied to %qD with void \"\n+\t\t    \"return type\", name, *node);\n     }\n   else if (OVERLOAD_TYPE_P (*node))\n     /* OK */;"}, {"sha": "c077f7a9a8e257f98a77dbc86bd64305b7d92003", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7dae295006bed4093ecbc1fda38a457338ff859b", "patch": "@@ -1,3 +1,7 @@\n+2019-01-03  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/cpp1z/nodiscard3.C: Test locations too.\n+\n 2019-01-03  Martin Liska  <mliska@suse.cz>\n \n \tPR testsuite/88436\n@@ -14,7 +18,7 @@\n \tPR c++/81486 - CTAD failing with ().\n \t* g++.dg/cpp1z/class-deduction60.C: New test.\n \t* g++.dg/cpp1z/class-deduction61.C: New test.\n-\t\n+\n 2019-01-02  Martin Sebor  <msebor@redhat.com>\n             Jeff Law  <law@redhat.com>\n \n@@ -31,7 +35,7 @@\n \tmessages only on vect_hw_misalign targets.\n \n 2019-01-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n- \n+\n \t* gfortran.dg/argument_checking_7.f90: Remove run-on error message.\n \t* gfortran.dg/dec_d_lines_3.f: Ditto.\n \t* gfortran.dg/dec_structure_24.f90: Ditto."}, {"sha": "42485b73972b07af2063c0ada451b56a9d4d2a40", "filename": "gcc/testsuite/g++.dg/cpp1z/nodiscard3.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fnodiscard3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dae295006bed4093ecbc1fda38a457338ff859b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fnodiscard3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fnodiscard3.C?ref=7dae295006bed4093ecbc1fda38a457338ff859b", "patch": "@@ -13,8 +13,8 @@ typedef struct { char big[1024]; fnt fn; } C;\n struct [[nodiscard]] D { int i; D(); ~D(); };\n \n WUR E check1 (void);\n-WUR void check2 (void); /* { dg-warning \"nodiscard\" } */\n-WUR int foo;\t\t/* { dg-warning \"nodiscard\" } */\n+WUR void check2 (void); /* { dg-warning \"10:.nodiscard.\" } */\n+WUR int foo;\t\t/* { dg-warning \"9:.nodiscard.\" } */\n int bar (void);\n WURAI E check3 (void) { return (E)bar (); }\n WUR A check4 (void);"}]}