{"sha": "858a9ffcb70e7fbf3c28baee571ef2785d8b798f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODU4YTlmZmNiNzBlN2ZiZjNjMjhiYWVlNTcxZWYyNzg1ZDhiNzk4Zg==", "commit": {"author": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1997-05-08T18:51:51Z"}, "committer": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1997-05-08T18:51:51Z"}, "message": "(output_float_compare): For pentiumpro use fcomip\n\nFrom-SVN: r14048", "tree": {"sha": "9ef75823307491d083fa564148dcf54bb8398c14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9ef75823307491d083fa564148dcf54bb8398c14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/858a9ffcb70e7fbf3c28baee571ef2785d8b798f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/858a9ffcb70e7fbf3c28baee571ef2785d8b798f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/858a9ffcb70e7fbf3c28baee571ef2785d8b798f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/858a9ffcb70e7fbf3c28baee571ef2785d8b798f/comments", "author": null, "committer": null, "parents": [{"sha": "96f06cb6dda0ad26a734dea2f05dd07a246b7ef1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96f06cb6dda0ad26a734dea2f05dd07a246b7ef1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96f06cb6dda0ad26a734dea2f05dd07a246b7ef1"}], "stats": {"total": 28, "additions": 19, "deletions": 9}, "files": [{"sha": "4a17d804e66fc300625a3651cf7392e44f6e629d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 19, "deletions": 9, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/858a9ffcb70e7fbf3c28baee571ef2785d8b798f/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/858a9ffcb70e7fbf3c28baee571ef2785d8b798f/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=858a9ffcb70e7fbf3c28baee571ef2785d8b798f", "patch": "@@ -3737,9 +3737,25 @@ output_float_compare (insn, operands)\n \t `fcompp' float compare */\n \n       if (unordered_compare)\n-\toutput_asm_insn (\"fucompp\", operands);\n+\tif (cc_status.flags & CC_FCOMI)\n+\t  {\n+\t    output_asm_insn (AS2 (fucomip,%y1,%0), operands);\n+\t    output_asm_insn (AS1 (fstp, %y0), operands);\n+\t    RET;\n+\t  }\n+\telse\n+\t  output_asm_insn (\"fucompp\", operands);\n       else\n-\toutput_asm_insn (\"fcompp\", operands);\n+\t{\n+\tif (cc_status.flags & CC_FCOMI)\n+\t  {\n+\t    output_asm_insn (AS2 (fcomip, %y1,%0), operands);\n+\t    output_asm_insn (AS1 (fstp, %y0), operands);\n+\t    RET;\n+\t  }\n+\telse\n+\t  output_asm_insn (\"fcompp\", operands);\n+\t}\n     }\n   else\n     {\n@@ -3764,13 +3780,7 @@ output_float_compare (insn, operands)\n \toutput_op_from_reg (operands[1], strcat (buf, AS1 (%z0,%1)));\n       else if (cc_status.flags & CC_FCOMI) \n \t{\n-\t  rtx xops[3];\n-\t  \n- \t  xops[0] = operands[0];\n- \t  xops[1] = operands[1];\n- \t  xops[2] = operands[0];\n-\t  \n-\t  output_asm_insn (strcat (buf, AS2 (%z1,%y1,%2)), xops);\n+\t  output_asm_insn (strcat (buf, AS2 (%z1,%y1,%0)), operands);\n \t  RET;\n \t}\n       else"}]}