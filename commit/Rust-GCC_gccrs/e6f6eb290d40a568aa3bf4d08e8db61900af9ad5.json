{"sha": "e6f6eb290d40a568aa3bf4d08e8db61900af9ad5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTZmNmViMjkwZDQwYTU2OGFhM2JmNGQwOGU4ZGI2MTkwMGFmOWFkNQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-07-28T17:50:26Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-07-28T17:50:26Z"}, "message": "(strength_reduce): Don't ignore a giv that depends on a\nreversed biv.\n\nFrom-SVN: r5025", "tree": {"sha": "6d076eaf9a6c3098127b2df613b655bad63f4321", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d076eaf9a6c3098127b2df613b655bad63f4321"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e6f6eb290d40a568aa3bf4d08e8db61900af9ad5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6f6eb290d40a568aa3bf4d08e8db61900af9ad5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6f6eb290d40a568aa3bf4d08e8db61900af9ad5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6f6eb290d40a568aa3bf4d08e8db61900af9ad5/comments", "author": null, "committer": null, "parents": [{"sha": "c70305f128f9ce0052d95ed082a8e7e486f42ce4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c70305f128f9ce0052d95ed082a8e7e486f42ce4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c70305f128f9ce0052d95ed082a8e7e486f42ce4"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "d51fff7276f92596cca3a84ad049155b5177f280", "filename": "gcc/loop.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6f6eb290d40a568aa3bf4d08e8db61900af9ad5/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6f6eb290d40a568aa3bf4d08e8db61900af9ad5/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=e6f6eb290d40a568aa3bf4d08e8db61900af9ad5", "patch": "@@ -3708,7 +3708,14 @@ strength_reduce (scan_start, end, loop_top, insn_count,\n \t  /* If an insn is not to be strength reduced, then set its ignore\n \t     flag, and clear all_reduced.  */\n \n-\t  if (v->lifetime * threshold * benefit < insn_count)\n+\t  /* A giv that depends on a reversed biv must be reduced if it is\n+\t     used after the loop exit, otherwise, it would have the wrong\n+\t     value after the loop exit.  To make it simple, just reduce all\n+\t     of such giv's whether or not we know they are used after the loop\n+\t     exit.  */\n+\n+\t  if (v->lifetime * threshold * benefit < insn_count\n+\t      && ! bl->reversed)\n \t    {\n \t      if (loop_dump_stream)\n \t\tfprintf (loop_dump_stream,"}]}