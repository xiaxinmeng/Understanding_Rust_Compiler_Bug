{"sha": "589f1edf0d0e680f6e7267cd5e43d2d628fae5cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg5ZjFlZGYwZDBlNjgwZjZlNzI2N2NkNWU0M2QyZDYyOGZhZTVjYg==", "commit": {"author": {"name": "Geert Bosch", "email": "bosch@gnat.com", "date": "2001-10-08T23:39:37Z"}, "committer": {"name": "Geert Bosch", "email": "bosch@gcc.gnu.org", "date": "2001-10-08T23:39:37Z"}, "message": "* xsnames.adb: New utility for updating snames.ads and snames.adb\n\nFrom-SVN: r46109", "tree": {"sha": "7e79d9e68bb12a4137e59ac4fcda9eb7a70b7f5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e79d9e68bb12a4137e59ac4fcda9eb7a70b7f5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb/comments", "author": null, "committer": null, "parents": [{"sha": "a8c01a592b48327c4555a1352fef9d79982b983d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8c01a592b48327c4555a1352fef9d79982b983d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8c01a592b48327c4555a1352fef9d79982b983d"}], "stats": {"total": 183, "additions": 183, "deletions": 0}, "files": [{"sha": "d41bb6db1c1b50011ae1cef5273d19139faaf2fa", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=589f1edf0d0e680f6e7267cd5e43d2d628fae5cb", "patch": "@@ -1,3 +1,7 @@\n+2001-10-08  Geert Bosch  <bosch@gnat.com>\n+\n+\t* xsnames.adb: New utility for updating snames.ads and snames.adb\n+\n 2001-10-08  Zack Weinberg  <zack@codesourcery.com>\n \n \t* Make-lang.in (ADAFLAGS): Add -W -Wall."}, {"sha": "e0bf244424c3c56fa510dbf6c2a88d1fddfc43e0", "filename": "gcc/ada/xsnames.adb", "status": "added", "additions": 179, "deletions": 0, "changes": 179, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb/gcc%2Fada%2Fxsnames.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/589f1edf0d0e680f6e7267cd5e43d2d628fae5cb/gcc%2Fada%2Fxsnames.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fxsnames.adb?ref=589f1edf0d0e680f6e7267cd5e43d2d628fae5cb", "patch": "@@ -0,0 +1,179 @@\n+------------------------------------------------------------------------------\n+--                                                                          --\n+--                          GNAT SYSTEM UTILITIES                           --\n+--                                                                          --\n+--                              X S N A M E S                               --\n+--                                                                          --\n+--                                 B o d y                                  --\n+--                                                                          --\n+--                            $Revision$\n+--                                                                          --\n+--          Copyright (C) 1992-2001 Free Software Foundation, Inc.          --\n+--                                                                          --\n+-- GNAT is free software;  you can  redistribute it  and/or modify it under --\n+-- terms of the  GNU General Public License as published  by the Free Soft- --\n+-- ware  Foundation;  either version 2,  or (at your option) any later ver- --\n+-- sion.  GNAT is distributed in the hope that it will be useful, but WITH- --\n+-- OUT ANY WARRANTY;  without even the  implied warranty of MERCHANTABILITY --\n+-- or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License --\n+-- for  more details.  You should have  received  a copy of the GNU General --\n+-- Public License  distributed with GNAT;  see file COPYING.  If not, write --\n+-- to  the Free Software Foundation,  59 Temple Place - Suite 330,  Boston, --\n+-- MA 02111-1307, USA.                                                      --\n+--                                                                          --\n+-- GNAT was originally developed  by the GNAT team at  New York University. --\n+-- It is now maintained by Ada Core Technologies Inc (http://www.gnat.com). --\n+--                                                                          --\n+------------------------------------------------------------------------------\n+\n+--  This utility is used to make a new version of the Snames package when\n+--  new names are added to the spec, the existing versions of snames.ads and\n+--  snames.adb are read, and updated to match the set of names in snames.ads.\n+--  The updated versions are written to snames.ns and snames.nb (new spec/body)\n+\n+with Ada.Strings.Unbounded;         use Ada.Strings.Unbounded;\n+with Ada.Strings.Unbounded.Text_IO; use Ada.Strings.Unbounded.Text_IO;\n+with Ada.Strings.Maps;              use Ada.Strings.Maps;\n+with Ada.Strings.Maps.Constants;    use Ada.Strings.Maps.Constants;\n+with Ada.Text_IO;                   use Ada.Text_IO;\n+\n+with GNAT.Spitbol;                  use GNAT.Spitbol;\n+with GNAT.Spitbol.Patterns;         use GNAT.Spitbol.Patterns;\n+\n+procedure XSnames is\n+\n+   InB  : File_Type;\n+   InS  : File_Type;\n+   OutS : File_Type;\n+   OutB : File_Type;\n+\n+   A, B    : VString := Nul;\n+   Line    : VString := Nul;\n+   Name    : VString := Nul;\n+   Name1   : VString := Nul;\n+   Oldrev  : VString := Nul;\n+   Oname   : VString := Nul;\n+   Oval    : VString := Nul;\n+   Restl   : VString := Nul;\n+   Specrev : VString := Nul;\n+\n+   Tdigs : Pattern := Any (Decimal_Digit_Set) &\n+                      Any (Decimal_Digit_Set) &\n+                      Any (Decimal_Digit_Set);\n+\n+   Get_Srev : Pattern := BreakX ('$') & \"$Rev\" & \"ision: \"\n+                           & Break (' ') * Specrev;\n+\n+   Get_Orev : Pattern := (BreakX ('$') & \"$Rev\" &  \"ision: \"\n+                           & Break ('.') & '.') * A\n+                           & Break (' ') * Oldrev & ' ';\n+\n+   Name_Ref : Pattern := Span (' ') * A & Break (' ') * Name\n+                           & Span (' ') * B\n+                           & \": constant Name_Id := N + \" & Tdigs\n+                           & ';' & Rest * Restl;\n+\n+   Get_Name : Pattern := \"Name_\" & Rest * Name1;\n+\n+   Chk_Low  : Pattern := Pos (0) & Any (Lower_Set) & Rest & Pos (1);\n+\n+   Findu    : Pattern := Span ('u') * A;\n+\n+   Val : Natural;\n+\n+   Xlate_U_Und : Character_Mapping := To_Mapping (\"u\", \"_\");\n+\n+   M : Match_Result;\n+\n+begin\n+   Open (InB, In_File, \"snames.adb\");\n+   Open (InS, In_File, \"snames.ads\");\n+\n+   Create (OutS, Out_File, \"snames.ns\");\n+   Create (OutB, Out_File, \"snames.nb\");\n+\n+   Anchored_Mode := True;\n+   Oname := Nul;\n+   Val := 0;\n+\n+   loop\n+      Line := Get_Line (InS);\n+      Put_Line (OutS, Line);\n+      exit when not Match (Line, Get_Srev);\n+   end loop;\n+\n+   loop\n+      Line := Get_Line (InB);\n+      exit when Match (Line, Get_Orev);\n+      Put_Line (OutB, Line);\n+   end loop;\n+\n+   Line := A & (Natural'Value (S (Oldrev)) + 1) & \" $\";\n+   Line := Rpad (Line, 76) & \"--\";\n+   Put_Line (OutB, Line);\n+\n+   loop\n+      Line := Get_Line (InB);\n+      exit when Match (Line, \"   Preset_Names\");\n+      Put_Line (OutB, Line);\n+   end loop;\n+\n+   Put_Line (OutB, Line);\n+\n+   LoopN : while not End_Of_File (InS) loop\n+      Line := Get_Line (InS);\n+\n+      if not Match (Line, Name_Ref) then\n+         Put_Line (OutS, Line);\n+\n+      else\n+         Oval := Lpad (V (Val), 3, '0');\n+\n+         if Match (Name, \"Last_\") then\n+            Oval := Lpad (V (Val - 1), 3, '0');\n+         end if;\n+\n+         Put_Line\n+           (OutS, A & Name & B & \": constant Name_Id := N + \"\n+            & Oval & ';' & Restl);\n+\n+         if Match (Name, Get_Name) then\n+            Name := Name1;\n+            Val := Val + 1;\n+\n+            if Match (Name, Findu, M) then\n+               Replace (M, Translate (A, Xlate_U_Und));\n+               Translate (Name, Lower_Case_Map);\n+\n+            elsif not Match (Name, \"Op_\", \"\") then\n+               Translate (Name, Lower_Case_Map);\n+\n+            else\n+               Name := 'O' & Translate (Name, Lower_Case_Map);\n+            end if;\n+\n+            if Name = \"error\" then\n+               Name := V (\"<error>\");\n+            end if;\n+\n+            if not Match (Name, Chk_Low) then\n+               Put_Line (OutB, \"     \"\"\" & Name & \"#\"\" &\");\n+            end if;\n+         end if;\n+      end if;\n+   end loop LoopN;\n+\n+   loop\n+      Line := Get_Line (InB);\n+      exit when Match (Line, \"      \"\"#\"\";\");\n+   end loop;\n+\n+   Put_Line (OutB, Line);\n+\n+   while not End_Of_File (InB) loop\n+      Put_Line (OutB, Get_Line (InB));\n+   end loop;\n+\n+   Put_Line (OutB, \"--  Updated to match snames.ads revision \" & Specrev);\n+\n+end XSnames;"}]}