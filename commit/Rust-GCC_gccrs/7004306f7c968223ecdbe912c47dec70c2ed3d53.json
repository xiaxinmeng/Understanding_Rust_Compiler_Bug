{"sha": "7004306f7c968223ecdbe912c47dec70c2ed3d53", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzAwNDMwNmY3Yzk2ODIyM2VjZGJlOTEyYzQ3ZGVjNzBjMmVkM2Q1Mw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-12-27T19:04:24Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-12-27T19:04:24Z"}, "message": "re PR c++/51547 (auto, type deduction, reference collapsing and const: invalid initialization of reference of type 'const X&&' from expression of type 'const X')\n\n2011-12-27  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51547\n\t* g++.dg/cpp0x/pr51547.C: New.\n\nFrom-SVN: r182695", "tree": {"sha": "4d94dadddd9aafd17cde096e1881a40a0dcd123b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d94dadddd9aafd17cde096e1881a40a0dcd123b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7004306f7c968223ecdbe912c47dec70c2ed3d53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7004306f7c968223ecdbe912c47dec70c2ed3d53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7004306f7c968223ecdbe912c47dec70c2ed3d53", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7004306f7c968223ecdbe912c47dec70c2ed3d53/comments", "author": null, "committer": null, "parents": [{"sha": "282bc7b4c5fd895ecc81781e0febb8ec13d9ad86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/282bc7b4c5fd895ecc81781e0febb8ec13d9ad86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/282bc7b4c5fd895ecc81781e0febb8ec13d9ad86"}], "stats": {"total": 50, "additions": 50, "deletions": 0}, "files": [{"sha": "80215f6a3415775e446708e41807b569d7f1a597", "filename": "gcc/testsuite/g++.dg/cpp0x/pr51547.C", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7004306f7c968223ecdbe912c47dec70c2ed3d53/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr51547.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7004306f7c968223ecdbe912c47dec70c2ed3d53/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr51547.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr51547.C?ref=7004306f7c968223ecdbe912c47dec70c2ed3d53", "patch": "@@ -0,0 +1,50 @@\n+// PR c++/51547\n+// { dg-options \"-std=c++0x\" }\n+\n+template <class T>\n+struct vector\n+{\n+  T*\n+  begin()\n+  { return &member; }\n+\n+  const T*\n+  begin() const\n+  { return &member; }\n+\n+  T member;\n+};\n+\n+struct Bar {\n+  int x;\n+};\n+\n+struct Foo {\n+  const vector<Bar>& bar() const {\n+    return bar_;\n+  }\n+\n+  vector<Bar> bar_;\n+};\n+\n+template <class X>\n+struct Y {\n+  void foo() {\n+    Foo a;\n+    auto b = a.bar().begin();\n+    auto&& c = b->x;\n+  }\n+};\n+\n+template <class X>\n+void foo() {\n+  Foo a;\n+  auto b = a.bar().begin();\n+  auto&& c = b->x;\n+}\n+\n+int main() {\n+  Y<int> p;\n+  p.foo();\n+  foo<int>();\n+}"}]}