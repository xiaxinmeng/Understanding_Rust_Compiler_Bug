{"sha": "7b8a77eba5efbc6d9556f026774fa1447675602c", "node_id": "C_kwDOANBUbNoAKDdiOGE3N2ViYTVlZmJjNmQ5NTU2ZjAyNjc3NGZhMTQ0NzY3NTYwMmM", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2022-10-07T10:14:30Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2022-10-07T10:16:36Z"}, "message": "Reduce DF computation at -O0\n\nEven at -O0 there may be a fair amount of DF computation performed when\ncompiling large units and part of it appears to be useless.\n\ngcc/\n\t* function.cc (thread_prologue_and_epilogue_insns): Update only\n\tentry and exit blocks when not optimizing.  Remove dead statement.", "tree": {"sha": "aebdd1d8d5bc7e843deaa3ac80f5543984623fbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aebdd1d8d5bc7e843deaa3ac80f5543984623fbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7b8a77eba5efbc6d9556f026774fa1447675602c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b8a77eba5efbc6d9556f026774fa1447675602c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b8a77eba5efbc6d9556f026774fa1447675602c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b8a77eba5efbc6d9556f026774fa1447675602c/comments", "author": null, "committer": null, "parents": [{"sha": "ffaf244c442c575aadbe1c947e22f791a6f14c96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffaf244c442c575aadbe1c947e22f791a6f14c96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffaf244c442c575aadbe1c947e22f791a6f14c96"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "6474a663b30b8d678893684f9511c781a9896688", "filename": "gcc/function.cc", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b8a77eba5efbc6d9556f026774fa1447675602c/gcc%2Ffunction.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b8a77eba5efbc6d9556f026774fa1447675602c/gcc%2Ffunction.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.cc?ref=7b8a77eba5efbc6d9556f026774fa1447675602c", "patch": "@@ -6249,10 +6249,15 @@ thread_prologue_and_epilogue_insns (void)\n \t}\n     }\n \n-  /* Threading the prologue and epilogue changes the artificial refs\n-     in the entry and exit blocks.  */\n-  epilogue_completed = 1;\n-  df_update_entry_exit_and_calls ();\n+  /* Threading the prologue and epilogue changes the artificial refs in the\n+     entry and exit blocks, and may invalidate DF info for tail calls.  */\n+  if (optimize)\n+    df_update_entry_exit_and_calls ();\n+  else\n+    {\n+      df_update_entry_block_defs ();\n+      df_update_exit_block_uses ();\n+    }\n }\n \n /* Reposition the prologue-end and epilogue-begin notes after"}]}