{"sha": "bcc2449384f2092cbdf5d6ac2357aeabe3212b2e", "node_id": "C_kwDOANBUbNoAKGJjYzI0NDkzODRmMjA5MmNiZGY1ZDZhYzIzNTdhZWFiZTMyMTJiMmU", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-11-25T07:27:42Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-11-25T07:27:42Z"}, "message": "tree-optimization/107865 - ICE with outlining of loops\n\nThe following makes sure to clear loops number of iterations when\noutlining them as part of a SESE region as can happen with\nauto-parallelization.  The referenced SSA names become stale otherwise.\n\n\tPR tree-optimization/107865\n\t* tree-cfg.cc (move_sese_region_to_fn): Free the number of\n\titerations of moved loops.\n\n\t* gfortran.dg/graphite/pr107865.f90: New testcase.", "tree": {"sha": "273c3818c49048483e3731089711dc9f556020a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/273c3818c49048483e3731089711dc9f556020a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f120196382ac5ac49ec4a60f8abad42f22d45a91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f120196382ac5ac49ec4a60f8abad42f22d45a91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f120196382ac5ac49ec4a60f8abad42f22d45a91"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "6bddb17a1be57eb202599313f1f20c3df1e29150", "filename": "gcc/testsuite/gfortran.dg/graphite/pr107865.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fpr107865.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fpr107865.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fpr107865.f90?ref=bcc2449384f2092cbdf5d6ac2357aeabe3212b2e", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do compile }\n+! { dg-options \"-O1 -floop-parallelize-all -ftree-parallelize-loops=2\" }\n+\n+      SUBROUTINE FNC (F)\n+\n+      IMPLICIT REAL (A-H)\n+      DIMENSION F(N)\n+\n+      DO I = 1, 6\n+         DO J = 1, 6\n+            IF (J .NE. I) THEN\n+               F(I) = F(I) + 1\n+            END IF\n+         END DO\n+      END DO\n+\n+      RETURN\n+      END"}, {"sha": "0c409b435fb592f9bc6c3dd3cb33676ca8f49845", "filename": "gcc/tree-cfg.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e/gcc%2Ftree-cfg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bcc2449384f2092cbdf5d6ac2357aeabe3212b2e/gcc%2Ftree-cfg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.cc?ref=bcc2449384f2092cbdf5d6ac2357aeabe3212b2e", "patch": "@@ -7859,6 +7859,8 @@ move_sese_region_to_fn (struct function *dest_cfun, basic_block entry_bb,\n       if (bb->loop_father->header == bb)\n \t{\n \t  class loop *this_loop = bb->loop_father;\n+\t  /* Avoid the need to remap SSA names used in nb_iterations.  */\n+\t  free_numbers_of_iterations_estimates (this_loop);\n \t  class loop *outer = loop_outer (this_loop);\n \t  if (outer == loop\n \t      /* If the SESE region contains some bbs ending with"}]}