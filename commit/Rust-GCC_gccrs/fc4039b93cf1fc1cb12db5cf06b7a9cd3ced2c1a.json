{"sha": "fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmM0MDM5YjkzY2YxZmMxY2IxMmRiNWNmMDZiN2E5Y2QzY2VkMmMxYQ==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonber@gnat.com", "date": "2004-10-27T13:41:55Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-10-27T13:41:55Z"}, "message": "sem_ch3.adb (Complete_Private_Subtype): If the full view is a task or protected type with discriminants...\n\n2004-10-26  Ed Schonberg  <schonberg@gnat.com>\n\n\t* sem_ch3.adb (Complete_Private_Subtype): If the full view is a task\n\tor protected type with discriminants, do not constrain the\n\tcorresponding record type if the subtype declaration has no\n\tdiscriminant constraints. This can be the case in source code, or in\n\tthe subtype declaration created to rename an actual type within an\n\tinstantiation.\n\nFrom-SVN: r89670", "tree": {"sha": "9b350703f5dc4238ce36ae7101cd8d6a41f16262", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b350703f5dc4238ce36ae7101cd8d6a41f16262"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a/comments", "author": null, "committer": null, "parents": [{"sha": "fe98a6aa82871e555908dac1f04225b7d6631db4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe98a6aa82871e555908dac1f04225b7d6631db4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe98a6aa82871e555908dac1f04225b7d6631db4"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "fe1cf825923b7aa74ed36e4db57f57d1b7d90b13", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=fc4039b93cf1fc1cb12db5cf06b7a9cd3ced2c1a", "patch": "@@ -7059,9 +7059,15 @@ package body Sem_Ch3 is\n          Set_Primitive_Operations (Full, Primitive_Operations (Full_Base));\n          Set_Class_Wide_Type      (Full, Class_Wide_Type (Full_Base));\n \n+      --  If this is a subtype of a protected or task type, constrain its\n+      --  corresponding record, unless this is a subtype without constraints,\n+      --  i.e. a simple renaming as with an actual subtype in an instance.\n+\n       elsif Is_Concurrent_Type (Full_Base) then\n          if Has_Discriminants (Full)\n            and then Present (Corresponding_Record_Type (Full_Base))\n+           and then\n+             not Is_Empty_Elmt_List (Discriminant_Constraint (Full))\n          then\n             Set_Corresponding_Record_Type (Full,\n               Constrain_Corresponding_Record"}]}