{"sha": "17b29c0a1700733775c8190c57117fe3bbbd91cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTdiMjljMGExNzAwNzMzNzc1YzgxOTBjNTcxMTdmZTNiYmJkOTFjZg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2008-05-10T00:41:39Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-05-10T00:41:39Z"}, "message": "calls.c (expand_call): Don't use callgraph to increase preferred_stack_boundary.\n\n2008-05-09  H.J. Lu  <hongjiu.lu@intel.com>\n\n\t* calls.c (expand_call): Don't use callgraph to increase\n\tpreferred_stack_boundary.\n\n\t* cgraph.h (cgraph_rtl_info): Use unsigned on\n\tpreferred_incoming_stack_boundary.\n\n\t* final.c (rest_of_clean_state): Use unsigned on\n\tpreferred_stack_boundary.\n\nFrom-SVN: r135134", "tree": {"sha": "735fd06cfce1ffc7f37782aff0f57f0032845332", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/735fd06cfce1ffc7f37782aff0f57f0032845332"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17b29c0a1700733775c8190c57117fe3bbbd91cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17b29c0a1700733775c8190c57117fe3bbbd91cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17b29c0a1700733775c8190c57117fe3bbbd91cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17b29c0a1700733775c8190c57117fe3bbbd91cf/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b0d2eb9a1a64313dd406ce1fe949be18b8e0f100", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0d2eb9a1a64313dd406ce1fe949be18b8e0f100", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0d2eb9a1a64313dd406ce1fe949be18b8e0f100"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "d9cb32655eee297d8bcef16343a7fbbf38d35f80", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=17b29c0a1700733775c8190c57117fe3bbbd91cf", "patch": "@@ -1,3 +1,14 @@\n+2008-05-09  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* calls.c (expand_call): Don't use callgraph to increase\n+\tpreferred_stack_boundary.\n+\n+\t* cgraph.h (cgraph_rtl_info): Use unsigned on\n+\tpreferred_incoming_stack_boundary.\n+\n+\t* final.c (rest_of_clean_state): Use unsigned on\n+\tpreferred_stack_boundary.\n+\n 2008-05-09  Tom Tromey  <tromey@redhat.com>\n \n \tPR preprocessor/22231:"}, {"sha": "ac8398271252ac6cf748b436865fec9b4fc2cbc5", "filename": "gcc/calls.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=17b29c0a1700733775c8190c57117fe3bbbd91cf", "patch": "@@ -2109,7 +2109,14 @@ expand_call (tree exp, rtx target, int ignore)\n   if (fndecl)\n     {\n       struct cgraph_rtl_info *i = cgraph_rtl_info (fndecl);\n-      if (i && i->preferred_incoming_stack_boundary)\n+      /* Without automatic stack alignment, we can't increase preferred\n+\t stack boundary.  With automatic stack alignment, it is\n+\t unnecessary since unless we can guarantee that all callers will\n+\t align the outgoing stack properly, callee has to align its\n+\t stack anyway.  */\n+      if (i\n+\t  && i->preferred_incoming_stack_boundary\n+\t  && i->preferred_incoming_stack_boundary < preferred_stack_boundary)\n \tpreferred_stack_boundary = i->preferred_incoming_stack_boundary;\n     }\n "}, {"sha": "97b5e1fd48498d4f9fe5d5134fb31e50368e1594", "filename": "gcc/cgraph.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=17b29c0a1700733775c8190c57117fe3bbbd91cf", "patch": "@@ -118,7 +118,7 @@ struct cgraph_global_info GTY(())\n \n struct cgraph_rtl_info GTY(())\n {\n-   int preferred_incoming_stack_boundary;\n+   unsigned int preferred_incoming_stack_boundary;\n };\n \n /* The cgraph data structure."}, {"sha": "b3185811ad648aabd8919da330dbeaa3881f24e7", "filename": "gcc/final.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17b29c0a1700733775c8190c57117fe3bbbd91cf/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=17b29c0a1700733775c8190c57117fe3bbbd91cf", "patch": "@@ -4239,7 +4239,7 @@ rest_of_clean_state (void)\n \n   if (targetm.binds_local_p (current_function_decl))\n     {\n-      int pref = crtl->preferred_stack_boundary;\n+      unsigned int pref = crtl->preferred_stack_boundary;\n       if (crtl->stack_alignment_needed > crtl->preferred_stack_boundary)\n         pref = crtl->stack_alignment_needed;\n       cgraph_rtl_info (current_function_decl)->preferred_incoming_stack_boundary"}]}