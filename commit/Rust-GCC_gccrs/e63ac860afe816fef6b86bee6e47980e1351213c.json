{"sha": "e63ac860afe816fef6b86bee6e47980e1351213c", "node_id": "C_kwDOANBUbNoAKGU2M2FjODYwYWZlODE2ZmVmNmI4NmJlZTZlNDc5ODBlMTM1MTIxM2M", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-03-21T10:02:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-03-21T10:02:04Z"}, "message": "libstdc++: Work around clang misdesign in time_get<>::get [PR104990]\n\nApparently clang has a -fgnuc-version= option which allows it to pretend\nit is any GCC version the user likes.  It is already bad that it claims to\nbe GCC 4.2 compatible by default when it is not (various unimplemented\nextensions at least), but this option is a horrible idea.\n\nAnyway, this patch adds a hack for it.\n\n2022-03-21  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR libstdc++/104990\n\t* include/bits/locale_facets_nonio.tcc (get): Don't check if do_get\n\tisn't overloaded if __clang__ is defined.", "tree": {"sha": "d2a6811ee39d76875597ceec6824d57b233f4577", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d2a6811ee39d76875597ceec6824d57b233f4577"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e63ac860afe816fef6b86bee6e47980e1351213c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e63ac860afe816fef6b86bee6e47980e1351213c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e63ac860afe816fef6b86bee6e47980e1351213c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e63ac860afe816fef6b86bee6e47980e1351213c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f18553eb7dabc6528d712e54b25ea6f96e51bde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f18553eb7dabc6528d712e54b25ea6f96e51bde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f18553eb7dabc6528d712e54b25ea6f96e51bde"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "17a2c8d4486e8fe295d72d613dd3979d471afca5", "filename": "libstdc++-v3/include/bits/locale_facets_nonio.tcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e63ac860afe816fef6b86bee6e47980e1351213c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets_nonio.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e63ac860afe816fef6b86bee6e47980e1351213c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets_nonio.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets_nonio.tcc?ref=e63ac860afe816fef6b86bee6e47980e1351213c", "patch": "@@ -1465,7 +1465,7 @@ _GLIBCXX_END_NAMESPACE_LDBL_OR_CXX11\n       ctype<_CharT> const& __ctype = use_facet<ctype<_CharT> >(__loc);\n       __err = ios_base::goodbit;\n       bool __use_state = false;\n-#if __GNUC__ >= 5\n+#if __GNUC__ >= 5 && !defined(__clang__)\n #pragma GCC diagnostic push\n #pragma GCC diagnostic ignored \"-Wpmf-conversions\"\n       // Nasty hack.  The C++ standard mandates that get invokes the do_get"}]}