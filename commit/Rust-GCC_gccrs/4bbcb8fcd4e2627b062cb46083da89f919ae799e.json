{"sha": "4bbcb8fcd4e2627b062cb46083da89f919ae799e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGJiY2I4ZmNkNGUyNjI3YjA2MmNiNDYwODNkYTg5ZjkxOWFlNzk5ZQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2005-05-09T05:15:50Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2005-05-09T05:15:50Z"}, "message": "re PR inline-asm/8788 (ICE in emit_move_insn, at expr.c:3089)\n\n\n\tPR inline-asm/8788\n\t* stmt.c (expand_asm_operands): Avoid calling force_reg on BLKmode\n\toperands.\n\n\t* gcc.dg/pr8788-1.c: New testcase.\n\nFrom-SVN: r99422", "tree": {"sha": "245cc8a9f17f8534b5a32132959495818cef308f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/245cc8a9f17f8534b5a32132959495818cef308f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4bbcb8fcd4e2627b062cb46083da89f919ae799e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bbcb8fcd4e2627b062cb46083da89f919ae799e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bbcb8fcd4e2627b062cb46083da89f919ae799e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bbcb8fcd4e2627b062cb46083da89f919ae799e/comments", "author": null, "committer": null, "parents": [{"sha": "65ab381cbf67c1fa0a30499ce03a4cfc4e82234c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65ab381cbf67c1fa0a30499ce03a4cfc4e82234c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65ab381cbf67c1fa0a30499ce03a4cfc4e82234c"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "e4f13a8867066dea8743e8156b4b8f34fcadc77a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4bbcb8fcd4e2627b062cb46083da89f919ae799e", "patch": "@@ -1,3 +1,9 @@\n+2005-05-08  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR inline-asm/8788\n+\t* stmt.c (expand_asm_operands): Avoid calling force_reg on BLKmode\n+\toperands.\n+\n 2005-05-08  Richard Henderson  <rth@redhat.com>\n \n \t* config/alpha/alpha.c (adjust_address): Fix typo last change."}, {"sha": "d1e71dea4f158d0a8309147b8207c22d719122ae", "filename": "gcc/stmt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=4bbcb8fcd4e2627b062cb46083da89f919ae799e", "patch": "@@ -877,7 +877,7 @@ expand_asm_operands (tree string, tree outputs, tree inputs,\n \n       if (asm_operand_ok (op, constraint) <= 0)\n \t{\n-\t  if (allows_reg)\n+\t  if (allows_reg && TYPE_MODE (type) != BLKmode)\n \t    op = force_reg (TYPE_MODE (type), op);\n \t  else if (!allows_mem)\n \t    warning (0, \"asm operand %d probably doesn%'t match constraints\","}, {"sha": "48d9936374240559a12a45afc6e4ea3075d1594c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4bbcb8fcd4e2627b062cb46083da89f919ae799e", "patch": "@@ -1,3 +1,8 @@\n+2005-05-08  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR inline-asm/8788\n+\t* gcc.dg/pr8788-1.c: New testcase.\n+\n 2005-05-08  Richard Sandiford  <rsandifo@redhat.com>\n \n \tPR target/21416"}, {"sha": "74e1694090c199c9ebebaae2563ef01c0f1fb3a9", "filename": "gcc/testsuite/gcc.dg/pr8788-1.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2Ftestsuite%2Fgcc.dg%2Fpr8788-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bbcb8fcd4e2627b062cb46083da89f919ae799e/gcc%2Ftestsuite%2Fgcc.dg%2Fpr8788-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr8788-1.c?ref=4bbcb8fcd4e2627b062cb46083da89f919ae799e", "patch": "@@ -0,0 +1,20 @@\n+/* PR inline-asm/8788 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+typedef struct {\n+    long x[6];\n+} myjmp_buf;\n+\n+typedef struct {\n+    myjmp_buf regs;\n+} my_stack;\n+\n+void switch_to_stack (my_stack *stack){\n+    asm (  /* { dg-error \"impossible constraint\" } */\n+/* { dg-warning \"asm operand 1\" \"asm operand 1\" { target *-*-* } 14 } */\n+        \"\\n\"\n+        : \"+r\" (stack->regs)\n+    );\n+}\n+"}]}