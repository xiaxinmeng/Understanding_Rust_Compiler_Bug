{"sha": "6ff85fd82d366db03289da8f6b47e202eb4eee7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZmODVmZDgyZDM2NmRiMDMyODlkYThmNmI0N2UyMDJlYjRlZWU3Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2000-09-11T20:20:32Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2000-09-11T20:20:32Z"}, "message": "combine.c (simplify_if_then_else): Don't convert a == b ? b ...\n\n\t* combine.c (simplify_if_then_else): Don't convert a == b ? b : a\n\tto a if the comparison is floating mode and not -ffast-math.\n\t* simplify-rtx.c (simplify_ternary_operation): Likewise.\n\nFrom-SVN: r36326", "tree": {"sha": "90cccff7b1e490cd93a4558a51852a30f3faaae4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90cccff7b1e490cd93a4558a51852a30f3faaae4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ff85fd82d366db03289da8f6b47e202eb4eee7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ff85fd82d366db03289da8f6b47e202eb4eee7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ff85fd82d366db03289da8f6b47e202eb4eee7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ff85fd82d366db03289da8f6b47e202eb4eee7b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4102c782e32436af07666c512e1fbf2a3404cc18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4102c782e32436af07666c512e1fbf2a3404cc18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4102c782e32436af07666c512e1fbf2a3404cc18"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "dd8593e88a1822f272d16bb0456b27a7569d25f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ff85fd82d366db03289da8f6b47e202eb4eee7b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ff85fd82d366db03289da8f6b47e202eb4eee7b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ff85fd82d366db03289da8f6b47e202eb4eee7b", "patch": "@@ -1,3 +1,9 @@\n+2000-09-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* combine.c (simplify_if_then_else): Don't convert a == b ? b : a\n+\tto a if the comparison is floating mode and not -ffast-math.\n+\t* simplify-rtx.c (simplify_ternary_operation): Likewise.\n+\n Mon Sep 11 20:07:48 2000  J\"orn Rennecke <amylaar@redhat.co.uk>\n \n \t* sh.h (INITIALIZE_TRAMPOLINE): Remove stray call to"}, {"sha": "478aab2b2a30d166626567c913864703cd7055e8", "filename": "gcc/combine.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ff85fd82d366db03289da8f6b47e202eb4eee7b/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ff85fd82d366db03289da8f6b47e202eb4eee7b/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=6ff85fd82d366db03289da8f6b47e202eb4eee7b", "patch": "@@ -4703,10 +4703,12 @@ simplify_if_then_else (x)\n \n   /* Convert a == b ? b : a to \"a\".  */\n   if (true_code == EQ && ! side_effects_p (cond)\n+      && (! FLOAT_MODE_P (mode) || flag_fast_math)\n       && rtx_equal_p (XEXP (cond, 0), false)\n       && rtx_equal_p (XEXP (cond, 1), true))\n     return false;\n   else if (true_code == NE && ! side_effects_p (cond)\n+\t   && (! FLOAT_MODE_P (mode) || flag_fast_math)\n \t   && rtx_equal_p (XEXP (cond, 0), true)\n \t   && rtx_equal_p (XEXP (cond, 1), false))\n     return true;"}, {"sha": "0091d727092d96845e90afca2eb2145180795a24", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ff85fd82d366db03289da8f6b47e202eb4eee7b/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ff85fd82d366db03289da8f6b47e202eb4eee7b/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=6ff85fd82d366db03289da8f6b47e202eb4eee7b", "patch": "@@ -1976,10 +1976,12 @@ simplify_ternary_operation (code, mode, op0_mode, op0, op1, op2)\n \n       /* Convert a == b ? b : a to \"a\".  */\n       if (GET_CODE (op0) == NE && ! side_effects_p (op0)\n+\t  && (! FLOAT_MODE_P (mode) || flag_fast_math)\n \t  && rtx_equal_p (XEXP (op0, 0), op1)\n \t  && rtx_equal_p (XEXP (op0, 1), op2))\n \treturn op1;\n       else if (GET_CODE (op0) == EQ && ! side_effects_p (op0)\n+\t  && (! FLOAT_MODE_P (mode) || flag_fast_math)\n \t  && rtx_equal_p (XEXP (op0, 1), op1)\n \t  && rtx_equal_p (XEXP (op0, 0), op2))\n \treturn op2;"}]}