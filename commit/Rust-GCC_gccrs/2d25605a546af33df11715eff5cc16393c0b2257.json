{"sha": "2d25605a546af33df11715eff5cc16393c0b2257", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQyNTYwNWE1NDZhZjMzZGYxMTcxNWVmZjVjYzE2MzkzYzBiMjI1Nw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2003-11-29T17:42:16Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-11-29T17:42:16Z"}, "message": "13171-2.cc: Tweak for a few small problems (fix timings, use VERIFY..)\n\n2003-11-29  Paolo Carlini  <pcarlini@suse.de>\n\n\t* testsuite/27_io/basic_filebuf/imbue/char/13171-2.cc:\n\tTweak for a few small problems (fix timings, use VERIFY..)\n\nFrom-SVN: r74034", "tree": {"sha": "4205618e8b5db46e1ce8ecdaf3b5d4d043b26e06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4205618e8b5db46e1ce8ecdaf3b5d4d043b26e06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d25605a546af33df11715eff5cc16393c0b2257", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d25605a546af33df11715eff5cc16393c0b2257", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d25605a546af33df11715eff5cc16393c0b2257", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d25605a546af33df11715eff5cc16393c0b2257/comments", "author": null, "committer": null, "parents": [{"sha": "26b0ad130a5795cd760d22e27d16d14d4579a77e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26b0ad130a5795cd760d22e27d16d14d4579a77e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26b0ad130a5795cd760d22e27d16d14d4579a77e"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "5e7d21f49eff4ce5d341a0c308a23fc188653568", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d25605a546af33df11715eff5cc16393c0b2257/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d25605a546af33df11715eff5cc16393c0b2257/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=2d25605a546af33df11715eff5cc16393c0b2257", "patch": "@@ -1,3 +1,8 @@\n+2003-11-29  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* testsuite/27_io/basic_filebuf/imbue/char/13171-2.cc:\n+\tTweak for a few small problems (fix timings, use VERIFY..)\n+\n 2003-11-28  Paolo Carlini  <pcarlini@suse.de>\n \n \t* testsuite/27_io/basic_filebuf/imbue/char/13171-3.cc: Remove."}, {"sha": "74aa1fc0dfa65cd4836e6d86cb9180e86d41027c", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/imbue/char/13171-2.cc", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d25605a546af33df11715eff5cc16393c0b2257/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13171-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d25605a546af33df11715eff5cc16393c0b2257/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13171-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13171-2.cc?ref=2d25605a546af33df11715eff5cc16393c0b2257", "patch": "@@ -20,7 +20,6 @@\n \n #include <fstream>\n #include <locale>\n-#include <cassert>\n \n #include <sys/types.h>\n #include <sys/stat.h>\n@@ -33,6 +32,9 @@ void test01()\n   bool test __attribute__((unused)) = true;\n   using namespace std;\n \n+  locale loc_fr(__gnu_test::try_named_locale(\"fr_FR\"));\n+  locale loc_en(__gnu_test::try_named_locale(\"en_US\"));\n+\n   const char* name = \"tmp_fifo_13171-2\";\n   unlink(name);\n   mkfifo(name, S_IRWXU);\n@@ -43,21 +45,25 @@ void test01()\n       filebuf fb;\n       fb.open(name, ios_base::out);\n       fb.sputc('S');\n+      fb.pubsync();\n+      sleep(2);\n       fb.close();\n-      return;\n+      exit(0);\n     }\n \n   filebuf fb;\n-  fb.pubimbue(__gnu_test::try_named_locale(\"fr_FR\"));\n+  fb.pubimbue(loc_fr);\n   fb.open(name, ios_base::in);\n-  assert(fb.is_open());\n-  fb.pubimbue(__gnu_test::try_named_locale(\"en_US\"));\n+  sleep(1);\n+  VERIFY( fb.is_open() );\n+  fb.pubimbue(loc_en);\n   filebuf::int_type c = fb.sgetc();\n-  assert(c == 'S');\n   fb.close();\n+  VERIFY( c == 'S' );\n }\n \n int main()\n {\n   test01();\n+  return 0;\n }"}]}