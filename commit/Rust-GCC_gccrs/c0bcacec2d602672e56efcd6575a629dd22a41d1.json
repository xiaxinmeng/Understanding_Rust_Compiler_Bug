{"sha": "c0bcacec2d602672e56efcd6575a629dd22a41d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzBiY2FjZWMyZDYwMjY3MmU1NmVmY2Q2NTc1YTYyOWRkMjJhNDFkMQ==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-08-05T23:26:38Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-08-05T23:26:38Z"}, "message": "re PR c/27721 (ICE using += with a function)\n\n\tPR c/27721\n\t* c-typeck.c (build_modify_expr): Test earlier for non-lvalues.\n\n\t* gcc.dg/lvalue-4.c: New test.\n\nFrom-SVN: r115955", "tree": {"sha": "28b338f7d84ae55e6304ba2806ea61a21fd326da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28b338f7d84ae55e6304ba2806ea61a21fd326da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c0bcacec2d602672e56efcd6575a629dd22a41d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0bcacec2d602672e56efcd6575a629dd22a41d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0bcacec2d602672e56efcd6575a629dd22a41d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0bcacec2d602672e56efcd6575a629dd22a41d1/comments", "author": null, "committer": null, "parents": [{"sha": "85cad37c81a7c506c09cea90ff3cd4a15acacaaa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85cad37c81a7c506c09cea90ff3cd4a15acacaaa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85cad37c81a7c506c09cea90ff3cd4a15acacaaa"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "0cbdf6d928e57f991806244000985d345ee636b0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c0bcacec2d602672e56efcd6575a629dd22a41d1", "patch": "@@ -1,5 +1,8 @@\n 2006-08-05  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c/27721\n+\t* c-typeck.c (build_modify_expr): Test earlier for non-lvalues.\n+\n \tPR c/28136\n \t* c-parser.c (c_parser_postfix_expression_after_paren_type): Robustify.\n "}, {"sha": "ff27c973094005f09d0f5eed1ec4896114257e42", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=c0bcacec2d602672e56efcd6575a629dd22a41d1", "patch": "@@ -3668,6 +3668,9 @@ build_modify_expr (tree lhs, enum tree_code modifycode, tree rhs)\n   if (TREE_CODE (lhs) == ERROR_MARK || TREE_CODE (rhs) == ERROR_MARK)\n     return error_mark_node;\n \n+  if (!lvalue_or_else (lhs, lv_assign))\n+    return error_mark_node;\n+\n   STRIP_TYPE_NOPS (rhs);\n \n   newrhs = rhs;\n@@ -3681,9 +3684,6 @@ build_modify_expr (tree lhs, enum tree_code modifycode, tree rhs)\n       newrhs = build_binary_op (modifycode, lhs, rhs, 1);\n     }\n \n-  if (!lvalue_or_else (lhs, lv_assign))\n-    return error_mark_node;\n-\n   /* Give an error for storing in something that is 'const'.  */\n \n   if (TREE_READONLY (lhs) || TYPE_READONLY (lhstype)"}, {"sha": "89f1d4a6e31d8cd8dc04babf233470eb17bf5cbd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c0bcacec2d602672e56efcd6575a629dd22a41d1", "patch": "@@ -1,5 +1,8 @@\n 2006-08-05  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c/27721\n+\t* gcc.dg/lvalue-4.c: New test.\n+\n \tPR c/28136\n \t* gcc.dg/init-bad-5.c: New test.\n "}, {"sha": "bc9290134185ee88daecbddc57053ba46df19ed1", "filename": "gcc/testsuite/gcc.dg/lvalue-4.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2Ftestsuite%2Fgcc.dg%2Flvalue-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0bcacec2d602672e56efcd6575a629dd22a41d1/gcc%2Ftestsuite%2Fgcc.dg%2Flvalue-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flvalue-4.c?ref=c0bcacec2d602672e56efcd6575a629dd22a41d1", "patch": "@@ -0,0 +1,8 @@\n+/* PR c/27721 */\n+/* { dg-do compile } */\n+\n+void foo()\n+{\n+  int i();\n+  i += 0;  /* { dg-error \"lvalue required\" } */\n+}"}]}