{"sha": "d0970db2ad7492604505bcc62e038fc79f9944cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDA5NzBkYjJhZDc0OTI2MDQ1MDViY2M2MmUwMzhmYzc5Zjk5NDRjYg==", "commit": {"author": {"name": "James E Wilson", "email": "wilson@specifixinc.com", "date": "2006-09-15T23:05:40Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2006-09-15T23:05:40Z"}, "message": "Short term fix for PR 28490.\n\n* config/ia64/ia64.c (ia64_legitimate_constant_p, cast CONST):\nHandle symbol offsets same as they are handled in ia64_expand_move\nand move_operand.\n\nFrom-SVN: r116983", "tree": {"sha": "22efdb82145d54b42c3dbfede63ff94adb73d28c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22efdb82145d54b42c3dbfede63ff94adb73d28c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0970db2ad7492604505bcc62e038fc79f9944cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0970db2ad7492604505bcc62e038fc79f9944cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0970db2ad7492604505bcc62e038fc79f9944cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0970db2ad7492604505bcc62e038fc79f9944cb/comments", "author": null, "committer": null, "parents": [{"sha": "7607bddac94682324231ca76f26d5a51dc2fdc78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7607bddac94682324231ca76f26d5a51dc2fdc78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7607bddac94682324231ca76f26d5a51dc2fdc78"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "148db8712dc8148e5b908697648c9c7a4924c53f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0970db2ad7492604505bcc62e038fc79f9944cb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0970db2ad7492604505bcc62e038fc79f9944cb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d0970db2ad7492604505bcc62e038fc79f9944cb", "patch": "@@ -1,3 +1,9 @@\n+2006-09-15  Jim Wilson  <wilson@specifix.com>\n+\n+\t* config/ia64/ia64.c (ia64_legitimate_constant_p, cast CONST):\n+\tHandle symbol offsets same as they are handled in ia64_expand_move\n+\tand move_operand.\n+\n 2006-09-16  Andreas Tobler  <a.tobler@schweiz.org>\n \n \t* loop-doloop.c (doloop_optimize): Change type of max_cost to int."}, {"sha": "71953e29570984ac68708e9e118da0dc61bb92aa", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 23, "deletions": 1, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0970db2ad7492604505bcc62e038fc79f9944cb/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0970db2ad7492604505bcc62e038fc79f9944cb/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=d0970db2ad7492604505bcc62e038fc79f9944cb", "patch": "@@ -815,7 +815,29 @@ ia64_legitimate_constant_p (rtx x)\n \n     case CONST:\n     case SYMBOL_REF:\n-      return tls_symbolic_operand_type (x) == 0;\n+      /* ??? Short term workaround for PR 28490.  We must make the code here\n+\t match the code in ia64_expand_move and move_operand, even though they\n+\t are both technically wrong.  */\n+      if (tls_symbolic_operand_type (x) == 0)\n+\t{\n+\t  HOST_WIDE_INT addend = 0;\n+\t  rtx op = x;\n+\n+\t  if (GET_CODE (op) == CONST\n+\t      && GET_CODE (XEXP (op, 0)) == PLUS\n+\t      && GET_CODE (XEXP (XEXP (op, 0), 1)) == CONST_INT)\n+\t    {\n+\t      addend = INTVAL (XEXP (XEXP (op, 0), 1));\n+\t      op = XEXP (XEXP (op, 0), 0);\n+\t    }\n+\n+\t  if (any_offset_symbol_operand (op, GET_MODE (op)))\n+\t    return true;\n+\t  if (aligned_offset_symbol_operand (op, GET_MODE (op)))\n+\t    return (addend & 0x3fff) == 0;\n+\t  return false;\n+\t}\n+      return false;\n \n     case CONST_VECTOR:\n       {"}]}