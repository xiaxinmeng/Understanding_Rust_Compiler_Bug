{"sha": "ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NiNGU4N2U4M2U5ZjFlMjFiYTljNzljZTIxZjJkMzFkY2YxNmE1MQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernd.schmidt@analog.com", "date": "2005-06-02T08:55:01Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2005-06-02T08:55:01Z"}, "message": "local-alloc.c (update_equiv_regs): When substituting sole definition into sole use of a reg...\n\n\t* local-alloc.c (update_equiv_regs): When substituting sole definition\n\tinto sole use of a reg, delete it from liveness information.\n\nFrom-SVN: r100483", "tree": {"sha": "08e0583372079c1101e18aa959b090017f5a7ca5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08e0583372079c1101e18aa959b090017f5a7ca5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51/comments", "author": null, "committer": null, "parents": [{"sha": "fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbd4ef4ccdf895dd2833feee248ad5c0d069f418"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "b33675159f4e4476c4c031d81fc5f4dbcc99a5a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51", "patch": "@@ -2,6 +2,8 @@\n \n \t* reload1.c (reload): Undo 2005-04-20 change.  Make sure we detect\n \tthe correct set of init_insns that need deletion.\n+\t* local-alloc.c (update_equiv_regs): When substituting sole definition\n+\tinto sole use of a reg, delete it from liveness information.\n \n 2005-06-02  Kaz Kojima  <kkojima@gcc.gnu.org>\n "}, {"sha": "017530830cb42b8ab0b36d1a3117534b062452bb", "filename": "gcc/local-alloc.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51/gcc%2Flocal-alloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51/gcc%2Flocal-alloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flocal-alloc.c?ref=ccb4e87e83e9f1e21ba9c79ce21f2d31dcf16a51", "patch": "@@ -991,7 +991,7 @@ update_equiv_regs (void)\n \n   /* Now scan all regs killed in an insn to see if any of them are\n      registers only used that once.  If so, see if we can replace the\n-     reference with the equivalent from.  If we can, delete the\n+     reference with the equivalent form.  If we can, delete the\n      initializing reference and this register will go away.  If we\n      can't replace the reference, and the initializing reference is\n      within the same loop (or in an inner loop), then move the register\n@@ -1077,6 +1077,11 @@ update_equiv_regs (void)\n \n \t\t      reg_equiv[regno].init_insns\n \t\t\t= XEXP (reg_equiv[regno].init_insns, 1);\n+\n+\t\t      /* Remember to clear REGNO from all basic block's live\n+\t\t\t info.  */\n+\t\t      SET_REGNO_REG_SET (&cleared_regs, regno);\n+\t\t      clear_regnos++;\n \t\t    }\n \t\t  /* Move the initialization of the register to just before\n \t\t     INSN.  Update the flow information.  */"}]}