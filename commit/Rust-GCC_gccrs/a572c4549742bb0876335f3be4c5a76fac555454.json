{"sha": "a572c4549742bb0876335f3be4c5a76fac555454", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTU3MmM0NTQ5NzQyYmIwODc2MzM1ZjNiZTRjNWE3NmZhYzU1NTQ1NA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2013-08-02T18:24:19Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-08-02T18:24:19Z"}, "message": "go-gcc.cc (immutable_struct_set_init): Always call resolve_unique_section.\n\n\t* go-gcc.cc (immutable_struct_set_init): Always call\n\tresolve_unique_section.\n\nFrom-SVN: r201446", "tree": {"sha": "11d47e6c0e0d1bb423cf9f9a28ee06378cf5492c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/11d47e6c0e0d1bb423cf9f9a28ee06378cf5492c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a572c4549742bb0876335f3be4c5a76fac555454", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a572c4549742bb0876335f3be4c5a76fac555454", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a572c4549742bb0876335f3be4c5a76fac555454", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a572c4549742bb0876335f3be4c5a76fac555454/comments", "author": null, "committer": null, "parents": [{"sha": "aa7e089fdc0e8095f6790ec53ccad0472573de79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa7e089fdc0e8095f6790ec53ccad0472573de79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa7e089fdc0e8095f6790ec53ccad0472573de79"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "f0317c4a473229485ad95a73c3b619a1404b8007", "filename": "gcc/go/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a572c4549742bb0876335f3be4c5a76fac555454/gcc%2Fgo%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a572c4549742bb0876335f3be4c5a76fac555454/gcc%2Fgo%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2FChangeLog?ref=a572c4549742bb0876335f3be4c5a76fac555454", "patch": "@@ -1,3 +1,8 @@\n+2013-08-02  Ian Lance Taylor  <iant@google.com>\n+\n+\t* go-gcc.cc (immutable_struct_set_init): Always call\n+\tresolve_unique_section.\n+\n 2013-07-24  Ian Lance Taylor  <iant@google.com>\n \n \t* go-gcc.cc (Gcc_backend::non_zero_size_type): If a struct has a"}, {"sha": "50dbb3128f1d6c9f5bb67ce6b84cb116700462cb", "filename": "gcc/go/go-gcc.cc", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a572c4549742bb0876335f3be4c5a76fac555454/gcc%2Fgo%2Fgo-gcc.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a572c4549742bb0876335f3be4c5a76fac555454/gcc%2Fgo%2Fgo-gcc.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgo-gcc.cc?ref=a572c4549742bb0876335f3be4c5a76fac555454", "patch": "@@ -1521,10 +1521,11 @@ Gcc_backend::immutable_struct_set_init(Bvariable* var, const std::string&,\n \tTREE_PUBLIC(decl) = 1;\n     }\n   else\n-    {\n-      make_decl_one_only(decl, DECL_ASSEMBLER_NAME(decl));\n-      resolve_unique_section(decl, 1, 0);\n-    }\n+    make_decl_one_only(decl, DECL_ASSEMBLER_NAME(decl));\n+\n+  // These variables are often unneeded in the final program, so put\n+  // them in their own section so that linker GC can discard them.\n+  resolve_unique_section(decl, 1, 1);\n \n   rest_of_decl_compilation(decl, 1, 0);\n }"}]}