{"sha": "ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY2MDUxYjc2ZTVmMDMxYTZiZmMwYzFmMjVhNTEwMzRkZjFlNDkwMg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@redhat.com", "date": "2001-11-09T23:06:04Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2001-11-09T23:06:04Z"}, "message": "flow.c (insn_dead_p): Allow for AUTO_INC notes all the time.\n\n\t* flow.c (insn_dead_p): Allow for AUTO_INC notes all the time.\n\nIn testsuite/:\n\n\t* gcc.c-torture/execute/20011109-2.c: New test.\n\nFrom-SVN: r46901", "tree": {"sha": "1c401918c7bcbdded039a4ef338ec2822a5c81af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c401918c7bcbdded039a4ef338ec2822a5c81af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/comments", "author": null, "committer": null, "parents": [{"sha": "322fe6e185b1a4470827b5ffbbda9fb1ecf0ea4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/322fe6e185b1a4470827b5ffbbda9fb1ecf0ea4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/322fe6e185b1a4470827b5ffbbda9fb1ecf0ea4b"}], "stats": {"total": 37, "additions": 24, "deletions": 13}, "files": [{"sha": "8e7d9e7d1649823a93386333d7785763d464c412", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "patch": "@@ -1,5 +1,7 @@\n 2001-11-09  Geoffrey Keating  <geoffk@redhat.com>\n \n+\t* flow.c (insn_dead_p): Allow for AUTO_INC notes all the time.\n+\n \t* config/stormy16/stormy16.h (ASM_SPEC): Revert last change,\n \tdon't pass --gdwarf2 to the assembler if the compiler will also\n \tprovide debug info."}, {"sha": "fbe570bbf4ce252a91b79d4b1fad04ae1c1134cf", "filename": "gcc/flow.c", "status": "modified", "additions": 10, "deletions": 13, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "patch": "@@ -1892,21 +1892,18 @@ insn_dead_p (pbi, x, call_ok, notes)\n   enum rtx_code code = GET_CODE (x);\n \n #ifdef AUTO_INC_DEC\n-  /* If flow is invoked after reload, we must take existing AUTO_INC\n-     expresions into account.  */\n-  if (reload_completed)\n+  /* As flow is invoked after combine, we must take existing AUTO_INC\n+     expressions into account.  */\n+  for (; notes; notes = XEXP (notes, 1))\n     {\n-      for (; notes; notes = XEXP (notes, 1))\n+      if (REG_NOTE_KIND (notes) == REG_INC)\n \t{\n-\t  if (REG_NOTE_KIND (notes) == REG_INC)\n-\t    {\n-\t      int regno = REGNO (XEXP (notes, 0));\n-\n-\t      /* Don't delete insns to set global regs.  */\n-\t      if ((regno < FIRST_PSEUDO_REGISTER && global_regs[regno])\n-\t\t  || REGNO_REG_SET_P (pbi->reg_live, regno))\n-\t\treturn 0;\n-\t    }\n+\t  int regno = REGNO (XEXP (notes, 0));\n+\t  \n+\t  /* Don't delete insns to set global regs.  */\n+\t  if ((regno < FIRST_PSEUDO_REGISTER && global_regs[regno])\n+\t      || REGNO_REG_SET_P (pbi->reg_live, regno))\n+\t    return 0;\n \t}\n     }\n #endif"}, {"sha": "7fa8c9ef43ee914e6202df7e9bdcdcf3203bccd3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "patch": "@@ -1,5 +1,7 @@\n 2001-11-09  Geoffrey Keating  <geoffk@redhat.com>\n \n+\t* gcc.c-torture/execute/20011109-2.c: New test.\n+\n \t* gcc.c-torture/execute/20011109-1.c: New test.\n \n 2001-11-09  Jakub Jelinek  <jakub@redhat.com>"}, {"sha": "1abbbf2f6dadeda681f6eb79a9712e1303f04d33", "filename": "gcc/testsuite/gcc.c-torture/execute/20011109-2.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20011109-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6051b76e5f031a6bfc0c1f25a51034df1e4902/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20011109-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20011109-2.c?ref=ff6051b76e5f031a6bfc0c1f25a51034df1e4902", "patch": "@@ -0,0 +1,10 @@\n+int main(void)\n+{\n+  char *c1 = \"foo\";\n+  char *c2 = \"foo\";\n+  int i;\n+  for (i = 0; i < 3; i++)\n+    if (c1[i] != c2[i])\n+      abort ();\n+  exit (0);\n+}"}]}