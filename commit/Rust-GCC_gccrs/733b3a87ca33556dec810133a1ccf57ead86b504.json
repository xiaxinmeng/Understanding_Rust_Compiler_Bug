{"sha": "733b3a87ca33556dec810133a1ccf57ead86b504", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzMzYjNhODdjYTMzNTU2ZGVjODEwMTMzYTFjY2Y1N2VhZDg2YjUwNA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1998-11-12T11:43:19Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1998-11-12T11:43:19Z"}, "message": "jcf-io.c (find_class): Added explanatory comment.\n\n\t* jcf-io.c (find_class): Added explanatory comment.\n\t* jcf-path.c (add_entry): Look for `.zip' at end of filename.  Add\n\ttrailing slash to `.zip' entries.\n\nFrom-SVN: r23615", "tree": {"sha": "d52233da6156ebaa9797083f8e59e615bba76a63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d52233da6156ebaa9797083f8e59e615bba76a63"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/733b3a87ca33556dec810133a1ccf57ead86b504", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/733b3a87ca33556dec810133a1ccf57ead86b504", "html_url": "https://github.com/Rust-GCC/gccrs/commit/733b3a87ca33556dec810133a1ccf57ead86b504", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/733b3a87ca33556dec810133a1ccf57ead86b504/comments", "author": null, "committer": null, "parents": [{"sha": "dfded5c3ba94beb16fc5ecc5baeb978972d7c7fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfded5c3ba94beb16fc5ecc5baeb978972d7c7fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfded5c3ba94beb16fc5ecc5baeb978972d7c7fb"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "e7e48b6db7871d9ff08d847885956153067984d4", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/733b3a87ca33556dec810133a1ccf57ead86b504/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/733b3a87ca33556dec810133a1ccf57ead86b504/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=733b3a87ca33556dec810133a1ccf57ead86b504", "patch": "@@ -1,5 +1,10 @@\n 1998-11-12  Tom Tromey  <tromey@cygnus.com>\n \n+\t* jcf-io.c (find_class): Added explanatory comment.\n+\n+\t* jcf-path.c (add_entry): Look for `.zip' at end of filename.  Add\n+\ttrailing slash to `.zip' entries.\n+\n \t* jvspec.c (lang_specific_driver): Correctly handle case where\n \tGC_NAME not defined.\n "}, {"sha": "c1c5b7aa783b0cb7ab9aa85643cc709dccdf5bf1", "filename": "gcc/java/jcf-io.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/733b3a87ca33556dec810133a1ccf57ead86b504/gcc%2Fjava%2Fjcf-io.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/733b3a87ca33556dec810133a1ccf57ead86b504/gcc%2Fjava%2Fjcf-io.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-io.c?ref=733b3a87ca33556dec810133a1ccf57ead86b504", "patch": "@@ -282,6 +282,8 @@ DEFUN(find_class, (classname, classname_length, jcf, do_class_file),\n       strcpy (buffer, jcf_path_name (entry));\n       i = strlen (buffer);\n \n+      /* This is right because we know that `.zip' entries will have a\n+\t trailing slash.  See jcf-path.c.  */\n       dir_len = i - 1;\n \n       for (k = 0; k < classname_length; k++, i++)"}, {"sha": "159b09f9f71f110330a58a1b1cf1049392078b98", "filename": "gcc/java/jcf-path.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/733b3a87ca33556dec810133a1ccf57ead86b504/gcc%2Fjava%2Fjcf-path.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/733b3a87ca33556dec810133a1ccf57ead86b504/gcc%2Fjava%2Fjcf-path.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-path.c?ref=733b3a87ca33556dec810133a1ccf57ead86b504", "patch": "@@ -141,7 +141,7 @@ add_entry (entp, filename, is_system)\n   n->next = NULL;\n \n   len = strlen (filename);\n-  if (len > 4 && ! strcmp (filename - 4, \".zip\"))\n+  if (len > 4 && ! strcmp (filename + len - 4, \".zip\"))\n     {\n       n->flags |= FLAG_ZIP;\n       /* If the user uses -classpath then he'll have to include\n@@ -152,9 +152,10 @@ add_entry (entp, filename, is_system)\n \tn->flags |= FLAG_SYSTEM;\n     }\n \n-  if (! (n->flags & FLAG_ZIP)\n-      && filename[len - 1] != '/'\n-      && filename[len - 1] != DIR_SEPARATOR)\n+  /* Note that we add a trailing separator to `.zip' names as well.\n+     This is a little hack that lets the searching code in jcf-io.c\n+     work more easily.  Eww.  */\n+  if (filename[len - 1] != '/' && filename[len - 1] != DIR_SEPARATOR)\n     {\n       char *f2 = (char *) alloca (len + 1);\n       strcpy (f2, filename);"}]}