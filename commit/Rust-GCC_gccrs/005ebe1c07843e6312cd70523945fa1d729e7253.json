{"sha": "005ebe1c07843e6312cd70523945fa1d729e7253", "node_id": "C_kwDOANBUbNoAKDAwNWViZTFjMDc4NDNlNjMxMmNkNzA1MjM5NDVmYTFkNzI5ZTcyNTM", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2021-10-16T02:30:55Z"}, "committer": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2021-10-21T08:18:58Z"}, "message": "Add dump prints when execute_fixup_cfg removes a write only var store.\n\nWhile debugging PR 102703, I found it was hard to figure out where\nthe store was being removed as there was no pass which was outputting\nwhy the store was removed.\nThis adds to execute_fixup_cfg the output.\nAlso note most of removals happen when execute_fixup_cfg is called\nfrom the inliner.\n\ngcc/ChangeLog:\n\n\t* tree-cfg.c (execute_fixup_cfg): Output when the statement\n\tis removed when it is a write only var.", "tree": {"sha": "8bceccfbc88eebf3dd740d8bd63d34078a824160", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bceccfbc88eebf3dd740d8bd63d34078a824160"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/005ebe1c07843e6312cd70523945fa1d729e7253", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/005ebe1c07843e6312cd70523945fa1d729e7253", "html_url": "https://github.com/Rust-GCC/gccrs/commit/005ebe1c07843e6312cd70523945fa1d729e7253", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/005ebe1c07843e6312cd70523945fa1d729e7253/comments", "author": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "committer": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70e72c3a11315fb6a228b7f58d027c2e1fbb9940", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70e72c3a11315fb6a228b7f58d027c2e1fbb9940", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70e72c3a11315fb6a228b7f58d027c2e1fbb9940"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "b78e4564e4d1342d282bad0279f59d12df3376c6", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005ebe1c07843e6312cd70523945fa1d729e7253/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005ebe1c07843e6312cd70523945fa1d729e7253/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=005ebe1c07843e6312cd70523945fa1d729e7253", "patch": "@@ -9737,6 +9737,13 @@ execute_fixup_cfg (void)\n \t\t  && (TREE_STATIC (lhs) || DECL_EXTERNAL (lhs))\n \t\t  && varpool_node::get (lhs)->writeonly)\n \t\t{\n+\t\t  if (dump_file && (dump_flags & TDF_DETAILS))\n+\t\t    {\n+\t\t      fprintf (dump_file, \"Removing statement, writes\"\n+\t\t               \" to write only var:\\n\");\n+\t\t      print_gimple_stmt (dump_file, stmt, 0,\n+\t\t\t\t\t TDF_VOPS|TDF_MEMSYMS);\n+\t\t    }\n \t\t  unlink_stmt_vdef (stmt);\n \t\t  gsi_remove (&gsi, true);\n \t\t  release_defs (stmt);"}]}