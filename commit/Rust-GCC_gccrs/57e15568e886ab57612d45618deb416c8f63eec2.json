{"sha": "57e15568e886ab57612d45618deb416c8f63eec2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTdlMTU1NjhlODg2YWI1NzYxMmQ0NTYxOGRlYjQxNmM4ZjYzZWVjMg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2010-07-28T08:44:29Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2010-07-28T08:44:29Z"}, "message": "re PR fortran/45077 (ICE with -fwhole-file in fold_convert_loc, at fold-const.c:2021)\n\n2010-07-28  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/45077\n        * trans-types.c (gfc_get_derived_type): Fix DT declaration\n        from modules for whole-file mode.\n\n2010-07-28  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/45077\n        * gfortran.dg/whole_file_24.f90: New.\n\nFrom-SVN: r162619", "tree": {"sha": "f9566bf437c85c13c282f43e0684b3744d59c095", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f9566bf437c85c13c282f43e0684b3744d59c095"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57e15568e886ab57612d45618deb416c8f63eec2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57e15568e886ab57612d45618deb416c8f63eec2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57e15568e886ab57612d45618deb416c8f63eec2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57e15568e886ab57612d45618deb416c8f63eec2/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b4351367ce259b2ce74ba16a7c2437641a7d8d2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4351367ce259b2ce74ba16a7c2437641a7d8d2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4351367ce259b2ce74ba16a7c2437641a7d8d2a"}], "stats": {"total": 50, "additions": 49, "deletions": 1}, "files": [{"sha": "e0b737402341e8f2660f1b6950a48058469c4375", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=57e15568e886ab57612d45618deb416c8f63eec2", "patch": "@@ -1,3 +1,9 @@\n+2010-07-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/45077\n+\t* trans-types.c (gfc_get_derived_type): Fix DT declaration\n+\tfrom modules for whole-file mode.\n+\n 2010-07-27  Joseph Myers  <joseph@codesourcery.com>\n \n \t* gfortran.h (gfc_handle_option): Update prototype and return"}, {"sha": "b532788365a91bd6846e203434df87ebcb39dc72", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=57e15568e886ab57612d45618deb416c8f63eec2", "patch": "@@ -1994,8 +1994,10 @@ gfc_get_derived_type (gfc_symbol * derived)\n \t  gfc_symbol *s;\n \t  s = NULL;\n \t  gfc_find_symbol (derived->name, gsym->ns, 0, &s);\n-\t  if (s && s->backend_decl)\n+\t  if (s)\n \t    {\n+\t      if (!s->backend_decl)\n+\t\ts->backend_decl = gfc_get_derived_type (s);\n \t      gfc_copy_dt_decls_ifequal (s, derived, true);\n \t      goto copy_derived_types;\n \t    }"}, {"sha": "57b6a296927364daf47bf65a40d632d7a1c38d4a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=57e15568e886ab57612d45618deb416c8f63eec2", "patch": "@@ -1,3 +1,8 @@\n+2010-07-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/45077\n+\t* gfortran.dg/whole_file_24.f90: New.\n+\n 2010-07-27  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/variadic102.C: New."}, {"sha": "4ac11cce2fd3f9a628e3fd91f41f73bffb593fe8", "filename": "gcc/testsuite/gfortran.dg/whole_file_24.f90", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_24.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57e15568e886ab57612d45618deb416c8f63eec2/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_24.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_24.f90?ref=57e15568e886ab57612d45618deb416c8f63eec2", "patch": "@@ -0,0 +1,35 @@\n+! { dg-do compile }\n+!\n+! PR fortran/45077\n+!\n+! Contributed by Dominique d'Humieres, based on a test\n+! case of Juergen Reuter.\n+!\n+\n+module iso_red\n+  type, public :: varying_string\n+     character(LEN=1), dimension(:), allocatable :: chars\n+  end type varying_string\n+end module iso_red\n+\n+module ifiles\n+  use iso_red, string_t => varying_string\n+contains\n+  function line_get_string_advance (line) result (string)\n+    type(string_t) :: string\n+    character :: line\n+  end function line_get_string_advance\n+end module ifiles\n+\n+module syntax_rules\n+  use iso_red, string_t => varying_string\n+  use ifiles, only: line_get_string_advance\n+contains\n+  subroutine syntax_init_from_ifile ()\n+    type(string_t) :: string\n+       string = line_get_string_advance (\"\")\n+  end subroutine syntax_init_from_ifile\n+end module syntax_rules\n+end\n+\n+! { dg-final { cleanup-modules \"iso_red ifiles syntax_rules\" } }"}]}