{"sha": "8353dd9a26485ad8cdc603d98efd8e711f7d2154", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM1M2RkOWEyNjQ4NWFkOGNkYzYwM2Q5OGVmZDhlNzExZjdkMjE1NA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2009-07-14T18:16:03Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2009-07-14T18:16:03Z"}, "message": "re PR c++/37276 (Trouble with some (C99?) math builtins and namespace std)\n\n\tPR c++/37276\n\t* decl.c (decls_match): A non-extern-C declaration doesn't match\n\ta builtin extern-C declaration.\n\nFrom-SVN: r149638", "tree": {"sha": "0b8b5bc66f8f98728e58252f4589aa8898afd0df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b8b5bc66f8f98728e58252f4589aa8898afd0df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8353dd9a26485ad8cdc603d98efd8e711f7d2154", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8353dd9a26485ad8cdc603d98efd8e711f7d2154", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8353dd9a26485ad8cdc603d98efd8e711f7d2154", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8353dd9a26485ad8cdc603d98efd8e711f7d2154/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3deeb3ff03b0df2812a00d6713d4d026f0f2ea7e"}], "stats": {"total": 45, "additions": 41, "deletions": 4}, "files": [{"sha": "31970570601c5647aa84692ee328d091506cf3e1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8353dd9a26485ad8cdc603d98efd8e711f7d2154", "patch": "@@ -1,5 +1,9 @@\n 2009-07-14  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/37276\n+\t* decl.c (decls_match): A non-extern-C declaration doesn't match\n+\ta builtin extern-C declaration.\n+\n \tPR c++/40746\n \t* name-lookup.c (qualified_lookup_using_namespace): Don't stop\n \tlooking in used namespaces just because we found something on\n@@ -8,8 +12,6 @@\n \tPR c++/40740\n \t* semantics.c (perform_koenig_lookup): Handle empty template args.\n \n-2009-07-13  Jason Merrill  <jason@redhat.com>\n-\n \t* call.c (build_over_call): Use can_trust_pointer_alignment.\n \n 2009-07-14  Dodji Seketeli  <dodji@redhat.com>"}, {"sha": "e1b6678ea2d037f8ddcf3f207b8b7803a98645f8", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=8353dd9a26485ad8cdc603d98efd8e711f7d2154", "patch": "@@ -932,6 +932,14 @@ decls_match (tree newdecl, tree olddecl)\n \t\t&& DECL_EXTERN_C_P (olddecl)))\n \treturn 0;\n \n+#ifdef NO_IMPLICIT_EXTERN_C\n+      /* A new declaration doesn't match a built-in one unless it\n+\t is also extern \"C\".  */\n+      if (DECL_BUILT_IN (olddecl)\n+\t  && DECL_EXTERN_C_P (olddecl) && !DECL_EXTERN_C_P (newdecl))\n+\treturn 0;\n+#endif\n+\n       if (TREE_CODE (f1) != TREE_CODE (f2))\n \treturn 0;\n "}, {"sha": "75cd8c0632deb0954ad7b9b12b72e4f79f7b641c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8353dd9a26485ad8cdc603d98efd8e711f7d2154", "patch": "@@ -1,5 +1,11 @@\n 2009-07-14  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/37276\n+\t* g++.dg/lookup/builtin5.C: New.\n+\t* g++.dg/other/error22.C: Add missing extern \"C\".\n+\t* g++.dg/warn/Warray-bounds.C: Likewise.\n+\t* gcc.dg/compat/compat-common.h: Likewise.\n+\n \tPR c++/40746\n \t* g++.dg/lookup/using20.C: New.\n "}, {"sha": "1bd67dce5ac608db67253d33e3d66177659162dd", "filename": "gcc/testsuite/g++.dg/lookup/builtin5.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fbuiltin5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fbuiltin5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fbuiltin5.C?ref=8353dd9a26485ad8cdc603d98efd8e711f7d2154", "patch": "@@ -0,0 +1,16 @@\n+// PR c++/37276\n+\n+// { dg-final { scan-assembler \"_ZSt5atanhd\" } }\n+\n+namespace std\n+{\n+  inline double\n+  atanh(double __x)\n+  { return __builtin_atanh(__x); }\n+}\n+\n+int main()\n+{\n+  std::atanh(.3);\n+  return 0;\n+}"}, {"sha": "225dcae8214d9527238b2ad7922e538d03b48b46", "filename": "gcc/testsuite/g++.dg/other/error22.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Ferror22.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Ferror22.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Ferror22.C?ref=8353dd9a26485ad8cdc603d98efd8e711f7d2154", "patch": "@@ -1,7 +1,7 @@\n // PR c++/34394\n // { dg-do compile }\n \n-extern double fabs (double);\n+extern \"C\" double fabs (double);\n \n void foo (double x)\n {"}, {"sha": "61c7c5d8e32ea91c4dc97555d53cbbbc31dadf07", "filename": "gcc/testsuite/g++.dg/warn/Warray-bounds.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWarray-bounds.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWarray-bounds.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWarray-bounds.C?ref=8353dd9a26485ad8cdc603d98efd8e711f7d2154", "patch": "@@ -3,8 +3,9 @@\n \n int a[10];\n \n+extern \"C\" __SIZE_TYPE__ strlen(const char *s);\n+\n static inline int n(void) {\n-    __SIZE_TYPE__ strlen(const char *s);\n     return strlen(\"12345\");\n }\n "}, {"sha": "8a92ea3e606a8e975e3240b4b3744a7d798046b9", "filename": "gcc/testsuite/gcc.dg/compat/compat-common.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fcompat-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8353dd9a26485ad8cdc603d98efd8e711f7d2154/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fcompat-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fcompat-common.h?ref=8353dd9a26485ad8cdc603d98efd8e711f7d2154", "patch": "@@ -47,5 +47,9 @@\n #endif\n #endif\n \n+#ifdef __cplusplus\n+extern \"C\" void abort (void);\n+#else\n extern void abort (void);\n+#endif\n extern int fails;"}]}