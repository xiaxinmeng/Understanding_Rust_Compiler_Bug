{"sha": "96f629573dc5831580c97141a9ac37a624f71b9a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZmNjI5NTczZGM1ODMxNTgwYzk3MTQxYTlhYzM3YTYyNGY3MWI5YQ==", "commit": {"author": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-09-02T19:32:57Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-09-02T19:32:57Z"}, "message": "decl2.c (determine_visibility): Only check data visibility for VAR_DECLS.\n\n\t* decl2.c (determine_visibility): Only check data visibility\n\tfor VAR_DECLS.\n\n[[Split portion of a mixed commit.]]\n\nFrom-SVN: r86983.2", "tree": {"sha": "606a429b08da4e9c0707c5913f9980a5f87f5c62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/606a429b08da4e9c0707c5913f9980a5f87f5c62"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96f629573dc5831580c97141a9ac37a624f71b9a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96f629573dc5831580c97141a9ac37a624f71b9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96f629573dc5831580c97141a9ac37a624f71b9a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96f629573dc5831580c97141a9ac37a624f71b9a/comments", "author": null, "committer": null, "parents": [{"sha": "6cbc6f0db154b001895740d108b56558fe4761b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cbc6f0db154b001895740d108b56558fe4761b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cbc6f0db154b001895740d108b56558fe4761b9"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "14dac8258970726459df86e83155395a59c8cde0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96f629573dc5831580c97141a9ac37a624f71b9a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96f629573dc5831580c97141a9ac37a624f71b9a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=96f629573dc5831580c97141a9ac37a624f71b9a", "patch": "@@ -1,11 +1,16 @@\n+2004-09-02  Paul Brook  <paul@codesourcery.com>\n+\n+\t* decl2.c (determine_visibility): Only check data visibility\n+\tfor VAR_DECLS.\n+\n 2004-08-31  Mark Mitchell  <mark@codesourcery.com>\n \n \t* cp-tree.h (DECL_CONSTRUCTION_VTABLE_P): New macro.\n \t* class.c (build_ctor_vtbl_group): Set DECL_CONSTRUCTION_VTABLE_P.\n \t* decl2.c (determine_visibility): Honor \n \tTARGET_CXX_EXPORT_CLASS_DATA.\n \n- \t* class.c (key_method): Rename to ...\n+\t* class.c (key_method): Rename to ...\n \t(determine_key_method): ... this.\n \t(finish_struct_1): Adjust accordingly.\n \t* cp-tree.h (key_method): Declare."}, {"sha": "03c468dfd42c8c9d15469fe83806ced3c8950bc1", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96f629573dc5831580c97141a9ac37a624f71b9a/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96f629573dc5831580c97141a9ac37a624f71b9a/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=96f629573dc5831580c97141a9ac37a624f71b9a", "patch": "@@ -1655,7 +1655,8 @@ determine_visibility (tree decl)\n      the visibility of their containing class.  */\n   if (class_type)\n     {\n-      if (targetm.cxx.export_class_data ()\n+      if (TREE_CODE (decl) == VAR_DECL\n+\t  && targetm.cxx.export_class_data ()\n \t  && (DECL_TINFO_P (decl)\n \t      || (DECL_VTABLE_OR_VTT_P (decl)\n \t\t  /* Construction virtual tables are not emitted"}]}