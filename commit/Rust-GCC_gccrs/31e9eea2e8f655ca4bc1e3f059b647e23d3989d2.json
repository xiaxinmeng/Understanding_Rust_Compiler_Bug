{"sha": "31e9eea2e8f655ca4bc1e3f059b647e23d3989d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFlOWVlYTJlOGY2NTVjYTRiYzFlM2YwNTliNjQ3ZTIzZDM5ODlkMg==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2004-07-07T22:19:43Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2004-07-07T22:19:43Z"}, "message": "tree-cfg (group_case_labels): Remove case labels that have the same target as the default case.\n\n\t* tree-cfg (group_case_labels): Remove case labels that have the\n\tsame target as the default case.\n\nFrom-SVN: r84239", "tree": {"sha": "cebb5009c240f7327074a7762f98f51e661237a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cebb5009c240f7327074a7762f98f51e661237a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2/comments", "author": null, "committer": null, "parents": [{"sha": "192c02b69c084244eea2c80e3245b72c580bd8c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/192c02b69c084244eea2c80e3245b72c580bd8c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/192c02b69c084244eea2c80e3245b72c580bd8c1"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "6031eee93985bd75f30025c5f7d26bbd8506b488", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=31e9eea2e8f655ca4bc1e3f059b647e23d3989d2", "patch": "@@ -1,3 +1,8 @@\n+2004-07-07  Steven Bosscher  <stevenb@suse.de>\n+\n+\t* tree-cfg.c (group_case_labels): Remove case labels that have\n+\tthe same target as the default case.\n+\n 2004-07-07  Steven Bosscher  <stevenb@suse.de>\n \n \t* tree-inline.c (optimize_inline_calls): Set DECL_INLINED_FNS"}, {"sha": "8600a99e4125468b3071ad80c480781de718477d", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31e9eea2e8f655ca4bc1e3f059b647e23d3989d2/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=31e9eea2e8f655ca4bc1e3f059b647e23d3989d2", "patch": "@@ -937,6 +937,7 @@ group_case_labels (void)\n \t  tree labels = SWITCH_LABELS (stmt);\n \t  int old_size = TREE_VEC_LENGTH (labels);\n \t  int i, j, new_size = old_size;\n+\t  tree default_label = TREE_VEC_ELT (labels, old_size - 1);\n \n \t  /* Look for possible opportunities to merge cases.\n \t     Ignore the last element of the label vector because it\n@@ -950,8 +951,18 @@ group_case_labels (void)\n \t      if (! base_case)\n \t\tabort ();\n \n-\t      type = TREE_TYPE (CASE_LOW (base_case));\n \t      base_label = CASE_LABEL (base_case);\n+\n+\t      /* Discard cases that have the same destination as the\n+\t\t default case.  */\n+\t      if (base_label == default_label)\n+\t\t{\n+\t\t  TREE_VEC_ELT (labels, i) = NULL_TREE;\n+\t\t  i++;\n+\t\t  continue;\n+\t\t}\n+\n+\t      type = TREE_TYPE (CASE_LOW (base_case));\n \t      base_high = CASE_HIGH (base_case) ?\n \t\tCASE_HIGH (base_case) : CASE_LOW (base_case);\n "}]}