{"sha": "1ac12fa2a746eb6b004b604544d6da215770919c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWFjMTJmYTJhNzQ2ZWI2YjAwNGI2MDQ1NDRkNmRhMjE1NzcwOTE5Yw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-01-03T21:01:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-01-03T21:01:14Z"}, "message": "re PR tree-optimization/47155 (ccp caused miscompilation)\n\n\tPR tree-optimization/47155\n\t* tree-ssa-ccp.c (bit_value_binop_1): Use r1type instead of type\n\twhen computing uns.\n\n\t* gcc.c-torture/execute/pr47155.c: New test.\n\nFrom-SVN: r168440", "tree": {"sha": "1af17073eafbd986218e00720fb3527786e46d23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1af17073eafbd986218e00720fb3527786e46d23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ac12fa2a746eb6b004b604544d6da215770919c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ac12fa2a746eb6b004b604544d6da215770919c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ac12fa2a746eb6b004b604544d6da215770919c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ac12fa2a746eb6b004b604544d6da215770919c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9766135bb18d75cd0d5257d21de485e953e3505e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9766135bb18d75cd0d5257d21de485e953e3505e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9766135bb18d75cd0d5257d21de485e953e3505e"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "20e8a8e8633ae34f3029ccb8d277e0e5e1d70b62", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1ac12fa2a746eb6b004b604544d6da215770919c", "patch": "@@ -1,5 +1,9 @@\n 2011-01-03  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/47155\n+\t* tree-ssa-ccp.c (bit_value_binop_1): Use r1type instead of type\n+\twhen computing uns.\n+\n \tPR rtl-optimization/47157\n \t* combine.c (try_combine): If undobuf.other_insn becomes\n \t(set (pc) (pc)) jump, call update_cfg_for_uncondjump on it"}, {"sha": "40223f88b0f4a22c24d7af011aa79b93769fa859", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1ac12fa2a746eb6b004b604544d6da215770919c", "patch": "@@ -1,5 +1,8 @@\n 2011-01-03  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/47155\n+\t* gcc.c-torture/execute/pr47155.c: New test.\n+\n \tPR rtl-optimization/47157\n \t* gcc.c-torture/compile/pr47157.c: New test.\n "}, {"sha": "6210a2feef18fe6e181f41d9d2455caefa87aa72", "filename": "gcc/testsuite/gcc.c-torture/execute/pr47155.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr47155.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr47155.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr47155.c?ref=1ac12fa2a746eb6b004b604544d6da215770919c", "patch": "@@ -0,0 +1,14 @@\n+/* PR tree-optimization/47155 */\n+\n+unsigned int a;\n+static signed char b = -127;\n+int c = 1;\n+\n+int\n+main (void)\n+{\n+  a = b <= (unsigned char) (-6 * c);\n+  if (!a)\n+    __builtin_abort ();\n+  return 0;\n+}"}, {"sha": "b2494d72476ddb7a90be0f472f3e61521b2e10b6", "filename": "gcc/tree-ssa-ccp.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2Ftree-ssa-ccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ac12fa2a746eb6b004b604544d6da215770919c/gcc%2Ftree-ssa-ccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-ccp.c?ref=1ac12fa2a746eb6b004b604544d6da215770919c", "patch": "@@ -1764,8 +1764,8 @@ bit_value_binop_1 (enum tree_code code, tree type,\n \t\t   tree r1type, double_int r1val, double_int r1mask,\n \t\t   tree r2type, double_int r2val, double_int r2mask)\n {\n-  bool uns = (TREE_CODE (type) == INTEGER_TYPE\n-\t      && TYPE_IS_SIZETYPE (type) ? 0 : TYPE_UNSIGNED (type));\n+  bool uns = (TREE_CODE (r1type) == INTEGER_TYPE\n+\t      && TYPE_IS_SIZETYPE (r1type) ? 0 : TYPE_UNSIGNED (r1type));\n   /* Assume we'll get a constant result.  Use an initial varying value,\n      we fall back to varying in the end if necessary.  */\n   *mask = double_int_minus_one;"}]}