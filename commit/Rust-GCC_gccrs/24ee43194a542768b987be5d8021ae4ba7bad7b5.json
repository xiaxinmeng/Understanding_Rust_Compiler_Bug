{"sha": "24ee43194a542768b987be5d8021ae4ba7bad7b5", "node_id": "C_kwDOANBUbNoAKDI0ZWU0MzE5NGE1NDI3NjhiOTg3YmU1ZDgwMjFhZTRiYTdiYWQ3YjU", "commit": {"author": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2022-03-20T11:10:45Z"}, "committer": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2022-03-22T13:40:04Z"}, "message": "[nvptx] Use '%' as register prefix\n\nThe percentage sign as first character of a ptx identifier can be used to\navoid name conflicts, e.g., between user-defined variable names and\ncompiler-generated names.\n\nThe insn nvptx_uniform_warp_check contains register names without '%' prefix,\nwhich potentially could lead to name conflicts with user-defined variable\nnames.\n\nFix this by adding a '%' prefix, more specifically a '%r_' prefix to avoid a\nname conflict with ptx special registers.\n\nTested on x86_64 with nvptx accelerator.\n\ngcc/ChangeLog:\n\n2022-03-20  Tom de Vries  <tdevries@suse.de>\n\n\tPR target/104925\n\t* config/nvptx/nvptx.md (define_insn \"nvptx_uniform_warp_check\"):\n\tUse % as register prefix.", "tree": {"sha": "cf83687b1d2def562c811fba90ea354a4b18eeb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf83687b1d2def562c811fba90ea354a4b18eeb6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/24ee43194a542768b987be5d8021ae4ba7bad7b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24ee43194a542768b987be5d8021ae4ba7bad7b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24ee43194a542768b987be5d8021ae4ba7bad7b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24ee43194a542768b987be5d8021ae4ba7bad7b5/comments", "author": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b57358cc71356c817500042f7d517ac3309195b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b57358cc71356c817500042f7d517ac3309195b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b57358cc71356c817500042f7d517ac3309195b1"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "8ed685027b5f9d579e5ca8d5269fd2bc4009c017", "filename": "gcc/config/nvptx/nvptx.md", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/24ee43194a542768b987be5d8021ae4ba7bad7b5/gcc%2Fconfig%2Fnvptx%2Fnvptx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/24ee43194a542768b987be5d8021ae4ba7bad7b5/gcc%2Fconfig%2Fnvptx%2Fnvptx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.md?ref=24ee43194a542768b987be5d8021ae4ba7bad7b5", "patch": "@@ -2280,13 +2280,14 @@\n   {\n     const char *insns[] = {\n       \"{\",\n-      \"\\\\t\"\t      \".reg.b32\"\t\"\\\\t\" \"act;\",\n-      \"%.\\\\t\"\t      \"vote.ballot.b32\" \"\\\\t\" \"act,1;\",\n-      \"\\\\t\"\t      \".reg.pred\"\t\"\\\\t\" \"do_abort;\",\n-      \"\\\\t\"\t      \"mov.pred\"\t\"\\\\t\" \"do_abort,0;\",\n-      \"%.\\\\t\"\t      \"setp.ne.b32\"\t\"\\\\t\" \"do_abort,act,0xffffffff;\",\n-      \"@ do_abort\\\\t\" \"trap;\",\n-      \"@ do_abort\\\\t\" \"exit;\",\n+      \"\\\\t\"\t\t  \".reg.b32\"\t    \"\\\\t\" \"%%r_act;\",\n+      \"%.\\\\t\"\t\t  \"vote.ballot.b32\" \"\\\\t\" \"%%r_act,1;\",\n+      \"\\\\t\"\t\t  \".reg.pred\"\t    \"\\\\t\" \"%%r_do_abort;\",\n+      \"\\\\t\"\t\t  \"mov.pred\"\t    \"\\\\t\" \"%%r_do_abort,0;\",\n+      \"%.\\\\t\"\t\t  \"setp.ne.b32\"\t    \"\\\\t\" \"%%r_do_abort,%%r_act,\"\n+\t\t\t\t\t\t  \"0xffffffff;\",\n+      \"@ %%r_do_abort\\\\t\" \"trap;\",\n+      \"@ %%r_do_abort\\\\t\" \"exit;\",\n       \"}\",\n       NULL\n     };"}]}