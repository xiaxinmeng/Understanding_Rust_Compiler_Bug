{"sha": "88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODhlMWI5MmEzZGE1ZWIzZjkxYjc0ZjI3YjVmYjkzZjQzZjBhYTU5Ng==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2000-06-21T16:37:06Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-06-21T16:37:06Z"}, "message": "pt.c (tsubst_decl, [...]): Fix test for TYPE_DECLs for which we don't need to look for instantiations.\n\n        * pt.c (tsubst_decl, case TYPE_DECL): Fix test for TYPE_DECLs\n        for which we don't need to look for instantiations.\n\nFrom-SVN: r34633", "tree": {"sha": "78973f1e3d62f466928253c283f3fc493457f844", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78973f1e3d62f466928253c283f3fc493457f844"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f433539a26299e29afa8b0e0b46b36b88a37ca24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f433539a26299e29afa8b0e0b46b36b88a37ca24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f433539a26299e29afa8b0e0b46b36b88a37ca24"}], "stats": {"total": 24, "additions": 11, "deletions": 13}, "files": [{"sha": "f5b4c318f5a7b8032173fc0a894d30acb1303113", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596", "patch": "@@ -1,3 +1,8 @@\n+2000-06-20  Jason Merrill  <jason@redhat.com>\n+\n+\t* pt.c (tsubst_decl, case TYPE_DECL): Fix test for TYPE_DECLs \n+\tfor which we don't need to look for instantiations.\n+\n 2000-06-21  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* parse.y (program): Always call finish_translation_unit."}, {"sha": "70ad846e69b0fcc9fffde9aaca1bef6115a58f19", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 13, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=88e1b92a3da5eb3f91b74f27b5fb93f43f0aa596", "patch": "@@ -5873,20 +5873,13 @@ tsubst_decl (t, args, type, in_decl)\n       break;\n \n     case TYPE_DECL:\n-      if (DECL_IMPLICIT_TYPEDEF_P (t))\n+      if (TREE_CODE (type) == TEMPLATE_TEMPLATE_PARM\n+\t  || t == TYPE_MAIN_DECL (TREE_TYPE (t)))\n \t{\n-\t  /* For an implicit typedef, we just want the implicit\n-\t     typedef for the tsubst'd type.  We've already got the\n-\t     tsubst'd type, as TYPE, so we just need it's associated\n-\t     declaration.  */\n-\t  r = TYPE_NAME (type);\n-\t  break;\n-\t}\n-      else if (TREE_CODE (type) == TEMPLATE_TYPE_PARM\n-\t       || TREE_CODE (type) == TEMPLATE_TEMPLATE_PARM)\n-\t{\n-\t  /* For a template type parameter, we don't have to do\n-\t     anything special.  */\n+\t  /* If this is the canonical decl, we don't have to mess with\n+             instantiations, and often we can't (for typename, template\n+\t     type parms and such).  Note that TYPE_NAME is not correct for\n+\t     the above test if we've copied the type for a typedef.  */\n \t  r = TYPE_NAME (type);\n \t  break;\n \t}"}]}