{"sha": "1bae867a84abddcbd146f0a8b5d82426c3bb8a46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJhZTg2N2E4NGFiZGRjYmQxNDZmMGE4YjVkODI0MjZjM2JiOGE0Ng==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-12-16T10:02:37Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-12-16T10:02:37Z"}, "message": "re PR rtl-optimization/55630 (FAIL: g++.dg/pr48660.C -std=c++98 (internal compiler error))\n\n\tPR rtl-optimization/55630\n\t* expr.c (expand_assignment): Do not call copy_blkmode_to_reg to move\n\tBLKmode return values to the return register.\n\nFrom-SVN: r194530", "tree": {"sha": "179de2976b53f6f09f786013b2b4078605c8459c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/179de2976b53f6f09f786013b2b4078605c8459c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1bae867a84abddcbd146f0a8b5d82426c3bb8a46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bae867a84abddcbd146f0a8b5d82426c3bb8a46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bae867a84abddcbd146f0a8b5d82426c3bb8a46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bae867a84abddcbd146f0a8b5d82426c3bb8a46/comments", "author": null, "committer": null, "parents": [{"sha": "0e76460fddde9192e21f1a00c52bdb977153d7c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e76460fddde9192e21f1a00c52bdb977153d7c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e76460fddde9192e21f1a00c52bdb977153d7c8"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "7156bc6a750f4f181e6062f85588467ad5412377", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bae867a84abddcbd146f0a8b5d82426c3bb8a46/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bae867a84abddcbd146f0a8b5d82426c3bb8a46/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1bae867a84abddcbd146f0a8b5d82426c3bb8a46", "patch": "@@ -1,3 +1,9 @@\n+2012-12-16  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR rtl-optimization/55630\n+\t* expr.c (expand_assignment): Do not call copy_blkmode_to_reg to move\n+\tBLKmode return values to the return register.\n+\n 2012-12-15  Alexandre Oliva <aoliva@redhat.com>\n \n \tPR libmudflap/53952"}, {"sha": "9d9e5b9abf59f265c3335aa28b72fa0a4895e0d8", "filename": "gcc/expr.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bae867a84abddcbd146f0a8b5d82426c3bb8a46/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bae867a84abddcbd146f0a8b5d82426c3bb8a46/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=1bae867a84abddcbd146f0a8b5d82426c3bb8a46", "patch": "@@ -4947,7 +4947,12 @@ expand_assignment (tree to, tree from, bool nontemporal)\n       rtx temp;\n \n       push_temp_slots ();\n-      if (REG_P (to_rtx) && TYPE_MODE (TREE_TYPE (from)) == BLKmode)\n+\n+      /* If the source is itself a return value, it still is in a pseudo at\n+\t this point so we can move it back to the return register directly.  */\n+      if (REG_P (to_rtx)\n+\t  && TYPE_MODE (TREE_TYPE (from)) == BLKmode\n+\t  && TREE_CODE (from) != CALL_EXPR)\n \ttemp = copy_blkmode_to_reg (GET_MODE (to_rtx), from);\n       else\n \ttemp = expand_expr (from, NULL_RTX, GET_MODE (to_rtx), EXPAND_NORMAL);"}]}