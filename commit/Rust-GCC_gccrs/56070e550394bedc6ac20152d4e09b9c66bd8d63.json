{"sha": "56070e550394bedc6ac20152d4e09b9c66bd8d63", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTYwNzBlNTUwMzk0YmVkYzZhYzIwMTUyZDRlMDliOWM2NmJkOGQ2Mw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-02-21T11:16:06Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-02-21T11:16:06Z"}, "message": "(read_specs): Use length read when inserting zero.\n\nFrom-SVN: r8979", "tree": {"sha": "699d1ef437f73b0fe118ebfe41879605470326a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/699d1ef437f73b0fe118ebfe41879605470326a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/56070e550394bedc6ac20152d4e09b9c66bd8d63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56070e550394bedc6ac20152d4e09b9c66bd8d63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56070e550394bedc6ac20152d4e09b9c66bd8d63", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56070e550394bedc6ac20152d4e09b9c66bd8d63/comments", "author": null, "committer": null, "parents": [{"sha": "bc17186d3aaebbad5cd68d49d0ef000dcb27cc8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc17186d3aaebbad5cd68d49d0ef000dcb27cc8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc17186d3aaebbad5cd68d49d0ef000dcb27cc8c"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "afa20ef2b3e2f5acbdfd299c09f739c0b1f95f37", "filename": "gcc/gcc.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56070e550394bedc6ac20152d4e09b9c66bd8d63/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56070e550394bedc6ac20152d4e09b9c66bd8d63/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=56070e550394bedc6ac20152d4e09b9c66bd8d63", "patch": "@@ -1110,6 +1110,7 @@ read_specs (filename)\n      char *filename;\n {\n   int desc;\n+  int readlen;\n   struct stat statbuf;\n   char *buffer;\n   register char *p;\n@@ -1126,8 +1127,10 @@ read_specs (filename)\n \n   /* Read contents of file into BUFFER.  */\n   buffer = xmalloc ((unsigned) statbuf.st_size + 1);\n-  read (desc, buffer, (unsigned) statbuf.st_size);\n-  buffer[statbuf.st_size] = 0;\n+  readlen = read (desc, buffer, (unsigned) statbuf.st_size);\n+  if (readlen < 0)\n+    pfatal_with_name (filename);\n+  buffer[readlen] = 0;\n   close (desc);\n \n   /* Scan BUFFER for specs, putting them in the vector.  */"}]}