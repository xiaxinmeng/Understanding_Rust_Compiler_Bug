{"sha": "2dd8bc01663b0ff2c5dd586102dfe270b145fc45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRkOGJjMDE2NjNiMGZmMmM1ZGQ1ODYxMDJkZmUyNzBiMTQ1ZmM0NQ==", "commit": {"author": {"name": "Geoff Keating", "email": "geoffk@cygnus.com", "date": "2000-02-11T19:31:55Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2000-02-11T19:31:55Z"}, "message": "function.c (thread_prologue_and_epilogue_insns): Don't insert a RETURN insn into a block which already ends with a jump.\n\n\t* function.c (thread_prologue_and_epilogue_insns): Don't insert\n\ta RETURN insn into a block which already ends with a jump.\n\nFrom-SVN: r31928", "tree": {"sha": "128746f73c3e2da8ea83b98082bd6be445d4bdb3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/128746f73c3e2da8ea83b98082bd6be445d4bdb3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2dd8bc01663b0ff2c5dd586102dfe270b145fc45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dd8bc01663b0ff2c5dd586102dfe270b145fc45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2dd8bc01663b0ff2c5dd586102dfe270b145fc45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dd8bc01663b0ff2c5dd586102dfe270b145fc45/comments", "author": null, "committer": null, "parents": [{"sha": "3db18f599e3210129a417605fad494b271650dee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3db18f599e3210129a417605fad494b271650dee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3db18f599e3210129a417605fad494b271650dee"}], "stats": {"total": 27, "additions": 22, "deletions": 5}, "files": [{"sha": "5feeef00f7adbc8dd53fb56a7dfa611cafe42e69", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dd8bc01663b0ff2c5dd586102dfe270b145fc45/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dd8bc01663b0ff2c5dd586102dfe270b145fc45/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2dd8bc01663b0ff2c5dd586102dfe270b145fc45", "patch": "@@ -1,3 +1,8 @@\n+2000-02-11  Geoff Keating  <geoffk@cygnus.com>\n+\n+\t* function.c (thread_prologue_and_epilogue_insns): Don't insert\n+\ta RETURN insn into a block which already ends with a jump.\n+\n 2000-02-11  Geoff Keating  <geoffk@cygnus.com>\n \n \t* haifa-sched.c (BUF_LEN): Increase a lot."}, {"sha": "dd4bcb9d0894ccde60ce5f58b35134418bc8ee31", "filename": "gcc/function.c", "status": "modified", "additions": 17, "deletions": 5, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dd8bc01663b0ff2c5dd586102dfe270b145fc45/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dd8bc01663b0ff2c5dd586102dfe270b145fc45/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=2dd8bc01663b0ff2c5dd586102dfe270b145fc45", "patch": "@@ -6746,13 +6746,25 @@ thread_prologue_and_epilogue_insns (f)\n \t      remove_edge (e);\n \t      make_edge (NULL, bb, EXIT_BLOCK_PTR, 0);\n \t    }\n-\t}\n \n-      /* Emit a return insn for the exit fallthru block.  Whether\n-\t this is still reachable will be determined later.  */\n+\t  /* Emit a return insn for the exit fallthru block.  Whether\n+\t     this is still reachable will be determined later.  */\n \n-      emit_barrier_after (last->end);\n-      emit_return_into_block (last);\n+\t  emit_barrier_after (last->end);\n+\t  emit_return_into_block (last);\n+\t}\n+      else \n+\t{\n+\t  /* The exit block wasn't empty.  We have to use insert_insn_on_edge,\n+\t     as it may be the exit block can go elsewhere as well\n+\t     as exiting.  */\n+\t  start_sequence ();\n+\t  emit_jump_insn (gen_return ());\n+\t  seq = gen_sequence ();\n+\t  end_sequence ();\n+\t  insert_insn_on_edge (seq, e);\n+\t  insertted = 1;\n+\t}\n       goto epilogue_done;\n     }\n #endif"}]}