{"sha": "e99991618f2f64eda18a257b5d653bd0f5d91028", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk5OTkxNjE4ZjJmNjRlZGExOGEyNTdiNWQ2NTNiZDBmNWQ5MTAyOA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-03-02T09:26:39Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-03-02T09:26:39Z"}, "message": "[multiple changes]\n\n2015-03-02  Gary Dismukes  <dismukes@adacore.com>\n\n\t* einfo.adb, checks.adb: Minor reformatting and typo fixes.\n\n2015-03-02  Ed Schonberg  <schonberg@adacore.com>\n\n\t* exp_aggr.adb (Get_Assoc_Expr): If the Default_Component_Value\n\tis defined for the array type, use it instead of a Default_Value\n\tspecified for the component type itself.\n\nFrom-SVN: r221102", "tree": {"sha": "838d7fdc77b335b755a615851de2e00a2afecea0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/838d7fdc77b335b755a615851de2e00a2afecea0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e99991618f2f64eda18a257b5d653bd0f5d91028", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e99991618f2f64eda18a257b5d653bd0f5d91028", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e99991618f2f64eda18a257b5d653bd0f5d91028", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e99991618f2f64eda18a257b5d653bd0f5d91028/comments", "author": null, "committer": null, "parents": [{"sha": "c9d70ab181e531bfe069c42aeaa996ec96bca02e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9d70ab181e531bfe069c42aeaa996ec96bca02e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9d70ab181e531bfe069c42aeaa996ec96bca02e"}], "stats": {"total": 39, "additions": 29, "deletions": 10}, "files": [{"sha": "daa095167dc62b7fce5cd5370eef4f8a25507f4e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=e99991618f2f64eda18a257b5d653bd0f5d91028", "patch": "@@ -1,3 +1,13 @@\n+2015-03-02  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* einfo.adb, checks.adb: Minor reformatting and typo fixes.\n+\n+2015-03-02  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* exp_aggr.adb (Get_Assoc_Expr): If the Default_Component_Value\n+\tis defined for the array type, use it instead of a Default_Value\n+\tspecified for the component type itself.\n+\n 2015-03-02  Thomas Quinot  <quinot@adacore.com>\n \n \t* exp_attr.adb (Expand_N_Attribute_Reference, case Input): When"}, {"sha": "759f94075a3d0e1294848698531c3bfbfb61e4aa", "filename": "gcc/ada/checks.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2Fchecks.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2Fchecks.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fchecks.adb?ref=e99991618f2f64eda18a257b5d653bd0f5d91028", "patch": "@@ -2576,7 +2576,7 @@ package body Checks is\n \n         or else Is_Formal_Subprogram (Subp)\n \n-        --  Do not process imported subprograms since pre and post conditions\n+        --  Do not process imported subprograms since pre- and postconditions\n         --  are never verified on routines coming from a different language.\n \n         or else Is_Imported (Subp)"}, {"sha": "794ef19f3d9950a2809d33127238dd6e7f56d54e", "filename": "gcc/ada/einfo.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2Feinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2Feinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.adb?ref=e99991618f2f64eda18a257b5d653bd0f5d91028", "patch": "@@ -6708,7 +6708,7 @@ package body Einfo is\n \n          --  The first/next entity chain of a generic subprogram contains all\n          --  generic formal parameters, followed by the formal parameters. Go\n-         --  directly to the paramters by skipping the formal part.\n+         --  directly to the parameters by skipping the formal part.\n \n          if Is_Generic_Subprogram (Id) then\n             while Present (Formal) and then not Is_Formal (Formal) loop\n@@ -6747,7 +6747,7 @@ package body Einfo is\n \n          --  The first/next entity chain of a generic subprogram contains all\n          --  generic formal parameters, followed by the formal parameters. Go\n-         --  directly to the paramters by skipping the formal part.\n+         --  directly to the parameters by skipping the formal part.\n \n          if Is_Generic_Subprogram (Id) then\n             while Present (Formal) and then not Is_Formal (Formal) loop"}, {"sha": "2539033fce5fc8b75c23c938c3a257451b1ea636", "filename": "gcc/ada/exp_aggr.adb", "status": "modified", "additions": 16, "deletions": 7, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2Fexp_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e99991618f2f64eda18a257b5d653bd0f5d91028/gcc%2Fada%2Fexp_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_aggr.adb?ref=e99991618f2f64eda18a257b5d653bd0f5d91028", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2014, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2015, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -786,8 +786,10 @@ package body Exp_Aggr is\n       --  Otherwise we call Build_Code recursively\n \n       function Get_Assoc_Expr (Assoc : Node_Id) return Node_Id;\n-      --  For an association with a box, use default aspect of component type\n-      --  if present, to initialize one or more components.\n+      --  For an association with a box, use value given by aspect\n+     --   Default_Component_Value of array type if specified, else use\n+     --   value given by aspect Default_Value for component type itself\n+     --   if specified, else return Empty.\n \n       function Local_Compile_Time_Known_Value (E : Node_Id) return Boolean;\n       function Local_Expr_Value               (E : Node_Id) return Uint;\n@@ -1533,12 +1535,19 @@ package body Exp_Aggr is\n       --------------------\n \n       function Get_Assoc_Expr (Assoc : Node_Id) return Node_Id is\n+         Typ : constant Entity_Id := Base_Type (Etype (N));\n+\n       begin\n          if Box_Present (Assoc) then\n-            if Is_Scalar_Type (Ctype)\n-              and then Present (Default_Aspect_Value (Ctype))\n-            then\n-               return Default_Aspect_Value (Ctype);\n+            if Is_Scalar_Type (Ctype) then\n+               if Present (Default_Aspect_Component_Value (Typ)) then\n+                  return Default_Aspect_Component_Value (Typ);\n+\n+               elsif Present (Default_Aspect_Value (Ctype)) then\n+                  return Default_Aspect_Value (Ctype);\n+               else\n+                  return Empty;\n+               end if;\n             else\n                return Empty;\n             end if;"}]}