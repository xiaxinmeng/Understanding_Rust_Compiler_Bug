{"sha": "60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA4MjJlMGI1N2QyYjUzMDNmZGZiNWFmODI5ZmI0ZGNmNzc2MjZmMQ==", "commit": {"author": {"name": "Ulrich Drepper", "email": "drepper@redhat.com", "date": "2009-01-30T00:08:29Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-01-30T00:08:29Z"}, "message": "cstring (memchr, [...]): Provide inlines only if __CORRECT_ISO_CPP_STRING_H_PROTO is not defined.\n\n\t* include/c_std/cstring (memchr, strchr, strpbrk, strrchr, strstr):\n\tProvide inlines only if __CORRECT_ISO_CPP_STRING_H_PROTO is not\n\tdefined.\n\t* include/c_std/cwchar (wcschr, wcspbrk, wcsrchr, wcsstr, wmemchr):\n\tProvide inlines only if __CORRECT_ISO_CPP_WCHAR_H_PROTO is not\n\tdefined.\n\t* include/c_global/cstring (memchr, strchr, strpbrk, strrchr, strstr):\n\tProvide inlines only if __CORRECT_ISO_CPP_STRING_H_PROTO is not\n\tdefined.\n\t* include/c_global/cwchar (wcschr, wcspbrk, wcsrchr, wcsstr, wmemchr):\n\tProvide inlines only if __CORRECT_ISO_CPP_WCHAR_H_PROTO is not\n\tdefined.\n\t* testsuite/21_strings/c_strings/char_t/2.cc (test02): If first\n\targument is const char *, assign result to const char * var, not\n\tchar *.\n\t* testsuite/21_strings/c_strings/wchar_t/2.cc (test02): If first\n\targument is const wchar_t *, assign result to const wchar_t * var, not\n\twchar_t *.\n\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r143773", "tree": {"sha": "4062f59ed38873a74525cac1bcb73d7b5bb59f8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4062f59ed38873a74525cac1bcb73d7b5bb59f8a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/comments", "author": null, "committer": null, "parents": [{"sha": "cbdab9c897d52b8311979a1e31e41d248671a4cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbdab9c897d52b8311979a1e31e41d248671a4cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbdab9c897d52b8311979a1e31e41d248671a4cb"}], "stats": {"total": 113, "additions": 63, "deletions": 50}, "files": [{"sha": "3fb9031007a7804baa083a044292aa6f1320a292", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "patch": "@@ -1,3 +1,25 @@\n+2009-01-30  Ulrich Drepper  <drepper@redhat.com>\n+\t    Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* include/c_std/cstring (memchr, strchr, strpbrk, strrchr, strstr):\n+\tProvide inlines only if __CORRECT_ISO_CPP_STRING_H_PROTO is not\n+\tdefined.\n+\t* include/c_std/cwchar (wcschr, wcspbrk, wcsrchr, wcsstr, wmemchr):\n+\tProvide inlines only if __CORRECT_ISO_CPP_WCHAR_H_PROTO is not\n+\tdefined.\n+\t* include/c_global/cstring (memchr, strchr, strpbrk, strrchr, strstr):\n+\tProvide inlines only if __CORRECT_ISO_CPP_STRING_H_PROTO is not\n+\tdefined.\n+\t* include/c_global/cwchar (wcschr, wcspbrk, wcsrchr, wcsstr, wmemchr):\n+\tProvide inlines only if __CORRECT_ISO_CPP_WCHAR_H_PROTO is not\n+\tdefined.\n+\t* testsuite/21_strings/c_strings/char_t/2.cc (test02): If first\n+\targument is const char *, assign result to const char * var, not\n+\tchar *.\n+\t* testsuite/21_strings/c_strings/wchar_t/2.cc (test02): If first\n+\targument is const wchar_t *, assign result to const wchar_t * var, not\n+\twchar_t *.\n+\n 2009-01-29  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \t* include/std/thread: Remove unused headers."}, {"sha": "5035e4c1279bc9f817b7cebad915fe1c8653097e", "filename": "libstdc++-v3/include/c_global/cstring", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcstring", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcstring", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcstring?ref=60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "patch": "@@ -1,7 +1,7 @@\n // -*- C++ -*- forwarding header.\n \n // Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n-// 2006, 2007, 2008\n+// 2006, 2007, 2008, 2009\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -96,34 +96,32 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n   using ::strspn;\n   using ::strtok;\n   using ::strxfrm;\n+  using ::strchr;\n+  using ::strpbrk;\n+  using ::strrchr;\n+  using ::strstr;\n \n+#ifndef __CORRECT_ISO_CPP_STRING_H_PROTO\n   inline void*\n   memchr(void* __p, int __c, size_t __n)\n   { return memchr(const_cast<const void*>(__p), __c, __n); }\n \n-  using ::strchr;\n-\n   inline char*\n   strchr(char* __s1, int __n)\n   { return __builtin_strchr(const_cast<const char*>(__s1), __n); }\n \n-  using ::strpbrk;\n-\n   inline char*\n   strpbrk(char* __s1, const char* __s2)\n   { return __builtin_strpbrk(const_cast<const char*>(__s1), __s2); }\n \n-  using ::strrchr;\n-\n   inline char*\n   strrchr(char* __s1, int __n)\n   { return __builtin_strrchr(const_cast<const char*>(__s1), __n); }\n \n-  using ::strstr;\n-\n   inline char*\n   strstr(char* __s1, const char* __s2)\n   { return __builtin_strstr(const_cast<const char*>(__s1), __s2); }\n+#endif\n \n _GLIBCXX_END_NAMESPACE\n "}, {"sha": "7284f3df9d49af9977bc0a958c279ab46142f872", "filename": "libstdc++-v3/include/c_global/cwchar", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcwchar", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcwchar", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcwchar?ref=60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "patch": "@@ -1,7 +1,7 @@\n // -*- C++ -*- forwarding header.\n \n // Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n-// 2006, 2007, 2008\n+// 2006, 2007, 2008, 2009\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -204,36 +204,33 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n   using ::wmemset;\n   using ::wprintf;\n   using ::wscanf;\n-\n   using ::wcschr;\n+  using ::wcspbrk;\n+  using ::wcsrchr;\n+  using ::wcsstr;\n+  using ::wmemchr;\n \n+#ifndef __CORRECT_ISO_CPP_WCHAR_H_PROTO\n   inline wchar_t*\n   wcschr(wchar_t* __p, wchar_t __c)\n   { return wcschr(const_cast<const wchar_t*>(__p), __c); }\n \n-  using ::wcspbrk;\n-\n   inline wchar_t*\n   wcspbrk(wchar_t* __s1, const wchar_t* __s2)\n   { return wcspbrk(const_cast<const wchar_t*>(__s1), __s2); }\n \n-  using ::wcsrchr;\n-\n   inline wchar_t*\n   wcsrchr(wchar_t* __p, wchar_t __c)\n   { return wcsrchr(const_cast<const wchar_t*>(__p), __c); }\n \n-  using ::wcsstr;\n-\n   inline wchar_t*\n   wcsstr(wchar_t* __s1, const wchar_t* __s2)\n   { return wcsstr(const_cast<const wchar_t*>(__s1), __s2); }\n \n-  using ::wmemchr;\n-\n   inline wchar_t*\n   wmemchr(wchar_t* __p, wchar_t __c, size_t __n)\n   { return wmemchr(const_cast<const wchar_t*>(__p), __c, __n); }\n+#endif\n \n _GLIBCXX_END_NAMESPACE\n "}, {"sha": "608e219cd7fc2e39af6c4c42620ffed777acf81f", "filename": "libstdc++-v3/include/c_std/cstring", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fcstring", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fcstring", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fcstring?ref=60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "patch": "@@ -1,6 +1,6 @@\n // -*- C++ -*- forwarding header.\n \n-// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2009\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -94,36 +94,33 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n   using ::memset;\n   using ::strerror;\n   using ::strlen;\n-\n   using ::memchr;\n+  using ::strchr;\n+  using ::strpbrk;\n+  using ::strrchr;\n+  using ::strstr;\n \n+#ifndef __CORRECT_ISO_CPP_STRING_H_PROTO\n   inline void*\n   memchr(void* __p, int __c, size_t __n)\n   { return memchr(const_cast<const void*>(__p), __c, __n); }\n \n-  using ::strchr;\n-\n   inline char*\n   strchr(char* __s1, int __n)\n   { return __builtin_strchr(const_cast<const char*>(__s1), __n); }\n \n-  using ::strpbrk;\n-\n   inline char*\n   strpbrk(char* __s1, const char* __s2)\n   { return __builtin_strpbrk(const_cast<const char*>(__s1), __s2); }\n \n-  using ::strrchr;\n-\n   inline char*\n   strrchr(char* __s1, int __n)\n   { return __builtin_strrchr(const_cast<const char*>(__s1), __n); }\n \n-  using ::strstr;\n-\n   inline char*\n   strstr(char* __s1, const char* __s2)\n   { return __builtin_strstr(const_cast<const char*>(__s1), __s2); }\n+#endif\n \n _GLIBCXX_END_NAMESPACE\n "}, {"sha": "a6ffe0ab466750174cfc6e6eff8badc23b0e8559", "filename": "libstdc++-v3/include/c_std/cwchar", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fcwchar", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fcwchar", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fcwchar?ref=60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "patch": "@@ -1,7 +1,7 @@\n // -*- C++ -*- forwarding header.\n \n // Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n-// 2006, 2007\n+// 2006, 2007, 2009\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -204,36 +204,33 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n   using ::wmemset;\n   using ::wprintf;\n   using ::wscanf;\n-\n   using ::wcschr;\n+  using ::wcspbrk;\n+  using ::wcsrchr;\n+  using ::wcsstr;\n+  using ::wmemchr;\n \n+#ifndef __CORRECT_ISO_CPP_WCHAR_H_PROTO\n   inline wchar_t*\n   wcschr(wchar_t* __p, wchar_t __c)\n   { return wcschr(const_cast<const wchar_t*>(__p), __c); }\n \n-  using ::wcspbrk;\n-\n   inline wchar_t*\n   wcspbrk(wchar_t* __s1, const wchar_t* __s2)\n   { return wcspbrk(const_cast<const wchar_t*>(__s1), __s2); }\n \n-  using ::wcsrchr;\n-\n   inline wchar_t*\n   wcsrchr(wchar_t* __p, wchar_t __c)\n   { return wcsrchr(const_cast<const wchar_t*>(__p), __c); }\n \n-  using ::wcsstr;\n-\n   inline wchar_t*\n   wcsstr(wchar_t* __s1, const wchar_t* __s2)\n   { return wcsstr(const_cast<const wchar_t*>(__s1), __s2); }\n \n-  using ::wmemchr;\n-\n   inline wchar_t*\n   wmemchr(wchar_t* __p, wchar_t __c, size_t __n)\n   { return wmemchr(const_cast<const wchar_t*>(__p), __c, __n); }\n+#endif\n \n _GLIBCXX_END_NAMESPACE\n "}, {"sha": "ab1e5b0b05f1bd7d30ece478b932038378de6bb1", "filename": "libstdc++-v3/testsuite/21_strings/c_strings/char/2.cc", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fc_strings%2Fchar%2F2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fc_strings%2Fchar%2F2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fc_strings%2Fchar%2F2.cc?ref=60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "patch": "@@ -1,6 +1,6 @@\n // 2001-04-02  Benjamin Kosnik  <bkoz@redhat.com>\n \n-// Copyright (C) 2001, 2003 Free Software Foundation, Inc.\n+// Copyright (C) 2001, 2003, 2009 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -32,13 +32,14 @@ void test02()\n   char carray[50];\n   strcpy(carray, ccarray1);\n   const void* cv = ccarray1;\n-  void* v;\n+  const void* cv1;\n+  const char* cc;\n   char* c;\n \n-  v = memchr(cv, '/', 3);\n-  c = strchr(ccarray1, '/');\n-  c = strrchr(ccarray1, 'c');\n-  c = strpbrk(ccarray1, ccarray2);\n+  cv1 = memchr(cv, '/', 3);\n+  cc = strchr(ccarray1, '/');\n+  cc = strrchr(ccarray1, 'c');\n+  cc = strpbrk(ccarray1, ccarray2);\n   c = strstr(carray, carray);\n }\n "}, {"sha": "aefc1a784e332055935159ba95ed2ecdda186844", "filename": "libstdc++-v3/testsuite/21_strings/c_strings/wchar_t/2.cc", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fc_strings%2Fwchar_t%2F2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60822e0b57d2b5303fdfb5af829fb4dcf77626f1/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fc_strings%2Fwchar_t%2F2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fc_strings%2Fwchar_t%2F2.cc?ref=60822e0b57d2b5303fdfb5af829fb4dcf77626f1", "patch": "@@ -1,6 +1,6 @@\n // 2001-04-02  Benjamin Kosnik  <bkoz@redhat.com>\n \n-// Copyright (C) 2001 Free Software Foundation, Inc.\n+// Copyright (C) 2001, 2009 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -32,12 +32,13 @@ void test02()\n   const wchar_t* ccarray2 = L\"san francisco sunny-day park inspectors\";\n   wchar_t carray[50];\n   wcscpy(carray, ccarray1);\n+  const wchar_t* cw;\n   wchar_t* w;\n \n-  w = wmemchr(ccarray1, L'/', 3);\n-  w = wcschr(ccarray1, L'/');\n-  w = wcspbrk(ccarray1, ccarray2);\n-  w = wcsrchr(ccarray1, L'c');\n+  cw = wmemchr(ccarray1, L'/', 3);\n+  cw = wcschr(ccarray1, L'/');\n+  cw = wcspbrk(ccarray1, ccarray2);\n+  cw = wcsrchr(ccarray1, L'c');\n   w = wcsstr(carray, carray);\n }\n "}]}