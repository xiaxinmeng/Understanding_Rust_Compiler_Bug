{"sha": "33e7f993d1c0be878a778b227d744d3b389c66d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNlN2Y5OTNkMWMwYmU4NzhhNzc4YjIyN2Q3NDRkM2IzODljNjZkMA==", "commit": {"author": {"name": "Sriraman Tallam", "email": "tmsriram@google.com", "date": "2013-10-23T21:13:50Z"}, "committer": {"name": "Sriraman Tallam", "email": "tmsriram@gcc.gnu.org", "date": "2013-10-23T21:13:50Z"}, "message": "re PR target/57756 (Function target attribute is retaining  state of previously seen function)\n\nPR target/57756\n\nReplace further references to global_options in functions\nix86_option_override_internal and ix86_valid_target_attribute_tree\nin config/i386/i386.c.\n\n\tPR target/57756\n\t* config/i386/i386.c (ix86_option_override_internal):\n\tChange TARGET_SSE2 to TARGET_SSE2_P (opts->...)\n\t(ix86_valid_target_attribute_tree):\n\tChange TARGET_64BIT to TARGET_64BIT_P (opts->...)\n\tChange TARGET_SSE to TARGET_SSE_P (opts->...)\n\nFrom-SVN: r203991", "tree": {"sha": "9329ab26fdcbc0e5974bff914b878cfca6e0702e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9329ab26fdcbc0e5974bff914b878cfca6e0702e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33e7f993d1c0be878a778b227d744d3b389c66d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33e7f993d1c0be878a778b227d744d3b389c66d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33e7f993d1c0be878a778b227d744d3b389c66d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33e7f993d1c0be878a778b227d744d3b389c66d0/comments", "author": {"login": "tmsri", "id": 38991943, "node_id": "MDQ6VXNlcjM4OTkxOTQz", "avatar_url": "https://avatars.githubusercontent.com/u/38991943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmsri", "html_url": "https://github.com/tmsri", "followers_url": "https://api.github.com/users/tmsri/followers", "following_url": "https://api.github.com/users/tmsri/following{/other_user}", "gists_url": "https://api.github.com/users/tmsri/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmsri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmsri/subscriptions", "organizations_url": "https://api.github.com/users/tmsri/orgs", "repos_url": "https://api.github.com/users/tmsri/repos", "events_url": "https://api.github.com/users/tmsri/events{/privacy}", "received_events_url": "https://api.github.com/users/tmsri/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e2fbf4c53d5ebe7638695797671dcef927cd73d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2fbf4c53d5ebe7638695797671dcef927cd73d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2fbf4c53d5ebe7638695797671dcef927cd73d7"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "60eecba5958272f14f6a1d9cc4cb3ca13969a356", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33e7f993d1c0be878a778b227d744d3b389c66d0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33e7f993d1c0be878a778b227d744d3b389c66d0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33e7f993d1c0be878a778b227d744d3b389c66d0", "patch": "@@ -1,3 +1,12 @@\n+2013-10-23  Sriraman Tallam  <tmsriram@google.com>\n+\n+\tPR target/57756\n+\t* config/i386/i386.c (ix86_option_override_internal):\n+\tChange TARGET_SSE2 to TARGET_SSE2_P (opts->...)\n+\t(ix86_valid_target_attribute_tree):\n+\tChange TARGET_64BIT to TARGET_64BIT_P (opts->...)\n+\tChange TARGET_SSE to TARGET_SSE_P (opts->...)\n+\n 2013-10-23  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* tree-ssa-loop.h: Remove include files.\n@@ -680,6 +689,7 @@\n \n 2013-10-17  Sriraman Tallam  <tmsriram@google.com>\n \n+\tPR target/57756\n \t* opth-gen.awk: Define target_flags_explicit.\n \n 2013-10-17  Michael Meissner  <meissner@linux.vnet.ibm.com>"}, {"sha": "25c63c7749a94addf57c7b02ab8f121746e3a35d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33e7f993d1c0be878a778b227d744d3b389c66d0/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33e7f993d1c0be878a778b227d744d3b389c66d0/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=33e7f993d1c0be878a778b227d744d3b389c66d0", "patch": "@@ -3798,7 +3798,7 @@ ix86_option_override_internal (bool main_args_p,\n      codegen.  We may switch to 387 with -ffast-math for size optimized\n      functions. */\n   else if (fast_math_flags_set_p (&global_options)\n-\t   && TARGET_SSE2)\n+\t   && TARGET_SSE2_P (opts->x_ix86_isa_flags))\n     ix86_fpmath = FPMATH_SSE;\n   else\n     opts->x_ix86_fpmath = TARGET_FPMATH_DEFAULT_P (opts->x_ix86_isa_flags);\n@@ -4553,7 +4553,8 @@ ix86_valid_target_attribute_tree (tree args,\n       /* If fpmath= is not set, and we now have sse2 on 32-bit, use it.  */\n       if (enum_opts_set.x_ix86_fpmath)\n \topts_set->x_ix86_fpmath = (enum fpmath_unit) 1;\n-      else if (!TARGET_64BIT && TARGET_SSE)\n+      else if (!TARGET_64BIT_P (opts->x_ix86_isa_flags)\n+\t       && TARGET_SSE_P (opts->x_ix86_isa_flags))\n \t{\n \t  opts->x_ix86_fpmath = (enum fpmath_unit) (FPMATH_SSE | FPMATH_387);\n \t  opts_set->x_ix86_fpmath = (enum fpmath_unit) 1;"}]}