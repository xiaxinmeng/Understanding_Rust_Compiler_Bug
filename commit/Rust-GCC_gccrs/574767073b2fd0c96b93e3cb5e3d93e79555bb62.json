{"sha": "574767073b2fd0c96b93e3cb5e3d93e79555bb62", "node_id": "C_kwDOANBUbNoAKDU3NDc2NzA3M2IyZmQwYzk2YjkzZTNjYjVlM2Q5M2U3OTU1NWJiNjI", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-11-13T20:56:06Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-11-14T08:35:03Z"}, "message": "Revert \"doc: Modernize baseconf.py.\"\n\nThis reverts commit dd31c6923fbe8352f7efa830c47c6d0ab31cfce8.", "tree": {"sha": "c844ff9cc88fff6ee8b7cce5e7e591a679dc7228", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c844ff9cc88fff6ee8b7cce5e7e591a679dc7228"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/574767073b2fd0c96b93e3cb5e3d93e79555bb62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/574767073b2fd0c96b93e3cb5e3d93e79555bb62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/574767073b2fd0c96b93e3cb5e3d93e79555bb62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/574767073b2fd0c96b93e3cb5e3d93e79555bb62/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30ad6e0f466bbdc2a1b92a2bf22623b5d103695e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30ad6e0f466bbdc2a1b92a2bf22623b5d103695e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30ad6e0f466bbdc2a1b92a2bf22623b5d103695e"}], "stats": {"total": 34, "additions": 16, "deletions": 18}, "files": [{"sha": "d85659e45408e189e502452f1230dc01661970d7", "filename": "doc/baseconf.py", "status": "modified", "additions": 16, "deletions": 18, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/574767073b2fd0c96b93e3cb5e3d93e79555bb62/doc%2Fbaseconf.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/574767073b2fd0c96b93e3cb5e3d93e79555bb62/doc%2Fbaseconf.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/doc%2Fbaseconf.py?ref=574767073b2fd0c96b93e3cb5e3d93e79555bb62", "patch": "@@ -11,31 +11,29 @@\n # documentation root, use os.path.abspath to make it absolute, like shown here.\n #\n import os\n-import sys\n import time\n-from pathlib import Path\n-\n-# Build paths and add path to gcc_sphinx.py extension.\n-folder = Path(__file__).resolve().parent\n-doc_modules = folder / 'modules'\n-gcc_srcdir = folder / '..' / 'gcc'\n-\n-sys.path.insert(0, str(doc_modules))\n+import sys\n \n-# gccint needs a deeper stack limit.\n+# gccint needs a deeper stack limit\n sys.setrecursionlimit(2000)\n \n # -- Project information -----------------------------------------------------\n \n+# The full version, including alpha/beta/rc tags\n+\n+folder = os.path.dirname(os.path.realpath(__file__))\n+doc_modules = os.path.join(folder, 'modules')\n+gcc_srcdir = os.path.join(folder, '..', 'gcc')\n+\n+sys.path.insert(0, doc_modules)\n \n def read_file(name):\n-    path = gcc_srcdir / name\n-    if path.exists():\n+    path = os.path.join(gcc_srcdir, name)\n+    if os.path.exists(path):\n         return open(path).read().strip()\n     else:\n         return ''\n \n-\n def __get_builder_name():\n     if '-b' in sys.argv:\n         return sys.argv[sys.argv.index('-b') + 1]\n@@ -126,14 +124,14 @@ def __get_builder_name():\n     'navigation_with_keys': True,\n }\n \n-html_logo = str(folder / 'logo.svg')\n+html_logo = os.path.join(folder, 'logo.svg')\n \n-html_favicon = str(folder / 'favicon.ico')\n+html_favicon = os.path.join(folder, 'favicon.ico')\n \n html_last_updated_fmt = ''\n \n html_static_path = [\n-    str(folder / '_static')\n+    os.path.join(folder, '_static')\n ]\n \n html_css_files = [\n@@ -151,7 +149,7 @@ def __get_builder_name():\n # Use xelatex by default\n latex_engine = 'xelatex'\n \n-latex_logo = str(folder / 'logo.pdf')\n+latex_logo = os.path.join(folder, 'logo.pdf')\n \n latex_elements = {\n     'pointsize': '11pt',\n@@ -217,4 +215,4 @@ def set_common(name, module):\n         module['tags'].add('development')\n \n     html_theme_options['source_edit_link'] = f'https://gcc.gnu.org/onlinedocs/{name}' \\\n-                                             '/_sources/{filename}.txt'\n+                                               '/_sources/{filename}.txt'"}]}