{"sha": "19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTlmNmI0MWEzYTEyYzY3Y2NiYzUxYzViNzI5OTU0YzRjY2FmMTE3Ng==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-10-11T20:27:00Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-10-12T10:14:47Z"}, "message": "d: Merge upstream dmd 3a9790525\n\nFixes the return codes to match the documentation of\nTarget::isVectorTypeSupported.\n\nReviewed-on: https://github.com/dlang/dmd/pull/11830\n\ngcc/d/ChangeLog:\n\n\t* dmd/MERGE: Merge upstream dmd 3a9790525\n\t* d-target.cc (Target::isVectorTypeSupported): Adjust return codes for\n\tinvalid size and invalid base type.", "tree": {"sha": "03be9f76eee34dcd20a64ded2f171755d177a535", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03be9f76eee34dcd20a64ded2f171755d177a535"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e1b4fbfea6ad24f47279b90aec27ef1512625c80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1b4fbfea6ad24f47279b90aec27ef1512625c80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1b4fbfea6ad24f47279b90aec27ef1512625c80"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "78f14203b5cc129e53eaaf5ef5ef9207491157f8", "filename": "gcc/d/d-target.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176/gcc%2Fd%2Fd-target.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176/gcc%2Fd%2Fd-target.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fd-target.cc?ref=19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "patch": "@@ -241,15 +241,15 @@ Target::isVectorTypeSupported (int sz, Type *type)\n {\n   /* Size must be greater than zero, and a power of two.  */\n   if (sz <= 0 || sz & (sz - 1))\n-    return 2;\n+    return 3;\n \n   /* __vector(void[]) is treated same as __vector(ubyte[])  */\n   if (type == Type::tvoid)\n     type = Type::tuns8;\n \n   /* No support for non-trivial types, complex types, or booleans.  */\n   if (!type->isTypeBasic () || type->iscomplex () || type->ty == Tbool)\n-    return 3;\n+    return 2;\n \n   /* In [simd/vector extensions], which vector types are supported depends on\n      the target.  The implementation is expected to only support the vector\n@@ -258,7 +258,7 @@ Target::isVectorTypeSupported (int sz, Type *type)\n   tree ctype = build_vector_type (build_ctype (type), nunits);\n \n   if (!targetm.vector_mode_supported_p (TYPE_MODE (ctype)))\n-    return 3;\n+    return 2;\n \n   return 0;\n }"}, {"sha": "8a59cbde78e95b0b0e094a5ab7a5436827650a26", "filename": "gcc/d/dmd/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176/gcc%2Fd%2Fdmd%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176/gcc%2Fd%2Fdmd%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdmd%2FMERGE?ref=19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "patch": "@@ -1,4 +1,4 @@\n-e49192807967c6f11252683a731c5a0159ef36da\n+3a979052509fff8170ba80e48817377a60e78eb3\n \n The first line of this file holds the git revision number of the last\n merge done from the dlang/dmd repository."}, {"sha": "bc66be028c1d84cef36bfaa4c1d0ad85647e050a", "filename": "gcc/d/dmd/mtype.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176/gcc%2Fd%2Fdmd%2Fmtype.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176/gcc%2Fd%2Fdmd%2Fmtype.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdmd%2Fmtype.c?ref=19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "patch": "@@ -3824,12 +3824,12 @@ Type *TypeVector::semantic(Loc loc, Scope *sc)\n     case 1: // no support at all\n         error(loc, \"SIMD vector types not supported on this platform\");\n         return terror;\n-    case 2: // invalid size\n-        error(loc, \"%d byte vector type %s is not supported on this platform\", sz, toChars());\n-        return terror;\n-    case 3: // invalid base type\n+    case 2: // invalid base type\n         error(loc, \"vector type %s is not supported on this platform\", toChars());\n         return terror;\n+    case 3: // invalid size\n+        error(loc, \"%d byte vector type %s is not supported on this platform\", sz, toChars());\n+        return terror;\n     default:\n         assert(0);\n     }"}]}