{"sha": "18778292a06fff84ba30d2df3ea070c30b0a8f62", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTg3NzgyOTJhMDZmZmY4NGJhMzBkMmRmM2VhMDcwYzMwYjBhOGY2Mg==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "joern.rennecke@superh.com", "date": "2002-04-12T10:55:32Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2002-04-12T10:55:32Z"}, "message": "sh.c (broken_move): Constant 0.\n\n\t* sh.c (broken_move): Constant 0. / 1. load is OK if there is\n\tno r0 clobber.\n\nFrom-SVN: r52214", "tree": {"sha": "e9565315a8044232d6943b6463bdd9de18df2352", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9565315a8044232d6943b6463bdd9de18df2352"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/18778292a06fff84ba30d2df3ea070c30b0a8f62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18778292a06fff84ba30d2df3ea070c30b0a8f62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18778292a06fff84ba30d2df3ea070c30b0a8f62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18778292a06fff84ba30d2df3ea070c30b0a8f62/comments", "author": null, "committer": null, "parents": [{"sha": "4782bd5bee37845e7489a877239c59a569547e96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4782bd5bee37845e7489a877239c59a569547e96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4782bd5bee37845e7489a877239c59a569547e96"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "b62485ac028cf2db294b20e943b11bace5bf4d19", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18778292a06fff84ba30d2df3ea070c30b0a8f62/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18778292a06fff84ba30d2df3ea070c30b0a8f62/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=18778292a06fff84ba30d2df3ea070c30b0a8f62", "patch": "@@ -1,3 +1,8 @@\n+Fri Apr 12 10:51:38 2002  J\"orn Rennecke <joern.rennecke@superh.com>\n+\n+\t* sh.c (broken_move): Constant 0. / 1. load is OK if there is\n+\tno r0 clobber.\n+\n 2002-04-12  Andreas Schwab  <schwab@suse.de>\n \n \t* config/ia64/ia64.h (EXTRA_SPECS): Fix missing backslash."}, {"sha": "815d8dcff061ff039d0bb0b76f96d4643910be3b", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18778292a06fff84ba30d2df3ea070c30b0a8f62/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18778292a06fff84ba30d2df3ea070c30b0a8f62/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=18778292a06fff84ba30d2df3ea070c30b0a8f62", "patch": "@@ -2507,9 +2507,16 @@ broken_move (insn)\n \t\t&& GET_CODE (SET_SRC (pat)) == CONST_DOUBLE\n \t\t&& (fp_zero_operand (SET_SRC (pat))\n \t\t    || fp_one_operand (SET_SRC (pat)))\n-\t\t/* ??? If this is a -m4 or -m4-single compilation, we don't\n-\t\t   know the current setting of fpscr, so disable fldi.  */\n-\t\t&& (! TARGET_SH4 || TARGET_FMOVD)\n+\t\t/* ??? If this is a -m4 or -m4-single compilation, in general\n+\t\t   we don't know the current setting of fpscr, so disable fldi.\n+\t\t   There is an exception if this was a register-register move\n+\t\t   before reload - and hence it was ascertained that we have\n+\t\t   single precision setting - and in a post-reload optimization\n+\t\t   we changed this to do a constant load.  In that case\n+\t\t   we don't have an r0 clobber, hence we must use fldi.  */\n+\t\t&& (! TARGET_SH4 || TARGET_FMOVD\n+\t\t    || (GET_CODE (XEXP (XVECEXP (PATTERN (insn), 0, 2), 0))\n+\t\t\t== SCRATCH))\n \t\t&& GET_CODE (SET_DEST (pat)) == REG\n \t\t&& FP_REGISTER_P (REGNO (SET_DEST (pat))))\n \t  && (GET_CODE (SET_SRC (pat)) != CONST_INT"}]}