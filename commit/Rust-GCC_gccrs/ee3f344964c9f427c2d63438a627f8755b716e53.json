{"sha": "ee3f344964c9f427c2d63438a627f8755b716e53", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUzZjM0NDk2NGM5ZjQyN2MyZDYzNDM4YTYyN2Y4NzU1YjcxNmU1Mw==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2007-12-12T09:15:03Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2007-12-12T09:15:03Z"}, "message": "s390.c (s390_O_constraint_str): Limit the range for 'On' to -4G+1..-1.\n\n2007-12-12  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* config/s390/s390.c (s390_O_constraint_str): Limit the range\n\tfor 'On' to -4G+1..-1.\n\t* config/s390/constraints.md: Adjust comment accordingly.\n\n2007-12-12  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* gcc.target/s390/20071212-1.c: New testcase.\n\nFrom-SVN: r130787", "tree": {"sha": "a090d4114aac8d2473921064c1ad9e15cc3a093a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a090d4114aac8d2473921064c1ad9e15cc3a093a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee3f344964c9f427c2d63438a627f8755b716e53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee3f344964c9f427c2d63438a627f8755b716e53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee3f344964c9f427c2d63438a627f8755b716e53", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee3f344964c9f427c2d63438a627f8755b716e53/comments", "author": null, "committer": null, "parents": [{"sha": "675575f57aa49f751d373b93029fb3ac8ea2ea88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/675575f57aa49f751d373b93029fb3ac8ea2ea88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/675575f57aa49f751d373b93029fb3ac8ea2ea88"}], "stats": {"total": 28, "additions": 24, "deletions": 4}, "files": [{"sha": "cab09cbe997998dde3db5019b1a0c3eeca93d577", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee3f344964c9f427c2d63438a627f8755b716e53", "patch": "@@ -1,3 +1,9 @@\n+2007-12-12  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* config/s390/s390.c (s390_O_constraint_str): Limit the range\n+\tfor 'On' to -4G+1..-1.\n+\t* config/s390/constraints.md: Adjust comment accordingly.\n+\n 2007-12-11  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* config/rs6000/rs6000.c (rs6000_emit_prologue): Use frame_reg_rtx"}, {"sha": "92fd3254ca5ab3d52c1f7dcf858b14d4f95951ce", "filename": "gcc/config/s390/constraints.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Fconfig%2Fs390%2Fconstraints.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Fconfig%2Fs390%2Fconstraints.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fconstraints.md?ref=ee3f344964c9f427c2d63438a627f8755b716e53", "patch": "@@ -49,7 +49,7 @@\n ;;    O -- Multiple letter constraint followed by 1 parameter.\n ;;         s:  Signed extended immediate value (-2G .. 2G-1).\n ;;         p:  Positive extended immediate value (0 .. 4G-1).\n-;;         n:  Negative extended immediate value (-4G .. -1).\n+;;         n:  Negative extended immediate value (-4G+1 .. -1).\n ;;         These constraints do not accept any operand if the machine does\n ;;         not provide the extended-immediate facility.\n ;;    P -- Any integer constant that can be loaded without literal pool.\n@@ -337,7 +337,7 @@\n \n (define_constraint \"On\"\n   \"@internal\n-   Negative extended immediate value (-4G .. -1).\n+   Negative extended immediate value (-4G+1 .. -1).\n    This constraint will only match if the machine provides\n    the extended-immediate facility.\"\n   (and (match_code \"const_int\")"}, {"sha": "0b6d63bf01944a8a9232a9ada3e0f22126e77ade", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=ee3f344964c9f427c2d63438a627f8755b716e53", "patch": "@@ -2056,8 +2056,7 @@ s390_O_constraint_str (const char c, HOST_WIDE_INT value)\n \t|| s390_single_part (GEN_INT (value), DImode, SImode, 0) == 1;\n \n     case 'n':\n-      return value == -1\n-\t|| s390_single_part (GEN_INT (value), DImode, SImode, -1) == 1;\n+      return s390_single_part (GEN_INT (value - 1), DImode, SImode, -1) == 1;\n \n     default:\n       gcc_unreachable ();"}, {"sha": "85cd1e3d5b47b36a72df748f245a25932d4ff639", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ee3f344964c9f427c2d63438a627f8755b716e53", "patch": "@@ -1,3 +1,7 @@\n+2007-12-12  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* gcc.target/s390/20071212-1.c: New testcase.\n+\n 2007-12-11  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/34238"}, {"sha": "e5d05ad41af864f2c7883ef1598ce2251b640544", "filename": "gcc/testsuite/gcc.target/s390/20071212-1.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2F20071212-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3f344964c9f427c2d63438a627f8755b716e53/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2F20071212-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2F20071212-1.c?ref=ee3f344964c9f427c2d63438a627f8755b716e53", "patch": "@@ -0,0 +1,11 @@\n+/* This used to fail due to bug in the On constraint causing a slgfi\n+   to be emitted with an immediate not fitting into 32bit.  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -march=z9-109\" } */\n+\n+long\n+foo (long a)\n+{\n+  return a - (1ULL << 32);\n+}"}]}