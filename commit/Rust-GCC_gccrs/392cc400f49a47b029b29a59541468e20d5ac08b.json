{"sha": "392cc400f49a47b029b29a59541468e20d5ac08b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzkyY2M0MDBmNDlhNDdiMDI5YjI5YTU5NTQxNDY4ZTIwZDVhYzA4Yg==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2005-12-12T01:28:50Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2005-12-12T01:28:50Z"}, "message": "re PR target/25299 (Another ABI incompatibility with Apple's gcc)\n\n\tPR target/25299\n\t* config/rs6000/rs6000.c (rs6000_special_round_type_align): Increase\n\talignment to doubleword if the first field is a double array.\n\t* config/rs6000/linux64.h (TARGET_ALIGN_NATURAL): Define.\n\nFrom-SVN: r108393", "tree": {"sha": "f2719b842679a682a127c083311a8867c67b1104", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f2719b842679a682a127c083311a8867c67b1104"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/392cc400f49a47b029b29a59541468e20d5ac08b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/392cc400f49a47b029b29a59541468e20d5ac08b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/392cc400f49a47b029b29a59541468e20d5ac08b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/392cc400f49a47b029b29a59541468e20d5ac08b/comments", "author": null, "committer": null, "parents": [{"sha": "e78ac651b0ea6070ecb4f16eaf55568faf3e7bbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e78ac651b0ea6070ecb4f16eaf55568faf3e7bbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e78ac651b0ea6070ecb4f16eaf55568faf3e7bbb"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "1e602a212a4ae26328b15d03604fe838fc2ab92f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/392cc400f49a47b029b29a59541468e20d5ac08b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/392cc400f49a47b029b29a59541468e20d5ac08b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=392cc400f49a47b029b29a59541468e20d5ac08b", "patch": "@@ -1,3 +1,10 @@\n+2005-12-12  Alan Modra  <amodra@bigpond.net.au>\n+\n+\tPR target/25299\n+\t* config/rs6000/rs6000.c (rs6000_special_round_type_align): Increase\n+\talignment to doubleword if the first field is a double array.\n+\t* config/rs6000/linux64.h (TARGET_ALIGN_NATURAL): Define.\n+\n 2005-12-11  Daniel Berlin  <dberlin@dberlin.org>\n \n \t* tree-ssa-structalias.c (process_constraint): Remove code to"}, {"sha": "bc615e8c96d16ecb7f43f87967612ad378e22cea", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/392cc400f49a47b029b29a59541468e20d5ac08b/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/392cc400f49a47b029b29a59541468e20d5ac08b/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=392cc400f49a47b029b29a59541468e20d5ac08b", "patch": "@@ -236,6 +236,12 @@ extern int dot_symbols;\n    ? rs6000_special_round_type_align (STRUCT, COMPUTED, SPECIFIED)\t\\\n    : MAX ((COMPUTED), (SPECIFIED)))\n \n+/* Use the default for compiling target libs.  */\n+#ifdef IN_TARGET_LIBS\n+#undef TARGET_ALIGN_NATURAL\n+#define TARGET_ALIGN_NATURAL 1\n+#endif\n+\n /* Indicate that jump tables go in the text section.  */\n #undef  JUMP_TABLES_IN_TEXT_SECTION\n #define JUMP_TABLES_IN_TEXT_SECTION TARGET_64BIT"}, {"sha": "9f547dab057759314f189416e883f80cfa8292c4", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/392cc400f49a47b029b29a59541468e20d5ac08b/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/392cc400f49a47b029b29a59541468e20d5ac08b/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=392cc400f49a47b029b29a59541468e20d5ac08b", "patch": "@@ -2513,7 +2513,10 @@ rs6000_special_round_type_align (tree type, int computed, int specified)\n   while (field != NULL && TREE_CODE (field) != FIELD_DECL)\n     field = TREE_CHAIN (field);\n \n-  if (field == NULL || field == type || DECL_MODE (field) != DFmode)\n+  if (field == NULL || field == type\n+      || TYPE_MODE (TREE_CODE (TREE_TYPE (field)) == ARRAY_TYPE\n+\t\t    ? get_inner_array_type (field)\n+\t\t    : TREE_TYPE (field)) != DFmode)\n     return MAX (computed, specified);\n \n   return MAX (MAX (computed, specified), 64);"}]}