{"sha": "48a793425564864709adb3f51c7d503a865610c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhhNzkzNDI1NTY0ODY0NzA5YWRiM2Y1MWM3ZDUwM2E4NjU2MTBjNQ==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2003-04-07T05:34:50Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2003-04-07T05:34:50Z"}, "message": "mklibgcc.in: Use a here document to avoid running afoul of shells that generate control-A...\n\n* mklibgcc.in: Use a here document to avoid running afoul of\nshells that generate control-A from \"echo \\1\".\n\nFrom-SVN: r65321", "tree": {"sha": "0361b2af41a7132d6b83861c4332b0bf13b04977", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0361b2af41a7132d6b83861c4332b0bf13b04977"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48a793425564864709adb3f51c7d503a865610c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48a793425564864709adb3f51c7d503a865610c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48a793425564864709adb3f51c7d503a865610c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48a793425564864709adb3f51c7d503a865610c5/comments", "author": null, "committer": null, "parents": [{"sha": "d2a6f3c03ee1da2110de65370db171f1548d6d66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2a6f3c03ee1da2110de65370db171f1548d6d66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2a6f3c03ee1da2110de65370db171f1548d6d66"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "0b7d329511989ca1eab8719a2ee81e6bd1bd2dba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a793425564864709adb3f51c7d503a865610c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a793425564864709adb3f51c7d503a865610c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=48a793425564864709adb3f51c7d503a865610c5", "patch": "@@ -1,3 +1,8 @@\n+2003-04-06  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* mklibgcc.in: Use a here document to avoid running afoul of\n+\tshells that generate control-A from \"echo \\1\".\n+\n 2003-04-06  Aldy Hernandez  <aldyh@redhat.com>\n \n         * doc/invoke.texi (RS/6000 and PowerPC Options): Document -mspe"}, {"sha": "1abb3a05e5e9632d88a67b41b7e2014c4ee20ac9", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48a793425564864709adb3f51c7d503a865610c5/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48a793425564864709adb3f51c7d503a865610c5/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=48a793425564864709adb3f51c7d503a865610c5", "patch": "@@ -311,13 +311,20 @@ for ml in $MULTILIBS; do\n   if [ \"$SHLIB_LINK\" -a \"$SHLIB_MKMAP\" ]; then\n     mapfile=\"libgcc/${dir}/libgcc.map\"\n     tmpmapfile=\"libgcc/${dir}/tmp-libgcc.map\"\n-    echo \"\"\n-    echo \"${mapfile}: $SHLIB_MKMAP $SHLIB_MAPFILES $libgcc_sh_objs\"\n-    echo '\t{ $(NM_FOR_TARGET)'\" $SHLIB_NM_FLAGS $libgcc_sh_objs; echo %%; \\\\\"\n-    echo \"\t  cat $SHLIB_MAPFILES | sed -e \"'\"/^[ \t]*#/d\" -e '\\''s/^%\\(if\\|else\\|elif\\|endif\\|define\\)/#\\1/'\\'\" \\\\\"\n-    echo \"\t  | $gcc_compile $flags -E -xassembler-with-cpp -; \\\\\"\n-    echo '\t} | $(AWK)'\" -f $SHLIB_MKMAP $SHLIB_MKMAP_OPTS > ${tmpmapfile}\"\n-    echo '\tmv '\"$tmpmapfile\"' $@'\n+    # This uses a here document instead of echos because some shells\n+    # will convert the \\1 in the second sed command to a control-A.\n+    # The behavior of here documents is more predictable.\n+    cat <<EOF\n+\n+${mapfile}: $SHLIB_MKMAP $SHLIB_MAPFILES $libgcc_sh_objs\n+\t{ \\$(NM_FOR_TARGET) $SHLIB_NM_FLAGS $libgcc_sh_objs; echo %%; \\\\\n+\t  cat $SHLIB_MAPFILES \\\\\n+\t    | sed -e '/^[   ]*#/d' \\\\\n+\t          -e 's/^%\\(if\\|else\\|elif\\|endif\\|define\\)/#\\1/' \\\\\n+\t    | $gcc_compile $flags -E -xassembler-with-cpp -; \\\\\n+\t} | \\$(AWK) -f $SHLIB_MKMAP $SHLIB_MKMAP_OPTS > ${tmpmapfile}\n+\tmv '$tmpmapfile' \\$@\n+EOF\n   fi\n   shlib_deps=\"$shlib_deps $mapfile\"\n "}]}