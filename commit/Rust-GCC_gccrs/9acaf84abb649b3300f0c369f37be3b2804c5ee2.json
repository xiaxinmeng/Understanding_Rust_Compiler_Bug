{"sha": "9acaf84abb649b3300f0c369f37be3b2804c5ee2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWFjYWY4NGFiYjY0OWIzMzAwZjBjMzY5ZjM3YmUzYjI4MDRjNWVlMg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-05-04T06:00:13Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-05-04T06:00:13Z"}, "message": "cp-tree.h (language_function): Change the type of x_local_names to VEC.\n\n\t* cp-tree.h (language_function): Change the type of\n\tx_local_names to VEC.\n\t* decl.c (push_local_name): Adjust uses of local_names.\n\nFrom-SVN: r99209", "tree": {"sha": "d0093f431b3c57f32a3455c9a6b9c7e260d1c27f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0093f431b3c57f32a3455c9a6b9c7e260d1c27f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9acaf84abb649b3300f0c369f37be3b2804c5ee2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9acaf84abb649b3300f0c369f37be3b2804c5ee2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9acaf84abb649b3300f0c369f37be3b2804c5ee2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9acaf84abb649b3300f0c369f37be3b2804c5ee2/comments", "author": null, "committer": null, "parents": [{"sha": "78da4d2e8476b54273d1d50a4d739d4f7d31732c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78da4d2e8476b54273d1d50a4d739d4f7d31732c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78da4d2e8476b54273d1d50a4d739d4f7d31732c"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "39d86755c85ea326c113b4ce0fcd4c18e750acb4", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9acaf84abb649b3300f0c369f37be3b2804c5ee2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9acaf84abb649b3300f0c369f37be3b2804c5ee2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9acaf84abb649b3300f0c369f37be3b2804c5ee2", "patch": "@@ -1,3 +1,9 @@\n+2005-05-04  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* cp-tree.h (language_function): Change the type of\n+\tx_local_names to VEC.\n+\t* decl.c (push_local_name): Adjust uses of local_names.\n+\n 2005-05-03  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* friend.c, lex.c, mangle.c, repo.c: Update copyright."}, {"sha": "b5eab932f2068b7459935a89995b5f8e187f72ae", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9acaf84abb649b3300f0c369f37be3b2804c5ee2/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9acaf84abb649b3300f0c369f37be3b2804c5ee2/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=9acaf84abb649b3300f0c369f37be3b2804c5ee2", "patch": "@@ -750,7 +750,7 @@ struct language_function GTY(())\n   struct named_label_use_list *x_named_label_uses;\n   struct named_label_list *x_named_labels;\n   struct cp_binding_level *bindings;\n-  varray_type x_local_names;\n+  VEC(tree,gc) *x_local_names;\n };\n \n /* The current C++-specific per-function global variables.  */"}, {"sha": "eb3bf4dfcf1e97245c400e6fe393ab016b005cca", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9acaf84abb649b3300f0c369f37be3b2804c5ee2/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9acaf84abb649b3300f0c369f37be3b2804c5ee2/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=9acaf84abb649b3300f0c369f37be3b2804c5ee2", "patch": "@@ -832,15 +832,13 @@ push_local_name (tree decl)\n   tree t, name;\n \n   timevar_push (TV_NAME_LOOKUP);\n-  if (!local_names)\n-    VARRAY_TREE_INIT (local_names, 8, \"local_names\");\n \n   name = DECL_NAME (decl);\n \n-  nelts = VARRAY_ACTIVE_SIZE (local_names);\n+  nelts = VEC_length (tree, local_names);\n   for (i = 0; i < nelts; i++)\n     {\n-      t = VARRAY_TREE (local_names, i);\n+      t = VEC_index (tree, local_names, i);\n       if (DECL_NAME (t) == name)\n \t{\n \t  if (!DECL_LANG_SPECIFIC (decl))\n@@ -851,13 +849,13 @@ push_local_name (tree decl)\n \t  else\n \t    DECL_DISCRIMINATOR (decl) = 1;\n \n-\t  VARRAY_TREE (local_names, i) = decl;\n+\t  VEC_replace (tree, local_names, i, decl);\n \t  timevar_pop (TV_NAME_LOOKUP);\n \t  return;\n \t}\n     }\n \n-  VARRAY_PUSH_TREE (local_names, decl);\n+  VEC_safe_push (tree, gc, local_names, decl);\n   timevar_pop (TV_NAME_LOOKUP);\n }\n \f"}]}