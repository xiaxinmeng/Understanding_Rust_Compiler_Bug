{"sha": "13393c8ae70d36e71a02f61567445dc22416e3ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMzOTNjOGFlNzBkMzZlNzFhMDJmNjE1Njc0NDVkYzIyNDE2ZTNlYw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "2000-05-03T20:04:31Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2000-05-03T20:04:31Z"}, "message": "Fix for ia64-linux misoptimization.\n\n\t* fold-const.c (extract_muldiv, case MAX_EXPR): Don't allow signedness\n\tchange.\n\nFrom-SVN: r33643", "tree": {"sha": "98f5994c9c6410ae2b14149cef3af251e632acad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98f5994c9c6410ae2b14149cef3af251e632acad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13393c8ae70d36e71a02f61567445dc22416e3ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13393c8ae70d36e71a02f61567445dc22416e3ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13393c8ae70d36e71a02f61567445dc22416e3ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13393c8ae70d36e71a02f61567445dc22416e3ec/comments", "author": null, "committer": null, "parents": [{"sha": "8ae7150163f272acbb54b8204e2c7ff17a756417", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ae7150163f272acbb54b8204e2c7ff17a756417", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ae7150163f272acbb54b8204e2c7ff17a756417"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "d891f18dfade06187852d39de6cea4fa6ab68967", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13393c8ae70d36e71a02f61567445dc22416e3ec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13393c8ae70d36e71a02f61567445dc22416e3ec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=13393c8ae70d36e71a02f61567445dc22416e3ec", "patch": "@@ -1,3 +1,8 @@\n+Wed May  3 12:55:46 2000  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* fold-const.c (extract_muldiv, case MAX_EXPR): Don't allow signedness\n+\tchange.\n+\n 2000-05-03  Greg McGary  <gkm@gnu.org>\n \n \t* tree.h (tree_common): Add bounded_flag member.  Remove"}, {"sha": "95682876252a13914ebc80cb64e6f37a9456f470", "filename": "gcc/fold-const.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13393c8ae70d36e71a02f61567445dc22416e3ec/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13393c8ae70d36e71a02f61567445dc22416e3ec/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=13393c8ae70d36e71a02f61567445dc22416e3ec", "patch": "@@ -4402,6 +4402,11 @@ extract_muldiv (t, c, code, wide_type)\n       break;\n \n     case MIN_EXPR:  case MAX_EXPR:\n+      /* If widening the type changes the signedness, then we can't perform\n+\t this optimization as that changes the result.  */\n+      if (ctype != type && TREE_UNSIGNED (ctype) != TREE_UNSIGNED (type))\n+\tbreak;\n+\n       /* MIN (a, b) / 5 -> MIN (a / 5, b / 5)  */\n       if ((t1 = extract_muldiv (op0, c, code, wide_type)) != 0\n \t  && (t2 = extract_muldiv (op1, c, code, wide_type)) != 0)"}]}