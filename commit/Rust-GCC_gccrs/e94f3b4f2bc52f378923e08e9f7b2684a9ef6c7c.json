{"sha": "e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk0ZjNiNGYyYmM1MmYzNzg5MjNlMDhlOWY3YjI2ODRhOWVmNmM3Yw==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2004-07-16T00:32:26Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2004-07-16T00:32:26Z"}, "message": "fortran-torture.exp (fortran-torture): Don't test compile tests with fulllist of options.\n\n* lib/fortran-torture.exp (fortran-torture): Don't test compile\ntests with fulllist of options.\n* lib/gfortran-dg.exp (gfortran-dg-runtest): Only test with all\nof TORTURE_OPTIONS if test contains 'dg-do run'.\n\nFrom-SVN: r84792", "tree": {"sha": "0caede859daafa3ef079e9bd49843a8193a577eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0caede859daafa3ef079e9bd49843a8193a577eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a916927fb5f966bf29dd99e44e195c7d0b3c028b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a916927fb5f966bf29dd99e44e195c7d0b3c028b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a916927fb5f966bf29dd99e44e195c7d0b3c028b"}], "stats": {"total": 36, "additions": 33, "deletions": 3}, "files": [{"sha": "5269f5d6e84e42a932eb1c876d2a1ed063b76cba", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c", "patch": "@@ -1,3 +1,10 @@\n+2004-07-16  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* lib/fortran-torture.exp (fortran-torture): Don't test compile\n+\ttests with full\tlist of options.\n+\t* lib/gfortran-dg.exp (gfortran-dg-runtest): Only test with all\n+\tof TORTURE_OPTIONS if test contains 'dg-do run'.\n+\n 2004-07-16  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR rtl-optimization/16536"}, {"sha": "c7ecf0e0e683ef53d7c0ba904c7ae2f67bbac7b1", "filename": "gcc/testsuite/lib/fortran-torture.exp", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp?ref=e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c", "patch": "@@ -300,7 +300,6 @@ proc search_for_re { file pattern } {\n proc fortran-torture { args } {\n     global srcdir subdir\n     global compiler_conditional_xfail_data\n-    global TORTURE_OPTIONS\n \n     set src [lindex $args 0];\n     if { [llength $args] > 1 } {\n@@ -325,7 +324,7 @@ proc fortran-torture { args } {\n     }\n    \n     # loop through all the options\n-    set option_list $TORTURE_OPTIONS\n+    set option_list [list { \"-O\" } ]\n     foreach option $option_list {\n \n \t# torture_compile_xfail is set by the .x script (if present)"}, {"sha": "2387403030b1f0af5ba25d119adfc3ee5a3c7590", "filename": "gcc/testsuite/lib/gfortran-dg.exp", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c/gcc%2Ftestsuite%2Flib%2Fgfortran-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c/gcc%2Ftestsuite%2Flib%2Fgfortran-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgfortran-dg.exp?ref=e94f3b4f2bc52f378923e08e9f7b2684a9ef6c7c", "patch": "@@ -43,5 +43,29 @@ proc gfortran-dg-prune { system text } {\n # Modified dg-runtest that can cycle through a list of optimization options\n # as c-torture does.\n proc gfortran-dg-runtest { testcases default-extra-flags } {\n-    return [gcc-dg-runtest $testcases ${default-extra-flags}]\n+    global runtests\n+    global TORTURE_OPTIONS\n+\n+    foreach test $testcases {\n+\t# If we're only testing specific files and this isn't one of\n+\t# them, skip it.\n+\tif ![runtest_file_p $runtests $test] {\n+\t    continue\n+        }\n+\n+\t# look if this is dg-do-run test, in which case\n+\t# we cycle through the option list, otherwise we don't\n+\tif [expr [search_for $test \"dg-do run\"]] {\n+\t    set option_list $TORTURE_OPTIONS\t\t\t         \n+\t} else {\n+\t    set option_list [list { -O } ]\n+\t}\n+\n+\tset nshort [file tail [file dirname $test]]/[file tail $test]\n+\n+\tforeach flags $option_list {\n+\t    verbose \"Testing $nshort, $flags\" 1\n+\t    dg-test $test $flags ${default-extra-flags}\n+\t}\n+    }\n }"}]}