{"sha": "b4558b577c353fad6143feb814c54d8e99931a7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjQ1NThiNTc3YzM1M2ZhZDYxNDNmZWI4MTRjNTRkOGU5OTkzMWE3Yg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-10-04T19:37:42Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-10-04T19:37:42Z"}, "message": "tlink.c (scan_linker_output): Recognize errors from irix 6.2 linker.\n\n\t* tlink.c (scan_linker_output): Recognize errors from irix 6.2\n\tlinker.  Recognize mangled names in quotes.\n\nCo-Authored-By: Scott Snyder <snyder@fnal.gov>\n\nFrom-SVN: r22823", "tree": {"sha": "cd6aa92892438fad5ff259b9876132f5c870b9ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd6aa92892438fad5ff259b9876132f5c870b9ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b4558b577c353fad6143feb814c54d8e99931a7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4558b577c353fad6143feb814c54d8e99931a7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4558b577c353fad6143feb814c54d8e99931a7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4558b577c353fad6143feb814c54d8e99931a7b/comments", "author": null, "committer": null, "parents": [{"sha": "82872b5cde0bff99a8deaf5b7423e6faf814f1e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82872b5cde0bff99a8deaf5b7423e6faf814f1e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82872b5cde0bff99a8deaf5b7423e6faf814f1e2"}], "stats": {"total": 35, "additions": 22, "deletions": 13}, "files": [{"sha": "8b04e882d092464d2805a9476f4671f3c1bc4410", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b4558b577c353fad6143feb814c54d8e99931a7b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b4558b577c353fad6143feb814c54d8e99931a7b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b4558b577c353fad6143feb814c54d8e99931a7b", "patch": "@@ -1,3 +1,9 @@\n+Sun Oct  4 18:33:24 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\t\t\t  scott snyder  <snyder@d0sgif.fnal.gov>\n+\n+\t* tlink.c (scan_linker_output): Recognize errors from irix 6.2\n+\tlinker.  Recognize mangled names in quotes.\n+\n Sun Oct  4 02:58:20 1998  Jakub Jelinek  <jj@sunsite.ms.mff.cuni.cz>\n \n         * config/sparc/sparc.md (ashldi3+1): Name it ashldi3_sp64."}, {"sha": "a4c5b5311cdabbbb42805df909286017d0912784", "filename": "gcc/tlink.c", "status": "modified", "additions": 16, "deletions": 13, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b4558b577c353fad6143feb814c54d8e99931a7b/gcc%2Ftlink.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b4558b577c353fad6143feb814c54d8e99931a7b/gcc%2Ftlink.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftlink.c?ref=b4558b577c353fad6143feb814c54d8e99931a7b", "patch": "@@ -550,26 +550,29 @@ scan_linker_output (fname)\n       sym = symbol_hash_lookup (p, false);\n \n       if (! sym && ! end)\n-\t/* Try a mangled name in `quotes'.  */\n+\t/* Try a mangled name in quotes.  */\n \t{\n+\t  char *oldq = q+1;\n \t  demangled *dem = 0;\n-\t  p = index (q+1, '`');\n \t  q = 0;\n \n-#define MUL \"multiple definition of \"\n-#define UND \"undefined reference to \"\n+\t  /* First try `GNU style'.  */\n+\t  p = index (oldq, '`');\n+\t  if (p)\n+\t    p++, q = index (p, '\\'');\n+\t  /* Then try \"double quotes\".  */\n+\t  else if (p = index (oldq, '\"'), p)\n+\t    p++, q = index (p, '\"');\n \n-\t  if (p && (p - line > sizeof (MUL)))\n+\t  if (q)\n \t    {\n-\t      char *beg = p - sizeof (MUL) + 1;\n-\t      *p = 0;\n-\t      if (!strcmp (beg, MUL) || !strcmp (beg, UND))\n-\t\tp++, q = index (p, '\\'');\n+\t      *q = 0;\n+\t      dem = demangled_hash_lookup (p, false);\n+\t      if (dem)\n+\t\tsym = symbol_hash_lookup (dem->mangled, false);\n+\t      else\n+\t\tsym = symbol_hash_lookup (p, false);\n \t    }\n-\t  if (q)\n-\t    *q = 0, dem = demangled_hash_lookup (p, false);\n-\t  if (dem)\n-\t    sym = symbol_hash_lookup (dem->mangled, false);\n \t}\n \n       if (sym && sym->tweaked)"}]}