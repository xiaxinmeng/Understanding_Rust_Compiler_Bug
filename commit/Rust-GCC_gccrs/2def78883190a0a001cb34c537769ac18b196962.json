{"sha": "2def78883190a0a001cb34c537769ac18b196962", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRlZjc4ODgzMTkwYTBhMDAxY2IzNGM1Mzc3NjlhYzE4YjE5Njk2Mg==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1993-04-16T20:37:41Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1993-04-16T20:37:41Z"}, "message": "Allow iris to have its version of the trampoline code.\n\nFrom-SVN: r4162", "tree": {"sha": "60b7012eeda3d9e98d8cb1f6a427fd094d517fd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60b7012eeda3d9e98d8cb1f6a427fd094d517fd4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2def78883190a0a001cb34c537769ac18b196962", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2def78883190a0a001cb34c537769ac18b196962", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2def78883190a0a001cb34c537769ac18b196962", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2def78883190a0a001cb34c537769ac18b196962/comments", "author": null, "committer": null, "parents": [{"sha": "8a18e16fa65b3e63064eeaaa0481e73942a6972a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a18e16fa65b3e63064eeaaa0481e73942a6972a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a18e16fa65b3e63064eeaaa0481e73942a6972a"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "079da38d2b8b57e51a35e1300c5b37d69c475dc4", "filename": "gcc/config/mips/iris3.h", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2def78883190a0a001cb34c537769ac18b196962/gcc%2Fconfig%2Fmips%2Firis3.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2def78883190a0a001cb34c537769ac18b196962/gcc%2Fconfig%2Fmips%2Firis3.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis3.h?ref=2def78883190a0a001cb34c537769ac18b196962", "patch": "@@ -96,4 +96,35 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n /* Plain char is unsigned in the SGI compiler.  */\n #define DEFAULT_SIGNED_CHAR 0\n \n+\n+/* A C statement to initialize the variable parts of a trampoline. \n+   ADDR is an RTX for the address of the trampoline; FNADDR is an\n+   RTX for the address of the nested function; STATIC_CHAIN is an\n+   RTX for the static chain value that should be passed to the\n+   function when it is called.\n+\n+   Silicon Graphics machines are supposed to not have a mprotect\n+   function to enable execute protection, but the stack already\n+   has execute protection turned on.  Because the MIPS chips have\n+   no method to flush the icache without a system call, this can lose\n+   if the same address is used for multiple trampolines.  */\n+\n+#define INITIALIZE_TRAMPOLINE(ADDR, FUNC, CHAIN)\t\t\t    \\\n+{\t\t\t\t\t\t\t\t\t    \\\n+  rtx addr = ADDR;\t\t\t\t\t\t\t    \\\n+  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (addr, 28)), FUNC);   \\\n+  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (addr, 32)), CHAIN);  \\\n+}\n+\n+\n+/* Attempt to turn on access permissions for the stack.  */\n+\n+#define TRANSFER_FROM_TRAMPOLINE\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+void\t\t\t\t\t\t\t\t\t\\\n+__enable_execute_stack (addr)\t\t\t\t\t\t\\\n+     char *addr;\t\t\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+}\n+\n #include \"mips/mips.h\""}]}