{"sha": "5d304e47bc76ca92c3c9ae178a183f411f051fc3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQzMDRlNDdiYzc2Y2E5MmMzYzlhZTE3OGExODNmNDExZjA1MWZjMw==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2011-03-09T16:27:15Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2011-03-09T16:27:15Z"}, "message": "s390-protos.h (s390_label_align): New prototype.\n\n2011-03-09  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* config/s390/s390-protos.h (s390_label_align): New prototype.\n\t* config/s390/s390.c (s390_label_align): New function.\n\t* config/s390/s390.h (LABEL_ALIGN): New target macro definition.\n\nFrom-SVN: r170821", "tree": {"sha": "5a1189ff6ceb006e0e8f15ce88cec1110ea73702", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a1189ff6ceb006e0e8f15ce88cec1110ea73702"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d304e47bc76ca92c3c9ae178a183f411f051fc3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d304e47bc76ca92c3c9ae178a183f411f051fc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d304e47bc76ca92c3c9ae178a183f411f051fc3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d304e47bc76ca92c3c9ae178a183f411f051fc3/comments", "author": null, "committer": null, "parents": [{"sha": "9b4166b297a6d240e02c165b1890b42b21cc380f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b4166b297a6d240e02c165b1890b42b21cc380f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b4166b297a6d240e02c165b1890b42b21cc380f"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "147e7ef856cf5efe3669b0c62d13dfeb28b03870", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5d304e47bc76ca92c3c9ae178a183f411f051fc3", "patch": "@@ -1,3 +1,9 @@\n+2011-03-09  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* config/s390/s390-protos.h (s390_label_align): New prototype.\n+\t* config/s390/s390.c (s390_label_align): New function.\n+\t* config/s390/s390.h (LABEL_ALIGN): New target macro definition.\n+\n 2011-03-08  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/47755"}, {"sha": "1df176e2346d458bec5f4d23415fb9b5494b4d0a", "filename": "gcc/config/s390/s390-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2Fconfig%2Fs390%2Fs390-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2Fconfig%2Fs390%2Fs390-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390-protos.h?ref=5d304e47bc76ca92c3c9ae178a183f411f051fc3", "patch": "@@ -101,6 +101,7 @@ extern void s390_split_access_reg (rtx, rtx *, rtx *);\n extern void print_operand_address (FILE *, rtx);\n extern void print_operand (FILE *, rtx, int);\n extern void s390_output_pool_entry (rtx, enum machine_mode, unsigned int);\n+extern int s390_label_align (rtx);\n extern int s390_agen_dep_p (rtx, rtx);\n extern rtx s390_load_got (void);\n extern rtx s390_get_thread_pointer (void);"}, {"sha": "54632ddf9d64ed088c8ea3bb17714ed083fb34e1", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=5d304e47bc76ca92c3c9ae178a183f411f051fc3", "patch": "@@ -384,6 +384,32 @@ struct GTY(()) machine_function\n    bytes on a z10 (or higher) CPU.  */\n #define PREDICT_DISTANCE (TARGET_Z10 ? 384 : 2048)\n \n+/* Return the alignment for LABEL.  We default to the -falign-labels\n+   value except for the literal pool base label.  */\n+int\n+s390_label_align (rtx label)\n+{\n+  rtx prev_insn = prev_active_insn (label);\n+\n+  if (prev_insn == NULL_RTX)\n+    goto old;\n+\n+  prev_insn = single_set (prev_insn);\n+\n+  if (prev_insn == NULL_RTX)\n+    goto old;\n+\n+  prev_insn = SET_SRC (prev_insn);\n+\n+  /* Don't align literal pool base labels.  */\n+  if (GET_CODE (prev_insn) == UNSPEC\n+      && XINT (prev_insn, 1) == UNSPEC_MAIN_BASE)\n+    return 0;\n+\n+ old:\n+  return align_labels_log;\n+}\n+\n static enum machine_mode\n s390_libgcc_cmp_return_mode (void)\n {"}, {"sha": "ec395e2952adb71dbe5e7117b8878a6e0db17a13", "filename": "gcc/config/s390/s390.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2Fconfig%2Fs390%2Fs390.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d304e47bc76ca92c3c9ae178a183f411f051fc3/gcc%2Fconfig%2Fs390%2Fs390.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.h?ref=5d304e47bc76ca92c3c9ae178a183f411f051fc3", "patch": "@@ -870,6 +870,9 @@ do {\t\t\t\t\t\t\t\t\t\\\n /* The LOCAL_LABEL_PREFIX variable is used by dbxelf.h.  */\n #define LOCAL_LABEL_PREFIX \".\"\n \n+#define LABEL_ALIGN(LABEL) \\\n+  s390_label_align (LABEL)\n+\n /* How to refer to registers in assembler output.  This sequence is\n    indexed by compiler's hard-register-number (see above).  */\n #define REGISTER_NAMES\t\t\t\t\t\t\t\\"}]}