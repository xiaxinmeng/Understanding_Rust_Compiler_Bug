{"sha": "f0747897b654c6b9937a82de4a78542646858ff2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjA3NDc4OTdiNjU0YzZiOTkzN2E4MmRlNGE3ODU0MjY0Njg1OGZmMg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-11-19T11:25:38Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-11-19T11:25:38Z"}, "message": "s-tposen.adb (Lock_Entry): Remove the code for raising Program_Error for Detect_Blocking which is...\n\n\t* s-tposen.adb (Lock_Entry): Remove the code for raising Program_Error\n\tfor Detect_Blocking which is redundant with the check done within the\n\tprocedure Protected_Single_Entry_Call.\n\t(Lock_Read_Only_Entry): Remove the code for raising Program_Error for\n\tDetect_Blocking which is redundant with the check done within the\n\tprocedure Protected_Single_Entry_Call.\n\nFrom-SVN: r90913", "tree": {"sha": "2f2db91affa9415979e8aab44e7b82234142528b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f2db91affa9415979e8aab44e7b82234142528b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f0747897b654c6b9937a82de4a78542646858ff2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0747897b654c6b9937a82de4a78542646858ff2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0747897b654c6b9937a82de4a78542646858ff2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0747897b654c6b9937a82de4a78542646858ff2/comments", "author": null, "committer": null, "parents": [{"sha": "5c2d8276da3cfaacdefb54bdd54644cc72fe7ab9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c2d8276da3cfaacdefb54bdd54644cc72fe7ab9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c2d8276da3cfaacdefb54bdd54644cc72fe7ab9"}], "stats": {"total": 42, "additions": 14, "deletions": 28}, "files": [{"sha": "7cbf84e6ded98421a7b357ec9d0bd454bbcd2b04", "filename": "gcc/ada/s-tposen.adb", "status": "modified", "additions": 14, "deletions": 28, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0747897b654c6b9937a82de4a78542646858ff2/gcc%2Fada%2Fs-tposen.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0747897b654c6b9937a82de4a78542646858ff2/gcc%2Fada%2Fs-tposen.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-tposen.adb?ref=f0747897b654c6b9937a82de4a78542646858ff2", "patch": "@@ -350,25 +350,18 @@ package body System.Tasking.Protected_Objects.Single_Entry is\n       Ceiling_Violation : Boolean;\n \n    begin\n-      --  If pragma Detect_Blocking is active then Program_Error must\n-      --  be raised if this potentially blocking operation is called from\n-      --  a protected action, and the protected object nesting level\n-      --  must be increased.\n+      --  If pragma Detect_Blocking is active then the protected object\n+      --  nesting level must be increased.\n \n       if Detect_Blocking then\n          declare\n             Self_Id : constant Task_Id := STPO.Self;\n          begin\n-            if Self_Id.Common.Protected_Action_Nesting > 0  then\n-               Ada.Exceptions.Raise_Exception\n-                 (Program_Error'Identity, \"potentially blocking operation\");\n-            else\n-               --  We are entering in a protected action, so that we\n-               --  increase the protected object nesting level.\n-\n-               Self_Id.Common.Protected_Action_Nesting :=\n-                 Self_Id.Common.Protected_Action_Nesting + 1;\n-            end if;\n+            --  We are entering in a protected action, so that we\n+            --  increase the protected object nesting level.\n+\n+            Self_Id.Common.Protected_Action_Nesting :=\n+              Self_Id.Common.Protected_Action_Nesting + 1;\n          end;\n       end if;\n \n@@ -390,25 +383,18 @@ package body System.Tasking.Protected_Objects.Single_Entry is\n       Ceiling_Violation : Boolean;\n \n    begin\n-      --  If pragma Detect_Blocking is active then Program_Error must be\n-      --  raised if this potentially blocking operation is called from a\n-      --  protected action, and the protected object nesting level must\n-      --  be increased.\n+      --  If pragma Detect_Blocking is active then the protected object\n+      --  nesting level must be increased.\n \n       if Detect_Blocking then\n          declare\n             Self_Id : constant Task_Id := STPO.Self;\n          begin\n-            if Self_Id.Common.Protected_Action_Nesting > 0  then\n-               Ada.Exceptions.Raise_Exception\n-                 (Program_Error'Identity, \"potentially blocking operation\");\n-            else\n-               --  We are entering in a protected action, so that we\n-               --  increase the protected object nesting level.\n-\n-               Self_Id.Common.Protected_Action_Nesting :=\n-                 Self_Id.Common.Protected_Action_Nesting + 1;\n-            end if;\n+            --  We are entering in a protected action, so that we\n+            --  increase the protected object nesting level.\n+\n+            Self_Id.Common.Protected_Action_Nesting :=\n+              Self_Id.Common.Protected_Action_Nesting + 1;\n          end;\n       end if;\n "}]}