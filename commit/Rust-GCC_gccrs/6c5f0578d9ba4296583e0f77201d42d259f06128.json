{"sha": "6c5f0578d9ba4296583e0f77201d42d259f06128", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmM1ZjA1NzhkOWJhNDI5NjU4M2UwZjc3MjAxZDQyZDI1OWYwNjEyOA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-10-08T11:16:51Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-10-08T11:16:51Z"}, "message": "[multiple changes]\n\n2007-10-08  Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/std/utility (identity, move, forward): Move to...\n\t* include/bits/stl_move.h: ... here.\n\t* include/Makefile.am: Add.\n\t* include/bits/stl_algobase.h: Include the latter.\n\t* include/Makefile.in: Regenerate.\n\t* testsuite/20_util/pair/moveable.cc: Remove dg-require-rvalref.\n\n2007-10-08  Chris Jefferson  <chris@bubblescope.net>\n\t    Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/bits/stl_pair.h (pair<>:pair(pair&&),\n\tpair<>::operator=(pair&&)): Add.\n\nFrom-SVN: r129123", "tree": {"sha": "5578085e8f7dedc9a64ed2c3724e977ca1d841b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5578085e8f7dedc9a64ed2c3724e977ca1d841b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c5f0578d9ba4296583e0f77201d42d259f06128", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c5f0578d9ba4296583e0f77201d42d259f06128", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c5f0578d9ba4296583e0f77201d42d259f06128", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c5f0578d9ba4296583e0f77201d42d259f06128/comments", "author": null, "committer": null, "parents": [{"sha": "f019adc11693d991cd68e086c04e124fab610c4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f019adc11693d991cd68e086c04e124fab610c4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f019adc11693d991cd68e086c04e124fab610c4c"}], "stats": {"total": 63, "additions": 37, "deletions": 26}, "files": [{"sha": "9b41330ea1f41fae55f476582e54d357fa4cc0fa", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=6c5f0578d9ba4296583e0f77201d42d259f06128", "patch": "@@ -1,3 +1,18 @@\n+2007-10-08  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/std/utility (identity, move, forward): Move to...\n+\t* include/bits/stl_move.h: ... here.\n+\t* include/Makefile.am: Add.\n+\t* include/bits/stl_algobase.h: Include the latter.\n+\t* include/Makefile.in: Regenerate.\n+\t* testsuite/20_util/pair/moveable.cc: Remove dg-require-rvalref.\n+\n+2007-10-08  Chris Jefferson  <chris@bubblescope.net>\n+\t    Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/bits/stl_pair.h (pair<>:pair(pair&&),\n+\tpair<>::operator=(pair&&)): Add.\n+\n 2007-10-07  Chris Jefferson  <chris@bubblescope.net>\n \t    Paolo Carlini  <pcarlini@suse.de>\n "}, {"sha": "2e2609c23d2afe628687d2dee341094bfd116cae", "filename": "libstdc++-v3/include/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2FMakefile.am?ref=6c5f0578d9ba4296583e0f77201d42d259f06128", "patch": "@@ -120,6 +120,7 @@ bits_headers = \\\n \t${bits_srcdir}/stl_list.h \\\n \t${bits_srcdir}/stl_map.h \\\n \t${bits_srcdir}/stl_auto_ptr.h \\\n+\t${bits_srcdir}/stl_move.h \\\n \t${bits_srcdir}/stl_multimap.h \\\n \t${bits_srcdir}/stl_multiset.h \\\n \t${bits_srcdir}/stl_numeric.h \\"}, {"sha": "d1db21d550947cd487eeb29cff517c6079f0e22b", "filename": "libstdc++-v3/include/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2FMakefile.in?ref=6c5f0578d9ba4296583e0f77201d42d259f06128", "patch": "@@ -369,6 +369,7 @@ bits_headers = \\\n \t${bits_srcdir}/stl_list.h \\\n \t${bits_srcdir}/stl_map.h \\\n \t${bits_srcdir}/stl_auto_ptr.h \\\n+\t${bits_srcdir}/stl_move.h \\\n \t${bits_srcdir}/stl_multimap.h \\\n \t${bits_srcdir}/stl_multiset.h \\\n \t${bits_srcdir}/stl_numeric.h \\"}, {"sha": "9d055fcfc731ca55d6ff2268bf5bd78ff28a723c", "filename": "libstdc++-v3/include/bits/stl_algobase.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h?ref=6c5f0578d9ba4296583e0f77201d42d259f06128", "patch": "@@ -75,7 +75,7 @@\n #include <debug/debug.h>\n \n #ifdef __GXX_EXPERIMENTAL_CXX0X__\n-# include <utility>\n+# include <bits/stl_move.h>\n # define _GLIBCXX_MOVE(_Tp) std::move(_Tp)\n #else\n # define _GLIBCXX_MOVE(_Tp) _Tp"}, {"sha": "97405268dc845e0b5eb89c9e5cd8141f2b37e91d", "filename": "libstdc++-v3/include/bits/stl_pair.h", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_pair.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_pair.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_pair.h?ref=6c5f0578d9ba4296583e0f77201d42d259f06128", "patch": "@@ -62,6 +62,10 @@\n #ifndef _STL_PAIR_H\n #define _STL_PAIR_H 1\n \n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+#include <bits/stl_move.h>\n+#endif\n+\n _GLIBCXX_BEGIN_NAMESPACE(std)\n \n   /// pair holds two objects of arbitrary type.\n@@ -89,6 +93,20 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       template<class _U1, class _U2>\n         pair(const pair<_U1, _U2>& __p)\n \t: first(__p.first), second(__p.second) { }\n+\n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+      pair(pair&& __p)\n+      : first(std::move(__p.first)),\n+\tsecond(std::move(__p.second)) { }\n+\n+      pair&\n+      operator=(pair&& __p)\n+      { \n+\tfirst = std::move(__p.first);\n+\tsecond = std::move(__p.second);\n+\treturn *this;\n+      }\n+#endif\n     };\n \n   /// Two pairs of the same type are equal iff their members are equal."}, {"sha": "67e4b7338e97b3f9ce42e74256ccfbbc79a722ab", "filename": "libstdc++-v3/include/std/utility", "status": "modified", "additions": 1, "deletions": 24, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2Fstd%2Futility", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Finclude%2Fstd%2Futility", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Futility?ref=6c5f0578d9ba4296583e0f77201d42d259f06128", "patch": "@@ -84,30 +84,7 @@\n #    undef _GLIBCXX_BEGIN_NAMESPACE_TR1\n #    undef _GLIBCXX_INCLUDE_AS_CXX0X\n #  endif\n-\n-#include <type_traits>\n-\n-_GLIBCXX_BEGIN_NAMESPACE(std)\n-\n-  // 20.2.2, forward/move\n-  template<typename _Tp>\n-    struct identity\n-    {\n-      typedef _Tp type;\n-    };\n-\n-  template<typename _Tp>\n-    inline _Tp&&\n-    forward(typename std::identity<_Tp>::type&& __t)\n-    { return __t; }\n-\n-  template<typename _Tp>\n-    inline typename std::remove_reference<_Tp>::type&&\n-    move(_Tp&& __t)\n-    { return __t; }\n-\n-_GLIBCXX_END_NAMESPACE\n-\n+#  include <bits/stl_move.h>\n #endif\n \n #endif /* _GLIBCXX_UTILITY */"}, {"sha": "e84321040ea6c565b4e3386f8ec80e3611b6f3f6", "filename": "libstdc++-v3/testsuite/20_util/pair/moveable.cc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2Fmoveable.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c5f0578d9ba4296583e0f77201d42d259f06128/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2Fmoveable.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2Fmoveable.cc?ref=6c5f0578d9ba4296583e0f77201d42d259f06128", "patch": "@@ -1,4 +1,3 @@\n-// { dg-require-rvalref \"\" }\n // { dg-options \"-std=gnu++0x\" }\n \n // Copyright (C) 2005, 2007 Free Software Foundation, Inc."}]}