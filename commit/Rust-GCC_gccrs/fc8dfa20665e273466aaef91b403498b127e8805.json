{"sha": "fc8dfa20665e273466aaef91b403498b127e8805", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmM4ZGZhMjA2NjVlMjczNDY2YWFlZjkxYjQwMzQ5OGIxMjdlODgwNQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2002-10-29T14:39:38Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2002-10-29T14:39:38Z"}, "message": "toplev.c (rest_of_compilation): Reorganize way reg_scan is called before final pass.\n\n\t* toplev.c (rest_of_compilation): Reorganize way reg_scan is called\n\tbefore final pass.\n\nFrom-SVN: r58624", "tree": {"sha": "e9d405411367cd407617983bbd939ab09a2b1533", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9d405411367cd407617983bbd939ab09a2b1533"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc8dfa20665e273466aaef91b403498b127e8805", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc8dfa20665e273466aaef91b403498b127e8805", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc8dfa20665e273466aaef91b403498b127e8805", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc8dfa20665e273466aaef91b403498b127e8805/comments", "author": null, "committer": null, "parents": [{"sha": "6e7727ebee6ef407d7ec9cd801b1920921d123f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e7727ebee6ef407d7ec9cd801b1920921d123f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e7727ebee6ef407d7ec9cd801b1920921d123f7"}], "stats": {"total": 58, "additions": 29, "deletions": 29}, "files": [{"sha": "2c7095ae7cf26181e94157077a09d95fae8929ef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc8dfa20665e273466aaef91b403498b127e8805/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc8dfa20665e273466aaef91b403498b127e8805/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fc8dfa20665e273466aaef91b403498b127e8805", "patch": "@@ -1,3 +1,8 @@\n+Tue Oct 29 15:37:39 CET 2002  Jan Hubicka  <jh@suse.cz>\n+\n+\t* toplev.c (rest_of_compilation): Reorganize way reg_scan is called\n+\tbefore final pass.\n+\n 2002-10-29  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n         * expr.c (expand_expr) [PLUS]: Don't use simplify_binary_operation;"}, {"sha": "447ef032ee48c9cafd7a061600a66813e7c21658", "filename": "gcc/toplev.c", "status": "modified", "additions": 24, "deletions": 29, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc8dfa20665e273466aaef91b403498b127e8805/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc8dfa20665e273466aaef91b403498b127e8805/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=fc8dfa20665e273466aaef91b403498b127e8805", "patch": "@@ -2998,65 +2998,60 @@ rest_of_compilation (decl)\n       close_dump_file (DFI_bp, print_rtl_with_bb, insns);\n       timevar_pop (TV_BRANCH_PROB);\n     }\n-  if (flag_if_conversion)\n+  if (optimize >= 0)\n     {\n-      timevar_push (TV_IFCVT);\n-      if (rtl_dump_file)\n-\tdump_flow_info (rtl_dump_file);\n       open_dump_file (DFI_ce1, decl);\n+      if (flag_if_conversion)\n+\t{\n+\t  timevar_push (TV_IFCVT);\n+\t  if (rtl_dump_file)\n+\t    dump_flow_info (rtl_dump_file);\n+\t  cleanup_cfg (CLEANUP_EXPENSIVE);\n+\t  reg_scan (insns, max_reg_num (), 0);\n+\t  if_convert (0);\n+\t  timevar_pop (TV_IFCVT);\n+\t}\n+      timevar_push (TV_JUMP);\n       cleanup_cfg (CLEANUP_EXPENSIVE);\n       reg_scan (insns, max_reg_num (), 0);\n-      if_convert (0);\n+      timevar_pop (TV_JUMP);\n       close_dump_file (DFI_ce1, print_rtl_with_bb, get_insns ());\n-      timevar_pop (TV_IFCVT);\n     }\n   if (flag_tracer)\n     {\n       timevar_push (TV_TRACER);\n       open_dump_file (DFI_tracer, decl);\n       if (rtl_dump_file)\n \tdump_flow_info (rtl_dump_file);\n-      cleanup_cfg (CLEANUP_EXPENSIVE);\n       tracer ();\n       cleanup_cfg (CLEANUP_EXPENSIVE);\n+      reg_scan (insns, max_reg_num (), 0);\n       close_dump_file (DFI_tracer, print_rtl_with_bb, get_insns ());\n       timevar_pop (TV_TRACER);\n-      reg_scan (get_insns (), max_reg_num (), 0);\n     }\n \n-  if (optimize > 0)\n+  if (flag_rerun_cse_after_loop)\n     {\n       timevar_push (TV_CSE2);\n       open_dump_file (DFI_cse2, decl);\n       if (rtl_dump_file)\n \tdump_flow_info (rtl_dump_file);\n+      /* CFG is no longer maintained up-to-date.  */\n+      tem = cse_main (insns, max_reg_num (), 1, rtl_dump_file);\n+      purge_all_dead_edges (0);\n+      delete_trivially_dead_insns (insns, max_reg_num ());\n \n-      if (flag_rerun_cse_after_loop)\n+      if (tem)\n \t{\n \t  timevar_push (TV_JUMP);\n-\t  reg_scan (insns, max_reg_num (), 0);\n-\t  timevar_pop (TV_JUMP);\n-\n+\t  rebuild_jump_labels (insns);\n \t  cleanup_cfg (CLEANUP_EXPENSIVE);\n-\t  /* CFG is no longer maintained up-to-date.  */\n-\t  reg_scan (insns, max_reg_num (), 0);\n-\t  tem = cse_main (insns, max_reg_num (), 1, rtl_dump_file);\n-\t  purge_all_dead_edges (0);\n-\t  delete_trivially_dead_insns (insns, max_reg_num ());\n-\n-\t  if (tem)\n-\t    {\n-\t      timevar_push (TV_JUMP);\n-\t      rebuild_jump_labels (insns);\n-\t      cleanup_cfg (CLEANUP_EXPENSIVE);\n-\t      timevar_pop (TV_JUMP);\n-\t    }\n+\t  timevar_pop (TV_JUMP);\n \t}\n-\n+      reg_scan (insns, max_reg_num (), 0);\n       close_dump_file (DFI_cse2, print_rtl_with_bb, insns);\n-      timevar_pop (TV_CSE2);\n-\n       ggc_collect ();\n+      timevar_pop (TV_CSE2);\n     }\n \n   cse_not_expected = 1;"}]}