{"sha": "244464039105a00244f078313c4cfb314ee729fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ0NDY0MDM5MTA1YTAwMjQ0ZjA3ODMxM2M0Y2ZiMzE0ZWU3MjlmYQ==", "commit": {"author": {"name": "Renlin Li", "email": "renlin.li@arm.com", "date": "2014-11-28T11:01:27Z"}, "committer": {"name": "Renlin Li", "email": "renlin@gcc.gnu.org", "date": "2014-11-28T11:01:27Z"}, "message": "Add testcase for PR63661.\n\n2014-11-28  Renlin Li  <renlin.li@arm.com>\n\n\tPR target/63661\n\t* gcc.target/i386/pr63661.c: New test.\n\nFrom-SVN: r218143", "tree": {"sha": "91705ae33700ff8364e94d56aac6435b2914f9ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91705ae33700ff8364e94d56aac6435b2914f9ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/244464039105a00244f078313c4cfb314ee729fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/244464039105a00244f078313c4cfb314ee729fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/244464039105a00244f078313c4cfb314ee729fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/244464039105a00244f078313c4cfb314ee729fa/comments", "author": null, "committer": null, "parents": [{"sha": "541e35a6a3f8ca2d9877ea6c477e765e1d0a9497", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/541e35a6a3f8ca2d9877ea6c477e765e1d0a9497", "html_url": "https://github.com/Rust-GCC/gccrs/commit/541e35a6a3f8ca2d9877ea6c477e765e1d0a9497"}], "stats": {"total": 82, "additions": 82, "deletions": 0}, "files": [{"sha": "3d2e21421919ecfdec3dae7d4325f4971e103fe3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/244464039105a00244f078313c4cfb314ee729fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/244464039105a00244f078313c4cfb314ee729fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=244464039105a00244f078313c4cfb314ee729fa", "patch": "@@ -1,3 +1,8 @@\n+2014-11-27  Renlin Li  <renlin.li@arm.com>\n+\n+\tPR target/63661\n+\t* gcc.target/i386/pr63661.c: New test.\n+\n 2014-11-28  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/63862"}, {"sha": "8b55146c4f53a4de28b3c9abf26e9c51079da52d", "filename": "gcc/testsuite/gcc.target/i386/pr63661.c", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/244464039105a00244f078313c4cfb314ee729fa/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr63661.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/244464039105a00244f078313c4cfb314ee729fa/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr63661.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr63661.c?ref=244464039105a00244f078313c4cfb314ee729fa", "patch": "@@ -0,0 +1,77 @@\n+/* PR target/63661 */\n+/* { dg-do run } */\n+/* { dg-require-effective-target fpic } */\n+/* { dg-options \"-mtune=nehalem -fPIC -O2\" } */\n+\n+static void __attribute__((noinline,noclone,hot))\n+foo (double a, double q, double *ff, double *gx, int e, int ni)\n+{\n+  union\n+    {\n+      double n;\n+      unsigned long long o;\n+    } punner;\n+\n+  punner.n = q;\n+   __builtin_printf(\"B: 0x%016llx ---- %g\\n\", punner.o, q);\n+\n+  if(q != 5)\n+    __builtin_abort();\n+}\n+\n+static int __attribute__((noinline,noclone,hot))\n+bar (int order, double q, double c[])\n+{\n+  int ni, nn, i, e;\n+  double g2, x2, de, s, ratio, ff;\n+\n+  nn = 0;\n+  e = order & 1;\n+  s = 0;\n+  ratio = 0;\n+  x2 = 0;\n+  g2 = 0;\n+\n+  if(q == 0.0)\n+    return 0;\n+\n+  if (order < 5)\n+    {\n+      ratio = 1.0 / q;\n+      nn = order;\n+    }\n+\n+  ni = -nn;\n+\n+  while(1)\n+    {\n+      de = ratio - g2 - x2;\n+\n+      foo (0, q, &ff, &g2, e, ni);\n+\n+      if((int)de == 0)\n+        break;\n+    }\n+\n+  s += 2 * nn * c[nn];\n+\n+  for (i = 0; i < 1; i++)\n+    {\n+      c[0] = nn;\n+      for (; i < 10; i++)\n+        c[i] = 0.0;\n+      c[0] /= s;\n+    }\n+\n+  return 0;\n+}\n+\n+int\n+main ()\n+{\n+  double c[1000];\n+\n+  __builtin_printf(\"A: 0x%016llx\\n\", (unsigned long long)c);\n+  bar (1, 5.0, c);\n+  return 0;\n+}"}]}