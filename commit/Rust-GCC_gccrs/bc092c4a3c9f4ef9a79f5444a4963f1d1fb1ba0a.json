{"sha": "bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMwOTJjNGEzYzlmNGVmOWE3OWY1NDQ0YTQ5NjNmMWQxZmIxYmEwYQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1999-09-06T22:05:26Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1999-09-06T22:05:26Z"}, "message": "v850.h (EXPAND_BUILTIN_VA_ARG): New.\n\n        * v850.h (EXPAND_BUILTIN_VA_ARG): New.\n        * v850.c (v850_va_arg): New.\n\nFrom-SVN: r29146", "tree": {"sha": "f7f18d92cf141348b379d975221173dfc80b35ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f7f18d92cf141348b379d975221173dfc80b35ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a/comments", "author": null, "committer": null, "parents": [{"sha": "63de6c74a5e67690a20c3d7124dc383239556cdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63de6c74a5e67690a20c3d7124dc383239556cdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63de6c74a5e67690a20c3d7124dc383239556cdb"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "fb9af085898336b12e363f029448845e073b4098", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a", "patch": "@@ -1,3 +1,8 @@\n+Mon Sep  6 15:04:55 1999  Richard Henderson  <rth@cygnus.com>\n+\n+\t* v850.h (EXPAND_BUILTIN_VA_ARG): New.\n+\t* v850.c (v850_va_arg): New.\n+\n Tue Sep  7 09:36:01 1999  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>\n \n \t* haifa-sched.c: Tidy comments."}, {"sha": "2b9b59813151b7c577a8ccd0c36dc7667a6f0697", "filename": "gcc/config/v850/v850.c", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a/gcc%2Fconfig%2Fv850%2Fv850.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a/gcc%2Fconfig%2Fv850%2Fv850.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850.c?ref=bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a", "patch": "@@ -3150,3 +3150,45 @@ v850_set_default_decl_attr (decl)\n \t}\n     }\n }\n+\f\n+/* Implement `va_arg'.  */\n+\n+rtx\n+v850_va_arg (valist, type)\n+     tree valist, type;\n+{\n+  HOST_WIDE_INT size, rsize, align;\n+  tree addr, incr;\n+  rtx addr_rtx;\n+  int indirect;\n+\n+  /* Round up sizeof(type) to a word.  */\n+  size = int_size_in_bytes (type);\n+  rsize = (size + UNITS_PER_WORD - 1) & -UNITS_PER_WORD;\n+  indirect = 0;\n+\n+  if (size > 8)\n+    {\n+      size = rsize = UNITS_PER_WORD;\n+      indirect = 1;\n+    }\n+\n+  addr = save_expr (valist);\n+  incr = fold (build (PLUS_EXPR, ptr_type_node, valist,\n+\t\t      build_int_2 (rsize, 0)));\n+\n+  incr = build (MODIFY_EXPR, ptr_type_node, valist, incr);\n+  TREE_SIDE_EFFECTS (incr) = 1;\n+  expand_expr (incr, const0_rtx, VOIDmode, EXPAND_NORMAL);\n+\n+  addr_rtx = expand_expr (addr, NULL, Pmode, EXPAND_NORMAL);\n+\n+  if (indirect)\n+    {\n+      addr_rtx = force_reg (Pmode, addr_rtx);\n+      addr_rtx = gen_rtx_MEM (Pmode, addr_rtx);\n+      MEM_ALIAS_SET (addr_rtx) = get_varargs_alias_set ();\n+    }\n+\n+  return addr_rtx;\n+}"}, {"sha": "b045f830d39985154c80c91d0367ef207e18d448", "filename": "gcc/config/v850/v850.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a/gcc%2Fconfig%2Fv850%2Fv850.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a/gcc%2Fconfig%2Fv850%2Fv850.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850.h?ref=bc092c4a3c9f4ef9a79f5444a4963f1d1fb1ba0a", "patch": "@@ -735,6 +735,10 @@ extern int current_function_anonymous_args;\n #define SETUP_INCOMING_VARARGS(CUM, MODE, TYPE, PAS, SECOND) \\\n   current_function_anonymous_args = (!TARGET_GHS ? 1 : 0);\n \n+/* Implement `va_arg'.  */\n+#define EXPAND_BUILTIN_VA_ARG(valist, type) \\\n+  v850_va_arg (valist, type)\n+\n #define FUNCTION_ARG_PASS_BY_REFERENCE(CUM, MODE, TYPE, NAMED)\t\t\\\n   ((TYPE) && int_size_in_bytes (TYPE) > 8)\n  \n@@ -1663,3 +1667,4 @@ extern int    v850_handle_pragma            PROTO ((int (*)(void), void (*)(int)\n extern void   v850_encode_data_area         ();\n extern void   v850_set_default_decl_attr    ();\n extern v850_data_area v850_get_data_area    ();\n+extern struct rtx_def *v850_va_arg\t    ();"}]}