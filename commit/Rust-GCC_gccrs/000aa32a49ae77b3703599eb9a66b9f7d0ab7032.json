{"sha": "000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDAwYWEzMmE0OWFlNzdiMzcwMzU5OWViOWE2NmI5ZjdkMGFiNzAzMg==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jblomqvi@cc.hut.fi", "date": "2004-05-16T13:27:48Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-05-16T13:27:48Z"}, "message": "io.h (flush): Add prototype.\n\n\t* io/io.h (flush): Add prototype.\n\t* io/transfer.c (finalize_transfer): Flush partial records.\n\t* io/unix.c (flush): New function.\n\nFrom-SVN: r81913", "tree": {"sha": "98bc62ebf30b17a551677a60581e8a1ed4703037", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98bc62ebf30b17a551677a60581e8a1ed4703037"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "html_url": "https://github.com/Rust-GCC/gccrs/commit/000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/comments", "author": null, "committer": null, "parents": [{"sha": "1ab106cdc46e598261d9ffa0673936d35af923db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ab106cdc46e598261d9ffa0673936d35af923db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ab106cdc46e598261d9ffa0673936d35af923db"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "27531d84d72002130cf4e501344cc15efbf053b3", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "patch": "@@ -1,3 +1,9 @@\n+2004-05-16  Janne Blomqvist  <jblomqvi@cc.hut.fi>\n+\n+\t* io/io.h (flush): Add prototype.\n+\t* io/transfer.c (finalize_transfer): Flush partial records.\n+\t* io/unix.c (flush): New function.\n+\n 2004-05-15  Tobias Schlueter <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/15234"}, {"sha": "1806fb9b870e62d89745fd866f9ab700e80f024e", "filename": "libgfortran/io/io.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2Fio%2Fio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2Fio%2Fio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fio.h?ref=000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "patch": "@@ -456,6 +456,9 @@ int is_seekable (stream *);\n #define empty_internal_buffer prefix(empty_internal_buffer)\n void empty_internal_buffer(stream *);\n \n+#define flush prefix(flush)\n+try flush (stream *);\n+\n \n /* unit.c */\n "}, {"sha": "da2e6150b09a161132f7b4fc5d4aace1ee16327a", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "patch": "@@ -1338,7 +1338,13 @@ finalize_transfer (void)\n       free_fnodes ();\n \n       if (advance_status == ADVANCE_NO)\n-\treturn;\n+\t{\n+\t  /* Most systems buffer lines, so force the partial record\n+\t     to be written out.  */\n+\t  flush (current_unit->s);\n+\t  return;\n+\t}\n+\n       next_record (1);\n       current_unit->current_record = 0;\n     }"}, {"sha": "104afb2c99f90c1a064558f41ed8e51dafbf2c29", "filename": "libgfortran/io/unix.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2Fio%2Funix.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/000aa32a49ae77b3703599eb9a66b9f7d0ab7032/libgfortran%2Fio%2Funix.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funix.c?ref=000aa32a49ae77b3703599eb9a66b9f7d0ab7032", "patch": "@@ -1394,6 +1394,12 @@ is_seekable (stream * s)\n   return ((unix_stream *) s)->mmaped;\n }\n \n+try\n+flush (stream *s)\n+{\n+  return fd_flush( (unix_stream *) s);\n+}\n+\n \n /* How files are stored:  This is an operating-system specific issue,\n    and therefore belongs here.  There are three cases to consider."}]}