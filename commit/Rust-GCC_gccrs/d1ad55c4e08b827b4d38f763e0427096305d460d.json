{"sha": "d1ad55c4e08b827b4d38f763e0427096305d460d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFhZDU1YzRlMDhiODI3YjRkMzhmNzYzZTA0MjcwOTYzMDVkNDYwZA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-17T14:22:43Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-17T17:56:42Z"}, "message": "libcody: Allow PIC [PR 98324]\n\nWhile this doesn't fix 98324, it was an omission.  Cribbed code from\nlibcpp to build libcody as PIC.\n\n\tlibcody/\n\t* configure.ac: Add --enable-host-shared.\n\t* Makefile.in: Add FLAGPIC.\n\t* configure: Regenerated.", "tree": {"sha": "2d39b9ccb9dcd77d32bd53c29c3d8bb15b23a8b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d39b9ccb9dcd77d32bd53c29c3d8bb15b23a8b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1ad55c4e08b827b4d38f763e0427096305d460d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ad55c4e08b827b4d38f763e0427096305d460d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1ad55c4e08b827b4d38f763e0427096305d460d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ad55c4e08b827b4d38f763e0427096305d460d/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "217d5beaff9987a9845155fc796322b5f8bb876d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/217d5beaff9987a9845155fc796322b5f8bb876d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/217d5beaff9987a9845155fc796322b5f8bb876d"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "28ed3a22299af98121b19ceab167e3faf61b7ea3", "filename": "libcody/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1ad55c4e08b827b4d38f763e0427096305d460d/libcody%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1ad55c4e08b827b4d38f763e0427096305d460d/libcody%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcody%2FMakefile.in?ref=d1ad55c4e08b827b4d38f763e0427096305d460d", "patch": "@@ -53,7 +53,7 @@ INSTALL := $(srcdir)/build-aux/install-sh\n # C++ compiler options\n CXXFLAGS := @CXXFLAGS@\n CXXINC := $(filter -I%,@CXX@)\n-CXXOPTS := $(CXXFLAGS)\n+CXXOPTS := $(CXXFLAGS) @PICFLAG@\n ifeq ($(notdir $(firstword $(CXX))),g++)\n # It's GCC, or pretending to be it -- so it better smell like it!\n # Code generation"}, {"sha": "b9967a1cd8db8b872dd65adf4a2d62a8164f014c", "filename": "libcody/configure", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1ad55c4e08b827b4d38f763e0427096305d460d/libcody%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1ad55c4e08b827b4d38f763e0427096305d460d/libcody%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcody%2Fconfigure?ref=d1ad55c4e08b827b4d38f763e0427096305d460d", "patch": "@@ -591,6 +591,7 @@ ALOY\n DOXYGEN\n AR\n EXCEPTIONS\n+PICFLAG\n CONFIG_FILES\n SUBDIRS\n configure_args\n@@ -658,6 +659,7 @@ enable_maintainer_mode\n with_compiler\n with_bugurl\n enable_checking\n+enable_host_shared\n enable_exceptions\n '\n       ac_precious_vars='build_alias\n@@ -1290,6 +1292,7 @@ Optional Features:\n                           only specific categories of checks. Categories are:\n                           yes,no,all,none,release. Flags are: misc,valgrind or\n                           other strings\n+  --enable-host-shared    build host code as shared libraries\n   --enable-exceptions     enable exceptions & rtti\n \n Optional Packages:\n@@ -2752,6 +2755,15 @@ else\n \n fi\n \n+# Enable --enable-host-shared.\n+# Check whether --enable-host-shared was given.\n+if test \"${enable_host_shared+set}\" = set; then :\n+  enableval=$enable_host_shared; PICFLAG=-fPIC\n+else\n+  PICFLAG=\n+fi\n+\n+\n \n # Check whether --enable-exceptions was given.\n if test \"${enable_exceptions+set}\" = set; then :"}, {"sha": "511fe261b459247d6a69b34ba44f64d3ec4b0e2e", "filename": "libcody/configure.ac", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1ad55c4e08b827b4d38f763e0427096305d460d/libcody%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1ad55c4e08b827b4d38f763e0427096305d460d/libcody%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcody%2Fconfigure.ac?ref=d1ad55c4e08b827b4d38f763e0427096305d460d", "patch": "@@ -66,6 +66,12 @@ else\n   AC_DEFINE(NMS_CHECKING, 0)\n fi\n \n+# Enable --enable-host-shared.\n+AC_ARG_ENABLE(host-shared,\n+[AS_HELP_STRING([--enable-host-shared],\n+\t\t[build host code as shared libraries])],\n+[PICFLAG=-fPIC], [PICFLAG=])\n+AC_SUBST(PICFLAG)\n \n NMS_ENABLE_EXCEPTIONS\n "}]}