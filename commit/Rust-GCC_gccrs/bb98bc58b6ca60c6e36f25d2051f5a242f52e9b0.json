{"sha": "bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmI5OGJjNThiNmNhNjBjNmUzNmYyNWQyMDUxZjVhMjQyZjUyZTliMA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-03-08T01:48:08Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-03-08T01:48:08Z"}, "message": "(LINK_SPEC): Do not depend on gas.\n\n(LINK_SPEC): Do not depend on gas.  Don't interpret -EB\nand -EL options, but do pass them.\n(ASM_SPEC): Make definition depend on whether or\nnot the default assembler is gas.  Pass all normal assembler\noptions to gas.\n(ASM_FINAL_SPEC): Cross compiling does not presume gas.\n\nFrom-SVN: r6721", "tree": {"sha": "6959931a9b979b2fd2efd4ee6f87ac15a62fc382", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6959931a9b979b2fd2efd4ee6f87ac15a62fc382"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0/comments", "author": null, "committer": null, "parents": [{"sha": "3f40de7333b7544f7a590029d5cec88ad0f815c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f40de7333b7544f7a590029d5cec88ad0f815c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f40de7333b7544f7a590029d5cec88ad0f815c2"}], "stats": {"total": 71, "additions": 41, "deletions": 30}, "files": [{"sha": "e9bd74490c630d006074ff7fc5233b4c3cb3d88c", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 41, "deletions": 30, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=bb98bc58b6ca60c6e36f25d2051f5a242f52e9b0", "patch": "@@ -514,10 +514,6 @@ while (0)\n \t#error \"Define CPP_PREDEFINES in the appropriate tm.h file\"\n #endif\n \n-#ifndef LINK_SPEC\n-\t#error \"Define LINK_SPEC in the appropriate tm.h file\"\n-#endif\n-\n #ifndef LIB_SPEC\n \t#error \"Define LIB_SPEC in the appropriate tm.h file\"\n #endif\n@@ -548,23 +544,40 @@ while (0)\n /* Extra switches sometimes passed to the assembler.  */\n \n #ifndef ASM_SPEC\n+#if ((TARGET_CPU_DEFAULT | TARGET_DEFAULT) & MASK_GAS) != 0\n+/* GAS */\n+#define ASM_SPEC \"\\\n+%{mmips-as: \\\n+\t%{!.s:-nocpp} %{.s: %{cpp} %{nocpp}} \\\n+\t%{pipe: %e-pipe is not supported.} \\\n+\t%{K}} \\\n+%{G*} %{EB} %{EL} %{mips1} %{mips2} %{mips3} %{v} \\\n+%{noasmopt:-O0} \\\n+%{!noasmopt:%{O:-O2} %{O1:-O2} %{O2:-O2} %{O3:-O3}} \\\n+%{g} %{g0} %{g1} %{g2} %{g3} \\\n+%{ggdb:-g} %{ggdb0:-g0} %{ggdb1:-g1} %{ggdb2:-g2} %{ggdb3:-g3} \\\n+%{gstabs:-g} %{gstabs0:-g0} %{gstabs1:-g1} %{gstabs2:-g2} %{gstabs3:-g3} \\\n+%{gstabs+:-g} %{gstabs+0:-g0} %{gstabs+1:-g1} %{gstabs+2:-g2} %{gstabs+3:-g3} \\\n+%{gcoff:-g} %{gcoff0:-g0} %{gcoff1:-g1} %{gcoff2:-g2} %{gcoff3:-g3}\"\n+\n+#else\n+/* not GAS */\n #define ASM_SPEC \"\\\n %{!mgas: \\\n-\t%{!mrnames: %{!.s:-nocpp} %{.s: %{cpp} %{nocpp}}} \\\n+\t%{!.s:-nocpp} %{.s: %{cpp} %{nocpp}} \\\n \t%{pipe: %e-pipe is not supported.} \\\n-\t%{EB} %{!EB:-EB} \\\n-\t%{EL: %e-EL not supported} \\\n-\t%{mips1} %{mips2} %{mips3} \\\n-\t%{noasmopt:-O0} \\\n-\t%{!noasmopt:%{O:-O2} %{O1:-O2} %{O2:-O2} %{O3:-O3}} \\\n-\t%{g} %{g0} %{g1} %{g2} %{g3} %{v} %{K} \\\n-\t%{ggdb:-g} %{ggdb0:-g0} %{ggdb1:-g1} %{ggdb2:-g2} %{ggdb3:-g3} \\\n-\t%{gstabs:-g} %{gstabs0:-g0} %{gstabs1:-g1} %{gstabs2:-g2} %{gstabs3:-g3} \\\n-\t%{gstabs+:-g} %{gstabs+0:-g0} %{gstabs+1:-g1} %{gstabs+2:-g2} %{gstabs+3:-g3} \\\n-\t%{gcoff:-g} %{gstabs0:-g0} %{gcoff1:-g1} %{gcoff2:-g2} %{gcoff3:-g3}} \\\n-%{G*}\"\n-\n-#endif\t\t\t\t/* ASM_SPEC */\n+\t%{K}} \\\n+%{G*} %{EB} %{EL} %{mips1} %{mips2} %{mips3} %{v} \\\n+%{noasmopt:-O0} \\\n+%{!noasmopt:%{O:-O2} %{O1:-O2} %{O2:-O2} %{O3:-O3}} \\\n+%{g} %{g0} %{g1} %{g2} %{g3} \\\n+%{ggdb:-g} %{ggdb0:-g0} %{ggdb1:-g1} %{ggdb2:-g2} %{ggdb3:-g3} \\\n+%{gstabs:-g} %{gstabs0:-g0} %{gstabs1:-g1} %{gstabs2:-g2} %{gstabs3:-g3} \\\n+%{gstabs+:-g} %{gstabs+0:-g0} %{gstabs+1:-g1} %{gstabs+2:-g2} %{gstabs+3:-g3} \\\n+%{gcoff:-g} %{gcoff0:-g0} %{gcoff1:-g1} %{gcoff2:-g2} %{gcoff3:-g3}\"\n+\n+#endif\n+#endif\t/* ASM_SPEC */\n \n /* Specify to run a post-processor, mips-tfile after the assembler\n    has run to stuff the mips debug information into the object file.\n@@ -574,8 +587,8 @@ while (0)\n    -mmips-tfile.  */\n \n #ifndef ASM_FINAL_SPEC\n-#if ((TARGET_CPU_DEFAULT | TARGET_DEFAULT) & MASK_GAS) != 0 || defined (CROSS_COMPILE)\n-\t\t\t\t/* GAS */\n+#if ((TARGET_CPU_DEFAULT | TARGET_DEFAULT) & MASK_GAS) != 0\n+/* GAS */\n #define ASM_FINAL_SPEC \"\\\n %{mmips-as: %{!mno-mips-tfile: \\\n \t\\n mips-tfile %{v*: -v} \\\n@@ -584,7 +597,8 @@ while (0)\n \t\t%{c:%W{o*}%{!o*:-o %b.o}}%{!c:-o %U.o} \\\n \t\t%{.s:%i} %{!.s:%g.s}}}\"\n \n-#else\t\t\t\t/* not GAS, clean up after MIPS assembler */\n+#else\n+/* not GAS */\n #define ASM_FINAL_SPEC \"\\\n %{!mgas: %{!mno-mips-tfile: \\\n \t\\n mips-tfile %{v*: -v} \\\n@@ -593,7 +607,7 @@ while (0)\n \t\t%{c:%W{o*}%{!o*:-o %b.o}}%{!c:-o %U.o} \\\n \t\t%{.s:%i} %{!.s:%g.s}}}\"\n \n-#endif\t/* GAS */\n+#endif\n #endif\t/* ASM_FINAL_SPEC */\n \n /* Redefinition of libraries used.  Mips doesn't support normal\n@@ -605,17 +619,14 @@ while (0)\n #endif\n \n /* Extra switches sometimes passed to the linker.  */\n+/* ??? The bestGnum will never be passed to the linker, because the gcc driver\n+  will interpret it as a -b option.  */\n \n #ifndef LINK_SPEC\n #define LINK_SPEC \"\\\n-%{G*} \\\n-%{!mgas: \\\n-\t%{pipe: %e-pipe is not supported.} \\\n-\t%{EB} %{!EB:-EB} \\\n-\t%{EL: %e-EL not supported} \\\n-\t%{mips1} %{mips2} %{mips3} \\\n-\t%{bestGnum} %{shared} %{non_shared}}\"\n-#endif\t\t\t\t/* LINK_SPEC defined */\n+%{G*} %{EB} %{EL} %{mips1} %{mips2} %{mips3} \\\n+%{bestGnum} %{shared} %{non_shared}\"\n+#endif\t/* LINK_SPEC defined */\n \n /* Specs for the compiler proper */\n "}]}