{"sha": "b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjA2YTFmNTBjNTAzMGIyN2UzMDdjODZhYjQ5ZWIxNmE2YjMyZmM1Ng==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2011-04-08T06:08:21Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2011-04-08T06:08:21Z"}, "message": "re PR c++/48481 (C++ overloading memory hog)\n\n\tPR c++/48481\n\t* tree.c (build_overload): Allow an unwrapped FUNCTION_DECL\n\tat the end of the chain.\n\t* pt.c (dependent_template_p): Use OVL_CURRENT/NEXT.\n\t(iterative_hash_template_arg): Likewise.\n\nFrom-SVN: r172164", "tree": {"sha": "1a7949b398e708ca97d0a00a9b02f404810cbde5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a7949b398e708ca97d0a00a9b02f404810cbde5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3a2cb4d037cc66a0b6567d944cbc9450adf11814", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a2cb4d037cc66a0b6567d944cbc9450adf11814", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a2cb4d037cc66a0b6567d944cbc9450adf11814"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "027eac822fe4fe7b0a96d6a9f064918a75ea0f1a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "patch": "@@ -1,5 +1,11 @@\n 2011-04-07  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/48481\n+\t* tree.c (build_overload): Allow an unwrapped FUNCTION_DECL\n+\tat the end of the chain.\n+\t* pt.c (dependent_template_p): Use OVL_CURRENT/NEXT.\n+\t(iterative_hash_template_arg): Likewise.\n+\n \tPR c++/48481\n \t* cp-tree.h (OVL_ARG_DEPENDENT): New.\n \t* name-lookup.c (add_function): Set it."}, {"sha": "2136df62118184e63590fef30e4675e12c73b7ee", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "patch": "@@ -5139,8 +5139,8 @@ arg_assoc (struct arg_lookup *k, tree n)\n     }\n   else if (TREE_CODE (n) == OVERLOAD)\n     {\n-      for (; n; n = OVL_CHAIN (n))\n-\tif (arg_assoc_type (k, TREE_TYPE (OVL_FUNCTION (n))))\n+      for (; n; n = OVL_NEXT (n))\n+\tif (arg_assoc_type (k, TREE_TYPE (OVL_CURRENT (n))))\n \t  return true;\n     }\n "}, {"sha": "86274e99731b20505289b34ea8f9414763d329da", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "patch": "@@ -1516,8 +1516,8 @@ iterative_hash_template_arg (tree arg, hashval_t val)\n       return val;\n \n     case OVERLOAD:\n-      for (; arg; arg = OVL_CHAIN (arg))\n-\tval = iterative_hash_template_arg (OVL_FUNCTION (arg), val);\n+      for (; arg; arg = OVL_NEXT (arg))\n+\tval = iterative_hash_template_arg (OVL_CURRENT (arg), val);\n       return val;\n \n     case CONSTRUCTOR:\n@@ -18591,9 +18591,9 @@ dependent_template_p (tree tmpl)\n     {\n       while (tmpl)\n \t{\n-\t  if (dependent_template_p (OVL_FUNCTION (tmpl)))\n+\t  if (dependent_template_p (OVL_CURRENT (tmpl)))\n \t    return true;\n-\t  tmpl = OVL_CHAIN (tmpl);\n+\t  tmpl = OVL_NEXT (tmpl);\n \t}\n       return false;\n     }"}, {"sha": "3594ae42dd5467074a7efbb408acf166f6531c5d", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b06a1f50c5030b27e307c86ab49eb16a6b32fc56/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=b06a1f50c5030b27e307c86ab49eb16a6b32fc56", "patch": "@@ -1461,8 +1461,6 @@ build_overload (tree decl, tree chain)\n {\n   if (! chain && TREE_CODE (decl) != TEMPLATE_DECL)\n     return decl;\n-  if (chain && TREE_CODE (chain) != OVERLOAD)\n-    chain = ovl_cons (chain, NULL_TREE);\n   return ovl_cons (decl, chain);\n }\n "}]}