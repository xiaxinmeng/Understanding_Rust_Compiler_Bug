{"sha": "642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQyMzI0YmIxNmZmZTg4ZjBhYTgxYzRjZWQ5YmRjMWJhNjM0NzFhYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2009-06-19T15:32:43Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2009-06-19T15:32:43Z"}, "message": "ggc-page.c (ggc_pch_write_object): Initialize emptyBytes.\n\n./:\t* ggc-page.c (ggc_pch_write_object): Initialize emptyBytes.\n\t* sdbout.c (sdb_debug_hooks): Initialize non-SDB_DEBUGGING_INFO\n\tversion.\n\n\t* c-decl.c (finish_decl): If -Wc++-compat, warn about\n\tuninitialized const.\ntestsuite/:\n\t* gcc.dg/Wcxx-compat-17.c: New testcase.\n\nFrom-SVN: r148710", "tree": {"sha": "fe9acae7789cd322367a02a4039509a1a001b489", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe9acae7789cd322367a02a4039509a1a001b489"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/comments", "author": null, "committer": null, "parents": [{"sha": "dc491a250a946a50bdea3813e9f1f67d368e348b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc491a250a946a50bdea3813e9f1f67d368e348b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc491a250a946a50bdea3813e9f1f67d368e348b"}], "stats": {"total": 78, "additions": 75, "deletions": 3}, "files": [{"sha": "bab05f5bf7982dbf55a2bd6e2e4db248a11b280d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "patch": "@@ -1,3 +1,12 @@\n+2009-06-19  Ian Lance Taylor  <iant@google.com>\n+\n+\t* ggc-page.c (ggc_pch_write_object): Initialize emptyBytes.\n+\t* sdbout.c (sdb_debug_hooks): Initialize non-SDB_DEBUGGING_INFO\n+\tversion.\n+\n+\t* c-decl.c (finish_decl): If -Wc++-compat, warn about\n+\tuninitialized const.\n+\n 2009-06-19  Ian Lance Taylor  <iant@google.com>\n \n \t* dse.c (struct store_info): Rename bitmap field to bmap.  Change"}, {"sha": "8234e0124ea6a9f5260045d4adad00d23f72b48b", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "patch": "@@ -4352,6 +4352,14 @@ finish_decl (tree decl, location_t init_loc, tree init,\n \t  push_cleanup (decl, cleanup, false);\n \t}\n     }\n+\n+  if (warn_cxx_compat\n+      && TREE_CODE (decl) == VAR_DECL\n+      && TREE_READONLY (decl)\n+      && !DECL_EXTERNAL (decl)\n+      && DECL_INITIAL (decl) == NULL_TREE)\n+    warning_at (DECL_SOURCE_LOCATION (decl), OPT_Wc___compat,\n+\t\t\"uninitialized const %qD is invalid in C++\", decl);\n }\n \n /* Given a parsed parameter declaration, decode it into a PARM_DECL.  */"}, {"sha": "744355e3de301416fac70dff959de37544835b48", "filename": "gcc/ggc-page.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Fggc-page.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Fggc-page.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fggc-page.c?ref=642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "patch": "@@ -2165,7 +2165,7 @@ ggc_pch_write_object (struct ggc_pch_data *d ATTRIBUTE_UNUSED,\n \t\t      size_t size, bool is_string ATTRIBUTE_UNUSED)\n {\n   unsigned order;\n-  static const char emptyBytes[256];\n+  static const char emptyBytes[256] = { 0 };\n \n   if (size < NUM_SIZE_LOOKUP)\n     order = size_lookup[size];"}, {"sha": "dbcba690436ca156d3eca29061c396d3713aad1b", "filename": "gcc/sdbout.c", "status": "modified", "additions": 32, "deletions": 2, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Fsdbout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Fsdbout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsdbout.c?ref=642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "patch": "@@ -1,6 +1,6 @@\n /* Output sdb-format symbol table information from GNU compiler.\n    Copyright (C) 1988, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n-   2000, 2001, 2002, 2003, 2004, 2005, 2007, 2008\n+   2000, 2001, 2002, 2003, 2004, 2005, 2007, 2008, 2009\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -1698,7 +1698,37 @@ sdbout_init (const char *input_file_name ATTRIBUTE_UNUSED)\n #else  /* SDB_DEBUGGING_INFO */\n \n /* This should never be used, but its address is needed for comparisons.  */\n-const struct gcc_debug_hooks sdb_debug_hooks;\n+const struct gcc_debug_hooks sdb_debug_hooks =\n+{\n+  0,\t\t/* init */\n+  0,\t\t/* finish */\n+  0,\t\t/* define */\n+  0,\t\t/* undef */\n+  0,\t\t/* start_source_file */\n+  0,\t\t/* end_source_file */\n+  0,\t\t/* begin_block */\n+  0,\t\t/* end_block */\n+  0,\t\t/* ignore_block */\n+  0,\t\t/* source_line */\n+  0,\t\t/* begin_prologue */\n+  0,\t\t/* end_prologue */\n+  0,\t\t/* end_epilogue */\n+  0,\t\t/* begin_function */\n+  0,\t\t/* end_function */\n+  0,\t\t/* function_decl */\n+  0,\t\t/* global_decl */\n+  0,\t\t/* type_decl */\n+  0,\t\t/* imported_module_or_decl */\n+  0,\t\t/* deferred_inline_function */\n+  0,\t\t/* outlining_inline_function */\n+  0,\t\t/* label */\n+  0,\t\t/* handle_pch */\n+  0,\t\t/* var_location */\n+  0,\t\t/* switch_text_section */\n+  0,\t\t/* set_name */\n+  0\t\t/* start_end_main_source_file */\n+};\n+\n \n #endif /* SDB_DEBUGGING_INFO */\n "}, {"sha": "fec4369b18a3816ff47328b14ab4ceecdec543bf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "patch": "@@ -1,3 +1,7 @@\n+2009-06-19  Ian Lance Taylor  <iant@google.com>\n+\n+\t* gcc.dg/Wcxx-compat-17.c: New testcase.\n+\n 2009-06-19  Ian Lance Taylor  <iant@google.com>\n \n \t* gcc.dg/Wcxx-compat-15.c: New testcase."}, {"sha": "78760d641ffadeaa6e9ae5c1eec235c586cb892e", "filename": "gcc/testsuite/gcc.dg/Wcxx-compat-17.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Ftestsuite%2Fgcc.dg%2FWcxx-compat-17.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642324bb16ffe88f0aa81c4ced9bdc1ba63471ab/gcc%2Ftestsuite%2Fgcc.dg%2FWcxx-compat-17.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWcxx-compat-17.c?ref=642324bb16ffe88f0aa81c4ced9bdc1ba63471ab", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Wc++-compat\" } */\n+const int v1;\t\t\t/* { dg-warning \"invalid in C\\[+\\]\\[+\\]\" } */\n+const char * const v2;\t\t/* { dg-warning \"invalid in C\\[+\\]\\[+\\]\" } */\n+struct s { int f1; int f2; };\n+const struct s v3;\t\t/* { dg-warning \"invalid in C\\[+\\]\\[+\\]\" } */\n+const int v4 = 1;\n+const char * const v5 = 0;\n+const struct s v6 = { 0, 0 };\n+const struct s v7 = { 0 };\n+void\n+f()\n+{\n+  const int v11;\t\t/* { dg-warning \"invalid in C\\[+\\]\\[+\\]\" } */\n+  const char * const v12;\t/* { dg-warning \"invalid in C\\[+\\]\\[+\\]\" } */\n+  const struct s v13;\t\t/* { dg-warning \"invalid in C\\[+\\]\\[+\\]\" } */\n+  const int v14 = 1;\n+  const char * const v15 = 0;\n+  const struct s v16 = { 0, 0 };\n+  const struct s v17 = { 0 };\n+}"}]}