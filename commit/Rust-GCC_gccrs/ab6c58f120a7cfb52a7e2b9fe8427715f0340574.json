{"sha": "ab6c58f120a7cfb52a7e2b9fe8427715f0340574", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI2YzU4ZjEyMGE3Y2ZiNTJhN2UyYjlmZTg0Mjc3MTVmMDM0MDU3NA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-10-21T23:11:08Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-10-21T23:11:08Z"}, "message": "(store_expr): Disable optimization of using convert if exp's type is a\nsubtype.\n\nFrom-SVN: r12992", "tree": {"sha": "c5240d60e71816b02dd9d89931d9b569f6a9e4ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c5240d60e71816b02dd9d89931d9b569f6a9e4ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab6c58f120a7cfb52a7e2b9fe8427715f0340574", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab6c58f120a7cfb52a7e2b9fe8427715f0340574", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab6c58f120a7cfb52a7e2b9fe8427715f0340574", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab6c58f120a7cfb52a7e2b9fe8427715f0340574/comments", "author": null, "committer": null, "parents": [{"sha": "1dcfa896bdee3c95c22401a88ded22171d5caa81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dcfa896bdee3c95c22401a88ded22171d5caa81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dcfa896bdee3c95c22401a88ded22171d5caa81"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "e06d3b187eb0cf3e0fb0b33b103dae2eb3e5e81d", "filename": "gcc/expr.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab6c58f120a7cfb52a7e2b9fe8427715f0340574/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab6c58f120a7cfb52a7e2b9fe8427715f0340574/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=ab6c58f120a7cfb52a7e2b9fe8427715f0340574", "patch": "@@ -3125,8 +3125,11 @@ store_expr (exp, target, want_value)\n       /* If we don't want a value, we can do the conversion inside EXP,\n \t which will often result in some optimizations.  Do the conversion\n \t in two steps: first change the signedness, if needed, then\n-\t the extend.  */\n-      if (! want_value)\n+\t the extend.  But don't do this if the type of EXP is a subtype\n+\t of something else since then the conversion might involve\n+\t more than just converting modes.  */\n+      if (! want_value && INTEGRAL_TYPE_P (TREE_TYPE (exp))\n+\t  && TREE_TYPE (TREE_TYPE (exp)) == 0)\n \t{\n \t  if (TREE_UNSIGNED (TREE_TYPE (exp))\n \t      != SUBREG_PROMOTED_UNSIGNED_P (target))"}]}