{"sha": "69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjlmZmE3YWE1YTVlYWY2Yjg1MjViZDg2ZmYyNDc5YmQwOTQ0OGM1MQ==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@bitrange.com", "date": "2004-11-28T09:48:27Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2004-11-28T09:48:27Z"}, "message": "re PR target/18331 (mmix-knuth-mmixware testsuite failure: execute/ieee/fp-cmp-8.c gcc.dg/20040625-1.c)\n\n\tPR target/18331\n\t* config/mmix/mmix.md (\"*movdicc_real_reversible\"): Rename from\n\t\"*movdicc_real\".  Only match reversible comparisons.\n\t(\"*movdicc_real_nonreversible\"): New pattern, split from\n\t\"*movdicc_real\".  Match only nonreversible comparisons.  Exclude\n\treversed alternatives.\n\t(\"*movdfcc_real_reversible\", \"*movdfcc_real_nonreversible\"):\n\tSimilar.\n\nFrom-SVN: r91416", "tree": {"sha": "a37af773a469ee92f5b34a1ea83236c1e0029852", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a37af773a469ee92f5b34a1ea83236c1e0029852"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51/comments", "author": null, "committer": null, "parents": [{"sha": "78a27531e02d317c06e0bb63f3858ee9117390ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78a27531e02d317c06e0bb63f3858ee9117390ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78a27531e02d317c06e0bb63f3858ee9117390ea"}], "stats": {"total": 49, "additions": 45, "deletions": 4}, "files": [{"sha": "b9a65f62689ee3fe128c5b5b55326f3e79ba145d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51", "patch": "@@ -1,3 +1,14 @@\n+2004-11-28  Hans-Peter Nilsson  <hp@bitrange.com>\n+\n+\tPR target/18331\n+\t* config/mmix/mmix.md (\"*movdicc_real_reversible\"): Rename from\n+\t\"*movdicc_real\".  Only match reversible comparisons.\n+\t(\"*movdicc_real_nonreversible\"): New pattern, split from\n+\t\"*movdicc_real\".  Match only nonreversible comparisons.  Exclude\n+\treversed alternatives.\n+\t(\"*movdfcc_real_reversible\", \"*movdfcc_real_nonreversible\"):\n+\tSimilar.\n+\n 2004-11-27  Richard Henderson  <rth@redhat.com>\n \n \t* config/ia64/ia64.md: Move all define_predicate's ..."}, {"sha": "827ed4bd94628e00256e2a5fef5b9fea202a9337", "filename": "gcc/config/mmix/mmix.md", "status": "modified", "additions": 34, "deletions": 4, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51/gcc%2Fconfig%2Fmmix%2Fmmix.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51/gcc%2Fconfig%2Fmmix%2Fmmix.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmmix%2Fmmix.md?ref=69ffa7aa5a5eaf6b8525bd86ff2479bd09448c51", "patch": "@@ -769,7 +769,7 @@ DIVU %1,%1,%2\\;GET %0,:rR\\;NEGU %2,0,%0\\;CSNN %0,$255,%2\")\n    ZS%d2 %0,%3,%1\n    ZS%D2 %0,%3,%4\")\n \n-(define_insn \"*movdicc_real\"\n+(define_insn \"*movdicc_real_reversible\"\n   [(set\n     (match_operand:DI 0 \"register_operand\"\t   \"=r ,r ,r ,r\")\n     (if_then_else:DI\n@@ -779,13 +779,28 @@ DIVU %1,%1,%2\\;GET %0,:rR\\;NEGU %2,0,%0\\;CSNN %0,$255,%2\")\n       (const_int 0)])\n      (match_operand:DI 1 \"mmix_reg_or_8bit_operand\" \"rI,0 ,rI,GM\")\n      (match_operand:DI 4 \"mmix_reg_or_8bit_operand\" \"0 ,rI,GM,rI\")))]\n-  \"\"\n+  \"REVERSIBLE_CC_MODE (GET_MODE (operands[3]))\"\n   \"@\n    CS%d2 %0,%3,%1\n    CS%D2 %0,%3,%4\n    ZS%d2 %0,%3,%1\n    ZS%D2 %0,%3,%4\")\n \n+(define_insn \"*movdicc_real_nonreversible\"\n+  [(set\n+    (match_operand:DI 0 \"register_operand\"\t   \"=r ,r\")\n+    (if_then_else:DI\n+     (match_operator\n+      2 \"mmix_comparison_operator\"\n+      [(match_operand 3 \"mmix_reg_cc_operand\"\t    \"r ,r\")\n+      (const_int 0)])\n+     (match_operand:DI 1 \"mmix_reg_or_8bit_operand\" \"rI,rI\")\n+     (match_operand:DI 4 \"mmix_reg_or_0_operand\" \"0 ,GM\")))]\n+  \"!REVERSIBLE_CC_MODE (GET_MODE (operands[3]))\"\n+  \"@\n+   CS%d2 %0,%3,%1\n+   ZS%d2 %0,%3,%1\")\n+\n (define_insn \"*movdfcc_real_foldable\"\n   [(set\n     (match_operand:DF 0 \"register_operand\"\t\"=r  ,r  ,r  ,r\")\n@@ -803,7 +818,7 @@ DIVU %1,%1,%2\\;GET %0,:rR\\;NEGU %2,0,%0\\;CSNN %0,$255,%2\")\n    ZS%d2 %0,%3,%1\n    ZS%D2 %0,%3,%4\")\n \n-(define_insn \"*movdfcc_real\"\n+(define_insn \"*movdfcc_real_reversible\"\n   [(set\n     (match_operand:DF 0 \"register_operand\"\t\"=r  ,r  ,r  ,r\")\n     (if_then_else:DF\n@@ -813,13 +828,28 @@ DIVU %1,%1,%2\\;GET %0,:rR\\;NEGU %2,0,%0\\;CSNN %0,$255,%2\")\n       (const_int 0)])\n      (match_operand:DF 1 \"mmix_reg_or_0_operand\" \"rGM,0  ,rGM,GM\")\n      (match_operand:DF 4 \"mmix_reg_or_0_operand\" \"0  ,rGM,GM ,rGM\")))]\n-  \"\"\n+  \"REVERSIBLE_CC_MODE (GET_MODE (operands[3]))\"\n   \"@\n    CS%d2 %0,%3,%1\n    CS%D2 %0,%3,%4\n    ZS%d2 %0,%3,%1\n    ZS%D2 %0,%3,%4\")\n \n+(define_insn \"*movdfcc_real_nonreversible\"\n+  [(set\n+    (match_operand:DF 0 \"register_operand\"\t\"=r  ,r\")\n+    (if_then_else:DF\n+     (match_operator\n+      2 \"mmix_comparison_operator\"\n+      [(match_operand 3 \"mmix_reg_cc_operand\"\t \"r  ,r\")\n+      (const_int 0)])\n+     (match_operand:DF 1 \"mmix_reg_or_0_operand\" \"rGM,rGM\")\n+     (match_operand:DF 4 \"mmix_reg_or_0_operand\" \"0  ,GM\")))]\n+  \"!REVERSIBLE_CC_MODE (GET_MODE (operands[3]))\"\n+  \"@\n+   CS%d2 %0,%3,%1\n+   ZS%d2 %0,%3,%1\")\n+\n ;; FIXME: scc patterns will probably help, I just skip them\n ;; right now.  Revisit.\n \f"}]}