{"sha": "2249b483ed85df4eac35ba68c50ecaf7ea982803", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjI0OWI0ODNlZDg1ZGY0ZWFjMzViYTY4YzUwZWNhZjdlYTk4MjgwMw==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2009-02-02T23:03:20Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2009-02-02T23:03:20Z"}, "message": "re PR c/39034 (Decimal floating-point math done wrong)\n\n\tPR c/39034\n\t* gcc.dg/dfp/pr39034.c: New test.\n\nCo-Authored-By: Ben Elliston <bje@au.ibm.com>\n\nFrom-SVN: r143884", "tree": {"sha": "e4afad632e99b74f7c35d655a339cd7c267050ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4afad632e99b74f7c35d655a339cd7c267050ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2249b483ed85df4eac35ba68c50ecaf7ea982803", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2249b483ed85df4eac35ba68c50ecaf7ea982803", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2249b483ed85df4eac35ba68c50ecaf7ea982803", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2249b483ed85df4eac35ba68c50ecaf7ea982803/comments", "author": null, "committer": null, "parents": [{"sha": "2319eb4e235d231f849d07b1ad634b8efea5720a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2319eb4e235d231f849d07b1ad634b8efea5720a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2319eb4e235d231f849d07b1ad634b8efea5720a"}], "stats": {"total": 117, "additions": 117, "deletions": 0}, "files": [{"sha": "254dab5ca0005aa6d61958e345175dc1b8fe178f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2249b483ed85df4eac35ba68c50ecaf7ea982803/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2249b483ed85df4eac35ba68c50ecaf7ea982803/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2249b483ed85df4eac35ba68c50ecaf7ea982803", "patch": "@@ -1,3 +1,9 @@\n+2009-02-03  Janis Johnson  <janis187@us.ibm.com>\n+\t    Ben Elliston  <bje@au.ibm.com>\n+\n+\tPR c/39034\n+\t* gcc.dg/dfp/pr39034.c: New test.\n+\n 2009-02-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \tPR testsuite/38263"}, {"sha": "6a261c9ddc26c4ebe02548d1a8db4af55134ad66", "filename": "gcc/testsuite/gcc.dg/dfp/pr39034.c", "status": "added", "additions": 111, "deletions": 0, "changes": 111, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2249b483ed85df4eac35ba68c50ecaf7ea982803/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr39034.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2249b483ed85df4eac35ba68c50ecaf7ea982803/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr39034.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr39034.c?ref=2249b483ed85df4eac35ba68c50ecaf7ea982803", "patch": "@@ -0,0 +1,111 @@\n+/* { dg-do run } */\n+/* { dg-options \"-std=gnu99 -O\" } */\n+\n+/* DFP TR 24732 == WG14 / N1176, N1312 */\n+/* Based on a test from Fred Tydeman.  */\n+\n+extern void abort (void);\n+int failures = 0;\n+\n+#ifdef DBG\n+#include <stdio.h>\n+#define FAILURE(MSG) { printf (\"line %d: %s\\n\", __LINE__, MSG); failures++; }\n+#else\n+#define FAILURE(MSG) failures++;\n+#endif\n+\n+\n+/* Test runtime computations.  */\n+\n+void\n+runtime32 (void)\n+{\n+  volatile float v1 = 28.f, v2 = 3.f, v3 = 9.f, v4 = 31.f, v5 = 3.f, v6 = 10.f;\n+  float      b32 = (float)((v1/v2-v3) - (v4/v5-v6));\n+  _Decimal32 d32 = (float)((v1/v2-v3) - (v4/v5-v6));\n+\n+  if (b32)\n+    FAILURE (\"runtime: b32 should be zero\")\n+  if (d32)\n+    FAILURE (\"runtime: d32 should be zero\")\n+}\n+\n+void\n+runtime64 (void)\n+{\n+  volatile double v1 = 28., v2 = 3., v3 = 9., v4 = 31., v5 = 3., v6 = 10.;\n+  double     b64 = (double)((v1/v2-v3) - (v4/v5-v6));\n+  _Decimal64 d64 = (double)((v1/v2-v3) - (v4/v5-v6));\n+\n+  if (b64)\n+    FAILURE (\"runtime: b64 should be zero\")\n+  if (d64)\n+    FAILURE (\"runtime: d64 should be zero\")\n+}\n+\n+void\n+runtime128 (void)\n+{\n+  volatile long double v1 = 28.l, v2 = 3.l, v3 = 9.l,\n+                       v4 = 31.l, v5 = 3.l, v6 = 10.l;\n+  long double b128 = (long double)((v1/v2-v3) - (v4/v5-v6));\n+  _Decimal128 d128 = (long double)((v1/v2-v3) - (v4/v5-v6));\n+\n+  if (b128)\n+    FAILURE (\"runtime: b128 should be zero\")\n+  if (d128)\n+    FAILURE (\"runtime: d128 should be zero\")\n+}\n+\n+/* Test constant folding.  */\n+\n+void\n+fold32 (void)\n+{\n+  double     d32 = (float)((28.f/3.f-9.f) - (31.f/3.f-10.f));\n+  _Decimal32 b32 = (float)((28.f/3.f-9.f) - (31.f/3.f-10.f));\n+\n+  if (b32)\n+    FAILURE (\"fold: b32 should be zero\")\n+  if (d32)\n+    FAILURE (\"fold: d32 should be zero\")\n+}\n+\n+void\n+fold64 (void)\n+{\n+  double     b64 = (double)((28./3.-9.) - (31./3.-10.));\n+  _Decimal64 d64 = (double)((28./3.-9.) - (31./3.-10.));\n+\n+  if (b64)\n+    FAILURE (\"fold: b64 should be zero\")\n+  if (d64)\n+    FAILURE (\"fold: d64 should be zero\")\n+}\n+\n+void\n+fold128 (void)\n+{\n+  long double b128 = (long double)((28./3.-9.) - (31./3.-10.));\n+  _Decimal128 d128 = (long double)((28./3.-9.) - (31./3.-10.));\n+\n+  if (b128)\n+    FAILURE (\"fold: b128 should be zero\")\n+  if (d128)\n+    FAILURE (\"fold: d128 should be zero\")\n+}\n+\n+int\n+main ()\n+{\n+  runtime32 ();\n+  runtime64 ();\n+  runtime128 ();\n+  fold32 ();\n+  fold64 ();\n+  fold128 ();\n+\n+  if (failures != 0)\n+    abort ();\n+  return 0;\n+}"}]}