{"sha": "6bb0776e104b5ca5a7bed9f333a9690174b4d00b", "node_id": "C_kwDOANBUbNoAKDZiYjA3NzZlMTA0YjVjYTVhN2JlZDlmMzMzYTk2OTAxNzRiNGQwMGI", "commit": {"author": {"name": "Jan Beulich", "email": "jbeulich@suse.com", "date": "2022-06-07T07:18:28Z"}, "committer": {"name": "Jan Beulich", "email": "jbeulich@suse.com", "date": "2022-06-07T07:18:28Z"}, "message": "x86: harmonize __builtin_ia32_psadbw*() types\n\nThe 64-bit, 128-bit, and 512-bit variants have V<n>DI return type, in\nline with instruction behavior. Make the 256-bit builtin match, thus\nalso making it match the insn it expands to (using VI8_AVX2_AVX512BW).\n\ngcc/\n\n\t* config/i386/i386-builtin.def (__builtin_ia32_psadbw256):\n\tChange type.\n\t* config/i386/i386-builtin-types.def: New function type\n\t(V4DI, V32QI, V32QI).\n\t* config/i386/i386-expand.cc (ix86_expand_args_builtin): Handle\n\tV4DI_FTYPE_V32QI_V32QI.", "tree": {"sha": "fc12471e526f493e6c92ad2fc493795284c27298", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc12471e526f493e6c92ad2fc493795284c27298"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6bb0776e104b5ca5a7bed9f333a9690174b4d00b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bb0776e104b5ca5a7bed9f333a9690174b4d00b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bb0776e104b5ca5a7bed9f333a9690174b4d00b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bb0776e104b5ca5a7bed9f333a9690174b4d00b/comments", "author": {"login": "jbeulich", "id": 5610135, "node_id": "MDQ6VXNlcjU2MTAxMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbeulich", "html_url": "https://github.com/jbeulich", "followers_url": "https://api.github.com/users/jbeulich/followers", "following_url": "https://api.github.com/users/jbeulich/following{/other_user}", "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions", "organizations_url": "https://api.github.com/users/jbeulich/orgs", "repos_url": "https://api.github.com/users/jbeulich/repos", "events_url": "https://api.github.com/users/jbeulich/events{/privacy}", "received_events_url": "https://api.github.com/users/jbeulich/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jbeulich", "id": 5610135, "node_id": "MDQ6VXNlcjU2MTAxMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbeulich", "html_url": "https://github.com/jbeulich", "followers_url": "https://api.github.com/users/jbeulich/followers", "following_url": "https://api.github.com/users/jbeulich/following{/other_user}", "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions", "organizations_url": "https://api.github.com/users/jbeulich/orgs", "repos_url": "https://api.github.com/users/jbeulich/repos", "events_url": "https://api.github.com/users/jbeulich/events{/privacy}", "received_events_url": "https://api.github.com/users/jbeulich/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76e3d60c16dc5ea31d2e83aff9735d53a0a275d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76e3d60c16dc5ea31d2e83aff9735d53a0a275d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76e3d60c16dc5ea31d2e83aff9735d53a0a275d1"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "7a2da1db0b0e310faf69804d836b5dcb300aa6ca", "filename": "gcc/config/i386/i386-builtin-types.def", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bb0776e104b5ca5a7bed9f333a9690174b4d00b/gcc%2Fconfig%2Fi386%2Fi386-builtin-types.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bb0776e104b5ca5a7bed9f333a9690174b4d00b/gcc%2Fconfig%2Fi386%2Fi386-builtin-types.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-builtin-types.def?ref=6bb0776e104b5ca5a7bed9f333a9690174b4d00b", "patch": "@@ -516,6 +516,7 @@ DEF_FUNCTION_TYPE (V8DI, V8DI, V2DI, INT)\n DEF_FUNCTION_TYPE (V8DI, V8DI, V2DI, INT, V8DI, UQI)\n DEF_FUNCTION_TYPE (V8DI, V8DI, V4DI, INT, V8DI, UQI)\n DEF_FUNCTION_TYPE (V4DI, V8SI, V8SI)\n+DEF_FUNCTION_TYPE (V4DI, V32QI, V32QI)\n DEF_FUNCTION_TYPE (V8DI, V64QI, V64QI)\n DEF_FUNCTION_TYPE (V4DI, V4DI, V2DI)\n DEF_FUNCTION_TYPE (V4DI, PCV4DI, V4DI)"}, {"sha": "e6daad476927980333041041b27a500f7996d9a2", "filename": "gcc/config/i386/i386-builtin.def", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bb0776e104b5ca5a7bed9f333a9690174b4d00b/gcc%2Fconfig%2Fi386%2Fi386-builtin.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bb0776e104b5ca5a7bed9f333a9690174b4d00b/gcc%2Fconfig%2Fi386%2Fi386-builtin.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-builtin.def?ref=6bb0776e104b5ca5a7bed9f333a9690174b4d00b", "patch": "@@ -1217,7 +1217,7 @@ BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_mulv16hi3, \"__builtin_ia32_pmullw256\"\n BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_mulv8si3, \"__builtin_ia32_pmulld256\"  , IX86_BUILTIN_PMULLD256  , UNKNOWN, (int) V8SI_FTYPE_V8SI_V8SI)\n BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_vec_widen_umult_even_v8si, \"__builtin_ia32_pmuludq256\", IX86_BUILTIN_PMULUDQ256, UNKNOWN, (int) V4DI_FTYPE_V8SI_V8SI)\n BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_iorv4di3, \"__builtin_ia32_por256\", IX86_BUILTIN_POR256, UNKNOWN, (int) V4DI_FTYPE_V4DI_V4DI)\n-BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_avx2_psadbw, \"__builtin_ia32_psadbw256\", IX86_BUILTIN_PSADBW256, UNKNOWN, (int) V16HI_FTYPE_V32QI_V32QI)\n+BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_avx2_psadbw, \"__builtin_ia32_psadbw256\", IX86_BUILTIN_PSADBW256, UNKNOWN, (int) V4DI_FTYPE_V32QI_V32QI)\n BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_avx2_pshufbv32qi3, \"__builtin_ia32_pshufb256\", IX86_BUILTIN_PSHUFB256, UNKNOWN, (int) V32QI_FTYPE_V32QI_V32QI)\n BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_avx2_pshufdv3, \"__builtin_ia32_pshufd256\", IX86_BUILTIN_PSHUFD256, UNKNOWN, (int) V8SI_FTYPE_V8SI_INT)\n BDESC (OPTION_MASK_ISA_AVX2, 0, CODE_FOR_avx2_pshufhwv3, \"__builtin_ia32_pshufhw256\", IX86_BUILTIN_PSHUFHW256, UNKNOWN, (int) V16HI_FTYPE_V16HI_INT)"}, {"sha": "8bc54304da86739269b9ee9b2c89aa21fa72add6", "filename": "gcc/config/i386/i386-expand.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bb0776e104b5ca5a7bed9f333a9690174b4d00b/gcc%2Fconfig%2Fi386%2Fi386-expand.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bb0776e104b5ca5a7bed9f333a9690174b4d00b/gcc%2Fconfig%2Fi386%2Fi386-expand.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-expand.cc?ref=6bb0776e104b5ca5a7bed9f333a9690174b4d00b", "patch": "@@ -10367,6 +10367,7 @@ ix86_expand_args_builtin (const struct builtin_description *d,\n     case V8SI_FTYPE_V16HI_V16HI:\n     case V4DI_FTYPE_V4DI_V4DI:\n     case V4DI_FTYPE_V8SI_V8SI:\n+    case V4DI_FTYPE_V32QI_V32QI:\n     case V8DI_FTYPE_V64QI_V64QI:\n       if (comparison == UNKNOWN)\n \treturn ix86_expand_binop_builtin (icode, exp, target);"}]}