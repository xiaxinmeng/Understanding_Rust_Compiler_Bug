{"sha": "339e6723c9c2c062933c17eec128407a0778d99d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzM5ZTY3MjNjOWMyYzA2MjkzM2MxN2VlYzEyODQwN2EwNzc4ZDk5ZA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-09-03T14:29:00Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-09-03T14:29:00Z"}, "message": "re PR tree-optimization/87200 (ICE in set_ssa_val_to, at tree-ssa-sccvn.c:3629)\n\n2018-09-03  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/87200\n\t* tree-ssa-sccvn.c (vn_nary_build_or_lookup_1): Valueize a\n\tsimplify result.\n\n\t* gcc.dg/torture/pr87200.c: New testcase.\n\nFrom-SVN: r264062", "tree": {"sha": "2fd2df65b089c28553d9199311459088d891fe2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fd2df65b089c28553d9199311459088d891fe2c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/339e6723c9c2c062933c17eec128407a0778d99d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/339e6723c9c2c062933c17eec128407a0778d99d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/339e6723c9c2c062933c17eec128407a0778d99d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/339e6723c9c2c062933c17eec128407a0778d99d/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7efe0dd0b43db1ac5070908290a3febfcfb73513", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7efe0dd0b43db1ac5070908290a3febfcfb73513", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7efe0dd0b43db1ac5070908290a3febfcfb73513"}], "stats": {"total": 43, "additions": 41, "deletions": 2}, "files": [{"sha": "981e7063f971b906e4e1680cd2dc7987c1a88311", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=339e6723c9c2c062933c17eec128407a0778d99d", "patch": "@@ -1,3 +1,9 @@\n+2018-09-03  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/87200\n+\t* tree-ssa-sccvn.c (vn_nary_build_or_lookup_1): Valueize a\n+\tsimplify result.\n+\n 2018-09-03  Martin Liska  <mliska@suse.cz>\n \n \tPR tree-optimization/87201"}, {"sha": "b44c714d7d20b426e4a2a8557c67a68de9b6f1f6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=339e6723c9c2c062933c17eec128407a0778d99d", "patch": "@@ -1,3 +1,8 @@\n+2018-09-03  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/87200\n+\t* gcc.dg/torture/pr87200.c: New testcase.\n+\n 2018-09-03  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/87197"}, {"sha": "a0356315f26b658b9fcd22f76fc3d4e11234356f", "filename": "gcc/testsuite/gcc.dg/torture/pr87200.c", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87200.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87200.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87200.c?ref=339e6723c9c2c062933c17eec128407a0778d99d", "patch": "@@ -0,0 +1,23 @@\n+/* { dg-do compile } */\n+\n+unsigned long long int ry;\n+\n+int\n+gl (void)\n+{\n+  long long int my = 0;\n+  unsigned long long int *oi = (unsigned long long int *) &my;\n+  int s9;\n+\n+  s9 = !!gl () ? ry : 0;\n+  if (s9 != 0)\n+    oi = &ry;\n+  else\n+    {\n+      my = ry;\n+      *oi += my;\n+    }\n+\n+  return *oi;\n+}\n+"}, {"sha": "1f00335885136f54c7151134b35cd95599275559", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/339e6723c9c2c062933c17eec128407a0778d99d/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=339e6723c9c2c062933c17eec128407a0778d99d", "patch": "@@ -1759,8 +1759,13 @@ vn_nary_build_or_lookup_1 (gimple_match_op *res_op, bool insert)\n   gimple *new_stmt = NULL;\n   if (res\n       && gimple_simplified_result_is_gimple_val (res_op))\n-    /* The expression is already available.  */\n-    result = res_op->ops[0];\n+    {\n+      /* The expression is already available.  */\n+      result = res_op->ops[0];\n+      /* Valueize it, simplification returns sth in AVAIL only.  */\n+      if (TREE_CODE (result) == SSA_NAME)\n+\tresult = SSA_VAL (result);\n+    }\n   else\n     {\n       tree val = vn_lookup_simplify_result (res_op);"}]}