{"sha": "fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRiOGY0MTg5Y2NmZTllZjU2ZmZiNDM4ZWU4ZDRlOTg5MDJiYmZkYw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-09-18T18:05:40Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-09-18T18:05:40Z"}, "message": "re PR c++/33462 (Broken diagnostic: 'va_arg_expr' not supported by dump_expr)\n\n/cp\n2007-09-18  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33462\n\t* cxx-pretty-print.c (pp_cxx_va_arg_expression): Add.\n\t(pp_cxx_primary_expression): Use it.\n\t* cxx-pretty-print.h (pp_cxx_va_arg_expression): Declare.\n\t* error.c (dump_expr): Use it.\n\n/testsuite\n2007-09-18  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33462\n\t* g++.dg/ext/va-arg1.C: New.\n\nFrom-SVN: r128584", "tree": {"sha": "429400c1361e2c95bd0f6bf59f5584a1f07a9599", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/429400c1361e2c95bd0f6bf59f5584a1f07a9599"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/comments", "author": null, "committer": null, "parents": [{"sha": "6b9de967764c7d77ee1572a578f292d6afe40280", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b9de967764c7d77ee1572a578f292d6afe40280", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b9de967764c7d77ee1572a578f292d6afe40280"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "6f9e04d48f4551accf0f7cbd21e552fb3ab4f9f8", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "patch": "@@ -1,3 +1,11 @@\n+2007-09-18  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33462\n+\t* cxx-pretty-print.c (pp_cxx_va_arg_expression): Add.\n+\t(pp_cxx_primary_expression): Use it.\n+\t* cxx-pretty-print.h (pp_cxx_va_arg_expression): Declare.\n+\t* error.c (dump_expr): Use it.\n+\n 2007-09-18  Paolo Carlini  <pcarlini@suse.de>\n \n \tPR c++/33463"}, {"sha": "b660f5347649147bc3589426e598bcc58487219d", "filename": "gcc/cp/cxx-pretty-print.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2Fcxx-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2Fcxx-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcxx-pretty-print.c?ref=fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "patch": "@@ -351,6 +351,8 @@ pp_cxx_id_expression (cxx_pretty_printer *pp, tree t)\n      id-expression   \n \n    GNU Extensions:\n+     __builtin_va_arg ( assignment-expression , type-id )\n+\n      __has_nothrow_assign ( type-id )   \n      __has_nothrow_constructor ( type-id )\n      __has_nothrow_copy ( type-id )\n@@ -410,6 +412,10 @@ pp_cxx_primary_expression (cxx_pretty_printer *pp, tree t)\n       pp_cxx_trait_expression (pp, t);\n       break;\n \n+    case VA_ARG_EXPR:\n+      pp_cxx_va_arg_expression (pp, t);\n+      break;\n+\n     default:\n       pp_c_primary_expression (pp_c_base (pp), t);\n       break;\n@@ -2152,6 +2158,17 @@ pp_cxx_typeid_expression (cxx_pretty_printer *pp, tree t)\n   pp_cxx_right_paren (pp);\n }\n \n+void\n+pp_cxx_va_arg_expression (cxx_pretty_printer *pp, tree t)\n+{\n+  pp_cxx_identifier (pp, \"__builtin_va_arg\");\n+  pp_cxx_left_paren (pp);\n+  pp_cxx_assignment_expression (pp, TREE_OPERAND (t, 0));\n+  pp_cxx_separate_with (pp, ',');\n+  pp_cxx_type_id (pp, TREE_TYPE (t));\n+  pp_cxx_right_paren (pp);\n+}\n+\n void\n pp_cxx_trait_expression (cxx_pretty_printer *pp, tree t)\n {"}, {"sha": "b653376447803f3f678b314d35114b2d7deb1476", "filename": "gcc/cp/cxx-pretty-print.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2Fcxx-pretty-print.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2Fcxx-pretty-print.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcxx-pretty-print.h?ref=fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "patch": "@@ -71,5 +71,6 @@ void pp_cxx_declaration (cxx_pretty_printer *, tree);\n void pp_cxx_canonical_template_parameter (cxx_pretty_printer *, tree);\n void pp_cxx_trait_expression (cxx_pretty_printer *, tree);\n void pp_cxx_typeid_expression (cxx_pretty_printer *, tree);\n+void pp_cxx_va_arg_expression (cxx_pretty_printer *, tree);\n \n #endif /* GCC_CXX_PRETTY_PRINT_H */"}, {"sha": "602426a79a1477b39fa477f5b3e1826c742c5899", "filename": "gcc/cp/error.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "patch": "@@ -2062,6 +2062,10 @@ dump_expr (tree t, int flags)\n       pp_cxx_typeid_expression (cxx_pp, t);\n       break;\n \n+    case VA_ARG_EXPR:\n+      pp_cxx_va_arg_expression (cxx_pp, t);\n+      break;\n+\n       /*  This list is incomplete, but should suffice for now.\n \t  It is very important that `sorry' does not call\n \t  `report_error_function'.  That could cause an infinite loop.  */"}, {"sha": "24f18f47727efadefe47bf9eec54eccc186e5034", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "patch": "@@ -1,3 +1,8 @@\n+2007-09-18  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33462\n+\t* g++.dg/ext/va-arg1.C: New.\n+\n 2007-09-18  Tobias Burnus  <burnus@net-b.de>\n \n \t* gfortran.dg/elemental_optional_args_1.f90: Fix test."}, {"sha": "5e76d45da1292429426f92c0227fb8c8dbf655b9", "filename": "gcc/testsuite/g++.dg/ext/va-arg1.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fva-arg1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fva-arg1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fva-arg1.C?ref=fdb8f4189ccfe9ef56ffb438ee8d4e98902bbfdc", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/33462\n+\n+struct A {};\n+\n+void foo()\n+{\n+  ++__builtin_va_arg(0, A); // { dg-error \"'\\\\+\\\\+__builtin_va_arg\\\\(0, A\\\\)'\" }\n+}"}]}