{"sha": "977a7752c7617d388cf14b72606e36fa5ddcc6f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTc3YTc3NTJjNzYxN2QzODhjZjE0YjcyNjA2ZTM2ZmE1ZGRjYzZmNw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-04-26T10:38:48Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-04-26T10:38:48Z"}, "message": "(layout_decl): Turn off DECL_BIT_FIELD for BLKmode that's properly\naligned and a multiple of a byte.\n\nFrom-SVN: r11892", "tree": {"sha": "496cf2a0d79b51de615aceb2c94c18cb8c9beeae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/496cf2a0d79b51de615aceb2c94c18cb8c9beeae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/977a7752c7617d388cf14b72606e36fa5ddcc6f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/977a7752c7617d388cf14b72606e36fa5ddcc6f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/977a7752c7617d388cf14b72606e36fa5ddcc6f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/977a7752c7617d388cf14b72606e36fa5ddcc6f7/comments", "author": null, "committer": null, "parents": [{"sha": "46d4a027e75d9d5dbafcf6132c9986e9b601cd80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46d4a027e75d9d5dbafcf6132c9986e9b601cd80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46d4a027e75d9d5dbafcf6132c9986e9b601cd80"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "78d53c060aafb7759d35d3fc4993014984a08672", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/977a7752c7617d388cf14b72606e36fa5ddcc6f7/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/977a7752c7617d388cf14b72606e36fa5ddcc6f7/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=977a7752c7617d388cf14b72606e36fa5ddcc6f7", "patch": "@@ -278,6 +278,14 @@ layout_decl (decl, known_align)\n \t}\n     }\n \n+  /* Turn off DECL_BIT_FIELD if we won't need it set.  */\n+  if (DECL_BIT_FIELD (decl) && TYPE_MODE (type) == BLKmode\n+      && known_align % TYPE_ALIGN (type) == 0\n+      && DECL_SIZE (decl) != 0\n+      && (TREE_CODE (DECL_SIZE (decl)) != INTEGER_CST\n+\t  || (TREE_INT_CST_LOW (DECL_SIZE (decl)) % BITS_PER_UNIT) == 0))\n+    DECL_BIT_FIELD (decl) = 0;\n+\n   /* Evaluate nonconstant size only once, either now or as soon as safe.  */\n   if (DECL_SIZE (decl) != 0 && TREE_CODE (DECL_SIZE (decl)) != INTEGER_CST)\n     DECL_SIZE (decl) = variable_size (DECL_SIZE (decl));"}]}