{"sha": "4210c97522243841b6537f1e65dbcea5a726ef46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDIxMGM5NzUyMjI0Mzg0MWI2NTM3ZjFlNjVkYmNlYTVhNzI2ZWY0Ng==", "commit": {"author": {"name": "Javier Miranda", "email": "miranda@adacore.com", "date": "2007-08-14T08:48:56Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-08-14T08:48:56Z"}, "message": "par-ch6.adb (P_Formal_Part): Fix wrong error message associated with null-excluding access types.\n\n2007-08-14  Javier Miranda  <miranda@adacore.com>\n\n\t* par-ch6.adb (P_Formal_Part): Fix wrong error message associated with\n\tnull-excluding access types.\n\nFrom-SVN: r127457", "tree": {"sha": "5ebe182878d7cdfd5165787aac415d6d8252647a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ebe182878d7cdfd5165787aac415d6d8252647a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4210c97522243841b6537f1e65dbcea5a726ef46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4210c97522243841b6537f1e65dbcea5a726ef46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4210c97522243841b6537f1e65dbcea5a726ef46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4210c97522243841b6537f1e65dbcea5a726ef46/comments", "author": {"login": "miranda-adacore", "id": 54413934, "node_id": "MDQ6VXNlcjU0NDEzOTM0", "avatar_url": "https://avatars.githubusercontent.com/u/54413934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miranda-adacore", "html_url": "https://github.com/miranda-adacore", "followers_url": "https://api.github.com/users/miranda-adacore/followers", "following_url": "https://api.github.com/users/miranda-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/miranda-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/miranda-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miranda-adacore/subscriptions", "organizations_url": "https://api.github.com/users/miranda-adacore/orgs", "repos_url": "https://api.github.com/users/miranda-adacore/repos", "events_url": "https://api.github.com/users/miranda-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/miranda-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b63e38373ac562255170a83368a892ddfb77c98e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b63e38373ac562255170a83368a892ddfb77c98e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b63e38373ac562255170a83368a892ddfb77c98e"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "a5262f420acf746a27999a25242c5460676f4b0b", "filename": "gcc/ada/par-ch6.adb", "status": "modified", "additions": 21, "deletions": 8, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4210c97522243841b6537f1e65dbcea5a726ef46/gcc%2Fada%2Fpar-ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4210c97522243841b6537f1e65dbcea5a726ef46/gcc%2Fada%2Fpar-ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch6.adb?ref=4210c97522243841b6537f1e65dbcea5a726ef46", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -989,6 +989,7 @@ package body Ch6 is\n       Ident              : Nat;\n       Ident_Sloc         : Source_Ptr;\n       Not_Null_Present   : Boolean := False;\n+      Not_Null_Sloc      : Source_Ptr;\n \n       Idents : array (Int range 1 .. 4096) of Entity_Id;\n       --  This array holds the list of defining identifiers. The upper bound\n@@ -1087,6 +1088,7 @@ package body Ch6 is\n \n                --  Scan possible NOT NULL for Ada 2005 (AI-231, AI-447)\n \n+               Not_Null_Sloc := Token_Ptr;\n                Not_Null_Present :=\n                  P_Null_Exclusion (Allow_Anonymous_In_95 => True);\n \n@@ -1109,8 +1111,19 @@ package body Ch6 is\n                else\n                   if Token = Tok_In or else Token = Tok_Out then\n                      if Not_Null_Present then\n-                        Error_Msg_SC\n-                          (\"ACCESS must be placed after the parameter mode\");\n+                        Error_Msg\n+                          (\"`NOT NULL` can only be used with `ACCESS`\",\n+                           Not_Null_Sloc);\n+\n+                        if Token = Tok_In then\n+                           Error_Msg\n+                             (\"\\`IN` not allowed together with `ACCESS`\",\n+                              Not_Null_Sloc);\n+                        else\n+                           Error_Msg\n+                             (\"\\`OUT` not allowed together with `ACCESS`\",\n+                              Not_Null_Sloc);\n+                        end if;\n                      end if;\n \n                      P_Mode (Specification_Node);\n@@ -1454,14 +1467,14 @@ package body Ch6 is\n    begin\n       Scan; -- past RETURN\n \n-      --  Simple_return_statement, no expression, return an N_Return_Statement\n-      --  node with the expression field left Empty.\n+      --  Simple_return_statement, no expression, return an\n+      --  N_Simple_Return_Statement node with the expression field left Empty.\n \n       if Token = Tok_Semicolon then\n          Scan; -- past ;\n-         Return_Node := New_Node (N_Return_Statement, Return_Sloc);\n+         Return_Node := New_Node (N_Simple_Return_Statement, Return_Sloc);\n \n-      --  Non-simple case\n+      --  Non-trivial case\n \n       else\n          --  Simple_return_statement with expression\n@@ -1471,7 +1484,7 @@ package body Ch6 is\n          --  message is probably that we have a missing semicolon.\n \n          if Is_Simple then\n-            Return_Node := New_Node (N_Return_Statement, Return_Sloc);\n+            Return_Node := New_Node (N_Simple_Return_Statement, Return_Sloc);\n \n             if Token not in Token_Class_Eterm then\n                Set_Expression (Return_Node, P_Expression_No_Right_Paren);"}]}