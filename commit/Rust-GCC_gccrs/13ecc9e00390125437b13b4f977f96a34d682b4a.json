{"sha": "13ecc9e00390125437b13b4f977f96a34d682b4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNlY2M5ZTAwMzkwMTI1NDM3YjEzYjRmOTc3Zjk2YTM0ZDY4MmI0YQ==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2004-04-06T05:58:44Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2004-04-06T05:58:44Z"}, "message": "sh.c (prepare_move_operands): Use emit_call_insn when the TLS address is generated by a function call.\n\n\t* config/sh/sh.c (prepare_move_operands): Use emit_call_insn\n\twhen the TLS address is generated by a function call.\n\t* config/sh/sh.md (tls_global_dynamic): Use a call expression.\n\t(tls_local_dynamic): Likewise.\n\nFrom-SVN: r80450", "tree": {"sha": "023b11b171dbd42132cce5b1109108400a331d44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/023b11b171dbd42132cce5b1109108400a331d44"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13ecc9e00390125437b13b4f977f96a34d682b4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13ecc9e00390125437b13b4f977f96a34d682b4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13ecc9e00390125437b13b4f977f96a34d682b4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13ecc9e00390125437b13b4f977f96a34d682b4a/comments", "author": null, "committer": null, "parents": [{"sha": "cb07f7bbd4366231acfd3b1b375489c5a04a40b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb07f7bbd4366231acfd3b1b375489c5a04a40b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb07f7bbd4366231acfd3b1b375489c5a04a40b6"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "7cf0c67666be5557c02a1c6af8030c36135d9fd9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13ecc9e00390125437b13b4f977f96a34d682b4a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13ecc9e00390125437b13b4f977f96a34d682b4a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=13ecc9e00390125437b13b4f977f96a34d682b4a", "patch": "@@ -1,3 +1,10 @@\n+2004-04-05  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\t* config/sh/sh.c (prepare_move_operands): Use emit_call_insn\n+\twhen the TLS address is generated by a function call.\n+\t* config/sh/sh.md (tls_global_dynamic): Use a call expression.\n+\t(tls_local_dynamic): Likewise.\n+\n 2004-04-05  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* tree.c (reconstruct_complex_type): Use TYPE_READONLY"}, {"sha": "a790c43a04368033381425fc5d09571ff4087077", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13ecc9e00390125437b13b4f977f96a34d682b4a/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13ecc9e00390125437b13b4f977f96a34d682b4a/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=13ecc9e00390125437b13b4f977f96a34d682b4a", "patch": "@@ -944,13 +944,13 @@ prepare_move_operands (rtx operands[], enum machine_mode mode)\n \t    {\n \t    case TLS_MODEL_GLOBAL_DYNAMIC:\n \t      tga_ret = gen_rtx_REG (Pmode, R0_REG);\n-\t      emit_insn (gen_tls_global_dynamic (tga_ret, op1));\n+\t      emit_call_insn (gen_tls_global_dynamic (tga_ret, op1));\n \t      op1 = tga_ret;\n \t      break;\n \n \t    case TLS_MODEL_LOCAL_DYNAMIC:\n \t      tga_ret = gen_rtx_REG (Pmode, R0_REG);\n-\t      emit_insn (gen_tls_local_dynamic (tga_ret, op1));\n+\t      emit_call_insn (gen_tls_local_dynamic (tga_ret, op1));\n \n \t      tmp = gen_reg_rtx (Pmode);\n \t      emit_move_insn (tmp, tga_ret);"}, {"sha": "a31e8b125c1b44b5d53c4c202451e6dd5538afb1", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13ecc9e00390125437b13b4f977f96a34d682b4a/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13ecc9e00390125437b13b4f977f96a34d682b4a/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=13ecc9e00390125437b13b4f977f96a34d682b4a", "patch": "@@ -6863,8 +6863,9 @@\n \n (define_insn \"tls_global_dynamic\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=&z\")\n-\t(unspec:SI [(match_operand:SI 1 \"\" \"\")]\n-\t\t    UNSPEC_TLSGD))\n+\t(call (unspec:SI [(match_operand:SI 1 \"\" \"\")]\n+\t\t\t  UNSPEC_TLSGD)\n+\t      (const_int 0)))\n    (use (reg:PSI FPSCR_REG))\n    (use (reg:SI PIC_REG))\n    (clobber (reg:SI PR_REG))\n@@ -6891,8 +6892,9 @@ mov.l\\\\t1f,r4\\\\n\\\\\n \n (define_insn \"tls_local_dynamic\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=&z\")\n-\t(unspec:SI [(match_operand:SI 1 \"\" \"\")]\n-\t\t    UNSPEC_TLSLDM))\n+\t(call (unspec:SI [(match_operand:SI 1 \"\" \"\")]\n+\t\t\t  UNSPEC_TLSLDM)\n+\t      (const_int 0)))\n    (use (reg:PSI FPSCR_REG))\n    (use (reg:SI PIC_REG))\n    (clobber (reg:SI PR_REG))"}]}