{"sha": "7c08017416be9c16a25a1459b59329500be7ab10", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2MwODAxNzQxNmJlOWMxNmEyNWExNDU5YjU5MzI5NTAwYmU3YWIxMA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-10-13T18:18:30Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-10-13T18:18:30Z"}, "message": "(call, call_value): No longer call i960_expand_call,\n\ninstead call call_internal/call_value_internal pattern.\n(call_internal, call_value_internal): Rewrite patterns to pass new\nargs to i960_output_call_insn.\n\nFrom-SVN: r2434", "tree": {"sha": "ba4c67cc8d2bf1df369aebd10468e0d594dadb2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba4c67cc8d2bf1df369aebd10468e0d594dadb2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c08017416be9c16a25a1459b59329500be7ab10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c08017416be9c16a25a1459b59329500be7ab10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c08017416be9c16a25a1459b59329500be7ab10", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c08017416be9c16a25a1459b59329500be7ab10/comments", "author": null, "committer": null, "parents": [{"sha": "83f49630c33e1c72bebef597d9f56570b3702fe7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83f49630c33e1c72bebef597d9f56570b3702fe7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83f49630c33e1c72bebef597d9f56570b3702fe7"}], "stats": {"total": 28, "additions": 18, "deletions": 10}, "files": [{"sha": "8ed7c1a9ea1280605c24a051df79841056d13cf2", "filename": "gcc/config/i960/i960.md", "status": "modified", "additions": 18, "deletions": 10, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c08017416be9c16a25a1459b59329500be7ab10/gcc%2Fconfig%2Fi960%2Fi960.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c08017416be9c16a25a1459b59329500be7ab10/gcc%2Fconfig%2Fi960%2Fi960.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi960%2Fi960.md?ref=7c08017416be9c16a25a1459b59329500be7ab10", "patch": "@@ -2074,20 +2074,24 @@\n ;;- jump to subroutine\n \n (define_expand \"call\"\n-  [(call (match_operand:SI 0 \"general_operand\" \"\")\n-\t (match_operand:SI 1 \"immediate_operand\" \"\"))]\n+  [(call (match_operand:SI 0 \"general_operand\" \"g\")\n+\t (match_operand:SI 1 \"immediate_operand\" \"i\"))]\n   \"\"\n   \"\n {\n-  i960_expand_call (operand0, operand1, 0);\n+  emit_insn (gen_call_internal (operands[0], operands[1],\n+\t\t\t\tvirtual_outgoing_args_rtx));\n   DONE;\n }\")\n \n-(define_insn \"\"\n+(define_insn \"call_internal\"\n   [(call (match_operand:SI 0 \"general_operand\" \"g\")\n-\t (match_operand:SI 1 \"immediate_operand\" \"i\"))]\n+\t (match_operand:SI 1 \"immediate_operand\" \"i\"))\n+   (use (match_operand:SI 2 \"address_operand\" \"p\"))\n+   (clobber (match_scratch:SI 3 \"=&r\"))]\n   \"\"\n-  \"* return i960_output_call_insn (operands[0], operands[1], insn);\"\n+  \"* return i960_output_call_insn (operands[0], operands[1], operands[2],\n+\t\t\t\t   operands[3], insn);\"\n   [(set_attr \"type\" \"call\")])\n \n (define_expand \"call_value\"\n@@ -2097,16 +2101,20 @@\n   \"\"\n   \"\n {\n-  i960_expand_call (operand1, operand2, operand0);\n+  emit_insn (gen_call_value_internal (operands[0], operands[1], operands[2],\n+\t\t\t\t      virtual_outgoing_args_rtx));\n   DONE;\n }\")\n \n-(define_insn \"\"\n+(define_insn \"call_value_internal\"\n   [(set (match_operand 0 \"register_operand\" \"=d\")\n \t(call (match_operand:SI 1 \"general_operand\" \"g\")\n-\t      (match_operand:SI 2 \"immediate_operand\" \"i\")))]\n+\t      (match_operand:SI 2 \"immediate_operand\" \"i\")))\n+   (use (match_operand:SI 3 \"address_operand\" \"p\"))\n+   (clobber (match_scratch:SI 4 \"=&r\"))]\n   \"\"\n-  \"* return i960_output_call_insn (operands[1], operands[2], insn);\"\n+  \"* return i960_output_call_insn (operands[1], operands[2], operands[3],\n+\t\t\t\t   operands[4], insn);\"\n   [(set_attr \"type\" \"call\")])\n \n (define_insn \"return\""}]}