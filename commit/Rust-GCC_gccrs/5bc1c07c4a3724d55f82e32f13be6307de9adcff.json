{"sha": "5bc1c07c4a3724d55f82e32f13be6307de9adcff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWJjMWMwN2M0YTM3MjRkNTVmODJlMzJmMTNiZTYzMDdkZTlhZGNmZg==", "commit": {"author": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2015-07-16T19:17:26Z"}, "committer": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2015-07-16T19:17:26Z"}, "message": "stl_algobase.h (__miter_base): Move...\n\n2015-07-16  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n\n\t* include/bits/stl_algobase.h (__miter_base): Move...\n\t* include/bits/cpp_type_traits.h: ...here.\n\t* include/debug/functions.h (__foreign_iterator_aux): Use latter.\n\t* testsuite/23_containers/vector/debug/insert7_neg.cc: New.\n\nFrom-SVN: r225902", "tree": {"sha": "c141f5ab885bf0457debc4ef7a1854d9c94e6e02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c141f5ab885bf0457debc4ef7a1854d9c94e6e02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5bc1c07c4a3724d55f82e32f13be6307de9adcff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bc1c07c4a3724d55f82e32f13be6307de9adcff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bc1c07c4a3724d55f82e32f13be6307de9adcff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bc1c07c4a3724d55f82e32f13be6307de9adcff/comments", "author": null, "committer": null, "parents": [{"sha": "a4cb876dc96b5e400650422e16264f9d50b6751b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4cb876dc96b5e400650422e16264f9d50b6751b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4cb876dc96b5e400650422e16264f9d50b6751b"}], "stats": {"total": 67, "additions": 60, "deletions": 7}, "files": [{"sha": "3362427f99746c64f3fe9ae9e9f188f15e39c96d", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5bc1c07c4a3724d55f82e32f13be6307de9adcff", "patch": "@@ -1,3 +1,10 @@\n+2015-07-16  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n+\n+\t* include/bits/stl_algobase.h (__miter_base): Move...\n+\t* include/bits/cpp_type_traits.h: ...here.\n+\t* include/debug/functions.h (__foreign_iterator_aux): Use latter.\n+\t* testsuite/23_containers/vector/debug/insert7_neg.cc: New.\n+\n 2015-07-13  Jonathan Wakely  <jwakely@redhat.com>\n \n \tPR libstdc++/66855"}, {"sha": "b66b61f2c65dff57a78949f481a92c3d258f7459", "filename": "libstdc++-v3/include/bits/cpp_type_traits.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fcpp_type_traits.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fcpp_type_traits.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fcpp_type_traits.h?ref=5bc1c07c4a3724d55f82e32f13be6307de9adcff", "patch": "@@ -399,6 +399,13 @@ __INT_N(__GLIBCXX_TYPE_INT_N_3)\n       typedef __false_type __type;\n     };\n \n+  // Fallback implementation of the function in bits/stl_iterator.h used to\n+  // remove the move_iterator wrapper.\n+  template<typename _Iterator>\n+    inline _Iterator\n+    __miter_base(_Iterator __it)\n+    { return __it; }\n+\n _GLIBCXX_END_NAMESPACE_VERSION\n } // namespace\n "}, {"sha": "75a15167e937fb25cc234b6c60bd43365992e7cd", "filename": "libstdc++-v3/include/bits/stl_algobase.h", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h?ref=5bc1c07c4a3724d55f82e32f13be6307de9adcff", "patch": "@@ -277,12 +277,6 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     __niter_base(_Iterator __it)\n     { return __it; }\n \n-  // Likewise for move_iterator.\n-  template<typename _Iterator>\n-    inline _Iterator\n-    __miter_base(_Iterator __it)\n-    { return __it; }\n-\n   // All of these auxiliary structs serve two purposes.  (1) Replace\n   // calls to copy with memmove whenever possible.  (Memmove, not memcpy,\n   // because the input and output ranges are permitted to overlap.)"}, {"sha": "a9f234b0723513e801d1eb58c3feeed92492acb7", "filename": "libstdc++-v3/include/debug/functions.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Ffunctions.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Ffunctions.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Ffunctions.h?ref=5bc1c07c4a3724d55f82e32f13be6307de9adcff", "patch": "@@ -198,7 +198,8 @@ namespace __gnu_debug\n \t\t\t   std::__false_type)\n     {\n       return _Insert_range_from_self_is_safe<_Sequence>::__value\n-\t     || __foreign_iterator_aux2(__it, __other, __other_end);\n+\t|| __foreign_iterator_aux2(__it, std::__miter_base(__other),\n+\t\t\t\t   std::__miter_base(__other_end));\n     }\n \n   template<typename _Iterator, typename _Sequence,"}, {"sha": "eef427f1e4442e06dfe371ba3bc00ff4db69665a", "filename": "libstdc++-v3/testsuite/23_containers/vector/debug/insert7_neg.cc", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fdebug%2Finsert7_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bc1c07c4a3724d55f82e32f13be6307de9adcff/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fdebug%2Finsert7_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fdebug%2Finsert7_neg.cc?ref=5bc1c07c4a3724d55f82e32f13be6307de9adcff", "patch": "@@ -0,0 +1,44 @@\n+// -*- C++ -*-\n+\n+// Copyright (C) 2015 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// { dg-options \"-std=gnu++11\" }\n+// { dg-do run { xfail *-*-* } }\n+\n+#include <memory>\n+#include <iterator>\n+#include <debug/vector>\n+\n+void\n+test01()\n+{\n+  __gnu_debug::vector<std::unique_ptr<int>> v;\n+\n+  v.emplace_back(new int(0));\n+  v.emplace_back(new int(1));\n+\n+  v.insert(begin(v) + 1,\n+\t   make_move_iterator(begin(v)),\n+\t   make_move_iterator(end(v)));\n+}\n+\n+int\n+main()\n+{\n+  test01();\n+}"}]}