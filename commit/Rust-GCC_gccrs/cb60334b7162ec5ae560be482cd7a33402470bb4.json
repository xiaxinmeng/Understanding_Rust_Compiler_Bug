{"sha": "cb60334b7162ec5ae560be482cd7a33402470bb4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2I2MDMzNGI3MTYyZWM1YWU1NjBiZTQ4MmNkN2EzMzQwMjQ3MGJiNA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-01-15T12:31:28Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-01-15T12:32:44Z"}, "message": "testsuite/96098 - remove redundant testcase\n\nThe testcase morphed in a way no longer testing what it was originally supposed to do and slightly altering it shows the original issue isn't fixed (anymore).\nThe limit as set as result of PR91403 (and dups) prevents the issue for larger\narrays but the testcase has\n\ndouble a[128][128];\n\nwhich results in a group size of \"just\" 512 (the limit is 4096).  Avoiding\nthe 'BB vectorization with gaps at the end of a load is not supported'\nby altering it to do\n\nvoid foo(void)\n{\n  b[0] = a[0][0];\n  b[1] = a[1][0];\n  b[2] = a[2][0];\n  b[3] = a[3][127];\n}\n\nshows that costing has improved further to not account the dead loads making\nthe previous test inefficient.  In fact the underlying issue isn't fixed\n(we do code-generate dead loads).\n\nIn fact the vector permute load is even profitable, just the excessive\ncode-generation issue exists (and is \"fixed\" by capping it a constant\nboundary, just too high for this particular testcase).\n\nThe testcase now has \"dups\", so I'll simply remove it.\n\n2021-01-15  Richard Biener  <rguenther@suse.de>\n\n\tPR testsuite/96098\n\t* gcc.dg/vect/bb-slp-pr68892.c: Remove.", "tree": {"sha": "31357ee02cc84ad8f275d185f43ab5fcb6347211", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31357ee02cc84ad8f275d185f43ab5fcb6347211"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb60334b7162ec5ae560be482cd7a33402470bb4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb60334b7162ec5ae560be482cd7a33402470bb4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb60334b7162ec5ae560be482cd7a33402470bb4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb60334b7162ec5ae560be482cd7a33402470bb4/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0411ae7f08e0f5a8b02ff313d26d27a0f6d1bb34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0411ae7f08e0f5a8b02ff313d26d27a0f6d1bb34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0411ae7f08e0f5a8b02ff313d26d27a0f6d1bb34"}], "stats": {"total": 20, "additions": 0, "deletions": 20}, "files": [{"sha": "e9909cf0dfa99e0374a2d1879def0656d8e63f6f", "filename": "gcc/testsuite/gcc.dg/vect/bb-slp-pr68892.c", "status": "removed", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0411ae7f08e0f5a8b02ff313d26d27a0f6d1bb34/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr68892.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0411ae7f08e0f5a8b02ff313d26d27a0f6d1bb34/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr68892.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr68892.c?ref=0411ae7f08e0f5a8b02ff313d26d27a0f6d1bb34", "patch": "@@ -1,20 +0,0 @@\n-/* { dg-do compile } */\n-/* { dg-additional-options \"-fvect-cost-model=dynamic\" } */\n-/* { dg-require-effective-target vect_double } */\n-\n-double a[128][128];\n-double b[128];\n-\n-void foo(void)\n-{\n-  b[0] = a[0][0];\n-  b[1] = a[1][0];\n-  b[2] = a[2][0];\n-  b[3] = a[3][0];\n-}\n-\n-/* ???  Due to the gaps we fall back to scalar loads which makes the\n-   vectorization profitable.  */\n-/* { dg-final { scan-tree-dump \"not profitable\" \"slp2\" { xfail { ! aarch64*-*-* } } } } */\n-/* { dg-final { scan-tree-dump \"BB vectorization with gaps at the end of a load is not supported\" \"slp2\" } } */\n-/* { dg-final { scan-tree-dump-times \"Basic block will be vectorized\" 1 \"slp2\" { xfail aarch64*-*-* } } } */"}]}