{"sha": "d46699acb04b053a391abe3841543dfe0cfb5751", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ2Njk5YWNiMDRiMDUzYTM5MWFiZTM4NDE1NDNkZmUwY2ZiNTc1MQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-09-09T06:01:35Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-09-09T06:01:35Z"}, "message": "compiler: guard against implicit double pointer indirection\n    \n    The code that lowers field references can sometimes introduce a double\n    pointer indirection in cases where it is not/safe appropriate. For\n    example, in\n    \n            var p **struct { f int }\n            p.f = 0\n    \n    the assignment LHS was being incorrectly lowered to (*(*p)).f.\n    Detect this situation and issue an error.\n    \n    Fixes golang/go#21770\n    \n    Reviewed-on: https://go-review.googlesource.com/62330\n\nFrom-SVN: r251918", "tree": {"sha": "ba2149f66908b36dd5a9815a4225e7823f2120bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba2149f66908b36dd5a9815a4225e7823f2120bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d46699acb04b053a391abe3841543dfe0cfb5751", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d46699acb04b053a391abe3841543dfe0cfb5751", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d46699acb04b053a391abe3841543dfe0cfb5751", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d46699acb04b053a391abe3841543dfe0cfb5751/comments", "author": null, "committer": null, "parents": [{"sha": "0f99f8e6d63038b68e5e7af950ff9e329bdc40ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f99f8e6d63038b68e5e7af950ff9e329bdc40ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f99f8e6d63038b68e5e7af950ff9e329bdc40ad"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "9576230ee582141a854881308559baa23db13aba", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d46699acb04b053a391abe3841543dfe0cfb5751/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d46699acb04b053a391abe3841543dfe0cfb5751/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=d46699acb04b053a391abe3841543dfe0cfb5751", "patch": "@@ -1,4 +1,4 @@\n-9d0d5c03a8086f5dd3a23e910abd6e470196973c\n+52ebad939927e6cbfb48dd277cef8db451e36533\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "cde1408bbf33442933cb7b0574d5ce85bf469ba3", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d46699acb04b053a391abe3841543dfe0cfb5751/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d46699acb04b053a391abe3841543dfe0cfb5751/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=d46699acb04b053a391abe3841543dfe0cfb5751", "patch": "@@ -11829,6 +11829,12 @@ Type::bind_field_or_method(Gogo* gogo, const Type* type, Expression* expr,\n \t  go_assert(st != NULL);\n \t  if (type->struct_type() == NULL)\n \t    {\n+              if (dereferenced)\n+                {\n+                  go_error_at(location, \"pointer type has no field %qs\",\n+                              Gogo::message_name(name).c_str());\n+                  return Expression::make_error(location);\n+                }\n \t      go_assert(type->points_to() != NULL);\n \t      expr = Expression::make_unary(OPERATOR_MULT, expr,\n \t\t\t\t\t    location);"}]}