{"sha": "a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc3YjdlMzJlYzcyZGM3ZWU2MDg1Y2ZlMGNmMjliNDM4NGM3MGIxZQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-01-28T14:52:07Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-01-28T14:52:07Z"}, "message": "* cse.c (cse_insn): Avoid redundant REG_EQUAL notes.\n\nFrom-SVN: r61971", "tree": {"sha": "64aacc56afbb7ec47bda44a8380a7ded1e0eff0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64aacc56afbb7ec47bda44a8380a7ded1e0eff0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e/comments", "author": null, "committer": null, "parents": [{"sha": "4ff71d245b0c77d25fc7a18aaab439c1a1ae8afa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ff71d245b0c77d25fc7a18aaab439c1a1ae8afa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ff71d245b0c77d25fc7a18aaab439c1a1ae8afa"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "626823b06f37ba2743543bd3349ad6f8f10aa05f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e", "patch": "@@ -1,3 +1,7 @@\n+2003-01-28  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* cse.c (cse_insn): Avoid redundant REG_EQUAL notes.\n+\n 2003-01-28  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/sh/sh.h (CLASS_MAX_NREGS): If TARGET_SHMEDIA, and the given"}, {"sha": "e396042111ee31beded4ca9619e3fb27e66bc63e", "filename": "gcc/cse.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=a77b7e32ec72dc7ee6085cfe0cf29b4384c70b1e", "patch": "@@ -5684,12 +5684,16 @@ cse_insn (insn, libcall_insn)\n \t\t&& GET_CODE (XEXP (XEXP (src_const, 0), 0)) == LABEL_REF\n \t\t&& GET_CODE (XEXP (XEXP (src_const, 0), 1)) == LABEL_REF))\n \t{\n-\t  /* Make sure that the rtx is not shared with any other insn.  */\n-\t  src_const = copy_rtx (src_const);\n+\t  /* We only want a REG_EQUAL note if src_const != src.  */\n+\t  if (! rtx_equal_p (src, src_const))\n+\t    {\n+\t      /* Make sure that the rtx is not shared.  */\n+\t      src_const = copy_rtx (src_const);\n \n-\t  /* Record the actual constant value in a REG_EQUAL note, making\n-\t     a new one if one does not already exist.  */\n-\t  set_unique_reg_note (insn, REG_EQUAL, src_const);\n+\t      /* Record the actual constant value in a REG_EQUAL note,\n+\t\t making a new one if one does not already exist.  */\n+\t      set_unique_reg_note (insn, REG_EQUAL, src_const);\n+\t    }\n \n \t  /* If storing a constant value in a register that\n \t     previously held the constant value 0,"}]}