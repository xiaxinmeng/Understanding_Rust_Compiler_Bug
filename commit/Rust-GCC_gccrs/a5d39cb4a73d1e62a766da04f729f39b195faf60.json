{"sha": "a5d39cb4a73d1e62a766da04f729f39b195faf60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVkMzljYjRhNzNkMWU2MmE3NjZkYTA0ZjcyOWYzOWIxOTVmYWY2MA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-09-14T10:27:36Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-09-14T10:27:36Z"}, "message": "[multiple changes]\n\n2010-09-14  Matt Austern  <austern@google.com>\n\t    Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* testsuite/performance/21_strings/hash.cc: New.\n\n2010-09-14  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* testsuite/performance/21_strings/string_append.cc: Rename to...\n\t* testsuite/performance/21_strings/append-1.cc: ... this.\n\t* testsuite/performance/21_strings/string_append_2.cc: Rename to...\n\t* testsuite/performance/21_strings/append-2.cc: ... this.\n\t* testsuite/performance/21_strings/string_cons_input_iterator.cc:\n\tRename to...\n\t* testsuite/performance/21_strings/cons_input_iterator.cc: ... this.\n\t* testsuite/performance/21_strings/string_copy_cons_and_dest.cc:\n\tRename to...\n\t* testsuite/performance/21_strings/copy_cons_and_dest.cc: ... this.\n\t* testsuite/performance/21_strings/string_find.cc: Rename to...\n\t* testsuite/performance/21_strings/find.cc: ... this.\n\nFrom-SVN: r164278", "tree": {"sha": "b31c4b208d2c256f3a0cea028ab65be39c755d8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b31c4b208d2c256f3a0cea028ab65be39c755d8d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5d39cb4a73d1e62a766da04f729f39b195faf60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5d39cb4a73d1e62a766da04f729f39b195faf60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5d39cb4a73d1e62a766da04f729f39b195faf60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5d39cb4a73d1e62a766da04f729f39b195faf60/comments", "author": null, "committer": null, "parents": [{"sha": "d191cd06b99a69fdfe30ab2e9c4b0f1d2b48d524", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d191cd06b99a69fdfe30ab2e9c4b0f1d2b48d524", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d191cd06b99a69fdfe30ab2e9c4b0f1d2b48d524"}], "stats": {"total": 78, "additions": 78, "deletions": 0}, "files": [{"sha": "e1886d55553357c27c529f245a9c4953b31384d7", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a5d39cb4a73d1e62a766da04f729f39b195faf60", "patch": "@@ -1,3 +1,23 @@\n+2010-09-14  Matt Austern  <austern@google.com>\n+\t    Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* testsuite/performance/21_strings/hash.cc: New.\n+\n+2010-09-14  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* testsuite/performance/21_strings/string_append.cc: Rename to...\n+\t* testsuite/performance/21_strings/append-1.cc: ... this.\n+\t* testsuite/performance/21_strings/string_append_2.cc: Rename to...\n+\t* testsuite/performance/21_strings/append-2.cc: ... this.\n+\t* testsuite/performance/21_strings/string_cons_input_iterator.cc:\n+\tRename to...\n+\t* testsuite/performance/21_strings/cons_input_iterator.cc: ... this.\n+\t* testsuite/performance/21_strings/string_copy_cons_and_dest.cc:\n+\tRename to...\n+\t* testsuite/performance/21_strings/copy_cons_and_dest.cc: ... this.\n+\t* testsuite/performance/21_strings/string_find.cc: Rename to...\n+\t* testsuite/performance/21_strings/find.cc: ... this.\n+\n 2010-09-13  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* doc/xml/api.xml: Add title."}, {"sha": "60a9a8654ba72482eaf69d4d432afd8aa51090d8", "filename": "libstdc++-v3/testsuite/performance/21_strings/append-1.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fappend-1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fappend-1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fappend-1.cc?ref=a5d39cb4a73d1e62a766da04f729f39b195faf60", "previous_filename": "libstdc++-v3/testsuite/performance/21_strings/string_append.cc"}, {"sha": "8c44cb0f0ebf0f193c06575c527af71413b83127", "filename": "libstdc++-v3/testsuite/performance/21_strings/append-2.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fappend-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fappend-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fappend-2.cc?ref=a5d39cb4a73d1e62a766da04f729f39b195faf60", "previous_filename": "libstdc++-v3/testsuite/performance/21_strings/string_append_2.cc"}, {"sha": "fcf3eb8939c0e9712836e62083fe9eabd3e4edca", "filename": "libstdc++-v3/testsuite/performance/21_strings/cons_input_iterator.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fcons_input_iterator.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fcons_input_iterator.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fcons_input_iterator.cc?ref=a5d39cb4a73d1e62a766da04f729f39b195faf60", "previous_filename": "libstdc++-v3/testsuite/performance/21_strings/string_cons_input_iterator.cc"}, {"sha": "1ec18d3e4ad345bc355b4b4948c2569a5846a703", "filename": "libstdc++-v3/testsuite/performance/21_strings/copy_cons_and_dest.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fcopy_cons_and_dest.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fcopy_cons_and_dest.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fcopy_cons_and_dest.cc?ref=a5d39cb4a73d1e62a766da04f729f39b195faf60", "previous_filename": "libstdc++-v3/testsuite/performance/21_strings/string_copy_cons_and_dest.cc"}, {"sha": "eeda0802b3fb5d86b5d6372409fc62fb98e81ca4", "filename": "libstdc++-v3/testsuite/performance/21_strings/find.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Ffind.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Ffind.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Ffind.cc?ref=a5d39cb4a73d1e62a766da04f729f39b195faf60", "previous_filename": "libstdc++-v3/testsuite/performance/21_strings/string_find.cc"}, {"sha": "0c409c5da269d5a8494b31ca474ee25414a9e7b4", "filename": "libstdc++-v3/testsuite/performance/21_strings/hash.cc", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fhash.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5d39cb4a73d1e62a766da04f729f39b195faf60/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fhash.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fperformance%2F21_strings%2Fhash.cc?ref=a5d39cb4a73d1e62a766da04f729f39b195faf60", "patch": "@@ -0,0 +1,58 @@\n+#include <string>\n+#include <vector>\n+#include <unordered_set>\n+#include <cstdlib>\n+#include <random>\n+#include <testsuite_performance.h>\n+\n+using namespace std;\n+\n+vector<string>\n+random_strings(int n, int len)\n+{\n+  string s(len, '\\0');\n+  unordered_set<string> result_set;\n+  random_device rd;\n+  while (result_set.size() < n)\n+    {\n+      result_set.insert(s);\n+      unsigned int tmp = rd();\n+      tmp %= len * 256;\n+      s[tmp / 256] = tmp % 256;\n+    }\n+  return vector<string>(result_set.begin(), result_set.end());\n+}\n+\n+int\n+main(int argc, char **argv)\n+{\n+  using namespace __gnu_test;\n+  time_counter time;\n+  resource_counter resource;\n+\n+  int string_size = 71;\n+  int num_strings = 6000000;\n+  if (argc > 1)\n+    {\n+      string_size = atoi(argv[1]);\n+      if (argc > 2) \n+\tnum_strings = atoi(argv[2]);\n+    }\n+\n+  // Construct random strings.\n+  vector<string> v = random_strings(num_strings, string_size);\n+\n+  // Time hashing.\n+  size_t tmp = 0;  // prevent compiler from optimizing away all the work\n+  start_counters(time, resource);\n+  for (int i = 0; i < num_strings; i++)\n+    tmp += hash<string>()(v[i]);\n+  stop_counters(time, resource);\n+\n+  if (tmp != 0 || argc < 9) // use tmp to prevent compiler optimization\n+    report_performance(__FILE__, \"\", time, resource);\n+\n+  clear_counters(time, resource);\n+\n+  return 0;\n+}"}]}