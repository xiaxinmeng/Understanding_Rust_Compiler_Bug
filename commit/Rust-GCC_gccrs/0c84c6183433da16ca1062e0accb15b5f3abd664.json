{"sha": "0c84c6183433da16ca1062e0accb15b5f3abd664", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM4NGM2MTgzNDMzZGExNmNhMTA2MmUwYWNjYjE1YjVmM2FiZDY2NA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1998-04-29T13:47:28Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1998-04-29T13:47:28Z"}, "message": "Fix dwarf2 abort while compiling mips simulator, reported by Michael Tiemann.\n\n\t* dwarf2out.c (scope_die_for): If could not find proper scope,\n\tcheck for and handle tagged type with incorrect TYPE_CONTEXT.\n\nFrom-SVN: r19493", "tree": {"sha": "f98b35b4f7042fadaf01aadb78773d5a2fafc620", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f98b35b4f7042fadaf01aadb78773d5a2fafc620"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c84c6183433da16ca1062e0accb15b5f3abd664", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c84c6183433da16ca1062e0accb15b5f3abd664", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c84c6183433da16ca1062e0accb15b5f3abd664", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c84c6183433da16ca1062e0accb15b5f3abd664/comments", "author": null, "committer": null, "parents": [{"sha": "bf5f0e909897688eec9f4f70eb88a805764675f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf5f0e909897688eec9f4f70eb88a805764675f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf5f0e909897688eec9f4f70eb88a805764675f1"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "42f71194c5b1449715d940ea0963f1db349c69cf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c84c6183433da16ca1062e0accb15b5f3abd664/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c84c6183433da16ca1062e0accb15b5f3abd664/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0c84c6183433da16ca1062e0accb15b5f3abd664", "patch": "@@ -1,3 +1,8 @@\n+Wed Apr 29 13:46:03 1998  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* dwarf2out.c (scope_die_for): If could not find proper scope,\n+\tcheck for and handle tagged type with incorrect TYPE_CONTEXT.\n+\n Wed Apr 29 15:34:40 1998  John Carr  <jfc@mit.edu>\n \n \t* calls.c (expand_call): Fix recognition of C++ operator new."}, {"sha": "71f2ec07de0cababed4f1d367b8ed54030495ea8", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c84c6183433da16ca1062e0accb15b5f3abd664/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c84c6183433da16ca1062e0accb15b5f3abd664/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=0c84c6183433da16ca1062e0accb15b5f3abd664", "patch": "@@ -7577,6 +7577,24 @@ scope_die_for (t, context_die)\n \t    i = decl_scope_table[i].previous))\n \t;\n \n+      /* ??? Integrate_decl_tree does not handle BLOCK_TYPE_TAGS, nor\n+\t does it try to handle types defined by TYPE_DECLs.  Such types\n+\t thus have an incorrect TYPE_CONTEXT, which points to the block\n+\t they were originally defined in, instead of the current block\n+\t created by function inlining.  We try to detect that here and\n+\t work around it.  */\n+\n+      if (i < 0 && scope_die == comp_unit_die\n+\t  && TREE_CODE (containing_scope) == BLOCK\n+\t  && is_tagged_type (t)\n+\t  && (block_ultimate_origin (decl_scope_table[decl_scope_depth - 1].scope)\n+\t      == containing_scope))\n+\t{\n+\t  scope_die = context_die;\n+\t  /* Since the checks below are no longer applicable.  */\n+\t  i = 0;\n+\t}\n+\n       if (i < 0)\n \t{\n \t  if (scope_die != comp_unit_die"}]}