{"sha": "2b12962772d3b0e85d860609f32bfb28515d5ba9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmIxMjk2Mjc3MmQzYjBlODVkODYwNjA5ZjMyYmZiMjg1MTVkNWJhOQ==", "commit": {"author": {"name": "Joern Rennecke", "email": "amylaar@spamcop.net", "date": "2010-11-16T21:46:28Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2010-11-16T21:46:28Z"}, "message": "re PR java/46386 (negative shift count in build_constants_constructor for 16 bit pointer targets)\n\n2010-11-09  Joern Rennecke  <amylaar@spamcop.net>\n\t    Andrew Haley  <aph@redhat.com>\n\n\tPR java/46386\ngcc/java:\n\t* constants.c (build_constants_constructor): Avoid negative shift.\ngcc:\n\t* config/pdp11/t-pdp11 (java/constants.o-warn): Remove.\n\t* config/t-pnt16-warn (java/constants.o-warn): Likewise.\n\nCo-Authored-By: Andrew Haley <aph@redhat.com>\n\nFrom-SVN: r166826", "tree": {"sha": "88cf075a501bb99204a04ce6942ba3d5aab51605", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88cf075a501bb99204a04ce6942ba3d5aab51605"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b12962772d3b0e85d860609f32bfb28515d5ba9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b12962772d3b0e85d860609f32bfb28515d5ba9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b12962772d3b0e85d860609f32bfb28515d5ba9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b12962772d3b0e85d860609f32bfb28515d5ba9/comments", "author": null, "committer": null, "parents": [{"sha": "1ec601bf9fb0fbc39b3a6cb90450500f857adae8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ec601bf9fb0fbc39b3a6cb90450500f857adae8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ec601bf9fb0fbc39b3a6cb90450500f857adae8"}], "stats": {"total": 22, "additions": 12, "deletions": 10}, "files": [{"sha": "a572780b53e09e289166c0b4114c9e131c361ef4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2b12962772d3b0e85d860609f32bfb28515d5ba9", "patch": "@@ -70,6 +70,10 @@\n \t* config/score/score-conv.h (UIMM_IN_RANGE, SIMM_IN_RANGE):\n \tAllow (W) == HOST_BITS_PER_WIDE_INT.\n \n+\tPR java/46386\n+\t* config/pdp11/t-pdp11 (java/constants.o-warn): Remove.\n+\t* config/t-pnt16-warn (java/constants.o-warn): Likewise.\n+\n 2010-11-16  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* config/arc/arc.c: Delete pasto."}, {"sha": "fb22a9bac51736522863053391406f7be40824a2", "filename": "gcc/config/pdp11/t-pdp11", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fconfig%2Fpdp11%2Ft-pdp11", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fconfig%2Fpdp11%2Ft-pdp11", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpdp11%2Ft-pdp11?ref=2b12962772d3b0e85d860609f32bfb28515d5ba9", "patch": "@@ -42,7 +42,3 @@ MULTILIB_OPTIONS = msoft-float\n # We could say \"-Werror -Wno-error=type-limits\", alas, not all supported\n # gcc bootstrap compilers support the latter option.\n dwarf2out.o-warn = -Wno-error\n-\n-# Likewise, java/constants.c:build_constants_constructor has a negative shift\n-# count (in never-executed code) due to the small POINTER_SIZE.\n-java/constants.o-warn = -Wno-error"}, {"sha": "0bd52029cb8040f2078dfe8234bdb55e92973f3e", "filename": "gcc/config/t-pnt16-warn", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fconfig%2Ft-pnt16-warn", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fconfig%2Ft-pnt16-warn", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-pnt16-warn?ref=2b12962772d3b0e85d860609f32bfb28515d5ba9", "patch": "@@ -25,7 +25,3 @@\n # We could say \"-Werror -Wno-error=type-limits\", alas, not all supported\n # gcc bootstrap compilers support the latter option.\n dwarf2out.o-warn = -Wno-error\n-\n-# Likewise, java/constants.c:build_constants_constructor has a negative shift\n-# count (in never-executed code) due to the small POINTER_SIZE.\n-java/constants.o-warn = -Wno-error"}, {"sha": "825f02fc11beeb317642755584c040df89aa0dad", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=2b12962772d3b0e85d860609f32bfb28515d5ba9", "patch": "@@ -1,3 +1,9 @@\n+2010-11-09  Joern Rennecke  <amylaar@spamcop.net>\n+\t    Andrew Haley  <aph@redhat.com>\n+\n+\tPR java/46386\n+\t* config/pdp11/t-pdp11 (java/constants.o-warn): Remove.\n+\n 2010-11-12  Joseph Myers  <joseph@codesourcery.com>\n \n \t* Make-lang.in (jvspec.o, java/lang.o): Use $(OPTS_H)."}, {"sha": "c80afc7b9926a8b30711ce8213644aa3b2310ece", "filename": "gcc/java/constants.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fjava%2Fconstants.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b12962772d3b0e85d860609f32bfb28515d5ba9/gcc%2Fjava%2Fconstants.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fconstants.c?ref=2b12962772d3b0e85d860609f32bfb28515d5ba9", "patch": "@@ -540,8 +540,8 @@ build_constants_constructor (void)\n \t     FIXME: This is a kludge.  The field we're initializing is\n \t     not a scalar but a union, and that's how we should\n \t     represent it in the compiler.  We should fix this.  */\n-\t  if (BYTES_BIG_ENDIAN && POINTER_SIZE > 32)\n-\t    temp <<= POINTER_SIZE - 32;\n+\t  if (BYTES_BIG_ENDIAN)\n+\t    temp <<= ((POINTER_SIZE > 32) ? POINTER_SIZE - 32 : 0);\n \n           CONSTRUCTOR_PREPEND_VALUE (t, get_tag_node (outgoing_cpool->tags[i]));\n           CONSTRUCTOR_PREPEND_VALUE (d,"}]}