{"sha": "a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTkzZWRkY2Y2MjZkZDYxZDUzZjFhYjc1YjlmMDkyNWMyZGMyZWNmMg==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2000-10-13T21:06:45Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2000-10-13T21:06:45Z"}, "message": "[multiple changes]\n\n2000-10-11  Rodney Brown  <RodneyBrown@mynd.com>\n\n        * java-tree.h: Constify current_encoding.\n        * lang.c: Constify current_encoding.\n\n2000-10-10  Jeff Sturm  <jeff.sturm@appnet.com>\n\n        * jvgenmain.c (class_mangling_suffix): Omit `.'.\n        (main): Use `$' when NO_DOLLAR_IN_LABEL is not set, otherwise `.'.\n\n2000-10-10  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n\n        * expr.c (java_lang_expand_expr): Reinstall 1999-08-14 Anthony's\n        patch. Fixes gcj/340.\n\n(http://gcc.gnu.org/ml/gcc-patches/2000-10/msg00374.html)\n\nFrom-SVN: r36864", "tree": {"sha": "7f1bfdb9bfda24be988ebc08cc8f50b3383d3ae9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f1bfdb9bfda24be988ebc08cc8f50b3383d3ae9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/comments", "author": null, "committer": null, "parents": [{"sha": "f58e0b0ca76fbedf2a6e60f68b99b94ba75be575", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f58e0b0ca76fbedf2a6e60f68b99b94ba75be575", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f58e0b0ca76fbedf2a6e60f68b99b94ba75be575"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "4d332410ca3816164c6a59a8478c88e755bb03d8", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "patch": "@@ -82,6 +82,21 @@\n \t* gjavah.c (add_class_decl): Don't special-case inner classes.\n \t(add_namelet): Likewise.\n \n+2000-10-11  Rodney Brown  <RodneyBrown@mynd.com>\n+\n+\t* java-tree.h: Constify current_encoding.\n+\t* lang.c: Constify current_encoding.\n+\n+2000-10-10  Jeff Sturm  <jeff.sturm@appnet.com>\n+\n+\t* jvgenmain.c (class_mangling_suffix): Omit `.'.\n+\t(main): Use `$' when NO_DOLLAR_IN_LABEL is not set, otherwise `.'.\n+\n+2000-10-10  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n+\n+\t* expr.c (java_lang_expand_expr): Reinstall 1999-08-14 Anthony's\n+\tpatch. Fixes gcj/340.\n+\n 2000-10-10  Tom Tromey  <tromey@cygnus.com>\n \n \t* lex.c (java_new_lexer): Initialize out_first and out_last"}, {"sha": "286fa6a7ba3e5d8b646904a5c2b8c1ca8c37074f", "filename": "gcc/java/expr.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "patch": "@@ -2350,6 +2350,7 @@ java_lang_expand_expr (exp, target, tmode, modifier)\n \t    DECL_INITIAL (init_decl) = value;\n \t    DECL_IGNORED_P (init_decl) = 1;\n \t    TREE_READONLY (init_decl) = 1;\n+\t    TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (init_decl)) = 1;\n \t    make_decl_rtl (init_decl, NULL, 1);\n \t    init = build1 (ADDR_EXPR, TREE_TYPE (exp), init_decl);\n \t    r = expand_expr (init, target, tmode, modifier);"}, {"sha": "146e2e577ffc333732115166f51cac6259f86b86", "filename": "gcc/java/java-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Fjava-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Fjava-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjava-tree.h?ref=a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "patch": "@@ -173,7 +173,7 @@ extern int flag_use_boehm_gc;\n extern int flag_hash_synchronization;\n \n /* Encoding used for source files.  */\n-extern char *current_encoding;\n+extern const char *current_encoding;\n \n /* The Java .class file that provides main_class;  the main input file. */\n extern struct JCF *current_jcf;"}, {"sha": "a24ea03fcebd3a41f24bc1218e4a49fc89b2347e", "filename": "gcc/java/jvgenmain.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Fjvgenmain.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Fjvgenmain.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjvgenmain.c?ref=a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "patch": "@@ -34,7 +34,7 @@ The Free Software Foundation is independent of Sun Microsystems, Inc.  */\n \n const char main_method_prefix[] = \"main__\";\n const char main_method_suffix[] = \"Pt6JArray1ZPQ34java4lang6String\";\n-const char class_mangling_suffix[] = \".class$\";\n+const char class_mangling_suffix[] = \"class$\";\n \n struct obstack name_obstack;\n \n@@ -155,8 +155,13 @@ main (int argc, const char **argv)\n     }\n   fprintf (stream, \"  0\\n};\\n\\n\");\n \n-  fprintf (stream, \"extern int class __attribute__ ((alias (\\\"_%s%s\\\")));\\n\",\n+#ifndef NO_DOLLAR_IN_LABEL\n+  fprintf (stream, \"extern int class __attribute__ ((alias (\\\"_%s$%s\\\")));\\n\",\n \t   mangled_classname, class_mangling_suffix);\n+#else\n+  fprintf (stream, \"extern int class __attribute__ ((alias (\\\"_%s.%s\\\")));\\n\",\n+\t   mangled_classname, class_mangling_suffix);\n+#endif\n   fprintf (stream, \"int main (int argc, const char **argv)\\n\");\n   fprintf (stream, \"{\\n\");\n   fprintf (stream, \"   _Jv_Compiler_Properties = props;\\n\");"}, {"sha": "32150b28f2479a3ef0460c230433cd4639f2549f", "filename": "gcc/java/lang.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Flang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2/gcc%2Fjava%2Flang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flang.c?ref=a93eddcf626dd61d53f1ab75b9f0925c2dc2ecf2", "patch": "@@ -123,7 +123,7 @@ int flag_hash_synchronization;\n int flag_jni = 0;\n \n /* The encoding of the source file.  */\n-char *current_encoding = NULL;\n+const char *current_encoding = NULL;\n \n /* When non zero, report the now deprecated empty statements.  */\n int flag_extraneous_semicolon;"}]}