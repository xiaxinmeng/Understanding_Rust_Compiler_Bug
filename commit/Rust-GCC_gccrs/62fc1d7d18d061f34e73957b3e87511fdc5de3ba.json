{"sha": "62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjJmYzFkN2QxOGQwNjFmMzRlNzM5NTdiM2U4NzUxMWZkYzVkZTNiYQ==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2004-08-17T07:40:22Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2004-08-17T07:40:22Z"}, "message": "re PR middle-end/17036 (ICE: (A >> N) & 1 ? (1 << N) : 0 where A of type unsigned int)\n\ngcc/ChangeLog:\n2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n\n\tPR middle-end/17036\n\t* fold-const.c (fold): Check for integer operand when\n\tfolding (A >> N) & 1 ? (1 << N) : 0.  Fix from Andrew\n\tPinski  <pinskia@physics.uc.edu>.\n\ngcc/testsuite/ChangeLog:\n2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n\n\t* gcc.dg/pr17036-1.c: New test.\n\nFrom-SVN: r86112", "tree": {"sha": "33105d56679d89ea93b190dc2049f0985565fe47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/33105d56679d89ea93b190dc2049f0985565fe47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/comments", "author": null, "committer": null, "parents": [{"sha": "7c27e184c87d2b245f80287be1d28f686b68519e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c27e184c87d2b245f80287be1d28f686b68519e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c27e184c87d2b245f80287be1d28f686b68519e"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "ece9c7b89c3fe66671f589253d00b05ce7454df3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "patch": "@@ -1,3 +1,10 @@\n+2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\tPR middle-end/17036\n+\t* fold-const.c (fold): Check for integer operand when\n+\tfolding (A >> N) & 1 ? (1 << N) : 0.  Fix from Andrew\n+\tPinski  <pinskia@physics.uc.edu>.\n+\n 2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* configure.ac: Trust toplevel's notion of BISON/FLEX/MAKEINFO.\n@@ -131,10 +138,9 @@\n 2004-08-16  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n \t* tree-ssa-copyrename.c (copy_rename_partition_coalesce):\n-\tCheck for arificial variables, not is_gimple_tmp_var.\n+\tCheck for artificial variables, not is_gimple_tmp_var.\n \t* tree-ssa-live.c (var_union): Likewise.\n \n->>>>>>> 2.4930\n 2004-08-16  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* calls.c (load_register_parameters): Remove spurious FIXME token."}, {"sha": "319e455f4336dbbb2806a32eb2c5ef643302c6f8", "filename": "gcc/fold-const.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "patch": "@@ -8859,6 +8859,7 @@ fold (tree expr)\n \t  tree tem = TREE_OPERAND (arg0, 0);\n \t  STRIP_NOPS (tem);\n \t  if (TREE_CODE (tem) == RSHIFT_EXPR\n+              && TREE_CODE (TREE_OPERAND (tem, 1)) == INTEGER_CST\n               && (unsigned HOST_WIDE_INT) tree_log2 (arg1) ==\n \t         TREE_INT_CST_LOW (TREE_OPERAND (tem, 1)))\n \t    return fold (build2 (BIT_AND_EXPR, type,"}, {"sha": "0f65b7381809f9dc9ebe57c2562df040111f2d22", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "patch": "@@ -1,3 +1,7 @@\n+2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* gcc.dg/pr17036-1.c: New test.\n+\t\n 2004-08-16  Devang Patel  <dpatel@apple.com>\n \n \t* gcc.dg/darwin-20040809-1.c: New test."}, {"sha": "ea2c9caf6f93afe3a7dc50296f638dc0e37cfe7a", "filename": "gcc/testsuite/gcc.dg/pr17036-1.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2Ftestsuite%2Fgcc.dg%2Fpr17036-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62fc1d7d18d061f34e73957b3e87511fdc5de3ba/gcc%2Ftestsuite%2Fgcc.dg%2Fpr17036-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr17036-1.c?ref=62fc1d7d18d061f34e73957b3e87511fdc5de3ba", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+\n+int main ()\n+{\n+  int R, N = 4;\n+  unsigned int A = 2;\n+  signed int B = 2;\n+  ((B >> N) & 1) ? 1 : 0;\n+  ((A >> N) & 1) ? 1 : 0;\n+  return 0;\n+}"}]}