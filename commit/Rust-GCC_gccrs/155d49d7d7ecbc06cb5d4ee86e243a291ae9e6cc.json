{"sha": "155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTU1ZDQ5ZDdkN2VjYmMwNmNiNWQ0ZWU4NmUyNDNhMjkxYWU5ZTZjYw==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-01-21T02:38:23Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2005-01-21T02:38:23Z"}, "message": "re PR java/18091 (Valgrind errors building libjava)\n\n2005-01-20  Andrew Pinski  <pinskia@gcc.gnu.org>\n\n\tPR java/18091:\n\t* jcf-write.c (perform_relocations): Don't call memcpy if source\n\tand destination are the same.\n\nFrom-SVN: r94007", "tree": {"sha": "bdb6fe3d95bb4b4678bc9a53a93fdf303c1d5aa5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bdb6fe3d95bb4b4678bc9a53a93fdf303c1d5aa5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc/comments", "author": null, "committer": null, "parents": [{"sha": "4ef69b8352c4307faf514fb8a8cdaf902e69accc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ef69b8352c4307faf514fb8a8cdaf902e69accc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ef69b8352c4307faf514fb8a8cdaf902e69accc"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "e9ddb8bc818dda02355b475e53df5681a877c424", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc", "patch": "@@ -1,3 +1,9 @@\n+2005-01-20  Andrew Pinski  <pinskia@gcc.gnu.org>\n+\n+\tPR java/18091:\n+\t* jcf-write.c (perform_relocations): Don't call memcpy if source\n+\tand destination are the same.\n+\n 2005-01-17  Tom Tromey  <tromey@redhat.com>\n \n \t* verify-impl.c (get_short): Sign extend."}, {"sha": "8b6dc7de3282f3e7b8617429e3c9674a1bc75c02", "filename": "gcc/java/jcf-write.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc/gcc%2Fjava%2Fjcf-write.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc/gcc%2Fjava%2Fjcf-write.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-write.c?ref=155d49d7d7ecbc06cb5d4ee86e243a291ae9e6cc", "patch": "@@ -1,5 +1,5 @@\n /* Write out a Java(TM) class file.\n-   Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004\n+   Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -2794,7 +2794,9 @@ perform_relocations (struct jcf_partial *state)\n \t  int n = (old_ptr - old_buffer) - start;\n \t  new_ptr -= n;\n \t  old_ptr -= n;\n-\t  if (n > 0)\n+\t  /* Don't \"copy\" bytes in place, this causes valgrind\n+\t     warnings.  */\n+\t  if (n > 0 && new_ptr != old_ptr)\n \t    memcpy (new_ptr, old_ptr, n);\n \t  if (old_ptr == old_buffer)\n \t    break;"}]}