{"sha": "ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWM2OGUyODdmYzJlOTM5YWU2YjQ1YmE3ZmYwNGU0OTM5ODJiN2Y2Mg==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2020-01-22T01:23:42Z"}, "committer": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2020-01-22T01:23:42Z"}, "message": "Fix ICE with cast of division by zero (PR c/93348).\n\nBug 93348 reports an ICE on certain cases of casts of expressions that\nmay appear only in unevaluated parts of integer constant expressions,\narising from the generation of nested C_MAYBE_CONST_EXPRs.  This patch\nfixes it by adding a call to remove_c_maybe_const_expr in the\ninteger-operands case, as is done in other similar cases.\n\nBootstrapped with no regressions for x86_64-pc-linux-gnu.\n\n\tPR c/93348\ngcc/c:\n\t* c-typeck.c (build_c_cast): Call remove_c_maybe_const_expr on\n\targument with integer operands.\n\ngcc/testsuite:\n\t* gcc.c-torture/compile/pr93348-1.c: New test.", "tree": {"sha": "8f08fff66240c6eb9b094d4599df8dfc07dd2360", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f08fff66240c6eb9b094d4599df8dfc07dd2360"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4e9b9a6cb52b0c8b5f97dd279deff967f75c4fc9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e9b9a6cb52b0c8b5f97dd279deff967f75c4fc9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e9b9a6cb52b0c8b5f97dd279deff967f75c4fc9"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "9497365a5696e609707a49c294fb2e700f8fd1c6", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "patch": "@@ -1,3 +1,9 @@\n+2020-01-22  Joseph Myers  <joseph@codesourcery.com>\n+\n+\tPR c/93348\n+\t* c-typeck.c (build_c_cast): Call remove_c_maybe_const_expr on\n+\targument with integer operands.\n+\n 2020-01-16  Kerem Kat  <keremkat@gmail.com>\n \n \tPR c/92833"}, {"sha": "8df0849bd8b41f44ac80571c63b59c122acd2e3d", "filename": "gcc/c/c-typeck.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Fc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Fc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-typeck.c?ref=ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "patch": "@@ -5715,6 +5715,8 @@ build_c_cast (location_t loc, tree type, tree expr)\n     expr = TREE_OPERAND (expr, 0);\n \n   value = expr;\n+  if (int_operands)\n+    value = remove_c_maybe_const_expr (value);\n \n   if (type == error_mark_node || expr == error_mark_node)\n     return error_mark_node;"}, {"sha": "f72c98797284014be98d20bcb2c7e640d531b4ae", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "patch": "@@ -1,3 +1,8 @@\n+2020-01-22  Joseph Myers  <joseph@codesourcery.com>\n+\n+\tPR c/93348\n+\t* gcc.c-torture/compile/pr93348-1.c: New test.\n+\n 2020-01-21  David Malcolm  <dmalcolm@redhat.com>\n \n \tPR analyzer/93352"}, {"sha": "d2edec565eee538fdf094496c1fb8dd7aafdd671", "filename": "gcc/testsuite/gcc.c-torture/compile/pr93348-1.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr93348-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68e287fc2e939ae6b45ba7ff04e493982b7f62/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr93348-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr93348-1.c?ref=ac68e287fc2e939ae6b45ba7ff04e493982b7f62", "patch": "@@ -0,0 +1,5 @@\n+int\n+ya (void)\n+{\n+  return (long int) (1 / 0);\n+}"}]}