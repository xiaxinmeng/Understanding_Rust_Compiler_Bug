{"sha": "ede74510e54128874c5fbbbf6adf0488d53e9676", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWRlNzQ1MTBlNTQxMjg4NzRjNWZiYmJmNmFkZjA0ODhkNTNlOTY3Ng==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2001-04-26T04:29:15Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2001-04-26T04:29:15Z"}, "message": "acinclude.m4 (GLIBCPP_ENABLE_THREADS): Obtain target_thread_file with `gcc -v'.\n\n* acinclude.m4 (GLIBCPP_ENABLE_THREADS): Obtain\ntarget_thread_file with `gcc -v'.\n* aclocal.m4, configure: Rebuilt.\n\nFrom-SVN: r41570", "tree": {"sha": "c98be14f96e94beb49721ff9b70aa555892261ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c98be14f96e94beb49721ff9b70aa555892261ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ede74510e54128874c5fbbbf6adf0488d53e9676", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ede74510e54128874c5fbbbf6adf0488d53e9676", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ede74510e54128874c5fbbbf6adf0488d53e9676", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ede74510e54128874c5fbbbf6adf0488d53e9676/comments", "author": null, "committer": null, "parents": [{"sha": "a6687d2b0a4b132d68db4a8e0967ef6cf9f8c846", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6687d2b0a4b132d68db4a8e0967ef6cf9f8c846", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6687d2b0a4b132d68db4a8e0967ef6cf9f8c846"}], "stats": {"total": 1854, "additions": 889, "deletions": 965}, "files": [{"sha": "164d00f7ce4ad84f1fa0ce977dbe7f41cf268a07", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=ede74510e54128874c5fbbbf6adf0488d53e9676", "patch": "@@ -1,3 +1,9 @@\n+2001-04-26  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* acinclude.m4 (GLIBCPP_ENABLE_THREADS): Obtain\n+\ttarget_thread_file with `gcc -v'.\n+\t* aclocal.m4, configure: Rebuilt.\n+\n 2001-04-25  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/c_std/bits/std_cmath.h (std): Explicitly inject c99 names."}, {"sha": "12e3c79f59940f95391e945e020b5f6cd2588a00", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 6, "deletions": 36, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=ede74510e54128874c5fbbbf6adf0488d53e9676", "patch": "@@ -1200,39 +1200,9 @@ dnl Default is no threads, which also disables _IO_MTSAFE_IO in\n dnl libio.  Any actual thread package will enable it.\n dnl\n AC_DEFUN(GLIBCPP_ENABLE_THREADS, [\n-  dnl Note this comes from the gcc/config.in and libjava/config.in\n-  dnl Efforts should be made to keep this in sync.\n-  AC_MSG_CHECKING([for threads package to use])\n-  AC_ARG_ENABLE(threads,\n-  [  --enable-threads       enable thread usage for target GCC.\n-     --enable-threads=LIB   use LIB thread package for target GCC. [default=no]\n-  ],\n-  if test x$enable_threads = xno; then\n-    enable_threads=''\n-  fi,\n-    enable_threads='')\n-\n-  enable_threads_flag=$enable_threads\n-\n-  dnl Check if a valid thread package\n-  case x${enable_threads_flag} in\n-        x | xno | xnone)\n-                # No threads\n-                target_thread_file='single'\n-                ;;\n-        xyes)\n-                # default\n-                target_thread_file='posix'\n-                ;;\n-        xdecosf1 | xirix | xmach | xos2 | xposix | xpthreads | xsingle | \\\n-        xsolaris | xwin32 | xdce | xvxworks)\n-                target_thread_file=$enable_threads_flag\n-                ;;\n-        *)\n-                echo \"$enable_threads is an unknown thread package\" 1>&2\n-                exit 1\n-                ;;\n-  esac\n+  AC_MSG_CHECKING([for thread model used by GCC])\n+  target_thread_file=`$CC -v 2>&1 | sed -n 's/^Thread model: //p'`\n+  AC_MSG_RESULT([$target_thread_file])\n \n   dnl Check for thread package actually supported in libstdc++ \n   THREADH=\n@@ -1244,13 +1214,13 @@ AC_DEFUN(GLIBCPP_ENABLE_THREADS, [\n       THREADH=threads-posix.h\n       ;;\n     decosf1 | irix | mach | os2 | solaris | win32 | dce | vxworks)\n-      AC_MSG_ERROR(thread package $THREADS not yet supported)\n+      AC_MSG_WARN(disabling unsupported thread package $target_thread_file)\n+      THREADH=threads-no.h\n       ;;\n     *)\n-      AC_MSG_ERROR($THREADS is an unsupported/unknown thread package)\n+      AC_MSG_ERROR($target_thread_file: unsupported/unknown thread package)\n       ;;\n   esac\n-  AC_MSG_RESULT($THREADH)\n \n   AC_LINK_FILES(config/$THREADH, include/bits/c++threads.h)\n   if test $THREADH != threads-no.h; then"}, {"sha": "4741a87fc0ff2f872f26d9da4f86339881901ec6", "filename": "libstdc++-v3/aclocal.m4", "status": "modified", "additions": 6, "deletions": 36, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Faclocal.m4?ref=ede74510e54128874c5fbbbf6adf0488d53e9676", "patch": "@@ -1212,39 +1212,9 @@ dnl Default is no threads, which also disables _IO_MTSAFE_IO in\n dnl libio.  Any actual thread package will enable it.\n dnl\n AC_DEFUN(GLIBCPP_ENABLE_THREADS, [\n-  dnl Note this comes from the gcc/config.in and libjava/config.in\n-  dnl Efforts should be made to keep this in sync.\n-  AC_MSG_CHECKING([for threads package to use])\n-  AC_ARG_ENABLE(threads,\n-  [  --enable-threads       enable thread usage for target GCC.\n-     --enable-threads=LIB   use LIB thread package for target GCC. [default=no]\n-  ],\n-  if test x$enable_threads = xno; then\n-    enable_threads=''\n-  fi,\n-    enable_threads='')\n-\n-  enable_threads_flag=$enable_threads\n-\n-  dnl Check if a valid thread package\n-  case x${enable_threads_flag} in\n-        x | xno | xnone)\n-                # No threads\n-                target_thread_file='single'\n-                ;;\n-        xyes)\n-                # default\n-                target_thread_file='posix'\n-                ;;\n-        xdecosf1 | xirix | xmach | xos2 | xposix | xpthreads | xsingle | \\\n-        xsolaris | xwin32 | xdce | xvxworks)\n-                target_thread_file=$enable_threads_flag\n-                ;;\n-        *)\n-                echo \"$enable_threads is an unknown thread package\" 1>&2\n-                exit 1\n-                ;;\n-  esac\n+  AC_MSG_CHECKING([for thread model used by GCC])\n+  target_thread_file=`$CC -v 2>&1 | sed -n 's/^Thread model: //p'`\n+  AC_MSG_RESULT([$target_thread_file])\n \n   dnl Check for thread package actually supported in libstdc++ \n   THREADH=\n@@ -1256,13 +1226,13 @@ AC_DEFUN(GLIBCPP_ENABLE_THREADS, [\n       THREADH=threads-posix.h\n       ;;\n     decosf1 | irix | mach | os2 | solaris | win32 | dce | vxworks)\n-      AC_MSG_ERROR(thread package $THREADS not yet supported)\n+      AC_MSG_WARN(disabling unsupported thread package $target_thread_file)\n+      THREADH=threads-no.h\n       ;;\n     *)\n-      AC_MSG_ERROR($THREADS is an unsupported/unknown thread package)\n+      AC_MSG_ERROR($target_thread_file: unsupported/unknown thread package)\n       ;;\n   esac\n-  AC_MSG_RESULT($THREADH)\n \n   AC_LINK_FILES(config/$THREADH, include/bits/c++threads.h)\n   if test $THREADH != threads-no.h; then"}, {"sha": "be7df7b6206102f3657bad3cac45a6237a896c63", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 871, "deletions": 893, "changes": 1764, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ede74510e54128874c5fbbbf6adf0488d53e9676/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=ede74510e54128874c5fbbbf6adf0488d53e9676"}]}