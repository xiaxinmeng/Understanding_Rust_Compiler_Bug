{"sha": "1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWIwYWUwZjliZTI5MjFmYWU1N2NhZjdlOWFkNjE2MGQ3YTVlZGIzYQ==", "commit": {"author": {"name": "Zack Weinberg", "email": "zackw@stanford.edu", "date": "2001-03-23T01:16:22Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-03-23T01:16:22Z"}, "message": "mkconfig.sh: Use a subshell with redirected stdout...\n\n\t* mkconfig.sh: Use a subshell with redirected stdout,\n\tinstead of closing stdout and confusing commands that run\n\tafterward.  Throw away output of cmp.\n\nFrom-SVN: r40765", "tree": {"sha": "1b875b349a4b90446dbd724c2b47925949fc2546", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b875b349a4b90446dbd724c2b47925949fc2546"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a/comments", "author": null, "committer": null, "parents": [{"sha": "b937498e3083dae97f40d24e3057a99328f3e695", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b937498e3083dae97f40d24e3057a99328f3e695", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b937498e3083dae97f40d24e3057a99328f3e695"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "07dcc2f4b513e3f9c475e1add610ead9380130b2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a", "patch": "@@ -1,3 +1,9 @@\n+2001-03-22  Zack Weinberg  <zackw@stanford.edu>\n+\n+\t* mkconfig.sh: Use a subshell with redirected stdout,\n+\tinstead of closing stdout and confusing commands that run\n+\tafterward.  Throw away output of cmp.\n+\n 2001-03-22  Gordon Sadler  <gbsadler1@lcisp.com>\n \n \t* Makefile.in (stage1_build): Pass CFLAGS to stage1_build."}, {"sha": "5250708fcecdd96293730f42ba04a9e18aeadec2", "filename": "gcc/mkconfig.sh", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a/gcc%2Fmkconfig.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a/gcc%2Fmkconfig.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmkconfig.sh?ref=1b0ae0f9be2921fae57caf7e9ad6160d7a5edb3a", "patch": "@@ -12,7 +12,10 @@ fi\n \n output=$1\n rm -f $output.T\n-exec > $output.T\n+\n+# We used to exec > $output.T but apparently this has bugs.\n+# Use a redirected subshell instead.\n+(\n \n # Define TARGET_CPU_DEFAULT if the system wants one.\n # This substitutes for lots of *.h files.\n@@ -53,10 +56,10 @@ echo \"#include \\\"insn-codes.h\\\"\"\n echo \"#include \\\"insn-flags.h\\\"\"\n echo \"#endif\"\n \n-exec >&-\n+) > $output.T\n \n # Avoid changing the actual file if possible.\n-if [ -f $output ] && cmp $output.T $output; then\n+if [ -f $output ] && cmp $output.T $output >/dev/null 2>&1; then\n     echo $output is unchanged >&2\n     rm -f $output.T\n else"}]}