{"sha": "d5859bf49d3745d613c621bacf6a06f49fda593e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU4NTliZjQ5ZDM3NDVkNjEzYzYyMWJhY2Y2YTA2ZjQ5ZmRhNTkzZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-04-07T10:58:37Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-07T10:58:37Z"}, "message": "decl.c (gnat_to_gnu_entity): Test the underlying type.\n\n\t* gcc-interface/decl.c (gnat_to_gnu_entity) <object>: Test the\n\tunderlying type.\n\t* gcc-interface/trans.c (lvalue_required_p): Likewise.\n\nFrom-SVN: r145663", "tree": {"sha": "6874347a3afbfaa7325e34c48e7854e6b4c0bf4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6874347a3afbfaa7325e34c48e7854e6b4c0bf4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5859bf49d3745d613c621bacf6a06f49fda593e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5859bf49d3745d613c621bacf6a06f49fda593e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5859bf49d3745d613c621bacf6a06f49fda593e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5859bf49d3745d613c621bacf6a06f49fda593e/comments", "author": null, "committer": null, "parents": [{"sha": "c86f07f6bf104142c3161433a7ca43e30cc11bde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c86f07f6bf104142c3161433a7ca43e30cc11bde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c86f07f6bf104142c3161433a7ca43e30cc11bde"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "d2a58c371eca276199ab138cc4a85e13e7ce4605", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5859bf49d3745d613c621bacf6a06f49fda593e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5859bf49d3745d613c621bacf6a06f49fda593e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d5859bf49d3745d613c621bacf6a06f49fda593e", "patch": "@@ -1,3 +1,9 @@\n+2009-04-07  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity) <object>: Test the\n+\tunderlying type.\n+\t* gcc-interface/trans.c (lvalue_required_p): Likewise.\n+\n 2009-04-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c (Attribute_to_gnu) <Max_Size_In_Storage_Elmts>:"}, {"sha": "5984027e96498d5cf2ff07c84e27783419be13f4", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5859bf49d3745d613c621bacf6a06f49fda593e/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5859bf49d3745d613c621bacf6a06f49fda593e/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=d5859bf49d3745d613c621bacf6a06f49fda593e", "patch": "@@ -886,7 +886,9 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n \t\t/* Case 3: If this is a constant renaming and creating a\n \t\t   new object is allowed and cheap, treat it as a normal\n \t\t   object whose initial value is what is being renamed.  */\n-\t\tif (const_flag && Is_Elementary_Type (Etype (gnat_entity)))\n+\t\tif (const_flag\n+\t\t    && !Is_Composite_Type\n+\t\t        (Underlying_Type (Etype (gnat_entity))))\n \t\t  ;\n \n \t\t/* Case 4: Make this into a constant pointer to the object we"}, {"sha": "309617d35d195681431159337e695d8799705009", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5859bf49d3745d613c621bacf6a06f49fda593e/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5859bf49d3745d613c621bacf6a06f49fda593e/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=d5859bf49d3745d613c621bacf6a06f49fda593e", "patch": "@@ -730,7 +730,8 @@ lvalue_required_p (Node_Id gnat_node, tree gnu_type, int aliased)\n \t attached to the CONST_DECL.  */\n       return (aliased != 0\n \t      /* This should match the constant case of the renaming code.  */\n-\t      || Is_Composite_Type (Etype (Name (gnat_parent)))\n+\t      || Is_Composite_Type\n+\t\t (Underlying_Type (Etype (Name (gnat_parent))))\n \t      || Nkind (Name (gnat_parent)) == N_Identifier);\n \n     default:"}]}