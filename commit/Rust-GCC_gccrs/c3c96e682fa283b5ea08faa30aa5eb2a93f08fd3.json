{"sha": "c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNjOTZlNjgyZmEyODNiNWVhMDhmYWEzMGFhNWViMmE5M2YwOGZkMw==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-09-09T23:58:57Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-09-09T23:58:57Z"}, "message": "re PR rtl-optimization/37435 (ICE with volatiles)\n\ngcc/\n\n2008-09-09  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/37435\n\t* caller-save.c (insert_restore, insert_save): Check the mode by\n\treg_save_code.\n\ngcc/testsuite/\n\n2008-09-09  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR rtl-optimization/37435\n\t* gcc.dg/dfp/pr37435.c: New.\n\nFrom-SVN: r140184", "tree": {"sha": "68c6d2b63b5bca608049c29cc21f7a40607ee0b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68c6d2b63b5bca608049c29cc21f7a40607ee0b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/comments", "author": null, "committer": null, "parents": [{"sha": "a26495282ef7adf3dd8ee3f5fc18149883e52e68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a26495282ef7adf3dd8ee3f5fc18149883e52e68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a26495282ef7adf3dd8ee3f5fc18149883e52e68"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "d07d85d0e2913291b117255b2d8088e80ce9248d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "patch": "@@ -1,3 +1,9 @@\n+2008-09-09  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/37435\n+\t* caller-save.c (insert_restore, insert_save): Check the mode by\n+\treg_save_code.\n+\n 2008-09-09  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \tPR other/37265"}, {"sha": "2d0925a4686e9c04623bcad92adeb335e592b416", "filename": "gcc/caller-save.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2Fcaller-save.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2Fcaller-save.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcaller-save.c?ref=c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "patch": "@@ -1067,7 +1067,10 @@ insert_restore (struct insn_chain *chain, int before_p, int regno,\n   mem = regno_save_mem [regno][numregs];\n   if (save_mode [regno] != VOIDmode\n       && save_mode [regno] != GET_MODE (mem)\n-      && numregs == (unsigned int) hard_regno_nregs[regno][save_mode [regno]])\n+      && numregs == (unsigned int) hard_regno_nregs[regno][save_mode [regno]]\n+      /* Check that insn to restore REGNO in save_mode[regno] is\n+\t correct.  */\n+      && reg_save_code (regno, save_mode[regno]) >= 0)\n     mem = adjust_address (mem, save_mode[regno], 0);\n   else\n     mem = copy_rtx (mem);\n@@ -1145,7 +1148,10 @@ insert_save (struct insn_chain *chain, int before_p, int regno,\n   mem = regno_save_mem [regno][numregs];\n   if (save_mode [regno] != VOIDmode\n       && save_mode [regno] != GET_MODE (mem)\n-      && numregs == (unsigned int) hard_regno_nregs[regno][save_mode [regno]])\n+      && numregs == (unsigned int) hard_regno_nregs[regno][save_mode [regno]]\n+      /* Check that insn to save REGNO in save_mode[regno] is\n+\t correct.  */\n+      && reg_save_code (regno, save_mode[regno]) >= 0)\n     mem = adjust_address (mem, save_mode[regno], 0);\n   else\n     mem = copy_rtx (mem);"}, {"sha": "4f1f9e07a7328baa6c2ac83bda5fc7da30cf875e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "patch": "@@ -1,3 +1,8 @@\n+2008-09-09  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR rtl-optimization/37435\n+\t* gcc.dg/dfp/pr37435.c: New.\n+\n 2008-09-09  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/37417"}, {"sha": "98acc9c118bd6f2fa383a07b0a440267ea6b33d1", "filename": "gcc/testsuite/gcc.dg/dfp/pr37435.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr37435.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr37435.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr37435.c?ref=c3c96e682fa283b5ea08faa30aa5eb2a93f08fd3", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile { target fpic } } */\n+/* { dg-options \"-std=gnu99 -O2 -fPIC\" } */\n+\n+volatile _Decimal32 d;\n+volatile int i;\n+\n+void foo()\n+{\n+  d += i;\n+  d += i;\n+}"}]}