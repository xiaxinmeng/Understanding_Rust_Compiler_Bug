{"sha": "03b2a04d63c7a320ef86ee4a077bbdcefd02a271", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNiMmEwNGQ2M2M3YTMyMGVmODZlZTRhMDc3YmJkY2VmZDAyYTI3MQ==", "commit": {"author": {"name": "Ralf Wildenhues", "email": "Ralf.Wildenhues@gmx.de", "date": "2011-02-12T15:48:30Z"}, "committer": {"name": "Ralf Wildenhues", "email": "rwild@gcc.gnu.org", "date": "2011-02-12T15:48:30Z"}, "message": "Import move-if-change script from gnulib.\n\n/:\n\tPR binutils/12283\n\t* move-if-change: Import version from gnulib.\n\nFrom-SVN: r170076", "tree": {"sha": "b4a9e0bb4de5f8a15dce25b8944cb9a6077e7ea7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4a9e0bb4de5f8a15dce25b8944cb9a6077e7ea7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03b2a04d63c7a320ef86ee4a077bbdcefd02a271", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03b2a04d63c7a320ef86ee4a077bbdcefd02a271", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03b2a04d63c7a320ef86ee4a077bbdcefd02a271", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03b2a04d63c7a320ef86ee4a077bbdcefd02a271/comments", "author": null, "committer": null, "parents": [{"sha": "3917813c648db35bd19df50f6a5cd68fff3cc380", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3917813c648db35bd19df50f6a5cd68fff3cc380", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3917813c648db35bd19df50f6a5cd68fff3cc380"}], "stats": {"total": 86, "additions": 76, "deletions": 10}, "files": [{"sha": "5d0ed209381e214c6a9abbd5b0227f89f4745992", "filename": "ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b2a04d63c7a320ef86ee4a077bbdcefd02a271/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b2a04d63c7a320ef86ee4a077bbdcefd02a271/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=03b2a04d63c7a320ef86ee4a077bbdcefd02a271", "patch": "@@ -1,3 +1,8 @@\n+2011-02-12  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n+\n+\tPR binutils/12283\n+\t* move-if-change: Import version from gnulib.\n+\n 2011-02-12  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR lto/47225"}, {"sha": "e7ba25e3127c458890bc5a900d44ed43931ff023", "filename": "move-if-change", "status": "modified", "additions": 71, "deletions": 10, "changes": 81, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b2a04d63c7a320ef86ee4a077bbdcefd02a271/move-if-change", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b2a04d63c7a320ef86ee4a077bbdcefd02a271/move-if-change", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/move-if-change?ref=03b2a04d63c7a320ef86ee4a077bbdcefd02a271", "patch": "@@ -2,21 +2,82 @@\n # Like mv $1 $2, but if the files are the same, just delete $1.\n # Status is zero if successful, nonzero otherwise.\n \n-usage=\"$0: usage: $0 SOURCE DEST\"\n+VERSION='2011-01-28 20:09'; # UTC\n+# The definition above must lie within the first 8 lines in order\n+# for the Emacs time-stamp write hook (at end) to update it.\n+# If you change this file with Emacs, please let the write hook\n+# do its job.  Otherwise, update this string manually.\n \n-case $# in\n-2) ;;\n-*) echo \"$usage\" >&2; exit 1;;\n-esac\n+# Copyright (C) 2002-2007, 2009-2011 Free Software Foundation, Inc.\n \n-for arg in \"$1\" \"$2\"; do\n+# This program is free software: you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation, either version 3 of the License, or\n+# (at your option) any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+usage=\"usage: $0 SOURCE DEST\"\n+\n+help=\"$usage\n+  or:  $0 OPTION\n+If SOURCE is different than DEST, then move it to DEST; else remove SOURCE.\n+\n+  --help     display this help and exit\n+  --version  output version information and exit\n+\n+The variable CMPPROG can be used to specify an alternative to \\`cmp'.\n+\n+Report bugs to <bug-gnulib@gnu.org>.\"\n+\n+version=`expr \"$VERSION\" : '\\([^ ]*\\)'`\n+version=\"move-if-change (gnulib) $version\n+Copyright (C) 2011 Free Software Foundation, Inc.\n+License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n+This is free software: you are free to change and redistribute it.\n+There is NO WARRANTY, to the extent permitted by law.\"\n+\n+cmpprog=${CMPPROG-cmp}\n+\n+for arg\n+do\n   case $arg in\n-   -*) echo \"$usage\" >&2; exit 1;;\n+    --help | --hel | --he | --h)\n+      exec echo \"$help\" ;;\n+    --version | --versio | --versi | --vers | --ver | --ve | --v)\n+      exec echo \"$version\" ;;\n+    --)\n+      shift\n+      break ;;\n+    -*)\n+      echo \"$0: invalid option: $arg\" >&2\n+      exit 1 ;;\n+    *)\n+      break ;;\n   esac\n done\n \n-if test -r \"$2\" && cmp -s \"$1\" \"$2\"; then\n-  rm -f \"$1\"\n+test $# -eq 2 || { echo \"$0: $usage\" >&2; exit 1; }\n+\n+if test -r \"$2\" && $cmpprog -- \"$1\" \"$2\" >/dev/null; then\n+  rm -f -- \"$1\"\n else\n-  mv -f \"$1\" \"$2\"\n+  if mv -f -- \"$1\" \"$2\"; then :; else\n+    # Ignore failure due to a concurrent move-if-change.\n+    test -r \"$2\" && $cmpprog -- \"$1\" \"$2\" >/dev/null && rm -f -- \"$1\"\n+  fi\n fi\n+\n+## Local Variables:\n+## eval: (add-hook 'write-file-hooks 'time-stamp)\n+## time-stamp-start: \"VERSION='\"\n+## time-stamp-format: \"%:y-%02m-%02d %02H:%02M\"\n+## time-stamp-time-zone: \"UTC\"\n+## time-stamp-end: \"'; # UTC\"\n+## End:"}]}