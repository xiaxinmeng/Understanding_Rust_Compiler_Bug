{"sha": "ab7b56730bc193083d0a778b79ca5be0390e17d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI3YjU2NzMwYmMxOTMwODNkMGE3NzhiNzljYTViZTAzOTBlMTdkNQ==", "commit": {"author": {"name": "Trevor Saunders", "email": "tbsaunde+gcc@tbsaunde.org", "date": "2015-11-15T00:17:56Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2015-11-15T00:17:56Z"}, "message": "always define TARGET_PECOFF\n\ngcc/ChangeLog:\n\n2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* config/i386/i386.h (TARGET_PECOFF): Remove define.\n\t* defaults.h (TARGET_PECOFF): New default definition.\n\t* varasm.c (handle_vtv_comdat_section): Adjust.\n\ngcc/cp/ChangeLog:\n\n2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* vtable-class-hierarchy.c (vtv_generate_init_routine): Adjust.\n\nFrom-SVN: r230391", "tree": {"sha": "7c1534551d47cf47f21e46079c9121b66f59878c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c1534551d47cf47f21e46079c9121b66f59878c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab7b56730bc193083d0a778b79ca5be0390e17d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab7b56730bc193083d0a778b79ca5be0390e17d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab7b56730bc193083d0a778b79ca5be0390e17d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab7b56730bc193083d0a778b79ca5be0390e17d5/comments", "author": null, "committer": null, "parents": [{"sha": "5394314855439d86e5bb52ef07713472e2fee0dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5394314855439d86e5bb52ef07713472e2fee0dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5394314855439d86e5bb52ef07713472e2fee0dc"}], "stats": {"total": 31, "additions": 17, "deletions": 14}, "files": [{"sha": "2254c0092607e438a11111eab02f5357bd6393e0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ab7b56730bc193083d0a778b79ca5be0390e17d5", "patch": "@@ -1,3 +1,9 @@\n+2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* config/i386/i386.h (TARGET_PECOFF): Remove define.\n+\t* defaults.h (TARGET_PECOFF): New default definition.\n+\t* varasm.c (handle_vtv_comdat_section): Adjust.\n+\n 2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* defaults.h: New definition of SDB_DEBUGGING_INFO."}, {"sha": "829c3f418b58dee0e4c44b262dc701a50eca27d9", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=ab7b56730bc193083d0a778b79ca5be0390e17d5", "patch": "@@ -595,9 +595,6 @@ extern tree x86_mfence;\n /* This is re-defined by cygming.h.  */\n #define TARGET_SEH 0\n \n-/* This is re-defined by cygming.h.  */\n-#define TARGET_PECOFF 0\n-\n /* The default abi used by target.  */\n #define DEFAULT_ABI SYSV_ABI\n "}, {"sha": "1b052dca87a70c6d15e1b7d373cd048e11b7ffa2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ab7b56730bc193083d0a778b79ca5be0390e17d5", "patch": "@@ -1,3 +1,7 @@\n+2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* vtable-class-hierarchy.c (vtv_generate_init_routine): Adjust.\n+\n 2015-11-14  Jason Merrill  <jason@redhat.com>\n \n \tPR bootstrap/68346"}, {"sha": "97481fc0c64d2f866dbea7dd9d9e534583433c50", "filename": "gcc/cp/vtable-class-hierarchy.c", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fcp%2Fvtable-class-hierarchy.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fcp%2Fvtable-class-hierarchy.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fvtable-class-hierarchy.c?ref=ab7b56730bc193083d0a778b79ca5be0390e17d5", "patch": "@@ -1182,23 +1182,15 @@ vtv_generate_init_routine (void)\n       TREE_STATIC (vtv_fndecl) = 1;\n       TREE_USED (vtv_fndecl) = 1;\n       DECL_PRESERVE_P (vtv_fndecl) = 1;\n-#if defined (TARGET_PECOFF)\n       if (flag_vtable_verify == VTV_PREINIT_PRIORITY && !TARGET_PECOFF)\n-#else\n-      if (flag_vtable_verify == VTV_PREINIT_PRIORITY)\n-#endif\n         DECL_STATIC_CONSTRUCTOR (vtv_fndecl) = 0;\n \n       gimplify_function_tree (vtv_fndecl);\n       cgraph_node::add_new_function (vtv_fndecl, false);\n \n       symtab->process_new_functions ();\n \n-#if defined (TARGET_PECOFF)\n       if (flag_vtable_verify == VTV_PREINIT_PRIORITY && !TARGET_PECOFF)\n-#else\n-      if (flag_vtable_verify == VTV_PREINIT_PRIORITY)\n-#endif\n         assemble_vtv_preinit_initializer (vtv_fndecl);\n \n     }"}, {"sha": "eca624ca1be52c9cf7db4f7c61dd5476593c714c", "filename": "gcc/defaults.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fdefaults.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fdefaults.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdefaults.h?ref=ab7b56730bc193083d0a778b79ca5be0390e17d5", "patch": "@@ -1301,6 +1301,10 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #define REVERSE_CONDITION(code, mode) reverse_condition (code)\n #endif\n \n+#ifndef TARGET_PECOFF\n+#define TARGET_PECOFF 0\n+#endif\n+\n #ifdef GCC_INSN_FLAGS_H\n /* Dependent default target macro definitions\n "}, {"sha": "31411101267b7a120dcea791c99de678ea807549", "filename": "gcc/varasm.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7b56730bc193083d0a778b79ca5be0390e17d5/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=ab7b56730bc193083d0a778b79ca5be0390e17d5", "patch": "@@ -7793,7 +7793,7 @@ handle_vtv_comdat_section (section *sect, const_tree decl ATTRIBUTE_UNUSED)\n \t\t\t\t | SECTION_LINKONCE,\n \t\t\t\t DECL_NAME (decl));\n   in_section = sect;\n-#elif defined (TARGET_PECOFF)\n+#else\n   /* Neither OBJECT_FORMAT_PE, nor OBJECT_FORMAT_COFF is set here.\n      Therefore the following check is used.\n      In case a the target is PE or COFF a comdat group section\n@@ -7820,8 +7820,8 @@ handle_vtv_comdat_section (section *sect, const_tree decl ATTRIBUTE_UNUSED)\n \t\t\t\t     DECL_NAME (decl));\n       in_section = sect;\n     }\n-#else\n-  switch_to_section (sect);\n+  else\n+    switch_to_section (sect);\n #endif\n }\n "}]}