{"sha": "5f62d4e1b27ed8f85022525ddfe30c0448a20973", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWY2MmQ0ZTFiMjdlZDhmODUwMjI1MjVkZGZlMzBjMDQ0OGEyMDk3Mw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-06-27T23:00:48Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-06-27T23:00:48Z"}, "message": "(CPP_SPEC, LINK_SPEC): Choose for glibc 1 or 2 depending on\nUSE_GNULIBC_1.\n\nFrom-SVN: r14355", "tree": {"sha": "e3afd3a8423e7b8dfeb0428ec51e932e503d1330", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3afd3a8423e7b8dfeb0428ec51e932e503d1330"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f62d4e1b27ed8f85022525ddfe30c0448a20973", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f62d4e1b27ed8f85022525ddfe30c0448a20973", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f62d4e1b27ed8f85022525ddfe30c0448a20973", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f62d4e1b27ed8f85022525ddfe30c0448a20973/comments", "author": null, "committer": null, "parents": [{"sha": "020bf2e7270f74f62520caa0dce7c3280e7c996a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/020bf2e7270f74f62520caa0dce7c3280e7c996a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/020bf2e7270f74f62520caa0dce7c3280e7c996a"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "8f0671d1faaf8e2b6f3969735e9641aca32f1864", "filename": "gcc/config/i386/linux.h", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f62d4e1b27ed8f85022525ddfe30c0448a20973/gcc%2Fconfig%2Fi386%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f62d4e1b27ed8f85022525ddfe30c0448a20973/gcc%2Fconfig%2Fi386%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Flinux.h?ref=5f62d4e1b27ed8f85022525ddfe30c0448a20973", "patch": "@@ -151,7 +151,11 @@ Boston, MA 02111-1307, USA.  */\n #define CPP_PREDEFINES \"-D__ELF__ -Dunix -Dlinux -Asystem(posix)\"\n \n #undef CPP_SPEC\n+#ifdef USE_GNULIBC_1\n #define CPP_SPEC \"%(cpp_cpu) %[cpp_cpu] %{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{posix:-D_POSIX_SOURCE}\"\n+#else\n+#define CPP_SPEC \"%(cpp_cpu) %[cpp_cpu] %{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{posix:-D_POSIX_SOURCE} %{pthread:-D_REENTRANT}\"\n+#endif\n \n #undef CC1_SPEC\n #define CC1_SPEC \"%(cc1_cpu) %{profile:-p}\"\n@@ -173,6 +177,7 @@ Boston, MA 02111-1307, USA.  */\n /* If ELF is the default format, we should not use /lib/elf. */\n \n #undef\tLINK_SPEC\n+#ifdef USE_GNULIBC_1\n #ifndef LINUX_DEFAULT_ELF\n #define LINK_SPEC \"-m elf_i386 %{shared:-shared} \\\n   %{!shared: \\\n@@ -190,6 +195,15 @@ Boston, MA 02111-1307, USA.  */\n \t%{!dynamic-linker:-dynamic-linker /lib/ld-linux.so.1}} \\\n \t%{static:-static}}}\"\n #endif\n+#else\n+#define LINK_SPEC \"-m elf_i386 %{shared:-shared} \\\n+  %{!shared: \\\n+    %{!ibcs: \\\n+      %{!static: \\\n+\t%{rdynamic:-export-dynamic} \\\n+\t%{!dynamic-linker:-dynamic-linker /lib/ld-linux.so.2}} \\\n+\t%{static:-static}}}\"\n+#endif\n \n /* Get perform_* macros to build libgcc.a.  */\n #include \"i386/perform.h\""}]}