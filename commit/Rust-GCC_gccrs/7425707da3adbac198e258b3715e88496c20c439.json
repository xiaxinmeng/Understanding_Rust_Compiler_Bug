{"sha": "7425707da3adbac198e258b3715e88496c20c439", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQyNTcwN2RhM2FkYmFjMTk4ZTI1OGIzNzE1ZTg4NDk2YzIwYzQzOQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-04-11T17:24:28Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-04-11T17:24:28Z"}, "message": "sparc.md (movdi_insn_sp32): Add o/J alternative.\n\n        * config/sparc/sparc.md (movdi_insn_sp32): Add o/J alternative.\n        (movdi_insn_sp32_v9): Likewise.  Only allow stx with aligned memory.\n        (dimode mem/zero splitter): New.\n\nFrom-SVN: r52168", "tree": {"sha": "8ab80d011abb6a973ad106da4e7a4c894c6408d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ab80d011abb6a973ad106da4e7a4c894c6408d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7425707da3adbac198e258b3715e88496c20c439", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7425707da3adbac198e258b3715e88496c20c439", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7425707da3adbac198e258b3715e88496c20c439", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7425707da3adbac198e258b3715e88496c20c439/comments", "author": null, "committer": null, "parents": [{"sha": "af4e7bac5cb41a0cd8be91635f025eec4afc79cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af4e7bac5cb41a0cd8be91635f025eec4afc79cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af4e7bac5cb41a0cd8be91635f025eec4afc79cf"}], "stats": {"total": 41, "additions": 32, "deletions": 9}, "files": [{"sha": "e703ffb1a0dc4a43ccabe7c833f58598d927938f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7425707da3adbac198e258b3715e88496c20c439/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7425707da3adbac198e258b3715e88496c20c439/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7425707da3adbac198e258b3715e88496c20c439", "patch": "@@ -1,3 +1,9 @@\n+2002-04-11  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/sparc/sparc.md (movdi_insn_sp32): Add o/J alternative.\n+\t(movdi_insn_sp32_v9): Likewise.  Only allow stx with aligned memory.\n+\t(dimode mem/zero splitter): New.\n+\n 2002-04-11  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* config/cris/cris.c (cris_override_options): Tweak error message"}, {"sha": "3ce7988e115ab6a486fc4d00cca17449ecd8fb2c", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 26, "deletions": 9, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7425707da3adbac198e258b3715e88496c20c439/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7425707da3adbac198e258b3715e88496c20c439/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=7425707da3adbac198e258b3715e88496c20c439", "patch": "@@ -1,4 +1,4 @@\n-;- Machine description for SPARC chip for GNU C compiler\n+;; Machine description for SPARC chip for GNU C compiler\n ;;  Copyright (C) 1987, 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n ;;  1999, 2000, 2001, 2002 Free Software Foundation, Inc.\n ;;  Contributed by Michael Tiemann (tiemann@cygnus.com)\n@@ -2531,13 +2531,14 @@\n \n (define_insn \"*movdi_insn_sp32_v9\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\"\n-\t\t\t\t\t\"=m,T,U,o,r,r,r,?T,?f,?f,?o,?f\")\n+\t\t\t\t\t\"=T,o,T,U,o,r,r,r,?T,?f,?f,?o,?f\")\n         (match_operand:DI 1 \"input_operand\"\n-\t\t\t\t\t\" J,U,T,r,o,i,r, f, T, o, f, f\"))]\n+\t\t\t\t\t\" J,J,U,T,r,o,i,r, f, T, o, f, f\"))]\n   \"! TARGET_ARCH64 && TARGET_V9\n    && (GET_CODE (operands[0]) != MEM || GET_CODE (operands[1]) != MEM)\"\n   \"@\n    stx\\\\t%%g0, %0\n+   #\n    std\\\\t%1, %0\n    ldd\\\\t%1, %0\n    #\n@@ -2549,18 +2550,19 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"store,store,load,*,*,*,*,fpstore,fpload,*,*,*\")\n-   (set_attr \"length\" \"*,*,*,2,2,2,2,*,*,2,2,2\")])\n+  [(set_attr \"type\" \"store,store,store,load,*,*,*,*,fpstore,fpload,*,*,*\")\n+   (set_attr \"length\" \"*,2,*,*,2,2,2,2,*,*,2,2,2\")])\n \n (define_insn \"*movdi_insn_sp32\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\"\n-\t\t\t\t\"=T,U,o,r,r,r,?T,?f,?f,?o,?f\")\n+\t\t\t\t\"=o,T,U,o,r,r,r,?T,?f,?f,?o,?f\")\n         (match_operand:DI 1 \"input_operand\"\n-\t\t\t\t\" U,T,r,o,i,r, f, T, o, f, f\"))]\n+\t\t\t\t\" J,U,T,r,o,i,r, f, T, o, f, f\"))]\n   \"! TARGET_ARCH64\n    && (register_operand (operands[0], DImode)\n        || register_operand (operands[1], DImode))\"\n   \"@\n+   #\n    std\\\\t%1, %0\n    ldd\\\\t%1, %0\n    #\n@@ -2572,8 +2574,8 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"store,load,*,*,*,*,fpstore,fpload,*,*,*\")\n-   (set_attr \"length\" \"*,*,2,2,2,2,*,*,2,2,2\")])\n+  [(set_attr \"type\" \"store,store,load,*,*,*,*,fpstore,fpload,*,*,*\")\n+   (set_attr \"length\" \"2,*,*,2,2,2,2,*,*,2,2,2\")])\n \n ;; The following are generated by sparc_emit_set_const64\n (define_insn \"*movdi_sp64_dbl\"\n@@ -2960,6 +2962,21 @@\n   DONE;\n }\")\n \n+(define_split\n+  [(set (match_operand:DI 0 \"memory_operand\" \"\")\n+        (const_int 0))]\n+  \"reload_completed\n+   && (! TARGET_V9\n+       || (! TARGET_ARCH64\n+\t   && ! mem_min_alignment (operands[0], 8)))\n+   && offsettable_memref_p (operands[0])\"\n+  [(clobber (const_int 0))]\n+  \"\n+{\n+  emit_insn (gen_movsi (adjust_address (operands[0], SImode, 0), const0_rtx));\n+  emit_insn (gen_movsi (adjust_address (operands[0], SImode, 4), const0_rtx));\n+  DONE;\n+}\")\n \f\n ;; Floating point move insns\n "}]}