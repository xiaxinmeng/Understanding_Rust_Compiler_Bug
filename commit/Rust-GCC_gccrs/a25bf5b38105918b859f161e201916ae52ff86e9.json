{"sha": "a25bf5b38105918b859f161e201916ae52ff86e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI1YmY1YjM4MTA1OTE4Yjg1OWYxNjFlMjAxOTE2YWU1MmZmODZlOQ==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2006-07-04T20:58:54Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2006-07-04T20:58:54Z"}, "message": "libjava.exp (libjava_init): Call the GCJ_UNDER_TEST with the -B$specdir.\n\n2006-07-04  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* testsuite/lib/libjava.exp (libjava_init): Call the GCJ_UNDER_TEST with\n\tthe -B$specdir.\n\nFrom-SVN: r115188", "tree": {"sha": "ff570a4cd181cc5aa48f20d4c1d58745b67bcabc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff570a4cd181cc5aa48f20d4c1d58745b67bcabc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a25bf5b38105918b859f161e201916ae52ff86e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a25bf5b38105918b859f161e201916ae52ff86e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a25bf5b38105918b859f161e201916ae52ff86e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a25bf5b38105918b859f161e201916ae52ff86e9/comments", "author": null, "committer": null, "parents": [{"sha": "aef0f05060a77b450833048a93a4347641d14fb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aef0f05060a77b450833048a93a4347641d14fb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aef0f05060a77b450833048a93a4347641d14fb6"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "95d783cae7be7bd28ab3204646939286ad2dc64d", "filename": "libjava/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a25bf5b38105918b859f161e201916ae52ff86e9/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a25bf5b38105918b859f161e201916ae52ff86e9/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a25bf5b38105918b859f161e201916ae52ff86e9", "patch": "@@ -1,5 +1,8 @@\n 2006-07-04  Andreas Tobler  <a.tobler@schweiz.ch>\n \n+\t* testsuite/lib/libjava.exp (libjava_init): Call the GCJ_UNDER_TEST with\n+\tthe -B$specdir.\n+\n \tPR libgcj/28226:\n \t* include/posix.h (_Jv_platform_dladdr): Remove const qualifier.\n \t* include/win32.h (_Jv_platform_dladdr): Likewise."}, {"sha": "5100c8a7b498401d86456ca905aa5469537b5830", "filename": "libjava/testsuite/lib/libjava.exp", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a25bf5b38105918b859f161e201916ae52ff86e9/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a25bf5b38105918b859f161e201916ae52ff86e9/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flib%2Flibjava.exp?ref=a25bf5b38105918b859f161e201916ae52ff86e9", "patch": "@@ -166,22 +166,21 @@ proc libjava_init { args } {\n \n     # Find the libgcj jar file.\n \n-    set tmp [eval exec \"$GCJ_UNDER_TEST -v 2>@ stdout\"]\n-    regexp \" version \\[^\\n\\r\\]*\" $tmp version\n+    # FIXME: This finds libgcj.spec for the default multilib.\n+    # If thread models differ between multilibs, this has to be moved\n+    # to libjava_arguments\n+    set specdir [libjava_find_spec]\n+\n+    set text [eval exec \"$GCJ_UNDER_TEST -B$specdir -v 2>@ stdout\"]\n+    regexp \" version \\[^\\n\\r\\]*\" $text version\n     set libjava_version [lindex $version 1]\n \n     verbose \"version: $libjava_version\"\n \n     set libgcj_jar [glob $objdir/../libgcj-$libjava_version.jar]\n     verbose \"jar file is $libgcj_jar\"\n \n-    # FIXME: This finds libgcj.spec for the default multilib.\n-    # If thread models differ between multilibs, this has to be moved\n-    # to libjava_arguments\n-    set specdir [libjava_find_spec]\n-\n     # The -B is so we find libgcj.spec.\n-    set text [eval exec \"$GCJ_UNDER_TEST -B$specdir -v 2>@ stdout\"]\n     regexp -- \"Thread model: (\\[^\\n\\]+)\\n\" $text ignore model\n     set libjava_uses_threads [expr {! ($model == \"no\"\n \t\t\t\t       || $model == \"none\""}]}