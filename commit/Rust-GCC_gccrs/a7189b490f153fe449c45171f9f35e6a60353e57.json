{"sha": "a7189b490f153fe449c45171f9f35e6a60353e57", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTcxODliNDkwZjE1M2ZlNDQ5YzQ1MTcxZjlmMzVlNmE2MDM1M2U1Nw==", "commit": {"author": {"name": "Jeffrey D. Oldham", "email": "oldham@codesourcery.com", "date": "2003-01-14T21:36:20Z"}, "committer": {"name": "Jeffrey D. Oldham", "email": "oldham@gcc.gnu.org", "date": "2003-01-14T21:36:20Z"}, "message": "Further conform g++'s __vmi_class_type_info to the C++ ABI specification.\n\n2003-01-14  Jeffrey D. Oldham  <oldham@codesourcery.com>\n\n\tFurther conform g++'s __vmi_class_type_info to the C++ ABI\n\tspecification.\n\t* gcc/cp/rtti.c (dfs_class_hint_mark): Do not set hints not\n\tspecified by the specification.\n\t(class_hint_flags): Likewise.\n\t* gcc/testsuite/g++.old-deja/g++.abi/vmihint.C (main): Revise\n\texpected flags per the specification.\n\t* libstdc++-v3/libsupc++/cxxabi.h\n\t(__vmi_class_type_info::__flags_masks): Remove enumerations not\n\trequired by the specification.\n\nFrom-SVN: r61304", "tree": {"sha": "705346a28d62a633c3d46d47bac4a790d5c8f560", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/705346a28d62a633c3d46d47bac4a790d5c8f560"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7189b490f153fe449c45171f9f35e6a60353e57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7189b490f153fe449c45171f9f35e6a60353e57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7189b490f153fe449c45171f9f35e6a60353e57", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7189b490f153fe449c45171f9f35e6a60353e57/comments", "author": null, "committer": null, "parents": [{"sha": "7365ecf7896065901cd8689f62873acdeaf38a25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7365ecf7896065901cd8689f62873acdeaf38a25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7365ecf7896065901cd8689f62873acdeaf38a25"}], "stats": {"total": 56, "additions": 33, "deletions": 23}, "files": [{"sha": "b49c6da080fabb5703c753b9dab5acffbc01380e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a7189b490f153fe449c45171f9f35e6a60353e57", "patch": "@@ -1,3 +1,11 @@\n+2003-01-14  Jeffrey D. Oldham  <oldham@codesourcery.com>\n+\n+\tFurther conform g++'s __vmi_class_type_info to the C++ ABI\n+\tspecification.\n+\t* rtti.c (dfs_class_hint_mark): Do not set hints not specified by\n+\tthe specification.\n+\t(class_hint_flags): Likewise.\n+\n 2003-01-14  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \t* config-lang.in: Add semantics.c to gtfiles."}, {"sha": "0b688051f9f4cff2053c51ce56f6f7fe9797363f", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=a7189b490f153fe449c45171f9f35e6a60353e57", "patch": "@@ -1,5 +1,5 @@\n /* RunTime Type Identification\n-   Copyright (C) 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002\n+   Copyright (C) 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003\n    Free Software Foundation, Inc.\n    Mostly written by Jason Merrill (jason@cygnus.com).\n \n@@ -916,8 +916,6 @@ dfs_class_hint_mark (tree binfo, void *data)\n         *hint |= 1;\n       SET_CLASSTYPE_MARKED (basetype);\n     }\n-  if (!TREE_VIA_PUBLIC (binfo) && TYPE_BINFO (basetype) != binfo)\n-    *hint |= 4;\n   return NULL_TREE;\n };\n \n@@ -939,18 +937,10 @@ static int\n class_hint_flags (tree type)\n {\n   int hint_flags = 0;\n-  int i;\n   \n   dfs_walk (TYPE_BINFO (type), dfs_class_hint_mark, NULL, &hint_flags);\n   dfs_walk (TYPE_BINFO (type), dfs_class_hint_unmark, NULL, NULL);\n   \n-  for (i = 0; i < CLASSTYPE_N_BASECLASSES (type); ++i)\n-    {\n-      tree base_binfo = BINFO_BASETYPE (TYPE_BINFO (type), i);\n-      \n-      if (TREE_VIA_PUBLIC (base_binfo))\n-        hint_flags |= 0x8;\n-    }\n   return hint_flags;\n }\n         "}, {"sha": "c62c93115c4f99d1d0d3fc4675829a4f6f618a37", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a7189b490f153fe449c45171f9f35e6a60353e57", "patch": "@@ -1,3 +1,10 @@\n+2003-01-14  Jeffrey D. Oldham  <oldham@codesourcery.com>\n+\n+\tFurther conform g++'s __vmi_class_type_info to the C++ ABI\n+\tspecification.\n+\t* g++.old-deja/g++.abi/vmihint.C (main): Revise expected flags per\n+\tthe specification.\n+\n Tue Jan 14 00:45:03 CET 2003  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/i386-fpcvt-1.c: New test."}, {"sha": "b4cdf6720cc08a8c337e213e5dc9d931a9e8f390", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vmihint.C", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvmihint.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7189b490f153fe449c45171f9f35e6a60353e57/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvmihint.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvmihint.C?ref=a7189b490f153fe449c45171f9f35e6a60353e57", "patch": "@@ -1,5 +1,5 @@\n // Test rtti hint flags\n-// Copyright (C) 2000 Free Software Foundation, Inc.\n+// Copyright (C) 2000, 2003 Free Software Foundation, Inc.\n // Contributed by Nathan Sidwell 3 Apr 2000 <nathan@nathan@codesourcery.com>\n \n #include <typeinfo>\n@@ -43,20 +43,20 @@ int expect (int flags, std::type_info const &info)\n \n int main ()\n {\n-  if (! expect (0 | 8, typeid (C1)))\n+  if (! expect (0, typeid (C1)))\n     return 1;\n-  if (! expect (2 | 8, typeid (D1)))\n+  if (! expect (2, typeid (D1)))\n     return 2;\n-  if (! expect (1 | 8, typeid (E1)))\n+  if (! expect (1, typeid (E1)))\n     return 3;\n-  if (! expect (1 | 8, typeid (E2)))\n+  if (! expect (1, typeid (E2)))\n     return 4;\n-  if (! expect (3 | 8, typeid (F1)))\n+  if (! expect (3, typeid (F1)))\n     return 5;\n   \n-  if (!expect (4, typeid (P1)))\n+  if (!expect (0, typeid (P1)))\n     return 6;\n-  if (!expect (12, typeid (P2)))\n+  if (!expect (0, typeid (P2)))\n     return 7;\n   \n   return 0;"}, {"sha": "9929ee8cda1029781593bc403caa5e5b5c9a12fd", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7189b490f153fe449c45171f9f35e6a60353e57/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7189b490f153fe449c45171f9f35e6a60353e57/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a7189b490f153fe449c45171f9f35e6a60353e57", "patch": "@@ -1,3 +1,11 @@\n+2003-01-14  Jeffrey D. Oldham  <oldham@codesourcery.com>\n+\n+\tFurther conform g++'s __vmi_class_type_info to the C++ ABI\n+\tspecification.\n+\t* libsupc++/cxxabi.h\n+\t(__vmi_class_type_info::__flags_masks): Remove enumerations not\n+\trequired by the specification.\n+\n 2003-01-12  Benjamin Kosnik  <bkoz@redhat.com>\n \n \tRenames, namespaces for testsuite utilities.\t"}, {"sha": "e946e26585a2e7ed5bdeedee679b9ad1af635e3d", "filename": "libstdc++-v3/libsupc++/cxxabi.h", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7189b490f153fe449c45171f9f35e6a60353e57/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcxxabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7189b490f153fe449c45171f9f35e6a60353e57/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcxxabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcxxabi.h?ref=a7189b490f153fe449c45171f9f35e6a60353e57", "patch": "@@ -1,6 +1,6 @@\n // new abi support -*- C++ -*-\n   \n-// Copyright (C) 2000, 2002 Free Software Foundation, Inc.\n+// Copyright (C) 2000, 2002, 2003 Free Software Foundation, Inc.\n //\n // This file is part of GNU CC.\n //\n@@ -384,9 +384,6 @@ class __vmi_class_type_info : public __class_type_info {\n   enum __flags_masks {\n     __non_diamond_repeat_mask = 0x1,   /* distinct instance of repeated base */\n     __diamond_shaped_mask = 0x2,       /* diamond shaped multiple inheritance */\n-    non_public_base_mask = 0x4,      /* has non-public direct or indirect base */\n-    public_base_mask = 0x8,          /* has public base (direct) */\n-    \n     __flags_unknown_mask = 0x10\n   };\n "}]}