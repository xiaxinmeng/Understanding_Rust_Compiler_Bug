{"sha": "28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhjNGI3NDBhNjRjY2MzNDEyZWY0YzAxZTMwMTJlOTAxM2FkNWJjYg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-09-12T12:14:27Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-09-12T12:14:27Z"}, "message": "re PR tree-optimization/87266 (ICE: Segmentation fault (in useless_type_conversion_p, tree_nop_conversion_p, or is_gimple_reg_type))\n\n2018-09-12  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/87266\n\t* tree-ssa-sccvn.c (do_rpo_vn): Always iterate to not yet\n\tvisited blocks.\n\n\t* gcc.dg/torture/pr87266-1.c: New testcase.\n\t* gcc.dg/torture/pr87266-2.c: Likewise.\n\t* gcc.dg/torture/pr87266-3.c: Likewise.\n\t* gcc.dg/torture/pr87266-4.c: Likewise.\n\nFrom-SVN: r264237", "tree": {"sha": "23d4dadbe109d288896bf34415de7f06aa27d124", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23d4dadbe109d288896bf34415de7f06aa27d124"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ced8d882349226b8c566914826e8f59961240ad1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ced8d882349226b8c566914826e8f59961240ad1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ced8d882349226b8c566914826e8f59961240ad1"}], "stats": {"total": 160, "additions": 159, "deletions": 1}, "files": [{"sha": "c96b5eb5480a26f57bb31f7752937ffad9037569", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "patch": "@@ -1,3 +1,9 @@\n+2018-09-12  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/87266\n+\t* tree-ssa-sccvn.c (do_rpo_vn): Always iterate to not yet\n+\tvisited blocks.\n+\n 2018-09-12  Andreas Krebbel  <krebbel@linux.ibm.com>\n \n \t* config/s390/s390.md (PFPO_RND_MODE_DFP, PFPO_RND_MODE_BFP): New"}, {"sha": "5f73cd8fe2a708d543f1c4ca5d1676072b617dfd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "patch": "@@ -1,3 +1,11 @@\n+2018-09-12  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/87266\n+\t* gcc.dg/torture/pr87266-1.c: New testcase.\n+\t* gcc.dg/torture/pr87266-2.c: Likewise.\n+\t* gcc.dg/torture/pr87266-3.c: Likewise.\n+\t* gcc.dg/torture/pr87266-4.c: Likewise.\n+\n 2018-09-12  Andreas Krebbel  <krebbel@linux.ibm.com>\n \n \t* gcc.target/s390/dfp_to_bfp_rounding.c: New test."}, {"sha": "dc0a4a11df8813daf66d5c4b1d4376d3b2a1cf5c", "filename": "gcc/testsuite/gcc.dg/torture/pr87266-1.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-1.c?ref=28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "patch": "@@ -0,0 +1,32 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-fno-tree-ccp -fno-tree-forwprop\" } */\n+\n+void\n+iw (int gu, int mq, int r2)\n+{\n+  int yn = 0;\n+\n+  while (gu < 1)\n+    {\n+      for (;;)\n+        ;\n+\n+ bb:;\n+      int ay = 0;\n+\n+      while (ay < 1)\n+        ++mq;\n+    }\n+\n+  if (yn != 0)\n+    goto up;\n+\n+  if (0)\n+    {\n+ up:\n+      if (r2 == 0)\n+        goto bb;\n+    }\n+\n+  goto up;\n+}"}, {"sha": "cf0254feae172ea304ea79c60a9cbd9891d73f8d", "filename": "gcc/testsuite/gcc.dg/torture/pr87266-2.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-2.c?ref=28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "patch": "@@ -0,0 +1,32 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-fno-tree-ccp -fno-tree-forwprop\" } */\n+\n+void\n+iw (int gu, int mq, int r2)\n+{\n+  int yn = 0;\n+\n+  while (gu < 1)\n+    {\n+      for (;;)\n+        ;\n+\n+ bb:;\n+      int ay = 0;\n+\n+      while (yn < 1)\n+        ++mq;\n+    }\n+\n+  if (yn != 0)\n+    goto up;\n+\n+  if (0)\n+    {\n+ up:\n+      if (r2 == 0)\n+        goto bb;\n+    }\n+\n+  goto up;\n+}"}, {"sha": "0f3f3ba1f6be229276f340115798ee4f65e4c785", "filename": "gcc/testsuite/gcc.dg/torture/pr87266-3.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-3.c?ref=28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "patch": "@@ -0,0 +1,32 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-fno-tree-ccp -fno-tree-forwprop\" } */\n+\n+void\n+iw (int gu, int mq, int r2)\n+{\n+  int yn = 0;\n+\n+  while (gu < 1)\n+    {\n+      int ay = 0;\n+\n+      for (;;)\n+        ;\n+\n+ bb:\n+      while (ay < 1)\n+        ++mq;\n+    }\n+\n+  if (yn != 0)\n+    goto up;\n+\n+  if (0)\n+    {\n+ up:\n+      if (r2 == 0)\n+        goto bb;\n+    }\n+\n+  goto up;\n+}"}, {"sha": "e8d5ff1812b60420c8e0a763cf41af0a0d6afdb6", "filename": "gcc/testsuite/gcc.dg/torture/pr87266-4.c", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr87266-4.c?ref=28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "patch": "@@ -0,0 +1,38 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-fno-tree-dominator-opts -fno-tree-forwprop\" } */\n+\n+unsigned long int\n+re (long int j9)\n+{\n+  if (j9 == 0)\n+    return 1;\n+\n+  return j9;\n+}\n+\n+void\n+zq (int bt, int yy)\n+{\n+  int p3 = 0, go = 4, ez = go;\n+\n+  while (go != 0)\n+    {\n+      if (ez + !!bt - re (bt) != 0 && go != 0)\n+\t{\n+\t  if (yy != 0)\n+\t    p3 = yy;\n+\t}\n+      else\n+\treturn;\n+\n+      go = 2;\n+    }\n+}\n+\n+void\n+my (unsigned long int n6, int bt, int yy)\n+{\n+  zq (bt, yy);\n+  n6 = n6 == bt;\n+  zq (bt, yy);\n+}"}, {"sha": "8bf724e793afd22bf002ef0d6a23246ca9a643ab", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "patch": "@@ -6471,6 +6471,17 @@ do_rpo_vn (function *fn, edge entry, bitmap exit_bbs,\n \t\t== (EDGE_DFS_BACK|EDGE_EXECUTABLE)\n \t\t&& rpo_state[bb_to_rpo[e->dest->index]].iterate)\n \t      {\n+\t\tint destidx = bb_to_rpo[e->dest->index];\n+\t\tif (!rpo_state[destidx].visited)\n+\t\t  {\n+\t\t    if (dump_file && (dump_flags & TDF_DETAILS))\n+\t\t      fprintf (dump_file, \"Unvisited destination %d\\n\",\n+\t\t\t       e->dest->index);\n+\t\t    if (iterate_to == -1\n+\t\t\t|| destidx < iterate_to)\n+\t\t      iterate_to = destidx;\n+\t\t    continue;\n+\t\t  }\n \t\tif (dump_file && (dump_flags & TDF_DETAILS))\n \t\t  fprintf (dump_file, \"Looking for changed values of backedge \"\n \t\t\t   \"%d->%d destination PHIs\\n\",\n@@ -6497,7 +6508,6 @@ do_rpo_vn (function *fn, edge entry, bitmap exit_bbs,\n \t\t\t    && dump_file && (dump_flags & TDF_DETAILS))\n \t\t\t  fprintf (dump_file, \"PHI was CSEd and hashtable \"\n \t\t\t\t   \"state (changed)\\n\");\n-\t\t\tint destidx = bb_to_rpo[e->dest->index];\n \t\t\tif (iterate_to == -1\n \t\t\t    || destidx < iterate_to)\n \t\t\t  iterate_to = destidx;"}]}