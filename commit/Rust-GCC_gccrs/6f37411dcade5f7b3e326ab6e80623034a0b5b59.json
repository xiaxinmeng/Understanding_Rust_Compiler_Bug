{"sha": "6f37411dcade5f7b3e326ab6e80623034a0b5b59", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmYzNzQxMWRjYWRlNWY3YjNlMzI2YWI2ZTgwNjIzMDM0YTBiNWI1OQ==", "commit": {"author": {"name": "Marc Glisse", "email": "marc.glisse@inria.fr", "date": "2013-03-21T21:11:56Z"}, "committer": {"name": "Marc Glisse", "email": "glisse@gcc.gnu.org", "date": "2013-03-21T21:11:56Z"}, "message": "tree-pass.h (PROP_gimple_lvec): New.\n\n2013-03-21  Marc Glisse  <marc.glisse@inria.fr>\n\n\t* tree-pass.h (PROP_gimple_lvec): New.\n\t* passes.c (dump_properties): Handle PROP_gimple_lvec.\n\t(init_optimization_passes): Move pass_lower_vector.\n\t* tree-vect-generic.c (gate_expand_vector_operations_ssa): Test\n\tPROP_gimple_lvec.\n\t(pass_lower_vector): Provide PROP_gimple_lvec.\n\t(pass_lower_vector_ssa): Likewise.\n\t* cfgexpand.c (pass_expand): Require PROP_gimple_lvec.\n\nFrom-SVN: r196890", "tree": {"sha": "1f657498583f4dae2746478be86a85d0c6898b82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f657498583f4dae2746478be86a85d0c6898b82"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f37411dcade5f7b3e326ab6e80623034a0b5b59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f37411dcade5f7b3e326ab6e80623034a0b5b59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f37411dcade5f7b3e326ab6e80623034a0b5b59", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f37411dcade5f7b3e326ab6e80623034a0b5b59/comments", "author": {"login": "mglisse", "id": 10097863, "node_id": "MDQ6VXNlcjEwMDk3ODYz", "avatar_url": "https://avatars.githubusercontent.com/u/10097863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mglisse", "html_url": "https://github.com/mglisse", "followers_url": "https://api.github.com/users/mglisse/followers", "following_url": "https://api.github.com/users/mglisse/following{/other_user}", "gists_url": "https://api.github.com/users/mglisse/gists{/gist_id}", "starred_url": "https://api.github.com/users/mglisse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mglisse/subscriptions", "organizations_url": "https://api.github.com/users/mglisse/orgs", "repos_url": "https://api.github.com/users/mglisse/repos", "events_url": "https://api.github.com/users/mglisse/events{/privacy}", "received_events_url": "https://api.github.com/users/mglisse/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "511ef689f442669bf1f046365985b0a67f9531db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/511ef689f442669bf1f046365985b0a67f9531db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/511ef689f442669bf1f046365985b0a67f9531db"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "f06fefff7365c58e63fcc83cd6da34af34988972", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6f37411dcade5f7b3e326ab6e80623034a0b5b59", "patch": "@@ -1,3 +1,14 @@\n+2013-03-21  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\t* tree-pass.h (PROP_gimple_lvec): New.\n+\t* passes.c (dump_properties): Handle PROP_gimple_lvec.\n+\t(init_optimization_passes): Move pass_lower_vector.\n+\t* tree-vect-generic.c (gate_expand_vector_operations_ssa): Test\n+\tPROP_gimple_lvec.\n+\t(pass_lower_vector): Provide PROP_gimple_lvec.\n+\t(pass_lower_vector_ssa): Likewise.\n+\t* cfgexpand.c (pass_expand): Require PROP_gimple_lvec.\n+\n 2013-03-21  Mark Wielaard  <mjw@redhat.com>\n \n \t* dwarf2out.c (size_of_aranges): Skip DECL_IGNORED_P functions."}, {"sha": "771b019c65b12303c45114377cae1d2330aae591", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=6f37411dcade5f7b3e326ab6e80623034a0b5b59", "patch": "@@ -4858,7 +4858,8 @@ struct rtl_opt_pass pass_expand =\n   0,                                    /* static_pass_number */\n   TV_EXPAND,\t\t\t\t/* tv_id */\n   PROP_ssa | PROP_gimple_leh | PROP_cfg\n-    | PROP_gimple_lcx,\t\t\t/* properties_required */\n+    | PROP_gimple_lcx\n+    | PROP_gimple_lvec,\t\t\t/* properties_required */\n   PROP_rtl,                             /* properties_provided */\n   PROP_ssa | PROP_trees,\t\t/* properties_destroyed */\n   TODO_verify_ssa | TODO_verify_flow"}, {"sha": "a47e092ea23be234c5b4d3018cb579f21873c1b1", "filename": "gcc/passes.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=6f37411dcade5f7b3e326ab6e80623034a0b5b59", "patch": "@@ -1310,7 +1310,6 @@ init_optimization_passes (void)\n       NEXT_PASS (pass_expand_omp);\n \n       NEXT_PASS (pass_build_ssa);\n-      NEXT_PASS (pass_lower_vector);\n       NEXT_PASS (pass_early_warn_uninitialized);\n       NEXT_PASS (pass_rebuild_cgraph_edges);\n       NEXT_PASS (pass_inline_parameters);\n@@ -1554,6 +1553,7 @@ init_optimization_passes (void)\n       NEXT_PASS (pass_tm_memopt);\n       NEXT_PASS (pass_tm_edges);\n     }\n+  NEXT_PASS (pass_lower_vector);\n   NEXT_PASS (pass_lower_complex_O0);\n   NEXT_PASS (pass_asan_O0);\n   NEXT_PASS (pass_tsan_O0);\n@@ -2771,6 +2771,8 @@ dump_properties (FILE *dump, unsigned int props)\n     fprintf (dump, \"PROP_gimple_lomp\\n\");\n   if (props & PROP_gimple_lcx)\n     fprintf (dump, \"PROP_gimple_lcx\\n\");\n+  if (props & PROP_gimple_lvec)\n+    fprintf (dump, \"PROP_gimple_lvec\\n\");\n   if (props & PROP_cfglayout)\n     fprintf (dump, \"PROP_cfglayout\\n\");\n }"}, {"sha": "0942ad7793f479f383544e6c219bec82f4f0bbce", "filename": "gcc/tree-pass.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Ftree-pass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Ftree-pass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pass.h?ref=6f37411dcade5f7b3e326ab6e80623034a0b5b59", "patch": "@@ -148,6 +148,7 @@ struct simple_ipa_opt_pass\n #define PROP_cfglayout\t \t(1 << 9)\t/* cfglayout mode on RTL */\n #define PROP_gimple_lcx\t\t(1 << 10)       /* lowered complex */\n #define PROP_loops\t\t(1 << 11)\t/* preserve loop structures */\n+#define PROP_gimple_lvec\t(1 << 12)       /* lowered vector */\n \n #define PROP_trees \\\n   (PROP_gimple_any | PROP_gimple_lcf | PROP_gimple_leh | PROP_gimple_lomp)"}, {"sha": "dbad6d97598d30a35f7ab881bf0ffb20c3609463", "filename": "gcc/tree-vect-generic.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Ftree-vect-generic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f37411dcade5f7b3e326ab6e80623034a0b5b59/gcc%2Ftree-vect-generic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-generic.c?ref=6f37411dcade5f7b3e326ab6e80623034a0b5b59", "patch": "@@ -1472,7 +1472,7 @@ expand_vector_operations_1 (gimple_stmt_iterator *gsi)\n static bool\n gate_expand_vector_operations_ssa (void)\n {\n-  return optimize == 0;\n+  return !(cfun->curr_properties & PROP_gimple_lvec);\n }\n \n static unsigned int\n@@ -1513,7 +1513,7 @@ struct gimple_opt_pass pass_lower_vector =\n   0,\t\t\t\t\t/* static_pass_number */\n   TV_NONE,\t\t\t\t/* tv_id */\n   PROP_cfg,\t\t\t\t/* properties_required */\n-  0,\t\t\t\t\t/* properties_provided */\n+  PROP_gimple_lvec,\t\t\t/* properties_provided */\n   0,\t\t\t\t\t/* properties_destroyed */\n   0,\t\t\t\t\t/* todo_flags_start */\n   TODO_update_ssa\t                /* todo_flags_finish */\n@@ -1536,7 +1536,7 @@ struct gimple_opt_pass pass_lower_vector_ssa =\n   0,\t\t\t\t\t/* static_pass_number */\n   TV_NONE,\t\t\t\t/* tv_id */\n   PROP_cfg,\t\t\t\t/* properties_required */\n-  0,\t\t\t\t\t/* properties_provided */\n+  PROP_gimple_lvec,\t\t\t/* properties_provided */\n   0,\t\t\t\t\t/* properties_destroyed */\n   0,\t\t\t\t\t/* todo_flags_start */\n   TODO_update_ssa\t                /* todo_flags_finish */"}]}