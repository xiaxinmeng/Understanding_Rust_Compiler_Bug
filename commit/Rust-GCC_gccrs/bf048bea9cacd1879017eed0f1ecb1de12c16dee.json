{"sha": "bf048bea9cacd1879017eed0f1ecb1de12c16dee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmYwNDhiZWE5Y2FjZDE4NzkwMTdlZWQwZjFlY2IxZGUxMmMxNmRlZQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2008-04-18T00:58:58Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2008-04-18T00:58:58Z"}, "message": "re PR preprocessor/34866 (valgrind error indication in testsuite from errors.c:156:cpp_error with gcc.dg/cpp/Wmissingdirs.c)\n\n\tPR libcpp/34866:\n\t* errors.c (cpp_error): Don't reference a token before the start\n\tof the current run.\n\nFrom-SVN: r134421", "tree": {"sha": "5c35a8e5b6fb34788c3fd69310012a174a5fcceb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c35a8e5b6fb34788c3fd69310012a174a5fcceb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf048bea9cacd1879017eed0f1ecb1de12c16dee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf048bea9cacd1879017eed0f1ecb1de12c16dee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf048bea9cacd1879017eed0f1ecb1de12c16dee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf048bea9cacd1879017eed0f1ecb1de12c16dee/comments", "author": null, "committer": null, "parents": [{"sha": "723424c861e1cfc400b5cbe2e89f90d345b7b9b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/723424c861e1cfc400b5cbe2e89f90d345b7b9b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/723424c861e1cfc400b5cbe2e89f90d345b7b9b4"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "0826b628a9bd3feffdabe63fd567348afa6b0ea4", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf048bea9cacd1879017eed0f1ecb1de12c16dee/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf048bea9cacd1879017eed0f1ecb1de12c16dee/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=bf048bea9cacd1879017eed0f1ecb1de12c16dee", "patch": "@@ -1,3 +1,9 @@\n+2008-04-17  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libcpp/34866:\n+\t* errors.c (cpp_error): Don't reference a token before the start\n+\tof the current run.\n+\n 2008-04-16  Tom Tromey  <tromey@redhat.com>\n \n \t* Makefile.in (TAGS_SOURCES): New variable."}, {"sha": "0b7c1e0f458b5caf71a891a9aa51ae4bb30c489f", "filename": "libcpp/errors.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf048bea9cacd1879017eed0f1ecb1de12c16dee/libcpp%2Ferrors.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf048bea9cacd1879017eed0f1ecb1de12c16dee/libcpp%2Ferrors.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Ferrors.c?ref=bf048bea9cacd1879017eed0f1ecb1de12c16dee", "patch": "@@ -1,6 +1,6 @@\n /* Default error handlers for CPP Library.\n    Copyright (C) 1986, 1987, 1989, 1992, 1993, 1994, 1995, 1998, 1999, 2000,\n-   2001, 2002, 2004 Free Software Foundation, Inc.\n+   2001, 2002, 2004, 2008 Free Software Foundation, Inc.\n    Written by Per Bothner, 1994.\n    Based on CCCP program by Paul Rubin, June 1986\n    Adapted to ANSI C, Richard Stallman, Jan 1987\n@@ -151,6 +151,15 @@ cpp_error (cpp_reader * pfile, int level, const char *msgid, ...)\n \t  else\n \t    src_loc = pfile->line_table->highest_line;\n \t}\n+      /* We don't want to refer to a token before the beginning of the\n+\t current run -- that is invalid.  */\n+      else if (pfile->cur_token == pfile->cur_run->base)\n+\t{\n+\t  if (pfile->cur_run->prev != NULL)\n+\t    src_loc = pfile->cur_run->prev->limit->src_loc;\n+\t  else\n+\t    src_loc = 0;\n+\t}\n       else\n \t{\n \t  src_loc = pfile->cur_token[-1].src_loc;"}]}