{"sha": "879a4a9a4b5bebf359e4ef77f240f50d365c04cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc5YTRhOWE0YjViZWJmMzU5ZTRlZjc3ZjI0MGY1MGQzNjVjMDRjZA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-02-28T00:44:31Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-02-28T00:44:31Z"}, "message": "(handle_pragma_weak): Depend on ASM_OUTPUT_DEF not SET_ASM_OP when defining it.\n\n(handle_pragma_weak): Depend on ASM_OUTPUT_DEF not\nSET_ASM_OP when defining it.  Use ASM_OUTPUT_DEF to output value\ninstead of SET_ASM_OP and explicit ASM_OUTPUT_LABELREF calls.\n\nFrom-SVN: r6662", "tree": {"sha": "6462fcb8e6e9f67f6253933d09c2ccf91369e5c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6462fcb8e6e9f67f6253933d09c2ccf91369e5c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/879a4a9a4b5bebf359e4ef77f240f50d365c04cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/879a4a9a4b5bebf359e4ef77f240f50d365c04cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/879a4a9a4b5bebf359e4ef77f240f50d365c04cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/879a4a9a4b5bebf359e4ef77f240f50d365c04cd/comments", "author": null, "committer": null, "parents": [{"sha": "2d8d0db8f8424a4db82f5c3d071d6395c2625a5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d8d0db8f8424a4db82f5c3d071d6395c2625a5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d8d0db8f8424a4db82f5c3d071d6395c2625a5b"}], "stats": {"total": 23, "additions": 5, "deletions": 18}, "files": [{"sha": "d4576f817fcd63a857afaf461273e6f2277caf07", "filename": "gcc/varasm.c", "status": "modified", "additions": 5, "deletions": 18, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/879a4a9a4b5bebf359e4ef77f240f50d365c04cd/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/879a4a9a4b5bebf359e4ef77f240f50d365c04cd/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=879a4a9a4b5bebf359e4ef77f240f50d365c04cd", "patch": "@@ -3771,8 +3771,9 @@ output_constructor (exp, size)\n \n #ifdef HANDLE_SYSV_PRAGMA\n \n-/* Support #pragma weak by default if WEAK_ASM_OP is defined.  */\n-#if defined (HANDLE_PRAGMA_WEAK) || (defined (WEAK_ASM_OP) && defined (SET_ASM_OP))\n+/* Support #pragma weak by default if WEAK_ASM_OP and ASM_OUTPUT_DEF\n+   are defined.  */\n+#if defined (WEAK_ASM_OP) && defined (ASM_OUTPUT_DEF)\n \n /* See c-pragma.c for an identical definition.  */\n enum pragma_state\n@@ -3808,26 +3809,12 @@ handle_pragma_weak (what, asm_out_file, name, value)\n \n       fputc ('\\n', asm_out_file);\n       if (what == ps_value)\n-\t{\n-\t  fprintf (asm_out_file, \"\\t%s\\t\", SET_ASM_OP);\n-\t  if (output_bytecode)\n-\t    BC_OUTPUT_LABELREF (asm_out_file, name);\n-\t  else\n-\t    ASM_OUTPUT_LABELREF (asm_out_file, name);\n-\n-\t  fputc (',', asm_out_file);\n-\t  if (output_bytecode)\n-\t    BC_OUTPUT_LABELREF (asm_out_file, value);\n-\t  else\n-\t    ASM_OUTPUT_LABELREF (asm_out_file, value);\n-\n-\t  fputc ('\\n', asm_out_file);\n-\t}\n+\tASM_OUTPUT_DEF (asm_out_file, name, value);\n     }\n   else if (! (what == ps_done || what == ps_start))\n     warning (\"malformed `#pragma weak'\");\n }\n \n #endif /* HANDLE_PRAGMA_WEAK or (WEAK_ASM_OP and SET_ASM_OP) */\n \n-#endif /* HANDLE_SYSV_PRAGMA */\n+#endif /* WEAK_ASM_OP && ASM_OUTPUT_DEF */"}]}