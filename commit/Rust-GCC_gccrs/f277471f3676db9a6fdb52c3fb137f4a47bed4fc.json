{"sha": "f277471f3676db9a6fdb52c3fb137f4a47bed4fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI3NzQ3MWYzNjc2ZGI5YTZmZGI1MmMzZmIxMzdmNGE0N2JlZDRmYw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-11-12T21:37:12Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-11-12T21:37:12Z"}, "message": "(output_function_{pro,epi}logue): Save and restore fp-registers only\nif TARGET_68881.\n\nFrom-SVN: r13145", "tree": {"sha": "42d45f31bd40649bc68764dbf5e6296ab5e3a5d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/42d45f31bd40649bc68764dbf5e6296ab5e3a5d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f277471f3676db9a6fdb52c3fb137f4a47bed4fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f277471f3676db9a6fdb52c3fb137f4a47bed4fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f277471f3676db9a6fdb52c3fb137f4a47bed4fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f277471f3676db9a6fdb52c3fb137f4a47bed4fc/comments", "author": null, "committer": null, "parents": [{"sha": "d8db81924a726ef18cde639408b05b91d9ab9dbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8db81924a726ef18cde639408b05b91d9ab9dbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8db81924a726ef18cde639408b05b91d9ab9dbb"}], "stats": {"total": 32, "additions": 19, "deletions": 13}, "files": [{"sha": "d6a17215ef1b9071cd7691ee8198fcfd97611fa3", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 19, "deletions": 13, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f277471f3676db9a6fdb52c3fb137f4a47bed4fc/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f277471f3676db9a6fdb52c3fb137f4a47bed4fc/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=f277471f3676db9a6fdb52c3fb137f4a47bed4fc", "patch": "@@ -255,18 +255,21 @@ output_function_prologue (stream, size)\n #endif\n       }\n #endif\n-  for (regno = 16; regno < 24; regno++)\n-    if (regs_ever_live[regno] && ! call_used_regs[regno])\n-       mask |= 1 << (regno - 16);\n-  if ((mask & 0xff) != 0)\n+  if (TARGET_68881)\n     {\n+      for (regno = 16; regno < 24; regno++)\n+\tif (regs_ever_live[regno] && ! call_used_regs[regno])\n+\t   mask |= 1 << (regno - 16);\n+      if ((mask & 0xff) != 0)\n+\t{\n #ifdef MOTOROLA\n-      asm_fprintf (stream, \"\\tfmovm %0I0x%x,-(%Rsp)\\n\", mask & 0xff);\n+\t  asm_fprintf (stream, \"\\tfmovm %0I0x%x,-(%Rsp)\\n\", mask & 0xff);\n #else\n-      asm_fprintf (stream, \"\\tfmovem %0I0x%x,%Rsp@-\\n\", mask & 0xff);\n+\t  asm_fprintf (stream, \"\\tfmovem %0I0x%x,%Rsp@-\\n\", mask & 0xff);\n #endif\n+\t}\n+      mask = 0;\n     }\n-  mask = 0;\n   for (regno = 0; regno < 16; regno++)\n     if (regs_ever_live[regno] && ! call_used_regs[regno])\n       {\n@@ -428,12 +431,15 @@ output_function_epilogue (stream, size)\n   fpoffset = nregs * 8;\n #endif\n   nregs = 0;\n-  for (regno = 16; regno < 24; regno++)\n-    if (regs_ever_live[regno] && ! call_used_regs[regno])\n-      {\n-        nregs++;\n-\tfmask |= 1 << (23 - regno);\n-      }\n+  if (TARGET_68881)\n+    {\n+      for (regno = 16; regno < 24; regno++)\n+\tif (regs_ever_live[regno] && ! call_used_regs[regno])\n+\t  {\n+\t    nregs++;\n+\t    fmask |= 1 << (23 - regno);\n+\t  }\n+    }\n   foffset = fpoffset + nregs * 12;\n   nregs = 0;  mask = 0;\n   if (frame_pointer_needed)"}]}