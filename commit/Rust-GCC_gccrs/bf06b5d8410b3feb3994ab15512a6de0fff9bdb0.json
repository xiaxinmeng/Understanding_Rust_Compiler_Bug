{"sha": "bf06b5d8410b3feb3994ab15512a6de0fff9bdb0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmYwNmI1ZDg0MTBiM2ZlYjM5OTRhYjE1NTEyYTZkZTBmZmY5YmRiMA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2001-09-10T20:23:35Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-09-10T20:23:35Z"}, "message": "builtins.c (c_getstr): Correct thinko in last change and further cleanup.\n\n\t* builtins.c (c_getstr): Correct thinko in last change and further\n\tcleanup.\n\nFrom-SVN: r45519", "tree": {"sha": "f0af18cd6cf7684a1873adddbb2a05daa72c803c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f0af18cd6cf7684a1873adddbb2a05daa72c803c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0/comments", "author": null, "committer": null, "parents": [{"sha": "a623ef6e7121ca847162099d3141004454edd636", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a623ef6e7121ca847162099d3141004454edd636", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a623ef6e7121ca847162099d3141004454edd636"}], "stats": {"total": 26, "additions": 12, "deletions": 14}, "files": [{"sha": "e656e9b025acbaf8fd7ad837a44bbdbff0a3f6ac", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bf06b5d8410b3feb3994ab15512a6de0fff9bdb0", "patch": "@@ -1,3 +1,8 @@\n+Mon Sep 10 16:26:44 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* builtins.c (c_getstr): Correct thinko in last change and further\n+\tcleanup.\n+\n 2001-09-10  Tim Freeman <tim@fungibole.com>\n \n \t* dwarf2out.c (incomplete_types, decl_scope_table): Make them"}, {"sha": "7cd7e899113d1e8109f91af07d1a039c174e231b", "filename": "gcc/builtins.c", "status": "modified", "additions": 7, "deletions": 14, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf06b5d8410b3feb3994ab15512a6de0fff9bdb0/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=bf06b5d8410b3feb3994ab15512a6de0fff9bdb0", "patch": "@@ -296,29 +296,22 @@ c_getstr (src)\n {\n   tree offset_node;\n   HOST_WIDE_INT offset;\n-  int max;\n-  const char *ptr;\n \n   src = string_constant (src, &offset_node);\n   if (src == 0)\n     return 0;\n \n-  max = TREE_STRING_LENGTH (src) - 1;\n-  ptr = TREE_STRING_POINTER (src);\n-\n-  if (offset_node == 0 || !host_integerp (offset_node, 0))\n-    return ptr;\n-\n-  offset = tree_low_cst (offset_node, 0);\n-  if (offset < 0 || offset > max)\n+  if (offset_node == 0)\n+    return TREE_STRING_POINTER (src);\n+  else if (!host_integerp (offset_node, 1)\n+\t   || compare_tree_int (offset_node, TREE_STRING_LENGTH (src) - 1) > 0)\n     return 0;\n \n-  return ptr + offset;\n+  return TREE_STRING_POINTER (src) + tree_low_cst (offset_node, 1);\n }\n \n-/* Return a CONST_INT or CONST_DOUBLE corresponding to target\n-   reading GET_MODE_BITSIZE (MODE) bits from string constant\n-   STR.  */\n+/* Return a CONST_INT or CONST_DOUBLE corresponding to target reading\n+   GET_MODE_BITSIZE (MODE) bits from string constant STR.  */\n \n static rtx\n c_readstr (str, mode)"}]}