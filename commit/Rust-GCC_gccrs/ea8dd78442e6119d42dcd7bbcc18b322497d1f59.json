{"sha": "ea8dd78442e6119d42dcd7bbcc18b322497d1f59", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE4ZGQ3ODQ0MmU2MTE5ZDQyZGNkN2JiY2MxOGIzMjI0OTdkMWY1OQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-05-06T18:02:26Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-05-06T18:02:26Z"}, "message": "(pointer_diff): Error if op1 is pointer to incomplete type.\n\nFrom-SVN: r4367", "tree": {"sha": "0f24d3e508ff40b1a5b9c217d41e1261d4927bd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f24d3e508ff40b1a5b9c217d41e1261d4927bd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea8dd78442e6119d42dcd7bbcc18b322497d1f59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea8dd78442e6119d42dcd7bbcc18b322497d1f59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea8dd78442e6119d42dcd7bbcc18b322497d1f59", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea8dd78442e6119d42dcd7bbcc18b322497d1f59/comments", "author": null, "committer": null, "parents": [{"sha": "9ea0a7533cf9d9727fbb6c8d606c67da145c2572", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ea0a7533cf9d9727fbb6c8d606c67da145c2572", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ea0a7533cf9d9727fbb6c8d606c67da145c2572"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "2e3b0185553609077f82e318b9e27164e6f9a0ba", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea8dd78442e6119d42dcd7bbcc18b322497d1f59/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea8dd78442e6119d42dcd7bbcc18b322497d1f59/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=ea8dd78442e6119d42dcd7bbcc18b322497d1f59", "patch": "@@ -2944,6 +2944,10 @@ pointer_diff (op0, op1)\n \n   op0 = build_binary_op (MINUS_EXPR, convert (restype, op0),\n \t\t\t convert (restype, op1), 1);\n+  /* This generates an error if op1 is pointer to incomplete type.  */\n+  if (TYPE_SIZE (TREE_TYPE (TREE_TYPE (op1))) == 0)\n+    error (\"arithmetic on pointer to an incomplete type\");\n+  /* This generates an error if op0 is pointer to incomplete type.  */\n   op1 = c_size_in_bytes (target_type);\n \n   /* Divide by the size, in easiest possible way.  */"}]}