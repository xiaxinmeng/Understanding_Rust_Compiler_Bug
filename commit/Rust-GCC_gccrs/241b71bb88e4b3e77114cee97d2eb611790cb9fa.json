{"sha": "241b71bb88e4b3e77114cee97d2eb611790cb9fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQxYjcxYmI4OGU0YjNlNzcxMTRjZWU5N2QyZWI2MTE3OTBjYjlmYQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2013-11-27T10:00:48Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2013-11-27T10:00:48Z"}, "message": "Handle vector increment/decrement in build_unary_op\n\n2013-11-27  Tom de Vries  <tom@codesourcery.com>\n\t    Marc Glisse  <marc.glisse@inria.fr>\n\n\tPR c++/59032\n\t* c-typeck.c (build_unary_op): Allow vector increment and decrement.\n\n\t* typeck.c (cp_build_unary_op): Allow vector increment and decrement.\n\n\t* c-c++-common/pr59032.c: New testcase.\n\nCo-Authored-By: Marc Glisse <marc.glisse@inria.fr>\n\nFrom-SVN: r205439", "tree": {"sha": "59afda12c182fc1e142f96b4e40f4b06d86d1a7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59afda12c182fc1e142f96b4e40f4b06d86d1a7a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/241b71bb88e4b3e77114cee97d2eb611790cb9fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/241b71bb88e4b3e77114cee97d2eb611790cb9fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/241b71bb88e4b3e77114cee97d2eb611790cb9fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/241b71bb88e4b3e77114cee97d2eb611790cb9fa/comments", "author": null, "committer": null, "parents": [{"sha": "e934916c8647d1e343eaacf114fdbff22dfa07a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e934916c8647d1e343eaacf114fdbff22dfa07a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e934916c8647d1e343eaacf114fdbff22dfa07a4"}], "stats": {"total": 58, "additions": 55, "deletions": 3}, "files": [{"sha": "1b7af32a0cca94646493d6f9c6e5adf40a47a663", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=241b71bb88e4b3e77114cee97d2eb611790cb9fa", "patch": "@@ -1,3 +1,9 @@\n+2013-11-27  Tom de Vries  <tom@codesourcery.com>\n+\t    Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/59032\n+\t* c-typeck.c (build_unary_op): Allow vector increment and decrement.\n+\n 2013-11-22  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* c-typeck.c: Add required include files from gimple.h."}, {"sha": "f602ca4eb544fd79c239731789dcfa36bfc5806b", "filename": "gcc/c/c-typeck.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-typeck.c?ref=241b71bb88e4b3e77114cee97d2eb611790cb9fa", "patch": "@@ -3982,7 +3982,7 @@ build_unary_op (location_t location,\n \n       if (typecode != POINTER_TYPE && typecode != FIXED_POINT_TYPE\n \t  && typecode != INTEGER_TYPE && typecode != REAL_TYPE\n-\t  && typecode != COMPLEX_TYPE)\n+\t  && typecode != COMPLEX_TYPE && typecode != VECTOR_TYPE)\n \t{\n \t  if (code == PREINCREMENT_EXPR || code == POSTINCREMENT_EXPR)\n \t    error_at (location, \"wrong type argument to increment\");\n@@ -4047,7 +4047,9 @@ build_unary_op (location_t location,\n \t  }\n \telse\n \t  {\n-\t    inc = integer_one_node;\n+\t    inc = VECTOR_TYPE_P (argtype)\n+\t      ? build_one_cst (argtype)\n+\t      : integer_one_node;\n \t    inc = convert (argtype, inc);\n \t  }\n "}, {"sha": "4d4e0e4b22f70ab4e85d77948276c702483fa7c0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=241b71bb88e4b3e77114cee97d2eb611790cb9fa", "patch": "@@ -1,3 +1,9 @@\n+2013-11-27  Tom de Vries  <tom@codesourcery.com>\n+\t    Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/59032\n+\t* typeck.c (cp_build_unary_op): Allow vector increment and decrement.\n+\n 2013-11-27  Tom de Vries  <tom@codesourcery.com>\n \t    Marc Glisse  <marc.glisse@inria.fr>\n "}, {"sha": "9f9f7b6775b6a784da164bf4569837537007454e", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=241b71bb88e4b3e77114cee97d2eb611790cb9fa", "patch": "@@ -5748,7 +5748,9 @@ cp_build_unary_op (enum tree_code code, tree xarg, int noconvert,\n \t    inc = cxx_sizeof_nowarn (TREE_TYPE (argtype));\n \t  }\n \telse\n-\t  inc = integer_one_node;\n+\t  inc = VECTOR_TYPE_P (argtype)\n+\t    ? build_one_cst (argtype)\n+\t    : integer_one_node;\n \n \tinc = cp_convert (argtype, inc, complain);\n "}, {"sha": "6cf7c386ae69e9a24f47fad07c82d9192beb37d5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=241b71bb88e4b3e77114cee97d2eb611790cb9fa", "patch": "@@ -1,3 +1,9 @@\n+2013-11-27  Tom de Vries  <tom@codesourcery.com>\n+\t    Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/59032\n+\t* c-c++-common/pr59032.c: New testcase.\n+\n 2013-11-27  Tom de Vries  <tom@codesourcery.com>\n \t    Marc Glisse  <marc.glisse@inria.fr>\n "}, {"sha": "327f5aeb6bc2898e44ac2333d0ee44a2dee79226", "filename": "gcc/testsuite/c-c++-common/pr59032.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr59032.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/241b71bb88e4b3e77114cee97d2eb611790cb9fa/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr59032.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr59032.c?ref=241b71bb88e4b3e77114cee97d2eb611790cb9fa", "patch": "@@ -0,0 +1,30 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+void\n+foo()\n+{\n+  float v __attribute__((vector_size(8)));\n+  v++;\n+}\n+\n+void\n+foo2 ()\n+{\n+  float v __attribute__((vector_size(8)));\n+  ++v;\n+}\n+\n+void\n+foo3 ()\n+{\n+  float v __attribute__((vector_size(8)));\n+  v--;\n+}\n+\n+void\n+foo4 ()\n+{\n+  float v __attribute__((vector_size(8)));\n+  --v;\n+}"}]}