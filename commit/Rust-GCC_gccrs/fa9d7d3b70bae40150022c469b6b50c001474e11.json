{"sha": "fa9d7d3b70bae40150022c469b6b50c001474e11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE5ZDdkM2I3MGJhZTQwMTUwMDIyYzQ2OWI2YjUwYzAwMTQ3NGUxMQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2010-06-09T09:15:51Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-06-09T09:15:51Z"}, "message": "re PR libstdc++/44413 (inefficient code for std::string::compare on x86-64)\n\n2010-06-09  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR libstdc++/44413\n\t* include/ext/vstring_util.h (__vstring_utility<>::_S_compare):\n\tSimplify, just return -1, 0, 1.\n\nFrom-SVN: r160456", "tree": {"sha": "500559c8ddc05b9632615996c1a25949ffe8921d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/500559c8ddc05b9632615996c1a25949ffe8921d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa9d7d3b70bae40150022c469b6b50c001474e11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa9d7d3b70bae40150022c469b6b50c001474e11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa9d7d3b70bae40150022c469b6b50c001474e11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa9d7d3b70bae40150022c469b6b50c001474e11/comments", "author": null, "committer": null, "parents": [{"sha": "a9f2ab18ba294528039486427c60e1bbf060c746", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9f2ab18ba294528039486427c60e1bbf060c746", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9f2ab18ba294528039486427c60e1bbf060c746"}], "stats": {"total": 23, "additions": 12, "deletions": 11}, "files": [{"sha": "edb1519046cc98f9673054058e367d767d762fd8", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa9d7d3b70bae40150022c469b6b50c001474e11/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa9d7d3b70bae40150022c469b6b50c001474e11/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=fa9d7d3b70bae40150022c469b6b50c001474e11", "patch": "@@ -1,3 +1,9 @@\n+2010-06-09  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR libstdc++/44413\n+\t* include/ext/vstring_util.h (__vstring_utility<>::_S_compare):\n+\tSimplify, just return -1, 0, 1.\n+\n 2010-06-08  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* include/std/type_traits (has_nothrow_assign): Rename to"}, {"sha": "a9c88d467a01b06bd6b73b9fbab3c8d5cf882ac6", "filename": "libstdc++-v3/include/ext/vstring_util.h", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa9d7d3b70bae40150022c469b6b50c001474e11/libstdc%2B%2B-v3%2Finclude%2Fext%2Fvstring_util.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa9d7d3b70bae40150022c469b6b50c001474e11/libstdc%2B%2B-v3%2Finclude%2Fext%2Fvstring_util.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fext%2Fvstring_util.h?ref=fa9d7d3b70bae40150022c469b6b50c001474e11", "patch": "@@ -1,6 +1,7 @@\n // Versatile string utility -*- C++ -*-\n \n-// Copyright (C) 2005, 2006, 2007, 2008, 2009 Free Software Foundation, Inc.\n+// Copyright (C) 2005, 2006, 2007, 2008, 2009, 2010\n+// Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -50,10 +51,10 @@ _GLIBCXX_BEGIN_NAMESPACE(__gnu_cxx)\n     {\n       typedef typename _Alloc::template rebind<_CharT>::other _CharT_alloc_type;\n \n-      typedef _Traits\t\t\t\t\t    traits_type;      \n+      typedef _Traits\t\t\t\t\t    traits_type;\n       typedef typename _Traits::char_type\t\t    value_type;\n       typedef typename _CharT_alloc_type::size_type\t    size_type;\n-      typedef typename _CharT_alloc_type::difference_type   difference_type;      \n+      typedef typename _CharT_alloc_type::difference_type   difference_type;\n       typedef typename _CharT_alloc_type::pointer\t    pointer;\n       typedef typename _CharT_alloc_type::const_pointer\t    const_pointer;\n \n@@ -164,14 +165,8 @@ _GLIBCXX_BEGIN_NAMESPACE(__gnu_cxx)\n       static int\n       _S_compare(size_type __n1, size_type __n2)\n       {\n-\tconst difference_type __d = difference_type(__n1 - __n2);\n-\n-\tif (__d > __numeric_traits_integer<int>::__max)\n-\t  return __numeric_traits_integer<int>::__max;\n-\telse if (__d < __numeric_traits_integer<int>::__min)\n-\t  return __numeric_traits_integer<int>::__min;\n-\telse\n-\t  return int(__d);\n+\tconst difference_type __d = __n1 - __n2;\n+\treturn __d == 0 ? 0 : (__d > 0 ? 1 : -1);\n       }\n     };\n "}]}