{"sha": "602914743550668c4cd731561d1a51dfbd86bc5b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjAyOTE0NzQzNTUwNjY4YzRjZDczMTU2MWQxYTUxZGZiZDg2YmM1Yg==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2000-12-17T13:58:53Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2000-12-17T13:58:53Z"}, "message": "c-common.c (c_common_nodes_and_builtins): Create a cstring_endlink, use it.\n\n\t* c-common.c (c_common_nodes_and_builtins): Create a\n\tcstring_endlink, use it.  Rename int_ftype_string_string to\n\tint_ftype_cstring_cstring, string_ftype_string_int to\n\tstring_ftype_cstring_int, and string_ftype_string_string to\n\tstring_ftype_cstring_cstring.  Prefer sizetype_endlink and\n\tint_endlink to manually recreating them.  Fix the prototype\n\tset for __builtin_strspn/__builtin_strcspn.\n\nFrom-SVN: r38329", "tree": {"sha": "8b163afd0f63646fb0c6b203b97237b9c0b7dcca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b163afd0f63646fb0c6b203b97237b9c0b7dcca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/602914743550668c4cd731561d1a51dfbd86bc5b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/602914743550668c4cd731561d1a51dfbd86bc5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/602914743550668c4cd731561d1a51dfbd86bc5b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/602914743550668c4cd731561d1a51dfbd86bc5b/comments", "author": null, "committer": null, "parents": [{"sha": "8e0fe03e8e060fbbe405a0be374df329c23b1068", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e0fe03e8e060fbbe405a0be374df329c23b1068", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e0fe03e8e060fbbe405a0be374df329c23b1068"}], "stats": {"total": 104, "additions": 46, "deletions": 58}, "files": [{"sha": "dd670228212c04e126d4c3c0d4bd6c9749c4ad93", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/602914743550668c4cd731561d1a51dfbd86bc5b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/602914743550668c4cd731561d1a51dfbd86bc5b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=602914743550668c4cd731561d1a51dfbd86bc5b", "patch": "@@ -1,3 +1,13 @@\n+2000-12-17  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* c-common.c (c_common_nodes_and_builtins): Create a\n+\tcstring_endlink, use it.  Rename int_ftype_string_string to\n+\tint_ftype_cstring_cstring, string_ftype_string_int to\n+\tstring_ftype_cstring_int, and string_ftype_string_string to\n+\tstring_ftype_cstring_cstring.  Prefer sizetype_endlink and\n+\tint_endlink to manually recreating them.  Fix the prototype\n+\tset for __builtin_strspn/__builtin_strcspn.\n+\n 2000-12-12  Marek Michalkiewicz  <marekm@linux.org.pl>\n \n \t* config/avr/avr.c (out_set_stack_ptr): Update comment."}, {"sha": "64e3683a5f3b3244832967ea02125d03f13388a3", "filename": "gcc/c-common.c", "status": "modified", "additions": 36, "deletions": 58, "changes": 94, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/602914743550668c4cd731561d1a51dfbd86bc5b/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/602914743550668c4cd731561d1a51dfbd86bc5b/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=602914743550668c4cd731561d1a51dfbd86bc5b", "patch": "@@ -5002,14 +5002,14 @@ c_common_nodes_and_builtins ()\n   tree memcpy_ftype, memset_ftype, strlen_ftype;\n   tree bzero_ftype, bcmp_ftype, puts_ftype, printf_ftype;\n   tree endlink, int_endlink, double_endlink, unsigned_endlink;\n-  tree sizetype_endlink;\n+  tree cstring_endlink, sizetype_endlink;\n   tree ptr_ftype, ptr_ftype_unsigned;\n   tree void_ftype_any, void_ftype_int, int_ftype_any, sizet_ftype_any;\n   tree double_ftype_double, double_ftype_double_double;\n   tree float_ftype_float, ldouble_ftype_ldouble;\n   tree int_ftype_cptr_cptr_sizet, sizet_ftype_cstring_cstring;\n-  tree int_ftype_string_string, string_ftype_string_cstring;\n-  tree string_ftype_string_int, string_ftype_string_string;\n+  tree int_ftype_cstring_cstring, string_ftype_string_cstring;\n+  tree string_ftype_cstring_int, string_ftype_cstring_cstring;\n   tree string_ftype_string_cstring_sizet, int_ftype_cstring_cstring_sizet;\n   tree long_ftype_long;\n   tree longlong_ftype_longlong;\n@@ -5064,6 +5064,7 @@ c_common_nodes_and_builtins ()\n   int_endlink = tree_cons (NULL_TREE, integer_type_node, endlink);\n   double_endlink = tree_cons (NULL_TREE, double_type_node, endlink);\n   unsigned_endlink = tree_cons (NULL_TREE, unsigned_type_node, endlink);\n+  cstring_endlink = tree_cons (NULL_TREE, const_string_type_node, endlink);\n \n   ptr_ftype = build_function_type (ptr_type_node, NULL_TREE);\n   ptr_ftype_unsigned = build_function_type (ptr_type_node, unsigned_endlink);\n@@ -5118,10 +5119,9 @@ c_common_nodes_and_builtins ()\n   int_ftype_cptr_cptr_sizet\n     = build_function_type (integer_type_node,\n \t\t\t   tree_cons (NULL_TREE, const_ptr_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE, const_ptr_type_node,\n-\t\t\t\t\t\t tree_cons (NULL_TREE,\n-\t\t\t\t\t\t\t    sizetype,\n-\t\t\t\t\t\t\t    endlink))));\n+\t\t\t\t      tree_cons (NULL_TREE,\n+\t\t\t\t\t\t const_ptr_type_node,\n+\t\t\t\t\t\t sizetype_endlink)));\n \n   void_zero_node = build_int_2 (0, 0);\n   TREE_TYPE (void_zero_node) = void_type_node;\n@@ -5130,9 +5130,7 @@ c_common_nodes_and_builtins ()\n   string_ftype_string_cstring\n     = build_function_type (string_type_node,\n \t\t\t   tree_cons (NULL_TREE, string_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE,\n-\t\t\t\t\t\t const_string_type_node,\n-\t\t\t\t\t\t endlink)));\n+\t\t\t\t      cstring_endlink));\n \n   /* Prototype for strncpy/strncat.  */\n   string_ftype_string_cstring_sizet\n@@ -5149,20 +5147,16 @@ c_common_nodes_and_builtins ()\n \t\t\t\t       endlink);\n \n   /* Prototype for strcmp.  */\n-  int_ftype_string_string\n+  int_ftype_cstring_cstring\n     = build_function_type (integer_type_node,\n \t\t\t   tree_cons (NULL_TREE, const_string_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE,\n-\t\t\t\t\t\t const_string_type_node,\n-\t\t\t\t\t\t endlink)));\n+\t\t\t\t      cstring_endlink));\n \n   /* Prototype for strspn/strcspn.  */\n   sizet_ftype_cstring_cstring\n     = build_function_type (c_size_type_node,\n \t\t\t   tree_cons (NULL_TREE, const_string_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE,\n-\t\t\t\t\t\t const_string_type_node,\n-\t\t\t\t\t\t endlink)));\n+\t\t\t\t      cstring_endlink));\n \n   /* Prototype for strncmp.  */\n   int_ftype_cstring_cstring_sizet\n@@ -5173,26 +5167,20 @@ c_common_nodes_and_builtins ()\n \t\t\t\t\t\t sizetype_endlink)));\n \n   /* Prototype for strstr, strpbrk, etc.  */\n-  string_ftype_string_string\n+  string_ftype_cstring_cstring\n     = build_function_type (string_type_node,\n \t\t\t   tree_cons (NULL_TREE, const_string_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE,\n-\t\t\t\t\t\t const_string_type_node,\n-\t\t\t\t\t\t endlink)));\n+\t\t\t\t      cstring_endlink));\n \n   /* Prototype for strchr.  */\n-  string_ftype_string_int\n+  string_ftype_cstring_int\n     = build_function_type (string_type_node,\n \t\t\t   tree_cons (NULL_TREE, const_string_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE,\n-\t\t\t\t\t\t integer_type_node,\n-\t\t\t\t\t\t endlink)));\n+\t\t\t\t      int_endlink));\n \n   /* Prototype for strlen.  */\n   strlen_ftype\n-    = build_function_type (traditional_len_type_node,\n-\t\t\t   tree_cons (NULL_TREE, const_string_type_node,\n-\t\t\t\t      endlink));\n+    = build_function_type (traditional_len_type_node, cstring_endlink);\n \n   traditional_ptr_type_node = ((flag_traditional && \n \t\t\t\tc_language != clk_cplusplus)\n@@ -5213,9 +5201,7 @@ c_common_nodes_and_builtins ()\n     = build_function_type (traditional_ptr_type_node,\n \t\t\t   tree_cons (NULL_TREE, ptr_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, integer_type_node,\n-\t\t\t\t\t\t tree_cons (NULL_TREE,\n-\t\t\t\t\t\t\t    sizetype,\n-\t\t\t\t\t\t\t    endlink))));\n+\t\t\t\t\t\t sizetype_endlink)));\n \n   /* Prototype for bzero.  */\n   bzero_ftype\n@@ -5233,9 +5219,7 @@ c_common_nodes_and_builtins ()\n \n   /* Prototype for puts.  */\n   puts_ftype\n-    = build_function_type (integer_type_node,\n-\t\t\t   tree_cons (NULL_TREE, const_string_type_node,\n-\t\t\t\t      endlink));\n+    = build_function_type (integer_type_node, cstring_endlink);\n \n   /* Prototype for printf.  */\n   printf_ftype\n@@ -5277,10 +5261,10 @@ c_common_nodes_and_builtins ()\n       /* Suppress error if redefined as a non-function.  */\n       DECL_BUILT_IN_NONANSI (temp) = 1;\n \n-      temp = builtin_function (\"index\", string_ftype_string_int,\n+      temp = builtin_function (\"index\", string_ftype_cstring_int,\n \t\t\t       BUILT_IN_INDEX, BUILT_IN_NORMAL, NULL_PTR);\n       DECL_BUILT_IN_NONANSI (temp) = 1;\n-      temp = builtin_function (\"rindex\", string_ftype_string_int,\n+      temp = builtin_function (\"rindex\", string_ftype_cstring_int,\n \t\t\t       BUILT_IN_RINDEX, BUILT_IN_NORMAL, NULL_PTR);\n       DECL_BUILT_IN_NONANSI (temp) = 1;\n       /* The system prototypes for these functions have many\n@@ -5324,9 +5308,7 @@ c_common_nodes_and_builtins ()\n   builtin_function (\"__builtin_longjmp\",\n \t\t    build_function_type (void_type_node,\n \t\t\t\t\t tree_cons (NULL_TREE, ptr_type_node,\n-\t\t\t\t\t\t    tree_cons (NULL_TREE,\n-\t\t\t\t\t\t\t       integer_type_node,\n-\t\t\t\t\t\t\t       endlink))),\n+\t\t\t\t\t\t    int_endlink)),\n \t\t    BUILT_IN_LONGJMP, BUILT_IN_NORMAL, NULL_PTR);\n   builtin_function (\"__builtin_trap\", void_ftype, BUILT_IN_TRAP,\n \t\t    BUILT_IN_NORMAL, NULL_PTR);\n@@ -5352,11 +5334,7 @@ c_common_nodes_and_builtins ()\n   temp = tree_cons (NULL_TREE,\n \t\t    build_pointer_type (build_function_type (void_type_node,\n \t\t\t\t\t\t\t     NULL_TREE)),\n-\t\t    tree_cons (NULL_TREE,\n-\t\t\t       ptr_type_node,\n-\t\t\t       tree_cons (NULL_TREE,\n-\t\t\t\t\t  sizetype,\n-\t\t\t\t\t  endlink)));\n+\t\t    tree_cons (NULL_TREE, ptr_type_node, sizetype_endlink));\n   builtin_function (\"__builtin_apply\",\n \t\t    build_function_type (ptr_type_node, temp),\n \t\t    BUILT_IN_APPLY, BUILT_IN_NORMAL, NULL_PTR);\n@@ -5415,23 +5393,23 @@ c_common_nodes_and_builtins ()\n \t\t    BUILT_IN_BZERO, BUILT_IN_NORMAL, \"bzero\");\n   builtin_function (\"__builtin_bcmp\", bcmp_ftype,\n \t\t    BUILT_IN_BCMP, BUILT_IN_NORMAL, \"bcmp\");\n-  builtin_function (\"__builtin_index\", string_ftype_string_int,\n+  builtin_function (\"__builtin_index\", string_ftype_cstring_int,\n \t\t    BUILT_IN_INDEX, BUILT_IN_NORMAL, \"index\");\n-  builtin_function (\"__builtin_rindex\", string_ftype_string_int,\n+  builtin_function (\"__builtin_rindex\", string_ftype_cstring_int,\n \t\t    BUILT_IN_RINDEX, BUILT_IN_NORMAL, \"rindex\");\n   built_in_decls[BUILT_IN_STRCMP] =\n-    builtin_function (\"__builtin_strcmp\", int_ftype_string_string,\n+    builtin_function (\"__builtin_strcmp\", int_ftype_cstring_cstring,\n \t\t      BUILT_IN_STRCMP, BUILT_IN_NORMAL, \"strcmp\");\n   builtin_function (\"__builtin_strncmp\", int_ftype_cstring_cstring_sizet,\n \t\t    BUILT_IN_STRNCMP, BUILT_IN_NORMAL, \"strncmp\");\n-  builtin_function (\"__builtin_strstr\", string_ftype_string_string,\n+  builtin_function (\"__builtin_strstr\", string_ftype_cstring_cstring,\n \t\t    BUILT_IN_STRSTR, BUILT_IN_NORMAL, \"strstr\");\n-  builtin_function (\"__builtin_strpbrk\", string_ftype_string_string,\n+  builtin_function (\"__builtin_strpbrk\", string_ftype_cstring_cstring,\n \t\t    BUILT_IN_STRPBRK, BUILT_IN_NORMAL, \"strpbrk\");\n   built_in_decls[BUILT_IN_STRCHR] =\n-    builtin_function (\"__builtin_strchr\", string_ftype_string_int,\n+    builtin_function (\"__builtin_strchr\", string_ftype_cstring_int,\n \t\t    BUILT_IN_STRCHR, BUILT_IN_NORMAL, \"strchr\");\n-  builtin_function (\"__builtin_strrchr\", string_ftype_string_int,\n+  builtin_function (\"__builtin_strrchr\", string_ftype_cstring_int,\n \t\t    BUILT_IN_STRRCHR, BUILT_IN_NORMAL, \"strrchr\");\n   builtin_function (\"__builtin_strcpy\", string_ftype_string_cstring,\n \t\t    BUILT_IN_STRCPY, BUILT_IN_NORMAL, \"strcpy\");\n@@ -5442,9 +5420,9 @@ c_common_nodes_and_builtins ()\n \t\t      BUILT_IN_STRCAT, BUILT_IN_NORMAL, \"strcat\");\n   builtin_function (\"__builtin_strncat\", string_ftype_string_cstring_sizet,\n \t\t    BUILT_IN_STRNCAT, BUILT_IN_NORMAL, \"strncat\");\n-  builtin_function (\"__builtin_strspn\", string_ftype_string_cstring,\n+  builtin_function (\"__builtin_strspn\", string_ftype_cstring_cstring,\n \t\t    BUILT_IN_STRSPN, BUILT_IN_NORMAL, \"strspn\");\n-  builtin_function (\"__builtin_strcspn\", string_ftype_string_cstring_sizet,\n+  builtin_function (\"__builtin_strcspn\", string_ftype_cstring_cstring,\n \t\t    BUILT_IN_STRCSPN, BUILT_IN_NORMAL, \"strcspn\");\n   built_in_decls[BUILT_IN_STRLEN] =\n     builtin_function (\"__builtin_strlen\", strlen_ftype,\n@@ -5515,17 +5493,17 @@ c_common_nodes_and_builtins ()\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);\n       builtin_function (\"memset\", memset_ftype, BUILT_IN_MEMSET,\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);\n-      builtin_function (\"strcmp\", int_ftype_string_string, BUILT_IN_STRCMP,\n+      builtin_function (\"strcmp\", int_ftype_cstring_cstring, BUILT_IN_STRCMP,\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);\n       builtin_function (\"strncmp\", int_ftype_cstring_cstring_sizet,\n \t\t\tBUILT_IN_STRNCMP, BUILT_IN_NORMAL, NULL_PTR);\n-      builtin_function (\"strstr\", string_ftype_string_string, BUILT_IN_STRSTR,\n+      builtin_function (\"strstr\", string_ftype_cstring_cstring, BUILT_IN_STRSTR,\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);\n-      builtin_function (\"strchr\", string_ftype_string_int, BUILT_IN_STRCHR,\n+      builtin_function (\"strchr\", string_ftype_cstring_int, BUILT_IN_STRCHR,\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);\n-      builtin_function (\"strrchr\", string_ftype_string_int, BUILT_IN_STRRCHR,\n+      builtin_function (\"strrchr\", string_ftype_cstring_int, BUILT_IN_STRRCHR,\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);\n-      builtin_function (\"strpbrk\", string_ftype_string_string, BUILT_IN_STRPBRK,\n+      builtin_function (\"strpbrk\", string_ftype_cstring_cstring, BUILT_IN_STRPBRK,\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);\n       builtin_function (\"strcpy\", string_ftype_string_cstring, BUILT_IN_STRCPY,\n \t\t\tBUILT_IN_NORMAL, NULL_PTR);"}]}