{"sha": "463af61db6f1632c127219e81b801a5c199cd5f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYzYWY2MWRiNmYxNjMyYzEyNzIxOWU4MWI4MDFhNWMxOTljZDVmOQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2006-02-15T09:36:13Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-02-15T09:36:13Z"}, "message": "s-stchop.adb (Stack_Check): Raise Storage_Error if the argument has wrapped around.\n\n2006-02-13  Eric Botcazou  <ebotcazou@adacore.com>\n\n\t* s-stchop.adb (Stack_Check): Raise Storage_Error if the argument has\n\twrapped around.\n\nFrom-SVN: r111050", "tree": {"sha": "3cf1687d589bcb03acddb840f5c022aa2b6bfa79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3cf1687d589bcb03acddb840f5c022aa2b6bfa79"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/463af61db6f1632c127219e81b801a5c199cd5f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/463af61db6f1632c127219e81b801a5c199cd5f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/463af61db6f1632c127219e81b801a5c199cd5f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/463af61db6f1632c127219e81b801a5c199cd5f9/comments", "author": null, "committer": null, "parents": [{"sha": "3a0462b3e6dd2c22843f7715dd49d2ce28883835", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a0462b3e6dd2c22843f7715dd49d2ce28883835", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a0462b3e6dd2c22843f7715dd49d2ce28883835"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "f1478f357c86d21ca75b152a1e30360bf896f71e", "filename": "gcc/ada/s-stchop.adb", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463af61db6f1632c127219e81b801a5c199cd5f9/gcc%2Fada%2Fs-stchop.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463af61db6f1632c127219e81b801a5c199cd5f9/gcc%2Fada%2Fs-stchop.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-stchop.adb?ref=463af61db6f1632c127219e81b801a5c199cd5f9", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  B o d y                                 --\n --                                                                          --\n---          Copyright (C) 1999-2005 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1999-2006 Free Software Foundation, Inc.          --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -179,6 +179,20 @@ package body System.Stack_Checking.Operations is\n       Frame_Address : constant System.Address := Marker'Address;\n \n    begin\n+      --  The parameter may have wrapped around in System.Address arithmetics.\n+      --  In that case, we have no other choices than raising the exception.\n+\n+      if (Stack_Grows_Down and then\n+            Stack_Address > Frame_Address)\n+        or else\n+         (not Stack_Grows_Down and then\n+            Stack_Address < Frame_Address)\n+      then\n+         Ada.Exceptions.Raise_Exception\n+           (E       => Storage_Error'Identity,\n+            Message => \"stack overflow detected\");\n+      end if;\n+\n       --  This function first does a \"cheap\" check which is correct\n       --  if it succeeds. In case of failure, the full check is done.\n       --  Ideally the cheap check should be done in an optimized manner,"}]}