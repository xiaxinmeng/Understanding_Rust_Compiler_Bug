{"sha": "aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWE5N2JiNmYxMjI5Y2Y2OWFhMTdhZDc2NjBjM2JjNjNjMzlhYjIyYg==", "commit": {"author": {"name": "Adam Butcher", "email": "adam@jessamine.co.uk", "date": "2015-06-24T15:11:06Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-06-24T15:11:06Z"}, "message": "re PR c++/65750 (misinterpret in a virtual member function with a C++11 style function signature)\n\n/cp\n2015-06-24  Adam Butcher  <adam@jessamine.co.uk>\n\n\tPR c++/65750\n\t* parser.c (cp_parser_simple_type_specifier): Don't synthesize\n\timplicit template parm if 'auto' is a placeholder for trailing\n\treturn type.\n\n/testsuite\n2015-06-24  Adam Butcher  <adam@jessamine.co.uk>\n\n\tPR c++/65750\n\t* g++.dg/cpp0x/trailing11.C: New.\n\nFrom-SVN: r224901", "tree": {"sha": "91cdf8752a8c083aa801cf0f11735cf56a34b7a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91cdf8752a8c083aa801cf0f11735cf56a34b7a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/comments", "author": {"login": "abutcher-gh", "id": 10379705, "node_id": "MDQ6VXNlcjEwMzc5NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/10379705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abutcher-gh", "html_url": "https://github.com/abutcher-gh", "followers_url": "https://api.github.com/users/abutcher-gh/followers", "following_url": "https://api.github.com/users/abutcher-gh/following{/other_user}", "gists_url": "https://api.github.com/users/abutcher-gh/gists{/gist_id}", "starred_url": "https://api.github.com/users/abutcher-gh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abutcher-gh/subscriptions", "organizations_url": "https://api.github.com/users/abutcher-gh/orgs", "repos_url": "https://api.github.com/users/abutcher-gh/repos", "events_url": "https://api.github.com/users/abutcher-gh/events{/privacy}", "received_events_url": "https://api.github.com/users/abutcher-gh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e00cdb8a6546552f699a86f8bda85e56242ddf79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e00cdb8a6546552f699a86f8bda85e56242ddf79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e00cdb8a6546552f699a86f8bda85e56242ddf79"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "c9c3977a4ee52092b41d196673b106996a7569f7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "patch": "@@ -1,3 +1,10 @@\n+2015-06-24  Adam Butcher  <adam@jessamine.co.uk>\n+\n+\tPR c++/65750\n+\t* parser.c (cp_parser_simple_type_specifier): Don't synthesize\n+\timplicit template parm if 'auto' is a placeholder for trailing\n+\treturn type.\n+\n 2015-06-24  Patrick Palka  <ppalka@gcc.gnu.org>\n \n \tRevert:"}, {"sha": "5150abeec23db494c177c45488bc0612e82dfd90", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "patch": "@@ -14939,6 +14939,30 @@ cp_parser_simple_type_specifier (cp_parser* parser,\n       maybe_warn_cpp0x (CPP0X_AUTO);\n       if (parser->auto_is_implicit_function_template_parm_p)\n \t{\n+\t  /* The 'auto' might be the placeholder return type for a function decl\n+\t     with trailing return type.  */\n+\t  bool have_trailing_return_fn_decl = false;\n+\t  if (cp_lexer_peek_nth_token (parser->lexer, 2)->type\n+\t      == CPP_OPEN_PAREN)\n+\t    {\n+\t      cp_parser_parse_tentatively (parser);\n+\t      cp_lexer_consume_token (parser->lexer);\n+\t      cp_lexer_consume_token (parser->lexer);\n+\t      if (cp_parser_skip_to_closing_parenthesis (parser,\n+\t\t\t\t\t\t\t /*recovering*/false,\n+\t\t\t\t\t\t\t /*or_comma*/false,\n+\t\t\t\t\t\t\t /*consume_paren*/true))\n+\t\thave_trailing_return_fn_decl\n+\t\t  = cp_lexer_next_token_is (parser->lexer, CPP_DEREF);\n+\t      cp_parser_abort_tentative_parse (parser);\n+\t    }\n+\n+\t  if (have_trailing_return_fn_decl)\n+\t    {\n+\t      type = make_auto ();\n+\t      break;\n+\t    }\n+\n \t  if (cxx_dialect >= cxx14)\n \t    type = synthesize_implicit_template_parm (parser);\n \t  else"}, {"sha": "af6d43aa445aede142254c909ce34d6102215758", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "patch": "@@ -1,3 +1,8 @@\n+2015-06-24  Adam Butcher  <adam@jessamine.co.uk>\n+\n+\tPR c++/65750\n+\t* g++.dg/cpp0x/trailing11.C: New.\n+\n 2015-06-24  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n \n \t* gcc.target/arm/fixed_float_conversion.c: Skip for inappropriate"}, {"sha": "0c9e9081fbf85f705ad1398092c39a59939a7e02", "filename": "gcc/testsuite/g++.dg/cpp0x/trailing11.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Ftrailing11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Ftrailing11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Ftrailing11.C?ref=aa97bb6f1229cf69aa17ad7660c3bc63c39ab22b", "patch": "@@ -0,0 +1,12 @@\n+// PR c++/65750\n+// { dg-do compile { target c++11 } }\n+\n+template<typename T> struct F { };\n+\n+class a\n+{\n+  virtual auto f( F< void () > ) -> void;\n+  virtual auto g( F< auto () -> void > ) -> void;\n+};\n+\n+auto main() -> int { }"}]}