{"sha": "671f9f5c0f04d859265f1f2da117baf5a75511ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjcxZjlmNWMwZjA0ZDg1OTI2NWYxZjJkYTExN2JhZjVhNzU1MTFhYw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2021-04-06T12:04:28Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2021-04-06T12:07:17Z"}, "message": "c++: Simplify va_arg test\n\nThe va_arg scans are just too brittle.  Let's not be that picky.  We\nhave other tested builtins that are less brittle now anyway.\n\n\tgcc/testsuite/\n\t* g++.dg/modules/builtin-3_a.C: Remove dump scans.\n\t* g++.dg/modules/builtin-3_b.C: Remove dump scans.", "tree": {"sha": "9714929ba7132c40056d5c70066953352a9a6b10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9714929ba7132c40056d5c70066953352a9a6b10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/671f9f5c0f04d859265f1f2da117baf5a75511ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/671f9f5c0f04d859265f1f2da117baf5a75511ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/671f9f5c0f04d859265f1f2da117baf5a75511ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/671f9f5c0f04d859265f1f2da117baf5a75511ac/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86532e541940321f8a5f37fa7aa98e6fdf7332c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86532e541940321f8a5f37fa7aa98e6fdf7332c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86532e541940321f8a5f37fa7aa98e6fdf7332c5"}], "stats": {"total": 30, "additions": 2, "deletions": 28}, "files": [{"sha": "66f712928a2920aa23ea73132f66f140262d1bc2", "filename": "gcc/testsuite/g++.dg/modules/builtin-3_a.C", "status": "modified", "additions": 1, "deletions": 22, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/671f9f5c0f04d859265f1f2da117baf5a75511ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/671f9f5c0f04d859265f1f2da117baf5a75511ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C?ref=671f9f5c0f04d859265f1f2da117baf5a75511ac", "patch": "@@ -1,4 +1,4 @@\n-// { dg-additional-options \"-fmodules-ts -fdump-lang-module-blocks-alias-uid\" }\n+// { dg-additional-options -fmodules-ts }\n module;\n #include <stdarg.h>\n export module builtins;\n@@ -21,24 +21,3 @@ export inline int count (int a, ...)\n \n   return c;\n }\n-\n-// { dg-final { scan-lang-dump-not {Cluster members:\\n  \\[0\\]=decl declaration '::__builtin_strlen'\\n  \\[1\\]=binding '::__builtin_strlen'\\n} module } }\n-// { dg-final { scan-lang-dump {Wrote GMF:-[0-9]* function_decl:'::__builtin_strlen'@builtins} module } }\n-// { dg-final { scan-lang-dump {Writing:-[0-9]*'s named merge key \\(decl\\) function_decl:'::__builtin_strlen'} module } }\n-// { dg-final { scan-lang-dump-not {Writing tree:-[0-9]* function_decl:'__builtin_strlen'\\(strlen\\)} module } }\n-\n-// The implementation details of va_list's are target-specific.\n-// Usually one of two patterns though\n-// { dg-final { scan-lang-dump-not { Cluster members:\\n  \\[0\\]=decl declaration '::__builtin_va_list'\\n  \\[1\\]=binding '::__builtin_va_list'\\n} module { target i?86-*-linux* x86_64-*-linux* } } }\n-// { dg-final { scan-lang-dump {Wrote GMF:-[0-9]* type_decl:'::__builtin_va_list'@builtins} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } } }\n-// { dg-final { scan-lang-dump {Writing:-[0-9]*'s named merge key \\(decl\\) type_decl:'::__builtin_va_list'} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } } }\n-\n-// { dg-final { scan-lang-dump {Writing:-1's named merge key \\(decl\\) type_decl:'::__gnuc_va_list'} module { target i?86-*-linux* *-*-darwin* } } }\n-// { dg-final { scan-lang-dump {Wrote GMF:-3 type_decl:'::__gnuc_va_list'@builtins} module { target i?86-*-linux* *-*-darwin* } } }\n-\n-// { dg-final { scan-lang-dump {Wrote fixed:[0-9]* record_type:'__va_list'} module { target aarch64*-*-linux* } } }\n-// { dg-final { scan-lang-dump {Wrote fixed:[0-9]* pointer_type:'::__builtin_va_list'} module { target powerpc*-*-linux* } } }\n-\n-// { dg-final { scan-lang-dump-not { Cluster members:\\n  \\[0\\]=decl declaration '::va_list'\\n  \\[1\\]=binding '::va_list'\\n} module } }\n-// { dg-final { scan-lang-dump {Wrote GMF:-[0-9]* type_decl:'::va_list'@builtins} module } }\n-// { dg-final { scan-lang-dump {Writing:-[0-9]*'s named merge key \\(decl\\) type_decl:'::va_list'} module } }"}, {"sha": "7ba933d9aab14ccc194b4e73f8934649b6615c9e", "filename": "gcc/testsuite/g++.dg/modules/builtin-3_b.C", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/671f9f5c0f04d859265f1f2da117baf5a75511ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/671f9f5c0f04d859265f1f2da117baf5a75511ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C?ref=671f9f5c0f04d859265f1f2da117baf5a75511ac", "patch": "@@ -1,13 +1,8 @@\n-// { dg-additional-options \"-fmodules-ts -fdump-lang-module-alias\" }\n+// { dg-additional-options -fmodules-ts }\n import builtins;\n \n int main ()\n {\n   length (\"\");\n   count (1, \"\", \"\", nullptr);\n }\n-\n-// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) function_decl:'::__builtin_strlen'} module } }\n-// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) type_decl:'::__builtin_va_list'} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } } }\n-// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(new\\) type_decl:'::va_list'} module } }\n-// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(new\\) type_decl:'::__gnuc_va_list'} module } }"}]}