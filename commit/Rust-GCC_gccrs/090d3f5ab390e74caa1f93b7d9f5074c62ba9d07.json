{"sha": "090d3f5ab390e74caa1f93b7d9f5074c62ba9d07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDkwZDNmNWFiMzkwZTc0Y2FhMWY5M2I3ZDlmNTA3NGM2MmJhOWQwNw==", "commit": {"author": {"name": "Maciej W. Rozycki", "email": "macro@wdc.com", "date": "2020-09-29T00:20:01Z"}, "committer": {"name": "Maciej W. Rozycki", "email": "macro@linux-mips.org", "date": "2020-09-29T00:20:01Z"}, "message": "RISC-V/libgcc: Use `-fasynchronous-unwind-tables' for LIB2_DIVMOD_FUNCS\n\nUse `-fasynchronous-unwind-tables' rather than `-fexceptions\n-fnon-call-exceptions' in LIB2_DIVMOD_FUNCS compilation flags so as to\nprovide unwind tables for the affected functions while not pulling the\nunwinder proper, which is not required here.\n\nBeyond saving program space it fixes a RISC-V glibc build error due to\nunsatisfied `malloc' and `free' references from the unwinder causing\nlink errors with `ld.so' where libgcc has been built at -O0.\n\n\tlibgcc/\n\t* config/riscv/t-elf (LIB2_DIVMOD_EXCEPTION_FLAGS): New\n\tvariable.", "tree": {"sha": "83e9f5f5ab2dd8e56d1b56e88ff0a43517815a06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83e9f5f5ab2dd8e56d1b56e88ff0a43517815a06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/090d3f5ab390e74caa1f93b7d9f5074c62ba9d07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/090d3f5ab390e74caa1f93b7d9f5074c62ba9d07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/090d3f5ab390e74caa1f93b7d9f5074c62ba9d07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/090d3f5ab390e74caa1f93b7d9f5074c62ba9d07/comments", "author": null, "committer": null, "parents": [{"sha": "e84761c6f32fa6e9b7dccc4245231a7ff4d7da61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e84761c6f32fa6e9b7dccc4245231a7ff4d7da61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e84761c6f32fa6e9b7dccc4245231a7ff4d7da61"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "415e1fffbe710ab678f17ebadba3b15966adcf8e", "filename": "libgcc/config/riscv/t-elf", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/090d3f5ab390e74caa1f93b7d9f5074c62ba9d07/libgcc%2Fconfig%2Friscv%2Ft-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/090d3f5ab390e74caa1f93b7d9f5074c62ba9d07/libgcc%2Fconfig%2Friscv%2Ft-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Friscv%2Ft-elf?ref=090d3f5ab390e74caa1f93b7d9f5074c62ba9d07", "patch": "@@ -4,3 +4,5 @@ LIB2ADD += $(srcdir)/config/riscv/save-restore.S \\\n \t   $(srcdir)/config/riscv/div.S \\\n \t   $(srcdir)/config/riscv/atomic.c \\\n \n+# Avoid the full unwinder being pulled along with the division libcalls.\n+LIB2_DIVMOD_EXCEPTION_FLAGS := -fasynchronous-unwind-tables"}]}