{"sha": "af179b36fa2e08abbfd1459cbef8486999610dfb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWYxNzliMzZmYTJlMDhhYmJmZDE0NTljYmVmODQ4Njk5OTYxMGRmYg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-06-22T23:14:37Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-06-22T23:14:37Z"}, "message": "(if DO_LINK): Skip c-parse.* processing when only relinking.\n\n(gas_message): Update to reflect current version, and give\na different message if/when no version of gas is found.\n\nFrom-SVN: r10032", "tree": {"sha": "24572debdf772a8049af49df3f37ab50ac9b3958", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24572debdf772a8049af49df3f37ab50ac9b3958"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af179b36fa2e08abbfd1459cbef8486999610dfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af179b36fa2e08abbfd1459cbef8486999610dfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af179b36fa2e08abbfd1459cbef8486999610dfb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af179b36fa2e08abbfd1459cbef8486999610dfb/comments", "author": null, "committer": null, "parents": [{"sha": "eedea0f24da5ac5637160f385479252c08761a54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eedea0f24da5ac5637160f385479252c08761a54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eedea0f24da5ac5637160f385479252c08761a54"}], "stats": {"total": 44, "additions": 31, "deletions": 13}, "files": [{"sha": "b98d02efbf16b22c4913c70970b7a8f571b49eae", "filename": "gcc/make-cc1.com", "status": "modified", "additions": 31, "deletions": 13, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af179b36fa2e08abbfd1459cbef8486999610dfb/gcc%2Fmake-cc1.com", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af179b36fa2e08abbfd1459cbef8486999610dfb/gcc%2Fmake-cc1.com", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmake-cc1.com?ref=af179b36fa2e08abbfd1459cbef8486999610dfb", "patch": "@@ -153,33 +153,51 @@ $!\n $! Test and see if we need these messages or not.  The -1 switch gives it away.\n $!\n $gas := $gnu_cc:[000000]gcc-as.exe\n-$if f$search(gas-\"$\").eqs.\"\" then  goto gas_message\t!must be VAXC\n+$if f$search(gas-\"$\").eqs.\"\" then  goto gas_missing_message\t!must be VAXC\n $define/user sys$error sys$scratch:gas_test.tmp\n $gas -1 nla0: -o nla0:\n $size=f$file_attributes(\"sys$scratch:gas_test.tmp\",\"ALQ\")\n $delete/nolog sys$scratch:gas_test.tmp;*\n-$if size.eq.0 then goto no_message\n-$gas_message:\n-$type sys$input\n+$if size.eq.0 then goto skip_gas_message\n+$type sys$input:\t!an old version of gas was found\n \n-\tNote: GCC 2.x treats external variables differently than GCC 1.x does.\n-Before you use GCC 2.x, you should obtain a version of the assembler which\n-contains the patches to work with GCC 2.x (GCC-AS 1.38 does not contain\n-these patches - whatever comes after this probably will).  The assembler\n-in gcc-vms-1.42.tar.gz from prep does contain the proper patches.\n+-----\n+     Note:  you appear to have an old version of gas, the GNU assembler.\n+GCC 2.x treats external variables differently than GCC 1.x does.  Before\n+you use GCC 2.x, you should obtain a version of the assembler which works\n+with GCC 2.x (gas-1.38 and earlier did not have the necessary support;\n+gas-2.0 through gas-2.3 did not work reliably for vax/vms configuration).\n+The assembler in gcc-vms-1.42 contained patches to provide the proper\n+support, and more recent versions have an up to date version of gas which\n+provides the support.  gas from binutils-2.5 or later is recommended.\n \n-\tIf you do not update the assembler, the compiler will still work,\n+     If you do not update the assembler, the compiler will still work,\n but `extern const' variables will be treated as `extern'.  This will result\n in linker warning messages about mismatched psect attributes, and these\n variables will be placed in read/write storage.\n+-----\n \n-$!\n-$no_message:\n+$goto skip_gas_message\n+$gas_missing_message:\n+$type sys$input:\t!no version of gas was found\n+\n+-----\n+     Note:  you appear to be missing gas, the GNU assembler.  Since\n+GCC produces assembly code as output from compilation, you need the\n+assembler to make full use of the compiler.  It should be put in place\n+as GNU_CC:[000000]GCC-AS.EXE.\n+\n+     A prebuilt copy of gas is available from the \"gcc-vms\" distribution,\n+and the gas source code is included in the GNU \"binutils\" distribution.\n+Version 2.5.2 or later is recommended.\n+-----\n+\n+$skip_gas_message:\n $!\n $!\n $ if DO_DEBUG.eq.1 then LDFLAGS = LDFLAGS + \"/Debug\"\n $!\n-$if DO_LINK.eq.1 then goto compile_cc1\n+$if DO_LINK.eq.1 then goto no_yfiles\t!compile_cc1\n $!\n $! Build alloca if necessary (in 'LIBS for use with VAXC)\n $!"}]}