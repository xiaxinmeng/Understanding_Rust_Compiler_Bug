{"sha": "73f3aa96d2782855508a6cc397871e9363c7c387", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNmM2FhOTZkMjc4Mjg1NTUwOGE2Y2MzOTc4NzFlOTM2M2M3YzM4Nw==", "commit": {"author": {"name": "Robert Lipe", "email": "robertlipe@usa.net", "date": "1999-06-01T23:27:14Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-06-01T23:27:14Z"}, "message": "bastring.h (class basic_string:Rep): Encode xlock opcode as .bytes instead of mnemonics.\n\nWed Jun  2 00:21:54 1999  Robert Lipe  <robertlipe@usa.net>\n        * std/bastring.h (class basic_string:Rep): Encode xlock opcode\n        as .bytes instead of mnemonics.\n\nFrom-SVN: r27295", "tree": {"sha": "58e12397b2d3309d22f0c555ef5b6aac20d80998", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58e12397b2d3309d22f0c555ef5b6aac20d80998"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73f3aa96d2782855508a6cc397871e9363c7c387", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73f3aa96d2782855508a6cc397871e9363c7c387", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73f3aa96d2782855508a6cc397871e9363c7c387", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73f3aa96d2782855508a6cc397871e9363c7c387/comments", "author": null, "committer": null, "parents": [{"sha": "a310f94892755e13eacfce42277db343e000e049", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a310f94892755e13eacfce42277db343e000e049", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a310f94892755e13eacfce42277db343e000e049"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "b3d8a3224721a6a037cd733089498f5d16714444", "filename": "libstdc++/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f3aa96d2782855508a6cc397871e9363c7c387/libstdc%2B%2B%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f3aa96d2782855508a6cc397871e9363c7c387/libstdc%2B%2B%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FChangeLog?ref=73f3aa96d2782855508a6cc397871e9363c7c387", "patch": "@@ -1,3 +1,8 @@\n+Wed Jun  2 00:21:54 1999  Robert Lipe  <robertlipe@usa.net>\n+\n+\t* std/bastring.h (class basic_string:Rep): Encode xlock opcode\n+\tas .bytes instead of mnemonics.\n+\n 1999-05-20  Angela Marie Thomas <angela@cygnus.com>\n \n \t* configure.in: Test for ${compiler_name}.exe as well."}, {"sha": "70891262e9650192dc4322954bfbac80a73ee1ed", "filename": "libstdc++/std/bastring.h", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f3aa96d2782855508a6cc397871e9363c7c387/libstdc%2B%2B%2Fstd%2Fbastring.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f3aa96d2782855508a6cc397871e9363c7c387/libstdc%2B%2B%2Fstd%2Fbastring.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2Fstd%2Fbastring.h?ref=73f3aa96d2782855508a6cc397871e9363c7c387", "patch": "@@ -77,8 +77,15 @@ class basic_string\n     void release ()\n       {\n \tsize_t __val;\n-\tasm (\"lock; xaddl %0, %2\"\n-\t     : \"=r\" (__val) : \"0\" (-1), \"m\" (ref) : \"memory\");\n+\t// This opcode exists as a .byte instead of as a mnemonic for the\n+\t// benefit of SCO OpenServer 5.  The system assembler (which is \n+\t// essentially required on this target) can't assemble xaddl in \n+\t//COFF mode.\n+\tasm (\".byte 0xf0, 0x0f, 0xc1, 0x02\" // lock; xaddl %eax, (%edx)\n+\t    : \"=a\" (__val)\n+\t    : \"0\" (-1), \"m\" (ref), \"d\" (&ref)\n+\t    : \"memory\");\n+\n \tif (__val == 1)\n \t  delete this;\n       }"}]}