{"sha": "0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDAxMWRlZGJkOWRiZmEwMWIyZjRkMzM5MGVmM2VkMmQ2ZWExZGQ2ZA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-20T16:05:58Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-20T16:05:58Z"}, "message": "re PR c++/35602 (Bogus warning with -Wsign-conversion)\n\n2008-08-20  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\tPR c++/35602\n\t* c-common.c (conversion_warning): Do not warn for artificial\n\texpressions.\ntestsuite/\n\t* g++.dg/warn/pr35602.C: New.\n\nFrom-SVN: r139328", "tree": {"sha": "4118ccc91f98aed95bebab381ba860beed6cf709", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4118ccc91f98aed95bebab381ba860beed6cf709"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/comments", "author": null, "committer": null, "parents": [{"sha": "73019a428f45b47ebae03a759afd7f3501c165db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73019a428f45b47ebae03a759afd7f3501c165db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73019a428f45b47ebae03a759afd7f3501c165db"}], "stats": {"total": 50, "additions": 50, "deletions": 0}, "files": [{"sha": "9560a7bcc545d912c57eaa074232ba117b7e7267", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "patch": "@@ -1,3 +1,9 @@\n+2008-08-20  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c++/35602\n+\t* c-common.c (conversion_warning): Do not warn for artificial\n+\texpressions.\n+\n 2008-08-20  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-vrp.c (op_with_constant_singleton_value_range): New function."}, {"sha": "92e58c9fb00d8e44f219a4d535a4c3956c47f106", "filename": "gcc/c-common.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "patch": "@@ -1556,11 +1556,22 @@ conversion_warning (tree type, tree expr)\n {\n   bool give_warning = false;\n \n+  int i;\n+  const int expr_num_operands = TREE_OPERAND_LENGTH (expr);\n   tree expr_type = TREE_TYPE (expr);\n \n   if (!warn_conversion && !warn_sign_conversion)\n     return;\n \n+  /* If any operand is artificial, then this expression was generated\n+     by the compiler and we do not warn.  */\n+  for (i = 0; i < expr_num_operands; i++)\n+    {\n+      tree op = TREE_OPERAND (expr, i);\n+      if (DECL_P (op) && DECL_ARTIFICIAL (op))\n+\treturn;\n+    }\n+\n   switch (TREE_CODE (expr))\n     {\n     case EQ_EXPR:"}, {"sha": "2c87d83e5ea6b305881156299c8e774de0c9293b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "patch": "@@ -1,3 +1,8 @@\n+2008-08-20  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c++/35602\n+\t* g++.dg/warn/pr35602.C: New.\n+\n 2008-08-20  Richard Guenther  <rguenther@suse.de>\n \n \t* gcc.dg/tree-ssa/pr21829.c: Scan optimized and cddce2 dumps"}, {"sha": "66a569b3d272c2addd22eb4c1f8827e5c9f4e07e", "filename": "gcc/testsuite/g++.dg/warn/pr35602.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr35602.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr35602.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr35602.C?ref=0011dedbd9dbfa01b2f4d3390ef3ed2d6ea1dd6d", "patch": "@@ -0,0 +1,28 @@\n+// PR 35602 Bogus warning with -Wsign-conversion\n+// { dg-do compile }\n+// { dg-options \"-Wconversion -Wsign-conversion\" }\n+struct c\n+{\n+  ~c();\n+  c();\n+};\n+\n+int\n+\n+main(const int,\n+     const char * const * const)\n+{\n+  c x[0UL][0UL] =  // { dg-bogus \"warning: conversion to .long unsigned int. from .long int. may change the sign of the result\" }\n+    {\n+    };\n+  \n+  c y[0UL] =\n+    {\n+    };\n+  \n+  int z[0ul][0UL] =\n+    {\n+    };\n+  \n+  return 0;\n+}"}]}