{"sha": "604f9a900c90b21ad33328e6a0b2fc1ba84dabd2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA0ZjlhOTAwYzkwYjIxYWQzMzMyOGU2YTBiMmZjMWJhODRkYWJkMg==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2010-10-20T18:57:15Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@gcc.gnu.org", "date": "2010-10-20T18:57:15Z"}, "message": "tree-ssa-ter.c (find_replaceable_in_bb): Allow replacement over call for single operand expression.\n\n\t* tree-ssa-ter.c (find_replaceable_in_bb): Allow replacement over\n\tcall for single operand expression.\n\nFrom-SVN: r165733", "tree": {"sha": "875cff3be3d4fa3c5539a188d7c8e2fd8dc67a67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/875cff3be3d4fa3c5539a188d7c8e2fd8dc67a67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2/comments", "author": null, "committer": null, "parents": [{"sha": "660820d19f07155947f7899978e2d3d388b5b49f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/660820d19f07155947f7899978e2d3d388b5b49f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/660820d19f07155947f7899978e2d3d388b5b49f"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "4e3c62ccd0c9a37936d70137aaedee90ccb7ba53", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=604f9a900c90b21ad33328e6a0b2fc1ba84dabd2", "patch": "@@ -1,3 +1,8 @@\n+2010-10-20  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\t* tree-ssa-ter.c (find_replaceable_in_bb): Allow replacement over\n+\tcall for single operand expression.\n+\n 2010-10-20  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* tree-optimize.c (execute_fixup_cfg): Purge dead abnormal call edges"}, {"sha": "0fb8028543e15a76005846ed3fa9390b6753563b", "filename": "gcc/tree-ssa-ter.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2/gcc%2Ftree-ssa-ter.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/604f9a900c90b21ad33328e6a0b2fc1ba84dabd2/gcc%2Ftree-ssa-ter.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-ter.c?ref=604f9a900c90b21ad33328e6a0b2fc1ba84dabd2", "patch": "@@ -644,8 +644,10 @@ find_replaceable_in_bb (temp_expr_table_p tab, basic_block bb)\n \t\t def variable has the same root variable as something in the\n \t\t substitution list, or the def and use span a call such that\n \t\t we'll expand lifetimes across a call.  */\n-\t      if (gimple_has_volatile_ops (stmt) || same_root_var ||\n-\t\t  tab->call_cnt[ver] != cur_call_cnt)\n+\t      if (gimple_has_volatile_ops (stmt) || same_root_var\n+\t\t  || (tab->call_cnt[ver] != cur_call_cnt\n+\t\t      && SINGLE_SSA_USE_OPERAND (SSA_NAME_DEF_STMT (use), SSA_OP_USE)\n+\t\t\t == NULL_USE_OPERAND_P))\n \t\tfinished_with_expr (tab, ver, true);\n \t      else\n \t\tmark_replaceable (tab, use, stmt_replaceable);"}]}