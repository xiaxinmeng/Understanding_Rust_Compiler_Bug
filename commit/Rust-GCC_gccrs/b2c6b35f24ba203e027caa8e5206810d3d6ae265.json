{"sha": "b2c6b35f24ba203e027caa8e5206810d3d6ae265", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjJjNmIzNWYyNGJhMjAzZTAyN2NhYThlNTIwNjgxMGQzZDZhZTI2NQ==", "commit": {"author": {"name": "Hristian Kirtchev", "email": "kirtchev@adacore.com", "date": "2008-07-31T10:27:04Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-07-31T10:27:04Z"}, "message": "exp_attr.adb (Find_Stream_Subprogram): Check the base type instead of the type when...\n\n2008-07-31  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* exp_attr.adb (Find_Stream_Subprogram): Check the base type instead\n\tof the type when looking for stream subprograms for type String,\n\tWide_String and Wide_Wide_String.\n\t\n\t* s-ststop.adb: Change the initialization expression of constant\n\tUse_Block_IO.\n\nFrom-SVN: r138383", "tree": {"sha": "7a1b90c5a983af5483ae958b4c0e2a7e98b51891", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a1b90c5a983af5483ae958b4c0e2a7e98b51891"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2c6b35f24ba203e027caa8e5206810d3d6ae265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2c6b35f24ba203e027caa8e5206810d3d6ae265", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2c6b35f24ba203e027caa8e5206810d3d6ae265", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2c6b35f24ba203e027caa8e5206810d3d6ae265/comments", "author": {"login": "kirtchev-adacore", "id": 60669983, "node_id": "MDQ6VXNlcjYwNjY5OTgz", "avatar_url": "https://avatars.githubusercontent.com/u/60669983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kirtchev-adacore", "html_url": "https://github.com/kirtchev-adacore", "followers_url": "https://api.github.com/users/kirtchev-adacore/followers", "following_url": "https://api.github.com/users/kirtchev-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/kirtchev-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/kirtchev-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kirtchev-adacore/subscriptions", "organizations_url": "https://api.github.com/users/kirtchev-adacore/orgs", "repos_url": "https://api.github.com/users/kirtchev-adacore/repos", "events_url": "https://api.github.com/users/kirtchev-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/kirtchev-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a66495761c21febaa3b0f4d1ac22f5e3d414244b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a66495761c21febaa3b0f4d1ac22f5e3d414244b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a66495761c21febaa3b0f4d1ac22f5e3d414244b"}], "stats": {"total": 22, "additions": 9, "deletions": 13}, "files": [{"sha": "006b8f8c53c4a3d6898dcffbe90c93afa9caa44f", "filename": "gcc/ada/exp_attr.adb", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2c6b35f24ba203e027caa8e5206810d3d6ae265/gcc%2Fada%2Fexp_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2c6b35f24ba203e027caa8e5206810d3d6ae265/gcc%2Fada%2Fexp_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_attr.adb?ref=b2c6b35f24ba203e027caa8e5206810d3d6ae265", "patch": "@@ -5314,7 +5314,8 @@ package body Exp_Attr is\n      (Typ : Entity_Id;\n       Nam : TSS_Name_Type) return Entity_Id\n    is\n-      Ent : constant Entity_Id := TSS (Typ, Nam);\n+      Base_Typ : constant Entity_Id := Base_Type (Typ);\n+      Ent      : constant Entity_Id := TSS (Typ, Nam);\n \n    begin\n       if Present (Ent) then\n@@ -5340,7 +5341,7 @@ package body Exp_Attr is\n \n          --  String as defined in package Ada\n \n-         if Typ = Standard_String then\n+         if Base_Typ = Standard_String then\n             if Nam = TSS_Stream_Input then\n                return RTE (RE_String_Input);\n \n@@ -5356,7 +5357,7 @@ package body Exp_Attr is\n \n          --  Wide_String as defined in package Ada\n \n-         elsif Typ = Standard_Wide_String then\n+         elsif Base_Typ = Standard_Wide_String then\n             if Nam = TSS_Stream_Input then\n                return RTE (RE_Wide_String_Input);\n \n@@ -5372,7 +5373,7 @@ package body Exp_Attr is\n \n          --  Wide_Wide_String as defined in package Ada\n \n-         elsif Typ = Standard_Wide_Wide_String then\n+         elsif Base_Typ = Standard_Wide_Wide_String then\n             if Nam = TSS_Stream_Input then\n                return RTE (RE_Wide_Wide_String_Input);\n "}, {"sha": "88e29f04b36b910b0f9cffab06a24370c0363386", "filename": "gcc/ada/s-ststop.adb", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2c6b35f24ba203e027caa8e5206810d3d6ae265/gcc%2Fada%2Fs-ststop.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2c6b35f24ba203e027caa8e5206810d3d6ae265/gcc%2Fada%2Fs-ststop.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-ststop.adb?ref=b2c6b35f24ba203e027caa8e5206810d3d6ae265", "patch": "@@ -92,17 +92,12 @@ package body System.Strings.Stream_Ops is\n \n       subtype String_Block is String_Type (1 .. C_In_Default_Block);\n \n-      --  Block IO is used in the following two scenarios:\n-\n-      --    1) When the size of the character type equals that of the stream\n-      --    element type, regardless of endianness.\n-\n-      --    2) When using the standard stream IO routines for elementary\n-      --    types which guarantees the same endianness over partitions.\n+      --  Block IO is used when the low level can support block IO and the size\n+      --  of the character type is a multiple of the stream element type.\n \n       Use_Block_IO : constant Boolean :=\n-                       C_Size = SE_Size\n-                         or else Stream_Attributes.Block_IO_OK;\n+                       Stream_Attributes.Block_IO_OK\n+                         and then C_Size mod SE_Size = 0;\n \n       --  Conversions to and from Default_Block\n "}]}