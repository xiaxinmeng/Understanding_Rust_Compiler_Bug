{"sha": "419587a0bb9c22c0088e6fca5449af957db2c5bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDE5NTg3YTBiYjljMjJjMDA4OGU2ZmNhNTQ0OWFmOTU3ZGIyYzViYg==", "commit": {"author": {"name": "Doug Evans", "email": "dje@google.com", "date": "2015-05-26T23:06:55Z"}, "committer": {"name": "Doug Evans", "email": "devans@gcc.gnu.org", "date": "2015-05-26T23:06:55Z"}, "message": "xmethods.py (UniquePtrMethodsMatcher): Add operator-> support.\n\n\t* python/libstdcxx/v6/xmethods.py (UniquePtrMethodsMatcher): Add\n\toperator-> support.\n\t* testsuite/libstdc++-xmethods/unique_ptr.cc: Add tests for\n\toperator->.\n\nFrom-SVN: r223723", "tree": {"sha": "56f1102ebf225578799af23855f6725d2cdffad8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56f1102ebf225578799af23855f6725d2cdffad8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/419587a0bb9c22c0088e6fca5449af957db2c5bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/419587a0bb9c22c0088e6fca5449af957db2c5bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/419587a0bb9c22c0088e6fca5449af957db2c5bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/419587a0bb9c22c0088e6fca5449af957db2c5bb/comments", "author": null, "committer": null, "parents": [{"sha": "afa5920a97b539b111a2f1593717ee7ef14f7bdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afa5920a97b539b111a2f1593717ee7ef14f7bdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afa5920a97b539b111a2f1593717ee7ef14f7bdb"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "fa3963d1998997ba4ffb7df7d40c7f19c9acc2a6", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/419587a0bb9c22c0088e6fca5449af957db2c5bb/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/419587a0bb9c22c0088e6fca5449af957db2c5bb/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=419587a0bb9c22c0088e6fca5449af957db2c5bb", "patch": "@@ -1,3 +1,10 @@\n+2015-05-26  Doug Evans  <dje@google.com>\n+\n+\t* python/libstdcxx/v6/xmethods.py (UniquePtrMethodsMatcher): Add\n+\toperator-> support.\n+\t* testsuite/libstdc++-xmethods/unique_ptr.cc: Add tests for\n+\toperator->.\n+\n 2015-05-26  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* include/bits/locale_conv.h: Fix copyright years."}, {"sha": "c85dd6747345792858c1170ae8bc8eb1a6fb35b8", "filename": "libstdc++-v3/python/libstdcxx/v6/xmethods.py", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/419587a0bb9c22c0088e6fca5449af957db2c5bb/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fxmethods.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/419587a0bb9c22c0088e6fca5449af957db2c5bb/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fxmethods.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fxmethods.py?ref=419587a0bb9c22c0088e6fca5449af957db2c5bb", "patch": "@@ -584,6 +584,7 @@ def __init__(self):\n                                             matcher_name_prefix + 'unique_ptr')\n         self._method_dict = {\n             'get': LibStdCxxXMethod('get', UniquePtrGetWorker),\n+            'operator->': LibStdCxxXMethod('operator->', UniquePtrGetWorker),\n             'operator*': LibStdCxxXMethod('operator*', UniquePtrDerefWorker),\n         }\n         self.methods = [self._method_dict[m] for m in self._method_dict]"}, {"sha": "c449f525a419bca254daa3d77a11697f81b7a4cb", "filename": "libstdc++-v3/testsuite/libstdc++-xmethods/unique_ptr.cc", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/419587a0bb9c22c0088e6fca5449af957db2c5bb/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-xmethods%2Funique_ptr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/419587a0bb9c22c0088e6fca5449af957db2c5bb/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-xmethods%2Funique_ptr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-xmethods%2Funique_ptr.cc?ref=419587a0bb9c22c0088e6fca5449af957db2c5bb", "patch": "@@ -20,19 +20,36 @@\n \n #include <memory>\n \n+struct x_struct\n+{\n+  int y;\n+};\n+\n int\n main ()\n {\n   int *i = new int;\n   *i = 10;\n-\n   std::unique_ptr<int> p(i);\n+\n+  x_struct *x = new x_struct;\n+  x->y = 23;\n+  std::unique_ptr<x_struct> q(x);\n+\n // { dg-final { note-test *p 10 } }\n // { dg-final { regexp-test p.get() 0x.* } }\n \n // { dg-final { whatis-test *p int } }\n // { dg-final { whatis-test p.get() \"int \\*\" } }\n \n+// { dg-final { note-test *q {\\{y = 23\\}} } }\n+// { dg-final { regexp-test q.get() 0x.* } }\n+// { dg-final { note-test q->y 23 } }\n+\n+// { dg-final { whatis-test *q x_struct } }\n+// { dg-final { whatis-test q.get() \"x_struct \\*\" } }\n+// { dg-final { whatis-test q->y int } }\n+\n   return 0;  // Mark SPOT\n }\n "}]}