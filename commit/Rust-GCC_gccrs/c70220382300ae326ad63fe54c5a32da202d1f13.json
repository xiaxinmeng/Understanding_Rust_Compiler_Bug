{"sha": "c70220382300ae326ad63fe54c5a32da202d1f13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzcwMjIwMzgyMzAwYWUzMjZhZDYzZmU1NGM1YTMyZGEyMDJkMWYxMw==", "commit": {"author": {"name": "Dmitriy Anisimkov", "email": "anisimko@adacore.com", "date": "2019-08-19T08:37:13Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-08-19T08:37:13Z"}, "message": "[Ada] Conversion routines between GNAT.OS_Lib.OS_Time and long integer\n\nThe new routines convert back and forth between private type OS_Time and\na long integer which can be used in package Ada.Calendar.Conversions\nroutines to convert to Ada.Calendar.Time.\n\n2019-08-19  Dmitriy Anisimkov  <anisimko@adacore.com>\n\ngcc/ada/\n\n\t* libgnat/s-os_lib.ads, libgnat/s-os_lib.adb (To_Ada, To_C): New\n\troutines.\n\nFrom-SVN: r274661", "tree": {"sha": "8fc7c89a82bfa995c8a6b135fc195d07d427af54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fc7c89a82bfa995c8a6b135fc195d07d427af54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c70220382300ae326ad63fe54c5a32da202d1f13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c70220382300ae326ad63fe54c5a32da202d1f13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c70220382300ae326ad63fe54c5a32da202d1f13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c70220382300ae326ad63fe54c5a32da202d1f13/comments", "author": {"login": "anisimkov", "id": 15864134, "node_id": "MDQ6VXNlcjE1ODY0MTM0", "avatar_url": "https://avatars.githubusercontent.com/u/15864134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anisimkov", "html_url": "https://github.com/anisimkov", "followers_url": "https://api.github.com/users/anisimkov/followers", "following_url": "https://api.github.com/users/anisimkov/following{/other_user}", "gists_url": "https://api.github.com/users/anisimkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/anisimkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anisimkov/subscriptions", "organizations_url": "https://api.github.com/users/anisimkov/orgs", "repos_url": "https://api.github.com/users/anisimkov/repos", "events_url": "https://api.github.com/users/anisimkov/events{/privacy}", "received_events_url": "https://api.github.com/users/anisimkov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "382b0e9771d77d482f6765454ec884936b62b15b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/382b0e9771d77d482f6765454ec884936b62b15b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/382b0e9771d77d482f6765454ec884936b62b15b"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "932ff97f2c1fee5e26ab3097f8187fcf31aba2d8", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c70220382300ae326ad63fe54c5a32da202d1f13/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c70220382300ae326ad63fe54c5a32da202d1f13/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c70220382300ae326ad63fe54c5a32da202d1f13", "patch": "@@ -1,3 +1,8 @@\n+2019-08-19  Dmitriy Anisimkov  <anisimko@adacore.com>\n+\n+\t* libgnat/s-os_lib.ads, libgnat/s-os_lib.adb (To_Ada, To_C): New\n+\troutines.\n+\n 2019-08-19  Bob Duff  <duff@adacore.com>\n \n \t* exp_attr.adb (Attribute_Valid): Correct the handling of"}, {"sha": "258cd64d312ca6a043f0903ba1bb1cb46dcd66db", "filename": "gcc/ada/libgnat/s-os_lib.adb", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c70220382300ae326ad63fe54c5a32da202d1f13/gcc%2Fada%2Flibgnat%2Fs-os_lib.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c70220382300ae326ad63fe54c5a32da202d1f13/gcc%2Fada%2Flibgnat%2Fs-os_lib.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fs-os_lib.adb?ref=c70220382300ae326ad63fe54c5a32da202d1f13", "patch": "@@ -2979,6 +2979,15 @@ package body System.OS_Lib is\n       end loop;\n    end Spawn_Internal;\n \n+   ------------\n+   -- To_Ada --\n+   ------------\n+\n+   function To_Ada (Time : time_t) return OS_Time is\n+   begin\n+      return OS_Time (Time);\n+   end To_Ada;\n+\n    ---------------------------\n    -- To_Path_String_Access --\n    ---------------------------\n@@ -3008,6 +3017,15 @@ package body System.OS_Lib is\n       return Return_Val;\n    end To_Path_String_Access;\n \n+   ----------\n+   -- To_C --\n+   ----------\n+\n+   function To_C (Time : OS_Time) return time_t is\n+   begin\n+      return time_t (Time);\n+   end To_C;\n+\n    ------------------\n    -- Wait_Process --\n    ------------------"}, {"sha": "99406e9a77dd86660ffcb567c7a08b508c49aaff", "filename": "gcc/ada/libgnat/s-os_lib.ads", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c70220382300ae326ad63fe54c5a32da202d1f13/gcc%2Fada%2Flibgnat%2Fs-os_lib.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c70220382300ae326ad63fe54c5a32da202d1f13/gcc%2Fada%2Flibgnat%2Fs-os_lib.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fs-os_lib.ads?ref=c70220382300ae326ad63fe54c5a32da202d1f13", "patch": "@@ -164,6 +164,15 @@ package System.OS_Lib is\n    --  component parts to be interpreted in the local time zone, and returns\n    --  an OS_Time. Returns Invalid_Time if the creation fails.\n \n+   subtype time_t is Long_Integer;\n+   --  C time_t type of the time representation\n+\n+   function To_C (Time : OS_Time) return time_t;\n+   --  Convert OS_Time to C time_t type\n+\n+   function To_Ada (Time : time_t) return OS_Time;\n+   --  Convert C time_t type to OS_Time\n+\n    ----------------\n    -- File Stuff --\n    ----------------\n@@ -1107,6 +1116,8 @@ private\n    pragma Inline (\">\");\n    pragma Inline (\"<=\");\n    pragma Inline (\">=\");\n+   pragma Inline (To_C);\n+   pragma Inline (To_Ada);\n \n    type Process_Id is new Integer;\n    Invalid_Pid : constant Process_Id := -1;"}]}