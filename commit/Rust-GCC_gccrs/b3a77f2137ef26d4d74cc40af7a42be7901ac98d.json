{"sha": "b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNhNzdmMjEzN2VmMjZkNGQ3NGNjNDBhZjdhNDJiZTc5MDFhYzk4ZA==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2016-04-13T16:28:46Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2016-04-13T16:28:46Z"}, "message": "re PR c++/70639 (internal compiler error: in guard_tinfo_to_string, at c-family/c-indentation.c:560)\n\n\tPR c++/70639\n\t* c-indentation.c (should_warn_for_misleading_indentation): Bail out\n\tfor switch statements, too.\n\n\t* c-c++-common/Wmisleading-indentation-4.c: New test.\n\nFrom-SVN: r234952", "tree": {"sha": "af4aa61b9b882456a43642bc3e92952010b2e8ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/af4aa61b9b882456a43642bc3e92952010b2e8ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "99cd9857c01234bb5b6cbff54e1bd2a400c04179", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99cd9857c01234bb5b6cbff54e1bd2a400c04179", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99cd9857c01234bb5b6cbff54e1bd2a400c04179"}], "stats": {"total": 31, "additions": 27, "deletions": 4}, "files": [{"sha": "f842efc8d4e39ed3c8279291e8417e00f675ae51", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "patch": "@@ -1,3 +1,9 @@\n+2016-04-13  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/70639\n+\t* c-indentation.c (should_warn_for_misleading_indentation): Bail out\n+\tfor switch statements, too.\n+\n 2016-03-28  Jason Merrill  <jason@redhat.com>\n \n \t* c-cppbuiltin.c (c_cpp_builtins): Update __cpp_range_based_for."}, {"sha": "8c336867d8c135f33e196f0dc9100b38213a3a00", "filename": "gcc/c-family/c-indentation.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Fc-family%2Fc-indentation.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Fc-family%2Fc-indentation.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-indentation.c?ref=b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "patch": "@@ -239,10 +239,11 @@ should_warn_for_misleading_indentation (const token_indent_info &guard_tinfo,\n   if (line_table->seen_line_directive)\n     return false;\n \n-  /* We can't usefully warn about do-while statements since the bodies of these\n-     statements are always explicitly delimited at both ends, so control flow is\n-     quite obvious.  */\n-  if (guard_tinfo.keyword == RID_DO)\n+  /* We can't usefully warn about do-while and switch statements since the\n+     bodies of these statements are always explicitly delimited at both ends,\n+     so control flow is quite obvious.  */\n+  if (guard_tinfo.keyword == RID_DO\n+      || guard_tinfo.keyword == RID_SWITCH)\n     return false;\n \n   /* If the token following the body is a close brace or an \"else\""}, {"sha": "c8061135327f0cc6f3f83d22100cba5fc6a1e434", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "patch": "@@ -1,3 +1,8 @@\n+2016-04-13  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/70639\n+\t* c-c++-common/Wmisleading-indentation-4.c: New test.\n+\n 2016-04-13  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/70436"}, {"sha": "d15a4793da46a09fb835967b9b07426fd4f87535", "filename": "gcc/testsuite/c-c++-common/Wmisleading-indentation-4.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWmisleading-indentation-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3a77f2137ef26d4d74cc40af7a42be7901ac98d/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWmisleading-indentation-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWmisleading-indentation-4.c?ref=b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "patch": "@@ -0,0 +1,11 @@\n+/* PR c++/70639 */\n+/* { dg-do compile } */\n+/* { dg-options \"-Wmisleading-indentation\" } */\n+\n+void bar (int);\n+void\n+foo (int x)\n+{\n+  switch (x);\n+\tbar (x);\n+}"}]}