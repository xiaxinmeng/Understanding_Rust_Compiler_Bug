{"sha": "91035653db2e23fa0f3b941537b8787731e67e29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTEwMzU2NTNkYjJlMjNmYTBmM2I5NDE1MzdiODc4NzczMWU2N2UyOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2014-03-14T17:58:52Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2014-03-14T17:58:52Z"}, "message": "re PR middle-end/60484 (-fdump-rtl-expand and attribute optimize gives incorrect dump file path)\n\n\tPR middle-end/60484\n\t* common.opt (dump_base_name_prefixed): New Variable.\n\t* opts.c (finish_options): Don't prepend directory to x_dump_base_name\n\tif x_dump_base_name_prefixed is already set, set it at the end.\n\n\nCo-Authored-By: Marek Polacek <polacek@redhat.com>\n\nFrom-SVN: r208571", "tree": {"sha": "d703519c49e1019b22082f798cb3843b103b3223", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d703519c49e1019b22082f798cb3843b103b3223"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/91035653db2e23fa0f3b941537b8787731e67e29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91035653db2e23fa0f3b941537b8787731e67e29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91035653db2e23fa0f3b941537b8787731e67e29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91035653db2e23fa0f3b941537b8787731e67e29/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9592100294e59ea7c6228d3d575d76d67a88f02b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9592100294e59ea7c6228d3d575d76d67a88f02b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9592100294e59ea7c6228d3d575d76d67a88f02b"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "5e61b25db5f97e0454658a3eb8fb2660d192f52c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91035653db2e23fa0f3b941537b8787731e67e29/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91035653db2e23fa0f3b941537b8787731e67e29/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=91035653db2e23fa0f3b941537b8787731e67e29", "patch": "@@ -1,3 +1,11 @@\n+2014-03-14  Jakub Jelinek  <jakub@redhat.com>\n+\t    Marek Polacek  <polacek@redhat.com>\n+\n+\tPR middle-end/60484\n+\t* common.opt (dump_base_name_prefixed): New Variable.\n+\t* opts.c (finish_options): Don't prepend directory to x_dump_base_name\n+\tif x_dump_base_name_prefixed is already set, set it at the end.\n+\n 2014-03-14  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/60508"}, {"sha": "62c72f0d2fbfec77e86c42fb2eacfe29e6a46f83", "filename": "gcc/common.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91035653db2e23fa0f3b941537b8787731e67e29/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91035653db2e23fa0f3b941537b8787731e67e29/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=91035653db2e23fa0f3b941537b8787731e67e29", "patch": "@@ -211,6 +211,10 @@ bool flag_opts_finished\n Variable\n unsigned int flag_sanitize\n \n+; Flag whether a prefix has been added to dump_base_name\n+Variable\n+bool dump_base_name_prefixed = false\n+\n ###\n Driver\n "}, {"sha": "fdc903f9271a7b8c13e26fb24c9bc00332f5b315", "filename": "gcc/opts.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91035653db2e23fa0f3b941537b8787731e67e29/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91035653db2e23fa0f3b941537b8787731e67e29/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=91035653db2e23fa0f3b941537b8787731e67e29", "patch": "@@ -644,7 +644,9 @@ finish_options (struct gcc_options *opts, struct gcc_options *opts_set,\n {\n   enum unwind_info_type ui_except;\n \n-  if (opts->x_dump_base_name && ! IS_ABSOLUTE_PATH (opts->x_dump_base_name))\n+  if (opts->x_dump_base_name\n+      && ! IS_ABSOLUTE_PATH (opts->x_dump_base_name)\n+      && ! opts->x_dump_base_name_prefixed)\n     {\n       /* First try to make OPTS->X_DUMP_BASE_NAME relative to the\n \t OPTS->X_DUMP_DIR_NAME directory.  Then try to make\n@@ -674,6 +676,7 @@ finish_options (struct gcc_options *opts, struct gcc_options *opts_set,\n \t      opts->x_dump_base_name = new_dump_base_name;\n \t    }\n \t}\n+\topts->x_dump_base_name_prefixed = true;\n     }\n \n   /* Handle related options for unit-at-a-time, toplevel-reorder, and"}]}