{"sha": "692ce0fd55f4b1c5294371884ad1db1843069a26", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjkyY2UwZmQ1NWY0YjFjNTI5NDM3MTg4NGFkMWRiMTg0MzA2OWEyNg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-09-11T22:41:44Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-09-11T22:41:44Z"}, "message": "(redeclaration_error_message): For TYPE_DECLs, return 0 if\nTYPE_MAIN_VARIANT of old type is same as new type.\n\nFrom-SVN: r10311", "tree": {"sha": "00f99154144510124f6cf3e2bca700b1b02e3863", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00f99154144510124f6cf3e2bca700b1b02e3863"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/692ce0fd55f4b1c5294371884ad1db1843069a26", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/692ce0fd55f4b1c5294371884ad1db1843069a26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/692ce0fd55f4b1c5294371884ad1db1843069a26", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/692ce0fd55f4b1c5294371884ad1db1843069a26/comments", "author": null, "committer": null, "parents": [{"sha": "f7d9d4a857ef5548b2023ebc88987552620864c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7d9d4a857ef5548b2023ebc88987552620864c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7d9d4a857ef5548b2023ebc88987552620864c6"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "b6ffd614fd123ad294bf29fd9bd8638a911f27d3", "filename": "gcc/c-decl.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/692ce0fd55f4b1c5294371884ad1db1843069a26/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/692ce0fd55f4b1c5294371884ad1db1843069a26/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=692ce0fd55f4b1c5294371884ad1db1843069a26", "patch": "@@ -2385,6 +2385,15 @@ redeclaration_error_message (newdecl, olddecl)\n     {\n       if (flag_traditional && TREE_TYPE (newdecl) == TREE_TYPE (olddecl))\n \treturn 0;\n+      /* pushdecl creates distinct types for TYPE_DECLs by calling\n+\t build_type_copy, so the above comparison generally fails.  We do\n+\t another test against the TYPE_MAIN_VARIANT of the olddecl, which\n+\t is equivalent to what this code used to do before the build_type_copy\n+\t call.  The variant type distinction should not matter for traditional\n+\t code, because it doesn't have type qualifiers.  */\n+      if (flag_traditional \n+\t  && TYPE_MAIN_VARIANT (TREE_TYPE (olddecl)) == TREE_TYPE (newdecl))\n+\treturn 0;\n       if (DECL_IN_SYSTEM_HEADER (olddecl) || DECL_IN_SYSTEM_HEADER (newdecl))\n \treturn 0;\n       return \"redefinition of `%s'\";"}]}