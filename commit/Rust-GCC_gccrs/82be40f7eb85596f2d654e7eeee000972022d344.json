{"sha": "82be40f7eb85596f2d654e7eeee000972022d344", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODJiZTQwZjdlYjg1NTk2ZjJkNjU0ZTdlZWVlMDAwOTcyMDIyZDM0NA==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.co.uk", "date": "2000-09-08T09:39:23Z"}, "committer": {"name": "Bernd Schmidt", "email": "crux@gcc.gnu.org", "date": "2000-09-08T09:39:23Z"}, "message": "Some vector operation simplifications.\n\nFrom-SVN: r36263", "tree": {"sha": "4f6d42c06e9dfee4a87179059fbbc9be5d35507b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f6d42c06e9dfee4a87179059fbbc9be5d35507b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82be40f7eb85596f2d654e7eeee000972022d344", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82be40f7eb85596f2d654e7eeee000972022d344", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82be40f7eb85596f2d654e7eeee000972022d344", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82be40f7eb85596f2d654e7eeee000972022d344/comments", "author": null, "committer": null, "parents": [{"sha": "d5e5ec886e4928470e299aaee34ede9402a3325e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5e5ec886e4928470e299aaee34ede9402a3325e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5e5ec886e4928470e299aaee34ede9402a3325e"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "6e2837b660a3b4d4433eb41cbc690a87f892bee3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82be40f7eb85596f2d654e7eeee000972022d344/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82be40f7eb85596f2d654e7eeee000972022d344/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=82be40f7eb85596f2d654e7eeee000972022d344", "patch": "@@ -1,3 +1,8 @@\n+2000-09-08  Bernd Schmidt  <bernds@redhat.co.uk>\n+\n+\t* combine.c (combine_simplify_rtx): Try to simplify VEC_SELECT of a\n+\tVEC_CONCAT.\n+\n 2000-09-07  Richard Henderson  <rth@cygnus.com>\n \n \t* config/ia64/lib1funcs.asm (__divsi3): Use .s1 for frcpa."}, {"sha": "053b42060ce246d39590e7350c207468fd7b1935", "filename": "gcc/combine.c", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82be40f7eb85596f2d654e7eeee000972022d344/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82be40f7eb85596f2d654e7eeee000972022d344/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=82be40f7eb85596f2d654e7eeee000972022d344", "patch": "@@ -4539,6 +4539,45 @@ combine_simplify_rtx (x, op0_mode, last, in_dest)\n \n       break;\n \n+    case VEC_SELECT:\n+      {\n+\trtx op0 = XEXP (x, 0);\n+\trtx op1 = XEXP (x, 1);\n+\tint len;\n+\n+\tif (GET_CODE (op1) != PARALLEL)\n+\t  abort ();\n+\tlen = XVECLEN (op1, 0);\n+\tif (len == 1\n+\t    && GET_CODE (XVECEXP (op1, 0, 0)) == CONST_INT\n+\t    && GET_CODE (op0) == VEC_CONCAT)\n+\t  {\n+\t    int offset = INTVAL (XVECEXP (op1, 0, 0)) * GET_MODE_SIZE (GET_MODE (x));\n+\n+\t    /* Try to find the element in the VEC_CONCAT.  */\n+\t    for (;;)\n+\t      {\n+\t\tif (GET_MODE (op0) == GET_MODE (x))\n+\t\t  return op0;\n+\t\tif (GET_CODE (op0) == VEC_CONCAT)\n+\t\t  {\n+\t\t    HOST_WIDE_INT op0_size = GET_MODE_SIZE (GET_MODE (XEXP (op0, 0)));\n+\t\t    if (op0_size < offset)\n+\t\t      op0 = XEXP (op0, 0);\n+\t\t    else\n+\t\t      {\n+\t\t\toffset -= op0_size;\n+\t\t\top0 = XEXP (op0, 1);\n+\t\t      }\n+\t\t  }\n+\t\telse\n+\t\t  break;\n+\t      }\n+\t  }\n+      }\n+\n+      break;\n+      \n     default:\n       break;\n     }"}]}