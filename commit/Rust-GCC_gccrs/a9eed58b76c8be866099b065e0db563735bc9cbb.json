{"sha": "a9eed58b76c8be866099b065e0db563735bc9cbb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTllZWQ1OGI3NmM4YmU4NjYwOTliMDY1ZTBkYjU2MzczNWJjOWNiYg==", "commit": {"author": {"name": "Michael Koch", "email": "mkoch@gcc.gnu.org", "date": "2005-04-28T17:25:02Z"}, "committer": {"name": "Michael Koch", "email": "mkoch@gcc.gnu.org", "date": "2005-04-28T17:25:02Z"}, "message": "[multiple changes]\n\n2005-04-28  Jeroen Frijters  <jeroen@frijters.net>\n\n\t* gnu/java/net/protocol/file/Connection.java\n\t(StaticData): New inner class to contain statics.\n\t(connect, getHeaderField): Modified to use StaticData.\n\n2005-04-28  Michael Koch  <konqueror@gmx.de>\n\n\t* gnu/java/net/protocol/file/Connection.java\n\t(lineSeparator): Initialize with SystemProperties.getProperty().\n\nFrom-SVN: r98929", "tree": {"sha": "c37c7c38baa5831c3115a630fcce968c5d473fbd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c37c7c38baa5831c3115a630fcce968c5d473fbd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9eed58b76c8be866099b065e0db563735bc9cbb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9eed58b76c8be866099b065e0db563735bc9cbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9eed58b76c8be866099b065e0db563735bc9cbb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9eed58b76c8be866099b065e0db563735bc9cbb/comments", "author": null, "committer": null, "parents": [{"sha": "15d6512462e9878ea0ab15d643c6c9200c0fadce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15d6512462e9878ea0ab15d643c6c9200c0fadce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15d6512462e9878ea0ab15d643c6c9200c0fadce"}], "stats": {"total": 47, "additions": 27, "deletions": 20}, "files": [{"sha": "ad2bc89060bcbf3c529d3c7c9a2613ca448b705f", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9eed58b76c8be866099b065e0db563735bc9cbb/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9eed58b76c8be866099b065e0db563735bc9cbb/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a9eed58b76c8be866099b065e0db563735bc9cbb", "patch": "@@ -1,3 +1,14 @@\n+2005-04-28  Jeroen Frijters  <jeroen@frijters.net>\n+\n+\t* gnu/java/net/protocol/file/Connection.java\n+\t(StaticData): New inner class to contain statics.\n+\t(connect, getHeaderField): Modified to use StaticData.\n+\n+2005-04-28  Michael Koch  <konqueror@gmx.de>\n+\n+\t* gnu/java/net/protocol/file/Connection.java\n+\t(lineSeparator): Initialize with SystemProperties.getProperty().\n+\n 2005-04-27  Chris Burdess  <dog@gnu.org>\n \n \t* gnu/java/net/protocol/file/Connection.java: Return correct content"}, {"sha": "05611e24dff5dcc0fc781a6883c7e7fa094099de", "filename": "libjava/gnu/java/net/protocol/file/Connection.java", "status": "modified", "additions": 16, "deletions": 20, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9eed58b76c8be866099b065e0db563735bc9cbb/libjava%2Fgnu%2Fjava%2Fnet%2Fprotocol%2Ffile%2FConnection.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9eed58b76c8be866099b065e0db563735bc9cbb/libjava%2Fgnu%2Fjava%2Fnet%2Fprotocol%2Ffile%2FConnection.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnet%2Fprotocol%2Ffile%2FConnection.java?ref=a9eed58b76c8be866099b065e0db563735bc9cbb", "patch": "@@ -37,7 +37,7 @@\n \n package gnu.java.net.protocol.file;\n \n-import gnu.java.security.action.GetPropertyAction;\n+import gnu.classpath.SystemProperties;\n \n import java.io.BufferedInputStream;\n import java.io.BufferedOutputStream;\n@@ -56,7 +56,6 @@\n import java.net.URL;\n import java.net.URLConnection;\n import java.security.Permission;\n-import java.security.AccessController;\n import java.text.SimpleDateFormat;\n import java.util.Date;\n import java.util.Locale;\n@@ -76,23 +75,19 @@ public class Connection extends URLConnection\n    */\n   private static final String DEFAULT_PERMISSION = \"read\";\n \n-  /**\n-   * HTTP-style DateFormat, used to format the last-modified header.\n-   */\n-  private static SimpleDateFormat dateFormat\n-    = new SimpleDateFormat(\"EEE, dd MMM yyyy hh:mm:ss 'GMT'\",\n-                           new Locale (\"En\", \"Us\", \"Unix\"));\n-\n-  private static String lineSeparator;\n-  \n-  static\n+  private static class StaticData\n   {\n-    if (lineSeparator == null)\n-      {\n-\tGetPropertyAction getProperty = new GetPropertyAction(\"line.separator\");\n-\tlineSeparator = (String) AccessController.doPrivileged(getProperty);\n-      }\n+    /**\n+     * HTTP-style DateFormat, used to format the last-modified header.\n+     */\n+    static SimpleDateFormat dateFormat\n+      = new SimpleDateFormat(\"EEE, dd MMM yyyy hh:mm:ss 'GMT'\",\n+                             new Locale (\"En\", \"Us\", \"Unix\"));\n+\n+    static String lineSeparator =\n+      SystemProperties.getProperty(\"line.separator\");\n   }\n+\n   \n   /**\n    * This is a File object for this connection\n@@ -182,7 +177,7 @@ byte[] getDirectoryListing()\n         for (int i = 0; i < files.length; i++)\n           {\n             writer.write(files[i]);\n-            writer.write(lineSeparator);\n+            writer.write(StaticData.lineSeparator);\n           }\n \n         directoryListing = sink.toByteArray();\n@@ -271,9 +266,10 @@ else if (field.equals(\"content-length\"))\n           }\n \telse if (field.equals(\"last-modified\"))\n \t  {\n-\t    synchronized (dateFormat)\n+\t    synchronized (StaticData.dateFormat)\n \t      {\n-        \treturn dateFormat.format(new Date(file.lastModified()));\n+        \treturn StaticData.dateFormat.format(\n+                        new Date(file.lastModified()));\n \t      }\n \t  }\n       }"}]}