{"sha": "96ce40cbce449cb5f434425d148a9bcf02270c96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZjZTQwY2JjZTQ0OWNiNWY0MzQ0MjVkMTQ4YTliY2YwMjI3MGM5Ng==", "commit": {"author": {"name": "Gregor Richards", "email": "gregor.richards@uwaterloo.ca", "date": "2015-04-22T14:11:25Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2015-04-22T14:11:25Z"}, "message": "libitm fixes for musl support\n\nOn behalf of Szabolcs.Nagy@arm.com\n\n2015-04-22  Gregor Richards  <gregor.richards@uwaterloo.ca>\n\n       * config/arm/hwcap.cc: Use fcntl.h instead of sys/fcntl.h.\n       * config/linux/x86/tls.h: Only use __GLIBC_PREREQ if defined.\n\nFrom-SVN: r222325", "tree": {"sha": "96d201371102f590af8100ee8b32f2f9bda608e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96d201371102f590af8100ee8b32f2f9bda608e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96ce40cbce449cb5f434425d148a9bcf02270c96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96ce40cbce449cb5f434425d148a9bcf02270c96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96ce40cbce449cb5f434425d148a9bcf02270c96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96ce40cbce449cb5f434425d148a9bcf02270c96/comments", "author": null, "committer": null, "parents": [{"sha": "04934297b8b00232358a54205a53f55f9e292c89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04934297b8b00232358a54205a53f55f9e292c89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04934297b8b00232358a54205a53f55f9e292c89"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "78b2de05f6d0f856ba978b6cb722aefe1689d29f", "filename": "libitm/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ce40cbce449cb5f434425d148a9bcf02270c96/libitm%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ce40cbce449cb5f434425d148a9bcf02270c96/libitm%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FChangeLog?ref=96ce40cbce449cb5f434425d148a9bcf02270c96", "patch": "@@ -1,3 +1,8 @@\n+2015-04-22  Gregor Richards  <gregor.richards@uwaterloo.ca>\n+\n+\t* config/arm/hwcap.cc: Use fcntl.h instead of sys/fcntl.h.\n+\t* config/linux/x86/tls.h: Only use __GLIBC_PREREQ if defined.\n+\n 2015-01-15  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR libitm/64360"}, {"sha": "ea8f023c93b834fd42e40c8cc5c5279f4f65f5e0", "filename": "libitm/config/arm/hwcap.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ce40cbce449cb5f434425d148a9bcf02270c96/libitm%2Fconfig%2Farm%2Fhwcap.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ce40cbce449cb5f434425d148a9bcf02270c96/libitm%2Fconfig%2Farm%2Fhwcap.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Farm%2Fhwcap.cc?ref=96ce40cbce449cb5f434425d148a9bcf02270c96", "patch": "@@ -40,7 +40,7 @@ int GTM_hwcap HIDDEN = 0\n \n #ifdef __linux__\n #include <unistd.h>\n-#include <sys/fcntl.h>\n+#include <fcntl.h>\n #include <elf.h>\n \n static void __attribute__((constructor))"}, {"sha": "54ad8b67bb541a81c70fad01c3e9513afaf97e1b", "filename": "libitm/config/linux/x86/tls.h", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ce40cbce449cb5f434425d148a9bcf02270c96/libitm%2Fconfig%2Flinux%2Fx86%2Ftls.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ce40cbce449cb5f434425d148a9bcf02270c96/libitm%2Fconfig%2Flinux%2Fx86%2Ftls.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Flinux%2Fx86%2Ftls.h?ref=96ce40cbce449cb5f434425d148a9bcf02270c96", "patch": "@@ -25,16 +25,19 @@\n #ifndef LIBITM_X86_TLS_H\n #define LIBITM_X86_TLS_H 1\n \n-#if defined(__GLIBC_PREREQ) && __GLIBC_PREREQ(2, 10)\n+#if defined(__GLIBC_PREREQ)\n+#if __GLIBC_PREREQ(2, 10)\n /* Use slots in the TCB head rather than __thread lookups.\n    GLIBC has reserved words 10 through 13 for TM.  */\n #define HAVE_ARCH_GTM_THREAD 1\n #define HAVE_ARCH_GTM_THREAD_DISP 1\n #endif\n+#endif\n \n #include \"config/generic/tls.h\"\n \n-#if defined(__GLIBC_PREREQ) && __GLIBC_PREREQ(2, 10)\n+#if defined(__GLIBC_PREREQ)\n+#if __GLIBC_PREREQ(2, 10)\n namespace GTM HIDDEN {\n \n #ifdef __x86_64__\n@@ -101,5 +104,6 @@ static inline void set_abi_disp(struct abi_dispatch *x)\n \n } // namespace GTM\n #endif /* >= GLIBC 2.10 */\n+#endif\n \n #endif // LIBITM_X86_TLS_H"}]}