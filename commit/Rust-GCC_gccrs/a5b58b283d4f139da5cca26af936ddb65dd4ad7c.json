{"sha": "a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTViNThiMjgzZDRmMTM5ZGE1Y2NhMjZhZjkzNmRkYjY1ZGQ0YWQ3Yw==", "commit": {"author": {"name": "Markus Trippelsdorf", "email": "trippels@gcc.gnu.org", "date": "2014-11-25T07:41:48Z"}, "committer": {"name": "Markus Trippelsdorf", "email": "trippels@gcc.gnu.org", "date": "2014-11-25T07:41:48Z"}, "message": "re PR ipa/64059 (ICE: Segmentation fault in ipa-polymorphic-call.c:1593)\n\nFix PR64059\n\n\t* ipa-prop.c (ipa_analyze_call_uses): Don't call get_dynamic_type when\n\tdevirtualization is disabled.\n\nFrom-SVN: r218038", "tree": {"sha": "4c0ff73cb0c4d815369df604de4e0b12c0e4f55c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4c0ff73cb0c4d815369df604de4e0b12c0e4f55c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/comments", "author": null, "committer": null, "parents": [{"sha": "02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2"}], "stats": {"total": 69, "additions": 68, "deletions": 1}, "files": [{"sha": "8ff9c72256d792349912e55904465b4d9fa88256", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "patch": "@@ -1,3 +1,9 @@\n+2014-11-25  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/64059\n+\t* ipa-prop.c (ipa_analyze_call_uses): Don't call get_dynamic_type when\n+\tdevirtualization is disabled.\n+\n 2014-11-24  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/63965"}, {"sha": "eeffda449d9b7bfbff912b24c8490aec7e76f9d2", "filename": "gcc/ipa-prop.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2Fipa-prop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2Fipa-prop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-prop.c?ref=a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "patch": "@@ -2155,7 +2155,7 @@ ipa_analyze_call_uses (struct func_body_info *fbi, gcall *call)\n   if (cs && !cs->indirect_unknown_callee)\n     return;\n \n-  if (cs->indirect_info->polymorphic)\n+  if (cs->indirect_info->polymorphic && flag_devirtualize)\n     {\n       tree instance;\n       tree target = gimple_call_fn (call);"}, {"sha": "147674e67ee9b0316cd2310bb92a18f5df458704", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "patch": "@@ -1,3 +1,8 @@\n+2014-11-25  Markus Trippelsdorf  <markus@trippelsdorf.de>\n+\n+\tPR ipa/64059\n+\t* g++.dg/ipa/pr64059.C: New test.\n+\n 2014-11-24  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/63847"}, {"sha": "0269b45458d97631c44397e6ea8e252c85e816ae", "filename": "gcc/testsuite/g++.dg/ipa/pr64059.C", "status": "added", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr64059.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b58b283d4f139da5cca26af936ddb65dd4ad7c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr64059.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr64059.C?ref=a5b58b283d4f139da5cca26af936ddb65dd4ad7c", "patch": "@@ -0,0 +1,56 @@\n+// { dg-options \"-r -nostdlib -O2 -flto -fno-devirtualize\" }\n+// { dg-require-effective-target lto }\n+\n+class A;\n+class B\n+{\n+public:\n+  A *operator->();\n+};\n+class C\n+{\n+public:\n+  virtual void m_fn1 ();\n+};\n+class A\n+{\n+public:\n+  C *m_fn2 ();\n+};\n+class D\n+{\n+public:\n+  void\n+  m_fn3 ()\n+  {\n+    list_m->m_fn2 ()->m_fn1 ();\n+  }\n+  B list_m;\n+};\n+\n+class F\n+{\n+public:\n+  D m_fn4 ();\n+};\n+class G\n+{\n+public:\n+  F m_fn5 (int, int);\n+};\n+class H\n+{\n+public:\n+  void\n+  m_fn6 ()\n+  {\n+    fieldEngine_m.m_fn5 (0, 0).m_fn4 ().m_fn3 ();\n+  }\n+  G fieldEngine_m;\n+};\n+\n+void\n+fn1 (H a)\n+{\n+  a.m_fn6 ();\n+}"}]}