{"sha": "2b04d015d61b0d5def8eccc1f3d08694968882fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmIwNGQwMTVkNjFiMGQ1ZGVmOGVjY2MxZjNkMDg2OTQ5Njg4ODJmZQ==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2003-11-06T15:47:41Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2003-11-06T15:47:41Z"}, "message": "prep_cif.c (ffi_prep_cif): Move the validity check after the initialization.\n\n2003-11-06  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* src/prep_cif.c (ffi_prep_cif): Move the validity check after\n\tthe initialization.\n\nFrom-SVN: r73309", "tree": {"sha": "ed26b47e0a373a78dddf380b9d92e83c360f04dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed26b47e0a373a78dddf380b9d92e83c360f04dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b04d015d61b0d5def8eccc1f3d08694968882fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b04d015d61b0d5def8eccc1f3d08694968882fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b04d015d61b0d5def8eccc1f3d08694968882fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b04d015d61b0d5def8eccc1f3d08694968882fe/comments", "author": null, "committer": null, "parents": [{"sha": "4b886873914887e749e96c8638928c524060edf6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b886873914887e749e96c8638928c524060edf6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b886873914887e749e96c8638928c524060edf6"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "1a472aa7954d2fe0db98d31baa00f7dd95441f0b", "filename": "libffi/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b04d015d61b0d5def8eccc1f3d08694968882fe/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b04d015d61b0d5def8eccc1f3d08694968882fe/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=2b04d015d61b0d5def8eccc1f3d08694968882fe", "patch": "@@ -1,6 +1,11 @@\n+2003-11-06  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* src/prep_cif.c (ffi_prep_cif): Move the validity check after\n+\tthe initialization.\n+\n 2003-10-23  Andreas Tobler  <a.tobler@schweiz.ch>\n \n-\t* src/java_raw_api.c (ffi_java_ptrarray_to_raw): Replace \n+\t* src/java_raw_api.c (ffi_java_ptrarray_to_raw): Replace\n \tFFI_ASSERT(FALSE) with FFI_ASSERT(0).\n \n 2003-10-22  David Daney  <ddaney@avtrex.com>"}, {"sha": "3ee5eadcd7f41ad6631609c1b1023bd89e2f39e6", "filename": "libffi/src/prep_cif.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b04d015d61b0d5def8eccc1f3d08694968882fe/libffi%2Fsrc%2Fprep_cif.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b04d015d61b0d5def8eccc1f3d08694968882fe/libffi%2Fsrc%2Fprep_cif.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fprep_cif.c?ref=2b04d015d61b0d5def8eccc1f3d08694968882fe", "patch": "@@ -125,13 +125,15 @@ ffi_status ffi_prep_cif(/*@out@*/ /*@partial@*/ ffi_cif *cif,\n \n   for (ptr = cif->arg_types, i = cif->nargs; i > 0; i--, ptr++)\n     {\n-      /* Perform a sanity check on the argument type */\n-      FFI_ASSERT_VALID_TYPE(*ptr);\n \n       /* Initialize any uninitialized aggregate type definitions */\n       if (((*ptr)->size == 0) && (initialize_aggregate((*ptr)) != FFI_OK))\n \treturn FFI_BAD_TYPEDEF;\n \n+      /* Perform a sanity check on the argument type, do this \n+\t check after the initialization.  */\n+      FFI_ASSERT_VALID_TYPE(*ptr);\n+\n #if !defined __x86_64__ && !defined S390\n #ifdef SPARC\n       if (((*ptr)->type == FFI_TYPE_STRUCT"}]}