{"sha": "006202e8c05177e883ff174d56834cafc43c8165", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDA2MjAyZThjMDUxNzdlODgzZmYxNzRkNTY4MzRjYWZjNDNjODE2NQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-04-14T17:53:34Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-04-14T17:53:34Z"}, "message": "re PR lto/60820 (ice in ctor_for_folding, at varpool.c:291)\n\n\n\tPR lto/60820\n\t* varpool.c (varpool_remove_node): Do not alter decls when streaming.\n\nFrom-SVN: r209389", "tree": {"sha": "cb3a94353c53e0c5edcafb7984f173abbb034ca3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb3a94353c53e0c5edcafb7984f173abbb034ca3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/006202e8c05177e883ff174d56834cafc43c8165", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/006202e8c05177e883ff174d56834cafc43c8165", "html_url": "https://github.com/Rust-GCC/gccrs/commit/006202e8c05177e883ff174d56834cafc43c8165", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/006202e8c05177e883ff174d56834cafc43c8165/comments", "author": null, "committer": null, "parents": [{"sha": "e0a81db1258dfe19abb0b20c6169a4da14d30c3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0a81db1258dfe19abb0b20c6169a4da14d30c3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0a81db1258dfe19abb0b20c6169a4da14d30c3a"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "98e37104f62287e8361857369e2bc59eb615acae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006202e8c05177e883ff174d56834cafc43c8165/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006202e8c05177e883ff174d56834cafc43c8165/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=006202e8c05177e883ff174d56834cafc43c8165", "patch": "@@ -1,3 +1,8 @@\n+2014-04-14  Jan Hubicka   <hubicka@ucw.cz>\n+\n+\tPR lto/60820\n+\t* varpool.c (varpool_remove_node): Do not alter decls when streaming.\n+\n 2014-04-14  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.c (examine_argument): Return bool.  Return true if"}, {"sha": "b5493ab5a846d097c2f388a51c3e3668bd9a1808", "filename": "gcc/varpool.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006202e8c05177e883ff174d56834cafc43c8165/gcc%2Fvarpool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006202e8c05177e883ff174d56834cafc43c8165/gcc%2Fvarpool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarpool.c?ref=006202e8c05177e883ff174d56834cafc43c8165", "patch": "@@ -166,7 +166,9 @@ varpool_remove_node (varpool_node *node)\n   /* Because we remove references from external functions before final compilation,\n      we may end up removing useful constructors.\n      FIXME: We probably want to trace boundaries better.  */\n-  if ((init = ctor_for_folding (node->decl)) == error_mark_node)\n+  if (cgraph_state == CGRAPH_LTO_STREAMING)\n+    ;\n+  else if ((init = ctor_for_folding (node->decl)) == error_mark_node)\n     varpool_remove_initializer (node);\n   else\n     DECL_INITIAL (node->decl) = init;"}]}