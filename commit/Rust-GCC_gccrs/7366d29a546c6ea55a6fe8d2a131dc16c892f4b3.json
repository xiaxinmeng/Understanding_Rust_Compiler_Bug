{"sha": "7366d29a546c6ea55a6fe8d2a131dc16c892f4b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzM2NmQyOWE1NDZjNmVhNTVhNmZlOGQyYTEzMWRjMTZjODkyZjRiMw==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2018-05-31T10:46:17Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-05-31T10:46:17Z"}, "message": "[Ada] Set Etype on rewriteen Max_Queue_Length expressions\n\nRewriting of Max_Queue_Length expression into N_Integer_Literal should probably\nbe done in expansion and not in analysis, but anyway it should not strip the\nexpression from its Etype because backends (e.g. GNATprove) expect that Etype\nto be present.\n\nNo frontend test is provided, because GNAT doesn't care about the missing\nEtype decoration. This patch allows to simplify AST processing in GNATprove.\n\n2018-05-31  Piotr Trojanek  <trojanek@adacore.com>\n\ngcc/ada/\n\n\t* sem_prag.adb (Analyze_Pragma): Set Etype on the rewritten\n\tMax_Queue_Length expression.\n\nFrom-SVN: r261002", "tree": {"sha": "5849e0224885534be42afc8a5370b15b55a7909d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5849e0224885534be42afc8a5370b15b55a7909d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "81a95941f966dd1c0e4e2d368e0d7441f0776482", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81a95941f966dd1c0e4e2d368e0d7441f0776482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81a95941f966dd1c0e4e2d368e0d7441f0776482"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "a58cfe85b95ea056b5b5da363ed476bde114a2d2", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7366d29a546c6ea55a6fe8d2a131dc16c892f4b3", "patch": "@@ -1,3 +1,8 @@\n+2018-05-31  Piotr Trojanek  <trojanek@adacore.com>\n+\n+\t* sem_prag.adb (Analyze_Pragma): Set Etype on the rewritten\n+\tMax_Queue_Length expression.\n+\n 2018-05-31  Sergey Rybin  <rybin@adacore.com>\n \n \t* doc/gnat_ugn/gnat_and_program_execution.rst: gnatelim does not need"}, {"sha": "e80c297cd09efe51468405ce4c19a9f3c8487877", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7366d29a546c6ea55a6fe8d2a131dc16c892f4b3/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=7366d29a546c6ea55a6fe8d2a131dc16c892f4b3", "patch": "@@ -18833,6 +18833,7 @@ package body Sem_Prag is\n \n             if Nkind (Arg) /= N_Integer_Literal then\n                Rewrite (Arg, Make_Integer_Literal (Sloc (Arg), Val));\n+               Set_Etype (Arg, Etype (Original_Node (Arg)));\n             end if;\n \n             Record_Rep_Item (Entry_Id, N);"}]}