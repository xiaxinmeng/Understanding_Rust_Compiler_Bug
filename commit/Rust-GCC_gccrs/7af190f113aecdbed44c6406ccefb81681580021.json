{"sha": "7af190f113aecdbed44c6406ccefb81681580021", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FmMTkwZjExM2FlY2RiZWQ0NGM2NDA2Y2NlZmI4MTY4MTU4MDAyMQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-10-09T00:02:14Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-10-09T00:02:14Z"}, "message": "runtime: Do not report thunks and recover functions in backtrace.\n\nFrom-SVN: r203294", "tree": {"sha": "4161ee09ad51349a5080a6442ff772c8c3e965ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4161ee09ad51349a5080a6442ff772c8c3e965ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7af190f113aecdbed44c6406ccefb81681580021", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af190f113aecdbed44c6406ccefb81681580021", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7af190f113aecdbed44c6406ccefb81681580021", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af190f113aecdbed44c6406ccefb81681580021/comments", "author": null, "committer": null, "parents": [{"sha": "8ae4c35c1e267d5cfe10693dd0f81eb1883c0f59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ae4c35c1e267d5cfe10693dd0f81eb1883c0f59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ae4c35c1e267d5cfe10693dd0f81eb1883c0f59"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "291dfd0d666764296c13e8b9af6baa50486788d6", "filename": "libgo/runtime/go-callers.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af190f113aecdbed44c6406ccefb81681580021/libgo%2Fruntime%2Fgo-callers.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af190f113aecdbed44c6406ccefb81681580021/libgo%2Fruntime%2Fgo-callers.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-callers.c?ref=7af190f113aecdbed44c6406ccefb81681580021", "patch": "@@ -53,6 +53,21 @@ callback (void *data, uintptr_t pc, const char *filename, int lineno,\n \treturn 0;\n     }\n \n+  /* Skip thunks and recover functions.  There is no equivalent to\n+     these functions in the gc toolchain, so returning them here means\n+     significantly different results for runtime.Caller(N).  */\n+  if (function != NULL)\n+    {\n+      const char *p;\n+\n+      p = __builtin_strchr (function, '.');\n+      if (p != NULL && __builtin_strncmp (p + 1, \"$thunk\", 6) == 0)\n+\treturn 0;\n+      p = __builtin_strrchr (function, '$');\n+      if (p != NULL && __builtin_strcmp(p, \"$recover\") == 0)\n+\treturn 0;\n+    }\n+\n   if (arg->skip > 0)\n     {\n       --arg->skip;"}]}