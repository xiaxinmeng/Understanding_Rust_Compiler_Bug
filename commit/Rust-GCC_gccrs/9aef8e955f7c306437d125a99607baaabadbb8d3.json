{"sha": "9aef8e955f7c306437d125a99607baaabadbb8d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWFlZjhlOTU1ZjdjMzA2NDM3ZDEyNWE5OTYwN2JhYWFiYWRiYjhkMw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2012-09-28T11:07:17Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-09-28T11:07:17Z"}, "message": "re PR lto/47799 (LTO debug info for early inlined functions missing)\n\n2012-09-28  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/47799\n\t* lto-streamer-out.c (tree_is_indexable): Make PARM_DECLs global.\n\t(lto_output_tree_ref): Handle references to them.\n\t(output_function): Do not output function arguments again.\n\t* lto-streamer-in.c (input_function): Do not input arguments\n\tagain, nor overwrite them.\n\nFrom-SVN: r191824", "tree": {"sha": "167783f0b34af1e16f0faae91cd6ea78589caba7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/167783f0b34af1e16f0faae91cd6ea78589caba7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9aef8e955f7c306437d125a99607baaabadbb8d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9aef8e955f7c306437d125a99607baaabadbb8d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9aef8e955f7c306437d125a99607baaabadbb8d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9aef8e955f7c306437d125a99607baaabadbb8d3/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b8dbdb1275f24e94c8f9f80154676967116fff5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8dbdb1275f24e94c8f9f80154676967116fff5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8dbdb1275f24e94c8f9f80154676967116fff5a"}], "stats": {"total": 32, "additions": 11, "deletions": 21}, "files": [{"sha": "cf298f171ad576ff70af058bf625a9c630299a1a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9aef8e955f7c306437d125a99607baaabadbb8d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9aef8e955f7c306437d125a99607baaabadbb8d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9aef8e955f7c306437d125a99607baaabadbb8d3", "patch": "@@ -1,3 +1,12 @@\n+2012-09-28  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/47799\n+\t* lto-streamer-out.c (tree_is_indexable): Make PARM_DECLs global.\n+\t(lto_output_tree_ref): Handle references to them.\n+\t(output_function): Do not output function arguments again.\n+\t* lto-streamer-in.c (input_function): Do not input arguments\n+\tagain, nor overwrite them.\n+\n 2012-09-28  Richard Guenther  <rguenther@suse.de>\n \n \t* cgraph.h (symtab_node_base): Re-order and pack fields."}, {"sha": "91215216f9dbead2a7e69ebaad19a159e9e46b59", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9aef8e955f7c306437d125a99607baaabadbb8d3/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9aef8e955f7c306437d125a99607baaabadbb8d3/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=9aef8e955f7c306437d125a99607baaabadbb8d3", "patch": "@@ -823,7 +823,6 @@ input_function (tree fn_decl, struct data_in *data_in,\n   gimple *stmts;\n   basic_block bb;\n   struct cgraph_node *node;\n-  tree args, narg, oarg;\n \n   fn = DECL_STRUCT_FUNCTION (fn_decl);\n   tag = streamer_read_record_start (ib);\n@@ -834,22 +833,6 @@ input_function (tree fn_decl, struct data_in *data_in,\n \n   input_struct_function_base (fn, data_in, ib);\n \n-  /* Read all function arguments.  We need to re-map them here to the\n-     arguments of the merged function declaration.  */\n-  args = stream_read_tree (ib, data_in);\n-  for (oarg = args, narg = DECL_ARGUMENTS (fn_decl);\n-       oarg && narg;\n-       oarg = TREE_CHAIN (oarg), narg = TREE_CHAIN (narg))\n-    {\n-      unsigned ix;\n-      bool res;\n-      res = streamer_tree_cache_lookup (data_in->reader_cache, oarg, &ix);\n-      gcc_assert (res);\n-      /* Replace the argument in the streamer cache.  */\n-      streamer_tree_cache_insert_at (data_in->reader_cache, narg, ix);\n-    }\n-  gcc_assert (!oarg && !narg);\n-\n   /* Read all the SSA names.  */\n   input_ssa_names (ib, data_in, fn);\n "}, {"sha": "afe49517eb1f16c69c5d29e2825b98d15af6af7b", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9aef8e955f7c306437d125a99607baaabadbb8d3/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9aef8e955f7c306437d125a99607baaabadbb8d3/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=9aef8e955f7c306437d125a99607baaabadbb8d3", "patch": "@@ -125,7 +125,7 @@ static bool\n tree_is_indexable (tree t)\n {\n   if (TREE_CODE (t) == PARM_DECL)\n-    return false;\n+    return true;\n   else if (TREE_CODE (t) == VAR_DECL && decl_function_context (t)\n \t   && !TREE_STATIC (t))\n     return false;\n@@ -237,6 +237,7 @@ lto_output_tree_ref (struct output_block *ob, tree expr)\n     case VAR_DECL:\n     case DEBUG_EXPR_DECL:\n       gcc_assert (decl_function_context (expr) == NULL || TREE_STATIC (expr));\n+    case PARM_DECL:\n       streamer_write_record_start (ob, LTO_global_decl_ref);\n       lto_output_var_decl_index (ob->decl_state, ob->main_stream, expr);\n       break;\n@@ -806,9 +807,6 @@ output_function (struct cgraph_node *node)\n \n   output_struct_function_base (ob, fn);\n \n-  /* Output the head of the arguments list.  */\n-  stream_write_tree (ob, DECL_ARGUMENTS (function), true);\n-\n   /* Output all the SSA names used in the function.  */\n   output_ssa_names (ob, fn);\n "}]}