{"sha": "9eb4080f6f5275430b5378468ddc820a98e5cfe3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWViNDA4MGY2ZjUyNzU0MzBiNTM3ODQ2OGRkYzgyMGE5OGU1Y2ZlMw==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-05-26T03:13:18Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-05-26T03:13:18Z"}, "message": "Makefile.in (CFILES): Add putenv.c and setenv.c.\n\n        * Makefile.in (CFILES): Add putenv.c and setenv.c.\n        * configure.in (funcs): Add putenv and setenv.\n        (AC_CHECK_FUNCS): Check for putenv and setenv.\n        * configure: Rebuilt.\n        * putenv.c setenv.c: New files.\n\n[[Split portion of a mixed commit.]]\n\nFrom-SVN: r27162.2", "tree": {"sha": "8916755fdb4dbce191649889049dd1f5b53fbedc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8916755fdb4dbce191649889049dd1f5b53fbedc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9eb4080f6f5275430b5378468ddc820a98e5cfe3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eb4080f6f5275430b5378468ddc820a98e5cfe3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9eb4080f6f5275430b5378468ddc820a98e5cfe3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eb4080f6f5275430b5378468ddc820a98e5cfe3/comments", "author": null, "committer": null, "parents": [{"sha": "d05ba2205fc7af481d806eab41773f970ad305cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d05ba2205fc7af481d806eab41773f970ad305cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d05ba2205fc7af481d806eab41773f970ad305cf"}], "stats": {"total": 375, "additions": 302, "deletions": 73}, "files": [{"sha": "6aaac7f17d1da5a6797e09f135baafe157372f18", "filename": "libiberty/Makefile.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FMakefile.in?ref=9eb4080f6f5275430b5378468ddc820a98e5cfe3", "patch": "@@ -120,9 +120,9 @@ CFILES = asprintf.c alloca.c argv.c atexit.c basename.c bcmp.c bcopy.c \\\n \tfnmatch.c getcwd.c getopt.c getopt1.c getpagesize.c \\\n \tgetruntime.c floatformat.c hex.c index.c insque.c memchr.c \\\n \tmemcmp.c memcpy.c memmove.c memset.c mkstemps.c objalloc.c obstack.c \\\n-\tpexecute.c random.c rename.c rindex.c sigsetmask.c spaces.c \\\n-\tsplay-tree.c strcasecmp.c strncasecmp.c strchr.c strdup.c strerror.c \\\n-\tstrrchr.c strsignal.c strstr.c strtod.c strtol.c strtoul.c \\\n+\tpexecute.c putenv.c random.c rename.c rindex.c setenv.c sigsetmask.c \\\n+\tspaces.c splay-tree.c strcasecmp.c strncasecmp.c strchr.c strdup.c \\\n+\tstrerror.c strrchr.c strsignal.c strstr.c strtod.c strtol.c strtoul.c \\\n \ttmpnam.c vasprintf.c vfork.c vfprintf.c vprintf.c vsprintf.c \\\n \twaitpid.c xatexit.c xexit.c xmalloc.c xstrdup.c xstrerror.c\n "}, {"sha": "fe898a5e807094521fccc10f1eb72efe31eab20e", "filename": "libiberty/configure", "status": "modified", "additions": 70, "deletions": 68, "changes": 138, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=9eb4080f6f5275430b5378468ddc820a98e5cfe3", "patch": "@@ -1159,9 +1159,11 @@ funcs=\"$funcs memcpy\"\n funcs=\"$funcs memmove\"\n funcs=\"$funcs memset\"\n funcs=\"$funcs mkstemps\"\n+funcs=\"$funcs putenv\"\n funcs=\"$funcs random\"\n funcs=\"$funcs rename\"\n funcs=\"$funcs rindex\"\n+funcs=\"$funcs setenv\"\n funcs=\"$funcs sigsetmask\"\n funcs=\"$funcs strcasecmp\"\n funcs=\"$funcs strchr\"\n@@ -1191,12 +1193,12 @@ if test \"x\" = \"y\"; then\n   for ac_func in asprintf atexit basename bcmp bcopy bzero calloc clock getcwd\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1195: checking for $ac_func\" >&5\n+echo \"configure:1197: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1200 \"configure\"\n+#line 1202 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1219,7 +1221,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1223: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1225: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1246,12 +1248,12 @@ done\n   for ac_func in getpagesize index insque mkstemps memchr memcmp memcpy memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1250: checking for $ac_func\" >&5\n+echo \"configure:1252: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1255 \"configure\"\n+#line 1257 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1274,7 +1276,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1278: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1280: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1298,15 +1300,15 @@ else\n fi\n done\n \n-  for ac_func in memset random rename rindex sigsetmask strcasecmp\n+  for ac_func in memset putenv random rename rindex sigsetmask strcasecmp\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1305: checking for $ac_func\" >&5\n+echo \"configure:1307: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1310 \"configure\"\n+#line 1312 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1329,7 +1331,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1333: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1335: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1353,15 +1355,15 @@ else\n fi\n done\n \n-  for ac_func in strchr strdup strncasecmp strrchr strstr strtod strtol\n+  for ac_func in setenv strchr strdup strncasecmp strrchr strstr strtod strtol\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1360: checking for $ac_func\" >&5\n+echo \"configure:1362: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1365 \"configure\"\n+#line 1367 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1384,7 +1386,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1388: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1390: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1411,12 +1413,12 @@ done\n   for ac_func in strtoul tmpnam vasprintf vfprintf vprintf vsprintf waitpid\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1415: checking for $ac_func\" >&5\n+echo \"configure:1417: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1420 \"configure\"\n+#line 1422 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1439,7 +1441,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1443: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1445: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1478,12 +1480,12 @@ EOF\n   for ac_func in getrusage on_exit psignal strerror strsignal sysconf times\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1482: checking for $ac_func\" >&5\n+echo \"configure:1484: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1487 \"configure\"\n+#line 1489 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1506,7 +1508,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1510: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1512: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1533,12 +1535,12 @@ done\n   for ac_func in sbrk\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1537: checking for $ac_func\" >&5\n+echo \"configure:1539: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1542 \"configure\"\n+#line 1544 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1561,7 +1563,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1565: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1567: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1732,7 +1734,7 @@ EOF\n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1736: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1738: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1743,12 +1745,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1747 \"configure\"\n+#line 1749 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1752: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1754: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1774,19 +1776,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1778: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1780: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1785: checking for $ac_func\" >&5\n+echo \"configure:1787: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1790 \"configure\"\n+#line 1792 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1809,7 +1811,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1813: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1815: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1856,19 +1858,19 @@ EOF\n     # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1860: checking for working alloca.h\" >&5\n+echo \"configure:1862: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1865 \"configure\"\n+#line 1867 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:1872: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1874: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -1889,12 +1891,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1893: checking for alloca\" >&5\n+echo \"configure:1895: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1898 \"configure\"\n+#line 1900 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -1922,7 +1924,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:1926: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1928: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -1954,12 +1956,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:1958: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:1960: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1963 \"configure\"\n+#line 1965 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -1984,12 +1986,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1988: checking for $ac_func\" >&5\n+echo \"configure:1990: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1993 \"configure\"\n+#line 1995 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2012,7 +2014,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2016: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2018: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2039,15 +2041,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:2043: checking stack direction for C alloca\" >&5\n+echo \"configure:2045: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2051 \"configure\"\n+#line 2053 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -2066,7 +2068,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:2070: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2072: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -2091,20 +2093,20 @@ fi\n   esac\n \n   echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:2095: checking for ANSI C header files\" >&5\n+echo \"configure:2097: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2100 \"configure\"\n+#line 2102 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2108: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2110: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2121,7 +2123,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2125 \"configure\"\n+#line 2127 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -2139,7 +2141,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2143 \"configure\"\n+#line 2145 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -2160,7 +2162,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2164 \"configure\"\n+#line 2166 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -2171,7 +2173,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:2175: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2177: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -2195,12 +2197,12 @@ EOF\n fi\n \n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2199: checking for pid_t\" >&5\n+echo \"configure:2201: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2204 \"configure\"\n+#line 2206 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2229,17 +2231,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2233: checking for vfork.h\" >&5\n+echo \"configure:2235: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2238 \"configure\"\n+#line 2240 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2243: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2245: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2264,18 +2266,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2268: checking for working vfork\" >&5\n+echo \"configure:2270: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2274: checking for vfork\" >&5\n+echo \"configure:2276: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2279 \"configure\"\n+#line 2281 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2298,7 +2300,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2302: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2304: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2320,7 +2322,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2324 \"configure\"\n+#line 2326 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2415,7 +2417,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2419: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2421: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2442,19 +2444,19 @@ fi\n   fi\n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:2446: checking for $v\" >&5\n+echo \"configure:2448: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2451 \"configure\"\n+#line 2453 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v; p = &$v;\n ; return 0; }\n EOF\n-if { (eval echo configure:2458: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2460: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -2480,12 +2482,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2484: checking for $ac_func\" >&5\n+echo \"configure:2486: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2489 \"configure\"\n+#line 2491 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2508,7 +2510,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2512: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2514: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else"}, {"sha": "f194e2619b9d0f20def5b5b172118fd435ae10a1", "filename": "libiberty/configure.in", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=9eb4080f6f5275430b5378468ddc820a98e5cfe3", "patch": "@@ -130,9 +130,11 @@ funcs=\"$funcs memcpy\"\n funcs=\"$funcs memmove\"\n funcs=\"$funcs memset\"\n funcs=\"$funcs mkstemps\"\n+funcs=\"$funcs putenv\"\n funcs=\"$funcs random\"\n funcs=\"$funcs rename\"\n funcs=\"$funcs rindex\"\n+funcs=\"$funcs setenv\"\n funcs=\"$funcs sigsetmask\"\n funcs=\"$funcs strcasecmp\"\n funcs=\"$funcs strchr\"\n@@ -161,8 +163,8 @@ checkfuncs=\"getrusage on_exit psignal strerror strsignal sysconf times sbrk\"\n if test \"x\" = \"y\"; then\n   AC_CHECK_FUNCS(asprintf atexit basename bcmp bcopy bzero calloc clock getcwd)\n   AC_CHECK_FUNCS(getpagesize index insque mkstemps memchr memcmp memcpy memmove)\n-  AC_CHECK_FUNCS(memset random rename rindex sigsetmask strcasecmp)\n-  AC_CHECK_FUNCS(strchr strdup strncasecmp strrchr strstr strtod strtol)\n+  AC_CHECK_FUNCS(memset putenv random rename rindex sigsetmask strcasecmp)\n+  AC_CHECK_FUNCS(setenv strchr strdup strncasecmp strrchr strstr strtod strtol)\n   AC_CHECK_FUNCS(strtoul tmpnam vasprintf vfprintf vprintf vsprintf waitpid)\n   AC_DEFINE(HAVE_SYS_ERRLIST)\n   AC_DEFINE(HAVE_SYS_NERR)"}, {"sha": "1860676c5c5cd0ca561de7473cbf5f396d494c90", "filename": "libiberty/putenv.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fputenv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fputenv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fputenv.c?ref=9eb4080f6f5275430b5378468ddc820a98e5cfe3", "patch": "@@ -0,0 +1,66 @@\n+/* Copyright (C) 1991, 1994, 1995, 1996 Free Software Foundation, Inc.\n+   This file based on putenv.c in the GNU C Library.\n+\n+   The GNU C Library is free software; you can redistribute it and/or\n+   modify it under the terms of the GNU Library General Public License as\n+   published by the Free Software Foundation; either version 2 of the\n+   License, or (at your option) any later version.\n+\n+   The GNU C Library is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+   Library General Public License for more details.\n+\n+   You should have received a copy of the GNU Library General Public\n+   License along with the GNU C Library; see the file COPYING.LIB.  If not,\n+   write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n+   Boston, MA 02111-1307, USA.  */\n+\n+#if defined (_AIX) && !defined (__GNUC__)\n+ #pragma alloca\n+#endif\n+\n+#if HAVE_CONFIG_H\n+# include <config.h>\n+#endif\n+\n+#if HAVE_STDLIB_H\n+# include <stdlib.h>\n+#endif\n+#if HAVE_STRING_H\n+# include <string.h>\n+#endif\n+\n+#ifdef HAVE_ALLOCA_H\n+# include <alloca.h>\n+#else\n+# ifndef alloca\n+#  ifdef __GNUC__\n+#   define alloca __builtin_alloca\n+#  else\n+extern char *alloca ();\n+#  endif /* __GNUC__ */\n+# endif /* alloca */\n+#endif /* HAVE_ALLOCA_H */\n+\n+/* Below this point, it's verbatim code from the glibc-2.0 implementation */\n+\n+\n+/* Put STRING, which is of the form \"NAME=VALUE\", in the environment.  */\n+int\n+putenv (string)\n+     const char *string;\n+{\n+  const char *const name_end = strchr (string, '=');\n+\n+  if (name_end)\n+    {\n+      char *name = alloca (name_end - string + 1);\n+      memcpy (name, string, name_end - string);\n+      name[name_end - string] = '\\0';\n+      return setenv (name, name_end + 1, 1);\n+    }\n+\n+  unsetenv (string);\n+  return 0;\n+}"}, {"sha": "0ecc2ca3ede1ac7244ac5ba7009b0cfaa4f06aa3", "filename": "libiberty/setenv.c", "status": "added", "additions": 159, "deletions": 0, "changes": 159, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fsetenv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eb4080f6f5275430b5378468ddc820a98e5cfe3/libiberty%2Fsetenv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fsetenv.c?ref=9eb4080f6f5275430b5378468ddc820a98e5cfe3", "patch": "@@ -0,0 +1,159 @@\n+/* Copyright (C) 1992, 1995, 1996, 1997 Free Software Foundation, Inc.\n+   This file based on setenv.c in the GNU C Library.\n+\n+   The GNU C Library is free software; you can redistribute it and/or\n+   modify it under the terms of the GNU Library General Public License as\n+   published by the Free Software Foundation; either version 2 of the\n+   License, or (at your option) any later version.\n+\n+   The GNU C Library is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+   Library General Public License for more details.\n+\n+   You should have received a copy of the GNU Library General Public\n+   License along with the GNU C Library; see the file COPYING.LIB.  If not,\n+   write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n+   Boston, MA 02111-1307, USA.  */\n+\n+#if HAVE_CONFIG_H\n+# include <config.h>\n+#endif\n+\n+#include <errno.h>\n+#if !defined(errno) && !defined(HAVE_ERRNO_DECL)\n+extern int errno;\n+#endif\n+#define __set_errno(ev) ((errno) = (ev))\n+\n+#if HAVE_STDLIB_H\n+# include <stdlib.h>\n+#endif\n+#if HAVE_STRING_H\n+# include <string.h>\n+#endif\n+#if HAVE_UNISTD_H\n+# include <unistd.h>\n+#endif\n+\n+#define __environ\tenviron\n+#ifndef HAVE_ENVIRON_DECL\n+extern char **environ;\n+#endif\n+\n+/* LOCK and UNLOCK are defined as no-ops.  This makes the libiberty\n+ * implementation MT-Unsafe. */\n+#define LOCK\n+#define UNLOCK\n+\n+/* Below this point, it's verbatim code from the glibc-2.0 implementation */\n+\n+/* If this variable is not a null pointer we allocated the current\n+   environment.  */\n+static char **last_environ;\n+\n+\n+int\n+setenv (name, value, replace)\n+     const char *name;\n+     const char *value;\n+     int replace;\n+{\n+  register char **ep;\n+  register size_t size;\n+  const size_t namelen = strlen (name);\n+  const size_t vallen = strlen (value) + 1;\n+\n+  LOCK;\n+\n+  size = 0;\n+  if (__environ != NULL)\n+    for (ep = __environ; *ep != NULL; ++ep)\n+      if (!strncmp (*ep, name, namelen) && (*ep)[namelen] == '=')\n+\tbreak;\n+      else\n+\t++size;\n+\n+  if (__environ == NULL || *ep == NULL)\n+    {\n+      char **new_environ;\n+      if (__environ == last_environ && __environ != NULL)\n+\t/* We allocated this space; we can extend it.  */\n+\tnew_environ = (char **) realloc (last_environ,\n+\t\t\t\t\t (size + 2) * sizeof (char *));\n+      else\n+\tnew_environ = (char **) malloc ((size + 2) * sizeof (char *));\n+\n+      if (new_environ == NULL)\n+\t{\n+\t  UNLOCK;\n+\t  return -1;\n+\t}\n+\n+      new_environ[size] = malloc (namelen + 1 + vallen);\n+      if (new_environ[size] == NULL)\n+\t{\n+\t  free ((char *) new_environ);\n+\t  __set_errno (ENOMEM);\n+\t  UNLOCK;\n+\t  return -1;\n+\t}\n+\n+      if (__environ != last_environ)\n+\tmemcpy ((char *) new_environ, (char *) __environ,\n+\t\tsize * sizeof (char *));\n+\n+      memcpy (new_environ[size], name, namelen);\n+      new_environ[size][namelen] = '=';\n+      memcpy (&new_environ[size][namelen + 1], value, vallen);\n+\n+      new_environ[size + 1] = NULL;\n+\n+      last_environ = __environ = new_environ;\n+    }\n+  else if (replace)\n+    {\n+      size_t len = strlen (*ep);\n+      if (len + 1 < namelen + 1 + vallen)\n+\t{\n+\t  /* The existing string is too short; malloc a new one.  */\n+\t  char *new = malloc (namelen + 1 + vallen);\n+\t  if (new == NULL)\n+\t    {\n+\t      UNLOCK;\n+\t      return -1;\n+\t    }\n+\t  *ep = new;\n+\t}\n+      memcpy (*ep, name, namelen);\n+      (*ep)[namelen] = '=';\n+      memcpy (&(*ep)[namelen + 1], value, vallen);\n+    }\n+\n+  UNLOCK;\n+\n+  return 0;\n+}\n+\n+void\n+unsetenv (name)\n+     const char *name;\n+{\n+  const size_t len = strlen (name);\n+  char **ep;\n+\n+  LOCK;\n+\n+  for (ep = __environ; *ep; ++ep)\n+    if (!strncmp (*ep, name, len) && (*ep)[len] == '=')\n+      {\n+\t/* Found it.  Remove this pointer by moving later ones back.  */\n+\tchar **dp = ep;\n+\tdo\n+\t  dp[0] = dp[1];\n+\twhile (*dp++);\n+\t/* Continue the loop in case NAME appears again.  */\n+      }\n+\n+  UNLOCK;\n+}"}]}