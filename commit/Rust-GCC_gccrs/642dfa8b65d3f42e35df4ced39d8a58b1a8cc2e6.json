{"sha": "642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQyZGZhOGI2NWQzZjQyZTM1ZGY0Y2VkMzlkOGE1OGIxYThjYzJlNg==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.co.uk", "date": "2000-09-15T16:16:33Z"}, "committer": {"name": "Bernd Schmidt", "email": "crux@gcc.gnu.org", "date": "2000-09-15T16:16:33Z"}, "message": "Make libcall blocks for truncations\n\nFrom-SVN: r36434", "tree": {"sha": "672a46405db5845dbc86056fe55f582523be7c77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/672a46405db5845dbc86056fe55f582523be7c77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6/comments", "author": null, "committer": null, "parents": [{"sha": "aff2c2d3af3233dfb2d237341f2fd8612dc61391", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aff2c2d3af3233dfb2d237341f2fd8612dc61391", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aff2c2d3af3233dfb2d237341f2fd8612dc61391"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "147768eaca2654204fa88cfb898c47f833143c0d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6", "patch": "@@ -2,6 +2,8 @@\n \n \t* optabs.c (emit_libcall_block): If target is a user variable,\n \tcopy to a temporary first.\n+\t* expr.c (convert_move): When generating a libcall, make a libcall\n+\tblock.\n \n 2000-09-15  Richard Henderson  <rth@cygnus.com>\n "}, {"sha": "034c132a6c6ce8b205e9fce39736133959bd6d32", "filename": "gcc/expr.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=642dfa8b65d3f42e35df4ced39d8a58b1a8cc2e6", "patch": "@@ -563,7 +563,7 @@ convert_move (to, from, unsignedp)\n \n   if (to_real)\n     {\n-      rtx value;\n+      rtx value, insns;\n \n       if (GET_MODE_BITSIZE (from_mode) < GET_MODE_BITSIZE (to_mode))\n \t{\n@@ -803,9 +803,13 @@ convert_move (to, from, unsignedp)\n \t/* This conversion is not implemented yet.  */\n \tabort ();\n \n+      start_sequence ();\n       value = emit_library_call_value (libcall, NULL_RTX, 1, to_mode,\n \t\t\t\t       1, from, from_mode);\n-      emit_move_insn (to, value);\n+      insns = get_insns ();\n+      end_sequence ();\n+      emit_libcall_block (insns, to, value, gen_rtx_FLOAT_TRUNCATE (to_mode,\n+\t\t\t\t\t\t\t\t    from));\n       return;\n     }\n "}]}