{"sha": "f80565da33598c4dbc70ea9c83272ed6bfff7a0d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjgwNTY1ZGEzMzU5OGM0ZGJjNzBlYTljODMyNzJlZDZiZmZmN2EwZA==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2020-11-23T20:06:11Z"}, "committer": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2020-11-23T20:06:11Z"}, "message": "Adjust rtx_costs for h8300\n\nSo the primary purpose of this patch is to make it easier to write tests for\nremoval of useless test/compare insns on the H8.\n\nIn simplest terms the costing model in the H8 port tends to encourage changing\nsomething like:\n\n  x = y + 4;\n  if (x == 0)\n\ninto:\n\n  x = y + 4;\n  if (y == -4)\n\nThis is a marginal de-optimization on the H8.  So fixing it makes the code\never-so-slightly better in isolation.   Fixing this also improves redundant\ntest/compare elimination and makes writing tests for redundant test/compare\nelimination far easier.\n\ngcc/\n\t* config/h8300/h8300.c (h8300_rtx_costs): Handle the various\n\tcomparison rtx codes too.", "tree": {"sha": "fb3c9af25bc1472fbe66253e09eb2995c835a441", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb3c9af25bc1472fbe66253e09eb2995c835a441"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f80565da33598c4dbc70ea9c83272ed6bfff7a0d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f80565da33598c4dbc70ea9c83272ed6bfff7a0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f80565da33598c4dbc70ea9c83272ed6bfff7a0d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f80565da33598c4dbc70ea9c83272ed6bfff7a0d/comments", "author": null, "committer": null, "parents": [{"sha": "53a90650663e59948f86505660604b5769cf808c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53a90650663e59948f86505660604b5769cf808c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53a90650663e59948f86505660604b5769cf808c"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "09e9cbfb838d6c3edbd5ef29c062a780288ac6e0", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f80565da33598c4dbc70ea9c83272ed6bfff7a0d/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f80565da33598c4dbc70ea9c83272ed6bfff7a0d/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=f80565da33598c4dbc70ea9c83272ed6bfff7a0d", "patch": "@@ -1199,6 +1199,16 @@ h8300_rtx_costs (rtx x, machine_mode mode ATTRIBUTE_UNUSED, int outer_code,\n       return true;\n \n     case COMPARE:\n+    case NE:\n+    case EQ:\n+    case GE:\n+    case GT:\n+    case LE:\n+    case LT:\n+    case GEU:\n+    case GTU:\n+    case LEU:\n+    case LTU:\n       if (XEXP (x, 1) == const0_rtx)\n \t*total = 0;\n       return false;"}]}