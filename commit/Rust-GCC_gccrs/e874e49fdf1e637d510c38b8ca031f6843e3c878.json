{"sha": "e874e49fdf1e637d510c38b8ca031f6843e3c878", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTg3NGU0OWZkZjFlNjM3ZDUxMGMzOGI4Y2EwMzFmNjg0M2UzYzg3OA==", "commit": {"author": {"name": "Jie Zhang", "email": "jie.zhang@analog.com", "date": "2007-08-29T09:13:16Z"}, "committer": {"name": "Jie Zhang", "email": "jiez@gcc.gnu.org", "date": "2007-08-29T09:13:16Z"}, "message": "bfin.opt (minline-plt): Add.\n\n\t* config/bfin/bfin.opt (minline-plt): Add.\n\t* config/bfin/bfin.c (bfin_expand_call): Inline PLT when emit\n\tcall to global functions.\n\t* doc/invoke.texi (Option Summary): Mention -minline-plt.\n\t(Blackfin Options): Document -minline-plt.\n\nFrom-SVN: r127886", "tree": {"sha": "d03ac27538629c3e70d0e5cbc738847ef8fe0f59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d03ac27538629c3e70d0e5cbc738847ef8fe0f59"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e874e49fdf1e637d510c38b8ca031f6843e3c878", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e874e49fdf1e637d510c38b8ca031f6843e3c878", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e874e49fdf1e637d510c38b8ca031f6843e3c878", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e874e49fdf1e637d510c38b8ca031f6843e3c878/comments", "author": {"login": "jiez-adi", "id": 103514486, "node_id": "U_kgDOBiuBdg", "avatar_url": "https://avatars.githubusercontent.com/u/103514486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiez-adi", "html_url": "https://github.com/jiez-adi", "followers_url": "https://api.github.com/users/jiez-adi/followers", "following_url": "https://api.github.com/users/jiez-adi/following{/other_user}", "gists_url": "https://api.github.com/users/jiez-adi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiez-adi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiez-adi/subscriptions", "organizations_url": "https://api.github.com/users/jiez-adi/orgs", "repos_url": "https://api.github.com/users/jiez-adi/repos", "events_url": "https://api.github.com/users/jiez-adi/events{/privacy}", "received_events_url": "https://api.github.com/users/jiez-adi/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1509835994cc7520387a2e8b81a6373a734329fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1509835994cc7520387a2e8b81a6373a734329fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1509835994cc7520387a2e8b81a6373a734329fb"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "49c6defdc0690562eb5954e69eff893d47b75786", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e874e49fdf1e637d510c38b8ca031f6843e3c878", "patch": "@@ -1,3 +1,11 @@\n+2007-08-28  Jie Zhang  <jie.zhang@analog.com>\n+\n+\t* config/bfin/bfin.opt (minline-plt): Add.\n+\t* config/bfin/bfin.c (bfin_expand_call): Inline PLT when emit\n+\tcall to global functions.\n+\t* doc/invoke.texi (Option Summary): Mention -minline-plt.\n+\t(Blackfin Options): Document -minline-plt.\n+\n 2007-08-28  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* config/m68k/m68k.c (m68k_get_function_kind): Assert we're never"}, {"sha": "b34e130628422420441b24d1878786f19d551c27", "filename": "gcc/config/bfin/bfin.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2Fconfig%2Fbfin%2Fbfin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2Fconfig%2Fbfin%2Fbfin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.c?ref=e874e49fdf1e637d510c38b8ca031f6843e3c878", "patch": "@@ -1880,7 +1880,10 @@ bfin_expand_call (rtx retval, rtx fnaddr, rtx callarg1, rtx cookie, int sibcall)\n   if (TARGET_FDPIC)\n     {\n       if (GET_CODE (callee) != SYMBOL_REF\n-\t  || bfin_longcall_p (callee, INTVAL (cookie)))\n+\t  || bfin_longcall_p (callee, INTVAL (cookie))\n+\t  || (GET_CODE (callee) == SYMBOL_REF\n+\t      && !SYMBOL_REF_LOCAL_P (callee)\n+\t      && TARGET_INLINE_PLT))\n \t{\n \t  rtx addr = callee;\n \t  if (! address_operand (addr, Pmode))"}, {"sha": "56d37b54a9345b832cf1a237e2e20081f8681cc0", "filename": "gcc/config/bfin/bfin.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2Fconfig%2Fbfin%2Fbfin.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2Fconfig%2Fbfin%2Fbfin.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.opt?ref=e874e49fdf1e637d510c38b8ca031f6843e3c878", "patch": "@@ -72,6 +72,10 @@ mfdpic\n Target Report Mask(FDPIC)\n Enable Function Descriptor PIC mode\n \n+minline-plt\n+Target Report Mask(INLINE_PLT)\n+Enable inlining of PLT in function calls\n+\n mstack-check-l1\n Target Report Mask(STACK_CHECK_L1)\n Do stack checking using bounds in L1 scratch memory"}, {"sha": "1c12d207b491f3f9f4e41a7f3921d272992c44de", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e874e49fdf1e637d510c38b8ca031f6843e3c878/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=e874e49fdf1e637d510c38b8ca031f6843e3c878", "patch": "@@ -450,7 +450,7 @@ Objective-C and Objective-C++ Dialects}.\n -mstack-check-l1  -mid-shared-library  -mno-id-shared-library @gol\n -mshared-library-id=@var{n}  -mleaf-id-shared-library @gol\n -mno-leaf-id-shared-library  -msep-data  -mno-sep-data  -mlong-calls @gol\n--mno-long-calls -mfast-fp}\n+-mno-long-calls -mfast-fp -minline-plt}\n \n @emph{CRIS Options}\n @gccoptlist{-mcpu=@var{cpu}  -march=@var{cpu}  -mtune=@var{cpu} @gol\n@@ -8618,6 +8618,11 @@ function calls via function pointers.\n Link with the fast floating-point library. This library relaxes some of\n the IEEE floating-point standard's rules for checking inputs against\n Not-a-Number (NAN), in the interest of performance.\n+\n+@item -minline-plt\n+@opindex minline-plt\n+Enable inlining of PLT entries in function calls to functions that are\n+not known to bind locally.  It has no effect without @option{-mfdpic}.\n @end table\n \n @node CRIS Options"}]}