{"sha": "fe660d7bfe8ae31c03f500af99c1a614438d0198", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmU2NjBkN2JmZThhZTMxYzAzZjUwMGFmOTljMWE2MTQ0MzhkMDE5OA==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2011-04-12T09:12:58Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2011-04-12T09:12:58Z"}, "message": "tree-inline.c (tree_function_versioning): Call cgraph_get_node instead of cgraph_node and assert it does not return NULL.\n\n2011-04-12  Martin Jambor  <mjambor@suse.cz>\n\n\t* tree-inline.c (tree_function_versioning): Call cgraph_get_node\n\tinstead of cgraph_node and assert it does not return NULL.\n\t* lto-streamer-in.c (lto_read_body): Likewise.\n\t* omp-low.c (new_omp_context): Likewise.\n\t(create_task_copyfn): Likewise.\n\t* tree-emutls.c (lower_emutls_function_body): Likewise.\n\t* matrix-reorg.c (transform_allocation_sites): Likewise.\n\nFrom-SVN: r172306", "tree": {"sha": "4f92a1e1c4927ceefc0819510aeb42d32a9ed51a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f92a1e1c4927ceefc0819510aeb42d32a9ed51a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe660d7bfe8ae31c03f500af99c1a614438d0198", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe660d7bfe8ae31c03f500af99c1a614438d0198", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe660d7bfe8ae31c03f500af99c1a614438d0198", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe660d7bfe8ae31c03f500af99c1a614438d0198/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "237526dd7d236748f0f9cfba83e538bd0a571201", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/237526dd7d236748f0f9cfba83e538bd0a571201", "html_url": "https://github.com/Rust-GCC/gccrs/commit/237526dd7d236748f0f9cfba83e538bd0a571201"}], "stats": {"total": 34, "additions": 26, "deletions": 8}, "files": [{"sha": "445317d1befee587da1497399d5de93e9040e361", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fe660d7bfe8ae31c03f500af99c1a614438d0198", "patch": "@@ -1,3 +1,13 @@\n+2011-04-12  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* tree-inline.c (tree_function_versioning): Call cgraph_get_node\n+\tinstead of cgraph_node and assert it does not return NULL.\n+\t* lto-streamer-in.c (lto_read_body): Likewise.\n+\t* omp-low.c (new_omp_context): Likewise.\n+\t(create_task_copyfn): Likewise.\n+\t* tree-emutls.c (lower_emutls_function_body): Likewise.\n+\t* matrix-reorg.c (transform_allocation_sites): Likewise.\n+\n 2011-04-12  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/48552"}, {"sha": "c95a8e11f956648824cb36ccf7d7de8c739527c8", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=fe660d7bfe8ae31c03f500af99c1a614438d0198", "patch": "@@ -1446,8 +1446,9 @@ lto_read_body (struct lto_file_decl_data *file_data, tree fn_decl,\n     {\n       struct function *fn = DECL_STRUCT_FUNCTION (fn_decl);\n       struct lto_in_decl_state *decl_state;\n-      struct cgraph_node *node = cgraph_node (fn_decl);\n+      struct cgraph_node *node = cgraph_get_node (fn_decl);\n \n+      gcc_checking_assert (node);\n       push_cfun (fn);\n       init_tree_ssa (fn);\n "}, {"sha": "44daa27c1f7cb7e71e37e391e9f86886b0691b4b", "filename": "gcc/matrix-reorg.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Fmatrix-reorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Fmatrix-reorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatrix-reorg.c?ref=fe660d7bfe8ae31c03f500af99c1a614438d0198", "patch": "@@ -2169,7 +2169,8 @@ transform_allocation_sites (void **slot, void *data ATTRIBUTE_UNUSED)\n   update_ssa (TODO_update_ssa);\n   /* Replace the malloc size argument in the malloc of level 0 to be\n      the size of all the dimensions.  */\n-  c_node = cgraph_node (mi->allocation_function_decl);\n+  c_node = cgraph_get_node (mi->allocation_function_decl);\n+  gcc_checking_assert (c_node);\n   old_size_0 = gimple_call_arg (call_stmt_0, 0);\n   tmp = force_gimple_operand_gsi (&gsi, mi->dimension_size[0], true,\n \t\t\t\t  NULL, true, GSI_SAME_STMT);\n@@ -2218,7 +2219,8 @@ transform_allocation_sites (void **slot, void *data ATTRIBUTE_UNUSED)\n       if (!mi->free_stmts[i].stmt)\n \tcontinue;\n \n-      c_node = cgraph_node (mi->free_stmts[i].func);\n+      c_node = cgraph_get_node (mi->free_stmts[i].func);\n+      gcc_checking_assert (c_node);\n       gcc_assert (is_gimple_call (mi->free_stmts[i].stmt));\n       e = cgraph_edge (c_node, mi->free_stmts[i].stmt);\n       gcc_assert (e);"}, {"sha": "8b2412cca1a5931845753e8ae473ce539f19b914", "filename": "gcc/omp-low.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Fomp-low.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Fomp-low.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fomp-low.c?ref=fe660d7bfe8ae31c03f500af99c1a614438d0198", "patch": "@@ -1209,7 +1209,8 @@ new_omp_context (gimple stmt, omp_context *outer_ctx)\n     {\n       ctx->cb.src_fn = current_function_decl;\n       ctx->cb.dst_fn = current_function_decl;\n-      ctx->cb.src_node = cgraph_node (current_function_decl);\n+      ctx->cb.src_node = cgraph_get_node (current_function_decl);\n+      gcc_checking_assert (ctx->cb.src_node);\n       ctx->cb.dst_node = ctx->cb.src_node;\n       ctx->cb.src_cfun = cfun;\n       ctx->cb.copy_decl = omp_copy_decl;\n@@ -6263,7 +6264,8 @@ create_task_copyfn (gimple task_stmt, omp_context *ctx)\n       memset (&tcctx, '\\0', sizeof (tcctx));\n       tcctx.cb.src_fn = ctx->cb.src_fn;\n       tcctx.cb.dst_fn = child_fn;\n-      tcctx.cb.src_node = cgraph_node (tcctx.cb.src_fn);\n+      tcctx.cb.src_node = cgraph_get_node (tcctx.cb.src_fn);\n+      gcc_checking_assert (tcctx.cb.src_node);\n       tcctx.cb.dst_node = tcctx.cb.src_node;\n       tcctx.cb.src_cfun = ctx->cb.src_cfun;\n       tcctx.cb.copy_decl = task_copyfn_copy_decl;"}, {"sha": "cc01fb3943841ca39d0110c4a7fba8d29f9c699d", "filename": "gcc/tree-emutls.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Ftree-emutls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Ftree-emutls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-emutls.c?ref=fe660d7bfe8ae31c03f500af99c1a614438d0198", "patch": "@@ -619,7 +619,8 @@ lower_emutls_function_body (struct cgraph_node *node)\n \n   d.cfun_node = node;\n   d.builtin_decl = built_in_decls[BUILT_IN_EMUTLS_GET_ADDRESS];\n-  d.builtin_node = cgraph_node (d.builtin_decl);\n+  d.builtin_node = cgraph_get_node (d.builtin_decl);\n+  gcc_checking_assert (d.builtin_node);\n \n   FOR_EACH_BB (d.bb)\n     {"}, {"sha": "0ba8e4e84bb20f2fa71a3f66079f68aa5538d5c9", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe660d7bfe8ae31c03f500af99c1a614438d0198/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=fe660d7bfe8ae31c03f500af99c1a614438d0198", "patch": "@@ -5001,8 +5001,10 @@ tree_function_versioning (tree old_decl, tree new_decl,\n \t      && TREE_CODE (new_decl) == FUNCTION_DECL);\n   DECL_POSSIBLY_INLINED (old_decl) = 1;\n \n-  old_version_node = cgraph_node (old_decl);\n-  new_version_node = cgraph_node (new_decl);\n+  old_version_node = cgraph_get_node (old_decl);\n+  gcc_checking_assert (old_version_node);\n+  new_version_node = cgraph_get_node (new_decl);\n+  gcc_checking_assert (new_version_node);\n \n   /* Output the inlining info for this abstract function, since it has been\n      inlined.  If we don't do this now, we can lose the information about the"}]}