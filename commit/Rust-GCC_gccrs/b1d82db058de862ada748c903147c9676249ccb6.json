{"sha": "b1d82db058de862ada748c903147c9676249ccb6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjFkODJkYjA1OGRlODYyYWRhNzQ4YzkwMzE0N2M5Njc2MjQ5Y2NiNg==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2009-08-10T07:16:08Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2009-08-10T07:16:08Z"}, "message": "re PR c++/40866 (ICE in create_tmp_var, at gimplify.c:504)\n\n2009-08-10  Dodji Seketeli  <dodji@redhat.com>\n\ngcc/ChangeLog:\n\tPR c++/40866\n\t* tree-inline.c (copy_statement_list): The resulting copy shouldn't\n\tloose the original type of the statement list.\n\ngcc/testsuite/ChangeLog:\n\tPR c++/40866\n\t* g++.dg/expr/stmt-expr-1.C: New test.\n\nFrom-SVN: r150615", "tree": {"sha": "312390e4e32b0a73b1c7dd7e92037b77a86af30b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/312390e4e32b0a73b1c7dd7e92037b77a86af30b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b1d82db058de862ada748c903147c9676249ccb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1d82db058de862ada748c903147c9676249ccb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1d82db058de862ada748c903147c9676249ccb6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1d82db058de862ada748c903147c9676249ccb6/comments", "author": null, "committer": null, "parents": [{"sha": "5e3fef6ce6f71d750881dcaaacb4f7a6b1ab70d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e3fef6ce6f71d750881dcaaacb4f7a6b1ab70d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e3fef6ce6f71d750881dcaaacb4f7a6b1ab70d2"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "026d1768f6883e114dc1e1b3d8feefe0d1ea78a6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1d82db058de862ada748c903147c9676249ccb6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1d82db058de862ada748c903147c9676249ccb6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b1d82db058de862ada748c903147c9676249ccb6", "patch": "@@ -1,3 +1,9 @@\n+2009-08-10  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/40866\n+\t* tree-inline.c (copy_statement_list): The resulting copy shouldn't\n+\tloose the original type of the statement list.\n+\n 2009-08-09  Douglas B Rupp  <rupp@gnat.com>\n \n \t* config/alpha/alpha.c: Include libfuncs.h"}, {"sha": "0d67a0531c8aabcc8d37177aac29d74d4836320b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1d82db058de862ada748c903147c9676249ccb6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1d82db058de862ada748c903147c9676249ccb6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b1d82db058de862ada748c903147c9676249ccb6", "patch": "@@ -1,3 +1,8 @@\n+2009-08-10  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/40866\n+\t* g++.dg/expr/stmt-expr-1.C: New test.\n+\n 2009-08-09  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/41016"}, {"sha": "2c50e35dca8a206fc44db90668e412b109168da5", "filename": "gcc/testsuite/g++.dg/expr/stmt-expr-1.C", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1d82db058de862ada748c903147c9676249ccb6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fstmt-expr-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1d82db058de862ada748c903147c9676249ccb6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fstmt-expr-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fstmt-expr-1.C?ref=b1d82db058de862ada748c903147c9676249ccb6", "patch": "@@ -0,0 +1,36 @@\n+// Contributed by Dodji Seketeli <dodji@redhat.com>\n+// Origin PR c++/40866\n+// { dg-options \"-std=gnu++98\" }\n+// { dg-do \"compile\" }\n+\n+template <typename T> class QForeachContainer {\n+public:\n+    QForeachContainer();\n+    int brk;\n+    typename T::const_iterator i;\n+};\n+\n+template <typename T> class QList {\n+public:\n+    class const_iterator {\n+    public:\n+        const_iterator(const const_iterator &o);\n+        const_iterator &operator++();\n+    };\n+};\n+\n+class QAction;\n+class QWidget {\n+public:\n+    QList<QAction*> actions() const;\n+};\n+class myDialog : public QWidget {\n+    myDialog();\n+};\n+\n+myDialog::myDialog()\n+{\n+    QForeachContainer<__typeof__(actions())> _container_;\n+    ({++_container_.brk; ++_container_.i;});\n+}\n+"}, {"sha": "3b07aaa36ba4024a9553b7f4a297928454daf54c", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1d82db058de862ada748c903147c9676249ccb6/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1d82db058de862ada748c903147c9676249ccb6/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=b1d82db058de862ada748c903147c9676249ccb6", "patch": "@@ -600,6 +600,7 @@ copy_statement_list (tree *tp)\n   new_tree = alloc_stmt_list ();\n   ni = tsi_start (new_tree);\n   oi = tsi_start (*tp);\n+  TREE_TYPE (new_tree) = TREE_TYPE (*tp);\n   *tp = new_tree;\n \n   for (; !tsi_end_p (oi); tsi_next (&oi))"}]}