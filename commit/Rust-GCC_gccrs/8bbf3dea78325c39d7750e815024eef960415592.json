{"sha": "8bbf3dea78325c39d7750e815024eef960415592", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJiZjNkZWE3ODMyNWMzOWQ3NzUwZTgxNTAyNGVlZjk2MDQxNTU5Mg==", "commit": {"author": {"name": "Hongtao Liu", "email": "hongtao.liu@intel.com", "date": "2019-10-26T02:40:19Z"}, "committer": {"name": "Hongtao Liu", "email": "liuhongt@gcc.gnu.org", "date": "2019-10-26T02:40:19Z"}, "message": "Adjust predicates and constraints of scalar insns.\n\nChangelog\n\ngcc/\n\t* config/i386/sse.md\n\t(<sse>_vm<plusminus_insn><mode>3<mask_scalar_name><round_scalar_name>,\n\t<sse>_vm<multdiv_mnemonic><mode>3<mask_scalar_name><round_scalar_name>,\n\t<sse>_vmsqrt<mode>2<mask_scalar_name><round_scalar_name>,\n\t<sse>_vm<code><mode>3<mask_scalar_name><round_saeonly_scalar_name>,\n\t<sse>_vmmaskcmp<mode>3):\n\tChange predicates from vector_operand to nonimmediate_operand,\n\tconstraints xBm to xm, since scalar operations don't need\n\tmemory address alignment.\n\t(avx512f_vmcmp<mode>3<round_saeonly_name>,\n\tavx512f_vmcmp<mode>3_mask<round_saeonly_name>): Replace\n\tround_saeonly_nimm_predicate with\n\tround_saeonly_nimm_scalar_predicate.\n\t(fmai_vmfmadd_<mode><round_name>, fmai_vmfmsub_<mode><round_name>,\n\tfmai_vmfnmadd_<mode><round_name>,fmai_vmfnmsub_<mode><round_name>,\n\t*fmai_fmadd_<mode>, *fmai_fmsub_<mode>,\n\t*fmai_fnmadd_<mode><round_name>, *fmai_fnmsub_<mode><round_name>,\n\tavx512f_vmfmadd_<mode>_mask3<round_name>,\n\tavx512f_vmfmadd_<mode>_maskz_1<round_name>,\n\t*avx512f_vmfmsub_<mode>_mask<round_name>,\n\tavx512f_vmfmsub_<mode>_mask3<round_name>,\n\t*avx512f_vmfmsub_<mode>_maskz_1<round_name>,\n\t*avx512f_vmfnmadd_<mode>_mask<round_name>,\n\t*avx512f_vmfnmadd_<mode>_mask3<round_name>,\n\t*avx512f_vmfnmadd_<mode>_maskz_1<round_name>,\n\t*avx512f_vmfnmsub_<mode>_mask<round_name>,\n\t*avx512f_vmfnmsub_<mode>_mask3<round_name>,\n\t*avx512f_vmfnmsub_<mode>_maskz_1<round_name>,\n\tcvtusi2<ssescalarmodesuffix>32<round_name>,\n\tcvtusi2<ssescalarmodesuffix>64<round_name>, ): Replace\n\tround_nimm_predicate with round_nimm_scalr_predicate.\n\t(avx512f_sfixupimm<mode><sd_maskz_name><round_saeonly_name>,\n\tavx512f_sfixupimm<mode>_mask<round_saeonly_name>,\n\tavx512er_vmrcp28<mode><round_saeonly_name>,\n\tavx512er_vmrsqrt28<mode><round_saeonly_name>,\n\t): Replace round_saeonly_nimm_predicate with\n\tround_saeonly_nimm_scalar_predicate.\n\t(avx512dq_vmfpclass<mode><mask_scalar_merge_name>): Replace\n\tvector_operand with nonimmediate_operand.\n\t* config/i386/subst.md (round_scalar_nimm_predicate,\n\tround_saeonly_scalar_nimm_predicate): Replace\n\tvector_operand with nonimmediate_operand.\n\nFrom-SVN: r277470", "tree": {"sha": "7cbd19b6deb34d157c7af30b9da0f4ee81c0e8c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7cbd19b6deb34d157c7af30b9da0f4ee81c0e8c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bbf3dea78325c39d7750e815024eef960415592", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bbf3dea78325c39d7750e815024eef960415592", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bbf3dea78325c39d7750e815024eef960415592", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bbf3dea78325c39d7750e815024eef960415592/comments", "author": {"login": "algebra84", "id": 22926165, "node_id": "MDQ6VXNlcjIyOTI2MTY1", "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algebra84", "html_url": "https://github.com/algebra84", "followers_url": "https://api.github.com/users/algebra84/followers", "following_url": "https://api.github.com/users/algebra84/following{/other_user}", "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}", "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions", "organizations_url": "https://api.github.com/users/algebra84/orgs", "repos_url": "https://api.github.com/users/algebra84/repos", "events_url": "https://api.github.com/users/algebra84/events{/privacy}", "received_events_url": "https://api.github.com/users/algebra84/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "011464ede0edbcb5512bf24374fe8805f654d82e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/011464ede0edbcb5512bf24374fe8805f654d82e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/011464ede0edbcb5512bf24374fe8805f654d82e"}], "stats": {"total": 157, "additions": 101, "deletions": 56}, "files": [{"sha": "3dc1b7c08a3103cf8a13bab3785102654e281e43", "filename": "gcc/ChangeLog", "status": "modified", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bbf3dea78325c39d7750e815024eef960415592/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bbf3dea78325c39d7750e815024eef960415592/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8bbf3dea78325c39d7750e815024eef960415592", "patch": "@@ -1,3 +1,48 @@\n+2019-10-26  Hongtao Liu  <hongtao.liu@intel.com>\n+\n+\t* config/i386/sse.md\n+\t(<sse>_vm<plusminus_insn><mode>3<mask_scalar_name><round_scalar_name>,\n+\t<sse>_vm<multdiv_mnemonic><mode>3<mask_scalar_name><round_scalar_name>,\n+\t<sse>_vmsqrt<mode>2<mask_scalar_name><round_scalar_name>,\n+\t<sse>_vm<code><mode>3<mask_scalar_name><round_saeonly_scalar_name>,\n+\t<sse>_vmmaskcmp<mode>3):\n+\tChange predicates from vector_operand to nonimmediate_operand,\n+\tconstraints xBm to xm, since scalar operations don't need\n+\tmemory address alignment.\n+\t(avx512f_vmcmp<mode>3<round_saeonly_name>,\n+\tavx512f_vmcmp<mode>3_mask<round_saeonly_name>): Replace\n+\tround_saeonly_nimm_predicate with\n+\tround_saeonly_nimm_scalar_predicate.\n+\t(fmai_vmfmadd_<mode><round_name>, fmai_vmfmsub_<mode><round_name>,\n+\tfmai_vmfnmadd_<mode><round_name>,fmai_vmfnmsub_<mode><round_name>,\n+\t*fmai_fmadd_<mode>, *fmai_fmsub_<mode>,\n+\t*fmai_fnmadd_<mode><round_name>, *fmai_fnmsub_<mode><round_name>,\n+\tavx512f_vmfmadd_<mode>_mask3<round_name>,\n+\tavx512f_vmfmadd_<mode>_maskz_1<round_name>,\n+\t*avx512f_vmfmsub_<mode>_mask<round_name>,\n+\tavx512f_vmfmsub_<mode>_mask3<round_name>,\n+\t*avx512f_vmfmsub_<mode>_maskz_1<round_name>,\n+\t*avx512f_vmfnmadd_<mode>_mask<round_name>,\n+\t*avx512f_vmfnmadd_<mode>_mask3<round_name>,\n+\t*avx512f_vmfnmadd_<mode>_maskz_1<round_name>,\n+\t*avx512f_vmfnmsub_<mode>_mask<round_name>,\n+\t*avx512f_vmfnmsub_<mode>_mask3<round_name>,\n+\t*avx512f_vmfnmsub_<mode>_maskz_1<round_name>,\n+\tcvtusi2<ssescalarmodesuffix>32<round_name>,\n+\tcvtusi2<ssescalarmodesuffix>64<round_name>, ): Replace\n+\tround_nimm_predicate with round_nimm_scalr_predicate.\n+\t(avx512f_sfixupimm<mode><sd_maskz_name><round_saeonly_name>,\n+\tavx512f_sfixupimm<mode>_mask<round_saeonly_name>,\n+\tavx512er_vmrcp28<mode><round_saeonly_name>,\n+\tavx512er_vmrsqrt28<mode><round_saeonly_name>,\n+\t): Replace round_saeonly_nimm_predicate with\n+\tround_saeonly_nimm_scalar_predicate.\n+\t(avx512dq_vmfpclass<mode><mask_scalar_merge_name>): Replace\n+\tvector_operand with nonimmediate_operand.\n+\t* config/i386/subst.md (round_scalar_nimm_predicate,\n+\tround_saeonly_scalar_nimm_predicate): Replace\n+\tvector_operand with nonimmediate_operand.\n+\n 2019-10-26  Hongtao Liu  <hongtao.liu@intel.com>\n \n \tPR target/89071"}, {"sha": "077c1d6da1de9feef9889124dfb3b3e6c12002a6", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 54, "deletions": 54, "changes": 108, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bbf3dea78325c39d7750e815024eef960415592/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bbf3dea78325c39d7750e815024eef960415592/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=8bbf3dea78325c39d7750e815024eef960415592", "patch": "@@ -1863,7 +1863,7 @@\n \t(vec_merge:VF_128\n \t  (plusminus:VF_128\n \t    (match_operand:VF_128 1 \"register_operand\" \"0,v\")\n-\t    (match_operand:VF_128 2 \"vector_operand\" \"xBm,<round_scalar_constraint>\"))\n+\t    (match_operand:VF_128 2 \"nonimmediate_operand\" \"xm,<round_scalar_constraint>\"))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_SSE\"\n@@ -1940,7 +1940,7 @@\n \t(vec_merge:VF_128\n \t  (multdiv:VF_128\n \t    (match_operand:VF_128 1 \"register_operand\" \"0,v\")\n-\t    (match_operand:VF_128 2 \"vector_operand\" \"xBm,<round_scalar_constraint>\"))\n+\t    (match_operand:VF_128 2 \"nonimmediate_operand\" \"xm,<round_scalar_constraint>\"))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_SSE\"\n@@ -2135,7 +2135,7 @@\n   [(set (match_operand:VF_128 0 \"register_operand\" \"=x,v\")\n \t(vec_merge:VF_128\n \t  (sqrt:VF_128\n-\t    (match_operand:VF_128 1 \"vector_operand\" \"xBm,<round_scalar_constraint>\"))\n+\t    (match_operand:VF_128 1 \"nonimmediate_operand\" \"xm,<round_scalar_constraint>\"))\n \t  (match_operand:VF_128 2 \"register_operand\" \"0,v\")\n \t  (const_int 1)))]\n   \"TARGET_SSE\"\n@@ -2368,7 +2368,7 @@\n \t(vec_merge:VF_128\n \t  (smaxmin:VF_128\n \t    (match_operand:VF_128 1 \"register_operand\" \"0,v\")\n-\t    (match_operand:VF_128 2 \"vector_operand\" \"xBm,<round_saeonly_scalar_constraint>\"))\n+\t    (match_operand:VF_128 2 \"nonimmediate_operand\" \"xm,<round_saeonly_scalar_constraint>\"))\n \t (match_dup 1)\n \t (const_int 1)))]\n   \"TARGET_SSE\"\n@@ -3012,7 +3012,7 @@\n \t(vec_merge:VF_128\n \t (match_operator:VF_128 3 \"sse_comparison_operator\"\n \t   [(match_operand:VF_128 1 \"register_operand\" \"0,x\")\n-\t    (match_operand:VF_128 2 \"vector_operand\" \"xBm,xm\")])\n+\t    (match_operand:VF_128 2 \"nonimmediate_operand\" \"xm,xm\")])\n \t (match_dup 1)\n \t (const_int 1)))]\n   \"TARGET_SSE\"\n@@ -3097,7 +3097,7 @@\n \t(and:<avx512fmaskmode>\n \t  (unspec:<avx512fmaskmode>\n \t    [(match_operand:VF_128 1 \"register_operand\" \"v\")\n-\t     (match_operand:VF_128 2 \"<round_saeonly_nimm_predicate>\" \"<round_saeonly_constraint>\")\n+\t     (match_operand:VF_128 2 \"<round_saeonly_nimm_scalar_predicate>\" \"<round_saeonly_constraint>\")\n \t     (match_operand:SI 3 \"const_0_to_31_operand\" \"n\")]\n \t    UNSPEC_PCMP)\n \t  (const_int 1)))]\n@@ -3113,7 +3113,7 @@\n \t(and:<avx512fmaskmode>\n \t  (unspec:<avx512fmaskmode>\n \t    [(match_operand:VF_128 1 \"register_operand\" \"v\")\n-\t     (match_operand:VF_128 2 \"<round_saeonly_nimm_predicate>\" \"<round_saeonly_constraint>\")\n+\t     (match_operand:VF_128 2 \"<round_saeonly_nimm_scalar_predicate>\" \"<round_saeonly_constraint>\")\n \t     (match_operand:SI 3 \"const_0_to_31_operand\" \"n\")]\n \t    UNSPEC_PCMP)\n \t  (and:<avx512fmaskmode>\n@@ -4742,8 +4742,8 @@\n \t(vec_merge:VF_128\n \t  (fma:VF_128\n \t    (match_operand:VF_128 1 \"register_operand\")\n-\t    (match_operand:VF_128 2 \"<round_nimm_predicate>\")\n-\t    (match_operand:VF_128 3 \"<round_nimm_predicate>\"))\n+\t    (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\")\n+\t    (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\"))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA\")\n@@ -4753,9 +4753,9 @@\n \t(vec_merge:VF_128\n \t  (fma:VF_128\n \t    (match_operand:VF_128 1 \"register_operand\")\n-\t    (match_operand:VF_128 2 \"<round_nimm_predicate>\")\n+\t    (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\")\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\")))\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\")))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA\")\n@@ -4765,9 +4765,9 @@\n \t(vec_merge:VF_128\n \t  (fma:VF_128\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\"))\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\"))\n \t    (match_operand:VF_128 1 \"register_operand\")\n-\t    (match_operand:VF_128 3 \"<round_nimm_predicate>\"))\n+\t    (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\"))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA\")\n@@ -4777,10 +4777,10 @@\n \t(vec_merge:VF_128\n \t  (fma:VF_128\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\"))\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\"))\n \t    (match_operand:VF_128 1 \"register_operand\")\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\")))\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\")))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA\")\n@@ -4790,8 +4790,8 @@\n         (vec_merge:VF_128\n \t  (fma:VF_128\n \t    (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n-\t    (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>, v\")\n-\t    (match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\"))\n+\t    (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>, v\")\n+\t    (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\"))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA || TARGET_AVX512F\"\n@@ -4806,9 +4806,9 @@\n         (vec_merge:VF_128\n \t  (fma:VF_128\n \t    (match_operand:VF_128   1 \"register_operand\" \"0,0\")\n-\t    (match_operand:VF_128   2 \"<round_nimm_predicate>\" \"<round_constraint>,v\")\n+\t    (match_operand:VF_128   2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\")\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\")))\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\")))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA || TARGET_AVX512F\"\n@@ -4823,9 +4823,9 @@\n         (vec_merge:VF_128\n \t  (fma:VF_128\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\"))\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\"))\n \t    (match_operand:VF_128   1 \"register_operand\" \"0,0\")\n-\t    (match_operand:VF_128   3 \"<round_nimm_predicate>\" \"v,<round_constraint>\"))\n+\t    (match_operand:VF_128   3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\"))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA || TARGET_AVX512F\"\n@@ -4840,10 +4840,10 @@\n         (vec_merge:VF_128\n \t  (fma:VF_128\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\"))\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\"))\n \t    (match_operand:VF_128   1 \"register_operand\" \"0,0\")\n \t    (neg:VF_128\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\")))\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\")))\n \t  (match_dup 1)\n \t  (const_int 1)))]\n   \"TARGET_FMA || TARGET_AVX512F\"\n@@ -4859,8 +4859,8 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\")\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\"))\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\")\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\"))\n \t    (match_dup 1)\n \t    (match_operand:QI 4 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -4877,8 +4877,8 @@\n \t(vec_merge:VF_128\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n-\t      (match_operand:VF_128 1 \"<round_nimm_predicate>\" \"%v\")\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>\")\n+\t      (match_operand:VF_128 1 \"<round_nimm_scalar_predicate>\" \"%v\")\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>\")\n \t      (match_operand:VF_128 3 \"register_operand\" \"0\"))\n \t    (match_dup 3)\n \t    (match_operand:QI 4 \"register_operand\" \"Yk\"))\n@@ -4909,8 +4909,8 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\")\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\"))\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\")\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\"))\n \t    (match_operand:VF_128 4 \"const0_operand\" \"C,C\")\n \t    (match_operand:QI 5 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -4928,9 +4928,9 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\")\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\")\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\")))\n+\t\t(match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\")))\n \t    (match_dup 1)\n \t    (match_operand:QI 4 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -4947,8 +4947,8 @@\n \t(vec_merge:VF_128\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n-\t      (match_operand:VF_128 1 \"<round_nimm_predicate>\" \"%v\")\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>\")\n+\t      (match_operand:VF_128 1 \"<round_nimm_scalar_predicate>\" \"%v\")\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>\")\n \t      (neg:VF_128\n \t\t(match_operand:VF_128 3 \"register_operand\" \"0\")))\n \t    (match_dup 3)\n@@ -4966,9 +4966,9 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n-\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\")\n+\t      (match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\")\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\")))\n+\t\t(match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\")))\n \t    (match_operand:VF_128 4 \"const0_operand\" \"C,C\")\n \t    (match_operand:QI 5 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -4986,9 +4986,9 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\"))\n+\t\t(match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\"))\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\"))\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\"))\n \t    (match_dup 1)\n \t    (match_operand:QI 4 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -5006,8 +5006,8 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>\"))\n-\t      (match_operand:VF_128 1 \"<round_nimm_predicate>\" \"%v\")\n+\t\t(match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>\"))\n+\t      (match_operand:VF_128 1 \"<round_nimm_scalar_predicate>\" \"%v\")\n \t      (match_operand:VF_128 3 \"register_operand\" \"0\"))\n \t    (match_dup 3)\n \t    (match_operand:QI 4 \"register_operand\" \"Yk\"))\n@@ -5024,9 +5024,9 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\"))\n+\t\t(match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\"))\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n-\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\"))\n+\t      (match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\"))\n \t    (match_operand:VF_128 4 \"const0_operand\" \"C,C\")\n \t    (match_operand:QI 5 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -5044,10 +5044,10 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\"))\n+\t\t(match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\"))\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\")))\n+\t\t(match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\")))\n \t    (match_dup 1)\n \t    (match_operand:QI 4 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -5065,8 +5065,8 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>\"))\n-\t      (match_operand:VF_128 1 \"<round_nimm_predicate>\" \"%v\")\n+\t\t(match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>\"))\n+\t      (match_operand:VF_128 1 \"<round_nimm_scalar_predicate>\" \"%v\")\n \t      (neg:VF_128\n \t\t(match_operand:VF_128 3 \"register_operand\" \"0\")))\n \t    (match_dup 3)\n@@ -5084,10 +5084,10 @@\n \t  (vec_merge:VF_128\n \t    (fma:VF_128\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 2 \"<round_nimm_predicate>\" \"<round_constraint>,v\"))\n+\t\t(match_operand:VF_128 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint>,v\"))\n \t      (match_operand:VF_128 1 \"register_operand\" \"0,0\")\n \t      (neg:VF_128\n-\t\t(match_operand:VF_128 3 \"<round_nimm_predicate>\" \"v,<round_constraint>\")))\n+\t\t(match_operand:VF_128 3 \"<round_nimm_scalar_predicate>\" \"v,<round_constraint>\")))\n \t    (match_operand:VF_128 4 \"const0_operand\" \"C,C\")\n \t    (match_operand:QI 5 \"register_operand\" \"Yk,Yk\"))\n \t  (match_dup 1)\n@@ -5355,7 +5355,7 @@\n \t(vec_merge:VF_128\n \t  (vec_duplicate:VF_128\n \t    (unsigned_float:<ssescalarmode>\n-\t      (match_operand:SI 2 \"<round_nimm_predicate>\" \"<round_constraint3>\")))\n+\t      (match_operand:SI 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint3>\")))\n \t  (match_operand:VF_128 1 \"register_operand\" \"v\")\n \t  (const_int 1)))]\n   \"TARGET_AVX512F && <round_modev4sf_condition>\"\n@@ -5369,7 +5369,7 @@\n \t(vec_merge:VF_128\n \t  (vec_duplicate:VF_128\n \t    (unsigned_float:<ssescalarmode>\n-\t      (match_operand:DI 2 \"<round_nimm_predicate>\" \"<round_constraint3>\")))\n+\t      (match_operand:DI 2 \"<round_nimm_scalar_predicate>\" \"<round_constraint3>\")))\n \t  (match_operand:VF_128 1 \"register_operand\" \"v\")\n \t  (const_int 1)))]\n   \"TARGET_AVX512F && TARGET_64BIT\"\n@@ -9708,7 +9708,7 @@\n           (unspec:VF_128\n             [(match_operand:VF_128 1 \"register_operand\" \"0\")\n \t     (match_operand:VF_128 2 \"register_operand\" \"v\")\n-\t     (match_operand:<sseintvecmode> 3 \"<round_saeonly_nimm_predicate>\" \"<round_saeonly_constraint>\")\n+\t     (match_operand:<sseintvecmode> 3 \"<round_saeonly_nimm_scalar_predicate>\" \"<round_saeonly_constraint>\")\n \t     (match_operand:SI 4 \"const_0_to_255_operand\")]\n \t    UNSPEC_FIXUPIMM)\n \t  (match_dup 1)\n@@ -9725,7 +9725,7 @@\n \t    (unspec:VF_128\n \t       [(match_operand:VF_128 1 \"register_operand\" \"0\")\n \t\t(match_operand:VF_128 2 \"register_operand\" \"v\")\n-\t\t(match_operand:<sseintvecmode> 3 \"<round_saeonly_nimm_predicate>\" \"<round_saeonly_constraint>\")\n+\t\t(match_operand:<sseintvecmode> 3 \"<round_saeonly_nimm_scalar_predicate>\" \"<round_saeonly_constraint>\")\n \t\t(match_operand:SI 4 \"const_0_to_255_operand\")]\n \t       UNSPEC_FIXUPIMM)\n \t    (match_dup 1)\n@@ -18642,7 +18642,7 @@\n   [(set (match_operand:VF_128 0 \"register_operand\" \"=v\")\n \t(vec_merge:VF_128\n \t  (unspec:VF_128\n-\t    [(match_operand:VF_128 1 \"<round_saeonly_nimm_predicate>\" \"<round_saeonly_constraint>\")]\n+\t    [(match_operand:VF_128 1 \"<round_saeonly_nimm_scalar_predicate>\" \"<round_saeonly_constraint>\")]\n \t    UNSPEC_RCP28)\n \t  (match_operand:VF_128 2 \"register_operand\" \"v\")\n \t  (const_int 1)))]\n@@ -18668,7 +18668,7 @@\n   [(set (match_operand:VF_128 0 \"register_operand\" \"=v\")\n \t(vec_merge:VF_128\n \t  (unspec:VF_128\n-\t    [(match_operand:VF_128 1 \"<round_saeonly_nimm_predicate>\" \"<round_saeonly_constraint>\")]\n+\t    [(match_operand:VF_128 1 \"<round_saeonly_nimm_scalar_predicate>\" \"<round_saeonly_constraint>\")]\n \t    UNSPEC_RSQRT28)\n \t  (match_operand:VF_128 2 \"register_operand\" \"v\")\n \t  (const_int 1)))]\n@@ -21888,7 +21888,7 @@\n   [(set (match_operand:<avx512fmaskmode> 0 \"register_operand\" \"=k\")\n \t(and:<avx512fmaskmode>\n \t  (unspec:<avx512fmaskmode>\n-\t    [(match_operand:VF_128 1 \"vector_operand\" \"vm\")\n+\t    [(match_operand:VF_128 1 \"nonimmediate_operand\" \"vm\")\n              (match_operand:QI 2 \"const_0_to_255_operand\" \"n\")]\n \t    UNSPEC_FPCLASS)\n \t  (const_int 1)))]"}, {"sha": "0d376063f48a50c241d764354b17292d571d66ff", "filename": "gcc/config/i386/subst.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bbf3dea78325c39d7750e815024eef960415592/gcc%2Fconfig%2Fi386%2Fsubst.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bbf3dea78325c39d7750e815024eef960415592/gcc%2Fconfig%2Fi386%2Fsubst.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsubst.md?ref=8bbf3dea78325c39d7750e815024eef960415592", "patch": "@@ -271,7 +271,7 @@\n (define_subst_attr \"round_scalar_mask_op3\" \"round_scalar\" \"\" \"<round_scalar_mask_operand3>\")\n (define_subst_attr \"round_scalar_constraint\" \"round_scalar\" \"vm\" \"v\")\n (define_subst_attr \"round_scalar_prefix\" \"round_scalar\" \"vex\" \"evex\")\n-(define_subst_attr \"round_scalar_nimm_predicate\" \"round_scalar\" \"vector_operand\" \"register_operand\")\n+(define_subst_attr \"round_scalar_nimm_predicate\" \"round_scalar\" \"nonimmediate_operand\" \"register_operand\")\n \n (define_subst \"round_scalar\"\n   [(set (match_operand:SUBST_V 0)\n@@ -296,7 +296,7 @@\n (define_subst_attr \"round_saeonly_scalar_mask_op4\" \"round_saeonly_scalar\" \"\" \"<round_saeonly_scalar_mask_operand4>\")\n (define_subst_attr \"round_saeonly_scalar_constraint\" \"round_saeonly_scalar\" \"vm\" \"v\")\n (define_subst_attr \"round_saeonly_scalar_prefix\" \"round_saeonly_scalar\" \"vex\" \"evex\")\n-(define_subst_attr \"round_saeonly_scalar_nimm_predicate\" \"round_saeonly_scalar\" \"vector_operand\" \"register_operand\")\n+(define_subst_attr \"round_saeonly_scalar_nimm_predicate\" \"round_saeonly_scalar\" \"nonimmediate_operand\" \"register_operand\")\n \n (define_subst \"round_saeonly_scalar\"\n   [(set (match_operand:SUBST_V 0)"}]}