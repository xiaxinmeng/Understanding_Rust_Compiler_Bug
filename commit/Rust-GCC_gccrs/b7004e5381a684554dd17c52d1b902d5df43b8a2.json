{"sha": "b7004e5381a684554dd17c52d1b902d5df43b8a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjcwMDRlNTM4MWE2ODQ1NTRkZDE3YzUyZDFiOTAyZDVkZjQzYjhhMg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-06-14T21:11:55Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-06-14T21:11:55Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r1203", "tree": {"sha": "cc381f2279fd70d8a7e3263b4a85f511eff3b57c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc381f2279fd70d8a7e3263b4a85f511eff3b57c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7004e5381a684554dd17c52d1b902d5df43b8a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7004e5381a684554dd17c52d1b902d5df43b8a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7004e5381a684554dd17c52d1b902d5df43b8a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7004e5381a684554dd17c52d1b902d5df43b8a2/comments", "author": null, "committer": null, "parents": [{"sha": "76052e7462b4a4a51e1770ee9c556afcd3abaabf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76052e7462b4a4a51e1770ee9c556afcd3abaabf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76052e7462b4a4a51e1770ee9c556afcd3abaabf"}], "stats": {"total": 24, "additions": 10, "deletions": 14}, "files": [{"sha": "085092421ab469e29cd105c15959098ff0868b5d", "filename": "gcc/protoize.c", "status": "modified", "additions": 10, "deletions": 14, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7004e5381a684554dd17c52d1b902d5df43b8a2/gcc%2Fprotoize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7004e5381a684554dd17c52d1b902d5df43b8a2/gcc%2Fprotoize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprotoize.c?ref=b7004e5381a684554dd17c52d1b902d5df43b8a2", "patch": "@@ -67,9 +67,6 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #else\n #include <sys/dir.h>\n #endif\n-#if ! defined (USG) || defined (SVR4)\n-#include <sys/wait.h>\n-#endif\n #include <setjmp.h>\n #include \"gvarargs.h\"\n \n@@ -2041,21 +2038,20 @@ gen_aux_info_file (base_filename)\n \n         if (wait (&wait_status) == -1)\n           {\n-            fprintf (stderr, \"%s: error: wait for process failed: %s\\n\",\n+            fprintf (stderr, \"%s: wait failed: %s\\n\",\n \t\t     pname, sys_errlist[errno]);\n             return 0;\n           }\n-        if (!WIFEXITED (wait_status))\n-          {\n-            fprintf (stderr, \"%s: error: subprocess %ld did not exit\\n\",\n-\t\t     pname, (long) child_pid);\n-            kill (child_pid, 9);\n-            return 0;\n-          }\n-        if (WEXITSTATUS (wait_status) != 0)\n+\tif ((wait_status & 0x7F) != 0)\n+\t  {\n+\t    fprintf (stderr, \"%s: subprocess got fatal signal %d\",\n+\t\t     pname, (wait_status & 0x7F));\n+\t    return 0;\n+\t  }\n+\tif (((wait_status & 0xFF00) >> 8) != 0)\n \t  {\n-\t    fprintf (stderr, \"%s: error: %s: compilation failed\\n\",\n-\t\t     pname, base_filename);\n+\t    fprintf (stderr, \"%s: %s exited with status %d\\n\",\n+\t\t     pname, base_filename, ((wait_status & 0xFF00) >> 8));\n \t    return 0;\n \t  }\n \treturn 1;"}]}