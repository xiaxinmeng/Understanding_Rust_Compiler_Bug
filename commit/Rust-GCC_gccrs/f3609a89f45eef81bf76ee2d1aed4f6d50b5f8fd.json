{"sha": "f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjM2MDlhODlmNDVlZWY4MWJmNzZlZTJkMWFlZDRmNmQ1MGI1ZjhmZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-02-19T22:18:38Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-02-19T22:18:38Z"}, "message": "re PR driver/69805 (ICE in greater_than_spec_func, at gcc.c:9722)\n\n\tPR driver/69805\n\t* gcc.c (LINK_COMMAND_SPEC, GOMP_SELF_SPECS): Use\n\t:%* in %:gt() argument.\n\t(greater_than_spec_func): Adjust for expecting only numbers,\n\tif there are more than two numbers, compare the last two.\n\n\t* testsuite/libgomp.c/pr69805.c: New test.\n\nFrom-SVN: r233573", "tree": {"sha": "17f67abcfcc86647caa91db5ba3871abb45013d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/17f67abcfcc86647caa91db5ba3871abb45013d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3a27b4db566c2cde8e043220f3d2c5401159b10e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a27b4db566c2cde8e043220f3d2c5401159b10e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a27b4db566c2cde8e043220f3d2c5401159b10e"}], "stats": {"total": 54, "additions": 30, "deletions": 24}, "files": [{"sha": "c8548c05ab8e7fefe9e52a0d6e3711e075de2be6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "patch": "@@ -1,3 +1,11 @@\n+2016-02-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR driver/69805\n+\t* gcc.c (LINK_COMMAND_SPEC, GOMP_SELF_SPECS): Use\n+\t:%* in %:gt() argument.\n+\t(greater_than_spec_func): Adjust for expecting only numbers,\n+\tif there are more than two numbers, compare the last two.\n+\n 2016-02-19  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* doc/invoke.texi (C++ Dialect Options): Clarify interaction of"}, {"sha": "1af59209b312ea52408690393ed80e55d093ecf3", "filename": "gcc/gcc.c", "status": "modified", "additions": 8, "deletions": 24, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "patch": "@@ -1019,7 +1019,7 @@ proper position among the other output files.  */\n     %{s} %{t} %{u*} %{z} %{Z} %{!nostdlib:%{!nostartfiles:%S}} \\\n     %{static:} %{L*} %(mfwrap) %(link_libgcc) \" \\\n     VTABLE_VERIFICATION_SPEC \" \" SANITIZER_EARLY_SPEC \" %o \" CHKP_SPEC \" \\\n-    %{fopenacc|fopenmp|%:gt(%{ftree-parallelize-loops=*} 1):\\\n+    %{fopenacc|fopenmp|%:gt(%{ftree-parallelize-loops=*:%*} 1):\\\n \t%:include(libgomp.spec)%(link_gomp)}\\\n     %{fcilkplus:%:include(libcilkrts.spec)%(link_cilkrts)}\\\n     %{fgnu-tm:%:include(libitm.spec)%(link_itm)}\\\n@@ -1183,7 +1183,7 @@ static const char *const multilib_defaults_raw[] = MULTILIB_DEFAULTS;\n    for targets that use different start files and suchlike.  */\n #ifndef GOMP_SELF_SPECS\n #define GOMP_SELF_SPECS \\\n-  \"%{fopenacc|fopenmp|%:gt(%{ftree-parallelize-loops=*} 1): \" \\\n+  \"%{fopenacc|fopenmp|%:gt(%{ftree-parallelize-loops=*:%*} 1): \" \\\n   \"-pthread}\"\n #endif\n \n@@ -9764,7 +9764,7 @@ replace_extension_spec_func (int argc, const char **argv)\n   return result;\n }\n \n-/* Returns \"\" if the n in ARGV[1] == -opt=<n> is greater than ARGV[2].\n+/* Returns \"\" if ARGV[ARGC - 2] is greater than ARGV[ARGC-1].\n    Otherwise, return NULL.  */\n \n static const char *\n@@ -9775,29 +9775,13 @@ greater_than_spec_func (int argc, const char **argv)\n   if (argc == 1)\n     return NULL;\n \n-  gcc_assert (argc == 3);\n-  gcc_assert (argv[0][0] == '-');\n-  gcc_assert (argv[0][1] == '\\0');\n+  gcc_assert (argc >= 2);\n \n-  /* Point p to <n> in in -opt=<n>.  */\n-  const char *p = argv[1];\n-  while (true)\n-    {\n-      char c = *p;\n-      if (c == '\\0')\n-\tgcc_unreachable ();\n-\n-      ++p;\n-\n-      if (c == '=')\n-\tbreak;\n-    }\n-\n-  long arg = strtol (p, &converted, 10);\n-  gcc_assert (converted != p);\n+  long arg = strtol (argv[argc - 2], &converted, 10);\n+  gcc_assert (converted != argv[argc - 2]);\n \n-  long lim = strtol (argv[2], &converted, 10);\n-  gcc_assert (converted != argv[2]);\n+  long lim = strtol (argv[argc - 1], &converted, 10);\n+  gcc_assert (converted != argv[argc - 1]);\n \n   if (arg > lim)\n     return \"\";"}, {"sha": "5dca72110499a60507950722bc61fc2ca6e84da9", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "patch": "@@ -1,3 +1,8 @@\n+2016-02-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR driver/69805\n+\t* testsuite/libgomp.c/pr69805.c: New test.\n+\n 2016-02-16  Tom de Vries  <tom@codesourcery.com>\n \n \tPR lto/67709"}, {"sha": "735d6d9d6260e13bc2f0a0a7370981618b31a906", "filename": "libgomp/testsuite/libgomp.c/pr69805.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/libgomp%2Ftestsuite%2Flibgomp.c%2Fpr69805.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd/libgomp%2Ftestsuite%2Flibgomp.c%2Fpr69805.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fpr69805.c?ref=f3609a89f45eef81bf76ee2d1aed4f6d50b5f8fd", "patch": "@@ -0,0 +1,9 @@\n+/* PR driver/69805 */\n+/* { dg-do link } */\n+/* { dg-options \"-ftree-parallelize-loops=1 -O2 -ftree-parallelize-loops=2\" } */\n+\n+int\n+main ()\n+{\n+  return 0;\n+}"}]}