{"sha": "4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGEwYTk0NTc4NWFmODAwZGQ0YTVmZjg4NDllNWFhMGUzODM0ZjcyZQ==", "commit": {"author": {"name": "Max Filippov", "email": "jcmvbkbc@gmail.com", "date": "2015-10-03T16:09:07Z"}, "committer": {"name": "Max Filippov", "email": "jcmvbkbc@gcc.gnu.org", "date": "2015-10-03T16:09:07Z"}, "message": "xtensa: add uclinux support\n\n2015-10-03  Max Filippov  <jcmvbkbc@gmail.com>\ngcc/\n\t* config.gcc (xtensa*-*-uclinux*): New configuration.\n\t* config/xtensa/uclinux.h: New file.\n\t* config/xtensa/uclinux.opt: New file.\n\nlibgcc/\n\t* config.host (xtensa*-*-uclinux*): New configuration.\n\nFrom-SVN: r228450", "tree": {"sha": "f6519c0cd80180207a57cf4d2f787aac75744c4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f6519c0cd80180207a57cf4d2f787aac75744c4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/comments", "author": {"login": "jcmvbkbc", "id": 166731, "node_id": "MDQ6VXNlcjE2NjczMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/166731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcmvbkbc", "html_url": "https://github.com/jcmvbkbc", "followers_url": "https://api.github.com/users/jcmvbkbc/followers", "following_url": "https://api.github.com/users/jcmvbkbc/following{/other_user}", "gists_url": "https://api.github.com/users/jcmvbkbc/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcmvbkbc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcmvbkbc/subscriptions", "organizations_url": "https://api.github.com/users/jcmvbkbc/orgs", "repos_url": "https://api.github.com/users/jcmvbkbc/repos", "events_url": "https://api.github.com/users/jcmvbkbc/events{/privacy}", "received_events_url": "https://api.github.com/users/jcmvbkbc/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "98955e50b8062e790ada9e18ed77ac6db06d6fdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98955e50b8062e790ada9e18ed77ac6db06d6fdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98955e50b8062e790ada9e18ed77ac6db06d6fdf"}], "stats": {"total": 121, "additions": 121, "deletions": 0}, "files": [{"sha": "14ab6968c4f6c58a4c18353cb1b7e1ba0346ed55", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "patch": "@@ -1,3 +1,9 @@\n+2015-10-03  Max Filippov  <jcmvbkbc@gmail.com>\n+\n+\t* config.gcc (xtensa*-*-uclinux*): New configuration.\n+\t* config/xtensa/uclinux.h: New file.\n+\t* config/xtensa/uclinux.opt: New file.\n+\n 2015-10-03  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* doc/cpp.texi (Standard Predefined Macros): Document value of"}, {"sha": "56797bd0c3f4d6232fa76a07e6edf3023aea75e2", "filename": "gcc/config.gcc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "patch": "@@ -2995,6 +2995,11 @@ xtensa*-*-linux*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h xtensa/linux.h\"\n \ttmake_file=\"${tmake_file} xtensa/t-xtensa\"\n \t;;\n+xtensa*-*-uclinux*)\n+\ttm_file=\"${tm_file} dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h xtensa/uclinux.h\"\n+\ttmake_file=\"${tmake_file} xtensa/t-xtensa\"\n+\textra_options=\"${extra_options} xtensa/uclinux.opt\"\n+\t;;\n am33_2.0-*-linux*)\n \ttm_file=\"mn10300/mn10300.h dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h mn10300/linux.h\"\n \tgas=yes gnu_ld=yes"}, {"sha": "3c678569b6f6a726ba72b9a0164db16e71457e5f", "filename": "gcc/config/xtensa/uclinux.h", "status": "added", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2Fconfig%2Fxtensa%2Fuclinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2Fconfig%2Fxtensa%2Fuclinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fuclinux.h?ref=4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "patch": "@@ -0,0 +1,69 @@\n+/* Xtensa uClinux configuration.\n+   Derived from the configuration for GCC for Intel i386 running Linux.\n+   Copyright (C) 2001-2015 Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify it under\n+the terms of the GNU General Public License as published by the Free\n+Software Foundation; either version 3, or (at your option) any later\n+version.\n+\n+GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING3.  If not see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#undef TARGET_OS_CPP_BUILTINS\n+#define TARGET_OS_CPP_BUILTINS()\t\t\t\t\\\n+  do\t\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\\\n+      GNU_USER_TARGET_OS_CPP_BUILTINS ();\t\t\t\\\n+      builtin_define (\"__uClinux__\");\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\\\n+  while (0)\n+\n+#undef SUBTARGET_CPP_SPEC\n+#define SUBTARGET_CPP_SPEC \"%{posix:-D_POSIX_SOURCE} %{pthread:-D_REENTRANT}\"\n+\n+#undef SIZE_TYPE\n+#define SIZE_TYPE \"unsigned int\"\n+\n+#undef PTRDIFF_TYPE\n+#define PTRDIFF_TYPE \"int\"\n+\n+#undef WCHAR_TYPE\n+#define WCHAR_TYPE \"long int\"\n+\n+#undef WCHAR_TYPE_SIZE\n+#define WCHAR_TYPE_SIZE 32\n+\n+#undef ASM_SPEC\n+#define ASM_SPEC \\\n+ \"%{mtext-section-literals:--text-section-literals} \\\n+  %{mno-text-section-literals:--no-text-section-literals} \\\n+  %{mtarget-align:--target-align} \\\n+  %{mno-target-align:--no-target-align} \\\n+  %{mlongcalls:--longcalls} \\\n+  %{mno-longcalls:--no-longcalls} \\\n+  %{mauto-litpools:--auto-litpools} \\\n+  %{mno-auto-litpools:--no-auto-litpools}\"\n+\n+#undef LINK_SPEC\n+#define LINK_SPEC \"%{!no-elf2flt:%{!elf2flt*:-elf2flt}}\"\n+\n+#undef LOCAL_LABEL_PREFIX\n+#define LOCAL_LABEL_PREFIX\t\".\"\n+\n+/* Always enable \"-fpic\" for Xtensa Linux.  */\n+#define XTENSA_ALWAYS_PIC 1\n+\n+#undef TARGET_LIBC_HAS_FUNCTION\n+#define TARGET_LIBC_HAS_FUNCTION no_c99_libc_has_function\n+\n+#undef DBX_REGISTER_NUMBER\n+"}, {"sha": "95ef777ab92b4ed079d71187e54b1130e8c10d16", "filename": "gcc/config/xtensa/uclinux.opt", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2Fconfig%2Fxtensa%2Fuclinux.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/gcc%2Fconfig%2Fxtensa%2Fuclinux.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fuclinux.opt?ref=4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "patch": "@@ -0,0 +1,32 @@\n+; Xtensa uClinux options.\n+\n+; Copyright (C) 2015 Free Software Foundation, Inc.\n+;\n+; This file is part of GCC.\n+;\n+; GCC is free software; you can redistribute it and/or modify it under\n+; the terms of the GNU General Public License as published by the Free\n+; Software Foundation; either version 3, or (at your option) any later\n+; version.\n+;\n+; GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+; WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+; FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+; for more details.\n+;\n+; You should have received a copy of the GNU General Public License\n+; along with GCC; see the file COPYING3.  If not see\n+; <http://www.gnu.org/licenses/>.\n+\n+; See the GCC internals manual (options.texi) for a description of\n+; this file's format.\n+\n+; Please try to keep this file in ASCII collating order.\n+\n+elf2flt\n+Driver\n+\n+elf2flt=\n+Driver JoinedOrMissing\n+\n+; This comment is to ensure we retain the blank line above."}, {"sha": "f09b962d64cc407cc55f48cc9b5978ed7a9703a7", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "patch": "@@ -1,3 +1,7 @@\n+2015-10-03  Max Filippov  <jcmvbkbc@gmail.com>\n+\n+\t* config.host (xtensa*-*-uclinux*): New configuration.\n+\n 2015-10-02  Kirill Yukhin  <kirill.yukhin@intel.com>\n \n         * config/i386/cpuinfo.c (processor_features): Add"}, {"sha": "2ee92c19e17d2187edf58ab243081cf56081018a", "filename": "libgcc/config.host", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a945785af800dd4a5ff8849e5aa0e3834f72e/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=4a0a945785af800dd4a5ff8849e5aa0e3834f72e", "patch": "@@ -1295,6 +1295,11 @@ xtensa*-*-linux*)\n \ttmake_file=\"$tmake_file xtensa/t-xtensa xtensa/t-linux t-slibgcc-libgcc\"\n \tmd_unwind_header=xtensa/linux-unwind.h\n \t;;\n+xtensa*-*-uclinux*)\n+\ttmake_file=\"$tmake_file xtensa/t-xtensa xtensa/t-linux t-slibgcc-libgcc\"\n+\tmd_unwind_header=xtensa/linux-unwind.h\n+\textra_parts=\"$extra_parts crtbeginS.o crtbeginT.o crtendS.o\"\n+\t;;\n am33_2.0-*-linux*)\n \t# Don't need crtbeginT.o from *-*-linux* default.\n \textra_parts=\"crtbegin.o crtend.o crtbeginS.o crtendS.o\""}]}