{"sha": "f5dffc0ba1786e6af96fd31e9c04599b818aeedb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjVkZmZjMGJhMTc4NmU2YWY5NmZkMzFlOWMwNDU5OWI4MThhZWVkYg==", "commit": {"author": {"name": "Markus Trippelsdorf", "email": "markus@trippelsdorf.de", "date": "2015-08-21T16:44:30Z"}, "committer": {"name": "Markus Trippelsdorf", "email": "trippels@gcc.gnu.org", "date": "2015-08-21T16:44:30Z"}, "message": "Fix PR61657 (undefined behavior in loop-iv.c)\n\nbootstrap-ubsan shows:\n loop-iv.c:2626:14: runtime error: signed integer overflow: 9223372036854775806 - -9223372036854775808 cannot be represented in type 'long int'\n\nFixed by moving the variables in question from signed to unsigned.\n\n\tPR rtl-optimization/61657\n\t* loop-iv.c (iv_number_of_iterations): Declare up and down as\n\tunsigned. Remove superflous uint64_t cast.\n\nFrom-SVN: r227075", "tree": {"sha": "dc8b58a037ecde64170bd90464b597621c8066a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc8b58a037ecde64170bd90464b597621c8066a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5dffc0ba1786e6af96fd31e9c04599b818aeedb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5dffc0ba1786e6af96fd31e9c04599b818aeedb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5dffc0ba1786e6af96fd31e9c04599b818aeedb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5dffc0ba1786e6af96fd31e9c04599b818aeedb/comments", "author": null, "committer": null, "parents": [{"sha": "cf6a9610f2e86f6de12281cc47b2d5a5acba63e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf6a9610f2e86f6de12281cc47b2d5a5acba63e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf6a9610f2e86f6de12281cc47b2d5a5acba63e4"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "806ea55043ca958301f7845ea7681626fb03cc43", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5dffc0ba1786e6af96fd31e9c04599b818aeedb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5dffc0ba1786e6af96fd31e9c04599b818aeedb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f5dffc0ba1786e6af96fd31e9c04599b818aeedb", "patch": "@@ -1,3 +1,9 @@\n+2015-08-21  Markus Trippelsdorf  <markus@trippelsdorf.de>\n+\n+\tPR rtl-optimization/61657\n+\t* loop-iv.c (iv_number_of_iterations): Declare up and down as\n+\tunsigned.  Remove superflous uint64_t cast.\n+\n 2014-08-21  Felix Yang  <felix.yang@huawei.com>\n \t    Jiji Jiang  <jiangjiji@huawei.com>\n "}, {"sha": "1c9a159ed318fcdb02bc1c6b39f0414d05d047b6", "filename": "gcc/loop-iv.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5dffc0ba1786e6af96fd31e9c04599b818aeedb/gcc%2Floop-iv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5dffc0ba1786e6af96fd31e9c04599b818aeedb/gcc%2Floop-iv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop-iv.c?ref=f5dffc0ba1786e6af96fd31e9c04599b818aeedb", "patch": "@@ -2330,8 +2330,8 @@ iv_number_of_iterations (struct loop *loop, rtx_insn *insn, rtx condition,\n   enum rtx_code cond;\n   machine_mode mode, comp_mode;\n   rtx mmin, mmax, mode_mmin, mode_mmax;\n-  uint64_t s, size, d, inv, max;\n-  int64_t up, down, inc, step_val;\n+  uint64_t s, size, d, inv, max, up, down;\n+  int64_t inc, step_val;\n   int was_sharp = false;\n   rtx old_niter;\n   bool step_is_pow2;\n@@ -2621,7 +2621,7 @@ iv_number_of_iterations (struct loop *loop, rtx_insn *insn, rtx condition,\n \t  down = INTVAL (CONST_INT_P (iv0.base)\n \t\t\t ? iv0.base\n \t\t\t : mode_mmin);\n-\t  max = (uint64_t) (up - down) / inc + 1;\n+\t  max = (up - down) / inc + 1;\n \t  if (!desc->infinite\n \t      && !desc->assumptions)\n \t    record_niter_bound (loop, max, false, true);"}]}