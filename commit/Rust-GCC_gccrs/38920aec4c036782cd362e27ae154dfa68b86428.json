{"sha": "38920aec4c036782cd362e27ae154dfa68b86428", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg5MjBhZWM0YzAzNjc4MmNkMzYyZTI3YWUxNTRkZmE2OGI4NjQyOA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2015-05-01T18:43:40Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-05-01T18:43:40Z"}, "message": "re PR c++/65858 (ICE in varpool_node::get_constructor during chromium build on arm-linux-gnueabihf with LTO during LINK chrome)\n\n/cp\n2015-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\t    Prathamesh Kulharni  <prathamesh.kulkarni@linaro.org>\n\n\tPR c++/65858\n\t* typeck2.c (check_narrowing): Set ok = true when pedwarn returns\n\tfalse.\n\n/testsuite\n2015-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\t    Prathamesh Kulharni  <prathamesh.kulkarni@linaro.org>\n\n\tPR c++/65858\n\t* g++.dg/cpp0x/Wnarrowing4.C: New.\n\nCo-Authored-By: Prathamesh Kulharni <prathamesh.kulkarni@linaro.org>\n\nFrom-SVN: r222699", "tree": {"sha": "904cb4c00e2286b81ff05a3f034a7a054c6df464", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/904cb4c00e2286b81ff05a3f034a7a054c6df464"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38920aec4c036782cd362e27ae154dfa68b86428", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38920aec4c036782cd362e27ae154dfa68b86428", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38920aec4c036782cd362e27ae154dfa68b86428", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38920aec4c036782cd362e27ae154dfa68b86428/comments", "author": null, "committer": null, "parents": [{"sha": "0f770b013e710f7225ddb1f75a0fb28bcf8ebf31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f770b013e710f7225ddb1f75a0fb28bcf8ebf31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f770b013e710f7225ddb1f75a0fb28bcf8ebf31"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "65cb5bee27b6d47b8576700e17cb73f2e6b2e221", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=38920aec4c036782cd362e27ae154dfa68b86428", "patch": "@@ -1,3 +1,10 @@\n+2015-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\t    Prathamesh Kulharni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR c++/65858\n+\t* typeck2.c (check_narrowing): Set ok = true when pedwarn returns\n+\tfalse.\n+\n 2015-04-30  David Malcolm  <dmalcolm@redhat.com>\n \n \t* cp-tree.h (ARGUMENT_PACK_SELECT_ARG): Remove spurious"}, {"sha": "9a491aa71f23f351534b561fdbdc63ab48778ddb", "filename": "gcc/cp/typeck2.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Fcp%2Ftypeck2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Fcp%2Ftypeck2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck2.c?ref=38920aec4c036782cd362e27ae154dfa68b86428", "patch": "@@ -959,9 +959,10 @@ check_narrowing (tree type, tree init, tsubst_flags_t complain)\n       else if (complain & tf_error)\n \t{\n \t  global_dc->pedantic_errors = 1;\n-\t  pedwarn (EXPR_LOC_OR_LOC (init, input_location), OPT_Wnarrowing,\n-\t\t   \"narrowing conversion of %qE from %qT to %qT inside { }\",\n-\t\t   init, ftype, type);\n+\t  if (!pedwarn (EXPR_LOC_OR_LOC (init, input_location), OPT_Wnarrowing,\n+\t\t\t\"narrowing conversion of %qE from %qT to %qT \"\n+\t\t\t\"inside { }\", init, ftype, type))\n+\t    ok = true;\n \t  global_dc->pedantic_errors = flag_pedantic_errors;\n \t}\n     }"}, {"sha": "e6ccf477a1e504285691cb216167fe63151abe42", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=38920aec4c036782cd362e27ae154dfa68b86428", "patch": "@@ -1,3 +1,9 @@\n+2015-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\t    Prathamesh Kulharni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR c++/65858\n+\t* g++.dg/cpp0x/Wnarrowing4.C: New.\n+\n 2015-05-01  Rasmus Villemoes  <rv@rasmusvillemoes.dk>\n \n \t* gcc.dg/20150120-1.c: New test."}, {"sha": "d2dd3837dda6c844645d47d78631eb137ed071c1", "filename": "gcc/testsuite/g++.dg/cpp0x/Wnarrowing4.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2FWnarrowing4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38920aec4c036782cd362e27ae154dfa68b86428/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2FWnarrowing4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2FWnarrowing4.C?ref=38920aec4c036782cd362e27ae154dfa68b86428", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/65858\n+// { dg-do compile { target c++11 } }\n+// { dg-require-effective-target lto }\n+// { dg-options \"-flto -Wno-narrowing\" }\n+\n+int x { 0.5 };"}]}