{"sha": "5129b43be675171c2e4742ae4b1e073249314818", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTEyOWI0M2JlNjc1MTcxYzJlNDc0MmFlNGIxZTA3MzI0OTMxNDgxOA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2016-11-14T10:33:15Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2016-11-14T10:33:15Z"}, "message": "re PR tree-optimization/78312 (wrong code due to ssa-backprop)\n\n2016-11-14  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/78312\n\t* gimple-ssa-backprop.c (backprop::prepare_change): Reset\n\tflow-sensitive info.\n\n\t* gcc.dg/torture/pr78312.c: New testcase.\n\nFrom-SVN: r242380", "tree": {"sha": "2ca5eb36c704a785bb669f3c685de8065075ccc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2ca5eb36c704a785bb669f3c685de8065075ccc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5129b43be675171c2e4742ae4b1e073249314818", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5129b43be675171c2e4742ae4b1e073249314818", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5129b43be675171c2e4742ae4b1e073249314818", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5129b43be675171c2e4742ae4b1e073249314818/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d97cca4a46aea362e15fbf3a35f5f8c4f66ded75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d97cca4a46aea362e15fbf3a35f5f8c4f66ded75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d97cca4a46aea362e15fbf3a35f5f8c4f66ded75"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "a4f6a34f8f15c2db53aa6fd8cb1fb8324c93ee95", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5129b43be675171c2e4742ae4b1e073249314818/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5129b43be675171c2e4742ae4b1e073249314818/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5129b43be675171c2e4742ae4b1e073249314818", "patch": "@@ -1,3 +1,9 @@\n+2016-11-14  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/78312\n+\t* gimple-ssa-backprop.c (backprop::prepare_change): Reset\n+\tflow-sensitive info.\n+\n 2016-11-14  Georg-Johann Lay  <avr@gjlay.de>\n \n \tPR target/78093"}, {"sha": "6ef221817f9f4ee8ab0239efa03d8184155908d6", "filename": "gcc/gimple-ssa-backprop.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5129b43be675171c2e4742ae4b1e073249314818/gcc%2Fgimple-ssa-backprop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5129b43be675171c2e4742ae4b1e073249314818/gcc%2Fgimple-ssa-backprop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-backprop.c?ref=5129b43be675171c2e4742ae4b1e073249314818", "patch": "@@ -728,6 +728,7 @@ backprop::prepare_change (tree var)\n {\n   if (MAY_HAVE_DEBUG_STMTS)\n     insert_debug_temp_for_var_def (NULL, var);\n+  reset_flow_sensitive_info (var);\n }\n \n /* STMT has been changed.  Give the fold machinery a chance to simplify"}, {"sha": "bf99ab981b9ac2a9477e7feb3ab052a25b44819f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5129b43be675171c2e4742ae4b1e073249314818/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5129b43be675171c2e4742ae4b1e073249314818/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5129b43be675171c2e4742ae4b1e073249314818", "patch": "@@ -1,3 +1,8 @@\n+2016-11-14  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/78312\n+\t* gcc.dg/torture/pr78312.c: New testcase.\n+\n 2016-11-14  Georg-Johann Lay  <avr@gjlay.de>\n \n \tPR target/78093"}, {"sha": "470e5b2ea0a8e97275cb86e0575583d4698ace90", "filename": "gcc/testsuite/gcc.dg/torture/pr78312.c", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5129b43be675171c2e4742ae4b1e073249314818/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr78312.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5129b43be675171c2e4742ae4b1e073249314818/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr78312.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr78312.c?ref=5129b43be675171c2e4742ae4b1e073249314818", "patch": "@@ -0,0 +1,23 @@\n+/* { dg-do run } */\n+\n+typedef unsigned short u16;\n+\n+static u16 a;\n+\n+u16 __attribute__ ((noinline, noclone))\n+foo (int p1)\n+{\n+  a = -(p1 > 0);\n+  a *= 0 != a;\n+  a *= (unsigned)a;\n+  return a;\n+}\n+\n+int\n+main ()\n+{\n+  u16 x = foo (1);\n+  if (x != 1)\n+    __builtin_abort();\n+  return 0;\n+}"}]}