{"sha": "37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzdmNDBjOWNmZDVhY2QyZjVjZjUwOGUwYTRkMzE2MTEzNzNhN2JjNQ==", "commit": {"author": {"name": "Stephane Carrez", "email": "stcarrez@nerim.fr", "date": "2004-06-06T17:01:07Z"}, "committer": {"name": "Stephane Carrez", "email": "ciceron@gcc.gnu.org", "date": "2004-06-06T17:01:07Z"}, "message": "re PR target/14542 (ICE on simple source)\n\n\tPR target/14542\n\t* config/m68hc11/m68hc11.md (move peephole2): Emit a use note to avoid\n\ta live change of a register after peephole replacement.\n\nFrom-SVN: r82673", "tree": {"sha": "094a9e438caedf66a301712afe4f219c1b0ac0b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/094a9e438caedf66a301712afe4f219c1b0ac0b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5/comments", "author": null, "committer": null, "parents": [{"sha": "10bc1b1bec937131ad05fa18184b985078b99702", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10bc1b1bec937131ad05fa18184b985078b99702", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10bc1b1bec937131ad05fa18184b985078b99702"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "bb55756a442d0c36bda97c80f5386cd44234cb4f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5", "patch": "@@ -1,3 +1,9 @@\n+2004-06-06  Stephane Carrez  <stcarrez@nerim.fr>\n+\n+\tPR target/14542\n+\t* config/m68hc11/m68hc11.md (move peephole2): Emit a use note to avoid\n+\ta live change of a register after peephole replacement.\n+\n 2004-06-06  Joseph S. Myers  <jsm@polyomino.org.uk>\n \n \tPR c/13519"}, {"sha": "be8ffbf4047a0ad04a56260d4b7643c5b8ee00d6", "filename": "gcc/config/m68hc11/m68hc11.md", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5/gcc%2Fconfig%2Fm68hc11%2Fm68hc11.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5/gcc%2Fconfig%2Fm68hc11%2Fm68hc11.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68hc11%2Fm68hc11.md?ref=37f40c9cfd5acd2f5cf508e0a4d31611373a7bc5", "patch": "@@ -6925,6 +6925,11 @@\n \t\t\t\t   gen_rtx_REG (HImode, HARD_SP_REGNUM)));\")\n \n ;; Replace: \"pshx; tfr d,x; stx 0,sp\" into \"pshd; tfr d,x\"\n+;;\n+;; PR 14542: emit a use to pretend we need the value of initial register.\n+;; Otherwise verify_local_live_at_start will abort due to a live change\n+;; of that register.\n+;;\n (define_peephole2\n   [(set (mem:HI (pre_dec:HI (reg:HI SP_REGNUM)))\n         (match_operand:HI 0 \"hard_reg_operand\" \"\"))\n@@ -6933,7 +6938,8 @@\n    (set (mem:HI (reg:HI SP_REGNUM))\n         (match_dup 0))]\n   \"TARGET_M6812\"\n-  [(set (mem:HI (pre_dec:HI (reg:HI SP_REGNUM)))\n+  [(use (match_dup 0))\n+   (set (mem:HI (pre_dec:HI (reg:HI SP_REGNUM)))\n         (match_dup 1))\n    (set (match_dup 0) (match_dup 1))]\n   \"\")"}]}