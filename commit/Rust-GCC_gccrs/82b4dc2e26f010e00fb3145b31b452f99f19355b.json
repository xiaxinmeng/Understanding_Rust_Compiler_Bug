{"sha": "82b4dc2e26f010e00fb3145b31b452f99f19355b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODJiNGRjMmUyNmYwMTBlMDBmYjMxNDViMzFiNDUyZjk5ZjE5MzU1Yg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-03-01T14:12:57Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-03-01T14:12:57Z"}, "message": "h8300.md (*tst_extzv_bitqi_1_n): Take a scratch register.\n\n\t* config/h8300/h8300.md (*tst_extzv_bitqi_1_n): Take a scratch\n\tregister.\n\t(*tst_extzv_memqi_1_n): Change to a splitter.\n\t(a peephole2): Update.\n\nFrom-SVN: r63610", "tree": {"sha": "56c68b2292533dffe5b105ffa449214a032a2fe4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56c68b2292533dffe5b105ffa449214a032a2fe4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82b4dc2e26f010e00fb3145b31b452f99f19355b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82b4dc2e26f010e00fb3145b31b452f99f19355b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82b4dc2e26f010e00fb3145b31b452f99f19355b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82b4dc2e26f010e00fb3145b31b452f99f19355b/comments", "author": null, "committer": null, "parents": [{"sha": "05e643de59279f10908cafad1db5c0d6a1ef1f4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05e643de59279f10908cafad1db5c0d6a1ef1f4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05e643de59279f10908cafad1db5c0d6a1ef1f4c"}], "stats": {"total": 56, "additions": 35, "deletions": 21}, "files": [{"sha": "7f7f6fd9e3d0d9a883f564771ededa5057639981", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82b4dc2e26f010e00fb3145b31b452f99f19355b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82b4dc2e26f010e00fb3145b31b452f99f19355b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=82b4dc2e26f010e00fb3145b31b452f99f19355b", "patch": "@@ -1,3 +1,10 @@\n+2003-03-01  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.md (*tst_extzv_bitqi_1_n): Take a scratch\n+\tregister.\n+\t(*tst_extzv_memqi_1_n): Change to a splitter.\n+\t(a peephole2): Update.\n+\n 2003-03-01  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* predict.c (estimate_bb_frequencies): Initialize the sreal"}, {"sha": "084d5abbee16ea5ee63f8cd61b74116a7d198c24", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 28, "deletions": 21, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82b4dc2e26f010e00fb3145b31b452f99f19355b/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82b4dc2e26f010e00fb3145b31b452f99f19355b/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=82b4dc2e26f010e00fb3145b31b452f99f19355b", "patch": "@@ -588,29 +588,35 @@\n   [(set_attr \"length\" \"2\")\n    (set_attr \"cc\" \"set_zn\")])\n \n-(define_insn \"*tst_extzv_bitqi_1_n\"\n-  [(set (cc0) (zero_extract:SI (match_operand:QI 0 \"bit_operand\" \"r,U\")\n-\t\t\t       (const_int 1)\n-\t\t\t       (match_operand 1 \"const_int_operand\" \"n,n\")))]\n+(define_insn \"*tst_extzv_1_n\"\n+  [(set (cc0)\n+\t(zero_extract:SI (match_operand:QI 0 \"general_operand_src\" \"r,U,mn>\")\n+\t\t\t (const_int 1)\n+\t\t\t (match_operand 1 \"const_int_operand\" \"n,n,n\")))\n+   (clobber (match_scratch:QI 2 \"=X,X,&r\"))]\n   \"(TARGET_H8300H || TARGET_H8300S)\"\n-  \"btst\t%Z1,%Y0\"\n-  [(set_attr \"length\" \"2,8\")\n-   (set_attr \"cc\" \"set_zn,set_zn\")])\n+  \"@\n+   btst\\\\t%Z1,%Y0\n+   btst\\\\t%Z1,%Y0\n+   #\"\n+  [(set_attr \"length\" \"2,8,10\")\n+   (set_attr \"cc\" \"set_zn,set_zn,set_zn\")])\n \n-(define_insn_and_split \"*tst_extzv_memqi_1_n\"\n-  [(set (cc0) (zero_extract:SI (match_operand:QI 0 \"memory_operand\" \"m\")\n-\t\t\t       (const_int 1)\n-\t\t\t       (match_operand 1 \"const_int_operand\" \"n\")))\n-   (clobber (match_scratch:QI 2 \"=&r\"))]\n+(define_split\n+  [(set (cc0)\n+\t(zero_extract:SI (match_operand:QI 0 \"general_operand\" \"\")\n+\t\t\t (const_int 1)\n+\t\t\t (match_operand 1 \"const_int_operand\" \"\")))\n+   (clobber (match_operand:QI 2 \"register_operand\" \"\"))]\n   \"(TARGET_H8300H || TARGET_H8300S)\n+   && reload_completed\n    && !EXTRA_CONSTRAINT (operands[0], 'U')\"\n-  \"#\"\n-  \"&& reload_completed\"\n   [(set (match_dup 2)\n \t(match_dup 0))\n-   (set (cc0) (zero_extract:SI (match_dup 2)\n-\t\t\t       (const_int 1)\n-\t\t\t       (match_dup 1)))]\n+   (parallel [(set (cc0) (zero_extract:SI (match_dup 2)\n+\t\t\t\t\t  (const_int 1)\n+\t\t\t\t\t  (match_dup 1)))\n+\t      (clobber (scratch:QI))])]\n   \"\")\n \n (define_insn \"\"\n@@ -3513,10 +3519,11 @@\n   \"\")\n \n (define_peephole2\n-  [(set (cc0)\n-\t(zero_extract:SI (match_operand:QI 0 \"register_operand\" \"\")\n-\t\t\t (const_int 1)\n-\t\t\t (const_int 7)))\n+  [(parallel [(set (cc0)\n+\t\t   (zero_extract:SI (match_operand:QI 0 \"register_operand\" \"\")\n+\t\t\t\t    (const_int 1)\n+\t\t\t\t    (const_int 7)))\n+\t      (clobber (scratch:QI))])\n    (set (pc)\n \t(if_then_else (match_operator 1 \"eqne_operator\"\n \t\t\t[(cc0) (const_int 0)])"}]}