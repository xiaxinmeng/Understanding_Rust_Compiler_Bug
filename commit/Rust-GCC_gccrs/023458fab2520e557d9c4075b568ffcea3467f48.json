{"sha": "023458fab2520e557d9c4075b568ffcea3467f48", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDIzNDU4ZmFiMjUyMGU1NTdkOWM0MDc1YjU2OGZmY2VhMzQ2N2Y0OA==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@users.sourceforge.net", "date": "2005-01-06T16:04:05Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2005-01-06T16:04:05Z"}, "message": "re PR c++/17154 (Using declaration of function name ignored inside partial specialization of template class)\n\n\tPR c++/17154\n\t* search.c (lookup_field_1): Handle using declaration in\n\tclass template partial specialization.\n\n\t* g++.dg/template/using9.C: New test.\n\nFrom-SVN: r92994", "tree": {"sha": "1502c1fa1cbff0c72d36506b0b9c95bf80de25cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1502c1fa1cbff0c72d36506b0b9c95bf80de25cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/023458fab2520e557d9c4075b568ffcea3467f48", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/023458fab2520e557d9c4075b568ffcea3467f48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/023458fab2520e557d9c4075b568ffcea3467f48", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/023458fab2520e557d9c4075b568ffcea3467f48/comments", "author": null, "committer": null, "parents": [{"sha": "23ff7e2d27290094883a2c4e0414a880209aa7ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23ff7e2d27290094883a2c4e0414a880209aa7ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23ff7e2d27290094883a2c4e0414a880209aa7ac"}], "stats": {"total": 36, "additions": 28, "deletions": 8}, "files": [{"sha": "600e94502cf5259b0d4c74034c66f0e71afda89e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=023458fab2520e557d9c4075b568ffcea3467f48", "patch": "@@ -1,3 +1,9 @@\n+2005-01-06  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/17154\n+\t* search.c (lookup_field_1): Handle using declaration in\n+\tclass template partial specialization.\n+\n 2005-01-06  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \tPR c++/19258"}, {"sha": "8d5ae655ceae10bbcf115ef3f27992f51ff683d9", "filename": "gcc/cp/search.c", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Fcp%2Fsearch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Fcp%2Fsearch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsearch.c?ref=023458fab2520e557d9c4075b568ffcea3467f48", "patch": "@@ -1,7 +1,7 @@\n /* Breadth-first and depth-first routines for\n    searching multiple-inheritance lattice for GNU C++.\n    Copyright (C) 1987, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2000, 2002, 2003, 2004 Free Software Foundation, Inc.\n+   1999, 2000, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.\n    Contributed by Michael Tiemann (tiemann@cygnus.com)\n \n This file is part of GCC.\n@@ -470,13 +470,10 @@ lookup_field_1 (tree type, tree name, bool want_type)\n \t     the compiler cannot handle that.  Once the class is\n \t     defined, USING_DECLs are purged from TYPE_FIELDS; see\n \t     handle_using_decl.  However, we make special efforts to\n-\t     make using-declarations in template classes work\n-\t     correctly.  */\n-\t  if (CLASSTYPE_TEMPLATE_INFO (type)\n-\t      && !CLASSTYPE_USE_TEMPLATE (type)\n-\t      && !TREE_TYPE (field))\n-\t    ;\n-\t  else\n+\t     make using-declarations in class templates and class\n+\t     template partial specializations work correctly noticing\n+\t     that dependent USING_DECL's do not have TREE_TYPE set.  */\n+\t  if (TREE_TYPE (field))\n \t    continue;\n \t}\n "}, {"sha": "de33069a9b8b5a5dc9f4cbba516ecda60f309830", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=023458fab2520e557d9c4075b568ffcea3467f48", "patch": "@@ -1,3 +1,8 @@\n+2004-01-06  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/17154\n+\t* g++.dg/template/using9.C: New test.\n+\n 2005-01-06  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \tPR c++/19258"}, {"sha": "a2c06a70d9dd58b5610125a76b49e994f6e90afc", "filename": "gcc/testsuite/g++.dg/template/using9.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fusing9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/023458fab2520e557d9c4075b568ffcea3467f48/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fusing9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fusing9.C?ref=023458fab2520e557d9c4075b568ffcea3467f48", "patch": "@@ -0,0 +1,12 @@\n+// { dg-do compile }\n+\n+// Origin: stefaandr@hotmail.com\n+\n+// PR c++/17154: Using declaration in partial class template specialization.\n+\n+template <int numrows, class T> struct A { void test_A() {}; };\n+template <int numrows, class T> struct B {};\n+template <class T> struct B <3, T> : public A <3, T> {\n+\tusing A <3, T>::test_A;\n+\tvoid test_B_spec() { test_A(); };\n+};"}]}