{"sha": "72c53a837c70288ab4e06a5cae11c63276ebe157", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJjNTNhODM3YzcwMjg4YWI0ZTA2YTVjYWUxMWM2MzI3NmViZTE1Nw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2010-03-19T07:18:47Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-03-19T07:18:47Z"}, "message": "re PR ada/43106 (optimization error in a case statement)\n\n\tPR ada/43106\n\t* gnat.dg/case_optimization2.adb: New test.\n\t* gnat.dg/case_optimization_pkg2.ad[sb]: New helper.\n\nFrom-SVN: r157558", "tree": {"sha": "a08f34bfaecaef021561c721c8ff6a7790da892e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a08f34bfaecaef021561c721c8ff6a7790da892e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72c53a837c70288ab4e06a5cae11c63276ebe157", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72c53a837c70288ab4e06a5cae11c63276ebe157", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72c53a837c70288ab4e06a5cae11c63276ebe157", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72c53a837c70288ab4e06a5cae11c63276ebe157/comments", "author": null, "committer": null, "parents": [{"sha": "9fd52c6c0f62cff3b65d6a196d09fcf6e787f685", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fd52c6c0f62cff3b65d6a196d09fcf6e787f685", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fd52c6c0f62cff3b65d6a196d09fcf6e787f685"}], "stats": {"total": 66, "additions": 66, "deletions": 0}, "files": [{"sha": "482b3853c9991beddd15be8f96e6d7fdb77ced3d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=72c53a837c70288ab4e06a5cae11c63276ebe157", "patch": "@@ -1,3 +1,9 @@\n+2010-03-19  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR ada/43106\n+\t* gnat.dg/case_optimization2.adb: New test.\n+\t* gnat.dg/case_optimization_pkg2.ad[sb]: New helper.\n+\n 2010-03-11  Francois-Xavier Coudert <fxcoudert@gcc.gnu.org>\n \t    Jack Howarth <howarth@bromo.med.uc.edu>\n "}, {"sha": "f548a848801ef39e1a89efc176319814d0aa27c8", "filename": "gcc/testsuite/gnat.dg/case_optimization2.adb", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization2.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization2.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization2.adb?ref=72c53a837c70288ab4e06a5cae11c63276ebe157", "patch": "@@ -0,0 +1,14 @@\n+-- PR ada/43106\n+-- Testcase by Bill Neven <neven@hitt.nl>\n+\n+-- { dg-do run }\n+-- { dg-options \"-O\" }\n+\n+with Case_Optimization_Pkg2; use Case_Optimization_Pkg2;\n+\n+procedure Case_Optimization2 is\n+   Radar : Radar_T;\n+begin\n+   Radar.Sensor_Type := radcmb;\n+   Initialize (Radar);\n+end;"}, {"sha": "57f9224e5e73ad25a9c291bc058284240ccf7a10", "filename": "gcc/testsuite/gnat.dg/case_optimization_pkg2.adb", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization_pkg2.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization_pkg2.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization_pkg2.adb?ref=72c53a837c70288ab4e06a5cae11c63276ebe157", "patch": "@@ -0,0 +1,23 @@\n+package body Case_Optimization_Pkg2 is\n+\n+  procedure Initialize (Radar : in Radar_T) is\n+    Antenna1 : Antenna_Type_T;\n+    Antenna2 : Antenna_Type_T;\n+  begin\n+    case Radar.Sensor_Type is\n+      when radpr | radssr =>\n+        Antenna1 := Radar.Sensor_Type;\n+        Antenna2 := Radar.Sensor_Type;\n+      when radcmb =>\n+        Antenna1 := radpr;\n+        Antenna2 := radssr;\n+      when others =>\n+        Antenna1 := radpr;\n+        Antenna2 := radssr;\n+    end case;\n+    if Antenna1 /= radpr or Antenna2 /= radssr then\n+      raise Program_Error;\n+    end if;\n+  end Initialize;\n+\n+end Case_Optimization_Pkg2;"}, {"sha": "c41a05c26058253cd87ff558458b04feb6d0646d", "filename": "gcc/testsuite/gnat.dg/case_optimization_pkg2.ads", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization_pkg2.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c53a837c70288ab4e06a5cae11c63276ebe157/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization_pkg2.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fcase_optimization_pkg2.ads?ref=72c53a837c70288ab4e06a5cae11c63276ebe157", "patch": "@@ -0,0 +1,23 @@\n+package Case_Optimization_Pkg2 is\n+\n+   type Unsigned_64 is mod 2 ** 64;\n+\n+   type Associated_Report_T is (miss, radpr, radssr, radcmb);\n+\n+   -- sensor type : primary, secondary, co-rotating (combined)\n+   subtype Sensor_Type_T is Associated_Report_T; -- range radpr .. radcmb;\n+   subtype Antenna_Type_T is Sensor_Type_T range radpr .. radssr;\n+\n+   type Filtering_Level_T is (none, pr_in_clutter, ssr_plots, pr_plots);\n+   type Filtering_Levels_T is array (Filtering_Level_T) of boolean;\n+\n+   type Radar_T is record\n+      External_Sensor_ID : Unsigned_64;\n+      Dual_Radar_Index : Integer;\n+      Compatible_Filtering_Levels : Filtering_Levels_T;\n+      Sensor_Type : Sensor_Type_T;\n+   end record;\n+\n+   procedure Initialize (Radar : in Radar_T);\n+\n+end Case_Optimization_Pkg2;"}]}