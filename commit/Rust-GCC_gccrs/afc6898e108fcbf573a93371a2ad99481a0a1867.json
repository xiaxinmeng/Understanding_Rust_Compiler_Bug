{"sha": "afc6898e108fcbf573a93371a2ad99481a0a1867", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZjNjg5OGUxMDhmY2JmNTczYTkzMzcxYTJhZDk5NDgxYTBhMTg2Nw==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.co.uk", "date": "2000-09-19T16:43:36Z"}, "committer": {"name": "Bernd Schmidt", "email": "crux@gcc.gnu.org", "date": "2000-09-19T16:43:36Z"}, "message": "Fix shorten_branches bugs\n\nFrom-SVN: r36538", "tree": {"sha": "076e920c0ca81df26d7b924132f591649f9641d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/076e920c0ca81df26d7b924132f591649f9641d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afc6898e108fcbf573a93371a2ad99481a0a1867", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afc6898e108fcbf573a93371a2ad99481a0a1867", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afc6898e108fcbf573a93371a2ad99481a0a1867", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afc6898e108fcbf573a93371a2ad99481a0a1867/comments", "author": null, "committer": null, "parents": [{"sha": "3fbef42f148344c3a58ffdb279485039bb0afa36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fbef42f148344c3a58ffdb279485039bb0afa36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fbef42f148344c3a58ffdb279485039bb0afa36"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "148ec20d2d607baa995213024677d01b490f62c9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afc6898e108fcbf573a93371a2ad99481a0a1867/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afc6898e108fcbf573a93371a2ad99481a0a1867/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=afc6898e108fcbf573a93371a2ad99481a0a1867", "patch": "@@ -1,5 +1,9 @@\n 2000-09-19  Bernd Schmidt  <bernds@redhat.co.uk>\n \n+\t* final.c (insn_current_reference_address): Use INSN_SHUID of seq\n+\trather than that of branch.\n+\t(shorten_branches): Don't increment insn_current_address twice.\n+\n \tUndo most of the Wed Jan 27 23:39:53 1999 patch:\n \t* loop.h (struct induction): Delete members derived, ix and last_use.\n \t(struct loop_ivs): Delete members first_increment_giv and\n@@ -22,8 +26,6 @@\n \tincrements.\n \tDon't set derived_regs.\n \n-2000-09-19  Bernd Schmidt  <bernds@redhat.co.uk>\n-\n \tFix misapplied earlier patch:\n \t* config/sh/sh.md (floatsisf_ie): Reenable.  Remove explicit reference\n \tto fpul."}, {"sha": "bfd47545d6ac984c1bfdb4cebfd525b93ca4fae4", "filename": "gcc/final.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afc6898e108fcbf573a93371a2ad99481a0a1867/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afc6898e108fcbf573a93371a2ad99481a0a1867/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=afc6898e108fcbf573a93371a2ad99481a0a1867", "patch": "@@ -932,8 +932,9 @@ insn_current_reference_address (branch)\n     return insn_current_address;\n   dest = JUMP_LABEL (branch);\n \n-  /* BRANCH has no proper alignment chain set, so use SEQ.  */\n-  if (INSN_SHUID (branch) < INSN_SHUID (dest))\n+  /* BRANCH has no proper alignment chain set, so use SEQ.  \n+     BRANCH also has no INSN_SHUID.  */\n+  if (INSN_SHUID (seq) < INSN_SHUID (dest))\n     {\n       /* Forward branch.  */\n       return (insn_last_address + insn_lengths[seq_uid]\n@@ -1241,7 +1242,6 @@ shorten_branches (first)\n \t      int align = 1 << log;\n \t      int new_address = (insn_current_address + align - 1) & -align;\n \t      insn_lengths[uid] = new_address - insn_current_address;\n-\t      insn_current_address = new_address;\n \t    }\n \t}\n "}]}