{"sha": "5719731f479e4aa29035cfa540a67245cfe15321", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcxOTczMWY0NzllNGFhMjkwMzVjZmE1NDBhNjcyNDVjZmUxNTMyMQ==", "commit": {"author": {"name": "Robin Dapp", "email": "rdapp@linux.ibm.com", "date": "2019-05-17T12:18:09Z"}, "committer": {"name": "Robin Dapp", "email": "rdapp@gcc.gnu.org", "date": "2019-05-17T12:18:09Z"}, "message": "S/390: Fix larl/PIC test case.\n\nThis patch adds -march=z900 to a test case that expects larl for loading\na value via the GOT.  On z10 and later, lgrl is used which is tested in\na new, separate test case.\n\ngcc/testsuite/ChangeLog:\n\n2019-05-17  Robin Dapp  <rdapp@linux.ibm.com>\n\n  * gcc.target/s390/global-array-element-pic.c: Add -march=z900.\n  * gcc.target/s390/global-array-element-pic2.c: New test for z10+.\n\nFrom-SVN: r271321", "tree": {"sha": "cdaa294e9bce439c371a03761b122bacdb49b84e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cdaa294e9bce439c371a03761b122bacdb49b84e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5719731f479e4aa29035cfa540a67245cfe15321", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5719731f479e4aa29035cfa540a67245cfe15321", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5719731f479e4aa29035cfa540a67245cfe15321", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5719731f479e4aa29035cfa540a67245cfe15321/comments", "author": {"login": "rdapp-ibm", "id": 80318053, "node_id": "MDQ6VXNlcjgwMzE4MDUz", "avatar_url": "https://avatars.githubusercontent.com/u/80318053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdapp-ibm", "html_url": "https://github.com/rdapp-ibm", "followers_url": "https://api.github.com/users/rdapp-ibm/followers", "following_url": "https://api.github.com/users/rdapp-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/rdapp-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdapp-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdapp-ibm/subscriptions", "organizations_url": "https://api.github.com/users/rdapp-ibm/orgs", "repos_url": "https://api.github.com/users/rdapp-ibm/repos", "events_url": "https://api.github.com/users/rdapp-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/rdapp-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c4499192638ad901fc03021834eec60399bfa736", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4499192638ad901fc03021834eec60399bfa736", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4499192638ad901fc03021834eec60399bfa736"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "f63c04d4cba009c40db9cd1df8b2a2a95e2a339f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5719731f479e4aa29035cfa540a67245cfe15321/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5719731f479e4aa29035cfa540a67245cfe15321/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5719731f479e4aa29035cfa540a67245cfe15321", "patch": "@@ -1,3 +1,8 @@\n+2019-05-17  Robin Dapp  <rdapp@linux.ibm.com>\n+\n+\t* gcc.target/s390/global-array-element-pic.c: Add -march=z900.\n+\t* gcc.target/s390/global-array-element-pic2.c: New test for z10+.\n+\n 2019-05-17  Richard Biener  <rguenther@suse.de>\n \n \t* gcc.dg/gimplefe-41.c: New testcase."}, {"sha": "3569d5b2be71640d6f208909ae2a84ee03f25529", "filename": "gcc/testsuite/gcc.target/s390/global-array-element-pic.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5719731f479e4aa29035cfa540a67245cfe15321/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fglobal-array-element-pic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5719731f479e4aa29035cfa540a67245cfe15321/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fglobal-array-element-pic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fglobal-array-element-pic.c?ref=5719731f479e4aa29035cfa540a67245cfe15321", "patch": "@@ -1,6 +1,6 @@\n /* Test accesses to global array elements in PIC code.  */\n /* { dg-do compile } */\n-/* { dg-options \"-O1 -fPIC\" } */\n+/* { dg-options \"-O1 -march=z900 -fPIC\" } */\n \n extern char a[] __attribute__ ((aligned (2)));\n extern char *b;"}, {"sha": "b9398a8042fcebe8c7fabff720587a7de60e0090", "filename": "gcc/testsuite/gcc.target/s390/global-array-element-pic2.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5719731f479e4aa29035cfa540a67245cfe15321/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fglobal-array-element-pic2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5719731f479e4aa29035cfa540a67245cfe15321/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fglobal-array-element-pic2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fglobal-array-element-pic2.c?ref=5719731f479e4aa29035cfa540a67245cfe15321", "patch": "@@ -0,0 +1,13 @@\n+/* Test accesses to global array elements in PIC code.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -march=z10 -fPIC\" } */\n+\n+extern char a[] __attribute__ ((aligned (2)));\n+extern char *b;\n+\n+void c()\n+{\n+  b = a + 4;\n+  /* { dg-final { scan-assembler {(?n)\\n\\tlgrl\\t%r\\d+,a@GOTENT\\n} } } */\n+  /* { dg-final { scan-assembler-not {(?n)\\n\\tlarl\\t%r\\d+,a[^@]} } } */\n+}"}]}