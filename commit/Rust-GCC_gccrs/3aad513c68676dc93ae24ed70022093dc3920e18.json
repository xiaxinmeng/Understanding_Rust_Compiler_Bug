{"sha": "3aad513c68676dc93ae24ed70022093dc3920e18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FhZDUxM2M2ODY3NmRjOTNhZTI0ZWQ3MDAyMjA5M2RjMzkyMGUxOA==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2019-10-03T12:39:42Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2019-10-03T12:39:42Z"}, "message": "re PR fortran/84487 (Large rodate section increase in 465.tonto with r254427)\n\n2019-10-03  Thomas Koenig <tkoenig@gcc.gnu.org>\n\n\tPR fortran/84487\n\t* trans-decl.c (gfc_get_symbol_decl): For __def_init, set\n\tDECL_ARTIFICAL and do not set TREE_READONLY.\n\n2019-10-03  Thomas Koenig <tkoenig@gcc.gnu.org>\n\n\tPR fortran/84487\n\t* gfortran.dg/typebound_call_22.f03: xfail.\n\nFrom-SVN: r276506", "tree": {"sha": "f9133b6f64f63b283db13b5e2f9c9a8ee52ae99b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f9133b6f64f63b283db13b5e2f9c9a8ee52ae99b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3aad513c68676dc93ae24ed70022093dc3920e18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aad513c68676dc93ae24ed70022093dc3920e18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3aad513c68676dc93ae24ed70022093dc3920e18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aad513c68676dc93ae24ed70022093dc3920e18/comments", "author": null, "committer": null, "parents": [{"sha": "f61e54e59cda5a2e281d525d3f87ffa179fae1ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f61e54e59cda5a2e281d525d3f87ffa179fae1ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f61e54e59cda5a2e281d525d3f87ffa179fae1ae"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "9367322df6f4d8e36c91764f9bfcf3229d073f5b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=3aad513c68676dc93ae24ed70022093dc3920e18", "patch": "@@ -1,3 +1,9 @@\n+2019-10-03  Thomas Koenig <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/84487\n+\t* trans-decl.c (gfc_get_symbol_decl): For __def_init, set\n+\tDECL_ARTIFICAL and do not set TREE_READONLY.\n+\n 2019-10-03  Mark Eggleston  <mark.eggleston@codethink.com>\n \n \t* array.c (check_element_type): Call gfc_typename with the gfc_expr"}, {"sha": "b701f4934401a00341178bba846566ea790c6eac", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=3aad513c68676dc93ae24ed70022093dc3920e18", "patch": "@@ -1911,9 +1911,13 @@ gfc_get_symbol_decl (gfc_symbol * sym)\n   if (sym->attr.associate_var)\n     GFC_DECL_ASSOCIATE_VAR_P (decl) = 1;\n \n+  /* We no longer mark __def_init as read-only so it does not take up\n+     space in the read-only section and dan go into the BSS instead,\n+     see PR 84487.  Marking this as artificial means that OpenMP will\n+     treat this as predetermined shared.  */\n   if (sym->attr.vtab\n       || (sym->name[0] == '_' && gfc_str_startswith (sym->name, \"__def_init\")))\n-    TREE_READONLY (decl) = 1;\n+    DECL_ARTIFICIAL (decl) = 1;\n \n   return decl;\n }"}, {"sha": "9acbf0e8eb45cdf4c86cc9b86ae7e03526675c3c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3aad513c68676dc93ae24ed70022093dc3920e18", "patch": "@@ -1,3 +1,8 @@\n+2019-10-03  Thomas Koenig <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/84487\n+\t* gfortran.dg/typebound_call_22.f03: xfail.\n+\n 2019-10-03 Mark Eggleston <mark.eggleston@codethink.com>\n \n \t* gfortran.dg/bad_operands.f90: New test."}, {"sha": "30f86937fe2fc2545632b208d49715cb737563b0", "filename": "gcc/testsuite/gfortran.dg/typebound_call_22.f03", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_call_22.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aad513c68676dc93ae24ed70022093dc3920e18/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_call_22.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_call_22.f03?ref=3aad513c68676dc93ae24ed70022093dc3920e18", "patch": "@@ -26,4 +26,4 @@ program test\n   call x%bar ()\n end program\n \n-! { dg-final { scan-tree-dump-times \"base \\\\(\\\\);\" 1 \"optimized\" } }\n+! { dg-final { scan-tree-dump-times \"base \\\\(\\\\);\" 1 \"optimized\" { xfail *-*-* } } }"}]}