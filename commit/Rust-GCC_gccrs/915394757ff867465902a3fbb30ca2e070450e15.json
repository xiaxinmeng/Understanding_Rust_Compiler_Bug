{"sha": "915394757ff867465902a3fbb30ca2e070450e15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTE1Mzk0NzU3ZmY4Njc0NjU5MDJhM2ZiYjMwY2EyZTA3MDQ1MGUxNQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2010-01-01T16:49:15Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2010-01-01T16:49:15Z"}, "message": "Remove asterisk in LTO section name.\n\n2010-01-01  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR lto/42531\n\t* lto-streamer-out.c (produce_asm): Revert the last change.\n\t(copy_function): Likewise.\n\n\t* lto-streamer.c (lto_get_section_name): Skip any leading\n\tasterisk in name.\n\nFrom-SVN: r155555", "tree": {"sha": "92ee68d775ae0bf315eeaf54533fbbbacd66323d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/92ee68d775ae0bf315eeaf54533fbbbacd66323d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/915394757ff867465902a3fbb30ca2e070450e15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/915394757ff867465902a3fbb30ca2e070450e15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/915394757ff867465902a3fbb30ca2e070450e15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/915394757ff867465902a3fbb30ca2e070450e15/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a28ff68b149819196a64a87f3e1b5bc3c4075632", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a28ff68b149819196a64a87f3e1b5bc3c4075632", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a28ff68b149819196a64a87f3e1b5bc3c4075632"}], "stats": {"total": 69775, "additions": 34893, "deletions": 34882}, "files": [{"sha": "95f4de7b702bc835a46800d81f68b4171e4737df", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 34870, "changes": 34879, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/915394757ff867465902a3fbb30ca2e070450e15/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/915394757ff867465902a3fbb30ca2e070450e15/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=915394757ff867465902a3fbb30ca2e070450e15"}, {"sha": "af1a94f7bc9e118d55873877fbaf847875adba5d", "filename": "gcc/ChangeLog-2009", "status": "added", "additions": 34876, "deletions": 0, "changes": 34876, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/915394757ff867465902a3fbb30ca2e070450e15/gcc%2FChangeLog-2009", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/915394757ff867465902a3fbb30ca2e070450e15/gcc%2FChangeLog-2009", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog-2009?ref=915394757ff867465902a3fbb30ca2e070450e15"}, {"sha": "6d1337378bb44a1f09f5249e7ac085bd466af278", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/915394757ff867465902a3fbb30ca2e070450e15/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/915394757ff867465902a3fbb30ca2e070450e15/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=915394757ff867465902a3fbb30ca2e070450e15", "patch": "@@ -1,6 +1,6 @@\n /* Write the GIMPLE representation to a file stream.\n \n-   Copyright 2009 Free Software Foundation, Inc.\n+   Copyright 2009, 2010 Free Software Foundation, Inc.\n    Contributed by Kenneth Zadeck <zadeck@naturalbridge.com>\n    Re-implemented by Diego Novillo <dnovillo@google.com>\n \n@@ -1784,8 +1784,6 @@ produce_asm (struct output_block *ob, tree fn)\n   if (section_type == LTO_section_function_body)\n     {\n       const char *name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (fn));\n-      if (name[0] == '*')\n-\tname++;\n       section_name = lto_get_section_name (section_type, name);\n     }\n   else\n@@ -2009,16 +2007,11 @@ copy_function (struct cgraph_node *node)\n   const char *data;\n   size_t len;\n   const char *name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (function));\n-  char *section_name;\n+  char *section_name =\n+    lto_get_section_name (LTO_section_function_body, name);\n   size_t i, j;\n   struct lto_in_decl_state *in_state;\n-  struct lto_out_decl_state *out_state;\n-\n-  if (name[0] == '*')\n-    name++;\n-  section_name =\n-    lto_get_section_name (LTO_section_function_body, name);\n-  out_state = lto_get_out_decl_state ();\n+  struct lto_out_decl_state *out_state = lto_get_out_decl_state ();\n \n   lto_begin_section (section_name, !flag_wpa);\n   free (section_name);"}, {"sha": "0b44845bcebeb9ae726e5bbf9136b7f18111afd1", "filename": "gcc/lto-streamer.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/915394757ff867465902a3fbb30ca2e070450e15/gcc%2Flto-streamer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/915394757ff867465902a3fbb30ca2e070450e15/gcc%2Flto-streamer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer.c?ref=915394757ff867465902a3fbb30ca2e070450e15", "patch": "@@ -1,7 +1,7 @@\n /* Miscellaneous utilities for GIMPLE streaming.  Things that are used\n    in both input and output are here.\n \n-   Copyright 2009 Free Software Foundation, Inc.\n+   Copyright 2009, 2010 Free Software Foundation, Inc.\n    Contributed by Doug Kwan <dougkwan@google.com>\n \n This file is part of GCC.\n@@ -143,6 +143,9 @@ lto_get_section_name (int section_type, const char *name)\n   switch (section_type)\n     {\n     case LTO_section_function_body:\n+      gcc_assert (name != NULL);\n+      if (name[0] == '*')\n+\tname++;\n       return concat (LTO_SECTION_NAME_PREFIX, name, NULL);\n \n     case LTO_section_static_initializer:"}]}