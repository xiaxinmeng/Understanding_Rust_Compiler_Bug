{"sha": "784f69be19ef920218a7b05d6fb2569596864afb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg0ZjY5YmUxOWVmOTIwMjE4YTdiMDVkNmZiMjU2OTU5Njg2NGFmYg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2011-01-17T18:18:24Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2011-01-17T18:18:24Z"}, "message": "rx: Replace sat builtin with ssaddsi3 pattern.\n\nA standalone __builtin_rx_sat isn't implementable due to needing\nto keep the flags live before reload.  Instead provide a saturating\nadd pattern, which hopefully will be pattern-matched by high-level\noptimizations.\n\nFrom-SVN: r168928", "tree": {"sha": "8681175cc31c180190b4eb6e6854f2044b49208b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8681175cc31c180190b4eb6e6854f2044b49208b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/784f69be19ef920218a7b05d6fb2569596864afb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/784f69be19ef920218a7b05d6fb2569596864afb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/784f69be19ef920218a7b05d6fb2569596864afb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/784f69be19ef920218a7b05d6fb2569596864afb/comments", "author": null, "committer": null, "parents": [{"sha": "f033541c61c4d7ca041a52c842d9358841334017", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f033541c61c4d7ca041a52c842d9358841334017", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f033541c61c4d7ca041a52c842d9358841334017"}], "stats": {"total": 51, "additions": 37, "deletions": 14}, "files": [{"sha": "8683ed3291d9b7ef9b36c6cd07b0be239742fdf5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/784f69be19ef920218a7b05d6fb2569596864afb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/784f69be19ef920218a7b05d6fb2569596864afb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=784f69be19ef920218a7b05d6fb2569596864afb", "patch": "@@ -1,5 +1,11 @@\n 2011-01-17  Richard Henderson  <rth@redhat.com>\n \n+\t* config/rx/rx.c (RX_BUILTIN_SAT): Remove.\n+\t(rx_init_builtins): Remove sat builtin.\n+\t(rx_expand_builtin): Likewise.\n+\t* config/rx/rx.md (ssaddsi3): New.\n+\t(*sat): Rename from sat.  Represent the CC_REG input.\n+\n \t* config/rx/predicates.md (rshift_operator): New.\n \t* config/rx/rx.c (rx_expand_insv): Remove.\n \t* config/rx/rx-protos.h: Update."}, {"sha": "0179b1ff520d4c954fb05eeadfbd59fffe1f7919", "filename": "gcc/config/rx/rx.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/784f69be19ef920218a7b05d6fb2569596864afb/gcc%2Fconfig%2Frx%2Frx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/784f69be19ef920218a7b05d6fb2569596864afb/gcc%2Fconfig%2Frx%2Frx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frx%2Frx.c?ref=784f69be19ef920218a7b05d6fb2569596864afb", "patch": "@@ -1847,7 +1847,6 @@ enum rx_builtin\n   RX_BUILTIN_REVW,\n   RX_BUILTIN_RMPA,\n   RX_BUILTIN_ROUND,\n-  RX_BUILTIN_SAT,\n   RX_BUILTIN_SETPSW,\n   RX_BUILTIN_WAIT,\n   RX_BUILTIN_max\n@@ -1902,7 +1901,6 @@ rx_init_builtins (void)\n   ADD_RX_BUILTIN1 (RACW,    \"racw\",    void,  integer);\n   ADD_RX_BUILTIN1 (ROUND,   \"round\",   intSI, float);\n   ADD_RX_BUILTIN1 (REVW,    \"revw\",    intSI, intSI);\n-  ADD_RX_BUILTIN1 (SAT,     \"sat\",     intSI, intSI);\n   ADD_RX_BUILTIN1 (WAIT,    \"wait\",    void,  void);\n }\n \n@@ -2100,8 +2098,6 @@ rx_expand_builtin (tree exp,\n     case RX_BUILTIN_ROUND:   return rx_expand_builtin_round (op, target);\n     case RX_BUILTIN_REVW:    return rx_expand_int_builtin_1_arg\n \t(op, target, gen_revw, false);\n-    case RX_BUILTIN_SAT:     return rx_expand_int_builtin_1_arg\n-\t(op, target, gen_sat, false);\n     case RX_BUILTIN_WAIT:    emit_insn (gen_wait ()); return NULL_RTX;\n \n     default:"}, {"sha": "a3db92c0ad5034e18ce99582f88b231c3fe5489d", "filename": "gcc/config/rx/rx.md", "status": "modified", "additions": 31, "deletions": 10, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/784f69be19ef920218a7b05d6fb2569596864afb/gcc%2Fconfig%2Frx%2Frx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/784f69be19ef920218a7b05d6fb2569596864afb/gcc%2Fconfig%2Frx%2Frx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frx%2Frx.md?ref=784f69be19ef920218a7b05d6fb2569596864afb", "patch": "@@ -1378,6 +1378,37 @@\n   [(set_attr \"length\" \"3,2,3\")]\n )\n \n+;; Saturate to 32-bits\n+(define_insn_and_split \"ssaddsi3\"\n+  [(set (match_operand:SI             0 \"register_operand\" \"=r\")\n+\t(ss_plus:SI (match_operand:SI 1 \"register_operand\"  \"r\")\n+\t\t    (match_operand:SI 2 \"rx_source_operand\" \"riQ\")))\n+   (clobber (reg:CC CC_REG))]\n+  \"\"\n+  \"#\"\n+  \"reload_completed\"\n+  [(parallel [(set (match_dup 0)\n+\t\t   (plus:SI (match_dup 1) (match_dup 2)))\n+\t      (set (reg:CC_ZSC CC_REG)\n+\t\t   (compare:CC_ZSC\n+\t\t     (plus:SI (match_dup 1) (match_dup 2))\n+\t\t     (const_int 0)))])\n+   (set (match_dup 0)\n+\t(unspec:SI [(match_dup 0) (reg:CC CC_REG)] \n+\t\t   UNSPEC_BUILTIN_SAT))]\n+   \"\"\n+)\n+\n+(define_insn \"*sat\"\n+  [(set (match_operand:SI             0 \"register_operand\" \"=r\")\n+\t(unspec:SI [(match_operand:SI 1 \"register_operand\"  \"0\")\n+\t\t    (reg:CC CC_REG)]\n+\t\t   UNSPEC_BUILTIN_SAT))]\n+  \"reload_completed\"\n+  \"sat\\t%0\"\n+  [(set_attr \"length\" \"2\")]\n+)\n+\n (define_insn \"subsi3\"\n   [(set (match_operand:SI           0 \"register_operand\" \"=r,r,r,r,r\")\n \t(minus:SI (match_operand:SI 1 \"register_operand\"  \"0,0,0,r,0\")\n@@ -2068,16 +2099,6 @@\n    (set_attr \"length\" \"3,5\")]\n )\n \n-;; Saturate to 32-bits\n-(define_insn \"sat\"\n-  [(set (match_operand:SI             0 \"register_operand\" \"=r\")\n-\t(unspec:SI [(match_operand:SI 1 \"register_operand\"  \"0\")]\n-\t\t   UNSPEC_BUILTIN_SAT))]\n-  \"\"\n-  \"sat\\t%0\"\n-  [(set_attr \"length\" \"2\")]\n-)\n-\n ;;---------- Control Registers ------------------------\n \n ;; Clear Processor Status Word"}]}