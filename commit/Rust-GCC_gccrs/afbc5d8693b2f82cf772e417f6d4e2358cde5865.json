{"sha": "afbc5d8693b2f82cf772e417f6d4e2358cde5865", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZiYzVkODY5M2IyZjgyY2Y3NzJlNDE3ZjZkNGUyMzU4Y2RlNTg2NQ==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "amylaar@redhat.com", "date": "2001-06-19T00:58:29Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2001-06-19T00:58:29Z"}, "message": "sh.c (output_branch): Delete bogus code.\n\n\t* sh.c (output_branch): Delete bogus code.\n\n\t* sh.c (initial_elimination_offset):\n\tFix FROM == RETURN_ADDRESS_POINTER_REGNUM case.\n\nFrom-SVN: r43450", "tree": {"sha": "c040cdfb9b0e9957c2909dec28a637bb227a0764", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c040cdfb9b0e9957c2909dec28a637bb227a0764"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afbc5d8693b2f82cf772e417f6d4e2358cde5865", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afbc5d8693b2f82cf772e417f6d4e2358cde5865", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afbc5d8693b2f82cf772e417f6d4e2358cde5865", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afbc5d8693b2f82cf772e417f6d4e2358cde5865/comments", "author": null, "committer": null, "parents": [{"sha": "c8b2822138be0f4c83da1cbd27cee0913a095760", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8b2822138be0f4c83da1cbd27cee0913a095760", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8b2822138be0f4c83da1cbd27cee0913a095760"}], "stats": {"total": 42, "additions": 17, "deletions": 25}, "files": [{"sha": "d0e6541ee5757daf66b4cdcaf2dfcfe39cd7c949", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afbc5d8693b2f82cf772e417f6d4e2358cde5865/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afbc5d8693b2f82cf772e417f6d4e2358cde5865/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=afbc5d8693b2f82cf772e417f6d4e2358cde5865", "patch": "@@ -1,3 +1,10 @@\n+Tue Jun 19 01:52:27 2001  J\"orn Rennecke <amylaar@redhat.com>\n+\n+\t* sh.c (output_branch): Delete bogus code.\n+\n+\t* sh.c (initial_elimination_offset):\n+\tFix FROM == RETURN_ADDRESS_POINTER_REGNUM case.\n+\n Mon Jun 18 12:50:49 2001  Jeffrey A Law  (law@cygnus.com)\n \n \t* flow.c (find_unreachable_blocks): New function."}, {"sha": "8afb976381bdfddc86c61c520f33ccdad428a3e3", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 10, "deletions": 25, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afbc5d8693b2f82cf772e417f6d4e2358cde5865/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afbc5d8693b2f82cf772e417f6d4e2358cde5865/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=afbc5d8693b2f82cf772e417f6d4e2358cde5865", "patch": "@@ -802,12 +802,8 @@ output_branch (logic, insn, operands)\n      rtx insn;\n      rtx *operands;\n {\n-  int len = get_attr_length (insn);\n-\n-  switch (len)\n+  switch (get_attr_length (insn))\n     {\n-    case 16:\n-    case 12:\n     case 6:\n       /* This can happen if filling the delay slot has caused a forward\n \t branch to exceed its range (we could reverse it, but only\n@@ -830,24 +826,16 @@ output_branch (logic, insn, operands)\n \t  if (final_sequence\n \t      && ! INSN_ANNULLED_BRANCH_P (XVECEXP (final_sequence, 0, 0)))\n \t    {\n-\t      asm_fprintf (asm_out_file, \"\\tb%s%ss\\t%LLF%d\\n\",\n-\t\t\t   logic ? \"f\" : \"t\",\n+\t      asm_fprintf (asm_out_file, \"\\tb%s%ss\\t%LLF%d\\n\", logic ? \"f\" : \"t\",\n \t                   ASSEMBLER_DIALECT ? \"/\" : \".\", label);\n \t      print_slot (final_sequence);\n \t    }\n \t  else\n-\t    asm_fprintf (asm_out_file, \"\\tb%s\\t%LLF%d\\n\", logic ? \"f\" : \"t\",\n-\t\t\t label);\n+\t    asm_fprintf (asm_out_file, \"\\tb%s\\t%LLF%d\\n\", logic ? \"f\" : \"t\", label);\n     \n-\t  if (len == 6)\n-\t    {\n-\t      output_asm_insn (\"bra\\t%l0\", &op0);\n-\t      fprintf (asm_out_file, \"\\tnop\\n\");\n-\t    }\n-\t  else\n-\t    output_far_jump (insn, op0);\n-\n-\t  ASM_OUTPUT_INTERNAL_LABEL (asm_out_file, \"LF\", label);\n+\t  output_asm_insn (\"bra\\t%l0\", &op0);\n+\t  fprintf (asm_out_file, \"\\tnop\\n\");\n+\t  ASM_OUTPUT_INTERNAL_LABEL(asm_out_file, \"LF\", label);\n     \n \t  return \"\";\n \t}\n@@ -856,6 +844,9 @@ output_branch (logic, insn, operands)\n     case 2:\n       return logic ? \"bt%.\\t%l0\" : \"bf%.\\t%l0\";\n     default:\n+      /* There should be no longer branches now - that would\n+\t indicate that something has destroyed the branches set\n+\t up in machine_dependent_reorg.  */\n       abort ();\n     }\n }\n@@ -4555,13 +4546,7 @@ initial_elimination_offset (from, to)\n \n   if (from == RETURN_ADDRESS_POINTER_REGNUM\n       && (to == FRAME_POINTER_REGNUM || to == STACK_POINTER_REGNUM))\n-    {\n-      int i, n = total_saved_regs_space;\n-      for (i = PR_REG-1; i >= 0; i--)\n-\tif (live_regs_mask & (1 << i))\n-\t  n -= 4;\n-      return n + total_auto_space;\n-    }\n+    return UNITS_PER_WORD + total_auto_space;\n \n   abort ();\n }"}]}