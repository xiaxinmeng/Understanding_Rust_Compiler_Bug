{"sha": "d40790c8ac4f81026252a119e11a104ffd49701f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQwNzkwYzhhYzRmODEwMjYyNTJhMTE5ZTExYTEwNGZmZDQ5NzAxZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-05-02T16:17:02Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-05-02T16:17:02Z"}, "message": "re PR rtl-optimization/70467 (Useless \"and [esp],-1\" emitted on AND with uint64_t variable)\n\n\tPR rtl-optimization/70467\n\t* ipa-pure-const.c (check_call): Handle internal calls even in\n\tipa mode like in local mode.\n\nFrom-SVN: r235764", "tree": {"sha": "31e0a2f76e9cd3c79a5cc2a312aca0859da30ed4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31e0a2f76e9cd3c79a5cc2a312aca0859da30ed4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d40790c8ac4f81026252a119e11a104ffd49701f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d40790c8ac4f81026252a119e11a104ffd49701f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d40790c8ac4f81026252a119e11a104ffd49701f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d40790c8ac4f81026252a119e11a104ffd49701f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "00f357941db820bb038818b698d782d7b58f5432", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00f357941db820bb038818b698d782d7b58f5432", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00f357941db820bb038818b698d782d7b58f5432"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "5bf2ffa7c35e954170b953c890f3a2bed4984eef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d40790c8ac4f81026252a119e11a104ffd49701f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d40790c8ac4f81026252a119e11a104ffd49701f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d40790c8ac4f81026252a119e11a104ffd49701f", "patch": "@@ -1,3 +1,9 @@\n+2016-05-02  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/70467\n+\t* ipa-pure-const.c (check_call): Handle internal calls even in\n+\tipa mode like in local mode.\n+\n 2016-05-02  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* doc/install.texi: Document supported in-tree gmp/mpfr/mpc versions."}, {"sha": "63fbf581c71e41cce6ea7879c542ae5d506b55fb", "filename": "gcc/ipa-pure-const.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d40790c8ac4f81026252a119e11a104ffd49701f/gcc%2Fipa-pure-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d40790c8ac4f81026252a119e11a104ffd49701f/gcc%2Fipa-pure-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-pure-const.c?ref=d40790c8ac4f81026252a119e11a104ffd49701f", "patch": "@@ -616,8 +616,10 @@ check_call (funct_state local, gcall *call, bool ipa)\n   /* Either callee is unknown or we are doing local analysis.\n      Look to see if there are any bits available for the callee (such as by\n      declaration or because it is builtin) and process solely on the basis of\n-     those bits. */\n-  else if (!ipa)\n+     those bits.  Handle internal calls always, those calls don't have\n+     corresponding cgraph edges and thus aren't processed during\n+     the propagation.  */\n+  else if (!ipa || gimple_call_internal_p (call))\n     {\n       enum pure_const_state_e call_state;\n       bool call_looping;"}]}