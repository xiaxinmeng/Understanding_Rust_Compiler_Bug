{"sha": "7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2M2ZDg2Y2MwNzAxYzk2M2I1Y2M4ZmQ2Y2FjOGNkMWYxYmUzOTkyYw==", "commit": {"author": {"name": "Jon Grant", "email": "04@jguk.org", "date": "2010-04-29T17:42:54Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2010-04-29T17:42:54Z"}, "message": "collect2.c (vflag): Change type from int to bool.\n\n2010-04-29  Jon Grant <04@jguk.org>\n\t\n\t* collect2.c (vflag): Change type from int to bool.\n\t(debug): Likewise.\n\t(helpflag): New global bool.\n\t(main): Set vflag and debug with boolean, not integer truth\n\tvalues.  Accept new \"--help\" option and output usage text if\n\tfound.\n\t* collect2.h (vflag): Update prototype.\n\t(debug): Likewise.\n\nFrom-SVN: r158908", "tree": {"sha": "c94b2a869151dcadbd829d86a475c5322044156d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c94b2a869151dcadbd829d86a475c5322044156d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c/comments", "author": null, "committer": null, "parents": [{"sha": "55040b34cd2888f14e0ae0566d6d193572284341", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55040b34cd2888f14e0ae0566d6d193572284341", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55040b34cd2888f14e0ae0566d6d193572284341"}], "stats": {"total": 42, "additions": 36, "deletions": 6}, "files": [{"sha": "4d6cdfa4005b8f63994d032c580bd01b29030934", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c", "patch": "@@ -1,3 +1,14 @@\n+2010-04-29  Jon Grant <04@jguk.org>\n+\t\n+\t* collect2.c (vflag): Change type from int to bool.\n+\t(debug): Likewise.\n+\t(helpflag): New global bool.\n+\t(main): Set vflag and debug with boolean, not integer truth\n+\tvalues.  Accept new \"--help\" option and output usage text if\n+\tfound.\n+\t* collect2.h (vflag): Update prototype.\n+\t(debug): Likewise.\n+\t\n 2010-04-29  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR bootstrap/43935"}, {"sha": "6b2bb500588c192bd1f9985bc492e5cddebfcb4e", "filename": "gcc/collect2.c", "status": "modified", "additions": 24, "deletions": 5, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c", "patch": "@@ -178,7 +178,7 @@ struct head\n   int number;\n };\n \n-int vflag;\t\t\t\t/* true if -v */\n+bool vflag;\t\t\t\t/* true if -v or --version */ \n static int rflag;\t\t\t/* true if -r */\n static int strip_flag;\t\t\t/* true if -s */\n static const char *demangle_flag;\n@@ -197,7 +197,8 @@ enum lto_mode_d {\n /* Current LTO mode.  */\n static enum lto_mode_d lto_mode = LTO_MODE_NONE;\n \n-int debug;\t\t\t\t/* true if -debug */\n+bool debug;\t\t\t\t/* true if -debug */\n+bool helpflag;\t\t\t/* true if --help */\n \n static int shared_obj;\t\t\t/* true if -shared */\n \n@@ -1243,7 +1244,7 @@ main (int argc, char **argv)\n     for (i = 1; argv[i] != NULL; i ++)\n       {\n \tif (! strcmp (argv[i], \"-debug\"))\n-\t  debug = 1;\n+\t  debug = true;\n         else if (! strcmp (argv[i], \"-flto\") && ! use_plugin)\n \t  {\n \t    use_verbose = true;\n@@ -1473,7 +1474,7 @@ main (int argc, char **argv)\n       if (use_verbose && *q == '-' && q[1] == 'v' && q[2] == 0)\n \t{\n \t  /* Turn on trace in collect2 if needed.  */\n-\t  vflag = 1;\n+\t  vflag = true;\n \t}\n     }\n   obstack_free (&temporary_obstack, temporary_firstobj);\n@@ -1603,7 +1604,7 @@ main (int argc, char **argv)\n \n \t    case 'v':\n \t      if (arg[2] == '\\0')\n-\t\tvflag = 1;\n+\t\tvflag = true;\n \t      break;\n \n \t    case '-':\n@@ -1634,6 +1635,10 @@ main (int argc, char **argv)\n \t\t}\n \t      else if (strncmp (arg, \"--sysroot=\", 10) == 0)\n \t\ttarget_system_root = arg + 10;\n+\t      else if (strncmp (arg, \"--version\", 9) == 0)\n+\t\tvflag = true;\n+\t      else if (strncmp (arg, \"--help\", 9) == 0)\n+\t\thelpflag = true;\n \t      break;\n \t    }\n \t}\n@@ -1735,6 +1740,20 @@ main (int argc, char **argv)\n       fprintf (stderr, \"\\n\");\n     }\n \n+  if (helpflag)\n+    {\n+      fprintf (stderr, \"Usage: collect2 [options]\\n\");\n+      fprintf (stderr, \" Wrap linker and generate constructor code if needed.\\n\");\n+      fprintf (stderr, \" Options:\\n\");\n+      fprintf (stderr, \"  -debug          Enable debug output\\n\");\n+      fprintf (stderr, \"  --help          Display this information\\n\");\n+      fprintf (stderr, \"  -v, --version   Display this program's version number\\n\");\n+      fprintf (stderr, \"Overview: http://gcc.gnu.org/onlinedocs/gccint/Collect2.html\\n\");\n+      fprintf (stderr, \"Report bugs: %s\\n\", bug_report_url);\n+\n+      collect_exit (0);\n+    }\n+\n   if (debug)\n     {\n       const char *ptr;"}, {"sha": "e20cc43017ac9d183b7dcf1e012e938038e12f7f", "filename": "gcc/collect2.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c/gcc%2Fcollect2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c/gcc%2Fcollect2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.h?ref=7c6d86cc0701c963b5cc8fd6cac8cd1f1be3992c", "patch": "@@ -39,7 +39,7 @@ extern const char *lderrout;\n extern const char *c_file_name;\n extern struct obstack temporary_obstack;\n extern char *temporary_firstobj;\n-extern int vflag, debug;\n+extern bool vflag, debug;\n \n extern void error (const char *, ...) ATTRIBUTE_PRINTF_1;\n extern void notice_translated (const char *, ...) ATTRIBUTE_PRINTF_1;"}]}