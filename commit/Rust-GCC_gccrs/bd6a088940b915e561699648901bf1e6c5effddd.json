{"sha": "bd6a088940b915e561699648901bf1e6c5effddd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQ2YTA4ODk0MGI5MTVlNTYxNjk5NjQ4OTAxYmYxZTZjNWVmZmRkZA==", "commit": {"author": {"name": "Eric Christopher", "email": "echristo@gcc.gnu.org", "date": "2006-12-04T02:10:10Z"}, "committer": {"name": "Eric Christopher", "email": "echristo@gcc.gnu.org", "date": "2006-12-04T02:10:10Z"}, "message": "re PR target/24598 (Need to support odcctools and its ablity to use --prefix and libtool)\n\n2006-12-03  Eric Christopher  <echristo@apple.com>\n\n        PR target/24598\n        * config/t-slibgcc-darwin: Pass -install_name.\n        * config/darwin.h (LINK_COMMAND_SPEC): Remove use of\n        libtool. Only pass through options that the linker recognizes.\n        (LINK_SPEC): Update comment. Translate options.\n        (STARTFILE_SPEC): Add dylib1.o for shared libraries.\n        * config/darwin9.h (LINK_COMMAND_SPEC): Ditto above.\n\nFrom-SVN: r119477", "tree": {"sha": "638a02afc406ea4648454e7cceb73bf95b4020b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/638a02afc406ea4648454e7cceb73bf95b4020b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd6a088940b915e561699648901bf1e6c5effddd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd6a088940b915e561699648901bf1e6c5effddd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd6a088940b915e561699648901bf1e6c5effddd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd6a088940b915e561699648901bf1e6c5effddd/comments", "author": null, "committer": null, "parents": [{"sha": "d184546c666db41955881ac4abacb1651064596a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d184546c666db41955881ac4abacb1651064596a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d184546c666db41955881ac4abacb1651064596a"}], "stats": {"total": 118, "additions": 62, "deletions": 56}, "files": [{"sha": "e7f61255f2fffbe90ecc652da3aaf9dd4d905784", "filename": "gcc/ChangeLog", "status": "modified", "additions": 45, "deletions": 35, "changes": 80, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bd6a088940b915e561699648901bf1e6c5effddd", "patch": "@@ -1,3 +1,13 @@\n+2006-12-03  Eric Christopher  <echristo@apple.com>\n+\n+\tPR target/24598\n+\t* config/t-slibgcc-darwin: Pass -install_name.\n+\t* config/darwin.h (LINK_COMMAND_SPEC): Remove use of\n+\tlibtool. Only pass through options that the linker recognizes.\n+\t(LINK_SPEC): Update comment. Translate options.\n+\t(STARTFILE_SPEC): Add dylib1.o for shared libraries.\n+\t* config/darwin9.h (LINK_COMMAND_SPEC): Ditto above.\n+\n 2006-12-03  Dorit Nuzman  <dorit@il.ibm.com>\n \n \t* config/spu/spu.md (smaxv4sf3, sminv4sf3): New.\n@@ -31,7 +41,7 @@\n \n \tPR c/27953\n \t* c-decl.c (store_parm_decls_oldstyle): Robustify.\n-\t\n+\n 2006-11-30  Jan Hubicka  <jh@suse.cz>\n \t    Uros Bizjak  <ubizjak@gmail.com>\n \n@@ -110,7 +120,7 @@\n \t(coalesce_ssa_name): Don't check for combine-temps.\n \t(coalesce_vars): Remove.\n \t(check_replaceable): Use num_imm_uses.\n-\t(remove_ssa_form, insert_backedge_copies, rewrite_out_of_ssa): Don't \n+\t(remove_ssa_form, insert_backedge_copies, rewrite_out_of_ssa): Don't\n \tcheck for combine-temps.\n \t(rewrite_out_of_ssa): Never create a ref_count in the var_map.\n \t* tree-ssa-copyrename.c (copy_rename_partition_coalesce): Change parms\n@@ -233,8 +243,8 @@\n 2006-11-30  Carlos O'Donell  <carlos@codesourcery.com>\n \n \t* doc/tm.texi (MAX_OFILE_ALIGNMENT): Document default.\n-\t* config/elfos.h [!MAX_OFILE_ALIGNMENT] (MAX_OFILE_ALIGNMENT): \n-\tDefault is the largest alignment supported for 32-bit ELF and \n+\t* config/elfos.h [!MAX_OFILE_ALIGNMENT] (MAX_OFILE_ALIGNMENT):\n+\tDefault is the largest alignment supported for 32-bit ELF and\n \trepresentable on a 32-bit host.\n \n 2006-11-30  Janis Johnson  <janis187@us.ibm.com>\n@@ -336,7 +346,7 @@\n \tPR target/29945\n \t* config/spu/spu.md  (extend_compare<mode>): New pattern.\n \t(extend_compare): Change to expand and use the above pattern.\n-\t\n+\n 2006-11-29  Janis Johnson  <janis187@us.ibm.com>\n \n \t* config/dfp-bit.c (DFP_TO_INT): Fix rounding mode.\n@@ -351,8 +361,8 @@\n \t* haifa-sched.c: Remove define LINE_NOTE(INSN).  Remove line_note_head.\n \tUpdate documentation.\n \t(associate_line_notes_with_blocks): Kill.\n-\t(extend_bb): Remove basic block argument, put void instead. \n-\tRemove line number handling for each bb. \n+\t(extend_bb): Remove basic block argument, put void instead.\n+\tRemove line number handling for each bb.\n \t(save_line_notes): Kill.\n \t(restore_line_notes): Kill.\n \t(sched_init): Remove line_note_head initialization.\n@@ -365,13 +375,13 @@\n \t* sched-int.h (struct haifa_insn_data): Remove line_note.\n \t(save_line_notes): Remove declaration.\n \t(restore_line_notes): Remove declaration.\n-\t* modulo-sched.c (loop_canon_p): Update debug info printing \n+\t* modulo-sched.c (loop_canon_p): Update debug info printing\n \tby using insn locators instead of line note.\n-\t(sms_schedule): Update debug info printing, by using insn \n+\t(sms_schedule): Update debug info printing, by using insn\n \tlocators instead of line note.\n-\t* sched-rgn.c (debug_dependencies): Remove handling of case \n+\t* sched-rgn.c (debug_dependencies): Remove handling of case\n \tn>0 (line number), since it's a dead code.\n-\t(schedule_region): Remove save_line_notes and \n+\t(schedule_region): Remove save_line_notes and\n \trestore_line_notes calls.\n \n 2006-11-29  Joseph Myers  <joseph@codesourcery.com>\n@@ -389,7 +399,7 @@\n \n \t* Makefile.in (tree-ssanames.o): Remove gt-tree-ssanames.h,\n \tsince it no longer exists.\n-\t    \n+\n 2006-11-29  Duncan Sands  <baldrick@free.fr>\n \n \tPR tree-optimization/23744\n@@ -611,7 +621,7 @@\n \tPR target/29319\n \t* config/s390/predicates.md (larl_operand): Check addend of larl\n \toperand to be in range of -/+2GB.\n-\t* config/s390/s390.c (legitimize_pic_address): Likewise.  \n+\t* config/s390/s390.c (legitimize_pic_address): Likewise.\n \tChanged type of variable even to HOST_WIDE_INT.\n \n 2006-11-27  Jan Hubicka  <jh@suse.cz>\n@@ -753,15 +763,15 @@\n \n \t* builtins.c (fold_builtin_fmin_fmax): Handle NaN arguments.\n \n-2006-11-26  Razya Ladklesky  <razya@il.ibm.com> \n+2006-11-26  Razya Ladklesky  <razya@il.ibm.com>\n \n \t* testsuite/gcc.dg/ipa/ipa-6.c: New.\n \n 2006-11-26  Razya Ladklesky  <razya@il.ibm.com>\n-\t\n+\n \tPR tree-optimization/29122\n-\t* tree-inline.c (tree_function_versioning): Update DECL_ASSEMBLER_NAME \n-\tfor the new version.  Assign NULL to DECL_RTL of the new version. \n+\t* tree-inline.c (tree_function_versioning): Update DECL_ASSEMBLER_NAME\n+\tfor the new version.  Assign NULL to DECL_RTL of the new version.\n \n 2006-11-25  Uros Bizjak  <ubizjak@gmail.com>\n \n@@ -917,8 +927,8 @@\n \t(fmodsf3, fmoddf3, remaindersf3, remainderdf3): Use noop\n \ttruncation patterns.\n \n-\t* reg-stack.c (get_true_reg): Handle UNSPEC_TRUNC_NOOP. \n-\t\n+\t* reg-stack.c (get_true_reg): Handle UNSPEC_TRUNC_NOOP.\n+\n 2006-11-24  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/29955\n@@ -937,7 +947,7 @@\n \tPR tree-opt/29964\n \t* ipa-pure-const.c (check_tree): If the original tree\n \tis volatile return early and say the function is not pure\n-\tnor const.  Remove the volatile check for writes.  \n+\tnor const.  Remove the volatile check for writes.\n \t(analyze_function): Print out the result of the local\n \tanalysis pass.\n \n@@ -953,7 +963,7 @@\n 2006-11-24  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* config/s390.c (s390_emit_compare_and_swap): New function.\n-\t(s390_expand_cs_hqi, s390_expand_atomic): Call \n+\t(s390_expand_cs_hqi, s390_expand_atomic): Call\n \ts390_emit_compare_and_swap.\n \n 2006-11-23  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n@@ -983,7 +993,7 @@\n \n 2006-11-23  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n-\tPR c/9072 \n+\tPR c/9072\n \t* c.opt (Wtraditional-conversion): New.\n \t(Wconversion): Update description.\n \t* c-typeck.c (convert_arguments): Warnings for prototypes causing\n@@ -1414,14 +1424,14 @@\n 2006-11-20  Carlos O'Donell  <carlos@codesourcery.com>\n \t    Mark Mitchell  <mark@codesourcery.com>\n \n-\t* cppdefault.c: Define cpp_PREFIX, cpp_PREFIX_len, and \n+\t* cppdefault.c: Define cpp_PREFIX, cpp_PREFIX_len, and\n \tgcc_exec_prefix.\n \t(cpp_relocated): New function.\n-\t* cppdefault.h: Declare cpp_PREFIX, cpp_PREFIX_len, gcc_exec_prefix \n-\tand cpp_relocated. \n+\t* cppdefault.h: Declare cpp_PREFIX, cpp_PREFIX_len, gcc_exec_prefix\n+\tand cpp_relocated.\n \t* Makefile.in (PREPROCESSOR_DEFINES): Add -DPREFIX option.\n \t* c-incpath.c (add_standard_paths): Call cpp_relocated. If relocated,\n-\treplace configured prefix with gcc_exec_prefix. \n+\treplace configured prefix with gcc_exec_prefix.\n \n 2006-11-20  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n@@ -1529,7 +1539,7 @@\n \tx86_pad_returns): Add m_CORE2.\n \t(override_options): Add entries for Core2.\n \t(ix86_issue_rate): Add case for Core2.\n-\t\n+\n 2006-11-18  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* doc/invoke.texi: Fix mno-isel typo.\n@@ -1713,7 +1723,7 @@\n \t* config.gcc: Add suppport for darwin9.h.\n \t* config/darwin9.h: Add.\n \t* doc/install.texi (Specific): Clarify darwin documentation.\n-\t\n+\n 2006-11-16  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* arm.h (CONSTANT_ALIGNMENT): Don't over-align strings when\n@@ -1881,7 +1891,7 @@\n \t(cstoresi_nltu_thumb, thumb_addsi3_addgeu): New patterns.\n \n 2006-11-14  Caroline Tice  <ctice@apple.com>\n-\t\t\n+\n \t* dwarf2out.c (debug_pubtypes_section): New static global variable.\n \t(pubname_entry):  Add DEF_VEC_O and DEF_VEC_ALLOC_O statements for\n \tthis type.\n@@ -1890,24 +1900,24 @@\n \t(pubname_table_allocated): Remove static global variable.\n \t(pubname_table_in_use): Remove static global variable.\n \t(PUBNAME_TABLE_INCREMENT): Remove constant.\n-\t(size_of_pubnames): Add parameter to deal with either pubnames or \n+\t(size_of_pubnames): Add parameter to deal with either pubnames or\n \tpubtypes, and change code to deal with table being a vector.\n \t(add_pubname):  Change to deal with table being a vector.\n \t(add_pubtype):  New function.\n-\t(output_pubnames): Add parameter to deal with either pubnames or \n+\t(output_pubnames): Add parameter to deal with either pubnames or\n \tpubtypes, and change code to deal with table being a vector.\n \t(gen_array_type_die):  Add call to add_pubtype.\n \t(gen_enumeration_type_die): Add call to add_pubtype.\n \t(gen_struct_or_union_type_die): Add call to add_pubtype.\n \t(gen_subroutine_type_die): Add call to add_pubtype.\n \t(gen_typedef_die):  Add call to add_pubtype.\n-\t(dwarf2out_init): Add code to initialize pubname_table and \n+\t(dwarf2out_init): Add code to initialize pubname_table and\n \tpubtype_table vectors; also initialize debug_pubtypes_section.\n \t(prune_unused_types):  Change to deal with pubnames being a vector.\n-\t(dwarf2out_finish): Change to deal with pubnames being a vector; add \n-\tpubnames table to call to output_pubnames;  Add code to output pubtypes \n+\t(dwarf2out_finish): Change to deal with pubnames being a vector; add\n+\tpubnames table to call to output_pubnames;  Add code to output pubtypes\n \ttable if DEBUG_PUBTYPES_SECTION is defined.\n-\t* config/darwin.c (darwin_file_start):  Add DEBUG_PUBTYPES_SECTION to \n+\t* config/darwin.c (darwin_file_start):  Add DEBUG_PUBTYPES_SECTION to\n \tdebugnames.\n \t* config/darwin.h (DEBUG_PUBTYPES_SECTION): Define new global variable.\n "}, {"sha": "623ebd81a7e5c54419bb21bfc3f748c6b15470ee", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 14, "deletions": 17, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=bd6a088940b915e561699648901bf1e6c5effddd", "patch": "@@ -230,9 +230,8 @@ extern GTY(()) int darwin_ms_struct;\n    linkers, and for positional arguments like libraries.  */\n #define LINK_COMMAND_SPEC \"\\\n %{!fdump=*:%{!fsyntax-only:%{!c:%{!M:%{!MM:%{!E:%{!S:\\\n-    %{!Zdynamiclib:%(linker)}%{Zdynamiclib:/usr/bin/libtool} \\\n-    %l %X %{d} %{s} %{t} %{Z} \\\n-    %{!Zdynamiclib:%{A} %{e*} %{m} %{N} %{n} %{r} %{u*} %{x} %{z}} \\\n+    %(linker) %l %X %{d} %{s} %{t} %{Z} \\\n+    %{A} %{e*} %{m} %{r} %{x} \\\n     %{o*}%{!o:-o a.out} \\\n     %{!A:%{!nostdlib:%{!nostartfiles:%S}}} \\\n     %{L*} %{fopenmp:%:include(libgomp.spec)%(link_gomp)}   \\\n@@ -251,12 +250,9 @@ extern GTY(()) int darwin_ms_struct;\n #endif\n \n /* Please keep the random linker options in alphabetical order (modulo\n-   'Z' and 'no' prefixes).  Options that can only go to one of libtool\n-   or ld must be listed twice, under both !Zdynamiclib and\n-   Zdynamiclib, with one of the cases reporting an error.  */\n-/* Note that options taking arguments may appear multiple times on a\n-   command line with different arguments each time, so put a * after\n-   their names so all of them get passed.  */\n+   'Z' and 'no' prefixes). Note that options taking arguments may appear\n+   multiple times on a command line with different arguments each time,\n+   so put a * after their names so all of them get passed.  */\n #define LINK_SPEC  \\\n   \"%{static}%{!static:-dynamic} \\\n    %{fgnu-runtime:%:replace-outfile(-lobjc -lobjc-gnu)}\\\n@@ -274,20 +270,20 @@ extern GTY(()) int darwin_ms_struct;\n      %{keep_private_externs} \\\n      %{private_bundle} \\\n     } \\\n-   %{Zdynamiclib: \\\n+   %{Zdynamiclib: -dylib \\\n      %{Zbundle:%e-bundle not allowed with -dynamiclib} \\\n      %{Zbundle_loader*:%e-bundle_loader not allowed with -dynamiclib} \\\n      %{client_name*:%e-client_name not allowed with -dynamiclib} \\\n-     %{compatibility_version*} \\\n-     %{current_version*} \\\n-     %{Zforce_cpusubtype_ALL:-arch_only %(darwin_arch)} \\\n-     %{!Zforce_cpusubtype_ALL: -arch_only %(darwin_subarch)} \\\n+     %{compatibility_version*:-dylib_compatibility_version %*} \\\n+     %{current_version*:-dylib_current_version %*} \\\n+     %{Zforce_cpusubtype_ALL:-arch %(darwin_arch)} \\\n+     %{!Zforce_cpusubtype_ALL: -arch %(darwin_subarch)} \\\n      %{Zforce_flat_namespace:%e-force_flat_namespace not allowed with -dynamiclib} \\\n-     %{Zinstall_name*:-install_name %*} \\\n+     %{Zinstall_name*:-dylib_install_name %*} \\\n      %{keep_private_externs:%e-keep_private_externs not allowed with -dynamiclib} \\\n      %{private_bundle:%e-private_bundle not allowed with -dynamiclib} \\\n     } \\\n-   %{Zall_load:-all_load}%{Zdynamiclib:%{!Zall_load:-noall_load}} \\\n+   %{Zall_load:-all_load} \\\n    %{Zallowable_client*:-allowable_client %*} \\\n    %{Zbind_at_load:-bind_at_load} \\\n    %{Zarch_errors_fatal:-arch_errors_fatal} \\\n@@ -371,7 +367,8 @@ extern GTY(()) int darwin_ms_struct;\n \n #undef  STARTFILE_SPEC\n #define STARTFILE_SPEC\t\t\t\t\t\t\t    \\\n-  \"%{!Zdynamiclib:%{Zbundle:%{!static:-lbundle1.o}}\t\t\t    \\\n+  \"%{Zdynamiclib: -ldylib1.o}\t\t\t\t\t\t    \\\n+   %{!Zdynamiclib:%{Zbundle:%{!static:-lbundle1.o}}\t\t\t    \\\n      %{!Zbundle:%{pg:%{static:-lgcrt0.o}\t\t\t\t    \\\n                      %{!static:%{object:-lgcrt0.o}\t\t\t    \\\n                                %{!object:%{preload:-lgcrt0.o}\t\t    \\"}, {"sha": "58e980630df070ab03b4e82b0a4a47274ca7aa26", "filename": "gcc/config/darwin9.h", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2Fconfig%2Fdarwin9.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2Fconfig%2Fdarwin9.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin9.h?ref=bd6a088940b915e561699648901bf1e6c5effddd", "patch": "@@ -6,9 +6,8 @@\n #undef LINK_COMMAND_SPEC\n #define LINK_COMMAND_SPEC \"\\\n %{!fdump=*:%{!fsyntax-only:%{!c:%{!M:%{!MM:%{!E:%{!S:\\\n-    %{!Zdynamiclib:%(linker)}%{Zdynamiclib:/usr/bin/libtool} \\\n-    %l %X %{d} %{s} %{t} %{Z} \\\n-    %{!Zdynamiclib:%{A} %{e*} %{m} %{N} %{n} %{r} %{u*} %{x} %{z}} \\\n+    %(linker) %l %X %{d} %{s} %{t} %{Z} \\\n+    %{A} %{e*} %{m} %{r} %{x} \\\n     %{o*}%{!o:-o a.out} \\\n     %{!A:%{!nostdlib:%{!nostartfiles:%S}}} \\\n     %{L*} %{fopenmp:%:include(libgomp.spec)%(link_gomp)}   \\"}, {"sha": "f41acae1b3f73a6ca69b7250e4b210eee8674a79", "filename": "gcc/config/t-slibgcc-darwin", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2Fconfig%2Ft-slibgcc-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd6a088940b915e561699648901bf1e6c5effddd/gcc%2Fconfig%2Ft-slibgcc-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-darwin?ref=bd6a088940b915e561699648901bf1e6c5effddd", "patch": "@@ -16,7 +16,7 @@ SHLIB_LC = -lc\n # Note that this version is used for the loader, not the linker; the linker\n # uses the stub versions named by $(LIBGCC).\n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -dynamiclib -nodefaultlibs \\\n-\t-Wl,-install_name,$(slibdir)/$(SHLIB_INSTALL_NAME) \\\n+\t-install_name $(slibdir)/$(SHLIB_INSTALL_NAME) \\\n \t-single_module -o $(SHLIB_DIR)/$(SHLIB_SONAME).tmp \\\n \t-Wl,-exported_symbols_list,$(SHLIB_MAP) \\\n \t$(SHLIB_VERSTRING) \\"}]}