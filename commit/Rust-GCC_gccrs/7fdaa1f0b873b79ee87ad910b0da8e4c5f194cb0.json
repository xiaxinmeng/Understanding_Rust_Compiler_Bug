{"sha": "7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2ZkYWExZjBiODczYjc5ZWU4N2FkOTEwYjBkYThlNGM1ZjE5NGNiMA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-09-15T21:25:17Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-09-15T21:25:17Z"}, "message": "compiler: call error_statement for fallthrough in last case\n    \n    It is possible to do this check in backend, by walking the\n    block and check whether the last statement is a goto. But it\n    seems easier to do it in the frontend, where it can simply use\n    is_fallthrough.\n    \n    Reviewed-on: https://go-review.googlesource.com/63690\n\nFrom-SVN: r252851", "tree": {"sha": "dc50a2e5e02ec3272517b470a35702f0f3385728", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc50a2e5e02ec3272517b470a35702f0f3385728"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0/comments", "author": null, "committer": null, "parents": [{"sha": "026a79f70cf33f836ea5275eda72d4870a3041e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/026a79f70cf33f836ea5275eda72d4870a3041e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/026a79f70cf33f836ea5275eda72d4870a3041e5"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "aafc5269095e60cfc62a7e3764507f341154ab68", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0", "patch": "@@ -1,4 +1,4 @@\n-de7b370901c4fc6852eaa7372282bb699429ec4a\n+70cf67704699c8bcaf6f52437812367cdc4ad169\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "bea57cd6836b7ac67389f71cabf45378267d9eb5", "filename": "gcc/go/gofrontend/statements.cc", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.cc?ref=7fdaa1f0b873b79ee87ad910b0da8e4c5f194cb0", "patch": "@@ -3707,6 +3707,12 @@ Case_clauses::get_backend(Translate_context* context,\n       std::vector<Bexpression*> cases;\n       Bstatement* stat = p->get_backend(context, break_label, &case_constants,\n \t\t\t\t\t&cases);\n+      // The final clause can't fall through.\n+      if (i == c - 1 && p->is_fallthrough())\n+        {\n+          go_assert(saw_errors());\n+          stat = context->backend()->error_statement();\n+        }\n       (*all_cases)[i].swap(cases);\n       (*all_statements)[i] = stat;\n     }"}]}