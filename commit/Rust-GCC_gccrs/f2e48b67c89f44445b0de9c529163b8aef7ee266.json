{"sha": "f2e48b67c89f44445b0de9c529163b8aef7ee266", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjJlNDhiNjdjODlmNDQ0NDViMGRlOWM1MjkxNjNiOGFlZjdlZTI2Ng==", "commit": {"author": {"name": "Brendan Kehoe", "email": "brendan@cygnus.com", "date": "1998-06-12T12:56:22Z"}, "committer": {"name": "Brendan Kehoe", "email": "brendan@gcc.gnu.org", "date": "1998-06-12T12:56:22Z"}, "message": "pt.c (check_explicit_specialization): If DECLARATOR turned into an error_mark_node from lookup_template_function...\n\n\t* pt.c (check_explicit_specialization): If DECLARATOR turned into\n\tan error_mark_node from lookup_template_function, return the same.\n\t(determine_specialization): Also make sure TEMPLATE_ID isn't an\n\terror_mark_node, before we try to read its operands.\n\t* decl.c (grokdeclarator): If we got an error_mark_node from\n\tcheck_explicit_specialization, just return it right back.\n\nFrom-SVN: r20444", "tree": {"sha": "56757757a80d6d16d66fd71f0274e1a096021b6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56757757a80d6d16d66fd71f0274e1a096021b6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2e48b67c89f44445b0de9c529163b8aef7ee266", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2e48b67c89f44445b0de9c529163b8aef7ee266", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2e48b67c89f44445b0de9c529163b8aef7ee266", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2e48b67c89f44445b0de9c529163b8aef7ee266/comments", "author": null, "committer": null, "parents": [{"sha": "38831dfe51e50e0c24de08cd1657efd69ca809ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38831dfe51e50e0c24de08cd1657efd69ca809ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38831dfe51e50e0c24de08cd1657efd69ca809ac"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "ee9d746318b59f8b09a7b9ca7338ad3d8543beae", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e48b67c89f44445b0de9c529163b8aef7ee266/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e48b67c89f44445b0de9c529163b8aef7ee266/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f2e48b67c89f44445b0de9c529163b8aef7ee266", "patch": "@@ -1,3 +1,12 @@\n+1998-06-12  Brendan Kehoe  <brendan@cygnus.com>\n+\n+\t* pt.c (check_explicit_specialization): If DECLARATOR turned into\n+\tan error_mark_node from lookup_template_function, return the same.\n+\t(determine_specialization): Also make sure TEMPLATE_ID isn't an\n+\terror_mark_node, before we try to read its operands.\n+\t* decl.c (grokdeclarator): If we got an error_mark_node from\n+\tcheck_explicit_specialization, just return it right back.\n+\n 1998-06-12  Mark Mitchell  <mark@markmitchell.com>\n \n \t* class.c (instantiate_type): Don't treat template-ids that don't"}, {"sha": "e6c5fff4086504ec38bd9f434a74fe64556e8cd7", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e48b67c89f44445b0de9c529163b8aef7ee266/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e48b67c89f44445b0de9c529163b8aef7ee266/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=f2e48b67c89f44445b0de9c529163b8aef7ee266", "patch": "@@ -10193,6 +10193,11 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \tif (decl == NULL_TREE)\n \t  return NULL_TREE;\n \n+\t/* Among other times, could occur from check_explicit_specialization\n+\t   returning an error_mark_node.  */\n+\tif (decl == error_mark_node)\n+\t  return error_mark_node;\n+\n \tif (ctype == NULL_TREE && DECL_LANGUAGE (decl) != lang_c\n \t    && (! DECL_USE_TEMPLATE (decl) ||\n \t\tname_mangling_version < 1)) "}, {"sha": "69856b7e8ddb2fb63f420008fb238dea47d922f2", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e48b67c89f44445b0de9c529163b8aef7ee266/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e48b67c89f44445b0de9c529163b8aef7ee266/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=f2e48b67c89f44445b0de9c529163b8aef7ee266", "patch": "@@ -784,14 +784,19 @@ determine_specialization (template_id, decl, targs_out,\n      int need_member_template;\n      int complain;\n {\n-  tree fns = TREE_OPERAND (template_id, 0);\n-  tree targs_in = TREE_OPERAND (template_id, 1);\n+  tree fns, targs_in;\n   tree templates = NULL_TREE;\n   tree fn;\n   int i;\n \n   *targs_out = NULL_TREE;\n \n+  if (template_id == error_mark_node)\n+    return error_mark_node;\n+\n+  fns = TREE_OPERAND (template_id, 0);\n+  targs_in = TREE_OPERAND (template_id, 1);\n+\n   if (fns == error_mark_node)\n     return error_mark_node;\n \n@@ -1084,7 +1089,10 @@ check_explicit_specialization (declarator, decl, template_count, flags)\n \t    lookup_template_function (fns, NULL_TREE);\n \t}\n \n-      if (TREE_CODE (TREE_OPERAND (declarator, 0)) == LOOKUP_EXPR) \n+      if (declarator == error_mark_node)\n+\treturn error_mark_node;\n+\n+      if (TREE_CODE (TREE_OPERAND (declarator, 0)) == LOOKUP_EXPR)\n \t{\n \t  /* A friend declaration.  We can't do much, because we don't\n \t   know what this resolves to, yet.  */"}]}