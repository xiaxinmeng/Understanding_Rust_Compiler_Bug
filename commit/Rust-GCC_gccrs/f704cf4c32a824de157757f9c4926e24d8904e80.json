{"sha": "f704cf4c32a824de157757f9c4926e24d8904e80", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjcwNGNmNGMzMmE4MjRkZTE1Nzc1N2Y5YzQ5MjZlMjRkODkwNGU4MA==", "commit": {"author": {"name": "Andi Kleen", "email": "ak@linux.intel.com", "date": "2014-09-24T03:29:37Z"}, "committer": {"name": "Andi Kleen", "email": "ak@gcc.gnu.org", "date": "2014-09-24T03:29:37Z"}, "message": "Add test cases for noreorder\n\nAdd some simple test cases for noreorder behaving like\n-fno-toplevel-reorder and -fno-toplevel-reorder still working.\n\ngcc/testsuite/:\n\n2014-09-23  Andi Kleen  <ak@linux.intel.com>\n\n\t* gcc.dg/noreorder.c: New test.\n\t* gcc.dg/noreorder2.c: New test.\n\t* gcc.dg/noreorder3.c: New test.\n\t* gcc.dg/noreorder4.c: New test.\n\nFrom-SVN: r215538", "tree": {"sha": "c5d660ac5924299f31141f73bfd5f2403bb81e7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c5d660ac5924299f31141f73bfd5f2403bb81e7f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f704cf4c32a824de157757f9c4926e24d8904e80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f704cf4c32a824de157757f9c4926e24d8904e80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f704cf4c32a824de157757f9c4926e24d8904e80", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f704cf4c32a824de157757f9c4926e24d8904e80/comments", "author": null, "committer": null, "parents": [{"sha": "7861b6489dd7777b1b8829fd8726079f133eb34c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7861b6489dd7777b1b8829fd8726079f133eb34c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7861b6489dd7777b1b8829fd8726079f133eb34c"}], "stats": {"total": 71, "additions": 71, "deletions": 0}, "files": [{"sha": "2fb28b9f4c00027762e2457f1e6cbaeb281fb62b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f704cf4c32a824de157757f9c4926e24d8904e80", "patch": "@@ -1,3 +1,10 @@\n+2014-09-23  Andi Kleen  <ak@linux.intel.com>\n+\n+\t* gcc.dg/noreorder.c: New test.\n+\t* gcc.dg/noreorder2.c: New test.\n+\t* gcc.dg/noreorder3.c: New test.\n+\t* gcc.dg/noreorder4.c: New test.\n+\n 2014-09-23  Alan Lawrence  <alan.lawrence@arm.com>\n \n \t* gcc.dg/combine_ashiftrt_1.c: New test."}, {"sha": "7d40a2958a4afe8213705c3eb1ed81f3dbb6e570", "filename": "gcc/testsuite/gcc.dg/noreorder.c", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder.c?ref=f704cf4c32a824de157757f9c4926e24d8904e80", "patch": "@@ -0,0 +1,38 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+/* The function order in this file is opposite from what the cgraph\n+   topological sort would output. So we can check the order is preserved. */\n+\n+extern void f2(int);\n+static int func2(void);\n+\n+#ifndef NOREORDER\n+#define NOREORDER __attribute__((no_reorder))\n+#endif\n+\n+asm(\"firstasm\");\n+\n+NOREORDER __attribute__((noinline)) int bozo(void)\n+{\n+  f2(3);\n+  func2();\n+}\n+\n+asm(\"jukjuk\");\n+\n+NOREORDER __attribute__((noinline)) static int func1(void)\n+{\n+  f2(1);\n+}\n+\n+asm(\"barbar\");\n+\n+NOREORDER __attribute__((noinline)) static int func2(void)\n+{\n+  func1();\n+}\n+\n+asm(\"lastasm\");\n+\n+/* { dg-final { scan-assembler \"firstasm.*bozo.*jukjuk.*func1.*barbar.*func2.*lastasm\" } } */"}, {"sha": "558361b628a05fc89a331248fd5bf058a633554d", "filename": "gcc/testsuite/gcc.dg/noreorder2.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder2.c?ref=f704cf4c32a824de157757f9c4926e24d8904e80", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fno-toplevel-reorder\" } */\n+\n+__attribute__((no_reorder)) int foobar;\n+\n+static int barbar;\n+int bozo;\n+\n+/* { dg-final { scan-assembler \"foobar\" } } */\n+/* { dg-final { scan-assembler \"bozo\" } } */\n+/* { dg-final { scan-assembler \"barbar\" } } */"}, {"sha": "a0b637f60cbab1f266b3e77561a1d1c6c31bb4e3", "filename": "gcc/testsuite/gcc.dg/noreorder3.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder3.c?ref=f704cf4c32a824de157757f9c4926e24d8904e80", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+__attribute__((no_reorder)) int foobar;\n+static int barbar;\n+int bozo;\n+\n+/* { dg-final { scan-assembler \"foobar\" } } */\n+/* { dg-final { scan-assembler \"bozo\" } } */\n+/* { dg-final { scan-assembler-not \"barbar\" } } */"}, {"sha": "632fc33432ca118b693836849a0bb521e46732b4", "filename": "gcc/testsuite/gcc.dg/noreorder4.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f704cf4c32a824de157757f9c4926e24d8904e80/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoreorder4.c?ref=f704cf4c32a824de157757f9c4926e24d8904e80", "patch": "@@ -0,0 +1,5 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fno-toplevel-reorder\" } */\n+#define NOREORDER\n+#include \"noreorder.c\"\n+/* { dg-final { scan-assembler \"bozo.*jukjuk.*func1.*barbar.*func2\" } } */"}]}