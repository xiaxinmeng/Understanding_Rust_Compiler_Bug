{"sha": "6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmRkMmExM2M5ZTdjZjNhZWM4M2EzM2ZlMmE4NjZjMjIzNjRhNThhYw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-02-11T10:01:29Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-02-11T10:01:29Z"}, "message": "i\tgcc/testsuite:\n\n\tPR testsuite/47400\n\t* lib/target-supports.exp (check_ascii_locale_available): New proc.\n\t* lib/target-supports-dg.exp (dg-require-ascii-locale): New proc.\n\t* gcc.dg/attr-alias-5.c: Use dg-require-ascii-locale.\n\t* gcc.dg/ucnid-10.c: Likewise.\n\t* gcc.dg/ucnid-13.c: Likewise.\n\t* gcc.dg/ucnid-7.c: Likewise.\n\t* gcc.dg/ucnid-8.c: Likewise.\n\t* Adapt dg-warning line number.\n\n\tgcc:\n\tPR testsuite/47400\n\t* doc/sourcebuild.texi (Require Support): Document\n\tdg-require-ascii-locale.\n\nFrom-SVN: r170046", "tree": {"sha": "da788de6e8f0f9252b3ec1be3761fd2d9154ddf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da788de6e8f0f9252b3ec1be3761fd2d9154ddf0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e60b3ac94f14f994f7f8e79e1090a9d4a4151063", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e60b3ac94f14f994f7f8e79e1090a9d4a4151063", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e60b3ac94f14f994f7f8e79e1090a9d4a4151063"}], "stats": {"total": 46, "additions": 40, "deletions": 6}, "files": [{"sha": "9e8c392b340061da57cb415d1f3950396cfa7ab2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -1,3 +1,9 @@\n+2011-02-11  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR testsuite/47400\n+\t* doc/sourcebuild.texi (Require Support): Document\n+\tdg-require-ascii-locale.\n+\n 2011-02-11  Mingjie Xing  <mingjie.xing@gmail.com>\n \n \t* doc/lto.texi (Write summary): Fix missing parentheses."}, {"sha": "f4a2807a1bf7537040c93f970b935c620b0df254", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -1,4 +1,4 @@\n-@c Copyright (C) 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010\n+@c Copyright (C) 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010, 2011\n @c Free Software Foundation, Inc.\n @c This is part of the GCC manual.\n @c For copying conditions, see the file gcc.texi.\n@@ -1939,6 +1939,9 @@ take arguments could be replaced with effective-target keywords.\n @item dg-require-alias \"\"\n Skip the test if the target does not support the @samp{alias} attribute.\n \n+@item dg-require-ascii-locale \"\"\n+Skip the test if the host does not support an ASCII locale.\n+\n @item dg-require-compat-dfp \"\"\n Skip this test unless both compilers in a @file{compat} testsuite\n support decimal floating point."}, {"sha": "d22c286fc6585d0f4199bb6684cf0a1ff16c3495", "filename": "gcc/testsuite/gcc.dg/attr-alias-5.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fattr-alias-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fattr-alias-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fattr-alias-5.c?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -3,6 +3,7 @@\n /* { dg-do compile } */\n /* { dg-options \"-std=gnu99\" } */\n /* { dg-require-alias \"\" } */\n+/* { dg-require-ascii-locale \"\" } */\n \n void f0 (void) __attribute__((alias(\"\\xa1\"))); /* { dg-error \"undefined symbol '\\\\\\\\241'\" } */\n void f1 (void) __attribute__((alias(\"\\u00e9\"))); /* { dg-error \"undefined symbol '\\\\\\\\U000000e9'\" } */"}, {"sha": "317cbb113ac8c34b8a23b5515b4d20f7dc92ce97", "filename": "gcc/testsuite/gcc.dg/ucnid-10.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-10.c?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -2,6 +2,7 @@\n    locale).  Test #pragma pack diagnostics.  */\n /* { dg-do compile } */\n /* { dg-options \"-std=gnu99 -fextended-identifiers\" } */\n+/* { dg-require-ascii-locale \"\" } */\n \n #pragma pack(push)\n #pragma pack(pop, \\u00f3) /* { dg-warning \"pop, \\\\\\\\U000000f3.*push, \\\\\\\\U000000f3\" } */"}, {"sha": "942178994226fae15eda39146d053ff027fbe425", "filename": "gcc/testsuite/gcc.dg/ucnid-13.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-13.c?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -2,6 +2,7 @@\n    locale).  Miscellaneous diagnostics.  */\n /* { dg-do compile } */\n /* { dg-options \"-std=gnu99 -fextended-identifiers -Wpacked\" } */\n+/* { dg-require-ascii-locale \"\" } */\n \n int a __attribute__((\\u00c0)); /* { dg-warning \"'\\\\\\\\U000000c0' attribute directive ignored\" } */\n "}, {"sha": "1dbcb9ac77b28c3282ac8f533569b9deb6308e2e", "filename": "gcc/testsuite/gcc.dg/ucnid-7.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-7.c?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -2,6 +2,7 @@\n    locale).  */\n /* { dg-do compile } */\n /* { dg-options \"-std=c99 -fextended-identifiers\" } */\n+/* { dg-require-ascii-locale \"\" } */\n \n void *p = &\\u00e9; /* { dg-error \"'\\\\\\\\U000000e9' undeclared\" } */\n void *q = &\\u1e00; /* { dg-error \"'\\\\\\\\U00001e00' undeclared\" } */"}, {"sha": "ea2e051f04a656109ac1b8bda01e67572de30933", "filename": "gcc/testsuite/gcc.dg/ucnid-8.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-8.c?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -2,6 +2,7 @@\n    locale).  Further tests of C front-end diagnostics.  */\n /* { dg-do compile } */\n /* { dg-options \"-std=gnu99 -fextended-identifiers -Wvla\" } */\n+/* { dg-require-ascii-locale \"\" } */\n \n int a __attribute__((__mode__(\\u00e9))); /* { dg-error \"unknown machine mode '\\\\\\\\U000000e9'\" } */\n struct s1 { int \\u00e9 : 0; }; /* { dg-error \"zero width for bit-field '\\\\\\\\U000000e9'\" } */\n@@ -11,4 +12,4 @@ void f (int b) { int \\u00e9[b]; } /* { dg-warning \"variable length array '\\\\\\\\U0\n void g (static int \\u00e9); /* { dg-error \"storage class specified for parameter '\\\\\\\\U000000e9'\" } */\n \n struct s2 { int \\u00e1; } \\u00e9 = { { 0 } }; /* { dg-warning \"braces around scalar initializer\" } */\n-/* { dg-warning \"near initialization for '\\\\\\\\U000000e9\\\\.\\\\\\\\U000000e1'\" \"UCN diag\" { target *-*-* } 13 } */\n+/* { dg-warning \"near initialization for '\\\\\\\\U000000e9\\\\.\\\\\\\\U000000e1'\" \"UCN diag\" { target *-*-* } 14 } */"}, {"sha": "3a2c0dc11415af03b1c5485ebcb434b1f99c3004", "filename": "gcc/testsuite/lib/target-supports-dg.exp", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -1,5 +1,5 @@\n-#   Copyright (C) 1997, 1999, 2000, 2003, 2004, 2005, 2007, 2008, 2009, 2010\n-#   Free Software Foundation, Inc.\n+#   Copyright (C) 1997, 1999, 2000, 2003, 2004, 2005, 2007, 2008, 2009, 2010,\n+#   2011 Free Software Foundation, Inc.\n \n # This program is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -138,6 +138,15 @@ proc dg-require-dll { args } {\n     set dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n }\n \n+# If this host does not support an ASCII locale, skip this test.\n+\n+proc dg-require-ascii-locale { args } {\n+    if { ![ check_ascii_locale_available] } {\n+\tupvar dg-do-what dg-do-what\n+        set dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n+    }\n+}\n+\n proc dg-require-iconv { args } {\n     if { ![ check_iconv_available ${args} ] } {\n \tupvar dg-do-what dg-do-what"}, {"sha": "02cb7acd9ee0c3294054aa909406ee9cda57eba6", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=6dd2a13c9e7cf3aec83a33fe2a866c22364a58ac", "patch": "@@ -1,5 +1,5 @@\n-#   Copyright (C) 1999, 2001, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n-#    Free Software Foundation, Inc.\n+#   Copyright (C) 1999, 2001, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n+#   2011 Free Software Foundation, Inc.\n \n # This program is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -922,6 +922,17 @@ proc check_iconv_available { test_what } {\n     }] $libiconv]\n }\n \n+# Return 1 if an ASCII locale is supported on this host, 0 otherwise.\n+\n+proc check_ascii_locale_available { } {\n+    if { ([ishost alpha*-dec-osf*] || [ishost mips-sgi-irix*]) } {\n+\t# Neither Tru64 UNIX nor IRIX support an ASCII locale.\n+\treturn 0\n+    } else {\n+\treturn 1\n+    }\n+}\n+\n # Return true if named sections are supported on this target.\n \n proc check_named_sections_available { } {"}]}