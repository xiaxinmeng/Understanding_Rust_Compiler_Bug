{"sha": "8e8e423f69e62cd05c2958302f97f582919408fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGU4ZTQyM2Y2OWU2MmNkMDVjMjk1ODMwMmY5N2Y1ODI5MTk0MDhmYg==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2010-10-31T02:32:20Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2010-10-31T02:32:20Z"}, "message": "* tree-ssa-loop-im.c (rewrite_reciprocal): Use build_one_cst.\n\nFrom-SVN: r166103", "tree": {"sha": "a2331c06f43ff2cb30e6331e35f33ebc5d0250da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2331c06f43ff2cb30e6331e35f33ebc5d0250da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8e8e423f69e62cd05c2958302f97f582919408fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e8e423f69e62cd05c2958302f97f582919408fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e8e423f69e62cd05c2958302f97f582919408fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e8e423f69e62cd05c2958302f97f582919408fb/comments", "author": null, "committer": null, "parents": [{"sha": "b9acc9f1de4ef8a1cff7c495a3b26fcd3e2448c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9acc9f1de4ef8a1cff7c495a3b26fcd3e2448c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9acc9f1de4ef8a1cff7c495a3b26fcd3e2448c4"}], "stats": {"total": 18, "additions": 5, "deletions": 13}, "files": [{"sha": "c2b0142585e2ac5f6c73c2359cdbf78910e56748", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e8e423f69e62cd05c2958302f97f582919408fb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e8e423f69e62cd05c2958302f97f582919408fb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8e8e423f69e62cd05c2958302f97f582919408fb", "patch": "@@ -1,3 +1,7 @@\n+2010-10-30  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* tree-ssa-loop-im.c (rewrite_reciprocal): Use build_one_cst.\n+\n 2010-10-30  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* fold-const.c (build_zero_vector): Use build_vector_from_val."}, {"sha": "45902e5bafd5ce5e66ace4fa12d76f173a07fba2", "filename": "gcc/tree-ssa-loop-im.c", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e8e423f69e62cd05c2958302f97f582919408fb/gcc%2Ftree-ssa-loop-im.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e8e423f69e62cd05c2958302f97f582919408fb/gcc%2Ftree-ssa-loop-im.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-im.c?ref=8e8e423f69e62cd05c2958302f97f582919408fb", "patch": "@@ -910,19 +910,7 @@ rewrite_reciprocal (gimple_stmt_iterator *bsi)\n   add_referenced_var (var);\n   DECL_GIMPLE_REG_P (var) = 1;\n \n-  /* For vectors, create a VECTOR_CST full of 1's.  */\n-  if (TREE_CODE (type) == VECTOR_TYPE)\n-    {\n-      int i, len;\n-      tree list = NULL_TREE;\n-      real_one = build_real (TREE_TYPE (type), dconst1);\n-      len = TYPE_VECTOR_SUBPARTS (type);\n-      for (i = 0; i < len; i++)\n-\tlist = tree_cons (NULL, real_one, list);\n-      real_one = build_vector (type, list);\n-    }\n-  else\n-    real_one = build_real (type, dconst1);\n+  real_one = build_one_cst (type);\n \n   stmt1 = gimple_build_assign_with_ops (RDIV_EXPR,\n \t\tvar, real_one, gimple_assign_rhs2 (stmt));"}]}