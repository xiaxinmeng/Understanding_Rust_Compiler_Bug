{"sha": "b0a3329db0bbb9394131f28ebb03c9f33060771a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjBhMzMyOWRiMGJiYjkzOTQxMzFmMjhlYmIwM2M5ZjMzMDYwNzcxYQ==", "commit": {"author": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2016-12-21T15:05:10Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2016-12-21T15:05:10Z"}, "message": "Do not suggest -fsanitize=all (PR driver/78863).\n\n\tPR driver/78863\n\t* gcc.c (driver::build_option_suggestions): Do not add\n\t-fsanitize=all as a suggestion candidate.\n\tPR driver/78863\n\t* gcc.dg/spellcheck-options-13.c: New test.\n\nFrom-SVN: r243857", "tree": {"sha": "b5b0f36bb4900b2334d13addaa0928e1bfa055be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5b0f36bb4900b2334d13addaa0928e1bfa055be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0a3329db0bbb9394131f28ebb03c9f33060771a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0a3329db0bbb9394131f28ebb03c9f33060771a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0a3329db0bbb9394131f28ebb03c9f33060771a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0a3329db0bbb9394131f28ebb03c9f33060771a/comments", "author": null, "committer": null, "parents": [{"sha": "592e4d9459282554601e983a6423b258244864b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/592e4d9459282554601e983a6423b258244864b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/592e4d9459282554601e983a6423b258244864b3"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "8b2af2a1440612380466263faef39a540a9acfbf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b0a3329db0bbb9394131f28ebb03c9f33060771a", "patch": "@@ -1,3 +1,10 @@\n+2016-12-21  Jakub Jelinek  <jakub@redhat.com>\n+\t    Martin Liska  <mliska@suse.cz>\n+\n+\tPR driver/78863\n+\t* gcc.c (driver::build_option_suggestions): Do not add\n+\t-fsanitize=all as a suggestion candidate.\n+\n 2016-12-21  Alexander Monakov  <amonakov@ispras.ru>\n \n \tPR target/78831"}, {"sha": "6908948434094346dde51c738cd865077fab8de1", "filename": "gcc/gcc.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=b0a3329db0bbb9394131f28ebb03c9f33060771a", "patch": "@@ -7733,6 +7733,17 @@ driver::build_option_suggestions (void)\n \t  {\n \t    for (int j = 0; sanitizer_opts[j].name != NULL; ++j)\n \t      {\n+\t\tstruct cl_option optb;\n+\t\t/* -fsanitize=all is not valid, only -fno-sanitize=all.\n+\t\t   So don't register the positive misspelling candidates\n+\t\t   for it.  */\n+\t\tif (sanitizer_opts[j].flag == ~0U && i == OPT_fsanitize_)\n+\t\t  {\n+\t\t    optb = *option;\n+\t\t    optb.opt_text = opt_text = \"-fno-sanitize=\";\n+\t\t    optb.cl_reject_negative = true;\n+\t\t    option = &optb;\n+\t\t  }\n \t\t/* Get one arg at a time e.g. \"-fsanitize=address\".  */\n \t\tchar *with_arg = concat (opt_text,\n \t\t\t\t\t sanitizer_opts[j].name,"}, {"sha": "a6599d7708fc61dc4e554a289cfb07e740948a6a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b0a3329db0bbb9394131f28ebb03c9f33060771a", "patch": "@@ -1,3 +1,8 @@\n+2016-12-21  Martin Liska  <mliska@suse.cz>\n+\n+\tPR driver/78863\n+\t* gcc.dg/spellcheck-options-13.c: New test.\n+\n 2016-12-21  Alexander Monakov  <amonakov@ispras.ru>\n \n \t* gcc.target/nvptx/decl-shared.c (v_common): Add 'common' attribute to"}, {"sha": "19b63af565b96af9a9950cd2fcd66344dab47187", "filename": "gcc/testsuite/gcc.dg/spellcheck-options-13.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2Ftestsuite%2Fgcc.dg%2Fspellcheck-options-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0a3329db0bbb9394131f28ebb03c9f33060771a/gcc%2Ftestsuite%2Fgcc.dg%2Fspellcheck-options-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fspellcheck-options-13.c?ref=b0a3329db0bbb9394131f28ebb03c9f33060771a", "patch": "@@ -0,0 +1,5 @@\n+/* PR driver/78863.  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-fsanitize\" } */\n+/* { dg-error \"unrecognized command line option .-fsanitize..$\" \"\" { target *-*-* } 0 } */"}]}