{"sha": "9d1a4667d88d24c9af71984e73be5eb99529a6dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQxYTQ2NjdkODhkMjRjOWFmNzE5ODRlNzNiZTVlYjk5NTI5YTZkYw==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-03T00:38:02Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-03T00:38:02Z"}, "message": "(reload): Move test for failure to find any group to after the loop over i.\n\n(reload): Move test for failure to find any group\nto after the loop over i.  Also check that all the regnos fit\nbelow FIRST_PSEUDO_REGISTER.\n\nFrom-SVN: r2306", "tree": {"sha": "03b6f5e6c4aab3d9ce90e07fe6aa14478dae3929", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03b6f5e6c4aab3d9ce90e07fe6aa14478dae3929"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d1a4667d88d24c9af71984e73be5eb99529a6dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d1a4667d88d24c9af71984e73be5eb99529a6dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d1a4667d88d24c9af71984e73be5eb99529a6dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d1a4667d88d24c9af71984e73be5eb99529a6dc/comments", "author": null, "committer": null, "parents": [{"sha": "139e5e08924a01bb85498a6eab33436c519ef78f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/139e5e08924a01bb85498a6eab33436c519ef78f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/139e5e08924a01bb85498a6eab33436c519ef78f"}], "stats": {"total": 30, "additions": 14, "deletions": 16}, "files": [{"sha": "4374d1f633840dbb4b8ca92576391d9ff108de3d", "filename": "gcc/reload1.c", "status": "modified", "additions": 14, "deletions": 16, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d1a4667d88d24c9af71984e73be5eb99529a6dc/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d1a4667d88d24c9af71984e73be5eb99529a6dc/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=9d1a4667d88d24c9af71984e73be5eb99529a6dc", "patch": "@@ -1651,7 +1651,8 @@ reload (first, global, dumpfile)\n \t\t    {\n \t\t      int j = potential_reload_regs[i];\n \t\t      int k;\n-\t\t      if (j >= 0 && j + 1 < FIRST_PSEUDO_REGISTER\n+\t\t      if (j >= 0\n+\t\t\t  && j + group_size[class] <= FIRST_PSEUDO_REGISTER\n \t\t\t  && HARD_REGNO_MODE_OK (j, group_mode[class]))\n \t\t\t{\n \t\t\t  /* Check each reg in the sequence.  */\n@@ -1671,18 +1672,10 @@ reload (first, global, dumpfile)\n \t\t\t\t  for (idx = 0; idx < FIRST_PSEUDO_REGISTER; idx++)\n \t\t\t\t    if (potential_reload_regs[idx] == j + k)\n \t\t\t\t      break;\n-\t\t\t\t    if (i >= FIRST_PSEUDO_REGISTER)\n-\t\t\t\t      {\n-\t\t\t\t\t/* There are no groups left.  */\n-\t\t\t\t\tspill_failure (max_groups_insn[class]);\n-\t\t\t\t\tfailure = 1;\n-\t\t\t\t\tgoto failed;\n-\t\t\t\t      }\n-\t\t\t\t    else\n-\t\t\t\t      something_changed\n-\t\t\t\t\t|= new_spill_reg (idx, class,\n-\t\t\t\t\t\t\t  max_needs, NULL_PTR,\n-\t\t\t\t\t\t\t  global, dumpfile);\n+\t\t\t\t  something_changed\n+\t\t\t\t    |= new_spill_reg (idx, class,\n+\t\t\t\t\t\t      max_needs, NULL_PTR,\n+\t\t\t\t\t\t      global, dumpfile);\n \t\t\t\t}\n \n \t\t\t      /* We have found one that will complete a group,\n@@ -1697,9 +1690,14 @@ reload (first, global, dumpfile)\n \t\t\t}\n \t\t    }\n \t\t  /* We couldn't find any registers for this reload.\n-\t\t     Abort to avoid going into an infinite loop.  */\n-\t\t  if (i == FIRST_PSEUDO_REGISTER)\n- \t\t    abort ();\n+\t\t     Avoid going into an infinite loop.  */\n+\t\t  if (i >= FIRST_PSEUDO_REGISTER)\n+\t\t    {\n+\t\t      /* There are no groups left.  */\n+\t\t      spill_failure (max_groups_insn[class]);\n+\t\t      failure = 1;\n+\t\t      goto failed;\n+\t\t    }\n \t\t}\n \t    }\n "}]}