{"sha": "0c617be487cd7b2d7597330a52ff3a020dc11076", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM2MTdiZTQ4N2NkN2IyZDc1OTczMzBhNTJmZjNhMDIwZGMxMTA3Ng==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2011-03-23T17:35:59Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2011-03-23T17:35:59Z"}, "message": "cfg.c (redirect_edge_succ_nodup): Duplicate the varm map before removing the edge.\n\n\t* cfg.c (redirect_edge_succ_nodup): Duplicate the varm map\n\tbefore removing the edge.\n\n\t* cfgrtl.c (cfg_layout_redirect_edge_and_branch): Do not use E after\n\tit may have been freed by redirect_branch_edge or\n\tredirect_edge_succ_nodup.\n\nFrom-SVN: r171356", "tree": {"sha": "63167faa52777ebde1ca5984d9076b69601f109d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63167faa52777ebde1ca5984d9076b69601f109d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c617be487cd7b2d7597330a52ff3a020dc11076", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c617be487cd7b2d7597330a52ff3a020dc11076", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c617be487cd7b2d7597330a52ff3a020dc11076", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c617be487cd7b2d7597330a52ff3a020dc11076/comments", "author": null, "committer": null, "parents": [{"sha": "58da96fef9d3d98154968670f1b15dc5b8e116d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58da96fef9d3d98154968670f1b15dc5b8e116d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58da96fef9d3d98154968670f1b15dc5b8e116d9"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "436be3acc48e4eb09652fa2d5efdd4f3a43646d9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c617be487cd7b2d7597330a52ff3a020dc11076/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c617be487cd7b2d7597330a52ff3a020dc11076/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0c617be487cd7b2d7597330a52ff3a020dc11076", "patch": "@@ -1,3 +1,12 @@\n+2011-03-23  Jeff Law  <law@redhat.com>\n+\n+\t* cfg.c (redirect_edge_succ_nodup): Duplicate the varm map\n+\tbefore removing the edge.\n+\n+\t* cfgrtl.c (cfg_layout_redirect_edge_and_branch): Do not use E after\n+\tit may have been freed by redirect_branch_edge or\n+\tredirect_edge_succ_nodup.\n+\n 2011-03-23  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-stdarg.c (va_list_counter_bump): Handle bumps via"}, {"sha": "5b1dc2649f1feb8591c171a3d2582825d9d0b91d", "filename": "gcc/cfg.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c617be487cd7b2d7597330a52ff3a020dc11076/gcc%2Fcfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c617be487cd7b2d7597330a52ff3a020dc11076/gcc%2Fcfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfg.c?ref=0c617be487cd7b2d7597330a52ff3a020dc11076", "patch": "@@ -402,8 +402,8 @@ redirect_edge_succ_nodup (edge e, basic_block new_succ)\n       if (s->probability > REG_BR_PROB_BASE)\n \ts->probability = REG_BR_PROB_BASE;\n       s->count += e->count;\n-      remove_edge (e);\n       redirect_edge_var_map_dup (s, e);\n+      remove_edge (e);\n       e = s;\n     }\n   else"}, {"sha": "e78f5baf6ba8a3749a47dfe0f96f67e48860c036", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c617be487cd7b2d7597330a52ff3a020dc11076/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c617be487cd7b2d7597330a52ff3a020dc11076/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=0c617be487cd7b2d7597330a52ff3a020dc11076", "patch": "@@ -2537,9 +2537,9 @@ cfg_layout_redirect_edge_and_branch (edge e, basic_block dest)\n \t  e->flags &= ~EDGE_FALLTHRU;\n \t  redirected = redirect_branch_edge (e, dest);\n \t  gcc_assert (redirected);\n-\t  e->flags |= EDGE_FALLTHRU;\n-\t  df_set_bb_dirty (e->src);\n-\t  return e;\n+\t  redirected->flags |= EDGE_FALLTHRU;\n+\t  df_set_bb_dirty (redirected->src);\n+\t  return redirected;\n \t}\n       /* In case we are redirecting fallthru edge to the branch edge\n \t of conditional jump, remove it.  */\n@@ -2553,10 +2553,10 @@ cfg_layout_redirect_edge_and_branch (edge e, basic_block dest)\n \t      && onlyjump_p (BB_END (src)))\n \t    delete_insn (BB_END (src));\n \t}\n-      ret = redirect_edge_succ_nodup (e, dest);\n       if (dump_file)\n \tfprintf (dump_file, \"Fallthru edge %i->%i redirected to %i\\n\",\n \t\t e->src->index, e->dest->index, dest->index);\n+      ret = redirect_edge_succ_nodup (e, dest);\n     }\n   else\n     ret = redirect_branch_edge (e, dest);"}]}