{"sha": "5f25b464a8e3935b9b1bd47e6b652e79d4824102", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWYyNWI0NjRhOGUzOTM1YjliMWJkNDdlNmI2NTJlNzlkNDgyNDEwMg==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2018-02-05T11:47:48Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2018-02-05T11:47:48Z"}, "message": "class.c: Remove unused global variables.\n\n\t* class.c: Remove unused global variables.\n       \t(build_primary_vtable): Don't gather statistics.\n\t(print_class_statistics): Remove.\n\t* cp-tree.h (print_class_statistics): Remove.\n\t* tree.c (cxx_print_statistics): Don't call print_class_statistics.\n\nFrom-SVN: r257389", "tree": {"sha": "965d13b65c2351ca54a89c3792c1c2255f21c527", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/965d13b65c2351ca54a89c3792c1c2255f21c527"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f25b464a8e3935b9b1bd47e6b652e79d4824102", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f25b464a8e3935b9b1bd47e6b652e79d4824102", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f25b464a8e3935b9b1bd47e6b652e79d4824102", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f25b464a8e3935b9b1bd47e6b652e79d4824102/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "865166c80e0c41faaee1c4e59894246aa8672531", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/865166c80e0c41faaee1c4e59894246aa8672531", "html_url": "https://github.com/Rust-GCC/gccrs/commit/865166c80e0c41faaee1c4e59894246aa8672531"}], "stats": {"total": 43, "additions": 8, "deletions": 35}, "files": [{"sha": "2dc96a3b6907d160f261cbd36395f642423874fa", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5f25b464a8e3935b9b1bd47e6b652e79d4824102", "patch": "@@ -1,3 +1,11 @@\n+2018-02-05  Marek Polacek  <polacek@redhat.com>\n+\n+\t* class.c: Remove unused global variables.\n+\t(build_primary_vtable): Don't gather statistics.\n+\t(print_class_statistics): Remove.\n+\t* cp-tree.h (print_class_statistics): Remove.\n+\t* tree.c (cxx_print_statistics): Don't call print_class_statistics.\n+\n 2018-02-02  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* class.c (is_really_empty_class): Use DECL_UNNAMED_BIT_FIELD."}, {"sha": "6012b8deff91025466e0a2c5ce29fbd95236239d", "filename": "gcc/cp/class.c", "status": "modified", "additions": 0, "deletions": 33, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=5f25b464a8e3935b9b1bd47e6b652e79d4824102", "patch": "@@ -215,16 +215,6 @@ static tree end_of_base (tree);\n static tree get_vcall_index (tree, tree);\n static bool type_maybe_constexpr_default_constructor (tree);\n \n-/* Variables shared between class.c and call.c.  */\n-\n-int n_vtables = 0;\n-int n_vtable_entries = 0;\n-int n_vtable_searches = 0;\n-int n_vtable_elems = 0;\n-int n_convert_harshness = 0;\n-int n_compute_conversion_costs = 0;\n-int n_inner_fields_searched = 0;\n-\n /* Return a COND_EXPR that executes TRUE_STMT if this execution of the\n    'structor is in charge of 'structing virtual bases, or FALSE_STMT\n    otherwise.  */\n@@ -892,12 +882,6 @@ build_primary_vtable (tree binfo, tree type)\n       virtuals = NULL_TREE;\n     }\n \n-  if (GATHER_STATISTICS)\n-    {\n-      n_vtables += 1;\n-      n_vtable_elems += list_length (virtuals);\n-    }\n-\n   /* Initialize the association list for this type, based\n      on our first approximation.  */\n   BINFO_VTABLE (TYPE_BINFO (type)) = decl;\n@@ -8118,23 +8102,6 @@ get_vfield_name (tree type)\n   return get_identifier (buf);\n }\n \n-void\n-print_class_statistics (void)\n-{\n-  if (! GATHER_STATISTICS)\n-    return;\n-\n-  fprintf (stderr, \"convert_harshness = %d\\n\", n_convert_harshness);\n-  fprintf (stderr, \"compute_conversion_costs = %d\\n\", n_compute_conversion_costs);\n-  if (n_vtables)\n-    {\n-      fprintf (stderr, \"vtables = %d; vtable searches = %d\\n\",\n-\t       n_vtables, n_vtable_searches);\n-      fprintf (stderr, \"vtable entries = %d; vtable elems = %d\\n\",\n-\t       n_vtable_entries, n_vtable_elems);\n-    }\n-}\n-\n /* Build a dummy reference to ourselves so Derived::Base (and A::A) works,\n    according to [class]:\n \t\t\t\t\t  The class-name is also inserted"}, {"sha": "861efb3053b5986071c72c4f8a4d22cd63bba97f", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=5f25b464a8e3935b9b1bd47e6b652e79d4824102", "patch": "@@ -6040,7 +6040,6 @@ extern int current_lang_depth\t\t\t(void);\n extern void push_lang_context\t\t\t(tree);\n extern void pop_lang_context\t\t\t(void);\n extern tree instantiate_type\t\t\t(tree, tree, tsubst_flags_t);\n-extern void print_class_statistics\t\t(void);\n extern void build_self_reference\t\t(void);\n extern int same_signature_p\t\t\t(const_tree, const_tree);\n extern void maybe_add_class_template_decl_list\t(tree, tree, int);"}, {"sha": "d85f934f2de4d4d1a1d7d961fb122214309776e4", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f25b464a8e3935b9b1bd47e6b652e79d4824102/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=5f25b464a8e3935b9b1bd47e6b652e79d4824102", "patch": "@@ -2831,7 +2831,6 @@ extern int depth_reached;\n void\n cxx_print_statistics (void)\n {\n-  print_class_statistics ();\n   print_template_statistics ();\n   if (GATHER_STATISTICS)\n     fprintf (stderr, \"maximum template instantiation depth reached: %d\\n\","}]}