{"sha": "1821bcfc49276dee748251bdefbb2040dd718954", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTgyMWJjZmM0OTI3NmRlZTc0ODI1MWJkZWZiYjIwNDBkZDcxODk1NA==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2010-03-18T21:23:35Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2010-03-18T21:23:35Z"}, "message": "re PR fortran/43039 ([lto/-fwhole-file] fortran-dev - ICE in gfc_conv_component_ref dynamic_dispatch_5.f03)\n\n2010-03-18  Paul Thomas  <pault@gcc.gnu.org>\n\n        PR fortran/43039\n        * trans-expr.c (conv_parent_component_references): Ensure that\n\t'dt' has a backend_decl.\n\n        PR fortran/43043\n        * trans-expr.c (gfc_conv_structure): Ensure that the derived\n\ttype has a backend_decl.\n\n        PR fortran/43044\n        * resolve.c (resolve_global_procedure): Check that the 'cl'\n\tstructure is not NULL.\n\nFrom-SVN: r157552", "tree": {"sha": "4b9aeac998ac3c0bdece79da7774cc9032321be8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4b9aeac998ac3c0bdece79da7774cc9032321be8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1821bcfc49276dee748251bdefbb2040dd718954", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1821bcfc49276dee748251bdefbb2040dd718954", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1821bcfc49276dee748251bdefbb2040dd718954", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1821bcfc49276dee748251bdefbb2040dd718954/comments", "author": null, "committer": null, "parents": [{"sha": "b1aa06558404f699aac25f84835dc04b16f437ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1aa06558404f699aac25f84835dc04b16f437ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1aa06558404f699aac25f84835dc04b16f437ea"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "dc155fa1574def7ed14092452217e8337ef592fa", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821bcfc49276dee748251bdefbb2040dd718954/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821bcfc49276dee748251bdefbb2040dd718954/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1821bcfc49276dee748251bdefbb2040dd718954", "patch": "@@ -1,3 +1,17 @@\n+2010-03-18  Paul Thomas  <pault@gcc.gnu.org>\n+\n+        PR fortran/43039\n+        * trans-expr.c (conv_parent_component_references): Ensure that\n+\t'dt' has a backend_decl.\n+\n+        PR fortran/43043\n+        * trans-expr.c (gfc_conv_structure): Ensure that the derived\n+\ttype has a backend_decl.\n+\n+        PR fortran/43044\n+        * resolve.c (resolve_global_procedure): Check that the 'cl'\n+\tstructure is not NULL.\n+\n 2010-03-18  Shujing Zhao  <pearly.zhao@oracle.com>\n \n \t* lang.opt (-ffixed-line-length-, ffree-line-length-): Remove"}, {"sha": "24ec7a8a1de8b8ade767f5b8658a8266acf78be9", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821bcfc49276dee748251bdefbb2040dd718954/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821bcfc49276dee748251bdefbb2040dd718954/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=1821bcfc49276dee748251bdefbb2040dd718954", "patch": "@@ -1851,12 +1851,13 @@ resolve_global_procedure (gfc_symbol *sym, locus *where,\n      \n       /* Non-assumed length character functions.  */\n       if (sym->attr.function && sym->ts.type == BT_CHARACTER\n-\t  && gsym->ns->proc_name->ts.u.cl->length != NULL)\n+\t    && gsym->ns->proc_name->ts.u.cl != NULL\n+\t    && gsym->ns->proc_name->ts.u.cl->length != NULL)\n \t{\n \t  gfc_charlen *cl = sym->ts.u.cl;\n \n \t  if (!sym->attr.entry_master && sym->attr.if_source == IFSRC_UNKNOWN\n-              && cl && cl->length && cl->length->expr_type != EXPR_CONSTANT)\n+                && cl && cl->length && cl->length->expr_type != EXPR_CONSTANT)\n \t    {\n               gfc_error (\"Nonconstant character-length function '%s' at %L \"\n \t\t\t \"must have an explicit interface\", sym->name,"}, {"sha": "b9ea5579ac8e970cf41cf6486f14187e63cd4313", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821bcfc49276dee748251bdefbb2040dd718954/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821bcfc49276dee748251bdefbb2040dd718954/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=1821bcfc49276dee748251bdefbb2040dd718954", "patch": "@@ -507,6 +507,9 @@ conv_parent_component_references (gfc_se * se, gfc_ref * ref)\n   parent.u.c.sym = dt;\n   parent.u.c.component = dt->components;\n \n+  if (dt->backend_decl == NULL)\n+    gfc_get_derived_type (dt);\n+\n   if (dt->attr.extension && dt->components)\n     {\n       if (dt->attr.is_class)\n@@ -4454,6 +4457,8 @@ gfc_conv_structure (gfc_se * se, gfc_expr * expr, int init)\n \t{\n \t  gfc_component *data;\n \t  data = gfc_find_component (cm->ts.u.derived, \"$data\", true, true);\n+\t  if (!data->backend_decl)\n+\t    gfc_get_derived_type (cm->ts.u.derived);\n \t  val = gfc_conv_initializer (c->expr, &cm->ts,\n \t\t\t\t      TREE_TYPE (data->backend_decl),\n \t\t\t\t      data->attr.dimension,"}]}