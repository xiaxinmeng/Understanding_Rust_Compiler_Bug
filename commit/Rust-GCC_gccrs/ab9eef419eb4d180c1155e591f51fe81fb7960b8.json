{"sha": "ab9eef419eb4d180c1155e591f51fe81fb7960b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI5ZWVmNDE5ZWI0ZDE4MGMxMTU1ZTU5MWY1MWZlODFmYjc5NjBiOA==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1997-05-19T22:03:56Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1997-05-19T22:03:56Z"}, "message": "Fix powerpc-{eabi,linux,sysv} problem with -mrelocatable\n\nFrom-SVN: r14103", "tree": {"sha": "fd40fb9f4a0ec0a1965e5c555622ce59f5abc14c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd40fb9f4a0ec0a1965e5c555622ce59f5abc14c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab9eef419eb4d180c1155e591f51fe81fb7960b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab9eef419eb4d180c1155e591f51fe81fb7960b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab9eef419eb4d180c1155e591f51fe81fb7960b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab9eef419eb4d180c1155e591f51fe81fb7960b8/comments", "author": null, "committer": null, "parents": [{"sha": "aa4fd28c7a26c948bc67e16681dad488d74b6656", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa4fd28c7a26c948bc67e16681dad488d74b6656", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa4fd28c7a26c948bc67e16681dad488d74b6656"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "9764661c9db97c623c6e6a609ad8312ceb4a338f", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab9eef419eb4d180c1155e591f51fe81fb7960b8/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab9eef419eb4d180c1155e591f51fe81fb7960b8/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=ab9eef419eb4d180c1155e591f51fe81fb7960b8", "patch": "@@ -81,6 +81,7 @@ int rs6000_compare_fp_p;\n /* Label number of label created for -mrelocatable, to call to so we can\n    get the address of the GOT section */\n int rs6000_pic_labelno;\n+int rs6000_pic_func_labelno;\n \n /* Which abi to adhere to */\n char *rs6000_abi_name = RS6000_ABI_NAME;\n@@ -3355,7 +3356,7 @@ rs6000_output_load_toc_table (file)\n \tfprintf (file, \"\\tl\");\n \n       fprintf (file, \" %s,(\", reg_names[0]);\n-      ASM_GENERATE_INTERNAL_LABEL (buf, \"LCL\", rs6000_pic_labelno);\n+      ASM_GENERATE_INTERNAL_LABEL (buf, \"LCL\", rs6000_pic_func_labelno);\n       assemble_name (file, buf);\n       fprintf (file, \"-\");\n       ASM_GENERATE_INTERNAL_LABEL (buf, \"LCF\", rs6000_pic_labelno);\n@@ -3664,7 +3665,12 @@ output_prolog (file, size)\n   /* If TARGET_MINIMAL_TOC, and the constant pool is needed, then load the\n      TOC_TABLE address into register 30.  */\n   if (TARGET_TOC && TARGET_MINIMAL_TOC && get_pool_size () != 0)\n-    rs6000_output_load_toc_table (file);\n+    {\n+#ifdef USING_SVR4_H\n+      rs6000_pic_func_labelno = rs6000_pic_labelno;\n+#endif\n+      rs6000_output_load_toc_table (file);\n+    }\n \n   if (DEFAULT_ABI == ABI_NT)\n     {"}]}