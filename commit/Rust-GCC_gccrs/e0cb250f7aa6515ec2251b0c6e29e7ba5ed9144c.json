{"sha": "e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTBjYjI1MGY3YWE2NTE1ZWMyMjUxYjBjNmUyOWU3YmE1ZWQ5MTQ0Yw==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@gcc.gnu.org", "date": "1998-06-24T06:26:02Z"}, "committer": {"name": "Manfred Hollstein", "email": "manfred@gcc.gnu.org", "date": "1998-06-24T06:26:02Z"}, "message": "configure (enable_version_specific_runtime_libs): Implement new flag --enable-version-specific-runtime-libs which installs C++...\n\nd\negcs/ChangeLog:\n1998-06-24  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* configure (enable_version_specific_runtime_libs): Implement new flag\n\t--enable-version-specific-runtime-libs which installs C++ runtime stuff in\n\t$(libsubdir); emit definition in each generated Makefile.\n\t(gxx_include_dir): Initialize depending on $enable_version_specific_runtime_libs.\negcs/gcc/ChangeLog:\n1998-06-24  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* configure.in (gxx_include_dir): Initialize default value depending on\n\tnew flag --enable-version-specific-runtime-libs; remove superfluous default\n\tinitialization afterwards.\n\t* configure: Regenerate.\negcs/libio/ChangeLog:\n1998-06-24  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* Makefile.in (install): Install _G_config.h depending on new flag\n\t--enable-version-specific-runtime-libs.\n\t* config/linux.mt (gxx_include_dir): Remove definition here as we use\n\tgcc's default anyway.\negcs/libstdc++/ChangeLog:\n1998-06-24  Manfred Hollstein  <manfred@s-direktnet.de>\n\t* Makefile.in (INSTALLDIR): Add comment to document the fact,\n\tthis macro will be properly initialized at make's runtime.\n\t(install): Add initialization of INSTALLDIR depending on $(libsubdir)\n\tand ${enable_version_specific_runtime_libs}; use $${INSTALLDIR} shell variable\n\tinstead of the $(INSTALLDIR) make macro.\n\nFrom-SVN: r20694", "tree": {"sha": "1459eff5b36e02bdc264a09e2e7ba103ceab3246", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1459eff5b36e02bdc264a09e2e7ba103ceab3246"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/comments", "author": null, "committer": null, "parents": [{"sha": "28e449d812a0194d46e1d5b7e532edb271ff65aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28e449d812a0194d46e1d5b7e532edb271ff65aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28e449d812a0194d46e1d5b7e532edb271ff65aa"}], "stats": {"total": 210, "additions": 109, "deletions": 101}, "files": [{"sha": "57f8c78edc86a51bb1cee47245d93333f39ff37a", "filename": "configure", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "patch": "@@ -1244,7 +1244,11 @@ EOF\n \t    # Note, if you change the default, make sure to fix both here\n \t    # and in the gcc subdirectory.\n \t    if test -z \"${with_gxx_include_dir}\"; then\n-\t\techo gxx_include_dir = '${prefix}/include/g++' >> ${Makefile}\n+\t        if test x${enable_version_specific_runtime_libs} = xyes; then\n+\t\t    echo gxx_include_dir = '${libsubdir}/include/g++' >> ${Makefile}\n+\t\telse\n+\t\t    echo gxx_include_dir = '${prefix}/include/g++' >> ${Makefile}\n+\t\tfi\n \t    else\n \t\techo gxx_include_dir = ${with_gxx_include_dir} >> ${Makefile}\n \t    fi\n@@ -1255,6 +1259,12 @@ EOF\n \t    else\n \t        echo enable_shared = ${enable_shared} >> ${Makefile}\n \t    fi\n+\t    # record if we want to rumtime library stuff installed in libsubdir.\n+\t    if test -z \"${enable_version_specific_runtime_libs}\"; then\n+\t        echo enable_version_specific_runtime_libs = no >> ${Makefile}\n+\t    else\n+\t        echo enable_version_specific_runtime_libs = ${enable_version_specific_runtime_libs} >> ${Makefile}\n+\t    fi\n \n \t    # Emit a macro which is used to build the libsubdir macro where\n \t    # compiler specific stuff can be found/installed."}, {"sha": "eb6c427c25ca101f758084e23e93403d9c004f1e", "filename": "gcc/configure", "status": "modified", "additions": 78, "deletions": 81, "changes": 159, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "patch": "@@ -615,15 +615,12 @@ if test \"${with_gxx_include_dir+set}\" = set; then\n   withval=\"$with_gxx_include_dir\"\n   gxx_include_dir=$with_gxx_include_dir\n else\n-  gxx_include_dir='${prefix}/include/g++'\n+  if test x${enable_version_specific_runtime_libs} = xyes; then\n+gxx_include_dir='${libsubdir}/include/g++'\n+else gxx_include_dir='${prefix}/include/g++'; fi\n fi\n \n \n-# Default g++ header file directory if it is empty\n-if [ x$gxx_include_dir = x ]; then\n-\tgxx_include_dir='${prefix}/include/g++'\n-fi\n-\n # Enable expensive internal checks\n # Check whether --enable-checking or --disable-checking was given.\n if test \"${enable_checking+set}\" = set; then\n@@ -753,7 +750,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:757: checking host system type\" >&5\n+echo \"configure:754: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -774,7 +771,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:778: checking target system type\" >&5\n+echo \"configure:775: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -792,7 +789,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:796: checking build system type\" >&5\n+echo \"configure:793: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -819,7 +816,7 @@ test \"$host_alias\" != \"$target_alias\" &&\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:823: checking for $ac_word\" >&5\n+echo \"configure:820: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -848,7 +845,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:852: checking for $ac_word\" >&5\n+echo \"configure:849: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -896,7 +893,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:900: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:897: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -906,11 +903,11 @@ ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS\n cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext <<EOF\n-#line 910 \"configure\"\n+#line 907 \"configure\"\n #include \"confdefs.h\"\n main(){return(0);}\n EOF\n-if { (eval echo configure:914: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:911: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -930,12 +927,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:934: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:931: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:939: checking whether we are using GNU C\" >&5\n+echo \"configure:936: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -944,7 +941,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:948: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:945: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -959,7 +956,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:963: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:960: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -987,7 +984,7 @@ else\n fi\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:991: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:988: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1020,7 +1017,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1024: checking for $ac_word\" >&5\n+echo \"configure:1021: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AWK'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1051,7 +1048,7 @@ done\n # Extract the first word of \"flex\", so it can be a program name with args.\n set dummy flex; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1055: checking for $ac_word\" >&5\n+echo \"configure:1052: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1084,15 +1081,15 @@ then\n   *) ac_lib=l ;;\n   esac\n   echo $ac_n \"checking for yywrap in -l$ac_lib\"\"... $ac_c\" 1>&6\n-echo \"configure:1088: checking for yywrap in -l$ac_lib\" >&5\n+echo \"configure:1085: checking for yywrap in -l$ac_lib\" >&5\n ac_lib_var=`echo $ac_lib'_'yywrap | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-l$ac_lib  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1096 \"configure\"\n+#line 1093 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1103,7 +1100,7 @@ int main() {\n yywrap()\n ; return 0; }\n EOF\n-if { (eval echo configure:1107: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1104: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1126,7 +1123,7 @@ fi\n fi\n \n echo $ac_n \"checking whether ln works\"\"... $ac_c\" 1>&6\n-echo \"configure:1130: checking whether ln works\" >&5\n+echo \"configure:1127: checking whether ln works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1158,7 +1155,7 @@ else\n fi\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:1162: checking whether ln -s works\" >&5\n+echo \"configure:1159: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1190,19 +1187,19 @@ else\n fi\n \n echo $ac_n \"checking for volatile\"\"... $ac_c\" 1>&6\n-echo \"configure:1194: checking for volatile\" >&5\n+echo \"configure:1191: checking for volatile\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_volatile'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1199 \"configure\"\n+#line 1196 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n volatile int foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:1206: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1203: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_volatile=yes\n else\n@@ -1225,7 +1222,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1229: checking for $ac_word\" >&5\n+echo \"configure:1226: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1256,7 +1253,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1260: checking for $ac_word\" >&5\n+echo \"configure:1257: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_YACC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1296,7 +1293,7 @@ test -n \"$YACC\" || YACC=\"yacc\"\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1300: checking for a BSD compatible install\" >&5\n+echo \"configure:1297: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1347,7 +1344,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1351: checking how to run the C preprocessor\" >&5\n+echo \"configure:1348: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1362,13 +1359,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1366 \"configure\"\n+#line 1363 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1372: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1369: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -1379,13 +1376,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1383 \"configure\"\n+#line 1380 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1389: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1386: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -1408,20 +1405,20 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1412: checking for ANSI C header files\" >&5\n+echo \"configure:1409: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1417 \"configure\"\n+#line 1414 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1425: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1422: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1438,7 +1435,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1442 \"configure\"\n+#line 1439 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1456,7 +1453,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1460 \"configure\"\n+#line 1457 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1477,7 +1474,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1481 \"configure\"\n+#line 1478 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1488,7 +1485,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1492: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1489: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1512,12 +1509,12 @@ EOF\n fi\n \n echo $ac_n \"checking whether time.h and sys/time.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1516: checking whether time.h and sys/time.h may both be included\" >&5\n+echo \"configure:1513: checking whether time.h and sys/time.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_time'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1521 \"configure\"\n+#line 1518 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/time.h>\n@@ -1526,7 +1523,7 @@ int main() {\n struct tm *tp;\n ; return 0; }\n EOF\n-if { (eval echo configure:1530: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1527: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_time=yes\n else\n@@ -1550,17 +1547,17 @@ for ac_hdr in limits.h stddef.h string.h strings.h stdlib.h time.h fcntl.h unist\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1554: checking for $ac_hdr\" >&5\n+echo \"configure:1551: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1559 \"configure\"\n+#line 1556 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1564: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1561: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1590,17 +1587,17 @@ done\n # Check for thread headers.\n ac_safe=`echo \"thread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for thread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1594: checking for thread.h\" >&5\n+echo \"configure:1591: checking for thread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1599 \"configure\"\n+#line 1596 \"configure\"\n #include \"confdefs.h\"\n #include <thread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1604: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1601: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1624,17 +1621,17 @@ fi\n \n ac_safe=`echo \"pthread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for pthread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1628: checking for pthread.h\" >&5\n+echo \"configure:1625: checking for pthread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1633 \"configure\"\n+#line 1630 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1638: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1635: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1660,20 +1657,20 @@ fi\n # See if the system preprocessor understands the ANSI C preprocessor\n # stringification operator.\n echo $ac_n \"checking whether cpp understands the stringify operator\"\"... $ac_c\" 1>&6\n-echo \"configure:1664: checking whether cpp understands the stringify operator\" >&5\n+echo \"configure:1661: checking whether cpp understands the stringify operator\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_have_stringify'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1669 \"configure\"\n+#line 1666 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n #define S(x)   #x\n char *test = S(foo);\n ; return 0; }\n EOF\n-if { (eval echo configure:1677: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1674: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_have_stringify=yes\n else\n@@ -1696,20 +1693,20 @@ fi\n # Use <inttypes.h> only if it exists,\n # doesn't clash with <sys/types.h>, and declares intmax_t.\n echo $ac_n \"checking for inttypes.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1700: checking for inttypes.h\" >&5\n+echo \"configure:1697: checking for inttypes.h\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_inttypes_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1705 \"configure\"\n+#line 1702 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <inttypes.h>\n int main() {\n intmax_t i = -1;\n ; return 0; }\n EOF\n-if { (eval echo configure:1713: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1710: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<EOF\n #define HAVE_INTTYPES_H 1\n@@ -1732,12 +1729,12 @@ for ac_func in strtoul bsearch strerror putenv popen bcopy bzero bcmp \\\n \tsysconf isascii\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1736: checking for $ac_func\" >&5\n+echo \"configure:1733: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1741 \"configure\"\n+#line 1738 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1760,7 +1757,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1764: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1761: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1786,12 +1783,12 @@ done\n \n \n echo $ac_n \"checking for vprintf\"\"... $ac_c\" 1>&6\n-echo \"configure:1790: checking for vprintf\" >&5\n+echo \"configure:1787: checking for vprintf\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vprintf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1795 \"configure\"\n+#line 1792 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vprintf(); below.  */\n@@ -1814,7 +1811,7 @@ vprintf();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1818: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1815: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vprintf=yes\"\n else\n@@ -1838,12 +1835,12 @@ fi\n \n if test \"$ac_cv_func_vprintf\" != yes; then\n echo $ac_n \"checking for _doprnt\"\"... $ac_c\" 1>&6\n-echo \"configure:1842: checking for _doprnt\" >&5\n+echo \"configure:1839: checking for _doprnt\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func__doprnt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1847 \"configure\"\n+#line 1844 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char _doprnt(); below.  */\n@@ -1866,7 +1863,7 @@ _doprnt();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1870: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1867: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func__doprnt=yes\"\n else\n@@ -1902,15 +1899,15 @@ fi\n \n \n echo $ac_n \"checking whether the printf functions support %p\"\"... $ac_c\" 1>&6\n-echo \"configure:1906: checking whether the printf functions support %p\" >&5\n+echo \"configure:1903: checking whether the printf functions support %p\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_printf_ptr'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_printf_ptr=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1914 \"configure\"\n+#line 1911 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n \n@@ -1923,7 +1920,7 @@ main()\n   exit (p != q);\n }\n EOF\n-if { (eval echo configure:1927: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1924: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_printf_ptr=yes\n else\n@@ -1951,12 +1948,12 @@ for ac_func in malloc realloc calloc free bcopy bzero bcmp \\\n \tindex rindex getenv atol sbrk abort atof\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:1955: checking whether $ac_func must be declared\" >&5\n+echo \"configure:1952: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1960 \"configure\"\n+#line 1957 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -1983,7 +1980,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:1987: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1984: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2010,12 +2007,12 @@ done\n \n \n echo $ac_n \"checking for sys_siglist declaration in signal.h or unistd.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2014: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n+echo \"configure:2011: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2019 \"configure\"\n+#line 2016 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <signal.h>\n@@ -2027,7 +2024,7 @@ int main() {\n char *msg = *(sys_siglist + 1);\n ; return 0; }\n EOF\n-if { (eval echo configure:2031: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2028: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_decl_sys_siglist=yes\n else\n@@ -5137,7 +5134,7 @@ fi\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:5141: checking assembler alignment features\" >&5\n+echo \"configure:5138: checking assembler alignment features\" >&5\n gcc_cv_as=\n gcc_cv_as_alignment_features=\n if [ -x as$host_exeext ]; then"}, {"sha": "6667857fa892a4c644d564df38f178a0f810c21f", "filename": "gcc/configure.in", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "patch": "@@ -71,12 +71,9 @@ AC_ARG_WITH(gxx-include-dir,\n [  --with-gxx-include-dir=DIR\n                           specifies directory to put g++ header files.],\n gxx_include_dir=$with_gxx_include_dir,\n-gxx_include_dir='${prefix}/include/g++')\n-\n-# Default g++ header file directory if it is empty\n-if [[ x$gxx_include_dir = x ]]; then\n-\tgxx_include_dir='${prefix}/include/g++'\n-fi\n+if test x${enable_version_specific_runtime_libs} = xyes; then\n+gxx_include_dir='${libsubdir}/include/g++'\n+else gxx_include_dir='${prefix}/include/g++'; fi)\n \n # Enable expensive internal checks\n AC_ARG_ENABLE(checking,"}, {"sha": "9e3c519ed13b51ae2dc04e9a57f7a238b6e4da86", "filename": "libio/config/linux.mt", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/libio%2Fconfig%2Flinux.mt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/libio%2Fconfig%2Flinux.mt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fconfig%2Flinux.mt?ref=e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "patch": "@@ -1,8 +1,5 @@\n # Use the libio which comes with the local libc.\n \n-# That is where we keep the g++ header files.\n-gxx_include_dir =$(prefix)/include/g++\n-\n # Comment this out to avoid including the stdio functions in libiostream.a:\n # LIBIOSTREAM_OBJECTS = $(IO_OBJECTS) $(IOSTREAM_OBJECTS) $(STDIO_WRAP_OBJECTS) $(OSPRIM_OBJECTS)\n # LIBIOSTREAM_DEP = $(LIBIOSTREAM_OBJECTS) stdio.list"}, {"sha": "247d8b5105c2de4b17df50c639253e8fb0169daa", "filename": "libstdc++/Makefile.in", "status": "modified", "additions": 17, "deletions": 10, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/libstdc%2B%2B%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c/libstdc%2B%2B%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FMakefile.in?ref=e0cb250f7aa6515ec2251b0c6e29e7ba5ed9144c", "patch": "@@ -48,6 +48,8 @@ LIBIBERTY_DIR = ../libiberty\n LIBIBERTY_OBJS = `cat $(LIBIBERTY_DIR)/needed-list` strerror.o\n \n tooldir = $(exec_prefix)/$(target)\n+# This is where the libraries will be installed; note, it will be set\n+# at make runtime now. See below at target install.\n INSTALLDIR = $(libdir)\n \n MOSTLYCLEAN_JUNK = *stmp-* tlib*.a *.s *.ii stdlist piclist\n@@ -272,24 +274,29 @@ install:\n \telse true ; \\\n \tfi\n \trootme=`pwd`/ ; export rootme ; \\\n-\trm -f $(INSTALLDIR)$(MULTISUBDIR)/$(SHLINK) ; \\\n+\tif [ x$(libsubdir) = x ] || [ x$(enable_version_specific_runtime_libs) != xyes ]; then \\\n+\t  INSTALLDIR=$(libdir); \\\n+\telse \\\n+\t  INSTALLDIR=$(libsubdir); \\\n+\tfi; \\\n+\trm -f $${INSTALLDIR}$(MULTISUBDIR)/$(SHLINK) ; \\\n \tfor FILE in $(LIBS) ; do \\\n-\t  rm -f $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n+\t  rm -f $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t  if [ $$FILE = $(SHLINK) ] ; then \\\n-\t    ln -f -s $(SHLIB) $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n+\t    ln -f -s $(SHLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t  elif [ $$FILE = mshlink ]; then \\\n \t    for FILE in $(MSHLINK) ; do \\\n-\t      rm -f $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n-\t      ln -f -s $(SHLIB) $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n+\t      rm -f $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      ln -f -s $(SHLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    done; \\\n \t  elif [ $$FILE = $(SHLIB) ]; then \\\n-\t    $(INSTALL_PROGRAM) $$FILE $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n+\t    $(INSTALL_PROGRAM) $$FILE $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    : On the HP, shared libraries must be mode 555. ;\\\n-\t    chmod 555 $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n+\t    chmod 555 $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t  else \\\n-\t    $(INSTALL_DATA) $$FILE $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n-\t    $(RANLIB) $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n-\t    chmod a-x $(INSTALLDIR)$(MULTISUBDIR)/$$FILE ; \\\n+\t    $(INSTALL_DATA) $$FILE $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    $(RANLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    chmod a-x $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t  fi ; \\\n \tdone\n \t@rootme=`pwd`/ ; export rootme ; \\"}]}