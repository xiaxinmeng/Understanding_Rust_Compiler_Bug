{"sha": "7ad8c4bf113ee762b5f4696e8622640d3453f2c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FkOGM0YmYxMTNlZTc2MmI1ZjQ2OTZlODYyMjY0MGQzNDUzZjJjOQ==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1995-02-28T23:06:03Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1995-02-28T23:06:03Z"}, "message": "function.c (lookup_static_chain): Check for a static chain using FUNCTION_NEEDS_STATIC_CHAIN.\n\n* function.c (lookup_static_chain):  Check for a static chain\nusing FUNCTION_NEEDS_STATIC_CHAIN.\n(init_function_start):  Set current_function_needs_context depending\non FUNCTION_NEEDS_STATIC_CHAIN rather than decl_function_context.\n\nFrom-SVN: r9096", "tree": {"sha": "382aa88e35bf7e0e24823af2c79f971f265b1eab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/382aa88e35bf7e0e24823af2c79f971f265b1eab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7ad8c4bf113ee762b5f4696e8622640d3453f2c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ad8c4bf113ee762b5f4696e8622640d3453f2c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ad8c4bf113ee762b5f4696e8622640d3453f2c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ad8c4bf113ee762b5f4696e8622640d3453f2c9/comments", "author": null, "committer": null, "parents": [{"sha": "7c38c3ad5e0d6123089abf8249641df57aab5f42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c38c3ad5e0d6123089abf8249641df57aab5f42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c38c3ad5e0d6123089abf8249641df57aab5f42"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "edd2bed6113b53a14ca6e6a8df84253a6937f621", "filename": "gcc/function.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ad8c4bf113ee762b5f4696e8622640d3453f2c9/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ad8c4bf113ee762b5f4696e8622640d3453f2c9/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=7ad8c4bf113ee762b5f4696e8622640d3453f2c9", "patch": "@@ -4246,12 +4246,18 @@ rtx\n lookup_static_chain (decl)\n      tree decl;\n {\n-  tree context = decl_function_context (decl);\n-  tree link;\n+  tree context, link;\n \n-  if (context == 0)\n+  if (TREE_CODE (decl) == FUNCTION_DECL\n+      ? ! FUNCTION_NEEDS_STATIC_CHAIN (decl)\n+      : ! FUNCTION_NEEDS_STATIC_CHAIN (current_function_decl))\n     return 0;\n   \n+  context = decl_function_context (decl);\n+\n+  if (context == 0)\n+    return 0;\n+\n   /* We treat inline_function_decl as an alias for the current function\n      because that is the inline function whose vars, types, etc.\n      are being merged into the current function.\n@@ -4707,7 +4713,7 @@ init_function_start (subr, filename, line)\n   /* Nonzero if this is a nested function that uses a static chain.  */\n \n   current_function_needs_context\n-    = (decl_function_context (current_function_decl) != 0);\n+    = FUNCTION_NEEDS_STATIC_CHAIN (current_function_decl);\n \n   /* Set if a call to setjmp is seen.  */\n   current_function_calls_setjmp = 0;"}]}