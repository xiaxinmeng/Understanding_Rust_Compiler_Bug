{"sha": "dec5faa2b2f0d311daa6defd4b4f3c1965748ddf", "node_id": "C_kwDOANBUbNoAKGRlYzVmYWEyYjJmMGQzMTFkYWE2ZGVmZDRiNGYzYzE5NjU3NDhkZGY", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2022-08-19T22:09:30Z"}, "committer": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2022-08-24T18:30:51Z"}, "message": "Fix PR 106690: enable effective_target_bswap for RISCV targets with ZBB enabled by default\n\nWhile looking for testcases to quickly test, I Noticed that\ncheck_effective_target_bswap was not enabled for riscv when\nZBB is enabled. This patch checks if ZBB is enabled when\ntargeting RISCV* for bswap.\n\nOK? Ran the testsuite for riscv32-linux-gnu both with and without ZBB enabled.\n\nPR testsuite/106690\ngcc/testsuite/ChangeLog:\n\n\t* lib/target-supports.exp (check_effective_target_bswap):\n\tReturn true if riscv and ZBB ISA extension is enabled.", "tree": {"sha": "00a1dd71a5aa4101876b59f37b6f3b0675750483", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00a1dd71a5aa4101876b59f37b6f3b0675750483"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dec5faa2b2f0d311daa6defd4b4f3c1965748ddf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dec5faa2b2f0d311daa6defd4b4f3c1965748ddf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dec5faa2b2f0d311daa6defd4b4f3c1965748ddf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dec5faa2b2f0d311daa6defd4b4f3c1965748ddf/comments", "author": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "committer": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5e6983c3da53729e58a32af1d531ea74b3dbf5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5e6983c3da53729e58a32af1d531ea74b3dbf5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5e6983c3da53729e58a32af1d531ea74b3dbf5d"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "0f1e1af31e9c3825e787f63a7873c33c7b253f6f", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dec5faa2b2f0d311daa6defd4b4f3c1965748ddf/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dec5faa2b2f0d311daa6defd4b4f3c1965748ddf/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=dec5faa2b2f0d311daa6defd4b4f3c1965748ddf", "patch": "@@ -8646,6 +8646,13 @@ proc check_effective_target_bswap { } {\n \t     || [istarget powerpc*-*-*]\n \t     || [istarget rs6000-*-*]\n \t     || [istarget s390*-*-*]\n+\t     || ([istarget riscv*-*-*]\n+\t         && [check_no_compiler_messages_nocache riscv_zbb object {\n+\t\t     #if __riscv_zbb  <= 0\n+\t\t     #error ZBB is not enabled\n+\t\t     #endif\n+\t\t     int i;\n+\t\t } \"\"])\n \t     || ([istarget arm*-*-*]\n \t\t && [check_no_compiler_messages_nocache arm_v6_or_later object {\n \t\t     #if __ARM_ARCH < 6"}]}