{"sha": "6637388fdc4b4c82c906966024f9012fc0c71df5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjYzNzM4OGZkYzRiNGM4MmM5MDY5NjYwMjRmOTAxMmZjMGM3MWRmNQ==", "commit": {"author": {"name": "Tristan Gingold", "email": "gingold@adacore.com", "date": "2011-10-11T07:13:59Z"}, "committer": {"name": "Tristan Gingold", "email": "gingold@gcc.gnu.org", "date": "2011-10-11T07:13:59Z"}, "message": "c.opt: (fallow-parameterless-variadic-functions): New.\n\nc-family/ChangeLog\n2011-10-11  Tristan Gingold  <gingold@adacore.com>\n\n        * c.opt: (fallow-parameterless-variadic-functions): New.\n\nChangeLog\n2011-10-11  Tristan Gingold  <gingold@adacore.com>\n\n        * doc/invoke.texi (C Dialect Options): Document\n        -fallow-parameterless-variadic-functions.\n        * c-parser.c (c_parser_parms_list_declarator): Handle it.\n\ntestsuite/ChangeLog\n2011-10-11  Tristan Gingold  <gingold@adacore.com>\n\n        * gcc.dg/va-arg-4.c: New test.\n        * gcc.dg/va-arg-5.c: Ditto.\n\nFrom-SVN: r179786", "tree": {"sha": "42265edef2e5b8b22a409439cc87ddca221acd00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/42265edef2e5b8b22a409439cc87ddca221acd00"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6637388fdc4b4c82c906966024f9012fc0c71df5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6637388fdc4b4c82c906966024f9012fc0c71df5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6637388fdc4b4c82c906966024f9012fc0c71df5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6637388fdc4b4c82c906966024f9012fc0c71df5/comments", "author": {"login": "gingold-adacore", "id": 16334725, "node_id": "MDQ6VXNlcjE2MzM0NzI1", "avatar_url": "https://avatars.githubusercontent.com/u/16334725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gingold-adacore", "html_url": "https://github.com/gingold-adacore", "followers_url": "https://api.github.com/users/gingold-adacore/followers", "following_url": "https://api.github.com/users/gingold-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/gingold-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/gingold-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gingold-adacore/subscriptions", "organizations_url": "https://api.github.com/users/gingold-adacore/orgs", "repos_url": "https://api.github.com/users/gingold-adacore/repos", "events_url": "https://api.github.com/users/gingold-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/gingold-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "10d1dc24ff815c3ed2b9c66493f05e44d5d7bafe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10d1dc24ff815c3ed2b9c66493f05e44d5d7bafe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10d1dc24ff815c3ed2b9c66493f05e44d5d7bafe"}], "stats": {"total": 52, "additions": 47, "deletions": 5}, "files": [{"sha": "957d661c3adf9a5ded83d51a1cfa6f1f924d4d94", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -1,3 +1,9 @@\n+2011-10-11  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* doc/invoke.texi (C Dialect Options): Document\n+\t-fallow-parameterless-variadic-functions.\n+\t* c-parser.c (c_parser_parms_list_declarator): Handle it.\n+\n 2011-10-10  Georg-Johann Lay  <avr@gjlay.de>\n \n \t* config/avr/avr.c (avr_option_override): Set"}, {"sha": "e93b98dd4519c22d499238ea6cd21a0ae47776c8", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -1,3 +1,7 @@\n+2011-10-11  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* c.opt: (fallow-parameterless-variadic-functions): New.\n+\n 2011-09-08  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR c++/33255 - Support -Wunused-local-typedefs warning"}, {"sha": "79287c40422d77af7e6298eee93c947d1e5b5795", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -700,6 +700,10 @@ Enforce class member access control semantics\n fall-virtual\n C++ ObjC++ Ignore Warn(switch %qs is no longer supported)\n \n+fallow-parameterless-variadic-functions\n+C ObjC Var(flag_allow_parameterless_variadic_functions)\n+Allow variadic functions without named parameter\n+\n falt-external-templates\n C++ ObjC++ Ignore Warn(switch %qs is no longer supported)\n No longer supported"}, {"sha": "af6cc149efc9fe73af42327a0f59d1fb2ceb1813", "filename": "gcc/c-parser.c", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parser.c?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -3159,10 +3159,19 @@ c_parser_parms_list_declarator (c_parser *parser, tree attrs, tree expr)\n   if (c_parser_next_token_is (parser, CPP_ELLIPSIS))\n     {\n       struct c_arg_info *ret = build_arg_info ();\n-      /* Suppress -Wold-style-definition for this case.  */\n-      ret->types = error_mark_node;\n-      error_at (c_parser_peek_token (parser)->location,\n-\t\t\"ISO C requires a named argument before %<...%>\");\n+\n+      if (flag_allow_parameterless_variadic_functions)\n+        {\n+          /* F (...) is allowed.  */\n+          ret->types = NULL_TREE;\n+        }\n+      else\n+        {\n+          /* Suppress -Wold-style-definition for this case.  */\n+          ret->types = error_mark_node;\n+          error_at (c_parser_peek_token (parser)->location,\n+                    \"ISO C requires a named argument before %<...%>\");\n+        }\n       c_parser_consume_token (parser);\n       if (c_parser_next_token_is (parser, CPP_CLOSE_PAREN))\n \t{"}, {"sha": "688892814c5ca7d0dc7d89692856d84de5d35897", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -170,7 +170,7 @@ in the following sections.\n @item C Language Options\n @xref{C Dialect Options,,Options Controlling C Dialect}.\n @gccoptlist{-ansi  -std=@var{standard}  -fgnu89-inline @gol\n--aux-info @var{filename} @gol\n+-aux-info @var{filename} -fallow-parameterless-variadic-functions @gol\n -fno-asm  -fno-builtin  -fno-builtin-@var{function} @gol\n -fhosted  -ffreestanding -fopenmp -fms-extensions -fplan9-extensions @gol\n -trigraphs  -no-integrated-cpp  -traditional  -traditional-cpp @gol\n@@ -1622,6 +1622,13 @@ character).  In the case of function definitions, a K&R-style list of\n arguments followed by their declarations is also provided, inside\n comments, after the declaration.\n \n+@item -fallow-parameterless-variadic-functions\n+Accept variadic functions without named parameters.\n+\n+Although it is possible to define such a function, this is not very\n+useful as it is not possible to read the arguments.  This is only\n+supported for C as this construct is allowed by C++.\n+\n @item -fno-asm\n @opindex fno-asm\n Do not recognize @code{asm}, @code{inline} or @code{typeof} as a"}, {"sha": "1a80895dc58145554c5c353acc8d88b003826358", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -1,3 +1,8 @@\n+2011-10-11  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* gcc.dg/va-arg-4.c: New test.\n+\t* gcc.dg/va-arg-5.c: Ditto.\n+\n 2011-10-11  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* lib/target-supports.exp (check_effective_target_fd_truncate):"}, {"sha": "6d737c483265fc3c34595c00474162f7cfcb7d76", "filename": "gcc/testsuite/gcc.dg/va-arg-4.c", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-4.c?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -0,0 +1,3 @@\n+/* { dg-do compile } */\n+#include <stdarg.h>\n+extern void baz(...);\t/* { dg-error \"requires a named argument\" } */"}, {"sha": "a00616ee2015b1e262e2f3a99a1dbdc9759a9235", "filename": "gcc/testsuite/gcc.dg/va-arg-5.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6637388fdc4b4c82c906966024f9012fc0c71df5/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fva-arg-5.c?ref=6637388fdc4b4c82c906966024f9012fc0c71df5", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fallow-parameterless-variadic-functions\" } */\n+#include <stdarg.h>\n+extern void baz(...);"}]}