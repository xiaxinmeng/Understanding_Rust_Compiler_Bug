{"sha": "ae01169c6918a8ba506c908372bcd4e01fd34714", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWUwMTE2OWM2OTE4YThiYTUwNmM5MDgzNzJiY2Q0ZTAxZmQzNDcxNA==", "commit": {"author": {"name": "Xinliang David Li", "email": "davidxl@google.com", "date": "2011-04-22T19:11:49Z"}, "committer": {"name": "Xinliang David Li", "email": "davidxl@gcc.gnu.org", "date": "2011-04-22T19:11:49Z"}, "message": "Proper handling of -Werror=coverage-mismatch\n\nFrom-SVN: r172870", "tree": {"sha": "2350312e2c663ac6de07288fc6b7ee097866a82b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2350312e2c663ac6de07288fc6b7ee097866a82b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae01169c6918a8ba506c908372bcd4e01fd34714", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae01169c6918a8ba506c908372bcd4e01fd34714", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae01169c6918a8ba506c908372bcd4e01fd34714", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae01169c6918a8ba506c908372bcd4e01fd34714/comments", "author": {"login": "vns-mn", "id": 57157229, "node_id": "MDQ6VXNlcjU3MTU3MjI5", "avatar_url": "https://avatars.githubusercontent.com/u/57157229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vns-mn", "html_url": "https://github.com/vns-mn", "followers_url": "https://api.github.com/users/vns-mn/followers", "following_url": "https://api.github.com/users/vns-mn/following{/other_user}", "gists_url": "https://api.github.com/users/vns-mn/gists{/gist_id}", "starred_url": "https://api.github.com/users/vns-mn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vns-mn/subscriptions", "organizations_url": "https://api.github.com/users/vns-mn/orgs", "repos_url": "https://api.github.com/users/vns-mn/repos", "events_url": "https://api.github.com/users/vns-mn/events{/privacy}", "received_events_url": "https://api.github.com/users/vns-mn/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "93dfac24adf650e093d21f71193072626595a37d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93dfac24adf650e093d21f71193072626595a37d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93dfac24adf650e093d21f71193072626595a37d"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "b334e323170380209a88aa5b8681630dd47b36e5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae01169c6918a8ba506c908372bcd4e01fd34714/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae01169c6918a8ba506c908372bcd4e01fd34714/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ae01169c6918a8ba506c908372bcd4e01fd34714", "patch": "@@ -1,3 +1,10 @@\n+2011-04-22  Xinliang David Li  <davidxl@google.com>\n+\n+\t* toplev.c (process_options): Enable -Werror=coverage-mismatch\n+\tby default when -Wno-error is not specified.\n+\t* opts-global.c (decode_options): Remove call to\n+\tcontrol_warning_options.\n+\n 2011-04-22  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/48717"}, {"sha": "1134e3a274579a57215545ab9c4e5c6d4b960ac5", "filename": "gcc/opts-global.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae01169c6918a8ba506c908372bcd4e01fd34714/gcc%2Fopts-global.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae01169c6918a8ba506c908372bcd4e01fd34714/gcc%2Fopts-global.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts-global.c?ref=ae01169c6918a8ba506c908372bcd4e01fd34714", "patch": "@@ -310,11 +310,6 @@ decode_options (struct gcc_options *opts, struct gcc_options *opts_set,\n \n   set_default_handlers (&handlers);\n \n-  /* Enable -Werror=coverage-mismatch by default.  */\n-  control_warning_option (OPT_Wcoverage_mismatch, (int) DK_ERROR, true,\n-\t\t\t  loc, lang_mask,\n-\t\t\t  &handlers, opts, opts_set, dc);\n-\n   default_options_optimization (opts, opts_set,\n \t\t\t\tdecoded_options, decoded_options_count,\n \t\t\t\tloc, lang_mask, &handlers, dc);"}, {"sha": "06014a938e5d23db34fad35e5ee77c33994b348e", "filename": "gcc/toplev.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae01169c6918a8ba506c908372bcd4e01fd34714/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae01169c6918a8ba506c908372bcd4e01fd34714/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=ae01169c6918a8ba506c908372bcd4e01fd34714", "patch": "@@ -1600,6 +1600,15 @@ process_options (void)\n       flag_omit_frame_pointer = 0;\n     }\n \n+  /* Enable -Werror=coverage-mismatch when -Werror and -Wno-error\n+     have not been set.  */\n+  if (!global_options_set.x_warnings_are_errors\n+      && warn_coverage_mismatch\n+      && (global_dc->classify_diagnostic[OPT_Wcoverage_mismatch] ==\n+          DK_UNSPECIFIED))\n+    diagnostic_classify_diagnostic (global_dc, OPT_Wcoverage_mismatch,\n+                                    DK_ERROR, UNKNOWN_LOCATION);\n+\n   /* Save the current optimization options.  */\n   optimization_default_node = build_optimization_node ();\n   optimization_current_node = optimization_default_node;"}]}