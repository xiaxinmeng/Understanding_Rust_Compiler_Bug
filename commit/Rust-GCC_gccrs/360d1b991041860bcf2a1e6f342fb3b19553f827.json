{"sha": "360d1b991041860bcf2a1e6f342fb3b19553f827", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzYwZDFiOTkxMDQxODYwYmNmMmExZTZmMzQyZmIzYjE5NTUzZjgyNw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-12-06T06:53:02Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-12-06T06:53:02Z"}, "message": "re PR c++/13305 (Parser error with 'class __attribute__((dllimport)) Foo;'  type specifier)\n\n\tPR c++/13305\n\t* parser.c (cp_parser_elaborated_type_specifier): Accept\n\tattributes.\n\n\tPR c++/13305\n\t* g++.dg/ext/attrib9.C: New test.\n\nFrom-SVN: r74361", "tree": {"sha": "e49526bc9b495eca8ff3eb69a7a6f0dee11e4992", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e49526bc9b495eca8ff3eb69a7a6f0dee11e4992"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/360d1b991041860bcf2a1e6f342fb3b19553f827", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/360d1b991041860bcf2a1e6f342fb3b19553f827", "html_url": "https://github.com/Rust-GCC/gccrs/commit/360d1b991041860bcf2a1e6f342fb3b19553f827", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/360d1b991041860bcf2a1e6f342fb3b19553f827/comments", "author": null, "committer": null, "parents": [{"sha": "3b099d37f1f358cc9547ed9a466e7a5c1ba0c33a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b099d37f1f358cc9547ed9a466e7a5c1ba0c33a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b099d37f1f358cc9547ed9a466e7a5c1ba0c33a"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "adfdb7e79cbb050d3535e6de01fc84c4dcb64819", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=360d1b991041860bcf2a1e6f342fb3b19553f827", "patch": "@@ -1,3 +1,10 @@\n+2003-12-05  Danny Smith <dannysmith@gcc.gnu.org>\n+\t    Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/13305\n+\t* parser.c (cp_parser_elaborated_type_specifier): Accept\n+\tattributes.\n+\t\n 2003-12-05  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/13314"}, {"sha": "3f8fe7059bab9c959eb348c5d13d90810e80c0c0", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=360d1b991041860bcf2a1e6f342fb3b19553f827", "patch": "@@ -8647,6 +8647,14 @@ cp_parser_type_name (cp_parser* parser)\n      typename :: [opt] nested-name-specifier template [opt] \n        template-id \n \n+   GNU extension:\n+\n+   elaborated-type-specifier:\n+     class-key attributes :: [opt] nested-name-specifier [opt] identifier\n+     class-key attributes :: [opt] nested-name-specifier [opt] \n+               template [opt] template-id\n+     enum attributes :: [opt] nested-name-specifier [opt] identifier\n+\n    If IS_FRIEND is TRUE, then this elaborated-type-specifier is being\n    declared `friend'.  If IS_DECLARATION is TRUE, then this\n    elaborated-type-specifier appears in a decl-specifiers-seq, i.e.,\n@@ -8662,6 +8670,7 @@ cp_parser_elaborated_type_specifier (cp_parser* parser,\n   enum tag_types tag_type;\n   tree identifier;\n   tree type = NULL_TREE;\n+  tree attributes = NULL_TREE;\n \n   /* See if we're looking at the `enum' keyword.  */\n   if (cp_lexer_next_token_is_keyword (parser->lexer, RID_ENUM))\n@@ -8670,6 +8679,8 @@ cp_parser_elaborated_type_specifier (cp_parser* parser,\n       cp_lexer_consume_token (parser->lexer);\n       /* Remember that it's an enumeration type.  */\n       tag_type = enum_type;\n+      /* Parse the attributes.  */\n+      attributes = cp_parser_attributes_opt (parser);\n     }\n   /* Or, it might be `typename'.  */\n   else if (cp_lexer_next_token_is_keyword (parser->lexer,\n@@ -8689,6 +8700,8 @@ cp_parser_elaborated_type_specifier (cp_parser* parser,\n       tag_type = cp_parser_class_key (parser);\n       if (tag_type == none_type)\n \treturn error_mark_node;\n+      /* Parse the attributes.  */\n+      attributes = cp_parser_attributes_opt (parser);\n     }\n \n   /* Look for the `::' operator.  */\n@@ -8858,7 +8871,7 @@ cp_parser_elaborated_type_specifier (cp_parser* parser,\n \t     declaration context.  */\n \n \t  type = xref_tag (tag_type, identifier, \n-\t\t\t   /*attributes=*/NULL_TREE,\n+\t\t\t   attributes,\n \t\t\t   (is_friend \n \t\t\t    || !is_declaration\n \t\t\t    || cp_lexer_next_token_is_not (parser->lexer, "}, {"sha": "f6fd9ff402cbd7f627a660a90ff947632424e187", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=360d1b991041860bcf2a1e6f342fb3b19553f827", "patch": "@@ -1,3 +1,8 @@\n+2003-12-05  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/13305\n+\t* g++.dg/ext/attrib9.C: New test.\n+\n 2003-12-05  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/13314"}, {"sha": "ee6fdb1d375cf58e62483ff9220a72f830a8b156", "filename": "gcc/testsuite/g++.dg/ext/attrib9.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/360d1b991041860bcf2a1e6f342fb3b19553f827/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib9.C?ref=360d1b991041860bcf2a1e6f342fb3b19553f827", "patch": "@@ -0,0 +1,5 @@\n+class __attribute__((unused)) C;\n+struct __attribute__((unused)) S;\n+union __attribute__((unused)) U;\n+enum e {};\n+enum __attribute__((unused)) e;"}]}