{"sha": "4c5bae34c163fa87e5c137e71d4be728d4b21291", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGM1YmFlMzRjMTYzZmE4N2U1YzEzN2U3MWQ0YmU3MjhkNGIyMTI5MQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-09-04T15:53:21Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-09-04T15:53:21Z"}, "message": "decl.c (cp_finish_decl): Call determine_visibility before make_rtl_for_nonlocal_decl.\n\ngcc/cp/\n\t* decl.c (cp_finish_decl): Call determine_visibility before\n\tmake_rtl_for_nonlocal_decl.\n\nFrom-SVN: r128091", "tree": {"sha": "7bd4d6a1ec30200fe1cae2af28214b0f38d7ff4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7bd4d6a1ec30200fe1cae2af28214b0f38d7ff4b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c5bae34c163fa87e5c137e71d4be728d4b21291", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c5bae34c163fa87e5c137e71d4be728d4b21291", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c5bae34c163fa87e5c137e71d4be728d4b21291", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c5bae34c163fa87e5c137e71d4be728d4b21291/comments", "author": null, "committer": null, "parents": [{"sha": "16ae1645b19b0610567841aa48e3440b3806199e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16ae1645b19b0610567841aa48e3440b3806199e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16ae1645b19b0610567841aa48e3440b3806199e"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "63b7b207ef12b1ca61efc0602120b742196a03e1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c5bae34c163fa87e5c137e71d4be728d4b21291/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c5bae34c163fa87e5c137e71d4be728d4b21291/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=4c5bae34c163fa87e5c137e71d4be728d4b21291", "patch": "@@ -1,3 +1,8 @@\n+2007-09-04  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* decl.c (cp_finish_decl): Call determine_visibility before\n+\tmake_rtl_for_nonlocal_decl.\n+\n 2007-09-04  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/14032"}, {"sha": "1b7012cb259fac47e51c6871015d4d34cc9bca22", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c5bae34c163fa87e5c137e71d4be728d4b21291/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c5bae34c163fa87e5c137e71d4be728d4b21291/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=4c5bae34c163fa87e5c137e71d4be728d4b21291", "patch": "@@ -5463,6 +5463,9 @@ cp_finish_decl (tree decl, tree init, bool init_const_expr_p,\n \t  maybe_commonize_var (decl);\n \t}\n \n+      /* This needs to happen after the linkage is set. */\n+      determine_visibility (decl);\n+\n       make_rtl_for_nonlocal_decl (decl, init, asmspec);\n \n       /* Check for abstractness of the type. Notice that there is no\n@@ -5474,9 +5477,6 @@ cp_finish_decl (tree decl, tree init, bool init_const_expr_p,\n       else\n \tabstract_virtuals_error (decl, type);\n \n-      /* This needs to happen after the linkage is set. */\n-      determine_visibility (decl);\n-\n       if (TREE_CODE (decl) == FUNCTION_DECL\n \t  || TREE_TYPE (decl) == error_mark_node)\n \t/* No initialization required.  */"}]}