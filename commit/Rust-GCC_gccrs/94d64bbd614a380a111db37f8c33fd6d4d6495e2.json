{"sha": "94d64bbd614a380a111db37f8c33fd6d4d6495e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTRkNjRiYmQ2MTRhMzgwYTExMWRiMzdmOGMzM2ZkNmQ0ZDY0OTVlMg==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2014-08-26T06:47:53Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2014-08-26T06:47:53Z"}, "message": "Update rs6000.c's pass_analyze_swaps to use rtx_insn\n\ngcc/\n\t* config/rs6000/rs6000.c (class swap_web_entry): Strengthen field\n\t\"insn\" from rtx to rtx_insn *.\n\t(permute_load): Likewise for param \"insn\".\n\t(permute_store): Likewise.\n\t(handle_special_swappables): Likewise for local \"insn\".\n\t(replace_swap_with_copy): Likewise for locals \"insn\" and\n\t\"new_insn\".\n\t(rs6000_analyze_swaps): Likewise for local \"insn\".\n\nFrom-SVN: r214489", "tree": {"sha": "7db3743edc72e2f6857e6cb9252617a027022ccc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7db3743edc72e2f6857e6cb9252617a027022ccc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94d64bbd614a380a111db37f8c33fd6d4d6495e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94d64bbd614a380a111db37f8c33fd6d4d6495e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94d64bbd614a380a111db37f8c33fd6d4d6495e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94d64bbd614a380a111db37f8c33fd6d4d6495e2/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "347990b7cbe2a404c6c8ba82f957bc278dbd67c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/347990b7cbe2a404c6c8ba82f957bc278dbd67c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/347990b7cbe2a404c6c8ba82f957bc278dbd67c0"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "e1a1bea4a929452f5cbac130a48b59d456694ca2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94d64bbd614a380a111db37f8c33fd6d4d6495e2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94d64bbd614a380a111db37f8c33fd6d4d6495e2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=94d64bbd614a380a111db37f8c33fd6d4d6495e2", "patch": "@@ -1,3 +1,14 @@\n+2014-08-26  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* config/rs6000/rs6000.c (class swap_web_entry): Strengthen field\n+\t\"insn\" from rtx to rtx_insn *.\n+\t(permute_load): Likewise for param \"insn\".\n+\t(permute_store): Likewise.\n+\t(handle_special_swappables): Likewise for local \"insn\".\n+\t(replace_swap_with_copy): Likewise for locals \"insn\" and\n+\t\"new_insn\".\n+\t(rs6000_analyze_swaps): Likewise for local \"insn\".\n+\n 2014-08-25  David Malcolm  <dmalcolm@redhat.com>\n \n \t* regrename.h (struct du_chain): Strengthen field \"insn\" from rtx"}, {"sha": "3fce3a328dfbd5b05eef4a9821680eb9f5cdafb8", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94d64bbd614a380a111db37f8c33fd6d4d6495e2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94d64bbd614a380a111db37f8c33fd6d4d6495e2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=94d64bbd614a380a111db37f8c33fd6d4d6495e2", "patch": "@@ -33496,7 +33496,7 @@ class swap_web_entry : public web_entry_base\n {\n  public:\n   /* Pointer to the insn.  */\n-  rtx insn;\n+  rtx_insn *insn;\n   /* Set if insn contains a mention of a vector register.  All other\n      fields are undefined if this field is unset.  */\n   unsigned int is_relevant : 1;\n@@ -34040,7 +34040,7 @@ adjust_subreg_index (rtx op)\n \n /* Convert the non-permuting load INSN to a permuting one.  */\n static void\n-permute_load (rtx insn)\n+permute_load (rtx_insn *insn)\n {\n   rtx body = PATTERN (insn);\n   rtx mem_op = SET_SRC (body);\n@@ -34066,7 +34066,7 @@ permute_load (rtx insn)\n \n /* Convert the non-permuting store INSN to a permuting one.  */\n static void\n-permute_store (rtx insn)\n+permute_store (rtx_insn *insn)\n {\n   rtx body = PATTERN (insn);\n   rtx src_reg = SET_SRC (body);\n@@ -34094,7 +34094,7 @@ permute_store (rtx insn)\n static void\n handle_special_swappables (swap_web_entry *insn_entry, unsigned i)\n {\n-  rtx insn = insn_entry[i].insn;\n+  rtx_insn *insn = insn_entry[i].insn;\n   rtx body = PATTERN (insn);\n \n   switch (insn_entry[i].special_handling)\n@@ -34133,11 +34133,11 @@ handle_special_swappables (swap_web_entry *insn_entry, unsigned i)\n static void\n replace_swap_with_copy (swap_web_entry *insn_entry, unsigned i)\n {\n-  rtx insn = insn_entry[i].insn;\n+  rtx_insn *insn = insn_entry[i].insn;\n   rtx body = PATTERN (insn);\n   rtx src_reg = XEXP (SET_SRC (body), 0);\n   rtx copy = gen_rtx_SET (VOIDmode, SET_DEST (body), src_reg);\n-  rtx new_insn = emit_insn_before (copy, insn);\n+  rtx_insn *new_insn = emit_insn_before (copy, insn);\n   set_block_for_insn (new_insn, BLOCK_FOR_INSN (insn));\n   df_insn_rescan (new_insn);\n \n@@ -34209,7 +34209,7 @@ rs6000_analyze_swaps (function *fun)\n {\n   swap_web_entry *insn_entry;\n   basic_block bb;\n-  rtx insn;\n+  rtx_insn *insn;\n \n   /* Dataflow analysis for use-def chains.  */\n   df_set_flags (DF_RD_PRUNE_DEAD_DEFS);"}]}