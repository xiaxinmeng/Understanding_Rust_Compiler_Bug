{"sha": "ce6437aa9b2f468a3414e744acb84cdeb75f5316", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U2NDM3YWE5YjJmNDY4YTM0MTRlNzQ0YWNiODRjZGViNzVmNTMxNg==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-04-12T12:15:38Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-04-12T13:37:01Z"}, "message": "Darwin, testsuite: Adjust indirect thunk tests for default flags.\n\nDarwin mandates an indirection for variables in the commmon\nsection.  Since the change to -fno-common, variables in some\nof the thunk tests are now in the .data section where they\nmay be accessed directly.  Remove the indirections from the\nscan-assembler matches.\n\ngcc/testsuite/ChangeLog:\n\n2020-04-12  Iain Sandoe  <iain@sandoe.co.uk>\n\n\t* gcc.target/i386/indirect-thunk-1.c: Adjust for fno-common\n\tchange, removing indirections for vars in .data.\n\t* gcc.target/i386/indirect-thunk-2.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-3.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-4.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-attr-1.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-attr-2.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-attr-3.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-attr-4.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-attr-5.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-attr-6.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-extern-1.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-extern-2.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-extern-3.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-extern-4.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-inline-1.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-inline-2.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-inline-3.c: Likewise.\n\t* gcc.target/i386/indirect-thunk-inline-4.c: Likewise.", "tree": {"sha": "7210cb3963c1819384a3ff45466ad6f11f98a46a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7210cb3963c1819384a3ff45466ad6f11f98a46a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce6437aa9b2f468a3414e744acb84cdeb75f5316", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce6437aa9b2f468a3414e744acb84cdeb75f5316", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce6437aa9b2f468a3414e744acb84cdeb75f5316", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce6437aa9b2f468a3414e744acb84cdeb75f5316/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae6fc5ce43788db6962ca657e8c0d17017c1a6e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae6fc5ce43788db6962ca657e8c0d17017c1a6e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae6fc5ce43788db6962ca657e8c0d17017c1a6e2"}], "stats": {"total": 76, "additions": 49, "deletions": 27}, "files": [{"sha": "a5e8e6b3c0ca743ff9ffe372d081e94064b69fcc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -1,3 +1,25 @@\n+2020-04-12  Iain Sandoe  <iain@sandoe.co.uk>\n+\n+\t* gcc.target/i386/indirect-thunk-1.c: Adjust for fno-common\n+\tchange, removing indirections for vars in .data.\n+\t* gcc.target/i386/indirect-thunk-2.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-3.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-4.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-attr-1.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-attr-2.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-attr-3.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-attr-4.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-attr-5.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-attr-6.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-extern-1.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-extern-2.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-extern-3.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-extern-4.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-inline-1.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-inline-2.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-inline-3.c: Likewise.\n+\t* gcc.target/i386/indirect-thunk-inline-4.c: Likewise.\n+\n 2020-04-11  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/86327"}, {"sha": "77593c97ab99c432151ae37042496738955cdff2", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-1.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -14,7 +14,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"jmp\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */"}, {"sha": "91e606b96d225ae1fed562041661aeef0ce3c868", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-2.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -13,8 +13,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"jmp\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */"}, {"sha": "bf6573292dbf61ef2504590ed5506a198ffeea95", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-3.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -15,7 +15,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"call\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */"}, {"sha": "2ece2d7215d0f94b07b18a928488ae6c34a9b9a3", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-4.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-4.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -14,8 +14,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"call\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */"}, {"sha": "f0648a49b37e54970c0160284641a89adf9c1624", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-attr-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-1.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -17,7 +17,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"jmp\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */"}, {"sha": "a28a8b31dea49841b113de565e9568480f8f1c51", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-attr-2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-2.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -14,8 +14,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"jmp\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */"}, {"sha": "3fea27a50eb6937afeba8e8130eabbbd5d1e196d", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-attr-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-3.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -17,7 +17,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler-times {jmp[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler-times {call[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler {\\tpause} } } */"}, {"sha": "f2a7690d33ea2b28aa5b7c7effc2374b6de66f71", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-attr-4.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-4.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -15,8 +15,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler-times {jmp[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler-times {call[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler {\\tpause} } } */"}, {"sha": "d979824f88dd481fb0c1e14718fa952635da61f4", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-attr-5.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-5.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -17,7 +17,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"call\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler-not {\\t(lfence|pause)} } } */\n /* { dg-final { scan-assembler-not {jmp[ \\t]*\\.?LIND} } } */"}, {"sha": "d8e395ad4b438bad33cd954b4f0aab01b5a1cdc1", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-attr-6.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-attr-6.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -15,8 +15,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"call\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler-not {\\t(lfence|pause)} } } */\n /* { dg-final { scan-assembler-not {jmp[ \\t]*\\.?LIND} } } */"}, {"sha": "3be7676d8875755835a4b80c82b6ecd42ebfa5df", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-extern-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-1.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -14,7 +14,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"jmp\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler-not {\\t(lfence|pause)} } } */\n /* { dg-final { scan-assembler-not {jmp[ \\t]*\\.?LIND} } } */"}, {"sha": "a147ce59742a75a8a9c2984d991071ffcac3eeb8", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-extern-2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-2.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -13,8 +13,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"jmp\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler-not {\\t(lfence|pause)} } } */\n /* { dg-final { scan-assembler-not {jmp[ \\t]*\\.?LIND} } } */"}, {"sha": "469152ad38ae745004b006fad098053a261d07f0", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-extern-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-3.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -15,7 +15,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"call\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler-not {\\t(lfence|pause)} } } */\n /* { dg-final { scan-assembler-not {jmp[ \\t]*\\.?LIND} } } */"}, {"sha": "151d328cf968d4b2e1670e56bb6be29e73166310", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-extern-4.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-extern-4.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -14,7 +14,7 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler \"call\\[ \\t\\]*_?__x86_indirect_thunk_(r|e)ax\" } } */\n /* { dg-final { scan-assembler-not {\\t(lfence|pause)} } } */"}, {"sha": "1a68953f72dd69156f394887014f6d8845ca2e63", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-inline-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-1.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -14,7 +14,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {\\tpause} } } */"}, {"sha": "33e61d5948fab4a6be3b61a2bc292cf07d5251a1", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-inline-2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-2.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -13,8 +13,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler {jmp[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {call[ \\t]*\\.?LIND} } } */\n /* { dg-final { scan-assembler {\\tpause} } } */"}, {"sha": "d607dd3606d82ce522edfe5a0c6a56ebfd944531", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-inline-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-3.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -15,7 +15,7 @@ male_indirect_jump (long offset)\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n /* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler-times {jmp[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler-times {call[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler-times {\\tpause} 1 } } */"}, {"sha": "dee18f630d1dd8c35d4a3bbdfde13d269fca2fec", "filename": "gcc/testsuite/gcc.target/i386/indirect-thunk-inline-4.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6437aa9b2f468a3414e744acb84cdeb75f5316/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Findirect-thunk-inline-4.c?ref=ce6437aa9b2f468a3414e744acb84cdeb75f5316", "patch": "@@ -14,8 +14,8 @@ male_indirect_jump (long offset)\n }\n \n /* { dg-final { scan-assembler \"mov(?:l|q)\\[ \\t\\]*dispatch\" { target *-*-linux* } } } */\n-/* { dg-final { scan-assembler {movq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n-/* { dg-final { scan-assembler {movl[ \\t]*[Ll]_dispatch\\$non_lazy_ptr-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {leaq[ \\t]*_dispatch} { target { lp64 && *-*-darwin* } } } } */\n+/* { dg-final { scan-assembler {movl[ \\t]*_dispatch-L[0-9]+\\$pb} { target { ia32 && *-*-darwin* } } } } */\n /* { dg-final { scan-assembler-times {jmp[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler-times {call[ \\t]*\\.?LIND} 2 } } */\n /* { dg-final { scan-assembler-times {\\tpause} 1 } } */"}]}