{"sha": "46a76d4b7880ea2ff569b09aa80a07ce5355f645", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZhNzZkNGI3ODgwZWEyZmY1NjliMDlhYTgwYTA3Y2U1MzU1ZjY0NQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2011-12-17T13:51:51Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2011-12-17T13:51:51Z"}, "message": "re PR c++/51416 ([c++0x] [4.6/4.7 Regression] ICE with invalid use of auto)\n\n\tPR c++/51416\n\t* init.c (build_value_init_noctor): Check for incomplete type.\n\nFrom-SVN: r182435", "tree": {"sha": "dfbf5377d6e2be2b23b416c6bdf0534e14d1be4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dfbf5377d6e2be2b23b416c6bdf0534e14d1be4a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46a76d4b7880ea2ff569b09aa80a07ce5355f645", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46a76d4b7880ea2ff569b09aa80a07ce5355f645", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46a76d4b7880ea2ff569b09aa80a07ce5355f645", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46a76d4b7880ea2ff569b09aa80a07ce5355f645/comments", "author": null, "committer": null, "parents": [{"sha": "bc958632e5e497d646ebbada08414b6a8323ff62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc958632e5e497d646ebbada08414b6a8323ff62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc958632e5e497d646ebbada08414b6a8323ff62"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "2355a04de23150abac7e36ec9b22ffdd30da2bde", "filename": "gcc/cp/init.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46a76d4b7880ea2ff569b09aa80a07ce5355f645/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46a76d4b7880ea2ff569b09aa80a07ce5355f645/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=46a76d4b7880ea2ff569b09aa80a07ce5355f645", "patch": "@@ -377,6 +377,12 @@ build_value_init (tree type, tsubst_flags_t complain)\n tree\n build_value_init_noctor (tree type, tsubst_flags_t complain)\n {\n+  if (!COMPLETE_TYPE_P (type))\n+    {\n+      if (complain & tf_error)\n+\terror (\"value-initialization of incomplete type %qT\", type);\n+      return error_mark_node;\n+    }\n   /* FIXME the class and array cases should just use digest_init once it is\n      SFINAE-enabled.  */\n   if (CLASS_TYPE_P (type))"}]}