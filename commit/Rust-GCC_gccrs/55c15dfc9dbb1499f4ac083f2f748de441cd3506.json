{"sha": "55c15dfc9dbb1499f4ac083f2f748de441cd3506", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTVjMTVkZmM5ZGJiMTQ5OWY0YWMwODNmMmY3NDhkZTQ0MWNkMzUwNg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2005-05-15T17:07:20Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2005-05-15T17:07:20Z"}, "message": "* stacktrace.cc (getLineNumberForFrame): Use _Jv_GetSafeArg.\n\nFrom-SVN: r99733", "tree": {"sha": "4ff1efaf1c4528de1417e7584b1beded3f202064", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ff1efaf1c4528de1417e7584b1beded3f202064"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55c15dfc9dbb1499f4ac083f2f748de441cd3506", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55c15dfc9dbb1499f4ac083f2f748de441cd3506", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55c15dfc9dbb1499f4ac083f2f748de441cd3506", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55c15dfc9dbb1499f4ac083f2f748de441cd3506/comments", "author": null, "committer": null, "parents": [{"sha": "099ff66cd205b20f5040360015af23b9b11502cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/099ff66cd205b20f5040360015af23b9b11502cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/099ff66cd205b20f5040360015af23b9b11502cf"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "76714b43eb1a77099e21aec5eaa316021a3ff594", "filename": "libjava/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55c15dfc9dbb1499f4ac083f2f748de441cd3506/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55c15dfc9dbb1499f4ac083f2f748de441cd3506/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=55c15dfc9dbb1499f4ac083f2f748de441cd3506", "patch": "@@ -1,3 +1,7 @@\n+2005-05-15  Tom Tromey  <tromey@redhat.com>\n+\n+\t* stacktrace.cc (getLineNumberForFrame): Use _Jv_GetSafeArg.\n+\n 2005-05-13  Bryce McKinlay  <mckinlay@redhat.com>\n \n \tPR libgcj/21557"}, {"sha": "a849f6f9e7127eaa1e700aec42dd256c1a1091ce", "filename": "libjava/stacktrace.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55c15dfc9dbb1499f4ac083f2f748de441cd3506/libjava%2Fstacktrace.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55c15dfc9dbb1499f4ac083f2f748de441cd3506/libjava%2Fstacktrace.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fstacktrace.cc?ref=55c15dfc9dbb1499f4ac083f2f748de441cd3506", "patch": "@@ -184,13 +184,13 @@ _Jv_StackTrace::getLineNumberForFrame(_Jv_StackFrame *frame, NameFinder *finder,\n #endif\n   // Use dladdr() to determine in which binary the address IP resides.\n #if defined (HAVE_DLFCN_H) && defined (HAVE_DLADDR)\n-  extern char **_Jv_argv;\n   Dl_info info;\n   jstring binaryName = NULL;\n+  const char *argv0 = _Jv_GetSafeArg(0);\n \n   void *ip = frame->ip;\n   _Unwind_Ptr offset = 0;\n-  \n+\n   if (dladdr (ip, &info))\n     {\n       if (info.dli_fname)\n@@ -199,7 +199,7 @@ _Jv_StackTrace::getLineNumberForFrame(_Jv_StackFrame *frame, NameFinder *finder,\n         return;\n \n       // addr2line expects relative addresses for shared libraries.\n-      if (strcmp (info.dli_fname, _Jv_argv[0]) == 0)\n+      if (strcmp (info.dli_fname, argv0) == 0)\n         offset = (_Unwind_Ptr) ip;\n       else\n         offset = (_Unwind_Ptr) ip - (_Unwind_Ptr) info.dli_fbase;"}]}