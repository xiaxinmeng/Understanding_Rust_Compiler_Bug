{"sha": "18605ccc2b1bdac4b7ef05c433ef6bff28d78d96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTg2MDVjY2MyYjFiZGFjNGI3ZWYwNWM0MzNlZjZiZmYyOGQ3OGQ5Ng==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2005-09-05T07:52:12Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-09-05T07:52:12Z"}, "message": "binde.adb: Minor reformatting\n\n2005-09-01  Robert Dewar  <dewar@adacore.com>\n\n\t* binde.adb: Minor reformatting\n\t(Find_Elab_Order): Output warning if -p used with static elab order\n\nFrom-SVN: r103856", "tree": {"sha": "722fb8a9b31307d00a5df98871446194526d8f5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/722fb8a9b31307d00a5df98871446194526d8f5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/18605ccc2b1bdac4b7ef05c433ef6bff28d78d96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18605ccc2b1bdac4b7ef05c433ef6bff28d78d96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18605ccc2b1bdac4b7ef05c433ef6bff28d78d96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18605ccc2b1bdac4b7ef05c433ef6bff28d78d96/comments", "author": null, "committer": null, "parents": [{"sha": "009186e083d77ea7e83696601a428c409417b27c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/009186e083d77ea7e83696601a428c409417b27c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/009186e083d77ea7e83696601a428c409417b27c"}], "stats": {"total": 36, "additions": 25, "deletions": 11}, "files": [{"sha": "2985b90b9e935fbe75d5fad54ca04b65ec6cd227", "filename": "gcc/ada/binde.adb", "status": "modified", "additions": 25, "deletions": 11, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18605ccc2b1bdac4b7ef05c433ef6bff28d78d96/gcc%2Fada%2Fbinde.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18605ccc2b1bdac4b7ef05c433ef6bff28d78d96/gcc%2Fada%2Fbinde.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbinde.adb?ref=18605ccc2b1bdac4b7ef05c433ef6bff28d78d96", "patch": "@@ -24,14 +24,15 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Binderr; use Binderr;\n-with Butil;   use Butil;\n-with Debug;   use Debug;\n-with Fname;   use Fname;\n-with Lib;     use Lib;\n-with Namet;   use Namet;\n-with Opt;     use Opt;\n-with Output;  use Output;\n+with Binderr;  use Binderr;\n+with Butil;    use Butil;\n+with Debug;    use Debug;\n+with Fname;    use Fname;\n+with Lib;      use Lib;\n+with Namet;    use Namet;\n+with Opt;      use Opt;\n+with Output;   use Output;\n+with Targparm; use Targparm;\n \n package body Binde is\n \n@@ -269,7 +270,7 @@ package body Binde is\n      (Unam : Unit_Name_Type;\n       Link : Elab_All_Id)\n       return Elab_All_Id;\n-   --  Make an Elab_All_Entries table entry with the given Unam and Link.\n+   --  Make an Elab_All_Entries table entry with the given Unam and Link\n \n    function Unit_Id_Of (Uname : Unit_Name_Type) return Unit_Id;\n    --  This function uses the Info field set in the names table to obtain\n@@ -480,7 +481,6 @@ package body Binde is\n       --  if it becomes zero, then add to no predecessor list.\n \n       S := UNR.Table (Chosen).Successors;\n-\n       while S /= No_Successor loop\n          U := Succ.Table (S).After;\n          UNR.Table (U).Num_Pred := UNR.Table (U).Num_Pred - 1;\n@@ -738,7 +738,6 @@ package body Binde is\n       --  and we should have found and eliminated at least one bad path.\n \n       raise Program_Error;\n-\n    end Diagnose_Elaboration_Problem;\n \n    --------------------\n@@ -898,6 +897,20 @@ package body Binde is\n          UNR.Table (UNR.Last).Elab_Position := 0;\n       end loop;\n \n+      --  Output warning if -p used with no -gnatE units\n+\n+      if Pessimistic_Elab_Order\n+        and not Dynamic_Elaboration_Checks_Specified\n+      then\n+         if OpenVMS_On_Target then\n+            Error_Msg (\"?use of /PESSIMISTIC_ELABORATION questionable\");\n+         else\n+            Error_Msg (\"?use of -p switch questionable\");\n+         end if;\n+\n+         Error_Msg (\"?since all units compiled with static elaboration model\");\n+      end if;\n+\n       --  Gather dependencies and output them if option set\n \n       Gather_Dependencies;\n@@ -924,6 +937,7 @@ package body Binde is\n       --  nodes have been chosen.\n \n       Outer : loop\n+\n          --  If there are no nodes with predecessors, then either we are\n          --  done, as indicated by Num_Left being set to zero, or we have\n          --  a circularity. In the latter case, diagnose the circularity,"}]}