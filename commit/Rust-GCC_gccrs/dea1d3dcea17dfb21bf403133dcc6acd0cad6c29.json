{"sha": "dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGVhMWQzZGNlYTE3ZGZiMjFiZjQwMzEzM2RjYzZhY2QwY2FkNmMyOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-12-21T12:03:53Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-12-21T12:03:53Z"}, "message": "[multiple changes]\n\n2011-12-21  Thomas Quinot  <quinot@adacore.com>\n\n\t* thread.c, s-oscons-tmplt.c, init.c (pthread_condattr_setclock): For\n\tAIX 5.2, define as a dummy weak symbol in init.c.\n\t(CLOCK_RT_Ada): Set to CLOCK_MONOTONIC on all versions of AIX.\n\n2011-12-21  Thomas Quinot  <quinot@adacore.com>\n\n\t* snames.ads-tmpl, sem_ch8.adb: Minor reformatting.\n\t* sem_prag.adb: Minor comment clarification.\n\n2011-12-21  Vincent Celier  <celier@adacore.com>\n\n\t* prj-nmsc.adb (Report_No_Sources): New argument Lang for the\n\tlanguage name as a Name_Id. Do not report no sources if language\n\tis not allowed.\n\t(Add_Source): Do not add source if language is not allowed.\n\t* prj.adb (Add_Restricted_Language): New procedure\n\t(Is_Allowed_Language): New function\n\t* prj.ads (Add_Restricted_Language): New procedure\n\t(Is_Allowed_Language): New function\n\nFrom-SVN: r182577", "tree": {"sha": "f290fe9b936622bd1e571848a07a44ee941fb7c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f290fe9b936622bd1e571848a07a44ee941fb7c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/comments", "author": null, "committer": null, "parents": [{"sha": "88115c2a3945dd9eaf0807385e1cd27c298d3d08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88115c2a3945dd9eaf0807385e1cd27c298d3d08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88115c2a3945dd9eaf0807385e1cd27c298d3d08"}], "stats": {"total": 326, "additions": 254, "deletions": 72}, "files": [{"sha": "40a663ffdb3f94ef493e9964dea4b27aec4d6d58", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -1,3 +1,25 @@\n+2011-12-21  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* thread.c, s-oscons-tmplt.c, init.c (pthread_condattr_setclock): For\n+\tAIX 5.2, define as a dummy weak symbol in init.c.\n+\t(CLOCK_RT_Ada): Set to CLOCK_MONOTONIC on all versions of AIX.\n+\n+2011-12-21  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* snames.ads-tmpl, sem_ch8.adb: Minor reformatting.\n+\t* sem_prag.adb: Minor comment clarification.\n+\n+2011-12-21  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-nmsc.adb (Report_No_Sources): New argument Lang for the\n+\tlanguage name as a Name_Id. Do not report no sources if language\n+\tis not allowed.\n+\t(Add_Source): Do not add source if language is not allowed.\n+\t* prj.adb (Add_Restricted_Language): New procedure\n+\t(Is_Allowed_Language): New function\n+\t* prj.ads (Add_Restricted_Language): New procedure\n+\t(Is_Allowed_Language): New function\n+\n 2011-12-21  Robert Dewar  <dewar@adacore.com>\n \n \t* exp_ch5.adb, sem_dim.adb, sem_dim.ads, sem_ch12.adb, prj-conf.adb:"}, {"sha": "9c11d6b3d9e0a3c0702a372587a5ccd17a534263", "filename": "gcc/ada/init.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finit.c?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -219,6 +219,19 @@ nanosleep (struct timestruc_t *Rqtp, struct timestruc_t *Rmtp)\n \n #endif /* _AIXVERSION_430 */\n \n+/* Version of AIX before 5.3 don't have pthread_condattr_setclock:\n+ * supply it as a weak symbol here so that if linking on a 5.3 or newer\n+ * machine, we get the real one.\n+ */\n+\n+#ifndef _AIXVERSION_530\n+#pragma weak pthread_condattr_setclock\n+int\n+pthread_condattr_setclock (pthread_condattr_t *attr, clockid_t cl) {\n+  return 0;\n+}\n+#endif\n+\n static void\n __gnat_error_handler (int sig,\n \t\t      siginfo_t *si ATTRIBUTE_UNUSED,"}, {"sha": "af725de81e634c10784ba17f93bb0ef15926a368", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 72, "deletions": 5, "changes": 77, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -486,6 +486,7 @@ package body Prj.Nmsc is\n \n    procedure Report_No_Sources\n      (Project      : Project_Id;\n+      Lang         : Name_Id;\n       Lang_Name    : String;\n       Data         : Tree_Processing_Data;\n       Location     : Source_Ptr;\n@@ -642,6 +643,13 @@ package body Prj.Nmsc is\n       Source_To_Replace : Source_Id := No_Source;\n \n    begin\n+      --  Nothing to do if the language is not one of the restricted ones\n+\n+      if not Is_Allowed_Language (Lang_Id.Name) then\n+         Id := No_Source;\n+         return;\n+      end if;\n+\n       --  Check if the same file name or unit is used in the prj tree\n \n       Add_Src := True;\n@@ -1020,6 +1028,56 @@ package body Prj.Nmsc is\n      (Project : Project_Id;\n       Data    : in out Tree_Processing_Data)\n    is\n+      procedure Check_Aggregate\n+        (Project : Project_Id;\n+         Data    : in out Tree_Processing_Data);\n+      --  Check the aggregate project attributes, reject any not supported\n+      --  attributes.\n+\n+      ---------------------\n+      -- Check_Aggregate --\n+      ---------------------\n+\n+      procedure Check_Aggregate\n+        (Project : Project_Id;\n+         Data    : in out Tree_Processing_Data)\n+      is\n+\n+         procedure Check_Not_Defined (Name : Name_Id);\n+         --  Report an error if Var is defined\n+\n+         -----------------------\n+         -- Check_Not_Defined --\n+         -----------------------\n+\n+         procedure Check_Not_Defined (Name : Name_Id) is\n+            Var : constant Prj.Variable_Value :=\n+                    Prj.Util.Value_Of\n+                      (Name,\n+                       Project.Decl.Attributes,\n+                       Data.Tree.Shared);\n+         begin\n+            if not Var.Default then\n+               Error_Msg_Name_1 := Name;\n+               Error_Msg\n+                 (Data.Flags, \"wrong attribute %% in aggregate library\",\n+                  Var.Location, Project);\n+            end if;\n+         end Check_Not_Defined;\n+\n+      begin\n+         Check_Not_Defined (Snames.Name_Library_Dir);\n+         Check_Not_Defined (Snames.Name_Library_Interface);\n+         Check_Not_Defined (Snames.Name_Library_Name);\n+         Check_Not_Defined (Snames.Name_Library_Ali_Dir);\n+         Check_Not_Defined (Snames.Name_Library_Src_Dir);\n+         Check_Not_Defined (Snames.Name_Library_Options);\n+         Check_Not_Defined (Snames.Name_Library_Standalone);\n+         Check_Not_Defined (Snames.Name_Library_Kind);\n+         Check_Not_Defined (Snames.Name_Leading_Library_Options);\n+         Check_Not_Defined (Snames.Name_Library_Version);\n+      end Check_Aggregate;\n+\n       Shared   : constant Shared_Project_Tree_Data_Access := Data.Tree.Shared;\n       Prj_Data : Project_Processing_Data;\n \n@@ -1058,7 +1116,12 @@ package body Prj.Nmsc is\n \n       Check_Configuration (Project, Data);\n \n-      if Project.Qualifier /= Aggregate then\n+      if Project.Qualifier = Aggregate then\n+         --  For aggregate project checks that no library attributes are\n+         --  defined.\n+         Check_Aggregate (Project, Data);\n+\n+      else\n          Check_Library_Attributes (Project, Data);\n          Check_Package_Naming (Project, Data);\n \n@@ -7745,6 +7808,7 @@ package body Prj.Nmsc is\n                   if Source = No_Source then\n                      Report_No_Sources\n                        (Project.Project,\n+                        Language.Name,\n                         Get_Name_String (Language.Display_Name),\n                         Data,\n                         Project.Source_List_File_Location,\n@@ -8191,21 +8255,23 @@ package body Prj.Nmsc is\n \n    procedure Report_No_Sources\n      (Project      : Project_Id;\n+      Lang         : Name_Id;\n       Lang_Name    : String;\n       Data         : Tree_Processing_Data;\n       Location     : Source_Ptr;\n       Continuation : Boolean := False)\n    is\n    begin\n-      case Data.Flags.When_No_Sources is\n+      if Is_Allowed_Language (Lang) then\n+         case Data.Flags.When_No_Sources is\n          when Silent =>\n             null;\n \n          when Warning | Error =>\n             declare\n                Msg : constant String :=\n-                       \"<there are no \"\n-                       & Lang_Name & \" sources in this project\";\n+                      \"<there are no \"\n+                      & Lang_Name & \" sources in this project\";\n \n             begin\n                Error_Msg_Warn := Data.Flags.When_No_Sources = Warning;\n@@ -8216,7 +8282,8 @@ package body Prj.Nmsc is\n                   Error_Msg (Data.Flags, Msg, Location, Project);\n                end if;\n             end;\n-      end case;\n+         end case;\n+      end if;\n    end Report_No_Sources;\n \n    ----------------------"}, {"sha": "fc5b34ca8612d900038f00a856bb90de2af2a3ad", "filename": "gcc/ada/prj.adb", "status": "modified", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fprj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fprj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.adb?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -42,6 +42,17 @@ with GNAT.HTable;\n \n package body Prj is\n \n+   type Restricted_Lang;\n+   type Restricted_Lang_Access is access Restricted_Lang;\n+   type Restricted_Lang is record\n+      Name : Name_Id;\n+      Next : Restricted_Lang_Access;\n+   end record;\n+\n+   Restricted_Languages : Restricted_Lang_Access := null;\n+   --  When null, all languages are allowed, otherwise only the languages in\n+   --  the list are allowed.\n+\n    Object_Suffix : constant String := Get_Target_Object_Suffix.all;\n    --  File suffix for object files\n \n@@ -86,6 +97,20 @@ package body Prj is\n    function Contains_ALI_Files (Dir : Path_Name_Type) return Boolean;\n    --  Return True if there is at least one ALI file in the directory Dir\n \n+   -----------------------------\n+   -- Add_Restricted_Language --\n+   -----------------------------\n+\n+   procedure Add_Restricted_Language (Name : String) is\n+      N : String (1 .. Name'Length) := Name;\n+   begin\n+      To_Lower (N);\n+      Name_Len := 0;\n+      Add_Str_To_Name_Buffer (N);\n+      Restricted_Languages :=\n+        new Restricted_Lang'(Name => Name_Find, Next => Restricted_Languages);\n+   end Add_Restricted_Language;\n+\n    -------------------\n    -- Add_To_Buffer --\n    -------------------\n@@ -360,6 +385,30 @@ package body Prj is\n       return Name_Find;\n    end Extend_Name;\n \n+   -------------------------\n+   -- Is_Allowed_Language --\n+   -------------------------\n+\n+   function Is_Allowed_Language (Name : Name_Id) return Boolean is\n+      R : Restricted_Lang_Access := Restricted_Languages;\n+      Lang : constant String := Get_Name_String (Name);\n+   begin\n+      if R = null then\n+         return True;\n+\n+      else\n+         while R /= null loop\n+            if Get_Name_String (R.Name) = Lang then\n+               return True;\n+            end if;\n+\n+            R := R.Next;\n+         end loop;\n+\n+         return False;\n+      end if;\n+   end Is_Allowed_Language;\n+\n    ---------------------\n    -- Project_Changed --\n    ---------------------\n@@ -1549,7 +1598,9 @@ package body Prj is\n    procedure Debug_Output (Str : String) is\n    begin\n       if Current_Verbosity > Default then\n+         Set_Standard_Error;\n          Write_Line ((1 .. Debug_Level * 2 => ' ') & Str);\n+         Set_Standard_Output;\n       end if;\n    end Debug_Output;\n \n@@ -1560,7 +1611,9 @@ package body Prj is\n    procedure Debug_Indent is\n    begin\n       if Current_Verbosity = High then\n+         Set_Standard_Error;\n          Write_Str ((1 .. Debug_Level * 2 => ' '));\n+         Set_Standard_Output;\n       end if;\n    end Debug_Indent;\n \n@@ -1572,13 +1625,15 @@ package body Prj is\n    begin\n       if Current_Verbosity = High then\n          Debug_Indent;\n+         Set_Standard_Error;\n          Write_Str (Str);\n \n          if Str2 = No_Name then\n             Write_Line (\" <no_name>\");\n          else\n             Write_Line (\" \"\"\" & Get_Name_String (Str2) & '\"');\n          end if;\n+         Set_Standard_Output;\n       end if;\n    end Debug_Output;\n "}, {"sha": "760e61f0a2257f87a266c10d131600a974a48a4c", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -41,6 +41,14 @@ with GNAT.OS_Lib;          use GNAT.OS_Lib;\n \n package Prj is\n \n+   procedure Add_Restricted_Language (Name : String);\n+   --  Call by gprbuild for each language specify by switch\n+   --  --restricted-to-languages=.\n+\n+   function Is_Allowed_Language (Name : Name_Id) return Boolean;\n+   --  Returns True if --restricted-to-languages= is not used or if Name\n+   --  is one of the restricted languages.\n+\n    All_Other_Names : constant Name_Id := Names_High_Bound;\n    --  Name used to replace others as an index of an associative array\n    --  attribute in situations where this is allowed.\n@@ -1370,6 +1378,10 @@ package Prj is\n       Extended  : Project_Id) return Boolean;\n    --  Return True if Extending is extending the Extended project\n \n+   function Is_Ext\n+     (Extending : Project_Id;\n+      Extended  : Project_Id) return Boolean renames Is_Extending;\n+\n    function Has_Ada_Sources (Data : Project_Id) return Boolean;\n    --  Return True if the project has Ada sources\n "}, {"sha": "5f6782054262af43e64d31cfffbb9c9733edecb9", "filename": "gcc/ada/s-oscons-tmplt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fs-oscons-tmplt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fs-oscons-tmplt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-oscons-tmplt.c?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -1379,7 +1379,7 @@ CND(CLOCK_THREAD_CPUTIME_ID, \"Thread CPU clock\")\n /* There's no clock_gettime or clock_id's on Darwin, generate a dummy value */\n # define CLOCK_RT_Ada \"-1\"\n \n-#elif defined(FreeBSD) || (defined(_AIX) && defined(_AIXVERSION_530))\n+#elif defined(FreeBSD) || defined(_AIX)\n /** On these platforms use system provided monotonic clock instead of\n  ** the default CLOCK_REALTIME. We then need to set up cond var attributes\n  ** appropriately (see thread.c)."}, {"sha": "28edc2f857891cd8964f26950ca25fba3fabdd32", "filename": "gcc/ada/sem_ch8.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fsem_ch8.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fsem_ch8.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch8.adb?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -8031,7 +8031,7 @@ package body Sem_Ch8 is\n          end if;\n       end Use_Class_Wide_Operations;\n \n-   --  Start of processing for Use_One_Type;\n+   --  Start of processing for Use_One_Type\n \n    begin\n       --  It is the type determined by the subtype mark (8.4(8)) whose"}, {"sha": "a36af20cab3f5ff1b84ff3d3a01183b850a54b5f", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -14887,7 +14887,8 @@ package body Sem_Prag is\n    -----------------------------------------\n \n    --  This function makes use of the following static table which indicates\n-   --  whether a given pragma is significant.\n+   --  whether appearance of some name in a given pragma is to be considered\n+   --  as a reference for the purposes of warnings about unreferenced objects.\n \n    --  -1  indicates that references in any argument position are significant\n    --  0   indicates that appearance in any argument is not significant"}, {"sha": "a130784b7cb0bb6b99265088a3f417f4ca8434ae", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 61, "deletions": 64, "changes": 125, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -35,8 +35,8 @@ package Snames is\n \n --  This package contains definitions of standard names (i.e. entries in the\n --  Names table) that are used throughout the GNAT compiler. It also contains\n---  the definitions of some enumeration types whose definitions are tied to\n---  the order of these preset names.\n+--  the definitions of some enumeration types whose definitions are tied to the\n+--  order of these preset names.\n \n    ------------------\n    -- Preset Names --\n@@ -51,13 +51,13 @@ package Snames is\n    --  additional pragmas or attributes are introduced which might otherwise\n    --  cause a duplicate, then list it only once in this table, and adjust the\n    --  definition of the functions for testing for pragma names and attribute\n-   --  names, and returning their ID values. Of course everything is simpler\n-   --  if no such duplications occur!\n+   --  names, and returning their ID values. Of course everything is simpler if\n+   --  no such duplications occur!\n \n    --  First we have the one character names used to optimize the lookup\n    --  process for one character identifiers (to avoid the hashing in this\n-   --  case) There are a full 256 of these, but only the entries for lower\n-   --  case and upper case letters have identifiers\n+   --  case) There are a full 256 of these, but only the entries for lower case\n+   --  and upper case letters have identifiers\n \n    --  The lower case letter entries are used for one character identifiers\n    --  appearing in the source, for example in pragma Interface (C).\n@@ -90,8 +90,8 @@ package Snames is\n    Name_Z : constant Name_Id := First_Name_Id + Character'Pos ('z');\n \n    --  The upper case letter entries are used by expander code for local\n-   --  variables that do not require unique names (e.g. formal parameter\n-   --  names in constructed procedures)\n+   --  variables that do not require unique names (e.g. formal parameter names\n+   --  in constructed procedures).\n \n    Name_uA : constant Name_Id := First_Name_Id + Character'Pos ('A');\n    Name_uB : constant Name_Id := First_Name_Id + Character'Pos ('B');\n@@ -291,9 +291,9 @@ package Snames is\n    Name_Obj_TypeCode                   : constant Name_Id := N + $;\n    Name_Stub                           : constant Name_Id := N + $;\n \n-   --  Operator Symbol entries. The actual names have an upper case O at\n-   --  the start in place of the Op_ prefix (e.g. the actual name that\n-   --  corresponds to Name_Op_Abs is \"Oabs\".\n+   --  Operator Symbol entries. The actual names have an upper case O at the\n+   --  start in place of the Op_ prefix (e.g. the actual name that corresponds\n+   --  to Name_Op_Abs is \"Oabs\".\n \n    First_Operator_Name                 : constant Name_Id := N + $;\n    Name_Op_Abs                         : constant Name_Id := N + $; -- \"abs\"\n@@ -325,21 +325,21 @@ package Snames is\n \n    --  The entries marked GNAT are pragmas that are defined by GNAT and that\n    --  are implemented in all modes (Ada 83, Ada 95, and Ada 2005) Complete\n-   --  descriptions of the syntax of these implementation dependent pragmas\n-   --  may be found in the appropriate section in unit Sem_Prag in file\n+   --  descriptions of the syntax of these implementation dependent pragmas may\n+   --  be found in the appropriate section in unit Sem_Prag in file\n    --  sem-prag.adb, and they are documented in the GNAT reference manual.\n \n-   --  The entries marked Ada 05 are Ada 2005 pragmas. They are implemented\n-   --  in Ada 83 and Ada 95 mode as well, where they are technically considered\n-   --  to be implementation dependent pragmas.\n+   --  The entries marked Ada 05 are Ada 2005 pragmas. They are implemented in\n+   --  Ada 83 and Ada 95 mode as well, where they are technically considered to\n+   --  be implementation dependent pragmas.\n \n-   --  The entries marked Ada 12 are Ada 2012 pragmas. They are implemented\n-   --  in Ada 83, Ada 95, and Ada 2005 mode as well, where they are technically\n+   --  The entries marked Ada 12 are Ada 2012 pragmas. They are implemented in\n+   --  Ada 83, Ada 95, and Ada 2005 mode as well, where they are technically\n    --  considered to be implementation dependent pragmas.\n \n-   --  The entries marked VMS are VMS specific pragmas that are recognized\n-   --  only in OpenVMS versions of GNAT. They are ignored in other versions\n-   --  with an appropriate warning.\n+   --  The entries marked VMS are VMS specific pragmas that are recognized only\n+   --  in OpenVMS versions of GNAT. They are ignored in other versions with an\n+   --  appropriate warning.\n \n    --  The entries marked AAMP are AAMP specific pragmas that are recognized\n    --  only in GNAT for the AAMP. They are ignored in other versions with\n@@ -381,11 +381,11 @@ package Snames is\n    Name_Extensions_Allowed             : constant Name_Id := N + $; -- GNAT\n    Name_External_Name_Casing           : constant Name_Id := N + $; -- GNAT\n \n-   --  Note: Fast_Math is not in this list because its name matches   -- GNAT\n-   --  the name of the corresponding attribute. However, it is\n-   --  included in the definition of the type Pragma_Id, and the\n-   --  functions Get_Pragma_Id, Is_[Configuration_]Pragma_Id, and\n-   --  correctly recognize and process Fast_Math.\n+   --  Note: Fast_Math is not in this list because its name matches the name of\n+   --  the corresponding attribute. However, it is included in the definition\n+   --  of the type Pragma_Id, and the functions Get_Pragma_Id,\n+   --  Is_[Configuration_]Pragma_Id, and correctly recognize and process\n+   --  Fast_Math.\n \n    Name_Favor_Top_Level                : constant Name_Id := N + $; -- GNAT\n    Name_Float_Representation           : constant Name_Id := N + $; -- GNAT\n@@ -432,11 +432,10 @@ package Snames is\n    Name_Abort_Defer                    : constant Name_Id := N + $; -- GNAT\n    Name_All_Calls_Remote               : constant Name_Id := N + $;\n \n-   --  Note: AST_Entry is not in this list because its name matches -- VMS\n-   --  the name of the corresponding attribute. However, it is\n-   --  included in the definition of the type Pragma_Id, and the\n-   --  functions Get_Pragma_Id and Is_Pragma_Id correctly recognize\n-   --  and process Name_AST_Entry.\n+   --  Note: AST_Entry is not in this list because its name matches the name of\n+   --  the corresponding attribute. However, it is included in the definition\n+   --  of the type Pragma_Id, and the functions Get_Pragma_Id and Is_Pragma_Id\n+   --  correctly recognize and process Name_AST_Entry.\n \n    Name_Assert                         : constant Name_Id := N + $; -- Ada 05\n    Name_Asynchronous                   : constant Name_Id := N + $;\n@@ -485,11 +484,10 @@ package Snames is\n    Name_Inline_Generic                 : constant Name_Id := N + $; -- GNAT\n    Name_Inspection_Point               : constant Name_Id := N + $;\n \n-   --  Note: Interface is not in this list because its name         -- GNAT\n-   --  matches an Ada 05 keyword. However it is included in\n-   --  the definition of the type Attribute_Id, and the functions\n-   --  Get_Pragma_Id and Is_Pragma_Id correctly recognize and\n-   --  process Name_Storage_Size.\n+   --  Note: Interface is not in this list because its name matches an Ada 05\n+   --  keyword. However it is included in the definition of the type\n+   --  Attribute_Id, and the functions Get_Pragma_Id and Is_Pragma_Id correctly\n+   --  recognize and process Name_Storage_Size.\n \n    Name_Interface_Name                 : constant Name_Id := N + $; -- GNAT\n    Name_Interrupt_Handler              : constant Name_Id := N + $;\n@@ -524,11 +522,11 @@ package Snames is\n    Name_Preelaborate                   : constant Name_Id := N + $;\n    Name_Preelaborate_05                : constant Name_Id := N + $; -- GNAT\n \n-   --  Note: Priority is not in this list because its name matches\n-   --  the name of the corresponding attribute. However, it is\n-   --  included in the definition of the type Pragma_Id, and the\n-   --  functions Get_Pragma_Id and Is_Pragma_Id correctly recognize\n-   --  and process Priority. Priority is a standard Ada 95 pragma.\n+   --  Note: Priority is not in this list because its name matches the name of\n+   --  the corresponding attribute. However, it is included in the definition\n+   --  of the type Pragma_Id, and the functions Get_Pragma_Id and Is_Pragma_Id\n+   --  correctly recognize and process Priority. Priority is a standard Ada 95\n+   --  pragma.\n \n    Name_Psect_Object                   : constant Name_Id := N + $; -- VMS\n    Name_Pure                           : constant Name_Id := N + $;\n@@ -542,14 +540,13 @@ package Snames is\n    Name_Shared                         : constant Name_Id := N + $; -- Ada 83\n    Name_Shared_Passive                 : constant Name_Id := N + $;\n \n-   --  Note: Storage_Size is not in this list because its name\n-   --  matches the name of the corresponding attribute. However,\n-   --  it is included in the definition of the type Attribute_Id,\n-   --  and the functions Get_Pragma_Id and Is_Pragma_Id correctly\n-   --  recognize and process Name_Storage_Size.\n+   --  Note: Storage_Size is not in this list because its name matches the name\n+   --  of the corresponding attribute. However, it is included in the\n+   --  definition of the type Attribute_Id, and the functions Get_Pragma_Id and\n+   --  Is_Pragma_Id correctly recognize and process Name_Storage_Size.\n \n-   --  Note: Storage_Unit is also omitted from the list because\n-   --  of a clash with an attribute name, and is treated similarly.\n+   --  Note: Storage_Unit is also omitted from the list because of a clash with\n+   --  an attribute name, and is treated similarly.\n \n    Name_Source_Reference               : constant Name_Id := N + $; -- GNAT\n    Name_Static_Elaboration_Desired     : constant Name_Id := N + $; -- GNAT\n@@ -580,8 +577,8 @@ package Snames is\n \n    --  Language convention names for pragma Convention/Export/Import/Interface\n    --  Note that Name_C is not included in this list, since it was already\n-   --  declared earlier in the context of one-character identifier names\n-   --  (where the order is critical to the fast look up process).\n+   --  declared earlier in the context of one-character identifier names (where\n+   --  the order is critical to the fast look up process).\n \n    --  Note: there are no convention names corresponding to the conventions\n    --  Entry and Protected, this is because these conventions cannot be\n@@ -721,10 +718,10 @@ package Snames is\n    --  are attributes that are defined in Ada 83, but not in Ada 95. These\n    --  attributes are implemented in both Ada 83 and Ada 95 modes in GNAT.\n \n-   --  The entries marked GNAT are attributes that are defined by GNAT\n-   --  and implemented in both Ada 83 and Ada 95 modes. Full descriptions\n-   --  of these implementation dependent attributes may be found in the\n-   --  appropriate section in package Sem_Attr in file sem-attr.ads.\n+   --  The entries marked GNAT are attributes that are defined by GNAT and\n+   --  implemented in both Ada 83 and Ada 95 modes. Full descriptions of these\n+   --  implementation dependent attributes may be found in the appropriate\n+   --  section in Sem_Attr.\n \n    --  The entries marked VMS are recognized only in OpenVMS implementations\n    --  of GNAT, and are treated as illegal in all other contexts.\n@@ -900,8 +897,8 @@ package Snames is\n \n    --  Remaining attributes are ones that return entities\n \n-   --  Note that Elab_Subp_Body is not considered to be a valid attribute\n-   --  name unless we are operating in CodePeer mode.\n+   --  Note that Elab_Subp_Body is not considered to be a valid attribute name\n+   --  unless we are operating in CodePeer mode.\n \n    First_Entity_Attribute_Name         : constant Name_Id := N + $;\n    Name_Elab_Body                      : constant Name_Id := N + $; -- GNAT\n@@ -929,9 +926,9 @@ package Snames is\n \n    --  Names of recognized queuing policy identifiers\n \n-   --  Note: policies are identified by the first character of the\n-   --  name (e.g. F for FIFO_Queuing). If new policy names are added,\n-   --  the first character must be distinct.\n+   --  Note: policies are identified by the first character of the name (e.g. F\n+   --  for FIFO_Queuing). If new policy names are added, the first character\n+   --  must be distinct.\n \n    First_Queuing_Policy_Name           : constant Name_Id := N + $;\n    Name_FIFO_Queuing                   : constant Name_Id := N + $;\n@@ -940,9 +937,9 @@ package Snames is\n \n    --  Names of recognized task dispatching policy identifiers\n \n-   --  Note: policies are identified by the first character of the\n-   --  name (e.g. F for FIFO_Within_Priorities). If new policy names\n-   --  are added, the first character must be distinct.\n+   --  Note: policies are identified by the first character of the name (e.g. F\n+   --  for FIFO_Within_Priorities). If new policy names are added, the first\n+   --  character must be distinct.\n \n    First_Task_Dispatching_Policy_Name    : constant Name_Id := N + $;\n    Name_EDF_Across_Priorities            : constant Name_Id := N + $;\n@@ -1088,8 +1085,8 @@ package Snames is\n    Name_Raise_Exception                  : constant Name_Id := N + $;\n \n    --  Additional reserved words and identifiers used in GNAT Project Files\n-   --  Note that Name_External is already previously declared\n-   --  The names with the -- GB annotation are only used in gprbuild\n+   --  Note that Name_External is already previously declared.\n+   --  The names with the -- GB annotation are only used in gprbuild.\n \n    Name_Aggregate                          : constant Name_Id := N + $;\n    Name_Archive_Builder                    : constant Name_Id := N + $;"}, {"sha": "87d7603cfa095ad144c500fb520b966c29519d45", "filename": "gcc/ada/thread.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fthread.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea1d3dcea17dfb21bf403133dcc6acd0cad6c29/gcc%2Fada%2Fthread.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fthread.c?ref=dea1d3dcea17dfb21bf403133dcc6acd0cad6c29", "patch": "@@ -37,6 +37,21 @@\n # include <pthread.h>\n # include <time.h>\n \n+#ifndef _AIXVERSION_530\n+/* We use the same runtime library for AIX 5.2 and 5.3, but pthread_condattr_\n+ * setclock exists only on the latter, so for the former provide a dummy\n+ * implementation (declared below, weak symbol defined in init.c).\n+ *\n+ * Note: this means that under AIX 5.2 we'll be using CLOCK_MONOTONIC\n+ * timestamps from clock_gettime() as arguments to pthread_cond_timedwait,\n+ * which expects a CLOCK_REALTIME value, which is technically wrong, but\n+ * inocuous in practice on that particular platform since both clocks happen\n+ * to use close epochs.\n+ */\n+\n+extern int pthread_condattr_setclock (pthread_condattr_t *attr, clockid_t cl);\n+#endif\n+\n int\n __gnat_pthread_condattr_setup(pthread_condattr_t *attr) {\n /*"}]}