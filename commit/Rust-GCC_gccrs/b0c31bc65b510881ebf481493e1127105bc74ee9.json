{"sha": "b0c31bc65b510881ebf481493e1127105bc74ee9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjBjMzFiYzY1YjUxMDg4MWViZjQ4MTQ5M2UxMTI3MTA1YmM3NGVlOQ==", "commit": {"author": {"name": "Bernd Edlinger", "email": "bernd.edlinger@hotmail.de", "date": "2018-05-28T18:21:23Z"}, "committer": {"name": "Bernd Edlinger", "email": "edlinger@gcc.gnu.org", "date": "2018-05-28T18:21:23Z"}, "message": "splay-tree.h (splay_tree_compare_strings, [...]): Declare new utility functions.\n\ninclude:\n2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n        * splay-tree.h (splay_tree_compare_strings,\n        splay_tree_delete_pointers): Declare new utility functions.\n\nlibiberty:\n2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n        * splay-tree.c (splay_tree_compare_strings,\n        splay_tree_delete_pointers): New utility functions.\n\ngcc:\n2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n        * tree-dump.c (dump_node): Use splay_tree_delete_pointers.\n\nc-family:\n2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n        * c-lex.c (get_fileinfo): Use splay_tree_compare_strings and\n        splay_tree_delete_pointers.\n\ncp:\n2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n        * decl2.c (start_static_storage_duration_function): Use\n        splay_tree_delete_pointers.\n\nFrom-SVN: r260850", "tree": {"sha": "553cd90c83d6b30fbb7cd214d3c6e7b1d423b7f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/553cd90c83d6b30fbb7cd214d3c6e7b1d423b7f8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0c31bc65b510881ebf481493e1127105bc74ee9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0c31bc65b510881ebf481493e1127105bc74ee9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0c31bc65b510881ebf481493e1127105bc74ee9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0c31bc65b510881ebf481493e1127105bc74ee9/comments", "author": {"login": "bernd-edlinger", "id": 17638929, "node_id": "MDQ6VXNlcjE3NjM4OTI5", "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bernd-edlinger", "html_url": "https://github.com/bernd-edlinger", "followers_url": "https://api.github.com/users/bernd-edlinger/followers", "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}", "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions", "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs", "repos_url": "https://api.github.com/users/bernd-edlinger/repos", "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}", "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3b1cffccce40e80eeb5f24893ce4fbd0e242b319", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b1cffccce40e80eeb5f24893ce4fbd0e242b319", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b1cffccce40e80eeb5f24893ce4fbd0e242b319"}], "stats": {"total": 59, "additions": 50, "deletions": 9}, "files": [{"sha": "8791af2982ee485f7c806d244b4f3c35fbbcc99b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -1,3 +1,7 @@\n+2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* tree-dump.c (dump_node): Use splay_tree_delete_pointers.\n+\n 2018-05-28  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/85933"}, {"sha": "40565d68fdc7860f1ebda4628d893ea39a56326f", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -1,3 +1,8 @@\n+2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* c-lex.c (get_fileinfo): Use splay_tree_compare_strings and\n+\tsplay_tree_delete_pointers.\n+\n 2018-05-26  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR bootstrap/85921"}, {"sha": "3cd24ac40dc81e284877e0c0b27a0d06be261626", "filename": "gcc/c-family/c-lex.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fc-family%2Fc-lex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fc-family%2Fc-lex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-lex.c?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -103,11 +103,9 @@ get_fileinfo (const char *name)\n   struct c_fileinfo *fi;\n \n   if (!file_info_tree)\n-    file_info_tree = splay_tree_new ((splay_tree_compare_fn)\n-\t\t\t\t     (void (*) (void)) strcmp,\n+    file_info_tree = splay_tree_new (splay_tree_compare_strings,\n \t\t\t\t     0,\n-\t\t\t\t     (splay_tree_delete_value_fn)\n-\t\t\t\t     (void (*) (void)) free);\n+\t\t\t\t     splay_tree_delete_pointers);\n \n   n = splay_tree_lookup (file_info_tree, (splay_tree_key) name);\n   if (n)"}, {"sha": "a3a443a69b94c8b9a7e9b99a5546703a949aaece", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -1,3 +1,8 @@\n+2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* decl2.c (start_static_storage_duration_function): Use\n+\tsplay_tree_delete_pointers.\n+\n 2018-05-25  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/85815 - reference to member of enclosing template."}, {"sha": "2cef9c750edc72ce657497dc8dcf2e2a8925b5a6", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -3595,8 +3595,7 @@ start_static_storage_duration_function (unsigned count)\n       priority_info_map = splay_tree_new (splay_tree_compare_ints,\n \t\t\t\t\t  /*delete_key_fn=*/0,\n \t\t\t\t\t  /*delete_value_fn=*/\n-\t\t\t\t\t  (splay_tree_delete_value_fn)\n-\t\t\t\t\t  (void (*) (void)) free);\n+\t\t\t\t\t  splay_tree_delete_pointers);\n \n       /* We always need to generate functions for the\n \t DEFAULT_INIT_PRIORITY so enter it now.  That way when we walk"}, {"sha": "fd565d207a8c8f79bfd6b67343b371dc6530070d", "filename": "gcc/tree-dump.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Ftree-dump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/gcc%2Ftree-dump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-dump.c?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -732,8 +732,7 @@ dump_node (const_tree t, dump_flags_t flags, FILE *stream)\n   di.flags = flags;\n   di.node = t;\n   di.nodes = splay_tree_new (splay_tree_compare_pointers, 0,\n-\t\t\t     (splay_tree_delete_value_fn)\n-\t\t\t     (void (*) (void)) free);\n+\t\t\t     splay_tree_delete_pointers);\n \n   /* Queue up the first node.  */\n   queue (&di, t, DUMP_NONE);"}, {"sha": "7b4aaed39c1e931165531aae8fd8bd015dd433b0", "filename": "include/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -1,3 +1,8 @@\n+2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* splay-tree.h (splay_tree_compare_strings,\n+\tsplay_tree_delete_pointers): Declare new utility functions.\n+\n 2018-05-24  Tom Rix  <trix@juniper.net>\n \n \t* dwarf2.def (DW_FORM_strx*, DW_FORM_addrx*): New."}, {"sha": "fc94fb786fb63c1e8690e9940f9381314c93a98b", "filename": "include/splay-tree.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/include%2Fsplay-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/include%2Fsplay-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Fsplay-tree.h?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -147,7 +147,9 @@ extern splay_tree_node splay_tree_max (splay_tree);\n extern splay_tree_node splay_tree_min (splay_tree);\n extern int splay_tree_foreach (splay_tree, splay_tree_foreach_fn, void*);\n extern int splay_tree_compare_ints (splay_tree_key, splay_tree_key);\n-extern int splay_tree_compare_pointers (splay_tree_key,\tsplay_tree_key);\n+extern int splay_tree_compare_pointers (splay_tree_key, splay_tree_key);\n+extern int splay_tree_compare_strings (splay_tree_key, splay_tree_key);\n+extern void splay_tree_delete_pointers (splay_tree_value);\n \n #ifdef __cplusplus\n }"}, {"sha": "19c62699c07aaa14cfb383269d3ba6acd82cf2c2", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -1,3 +1,8 @@\n+2018-05-28  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* splay-tree.c (splay_tree_compare_strings,\n+\tsplay_tree_delete_pointers): New utility functions.\n+\n 2018-05-10  Martin Liska  <mliska@suse.cz>\n \n \tPR bootstrap/64914"}, {"sha": "d3be4aa90b54dc5f4bda4fdb44835e4b44dcd253", "filename": "libiberty/splay-tree.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c31bc65b510881ebf481493e1127105bc74ee9/libiberty%2Fsplay-tree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c31bc65b510881ebf481493e1127105bc74ee9/libiberty%2Fsplay-tree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fsplay-tree.c?ref=b0c31bc65b510881ebf481493e1127105bc74ee9", "patch": "@@ -31,6 +31,9 @@ Boston, MA 02110-1301, USA.  */\n #ifdef HAVE_STDLIB_H\n #include <stdlib.h>\n #endif\n+#ifdef HAVE_STRING_H\n+#include <string.h>\n+#endif\n \n #include <stdio.h>\n \n@@ -590,3 +593,19 @@ splay_tree_compare_pointers (splay_tree_key k1, splay_tree_key k2)\n   else \n     return 0;\n }\n+\n+/* Splay-tree comparison function, treating the keys as strings.  */\n+\n+int\n+splay_tree_compare_strings (splay_tree_key k1, splay_tree_key k2)\n+{\n+  return strcmp ((char *) k1, (char *) k2);\n+}\n+\n+/* Splay-tree delete function, simply using free.  */\n+\n+void\n+splay_tree_delete_pointers (splay_tree_value value)\n+{\n+  free ((void *) value);\n+}"}]}