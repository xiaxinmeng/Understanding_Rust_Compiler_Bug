{"sha": "770a0113e656de4ec60fa0102ee795eed378e480", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcwYTAxMTNlNjU2ZGU0ZWM2MGZhMDEwMmVlNzk1ZWVkMzc4ZTQ4MA==", "commit": {"author": {"name": "Christian Kuehnke", "email": "Christian.Kuehnke@arbi.Informatik.Uni-Oldenburg.DE", "date": "1997-09-05T23:17:19Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-09-05T23:17:19Z"}, "message": "sparc.md: Add ultrasparc scheduling support.\n\n\t* sparc/sparc.md: Add ultrasparc scheduling support.\n\t* sparc/sparc.h (RTX_COSTS): For MULT give v9 a cost of 25 insns.\n\nFrom-SVN: r15126", "tree": {"sha": "ef044a16a46624655b222a61d97e2a0c53d0336b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef044a16a46624655b222a61d97e2a0c53d0336b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/770a0113e656de4ec60fa0102ee795eed378e480", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770a0113e656de4ec60fa0102ee795eed378e480", "html_url": "https://github.com/Rust-GCC/gccrs/commit/770a0113e656de4ec60fa0102ee795eed378e480", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770a0113e656de4ec60fa0102ee795eed378e480/comments", "author": null, "committer": null, "parents": [{"sha": "3fbc0b7094ec81350ce9ddd25005f73ede265828", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fbc0b7094ec81350ce9ddd25005f73ede265828", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fbc0b7094ec81350ce9ddd25005f73ede265828"}], "stats": {"total": 44, "additions": 43, "deletions": 1}, "files": [{"sha": "05016127a3000bd81754810218fdcf8a9b067a7b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770a0113e656de4ec60fa0102ee795eed378e480/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770a0113e656de4ec60fa0102ee795eed378e480/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=770a0113e656de4ec60fa0102ee795eed378e480", "patch": "@@ -1,3 +1,8 @@\n+Fri Sep  5 16:16:44 1997  Christian Kuehnke  <Christian.Kuehnke@arbi.Informatik.Uni-Oldenburg.DE>\n+\n+\t* sparc/sparc.md: Add ultrasparc scheduling support.\n+\t* sparc/sparc.h (RTX_COSTS): For MULT give v9 a cost of 25 insns.\n+\n Fri Sep  5 14:04:59 1997  Philippe De Muyter  <phdm@info.ucl.ac.be>\n \n \t* integrate.c (save_for_inline_copying): Use 0, not NULL_PTR,"}, {"sha": "81b90475eef71140b65d55c7c653271c58688452", "filename": "gcc/config/sparc/sparc.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770a0113e656de4ec60fa0102ee795eed378e480/gcc%2Fconfig%2Fsparc%2Fsparc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770a0113e656de4ec60fa0102ee795eed378e480/gcc%2Fconfig%2Fsparc%2Fsparc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.h?ref=770a0113e656de4ec60fa0102ee795eed378e480", "patch": "@@ -2707,7 +2707,7 @@ extern struct rtx_def *legitimize_pic_address ();\n \n #define RTX_COSTS(X,CODE,OUTER_CODE)\t\t\t\\\n   case MULT:\t\t\t\t\t\t\\\n-    return (TARGET_V8 || TARGET_SPARCLITE || TARGET_V9) \\\n+    return (TARGET_V8 || TARGET_SPARCLITE)              \\\n \t? COSTS_N_INSNS (5) : COSTS_N_INSNS (25);\t\\\n   case DIV:\t\t\t\t\t\t\\\n   case UDIV:\t\t\t\t\t\t\\"}, {"sha": "a30749e17f73bd208ea336dc6db2d8b1c6a47515", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770a0113e656de4ec60fa0102ee795eed378e480/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770a0113e656de4ec60fa0102ee795eed378e480/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=770a0113e656de4ec60fa0102ee795eed378e480", "patch": "@@ -272,6 +272,43 @@\n ;; The multiply unit has a latency of 5.\n (define_function_unit \"tsc701_mul\" 1 0\n   (and (eq_attr \"type\" \"imul\")\t\t(eq_attr \"cpu\" \"tsc701\")) 5 5)\n+\n+;; ----- The UltraSPARC-1 scheduling\n+;; The Ultrasparc can issue 1 - 4 insns per cycle; here we assume\n+;; four insns/cycle, and hence multiply all costs by four.\n+\n+;; Memory delivers its result in three cycles to IU, three cycles to FP\n+(define_function_unit \"memory\" 1 0\n+  (and (eq_attr \"type\" \"load,fpload\")   (eq_attr \"cpu\" \"ultrasparc\")) 12 4)\n+(define_function_unit \"memory\" 1 0\n+  (and (eq_attr \"type\" \"store,fpstore\") (eq_attr \"cpu\" \"ultrasparc\"))  4 4)\n+(define_function_unit \"ieu\" 1 0\n+  (and (eq_attr \"type\" \"ialu\")          (eq_attr \"cpu\" \"ultrasparc\"))  1 2)\n+(define_function_unit \"ieu\" 1 0\n+  (and (eq_attr \"type\" \"shift\")         (eq_attr \"cpu\" \"ultrasparc\"))  1 4)\n+(define_function_unit \"ieu\" 1 0\n+  (and (eq_attr \"type\" \"cmove\")         (eq_attr \"cpu\" \"ultrasparc\"))  8 4)\n+\n+;; Timings; throughput/latency\n+;; ?? FADD     1/3    add/sub, format conv, compar, abs, neg\n+;; ?? FMUL     1/3\n+;; ?? FDIVs    1/12\n+;; ?? FDIVd    1/22\n+;; ?? FSQRTs   1/12\n+;; ?? FSQRTd   1/22\n+\n+(define_function_unit \"fp\" 1 0\n+  (and (eq_attr \"type\" \"fp\")       (eq_attr \"cpu\" \"ultrasparc\")) 12 2)\n+(define_function_unit \"fp\" 1 0\n+  (and (eq_attr \"type\" \"fpcmp\")    (eq_attr \"cpu\" \"ultrasparc\"))  8 2)\n+(define_function_unit \"fp\" 1 0\n+  (and (eq_attr \"type\" \"fpmul\")    (eq_attr \"cpu\" \"ultrasparc\")) 12 2)\n+(define_function_unit \"fp\" 1 0\n+  (and (eq_attr \"type\" \"fpdivs\")   (eq_attr \"cpu\" \"ultrasparc\")) 48 2)\n+(define_function_unit \"fp\" 1 0\n+  (and (eq_attr \"type\" \"fpdivd\")   (eq_attr \"cpu\" \"ultrasparc\")) 88 2)\n+(define_function_unit \"fp\" 1 0\n+  (and (eq_attr \"type\" \"fpsqrt\")   (eq_attr \"cpu\" \"ultrasparc\")) 48 2)\n \f\n ;; Compare instructions.\n ;; This controls RTL generation and register allocation."}]}