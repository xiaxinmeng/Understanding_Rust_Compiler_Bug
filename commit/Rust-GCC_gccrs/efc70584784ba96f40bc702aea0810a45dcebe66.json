{"sha": "efc70584784ba96f40bc702aea0810a45dcebe66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWZjNzA1ODQ3ODRiYTk2ZjQwYmM3MDJhZWEwODEwYTQ1ZGNlYmU2Ng==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-05-30T23:26:02Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-05-30T23:26:02Z"}, "message": "name-finder.h: Include <sys/wait.h>.\n\n\t* include/name-finder.h: Include <sys/wait.h>.\n\t(_Jv_name_finder::pid): Now of type `pid_t'.\n\t(_Jv_name_finder::~_Jv_name_finder): Call waitpid().\n\t* java/lang/Throwable.java (CPlusPlusDemangler.close): Call\n\t`proc.waitFor()'.\n\nFrom-SVN: r34279", "tree": {"sha": "56f97f32a0b88917169d82b14890af216bbc934f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56f97f32a0b88917169d82b14890af216bbc934f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/efc70584784ba96f40bc702aea0810a45dcebe66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efc70584784ba96f40bc702aea0810a45dcebe66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efc70584784ba96f40bc702aea0810a45dcebe66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efc70584784ba96f40bc702aea0810a45dcebe66/comments", "author": null, "committer": null, "parents": [{"sha": "270cea065eab70a21056cd73736094ecccaa431d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/270cea065eab70a21056cd73736094ecccaa431d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/270cea065eab70a21056cd73736094ecccaa431d"}], "stats": {"total": 33, "additions": 26, "deletions": 7}, "files": [{"sha": "1361abe40a0468ceed58a7a7d808de319a2b48df", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=efc70584784ba96f40bc702aea0810a45dcebe66", "patch": "@@ -1,3 +1,11 @@\n+2000-05-30  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* include/name-finder.h: Include <sys/wait.h>.\n+\t(_Jv_name_finder::pid): Now of type `pid_t'.\n+\t(_Jv_name_finder::~_Jv_name_finder): Call waitpid().\n+\t* java/lang/Throwable.java (CPlusPlusDemangler.close): Call\n+\t`proc.waitFor()'.\n+\n 2000-05-24  Warren Levy  <warrenl@cygnus.com>\n \n \t* java/io/ObjectOutputStream.java (writeObject): Use component type"}, {"sha": "2d2ab9f4f6e5c3b80162413c75e4cc669456a303", "filename": "libjava/include/name-finder.h", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2Finclude%2Fname-finder.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2Finclude%2Fname-finder.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fname-finder.h?ref=efc70584784ba96f40bc702aea0810a45dcebe66", "patch": "@@ -17,6 +17,7 @@ details.  */\n #include <jvm.h>\n \n #include <sys/types.h>\n+#include <sys/wait.h>\n \n #include <string.h>\n #include <stdio.h>\n@@ -38,8 +39,12 @@ class _Jv_name_finder\n #if defined (HAVE_PIPE) && defined (HAVE_FORK)\n       close (f_pipe[1]);\n       fclose (b_pipe_fd);\n+\n+      int wstat;\n+      // We don't care about errors here.\n+      waitpid (pid, &wstat, 0);\n #endif\n-    }  \n+    }\n \n /* Given a pointer to a function or method, try to convert it into a\n    name and the appropriate line and source file.  The caller passes\n@@ -60,10 +65,9 @@ class _Jv_name_finder\n private:\n   void toHex (void *p);\n #if defined (HAVE_PIPE) && defined (HAVE_FORK)\n-  int pid;\n+  pid_t pid;\n   int f_pipe[2], b_pipe[2];\n   FILE *b_pipe_fd;\n   int error;\n #endif\n };\n-"}, {"sha": "db57deb69beccfe3814b8f20bbde10de23b7599d", "filename": "libjava/java/lang/Throwable.java", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2Fjava%2Flang%2FThrowable.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2Fjava%2Flang%2FThrowable.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FThrowable.java?ref=efc70584784ba96f40bc702aea0810a45dcebe66", "patch": "@@ -88,6 +88,13 @@ public void close () throws IOException\n \twritten++;\n       }\n     p.flush ();\n+    try\n+      {\n+\tproc.waitFor ();\n+      }\n+    catch (InterruptedException _)\n+      {\n+      }\n   }    \n }\n "}, {"sha": "00857934e3eca35a34b59cf8089480b5cb6b15ca", "filename": "libjava/name-finder.cc", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2Fname-finder.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efc70584784ba96f40bc702aea0810a45dcebe66/libjava%2Fname-finder.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fname-finder.cc?ref=efc70584784ba96f40bc702aea0810a45dcebe66", "patch": "@@ -78,7 +78,7 @@ _Jv_name_finder::_Jv_name_finder (char *executable)\n \n   error |= pipe (f_pipe) < 0;\n   error |= pipe (b_pipe) < 0;\n-      \n+\n   if (error)\n     return;\n \n@@ -92,16 +92,16 @@ _Jv_name_finder::_Jv_name_finder (char *executable)\n       execvp (argv[0], argv);\n       _exit (127);\n     }\n-      \n+\n   close (f_pipe [0]);\n   close (b_pipe [1]);\n-      \n+\n   if (pid < 0)\n     {\n       error |= 1; \n       return;\n     }\n-      \n+\n   b_pipe_fd = fdopen (b_pipe[0], \"r\");\n   error |= !b_pipe_fd;\n #endif"}]}