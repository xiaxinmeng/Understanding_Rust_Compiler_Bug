{"sha": "abfc73778e24d6e8c407150d8071bc7fed755965", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWJmYzczNzc4ZTI0ZDZlOGM0MDcxNTBkODA3MWJjN2ZlZDc1NTk2NQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2012-11-12T11:03:42Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2012-11-12T11:03:42Z"}, "message": "re PR fortran/55272 (ICE on passing coarray argument between files)\n\n2012-11-12  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/55272\n        * module.c (mio_array_spec): Correctly handle coarray\n        scalars.\n\n2012-11-12  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/55272\n        * gfortran.dg/coarray_29_1.f90: New.\n        * gfortran.dg/coarray_29_2.f90: New.\n\nFrom-SVN: r193429", "tree": {"sha": "50823ce1528bd20de093a8a4c7090992a05b0ca1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50823ce1528bd20de093a8a4c7090992a05b0ca1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/abfc73778e24d6e8c407150d8071bc7fed755965", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abfc73778e24d6e8c407150d8071bc7fed755965", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abfc73778e24d6e8c407150d8071bc7fed755965", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abfc73778e24d6e8c407150d8071bc7fed755965/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3b4adfb357d82d4a83852a02febc008249579c8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b4adfb357d82d4a83852a02febc008249579c8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b4adfb357d82d4a83852a02febc008249579c8e"}], "stats": {"total": 48, "additions": 47, "deletions": 1}, "files": [{"sha": "a90b51a1ac3bb01edbcf411121e2e93be1e8c057", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=abfc73778e24d6e8c407150d8071bc7fed755965", "patch": "@@ -1,3 +1,9 @@\n+2012-11-12  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/55272\n+\t* module.c (mio_array_spec): Correctly handle coarray\n+\tscalars.\n+\n 2012-11-07  Tobias Schl\u00fcter  <tobi@gcc.gnu.org>\n \n \tPR fortran/51727"}, {"sha": "89c45b7c04767a867df812cc06d8cdee6dee90a5", "filename": "gcc/fortran/module.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ffortran%2Fmodule.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ffortran%2Fmodule.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmodule.c?ref=abfc73778e24d6e8c407150d8071bc7fed755965", "patch": "@@ -2395,7 +2395,7 @@ mio_array_spec (gfc_array_spec **asp)\n   if (iomode == IO_INPUT && as->corank)\n     as->cotype = (as->type == AS_DEFERRED) ? AS_DEFERRED : AS_EXPLICIT;\n \n-  if (as->rank > 0)\n+  if (as->rank + as->corank > 0)\n     for (i = 0; i < as->rank + as->corank; i++)\n       {\n \tmio_expr (&as->lower[i]);"}, {"sha": "87023e796a393558fec9d3770b580cc9e831e7de", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=abfc73778e24d6e8c407150d8071bc7fed755965", "patch": "@@ -1,3 +1,9 @@\n+2012-11-12  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/55272\n+\t* gfortran.dg/coarray_29_1.f90: New.\n+\t* gfortran.dg/coarray_29_2.f90: New.\n+\n 2012-11-12  Bin Cheng  <bin.cheng@arm.com>\n \n \t* gcc.dg/hoist-register-pressure-3.c: New test."}, {"sha": "2c49b1c646d10178f54168fd78a25c4d17807ea2", "filename": "gcc/testsuite/gfortran.dg/coarray_29_1.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_29_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_29_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_29_1.f90?ref=abfc73778e24d6e8c407150d8071bc7fed755965", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do compile }\n+! { dg-options \"-fcoarray=single\" }\n+\n+! To be used by coarray_29_2.f90\n+! PR fortran/55272\n+\n+module co_sum_module\n+  implicit none\n+contains\n+  subroutine co_sum(scalar)\n+    integer scalar[*]\n+  end subroutine\n+end module\n+\n+! DO NOT CLEAN UP THE MODULE FILE - coarray_29_2.f90 does it.\n+! { dg-final { keep-modules \"\" } }"}, {"sha": "9829626d2760d6d9aaaba8fa9423eb58c58c370d", "filename": "gcc/testsuite/gfortran.dg/coarray_29_2.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_29_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abfc73778e24d6e8c407150d8071bc7fed755965/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_29_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_29_2.f90?ref=abfc73778e24d6e8c407150d8071bc7fed755965", "patch": "@@ -0,0 +1,18 @@\n+! { dg-compile }\n+! { dg-options \"-fcoarray=single\" }\n+\n+! Requires that coarray_29.f90 has been compiled before\n+! and that, thus, co_sum_module is available\n+\n+! PR fortran/55272\n+!\n+! Contributed by Damian Rouson\n+\n+program main\n+  use co_sum_module\n+  implicit none    \n+  integer score[*] \n+  call co_sum(score)\n+end program\n+\n+! { dg-final { cleanup-modules \"co_sum_module\" } }"}]}