{"sha": "77b996cc58685d44753ff78a3e9f19b10c5be767", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdiOTk2Y2M1ODY4NWQ0NDc1M2ZmNzhhM2U5ZjE5YjEwYzViZTc2Nw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2003-01-17T22:51:24Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2003-01-17T22:51:24Z"}, "message": "re PR c++/9342 (another ICE in cp_expr_size at cp/cp-lang.c: 304)\n\n        PR c++/9342\n        * call.c (build_conditional_expr): Always do lvalue-rvalue\n        conversion.\n\nFrom-SVN: r61457", "tree": {"sha": "2feeceef56d712b8613b9f24974f8d0c278bbe3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2feeceef56d712b8613b9f24974f8d0c278bbe3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77b996cc58685d44753ff78a3e9f19b10c5be767", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77b996cc58685d44753ff78a3e9f19b10c5be767", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77b996cc58685d44753ff78a3e9f19b10c5be767", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77b996cc58685d44753ff78a3e9f19b10c5be767/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5dae1114bb636a814b154c3c47ff6ad149bc81de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dae1114bb636a814b154c3c47ff6ad149bc81de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dae1114bb636a814b154c3c47ff6ad149bc81de"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "7a148f5bd2b5497e7b2db7c14163828b253ebfe2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77b996cc58685d44753ff78a3e9f19b10c5be767/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77b996cc58685d44753ff78a3e9f19b10c5be767/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=77b996cc58685d44753ff78a3e9f19b10c5be767", "patch": "@@ -1,3 +1,9 @@\n+2003-01-17  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/9342\n+\t* call.c (build_conditional_expr): Always do lvalue-rvalue\n+\tconversion.\n+\n 2003-01-17  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/9294"}, {"sha": "cb0d351069acebe12a86c7d657b678a352443628", "filename": "gcc/cp/call.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77b996cc58685d44753ff78a3e9f19b10c5be767/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77b996cc58685d44753ff78a3e9f19b10c5be767/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=77b996cc58685d44753ff78a3e9f19b10c5be767", "patch": "@@ -3187,14 +3187,14 @@ build_conditional_expr (tree arg1, tree arg2, tree arg3)\n      We use ocp_convert rather than build_user_type_conversion because the\n      latter returns NULL_TREE on failure, while the former gives an error.  */\n \n-  if (IS_AGGR_TYPE (TREE_TYPE (arg2)) && real_lvalue_p (arg2))\n+  if (IS_AGGR_TYPE (TREE_TYPE (arg2)))\n     arg2 = ocp_convert (TREE_TYPE (arg2), arg2,\n \t\t\tCONV_IMPLICIT|CONV_FORCE_TEMP, LOOKUP_NORMAL);\n   else\n     arg2 = decay_conversion (arg2);\n   arg2_type = TREE_TYPE (arg2);\n \n-  if (IS_AGGR_TYPE (TREE_TYPE (arg3)) && real_lvalue_p (arg3))\n+  if (IS_AGGR_TYPE (TREE_TYPE (arg3)))\n     arg3 = ocp_convert (TREE_TYPE (arg3), arg3,\n \t\t\tCONV_IMPLICIT|CONV_FORCE_TEMP, LOOKUP_NORMAL);\n   else"}, {"sha": "bfff685666a6cfe5f083cf8213910d0d846033ca", "filename": "gcc/testsuite/g++.dg/init/copy4.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77b996cc58685d44753ff78a3e9f19b10c5be767/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fcopy4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77b996cc58685d44753ff78a3e9f19b10c5be767/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fcopy4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fcopy4.C?ref=77b996cc58685d44753ff78a3e9f19b10c5be767", "patch": "@@ -0,0 +1,19 @@\n+// PR c++/9342\n+// We were failing to wrap def().user in a TARGET_EXPR, so copying it\n+// into the reference temp used a bitwise copy.\n+\n+struct QString\n+{\n+    QString( const QString & );\n+    QString &operator=( const QString & );\n+};\n+struct ServerSettings\n+{\n+    QString user;\n+};\n+extern ServerSettings def();\n+extern void arg( const QString& a );\n+void startSession( bool b, QString s )\n+{\n+    arg (b ? def().user : s);\n+}"}]}