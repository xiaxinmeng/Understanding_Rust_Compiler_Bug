{"sha": "07154156593021837537ef9af44b05730b4dd57f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDcxNTQxNTY1OTMwMjE4Mzc1MzdlZjlhZjQ0YjA1NzMwYjRkZDU3Zg==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2003-07-23T19:56:30Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2003-07-23T19:56:30Z"}, "message": "crti.asm (_init, _fini): Increase frame size to 64.\n\n        * config/xtensa/crti.asm (_init, _fini): Increase frame size to 64.\n        * config/xtensa/lib1funcs.asm (__mulsi3, __udivsi3, __divsi3,\n        __umodsi3, __modsi3): Increase frame size to 32.\n\nFrom-SVN: r69719", "tree": {"sha": "78d293d278b9aa4bb4d5b67e0964d98e7d954f75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78d293d278b9aa4bb4d5b67e0964d98e7d954f75"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07154156593021837537ef9af44b05730b4dd57f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07154156593021837537ef9af44b05730b4dd57f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07154156593021837537ef9af44b05730b4dd57f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07154156593021837537ef9af44b05730b4dd57f/comments", "author": null, "committer": null, "parents": [{"sha": "5f5bfdd010d2985e82a7ff91cc8c5b5fc35f5db9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f5bfdd010d2985e82a7ff91cc8c5b5fc35f5db9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f5bfdd010d2985e82a7ff91cc8c5b5fc35f5db9"}], "stats": {"total": 39, "additions": 25, "deletions": 14}, "files": [{"sha": "2439b1da9441aa6f5811e45b3ef2ff73f2fd41bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07154156593021837537ef9af44b05730b4dd57f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07154156593021837537ef9af44b05730b4dd57f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=07154156593021837537ef9af44b05730b4dd57f", "patch": "@@ -1,3 +1,9 @@\n+2003-07-23  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config/xtensa/crti.asm (_init, _fini): Increase frame size to 64.\n+\t* config/xtensa/lib1funcs.asm (__mulsi3, __udivsi3, __divsi3,\n+\t__umodsi3, __modsi3): Increase frame size to 32.\n+\n 2003-07-23  Geoffrey Keating  <geoffk@apple.com>\n \n \t* config/rs6000/host-darwin.c: ANSIfy, update comment for sigaltstack"}, {"sha": "8668b0d2409703c815c4b94a4542bfec0bdf2f47", "filename": "gcc/config/xtensa/crti.asm", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07154156593021837537ef9af44b05730b4dd57f/gcc%2Fconfig%2Fxtensa%2Fcrti.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07154156593021837537ef9af44b05730b4dd57f/gcc%2Fconfig%2Fxtensa%2Fcrti.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fcrti.asm?ref=07154156593021837537ef9af44b05730b4dd57f", "patch": "@@ -34,11 +34,11 @@\n \t.type _init,@function\n \t.align\t4\n _init:\n-\tentry\tsp, 40\n+\tentry\tsp, 64\n \n \t.section .fini\n \t.globl _fini\n \t.type _fini,@function\n \t.align\t4\n _fini:\n-\tentry\tsp, 40\n+\tentry\tsp, 64"}, {"sha": "632d56276da1568cc423a9d166f18ba5dd134d10", "filename": "gcc/config/xtensa/lib1funcs.asm", "status": "modified", "additions": 17, "deletions": 12, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07154156593021837537ef9af44b05730b4dd57f/gcc%2Fconfig%2Fxtensa%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07154156593021837537ef9af44b05730b4dd57f/gcc%2Fconfig%2Fxtensa%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Flib1funcs.asm?ref=07154156593021837537ef9af44b05730b4dd57f", "patch": "@@ -30,8 +30,13 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \n #include \"xtensa-config.h\"\n \n-\t# Define macros for the ABS and ADDX* instructions to handle cases\n-\t# where they are not included in the Xtensa processor configuration.\n+# Note: These functions use a minimum stack frame size of 32.  This is\n+# necessary for Xtensa configurations that only support a fixed register\n+# window size of 8, where even leaf functions (such as these) need to\n+# allocate space for a 4-word \"extra save area\".\n+\n+# Define macros for the ABS and ADDX* instructions to handle cases\n+# where they are not included in the Xtensa processor configuration.\n \n \t.macro\tdo_abs dst, src, tmp\n #if XCHAL_HAVE_ABS\n@@ -75,7 +80,7 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \t.global\t__mulsi3\n \t.type\t__mulsi3,@function\n __mulsi3:\n-\tentry\tsp, 16\n+\tentry\tsp, 32\n \n #if XCHAL_HAVE_MUL16\n \tor\ta4, a2, a3\n@@ -174,11 +179,11 @@ __mulsi3:\n #endif /* L_mulsi3 */\n \n \n-\t# Define a macro for the NSAU (unsigned normalize shift amount)\n-\t# instruction, which computes the number of leading zero bits,\n-\t# to handle cases where it is not included in the Xtensa processor\n-\t# configuration.\n-\t\n+# Define a macro for the NSAU (unsigned normalize shift amount)\n+# instruction, which computes the number of leading zero bits,\n+# to handle cases where it is not included in the Xtensa processor\n+# configuration.\n+\n \t.macro\tdo_nsau cnt, val, tmp, a\n #if XCHAL_HAVE_NSA\n \tnsau\t\\cnt, \\val\n@@ -237,7 +242,7 @@ __nsau_data:\n \t.global\t__udivsi3\n \t.type\t__udivsi3,@function\n __udivsi3:\n-\tentry\tsp, 16\n+\tentry\tsp, 32\n \tbltui\ta3, 2, .Lle_one\t# check if the divisor <= 1\n \n \tmov\ta6, a2\t\t# keep dividend in a6\n@@ -296,7 +301,7 @@ __udivsi3:\n \t.global\t__divsi3\n \t.type\t__divsi3,@function\n __divsi3:\n-\tentry\tsp, 16\n+\tentry\tsp, 32\n \txor\ta7, a2, a3\t# sign = dividend ^ divisor\n \tdo_abs\ta6, a2, a4\t# udividend = abs(dividend)\n \tdo_abs\ta3, a3, a4\t# udivisor = abs(divisor)\n@@ -361,7 +366,7 @@ __divsi3:\n \t.global\t__umodsi3\n \t.type\t__umodsi3,@function\n __umodsi3:\n-\tentry\tsp, 16\n+\tentry\tsp, 32\n \tbltui\ta3, 2, .Lle_one\t# check if the divisor is <= 1\n \n \tdo_nsau\ta5, a2, a6, a7\t# dividend_shift = nsau(dividend)\n@@ -413,7 +418,7 @@ __umodsi3:\n \t.global\t__modsi3\n \t.type\t__modsi3,@function\n __modsi3:\n-\tentry\tsp, 16\n+\tentry\tsp, 32\n \tmov\ta7, a2\t\t# save original (signed) dividend\n \tdo_abs\ta2, a2, a4\t# udividend = abs(dividend)\n \tdo_abs\ta3, a3, a4\t# udivisor = abs(divisor)"}]}