{"sha": "7f22ec2e647946e4fb3988319416580ad8f906ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YyMmVjMmU2NDc5NDZlNGZiMzk4ODMxOTQxNjU4MGFkOGY5MDZjZQ==", "commit": {"author": {"name": "Mumit Khan", "email": "khan@xraylith.wisc.edu", "date": "1999-10-13T07:18:09Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-10-13T07:18:09Z"}, "message": "basename.c (DIR_SEPARATOR): New macro.\n\n        * basename.c (DIR_SEPARATOR): New macro.\n        (DIR_SEPARATOR_2): Likewise.\n        (HAVE_DOS_BASED_FILESYSTEM): Likewise.\n        (IS_DIR_SEPARATOR): Likewise.\n        (main): Handle MSDOS style pathname.\n\nFrom-SVN: r29937", "tree": {"sha": "d82bdc095f3ee358e76597880d215b849bf37621", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d82bdc095f3ee358e76597880d215b849bf37621"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f22ec2e647946e4fb3988319416580ad8f906ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f22ec2e647946e4fb3988319416580ad8f906ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f22ec2e647946e4fb3988319416580ad8f906ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f22ec2e647946e4fb3988319416580ad8f906ce/comments", "author": null, "committer": null, "parents": [{"sha": "df1f639fb174aaf4309b92b865a36d3620b9b274", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df1f639fb174aaf4309b92b865a36d3620b9b274", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df1f639fb174aaf4309b92b865a36d3620b9b274"}], "stats": {"total": 47, "additions": 42, "deletions": 5}, "files": [{"sha": "fcbc104b11ad4eb5a9dc15de450e9d547f33a559", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f22ec2e647946e4fb3988319416580ad8f906ce/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f22ec2e647946e4fb3988319416580ad8f906ce/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=7f22ec2e647946e4fb3988319416580ad8f906ce", "patch": "@@ -1,3 +1,11 @@\n+Wed Oct 13 01:16:47 1999  Mumit Khan  <khan@xraylith.wisc.edu>\n+\n+\t* basename.c (DIR_SEPARATOR): New macro.\n+\t(DIR_SEPARATOR_2): Likewise.\n+\t(HAVE_DOS_BASED_FILESYSTEM): Likewise.\n+\t(IS_DIR_SEPARATOR): Likewise.\n+\t(main): Handle MSDOS style pathname.\n+\n 1999-10-11  Mark Mitchell  <mark@codesourcery.com>\n \n \t* cplus-dem.c (do_type): Handle pointer to member types whose"}, {"sha": "7698f06f8ae4675ab99c4a29866c40c56c39b689", "filename": "libiberty/basename.c", "status": "modified", "additions": 34, "deletions": 5, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f22ec2e647946e4fb3988319416580ad8f906ce/libiberty%2Fbasename.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f22ec2e647946e4fb3988319416580ad8f906ce/libiberty%2Fbasename.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fbasename.c?ref=7f22ec2e647946e4fb3988319416580ad8f906ce", "patch": "@@ -14,24 +14,53 @@ DESCRIPTION\n \tlast component of the pathname (\"ls.c\" in this case).\n \n BUGS\n-\tPresumes a UNIX style path with UNIX style separators.\n+\tPresumes a UNIX or DOS/Windows style path with UNIX or DOS/Windows \n+\tstyle separators.\n */\n \n #include \"ansidecl.h\"\n #include \"libiberty.h\"\n+#include <ctype.h>\n+\n+#ifndef DIR_SEPARATOR\n+#define DIR_SEPARATOR '/'\n+#endif\n+\n+#if defined (_WIN32) || defined (__MSDOS__) || defined (__DJGPP__) || \\\n+  defined (__OS2__)\n+#define HAVE_DOS_BASED_FILE_SYSTEM\n+#ifndef DIR_SEPARATOR_2 \n+#define DIR_SEPARATOR_2 '\\\\'\n+#endif\n+#endif\n+\n+/* Define IS_DIR_SEPARATOR.  */\n+#ifndef DIR_SEPARATOR_2\n+# define IS_DIR_SEPARATOR(ch) ((ch) == DIR_SEPARATOR)\n+#else /* DIR_SEPARATOR_2 */\n+# define IS_DIR_SEPARATOR(ch) \\\n+\t(((ch) == DIR_SEPARATOR) || ((ch) == DIR_SEPARATOR_2))\n+#endif /* DIR_SEPARATOR_2 */\n \n char *\n basename (name)\n      const char *name;\n {\n-  const char *base = name;\n+  const char *base;\n \n-  while (*name)\n+#if defined (HAVE_DOS_BASED_FILE_SYSTEM)\n+  /* Skip over the disk name in MSDOS pathnames. */\n+  if (isalpha (name[0]) && name[1] == ':') \n+    name += 2;\n+#endif\n+\n+  for (base = name; *name; name++)\n     {\n-      if (*name++ == '/')\n+      if (IS_DIR_SEPARATOR (*name))\n \t{\n-\t  base = name;\n+\t  base = name + 1;\n \t}\n     }\n   return (char *) base;\n }\n+"}]}