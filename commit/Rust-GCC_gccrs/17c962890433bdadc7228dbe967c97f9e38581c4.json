{"sha": "17c962890433bdadc7228dbe967c97f9e38581c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTdjOTYyODkwNDMzYmRhZGM3MjI4ZGJlOTY3Yzk3ZjllMzg1ODFjNA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1994-08-19T16:01:48Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1994-08-19T16:01:48Z"}, "message": "Canonicalize ${INPUT} to avoid automounter problems.\n\nFrom-SVN: r7945", "tree": {"sha": "69b42990f9ccf9740687c6424087f927fa91f56c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69b42990f9ccf9740687c6424087f927fa91f56c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17c962890433bdadc7228dbe967c97f9e38581c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17c962890433bdadc7228dbe967c97f9e38581c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17c962890433bdadc7228dbe967c97f9e38581c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17c962890433bdadc7228dbe967c97f9e38581c4/comments", "author": null, "committer": null, "parents": [{"sha": "4d4d7c0e7f1aff2c10d735ff809e2ea9744f171d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d4d7c0e7f1aff2c10d735ff809e2ea9744f171d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d4d7c0e7f1aff2c10d735ff809e2ea9744f171d"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "2e33da5181d8f8b548f2369612d09a0180b96165", "filename": "gcc/fixincludes", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17c962890433bdadc7228dbe967c97f9e38581c4/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17c962890433bdadc7228dbe967c97f9e38581c4/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=17c962890433bdadc7228dbe967c97f9e38581c4", "patch": "@@ -142,16 +142,19 @@ if $LINKS; then\n \tcd $dest\n \t# X gets the dir that the link actually leads to.\n \tx=`${PWDCMD}`\n+\t# Canonicalize ${INPUT} now to minimize the time an\n+\t# automounter has to change the result of ${PWDCMD}.\n+\tcinput=`cd ${INPUT}; ${PWDCMD}`\n \t# If a link points to ., make a similar link to .\n-\tif [ $x = $INPUT ]; then\n+\tif [ $x = ${cinput} ]; then\n \t  echo $file '->' . ': Making link'\n \t  rm -fr ${LIB}/$file > /dev/null 2>&1\n \t  ln -s . ${LIB}/$file > /dev/null 2>&1\n \t# If link leads back into ${INPUT},\n \t# make a similar link here.\n-\telif expr $x : \"${INPUT}/.*\" > /dev/null; then\n+\telif expr $x : \"${cinput}/.*\" > /dev/null; then\n \t  # Y gets the actual target dir name, relative to ${INPUT}.\n-\t  y=`echo $x | sed -n \"s&${INPUT}/&&p\"`\n+\t  y=`echo $x | sed -n \"s&${cinput}/&&p\"`\n \t  # DOTS is the relative path from ${LIB}/$file's dir back to ${LIB}.\n \t  dots=`echo \"$file\" |\n \t    sed -e 's@^./@@' -e 's@/./@/@g' -e 's@[^/][^/]*@..@g' -e 's@..$@@'`"}]}