{"sha": "4ef47bd8e00785f76cdd08aad06c5a7ffe161804", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGVmNDdiZDhlMDA3ODVmNzZjZGQwOGFhZDA2YzVhN2ZmZTE2MTgwNA==", "commit": {"author": {"name": "James E Wilson", "email": "wilson@specifixinc.com", "date": "2004-08-17T21:18:42Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2004-08-17T21:18:42Z"}, "message": "Canonicalize mips conditional move patterns.\n\n* config/mips/mips.c (gen_conditional_move): Use GET_MODE (op0) instead\nof VOIDmode for comparison code mode.\n* config/mips/mips.md: For conditional move patterns, use mode of\nfirst compare operand for comparison mode, instead of VOIDmode.\n\nFrom-SVN: r86145", "tree": {"sha": "15d5f5beb92127acde67c21a2758c860662f6b34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15d5f5beb92127acde67c21a2758c860662f6b34"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4ef47bd8e00785f76cdd08aad06c5a7ffe161804", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ef47bd8e00785f76cdd08aad06c5a7ffe161804", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ef47bd8e00785f76cdd08aad06c5a7ffe161804", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ef47bd8e00785f76cdd08aad06c5a7ffe161804/comments", "author": null, "committer": null, "parents": [{"sha": "1a10290c1cb47d0e1308e35e56087c53344daaae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a10290c1cb47d0e1308e35e56087c53344daaae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a10290c1cb47d0e1308e35e56087c53344daaae"}], "stats": {"total": 82, "additions": 45, "deletions": 37}, "files": [{"sha": "d18d7989475e92e7c16732daeac2be8f3e6dd14d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ef47bd8e00785f76cdd08aad06c5a7ffe161804/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ef47bd8e00785f76cdd08aad06c5a7ffe161804/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4ef47bd8e00785f76cdd08aad06c5a7ffe161804", "patch": "@@ -1,3 +1,10 @@\n+2004-08-17  James E Wilson  <wilson@specifixinc.com>\n+\n+\t* config/mips/mips.c (gen_conditional_move): Use GET_MODE (op0) instead\n+\tof VOIDmode for comparison code mode.\n+\t* config/mips/mips.md: For conditional move patterns, use mode of\n+\tfirst compare operand for comparison mode, instead of VOIDmode.\n+\t\n 2004-08-17  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/15871"}, {"sha": "7865ca8dd359b63eac91efd10de3f5d95d87ae56", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ef47bd8e00785f76cdd08aad06c5a7ffe161804/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ef47bd8e00785f76cdd08aad06c5a7ffe161804/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=4ef47bd8e00785f76cdd08aad06c5a7ffe161804", "patch": "@@ -2578,7 +2578,8 @@ gen_conditional_move (rtx *operands)\n   mips_emit_compare (&code, &op0, &op1, true);\n   emit_insn (gen_rtx_SET (VOIDmode, operands[0],\n \t\t\t  gen_rtx_IF_THEN_ELSE (GET_MODE (operands[0]),\n-\t\t\t\t\t\tgen_rtx_fmt_ee (code, VOIDmode,\n+\t\t\t\t\t\tgen_rtx_fmt_ee (code,\n+\t\t\t\t\t\t\t\tGET_MODE (op0),\n \t\t\t\t\t\t\t\top0, op1),\n \t\t\t\t\t\toperands[2], operands[3])));\n }"}, {"sha": "b9c6f9209975cf35640c5a043d7a6a7f323dcc0b", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 36, "deletions": 36, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ef47bd8e00785f76cdd08aad06c5a7ffe161804/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ef47bd8e00785f76cdd08aad06c5a7ffe161804/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=4ef47bd8e00785f76cdd08aad06c5a7ffe161804", "patch": "@@ -7310,9 +7310,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:SI\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:SI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:SI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:SI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:SI 2 \"reg_or_0_operand\" \"dJ,0\")\n \t (match_operand:SI 3 \"reg_or_0_operand\" \"0,dJ\")))]\n   \"ISA_HAS_CONDMOVE || ISA_HAS_INT_CONDMOVE\"\n@@ -7325,9 +7325,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:SI\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:DI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:DI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:DI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:SI 2 \"reg_or_0_operand\" \"dJ,0\")\n \t (match_operand:SI 3 \"reg_or_0_operand\" \"0,dJ\")))]\n   \"ISA_HAS_CONDMOVE || ISA_HAS_INT_CONDMOVE\"\n@@ -7340,9 +7340,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:SI\n-\t (match_operator 3 \"equality_operator\"\n-\t\t\t [(match_operand:CC 4 \"register_operand\" \"z,z\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:CC 3 \"equality_operator\"\n+\t\t\t    [(match_operand:CC 4 \"register_operand\" \"z,z\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:SI 1 \"reg_or_0_operand\" \"dJ,0\")\n \t (match_operand:SI 2 \"reg_or_0_operand\" \"0,dJ\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT\"\n@@ -7355,9 +7355,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:DI\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:SI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:SI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:SI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:DI 2 \"reg_or_0_operand\" \"dJ,0\")\n \t (match_operand:DI 3 \"reg_or_0_operand\" \"0,dJ\")))]\n   \"(ISA_HAS_CONDMOVE || ISA_HAS_INT_CONDMOVE) && TARGET_64BIT\"\n@@ -7370,9 +7370,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:DI\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:DI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:DI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:DI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:DI 2 \"reg_or_0_operand\" \"dJ,0\")\n \t (match_operand:DI 3 \"reg_or_0_operand\" \"0,dJ\")))]\n   \"(ISA_HAS_CONDMOVE || ISA_HAS_INT_CONDMOVE) && TARGET_64BIT\"\n@@ -7385,9 +7385,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:DI\n-\t (match_operator 3 \"equality_operator\"\n-\t\t\t [(match_operand:CC 4 \"register_operand\" \"z,z\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:CC 3 \"equality_operator\"\n+\t\t\t    [(match_operand:CC 4 \"register_operand\" \"z,z\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:DI 1 \"reg_or_0_operand\" \"dJ,0\")\n \t (match_operand:DI 2 \"reg_or_0_operand\" \"0,dJ\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT && TARGET_64BIT\"\n@@ -7400,9 +7400,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f,f\")\n \t(if_then_else:SF\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:SI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:SI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:SI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:SF 2 \"register_operand\" \"f,0\")\n \t (match_operand:SF 3 \"register_operand\" \"0,f\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT\"\n@@ -7415,9 +7415,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f,f\")\n \t(if_then_else:SF\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:DI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:DI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:DI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:SF 2 \"register_operand\" \"f,0\")\n \t (match_operand:SF 3 \"register_operand\" \"0,f\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT\"\n@@ -7430,9 +7430,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f,f\")\n \t(if_then_else:SF\n-\t (match_operator 3 \"equality_operator\"\n-\t\t\t [(match_operand:CC 4 \"register_operand\" \"z,z\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:CC 3 \"equality_operator\"\n+\t\t\t    [(match_operand:CC 4 \"register_operand\" \"z,z\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:SF 1 \"register_operand\" \"f,0\")\n \t (match_operand:SF 2 \"register_operand\" \"0,f\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT\"\n@@ -7445,9 +7445,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f,f\")\n \t(if_then_else:DF\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:SI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:SI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:SI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:DF 2 \"register_operand\" \"f,0\")\n \t (match_operand:DF 3 \"register_operand\" \"0,f\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT && TARGET_DOUBLE_FLOAT\"\n@@ -7460,9 +7460,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f,f\")\n \t(if_then_else:DF\n-\t (match_operator 4 \"equality_operator\"\n-\t\t\t [(match_operand:DI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:DI 4 \"equality_operator\"\n+\t\t\t    [(match_operand:DI 1 \"register_operand\" \"d,d\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:DF 2 \"register_operand\" \"f,0\")\n \t (match_operand:DF 3 \"register_operand\" \"0,f\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT && TARGET_DOUBLE_FLOAT\"\n@@ -7475,9 +7475,9 @@ dsrl\\t%3,%3,1\\n\\\n (define_insn \"\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f,f\")\n \t(if_then_else:DF\n-\t (match_operator 3 \"equality_operator\"\n-\t\t\t [(match_operand:CC 4 \"register_operand\" \"z,z\")\n-\t\t\t  (const_int 0)])\n+\t (match_operator:CC 3 \"equality_operator\"\n+\t\t\t    [(match_operand:CC 4 \"register_operand\" \"z,z\")\n+\t\t\t     (const_int 0)])\n \t (match_operand:DF 1 \"register_operand\" \"f,0\")\n \t (match_operand:DF 2 \"register_operand\" \"0,f\")))]\n   \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT && TARGET_DOUBLE_FLOAT\""}]}