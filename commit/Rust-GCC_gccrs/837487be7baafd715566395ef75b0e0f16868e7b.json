{"sha": "837487be7baafd715566395ef75b0e0f16868e7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM3NDg3YmU3YmFhZmQ3MTU1NjYzOTVlZjc1YjBlMGYxNjg2OGU3Yg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2012-02-14T08:39:55Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-02-14T08:39:55Z"}, "message": "re PR lto/52178 (Ada bootstrap failure in LTO mode)\n\n2012-02-14  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/52178\n\t* tree-streamer-in.c (lto_input_ts_field_decl_tree_pointers):\n\tDo not stream DECL_QUALIFIER.\n\t* tree-streamer-out.c (write_ts_field_decl_tree_pointers): Likewise.\n\t* tree.c (free_lang_data_in_decl): Free DECL_QUALIFIER.\n\t(find_decls_types_r): Do not walk DECL_QUALIFIER.\n\nFrom-SVN: r184200", "tree": {"sha": "69a9dfb528a98335e61c6964d9ba59459ba565e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69a9dfb528a98335e61c6964d9ba59459ba565e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/837487be7baafd715566395ef75b0e0f16868e7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/837487be7baafd715566395ef75b0e0f16868e7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/837487be7baafd715566395ef75b0e0f16868e7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/837487be7baafd715566395ef75b0e0f16868e7b/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f0ebe02d7fb107fa61c9f04b2dad2c63886b8c3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0ebe02d7fb107fa61c9f04b2dad2c63886b8c3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0ebe02d7fb107fa61c9f04b2dad2c63886b8c3d"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "0fc9120318b1efc16e9bee3ef17c6c26e48ac68e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=837487be7baafd715566395ef75b0e0f16868e7b", "patch": "@@ -1,3 +1,12 @@\n+2012-02-14  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/52178\n+\t* tree-streamer-in.c (lto_input_ts_field_decl_tree_pointers):\n+\tDo not stream DECL_QUALIFIER.\n+\t* tree-streamer-out.c (write_ts_field_decl_tree_pointers): Likewise.\n+\t* tree.c (free_lang_data_in_decl): Free DECL_QUALIFIER.\n+\t(find_decls_types_r): Do not walk DECL_QUALIFIER.\n+\n 2012-02-14  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/52181"}, {"sha": "cc6fae7d83257f0d851b314a2650a2f54ac5fec4", "filename": "gcc/tree-streamer-in.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2Ftree-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2Ftree-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer-in.c?ref=837487be7baafd715566395ef75b0e0f16868e7b", "patch": "@@ -640,7 +640,7 @@ lto_input_ts_field_decl_tree_pointers (struct lto_input_block *ib,\n {\n   DECL_FIELD_OFFSET (expr) = stream_read_tree (ib, data_in);\n   DECL_BIT_FIELD_TYPE (expr) = stream_read_tree (ib, data_in);\n-  DECL_QUALIFIER (expr) = stream_read_tree (ib, data_in);\n+  /* Do not stream DECL_QUALIFIER, it is useless after gimplification.  */\n   DECL_FIELD_BIT_OFFSET (expr) = stream_read_tree (ib, data_in);\n   DECL_FCONTEXT (expr) = stream_read_tree (ib, data_in);\n }"}, {"sha": "21689dfe5f2ffb4c4d63d25dc40168f53dbcb0ac", "filename": "gcc/tree-streamer-out.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2Ftree-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2Ftree-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer-out.c?ref=837487be7baafd715566395ef75b0e0f16868e7b", "patch": "@@ -552,7 +552,7 @@ write_ts_field_decl_tree_pointers (struct output_block *ob, tree expr,\n {\n   stream_write_tree (ob, DECL_FIELD_OFFSET (expr), ref_p);\n   stream_write_tree (ob, DECL_BIT_FIELD_TYPE (expr), ref_p);\n-  stream_write_tree (ob, DECL_QUALIFIER (expr), ref_p);\n+  /* Do not stream DECL_QUALIFIER, it is useless after gimplification.  */\n   stream_write_tree (ob, DECL_FIELD_BIT_OFFSET (expr), ref_p);\n   stream_write_tree (ob, DECL_FCONTEXT (expr), ref_p);\n }"}, {"sha": "fa01583a51855eecef96c4887a7c30c1b4faca5b", "filename": "gcc/tree.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/837487be7baafd715566395ef75b0e0f16868e7b/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=837487be7baafd715566395ef75b0e0f16868e7b", "patch": "@@ -4596,7 +4596,10 @@ free_lang_data_in_decl (tree decl)\n   free_lang_data_in_one_sizepos (&DECL_SIZE (decl));\n   free_lang_data_in_one_sizepos (&DECL_SIZE_UNIT (decl));\n   if (TREE_CODE (decl) == FIELD_DECL)\n-    free_lang_data_in_one_sizepos (&DECL_FIELD_OFFSET (decl));\n+    {\n+      free_lang_data_in_one_sizepos (&DECL_FIELD_OFFSET (decl));\n+      DECL_QUALIFIER (decl) = NULL_TREE;\n+    }\n \n  if (TREE_CODE (decl) == FUNCTION_DECL)\n     {\n@@ -4800,7 +4803,6 @@ find_decls_types_r (tree *tp, int *ws, void *data)\n \t{\n \t  fld_worklist_push (DECL_FIELD_OFFSET (t), fld);\n \t  fld_worklist_push (DECL_BIT_FIELD_TYPE (t), fld);\n-\t  fld_worklist_push (DECL_QUALIFIER (t), fld);\n \t  fld_worklist_push (DECL_FIELD_BIT_OFFSET (t), fld);\n \t  fld_worklist_push (DECL_FCONTEXT (t), fld);\n \t}"}]}