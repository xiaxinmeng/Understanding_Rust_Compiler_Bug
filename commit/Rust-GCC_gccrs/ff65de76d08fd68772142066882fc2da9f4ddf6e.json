{"sha": "ff65de76d08fd68772142066882fc2da9f4ddf6e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY2NWRlNzZkMDhmZDY4NzcyMTQyMDY2ODgyZmMyZGE5ZjRkZGY2ZQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2004-05-25T22:39:02Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-05-25T22:39:02Z"}, "message": "re PR libobjc/11572 (GNU libobjc no longer compiled on Darwin)\n\n2004-05-25  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR target/11572\n        * configure.ac (includedir): Set to \"include\"\n        except for Darwin.\n        (libext) Set to empty except for Darwin.\n        * configure: Regenerate\n        * Makefile.in: s/libobjc.la/libobjc$(libext).la/g.\n        s/include/$(includedir)/g.\n\nFrom-SVN: r82266", "tree": {"sha": "29a38a973d5f1e4547d68cae822a81e5100ac5e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29a38a973d5f1e4547d68cae822a81e5100ac5e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff65de76d08fd68772142066882fc2da9f4ddf6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff65de76d08fd68772142066882fc2da9f4ddf6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff65de76d08fd68772142066882fc2da9f4ddf6e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff65de76d08fd68772142066882fc2da9f4ddf6e/comments", "author": null, "committer": null, "parents": [{"sha": "b31ad637454889b80006372a4074cd0c2077f884", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b31ad637454889b80006372a4074cd0c2077f884", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b31ad637454889b80006372a4074cd0c2077f884"}], "stats": {"total": 62, "additions": 52, "deletions": 10}, "files": [{"sha": "5bc56502bce984f73b29fae4f875e60a3337aa5d", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=ff65de76d08fd68772142066882fc2da9f4ddf6e", "patch": "@@ -1,3 +1,13 @@\n+2004-05-25  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR target/11572\n+\t* configure.ac (includedir): Set to \"include\"\n+\texcept for Darwin.\n+\t(libext) Set to empty except for Darwin.\n+\t* configure: Regenerate\n+\t* Makefile.in: s/libobjc.la/libobjc$(libext).la/g.\n+\ts/include/$(includedir)/g.\n+\n 2004-05-25  Daniel Jacobowitz  <drow@false.org>\n \n \t* Makefile.in: Add .NOEXPORT."}, {"sha": "5658baa7a216c56ffe128ea8b2d2ad1ebf5592d1", "filename": "libobjc/Makefile.in", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FMakefile.in?ref=ff65de76d08fd68772142066882fc2da9f4ddf6e", "patch": "@@ -40,6 +40,9 @@ toolexecdir = @toolexecdir@\n # Toolexecdir is used only by toolexeclibdir\n toolexeclibdir = @toolexeclibdir@\n \n+includedir = @includedir@\n+libext = @libext@\n+\n top_builddir = .\n \n libdir = $(exec_prefix)/lib\n@@ -128,7 +131,7 @@ FLAGS_TO_PASS = \\\n \t\"libsubdir=$(libsubdir)\" \\\n \t\"tooldir=$(tooldir)\"\n \n-all: libobjc.la $(OBJC_BOEHM_GC)\n+all: libobjc$(libext).la $(OBJC_BOEHM_GC)\n \t: $(MAKE) ; exec $(MULTIDO) $(FLAGS_TO_PASS) multi-do DO=all\n \n # User-visible header files.\n@@ -252,12 +255,12 @@ $(OBJC_THREAD_FILE)_gc.lo: $(OBJC_THREAD_FILE).c\n \n doc: info dvi html\n \n-libobjc.la: $(OBJS)\n+libobjc$(libext).la: $(OBJS)\n \t$(LIBTOOL_LINK) $(CC) -o $@ $(OBJS) \\\n \t\t-rpath $(toolexeclibdir) \\\n \t\t-version-info $(LIBOBJC_VERSION)\n \n-libobjc_gc.la: $(OBJS_GC)\n+libobjc_gc$(libext).la: $(OBJS_GC)\n \t$(LIBTOOL_LINK) $(CC) -o $@ $(OBJS_GC) \\\n \t\t-rpath $(toolexeclibdir) \\\n \t\t-version-info $(LIBOBJC_GC_VERSION)\n@@ -311,26 +314,26 @@ install: install-libs install-headers\n \n install-libs: installdirs\n \t$(SHELL) $(toplevel_srcdir)/mkinstalldirs $(DESTDIR)$(toolexeclibdir)\n-\t$(LIBTOOL_INSTALL) $(INSTALL) libobjc.la $(DESTDIR)$(toolexeclibdir);\n+\t$(LIBTOOL_INSTALL) $(INSTALL) libobjc$(libext).la $(DESTDIR)$(toolexeclibdir);\n \tif [ \"$(OBJC_BOEHM_GC)\" ]; then \\\n-\t  $(LIBTOOL_INSTALL) $(INSTALL) libobjc_gc.la \\\n+\t  $(LIBTOOL_INSTALL) $(INSTALL) libobjc_gc$(libext).la \\\n \t\t\t\t$(DESTDIR)$(toolexeclibdir);\\\n \tfi\n \t$(MULTIDO) $(FLAGS_TO_PASS) multi-do DO=\"$@\"\n \t@-$(LIBTOOL) --mode=finish $(DESTDIR)$(toolexeclibdir)\n \n # Copy Objective C headers to installation include directory.\n install-headers:\n-\t$(SHELL) $(toplevel_srcdir)/mkinstalldirs $(DESTDIR)$(libsubdir)/include/objc\n+\t$(SHELL) $(toplevel_srcdir)/mkinstalldirs $(DESTDIR)$(libsubdir)/$(includedir)/objc\n \tfor file in $(OBJC_H); do \\\n \t  realfile=$(srcdir)/objc/$${file}; \\\n-\t  $(INSTALL_DATA) $${realfile} $(DESTDIR)$(libsubdir)/include/objc; \\\n+\t  $(INSTALL_DATA) $${realfile} $(DESTDIR)$(libsubdir)/$(includedir)/objc; \\\n \tdone\n \n check uninstall install-strip dist installcheck installdirs:\n \n mostlyclean:\n-\t-$(LIBTOOL_CLEAN) rm -f libobjc.la libobjc_gc.la *.lo\n+\t-$(LIBTOOL_CLEAN) rm -f libobjc$(libext).la libobjc_gc$(libext).la *.lo\n \t-rm -f runtime-info.h tmp-runtime.s *.o *.lo libobjc* xforward \\\n \t\tfflags *.aux *.cp *.dvi *.fn *.info *.ky *.log *.pg \\\n \t\t*.toc *.tp *.vr *.html libobj.exp"}, {"sha": "7c83ae385a4458597cec85663d051e7e224187dc", "filename": "libobjc/configure", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure?ref=ff65de76d08fd68772142066882fc2da9f4ddf6e", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS VERSION OBJC_BOEHM_GC toplevel_srcdir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical glibcpp_srcdir gcc_version toolexecdir toolexeclibdir CC ac_ct_CC EXEEXT OBJEXT CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA LN_S STRIP ac_ct_STRIP LIBTOOL SET_MAKE CPP CPPFLAGS EGREP GTHREAD_FLAGS LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS VERSION OBJC_BOEHM_GC toplevel_srcdir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical glibcpp_srcdir gcc_version toolexecdir toolexeclibdir libext CC ac_ct_CC EXEEXT OBJEXT CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA LN_S STRIP ac_ct_STRIP LIBTOOL SET_MAKE CPP CPPFLAGS EGREP GTHREAD_FLAGS LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n \n # Initialize some variables set by options.\n@@ -1570,6 +1570,20 @@ esac\n \n \n \n+# Figure out if we want to name the include directory and the\n+#  library name changes differently.\n+includedir=include\n+libext=\n+case \"${host}\" in\n+  *-darwin*)\n+    # Darwin is the only target so far that needs a different include directory.\n+    includedir=gnu-runtime;\n+    libext=-gnu\n+    ;;\n+esac\n+\n+\n+\n # --------\n # Programs\n # --------\n@@ -3613,7 +3627,7 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 3616 \"configure\"' > conftest.$ac_ext\n+  echo '#line 3630 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -5613,6 +5627,7 @@ s,@glibcpp_srcdir@,$glibcpp_srcdir,;t t\n s,@gcc_version@,$gcc_version,;t t\n s,@toolexecdir@,$toolexecdir,;t t\n s,@toolexeclibdir@,$toolexeclibdir,;t t\n+s,@libext@,$libext,;t t\n s,@CC@,$CC,;t t\n s,@ac_ct_CC@,$ac_ct_CC,;t t\n s,@EXEEXT@,$EXEEXT,;t t"}, {"sha": "4f6ec14378d468c7c474b29664617a419ae30bb8", "filename": "libobjc/configure.ac", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff65de76d08fd68772142066882fc2da9f4ddf6e/libobjc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure.ac?ref=ff65de76d08fd68772142066882fc2da9f4ddf6e", "patch": "@@ -154,6 +154,20 @@ esac\n AC_SUBST(toolexecdir)\n AC_SUBST(toolexeclibdir)\n \n+# Figure out if we want to name the include directory and the\n+#  library name changes differently.\n+includedir=include\n+libext=\n+case \"${host}\" in\n+  *-darwin*)\n+    # Darwin is the only target so far that needs a different include directory.\n+    includedir=gnu-runtime;\n+    libext=-gnu\n+    ;;\n+esac\n+AC_SUBST(includedir)\n+AC_SUBST(libext)\n+\n # --------\n # Programs\n # --------"}]}