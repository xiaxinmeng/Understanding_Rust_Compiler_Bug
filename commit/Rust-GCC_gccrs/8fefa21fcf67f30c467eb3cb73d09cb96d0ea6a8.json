{"sha": "8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGZlZmEyMWZjZjY3ZjMwYzQ2N2ViM2NiNzNkMDljYjk2ZDBlYTZhOA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-03-20T09:52:02Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-03-20T09:52:45Z"}, "message": "tree-optimization/94266 - fix object type extraction heuristics\n\nThis fixes the heuristic deriving an actual object type from a\nMEM_REFs pointer operand to use the more sensible type of an\nactual object instead of the pointed to type.\n\n2020-03-20  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/94266\n\t* gimple-ssa-sprintf.c (get_origin_and_offset): Use the\n\ttype of the underlying object to adjust for the containing\n\tfield if available.", "tree": {"sha": "eb4a94c9ed28f177d9c7b73b1a1ebbfe22de7dc6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb4a94c9ed28f177d9c7b73b1a1ebbfe22de7dc6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "719c864225e28c33a0737a331a772781ce8e6591", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/719c864225e28c33a0737a331a772781ce8e6591", "html_url": "https://github.com/Rust-GCC/gccrs/commit/719c864225e28c33a0737a331a772781ce8e6591"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "563be357329091b4422834d0a28fcdd9188e5a71", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8", "patch": "@@ -1,3 +1,10 @@\n+2020-03-20  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/94266\n+\t* gimple-ssa-sprintf.c (get_origin_and_offset): Use the\n+\ttype of the underlying object to adjust for the containing\n+\tfield if available.\n+\n 2020-03-20  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n \n \t* config/arm/unspecs.md (UNSPEC_GET_FPSCR): Rename this to ..."}, {"sha": "1879686ce0a77eaa167ae4fc8d24b7eacbcb8c15", "filename": "gcc/gimple-ssa-sprintf.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8/gcc%2Fgimple-ssa-sprintf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8/gcc%2Fgimple-ssa-sprintf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-sprintf.c?ref=8fefa21fcf67f30c467eb3cb73d09cb96d0ea6a8", "patch": "@@ -2331,7 +2331,9 @@ get_origin_and_offset (tree x, HOST_WIDE_INT *fldoff, HOST_WIDE_INT *off)\n \n       if (off)\n \t{\n-\t  tree xtype = TREE_TYPE (TREE_TYPE (x));\n+\t  tree xtype\n+\t    = (TREE_CODE (x) == ADDR_EXPR\n+\t       ? TREE_TYPE (TREE_OPERAND (x, 0)) : TREE_TYPE (TREE_TYPE (x)));\n \n \t  /* The byte offset of the most basic struct member the byte\n \t     offset *OFF corresponds to, or for a (multidimensional)"}]}