{"sha": "cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32", "node_id": "C_kwDOANBUbNoAKGNiMzYzZmQ5ZjE5ZWI3OTFlMWVlMWViMGQ1YzYxZjVmZGYyMWFmMzI", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-12-12T11:22:45Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-12-12T14:00:09Z"}, "message": "libstdc++: Change names that clash with Win32 or Clang\n\nClang now defines an __is_unsigned built-in, and Windows defines an\n_Out_ macro. Replace uses of those as identifiers.\n\nThere might also be a problem with __is_signed, which we use in several\nplaces.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/std/chrono (hh_mm_ss): Rename __is_unsigned member to\n\t_S_is_unsigned.\n\t* include/std/format (basic_format_context): Rename _Out_\n\ttemplate parameter to _Out2.\n\t* testsuite/17_intro/names.cc: Add Windows SAL annotation\n\tmacros.", "tree": {"sha": "0230783396b11e025cd0e4dccd63e1b0b8f88922", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0230783396b11e025cd0e4dccd63e1b0b8f88922"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "320ac807da125e6dc952b3d4abf02daeead88d44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/320ac807da125e6dc952b3d4abf02daeead88d44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/320ac807da125e6dc952b3d4abf02daeead88d44"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "4c5fbfaeb83bc4d8db9c811e64f33042d095d4d1", "filename": "libstdc++-v3/include/std/chrono", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fchrono", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fchrono", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fchrono?ref=cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32", "patch": "@@ -2344,7 +2344,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \tconstexpr bool\n \tis_negative() const noexcept\n \t{\n-\t  if constexpr (!__is_unsigned)\n+\t  if constexpr (!_S_is_unsigned)\n \t    return _M_is_neg;\n \t  else\n \t    return false;\n@@ -2373,7 +2373,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \tconstexpr precision\n \tto_duration() const noexcept\n \t{\n-\t  if constexpr (!__is_unsigned)\n+\t  if constexpr (!_S_is_unsigned)\n \t    if (_M_is_neg)\n \t      return -(_M_h + _M_m + _M_s + subseconds());\n \t  return _M_h + _M_m + _M_s + subseconds();\n@@ -2382,7 +2382,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t// TODO: Implement operator<<.\n \n       private:\n-\tstatic constexpr bool __is_unsigned\n+\tstatic constexpr bool _S_is_unsigned\n \t  = __and_v<is_integral<typename _Duration::rep>,\n \t\t    is_unsigned<typename _Duration::rep>>;\n "}, {"sha": "269f8f6cc6a4c22adee339210227f7e2bca99474", "filename": "libstdc++-v3/include/std/format", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fformat", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fformat", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fformat?ref=cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32", "patch": "@@ -3345,10 +3345,10 @@ namespace __format\n       : _M_args(__args), _M_out(std::move(__out)), _M_loc(__loc)\n       { }\n \n-      template<typename _Out_, typename _CharT_, typename _Context_>\n-\tfriend _Out_\n-\t__format::__do_vformat_to(_Out_, basic_string_view<_CharT_>,\n-\t\t\t\t  const basic_format_args<_Context_>&,\n+      template<typename _Out2, typename _CharT2, typename _Context2>\n+\tfriend _Out2\n+\t__format::__do_vformat_to(_Out2, basic_string_view<_CharT2>,\n+\t\t\t\t  const basic_format_args<_Context2>&,\n \t\t\t\t  const locale*);\n \n     public:"}, {"sha": "16c104a438dbd13d456d2dbde5dddfec08acce4d", "filename": "libstdc++-v3/testsuite/17_intro/names.cc", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32/libstdc%2B%2B-v3%2Ftestsuite%2F17_intro%2Fnames.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32/libstdc%2B%2B-v3%2Ftestsuite%2F17_intro%2Fnames.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F17_intro%2Fnames.cc?ref=cb363fd9f19eb791e1ee1eb0d5c61f5fdf21af32", "patch": "@@ -205,6 +205,17 @@\n #define ValueT\t\t\tValueT is not a reserved name\n #define ValueType\t\tValueType is not a reserved name\n \n+#ifndef _WIN32\n+// Windows SAL annotations\n+#define _In_\t\t\tcannot be used as an identifier\n+#define _Inout_\t\t\tcannot be used as an identifier\n+#define _Out_\t\t\tcannot be used as an identifier\n+#define _Reserved_\t\tcannot be used as an identifier\n+#define __inout\t\t\tcannot be used as an identifier\n+#define __in_opt\t\tcannot be used as an identifier\n+#define __out_opt\t\tcannot be used as an identifier\n+#endif\n+\n #ifdef _AIX\n // See https://gcc.gnu.org/ml/libstdc++/2017-03/msg00015.html\n #undef f"}]}