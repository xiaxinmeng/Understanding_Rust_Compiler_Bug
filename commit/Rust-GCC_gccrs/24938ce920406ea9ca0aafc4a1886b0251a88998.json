{"sha": "24938ce920406ea9ca0aafc4a1886b0251a88998", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ5MzhjZTkyMDQwNmVhOWNhMGFhZmM0YTE4ODZiMDI1MWE4ODk5OA==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "ook@ucw.cz", "date": "2007-08-22T23:05:05Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2007-08-22T23:05:05Z"}, "message": "re PR tree-optimization/32949 (suboptimal address generation for int indices on 64-bit targets)\n\n2007-08-22  Zdenek Dvorak  <ook@ucw.cz>\n\n\tPR tree-optimization/32949\n\t* tree-ssa-loop-niter.c (scev_probably_wraps_p): Test nowrap_type_p\n\tbefore failing for ivs with non-constant step.\n\nFrom-SVN: r127720", "tree": {"sha": "365bdf9d6b8498fde007508ac75cee89226d9071", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/365bdf9d6b8498fde007508ac75cee89226d9071"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/24938ce920406ea9ca0aafc4a1886b0251a88998", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24938ce920406ea9ca0aafc4a1886b0251a88998", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24938ce920406ea9ca0aafc4a1886b0251a88998", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24938ce920406ea9ca0aafc4a1886b0251a88998/comments", "author": {"login": "rakdver", "id": 20416833, "node_id": "MDQ6VXNlcjIwNDE2ODMz", "avatar_url": "https://avatars.githubusercontent.com/u/20416833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rakdver", "html_url": "https://github.com/rakdver", "followers_url": "https://api.github.com/users/rakdver/followers", "following_url": "https://api.github.com/users/rakdver/following{/other_user}", "gists_url": "https://api.github.com/users/rakdver/gists{/gist_id}", "starred_url": "https://api.github.com/users/rakdver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rakdver/subscriptions", "organizations_url": "https://api.github.com/users/rakdver/orgs", "repos_url": "https://api.github.com/users/rakdver/repos", "events_url": "https://api.github.com/users/rakdver/events{/privacy}", "received_events_url": "https://api.github.com/users/rakdver/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "aa2f6edbf74131aff10dae81dab928b3ddbb307e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa2f6edbf74131aff10dae81dab928b3ddbb307e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa2f6edbf74131aff10dae81dab928b3ddbb307e"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "6594bea4750dcf97c112316841ba0475b005e097", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/24938ce920406ea9ca0aafc4a1886b0251a88998/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/24938ce920406ea9ca0aafc4a1886b0251a88998/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=24938ce920406ea9ca0aafc4a1886b0251a88998", "patch": "@@ -1,3 +1,9 @@\n+2007-08-22  Zdenek Dvorak  <ook@ucw.cz>\n+\n+\tPR tree-optimization/32949\n+\t* tree-ssa-loop-niter.c (scev_probably_wraps_p): Test nowrap_type_p\n+\tbefore failing for ivs with non-constant step.\n+\n 2007-08-22  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* doc/md.texi (Iterators): Renamed from Macros.  All contents"}, {"sha": "40e7051c265bf9d70dc54ac93179dbf15a8a9b27", "filename": "gcc/tree-ssa-loop-niter.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/24938ce920406ea9ca0aafc4a1886b0251a88998/gcc%2Ftree-ssa-loop-niter.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/24938ce920406ea9ca0aafc4a1886b0251a88998/gcc%2Ftree-ssa-loop-niter.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-niter.c?ref=24938ce920406ea9ca0aafc4a1886b0251a88998", "patch": "@@ -2969,8 +2969,7 @@ scev_probably_wraps_p (tree base, tree step,\n      2032, 2040, 0, 8, ..., but the code is still legal.  */\n \n   if (chrec_contains_undetermined (base)\n-      || chrec_contains_undetermined (step)\n-      || TREE_CODE (step) != INTEGER_CST)\n+      || chrec_contains_undetermined (step))\n     return true;\n \n   if (integer_zerop (step))\n@@ -2981,6 +2980,11 @@ scev_probably_wraps_p (tree base, tree step,\n   if (use_overflow_semantics && nowrap_type_p (type))\n     return false;\n \n+  /* To be able to use estimates on number of iterations of the loop,\n+     we must have an upper bound on the absolute value of the step.  */\n+  if (TREE_CODE (step) != INTEGER_CST)\n+    return true;\n+\n   /* Don't issue signed overflow warnings.  */\n   fold_defer_overflow_warnings ();\n "}]}