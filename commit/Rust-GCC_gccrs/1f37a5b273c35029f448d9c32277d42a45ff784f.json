{"sha": "1f37a5b273c35029f448d9c32277d42a45ff784f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWYzN2E1YjI3M2MzNTAyOWY0NDhkOWMzMjI3N2Q0MmE0NWZmNzg0Zg==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2003-01-24T21:51:03Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2003-01-24T21:51:03Z"}, "message": "config.gcc (xtensa-*-elf*): Removed assignments to with_newlib, extra_parts, and fixincludes.\n\n        * config.gcc (xtensa-*-elf*): Removed assignments to with_newlib,\n        extra_parts, and fixincludes.  Add xtensa/t-elf tmake_file.\n        (xtensa-*-linux*): Add xtensa/t-linux tmake_file.\n        * config/xtensa/crti.asm: New file.\n        * config/xtensa/crtn.asm: New file.\n        * config/xtensa/t-elf: New file.\n        * config/xtensa/t-linux: New file.\n        * config/xtensa/t-xtensa: Add rules for crti.o and crtn.o.\n        Move various CFLAGS settings to new t-elf file.\n\nFrom-SVN: r61735", "tree": {"sha": "5aa77ca74f9837ddb36d9663b787a655a0648742", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5aa77ca74f9837ddb36d9663b787a655a0648742"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f37a5b273c35029f448d9c32277d42a45ff784f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f37a5b273c35029f448d9c32277d42a45ff784f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f37a5b273c35029f448d9c32277d42a45ff784f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f37a5b273c35029f448d9c32277d42a45ff784f/comments", "author": null, "committer": null, "parents": [{"sha": "84f5e1b11f08c88e910689f2f530314260347ee3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84f5e1b11f08c88e910689f2f530314260347ee3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84f5e1b11f08c88e910689f2f530314260347ee3"}], "stats": {"total": 121, "additions": 108, "deletions": 13}, "files": [{"sha": "b0c808d1d1f90b1701614df6fd93322424c0fb98", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1f37a5b273c35029f448d9c32277d42a45ff784f", "patch": "@@ -1,3 +1,15 @@\n+2003-01-24  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config.gcc (xtensa-*-elf*): Removed assignments to with_newlib,\n+\textra_parts, and fixincludes.  Add xtensa/t-elf tmake_file.\n+\t(xtensa-*-linux*): Add xtensa/t-linux tmake_file.\n+\t* config/xtensa/crti.asm: New file.\n+\t* config/xtensa/crtn.asm: New file.\n+\t* config/xtensa/t-elf: New file.\n+\t* config/xtensa/t-linux: New file.\n+\t* config/xtensa/t-xtensa: Add rules for crti.o and crtn.o.\n+\tMove various CFLAGS settings to new t-elf file.\n+\n 2003-01-24  Richard Henderson  <rth@redhat.com>\n \n \tPR optimization/4382"}, {"sha": "b287bd32afa7c5b1607f8fb15ae7a3c2949aa1ca", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=1f37a5b273c35029f448d9c32277d42a45ff784f", "patch": "@@ -2666,14 +2666,11 @@ xstormy16-*-elf)\n \t;;\n xtensa-*-elf*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h xtensa/elf.h\"\n-\twith_newlib=yes\n-\ttmake_file=xtensa/t-xtensa\n-\textra_parts=\"crtbegin.o crtend.o\"\n-\tfixincludes=Makefile.in # newlib headers should be OK\n+\ttmake_file=\"xtensa/t-xtensa xtensa/t-elf\"\n \t;;\n xtensa-*-linux*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h linux.h xtensa/linux.h\"\n-\ttmake_file=\"t-linux xtensa/t-xtensa\"\n+\ttmake_file=\"t-linux xtensa/t-xtensa xtensa/t-linux\"\n \t;;\n *)\n \techo \"*** Configuration $machine not supported\" 1>&2"}, {"sha": "8019ed1c3dbaeafb89d1d4a47469ec45cba437bc", "filename": "gcc/config/xtensa/crti.asm", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Fcrti.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Fcrti.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fcrti.asm?ref=1f37a5b273c35029f448d9c32277d42a45ff784f", "patch": "@@ -0,0 +1,44 @@\n+# Start .init and .fini sections.\n+# Copyright (C) 2003 Free Software Foundation, Inc.\n+# \n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+# \n+# In addition to the permissions in the GNU General Public License, the\n+# Free Software Foundation gives you unlimited permission to link the\n+# compiled version of this file into combinations with other programs,\n+# and to distribute those combinations without any restriction coming\n+# from the use of this file.  (The General Public License restrictions\n+# do apply in other respects; for example, they cover modification of\n+# the file, and distribution when not linked into a combine\n+# executable.)\n+# \n+# GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+# WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# for more details.\n+# \n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING.  If not, write to the Free\n+# Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# This file just makes a stack frame for the contents of the .fini and\n+# .init sections.  Users may put any desired instructions in those\n+# sections.\n+\n+\t.section .init\n+\t.globl _init\n+\t.type _init,@function\n+\t.align\t4\n+_init:\n+\tentry\tsp, 40\n+\n+\t.section .fini\n+\t.globl _fini\n+\t.type _fini,@function\n+\t.align\t4\n+_fini:\n+\tentry\tsp, 40"}, {"sha": "b4bdad93fe4cc661208a65d72165fb9b1b7333ba", "filename": "gcc/config/xtensa/crtn.asm", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Fcrtn.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Fcrtn.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fcrtn.asm?ref=1f37a5b273c35029f448d9c32277d42a45ff784f", "patch": "@@ -0,0 +1,36 @@\n+# End of .init and .fini sections.\n+# Copyright (C) 2003 Free Software Foundation, Inc.\n+# \n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+# \n+# In addition to the permissions in the GNU General Public License, the\n+# Free Software Foundation gives you unlimited permission to link the\n+# compiled version of this file into combinations with other programs,\n+# and to distribute those combinations without any restriction coming\n+# from the use of this file.  (The General Public License restrictions\n+# do apply in other respects; for example, they cover modification of\n+# the file, and distribution when not linked into a combine\n+# executable.)\n+# \n+# GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+# WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# for more details.\n+# \n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING.  If not, write to the Free\n+# Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# This file just makes sure that the .fini and .init sections do in\n+# fact return.  Users may put any desired instructions in those sections.\n+# This file is the last thing linked into any executable.\n+\n+\t.section .init\n+\tretw\n+\n+\t.section .fini\n+\tretw"}, {"sha": "7d6cd1a3a9b6eb0d16aa40aae19d0550b5aece3f", "filename": "gcc/config/xtensa/t-elf", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Ft-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Ft-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Ft-elf?ref=1f37a5b273c35029f448d9c32277d42a45ff784f", "patch": "@@ -0,0 +1,6 @@\n+# Build CRT files and libgcc with the \"longcalls\" option\n+CRTSTUFF_T_CFLAGS += -mlongcalls\n+CRTSTUFF_T_CFLAGS_S += -mlongcalls\n+TARGET_LIBGCC2_CFLAGS += -mlongcalls\n+\n+EXTRA_MULTILIB_PARTS = crti.o crtn.o crtbegin.o crtend.o"}, {"sha": "7d39351fa66c5d98a59b739be4a7117aa7cf0f3b", "filename": "gcc/config/xtensa/t-linux", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Ft-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Ft-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Ft-linux?ref=1f37a5b273c35029f448d9c32277d42a45ff784f", "patch": "@@ -0,0 +1 @@\n+EXTRA_MULTILIB_PARTS = crtbegin.o crtend.o crtbeginS.o crtendS.o crtbeginT.o"}, {"sha": "5597650273a20d0dcb64cf59a07f6421100d2eb2", "filename": "gcc/config/xtensa/t-xtensa", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Ft-xtensa", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f37a5b273c35029f448d9c32277d42a45ff784f/gcc%2Fconfig%2Fxtensa%2Ft-xtensa", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Ft-xtensa?ref=1f37a5b273c35029f448d9c32277d42a45ff784f", "patch": "@@ -8,21 +8,20 @@ fp-bit.c: $(srcdir)/config/fp-bit.c\n \techo '#define FLOAT' > fp-bit.c\n \tcat $(srcdir)/config/fp-bit.c >> fp-bit.c\n \n-########################################################################\n-\n # Don't run fixproto\n STMP_FIXPROTO =\n \n-# Build crtbegin and crtend with the \"longcalls\" option\n-CRTSTUFF_T_CFLAGS += -mlongcalls\n-CRTSTUFF_T_CFLAGS_S += -mlongcalls\n-\n LIB1ASMSRC = xtensa/lib1funcs.asm\n LIB1ASMFUNCS = _mulsi3 _nsau _divsi3 _modsi3 _udivsi3 _umodsi3\n \n-TARGET_LIBGCC2_CFLAGS += -mlongcalls\n-\n LIB2FUNCS_EXTRA += $(srcdir)/config/xtensa/lib2funcs.S\n \n+$(T)crti.o: $(srcdir)/config/xtensa/crti.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crti.o \\\n+\t  -x assembler-with-cpp $(srcdir)/config/xtensa/crti.asm\n+$(T)crtn.o: $(srcdir)/config/xtensa/crtn.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crtn.o \\\n+\t  -x assembler-with-cpp $(srcdir)/config/xtensa/crtn.asm\n+\n $(out_object_file): gt-xtensa.h\n gt-xtensa.h : s-gtype ; @true"}]}