{"sha": "4f3397ae26e52899a70424d7bba802b19fc14355", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGYzMzk3YWUyNmU1Mjg5OWE3MDQyNGQ3YmJhODAyYjE5ZmMxNDM1NQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1996-11-03T21:12:07Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1996-11-03T21:12:07Z"}, "message": "Random -fpic fixes\n\nFrom-SVN: r13092", "tree": {"sha": "c2df09de5cb81dfe0e96bc16da722f793b7e5886", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2df09de5cb81dfe0e96bc16da722f793b7e5886"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f3397ae26e52899a70424d7bba802b19fc14355", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f3397ae26e52899a70424d7bba802b19fc14355", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f3397ae26e52899a70424d7bba802b19fc14355", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f3397ae26e52899a70424d7bba802b19fc14355/comments", "author": null, "committer": null, "parents": [{"sha": "810429b72c7c30f77a6b72c3553d06ed62b24026", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/810429b72c7c30f77a6b72c3553d06ed62b24026", "html_url": "https://github.com/Rust-GCC/gccrs/commit/810429b72c7c30f77a6b72c3553d06ed62b24026"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "9ce1d080d352ad020753ce661aaef5dc3a16e753", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f3397ae26e52899a70424d7bba802b19fc14355/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f3397ae26e52899a70424d7bba802b19fc14355/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=4f3397ae26e52899a70424d7bba802b19fc14355", "patch": "@@ -430,12 +430,12 @@ do {\t\t\t\t\t\t\t\t\t\\\n \n /* Put PC relative got entries in .got2 */\n #define MINIMAL_TOC_SECTION_ASM_OP \\\n-  ((TARGET_RELOCATABLE) ? \"\\t.section\\t\\\".got2\\\",\\\"aw\\\"\" : \"\\t.section\\t\\\".got1\\\",\\\"aw\\\"\")\n+  ((TARGET_RELOCATABLE || flag_pic) ? \"\\t.section\\t\\\".got2\\\",\\\"aw\\\"\" : \"\\t.section\\t\\\".got1\\\",\\\"aw\\\"\")\n \n /* Put relocatable data in .data, not .rodata so initialized pointers can be updated */\n #undef\tCONST_SECTION_ASM_OP\n #define CONST_SECTION_ASM_OP \\\n-  ((TARGET_RELOCATABLE) ? \"\\t.section\\t\\\".data\\\"\\t# .rodata\" : \"\\t.section\\t\\\".rodata\\\"\")\n+  ((TARGET_RELOCATABLE || flag_pic) ? \"\\t.section\\t\\\".data\\\"\\t# .rodata\" : \"\\t.section\\t\\\".rodata\\\"\")\n \n \n #define SDATA_SECTION_ASM_OP \"\\t.section \\\".sdata\\\",\\\"aw\\\"\"\n@@ -703,7 +703,7 @@ extern int rs6000_pic_labelno;\n do {\t\t\t\t\t\t\t\t\t\\\n   if (TARGET_SDATA && (SIZE) > 0 && (SIZE) <= g_switch_value)\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n-      sbss_section ();\t\t\t\t\t\t\t\\\n+      sdata_section ();\t\t\t\t\t\t\t\\\n       ASM_OUTPUT_ALIGN (FILE, exact_log2 (ALIGN / BITS_PER_UNIT));\t\\\n       ASM_OUTPUT_LABEL (FILE, NAME);\t\t\t\t\t\\\n       ASM_OUTPUT_SKIP (FILE, SIZE);\t\t\t\t\t\\\n@@ -755,7 +755,7 @@ do {\t\t\t\t\t\t\t\t\t\\\n #define ASM_OUTPUT_INT(FILE,VALUE)\t\t\t\t\t\\\n do {\t\t\t\t\t\t\t\t\t\\\n   static int recurse = 0;\t\t\t\t\t\t\\\n-  if (TARGET_RELOCATABLE\t\t\t\t\t\t\\\n+  if ((TARGET_RELOCATABLE || flag_pic)\t\t\t\t\t\\\n       && in_section != in_toc\t\t\t\t\t\t\\\n       && in_section != in_text\t\t\t\t\t\t\\\n       && in_section != in_ctors\t\t\t\t\t\t\\\n@@ -883,7 +883,7 @@ do {\t\t\t\t\t\t\t\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n   if (DECL && TREE_CODE (DECL) == FUNCTION_DECL)\t\t\t\\\n     type = SECT_EXEC, mode = \"ax\";\t\t\t\t\t\\\n-  else if (DECL && TREE_READONLY (DECL) && !TARGET_RELOCATABLE)\t\t\\\n+  else if (DECL && TREE_READONLY (DECL) && !TARGET_RELOCATABLE && !flag_pic) \\\n     type = SECT_RO, mode = \"a\";\t\t\t\t\t\t\\\n   else\t\t\t\t\t\t\t\t\t\\\n     type = SECT_RW, mode = \"aw\";\t\t\t\t\t\\"}]}