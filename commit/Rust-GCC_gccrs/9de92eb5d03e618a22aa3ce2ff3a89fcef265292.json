{"sha": "9de92eb5d03e618a22aa3ce2ff3a89fcef265292", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRlOTJlYjVkMDNlNjE4YTIyYWEzY2UyZmYzYTg5ZmNlZjI2NTI5Mg==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1998-09-08T09:42:42Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-09-08T09:42:42Z"}, "message": "* rts.h: Update with missing code.\n\nFrom-SVN: r22327", "tree": {"sha": "c9990930f146d6de61201528647d19a1aa982f3b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9990930f146d6de61201528647d19a1aa982f3b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9de92eb5d03e618a22aa3ce2ff3a89fcef265292", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9de92eb5d03e618a22aa3ce2ff3a89fcef265292", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9de92eb5d03e618a22aa3ce2ff3a89fcef265292", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9de92eb5d03e618a22aa3ce2ff3a89fcef265292/comments", "author": null, "committer": null, "parents": [{"sha": "e742fecc310dda4076d9f83d751b62fb9354e4de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e742fecc310dda4076d9f83d751b62fb9354e4de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e742fecc310dda4076d9f83d751b62fb9354e4de"}], "stats": {"total": 103, "additions": 103, "deletions": 0}, "files": [{"sha": "b41b3a4e935613ed143cf0d77ec579b437611569", "filename": "libchill/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9de92eb5d03e618a22aa3ce2ff3a89fcef265292/libchill%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9de92eb5d03e618a22aa3ce2ff3a89fcef265292/libchill%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libchill%2FChangeLog?ref=9de92eb5d03e618a22aa3ce2ff3a89fcef265292", "patch": "@@ -1,3 +1,7 @@\n+Tue Sep  8 10:41:38 1998  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* rts.h: Update with missing code.\n+\n Sun Sep  6 01:30:40 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* allgmem.c: Do not include config.h anymore."}, {"sha": "f4c21fa0b26fc7ac86468d530039bae5628519c8", "filename": "libchill/rts.h", "status": "modified", "additions": 99, "deletions": 0, "changes": 99, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9de92eb5d03e618a22aa3ce2ff3a89fcef265292/libchill%2Frts.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9de92eb5d03e618a22aa3ce2ff3a89fcef265292/libchill%2Frts.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libchill%2Frts.h?ref=9de92eb5d03e618a22aa3ce2ff3a89fcef265292", "patch": "@@ -43,10 +43,109 @@ typedef struct\n   unsigned char /*TaskingEnum*/ type;\n } TaskingStruct;\n \n+/* how an INSTANCE is implemented */\n typedef struct\n {\n   short ptype;\n   short pcopy;\n } INSTANCE;\n \n+/* interface to underlaying os */\n+typedef enum\n+{\n+  wait_wait,\n+  wait_buffer_send,\n+  wait_buffer_receive,\n+  wait_buffer_free,\n+  wait_event_delay,\n+  wait_event_free,\n+} Delay_Reason;\n+\n+extern INSTANCE __whoami ();\n+extern void *__xmalloc_ ();\n+\n+#define THIS  __whoami()\n+/* for easier changing to something different,\n+   i.e. allocate_memory */\n+#define MALLOC(ADDR,SIZE)  ADDR = __xmalloc_(SIZE)\n+#define FREE(ADDR)         free (ADDR)\n+\n+/* definitions for EVENTS */\n+typedef struct EVENTQUEUE\n+{\n+  struct EVENTQUEUE    *forward;       /* next in the list */\n+  struct EVENTQUEUE   **listhead;      /* pointer to EVENT location */\n+  int                   priority;      /* prio for DELAY or DELAY CASE */\n+  INSTANCE              this;          /* specify the instance is delayed */\n+  struct EVENTQUEUE    *startlist;     /* start of the list */\n+  struct EVENTQUEUE    *chain;         /* list of all events in an DELAY CASE */\n+  int                   is_continued;  /* indicates a continue action on that event */\n+  INSTANCE              who_continued; /* indicates who continued */\n+} Event_Queue;\n+\n+typedef struct\n+{\n+  Event_Queue     **ev;\n+  unsigned long     maxqueuelength;\n+} Event_Descr;\n+\n+/* definitions for BUFFERS */\n+struct BUFFERQUEUE;\n+\n+typedef struct BUFFER_WAIT_QUEUE\n+{\n+  struct BUFFER_WAIT_QUEUE   *forward;\n+  struct BUFFERQUEUE        **bufferaddr;\n+  INSTANCE                    this;\n+  struct BUFFER_WAIT_QUEUE   *startlist;\n+  struct BUFFER_WAIT_QUEUE   *chain;\n+  int                         is_sent;\n+  INSTANCE                    who_sent;     /* instance which have\n+\t\t\t\t\t       send a buffer */\n+  unsigned long               datalen;\n+  void                       *dataptr;\n+} Buffer_Wait_Queue;\n+\n+typedef struct BUFFER_SEND_QUEUE\n+{\n+  struct BUFFER_SEND_QUEUE   *forward;\n+  int                         priority;\n+  INSTANCE                    this;\n+  int                         is_delayed;\n+  unsigned long               datalen;\n+  void                       *dataptr;\n+} Buffer_Send_Queue;\n+\n+typedef struct BUFFERQUEUE\n+{\n+  Buffer_Wait_Queue    *waitqueue;\n+  unsigned long         waitqueuelength;\n+  Buffer_Send_Queue    *sendqueue;\n+  unsigned long         sendqueuelength;\n+} Buffer_Queue;\n+\n+typedef struct\n+{\n+  Buffer_Queue    **buf;\n+  unsigned long     maxqueuelength;\n+} Buffer_Descr;\n+\n+/* descriptor for data */\n+typedef struct\n+{\n+  void         *ptr;\n+  int           length;\n+} Data_Descr;\n+\n+/* time format runtime delivers */\n+typedef struct\n+{\n+    unsigned long\tsecs;\n+    unsigned long\tnanosecs;\n+} RtsTime;\n+\n+extern void __rtstime (RtsTime *t);\n+extern int __delay_this (Delay_Reason reason, RtsTime *t, char *file, int lineno);\n+extern void __continue_that (INSTANCE ins, int prio, char *file, int lineno);\n+\n #endif /* __rts_h_ */"}]}