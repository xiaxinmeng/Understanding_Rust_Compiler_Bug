{"sha": "1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWVhMWUxYjUzZmYxYjY4ODQyYjgwYjYxODQ1NjUzYTlhOGZjOTRmYw==", "commit": {"author": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2013-10-28T12:19:16Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2013-10-28T12:19:16Z"}, "message": "jump-around-jump.c: New test.\n\ngcc/testsuite:\n2013-10-28   Claudiu Zissulescu  <claziss@synopsys.com>\n             Joern Rennecke  <joern.rennecke@embecosm.com>\n        * gcc.target/arc/jump-around-jump.c: New test.\ngcc:\n2013-10-28  Joern Rennecke  <joern.rennecke@embecosm.com>\n        * config/arc/arc.c (arc_ccfsm_post_advance):\n        Add comment about TYPE_RETURN.\n\nFrom-SVN: r204123", "tree": {"sha": "3b754f998dfab0eee6eec5d9ce49a7ae95622730", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b754f998dfab0eee6eec5d9ce49a7ae95622730"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/comments", "author": null, "committer": null, "parents": [{"sha": "a6fcccd7a3578e12282b60c24ef48d46257482f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6fcccd7a3578e12282b60c24ef48d46257482f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6fcccd7a3578e12282b60c24ef48d46257482f8"}], "stats": {"total": 135, "additions": 135, "deletions": 0}, "files": [{"sha": "47041b287aba6c0b8c7764d9df10f79353138db3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "patch": "@@ -1,3 +1,8 @@\n+2013-10-28  Joern Rennecke  <joern.rennecke@embecosm.com>\n+\n+\t* config/arc/arc.c (arc_ccfsm_post_advance):\n+\tAdd comment about TYPE_RETURN.\n+\n 2013-10-28  Bin Cheng  <bin.cheng@arm.com>\n \n \t* tree-ssa-loop-ivopts.c (strip_offset_1): Change parameter type."}, {"sha": "6ddd48634c85c6bf765ca6a66ad0c25ae7e2e2ea", "filename": "gcc/config/arc/arc.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2Fconfig%2Farc%2Farc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2Fconfig%2Farc%2Farc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Farc.c?ref=1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "patch": "@@ -3720,6 +3720,8 @@ arc_ccfsm_post_advance (rtx insn, struct arc_ccfsm *state)\n \t   && GET_CODE (PATTERN (insn)) != ADDR_DIFF_VEC\n \t   && ((type = get_attr_type (insn)) == TYPE_BRANCH\n \t       || (type == TYPE_UNCOND_BRANCH\n+\t\t   /* ??? Maybe should also handle TYPE_RETURN here,\n+\t\t      but we don't have a testcase for that.  */\n \t\t   && ARC_CCFSM_BRANCH_DELETED_P (state))))\n     {\n       if (ARC_CCFSM_BRANCH_DELETED_P (state))"}, {"sha": "2853ec46aa879ca6d015504ff6b2aaa8e9b47df1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "patch": "@@ -1,3 +1,8 @@\n+2013-10-28   Claudiu Zissulescu  <claziss@synopsys.com>\n+\t     Joern Rennecke  <joern.rennecke@embecosm.com>\n+\n+\t* gcc.target/arc/jump-around-jump.c: New test.\n+\n 2013-10-27  Tom de Vries  <tom@codesourcery.com>\n \n \t* gcc.target/arm/require-pic-register-loc.c: New test."}, {"sha": "1b453283656c9863be05229db7e3a4db93f11889", "filename": "gcc/testsuite/gcc.target/arc/jump-around-jump.c", "status": "added", "additions": 123, "deletions": 0, "changes": 123, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fjump-around-jump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ea1e1b53ff1b68842b80b61845653a9a8fc94fc/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fjump-around-jump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fjump-around-jump.c?ref=1ea1e1b53ff1b68842b80b61845653a9a8fc94fc", "patch": "@@ -0,0 +1,123 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Os -mlock -mswape -mrtsc -fno-reorder-blocks\" } */\n+\n+/* This caused an ICE in arc_ifcvt when the 1->3 state change was not\n+   implemented for TYPE_UNCOND_BRANCH in arc_ccfsm_post_advance.  */\n+\n+typedef long __kernel_long_t;\n+typedef __kernel_long_t __kernel_time_t;\n+\n+struct timespec {\n+ __kernel_time_t tv_sec;\n+ long tv_nsec;\n+};\n+\n+\n+struct module;\n+struct device {\n+ struct device *parent;\n+};\n+\n+struct rtc_time {\n+ int tm_sec;\n+ int tm_min;\n+ int tm_hour;\n+ int tm_mday;\n+ int tm_mon;\n+ int tm_year;\n+ int tm_wday;\n+ int tm_yday;\n+ int tm_isdst;\n+};\n+struct rtc_wkalrm {\n+ unsigned char enabled;\n+ unsigned char pending;\n+ struct rtc_time time;\n+};\n+\n+struct rtc_class_ops {\n+ int (*open)(struct device *);\n+ void (*release)(struct device *);\n+ int (*ioctl)(struct device *, unsigned int, unsigned long);\n+ int (*read_time)(struct device *, struct rtc_time *);\n+ int (*set_time)(struct device *, struct rtc_time *);\n+ int (*read_alarm)(struct device *, struct rtc_wkalrm *);\n+ int (*set_alarm)(struct device *, struct rtc_wkalrm *);\n+  //int (*proc)(struct device *, struct seq_file *);\n+ int (*set_mmss)(struct device *, unsigned long secs);\n+ int (*read_callback)(struct device *, int data);\n+ int (*alarm_irq_enable)(struct device *, unsigned int enabled);\n+};\n+\n+struct rtc_device\n+{\n+ struct device dev;\n+ struct module *owner;\n+\n+ int id;\n+ char name[20];\n+\n+ const struct rtc_class_ops *ops;\n+  // struct mutex ops_lock;\n+\n+  // struct cdev char_dev;\n+ unsigned long flags;\n+\n+ unsigned long irq_data;\n+  //spinlock_t irq_lock;\n+  //wait_queue_head_t irq_queue;\n+  //struct fasync_struct *async_queue;\n+\n+  //struct rtc_task *irq_task;\n+  //spinlock_t irq_task_lock;\n+ int irq_freq;\n+ int max_user_freq;\n+\n+  //struct timerqueue_head timerqueue;\n+  //struct rtc_timer aie_timer;\n+  //struct rtc_timer uie_rtctimer;\n+  //struct hrtimer pie_timer;\n+ int pie_enabled;\n+  //struct work_struct irqwork;\n+\n+ int uie_unsupported;\n+\n+\n+  //struct work_struct uie_task;\n+  //struct timer_list uie_timer;\n+\n+ unsigned int oldsecs;\n+ unsigned int uie_irq_active:1;\n+ unsigned int stop_uie_polling:1;\n+ unsigned int uie_task_active:1;\n+ unsigned int uie_timer_active:1;\n+\n+};\n+\n+extern void rtc_time_to_tm(unsigned long time, struct rtc_time *tm);\n+extern struct rtc_device *rtc_class_open(const char *name);\n+extern void rtc_class_close(struct rtc_device *rtc);\n+\n+\n+int rtc_set_ntp_time(struct timespec now)\n+{\n+ struct rtc_device *rtc;\n+ struct rtc_time tm;\n+ int err = -19;\n+\n+ if (now.tv_nsec < (1000000000L >> 1))\n+  rtc_time_to_tm(now.tv_sec, &tm);\n+ else\n+  rtc_time_to_tm(now.tv_sec + 1, &tm);\n+\n+ rtc = rtc_class_open(\"rtc0\");\n+ if (rtc) {\n+\n+\n+  if (rtc->ops && (rtc->ops->set_time || rtc->ops->set_mmss))\n+   err = rtc_set_time(rtc, &tm);\n+  rtc_class_close(rtc);\n+ }\n+\n+ return err;\n+}"}]}