{"sha": "5c7675e906021641485a90e7cc4e9171194e937e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWM3Njc1ZTkwNjAyMTY0MTQ4NWE5MGU3Y2M0ZTkxNzExOTRlOTM3ZQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1999-08-07T18:39:03Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1999-08-07T18:39:03Z"}, "message": "function.c (init_function_start): Clear prologue & epilogue.\n\n        * function.c (init_function_start): Clear prologue & epilogue.\n        (prologue_epilogue_contains): New function.\n        * alias.c (init_alias_analysis): Use it.\n        * rtl.h (prologue_epilogue_contains): Declare it.\n\nFrom-SVN: r28585", "tree": {"sha": "e0871efb05a849856904c49079c83d4b4ca60f1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e0871efb05a849856904c49079c83d4b4ca60f1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c7675e906021641485a90e7cc4e9171194e937e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c7675e906021641485a90e7cc4e9171194e937e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c7675e906021641485a90e7cc4e9171194e937e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c7675e906021641485a90e7cc4e9171194e937e/comments", "author": null, "committer": null, "parents": [{"sha": "d0e8071928aaf219e9cd98aa0daaacab77d1059f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0e8071928aaf219e9cd98aa0daaacab77d1059f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0e8071928aaf219e9cd98aa0daaacab77d1059f"}], "stats": {"total": 35, "additions": 28, "deletions": 7}, "files": [{"sha": "a1cc202bbe4215db4cd99dfb1660ba09785d2813", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5c7675e906021641485a90e7cc4e9171194e937e", "patch": "@@ -1,3 +1,10 @@\n+Sat Aug  7 19:37:07 1999  Richard Henderson  <rth@cygnus.com>\n+\n+\t* function.c (init_function_start): Clear prologue & epilogue.\n+\t(prologue_epilogue_contains): New function.\n+\t* alias.c (init_alias_analysis): Use it.\n+\t* rtl.h (prologue_epilogue_contains): Declare it.\n+\n Sat Aug  7 19:32:16 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* jump.c (onlyjump_p): New function."}, {"sha": "63c9efd1aaa65f457399cedd85a9f352d537ddfb", "filename": "gcc/alias.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2Falias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2Falias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Falias.c?ref=5c7675e906021641485a90e7cc4e9171194e937e", "patch": "@@ -1468,6 +1468,8 @@ init_alias_analysis ()\n       /* Walk the insns adding values to the new_reg_base_value array.  */\n       for (insn = get_insns (); insn; insn = NEXT_INSN (insn))\n \t{\n+\t  if (prologue_epilogue_contains (insn))\n+\t    continue;\n \t  if (GET_RTX_CLASS (GET_CODE (insn)) == 'i')\n \t    {\n \t      rtx note, set;"}, {"sha": "e25d676e579488e73d14bf540cc6323f83d28f2d", "filename": "gcc/function.c", "status": "modified", "additions": 18, "deletions": 7, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=5c7675e906021641485a90e7cc4e9171194e937e", "patch": "@@ -376,6 +376,10 @@ struct function *current_function = 0;\n \n /* Global list of all compiled functions.  */\n struct function *all_functions = 0;\n+\n+/* These arrays record the INSN_UIDs of the prologue and epilogue insns.  */\n+static int *prologue;\n+static int *epilogue;\n \f\n /* In order to evaluate some expressions, such as function calls returning\n    structures in memory, we need to temporarily allocate stack locations.\n@@ -6050,6 +6054,9 @@ init_function_start (subr, filename, line)\n \n   current_function_returns_pointer\n     = POINTER_TYPE_P (TREE_TYPE (DECL_RESULT (subr)));\n+\n+  /* No prologue/epilogue insns yet.  */\n+  prologue = epilogue = 0;\n }\n \n /* Indicate that the current function uses extra args\n@@ -6656,11 +6663,6 @@ expand_function_end (filename, line, end_bindings)\n   expand_fixups (get_insns ());\n }\n \f\n-/* These arrays record the INSN_UIDs of the prologue and epilogue insns.  */\n-\n-static int *prologue;\n-static int *epilogue;\n-\n /* Create an array that records the INSN_UIDs of INSNS (either a sequence\n    or a single insn).  */\n \n@@ -6715,6 +6717,17 @@ contains (insn, vec)\n     }\n   return 0;\n }\n+\n+int\n+prologue_epilogue_contains (insn)\n+     rtx insn;\n+{\n+  if (prologue && contains (insn, prologue))\n+    return 1;\n+  if (epilogue && contains (insn, epilogue))\n+    return 1;\n+  return 0;\n+}\n #endif /* HAVE_prologue || HAVE_epilogue */\n \n /* Generate the prologue and epilogue RTL if the machine supports it.  Thread\n@@ -6727,7 +6740,6 @@ thread_prologue_and_epilogue_insns (f)\n {\n   int insertted = 0;\n \n-  prologue = 0;\n #ifdef HAVE_prologue\n   if (HAVE_prologue)\n     {\n@@ -6762,7 +6774,6 @@ thread_prologue_and_epilogue_insns (f)\n     }\n #endif\n \n-  epilogue = 0;\n #ifdef HAVE_epilogue\n   if (HAVE_epilogue)\n     {"}, {"sha": "c39bd10b1ac4f82f3bcb98f5980294a2e6aa2fa4", "filename": "gcc/rtl.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c7675e906021641485a90e7cc4e9171194e937e/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=5c7675e906021641485a90e7cc4e9171194e937e", "patch": "@@ -1452,6 +1452,7 @@ extern void record_excess_regs\t\tPROTO ((rtx, rtx, rtx *));\n /* In function.c */\n extern void reposition_prologue_and_epilogue_notes\tPROTO ((rtx));\n extern void thread_prologue_and_epilogue_insns\t\tPROTO ((rtx));\n+extern int prologue_epilogue_contains\t\t\tPROTO ((rtx));\n extern void use_variable\t\t\t\tPROTO ((rtx));\n extern HOST_WIDE_INT get_frame_size\t\t\tPROTO ((void));\n extern void preserve_rtl_expr_result\t\t\tPROTO ((rtx));"}]}