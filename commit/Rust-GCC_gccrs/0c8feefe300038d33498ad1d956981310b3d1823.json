{"sha": "0c8feefe300038d33498ad1d956981310b3d1823", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM4ZmVlZmUzMDAwMzhkMzM0OThhZDFkOTU2OTgxMzEwYjNkMTgyMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1998-09-08T11:37:48Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-09-08T11:37:48Z"}, "message": "cp-tree.h (anonymous_namespace_name): Declare.\n\n\t* cp-tree.h (anonymous_namespace_name): Declare.\n\t* decl.c: Define it.\n\t(push_namespace): Use anonymous_namespace_name, rather than local\n\tstatic anon_name.\n\t* error.c (dump_decl): If a namespace is named\n\tanonymous_namespace_name, call it {anonymous}.\n\nFrom-SVN: r22329", "tree": {"sha": "8ba45d756b13acf8138233ef329e90204ef257fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ba45d756b13acf8138233ef329e90204ef257fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c8feefe300038d33498ad1d956981310b3d1823", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c8feefe300038d33498ad1d956981310b3d1823", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c8feefe300038d33498ad1d956981310b3d1823", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c8feefe300038d33498ad1d956981310b3d1823/comments", "author": null, "committer": null, "parents": [{"sha": "57af83585d7a0f82770b2777ef07a86635d436f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57af83585d7a0f82770b2777ef07a86635d436f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57af83585d7a0f82770b2777ef07a86635d436f6"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "c1ab0e4080aa048aa7cb6b2df7873e728ac1f0b4", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0c8feefe300038d33498ad1d956981310b3d1823", "patch": "@@ -1,5 +1,12 @@\n 1998-09-08  Mark Mitchell  <mark@markmitchell.com>\n \n+\t* cp-tree.h (anonymous_namespace_name): Declare.\n+\t* decl.c: Define it.\n+\t(push_namespace): Use anonymous_namespace_name, rather than local\n+\tstatic anon_name.\n+\t* error.c (dump_decl): If a namespace is named\n+\tanonymous_namespace_name, call it {anonymous}.\n+\n \t* decl.c (grokparms): Distinguish between references and pointers\n \tin error message.\n "}, {"sha": "2939275d859b17afeb8b91c2ff508869a761c23c", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=0c8feefe300038d33498ad1d956981310b3d1823", "patch": "@@ -1924,6 +1924,8 @@ extern tree boolean_type_node, boolean_true_node, boolean_false_node;\n \n extern tree null_node;\n \n+extern tree anonymous_namespace_name;\n+\n /* in pt.c  */\n \n /* These values are used for the `STRICT' parameter to type_unfication and"}, {"sha": "488cd0bc6b49138b75dc8c13233b86af69e912d4", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=0c8feefe300038d33498ad1d956981310b3d1823", "patch": "@@ -559,6 +559,10 @@ extern tree previous_class_values;\n    node, but signed.  */\n tree signed_size_zero_node;\n \n+/* The name of the anonymous namespace, throughout this translation\n+   unit.  */\n+tree anonymous_namespace_name;\n+\n \f\n /* Allocate a level of searching.  */\n \n@@ -1783,10 +1787,9 @@ push_namespace (name)\n     {\n       /* The name of anonymous namespace is unique for the translation\n          unit.  */\n-      static tree anon_name = NULL_TREE;\n-      if (!anon_name)\n-        anon_name = get_file_function_name ('N');\n-      name = anon_name;\n+      if (!anonymous_namespace_name)\n+        anonymous_namespace_name = get_file_function_name ('N');\n+      name = anonymous_namespace_name;\n       d = IDENTIFIER_NAMESPACE_VALUE (name);\n       if (d)\n         /* Reopening anonymous namespace.  */"}, {"sha": "3a505c4f0ebe5e9e37053fc02191b134ebb8405f", "filename": "gcc/cp/error.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c8feefe300038d33498ad1d956981310b3d1823/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=0c8feefe300038d33498ad1d956981310b3d1823", "patch": "@@ -733,7 +733,10 @@ dump_decl (t, v)\n \t  dump_decl (DECL_CONTEXT (t), v);\n \t  OB_PUTC2 (':',':');\n \t}\n-      OB_PUTID (DECL_NAME (t));\n+      if (DECL_NAME (t) == anonymous_namespace_name)\n+\tOB_PUTS (\"{anonymous}\");\n+      else\n+\tOB_PUTID (DECL_NAME (t));\n       break;\n \n     case SCOPE_REF:"}]}