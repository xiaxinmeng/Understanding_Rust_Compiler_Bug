{"sha": "1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWNiNmQwZGE1ZjY2MzU1YmU5MmNhY2QwZjhjNzYxNzM0NGIwZTY2Zg==", "commit": {"author": {"name": "Per Bothner", "email": "per@bothner.com", "date": "2004-07-14T02:36:38Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2004-07-14T02:36:38Z"}, "message": "java-tree.h (all_class_filename): Remove useless macro.\n\n\n\t* java-tree.h (all_class_filename):  Remove useless macro.\n\t(enum java_tree_index):  Remove JTI_ALL_CLASS_FILENAME constant.\n\t(BUILD_FILENAME_IDENTIFIER_NODE):  Remove useless macro.\n\t* parse.y (java_parser_context_restore_global):  Replace\n\tBUILD_FILENAME_IDENTIFIER_NODE by plain get_identifier.\n\t* jcf-parse.c (read_class, java_parse_file):  Likewise.\n\nFrom-SVN: r84667", "tree": {"sha": "169246f0954dfc20285a8360379b7db5e6516ac7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/169246f0954dfc20285a8360379b7db5e6516ac7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/comments", "author": {"login": "PerBothner", "id": 10293361, "node_id": "MDQ6VXNlcjEwMjkzMzYx", "avatar_url": "https://avatars.githubusercontent.com/u/10293361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PerBothner", "html_url": "https://github.com/PerBothner", "followers_url": "https://api.github.com/users/PerBothner/followers", "following_url": "https://api.github.com/users/PerBothner/following{/other_user}", "gists_url": "https://api.github.com/users/PerBothner/gists{/gist_id}", "starred_url": "https://api.github.com/users/PerBothner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PerBothner/subscriptions", "organizations_url": "https://api.github.com/users/PerBothner/orgs", "repos_url": "https://api.github.com/users/PerBothner/repos", "events_url": "https://api.github.com/users/PerBothner/events{/privacy}", "received_events_url": "https://api.github.com/users/PerBothner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bd09f5b8f1a4bac33cb7dfb2f344893464f8f7cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd09f5b8f1a4bac33cb7dfb2f344893464f8f7cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd09f5b8f1a4bac33cb7dfb2f344893464f8f7cc"}], "stats": {"total": 33, "additions": 12, "deletions": 21}, "files": [{"sha": "b111dad3ce7192aa52a042b350d941810a08e02a", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "patch": "@@ -1,3 +1,12 @@\n+2004-07-13  Per Bothner  <per@bothner.com>\n+\n+\t* java-tree.h (all_class_filename):  Remove useless macro.\n+\t(enum java_tree_index):  Remove JTI_ALL_CLASS_FILENAME constant.\n+\t(BUILD_FILENAME_IDENTIFIER_NODE):  Remove useless macro.\n+\t* parse.y (java_parser_context_restore_global):  Replace\n+\tBUILD_FILENAME_IDENTIFIER_NODE by plain get_identifier.\n+\t* jcf-parse.c (read_class, java_parse_file):  Likewise.\n+\n 2004-07-12  Bryce McKinlay  <mckinlay@redhat.com>\n \n \tPR java/16474"}, {"sha": "89599764c891c37878c15bbf36708bb1774fc9c1", "filename": "gcc/java/java-tree.h", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2Fjava-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2Fjava-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjava-tree.h?ref=1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "patch": "@@ -153,9 +153,6 @@ extern int compiling_from_source;\n #define all_class_list \\\n   java_global_trees[JTI_ALL_CLASS_LIST]\n \n-/* List of all class filenames seen so far.  */\n-#define all_class_filename java_global_trees [JTI_ALL_CLASS_FILENAME]\n-\n /* List of virtual decls referred to by this translation unit, used to\n    generate virtual method offset symbol table.  */\n \n@@ -415,7 +412,6 @@ enum java_tree_index\n   JTI_CURRENT_CLASS,\n   JTI_OUTPUT_CLASS,\n   JTI_ALL_CLASS_LIST,\n-  JTI_ALL_CLASS_FILENAME,\n \n   JTI_PREDEF_FILENAMES,\n \n@@ -1674,16 +1670,6 @@ extern tree *type_map;\n    scope of TYPE_DECL.  */\n #define DECL_INNER_CLASS_LIST(NODE) DECL_INITIAL (TYPE_DECL_CHECK (NODE))\n \n-/* Build a IDENTIFIER_NODE for a file name we're considering. Since\n-   all_class_filename is a registered root, putting this identifier\n-   in a TREE_LIST it holds keeps this node alive.  */\n-#define BUILD_FILENAME_IDENTIFIER_NODE(F, S)\t\t\\\n-  if (!((F) = maybe_get_identifier ((S))))\t\t\\\n-    {\t\t\t\t\t\t\t\\\n-      (F) = get_identifier ((S));\t\t\t\\\n-      tree_cons ((F), NULL_TREE, all_class_filename);\t\\\n-    }\n-\n /* Add a FIELD_DECL to RECORD_TYPE RTYPE.\n    The field has name NAME (a char*), and type FTYPE.\n    Unless this is the first field, FIELD most hold the previous field."}, {"sha": "07f8ccc754b20c324d1d370ef544043be5909334", "filename": "gcc/java/jcf-parse.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2Fjcf-parse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2Fjcf-parse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-parse.c?ref=1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "patch": "@@ -501,7 +501,7 @@ read_class (tree name)\n       java_parser_context_save_global ();\n       java_push_parser_context ();\n \n-      BUILD_FILENAME_IDENTIFIER_NODE (given_file, filename);\n+      given_file = get_identifier (filename);\n       real_file = get_identifier (lrealpath (filename));\n \n       generate = IS_A_COMMAND_LINE_FILENAME_P (given_file);\n@@ -1006,7 +1006,7 @@ java_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n \t    }\n \t  else\n \t    {\n-\t      BUILD_FILENAME_IDENTIFIER_NODE (node, value);\n+\t      node = get_identifier (value);\n \t      IS_A_COMMAND_LINE_FILENAME_P (node) = 1;\n \t      current_file_list = tree_cons (NULL_TREE, node, \n \t\t\t\t\t     current_file_list);"}, {"sha": "283176f4cec417682203843d25f9c81d1f51365f", "filename": "gcc/java/parse.y", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1cb6d0da5f66355be92cacd0f8c7617344b0e66f/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=1cb6d0da5f66355be92cacd0f8c7617344b0e66f", "patch": "@@ -2765,11 +2765,7 @@ java_parser_context_restore_global (void)\n   current_class = ctxp->class_type;\n   input_filename = ctxp->filename;\n   if (wfl_operator)\n-    {\n-      tree s;\n-      BUILD_FILENAME_IDENTIFIER_NODE (s, input_filename);\n-      EXPR_WFL_FILENAME_NODE (wfl_operator) = s;\n-    }\n+    EXPR_WFL_FILENAME_NODE (wfl_operator) = get_identifier (input_filename);\n   current_function_decl = ctxp->function_decl;\n   ctxp->saved_data = 0;\n   if (ctxp->saved_data_ctx)"}]}