{"sha": "9081759b7ea5f7f1b17ea2a09cc438115c219ca1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTA4MTc1OWI3ZWE1ZjdmMWIxN2VhMmEwOWNjNDM4MTE1YzIxOWNhMQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@foss.st.com", "date": "2021-09-08T08:31:05Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@foss.st.com", "date": "2021-09-20T08:26:30Z"}, "message": "testsuite: Remove .exe suffix in prune_gcc_output\n\nWhen running the testsuite under Windows, we noticed failures in\ntestcase which attempt to match compiler error messages containing the\nname of the executable.\n\nFor instance, gcc.dg/analyzer/signal-4a.c tries to match 'cc1:' which\nobviously fails when the executable is called cc1.exe.\n\nThis patch removes the .exe suffix from various toolchain executables\nto avoid this problem.\n\n2021-09-08  Christophe Lyon  <christophe.lyon@foss.st.com>\n\t    Torbj\u00f6rn SVENSSON  <torbjorn.svensson@st.com>\n\n\tgcc/testsuite/\n\t* lib/prune.exp (prune_gcc_output): Remove .exe suffix from\n\ttoolchain executables names.", "tree": {"sha": "644a4cd3286f7c04d1094248dfaa8cb6499bff43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/644a4cd3286f7c04d1094248dfaa8cb6499bff43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9081759b7ea5f7f1b17ea2a09cc438115c219ca1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9081759b7ea5f7f1b17ea2a09cc438115c219ca1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9081759b7ea5f7f1b17ea2a09cc438115c219ca1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9081759b7ea5f7f1b17ea2a09cc438115c219ca1/comments", "author": null, "committer": null, "parents": [{"sha": "7d79c3ebc3f3f6f8aecf83726c97474ae5cfe957", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d79c3ebc3f3f6f8aecf83726c97474ae5cfe957", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d79c3ebc3f3f6f8aecf83726c97474ae5cfe957"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "fac212ecf60e945f500b55e43fcf1eb24ebd749c", "filename": "gcc/testsuite/lib/prune.exp", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9081759b7ea5f7f1b17ea2a09cc438115c219ca1/gcc%2Ftestsuite%2Flib%2Fprune.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9081759b7ea5f7f1b17ea2a09cc438115c219ca1/gcc%2Ftestsuite%2Flib%2Fprune.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fprune.exp?ref=9081759b7ea5f7f1b17ea2a09cc438115c219ca1", "patch": "@@ -37,6 +37,9 @@ proc prune_gcc_output { text } {\n     # Handle any freeform regexps.\n     set text [handle-dg-regexps $text]\n \n+    # Remove Windows .exe suffix\n+    regsub -all \"(as|cc1|cc1plus|collect2|f951|ld|lto-wrapper)\\.exe?:\" $text {\\1:} text\n+\n     regsub -all \"(^|\\n)(\\[^\\n\\]*: \\[iI\\]|I)n ((static member |lambda )?function|member|method|(copy )?constructor|destructor|instantiation|substitution|program|subroutine|block-data)\\[^\\n\\]*\" $text \"\" text\n     regsub -all \"(^|\\n)\\[^\\n\\]*(: )?At (top level|global scope):\\[^\\n\\]*\" $text \"\" text\n     regsub -all \"(^|\\n)\\[^\\n\\]*:   (recursively )?required \\[^\\n\\]*\" $text \"\" text"}]}