{"sha": "7424041386a03f1cfcc2c58ba750251db2df99b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQyNDA0MTM4NmEwM2YxY2ZjYzJjNThiYTc1MDI1MWRiMmRmOTliMQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2013-06-16T19:30:48Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2013-06-16T19:30:48Z"}, "message": "gcc/\n\t* config.gcc (mips*-mti-linux*, mips64*-*-linux*, mipsisa64*-*-linux*)\n\t(mips*-*-linux*): Move default with_llsc setting to where other\n\tdefaults are set.\n\t(mips*-*-vxworks*): Move with_arch default from with_cpu block to\n\twith_arch block.\n\t(mips64r5900-*-*, mips64r5900el-*-*, mipsr5900-*-*, mipsr5900el-*-*):\n\tLikewise.  Remove default with_tune setting.  Move default float\n\tsetting to its own block.  Handle with_llsc in the same block as above.\n\nFrom-SVN: r200139", "tree": {"sha": "2768b19525857a6d9c6216658702f20c9be59812", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2768b19525857a6d9c6216658702f20c9be59812"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7424041386a03f1cfcc2c58ba750251db2df99b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7424041386a03f1cfcc2c58ba750251db2df99b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7424041386a03f1cfcc2c58ba750251db2df99b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7424041386a03f1cfcc2c58ba750251db2df99b1/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f038f5824b16392ce101d463aa0bebeee4d3f081", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f038f5824b16392ce101d463aa0bebeee4d3f081", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f038f5824b16392ce101d463aa0bebeee4d3f081"}], "stats": {"total": 61, "additions": 42, "deletions": 19}, "files": [{"sha": "9f97845f85e3790f90795306f7fcb0da04986ec4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7424041386a03f1cfcc2c58ba750251db2df99b1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7424041386a03f1cfcc2c58ba750251db2df99b1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7424041386a03f1cfcc2c58ba750251db2df99b1", "patch": "@@ -1,3 +1,14 @@\n+2013-06-16  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* config.gcc (mips*-mti-linux*, mips64*-*-linux*, mipsisa64*-*-linux*)\n+\t(mips*-*-linux*): Move default with_llsc setting to where other\n+\tdefaults are set.\n+\t(mips*-*-vxworks*): Move with_arch default from with_cpu block to\n+\twith_arch block.\n+\t(mips64r5900-*-*, mips64r5900el-*-*, mipsr5900-*-*, mipsr5900el-*-*):\n+\tLikewise.  Remove default with_tune setting.  Move default float\n+\tsetting to its own block.  Handle with_llsc in the same block as above.\n+\n 2013-06-16  Joern Rennecke <joern.rennecke@embecosm.com>\n \n \tPR rtl-optimization/57425"}, {"sha": "0ad7217aca69468563926800d4fc52eb58114773", "filename": "gcc/config.gcc", "status": "modified", "additions": 31, "deletions": 19, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7424041386a03f1cfcc2c58ba750251db2df99b1/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7424041386a03f1cfcc2c58ba750251db2df99b1/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=7424041386a03f1cfcc2c58ba750251db2df99b1", "patch": "@@ -1813,7 +1813,6 @@ mips*-mti-linux*)\n \ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=33 MIPS_ABI_DEFAULT=ABI_32\"\n \tgnu_ld=yes\n \tgas=yes\n-\ttest x$with_llsc != x || with_llsc=yes\n \t;;\n mips64*-*-linux* | mipsisa64*-*-linux*)\n \ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/gnu-user64.h mips/linux64.h mips/linux-common.h\"\n@@ -1834,7 +1833,6 @@ mips64*-*-linux* | mipsisa64*-*-linux*)\n \tesac\n \tgnu_ld=yes\n \tgas=yes\n-\ttest x$with_llsc != x || with_llsc=yes\n \t;;\n mips*-*-linux*)\t\t\t\t# Linux MIPS, either endian.\n         tm_file=\"dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/linux.h\"\n@@ -1850,7 +1848,6 @@ mips*-*-linux*)\t\t\t\t# Linux MIPS, either endian.\n         mipsisa32*)\n \t\ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=32\"\n         esac\n-\ttest x$with_llsc != x || with_llsc=yes\n \t;;\n mips*-mti-elf*)\n \ttm_file=\"elfos.h newlib-stdint.h ${tm_file} mips/elf.h mips/sde.h mips/mti-elf.h\"\n@@ -2982,22 +2979,6 @@ if test x$with_cpu = x ; then\n \t  ;;\n       esac\n       ;;\n-    mips64r5900-*-* | mips64r5900el-*-* | mipsr5900-*-* | mipsr5900el-*-*)\n-      with_arch=r5900\n-      with_tune=r5900\n-      if test x$with_llsc = x; then\n-\t# r5900 doesn't support ll, sc, lld and scd instructions:\n-\twith_llsc=no\n-      fi\n-      if test x$with_float = x; then\n-\t# r5900 doesn't support 64 bit float:\n-\t# 32 bit float doesn't comply with IEEE 754.\n-\twith_float=soft\n-      fi\n-      ;;\n-    mips*-*-vxworks)\n-      with_arch=mips2\n-      ;;\n     powerpc*-*-*spe*)\n       if test x$enable_e500_double = xyes; then\n          with_cpu=8548\n@@ -3058,6 +3039,12 @@ if test x$with_arch = x ; then\n     x86_64-*-*)\n       with_arch=$arch\n       ;;\n+    mips64r5900-*-* | mips64r5900el-*-* | mipsr5900-*-* | mipsr5900el-*-*)\n+      with_arch=r5900\n+      ;;\n+    mips*-*-vxworks)\n+      with_arch=mips2\n+      ;;\n   esac\n \n   # Avoid overriding --with-arch-32 and --with-arch-64 values.\n@@ -3092,6 +3079,17 @@ if test x$with_arch = x ; then\n   esac\n fi\n \n+# Infer a default setting for --with-float.\n+if test x$with_float = x; then\n+  case ${target} in\n+    mips64r5900-*-* | mips64r5900el-*-* | mipsr5900-*-* | mipsr5900el-*-*)\n+      # The R5900 doesn't support 64-bit float.  32-bit float doesn't\n+      # comply with IEEE 754.\n+      with_float=soft\n+      ;;\n+  esac\n+fi\n+\n # Support --with-fpmath.\n if test x$with_fpmath != x; then\n   case ${target} in\n@@ -3126,6 +3124,20 @@ if test x$with_schedule = x; then\n \tesac\n fi\n \n+# Infer a default setting for --with-llsc.\n+if test x$with_llsc = x; then\n+  case ${target} in\n+    mips64r5900-*-* | mips64r5900el-*-* | mipsr5900-*-* | mipsr5900el-*-*)\n+      # The R5900 doesn't support LL(D) and SC(D).\n+      with_llsc=no\n+      ;;\n+    mips*-*-linux*)\n+      # The kernel emulates LL and SC where necessary.\n+      with_llsc=yes\n+      ;;\n+  esac\n+fi\n+\n # Validate and mark as valid any --with options supported\n # by this target.  In order to use a particular --with option\n # you must list it in supported_defaults; validating the value"}]}