{"sha": "4de67111df21f434ea650ecb83306807ee7f3068", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGRlNjcxMTFkZjIxZjQzNGVhNjUwZWNiODMzMDY4MDdlZTdmMzA2OA==", "commit": {"author": {"name": "Alexander Ivchenko", "email": "alexander.ivchenko@intel.com", "date": "2013-12-27T14:37:34Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2013-12-27T14:37:34Z"}, "message": "sse.md (avx512f_fixupimm<mode>_maskz): Extend to support EVEX's RC.\n\n        * config/i386/sse.md (avx512f_fixupimm<mode>_maskz): Extend to support\n        EVEX's RC.\n        (avx512f_sfixupimm<mode>_maskz): Ditto.\n        * config/i386/subst.md (round_saeonly_expand_name): New.\n        (round_saeonly_expand_nimm_predicate): Ditto.\n        (round_saeonly_expand_operand6): Ditto.\n        (round_saeonly_expand): Ditto.\n\n\nCo-Authored-By: Andrey Turetskiy <andrey.turetskiy@intel.com>\nCo-Authored-By: Anna Tikhonova <anna.tikhonova@intel.com>\nCo-Authored-By: Ilya Tocar <ilya.tocar@intel.com>\nCo-Authored-By: Ilya Verbin <ilya.verbin@intel.com>\nCo-Authored-By: Kirill Yukhin <kirill.yukhin@intel.com>\nCo-Authored-By: Maxim Kuznetsov <maxim.kuznetsov@intel.com>\nCo-Authored-By: Michael Zolotukhin <michael.v.zolotukhin@intel.com>\nCo-Authored-By: Sergey Lega <sergey.s.lega@intel.com>\n\nFrom-SVN: r206223", "tree": {"sha": "c7622df0b4e4f438e1107c89aa47c46c36cd901a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c7622df0b4e4f438e1107c89aa47c46c36cd901a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4de67111df21f434ea650ecb83306807ee7f3068", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4de67111df21f434ea650ecb83306807ee7f3068", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4de67111df21f434ea650ecb83306807ee7f3068", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4de67111df21f434ea650ecb83306807ee7f3068/comments", "author": null, "committer": null, "parents": [{"sha": "7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cf78561f6e669e4d482ad078e9258c6f5ce1aee"}], "stats": {"total": 56, "additions": 48, "deletions": 8}, "files": [{"sha": "601bc7692c510bff90b3298713bb77572a6fb96e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4de67111df21f434ea650ecb83306807ee7f3068/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4de67111df21f434ea650ecb83306807ee7f3068/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4de67111df21f434ea650ecb83306807ee7f3068", "patch": "@@ -1,3 +1,21 @@\n+2013-12-27  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n+\t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n+\t    Sergey Lega  <sergey.s.lega@intel.com>\n+\t    Anna Tikhonova  <anna.tikhonova@intel.com>\n+\t    Ilya Tocar  <ilya.tocar@intel.com>\n+\t    Andrey Turetskiy  <andrey.turetskiy@intel.com>\n+\t    Ilya Verbin  <ilya.verbin@intel.com>\n+\t    Kirill Yukhin  <kirill.yukhin@intel.com>\n+\t    Michael Zolotukhin  <michael.v.zolotukhin@intel.com>\n+\n+\t* config/i386/sse.md (avx512f_fixupimm<mode>_maskz): Extend to support\n+\tEVEX's RC.\n+\t(avx512f_sfixupimm<mode>_maskz): Ditto.\n+\t* config/i386/subst.md (round_saeonly_expand_name): New.\n+\t(round_saeonly_expand_nimm_predicate): Ditto.\n+\t(round_saeonly_expand_operand6): Ditto.\n+\t(round_saeonly_expand): Ditto.\n+\n 2013-12-27  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n \t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n \t    Sergey Lega  <sergey.s.lega@intel.com>"}, {"sha": "7beb245d9c74da5e0e66d465a11385eea5c90356", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4de67111df21f434ea650ecb83306807ee7f3068/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4de67111df21f434ea650ecb83306807ee7f3068/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=4de67111df21f434ea650ecb83306807ee7f3068", "patch": "@@ -6626,18 +6626,19 @@\n })\n \n \n-(define_expand \"avx512f_fixupimm<mode>_maskz\"\n+(define_expand \"avx512f_fixupimm<mode>_maskz<round_saeonly_expand_name>\"\n   [(match_operand:VF_512 0 \"register_operand\")\n    (match_operand:VF_512 1 \"register_operand\")\n    (match_operand:VF_512 2 \"register_operand\")\n-   (match_operand:<sseintvecmode> 3 \"nonimmediate_operand\")\n+   (match_operand:<sseintvecmode> 3 \"<round_saeonly_expand_nimm_predicate>\")\n    (match_operand:SI 4 \"const_0_to_255_operand\")\n    (match_operand:<avx512fmaskmode> 5 \"register_operand\")]\n   \"TARGET_AVX512F\"\n {\n-  emit_insn (gen_avx512f_fixupimm<mode>_maskz_1 (\n+  emit_insn (gen_avx512f_fixupimm<mode>_maskz_1<round_saeonly_expand_name> (\n \toperands[0], operands[1], operands[2], operands[3],\n-\toperands[4], CONST0_RTX (<MODE>mode), operands[5]));\n+\toperands[4], CONST0_RTX (<MODE>mode), operands[5]\n+\t<round_saeonly_expand_operand6>));\n   DONE;\n })\n \n@@ -6670,18 +6671,19 @@\n   [(set_attr \"prefix\" \"evex\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n-(define_expand \"avx512f_sfixupimm<mode>_maskz\"\n+(define_expand \"avx512f_sfixupimm<mode>_maskz<round_saeonly_expand_name>\"\n   [(match_operand:VF_128 0 \"register_operand\")\n    (match_operand:VF_128 1 \"register_operand\")\n    (match_operand:VF_128 2 \"register_operand\")\n-   (match_operand:<sseintvecmode> 3 \"nonimmediate_operand\")\n+   (match_operand:<sseintvecmode> 3 \"<round_saeonly_expand_nimm_predicate>\")\n    (match_operand:SI 4 \"const_0_to_255_operand\")\n    (match_operand:<avx512fmaskmode> 5 \"register_operand\")]\n   \"TARGET_AVX512F\"\n {\n-  emit_insn (gen_avx512f_sfixupimm<mode>_maskz_1 (\n+  emit_insn (gen_avx512f_sfixupimm<mode>_maskz_1<round_saeonly_expand_name> (\n \toperands[0], operands[1], operands[2], operands[3],\n-\toperands[4], CONST0_RTX (<MODE>mode), operands[5]));\n+\toperands[4], CONST0_RTX (<MODE>mode), operands[5]\n+\t<round_saeonly_expand_operand6>));\n   DONE;\n })\n "}, {"sha": "4a6d4778d9c74d41eea9d697bc54b50ee62ad0b6", "filename": "gcc/config/i386/subst.md", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4de67111df21f434ea650ecb83306807ee7f3068/gcc%2Fconfig%2Fi386%2Fsubst.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4de67111df21f434ea650ecb83306807ee7f3068/gcc%2Fconfig%2Fi386%2Fsubst.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsubst.md?ref=4de67111df21f434ea650ecb83306807ee7f3068", "patch": "@@ -178,3 +178,23 @@\n    (match_dup 3)\n    (match_dup 4)\n    (unspec [(match_operand:SI 5 \"const_0_to_4_operand\")] UNSPEC_EMBEDDED_ROUNDING)])\n+\n+(define_subst_attr \"round_saeonly_expand_name\" \"round_saeonly_expand\" \"\" \"_round\")\n+(define_subst_attr \"round_saeonly_expand_nimm_predicate\" \"round_saeonly_expand\" \"nonimmediate_operand\" \"register_operand\")\n+(define_subst_attr \"round_saeonly_expand_operand6\" \"round_saeonly_expand\" \"\" \", operands[6]\")\n+\n+(define_subst \"round_saeonly_expand\"\n+ [(match_operand:SUBST_V 0)\n+  (match_operand:SUBST_V 1)\n+  (match_operand:SUBST_V 2)\n+  (match_operand:SUBST_A 3)\n+  (match_operand:SI 4)\n+  (match_operand:SUBST_S 5)]\n+  \"TARGET_AVX512F\"\n+  [(match_dup 0)\n+   (match_dup 1)\n+   (match_dup 2)\n+   (match_dup 3)\n+   (match_dup 4)\n+   (match_dup 5)\n+   (unspec [(match_operand:SI 6 \"const_4_to_5_operand\")] UNSPEC_EMBEDDED_ROUNDING)])"}]}