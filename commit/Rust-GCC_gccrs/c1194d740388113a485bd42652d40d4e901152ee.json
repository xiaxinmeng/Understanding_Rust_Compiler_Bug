{"sha": "c1194d740388113a485bd42652d40d4e901152ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzExOTRkNzQwMzg4MTEzYTQ4NWJkNDI2NTJkNDBkNGU5MDExNTJlZQ==", "commit": {"author": {"name": "John Wehle", "email": "john@feith.com", "date": "2000-08-04T19:16:05Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2000-08-04T19:16:05Z"}, "message": "combine.c (recog_for_combine): Remove the old notes prior to attempting to recognize the new pattern.\n\n        * combine.c (recog_for_combine): Remove the old notes\n        prior to attempting to recognize the new pattern.\n        (distribute_notes): Ignore REG_NONNEG notes.\n\nFrom-SVN: r35492", "tree": {"sha": "ebeabc1facd97c63f7e49bcb69e2a7d42313c684", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebeabc1facd97c63f7e49bcb69e2a7d42313c684"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1194d740388113a485bd42652d40d4e901152ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1194d740388113a485bd42652d40d4e901152ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1194d740388113a485bd42652d40d4e901152ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1194d740388113a485bd42652d40d4e901152ee/comments", "author": {"login": "jlwehle", "id": 46985578, "node_id": "MDQ6VXNlcjQ2OTg1NTc4", "avatar_url": "https://avatars.githubusercontent.com/u/46985578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlwehle", "html_url": "https://github.com/jlwehle", "followers_url": "https://api.github.com/users/jlwehle/followers", "following_url": "https://api.github.com/users/jlwehle/following{/other_user}", "gists_url": "https://api.github.com/users/jlwehle/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlwehle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlwehle/subscriptions", "organizations_url": "https://api.github.com/users/jlwehle/orgs", "repos_url": "https://api.github.com/users/jlwehle/repos", "events_url": "https://api.github.com/users/jlwehle/events{/privacy}", "received_events_url": "https://api.github.com/users/jlwehle/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4f3aeae1dc3432c4869b606e88b8ed898d4d0272", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f3aeae1dc3432c4869b606e88b8ed898d4d0272", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f3aeae1dc3432c4869b606e88b8ed898d4d0272"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "74500393d8fcb800b1efe9357ef88140a731ed55", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1194d740388113a485bd42652d40d4e901152ee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1194d740388113a485bd42652d40d4e901152ee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c1194d740388113a485bd42652d40d4e901152ee", "patch": "@@ -1,3 +1,9 @@\n+Fri Aug  4 11:43:49 2000  John Wehle  (john@feith.com)\n+\n+\t* combine.c (recog_for_combine): Remove the old notes\n+\tprior to attempting to recognize the new pattern.\n+\t(distribute_notes): Ignore REG_NONNEG notes.\n+\n 2000-08-04  Chandrakala Chavva  <cchavva@redhat.com>\n \n \t* varasm.c (output_constructor): Add .align 0 for packed vars."}, {"sha": "0d43891865c509dcb74934e71e5beb9708208e9d", "filename": "gcc/combine.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1194d740388113a485bd42652d40d4e901152ee/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1194d740388113a485bd42652d40d4e901152ee/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=c1194d740388113a485bd42652d40d4e901152ee", "patch": "@@ -9569,6 +9569,7 @@ recog_for_combine (pnewpat, insn, pnotes)\n   int num_clobbers_to_add = 0;\n   int i;\n   rtx notes = 0;\n+  rtx old_notes;\n \n   /* If PAT is a PARALLEL, check to see if it contains the CLOBBER\n      we use to indicate that something didn't match.  If we find such a\n@@ -9579,6 +9580,10 @@ recog_for_combine (pnewpat, insn, pnotes)\n \t  && XEXP (XVECEXP (pat, 0, i), 0) == const0_rtx)\n \treturn -1;\n \n+  /* Remove the old notes prior to trying to recognize the new pattern.  */\n+  old_notes = REG_NOTES (insn);\n+  REG_NOTES (insn) = 0;\n+\n   /* Is the result of combination a valid instruction?  */\n   insn_code_number = recog (pat, insn, &num_clobbers_to_add);\n \n@@ -9608,6 +9613,8 @@ recog_for_combine (pnewpat, insn, pnotes)\n       insn_code_number = recog (pat, insn, &num_clobbers_to_add);\n     }\n \n+  REG_NOTES (insn) = old_notes;\n+\n   /* If we had any clobbers to add, make a new pattern than contains\n      them.  Then check to make sure that all of them are dead.  */\n   if (num_clobbers_to_add)\n@@ -12079,7 +12086,6 @@ distribute_notes (notes, from_insn, i3, i2, elim_i2, elim_i1)\n \n \tcase REG_EQUAL:\n \tcase REG_EQUIV:\n-\tcase REG_NONNEG:\n \tcase REG_NOALIAS:\n \t  /* These notes say something about results of an insn.  We can\n \t     only support them if they used to be on I3 in which case they\n@@ -12137,9 +12143,12 @@ distribute_notes (notes, from_insn, i3, i2, elim_i2, elim_i1)\n \t    }\n \t  break;\n \n+\tcase REG_NONNEG:\n \tcase REG_WAS_0:\n-\t  /* It is too much trouble to try to see if this note is still\n-\t     correct in all situations.  It is better to simply delete it.  */\n+\t  /* These notes say something about the value of a register prior\n+\t     to the execution of an insn.  It is too much trouble to see\n+\t     if the note is still correct in all situations.  It is better\n+\t     to simply delete it.  */\n \t  break;\n \n \tcase REG_RETVAL:"}]}