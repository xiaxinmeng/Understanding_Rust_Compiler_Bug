{"sha": "8564f92726e23036b8fc7e2848a53df1d07694c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODU2NGY5MjcyNmUyMzAzNmI4ZmM3ZTI4NDhhNTNkZjFkMDc2OTRjNQ==", "commit": {"author": {"name": "Janis Johnson", "email": "janisjo@codesourcery.com", "date": "2012-06-13T22:55:56Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2012-06-13T22:55:56Z"}, "message": "re PR testsuite/20771 (Duplicate PCH test names)\n\n\tPR testsuite/20771\n\t* lib/dg-pch.exp (dg-flags-pch): Add flags to make compile lines in\n\ttest summary unique.\n\nFrom-SVN: r188540", "tree": {"sha": "3440fe524bccf078f9bfa3867fa5c55c479e645f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3440fe524bccf078f9bfa3867fa5c55c479e645f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8564f92726e23036b8fc7e2848a53df1d07694c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8564f92726e23036b8fc7e2848a53df1d07694c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8564f92726e23036b8fc7e2848a53df1d07694c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8564f92726e23036b8fc7e2848a53df1d07694c5/comments", "author": null, "committer": null, "parents": [{"sha": "78a5a56849b3f72268ee66d8aaec44d24f0a5ac5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78a5a56849b3f72268ee66d8aaec44d24f0a5ac5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78a5a56849b3f72268ee66d8aaec44d24f0a5ac5"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "2974fde11c28b1930c37f380777708df7458540d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8564f92726e23036b8fc7e2848a53df1d07694c5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8564f92726e23036b8fc7e2848a53df1d07694c5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8564f92726e23036b8fc7e2848a53df1d07694c5", "patch": "@@ -1,5 +1,9 @@\n 2012-06-13  Janis Johnson  <janisjo@codesourcery.com>\n \n+\tPR testsuite/20771\n+\t* lib/dg-pch.exp (dg-flags-pch): Add flags to make compile lines in\n+\ttest summary unique.\n+\n \t* lib/scanasm.exp (scan-assembler, scan-assembler-not, scan-hidden,\n \tscan-not-hiddent, scan-file, scan-file-not, scan-stack-usage,\n \tscan-stack-usage-not): Don't strip torture options from test name."}, {"sha": "b1fadabaaf8772fd9da86cc0d30295ffcc59ea42", "filename": "gcc/testsuite/lib/dg-pch.exp", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8564f92726e23036b8fc7e2848a53df1d07694c5/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8564f92726e23036b8fc7e2848a53df1d07694c5/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp?ref=8564f92726e23036b8fc7e2848a53df1d07694c5", "patch": "@@ -50,14 +50,16 @@ proc dg-flags-pch { subdir test otherflags options suffix } {\n \t    # Ensure that the PCH file is used, not the original header.\n \t    file_on_host delete \"$bname$suffix\"\n \n-\t    dg-test -keep-output $test \"$otherflags $flags -I.\" \"\"\n+\t    # The flags \"-Dwith_PCH\" and \"-Dwithout_PCH\" are to distinguish the\n+\t    # two compiles in test summary lines.\n+\t    dg-test -keep-output $test \"$otherflags $flags -I. -Dwith_PCH\" \"\"\n \t    file_on_host delete \"$bname$suffix.gch\"\n \t    if { !$have_errs } {\n \t\tif { [ file_on_host exists \"$bname.s\" ] } {\n \t\t    remote_upload host \"$bname.s\" \"$bname.s-gch\"\n \t\t    remote_download host \"$bname.s-gch\"\n \t\t    gcc_copy_files \"[file rootname $test]${suffix}s\" \"$bname$suffix\"\n-\t\t    dg-test -keep-output $test \"$otherflags $flags -I.\" \"\"\n+\t\t    dg-test -keep-output $test \"$otherflags $flags -I. -Dwithout_PCH\" \"\"\n \t\t    remote_upload host \"$bname.s\"\n \t\t    set tmp [ diff \"$bname.s\" \"$bname.s-gch\" ]\n \t\t    if { $tmp == 0 } {\n@@ -89,4 +91,4 @@ proc dg-flags-pch { subdir test otherflags options suffix } {\n \n proc dg-pch { subdir test options suffix } {\n   return [dg-flags-pch $subdir $test \"\" $options $suffix]\n-}\n\\ No newline at end of file\n+}"}]}