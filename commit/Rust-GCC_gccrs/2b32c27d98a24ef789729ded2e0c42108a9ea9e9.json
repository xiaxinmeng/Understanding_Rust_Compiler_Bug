{"sha": "2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmIzMmMyN2Q5OGEyNGVmNzg5NzI5ZGVkMmUwYzQyMTA4YTllYTllOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-11-13T18:38:36Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-11-13T18:38:36Z"}, "message": "re PR middle-end/42029 (ICE with complex data type and openmp for reduction clause)\n\n\tPR middle-end/42029\n\t* gimplify.c (gimplify_omp_atomic): Set DECL_GIMPLE_REG_P on\n\ttmp_load if needed.\n\n\t* libgomp.c/pr42029.c: New test.\n\nFrom-SVN: r154161", "tree": {"sha": "e4798597eb4798afea5b65f01b820229bfd13985", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4798597eb4798afea5b65f01b820229bfd13985"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/comments", "author": null, "committer": null, "parents": [{"sha": "8410737add10f9f2b70616986a6a173c312b732e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8410737add10f9f2b70616986a6a173c312b732e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8410737add10f9f2b70616986a6a173c312b732e"}], "stats": {"total": 36, "additions": 34, "deletions": 2}, "files": [{"sha": "e5dec6f98a3d56cf2fc928c0c19abe2ea5cf1201", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "patch": "@@ -1,8 +1,14 @@\n+2009-11-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/42029\n+\t* gimplify.c (gimplify_omp_atomic): Set DECL_GIMPLE_REG_P on\n+\ttmp_load if needed.\n+\n 2009-11-13  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/41900\n-\t(*call_pop_1, *call_1, *call_value_pop_1, *call_value_1): Use \"lsm\"\n-\tas operand 1 constraint.\n+\t* config/i386/i386.md (*call_pop_1, *call_1, *call_value_pop_1,\n+\t*call_value_1): Use \"lsm\" as operand 1 constraint.\n \t* config/i386/predicates.md (call_insn_operand): Depend on\n \tindex_register_operand to avoid %esp register.\n "}, {"sha": "8404e0fd13ae7e13ecc44895b004dda7c9b7e629", "filename": "gcc/gimplify.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "patch": "@@ -6231,6 +6231,8 @@ gimplify_omp_atomic (tree *expr_p, gimple_seq *pre_p)\n   tree tmp_load;\n \n    tmp_load = create_tmp_var (type, NULL);\n+   if (TREE_CODE (type) == COMPLEX_TYPE || TREE_CODE (type) == VECTOR_TYPE)\n+     DECL_GIMPLE_REG_P (tmp_load) = 1;\n    if (goa_stabilize_expr (&rhs, pre_p, addr, tmp_load) < 0)\n      return GS_ERROR;\n "}, {"sha": "e36c7e2ca7f7f04aae43bcd696a6093d3fb3a397", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "patch": "@@ -1,3 +1,8 @@\n+2009-11-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/42029\n+\t* libgomp.c/pr42029.c: New test.\n+\n 2009-10-26  Jakub Jelinek  <jakub@redhat.com>\n \n \t* acinclude.m4 (LIBGOMP_CHECK_LINKER_FEATURES): Avoid using too many"}, {"sha": "ea7ac2c0986adb1873d48db96c9ce6054d37c68f", "filename": "libgomp/testsuite/libgomp.c/pr42029.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/libgomp%2Ftestsuite%2Flibgomp.c%2Fpr42029.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b32c27d98a24ef789729ded2e0c42108a9ea9e9/libgomp%2Ftestsuite%2Flibgomp.c%2Fpr42029.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fpr42029.c?ref=2b32c27d98a24ef789729ded2e0c42108a9ea9e9", "patch": "@@ -0,0 +1,19 @@\n+/* PR middle-end/42029 */\n+/* { dg-do run } */\n+\n+extern void abort (void);\n+\n+int\n+main ()\n+{\n+  int i;\n+  _Complex int c = 0;\n+\n+#pragma omp parallel for private(i) reduction(+:c)\n+  for (i = 0; i < 8; ++i)\n+    c += 1;\n+\n+  if (c != 8)\n+    abort ();\n+  return 0;\n+}"}]}