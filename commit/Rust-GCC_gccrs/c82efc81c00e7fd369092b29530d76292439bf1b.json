{"sha": "c82efc81c00e7fd369092b29530d76292439bf1b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzgyZWZjODFjMDBlN2ZkMzY5MDkyYjI5NTMwZDc2MjkyNDM5YmYxYg==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2002-07-25T06:42:00Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2002-07-25T06:42:00Z"}, "message": "re PR libstdc++/7222 (g++ 3.1: locale::operator ==() doesn`t work on std::locale(\"\") locales)\n\n\n2002-07-24  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/7222\n\t* src/locale.cc (locale::locale(const char*)): Use setlocale NULL.\n\t* testsuite/22_locale/ctor_copy_dtor.cc (test02): New.\n\nFrom-SVN: r55736", "tree": {"sha": "8717293afa4553fea5016ea02535d17ae2a0e3d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8717293afa4553fea5016ea02535d17ae2a0e3d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c82efc81c00e7fd369092b29530d76292439bf1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c82efc81c00e7fd369092b29530d76292439bf1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c82efc81c00e7fd369092b29530d76292439bf1b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c82efc81c00e7fd369092b29530d76292439bf1b/comments", "author": null, "committer": null, "parents": [{"sha": "2be2ac706e998c7383115f5b6c56412233f7b587", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2be2ac706e998c7383115f5b6c56412233f7b587", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2be2ac706e998c7383115f5b6c56412233f7b587"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "f91fa787354cfe9253905449fa738e70f32eafc5", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c82efc81c00e7fd369092b29530d76292439bf1b/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c82efc81c00e7fd369092b29530d76292439bf1b/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c82efc81c00e7fd369092b29530d76292439bf1b", "patch": "@@ -1,3 +1,9 @@\n+2002-07-24  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/7222\n+\t* src/locale.cc (locale::locale(const char*)): Use setlocale NULL.\n+\t* testsuite/22_locale/ctor_copy_dtor.cc (test02): New.\n+\t\n 2002-07-24  Benjamin Kosnik  <bkoz@redhat.com>\n \n \tPR libstdc++/7230"}, {"sha": "3cb9d1b4cbfd1f569b700add610f38263c66b364", "filename": "libstdc++-v3/src/locale.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c82efc81c00e7fd369092b29530d76292439bf1b/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c82efc81c00e7fd369092b29530d76292439bf1b/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc?ref=c82efc81c00e7fd369092b29530d76292439bf1b", "patch": "@@ -202,7 +202,7 @@ namespace std\n \tif (strcmp(__s, \"C\") == 0 || strcmp(__s, \"POSIX\") == 0)\n \t  (_M_impl = _S_classic)->_M_add_reference();\n \telse if (strcmp(__s, \"\") == 0)\n-\t  _M_impl = new _Impl(setlocale(LC_ALL, __s), 1);\n+\t  _M_impl = new _Impl(setlocale(LC_ALL, NULL), 1);\n \telse\n \t  _M_impl = new _Impl(__s, 1);\n       }"}, {"sha": "732ec1714aa23b6ae6dc638ce4f1a775b1835ffe", "filename": "libstdc++-v3/testsuite/22_locale/ctor_copy_dtor.cc", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c82efc81c00e7fd369092b29530d76292439bf1b/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Fctor_copy_dtor.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c82efc81c00e7fd369092b29530d76292439bf1b/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Fctor_copy_dtor.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Fctor_copy_dtor.cc?ref=c82efc81c00e7fd369092b29530d76292439bf1b", "patch": "@@ -25,7 +25,6 @@\n #include <stdexcept>\n #include <testsuite_hooks.h>\n \n-\n void test00()\n {\n   // Should be able to do this as the first thing that happens in a\n@@ -238,13 +237,29 @@ void test01()\n }\n #endif // _GLIBCPP_USE___ENC_TRAITS\n \n-int main ()\n+// libstdc++/7222\n+void test02()\n+{\n+  bool test = true;\n+  std::locale loc_c1(\"C\");\n+  std::locale loc_c2 (\"C\");\n+  \n+  std::locale loc_1(\"\");\n+  std::locale loc_2(\"\");\n+\n+  VERIFY( loc_c1 == loc_c2 );\n+  VERIFY( loc_1 == loc_2 );\n+}\n+\n+int main()\n {\n   test00();\n \n #if _GLIBCPP_USE___ENC_TRAITS\n   test01();\n #endif \n \n+  test02();\n+\n   return 0;\n }"}]}