{"sha": "16db96c5a21562edf1bc435449e519253ca7a37d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTZkYjk2YzVhMjE1NjJlZGYxYmM0MzU0NDllNTE5MjUzY2E3YTM3ZA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-01-03T15:37:33Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-01-03T15:37:33Z"}, "message": "exp_dist.adb: Declare subprogram index in Build_RPC_Receiver_Body...\n\n\t* exp_dist.adb:\n\tDeclare subprogram index in Build_RPC_Receiver_Body, to reduce the\n\tamount of PCS-specific code in RACW stubs generation.\n\t(Copy_Specification): Set Etype on copied formal parameter entities, as\n\tthis information is needed for PolyORB stubs generation.\n\t(PolyORB_Support.Build_Subprogram_Receiving_Stubs): Remove unused\n\tvariable Dynamic_Async.\n\t(Build_Subprogram_Receiving_Stubs): Make PCS-specific\n\t(Build_RPC_Receiver_Specification): Make generic again, as recent\n\tchanges have allowed RPC receivers to have the same profile for both\n\tvariants of the PCS.\n\tReorganise RPC receiver generation to reduce differences between the\n\tstructure of GARLIC and PolyORB RPC receivers.\n\t(Add_Receiving_Stubs_To_Declarations): Make this subprogram\n\tPCS-specific.\n\tSimplify elaboration code for RCI packages.\n\n\t* s-parint.ads, s-parint.adb, rtsfind.ads: Reorganise RPC receiver\n\tgeneration to reduce differences between the structure of GARLIC and\n\tPolyORB RPC receivers.\n\n\t* s-stratt.adb: Fix typo in comment.\n\nFrom-SVN: r92837", "tree": {"sha": "5e000a55efc0822988383d971a8b00fa7a96fab1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e000a55efc0822988383d971a8b00fa7a96fab1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/16db96c5a21562edf1bc435449e519253ca7a37d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16db96c5a21562edf1bc435449e519253ca7a37d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16db96c5a21562edf1bc435449e519253ca7a37d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16db96c5a21562edf1bc435449e519253ca7a37d/comments", "author": null, "committer": null, "parents": [{"sha": "a778d033f9229cc036805510c646cfc50d9f12a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a778d033f9229cc036805510c646cfc50d9f12a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a778d033f9229cc036805510c646cfc50d9f12a7"}], "stats": {"total": 3924, "additions": 2509, "deletions": 1415}, "files": [{"sha": "63c6d3cb21f03947c79c7b1d0bb51919b9849423", "filename": "gcc/ada/exp_dist.adb", "status": "modified", "additions": 2487, "deletions": 1409, "changes": 3896, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fexp_dist.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fexp_dist.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_dist.adb?ref=16db96c5a21562edf1bc435449e519253ca7a37d"}, {"sha": "2faf0b91b703150beaa0ba985799023b46df7092", "filename": "gcc/ada/rtsfind.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Frtsfind.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Frtsfind.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frtsfind.ads?ref=16db96c5a21562edf1bc435449e519253ca7a37d", "patch": "@@ -1017,6 +1017,7 @@ package Rtsfind is\n      RE_Raise_Program_Error_Unknown_Tag, -- System.Partition_Interface\n      RE_Register_Passive_Package,        -- System.Partition_Interface\n      RE_Register_Receiving_Stub,         -- System.Partition_Interface\n+     RE_Request_Access,                  -- System.Partition_Interface\n      RE_RCI_Locator,                     -- System.Partition_Interface\n      RE_RCI_Subp_Info,                   -- System.Partition_Interface\n      RE_RCI_Subp_Info_Array,             -- System.Partition_Interface\n@@ -1056,7 +1057,6 @@ package Rtsfind is\n      RE_NVList_Ref,                      -- System.PolyORB_Interface\n      RE_NVList_Create,                   -- System.PolyORB_Interface\n      RE_NVList_Add_Item,                 -- System.PolyORB_Interface\n-     RE_Request_Access,                  -- System.PolyORB_Interface\n      RE_Request_Create,                  -- System.PolyORB_Interface\n      RE_Request_Invoke,                  -- System.PolyORB_Interface\n      RE_Request_Arguments,               -- System.PolyORB_Interface\n@@ -2098,6 +2098,7 @@ package Rtsfind is\n      RE_Raise_Program_Error_Unknown_Tag  => System_Partition_Interface,\n      RE_Register_Passive_Package         => System_Partition_Interface,\n      RE_Register_Receiving_Stub          => System_Partition_Interface,\n+     RE_Request_Access                   => System_Partition_Interface,\n      RE_RCI_Locator                      => System_Partition_Interface,\n      RE_RCI_Subp_Info                    => System_Partition_Interface,\n      RE_RCI_Subp_Info_Array              => System_Partition_Interface,\n@@ -2127,7 +2128,6 @@ package Rtsfind is\n      RE_NVList_Ref                       => System_PolyORB_Interface,\n      RE_NVList_Create                    => System_PolyORB_Interface,\n      RE_NVList_Add_Item                  => System_PolyORB_Interface,\n-     RE_Request_Access                   => System_PolyORB_Interface,\n      RE_Request_Create                   => System_PolyORB_Interface,\n      RE_Request_Invoke                   => System_PolyORB_Interface,\n      RE_Request_Arguments                => System_PolyORB_Interface,"}, {"sha": "9c8808dce40b9cde7a80bc012c83f37dadec71ca", "filename": "gcc/ada/s-parint.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fs-parint.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fs-parint.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-parint.adb?ref=16db96c5a21562edf1bc435449e519253ca7a37d", "patch": "@@ -275,7 +275,7 @@ package body System.Partition_Interface is\n \n    procedure Register_Receiving_Stub\n      (Name          : Unit_Name;\n-      Receiver      : RPC.RPC_Receiver;\n+      Receiver      : RPC_Receiver;\n       Version       : String := \"\";\n       Subp_Info     : System.Address;\n       Subp_Info_Len : Integer)"}, {"sha": "2216514c72d299903e1829302b09d380b0d2147f", "filename": "gcc/ada/s-parint.ads", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fs-parint.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fs-parint.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-parint.ads?ref=16db96c5a21562edf1bc435449e519253ca7a37d", "patch": "@@ -35,6 +35,7 @@\n --  an appropriate WITH, and the interface can be expected to remain stable.\n \n with Ada.Exceptions;\n+with Ada.Streams;\n with Interfaces;\n with System.RPC;\n \n@@ -89,6 +90,20 @@ package System.Partition_Interface is\n    --  Do not change its definition or its layout without updating\n    --  Exp_Dist.Build_Remote_Supbrogram_Proxy_Type.\n \n+   --  The Request_Access type is used for communication between the PCS\n+   --  and the RPC receiver generated by the compiler: it contains all the\n+   --  necessary information for the receiver to process an incoming call.\n+\n+   type RST_Access is access all Ada.Streams.Root_Stream_Type'Class;\n+   type Request_Access is record\n+      Params : RST_Access;\n+      --  A stream describing the called subprogram and its parameters\n+\n+      Result : RST_Access;\n+      --  A stream where the result, raised exception, or out values,\n+      --  are marshalled.\n+   end record;\n+\n    procedure Check\n      (Name    : Unit_Name;\n       Version : String;\n@@ -131,9 +146,10 @@ package System.Partition_Interface is\n    pragma No_Return (Raise_Program_Error_Unknown_Tag);\n    --  Raise Program_Error with the same message as E one\n \n+   type RPC_Receiver is access procedure (R : Request_Access);\n    procedure Register_Receiving_Stub\n      (Name          : Unit_Name;\n-      Receiver      : RPC.RPC_Receiver;\n+      Receiver      : RPC_Receiver;\n       Version       : String := \"\";\n       Subp_Info     : System.Address;\n       Subp_Info_Len : Integer);"}, {"sha": "91fec45d15379e3a013555556f1a0c833fad4475", "filename": "gcc/ada/s-stratt.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fs-stratt.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db96c5a21562edf1bc435449e519253ca7a37d/gcc%2Fada%2Fs-stratt.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-stratt.adb?ref=16db96c5a21562edf1bc435449e519253ca7a37d", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2003, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2004, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -39,7 +39,7 @@ package body System.Stream_Attributes is\n \n    Err : exception renames Ada.IO_Exceptions.End_Error;\n    --  Exception raised if insufficient data read (note that the RM implies\n-   --  that Data_Error might be the appropriate choice, but AI195-00132\n+   --  that Data_Error might be the appropriate choice, but AI95-00132\n    --  decides with a binding interpretation that End_Error is preferred).\n \n    SU : constant := System.Storage_Unit;"}]}