{"sha": "90488014d0af2874555595f4474e095a75b115e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTA0ODgwMTRkMGFmMjg3NDU1NTU5NWY0NDc0ZTA5NWE3NWIxMTVlNw==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2011-02-07T23:51:54Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2011-02-07T23:51:54Z"}, "message": "config.gcc (hppa[12]*-*-hpux11*): Don't set extra_parts.\n\n\t* config.gcc (hppa[12]*-*-hpux11*): Don't set extra_parts.\n\t* config/pa/stublib.c (pthread_default_stacksize_np, pthread_mutex_lock,\n\tpthread_mutex_unlock): Remove.\n\t* config/pa/t-pa-hpux11: Remove rules to build pthread stubs.\n\t* config/pa/t-pa64: Likewise.\n\t* config/pa/pa64-hpux.h (LIB_SPEC): In static links, link against\n\tshared libc if not linking against libpthread.\n\t* config/pa/pa-hpux11.h (LIB_SPEC): Likewise.\n\nFrom-SVN: r169906", "tree": {"sha": "d82bbc8c37153f9bab1265db9da2422f6e50fa28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d82bbc8c37153f9bab1265db9da2422f6e50fa28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90488014d0af2874555595f4474e095a75b115e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90488014d0af2874555595f4474e095a75b115e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90488014d0af2874555595f4474e095a75b115e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90488014d0af2874555595f4474e095a75b115e7/comments", "author": null, "committer": null, "parents": [{"sha": "689ff841b4de850cb9f31fad4e9a217b682b593f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/689ff841b4de850cb9f31fad4e9a217b682b593f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/689ff841b4de850cb9f31fad4e9a217b682b593f"}], "stats": {"total": 117, "additions": 30, "deletions": 87}, "files": [{"sha": "a239eca2a041334660bdcecab8bff36aee0547e6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90488014d0af2874555595f4474e095a75b115e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90488014d0af2874555595f4474e095a75b115e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=90488014d0af2874555595f4474e095a75b115e7", "patch": "@@ -1,3 +1,14 @@\n+2011-02-07  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* config.gcc (hppa[12]*-*-hpux11*): Don't set extra_parts.\n+\t* config/pa/stublib.c (pthread_default_stacksize_np, pthread_mutex_lock,\n+\tpthread_mutex_unlock): Remove.\n+\t* config/pa/t-pa-hpux11: Remove rules to build pthread stubs.\n+\t* config/pa/t-pa64: Likewise.\n+\t* config/pa/pa64-hpux.h (LIB_SPEC): In static links, link against\n+\tshared libc if not linking against libpthread.\n+\t* config/pa/pa-hpux11.h (LIB_SPEC): Likewise.\n+\n 2011-02-07  Iain Sandoe  <iains@gcc.gnu.org>\n \n \tPR target/47558"}, {"sha": "c11b85477cd4fbc1efabf450fa8d45b50c4abc4d", "filename": "gcc/config.gcc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=90488014d0af2874555595f4474e095a75b115e7", "patch": "@@ -1140,7 +1140,6 @@ hppa[12]*-*-hpux11*)\n \telse\n \t    tmake_file=\"$tmake_file pa/t-slibgcc-dwarf-ver\"\n \tfi\n-\textra_parts=\"libgcc_stub.a\"\n \tcase x${enable_threads} in\n \tx | xyes | xposix )\n \t\tthread_file=posix"}, {"sha": "b0fc868a104e40477dfbfd02fc659161150e1fb5", "filename": "gcc/config/pa/pa-hpux11.h", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h?ref=90488014d0af2874555595f4474e095a75b115e7", "patch": "@@ -114,23 +114,19 @@ along with GCC; see the file COPYING3.  If not see\n    -z %{mlinker-opt:-O} %{!shared:-u main -u __gcc_plt_call}\\\n    %{static:-a archive} %{shared:-b}\"\n \n-/* HP-UX 11 has posix threads.  HP libc contains pthread stubs so that\n-   non-threaded applications can be linked with a thread-safe libc\n-   without a subsequent loss of performance.  For more details, see\n-   <http://docs.hp.com/en/1896/pthreads.html>.  */\n+/* HP-UX 11 has posix threads.  HP's shared libc contains pthread stubs\n+   so that non-threaded applications can be linked with a thread-safe\n+   libc without a subsequent loss of performance.  For more details,\n+   see <http://docs.hp.com/en/1896/pthreads.html>.  */\n #undef LIB_SPEC\n #define LIB_SPEC \\\n   \"%{!shared:\\\n      %{fopenmp:%{static:-a archive_shared} -lrt %{static:-a archive}}\\\n      %{mt|pthread:-lpthread} -lc\\\n-     %{static:%{!nolibdld:-a archive_shared -ldld -a archive -lc}}}\\\n+     %{static:%{!nolibdld:-a archive_shared -ldld -a archive -lc}\\\n+       %{!mt:%{!pthread:-a shared -lc -a archive}}}}\\\n    %{shared:%{mt|pthread:-lpthread}}\"\n \n-/* The libgcc_stub.a library needs to come last.  */\n-#undef LINK_GCC_C_SEQUENCE_SPEC\n-#define LINK_GCC_C_SEQUENCE_SPEC \\\n-  \"%G %L %G %{!nostdlib:%{!nodefaultlibs:%{!shared:-lgcc_stub}}}\"\n-\n #undef STARTFILE_SPEC\n #define STARTFILE_SPEC \\\n   \"%{!shared:%{pg:gcrt0%O%s}%{!pg:%{p:mcrt0%O%s}%{!p:crt0%O%s}} \\"}, {"sha": "cc9724a6e7ebbb5b22ba31d78306fe6f52531a84", "filename": "gcc/config/pa/pa64-hpux.h", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h?ref=90488014d0af2874555595f4474e095a75b115e7", "patch": "@@ -61,34 +61,40 @@ along with GCC; see the file COPYING3.  If not see\n   \"%{!shared:\\\n      %{!p:%{!pg:%{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n \t    %{mt|pthread:-lpthread} -lc\\\n-\t    %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+\t    %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n+\t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{p:%{!pg:%{static:%{!mhp-ld:-a shared}%{mhp-ld:-a archive_shared}}\\\n \t   -lprof %{static:-a archive}\\\n \t   %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n \t   %{mt|pthread:-lpthread} -lc\\\n-\t   %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+\t   %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n+\t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{pg:%{static:%{!mhp-ld:-a shared}%{mhp-ld:-a archive_shared}}\\\n        -lgprof %{static:-a archive}\\\n        %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n        %{mt|pthread:-lpthread} -lc\\\n-       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n+\t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n    %{shared:%{mt|pthread:-lpthread}}\"\n #else\n #define LIB_SPEC \\\n   \"%{!shared:\\\n      %{!p:%{!pg:%{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n \t    %{mt|pthread:-lpthread} -lc\\\n-\t    %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+\t    %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n+\t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{p:%{!pg:%{static:%{mgnu-ld:-a shared}%{!mgnu-ld:-a archive_shared}}\\\n \t   -lprof %{static:-a archive}\\\n \t   %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n \t   %{mt|pthread:-lpthread} -lc\\\n-\t   %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+\t   %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n+\t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{pg:%{static:%{mgnu-ld:-a shared}%{!mgnu-ld:-a archive_shared}}\\\n        -lgprof %{static:-a archive}\\\n        %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n        %{mt|pthread:-lpthread} -lc\\\n-       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n+\t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n    %{shared:%{mt|pthread:-lpthread}}\"\n #endif\n "}, {"sha": "288645a37721818f4c40a1d7368f64346b01c06c", "filename": "gcc/config/pa/stublib.c", "status": "modified", "additions": 0, "deletions": 30, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Fstublib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Fstublib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fstublib.c?ref=90488014d0af2874555595f4474e095a75b115e7", "patch": "@@ -56,33 +56,3 @@ _Jv_RegisterClasses (void *p)\n {\n }\n #endif\n-\n-#ifdef L_pthread_default_stacksize_np\n-int pthread_default_stacksize_np (unsigned long __attribute__((unused)),\n-\t\t\t\t  unsigned long *);\n-int\n-pthread_default_stacksize_np (unsigned long new, unsigned long *old)\n-{\n-  if (old)\n-    *old = 0;\n-  return 0;\n-}\n-#endif\n-\n-#ifdef L_pthread_mutex_lock\n-int pthread_mutex_lock (void * __attribute__((unused)));\n-int\n-pthread_mutex_lock (void *p)\n-{\n-  return 0;\n-}\n-#endif\n-\n-#ifdef L_pthread_mutex_unlock\n-int pthread_mutex_unlock (void * __attribute__((unused)));\n-int\n-pthread_mutex_unlock (void *p)\n-{\n-  return 0;\n-}\n-#endif"}, {"sha": "2773828ac39f194b7d5c7e4577257f6258efb8ed", "filename": "gcc/config/pa/t-pa-hpux11", "status": "modified", "additions": 0, "deletions": 24, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Ft-pa-hpux11", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Ft-pa-hpux11", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Ft-pa-hpux11?ref=90488014d0af2874555595f4474e095a75b115e7", "patch": "@@ -1,26 +1,2 @@\n TARGET_LIBGCC2_CFLAGS = -fPIC -frandom-seed=fixed-seed\n LIB2FUNCS_EXTRA=lib2funcs.asm quadlib.c\n-LIBGCCSTUB_OBJS = pthread_default_stacksize_np-stub.o \\\n-\tpthread_mutex_lock-stub.o \\\n-\tpthread_mutex_unlock-stub.o\n-\n-stublib.c: $(srcdir)/config/pa/stublib.c\n-\trm -f stublib.c\n-\tcp $(srcdir)/config/pa/stublib.c .\n-\n-pthread_default_stacksize_np-stub.o: stublib.c $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_default_stacksize_np stublib.c \\\n-\t  -o pthread_default_stacksize_np-stub.o\n-\n-pthread_mutex_lock-stub.o: stublib.c $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_lock stublib.c \\\n-\t  -o pthread_mutex_lock-stub.o\n-\n-pthread_mutex_unlock-stub.o: stublib.c $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_unlock stublib.c \\\n-\t  -o pthread_mutex_unlock-stub.o\n-\n-$(T)libgcc_stub.a: $(LIBGCCSTUB_OBJS)\n-\t-rm -rf $(T)libgcc_stub.a\n-\t$(AR) rc $(T)libgcc_stub.a $(LIBGCCSTUB_OBJS)\n-\t$(RANLIB) $(T)libgcc_stub.a"}, {"sha": "488c4d55308f48f67d8b15c6c89eda1abbcf5fd7", "filename": "gcc/config/pa/t-pa64", "status": "modified", "additions": 1, "deletions": 16, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Ft-pa64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90488014d0af2874555595f4474e095a75b115e7/gcc%2Fconfig%2Fpa%2Ft-pa64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Ft-pa64?ref=90488014d0af2874555595f4474e095a75b115e7", "patch": "@@ -19,10 +19,7 @@\n \n TARGET_LIBGCC2_CFLAGS = -fPIC -Dpa64=1 -DELF=1 -mlong-calls\n LIB2FUNCS_EXTRA = quadlib.c\n-LIBGCCSTUB_OBJS = rfi-stub.o dfi-stub.o jvrc-stub.o cxaf-stub.o \\\n-\tpthread_default_stacksize_np-stub.o \\\n-\tpthread_mutex_lock-stub.o \\\n-\tpthread_mutex_unlock-stub.o\n+LIBGCCSTUB_OBJS = rfi-stub.o dfi-stub.o jvrc-stub.o cxaf-stub.o\n \n stublib.c: $(srcdir)/config/pa/stublib.c\n \trm -f stublib.c\n@@ -44,18 +41,6 @@ jvrc-stub.o: stublib.c $(GCC_PASSES)\n \t$(GCC_FOR_TARGET) -c -O2 -DL_Jv_RegisterClasses stublib.c \\\n \t  -o jvrc-stub.o\n \n-pthread_default_stacksize_np-stub.o: stublib.c $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_default_stacksize_np stublib.c \\\n-\t  -o pthread_default_stacksize_np-stub.o\n-\n-pthread_mutex_lock-stub.o: stublib.c $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_lock stublib.c \\\n-\t  -o pthread_mutex_lock-stub.o\n-\n-pthread_mutex_unlock-stub.o: stublib.c $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_unlock stublib.c \\\n-\t  -o pthread_mutex_unlock-stub.o\n-\n $(T)libgcc_stub.a: $(LIBGCCSTUB_OBJS)\n \t-rm -rf $(T)libgcc_stub.a\n \t$(AR) rc $(T)libgcc_stub.a $(LIBGCCSTUB_OBJS)"}]}