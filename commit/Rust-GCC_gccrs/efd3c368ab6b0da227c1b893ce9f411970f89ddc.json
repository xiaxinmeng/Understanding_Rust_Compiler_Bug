{"sha": "efd3c368ab6b0da227c1b893ce9f411970f89ddc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWZkM2MzNjhhYjZiMGRhMjI3YzFiODkzY2U5ZjQxMTk3MGY4OWRkYw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-18T15:39:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-18T15:39:59Z"}, "message": "Update comments\n\nFrom-SVN: r212819", "tree": {"sha": "6d2ffd86097ca457f66f3642d1694c3220e33e48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d2ffd86097ca457f66f3642d1694c3220e33e48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/efd3c368ab6b0da227c1b893ce9f411970f89ddc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efd3c368ab6b0da227c1b893ce9f411970f89ddc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efd3c368ab6b0da227c1b893ce9f411970f89ddc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efd3c368ab6b0da227c1b893ce9f411970f89ddc/comments", "author": null, "committer": null, "parents": [{"sha": "4b03d946237dd6a6953dd1337043cd9eb8e7fbcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b03d946237dd6a6953dd1337043cd9eb8e7fbcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b03d946237dd6a6953dd1337043cd9eb8e7fbcb"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "099bbd74d10addc82e6e4e1c47acffdf2513d8b9", "filename": "gcc/ada/sem_ch7.adb", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efd3c368ab6b0da227c1b893ce9f411970f89ddc/gcc%2Fada%2Fsem_ch7.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efd3c368ab6b0da227c1b893ce9f411970f89ddc/gcc%2Fada%2Fsem_ch7.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch7.adb?ref=efd3c368ab6b0da227c1b893ce9f411970f89ddc", "patch": "@@ -184,6 +184,11 @@ package body Sem_Ch7 is\n       Prag    : Node_Id;\n \n    begin\n+      --  Due to the timing of contract analysis, delayed pragmas may be\n+      --  subject to the wrong SPARK_Mode, usually that of the enclosing\n+      --  context. To remedy this, restore the original SPARK_Mode of the\n+      --  related package body.\n+\n       Save_SPARK_Mode_And_Set (Body_Id, Mode);\n \n       Prag := Get_Pragma (Body_Id, Pragma_Refined_State);\n@@ -204,6 +209,9 @@ package body Sem_Ch7 is\n          Error_Msg_N (\"package & requires state refinement\", Spec_Id);\n       end if;\n \n+      --  Restore the SPARK_Mode of the enclosing context after all delayed\n+      --  pragmas have been analyzed.\n+\n       Restore_SPARK_Mode (Mode);\n    end Analyze_Package_Body_Contract;\n \n@@ -848,6 +856,11 @@ package body Sem_Ch7 is\n       Prag : Node_Id;\n \n    begin\n+      --  Due to the timing of contract analysis, delayed pragmas may be\n+      --  subject to the wrong SPARK_Mode, usually that of the enclosing\n+      --  context. To remedy this, restore the original SPARK_Mode of the\n+      --  related package.\n+\n       Save_SPARK_Mode_And_Set (Pack_Id, Mode);\n \n       --  Analyze the initialization related pragmas. Initializes must come\n@@ -876,6 +889,9 @@ package body Sem_Ch7 is\n          end if;\n       end if;\n \n+      --  Restore the SPARK_Mode of the enclosing context after all delayed\n+      --  pragmas have been analyzed.\n+\n       Restore_SPARK_Mode (Mode);\n    end Analyze_Package_Contract;\n "}]}