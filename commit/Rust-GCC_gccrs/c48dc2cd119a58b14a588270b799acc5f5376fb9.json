{"sha": "c48dc2cd119a58b14a588270b799acc5f5376fb9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ4ZGMyY2QxMTlhNThiMTRhNTg4MjcwYjc5OWFjYzVmNTM3NmZiOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-01-25T11:54:36Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-01-25T11:54:36Z"}, "message": "re PR other/79046 (g++ -print-file-name=plugin uses full version number in path)\n\n\tPR other/79046\n\t* configure.ac: Add GCC_BASE_VER.\n\t* Makefile.am (gcc_version): Use @get_gcc_base_ver@ instead of cat to\n\tget version from BASE-VER file.\n\t(ACLOCAL_AMFLAGS): Set to -I .. -I ../config .\n\t* aclocal.m4: Regenerated.\n\t* configure: Regenerated.\n\t* Makefile.in: Regenerated.\n\nFrom-SVN: r244895", "tree": {"sha": "883f389d84cdd21fa74413da753f0d2de9436fe2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/883f389d84cdd21fa74413da753f0d2de9436fe2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c48dc2cd119a58b14a588270b799acc5f5376fb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c48dc2cd119a58b14a588270b799acc5f5376fb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c48dc2cd119a58b14a588270b799acc5f5376fb9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c48dc2cd119a58b14a588270b799acc5f5376fb9/comments", "author": null, "committer": null, "parents": [{"sha": "9aa483a2d87e2d1a5d976ddf9ecd6352d8eebf9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9aa483a2d87e2d1a5d976ddf9ecd6352d8eebf9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9aa483a2d87e2d1a5d976ddf9ecd6352d8eebf9e"}], "stats": {"total": 165, "additions": 112, "deletions": 53}, "files": [{"sha": "8264c31638465f61773e4a3bfab95e2189b8a0f2", "filename": "libhsail-rt/ChangeLog", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2FChangeLog?ref=c48dc2cd119a58b14a588270b799acc5f5376fb9", "patch": "@@ -1,4 +1,15 @@\n-2017-01-24  Pekka J\u00e4\u00e4skel\u00e4inen <pekka@parmance.com>\n+2017-01-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR other/79046\n+\t* configure.ac: Add GCC_BASE_VER.\n+\t* Makefile.am (gcc_version): Use @get_gcc_base_ver@ instead of cat to\n+\tget version from BASE-VER file.\n+\t(ACLOCAL_AMFLAGS): Set to -I .. -I ../config .\n+\t* aclocal.m4: Regenerated.\n+\t* configure: Regenerated.\n+\t* Makefile.in: Regenerated.\n+\n+2017-01-24  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka@parmance.com>\n \t    Martin Jambor  <mjambor@suse.cz>\n \n \t* Makefile.am: New file."}, {"sha": "e85427e3eaba5b293be6438afd45ed5b1b139b2d", "filename": "libhsail-rt/Makefile.am", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2FMakefile.am?ref=c48dc2cd119a58b14a588270b799acc5f5376fb9", "patch": "@@ -44,13 +44,13 @@\n \n AUTOMAKE_OPTIONS = foreign subdir-objects\n \n-gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n \n MAINT_CHARSET = latin1\n \n mkinstalldirs = $(SHELL) $(toplevel_srcdir)/mkinstalldirs\n \n-ACLOCAL_AMFLAGS = -I m4\n+ACLOCAL_AMFLAGS = -I .. -I ../config\n \n WARN_CFLAGS = $(WARN_FLAGS) $(WERROR)\n \n@@ -120,5 +120,3 @@ AM_MAKEFLAGS = \\\n        \"DESTDIR=$(DESTDIR)\"\n \n MAKEOVERRIDES=\n-\n-"}, {"sha": "528cdb0b423a2bb37571d41e04329db0e25aa6c0", "filename": "libhsail-rt/Makefile.in", "status": "modified", "additions": 13, "deletions": 11, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2FMakefile.in?ref=c48dc2cd119a58b14a588270b799acc5f5376fb9", "patch": "@@ -97,17 +97,18 @@ build_triplet = @build@\n host_triplet = @host@\n target_triplet = @target@\n subdir = .\n-DIST_COMMON = README $(srcdir)/Makefile.in $(srcdir)/Makefile.am \\\n-\t$(top_srcdir)/configure $(am__configure_deps) \\\n-\t$(srcdir)/target-config.h.in $(srcdir)/../mkinstalldirs \\\n-\t$(srcdir)/../depcomp\n+DIST_COMMON = README ChangeLog $(srcdir)/Makefile.in \\\n+\t$(srcdir)/Makefile.am $(top_srcdir)/configure \\\n+\t$(am__configure_deps) $(srcdir)/target-config.h.in \\\n+\t$(srcdir)/../mkinstalldirs $(srcdir)/../depcomp\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n-am__aclocal_m4_deps = $(top_srcdir)/../config/depstand.m4 \\\n+am__aclocal_m4_deps = $(top_srcdir)/../config/acx.m4 \\\n+\t$(top_srcdir)/../config/depstand.m4 \\\n \t$(top_srcdir)/../config/lead-dot.m4 \\\n-\t$(top_srcdir)/../config/multi.m4 $(top_srcdir)/../libtool.m4 \\\n-\t$(top_srcdir)/../ltoptions.m4 $(top_srcdir)/../ltsugar.m4 \\\n-\t$(top_srcdir)/../ltversion.m4 $(top_srcdir)/../lt~obsolete.m4 \\\n-\t$(top_srcdir)/configure.ac\n+\t$(top_srcdir)/../config/override.m4 \\\n+\t$(top_srcdir)/../libtool.m4 $(top_srcdir)/../ltoptions.m4 \\\n+\t$(top_srcdir)/../ltsugar.m4 $(top_srcdir)/../ltversion.m4 \\\n+\t$(top_srcdir)/../lt~obsolete.m4 $(top_srcdir)/configure.ac\n am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n \t$(ACLOCAL_M4)\n am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \\\n@@ -265,6 +266,7 @@ datarootdir = @datarootdir@\n docdir = @docdir@\n dvidir = @dvidir@\n exec_prefix = @exec_prefix@\n+get_gcc_base_ver = @get_gcc_base_ver@\n host = @host@\n host_alias = @host_alias@\n host_cpu = @host_cpu@\n@@ -300,10 +302,10 @@ top_build_prefix = @top_build_prefix@\n top_builddir = @top_builddir@\n top_srcdir = @top_srcdir@\n AUTOMAKE_OPTIONS = foreign subdir-objects\n-gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)\n+gcc_version := $(shell @get_gcc_base_ver@ $(top_srcdir)/../gcc/BASE-VER)\n MAINT_CHARSET = latin1\n mkinstalldirs = $(SHELL) $(toplevel_srcdir)/mkinstalldirs\n-ACLOCAL_AMFLAGS = -I m4\n+ACLOCAL_AMFLAGS = -I .. -I ../config\n WARN_CFLAGS = $(WARN_FLAGS) $(WERROR)\n \n # -I/-D flags to pass when compiling."}, {"sha": "505744c695a226ee582ddfaa86a7db541954aa0e", "filename": "libhsail-rt/aclocal.m4", "status": "modified", "additions": 47, "deletions": 26, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Faclocal.m4?ref=c48dc2cd119a58b14a588270b799acc5f5376fb9", "patch": "@@ -1,7 +1,8 @@\n-# generated automatically by aclocal 1.11.1 -*- Autoconf -*-\n+# generated automatically by aclocal 1.11.6 -*- Autoconf -*-\n \n # Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,\n-# 2005, 2006, 2007, 2008, 2009  Free Software Foundation, Inc.\n+# 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free Software Foundation,\n+# Inc.\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n@@ -19,12 +20,15 @@ You have another version of autoconf.  It may work, but is not guaranteed to.\n If you have problems, you may need to regenerate the build system entirely.\n To do so, use the procedure documented by the package, typically `autoreconf'.])])\n \n-# Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.\n+# Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008, 2011 Free Software\n+# Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n+# serial 1\n+\n # AM_AUTOMAKE_VERSION(VERSION)\n # ----------------------------\n # Automake X.Y traces this macro to ensure aclocal.m4 has been\n@@ -57,12 +61,14 @@ _AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])\n \n # AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-\n \n-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.\n+# Copyright (C) 2001, 2003, 2005, 2011 Free Software Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n+# serial 1\n+\n # For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets\n # $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to\n # `$srcdir', `$srcdir/..', or `$srcdir/../..'.\n@@ -144,14 +150,14 @@ AC_CONFIG_COMMANDS_PRE(\n Usually this means the macro was only invoked conditionally.]])\n fi])])\n \n-# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2009\n-# Free Software Foundation, Inc.\n+# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2009,\n+# 2010, 2011 Free Software Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n-# serial 10\n+# serial 12\n \n # There are a few dirty hacks below to avoid letting `AC_PROG_CC' be\n # written in clear, in which case automake, when reading aclocal.m4,\n@@ -191,6 +197,7 @@ AC_CACHE_CHECK([dependency style of $depcc],\n   # instance it was reported that on HP-UX the gcc test will end up\n   # making a dummy file named `D' -- because `-MD' means `put the output\n   # in D'.\n+  rm -rf conftest.dir\n   mkdir conftest.dir\n   # Copy depcomp to subdir because otherwise we won't find it if we're\n   # using a relative directory.\n@@ -255,7 +262,7 @@ AC_CACHE_CHECK([dependency style of $depcc],\n \tbreak\n       fi\n       ;;\n-    msvisualcpp | msvcmsys)\n+    msvc7 | msvc7msys | msvisualcpp | msvcmsys)\n       # This compiler won't grok `-c -o', but also, the minuso test has\n       # not run yet.  These depmodes are late enough in the game, and\n       # so weak that their functioning should not be impacted.\n@@ -320,10 +327,13 @@ AC_DEFUN([AM_DEP_TRACK],\n if test \"x$enable_dependency_tracking\" != xno; then\n   am_depcomp=\"$ac_aux_dir/depcomp\"\n   AMDEPBACKSLASH='\\'\n+  am__nodep='_no'\n fi\n AM_CONDITIONAL([AMDEP], [test \"x$enable_dependency_tracking\" != xno])\n AC_SUBST([AMDEPBACKSLASH])dnl\n _AM_SUBST_NOTMAKE([AMDEPBACKSLASH])dnl\n+AC_SUBST([am__nodep])dnl\n+_AM_SUBST_NOTMAKE([am__nodep])dnl\n ])\n \n # Generate code to set up dependency tracking.              -*- Autoconf -*-\n@@ -545,12 +555,15 @@ for _am_header in $config_headers :; do\n done\n echo \"timestamp for $_am_arg\" >`AS_DIRNAME([\"$_am_arg\"])`/stamp-h[]$_am_stamp_count])\n \n-# Copyright (C) 2001, 2003, 2005, 2008  Free Software Foundation, Inc.\n+# Copyright (C) 2001, 2003, 2005, 2008, 2011 Free Software Foundation,\n+# Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n+# serial 1\n+\n # AM_PROG_INSTALL_SH\n # ------------------\n # Define $install_sh.\n@@ -569,8 +582,8 @@ AC_SUBST(install_sh)])\n # Add --enable-maintainer-mode option to configure.         -*- Autoconf -*-\n # From Jim Meyering\n \n-# Copyright (C) 1996, 1998, 2000, 2001, 2002, 2003, 2004, 2005, 2008\n-# Free Software Foundation, Inc.\n+# Copyright (C) 1996, 1998, 2000, 2001, 2002, 2003, 2004, 2005, 2008,\n+# 2011 Free Software Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n@@ -590,7 +603,7 @@ AC_DEFUN([AM_MAINTAINER_MODE],\n        [disable], [m4_define([am_maintainer_other], [enable])],\n        [m4_define([am_maintainer_other], [enable])\n         m4_warn([syntax], [unexpected argument to AM@&t@_MAINTAINER_MODE: $1])])\n-AC_MSG_CHECKING([whether to am_maintainer_other maintainer-specific portions of Makefiles])\n+AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])\n   dnl maintainer-mode's default is 'disable' unless 'enable' is passed\n   AC_ARG_ENABLE([maintainer-mode],\n [  --][am_maintainer_other][-maintainer-mode  am_maintainer_other make rules and dependencies not useful\n@@ -701,12 +714,15 @@ else\n fi\n ])\n \n-# Copyright (C) 2003, 2004, 2005, 2006  Free Software Foundation, Inc.\n+# Copyright (C) 2003, 2004, 2005, 2006, 2011 Free Software Foundation,\n+# Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n+# serial 1\n+\n # AM_PROG_MKDIR_P\n # ---------------\n # Check for `mkdir -p'.\n@@ -729,27 +745,28 @@ esac\n \n # Helper functions for option handling.                     -*- Autoconf -*-\n \n-# Copyright (C) 2001, 2002, 2003, 2005, 2008  Free Software Foundation, Inc.\n+# Copyright (C) 2001, 2002, 2003, 2005, 2008, 2010 Free Software\n+# Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n-# serial 4\n+# serial 5\n \n # _AM_MANGLE_OPTION(NAME)\n # -----------------------\n AC_DEFUN([_AM_MANGLE_OPTION],\n [[_AM_OPTION_]m4_bpatsubst($1, [[^a-zA-Z0-9_]], [_])])\n \n # _AM_SET_OPTION(NAME)\n-# ------------------------------\n+# --------------------\n # Set option NAME.  Presently that only means defining a flag for this option.\n AC_DEFUN([_AM_SET_OPTION],\n [m4_define(_AM_MANGLE_OPTION([$1]), 1)])\n \n # _AM_SET_OPTIONS(OPTIONS)\n-# ----------------------------------\n+# ------------------------\n # OPTIONS is a space-separated list of Automake options.\n AC_DEFUN([_AM_SET_OPTIONS],\n [m4_foreach_w([_AM_Option], [$1], [_AM_SET_OPTION(_AM_Option)])])\n@@ -825,12 +842,14 @@ Check your system clock])\n fi\n AC_MSG_RESULT(yes)])\n \n-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.\n+# Copyright (C) 2001, 2003, 2005, 2011 Free Software Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n+# serial 1\n+\n # AM_PROG_INSTALL_STRIP\n # ---------------------\n # One issue with vendor `install' (even GNU) is that you can't\n@@ -853,13 +872,13 @@ fi\n INSTALL_STRIP_PROGRAM=\"\\$(install_sh) -c -s\"\n AC_SUBST([INSTALL_STRIP_PROGRAM])])\n \n-# Copyright (C) 2006, 2008  Free Software Foundation, Inc.\n+# Copyright (C) 2006, 2008, 2010 Free Software Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n \n-# serial 2\n+# serial 3\n \n # _AM_SUBST_NOTMAKE(VARIABLE)\n # ---------------------------\n@@ -868,13 +887,13 @@ AC_SUBST([INSTALL_STRIP_PROGRAM])])\n AC_DEFUN([_AM_SUBST_NOTMAKE])\n \n # AM_SUBST_NOTMAKE(VARIABLE)\n-# ---------------------------\n+# --------------------------\n # Public sister of _AM_SUBST_NOTMAKE.\n AC_DEFUN([AM_SUBST_NOTMAKE], [_AM_SUBST_NOTMAKE($@)])\n \n # Check how to create a tarball.                            -*- Autoconf -*-\n \n-# Copyright (C) 2004, 2005  Free Software Foundation, Inc.\n+# Copyright (C) 2004, 2005, 2012 Free Software Foundation, Inc.\n #\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n@@ -896,10 +915,11 @@ AC_DEFUN([AM_SUBST_NOTMAKE], [_AM_SUBST_NOTMAKE($@)])\n # a tarball read from stdin.\n #     $(am__untar) < result.tar\n AC_DEFUN([_AM_PROG_TAR],\n-[# Always define AMTAR for backward compatibility.\n-AM_MISSING_PROG([AMTAR], [tar])\n+[# Always define AMTAR for backward compatibility.  Yes, it's still used\n+# in the wild :-(  We should find a proper way to deprecate it ...\n+AC_SUBST([AMTAR], ['$${TAR-tar}'])\n m4_if([$1], [v7],\n-     [am__tar='${AMTAR} chof - \"$$tardir\"'; am__untar='${AMTAR} xf -'],\n+     [am__tar='$${TAR-tar} chof - \"$$tardir\"' am__untar='$${TAR-tar} xf -'],\n      [m4_case([$1], [ustar],, [pax],,\n               [m4_fatal([Unknown tar format])])\n AC_MSG_CHECKING([how to create a $1 tar archive])\n@@ -968,9 +988,10 @@ AC_SUBST([am__tar])\n AC_SUBST([am__untar])\n ]) # _AM_PROG_TAR\n \n+m4_include([../config/acx.m4])\n m4_include([../config/depstand.m4])\n m4_include([../config/lead-dot.m4])\n-m4_include([../config/multi.m4])\n+m4_include([../config/override.m4])\n m4_include([../libtool.m4])\n m4_include([../ltoptions.m4])\n m4_include([../ltsugar.m4])"}, {"sha": "e62d5a0a9ab409877af3b64693df39e4ed27b1f8", "filename": "libhsail-rt/configure", "status": "modified", "additions": 35, "deletions": 11, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Fconfigure?ref=c48dc2cd119a58b14a588270b799acc5f5376fb9", "patch": "@@ -604,6 +604,7 @@ ac_subst_vars='am__EXEEXT_FALSE\n am__EXEEXT_TRUE\n LTLIBOBJS\n LIBOBJS\n+get_gcc_base_ver\n toolexeclibdir\n toolexecdir\n CXXCPP\n@@ -640,6 +641,7 @@ CXX\n am__fastdepCC_FALSE\n am__fastdepCC_TRUE\n CCDEPMODE\n+am__nodep\n AMDEPBACKSLASH\n AMDEP_FALSE\n AMDEP_TRUE\n@@ -741,6 +743,7 @@ with_pic\n enable_fast_install\n with_gnu_ld\n enable_libtool_lock\n+with_gcc_major_version_only\n '\n       ac_precious_vars='build_alias\n host_alias\n@@ -1395,6 +1398,8 @@ Optional Packages:\n   --with-pic              try to use only PIC/non-PIC objects [default=use\n                           both]\n   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]\n+  --with-gcc-major-version-only\n+                          use only GCC major number in filesystem paths\n \n Some influential environment variables:\n   CC          C compiler command\n@@ -2403,6 +2408,9 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n \n+\n+\n+\n # Needed to define ${target}.  Needs to be very early to avoid annoying\n # warning about calling AC_ARG_PROGRAM before AC_CANONICAL_SYSTEM\n ac_aux_dir=\n@@ -3009,11 +3017,11 @@ MAKEINFO=${MAKEINFO-\"${am_missing_run}makeinfo\"}\n \n # We need awk for the \"check\" target.  The system \"awk\" is bad on\n # some platforms.\n-# Always define AMTAR for backward compatibility.\n+# Always define AMTAR for backward compatibility.  Yes, it's still used\n+# in the wild :-(  We should find a proper way to deprecate it ...\n+AMTAR='$${TAR-tar}'\n \n-AMTAR=${AMTAR-\"${am_missing_run}tar\"}\n-\n-am__tar='${AMTAR} chof - \"$$tardir\"'; am__untar='${AMTAR} xf -'\n+am__tar='$${TAR-tar} chof - \"$$tardir\"' am__untar='$${TAR-tar} xf -'\n \n \n \n@@ -3374,12 +3382,10 @@ done\n \n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n-#include <stdio.h>\n+\n int\n main ()\n {\n-FILE *f = fopen (\"conftest.out\", \"w\");\n- return ferror (f) || fclose (f) != 0;\n \n   ;\n   return 0;\n@@ -3862,6 +3868,7 @@ fi\n if test \"x$enable_dependency_tracking\" != xno; then\n   am_depcomp=\"$ac_aux_dir/depcomp\"\n   AMDEPBACKSLASH='\\'\n+  am__nodep='_no'\n fi\n  if test \"x$enable_dependency_tracking\" != xno; then\n   AMDEP_TRUE=\n@@ -3886,6 +3893,7 @@ else\n   # instance it was reported that on HP-UX the gcc test will end up\n   # making a dummy file named `D' -- because `-MD' means `put the output\n   # in D'.\n+  rm -rf conftest.dir\n   mkdir conftest.dir\n   # Copy depcomp to subdir because otherwise we won't find it if we're\n   # using a relative directory.\n@@ -3945,7 +3953,7 @@ else\n \tbreak\n       fi\n       ;;\n-    msvisualcpp | msvcmsys)\n+    msvc7 | msvc7msys | msvisualcpp | msvcmsys)\n       # This compiler won't grok `-c -o', but also, the minuso test has\n       # not run yet.  These depmodes are late enough in the game, and\n       # so weak that their functioning should not be impacted.\n@@ -4270,6 +4278,7 @@ else\n   # instance it was reported that on HP-UX the gcc test will end up\n   # making a dummy file named `D' -- because `-MD' means `put the output\n   # in D'.\n+  rm -rf conftest.dir\n   mkdir conftest.dir\n   # Copy depcomp to subdir because otherwise we won't find it if we're\n   # using a relative directory.\n@@ -4329,7 +4338,7 @@ else\n \tbreak\n       fi\n       ;;\n-    msvisualcpp | msvcmsys)\n+    msvc7 | msvc7msys | msvisualcpp | msvcmsys)\n       # This compiler won't grok `-c -o', but also, the minuso test has\n       # not run yet.  These depmodes are late enough in the game, and\n       # so weak that their functioning should not be impacted.\n@@ -10966,7 +10975,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10969 \"configure\"\n+#line 10978 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11072,7 +11081,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11075 \"configure\"\n+#line 11084 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -14400,6 +14409,21 @@ _ACEOF\n \n \n \n+# Determine what GCC version number to use in filesystem paths.\n+\n+  get_gcc_base_ver=\"cat\"\n+\n+# Check whether --with-gcc-major-version-only was given.\n+if test \"${with_gcc_major_version_only+set}\" = set; then :\n+  withval=$with_gcc_major_version_only; if test x$with_gcc_major_version_only = xyes ; then\n+        get_gcc_base_ver=\"sed -e 's/^\\([0-9]*\\).*\\$\\$/\\1/'\"\n+      fi\n+\n+fi\n+\n+\n+\n+\n # Must be last\n cat >confcache <<\\_ACEOF\n # This file is a shell script that caches the results of configure"}, {"sha": "95b9a4f57a73f48092bdf62c66043799817ef02c", "filename": "libhsail-rt/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c48dc2cd119a58b14a588270b799acc5f5376fb9/libhsail-rt%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libhsail-rt%2Fconfigure.ac?ref=c48dc2cd119a58b14a588270b799acc5f5376fb9", "patch": "@@ -147,5 +147,8 @@ AC_CONFIG_HEADER(target-config.h)\n AC_CHECK_SIZEOF([int])\n AC_CHECK_SIZEOF([void*])\n \n+# Determine what GCC version number to use in filesystem paths.\n+GCC_BASE_VER\n+\n # Must be last\n AC_OUTPUT"}]}