{"sha": "06866a732572672982d3a22fdec8ae6ac700d281", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDY4NjZhNzMyNTcyNjcyOTgyZDNhMjJmZGVjOGFlNmFjNzAwZDI4MQ==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-04-20T16:19:21Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-04-20T16:19:21Z"}, "message": "re PR c++/26789 (ICE on incomplete struct with -fmudflap)\n\n\tPR mudflap/26789\n\t* tree-mudflap.c (mudflap_finish_file): Skip function when there\n\twere errors.  Remove check for erroneous objects.\n\nFrom-SVN: r113121", "tree": {"sha": "47c0c5b95d88fc3848ab235c8fef9c9b3a0e6a72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/47c0c5b95d88fc3848ab235c8fef9c9b3a0e6a72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/06866a732572672982d3a22fdec8ae6ac700d281", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06866a732572672982d3a22fdec8ae6ac700d281", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06866a732572672982d3a22fdec8ae6ac700d281", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06866a732572672982d3a22fdec8ae6ac700d281/comments", "author": null, "committer": null, "parents": [{"sha": "bfc646bfc0fe67e0665c2cb2d350339cc10f0b7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfc646bfc0fe67e0665c2cb2d350339cc10f0b7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfc646bfc0fe67e0665c2cb2d350339cc10f0b7d"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "164b3e34be9f5726e34e991a761a91109999b23a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06866a732572672982d3a22fdec8ae6ac700d281/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06866a732572672982d3a22fdec8ae6ac700d281/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=06866a732572672982d3a22fdec8ae6ac700d281", "patch": "@@ -1,3 +1,9 @@\n+2006-04-20  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR mudflap/26789\n+\t* tree-mudflap.c (mudflap_finish_file): Skip function when there\n+\twere errors.  Remove check for erroneous objects.\n+\n 2006-04-20  Jeff Law  <law@redhat.com>\n \n \tPR tree-optimization/26854"}, {"sha": "ed5ef4867da4af9975398bc1dce1e130f3798b5b", "filename": "gcc/tree-mudflap.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06866a732572672982d3a22fdec8ae6ac700d281/gcc%2Ftree-mudflap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06866a732572672982d3a22fdec8ae6ac700d281/gcc%2Ftree-mudflap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-mudflap.c?ref=06866a732572672982d3a22fdec8ae6ac700d281", "patch": "@@ -1232,6 +1232,10 @@ mudflap_finish_file (void)\n {\n   tree ctor_statements = NULL_TREE;\n \n+  /* No need to continue when there were errors.  */\n+  if (errorcount != 0 || sorrycount != 0)\n+    return;\n+\n   /* Insert a call to __mf_init.  */\n   {\n     tree call2_stmt = build_function_call_expr (mf_init_fndecl, NULL_TREE);\n@@ -1256,9 +1260,6 @@ mudflap_finish_file (void)\n         {\n           gcc_assert (DECL_P (obj));\n \n-          if (TREE_TYPE (obj) == error_mark_node)\n-\t    continue;\n-\n           if (mf_marked_p (obj))\n             continue;\n "}]}