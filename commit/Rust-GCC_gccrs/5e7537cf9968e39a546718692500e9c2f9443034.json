{"sha": "5e7537cf9968e39a546718692500e9c2f9443034", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU3NTM3Y2Y5OTY4ZTM5YTU0NjcxODY5MjUwMGU5YzJmOTQ0MzAzNA==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-06-21T05:20:05Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-06-21T05:20:05Z"}, "message": "* mkconfig.sh: Add multiple inclusion guards to generated headers.\n\nFrom-SVN: r68292", "tree": {"sha": "8d526f24be7668426dfecc27d05d69233bb00e87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8d526f24be7668426dfecc27d05d69233bb00e87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e7537cf9968e39a546718692500e9c2f9443034", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e7537cf9968e39a546718692500e9c2f9443034", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e7537cf9968e39a546718692500e9c2f9443034", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e7537cf9968e39a546718692500e9c2f9443034/comments", "author": null, "committer": null, "parents": [{"sha": "87b60e6481995233bd06cc2366a3d8aa4278108c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87b60e6481995233bd06cc2366a3d8aa4278108c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87b60e6481995233bd06cc2366a3d8aa4278108c"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "9cdf9b3a013aaff5ddb34d542753f55e09a90c18", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e7537cf9968e39a546718692500e9c2f9443034/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e7537cf9968e39a546718692500e9c2f9443034/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5e7537cf9968e39a546718692500e9c2f9443034", "patch": "@@ -1,3 +1,7 @@\n+2003-06-21  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* mkconfig.sh: Add multiple inclusion guards to generated headers.\n+\n 2003-06-20  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* c-decl.c (store_parm_decls): Make saved_warn_shadow boolean."}, {"sha": "70d9a23d92d11354e6aa37c6801e3a09c234b500", "filename": "gcc/mkconfig.sh", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e7537cf9968e39a546718692500e9c2f9443034/gcc%2Fmkconfig.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e7537cf9968e39a546718692500e9c2f9443034/gcc%2Fmkconfig.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmkconfig.sh?ref=5e7537cf9968e39a546718692500e9c2f9443034", "patch": "@@ -33,6 +33,14 @@ fi\n output=$1\n rm -f ${output}T\n \n+# This converts a file name into header guard macro format.\n+hg_sed_expr='y,abcdefghijklmnopqrstuvwxyz./,ABCDEFGHIJKLMNOPQRSTUVWXYZ__,'\n+header_guard=GCC_`echo ${output} | sed -e ${hg_sed_expr}`\n+\n+# Add multiple inclusion protection guard, part one.\n+echo \"#ifndef ${header_guard}\" >> ${output}T\n+echo \"#define ${header_guard}\" >> ${output}T\n+\n # Define TARGET_CPU_DEFAULT if the system wants one.\n # This substitutes for lots of *.h files.\n if [ \"$TARGET_CPU_DEFAULT\" != \"\" ]; then\n@@ -85,6 +93,9 @@ EOF\n     ;;\n esac\n \n+# Add multiple inclusion protection guard, part two.\n+echo \"#endif /* ${header_guard} */\" >> ${output}T\n+\n # Avoid changing the actual file if possible.\n if [ -f $output ] && cmp ${output}T $output >/dev/null 2>&1; then\n     echo $output is unchanged >&2"}]}