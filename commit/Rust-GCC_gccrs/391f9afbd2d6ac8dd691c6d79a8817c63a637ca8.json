{"sha": "391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzkxZjlhZmJkMmQ2YWM4ZGQ2OTFjNmQ3OWE4ODE3YzYzYTYzN2NhOA==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2004-09-15T02:58:28Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2004-09-15T02:58:28Z"}, "message": "re PR tree-optimization/17252 (not marking char types as aliasing anything)\n\n\n\tPR tree-optimization/17252\n\t* tree-ssa-alias.c (may_alias_p): Don't assume that a\n\tpointer may not point to itself when using relaxed\n\taliasing rules.\n\ntestsuite/ChangeLog\n\n\tPR tree-optimization/17252\n\t* gcc.c-torture/execute/pr17252.c: New test.\n\nFrom-SVN: r87529", "tree": {"sha": "1e2d0774d13dac9492acaed1a577afad8dd177c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e2d0774d13dac9492acaed1a577afad8dd177c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/comments", "author": null, "committer": null, "parents": [{"sha": "67f236204409bd498339b92c65fdb031344e8e36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67f236204409bd498339b92c65fdb031344e8e36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67f236204409bd498339b92c65fdb031344e8e36"}], "stats": {"total": 39, "additions": 38, "deletions": 1}, "files": [{"sha": "a2f169c575d0a1c2d3a705ef3da0b83947aa5a20", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "patch": "@@ -1,3 +1,10 @@\n+2004-09-14  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR tree-optimization/17252\n+\t* tree-ssa-alias.c (may_alias_p): Don't assume that a\n+\tpointer may not point to itself when using relaxed\n+\taliasing rules.\n+\n 2004-09-14  Richard Henderson  <rth@redhat.com>\n \n \tPR middle-end/17397"}, {"sha": "61744bf33f7e11109b5aef8dd25217b3b665b5e9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "patch": "@@ -1,3 +1,8 @@\n+2004-09-14  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR tree-optimization/17252\n+\t* gcc.c-torture/execute/pr17252.c: New test.\n+\n 2004-09-14  Andrew Pinski  <apinski@apple.com>\n \n \t* g++.dg/tree-ssa/pointer-reference-alias.C: New test."}, {"sha": "e31622fc7e028c78e3f89752bd8466819b780290", "filename": "gcc/testsuite/gcc.c-torture/execute/pr17252.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr17252.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr17252.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr17252.c?ref=391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "patch": "@@ -0,0 +1,24 @@\n+/* PR 17252.  When a char * pointer P takes its own address, storing\n+   into *P changes P itself.  */\n+\n+char *a;\n+\n+main ()\n+{\n+  int i;\n+\n+  /* Make 'a' point to itself.  */\n+  a = (char *)&a;\n+\n+  /* Assign NULL to 'a' byte by byte.  */\n+  for (i = 0; i < sizeof(char *); i++)\n+    a[i] = 0;\n+\n+  /* If a's memory tag does not contain 'a' in its alias set, we will\n+     think that this predicate is superfluous and change it to\n+     'if (1)'.  */\n+  if (a == (char *)&a)\n+    abort ();\n+\n+  return 0;\n+}"}, {"sha": "801de5bfaa5bea5c7d7eb95342443e591d1ede28", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/391f9afbd2d6ac8dd691c6d79a8817c63a637ca8/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=391f9afbd2d6ac8dd691c6d79a8817c63a637ca8", "patch": "@@ -1558,7 +1558,8 @@ may_alias_p (tree ptr, HOST_WIDE_INT mem_alias_set,\n      for PTR's alias set here, not its pointed-to type.  We also can't\n      do this check with relaxed aliasing enabled.  */\n   if (POINTER_TYPE_P (TREE_TYPE (var))\n-      && var_alias_set != 0)\n+      && var_alias_set != 0\n+      && mem_alias_set != 0)\n     {\n       HOST_WIDE_INT ptr_alias_set = get_alias_set (ptr);\n       if (ptr_alias_set == var_alias_set)"}]}