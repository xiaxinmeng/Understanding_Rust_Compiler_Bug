{"sha": "c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzlhOGEyOTVmOGE3YmZjNWVlNzFlYTYzNmFiOWY2ZDhhN2MzNjJjMw==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-11-05T21:43:08Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-11-05T21:43:08Z"}, "message": "(safe_read, safe_write): Handle EINTR.\n\nFrom-SVN: r6015", "tree": {"sha": "e4328c32b4b4bba25d3e32f0e10b0f1923db8efb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4328c32b4b4bba25d3e32f0e10b0f1923db8efb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3/comments", "author": null, "committer": null, "parents": [{"sha": "6c8747b19a6eaef778e79a05c03e738677e987b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c8747b19a6eaef778e79a05c03e738677e987b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c8747b19a6eaef778e79a05c03e738677e987b5"}], "stats": {"total": 34, "additions": 29, "deletions": 5}, "files": [{"sha": "434e053e2d163fdec6f1a1474de095c24e5182c4", "filename": "gcc/cccp.c", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3", "patch": "@@ -993,7 +993,13 @@ safe_read (desc, ptr, len)\n   while (left > 0) {\n     int nchars = read (desc, ptr, left);\n     if (nchars < 0)\n-      return nchars;\n+      {\n+#ifdef EINTR\n+\tif (errno == EINTR)\n+\t  continue;\n+#endif\n+\treturn nchars;\n+      }\n     if (nchars == 0)\n       break;\n     ptr += nchars;\n@@ -1014,7 +1020,13 @@ safe_write (desc, ptr, len)\n   while (len > 0) {\n     int written = write (desc, ptr, len);\n     if (written < 0)\n-      pfatal_with_name (out_fname);\n+      {\n+#ifdef EINTR\n+\tif (errno == EINTR)\n+\t  continue;\n+#endif\n+\tpfatal_with_name (out_fname);\n+      }\n     ptr += written;\n     len -= written;\n   }"}, {"sha": "ef793d3c5aaa2a47a7810d38d6f8e3030fd22ef5", "filename": "gcc/protoize.c", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3/gcc%2Fprotoize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3/gcc%2Fprotoize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprotoize.c?ref=c9a8a295f8a7bfc5ee71ea636ab9f6d8a7c362c3", "patch": "@@ -745,7 +745,13 @@ safe_read (desc, ptr, len)\n   while (left > 0) {\n     int nchars = read (desc, ptr, left);\n     if (nchars < 0)\n-      return nchars;\n+      {\n+#ifdef EINTR\n+\tif (errno == EINTR)\n+\t  continue;\n+#endif\n+\treturn nchars;\n+      }\n     if (nchars == 0)\n       break;\n     ptr += nchars;\n@@ -767,8 +773,14 @@ safe_write (desc, ptr, len, out_fname)\n   while (len > 0) {\n     int written = write (desc, ptr, len);\n     if (written < 0)\n-      fprintf (stderr, \"%s: error writing file `%s': %s\\n\",\n-\t       pname, shortpath (NULL, out_fname), sys_errlist[errno]);\n+      {\n+#ifdef EINTR\n+\tif (errno == EINTR)\n+\t  continue;\n+#endif\n+\tfprintf (stderr, \"%s: error writing file `%s': %s\\n\",\n+\t\t pname, shortpath (NULL, out_fname), sys_errlist[errno]);\n+      }\n     ptr += written;\n     len -= written;\n   }"}]}