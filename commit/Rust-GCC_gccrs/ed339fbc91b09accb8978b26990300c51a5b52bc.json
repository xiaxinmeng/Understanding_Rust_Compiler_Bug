{"sha": "ed339fbc91b09accb8978b26990300c51a5b52bc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQzMzlmYmM5MWIwOWFjY2I4OTc4YjI2OTkwMzAwYzUxYTViNTJiYw==", "commit": {"author": {"name": "Matthias Klose", "email": "doko@ubuntu.com", "date": "2007-07-28T20:32:27Z"}, "committer": {"name": "Matthias Klose", "email": "doko@gcc.gnu.org", "date": "2007-07-28T20:32:27Z"}, "message": "configure.ac: Encode the libgcj soversion in dbexecdir...\n\n2007-07-28  Matthias Klose  <doko@ubuntu.com>\n\n        * configure.ac: Encode the libgcj soversion in dbexecdir,\n        pass --with-native-libdir to classpath configure.\n        * configure: Regenerate.\n\nFrom-SVN: r127025", "tree": {"sha": "46eee6316656db50cc918006a73171805573993d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46eee6316656db50cc918006a73171805573993d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed339fbc91b09accb8978b26990300c51a5b52bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed339fbc91b09accb8978b26990300c51a5b52bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed339fbc91b09accb8978b26990300c51a5b52bc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed339fbc91b09accb8978b26990300c51a5b52bc/comments", "author": {"login": "doko42", "id": 11258518, "node_id": "MDQ6VXNlcjExMjU4NTE4", "avatar_url": "https://avatars.githubusercontent.com/u/11258518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doko42", "html_url": "https://github.com/doko42", "followers_url": "https://api.github.com/users/doko42/followers", "following_url": "https://api.github.com/users/doko42/following{/other_user}", "gists_url": "https://api.github.com/users/doko42/gists{/gist_id}", "starred_url": "https://api.github.com/users/doko42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doko42/subscriptions", "organizations_url": "https://api.github.com/users/doko42/orgs", "repos_url": "https://api.github.com/users/doko42/repos", "events_url": "https://api.github.com/users/doko42/events{/privacy}", "received_events_url": "https://api.github.com/users/doko42/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "312ce0f488a8e335547c5a2ee51b6f78d677da89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/312ce0f488a8e335547c5a2ee51b6f78d677da89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/312ce0f488a8e335547c5a2ee51b6f78d677da89"}], "stats": {"total": 100, "additions": 49, "deletions": 51}, "files": [{"sha": "1fa9c1dbeeaeac537c9ab43fce39493d53eb9bc5", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed339fbc91b09accb8978b26990300c51a5b52bc/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed339fbc91b09accb8978b26990300c51a5b52bc/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=ed339fbc91b09accb8978b26990300c51a5b52bc", "patch": "@@ -1,3 +1,9 @@\n+2007-07-28  Matthias Klose  <doko@ubuntu.com>\n+\n+\t* configure.ac: Encode the libgcj soversion in dbexecdir,\n+\tpass --with-native-libdir to classpath configure.\n+\t* configure: Regenerate.\n+\n 2007-07-28  Matthias Klose  <doko@ubuntu.com>\n \n \t* classpath/jvmti.h: Remove."}, {"sha": "b4997489fbc215245665db8c8b30aebf6e98706c", "filename": "libjava/configure", "status": "modified", "additions": 33, "deletions": 43, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed339fbc91b09accb8978b26990300c51a5b52bc/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed339fbc91b09accb8978b26990300c51a5b52bc/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=ed339fbc91b09accb8978b26990300c51a5b52bc", "patch": "@@ -459,7 +459,7 @@ ac_includes_default=\"\\\n #endif\"\n \n ac_subdirs_all=\"$ac_subdirs_all classpath libltdl\"\n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_libsubdir build_subdir host_subdir target_subdir multi_basedir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S mkinstalldirs JAVA_MAINTAINER_MODE_TRUE JAVA_MAINTAINER_MODE_FALSE CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LDFLAGS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE AS ac_ct_AS LD ac_ct_LD AR ac_ct_AR RANLIB ac_ct_RANLIB JAR ZIP UNZIP MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBGCJ_CFLAGS LIBGCJ_CXXFLAGS LIBGCJ_JAVAFLAGS LIBGCJ_LD_SYMBOLIC LIBGCJ_LD_SYMBOLIC_FUNCTIONS LIBGCJDEBUG TOOLKIT XLIB_AWT_TRUE XLIB_AWT_FALSE X_AWT_TRUE X_AWT_FALSE GCJ_FOR_ECJX GCJH host_exeext INCLTDL LIBLTDL DIRLTDL LIBTOOL SED EGREP FGREP GREP DUMPBIN ac_ct_DUMPBIN NM lt_ECHO CPP CPPFLAGS CXXCPP GCJ GCJFLAGS GCJDEPMODE am__fastdepGCJ_TRUE am__fastdepGCJ_FALSE subdirs TESTSUBDIR_TRUE TESTSUBDIR_FALSE ECJ_BUILD_JAR ECJ_JAR BUILD_ECJ1_TRUE BUILD_ECJ1_FALSE INSTALL_ECJ_JAR_TRUE INSTALL_ECJ_JAR_FALSE JAVA_HOME_SET_TRUE JAVA_HOME_SET_FALSE JAVA_HOME INTERPRETER LIBFFI LIBFFIINCS PLATFORM USING_WIN32_PLATFORM_TRUE USING_WIN32_PLATFORM_FALSE USING_POSIX_PLATFORM_TRUE USING_POSIX_PLATFORM_FALSE USING_DARWIN_CRT_TRUE USING_DARWIN_CRT_FALSE SYSTEMSPEC LIBGCJTESTSPEC ZLIBSPEC ZLIBTESTSPEC X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS extra_ldflags_libjava GCLIBS GCINCS GCDEPS GCSPEC JC1GCSPEC GCTESTSPEC USING_BOEHMGC_TRUE USING_BOEHMGC_FALSE USING_NOGC_TRUE USING_NOGC_FALSE THREADLIBS THREADINCS THREADDEPS THREADSPEC THREADSTARTFILESPEC THREADLDFLAGS THREADCXXFLAGS USING_POSIX_THREADS_TRUE USING_POSIX_THREADS_FALSE USING_WIN32_THREADS_TRUE USING_WIN32_THREADS_FALSE USING_NO_THREADS_TRUE USING_NO_THREADS_FALSE USE_LIBGCJ_BC_TRUE USE_LIBGCJ_BC_FALSE LIBGCJ_SPEC HASH_SYNC_SPEC USING_GCC_TRUE USING_GCC_FALSE LIBICONV LTLIBICONV PKG_CONFIG GTK_CFLAGS GTK_LIBS GLIB_CFLAGS GLIB_LIBS LIBART_CFLAGS LIBART_LIBS CLASSPATH_SEPARATOR ZLIBS SYS_ZLIBS ZINCS DIVIDESPEC CHECKREFSPEC EXCEPTIONSPEC BACKTRACESPEC IEEESPEC NATIVE_TRUE NATIVE_FALSE ENABLE_SHARED_TRUE ENABLE_SHARED_FALSE NEEDS_DATA_START_TRUE NEEDS_DATA_START_FALSE GCC_UNWIND_INCLUDE toolexecdir toolexecmainlibdir toolexeclibdir dbexecdir GCJVERSION gxx_include_dir libstdcxx_incdir PERL SYSDEP_SOURCES ANONVERSCRIPT_TRUE ANONVERSCRIPT_FALSE LD_START_STATIC_SPEC LD_FINISH_STATIC_SPEC here LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_libsubdir build_subdir host_subdir target_subdir multi_basedir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S mkinstalldirs JAVA_MAINTAINER_MODE_TRUE JAVA_MAINTAINER_MODE_FALSE CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LDFLAGS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE AS ac_ct_AS LD ac_ct_LD AR ac_ct_AR RANLIB ac_ct_RANLIB JAR ZIP UNZIP MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBGCJ_CFLAGS LIBGCJ_CXXFLAGS LIBGCJ_JAVAFLAGS LIBGCJ_LD_SYMBOLIC LIBGCJ_LD_SYMBOLIC_FUNCTIONS LIBGCJDEBUG TOOLKIT XLIB_AWT_TRUE XLIB_AWT_FALSE X_AWT_TRUE X_AWT_FALSE GCJ_FOR_ECJX GCJH host_exeext INCLTDL LIBLTDL DIRLTDL LIBTOOL SED EGREP FGREP GREP DUMPBIN ac_ct_DUMPBIN NM lt_ECHO CPP CPPFLAGS CXXCPP GCJ GCJFLAGS GCJDEPMODE am__fastdepGCJ_TRUE am__fastdepGCJ_FALSE subdirs TESTSUBDIR_TRUE TESTSUBDIR_FALSE ECJ_BUILD_JAR ECJ_JAR BUILD_ECJ1_TRUE BUILD_ECJ1_FALSE INSTALL_ECJ_JAR_TRUE INSTALL_ECJ_JAR_FALSE JAVA_HOME_SET_TRUE JAVA_HOME_SET_FALSE JAVA_HOME INTERPRETER LIBFFI LIBFFIINCS PLATFORM USING_WIN32_PLATFORM_TRUE USING_WIN32_PLATFORM_FALSE USING_POSIX_PLATFORM_TRUE USING_POSIX_PLATFORM_FALSE USING_DARWIN_CRT_TRUE USING_DARWIN_CRT_FALSE SYSTEMSPEC LIBGCJTESTSPEC ZLIBSPEC ZLIBTESTSPEC X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS extra_ldflags_libjava GCLIBS GCINCS GCDEPS GCSPEC JC1GCSPEC GCTESTSPEC USING_BOEHMGC_TRUE USING_BOEHMGC_FALSE USING_NOGC_TRUE USING_NOGC_FALSE THREADLIBS THREADINCS THREADDEPS THREADSPEC THREADSTARTFILESPEC THREADLDFLAGS THREADCXXFLAGS USING_POSIX_THREADS_TRUE USING_POSIX_THREADS_FALSE USING_WIN32_THREADS_TRUE USING_WIN32_THREADS_FALSE USING_NO_THREADS_TRUE USING_NO_THREADS_FALSE USE_LIBGCJ_BC_TRUE USE_LIBGCJ_BC_FALSE LIBGCJ_SPEC HASH_SYNC_SPEC USING_GCC_TRUE USING_GCC_FALSE LIBICONV LTLIBICONV PKG_CONFIG GTK_CFLAGS GTK_LIBS GLIB_CFLAGS GLIB_LIBS LIBART_CFLAGS LIBART_LIBS CLASSPATH_SEPARATOR ZLIBS SYS_ZLIBS ZINCS DIVIDESPEC CHECKREFSPEC EXCEPTIONSPEC BACKTRACESPEC IEEESPEC NATIVE_TRUE NATIVE_FALSE ENABLE_SHARED_TRUE ENABLE_SHARED_FALSE NEEDS_DATA_START_TRUE NEEDS_DATA_START_FALSE GCC_UNWIND_INCLUDE toolexecdir toolexecmainlibdir toolexeclibdir GCJVERSION dbexecdir gxx_include_dir libstdcxx_incdir PERL SYSDEP_SOURCES ANONVERSCRIPT_TRUE ANONVERSCRIPT_FALSE LD_START_STATIC_SPEC LD_FINISH_STATIC_SPEC here LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n \n # Initialize some variables set by options.\n@@ -26165,28 +26165,30 @@ esac\n \n \n \n+# Determine gcj and libgcj version number.\n+gcjversion=`$GCJ -v 2>&1 | sed -n 's/^.*version \\([^ ]*\\).*$/\\1/p'`\n+libgcj_soversion=`awk -F: '/^[^#].*:/ { print $1 }' $srcdir/libtool-version`\n+GCJVERSION=$gcjversion\n+\n+\n+cat >>confdefs.h <<_ACEOF\n+#define GCJVERSION \"$GCJVERSION\"\n+_ACEOF\n+\n+\n # Determine where the standard .db file and GNU Classpath JNI\n # libraries are found.\n multi_os_directory=`$CC -print-multi-os-directory`\n case $multi_os_directory in\n   .)\n-   dbexecdir='$(libdir)/gcj-$(gcc_version)' # Avoid /.\n+   dbexecdir='$(libdir)/gcj-$(gcc_version)'-$libgcj_soversion # Avoid /.\n    ;;\n   *)\n-   dbexecdir='$(libdir)/'$multi_os_directory'/gcj-$(gcc_version)'\n+   dbexecdir='$(libdir)/'$multi_os_directory'/gcj-$(gcc_version)'-$libgcj_soversion\n    ;;\n esac\n \n-\n-# Determine gcj version number.\n-gcjversion=`$GCJ -v 2>&1 | sed -n 's/^.*version \\([^ ]*\\).*$/\\1/p'`\n-GCJVERSION=$gcjversion\n-\n-\n-cat >>confdefs.h <<_ACEOF\n-#define GCJVERSION \"$GCJVERSION\"\n-_ACEOF\n-\n+ac_configure_args=\"$ac_configure_args --with-native-libdir=\\$\\(toolexeclibdir\\)/gcj-$gcjversion-$libgcj_soversion\"\n \n \n cat >>confdefs.h <<\\_ACEOF\n@@ -29253,8 +29255,8 @@ s,@GCC_UNWIND_INCLUDE@,$GCC_UNWIND_INCLUDE,;t t\n s,@toolexecdir@,$toolexecdir,;t t\n s,@toolexecmainlibdir@,$toolexecmainlibdir,;t t\n s,@toolexeclibdir@,$toolexeclibdir,;t t\n-s,@dbexecdir@,$dbexecdir,;t t\n s,@GCJVERSION@,$GCJVERSION,;t t\n+s,@dbexecdir@,$dbexecdir,;t t\n s,@gxx_include_dir@,$gxx_include_dir,;t t\n s,@libstdcxx_incdir@,$libstdcxx_incdir,;t t\n s,@PERL@,$PERL,;t t\n@@ -31006,17 +31008,14 @@ if test \"$no_create\" != yes; then\n fi\n \n #\n-# CONFIG_SUBDIRS section, as fixed in confsubdir.m4.\n+# CONFIG_SUBDIRS section.\n #\n if test \"$no_recursion\" != yes; then\n \n   # Remove --cache-file and --srcdir arguments so they do not pile up.\n   ac_sub_configure_args=\n   ac_prev=\n-  eval \"set x $ac_configure_args\"\n-  shift\n-  for ac_arg\n-  do\n+  for ac_arg in $ac_configure_args; do\n     if test -n \"$ac_prev\"; then\n       ac_prev=\n       continue\n@@ -31039,28 +31038,20 @@ if test \"$no_recursion\" != yes; then\n       ac_prev=prefix ;;\n     -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)\n       ;;\n-    *)\n-      case $ac_arg in\n-      *\\'*) ac_arg=`echo \"$ac_arg\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"` ;;\n-      esac\n-      ac_sub_configure_args=\"$ac_sub_configure_args '$ac_arg'\" ;;\n+    *) ac_sub_configure_args=\"$ac_sub_configure_args $ac_arg\" ;;\n     esac\n   done\n \n   # Always prepend --prefix to ensure using the same prefix\n   # in subdir configurations.\n-  ac_arg=\"--prefix=$prefix\"\n-  case $ac_arg in\n-  *\\'*) ac_arg=`echo \"$ac_arg\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"` ;;\n-  esac\n-  ac_sub_configure_args=\"$ac_arg $ac_sub_configure_args\"\n+  ac_sub_configure_args=\"--prefix=$prefix $ac_sub_configure_args\"\n \n   ac_popdir=`pwd`\n   for ac_dir in : $subdirs; do test \"x$ac_dir\" = x: && continue\n \n     # Do not complain, so a configure script can configure whichever\n     # parts of a large source tree are present.\n-    test -d \"$srcdir/$ac_dir\" || continue\n+    test -d $srcdir/$ac_dir || continue\n \n     { echo \"$as_me:$LINENO: configuring in $ac_dir\" >&5\n echo \"$as_me: configuring in $ac_dir\" >&6;}\n@@ -31155,16 +31146,15 @@ case $ac_abs_builddir in\n esac\n \n \n-    cd \"$ac_dir\"\n+    cd $ac_dir\n \n     # Check for guested configure; otherwise get Cygnus style configure.\n-    if test -f \"$ac_srcdir/configure.gnu\"; then\n-      ac_sub_configure=$ac_srcdir/configure.gnu\n-    elif test -f \"$ac_srcdir/configure\"; then\n-      ac_sub_configure=$ac_srcdir/configure\n-    elif test -f \"$ac_srcdir/configure.in\"; then\n-      # This should be Cygnus configure.\n-      ac_sub_configure=$ac_aux_dir/configure\n+    if test -f $ac_srcdir/configure.gnu; then\n+      ac_sub_configure=\"$SHELL '$ac_srcdir/configure.gnu'\"\n+    elif test -f $ac_srcdir/configure; then\n+      ac_sub_configure=\"$SHELL '$ac_srcdir/configure'\"\n+    elif test -f $ac_srcdir/configure.in; then\n+      ac_sub_configure=$ac_configure\n     else\n       { echo \"$as_me:$LINENO: WARNING: no configuration information is in $ac_dir\" >&5\n echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2;}\n@@ -31180,17 +31170,17 @@ echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2;}\n \tac_sub_cache_file=$ac_top_builddir$cache_file ;;\n       esac\n \n-      { echo \"$as_me:$LINENO: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir\" >&5\n-echo \"$as_me: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir\" >&6;}\n+      { echo \"$as_me:$LINENO: running $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir\" >&5\n+echo \"$as_me: running $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir\" >&6;}\n       # The eval makes quoting arguments work.\n-      eval \"\\$SHELL \\\"\\$ac_sub_configure\\\" $ac_sub_configure_args \\\n-\t   --cache-file=\\\"\\$ac_sub_cache_file\\\" --srcdir=\\\"\\$ac_srcdir\\\"\" ||\n+      eval $ac_sub_configure $ac_sub_configure_args \\\n+\t   --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir ||\n \t{ { echo \"$as_me:$LINENO: error: $ac_sub_configure failed for $ac_dir\" >&5\n echo \"$as_me: error: $ac_sub_configure failed for $ac_dir\" >&2;}\n    { (exit 1); exit 1; }; }\n     fi\n \n-    cd \"$ac_popdir\"\n+    cd $ac_popdir\n   done\n fi\n "}, {"sha": "1a9452d7018c392ce0193eb25dc77943ce864f74", "filename": "libjava/configure.ac", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed339fbc91b09accb8978b26990300c51a5b52bc/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed339fbc91b09accb8978b26990300c51a5b52bc/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=ed339fbc91b09accb8978b26990300c51a5b52bc", "patch": "@@ -1367,24 +1367,26 @@ AC_SUBST(toolexecdir)\n AC_SUBST(toolexecmainlibdir)\n AC_SUBST(toolexeclibdir)\n \n+# Determine gcj and libgcj version number.\n+gcjversion=`$GCJ -v 2>&1 | sed -n 's/^.*version \\([[^ ]]*\\).*$/\\1/p'`\n+libgcj_soversion=`awk -F: '/^[[^#]].*:/ { print $1 }' $srcdir/libtool-version`\n+GCJVERSION=$gcjversion\n+AC_SUBST(GCJVERSION)\n+AC_DEFINE_UNQUOTED(GCJVERSION, \"$GCJVERSION\", [Short GCJ version ID])\n+\n # Determine where the standard .db file and GNU Classpath JNI\n # libraries are found.\n multi_os_directory=`$CC -print-multi-os-directory`\n case $multi_os_directory in\n   .)\n-   dbexecdir='$(libdir)/gcj-$(gcc_version)' # Avoid /.\n+   dbexecdir='$(libdir)/gcj-$(gcc_version)'-$libgcj_soversion # Avoid /.\n    ;;\n   *)\n-   dbexecdir='$(libdir)/'$multi_os_directory'/gcj-$(gcc_version)'\n+   dbexecdir='$(libdir)/'$multi_os_directory'/gcj-$(gcc_version)'-$libgcj_soversion\n    ;;\n esac\n AC_SUBST(dbexecdir)\n-\n-# Determine gcj version number.\n-gcjversion=`$GCJ -v 2>&1 | sed -n 's/^.*version \\([[^ ]]*\\).*$/\\1/p'`\n-GCJVERSION=$gcjversion\n-AC_SUBST(GCJVERSION)\n-AC_DEFINE_UNQUOTED(GCJVERSION, \"$GCJVERSION\", [Short GCJ version ID])\n+ac_configure_args=\"$ac_configure_args --with-native-libdir=\\$\\(toolexeclibdir\\)/gcj-$gcjversion-$libgcj_soversion\"\n \n AC_DEFINE(JV_VERSION, \"1.5.0\", [Compatibility version string])\n AC_DEFINE(JV_API_VERSION, \"1.5\", [API compatibility version string])"}]}