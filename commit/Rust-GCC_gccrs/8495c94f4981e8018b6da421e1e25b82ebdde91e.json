{"sha": "8495c94f4981e8018b6da421e1e25b82ebdde91e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODQ5NWM5NGY0OTgxZTgwMThiNmRhNDIxZTFlMjViODJlYmRkZTkxZQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2008-11-02T13:34:58Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2008-11-02T13:34:58Z"}, "message": "re PR tree-optimization/37991 (excessive memory consumption - possible hang)\n\n2008-11-02  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/37991\n\t* tree-ssa-sccvn.h (copy_vuses_from_stmt): Remove.\n\t* tree-ssa-sccvn.c (copy_vuses_from_stmt): Make static.\n\t(set_ssa_val_to): Print if the value changed.\n\t(simplify_binary_expression): Strip useless conversions.\n\n\t* gcc.c-torture/compile/pr37991.c: New testcase.\n\nFrom-SVN: r141532", "tree": {"sha": "8c0e73b01869af871ad88b8619d5546944121409", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c0e73b01869af871ad88b8619d5546944121409"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8495c94f4981e8018b6da421e1e25b82ebdde91e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8495c94f4981e8018b6da421e1e25b82ebdde91e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8495c94f4981e8018b6da421e1e25b82ebdde91e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8495c94f4981e8018b6da421e1e25b82ebdde91e/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "99f9aa7b91375574fce9390624b55fcae66c9f38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99f9aa7b91375574fce9390624b55fcae66c9f38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99f9aa7b91375574fce9390624b55fcae66c9f38"}], "stats": {"total": 37, "additions": 34, "deletions": 3}, "files": [{"sha": "90f6c9b214d6004946e9fbec260244c0c04f3d48", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8495c94f4981e8018b6da421e1e25b82ebdde91e", "patch": "@@ -1,3 +1,11 @@\n+2008-11-02  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/37991\n+\t* tree-ssa-sccvn.h (copy_vuses_from_stmt): Remove.\n+\t* tree-ssa-sccvn.c (copy_vuses_from_stmt): Make static.\n+\t(set_ssa_val_to): Print if the value changed.\n+\t(simplify_binary_expression): Strip useless conversions.\n+\n 2008-11-01  Hans-Peter Nilsson  <hp@axis.com>\n \n \tPR target/37939"}, {"sha": "90e0db5fb721393749cdbfbcee74d0e354035091", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8495c94f4981e8018b6da421e1e25b82ebdde91e", "patch": "@@ -1,3 +1,8 @@\n+2008-11-02  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/37991\n+\t* gcc.c-torture/compile/pr37991.c: New testcase.\n+\n 2008-11-01  Hans-Peter Nilsson  <hp@axis.com>\n \n \tPR target/37939"}, {"sha": "f374ea985406b3ba7bad24de9adebae3d1cc7d40", "filename": "gcc/testsuite/gcc.c-torture/compile/pr37991.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr37991.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr37991.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr37991.c?ref=8495c94f4981e8018b6da421e1e25b82ebdde91e", "patch": "@@ -0,0 +1,14 @@\n+typedef int Int32;\n+void use_it(int);\n+void FindAndReadSignature(int processedSize)\n+{\n+  int numPrevBytes = 1;\n+  for (;;)\n+    {\n+      int numBytesInBuffer = numPrevBytes + processedSize;\n+      Int32 numTests = numBytesInBuffer - 1;\n+      use_it (numTests);\n+      numPrevBytes = numBytesInBuffer - numTests;\n+    }\n+}\n+"}, {"sha": "e255411fe6a8458efe7ee57302042bb4439a41a7", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=8495c94f4981e8018b6da421e1e25b82ebdde91e", "patch": "@@ -498,7 +498,7 @@ vuses_to_vec (gimple stmt, VEC (tree, gc) **result)\n /* Copy the VUSE names in STMT into a vector, and return\n    the vector.  */\n \n-VEC (tree, gc) *\n+static VEC (tree, gc) *\n copy_vuses_from_stmt (gimple stmt)\n {\n   VEC (tree, gc) *vuses = NULL;\n@@ -1579,16 +1579,19 @@ set_ssa_val_to (tree from, tree to)\n       print_generic_expr (dump_file, from, 0);\n       fprintf (dump_file, \" to \");\n       print_generic_expr (dump_file, to, 0);\n-      fprintf (dump_file, \"\\n\");\n     }\n \n   currval = SSA_VAL (from);\n \n   if (currval != to  && !operand_equal_p (currval, to, OEP_PURE_SAME))\n     {\n       SSA_VAL (from) = to;\n+      if (dump_file && (dump_flags & TDF_DETAILS))\n+\tfprintf (dump_file, \" (changed)\\n\");\n       return true;\n     }\n+  if (dump_file && (dump_flags & TDF_DETAILS))\n+    fprintf (dump_file, \"\\n\");\n   return false;\n }\n \n@@ -2113,6 +2116,8 @@ simplify_binary_expression (gimple stmt)\n \n   result = fold_binary (gimple_assign_rhs_code (stmt),\n \t\t\tTREE_TYPE (gimple_get_lhs (stmt)), op0, op1);\n+  if (result)\n+    STRIP_USELESS_TYPE_CONVERSION (result);\n \n   fold_undefer_overflow_warnings (result && valid_gimple_rhs_p (result),\n \t\t\t\t  stmt, 0);"}, {"sha": "cc74acce10da37aa2577c2f7d00bc9f7cf192fd7", "filename": "gcc/tree-ssa-sccvn.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftree-ssa-sccvn.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8495c94f4981e8018b6da421e1e25b82ebdde91e/gcc%2Ftree-ssa-sccvn.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.h?ref=8495c94f4981e8018b6da421e1e25b82ebdde91e", "patch": "@@ -196,5 +196,4 @@ unsigned int get_constant_value_id (tree);\n unsigned int get_or_alloc_constant_value_id (tree);\n bool value_id_constant_p (unsigned int);\n VEC (tree, gc) *shared_vuses_from_stmt (gimple);\n-VEC (tree, gc) *copy_vuses_from_stmt (gimple);\n #endif /* TREE_SSA_SCCVN_H  */"}]}