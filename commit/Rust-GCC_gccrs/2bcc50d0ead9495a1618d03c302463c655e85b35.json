{"sha": "2bcc50d0ead9495a1618d03c302463c655e85b35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmJjYzUwZDBlYWQ5NDk1YTE2MThkMDNjMzAyNDYzYzY1NWU4NWIzNQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2002-09-09T02:25:42Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2002-09-09T02:25:42Z"}, "message": "rs6000.c (rs6000_binds_local_p): Return bool.\n\n\t* config/rs6000/rs6000.c (rs6000_binds_local_p): Return bool.\n\t(function_ok_for_sibcall): Use binds_local_p.  Respect longcall\n\tattributes.\n\nFrom-SVN: r56961", "tree": {"sha": "95d51a332e3f9506b5471d7b1573592efec12f58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95d51a332e3f9506b5471d7b1573592efec12f58"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2bcc50d0ead9495a1618d03c302463c655e85b35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bcc50d0ead9495a1618d03c302463c655e85b35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bcc50d0ead9495a1618d03c302463c655e85b35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bcc50d0ead9495a1618d03c302463c655e85b35/comments", "author": null, "committer": null, "parents": [{"sha": "2515a7ea11c910e67c859c96d42d1846367df3f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2515a7ea11c910e67c859c96d42d1846367df3f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2515a7ea11c910e67c859c96d42d1846367df3f0"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "649a39d601549a5b9b180da81709f9c2670e5abe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bcc50d0ead9495a1618d03c302463c655e85b35/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bcc50d0ead9495a1618d03c302463c655e85b35/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2bcc50d0ead9495a1618d03c302463c655e85b35", "patch": "@@ -1,3 +1,9 @@\n+2002-09-09  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* config/rs6000/rs6000.c (rs6000_binds_local_p): Return bool.\n+\t(function_ok_for_sibcall): Use binds_local_p.  Respect longcall\n+\tattributes.\n+\n 2002-09-08  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* fr30.c (fr30_print_operand): Fix bug in output of CONST_DOUBLE."}, {"sha": "dbdb0084474f607c733d90a821e356597ac6b8ea", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bcc50d0ead9495a1618d03c302463c655e85b35/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bcc50d0ead9495a1618d03c302463c655e85b35/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=2bcc50d0ead9495a1618d03c302463c655e85b35", "patch": "@@ -222,7 +222,7 @@ static const char * rs6000_xcoff_strip_name_encoding PARAMS ((const char *));\n #endif\n static void rs6000_xcoff_encode_section_info PARAMS ((tree, int))\n      ATTRIBUTE_UNUSED;\n-static void rs6000_binds_local_p PARAMS ((tree));\n+static bool rs6000_binds_local_p PARAMS ((tree));\n static int rs6000_adjust_cost PARAMS ((rtx, rtx, rtx, int));\n static int rs6000_adjust_priority PARAMS ((rtx, int));\n static int rs6000_issue_rate PARAMS ((void));\n@@ -9503,8 +9503,14 @@ function_ok_for_sibcall (fndecl)\n \t    }\n         }\n       if (DEFAULT_ABI == ABI_DARWIN\n-\t  || (TREE_ASM_WRITTEN (fndecl) && !flag_pic) || !TREE_PUBLIC (fndecl))\n-        return 1;\n+\t  || (*targetm.binds_local_p) (fndecl))\n+\t{\n+\t  tree attr_list = TYPE_ATTRIBUTES (TREE_TYPE (fndecl));\n+\n+\t  if (!lookup_attribute (\"longcall\", attr_list)\n+\t      || lookup_attribute (\"shortcall\", attr_list))\n+\t    return 1;\n+\t}\n     }\n   return 0;\n }\n@@ -13207,13 +13213,13 @@ rs6000_xcoff_encode_section_info (decl, first)\n /* Cross-module name binding.  For AIX and PPC64 Linux, which always are\n    PIC, use private copy of flag_pic.  */\n \n-static void\n+static bool\n rs6000_binds_local_p (decl)\n      tree decl;\n {\n   if (DEFAULT_ABI == ABI_AIX)\n-    default_binds_local_p_1 (decl, rs6000_flag_pic);\n+    return default_binds_local_p_1 (decl, rs6000_flag_pic);\n   else\n-    default_binds_local_p_1 (decl, flag_pic);\n+    return default_binds_local_p_1 (decl, flag_pic);\n }\n "}]}