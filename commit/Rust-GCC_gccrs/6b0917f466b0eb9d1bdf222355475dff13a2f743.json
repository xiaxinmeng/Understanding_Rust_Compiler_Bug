{"sha": "6b0917f466b0eb9d1bdf222355475dff13a2f743", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIwOTE3ZjQ2NmIwZWI5ZDFiZGYyMjIzNTU0NzVkZmYxM2EyZjc0Mw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2018-06-24T14:11:55Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-06-24T14:11:55Z"}, "message": "lto-streamer-out.c (tree_is_indexable): Make LABEL_DECL nonindexable unless it is forced or nonlocal...\n\n\n\t* lto-streamer-out.c (tree_is_indexable): Make LABEL_DECL nonindexable\n\tunless it is forced or nonlocal; assert that we stream no IMPORTED_DECL.\n\nFrom-SVN: r261995", "tree": {"sha": "efa80691599a0d2371f58b0dc043f3e5a381aa67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/efa80691599a0d2371f58b0dc043f3e5a381aa67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b0917f466b0eb9d1bdf222355475dff13a2f743", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b0917f466b0eb9d1bdf222355475dff13a2f743", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b0917f466b0eb9d1bdf222355475dff13a2f743", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b0917f466b0eb9d1bdf222355475dff13a2f743/comments", "author": null, "committer": null, "parents": [{"sha": "adaab3058c4050348e9fa862f1909200a314c45e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adaab3058c4050348e9fa862f1909200a314c45e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adaab3058c4050348e9fa862f1909200a314c45e"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "61df1473fcc887d5f1ac905b3b4f8db638fc215d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0917f466b0eb9d1bdf222355475dff13a2f743/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0917f466b0eb9d1bdf222355475dff13a2f743/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6b0917f466b0eb9d1bdf222355475dff13a2f743", "patch": "@@ -1,3 +1,8 @@\n+2018-06-22  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* lto-streamer-out.c (tree_is_indexable): Make LABEL_DECL nonindexable\n+\tunless it is forced or nonlocal; assert that we stream no IMPORTED_DECL.\n+\n 2018-06-22  Maya Rashish  <coypu@sdf.org>\n \n \t* doc/invoke.texi (mno-fancy-math-387): Update for changes"}, {"sha": "e7769f8adc9bc966508f7b3ec958fae2d0a03c44", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0917f466b0eb9d1bdf222355475dff13a2f743/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0917f466b0eb9d1bdf222355475dff13a2f743/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=6b0917f466b0eb9d1bdf222355475dff13a2f743", "patch": "@@ -134,9 +134,12 @@ tree_is_indexable (tree t)\n   if ((TREE_CODE (t) == PARM_DECL || TREE_CODE (t) == RESULT_DECL)\n       && DECL_CONTEXT (t))\n     return variably_modified_type_p (TREE_TYPE (DECL_CONTEXT (t)), NULL_TREE);\n-  /* IMPORTED_DECL is put into BLOCK and thus it never can be shared.  */\n+  /* IMPORTED_DECL is put into BLOCK and thus it never can be shared.\n+     We should no longer need to stream it.  */\n   else if (TREE_CODE (t) == IMPORTED_DECL)\n-    return false;\n+    gcc_unreachable ();\n+  else if (TREE_CODE (t) == LABEL_DECL)\n+    return FORCED_LABEL (t) || DECL_NONLOCAL (t);\n   else if (((VAR_P (t) && !TREE_STATIC (t))\n \t    || TREE_CODE (t) == TYPE_DECL\n \t    || TREE_CODE (t) == CONST_DECL"}]}