{"sha": "e77be1b8f392b0a301b6952715039c0fd57982e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTc3YmUxYjhmMzkyYjBhMzAxYjY5NTI3MTUwMzljMGZkNTc5ODJlMg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-01-07T00:07:47Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-01-07T00:07:47Z"}, "message": "(init_optabs): Add optab entries for QFmode and HFmode.\n\nFrom-SVN: r3134", "tree": {"sha": "d99d90cbac36a8c3f7660069413388ac326a61e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d99d90cbac36a8c3f7660069413388ac326a61e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e77be1b8f392b0a301b6952715039c0fd57982e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e77be1b8f392b0a301b6952715039c0fd57982e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e77be1b8f392b0a301b6952715039c0fd57982e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e77be1b8f392b0a301b6952715039c0fd57982e2/comments", "author": null, "committer": null, "parents": [{"sha": "b424402e936e77adde61851164970c5e09335e6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b424402e936e77adde61851164970c5e09335e6b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b424402e936e77adde61851164970c5e09335e6b"}], "stats": {"total": 255, "additions": 254, "deletions": 1}, "files": [{"sha": "a62951317788c24ed979d3c706dd1d1594fcbf35", "filename": "gcc/optabs.c", "status": "modified", "additions": 254, "deletions": 1, "changes": 255, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e77be1b8f392b0a301b6952715039c0fd57982e2/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e77be1b8f392b0a301b6952715039c0fd57982e2/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=e77be1b8f392b0a301b6952715039c0fd57982e2", "patch": "@@ -2803,6 +2803,18 @@ init_fixtab ()\n        p++)\n     *p = CODE_FOR_nothing;\n \n+#ifdef HAVE_fixqfqi2\n+  if (HAVE_fixqfqi2)\n+    fixtab[(int) QFmode][(int) QImode][0] = CODE_FOR_fixqfqi2;\n+#endif\n+#ifdef HAVE_fixhfqi2\n+  if (HAVE_fixhfqi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fixhfqi2;\n+#endif\n+#ifdef HAVE_fixhfhi2\n+  if (HAVE_fixhfhi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fixhfhi2;\n+#endif\n #ifdef HAVE_fixsfqi2\n   if (HAVE_fixsfqi2)\n     fixtab[(int) SFmode][(int) QImode][0] = CODE_FOR_fixsfqi2;\n@@ -2883,6 +2895,19 @@ init_fixtab ()\n     fixtab[(int) TFmode][(int) TImode][0] = CODE_FOR_fixtfti2;\n #endif\n \n+#ifdef HAVE_fixunsqfqi2\n+  if (HAVE_fixunsqfqi2)\n+    fixtab[(int) QFmode][(int) QImode][0] = CODE_FOR_fixunsqfqi2;\n+#endif\n+#ifdef HAVE_fixunshfqi2\n+  if (HAVE_fixunshfqi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fixunshfqi2;\n+#endif\n+#ifdef HAVE_fixunshfhi2\n+  if (HAVE_fixunshfhi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fixunshfhi2;\n+#endif\n+\n #ifdef HAVE_fixunssfqi2\n   if (HAVE_fixunssfqi2)\n     fixtab[(int) SFmode][(int) QImode][1] = CODE_FOR_fixunssfqi2;\n@@ -2963,6 +2988,18 @@ init_fixtab ()\n     fixtab[(int) TFmode][(int) TImode][1] = CODE_FOR_fixunstfti2;\n #endif\n \n+#ifdef HAVE_fix_truncqfqi2\n+  if (HAVE_fix_truncqfqi2)\n+    fixtab[(int) QFmode][(int) QImode][0] = CODE_FOR_fix_truncqfqi2;\n+#endif\n+#ifdef HAVE_fix_trunchfqi2\n+  if (HAVE_fix_trunchfqi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fix_trunchfqi2;\n+#endif\n+#ifdef HAVE_fixhfhi2\n+  if (HAVE_fixhfhi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fixhfhi2;\n+#endif\n #ifdef HAVE_fix_truncsfqi2\n   if (HAVE_fix_truncsfqi2)\n     fixtrunctab[(int) SFmode][(int) QImode][0] = CODE_FOR_fix_truncsfqi2;\n@@ -3043,6 +3080,18 @@ init_fixtab ()\n     fixtrunctab[(int) TFmode][(int) TImode][0] = CODE_FOR_fix_trunctfti2;\n #endif\n \n+#ifdef HAVE_fixuns_truncqfqi2\n+  if (HAVE_fixuns_truncqfqi2)\n+    fixtab[(int) QFmode][(int) QImode][0] = CODE_FOR_fixuns_truncqfqi2;\n+#endif\n+#ifdef HAVE_fixuns_trunchfqi2\n+  if (HAVE_fixuns_trunchfqi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fixuns_trunchfqi2;\n+#endif\n+#ifdef HAVE_fixhfhi2\n+  if (HAVE_fixhfhi2)\n+    fixtab[(int) HFmode][(int) QImode][0] = CODE_FOR_fixhfhi2;\n+#endif\n #ifdef HAVE_fixuns_truncsfqi2\n   if (HAVE_fixuns_truncsfqi2)\n     fixtrunctab[(int) SFmode][(int) QImode][1] = CODE_FOR_fixuns_truncsfqi2;\n@@ -3145,6 +3194,48 @@ init_floattab ()\n        p++)\n     *p = CODE_FOR_nothing;\n \n+#ifdef HAVE_floatqiqf2\n+  if (HAVE_floatqiqf2)\n+    floattab[(int) QFmode][(int) QImode][0] = CODE_FOR_floatqiqf2;\n+#endif\n+#ifdef HAVE_floathiqf2\n+  if (HAVE_floathiqf2)\n+    floattab[(int) QFmode][(int) HImode][0] = CODE_FOR_floathiqf2;\n+#endif\n+#ifdef HAVE_floatsiqf2\n+  if (HAVE_floatsiqf2)\n+    floattab[(int) QFmode][(int) SImode][0] = CODE_FOR_floatsiqf2;\n+#endif\n+#ifdef HAVE_floatdiqf2\n+  if (HAVE_floatdiqf2)\n+    floattab[(int) QFmode][(int) DImode][0] = CODE_FOR_floatdiqf2;\n+#endif\n+#ifdef HAVE_floattiqf2\n+  if (HAVE_floattiqf2)\n+    floattab[(int) QFmode][(int) TImode][0] = CODE_FOR_floattiqf2;\n+#endif\n+\n+#ifdef HAVE_floatqihf2\n+  if (HAVE_floatqihf2)\n+    floattab[(int) HFmode][(int) QImode][0] = CODE_FOR_floatqihf2;\n+#endif\n+#ifdef HAVE_floathihf2\n+  if (HAVE_floathihf2)\n+    floattab[(int) HFmode][(int) HImode][0] = CODE_FOR_floathihf2;\n+#endif\n+#ifdef HAVE_floatsihf2\n+  if (HAVE_floatsihf2)\n+    floattab[(int) HFmode][(int) SImode][0] = CODE_FOR_floatsihf2;\n+#endif\n+#ifdef HAVE_floatdihf2\n+  if (HAVE_floatdihf2)\n+    floattab[(int) HFmode][(int) DImode][0] = CODE_FOR_floatdihf2;\n+#endif\n+#ifdef HAVE_floattihf2\n+  if (HAVE_floattihf2)\n+    floattab[(int) HFmode][(int) TImode][0] = CODE_FOR_floattihf2;\n+#endif\n+\n #ifdef HAVE_floatqisf2\n   if (HAVE_floatqisf2)\n     floattab[(int) SFmode][(int) QImode][0] = CODE_FOR_floatqisf2;\n@@ -3229,7 +3320,49 @@ init_floattab ()\n     floattab[(int) TFmode][(int) TImode][0] = CODE_FOR_floattitf2;\n #endif\n \n-#ifdef HAVE_floatunsqisf2\n+#ifdef HAVE_floatunsqiqf2\n+  if (HAVE_floatunsqiqf2)\n+    floattab[(int) QFmode][(int) QImode][0] = CODE_FOR_floatunsqiqf2;\n+#endif\n+#ifdef HAVE_floatunshiqf2\n+  if (HAVE_floatunshiqf2)\n+    floattab[(int) QFmode][(int) HImode][0] = CODE_FOR_floatunshiqf2;\n+#endif\n+#ifdef HAVE_floatunssiqf2\n+  if (HAVE_floatunsqsiqf2)\n+    floattab[(int) QFmode][(int) SImode][0] = CODE_FOR_floatunssiqf2;\n+#endif\n+#ifdef HAVE_floatunsdiqf2\n+  if (HAVE_floatunsdiqf2)\n+    floattab[(int) QFmode][(int) DImode][0] = CODE_FOR_floatunsdiqf2;\n+#endif\n+#ifdef HAVE_floatunstiqf2\n+  if (HAVE_floatunstiqf2)\n+    floattab[(int) QFmode][(int) TImode][0] = CODE_FOR_floatunstiqf2;\n+#endif\n+\n+#ifdef HAVE_floatunsqihf2\n+  if (HAVE_floatunsqihf2)\n+    floattab[(int) HFmode][(int) QImode][0] = CODE_FOR_floatunsqihf2;\n+#endif\n+#ifdef HAVE_floatunshihf2\n+  if (HAVE_floatunshihf2)\n+    floattab[(int) HFmode][(int) HImode][0] = CODE_FOR_floatunshihf2;\n+#endif\n+#ifdef HAVE_floatunssihf2\n+  if (HAVE_floatunssihf2)\n+    floattab[(int) HFmode][(int) SImode][0] = CODE_FOR_floatunssihf2;\n+#endif\n+#ifdef HAVE_floatunsdihf2\n+  if (HAVE_floatunsdihf2)\n+    floattab[(int) HFmode][(int) DImode][0] = CODE_FOR_floatunsdihf2;\n+#endif\n+#ifdef HAVE_floatunstihf2\n+  if (HAVE_floatunstihf2)\n+    floattab[(int) HFmode][(int) TImode][0] = CODE_FOR_floatunstihf2;\n+#endif\n+\n+#ifdef HAVE_floatqunsqisf2\n   if (HAVE_floatunsqisf2)\n     floattab[(int) SFmode][(int) QImode][1] = CODE_FOR_floatunsqisf2;\n #endif\n@@ -3901,6 +4034,14 @@ init_optabs ()\n   if (HAVE_addti3)\n     add_optab->handlers[(int) TImode].insn_code = CODE_FOR_addti3;\n #endif\n+#ifdef HAVE_addqf3\n+  if (HAVE_addqf3)\n+    add_optab->handlers[(int) QFmode].insn_code = CODE_FOR_addqf3;\n+#endif\n+#ifdef HAVE_addhf3\n+  if (HAVE_addhf3)\n+    add_optab->handlers[(int) HFmode].insn_code = CODE_FOR_addhf3;\n+#endif\n #ifdef HAVE_addsf3\n   if (HAVE_addsf3)\n     add_optab->handlers[(int) SFmode].insn_code = CODE_FOR_addsf3;\n@@ -3944,6 +4085,14 @@ init_optabs ()\n   if (HAVE_subti3)\n     sub_optab->handlers[(int) TImode].insn_code = CODE_FOR_subti3;\n #endif\n+#ifdef HAVE_subqf3\n+  if (HAVE_subqf3)\n+    sub_optab->handlers[(int) QFmode].insn_code = CODE_FOR_subqf3;\n+#endif\n+#ifdef HAVE_subhf3\n+  if (HAVE_subhf3)\n+    sub_optab->handlers[(int) HFmode].insn_code = CODE_FOR_subhf3;\n+#endif\n #ifdef HAVE_subsf3\n   if (HAVE_subsf3)\n     sub_optab->handlers[(int) SFmode].insn_code = CODE_FOR_subsf3;\n@@ -3987,6 +4136,14 @@ init_optabs ()\n   if (HAVE_multi3)\n     smul_optab->handlers[(int) TImode].insn_code = CODE_FOR_multi3;\n #endif\n+#ifdef HAVE_mulqf3\n+  if (HAVE_mulqf3)\n+    smul_optab->handlers[(int) QFmode].insn_code = CODE_FOR_mulqf3;\n+#endif\n+#ifdef HAVE_mulhf3\n+  if (HAVE_mulhf3)\n+    smul_optab->handlers[(int) HFmode].insn_code = CODE_FOR_mulhf3;\n+#endif\n #ifdef HAVE_mulsf3\n   if (HAVE_mulsf3)\n     smul_optab->handlers[(int) SFmode].insn_code = CODE_FOR_mulsf3;\n@@ -4253,6 +4410,14 @@ init_optabs ()\n     = gen_rtx (SYMBOL_REF, Pmode, UMODTI3_LIBCALL);\n #endif\n \n+#ifdef HAVE_divqf3\n+  if (HAVE_divqf3)\n+    flodiv_optab->handlers[(int) QFmode].insn_code = CODE_FOR_divqf3;\n+#endif\n+#ifdef HAVE_divhf3\n+  if (HAVE_divhf3)\n+    flodiv_optab->handlers[(int) HFmode].insn_code = CODE_FOR_divhf3;\n+#endif\n #ifdef HAVE_divsf3\n   if (HAVE_divsf3)\n     flodiv_optab->handlers[(int) SFmode].insn_code = CODE_FOR_divsf3;\n@@ -4271,6 +4436,14 @@ init_optabs ()\n #endif\n   init_floating_libfuncs (flodiv_optab, \"div\", '3');\n \n+#ifdef HAVE_ftruncqf2\n+  if (HAVE_ftruncqf2)\n+    ftrunc_optab->handlers[(int) QFmode].insn_code = CODE_FOR_ftruncqf2;\n+#endif\n+#ifdef HAVE_ftrunchf2\n+  if (HAVE_ftrunchf2)\n+    ftrunc_optab->handlers[(int) HFmode].insn_code = CODE_FOR_ftrunchf3;\n+#endif\n #ifdef HAVE_ftruncsf2\n   if (HAVE_ftruncsf2)\n     ftrunc_optab->handlers[(int) SFmode].insn_code = CODE_FOR_ftruncsf2;\n@@ -4543,6 +4716,14 @@ init_optabs ()\n   if (HAVE_sminti3)\n     smin_optab->handlers[(int) TImode].insn_code = CODE_FOR_sminti3;\n #endif\n+#ifdef HAVE_minqf3\n+  if (HAVE_minqf3)\n+    smin_optab->handlers[(int) QFmode].insn_code = CODE_FOR_minqf3;\n+#endif\n+#ifdef HAVE_minhf3\n+  if (HAVE_minhf3)\n+    smin_optab->handlers[(int) HFmode].insn_code = CODE_FOR_minhf3;\n+#endif\n #ifdef HAVE_minsf3\n   if (HAVE_minsf3)\n     smin_optab->handlers[(int) SFmode].insn_code = CODE_FOR_minsf3;\n@@ -4582,6 +4763,14 @@ init_optabs ()\n   if (HAVE_smaxti3)\n     smax_optab->handlers[(int) TImode].insn_code = CODE_FOR_smaxti3;\n #endif\n+#ifdef HAVE_maxqf3\n+  if (HAVE_maxqf3)\n+    smax_optab->handlers[(int) QFmode].insn_code = CODE_FOR_maxqf3;\n+#endif\n+#ifdef HAVE_maxhf3\n+  if (HAVE_maxhf3)\n+    smax_optab->handlers[(int) HFmode].insn_code = CODE_FOR_maxhf3;\n+#endif\n #ifdef HAVE_maxsf3\n   if (HAVE_maxsf3)\n     smax_optab->handlers[(int) SFmode].insn_code = CODE_FOR_maxsf3;\n@@ -4669,6 +4858,14 @@ init_optabs ()\n   if (HAVE_negti2)\n     neg_optab->handlers[(int) TImode].insn_code = CODE_FOR_negti2;\n #endif\n+#ifdef HAVE_negqf2\n+  if (HAVE_negqf2)\n+    neg_optab->handlers[(int) QFmode].insn_code = CODE_FOR_negqf2;\n+#endif\n+#ifdef HAVE_neghf2\n+  if (HAVE_neghf2)\n+    neg_optab->handlers[(int) HFmode].insn_code = CODE_FOR_neghf2;\n+#endif\n #ifdef HAVE_negsf2\n   if (HAVE_negsf2)\n     neg_optab->handlers[(int) SFmode].insn_code = CODE_FOR_negsf2;\n@@ -4712,6 +4909,14 @@ init_optabs ()\n   if (HAVE_absti2)\n     abs_optab->handlers[(int) TImode].insn_code = CODE_FOR_absti2;\n #endif\n+#ifdef HAVE_absqf2\n+  if (HAVE_absqf2)\n+    abs_optab->handlers[(int) QFmode].insn_code = CODE_FOR_absqf2;\n+#endif\n+#ifdef HAVE_abshf2\n+  if (HAVE_abshf2)\n+    abs_optab->handlers[(int) HFmode].insn_code = CODE_FOR_abshf22;\n+#endif\n #ifdef HAVE_abssf2\n   if (HAVE_abssf2)\n     abs_optab->handlers[(int) SFmode].insn_code = CODE_FOR_abssf2;\n@@ -4758,6 +4963,14 @@ init_optabs ()\n   if (HAVE_sqrtti2)\n     sqrt_optab->handlers[(int) TImode].insn_code = CODE_FOR_sqrtti2;\n #endif\n+#ifdef HAVE_sqrtqf2\n+  if (HAVE_sqrtqf2)\n+    sqrt_optab->handlers[(int) QFmode].insn_code = CODE_FOR_sqrtqf2;\n+#endif\n+#ifdef HAVE_sqrthf2\n+  if (HAVE_sqrthf2)\n+    sqrt_optab->handlers[(int) HFmode].insn_code = CODE_FOR_sqrthf2;\n+#endif\n #ifdef HAVE_sqrtsf2\n   if (HAVE_sqrtsf2)\n     sqrt_optab->handlers[(int) SFmode].insn_code = CODE_FOR_sqrtsf2;\n@@ -4773,6 +4986,14 @@ init_optabs ()\n   /* No library calls here!  If there is no sqrt instruction expand_builtin\n      should force the library call.  */\n \n+#ifdef HAVE_sinqf2\n+  if (HAVE_sinqf2)\n+    sin_optab->handlers[(int) QFmode].insn_code = CODE_FOR_sinqf2;\n+#endif\n+#ifdef HAVE_sinhf2\n+  if (HAVE_sinhf2)\n+    sin_optab->handlers[(int) HFmode].insn_code = CODE_FOR_sinhf2;\n+#endif\n #ifdef HAVE_sinsf2\n   if (HAVE_sinsf2)\n     sin_optab->handlers[(int) SFmode].insn_code = CODE_FOR_sinsf2;\n@@ -4788,6 +5009,14 @@ init_optabs ()\n   /* No library calls here!  If there is no sin instruction expand_builtin\n      should force the library call.  */\n \n+#ifdef HAVE_cosqf2\n+  if (HAVE_cosqf2)\n+    cos_optab->handlers[(int) QFmode].insn_code = CODE_FOR_cosqf2;\n+#endif\n+#ifdef HAVE_coshf2\n+  if (HAVE_coshf2)\n+    cos_optab->handlers[(int) HFmode].insn_code = CODE_FOR_coshf2;\n+#endif\n #ifdef HAVE_cossf2\n   if (HAVE_cossf2)\n     cos_optab->handlers[(int) SFmode].insn_code = CODE_FOR_cossf2;\n@@ -4906,6 +5135,14 @@ init_optabs ()\n   if (HAVE_movti)\n     mov_optab->handlers[(int) TImode].insn_code = CODE_FOR_movti;\n #endif\n+#ifdef HAVE_movqf\n+  if (HAVE_movqf)\n+    mov_optab->handlers[(int) QFmode].insn_code = CODE_FOR_movqf;\n+#endif\n+#ifdef HAVE_movhf\n+  if (HAVE_movhf)\n+    mov_optab->handlers[(int) HFmode].insn_code = CODE_FOR_movhf;\n+#endif\n #ifdef HAVE_movsf\n   if (HAVE_movsf)\n     mov_optab->handlers[(int) SFmode].insn_code = CODE_FOR_movsf;\n@@ -4980,6 +5217,14 @@ init_optabs ()\n   if (HAVE_cmpti)\n     cmp_optab->handlers[(int) TImode].insn_code = CODE_FOR_cmpti;\n #endif\n+#ifdef HAVE_cmpqf\n+  if (HAVE_cmpqf)\n+    cmp_optab->handlers[(int) QFmode].insn_code = CODE_FOR_cmpqf;\n+#endif\n+#ifdef HAVE_cmphf\n+  if (HAVE_cmphf)\n+    cmp_optab->handlers[(int) HFmode].insn_code = CODE_FOR_cmphf;\n+#endif\n #ifdef HAVE_cmpsf\n   if (HAVE_cmpsf)\n     cmp_optab->handlers[(int) SFmode].insn_code = CODE_FOR_cmpsf;\n@@ -5025,6 +5270,14 @@ init_optabs ()\n   if (HAVE_tstti)\n     tst_optab->handlers[(int) TImode].insn_code = CODE_FOR_tstti;\n #endif\n+#ifdef HAVE_tstqf\n+  if (HAVE_tstqf)\n+    tst_optab->handlers[(int) QFmode].insn_code = CODE_FOR_tstqf;\n+#endif\n+#ifdef HAVE_tsthf\n+  if (HAVE_tsthf)\n+    tst_optab->handlers[(int) HFmode].insn_code = CODE_FOR_tsthf;\n+#endif\n #ifdef HAVE_tstsf\n   if (HAVE_tstsf)\n     tst_optab->handlers[(int) SFmode].insn_code = CODE_FOR_tstsf;"}]}