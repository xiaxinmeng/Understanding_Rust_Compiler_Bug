{"sha": "fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJkNGVmNGNjZGY4OTVkZDI4MzNmZWVlMjQ4YWQ1YzBkMDY5ZjQxOA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2005-06-02T08:53:48Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2005-06-02T08:53:48Z"}, "message": "re PR c++/21151 (ICE when compiling c++ PCH of class definition within template function.)\n\ncp:\n\tPR c++/21151\n\t* name-lookup.c (pushtag): Push local class even in a template.\ntestsuite:\n\tPR c++/21151\n\t* g++.dg/pch/local-1.C: New.\n\t* g++.dg/pch/local-1.Hs: New.\n\nFrom-SVN: r100482", "tree": {"sha": "953edcc6ac9eee743e009c18c53b5932a6dcb73b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/953edcc6ac9eee743e009c18c53b5932a6dcb73b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/comments", "author": null, "committer": null, "parents": [{"sha": "bf8f8254eae6616841fcebe1af3de1d921bd0c24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf8f8254eae6616841fcebe1af3de1d921bd0c24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf8f8254eae6616841fcebe1af3de1d921bd0c24"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "884d3461987841180767f8907fb56b7fd6685afd", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "patch": "@@ -1,3 +1,8 @@\n+2005-06-02  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/21151\n+\t* name-lookup.c (pushtag): Push local class even in a template.\n+\n 2005-05-31  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/21165"}, {"sha": "3197a41077d8169111983d7fc6fca3685309146c", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "patch": "@@ -4698,8 +4698,7 @@ pushtag (tree name, tree type, tag_scope scope)\n \t     way.  (It's otherwise tricky to find a member function definition\n \t     it's only pointed to from within a local class.)  */\n \t  if (TYPE_CONTEXT (type)\n-\t      && TREE_CODE (TYPE_CONTEXT (type)) == FUNCTION_DECL\n-\t      && !processing_template_decl)\n+\t      && TREE_CODE (TYPE_CONTEXT (type)) == FUNCTION_DECL)\n \t    VEC_safe_push (tree, gc, local_classes, type);\n         }\n       if (b->kind == sk_class"}, {"sha": "07ab9b92412d743518973edf0a6bd601cedd2e2c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "patch": "@@ -1,3 +1,9 @@\n+2005-06-02  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/21151\n+\t* g++.dg/pch/local-1.C: New.\n+\t* g++.dg/pch/local-1.Hs: New.\n+\n 2005-06-01  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR 14341, PR 21332, PR 20701, PR 21086, PR 21090"}, {"sha": "75847e5c19bdce97d44bc8b7ce54da1cdcb6525b", "filename": "gcc/testsuite/g++.dg/pch/local-1.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Flocal-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Flocal-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Flocal-1.C?ref=fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "patch": "@@ -0,0 +1,6 @@\n+#include \"local-1.H\"\n+int main() \n+{\n+  func<int> ();\n+  return 0;\n+}"}, {"sha": "56a6c7e474401dd3241c841ed9886ee1dbecd415", "filename": "gcc/testsuite/g++.dg/pch/local-1.Hs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Flocal-1.Hs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd4ef4ccdf895dd2833feee248ad5c0d069f418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Flocal-1.Hs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Flocal-1.Hs?ref=fbd4ef4ccdf895dd2833feee248ad5c0d069f418", "patch": "@@ -0,0 +1,7 @@\n+template<typename T> void func()   \n+{   \n+  struct object   \n+  {   \n+    object() {}\n+  };   \n+}  "}]}