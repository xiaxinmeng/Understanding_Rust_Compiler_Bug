{"sha": "042c8750245e011e3585b56f9080126636f10444", "node_id": "C_kwDOANBUbNoAKDA0MmM4NzUwMjQ1ZTAxMWUzNTg1YjU2ZjkwODAxMjY2MzZmMTA0NDQ", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2022-04-15T21:08:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-04-15T21:08:17Z"}, "message": "Merge #1107\n\n1107: tests: Improve timeout handling r=philberty a=liushuyu\n\n- add a 10-second timeout for individual compile test\r\n- add a xfail test case to ensure the timeout mechanism is working \n\nCo-authored-by: liushuyu <liushuyu011@gmail.com>", "tree": {"sha": "833cccdc04c728043a3048d1f5e0ba5f998c47ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/833cccdc04c728043a3048d1f5e0ba5f998c47ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/042c8750245e011e3585b56f9080126636f10444", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiWd7BCRBK7hj4Ov3rIwAAtE8IAD00m2LYPJiNyZRgTdCMgE0X\nL/T/rlTlbHNElZ3u2PcT4IBEUZM7VWfvdhutgUz4FuFs8VjVY+J0pCJ2KTGJl8to\nb5tABch6yDbgtKSfoLEL0IZJiXNYbUaBsNoKeibpbf9SzF85SMgObTglkUelogxf\naXbhjFxeidrmgWL9oJnwfxk6jk6bopNq0/0tTzJHHFdcc+5UTZEGTd8HnMJ1MISt\n7R459ie7YtHH62f22s1rXSQZzPCU8FjGiwHE+qi+Lhid99i98Ug1V86XQghk5WEs\nujIdNjGbjbxRZwNGaXzfzBY6YXDnSO/urCE3ToNXtHt2qPrZ0yhauJ6z0oimHVs=\n=hK3U\n-----END PGP SIGNATURE-----\n", "payload": "tree 833cccdc04c728043a3048d1f5e0ba5f998c47ba\nparent d17e0aa7695ddb383e0a4fc43185e2ab42c81703\nparent e909e4fc7b2c46cadf15ea114622241f39337673\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1650056897 +0000\ncommitter GitHub <noreply@github.com> 1650056897 +0000\n\nMerge #1107\n\n1107: tests: Improve timeout handling r=philberty a=liushuyu\n\n- add a 10-second timeout for individual compile test\r\n- add a xfail test case to ensure the timeout mechanism is working \n\nCo-authored-by: liushuyu <liushuyu011@gmail.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/042c8750245e011e3585b56f9080126636f10444", "html_url": "https://github.com/Rust-GCC/gccrs/commit/042c8750245e011e3585b56f9080126636f10444", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/042c8750245e011e3585b56f9080126636f10444/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d17e0aa7695ddb383e0a4fc43185e2ab42c81703", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d17e0aa7695ddb383e0a4fc43185e2ab42c81703", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d17e0aa7695ddb383e0a4fc43185e2ab42c81703"}, {"sha": "e909e4fc7b2c46cadf15ea114622241f39337673", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e909e4fc7b2c46cadf15ea114622241f39337673", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e909e4fc7b2c46cadf15ea114622241f39337673"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "6993c9763048292cc343c8c7a119bf653fac4d84", "filename": "gcc/testsuite/lib/rust.exp", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/042c8750245e011e3585b56f9080126636f10444/gcc%2Ftestsuite%2Flib%2Frust.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/042c8750245e011e3585b56f9080126636f10444/gcc%2Ftestsuite%2Flib%2Frust.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Frust.exp?ref=042c8750245e011e3585b56f9080126636f10444", "patch": "@@ -166,6 +166,10 @@ proc rust_target_compile { source dest type options } {\n     global gluefile wrap_flags\n     global ALWAYS_RUSTFLAGS\n     global RUST_UNDER_TEST\n+    global individual_timeout\n+\n+    # HACK: guard against infinite loops in the compiler\n+    set individual_timeout 10\n \n     if { [target_info needs_status_wrapper] != \"\" && [info exists gluefile] } {\n \tlappend options \"libs=${gluefile}\""}, {"sha": "0eb69fabb243d42027dd0de762dccf43ffee14cc", "filename": "gcc/testsuite/rust/compile/xfail/macro_return.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/042c8750245e011e3585b56f9080126636f10444/gcc%2Ftestsuite%2Frust%2Fcompile%2Fxfail%2Fmacro_return.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/042c8750245e011e3585b56f9080126636f10444/gcc%2Ftestsuite%2Frust%2Fcompile%2Fxfail%2Fmacro_return.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fcompile%2Fxfail%2Fmacro_return.rs?ref=042c8750245e011e3585b56f9080126636f10444", "patch": "@@ -0,0 +1,10 @@\n+// { dg-excess-errors \"....\" { xfail *-*-*-* } }\n+\n+macro_rules! add {\n+    ($a:expr) => { $a };\n+    ($a:expr, $($b:expr),+) => { $a + add!($($b),*) }\n+}\n+\n+fn main() -> i32 {\n+    add!(add!(1, 2))\n+}"}]}