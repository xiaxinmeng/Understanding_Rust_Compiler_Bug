{"sha": "d85428e234930c9d1352d1e5494b5b245dcd1a22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDg1NDI4ZTIzNDkzMGM5ZDEzNTJkMWU1NDk0YjViMjQ1ZGNkMWEyMg==", "commit": {"author": {"name": "Dale Johannesen", "email": "dalej@apple.com", "date": "2004-06-16T17:13:34Z"}, "committer": {"name": "Dale Johannesen", "email": "dalej@gcc.gnu.org", "date": "2004-06-16T17:13:34Z"}, "message": "loop.c (loop_givs_reduce): Avoid miscompilation of loops entered at bottom.\n\n\n2004-06-16  Dale Johannesen  <dalej@apple.com>\n\n        * loop.c (loop_givs_reduce): Avoid miscompilation of\n        loops entered at bottom.\n\nFrom-SVN: r83248", "tree": {"sha": "eac12c2a50a19fa9cba5bc97d3201615d9aeb226", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eac12c2a50a19fa9cba5bc97d3201615d9aeb226"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d85428e234930c9d1352d1e5494b5b245dcd1a22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d85428e234930c9d1352d1e5494b5b245dcd1a22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d85428e234930c9d1352d1e5494b5b245dcd1a22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d85428e234930c9d1352d1e5494b5b245dcd1a22/comments", "author": null, "committer": null, "parents": [{"sha": "e370de6e30762a5fb49cd39832c6ed98a60bd82b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e370de6e30762a5fb49cd39832c6ed98a60bd82b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e370de6e30762a5fb49cd39832c6ed98a60bd82b"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "8b1ca6fb1eff4af3e50adc20b46fda50f02697e8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d85428e234930c9d1352d1e5494b5b245dcd1a22/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d85428e234930c9d1352d1e5494b5b245dcd1a22/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d85428e234930c9d1352d1e5494b5b245dcd1a22", "patch": "@@ -1,3 +1,8 @@\n+2004-06-16  Dale Johannesen  <dalej@apple.com>\n+\n+        * loop.c (loop_givs_reduce): Avoid miscompilation of\n+        loops entered at bottom.\n+\n 2004-06-16  J\"orn Rennecke <joern.rennecke@superh.com>\n \n \t* cfglayout.c (fixup_reorder_chain): Handle case where the"}, {"sha": "aafb18c02f9fe3170c47cc2d8b85af9d45c5cac9", "filename": "gcc/loop.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d85428e234930c9d1352d1e5494b5b245dcd1a22/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d85428e234930c9d1352d1e5494b5b245dcd1a22/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=d85428e234930c9d1352d1e5494b5b245dcd1a22", "patch": "@@ -4699,13 +4699,24 @@ loop_givs_reduce (struct loop *loop, struct iv_class *bl)\n \t     this is an address giv, then try to put the increment\n \t     immediately after its use, so that flow can create an\n \t     auto-increment addressing mode.  */\n+\t  /* Don't do this for loops entered at the bottom, to avoid\n+\t     this invalid transformation:\n+\t\tjmp L;\t        ->          jmp L;\n+\t     TOP:\t\t\tTOP:\n+\t\tuse giv\t\t\t    use giv\n+\t     L:\t\t\t\t    inc giv\n+\t\tinc biv\t\t\tL:\n+\t\ttest biv\t\t    test giv\n+\t\tcbr TOP\t\t\t    cbr TOP\n+\t  */\n \t  if (v->giv_type == DEST_ADDR && bl->biv_count == 1\n \t      && bl->biv->always_executed && ! bl->biv->maybe_multiple\n \t      /* We don't handle reversed biv's because bl->biv->insn\n \t\t does not have a valid INSN_LUID.  */\n \t      && ! bl->reversed\n \t      && v->always_executed && ! v->maybe_multiple\n-\t      && INSN_UID (v->insn) < max_uid_for_loop)\n+\t      && INSN_UID (v->insn) < max_uid_for_loop\n+\t      && !loop->top)\t\n \t    {\n \t      /* If other giv's have been combined with this one, then\n \t\t this will work only if all uses of the other giv's occur"}]}