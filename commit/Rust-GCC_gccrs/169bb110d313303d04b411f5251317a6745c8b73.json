{"sha": "169bb110d313303d04b411f5251317a6745c8b73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTY5YmIxMTBkMzEzMzAzZDA0YjQxMWY1MjUxMzE3YTY3NDVjOGI3Mw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-10-11T17:49:39Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-10-11T17:49:39Z"}, "message": "posix-threads.h <__alpha__> (_Jv_ThreadId_t): Use void*.\n\n        * include/posix-threads.h <__alpha__> (_Jv_ThreadId_t): Use void*.\n        (_Jv_ThreadSelf): Use __builtin_thread_pointer.\n\nFrom-SVN: r88894", "tree": {"sha": "13bc252031e17943dccb30bfd350a760c75d22a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13bc252031e17943dccb30bfd350a760c75d22a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/169bb110d313303d04b411f5251317a6745c8b73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/169bb110d313303d04b411f5251317a6745c8b73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/169bb110d313303d04b411f5251317a6745c8b73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/169bb110d313303d04b411f5251317a6745c8b73/comments", "author": null, "committer": null, "parents": [{"sha": "176ba83391a86ff69a205fafabc4782e6a067605", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/176ba83391a86ff69a205fafabc4782e6a067605", "html_url": "https://github.com/Rust-GCC/gccrs/commit/176ba83391a86ff69a205fafabc4782e6a067605"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "7734e0ee571f9d07af4f3e6bd671e78b7b06d90f", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169bb110d313303d04b411f5251317a6745c8b73/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169bb110d313303d04b411f5251317a6745c8b73/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=169bb110d313303d04b411f5251317a6745c8b73", "patch": "@@ -1,3 +1,8 @@\n+2004-10-11  Richard Henderson  <rth@redhat.com>\n+\n+\t* include/posix-threads.h <__alpha__> (_Jv_ThreadId_t): Use void*.\n+\t(_Jv_ThreadSelf): Use __builtin_thread_pointer.\n+\n 2004-10-08  Bryce McKinlay  <mckinlay@redhat.com>\n \n \t* java/util/Calendar.java (set): Invalidate DST_OFFSET"}, {"sha": "ccb69ada1a2677bdd97f72459891809ba96715b4", "filename": "libjava/include/posix-threads.h", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169bb110d313303d04b411f5251317a6745c8b73/libjava%2Finclude%2Fposix-threads.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169bb110d313303d04b411f5251317a6745c8b73/libjava%2Finclude%2Fposix-threads.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fposix-threads.h?ref=169bb110d313303d04b411f5251317a6745c8b73", "patch": "@@ -241,23 +241,12 @@ _Jv_ThreadSelf (void)\n \n #ifdef __alpha__\n \n-#ifdef __FreeBSD__\n-#include <machine/pal.h>\n-#define PAL_rduniq PAL_rdunique\n-#elif defined (__osf__)\n-#include <machine/pal.h>\n-#else\n-#include <asm/pal.h>\n-#endif\n-\n-typedef unsigned long _Jv_ThreadId_t;\n+typedef void *_Jv_ThreadId_t;\n \n inline _Jv_ThreadId_t\n _Jv_ThreadSelf (void)\n {\n-  register unsigned long id __asm__(\"$0\");\n-  __asm__ (\"call_pal %1\" : \"=r\"(id) : \"i\"(PAL_rduniq));\n-  return id;\n+  return __builtin_thread_pointer ();\n }\n \n #define JV_SELF_DEFINED"}]}