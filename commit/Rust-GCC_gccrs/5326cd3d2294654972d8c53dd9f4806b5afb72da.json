{"sha": "5326cd3d2294654972d8c53dd9f4806b5afb72da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTMyNmNkM2QyMjk0NjU0OTcyZDhjNTNkZDlmNDgwNmI1YWZiNzJkYQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2002-11-26T17:36:14Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2002-11-26T17:36:14Z"}, "message": "* c-decl.c: (start_struct): Commonize flag setting.\n\nFrom-SVN: r59527", "tree": {"sha": "cf464f3ae55614a2e07ff3ab1da70a30d158dc41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf464f3ae55614a2e07ff3ab1da70a30d158dc41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5326cd3d2294654972d8c53dd9f4806b5afb72da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5326cd3d2294654972d8c53dd9f4806b5afb72da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5326cd3d2294654972d8c53dd9f4806b5afb72da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5326cd3d2294654972d8c53dd9f4806b5afb72da/comments", "author": null, "committer": null, "parents": [{"sha": "0412a4d4d73111b92a5360f68ed78ae8e4501d24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0412a4d4d73111b92a5360f68ed78ae8e4501d24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0412a4d4d73111b92a5360f68ed78ae8e4501d24"}], "stats": {"total": 25, "additions": 13, "deletions": 12}, "files": [{"sha": "c44e14c377d91e4467cb9adf52428c1da4a42190", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5326cd3d2294654972d8c53dd9f4806b5afb72da/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5326cd3d2294654972d8c53dd9f4806b5afb72da/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5326cd3d2294654972d8c53dd9f4806b5afb72da", "patch": "@@ -1,3 +1,7 @@\n+2002-11-26  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* c-decl.c: (start_struct): Commonize flag setting.\n+\n 2002-11-26  Jason Thorpe  <thorpej@wasabisystems.com>\n \n \t* config/rs6000/rs6000.h (RS6000_CPU_CPP_ENDIAN_BUILTINS): New."}, {"sha": "ef4840ac8fffe42d8816166b31971b536366f3de", "filename": "gcc/c-decl.c", "status": "modified", "additions": 9, "deletions": 12, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5326cd3d2294654972d8c53dd9f4806b5afb72da/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5326cd3d2294654972d8c53dd9f4806b5afb72da/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=5326cd3d2294654972d8c53dd9f4806b5afb72da", "patch": "@@ -4954,25 +4954,22 @@ start_struct (code, name)\n     ref = lookup_tag (code, name, current_binding_level, 1);\n   if (ref && TREE_CODE (ref) == code)\n     {\n-      C_TYPE_BEING_DEFINED (ref) = 1;\n-      TYPE_PACKED (ref) = flag_pack_struct;\n       if (TYPE_FIELDS (ref))\n         {\n \t  if (code == UNION_TYPE)\n-\t    error (\"redefinition of `union %s'\",\n-\t\t   IDENTIFIER_POINTER (name));\n+\t    error (\"redefinition of `union %s'\", IDENTIFIER_POINTER (name));\n           else\n-\t    error (\"redefinition of `struct %s'\",\n-\t\t   IDENTIFIER_POINTER (name));\n+\t    error (\"redefinition of `struct %s'\", IDENTIFIER_POINTER (name));\n \t}  \n-\n-      return ref;\n     }\n+  else\n+    {\n+      /* Otherwise create a forward-reference just so the tag is in scope.  */\n \n-  /* Otherwise create a forward-reference just so the tag is in scope.  */\n-\n-  ref = make_node (code);\n-  pushtag (name, ref);\n+      ref = make_node (code);\n+      pushtag (name, ref);\n+    }\n+  \n   C_TYPE_BEING_DEFINED (ref) = 1;\n   TYPE_PACKED (ref) = flag_pack_struct;\n   return ref;"}]}