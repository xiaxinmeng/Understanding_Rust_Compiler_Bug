{"sha": "c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ1YWJjYWY4ZmU3YzU4ODQ2OGQ2YzJjOWZiMGIyZmVjMjRlM2NmNw==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2004-10-06T23:16:43Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2004-10-06T23:16:43Z"}, "message": "* simplify.c (gfc_simplify_abs): Use mpfr_hypot for CABS.\n\nFrom-SVN: r88647", "tree": {"sha": "d32fe02580ebb8b9e04104f199396953a5678b02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d32fe02580ebb8b9e04104f199396953a5678b02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e749a8b426c8907c288e006388e85c015231788", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e749a8b426c8907c288e006388e85c015231788", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e749a8b426c8907c288e006388e85c015231788"}], "stats": {"total": 15, "additions": 4, "deletions": 11}, "files": [{"sha": "276e5864b8bd627d921f93f7b38d061933494732", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7", "patch": "@@ -4,6 +4,8 @@\n \t* simplify.c (twos_complement): New function.\n \t(gfc_simplify_ishft, gfc_simplify_ishftc): Revise.\n \n+\t* simplify.c (gfc_simplify_abs): Use mpfr_hypot for CABS.\n+\n 2004-10-06  Paul Brook  <paul@codesourcery.com>\n \n \t* trans-stmt.c (gfc_trans_simple_do): New function."}, {"sha": "253f68677a12367e636dc8c49a79ef95f2767b1e", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=c45abcaf8fe7c588468d6c2c9fb0b2fec24e3cf7", "patch": "@@ -176,7 +176,6 @@ gfc_expr *\n gfc_simplify_abs (gfc_expr * e)\n {\n   gfc_expr *result;\n-  mpfr_t a, b;\n \n   if (e->expr_type != EXPR_CONSTANT)\n     return NULL;\n@@ -203,17 +202,9 @@ gfc_simplify_abs (gfc_expr * e)\n       result = gfc_constant_result (BT_REAL, e->ts.kind, &e->where);\n \n       gfc_set_model_kind (e->ts.kind);\n-      mpfr_init (a);\n-      mpfr_init (b);\n-      /* FIXME:  Possible numerical problems.  */\n-      mpfr_mul (a, e->value.complex.r, e->value.complex.r, GFC_RND_MODE);\n-      mpfr_mul (b, e->value.complex.i, e->value.complex.i, GFC_RND_MODE);\n-      mpfr_add (a, a, b, GFC_RND_MODE);\n-      mpfr_sqrt (result->value.real, a, GFC_RND_MODE);\n-\n-      mpfr_clear (a);\n-      mpfr_clear (b);\n \n+      mpfr_hypot (result->value.real, e->value.complex.r, \n+\t\t  e->value.complex.i, GFC_RND_MODE);\n       result = range_check (result, \"CABS\");\n       break;\n "}]}