{"sha": "d0550c9b301ea97c735ea5e503848f155c7747a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDA1NTBjOWIzMDFlYTk3YzczNWVhNWU1MDM4NDhmMTU1Yzc3NDdhNQ==", "commit": {"author": {"name": "David O'Brien", "email": "obrien@FreeBSD.org", "date": "1999-06-02T00:08:20Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-06-02T00:08:20Z"}, "message": "configure.in (i[34567]86-*-freebsdelf): Don't include linux.h, i386/freebsd-elf.h no longer requires it.\n\n        * configure.in (i[34567]86-*-freebsdelf): Don't include linux.h,\n        i386/freebsd-elf.h no longer requires it.  Instead include svr4.h.\n        * configure: Rebuilt.\n        * i386/freebsd-elf.h (DEFAULT_VTABLE_THUNKS): Define.\n        (ASM_COMMENT_START, ASM_APP_ON, ASM_APP_OFF, SET_ASM_OP): Likewise.\n        (PREFERRED_DEBUGGING_TYPE, WCHAR_UNSIGNED): Likewise.\n        (SWITCH_TAKES_ARG): Likewise.\n        * i386/freebsd.h: Remove FREEBSD_NATIVE support.\n        * config/t-freebsd: Moved from config/i386/ so it can used for all\n        FreeBSD targets.\n\nFrom-SVN: r27305", "tree": {"sha": "698bc976bc30ff34007699ec57efd0021e2241f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/698bc976bc30ff34007699ec57efd0021e2241f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0550c9b301ea97c735ea5e503848f155c7747a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0550c9b301ea97c735ea5e503848f155c7747a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0550c9b301ea97c735ea5e503848f155c7747a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0550c9b301ea97c735ea5e503848f155c7747a5/comments", "author": null, "committer": null, "parents": [{"sha": "2f9929812a5a4a5594b7b41e19868e3300758504", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f9929812a5a4a5594b7b41e19868e3300758504", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f9929812a5a4a5594b7b41e19868e3300758504"}], "stats": {"total": 89, "additions": 55, "deletions": 34}, "files": [{"sha": "38bf6992fb7d8693e5817d23df76d92e4e7b3607", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d0550c9b301ea97c735ea5e503848f155c7747a5", "patch": "@@ -1,3 +1,16 @@\n+Wed Jun  2 00:52:34 1999  David O'Brien <obrien@FreeBSD.org>\n+\n+\t* configure.in (i[34567]86-*-freebsdelf): Don't include linux.h,\n+\ti386/freebsd-elf.h no longer requires it.  Instead include svr4.h.\n+\t* configure: Rebuilt.\n+\t* i386/freebsd-elf.h (DEFAULT_VTABLE_THUNKS): Define.\n+\t(ASM_COMMENT_START, ASM_APP_ON, ASM_APP_OFF, SET_ASM_OP): Likewise.\n+\t(PREFERRED_DEBUGGING_TYPE, WCHAR_UNSIGNED): Likewise.\n+\t(SWITCH_TAKES_ARG): Likewise.\n+\t* i386/freebsd.h: Remove FREEBSD_NATIVE support.\n+\t* config/t-freebsd: Moved from config/i386/ so it can used for all\n+\tFreeBSD targets.\n+\n Mon May 31 02:22:55 1999  Philippe De Muyter  <phdm@macqel.be>\n \n \t* m68k/x-mot3300 (XCFLAGS): Fixed to match stb.o, not f/stb.o."}, {"sha": "5668d3ef0ca1a9044c8990849fb174d96af23059", "filename": "gcc/config/i386/freebsd-elf.h", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfig%2Fi386%2Ffreebsd-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfig%2Fi386%2Ffreebsd-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffreebsd-elf.h?ref=d0550c9b301ea97c735ea5e503848f155c7747a5", "patch": "@@ -3,6 +3,7 @@\n    Contributed by Eric Youngdale.\n    Modified for stabs-in-ELF by H.J. Lu.\n    Adapted from GNU/Linux version by John Polstra.\n+   Continued development by David O'Brien <obrien@freebsd.org>\n \n This file is part of GNU CC.\n \n@@ -34,6 +35,23 @@ Boston, MA 02111-1307, USA.  */\n    libraries compiled with the native cc, so undef it. */\n #undef NO_DOLLAR_IN_LABEL\n \n+/* Use more efficient ``thunks'' to implement C++ vtables. */\n+#undef DEFAULT_VTABLE_THUNKS\n+#define DEFAULT_VTABLE_THUNKS 1\n+\n+/* Override the default comment-starter of \"/\".  */\n+#undef ASM_COMMENT_START\n+#define ASM_COMMENT_START \"#\"\n+\n+#undef ASM_APP_ON\n+#define ASM_APP_ON \"#APP\\n\"\n+\n+#undef ASM_APP_OFF\n+#define ASM_APP_OFF \"#NO_APP\\n\"\n+\n+#undef SET_ASM_OP\n+#define SET_ASM_OP\t\".set\"\n+\n /* This is how to output an element of a case-vector that is relative.\n    This is only used for PIC code.  See comments by the `casesi' insn in\n    i386.md for an explanation of the expression this outputs. */\n@@ -45,6 +63,10 @@ Boston, MA 02111-1307, USA.  */\n    necessary when compiling PIC code.  */\n #define JUMP_TABLES_IN_TEXT_SECTION (flag_pic)\n \n+/* Use stabs instead of DWARF debug format.  */\n+#undef PREFERRED_DEBUGGING_TYPE\n+#define PREFERRED_DEBUGGING_TYPE DBX_DEBUG\n+\n /* Copy this from the svr4 specifications... */\n /* Define the register numbers to be used in Dwarf debugging information.\n    The SVR4 reference port C compiler uses the following register numbers\n@@ -140,6 +162,9 @@ Boston, MA 02111-1307, USA.  */\n   \n #undef WCHAR_TYPE\n #define WCHAR_TYPE \"int\"\n+\n+#undef WCHAR_UNSIGNED\n+#define WCHAR_UNSIGNED 0\n    \n #undef WCHAR_TYPE_SIZE\n #define WCHAR_TYPE_SIZE BITS_PER_WORD\n@@ -150,6 +175,17 @@ Boston, MA 02111-1307, USA.  */\n #undef CPP_SPEC\n #define CPP_SPEC \"%(cpp_cpu) %{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__} %{posix:-D_POSIX_SOURCE}\"\n \n+/* This defines which switch letters take arguments.  On FreeBSD, most of\n+   the normal cases (defined in gcc.c) apply, and we also have -h* and\n+   -z* options (for the linker) (comming from svr4).\n+   We also have -R (alias --rpath), no -z, --soname (-h), --assert etc. */\n+\n+#define SWITCH_TAKES_ARG(CHAR) \\\n+  (DEFAULT_SWITCH_TAKES_ARG (CHAR) \\\n+   || (CHAR) == 'h' \\\n+   || (CHAR) == 'z' \\\n+   || (CHAR) == 'R')\n+\n #undef\tLIB_SPEC\n #if 1\n /* We no longer link with libc_p.a or libg.a by default. If you"}, {"sha": "89fe21623a96c9e352cf9ecb59df83c9b7d5b076", "filename": "gcc/config/i386/freebsd.h", "status": "modified", "additions": 0, "deletions": 27, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffreebsd.h?ref=d0550c9b301ea97c735ea5e503848f155c7747a5", "patch": "@@ -245,30 +245,3 @@ do {                                                                    \\\n #define STARTFILE_SPEC  \\\n   \"%{shared:c++rt0.o%s} \\\n    %{!shared:%{pg:gcrt0.o%s}%{!pg:%{static:scrt0.o%s}%{!static:crt0.o%s}}}\"\n-\n-/* This is defined when gcc is compiled in the BSD-directory-tree, and must\n- * make up for the gap to all the stuff done in the GNU-makefiles.\n- */\n-\n-#ifdef FREEBSD_NATIVE\n-\n-#define INCLUDE_DEFAULTS { \\\n-\t{ \"/usr/include\", 0, 0, 0 }, \\\n-\t{ \"/usr/include/g++\", \"G++\", 1, 1 }, \\\n-\t{ 0, 0, 0, 0} \\\n-\t}\n-\n-#undef MD_EXEC_PREFIX\n-#define MD_EXEC_PREFIX \"/usr/libexec/\"\n-\n-#undef STANDARD_STARTFILE_PREFIX\n-#define STANDARD_STARTFILE_PREFIX \"/usr/lib\"\n-\n-#if 0 /* This is very wrong!!! */\n-#define DEFAULT_TARGET_MACHINE \"i386-unknown-freebsd_1.0\"\n-#define GPLUSPLUS_INCLUDE_DIR \"/usr/local/lib/gcc-lib/i386-unknown-freebsd_1.0/2.5.8/include\"\n-#define TOOL_INCLUDE_DIR \"/usr/local/i386-unknown-freebsd_1.0/include\"\n-#define GCC_INCLUDE_DIR \"/usr/local/lib/gcc-lib/i386-unknown-freebsd_1.0/2.5.8/include\"\n-#endif\n-\n-#endif /* FREEBSD_NATIVE */"}, {"sha": "998168634298041c2b80d6a1cd5df710633b69c2", "filename": "gcc/config/t-freebsd", "status": "renamed", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfig%2Ft-freebsd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfig%2Ft-freebsd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-freebsd?ref=d0550c9b301ea97c735ea5e503848f155c7747a5", "patch": "@@ -2,4 +2,3 @@\n STMP_FIXPROTO =\n # Use only native include files\n USER_H = $(EXTRA_HEADERS) $(LANG_EXTRA_HEADERS)\n-", "previous_filename": "gcc/config/i386/t-freebsd"}, {"sha": "dacbe34ba064a87c65061a876e50d81f6d92517b", "filename": "gcc/configure", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=d0550c9b301ea97c735ea5e503848f155c7747a5", "patch": "@@ -3537,16 +3537,16 @@ for machine in $build $host $target; do\n #\t\tuse_collect2=yes\n \t\t;;\n \ti[34567]86-*-freebsdelf*)\n-\t\ttm_file=\"i386/i386.h i386/att.h linux.h i386/freebsd-elf.h i386/perform.h\"\n+\t\ttm_file=\"i386/i386.h i386/att.h svr4.h i386/freebsd-elf.h i386/perform.h\"\n \t\textra_parts=\"crtbegin.o crtbeginS.o crtend.o crtendS.o\"\n-\t\ttmake_file=i386/t-freebsd\n+\t\ttmake_file=t-freebsd\n \t\tgas=yes\n \t\tgnu_ld=yes\n \t\tstabs=yes\n \t\t;;\n \ti[34567]86-*-freebsd*)\n \t\ttm_file=i386/freebsd.h\n-\t\ttmake_file=i386/t-freebsd\n+\t\ttmake_file=t-freebsd\n \t\t;;\n \ti[34567]86-*-netbsd*)\n \t\ttm_file=i386/netbsd.h"}, {"sha": "2b0b9c2a7505295ef9990686336a15db22f5cffa", "filename": "gcc/configure.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0550c9b301ea97c735ea5e503848f155c7747a5/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=d0550c9b301ea97c735ea5e503848f155c7747a5", "patch": "@@ -1138,9 +1138,9 @@ changequote([,])dnl\n changequote(,)dnl\n \ti[34567]86-*-freebsdelf*)\n changequote([,])dnl\n-\t\ttm_file=\"i386/i386.h i386/att.h linux.h i386/freebsd-elf.h i386/perform.h\"\n+\t\ttm_file=\"i386/i386.h i386/att.h svr4.h i386/freebsd-elf.h i386/perform.h\"\n \t\textra_parts=\"crtbegin.o crtbeginS.o crtend.o crtendS.o\"\n-\t\ttmake_file=i386/t-freebsd\n+\t\ttmake_file=t-freebsd\n \t\tgas=yes\n \t\tgnu_ld=yes\n \t\tstabs=yes\n@@ -1149,7 +1149,7 @@ changequote(,)dnl\n \ti[34567]86-*-freebsd*)\n changequote([,])dnl\n \t\ttm_file=i386/freebsd.h\n-\t\ttmake_file=i386/t-freebsd\n+\t\ttmake_file=t-freebsd\n \t\t;;\n changequote(,)dnl\n \ti[34567]86-*-netbsd*)"}]}