{"sha": "a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTRlOGVhN2Y0MTlkM2ViZGJjNTJhODY1MDJiZjkyNDI3Mzk4NGEwZg==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2005-06-29T15:34:57Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2005-06-29T15:34:57Z"}, "message": "re PR middle-end/21969 (ICE on float __attribute__((vector_size(2048))))\n\n\tPR middle-end/21969\n\t* tree.h (TYPE_VECTOR_SUBPARTS): Change to shift expression.\n\t(SET_TYPE_VECTOR_SUBPARTS): New.\n\t* tree.c (make_vector_type): Replace TYPE_VECTOR_SUBPARTS with\n\tSET_TYPE_VECTOR_SUBPARTS.\n\t* tree-vect-transform.c (vect_transform_loop): Add cast.\n\nFrom-SVN: r101423", "tree": {"sha": "108ab57403c614d7414706d5ee2c44f155666064", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/108ab57403c614d7414706d5ee2c44f155666064"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/comments", "author": null, "committer": null, "parents": [{"sha": "63296cb1fedf5f58b90783fab73c90760b5e315b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63296cb1fedf5f58b90783fab73c90760b5e315b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63296cb1fedf5f58b90783fab73c90760b5e315b"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "0e44859bc7b722e65ce84fca71dfbb5a8ea2ec7e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "patch": "@@ -1,3 +1,12 @@\n+2005-06-29  Steve Ellcey  <sje@cup.hp.com>\n+\n+\tPR middle-end/21969\n+\t* tree.h (TYPE_VECTOR_SUBPARTS): Change to shift expression.\n+\t(SET_TYPE_VECTOR_SUBPARTS): New.\n+\t* tree.c (make_vector_type): Replace TYPE_VECTOR_SUBPARTS with\n+\tSET_TYPE_VECTOR_SUBPARTS.\n+\t* tree-vect-transform.c (vect_transform_loop): Add cast.\n+\n 2005-06-29  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* config/s390/s390.c (s390_decompose_address): Accept invalid"}, {"sha": "7d153099c955bfb8bbd2adbb134bb8ede6c584b2", "filename": "gcc/tree-vect-transform.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2Ftree-vect-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2Ftree-vect-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-transform.c?ref=a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "patch": "@@ -2771,7 +2771,7 @@ vect_transform_loop (loop_vec_info loop_vinfo,\n \t             units and no inner unrolling is necessary.  */\n \t  gcc_assert \n \t\t(TYPE_VECTOR_SUBPARTS (STMT_VINFO_VECTYPE (stmt_info))\n-\t\t == vectorization_factor);\n+\t\t == (unsigned HOST_WIDE_INT) vectorization_factor);\n \n \t  /* -------- vectorize statement ------------ */\n \t  if (vect_print_dump_info (REPORT_DETAILS, UNKNOWN_LOC))"}, {"sha": "0088a9b221615efeb54f4df936ace91943d14fd9", "filename": "gcc/tree.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "patch": "@@ -5710,7 +5710,7 @@ make_vector_type (tree innertype, int nunits, enum machine_mode mode)\n   tree t = make_node (VECTOR_TYPE);\n \n   TREE_TYPE (t) = TYPE_MAIN_VARIANT (innertype);\n-  TYPE_VECTOR_SUBPARTS (t) = nunits;\n+  SET_TYPE_VECTOR_SUBPARTS (t, nunits);\n   TYPE_MODE (t) = mode;\n   TYPE_READONLY (t) = TYPE_READONLY (innertype);\n   TYPE_VOLATILE (t) = TYPE_VOLATILE (innertype);"}, {"sha": "191ba13314184dcfd99dd84487f1ecd313aa7d50", "filename": "gcc/tree.h", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4e8ea7f419d3ebdbc52a86502bf924273984a0f/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=a4e8ea7f419d3ebdbc52a86502bf924273984a0f", "patch": "@@ -1667,7 +1667,12 @@ struct tree_block GTY(())\n \n /* For a VECTOR_TYPE, this is the number of sub-parts of the vector.  */\n #define TYPE_VECTOR_SUBPARTS(VECTOR_TYPE) \\\n-  (VECTOR_TYPE_CHECK (VECTOR_TYPE)->type.precision)\n+  (((unsigned HOST_WIDE_INT) 1) \\\n+   << VECTOR_TYPE_CHECK (VECTOR_TYPE)->type.precision)\n+\n+/* Set precision to n when we have 2^n sub-parts of the vector.  */\n+#define SET_TYPE_VECTOR_SUBPARTS(VECTOR_TYPE, X) \\\n+  (VECTOR_TYPE_CHECK (VECTOR_TYPE)->type.precision = exact_log2 (X))\n \n /* Indicates that objects of this type must be initialized by calling a\n    function when they are created.  */"}]}