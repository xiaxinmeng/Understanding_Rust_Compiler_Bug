{"sha": "89c3cbc686697a14bfb603da5e187331464e696b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODljM2NiYzY4NjY5N2ExNGJmYjYwM2RhNWUxODczMzE0NjRlNjk2Yg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2008-03-01T18:22:52Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2008-03-01T18:22:52Z"}, "message": "ifcvt.c (noce_process_if_block): Try to handle only the then block if the else block exists but isn't suitable.\n\n* ifcvt.c (noce_process_if_block): Try to handle only the then\nblock if the else block exists but isn't suitable.\n\nFrom-SVN: r132803", "tree": {"sha": "325127064d5304b40c378df2ef0686f3fdf5d5c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/325127064d5304b40c378df2ef0686f3fdf5d5c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/89c3cbc686697a14bfb603da5e187331464e696b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89c3cbc686697a14bfb603da5e187331464e696b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89c3cbc686697a14bfb603da5e187331464e696b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89c3cbc686697a14bfb603da5e187331464e696b/comments", "author": null, "committer": null, "parents": [{"sha": "5eb4a9af17425b88532437c4c1c97bef313ac443", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eb4a9af17425b88532437c4c1c97bef313ac443", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5eb4a9af17425b88532437c4c1c97bef313ac443"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "216d321498bd1a5bec9220f3656aeb7bb608c945", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89c3cbc686697a14bfb603da5e187331464e696b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89c3cbc686697a14bfb603da5e187331464e696b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=89c3cbc686697a14bfb603da5e187331464e696b", "patch": "@@ -1,3 +1,8 @@\n+2008-03-01  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* ifcvt.c (noce_process_if_block): Try to handle only the then\n+\tblock if the else block exists but isn't suitable.\n+\n 2008-03-01  Janne Blomqvist  <jb@gcc.gnu.org>\n \n \tPR gcc/35063"}, {"sha": "4fd98d010d37e37bf0ca28a13b80096940900f0c", "filename": "gcc/ifcvt.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89c3cbc686697a14bfb603da5e187331464e696b/gcc%2Fifcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89c3cbc686697a14bfb603da5e187331464e696b/gcc%2Fifcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fifcvt.c?ref=89c3cbc686697a14bfb603da5e187331464e696b", "patch": "@@ -2245,6 +2245,7 @@ noce_process_if_block (struct noce_if_info *if_info)\n \t  || !NONJUMP_INSN_P (insn_b)\n \t  || (set_b = single_set (insn_b)) == NULL_RTX\n \t  || ! rtx_equal_p (x, SET_DEST (set_b))\n+\t  || ! noce_operand_ok (SET_SRC (set_b))\n \t  || reg_overlap_mentioned_p (x, SET_SRC (set_b))\n \t  || modified_between_p (SET_SRC (set_b),\n \t\t\t\t PREV_INSN (if_info->cond_earliest), jump)\n@@ -2290,6 +2291,7 @@ noce_process_if_block (struct noce_if_info *if_info)\n   if (! noce_operand_ok (a) || ! noce_operand_ok (b))\n     return FALSE;\n \n+ retry:\n   /* Set up the info block for our subroutines.  */\n   if_info->insn_a = insn_a;\n   if_info->insn_b = insn_b;\n@@ -2387,6 +2389,13 @@ noce_process_if_block (struct noce_if_info *if_info)\n \tgoto success;\n     }\n \n+  if (!else_bb && set_b)\n+    {\n+      insn_b = set_b = NULL_RTX;\n+      b = orig_x;\n+      goto retry;\n+    }\n+\n   return FALSE;\n \n  success:"}]}