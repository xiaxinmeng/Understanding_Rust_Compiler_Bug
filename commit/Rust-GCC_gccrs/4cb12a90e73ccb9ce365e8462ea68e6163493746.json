{"sha": "4cb12a90e73ccb9ce365e8462ea68e6163493746", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNiMTJhOTBlNzNjY2I5Y2UzNjVlODQ2MmVhNjhlNjE2MzQ5Mzc0Ng==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2011-04-02T08:59:45Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-04-02T08:59:45Z"}, "message": "utils.c (gnat_pushdecl): If this is a non-artificial declaration of a pointer type...\n\n\t* gcc-interface/utils.c (gnat_pushdecl): If this is a non-artificial\n\tdeclaration of a pointer type, then set DECL_ORIGINAL_TYPE to a\n\tdistinct copy.\n\nFrom-SVN: r171885", "tree": {"sha": "d5038c6b13bc19996e82bcbc51df525f54af3324", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d5038c6b13bc19996e82bcbc51df525f54af3324"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4cb12a90e73ccb9ce365e8462ea68e6163493746", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cb12a90e73ccb9ce365e8462ea68e6163493746", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cb12a90e73ccb9ce365e8462ea68e6163493746", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cb12a90e73ccb9ce365e8462ea68e6163493746/comments", "author": null, "committer": null, "parents": [{"sha": "acccc61c771bfc3f78a49805a3382626314da520", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acccc61c771bfc3f78a49805a3382626314da520", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acccc61c771bfc3f78a49805a3382626314da520"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "766d2bcfdb56723357b98689179f625eff12d4b3", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cb12a90e73ccb9ce365e8462ea68e6163493746/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cb12a90e73ccb9ce365e8462ea68e6163493746/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4cb12a90e73ccb9ce365e8462ea68e6163493746", "patch": "@@ -1,3 +1,9 @@\n+2011-04-02  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/utils.c (gnat_pushdecl): If this is a non-artificial\n+\tdeclaration of a pointer type, then set DECL_ORIGINAL_TYPE to a\n+\tdistinct copy.\n+\n 2011-04-02  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity): Do not force the"}, {"sha": "bd6badd5929c6fbe40cd18c91d04cab76e5df6d7", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cb12a90e73ccb9ce365e8462ea68e6163493746/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cb12a90e73ccb9ce365e8462ea68e6163493746/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=4cb12a90e73ccb9ce365e8462ea68e6163493746", "patch": "@@ -560,12 +560,16 @@ gnat_pushdecl (tree decl, Node_Id gnat_node)\n \n       if (!(TYPE_NAME (t) && TREE_CODE (TYPE_NAME (t)) == TYPE_DECL))\n \t{\n-\t  /* Array types aren't tagged types in the C sense so we force the\n+\t  /* Array and pointer types aren't \"tagged\" types so we force the\n \t     type to be associated with its typedef in the DWARF back-end,\n \t     in order to make sure that the latter is always preserved.  */\n-\t  if (!DECL_ARTIFICIAL (decl) && TREE_CODE (t) == ARRAY_TYPE)\n+\t  if (!DECL_ARTIFICIAL (decl)\n+\t      && (TREE_CODE (t) == ARRAY_TYPE\n+\t\t  || TREE_CODE (t) == POINTER_TYPE))\n \t    {\n \t      tree tt = build_distinct_type_copy (t);\n+\t      if (TREE_CODE (t) == POINTER_TYPE)\n+\t\tTYPE_NEXT_PTR_TO (t) = tt;\n \t      TYPE_NAME (tt) = DECL_NAME (decl);\n \t      TYPE_STUB_DECL (tt) = TYPE_STUB_DECL (t);\n \t      DECL_ORIGINAL_TYPE (decl) = tt;"}]}