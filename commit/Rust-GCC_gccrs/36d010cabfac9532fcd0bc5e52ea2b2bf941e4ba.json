{"sha": "36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzZkMDEwY2FiZmFjOTUzMmZjZDBiYzVlNTJlYTJiMmJmOTQxZTRiYQ==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@waitaki.otago.ac.nz", "date": "2002-06-10T05:11:42Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2002-06-10T05:11:42Z"}, "message": "Don't use RTL inlining. Fix for PR java/6820.\n\n\t* lang.c (LANG_HOOKS_POST_OPTIONS): Define.\n\t(flag_really_inline): New.\n\t(java_decode_option): Set flag_really_inline if -finline-functions\n\tis seen.\n\t(java_post_options): New function. Turn off inlining unless\n\tflag_really_inline is set.\n\nFrom-SVN: r54430", "tree": {"sha": "99001a6d7eab93aa8b30cb236349b128c025b9d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99001a6d7eab93aa8b30cb236349b128c025b9d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba/comments", "author": null, "committer": null, "parents": [{"sha": "5f555088adbd3bf7253fd5b567f44a3c11999124", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f555088adbd3bf7253fd5b567f44a3c11999124", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f555088adbd3bf7253fd5b567f44a3c11999124"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "a77445dbe865812f1f508a8beeb13822ed38e0a4", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba", "patch": "@@ -1,3 +1,13 @@\n+2002-06-10  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\tDon't use RTL inlining. Fix for PR java/6820.\n+\t* lang.c (LANG_HOOKS_POST_OPTIONS): Define.\n+\t(flag_really_inline): New.\n+\t(java_decode_option): Set flag_really_inline if -finline-functions\n+\tis seen.\n+\t(java_post_options): New function. Turn off inlining unless\n+\tflag_really_inline is set.\n+\n 2002-06-10  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n \n \t* gjavah.c (throwable_p): Accept argument as either a classname or "}, {"sha": "60dc67b5054dbd242215c6cb80ba64850cdf8d18", "filename": "gcc/java/lang.c", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba/gcc%2Fjava%2Flang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba/gcc%2Fjava%2Flang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flang.c?ref=36d010cabfac9532fcd0bc5e52ea2b2bf941e4ba", "patch": "@@ -51,6 +51,8 @@ struct string_option\n static const char *java_init PARAMS ((const char *));\n static void java_finish PARAMS ((void));\n static void java_init_options PARAMS ((void));\n+static void java_post_options PARAMS ((void));\n+\n static int java_decode_option PARAMS ((int, char **));\n static void put_decl_string PARAMS ((const char *, int));\n static void put_decl_node PARAMS ((tree));\n@@ -170,6 +172,10 @@ int flag_store_check = 1;\n /* When non zero, print extra version information.  */\n static int version_flag = 0;\n \n+/* Set non-zero if the user specified -finline-functions on the command \n+   line.  */\n+int flag_really_inline = 0;\n+\n /* Table of language-dependent -f options.\n    STRING is the option name.  VARIABLE is the address of the variable.\n    ON_VALUE is the value to store in VARIABLE\n@@ -228,6 +234,8 @@ struct language_function GTY(())\n #define LANG_HOOKS_INIT_OPTIONS java_init_options\n #undef LANG_HOOKS_DECODE_OPTION\n #define LANG_HOOKS_DECODE_OPTION java_decode_option\n+#undef LANG_HOOKS_POST_OPTIONS\n+#define LANG_HOOKS_POST_OPTIONS java_post_options\n #undef LANG_HOOKS_PARSE_FILE\n #define LANG_HOOKS_PARSE_FILE java_parse_file\n #undef LANG_HOOKS_MARK_ADDRESSABLE\n@@ -388,6 +396,14 @@ java_decode_option (argc, argv)\n       return 1;\n     }\n #undef ARG\n+#define ARG \"-finline-functions\"\n+  if (strncmp (p, ARG, sizeof (ARG) - 1) == 0)\n+    {\n+      flag_inline_functions = 1;\n+      flag_really_inline = 1;\n+      return 1;\n+    }\n+#undef ARG\n \n   if (p[0] == '-' && p[1] == 'f')\n     {\n@@ -763,4 +779,16 @@ java_init_options ()\n   flag_trapping_math = 0;\n }\n \n+/* Post-switch processing.  */\n+static void\n+java_post_options ()\n+{\n+  /* Turn off RTL inliner unless -finline-functions was really specified.  */\n+  if (flag_really_inline == 0)\n+    {\n+      flag_no_inline = 1;\n+      flag_inline_functions = 0;\n+    }\n+}\n+\n #include \"gt-java-lang.h\""}]}