{"sha": "2b7807f0ac8fbf5b79dc45380053a47b7114b12a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI3ODA3ZjBhYzhmYmY1Yjc5ZGM0NTM4MDA1M2E0N2I3MTE0YjEyYQ==", "commit": {"author": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2021-04-17T16:42:30Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2021-04-17T16:51:25Z"}, "message": "Enable RichLocations for multiple candidate errors in Path resolution\n\nThis means we get a single error for the failure but still see the location\nfor each dup.", "tree": {"sha": "056da82d9f62ec02115e61c8535383c7a246d8ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/056da82d9f62ec02115e61c8535383c7a246d8ed"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b7807f0ac8fbf5b79dc45380053a47b7114b12a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b7807f0ac8fbf5b79dc45380053a47b7114b12a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b7807f0ac8fbf5b79dc45380053a47b7114b12a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b7807f0ac8fbf5b79dc45380053a47b7114b12a/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "01486c14135646ea011dfa2c3a1dfbf59abbe436", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01486c14135646ea011dfa2c3a1dfbf59abbe436", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01486c14135646ea011dfa2c3a1dfbf59abbe436"}], "stats": {"total": 19, "additions": 11, "deletions": 8}, "files": [{"sha": "5dda90a2e0926772b7a18259f216697258e9a2c1", "filename": "gcc/rust/typecheck/rust-hir-path-probe.h", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b7807f0ac8fbf5b79dc45380053a47b7114b12a/gcc%2Frust%2Ftypecheck%2Frust-hir-path-probe.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b7807f0ac8fbf5b79dc45380053a47b7114b12a/gcc%2Frust%2Ftypecheck%2Frust-hir-path-probe.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-hir-path-probe.h?ref=2b7807f0ac8fbf5b79dc45380053a47b7114b12a", "patch": "@@ -129,31 +129,34 @@ class ReportMultipleCandidateError : private TypeCheckBase\n   static void Report (std::vector<PathProbeCandidate> &candidates,\n \t\t      const HIR::PathIdentSegment &query, Location query_locus)\n   {\n-    rust_error_at (query_locus, \"multiple applicable items in scope for: %s\",\n-\t\t   query.as_string ().c_str ());\n-\n-    ReportMultipleCandidateError visitor;\n+    RichLocation r (query_locus);\n+    ReportMultipleCandidateError visitor (r);\n     for (auto &c : candidates)\n       c.impl_item->accept_vis (visitor);\n+\n+    rust_error_at (r, \"multiple applicable items in scope for: %s\",\n+\t\t   query.as_string ().c_str ());\n   }\n \n   void visit (HIR::ConstantItem &constant) override\n   {\n-    rust_error_at (constant.get_locus (), \"possible candidate\");\n+    r.add_range (constant.get_locus ());\n   }\n \n   void visit (HIR::Function &function) override\n   {\n-    rust_error_at (function.get_locus (), \"possible candidate\");\n+    r.add_range (function.get_locus ());\n   }\n \n   void visit (HIR::Method &method) override\n   {\n-    rust_error_at (method.get_locus (), \"possible candidate\");\n+    r.add_range (method.get_locus ());\n   }\n \n private:\n-  ReportMultipleCandidateError () : TypeCheckBase () {}\n+  ReportMultipleCandidateError (RichLocation &r) : TypeCheckBase (), r (r) {}\n+\n+  RichLocation &r;\n };\n \n } // namespace Resolver"}]}