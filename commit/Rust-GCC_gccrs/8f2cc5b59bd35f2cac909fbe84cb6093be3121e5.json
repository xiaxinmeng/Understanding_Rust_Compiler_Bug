{"sha": "8f2cc5b59bd35f2cac909fbe84cb6093be3121e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGYyY2M1YjU5YmQzNWYyY2FjOTA5ZmJlODRjYjYwOTNiZTMxMjFlNQ==", "commit": {"author": {"name": "Andrew Haley", "email": "aph@redhat.com", "date": "2006-07-28T16:44:49Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2006-07-28T16:44:49Z"}, "message": "natSharedLibLoader.cc (init): Don't set curLoader to VMClassLoader::bootLoader.\n\n2006-07-28  Andrew Haley  <aph@redhat.com>\n\n        * gnu/gcj/runtime/natSharedLibLoader.cc (init): Don't set\n        curLoader to VMClassLoader::bootLoader.\n\nFrom-SVN: r115797", "tree": {"sha": "cbee3ee9c2808ec4ca919383d4d076cbe8dce65d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cbee3ee9c2808ec4ca919383d4d076cbe8dce65d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5/comments", "author": {"login": "theRealAph", "id": 254637, "node_id": "MDQ6VXNlcjI1NDYzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/254637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theRealAph", "html_url": "https://github.com/theRealAph", "followers_url": "https://api.github.com/users/theRealAph/followers", "following_url": "https://api.github.com/users/theRealAph/following{/other_user}", "gists_url": "https://api.github.com/users/theRealAph/gists{/gist_id}", "starred_url": "https://api.github.com/users/theRealAph/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theRealAph/subscriptions", "organizations_url": "https://api.github.com/users/theRealAph/orgs", "repos_url": "https://api.github.com/users/theRealAph/repos", "events_url": "https://api.github.com/users/theRealAph/events{/privacy}", "received_events_url": "https://api.github.com/users/theRealAph/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "464fc7a19978df2b22cf8683279cd1f14a161a6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/464fc7a19978df2b22cf8683279cd1f14a161a6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/464fc7a19978df2b22cf8683279cd1f14a161a6e"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "be82c0802f60ef87a8b183d9609cf08fe8ef05f9", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=8f2cc5b59bd35f2cac909fbe84cb6093be3121e5", "patch": "@@ -1,3 +1,8 @@\n+2006-07-28  Andrew Haley  <aph@redhat.com>\n+\n+\t* gnu/gcj/runtime/natSharedLibLoader.cc (init): Don't set\n+\tcurLoader to VMClassLoader::bootLoader.\n+\n 2006-07-28  Gary Benson  <gbenson@redhat.com>\n \t    Casey Marshall <csm@gnu.org>\n "}, {"sha": "e20ccb9e33626c33f7444ecc960e0470ff59691c", "filename": "libjava/gnu/gcj/runtime/natSharedLibLoader.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5/libjava%2Fgnu%2Fgcj%2Fruntime%2FnatSharedLibLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f2cc5b59bd35f2cac909fbe84cb6093be3121e5/libjava%2Fgnu%2Fgcj%2Fruntime%2FnatSharedLibLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fruntime%2FnatSharedLibLoader.cc?ref=8f2cc5b59bd35f2cac909fbe84cb6093be3121e5", "patch": "@@ -20,6 +20,8 @@ details.  */\n #include <java/lang/UnsupportedOperationException.h>\n #include <java/lang/UnknownError.h>\n \n+#include <java/lang/VMClassLoader.h>\n+\n // If we're using the Boehm GC, then we need this include to override dlopen.\n #ifdef HAVE_BOEHM_GC\n // Set GC_DEBUG before including gc.h!\n@@ -87,7 +89,8 @@ gnu::gcj::runtime::SharedLibHelper::init(void)\n     flags = RTLD_GLOBAL | RTLD_LAZY;\n   JvSynchronize dummy1(&java::lang::Class::class$);\n   SharedLibDummy dummy2;\n-  curLoader = loader;\n+  curLoader = ((void*)loader == java::lang::VMClassLoader::bootLoader\n+\t       ? NULL : loader);\n   curHelper = this;\n   _Jv_RegisterClassHook = _Jv_sharedlib_register_hook;\n   _Jv_RegisterCoreHook = core_hook;"}]}