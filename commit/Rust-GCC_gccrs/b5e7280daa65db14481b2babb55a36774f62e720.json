{"sha": "b5e7280daa65db14481b2babb55a36774f62e720", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjVlNzI4MGRhYTY1ZGIxNDQ4MWIyYmFiYjU1YTM2Nzc0ZjYyZTcyMA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2009-09-19T04:45:00Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2009-09-19T04:45:00Z"}, "message": "re PR fortran/41328 (bad iostat when reading DOS file in a character array (non-advancing))\n\n2009-09-18  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/41328\n\t* gfortran.dg/cr_lf.f90: Modify test to include check that no EOR with\n\tEOF works.\n\nFrom-SVN: r151878", "tree": {"sha": "2842919674deb6c28b088bcac92b75ef26281fe7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2842919674deb6c28b088bcac92b75ef26281fe7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5e7280daa65db14481b2babb55a36774f62e720", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5e7280daa65db14481b2babb55a36774f62e720", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5e7280daa65db14481b2babb55a36774f62e720", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5e7280daa65db14481b2babb55a36774f62e720/comments", "author": null, "committer": null, "parents": [{"sha": "bf187ce8befc5d9e721d2f06c5c4ee7b69bebbf4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf187ce8befc5d9e721d2f06c5c4ee7b69bebbf4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf187ce8befc5d9e721d2f06c5c4ee7b69bebbf4"}], "stats": {"total": 42, "additions": 38, "deletions": 4}, "files": [{"sha": "ed2939911a6cdea2da46b49024af09b592610e84", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5e7280daa65db14481b2babb55a36774f62e720/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5e7280daa65db14481b2babb55a36774f62e720/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b5e7280daa65db14481b2babb55a36774f62e720", "patch": "@@ -1,3 +1,9 @@\n+2009-09-18  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/41328\n+\t* gfortran.dg/cr_lf.f90: Modify test to include check that no EOR with\n+\tEOF works.\n+\n 2009-09-18  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/nolinkage1{.C,.h,a.cc}: New."}, {"sha": "eb5500e01d3966c713b4d08bd82c183fb496e774", "filename": "gcc/testsuite/gfortran.dg/cr_lf.f90", "status": "modified", "additions": 32, "deletions": 4, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5e7280daa65db14481b2babb55a36774f62e720/gcc%2Ftestsuite%2Fgfortran.dg%2Fcr_lf.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5e7280daa65db14481b2babb55a36774f62e720/gcc%2Ftestsuite%2Fgfortran.dg%2Fcr_lf.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcr_lf.f90?ref=b5e7280daa65db14481b2babb55a36774f62e720", "patch": "@@ -4,11 +4,17 @@\n ! Test case prepared by Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n program main\n    implicit none\n-   integer :: iostat, n_chars_read\n+   integer :: iostat, n_chars_read, k\n    character(len=1) :: buffer(64) = \"\"\n-   open( unit=10, form=\"formatted\", access=\"stream\", status=\"scratch\")\n-   write(10, fmt=\"(a)\", advance=\"no\") \"a\\rb\\rc\\r\"\n-   rewind(10)\n+   character (len=80) :: u\n+\n+   ! Set up the test file with normal file end.\n+   open(unit=10, file=\"crlftest\", form=\"unformatted\", access=\"stream\",&\n+   & status=\"replace\")\n+   write(10) \"a\\rb\\rc\\r\" ! CR at the end of each record.\n+   close(10, status=\"keep\")\n+\n+   open(unit=10, file=\"crlftest\", form=\"formatted\", status=\"old\")\n    \n    read( unit=10, fmt='(64A)', advance='NO', iostat=iostat,          &\n          size=n_chars_read ) buffer\n@@ -33,4 +39,26 @@ program main\n    if (n_chars_read.ne.0) call abort\n    if (any(buffer(1:n_chars_read).ne.\"a\")) call abort\n    if (.not.is_iostat_end(iostat)) call abort\n+   close(10, status=\"delete\")\n+\n+   ! Set up the test file with normal file end.\n+   open(unit=10, file=\"crlftest\", form=\"unformatted\", access=\"stream\",&\n+   & status=\"replace\")\n+   write(10) \"a\\rb\\rc\\rno end of line marker\" ! Note, no CR at end of file.\n+   close(10, status=\"keep\")\n+\n+   open(unit=10, file=\"crlftest\", status='old')\n+\n+   do k = 1, 10\n+     read(10,'(a80)',end=101,err=100) u\n+     !print *,k,' : ',u(1:len_trim(u))\n+   enddo\n+   \n+100 continue\n+   close(10, status=\"delete\")\n+   call abort\n+\n+101 continue\n+   close(10, status=\"delete\")\n+   if (u(1:len_trim(u)).ne.\"no end of line marker\") call abort\n end program main"}]}