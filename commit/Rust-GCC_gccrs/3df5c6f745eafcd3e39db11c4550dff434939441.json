{"sha": "3df5c6f745eafcd3e39db11c4550dff434939441", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RmNWM2Zjc0NWVhZmNkM2UzOWRiMTFjNDU1MGRmZjQzNDkzOTQ0MQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2010-11-03T13:52:32Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2010-11-03T13:52:32Z"}, "message": "rs6000.c (rs6000_pic_labelno): Make static.\n\n\t* config/rs6000/rs6000.c (rs6000_pic_labelno): Make static.\n\t(rs6000_emit_load_toc_table): Don't use rs6000_pic_labelno when\n\tTARGET_SECURE_PLT.\n\t* config/rs6000/sysv4.h (rs6000_pic_labelno): Don't declare.\n\t* config/rs6000/rs6000.md (load_toc_v4_PIC_3b): Use \"b\" constraint\n\ton input, \"r\" on output.\n\nFrom-SVN: r166247", "tree": {"sha": "920c359e2b5bfc62fd6358d156406a39a10abc3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/920c359e2b5bfc62fd6358d156406a39a10abc3f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3df5c6f745eafcd3e39db11c4550dff434939441", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3df5c6f745eafcd3e39db11c4550dff434939441", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3df5c6f745eafcd3e39db11c4550dff434939441", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3df5c6f745eafcd3e39db11c4550dff434939441/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "22d8d6160281e66502cc39f5496119250f2b929c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22d8d6160281e66502cc39f5496119250f2b929c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22d8d6160281e66502cc39f5496119250f2b929c"}], "stats": {"total": 26, "additions": 16, "deletions": 10}, "files": [{"sha": "49e208e29e94d62967d6d7c1b3540a7da35733c3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3df5c6f745eafcd3e39db11c4550dff434939441", "patch": "@@ -1,3 +1,12 @@\n+2010-11-04  Alan Modra  <amodra@gmail.com>\n+\n+\t* config/rs6000/rs6000.c (rs6000_pic_labelno): Make static.\n+\t(rs6000_emit_load_toc_table): Don't use rs6000_pic_labelno when\n+\tTARGET_SECURE_PLT.\n+\t* config/rs6000/sysv4.h (rs6000_pic_labelno): Don't declare.\n+\t* config/rs6000/rs6000.md (load_toc_v4_PIC_3b): Use \"b\" constraint\n+\ton input, \"r\" on output.\n+\n 2010-11-03  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tImplemented -fobjc-std=objc1 flag."}, {"sha": "d7d94efae9f65212a2fb066882ee79a8eaf8a89a", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=3df5c6f745eafcd3e39db11c4550dff434939441", "patch": "@@ -193,7 +193,7 @@ static GTY(()) int common_mode_defined;\n \n /* Label number of label created for -mrelocatable, to call to so we can\n    get the address of the GOT section */\n-int rs6000_pic_labelno;\n+static int rs6000_pic_labelno;\n \n #ifdef USING_ELFOS_H\n /* Which abi to adhere to */\n@@ -18898,7 +18898,8 @@ rs6000_emit_load_toc_table (int fromprolog)\n       char buf[30];\n       rtx lab, tmp1, tmp2, got;\n \n-      ASM_GENERATE_INTERNAL_LABEL (buf, \"LCF\", rs6000_pic_labelno);\n+      lab = gen_label_rtx ();\n+      ASM_GENERATE_INTERNAL_LABEL (buf, \"L\", CODE_LABEL_NUMBER (lab));\n       lab = gen_rtx_SYMBOL_REF (Pmode, ggc_strdup (buf));\n       if (flag_pic == 2)\n \tgot = gen_rtx_SYMBOL_REF (Pmode, toc_label_name);\n@@ -18911,8 +18912,7 @@ rs6000_emit_load_toc_table (int fromprolog)\n \t  tmp2 = gen_reg_rtx (Pmode);\n \t}\n       emit_insn (gen_load_toc_v4_PIC_1 (lab));\n-      emit_move_insn (tmp1,\n-\t\t\t     gen_rtx_REG (Pmode, LR_REGNO));\n+      emit_move_insn (tmp1, gen_rtx_REG (Pmode, LR_REGNO));\n       emit_insn (gen_load_toc_v4_PIC_3b (tmp2, tmp1, got, lab));\n       emit_insn (gen_load_toc_v4_PIC_3c (dest, tmp2, got, lab));\n     }\n@@ -18939,8 +18939,7 @@ rs6000_emit_load_toc_table (int fromprolog)\n \t  symL = gen_rtx_SYMBOL_REF (Pmode, ggc_strdup (buf));\n \n \t  emit_insn (gen_load_toc_v4_PIC_1 (symF));\n-\t  emit_move_insn (dest,\n-\t\t\t  gen_rtx_REG (Pmode, LR_REGNO));\n+\t  emit_move_insn (dest, gen_rtx_REG (Pmode, LR_REGNO));\n \t  emit_insn (gen_load_toc_v4_PIC_2 (temp0, dest, symL, symF));\n \t}\n       else"}, {"sha": "1dbf52c3c3d8a424e2c487188603e6c7a5c415ce", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=3df5c6f745eafcd3e39db11c4550dff434939441", "patch": "@@ -12187,8 +12187,8 @@\n   [(set_attr \"type\" \"load\")])\n \n (define_insn \"load_toc_v4_PIC_3b\"\n-  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=b\")\n-\t(plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n+  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n+\t(plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t (high:SI\n \t\t   (minus:SI (match_operand:SI 2 \"symbol_ref_operand\" \"s\")\n \t\t\t     (match_operand:SI 3 \"symbol_ref_operand\" \"s\")))))]"}, {"sha": "de2ebd54028c61f6829065ddcedb3eee0058d313", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3df5c6f745eafcd3e39db11c4550dff434939441/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=3df5c6f745eafcd3e39db11c4550dff434939441", "patch": "@@ -402,8 +402,6 @@ do {\t\t\t\t\t\t\t\t\t\\\n    Some svr4 assemblers need to also have something extra said about the\n    function's return value.  We allow for that here.  */\n \n-extern int rs6000_pic_labelno;\n-\n /* Override elfos.h definition.  */\n #undef\tASM_DECLARE_FUNCTION_NAME\n #define ASM_DECLARE_FUNCTION_NAME(FILE, NAME, DECL)\t\t\t\\"}]}