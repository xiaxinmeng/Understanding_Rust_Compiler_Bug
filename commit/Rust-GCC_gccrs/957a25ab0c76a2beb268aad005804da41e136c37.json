{"sha": "957a25ab0c76a2beb268aad005804da41e136c37", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTU3YTI1YWIwYzc2YTJiZWIyNjhhYWQwMDU4MDRkYTQxZTEzNmMzNw==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-01-31T13:07:53Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-01-31T13:07:53Z"}, "message": "re PR tree-optimization/84132 (tree-data-ref.c:3938: poor coding ?)\n\n2018-01-31  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/84132\n\t* tree-data-ref.c (analyze_miv_subscript): Properly\n\tcheck whether evolution_function_is_affine_multivariate_p\n\tbefore calling gcd_of_steps_may_divide_p.\n\n\t* g++.dg/torture/pr84132.C: New testcase.\n\nFrom-SVN: r257232", "tree": {"sha": "d442cd53b63f1845e4293e36ab75ae5536aa9c27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d442cd53b63f1845e4293e36ab75ae5536aa9c27"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/957a25ab0c76a2beb268aad005804da41e136c37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/957a25ab0c76a2beb268aad005804da41e136c37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/957a25ab0c76a2beb268aad005804da41e136c37", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/957a25ab0c76a2beb268aad005804da41e136c37/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8ede319fa972ea06c54fe90deb88334b94401bcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ede319fa972ea06c54fe90deb88334b94401bcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ede319fa972ea06c54fe90deb88334b94401bcb"}], "stats": {"total": 34, "additions": 31, "deletions": 3}, "files": [{"sha": "b1e0891ba8c7c5bd4e01911e696cd6bf6eea775d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=957a25ab0c76a2beb268aad005804da41e136c37", "patch": "@@ -1,3 +1,10 @@\n+2018-01-31  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/84132\n+\t* tree-data-ref.c (analyze_miv_subscript): Properly\n+\tcheck whether evolution_function_is_affine_multivariate_p\n+\tbefore calling gcd_of_steps_may_divide_p.\n+\n 2018-01-31  Julia Koval  <julia.koval@intel.com>\n \n \tPR target/83618"}, {"sha": "e3f0c5aafccfa52265c9d5d77f9903aa3f1af627", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=957a25ab0c76a2beb268aad005804da41e136c37", "patch": "@@ -1,3 +1,8 @@\n+2018-01-31  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/84132\n+\t* g++.dg/torture/pr84132.C: New testcase.\n+\n 2018-01-31  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* g++.dg/torture/pr81360.C: Drop unintended -O2 from dg-options and"}, {"sha": "205b8f63812c78ad9ba6489b64d249b252d19fd5", "filename": "gcc/testsuite/g++.dg/torture/pr84132.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr84132.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr84132.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr84132.C?ref=957a25ab0c76a2beb268aad005804da41e136c37", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+\n+struct g {\n+    char b;\n+    unsigned char *d[];\n+} e;\n+unsigned char f;\n+void i()\n+{\n+  for (int h;; h++)\n+    {\n+      unsigned a = h;\n+      for (int c = 0; c < 256; c += 6)\n+\tfor (int h = c; h < c + 6; h++)\n+\t  e.d[h + a] = &f;\n+    }\n+}"}, {"sha": "0b6ad5fd5290b7373deea55b2f6b0449d7b7ace6", "filename": "gcc/tree-data-ref.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2Ftree-data-ref.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/957a25ab0c76a2beb268aad005804da41e136c37/gcc%2Ftree-data-ref.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-data-ref.c?ref=957a25ab0c76a2beb268aad005804da41e136c37", "patch": "@@ -3976,9 +3976,8 @@ analyze_miv_subscript (tree chrec_a,\n     }\n \n   else if (evolution_function_is_constant_p (difference)\n-\t   /* For the moment, the following is verified:\n-\t      evolution_function_is_affine_multivariate_p (chrec_a,\n-\t      loop_nest->num) */\n+\t   && evolution_function_is_affine_multivariate_p (chrec_a,\n+\t\t\t\t\t\t\t   loop_nest->num)\n \t   && !gcd_of_steps_may_divide_p (chrec_a, difference))\n     {\n       /* testsuite/.../ssa-chrec-33.c"}]}