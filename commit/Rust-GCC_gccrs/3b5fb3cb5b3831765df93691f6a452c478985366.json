{"sha": "3b5fb3cb5b3831765df93691f6a452c478985366", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I1ZmIzY2I1YjM4MzE3NjVkZjkzNjkxZjZhNDUyYzQ3ODk4NTM2Ng==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-04-18T15:02:06Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-04-18T15:02:06Z"}, "message": "re PR sanitizer/80444 (-fcompare-debug failures with -fsanitize-coverage=trace-pc)\n\n\tPR sanitizer/80444\n\t* sancov.c (sancov_pass): Use gsi_start_nondebug_after_labels_bb\n\tinstead of gsi_after_labels.\n\n\t* gcc.dg/sancov/pr80444.c: New test.\n\nFrom-SVN: r246971", "tree": {"sha": "2552dd30d620e6cdeedfcac9aa0b80fa6777a07f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2552dd30d620e6cdeedfcac9aa0b80fa6777a07f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b5fb3cb5b3831765df93691f6a452c478985366", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b5fb3cb5b3831765df93691f6a452c478985366", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b5fb3cb5b3831765df93691f6a452c478985366", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b5fb3cb5b3831765df93691f6a452c478985366/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d1446456c3fcaa7be628726c9de4a877729490ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1446456c3fcaa7be628726c9de4a877729490ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1446456c3fcaa7be628726c9de4a877729490ca"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "07b3384677feb5522b72d6997208a7d5af2e339a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b5fb3cb5b3831765df93691f6a452c478985366", "patch": "@@ -1,3 +1,9 @@\n+2017-04-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR sanitizer/80444\n+\t* sancov.c (sancov_pass): Use gsi_start_nondebug_after_labels_bb\n+\tinstead of gsi_after_labels.\n+\n 2017-04-18  Jeff Law  <law@redhat.com>\n \n \t* regcprop.c (maybe_mode_change): Avoid creating copies of the"}, {"sha": "1651989ea2429ec372149835bb4636a8048051ce", "filename": "gcc/sancov.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2Fsancov.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2Fsancov.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsancov.c?ref=3b5fb3cb5b3831765df93691f6a452c478985366", "patch": "@@ -46,7 +46,7 @@ sancov_pass (function *fun)\n   basic_block bb;\n   FOR_EACH_BB_FN (bb, fun)\n     {\n-      gimple_stmt_iterator gsi = gsi_after_labels (bb);\n+      gimple_stmt_iterator gsi = gsi_start_nondebug_after_labels_bb (bb);\n       if (gsi_end_p (gsi))\n \tcontinue;\n       gimple *stmt = gsi_stmt (gsi);"}, {"sha": "4d1cd159d155505a270f8cb065305dcea9482f54", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3b5fb3cb5b3831765df93691f6a452c478985366", "patch": "@@ -1,5 +1,8 @@\n 2017-04-18  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR sanitizer/80444\n+\t* gcc.dg/sancov/pr80444.c: New test.\n+\n \tPR middle-end/79788\n \tPR middle-end/80375\n \t* gcc.dg/pr79788-1.c: New test."}, {"sha": "362085d0178ad38a5dab9efbf7f171622dfcb0da", "filename": "gcc/testsuite/gcc.dg/sancov/pr80444.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2Ftestsuite%2Fgcc.dg%2Fsancov%2Fpr80444.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b5fb3cb5b3831765df93691f6a452c478985366/gcc%2Ftestsuite%2Fgcc.dg%2Fsancov%2Fpr80444.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsancov%2Fpr80444.c?ref=3b5fb3cb5b3831765df93691f6a452c478985366", "patch": "@@ -0,0 +1,9 @@\n+/* PR sanitizer/80444 */\n+/* { dg-do compile } */\n+/* { dg-options \"-fsanitize-coverage=trace-pc -fcompare-debug\" } */\n+\n+void\n+foo (void)\n+{\n+  int a = 0;\n+}"}]}