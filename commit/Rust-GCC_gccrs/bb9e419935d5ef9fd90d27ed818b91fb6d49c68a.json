{"sha": "bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmI5ZTQxOTkzNWQ1ZWY5ZmQ5MGQyN2VkODE4YjkxZmI2ZDQ5YzY4YQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2008-07-19T20:02:29Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2008-07-19T20:02:29Z"}, "message": "re PR bootstrap/36864 (Yet another bootstrap failure on i686-apple-darwin9)\n\n2008-07-19  Richard Guenther  <rguenther@suse.de>\n\n\tPR bootstrap/36864\n\t* tree-ssa-sccvn.h (get_constant_value_id): Declare.\n\t* tree-ssa-sccvn.c (get_constant_value_id): New function.\n\t* tree-ssa-pre.c (get_expr_value_id): For newly created\n\tconstant value-ids make sure to add the expression to its\n\texpression-set.\n\nFrom-SVN: r137991", "tree": {"sha": "86848acd2172e064f4a209b5b054324423da0eea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86848acd2172e064f4a209b5b054324423da0eea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "52e07aa164ec9029ed9ddfb236917fe2efab0de0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52e07aa164ec9029ed9ddfb236917fe2efab0de0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52e07aa164ec9029ed9ddfb236917fe2efab0de0"}], "stats": {"total": 39, "additions": 38, "deletions": 1}, "files": [{"sha": "50edf353df9a2772c942722612ee9e2d259706cd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "patch": "@@ -1,3 +1,12 @@\n+2008-07-19  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR bootstrap/36864\n+\t* tree-ssa-sccvn.h (get_constant_value_id): Declare.\n+\t* tree-ssa-sccvn.c (get_constant_value_id): New function.\n+\t* tree-ssa-pre.c (get_expr_value_id): For newly created\n+\tconstant value-ids make sure to add the expression to its\n+\texpression-set.\n+\n 2008-07-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/36877"}, {"sha": "ed337a39c46a1577a53fa4a6991fe3e36555fe06", "filename": "gcc/tree-ssa-pre.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2Ftree-ssa-pre.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2Ftree-ssa-pre.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-pre.c?ref=bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "patch": "@@ -599,7 +599,16 @@ get_expr_value_id (pre_expr expr)\n   switch (expr->kind)\n     {\n     case CONSTANT:\n-      return get_or_alloc_constant_value_id (PRE_EXPR_CONSTANT (expr));\n+      {\n+\tunsigned int id;\n+\tid = get_constant_value_id (PRE_EXPR_CONSTANT (expr));\n+\tif (id == 0)\n+\t  {\n+\t    id = get_or_alloc_constant_value_id (PRE_EXPR_CONSTANT (expr));\n+\t    add_to_value (id, expr);\n+\t  }\n+\treturn id;\n+      }\n     case NAME:\n       return VN_INFO (PRE_EXPR_NAME (expr))->value_id;\n     case NARY:"}, {"sha": "48b5297b4d80d9a3bf1d4f6bc067077658ed4fad", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "patch": "@@ -248,6 +248,24 @@ vn_constant_hash (const void *p1)\n   return vc1->hashcode;\n }\n \n+/* Lookup a value id for CONSTANT and return it.  If it does not\n+   exist returns 0.  */\n+\n+unsigned int\n+get_constant_value_id (tree constant)\n+{\n+  void **slot;\n+  struct vn_constant_s vc;\n+  \n+  vc.hashcode = iterative_hash_expr (constant, 0);\n+  vc.constant = constant;\n+  slot = htab_find_slot_with_hash (constant_to_value_id, &vc,\n+\t\t\t\t   vc.hashcode, NO_INSERT);\n+  if (slot)\n+    return ((vn_constant_t)*slot)->value_id;\n+  return 0;\n+}\n+\n /* Lookup a value id for CONSTANT, and if it does not exist, create a\n    new one and return it.  If it does exist, return it.  */\n "}, {"sha": "314cf8f8c9b63f423dd563e2a5828152dafbf061", "filename": "gcc/tree-ssa-sccvn.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2Ftree-ssa-sccvn.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb9e419935d5ef9fd90d27ed818b91fb6d49c68a/gcc%2Ftree-ssa-sccvn.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.h?ref=bb9e419935d5ef9fd90d27ed818b91fb6d49c68a", "patch": "@@ -163,6 +163,7 @@ hashval_t vn_reference_compute_hash (const vn_reference_t);\n int vn_reference_eq (const void *, const void *);\n unsigned int get_max_value_id (void);\n unsigned int get_next_value_id (void);\n+unsigned int get_constant_value_id (tree);\n unsigned int get_or_alloc_constant_value_id (tree);\n bool value_id_constant_p (unsigned int);\n VEC (tree, gc) *shared_vuses_from_stmt (tree);"}]}