{"sha": "c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdiYjM0ODRhMjRmNjc3MGU3NjMzZDM4ZjNiMWY3ZGNjNDZkYTZiYg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2014-06-11T17:28:14Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2014-06-11T17:28:14Z"}, "message": "re PR c++/60265 ([C++11] using-declaration of enumerator fails if fully qualified)\n\n/cp\n2014-06-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60265\n\t* parser.c (cp_parser_using_declaration): Handle unscoped enums.\n\t* name-lookup.c (validate_nonmember_using_decl): Adjust error\n\tmessage.\n\n/testsuite\n2014-06-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60265\n\t* g++.dg/cpp0x/using-enum-1.C: New.\n\t* g++.dg/cpp0x/using-enum-2.C: Likewise.\n\nFrom-SVN: r211479", "tree": {"sha": "a13ca20c4488d616d38d1d94805c0aab49bae835", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a13ca20c4488d616d38d1d94805c0aab49bae835"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/comments", "author": null, "committer": null, "parents": [{"sha": "37251385bf1e4d1704f23a5ef0a99a77596b10f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37251385bf1e4d1704f23a5ef0a99a77596b10f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37251385bf1e4d1704f23a5ef0a99a77596b10f0"}], "stats": {"total": 57, "additions": 56, "deletions": 1}, "files": [{"sha": "8bd4a7389d233cc6ff3c0d3bd2aa333ffe543cee", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "patch": "@@ -1,3 +1,10 @@\n+2014-06-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60265\n+\t* parser.c (cp_parser_using_declaration): Handle unscoped enums.\n+\t* name-lookup.c (validate_nonmember_using_decl): Adjust error\n+\tmessage.\n+\n 2014-06-11  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/19200"}, {"sha": "75b46ac9c7dc5c2e47eb44db0acc51aa02eb2d96", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "patch": "@@ -2487,7 +2487,7 @@ validate_nonmember_using_decl (tree decl, tree scope, tree name)\n        member-declaration.  */\n   if (TYPE_P (scope))\n     {\n-      error (\"%qT is not a namespace\", scope);\n+      error (\"%qT is not a namespace or unscoped enum\", scope);\n       return NULL_TREE;\n     }\n   else if (scope == error_mark_node)"}, {"sha": "4dff139ff5da3a6b9effd63d3e844cfff8ab5d88", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "patch": "@@ -16022,6 +16022,8 @@ cp_parser_using_declaration (cp_parser* parser,\n \t\t\t\t\t\t  /*is_declaration=*/true);\n   if (!qscope)\n     qscope = global_namespace;\n+  else if (UNSCOPED_ENUM_P (qscope))\n+    qscope = CP_TYPE_CONTEXT (qscope);\n \n   if (access_declaration_p && cp_parser_error_occurred (parser))\n     /* Something has already gone wrong; there's no need to parse"}, {"sha": "2a506f596c9dd00441af41884c9bac86713e75b1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "patch": "@@ -1,3 +1,9 @@\n+2014-06-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60265\n+\t* g++.dg/cpp0x/using-enum-1.C: New.\n+\t* g++.dg/cpp0x/using-enum-2.C: Likewise.\n+\n 2014-06-11  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/19200"}, {"sha": "9904d59aaaa90398dffdab2acabc9a461636af7e", "filename": "gcc/testsuite/g++.dg/cpp0x/using-enum-1.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fusing-enum-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fusing-enum-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fusing-enum-1.C?ref=c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "patch": "@@ -0,0 +1,20 @@\n+// PR c++/60265\n+// { dg-do compile { target c++11 } }\n+\n+namespace A\n+{\n+  enum E { V };\n+\n+  using E::V;\n+}\n+\n+void foo()\n+{\n+  using A::E::V;\n+}\n+\n+using A::E::V;\n+\n+enum F { U };\n+\n+using F::U;"}, {"sha": "0738c802b3446927178e57a089ccb1ced9e9613e", "filename": "gcc/testsuite/g++.dg/cpp0x/using-enum-2.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fusing-enum-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fusing-enum-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fusing-enum-2.C?ref=c7bb3484a24f6770e7633d38f3b1f7dcc46da6bb", "patch": "@@ -0,0 +1,20 @@\n+// PR c++/60265\n+// { dg-do compile { target c++11 } }\n+\n+namespace A\n+{\n+  enum class E { V };\n+\n+  using E::V;        // { dg-error \"not a namespace or unscoped enum\" }\n+}\n+\n+void foo()\n+{\n+  using A::E::V;     // { dg-error \"not a namespace or unscoped enum\" }\n+}\n+\n+using A::E::V;       // { dg-error \"not a namespace or unscoped enum\" }\n+\n+enum class F { U };\n+\n+using F::U;          // { dg-error \"not a namespace or unscoped enum\" }"}]}