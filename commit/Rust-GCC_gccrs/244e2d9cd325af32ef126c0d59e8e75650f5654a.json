{"sha": "244e2d9cd325af32ef126c0d59e8e75650f5654a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ0ZTJkOWNkMzI1YWYzMmVmMTI2YzBkNTllOGU3NTY1MGY1NjU0YQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2012-10-04T15:16:09Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-10-04T15:16:09Z"}, "message": "dwarf.c: If the system header files do not declare strnlen, provide our own version.\n\n\t* dwarf.c: If the system header files do not declare strnlen,\n\tprovide our own version.\n\nFrom-SVN: r192082", "tree": {"sha": "09b2bafa02f9c5af3d13f2fff0501186da346651", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/09b2bafa02f9c5af3d13f2fff0501186da346651"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/244e2d9cd325af32ef126c0d59e8e75650f5654a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/244e2d9cd325af32ef126c0d59e8e75650f5654a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/244e2d9cd325af32ef126c0d59e8e75650f5654a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/244e2d9cd325af32ef126c0d59e8e75650f5654a/comments", "author": null, "committer": null, "parents": [{"sha": "678771ad9cf341b31f3a7717eefb868cac2221ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/678771ad9cf341b31f3a7717eefb868cac2221ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/678771ad9cf341b31f3a7717eefb868cac2221ec"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "528b493020496d704e28944deed2f7494d9d3aea", "filename": "libbacktrace/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/244e2d9cd325af32ef126c0d59e8e75650f5654a/libbacktrace%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/244e2d9cd325af32ef126c0d59e8e75650f5654a/libbacktrace%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2FChangeLog?ref=244e2d9cd325af32ef126c0d59e8e75650f5654a", "patch": "@@ -1,3 +1,8 @@\n+2012-10-04  Ian Lance Taylor  <iant@google.com>\n+\n+\t* dwarf.c: If the system header files do not declare strnlen,\n+\tprovide our own version.\n+\n 2012-10-03  Ian Lance Taylor  <iant@google.com>\n \n \t* dwarf.c (read_uleb128): Fix overflow test."}, {"sha": "4e13fc541ee96231aff426fbe01c30635d20c8c0", "filename": "libbacktrace/dwarf.c", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/244e2d9cd325af32ef126c0d59e8e75650f5654a/libbacktrace%2Fdwarf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/244e2d9cd325af32ef126c0d59e8e75650f5654a/libbacktrace%2Fdwarf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Fdwarf.c?ref=244e2d9cd325af32ef126c0d59e8e75650f5654a", "patch": "@@ -44,8 +44,22 @@ POSSIBILITY OF SUCH DAMAGE.  */\n #include \"internal.h\"\n \n #if !defined(HAVE_DECL_STRNLEN) || !HAVE_DECL_STRNLEN\n-/* The function is defined in libiberty if needed.  */\n-extern size_t strnlen (const char *, size_t);\n+\n+/* If strnlen is not declared, provide our own version.  */\n+\n+static size_t\n+xstrnlen (const char *s, size_t maxlen)\n+{\n+  size_t i;\n+\n+  for (i = 0; i < maxlen; ++i)\n+    if (s[i] == '\\0')\n+      break;\n+  return i;\n+}\n+\n+#define strnlen xstrnlen\n+\n #endif\n \n /* A buffer to read DWARF info.  */"}]}