{"sha": "0e90799071ee78f712f3b58fca7000bc0a258ade", "node_id": "C_kwDOANBUbNoAKDBlOTA3OTkwNzFlZTc4ZjcxMmYzYjU4ZmNhNzAwMGJjMGEyNThhZGU", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-10-07T17:28:04Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-10-07T17:35:16Z"}, "message": "libstdc++: Avoid use of hardware interference non-constant [PR102377]\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/102377\n\t* include/bits/atomic_wait.h (__waiter_pool_base:_S_align):\n\tHardcode to 64 instead of using non-constant constant.", "tree": {"sha": "22a9bd96ed70f44d168c9231872161aef3726c6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22a9bd96ed70f44d168c9231872161aef3726c6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e90799071ee78f712f3b58fca7000bc0a258ade", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e90799071ee78f712f3b58fca7000bc0a258ade", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e90799071ee78f712f3b58fca7000bc0a258ade", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e90799071ee78f712f3b58fca7000bc0a258ade/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "561078480ffb5adb68577276c6b23e4ee7b39272", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/561078480ffb5adb68577276c6b23e4ee7b39272", "html_url": "https://github.com/Rust-GCC/gccrs/commit/561078480ffb5adb68577276c6b23e4ee7b39272"}], "stats": {"total": 8, "additions": 3, "deletions": 5}, "files": [{"sha": "2ac07ccd05e53be47681dfe7dc6fba5ace3b6260", "filename": "libstdc++-v3/include/bits/atomic_wait.h", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e90799071ee78f712f3b58fca7000bc0a258ade/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fatomic_wait.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e90799071ee78f712f3b58fca7000bc0a258ade/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fatomic_wait.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fatomic_wait.h?ref=0e90799071ee78f712f3b58fca7000bc0a258ade", "patch": "@@ -190,11 +190,9 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n     struct __waiter_pool_base\n     {\n-#ifdef __cpp_lib_hardware_interference_size\n-    static constexpr auto _S_align = hardware_destructive_interference_size;\n-#else\n-    static constexpr auto _S_align = 64;\n-#endif\n+      // Don't use std::hardware_destructive_interference_size here because we\n+      // don't want the layout of library types to depend on compiler options.\n+      static constexpr auto _S_align = 64;\n \n       alignas(_S_align) __platform_wait_t _M_wait = 0;\n "}]}