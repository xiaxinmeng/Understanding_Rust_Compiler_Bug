{"sha": "6b3762e4c2a27525a07b4917a55c87136b0fade3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIzNzYyZTRjMmEyNzUyNWEwN2I0OTE3YTU1Yzg3MTM2YjBmYWRlMw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2015-01-10T00:23:48Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-01-10T00:23:48Z"}, "message": "Makefile.am (GOCOMPILER): Set to GOC or GOC_FOR_TARGET depending on whether this is a native build or not.\n\n\t* Makefile.am (GOCOMPILER): Set to GOC or GOC_FOR_TARGET depending\n\ton whether this is a native build or not.\n\t(GOCOMPILE, GOLINK): Use $(GOCOMPILER) instead of $(GOC).\n\t(MOSTLYCLEANFILES): Define.\n\t* Makefile.in: Rebuild.\n\nFrom-SVN: r219418", "tree": {"sha": "64bdda18667613c3fe28c23182d7b95993aca9a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64bdda18667613c3fe28c23182d7b95993aca9a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b3762e4c2a27525a07b4917a55c87136b0fade3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b3762e4c2a27525a07b4917a55c87136b0fade3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b3762e4c2a27525a07b4917a55c87136b0fade3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b3762e4c2a27525a07b4917a55c87136b0fade3/comments", "author": null, "committer": null, "parents": [{"sha": "a36ce096c32224dcb712dc7a7edeabf25a4f94bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a36ce096c32224dcb712dc7a7edeabf25a4f94bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a36ce096c32224dcb712dc7a7edeabf25a4f94bf"}], "stats": {"total": 36, "additions": 29, "deletions": 7}, "files": [{"sha": "0e24b33d75a009a9f9058016686ae7de892c6ecb", "filename": "gotools/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3762e4c2a27525a07b4917a55c87136b0fade3/gotools%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3762e4c2a27525a07b4917a55c87136b0fade3/gotools%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gotools%2FChangeLog?ref=6b3762e4c2a27525a07b4917a55c87136b0fade3", "patch": "@@ -1,3 +1,9 @@\n 2015-01-09  Ian Lance Taylor  <iant@google.com>\n \n+\t* Makefile.am (GOCOMPILER): Set to GOC or GOC_FOR_TARGET depending\n+\ton whether this is a native build or not.\n+\t(GOCOMPILE, GOLINK): Use $(GOCOMPILER) instead of $(GOC).\n+\t(MOSTLYCLEANFILES): Define.\n+\t* Makefile.in: Rebuild.\n+\n \t* Initial implementation."}, {"sha": "8a564ff3fa38ee9d1492e3c6090c59eccafa3b9c", "filename": "gotools/Makefile.am", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3762e4c2a27525a07b4917a55c87136b0fade3/gotools%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3762e4c2a27525a07b4917a55c87136b0fade3/gotools%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gotools%2FMakefile.am?ref=6b3762e4c2a27525a07b4917a55c87136b0fade3", "patch": "@@ -28,11 +28,18 @@ STAMP = echo timestamp >\n libgodir = ../$(target_noncanonical)/libgo\n LIBGODEP = $(libgodir)/libgo.la\n \n+if NATIVE\n+# Use the compiler we just built.\n+GOCOMPILER = $(GOC_FOR_TARGET)\n+else\n+GOCOMPILER = $(GOC)\n+endif\n+\n GOCFLAGS = $(CFLAGS_FOR_TARGET)\n-GOCOMPILE = $(GOC) $(GOCFLAGS)\n+GOCOMPILE = $(GOCOMPILER) $(GOCFLAGS)\n \n AM_LDFLAGS = -L $(libgodir) -L $(libgodir)/.libs -static-libgo\n-GOLINK = $(GOC) $(AM_GOCFLAGS) $(LDFLAGS) $(AM_LDFLAGS) -o $@\n+GOLINK = $(GOCOMPILER) $(AM_GOCFLAGS) $(LDFLAGS) $(AM_LDFLAGS) -o $@\n \n cmdsrcdir = $(srcdir)/../libgo/go/cmd\n \n@@ -89,6 +96,8 @@ s-zdefaultcc: Makefile\n \t$(SHELL) $(srcdir)/../move-if-change zdefaultcc.go.tmp zdefaultcc.go\n \t$(STAMP) $@ \n \n+MOSTLYCLEANFILES = zdefaultcc.go s-zdefaultcc\n+\n if NATIVE\n \n # For a native build we build the programs using the newly built libgo"}, {"sha": "b108d9d916cc08e544e398e45c594140b8c76f21", "filename": "gotools/Makefile.in", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3762e4c2a27525a07b4917a55c87136b0fade3/gotools%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3762e4c2a27525a07b4917a55c87136b0fade3/gotools%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gotools%2FMakefile.in?ref=6b3762e4c2a27525a07b4917a55c87136b0fade3", "patch": "@@ -53,9 +53,10 @@ build_triplet = @build@\n host_triplet = @host@\n target_triplet = @target@\n subdir = .\n-DIST_COMMON = README $(srcdir)/Makefile.in $(srcdir)/Makefile.am \\\n-\t$(top_srcdir)/configure $(am__configure_deps) \\\n-\t$(srcdir)/../mkinstalldirs $(srcdir)/../depcomp\n+DIST_COMMON = README ChangeLog $(srcdir)/Makefile.in \\\n+\t$(srcdir)/Makefile.am $(top_srcdir)/configure \\\n+\t$(am__configure_deps) $(srcdir)/../mkinstalldirs \\\n+\t$(srcdir)/../depcomp\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/../config/acx.m4 \\\n \t$(top_srcdir)/../config/depstand.m4 \\\n@@ -199,9 +200,13 @@ PWD_COMMAND = $${PWDCMD-pwd}\n STAMP = echo timestamp >\n libgodir = ../$(target_noncanonical)/libgo\n LIBGODEP = $(libgodir)/libgo.la\n-GOCOMPILE = $(GOC) $(GOCFLAGS)\n+@NATIVE_FALSE@GOCOMPILER = $(GOC)\n+\n+# Use the compiler we just built.\n+@NATIVE_TRUE@GOCOMPILER = $(GOC_FOR_TARGET)\n+GOCOMPILE = $(GOCOMPILER) $(GOCFLAGS)\n AM_LDFLAGS = -L $(libgodir) -L $(libgodir)/.libs -static-libgo\n-GOLINK = $(GOC) $(AM_GOCFLAGS) $(LDFLAGS) $(AM_LDFLAGS) -o $@\n+GOLINK = $(GOCOMPILER) $(AM_GOCFLAGS) $(LDFLAGS) $(AM_LDFLAGS) -o $@\n cmdsrcdir = $(srcdir)/../libgo/go/cmd\n go_cmd_go_files = \\\n \t$(cmdsrcdir)/go/build.go \\\n@@ -246,6 +251,7 @@ go_cmd_cgo_files = \\\n GCCGO_INSTALL_NAME := $(shell echo gccgo|sed '$(program_transform_name)')\n GCC_INSTALL_NAME := $(shell echo gcc|sed '$(program_transform_name)')\n GXX_INSTALL_NAME := $(shell echo g++|sed '$(program_transform_name)')\n+MOSTLYCLEANFILES = zdefaultcc.go s-zdefaultcc\n \n # For a native build we build the programs using the newly built libgo\n # and install them as regular programs.\n@@ -470,6 +476,7 @@ install-strip:\n \t  `test -z '$(STRIP)' || \\\n \t    echo \"INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'\"` install\n mostlyclean-generic:\n+\t-test -z \"$(MOSTLYCLEANFILES)\" || rm -f $(MOSTLYCLEANFILES)\n \n clean-generic:\n "}]}