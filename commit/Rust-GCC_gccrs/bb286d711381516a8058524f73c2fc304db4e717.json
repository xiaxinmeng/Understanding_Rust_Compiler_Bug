{"sha": "bb286d711381516a8058524f73c2fc304db4e717", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmIyODZkNzExMzgxNTE2YTgwNTg1MjRmNzNjMmZjMzA0ZGI0ZTcxNw==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2007-08-17T00:00:00Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2007-08-17T00:00:00Z"}, "message": "Makefile.def (STAGE2_CFLAGS, [...]): Add to flags_to_pass.\n\nChangeLog:\n* Makefile.def (STAGE2_CFLAGS, STAGE3_CFLAGS, STAGE4_CFLAGS):\nAdd to flags_to_pass.  Adjust uses of BOOT_CFLAGS.\n(bootstrap2-debug, bootstrap-debug): New bootstrap stages.\n* Makefile.tpl (STAGE2_CFLAGS, STAGE3_CFLAGS, STAGE4_CFLAGS): New.\n(do-compare, do-compare3, do-compare-debug): New.\n([+compare-target+]): Use them.\ncontrib/ChangeLog:\n* compare-debug: New.\n\nFrom-SVN: r127570", "tree": {"sha": "c1cd5bd2c987389d32d7944dcd05df6301bffa82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1cd5bd2c987389d32d7944dcd05df6301bffa82"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb286d711381516a8058524f73c2fc304db4e717", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb286d711381516a8058524f73c2fc304db4e717", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb286d711381516a8058524f73c2fc304db4e717", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb286d711381516a8058524f73c2fc304db4e717/comments", "author": null, "committer": null, "parents": [{"sha": "db5b41105b6b13d00926ab8db7893ceba5d92eb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db5b41105b6b13d00926ab8db7893ceba5d92eb4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db5b41105b6b13d00926ab8db7893ceba5d92eb4"}], "stats": {"total": 3054, "additions": 2832, "deletions": 222}, "files": [{"sha": "f19b1398e5192a30f0df4c763351df599431ec73", "filename": "ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb286d711381516a8058524f73c2fc304db4e717/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb286d711381516a8058524f73c2fc304db4e717/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=bb286d711381516a8058524f73c2fc304db4e717", "patch": "@@ -1,3 +1,12 @@\n+2007-08-16  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* Makefile.def (STAGE2_CFLAGS, STAGE3_CFLAGS, STAGE4_CFLAGS):\n+\tAdd to flags_to_pass.  Adjust uses of BOOT_CFLAGS.\n+\t(bootstrap2-debug, bootstrap-debug): New bootstrap stages.\n+\t* Makefile.tpl (STAGE2_CFLAGS, STAGE3_CFLAGS, STAGE4_CFLAGS): New.\n+\t(do-compare, do-compare3, do-compare-debug): New.\n+\t([+compare-target+]): Use them.\n+\n 2007-08-14  Maxim Kuvyrkov  <maxim@codesourcery.com>\n \n \t* MAINTAINERS (Write After Approval): Change my email address."}, {"sha": "3d9a95d6176e8c7b6cdd63c5e7359db56e40a4cb", "filename": "Makefile.def", "status": "modified", "additions": 21, "deletions": 6, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb286d711381516a8058524f73c2fc304db4e717/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb286d711381516a8058524f73c2fc304db4e717/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=bb286d711381516a8058524f73c2fc304db4e717", "patch": "@@ -4,7 +4,7 @@ AutoGen definitions Makefile.tpl;\n // Makefile.in is generated from Makefile.tpl by 'autogen Makefile.def'.\n // This file was originally written by Nathanael Nerode.\n //\n-//   Copyright 2002, 2003, 2004, 2005, 2006 Free Software Foundation\n+//   Copyright 2002, 2003, 2004, 2005, 2006, 2007 Free Software Foundation\n //\n // This file is free software; you can redistribute it and/or modify\n // it under the terms of the GNU General Public License as published by\n@@ -236,6 +236,9 @@ flags_to_pass = { flag= LIBCXXFLAGS ; };\n flags_to_pass = { flag= STAGE1_CFLAGS ; };\n flags_to_pass = { flag= STAGE1_CHECKING ; };\n flags_to_pass = { flag= STAGE1_LANGUAGES ; };\n+flags_to_pass = { flag= STAGE2_CFLAGS ; };\n+flags_to_pass = { flag= STAGE3_CFLAGS ; };\n+flags_to_pass = { flag= STAGE4_CFLAGS ; };\n flags_to_pass = { flag= GNATBIND ; };\n flags_to_pass = { flag= GNATMAKE ; };\n \n@@ -512,26 +515,38 @@ bootstrap_stage = {\n \tid=2 ; prev=1 ;\n \tbootstrap_target=bootstrap2 ;\n \tstage_configure_flags=\"@stage2_werror_flag@\" ;\n-\tstage_cflags=\"$(BOOT_CFLAGS)\" ; };\n+\tstage_cflags=\"$(STAGE2_CFLAGS)\" ; };\n+bootstrap_stage = {\n+\tid=b2g0 ; prev=1 ;\n+\tbootstrap_target=bootstrap2-debug ;\n+\tstage_configure_flags=\"@stage2_werror_flag@\" ;\n+\tstage_cflags=\"$(STAGE2_CFLAGS) -g0\" ; };\n bootstrap_stage = {\n \tid=3 ; prev=2 ; lean=1 ;\n \tcompare_target=compare ;\n \tbootstrap_target=bootstrap ;\n \tcleanstrap_target=cleanstrap ;\n \tstage_configure_flags=\"@stage2_werror_flag@\" ;\n-\tstage_cflags=\"$(BOOT_CFLAGS)\" ; };\n+\tstage_cflags=\"$(STAGE3_CFLAGS)\" ; };\n+bootstrap_stage = {\n+\tid=b3g2 ; prev=b2g0 ; lean=1 ;\n+\tcompare_target=compare-debug ;\n+\tbootstrap_target=bootstrap-debug ;\n+\tcleanstrap_target=cleanstrap-debug ;\n+\tstage_configure_flags=\"@stage2_werror_flag@\" ;\n+\tstage_cflags=\"$(STAGE3_CFLAGS) -g2\" ; };\n bootstrap_stage = {\n \tid=4 ; prev=3 ; lean=2 ;\n \tcompare_target=compare3 ;\n \tbootstrap_target=bootstrap4 ;\n \tstage_configure_flags=\"@stage2_werror_flag@\" ;\n-\tstage_cflags=\"$(BOOT_CFLAGS)\" ; };\n+\tstage_cflags=\"$(STAGE4_CFLAGS)\" ; };\n bootstrap_stage = {\n \tid=profile ; prev=1 ;\n \tstage_configure_flags=\"@stage2_werror_flag@\" ;\n-\tstage_cflags='$(BOOT_CFLAGS) -fprofile-generate' ; };\n+\tstage_cflags='$(STAGE2_CFLAGS) -fprofile-generate' ; };\n bootstrap_stage = {\n \tid=feedback ; prev=profile ;\n \tbootstrap_target=profiledbootstrap ;\n \tstage_configure_flags=\"@stage2_werror_flag@\" ;\n-\tstage_cflags='$(BOOT_CFLAGS) -fprofile-use' ; };\n+\tstage_cflags='$(STAGE3_CFLAGS) -fprofile-use' ; };"}, {"sha": "a91ee163d1bd6a6300a6e300a55e8c97269ae876", "filename": "Makefile.in", "status": "modified", "additions": 2721, "deletions": 214, "changes": 2935, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb286d711381516a8058524f73c2fc304db4e717/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb286d711381516a8058524f73c2fc304db4e717/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=bb286d711381516a8058524f73c2fc304db4e717"}, {"sha": "8cb7f7d177f44c328b32c090b4c3d95e87931610", "filename": "Makefile.tpl", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb286d711381516a8058524f73c2fc304db4e717/Makefile.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb286d711381516a8058524f73c2fc304db4e717/Makefile.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.tpl?ref=bb286d711381516a8058524f73c2fc304db4e717", "patch": "@@ -6,7 +6,7 @@ in\n #\n # Makefile for directory with subdirs to build.\n #   Copyright (C) 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-#   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation\n+#   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007 Free Software Foundation\n #\n # This file is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -323,6 +323,14 @@ STAGE1_CFLAGS=@stage1_cflags@\n STAGE1_CHECKING=@stage1_checking@\n STAGE1_LANGUAGES=@stage1_languages@\n \n+STAGE2_CFLAGS=$(BOOT_CFLAGS)\n+STAGE3_CFLAGS=$(BOOT_CFLAGS)\n+STAGE4_CFLAGS=$(BOOT_CFLAGS)\n+\n+do-compare = @do_compare@\n+do-compare3 = $(do-compare)\n+do-compare-debug = $(SHELL) $(srcdir)/contrib/compare-debug $$f1 $$f2\n+\n # -----------------------------------------------\n # Programs producing files for the TARGET machine\n # -----------------------------------------------\n@@ -1316,7 +1324,7 @@ do-clean: clean-stage[+id+]\n \tcd .. ; \\\n \tfor file in $${files} ; do \\\n \t  f1=$$r/stage[+prev+]-gcc/$$file; f2=$$r/stage[+id+]-gcc/$$file; \\\n-\t  @do_compare@ > /dev/null 2>&1; \\\n+\t  $(do-[+compare-target+]) > /dev/null 2>&1; \\\n \t  if test $$? -eq 1; then \\\n \t    case $$file in \\\n \t      ./cc*-checksum$(objext) | ./libgcc/* ) \\"}, {"sha": "0f66bd2aaaa0a16b6960e3d632ec016b5d39391b", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb286d711381516a8058524f73c2fc304db4e717/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb286d711381516a8058524f73c2fc304db4e717/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=bb286d711381516a8058524f73c2fc304db4e717", "patch": "@@ -1,3 +1,7 @@\n+2007-08-16  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* compare-debug: New.\n+\n 2007-08-16  H.J. Lu  <hongjiu.lu@intel.com>\n \t    Andreas Schwab <schwab@suse.de>\n "}, {"sha": "c583a59c520ae07633f8e2e23c38aa106ccf78d2", "filename": "contrib/compare-debug", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb286d711381516a8058524f73c2fc304db4e717/contrib%2Fcompare-debug", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb286d711381516a8058524f73c2fc304db4e717/contrib%2Fcompare-debug", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcompare-debug?ref=bb286d711381516a8058524f73c2fc304db4e717", "patch": "@@ -0,0 +1,67 @@\n+#! /bin/sh\n+\n+# Compare stripped copies of two given object files.\n+\n+# Copyright (C) 2007 Free Software Foundation\n+# Originally by Alexandre Oliva <aoliva@redhat.com>\n+\n+# This file is part of GCC.\n+\n+# GCC is free software; you can redistribute it and/or modify it under\n+# the terms of the GNU General Public License as published by the Free\n+# Software Foundation; either version 3, or (at your option) any later\n+# version.\n+\n+# GCC is distributed in the hope that it will be useful, but WITHOUT\n+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+# License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+if test $# != 2; then\n+  echo 'usage: compare-debug file1.o file2.o' >&2\n+  exit 1\n+fi\n+\n+if test ! -f \"$1\"; then\n+  echo \"$1\" does not exist >&2\n+  exit 1\n+fi\n+\n+if test ! -f \"$2\"; then\n+  echo \"$2\" does not exist >&2\n+  exit 1\n+fi\n+\n+if test -f \"$1\".stripped; then\n+  echo \"$1\".stripped already exists, overwriting >&2\n+  exit 1\n+fi\n+\n+if test -f \"$2\".stripped; then\n+  echo \"$2\".stripped already exists, overwriting >&2\n+  exit 1\n+fi\n+\n+trap 'rm -f \"$1\".stripped \"$2\".stripped' 0 1 2 15\n+\n+cp \"$1\" \"$1\".stripped\n+strip \"$1\".stripped\n+\n+cp \"$2\" \"$2\".stripped\n+strip \"$2\".stripped\n+\n+if cmp \"$1\".stripped \"$2\".stripped; then\n+  status=0\n+else\n+  status=1\n+fi\n+\n+rm -f \"$1\".stripped \"$2\".stripped\n+\n+trap \"exit $status; exit\" 0 1 2 15\n+\n+exit $status"}]}