{"sha": "3aebc597181a97c7b064f04d8e8aa30f79c51451", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FlYmM1OTcxODFhOTdjN2IwNjRmMDRkOGU4YWEzMGY3OWM1MTQ1MQ==", "commit": {"author": {"name": "Renlin Li", "email": "renlin.li@arm.com", "date": "2017-08-31T09:18:22Z"}, "committer": {"name": "Renlin Li", "email": "renlin@gcc.gnu.org", "date": "2017-08-31T09:18:22Z"}, "message": "[TESTSUITE]Use memcpy instead of strcpy in testsuite/gcc.dg/memcmp-1.c\n\nstrcpy will keep reading and writing memory if the string is not terminated\nwith null character. In this case, it may visit memory beyond the boundary.\n\ngcc/testsuite/\n\n2017-08-31  Renlin Li  <renlin.li@arm.com>\n\t    Aaron Sawdey  <acsawdey@linux.vnet.ibm.com>\n\n\t* gcc.dg/memcmp-1.c (test_strncmp): Use memcpy instead of strcpy.\n\n\nCo-Authored-By: Aaron Sawdey <acsawdey@linux.vnet.ibm.com>\n\nFrom-SVN: r251554", "tree": {"sha": "f1790f4ad47d5bc63465c9f6e40b64f401dcccc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1790f4ad47d5bc63465c9f6e40b64f401dcccc2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3aebc597181a97c7b064f04d8e8aa30f79c51451", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aebc597181a97c7b064f04d8e8aa30f79c51451", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3aebc597181a97c7b064f04d8e8aa30f79c51451", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aebc597181a97c7b064f04d8e8aa30f79c51451/comments", "author": null, "committer": null, "parents": [{"sha": "4b0d36db3c835ce9e3080f5203bd8ea7cdf43b5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b0d36db3c835ce9e3080f5203bd8ea7cdf43b5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b0d36db3c835ce9e3080f5203bd8ea7cdf43b5c"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "98b269e3dbfa44e8241b4da9842630f90017fa26", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aebc597181a97c7b064f04d8e8aa30f79c51451/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aebc597181a97c7b064f04d8e8aa30f79c51451/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3aebc597181a97c7b064f04d8e8aa30f79c51451", "patch": "@@ -1,3 +1,8 @@\n+2017-08-31  Renlin Li  <renlin.li@arm.com>\n+\t    Aaron Sawdey  <acsawdey@linux.vnet.ibm.com>\n+\n+\t* gcc.dg/memcmp-1.c: Use memcpy instead of strcpy.\n+\n 2017-08-30  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \tPR tree-optimization/81987"}, {"sha": "ace7173f754a7014e24cc3722afa1c94297ce9a1", "filename": "gcc/testsuite/gcc.dg/memcmp-1.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aebc597181a97c7b064f04d8e8aa30f79c51451/gcc%2Ftestsuite%2Fgcc.dg%2Fmemcmp-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aebc597181a97c7b064f04d8e8aa30f79c51451/gcc%2Ftestsuite%2Fgcc.dg%2Fmemcmp-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fmemcmp-1.c?ref=3aebc597181a97c7b064f04d8e8aa30f79c51451", "patch": "@@ -110,8 +110,8 @@ static void test_strncmp_ ## SZ ## _ ## ALIGN (const char *str1, const char *str\n \t{\t\t\t\t\t\t\t\t\\\n \t  a = three+i*ALIGN+j*(4096-2*i*ALIGN);\t\t\t\t\\\n \t  b = four+i*ALIGN+j*(4096-2*i*ALIGN);\t\t\t\t\\\n-\t  strcpy(a,str1);\t\t\t\t\t\t\\\n-\t  strcpy(b,str2);\t\t\t\t\t\t\\\n+\t  memcpy(a,str1,SZ);\t\t\t\t\t\t\\\n+\t  memcpy(b,str2,SZ);\t\t\t\t\t\t\\\n \t  r = strncmp(a,b,SZ);\t\t\t\t\t\t\\\n \t  if ( r < 0 && !(expect < 0) ) abort();\t\t\t\\\n \t  if ( r > 0 && !(expect > 0) )\tabort();\t\t\t\\"}]}