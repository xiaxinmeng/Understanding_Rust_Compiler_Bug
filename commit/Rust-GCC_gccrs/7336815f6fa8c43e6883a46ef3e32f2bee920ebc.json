{"sha": "7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzMzNjgxNWY2ZmE4YzQzZTY4ODNhNDZlZjNlMzJmMmJlZTkyMGViYw==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2007-09-05T21:30:04Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2007-09-05T21:30:04Z"}, "message": "acinclude.m4 (GLIBCXX_CHECK_SYSTEM_ERROR): Add EBADMSG for darwin.\n\n\n\t* acinclude.m4 (GLIBCXX_CHECK_SYSTEM_ERROR): Add EBADMSG for darwin.\n\t* configure: Regenerate.\n\t* include/std/system_error: Guard.\n\t* testsuite/19_diagnostics/headers/system_error/\n\ttypes_std_c++0x.cc: Same.\n\t* testsuite/19_diagnostics/error_category/cons/copy_neg.cc: Adjust\n\tline numbers.\n\nFrom-SVN: r128154", "tree": {"sha": "d1d41069ac04a85be167ec2ea28f3ebf4606f002", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d1d41069ac04a85be167ec2ea28f3ebf4606f002"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/comments", "author": null, "committer": null, "parents": [{"sha": "e2d3b29484a40c691b90a0927fe56a5571402f71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2d3b29484a40c691b90a0927fe56a5571402f71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2d3b29484a40c691b90a0927fe56a5571402f71"}], "stats": {"total": 96, "additions": 94, "deletions": 2}, "files": [{"sha": "873ac16cef57f5fa5ee24426d3b7d0655f95a9ab", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "patch": "@@ -1,3 +1,13 @@\n+2007-09-05  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* acinclude.m4 (GLIBCXX_CHECK_SYSTEM_ERROR): Add EBADMSG for darwin.\n+\t* configure: Regenerate.\n+\t* include/std/system_error: Guard.\n+\t* testsuite/19_diagnostics/headers/system_error/\n+\ttypes_std_c++0x.cc: Same.\n+\t* testsuite/19_diagnostics/error_category/cons/copy_neg.cc: Adjust\n+\tline numbers.\n+\n 2007-09-03  Paolo Carlini  <pcarlini@suse.de>\n \n \tPR libstdc++/33293"}, {"sha": "064b6ad0b85cd217b6cf1ec362684c38b26d1479", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "patch": "@@ -1351,6 +1351,16 @@ AC_DEFUN([GLIBCXX_CHECK_SYSTEM_ERROR], [\n   if test x\"$ac_system_error9\" = x\"yes\"; then\n     AC_DEFINE(HAVE_SYS_NERR, 1, [Define if sys_nerr exists.])\n   fi\n+\n+  AC_MSG_CHECKING([for EBADMSG])\n+  AC_CACHE_VAL(ac_system_error_10, [\n+  AC_TRY_COMPILE([#include <errno.h>], [ int i = EBADMSG; ],\n+             [ac_system_error_10=yes], [ac_system_error_10=no])\n+  ])\n+  AC_MSG_RESULT($ac_system_error_10)\n+  if test x\"$ac_system_error_10\" = x\"yes\"; then\n+    AC_DEFINE(HAVE_EBADMSG, 1, [Define if EBADMSG exists.])\n+  fi\n ])\n \n dnl"}, {"sha": "0e6eb2f8101603f0dd6256634c027826d8c365dc", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 65, "deletions": 1, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "patch": "@@ -17109,6 +17109,70 @@ _ACEOF\n \n   fi\n \n+  echo \"$as_me:$LINENO: checking for EBADMSG\" >&5\n+echo $ECHO_N \"checking for EBADMSG... $ECHO_C\" >&6\n+  if test \"${ac_system_error_10+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <errno.h>\n+int\n+main ()\n+{\n+ int i = EBADMSG;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_system_error_10=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_system_error_10=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+fi\n+\n+  echo \"$as_me:$LINENO: result: $ac_system_error_10\" >&5\n+echo \"${ECHO_T}$ac_system_error_10\" >&6\n+  if test x\"$ac_system_error_10\" = x\"yes\"; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_EBADMSG 1\n+_ACEOF\n+\n+  fi\n+\n \n # No surprises, no surprises...\n \n@@ -17151,7 +17215,7 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n \n   # Fake what AC_TRY_COMPILE does.  XXX Look at redoing this new-style.\n     cat > conftest.$ac_ext << EOF\n-#line 17154 \"configure\"\n+#line 17218 \"configure\"\n int main()\n {\n   // NB: _Atomic_word not necessarily int."}, {"sha": "9758d5ebb7a3be917405fecbf929a5652e6c5ead", "filename": "libstdc++-v3/include/std/system_error", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fsystem_error", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fsystem_error", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fsystem_error?ref=7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "patch": "@@ -63,7 +63,11 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       argument_out_of_domain = \t\t\tEDOM,\n       bad_address = \t\t\t\tEFAULT,\n       bad_file_descriptor = \t\t\tEBADF,\n+\n+#ifdef _GLIBCXX_HAVE_EBADMSG\n       bad_message = \t\t\t\tEBADMSG,\n+#endif\n+\n       broken_pipe = \t\t\t\tEPIPE,\n       connection_aborted = \t\t\tECONNABORTED,\n       connection_already_in_progress = \t\tEALREADY,"}, {"sha": "0fdf2c7b32d27743b3ed93e5ce7f32052f13a373", "filename": "libstdc++-v3/testsuite/19_diagnostics/error_category/cons/copy_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Ftestsuite%2F19_diagnostics%2Ferror_category%2Fcons%2Fcopy_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Ftestsuite%2F19_diagnostics%2Ferror_category%2Fcons%2Fcopy_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F19_diagnostics%2Ferror_category%2Fcons%2Fcopy_neg.cc?ref=7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "patch": "@@ -50,7 +50,7 @@ int main()\n   return 0;\n }\n \n-// { dg-error \"is private\" \"\" { target *-*-* } 183 }\n+// { dg-error \"is private\" \"\" { target *-*-* } 187 }\n // { dg-error \"within this context\" \"\" { target *-*-* } 29 }\n // { dg-error \"first required here\" \"\" { target *-*-* } 48 }\n // { dg-excess-errors \"copy constructor\" }"}, {"sha": "b5ba872b69a2adc316d74d06310f7e6d49d27151", "filename": "libstdc++-v3/testsuite/19_diagnostics/headers/system_error/types_std_c++0x.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Ftestsuite%2F19_diagnostics%2Fheaders%2Fsystem_error%2Ftypes_std_c%2B%2B0x.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7336815f6fa8c43e6883a46ef3e32f2bee920ebc/libstdc%2B%2B-v3%2Ftestsuite%2F19_diagnostics%2Fheaders%2Fsystem_error%2Ftypes_std_c%2B%2B0x.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F19_diagnostics%2Fheaders%2Fsystem_error%2Ftypes_std_c%2B%2B0x.cc?ref=7336815f6fa8c43e6883a46ef3e32f2bee920ebc", "patch": "@@ -37,7 +37,11 @@ namespace gnu\n   using std::argument_out_of_domain;\n   using std:: bad_address;\n   using std::bad_file_descriptor;\n+\n+#ifdef _GLIBCXX_HAVE_EBADMSG\n   using std::bad_message;\n+#endif\n+\n   using std::broken_pipe;\n   using std::connection_aborted;\n   using std::connection_already_in_progress; "}]}