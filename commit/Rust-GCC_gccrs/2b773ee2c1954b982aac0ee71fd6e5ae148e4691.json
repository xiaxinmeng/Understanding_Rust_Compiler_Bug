{"sha": "2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI3NzNlZTJjMTk1NGI5ODJhYWMwZWU3MWZkNmU1YWUxNDhlNDY5MQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2002-07-23T12:08:10Z"}, "committer": {"name": "Gerald Pfeifer", "email": "gerald@gcc.gnu.org", "date": "2002-07-23T12:08:10Z"}, "message": "gcse.c (try_replace_reg): Use num_changes_pending.\n\n2002-07-23  Jan Hubicka  <jh@suse.cz>\n\n\t* gcse.c (try_replace_reg): Use num_changes_pending.\n\t* recog.c (num_changes_pending): New function.\n\t(validate_replace_src): Use validate_repalce_src_group.\n\t(validate_replace_src_group): New.\n\t* recog.h (validate_repalce_src_group): New.\n\t(num_changes_pending): Likewise.\n\nFrom-SVN: r55677", "tree": {"sha": "6ad4354996bd2595d502fa3e71a030e6cfb95ec4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ad4354996bd2595d502fa3e71a030e6cfb95ec4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/comments", "author": null, "committer": null, "parents": [{"sha": "a0dc500c860478e0917fd98ad618ec65482fe395", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0dc500c860478e0917fd98ad618ec65482fe395", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0dc500c860478e0917fd98ad618ec65482fe395"}], "stats": {"total": 41, "additions": 33, "deletions": 8}, "files": [{"sha": "b66163379c3a7b148fa8c66507261dd4ae79d615", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "patch": "@@ -1,3 +1,12 @@\n+2002-07-23  Jan Hubicka  <jh@suse.cz>\n+\n+\t* gcse.c (try_replace_reg): Use num_changes_pending.\n+\t* recog.c (num_changes_pending): New function.\n+\t(validate_replace_src): Use validate_repalce_src_group.\n+\t(validate_replace_src_group): New.\n+\t* recog.h (validate_repalce_src_group): New.\n+\t(num_changes_pending): Likewise.\n+\n Tue Jul 23 12:16:58 2002  J\"orn Rennecke <joern.rennecke@superh.com>\n \n \t* calls.c (emit_library_call_value_1): If"}, {"sha": "620b98636be1e0058954e4ef7b33e52ba0fb0a70", "filename": "gcc/gcse.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2Fgcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2Fgcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcse.c?ref=2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "patch": "@@ -3977,10 +3977,9 @@ try_replace_reg (from, to, insn)\n   int success = 0;\n   rtx set = single_set (insn);\n \n-  if (reg_mentioned_p (from, PATTERN (insn)))\n-    {\n-      success = validate_replace_src (from, to, insn);\n-    }\n+  validate_replace_src_group (from, to, insn);\n+  if (num_changes_pending () && apply_change_group ())\n+    success = 1;\n \n   if (!success && set && reg_mentioned_p (from, SET_SRC (set)))\n     {"}, {"sha": "3769249154b84a0703753e952d5105fee7fb76c5", "filename": "gcc/recog.c", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2Frecog.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2Frecog.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frecog.c?ref=2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "patch": "@@ -308,6 +308,13 @@ insn_invalid_p (insn)\n   return 0;\n }\n \n+/* Return number of changes made and not validated yet.  */\n+int\n+num_changes_pending ()\n+{\n+  return num_changes;\n+}\n+\n /* Apply a group of changes previously issued with `validate_change'.\n    Return 1 if all changes are valid, zero otherwise.  */\n \n@@ -671,11 +678,10 @@ validate_replace_src_1 (x, data)\n }\n \n /* Try replacing every occurrence of FROM in INSN with TO, avoiding\n-   SET_DESTs.  After all changes have been made, validate by seeing if\n-   INSN is still valid.  */\n+   SET_DESTs.  */\n \n-int\n-validate_replace_src (from, to, insn)\n+void\n+validate_replace_src_group (from, to, insn)\n      rtx from, to, insn;\n {\n   struct validate_replace_src_data d;\n@@ -684,6 +690,15 @@ validate_replace_src (from, to, insn)\n   d.to = to;\n   d.insn = insn;\n   note_uses (&PATTERN (insn), validate_replace_src_1, &d);\n+}\n+\n+/* Same as validate_repalace_src_group, but validate by seeing if\n+   INSN is still valid.  */\n+int\n+validate_replace_src (from, to, insn)\n+     rtx from, to, insn;\n+{\n+  validate_replace_src_group (from, to, insn);\n   return apply_change_group ();\n }\n \f"}, {"sha": "86af35f721f62083c8f90c86df410c13814a17d1", "filename": "gcc/recog.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2Frecog.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b773ee2c1954b982aac0ee71fd6e5ae148e4691/gcc%2Frecog.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frecog.h?ref=2b773ee2c1954b982aac0ee71fd6e5ae148e4691", "patch": "@@ -89,6 +89,8 @@ extern int validate_replace_rtx_subexp\tPARAMS ((rtx, rtx, rtx, rtx *));\n extern int validate_replace_rtx\t\tPARAMS ((rtx, rtx, rtx));\n extern void validate_replace_rtx_group\tPARAMS ((rtx, rtx, rtx));\n extern int validate_replace_src\t\tPARAMS ((rtx, rtx, rtx));\n+extern void validate_replace_src_group\tPARAMS ((rtx, rtx, rtx));\n+extern int num_changes_pending\t\tPARAMS ((void));\n #ifdef HAVE_cc0\n extern int next_insn_tests_no_inequality PARAMS ((rtx));\n #endif"}]}