{"sha": "63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjNlNjI0N2RmZTFmYjE2YjJjMTc5ZDFiMWUwNGI3Y2EwZWZiNTA2ZA==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2014-02-07T22:35:49Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2014-02-07T22:35:49Z"}, "message": "re PR target/40977 (problem with code like this: res = ((uint64_t)resh << 32) | resl;)\n\n\tPR target/40977\n\t* config/m68k/m68k.md (ashldi_extsi): Turn into a\n\tdefine_insn_and_split.\n\nFrom-SVN: r207615", "tree": {"sha": "ab3e633f7ef262d6a3a2e22f5f722d5abe0caaaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab3e633f7ef262d6a3a2e22f5f722d5abe0caaaf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d/comments", "author": null, "committer": null, "parents": [{"sha": "b581c05cd9f25891505720ec8a41bfab5d13eb43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b581c05cd9f25891505720ec8a41bfab5d13eb43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b581c05cd9f25891505720ec8a41bfab5d13eb43"}], "stats": {"total": 23, "additions": 10, "deletions": 13}, "files": [{"sha": "12379040b365aefc145c12fcb6f312645578b812", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d", "patch": "@@ -1,5 +1,9 @@\n 2014-02-07  Jeff Law  <law@redhat.com>\n \n+\tPR target/40977\n+\t* config/m68k/m68k.md (ashldi_extsi): Turn into a\n+\tdefine_insn_and_split.\n+\n \t* ipa-inline.c (inline_small_functions): Fix typos.\n \n 2014-02-07  Richard Sandiford  <rsandifo@linux.vnet.ibm.com>"}, {"sha": "e61048b4d0b6c32b24264975e966e20af664d76c", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 6, "deletions": 13, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=63e6247dfe1fb16b2c179d1b1e04b7ca0efb506d", "patch": "@@ -4338,25 +4338,18 @@\n \f\n ;; arithmetic shift instructions\n ;; We don't need the shift memory by 1 bit instruction\n-\n-(define_insn \"ashldi_extsi\"\n+(define_insn_and_split \"ashldi_extsi\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=ro\")\n     (ashift:DI\n       (match_operator:DI 2 \"extend_operator\"\n         [(match_operand:SI 1 \"general_operand\" \"rm\")])\n       (const_int 32)))]\n   \"\"\n-{\n-  CC_STATUS_INIT;\n-  if (GET_CODE (operands[0]) == REG)\n-    operands[2] = gen_rtx_REG (SImode, REGNO (operands[0]) + 1);\n-  else\n-    operands[2] = adjust_address (operands[0], SImode, 4);\n-  if (ADDRESS_REG_P (operands[0]))\n-    return \"move%.l %1,%0\\;sub%.l %2,%2\";\n-  else\n-    return \"move%.l %1,%0\\;clr%.l %2\";\n-})\n+  \"#\"\n+  \"&& reload_completed\"\n+  [(set (match_dup 3) (match_dup 1))\n+   (set (match_dup 2) (const_int 0))]\n+  \"split_di(operands, 1, operands + 2, operands + 3);\")\n \n (define_insn \"ashldi_sexthi\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=m,a*d\")"}]}