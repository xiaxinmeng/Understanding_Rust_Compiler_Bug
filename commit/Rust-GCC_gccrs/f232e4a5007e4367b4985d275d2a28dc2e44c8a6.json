{"sha": "f232e4a5007e4367b4985d275d2a28dc2e44c8a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjIzMmU0YTUwMDdlNDM2N2I0OTg1ZDI3NWQyYTI4ZGMyZTQ0YzhhNg==", "commit": {"author": {"name": "Joern Rennecke", "email": "amylaar@redhat.com", "date": "2001-08-30T12:44:22Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-08-30T12:44:22Z"}, "message": "class.c (build_vtable_entry_ref): Subtract in char*, not ptrdiff_t.\n\n        * class.c (build_vtable_entry_ref): Subtract in char*, not\n        ptrdiff_t.\n\nCo-Authored-By: Jason Merrill <jason@redhat.com>\n\nFrom-SVN: r45284", "tree": {"sha": "6bce5482fdc3608ec966a1e66aac8846c19c3dd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bce5482fdc3608ec966a1e66aac8846c19c3dd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f232e4a5007e4367b4985d275d2a28dc2e44c8a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f232e4a5007e4367b4985d275d2a28dc2e44c8a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f232e4a5007e4367b4985d275d2a28dc2e44c8a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f232e4a5007e4367b4985d275d2a28dc2e44c8a6/comments", "author": null, "committer": null, "parents": [{"sha": "c8cbefbb579cf30d50110e3ce7ba4cf796282994", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8cbefbb579cf30d50110e3ce7ba4cf796282994", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8cbefbb579cf30d50110e3ce7ba4cf796282994"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "5acd064033553aa69069a8de0a19a28bf58531bd", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f232e4a5007e4367b4985d275d2a28dc2e44c8a6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f232e4a5007e4367b4985d275d2a28dc2e44c8a6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f232e4a5007e4367b4985d275d2a28dc2e44c8a6", "patch": "@@ -1,3 +1,9 @@\n+2001-08-30  Joern Rennecke <amylaar@redhat.com>\n+\t    Jason Merrill  <jason_merrill@redhat.com>\n+\n+\t* class.c (build_vtable_entry_ref): Subtract in char*, not\n+\tptrdiff_t.\n+\n 2001-08-23  Jason Merrill  <jason_merrill@redhat.com>\n \n \t* tree.c (cp_build_qualified_type_real): Use get_qualified_type."}, {"sha": "3a9e38923e16c8e07fdabf2d8da3df472e987fa0", "filename": "gcc/cp/class.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f232e4a5007e4367b4985d275d2a28dc2e44c8a6/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f232e4a5007e4367b4985d275d2a28dc2e44c8a6/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=f232e4a5007e4367b4985d275d2a28dc2e44c8a6", "patch": "@@ -444,9 +444,12 @@ build_vtable_entry_ref (basetype, idx)\n   s = build_tree_list (build_string (1, \"s\"), s);\n \n   i = build_array_ref (first_fn, idx);\n-  i = build_c_cast (ptrdiff_type_node, build_unary_op (ADDR_EXPR, i, 0));\n+  /* We must not convert to ptrdiff_type node here, since this could widen\n+     from a partial to an integral node, which would create a\n+     convert_expression that would be in the way of any simplifications.  */\n+  i = build_c_cast (string_type_node, build_unary_op (ADDR_EXPR, i, 0));\n   i2 = build_array_ref (vtable, build_int_2 (0,0));\n-  i2 = build_c_cast (ptrdiff_type_node, build_unary_op (ADDR_EXPR, i2, 0));\n+  i2 = build_c_cast (string_type_node, build_unary_op (ADDR_EXPR, i2, 0));\n   i = cp_build_binary_op (MINUS_EXPR, i, i2);\n   i = build_tree_list (build_string (1, \"i\"), i);\n "}]}