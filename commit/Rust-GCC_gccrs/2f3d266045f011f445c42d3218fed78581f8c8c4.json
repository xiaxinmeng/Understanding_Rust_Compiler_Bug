{"sha": "2f3d266045f011f445c42d3218fed78581f8c8c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmYzZDI2NjA0NWYwMTFmNDQ1YzQyZDMyMThmZWQ3ODU4MWY4YzhjNA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2019-02-16T22:16:04Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2019-02-16T22:16:04Z"}, "message": "i386: Add ssse3_pmulhrswv4hi3 expander\n\nThere is no V4HI pmulhrsw in AVX512BW and V4HI/V8HI pmulhrsw don't require\nAVX2.\n\n\tPR target/89372\n\t* config/i386/sse.md (ssedoublemode): Remove V4HI.\n\t(PMULHRSW): Likewise.\n\t(<ssse3_avx2>_pmulhrsw<mode>3): Require TARGET_SSSE3, not\n\tTARGET_AVX2.\n\t(ssse3_pmulhrswv4hi3): New expander.\n\nFrom-SVN: r268964", "tree": {"sha": "684877f0553b64ff33acd6f9ed842aed0cdebecd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/684877f0553b64ff33acd6f9ed842aed0cdebecd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f3d266045f011f445c42d3218fed78581f8c8c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f3d266045f011f445c42d3218fed78581f8c8c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f3d266045f011f445c42d3218fed78581f8c8c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f3d266045f011f445c42d3218fed78581f8c8c4/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "49be11f5c9376c0b3ee0b4f8a1cc19ca797e9f45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49be11f5c9376c0b3ee0b4f8a1cc19ca797e9f45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49be11f5c9376c0b3ee0b4f8a1cc19ca797e9f45"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "d80e4f46e5aa1fa3e4f6f9491895e4a8459d529e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f3d266045f011f445c42d3218fed78581f8c8c4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f3d266045f011f445c42d3218fed78581f8c8c4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2f3d266045f011f445c42d3218fed78581f8c8c4", "patch": "@@ -1,3 +1,12 @@\n+2019-02-16  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/89372\n+\t* config/i386/sse.md (ssedoublemode): Remove V4HI.\n+\t(PMULHRSW): Likewise.\n+\t(<ssse3_avx2>_pmulhrsw<mode>3): Require TARGET_SSSE3, not\n+\tTARGET_AVX2.\n+\t(ssse3_pmulhrswv4hi3): New expander.\n+\n 2019-02-16  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/mmx.md (*vec_extractv2si_zext_mem): Doesn't require"}, {"sha": "8036136752ad7dde03911d0af72da8923212d4b9", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 23, "deletions": 3, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f3d266045f011f445c42d3218fed78581f8c8c4/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f3d266045f011f445c42d3218fed78581f8c8c4/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=2f3d266045f011f445c42d3218fed78581f8c8c4", "patch": "@@ -596,7 +596,7 @@\n   [(V4SF \"V8SF\") (V8SF \"V16SF\") (V16SF \"V32SF\")\n    (V2DF \"V4DF\") (V4DF \"V8DF\") (V8DF \"V16DF\")\n    (V16QI \"V16HI\") (V32QI \"V32HI\") (V64QI \"V64HI\")\n-   (V4HI \"V4SI\") (V8HI \"V8SI\") (V16HI \"V16SI\") (V32HI \"V32SI\")\n+   (V8HI \"V8SI\") (V16HI \"V16SI\") (V32HI \"V32SI\")\n    (V4SI \"V4DI\") (V8SI \"V16SI\") (V16SI \"V32SI\")\n    (V4DI \"V8DI\") (V8DI \"V16DI\")])\n \n@@ -15590,7 +15590,7 @@\n    (set_attr \"mode\" \"DI\")])\n \n (define_mode_iterator PMULHRSW\n-  [V4HI V8HI (V16HI \"TARGET_AVX2\")])\n+  [V8HI (V16HI \"TARGET_AVX2\")])\n \n (define_expand \"<ssse3_avx2>_pmulhrsw<mode>3_mask\"\n   [(set (match_operand:PMULHRSW 0 \"register_operand\")\n@@ -15629,7 +15629,7 @@\n \t\t(const_int 14))\n \t      (match_dup 3))\n \t    (const_int 1))))]\n-  \"TARGET_AVX2\"\n+  \"TARGET_SSSE3\"\n {\n   operands[3] = CONST1_RTX(<MODE>mode);\n   ix86_fixup_binary_operands_no_copy (MULT, <MODE>mode, operands);\n@@ -15662,6 +15662,26 @@\n    (set_attr \"prefix\" \"orig,maybe_evex,evex\")\n    (set_attr \"mode\" \"<sseinsnmode>\")])\n \n+(define_expand \"ssse3_pmulhrswv4hi3\"\n+  [(set (match_operand:V4HI 0 \"register_operand\")\n+\t(truncate:V4HI\n+\t  (lshiftrt:V4SI\n+\t    (plus:V4SI\n+\t      (lshiftrt:V4SI\n+\t\t(mult:V4SI\n+\t\t  (sign_extend:V4SI\n+\t\t    (match_operand:V4HI 1 \"nonimmediate_operand\"))\n+\t\t  (sign_extend:V4SI\n+\t\t    (match_operand:V4HI 2 \"nonimmediate_operand\")))\n+\t\t(const_int 14))\n+\t      (match_dup 3))\n+\t    (const_int 1))))]\n+  \"TARGET_SSSE3\"\n+{\n+  operands[3] = CONST1_RTX(V4HImode);\n+  ix86_fixup_binary_operands_no_copy (MULT, V4HImode, operands);\n+})\n+\n (define_insn \"*ssse3_pmulhrswv4hi3\"\n   [(set (match_operand:V4HI 0 \"register_operand\" \"=y\")\n \t(truncate:V4HI"}]}