{"sha": "e948157df85d8bfbb9302263227dab1ff8d9ba74", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk0ODE1N2RmODVkOGJmYmI5MzAyMjYzMjI3ZGFiMWZmOGQ5YmE3NA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2011-11-08T21:18:26Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2011-11-08T21:18:26Z"}, "message": "Test for libitm directory present before testing for support.\n\nFrom-SVN: r181179", "tree": {"sha": "0bff03ed84c4fe244e59b64d21af8f00e91bf32b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0bff03ed84c4fe244e59b64d21af8f00e91bf32b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e948157df85d8bfbb9302263227dab1ff8d9ba74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e948157df85d8bfbb9302263227dab1ff8d9ba74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e948157df85d8bfbb9302263227dab1ff8d9ba74", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e948157df85d8bfbb9302263227dab1ff8d9ba74/comments", "author": null, "committer": null, "parents": [{"sha": "86fc3d06b086930c41fa9fa1be82a0fa92699a12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86fc3d06b086930c41fa9fa1be82a0fa92699a12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86fc3d06b086930c41fa9fa1be82a0fa92699a12"}], "stats": {"total": 54, "additions": 31, "deletions": 23}, "files": [{"sha": "c25db94119fa0a38574ebe0dfacff38ba305e33e", "filename": "ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e948157df85d8bfbb9302263227dab1ff8d9ba74/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e948157df85d8bfbb9302263227dab1ff8d9ba74/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=e948157df85d8bfbb9302263227dab1ff8d9ba74", "patch": "@@ -1,5 +1,7 @@\n 2011-11-08  Richard Henderson  <rth@redhat.com>\n \n+\t* configure.ac: Test for libitm directory present first.\n+\n \t* configure.ac: Adjust srcdir for running libitm/configure.tgt.\n \n \t* configure.ac: Test libitm/configure.tgt to disable libitm."}, {"sha": "8a37411f686aa355cf4413731355eca0bfdc4805", "filename": "configure", "status": "modified", "additions": 15, "deletions": 12, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e948157df85d8bfbb9302263227dab1ff8d9ba74/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e948157df85d8bfbb9302263227dab1ff8d9ba74/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=e948157df85d8bfbb9302263227dab1ff8d9ba74", "patch": "@@ -3057,20 +3057,23 @@ if test x$enable_libgomp = x ; then\n     esac\n fi\n \n-# Disable libitm on unsupported hosted systems.\n-if test x$enable_libitm = x; then\n-   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for libitm support\" >&5\n+# Disable libitm on unsupported systems.\n+if test -d ${srcdir}/libitm; then\n+    if test x$enable_libitm = x; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for libitm support\" >&5\n $as_echo_n \"checking for libitm support... \" >&6; }\n-   if (srcdir=${srcdir}/libitm; \\\n-       . ${srcdir}/configure.tgt; \\\n-       test -n \"$UNSUPPORTED\"); then\n-\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-\tnoconfigdirs=\"$noconfigdirs target-libitm\"\n-   else\n-\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: yes\" >&5\n+\tif (srcdir=${srcdir}/libitm; \\\n+\t\t. ${srcdir}/configure.tgt; \\\n+\t\ttest -n \"$UNSUPPORTED\")\n+\tthen\n+\t    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+\t    noconfigdirs=\"$noconfigdirs target-libitm\"\n+\telse\n+\t    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: yes\" >&5\n $as_echo \"yes\" >&6; }\n-   fi\n+\tfi\n+    fi\n fi\n \n # Disable libssp for some systems."}, {"sha": "efabad4a224c483501d06e3cde0e1dbd7a34da58", "filename": "configure.ac", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e948157df85d8bfbb9302263227dab1ff8d9ba74/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e948157df85d8bfbb9302263227dab1ff8d9ba74/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=e948157df85d8bfbb9302263227dab1ff8d9ba74", "patch": "@@ -493,17 +493,20 @@ if test x$enable_libgomp = x ; then\n     esac\n fi\n \n-# Disable libitm on unsupported hosted systems.\n-if test x$enable_libitm = x; then\n-   AC_MSG_CHECKING([for libitm support])\n-   if (srcdir=${srcdir}/libitm; \\\n-       . ${srcdir}/configure.tgt; \\\n-       test -n \"$UNSUPPORTED\"); then\n-\tAC_MSG_RESULT([no])\n-\tnoconfigdirs=\"$noconfigdirs target-libitm\"\n-   else\n-\tAC_MSG_RESULT([yes])\n-   fi\n+# Disable libitm on unsupported systems.\n+if test -d ${srcdir}/libitm; then\n+    if test x$enable_libitm = x; then\n+\tAC_MSG_CHECKING([for libitm support])\n+\tif (srcdir=${srcdir}/libitm; \\\n+\t\t. ${srcdir}/configure.tgt; \\\n+\t\ttest -n \"$UNSUPPORTED\")\n+\tthen\n+\t    AC_MSG_RESULT([no])\n+\t    noconfigdirs=\"$noconfigdirs target-libitm\"\n+\telse\n+\t    AC_MSG_RESULT([yes])\n+\tfi\n+    fi\n fi\n \n # Disable libssp for some systems."}]}