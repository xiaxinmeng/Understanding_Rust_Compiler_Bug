{"sha": "55e7f90769fbc29ce4e156d33c63298497acceb7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTVlN2Y5MDc2OWZiYzI5Y2U0ZTE1NmQzM2M2MzI5ODQ5N2FjY2ViNw==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2012-10-15T20:08:57Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2012-10-15T20:08:57Z"}, "message": "files.c (read_file_guts, [...]): Free memory before returning.\n\n2012-10-15  Tobias Burnus  <burnus@net-b.de>\n\n        * files.c (read_file_guts, _cpp_save_file_entries): Free memory\n        before returning.\n        * lex.c (warn_about_normalization): Ditto.\n        * mkdeps.c (deps_save): Ditto.\n        * pch.c (cpp_valid_state): Ditto.\n\nFrom-SVN: r192474", "tree": {"sha": "9638e29aa7f7e52938c01390081a134c642b7a02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9638e29aa7f7e52938c01390081a134c642b7a02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55e7f90769fbc29ce4e156d33c63298497acceb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55e7f90769fbc29ce4e156d33c63298497acceb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55e7f90769fbc29ce4e156d33c63298497acceb7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55e7f90769fbc29ce4e156d33c63298497acceb7/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "95bf35bd2566026f8337185dff6633358b3bbb7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95bf35bd2566026f8337185dff6633358b3bbb7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95bf35bd2566026f8337185dff6633358b3bbb7f"}], "stats": {"total": 26, "additions": 22, "deletions": 4}, "files": [{"sha": "fdc151c9aa68558b906f15b466001b3ef61a4e94", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=55e7f90769fbc29ce4e156d33c63298497acceb7", "patch": "@@ -1,3 +1,11 @@\n+2012-10-15  Tobias Burnus  <burnus@net-b.de>\n+\n+\t* files.c (read_file_guts, _cpp_save_file_entries): Free memory\n+\tbefore returning.\n+\t* lex.c (warn_about_normalization): Ditto.\n+\t* mkdeps.c (deps_save): Ditto.\n+\t* pch.c (cpp_valid_state): Ditto.\n+\n 2012-10-04  Florian Weimer  <fweimer@redhat.com>\n \n \t* directives.c (do_pragma_warning_or_error): New."}, {"sha": "6fc24e2af44908f561954c492a58b6a6625b956b", "filename": "libcpp/files.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Ffiles.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Ffiles.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Ffiles.c?ref=55e7f90769fbc29ce4e156d33c63298497acceb7", "patch": "@@ -671,6 +671,7 @@ read_file_guts (cpp_reader *pfile, _cpp_file *file)\n   if (count < 0)\n     {\n       cpp_errno (pfile, CPP_DL_ERROR, file->path);\n+      free (buf);\n       return false;\n     }\n \n@@ -1759,6 +1760,7 @@ _cpp_save_file_entries (cpp_reader *pfile, FILE *fp)\n \t  if (!open_file (f))\n \t    {\n \t      open_file_failed (pfile, f, 0);\n+\t      free (result);\n \t      return false;\n \t    }\n \t  ff = fdopen (f->fd, \"rb\");"}, {"sha": "23809bc4b0aafea79d5ccf645d0fe23da66198df", "filename": "libcpp/lex.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Flex.c?ref=55e7f90769fbc29ce4e156d33c63298497acceb7", "patch": "@@ -1094,6 +1094,7 @@ warn_about_normalization (cpp_reader *pfile,\n       else\n \tcpp_warning_with_line (pfile, CPP_W_NORMALIZE, token->src_loc, 0,\n \t\t\t       \"`%.*s' is not in NFC\", (int) sz, buf);\n+      free (buf);\n     }\n }\n "}, {"sha": "b57681392a69433c9e2305396235c7410584c2bb", "filename": "libcpp/mkdeps.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Fmkdeps.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Fmkdeps.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fmkdeps.c?ref=55e7f90769fbc29ce4e156d33c63298497acceb7", "patch": "@@ -399,25 +399,33 @@ deps_restore (struct deps *deps, FILE *fd, const char *self)\n   unsigned int i, count;\n   size_t num_to_read;\n   size_t buf_size = 512;\n-  char *buf = XNEWVEC (char, buf_size);\n+  char *buf;\n \n   /* Number of dependences.  */\n   if (fread (&count, 1, sizeof (count), fd) != sizeof (count))\n     return -1;\n \n+  buf = XNEWVEC (char, buf_size);\n+\n   /* The length of each dependence string, followed by the string.  */\n   for (i = 0; i < count; i++)\n     {\n       /* Read in # bytes in string.  */\n       if (fread (&num_to_read, 1, sizeof (size_t), fd) != sizeof (size_t))\n-\treturn -1;\n+\t{\n+\t  free (buf);\n+\t  return -1;\n+\t}\n       if (buf_size < num_to_read + 1)\n \t{\n \t  buf_size = num_to_read + 1 + 127;\n \t  buf = XRESIZEVEC (char, buf, buf_size);\n \t}\n       if (fread (buf, 1, num_to_read, fd) != num_to_read)\n-\treturn -1;\n+\t{\n+\t  free (buf);\n+\t  return -1;\n+\t}\n       buf[num_to_read] = '\\0';\n \n       /* Generate makefile dependencies from .pch if -nopch-deps.  */"}, {"sha": "001bf3faeef08c69ae470874c2e433b46b4d8f76", "filename": "libcpp/pch.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Fpch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55e7f90769fbc29ce4e156d33c63298497acceb7/libcpp%2Fpch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fpch.c?ref=55e7f90769fbc29ce4e156d33c63298497acceb7", "patch": "@@ -710,7 +710,6 @@ cpp_valid_state (cpp_reader *r, const char *name, int fd)\n \n  error:\n   cpp_errno (r, CPP_DL_ERROR, \"while reading precompiled header\");\n-  return -1;\n \n  fail:\n   free (namebuf);"}]}