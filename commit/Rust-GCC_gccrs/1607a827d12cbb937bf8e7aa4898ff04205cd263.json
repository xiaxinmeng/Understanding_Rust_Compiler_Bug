{"sha": "1607a827d12cbb937bf8e7aa4898ff04205cd263", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTYwN2E4MjdkMTJjYmI5MzdiZjhlN2FhNDg5OGZmMDQyMDVjZDI2Mw==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2010-10-30T15:19:27Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2010-10-30T15:19:27Z"}, "message": "gfortran.h (gfc_option_t): Replace dump_parse_tree by dump_fortran_original and add dump_fortran_optimized.\n\n2010-10-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\t* gfortran.h (gfc_option_t):  Replace dump_parse_tree by\n\tdump_fortran_original and add dump_fortran_optimized.\n\t* lang.opt: Add fdump-fortran-original and\n\tfdump-fortran-optimized.  Document that fdump-parse-tree is\n\tdeprecated.\n\t* gfortran.texi: Add -fdump-fortran-original and\n\t-fdump-fortran-optimized.  -fdump-parse-tree is deprecated.\n\t* frontend-passes.c (gfc_run_passes):  If optimizing and\n\tif gfc_option.dump_fortran_optimized is set, dump the parse tree\n\tafter optimization.\n\t* parse.c:  Rename gfc_option.dump_parse_tree to\n\tgfc_option.dump_fortran_original.\n\t* options.c (gfc_init_options):  Rename gfc_option.dump_parse_tree\n\tto gfc_option.dump_fortran_original and handle\n\tgfc_option.dump_fortran_optimize.\n\t(gfc_post_options): Rename gfc_option.dump_parse_tree\n\tto gfc_option.dump_fortran_original.\n\t(gfc_handle_option):  Rename OPT_fdump_parse_tree to\n\tOPT_fdump_fortran_original and gfc_option.dump_parse_tree\n\tto gfc_option.dump_fortran_original.  Handle\n\tOPT_fdump_fortran_optimized.\n\nFrom-SVN: r166091", "tree": {"sha": "0608ea9d977a8fa74b9ef3db8ea43a4d8e2e65a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0608ea9d977a8fa74b9ef3db8ea43a4d8e2e65a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1607a827d12cbb937bf8e7aa4898ff04205cd263", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1607a827d12cbb937bf8e7aa4898ff04205cd263", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1607a827d12cbb937bf8e7aa4898ff04205cd263", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1607a827d12cbb937bf8e7aa4898ff04205cd263/comments", "author": null, "committer": null, "parents": [{"sha": "dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcedcddb5aabef25f66c651a2c35b9974ceff3cb"}], "stats": {"total": 81, "additions": 68, "deletions": 13}, "files": [{"sha": "9dae56aebe5603433c224e6b3d57f0d028f901cd", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1607a827d12cbb937bf8e7aa4898ff04205cd263", "patch": "@@ -1,3 +1,27 @@\n+2010-10-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\t* gfortran.h (gfc_option_t):  Replace dump_parse_tree by\n+\tdump_fortran_original and add dump_fortran_optimized.\n+\t* lang.opt: Add fdump-fortran-original and\n+\tfdump-fortran-optimized.  Document that fdump-parse-tree is\n+\tdeprecated.\n+\t* gfortran.texi: Add -fdump-fortran-original and\n+\t-fdump-fortran-optimized.  -fdump-parse-tree is deprecated.\n+\t* frontend-passes.c (gfc_run_passes):  If optimizing and\n+\tif gfc_option.dump_fortran_optimized is set, dump the parse tree\n+\tafter optimization.\n+\t* parse.c:  Rename gfc_option.dump_parse_tree to\n+\tgfc_option.dump_fortran_original.\n+\t* options.c (gfc_init_options):  Rename gfc_option.dump_parse_tree\n+\tto gfc_option.dump_fortran_original and handle\n+\tgfc_option.dump_fortran_optimize.\n+\t(gfc_post_options): Rename gfc_option.dump_parse_tree\n+\tto gfc_option.dump_fortran_original.\n+\t(gfc_handle_option):  Rename OPT_fdump_parse_tree to\n+\tOPT_fdump_fortran_original and gfc_option.dump_parse_tree\n+\tto gfc_option.dump_fortran_original.  Handle\n+\tOPT_fdump_fortran_optimized.\n+\n 2010-10-30  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/44917"}, {"sha": "6cea263bdeed9eaebc0d988f7ab710f8f0e3fa69", "filename": "gcc/fortran/frontend-passes.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Ffrontend-passes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Ffrontend-passes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ffrontend-passes.c?ref=1607a827d12cbb937bf8e7aa4898ff04205cd263", "patch": "@@ -42,7 +42,11 @@ void\n gfc_run_passes (gfc_namespace *ns)\n {\n   if (optimize)\n-    optimize_namespace (ns);\n+    {\n+      optimize_namespace (ns);\n+      if (gfc_option.dump_fortran_optimized)\n+\tgfc_dump_parse_tree (ns, stdout);\n+    }\n }\n \n /* Callback for each gfc_code node invoked through gfc_code_walker"}, {"sha": "b96dd6420cad11d905c3e6395f32412fdc6847d6", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=1607a827d12cbb937bf8e7aa4898ff04205cd263", "patch": "@@ -2178,7 +2178,8 @@ typedef struct\n   int max_continue_fixed;\n   int max_continue_free;\n   int max_identifier_length;\n-  int dump_parse_tree;\n+  int dump_fortran_original;\n+  int dump_fortran_optimized;\n \n   int warn_aliasing;\n   int warn_ampersand;"}, {"sha": "bacab6ba6bf628aed704ba5eaf24a13564110904", "filename": "gcc/fortran/invoke.texi", "status": "modified", "additions": 17, "deletions": 5, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finvoke.texi?ref=1607a827d12cbb937bf8e7aa4898ff04205cd263", "patch": "@@ -143,8 +143,8 @@ and warnings}.\n \n @item Debugging Options\n @xref{Debugging Options,,Options for debugging your program or GNU Fortran}.\n-@gccoptlist{-fdump-parse-tree  -ffpe-trap=@var{list} @gol\n--fdump-core -fbacktrace}\n+@gccoptlist{-fdump-fortran-original  -fdump-fortran-optimized @gol\n+-ffpe-trap=@var{list}  -fdump-core -fbacktrace -fdump-parse-tree}\n \n @item Directory Options\n @xref{Directory Options,,Options for directory search}.\n@@ -879,10 +879,22 @@ GNU Fortran has various special options that are used for debugging\n either your program or the GNU Fortran compiler.\n \n @table @gcctabopt\n-@item -fdump-parse-tree\n+@item -fdump-fortran-original\n+@opindex @code{fdump-fortran-original}\n+Output the internal parse tree after translating the source program\n+into internal representation.  Only really useful for debugging the\n+GNU Fortran compiler itself.\n+\n+@item -fdump-optimized-tree\n+@opindex @code{fdump-fortran-optimized}\n+Output the parse tree after front-end optimization.  Only really\n+useful for debugging the GNU Fortran compiler itself.\n+\n @opindex @code{fdump-parse-tree}\n-Output the internal parse tree before starting code generation.  Only\n-really useful for debugging the GNU Fortran compiler itself.\n+Output the internal parse tree after translating the source program\n+into internal representation.  Only really useful for debugging the\n+GNU Fortran compiler itself.  This option is deprecated; use\n+@code{-fdump-fortran-original} instead.\n \n @item -ffpe-trap=@var{list}\n @opindex @code{ffpe-trap=}@var{list}"}, {"sha": "6088730034046c07ef831872ed0d81248d504fe0", "filename": "gcc/fortran/lang.opt", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang.opt?ref=1607a827d12cbb937bf8e7aa4898ff04205cd263", "patch": "@@ -358,10 +358,18 @@ fdump-core\n Fortran\n Dump a core file when a runtime error occurs\n \n-fdump-parse-tree\n+fdump-fortran-original\n Fortran\n Display the code tree after parsing\n \n+fdump-fortran-optimized\n+Fortran\n+Display the code tree after front end optimization\n+\n+fdump-parse-tree\n+Fortran\n+Display the code tree after parsing; deprecated option\n+\n fexternal-blas\n Fortran\n Specify that an external BLAS library should be used for matmul calls on large-size arrays"}, {"sha": "36dd9c831152e91c818340074b80f3bb8a43e55f", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=1607a827d12cbb937bf8e7aa4898ff04205cd263", "patch": "@@ -90,7 +90,8 @@ gfc_init_options (unsigned int decoded_options_count,\n   gfc_option.flag_max_array_constructor = 65535;\n   gfc_option.convert = GFC_CONVERT_NATIVE;\n   gfc_option.record_marker = 0;\n-  gfc_option.dump_parse_tree = 0;\n+  gfc_option.dump_fortran_original = 0;\n+  gfc_option.dump_fortran_optimized = 0;\n \n   gfc_option.warn_aliasing = 0;\n   gfc_option.warn_ampersand = 0;\n@@ -270,7 +271,7 @@ gfc_post_options (const char **pfilename)\n     gfc_option.rtcheck |= GFC_RTCHECK_BOUNDS;\n \n   if (flag_compare_debug)\n-    gfc_option.dump_parse_tree = 0;\n+    gfc_option.dump_fortran_original = 0;\n \n   /* Verify the input file name.  */\n   if (!filename || strcmp (filename, \"-\") == 0)\n@@ -686,8 +687,13 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       gfc_option.flag_d_lines = 0;\n       break;\n \n+    case OPT_fdump_fortran_original:\n     case OPT_fdump_parse_tree:\n-      gfc_option.dump_parse_tree = value;\n+      gfc_option.dump_fortran_original = value;\n+      break;\n+\n+    case OPT_fdump_fortran_optimized:\n+      gfc_option.dump_fortran_optimized = value;\n       break;\n \n     case OPT_ffixed_form:"}, {"sha": "2e438245646446749f3355948021dc62a82ad992", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1607a827d12cbb937bf8e7aa4898ff04205cd263/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=1607a827d12cbb937bf8e7aa4898ff04205cd263", "patch": "@@ -4373,7 +4373,7 @@ gfc_parse_file (void)\n   gfc_resolve (gfc_current_ns);\n \n   /* Dump the parse tree if requested.  */\n-  if (gfc_option.dump_parse_tree)\n+  if (gfc_option.dump_fortran_original)\n     gfc_dump_parse_tree (gfc_current_ns, stdout);\n \n   gfc_get_errors (NULL, &errors);\n@@ -4431,7 +4431,7 @@ gfc_parse_file (void)\n \n   /* Do the parse tree dump.  */ \n   gfc_current_ns\n-\t= gfc_option.dump_parse_tree ? gfc_global_ns_list : NULL;\n+\t= gfc_option.dump_fortran_original ? gfc_global_ns_list : NULL;\n \n   for (; gfc_current_ns; gfc_current_ns = gfc_current_ns->sibling)\n     {"}]}