{"sha": "bf9d2177bff84eab383fa36cdee01e122884d5da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY5ZDIxNzdiZmY4NGVhYjM4M2ZhMzZjZGVlMDFlMTIyODg0ZDVkYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2005-10-21T18:50:52Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2005-10-21T18:50:52Z"}, "message": "interface.c (compare_actual_formal): Issue error when attempting to pass an assumed-size array as assumed-shape...\n\n\t* interface.c (compare_actual_formal): Issue error when attempting\n\tto pass an assumed-size array as assumed-shape array argument.\n\n\t* gfortran.dg/assumed_dummy_2.f90: New test.\n\nFrom-SVN: r105765", "tree": {"sha": "df26fd7465b4b82175c76b362d35b133f23ff38b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/df26fd7465b4b82175c76b362d35b133f23ff38b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf9d2177bff84eab383fa36cdee01e122884d5da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf9d2177bff84eab383fa36cdee01e122884d5da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf9d2177bff84eab383fa36cdee01e122884d5da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf9d2177bff84eab383fa36cdee01e122884d5da/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2c47f8751a5bea5692b8b68e4c89f7ef6c132e41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c47f8751a5bea5692b8b68e4c89f7ef6c132e41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c47f8751a5bea5692b8b68e4c89f7ef6c132e41"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "be1b9098e5fd9c00f89a4f1bb19c503fd2314b8d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=bf9d2177bff84eab383fa36cdee01e122884d5da", "patch": "@@ -1,3 +1,8 @@\n+2005-10-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* interface.c (compare_actual_formal): Issue error when attempting\n+\tto pass an assumed-size array as assumed-shape array argument.\n+\n 2005-10-20  Erik Edelmann  <erik.edelmann@iki.fi>\n \n \tPR fortran/21625"}, {"sha": "5314d87f9b0526436662596e10f8e04111609054", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=bf9d2177bff84eab383fa36cdee01e122884d5da", "patch": "@@ -1235,6 +1235,21 @@ compare_actual_formal (gfc_actual_arglist ** ap,\n \t  return 0;\n \t}\n \n+      if (f->sym->as\n+\t  && f->sym->as->type == AS_ASSUMED_SHAPE\n+\t  && a->expr->expr_type == EXPR_VARIABLE\n+\t  && a->expr->symtree->n.sym->as\n+\t  && a->expr->symtree->n.sym->as->type == AS_ASSUMED_SIZE\n+\t  && (a->expr->ref == NULL\n+\t      || (a->expr->ref->type == REF_ARRAY\n+\t\t  && a->expr->ref->u.ar.type == AR_FULL)))\n+\t{\n+\t  if (where)\n+\t    gfc_error (\"Actual argument for '%s' cannot be an assumed-size\"\n+\t\t       \" array at %L\", f->sym->name, where);\n+\t  return 0;\n+\t}\n+\n       if (a->expr->expr_type != EXPR_NULL\n \t  && compare_pointer (f->sym, a->expr) == 0)\n \t{"}, {"sha": "741fb74c1591bfe007c1841f90e7405f09286f8e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bf9d2177bff84eab383fa36cdee01e122884d5da", "patch": "@@ -1,3 +1,7 @@\n+2005-10-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gfortran.dg/assumed_dummy_2.f90: New test.\n+\n 2005-10-21  James E Wilson  <wilson@specifix.com>\n \n \tPR preprocessor/15220"}, {"sha": "e63fa5282fee59032b9c9ab7b192d9b352f9318f", "filename": "gcc/testsuite/gfortran.dg/assumed_dummy_2.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_dummy_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf9d2177bff84eab383fa36cdee01e122884d5da/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_dummy_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_dummy_2.f90?ref=bf9d2177bff84eab383fa36cdee01e122884d5da", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do compile }\n+\n+  double precision :: arr(5, 8)\n+  call bar (arr)\n+contains\n+  subroutine foo (arr)\n+    double precision :: arr(:,:)\n+    arr(3, 4) = 24\n+  end subroutine foo\n+  subroutine bar (arr)\n+    double precision :: arr(5,*)\n+    call foo (arr)\t! { dg-error \"cannot be an assumed-size array\" }\n+    call foo (arr (:, :8))\n+  end subroutine\n+end"}]}