{"sha": "d3adfe5dbe08d502a870d0279db39ced6fa1c088", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDNhZGZlNWRiZTA4ZDUwMmE4NzBkMDI3OWRiMzljZWQ2ZmExYzA4OA==", "commit": {"author": {"name": "James Bowman", "email": "james.bowman@ftdichip.com", "date": "2015-09-29T23:34:34Z"}, "committer": {"name": "James Bowman", "email": "jamesbowman@gcc.gnu.org", "date": "2015-09-29T23:34:34Z"}, "message": "Limit the MEMSET (setmemsi pattern) and MEMCPY (movmemsi pattern) instructions to 0-511 bytes.\n\nLimit the MEMSET (setmemsi pattern) and MEMCPY (movmemsi pattern)\ninstructions to 0-511 bytes. There is a hardware limitation on large\nMEMSET, MEMCPY operations that the library versions of memset() and\nmemcpy() deal with.\n\n2015-09-29  James Bowman  <james.bowman@ftdichip.com>\n\n\t* config/ft32/predicates.md (ft32_imm_operand): New predicate.\n\t* config/ft32/ft32.md (movmemsi, setmemsi): Use ft32_imm_operand\n\tpredicate, disallow register for operand 2.\n\nFrom-SVN: r228271", "tree": {"sha": "7fd16acf1d71e9bc3c2a15d9ac584e882621b3b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7fd16acf1d71e9bc3c2a15d9ac584e882621b3b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3adfe5dbe08d502a870d0279db39ced6fa1c088", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3adfe5dbe08d502a870d0279db39ced6fa1c088", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3adfe5dbe08d502a870d0279db39ced6fa1c088", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3adfe5dbe08d502a870d0279db39ced6fa1c088/comments", "author": null, "committer": null, "parents": [{"sha": "3734a25644d2f7ea652303f4268de9e52e4a5a64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3734a25644d2f7ea652303f4268de9e52e4a5a64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3734a25644d2f7ea652303f4268de9e52e4a5a64"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "6f9fea7bf8ecefee5cd18e008ba2e08ad257f2e0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3adfe5dbe08d502a870d0279db39ced6fa1c088/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3adfe5dbe08d502a870d0279db39ced6fa1c088/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d3adfe5dbe08d502a870d0279db39ced6fa1c088", "patch": "@@ -1,3 +1,9 @@\n+2015-09-29  James Bowman  <james.bowman@ftdichip.com>\n+\n+\t* config/ft32/predicates.md (ft32_imm_operand): New predicate.\n+\t* config/ft32/ft32.md (movmemsi, setmemsi): Use ft32_imm_operand\n+\tpredicate, disallow register for operand 2.\n+\n 2015-09-29  Aditya Kumar  <aditya.k7@samsung.com>\n \n \t* graphite-dependences.c (scop_get_dependences): Moved in down"}, {"sha": "1eac74ddb7947a73c26f5794aafdad02d0c04a68", "filename": "gcc/config/ft32/ft32.md", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3adfe5dbe08d502a870d0279db39ced6fa1c088/gcc%2Fconfig%2Fft32%2Fft32.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3adfe5dbe08d502a870d0279db39ced6fa1c088/gcc%2Fconfig%2Fft32%2Fft32.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fft32%2Fft32.md?ref=d3adfe5dbe08d502a870d0279db39ced6fa1c088", "patch": "@@ -841,19 +841,19 @@\n )\n \n (define_insn \"movmemsi\"\n-  [(set (match_operand:BLK 0 \"memory_operand\" \"=W,W,BW\")\n-        (match_operand:BLK 1 \"memory_operand\" \"W,W,BW\"))\n-        (use (match_operand:SI 2 \"ft32_rimm_operand\" \"r,KA,rKA\"))\n+  [(set (match_operand:BLK 0 \"memory_operand\" \"=W,BW\")\n+        (match_operand:BLK 1 \"memory_operand\" \"W,BW\"))\n+        (use (match_operand:SI 2 \"ft32_imm_operand\" \"KA,KA\"))\n         (use (match_operand:SI 3))\n    ]\n   \"\"\n-  \"memcpy.%d3 %b0,%b1,%2 # %3!\"\n+  \"memcpy.%d3 %b0,%b1,%2 \"\n )\n \n (define_insn \"setmemsi\"\n-  [(set (match_operand:BLK 0 \"memory_operand\" \"=BW,BW\") (unspec:BLK [\n-     (use (match_operand:QI 2 \"register_operand\" \"r,r\"))\n-     (use (match_operand:SI 1 \"ft32_rimm_operand\" \"r,KA\"))\n+  [(set (match_operand:BLK 0 \"memory_operand\" \"=BW\") (unspec:BLK [\n+     (use (match_operand:QI 2 \"register_operand\" \"r\"))\n+     (use (match_operand:SI 1 \"ft32_imm_operand\" \"KA\"))\n    ] UNSPEC_SETMEM))\n    (use (match_operand:SI 3))\n    ]"}, {"sha": "32ca8c6b2ade0b3e59997569aa91abbab49886bb", "filename": "gcc/config/ft32/predicates.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3adfe5dbe08d502a870d0279db39ced6fa1c088/gcc%2Fconfig%2Fft32%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3adfe5dbe08d502a870d0279db39ced6fa1c088/gcc%2Fconfig%2Fft32%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fft32%2Fpredicates.md?ref=d3adfe5dbe08d502a870d0279db39ced6fa1c088", "patch": "@@ -80,6 +80,10 @@\n        (and (match_code \"const_int\")\n             (match_test \"IN_RANGE (INTVAL (op), -512, 511)\"))))\n \n+(define_predicate \"ft32_imm_operand\"\n+  (and (match_code \"const_int\")\n+       (match_test \"IN_RANGE (INTVAL (op), -512, 511)\")))\n+\n (define_predicate \"ft32_bwidth_operand\"\n   (and (match_code \"const_int\")\n        (match_test \"IN_RANGE (INTVAL (op), 1, 16)\")))"}]}