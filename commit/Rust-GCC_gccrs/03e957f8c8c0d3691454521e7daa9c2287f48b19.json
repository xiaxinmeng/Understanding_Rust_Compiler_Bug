{"sha": "03e957f8c8c0d3691454521e7daa9c2287f48b19", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNlOTU3ZjhjOGMwZDM2OTE0NTQ1MjFlN2RhYTljMjI4N2Y0OGIxOQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-03-05T17:54:07Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-03-05T17:54:07Z"}, "message": "re PR fortran/26554 ([gfortran] incorrect behaviour when reading a logical variable from a string)\n\n2006-03-05  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/26554\n\t* io/list_read.c (read_logical): Return the value if not in namelist\n\tmode.\n\nFrom-SVN: r111738", "tree": {"sha": "01d97e69c38c0120fd7e67528eb7fbe7d0e171c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01d97e69c38c0120fd7e67528eb7fbe7d0e171c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03e957f8c8c0d3691454521e7daa9c2287f48b19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03e957f8c8c0d3691454521e7daa9c2287f48b19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03e957f8c8c0d3691454521e7daa9c2287f48b19", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03e957f8c8c0d3691454521e7daa9c2287f48b19/comments", "author": null, "committer": null, "parents": [{"sha": "0bf8477d987a278a0cfe8040b6117d2f08469202", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bf8477d987a278a0cfe8040b6117d2f08469202", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bf8477d987a278a0cfe8040b6117d2f08469202"}], "stats": {"total": 29, "additions": 22, "deletions": 7}, "files": [{"sha": "5bfe9c36e103b4e3f5f32a39f749d9ba60638f0b", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03e957f8c8c0d3691454521e7daa9c2287f48b19/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03e957f8c8c0d3691454521e7daa9c2287f48b19/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=03e957f8c8c0d3691454521e7daa9c2287f48b19", "patch": "@@ -1,3 +1,9 @@\n+2006-03-05  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/26554\n+\t* io/list_read.c (read_logical): Return the value if not in namelist\n+\tmode.\n+\n 2006-03-03  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR fortran/25031"}, {"sha": "ab9b25d2ba48030c901b909e3dc1e4180bba70ef", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 16, "deletions": 7, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03e957f8c8c0d3691454521e7daa9c2287f48b19/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03e957f8c8c0d3691454521e7daa9c2287f48b19/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=03e957f8c8c0d3691454521e7daa9c2287f48b19", "patch": "@@ -647,18 +647,17 @@ read_logical (st_parameter_dt *dtp, int length)\n       c = next_char (dtp);\n       if (is_separator(c))\n \t{\n+\t  /* All done if this is not a namelist read.  */\n+\t  if (!dtp->u.p.namelist_mode)\n+\t    goto logical_done;\n+\n \t  unget_char (dtp, c);\n \t  eat_separator (dtp);\n \t  c = next_char (dtp);\n \t  if (c != '=')\n \t    {\n \t      unget_char (dtp, c);\n-\t      dtp->u.p.item_count = 0;\n-\t      dtp->u.p.line_buffer_enabled = 0;\n-\t      dtp->u.p.saved_type = BT_LOGICAL;\n-\t      dtp->u.p.saved_length = length;\n-\t      set_integer ((int *) dtp->u.p.value, v, length);\n-\t      return;\n+\t      goto logical_done;\n \t    }\n \t}\n  \n@@ -670,7 +669,8 @@ read_logical (st_parameter_dt *dtp, int length)\n \t  dtp->u.p.item_count = 0;\n \t  return;\n \t}\n-     }\n+      \n+    }\n \n  bad_logical:\n \n@@ -681,6 +681,15 @@ read_logical (st_parameter_dt *dtp, int length)\n \t      dtp->u.p.item_count);\n \n   generate_error (&dtp->common, ERROR_READ_VALUE, message);\n+  return;\n+\n+ logical_done:\n+  \n+  dtp->u.p.item_count = 0;\n+  dtp->u.p.line_buffer_enabled = 0;\n+  dtp->u.p.saved_type = BT_LOGICAL;\n+  dtp->u.p.saved_length = length;\n+  set_integer ((int *) dtp->u.p.value, v, length);\n }\n \n "}]}