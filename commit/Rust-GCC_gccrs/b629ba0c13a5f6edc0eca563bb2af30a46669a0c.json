{"sha": "b629ba0c13a5f6edc0eca563bb2af30a46669a0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjYyOWJhMGMxM2E1ZjZlZGMwZWNhNTYzYmIyYWYzMGE0NjY2OWEwYw==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2002-09-14T08:07:58Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2002-09-14T08:07:58Z"}, "message": "rs6000.c (rs6000_elf_encode_section_info): Use targetm.binds_local_p to set SYMBOL_REF_FLAG.\n\n\t* config/rs6000/rs6000.c (rs6000_elf_encode_section_info): Use\n\ttargetm.binds_local_p to set SYMBOL_REF_FLAG.\n\t(rs6000_xcoff_encode_section_info): Likewise.\n\t* config/rs6000/xcoff.h (ASM_DECLARE_FUNCTION_NAME): Likewise.\n\nFrom-SVN: r57135", "tree": {"sha": "f49cd957dbffc4dbd9a2a9c2f2634a3646df9bc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f49cd957dbffc4dbd9a2a9c2f2634a3646df9bc2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b629ba0c13a5f6edc0eca563bb2af30a46669a0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b629ba0c13a5f6edc0eca563bb2af30a46669a0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b629ba0c13a5f6edc0eca563bb2af30a46669a0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b629ba0c13a5f6edc0eca563bb2af30a46669a0c/comments", "author": null, "committer": null, "parents": [{"sha": "2e4851293a8bcc297e9546756aa130e15b12f699", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e4851293a8bcc297e9546756aa130e15b12f699", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e4851293a8bcc297e9546756aa130e15b12f699"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "a89145c02902afac5ae36433f4d4ad7160ca7345", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b629ba0c13a5f6edc0eca563bb2af30a46669a0c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b629ba0c13a5f6edc0eca563bb2af30a46669a0c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b629ba0c13a5f6edc0eca563bb2af30a46669a0c", "patch": "@@ -1,3 +1,10 @@\n+2002-09-14  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* config/rs6000/rs6000.c (rs6000_elf_encode_section_info): Use\n+\ttargetm.binds_local_p to set SYMBOL_REF_FLAG.\n+\t(rs6000_xcoff_encode_section_info): Likewise.\n+\t* config/rs6000/xcoff.h (ASM_DECLARE_FUNCTION_NAME): Likewise.\n+\n 2002-09-10  Theodore A. Roth  <troth@verinet.com>\n \n \t* gcc/config/avr/avr.h: Set default options for C++ for avr."}, {"sha": "f7235401822d9d55692a270c9df9f19f07572270", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b629ba0c13a5f6edc0eca563bb2af30a46669a0c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b629ba0c13a5f6edc0eca563bb2af30a46669a0c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=b629ba0c13a5f6edc0eca563bb2af30a46669a0c", "patch": "@@ -12424,8 +12424,7 @@ rs6000_elf_encode_section_info (decl, first)\n   if (TREE_CODE (decl) == FUNCTION_DECL)\n     {\n       rtx sym_ref = XEXP (DECL_RTL (decl), 0);\n-      if ((TREE_ASM_WRITTEN (decl) || ! TREE_PUBLIC (decl))\n-          && ! DECL_WEAK (decl))\n+      if ((*targetm.binds_local_p) (decl))\n \tSYMBOL_REF_FLAG (sym_ref) = 1;\n \n       if (DEFAULT_ABI == ABI_AIX)\n@@ -13121,8 +13120,7 @@ rs6000_xcoff_encode_section_info (decl, first)\n      int first ATTRIBUTE_UNUSED;\n {\n   if (TREE_CODE (decl) == FUNCTION_DECL\n-      && (TREE_ASM_WRITTEN (decl) || ! TREE_PUBLIC (decl))\n-      && ! DECL_WEAK (decl))\n+      && (*targetm.binds_local_p) (decl))\n     SYMBOL_REF_FLAG (XEXP (DECL_RTL (decl), 0)) = 1;\n }\n "}, {"sha": "820e71b6f4808c8bb63deb97220bccd5f243a4af", "filename": "gcc/config/rs6000/xcoff.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b629ba0c13a5f6edc0eca563bb2af30a46669a0c/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b629ba0c13a5f6edc0eca563bb2af30a46669a0c/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fxcoff.h?ref=b629ba0c13a5f6edc0eca563bb2af30a46669a0c", "patch": "@@ -266,7 +266,7 @@ toc_section ()\t\t\t\t\t\t\\\n \n #define ASM_DECLARE_FUNCTION_NAME(FILE,NAME,DECL)\t\t\\\n { rtx sym_ref = XEXP (DECL_RTL (DECL), 0);\t\t\t\\\n-  if (!DECL_WEAK (DECL))\t\t\t\t\t\\\n+  if ((*targetm.binds_local_p) (DECL))\t\t\t\t\\\n     SYMBOL_REF_FLAG (sym_ref) = 1;\t\t\t\t\\\n   if (TREE_PUBLIC (DECL))\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\\"}]}