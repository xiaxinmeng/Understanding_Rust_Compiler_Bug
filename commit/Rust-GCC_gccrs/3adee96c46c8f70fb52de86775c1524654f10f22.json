{"sha": "3adee96c46c8f70fb52de86775c1524654f10f22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FkZWU5NmM0NmM4ZjcwZmI1MmRlODY3NzVjMTUyNDY1NGYxMGYyMg==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@users.sourceforge.net", "date": "2003-08-07T14:36:39Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2003-08-07T14:36:39Z"}, "message": "re PR c++/5767 (ICE with forwarding template template parameters)\n\n\tPR c++/5767\n\t* parser.c (cp_parser_class_name): Return immediately when scope\n\tis error_mark_node.\n\n\t* g++.dg/parse/crash11.C: New test.\n\nFrom-SVN: r70226", "tree": {"sha": "e9523e839afdddc29c20fdefebc1393dcbf111b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9523e839afdddc29c20fdefebc1393dcbf111b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3adee96c46c8f70fb52de86775c1524654f10f22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3adee96c46c8f70fb52de86775c1524654f10f22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3adee96c46c8f70fb52de86775c1524654f10f22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3adee96c46c8f70fb52de86775c1524654f10f22/comments", "author": null, "committer": null, "parents": [{"sha": "7d1496792bf96d5364e31b90656539ce3539c608", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d1496792bf96d5364e31b90656539ce3539c608", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d1496792bf96d5364e31b90656539ce3539c608"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "9c897331e6b2dcf4f9a1ef4bfaca931b82e6f053", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3adee96c46c8f70fb52de86775c1524654f10f22", "patch": "@@ -1,3 +1,9 @@\n+2003-08-07  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/5767\n+\t* parser.c (cp_parser_class_name): Return immediately when scope\n+\tis error_mark_node.\n+\n 2003-08-07  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* cp/Make-lang.in (cp/call.o): Add dependency for target.h."}, {"sha": "12f541a73967ef509260004c28e80f7ca54d6860", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=3adee96c46c8f70fb52de86775c1524654f10f22", "patch": "@@ -10957,6 +10957,9 @@ cp_parser_class_name (cp_parser *parser,\n   /* PARSER->SCOPE can be cleared when parsing the template-arguments\n      to a template-id, so we save it here.  */\n   scope = parser->scope;\n+  if (scope == error_mark_node)\n+    return error_mark_node;\n+  \n   /* Any name names a type if we're following the `typename' keyword\n      in a qualified name where the enclosing scope is type-dependent.  */\n   typename_p = (typename_keyword_p && scope && TYPE_P (scope)"}, {"sha": "9c7ea3bd8166d47bad7514ce9dedb312bca9c305", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3adee96c46c8f70fb52de86775c1524654f10f22", "patch": "@@ -1,3 +1,8 @@\n+2003-08-07  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/5767\n+\t* g++.dg/parse/crash11.C: New test.\n+\n 2003-08-06  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* gcc.dg/cpp/spacing1.c: Update."}, {"sha": "8e6c73b1e9c24546251f82b2cb059adbdd408703", "filename": "gcc/testsuite/g++.dg/parse/crash11.C", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3adee96c46c8f70fb52de86775c1524654f10f22/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash11.C?ref=3adee96c46c8f70fb52de86775c1524654f10f22", "patch": "@@ -0,0 +1,34 @@\n+// { dg-do compile }\n+\n+// Origin: priesnit@math.uni-goettingen.de\n+\n+// PR c++/5767: ICE parsing typename with invalid scope.\n+\n+template <template <typename> class TP>\n+struct A\n+{\n+  template <typename T>\n+  struct Template\n+  {\n+    typedef typename TP<T>::Type Type;\n+  };\n+};\n+template <template <typename> class TP>\n+struct B\n+{\n+  template <typename T>\n+  struct Template\n+  {\n+    typedef typename A<A<TP>::Template>\n+      ::template Template<T>::Type Type; { dg-error \"mismatch|class template|unqualified-id\" }\n+  };\n+};\n+template <typename T>\n+struct C\n+{\n+  typedef void Type;\n+};\n+int main()\n+{\n+  typedef B<C>::Template<void>::Type Type; { dg-error \"init-declarator|;\" }\n+}"}]}