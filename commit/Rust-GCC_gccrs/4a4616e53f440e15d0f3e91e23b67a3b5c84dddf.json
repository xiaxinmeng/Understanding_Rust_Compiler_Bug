{"sha": "4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE0NjE2ZTUzZjQ0MGUxNWQwZjNlOTFlMjNiNjdhM2I1Yzg0ZGRkZg==", "commit": {"author": {"name": "Jonathan Yong", "email": "10walls@gmail.com", "date": "2021-08-22T03:05:07Z"}, "committer": {"name": "Jonathan Yong", "email": "10walls@gmail.com", "date": "2021-08-23T02:17:48Z"}, "message": "gcc.c-torture/execute: Fix tmpnam issue on Windows\n\n2021-08-22  Jonathan Yong  <10walls@gmail.com>\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.c-torture/execute/gcc_tmpnam.h: Fix tmpnam case on Windows\n\twhere it can return a filename with \"\\\" to indicate current\n\tdirectory.\n\t* gcc.c-torture/execute/fprintf-2.c: Use wrapper.\n\t* gcc.c-torture/execute/printf-2.c: Use wrapper.\n\t* gcc.c-torture/execute/user-printf.c: Use wrapper.\n\nSigned-off-by: Jonathan Yong <10walls@gmail.com>", "tree": {"sha": "b4f6cb69eeb142bb0ce86f6f929adf6a61a52d7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4f6cb69eeb142bb0ce86f6f929adf6a61a52d7b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/comments", "author": {"login": "jon-y", "id": 4688224, "node_id": "MDQ6VXNlcjQ2ODgyMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4688224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-y", "html_url": "https://github.com/jon-y", "followers_url": "https://api.github.com/users/jon-y/followers", "following_url": "https://api.github.com/users/jon-y/following{/other_user}", "gists_url": "https://api.github.com/users/jon-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-y/subscriptions", "organizations_url": "https://api.github.com/users/jon-y/orgs", "repos_url": "https://api.github.com/users/jon-y/repos", "events_url": "https://api.github.com/users/jon-y/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-y/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jon-y", "id": 4688224, "node_id": "MDQ6VXNlcjQ2ODgyMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4688224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-y", "html_url": "https://github.com/jon-y", "followers_url": "https://api.github.com/users/jon-y/followers", "following_url": "https://api.github.com/users/jon-y/following{/other_user}", "gists_url": "https://api.github.com/users/jon-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-y/subscriptions", "organizations_url": "https://api.github.com/users/jon-y/orgs", "repos_url": "https://api.github.com/users/jon-y/repos", "events_url": "https://api.github.com/users/jon-y/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-y/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5b2876f96c16f43c7b4810237ac92bb8f9d18c01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b2876f96c16f43c7b4810237ac92bb8f9d18c01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b2876f96c16f43c7b4810237ac92bb8f9d18c01"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "00517d1d1acfccf403f34ef843c46f7ba2b8a8ca", "filename": "gcc/testsuite/gcc.c-torture/execute/fprintf-2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Ffprintf-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Ffprintf-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Ffprintf-2.c?ref=4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "patch": "@@ -9,10 +9,11 @@\n #include <stdio.h>\n #include <stdlib.h>\n #include <string.h>\n+#include \"gcc_tmpnam.h\"\n \n int main (void)\n {\n-  char *tmpfname = tmpnam (0);\n+  char *tmpfname = gcc_tmpnam (0);\n   FILE *f = fopen (tmpfname, \"w\");\n   if (!f)\n     {"}, {"sha": "2136e6eaf133fc3a7f591d61e655c64edf70f8bf", "filename": "gcc/testsuite/gcc.c-torture/execute/gcc_tmpnam.h", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fgcc_tmpnam.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fgcc_tmpnam.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fgcc_tmpnam.h?ref=4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "patch": "@@ -0,0 +1,13 @@\n+#include <stdio.h>\n+#ifndef GCC_TMPNAM\n+#define GCC_TMPNAM\n+static inline char *gcc_tmpnam(char *s)\n+{\n+  char *ret = tmpnam (s);\n+  // Windows sometimes prepends a backslash to denote the current directory,\n+  // so swallow that if it occurs\n+  if (ret[0] == '\\\\')\n+    ++ret;\n+  return ret;\n+}\n+#endif"}, {"sha": "2087bba84482f478e7521eae5a47f1ad7d515579", "filename": "gcc/testsuite/gcc.c-torture/execute/printf-2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fprintf-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fprintf-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fprintf-2.c?ref=4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "patch": "@@ -10,6 +10,7 @@\n #include <stdio.h>\n #include <stdlib.h>\n #include <string.h>\n+#include \"gcc_tmpnam.h\"\n \n __attribute__ ((noipa)) void\n write_file (void)\n@@ -26,7 +27,7 @@ write_file (void)\n \n int main (void)\n {\n-  char *tmpfname = tmpnam (0);\n+  char *tmpfname = gcc_tmpnam (0);\n   FILE *f = freopen (tmpfname, \"w\", stdout);\n   if (!f)\n     {"}, {"sha": "bfee0760dd74c86edaf6526c358b26e507594f39", "filename": "gcc/testsuite/gcc.c-torture/execute/user-printf.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fuser-printf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a4616e53f440e15d0f3e91e23b67a3b5c84dddf/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fuser-printf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fuser-printf.c?ref=4a4616e53f440e15d0f3e91e23b67a3b5c84dddf", "patch": "@@ -11,6 +11,7 @@\n #include <stdio.h>\n #include <stdlib.h>\n #include <string.h>\n+#include \"gcc_tmpnam.h\"\n \n void __attribute__ ((format (printf, 1, 2), noipa))\n user_print (const char *fmt, ...)\n@@ -23,7 +24,7 @@ user_print (const char *fmt, ...)\n \n int main (void)\n {\n-  char *tmpfname = tmpnam (0);\n+  char *tmpfname = gcc_tmpnam (0);\n   FILE *f = freopen (tmpfname, \"w\", stdout);\n   if (!f)\n     {"}]}