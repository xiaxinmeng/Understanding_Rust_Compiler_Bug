{"sha": "d8b6d4cf4005460d0da2f5e115fb11489cdb1919", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhiNmQ0Y2Y0MDA1NDYwZDBkYTJmNWUxMTVmYjExNDg5Y2RiMTkxOQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-02-03T19:09:54Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-02-03T19:09:54Z"}, "message": "* jcf-io.c (jcf_print_utf8_replace): Handle UTF-8 input.\n\nFrom-SVN: r31779", "tree": {"sha": "4fe32e02624ca48f176d330fca2479e978a28c61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4fe32e02624ca48f176d330fca2479e978a28c61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8b6d4cf4005460d0da2f5e115fb11489cdb1919", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8b6d4cf4005460d0da2f5e115fb11489cdb1919", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8b6d4cf4005460d0da2f5e115fb11489cdb1919", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8b6d4cf4005460d0da2f5e115fb11489cdb1919/comments", "author": null, "committer": null, "parents": [{"sha": "2c2f0e546b8b1b1f2f2f6ef4668adf44fa5e9164", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c2f0e546b8b1b1f2f2f6ef4668adf44fa5e9164", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c2f0e546b8b1b1f2f2f6ef4668adf44fa5e9164"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "ae1f8c9fe4f7e31e3d1cfa6371e518b196bd288c", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b6d4cf4005460d0da2f5e115fb11489cdb1919/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b6d4cf4005460d0da2f5e115fb11489cdb1919/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=d8b6d4cf4005460d0da2f5e115fb11489cdb1919", "patch": "@@ -1,3 +1,7 @@\n+2000-02-03  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* jcf-io.c (jcf_print_utf8_replace): Handle UTF-8 input.\n+\n 2000-01-31  Scott Bambrough  <scottb@netwinder.org>\n \n \t* gcc/java/javaop.h (WORDS_TO_DOUBLE): Allow WORDS_TO_DOUBLE to"}, {"sha": "869bc002da65cd3b984b863e5fdf4a703adf2ee8", "filename": "gcc/java/jcf-io.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b6d4cf4005460d0da2f5e115fb11489cdb1919/gcc%2Fjava%2Fjcf-io.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b6d4cf4005460d0da2f5e115fb11489cdb1919/gcc%2Fjava%2Fjcf-io.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-io.c?ref=d8b6d4cf4005460d0da2f5e115fb11489cdb1919", "patch": "@@ -1,5 +1,5 @@\n /* Utility routines for finding and reading Java(TM) .class files.\n-   Copyright (C) 1996, 97-98, 1999  Free Software Foundation, Inc.\n+   Copyright (C) 1996, 97-98, 1999, 2000  Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n@@ -505,11 +505,15 @@ DEFUN(jcf_print_utf8_replace, (stream, str, length, in_char, out_char),\n       FILE *stream AND const unsigned char *str AND int length\n       AND int in_char AND int out_char)\n {\n-\n-  int i;/* FIXME - actually handle Unicode! */\n-  for (i = 0; i < length; i++)\n+  const unsigned char *limit = str + length;\n+  while (str < limit)\n     {\n-      int ch = str[i];\n+      int ch = UTF8_GET (str, limit);\n+      if (ch < 0)\n+\t{\n+\t  fprintf (stream, \"\\\\<invalid>\");\n+\t  return;\n+\t}\n       jcf_print_char (stream, ch == in_char ? out_char : ch);\n     }\n }"}]}