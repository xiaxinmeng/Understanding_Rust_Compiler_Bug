{"sha": "f32c53c2153535de4c9016cd174330be4c9a6027", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjMyYzUzYzIxNTM1MzVkZTRjOTAxNmNkMTc0MzMwYmU0YzlhNjAyNw==", "commit": {"author": {"name": "Anthony Green", "email": "green@redhat.com", "date": "2003-06-08T18:10:54Z"}, "committer": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "2003-06-08T18:10:54Z"}, "message": "\ufffd\ufffd> 2003-06-07\ufffd\ufffd Anthony Green\ufffd\ufffd <green@redhat.com> \ufffd\ufffd>...\n\n\ufffd\ufffd> 2003-06-07\ufffd\ufffd Anthony Green\ufffd\ufffd <green@redhat.com>\n\ufffd\ufffd>\n\ufffd\ufffd>\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd* parse.y (patch_cast): Fix conversions from floating-point to\n\ufffd\ufffd>\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdintegral types.\n\nFrom-SVN: r67631", "tree": {"sha": "4a0b49aa184659d74cfe8086a19ee61b887b1d67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a0b49aa184659d74cfe8086a19ee61b887b1d67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f32c53c2153535de4c9016cd174330be4c9a6027", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f32c53c2153535de4c9016cd174330be4c9a6027", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f32c53c2153535de4c9016cd174330be4c9a6027", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f32c53c2153535de4c9016cd174330be4c9a6027/comments", "author": {"login": "atgreen", "id": 89993, "node_id": "MDQ6VXNlcjg5OTkz", "avatar_url": "https://avatars.githubusercontent.com/u/89993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atgreen", "html_url": "https://github.com/atgreen", "followers_url": "https://api.github.com/users/atgreen/followers", "following_url": "https://api.github.com/users/atgreen/following{/other_user}", "gists_url": "https://api.github.com/users/atgreen/gists{/gist_id}", "starred_url": "https://api.github.com/users/atgreen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atgreen/subscriptions", "organizations_url": "https://api.github.com/users/atgreen/orgs", "repos_url": "https://api.github.com/users/atgreen/repos", "events_url": "https://api.github.com/users/atgreen/events{/privacy}", "received_events_url": "https://api.github.com/users/atgreen/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "10e9fecc62f6c96c41aeff01db61743ce49a2ff9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10e9fecc62f6c96c41aeff01db61743ce49a2ff9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10e9fecc62f6c96c41aeff01db61743ce49a2ff9"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "23bc14bbc7f80d756b3585445915f027d7d07352", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f32c53c2153535de4c9016cd174330be4c9a6027/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f32c53c2153535de4c9016cd174330be4c9a6027/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=f32c53c2153535de4c9016cd174330be4c9a6027", "patch": "@@ -1,3 +1,8 @@\n+2003-06-08  Anthony Green  <green@redhat.com>\n+\n+\t* parse.y (patch_cast): Fix conversions from floating-point to\n+\tintegral types.\n+\n 2003-06-08  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* Make-lang.in: Update."}, {"sha": "88c8c31978a54127ba646c606271b4981c8515be", "filename": "gcc/java/parse.y", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f32c53c2153535de4c9016cd174330be4c9a6027/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f32c53c2153535de4c9016cd174330be4c9a6027/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=f32c53c2153535de4c9016cd174330be4c9a6027", "patch": "@@ -14224,14 +14224,15 @@ patch_cast (tree node, tree wfl_op)\n       if (cast_type == op_type)\n \treturn node;\n \n-      /* float and double type are converted to the original type main\n-\t variant and then to the target type. */\n-      if (JFLOAT_TYPE_P (op_type) && TREE_CODE (cast_type) == CHAR_TYPE)\n-\top = convert (integer_type_node, op);\n+      /* A narrowing conversion from a floating-point number to an\n+\t integral type requires special handling (5.1.3).  */\n+      if (JFLOAT_TYPE_P (op_type) && JINTEGRAL_TYPE_P (cast_type))\n+\tif (cast_type != long_type_node)\n+\t  op = convert (integer_type_node, op);\n \n-      /* Try widening/narowwing convertion. Potentially, things need\n+      /* Try widening/narrowing convertion.  Potentially, things need\n \t to be worked out in gcc so we implement the extreme cases\n-\t correctly. fold_convert() needs to be fixed. */\n+\t correctly.  fold_convert() needs to be fixed.  */\n       return convert (cast_type, op);\n     }\n "}]}