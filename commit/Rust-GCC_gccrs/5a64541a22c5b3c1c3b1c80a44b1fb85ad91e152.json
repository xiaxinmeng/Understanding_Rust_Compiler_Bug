{"sha": "5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWE2NDU0MWEyMmM1YjNjMWMzYjFjODBhNDRiMWZiODVhZDkxZTE1Mg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-02-18T14:25:33Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-02-18T14:25:33Z"}, "message": "h8300.md: Move push patterns into one section of the file.\n\n\t* config/h8300/h8300.md: Move push patterns into one\n\tsection of the file.\n\nFrom-SVN: r78030", "tree": {"sha": "223235a9284684638b1645fa67071df86120e24e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/223235a9284684638b1645fa67071df86120e24e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152/comments", "author": null, "committer": null, "parents": [{"sha": "8d04e6db1f940d5a38eb7726b48fe954d3e63b4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d04e6db1f940d5a38eb7726b48fe954d3e63b4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d04e6db1f940d5a38eb7726b48fe954d3e63b4e"}], "stats": {"total": 179, "additions": 94, "deletions": 85}, "files": [{"sha": "88bbe0083d478d4714df5a965f8d396ff2a8b0fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152", "patch": "@@ -1,3 +1,8 @@\n+2004-02-18  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.md: Move push patterns into one\n+\tsection of the file.\n+\n 2004-02-18  Mark Mitchell <mark@codesourcery.com>\n \n \tPR c++/11326"}, {"sha": "1222cfa783bff2b3efc21036f68e9dd515dd4953", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 89, "deletions": 85, "changes": 174, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=5a64541a22c5b3c1c3b1c80a44b1fb85ad91e152", "patch": "@@ -120,50 +120,6 @@\n \n ;; movqi\n \n-(define_insn \"pushqi1_h8300\"\n-  [(set (reg:HI SP_REG)\n-\t(plus:HI (reg:HI SP_REG) (const_int -2)))\n-   (set (mem:QI (plus:HI (reg:HI SP_REG) (const_int -1)))\n-\t(match_operand:QI 0 \"register_operand\" \"r\"))]\n-  \"TARGET_H8300\n-   && operands[0] != stack_pointer_rtx\"\n-  \"mov.w\\\\t%T0,@-r7\"\n-  [(set_attr \"length\" \"2\")])\n-\n-(define_insn \"pushqi1_h8300hs\"\n-  [(set (reg:SI SP_REG)\n-\t(plus:SI (reg:SI SP_REG) (const_int -4)))\n-   (set (mem:QI (plus:SI (reg:SI SP_REG) (const_int -3)))\n-\t(match_operand:QI 0 \"register_operand\" \"r\"))]\n-  \"(TARGET_H8300H || TARGET_H8300S)\n-   && operands[0] != stack_pointer_rtx\"\n-  \"mov.l\\\\t%S0,@-er7\"\n-  [(set_attr \"length\" \"4\")])\n-\n-(define_insn \"pushqi1_h8300hs_normal\"\n-  [(set (reg:HI SP_REG)\n-\t(plus:HI (reg:HI SP_REG) (const_int -4)))\n-   (set (mem:QI (plus:HI (reg:HI SP_REG) (const_int -3)))\n-\t(match_operand:QI 0 \"register_operand\" \"r\"))]\n-  \"(TARGET_H8300H || TARGET_H8300S)\n-   && operands[0] != stack_pointer_rtx\"\n-  \"mov.l\\\\t%S0,@-er7\"\n-  [(set_attr \"length\" \"4\")])\n-\n-(define_expand \"pushqi1\"\n-  [(match_operand:QI 0 \"register_operand\" \"\")]\n-  \"\"\n-  \"\n-{\n-  if (TARGET_H8300)\n-    emit_insn (gen_pushqi1_h8300 (operands[0]));\n-  else if (!TARGET_NORMAL_MODE)\n-    emit_insn (gen_pushqi1_h8300hs (operands[0]));\n-  else\n-    emit_insn (gen_pushqi1_h8300hs_normal (operands[0]));\n-  DONE;\n-}\")\n-\n (define_insn \"*movqi_h8300\"\n   [(set (match_operand:QI 0 \"general_operand_dst\" \"=r,r ,<,r,r,m\")\n \t(match_operand:QI 1 \"general_operand_src\" \" I,r>,r,n,m,r\"))]\n@@ -228,47 +184,6 @@\n \n ;; movhi\n \n-(define_expand \"pushhi1_h8300\"\n-  [(set (mem:HI (pre_dec:HI (reg:HI SP_REG)))\n-\t(match_operand:HI 0 \"register_operand\" \"\"))]\n-  \"TARGET_H8300\n-   && operands[0] != stack_pointer_rtx\"\n-  \"\")\n-\n-(define_insn \"pushhi1_h8300hs\"\n-  [(set (reg:SI SP_REG)\n-\t(plus:SI (reg:SI SP_REG) (const_int -4)))\n-   (set (mem:HI (plus:SI (reg:SI SP_REG) (const_int -2)))\n-\t(match_operand:HI 0 \"register_operand\" \"r\"))]\n-  \"(TARGET_H8300H || TARGET_H8300S)\n-   && operands[0] != stack_pointer_rtx\"\n-  \"mov.l\\\\t%S0,@-er7\"\n-  [(set_attr \"length\" \"4\")])\n-\n-(define_insn \"pushhi1_h8300hs_normal\"\n-  [(set (reg:HI SP_REG)\n-\t(plus:HI (reg:HI SP_REG) (const_int -4)))\n-   (set (mem:HI (plus:HI (reg:HI SP_REG) (const_int -2)))\n-\t(match_operand:HI 0 \"register_operand\" \"r\"))]\n-  \"(TARGET_H8300H || TARGET_H8300S)\n-   && operands[0] != stack_pointer_rtx\"\n-  \"mov.l\\\\t%S0,@-er7\"\n-  [(set_attr \"length\" \"4\")])\n-\n-(define_expand \"pushhi1\"\n-  [(match_operand:HI 0 \"register_operand\" \"\")]\n-  \"\"\n-  \"\n-{\n-  if (TARGET_H8300)\n-    emit_insn (gen_pushhi1_h8300 (operands[0]));\n-  else if (!TARGET_NORMAL_MODE)\n-    emit_insn (gen_pushhi1_h8300hs (operands[0]));\n-  else\n-    emit_insn (gen_pushhi1_h8300hs_normal (operands[0]));\n-  DONE;\n-}\")\n-\n (define_insn \"*movhi_h8300\"\n   [(set (match_operand:HI 0 \"general_operand_dst\" \"=r,r,<,r,r,m\")\n \t(match_operand:HI 1 \"general_operand_src\" \"I,r>,r,i,m,r\"))]\n@@ -604,6 +519,95 @@\n    (set_attr \"cc\" \"set_zn,set_znv,set_znv,set_znv,set_znv,set_znv\")])\n \f\n ;; ----------------------------------------------------------------------\n+;; PUSH INSTRUCTIONS\n+;; ----------------------------------------------------------------------\n+\n+(define_insn \"pushqi1_h8300\"\n+  [(set (reg:HI SP_REG)\n+\t(plus:HI (reg:HI SP_REG) (const_int -2)))\n+   (set (mem:QI (plus:HI (reg:HI SP_REG) (const_int -1)))\n+\t(match_operand:QI 0 \"register_operand\" \"r\"))]\n+  \"TARGET_H8300\n+   && operands[0] != stack_pointer_rtx\"\n+  \"mov.w\\\\t%T0,@-r7\"\n+  [(set_attr \"length\" \"2\")])\n+\n+(define_insn \"pushqi1_h8300hs\"\n+  [(set (reg:SI SP_REG)\n+\t(plus:SI (reg:SI SP_REG) (const_int -4)))\n+   (set (mem:QI (plus:SI (reg:SI SP_REG) (const_int -3)))\n+\t(match_operand:QI 0 \"register_operand\" \"r\"))]\n+  \"(TARGET_H8300H || TARGET_H8300S)\n+   && operands[0] != stack_pointer_rtx\"\n+  \"mov.l\\\\t%S0,@-er7\"\n+  [(set_attr \"length\" \"4\")])\n+\n+(define_insn \"pushqi1_h8300hs_normal\"\n+  [(set (reg:HI SP_REG)\n+\t(plus:HI (reg:HI SP_REG) (const_int -4)))\n+   (set (mem:QI (plus:HI (reg:HI SP_REG) (const_int -3)))\n+\t(match_operand:QI 0 \"register_operand\" \"r\"))]\n+  \"(TARGET_H8300H || TARGET_H8300S)\n+   && operands[0] != stack_pointer_rtx\"\n+  \"mov.l\\\\t%S0,@-er7\"\n+  [(set_attr \"length\" \"4\")])\n+\n+(define_expand \"pushqi1\"\n+  [(match_operand:QI 0 \"register_operand\" \"\")]\n+  \"\"\n+  \"\n+{\n+  if (TARGET_H8300)\n+    emit_insn (gen_pushqi1_h8300 (operands[0]));\n+  else if (!TARGET_NORMAL_MODE)\n+    emit_insn (gen_pushqi1_h8300hs (operands[0]));\n+  else\n+    emit_insn (gen_pushqi1_h8300hs_normal (operands[0]));\n+  DONE;\n+}\")\n+\n+(define_expand \"pushhi1_h8300\"\n+  [(set (mem:HI (pre_dec:HI (reg:HI SP_REG)))\n+\t(match_operand:HI 0 \"register_operand\" \"\"))]\n+  \"TARGET_H8300\n+   && operands[0] != stack_pointer_rtx\"\n+  \"\")\n+\n+(define_insn \"pushhi1_h8300hs\"\n+  [(set (reg:SI SP_REG)\n+\t(plus:SI (reg:SI SP_REG) (const_int -4)))\n+   (set (mem:HI (plus:SI (reg:SI SP_REG) (const_int -2)))\n+\t(match_operand:HI 0 \"register_operand\" \"r\"))]\n+  \"(TARGET_H8300H || TARGET_H8300S)\n+   && operands[0] != stack_pointer_rtx\"\n+  \"mov.l\\\\t%S0,@-er7\"\n+  [(set_attr \"length\" \"4\")])\n+\n+(define_insn \"pushhi1_h8300hs_normal\"\n+  [(set (reg:HI SP_REG)\n+\t(plus:HI (reg:HI SP_REG) (const_int -4)))\n+   (set (mem:HI (plus:HI (reg:HI SP_REG) (const_int -2)))\n+\t(match_operand:HI 0 \"register_operand\" \"r\"))]\n+  \"(TARGET_H8300H || TARGET_H8300S)\n+   && operands[0] != stack_pointer_rtx\"\n+  \"mov.l\\\\t%S0,@-er7\"\n+  [(set_attr \"length\" \"4\")])\n+\n+(define_expand \"pushhi1\"\n+  [(match_operand:HI 0 \"register_operand\" \"\")]\n+  \"\"\n+  \"\n+{\n+  if (TARGET_H8300)\n+    emit_insn (gen_pushhi1_h8300 (operands[0]));\n+  else if (!TARGET_NORMAL_MODE)\n+    emit_insn (gen_pushhi1_h8300hs (operands[0]));\n+  else\n+    emit_insn (gen_pushhi1_h8300hs_normal (operands[0]));\n+  DONE;\n+}\")\n+\f\n+;; ----------------------------------------------------------------------\n ;; TEST INSTRUCTIONS\n ;; ----------------------------------------------------------------------\n "}]}