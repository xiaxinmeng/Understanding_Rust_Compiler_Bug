{"sha": "b268558f8adc09557d9f07818e6f1ac10134b9bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjI2ODU1OGY4YWRjMDk1NTdkOWYwNzgxOGU2ZjFhYzEwMTM0YjliZg==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2008-10-03T04:36:36Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2008-10-03T04:36:36Z"}, "message": "winnt.c (i386_pe_strip_name_encoding_full): Add a null terminator to the stripped name.\n\n\t* config/i386/winnt.c (i386_pe_strip_name_encoding_full):\n\tAdd a null terminator to the stripped name.\n\nFrom-SVN: r140849", "tree": {"sha": "7ce9af268f8db33625b08a0abf2b0372606543b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7ce9af268f8db33625b08a0abf2b0372606543b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b268558f8adc09557d9f07818e6f1ac10134b9bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b268558f8adc09557d9f07818e6f1ac10134b9bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b268558f8adc09557d9f07818e6f1ac10134b9bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b268558f8adc09557d9f07818e6f1ac10134b9bf/comments", "author": null, "committer": null, "parents": [{"sha": "fe7b06b7835981e843d480697b1bc072bc2fbd03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe7b06b7835981e843d480697b1bc072bc2fbd03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe7b06b7835981e843d480697b1bc072bc2fbd03"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "f4356c8bb94754b19cb52251710154714201f2a7", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b268558f8adc09557d9f07818e6f1ac10134b9bf/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b268558f8adc09557d9f07818e6f1ac10134b9bf/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=b268558f8adc09557d9f07818e6f1ac10134b9bf", "patch": "@@ -352,8 +352,16 @@ i386_pe_strip_name_encoding_full (const char *str)\n   /* Strip trailing \"@n\".  */\n   p = strchr (name, '@');\n   if (p)\n-    return ggc_alloc_string (name, p - name);\n-\n+    {\n+      /*  We need to replace the suffix with a null terminator.\n+          Do that before using ggc_alloc_string to allocate the\n+          const char *.  */ \n+      size_t len = p - name;\n+      char *newname = XALLOCAVEC (char, len + 1);\n+      memcpy (newname, name, len);\n+      newname [len] = 0;\n+      return ggc_alloc_string  (newname, len);\n+    }\n   return name;\n }\n "}]}