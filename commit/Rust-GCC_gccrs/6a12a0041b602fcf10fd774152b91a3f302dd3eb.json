{"sha": "6a12a0041b602fcf10fd774152b91a3f302dd3eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmExMmEwMDQxYjYwMmZjZjEwZmQ3NzQxNTJiOTFhM2YzMDJkZDNlYg==", "commit": {"author": {"name": "Roman Gareev", "email": "gareevroman@gmail.com", "date": "2014-08-05T08:42:09Z"}, "committer": {"name": "Roman Gareev", "email": "romangareev@gcc.gnu.org", "date": "2014-08-05T08:42:09Z"}, "message": "[gcc/]\n\n\t* graphite-isl-ast-to-gimple.c:\n\t(set_options): New function.\n\t(scop_to_isl_ast): Add calling of set_options.\n\nFrom-SVN: r213623", "tree": {"sha": "1346dc54457e79c8ba09a0942652fee1df80a1d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1346dc54457e79c8ba09a0942652fee1df80a1d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6a12a0041b602fcf10fd774152b91a3f302dd3eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a12a0041b602fcf10fd774152b91a3f302dd3eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a12a0041b602fcf10fd774152b91a3f302dd3eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a12a0041b602fcf10fd774152b91a3f302dd3eb/comments", "author": {"login": "gareevroman", "id": 6114710, "node_id": "MDQ6VXNlcjYxMTQ3MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6114710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gareevroman", "html_url": "https://github.com/gareevroman", "followers_url": "https://api.github.com/users/gareevroman/followers", "following_url": "https://api.github.com/users/gareevroman/following{/other_user}", "gists_url": "https://api.github.com/users/gareevroman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gareevroman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gareevroman/subscriptions", "organizations_url": "https://api.github.com/users/gareevroman/orgs", "repos_url": "https://api.github.com/users/gareevroman/repos", "events_url": "https://api.github.com/users/gareevroman/events{/privacy}", "received_events_url": "https://api.github.com/users/gareevroman/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8cab83f05f81443dcd8783282c3600ef169945a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cab83f05f81443dcd8783282c3600ef169945a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cab83f05f81443dcd8783282c3600ef169945a6"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "660e82624e1f7c13f783b738e0d8357d0efb32a5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a12a0041b602fcf10fd774152b91a3f302dd3eb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a12a0041b602fcf10fd774152b91a3f302dd3eb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6a12a0041b602fcf10fd774152b91a3f302dd3eb", "patch": "@@ -1,3 +1,9 @@\n+2014-08-05  Roman Gareev  <gareevroman@gmail.com>\n+\n+\t* graphite-isl-ast-to-gimple.c:\n+\t(set_options): New function.\n+\t(scop_to_isl_ast): Add calling of set_options.\n+\n 2014-08-05  Jakub Jelinek  <jakub@redhat.com>\n \n \t* loop-unroll.c (struct iv_to_split): Remove n_loc and loc fields."}, {"sha": "42393c3ea176c9f9860f6108833c2f0f9bb59b94", "filename": "gcc/graphite-isl-ast-to-gimple.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a12a0041b602fcf10fd774152b91a3f302dd3eb/gcc%2Fgraphite-isl-ast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a12a0041b602fcf10fd774152b91a3f302dd3eb/gcc%2Fgraphite-isl-ast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-isl-ast-to-gimple.c?ref=6a12a0041b602fcf10fd774152b91a3f302dd3eb", "patch": "@@ -867,6 +867,25 @@ ast_build_before_for (__isl_keep isl_ast_build *build, void *user)\n   return id;\n }\n \n+/* Set the separate option for all dimensions.\n+   This helps to reduce control overhead.  */\n+\n+static __isl_give isl_ast_build *\n+set_options (__isl_take isl_ast_build *control,\n+\t     __isl_keep isl_union_map *schedule)\n+{\n+  isl_ctx *ctx = isl_union_map_get_ctx (schedule);\n+  isl_space *range_space = isl_space_set_alloc (ctx, 0, 1);\n+  range_space =\n+    isl_space_set_tuple_name (range_space, isl_dim_set, \"separate\");\n+  isl_union_set *range =\n+    isl_union_set_from_set (isl_set_universe (range_space));  \n+  isl_union_set *domain = isl_union_map_range (isl_union_map_copy (schedule));\n+  domain = isl_union_set_universe (domain);\n+  isl_union_map *options = isl_union_map_from_domain_and_range (domain, range);\n+  return isl_ast_build_set_options (control, options);\n+}\n+\n static __isl_give isl_ast_node *\n scop_to_isl_ast (scop_p scop, ivs_params &ip)\n {\n@@ -879,6 +898,7 @@ scop_to_isl_ast (scop_p scop, ivs_params &ip)\n   add_parameters_to_ivs_params (scop, ip);\n   isl_union_map *schedule_isl = generate_isl_schedule (scop);\n   isl_ast_build *context_isl = generate_isl_context (scop);\n+  context_isl = set_options (context_isl, schedule_isl);\n   isl_union_map *dependences = NULL;\n   if (flag_loop_parallelize_all)\n   {"}]}