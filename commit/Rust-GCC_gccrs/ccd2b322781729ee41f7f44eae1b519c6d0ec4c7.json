{"sha": "ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NkMmIzMjI3ODE3MjllZTQxZjdmNDRlYWUxYjUxOWM2ZDBlYzRjNw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2010-10-06T14:35:25Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-10-06T14:35:25Z"}, "message": "re PR c++/45908 ([C++0x] ICE involving decltype: in tree_low_cst, at tree.h:4114)\n\n\tPR c++/45908\n\t* typeck.c (cp_build_addr_expr_1): Add check for incomplete types in\n\tcode folding offsetof-like computations.\n\nFrom-SVN: r165031", "tree": {"sha": "26a4afae364c992b478e346ca217b54552ba08ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26a4afae364c992b478e346ca217b54552ba08ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/comments", "author": null, "committer": null, "parents": [{"sha": "9c506f103cda9948114a65c27a46e05b0e116222", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c506f103cda9948114a65c27a46e05b0e116222", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c506f103cda9948114a65c27a46e05b0e116222"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "8143763a10a6f350902043dfc6d09df48275e947", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "patch": "@@ -1,3 +1,9 @@\n+2010-10-06  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR c++/45908\n+\t* typeck.c (cp_build_addr_expr_1): Add check for incomplete types in\n+\tcode folding offsetof-like computations.\n+\n 2010-10-05  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tPR objc++/31125"}, {"sha": "ff5714ddb950a246abf4fe13fb054f9b31d63848", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "patch": "@@ -4947,6 +4947,7 @@ cp_build_addr_expr_1 (tree arg, bool strict_lvalue, tsubst_flags_t complain)\n       && TREE_CODE (argtype) != METHOD_TYPE\n       && argtype != unknown_type_node\n       && (val = get_base_address (arg))\n+      && COMPLETE_TYPE_P (TREE_TYPE (val))\n       && TREE_CODE (val) == INDIRECT_REF\n       && TREE_CONSTANT (TREE_OPERAND (val, 0)))\n     {"}, {"sha": "187ba7e651d1ef303556eb7eda5b503cf2cb0865", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "patch": "@@ -1,3 +1,7 @@\n+2010-10-06  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* g++.dg/cpp0x/pr45908.C: New test.\n+\n 2010-10-06  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/opt6.ad[sb]: New test."}, {"sha": "1a821e5d83b46ebe2cac7b62d26daca4718b48ca", "filename": "gcc/testsuite/g++.dg/cpp0x/pr45908.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr45908.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccd2b322781729ee41f7f44eae1b519c6d0ec4c7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr45908.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr45908.C?ref=ccd2b322781729ee41f7f44eae1b519c6d0ec4c7", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/45908\n+// Testcase by Jonathan Wakely <redi@gcc.gnu.org>\n+\n+// { dg-do compile }\n+// { dg-options \"-std=c++0x\" }\n+\n+struct vector {\n+    struct iterator { };\n+    struct const_iterator { };\n+    iterator begin();\n+    const_iterator begin() const;\n+};\n+\n+class block {\n+    vector v;\n+    auto end() const -> decltype(v.begin())\n+    { return v.begin(); } // { dg-error \"conversion\" }\n+};"}]}