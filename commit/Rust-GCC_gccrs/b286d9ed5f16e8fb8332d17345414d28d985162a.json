{"sha": "b286d9ed5f16e8fb8332d17345414d28d985162a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjI4NmQ5ZWQ1ZjE2ZThmYjgzMzJkMTczNDU0MTRkMjhkOTg1MTYyYQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-07-07T20:36:59Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-07-07T20:36:59Z"}, "message": "re PR target/49660 (64-bit gcc doesn't enable -mv8plus with -m32 on Solaris/SPARC)\n\n\tPR target/49660\n\t* config/sparc/sol2.h [TARGET_64BIT_DEFAULT] (TARGET_DEFAULT): Add\n\tMASK_V8PLUS, remove commented out flag and reorder.\n\nFrom-SVN: r176008", "tree": {"sha": "f763651703ab2f3259988e0029569087e2343648", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f763651703ab2f3259988e0029569087e2343648"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b286d9ed5f16e8fb8332d17345414d28d985162a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b286d9ed5f16e8fb8332d17345414d28d985162a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b286d9ed5f16e8fb8332d17345414d28d985162a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b286d9ed5f16e8fb8332d17345414d28d985162a/comments", "author": null, "committer": null, "parents": [{"sha": "e834d8486a88ee5664c0c2e17b4c2dbd811c0c65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e834d8486a88ee5664c0c2e17b4c2dbd811c0c65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e834d8486a88ee5664c0c2e17b4c2dbd811c0c65"}], "stats": {"total": 38, "additions": 32, "deletions": 6}, "files": [{"sha": "57140ae7f2d1bd6726d5c10ade15c032757dea2f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b286d9ed5f16e8fb8332d17345414d28d985162a", "patch": "@@ -1,3 +1,9 @@\n+2011-07-07  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR target/49660\n+\t* config/sparc/sol2.h [TARGET_64BIT_DEFAULT] (TARGET_DEFAULT): Add\n+\tMASK_V8PLUS, remove commented out flag and reorder.\n+\n 2011-07-07  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/49644"}, {"sha": "12fef68eaa92e1d8a43a1ec8f1218283e6ef2cbc", "filename": "gcc/config/sparc/sol2.h", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2Fconfig%2Fsparc%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2Fconfig%2Fsparc%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2.h?ref=b286d9ed5f16e8fb8332d17345414d28d985162a", "patch": "@@ -20,16 +20,17 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n+/* Solaris allows 64-bit out and global registers to be used in 32-bit mode.\n+   sparc_override_options will disable V8+ if either not generating V9 code\n+   or generating 64-bit code.  */\n #undef TARGET_DEFAULT\n #ifdef TARGET_64BIT_DEFAULT\n #define TARGET_DEFAULT \\\n-  (MASK_V9 + MASK_PTR64 + MASK_64BIT /* + MASK_HARD_QUAD */ + \\\n-   MASK_STACK_BIAS + MASK_APP_REGS + MASK_FPU + MASK_LONG_DOUBLE_128)\n+  (MASK_V9 + MASK_64BIT + MASK_PTR64 + MASK_STACK_BIAS + \\\n+   MASK_V8PLUS + MASK_APP_REGS + MASK_FPU + MASK_LONG_DOUBLE_128)\n #else\n-/* Solaris allows 64 bit out and global registers in 32 bit mode.\n-   sparc_override_options will disable V8+ if not generating V9 code.  */\n-#define TARGET_DEFAULT (MASK_V8PLUS + MASK_APP_REGS + MASK_FPU \\\n-\t\t\t+ MASK_LONG_DOUBLE_128)\n+#define TARGET_DEFAULT \\\n+  (MASK_V8PLUS + MASK_APP_REGS + MASK_FPU + MASK_LONG_DOUBLE_128)\n #endif\n \n /* The default code model used to be CM_MEDANY on Solaris"}, {"sha": "63dda0097c30d01e1ab2a277324f94b2dbc56604", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b286d9ed5f16e8fb8332d17345414d28d985162a", "patch": "@@ -1,3 +1,7 @@\n+2011-07-07  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* gcc.target/sparc/cas64.c: New test.\n+\n 2011-07-07  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/49644"}, {"sha": "ed27cd7cc621f670ef8fb189789a7d2f8f4e1b49", "filename": "gcc/testsuite/gcc.target/sparc/cas64.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2Ftestsuite%2Fgcc.target%2Fsparc%2Fcas64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b286d9ed5f16e8fb8332d17345414d28d985162a/gcc%2Ftestsuite%2Fgcc.target%2Fsparc%2Fcas64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fsparc%2Fcas64.c?ref=b286d9ed5f16e8fb8332d17345414d28d985162a", "patch": "@@ -0,0 +1,15 @@\n+/* PR target/49660 */\n+\n+/* { dg-do compile { target sparc*-*-solaris2.* } } */\n+\n+#include <stdint.h>\n+\n+extern int64_t *val, old, new;\n+\n+int\n+cas64 (void)\n+{\n+  return __sync_bool_compare_and_swap (val, old, new);\n+}\n+\n+/* { dg-final { scan-assembler-not \"compare_and_swap_8\" } } */"}]}