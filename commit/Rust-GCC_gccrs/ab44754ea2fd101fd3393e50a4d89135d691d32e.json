{"sha": "ab44754ea2fd101fd3393e50a4d89135d691d32e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI0NDc1NGVhMmZkMTAxZmQzMzkzZTUwYTRkODkxMzVkNjkxZDMyZQ==", "commit": {"author": {"name": "Cesar Philippidis", "email": "cesar@codesourcery.com", "date": "2018-06-05T13:58:50Z"}, "committer": {"name": "Cesar Philippidis", "email": "cesar@gcc.gnu.org", "date": "2018-06-05T13:58:50Z"}, "message": "re PR fortran/85701 ([openacc] ICE in mark_scope_block_unused, at tree-ssa-live.c:364)\n\nPR fortran/85701\n\n\tgcc/fortran/\n\t* openmp.c (gfc_resolve_oacc_declare): Error on functions and\n\tsubroutine data clause arguments.\n\n\tgcc/testsuite/\n\t* gfortran.dg/goacc/pr85701.f90: New test.\n\nFrom-SVN: r261202", "tree": {"sha": "d29dc8c00eaec15072dbf829a2f87a9d848f4c15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d29dc8c00eaec15072dbf829a2f87a9d848f4c15"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab44754ea2fd101fd3393e50a4d89135d691d32e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab44754ea2fd101fd3393e50a4d89135d691d32e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab44754ea2fd101fd3393e50a4d89135d691d32e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab44754ea2fd101fd3393e50a4d89135d691d32e/comments", "author": {"login": "cesarjp", "id": 4576177, "node_id": "MDQ6VXNlcjQ1NzYxNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4576177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cesarjp", "html_url": "https://github.com/cesarjp", "followers_url": "https://api.github.com/users/cesarjp/followers", "following_url": "https://api.github.com/users/cesarjp/following{/other_user}", "gists_url": "https://api.github.com/users/cesarjp/gists{/gist_id}", "starred_url": "https://api.github.com/users/cesarjp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cesarjp/subscriptions", "organizations_url": "https://api.github.com/users/cesarjp/orgs", "repos_url": "https://api.github.com/users/cesarjp/repos", "events_url": "https://api.github.com/users/cesarjp/events{/privacy}", "received_events_url": "https://api.github.com/users/cesarjp/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f115c9b536ee5e88ca72c94762974459e8d1cc06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f115c9b536ee5e88ca72c94762974459e8d1cc06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f115c9b536ee5e88ca72c94762974459e8d1cc06"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "23a406505837a16d6e09b7e497cc3957bf3a2b1d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ab44754ea2fd101fd3393e50a4d89135d691d32e", "patch": "@@ -1,3 +1,10 @@\n+2018-06-05  Cesar Philippidis  <cesar@codesourcery.com>\n+\n+\tPR fortran/85701\n+\n+\t* openmp.c (gfc_resolve_oacc_declare): Error on functions and\n+\tsubroutine data clause arguments.\n+\n 2018-06-04  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/85981"}, {"sha": "5c13312585ac5b1681ac7f1951abe6b063483c40", "filename": "gcc/fortran/openmp.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ffortran%2Fopenmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ffortran%2Fopenmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.c?ref=ab44754ea2fd101fd3393e50a4d89135d691d32e", "patch": "@@ -5994,6 +5994,12 @@ gfc_resolve_oacc_declare (gfc_namespace *ns)\n \tfor (n = oc->clauses->lists[list]; n; n = n->next)\n \t  {\n \t    n->sym->mark = 0;\n+\t    if (n->sym->attr.function || n->sym->attr.subroutine)\n+\t      {\n+\t\tgfc_error (\"Object %qs is not a variable at %L\",\n+\t\t\t   n->sym->name, &oc->loc);\n+\t\tcontinue;\n+\t      }\n \t    if (n->sym->attr.flavor == FL_PARAMETER)\n \t      {\n \t\tgfc_error (\"PARAMETER object %qs is not allowed at %L\","}, {"sha": "83aef9947485d69a5df825ee6396a6cfc4027d79", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ab44754ea2fd101fd3393e50a4d89135d691d32e", "patch": "@@ -1,3 +1,8 @@\n+2018-06-05  Cesar Philippidis  <cesar@codesourcery.com>\n+\n+\tPR fortran/85701\n+\t* gfortran.dg/goacc/pr85701.f90: New test.\n+\n 2018-06-05  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/85976"}, {"sha": "9c201b865b283b855668fcbacc446f6cc7a972d1", "filename": "gcc/testsuite/gfortran.dg/goacc/pr85701.f90", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fpr85701.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab44754ea2fd101fd3393e50a4d89135d691d32e/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fpr85701.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fpr85701.f90?ref=ab44754ea2fd101fd3393e50a4d89135d691d32e", "patch": "@@ -0,0 +1,23 @@\n+! PR fortran/85701\n+! { dg-do compile }\n+\n+subroutine s1\n+   !$acc declare copy(s1) ! { dg-error \"is not a variable\" }\n+end\n+\n+subroutine s2\n+   !$acc declare present(s2) ! { dg-error \"is not a variable\" }\n+end\n+\n+function f1 ()\n+   !$acc declare copy(f1) ! { dg-error \"is not a variable\" }\n+end\n+\n+function f2 ()\n+   !$acc declare present(f2) ! { dg-error \"is not a variable\" }\n+end\n+\n+program p\n+  !$acc declare copy(p) ! { dg-error \"is not a variable\" }\n+end\n+"}]}