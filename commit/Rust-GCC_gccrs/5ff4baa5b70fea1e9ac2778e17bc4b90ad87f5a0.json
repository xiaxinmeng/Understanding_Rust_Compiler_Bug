{"sha": "5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWZmNGJhYTViNzBmZWExZTlhYzI3NzhlMTdiYzRiOTBhZDg3ZjVhMA==", "commit": {"author": {"name": "Carl Love", "email": "cel@us.ibm.com", "date": "2017-07-22T00:16:26Z"}, "committer": {"name": "Carl Love", "email": "carll@gcc.gnu.org", "date": "2017-07-22T00:16:26Z"}, "message": "rs6000-c.c (altivec_overloaded_builtins): Add ALTIVEC_BUILTIN_VMULESW...\n\ngcc/ChangeLog:\n\n2017-07-21  Carl Love  <cel@us.ibm.com>\n\n\t* config/rs6000/rs6000-c.c (altivec_overloaded_builtins): Add\n\tALTIVEC_BUILTIN_VMULESW, ALTIVEC_BUILTIN_VMULEUW,\n\tALTIVEC_BUILTIN_VMULOSW, ALTIVEC_BUILTIN_VMULOUW entries.\n\t* config/rs6000/rs6000.c (rs6000_gimple_fold_builtin,\n\tbuiltin_function_type): Add ALTIVEC_BUILTIN_* case statements.\n\t* config/rs6000/altivec.md (MVULEUW, VMULESW, VMULOUW,\n\tVMULOSW): New enum \"unspec\" values.\n\t(altivec_vmuleuw, altivec_vmulesw, altivec_vmulouw,\n\taltivec_vmulosw): New patterns.\n\t* config/rs6000/rs6000-builtin.def (VMLEUW, VMULESW, VMULOUW,\n\tVMULOSW): Add definitions.\n\ngcc/testsuite/ChangeLog:\n\n2017-07-21  Carl Love  <cel@us.ibm.com>\n\n\t* gcc.target/powerpc/builtins-2.c (vmulosh, vmulouh, vmulesh,\n\tvmuleuh): Fix scan-assembler-times should check for word not half word\n\tinstructions.\n\nFrom-SVN: r250450", "tree": {"sha": "efa875db86906063586291c4deebc4dec84d4e37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/efa875db86906063586291c4deebc4dec84d4e37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/comments", "author": {"login": "carlelove", "id": 86435705, "node_id": "MDQ6VXNlcjg2NDM1NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/86435705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlelove", "html_url": "https://github.com/carlelove", "followers_url": "https://api.github.com/users/carlelove/followers", "following_url": "https://api.github.com/users/carlelove/following{/other_user}", "gists_url": "https://api.github.com/users/carlelove/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlelove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlelove/subscriptions", "organizations_url": "https://api.github.com/users/carlelove/orgs", "repos_url": "https://api.github.com/users/carlelove/repos", "events_url": "https://api.github.com/users/carlelove/events{/privacy}", "received_events_url": "https://api.github.com/users/carlelove/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "43f84f6c0b347bbe857aabc8ff795a5e859c690b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43f84f6c0b347bbe857aabc8ff795a5e859c690b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43f84f6c0b347bbe857aabc8ff795a5e859c690b"}], "stats": {"total": 85, "additions": 77, "deletions": 8}, "files": [{"sha": "8ec7a798b1d066131af5b9b8f10f5d691b562e4e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "patch": "@@ -1,3 +1,17 @@\n+2017-07-21  Carl Love  <cel@us.ibm.com>\n+\n+\t* config/rs6000/rs6000-c.c (altivec_overloaded_builtins): Add\n+\tALTIVEC_BUILTIN_VMULESW, ALTIVEC_BUILTIN_VMULEUW,\n+\tALTIVEC_BUILTIN_VMULOSW, ALTIVEC_BUILTIN_VMULOUW entries.\n+\t* config/rs6000/rs6000.c (rs6000_gimple_fold_builtin,\n+\tbuiltin_function_type): Add ALTIVEC_BUILTIN_* case statements.\n+\t* config/rs6000/altivec.md (MVULEUW, VMULESW, VMULOUW,\n+\tVMULOSW): New enum \"unspec\" values.\n+\t(altivec_vmuleuw, altivec_vmulesw, altivec_vmulouw,\n+\taltivec_vmulosw): New patterns.\n+\t* config/rs6000/rs6000-builtin.def (VMLEUW, VMULESW, VMULOUW,\n+\tVMULOSW): Add definitions.\n+\n 2017-07-21  Jim Wilson  <jim.wilson@linaro.org>\n \n \t* config/aarch64/aarch64-cores.def (falkor): Add AARCH64_FL_RDMA."}, {"sha": "c14cb92f0f32bf87d4c20be7bd67deee4ac5e910", "filename": "gcc/config/rs6000/altivec.md", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Faltivec.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Faltivec.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faltivec.md?ref=5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "patch": "@@ -36,10 +36,14 @@\n    UNSPEC_VMULESB\n    UNSPEC_VMULEUH\n    UNSPEC_VMULESH\n+   UNSPEC_VMULEUW\n+   UNSPEC_VMULESW\n    UNSPEC_VMULOUB\n    UNSPEC_VMULOSB\n    UNSPEC_VMULOUH\n    UNSPEC_VMULOSH\n+   UNSPEC_VMULOUW\n+   UNSPEC_VMULOSW\n    UNSPEC_VPKPX\n    UNSPEC_VPACK_SIGN_SIGN_SAT\n    UNSPEC_VPACK_SIGN_UNS_SAT\n@@ -1538,6 +1542,41 @@\n   \"vmulosh %0,%1,%2\"\n   [(set_attr \"type\" \"veccomplex\")])\n \n+(define_insn \"altivec_vmuleuw\"\n+  [(set (match_operand:V2DI 0 \"register_operand\" \"=v\")\n+       (unspec:V2DI [(match_operand:V4SI 1 \"register_operand\" \"v\")\n+                     (match_operand:V4SI 2 \"register_operand\" \"v\")]\n+                    UNSPEC_VMULEUW))]\n+  \"TARGET_P8_VECTOR\"\n+  \"vmuleuw %0,%1,%2\"\n+  [(set_attr \"type\" \"veccomplex\")])\n+\n+(define_insn \"altivec_vmulouw\"\n+  [(set (match_operand:V2DI 0 \"register_operand\" \"=v\")\n+       (unspec:V2DI [(match_operand:V4SI 1 \"register_operand\" \"v\")\n+                     (match_operand:V4SI 2 \"register_operand\" \"v\")]\n+                    UNSPEC_VMULOUW))]\n+  \"TARGET_P8_VECTOR\"\n+  \"vmulouw %0,%1,%2\"\n+  [(set_attr \"type\" \"veccomplex\")])\n+\n+(define_insn \"altivec_vmulesw\"\n+  [(set (match_operand:V2DI 0 \"register_operand\" \"=v\")\n+       (unspec:V2DI [(match_operand:V4SI 1 \"register_operand\" \"v\")\n+                     (match_operand:V4SI 2 \"register_operand\" \"v\")]\n+                    UNSPEC_VMULESW))]\n+  \"TARGET_P8_VECTOR\"\n+  \"vmulesw %0,%1,%2\"\n+  [(set_attr \"type\" \"veccomplex\")])\n+\n+(define_insn \"altivec_vmulosw\"\n+  [(set (match_operand:V2DI 0 \"register_operand\" \"=v\")\n+       (unspec:V2DI [(match_operand:V4SI 1 \"register_operand\" \"v\")\n+                     (match_operand:V4SI 2 \"register_operand\" \"v\")]\n+                    UNSPEC_VMULOSW))]\n+  \"TARGET_P8_VECTOR\"\n+  \"vmulosw %0,%1,%2\"\n+  [(set_attr \"type\" \"veccomplex\")])\n \n ;; Vector pack/unpack\n (define_insn \"altivec_vpkpx\""}, {"sha": "e161423662cb551aeab270333068708463a2a662", "filename": "gcc/config/rs6000/rs6000-builtin.def", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def?ref=5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "patch": "@@ -1031,10 +1031,14 @@ BU_ALTIVEC_2 (VMULEUB,\t      \"vmuleub\",\tCONST,\tvec_widen_umult_even_v16qi)\n BU_ALTIVEC_2 (VMULESB,\t      \"vmulesb\",\tCONST,\tvec_widen_smult_even_v16qi)\n BU_ALTIVEC_2 (VMULEUH,\t      \"vmuleuh\",\tCONST,\tvec_widen_umult_even_v8hi)\n BU_ALTIVEC_2 (VMULESH,\t      \"vmulesh\",\tCONST,\tvec_widen_smult_even_v8hi)\n+BU_ALTIVEC_2 (VMULEUW,\t      \"vmuleuw\",\tCONST,  altivec_vmuleuw)\n+BU_ALTIVEC_2 (VMULESW,\t      \"vmulesw\",\tCONST,  altivec_vmulesw)\n BU_ALTIVEC_2 (VMULOUB,\t      \"vmuloub\",\tCONST,\tvec_widen_umult_odd_v16qi)\n BU_ALTIVEC_2 (VMULOSB,\t      \"vmulosb\",\tCONST,\tvec_widen_smult_odd_v16qi)\n BU_ALTIVEC_2 (VMULOUH,\t      \"vmulouh\",\tCONST,\tvec_widen_umult_odd_v8hi)\n BU_ALTIVEC_2 (VMULOSH,\t      \"vmulosh\",\tCONST,\tvec_widen_smult_odd_v8hi)\n+BU_ALTIVEC_2 (VMULOUW,\t      \"vmulouw\",\tCONST,  altivec_vmulouw)\n+BU_ALTIVEC_2 (VMULOSW,\t      \"vmulosw\",\tCONST,  altivec_vmulosw)\n BU_ALTIVEC_2 (VNOR,\t      \"vnor\",\t\tCONST,\tnorv4si3)\n BU_ALTIVEC_2 (VOR,\t      \"vor\",\t\tCONST,\tiorv4si3)\n BU_ALTIVEC_2 (VPKUHUM,\t      \"vpkuhum\",\tCONST,\taltivec_vpkuhum)\n@@ -1353,12 +1357,16 @@ BU_ALTIVEC_OVERLOAD_2 (VMRGLH,\t   \"vmrglh\")\n BU_ALTIVEC_OVERLOAD_2 (VMRGLW,\t   \"vmrglw\")\n BU_ALTIVEC_OVERLOAD_2 (VMULESB,\t   \"vmulesb\")\n BU_ALTIVEC_OVERLOAD_2 (VMULESH,\t   \"vmulesh\")\n+BU_ALTIVEC_OVERLOAD_2 (VMULESW,\t   \"vmulesw\")\n BU_ALTIVEC_OVERLOAD_2 (VMULEUB,\t   \"vmuleub\")\n BU_ALTIVEC_OVERLOAD_2 (VMULEUH,\t   \"vmuleuh\")\n+BU_ALTIVEC_OVERLOAD_2 (VMULEUW,\t   \"vmuleuw\")\n BU_ALTIVEC_OVERLOAD_2 (VMULOSB,\t   \"vmulosb\")\n BU_ALTIVEC_OVERLOAD_2 (VMULOSH,\t   \"vmulosh\")\n+BU_ALTIVEC_OVERLOAD_2 (VMULOSW,\t   \"vmulosw\")\n BU_ALTIVEC_OVERLOAD_2 (VMULOUB,\t   \"vmuloub\")\n BU_ALTIVEC_OVERLOAD_2 (VMULOUH,\t   \"vmulouh\")\n+BU_ALTIVEC_OVERLOAD_2 (VMULOUW,\t   \"vmulouw\")\n BU_ALTIVEC_OVERLOAD_2 (VPKSHSS,\t   \"vpkshss\")\n BU_ALTIVEC_OVERLOAD_2 (VPKSHUS,\t   \"vpkshus\")\n BU_ALTIVEC_OVERLOAD_2 (VPKSWSS,\t   \"vpkswss\")"}, {"sha": "937cda0aa2ae6838ad6c159d95507ebf030c844a", "filename": "gcc/config/rs6000/rs6000-c.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Frs6000-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Frs6000-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-c.c?ref=5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "patch": "@@ -2232,9 +2232,9 @@ const struct altivec_builtin_types altivec_overloaded_builtins[] = {\n     RS6000_BTI_unsigned_V4SI, RS6000_BTI_unsigned_V8HI, RS6000_BTI_unsigned_V8HI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULESH,\n     RS6000_BTI_V4SI, RS6000_BTI_V8HI, RS6000_BTI_V8HI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULESH,\n+  { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULESW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULEUH,\n+  { ALTIVEC_BUILTIN_VEC_MULE, ALTIVEC_BUILTIN_VMULEUW,\n     RS6000_BTI_unsigned_V2DI, RS6000_BTI_unsigned_V4SI,\n     RS6000_BTI_unsigned_V4SI, 0 },\n   { ALTIVEC_BUILTIN_VEC_VMULEUB, ALTIVEC_BUILTIN_VMULEUB,\n@@ -2251,9 +2251,9 @@ const struct altivec_builtin_types altivec_overloaded_builtins[] = {\n     RS6000_BTI_V8HI, RS6000_BTI_V16QI, RS6000_BTI_V16QI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOUH,\n     RS6000_BTI_unsigned_V4SI, RS6000_BTI_unsigned_V8HI, RS6000_BTI_unsigned_V8HI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOSH,\n+  { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOSW,\n     RS6000_BTI_V2DI, RS6000_BTI_V4SI, RS6000_BTI_V4SI, 0 },\n-  { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOUH,\n+  { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOUW,\n     RS6000_BTI_unsigned_V2DI, RS6000_BTI_unsigned_V4SI,\n     RS6000_BTI_unsigned_V4SI, 0 },\n   { ALTIVEC_BUILTIN_VEC_MULO, ALTIVEC_BUILTIN_VMULOSH,"}, {"sha": "d6be72b6a29893966605630cd6318abcaa4cd9f0", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "patch": "@@ -18065,8 +18065,10 @@ builtin_function_type (machine_mode mode_ret, machine_mode mode_arg0,\n       /* unsigned 2 argument functions.  */\n     case ALTIVEC_BUILTIN_VMULEUB:\n     case ALTIVEC_BUILTIN_VMULEUH:\n+    case ALTIVEC_BUILTIN_VMULEUW:\n     case ALTIVEC_BUILTIN_VMULOUB:\n     case ALTIVEC_BUILTIN_VMULOUH:\n+    case ALTIVEC_BUILTIN_VMULOUW:\n     case CRYPTO_BUILTIN_VCIPHER:\n     case CRYPTO_BUILTIN_VCIPHERLAST:\n     case CRYPTO_BUILTIN_VNCIPHER:"}, {"sha": "b36cd5e6778a05c30e73c0e7181d5018d58f2a40", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "patch": "@@ -1,3 +1,9 @@\n+2017-07-21  Carl Love  <cel@us.ibm.com>\n+\n+\t* gcc.target/powerpc/builtins-2.c (vmulosh, vmulouh, vmulesh,\n+\tvmuleuh): Fix scan-assembler-times should check for word not half word\n+\tinstructions.\n+\n 2017-07-21  Jim Wilson  <jim.wilson@linaro.org>\n \n \t* lib/target-supports.exp (add_options_for_arm_v8_1a_neon): Delete"}, {"sha": "00fa6ec0274d9551db349ae799c3de07323acba9", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-3.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3.c?ref=5ff4baa5b70fea1e9ac2778e17bc4b90ad87f5a0", "patch": "@@ -236,8 +236,8 @@ test_vul_sldw_vul_vul (vector unsigned long long x,\n /* { dg-final { scan-assembler-times \"xvnegsp\"  1 } } */\n /* { dg-final { scan-assembler-times \"xvnegdp\"  1 } } */\n /* { dg-final { scan-assembler-times \"vslo\"     4 } } */\n-/* { dang-remove { scan-assembler-times \"vmulosw\"  1 } } */\n-/* { dang-remove  { scan-assembler-times \"vmulouw\"  1 } } */\n-/* { dang-remove  { scan-assembler-times \"vmulesw\"  1 } } */\n-/* { dang-remove  { scan-assembler-times \"vmuleuw\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vmulosw\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vmulouw\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vmulesw\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vmuleuw\"  1 } } */\n /* { dg-final { scan-assembler-times \"xxsldwi\"  8 } } */"}]}