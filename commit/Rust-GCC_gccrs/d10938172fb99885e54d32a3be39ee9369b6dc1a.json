{"sha": "d10938172fb99885e54d32a3be39ee9369b6dc1a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDEwOTM4MTcyZmI5OTg4NWU1NGQzMmEzYmUzOWVlOTM2OWI2ZGMxYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2012-05-11T08:22:16Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-05-11T08:22:16Z"}, "message": "re PR c++/53305 (internal crash with variadic templates and decltype)\n\n/cp\n2012-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/53305\n\t* pt.c (tsubst_copy: case PARM_DECL): Return error_mark_node if\n\ttsubst_decl returns NULL_TREE.\n\t* cxx-pretty-print.c (pp_cxx_simple_type_specifier): Handle\n\tBOUND_TEMPLATE_TEMPLATE_PARM.\n\n/testsuite\n2012-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/53305\n\t* g++.dg/cpp0x/variadic132.C: New.\n\nFrom-SVN: r187396", "tree": {"sha": "04bd13a6b3635259564b6b8bfd628b45bd3301f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04bd13a6b3635259564b6b8bfd628b45bd3301f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d10938172fb99885e54d32a3be39ee9369b6dc1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d10938172fb99885e54d32a3be39ee9369b6dc1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d10938172fb99885e54d32a3be39ee9369b6dc1a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d10938172fb99885e54d32a3be39ee9369b6dc1a/comments", "author": null, "committer": null, "parents": [{"sha": "5450a88f8ba4e2e561330b5ed45ffff008f2f730", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5450a88f8ba4e2e561330b5ed45ffff008f2f730", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5450a88f8ba4e2e561330b5ed45ffff008f2f730"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "dfb3204c18c28f13d8149167e148da85c4b1aa4a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d10938172fb99885e54d32a3be39ee9369b6dc1a", "patch": "@@ -1,3 +1,11 @@\n+2012-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/53305\n+\t* pt.c (tsubst_copy: case PARM_DECL): Return error_mark_node if\n+\ttsubst_decl returns NULL_TREE.\n+\t* cxx-pretty-print.c (pp_cxx_simple_type_specifier): Handle\n+\tBOUND_TEMPLATE_TEMPLATE_PARM.\n+\n 2012-05-10  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/53158"}, {"sha": "cb7922f04c6a30ef2d5f6803202199b66ddbe12e", "filename": "gcc/cp/cxx-pretty-print.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Fcp%2Fcxx-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Fcp%2Fcxx-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcxx-pretty-print.c?ref=d10938172fb99885e54d32a3be39ee9369b6dc1a", "patch": "@@ -1261,6 +1261,7 @@ pp_cxx_simple_type_specifier (cxx_pretty_printer *pp, tree t)\n     case TEMPLATE_TYPE_PARM:\n     case TEMPLATE_TEMPLATE_PARM:\n     case TEMPLATE_PARM_INDEX:\n+    case BOUND_TEMPLATE_TEMPLATE_PARM:\n       pp_cxx_unqualified_id (pp, t);\n       break;\n "}, {"sha": "a506a8481d00acf923002196846c1d8646cef7d8", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=d10938172fb99885e54d32a3be39ee9369b6dc1a", "patch": "@@ -12066,7 +12066,7 @@ tsubst_copy (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n     case PARM_DECL:\n       r = retrieve_local_specialization (t);\n \n-      if (r == NULL)\n+      if (r == NULL_TREE)\n \t{\n \t  tree c;\n \n@@ -12084,6 +12084,8 @@ tsubst_copy (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n \t     not the following PARM_DECLs that are chained to T.  */\n \t  c = copy_node (t);\n \t  r = tsubst_decl (c, args, complain);\n+\t  if (r == NULL_TREE)\n+\t    return error_mark_node;\n \t  /* Give it the template pattern as its context; its true context\n \t     hasn't been instantiated yet and this is good enough for\n \t     mangling.  */"}, {"sha": "c0ed0e4090f9a8bc927dbfaa7a33cf1466d850f6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d10938172fb99885e54d32a3be39ee9369b6dc1a", "patch": "@@ -1,3 +1,8 @@\n+2012-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/53305\n+\t* g++.dg/cpp0x/variadic132.C: New.\n+\n 2012-05-10  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/53158"}, {"sha": "f50c7a659f56e181de7886ff405ef41c56f4cbb6", "filename": "gcc/testsuite/g++.dg/cpp0x/variadic132.C", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic132.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d10938172fb99885e54d32a3be39ee9369b6dc1a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic132.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic132.C?ref=d10938172fb99885e54d32a3be39ee9369b6dc1a", "patch": "@@ -0,0 +1,27 @@\n+// PR c++/53305\n+// { dg-do compile { target c++11 } }\n+\n+template<class... Ts> struct tuple { };\n+\n+struct funct\n+{\n+  template<class... argTs>\n+  int operator()(argTs...);\n+};\n+\n+template<class...> class test;\n+\n+template<template <class...> class tp,\n+\t class... arg1Ts, class... arg2Ts>\n+class test<tp<arg1Ts...>, tp<arg2Ts...>>\n+{\n+  template<class func, class...arg3Ts>\n+    auto test2(func fun, arg1Ts... arg1s, arg3Ts... arg3s)\n+    -> decltype(fun(arg1s..., arg3s...));\n+};\n+\n+int main()\n+{\n+  test<tuple<>, tuple<char,int>> t2;\n+  t2.test2(funct(), 'a', 2);  // { dg-error \"no matching function\" }\n+}"}]}