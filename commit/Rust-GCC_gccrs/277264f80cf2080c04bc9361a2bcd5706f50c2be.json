{"sha": "277264f80cf2080c04bc9361a2bcd5706f50c2be", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc3MjY0ZjgwY2YyMDgwYzA0YmM5MzYxYTJiY2Q1NzA2ZjUwYzJiZQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2006-12-06T22:54:51Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2006-12-06T22:54:51Z"}, "message": "re PR c++/29730 (ICE on invalid declaration of template member)\n\n\tPR c++/29730\n\t* parser.c (cp_parser_init_declarator): Reject initialization of\n\tfunctions.\n\tPR c++/29730\n\t* g++.dg/template/crash64.C: New test.\n\t* g++.dg/parse/crash27.C: Adjust error markers.\n\nFrom-SVN: r119601", "tree": {"sha": "b04cd501e7e1b9fe4e479bc526a25393e9ee84f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b04cd501e7e1b9fe4e479bc526a25393e9ee84f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/277264f80cf2080c04bc9361a2bcd5706f50c2be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/277264f80cf2080c04bc9361a2bcd5706f50c2be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/277264f80cf2080c04bc9361a2bcd5706f50c2be", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/277264f80cf2080c04bc9361a2bcd5706f50c2be/comments", "author": null, "committer": null, "parents": [{"sha": "66863d89a10ffec862e86d79000360a4482e9785", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66863d89a10ffec862e86d79000360a4482e9785", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66863d89a10ffec862e86d79000360a4482e9785"}], "stats": {"total": 41, "additions": 35, "deletions": 6}, "files": [{"sha": "07e6b63aa38000803656fdac9000c92dfa55b1c7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=277264f80cf2080c04bc9361a2bcd5706f50c2be", "patch": "@@ -1,3 +1,9 @@\n+2006-12-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/29730\n+\t* parser.c (cp_parser_init_declarator): Reject initialization of\n+\tfunctions.\n+\n 2006-12-05  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/29729"}, {"sha": "cdb60f646237d76765f3802a4e07fb7b3daab4ef", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=277264f80cf2080c04bc9361a2bcd5706f50c2be", "patch": "@@ -11311,9 +11311,23 @@ cp_parser_init_declarator (cp_parser* parser,\n   is_non_constant_init = true;\n   if (is_initialized)\n     {\n-      if (function_declarator_p (declarator)\n-\t  && initialization_kind == CPP_EQ)\n-\tinitializer = cp_parser_pure_specifier (parser);\n+      if (function_declarator_p (declarator))\n+\t{\n+\t   if (initialization_kind == CPP_EQ)\n+\t     initializer = cp_parser_pure_specifier (parser);\n+\t   else\n+\t     {\n+\t       /* If the declaration was erroneous, we don't really\n+\t\t  know what the user intended, so just silently\n+\t\t  consume the initializer.  */\n+\t       if (decl != error_mark_node)\n+\t\t error (\"initializer provided for function\");\n+\t       cp_parser_skip_to_closing_parenthesis (parser,\n+\t\t\t\t\t\t      /*recovering=*/true,\n+\t\t\t\t\t\t      /*or_comma=*/false,\n+\t\t\t\t\t\t      /*consume_paren=*/true);\n+\t     }\n+\t}\n       else\n \tinitializer = cp_parser_initializer (parser,\n \t\t\t\t\t     &is_parenthesized_init,"}, {"sha": "79f1decd5e394f67392005aadbea74a8dfb9bf31", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=277264f80cf2080c04bc9361a2bcd5706f50c2be", "patch": "@@ -1,3 +1,9 @@\n+2006-12-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/29730\n+\t* g++.dg/template/crash64.C: New test.\n+\t* g++.dg/parse/crash27.C: Adjust error markers.\n+\n 2006-12-06  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR libfortran/30009"}, {"sha": "069436666d3bc44c0ac15cbfdbf77574aff6bf04", "filename": "gcc/testsuite/g++.dg/parse/crash27.C", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash27.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash27.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash27.C?ref=277264f80cf2080c04bc9361a2bcd5706f50c2be", "patch": "@@ -3,6 +3,3 @@\n void Dispatcher()\n \t (__builtin_offsetof (ArgsType, largeMsgLen))\n \t/* { dg-error \"function \" \"function\" { target *-*-* } 4 } */\n-\t/* { dg-error \"expected type\" \"expected 1\" { target *-*-* } 4 } */\n-\t/* { dg-error \"expected `,' before\" \"expected 2\" { target *-*-* } 4 } */\n-\t/* { dg-error \"expected `\\\\\\)\" \"expected 3\" { target *-*-* } 4 } */"}, {"sha": "750e3daf19e468859bd759cef3fb9d60d5ac6759", "filename": "gcc/testsuite/g++.dg/template/crash64.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash64.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277264f80cf2080c04bc9361a2bcd5706f50c2be/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash64.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash64.C?ref=277264f80cf2080c04bc9361a2bcd5706f50c2be", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/29730\n+\n+struct A\n+{\n+  template<int> void foo()(0); // { dg-error \"initializer\" } \n+};"}]}