{"sha": "0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNiYjRmNTg5Nzc3ZWVmN2RkNjNkNWM3MTMyNjQyYjBkZmI1NGNmYQ==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2014-05-23T16:43:31Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2014-05-23T16:43:31Z"}, "message": "rs6000: Make all add instructions one type\n\nThey are currently just \"integer\", but the dot version is fast_compare.\nThis makes them all \"add\".  Later we should introduce attributes to\ndistinguish e.g. addc and adde (which aren't currently handled as\nseparate instructions at all, only in groups).\n\nFrom-SVN: r210871", "tree": {"sha": "b64e69b5b6c038c38b447795ab9f31c4b5d3ff66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b64e69b5b6c038c38b447795ab9f31c4b5d3ff66"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "892e7fa695536ae398afc23664ee30df3f59a5d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/892e7fa695536ae398afc23664ee30df3f59a5d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/892e7fa695536ae398afc23664ee30df3f59a5d3"}], "stats": {"total": 182, "additions": 131, "deletions": 51}, "files": [{"sha": "c21dfa452b4325d2f2ce87e4803ca675f8b81907", "filename": "gcc/ChangeLog", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -1,3 +1,39 @@\n+2014-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config/rs6000/rs6000.md (type): Add \"add\".\n+\t(*add<mode>3_internal1, addsi3_high, *add<mode>3_internal2,\n+\t*add<mode>3_internal3, *neg<mode>2_internal, and 5 anonymous\n+\tdefine_insns): Use it.\n+\t* config/rs6000/rs6000.c (rs6000_adjust_cost): Adjust.\n+\n+\t* config/rs6000/40x.md (ppc403-integer, ppc403-compare): Adjust.\n+\t* config/rs6000/440.md (ppc440-integer, ppc440-compare): Adjust.\n+\t* config/rs6000/476.md (ppc476-simple-integer, ppc476-compare):\n+\tAdjust.\n+\t* config/rs6000/601.md (ppc601-integer): Adjust.\n+\t* config/rs6000/603.md (ppc603-integer, ppc603-compare): Adjust.\n+\t* config/rs6000/6xx.md (ppc604-integer, ppc604-compare): Adjust.\n+\t* config/rs6000/7450.md (ppc7450-integer, ppc7450-compare): Adjust.\n+\t* config/rs6000/7xx.md (ppc750-integer, ppc750-compare): Adjust.\n+\t* config/rs6000/8540.md (ppc8540_su): Adjust.\n+\t* config/rs6000/cell.md (cell-integer, cell-fast-cmp,\n+\tcell-cmp-microcoded): Adjust.\n+\t* config/rs6000/e300c2c3.md (ppce300c3_cmp, ppce300c3_iu): Adjust.\n+\t* config/rs6000/e500mc.md (e500mc_su): Adjust.\n+\t* config/rs6000/e500mc64.md (e500mc64_su, e500mc64_su2): Adjust.\n+\t* config/rs6000/e5500.md (e5500_sfx, e5500_sfx2): Adjust.\n+\t* config/rs6000/e6500.md (e6500_sfx, e6500_sfx2): Adjust.\n+\t* config/rs6000/mpc.md (mpccore-integer, mpccore-compare): Adjust.\n+\t* config/rs6000/power4.md (power4-integer, power4-cmp): Adjust.\n+\t* config/rs6000/power5.md (power5-integer, power5-cmp): Adjust.\n+\t* config/rs6000/power6.md (power6-integer, power6-fast-compare):\n+\tAdjust.\n+\t* config/rs6000/power7.md (power7-integer, power7-cmp): Adjust.\n+\t* config/rs6000/power8.md (power8-1cyc, power8-fast-compare):\n+\tAdjust.\n+\t* config/rs6000/rs64.md (rs64a-integer, rs64a-compare): Adjust.\n+\t* config/rs6000/titan.md (titan_fxu_adder, titan_fxu_alu): Adjust.\n+\n 2014-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/rs6000.md (type): Delete \"var_shift_rotate\","}, {"sha": "85b9e41110f88fb4c987adc3218356bac51ddb73", "filename": "gcc/config/rs6000/40x.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F40x.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F40x.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F40x.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -37,7 +37,7 @@\n \n (define_insn_reservation \"ppc403-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc403,ppc405\"))\n   \"iu_40x\")\n@@ -54,7 +54,7 @@\n \n (define_insn_reservation \"ppc403-compare\" 3\n   (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc403,ppc405\"))\n   \"iu_40x,nothing,bpu_40x\")"}, {"sha": "23f69b1e3ec2d8fe1683726fe33dcfe516ce1f77", "filename": "gcc/config/rs6000/440.md", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F440.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F440.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F440.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -53,7 +53,9 @@\n   \"ppc440_issue,ppc440_l_pipe\")\n \n (define_insn_reservation \"ppc440-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,shift,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc440\"))\n   \"ppc440_issue,ppc440_i_pipe|ppc440_j_pipe\")\n \n@@ -93,7 +95,9 @@\n   \"ppc440_issue,ppc440_i_pipe\")\n \n (define_insn_reservation \"ppc440-compare\" 2\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,cr_logical,delayed_cr,mfcr\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare,cr_logical,delayed_cr,mfcr\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc440\"))\n   \"ppc440_issue,ppc440_i_pipe\")\n "}, {"sha": "dd39bc256554d166742c02b9b19ef1f52a739500", "filename": "gcc/config/rs6000/476.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F476.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F476.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F476.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -64,7 +64,7 @@\n \n (define_insn_reservation \"ppc476-simple-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,exts\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc476\"))\n   \"ppc476_issue,\\\n@@ -79,7 +79,7 @@\n (define_insn_reservation \"ppc476-compare\" 4\n   (and (ior (eq_attr \"type\" \"compare,fast_compare,mfcr,mfcrf,\\\n                              mtcr,mfjmpr,mtjmpr\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc476\"))\n   \"ppc476_issue,\\"}, {"sha": "e8207a8ecf72a188f4f20d5956212f1ab7141101", "filename": "gcc/config/rs6000/601.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F601.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F601.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F601.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -45,7 +45,7 @@\n   \"iu_ppc601+fpu_ppc601\")\n \n (define_insn_reservation \"ppc601-integer\" 1\n-  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,add,insert,trap,cntlz,exts,isel\")\n \t    (and (eq_attr \"type\" \"shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc601\"))"}, {"sha": "0db3f426a2baf3a42a1a8a9f15a8976b60035390", "filename": "gcc/config/rs6000/603.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F603.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F603.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F603.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -59,7 +59,7 @@\n \n (define_insn_reservation \"ppc603-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc603\"))\n   \"iu_603\")\n@@ -94,7 +94,7 @@\n \n (define_insn_reservation \"ppc603-compare\" 3\n   (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc603\"))\n   \"iu_603,nothing,bpu_603\")"}, {"sha": "fc9d857c0d64e9c04d9aa2d7f12ca403610e5ab1", "filename": "gcc/config/rs6000/6xx.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F6xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F6xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F6xx.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -74,7 +74,7 @@\n   \n (define_insn_reservation \"ppc604-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc604,ppc604e,ppc620,ppc630\"))\n   \"iu1_6xx|iu2_6xx\")\n@@ -148,7 +148,7 @@\n \n (define_insn_reservation \"ppc604-compare\" 3\n   (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc604,ppc604e,ppc620,ppc630\"))\n   \"(iu1_6xx|iu2_6xx)\")"}, {"sha": "3c75d05c931e24c6aa5e70f1705e4cb77a3122b8", "filename": "gcc/config/rs6000/7450.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F7450.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F7450.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7450.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -74,7 +74,7 @@\n \n (define_insn_reservation \"ppc7450-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc7450\"))\n   \"ppc7450_du,iu1_7450|iu2_7450|iu3_7450\")\n@@ -109,7 +109,7 @@\n \n (define_insn_reservation \"ppc7450-compare\" 2\n   (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc7450\"))\n   \"ppc7450_du,(iu1_7450|iu2_7450|iu3_7450)\")"}, {"sha": "89de8df7b56038635ce79056684caa3c3a0f8e84", "filename": "gcc/config/rs6000/7xx.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F7xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F7xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7xx.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -62,7 +62,7 @@\n \n (define_insn_reservation \"ppc750-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc750,ppc7400\"))\n   \"ppc750_du,iu1_7xx|iu2_7xx\")\n@@ -102,7 +102,7 @@\n \n (define_insn_reservation \"ppc750-compare\" 2\n   (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc750,ppc7400\"))\n   \"ppc750_du,(iu1_7xx|iu2_7xx)\")"}, {"sha": "22a67d0c9763526139f871f8f0fda4e9c53924b3", "filename": "gcc/config/rs6000/8540.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F8540.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2F8540.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F8540.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -84,7 +84,7 @@\n \n ;; Simple SU insns\n (define_insn_reservation \"ppc8540_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert,cmp,compare,fast_compare,\\\n+  (and (eq_attr \"type\" \"integer,add,insert,cmp,compare,fast_compare,\\\n                         shift,trap,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc8540,ppc8548\"))\n   \"ppc8540_decode,ppc8540_issue+ppc8540_su_stage0+ppc8540_retire\")"}, {"sha": "70af72be4e7f7e20fbc5140d96d44b0bbf9feafa", "filename": "gcc/config/rs6000/cell.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fcell.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fcell.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fcell.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -167,7 +167,7 @@\n ;; Integer latency is 2 cycles\n (define_insn_reservation \"cell-integer\" 2\n   (and (ior (eq_attr \"type\" \"integer,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"insert\")\n \t\t (eq_attr \"size\" \"64\")))\n@@ -202,15 +202,15 @@\n ;; add, addo, sub, subo, alter cr0, rldcli, rlwinm \n (define_insn_reservation \"cell-fast-cmp\" 2\n   (and (ior (eq_attr \"type\" \"fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"cell\")\n        (eq_attr \"cell_micro\" \"not\"))\n   \"slot01,fxu_cell\")\n \n (define_insn_reservation \"cell-cmp-microcoded\" 9\n   (and (ior (eq_attr \"type\" \"fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"cell\")\n        (eq_attr \"cell_micro\" \"always\"))"}, {"sha": "ccc8cc3edf4f2b7568187b979b7db39aceaf1243", "filename": "gcc/config/rs6000/e300c2c3.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -84,15 +84,17 @@\n ;; Compares can be executed either one of the IU or SRU\n (define_insn_reservation \"ppce300c3_cmp\" 1\n   (and (ior (eq_attr \"type\" \"cmp,compare,fast_compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (ior (eq_attr \"cpu\" \"ppce300c2\") (eq_attr \"cpu\" \"ppce300c3\")))\n   \"ppce300c3_decode,ppce300c3_issue+(ppce300c3_iu_stage0|ppce300c3_sru_stage0) \\\n         +ppce300c3_retire\")\n \n ;; Other one cycle IU insns\n (define_insn_reservation \"ppce300c3_iu\" 1\n-  (and (eq_attr \"type\" \"integer,insert,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,isel\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (ior (eq_attr \"cpu\" \"ppce300c2\") (eq_attr \"cpu\" \"ppce300c3\")))\n   \"ppce300c3_decode,ppce300c3_issue+ppce300c3_iu_stage0+ppce300c3_retire\")\n "}, {"sha": "c4c84c6d130863fc6ad26ac8ebb58f62c13970ec", "filename": "gcc/config/rs6000/e500mc.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -70,7 +70,7 @@\n \n ;; Simple SU insns.\n (define_insn_reservation \"e500mc_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert,cmp,compare,fast_compare,\\\n+  (and (eq_attr \"type\" \"integer,add,insert,cmp,compare,fast_compare,\\\n                         shift,trap,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppce500mc\"))\n   \"e500mc_decode,e500mc_issue+e500mc_su_stage0+e500mc_retire\")"}, {"sha": "70ee18e181c0c56f9cf6ba4be325d328077e07ed", "filename": "gcc/config/rs6000/e500mc64.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc64.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -70,6 +70,8 @@\n ;; Simple SU insns.\n (define_insn_reservation \"e500mc64_su\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,cntlz,exts\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"shift\")\n \t\t (eq_attr \"dot\" \"no\")\n \t\t (eq_attr \"var_shift\" \"no\")))\n@@ -78,6 +80,8 @@\n \n (define_insn_reservation \"e500mc64_su2\" 2\n   (and (ior (eq_attr \"type\" \"cmp,compare,fast_compare,trap\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\"))\n \t    (and (eq_attr \"type\" \"shift\")\n \t\t (eq_attr \"dot\" \"yes\")\n \t\t (eq_attr \"var_shift\" \"no\")))"}, {"sha": "6ca86d7bbcd4d462cdaa8e46ba8536954a4ef464", "filename": "gcc/config/rs6000/e5500.md", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe5500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe5500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe5500.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -57,13 +57,17 @@\n ;; SFX.\n (define_insn_reservation \"e5500_sfx\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,cntlz,exts\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"shift\")\n \t\t (eq_attr \"var_shift\" \"no\")))\n        (eq_attr \"cpu\" \"ppce5500\"))\n   \"e5500_decode,e5500_sfx\")\n \n (define_insn_reservation \"e5500_sfx2\" 2\n-  (and (eq_attr \"type\" \"cmp,compare,fast_compare,trap\")\n+  (and (ior (eq_attr \"type\" \"cmp,compare,fast_compare,trap\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\"  \"yes\")))\n        (eq_attr \"cpu\" \"ppce5500\"))\n   \"e5500_decode,e5500_sfx\")\n "}, {"sha": "15dfc9ca4c017428285f030f60a27fea98f45a0c", "filename": "gcc/config/rs6000/e6500.md", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe6500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fe6500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe6500.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -60,13 +60,17 @@\n ;; SFX.\n (define_insn_reservation \"e6500_sfx\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,cntlz,exts\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\"  \"no\"))\n \t    (and (eq_attr \"type\" \"shift\")\n \t\t (eq_attr \"var_shift\" \"no\")))\n        (eq_attr \"cpu\" \"ppce6500\"))\n   \"e6500_decode,e6500_sfx\")\n \n (define_insn_reservation \"e6500_sfx2\" 2\n-  (and (eq_attr \"type\" \"cmp,compare,fast_compare,trap\")\n+  (and (ior (eq_attr \"type\" \"cmp,compare,fast_compare,trap\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\"  \"yes\")))\n        (eq_attr \"cpu\" \"ppce6500\"))\n   \"e6500_decode,e6500_sfx\")\n "}, {"sha": "ffcb7a7bae8cda29bb85d43111fc0ac020cc9734", "filename": "gcc/config/rs6000/mpc.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fmpc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fmpc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fmpc.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -42,7 +42,7 @@\n \n (define_insn_reservation \"mpccore-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"mpccore\"))\n   \"iu_mpc\")\n@@ -70,7 +70,7 @@\n \n (define_insn_reservation \"mpccore-compare\" 3\n   (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"mpccore\"))\n   \"iu_mpc,nothing,bpu_mpc\")"}, {"sha": "cea473d4a46bd8cef293a70699a56fa577eca839", "filename": "gcc/config/rs6000/power4.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower4.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -211,7 +211,7 @@\n ; Integer latency is 2 cycles\n (define_insn_reservation \"power4-integer\" 2\n   (and (ior (eq_attr \"type\" \"integer,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"insert\")\n \t\t (eq_attr \"size\" \"64\")))\n@@ -250,7 +250,9 @@\n     |(iu2_power4,nothing,iu1_power4))\")\n \n (define_insn_reservation \"power4-cmp\" 3\n-  (and (eq_attr \"type\" \"cmp,fast_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power4\"))\n   \"iq_power4\")\n "}, {"sha": "5df009e45207deb5bda892788e10608cbb15c277", "filename": "gcc/config/rs6000/power5.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower5.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower5.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower5.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -167,7 +167,7 @@\n ; Integer latency is 2 cycles\n (define_insn_reservation \"power5-integer\" 2\n   (and (ior (eq_attr \"type\" \"integer,trap,cntlz,exts,isel,popcnt\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"insert\")\n \t\t (eq_attr \"size\" \"64\")))\n@@ -203,7 +203,9 @@\n   \"du1_power5+du2_power5,iu1_power5,nothing,iu2_power5\")\n \n (define_insn_reservation \"power5-cmp\" 3\n-  (and (eq_attr \"type\" \"cmp,fast_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power5\"))\n   \"iq_power5\")\n "}, {"sha": "9dfd39d92d7afc4741c2a9d50dc8369421c14984", "filename": "gcc/config/rs6000/power6.md", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower6.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower6.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower6.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -222,7 +222,9 @@\n   \"LSU_power6\")\n \n (define_insn_reservation \"power6-integer\" 1\n-  (and (eq_attr \"type\" \"integer\")\n+  (and (ior (eq_attr \"type\" \"integer\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"power6\"))\n   \"FXU_power6\")\n \n@@ -336,7 +338,9 @@\n   \"FXU_power6\")\n \n (define_insn_reservation \"power6-fast-compare\" 1\n-  (and (eq_attr \"type\" \"fast_compare\")\n+  (and (ior (eq_attr \"type\" \"fast_compare\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power6\"))\n   \"FXU_power6\")\n "}, {"sha": "00aa26b6be6f6593d810d1cca7efc6024de7d082", "filename": "gcc/config/rs6000/power7.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower7.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower7.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower7.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -175,7 +175,7 @@\n ; FX Unit\n (define_insn_reservation \"power7-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,exts,isel,popcnt\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"power7\"))\n   \"DU_power7,FXU_power7\")\n@@ -196,7 +196,9 @@\n   \"DU_power7+DU_power7+DU_power7,FXU_power7,FXU_power7,FXU_power7\")\n \n (define_insn_reservation \"power7-cmp\" 1\n-  (and (eq_attr \"type\" \"cmp,fast_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power7\"))\n   \"DU_power7,FXU_power7\")\n "}, {"sha": "b2eeac4935ce8c8df0e53a80151d26a8d5bfc6df", "filename": "gcc/config/rs6000/power8.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower8.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Fpower8.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower8.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -169,7 +169,7 @@\n ; FX Unit\n (define_insn_reservation \"power8-1cyc\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"power8\"))\n   \"DU_any_power8,FXU_power8\")\n@@ -207,7 +207,9 @@\n \n ; fast_compare : add./and./nor./etc\n (define_insn_reservation \"power8-fast-compare\" 2\n-  (and (eq_attr \"type\" \"fast_compare\")\n+  (and (ior (eq_attr \"type\" \"fast_compare\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power8\"))\n   \"DU_any_power8,FXU_power8\")\n "}, {"sha": "85a0048fa5ea16c8fc4651f6d37da7cc9190dfb7", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -26241,6 +26241,7 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n                       break;\n \t\t    }\n                   case TYPE_INTEGER:\n+                  case TYPE_ADD:\n                   case TYPE_COMPARE:\n                   case TYPE_FAST_COMPARE:\n                   case TYPE_EXTS:\n@@ -26304,6 +26305,7 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n                       break;\n \t\t    }\n                   case TYPE_INTEGER:\n+                  case TYPE_ADD:\n                   case TYPE_COMPARE:\n                   case TYPE_FAST_COMPARE:\n                   case TYPE_EXTS:"}, {"sha": "3b5eb7b8827666487ecdfb400c77901f6d59c469", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 19, "deletions": 11, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -159,7 +159,7 @@\n ;; computations.\n (define_attr \"type\"\n   \"integer,two,three,\n-   shift,insert,\n+   add,shift,insert,\n    mul,halfmul,div,\n    exts,cntlz,popcnt,isel,\n    load,store,fpload,fpstore,vecload,vecstore,\n@@ -1820,15 +1820,15 @@\n    addi %0,%1,%2\n    addic %0,%1,%2\n    addis %0,%1,%v2\"\n-  [(set_attr \"length\" \"4,4,4,4\")])\n+  [(set_attr \"type\" \"add\")])\n \n (define_insn \"addsi3_high\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=b\")\n         (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n                  (high:SI (match_operand 2 \"\" \"\"))))]\n   \"TARGET_MACHO && !TARGET_64BIT\"\n   \"addis %0,%1,ha16(%2)\"\n-  [(set_attr \"length\" \"4\")])\n+  [(set_attr \"type\" \"add\")])\n \n (define_insn \"*add<mode>3_internal2\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -1842,7 +1842,8 @@\n    addic. %3,%1,%2\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,compare,compare,compare\")\n+  [(set_attr \"type\" \"add,compare,compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -1874,7 +1875,8 @@\n    addic. %0,%1,%2\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,compare,compare,compare\")\n+  [(set_attr \"type\" \"add,compare,compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -2000,7 +2002,8 @@\n   \"\"\n   \"@\n    subf %0,%2,%1\n-   subfic %0,%2,%1\")\n+   subfic %0,%2,%1\"\n+  [(set_attr \"type\" \"add\")])\n \n (define_insn \"\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,?y\")\n@@ -2012,7 +2015,8 @@\n   \"@\n    subf. %3,%2,%1\n    #\"\n-  [(set_attr \"type\" \"fast_compare\")\n+  [(set_attr \"type\" \"add\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -2042,7 +2046,8 @@\n   \"@\n    subf. %0,%2,%1\n    #\"\n-  [(set_attr \"type\" \"fast_compare\")\n+  [(set_attr \"type\" \"add\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -2087,7 +2092,8 @@\n   [(set (match_operand:GPR 0 \"gpc_reg_operand\" \"=r\")\n \t(neg:GPR (match_operand:GPR 1 \"gpc_reg_operand\" \"r\")))]\n   \"\"\n-  \"neg %0,%1\")\n+  \"neg %0,%1\"\n+  [(set_attr \"type\" \"add\")])\n \n (define_insn \"\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,?y\")\n@@ -2098,7 +2104,8 @@\n   \"@\n    neg. %2,%1\n    #\"\n-  [(set_attr \"type\" \"fast_compare\")\n+  [(set_attr \"type\" \"add\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -2124,7 +2131,8 @@\n   \"@\n    neg. %0,%1\n    #\"\n-  [(set_attr \"type\" \"fast_compare\")\n+  [(set_attr \"type\" \"add\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split"}, {"sha": "2c324151cf29b19e8d5dfe42c69403b6e73b9c52", "filename": "gcc/config/rs6000/rs64.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Frs64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Frs64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs64.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -47,7 +47,7 @@\n \n (define_insn_reservation \"rs64a-integer\" 1\n   (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"rs64a\"))\n   \"iu_rs64\")\n@@ -100,7 +100,7 @@\n \n (define_insn_reservation \"rs64a-compare\" 3\n   (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n-\t    (and (eq_attr \"type\" \"shift\")\n+\t    (and (eq_attr \"type\" \"add,shift\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"rs64a\"))\n   \"iu_rs64,nothing,bpu_rs64\")"}, {"sha": "cb284ff564475ac4662a276aa30e031ec12f2942", "filename": "gcc/config/rs6000/titan.md", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Ftitan.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cbb4f589777eef7dd63d5c7132642b0dfb54cfa/gcc%2Fconfig%2Frs6000%2Ftitan.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ftitan.md?ref=0cbb4f589777eef7dd63d5c7132642b0dfb54cfa", "patch": "@@ -34,7 +34,9 @@\n ;; instructions. It provides its own, dedicated result-bus, so we\n ;; don't need the titan_fxu_wb reservation to complete.\n (define_insn_reservation \"titan_fxu_adder\" 1\n-  (and (eq_attr \"type\" \"cmp,fast_compare,trap\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,trap\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"titan\"))\n   \"titan_issue,titan_fxu_sh\")\n \n@@ -72,7 +74,9 @@\n   \"titan_issue,titan_fxu_sh\")\n \n (define_insn_reservation \"titan_fxu_alu\" 1\n-  (and (eq_attr \"type\" \"integer,exts\")\n+  (and (ior (eq_attr \"type\" \"integer,exts\")\n+\t    (and (eq_attr \"type\" \"add\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"titan\"))\n   \"titan_issue,titan_fxu_sh,nothing,titan_fxu_wb\")\n "}]}