{"sha": "38636eac430e919509c98bcdea95452c65733a0b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg2MzZlYWM0MzBlOTE5NTA5Yzk4YmNkZWE5NTQ1MmM2NTczM2EwYg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2004-10-07T05:56:51Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2004-10-07T05:56:51Z"}, "message": "re PR middle-end/17835 (stage2 compiler is broken because it is built with -fomit-frame-pointer)\n\n\tPR middle-end/17835\n\t* expmed.c (expand_sdiv_pow2): Force a stack adjustment\n\tbefore tentatively building the conditional move sequence.\n\nFrom-SVN: r88661", "tree": {"sha": "da520f4e23e0ed60122e12ee2f88be721c897f5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da520f4e23e0ed60122e12ee2f88be721c897f5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38636eac430e919509c98bcdea95452c65733a0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38636eac430e919509c98bcdea95452c65733a0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38636eac430e919509c98bcdea95452c65733a0b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38636eac430e919509c98bcdea95452c65733a0b/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ae8c97546b339ab1117dc6a0ca4f23c1c0f722d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae8c97546b339ab1117dc6a0ca4f23c1c0f722d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae8c97546b339ab1117dc6a0ca4f23c1c0f722d8"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "e43edb9646b5e7ee798cdb08ad68f08a5278ddaf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38636eac430e919509c98bcdea95452c65733a0b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38636eac430e919509c98bcdea95452c65733a0b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=38636eac430e919509c98bcdea95452c65733a0b", "patch": "@@ -1,3 +1,9 @@\n+2004-10-07  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\tPR middle-end/17285\n+\t* expmed.c (expand_sdiv_pow2): Force a stack adjustment\n+\tbefore tentatively building the conditional move sequence.\n+\n 2004-10-07  Richard Sandiford  <rsandifo@redhat.com>\n \n \tPR target/16815"}, {"sha": "98981b8f24739e9c4cd4a801b2b1ce349bdcd653", "filename": "gcc/expmed.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38636eac430e919509c98bcdea95452c65733a0b/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38636eac430e919509c98bcdea95452c65733a0b/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=38636eac430e919509c98bcdea95452c65733a0b", "patch": "@@ -3305,6 +3305,11 @@ expand_sdiv_pow2 (enum machine_mode mode, rtx op0, HOST_WIDE_INT d)\n     {\n       rtx temp2;\n \n+      /* ??? emit_conditional_move forces a stack adjustment via\n+\t compare_from_rtx so, if the sequence is discarded, it will\n+\t be lost.  Do it now instead.  */\n+      do_pending_stack_adjust ();\n+\n       start_sequence ();\n       temp2 = copy_to_mode_reg (mode, op0);\n       temp = expand_binop (mode, add_optab, temp2, GEN_INT (d-1),"}]}