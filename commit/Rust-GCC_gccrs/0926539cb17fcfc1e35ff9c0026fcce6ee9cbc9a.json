{"sha": "0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDkyNjUzOWNiMTdmY2ZjMWUzNWZmOWMwMDI2ZmNjZTZlZTljYmM5YQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2014-08-26T19:20:16Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2014-08-26T19:20:16Z"}, "message": "Strengthen fields in struct sequence_stack and struct emit_status\n\ngcc/\n2014-08-26  David Malcolm  <dmalcolm@redhat.com>\n\n\t* function.h (struct sequence_stack): Strengthen fields \"first\"\n\tand \"last\" from rtx to rtx_insn *.\n\t(struct emit_status): Likewise for fields \"x_first_insn\" and\n\t\"x_last_insn\".\n\n\t* emit-rtl.h (get_insns): Remove now-redundant checked cast.\n\t(set_first_insn): Add checked cast.\n\t(get_last_insn): Remove now-redundant checked cast.\n\t(set_last_insn): Add checked cast.\n\n\t* config/m32c/m32c.c (m32c_leaf_function_p): Strengthen locals\n\t\"saved_first\" and \"saved_last\" from rtx to rtx_insn *.\n\nFrom-SVN: r214537", "tree": {"sha": "58b485026a928d9acd78535ac23a2ccb7b7078c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58b485026a928d9acd78535ac23a2ccb7b7078c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9152e0aa1b60461c043c189307d2b913279f0646", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9152e0aa1b60461c043c189307d2b913279f0646", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9152e0aa1b60461c043c189307d2b913279f0646"}], "stats": {"total": 35, "additions": 24, "deletions": 11}, "files": [{"sha": "a754f707c3f95fd5aa92dee00b15fa2fee3e1023", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "patch": "@@ -1,3 +1,18 @@\n+2014-08-26  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* function.h (struct sequence_stack): Strengthen fields \"first\"\n+\tand \"last\" from rtx to rtx_insn *.\n+\t(struct emit_status): Likewise for fields \"x_first_insn\" and\n+\t\"x_last_insn\".\n+\n+\t* emit-rtl.h (get_insns): Remove now-redundant checked cast.\n+\t(set_first_insn): Add checked cast.\n+\t(get_last_insn): Remove now-redundant checked cast.\n+\t(set_last_insn): Add checked cast.\n+\n+\t* config/m32c/m32c.c (m32c_leaf_function_p): Strengthen locals\n+\t\"saved_first\" and \"saved_last\" from rtx to rtx_insn *.\n+\n 2014-08-26  David Malcolm  <dmalcolm@redhat.com>\n \n \t* rtl.h (add_insn): Strengthen param from rtx to rtx_insn *."}, {"sha": "1954c84d0b1df9e0acab6f446fca0edb1d3c83e8", "filename": "gcc/config/m32c/m32c.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2Fconfig%2Fm32c%2Fm32c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2Fconfig%2Fm32c%2Fm32c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fm32c.c?ref=0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "patch": "@@ -4045,7 +4045,7 @@ m32c_encode_section_info (tree decl, rtx rtl, int first)\n static int\n m32c_leaf_function_p (void)\n {\n-  rtx saved_first, saved_last;\n+  rtx_insn *saved_first, *saved_last;\n   struct sequence_stack *seq;\n   int rv;\n "}, {"sha": "e2e64a213d3bc1ec617faebc8239853d166fc6c9", "filename": "gcc/emit-rtl.h", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2Femit-rtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2Femit-rtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.h?ref=0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "patch": "@@ -80,8 +80,7 @@ extern bool need_atomic_barrier_p (enum memmodel, bool);\n static inline rtx_insn *\n get_insns (void)\n {\n-  rtx insn = crtl->emit.x_first_insn;\n-  return safe_as_a <rtx_insn *> (insn);\n+  return crtl->emit.x_first_insn;\n }\n \n /* Specify a new insn as the first in the chain.  */\n@@ -90,16 +89,15 @@ static inline void\n set_first_insn (rtx insn)\n {\n   gcc_checking_assert (!insn || !PREV_INSN (insn));\n-  crtl->emit.x_first_insn = insn;\n+  crtl->emit.x_first_insn = safe_as_a <rtx_insn *> (insn);\n }\n \n /* Return the last insn emitted in current sequence or current function.  */\n \n static inline rtx_insn *\n get_last_insn (void)\n {\n-  rtx insn = crtl->emit.x_last_insn;\n-  return safe_as_a <rtx_insn *> (insn);\n+  return crtl->emit.x_last_insn;\n }\n \n /* Specify a new insn as the last in the chain.  */\n@@ -108,7 +106,7 @@ static inline void\n set_last_insn (rtx insn)\n {\n   gcc_checking_assert (!insn || !NEXT_INSN (insn));\n-  crtl->emit.x_last_insn = insn;\n+  crtl->emit.x_last_insn = safe_as_a <rtx_insn *> (insn);\n }\n \n /* Return a number larger than any instruction's uid in this function.  */"}, {"sha": "28a20f34b98914c755103826b5de546f388bd227", "filename": "gcc/function.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2Ffunction.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a/gcc%2Ffunction.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.h?ref=0926539cb17fcfc1e35ff9c0026fcce6ee9cbc9a", "patch": "@@ -34,8 +34,8 @@ along with GCC; see the file COPYING3.  If not see\n \n struct GTY(()) sequence_stack {\n   /* First and last insns in the chain of the saved sequence.  */\n-  rtx first;\n-  rtx last;\n+  rtx_insn *first;\n+  rtx_insn *last;\n   struct sequence_stack *next;\n };\n \f\n@@ -52,8 +52,8 @@ struct GTY(()) emit_status {\n \n      start_sequence saves both of these on `sequence_stack' and then starts\n      a new, nested sequence of insns.  */\n-  rtx x_first_insn;\n-  rtx x_last_insn;\n+  rtx_insn *x_first_insn;\n+  rtx_insn *x_last_insn;\n \n   /* Stack of pending (incomplete) sequences saved by `start_sequence'.\n      Each element describes one pending sequence."}]}