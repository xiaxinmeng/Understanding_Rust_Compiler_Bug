{"sha": "a360a359b784acdb53e20cbb85576b4b3662703a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTM2MGEzNTliNzg0YWNkYjUzZTIwY2JiODU1NzZiNGIzNjYyNzAzYQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@st.com", "date": "2019-09-10T08:11:46Z"}, "committer": {"name": "Christophe Lyon", "email": "clyon@gcc.gnu.org", "date": "2019-09-10T08:11:46Z"}, "message": "[ARM/FDPIC v6 23/24] [ARM] FDPIC: Implement libitm support.\n\nThe ldaddr macro in sjlj.S needs to be updated to support the FDPIC\nmodel.\n\n2019-09-10  Christophe Lyon  <christophe.lyon@st.com>\n\n\tlibitm/\n\t* config/arm/sjlj.S (ldaddr): Add FDPIC support.\n\nFrom-SVN: r275584", "tree": {"sha": "4e58bf17aa1a578eabc209918ee4b780d9cc32ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e58bf17aa1a578eabc209918ee4b780d9cc32ef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a360a359b784acdb53e20cbb85576b4b3662703a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a360a359b784acdb53e20cbb85576b4b3662703a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a360a359b784acdb53e20cbb85576b4b3662703a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a360a359b784acdb53e20cbb85576b4b3662703a/comments", "author": null, "committer": null, "parents": [{"sha": "18ab88559067266d602b43b4d594a21eddae0f8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18ab88559067266d602b43b4d594a21eddae0f8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18ab88559067266d602b43b4d594a21eddae0f8a"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "20f576887129dbd40b47823d1ac9f03b73d0c1f1", "filename": "libitm/ChangeLog", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a360a359b784acdb53e20cbb85576b4b3662703a/libitm%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a360a359b784acdb53e20cbb85576b4b3662703a/libitm%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FChangeLog?ref=a360a359b784acdb53e20cbb85576b4b3662703a", "patch": "@@ -1,7 +1,11 @@\n 2019-09-10  Christophe Lyon  <christophe.lyon@st.com>\n \n-        * configure.tgt: Handle *-*-uclinux*.\n-        * configure: Regenerate.\n+\t* config/arm/sjlj.S (ldaddr): Add FDPIC support.\n+\n+2019-09-10  Christophe Lyon  <christophe.lyon@st.com>\n+\n+\t* configure.tgt: Handle *-*-uclinux*.\n+\t* configure: Regenerate.\n \n 2019-09-06  Florian Weimer  <fweimer@redhat.com>\n "}, {"sha": "5d449645c4fdd803ed184352fc2e988e1be29322", "filename": "libitm/config/arm/sjlj.S", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a360a359b784acdb53e20cbb85576b4b3662703a/libitm%2Fconfig%2Farm%2Fsjlj.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a360a359b784acdb53e20cbb85576b4b3662703a/libitm%2Fconfig%2Farm%2Fsjlj.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Farm%2Fsjlj.S?ref=a360a359b784acdb53e20cbb85576b4b3662703a", "patch": "@@ -49,7 +49,16 @@\n \t.arch\tarmv7-m\n #endif\n \n-#if defined(HAVE_MOVT) && defined(PIC)\n+#if defined(__FDPIC__)\n+.macro ldaddr reg, addr\n+\tldr \\reg, 99f\n+\tadd \\reg, \\reg, r9\n+.subsection 1\n+\t.align\t2\n+99:\t.word\t\\addr(GOTOFF)\n+.subsection 0\n+.endm\n+#elif defined(HAVE_MOVT) && defined(PIC)\n .macro ldaddr reg, addr\n \tmovw\t\\reg, #:lower16:(\\addr - (98f + PC_OFS))\n \tmovt\t\\reg, #:upper16:(\\addr - (98f + PC_OFS))"}]}