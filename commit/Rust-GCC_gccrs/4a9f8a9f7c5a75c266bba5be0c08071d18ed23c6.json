{"sha": "4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE5ZjhhOWY3YzVhNzVjMjY2YmJhNWJlMGMwODA3MWQxOGVkMjNjNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-08-07T09:49:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-08-07T09:49:14Z"}, "message": "re PR c/72816 (ICE on x86_64-linux-gnu (tree check: expected tree that contains \u2018decl with RTL\u2019 structure, have \u2018field_decl\u2019 in set_decl_rtl, at emit-rtl.c:1282))\n\n\tPR c/72816\n\t* stor-layout.c (layout_decl): Fix up formatting.\n\t(relayout_decl): Allow DECL to be FIELD_DECL.\n\n\t* gcc.dg/pr72816.c: New test.\n\nFrom-SVN: r239218", "tree": {"sha": "2d410bd345f7b2e9308e2a8de2908598f470c7c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d410bd345f7b2e9308e2a8de2908598f470c7c3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "47e0b45f626798ceb75fac2c0ffd1d3e0b8baead", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47e0b45f626798ceb75fac2c0ffd1d3e0b8baead", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47e0b45f626798ceb75fac2c0ffd1d3e0b8baead"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "8cd9f2aecfdc7e584845a40b76bb2a7107e965c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "patch": "@@ -1,3 +1,9 @@\n+2016-08-07  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/72816\n+\t* stor-layout.c (layout_decl): Fix up formatting.\n+\t(relayout_decl): Allow DECL to be FIELD_DECL.\n+\n 2016-08-07  Alan Modra  <amodra@gmail.com>\n \n \t* config/rs6000/rs6000.md (fix_trunc<mode>si2): Fix mode of reg."}, {"sha": "62ab80457b6fd4f81b243300e5392b8d4f77a089", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "patch": "@@ -596,7 +596,7 @@ layout_decl (tree decl, unsigned int known_align)\n     return;\n \n   gcc_assert (code == VAR_DECL || code == PARM_DECL || code == RESULT_DECL\n-\t      || code == TYPE_DECL ||code == FIELD_DECL);\n+\t      || code == TYPE_DECL || code == FIELD_DECL);\n \n   rtl = DECL_RTL_IF_SET (decl);\n \n@@ -768,8 +768,8 @@ layout_decl (tree decl, unsigned int known_align)\n     }\n }\n \n-/* Given a VAR_DECL, PARM_DECL or RESULT_DECL, clears the results of\n-   a previous call to layout_decl and calls it again.  */\n+/* Given a VAR_DECL, PARM_DECL, RESULT_DECL, or FIELD_DECL, clears the\n+   results of a previous call to layout_decl and calls it again.  */\n \n void\n relayout_decl (tree decl)\n@@ -778,7 +778,8 @@ relayout_decl (tree decl)\n   DECL_MODE (decl) = VOIDmode;\n   if (!DECL_USER_ALIGN (decl))\n     SET_DECL_ALIGN (decl, 0);\n-  SET_DECL_RTL (decl, 0);\n+  if (DECL_RTL_SET_P (decl))\n+    SET_DECL_RTL (decl, 0);\n \n   layout_decl (decl, 0);\n }"}, {"sha": "edd4b1cab9f5e2e9b5ead41fdd51be61f066fbab", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "patch": "@@ -1,3 +1,8 @@\n+2016-08-07  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/72816\n+\t* gcc.dg/pr72816.c: New test.\n+\n 2016-08-06  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* g++.dg/conversion/pr16333.C: Adjust dg-error regexp."}, {"sha": "75b8ba182adbbf4af3dafc0be34e00d35c11560b", "filename": "gcc/testsuite/gcc.dg/pr72816.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr72816.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr72816.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr72816.c?ref=4a9f8a9f7c5a75c266bba5be0c08071d18ed23c6", "patch": "@@ -0,0 +1,9 @@\n+/* PR c/72816 */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=gnu11\" } */\n+\n+typedef const int A[];\n+struct S {\n+  int a;\n+  A b;\t/* { dg-error \"array size missing\" } */\n+};"}]}