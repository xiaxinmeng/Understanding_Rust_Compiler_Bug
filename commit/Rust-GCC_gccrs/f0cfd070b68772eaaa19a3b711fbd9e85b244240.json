{"sha": "f0cfd070b68772eaaa19a3b711fbd9e85b244240", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjBjZmQwNzBiNjg3NzJlYWFhMTlhM2I3MTFmYmQ5ZTg1YjI0NDI0MA==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2021-09-03T15:53:13Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2021-09-13T10:26:48Z"}, "message": "arm: expand handling of movmisalign for DImode [PR102125]\n\nDImode is currently handled only for machines with vector modes\nenabled, but this is unduly restrictive and is generally better done\nin core registers.\n\ngcc/ChangeLog:\n\n\tPR target/102125\n\t* config/arm/arm.md (movmisaligndi): New define_expand.\n\t* config/arm/vec-common.md (movmisalign<mode>): Iterate over VDQ mode.", "tree": {"sha": "05f3449d545f645847aa73b935be4b66dba4d68d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05f3449d545f645847aa73b935be4b66dba4d68d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f0cfd070b68772eaaa19a3b711fbd9e85b244240", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0cfd070b68772eaaa19a3b711fbd9e85b244240", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0cfd070b68772eaaa19a3b711fbd9e85b244240", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0cfd070b68772eaaa19a3b711fbd9e85b244240/comments", "author": null, "committer": null, "parents": [{"sha": "408e8b906632f215f6652b8851bba612cde07c25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/408e8b906632f215f6652b8851bba612cde07c25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/408e8b906632f215f6652b8851bba612cde07c25"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "4adc976b8b6756dbe1d4887818038dcab99af2a4", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0cfd070b68772eaaa19a3b711fbd9e85b244240/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0cfd070b68772eaaa19a3b711fbd9e85b244240/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=f0cfd070b68772eaaa19a3b711fbd9e85b244240", "patch": "@@ -12617,6 +12617,22 @@\n   }\"\n )\n \n+;; movmisalign for DImode\n+(define_expand \"movmisaligndi\"\n+  [(match_operand:DI 0 \"general_operand\")\n+   (match_operand:DI 1 \"general_operand\")]\n+  \"unaligned_access\"\n+{\n+  rtx lo_op0 = gen_lowpart (SImode, operands[0]);\n+  rtx lo_op1 = gen_lowpart (SImode, operands[1]);\n+  rtx hi_op0 = gen_highpart_mode (SImode, DImode, operands[0]);\n+  rtx hi_op1 = gen_highpart_mode (SImode, DImode, operands[1]);\n+\n+  emit_insn (gen_movmisalignsi (lo_op0, lo_op1));\n+  emit_insn (gen_movmisalignsi (hi_op0, hi_op1));\n+  DONE;\n+})\n+\n ;; movmisalign patterns for HImode and SImode.\n (define_expand \"movmisalign<mode>\"\n   [(match_operand:HSI 0 \"general_operand\")"}, {"sha": "e71d9b3811fde62159f5c21944fef9fe3f97b4bd", "filename": "gcc/config/arm/vec-common.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0cfd070b68772eaaa19a3b711fbd9e85b244240/gcc%2Fconfig%2Farm%2Fvec-common.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0cfd070b68772eaaa19a3b711fbd9e85b244240/gcc%2Fconfig%2Farm%2Fvec-common.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fvec-common.md?ref=f0cfd070b68772eaaa19a3b711fbd9e85b244240", "patch": "@@ -281,8 +281,8 @@\n })\n \n (define_expand \"movmisalign<mode>\"\n- [(set (match_operand:VDQX 0 \"neon_perm_struct_or_reg_operand\")\n-\t(unspec:VDQX [(match_operand:VDQX 1 \"neon_perm_struct_or_reg_operand\")]\n+ [(set (match_operand:VDQ 0 \"neon_perm_struct_or_reg_operand\")\n+\t(unspec:VDQ [(match_operand:VDQ 1 \"neon_perm_struct_or_reg_operand\")]\n \t UNSPEC_MISALIGNED_ACCESS))]\n  \"ARM_HAVE_<MODE>_LDST && !BYTES_BIG_ENDIAN\n   && unaligned_access && !TARGET_REALLY_IWMMXT\""}]}