{"sha": "bf18d0315ade835286d0c788d669c49d434fb1f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmYxOGQwMzE1YWRlODM1Mjg2ZDBjNzg4ZDY2OWM0OWQ0MzRmYjFmNQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1995-03-01T20:30:14Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1995-03-01T20:30:14Z"}, "message": "Clone unwind_function for powerpc\n\nFrom-SVN: r9103", "tree": {"sha": "7aa1dd831c440632d40a33266751c438c949ec0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7aa1dd831c440632d40a33266751c438c949ec0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf18d0315ade835286d0c788d669c49d434fb1f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf18d0315ade835286d0c788d669c49d434fb1f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf18d0315ade835286d0c788d669c49d434fb1f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf18d0315ade835286d0c788d669c49d434fb1f5/comments", "author": null, "committer": null, "parents": [{"sha": "b099377f9e59ecee866f43f2be943b8751769039", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b099377f9e59ecee866f43f2be943b8751769039", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b099377f9e59ecee866f43f2be943b8751769039"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "39598efb038a39f8a102178c3ee8a09340fdd0d9", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf18d0315ade835286d0c788d669c49d434fb1f5/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf18d0315ade835286d0c788d669c49d434fb1f5/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=bf18d0315ade835286d0c788d669c49d434fb1f5", "patch": "@@ -2298,7 +2298,25 @@ __unwind_function(void *ptr)\n   asm(\"# br\");\n   asm(\"mtctr 3;bctr # b 3\");\n }\n-#endif\n+#endif /* rs6000 */\n+\n+#if #machine(powerpc)\n+__unwind_function(void *ptr)\n+{\n+  asm(\"mr 31,1\");\n+  asm(\"lwz 1,0(1)\");\n+  asm(\"lwz 31,-4(1)\");\n+  asm(\"# br\");\n+\n+  asm(\"mr 31,1\");\n+  asm(\"lwz 1,0(1)\");\n+  /* use 31 as a scratch register to restore the link register. */\n+  asm(\"lwz 31, 8(1);mtlr 31 # l lr,8(1)\");\n+  asm(\"lwz 31,-4(1)\");\n+  asm(\"# br\");\n+  asm(\"mtctr 3;bctr # b 3\");\n+}\n+#endif /* powerpc */\n #endif /* L_eh */\n \f\n #ifdef L_pure"}]}