{"sha": "c517fc92b5dc6e19712c25bc13b73b5ab760ea01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzUxN2ZjOTJiNWRjNmUxOTcxMmMyNWJjMTNiNzNiNWFiNzYwZWEwMQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-05-24T01:42:22Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-05-24T01:42:22Z"}, "message": "rtti.c: Include tm_p.h\n\n\n\t* rtti.c: Include tm_p.h\n\t(emit_tinfo_decl): Force RTTI data to be aligned to required\n\tABI alignment only.\n\nFrom-SVN: r210887", "tree": {"sha": "9a645ca6b02bcb5e4345eddab35afba6b328d966", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9a645ca6b02bcb5e4345eddab35afba6b328d966"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c517fc92b5dc6e19712c25bc13b73b5ab760ea01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c517fc92b5dc6e19712c25bc13b73b5ab760ea01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c517fc92b5dc6e19712c25bc13b73b5ab760ea01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c517fc92b5dc6e19712c25bc13b73b5ab760ea01/comments", "author": null, "committer": null, "parents": [{"sha": "8ce8d98e74b3c9e8a03443a936624f46f00e5cde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ce8d98e74b3c9e8a03443a936624f46f00e5cde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ce8d98e74b3c9e8a03443a936624f46f00e5cde"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "2cfc428e466e9e8d1e19073f4fc76d849dc47d9c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c517fc92b5dc6e19712c25bc13b73b5ab760ea01/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c517fc92b5dc6e19712c25bc13b73b5ab760ea01/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c517fc92b5dc6e19712c25bc13b73b5ab760ea01", "patch": "@@ -1,3 +1,9 @@\n+2014-05-23  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* rtti.c: Include tm_p.h\n+\t(emit_tinfo_decl): Force RTTI data to be aligned to required\n+\tABI alignment only.\n+\n 2014-05-23  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* class.c (build_vtable): Align vtables to TARGET_VTABLE_ENTRY_ALIGN"}, {"sha": "b665a8d245f47f35ef45b0acaff02c8ce5d7cdc7", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c517fc92b5dc6e19712c25bc13b73b5ab760ea01/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c517fc92b5dc6e19712c25bc13b73b5ab760ea01/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=c517fc92b5dc6e19712c25bc13b73b5ab760ea01", "patch": "@@ -24,6 +24,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"coretypes.h\"\n #include \"tm.h\"\n #include \"tree.h\"\n+#include \"tm_p.h\"\n #include \"stringpool.h\"\n #include \"stor-layout.h\"\n #include \"cp-tree.h\"\n@@ -1596,6 +1597,12 @@ emit_tinfo_decl (tree decl)\n       DECL_INITIAL (decl) = init;\n       mark_used (decl);\n       cp_finish_decl (decl, init, false, NULL_TREE, 0);\n+      /* Avoid targets optionally bumping up the alignment to improve\n+\t vector instruction accesses, tinfo are never accessed this way.  */\n+#ifdef DATA_ABI_ALIGNMENT\n+      DECL_ALIGN (decl) = DATA_ABI_ALIGNMENT (decl, TYPE_ALIGN (TREE_TYPE (decl)));\n+      DECL_USER_ALIGN (decl) = true;\n+#endif\n       return true;\n     }\n   else"}]}