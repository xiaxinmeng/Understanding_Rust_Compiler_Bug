{"sha": "db87ec0b581eb8e80de0c02486fd97b7d643665b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI4N2VjMGI1ODFlYjhlODBkZTBjMDI0ODZmZDk3YjdkNjQzNjY1Yg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1997-09-10T23:34:58Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-09-10T23:34:58Z"}, "message": "Clean up patches for delta88 nested function support.\n\n\t* m88k/m88k.c (struct option): Rename to struct options.\n\t* m88k/dolph.h (INITIALIZE_TRAMPOLINE): Delete here.\n\t* m88k/sysv3.h (INITIALIZE_TRAMPOLINE): Delete ifdef and comments.\n\t* libgcc2.c (__enable_execute_stack): Check for __sysV88__ not\n\t__DOLPHIN__ or sysV88.\n\nFrom-SVN: r15393", "tree": {"sha": "d57d3bde3083c16a6fbe7d041a1830314597566f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d57d3bde3083c16a6fbe7d041a1830314597566f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db87ec0b581eb8e80de0c02486fd97b7d643665b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db87ec0b581eb8e80de0c02486fd97b7d643665b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db87ec0b581eb8e80de0c02486fd97b7d643665b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db87ec0b581eb8e80de0c02486fd97b7d643665b/comments", "author": null, "committer": null, "parents": [{"sha": "dc3fce90205e2da23b404eb215e2807307cc531e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc3fce90205e2da23b404eb215e2807307cc531e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc3fce90205e2da23b404eb215e2807307cc531e"}], "stats": {"total": 46, "additions": 18, "deletions": 28}, "files": [{"sha": "8cedf20d825a81d704852fcc5d3361d3970cb35f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=db87ec0b581eb8e80de0c02486fd97b7d643665b", "patch": "@@ -1,3 +1,11 @@\n+Wed Sep 10 16:01:15 1997  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* m88k/m88k.c (struct option): Rename to struct options.\n+\t* m88k/dolph.h (INITIALIZE_TRAMPOLINE): Delete here.\n+\t* m88k/sysv3.h (INITIALIZE_TRAMPOLINE): Delete ifdef and comments.\n+\t* libgcc2.c (__enable_execute_stack): Check for __sysV88__ not\n+\t__DOLPHIN__ or sysV88.\n+\n Wed Sep 10 16:16:07 1997  Richard Kenner (kenner@vlsi1.ultra.nyu.edu)\n \n \t* Makefile.in (LN): Add new symbol.  "}, {"sha": "1ebeaf76cdbafeb00f2c7227bf35850247fc2f16", "filename": "gcc/config/m88k/dolph.h", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Fconfig%2Fm88k%2Fdolph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Fconfig%2Fm88k%2Fdolph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fdolph.h?ref=db87ec0b581eb8e80de0c02486fd97b7d643665b", "patch": "@@ -41,14 +41,3 @@ Boston, MA 02111-1307, USA.  */\n \n #undef CPU_DEFAULT\n #define CPU_DEFAULT MASK_88000\n-\n-#undef INITIALIZE_TRAMPOLINE \n-#define INITIALIZE_TRAMPOLINE(TRAMP, FNADDR, CXT)\t\t\t\\\n-{\t\t\t\t\t\t\t\t\t\\\n-  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 40)), FNADDR); \\\n-  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 36)), CXT); \\\n-  emit_call_insn (gen_call( gen_rtx (MEM, SImode,\t\t\t\\\n-\t\t\t\t     gen_rtx(SYMBOL_REF,Pmode,\t\t\\\n-\t\t\t\t\t     \"__enable_execute_stack\")), \\\n-\t\t\t   const0_rtx));\t\t\t\t\\\n-}"}, {"sha": "f8694615b475b281826295147ccd1a352671a58b", "filename": "gcc/config/m88k/m88k.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Fconfig%2Fm88k%2Fm88k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Fconfig%2Fm88k%2Fm88k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fm88k.c?ref=db87ec0b581eb8e80de0c02486fd97b7d643665b", "patch": "@@ -1479,7 +1479,7 @@ pc_or_label_ref (op, mode)\n \f\n /* Output to FILE the start of the assembler file.  */\n \n-struct option\n+struct options\n {\n   char *string;\n   int *variable;\n@@ -1510,8 +1510,8 @@ static void\n output_options (file, f_options, f_len, W_options, W_len,\n \t\tpos, max, sep, indent, term)\n      FILE *file;\n-     struct option *f_options;\n-     struct option *W_options;\n+     struct options *f_options;\n+     struct options *W_options;\n      int f_len, W_len;\n      int pos;\n      int max;\n@@ -1559,8 +1559,8 @@ output_options (file, f_options, f_len, W_options, W_len,\n void\n output_file_start (file, f_options, f_len, W_options, W_len)\n      FILE *file;\n-     struct option *f_options;\n-     struct option *W_options;\n+     struct options *f_options;\n+     struct options *W_options;\n      int f_len, W_len;\n {\n   register int pos;"}, {"sha": "7fe4f9d3be67f47bbb4d3703b00fabeecd3d0e56", "filename": "gcc/config/m88k/sysv3.h", "status": "modified", "additions": 3, "deletions": 10, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Fconfig%2Fm88k%2Fsysv3.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Fconfig%2Fm88k%2Fsysv3.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fsysv3.h?ref=db87ec0b581eb8e80de0c02486fd97b7d643665b", "patch": "@@ -138,20 +138,13 @@ do {\t\t\t\t\t\t\t\t\t\\\n \t__DTOR_LIST__[i] ();\t\t\t\\\n   } while (0)\t\t\t\t\t\n \n-#ifdef sysV88\n-/* manfred@s-direktnet.de: Re-define INITIALIZE_TRAMPOLINE to additionally call\n-   __enable_execute_stack.\n-   I don't actually have a clue why nobody else than sysV88 and __DOLPHIN__\n-   needs to call this; perhaps they didn't ever run the c-torture tests\n-   getting segmentations violations and/or bus errors with nested functions.  */\n #undef INITIALIZE_TRAMPOLINE \n #define INITIALIZE_TRAMPOLINE(TRAMP, FNADDR, CXT)\t\t\t\\\n {\t\t\t\t\t\t\t\t\t\\\n   emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 40)), FNADDR); \\\n   emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 36)), CXT); \\\n   emit_call_insn (gen_call (gen_rtx (MEM, SImode,\t\t\t\\\n-\t\t\t    gen_rtx (SYMBOL_REF, Pmode,\t\t\t\\\n-\t\t\t\t     \"__enable_execute_stack\")),\t\\\n-\t\t  const0_rtx));\t\t\t\t\t\t\\\n+\t\t\t\t     gen_rtx (SYMBOL_REF, Pmode,\t\\\n+\t\t\t\t\t     \"__enable_execute_stack\")), \\\n+\t\t\t   const0_rtx));\t\t\t\t\\\n }\n-#endif"}, {"sha": "0e9252e12a3900fb17e7ec608746600b4533734c", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db87ec0b581eb8e80de0c02486fd97b7d643665b/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=db87ec0b581eb8e80de0c02486fd97b7d643665b", "patch": "@@ -2827,7 +2827,7 @@ __enable_execute_stack ()\n }\n #endif /* __convex__ */\n \n-#if defined (__DOLPHIN__) || defined (sysV88)\n+#ifdef __sysV88__\n \n /* Modified from the convex -code above.  */\n \n@@ -2857,7 +2857,7 @@ __enable_execute_stack ()\n   errno=save_errno;\n }\n \n-#endif /* __DOLPHIN__ or sysV88 */\n+#endif /* __sysV88__ */\n \n #ifdef __pyr__\n "}]}