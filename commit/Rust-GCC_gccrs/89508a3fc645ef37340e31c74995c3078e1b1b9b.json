{"sha": "89508a3fc645ef37340e31c74995c3078e1b1b9b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODk1MDhhM2ZjNjQ1ZWYzNzM0MGUzMWM3NDk5NWMzMDc4ZTFiMWI5Yg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-01-11T23:41:04Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-01-11T23:41:04Z"}, "message": "re PR fortran/35031 (ELEMENTAL procedure with BIND(C))\n\n2019-01-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/35031\n\t* decl.c (gfc_match_entry): Check for F2018:C1546.  Fix nearby\n\tmis-indentation.\n \n2019-01-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/35031\n\t* gfortran.dg/pr35031.f90: new test.\n\nFrom-SVN: r267864", "tree": {"sha": "0e1a3fc3e9ba1e6c9ce192f289548c709d34c571", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e1a3fc3e9ba1e6c9ce192f289548c709d34c571"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/89508a3fc645ef37340e31c74995c3078e1b1b9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89508a3fc645ef37340e31c74995c3078e1b1b9b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89508a3fc645ef37340e31c74995c3078e1b1b9b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89508a3fc645ef37340e31c74995c3078e1b1b9b/comments", "author": null, "committer": null, "parents": [{"sha": "e334d7a702b21feafc8420495f7e91f22336e101", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e334d7a702b21feafc8420495f7e91f22336e101", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e334d7a702b21feafc8420495f7e91f22336e101"}], "stats": {"total": 37, "additions": 34, "deletions": 3}, "files": [{"sha": "b05c594d0775292eebab8ce395a2000ed50dd91b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=89508a3fc645ef37340e31c74995c3078e1b1b9b", "patch": "@@ -1,3 +1,9 @@\n+2019-01-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/35031\n+\t* decl.c (gfc_match_entry): Check for F2018:C1546.  Fix nearby\n+\tmis-indentation.\n+\n 2019-01-11  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/85956"}, {"sha": "3314e176881e422ab951e6fa51bd8ec061eb1461", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=89508a3fc645ef37340e31c74995c3078e1b1b9b", "patch": "@@ -7431,9 +7431,11 @@ gfc_match_entry (void)\n \t      gfc_error (\"Missing required parentheses before BIND(C) at %C\");\n \t      return MATCH_ERROR;\n \t    }\n-\t    if (!gfc_add_is_bind_c (&(entry->attr), entry->name,\n-\t\t\t\t    &(entry->declared_at), 1))\n-\t      return MATCH_ERROR;\n+\n+\t  if (!gfc_add_is_bind_c (&(entry->attr), entry->name,\n+\t\t\t\t  &(entry->declared_at), 1))\n+\t    return MATCH_ERROR;\n+\t\n \t}\n \n       if (!gfc_current_ns->parent\n@@ -7517,6 +7519,14 @@ gfc_match_entry (void)\n       return MATCH_ERROR;\n     }\n \n+  /* F2018:C1546 An elemental procedure shall not have the BIND attribute.  */\n+  if (proc->attr.elemental && entry->attr.is_bind_c)\n+    {\n+      gfc_error (\"ENTRY statement at %L with BIND(C) prohibited in an \"\n+\t\t \"elemental procedure\", &entry->declared_at);\n+      return MATCH_ERROR;\n+    }\n+\n   entry->attr.recursive = proc->attr.recursive;\n   entry->attr.elemental = proc->attr.elemental;\n   entry->attr.pure = proc->attr.pure;"}, {"sha": "8b8ebc8156d0369889d258ec7df6776b7070f496", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=89508a3fc645ef37340e31c74995c3078e1b1b9b", "patch": "@@ -1,3 +1,8 @@\n+2019-01-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/35031\n+\t* gfortran.dg/pr35031.f90: new test.\n+\n 2019-01-11  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/88692, c++/87882 - -Wredundant-move false positive with *this."}, {"sha": "a4d78406006409761bcb299832e5484499ff843b", "filename": "gcc/testsuite/gfortran.dg/pr35031.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr35031.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89508a3fc645ef37340e31c74995c3078e1b1b9b/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr35031.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr35031.f90?ref=89508a3fc645ef37340e31c74995c3078e1b1b9b", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+elemental subroutine sub2(x)\n+   integer, intent(in) :: x\n+   entry sub2_c(x) bind(c)    ! { dg-error \"prohibited in an elemental\" }\n+end subroutine sub2\n+\n+elemental function func2(x)\n+   integer, intent(in) :: x\n+   entry func2_c(x) bind(c)   ! { dg-error \"prohibited in an elemental\" }\n+end function func2"}]}