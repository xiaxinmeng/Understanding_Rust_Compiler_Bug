{"sha": "e70b1b7788ab76c22634d4e0e3d65ab7e55d667a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTcwYjFiNzc4OGFiNzZjMjI2MzRkNGUwZTNkNjVhYjdlNTVkNjY3YQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2003-05-01T23:20:33Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-05-01T23:20:33Z"}, "message": "std_sstream.h (str()): Revert the best of the previous 'improvement'...\n\n2003-05-01  Paolo Carlini  <pcarlini@unitus.it>\n\n\t* include/std/std_sstream.h (str()): Revert the best of the\n\tprevious 'improvement', incorrect due to the COW nature of\n\tv3 basic_string; simplify.\n\nFrom-SVN: r66357", "tree": {"sha": "d907659c8892ebec5c10eae41dc42c5346e76557", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d907659c8892ebec5c10eae41dc42c5346e76557"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a/comments", "author": null, "committer": null, "parents": [{"sha": "f4731b64d269a2c16727a3db9da868707e0cbb14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4731b64d269a2c16727a3db9da868707e0cbb14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4731b64d269a2c16727a3db9da868707e0cbb14"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "cd55a6b5e018102a1a10f9183ddec93033e6d079", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=e70b1b7788ab76c22634d4e0e3d65ab7e55d667a", "patch": "@@ -1,3 +1,9 @@\n+2003-05-01  Paolo Carlini  <pcarlini@unitus.it>\n+\n+\t* include/std/std_sstream.h (str()): Revert the best of the\n+\tprevious 'improvement', incorrect due to the COW nature of\n+\tv3 basic_string; simplify.\n+\n 2003-05-01  Paolo Carlini  <pcarlini@unitus.it>\n \n \t* include/bits/streambuf.tcc (__copy_streambufs): Adjust the"}, {"sha": "1d9a54970c5f279bdd088b8818f6a4d7ed804250", "filename": "libstdc++-v3/include/std/std_sstream.h", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_sstream.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e70b1b7788ab76c22634d4e0e3d65ab7e55d667a/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_sstream.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_sstream.h?ref=e70b1b7788ab76c22634d4e0e3d65ab7e55d667a", "patch": "@@ -136,14 +136,9 @@ namespace std\n \t__string_type __ret = _M_string;\n \tif (this->_M_mode & ios_base::out)\n \t  {\n-\t    // This is the deal: _M_string.size() is a value that\n-\t    // represents the size of the initial string used to\n-\t    // created the buffer, and may not be the correct size of\n-\t    // the current stringbuf internal buffer.\n-\t    const __size_type __len = _M_string.size();\n \t    const __size_type __nlen = this->_M_out_lim\n-\t                               - this->_M_out_beg;\n-\t    if (__nlen > __len)\n+                                       - this->_M_out_beg;\n+\t    if (__nlen)\n \t      __ret = __string_type(this->_M_out_beg, \n \t\t\t\t    this->_M_out_beg + __nlen);\n \t  }"}]}