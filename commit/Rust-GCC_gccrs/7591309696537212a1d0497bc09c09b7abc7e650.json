{"sha": "7591309696537212a1d0497bc09c09b7abc7e650", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU5MTMwOTY5NjUzNzIxMmExZDA0OTdiYzA5YzA5YjdhYmM3ZTY1MA==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.ibm.com", "date": "2021-07-13T03:50:38Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@linux.ibm.com", "date": "2021-07-13T03:50:38Z"}, "message": "Change rs6000_const_f32_to_i32 return type.\n\nThe function rs6000_const_f32_to_i32 called REAL_VALUE_TO_TARGET_SINGLE\nwith a long long type and returns it.  This patch changes the type to long\nwhich is the proper type for REAL_VALUE_TO_TARGET_SINGLE.\n\n2021-07-12  Michael Meissner  <meissner@linux.ibm.com>\n\ngcc/\n\t* config/rs6000/altivec.md (xxspltiw_v4sf): Change local variable\n\tvalue to to long.\n\t* config/rs6000/rs6000-protos.h (rs6000_const_f32_to_i32): Change\n\treturn type to long.\n\t* config/rs6000/rs6000.c (rs6000_const_f32_to_i32): Change return\n\ttype to long.", "tree": {"sha": "347d767253f5da708291c5e911f40fc6dabe9a94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/347d767253f5da708291c5e911f40fc6dabe9a94"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7591309696537212a1d0497bc09c09b7abc7e650", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7591309696537212a1d0497bc09c09b7abc7e650", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7591309696537212a1d0497bc09c09b7abc7e650", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7591309696537212a1d0497bc09c09b7abc7e650/comments", "author": null, "committer": null, "parents": [{"sha": "07bcbf9cc2a031ba5abcff368b452bfc99bf707e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07bcbf9cc2a031ba5abcff368b452bfc99bf707e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07bcbf9cc2a031ba5abcff368b452bfc99bf707e"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "a20d6ac16b54b951541e706cf0a3442a5a72da94", "filename": "gcc/config/rs6000/altivec.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7591309696537212a1d0497bc09c09b7abc7e650/gcc%2Fconfig%2Frs6000%2Faltivec.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7591309696537212a1d0497bc09c09b7abc7e650/gcc%2Fconfig%2Frs6000%2Faltivec.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faltivec.md?ref=7591309696537212a1d0497bc09c09b7abc7e650", "patch": "@@ -863,7 +863,7 @@\n \t\t     UNSPEC_XXSPLTIW))]\n  \"TARGET_POWER10\"\n {\n-  long long value = rs6000_const_f32_to_i32 (operands[1]);\n+  long value = rs6000_const_f32_to_i32 (operands[1]);\n   emit_insn (gen_xxspltiw_v4sf_inst (operands[0], GEN_INT (value)));\n   DONE;\n })"}, {"sha": "94bf961c6b7815fa64b79979695efa574d162e8e", "filename": "gcc/config/rs6000/rs6000-protos.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7591309696537212a1d0497bc09c09b7abc7e650/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7591309696537212a1d0497bc09c09b7abc7e650/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h?ref=7591309696537212a1d0497bc09c09b7abc7e650", "patch": "@@ -281,7 +281,7 @@ extern void rs6000_asm_output_dwarf_pcrel (FILE *file, int size,\n \t\t\t\t\t   const char *label);\n extern void rs6000_asm_output_dwarf_datarel (FILE *file, int size,\n \t\t\t\t\t     const char *label);\n-extern long long rs6000_const_f32_to_i32 (rtx operand);\n+extern long rs6000_const_f32_to_i32 (rtx operand);\n \n /* Declare functions in rs6000-c.c */\n "}, {"sha": "de11de5e0796264d7375ee937314abc849e9db08", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7591309696537212a1d0497bc09c09b7abc7e650/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7591309696537212a1d0497bc09c09b7abc7e650/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=7591309696537212a1d0497bc09c09b7abc7e650", "patch": "@@ -27936,10 +27936,12 @@ rs6000_invalid_conversion (const_tree fromtype, const_tree totype)\n   return NULL;\n }\n \n-long long\n+/* Convert a SFmode constant to the integer bit pattern.  */\n+\n+long\n rs6000_const_f32_to_i32 (rtx operand)\n {\n-  long long value;\n+  long value;\n   const struct real_value *rv = CONST_DOUBLE_REAL_VALUE (operand);\n \n   gcc_assert (GET_MODE (operand) == SFmode);"}]}