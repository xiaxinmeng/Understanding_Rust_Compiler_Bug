{"sha": "8f1dbf8d00452dd55f764e6df7ed1a7209164600", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGYxZGJmOGQwMDQ1MmRkNTVmNzY0ZTZkZjdlZDFhNzIwOTE2NDYwMA==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2013-05-06T00:20:29Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2013-05-06T00:20:29Z"}, "message": "sysv4.h (ENDIAN_SELECT): Define, extracted from\n\n\t* config/rs6000/sysv4.h (ENDIAN_SELECT): Define, extracted from\n\t(ASM_SPEC): ..here.  Emit DEFAULT_ASM_ENDIAN too.\n\t(DEFAULT_ASM_ENDIAN): Define.\n\t(CC1_SPEC, LINK_TARGET_SPEC): Use ENDIAN_SELECT.\n\t* config/rs6000/linux64.h (ASM_SPEC32): Remove endian options.\n\tUpdate -K PIC clause from sysv4.h.\n\t(ASM_SPEC_COMMON): Use ENDIAN_SELECT.\n\t(LINK_OS_LINUX_EMUL32, LINK_OS_LINUX_EMUL64): Likewise.\n\nFrom-SVN: r198619", "tree": {"sha": "2453376f31ef7cf736d64cad642781965b6434c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2453376f31ef7cf736d64cad642781965b6434c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f1dbf8d00452dd55f764e6df7ed1a7209164600", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f1dbf8d00452dd55f764e6df7ed1a7209164600", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f1dbf8d00452dd55f764e6df7ed1a7209164600", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f1dbf8d00452dd55f764e6df7ed1a7209164600/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "54890767f6b7de76a56e7cc6bfa2255d64bf9857", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54890767f6b7de76a56e7cc6bfa2255d64bf9857", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54890767f6b7de76a56e7cc6bfa2255d64bf9857"}], "stats": {"total": 90, "additions": 51, "deletions": 39}, "files": [{"sha": "5c790a177a998ba9ab5e40a4e50013cbdad738e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f1dbf8d00452dd55f764e6df7ed1a7209164600/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f1dbf8d00452dd55f764e6df7ed1a7209164600/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8f1dbf8d00452dd55f764e6df7ed1a7209164600", "patch": "@@ -1,3 +1,14 @@\n+2013-05-06  Alan Modra  <amodra@gmail.com>\n+\n+\t* config/rs6000/sysv4.h (ENDIAN_SELECT): Define, extracted from\n+\t(ASM_SPEC): ..here.  Emit DEFAULT_ASM_ENDIAN too.\n+\t(DEFAULT_ASM_ENDIAN): Define.\n+\t(CC1_SPEC, LINK_TARGET_SPEC): Use ENDIAN_SELECT.\n+\t* config/rs6000/linux64.h (ASM_SPEC32): Remove endian options.\n+\tUpdate -K PIC clause from sysv4.h.\n+\t(ASM_SPEC_COMMON): Use ENDIAN_SELECT.\n+\t(LINK_OS_LINUX_EMUL32, LINK_OS_LINUX_EMUL64): Likewise.\n+\n 2013-05-06  Alan Modra  <amodra@gmail.com>\n \n \t* config/rs6000/rs6000.md (bswapdi 2nd splitter): Don't swap words"}, {"sha": "4129eb8228bbec91d4ff523dd8548be4dd149da1", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 16, "deletions": 14, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f1dbf8d00452dd55f764e6df7ed1a7209164600/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f1dbf8d00452dd55f764e6df7ed1a7209164600/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=8f1dbf8d00452dd55f764e6df7ed1a7209164600", "patch": "@@ -180,20 +180,14 @@ extern int dot_symbols;\n #endif\n \n #define ASM_SPEC32 \"-a32 \\\n-%{mrelocatable} %{mrelocatable-lib} %{fpic:-K PIC} %{fPIC:-K PIC} \\\n-%{memb} %{!memb: %{msdata=eabi: -memb}} \\\n-%{!mlittle: %{!mlittle-endian: %{!mbig: %{!mbig-endian: \\\n-    %{mcall-freebsd: -mbig} \\\n-    %{mcall-i960-old: -mlittle} \\\n-    %{mcall-linux: -mbig} \\\n-    %{mcall-netbsd: -mbig} \\\n-}}}}\"\n+%{mrelocatable} %{mrelocatable-lib} %{fpic|fpie|fPIC|fPIE:-K PIC} \\\n+%{memb|msdata=eabi: -memb}\"\n \n #define ASM_SPEC64 \"-a64\"\n \n #define ASM_SPEC_COMMON \"%(asm_cpu) \\\n-%{,assembler|,assembler-with-cpp: %{mregnames} %{mno-regnames}} \\\n-%{mlittle} %{mlittle-endian} %{mbig} %{mbig-endian}\"\n+%{,assembler|,assembler-with-cpp: %{mregnames} %{mno-regnames}}\" \\\n+  ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n \n #undef\tSUBSUBTARGET_EXTRA_SPECS\n #define SUBSUBTARGET_EXTRA_SPECS \\\n@@ -373,11 +367,19 @@ extern int dot_symbols;\n   CHOOSE_DYNAMIC_LINKER (GLIBC_DYNAMIC_LINKER64, UCLIBC_DYNAMIC_LINKER64)\n \n #if (TARGET_DEFAULT & MASK_LITTLE_ENDIAN)\n-#define LINK_OS_LINUX_EMUL32 \"%{!mbig: %{!mbig-endian: -m elf32lppclinux}}%{mbig|mbig-endian: -m elf32ppclinux}\"\n-#define LINK_OS_LINUX_EMUL64 \"%{!mbig: %{!mbig-endian: -m elf64lppc}}%{mbig|mbig-endian: -m elf64ppc}\"\n+#define LINK_OS_LINUX_EMUL32 ENDIAN_SELECT(\" -m elf32ppclinux\",\t\t\\\n+\t\t\t\t\t   \" -m elf32lppclinux\",\t\\\n+\t\t\t\t\t   \" -m elf32lppclinux\")\n+#define LINK_OS_LINUX_EMUL64 ENDIAN_SELECT(\" -m elf64ppc\",\t\t\\\n+\t\t\t\t\t   \" -m elf64lppc\",\t\t\\\n+\t\t\t\t\t   \" -m elf64lppc\")\n #else\n-#define LINK_OS_LINUX_EMUL32 \"%{!mlittle: %{!mlittle-endian: -m elf32ppclinux}}%{mlittle|mlittle-endian: -m elf32lppclinux}\"\n-#define LINK_OS_LINUX_EMUL64 \"%{!mlittle: %{!mlittle-endian: -m elf64ppc}}%{mlittle|mlittle-endian: -m elf64lppc}\"\n+#define LINK_OS_LINUX_EMUL32 ENDIAN_SELECT(\" -m elf32ppclinux\",\t\t\\\n+\t\t\t\t\t   \" -m elf32lppclinux\",\t\\\n+\t\t\t\t\t   \" -m elf32ppclinux\")\n+#define LINK_OS_LINUX_EMUL64 ENDIAN_SELECT(\" -m elf64ppc\",\t\t\\\n+\t\t\t\t\t   \" -m elf64lppc\",\t\t\\\n+\t\t\t\t\t   \" -m elf64ppc\")\n #endif\n \n #define LINK_OS_LINUX_SPEC32 LINK_OS_LINUX_EMUL32 \" %{!shared: %{!static: \\"}, {"sha": "8676a12e5026a226ad1ec44b665ba72b5ccec57c", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 24, "deletions": 25, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f1dbf8d00452dd55f764e6df7ed1a7209164600/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f1dbf8d00452dd55f764e6df7ed1a7209164600/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=8f1dbf8d00452dd55f764e6df7ed1a7209164600", "patch": "@@ -517,19 +517,28 @@ extern int fixuplabelno;\n   while (0)\n #endif\n \n+/* Select one of BIG_OPT, LITTLE_OPT or DEFAULT_OPT depending\n+   on various -mbig, -mlittle and -mcall- options.  */\n+#define ENDIAN_SELECT(BIG_OPT, LITTLE_OPT, DEFAULT_OPT)\t\\\n+\"%{mlittle|mlittle-endian:\"\tLITTLE_OPT \";\"\t\\\n+  \"mbig|mbig-endian:\"\t\tBIG_OPT    \";\"\t\\\n+  \"mcall-aixdesc|mcall-freebsd|mcall-netbsd|\"\t\\\n+  \"mcall-openbsd|mcall-linux:\"\tBIG_OPT    \";\"\t\\\n+  \"mcall-i960-old:\"\t\tLITTLE_OPT \";\"\t\\\n+  \":\"\t\t\t\tDEFAULT_OPT \"}\"\n+\n+#if (TARGET_DEFAULT & MASK_LITTLE_ENDIAN)\n+#define DEFAULT_ASM_ENDIAN \" -mlittle\"\n+#else\n+#define DEFAULT_ASM_ENDIAN \" -mbig\"\n+#endif\n+\n #undef\tASM_SPEC\n #define\tASM_SPEC \"%(asm_cpu) \\\n %{,assembler|,assembler-with-cpp: %{mregnames} %{mno-regnames}} \\\n %{mrelocatable} %{mrelocatable-lib} %{fpic|fpie|fPIC|fPIE:-K PIC} \\\n-%{memb|msdata=eabi: -memb} \\\n-%{mlittle|mlittle-endian:-mlittle; \\\n-  mbig|mbig-endian      :-mbig;    \\\n-  mcall-aixdesc |\t\t   \\\n-  mcall-freebsd |\t\t   \\\n-  mcall-netbsd  |\t\t   \\\n-  mcall-openbsd |\t\t   \\\n-  mcall-linux           :-mbig;    \\\n-  mcall-i960-old        :-mlittle}\"\n+%{memb|msdata=eabi: -memb}\" \\\n+ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n \n #define\tCC1_ENDIAN_BIG_SPEC \"\"\n \n@@ -547,17 +556,10 @@ extern int fixuplabelno;\n #endif\n \n /* Pass -G xxx to the compiler and set correct endian mode.  */\n-#define\tCC1_SPEC \"%{G*} %(cc1_cpu) \\\n-%{mlittle|mlittle-endian: %(cc1_endian_little);           \\\n-  mbig   |mbig-endian   : %(cc1_endian_big);              \\\n-  mcall-aixdesc |\t\t\t\t\t  \\\n-  mcall-freebsd |\t\t\t\t\t  \\\n-  mcall-netbsd  |\t\t\t\t\t  \\\n-  mcall-openbsd |\t\t\t\t\t  \\\n-  mcall-linux           : -mbig %(cc1_endian_big);        \\\n-  mcall-i960-old        : -mlittle %(cc1_endian_little);  \\\n-                        : %(cc1_endian_default)}          \\\n-%{meabi: %{!mcall-*: -mcall-sysv }} \\\n+#define\tCC1_SPEC \"%{G*} %(cc1_cpu)\" \\\n+  ENDIAN_SELECT(\" %(cc1_endian_big)\", \" %(cc1_endian_little)\",\t\\\n+\t\t\" %(cc1_endian_default)\")\t\t\t\\\n+\"%{meabi: %{!mcall-*: -mcall-sysv }} \\\n %{!meabi: %{!mno-eabi: \\\n     %{mrelocatable: -meabi } \\\n     %{mcall-freebsd: -mno-eabi } \\\n@@ -601,11 +603,8 @@ extern int fixuplabelno;\n %{symbolic:-Bsymbolic -G -dy -z text }\"\n \n /* Override the default target of the linker.  */\n-#define\tLINK_TARGET_SPEC \"\\\n-%{mlittle: --oformat elf32-powerpcle } %{mlittle-endian: --oformat elf32-powerpcle } \\\n-%{!mlittle: %{!mlittle-endian: %{!mbig: %{!mbig-endian: \\\n-    %{mcall-i960-old: --oformat elf32-powerpcle} \\\n-  }}}}\"\n+#define\tLINK_TARGET_SPEC \\\n+  ENDIAN_SELECT(\"\", \" --oformat elf32-powerpcle\", \"\")\n \n /* Any specific OS flags.  */\n #define LINK_OS_SPEC \"\\"}]}