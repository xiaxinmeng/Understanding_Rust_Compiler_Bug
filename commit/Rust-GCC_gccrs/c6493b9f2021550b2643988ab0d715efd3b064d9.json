{"sha": "c6493b9f2021550b2643988ab0d715efd3b064d9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzY0OTNiOWYyMDIxNTUwYjI2NDM5ODhhYjBkNzE1ZWZkM2IwNjRkOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-29T11:36:12Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-29T11:36:12Z"}, "message": "[multiple changes]\n\n2012-10-29  Robert Dewar  <dewar@adacore.com>\n\n\t* s-bignum.adb: Minor comment change.\n\n2012-10-29  Thomas Quinot  <quinot@adacore.com>\n\n\t* s-oscons-tmplt.c: Fix signedness of ioctl request identifiers\n\tfor x86_64-freebsd.\n\n2012-10-29  Yannick Moy  <moy@adacore.com>\n\n\t* exp_alfa.adb (Expand_Alfa): Remove qualification of names.\n\nFrom-SVN: r192937", "tree": {"sha": "5d35a73e6c0625a17db3e15bb95ef88b933ae76e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5d35a73e6c0625a17db3e15bb95ef88b933ae76e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6493b9f2021550b2643988ab0d715efd3b064d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6493b9f2021550b2643988ab0d715efd3b064d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6493b9f2021550b2643988ab0d715efd3b064d9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6493b9f2021550b2643988ab0d715efd3b064d9/comments", "author": null, "committer": null, "parents": [{"sha": "7af1cf8342f73410aba4a9edf0c54b918a6a775d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af1cf8342f73410aba4a9edf0c54b918a6a775d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7af1cf8342f73410aba4a9edf0c54b918a6a775d"}], "stats": {"total": 44, "additions": 38, "deletions": 6}, "files": [{"sha": "cf5fbb5e9f7a0278d1a5ddcd2160a9436e6966f8", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c6493b9f2021550b2643988ab0d715efd3b064d9", "patch": "@@ -1,3 +1,16 @@\n+2012-10-29  Robert Dewar  <dewar@adacore.com>\n+\n+\t* s-bignum.adb: Minor comment change.\n+\n+2012-10-29  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* s-oscons-tmplt.c: Fix signedness of ioctl request identifiers\n+\tfor x86_64-freebsd.\n+\n+2012-10-29  Yannick Moy  <moy@adacore.com>\n+\n+\t* exp_alfa.adb (Expand_Alfa): Remove qualification of names.\n+\n 2012-10-29  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_prag.adb: Minor reformatting."}, {"sha": "5c44849aaf865d790357436cb91e5cda8f3cf2d0", "filename": "gcc/ada/exp_alfa.adb", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2Fexp_alfa.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2Fexp_alfa.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_alfa.adb?ref=c6493b9f2021550b2643988ab0d715efd3b064d9", "patch": "@@ -28,7 +28,6 @@ with Einfo;    use Einfo;\n with Exp_Attr; use Exp_Attr;\n with Exp_Ch4;  use Exp_Ch4;\n with Exp_Ch6;  use Exp_Ch6;\n-with Exp_Dbug; use Exp_Dbug;\n with Exp_Util; use Exp_Util;\n with Nlists;   use Nlists;\n with Rtsfind;  use Rtsfind;\n@@ -81,11 +80,17 @@ package body Exp_Alfa is\n          when N_Attribute_Reference =>\n             Expand_Alfa_N_Attribute_Reference (N);\n \n+         --  Note: we use to qualify entity names in the following constructs\n+         --  (as full expansion does), but this was removed as this prevents\n+         --  the verification back-end from using a short name for debugging\n+         --  and user interaction. The verification back-end already takes\n+         --  care of qualifying names when needed\n+\n          when N_Block_Statement     |\n               N_Package_Body        |\n               N_Package_Declaration |\n               N_Subprogram_Body     =>\n-            Qualify_Entity_Names (N);\n+            null;\n \n          when N_Subprogram_Call     =>\n             Expand_Alfa_Call (N);\n@@ -97,6 +102,9 @@ package body Exp_Alfa is\n          when N_In =>\n             Expand_Alfa_N_In (N);\n \n+         --  A NOT IN B gets transformed to NOT (A IN B). This is the same\n+         --  expansion used in the normal case, so shared the code.\n+\n          when N_Not_In =>\n             Expand_N_Not_In (N);\n \n@@ -106,6 +114,8 @@ package body Exp_Alfa is\n          when N_Simple_Return_Statement =>\n             Expand_Alfa_N_Simple_Return_Statement (N);\n \n+         --  In Alfa mode, no other constructs require expansion\n+\n          when others =>\n             null;\n       end case;"}, {"sha": "cb7a4f6c1be60225ee2b400a8a502c17aab41cf5", "filename": "gcc/ada/s-bignum.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2Fs-bignum.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2Fs-bignum.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-bignum.adb?ref=c6493b9f2021550b2643988ab0d715efd3b064d9", "patch": "@@ -234,7 +234,7 @@ package body System.Bignums is\n \n             --  Expose a writable view of discriminant BD.Len so that we can\n             --  initialize it. We need to use the exact layout of the record\n-            --  for the overlay to shield ourselves from endianness issues.\n+            --  to ensure that the Length field has 24 bits as expected.\n \n             type Bignum_Data_Header is record\n                Len : Length;"}, {"sha": "25299e8218fda27f34df77322f6f8eafe9107262", "filename": "gcc/ada/s-oscons-tmplt.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2Fs-oscons-tmplt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6493b9f2021550b2643988ab0d715efd3b064d9/gcc%2Fada%2Fs-oscons-tmplt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-oscons-tmplt.c?ref=c6493b9f2021550b2643988ab0d715efd3b064d9", "patch": "@@ -218,6 +218,14 @@ int counter = 0;\n \n #define CST(name,comment) C(#name,String,name,comment)\n \n+/* ioctl(2) requests are \"int\" in UNIX, but \"unsigned long\" on FreeBSD */\n+\n+#ifdef __FreeBSD__\n+# define CNI CNU\n+#else\n+# define CNI CND\n+#endif\n+\n #define STR(x) STR1(x)\n #define STR1(x) #x\n \n@@ -373,12 +381,12 @@ CND(FNDELAY, \"Nonblocking\")\n #ifndef FIONBIO\n # define FIONBIO -1\n #endif\n-CND(FIONBIO, \"Set/clear non-blocking io\")\n+CNI(FIONBIO, \"Set/clear non-blocking io\")\n \n #ifndef FIONREAD\n # define FIONREAD -1\n #endif\n-CND(FIONREAD, \"How many bytes to read\")\n+CNI(FIONREAD, \"How many bytes to read\")\n \n /*\n \n@@ -1318,6 +1326,7 @@ CND(SIZEOF_struct_servent, \"struct servent\");\n #define SIZEOF_sigset (sizeof (sigset_t))\n CND(SIZEOF_sigset, \"sigset\");\n #endif\n+\n /*\n \n    --  Fields of struct msghdr\n@@ -1399,7 +1408,7 @@ CND(CLOCK_THREAD_CPUTIME_ID, \"Thread CPU clock\")\n /* There's no clock_gettime or clock_id's on Darwin, generate a dummy value */\n # define CLOCK_RT_Ada \"-1\"\n \n-#elif defined(FreeBSD) || defined(_AIX)\n+#elif defined(__FreeBSD__) || defined(_AIX)\n /** On these platforms use system provided monotonic clock instead of\n  ** the default CLOCK_REALTIME. We then need to set up cond var attributes\n  ** appropriately (see thread.c)."}]}