{"sha": "da5c1bbe973db144cc1d297ad49b519a870ab0ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE1YzFiYmU5NzNkYjE0NGNjMWQyOTdhZDQ5YjUxOWE4NzBhYjBiYQ==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2019-11-03T12:09:26Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2019-11-03T12:09:26Z"}, "message": "re PR libgcc/78804 ([RX] -m64bit-doubles does not work)\n\nlibgcc/\n\tPR libgcc/78804\n\t* fp-bit.h: Remove FLOAT_BIT_ORDER_MISMATCH.\n\t* fp-bit.c (pack_d, unpack_d): Remove special cases for\n\tFLOAT_BIT_ORDER_MISMATCH.\n\t* config/arc/t-arc: Remove FLOAT_BIT_ORDER_MISMATCH.\n\nFrom-SVN: r277752", "tree": {"sha": "7cc3cfb18bc9a6317e4be1db94f292d4c2d89bf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7cc3cfb18bc9a6317e4be1db94f292d4c2d89bf9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da5c1bbe973db144cc1d297ad49b519a870ab0ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5c1bbe973db144cc1d297ad49b519a870ab0ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da5c1bbe973db144cc1d297ad49b519a870ab0ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5c1bbe973db144cc1d297ad49b519a870ab0ba/comments", "author": null, "committer": null, "parents": [{"sha": "e3200f1d33a636f31e8935d1ddc16382d6c30fdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3200f1d33a636f31e8935d1ddc16382d6c30fdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3200f1d33a636f31e8935d1ddc16382d6c30fdb"}], "stats": {"total": 44, "additions": 12, "deletions": 32}, "files": [{"sha": "806d048f5d183da79d21ee980e8efc72bba5326a", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=da5c1bbe973db144cc1d297ad49b519a870ab0ba", "patch": "@@ -1,3 +1,11 @@\n+2019-11-03  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\tPR libgcc/78804\n+\t* fp-bit.h: Remove FLOAT_BIT_ORDER_MISMATCH.\n+\t* fp-bit.c (pack_d, unpack_d): Remove special cases for\n+\tFLOAT_BIT_ORDER_MISMATCH.\n+\t* config/arc/t-arc: Remove FLOAT_BIT_ORDER_MISMATCH.\n+\n 2019-11-01  Jim Wilson  <jimw@sifive.com>\n \n \t* config/riscv/t-softfp32 (softfp_extra): Add FP divide routines"}, {"sha": "9e1b1307a588ceccb663096071b6a6a7dbce0fa9", "filename": "libgcc/config/arc/t-arc", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2Fconfig%2Farc%2Ft-arc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2Fconfig%2Farc%2Ft-arc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farc%2Ft-arc?ref=da5c1bbe973db144cc1d297ad49b519a870ab0ba", "patch": "@@ -46,7 +46,6 @@ LIB2ADD = fp-bit.c dp-bit.c\n \n dp-bit.c: $(srcdir)/fp-bit.c\n \techo '#ifndef __big_endian__' > dp-bit.c\n-\techo '#define FLOAT_BIT_ORDER_MISMATCH' >> dp-bit.c\n \techo '#endif' >> dp-bit.c\n \techo '#include \"fp-bit.h\"' >> dp-bit.c\n \techo '#include \"config/arc/dp-hack.h\"' >> dp-bit.c\n@@ -55,7 +54,6 @@ dp-bit.c: $(srcdir)/fp-bit.c\n fp-bit.c: $(srcdir)/fp-bit.c\n \techo '#define FLOAT' > fp-bit.c\n \techo '#ifndef __big_endian__' >> fp-bit.c\n-\techo '#define FLOAT_BIT_ORDER_MISMATCH' >> fp-bit.c\n \techo '#endif' >> fp-bit.c\n \techo '#include \"config/arc/fp-hack.h\"' >> fp-bit.c\n \tcat $(srcdir)/fp-bit.c >> fp-bit.c"}, {"sha": "658f42c8e7cb80a8d3f60149791a870611bc3df5", "filename": "libgcc/fp-bit.c", "status": "modified", "additions": 4, "deletions": 16, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2Ffp-bit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2Ffp-bit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Ffp-bit.c?ref=da5c1bbe973db144cc1d297ad49b519a870ab0ba", "patch": "@@ -316,12 +316,7 @@ pack_d (const fp_number_type *src)\n   /* We previously used bitfields to store the number, but this doesn't\n      handle little/big endian systems conveniently, so use shifts and\n      masks */\n-#ifdef FLOAT_BIT_ORDER_MISMATCH\n-  dst.bits.fraction = fraction;\n-  dst.bits.exp = exp;\n-  dst.bits.sign = sign;\n-#else\n-# if defined TFLOAT && defined HALFFRACBITS\n+#if defined TFLOAT && defined HALFFRACBITS\n  {\n    halffractype high, low, unity;\n    int lowsign, lowexp;\n@@ -394,11 +389,10 @@ pack_d (const fp_number_type *src)\n      }\n    dst.value_raw = ((fractype) high << HALFSHIFT) | low;\n  }\n-# else\n+#else\n   dst.value_raw = fraction & ((((fractype)1) << FRACBITS) - (fractype)1);\n   dst.value_raw |= ((fractype) (exp & ((1 << EXPBITS) - 1))) << FRACBITS;\n   dst.value_raw |= ((fractype) (sign & 1)) << (FRACBITS | EXPBITS);\n-# endif\n #endif\n \n #if defined(FLOAT_WORD_ORDER_MISMATCH) && !defined(FLOAT)\n@@ -450,12 +444,7 @@ unpack_d (FLO_union_type * src, fp_number_type * dst)\n   src = &swapped;\n #endif\n   \n-#ifdef FLOAT_BIT_ORDER_MISMATCH\n-  fraction = src->bits.fraction;\n-  exp = src->bits.exp;\n-  sign = src->bits.sign;\n-#else\n-# if defined TFLOAT && defined HALFFRACBITS\n+#if defined TFLOAT && defined HALFFRACBITS\n  {\n    halffractype high, low;\n    \n@@ -498,11 +487,10 @@ unpack_d (FLO_union_type * src, fp_number_type * dst)\n \t }\n      }\n  }\n-# else\n+#else\n   fraction = src->value_raw & ((((fractype)1) << FRACBITS) - 1);\n   exp = ((int)(src->value_raw >> FRACBITS)) & ((1 << EXPBITS) - 1);\n   sign = ((int)(src->value_raw >> (FRACBITS + EXPBITS))) & 1;\n-# endif\n #endif\n \n   dst->sign = sign;"}, {"sha": "de679bdbf3783105b368af3eb261e910ef5d89d8", "filename": "libgcc/fp-bit.h", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2Ffp-bit.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c1bbe973db144cc1d297ad49b519a870ab0ba/libgcc%2Ffp-bit.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Ffp-bit.h?ref=da5c1bbe973db144cc1d297ad49b519a870ab0ba", "patch": "@@ -128,10 +128,6 @@ typedef unsigned int UTItype __attribute__ ((mode (TI)));\n #define NO_DI_MODE\n #endif\n \n-#if __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__\n-#define FLOAT_BIT_ORDER_MISMATCH\n-#endif\n-\n #if __BYTE_ORDER__ != __FLOAT_WORD_ORDER__\n #define FLOAT_WORD_ORDER_MISMATCH\n #endif\n@@ -354,16 +350,6 @@ typedef union\n # endif\n #endif\n \n-#ifdef FLOAT_BIT_ORDER_MISMATCH\n-  struct\n-    {\n-      fractype fraction:FRACBITS __attribute__ ((packed));\n-      unsigned int exp:EXPBITS __attribute__ ((packed));\n-      unsigned int sign:1 __attribute__ ((packed));\n-    }\n-  bits;\n-#endif\n-\n #ifdef _DEBUG_BITFLOAT\n   struct\n     {"}]}