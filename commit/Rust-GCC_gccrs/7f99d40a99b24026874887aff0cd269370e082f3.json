{"sha": "7f99d40a99b24026874887aff0cd269370e082f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y5OWQ0MGE5OWIyNDAyNjg3NDg4N2FmZjBjZDI2OTM3MGUwODJmMw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2016-05-10T15:39:20Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2016-05-10T15:39:20Z"}, "message": "Test begin and end functions for directory iterators\n\n\t* include/experimental/bits/fs_dir.h (begin, end): Add noexcept.\n\t* testsuite/experimental/filesystem/iterators/directory_iterator.cc:\n\tTest begin and end functions.\n\t* testsuite/experimental/filesystem/iterators/\n\trecursive_directory_iterator.cc: Likewise.\n\nFrom-SVN: r236085", "tree": {"sha": "56d73f4ca572513d62c644c4da0f0decca00578e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56d73f4ca572513d62c644c4da0f0decca00578e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f99d40a99b24026874887aff0cd269370e082f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f99d40a99b24026874887aff0cd269370e082f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f99d40a99b24026874887aff0cd269370e082f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f99d40a99b24026874887aff0cd269370e082f3/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6fe673ad0f0fb412f09ddd219eee1b868cfa19d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fe673ad0f0fb412f09ddd219eee1b868cfa19d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fe673ad0f0fb412f09ddd219eee1b868cfa19d3"}], "stats": {"total": 60, "additions": 56, "deletions": 4}, "files": [{"sha": "fdcb9cae2beb34cd08dbdf5f53f97569b50147bb", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=7f99d40a99b24026874887aff0cd269370e082f3", "patch": "@@ -1,5 +1,11 @@\n 2016-05-10  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* include/experimental/bits/fs_dir.h (begin, end): Add noexcept.\n+\t* testsuite/experimental/filesystem/iterators/directory_iterator.cc:\n+\tTest begin and end functions.\n+\t* testsuite/experimental/filesystem/iterators/\n+\trecursive_directory_iterator.cc: Likewise.\n+\n \tPR libstdc++/71038\n \t* src/filesystem/ops.cc (do_copy_file): Fix backwards conditions.\n \t* testsuite/experimental/filesystem/operations/copy_file.cc: New test."}, {"sha": "70a95ebfe66b553f502db02c372e04226f64722a", "filename": "libstdc++-v3/include/experimental/bits/fs_dir.h", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Ffs_dir.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Ffs_dir.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Ffs_dir.h?ref=7f99d40a99b24026874887aff0cd269370e082f3", "patch": "@@ -235,10 +235,12 @@ _GLIBCXX_BEGIN_NAMESPACE_CXX11\n   };\n \n   inline directory_iterator\n-  begin(directory_iterator __iter) { return __iter; }\n+  begin(directory_iterator __iter) noexcept\n+  { return __iter; }\n \n   inline directory_iterator\n-  end(directory_iterator) { return directory_iterator(); }\n+  end(directory_iterator) noexcept\n+  { return directory_iterator(); }\n \n   inline bool\n   operator==(const directory_iterator& __lhs, const directory_iterator& __rhs)\n@@ -327,10 +329,12 @@ _GLIBCXX_BEGIN_NAMESPACE_CXX11\n   };\n \n   inline recursive_directory_iterator\n-  begin(recursive_directory_iterator __iter) { return __iter; }\n+  begin(recursive_directory_iterator __iter) noexcept\n+  { return __iter; }\n \n   inline recursive_directory_iterator\n-  end(recursive_directory_iterator) { return recursive_directory_iterator(); }\n+  end(recursive_directory_iterator) noexcept\n+  { return recursive_directory_iterator(); }\n \n   inline bool\n   operator==(const recursive_directory_iterator& __lhs,"}, {"sha": "ffd97ce19d25ec8bf4f18876044d755c65e310b9", "filename": "libstdc++-v3/testsuite/experimental/filesystem/iterators/directory_iterator.cc", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fiterators%2Fdirectory_iterator.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fiterators%2Fdirectory_iterator.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fiterators%2Fdirectory_iterator.cc?ref=7f99d40a99b24026874887aff0cd269370e082f3", "patch": "@@ -113,10 +113,36 @@ test03()\n   remove_all(p, ec);\n }\n \n+void\n+test04()\n+{\n+  bool test __attribute__((unused)) = false;\n+\n+  const fs::directory_iterator it;\n+  VERIFY( it == fs::directory_iterator() );\n+}\n+\n+void\n+test05()\n+{\n+  bool test __attribute__((unused)) = false;\n+\n+  auto p = __gnu_test::nonexistent_path();\n+  create_directory(p);\n+  create_directory_symlink(p, p / \"l\");\n+  fs::directory_iterator it(p), endit;\n+  VERIFY( begin(it) == it );\n+  static_assert( noexcept(begin(it)), \"begin is noexcept\" );\n+  VERIFY( end(it) == endit );\n+  static_assert( noexcept(end(it)), \"end is noexcept\" );\n+}\n+\n int\n main()\n {\n   test01();\n   test02();\n   test03();\n+  test04();\n+  test05();\n }"}, {"sha": "b44ff3f9e9bdde188c9bc8bbb2b86097aa547f93", "filename": "libstdc++-v3/testsuite/experimental/filesystem/iterators/recursive_directory_iterator.cc", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fiterators%2Frecursive_directory_iterator.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f99d40a99b24026874887aff0cd269370e082f3/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fiterators%2Frecursive_directory_iterator.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fiterators%2Frecursive_directory_iterator.cc?ref=7f99d40a99b24026874887aff0cd269370e082f3", "patch": "@@ -153,11 +153,27 @@ test04()\n   VERIFY( it == fs::recursive_directory_iterator() );\n }\n \n+void\n+test05()\n+{\n+  bool test __attribute__((unused)) = false;\n+\n+  auto p = __gnu_test::nonexistent_path();\n+  create_directory(p);\n+  create_directory_symlink(p, p / \"l\");\n+  fs::recursive_directory_iterator it(p), endit;\n+  VERIFY( begin(it) == it );\n+  static_assert( noexcept(begin(it)), \"begin is noexcept\" );\n+  VERIFY( end(it) == endit );\n+  static_assert( noexcept(end(it)), \"end is noexcept\" );\n+}\n+\n int\n main()\n {\n   test01();\n   test02();\n   test03();\n   test04();\n+  test05();\n }"}]}