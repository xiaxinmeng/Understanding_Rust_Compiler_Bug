{"sha": "dbccdc4211816e31904c7af506aa9f4df60486e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGJjY2RjNDIxMTgxNmUzMTkwNGM3YWY1MDZhYTlmNGRmNjA0ODZlNA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2003-03-17T17:59:58Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2003-03-17T17:59:58Z"}, "message": "ggc-common.c (ggc_mark_roots): Use htab_traverse_noresize.\n\n\t* ggc-common.c (ggc_mark_roots): Use htab_traverse_noresize.\n\n\t* hashtab.h (htab_traverse_noresize): Declare.\n\n\t* hashtab.c (htab_traverse_noresize): Break out from ...\n\t* hashtab.c (htab_traverse): ... here.\n\nFrom-SVN: r64496", "tree": {"sha": "bb02d898b2f0daa316b346810048df64ac47b8b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bb02d898b2f0daa316b346810048df64ac47b8b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dbccdc4211816e31904c7af506aa9f4df60486e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbccdc4211816e31904c7af506aa9f4df60486e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbccdc4211816e31904c7af506aa9f4df60486e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbccdc4211816e31904c7af506aa9f4df60486e4/comments", "author": null, "committer": null, "parents": [{"sha": "ec20aa6ccff4a951fcc2fbb78bb8ca7d0ad16be0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec20aa6ccff4a951fcc2fbb78bb8ca7d0ad16be0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec20aa6ccff4a951fcc2fbb78bb8ca7d0ad16be0"}], "stats": {"total": 39, "additions": 34, "deletions": 5}, "files": [{"sha": "40f8a7c7762a624ccaa1b16869b80e85f277caef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbccdc4211816e31904c7af506aa9f4df60486e4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbccdc4211816e31904c7af506aa9f4df60486e4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dbccdc4211816e31904c7af506aa9f4df60486e4", "patch": "@@ -1,3 +1,7 @@\n+Mon Mar 17 18:57:01 CET 2003  Jan Hubicka  <jh@suse.cz>\n+\n+\t* ggc-common.c (ggc_mark_roots): Use htab_traverse_noresize.\n+\n 2003-03-17  Olivier Hainque  <hainque@act-europe.fr>\n \n \t* function.c (assign_parms): For a struct value address passed as"}, {"sha": "b1c3c61bb2cc1f687570c92c618094638ba14522", "filename": "gcc/ggc-common.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbccdc4211816e31904c7af506aa9f4df60486e4/gcc%2Fggc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbccdc4211816e31904c7af506aa9f4df60486e4/gcc%2Fggc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fggc-common.c?ref=dbccdc4211816e31904c7af506aa9f4df60486e4", "patch": "@@ -113,7 +113,7 @@ ggc_mark_roots ()\n       if (*cti->base)\n \t{\n \t  ggc_set_mark (*cti->base);\n-\t  htab_traverse (*cti->base, ggc_htab_delete, (PTR) cti);\n+\t  htab_traverse_noresize (*cti->base, ggc_htab_delete, (PTR) cti);\n \t  ggc_set_mark ((*cti->base)->entries);\n \t}\n }"}, {"sha": "241529c35d9ea9cebb13767b372fce8c7f726355", "filename": "include/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbccdc4211816e31904c7af506aa9f4df60486e4/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbccdc4211816e31904c7af506aa9f4df60486e4/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=dbccdc4211816e31904c7af506aa9f4df60486e4", "patch": "@@ -1,3 +1,7 @@\n+2003-03-17  Jan Hubicka  <jh@suse.cz>\n+\n+\t* hashtab.h (htab_traverse_noresize): Declare.\n+\n 2003-02-27  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* libiberty.h: Document return value of physmem routines."}, {"sha": "7acb5eb2859218bda4646114ffdfe49bc9cb4666", "filename": "include/hashtab.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbccdc4211816e31904c7af506aa9f4df60486e4/include%2Fhashtab.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbccdc4211816e31904c7af506aa9f4df60486e4/include%2Fhashtab.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Fhashtab.h?ref=dbccdc4211816e31904c7af506aa9f4df60486e4", "patch": "@@ -168,6 +168,7 @@ extern void\thtab_clear_slot\tPARAMS ((htab_t, void **));\n extern void\thtab_remove_elt\tPARAMS ((htab_t, void *));\n \n extern void\thtab_traverse\tPARAMS ((htab_t, htab_trav, void *));\n+extern void\thtab_traverse_noresize\tPARAMS ((htab_t, htab_trav, void *));\n \n extern size_t\thtab_size\tPARAMS ((htab_t));\n extern size_t\thtab_elements\tPARAMS ((htab_t));"}, {"sha": "d4b84d36826d6d5f17e0ecb8dc17b35aeb8f905f", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbccdc4211816e31904c7af506aa9f4df60486e4/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbccdc4211816e31904c7af506aa9f4df60486e4/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=dbccdc4211816e31904c7af506aa9f4df60486e4", "patch": "@@ -1,3 +1,8 @@\n+2003-17-03  Jan Hubicka  <jh@suse.cz>\n+\n+\t* hashtab.c (htab_traverse_noresize): Break out from ...\n+\t* hashtab.c (htab_traverse): ... here.\n+\n 2003-12-03  Jan Hubicka  <jh@suse.cz>\n \n \t* hashtab.c (htab_expand): Fix warning."}, {"sha": "2f8dfd6c581a5ea4d101c832d73590323991ac7a", "filename": "libiberty/hashtab.c", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbccdc4211816e31904c7af506aa9f4df60486e4/libiberty%2Fhashtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbccdc4211816e31904c7af506aa9f4df60486e4/libiberty%2Fhashtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fhashtab.c?ref=dbccdc4211816e31904c7af506aa9f4df60486e4", "patch": "@@ -603,17 +603,14 @@ htab_clear_slot (htab, slot)\n    argument.  */\n \n void\n-htab_traverse (htab, callback, info)\n+htab_traverse_noresize (htab, callback, info)\n      htab_t htab;\n      htab_trav callback;\n      PTR info;\n {\n   PTR *slot;\n   PTR *limit;\n \n-  if ((htab->n_elements - htab->n_deleted) * 8 < htab->size)\n-    htab_expand (htab);\n-\n   slot = htab->entries;\n   limit = slot + htab->size;\n \n@@ -628,6 +625,24 @@ htab_traverse (htab, callback, info)\n   while (++slot < limit);\n }\n \n+/* Like htab_traverse_noresize, but does resize the table when it is\n+   too empty to improve effectivity of subsequent calls.  */\n+\n+void\n+htab_traverse (htab, callback, info)\n+     htab_t htab;\n+     htab_trav callback;\n+     PTR info;\n+{\n+  PTR *slot;\n+  PTR *limit;\n+\n+  if ((htab->n_elements - htab->n_deleted) * 8 < htab->size)\n+    htab_expand (htab);\n+\n+  htab_traverse_noresize (htab, callback, info);\n+}\n+\n /* Return the current size of given hash table. */\n \n size_t"}]}