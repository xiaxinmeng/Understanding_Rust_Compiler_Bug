{"sha": "84ec5aea4833897a100ca6a3a257ebab23b44f93", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRlYzVhZWE0ODMzODk3YTEwMGNhNmEzYTI1N2ViYWIyM2I0NGY5Mw==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2018-05-10T10:15:42Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2018-05-10T10:15:42Z"}, "message": "Improve boostrap-ubsan config (PR bootstrap/64914).\n\n2018-05-10  Martin Liska  <mliska@suse.cz>\n\n\tPR bootstrap/64914\n\t* bootstrap-ubsan.mk: Define UBSAN_BOOTSTRAP.\n2018-05-10  Martin Liska  <mliska@suse.cz>\n\n\tPR bootstrap/64914\n\t* md5.c: Use strict alignment with UBSAN_BOOTSTRAP.\n\nFrom-SVN: r260112", "tree": {"sha": "8acd37238d479b3f767c5b85f0c02bfd5203e2ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8acd37238d479b3f767c5b85f0c02bfd5203e2ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84ec5aea4833897a100ca6a3a257ebab23b44f93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84ec5aea4833897a100ca6a3a257ebab23b44f93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84ec5aea4833897a100ca6a3a257ebab23b44f93", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84ec5aea4833897a100ca6a3a257ebab23b44f93/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "427a7384b9da2cc9977fa1b1bdada06a8f4a2240", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/427a7384b9da2cc9977fa1b1bdada06a8f4a2240", "html_url": "https://github.com/Rust-GCC/gccrs/commit/427a7384b9da2cc9977fa1b1bdada06a8f4a2240"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "ef58a91545bb951f1e961684b709200c67f26fdb", "filename": "config/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ec5aea4833897a100ca6a3a257ebab23b44f93/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ec5aea4833897a100ca6a3a257ebab23b44f93/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=84ec5aea4833897a100ca6a3a257ebab23b44f93", "patch": "@@ -1,3 +1,8 @@\n+2018-05-10  Martin Liska  <mliska@suse.cz>\n+\n+\tPR bootstrap/64914\n+\t* bootstrap-ubsan.mk: Define UBSAN_BOOTSTRAP.\n+\n 2018-05-09  Joshua Watt <jpewhacker@gmail.com>\n \n         * ax_pthread.m4: Add file."}, {"sha": "1d85fe1c836dce0a54d2b7577fb91db93b1081db", "filename": "config/bootstrap-ubsan.mk", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ec5aea4833897a100ca6a3a257ebab23b44f93/config%2Fbootstrap-ubsan.mk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ec5aea4833897a100ca6a3a257ebab23b44f93/config%2Fbootstrap-ubsan.mk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fbootstrap-ubsan.mk?ref=84ec5aea4833897a100ca6a3a257ebab23b44f93", "patch": "@@ -1,8 +1,8 @@\n # This option enables -fsanitize=undefined for stage2 and stage3.\n \n-STAGE2_CFLAGS += -fsanitize=undefined\n-STAGE3_CFLAGS += -fsanitize=undefined\n-POSTSTAGE1_LDFLAGS += -fsanitize=undefined -static-libubsan \\\n+STAGE2_CFLAGS += -fsanitize=undefined -DUBSAN_BOOTSTRAP\n+STAGE3_CFLAGS += -fsanitize=undefined -DUBSAN_BOOTSTRAP\n+POSTSTAGE1_LDFLAGS += -fsanitize=undefined -static-libubsan -DUBSAN_BOOTSTRAP \\\n \t\t      -B$$r/prev-$(TARGET_SUBDIR)/libsanitizer/ \\\n \t\t      -B$$r/prev-$(TARGET_SUBDIR)/libsanitizer/ubsan/ \\\n \t\t      -B$$r/prev-$(TARGET_SUBDIR)/libsanitizer/ubsan/.libs"}, {"sha": "b249226155c99a9d9031029b1548cc06114ba601", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ec5aea4833897a100ca6a3a257ebab23b44f93/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ec5aea4833897a100ca6a3a257ebab23b44f93/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=84ec5aea4833897a100ca6a3a257ebab23b44f93", "patch": "@@ -1,3 +1,8 @@\n+2018-05-10  Martin Liska  <mliska@suse.cz>\n+\n+\tPR bootstrap/64914\n+\t* md5.c: Use strict alignment with UBSAN_BOOTSTRAP.\n+\n 2018-04-30  Daniel van Gerpen  <daniel@vangerpen.de>\n \n \t* argv.c (expandargv): Fix memory leak for copied argv."}, {"sha": "4dd5186a69a1c1dbfcbe350518773f9f6e7a8ed7", "filename": "libiberty/md5.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ec5aea4833897a100ca6a3a257ebab23b44f93/libiberty%2Fmd5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ec5aea4833897a100ca6a3a257ebab23b44f93/libiberty%2Fmd5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fmd5.c?ref=84ec5aea4833897a100ca6a3a257ebab23b44f93", "patch": "@@ -231,7 +231,7 @@ md5_process_bytes (const void *buffer, size_t len, struct md5_ctx *ctx)\n   /* Process available complete blocks.  */\n   if (len > 64)\n     {\n-#if !_STRING_ARCH_unaligned\n+#if !_STRING_ARCH_unaligned || defined UBSAN_BOOTSTRAP\n /* To check alignment gcc has an appropriate operator.  Other\n    compilers don't.  */\n # if __GNUC__ >= 2"}]}