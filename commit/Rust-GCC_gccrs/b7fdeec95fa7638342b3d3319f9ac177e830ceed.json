{"sha": "b7fdeec95fa7638342b3d3319f9ac177e830ceed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdmZGVlYzk1ZmE3NjM4MzQyYjNkMzMxOWY5YWMxNzdlODMwY2VlZA==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2008-08-28T15:10:50Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2008-08-28T15:10:50Z"}, "message": "re PR fortran/37253 (Segmentation fault with procedure pointer)\n\n2008-08-28  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/37253\n\t* module.c (ab_attribute,attr_bits,mio_symbol_attribute): Take care of\n\tsaving attr.procedure and attr.proc_ptr to the module file.\n\n\n2008-08-28  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/37253\n\t* gfortran.dg/proc_ptr_10.f90: New.\n\nFrom-SVN: r139713", "tree": {"sha": "f23e579a55ddc8a3611242cab47bcd889b8cc17c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f23e579a55ddc8a3611242cab47bcd889b8cc17c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7fdeec95fa7638342b3d3319f9ac177e830ceed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7fdeec95fa7638342b3d3319f9ac177e830ceed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7fdeec95fa7638342b3d3319f9ac177e830ceed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7fdeec95fa7638342b3d3319f9ac177e830ceed/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5bdc1946f07880739cdbca20105cebcba5795de0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bdc1946f07880739cdbca20105cebcba5795de0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bdc1946f07880739cdbca20105cebcba5795de0"}], "stats": {"total": 55, "additions": 54, "deletions": 1}, "files": [{"sha": "c626a6575c54a0b19f5c8cc5b514eab8dfa88560", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b7fdeec95fa7638342b3d3319f9ac177e830ceed", "patch": "@@ -1,3 +1,9 @@\n+2008-08-28  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/37253\n+\t* module.c (ab_attribute,attr_bits,mio_symbol_attribute): Take care of\n+\tsaving attr.procedure and attr.proc_ptr to the module file.\n+\n 2008-08-25  Daniel Kraft  <d@domob.eu>\n \n \t* gfortran.h (gfc_find_component): Add new arguments."}, {"sha": "26dc58b8e63d7548cb7f79580f56525053f9635c", "filename": "gcc/fortran/module.c", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ffortran%2Fmodule.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ffortran%2Fmodule.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmodule.c?ref=b7fdeec95fa7638342b3d3319f9ac177e830ceed", "patch": "@@ -1649,7 +1649,7 @@ typedef enum\n   AB_CRAY_POINTER, AB_CRAY_POINTEE, AB_THREADPRIVATE, AB_ALLOC_COMP,\n   AB_POINTER_COMP, AB_PRIVATE_COMP, AB_VALUE, AB_VOLATILE, AB_PROTECTED,\n   AB_IS_BIND_C, AB_IS_C_INTEROP, AB_IS_ISO_C, AB_ABSTRACT, AB_ZERO_COMP,\n-  AB_EXTENSION\n+  AB_EXTENSION, AB_PROCEDURE, AB_PROC_POINTER\n }\n ab_attribute;\n \n@@ -1690,6 +1690,8 @@ static const mstring attr_bits[] =\n     minit (\"PROTECTED\", AB_PROTECTED),\n     minit (\"ABSTRACT\", AB_ABSTRACT),\n     minit (\"EXTENSION\", AB_EXTENSION),\n+    minit (\"PROCEDURE\", AB_PROCEDURE),\n+    minit (\"PROC_POINTER\", AB_PROC_POINTER),\n     minit (NULL, -1)\n };\n \n@@ -1805,6 +1807,10 @@ mio_symbol_attribute (symbol_attribute *attr)\n \tMIO_NAME (ab_attribute) (AB_ZERO_COMP, attr_bits);\n       if (attr->extension)\n \tMIO_NAME (ab_attribute) (AB_EXTENSION, attr_bits);\n+      if (attr->procedure)\n+\tMIO_NAME (ab_attribute) (AB_PROCEDURE, attr_bits);\n+      if (attr->proc_pointer)\n+\tMIO_NAME (ab_attribute) (AB_PROC_POINTER, attr_bits);\n \n       mio_rparen ();\n \n@@ -1926,6 +1932,12 @@ mio_symbol_attribute (symbol_attribute *attr)\n \t    case AB_EXTENSION:\n \t      attr->extension = 1;\n \t      break;\n+\t    case AB_PROCEDURE:\n+\t      attr->procedure = 1;\n+\t      break;\n+\t    case AB_PROC_POINTER:\n+\t      attr->proc_pointer = 1;\n+\t      break;\n \t    }\n \t}\n     }"}, {"sha": "96b49b61aeadb26ec09aac12e52e02aca41a3481", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b7fdeec95fa7638342b3d3319f9ac177e830ceed", "patch": "@@ -1,3 +1,8 @@\n+2008-08-28  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/37253\n+\t* gfortran.dg/proc_ptr_10.f90: New.\n+\n 2008-08-28  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR c++/36741"}, {"sha": "0ceedaa2dff0c68971e07b845dc18e96817af719", "filename": "gcc/testsuite/gfortran.dg/proc_ptr_10.f90", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_10.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7fdeec95fa7638342b3d3319f9ac177e830ceed/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_10.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_10.f90?ref=b7fdeec95fa7638342b3d3319f9ac177e830ceed", "patch": "@@ -0,0 +1,30 @@\n+! { dg-do run }\n+!\n+! PR fortran/37253\n+!\n+! Contributed by Dominique d'Humieres <dominiq@lps.ens.fr>\n+\n+module myMod\n+\n+  CONTAINS\n+\n+  real function proc3( arg1 )\n+     integer :: arg1\n+     proc3 = arg1+7\n+  end function proc3\n+\n+  subroutine proc4( arg1 )\n+     procedure(real), pointer :: arg1\n+     if (arg1(0)/=7) call abort()\n+  end subroutine proc4\n+\n+end module myMod\n+\n+program myProg\n+  use myMod\n+  PROCEDURE (real), POINTER :: p => NULL()\n+  p => proc3\n+  call proc4( p )\n+end program myProg\n+ \n+! { dg-final { cleanup-modules \"myMod\" } }"}]}