{"sha": "7f339ecbd3d80cad057da964ed9b85430c38cffe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YzMzllY2JkM2Q4MGNhZDA1N2RhOTY0ZWQ5Yjg1NDMwYzM4Y2ZmZQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-11-23T15:03:29Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-11-23T15:03:29Z"}, "message": "[libobjc] Wrap CLASS_TABLE_HASH in do {} while (0)\n\n2017-11-23  Tom de Vries  <tom@codesourcery.com>\n\n\t* class.c (CLASS_TABLE_HASH): Wrap in \"do {} while (0)\".\n\nFrom-SVN: r255099", "tree": {"sha": "1fa3ac0e5738524d4221440d1b7d8e276940dcb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1fa3ac0e5738524d4221440d1b7d8e276940dcb9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f339ecbd3d80cad057da964ed9b85430c38cffe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f339ecbd3d80cad057da964ed9b85430c38cffe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f339ecbd3d80cad057da964ed9b85430c38cffe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f339ecbd3d80cad057da964ed9b85430c38cffe/comments", "author": null, "committer": null, "parents": [{"sha": "77abf71fdf08dcb639aa022744a212ffb60d7278", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77abf71fdf08dcb639aa022744a212ffb60d7278", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77abf71fdf08dcb639aa022744a212ffb60d7278"}], "stats": {"total": 22, "additions": 14, "deletions": 8}, "files": [{"sha": "e1d32b6171a5e0db519ee07bfe988df4dadf08c3", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f339ecbd3d80cad057da964ed9b85430c38cffe/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f339ecbd3d80cad057da964ed9b85430c38cffe/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=7f339ecbd3d80cad057da964ed9b85430c38cffe", "patch": "@@ -1,3 +1,7 @@\n+2017-11-23  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* class.c (CLASS_TABLE_HASH): Wrap in \"do {} while (0)\".\n+\n 2017-11-17  Igor Tsimbalist  <igor.v.tsimbalist@intel.com>\n \n \t* Makefile.in: Regenerate."}, {"sha": "7a8f832e89bb40e19bfdb24068ebb91c9bfd194b", "filename": "libobjc/class.c", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f339ecbd3d80cad057da964ed9b85430c38cffe/libobjc%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f339ecbd3d80cad057da964ed9b85430c38cffe/libobjc%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fclass.c?ref=7f339ecbd3d80cad057da964ed9b85430c38cffe", "patch": "@@ -153,14 +153,16 @@ static objc_mutex_t __class_table_lock = NULL;\n    string, and HASH the computed hash of the string; CLASS_NAME is\n    untouched.  */\n \n-#define CLASS_TABLE_HASH(INDEX, HASH, CLASS_NAME)          \\\n-  HASH = 0;                                                  \\\n-  for (INDEX = 0; CLASS_NAME[INDEX] != '\\0'; INDEX++)        \\\n-    {                                                        \\\n-      HASH = (HASH << 4) ^ (HASH >> 28) ^ CLASS_NAME[INDEX]; \\\n-    }                                                        \\\n-                                                             \\\n-  HASH = (HASH ^ (HASH >> 10) ^ (HASH >> 20)) & CLASS_TABLE_MASK;\n+#define CLASS_TABLE_HASH(INDEX, HASH, CLASS_NAME)\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\t\\\n+    HASH = 0;\t\t\t\t\t\t\t\t\\\n+    for (INDEX = 0; CLASS_NAME[INDEX] != '\\0'; INDEX++)\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+\tHASH = (HASH << 4) ^ (HASH >> 28) ^ CLASS_NAME[INDEX];\t\t\\\n+      }\t\t\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+    HASH = (HASH ^ (HASH >> 10) ^ (HASH >> 20)) & CLASS_TABLE_MASK;\t\\\n+  } while (0)\n \n /* Setup the table.  */\n static void"}]}