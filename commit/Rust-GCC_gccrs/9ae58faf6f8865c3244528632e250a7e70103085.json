{"sha": "9ae58faf6f8865c3244528632e250a7e70103085", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWFlNThmYWY2Zjg4NjVjMzI0NDUyODYzMmUyNTBhN2U3MDEwMzA4NQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2003-01-29T11:35:33Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2003-01-29T11:35:33Z"}, "message": "re PR c++/9437 (template function parameter `T*' shouldn't match pointers to members)\n\ncp:\n\tPR c++/9437\n\t* pt.c (unify): Don't unify '*T' with 'U C::*'.\ntestsuite:\n\tPR c++/9437\n\t* g++.dg/template/unify4.C: New test.\n\nFrom-SVN: r62070", "tree": {"sha": "47c1b07e30f01fecc155ea7422312bf32ba2e12e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/47c1b07e30f01fecc155ea7422312bf32ba2e12e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ae58faf6f8865c3244528632e250a7e70103085", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ae58faf6f8865c3244528632e250a7e70103085", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ae58faf6f8865c3244528632e250a7e70103085", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ae58faf6f8865c3244528632e250a7e70103085/comments", "author": null, "committer": null, "parents": [{"sha": "cf0150b9952445449513cbdaca51993c7dac64d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf0150b9952445449513cbdaca51993c7dac64d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf0150b9952445449513cbdaca51993c7dac64d4"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "d84824dbf3d2579c8d43592174cf5b7ad5679fdc", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9ae58faf6f8865c3244528632e250a7e70103085", "patch": "@@ -1,5 +1,8 @@\n 2003-01-28  Nathan Sidwell  <nathan@codesourcery.com>\n \n+\tPR c++/9437\n+\t* pt.c (unify): Don't unify '*T' with 'U C::*'.\n+\n \tPR c++/3902\n \t* parser.c (cp_parser_decl_specifier_seq): Cannot have constructor\n \tinside a declarator."}, {"sha": "b3b81063ce02ce96f73fce0ee7c3ffc4b0e2581d", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=9ae58faf6f8865c3244528632e250a7e70103085", "patch": "@@ -9447,6 +9447,12 @@ unify (tparms, targs, parm, arg, strict)\n \t}\n       else\n \t{\n+\t  /* If ARG is an offset type, we're trying to unify '*T' with\n+\t     'U C::*', which is ill-formed. See the comment in the\n+\t     POINTER_TYPE case about this ugliness. */\n+\t  if (TREE_CODE (arg) == OFFSET_TYPE)\n+\t    return 1;\n+\t  \n \t  /* If PARM is `const T' and ARG is only `int', we don't have\n \t     a match unless we are allowing additional qualification.\n \t     If ARG is `const int' and PARM is just `T' that's OK;"}, {"sha": "6c167282bd05be27c9c3c2a3f1367a57654edc6e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9ae58faf6f8865c3244528632e250a7e70103085", "patch": "@@ -1,3 +1,8 @@\n+2003-01-29  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/9437\n+\t* g++.dg/template/unify4.C: New test.\n+\n 2003-01-28  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* gcc.c-torture/execute/20030128-1.c: New test."}, {"sha": "19d9f3a9f0395d97c2d22e6d0c8eb66c8b020a29", "filename": "gcc/testsuite/g++.dg/template/unify4.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Funify4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae58faf6f8865c3244528632e250a7e70103085/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Funify4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Funify4.C?ref=9ae58faf6f8865c3244528632e250a7e70103085", "patch": "@@ -0,0 +1,18 @@\n+// { dg-do compile }\n+\n+// Copyright (C) 2003 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 28 Jan 2003 <nathan@codesourcery.com>\n+\n+// PR 9437. We'd unify 'T *' with 'U C::*', which is obviously broken\n+\n+struct X\n+{\n+  template <typename T>\n+  operator T* () const { return static_cast<T*> (0); }\n+} null;\n+\n+struct A { int i; };\n+\n+static void f (int A::* pmi) { }\n+\n+int main () { f (null); } // { dg-error \"cannot convert\" \"\" }"}]}