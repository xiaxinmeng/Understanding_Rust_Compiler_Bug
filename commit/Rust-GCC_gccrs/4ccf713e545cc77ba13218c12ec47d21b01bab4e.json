{"sha": "4ccf713e545cc77ba13218c12ec47d21b01bab4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNjZjcxM2U1NDVjYzc3YmExMzIxOGMxMmVjNDdkMjFiMDFiYWI0ZQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2020-02-03T10:22:57Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-06-05T12:17:55Z"}, "message": "[Ada] Support 'Reduce under -gnatX\n\n2020-06-05  Arnaud Charlet  <charlet@adacore.com>\n\ngcc/ada/\n\n\t* scng.adb (Scan): Fix typo to take into account all future\n\tversions of Ada.\n\t* sem_attr.ads (Attribute_Impl_Def): Add Attribute_Reduce for\n\tnow.\n\t* sem_attr.adb (Analyze_Attribute): Only allow 'Reduce under\n\t-gnatX.\n\t* snames.ads-tmpl (Name_Reduce): Update comment.", "tree": {"sha": "4dfd70840e312ec3ef5b0f4398924e19e1fc3366", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4dfd70840e312ec3ef5b0f4398924e19e1fc3366"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4ccf713e545cc77ba13218c12ec47d21b01bab4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ccf713e545cc77ba13218c12ec47d21b01bab4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ccf713e545cc77ba13218c12ec47d21b01bab4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ccf713e545cc77ba13218c12ec47d21b01bab4e/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3af132b801a6e58c530a6571117df51bca6f6572", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3af132b801a6e58c530a6571117df51bca6f6572", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3af132b801a6e58c530a6571117df51bca6f6572"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "db3269439112e4a96afdc31c65315d0b9139d400", "filename": "gcc/ada/scng.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fscng.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fscng.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fscng.adb?ref=4ccf713e545cc77ba13218c12ec47d21b01bab4e", "patch": "@@ -1701,7 +1701,7 @@ package body Scng is\n             if Source (Scan_Ptr + 1) = '\"' then\n                goto Scan_Wide_Character;\n \n-            elsif Ada_Version = Ada_2020 then\n+            elsif Ada_Version >= Ada_2020 then\n                Scan_Ptr := Scan_Ptr + 1;\n                Token := Tok_Left_Bracket;\n                return;"}, {"sha": "5fef9c27fcf5066a34866efc134a1ded4c780def", "filename": "gcc/ada/sem_attr.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fsem_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fsem_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.adb?ref=4ccf713e545cc77ba13218c12ec47d21b01bab4e", "patch": "@@ -5572,6 +5572,11 @@ package body Sem_Attr is\n       when Attribute_Reduce =>\n          Check_E2;\n \n+         if not Extensions_Allowed then\n+            Error_Attr\n+              (\"% attribute only supported under -gnatX\", P);\n+         end if;\n+\n          declare\n             Stream : constant Node_Id := Prefix (N);\n             Typ    : Entity_Id;"}, {"sha": "b118a97ed4a13dbd1c2a0e589daac607f0b0bd34", "filename": "gcc/ada/sem_attr.ads", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fsem_attr.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fsem_attr.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.ads?ref=4ccf713e545cc77ba13218c12ec47d21b01bab4e", "patch": "@@ -397,6 +397,13 @@ package Sem_Attr is\n       --  as Range applied to the array itself. The result is of type universal\n       --  integer.\n \n+      ------------\n+      -- Reduce --\n+      ------------\n+\n+      Attribute_Reduce => True,\n+      --  See AI12-0262-1\n+\n       ---------\n       -- Ref --\n       ---------"}, {"sha": "968f80ef81904d62f2f9fd8c7ddb642a28dd17a2", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ccf713e545cc77ba13218c12ec47d21b01bab4e/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=4ccf713e545cc77ba13218c12ec47d21b01bab4e", "patch": "@@ -976,7 +976,7 @@ package Snames is\n    Name_Priority                       : constant Name_Id := N + $; -- Ada 05\n    Name_Range                          : constant Name_Id := N + $;\n    Name_Range_Length                   : constant Name_Id := N + $; -- GNAT\n-   Name_Reduce                         : constant Name_Id := N + $;\n+   Name_Reduce                         : constant Name_Id := N + $; -- GNAT\n    Name_Ref                            : constant Name_Id := N + $; -- GNAT\n    Name_Restriction_Set                : constant Name_Id := N + $; -- GNAT\n    Name_Result                         : constant Name_Id := N + $; -- GNAT"}]}