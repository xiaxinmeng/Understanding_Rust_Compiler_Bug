{"sha": "bd72fc7cd4e91ac2297c14bc62980c6506e8c56c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQ3MmZjN2NkNGU5MWFjMjI5N2MxNGJjNjI5ODBjNjUwNmU4YzU2Yw==", "commit": {"author": {"name": "Nicola Pero", "email": "nicola.pero@meta-innovation.com", "date": "2010-09-08T18:03:25Z"}, "committer": {"name": "Nicola Pero", "email": "nicola@gcc.gnu.org", "date": "2010-09-08T18:03:25Z"}, "message": "type-stream-1.m: Replaced with a test that tests that functions from objc/typedstream.h are...\n\n        * objc.dg/type-stream-1.m: Replaced with a test that tests that\n        functions from objc/typedstream.h are deprecated.\n\nFrom-SVN: r164016", "tree": {"sha": "d47fa3e9b1b66054d03f706e420a88c38e65cded", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d47fa3e9b1b66054d03f706e420a88c38e65cded"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c/comments", "author": {"login": "Nico-31415", "id": 94470564, "node_id": "U_kgDOBaGBpA", "avatar_url": "https://avatars.githubusercontent.com/u/94470564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nico-31415", "html_url": "https://github.com/Nico-31415", "followers_url": "https://api.github.com/users/Nico-31415/followers", "following_url": "https://api.github.com/users/Nico-31415/following{/other_user}", "gists_url": "https://api.github.com/users/Nico-31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nico-31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nico-31415/subscriptions", "organizations_url": "https://api.github.com/users/Nico-31415/orgs", "repos_url": "https://api.github.com/users/Nico-31415/repos", "events_url": "https://api.github.com/users/Nico-31415/events{/privacy}", "received_events_url": "https://api.github.com/users/Nico-31415/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4470254f1a06ae1fe9548902f079d2dd8bc74692", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4470254f1a06ae1fe9548902f079d2dd8bc74692", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4470254f1a06ae1fe9548902f079d2dd8bc74692"}], "stats": {"total": 37, "additions": 17, "deletions": 20}, "files": [{"sha": "0b5454c93d910610480e56dad36e77f6984dfe8a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bd72fc7cd4e91ac2297c14bc62980c6506e8c56c", "patch": "@@ -1,3 +1,8 @@\n+2010-09-06  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* objc.dg/type-stream-1.m: Replaced with a test that tests that\n+\tfunctions from objc/typedstream.h are deprecated.\n+\n 2010-09-08  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* lib/target-supports.exp"}, {"sha": "9f2d509fbf787443e63017d4266983a4d46100d9", "filename": "gcc/testsuite/objc.dg/type-stream-1.m", "status": "modified", "additions": 12, "deletions": 20, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c/gcc%2Ftestsuite%2Fobjc.dg%2Ftype-stream-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd72fc7cd4e91ac2297c14bc62980c6506e8c56c/gcc%2Ftestsuite%2Fobjc.dg%2Ftype-stream-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Ftype-stream-1.m?ref=bd72fc7cd4e91ac2297c14bc62980c6506e8c56c", "patch": "@@ -1,25 +1,17 @@\n-/* { dg-do run } */\n+/* { dg-do compile } */\n /* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n+\n+/* Test warning for deprecated typedstream functions.  These functions\n+   will be removed in the release after 4.6.0, at which point this\n+   testcase can be removed too.\n+ */\n+\n #include <objc/typedstream.h>\n-#include <stdio.h>\n-#include <stdlib.h>\n \n-int main (void)\n+void dummy (void)\n {\n-  FILE *f; TypedStream *ts;\n-  struct T { int a, b; } x = { 1, 2 };\n-  f = fopen (\"foo\", \"w\"); ts = objc_open_typed_stream (f, OBJC_WRITEONLY);\n-  objc_write_type (ts, @encode(struct T), &x);\n-  objc_close_typed_stream (ts); fclose (f);\n-  f = fopen (\"foo\", \"r\"); ts = objc_open_typed_stream (f, OBJC_READONLY);\n-  struct T y;\n-  objc_read_type (ts, @encode(struct T), &y);\n-  if (y.a != 1)\n-   abort ();\n-  if (y.b != 2)\n-   abort ();\n-  objc_close_typed_stream (ts); fclose (f);\n-  remove (\"foo\");\n-  return 0;\n-}\n+  TypedStream* t = objc_open_typed_stream_for_file (\"dummy\", 0); /* { dg-warning \"deprecated\" } */\n \n+  objc_write_object (t, nil); /* { dg-warning \"deprecated\" } */\n+  objc_read_object (t, NULL);  /* { dg-warning \"deprecated\" } */\n+}"}]}