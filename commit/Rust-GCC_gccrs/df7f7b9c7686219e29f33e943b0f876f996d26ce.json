{"sha": "df7f7b9c7686219e29f33e943b0f876f996d26ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY3ZjdiOWM3Njg2MjE5ZTI5ZjMzZTk0M2IwZjg3NmY5OTZkMjZjZQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-06-12T00:10:26Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-06-12T00:10:26Z"}, "message": "re PR c++/10432 (ICE in poplevel, at cp/decl.c:1230)\n\n\tPR c++/10432\n\t* cp-tree.h (finish_declarator): Remove.\n\t* decl.c (cp_finish_decl): Make sure to pop_nested_class even for\n\terroneous declarations.\n\t* semantics.c (finish_declarator): Remove.\n\n\tPR c++/10432\n\t* g++.dg/parse/error1.C: New test.\n\nFrom-SVN: r67804", "tree": {"sha": "87da96dd33e690300579589e86f24f6d0d74888b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87da96dd33e690300579589e86f24f6d0d74888b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df7f7b9c7686219e29f33e943b0f876f996d26ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7f7b9c7686219e29f33e943b0f876f996d26ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df7f7b9c7686219e29f33e943b0f876f996d26ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7f7b9c7686219e29f33e943b0f876f996d26ce/comments", "author": null, "committer": null, "parents": [{"sha": "04953ac98677c4d04510078e7637323fbe89ed79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04953ac98677c4d04510078e7637323fbe89ed79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04953ac98677c4d04510078e7637323fbe89ed79"}], "stats": {"total": 37, "additions": 20, "deletions": 17}, "files": [{"sha": "7e74f47b3b505b6690f02f3039d94cc451b5db51", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=df7f7b9c7686219e29f33e943b0f876f996d26ce", "patch": "@@ -1,3 +1,11 @@\n+2003-06-11  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/10432\n+\t* cp-tree.h (finish_declarator): Remove.\n+\t* decl.c (cp_finish_decl): Make sure to pop_nested_class even for\n+\terroneous declarations.\n+\t* semantics.c (finish_declarator): Remove.\n+\n 2003-06-11  Roger Sayle  <roger@eyesopen.com>\n \n \t* decl2.c (generate_ctor_or_dtor_function): Avoid expanding a "}, {"sha": "244eb1a3add3bd1987b193ca503de9bfa20c3127", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=df7f7b9c7686219e29f33e943b0f876f996d26ce", "patch": "@@ -4118,7 +4118,6 @@ extern tree finish_unary_op_expr                (enum tree_code, tree);\n extern tree finish_compound_literal             (tree, tree);\n extern tree finish_fname                        (tree);\n extern int begin_function_definition            (tree, tree, tree);\n-extern tree finish_declarator                   (tree, tree, tree, tree, int);\n extern void finish_translation_unit             (void);\n extern tree finish_template_type_parm           (tree, tree);\n extern tree finish_template_template_parm       (tree, tree);"}, {"sha": "f318551e25c97dbfb293c09b3d2a4a757e68733c", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=df7f7b9c7686219e29f33e943b0f876f996d26ce", "patch": "@@ -8023,7 +8023,7 @@ cp_finish_decl (tree decl, tree init, tree asmspec_tree, int flags)\n   type = TREE_TYPE (decl);\n \n   if (type == error_mark_node)\n-    return;\n+    goto finish_end0;\n \n   if (TYPE_HAS_MUTABLE_P (type))\n     TREE_READONLY (decl) = 0;"}, {"sha": "646cc19d525228aedbd1b541ae78dc0b5ae161e4", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=df7f7b9c7686219e29f33e943b0f876f996d26ce", "patch": "@@ -1739,21 +1739,6 @@ begin_function_definition (decl_specs, attributes, declarator)\n   return 1;\n }\n \n-/* Finish an init-declarator.  Returns a DECL.  */\n-\n-tree\n-finish_declarator (declarator, declspecs, attributes,\n-\t\t   prefix_attributes, initialized)\n-     tree declarator;\n-     tree declspecs;\n-     tree attributes;\n-     tree prefix_attributes;\n-     int initialized;\n-{\n-  return start_decl (declarator, declspecs, initialized, attributes,\n-\t\t     prefix_attributes); \n-}\n-\n /* Finish a translation unit.  */\n \n void "}, {"sha": "52b54cb4857fdd681deef5abd448041ce4cc75cd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=df7f7b9c7686219e29f33e943b0f876f996d26ce", "patch": "@@ -1,3 +1,8 @@\n+2003-06-11  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/10432\n+\t* g++.dg/parse/error1.C: New test.\n+\n 2003-06-11  Janis Johnson  <janis187@us.ibm.com>\n \n \t* gcc.dg/compat/struct-by-value-11_main.c: New file."}, {"sha": "8756df64592177270927048aa41e410f3bd5f1b9", "filename": "gcc/testsuite/g++.dg/parse/error1.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7f7b9c7686219e29f33e943b0f876f996d26ce/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror1.C?ref=df7f7b9c7686219e29f33e943b0f876f996d26ce", "patch": "@@ -0,0 +1,6 @@\n+struct INCOMPLETE;\n+template <int> struct X {\n+    static INCOMPLETE value;\n+};\n+template <> INCOMPLETE X<1>::value = 0; // { dg-error \"\" }\n+"}]}