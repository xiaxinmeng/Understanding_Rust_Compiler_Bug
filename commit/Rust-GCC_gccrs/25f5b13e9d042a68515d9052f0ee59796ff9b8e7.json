{"sha": "25f5b13e9d042a68515d9052f0ee59796ff9b8e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjVmNWIxM2U5ZDA0MmE2ODUxNWQ5MDUyZjBlZTU5Nzk2ZmY5YjhlNw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-05-09T18:07:54Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-05-09T18:07:54Z"}, "message": "(__ashrsi3, __ashlsi3, __lshrsi3): Use .byte instead\nof .word offsets in switch table.\n\nFrom-SVN: r9598", "tree": {"sha": "c026c38b1651a8c7f0bea75bc2ace8ad3f7b68ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c026c38b1651a8c7f0bea75bc2ace8ad3f7b68ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/25f5b13e9d042a68515d9052f0ee59796ff9b8e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25f5b13e9d042a68515d9052f0ee59796ff9b8e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25f5b13e9d042a68515d9052f0ee59796ff9b8e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25f5b13e9d042a68515d9052f0ee59796ff9b8e7/comments", "author": null, "committer": null, "parents": [{"sha": "a142e7ccfe7c084a8c1e2aeff1178a2d9659d383", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383"}], "stats": {"total": 216, "additions": 105, "deletions": 111}, "files": [{"sha": "c190aae912ee6708e7848694080ffd67b1d31525", "filename": "gcc/config/sh/lib1funcs.asm", "status": "modified", "additions": 105, "deletions": 111, "changes": 216, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25f5b13e9d042a68515d9052f0ee59796ff9b8e7/gcc%2Fconfig%2Fsh%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25f5b13e9d042a68515d9052f0ee59796ff9b8e7/gcc%2Fconfig%2Fsh%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Flib1funcs.asm?ref=25f5b13e9d042a68515d9052f0ee59796ff9b8e7", "patch": "@@ -170,7 +170,7 @@ ___ashiftrt_r4_0:\n !\n ! Destroys:\n !\n-! r1\n+! (none)\n !\n \n \t.global\t___ashrsi3\n@@ -179,47 +179,45 @@ ___ashrsi3:\n \tmov\t#31,r0\n \tcmp/hi\tr0,r5\n \tbt\tL_ashrsi3_31\n-\tmov\tr5,r1\t\t\t! Remove later\n \tmova\tL_ashrsi3_table,r0\n-\tshll\tr1\t\t\t! Remove later\n-\tmov.w\t@(r0,r1),r1\t\t! Change to mov.b @(r0,r5),r1\n-\tadd\tr1,r0\n+\tmov.b\t@(r0,r5),r5\n+\tadd\tr5,r0\t\t! Change to braf when gas is fixed\n \tjmp\t@r0\n \tmov\tr4,r0\n \n L_ashrsi3_table:\n-\t.word\t\tL_ashrsi3_0-L_ashrsi3_table\t! Change to .bytes\n-\t.word\t\tL_ashrsi3_1-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_2-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_3-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_4-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_5-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_6-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_7-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_8-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_9-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_10-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_11-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_12-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_13-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_14-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_15-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_16-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_17-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_18-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_19-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_20-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_21-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_22-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_23-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_24-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_25-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_26-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_27-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_28-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_29-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_30-L_ashrsi3_table\n-\t.word\t\tL_ashrsi3_31-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_0-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_1-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_2-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_3-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_4-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_5-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_6-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_7-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_8-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_9-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_10-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_11-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_12-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_13-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_14-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_15-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_16-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_17-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_18-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_19-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_20-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_21-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_22-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_23-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_24-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_25-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_26-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_27-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_28-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_29-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_30-L_ashrsi3_table\n+\t.byte\t\tL_ashrsi3_31-L_ashrsi3_table\n \n L_ashrsi3_31:\n \trotcl\tr0\n@@ -317,55 +315,53 @@ L_ashrsi3_0:\n !\n ! Destroys:\n !\n-! r1\n+! (none)\n !\n \t.global\t___ashlsi3\n \t.align\t2\n ___ashlsi3:\n \tmov\t#31,r0\n \tcmp/hi\tr0,r5\n \tbt\tL_ashlsi3_32\n-\tmov\tr5,r1\t\t\t! Remove later\n \tmova\tL_ashlsi3_table,r0\n-\tshll\tr1\t\t\t! Remove later\n-\tmov.w\t@(r0,r1),r1\t\t! Change to mov.b @(r0,r5),r1\n-\tadd\tr1,r0\n+\tmov.b\t@(r0,r5),r5\n+\tadd\tr5,r0\t\t! Change to braf when gas is fixed\n \tjmp\t@r0\n \tmov\tr4,r0\n \n L_ashlsi3_table:\n-\t.word\t\tL_ashlsi3_0-L_ashlsi3_table\t! Change to .bytes\n-\t.word\t\tL_ashlsi3_1-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_2-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_3-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_4-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_5-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_6-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_7-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_8-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_9-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_10-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_11-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_12-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_13-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_14-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_15-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_16-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_17-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_18-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_19-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_20-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_21-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_22-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_23-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_24-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_25-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_26-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_27-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_28-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_29-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_30-L_ashlsi3_table\n-\t.word\t\tL_ashlsi3_31-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_0-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_1-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_2-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_3-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_4-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_5-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_6-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_7-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_8-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_9-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_10-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_11-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_12-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_13-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_14-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_15-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_16-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_17-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_18-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_19-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_20-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_21-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_22-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_23-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_24-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_25-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_26-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_27-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_28-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_29-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_30-L_ashlsi3_table\n+\t.byte\t\tL_ashlsi3_31-L_ashlsi3_table\n \n L_ashlsi3_6:\n \tshll2\tr0\n@@ -476,55 +472,53 @@ L_ashlsi3_0:\n !\n ! Destroys:\n !\n-! r1\n+! (none)\n !\n \t.global\t___lshrsi3\n \t.align\t2\n ___lshrsi3:\n \tmov\t#31,r0\n \tcmp/hi\tr0,r5\n \tbt\tL_lshrsi3_32\n-\tmov\tr5,r1\t\t\t! Remove later\n \tmova\tL_lshrsi3_table,r0\n-\tshll\tr1\t\t\t! Remove later\n-\tmov.w\t@(r0,r1),r1\t\t! Change to mov.b @(r0,r5),r1\n-\tadd\tr1,r0\n+\tmov.b\t@(r0,r5),r5\n+\tadd\tr5,r0\t\t! Change to braf when gas is fixed\n \tjmp\t@r0\n \tmov\tr4,r0\n \n L_lshrsi3_table:\n-\t.word\t\tL_lshrsi3_0-L_lshrsi3_table\t! Change to .bytes\n-\t.word\t\tL_lshrsi3_1-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_2-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_3-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_4-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_5-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_6-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_7-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_8-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_9-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_10-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_11-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_12-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_13-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_14-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_15-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_16-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_17-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_18-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_19-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_20-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_21-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_22-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_23-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_24-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_25-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_26-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_27-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_28-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_29-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_30-L_lshrsi3_table\n-\t.word\t\tL_lshrsi3_31-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_0-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_1-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_2-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_3-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_4-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_5-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_6-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_7-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_8-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_9-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_10-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_11-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_12-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_13-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_14-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_15-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_16-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_17-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_18-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_19-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_20-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_21-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_22-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_23-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_24-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_25-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_26-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_27-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_28-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_29-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_30-L_lshrsi3_table\n+\t.byte\t\tL_lshrsi3_31-L_lshrsi3_table\n \n L_lshrsi3_6:\n \tshlr2\tr0"}]}