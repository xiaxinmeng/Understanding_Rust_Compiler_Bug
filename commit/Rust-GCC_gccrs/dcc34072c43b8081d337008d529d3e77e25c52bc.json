{"sha": "dcc34072c43b8081d337008d529d3e77e25c52bc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNjMzQwNzJjNDNiODA4MWQzMzcwMDhkNTI5ZDNlNzdlMjVjNTJiYw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-09-20T09:02:52Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-09-20T09:02:52Z"}, "message": "dwarf2out.c (DEBUG_LTO_DWO_INFO_SECTION): Reorder defines.\n\n\t* dwarf2out.c (DEBUG_LTO_DWO_INFO_SECTION): Reorder defines.\n\t(DEBUG_LTO_ABBREV_SECTION): Likewise.\n\t(DEBUG_LTO_MACINFO_SECTION): Likewise.\n\t(DEBUG_MACRO_SECTION): Likewise.\n\t(DEBUG_LTO_MACRO_SECTION): Likewise.\n\t(DEBUG_STR_DWO_SECTION): Likewise.\n\t(DEBUG_LTO_STR_DWO_SECTION): Likewise.\n\t(DEBUG_LTO_LINE_SECTION): Drop .dwo suffix from the name.\n\t(DEBUG_LTO_DWO_LINE_SECTION): Define.\n\t(DEBUG_LTO_LINE_STR_SECTION): Define.\n\t(init_sections_and_labels): Initialize debug_line_str_section\n\tvariable.  Initialize debug_loc_section for -gdwarf-5 to\n\tDEBUG_LOCLISTS_SECTION.  Formatting fixes.\n\nFrom-SVN: r253003", "tree": {"sha": "52eea67ef087f458cca53396cfdcfcfa4229b01a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52eea67ef087f458cca53396cfdcfcfa4229b01a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcc34072c43b8081d337008d529d3e77e25c52bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcc34072c43b8081d337008d529d3e77e25c52bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcc34072c43b8081d337008d529d3e77e25c52bc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcc34072c43b8081d337008d529d3e77e25c52bc/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0f45457ef436fd85549281064ab74ee55247b13c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f45457ef436fd85549281064ab74ee55247b13c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f45457ef436fd85549281064ab74ee55247b13c"}], "stats": {"total": 119, "additions": 78, "deletions": 41}, "files": [{"sha": "f620568e85ea5aa7a89b10da3b6c40f2404c1862", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcc34072c43b8081d337008d529d3e77e25c52bc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcc34072c43b8081d337008d529d3e77e25c52bc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dcc34072c43b8081d337008d529d3e77e25c52bc", "patch": "@@ -1,3 +1,19 @@\n+2017-09-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* dwarf2out.c (DEBUG_LTO_DWO_INFO_SECTION): Reorder defines.\n+\t(DEBUG_LTO_ABBREV_SECTION): Likewise.\n+\t(DEBUG_LTO_MACINFO_SECTION): Likewise.\n+\t(DEBUG_MACRO_SECTION): Likewise.\n+\t(DEBUG_LTO_MACRO_SECTION): Likewise.\n+\t(DEBUG_STR_DWO_SECTION): Likewise.\n+\t(DEBUG_LTO_STR_DWO_SECTION): Likewise.\n+\t(DEBUG_LTO_LINE_SECTION): Drop .dwo suffix from the name.\n+\t(DEBUG_LTO_DWO_LINE_SECTION): Define.\n+\t(DEBUG_LTO_LINE_STR_SECTION): Define.\n+\t(init_sections_and_labels): Initialize debug_line_str_section\n+\tvariable.  Initialize debug_loc_section for -gdwarf-5 to\n+\tDEBUG_LOCLISTS_SECTION.  Formatting fixes.\n+\n 2017-09-20  Richard Biener  <rguenther@suse.de>\n \n \t* graphite-sese-to-poly.c (extract_affine): Properly handle"}, {"sha": "d757d2d455382d2bf0a98d35401c31dd735e54bf", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 62, "deletions": 41, "changes": 103, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcc34072c43b8081d337008d529d3e77e25c52bc/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcc34072c43b8081d337008d529d3e77e25c52bc/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=dcc34072c43b8081d337008d529d3e77e25c52bc", "patch": "@@ -3702,24 +3702,24 @@ new_addr_loc_descr (rtx addr, enum dtprel_bool dtprel)\n #ifndef DEBUG_DWO_INFO_SECTION\n #define DEBUG_DWO_INFO_SECTION \".debug_info.dwo\"\n #endif\n-#ifndef DEBUG_LTO_DWO_INFO_SECTION\n-#define DEBUG_LTO_DWO_INFO_SECTION \".gnu.debuglto_.debug_info.dwo\"\n-#endif\n #ifndef DEBUG_LTO_INFO_SECTION\n #define DEBUG_LTO_INFO_SECTION\t\".gnu.debuglto_.debug_info\"\n #endif\n+#ifndef DEBUG_LTO_DWO_INFO_SECTION\n+#define DEBUG_LTO_DWO_INFO_SECTION \".gnu.debuglto_.debug_info.dwo\"\n+#endif\n #ifndef DEBUG_ABBREV_SECTION\n #define DEBUG_ABBREV_SECTION\t\".debug_abbrev\"\n #endif\n+#ifndef DEBUG_LTO_ABBREV_SECTION\n+#define DEBUG_LTO_ABBREV_SECTION \".gnu.debuglto_.debug_abbrev\"\n+#endif\n #ifndef DEBUG_DWO_ABBREV_SECTION\n #define DEBUG_DWO_ABBREV_SECTION \".debug_abbrev.dwo\"\n #endif\n #ifndef DEBUG_LTO_DWO_ABBREV_SECTION\n #define DEBUG_LTO_DWO_ABBREV_SECTION \".gnu.debuglto_.debug_abbrev.dwo\"\n #endif\n-#ifndef DEBUG_LTO_ABBREV_SECTION\n-#define DEBUG_LTO_ABBREV_SECTION \".gnu.debuglto_.debug_abbrev\"\n-#endif\n #ifndef DEBUG_ARANGES_SECTION\n #define DEBUG_ARANGES_SECTION\t\".debug_aranges\"\n #endif\n@@ -3729,35 +3729,38 @@ new_addr_loc_descr (rtx addr, enum dtprel_bool dtprel)\n #ifndef DEBUG_MACINFO_SECTION\n #define DEBUG_MACINFO_SECTION     \".debug_macinfo\"\n #endif\n+#ifndef DEBUG_LTO_MACINFO_SECTION\n+#define DEBUG_LTO_MACINFO_SECTION      \".gnu.debuglto_.debug_macinfo\"\n+#endif\n #ifndef DEBUG_DWO_MACINFO_SECTION\n #define DEBUG_DWO_MACINFO_SECTION      \".debug_macinfo.dwo\"\n #endif\n #ifndef DEBUG_LTO_DWO_MACINFO_SECTION\n #define DEBUG_LTO_DWO_MACINFO_SECTION  \".gnu.debuglto_.debug_macinfo.dwo\"\n #endif\n-#ifndef DEBUG_LTO_MACINFO_SECTION\n-#define DEBUG_LTO_MACINFO_SECTION      \".gnu.debuglto_.debug_macinfo\"\n+#ifndef DEBUG_MACRO_SECTION\n+#define DEBUG_MACRO_SECTION\t\".debug_macro\"\n+#endif\n+#ifndef DEBUG_LTO_MACRO_SECTION\n+#define DEBUG_LTO_MACRO_SECTION \".gnu.debuglto_.debug_macro\"\n #endif\n #ifndef DEBUG_DWO_MACRO_SECTION\n #define DEBUG_DWO_MACRO_SECTION        \".debug_macro.dwo\"\n #endif\n-#ifndef DEBUG_MACRO_SECTION\n-#define DEBUG_MACRO_SECTION\t\".debug_macro\"\n-#endif\n #ifndef DEBUG_LTO_DWO_MACRO_SECTION\n #define DEBUG_LTO_DWO_MACRO_SECTION    \".gnu.debuglto_.debug_macro.dwo\"\n #endif\n-#ifndef DEBUG_LTO_MACRO_SECTION\n-#define DEBUG_LTO_MACRO_SECTION \".gnu.debuglto_.debug_macro\"\n-#endif\n #ifndef DEBUG_LINE_SECTION\n #define DEBUG_LINE_SECTION\t\".debug_line\"\n #endif\n+#ifndef DEBUG_LTO_LINE_SECTION\n+#define DEBUG_LTO_LINE_SECTION \".gnu.debuglto_.debug_line\"\n+#endif\n #ifndef DEBUG_DWO_LINE_SECTION\n #define DEBUG_DWO_LINE_SECTION \".debug_line.dwo\"\n #endif\n-#ifndef DEBUG_LTO_LINE_SECTION\n-#define DEBUG_LTO_LINE_SECTION \".gnu.debuglto_.debug_line.dwo\"\n+#ifndef DEBUG_LTO_DWO_LINE_SECTION\n+#define DEBUG_LTO_DWO_LINE_SECTION \".gnu.debuglto_.debug_line.dwo\"\n #endif\n #ifndef DEBUG_LOC_SECTION\n #define DEBUG_LOC_SECTION\t\".debug_loc\"\n@@ -3790,18 +3793,18 @@ new_addr_loc_descr (rtx addr, enum dtprel_bool dtprel)\n #ifndef DEBUG_LTO_DWO_STR_OFFSETS_SECTION\n #define DEBUG_LTO_DWO_STR_OFFSETS_SECTION \".gnu.debuglto_.debug_str_offsets.dwo\"\n #endif\n-#ifndef DEBUG_STR_DWO_SECTION\n-#define DEBUG_STR_DWO_SECTION   \".debug_str.dwo\"\n-#endif\n-#ifndef DEBUG_LTO_STR_DWO_SECTION\n-#define DEBUG_LTO_STR_DWO_SECTION \".gnu.debuglto_.debug_str.dwo\"\n-#endif\n #ifndef DEBUG_STR_SECTION\n #define DEBUG_STR_SECTION  \".debug_str\"\n #endif\n #ifndef DEBUG_LTO_STR_SECTION\n #define DEBUG_LTO_STR_SECTION \".gnu.debuglto_.debug_str\"\n #endif\n+#ifndef DEBUG_STR_DWO_SECTION\n+#define DEBUG_STR_DWO_SECTION   \".debug_str.dwo\"\n+#endif\n+#ifndef DEBUG_LTO_STR_DWO_SECTION\n+#define DEBUG_LTO_STR_DWO_SECTION \".gnu.debuglto_.debug_str.dwo\"\n+#endif\n #ifndef DEBUG_RANGES_SECTION\n #define DEBUG_RANGES_SECTION\t\".debug_ranges\"\n #endif\n@@ -3811,6 +3814,9 @@ new_addr_loc_descr (rtx addr, enum dtprel_bool dtprel)\n #ifndef DEBUG_LINE_STR_SECTION\n #define DEBUG_LINE_STR_SECTION  \".debug_line_str\"\n #endif\n+#ifndef DEBUG_LTO_LINE_STR_SECTION\n+#define DEBUG_LTO_LINE_STR_SECTION  \".gnu.debuglto_.debug_line_str\"\n+#endif\n \n /* Standard ELF section names for compiled code and data.  */\n #ifndef TEXT_SECTION_NAME\n@@ -27188,7 +27194,8 @@ output_macinfo (const char *debug_line_label, bool early_lto_debug)\n static void\n init_sections_and_labels (bool early_lto_debug)\n {\n-  /* As we may get called multiple times have a generation count for labels.  */\n+  /* As we may get called multiple times have a generation count for\n+     labels.  */\n   static unsigned generation = 0;\n \n   if (early_lto_debug)\n@@ -27201,14 +27208,14 @@ init_sections_and_labels (bool early_lto_debug)\n \t  debug_abbrev_section = get_section (DEBUG_LTO_ABBREV_SECTION,\n \t\t\t\t\t      SECTION_DEBUG | SECTION_EXCLUDE,\n \t\t\t\t\t      NULL);\n-\t  debug_macinfo_section_name = ((dwarf_strict && dwarf_version < 5)\n-\t\t\t\t\t? DEBUG_LTO_MACINFO_SECTION\n-\t\t\t\t\t: DEBUG_LTO_MACRO_SECTION);\n+\t  debug_macinfo_section_name\n+\t    = ((dwarf_strict && dwarf_version < 5)\n+\t       ? DEBUG_LTO_MACINFO_SECTION : DEBUG_LTO_MACRO_SECTION);\n \t  debug_macinfo_section = get_section (debug_macinfo_section_name,\n \t\t\t\t\t       SECTION_DEBUG\n \t\t\t\t\t       | SECTION_EXCLUDE, NULL);\n-\t  /* For macro info we have to refer to a debug_line section, so similar\n-\t     to split-dwarf emit a skeleton one for early debug.  */\n+\t  /* For macro info we have to refer to a debug_line section, so\n+\t     similar to split-dwarf emit a skeleton one for early debug.  */\n \t  debug_skeleton_line_section\n \t    = get_section (DEBUG_LTO_LINE_SECTION,\n \t\t\t   SECTION_DEBUG | SECTION_EXCLUDE, NULL);\n@@ -27228,15 +27235,16 @@ init_sections_and_labels (bool early_lto_debug)\n \t  debug_skeleton_info_section = get_section (DEBUG_LTO_INFO_SECTION,\n \t\t\t\t\t\t     SECTION_DEBUG\n \t\t\t\t\t\t     | SECTION_EXCLUDE, NULL);\n-\t  debug_skeleton_abbrev_section = get_section (DEBUG_LTO_ABBREV_SECTION,\n-\t\t\t\t\t\t       SECTION_DEBUG\n-\t\t\t\t\t\t       | SECTION_EXCLUDE, NULL);\n+\t  debug_skeleton_abbrev_section\n+\t    = get_section (DEBUG_LTO_ABBREV_SECTION,\n+\t\t\t   SECTION_DEBUG | SECTION_EXCLUDE, NULL);\n \t  ASM_GENERATE_INTERNAL_LABEL (debug_skeleton_abbrev_section_label,\n \t\t\t\t       DEBUG_SKELETON_ABBREV_SECTION_LABEL,\n \t\t\t\t       generation);\n \n-\t  /* Somewhat confusing detail: The skeleton_[abbrev|info] sections stay in\n-\t     the main .o, but the skeleton_line goes into the split off dwo.  */\n+\t  /* Somewhat confusing detail: The skeleton_[abbrev|info] sections\n+\t     stay in the main .o, but the skeleton_line goes into the split\n+\t     off dwo.  */\n \t  debug_skeleton_line_section\n \t    = get_section (DEBUG_LTO_LINE_SECTION,\n \t\t\t   SECTION_DEBUG | SECTION_EXCLUDE, NULL);\n@@ -27251,9 +27259,10 @@ init_sections_and_labels (bool early_lto_debug)\n \t\t\t\t       DEBUG_SKELETON_INFO_SECTION_LABEL,\n \t\t\t\t       generation);\n \t  debug_str_dwo_section = get_section (DEBUG_LTO_STR_DWO_SECTION,\n-\t\t\t\t\t       DEBUG_STR_DWO_SECTION_FLAGS, NULL);\n+\t\t\t\t\t       DEBUG_STR_DWO_SECTION_FLAGS,\n+\t\t\t\t\t       NULL);\n \t  debug_macinfo_section_name\n-\t    = (dwarf_strict\n+\t    = ((dwarf_strict && dwarf_version < 5)\n \t       ? DEBUG_LTO_DWO_MACINFO_SECTION : DEBUG_LTO_DWO_MACRO_SECTION);\n \t  debug_macinfo_section = get_section (debug_macinfo_section_name,\n \t\t\t\t\t       SECTION_DEBUG | SECTION_EXCLUDE,\n@@ -27262,6 +27271,10 @@ init_sections_and_labels (bool early_lto_debug)\n       debug_str_section = get_section (DEBUG_LTO_STR_SECTION,\n \t\t\t\t       DEBUG_STR_SECTION_FLAGS\n \t\t\t\t       | SECTION_EXCLUDE, NULL);\n+      if (!dwarf_split_debug_info && !DWARF2_ASM_LINE_DEBUG_INFO)\n+\tdebug_line_str_section\n+\t  = get_section (DEBUG_LTO_LINE_STR_SECTION,\n+\t\t\t DEBUG_STR_SECTION_FLAGS | SECTION_EXCLUDE, NULL);\n     }\n   else\n     {\n@@ -27271,10 +27284,13 @@ init_sections_and_labels (bool early_lto_debug)\n \t\t\t\t\t    SECTION_DEBUG, NULL);\n \t  debug_abbrev_section = get_section (DEBUG_ABBREV_SECTION,\n \t\t\t\t\t      SECTION_DEBUG, NULL);\n-\t  debug_loc_section = get_section (DEBUG_LOC_SECTION,\n+\t  debug_loc_section = get_section (dwarf_version >= 5\n+\t\t\t\t\t   ? DEBUG_LOCLISTS_SECTION\n+\t\t\t\t\t   : DEBUG_LOC_SECTION,\n \t\t\t\t\t   SECTION_DEBUG, NULL);\n \t  debug_macinfo_section_name\n-\t      = dwarf_strict ? DEBUG_MACINFO_SECTION : DEBUG_MACRO_SECTION;\n+\t    = ((dwarf_strict && dwarf_version < 5)\n+\t       ? DEBUG_MACINFO_SECTION : DEBUG_MACRO_SECTION);\n \t  debug_macinfo_section = get_section (debug_macinfo_section_name,\n \t\t\t\t\t       SECTION_DEBUG, NULL);\n \t}\n@@ -27311,15 +27327,17 @@ init_sections_and_labels (bool early_lto_debug)\n \t  ASM_GENERATE_INTERNAL_LABEL (debug_skeleton_info_section_label,\n \t\t\t\t       DEBUG_SKELETON_INFO_SECTION_LABEL,\n \t\t\t\t       generation);\n-\t  debug_loc_section = get_section (DEBUG_DWO_LOC_SECTION,\n+\t  debug_loc_section = get_section (dwarf_version >= 5\n+\t\t\t\t\t   ? DEBUG_DWO_LOCLISTS_SECTION\n+\t\t\t\t\t   : DEBUG_DWO_LOC_SECTION,\n \t\t\t\t\t   SECTION_DEBUG | SECTION_EXCLUDE,\n \t\t\t\t\t   NULL);\n \t  debug_str_dwo_section = get_section (DEBUG_STR_DWO_SECTION,\n \t\t\t\t\t       DEBUG_STR_DWO_SECTION_FLAGS,\n \t\t\t\t\t       NULL);\n \t  debug_macinfo_section_name\n-\t    = (dwarf_strict && dwarf_version < 5)\n-\t      ? DEBUG_DWO_MACINFO_SECTION : DEBUG_DWO_MACRO_SECTION;\n+\t    = ((dwarf_strict && dwarf_version < 5)\n+\t       ? DEBUG_DWO_MACINFO_SECTION : DEBUG_DWO_MACRO_SECTION);\n \t  debug_macinfo_section = get_section (debug_macinfo_section_name,\n \t\t\t\t\t       SECTION_DEBUG | SECTION_EXCLUDE,\n \t\t\t\t\t       NULL);\n@@ -27334,6 +27352,9 @@ init_sections_and_labels (bool early_lto_debug)\n \t\t\t\t\t    SECTION_DEBUG, NULL);\n       debug_str_section = get_section (DEBUG_STR_SECTION,\n \t\t\t\t       DEBUG_STR_SECTION_FLAGS, NULL);\n+      if (!dwarf_split_debug_info && !DWARF2_ASM_LINE_DEBUG_INFO)\n+\tdebug_line_str_section = get_section (DEBUG_LINE_STR_SECTION,\n+\t\t\t\t\t      DEBUG_STR_SECTION_FLAGS, NULL);\n       debug_ranges_section = get_section (dwarf_version >= 5\n \t\t\t\t\t  ? DEBUG_RNGLISTS_SECTION\n \t\t\t\t\t  : DEBUG_RANGES_SECTION,\n@@ -27355,7 +27376,7 @@ init_sections_and_labels (bool early_lto_debug)\n     ASM_GENERATE_INTERNAL_LABEL (ranges_base_label,\n \t\t\t\t DEBUG_RANGES_SECTION_LABEL, 2 + generation);\n   ASM_GENERATE_INTERNAL_LABEL (debug_addr_section_label,\n-                               DEBUG_ADDR_SECTION_LABEL, generation);\n+\t\t\t       DEBUG_ADDR_SECTION_LABEL, generation);\n   ASM_GENERATE_INTERNAL_LABEL (macinfo_section_label,\n \t\t\t       (dwarf_strict && dwarf_version < 5)\n \t\t\t       ? DEBUG_MACINFO_SECTION_LABEL"}]}