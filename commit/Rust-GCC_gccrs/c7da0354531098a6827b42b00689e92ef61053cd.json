{"sha": "c7da0354531098a6827b42b00689e92ef61053cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdkYTAzNTQ1MzEwOThhNjgyN2I0MmIwMDY4OWU5MmVmNjEwNTNjZA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-02-19T15:42:31Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-02-19T15:42:31Z"}, "message": "re PR tree-optimization/42916 (\"-fcompare-debug failure\" with \"-O1 -funroll-loops -ftree-vectorize\")\n\n2010-02-19  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/42916\n\t* tree-vect-slp.c (vect_slp_analyze_bb): Count only real\n\tinstructions.\n\n\t* gcc.dg/pr42916.c: New testcase.\n\nFrom-SVN: r156898", "tree": {"sha": "4b89e58bc0e9daefe49eba7bec41de25c0c6e3ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4b89e58bc0e9daefe49eba7bec41de25c0c6e3ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7da0354531098a6827b42b00689e92ef61053cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7da0354531098a6827b42b00689e92ef61053cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7da0354531098a6827b42b00689e92ef61053cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7da0354531098a6827b42b00689e92ef61053cd/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e5dfb95fd7d79615a7d6a9573ea6d4aaa6c8d1bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5dfb95fd7d79615a7d6a9573ea6d4aaa6c8d1bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5dfb95fd7d79615a7d6a9573ea6d4aaa6c8d1bc"}], "stats": {"total": 39, "additions": 38, "deletions": 1}, "files": [{"sha": "c516bb89944dd4d59f39c46f19575f5679d66ff8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c7da0354531098a6827b42b00689e92ef61053cd", "patch": "@@ -1,3 +1,9 @@\n+2010-02-19  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/42916\n+\t* tree-vect-slp.c (vect_slp_analyze_bb): Count only real\n+\tinstructions.\n+\n 2010-02-19  Andreas Schwab  <schwab@linux-m68k.org>\n \n \t* configure.ac: Replace all uses of changequote in macro arguments"}, {"sha": "ff44628f4c1aca5304eaa339cba5d25e423ed12d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c7da0354531098a6827b42b00689e92ef61053cd", "patch": "@@ -1,3 +1,8 @@\n+2010-02-19  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/42916\n+\t* gcc.dg/pr42916.c: New testcase.\n+\n 2010-02-18  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/42837"}, {"sha": "d32ba94882a1cfaf01b496ed3c16981f73a6d24f", "filename": "gcc/testsuite/gcc.dg/pr42916.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42916.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42916.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42916.c?ref=c7da0354531098a6827b42b00689e92ef61053cd", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -funroll-loops -ftree-vectorize -fcompare-debug\" } */\n+\n+int seed;\n+\n+static inline int hash(const char *str)\n+{\n+  int h = seed++;\n+  int i = 12;\n+  while (i--)\n+    h += (h << 3) ^ *str++;\n+  return h;\n+}\n+\n+void f(const char *str, int *h)\n+{\n+  int i = 6;\n+  while (i--)\n+    *h++ = hash(str);\n+}"}, {"sha": "ee4807a80348fa0295fc32d10e371196d562fd31", "filename": "gcc/tree-vect-slp.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2Ftree-vect-slp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7da0354531098a6827b42b00689e92ef61053cd/gcc%2Ftree-vect-slp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-slp.c?ref=c7da0354531098a6827b42b00689e92ef61053cd", "patch": "@@ -1273,7 +1273,13 @@ vect_slp_analyze_bb (basic_block bb)\n     fprintf (vect_dump, \"===vect_slp_analyze_bb===\\n\");\n \n   for (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n-    insns++;\n+    {\n+      gimple stmt = gsi_stmt (gsi);\n+      if (!is_gimple_debug (stmt)\n+\t  && !gimple_nop_p (stmt)\n+\t  && !gimple_code (stmt) == GIMPLE_LABEL)\n+\tinsns++;\n+    }\n \n   if (insns > PARAM_VALUE (PARAM_SLP_MAX_INSNS_IN_BB))\n     {"}]}