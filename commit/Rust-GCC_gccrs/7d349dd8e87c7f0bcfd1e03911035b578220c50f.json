{"sha": "7d349dd8e87c7f0bcfd1e03911035b578220c50f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QzNDlkZDhlODdjN2YwYmNmZDFlMDM5MTEwMzViNTc4MjIwYzUwZg==", "commit": {"author": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2019-08-26T14:39:08Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2019-08-26T14:39:08Z"}, "message": "PR c++/91545 - ICE in constexpr store evaluation.\n\n\t* constexpr.c (cxx_eval_store_expression): Check FIELD_DECL instead\n\tof DECL_P.\n\n\t* g++.dg/cpp0x/pr91545.C: New test.\n\nFrom-SVN: r274930", "tree": {"sha": "7a7c530fd5e3ae90ee9e349a496020ba1d42d034", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a7c530fd5e3ae90ee9e349a496020ba1d42d034"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d349dd8e87c7f0bcfd1e03911035b578220c50f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d349dd8e87c7f0bcfd1e03911035b578220c50f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d349dd8e87c7f0bcfd1e03911035b578220c50f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d349dd8e87c7f0bcfd1e03911035b578220c50f/comments", "author": null, "committer": null, "parents": [{"sha": "d2ea2406ccd002f8c150e6accaffd6bfdbd7444b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2ea2406ccd002f8c150e6accaffd6bfdbd7444b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2ea2406ccd002f8c150e6accaffd6bfdbd7444b"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "f0eb35c1e4ed4ed2b00cd9102e682a75628c44d8", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7d349dd8e87c7f0bcfd1e03911035b578220c50f", "patch": "@@ -1,3 +1,9 @@\n+2019-08-26  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/91545 - ICE in constexpr store evaluation.\n+\t* constexpr.c (cxx_eval_store_expression): Check FIELD_DECL instead\n+\tof DECL_P.\n+\n 2019-08-24  Nathan Sidwell  <nathan@acm.org>\n \n \t* class.c (check_for_overrides): Conversion operators need"}, {"sha": "6c547d6d179f3e6fd40fac4af106da09895d0b94", "filename": "gcc/cp/constexpr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Fcp%2Fconstexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Fcp%2Fconstexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fconstexpr.c?ref=7d349dd8e87c7f0bcfd1e03911035b578220c50f", "patch": "@@ -3849,7 +3849,7 @@ cxx_eval_store_expression (const constexpr_ctx *ctx, tree t,\n \t  {\n \t    tree ob = TREE_OPERAND (probe, 0);\n \t    tree elt = TREE_OPERAND (probe, 1);\n-\t    if (DECL_P (elt) && DECL_MUTABLE_P (elt))\n+\t    if (TREE_CODE (elt) == FIELD_DECL && DECL_MUTABLE_P (elt))\n \t      mutable_p = true;\n \t    if (evaluated\n \t\t&& modifying_const_object_p (TREE_CODE (t), probe, mutable_p)"}, {"sha": "fab9d338e30c32672c07cc185ba5a12ee4207b8c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7d349dd8e87c7f0bcfd1e03911035b578220c50f", "patch": "@@ -1,12 +1,17 @@\n+2019-08-26  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/91545 - ICE in constexpr store evaluation.\n+\t* g++.dg/cpp0x/pr91545.C: New test.\n+\n 2019-08-26  Tejas Joshi  <tejasjoshi9673@gmail.com>\n \n \t* gcc.target/i386/sse4_1-round-roundeven-1.c: New test.\n \t* gcc.target/i386/sse4_1-round-roundeven-2.c: New test.\n \n 2019-08-26  Tejas Joshi  <tejasjoshi9673@gmail.com>\n \n-        * gcc.dg/torture/builtin-round-roundeven.c: New test.\n-        * gcc.dg/torture/builtin-round-roundevenf128.c: Likewise.\n+\t* gcc.dg/torture/builtin-round-roundeven.c: New test.\n+\t* gcc.dg/torture/builtin-round-roundevenf128.c: Likewise.\n \n 2019-08-26  Robin Dapp  <rdapp@linux.ibm.com>\n "}, {"sha": "2aa1fa18bd5f1fcb4efefa4c5943f04ae6700005", "filename": "gcc/testsuite/g++.dg/cpp0x/pr91545.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr91545.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d349dd8e87c7f0bcfd1e03911035b578220c50f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr91545.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr91545.C?ref=7d349dd8e87c7f0bcfd1e03911035b578220c50f", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/91545\n+// { dg-do compile { target c++11 } }\n+\n+long a[1];\n+int d, e { d && (a[d] = 0) };"}]}