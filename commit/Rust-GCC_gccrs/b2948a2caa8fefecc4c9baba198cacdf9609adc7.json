{"sha": "b2948a2caa8fefecc4c9baba198cacdf9609adc7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjI5NDhhMmNhYThmZWZlY2M0YzliYWJhMTk4Y2FjZGY5NjA5YWRjNw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-06-26T13:42:33Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-06-26T13:42:33Z"}, "message": "postreload.c (reload_cse_simplify_set): Call cselib_lookup earlier.\n\n\t* postreload.c (reload_cse_simplify_set): Call cselib_lookup\n\tearlier.  Don't check if SRC is a constant.\n\nFrom-SVN: r68533", "tree": {"sha": "12edef829212a7704e1711b29fc827c2a2a42992", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/12edef829212a7704e1711b29fc827c2a2a42992"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2948a2caa8fefecc4c9baba198cacdf9609adc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2948a2caa8fefecc4c9baba198cacdf9609adc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2948a2caa8fefecc4c9baba198cacdf9609adc7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2948a2caa8fefecc4c9baba198cacdf9609adc7/comments", "author": null, "committer": null, "parents": [{"sha": "15e35479ebbb6b462f01b0f0330c2398089a33ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15e35479ebbb6b462f01b0f0330c2398089a33ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15e35479ebbb6b462f01b0f0330c2398089a33ed"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "48334d73906f67564407d8058131f4ef99ab79af", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2948a2caa8fefecc4c9baba198cacdf9609adc7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2948a2caa8fefecc4c9baba198cacdf9609adc7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b2948a2caa8fefecc4c9baba198cacdf9609adc7", "patch": "@@ -1,3 +1,8 @@\n+2003-06-26  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* postreload.c (reload_cse_simplify_set): Call cselib_lookup\n+\tearlier.  Don't check if SRC is a constant.\n+\n 2003-06-26  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* Makefile.in (OBJS): Add postreload.o."}, {"sha": "1c53395be327d9381a108b6f7569fd87a16432c2", "filename": "gcc/postreload.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2948a2caa8fefecc4c9baba198cacdf9609adc7/gcc%2Fpostreload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2948a2caa8fefecc4c9baba198cacdf9609adc7/gcc%2Fpostreload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpostreload.c?ref=b2948a2caa8fefecc4c9baba198cacdf9609adc7", "patch": "@@ -246,21 +246,19 @@ reload_cse_simplify_set (set, insn)\n     return 0;\n #endif\n \n+  val = cselib_lookup (src, GET_MODE (SET_DEST (set)), 0);\n+  if (! val)\n+    return 0;\n+\n   /* If memory loads are cheaper than register copies, don't change them.  */\n   if (GET_CODE (src) == MEM)\n     old_cost = MEMORY_MOVE_COST (GET_MODE (src), dclass, 1);\n-  else if (CONSTANT_P (src))\n-    old_cost = rtx_cost (src, SET);\n   else if (GET_CODE (src) == REG)\n     old_cost = REGISTER_MOVE_COST (GET_MODE (src),\n \t\t\t\t   REGNO_REG_CLASS (REGNO (src)), dclass);\n   else\n-    /* ???   */\n     old_cost = rtx_cost (src, SET);\n \n-  val = cselib_lookup (src, GET_MODE (SET_DEST (set)), 0);\n-  if (! val)\n-    return 0;\n   for (l = val->locs; l; l = l->next)\n     {\n       rtx this_rtx = l->loc;"}]}