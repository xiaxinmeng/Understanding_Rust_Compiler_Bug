{"sha": "101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTAxZTE3NGQyYzdmMWQ5N2EyNzZjZjk1MWJjYzZkNTVlY2JjYWJkZA==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2008-02-14T21:41:40Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2008-02-14T21:41:40Z"}, "message": "re PR preprocessor/35061 (#pragma pop_macro causes ICE if no  macro value on stack)\n\n\tPR preprocessor/35061\ngcc\n\t* c-pragma.c (handle_pragma_pop_macro): Check that\n\tpushed_macro_table has been allocated.\ntestsuite\n\t* gcc.dg/cpp/pragma_pop_macro-1.c:  New file\n\nFrom-SVN: r132322", "tree": {"sha": "cdaa87661a8e9905d3600ff02fe3ca6acec3909b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cdaa87661a8e9905d3600ff02fe3ca6acec3909b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/comments", "author": null, "committer": null, "parents": [{"sha": "0cc24ff082435b48eca7ec991e18eb437d7094b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cc24ff082435b48eca7ec991e18eb437d7094b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cc24ff082435b48eca7ec991e18eb437d7094b7"}], "stats": {"total": 30, "additions": 27, "deletions": 3}, "files": [{"sha": "ab1a89bd8d27f604d67aa3bb21ecce91d6ffb9bc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "patch": "@@ -1,3 +1,9 @@\n+2008-02-14  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR preprocessor/35061\n+\t* c-pragma.c (handle_pragma_pop_macro): Check that\n+\tpushed_macro_table has been allocated.\n+\n 2008-02-14  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR middle-end/35136"}, {"sha": "f7da67622ce47841f405a5f29612e240a29149cb", "filename": "gcc/c-pragma.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2Fc-pragma.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2Fc-pragma.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-pragma.c?ref=101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "patch": "@@ -341,7 +341,7 @@ handle_pragma_pop_macro (cpp_reader *reader)\n   enum cpp_ttype token;\n   struct def_pragma_macro dummy, *c;\n   const char *macroname;\n-  void **slot;\n+  void **slot = NULL;\n \n   if (pragma_lex (&x) != CPP_OPEN_PAREN)\n     GCC_BAD (\"missing %<(%> after %<#pragma pop_macro%> - ignored\");\n@@ -367,8 +367,9 @@ handle_pragma_pop_macro (cpp_reader *reader)\n \n   dummy.hash = htab_hash_string (macroname);\n   dummy.name = macroname;\n-  slot = htab_find_slot_with_hash (pushed_macro_table, &dummy,\n-\t\t\t\t   dummy.hash, NO_INSERT);\n+  if (pushed_macro_table)\n+    slot = htab_find_slot_with_hash (pushed_macro_table, &dummy,\n+\t\t\t\t     dummy.hash, NO_INSERT);\n   if (slot == NULL)\n     return;\n   c = *slot;"}, {"sha": "4c1c8b8705cd9d27085e7acba06aabb4cfa315d1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "patch": "@@ -1,3 +1,8 @@\n+2008-02-14  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR preprocessor/35061\n+\t* gcc.dg/cpp/pragma_pop_macro-1.c:  New test.\n+\n 2008-02-14  Paolo Carlini  <pcarlini@suse.de>\n \n         PR c++/28743"}, {"sha": "82beefc061823f2d1725991f2cfc0124ebebd21b", "filename": "gcc/testsuite/gcc.dg/cpp/pragma-pop_macro-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpragma-pop_macro-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/101e174d2c7f1d97a276cf951bcc6d55ecbcabdd/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpragma-pop_macro-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpragma-pop_macro-1.c?ref=101e174d2c7f1d97a276cf951bcc6d55ecbcabdd", "patch": "@@ -0,0 +1,12 @@\n+/* PR preprocessor/35061 */\n+/* Do nothing if there is nothing on the macro stack to pop.  */\n+\n+/* { dg do-preprocess { target *-*-mingw*  *-*-cygwin* } } */\n+\n+#define X  1\n+/* # pragma push_macro(\"X\") */\n+# undef X\n+# pragma pop_macro(\"X\")\n+#ifdef X\n+#error X is defined\n+#endif"}]}