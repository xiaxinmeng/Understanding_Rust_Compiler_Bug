{"sha": "09b201fc9b3a17202761bde6b25f84bb844d5b1a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDliMjAxZmM5YjNhMTcyMDI3NjFiZGU2YjI1Zjg0YmI4NDRkNWIxYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-05-11T06:50:24Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-05-11T06:50:24Z"}, "message": "gcc.c (execute): For -### don't quote arguments that contain just alphanumerics and _/-.\n\n\t* gcc.c (execute): For -### don't quote arguments that\n\tcontain just alphanumerics and _/-. characters.\n\t* doc/invoke.texi: Document that change for -###.\n\nFrom-SVN: r159255", "tree": {"sha": "8f7588d5feab29a97a6a9665a37867bf8904390c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f7588d5feab29a97a6a9665a37867bf8904390c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09b201fc9b3a17202761bde6b25f84bb844d5b1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09b201fc9b3a17202761bde6b25f84bb844d5b1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09b201fc9b3a17202761bde6b25f84bb844d5b1a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09b201fc9b3a17202761bde6b25f84bb844d5b1a/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3f592b380f98e60a084f62d9c54aa3c2094a22fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f592b380f98e60a084f62d9c54aa3c2094a22fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f592b380f98e60a084f62d9c54aa3c2094a22fa"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "40eef0289baebf980a9d37bb0521c0ad8c56f2ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09b201fc9b3a17202761bde6b25f84bb844d5b1a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09b201fc9b3a17202761bde6b25f84bb844d5b1a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=09b201fc9b3a17202761bde6b25f84bb844d5b1a", "patch": "@@ -1,5 +1,9 @@\n 2010-05-11  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* gcc.c (execute): For -### don't quote arguments that\n+\tcontain just alphanumerics and _/-. characters.\n+\t* doc/invoke.texi: Document that change for -###.\n+\n \tPR debug/44023\n \t* df-problems.c (struct dead_debug): Add to_rescan field.\n \t(dead_debug_init): Clear to_rescan field."}, {"sha": "98f97cc2d50fb61e421dffa40b4db4d1101d653c", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09b201fc9b3a17202761bde6b25f84bb844d5b1a/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09b201fc9b3a17202761bde6b25f84bb844d5b1a/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=09b201fc9b3a17202761bde6b25f84bb844d5b1a", "patch": "@@ -1172,9 +1172,9 @@ program and of the preprocessor and the compiler proper.\n \n @item -###\n @opindex ###\n-Like @option{-v} except the commands are not executed and all command\n-arguments are quoted.  This is useful for shell scripts to capture the\n-driver-generated command lines.\n+Like @option{-v} except the commands are not executed and arguments\n+are quoted unless they contain only alphanumeric characters or @code{./-_}.\n+This is useful for shell scripts to capture the driver-generated command lines.\n \n @item -pipe\n @opindex pipe"}, {"sha": "6455437a907ebf7744c28e8ad7cf31945635b4ad", "filename": "gcc/gcc.c", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09b201fc9b3a17202761bde6b25f84bb844d5b1a/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09b201fc9b3a17202761bde6b25f84bb844d5b1a/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=09b201fc9b3a17202761bde6b25f84bb844d5b1a", "patch": "@@ -3020,14 +3020,23 @@ execute (void)\n \t      for (j = commands[i].argv; *j; j++)\n \t\t{\n \t\t  const char *p;\n-\t\t  fprintf (stderr, \" \\\"\");\n \t\t  for (p = *j; *p; ++p)\n+\t\t    if (!ISALNUM ((unsigned char) *p)\n+\t\t\t&& *p != '_' && *p != '/' && *p != '-' && *p != '.')\n+\t\t      break;\n+\t\t  if (*p || !*j)\n \t\t    {\n-\t\t      if (*p == '\"' || *p == '\\\\' || *p == '$')\n-\t\t\tfputc ('\\\\', stderr);\n-\t\t      fputc (*p, stderr);\n+\t\t      fprintf (stderr, \" \\\"\");\n+\t\t      for (p = *j; *p; ++p)\n+\t\t\t{\n+\t\t\t  if (*p == '\"' || *p == '\\\\' || *p == '$')\n+\t\t\t    fputc ('\\\\', stderr);\n+\t\t\t  fputc (*p, stderr);\n+\t\t\t}\n+\t\t      fputc ('\"', stderr);\n \t\t    }\n-\t\t  fputc ('\"', stderr);\n+\t\t  else\n+\t\t    fprintf (stderr, \" %s\", *j);\n \t\t}\n \t    }\n \t  else"}]}