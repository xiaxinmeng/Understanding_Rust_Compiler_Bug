{"sha": "87526ff17cbea5303516e983886f6cea2d851176", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc1MjZmZjE3Y2JlYTUzMDM1MTZlOTgzODg2ZjZjZWEyZDg1MTE3Ng==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-04-24T08:34:14Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-04-24T08:34:14Z"}, "message": "re PR fortran/39861 (ICE with INTRINSIC in module: write_symbol(): bad module symbol)\n\n2009-04-24  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/39861\n\tPR fortran/39864\n\t* symbol.c (gfc_copy_formal_args_intr): Set attr.flavor and attr.dummy\n\tfor the formal arguments.\n\n\n2009-04-24  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/39861\n\tPR fortran/39864\n\t* gfortran.dg/intrinsic_1.f90: New.\n\nFrom-SVN: r146677", "tree": {"sha": "8a05766cd1990b96850ccead3898f876692730d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a05766cd1990b96850ccead3898f876692730d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87526ff17cbea5303516e983886f6cea2d851176", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87526ff17cbea5303516e983886f6cea2d851176", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87526ff17cbea5303516e983886f6cea2d851176", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87526ff17cbea5303516e983886f6cea2d851176/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6e15ec950f40f7c1ad74c440d6f46344b69dcb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6e15ec950f40f7c1ad74c440d6f46344b69dcb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6e15ec950f40f7c1ad74c440d6f46344b69dcb1"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "6af8cbe2042aeeebda16d4bbe0fbef0ee4445a29", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=87526ff17cbea5303516e983886f6cea2d851176", "patch": "@@ -1,3 +1,10 @@\n+2009-04-24  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/39861\n+\tPR fortran/39864\n+\t* symbol.c (gfc_copy_formal_args_intr): Set attr.flavor and attr.dummy\n+\tfor the formal arguments.\n+\n 2009-04-21  Taras Glek <tglek@mozilla.com>\n \n \t* f95-lang.c: Update GTY annotations to new syntax."}, {"sha": "6aa63bebabe02b56c41eebd1af26b2c23e616444", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=87526ff17cbea5303516e983886f6cea2d851176", "patch": "@@ -3865,6 +3865,8 @@ gfc_copy_formal_args_intr (gfc_symbol *dest, gfc_intrinsic_sym *src)\n       /* May need to copy more info for the symbol.  */\n       formal_arg->sym->ts = curr_arg->ts;\n       formal_arg->sym->attr.optional = curr_arg->optional;\n+      formal_arg->sym->attr.flavor = FL_VARIABLE;\n+      formal_arg->sym->attr.dummy = 1;\n \n       /* If this isn't the first arg, set up the next ptr.  For the\n         last arg built, the formal_arg->next will never get set to"}, {"sha": "9f186666725ec10f2fede11c71efe073e1525e4b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=87526ff17cbea5303516e983886f6cea2d851176", "patch": "@@ -1,3 +1,9 @@\n+2009-04-24  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/39861\n+\tPR fortran/39864\n+\t* gfortran.dg/intrinsic_1.f90: New.\n+\n 2009-04-24  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/alignment7.adb: New test."}, {"sha": "b2413de1a3f81b801ac426bef63352c03f555ae0", "filename": "gcc/testsuite/gfortran.dg/intrinsic_1.f90", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87526ff17cbea5303516e983886f6cea2d851176/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_1.f90?ref=87526ff17cbea5303516e983886f6cea2d851176", "patch": "@@ -0,0 +1,28 @@\n+! { dg-do compile }\n+!\n+! PR 39861/39864\n+!\n+! Test cases provided by Dominique d'Humieres <dominiq@lps.ens.fr>\n+! and Michael Richmond <michael.a.richmond@nasa.gov>.\n+\n+module vector_calculus\n+  intrinsic :: dot_product, sqrt\n+\n+contains\n+\n+  function len(r)\n+    real, dimension(:), intent(in) :: r\n+    real :: len\n+    len = sqrt(dot_product(r,r))\n+  end function len\n+\n+  FUNCTION next_state()\n+    INTRINSIC :: RESHAPE\n+    INTEGER, PARAMETER :: trantb(1,1) = RESHAPE((/1,2/), shape=(/1,1/))\n+    next_state = trantb(1, 1)\n+  END FUNCTION next_state\n+\n+end module vector_calculus\n+\n+! { dg-final { cleanup-modules \"vector_calculus\" } }\n+"}]}