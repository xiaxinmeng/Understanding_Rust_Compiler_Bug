{"sha": "7d12cee1f19f361979d95de783cd939472c61c99", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QxMmNlZTFmMTlmMzYxOTc5ZDk1ZGU3ODNjZDkzOTQ3MmM2MWM5OQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1998-06-17T17:54:27Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-06-17T17:54:27Z"}, "message": "* fold-const.c (make_range): Do not widen the type of the expression.\n\nFrom-SVN: r20545", "tree": {"sha": "900d25b1198794ec9e744e8f9487702e15f0afe2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/900d25b1198794ec9e744e8f9487702e15f0afe2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d12cee1f19f361979d95de783cd939472c61c99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d12cee1f19f361979d95de783cd939472c61c99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d12cee1f19f361979d95de783cd939472c61c99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d12cee1f19f361979d95de783cd939472c61c99/comments", "author": null, "committer": null, "parents": [{"sha": "b74390dec9feec897787bf938721323c18f42092", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b74390dec9feec897787bf938721323c18f42092", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b74390dec9feec897787bf938721323c18f42092"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "e271a4752c6edf7b75a96c84b23ebdb51d5cc70b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d12cee1f19f361979d95de783cd939472c61c99/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d12cee1f19f361979d95de783cd939472c61c99/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7d12cee1f19f361979d95de783cd939472c61c99", "patch": "@@ -65,6 +65,8 @@ Wed Jun 17 15:57:48 EDT 1998  Andrew MacLeod  (amacleod@cygnus.com)\n \n Wed Jun 17 08:38:13 1998  Jeffrey A Law  (law@cygnus.com)\n \n+\t* fold-const.c (make_range): Do not widen the type of the expression.\n+\n \t* expr.c (check_max_integer_computation_mode): New function.\n \t(expand_expr): Avoid integer computations in modes wider than\n \tMAX_INTEGER_COMPUTATION_MODE."}, {"sha": "73b018924650e6b53c5e5733571ee530fd3ed479", "filename": "gcc/fold-const.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d12cee1f19f361979d95de783cd939472c61c99/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d12cee1f19f361979d95de783cd939472c61c99/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=7d12cee1f19f361979d95de783cd939472c61c99", "patch": "@@ -2821,6 +2821,7 @@ make_range (exp, pin_p, plow, phigh)\n {\n   enum tree_code code;\n   tree arg0, arg1, type = NULL_TREE;\n+  tree orig_type = NULL_TREE;\n   int in_p, n_in_p;\n   tree low, high, n_low, n_high;\n \n@@ -2958,6 +2959,11 @@ make_range (exp, pin_p, plow, phigh)\n \t  continue;\n \n \tcase NOP_EXPR:  case NON_LVALUE_EXPR:  case CONVERT_EXPR:\n+\t  if (orig_type == NULL_TREE)\n+\t    orig_type = type;\n+\t  if (TYPE_PRECISION (type) > TYPE_PRECISION (orig_type))\n+\t    break;\n+\n \t  if (! INTEGRAL_TYPE_P (type)\n \t      || (low != 0 && ! int_fits_type_p (low, type))\n \t      || (high != 0 && ! int_fits_type_p (high, type)))"}]}