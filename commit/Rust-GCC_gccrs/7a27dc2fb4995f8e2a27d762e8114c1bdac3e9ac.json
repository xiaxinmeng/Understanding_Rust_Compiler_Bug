{"sha": "7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2EyN2RjMmZiNDk5NWY4ZTJhMjdkNzYyZTgxMTRjMWJkYWMzZTlhYw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-03-16T09:56:18Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-03-16T09:56:18Z"}, "message": "target-supports.exp (check_missing_uclibc_feature): Don't assume that the target has <features.h>.\n\ngcc/testsuite/\n\t* lib/target-supports.exp (check_missing_uclibc_feature): Don't\n\tassume that the target has <features.h>.\n\nFrom-SVN: r122983", "tree": {"sha": "5950cdd61b5fd4eea50dcbd6a917797de19efcea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5950cdd61b5fd4eea50dcbd6a917797de19efcea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac/comments", "author": null, "committer": null, "parents": [{"sha": "4c8a652e3f9bb666e2f85ee8db03f37c921233b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c8a652e3f9bb666e2f85ee8db03f37c921233b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c8a652e3f9bb666e2f85ee8db03f37c921233b5"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "505090251d71387d3691ecdd1ae91e1784f6fe74", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac", "patch": "@@ -1,3 +1,8 @@\n+2007-03-16  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* lib/target-supports.exp (check_missing_uclibc_feature): Don't\n+\tassume that the target has <features.h>.\n+\n 2007-03-16  Richard Sandiford  <richard@codesourcery.com>\n \n \t* gcc.dg/20020426-2.c: Add the fpic requirement to the PIC"}, {"sha": "fec52ac0a896e5508707fdf0324a8f83376a9404", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=7a27dc2fb4995f8e2a27d762e8114c1bdac3e9ac", "patch": "@@ -2077,15 +2077,12 @@ proc check_effective_target_uclibc {} {\n # described by __$feature__ is not present.\n \n proc check_missing_uclibc_feature {feature} {\n-    if {[check_no_compiler_messages $feature object \"\n-\t     #include <features.h>\n-\t     #if defined (__UCLIBC__) && !defined (__${feature}__)\n-\t     #error FOO\n-\t     #endif\n-\t \"]} {\n-\treturn 0\n-    }\n-    return 1\n+    return [check_no_compiler_messages $feature object \"\n+\t#include <features.h>\n+\t#if !defined (__UCLIBC) || !defined (__${feature}__)\n+\t#error FOO\n+\t#endif\n+    \"]\n }\n \n # Return true if this is a Newlib target."}]}