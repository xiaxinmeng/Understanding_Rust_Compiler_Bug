{"sha": "5c5b22838958187f83bf60d0394cc06942796646", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWM1YjIyODM4OTU4MTg3ZjgzYmY2MGQwMzk0Y2MwNjk0Mjc5NjY0Ng==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-04-26T02:15:52Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-04-26T02:15:52Z"}, "message": "re PR c/2098 (compare with unsigned variable - no error reporting)\n\n        PR c/2098\n        * c-common.c (shorten_compare): Simplfy conditions leading to\n        the generation of a warning.\n\n\t* gcc.dg/compare6.c: New.\n\nFrom-SVN: r52778", "tree": {"sha": "d191e51bd4b8889ad81bf2f13318123a238b62bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d191e51bd4b8889ad81bf2f13318123a238b62bb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c5b22838958187f83bf60d0394cc06942796646", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c5b22838958187f83bf60d0394cc06942796646", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c5b22838958187f83bf60d0394cc06942796646", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c5b22838958187f83bf60d0394cc06942796646/comments", "author": null, "committer": null, "parents": [{"sha": "28ce94d46b9b885cc01f1649bc545b6978e033d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28ce94d46b9b885cc01f1649bc545b6978e033d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28ce94d46b9b885cc01f1649bc545b6978e033d0"}], "stats": {"total": 32, "additions": 20, "deletions": 12}, "files": [{"sha": "2813ca25792867929751143f98fd5e5468d69655", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c5b22838958187f83bf60d0394cc06942796646/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c5b22838958187f83bf60d0394cc06942796646/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5c5b22838958187f83bf60d0394cc06942796646", "patch": "@@ -1,3 +1,9 @@\n+2002-04-25  Richard Henderson  <rth@redhat.com>\n+\n+\tPR c/2098\n+\t* c-common.c (shorten_compare): Simplfy conditions leading to\n+\tthe generation of a warning.\n+\n 2002-04-25  Richard Henderson  <rth@redhat.com>\n \n \tPR c/2035"}, {"sha": "f9337df907f298d5cbc198fcc1ece6d2f9ca0830", "filename": "gcc/c-common.c", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c5b22838958187f83bf60d0394cc06942796646/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c5b22838958187f83bf60d0394cc06942796646/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=5c5b22838958187f83bf60d0394cc06942796646", "patch": "@@ -1999,19 +1999,8 @@ shorten_compare (op0_ptr, op1_ptr, restype_ptr, rescode_ptr)\n \t  type = c_common_unsigned_type (type);\n \t}\n \n-      if (!max_gt && !unsignedp0 && TREE_CODE (primop0) != INTEGER_CST)\n+      if (TREE_CODE (primop0) != INTEGER_CST)\n \t{\n-\t  /* This is the case of (char)x >?< 0x80, which people used to use\n-\t     expecting old C compilers to change the 0x80 into -0x80.  */\n-\t  if (val == boolean_false_node)\n-\t    warning (\"comparison is always false due to limited range of data type\");\n-\t  if (val == boolean_true_node)\n-\t    warning (\"comparison is always true due to limited range of data type\");\n-\t}\n-\n-      if (!min_lt && unsignedp0 && TREE_CODE (primop0) != INTEGER_CST)\n-\t{\n-\t  /* This is the case of (unsigned char)x >?< -1 or < 0.  */\n \t  if (val == boolean_false_node)\n \t    warning (\"comparison is always false due to limited range of data type\");\n \t  if (val == boolean_true_node)"}, {"sha": "fbeb6a0aedd969da6bd4e1d0fb8d677fc32bc2a1", "filename": "gcc/testsuite/gcc.dg/compare6.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c5b22838958187f83bf60d0394cc06942796646/gcc%2Ftestsuite%2Fgcc.dg%2Fcompare6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c5b22838958187f83bf60d0394cc06942796646/gcc%2Ftestsuite%2Fgcc.dg%2Fcompare6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcompare6.c?ref=5c5b22838958187f83bf60d0394cc06942796646", "patch": "@@ -0,0 +1,13 @@\n+/* PR c/2098 */\n+/* Test for a warning on comparison on out-of-range data.  */\n+/* { dg-do compile { xfail c4x-*-* } } */\n+/* { dg-options \"-Wall\" } */\n+\n+signed char sc;\n+unsigned char uc;\n+\n+void foo()\n+{\n+  if (sc == 10000) return; /* { dg-warning \"always false\" \"signed\" } */\n+  if (uc == 10000) return; /* { dg-warning \"always false\" \"unsigned\" } */\n+}"}]}