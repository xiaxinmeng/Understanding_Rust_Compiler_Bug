{"sha": "1e22fa6ffe37892dce5313a452c2bbdc0ebe516f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWUyMmZhNmZmZTM3ODkyZGNlNTMxM2E0NTJjMmJiZGMwZWJlNTE2Zg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-11-14T23:48:17Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-11-14T23:48:17Z"}, "message": "(INCLUDE_DEFAULTS): Move definition beyond FREEBSD_NATIVE conditional.\n\n(FUNCTION_PROFILER): Move down to make file more similar to netbsd-i386.h.\n(DEFAULT_TARGET_MACHINE, etc): Comment our this braindamage!\n\nFrom-SVN: r8432", "tree": {"sha": "7dfa30a5cf0ebaeb62720145b3af4aa064127cc9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7dfa30a5cf0ebaeb62720145b3af4aa064127cc9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e22fa6ffe37892dce5313a452c2bbdc0ebe516f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e22fa6ffe37892dce5313a452c2bbdc0ebe516f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e22fa6ffe37892dce5313a452c2bbdc0ebe516f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e22fa6ffe37892dce5313a452c2bbdc0ebe516f/comments", "author": null, "committer": null, "parents": [{"sha": "4f48d56aa72831182c3d4ece0f8065865b36daf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f48d56aa72831182c3d4ece0f8065865b36daf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f48d56aa72831182c3d4ece0f8065865b36daf9"}], "stats": {"total": 50, "additions": 27, "deletions": 23}, "files": [{"sha": "5709211003b6ddd3712ce66cc01be85a4b8cff87", "filename": "gcc/config/i386/freebsd.h", "status": "modified", "additions": 27, "deletions": 23, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e22fa6ffe37892dce5313a452c2bbdc0ebe516f/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e22fa6ffe37892dce5313a452c2bbdc0ebe516f/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffreebsd.h?ref=1e22fa6ffe37892dce5313a452c2bbdc0ebe516f", "patch": "@@ -33,12 +33,6 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #undef CPP_PREDEFINES\n #define CPP_PREDEFINES \"-Dunix -Di386 -D__FreeBSD__ -D__386BSD__ -Asystem(unix) -Asystem(FreeBSD) -Acpu(i386) -Amachine(i386)\"\n \n-#define INCLUDE_DEFAULTS { \\\n-\t{ \"/usr/include\", 0 }, \\\n-\t{ \"/usr/include/g++\", 1 }, \\\n-\t{ 0, 0} \\\n-\t}\n-\n /* Like the default, except no -lg.  */\n #define LIB_SPEC \"%{!p:%{!pg:-lc}}%{p:-lc_p}%{pg:-lc_p}\"\n \n@@ -58,23 +52,6 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #define HAVE_ATEXIT\n \n-/* Redefine this to use %eax instead of %edx.  */\n-#undef FUNCTION_PROFILER\n-#define FUNCTION_PROFILER(FILE, LABELNO)  \\\n-{\t\t\t\t\t\t\t\t\t\\\n-  if (flag_pic)\t\t\t\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\tleal %sP%d@GOTOFF(%%ebx),%%eax\\n\",\t\t\\\n-\t       LPREFIX, (LABELNO));\t\t\t\t\t\\\n-      fprintf (FILE, \"\\tcall *mcount@GOT(%%ebx)\\n\");\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  else\t\t\t\t\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\tmovl $%sP%d,%%eax\\n\", LPREFIX, (LABELNO));\t\\\n-      fprintf (FILE, \"\\tcall mcount\\n\");\t\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-}\n-\n /* There are conflicting reports about whether this system uses\n    a different assembler syntax.  wilson@cygnus.com says # is right.  */\n #undef COMMENT_BEGIN\n@@ -105,6 +82,25 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n /* Don't default to pcc-struct-return, because gcc is the only compiler, and\n    we want to retain compatibility with older gcc versions.  */\n #define DEFAULT_PCC_STRUCT_RETURN 0\n+\f\n+/* Profiling routines, partially copied from i386/osfrose.h.  */\n+\n+/* Redefine this to use %eax instead of %edx.  */\n+#undef FUNCTION_PROFILER\n+#define FUNCTION_PROFILER(FILE, LABELNO)  \\\n+{\t\t\t\t\t\t\t\t\t\\\n+  if (flag_pic)\t\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      fprintf (FILE, \"\\tleal %sP%d@GOTOFF(%%ebx),%%eax\\n\",\t\t\\\n+\t       LPREFIX, (LABELNO));\t\t\t\t\t\\\n+      fprintf (FILE, \"\\tcall *mcount@GOT(%%ebx)\\n\");\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+  else\t\t\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      fprintf (FILE, \"\\tmovl $%sP%d,%%eax\\n\", LPREFIX, (LABELNO));\t\\\n+      fprintf (FILE, \"\\tcall mcount\\n\");\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+}\n \n /*\n  * Some imports from svr4.h in support of shared libraries.\n@@ -229,15 +225,23 @@ do {                                                                    \\\n \n #ifdef FREEBSD_NATIVE\n \n+#define INCLUDE_DEFAULTS { \\\n+\t{ \"/usr/include\", 0 }, \\\n+\t{ \"/usr/include/g++\", 1 }, \\\n+\t{ 0, 0} \\\n+\t}\n+\n #undef MD_EXEC_PREFIX\n #define MD_EXEC_PREFIX \"/usr/libexec/\"\n \n #undef STANDARD_STARTFILE_PREFIX\n #define STANDARD_STARTFILE_PREFIX \"/usr/lib\"\n \n+#if 0 /* This is very wrong!!! */\n #define DEFAULT_TARGET_MACHINE \"i386-unknown-freebsd_1.0\"\n #define GPLUSPLUS_INCLUDE_DIR \"/usr/local/lib/gcc-lib/i386-unknown-freebsd_1.0/2.5.8/include\"\n #define TOOL_INCLUDE_DIR \"/usr/local/i386-unknown-freebsd_1.0/include\"\n #define GCC_INCLUDE_DIR \"/usr/local/lib/gcc-lib/i386-unknown-freebsd_1.0/2.5.8/include\"\n+#endif\n \n #endif /* FREEBSD_NATIVE */"}]}