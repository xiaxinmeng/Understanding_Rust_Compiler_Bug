{"sha": "12183e0fbcace8903ebcbec1ef38aa25f000764b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTIxODNlMGZiY2FjZTg5MDNlYmNiZWMxZWYzOGFhMjVmMDAwNzY0Yg==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2004-08-06T17:20:53Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2004-08-06T17:20:53Z"}, "message": "params.def (PARAM_MIN_CROSSJUMP_INSNS): New.\n\n2004-08-06  Pat Haugen  <pthaugen@us.ibm.com>\n\n        * params.def (PARAM_MIN_CROSSJUMP_INSNS): New.\n        * cfgcleanup.c (try_crossjump_to_edge): Add minimum insn match\n        threshhold.\n        * doc/invoke.texi (param): Document min-crossjump-insns.\n\nFrom-SVN: r85646", "tree": {"sha": "22bcce619fb410b79d31de6cd6807d0d595d1ea1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22bcce619fb410b79d31de6cd6807d0d595d1ea1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12183e0fbcace8903ebcbec1ef38aa25f000764b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12183e0fbcace8903ebcbec1ef38aa25f000764b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12183e0fbcace8903ebcbec1ef38aa25f000764b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12183e0fbcace8903ebcbec1ef38aa25f000764b/comments", "author": null, "committer": null, "parents": [{"sha": "fc90a8f2eeefbac428a73d6ea8c146f8e5446154", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc90a8f2eeefbac428a73d6ea8c146f8e5446154", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc90a8f2eeefbac428a73d6ea8c146f8e5446154"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "1318c7cd2c228bdbdcb09cf34ec516f255b787e7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=12183e0fbcace8903ebcbec1ef38aa25f000764b", "patch": "@@ -1,3 +1,10 @@\n+2004-08-06  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\t* params.def (PARAM_MIN_CROSSJUMP_INSNS): New.\n+\t* cfgcleanup.c (try_crossjump_to_edge): Add minimum insn match\n+\tthreshhold.\n+\t* doc/invoke.texi (param): Document min-crossjump-insns.\n+\n 2004-08-06  Richard Sandiford  <rsandifo@redhat.com>\n \n \tPR c/13282"}, {"sha": "648c4a4f7c34252b797119067f6254d57b0be223", "filename": "gcc/cfgcleanup.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2Fcfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2Fcfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgcleanup.c?ref=12183e0fbcace8903ebcbec1ef38aa25f000764b", "patch": "@@ -1507,7 +1507,13 @@ try_crossjump_to_edge (int mode, edge e1, edge e2)\n \n   /* ... and part the second.  */\n   nmatch = flow_find_cross_jump (mode, src1, src2, &newpos1, &newpos2);\n-  if (!nmatch)\n+\n+  /* Don't proceed with the crossjump unless we found a sufficient number\n+     of matching instructions or the 'from' block was totally matched\n+     (such that its predecessors will hopefully be redirected and the\n+     block removed).  */\n+  if ((nmatch < PARAM_VALUE (PARAM_MIN_CROSSJUMP_INSNS))\n+      && (newpos1 != BB_HEAD (src1)))\n     return false;\n \n #ifndef CASE_DROPS_THROUGH"}, {"sha": "f1988b0b8565489fe9d46e45e9f0d6fbe4dabde6", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=12183e0fbcace8903ebcbec1ef38aa25f000764b", "patch": "@@ -5094,6 +5094,12 @@ the number of edges incoming to each block.  Increasing values mean\n more aggressive optimization, making the compile time increase with\n probably small improvement in executable size.\n \n+@item min-crossjump-insns\n+The minimum number of instructions which must be matched at the end\n+of two blocks before crossjumping will be performed on them.  This\n+value is ignored in the case where all instructions in the block being\n+crossjumped from are matched.  The default value is 5.\n+\n @item max-delay-slot-insn-search\n The maximum number of instructions to consider when looking for an\n instruction to fill a delay slot.  If more than this arbitrary number of"}, {"sha": "aed7655c9a45df4506dda95855130306f272d2ba", "filename": "gcc/params.def", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2Fparams.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12183e0fbcace8903ebcbec1ef38aa25f000764b/gcc%2Fparams.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fparams.def?ref=12183e0fbcace8903ebcbec1ef38aa25f000764b", "patch": "@@ -306,6 +306,12 @@ DEFPARAM(PARAM_MAX_CROSSJUMP_EDGES,\n \t \"The maximum number of incoming edges to consider for crossjumping\",\n \t 100)\n \n+/* The minimum number of matching instructions to consider for crossjumping.  */\n+DEFPARAM(PARAM_MIN_CROSSJUMP_INSNS,\n+     \"min-crossjump-insns\",\n+     \"The minimum number of matching instructions to consider for crossjumping\",\n+     5)\n+\n /* The maximum length of path considered in cse.  */\n DEFPARAM(PARAM_MAX_CSE_PATH_LENGTH,\n \t \"max-cse-path-length\","}]}