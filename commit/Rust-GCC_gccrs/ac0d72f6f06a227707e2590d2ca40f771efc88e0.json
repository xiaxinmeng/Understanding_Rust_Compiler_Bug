{"sha": "ac0d72f6f06a227707e2590d2ca40f771efc88e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWMwZDcyZjZmMDZhMjI3NzA3ZTI1OTBkMmNhNDBmNzcxZWZjODhlMA==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-03-14T13:58:21Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-03-14T13:58:21Z"}, "message": "200x-xx-xx Richard Sandiford <richard@codesourcery.com> Phil Edwards <phil@codesourcery.com>\n\ngcc/\n200x-xx-xx  Richard Sandiford  <richard@codesourcery.com>\n\t    Phil Edwards  <phil@codesourcery.com>\n\n\t* gthr-vxworks.h: Add an extern \"C\" wrapper for C++.\n\t(__gthread_once_t): Remove busy field for RTPs.\n\t(__GTHREAD_ONCE_INIT): Update accordingly.\n\nCo-Authored-By: Phil Edwards <phil@codesourcery.com>\n\nFrom-SVN: r122923", "tree": {"sha": "d5c31c7d5ee59f473a0dde8950358b7136d27a70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d5c31c7d5ee59f473a0dde8950358b7136d27a70"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac0d72f6f06a227707e2590d2ca40f771efc88e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac0d72f6f06a227707e2590d2ca40f771efc88e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac0d72f6f06a227707e2590d2ca40f771efc88e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac0d72f6f06a227707e2590d2ca40f771efc88e0/comments", "author": null, "committer": null, "parents": [{"sha": "cd773ac48b456a4eb7ddfc04df747e7890e9f4a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd773ac48b456a4eb7ddfc04df747e7890e9f4a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd773ac48b456a4eb7ddfc04df747e7890e9f4a7"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "9cb848dcd0e879862e44871932340a58435f47f2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac0d72f6f06a227707e2590d2ca40f771efc88e0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac0d72f6f06a227707e2590d2ca40f771efc88e0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ac0d72f6f06a227707e2590d2ca40f771efc88e0", "patch": "@@ -1,3 +1,10 @@\n+2007-03-14  Richard Sandiford  <richard@codesourcery.com>\n+\t    Phil Edwards  <phil@codesourcery.com>\n+\n+\t* gthr-vxworks.h: Add an extern \"C\" wrapper for C++.\n+\t(__gthread_once_t): Remove busy field for RTPs.\n+\t(__GTHREAD_ONCE_INIT): Update accordingly.\n+\n 2007-03-14  Richard Sandiford  <richard@codesourcery.com>\n \n \t* doc/invoke.texi: Document VxWorks options."}, {"sha": "c11d3a20cabb18c5b4bfeb4c2f506c953eadea2d", "filename": "gcc/gthr-vxworks.h", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac0d72f6f06a227707e2590d2ca40f771efc88e0/gcc%2Fgthr-vxworks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac0d72f6f06a227707e2590d2ca40f771efc88e0/gcc%2Fgthr-vxworks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgthr-vxworks.h?ref=ac0d72f6f06a227707e2590d2ca40f771efc88e0", "patch": "@@ -37,6 +37,10 @@ Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA\n \n #else\n \n+#ifdef __cplusplus\n+extern \"C\" {\n+#endif\n+\n #define __GTHREADS 1\n #define __gthread_active_p() 1\n \n@@ -103,12 +107,18 @@ __gthread_recursive_mutex_unlock (__gthread_recursive_mutex_t *mutex)\n \n typedef struct\n {\n+#ifndef __RTP__\n   volatile unsigned char busy;\n+#endif\n   volatile unsigned char done;\n }\n __gthread_once_t;\n \n-#define __GTHREAD_ONCE_INIT { 0, 0 }\n+#ifndef __RTP__\n+# define __GTHREAD_ONCE_INIT { 0, 0 }\n+#else\n+# define __GTHREAD_ONCE_INIT { 0 }\n+#endif\n \n extern int __gthread_once (__gthread_once_t *once, void (*func)(void));\n \n@@ -125,6 +135,10 @@ extern int __gthread_key_delete (__gthread_key_t key);\n extern void *__gthread_getspecific (__gthread_key_t key);\n extern int __gthread_setspecific (__gthread_key_t key, void *ptr);\n \n+#ifdef __cplusplus\n+}\n+#endif\n+\n #endif /* not _LIBOBJC */\n \n #endif /* gthr-vxworks.h */"}]}