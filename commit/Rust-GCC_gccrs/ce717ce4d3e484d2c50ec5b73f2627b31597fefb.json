{"sha": "ce717ce4d3e484d2c50ec5b73f2627b31597fefb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U3MTdjZTRkM2U0ODRkMmM1MGVjNWI3M2YyNjI3YjMxNTk3ZmVmYg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-04-18T22:40:55Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-04-18T22:40:55Z"}, "message": "(instantiate_decls): For DECL_INCOMING_RTL, use max\nof type size and mode size in instantiate_decl call.\n\nFrom-SVN: r13933", "tree": {"sha": "3ada06b71f74d28c4b19f8e61e832763a0163505", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ada06b71f74d28c4b19f8e61e832763a0163505"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce717ce4d3e484d2c50ec5b73f2627b31597fefb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce717ce4d3e484d2c50ec5b73f2627b31597fefb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce717ce4d3e484d2c50ec5b73f2627b31597fefb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce717ce4d3e484d2c50ec5b73f2627b31597fefb/comments", "author": null, "committer": null, "parents": [{"sha": "09817d8cf804bdfa729c93651e6d7cabd2a0ae5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09817d8cf804bdfa729c93651e6d7cabd2a0ae5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09817d8cf804bdfa729c93651e6d7cabd2a0ae5f"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "7560866df1980f87c60f7d9b6ee9990c8da17888", "filename": "gcc/function.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce717ce4d3e484d2c50ec5b73f2627b31597fefb/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce717ce4d3e484d2c50ec5b73f2627b31597fefb/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=ce717ce4d3e484d2c50ec5b73f2627b31597fefb", "patch": "@@ -2622,10 +2622,14 @@ instantiate_decls (fndecl, valid_only)\n   /* Process all parameters of the function.  */\n   for (decl = DECL_ARGUMENTS (fndecl); decl; decl = TREE_CHAIN (decl))\n     {\n-      instantiate_decl (DECL_RTL (decl), int_size_in_bytes (TREE_TYPE (decl)),\n-\t\t\tvalid_only);\t\n-      instantiate_decl (DECL_INCOMING_RTL (decl),\n-\t\t\tint_size_in_bytes (TREE_TYPE (decl)), valid_only);\n+      int size = int_size_in_bytes (TREE_TYPE (decl));\n+      instantiate_decl (DECL_RTL (decl), size, valid_only);\t\n+\n+      /* If the parameter was promoted, then the incoming RTL mode may be\n+\t larger than the declared type size.  We must use the larger of\n+\t the two sizes.  */\n+      size = MAX (GET_MODE_SIZE (GET_MODE (DECL_INCOMING_RTL (decl))), size);\n+      instantiate_decl (DECL_INCOMING_RTL (decl), size, valid_only);\n     }\n \n   /* Now process all variables defined in the function or its subblocks.  */"}]}