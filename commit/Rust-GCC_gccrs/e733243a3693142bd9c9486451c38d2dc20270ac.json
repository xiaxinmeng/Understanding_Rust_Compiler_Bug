{"sha": "e733243a3693142bd9c9486451c38d2dc20270ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTczMzI0M2EzNjkzMTQyYmQ5Yzk0ODY0NTFjMzhkMmRjMjAyNzBhYw==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2019-06-07T12:14:55Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2019-06-07T12:14:55Z"}, "message": "re PR debug/90574 ([gdb] gdb wrongly stopped at a breakpoint in an unexecuted line of code)\n\n2019-06-07  Richard Biener  <rguenther@suse.de>\n\n\tPR debug/90574\n\t* tree-cfg.c (stmt_starts_bb_p): Split blocks at labels\n\tthat appear after user labels.\n\n\t* gcc.misc-tests/gcov-pr90574-1.c: New testcase.\n\t* gcc.misc-tests/gcov-pr90574-2.c: Likewise.\n\nFrom-SVN: r272040", "tree": {"sha": "641a164df2c05ca90667f647528cb4ba412eee57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/641a164df2c05ca90667f647528cb4ba412eee57"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e733243a3693142bd9c9486451c38d2dc20270ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e733243a3693142bd9c9486451c38d2dc20270ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e733243a3693142bd9c9486451c38d2dc20270ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e733243a3693142bd9c9486451c38d2dc20270ac/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "510c9192493b6af5c4c70b14390fe340bca8ecaa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/510c9192493b6af5c4c70b14390fe340bca8ecaa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/510c9192493b6af5c4c70b14390fe340bca8ecaa"}], "stats": {"total": 53, "additions": 50, "deletions": 3}, "files": [{"sha": "41e364b7f48309543a9d286091a1fea22d06c607", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e733243a3693142bd9c9486451c38d2dc20270ac", "patch": "@@ -1,3 +1,9 @@\n+2019-06-07  Richard Biener  <rguenther@suse.de>\n+\n+\tPR debug/90574\n+\t* tree-cfg.c (stmt_starts_bb_p): Split blocks at labels\n+\tthat appear after user labels.\n+\n 2019-06-07  Martin Liska  <mliska@suse.cz>\n \n \t* cselib.c (cselib_init): Disable hash table"}, {"sha": "75ff9daf2e3867e63ac0d330a05419267554e22a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e733243a3693142bd9c9486451c38d2dc20270ac", "patch": "@@ -1,3 +1,9 @@\n+2019-06-07  Richard Biener  <rguenther@suse.de>\n+\n+\tPR debug/90574\n+\t* gcc.misc-tests/gcov-pr90574-1.c: New testcase.\n+\t* gcc.misc-tests/gcov-pr90574-2.c: Likewise.\n+\n 2019-06-07  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* gcc.dg/lto/alias-access-path-2.0.c: New testcase."}, {"sha": "41ac9bb3eccbc645189363eb701e2ced135c40f4", "filename": "gcc/testsuite/gcc.misc-tests/gcov-pr90574-1.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-pr90574-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-pr90574-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-pr90574-1.c?ref=e733243a3693142bd9c9486451c38d2dc20270ac", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-options \"-fprofile-arcs -ftest-coverage\" } */\n+/* { dg-do run { target native } } */\n+\n+int main(int argc, char **argv)\n+{\n+  if (argc == 0)\n+    {\n+      int *ptr;\n+label:  /* count(#####) */\n+\t{\n+\t}\n+    }\n+  if (argc == 1)\n+    {\n+      __builtin_printf(\"hello\\n\");\n+    }\n+  return 0;\n+}\n+\n+/* { dg-final { run-gcov gcov-pr90574-1.c } } */"}, {"sha": "2db70c96f71538f4c2e172d64f6c5159612fee9a", "filename": "gcc/testsuite/gcc.misc-tests/gcov-pr90574-2.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-pr90574-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-pr90574-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Fgcov-pr90574-2.c?ref=e733243a3693142bd9c9486451c38d2dc20270ac", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-options \"-fprofile-arcs -ftest-coverage\" } */\n+/* { dg-do run { target native } } */\n+\n+int main(int argc, char **argv)\n+{\n+  switch (argc)\n+    {\n+    case 0:\n+      foo: /* count(#####) */\n+    case 1:;\n+    }\n+  return 0;\n+}\n+\n+/* { dg-final { run-gcov gcov-pr90574-2.c } } */"}, {"sha": "a585efea3d8ac7b4d73d1d447f455909cc44c029", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e733243a3693142bd9c9486451c38d2dc20270ac/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=e733243a3693142bd9c9486451c38d2dc20270ac", "patch": "@@ -2722,10 +2722,10 @@ stmt_starts_bb_p (gimple *stmt, gimple *prev_stmt)\n \t  || FORCED_LABEL (gimple_label_label (label_stmt)))\n \treturn true;\n \n-      if (prev_stmt && gimple_code (prev_stmt) == GIMPLE_LABEL)\n+      if (glabel *plabel = safe_dyn_cast <glabel *> (prev_stmt))\n \t{\n-\t  if (DECL_NONLOCAL (gimple_label_label (\n-\t\t\t       as_a <glabel *> (prev_stmt))))\n+\t  if (DECL_NONLOCAL (gimple_label_label (plabel))\n+\t      || !DECL_ARTIFICIAL (gimple_label_label (plabel)))\n \t    return true;\n \n \t  cfg_stats.num_merged_labels++;"}]}