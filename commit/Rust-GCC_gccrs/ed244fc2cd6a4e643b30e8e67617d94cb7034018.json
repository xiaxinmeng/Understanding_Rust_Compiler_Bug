{"sha": "ed244fc2cd6a4e643b30e8e67617d94cb7034018", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQyNDRmYzJjZDZhNGU2NDNiMzBlOGU2NzYxN2Q5NGNiNzAzNDAxOA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-01-01T14:30:37Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-01-01T14:30:37Z"}, "message": "(finish_struct): Warn if field with enumeral type is narrower than\nvalues of that type.\n\nFrom-SVN: r10928", "tree": {"sha": "d6073ae99257b925607a9f630ac7db176f649733", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6073ae99257b925607a9f630ac7db176f649733"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed244fc2cd6a4e643b30e8e67617d94cb7034018", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed244fc2cd6a4e643b30e8e67617d94cb7034018", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed244fc2cd6a4e643b30e8e67617d94cb7034018", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed244fc2cd6a4e643b30e8e67617d94cb7034018/comments", "author": null, "committer": null, "parents": [{"sha": "e11fa86f42d5ab49ac1bf77a17c69dcc04862f52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e11fa86f42d5ab49ac1bf77a17c69dcc04862f52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e11fa86f42d5ab49ac1bf77a17c69dcc04862f52"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "121424db0324769a5d601b0aa62f043be80debb4", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed244fc2cd6a4e643b30e8e67617d94cb7034018/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed244fc2cd6a4e643b30e8e67617d94cb7034018/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=ed244fc2cd6a4e643b30e8e67617d94cb7034018", "patch": "@@ -1,5 +1,5 @@\n /* Process declarations and variables for C compiler.\n-   Copyright (C) 1988, 1992, 1993, 1994, 1995 Free Software Foundation, Inc.\n+   Copyright (C) 1988, 92, 93, 94, 95, 1996 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -5569,6 +5569,13 @@ finish_struct (t, fieldlist, attributes)\n \t{\n \t  register int width = TREE_INT_CST_LOW (DECL_INITIAL (x));\n \n+\t  if (TREE_CODE (TREE_TYPE (x)) == ENUMERAL_TYPE\n+\t      && (width < min_precision (TYPE_MIN_VALUE (TREE_TYPE (x)),\n+\t\t\t\t\t TREE_UNSIGNED (TREE_TYPE (x)))\n+\t\t  || width < min_precision (TYPE_MAX_VALUE (TREE_TYPE (x)),\n+\t\t\t\t\t    TREE_UNSIGNED (TREE_TYPE (x)))))\n+\t    warning_with_decl (x, \"`%s' is narrower than values of its type\");\n+\n \t  DECL_FIELD_SIZE (x) = width;\n \t  DECL_BIT_FIELD (x) = DECL_C_BIT_FIELD (x) = 1;\n \t  DECL_INITIAL (x) = NULL;"}]}