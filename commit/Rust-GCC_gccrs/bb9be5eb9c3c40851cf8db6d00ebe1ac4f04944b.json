{"sha": "bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmI5YmU1ZWI5YzNjNDA4NTFjZjhkYjZkMDBlYmUxYWM0ZjA0OTQ0Yg==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@gnat.com", "date": "2004-09-20T12:07:47Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-09-20T12:07:47Z"}, "message": "re PR ada/17540 (Duplicate symbols while building Ada)\n\n2004-09-20  Robert Dewar  <dewar@gnat.com>\n\n\tPR ada/17540\n\n\t* freeze.adb (Check_Address_Clause): Reset Is_Imported and Is_Public\n\tif an address clause is present, since that means that the Import\n\tshould be ignored.\n\nFrom-SVN: r87755", "tree": {"sha": "8ffac8bd587139a138acb67f0a618033856f2587", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ffac8bd587139a138acb67f0a618033856f2587"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b/comments", "author": null, "committer": null, "parents": [{"sha": "d4a9b3a336b30a8315315768f91b73680afb35f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4a9b3a336b30a8315315768f91b73680afb35f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4a9b3a336b30a8315315768f91b73680afb35f7"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "8c1632d23f9dcd0fa424c125cda3eb3b495a5d91", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b", "patch": "@@ -1,3 +1,11 @@\n+2004-09-20  Robert Dewar  <dewar@gnat.com>\n+\n+\tPR ada/17540\n+\n+\t* freeze.adb (Check_Address_Clause): Reset Is_Imported and Is_Public\n+\tif an address clause is present, since that means that the Import\n+\tshould be ignored.\n+\n 2004-09-20  Arnaud Charlet  <charlet@act-europe.fr>\n \n \t* 5tsystem.ads: Removed, no longer used."}, {"sha": "e58a987d8992ee0c87081b4718d05b2744574f7a", "filename": "gcc/ada/freeze.adb", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b/gcc%2Fada%2Ffreeze.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b/gcc%2Fada%2Ffreeze.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffreeze.adb?ref=bb9be5eb9c3c40851cf8db6d00ebe1ac4f04944b", "patch": "@@ -82,7 +82,9 @@ package body Freeze is\n \n    procedure Check_Address_Clause (E : Entity_Id);\n    --  Apply legality checks to address clauses for object declarations,\n-   --  at the point the object is frozen.\n+   --  at the point the object is frozen. Also deals with cancelling effect\n+   --  of Import pragma which has no effect (other than to eliminate any\n+   --  implicit initialization) if an address clause is present.\n \n    procedure Check_Strict_Alignment (E : Entity_Id);\n    --  E is a base type. If E is tagged or has a component that is aliased\n@@ -497,6 +499,11 @@ package body Freeze is\n          then\n             Warn_Overlay (Expr, Typ, Name (Addr));\n          end if;\n+\n+         --  Cancel effect of any Import pragma\n+\n+         Set_Is_Imported (E, False);\n+         Set_Is_Public (E, False);\n       end if;\n    end Check_Address_Clause;\n "}]}