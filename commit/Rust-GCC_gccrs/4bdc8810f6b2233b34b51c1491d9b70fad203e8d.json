{"sha": "4bdc8810f6b2233b34b51c1491d9b70fad203e8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGJkYzg4MTBmNmIyMjMzYjM0YjUxYzE0OTFkOWI3MGZhZDIwM2U4ZA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-08-26T18:47:42Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-08-26T18:47:42Z"}, "message": "haifa-sched.c (last_clock_var): New.\n\n        * haifa-sched.c (last_clock_var): New.\n        (schedule_block): Initialize it.\n        (schedule_insn): Use it to fill insn modes with issue information.\n\nFrom-SVN: r22009", "tree": {"sha": "a18467d7258d14485ecc64dfbc4054a3ff3c0202", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a18467d7258d14485ecc64dfbc4054a3ff3c0202"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4bdc8810f6b2233b34b51c1491d9b70fad203e8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bdc8810f6b2233b34b51c1491d9b70fad203e8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bdc8810f6b2233b34b51c1491d9b70fad203e8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bdc8810f6b2233b34b51c1491d9b70fad203e8d/comments", "author": null, "committer": null, "parents": [{"sha": "425c08a151458c1c44c27d191ef8d46756980b06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/425c08a151458c1c44c27d191ef8d46756980b06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/425c08a151458c1c44c27d191ef8d46756980b06"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "7a26a6ae952ed5de9031eab54dc512f775cd3ad6", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bdc8810f6b2233b34b51c1491d9b70fad203e8d/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bdc8810f6b2233b34b51c1491d9b70fad203e8d/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=4bdc8810f6b2233b34b51c1491d9b70fad203e8d", "patch": "@@ -4279,6 +4279,9 @@ adjust_priority (prev)\n     }\n }\n \n+/* Clock at which the previous instruction was issued.  */\n+static int last_clock_var;\n+\n /* INSN is the \"currently executing insn\".  Launch each insn which was\n    waiting on INSN.  READY is a vector of insns which are ready to fire.\n    N_READY is the number of elements in READY.  CLOCK is the current\n@@ -4363,6 +4366,17 @@ schedule_insn (insn, ready, n_ready, clock)\n \t}\n     }\n \n+  /* Annotate the instruction with issue information -- TImode \n+     indicates that the instruction is expected not to be able\n+     to issue on the same cycle as the previous insn.  A machine\n+     may use this information to decide how the instruction should\n+     be aligned.  */\n+  if (reload_completed && issue_rate > 1)\n+    {\n+      PUT_MODE (insn, clock > last_clock_var ? TImode : VOIDmode);\n+      last_clock_var = clock;\n+    }\n+\n   return n_ready;\n }\n \n@@ -6739,6 +6753,7 @@ schedule_block (bb, rgn_n_insns)\n   q_ptr = 0;\n   q_size = 0;\n   clock_var = 0;\n+  last_clock_var = 0;\n   bzero ((char *) insn_queue, sizeof (insn_queue));\n \n   /* We start inserting insns after PREV_HEAD.  */"}]}