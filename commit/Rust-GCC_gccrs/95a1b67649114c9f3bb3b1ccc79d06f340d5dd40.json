{"sha": "95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTVhMWI2NzY0OTExNGM5ZjNiYjNiMWNjYzc5ZDA2ZjM0MGQ1ZGQ0MA==", "commit": {"author": {"name": "Craig Burley", "email": "burley@gnu.org", "date": "1998-06-15T07:37:33Z"}, "committer": {"name": "Dave Love", "email": "fx@gcc.gnu.org", "date": "1998-06-15T07:37:33Z"}, "message": "Restore circa-0.5.22 capabilities of `g77' driver:\n\nThu May 28 21:32:18 1998  Craig Burley  <burley@gnu.org>\n\tRestore circa-0.5.22 capabilities of `g77' driver:\n\t* Make-lang.in (g77spec.o): Depend on f/version.h.\n\t(g77version.o): New rule to compile g77 version info.\n\t(g77$(exeext)): Depend on and link in g77version.o.\n\t* g77spec.c: Rewrite to be more like 0.5.22 version\n\tof g77.c, making filtering of command line smarter\n\tso mixed Fortran and C (etc.) can be compiled, verbose\n\tversion info can be obtained, etc.\n\t* lang-specs.h (f77-version): New \"language\" to support\n\t\"g77 -v\" command under new gcc 2.8 regime.\n\t* lex.c (ffelex_file_fixed): If -fnull-version, just\n\tsubstitute a \"source file\" that prints out version info.\n\t* top.c, top.h: Support -fnull-version.\n\t* lang-specs.h: Use \"%O\" instead of OO macro to specify\n\tobject extension.  Remove old stringizing cruft.\n\t* Make-lang.in (g77.c, g77spec.o, g77.o, g77$(exeext),\n\tg77-cross$(exeext), f771,\n\t$(srcdir)/f/g77.info, $(srcdir)/f/g77.dvi,\n\t$(srcdir)/f/intdoc.texi,\n\tf77.install-common, f77.install-info, f77.install-man,\n\tf77.uninstall, $(G77STAGESTUFF), f77.stage1, f77.stage2,\n\tf77.stage3, f77.stage4, f77.distdir): Don't do anything\n\tunless user specified \"f77\" or \"F77\" in $LANGUAGES either\n\tduring configuration or explicitly.  For convenience of\n\tvarious tests and to work around lack of the assignment\n\t\"LANGUAGES=$(BOOT_LANGUAGES)\" in the \"make stage1\" command\n\tof \"make bootstrap\" in gcc, use a touch file named \"lang-f77\"\n\tto communicate whether this is the case.\n\t* Make-lang.in (F77_FLAGS_TO_PASS): Delete this macro,\n\treplace with minimal expansion of its former self in\n\teach of the two instances where it was used.\n\t* Makefile.in (HOST_CC): Delete this definition.\n\t* com.c (index, rindex): Delete these declarations.\n\t* proj.h: (isascii): Delete this.\n\t* Make-lang.in (f77.install-common): Warn if `f77-install-ok'\n\tflag-file exists, since it no longer triggers any activity.\n\tRename libf2c.a and f2c.h to libg2c.a and g2c.h,\n\tnormalize and simplify g77/libg2c build process:\n\t* Make-lang.in: Remove all support for overwriting\n\t/usr/bin/f77 etc., or whatever the actual names are\n\tvia $(prefix) and $(local_prefix).  (g++ overwrites\n\t/usr/bin/c++, but then it's often the only C++ compiler\n\ton the system; f77 often exists on systems that are\n\tinstalling g77.)\n\t(f77.realclean): Remove obsolete target.\n\t(g77.c, g77$(exeext)): Minor changes to look more like g++'s\n\tstuff.\n\t(f771): Now built with srcdir=gcc/f, not srcdir=gcc, to be\n\tmore like g++ and such.\n\t(f/Makefile): Removed, as g++ doesn't need this rule.\n\t(f77.install-common): No longer install f77, etc.\n\t(f77.install-man): No longer install f77.1.\n\t(f77.uninstall): No longer uninstall f77, f77.1, etc.\n\t(f77.stage1, f77.stage2, f77.stage3, f77.stage4): Do work\n\tonly if \"f77\" appears in $(LANGUAGES).\n\t(Note: gcc's Makefile.in's bootstrap target should set\n\tLANGUAGES=$(BOOT_LANGUAGES) when making the stage1 target.)\n\t* Makefile.in: Update vis-a-vis gcc/cp/Makefile.in.\n\t(none): Remove.\n\t(g77-only): Relocate.\n\t(all.indirect, f771, *.o): Now assumes current directory\n\tis this dir (gcc/f), not the parent directory.\n\t(TAGS): Remove \"echo 'parse.y,0'  >> TAGS ;\" line.\n\t* config-lang.in: Delete commented-out code.\n\tFix stagestuff definition.  Add more stuff to\n\tdiff_excludes definition.  Don't create any directories.\n\tSet outputs to f/Makefile, to get variable substition\n\tto happen (what does that really do, anyway?!).\n\t* g77spec.c: Rename libf2c to libg2c.\n\t* com.h: Remove all of the gcc back-end decls,\n\tsince egcs should have all of them correct.\n\t* com.c: Include \"proj.h\" before anything else,\n\tas that's how things are supposed to work.\n\t* ste.c: Ditto.\n\t* bad.c: Include \"flags.j\" here, since some diagnostics\n\tcheck flag_pedantic_errors.\n\t* Makefile.in (f/*.o): Rebuild dependencies via\n\tdeps-kinda.\n\t* output.j: New source file.\n\t* Make-lang.in (F77_SRCS): Update accordingly.\n\t* Makefile.in (OUTPUT_H): Ditto.\n\t(deps-kinda): Ditto.\n\t* com.c: Include \"output.j\" here.\n\t* lex.c: Ditto.\n\nFrom-SVN: r20506", "tree": {"sha": "a3ba80223dd6d332b89188fd52d4e3cef4b3c47a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3ba80223dd6d332b89188fd52d4e3cef4b3c47a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/comments", "author": null, "committer": null, "parents": [{"sha": "e74e8c843a6e86d644a3b5758e4c8e50f22a9de2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e74e8c843a6e86d644a3b5758e4c8e50f22a9de2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e74e8c843a6e86d644a3b5758e4c8e50f22a9de2"}], "stats": {"total": 3698, "additions": 2097, "deletions": 1601}, "files": [{"sha": "00a4a4508138b44dcdd79221ffaf2351665ddcfb", "filename": "gcc/f/ChangeLog", "status": "modified", "additions": 101, "deletions": 0, "changes": 101, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2FChangeLog?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -4,6 +4,7 @@ Wed Jun 10 13:17:32 1998  Dave Brolley  <brolley@cygnus.com>\n \t* top.c (ffe_decode_option): New argc/argv interface.\n \t* parse.c (yyparse): New argc/argv interface for ffe_decode_option.\n \t* com.c (lang_decode_option): New argc/argv interface.\n+\n Mon Jun  1 19:37:42 1998  Craig Burley  <burley@gnu.org>\n \n \t* com.c (ffecom_init_0): Fix setup of INTEGER(KIND=7)\n@@ -14,6 +15,106 @@ Mon Jun  1 19:37:42 1998  Craig Burley  <burley@gnu.org>\n \tDelete FFEGLOBAL_argsummaryPTR.\n \t* global.c, global.h: Delete FFEGLOBAL_argsummaryPTR.\n \n+Thu May 28 21:32:18 1998  Craig Burley  <burley@gnu.org>\n+\n+\tRestore circa-0.5.22 capabilities of `g77' driver:\n+\t* Make-lang.in (g77spec.o): Depend on f/version.h.\n+\t(g77version.o): New rule to compile g77 version info.\n+\t(g77$(exeext)): Depend on and link in g77version.o.\n+\t* g77spec.c: Rewrite to be more like 0.5.22 version\n+\tof g77.c, making filtering of command line smarter\n+\tso mixed Fortran and C (etc.) can be compiled, verbose\n+\tversion info can be obtained, etc.\n+\t* lang-specs.h (f77-version): New \"language\" to support\n+\t\"g77 -v\" command under new gcc 2.8 regime.\n+\t* lex.c (ffelex_file_fixed): If -fnull-version, just\n+\tsubstitute a \"source file\" that prints out version info.\n+\t* top.c, top.h: Support -fnull-version.\n+\n+\t* lang-specs.h: Use \"%O\" instead of OO macro to specify\n+\tobject extension.  Remove old stringizing cruft.\n+\n+\t* Make-lang.in (g77.c, g77spec.o, g77.o, g77$(exeext),\n+\tg77-cross$(exeext), f771,\n+\t$(srcdir)/f/g77.info, $(srcdir)/f/g77.dvi,\n+\t$(srcdir)/f/intdoc.texi,\n+\tf77.install-common, f77.install-info, f77.install-man,\n+\tf77.uninstall, $(G77STAGESTUFF), f77.stage1, f77.stage2,\n+\tf77.stage3, f77.stage4, f77.distdir): Don't do anything\n+\tunless user specified \"f77\" or \"F77\" in $LANGUAGES either\n+\tduring configuration or explicitly.  For convenience of\n+\tvarious tests and to work around lack of the assignment\n+\t\"LANGUAGES=$(BOOT_LANGUAGES)\" in the \"make stage1\" command\n+\tof \"make bootstrap\" in gcc, use a touch file named \"lang-f77\"\n+\tto communicate whether this is the case.\n+\n+\t* Make-lang.in (F77_FLAGS_TO_PASS): Delete this macro,\n+\treplace with minimal expansion of its former self in\n+\teach of the two instances where it was used.\n+\n+\t* Makefile.in (HOST_CC): Delete this definition.\n+\n+\t* com.c (index, rindex): Delete these declarations.\n+\n+\t* proj.h: (isascii): Delete this.\n+\n+\t* Make-lang.in (f77.install-common): Warn if `f77-install-ok'\n+\tflag-file exists, since it no longer triggers any activity.\n+\n+\tRename libf2c.a and f2c.h to libg2c.a and g2c.h,\n+\tnormalize and simplify g77/libg2c build process:\n+\t* Make-lang.in: Remove all support for overwriting\n+\t/usr/bin/f77 etc., or whatever the actual names are\n+\tvia $(prefix) and $(local_prefix).  (g++ overwrites\n+\t/usr/bin/c++, but then it's often the only C++ compiler\n+\ton the system; f77 often exists on systems that are\n+\tinstalling g77.)\n+\t(f77.realclean): Remove obsolete target.\n+\t(g77.c, g77$(exeext)): Minor changes to look more like g++'s\n+\tstuff.\n+\t(f771): Now built with srcdir=gcc/f, not srcdir=gcc, to be\n+\tmore like g++ and such.\n+\t(f/Makefile): Removed, as g++ doesn't need this rule.\n+\t(f77.install-common): No longer install f77, etc.\n+\t(f77.install-man): No longer install f77.1.\n+\t(f77.uninstall): No longer uninstall f77, f77.1, etc.\n+\t(f77.stage1, f77.stage2, f77.stage3, f77.stage4): Do work\n+\tonly if \"f77\" appears in $(LANGUAGES).\n+\t(Note: gcc's Makefile.in's bootstrap target should set\n+\tLANGUAGES=$(BOOT_LANGUAGES) when making the stage1 target.)\n+\t* Makefile.in: Update vis-a-vis gcc/cp/Makefile.in.\n+\t(none): Remove.\n+\t(g77-only): Relocate.\n+\t(all.indirect, f771, *.o): Now assumes current directory\n+\tis this dir (gcc/f), not the parent directory.\n+\t(TAGS): Remove \"echo 'parse.y,0'  >> TAGS ;\" line.\n+\t* config-lang.in: Delete commented-out code.\n+\tFix stagestuff definition.  Add more stuff to\n+\tdiff_excludes definition.  Don't create any directories.\n+\tSet outputs to f/Makefile, to get variable substition\n+\tto happen (what does that really do, anyway?!).\n+\t* g77spec.c: Rename libf2c to libg2c.\n+\n+\t* com.h: Remove all of the gcc back-end decls,\n+\tsince egcs should have all of them correct.\n+\n+\t* com.c: Include \"proj.h\" before anything else,\n+\tas that's how things are supposed to work.\n+\t* ste.c: Ditto.\n+\n+\t* bad.c: Include \"flags.j\" here, since some diagnostics\n+\tcheck flag_pedantic_errors.\n+\n+\t* Makefile.in (f/*.o): Rebuild dependencies via\n+\tdeps-kinda.\n+\n+\t* output.j: New source file.\n+\t* Make-lang.in (F77_SRCS): Update accordingly.\n+\t* Makefile.in (OUTPUT_H): Ditto.\n+\t(deps-kinda): Ditto.\n+\t* com.c: Include \"output.j\" here.\n+\t* lex.c: Ditto.\n+\n Mon May 25 03:34:42 1998  Craig Burley  <burley@gnu.org>\n \n \t* com.c (ffecom_expr_): Fix D**I and Z**I cases to"}, {"sha": "b199b1a9f93e15b1f760ce3dc848eef7d7268aa9", "filename": "gcc/f/Make-lang.in", "status": "modified", "additions": 149, "deletions": 119, "changes": 268, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2FMake-lang.in?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -1,5 +1,5 @@\n # Top level makefile fragment for GNU Fortran.           -*-makefile-*-\n-#   Copyright (C) 1995-1997 Free Software Foundation, Inc.\n+#   Copyright (C) 1995-1998 Free Software Foundation, Inc.\n \n #This file is part of GNU Fortran.\n \n@@ -15,8 +15,8 @@\n \n #You should have received a copy of the GNU General Public License\n #along with GNU Fortran; see the file COPYING.  If not, write to\n-#the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n-#02111-1307, USA.\n+#the Free Software Foundation, 59 Temple Place - Suite 330,\n+#Boston, MA 02111-1307, USA.\n \n # This file provides the language dependent support in the main Makefile.\n # Each language makefile fragment must provide the following targets:\n@@ -32,55 +32,16 @@\n #\n # It should also provide rules for:\n #\n-# - making any compiler driver (eg: g77)\n-# - the compiler proper (eg: f771)\n+# - making any compiler driver (eg: g++)\n+# - the compiler proper (eg: cc1plus)\n # - define the names for selecting the language in LANGUAGES.\n #\n # $(srcdir) must be set to the gcc/ source directory (not gcc/f/).\n #\f\n-# Extra flags to pass to recursive makes (and to sub-configure).\n-# Use different quoting rules compared with FLAGS_TO_PASS so we can use\n-# this to set environment variables as well\n-# Note that GCC_FOR_TARGET, GCC_FLAGS aren't in here -- treated separately.\n-F77_FLAGS_TO_PASS = \\\n-\tCROSS=\"$(CROSS)\" \\\n-\tAR_FLAGS=\"$(AR_FLAGS)\" \\\n-\tAR=\"$(AR)\" \\\n-\tBISON=\"$(BISON)\" \\\n-\tBISONFLAGS=\"$(BISONFLAGS)\" \\\n-\tCC=\"$(CC)\" \\\n-\tCFLAGS=\"$(CFLAGS)\" \\\n-\tX_CFLAGS=\"$(X_CFLAGS)\" \\\n-\tLDFLAGS=\"$(LDFLAGS)\" \\\n-\tLEX=\"$(LEX)\" \\\n-\tLEXFLAGS=\"$(LEXFLAGS)\" \\\n-\tMAKEINFO=\"$(MAKEINFO)\" \\\n-\tMAKEINFOFLAGS=\"$(MAKEINFOFLAGS)\" \\\n-\tRANLIB=\"$(RANLIB)\" \\\n-\tRANLIB_TEST=\"$(RANLIB_TEST)\" \\\n-\tSHELL=\"$(SHELL)\" \\\n-\texec_prefix=\"$(exec_prefix)\" \\\n-\tprefix=\"$(prefix)\" \\\n-\ttooldir=\"$(tooldir)\" \\\n-\tbindir=\"$(bindir)\" \\\n-\tlibsubdir=\"$(libsubdir)\"\n-#\t\"F77_FOR_BUILD=$(F77_FOR_BUILD)\" \\\n-#\t\"F77FLAGS=$(F77FLAGS)\" \\\n-#\t\"F77_FOR_TARGET=$(F77_FOR_TARGET)\"\n-\n-# This flag controls whether to install (overwrite) f77 on this system,\n-# and also whether to uninstall it when using the uninstall target.\n-# As shipped, the flag is a test of whether the `f77_install_ok'\n-# file exists in the build or source directories (top level), but\n-# you can just change it here if you like.\n-F77_INSTALL_FLAG = [ -f f77-install-ok -o -f $(srcdir)/f77-install-ok ]\n-\n-# Actual names to use when installing a native compiler.\n-F77_INSTALL_NAME = `t='$(program_transform_name)'; echo f77 | sed $$t`\n+# Actual name to use when installing a native compiler.\n G77_INSTALL_NAME = `t='$(program_transform_name)'; echo g77 | sed $$t`\n \n-# Actual names to use when installing a cross-compiler.\n-F77_CROSS_NAME = `t='$(program_transform_cross_name)'; echo f77 | sed $$t`\n+# Actual name to use when installing a cross-compiler.\n G77_CROSS_NAME = `t='$(program_transform_cross_name)'; echo g77 | sed $$t`\n #\f\n # Define the names for selecting f77 in LANGUAGES.\n@@ -95,34 +56,62 @@ F77 f77: f771$(exeext)\n   f77.install-normal \\\n   f77.install-common f77.install-info f77.install-man \\\n   f77.uninstall f77.mostlyclean f77.clean f77.distclean \\\n-  f77.maintainer-clean f77.realclean f77.stage1 f77.stage2 f77.stage3 \\\n-  f77.stage4 f77.distdir f77.rebuilt\n+  f77.extraclean f77.maintainer-clean f77.distdir f77.rebuilt \\\n+  f77.stage1 f77.stage2 f77.stage3 f77.stage4\n \n g77.c: $(srcdir)/gcc.c\n-\t-rm -f $@\n-\t$(LN_S) $(srcdir)/gcc.c $@\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\tif [ -f lang-f77 ]; then \\\n+\t  rm -f g77.c; \\\n+\t  $(LN_S) $(srcdir)/gcc.c g77.c; \\\n+\tfi\n \n-g77spec.o: $(srcdir)/f/g77spec.c\n-\t$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $(srcdir)/f/g77spec.c\n+g77spec.o: $(srcdir)/f/g77spec.c $(srcdir)/f/version.h\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\tif [ -f lang-f77 ]; then \\\n+\t  $(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $(srcdir)/f/g77spec.c; \\\n+\tfi\n+\n+g77version.o: $(srcdir)/f/version.c\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\tif [ -f lang-f77 ]; then \\\n+\t  $(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) -o g77version.o \\\n+\t    $(srcdir)/f/version.c; \\\n+\tfi\n \n # N.B.: This is a copy of the gcc.o rule, with -DLANG_SPECIFIC_DRIVER added.\n # It'd be nice if we could find an easier way to do this---rather than have\n # to track changes to the toplevel gcc Makefile as well.\n # We depend on g77.c last, to make it obvious where it came from.\n g77.o: $(CONFIG_H) multilib.h config.status $(lang_specs_files) g77.c\n-\t$(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n-\t$(DRIVER_DEFINES) \\\n-\t-DLANG_SPECIFIC_DRIVER -c g77.c\n+\tif [ -f lang-f77 ]; then \\\n+\t  $(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $(DRIVER_DEFINES) \\\n+\t   -DLANG_SPECIFIC_DRIVER -c g77.c; \\\n+\tfi\n \n # Create the compiler driver for g77.\n-g77$(exeext): g77.o g77spec.o version.o choose-temp.o pexecute.o prefix.o $(LIBDEPS) $(EXTRA_GCC_OBJS)\n-\t$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@ g77.o g77spec.o prefix.o version.o \\\n-\t  choose-temp.o pexecute.o $(EXTRA_GCC_OBJS) $(LIBS)\n+g77$(exeext): g77.o g77spec.o g77version.o version.o choose-temp.o pexecute.o prefix.o \\\n+  $(LIBDEPS) $(EXTRA_GCC_OBJS)\n+\tif [ -f lang-f77 ]; then \\\n+\t  $(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@ g77.o g77spec.o g77version.o \\\n+\t   version.o choose-temp.o pexecute.o prefix.o $(EXTRA_GCC_OBJS) $(LIBS); \\\n+\tfi\n \n # Create a version of the g77 driver which calls the cross-compiler.\n g77-cross$(exeext): g77$(exeext)\n-\t-rm -f g77-cross$(exeext)\n-\tcp g77$(exeext) g77-cross$(exeext)\n+\tif [ -f lang-f77 ]; then \\\n+\t  rm -f g77-cross$(exeext); \\\n+\t  cp g77$(exeext) g77-cross$(exeext); \\\n+\tfi\n \n F77_SRCS = \\\n  $(srcdir)/f/assert.j \\\n@@ -170,6 +159,7 @@ F77_SRCS = \\\n  $(srcdir)/f/malloc.h \\\n  $(srcdir)/f/name.c \\\n  $(srcdir)/f/name.h \\\n+ $(srcdir)/f/output.j \\\n  $(srcdir)/f/parse.c \\\n  $(srcdir)/f/proj.c \\\n  $(srcdir)/f/proj.h \\\n@@ -228,11 +218,11 @@ F77_SRCS = \\\n  $(srcdir)/f/where.c \\\n  $(srcdir)/f/where.h\n \n-f771$(exeext): $(P) $(F77_SRCS) $(LIBDEPS) stamp-objlist f/Makefile\n-\t$(MAKE) -f f/Makefile $(FLAGS_TO_PASS) VPATH=$(srcdir) srcdir=$(srcdir) f771$(exeext)\n-\n-f/Makefile: $(srcdir)/f/Makefile.in $(srcdir)/configure\n-\t$(SHELL) config.status\n+f771$(exeext): $(P) $(F77_SRCS) $(LIBDEPS) stamp-objlist\n+\ttouch lang-f77\n+\tcd f; $(MAKE) $(FLAGS_TO_PASS) \\\n+\t  HOST_CC=\"$(HOST_CC)\" HOST_CFLAGS=\"$(HOST_CFLAGS)\" HOST_CPPFLAGS=\"$(HOST_CPPFLAGS)\" \\\n+\t  ../f771$(exeext)\n \n #\f\n # Build hooks:\n@@ -249,12 +239,25 @@ f77.dvi: f/g77.dvi\n f/g77.info: $(srcdir)/f/g77.texi $(srcdir)/f/bugs.texi \\\n \t    $(srcdir)/f/g77install.texi $(srcdir)/f/news.texi \\\n \t    $(srcdir)/f/intdoc.texi\n-\t$(MAKEINFO) -I$(srcdir)/f -o f/g77.info $(srcdir)/f/g77.texi\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\tif [ -f lang-f77 ]; then \\\n+\t  rm $(srcdir)/f/g77.info-*; \\\n+\t  $(MAKEINFO) -I$(srcdir)/f -o f/g77.info $(srcdir)/f/g77.texi; \\\n+\tfi\n \n f/g77.dvi: $(srcdir)/f/g77.texi $(srcdir)/f/bugs.texi \\\n-\t\t     $(srcdir)/f/g77install.texi $(srcdir)/f/news.texi \\\n-\t\t     $(srcdir)/f/intdoc.texi\n-\t$(TEXI2DVI) -I$(srcdir)/f -o f/g77.dvi $(srcdir)/f/g77.texi\n+\t    $(srcdir)/f/g77install.texi $(srcdir)/f/news.texi \\\n+\t    $(srcdir)/f/intdoc.texi\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\tif [ -f lang-f77 ]; then \\\n+\t  $(TEXI2DVI) -I$(srcdir)/f -o f/g77.dvi $(srcdir)/f/g77.texi; \\\n+\tfi\n \n # This dance is all about producing accurate documentation for g77's\n # intrinsics with minimum fuss.  f/ansify appends \"\\n\\\" to C strings\n@@ -276,13 +279,19 @@ f/g77.dvi: $(srcdir)/f/g77.texi $(srcdir)/f/bugs.texi \\\n # been found only upon reading the documentation that was automatically\n # produced from it.\n $(srcdir)/f/intdoc.texi: f/intdoc.c f/intdoc.in f/ansify.c f/intrin.def f/intrin.h\n-\t$(HOST_CC) $(HOST_CFLAGS) $(HOST_LDFLAGS) \\\n-\t      `echo $(srcdir)/f/ansify.c | sed 's,^\\./,,'` -o f/ansify\n-\tf/ansify < $(srcdir)/f/intdoc.in > f/intdoc.h0 $(srcdir)/f/intdoc.in\n-\t$(HOST_CC) $(HOST_CFLAGS) $(HOST_LDFLAGS) -I./f \\\n-\t      `echo $(srcdir)/f/intdoc.c | sed 's,^\\./,,'` -o f/intdoc\n-\tf/intdoc > $(srcdir)/f/intdoc.texi\n-\trm f/intdoc f/ansify f/intdoc.h0\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\tif [ -f lang-f77 ]; then \\\n+\t  $(HOST_CC) $(HOST_CFLAGS) $(HOST_LDFLAGS) \\\n+\t   `echo $(srcdir)/f/ansify.c | sed 's,^\\./,,'` -o f/ansify; \\\n+\t  f/ansify < $(srcdir)/f/intdoc.in > f/intdoc.h0 $(srcdir)/f/intdoc.in; \\\n+\t  $(HOST_CC) $(HOST_CFLAGS) $(HOST_LDFLAGS) -I./f \\\n+\t   `echo $(srcdir)/f/intdoc.c | sed 's,^\\./,,'` -o f/intdoc; \\\n+\t  f/intdoc > $(srcdir)/f/intdoc.texi; \\\n+\t  rm f/intdoc f/ansify f/intdoc.h0; \\\n+\tfi\n \n $(srcdir)/f/BUGS: f/bugs0.texi f/bugs.texi\n \tcd $(srcdir)/f; $(MAKEINFO) -D BUGSONLY --no-header --no-split \\\n@@ -308,30 +317,39 @@ f77.install-normal:\n # Install the driver program as $(target)-g77\n # and also as either g77 (if native) or $(tooldir)/bin/g77.\n f77.install-common:\n-\t-if [ -f f771$(exeext) ] ; then \\\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\t-if [ -f lang-f77 -a -f f771$(exeext) ] ; then \\\n \t  if [ -f g77-cross$(exeext) ] ; then \\\n \t    rm -f $(bindir)/$(G77_CROSS_NAME)$(exeext); \\\n \t    $(INSTALL_PROGRAM) g77-cross$(exeext) $(bindir)/$(G77_CROSS_NAME)$(exeext); \\\n \t    chmod a+x $(bindir)/$(G77_CROSS_NAME)$(exeext); \\\n-\t    if $(F77_INSTALL_FLAG) ; then \\\n-\t      rm -f $(bindir)/$(F77_CROSS_NAME)$(exeext); \\\n-\t      $(LN) $(bindir)/$(G77_CROSS_NAME)$(exeext) $(bindir)/$(F77_CROSS_NAME)$(exeext); \\\n-\t    fi ; \\\n \t  else \\\n \t    rm -f $(bindir)/$(G77_INSTALL_NAME)$(exeext); \\\n \t    $(INSTALL_PROGRAM) g77$(exeext) $(bindir)/$(G77_INSTALL_NAME)$(exeext); \\\n \t    chmod a+x $(bindir)/$(G77_INSTALL_NAME)$(exeext); \\\n-\t    if $(F77_INSTALL_FLAG) ; then \\\n-\t      rm -f $(bindir)/$(F77_INSTALL_NAME)$(exeext); \\\n-\t      $(LN) $(bindir)/$(G77_INSTALL_NAME)$(exeext) $(bindir)/$(F77_INSTALL_NAME)$(exeext); \\\n-\t    fi ; \\\n \t  fi ; \\\n \telse true; fi\n+\t@if [ -f f77-install-ok -o -f $(srcdir)/f77-install-ok ]; then \\\n+\t  echo ''; \\\n+\t  echo 'Warning: egcs no longer installs an f77 command.'; \\\n+\t  echo '         You must do so yourself.  For more information,'; \\\n+\t  echo '         read \"Distributing Binaries\" in the egcs g77 docs.'; \\\n+\t  echo '         (To turn off this warning, delete the file'; \\\n+\t  echo '         f77-install-ok in the source or build directory.)'; \\\n+\t  echo ''; \\\n+\tfi\n \n # $(INSTALL_DATA) might be a relative pathname, so we can't cd into srcdir\n # to do the install.  The sed rule was copied from stmp-int-hdrs.\n f77.install-info: f77.info\n-\tif [ -f f/g77.info ] ; then \\\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\tif [ -f lang-f77 -a -f f/g77.info ] ; then \\\n \t  rm -f $(infodir)/g77.info*; \\\n \t  for f in f/g77.info*; do \\\n \t      realfile=`echo $$f | sed -e 's|.*/\\([^/]*\\)$$|\\1|'`; \\\n@@ -347,81 +365,93 @@ f77.install-info: f77.info\n \telse : ; fi\n \n f77.install-man: $(srcdir)/f/g77.1\n-\t-if [ -f f771$(exeext) ] ; then \\\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\t-if [ -f lang-f77 -a -f f771$(exeext) ] ; then \\\n \t  if [ -f g77-cross$(exeext) ] ; then \\\n \t    rm -f $(mandir)/$(G77_CROSS_NAME)$(manext); \\\n \t    $(INSTALL_DATA) $(srcdir)/f/g77.1 $(mandir)/$(G77_CROSS_NAME)$(manext); \\\n \t    chmod a-x $(mandir)/$(G77_CROSS_NAME)$(manext); \\\n-\t    if $(F77_INSTALL_FLAG) ; then \\\n-\t      rm -f $(mandir)/$(F77_CROSS_NAME)$(manext); \\\n-\t      $(LN) $(mandir)/$(G77_CROSS_NAME)$(manext) $(mandir)/$(F77_CROSS_NAME)$(manext); \\\n-\t    fi ;\\\n \t  else \\\n \t    rm -f $(mandir)/$(G77_INSTALL_NAME)$(manext); \\\n \t    $(INSTALL_DATA) $(srcdir)/f/g77.1 $(mandir)/$(G77_INSTALL_NAME)$(manext); \\\n \t    chmod a-x $(mandir)/$(G77_INSTALL_NAME)$(manext); \\\n-\t    if $(F77_INSTALL_FLAG) ; then \\\n-\t      rm -f $(mandir)/$(F77_INSTALL_NAME)$(manext); \\\n-\t      $(LN) $(mandir)/$(G77_INSTALL_NAME)$(manext) $(mandir)/$(F77_INSTALL_NAME)$(manext); \\\n-\t    fi ;\\\n \t  fi; \\\n \telse true; fi\n \n f77.uninstall:\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n \t@if [ -f lang-f77 ] ; then \\\n \t  if $(SHELL) -c 'install-info --version | sed 1q | fgrep -s -v -i debian' >/dev/null 2>&1; then \\\n \t    echo \" install-info --delete --info-dir=$(infodir) $(infodir)/g77.info\"; \\\n \t    install-info --delete --info-dir=$(infodir) $(infodir)/g77.info || : ; \\\n \t  else : ; fi; \\\n \telse : ; fi\n-\t-if $(F77_INSTALL_FLAG) ; then \\\n-\t  rm -rf $(bindir)/$(F77_INSTALL_NAME)$(exeext) ; \\\n-\t  rm -rf $(bindir)/$(F77_CROSS_NAME)$(exeext) ; \\\n-\t  rm -rf $(mandir)/$(F77_INSTALL_NAME)$(manext) ; \\\n-\t  rm -rf $(mandir)/$(F77_CROSS_NAME)$(manext) ; \\\n+\t-if [ -f lang-f77 ]; then \\\n+\t  rm -rf $(bindir)/$(G77_INSTALL_NAME)$(exeext); \\\n+\t  rm -rf $(bindir)/$(G77_CROSS_NAME)$(exeext); \\\n+\t  rm -rf $(mandir)/$(G77_INSTALL_NAME)$(manext); \\\n+\t  rm -rf $(mandir)/$(G77_CROSS_NAME)$(manext); \\\n+\t  rm -rf $(infodir)/g77.info*; \\\n \tfi\n-\t-rm -rf $(bindir)/$(G77_INSTALL_NAME)$(exeext)\n-\t-rm -rf $(bindir)/$(G77_CROSS_NAME)$(exeext)\n-\t-rm -rf $(mandir)/$(G77_INSTALL_NAME)$(manext)\n-\t-rm -rf $(mandir)/$(G77_CROSS_NAME)$(manext)\n-\t-rm -rf $(infodir)/g77.info*\n #\f\n # Clean hooks:\n # A lot of the ancillary files are deleted by the main makefile.\n # We just have to delete files specific to us.\n \n f77.mostlyclean:\n \t-rm -f f/*$(objext)\n-\t-rm -f f/fini f/f771$(exeext) f/stamp-str f/str-*.h f/str-*.j f/intdoc f/ansify f/intdoc.h0\n+\t-rm -f f/fini f/stamp-str f/str-*.h f/str-*.j\n+\t-rm -f f/intdoc f/ansify f/intdoc.h0\n f77.clean:\n \t-rm -f g77.c g77.o g77spec.o g77version.o\n f77.distclean:\n-\t-rm -f f/Makefile\n-# realclean is the pre-2.7.0 name for maintainer-clean\n-f77.maintainer-clean f77.realclean: f77.distclean\n+\t-rm -f lang-f77 f/Makefile\n+f77.extraclean:\n+f77.maintainer-clean:\n \t-rm -f f/g77.info* f/g77.*aux f/TAGS f/BUGS f/INSTALL f/NEWS f/intdoc.texi\n #\f\n # Stage hooks:\n # The main makefile has already created stage?/f.\n \n-G77STAGESTUFF = f/*$(objext) f/fini f/stamp-str f/str-*.h f/str-*.j g77.o g77spec.o g77version.o\n+G77STAGESTUFF = f/*$(objext) f/fini f/stamp-str f/str-*.h f/str-*.j \\\n+  lang-f77 g77.o g77spec.o g77version.o\n \n f77.stage1: stage1-start\n-\t-mv $(G77STAGESTUFF) stage1/f\n+\t-if [ -f lang-f77 ]; then \\\n+\t  mv $(G77STAGESTUFF) stage1/f; \\\n+\tfi\n f77.stage2: stage2-start\n-\t-mv $(G77STAGESTUFF) stage2/f\n+\t-if [ -f lang-f77 ]; then \\\n+\t  mv $(G77STAGESTUFF) stage2/f; \\\n+\tfi\n f77.stage3: stage3-start\n-\t-mv $(G77STAGESTUFF) stage3/f\n+\t-if [ -f lang-f77 ]; then \\\n+\t  mv $(G77STAGESTUFF) stage3/f; \\\n+\tfi\n f77.stage4: stage4-start\n-\t-mv $(G77STAGESTUFF) stage4/f\n+\t-if [ -f lang-f77 ]; then \\\n+\t  mv $(G77STAGESTUFF) stage4/f; \\\n+\tfi\n #\f\n # Maintenance hooks:\n \n # This target creates the files that can be rebuilt, but go in the\n # distribution anyway.  It then copies the files to the distdir directory.\n f77.distdir: f77.rebuilt\n-\tmkdir tmp/f\n-\tcd f; \\\n-\tfor file in *[0-9a-zA-Z+]; do \\\n-\t  ($LN) $$file ../tmp/f\n-\tdone\n+\tcase \"$(LANGUAGES)\" in \\\n+\t  *[fF]77*) touch lang-f77;; \\\n+\t  *) rm -f lang-f77;; \\\n+\tesac\n+\t-if [ -f lang-f77 ]; then \\\n+\t  mkdir tmp/f; \\\n+\t  cd f; \\\n+\t  for file in *[0-9a-zA-Z+]; do \\\n+\t    $(LN_S) $$file ../tmp/f; \\\n+\t  done; \\\n+\tfi"}, {"sha": "3d4868524b79375579fd18cf87424935834f15fa", "filename": "gcc/f/Makefile.in", "status": "modified", "additions": 301, "deletions": 340, "changes": 641, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2FMakefile.in?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -1,5 +1,5 @@\n # Makefile for GNU F77 compiler.\n-#   Copyright (C) 1995-1997 Free Software Foundation, Inc.\n+#   Copyright (C) 1995-1998 Free Software Foundation, Inc.\n \n #This file is part of GNU Fortran.\n \n@@ -54,8 +54,7 @@ T_CFLAGS =\n X_CPPFLAGS =\n T_CPPFLAGS =\n \n-CC = cc\n-HOST_CC = $(CC)\n+CC = @CC@\n BISON = bison\n BISONFLAGS =\n LEX = flex\n@@ -84,15 +83,13 @@ GCC_CFLAGS=$(INTERNAL_CFLAGS) $(X_CFLAGS) $(T_CFLAGS) $(CFLAGS)\n # These are used because `configure' appends `cross-make'\n # to the makefile when making a cross-compiler.\n \n-target= ... `configure' substitutes actual target name here.\n-xmake_file= ... `configure' substitutes actual x- file name here.\n-tmake_file= ... `configure' substitutes actual t- file name here.\n+target=@target@\n+xmake_file=@dep_host_xmake_file@\n+tmake_file=@dep_tmake_file@\n \n-# Directory where gcc sources are (gcc/), from where we are.\n-# Note that this should be overridden when building f771, which happens\n-# at the top level, not in f.  Likewise for VPATH (if added).\n-srcdir = .\n-VPATH = .\n+# Directory where sources are, from where we are.\n+srcdir = @srcdir@\n+VPATH = @srcdir@\n \n # Additional system libraries to link with.\n CLIB=\n@@ -106,43 +103,30 @@ ALL=all\n \n # End of variables for you to override.\n \n-# Definition of `none' is here so that new rules inserted by sed\n+# Definition of `all' is here so that new rules inserted by sed\n # do not specify the default target.\n-none:\n-\t@echo ''\n-\t@echo 'Do not use this makefile to build anything other than the'\n-\t@echo 'g77 derived files via the \"make g77-only\" target.'\n-\t@echo 'Instead, use the documented procedures to build gcc itself,'\n-\t@echo 'which will build g77 as well when done properly.'\n-\t@echo ''\n-\t@exit 1\n-\n-# This rule is just a handy way to build the g77 derived files without\n-# having the gcc source tree around.\n-g77-only: force\n-\tif [ -f g77.texi ] ; then \\\n-\t  (cd ..; $(MAKE) srcdir=. HOST_CC=cc HOST_CFLAGS=-g -f f/Make-lang.in f77.rebuilt); \\\n-\telse \\\n-\t  $(MAKE) srcdir=. HOST_CC=cc HOST_CFLAGS=-g -f f/Make-lang.in f77.rebuilt; \\\n-\tfi\n-\n all: all.indirect\n \n # This tells GNU Make version 3 not to put all variables in the environment.\n .NOEXPORT:\n \n # sed inserts variable overrides after the following line.\n ####target overrides\n+@target_overrides@\n ####host overrides\n+@host_overrides@\n ####cross overrides\n+@cross_defines@\n+@cross_overrides@\n ####build overrides\n+@build_overrides@\n #\f\n # Now figure out from those variables how to compile and link.\n \n-all.indirect: f/Makefile f771$(exeext)\n+all.indirect: Makefile ../f771$(exeext)\n \n # IN_GCC tells obstack.h that we are using gcc's <stddef.h> file.\n-INTERNAL_CFLAGS = $(CROSS) -DIN_GCC\n+INTERNAL_CFLAGS = $(CROSS) -DIN_GCC @extra_c_flags@\n \n # This is the variable actually used when we compile.\n ALL_CFLAGS = $(INTERNAL_CFLAGS) $(X_CFLAGS) $(T_CFLAGS) $(CFLAGS) $(XCFLAGS) -W -Wall\n@@ -151,17 +135,17 @@ ALL_CFLAGS = $(INTERNAL_CFLAGS) $(X_CFLAGS) $(T_CFLAGS) $(CFLAGS) $(XCFLAGS) -W\n ALL_CPPFLAGS = $(CPPFLAGS) $(X_CPPFLAGS) $(T_CPPFLAGS)\n \n # f771 is so big, need to tell linker on m68k-next-nextstep* to make enough\n-# room for it.  On AIX, linking f771 overflows the linker TOC.  -bbigtoc is\n-# appropriate for the linker on AIX 4.1 and above.\n+# room for it.  On AIX, linking f771 overflows the linker TOC;\n+# `-bbigtoc' is appropriate for the linker on AIX 4.1 and above.\n F771_LDFLAGS = `case \"${target}\" in\\\n  m68k-next-nextstep*) echo -segaddr __DATA 6000000;;\\\n  *-*-aix[4-9]*) \\`$(CC) --print-prog-name=ld\\` -v 2>&1 | grep BFD >/dev/null || echo -Wl,-bbigtoc;; esac`\n \n # Even if ALLOCA is set, don't use it if compiling with GCC.\n \n-SUBDIR_OBSTACK = `if [ x$(OBSTACK) != x ]; then echo $(OBSTACK); else true; fi`\n-SUBDIR_USE_ALLOCA = `case \"${CC}\" in \"${OLDCC}\") if [ x$(ALLOCA) != x ]; then echo $(ALLOCA); else true; fi ;; esac`\n-SUBDIR_MALLOC = `if [ x$(MALLOC) != x ]; then echo $(MALLOC); else true; fi`\n+SUBDIR_OBSTACK = `if [ x$(OBSTACK) != x ]; then echo ../$(OBSTACK); else true; fi`\n+SUBDIR_USE_ALLOCA = `case \"${CC}\" in \"${OLDCC}\") if [ x$(ALLOCA) != x ]; then echo ../$(ALLOCA); else true; fi ;; esac`\n+SUBDIR_MALLOC = `if [ x$(MALLOC) != x ]; then echo ../$(MALLOC); else true; fi`\n \n # How to link with both our special library facilities\n # and the system's installed libraries.\n@@ -170,105 +154,72 @@ LIBS = $(SUBDIR_OBSTACK) $(SUBDIR_USE_ALLOCA) $(SUBDIR_MALLOC) $(CLIB)\n # Specify the directories to be searched for header files.\n # Both . and srcdir are used, in that order,\n # so that tm.h and config.h will be found in the compilation\n-# directory rather than in the source directory.\n-INCLUDES = -If -I$(srcdir)/f -I. -I$(srcdir) -I$(srcdir)/config\n-\n-# Flags_to_pass to recursive makes.\n-# Note that we don't need to distinguish the `_FOR_TARGET' cross tools\n-# as AR and RANLIB are set appropriately by configure iff cross compiling.\n-FLAGS_TO_PASS = \\\n-\t\"CROSS=$(CROSS)\" \\\n-\t\"AR_FLAGS=$(AR_FLAGS)\" \\\n-\t\"AR=$(AR)\" \\\n-\t\"BISON=$(BISON)\" \\\n-\t\"BISONFLAGS=$(BISONFLAGS)\" \\\n-\t\"CC=$(CC)\" \\\n-\t\"CFLAGS=$(CFLAGS)\" \\\n-\t\"GCCFLAGS=$(GCCFLAGS)\" \\\n-\t\"GCC_FOR_TARGET=$(GCC_FOR_TARGET)\" \\\n-\t\"LDFLAGS=$(LDFLAGS)\" \\\n-\t\"LEX=$(LEX)\" \\\n-\t\"LEXFLAGS=$(LEXFLAGS)\" \\\n-\t\"MAKEINFO=$(MAKEINFO)\" \\\n-\t\"MAKEINFOFLAGS=$(MAKEINFOFLAGS)\" \\\n-\t\"RANLIB=$(RANLIB)\" \\\n-\t\"RANLIB_TEST=$(RANLIB_TEST)\" \\\n-\t\"SHELL=$(SHELL)\" \\\n-\t\"exec_prefix=$(exec_prefix)\" \\\n-\t\"prefix=$(prefix)\" \\\n-\t\"local_prefix=$(local_prefix)\" \\\n-\t\"gxx_include_dir=$(gxx_include_dir)\" \\\n-\t\"tooldir=$(tooldir)\" \\\n-\t\"bindir=$(bindir)\" \\\n-\t\"libsubdir=$(libsubdir)\"\n+# subdirectory rather than in the source directory.\n+INCLUDES = -I. -I.. -I$(srcdir) -I$(srcdir)/.. -I$(srcdir)/../config\n \n+# Always use -I$(srcdir)/config when compiling.\n .c.o:\n-\t$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $< -o $@\n+\t$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $<\n+\n #\f\n # Lists of files for various purposes.\n \n # Language-specific object files for g77\n \n F77_OBJS = \\\n- f/bad.o \\\n- f/bit.o \\\n- f/bld.o \\\n- f/com.o \\\n- f/data.o \\\n- f/equiv.o \\\n- f/expr.o \\\n- f/global.o \\\n- f/implic.o \\\n- f/info.o \\\n- f/intrin.o \\\n- f/lab.o \\\n- f/lex.o \\\n- f/malloc.o \\\n- f/name.o \\\n- f/parse.o \\\n- f/proj.o \\\n- f/src.o \\\n- f/st.o \\\n- f/sta.o \\\n- f/stb.o \\\n- f/stc.o \\\n- f/std.o \\\n- f/ste.o \\\n- f/storag.o \\\n- f/stp.o \\\n- f/str.o \\\n- f/sts.o \\\n- f/stt.o \\\n- f/stu.o \\\n- f/stv.o \\\n- f/stw.o \\\n- f/symbol.o \\\n- f/target.o \\\n- f/top.o \\\n- f/type.o \\\n- f/version.o \\\n- f/where.o\n+ bad.o \\\n+ bit.o \\\n+ bld.o \\\n+ com.o \\\n+ data.o \\\n+ equiv.o \\\n+ expr.o \\\n+ global.o \\\n+ implic.o \\\n+ info.o \\\n+ intrin.o \\\n+ lab.o \\\n+ lex.o \\\n+ malloc.o \\\n+ name.o \\\n+ parse.o \\\n+ proj.o \\\n+ src.o \\\n+ st.o \\\n+ sta.o \\\n+ stb.o \\\n+ stc.o \\\n+ std.o \\\n+ ste.o \\\n+ storag.o \\\n+ stp.o \\\n+ str.o \\\n+ sts.o \\\n+ stt.o \\\n+ stu.o \\\n+ stv.o \\\n+ stw.o \\\n+ symbol.o \\\n+ target.o \\\n+ top.o \\\n+ type.o \\\n+ version.o \\\n+ where.o\n \n # Language-independent object files.\n-OBJS = `cat stamp-objlist | sed -e \"s:  : :g\" -e \"s: : f/:g\"`\n-OBJDEPS = stamp-objlist\n+OBJS = `cat ../stamp-objlist`\n+OBJDEPS = ../stamp-objlist\n \n-compiler: f771$(exeext)\n-# This is now meant to be built in the top level directory, not `f':\n-f771$(exeext): $(P) f/Makefile $(F77_OBJS) $(OBJDEPS) $(LIBDEPS)\n+compiler: ../f771$(exeext)\n+../f771$(exeext): $(P) $(F77_OBJS) $(OBJDEPS) $(LIBDEPS)\n \trm -f f771$(exeext)\n \t$(CC) $(ALL_CFLAGS) $(LDFLAGS) $(F771_LDFLAGS) -o $@ \\\n \t      $(F77_OBJS) $(OBJS) $(LIBS)\n \n-# Check in case anyone expects to build in this directory:\n-f/Makefile:\n-\t@if test ! -f f/Makefile ; \\\n-\tthen echo \"Build f771 only at the top level.\" 2>&1; exit 1; \\\n-\telse true; fi\n+Makefile: $(srcdir)/Makefile.in $(srcdir)/../configure\n+\tcd ..; $(SHELL) config.status\n \n-Makefile: $(srcdir)/f/Makefile.in $(srcdir)/configure\n-\n-native: f771$(exeext)\n+native: config.status ../f771$(exeext)\n #\f\n # Compiling object files from source files.\n \n@@ -284,19 +235,20 @@ native: f771$(exeext)\n # that live in a distclean'd gcc source directory have \"$(srcdir)/\"\n # prefixes, while the others don't because they'll be created\n # only in the build directory.\n-ASSERT_H = $(srcdir)/f/assert.j $(srcdir)/assert.h\n-CONFIG_H = $(srcdir)/f/config.j config.h\n-CONVERT_H = $(srcdir)/f/convert.j $(srcdir)/convert.h\n-FLAGS_H = $(srcdir)/f/flags.j $(srcdir)/flags.h\n-GLIMITS_H = $(srcdir)/f/glimits.j $(srcdir)/glimits.h\n-HCONFIG_H = $(srcdir)/f/hconfig.j hconfig.h\n-INPUT_H = $(srcdir)/f/input.j $(srcdir)/input.h\n-RTL_H = $(srcdir)/f/rtl.j $(srcdir)/rtl.h $(srcdir)/rtl.def \\\n-\t$(srcdir)/machmode.h $(srcdir)/machmode.def\n-TCONFIG_H = $(srcdir)/f/tconfig.j tconfig.h\n-TM_H = $(srcdir)/f/tm.j tm.h\n-TREE_H = $(srcdir)/f/tree.j $(srcdir)/tree.h $(srcdir)/real.h \\\n-\t$(srcdir)/tree.def $(srcdir)/machmode.h $(srcdir)/machmode.def\n+ASSERT_H = $(srcdir)/assert.j $(srcdir)/../assert.h\n+CONFIG_H = $(srcdir)/config.j ../config.h\n+CONVERT_H = $(srcdir)/convert.j $(srcdir)/../convert.h\n+FLAGS_H = $(srcdir)/flags.j $(srcdir)/../flags.h\n+GLIMITS_H = $(srcdir)/glimits.j $(srcdir)/../glimits.h\n+HCONFIG_H = $(srcdir)/hconfig.j ../hconfig.h\n+INPUT_H = $(srcdir)/input.j $(srcdir)/../input.h\n+OUTPUT_H = $(srcdir)/output.j $(srcdir)/../output.h\n+RTL_H = $(srcdir)/rtl.j $(srcdir)/../rtl.h $(srcdir)/../rtl.def \\\n+\t$(srcdir)/../machmode.h $(srcdir)/../machmode.def\n+TCONFIG_H = $(srcdir)/tconfig.j ../tconfig.h\n+TM_H = $(srcdir)/tm.j ../tm.h\n+TREE_H = $(srcdir)/tree.j $(srcdir)/../tree.h $(srcdir)/../real.h \\\n+\t$(srcdir)/../tree.def $(srcdir)/../machmode.h $(srcdir)/../machmode.def\n \n #Build the first part of this list with the command line:\n #    cd gcc/; make deps-kinda -f f/Makefile.in\n@@ -307,211 +259,211 @@ TREE_H = $(srcdir)/f/tree.j $(srcdir)/tree.h $(srcdir)/real.h \\\n # $(RTL_H) for rtl.h.  deps-kinda uses a sed script to do those\n # substitutions, plus others for elegance.\n \n-f/bad.o: f/bad.c f/proj.h $(ASSERT_H) f/bad.h f/bad.def f/where.h $(GLIMITS_H) \\\n-  f/top.h f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/bld.h f/bld-op.def f/bit.h \\\n-  f/info.h f/info-b.def f/info-k.def f/info-w.def f/target.h f/lex.h f/type.h \\\n-  f/intrin.h f/intrin.def f/lab.h f/symbol.h f/symbol.def f/equiv.h f/storag.h \\\n-  f/global.h f/name.h\n-f/bit.o: f/bit.c f/proj.h $(ASSERT_H) $(GLIMITS_H) f/bit.h f/malloc.h\n-f/bld.o: f/bld.c f/proj.h $(ASSERT_H) f/bld.h f/bld-op.def f/bit.h f/malloc.h \\\n-  f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def f/info-w.def \\\n-  f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h f/type.h \\\n-  f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h f/name.h \\\n-  f/intrin.h f/intrin.def\n-f/com.o: f/com.c $(CONFIG_H) $(FLAGS_H) $(RTL_H) $(TREE_H) $(CONVERT_H) f/proj.h \\\n-  $(ASSERT_H) f/com.h f/com-rt.def f/bld.h f/bld-op.def f/bit.h f/malloc.h \\\n-  f/info.h f/info-b.def f/info-k.def f/info-w.def f/target.h f/bad.h f/bad.def \\\n-  f/where.h $(GLIMITS_H) f/top.h f/lex.h f/type.h f/intrin.h f/intrin.def f/lab.h \\\n-  f/symbol.h f/symbol.def f/equiv.h f/storag.h f/global.h f/name.h f/expr.h \\\n-  f/implic.h f/src.h f/st.h\n-f/data.o: f/data.c f/proj.h $(ASSERT_H) f/data.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h \\\n-  f/name.h f/intrin.h f/intrin.def f/expr.h f/st.h\n-f/equiv.o: f/equiv.c f/proj.h $(ASSERT_H) f/equiv.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def f/global.h f/name.h \\\n-  f/intrin.h f/intrin.def f/data.h\n-f/expr.o: f/expr.c f/proj.h $(ASSERT_H) f/expr.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h \\\n-  f/name.h f/intrin.h f/intrin.def f/implic.h f/src.h f/st.h f/stamp-str\n-f/fini.o: f/fini.c f/proj.h $(ASSERT_H) f/malloc.h\n-f/g77.o: f/g77.c $(CONFIG_H)\n-f/global.o: f/global.c f/proj.h $(ASSERT_H) f/global.h f/lex.h f/top.h f/malloc.h \\\n-  f/where.h $(GLIMITS_H) f/name.h f/symbol.h f/symbol.def f/bad.h f/bad.def \\\n-  f/bld.h f/bld-op.def f/bit.h f/com.h f/com-rt.def $(TREE_H) f/info.h \\\n-  f/info-b.def f/info-k.def f/info-w.def f/target.h f/type.h f/lab.h f/storag.h \\\n-  f/intrin.h f/intrin.def f/equiv.h\n-f/implic.o: f/implic.c f/proj.h $(ASSERT_H) f/implic.h f/info.h f/info-b.def \\\n-  f/info-k.def f/info-w.def f/target.h $(TREE_H) f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/malloc.h f/lex.h f/type.h f/symbol.h f/symbol.def f/bld.h \\\n-  f/bld-op.def f/bit.h f/com.h f/com-rt.def f/lab.h f/storag.h f/intrin.h \\\n-  f/intrin.def f/equiv.h f/global.h f/name.h f/src.h\n-f/info.o: f/info.c f/proj.h $(ASSERT_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h $(TREE_H) f/bad.h f/bad.def f/where.h $(GLIMITS_H) \\\n-  f/top.h f/malloc.h f/lex.h f/type.h\n-f/intrin.o: f/intrin.c f/proj.h $(ASSERT_H) f/intrin.h f/intrin.def f/bld.h \\\n-  f/bld-op.def f/bit.h f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h \\\n-  f/info-b.def f/info-k.def f/info-w.def f/target.h f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/lex.h f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def \\\n-  f/equiv.h f/global.h f/name.h f/src.h\n-f/lab.o: f/lab.c f/proj.h $(ASSERT_H) f/lab.h f/com.h f/com-rt.def $(TREE_H) f/bld.h \\\n-  f/bld-op.def f/bit.h f/malloc.h f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/intrin.h f/intrin.def f/symbol.h f/symbol.def f/equiv.h f/storag.h \\\n-  f/global.h f/name.h\n-f/lex.o: f/lex.c f/proj.h $(ASSERT_H) f/top.h f/malloc.h f/where.h $(GLIMITS_H) \\\n-  f/bad.h f/bad.def f/com.h f/com-rt.def $(TREE_H) f/bld.h f/bld-op.def f/bit.h \\\n-  f/info.h f/info-b.def f/info-k.def f/info-w.def f/target.h f/lex.h f/type.h \\\n-  f/intrin.h f/intrin.def f/lab.h f/symbol.h f/symbol.def f/equiv.h f/storag.h \\\n-  f/global.h f/name.h f/src.h $(CONFIG_H) $(FLAGS_H) $(INPUT_H)\n-f/malloc.o: f/malloc.c f/proj.h $(ASSERT_H) f/malloc.h\n-f/name.o: f/name.c f/proj.h $(ASSERT_H) f/bad.h f/bad.def f/where.h $(GLIMITS_H) \\\n-  f/top.h f/malloc.h f/name.h f/global.h f/lex.h f/symbol.h f/symbol.def f/bld.h \\\n-  f/bld-op.def f/bit.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def \\\n-  f/info-k.def f/info-w.def f/target.h f/type.h f/lab.h f/storag.h f/intrin.h \\\n-  f/intrin.def f/equiv.h f/src.h\n-f/parse.o: f/parse.c f/proj.h $(ASSERT_H) f/top.h f/malloc.h f/where.h $(GLIMITS_H) \\\n-  f/com.h f/com-rt.def $(TREE_H) f/bld.h f/bld-op.def f/bit.h f/info.h \\\n-  f/info-b.def f/info-k.def f/info-w.def f/target.h f/bad.h f/bad.def f/lex.h \\\n-  f/type.h f/intrin.h f/intrin.def f/lab.h f/symbol.h f/symbol.def f/equiv.h \\\n-  f/storag.h f/global.h f/name.h f/version.h $(FLAGS_H)\n-f/proj.o: f/proj.c f/proj.h $(ASSERT_H) $(GLIMITS_H)\n-f/src.o: f/src.c f/proj.h $(ASSERT_H) f/src.h f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/malloc.h\n-f/st.o: f/st.c f/proj.h $(ASSERT_H) f/st.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) \\\n-  f/top.h f/malloc.h f/lex.h f/symbol.h f/symbol.def f/bld.h f/bld-op.def f/bit.h \\\n-  f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def f/info-w.def \\\n-  f/target.h f/type.h f/lab.h f/storag.h f/intrin.h f/intrin.def f/equiv.h \\\n-  f/global.h f/name.h f/sta.h f/stamp-str f/stb.h f/expr.h f/stp.h f/stt.h f/stc.h \\\n-  f/std.h f/stv.h f/stw.h f/ste.h f/sts.h f/stu.h\n-f/sta.o: f/sta.c f/proj.h $(ASSERT_H) f/sta.h f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/malloc.h f/lex.h f/stamp-str f/symbol.h f/symbol.def f/bld.h \\\n-  f/bld-op.def f/bit.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def \\\n-  f/info-k.def f/info-w.def f/target.h f/type.h f/lab.h f/storag.h f/intrin.h \\\n-  f/intrin.def f/equiv.h f/global.h f/name.h f/implic.h f/stb.h f/expr.h f/stp.h \\\n-  f/stt.h f/stc.h f/std.h f/stv.h f/stw.h\n-f/stb.o: f/stb.c f/proj.h $(ASSERT_H) f/stb.h f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/malloc.h f/expr.h f/bld.h f/bld-op.def f/bit.h f/com.h \\\n-  f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def f/info-w.def \\\n-  f/target.h f/lex.h f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def \\\n-  f/equiv.h f/global.h f/name.h f/intrin.h f/intrin.def f/stp.h f/stt.h f/stamp-str \\\n-  f/src.h f/sta.h f/stc.h\n-f/stc.o: f/stc.c f/proj.h $(ASSERT_H) f/stc.h f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/malloc.h f/bld.h f/bld-op.def f/bit.h f/com.h \\\n-  f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def f/info-w.def \\\n-  f/target.h f/lex.h f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def \\\n-  f/equiv.h f/global.h f/name.h f/intrin.h f/intrin.def f/expr.h f/stp.h f/stt.h \\\n-  f/stamp-str f/data.h f/implic.h f/src.h f/sta.h f/std.h f/stv.h f/stw.h\n-f/std.o: f/std.c f/proj.h $(ASSERT_H) f/std.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h \\\n-  f/name.h f/intrin.h f/intrin.def f/stp.h f/stt.h f/stamp-str f/stv.h f/stw.h f/sta.h \\\n-  f/ste.h f/sts.h\n-f/ste.o: f/ste.c $(CONFIG_H) $(RTL_H) f/proj.h $(ASSERT_H) f/ste.h f/bld.h \\\n-  f/bld-op.def f/bit.h f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h \\\n-  f/info-b.def f/info-k.def f/info-w.def f/target.h f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/lex.h f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def \\\n-  f/equiv.h f/global.h f/name.h f/intrin.h f/intrin.def f/stp.h f/stt.h f/stamp-str \\\n-  f/sts.h f/stv.h f/stw.h f/sta.h\n-f/storag.o: f/storag.c f/proj.h $(ASSERT_H) f/storag.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/lab.h f/symbol.h f/symbol.def f/equiv.h f/global.h f/name.h \\\n-  f/intrin.h f/intrin.def f/data.h\n-f/stp.o: f/stp.c f/proj.h $(ASSERT_H) f/stp.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h \\\n-  f/name.h f/intrin.h f/intrin.def f/stt.h\n-f/str.o: f/str.c f/proj.h $(ASSERT_H) f/src.h f/bad.h f/bad.def f/where.h \\\n-  $(GLIMITS_H) f/top.h f/malloc.h f/stamp-str f/lex.h\n-f/sts.o: f/sts.c f/proj.h $(ASSERT_H) f/sts.h f/malloc.h f/com.h f/com-rt.def \\\n-  $(TREE_H) f/bld.h f/bld-op.def f/bit.h f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/intrin.h f/intrin.def f/lab.h f/symbol.h f/symbol.def f/equiv.h \\\n-  f/storag.h f/global.h f/name.h\n-f/stt.o: f/stt.c f/proj.h $(ASSERT_H) f/stt.h f/top.h f/malloc.h f/where.h \\\n-  $(GLIMITS_H) f/bld.h f/bld-op.def f/bit.h f/com.h f/com-rt.def $(TREE_H) f/info.h \\\n-  f/info-b.def f/info-k.def f/info-w.def f/target.h f/bad.h f/bad.def f/lex.h \\\n-  f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h \\\n-  f/name.h f/intrin.h f/intrin.def f/stp.h f/expr.h f/sta.h f/stamp-str\n-f/stu.o: f/stu.c f/proj.h $(ASSERT_H) f/bld.h f/bld-op.def f/bit.h f/malloc.h \\\n-  f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def f/info-w.def \\\n-  f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h f/type.h \\\n-  f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h f/name.h \\\n-  f/intrin.h f/intrin.def f/implic.h f/stu.h f/sta.h f/stamp-str\n-f/stv.o: f/stv.c f/proj.h $(ASSERT_H) f/stv.h f/lab.h f/com.h f/com-rt.def $(TREE_H) \\\n-  f/bld.h f/bld-op.def f/bit.h f/malloc.h f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/intrin.h f/intrin.def f/symbol.h f/symbol.def f/equiv.h f/storag.h \\\n-  f/global.h f/name.h\n-f/stw.o: f/stw.c f/proj.h $(ASSERT_H) f/stw.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/malloc.h f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/target.h f/bad.h f/bad.def f/where.h $(GLIMITS_H) f/top.h f/lex.h \\\n-  f/type.h f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h \\\n-  f/name.h f/intrin.h f/intrin.def f/stv.h f/sta.h f/stamp-str\n-f/symbol.o: f/symbol.c f/proj.h $(ASSERT_H) f/symbol.h f/symbol.def f/bad.h \\\n-  f/bad.def f/where.h $(GLIMITS_H) f/top.h f/malloc.h f/bld.h f/bld-op.def f/bit.h \\\n-  f/com.h f/com-rt.def $(TREE_H) f/info.h f/info-b.def f/info-k.def f/info-w.def \\\n-  f/target.h f/lex.h f/type.h f/lab.h f/storag.h f/intrin.h f/intrin.def \\\n-  f/equiv.h f/global.h f/name.h f/src.h f/st.h\n-f/target.o: f/target.c f/proj.h $(ASSERT_H) $(GLIMITS_H) f/target.h $(TREE_H) f/bad.h \\\n-  f/bad.def f/where.h f/top.h f/malloc.h f/info.h f/info-b.def f/info-k.def \\\n-  f/info-w.def f/type.h f/lex.h\n-f/top.o: f/top.c f/proj.h $(ASSERT_H) f/top.h f/malloc.h f/where.h $(GLIMITS_H) \\\n-  f/bad.h f/bad.def f/bit.h f/bld.h f/bld-op.def f/com.h f/com-rt.def $(TREE_H) \\\n-  f/info.h f/info-b.def f/info-k.def f/info-w.def f/target.h f/lex.h f/type.h \\\n-  f/lab.h f/storag.h f/symbol.h f/symbol.def f/equiv.h f/global.h f/name.h \\\n-  f/intrin.h f/intrin.def f/data.h f/expr.h f/implic.h f/src.h f/st.h $(FLAGS_H)\n-f/type.o: f/type.c f/proj.h $(ASSERT_H) f/type.h f/malloc.h\n-f/where.o: f/where.c f/proj.h $(ASSERT_H) f/where.h $(GLIMITS_H) f/top.h f/malloc.h \\\n-  f/lex.h\n-f/version.o: f/version.c f/proj.h $(ASSERT_H) f/version.h\n+ansify.o: ansify.c $(ASSERT_H)\n+bad.o: bad.c proj.h $(CONFIG_H) $(ASSERT_H) bad.h bad.def where.h $(GLIMITS_H) \\\n+ top.h malloc.h $(FLAGS_H) com.h com-rt.def $(TREE_H) bld.h bld-op.def bit.h \\\n+ info.h info-b.def info-k.def info-w.def target.h lex.h type.h \\\n+ intrin.h intrin.def lab.h symbol.h symbol.def equiv.h storag.h \\\n+ global.h name.h $(RTL_H)\n+bit.o: bit.c proj.h $(CONFIG_H) $(ASSERT_H) $(GLIMITS_H) bit.h malloc.h\n+bld.o: bld.c proj.h $(CONFIG_H) $(ASSERT_H) bld.h bld-op.def bit.h malloc.h \\\n+ com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def info-w.def \\\n+ target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h type.h lab.h \\\n+ storag.h symbol.h symbol.def equiv.h global.h name.h intrin.h \\\n+ intrin.def $(RTL_H)\n+com.o: com.c proj.h $(CONFIG_H) $(ASSERT_H) $(FLAGS_H) $(RTL_H) $(TREE_H) $(OUTPUT_H) \\\n+ $(CONVERT_H) com.h com-rt.def bld.h bld-op.def bit.h malloc.h info.h \\\n+ info-b.def info-k.def info-w.def target.h bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h lex.h type.h intrin.h intrin.def lab.h symbol.h \\\n+ symbol.def equiv.h storag.h global.h name.h expr.h implic.h src.h \\\n+ st.h\n+data.o: data.c proj.h $(CONFIG_H) $(ASSERT_H) data.h bld.h bld-op.def bit.h \\\n+ malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h lab.h storag.h symbol.h symbol.def equiv.h global.h name.h \\\n+ intrin.h intrin.def $(RTL_H) expr.h st.h\n+equiv.o: equiv.c proj.h $(CONFIG_H) $(ASSERT_H) equiv.h bld.h bld-op.def \\\n+ bit.h malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h lab.h storag.h symbol.h symbol.def global.h name.h intrin.h \\\n+ intrin.def $(RTL_H) data.h\n+expr.o: expr.c proj.h $(CONFIG_H) $(ASSERT_H) expr.h bld.h bld-op.def bit.h \\\n+ malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h lab.h storag.h symbol.h symbol.def equiv.h global.h name.h \\\n+ intrin.h intrin.def $(RTL_H) implic.h src.h st.h stamp-str\n+fini.o: fini.c proj.h $(CONFIG_H) $(ASSERT_H) malloc.h\n+global.o: global.c proj.h $(CONFIG_H) $(ASSERT_H) global.h info.h info-b.def \\\n+ info-k.def info-w.def target.h $(TREE_H) bad.h bad.def where.h $(GLIMITS_H) \\\n+ top.h malloc.h lex.h type.h name.h symbol.h symbol.def bld.h \\\n+ bld-op.def bit.h com.h com-rt.def lab.h storag.h $(RTL_H) intrin.h \\\n+ intrin.def equiv.h\n+implic.o: implic.c proj.h $(CONFIG_H) $(ASSERT_H) implic.h info.h info-b.def \\\n+ info-k.def info-w.def target.h $(TREE_H) bad.h bad.def where.h $(GLIMITS_H) \\\n+ top.h malloc.h lex.h type.h symbol.h symbol.def bld.h bld-op.def \\\n+ bit.h com.h com-rt.def lab.h storag.h $(RTL_H) intrin.h intrin.def \\\n+ equiv.h global.h name.h src.h\n+info.o: info.c proj.h $(CONFIG_H) $(ASSERT_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h $(TREE_H) bad.h bad.def where.h $(GLIMITS_H) top.h \\\n+ malloc.h lex.h type.h\n+intdoc.o: intdoc.c $(ASSERT_H) intrin.h intrin.def intdoc.h0 intdoc.h0\n+intrin.o: intrin.c proj.h $(CONFIG_H) $(ASSERT_H) intrin.h intrin.def bld.h \\\n+ bld-op.def bit.h malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def \\\n+ info-k.def info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h \\\n+ lex.h type.h lab.h storag.h symbol.h symbol.def equiv.h global.h \\\n+ name.h $(RTL_H) expr.h src.h\n+lab.o: lab.c proj.h $(CONFIG_H) $(ASSERT_H) lab.h com.h com-rt.def $(TREE_H) \\\n+ bld.h bld-op.def bit.h malloc.h info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h intrin.h intrin.def symbol.h symbol.def equiv.h storag.h \\\n+ global.h name.h $(RTL_H)\n+lex.o: lex.c proj.h $(CONFIG_H) $(ASSERT_H) top.h malloc.h where.h $(GLIMITS_H) \\\n+ bad.h bad.def com.h com-rt.def $(TREE_H) bld.h bld-op.def bit.h info.h \\\n+ info-b.def info-k.def info-w.def target.h lex.h type.h intrin.h \\\n+ intrin.def lab.h symbol.h symbol.def equiv.h storag.h global.h name.h \\\n+ $(RTL_H) src.h $(FLAGS_H) $(INPUT_H) $(OUTPUT_H)\n+malloc.o: malloc.c proj.h $(CONFIG_H) $(ASSERT_H) malloc.h\n+name.o: name.c proj.h $(CONFIG_H) $(ASSERT_H) bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h malloc.h name.h global.h info.h info-b.def info-k.def \\\n+ info-w.def target.h $(TREE_H) lex.h type.h symbol.h symbol.def bld.h \\\n+ bld-op.def bit.h com.h com-rt.def lab.h storag.h $(RTL_H) intrin.h \\\n+ intrin.def equiv.h src.h\n+parse.o: parse.c proj.h $(CONFIG_H) $(ASSERT_H) top.h malloc.h where.h \\\n+ $(GLIMITS_H) com.h com-rt.def $(TREE_H) bld.h bld-op.def bit.h info.h \\\n+ info-b.def info-k.def info-w.def target.h bad.h bad.def lex.h type.h \\\n+ intrin.h intrin.def lab.h symbol.h symbol.def equiv.h storag.h \\\n+ global.h name.h $(RTL_H) version.h $(FLAGS_H)\n+proj.o: proj.c proj.h $(CONFIG_H) $(ASSERT_H) $(GLIMITS_H)\n+src.o: src.c proj.h $(CONFIG_H) $(ASSERT_H) src.h bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h malloc.h\n+st.o: st.c proj.h $(CONFIG_H) $(ASSERT_H) st.h bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h malloc.h lex.h symbol.h symbol.def bld.h bld-op.def \\\n+ bit.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def info-w.def \\\n+ target.h type.h lab.h storag.h $(RTL_H) intrin.h intrin.def equiv.h \\\n+ global.h name.h sta.h stamp-str stb.h expr.h stp.h stt.h stc.h std.h \\\n+ stv.h stw.h ste.h sts.h stu.h\n+sta.o: sta.c proj.h $(CONFIG_H) $(ASSERT_H) sta.h bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h malloc.h lex.h stamp-str symbol.h symbol.def bld.h \\\n+ bld-op.def bit.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h type.h lab.h storag.h $(RTL_H) intrin.h intrin.def \\\n+ equiv.h global.h name.h implic.h stb.h expr.h stp.h stt.h stc.h std.h \\\n+ stv.h stw.h\n+stb.o: stb.c proj.h $(CONFIG_H) $(ASSERT_H) stb.h bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h malloc.h expr.h bld.h bld-op.def bit.h com.h \\\n+ com-rt.def $(TREE_H) info.h info-b.def info-k.def info-w.def target.h \\\n+ lex.h type.h lab.h storag.h symbol.h symbol.def equiv.h global.h \\\n+ name.h intrin.h intrin.def $(RTL_H) stp.h stt.h stamp-str src.h sta.h stc.h\n+stc.o: stc.c proj.h $(CONFIG_H) $(ASSERT_H) stc.h bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h malloc.h bld.h bld-op.def bit.h com.h com-rt.def \\\n+ $(TREE_H) info.h info-b.def info-k.def info-w.def target.h lex.h type.h \\\n+ lab.h storag.h symbol.h symbol.def equiv.h global.h name.h intrin.h \\\n+ intrin.def $(RTL_H) expr.h stp.h stt.h stamp-str data.h implic.h src.h sta.h \\\n+ std.h stv.h stw.h\n+std.o: std.c proj.h $(CONFIG_H) $(ASSERT_H) std.h bld.h bld-op.def bit.h \\\n+ malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h lab.h storag.h symbol.h symbol.def equiv.h global.h name.h \\\n+ intrin.h intrin.def $(RTL_H) stp.h stt.h stamp-str stv.h stw.h sta.h ste.h \\\n+ sts.h\n+ste.o: ste.c proj.h $(CONFIG_H) $(ASSERT_H) $(RTL_H) $(TREE_H) $(OUTPUT_H) ste.h \\\n+ bld.h bld-op.def bit.h malloc.h com.h com-rt.def info.h info-b.def \\\n+ info-k.def info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h \\\n+ lex.h type.h lab.h storag.h symbol.h symbol.def equiv.h global.h \\\n+ name.h intrin.h intrin.def stp.h stt.h stamp-str sts.h stv.h stw.h expr.h \\\n+ sta.h\n+storag.o: storag.c proj.h $(CONFIG_H) $(ASSERT_H) storag.h bld.h bld-op.def \\\n+ bit.h malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h lab.h symbol.h symbol.def equiv.h global.h name.h intrin.h \\\n+ intrin.def $(RTL_H) data.h\n+stp.o: stp.c proj.h $(CONFIG_H) $(ASSERT_H) stp.h bld.h bld-op.def bit.h \\\n+ malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h lab.h storag.h symbol.h symbol.def equiv.h global.h name.h \\\n+ intrin.h intrin.def $(RTL_H) stt.h\n+str.o: str.c proj.h $(CONFIG_H) $(ASSERT_H) src.h bad.h bad.def where.h \\\n+ $(GLIMITS_H) top.h malloc.h stamp-str lex.h\n+sts.o: sts.c proj.h $(CONFIG_H) $(ASSERT_H) sts.h malloc.h com.h com-rt.def \\\n+ $(TREE_H) bld.h bld-op.def bit.h info.h info-b.def info-k.def info-w.def \\\n+ target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h type.h intrin.h \\\n+ intrin.def lab.h symbol.h symbol.def equiv.h storag.h global.h name.h \\\n+ $(RTL_H)\n+stt.o: stt.c proj.h $(CONFIG_H) $(ASSERT_H) stt.h top.h malloc.h where.h \\\n+ $(GLIMITS_H) bld.h bld-op.def bit.h com.h com-rt.def $(TREE_H) info.h \\\n+ info-b.def info-k.def info-w.def target.h bad.h bad.def lex.h type.h \\\n+ lab.h storag.h symbol.h symbol.def equiv.h global.h name.h intrin.h \\\n+ intrin.def $(RTL_H) stp.h expr.h sta.h stamp-str\n+stu.o: stu.c proj.h $(CONFIG_H) $(ASSERT_H) bld.h bld-op.def bit.h malloc.h \\\n+ com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def info-w.def \\\n+ target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h type.h lab.h \\\n+ storag.h symbol.h symbol.def equiv.h global.h name.h intrin.h \\\n+ intrin.def $(RTL_H) implic.h stu.h sta.h stamp-str\n+stv.o: stv.c proj.h $(CONFIG_H) $(ASSERT_H) stv.h lab.h com.h com-rt.def \\\n+ $(TREE_H) bld.h bld-op.def bit.h malloc.h info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h intrin.h intrin.def symbol.h symbol.def equiv.h storag.h \\\n+ global.h name.h $(RTL_H)\n+stw.o: stw.c proj.h $(CONFIG_H) $(ASSERT_H) stw.h bld.h bld-op.def bit.h \\\n+ malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def info-k.def \\\n+ info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h lex.h \\\n+ type.h lab.h storag.h symbol.h symbol.def equiv.h global.h name.h \\\n+ intrin.h intrin.def $(RTL_H) stv.h sta.h stamp-str\n+symbol.o: symbol.c proj.h $(CONFIG_H) $(ASSERT_H) symbol.h symbol.def bld.h \\\n+ bld-op.def bit.h malloc.h com.h com-rt.def $(TREE_H) info.h info-b.def \\\n+ info-k.def info-w.def target.h bad.h bad.def where.h $(GLIMITS_H) top.h \\\n+ lex.h type.h lab.h storag.h $(RTL_H) intrin.h intrin.def equiv.h \\\n+ global.h name.h src.h st.h\n+target.o: target.c proj.h $(CONFIG_H) $(ASSERT_H) $(GLIMITS_H) target.h $(TREE_H) \\\n+ bad.h bad.def where.h top.h malloc.h info.h info-b.def info-k.def \\\n+ info-w.def type.h lex.h\n+top.o: top.c proj.h $(CONFIG_H) $(ASSERT_H) top.h malloc.h where.h $(GLIMITS_H) \\\n+ bad.h bad.def bit.h bld.h bld-op.def com.h com-rt.def $(TREE_H) info.h \\\n+ info-b.def info-k.def info-w.def target.h lex.h type.h lab.h storag.h \\\n+ symbol.h symbol.def equiv.h global.h name.h intrin.h intrin.def $(RTL_H) \\\n+ data.h expr.h implic.h src.h st.h $(FLAGS_H)\n+type.o: type.c proj.h $(CONFIG_H) $(ASSERT_H) type.h malloc.h\n+version.o: version.c\n+where.o: where.c proj.h $(CONFIG_H) $(ASSERT_H) where.h $(GLIMITS_H) top.h \\\n+ malloc.h lex.h\n \n # The rest of this list (Fortran 77 language-specific files) is hand-generated.\n \n-f/stamp-str: f/str-1t.h f/str-1t.j f/str-2t.h f/str-2t.j \\\n- f/str-fo.h f/str-fo.j f/str-io.h f/str-io.j f/str-nq.h  f/str-nq.j \\\n- f/str-op.h f/str-op.j f/str-ot.h f/str-ot.j\n-\ttouch f/stamp-str\n+stamp-str: str-1t.h str-1t.j str-2t.h str-2t.j \\\n+ str-fo.h str-fo.j str-io.h str-io.j str-nq.h  str-nq.j \\\n+ str-op.h str-op.j str-ot.h str-ot.j\n+\ttouch stamp-str\n \n-f/str-1t.h f/str-1t.j: f/fini f/str-1t.fin\n-\t./f/fini `echo $(srcdir)/f/str-1t.fin | sed 's,^\\./,,'` f/str-1t.j f/str-1t.h\n+str-1t.h str-1t.j: fini str-1t.fin\n+\t./fini `echo $(srcdir)/str-1t.fin | sed 's,^\\./,,'` str-1t.j str-1t.h\n \n-f/str-2t.h f/str-2t.j: f/fini f/str-2t.fin\n-\t./f/fini `echo $(srcdir)/f/str-2t.fin | sed 's,^\\./,,'` f/str-2t.j f/str-2t.h\n+str-2t.h str-2t.j: fini str-2t.fin\n+\t./fini `echo $(srcdir)/str-2t.fin | sed 's,^\\./,,'` str-2t.j str-2t.h\n \n-f/str-fo.h f/str-fo.j: f/fini f/str-fo.fin\n-\t./f/fini `echo $(srcdir)/f/str-fo.fin | sed 's,^\\./,,'` f/str-fo.j f/str-fo.h\n+str-fo.h str-fo.j: fini str-fo.fin\n+\t./fini `echo $(srcdir)/str-fo.fin | sed 's,^\\./,,'` str-fo.j str-fo.h\n \n-f/str-io.h f/str-io.j: f/fini f/str-io.fin\n-\t./f/fini `echo $(srcdir)/f/str-io.fin | sed 's,^\\./,,'` f/str-io.j f/str-io.h\n+str-io.h str-io.j: fini str-io.fin\n+\t./fini `echo $(srcdir)/str-io.fin | sed 's,^\\./,,'` str-io.j str-io.h\n \n-f/str-nq.h f/str-nq.j: f/fini f/str-nq.fin\n-\t./f/fini `echo $(srcdir)/f/str-nq.fin | sed 's,^\\./,,'` f/str-nq.j f/str-nq.h\n+str-nq.h str-nq.j: fini str-nq.fin\n+\t./fini `echo $(srcdir)/str-nq.fin | sed 's,^\\./,,'` str-nq.j str-nq.h\n \n-f/str-op.h f/str-op.j: f/fini f/str-op.fin\n-\t./f/fini `echo $(srcdir)/f/str-op.fin | sed 's,^\\./,,'` f/str-op.j f/str-op.h\n+str-op.h str-op.j: fini str-op.fin\n+\t./fini `echo $(srcdir)/str-op.fin | sed 's,^\\./,,'` str-op.j str-op.h\n \n-f/str-ot.h f/str-ot.j: f/fini f/str-ot.fin\n-\t./f/fini `echo $(srcdir)/f/str-ot.fin | sed 's,^\\./,,'` f/str-ot.j f/str-ot.h\n+str-ot.h str-ot.j: fini str-ot.fin\n+\t./fini `echo $(srcdir)/str-ot.fin | sed 's,^\\./,,'` str-ot.j str-ot.h\n \n-f/fini: f/fini.o f/proj-h.o\n-\t$(HOST_CC) $(HOST_CFLAGS) $(HOST_LDFLAGS) -o f/fini f/fini.o f/proj-h.o\n+fini: fini.o proj-h.o\n+\t$(HOST_CC) $(HOST_CFLAGS) $(HOST_LDFLAGS) -o fini fini.o proj-h.o\n \n-f/fini.o:\n+fini.o:\n \t$(HOST_CC) -c $(HOST_CFLAGS) $(HOST_CPPFLAGS) $(INCLUDES) \\\n-\t      `echo $(srcdir)/f/fini.c | sed 's,^\\./,,'` -o $@\n+\t      `echo $(srcdir)/fini.c | sed 's,^\\./,,'` -o $@\n \n-f/proj-h.o: f/proj.o\n+proj-h.o: proj.o\n \t$(HOST_CC) -c $(HOST_CFLAGS) $(HOST_CPPFLAGS) $(INCLUDES) \\\n-\t      `echo $(srcdir)/f/proj.c | sed 's,^\\./,,'` -o $@\n+\t      `echo $(srcdir)/proj.c | sed 's,^\\./,,'` -o $@\n \n # Other than str-*.j, the *.j files are dummy #include files\n # that normally just #include the corresponding back-end *.h\n@@ -532,21 +484,31 @@ f/proj-h.o: f/proj.o\n # as will be the case with proj.h in a clean directory.\n MG=-MG\n deps-kinda:\n-\t$(HOST_CC) -DMAKING_DEPENDENCIES -MM $(MG) -I -If f/*.c | \\\n-\t  sed -e 's: \\([.]/\\)*f/assert[.]j: $$(ASSERT_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/config[.]j: $$(CONFIG_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/convert[.]j: $$(CONVERT_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/flags[.]j: $$(FLAGS_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/glimits[.]j: $$(GLIMITS_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/hconfig[.]j: $$(HCONFIG_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/input[.]j: $$(INPUT_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/rtl[.]j: $$(RTL_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/tconfig[.]j: $$(TCONFIG_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/tm[.]j: $$(TM_H):g' \\\n-\t      -e 's: \\([.]/\\)*f/tree[.]j: $$(TREE_H):g' \\\n-\t      -e 's: proj[.]h: f/proj.h:g' \\\n-\t      -e 's: \\([.]/\\)*f/str[.]h: f/stamp-str:g' \\\n-\t      -e 's%^\\(.*\\)[ ]*: %f/\\1: %g'\n+\t$(HOST_CC) -DMAKING_DEPENDENCIES -MM $(MG) *.c | \\\n+\t  sed -e 's: \\([.]/\\)*assert[.]j: $$(ASSERT_H):g' \\\n+\t      -e 's: \\([.]/\\)*config[.]j: $$(CONFIG_H):g' \\\n+\t      -e 's: \\([.]/\\)*convert[.]j: $$(CONVERT_H):g' \\\n+\t      -e 's: \\([.]/\\)*flags[.]j: $$(FLAGS_H):g' \\\n+\t      -e 's: \\([.]/\\)*glimits[.]j: $$(GLIMITS_H):g' \\\n+\t      -e 's: \\([.]/\\)*hconfig[.]j: $$(HCONFIG_H):g' \\\n+\t      -e 's: \\([.]/\\)*input[.]j: $$(INPUT_H):g' \\\n+\t      -e 's: \\([.]/\\)*output[.]j: $$(OUTPUT_H):g' \\\n+\t      -e 's: \\([.]/\\)*rtl[.]j: $$(RTL_H):g' \\\n+\t      -e 's: \\([.]/\\)*tconfig[.]j: $$(TCONFIG_H):g' \\\n+\t      -e 's: \\([.]/\\)*tm[.]j: $$(TM_H):g' \\\n+\t      -e 's: \\([.]/\\)*tree[.]j: $$(TREE_H):g' \\\n+\t      -e 's: \\([.]/\\)*str[.]h: stamp-str:g' \\\n+\t      -e 's:.*g77spec.*::g' \\\n+\t      -e 's%^\\(.*\\)[ ]*: %\\1: %g'\n+\n+# This rule is just a handy way to build the g77 derived files without\n+# having the gcc source tree around.\n+g77-only: force\n+\tif [ -f g77.texi ] ; then \\\n+\t  (cd ..; $(MAKE) srcdir=. HOST_CC=cc HOST_CFLAGS=-g -f f/Make-lang.in f77.rebuilt); \\\n+\telse \\\n+\t  $(MAKE) srcdir=. HOST_CC=cc HOST_CFLAGS=-g -f f/Make-lang.in f77.rebuilt; \\\n+\tfi\n \n #\f\n # These exist for maintenance purposes.\n@@ -556,9 +518,8 @@ TAGS: force\n \tcd $(srcdir)/f ;\t\t\t\\\n \tetags *.c *.h ;\t\t\t\t\\\n \techo 'l' | tr 'l' '\\f' >> TAGS ;\t\\\n-\techo 'parse.y,0' >> TAGS ; \t\t\\\n \tetags -a ../*.h ../*.c;\n \n-.PHONY: none all all.indirect f77.rebuilt compiler native deps-kinda TAGS g77-only\n+.PHONY: none all all.indirect f77.rebuilt compiler native deps-kinda g77-only TAGS force\n \n force:"}, {"sha": "ec250eb7bd94e19d088e23e1765fb8ac670e3517", "filename": "gcc/f/bad.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fbad.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fbad.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fbad.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -39,6 +39,7 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #include \"proj.h\"\n #include <ctype.h>\n #include \"bad.h\"\n+#include \"flags.j\"\n #include \"com.h\"\n #include \"where.h\"\n "}, {"sha": "2f7111fa1d4f7bbfde8e653039c617be3adc50df", "filename": "gcc/f/com.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fcom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fcom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fcom.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -85,11 +85,13 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \n /* Include files. */\n \n+#include \"proj.h\"\n #if FFECOM_targetCURRENT == FFECOM_targetGCC\n #include \"config.j\"\n #include \"flags.j\"\n #include \"rtl.j\"\n #include \"tree.j\"\n+#include \"output.j\"  /* Must follow tree.j so TREE_CODE is defined! */\n #include \"convert.j\"\n #endif\t/* FFECOM_targetCURRENT == FFECOM_targetGCC */\n \n@@ -154,9 +156,6 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n char *getenv ();\n #endif\n \n-char *index ();\n-char *rindex ();\n-\n #if HAVE_UNISTD_H\n # include <unistd.h>\n #endif\n@@ -195,7 +194,6 @@ typedef struct { unsigned :16, :16, :16; } vms_ino_t;\n \n /* END stuff from gcc/cccp.c.  */\n \n-#include \"proj.h\"\n #define FFECOM_DETERMINE_TYPES 1 /* for com.h */\n #include \"com.h\"\n #include \"bad.h\""}, {"sha": "61f0e8872ecd20bf68413b37bb5e850c9ac9e559", "filename": "gcc/f/com.h", "status": "modified", "additions": 2, "deletions": 44, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fcom.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fcom.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fcom.h?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -338,53 +338,11 @@ tree ffecom_temp_label (void);\n tree ffecom_truth_value (tree expr);\n tree ffecom_truth_value_invert (tree expr);\n tree ffecom_which_entrypoint_decl (void);\n-#endif\t/* FFECOM_targetCURRENT == FFECOM_targetGCC */\n \n-/* ~~~Eliminate these when possible, since the back end should be\n-   declaring them in some .h file.  */\n+/* These need to be in the front end with exactly these interfaces,\n+   as they're called by the back end.  */\n \n-#if FFECOM_targetCURRENT == FFECOM_targetGCC\n-extern int flag_pedantic_errors;\n-void emit_nop (void);\n-void announce_function (tree decl);\n-extern FILE *asm_out_file;\n-void assemble_string (char *, int);\n-void assemble_variable (tree decl, int top_level, int at_end,\n-\t\t\tint dont_output_data);\n-void assemble_zeros (int size);\n-int count_error (int warningp);\n-void error (char *s, ...);\n-void expand_decl (tree decl);\n-void expand_computed_goto (tree exp);\n-void expand_function_end (char *filename, int line, int end_bindings);\n-void expand_function_start (tree subr, int parms_have_cleanups);\n-void expand_main_function (void);\n-void fatal (char *s, ...);\n-void init_function_start (tree subr, char *filename, int line);\n-void make_function_rtl (tree decl);\n-void make_decl_rtl (tree decl, char *asmspec, int top_level);\n-void make_var_volatile (tree var);\n int mark_addressable (tree expr);\n-void output_inline_function (tree fndecl);\n-void pedwarn (char *s, ...);\n-void pop_function_context (void);\n-void pop_momentary_nofree (void);\n-void preserve_initializer (void);\n-void print_node (FILE *file, char *prefix, tree node, int indent);\n-void push_function_context (void);\n-void push_obstacks (struct obstack *current, struct obstack *saveable);\n-void put_var_into_stack (tree decl);\n-void remember_end_note (tree block);\n-void report_error_function (char *file);\n-void rest_of_compilation (tree decl);\n-void rest_of_decl_compilation (tree decl, char *asmspec, int top_level,\n-\t\t\t       int at_end);\n-void resume_temporary_allocation (void);\n-void set_identifier_size (int size);\n-void temporary_allocation (void);\n-tree truthvalue_conversion (tree expr);\n-void warning_with_decl (tree decl, char *s, ...);\n-void warning (char *s, ...);\n #endif\t/* FFECOM_targetCURRENT == FFECOM_targetGCC */\n \n /* Define macros. */"}, {"sha": "504bc2031693ebd65738dc69de2dc9bb69fa3a02", "filename": "gcc/f/config-lang.in", "status": "modified", "additions": 2, "deletions": 32, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fconfig-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fconfig-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fconfig-lang.in?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -26,42 +26,12 @@\n # stagestuff\t- files to add to $(STAGESTUFF)\n # diff_excludes\t- files to ignore when building diffs between two versions.\n \n-#if grep DECL_STATIC_CONSTRUCTOR $srcdir/tree.h >/dev/null; then\n-#   if grep flag_move_all_movables $srcdir/toplev.c >/dev/null; then true\n-#   else\n-#      echo \"You haven't applied the patches to the GCC 2.7.x distribution in\"\n-#      echo \"$srcdir as described in g77/README.g77 and gcc/f/gbe/README.\"\n-#      echo \"\"\n-#      exit 1\n-#   fi\n-#else\n-#   if grep put_pending_sizes $srcdir/stor-layout.c >/dev/null; then true\n-#   else\n-#      echo \"You haven't applied the patches to the GCC 2.6.x distribution in\"\n-#      echo \"$srcdir as described in g77/README.g77 and gcc/f/gbe/README.\"\n-#      echo \"\"\n-#      exit 1\n-#   fi\n-#fi\n-\n language=\"f77\"\n \n compilers=\"f771\\$(exeext)\"\n \n stagestuff=\"g77\\$(exeext) g77-cross\\$(exeext) f771\\$(exeext)\"\n \n-diff_excludes=\"-x \\\"f/g77.info*\\\"\"\n-\n-test -d f || mkdir f\n-for stageN in stage1 stage2 stage3 stage4\n-do\n-\ttest -d $stageN || mkdir $stageN\n-\ttest -d $stageN/f || mkdir $stageN/f\n-done\n+diff_excludes=\"-x f/BUGS -x f/NEWS -x f/INSTALL -x f/intdoc.texi\"\n \n-# Make links into top-level stageN from target trees.\n-for stageN in stage1 stage2 stage3 stage4 include\n-do\n-\t$remove -f f/$stageN \n-\t(cd f; $symbolic_link ../$stageN . 2>/dev/null)\n-done\n+outputs=f/Makefile"}, {"sha": "3a8504dd6108213a23bc5dcab06e263ff054621b", "filename": "gcc/f/g77.1", "status": "modified", "additions": 9, "deletions": 31, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77.1", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77.1", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fg77.1?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -1,29 +1,29 @@\n .\\\" Copyright (c) 1995-1997 Free Software Foundation              -*-Text-*-\n .\\\" See section COPYING for conditions for redistribution\n .\\\" FIXME: no info here on predefines.  Should there be?  extra for F77...\n-.TH G77 1 \"1998-03-08\" \"GNU Tools\" \"GNU Tools\"\n+.TH G77 1 \"1998-04-17\" \"GNU Tools\" \"GNU Tools\"\n .de BP\n .sp\n .ti \\-.2i\n \\(**\n ..\n .SH NAME\n-g77 \\- GNU project Fortran Compiler (v0.5.22)\n+g77 \\- GNU project Fortran Compiler (v0.5.23)\n .SH SYNOPSIS\n .RB g77 \" [\" \\c\n .IR option \" | \" \"filename \" ].\\|.\\|.\n .SH WARNING\n The information in this man page is an extract from the full\n-documentation of the GNU Fortran compiler (version 0.5.22),\n+documentation of the GNU Fortran compiler (version 0.5.23),\n and is limited to the meaning of some of the options.\n .PP\n This man page is not up to date, since no volunteers want to\n maintain it.  If you find a discrepancy between the man page and the\n software, please check the Info file, which is the authoritative\n documentation.\n .\\\" .PP\n-.\\\" The version of GNU Fortran documented by the Info file is 0.5.22,\n-.\\\" which includes substantial improvements and changes since 0.5.22,\n+.\\\" The version of GNU Fortran documented by the Info file is 0.5.23,\n+.\\\" which includes substantial improvements and changes since 0.5.23,\n .\\\" the version documented in this man page.\n .PP\n If we find that the things in this man page that are out of date cause\n@@ -37,7 +37,7 @@ For complete and current documentation, refer to the Info file `\\|\\c\n .B g77\\c\n \\&\\|' or the manual\n .I\n-Using and Porting GNU Fortran (for version 0.5.22)\\c\n+Using and Porting GNU Fortran (for version 0.5.23)\\c\n \\&.  Both are made from the Texinfo source file\n .BR g77.texi .\n .PP\n@@ -152,19 +152,6 @@ Define macro \\c\n .I defn\\c\n \\&.\n .TP\n-.BI \\-\\-driver= command\n-Specifies that \n-.IR command ,\n-rather than \n-.RB ` gcc ',\n-is to be invoked by \n-.RB ` g77 '\n-to do its job.  Example: Within the gcc build directory after building\n-GNU Fortran (but without having to install it),\n-.nf\n-  ./g77 \\-\\-driver=./xgcc -B./ foo.f\n-.fi\n-.TP\n .B \\-E\n Stop after the preprocessing stage; do not run the compiler proper.  The\n output is preprocessed source code, which is sent to the\n@@ -247,16 +234,7 @@ Print (on standard error output) the commands executed to run the\n stages of compilation.  Also print the version number of the compiler\n driver program and of the preprocessor and the compiler proper.  The\n version numbers of g77 itself and the GCC distribution on which it is\n-based are distinct.  Use \n-.RB ` \\-\\-driver=true '\n-to disable actual invocation of \n-.RB ` gcc '\n-(since\n-.RB ` true '\n-is the name of a UNIX command that simply returns success status).\n-The command\n-.RB ` \"g77 -v\" '\n-is the appropriate one to determine the g77 and GCC version numbers.\n+based are distinct.\n .TP\n .B \\-Wall\n Issue warnings for conditions which pertain to usage that we recommend\n@@ -333,7 +311,7 @@ entries in\n \\&.\n .br\n .I\n-Using and Porting GNU Fortran (for version 0.5.22)\\c\n+Using and Porting GNU Fortran (for version 0.5.23)\\c\n , James Craig Burley;\n .I\n Using and Porting GNU CC (for version 2.0)\\c\n@@ -357,7 +335,7 @@ For instructions on how to report bugs, type `\\|\\c\n \\&\\|'.\n \n .SH COPYING\n-Copyright (c) 1991-1997 Free Software Foundation, Inc.\n+Copyright (c) 1991-1998 Free Software Foundation, Inc.\n .PP\n Permission is granted to make and distribute verbatim copies of\n this manual provided the copyright notice and this permission notice"}, {"sha": "31756dbe7c3bca377615ac2949cb94a0359d8adf", "filename": "gcc/f/g77.texi", "status": "modified", "additions": 241, "deletions": 132, "changes": 373, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fg77.texi?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -14,7 +14,7 @@\n @c %**start of header \n @setfilename g77.info\n \n-@set last-up-date 1998-05-22\n+@set last-up-date 1998-05-29\n @set version-g77 0.5.23\n \n @c @setfilename useg77.info\n@@ -1044,16 +1044,25 @@ used to build the operating system kernel.)\n The @code{g77} command itself, which also might be installed as the\n system's @code{f77} command.\n \n+@cindex libg2c library\n @cindex libf2c library\n @cindex libraries, libf2c\n+@cindex libraries, libg2c\n @cindex run-time library\n @item\n-The @code{libf2c} run-time library.\n+The @code{libg2c} run-time library.\n This library contains the machine code needed to support\n capabilities of the Fortran language that are not directly\n provided by the machine code generated by the @code{g77}\n compilation phase.\n \n+@code{libg2c} is just the unique name @code{g77} gives\n+to its version of @code{libf2c} to distinguish it from\n+any copy of @code{libf2c} installed from @code{f2c}\n+(or versions of @code{g77} that built @code{libf2c} under\n+that same name)\n+on the system.\n+\n The maintainer of @code{libf2c} currently is\n @email{dmg@@bell-labs.com}.\n \n@@ -1126,7 +1135,7 @@ the @code{gcc} command.\n Fortran users will normally use @code{g77} instead of @code{gcc},\n because @code{g77}\n knows how to specify the libraries needed to link with Fortran programs\n-(@code{libf2c} and @code{lm}).\n+(@code{libg2c} and @code{lm}).\n @code{g77} can still compile and link programs and\n source files written in other languages, just like @code{gcc}.\n \n@@ -1139,7 +1148,7 @@ produces much more output than @samp{gcc -v} currently does.\n (If it produces an error message near the end of the output---diagnostics\n from the linker, usually @code{ld}---you might\n have an out-of-date @code{libf2c} that improperly handles\n-complex arithmetic.)@ \n+complex arithmetic.)\n In the output of this command, the line beginning @samp{GNU Fortran Front\n End} identifies the version number of GNU Fortran; immediately\n preceding that line is a line identifying the version of @code{gcc}\n@@ -1162,14 +1171,15 @@ functions this way.\n Instead, operations like trigonometric\n functions are compiled by the @code{f771} compiler\n (invoked by @code{g77} when compiling Fortran code) into machine\n-code that, when run, calls on functions in @code{libf2c}, so\n-@code{libf2c} must be linked with almost every useful program\n+code that, when run, calls on functions in @code{libg2c}, so\n+@code{libg2c} must be linked with almost every useful program\n having any component compiled by GNU Fortran.\n (As mentioned above, the @code{g77} command takes\n care of all this for you.)\n \n The @code{f771} program represents most of what is unique to GNU Fortran.\n-While much of the @code{libf2c} component is really part of @code{f2c},\n+While much of the @code{libg2c} component comes from\n+the @code{libf2c} component of @code{f2c},\n a free Fortran-to-C converter distributed by Bellcore (AT&T),\n plus @code{libU77}, provided by Dave Love,\n and the @code{g77} command is just a small front-end to @code{gcc},\n@@ -1251,15 +1261,9 @@ appropriately before submitting it to the @code{gcc} command.\n @cindex -v option\n @cindex g77 options, -v\n @cindex options, -v\n-@cindex -@w{}-driver option\n-@cindex g77 options, -@w{}-driver\n-@cindex options, -@w{}-driver\n Use the @samp{-v} option with @code{g77}\n to see what is going on---the first line of output is the invocation\n of the @code{gcc} command.\n-Use @samp{--driver=true} to disable actual invocation\n-of @code{gcc} (this works because @samp{true} is the name of a\n-UNIX command that simply returns success status).\n \n @node Invoking G77\n @chapter GNU Fortran Command Options\n@@ -1274,25 +1278,16 @@ for information\n on the non-Fortran-specific aspects of the @code{gcc} command (and,\n therefore, the @code{g77} command).\n \n-The @code{g77} command supports one option not supported by\n-the @code{gcc} command:\n-\n-@table @code\n-@cindex -@w{}-driver option\n-@cindex g77 options, -@w{}-driver\n-@cindex options, -@w{}-driver\n-@item --driver=@var{command}\n-Specifies that @var{command}, rather than @code{gcc}, is to\n-be invoked by @code{g77} to do its job.\n-For example, within the @code{gcc} build directory after\n-building GNU Fortran (but without having to install it),\n-@kbd{./g77 --driver=./xgcc foo.f -B./}.\n-@end table\n-\n @cindex options, negative forms\n @cindex negative forms of options\n-All other options are supported both by @code{g77} and by @code{gcc} as\n-modified (and reinstalled) by the @code{g77} distribution.\n+All @code{gcc} and @code{g77} options\n+are accepted both by @code{g77} and by @code{gcc}\n+(as well as any other drivers built at the same time,\n+such as @code{g++}),\n+since adding @code{g77} to the @code{gcc} distribution\n+enables acceptance of @code{g77}-specific options\n+by all of the relevant drivers.\n+\n In some cases, options have positive and negative forms;\n the negative form of @samp{-ffoo} would be @samp{-fno-foo}.\n This manual documents only one of these two forms, whichever\n@@ -1329,7 +1324,7 @@ by type.  Explanations are in the following sections.\n @item Overall Options\n @xref{Overall Options,,Options Controlling the Kind of Output}.\n @smallexample\n---driver  -fversion  -fset-g77-defaults  -fno-silent\n+-fversion  -fset-g77-defaults  -fno-silent\n @end smallexample\n \n @item Shorthand Options\n@@ -1555,12 +1550,6 @@ The following options that affect overall processing are recognized\n by the @code{g77} and @code{gcc} commands in a GNU Fortran installation:\n \n @table @code\n-@item --driver=@var{command}\n-This works when invoking only the @code{g77} command, not\n-when invoking the @code{gcc} command.\n-@xref{Invoking G77,,GNU Fortran Command Options}, for\n-information on this option.\n-\n @cindex -fversion option\n @cindex options, -fversion\n @cindex printing version information\n@@ -1912,7 +1901,7 @@ ANSI FORTRAN 77 and more recent versions of the Fortran standard\n specify that the body of an imperative @code{DO} loop is not executed\n if the number of iterations calculated from the parameters of the\n loop is less than 1.\n-(For example, @samp{DO 10 I = 1, 0}.)@ \n+(For example, @samp{DO 10 I = 1, 0}.)\n Such a loop is called a @dfn{zero-trip loop}.\n \n Prior to ANSI FORTRAN 77, many compilers implemented @code{DO} loops\n@@ -2599,6 +2588,9 @@ gcc,Using and Porting GNU CC}, for more information on debugging options.\n Most Fortran users will want to use no optimization when\n developing and testing programs, and use @samp{-O} or @samp{-O2} when\n compiling programs for late-cycle testing and for production use.\n+However, note that certain diagnostics---such as for uninitialized\n+variables---depend on the flow analysis done by @samp{-O}, i.e.@: you\n+must use @samp{-O} or @samp{-O2} to get such diagnostics.\n \n The following flags have particular applicability when\n compiling Fortran programs:\n@@ -2607,7 +2599,7 @@ compiling Fortran programs:\n @cindex -malign-double option\n @cindex options, -malign-double\n @item -malign-double\n-(Intel 386 architecture only.)\n+(Intel x86 architecture only.)\n \n Noticeably improves performance of @code{g77} programs making\n heavy use of @code{REAL(KIND=2)} (@code{DOUBLE PRECISION}) data\n@@ -2627,9 +2619,11 @@ and data sets.\n this option does not apply, generally speaking, to Fortran\n code compiled by @code{g77}.\n \n-@emph{Also note:} @code{g77} fixes a @code{gcc} backend bug to allow\n-@samp{-malign-double} to work generally, not just with\n+@emph{Also note:} @samp{-malign-double} applies only to\n statically-allocated data.\n+Double-precision data on the stack can still\n+cause problems due to misalignment.\n+@xref{Aligned Data}.\n \n @emph{Also also note:} The negative form of @samp{-malign-double}\n is @samp{-mno-align-double}, not @samp{-benign-double}.\n@@ -2657,6 +2651,7 @@ Might improve optimization of loops.\n @item -fno-inline\n @cindex in-line compilation\n @cindex compilation, in-line\n+@c DL: Only relevant for -O3?\n Don't compile statement functions inline.\n Might reduce the size of a program unit---which might be at\n expense of some speed (though it should compile faster).\n@@ -2675,13 +2670,15 @@ on IEEE behavior for floating-point to run faster, or die trying.\n @item -fstrength-reduce\n @cindex loops, speeding up\n @cindex speeding up loops\n+@c DL: normally defaulted?\n Might make some loops run faster.\n \n @cindex -frerun-cse-after-loop option\n @cindex options, -frerun-cse-after-loop\n @item -frerun-cse-after-loop\n @cindex -fexpensive-optimizations option\n @cindex options, -fexpensive-optimizations\n+@c DL: This is -O2?\n @item -fexpensive-optimizations\n @cindex -fdelayed-branch option\n @cindex options, -fdelayed-branch\n@@ -2707,7 +2704,8 @@ Definitely improves performance on some code.\n @cindex -funroll-all-loops option\n @cindex options, -funroll-all-loops\n @item -funroll-all-loops\n-Definitely improves performance on some code.\n+@c DL: Is this really true?  What _are_ the semantics of this option?\n+Improves performance on some code.\n \n @item -fno-move-all-movables\n @cindex -fno-move-all-movables option\n@@ -2885,9 +2883,9 @@ return the GNU C type @code{complex} (or its @code{struct}\n equivalent).\n \n This does not affect the generation of code that interfaces with the\n-@code{libf2c} library.\n+@code{libg2c} library.\n \n-However, because the @code{libf2c} library uses @code{f2c}\n+However, because the @code{libg2c} library uses @code{f2c}\n calling conventions, @code{g77} rejects attempts to pass\n intrinsics implemented by routines in this library as actual\n arguments when @samp{-fno-f2c} is used, to avoid bugs when\n@@ -2912,7 +2910,8 @@ source file used in a program, it must be used when compiling\n @cindex -ff2c-library option\n @cindex options, -ff2c-library\n @item -ff2c-library\n-Specify that use of @code{libf2c} is required.\n+Specify that use of @code{libg2c} (or the original @code{libf2c})\n+is required.\n This is the default for the current version of @code{g77}.\n \n Currently it is not\n@@ -3238,7 +3237,7 @@ Some of these do @emph{not} work when compiling programs written in Fortran:\n @cindex options, -freg-struct-return\n @item -freg-struct-return\n You should not use these except strictly the same way as you\n-used them to build the version of @code{libf2c} with which\n+used them to build the version of @code{libg2c} with which\n you will be linking all code compiled by @code{g77} with the\n same option.\n \n@@ -3257,7 +3256,7 @@ or there will be Trouble.\n @cindex -fpack-struct option\n @cindex options, -fpack-struct\n @item -fpack-struct\n-This probably will break any calls to the @code{libf2c} library,\n+This probably will break any calls to the @code{libg2c} library,\n at the very least, even if it is built with the same option.\n @end table\n \n@@ -3293,7 +3292,7 @@ users use @code{g77}.\n such changes to @code{g77}.\n \n To find out about existing bugs and ongoing plans for GNU\n-Fortran, retrieve @url{ftp://alpha.gnu.org/g77.plan}\n+Fortran, retrieve @uref{ftp://alpha.gnu.org/g77.plan}\n or, if you cannot do that, email\n @email{fortran@@gnu.org} asking for a recent copy of the\n GNU Fortran @file{.plan} file.\n@@ -3326,7 +3325,7 @@ and the corresponding alias-analysis code.\n \n (Version 1.0.1 of @code{egcs} has the alias-analysis\n code, but not the @code{__restrict__} keyword.\n-@code{g77} users benefit from the alias-analysis\n+@code{egcs} @code{g77} users benefit from the alias-analysis\n code despite the lack of the @code{__restrict__} keyword,\n which is a C-language construct.)\n \n@@ -3344,6 +3343,11 @@ because the defaults are optimized for @code{g77} users.)\n @item\n Support for the @samp{-W} option warning about\n integer division by zero.\n+\n+@item\n+The Intel x86-specific option @samp{-malign-double}\n+applying to stack-allocated data\n+as well as statically-allocate data.\n @end itemize\n \n @item\n@@ -3363,6 +3367,27 @@ The @code{g77} command now expects the run-time library\n to be named @code{libg2c.a} instead of @code{libf2c.a},\n to ensure that a version other than the one built and\n installed as part of the same @code{g77} version is picked up.\n+\n+@item\n+@code{g77}'s version of @code{libf2c} separates out\n+the setting of global state\n+(such as command-line arguments and signal handling)\n+from @file{main.o} into distinct, new library\n+archive members.\n+\n+This should make it easier to write portable applications\n+that have their own (non-Fortran) @code{main()} routine\n+properly set up the @code{libf2c} environment, even\n+when @code{libf2c} (now @code{libg2c}) is a shared library.\n+\n+@item\n+Some diagnostics have been changed from warnings to errors,\n+to prevent inadvertent use of the resulting, probably buggy,\n+programs.\n+These mostly include diagnostics about use of unsupported features\n+in the @code{OPEN}, @code{INQUIRE}, @code{READ}, and\n+@code{WRITE} statements,\n+and about truncations of various sorts of constants.\n @end itemize\n \n @heading In 0.5.22:\n@@ -3579,7 +3604,7 @@ This type is wide enough\n (holds the same number of bits)\n as the character-pointer type on the machine.\n \n-On most systems, this won't make a noticable difference,\n+On most systems, this won't make a noticeable difference,\n whereas on Alphas and other systems with 64-bit pointers,\n the @code{INTEGER(KIND=0)} type is equivalent to @code{INTEGER(KIND=2)}\n (often referred to as @code{INTEGER*8})\n@@ -3856,8 +3881,10 @@ way through the compilation process instead of being lost.\n GNU Fortran supports a variety of extensions to, and dialects\n of, the Fortran language.\n Its primary base is the ANSI FORTRAN 77 standard, currently available on\n-the network at @url{http://kumo.swcp.com/fortran/F77_std/f77_std.html}\n-or in @url{ftp://ftp.ast.cam.ac.uk/pub/michael/}.\n+the network at\n+@uref{http://www.fortran.com/fortran/F77_std/rjcnf0001.html}\n+or as monolithic text at\n+@uref{http://www.fortran.com/fortran/F77_std/f77_std.html}.\n It offers some extensions that are popular among users\n of UNIX @code{f77} and @code{f2c} compilers, some that\n are popular among users of other compilers (such as Digital\n@@ -3868,7 +3895,7 @@ by GNU Fortran.\n @cindex textbooks\n (If you need a text on Fortran,\n a few freely available electronic references have pointers from\n-@code{http://www.fortran.com/fortran/Books/}.)\n+@uref{http://www.fortran.com/fortran/Books/}.)\n \n Part of what defines a particular implementation of a Fortran\n system, such as @code{g77}, is the particular characteristics\n@@ -5780,7 +5807,7 @@ While that is a likely implementation choice, other\n implementation choices are available that preserve the\n pass-by-reference semantics without passing a pointer to\n the argument, @var{arg}.\n-(For example, a copy-in/copy-out implementation.)@ \n+(For example, a copy-in/copy-out implementation.)\n And, future versions of @code{g77} might change the\n way descriptors are implemented, such as passing a\n single argument pointing to a record containing the\n@@ -6566,7 +6593,7 @@ consistent with these source switches---in the sense that input will be\n expected to meet the same requirements as source code in terms\n of matching symbol names and keywords (for the exponent letters).\n \n-Currently, however, @code{NAMELIST} is supported by @code{libf2c},\n+Currently, however, @code{NAMELIST} is supported by @code{libg2c},\n which uppercases @code{NAMELIST} input and symbol names for matching.\n This means not only that @code{NAMELIST} output currently shows symbol\n (and keyword) names in uppercase even if lower-case source\n@@ -7519,7 +7546,7 @@ architectures.\n These rules are based on the configuration that is in force for the\n version of @code{gcc} built in the same release as @code{g77} (and\n which was therefore used to build both the @code{g77} compiler\n-components and the @code{libf2c} run-time library):\n+components and the @code{libg2c} run-time library):\n \n @table @code\n @cindex REAL(KIND=1) type\n@@ -7592,7 +7619,7 @@ Two @code{REAL(KIND=2)} scalars.\n \n @cindex *@var{n} notation\n @item @var{numeric-type}*@var{n}\n-(Where @var{numeric-type} is any type other than @code{CHARACTER}.)@ \n+(Where @var{numeric-type} is any type other than @code{CHARACTER}.)\n Same as whatever @code{gcc} type occupies @var{n} times the storage\n space of a @code{gcc} @code{char} item.\n \n@@ -7862,11 +7889,15 @@ argument will become two arguments on the C side: a @code{char *}\n and an @code{int} length.\n \n Much of this compatibility results from the fact that\n-@code{g77} uses the same run-time library, @code{libf2c}, used by\n-@code{f2c}.\n+@code{g77} uses the same run-time library,\n+@code{libf2c}, used by @code{f2c},\n+though @code{g77} gives its version the name @code{libg2c}\n+so as to avoid conflicts when linking,\n+installing them in the same directories,\n+and so on.\n \n Other compilers might or might not generate code that\n-is object-compatible with @code{libf2c} and current @code{g77},\n+is object-compatible with @code{libg2c} and current @code{g77},\n and some might offer such compatibility only when explicitly\n selected via a command-line option to the compiler.\n \n@@ -7937,13 +7968,18 @@ This should cause future versions of @code{g77} either to produce\n compatible code (at the expense of the availability of some features and\n performance), or at the very least, to produce diagnostics.\n \n+(The library @code{g77} produces will no longer be named @file{libg2c}\n+when it is no longer generally compatible with @file{libf2c}.\n+It will likely be referred to, and, if installed as a distinct\n+library, named @code{libg77}, or some other as-yet-unused name.)\n+\n @node Compilers Other Than f2c\n @section Compilers Other Than @code{f2c}\n \n On systems with Fortran compilers other than @code{f2c} and @code{g77},\n code compiled by @code{g77} is not expected to work\n well with code compiled by the native compiler.\n-(This is true for @code{f2c}-compiled objects as well.)@ \n+(This is true for @code{f2c}-compiled objects as well.)\n Libraries compiled with the native compiler probably will have\n to be recompiled with @code{g77} to be used with @code{g77}-compiled code.\n \n@@ -8000,7 +8036,7 @@ of work!}\n @cindex C++, linking with\n @cindex linking with C\n The following discussion assumes that you are running @code{g77} in @code{f2c}\n-compatibility mode, i.e.@ not using @samp{-fno-f2c}.\n+compatibility mode, i.e.@: not using @samp{-fno-f2c}.\n It provides some\n advice about quick and simple techniques for linking Fortran and C (or\n C++), the most common requirement.\n@@ -8032,7 +8068,7 @@ options @code{g77} passes by running @samp{g77 -v}.\n @cindex cfortran.h\n @cindex Netlib\n Even if you don't actually use it as a compiler, @samp{f2c} from\n-@url{ftp://ftp.netlib.org/f2c/src}, can be a useful tool when you're\n+@uref{ftp://ftp.netlib.org/f2c/src}, can be a useful tool when you're\n interfacing (linking) Fortran and C@.\n @xref{f2c Skeletons and Prototypes,,Generating Skeletons and Prototypes with @code{f2c}}.\n \n@@ -8042,7 +8078,7 @@ build the @file{src} directory from the distribution, consult the\n @code{f2c} program on your path.\n \n Something else that might be useful is @samp{cfortran.h} from\n-@url{ftp://zebra/desy.de/cfortran}.\n+@uref{ftp://zebra/desy.de/cfortran}.\n This is a fairly general tool which\n can be used to generate interfaces for calling in both directions\n between Fortran and C@.\n@@ -8055,12 +8091,12 @@ It can be used in @code{f2c} mode with\n @cindex types, Fortran/C\n Generally, C code written to link with\n @code{g77} code---calling and/or being\n-called from Fortran---should @samp{#include <f2c.h>} to define the C\n+called from Fortran---should @samp{#include <g2c.h>} to define the C\n versions of the Fortran types.\n Don't assume Fortran @code{INTEGER} types\n correspond to C @samp{int}s, for instance; instead, declare them as\n-@code{integer}, a type defined by @file{f2c.h}.\n-@file{f2c.h} is installed where @code{gcc} will find it by\n+@code{integer}, a type defined by @file{g2c.h}.\n+@file{g2c.h} is installed where @code{gcc} will find it by\n default, assuming you use a copy of @code{gcc} compatible with\n @code{g77}, probably built at the same time as @code{g77}.\n \n@@ -8069,7 +8105,7 @@ default, assuming you use a copy of @code{gcc} compatible with\n \n @pindex f2c\n @cindex -fno-second-underscore\n-A simple and foolproof way to write @code{g77}-callable C routines---e.g.@ to\n+A simple and foolproof way to write @code{g77}-callable C routines---e.g.@: to\n interface with an existing library---is to write a file (named, for\n example, @file{fred.f}) of dummy Fortran\n skeletons comprising just the declaration of the routine(s) and dummy\n@@ -8078,16 +8114,17 @@ Then run @code{f2c} on file @file{fred.f} to produce @file{fred.c}\n into which you can edit\n useful code, confident the calling sequence is correct, at least.\n (There are some errors otherwise commonly made in generating C\n-interfaces with f2c conventions, such as not using @code{doublereal} as\n-the return type of a @code{REAL} @code{FUNCTION}.)\n+interfaces with @code{f2c} conventions,\n+such as not using @code{doublereal}\n+as the return type of a @code{REAL} @code{FUNCTION}.)\n \n @pindex ftnchek\n @code{f2c} also can help with calling Fortran from C, using its\n @samp{-P} option to generate C prototypes appropriate for calling the\n Fortran.@footnote{The files generated like this can also be used for\n inter-unit consistency checking of dummy and actual arguments, although\n-the @samp{ftnchek} tool from @url{ftp://ftp.netlib.org/fortran}\n-or @url{ftp://ftp.dsm.fordham.edu} is\n+the @samp{ftnchek} tool from @uref{ftp://ftp.netlib.org/fortran}\n+or @uref{ftp://ftp.dsm.fordham.edu} is\n probably better for this purpose.}\n If the Fortran code containing any\n routines to be called from C is in file @file{joe.f}, use the command\n@@ -8333,23 +8370,23 @@ described in this section.\n \n When @code{g77} compiles a main program unit, it gives it the public\n procedure name @samp{MAIN__}.\n-The @code{libf2c} library has the actual @code{main()} procedure\n+The @code{libg2c} library has the actual @code{main()} procedure\n as is typical of C-based environments, and\n it is this procedure that performs some initial start-up\n activity and then calls @samp{MAIN__}.\n \n-Generally, @code{g77} and @code{libf2c} are designed so that you need not\n+Generally, @code{g77} and @code{libg2c} are designed so that you need not\n include a main program unit written in Fortran in your program---it\n can be written in C or some other language.\n Especially for I/O handling, this is the case, although @code{g77} version 0.5.16\n-includes a bug fix for @code{libf2c} that solved a problem with using the\n+includes a bug fix for @code{libg2c} that solved a problem with using the\n @code{OPEN} statement as the first Fortran I/O activity in a program\n without a Fortran main program unit.\n \n However, if you don't intend to use @code{g77} (or @code{f2c}) to compile\n your main program unit---that is, if you intend to compile a @code{main()}\n procedure using some other language---you should carefully\n-examine the code for @code{main()} in @code{libf2c}, found in the source\n+examine the code for @code{main()} in @code{libg2c}, found in the source\n file @file{gcc/f/runtime/libF77/main.c}, to see what kinds of things\n might need to be done by your @code{main()} in order to provide the\n Fortran environment your Fortran code is expecting.\n@@ -8358,9 +8395,9 @@ Fortran environment your Fortran code is expecting.\n @cindex intrinsics, IARGC()\n @cindex GETARG() intrinsic\n @cindex intrinsics, GETARG()\n-For example, @code{libf2c}'s @code{main()} sets up the information used by\n+For example, @code{libg2c}'s @code{main()} sets up the information used by\n the @code{IARGC} and @code{GETARG} intrinsics.\n-Bypassing @code{libf2c}'s @code{main()}\n+Bypassing @code{libg2c}'s @code{main()}\n without providing a substitute for this activity would mean\n that invoking @code{IARGC} and @code{GETARG} would produce undefined\n results.\n@@ -8372,7 +8409,7 @@ results.\n @cindex .gdbinit\n When debugging, one implication of the fact that @code{main()}, which\n is the place where the debugged program ``starts'' from the\n-debugger's point of view, is in @code{libf2c} is that you won't be\n+debugger's point of view, is in @code{libg2c} is that you won't be\n starting your Fortran program at a point you recognize as your\n Fortran code.\n \n@@ -8425,7 +8462,7 @@ The second argument is appended to the end of the user-specified\n calling sequence and is named @samp{__g77_length_@var{x}}, where @var{x}\n is the user-specified name.\n This argument is of the C type @code{ftnlen}\n-(see @file{gcc/f/runtime/f2c.h.in} for information on that type) and\n+(see @file{egcs/libf2c/g2c.h.in} for information on that type) and\n is the number of characters the caller has allocated in the\n array pointed to by the first argument.\n \n@@ -8537,7 +8574,8 @@ as how casing is handled.\n \n External names---names of entities that are public, or ``accessible'',\n to all modules in a program---normally have an underscore (@samp{_})\n-appended by @code{g77}, to generate code that is compatible with f2c.\n+appended by @code{g77},\n+to generate code that is compatible with @code{f2c}.\n External names include names of Fortran things like common blocks,\n external procedures (subroutines and functions, but not including\n statement functions, which are internal procedures), and entry point\n@@ -8557,7 +8595,7 @@ When @samp{-funderscoring} is in force, any name (external or local)\n that already has at least one underscore in it is\n implemented by @code{g77} by appending two underscores.\n (This second underscore can be disabled via the\n-@samp{-fno-second-underscore} option.)@ \n+@samp{-fno-second-underscore} option.)\n External names are changed this way for @code{f2c} compatibility.\n Local names are changed this way to avoid collisions with external names\n that are different in the source code---@code{f2c} does the same thing, but\n@@ -8630,8 +8668,9 @@ could be used to inhibit the appending of the underscore to the name.\n @cindex COMMON statement\n @cindex statements, COMMON\n \n-@code{g77} names and lays out @code{COMMON} areas the same way f2c does,\n-for compatibility with f2c.\n+@code{g77} names and lays out @code{COMMON} areas\n+the same way @code{f2c} does,\n+for compatibility with @code{f2c}.\n \n Currently, @code{g77} does not emit ``true'' debugging information for\n members of a @code{COMMON} area, due to an apparent bug in the GBE.\n@@ -9182,7 +9221,7 @@ assigned-label uses of a variable.\n @cindex messages, run-time\n @cindex I/O, errors\n \n-The @code{libf2c} library currently has the following table to relate\n+The @code{libg2c} library currently has the following table to relate\n error code numbers, returned in @code{IOSTAT=} variables, to messages.\n This information should, in future versions of this document, be\n expanded upon to include detailed descriptions of each message.\n@@ -9489,12 +9528,12 @@ The implementation @code{g77} currently uses to make this work is\n one of the few things not compatible with @code{f2c} as currently\n shipped.\n @code{f2c} currently does nothing with @samp{EXTERNAL FOO} except\n-issue a warning that @samp{FOO} is not otherwise referenced, and for\n-@samp{BLOCK DATA FOO}, f2c doesn't generate a dummy procedure with the\n-name @samp{FOO}.\n+issue a warning that @samp{FOO} is not otherwise referenced,\n+and, for @samp{BLOCK DATA FOO},\n+@code{f2c} doesn't generate a dummy procedure with the name @samp{FOO}.\n The upshot is that you shouldn't mix @code{f2c} and @code{g77} in\n this particular case.\n-If you use f2c to compile @samp{BLOCK DATA FOO},\n+If you use @code{f2c} to compile @samp{BLOCK DATA FOO},\n then any @code{g77}-compiled program unit that says @samp{EXTERNAL FOO}\n will result in an unresolved reference when linked.\n If you do the\n@@ -9939,13 +9978,24 @@ The @samp{-falias-check}, @samp{-fargument-alias},\n and @samp{-fno-argument-noalias-global} options,\n introduced in version 0.5.20 and\n @code{g77}'s version 2.7.2.2.f.2 of @code{gcc},\n-control the assumptions regarding aliasing\n-(overlapping)\n-of writes and reads to main memory (core) made\n-by the @code{gcc} back end.\n+were withdrawn as of @code{g77} version 0.5.23\n+due to their not being supported by @code{gcc} version 2.8.\n \n-They are effective only when compiling with @samp{-O} (specifying\n-any level other than @samp{-O0}) or with @samp{-falias-check}.\n+These options, which control the assumptions regarding aliasing\n+(overlapping) of writes and reads to main memory (core) made\n+by the @code{gcc} back end,\n+might well be added back (in some form) in a future version\n+of @code{gcc}.\n+\n+However, these options @emph{are} supported by @code{egcs}.\n+\n+The information below still is useful, but applies to\n+only those versions of @code{g77} that support the\n+alias analysis implied by support for these options.\n+\n+These options are effective only when compiling with @samp{-O}\n+(specifying any level other than @samp{-O0})\n+or with @samp{-falias-check}.\n \n The default for Fortran code is @samp{-fargument-noalias-global}.\n (The default for C code and code written in other C-based languages\n@@ -10069,8 +10119,7 @@ Static analysis is certainly imperfect, as is run-time analysis,\n since neither can catch all violations.\n (Static analysis can catch all likely violations, and some that\n might never actually happen, while run-time analysis can catch\n-only those violations that actually happen during a particular\n-run.\n+only those violations that actually happen during a particular run.\n Neither approach can cope with programs mixing Fortran code with\n routines written in other languages, however.)\n \n@@ -10105,20 +10154,21 @@ relevant @code{ERR=} and @code{IOSTAT=} mechanism.\n \n Because of the adverse effects this approach had on the performance\n of many programs, @code{g77} no longer configures @code{libf2c}\n+(now named @code{libg2c} in its @code{g77} incarnation)\n to always flush output.\n \n If your program depends on this behavior, either insert the\n appropriate @samp{CALL FLUSH} statements, or modify the sources\n-to the @code{libf2c}, rebuild and reinstall @code{g77}, and\n+to the @code{libg2c}, rebuild and reinstall @code{g77}, and\n relink your programs with the modified library.\n \n-(Ideally, @code{libf2c} would offer the choice at run-time, so\n+(Ideally, @code{libg2c} would offer the choice at run-time, so\n that a compile-time option to @code{g77} or @code{f2c} could\n result in generating the appropriate calls to flushing or\n non-flushing library routines.)\n \n @xref{Always Flush Output}, for information on how to modify\n-the @code{g77} source tree so that a version of @code{libf2c}\n+the @code{g77} source tree so that a version of @code{libg2c}\n can be built and installed with the @samp{ALWAYS_FLUSH} macro defined.\n \n @node Large File Unit Numbers\n@@ -10131,25 +10181,24 @@ can be built and installed with the @samp{ALWAYS_FLUSH} macro defined.\n \n If your program crashes at run time with a message including\n the text @samp{illegal unit number}, that probably is\n-a message from the run-time library, @code{libf2c}, used, and\n-distributed with, @code{g77}.\n+a message from the run-time library, @code{libg2c}.\n \n The message means that your program has attempted to use a\n file unit number that is out of the range accepted by\n-@code{libf2c}.\n+@code{libg2c}.\n Normally, this range is 0 through 99, and the high end\n-of the range is controlled by a @code{libf2c} source-file\n+of the range is controlled by a @code{libg2c} source-file\n macro named @samp{MXUNIT}.\n \n If you can easily change your program to use unit numbers\n in the range 0 through 99, you should do so.\n \n Otherwise, see @ref{Larger File Unit Numbers}, for information on how\n-to change @samp{MXUNIT} in @code{libf2c} so you can build and\n-install a new version of @code{libf2c} that supports the larger\n+to change @samp{MXUNIT} in @code{libg2c} so you can build and\n+install a new version of @code{libg2c} that supports the larger\n unit numbers you need.\n \n-@emph{Note:} While @code{libf2c} places a limit on the range\n+@emph{Note:} While @code{libg2c} places a limit on the range\n of Fortran file-unit numbers, the underlying library and operating\n system might impose different kinds of limits.\n For example, some systems limit the number of files simultaneously\n@@ -10350,6 +10399,32 @@ generally relevant to Fortran,\n but using it will force @code{COMMON} to be padded if necessary to align\n @code{DOUBLE PRECISION} data.\n \n+When @code{DOUBLE PRECISION} data is forcibly aligned\n+in @code{COMMON} by @code{g77} due to specifying @samp{-malign-double},\n+@code{g77} issues a warning about the need to\n+insert padding.\n+\n+In this case, each and every program unit that uses\n+the same @code{COMMON} area\n+must specify the same layout of variables and their types\n+for that area\n+and be compiled with @samp{-malign-double} as well.\n+@code{g77} will issue warnings in each case,\n+but as long as every program unit using that area\n+is compiled with the same warnings,\n+the resulting object files should work when linked together\n+unless the program makes additional assumptions about\n+@code{COMMON} area layouts that are outside the scope\n+of the FORTRAN 77 standard,\n+or uses @code{EQUIVALENCE} or different layouts\n+in ways that assume no padding is ever inserted by the compiler.\n+\n+@emph{Note:} @samp{-malign-double} applies only to\n+statically-allocated data.\n+Double-precision data on the stack can still\n+cause problems due to misalignment.\n+@xref{Aligned Data}.\n+\n @item\n Ensure that @file{crt0.o} or @file{crt1.o}\n on your system guarantees a 64-bit\n@@ -10457,7 +10532,7 @@ or installing @code{g77} is not provided here.\n \n To find out about major bugs discovered in the current release and\n possible workarounds for them, retrieve\n-@url{ftp://alpha.gnu.org/g77.plan}.\n+@uref{ftp://alpha.gnu.org/g77.plan}.\n \n (Note that some of this portion of the manual is lifted\n directly from the @code{gcc} manual, with minor modifications\n@@ -10563,7 +10638,7 @@ How to cope with such problems is well beyond the scope\n of this manual.\n \n However, users of Linux-based systems (such as GNU/Linux)\n-should review @code{http://www.bitwizard.nl/sig11}, a source\n+should review @uref{http://www.bitwizard.nl/sig11}, a source\n of detailed information on diagnosing hardware problems,\n by recognizing their common symptoms.\n \n@@ -10586,12 +10661,12 @@ programs (which should be done using @code{g77}).\n \n If this happens to you, try appending @samp{-lc} to the command you\n use to link the program, e.g. @samp{g77 foo.f -lc}.\n-@code{g77} already specifies @samp{-lf2c -lm} when it calls the linker,\n+@code{g77} already specifies @samp{-lg2c -lm} when it calls the linker,\n but it cannot also specify @samp{-lc} because not all systems have a\n file named @file{libc.a}.\n \n It is unclear at this point whether there are legitimately installed\n-systems where @samp{-lf2c -lm} is insufficient to resolve code produced\n+systems where @samp{-lg2c -lm} is insufficient to resolve code produced\n by @code{g77}.\n \n @cindex undefined reference (_main)\n@@ -10602,7 +10677,7 @@ by @code{g77}.\n If your program doesn't link due to unresolved references to names\n like @samp{_main}, make sure you're using the @code{g77} command to do the\n link, since this command ensures that the necessary libraries are\n-loaded by specifying @samp{-lf2c -lm} when it invokes the @code{gcc}\n+loaded by specifying @samp{-lg2c -lm} when it invokes the @code{gcc}\n command to do the actual link.\n (Use the @samp{-v} option to discover\n more about what actually happens when you use the @code{g77} and @code{gcc}\n@@ -10634,8 +10709,12 @@ compiled by @code{g77}.\n Inadequate investigation as of the release of 0.5.16 results in not\n knowing which products are the culprit, but @file{gdb-4.14} definitely\n crashes when, for example, an attempt is made to print the contents\n-of a @code{COMPLEX(KIND=2)} dummy array, on at least some GNU/Linux machines, plus\n-some others.\n+of a @code{COMPLEX(KIND=2)} dummy array, on at least some GNU/Linux\n+machines, plus some others.\n+Attempts to access assumed-size arrays are\n+also known to crash recent versions of @code{gdb}.\n+(@code{gdb}'s Fortran support was done for a different compiler\n+and isn't properly compatible with @code{g77}.)\n \n @node NeXTStep Problems\n @subsection NeXTStep Problems\n@@ -10916,7 +10995,7 @@ When compiled by @code{g77}, the above program might output\n executable that outputs @samp{0.2}.\n \n This particular difference is due to the fact that, currently,\n-conversion of floating-point values by the @code{libf2c} library,\n+conversion of floating-point values by the @code{libg2c} library,\n used by @code{g77}, handles only double-precision values.\n \n Since @samp{0.2} in the program is a single-precision value, it\n@@ -10958,7 +11037,7 @@ PRINT *, 0.2D0\n END\n @end smallexample\n \n-Future versions of @code{g77} and/or @code{libf2c} might convert\n+Future versions of @code{g77} and/or @code{libg2c} might convert\n single-precision values directly to decimal,\n instead of converting them to double precision first.\n This would tend to result in output that is more consistent\n@@ -11320,7 +11399,7 @@ specifiers.\n \n @code{g77} doesn't support @samp{FORMAT(I<J>)} and the like.\n Supporting this requires a significant redesign or replacement\n-of @code{libf2c}.\n+of @code{libg2c}.\n \n However, @code{g77} does support\n this construct when the expression is constant\n@@ -11370,7 +11449,7 @@ code to specify explicit assembler code.\n The @code{Q} edit descriptor in @code{FORMAT}s isn't supported.\n (This is meant to get the number of characters remaining in an input record.)\n Supporting this requires a significant redesign or replacement\n-of @code{libf2c}.\n+of @code{libg2c}.\n \n A workaround might be using internal I/O or the stream-based intrinsics.\n @xref{FGetC Intrinsic (subroutine)}.\n@@ -11426,7 +11505,7 @@ replaced by @samp{READ fmt,list}.\n This set of extensions is quite a bit\n lower on the list of large, important things to add to @code{g77}, partly\n because it requires a great deal of work either upgrading or\n-replacing @code{libf2c}.\n+replacing @code{libg2c}.\n \n @node OPEN CLOSE and INQUIRE Keywords\n @subsection @code{OPEN}, @code{CLOSE}, and @code{INQUIRE} Keywords\n@@ -11441,7 +11520,7 @@ replacing @code{libf2c}.\n @code{g77} doesn't have support for keywords such as @code{DISP='DELETE'} in\n the @code{OPEN}, @code{CLOSE}, and @code{INQUIRE} statements.\n These extensions are easy to add to @code{g77} itself, but\n-require much more work on @code{libf2c}.\n+require much more work on @code{libg2c}.\n \n @node ENCODE and DECODE\n @subsection @code{ENCODE} and @code{DECODE}\n@@ -11581,7 +11660,7 @@ The @code{gcc} backend and, consequently, @code{g77}, currently provides no\n control over whether or not floating-point exceptions are trapped or\n ignored.\n (Ignoring them typically results in NaN values being\n-propagated in systems that conform to IEEE 754.)@ \n+propagated in systems that conform to IEEE 754.)\n The behaviour is inherited from the system-dependent startup code.\n \n Most systems provide some C-callable mechanism to change this; this can\n@@ -11629,7 +11708,7 @@ allocation of automatic arrays in heap storage.\n @cindex threads\n @cindex parallel processing\n \n-Neither the code produced by @code{g77} nor the @code{libf2c} library\n+Neither the code produced by @code{g77} nor the @code{libg2c} library\n are thread-safe, nor does @code{g77} have support for parallel processing\n (other than the instruction-level parallelism available on some\n processors).\n@@ -12156,7 +12235,8 @@ number---producing different computational results.)\n \n The reason this misfeature is dangerous is that a slight,\n apparently innocuous change to the source code can change\n-the computational results.  Consider:\n+the computational results.\n+Consider:\n \n @smallexample\n REAL ALMOST, CLOSE\n@@ -12414,7 +12494,7 @@ If it isn't known, then you should report the problem.\n Reporting a bug might help you by bringing a solution to your problem, or\n it might not.\n (If it does not, look in the service directory; see\n-@ref{Service}.)@ \n+@ref{Service}.)\n In any case, the principal function of a bug report is\n to help the entire community by making the next version of GNU Fortran work\n better.\n@@ -12550,14 +12630,14 @@ their use into selective changes in your own code.\n @pindex ftncheck\n Validate your code with @code{ftnchek} or a similar code-checking\n tool.\n-@code{ftncheck} can be found at @url{ftp://ftp.netlib.org/fortran}\n-or @url{ftp://ftp.dsm.fordham.edu}.\n+@code{ftncheck} can be found at @uref{ftp://ftp.netlib.org/fortran}\n+or @uref{ftp://ftp.dsm.fordham.edu}.\n \n @pindex make\n @cindex Makefile example\n Here are some sample @file{Makefile} rules using @code{ftnchek}\n ``project'' files to do cross-file checking and @code{sfmakedepend}\n-(from @url{ftp://ahab.rutgers.edu/pub/perl/sfmakedepend})\n+(from @uref{ftp://ahab.rutgers.edu/pub/perl/sfmakedepend})\n to maintain dependencies automatically.\n These assume the use of GNU @code{make}.\n \n@@ -13308,7 +13388,7 @@ the feature-adding work.\n @itemize @bullet\n @item\n Do the equivalent of the trick of putting @samp{extern inline} in front\n-of every function definition in @code{libf2c} and #include'ing the resulting\n+of every function definition in @code{libg2c} and #include'ing the resulting\n file in @code{f2c}+@code{gcc}---that is, inline all run-time-library functions\n that are at all worth inlining.\n (Some of this has already been done, such as for integral exponentiation.)\n@@ -13343,7 +13423,7 @@ Among the important things the library would do are:\n @item\n Be a one-stop-shop-type\n library, hence shareable and usable by all, in that what are now\n-library-build-time options in @code{libf2c} would be moved at least to the\n+library-build-time options in @code{libg2c} would be moved at least to the\n @code{g77} compile phase, if not to finer grains (such as choosing how\n list-directed I/O formatting is done by default at @code{OPEN} time, for\n preconnected units via options or even statements in the main program\n@@ -13386,7 +13466,7 @@ very useful.\n \n @itemize @bullet\n @item\n-A new library (replacing @code{libf2c}) should improve portability as well as\n+A new library (replacing @code{libg2c}) should improve portability as well as\n produce more optimal code.\n Further, @code{g77} and the new library should\n conspire to simplify naming of externals, such as by removing unnecessarily\n@@ -13463,7 +13543,7 @@ Support @samp{OPEN(@dots{},KEY=(@dots{}),@dots{})}.\n @item\n Support arbitrary file unit numbers, instead of limiting them\n to 0 through @samp{MXUNIT-1}.\n-(This is a @code{libf2c} issue.)\n+(This is a @code{libg2c} issue.)\n \n @item\n @samp{OPEN(NOSPANBLOCKS,@dots{})} is treated as\n@@ -13487,7 +13567,7 @@ for @code{%FILL} in @code{STRUCTURE} and related syntax,\n whereas the rest of the\n stuff has at least some parsing support.\n This requires either major\n-changes to @code{libf2c} or its replacement.\n+changes to @code{libg2c} or its replacement.\n \n @item\n F90 and @code{g77} probably disagree about label scoping relative to\n@@ -13720,6 +13800,7 @@ as the above is just a sample, no such section exists.\n * INTGLOB::     Intrinsic also used as name of global.\n * LEX::         Various lexer messages\n * GLOBALS::     Disagreements about globals.\n+* LINKFAIL::    When linking @samp{f771} fails.\n @end menu\n \n @node CMPAMBIG\n@@ -14218,6 +14299,34 @@ In particular, the code might appear to work on a particular\n system, but have bugs that affect the reliability of the data\n without exhibiting any other outward manifestations of the bugs.\n \n+@node LINKFAIL\n+@section @code{LINKFAIL}\n+\n+@noindent\n+@smallexample\n+If the above command failed due to an unresolved reference\n+to strtoul, _strtoul, bsearch, _bsearch, or similar, see\n+[info -f g77 M LINKFAIL] (a node in the g77 documentation)\n+for information on what causes this, how to work around\n+the problem by editing $@{srcdir@}/proj.c, and what else to do.\n+@end smallexample\n+\n+@xref{Missing strtoul or bsearch}, for more information on\n+this problem,\n+which occurs only in releases of @code{g77}\n+based on @code{gcc}.\n+(It does not occur in @code{egcs}.)\n+\n+On AIX 4.1, @code{g77} might not build with the native (non-GNU) tools\n+due to a linker bug in coping with the @samp{-bbigtoc} option\n+which leads to a @samp{Relocation overflow} error.\n+\n+Compiling with @samp{-mminimal-toc}\n+might solve this problem, e.g.@: by adding\n+@smallexample\n+BOOT_CFLAGS='-mminimal-toc -O2 -g'\n+@end smallexample\n+to the @code{make bootstrap} command line.\n @end ifset\n \n @node Index"}, {"sha": "5bed8c133bb9aee1b31253059bbce467c4ad4017", "filename": "gcc/f/g77install.texi", "status": "modified", "additions": 728, "deletions": 689, "changes": 1417, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77install.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77install.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fg77install.texi?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -5,10 +5,20 @@\n @c The text of this file appears in the file INSTALL\n @c in the G77 distribution, as well as in the G77 manual.\n \n-@c 1998-05-20\n-\n-Note most of this information is out of date and superceded by the EGCS\n-install procedures.  It is provided for historical reference only.\n+@c 1998-05-29\n+\n+@set version-g77 0.5.23\n+@set version-gcc 2.8.1\n+@set version-autoconf 2.12\n+@set version-bison 1.25\n+@set version-gperf 2.5\n+@set version-gzip 1.2.4\n+@set version-make 3.76.1\n+@set version-makeinfo 1.68\n+@set version-patch 2.5\n+@set version-sed 2.05\n+@set version-tar 1.12\n+@set version-texinfo 3.11\n \n @ifclear INSTALLONLY\n @node Installation\n@@ -18,6 +28,12 @@ install procedures.  It is provided for historical reference only.\n \n The following information describes how to install @code{g77}.\n \n+Note that, for @code{egcs} users,\n+much of this information is obsolete,\n+and is superceded by the\n+@code{egcs} installation procedures.\n+Such information is explicitly flagged as such.\n+\n The information in this file generally pertains to dealing\n with @emph{source} distributions of @code{g77} and @code{gcc}.\n It is possible that some of this information will be applicable\n@@ -43,6 +59,9 @@ are ongoing.\n @section Prerequisites\n @cindex prerequisites\n \n+For @code{egcs} users, the following information is\n+superceded by the @code{egcs} installation instructions.\n+\n The procedures described to unpack, configure, build, and\n install @code{g77} assume your system has certain programs\n already installed.\n@@ -51,7 +70,7 @@ The following prerequisites should be met by your\n system before you follow the @code{g77} installation instructions:\n \n @table @asis\n-@item @code{gzip}\n+@item @code{gzip} and @code{tar}\n To unpack the @code{gcc} and @code{g77} distributions,\n you'll need the @code{gunzip} utility in the @code{gzip}\n distribution.\n@@ -64,21 +83,20 @@ There are GNU versions of all these available---in fact,\n a complete GNU UNIX system can be put together on\n most systems, if desired.\n \n-=======\n The version of GNU @code{gzip} used to package this release\n-is 1.2.4.\n+is @value{version-gzip}.\n (The version of GNU @code{tar} used to package this release\n-is 1.12.)\n+is @value{version-tar}.)\n \n-@item @file{gcc-2.7.2.3.tar.gz}\n+@item @file{gcc-@value{version-gcc}.tar.gz}\n You need to have this, or some other applicable, version\n of @code{gcc} on your system.\n The version should be an exact copy of a distribution\n from the FSF.\n-Its size is approximately 7.1MB.\n+Its size is approximately 8.4MB.\n \n-If you've already unpacked @file{gcc-2.7.2.3.tar.gz} into a\n-directory (named @file{gcc-2.7.2.3}) called the @dfn{source tree}\n+If you've already unpacked @file{gcc-@value{version-gcc}.tar.gz} into a\n+directory (named @file{gcc-@value{version-gcc}}) called the @dfn{source tree}\n for @code{gcc}, you can delete the distribution\n itself, but you'll need to remember to skip any instructions to unpack\n this distribution.\n@@ -87,11 +105,11 @@ Without an applicable @code{gcc} source tree, you cannot\n build @code{g77}.\n You can obtain an FSF distribution of @code{gcc} from the FSF.\n \n-@item @file{g77-0.5.21.tar.gz}\n+@item @file{g77-@value{version-g77}.tar.gz}\n You probably have already unpacked this package,\n or you are reading an advance copy of these installation instructions,\n which are contained in this distribution.\n-The size of this package is approximately 1.5MB.\n+The size of this package is approximately 1.4MB.\n \n You can obtain an FSF distribution of @code{g77} from the FSF,\n the same way you obtained @code{gcc}.\n@@ -103,7 +121,7 @@ using, how you build @code{g77}, and how much of it you\n install (primarily, which languages you install).\n \n The sizes shown below assume all languages distributed\n-in @code{gcc-2.7.2.3}, plus @code{g77}, will be built\n+in @code{gcc-@value{version-gcc}}, plus @code{g77}, will be built\n and installed.\n These sizes are indicative of GNU/Linux systems on\n Intel x86 running COFF and on Digital Alpha (AXP) systems\n@@ -118,23 +136,23 @@ before the public beta release.\n \n @itemize ---\n @item\n-@code{gcc} and @code{g77} distributions occupy 8.6MB\n-packed, 35MB unpacked.\n+@code{gcc} and @code{g77} distributions occupy 10MB\n+packed, 40MB unpacked.\n These consist of the source code and documentation,\n plus some derived files (mostly documentation), for\n @code{gcc} and @code{g77}.\n Any deviations from these numbers for different\n kinds of systems are likely to be very minor.\n \n @item\n-A ``bootstrap'' build requires an additional 67.3MB\n-for a total of 102MB on an ix86, and an additional\n-98MB for a total of 165MB on an Alpha.\n+A ``bootstrap'' build requires an additional 91MB\n+for a total of 132MB on an ix86, and an additional\n+136MB for a total of 177MB on an Alpha.\n \n @item\n Removing @file{gcc/stage1} after the build recovers\n-10.7MB for a total of 91MB on an ix86, and recovers\n-??MB for a total of ??MB on an Alpha.\n+13MB for a total of 119MB on an ix86, and recovers\n+21MB for a total of 155MB on an Alpha.\n \n After doing this, the integrity of the build can\n still be verified via @samp{make compare}, and the\n@@ -144,8 +162,8 @@ kept in @code{gcc/stage2}.\n \n @item\n Removing @file{gcc/stage2} after the build further\n-recovers 27.3MB for a total of 64.3MB, and recovers\n-??MB for a total of ??MB on an Alpha.\n+recovers 39MB for a total of 80MB, and recovers\n+57MB for a total of 98MB on an Alpha.\n \n After doing this, the compiler can still be installed,\n especially if GNU @code{make} is used to avoid\n@@ -154,9 +172,9 @@ by hand).\n \n @item\n Installing @code{gcc} and @code{g77} copies\n-14.9MB onto the @samp{--prefix} disk for a total of 79.2MB\n-on an ix86, and copies ??MB onto the @samp{--prefix}\n-disk for a total of ??MB on an Alpha.\n+23MB onto the @samp{--prefix} disk for a total of 103MB\n+on an ix86, and copies 31MB onto the @samp{--prefix}\n+disk for a total of 130MB on an Alpha.\n @end itemize\n \n After installation, if no further modifications and\n@@ -190,70 +208,40 @@ The rest of the new installation is done without\n replacing existing installed versions (assuming\n they have different version numbers).\n \n-@item @code{patch}\n-Although you can do everything @code{patch} does yourself,\n-by hand, without much trouble, having @code{patch} installed\n-makes installation of new versions of GNU utilities such as\n-@code{g77} so much easier that it is worth getting.\n-You can obtain @code{patch} the same way you obtained\n-@code{gcc} and @code{g77}.\n-\n-In any case, you can apply patches by hand---patch files\n-are designed for humans to read them.\n-\n-The version of GNU @code{patch} used to develop this release\n-is 2.5.\n-\n @item @code{make}\n Your system must have @code{make}, and you will probably save\n yourself a lot of trouble if it is GNU @code{make} (sometimes\n referred to as @code{gmake}).\n+In particular, you probably need GNU @code{make}\n+to build outside the source directory\n+(with @code{configure}'s @samp{--srcdir} option.)\n \n The version of GNU @code{make} used to develop this release\n-is 3.76.1.\n+is @value{version-make}.\n \n @item @code{cc}\n Your system must have a working C compiler.\n+If it doesn't, you might be able to obtain\n+a prebuilt binary of some version of @code{gcc}\n+from the network or on CD-ROM,\n+perhaps from the FSF@.\n+The best source of information about binaries\n+is probably a system-specific Usenet news group,\n+initially via its FAQ.\n \n @xref{Installation,,Installing GNU CC,gcc,Using and Porting GNU CC},\n for more information on prerequisites for installing @code{gcc}.\n \n-@item @code{bison}\n-If you do not have @code{bison} installed, you can usually\n-work around any need for it, since @code{g77} itself does\n-not use it, and @code{gcc} normally includes all files\n-generated by running it in its distribution.\n-You can obtain @code{bison} the same way you obtained\n-@code{gcc} and @code{g77}.\n-\n-The version of GNU @code{bison} used to develop this release\n-is 1.25.\n-\n-@xref{Missing bison?},\n-for information on how to work around not having @code{bison}.\n-\n-@item @code{makeinfo}\n-If you are missing @code{makeinfo}, you can usually work\n-around any need for it.\n-You can obtain @code{makeinfo} the same way you obtained\n-@code{gcc} and @code{g77}.\n-\n-The version of GNU @code{makeinfo} used to develop this release\n-is 1.68, from GNU @code{texinfo} version 3.11.\n-\n-@xref{Missing makeinfo?},\n-for information on getting around the lack of @code{makeinfo}.\n-\n @item @code{sed}\n All UNIX systems have @code{sed}, but some have a broken\n version that cannot handle configuring, building, or\n installing @code{gcc} or @code{g77}.\n \n The version of GNU @code{sed} used to develop this release\n-is 2.05.\n+is @value{version-sed}.\n (Note that GNU @code{sed} version 3.0 was withdrawn by the\n FSF---if you happen to have this version installed, replace\n-it with version 2.05 immediately.\n+it with version @value{version-sed} immediately.\n See a GNU distribution site for further explanation.)\n \n @item @code{root} access or equivalent\n@@ -274,6 +262,69 @@ System administrators with more experience will want to\n determine for themselves how they want to modify the\n procedures described below to suit the needs of their\n installation.\n+\n+@item @code{autoconf}\n+The version of GNU @code{autoconf} used to develop this release\n+is @value{version-autoconf}.\n+\n+@code{autoconf} is not needed in the typical case of\n+installing @code{gcc} and @code{g77}.\n+@xref{Missing tools?}, for information on when it\n+might be needed and how to work around not having it.\n+\n+@item @code{bison}\n+The version of GNU @code{bison} used to develop this release\n+is @value{version-bison}.\n+\n+@code{bison} is not needed in the typical case of\n+installing @code{gcc} and @code{g77}.\n+@xref{Missing tools?}, for information on when it\n+might be needed and how to work around not having it.\n+\n+@item @code{gperf}\n+The version of GNU @code{gperf} used to develop this release\n+is @value{version-gperf}.\n+\n+@code{gperf} is not needed in the typical case of\n+installing @code{gcc} and @code{g77}.\n+@xref{Missing tools?}, for information on when it\n+might be needed and how to work around not having it.\n+\n+@item @code{makeinfo}\n+The version of GNU @code{makeinfo} used to develop this release\n+is @value{version-makeinfo}.\n+\n+@code{makeinfo} is part of the GNU @code{texinfo} package;\n+@code{makeinfo} version @value{version-makeinfo}\n+is distributed as part of\n+GNU @code{texinfo} version @value{version-texinfo}.\n+\n+@code{makeinfo} is not needed in the typical case of\n+installing @code{gcc} and @code{g77}.\n+@xref{Missing tools?}, for information on when it\n+might be needed and how to work around not having it.\n+\n+An up-to-date version of GNU @code{makeinfo} is still convenient\n+when obtaining a new version of a GNU distribution such as\n+@code{gcc} or @code{g77},\n+as it allows you to obtain the @file{.diff.gz} file\n+instead of the entire @file{.tar.gz} distribution\n+(assuming you have installed @code{patch}).\n+\n+@item @code{patch}\n+The version of GNU @code{patch} used to develop this release\n+is @value{version-patch}.\n+\n+Beginning with @code{g77} version 0.5.23, it is no longer\n+necessary to patch the @code{gcc} back end to build @code{g77}.\n+\n+An up-to-date version of GNU @code{patch} is still convenient\n+when obtaining a new version of a GNU distribution such as\n+@code{gcc} or @code{g77},\n+as it allows you to obtain the @file{.diff.gz} file\n+instead of the entire @file{.tar.gz} distribution\n+(assuming you have installed the tools needed\n+to rebuild derived files, such as @code{makeinfo}).\n @end table\n \n @node Problems Installing\n@@ -291,6 +342,7 @@ either @code{gcc} or @code{g77}.\n \n @menu\n * General Problems::         Problems afflicting most or all systems.\n+* System-specific Problems:: Problems afflicting particular systems.\n * Cross-compiler Problems::  Problems afflicting cross-compilation setups.\n @end menu\n \n@@ -301,12 +353,11 @@ These problems can occur on most or all systems.\n \n @menu\n * GNU C Required::             Why even ANSI C is not enough.\n-* Patching GNU CC Necessary::  Why @code{gcc} must be patched first.\n+* Patching GNU CC::            Why @code{gcc} needn't be patched.\n * Building GNU CC Necessary::  Why you can't build @emph{just} Fortran.\n-* Missing strtoul::            If linking @code{f771} fails due to an\n-                                unresolved reference to @code{strtoul}.\n-* Cleanup Kills Stage Directories::  A minor nit for @code{g77} developers.\n-* Missing gperf?::             When building requires @code{gperf}.\n+* Missing strtoul or bsearch:: When linking @samp{f771} fails.\n+* Cleanup Kills Stage Directories::  For @code{g77} developers.\n+* LANGUAGES Macro Ignored::    Sometimes @samp{LANGUAGES} is ignored.\n @end menu\n \n @node GNU C Required\n@@ -328,25 +379,16 @@ bootstrap build to automate the process of first building\n @code{g77} and rebuilding @code{gcc} using that just-built @code{gcc},\n and so on.\n \n-@node Patching GNU CC Necessary\n-@subsubsection Patching GNU CC Necessary\n+@node Patching GNU CC\n+@subsubsection Patching GNU CC\n @cindex patch files\n @cindex GBE\n \n-@code{g77} currently requires application of a patch file to the gcc compiler\n-tree.\n-The necessary patches should be folded in to the mainline gcc distribution.\n-\n-Some combinations\n-of versions of @code{g77} and @code{gcc} might actually @emph{require} no\n-patches, but the patch files will be provided anyway as long as\n-there are more changes expected in subsequent releases.\n-These patch files might contain\n-unnecessary, but possibly helpful, patches.\n-As a result, it is possible this issue might never be\n-resolved, except by eliminating the need for the person\n-configuring @code{g77} to apply a patch by hand, by going\n-to a more automated approach (such as configure-time patching).\n+@code{g77} no longer requires application of a patch file\n+to the @code{gcc} compiler tree.\n+In fact, no such patch file is distributed with @code{g77}.\n+This is as of version 0.5.23\n+and @code{egcs} version 1.0.\n \n @node Building GNU CC Necessary\n @subsubsection Building GNU CC Necessary\n@@ -357,44 +399,73 @@ It should be possible to build the runtime without building @code{cc1}\n and other non-Fortran items, but, for now, an easy way to do that\n is not yet established.\n \n-@node Missing strtoul\n-@subsubsection Missing strtoul\n+@node Missing strtoul or bsearch\n+@subsubsection Missing strtoul or bsearch\n+@cindex bsearch\n+@cindex _bsearch\n @cindex strtoul\n @cindex _strtoul\n+@cindex undefined reference (_bsearch)\n @cindex undefined reference (_strtoul)\n @cindex f771, linking error for\n @cindex linking error for f771\n @cindex ld error for f771\n+@cindex ld can't find _bsearch\n @cindex ld can't find _strtoul\n @cindex SunOS4\n \n-On SunOS4 systems, linking the @code{f771} program produces\n-an error message concerning an undefined symbol named\n-@samp{_strtoul}.\n-\n-This is not a @code{g77} bug.\n-@xref{Patching GNU Fortran}, for information on\n-a workaround provided by @code{g77}.\n-\n-The proper fix is either to upgrade your system to one that\n-provides a complete ANSI C environment, or improve @code{gcc} so\n-that it provides one for all the languages and configurations it supports.\n-\n-@emph{Note:} In earlier versions of @code{g77}, an automated\n-workaround for this problem was attempted.\n-It worked for systems without @samp{_strtoul}, substituting\n-the incomplete-yet-sufficient version supplied with @code{g77}\n-for those systems.\n-However, the automated workaround failed mysteriously for systems\n-that appeared to have conforming ANSI C environments, and it\n-was decided that, lacking resources to more fully investigate\n-the problem, it was better to not punish users of those systems\n-either by requiring them to work around the problem by hand or\n-by always substituting an incomplete @code{strtoul()} implementation\n-when their systems had a complete, working one.\n-Unfortunately, this meant inconveniencing users of systems not\n-having @code{strtoul()}, but they're using obsolete (and generally\n-unsupported) systems anyway.\n+The following information does not apply to the\n+@code{egcs} version of @code{g77}.\n+\n+On SunOS4 systems, linking the @code{f771} program used to\n+produce an error message concerning an undefined symbol named\n+@samp{_strtoul}, because the @samp{strtoul} library function\n+is not provided on that system.\n+\n+Other systems have, in the past, been reported to not provide\n+their own @samp{strtoul} or @samp{bsearch} function.\n+\n+Some versions @code{g77} tried to default to providing bare-bones\n+versions of @code{bsearch} and @code{strtoul} automatically,\n+but every attempt at this has failed for at least one kind of system.\n+\n+To limit the failures to those few systems actually missing the\n+required routines, the bare-bones versions are still provided,\n+in @file{gcc/f/proj.c},\n+if the appropriate macros are defined.\n+These are @code{NEED_BSEARCH} for @samp{bsearch} and\n+@code{NEED_STRTOUL} for @samp{NEED_STRTOUL}.\n+\n+Therefore, if you are sure your system is missing\n+@code{bsearch} or @code{strtoul} in its library,\n+define the relevant macro(s) before building @code{g77}.\n+This can be done by editing @file{gcc/f/proj.c} and inserting\n+either or both of the following @samp{#define} statements\n+before the comment shown:\n+\n+@smallexample\n+/* Insert #define statements here.  */\n+\n+#define NEED_BSEARCH\n+#define NEED_STRTOUL\n+@end smallexample\n+\n+Then, continue configuring and building @code{g77} as usual.\n+\n+Or, you can define these on the @code{make} command line.\n+To build with the bundled @code{cc} on SunOS4, for example, try:\n+@smallexample\n+make bootstrap BOOT_CFLAGS='-O2 -g -DNEED_STRTOUL'\n+@end smallexample\n+\n+If you then encounter problems compiling @file{gcc/f/proj.c},\n+it might be due to a discrepancy between how @samp{bsearch}\n+or @samp{strtoul} are defined by that file and how they're\n+declared by your system's header files.\n+\n+In that case, you'll have to use some basic knowledge of C\n+to work around the problem, perhaps by editing @file{gcc/f/proj.c}\n+somewhat.\n \n @node Cleanup Kills Stage Directories\n @subsubsection Cleanup Kills Stage Directories\n@@ -406,47 +477,50 @@ would create the various @file{stage@var{n}} directories and their\n subdirectories, so developers and expert installers wouldn't have to\n reconfigure after cleaning up.\n \n-@node Missing gperf?\n-@subsubsection Missing @code{gperf}?\n-@cindex @code{gperf}\n-@cindex missing @code{gperf}\n-\n-If a build aborts trying to invoke @code{gperf}, that\n-strongly suggests an improper method was used to\n-create the @code{gcc} source directory,\n-such as the UNIX @samp{cp -r} command instead\n-of @samp{cp -pr}, since this problem very likely\n-indicates that the date-time-modified information on\n-the @code{gcc} source files is incorrect.\n-\n-The proper solution is to recreate the @code{gcc} source\n-directory from a @code{gcc} distribution known to be\n-provided by the FSF.\n-\n-It is possible you might be able to temporarily\n-work around the problem, however, by trying these\n-commands:\n-\n-@example\n-sh# @kbd{cd gcc}\n-sh# @kbd{touch c-gperf.h}\n-sh#\n-@end example\n-\n-These commands update the date-time-modified information for\n-the file produced by the invocation of @code{gperf}\n-in the current versions of @code{gcc}, so that @code{make} no\n-longer believes it needs to update it.\n-This file should already exist in a @code{gcc}\n-distribution, but mistakes made when copying the @code{gcc}\n-directory can leave the modification information\n-set such that the @code{gperf} input files look more ``recent''\n-than the corresponding output files.\n-\n-If the above does not work, definitely start from scratch\n-and avoid copying the @code{gcc} using any method that does\n-not reliably preserve date-time-modified information, such\n-as the UNIX @samp{cp -r} command.\n+That help has arrived as of version 0.5.23 of @code{g77}\n+and version 1.1 of @code{egcs}.\n+Configuration itself no longer creates any particular directories\n+that are unique to @code{g77}.\n+The build procedures in @file{Make-lang.in} take care of\n+that, on demand.\n+\n+@node LANGUAGES Macro Ignored\n+@subsubsection LANGUAGES Macro Ignored\n+@cindex @samp{LANGUAGES} macro ignored\n+@cindex ignoring @samp{LANGUAGES} macro\n+\n+Prior to version 0.5.23 of @code{g77}\n+and version 1.1 of @code{egcs},\n+@code{g77} would sometimes ignore\n+the absence of @samp{f77} and @samp{F77} in the\n+@samp{LANGUAGES} macro definition used for the\n+@code{make} command being processed.\n+\n+As of @code{g77} version 0.5.23\n+and @code{egcs} version 1.1,\n+@code{g77} now obeys this macro\n+in all relevant situations.\n+\n+However, in versions of @code{gcc} through 2.8.1,\n+non-@code{g77} portions of @code{gcc},\n+such as @code{g++},\n+are known to go ahead and perform various\n+language-specific activities when their\n+respective language strings do not appear\n+in the @samp{LANGUAGES} macro in effect\n+during that invocation of @code{make}.\n+\n+It is expected that these remaining problems will\n+be fixed in a future version of @code{gcc}.\n+\n+@node System-specific Problems\n+@subsection System-specific Problems\n+\n+@cindex AIX\n+A linker bug on some versions of AIX 4.1 might prevent building\n+when @code{g77} is built within @code{gcc}.\n+It might also occur when building within @code{egcs}.\n+@xref{LINKFAIL}.\n \n @node Cross-compiler Problems\n @subsection Cross-compiler Problems\n@@ -492,14 +566,16 @@ For example, it might not know how to handle floating-point\n constants.\n \n @item\n-Improvements to the way @code{libf2c} is built could make\n+Improvements to the way @code{libg2c} is built could make\n building @code{g77} as a cross-compiler easier---for example,\n passing and using @samp{$(LD)} and @samp{$(AR)} in the appropriate\n ways.\n+(This is improved in the @code{egcs} version of @code{g77},\n+especially as of version 1.1.)\n \n @item\n There are still some challenges putting together the right\n-run-time libraries (needed by @code{libf2c}) for a target\n+run-time libraries (needed by @code{libg2c}) for a target\n system, depending on the systems involved in the configuration.\n (This is a general problem with cross-compilation, and with\n @code{gcc} in particular.)\n@@ -601,9 +677,9 @@ reporting (immediate flagging of errors during writes) versus\n asynchronous, or, more precisely, buffered error reporting\n (detection of errors might be delayed).\n \n-@code{libf2c} supports flagging write errors immediately when\n+@code{libg2c} supports flagging write errors immediately when\n it is built with the @samp{ALWAYS_FLUSH} macro defined.\n-This results in a @code{libf2c} that runs slower, sometimes\n+This results in a @code{libg2c} that runs slower, sometimes\n quite a bit slower, under certain circumstances---for example,\n accessing files via the networked file system NFS---but the\n effect can be more reliable, robust file I/O.\n@@ -612,21 +688,19 @@ If you know that Fortran programs requiring this level of precision\n of error reporting are to be compiled using the\n version of @code{g77} you are building, you might wish to\n modify the @code{g77} source tree so that the version of\n-@code{libf2c} is built with the @samp{ALWAYS_FLUSH} macro\n+@code{libg2c} is built with the @samp{ALWAYS_FLUSH} macro\n defined, enabling this behavior.\n \n-To do this, find this line in @file{f/runtime/configure.in} in\n+To do this, find this line in @file{f/runtime/f2c.h} in\n your @code{g77} source tree:\n \n @example\n-dnl AC_DEFINE(ALWAYS_FLUSH)\n+/* #define ALWAYS_FLUSH */\n @end example\n \n-Remove the leading @samp{dnl@w{ }}, so the line begins with\n-@samp{AC_DEFINE(}, and run @code{autoconf} in that file's directory.\n-(Or, if you don't have @code{autoconf}, you can modify @file{f2c.h.in}\n-in the same directory to include the line @samp{#define ALWAYS_FLUSH}\n-after @samp{#define F2C_INCLUDE}.)\n+Remove the leading @samp{/*@w{ }},\n+so the line begins with @samp{#define},\n+and the trailing @samp{@w{ }*/}.\n \n Then build or rebuild @code{g77} as appropriate.\n \n@@ -661,7 +735,7 @@ The @code{g77} build will crash if an attempt is made to build\n it as a cross-compiler\n for a target when @code{g77} cannot reliably determine the bit pattern of\n floating-point constants for the target.\n-Planned improvements for g77-0.6\n+Planned improvements for version 0.6 of @code{g77}\n will give it the capabilities it needs to not have to crash the build\n but rather generate correct code for the target.\n (Currently, @code{g77}\n@@ -741,6 +815,9 @@ systems.\n @section Quick Start\n @cindex quick start\n \n+For @code{egcs} users, the following information is\n+superceded by the @code{egcs} installation instructions.\n+\n This procedure configures, builds, and installs @code{g77}\n ``out of the box'' and works on most UNIX systems.\n Each command is identified by a unique number,\n@@ -763,8 +840,8 @@ already reside in @file{/usr/FSF}, a naming convention\n used by the author of @code{g77} on his own system:\n \n @example\n-/usr/FSF/gcc-2.7.2.3.tar.gz\n-/usr/FSF/g77-0.5.21.tar.gz\n+/usr/FSF/gcc-@value{version-gcc}.tar.gz\n+/usr/FSF/g77-@value{version-g77}.tar.gz\n @end example\n \n @c (You can use @file{gcc-2.7.2.1.tar.gz} instead, or\n@@ -774,27 +851,28 @@ used by the author of @code{g77} on his own system:\n @c if you remember to make the appropriate adjustments in the\n @c instructions below.)\n \n-@cindex SunOS4\n-Users of the following systems should not blindly follow\n-these quick-start instructions, because of problems their\n-systems have coping with straightforward installation of\n-@code{g77}:\n+@c @cindex SunOS4\n+@c Users of the following systems should not blindly follow\n+@c these quick-start instructions, because of problems their\n+@c systems have coping with straightforward installation of\n+@c @code{g77}:\n+@c \n+@c @itemize @bullet\n+@c @item\n+@c SunOS4\n+@c @end itemize\n+@c \n+@c Instead, see @ref{Complete Installation}, for detailed information\n+@c on how to configure, build, and install @code{g77} for your\n+@c particular system.\n+@c Also, see @ref{Trouble,,Known Causes of Trouble with GNU Fortran},\n+@c for information on bugs and other problems known to afflict the\n+@c installation process, and how to report newly discovered ones.\n+@c \n+@c If your system is @emph{not} on the above list, and @emph{is}\n+@c a UNIX system or one of its variants, you should be able to\n+@c follow the instructions below.\n \n-@itemize @bullet\n-@item\n-SunOS4\n-@end itemize\n-\n-Instead, see @ref{Complete Installation}, for detailed information\n-on how to configure, build, and install @code{g77} for your\n-particular system.\n-Also, see @ref{Trouble,,Known Causes of Trouble with GNU Fortran},\n-for information on bugs and other problems known to afflict the\n-installation process, and how to report newly discovered ones.\n-\n-If your system is @emph{not} on the above list, and @emph{is}\n-a UNIX system or one of its variants, you should be able to\n-follow the instructions below.\n If you vary @emph{any} of the steps below, you might run into\n trouble, including possibly breaking existing programs for\n other users of your system.\n@@ -805,55 +883,42 @@ These explanations follow this list of steps.\n @example\n sh[ 1]# @kbd{cd /usr/src}\n @set source-dir 1\n-sh[ 2]# @kbd{gunzip -c < /usr/FSF/gcc-2.7.2.3.tar.gz | tar xf -}\n+sh[ 2]# @kbd{gunzip -c < /usr/FSF/gcc-@value{version-gcc}.tar.gz | tar xf -}\n [Might say \"Broken pipe\"...that is normal on some systems.]\n @set unpack-gcc 2\n-sh[ 3]# @kbd{gunzip -c < /usr/FSF/g77-0.5.21.tar.gz | tar xf -}\n+sh[ 3]# @kbd{gunzip -c < /usr/FSF/g77-@value{version-g77}.tar.gz | tar xf -}\n [\"Broken pipe\" again possible.]\n @set unpack-g77 3\n-sh[ 4]# @kbd{ln -s gcc-2.7.2.3 gcc}\n+sh[ 4]# @kbd{ln -s gcc-@value{version-gcc} gcc}\n @set link-gcc 4\n-sh[ 5]# @kbd{ln -s g77-0.5.21 g77}\n+sh[ 5]# @kbd{ln -s g77-@value{version-g77} g77}\n @set link-g77 5\n sh[ 6]# @kbd{mv -i g77/* gcc}\n [No questions should be asked by mv here; or, you made a mistake.]\n @set merge-g77 6\n-sh[ 7]# @kbd{patch -p1 -V t -d gcc < gcc/f/gbe/2.7.2.3.diff}\n-[Unless patch complains about rejected patches, this step worked.]\n-@set apply-patch 7\n-sh[ 8]# @kbd{cd gcc}\n-sh[ 9]# @kbd{touch f77-install-ok}\n-[Do not do the above if your system already has an f77\n-command, unless you've checked that overwriting it\n-is okay.]\n-@set f77-install-ok 9\n-sh[10]# @kbd{touch f2c-install-ok}\n-[Do not do the above if your system already has an f2c\n-command, unless you've checked that overwriting it\n-is okay.  Else, @kbd{touch f2c-exists-ok}.]\n-@set f2c-install-ok 10\n-sh[11]# @kbd{./configure --prefix=/usr}\n+sh[ 7]# @kbd{cd gcc}\n+sh[ 8]# @kbd{./configure --prefix=/usr}\n [Do not do the above if gcc is not installed in /usr/bin.\n You might need a different @kbd{--prefix=@dots{}}, as\n described below.]\n-@set configure-gcc 11\n-sh[12]# @kbd{make bootstrap}\n+@set configure-gcc 8\n+sh[ 9]# @kbd{make bootstrap}\n [This takes a long time, and is where most problems occur.]\n-@set build-gcc 12\n-sh[13]# @kbd{make compare}\n+@set build-gcc 9\n+sh[10]# @kbd{make compare}\n [This verifies that the compiler is `sane'.\n If any files are printed, you have likely found a g77 bug.]\n-@set compare-gcc 13\n-sh[14]# @kbd{rm -fr stage1}\n-@set rm-stage1 14\n-sh[15]# @kbd{make -k install}\n+@set compare-gcc 10\n+sh[11]# @kbd{rm -fr stage1}\n+@set rm-stage1 11\n+sh[12]# @kbd{make -k install}\n [The actual installation.]\n-@set install-g77 15\n-sh[16]# @kbd{g77 -v}\n+@set install-g77 12\n+sh[13]# @kbd{g77 -v}\n [Verify that g77 is installed, obtain version info.]\n-@set show-version 16\n-sh[17]#\n-@set end-procedure 17\n+@set show-version 13\n+sh[14]#\n+@set end-procedure 14\n @end example\n \n @xref{Updating Documentation,,Updating Your Info Directory}, for\n@@ -877,17 +942,17 @@ installed version of @code{g77} and @code{gcc} in any case.\n @c instead, or apply @file{gcc-2.7.2-2.7.2.1.diff.gz} to achieve\n @c similar results.\n \n-@item Step @value{unpack-g77}: @kbd{gunzip -d < /usr/FSF/g77-0.5.21.tar.gz | tar xf -}\n+@item Step @value{unpack-g77}: @kbd{gunzip -d < /usr/FSF/g77-@value{version-g77}.tar.gz | tar xf -}\n It is not always necessary to obtain the latest version of\n @code{g77} as a complete @file{.tar.gz} file if you have\n a complete, earlier distribution of @code{g77}.\n If appropriate, you can unpack that earlier\n version of @code{g77}, and then apply the appropriate patches\n to achieve the same result---a source tree containing version\n-0.5.21 of @code{g77}.\n+@value{version-g77} of @code{g77}.\n \n-@item Step @value{link-gcc}: @kbd{ln -s gcc-2.7.2.3 gcc}\n-@item Step @value{link-g77}: @kbd{ln -s g77-0.5.21 g77}\n+@item Step @value{link-gcc}: @kbd{ln -s gcc-@value{version-gcc} gcc}\n+@item Step @value{link-g77}: @kbd{ln -s g77-@value{version-g77} g77}\n These commands mainly help reduce typing,\n and help reduce visual clutter in examples\n in this manual showing what to type to install @code{g77}.\n@@ -901,7 +966,7 @@ other than the FSF.\n \n @item Step @value{merge-g77}: @kbd{mv -i g77/* gcc}\n After doing this, you can, if you like, type\n-@samp{rm g77} and @samp{rmdir g77-0.5.21} to remove\n+@samp{rm g77} and @samp{rmdir g77-@value{version-g77}} to remove\n the empty directory and the symbol link to it.\n But, it might be helpful to leave them around as\n quick reminders of which version(s) of @code{g77} are\n@@ -911,59 +976,25 @@ installed on your system.\n on the contents of the @file{g77} directory (as merged\n into the @file{gcc} directory).\n \n-@item Step @value{apply-patch}: @kbd{patch -p1 @dots{}}\n-@c (Or `@kbd{@dots{} < gcc/f/gbe/2.7.2.1.diff}', if appropriate.)\n-@c\n-This can produce a wide variety of printed output,\n-from @samp{Hmm, I can't seem to find a patch in there anywhere...}\n-to long lists of messages indicated that patches are\n-being found, applied successfully, and so on.\n-\n-If messages about ``fuzz'', ``offset'', or\n-especially ``reject files'' are printed, it might\n-mean you applied the wrong patch file.\n-If you believe this is the case, it is best to restart\n-the sequence after deleting (or at least renaming to unused\n-names) the top-level directories for @code{g77} and @code{gcc}\n-and their symbolic links.\n-\n-After this command finishes, the @code{gcc} directory might\n-have old versions of several files as saved by @code{patch}.\n-To remove these, after @kbd{cd gcc}, type @kbd{rm -i *.~*~}.\n-\n-@xref{Merging Distributions}, for more information.\n-\n-@item Step @value{f77-install-ok}: @kbd{touch f77-install-ok}\n-Don't do this if you don't want to overwrite an existing\n-version of @code{f77} (such as a native compiler, or a\n-script that invokes @code{f2c}).\n-Otherwise, installation will overwrite the @code{f77} command\n-and the @code{f77} man pages with copies of the corresponding\n-@code{g77} material.\n-\n-@xref{Installing f77,,Installing @code{f77}}, for more\n-information.\n-\n-@item Step @value{f2c-install-ok}: @kbd{touch f2c-install-ok}\n-Don't do this if you don't want to overwrite an existing\n-installation of @code{libf2c} (though, chances are, you do).\n-Instead, @kbd{touch f2c-exists-ok} to allow the installation\n-to continue without any error messages about @file{/usr/lib/libf2c.a}\n-already existing.\n-\n-@xref{Installing f2c,,Installing @code{f2c}}, for more\n-information.\n-\n @item Step @value{configure-gcc}: @kbd{./configure --prefix=/usr}\n-This is where you specify that the @file{g77} executable is to be\n-installed in @file{/usr/bin/}, the @file{libf2c.a} library is\n-to be installed in @file{/usr/lib/}, and so on.\n+This is where you specify that\n+the @file{g77} and @file{gcc} executables are to be\n+installed in @file{/usr/bin/},\n+the @code{g77} and @code{gcc} documentation is\n+to be installed in @file{/usr/info/} and @file{/usr/man/},\n+and so on.\n \n You should ensure that any existing installation of the @file{gcc}\n executable is in @file{/usr/bin/}.\n-Otherwise, installing @code{g77} so that it does not fully\n-replace the existing installation of @code{gcc} is likely\n-to result in the inability to compile Fortran programs.\n+\n+However, if that existing version of @code{gcc} is not @value{version-gcc},\n+or if you simply wish to avoid risking overwriting it with a\n+newly built copy of the same version,\n+you can specify @samp{--prefix=/usr/local}\n+(which is the default)\n+or some other path,\n+and invoke the newly installed version\n+directly from that path's @file{bin} directory.\n \n @xref{Where to Install,,Where in the World Does Fortran (and GNU CC) Go?},\n for more information on determining where to install @code{g77}.\n@@ -996,9 +1027,11 @@ You don't need to do this, but it frees up disk space.\n If this doesn't seem to work, try:\n \n @example\n-make -k install install-libf77 install-f2c-all\n+make -k install install-libf77\n @end example\n \n+Or, make sure you're using GNU @code{make}.\n+\n @xref{Installation of Binaries}, for more information.\n \n @xref{Updating Documentation,,Updating Your Info Directory},\n@@ -1047,6 +1080,15 @@ sh# @kbd{./smtest}\n sh#\n @end example\n \n+If invoking @code{g77} doesn't seem to work,\n+the problem might be that you've installed it in\n+a location that is not in your shell's search path.\n+For example, if you specified @samp{--prefix=/gnu},\n+and @file{/gnu/bin} is not in your @code{PATH}\n+environment variable,\n+you must explicitly specify the location of the compiler\n+via @kbd{/gnu/bin/g77 -o smtest smtest.f}.\n+\n After proper installation, you don't\n need to keep your gcc and g77 source and build directories\n around anymore.\n@@ -1056,23 +1098,22 @@ Removing them can free up a lot of disk space.\n @node Complete Installation\n @section Complete Installation\n \n+For @code{egcs} users, the following information is\n+mostly superceded by the @code{egcs} installation instructions.\n+\n Here is the complete @code{g77}-specific information on how\n to configure, build, and install @code{g77}.\n \n @menu\n * Unpacking::\n * Merging Distributions::\n-* f77: Installing f77.\n-* f2c: Installing f2c.\n-* Patching GNU Fortran::\n * Where to Install::\n * Configuring gcc::\n * Building gcc::\n * Pre-installation Checks::\n * Installation of Binaries::\n * Updating Documentation::\n-* bison: Missing bison?.\n-* makeinfo: Missing makeinfo?.\n+* Missing tools?::\n @end menu\n \n @node Unpacking\n@@ -1109,10 +1150,10 @@ and @code{g77} is:\n \n @example\n sh# @kbd{cd /usr/src}\n-sh# @kbd{gunzip -c /usr/FSF/gcc-2.7.2.3.tar.gz | tar xf -}\n-sh# @kbd{gunzip -c /usr/FSF/g77-0.5.21.tar.gz | tar xf -}\n-sh# @kbd{ln -s gcc-2.7.2.3 gcc}\n-sh# @kbd{ln -s g77-0.5.21 g77}\n+sh# @kbd{gunzip -c /usr/FSF/gcc-@value{version-gcc}.tar.gz | tar xf -}\n+sh# @kbd{gunzip -c /usr/FSF/g77-@value{version-g77}.tar.gz | tar xf -}\n+sh# @kbd{ln -s gcc-@value{version-gcc} gcc}\n+sh# @kbd{ln -s g77-@value{version-g77} g77}\n sh# @kbd{mv -i g77/* gcc}\n @end example\n \n@@ -1137,7 +1178,7 @@ g77/f\n \n All three entries should be moved (or copied) into a @code{gcc}\n source tree (typically named after its version number and\n-as it appears in the FSF distributions---e.g. @file{gcc-2.7.2.3}).\n+as it appears in the FSF distributions---e.g. @file{gcc-@value{version-gcc}}).\n \n @file{g77/f} is the subdirectory containing all of the\n code, documentation, and other information that is specific\n@@ -1157,8 +1198,7 @@ tree for the first time.\n @cindex optimizations, Pentium\n @emph{Note:} Please use @strong{only} @code{gcc} and @code{g77}\n source trees as distributed by the FSF.\n-Use of modified versions, such as the Pentium-specific-optimization\n-port of @code{gcc}, is likely to result in problems that appear to be\n+Use of modified versions is likely to result in problems that appear to be\n in the @code{g77} code but, in fact, are not.\n Do not use such modified versions\n unless you understand all the differences between them and the versions\n@@ -1173,29 +1213,24 @@ and @code{gcc} can coexist as they do in the stock FSF distributions.\n @cindex versions of @code{gcc}\n @cindex support for @code{gcc} versions\n \n-After merging the @code{g77} source tree into the @code{gcc}\n-source tree, the final merge step is done by applying the\n-pertinent patches the @code{g77} distribution provides for\n-the @code{gcc} source tree.\n-\n-Read the file @file{gcc/f/gbe/README}, and apply the appropriate\n-patch file for the version of the GNU CC compiler you have, if\n-that exists.\n-If the directory exists but the appropriate file\n-does not exist, you are using either an old, unsupported version,\n-or a release one that is newer than the newest @code{gcc} version\n-supported by the version of @code{g77} you have.\n+After merging the @code{g77} source tree into the @code{gcc} source tree,\n+you have put together a complete @code{g77} source tree.\n \n @cindex gcc version numbering\n @cindex version numbering\n @cindex g77 version number\n @cindex GNU version numbering\n-As of version 0.5.18, @code{g77} modifies the version number\n-of @code{gcc} via the pertinent patches.\n-This is done because the resulting version of @code{gcc} is\n-deemed sufficiently different from the vanilla distribution\n-to make it worthwhile to present, to the user, information\n-signaling the fact that there are some differences.\n+As of version 0.5.23, @code{g77} no longer modifies\n+the version number of @code{gcc},\n+nor does it patch @code{gcc} itself.\n+\n+@code{g77} still depends on being merged with an\n+appropriate version of @code{gcc}.\n+For version @value{version-g77} of @code{g77},\n+the specific version of @code{gcc} supported is @value{version-gcc}.\n+\n+However, other versions of @code{gcc} might be suitable\n+``hosts'' for this version of @code{g77}.\n \n GNU version numbers make it easy to figure out whether a\n particular version of a distribution is newer or older than\n@@ -1204,7 +1239,7 @@ The format is,\n generally, @var{major}.@var{minor}.@var{patch}, with\n each field being a decimal number.\n (You can safely ignore\n-leading zeros; for example, 1.5.3 is the same as 1.5.03.)@ \n+leading zeros; for example, 1.5.3 is the same as 1.5.03.)\n The @var{major} field only increases with time.\n The other two fields are reset to 0 when the field to\n their left is incremented; otherwise, they, too, only\n@@ -1216,9 +1251,10 @@ announcements and in names for distributions and\n the directories they create.)\n \n If your version of @code{gcc} is older than the oldest version\n-supported by @code{g77} (as casually determined by listing\n-the contents of @file{gcc/f/gbe/}), you should obtain a newer,\n-supported version of @code{gcc}.\n+supported by @code{g77}\n+(as casually determined by listing the contents of @file{gcc/f/INSTALL/},\n+which contains these installation instructions in plain-text format),\n+you should obtain a newer, supported version of @code{gcc}.\n (You could instead obtain an older version of @code{g77},\n or try and get your @code{g77} to work with the old\n @code{gcc}, but neither approach is recommended, and\n@@ -1230,20 +1266,18 @@ If your version of @code{gcc} is newer than the newest version\n supported by @code{g77}, it is possible that your @code{g77}\n will work with it anyway.\n If the version number for @code{gcc} differs only in the\n-@var{patch} field, you might as well try applying the @code{g77} patch\n-that is for the newest version of @code{gcc} having the same\n-@var{major} and @var{minor} fields, as this is likely to work.\n+@var{patch} field, you might as well try that version of @code{gcc}.\n+Since it has the same @var{major} and @var{minor} fields,\n+the resulting combination is likely to work.\n \n So, for example, if a particular version of @code{g77} has support for\n-@code{gcc} versions 2.7.0 and 2.7.1,\n-it is likely that @file{gcc-2.7.2} would work well with @code{g77}\n-by using the @file{2.7.1.diff} patch file provided\n-with @code{g77} (aside from some offsets reported by @code{patch},\n-which usually are harmless).\n-\n-However, @file{gcc-2.8.0} would almost certainly\n-not work with that version of @code{g77} no matter which patch file was\n-used, so a new version of @code{g77} would be needed (and you should\n+@code{gcc} versions 2.8.0 and 2.8.1,\n+it is likely that @file{gcc-2.8.2} would work well with @code{g77}.\n+\n+However, @file{gcc-2.9.0} would almost certainly\n+not work with that version of @code{g77}\n+without appropriate modifications,\n+so a new version of @code{g77} would be needed (and you should\n wait for it rather than bothering the maintainers---@pxref{Changes,,\n User-Visible Changes}).\n \n@@ -1255,211 +1289,24 @@ separate distributions.\n By keeping them separate, each product is able to be independently\n improved and distributed to its user base more frequently.\n \n-However, @code{g77} often requires changes to contemporary\n-versions of @code{gcc}.\n-Also, the GBE interface defined by @code{gcc} typically\n+However, the GBE interface defined by @code{gcc} typically\n undergoes some incompatible changes at least every time the\n @var{minor} field of the version number is incremented,\n and such changes require corresponding changes to\n the @code{g77} front end (FFE).\n \n-It is hoped that the GBE interface, and the @code{gcc} and\n-@code{g77} products in general, will stabilize sufficiently\n-for the need for hand-patching to disappear.\n-\n-Invoking @code{patch} as described in @file{gcc/f/gbe/README}\n-can produce a wide variety of printed output,\n-from @samp{Hmm, I can't seem to find a patch in there anywhere...}\n-to long lists of messages indicated that patches are\n-being found, applied successfully, and so on.\n-\n-If messages about ``fuzz'', ``offset'', or\n-especially ``reject files'' are printed, it might\n-mean you applied the wrong patch file.\n-If you believe this is the case, it is best to restart\n-the sequence after deleting (or at least renaming to unused\n-names) the top-level directories for @code{g77} and @code{gcc}\n-and their symbolic links.\n-That is because @code{patch} might have partially patched\n-some @code{gcc} source files, so reapplying the correct\n-patch file might result in the correct patches being\n-applied incorrectly (due to the way @code{patch} necessarily\n-works).\n-\n-After @code{patch} finishes, the @code{gcc} directory might\n-have old versions of several files as saved by @code{patch}.\n-To remove these, after @kbd{cd gcc}, type @kbd{rm -i *.~*~}.\n-\n-@pindex config-lang.in\n-@emph{Note:} @code{g77}'s configuration file @file{gcc/f/config-lang.in}\n-ensures that the source code for the version of @code{gcc}\n-being configured has at least one indication of being patched\n-as required specifically by @code{g77}.\n-This configuration-time\n-checking should catch failure to apply the correct patch and,\n-if so caught, should abort the configuration with an explanation.\n-@emph{Please} do not try to disable the check,\n-otherwise @code{g77} might well appear to build\n-and install correctly, and even appear to compile correctly,\n-but could easily produce broken code.\n-\n-@cindex creating patch files\n-@cindex patch files, creating\n-@pindex gcc/f/gbe/\n-@samp{diff -rcp2N} is used to create the patch files\n-in @file{gcc/f/gbe/}.\n-\n-@node Installing f77\n-@subsection Installing @code{f77}\n-@cindex f77 command\n-@cindex commands, f77\n-@cindex native compiler\n-\n-You should decide whether you want installation of @code{g77}\n-to also install an @code{f77} command.\n-On systems with a native @code{f77}, this is not\n-normally desired, so @code{g77} does not do this by\n-default.\n-\n-@pindex f77-install-ok\n-@vindex F77_INSTALL_FLAG\n-If you want @code{f77} installed, create the file @file{f77-install-ok}\n-(e.g. via the UNIX command @samp{touch f77-install-ok}) in the\n-source or build top-level directory (the same directory in\n-which the @code{g77} @file{f} directory resides, not the @file{f} directory\n-itself), or edit @file{gcc/f/Make-lang.in} and change the definition\n-of the @samp{F77_INSTALL_FLAG} macro appropriately.\n-\n-Usually, this means that, after typing @samp{cd gcc}, you\n-would type @samp{touch f77-install-ok}.\n-\n-When you enable installation of @code{f77}, either a link to or a\n-direct copy of the @code{g77} command is made.\n-Similarly, @file{f77.1} is installed as a man page.\n-\n-(The @code{uninstall} target in the @file{gcc/Makefile} also tests\n-this macro and file, when invoked, to determine whether to delete the\n-installed copies of @code{f77} and @file{f77.1}.)\n-\n-@emph{Note:} No attempt is yet made\n-to install a program (like a shell script) that provides\n-compatibility with any other @code{f77} programs.\n-Only the most rudimentary invocations of @code{f77} will\n-work the same way with @code{g77}.\n-\n-@node Installing f2c\n-@subsection Installing @code{f2c}\n-\n-Currently, @code{g77} does not include @code{f2c} itself in its\n-distribution.\n-However, it does include a modified version of the @code{libf2c}.\n-This version is normally compatible with @code{f2c}, but has been\n-modified to meet the needs of @code{g77} in ways that might possibly\n-be incompatible with some versions or configurations of @code{f2c}.\n-\n-Decide how installation of @code{g77} should affect any existing installation\n-of @code{f2c} on your system.\n-\n-@pindex f2c\n-@pindex f2c.h\n-@pindex libf2c.a\n-@pindex libF77.a\n-@pindex libI77.a\n-If you do not have @code{f2c} on your system (e.g. no @file{/usr/bin/f2c},\n-no @file{/usr/include/f2c.h}, and no @file{/usr/lib/libf2c.a},\n-@file{/usr/lib/libF77.a}, or @file{/usr/lib/libI77.a}), you don't need to\n-be concerned with this item.\n-\n-If you do have @code{f2c} on your system, you need to decide how users\n-of @code{f2c} will be affected by your installing @code{g77}.\n-Since @code{g77} is\n-currently designed to be object-code-compatible with @code{f2c} (with\n-very few, clear exceptions), users of @code{f2c} might want to combine\n-@code{f2c}-compiled object files with @code{g77}-compiled object files in a\n-single executable.\n-\n-To do this, users of @code{f2c} should use the same copies of @file{f2c.h} and\n-@file{libf2c.a} that @code{g77} uses (and that get built as part of\n-@code{g77}).\n-\n-If you do nothing here, the @code{g77} installation process will not\n-overwrite the @file{include/f2c.h} and @file{lib/libf2c.a} files with its\n-own versions, and in fact will not even install @file{libf2c.a} for use\n-with the newly installed versions of @code{gcc} and @code{g77} if it sees\n-that @file{lib/libf2c.a} exists---instead, it will print an explanatory\n-message and skip this part of the installation.\n-\n-@pindex f2c-install-ok\n-@vindex F2C_INSTALL_FLAG\n-To install @code{g77}'s versions of @file{f2c.h} and @file{libf2c.a}\n-in the appropriate\n-places, create the file @file{f2c-install-ok} (e.g. via the UNIX\n-command @samp{touch f2c-install-ok}) in the source or build top-level\n-directory (the same directory in which the @code{g77} @file{f} directory\n-resides, not the @file{f} directory itself), or edit @file{gcc/f/Make-lang.in}\n-and change the definition of the @samp{F2C_INSTALL_FLAG} macro appropriately.\n-\n-Usually, this means that, after typing @samp{cd gcc}, you\n-would type @samp{touch f2c-install-ok}.\n-\n-Make sure that when you enable the overwriting of @file{f2c.h}\n-and @file{libf2c.a}\n-as used by @code{f2c}, you have a recent and properly configured version of\n-@file{bin/f2c} so that it generates code that is compatible with @code{g77}.\n-\n-@pindex f2c-exists-ok\n-@vindex F2CLIBOK\n-If you don't want installation of @code{g77} to overwrite @code{f2c}'s existing\n-installation, but you do want @code{g77} installation to proceed with\n-installation of its own versions of @file{f2c.h} and @file{libf2c.a} in places\n-where @code{g77} will pick them up (even when linking @code{f2c}-compiled\n-object files---which might lead to incompatibilities), create\n-the file @file{f2c-exists-ok} (e.g. via the UNIX command\n-@samp{touch f2c-exists-ok}) in the source or build top-level directory,\n-or edit @file{gcc/f/Make-lang.in} and change the definition of the\n-@samp{F2CLIBOK} macro appropriately.\n-\n-@node Patching GNU Fortran\n-@subsection Patching GNU Fortran\n-\n-If you're using a SunOS4 system, you'll need to make the following\n-change to @file{gcc/f/proj.h}: edit the line reading\n-\n-@example\n-#define FFEPROJ_STRTOUL 1  @dots{}\n-@end example\n-\n-@noindent\n-by replacing the @samp{1} with @samp{0}.\n-Or, you can avoid editing the source by adding\n-@example\n-CFLAGS='-DFFEPROJ_STRTOUL=0 -g -O'\n-@end example\n-to the command line for @code{make} when you invoke it.\n-(@samp{-g} is the default for @samp{CFLAGS}.)\n-\n-This causes a minimal version of @code{strtoul()} provided\n-as part of the @code{g77} distribution to be compiled and\n-linked into whatever @code{g77} programs need it, since\n-some systems (like SunOS4 with only the bundled compiler and its\n-runtime) do not provide this function in their system libraries.\n-\n-Similarly, a minimal version of @code{bsearch()} is available\n-and can be enabled by editing a line similar to the one\n-for @code{strtoul()} above in @file{gcc/f/proj.h}, if\n-your system libraries lack @code{bsearch()}.\n-The method of overriding @samp{X_CFLAGS} may also be used.\n-\n-These are not problems with @code{g77}, which requires an\n-ANSI C environment.\n-You should upgrade your system to one that provides\n-a full ANSI C environment, or encourage the maintainers\n-of @code{gcc} to provide one to all @code{gcc}-based\n-compilers in future @code{gcc} distributions.\n-\n-@xref{Problems Installing}, for more information on\n-why @code{strtoul()} comes up missing and on approaches\n-to dealing with this problem that have already been tried.\n+@c @pindex config-lang.in\n+@c @emph{Note:} @code{g77}'s configuration file @file{gcc/f/config-lang.in}\n+@c sometimes ensures that the source code for the version of @code{gcc}\n+@c being configured has at least one indication of being an appropriate\n+@c version as required specifically by @code{g77}.\n+@c This configuration-time\n+@c checking should catch failures to use the proper version of @code{gcc} and,\n+@c if so caught, should abort the configuration with an explanation.\n+@c @emph{Please} do not try to disable this check,\n+@c otherwise @code{g77} might well appear to build\n+@c and install correctly, and even appear to compile correctly,\n+@c but could easily produce broken code.\n \n @node Where to Install\n @subsection Where in the World Does Fortran (and GNU CC) Go?\n@@ -1472,8 +1319,8 @@ binaries to be installed after they're built,\n because this information is given to the configuration\n tool and used during the build itself.\n \n-A @code{g77} installation necessarily requires installation of\n-a @code{g77}-aware version of @code{gcc}, so that the @code{gcc}\n+A @code{g77} installation normally includes installation of\n+a Fortran-aware version of @code{gcc}, so that the @code{gcc}\n command recognizes Fortran source files and knows how to compile\n them.\n \n@@ -1484,23 +1331,29 @@ version of @code{gcc} on the system.\n Sometimes people make the mistake of installing @code{gcc} as\n @file{/usr/local/bin/gcc},\n leaving an older, non-Fortran-aware version in @file{/usr/bin/gcc}.\n-(Or, the opposite happens.)@ \n-This can result in @code{g77} being unable to compile Fortran\n-source files, because when it calls on @code{gcc} to do the\n-actual compilation, @code{gcc} complains that it does not\n+(Or, the opposite happens.)\n+This can result in @code{gcc} being unable to compile Fortran\n+source files,\n+because when the older version of @code{gcc} is invoked,\n+it complains that it does not\n recognize the language, or the file name suffix.\n \n So, determine whether @code{gcc} already is installed on your system,\n and, if so, @emph{where} it is installed, and prepare to configure the\n new version of @code{gcc} you'll be building so that it installs\n over the existing version of @code{gcc}.\n \n-You might want to back up your existing copy of @file{bin/gcc}, and\n-the entire @file{lib/} directory, before\n+You might want to back up your existing copy of @file{/usr/bin/gcc}, and\n+the entire @file{/usr/lib} directory, before\n you perform the actual installation (as described in this manual).\n \n Existing @code{gcc} installations typically are\n found in @file{/usr} or @file{/usr/local}.\n+(This means the commands are installed in @file{/usr/bin} or\n+@file{/usr/local/bin},\n+the libraries in @file{/usr/lib} or @file{/usr/local/lib},\n+and so on.)\n+\n If you aren't certain where the currently\n installed version of @code{gcc} and its\n related programs reside, look at the output\n@@ -1528,7 +1381,9 @@ a good idea.\n though in this case it is intentional that @code{g77} overwrites\n @code{gcc} if it is already installed---it is unusual that\n the installation process for one distribution intentionally\n-overwrites a program or file installed by another distribution.)\n+overwrites a program or file installed by another distribution,\n+although, in this case, @code{g77} is an augmentation of the\n+@code{gcc} distribution.)\n \n Another reason to back up the existing version first,\n or make sure you can restore it easily, is that it might be\n@@ -1549,14 +1404,14 @@ option of @code{gcc}.\n @code{gcc}.\n There are two parts of @code{g77} that are configured in two\n different ways---@code{g77}, which ``camps on'' to the\n-@code{gcc} configuration mechanism, and @code{libf2c}, which\n+@code{gcc} configuration mechanism, and @code{libg2c}, which\n uses a variation of the GNU @code{autoconf} configuration\n system.\n \n Generally, you shouldn't have to be concerned with\n-either @code{g77} or @code{libf2c} configuration, unless\n+either @code{g77} or @code{libg2c} configuration, unless\n you're configuring @code{g77} as a cross-compiler.\n-In this case, the @code{libf2c} configuration, and possibly the\n+In this case, the @code{libg2c} configuration, and possibly the\n @code{g77} and @code{gcc} configurations as well,\n might need special attention.\n (This also might be the case if you're porting @code{gcc} to\n@@ -1570,22 +1425,31 @@ Pay special attention to the @samp{--prefix=} option, which\n you almost certainly will need to specify.\n \n (Note that @code{gcc} installation information is provided\n-as a straight text file in @file{gcc/INSTALL}.)\n+as a plain-text file in @file{gcc/INSTALL}.)\n \n The information printed by the invocation of @file{./configure}\n should show that the @file{f} directory (the Fortran language)\n has been configured.\n If it does not, there is a problem.\n \n-@emph{Note:} Configuring with the @samp{--srcdir} argument is known\n-to work with GNU @code{make}, but it is not known to work with\n-other variants of @code{make}.\n+@emph{Note:} Configuring with the @samp{--srcdir} argument,\n+or by starting in an empty directory\n+and typing a command such as @kbd{../gcc/configure} to\n+build with separate build and source directories,\n+is known to work with GNU @code{make},\n+but it is known to not work with other variants of @code{make}.\n Irix5.2 and SunOS4.1 versions of @code{make} definitely\n won't work outside the source directory at present.\n-@code{g77}'s\n-portion of the @file{configure} script issues a warning message\n-about this when you configure for building binaries outside\n-the source directory.\n+\n+@code{g77}'s portion of the @file{configure} script\n+used to issue a warning message about this\n+when configuring for building binaries outside the source directory,\n+but no longer does this as of version 0.5.23.\n+\n+Instead, @code{g77} simply rejects most common attempts\n+to build it using a non-GNU @code{make} when the\n+build directory is not the same as the source directory,\n+issuing an explanatory diagnostic.\n \n @node Building gcc\n @subsection Building GNU CC\n@@ -1604,14 +1468,14 @@ removing @samp{c} or @samp{f77} from the definition of the\n @samp{LANGUAGES} macro.\n \n After configuring @code{gcc}, which configures @code{g77} and\n-@code{libf2c} automatically, you're ready to start the actual\n+@code{libg2c} automatically, you're ready to start the actual\n build by invoking @code{make}.\n \n @pindex configure\n-@emph{Note:} You @strong{must} have run @file{./configure}\n-before you run @code{make}, even if you're\n-using an already existing @code{gcc} development directory, because\n-@file{./configure} does the work to recognize that you've added\n+@emph{Note:} You @strong{must} have run the @file{configure}\n+script in @code{gcc} before you run @code{make},\n+even if you're using an already existing @code{gcc} development directory,\n+because @file{./configure} does the work to recognize that you've added\n @code{g77} to the configuration.\n \n There are two general approaches to building GNU CC from\n@@ -1707,13 +1571,6 @@ command:\n make -k CC=gcc\n @end example\n \n-(The @samp{g77} target is necessary because the @code{gcc}\n-build procedures apparently do not automatically build\n-command drivers for languages in subdirectories.\n-It's the @samp{all} target that triggers building\n-everything except, apparently, the @code{g77} command\n-itself.)\n-\n If you run into problems using this method, you have\n two options:\n \n@@ -1734,6 +1591,7 @@ However, understand that many problems preventing a\n straight build from working are not @code{g77} problems,\n and, in such cases, are not likely to be addressed in\n future versions of @code{g77}.\n+Consider treating them as @code{gcc} bugs instead.\n \n @node Pre-installation Checks\n @subsection Pre-installation Checks\n@@ -1749,52 +1607,51 @@ printed by them when they work:\n \n @example\n sh# @kbd{cd /usr/src/gcc}\n-sh# @kbd{./g77 --driver=./xgcc -B./ -v}\n-g77 version 0.5.21\n- ./xgcc -B./ -v -fnull-version -o /tmp/gfa18047 @dots{}\n+sh# @kbd{./g77 -B./ -v}\n+g77 version @value{version-g77}\n+Driving: ./g77 -B./ -v -c -xf77-version /dev/null -xnone\n Reading specs from ./specs\n-gcc version 2.7.2.3.f.1\n- ./cpp -lang-c -v -isystem ./include -undef @dots{}\n-GNU CPP version 2.7.2.3.f.1 (Linux/Alpha)\n+gcc version @value{version-gcc}\n+ cpp -lang-c -v -isystem ./include -undef -D__GNUC__=2 @dots{}\n+GNU CPP version @value{version-gcc} (Alpha GNU/Linux with ELF)\n #include \"...\" search starts here:\n #include <...> search starts here:\n- ./include\n- /usr/local/include\n- /usr/alpha-unknown-linux/include\n- /usr/lib/gcc-lib/alpha-unknown-linux/2.7.2.3.f.1/include\n+ include\n+ /usr/alpha-linux/include\n+ /usr/lib/gcc-lib/alpha-linux/@value{version-gcc}/include\n  /usr/include\n End of search list.\n- ./f771 /tmp/cca18048.i -fset-g77-defaults -quiet -dumpbase @dots{}\n-GNU F77 version 2.7.2.3.f.1 (Linux/Alpha) compiled @dots{}\n-GNU Fortran Front End version 0.5.21 compiled: @dots{}\n- as -nocpp -o /tmp/cca180481.o /tmp/cca18048.s\n- ld -G 8 -O1 -o /tmp/gfa18047 /usr/lib/crt0.o -L. @dots{}\n-__G77_LIBF77_VERSION__: 0.5.21\n-@@(#)LIBF77 VERSION 19970404\n-__G77_LIBI77_VERSION__: 0.5.21\n-@@(#) LIBI77 VERSION pjw,dmg-mods 19970816\n-__G77_LIBU77_VERSION__: 0.5.21\n-@@(#) LIBU77 VERSION 19970609\n+ ./f771 -fnull-version -quiet -dumpbase g77-version.f -version @dots{}\n+GNU F77 version @value{version-gcc} (alpha-linux) compiled @dots{}\n+GNU Fortran Front End version @value{version-g77}\n+ as -nocpp -o /tmp/cca14485.o /tmp/cca14485.s\n+ ld -m elf64alpha -G 8 -O1 -dynamic-linker /lib/ld-linux.so.2 @dots{}\n+ /tmp/cca14485\n+__G77_LIBF77_VERSION__: @value{version-g77}\n+@@(#)LIBF77 VERSION 19970919\n+__G77_LIBI77_VERSION__: @value{version-g77}\n+@@(#) LIBI77 VERSION pjw,dmg-mods 19980405\n+__G77_LIBU77_VERSION__: @value{version-g77}\n+@@(#) LIBU77 VERSION 19970919\n sh# @kbd{./xgcc -B./ -v -o /tmp/delete-me -xc /dev/null -xnone}\n Reading specs from ./specs\n-gcc version 2.7.2.3.f.1\n+gcc version @value{version-gcc}\n  ./cpp -lang-c -v -isystem ./include -undef @dots{}\n-GNU CPP version 2.7.2.3.f.1 (Linux/Alpha)\n+GNU CPP version @value{version-gcc} (Alpha GNU/Linux with ELF)\n #include \"...\" search starts here:\n #include <...> search starts here:\n- ./include\n- /usr/local/include\n- /usr/alpha-unknown-linux/include\n- /usr/lib/gcc-lib/alpha-unknown-linux/2.7.2.3.f.1/include\n+ include\n+ /usr/alpha-linux/include\n+ /usr/lib/gcc-lib/alpha-linux/@value{version-gcc}/include\n  /usr/include\n End of search list.\n  ./cc1 /tmp/cca18063.i -quiet -dumpbase null.c -version @dots{}\n-GNU C version 2.7.2.3.f.1 (Linux/Alpha) compiled @dots{}\n+GNU C version @value{version-gcc} (alpha-linux) compiled @dots{}\n  as -nocpp -o /tmp/cca180631.o /tmp/cca18063.s\n- ld -G 8 -O1 -o /tmp/delete-me /usr/lib/crt0.o -L. @dots{}\n-/usr/lib/crt0.o: In function `__start':\n-crt0.S:110: undefined reference to `main'\n-/usr/lib/crt0.o(.lita+0x28): undefined reference to `main'\n+ ld -m elf64alpha -G 8 -O1 -dynamic-linker /lib/ld-linux.so.2 @dots{}\n+/usr/lib/crt1.o: In function `_start':\n+../sysdeps/alpha/elf/start.S:77: undefined reference to `main'\n+../sysdeps/alpha/elf/start.S:77: undefined reference to `main'\n sh#\n @end example\n \n@@ -1823,7 +1680,7 @@ and @code{g77}, use the following commands to invoke them.\n To invoke @code{g77}, type:\n \n @example\n-/usr/src/gcc/g77 --driver=/usr/src/gcc/xgcc -B/usr/src/gcc/ @dots{}\n+/usr/src/gcc/g77 -B/usr/src/gcc/ @dots{}\n @end example\n \n To invoke @code{gcc}, type:\n@@ -1858,11 +1715,11 @@ supply the same definitions you used when building\n the final stage) or if you deviated from the\n instructions for a straight build.\n \n-If the above command does not install @file{libf2c.a}\n+If the above command does not install @file{libg2c.a}\n as expected, try this:\n \n @example\n-make -k @dots{} install install-libf77 install-f2c-all\n+make -k @dots{} install install-libf77\n @end example\n \n We don't know why some non-GNU versions of @code{make} sometimes\n@@ -1875,6 +1732,16 @@ continue after some installation problems, like not having\n @code{makeinfo} installed on your system.\n It might not be necessary for your system.\n \n+@emph{Note:} @code{g77} no longer installs\n+files not directly part of @code{g77},\n+such as @file{/usr/bin/f77}, @file{/usr/lib/libf2c.a},\n+and @file{/usr/include/f2c.h}, or their\n+@file{/usr/local} equivalents.\n+\n+@xref{Distributing Binaries}, for information on\n+how to accommodate systems with no existing non-@code{g77}\n+@code{f77} compiler and systems with @code{f2c} installed.\n+\n @node Updating Documentation\n @subsection Updating Your Info Directory\n @cindex updating info directory\n@@ -1887,86 +1754,211 @@ It might not be necessary for your system.\n \n As part of installing @code{g77}, you should make sure users\n of @code{info} can easily access this manual on-line.\n-Do this by making sure a line such as the following exists\n-in @file{/usr/info/dir}, or in whatever file is the top-level\n-file in the @code{info} directory on your system (perhaps\n-@file{/usr/local/info/dir}:\n \n-@example\n-* g77: (g77).           The GNU Fortran programming language.\n-@end example\n-\n-If the menu in @file{dir} is organized into sections, @code{g77}\n-probably belongs in a section with a name such as one of\n-the following:\n+@code{g77} does this automatically by\n+invoking the @code{install-info} command\n+when you use @samp{make install} to install @code{g77}.\n+\n+If that fails, or if the @code{info} directory\n+it updates is not the one normally accessed by users,\n+consider invoking it yourself.\n+For example:\n+\n+@smallexample\n+install-info --info-dir=/usr/info /usr/info/g77.info\n+@end smallexample\n+\n+The above example assumes the @code{g77} documentation\n+already is installed in @file{/usr/info}\n+and that @file{/usr/info/dir} is the file\n+you wish to update.\n+Adjust the command accordingly,\n+if those assumptions are wrong.\n+\n+@node Missing tools?\n+@subsection Missing tools?\n+@cindex command missing\n+@cindex command not found\n+@cindex file not found\n+@cindex not found\n+\n+A build of @code{gcc} might fail due to one or more tools\n+being called upon by @code{make}\n+(during the build or install process),\n+when those tools are not installed on your system.\n+\n+This situation can result from any of the following actions\n+(performed by you or someone else):\n \n @itemize @bullet\n @item\n-Fortran Programming\n+Changing the source code or documentation yourself\n+(as a developer or technical writer).\n \n @item\n-Writing Programs\n+Applying a patch that changes the source code or documentation\n+(including, sometimes, the official patches distributed by\n+the FSF).\n \n @item\n-Programming Languages\n+Deleting the files that are created by the (missing) tools.\n \n-@item\n-Languages Other Than C\n+The @samp{make maintainer-clean} command is supposed\n+to delete these files, so invoking this command without\n+having all the appropriate tools installed is not recommended.\n \n @item\n-Scientific/Engineering Tools\n+Creating the source directory using a method that\n+does not preserve the date-time-modified information\n+in the original distribution.\n \n-@item\n-GNU Compilers\n+For example, the UNIX @samp{cp -r} command copies a\n+directory tree without preserving the date-time-modified\n+information.\n+Use @samp{cp -pr} instead.\n @end itemize\n \n+The reason these activities cause @code{make} to try and\n+invoke tools that it probably wouldn't when building\n+from a perfectly ``clean'' source directory containing\n+@code{gcc} and @code{g77} is that some files in the\n+source directory (and the corresponding distribution)\n+aren't really source files, but @emph{derived} files\n+that are produced by running tools with the corresponding\n+source files as input.\n+These derived files @dfn{depend}, in @code{make} terminology,\n+on the corresponding source files.\n+\n+@code{make} determines that a file that depends on another\n+needs to be updated if the date-time-modified information for\n+the source file shows that it is newer than the corresponding\n+information for the derived file.\n+\n+If it makes that determination, @code{make} runs the appropriate\n+commands (specified in the ``Makefile'') to update the\n+derived file, and this process typically calls upon one or\n+more installed tools to do the work.\n+\n+The ``safest'' approach to dealing with this situation\n+is to recreate the @code{gcc} and @code{g77} source\n+directories from complete @code{gcc} and @code{g77} distributions\n+known to be provided by the FSF.\n+\n+Another fairly ``safe'' approach is to simply install\n+the tools you need to complete the build process.\n+This is especially appropriate if you've changed the\n+source code or applied a patch to do so.\n+\n+However, if you're certain that the problem is limited\n+entirely to incorrect date-time-modified information,\n+that there are no discrepancies between the contents of\n+source files and files derived from them in the source\n+directory, you can often update the date-time-modified\n+information for the derived files to work around the\n+problem of not having the appropriate tools installed.\n+\n+On UNIX systems, the simplest way to update the date-time-modified\n+information of a file is to use the use the @samp{touch}\n+command.\n+\n+How to use @samp{touch} to update the derived files\n+updated by each of the tools is described below.\n+@emph{Note:} New versions of @code{g77} might change the set of\n+files it generates by invoking each of these tools.\n+If you cannot figure\n+out for yourself how to handle such a situation, try an\n+older version of @code{g77} until you find someone who can\n+(or until you obtain and install the relevant tools).\n+\n+@menu\n+* autoconf: Missing autoconf?.\n+* bison: Missing bison?.\n+* gperf: Missing gperf?.\n+* makeinfo: Missing makeinfo?.\n+@end menu\n+\n+@node Missing autoconf?\n+@subsubsection Missing @code{autoconf}?\n+@cindex @code{autoconf}\n+@cindex missing @code{autoconf}\n+\n+If you cannot install @code{autoconf}, make sure you have started\n+with a @emph{fresh} distribution of @code{gcc} and @code{g77},\n+do @emph{not} do @samp{make maintainer-clean}, and, to ensure that\n+@code{autoconf} is not invoked by @code{make} during the build,\n+type these commands:\n+\n+@example\n+sh# @kbd{cd gcc/f/runtime}\n+sh# @kbd{touch configure libU77/configure}\n+sh# @kbd{cd ../../..}\n+sh#\n+@end example\n+\n @node Missing bison?\n-@subsection Missing @code{bison}?\n+@subsubsection Missing @code{bison}?\n @cindex @code{bison}\n @cindex missing @code{bison}\n \n If you cannot install @code{bison}, make sure you have started\n with a @emph{fresh} distribution of @code{gcc}, do @emph{not}\n-do @samp{make maintainer-clean} (in other versions of @code{gcc},\n-this was called @samp{make realclean}), and, to ensure that\n+do @samp{make maintainer-clean}, and, to ensure that\n @code{bison} is not invoked by @code{make} during the build,\n type these commands:\n \n @example\n sh# @kbd{cd gcc}\n-sh# @kbd{touch c-parse.c c-parse.h cexp.c}\n+sh# @kbd{touch bi-parser.c bi-parser.h c-parse.c c-parse.h cexp.c}\n sh# @kbd{touch cp/parse.c cp/parse.h objc-parse.c}\n+sh# @kbd{cd ..}\n sh#\n @end example\n \n-These commands update the date-time-modified information for\n-all the files produced by the various invocations of @code{bison}\n-in the current versions of @code{gcc}, so that @code{make} no\n-longer believes it needs to update them.\n-All of these files should already exist in a @code{gcc}\n-distribution, but the application of patches to upgrade\n-to a newer version can leave the modification information\n-set such that the @code{bison} input files look more ``recent''\n-than the corresponding output files.\n-\n-@emph{Note:} New versions of @code{gcc} might change the set of\n-files it generates by invoking @code{bison}---if you cannot figure\n-out for yourself how to handle such a situation, try an\n-older version of @code{gcc} until you find someone who can\n-(or until you obtain and install @code{bison}).\n+@node Missing gperf?\n+@subsubsection Missing @code{gperf}?\n+@cindex @code{gperf}\n+@cindex missing @code{gperf}\n+\n+If you cannot install @code{gperf}, make sure you have started\n+with a @emph{fresh} distribution of @code{gcc}, do @emph{not}\n+do @samp{make maintainer-clean}, and, to ensure that\n+@code{gperf} is not invoked by @code{make} during the build,\n+type these commands:\n+\n+@example\n+sh# @kbd{cd gcc}\n+sh# @kbd{touch c-gperf.h}\n+sh# @kbd{cd ..}\n+sh#\n+@end example\n \n @node Missing makeinfo?\n-@subsection Missing @code{makeinfo}?\n+@subsubsection Missing @code{makeinfo}?\n @cindex @code{makeinfo}\n @cindex missing @code{makeinfo}\n+@cindex @code{libg2c.a} not found\n+@cindex missing @code{libg2c.a}\n+\n+If @code{makeinfo} is needed but unavailable\n+when installing (via @code{make install}),\n+some files, like @file{libg2c.a},\n+might not be installed,\n+because once @code{make} determines that it cannot\n+invoke @code{makeinfo}, it cancels any further processing.\n \n-If you cannot install @code{makeinfo}, either use the @code{-k} option when\n-invoking make to specify any of the @samp{install} or related targets,\n-or specify @samp{MAKEINFO=echo} on the @code{make} command line.\n+If you cannot install @code{makeinfo}, an easy work-around is to\n+specify @samp{MAKEINFO=true} on the @code{make} command line,\n+or to specify the @samp{-k} option (@kbd{make -k install}).\n \n-If you fail to do one of these things, some files, like @file{libf2c.a},\n-might not be installed, because the failed attempt by @code{make} to\n-invoke @code{makeinfo} causes it to cancel any further processing.\n+Another approach is to force the relevant files to be up-to-date\n+by typing these commands and then re-trying the installation step:\n+\n+@example\n+sh# @kbd{cd gcc}\n+sh# @kbd{touch f/g77.info f/BUGS f/INSTALL f/NEWS}\n+sh# @kbd{cd ..}\n+sh#\n+@end example\n \n @node Distributing Binaries\n @section Distributing Binaries\n@@ -1987,37 +1979,87 @@ where @code{g77} could be considered the native compiler for Fortran and\n in @file{/usr/bin} instead of @file{/usr/local/bin}.\n Specify the\n @samp{--prefix=/usr} option when running @file{./configure}.\n-You might\n-also want to set up the distribution so the @code{f77} command is a\n-link to @code{g77}---just make an empty file named @file{f77-install-ok} in\n-the source or build directory (the one in which the @file{f} directory\n-resides, not the @file{f} directory itself) when you specify one of the\n-@file{install} or @file{uninstall} targets in a @code{make} command.\n-\n-For a system that might already have @code{f2c} installed, you definitely\n-will want to make another empty file (in the same directory) named\n-either @file{f2c-exists-ok} or @file{f2c-install-ok}.\n-Use the former if you\n-don't want your distribution to overwrite @code{f2c}-related files in existing\n-systems; use the latter if you want to improve the likelihood that\n-users will be able to use both @code{f2c} and @code{g77} to compile code for a\n-single program without encountering link-time or run-time\n-incompatibilities.\n-\n-(Make sure you clearly document, in the ``advertising'' for\n+\n+You might also want to set up the distribution\n+so the @file{f77} command is a link to @file{g77},\n+although a script that accepts ``classic'' UNIX @code{f77}\n+options and translates the command-line to the\n+appropriate @code{g77} command line would be more appropriate.\n+If you do this, @emph{please} also provide a ``man page'' in\n+@file{man/man1/f77.1} describing the command.\n+(A link to @file{man/man1/g77.1} is appropriate\n+if @file{bin/f77} is a link to @file{bin/g77}.)\n+\n+For a system that might already have @code{f2c} installed,\n+consider whether inter-operation with @code{g77} will be\n+important to users of @code{f2c} on that system.\n+If you want to improve the likelihood\n+that users will be able to use both @code{f2c} and @code{g77}\n+to compile code for a single program\n+without encountering link-time or run-time incompatibilities,\n+make sure that,\n+whenever they intend to combine @code{f2c}-produced code\n+with @code{g77}-produced code in an executable, they:\n+\n+@itemize @bullet\n+@item\n+Use the @file{lib/gcc-lib/@dots{}/include/g2c.h} file\n+generated by the @code{g77} build\n+in place of the @file{f2c.h} file\n+that normally comes with @code{f2c}\n+(or versions of @code{g77} prior to 0.5.23)\n+when compiling @emph{all} of the @code{f2c}-produced C code\n+\n+@item\n+Link to the @code{lib/gcc-lib/@dots{}/libg2c.a} library\n+built by the @code{g77} build\n+instead of the @file{libf2c.a} library\n+that normally comes with @code{f2c}\n+(or versions of @code{g77} prior to 0.5.23)\n+@end itemize\n+\n+How you choose to effect the above depends on whether\n+the existing installation of @code{f2c} must be\n+maintained.\n+\n+In any case, it is important to try and ensure that\n+the installation keeps working properly even after\n+subsequent re-installation of @code{f2c},\n+which probably involves overwriting\n+@file{/usr/local/lib/libf2c.a} and\n+@file{/usr/local/include/f2c.h},\n+or similar.\n+\n+At least, copying @file{libg2c.a} and @file{g2c.h} into\n+the appropriate ``public'' directories\n+allows users to more easily select the version of\n+@code{libf2c} they wish to use for a particular\n+build.\n+The names are changed by @code{g77} to make this\n+coexistence easier to maintain;\n+even if @code{f2c} is installed later,\n+the @code{g77} files normally installed\n+by its installation process aren't disturbed.\n+Use of symbolic links from one set of files to\n+another might result in problems after a subsequent\n+reinstallation of either @code{f2c} or @code{g77},\n+so be sure to alert users of your distribution\n+accordingly.\n+\n+(Make sure you clearly document, in the description of\n your distribution, how installation of your distribution will\n affect existing installations of @code{gcc}, @code{f2c},\n @code{f77}, @file{libf2c.a}, and so on.\n Similarly, you should clearly document any requirements\n-you assume are met by users of your distribution.)\n+you assume will be met by users of your distribution.)\n \n For other systems with native @code{f77} (and @code{cc}) compilers,\n configure @code{g77} as you (or most of your audience) would\n configure @code{gcc} for their installations.\n-Typically this is for installation in\n-@file{/usr/local}, and would not include a copy of\n-@code{g77} named @code{f77}, so\n-users could still use the native @code{f77}.\n+Typically this is for installation in @file{/usr/local},\n+and would not include a new version of @file{/usr/bin/f77}\n+or @file{/usr/local/bin/f77},\n+so users could still use the native @code{f77}.\n \n In any case, for @code{g77} to work properly, you @strong{must} ensure\n that the binaries you distribute include:\n@@ -2027,20 +2069,14 @@ that the binaries you distribute include:\n This is the command most users use to compile Fortran.\n \n @item bin/gcc\n-This is the command all users use to compile Fortran, either\n-directly or indirectly via the @code{g77} command.\n+This is the command some users use to compile Fortran,\n+typically when compiling programs written in other languages\n+at the same time.\n The @file{bin/gcc} executable file must have been built\n from a @code{gcc} source tree into which a @code{g77} source\n tree was merged and configured, or it will not know how\n to compile Fortran programs.\n \n-@item bin/f77\n-In installations with no non-GNU native Fortran\n-compiler, this is the same as @file{bin/g77}.\n-Otherwise, it should be omitted from the distribution,\n-so the one on already on a particular system does\n-not get overwritten.\n-\n @item info/g77.info*\n This is the documentation for @code{g77}.\n If it is not included, users will have trouble understanding\n@@ -2063,42 +2099,45 @@ easily.\n \n @item man/man1/g77.1\n This is the short man page for @code{g77}.\n-It is out of date, but you might as well include it\n-for people who really like man pages.\n+It is not always kept up-to-date,\n+but you might as well include it\n+for people who really like ``man'' pages.\n \n-@item man/man1/f77.1\n-In installations where @code{f77} is the same as @code{g77},\n-this is the same as @file{man/man1/g77.1}.\n-Otherwise, it should be omitted from the distribution,\n-so the one already on a particular system does not\n-get overwritten.\n+@cindex gcc-lib directory\n+@cindex directories, gcc-lib\n+@item lib/gcc-lib\n+This is the directory containing the ``private'' files\n+installed by and for @code{gcc}, @code{g77}, @code{g++},\n+and other GNU compilers.\n \n @item lib/gcc-lib/@dots{}/f771\n This is the actual Fortran compiler.\n \n-@item lib/gcc-lib/@dots{}/libf2c.a\n+@item lib/gcc-lib/@dots{}/libg2c.a\n This is the run-time library for @code{g77}-compiled programs.\n @end table\n \n Whether you want to include the slightly updated (and possibly\n-improved) versions of @code{cc1}, @code{cc1plus}, and whatever other\n+improved) versions of @file{cc1}, @file{cc1plus}, and whatever other\n binaries get rebuilt with the changes the GNU Fortran distribution\n makes to the GNU back end, is up to you.\n-These changes are\n-highly unlikely to break any compilers, and it is possible\n-they'll fix back-end bugs that can be demonstrated using front\n-ends other than GNU Fortran's.\n+These changes are highly unlikely to break any compilers,\n+because they involve doing things like adding to the\n+list of acceptable compiler options\n+(so, for example, @file{cc1plus} accepts, and ignores,\n+options that only @file{f771} actually processes).\n \n Please assure users that unless\n they have a specific need for their existing,\n-older versions of @code{gcc} command,\n+older versions of @file{gcc} command,\n they are unlikely to experience any problems by overwriting\n it with your version---though they could certainly protect\n themselves by making backup copies first!\n+\n Otherwise, users might try and install your binaries\n in a ``safe'' place, find they cannot compile Fortran\n programs with your distribution (because, perhaps, they're\n-picking up their old version of the @code{gcc} command,\n+invoking their old version of the @file{gcc} command,\n which does not recognize Fortran programs), and assume\n that your binaries (or, more generally, GNU Fortran\n distributions in general) are broken, at least for their"}, {"sha": "92d9e9a580b0879c3203bd7761adaba9634b81a3", "filename": "gcc/f/g77spec.c", "status": "modified", "additions": 473, "deletions": 182, "changes": 655, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fg77spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fg77spec.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -18,6 +18,32 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n+/* This file contains a filter for the main `gcc' driver, which is\n+   replicated for the `g77' driver by adding this filter.  The purpose\n+   of this filter is to be basically identical to gcc (in that\n+   it faithfully passes all of the original arguments to gcc) but,\n+   unless explicitly overridden by the user in certain ways, ensure\n+   that the needs of the language supported by this wrapper are met.\n+\n+   For GNU Fortran (g77), we do the following to the argument list\n+   before passing it to `gcc':\n+\n+   1.  Make sure `-lg2c -lm' is at the end of the list.\n+\n+   2.  Make sure each time `-lg2c' or `-lm' is seen, it forms\n+       part of the series `-lg2c -lm'.\n+\n+   #1 and #2 are not done if `-nostdlib' or any option that disables\n+   the linking phase is present, or if `-xfoo' is in effect.  Note that\n+   a lack of source files or -l options disables linking.\n+\n+   This program was originally made out of gcc/cp/g++spec.c, but the\n+   way it builds the new argument list was rewritten so it is much\n+   easier to maintain, improve the way it decides to add or not add\n+   extra arguments, etc.  And several improvements were made in the\n+   handling of arguments, primarily to make it more consistent with\n+   `gcc' itself.  */\n+\n #include \"config.h\"\n \n #include <sys/types.h>\n@@ -33,251 +59,516 @@ Boston, MA 02111-1307, USA.  */\n #include <string.h>\n #endif\n \n-/* This bit is set if we saw a `-xfoo' language specification.  */\n-#define LANGSPEC\t(1<<1)\n-/* This bit is set if they did `-lm' or `-lmath'.  */\n-#define MATHLIB\t\t(1<<2)\n-/* This bit is set if they did `-lc'.  */\n-#define WITHLIBC\t(1<<3)\n+#include <f/version.h>\n \n #ifndef MATH_LIBRARY\n #define MATH_LIBRARY \"-lm\"\n #endif\n \n #ifndef FORTRAN_LIBRARY\n-#define FORTRAN_LIBRARY \"-lf2c\"\n+#define FORTRAN_LIBRARY \"-lg2c\"\n #endif\n \n+/* Options this driver needs to recognize, not just know how to\n+   skip over.  */\n+typedef enum\n+{\n+  OPTION_b,\t\t\t/* Aka --prefix. */\n+  OPTION_B,\t\t\t/* Aka --target. */\n+  OPTION_c,\t\t\t/* Aka --compile. */\n+  OPTION_driver,\t\t/* Wrapper-specific option. */\n+  OPTION_E,\t\t\t/* Aka --preprocess. */\n+  OPTION_help,\t\t\t/* --help. */\n+  OPTION_i,\t\t\t/* -imacros, -include, -include-*. */\n+  OPTION_l,\n+  OPTION_L,\t\t\t/* Aka --library-directory. */\n+  OPTION_M,\t\t\t/* Aka --dependencies. */\n+  OPTION_MM,\t\t\t/* Aka --user-dependencies. */\n+  OPTION_nostdlib,\t\t/* Aka --no-standard-libraries, or\n+\t\t\t\t   -nodefaultlibs. */\n+  OPTION_o,\t\t\t/* Aka --output. */\n+  OPTION_S,\t\t\t/* Aka --assemble. */\n+  OPTION_syntax_only,\t\t/* -fsyntax-only. */\n+  OPTION_v,\t\t\t/* Aka --verbose. */\n+  OPTION_version,\t\t/* --version. */\n+  OPTION_V,\t\t\t/* Aka --use-version. */\n+  OPTION_x,\t\t\t/* Aka --language. */\n+  OPTION_\t\t\t/* Unrecognized or unimportant. */\n+} Option;\n+\n+/* The original argument list and related info is copied here.  */\n+static int g77_xargc;\n+static char **g77_xargv;\n+static void (*g77_fn)();\n+\n+/* The new argument list will be built here.  */\n+static int g77_newargc;\n+static char **g77_newargv;\n+\n extern char *xmalloc PROTO((size_t));\n \n+/* --- This comes from gcc.c (2.8.1) verbatim: */\n+\n+/* This defines which switch letters take arguments.  */\n+\n+#define DEFAULT_SWITCH_TAKES_ARG(CHAR)      \\\n+  ((CHAR) == 'D' || (CHAR) == 'U' || (CHAR) == 'o' \\\n+   || (CHAR) == 'e' || (CHAR) == 'T' || (CHAR) == 'u' \\\n+   || (CHAR) == 'I' || (CHAR) == 'm' || (CHAR) == 'x' \\\n+   || (CHAR) == 'L' || (CHAR) == 'A')\n+\n+#ifndef SWITCH_TAKES_ARG\n+#define SWITCH_TAKES_ARG(CHAR) DEFAULT_SWITCH_TAKES_ARG(CHAR)\n+#endif\n+\n+/* This defines which multi-letter switches take arguments.  */\n+\n+#define DEFAULT_WORD_SWITCH_TAKES_ARG(STR)\t\t\\\n+ (!strcmp (STR, \"Tdata\") || !strcmp (STR, \"Ttext\")\t\\\n+  || !strcmp (STR, \"Tbss\") || !strcmp (STR, \"include\")\t\\\n+  || !strcmp (STR, \"imacros\") || !strcmp (STR, \"aux-info\") \\\n+  || !strcmp (STR, \"idirafter\") || !strcmp (STR, \"iprefix\") \\\n+  || !strcmp (STR, \"iwithprefix\") || !strcmp (STR, \"iwithprefixbefore\") \\\n+  || !strcmp (STR, \"isystem\") || !strcmp (STR, \"specs\"))\n+\n+#ifndef WORD_SWITCH_TAKES_ARG\n+#define WORD_SWITCH_TAKES_ARG(STR) DEFAULT_WORD_SWITCH_TAKES_ARG (STR)\n+#endif\n+\n+/* --- End of verbatim.  */\n+\n+/* Assumes text[0] == '-'.  Returns number of argv items that belong to\n+   (and follow) this one, an option id for options important to the\n+   caller, and a pointer to the first char of the arg, if embedded (else\n+   returns NULL, meaning no arg or it's the next argv).\n+\n+   Note that this also assumes gcc.c's pass converting long options\n+   to short ones, where available, has already been run.  */\n+\n+static void\n+lookup_option (xopt, xskip, xarg, text)\n+     Option *xopt;\n+     int *xskip;\n+     char **xarg;\n+     char *text;\n+{\n+  Option opt = OPTION_;\n+  int skip;\n+  char *arg = NULL;\n+\n+  if ((skip = SWITCH_TAKES_ARG (text[1])))\n+    skip -= (text[2] != '\\0');\t/* See gcc.c. */\n+\n+  if (text[1] == 'B')\n+    opt = OPTION_B, skip = (text[2] == '\\0'), arg = text + 2;\n+  else if (text[1] == 'b')\n+    opt = OPTION_b, skip = (text[2] == '\\0'), arg = text + 2;\n+  else if ((text[1] == 'c') && (text[2] == '\\0'))\n+    opt = OPTION_c, skip = 0;\n+  else if ((text[1] == 'E') && (text[2] == '\\0'))\n+    opt = OPTION_E, skip = 0;\n+  else if (text[1] == 'i')\n+    opt = OPTION_i, skip = 0;\n+  else if (text[1] == 'l')\n+    opt = OPTION_l;\n+  else if (text[1] == 'L')\n+    opt = OPTION_L, arg = text + 2;\n+  else if (text[1] == 'o')\n+    opt = OPTION_o;\n+  else if ((text[1] == 'S') && (text[2] == '\\0'))\n+    opt = OPTION_S, skip = 0;\n+  else if (text[1] == 'V')\n+    opt = OPTION_V, skip = (text[2] == '\\0');\n+  else if ((text[1] == 'v') && (text[2] == '\\0'))\n+    opt = OPTION_v, skip = 0;\n+  else if (text[1] == 'x')\n+    opt = OPTION_x, arg = text + 2;\n+  else\n+    {\n+      if ((skip = WORD_SWITCH_TAKES_ARG (text + 1)) != 0)  /* See gcc.c. */\n+\t;\n+      else if (! strncmp (text, \"-fdriver\", 8))  /* Really --driver!! */\n+\topt = OPTION_driver;\t/* Never mind arg, this is unsupported. */\n+      else if (! strcmp (text, \"-fhelp\"))  /* Really --help!! */\n+\topt = OPTION_help;\n+      else if (! strcmp (text, \"-M\"))\n+\topt = OPTION_M;\n+      else if (! strcmp (text, \"-MM\"))\n+\topt = OPTION_MM;\n+      else if (! strcmp (text, \"-nostdlib\")\n+\t       || ! strcmp (text, \"-nodefaultlibs\"))\n+\topt = OPTION_nostdlib;\n+      else if (! strcmp (text, \"-fsyntax-only\"))\n+\topt = OPTION_syntax_only;\n+      else if (! strcmp (text, \"-dumpversion\"))\n+\topt = OPTION_version;\n+      else if (! strcmp (text, \"-Xlinker\")\n+\t       || ! strcmp (text, \"-specs\"))\n+\tskip = 1;\n+      else\n+\tskip = 0;\n+    }\n+\n+  if (xopt != NULL)\n+    *xopt = opt;\n+  if (xskip != NULL)\n+    *xskip = skip;\n+  if (xarg != NULL)\n+    {\n+      if ((arg != NULL)\n+\t  && (arg[0] == '\\0'))\n+\t*xarg = NULL;\n+      else\n+\t*xarg = arg;\n+    }\n+}\n+\n+/* Append another argument to the list being built.  As long as it is\n+   identical to the corresponding arg in the original list, just increment\n+   the new arg count.  Otherwise allocate a new list, etc.  */\n+\n+static void\n+append_arg (arg)\n+     char *arg;\n+{\n+  static int newargsize;\n+\n+#if 0\n+  fprintf (stderr, \"`%s'\\n\", arg);\n+#endif\n+\n+  if (g77_newargv == g77_xargv\n+      && g77_newargc < g77_xargc\n+      && (arg == g77_xargv[g77_newargc]\n+\t  || ! strcmp (arg, g77_xargv[g77_newargc])))\n+    {\n+      ++g77_newargc;\n+      return;\t\t\t/* Nothing new here. */\n+    }\n+\n+  if (g77_newargv == g77_xargv)\n+    {\t\t\t\t/* Make new arglist. */\n+      int i;\n+\n+      newargsize = (g77_xargc << 2) + 20;\t/* This should handle all. */\n+      g77_newargv = (char **) xmalloc (newargsize * sizeof (char *));\n+\n+      /* Copy what has been done so far.  */\n+      for (i = 0; i < g77_newargc; ++i)\n+\tg77_newargv[i] = g77_xargv[i];\n+    }\n+\n+  if (g77_newargc == newargsize)\n+    (*g77_fn) (\"overflowed output arg list for `%s'\", arg);\n+\n+  g77_newargv[g77_newargc++] = arg;\n+}\n+\n void\n lang_specific_driver (fn, in_argc, in_argv, in_added_libraries)\n      void (*fn)();\n      int *in_argc;\n      char ***in_argv;\n      int *in_added_libraries;\n {\n-  int i, j;\n+  int argc = *in_argc;\n+  char **argv = *in_argv;\n+  int i;\n+  int verbose = 0;\n+  Option opt;\n+  int skip;\n+  char *arg;\n+\n+  /* This will be NULL if we encounter a situation where we should not\n+     link in libf2c.  */\n+  char *library = FORTRAN_LIBRARY;\n+\n+  /* This will become 0 if anything other than -v and kin (like -V)\n+     is seen, meaning the user is trying to accomplish something.\n+     If it remains nonzero, and the user wants version info, add stuff to\n+     the command line to make gcc invoke all the appropriate phases\n+     to get all the version info.  */\n+  int add_version_magic = 1;\n+\n+  /* 0 => -xnone in effect.\n+     1 => -xfoo in effect.  */\n+  int saw_speclang = 0;\n \n-  /* If non-zero, the user gave us the `-v' flag.  */ \n-  int saw_verbose_flag = 0;\n+  /* 0 => initial/reset state\n+     1 => last arg was -l<library>\n+     2 => last two args were -l<library> -lm.  */\n+  int saw_library = 0;\n \n-  /* This will be 0 if we encounter a situation where we should not\n-     link in libstdf77.  */\n-  int library = 1;\n+  /* The number of input and output files in the incoming arg list.  */\n+  int n_infiles = 0;\n+  int n_outfiles = 0;\n \n-  /* The number of arguments being added to what's in argv, other than\n-     libraries.  We use this to track the number of times we've inserted\n-     -xf77/-xnone.  */\n-  int added = 2;\n+#if 0\n+  fprintf (stderr, \"Incoming:\");\n+  for (i = 0; i < argc; i++)\n+    fprintf (stderr, \" %s\", argv[i]);\n+  fprintf (stderr, \"\\n\");\n+#endif\n \n-  /* Used to track options that take arguments, so we don't go wrapping\n-     those with -xf77/-xnone.  */\n-  char *quote = NULL;\n+  g77_xargc = argc;\n+  g77_xargv = argv;\n+  g77_newargc = 0;\n+  g77_newargv = argv;\n+  g77_fn = fn;\n \n-  /* The new argument list will be contained in this.  */\n-  char **arglist;\n+  /* First pass through arglist.\n \n-  /* Non-zero if we saw a `-xfoo' language specification on the\n-     command line.  Used to avoid adding our own -xf77 if the user\n-     already gave a language for the file.  */\n-  int saw_speclang = 0;\n+     If -nostdlib or a \"turn-off-linking\" option is anywhere in the\n+     command line, don't do any library-option processing (except\n+     relating to -x).  Also, if -v is specified, but no other options\n+     that do anything special (allowing -V version, etc.), remember\n+     to add special stuff to make gcc command actually invoke all\n+     the different phases of the compilation process so all the version\n+     numbers can be seen.\n \n-  /* \"-lm\" or \"-lmath\" if it appears on the command line.  */\n-  char *saw_math = 0;\n+     Also, here is where all problems with missing arguments to options\n+     are caught.  If this loop is exited normally, it means all options\n+     have the appropriate number of arguments as far as the rest of this\n+     program is concerned.  */\n \n-  /* \"-lc\" if it appears on the command line.  */\n-  char *saw_libc = 0;\n+  for (i = 1; i < argc; ++i)\n+    {\n+      if ((argv[i][0] == '+') && (argv[i][1] == 'e'))\n+\t{\n+\t  add_version_magic = 0;\n+\t  continue;\n+\t}\n \n-  /* An array used to flag each argument that needs a bit set for\n-     LANGSPEC, MATHLIB, or WITHLIBC.  */\n-  int *args;\n+      if ((argv[i][0] != '-') || (argv[i][1] == '\\0'))\n+\t{\n+\t  ++n_infiles;\n+\t  add_version_magic = 0;\n+\t  continue;\n+\t}\n \n-  /* By default, we throw on the math library.  */\n-  int need_math = 1;\n+      lookup_option (&opt, &skip, NULL, argv[i]);\n \n-  /* The total number of arguments with the new stuff.  */\n-  int argc;\n+      switch (opt)\n+\t{\n+\tcase OPTION_nostdlib:\n+\tcase OPTION_c:\n+\tcase OPTION_S:\n+\tcase OPTION_syntax_only:\n+\tcase OPTION_E:\n+\tcase OPTION_M:\n+\tcase OPTION_MM:\n+\t  /* These options disable linking entirely or linking of the\n+\t     standard libraries.  */\n+\t  library = 0;\n+\t  add_version_magic = 0;\n+\t  break;\n+\n+\tcase OPTION_l:\n+\t  ++n_infiles;\n+\t  add_version_magic = 0;\n+\t  break;\n+\n+\tcase OPTION_o:\n+\t  ++n_outfiles;\n+\t  add_version_magic = 0;\n+\t  break;\n+\n+\tcase OPTION_v:\n+\t  if (! verbose)\n+\t    fprintf (stderr, \"g77 version %s\\n\", ffe_version_string);\n+\t  verbose = 1;\n+\t  break;\n+\n+\tcase OPTION_b:\n+\tcase OPTION_B:\n+\tcase OPTION_L:\n+\tcase OPTION_i:\n+\tcase OPTION_V:\n+\t  /* These options are useful in conjunction with -v to get\n+\t     appropriate version info.  */\n+\t  break;\n+\n+\tcase OPTION_version:\n+\t  printf (\"\\\n+GNU Fortran %s\\n\\\n+Copyright (C) 1997 Free Software Foundation, Inc.\\n\\\n+For more version information on components of the GNU Fortran\\n\\\n+compilation system, especially useful when reporting bugs,\\n\\\n+type the command `g77 --verbose'.\\n\\\n+\\n\\\n+GNU Fortran comes with NO WARRANTY, to the extent permitted by law.\\n\\\n+You may redistribute copies of GNU Fortran\\n\\\n+under the terms of the GNU General Public License.\\n\\\n+For more information about these matters, see the file named COPYING\\n\\\n+or type the command `info -f g77 Copying'.\\n\\\n+\", ffe_version_string);\n+\t  exit (0);\n+\t  break;\n+\n+\tcase OPTION_help:\n+\t  printf (\"\\\n+Usage: g77 [OPTION]... FORTRAN-SOURCE...\\n\\\n+\\n\\\n+Compile and link Fortran source code to produce an executable program,\\n\\\n+which by default is named `a.out', and can be invoked with the UNIX\\n\\\n+command `./a.out'.\\n\\\n+\\n\\\n+Options:\\n\\\n+--debug                include debugging information in executable.\\n\\\n+--help                 display this help and exit.\\n\\\n+--optimize[=LEVEL]     take extra time and memory to make generated\\n\\\n+                         executable run faster.  LEVEL is 0 for no\\n\\\n+                         optimization, 1 for normal optimization, and\\n\\\n+                         increases through 3 for more optimization.\\n\\\n+--output=PROGRAM       name the executable PROGRAM instead of a.out;\\n\\\n+                         invoke with the command `./PROGRAM'.\\n\\\n+--version              display version information and exit.\\n\\\n+\\n\\\n+Many other options exist to tailor the compilation process, specify\\n\\\n+the dialect of the Fortran source code, specify details of the\\n\\\n+code-generation methodology, and so on.\\n\\\n+\\n\\\n+For more information on g77 and gcc, type the commands `info -f g77'\\n\\\n+and `info -f gcc' to read the Info documentation.\\n\\\n+\\n\\\n+Report bugs to <egcs-bugs@cygnus.org>.\\n\");\n+\t  exit (0);\n+\t  break;\n+\n+\tcase OPTION_driver:\n+\t  (*fn) (\"--driver no longer supported\", argv[i]);\n+\t  break;\n+\n+\tdefault:\n+\t  add_version_magic = 0;\n+\t  break;\n+\t}\n \n-  /* The argument list.  */\n-  char **argv;\n+      /* This is the one place we check for missing arguments in the\n+\t program.  */\n \n-  /* The number of libraries added in.  */\n-  int added_libraries;\n+      if (i + skip < argc)\n+\ti += skip;\n+      else\n+\t(*fn) (\"argument to `%s' missing\", argv[i]);\n+    }\n \n-  /* The total number of arguments with the new stuff.  */\n-  int num_args = 1;\n+  if ((n_outfiles != 0) && (n_infiles == 0))\n+    (*fn) (\"No input files; unwilling to write output files\");\n \n-  argc = *in_argc;\n-  argv = *in_argv;\n-  added_libraries = *in_added_libraries;\n+  /* Second pass through arglist, transforming arguments as appropriate.  */\n \n-  args = (int *) xmalloc (argc * sizeof (int));\n-  bzero ((char *) args, argc * sizeof (int));\n+  append_arg (argv[0]);\t/* Start with command name, of course. */\n \n-  for (i = 1; i < argc; i++)\n+  for (i = 1; i < argc; ++i)\n     {\n-      /* If the previous option took an argument, we swallow it here.  */\n-      if (quote)\n+      if (argv[i][0] == '\\0')\n \t{\n-\t  quote = NULL;\n+\t  append_arg (argv[i]);\t/* Interesting.  Just append as is. */\n \t  continue;\n \t}\n \n-      /* We don't do this anymore, since we don't get them with minus\n-\t signs on them.  */\n-      if (argv[i][0] == '\\0' || argv[i][1] == '\\0')\n-\tcontinue;\n-\n-      if (argv[i][0] == '-')\n-\t{\n-\t  if (library != 0 && (strcmp (argv[i], \"-nostdlib\") == 0\n-\t\t\t       || strcmp (argv[i], \"-nodefaultlibs\") == 0))\n-\t    {\n-\t      library = 0;\n-\t    }\n-\t  else if (strcmp (argv[i], \"-lm\") == 0\n-\t\t   || strcmp (argv[i], \"-lmath\") == 0\n-#ifdef ALT_LIBM\n-\t\t   || strcmp (argv[i], ALT_LIBM) == 0\n-#endif\n-\t\t  )\n-\t    {\n-\t      args[i] |= MATHLIB;\n-\t      need_math = 0;\n-\t    }\n-\t  else if (strcmp (argv[i], \"-lc\") == 0)\n-\t    args[i] |= WITHLIBC;\n-\t  else if (strcmp (argv[i], \"-v\") == 0)\n-\t    {\n-\t      saw_verbose_flag = 1;\n-\t      if (argc == 2)\n-\t\t{\n-\t\t  /* If they only gave us `-v', don't try to link in libf2c. */ \n-\t\t  library = 0;\n-\t\t}\n-\t    }\n-\t  else if (strncmp (argv[i], \"-x\", 2) == 0)\n-\t    saw_speclang = 1;\n-\t  else if (((argv[i][2] == '\\0'\n-\t\t     && (char *)strchr (\"bBVDUoeTuIYmLiA\", argv[i][1]) != NULL)\n-\t\t    || strcmp (argv[i], \"-Tdata\") == 0))\n-\t    quote = argv[i];\n-\t  else if (library != 0 && ((argv[i][2] == '\\0'\n-\t\t     && (char *) strchr (\"cSEM\", argv[i][1]) != NULL)\n-\t\t    || strcmp (argv[i], \"-MM\") == 0))\n-\t    {\n-\t      /* Don't specify libraries if we won't link, since that would\n-\t\t cause a warning.  */\n-\t      library = 0;\n-\t      added -= 2;\n-\t    }\n-\t  else\n-\t    /* Pass other options through.  */\n-\t    continue;\n-\t}\n-      else\n+      if ((argv[i][0] == '-') && (argv[i][1] != 'l'))\n \t{\n-\t  int len; \n+\t  /* Not a filename or library. */\n+\n+\t  if (saw_library == 1)\t/* -l<library>. */\n+\t    append_arg (MATH_LIBRARY);\n+\n+\t  saw_library = 0;\n+\n+\t  lookup_option (&opt, &skip, &arg, argv[i]);\n \n-\t  if (saw_speclang)\n+\t  if (argv[i][1] == '\\0')\n \t    {\n-\t      saw_speclang = 0;\n+\t      append_arg (argv[i]);\t/* \"-\" == Standard input. */\n \t      continue;\n \t    }\n \n-\t  /* If the filename ends in .c or .i, put options around it.\n-\t     But not if a specified -x option is currently active.  */\n-\t  len = strlen (argv[i]);\n-\t  if (len > 2\n-\t      && (argv[i][len - 1] == 'c' || argv[i][len - 1] == 'i')\n-\t      && argv[i][len - 2] == '.')\n+\t  if (opt == OPTION_x)\n \t    {\n-\t      args[i] |= LANGSPEC;\n-\t      added += 2;\n-\t    }\n-\t}\n-    }\n+\t      /* Track input language. */\n+\t      char *lang;\n \n-  if (quote)\n-    (*fn) (\"argument to `%s' missing\\n\", quote);\n+\t      if (arg == NULL)\n+\t\tlang = argv[i+1];\n+\t      else\n+\t\tlang = arg;\n \n-  /* If we know we don't have to do anything, bail now.  */\n-  if (! added && ! library)\n-    {\n-      free (args);\n-      return;\n-    }\n+\t      saw_speclang = (strcmp (lang, \"none\") != 0);\n+\t    }\n \n-  num_args = argc + added + need_math;\n-  arglist = (char **) xmalloc (num_args * sizeof (char *));\n+\t  append_arg (argv[i]);\n \n-  /* NOTE: We start at 1 now, not 0.  */\n-  for (i = 0, j = 0; i < argc; i++, j++)\n-    {\n-      arglist[j] = argv[i];\n+\t  for (; skip != 0; --skip)\n+\t    append_arg (argv[++i]);\n \n-      /* Make sure -lf2c is before the math library, since libf2c\n-\t itself uses those math routines.  */\n-      if (!saw_math && (args[i] & MATHLIB) && library)\n-\t{\n-\t  --j;\n-\t  saw_math = argv[i];\n+\t  continue;\n \t}\n \n-      if (!saw_libc && (args[i] & WITHLIBC) && library)\n-\t{\n-\t  --j;\n-\t  saw_libc = argv[i];\n-\t}\n+      /* A filename/library, not an option. */\n \n-      /* Wrap foo.c and foo.i files in a language specification to\n-\t force the gcc compiler driver to run cc1plus on them.  */\n-      if (args[i] & LANGSPEC)\n-\t{\n-\t  int len = strlen (argv[i]);\n-\t  switch (argv[i][len - 1])\n+      if (saw_speclang)\n+\tsaw_library = 0;\t/* -xfoo currently active. */\n+      else\n+\t{\t\t\t/* -lfoo or filename. */\n+\t  if (strcmp (argv[i], MATH_LIBRARY) == 0\n+#ifdef ALT_LIBM\n+\t      || strcmp (argv[i], ALT_LIBM) == 0\n+#endif\n+\t      )\n \t    {\n-\t    case 'F':\n-\t      arglist[j++] = \"-xf77-cpp-input\";\n-\t      break;\n-\t    case 'r':\n-\t      /* Don't do ratfor for \".for\".  */\n-\t      if (argv[i][len - 2] == '.')\n-\t\t{\n-\t\t  arglist[j++] = \"-xratfor\";\n-\t\t  break;\n-\t\t}\n-\t    default:\n-\t      arglist[j++] = \"-xf77\";\n-\t      break;\n+\t      if (saw_library == 1)\n+\t\tsaw_library = 2;\t/* -l<library> -lm. */\n+\t    }\n+\t  else if (strcmp (argv[i], FORTRAN_LIBRARY) == 0)\n+\t    saw_library = 1;\t/* -l<library>. */\n+\t  else\n+\t    {\t\t/* Other library, or filename. */\n+\t      if (saw_library == 1)\n+\t\tappend_arg (MATH_LIBRARY);\n+\t      saw_library = 0;\n \t    }\n-\t  arglist[j++] = argv[i];\n-\t  arglist[j] = \"-xnone\";\n \t}\n-  }\n+      append_arg (argv[i]);\n+    }\n \n-  /* Add `-lf2c' if we haven't already done so.  */\n-  if (library)\n-    {\n-      arglist[j++] = FORTRAN_LIBRARY;\n-      added_libraries++;\n+  /* Append `-lg2c -lm' as necessary.  */\n+\n+  if (! add_version_magic && library)\n+    {\t\t\t\t/* Doing a link and no -nostdlib. */\n+      if (saw_speclang)\n+\tappend_arg (\"-xnone\");\n+\n+      switch (saw_library)\n+\t{\n+\tcase 0:\n+\t  append_arg (library);\n+\tcase 1:\n+\t  append_arg (MATH_LIBRARY);\n+\tdefault:\n+\t  break;\n+\t}\n     }\n-  if (saw_math)\n-    arglist[j++] = saw_math;\n-  else if (library)\n+  else if (add_version_magic && verbose)\n     {\n-      arglist[j++] = MATH_LIBRARY;\n-      added_libraries++;\n+      append_arg (\"-c\");\n+      append_arg (\"-xf77-version\");\n+      append_arg (\"/dev/null\");\n+      append_arg (\"-xnone\");\n     }\n-  if (saw_libc)\n-    arglist[j++] = saw_libc;\n \n-  arglist[j] = NULL;\n+  if (verbose\n+      && g77_newargv != g77_xargv)\n+    {\n+      fprintf (stderr, \"Driving:\");\n+      for (i = 0; i < g77_newargc; i++)\n+\tfprintf (stderr, \" %s\", g77_newargv[i]);\n+      fprintf (stderr, \"\\n\");\n+    }\n \n-  *in_argc = j;\n-  *in_argv = arglist;\n-  *in_added_libraries = added_libraries;\n+  *in_argc = g77_newargc;\n+  *in_argv = g77_newargv;\n }\n \n /* Called before linking.  Returns 0 on success and -1 on failure. */"}, {"sha": "8569ed72ce8ef48f73254fcbb25f2f85006461e6", "filename": "gcc/f/intdoc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fintdoc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fintdoc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fintdoc.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -1,6 +1,6 @@\n /* intdoc.c\n    Copyright (C) 1997 Free Software Foundation, Inc.\n-   Contributed by James Craig Burley (burley@gnu.ai.mit.edu).\n+   Contributed by James Craig Burley (burley@gnu.org).\n \n This file is part of GNU Fortran.\n "}, {"sha": "bf8786febdef4e2f2aba07c44b241ab9aa7d7369", "filename": "gcc/f/lang-specs.h", "status": "modified", "additions": 26, "deletions": 16, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Flang-specs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Flang-specs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Flang-specs.h?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -24,15 +24,6 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n /* This is the contribution to the `default_compilers' array in gcc.c for\n    g77.  */\n \n-#ifdef __STDC__\t/* Else stringizing of OO below won't work, but in\n-\t\t   K&R case we're not building the f77 language. */\n-\n-#ifdef OBJECT_SUFFIX\t/* Not defined compiling gcc.c prior to 2.7.0. */\n-#define OO \"%O\"\n-#else\n-#define OO \".o\"\n-#endif\n-\n   {\".F\", {\"@f77-cpp-input\"}},\n   {\".fpp\", {\"@f77-cpp-input\"}},\n   {\"@f77-cpp-input\",\n@@ -60,7 +51,7 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \t\t   %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t   %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n \t      %{!S:as %a %Y\\\n-\t\t      %{c:%W{o*}%{!o*:-o %w%b\" OO \"}}%{!c:-o %d%w%u\" OO \"}\\\n+\t\t      %{c:%W{o*}%{!o*:-o %w%b%O}}%{!c:-o %d%w%u%O}\\\n \t\t      %{!pipe:%g.s} %A\\n }}}}\"}},\n   {\".r\", {\"@ratfor\"}},\n   {\"@ratfor\",\n@@ -75,7 +66,7 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \t   %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t   %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n \t   %{!S:as %a %Y\\\n-\t   %{c:%W{o*}%{!o*:-o %w%b\" OO \"}}%{!c:-o %d%w%u\" OO \"}\\\n+\t   %{c:%W{o*}%{!o*:-o %w%b%O}}%{!c:-o %d%w%u%O}\\\n            %{!pipe:%g.s} %A\\n }}\"}},\n   {\".f\", {\"@f77\"}},\n   {\".for\", {\"@f77\"}},\n@@ -88,9 +79,28 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \t\t   %{pg:%{fomit-frame-pointer:%e-pg and -fomit-frame-pointer are incompatible}}\\\n \t\t   %{S:%W{o*}%{!o*:-o %b.s}}%{!S:-o %{|!pipe:%g.s}} |\\n\\\n \t      %{!S:as %a %Y\\\n-\t\t      %{c:%W{o*}%{!o*:-o %w%b\" OO \"}}%{!c:-o %d%w%u\" OO \"}\\\n+\t\t      %{c:%W{o*}%{!o*:-o %w%b%O}}%{!c:-o %d%w%u%O}\\\n \t\t      %{!pipe:%g.s} %A\\n }}}}\"}},\n-\n-#undef OO\n-\n-#endif\n+  {\"@f77-version\",\n+   {\"cpp -lang-c %{nostdinc*} %{C} %{v} %{A*} %{I*} %{P} %I \\\n+      %{C:%{!E:%eGNU C does not support -C without using -E}} \\\n+      %{M} %{MM} %{MD:-MD %b.d} %{MMD:-MMD %b.d} %{MG} \\\n+      -undef -D__GNUC__=%v1 -D__GNUC_MINOR__=%v2 \\\n+      %{ansi:-trigraphs -$ -D__STRICT_ANSI__} \\\n+      %{!undef:%P} -D_LANGUAGE_FORTRAN %{trigraphs} \\\n+      %c %{Os:-D__OPTIMIZE_SIZE__} %{O*:%{!O0:-D__OPTIMIZE__}} -traditional \\\n+      %{g*} %{W*} %{w} %{pedantic*} %{H} %{d*} %C %{D*} %{U*} %{i*} %Z \\\n+      /dev/null /dev/null \\n\\\n+     f771 -fnull-version %(f771) \\\n+      %{!Q:-quiet} -dumpbase g77-version.f %{d*} %{m*} %{a} \\\n+      %{g*} %{O*} %{W*} %{w} %{pedantic*} \\\n+      -version -fversion %{f*} %{I*} -o %g.s /dev/null \\n\\\n+     as %a %Y -o %g%O %g.s %A \\n\\\n+     ld %l %X -o %g %g%O %{A} %{d} %{e*} %{m} %{N} %{n} \\\n+      %{r} %{s} %{t} %{u*} %{x} %{z} %{Z} \\\n+      %{!A:%{!nostdlib:%{!nostartfiles:%S}}} \\\n+      %{static:} %{L*} %D -lg2c -lm \\\n+      %{!nostdlib:%{!nodefaultlibs:%G %L %G}} \\\n+      %{!A:%{!nostdlib:%{!nostartfiles:%E}}} \\\n+      %{T*} \\n\\\n+     %g \\n\"}},"}, {"sha": "2ce6b8bf1ffd34d88f62aca20d0fe22d02ff0ddb", "filename": "gcc/f/lex.c", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Flex.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -32,6 +32,7 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #include \"flags.j\"\n #include \"input.j\"\n #include \"tree.j\"\n+#include \"output.j\"  /* Must follow tree.j so TREE_CODE is defined! */\n #endif\n \n #ifdef DWARF_DEBUGGING_INFO\n@@ -1848,6 +1849,23 @@ ffelex_file_fixed (ffewhereFile wf, FILE *f)\n   ffelex_current_wl_ = ffewhere_line_unknown ();\n   ffelex_current_wc_ = ffewhere_column_unknown ();\n   latest_char_in_file = '\\n';\n+\n+  if (ffe_is_null_version ())\n+    {\n+      /* Just substitute a \"program\" directly here.  */\n+\n+      char line[] = \"      call g77__fvers;call g77__ivers;call g77__uvers;end\";\n+      char *p;\n+\n+      column = 0;\n+      for (p = &line[0]; *p != '\\0'; ++p)\n+\tcolumn = ffelex_image_char_ (*p, column);\n+\n+      c = EOF;\n+\n+      goto have_line;\t\t/* :::::::::::::::::::: */\n+    }\n+\n   goto first_line;\t\t/* :::::::::::::::::::: */\n \n   /* Come here to get a new line. */\n@@ -1995,6 +2013,9 @@ ffelex_file_fixed (ffewhereFile wf, FILE *f)\n \n       column = ffelex_final_nontab_column_;\n     }\n+\n+ have_line:\t\t\t/* :::::::::::::::::::: */\n+\n   ffelex_card_image_[column] = '\\0';\n   ffelex_card_length_ = column;\n "}, {"sha": "06031ce289da90c989b3b2bbcdde90363afdece1", "filename": "gcc/f/news.texi", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fnews.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fnews.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fnews.texi?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -5,7 +5,7 @@\n @c The text of this file appears in the file BUGS\n @c in the G77 distribution, as well as in the G77 manual.\n \n-@c 1998-05-19\n+@c 1998-05-20\n \n @ifclear NEWSONLY\n @node News\n@@ -98,7 +98,7 @@ and the corresponding alias-analysis code.\n \n (Version 1.0.1 of @code{egcs} has the alias-analysis\n code, but not the @code{__restrict__} keyword.\n-@code{g77} users benefit from the alias-analysis\n+@code{egcs} @code{g77} users benefit from the alias-analysis\n code despite the lack of the @code{__restrict__} keyword,\n which is a C-language construct.)\n \n@@ -215,7 +215,7 @@ archive members.\n \n This should make it easier to write portable applications\n that have their own (non-Fortran) @code{main()} routine\n-to properly set up the @code{libf2c} environment, even\n+properly set up the @code{libf2c} environment, even\n when @code{libf2c} (now @code{libg2c}) is a shared library.\n \n @item\n@@ -227,7 +227,7 @@ Other cleaning up of the configuration and build process\n has been performed as well.\n \n @item\n-Use @code{install-info} to update the directory of\n+@code{install-info} now used to update the directory of\n Info documentation to contain an entry for @code{g77}\n (during installation).\n "}, {"sha": "f995fcbd936251080c7fa5a0d099e85035917c61", "filename": "gcc/f/output.j", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Foutput.j", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Foutput.j", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Foutput.j?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -0,0 +1,28 @@\n+/* output.j -- Wrapper for GCC's output.h\n+   Copyright (C) 1998 Free Software Foundation, Inc.\n+   Contributed by James Craig Burley (burley@gnu.org).\n+\n+This file is part of GNU Fortran.\n+\n+GNU Fortran is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU Fortran is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU Fortran; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n+02111-1307, USA.  */\n+\n+#ifndef MAKING_DEPENDENCIES\n+#ifndef _J_f_output\n+#define _J_f_output\n+#include \"gansidecl.h\"\n+#include \"output.h\"\n+#endif\n+#endif"}, {"sha": "9367d8b7cd094f40f72b7e6df46e0dfd246e6ce3", "filename": "gcc/f/proj.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fproj.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fproj.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fproj.h?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -75,8 +75,4 @@ typedef enum\n #define dmpout stderr\n #endif\n \n-#ifndef isascii\n-#define isascii(c) ((unsigned char)(c) <= 0x7f)\n-#endif\n-\n #endif"}, {"sha": "addafc4083d0443352913b924145980032affcc8", "filename": "gcc/f/ste.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fste.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fste.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fste.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -45,12 +45,13 @@ the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \n /* Include files. */\n \n+#include \"proj.h\"\n+\n #if FFECOM_targetCURRENT == FFECOM_targetGCC\n #include \"config.j\"\n #include \"rtl.j\"\n #endif\n \n-#include \"proj.h\"\n #include \"ste.h\"\n #include \"bld.h\"\n #include \"com.h\""}, {"sha": "56c44ba9f7ac1efefb3e3611cbff343b82a3a5d5", "filename": "gcc/f/top.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Ftop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Ftop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Ftop.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -80,6 +80,7 @@ bool ffe_is_ident_ = TRUE;\n bool ffe_is_init_local_zero_ = FFETARGET_defaultIS_INIT_LOCAL_ZERO;\n bool ffe_is_mainprog_;\t\t/* TRUE if current prog unit known to be\n \t\t\t\t   main. */\n+bool ffe_is_null_version_ = FALSE;\n bool ffe_is_onetrip_ = FALSE;\n bool ffe_is_silent_ = TRUE;\n bool ffe_is_typeless_boz_ = FALSE;\n@@ -175,7 +176,7 @@ ffe_decode_option (argc, argv)\n \t  ffe_is_do_internal_checks_ = TRUE;\n \t}\n       else if (strcmp (&opt[2], \"null-version\") == 0)\n-\t;\t/* Someday generate program to print version info.  */\n+\tffe_set_is_null_version (TRUE);\n       else if (strcmp (&opt[2], \"ident\") == 0)\n \tffe_set_is_ident (TRUE);\n       else if (strcmp (&opt[2], \"no-ident\") == 0)"}, {"sha": "20994bd3392b7c357a120cab3a9aa887a88e4249", "filename": "gcc/f/top.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Ftop.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Ftop.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Ftop.h?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -95,6 +95,7 @@ extern bool ffe_is_globals_;\n extern bool ffe_is_ident_;\n extern bool ffe_is_init_local_zero_;\n extern bool ffe_is_mainprog_;\n+extern bool ffe_is_null_version_;\n extern bool ffe_is_onetrip_;\n extern bool ffe_is_silent_;\n extern bool ffe_is_typeless_boz_;\n@@ -182,6 +183,7 @@ void ffe_terminate_4 (void);\n #define ffe_is_ident() ffe_is_ident_\n #define ffe_is_init_local_zero() ffe_is_init_local_zero_\n #define ffe_is_mainprog() ffe_is_mainprog_\n+#define ffe_is_null_version() ffe_is_null_version_\n #define ffe_is_onetrip() ffe_is_onetrip_\n #define ffe_is_pedantic() ffe_is_pedantic_\n #define ffe_is_pedantic_not_90() (ffe_is_pedantic_ && !ffe_is_90_)\n@@ -233,6 +235,7 @@ void ffe_terminate_4 (void);\n #define ffe_set_is_ident(f) (ffe_is_ident_ = (f))\n #define ffe_set_is_init_local_zero(f) (ffe_is_init_local_zero_ = (f))\n #define ffe_set_is_mainprog(f) (ffe_is_mainprog_ = (f))\n+#define ffe_set_is_null_version(f) (ffe_is_null_version_ = (f))\n #define ffe_set_is_onetrip(f) (ffe_is_onetrip_ = (f))\n #define ffe_set_is_pedantic(f) (ffe_is_pedantic_ = (f))\n #define ffe_set_is_saveall(f) (ffe_is_saveall_ = (f))"}, {"sha": "a7dc4391b104cd9dafc403be7816a2b8d8c5d791", "filename": "gcc/f/version.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fversion.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95a1b67649114c9f3bb3b1ccc79d06f340d5dd40/gcc%2Ff%2Fversion.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fversion.c?ref=95a1b67649114c9f3bb3b1ccc79d06f340d5dd40", "patch": "@@ -1 +1 @@\n-char *ffe_version_string = \"0.5.22-release\";\n+char *ffe_version_string = \"egcs-0.5.23\";"}]}