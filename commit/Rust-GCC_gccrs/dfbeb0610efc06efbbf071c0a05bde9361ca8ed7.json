{"sha": "dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZiZWIwNjEwZWZjMDZlZmJiZjA3MWMwYTA1YmRlOTM2MWNhOGVkNw==", "commit": {"author": {"name": "Gabriel Dos Reis", "email": "gdr@integrable-solutions.net", "date": "2003-06-21T13:09:05Z"}, "committer": {"name": "Gabriel Dos Reis", "email": "gdr@gcc.gnu.org", "date": "2003-06-21T13:09:05Z"}, "message": "re PR c++/10915 (a not-useful non-avoidable warning:  conversion to a reference to the same type will never use a type conversion operator)\n\ntestsuite/\n        * g++.old-deja/g++.jason/conversion5.C: Adjust option.\n        * g++.old-deja/g++.bugs/900215_01.C: Likewise.\n\ncp/\n        PR c++/10915\n        * decl.c (grok_op_properties): Warn possible confusing conversion\n        only if -Wconversion.\n\nFrom-SVN: r68303", "tree": {"sha": "ce0dcd6d60bc043fa0be4502f811ca419e63f5da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ce0dcd6d60bc043fa0be4502f811ca419e63f5da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/comments", "author": {"login": "cxx-undef", "id": 5528103, "node_id": "MDQ6VXNlcjU1MjgxMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5528103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cxx-undef", "html_url": "https://github.com/cxx-undef", "followers_url": "https://api.github.com/users/cxx-undef/followers", "following_url": "https://api.github.com/users/cxx-undef/following{/other_user}", "gists_url": "https://api.github.com/users/cxx-undef/gists{/gist_id}", "starred_url": "https://api.github.com/users/cxx-undef/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cxx-undef/subscriptions", "organizations_url": "https://api.github.com/users/cxx-undef/orgs", "repos_url": "https://api.github.com/users/cxx-undef/repos", "events_url": "https://api.github.com/users/cxx-undef/events{/privacy}", "received_events_url": "https://api.github.com/users/cxx-undef/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6f705fc773fd7425f13fb45931f783d613e553de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f705fc773fd7425f13fb45931f783d613e553de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f705fc773fd7425f13fb45931f783d613e553de"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "7f0c4ede4c0ecfa6087033a6d81590d5dd210368", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "patch": "@@ -1,3 +1,9 @@\n+2003-06-21  Gabriel Dos Reis <gdr@integrable-solutions.net>\n+\n+\tPR c++/10915\n+\t* decl.c (grok_op_properties): Warn possible confusing conversion\n+\tonly if -Wconversion.\n+\n 2003-06-20  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/10749"}, {"sha": "f539842c2953033ea5fc26f69f8ed2863bc1cf5f", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "patch": "@@ -12371,7 +12371,7 @@ grok_op_properties (tree decl, int friendp)\n \t\t       && DERIVED_FROM_P (t, current_class_type))\n \t\twhat = \"a base class\";\n \n-\t      if (what)\n+\t      if (what && warn_conversion)\n \t\twarning (\"conversion to %s%s will never use a type conversion operator\",\n \t\t\t ref ? \"a reference to \" : \"\", what);\n \t    }"}, {"sha": "a947a8fc5e008777c19719893727b1a6b6bf954f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "patch": "@@ -1,3 +1,8 @@\n+2003-06-21  Gabriel Dos Reis <gdr@integrable-solutions.net>\n+\n+\t* g++.old-deja/g++.jason/conversion5.C: Adjust option.\n+\t* g++.old-deja/g++.bugs/900215_01.C: Likewise.\n+\n 2003-06-20  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/10888"}, {"sha": "878011cf328f9b352193909d010bbe419803164b", "filename": "gcc/testsuite/g++.dg/warn/conversion-function-1.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fconversion-function-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fconversion-function-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fconversion-function-1.C?ref=dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "patch": "@@ -0,0 +1,8 @@\n+// Copyright (C) 2003 Free Software Foundation\n+// Contributed by Gabriel Dos Reis <gdr@integrable-solutions.net>\n+// { dg-options \"-Wno-conversion\" }\n+\n+struct A {\n+   operator A&();\n+};\n+"}, {"sha": "c79a7035f99de1432976b95f7f7bd509aa6b85ac", "filename": "gcc/testsuite/g++.old-deja/g++.bugs/900215_01.C", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.bugs%2F900215_01.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.bugs%2F900215_01.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.bugs%2F900215_01.C?ref=dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "patch": "@@ -20,6 +20,8 @@\n // 8/3/2000 (nathan): The std allows you to define such an op, but\n // it will never be called. [class.conv.fct]. Make it an unconditional warning.\n \n+// { dg-options \"-Wconversion\" }\n+\n struct struct0 {\n \n   operator void ();\t\t// { dg-warning \"\" } operator void"}, {"sha": "0031084db004d4f8cadfd8436ec724e42ac71191", "filename": "gcc/testsuite/g++.old-deja/g++.jason/conversion5.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Fconversion5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfbeb0610efc06efbbf071c0a05bde9361ca8ed7/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Fconversion5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Fconversion5.C?ref=dfbeb0610efc06efbbf071c0a05bde9361ca8ed7", "patch": "@@ -1,4 +1,5 @@\n // { dg-do assemble  }\n+// { dg-options \"-Wconversion\" }\n struct A { };\n struct B: public A {\n   A a;"}]}