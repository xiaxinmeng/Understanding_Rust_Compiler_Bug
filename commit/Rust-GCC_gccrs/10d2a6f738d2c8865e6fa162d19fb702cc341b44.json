{"sha": "10d2a6f738d2c8865e6fa162d19fb702cc341b44", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTBkMmE2ZjczOGQyYzg4NjVlNmZhMTYyZDE5ZmI3MDJjYzM0MWI0NA==", "commit": {"author": {"name": "Emmanuel Briot", "email": "briot@adacore.com", "date": "2009-04-22T15:03:51Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-22T15:03:51Z"}, "message": "2009-04-22  Emmanuel Briot  <briot@adacore.com>\n\n\t* prj.ads, prj-nmsc.adb, prj-env.adb, prj-env.ads\n\t(Source_Data.Language_Name): Field removed.\n\nFrom-SVN: r146584", "tree": {"sha": "57c3a3640dfa09e99ca3e14412ff45dbd27eff0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57c3a3640dfa09e99ca3e14412ff45dbd27eff0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/10d2a6f738d2c8865e6fa162d19fb702cc341b44", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10d2a6f738d2c8865e6fa162d19fb702cc341b44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10d2a6f738d2c8865e6fa162d19fb702cc341b44", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10d2a6f738d2c8865e6fa162d19fb702cc341b44/comments", "author": {"login": "briot", "id": 42402, "node_id": "MDQ6VXNlcjQyNDAy", "avatar_url": "https://avatars.githubusercontent.com/u/42402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/briot", "html_url": "https://github.com/briot", "followers_url": "https://api.github.com/users/briot/followers", "following_url": "https://api.github.com/users/briot/following{/other_user}", "gists_url": "https://api.github.com/users/briot/gists{/gist_id}", "starred_url": "https://api.github.com/users/briot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/briot/subscriptions", "organizations_url": "https://api.github.com/users/briot/orgs", "repos_url": "https://api.github.com/users/briot/repos", "events_url": "https://api.github.com/users/briot/events{/privacy}", "received_events_url": "https://api.github.com/users/briot/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "39d4e04a29fac028745290f6301f16e490bef9b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39d4e04a29fac028745290f6301f16e490bef9b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39d4e04a29fac028745290f6301f16e490bef9b7"}], "stats": {"total": 62, "additions": 33, "deletions": 29}, "files": [{"sha": "68b28f80a2f1be4af0d9d52961f2b45e2fec9638", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=10d2a6f738d2c8865e6fa162d19fb702cc341b44", "patch": "@@ -1,3 +1,8 @@\n+2009-04-22  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* prj.ads, prj-nmsc.adb, prj-env.adb, prj-env.ads\n+\t(Source_Data.Language_Name): Field removed.\n+\n 2009-04-22  Emmanuel Briot  <briot@adacore.com>\n \n \t* prj.adb, prj.ads, prj-nmsc.adb (Project_Data.Unit_Based_Language_*):"}, {"sha": "ed4dc6caf0e4a1f2fd9a42e952f8cf05b3eff67b", "filename": "gcc/ada/prj-env.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj-env.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj-env.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-env.adb?ref=10d2a6f738d2c8865e6fa162d19fb702cc341b44", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2008, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2009, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1221,7 +1221,7 @@ package body Prj.Env is\n \n    procedure Create_Mapping_File\n      (Project  : Project_Id;\n-      Language : Name_Id;\n+      Language : Language_Index;\n       In_Tree  : Project_Tree_Ref;\n       Name     : out Path_Name_Type)\n    is\n@@ -1334,7 +1334,7 @@ package body Prj.Env is\n             while Source /= No_Source loop\n                Src_Data := In_Tree.Sources.Table (Source);\n \n-               if Src_Data.Language_Name = Language\n+               if In_Tree.Sources.Table (Source).Language = Language\n                  and then not Src_Data.Locally_Removed\n                  and then Src_Data.Replaced_By = No_Source\n                  and then Src_Data.Path.Name /= No_Path"}, {"sha": "c45d09aa8fef0c486c705087f35aaa8ed7a7ae90", "filename": "gcc/ada/prj-env.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj-env.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj-env.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-env.ads?ref=10d2a6f738d2c8865e6fa162d19fb702cc341b44", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2001-2008, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2009, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -50,7 +50,7 @@ package Prj.Env is\n \n    procedure Create_Mapping_File\n      (Project  : Project_Id;\n-      Language : Name_Id;\n+      Language : Language_Index;\n       In_Tree  : Project_Tree_Ref;\n       Name     : out Path_Name_Type);\n    --  Create a temporary mapping file for project Project. For each source or"}, {"sha": "4b282243b3b101c945829a6a9a2d0c42fa042327", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 21, "deletions": 19, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=10d2a6f738d2c8865e6fa162d19fb702cc341b44", "patch": "@@ -737,7 +737,6 @@ package body Prj.Nmsc is\n       end if;\n \n       Src_Data.Project             := Project;\n-      Src_Data.Language_Name       := Lang;\n       Src_Data.Language            := Lang_Id;\n       Src_Data.Lang_Kind           := Lang_Kind;\n       Src_Data.Compiled            := In_Tree.Languages_Data.Table\n@@ -2824,11 +2823,11 @@ package body Prj.Nmsc is\n       --  Check attributes common to Ada_Only and Multi_Lang modes\n \n       procedure Process_Exceptions_File_Based\n-        (Lang_Id        : Language_Index;\n-         Kind           : Source_Kind);\n+        (Lang_Id : Language_Index;\n+         Kind    : Source_Kind);\n       procedure Process_Exceptions_Unit_Based\n-        (Lang_Id        : Language_Index;\n-         Kind           : Source_Kind);\n+        (Lang_Id : Language_Index;\n+         Kind    : Source_Kind);\n       --  In Multi_Lang mode, process the naming exceptions for the two types\n       --  of languages we can have.\n \n@@ -2989,6 +2988,7 @@ package body Prj.Nmsc is\n          Element        : String_Element;\n          File_Name      : File_Name_Type;\n          Source         : Source_Id;\n+\n       begin\n          case Kind is\n             when Impl | Sep =>\n@@ -3087,6 +3087,7 @@ package body Prj.Nmsc is\n          Source_To_Replace : Source_Id := No_Source;\n          Other_Project     : Project_Id;\n          Other_Part        : Source_Id := No_Source;\n+\n       begin\n          case Kind is\n             when Impl | Sep =>\n@@ -3363,6 +3364,7 @@ package body Prj.Nmsc is\n          Sep_Suffix_Loc  : Source_Ptr;\n          Suffix          : Variable_Value;\n          Lang            : Name_Id;\n+\n       begin\n          Check_Common\n            (Dot_Replacement => Dot_Replacement,\n@@ -3382,13 +3384,13 @@ package body Prj.Nmsc is\n          then\n             Lang_Id := Data.First_Language_Processing;\n             while Lang_Id /= No_Language_Index loop\n-               if In_Tree.Languages_Data.Table\n-                 (Lang_Id).Config.Kind = Unit_Based\n+               if In_Tree.Languages_Data.\n+                    Table (Lang_Id).Config.Kind = Unit_Based\n                then\n                   if Dot_Replacement /= No_File then\n                      In_Tree.Languages_Data.Table\n                        (Lang_Id).Config.Naming_Data.Dot_Replacement :=\n-                       Dot_Replacement;\n+                         Dot_Replacement;\n                   end if;\n \n                   if Casing_Defined then\n@@ -3399,12 +3401,11 @@ package body Prj.Nmsc is\n                   if Separate_Suffix /= No_File then\n                      In_Tree.Languages_Data.Table\n                        (Lang_Id).Config.Naming_Data.Separate_Suffix :=\n-                       Separate_Suffix;\n+                         Separate_Suffix;\n                   end if;\n                end if;\n \n-               Lang_Id :=\n-                 In_Tree.Languages_Data.Table (Lang_Id).Next;\n+               Lang_Id := In_Tree.Languages_Data.Table (Lang_Id).Next;\n             end loop;\n          end if;\n \n@@ -4542,15 +4543,16 @@ package body Prj.Nmsc is\n \n                   if Def_Lang_Id = Name_Ada then\n                      In_Tree.Languages_Data.Table\n-                       (Data.First_Language_Processing).Config.Kind\n-                       := Unit_Based;\n+                       (Data.First_Language_Processing).Config.Kind :=\n+                         Unit_Based;\n                      In_Tree.Languages_Data.Table\n-                       (Data.First_Language_Processing).Config.Dependency_Kind\n-                       := ALI_File;\n+                       (Data.First_Language_Processing).Config.\n+                         Dependency_Kind := ALI_File;\n+\n                   else\n                      In_Tree.Languages_Data.Table\n-                       (Data.First_Language_Processing).Config.Kind\n-                       := File_Based;\n+                       (Data.First_Language_Processing).Config.Kind :=\n+                         File_Based;\n                   end if;\n                end if;\n             end if;\n@@ -4646,7 +4648,6 @@ package body Prj.Nmsc is\n                            if Lang_Name = Name_Ada then\n                               Lang_Data.Config.Kind := Unit_Based;\n                               Lang_Data.Config.Dependency_Kind := ALI_File;\n-\n                            else\n                               Lang_Data.Config.Kind := File_Based;\n                               Lang_Data.Config.Dependency_Kind := None;\n@@ -4681,9 +4682,10 @@ package body Prj.Nmsc is\n \n       elsif Extending then\n          declare\n-            Data : Project_Data := In_Tree.Projects.Table (Root_Project);\n+            Data : Project_Data;\n \n          begin\n+            Data := In_Tree.Projects.Table (Root_Project);\n             while Data.Extends /= No_Project loop\n                if P = Data.Extends then\n                   return True;"}, {"sha": "760a076f6dbc4e0523a6b8f90363ad589662725e", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d2a6f738d2c8865e6fa162d19fb702cc341b44/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=10d2a6f738d2c8865e6fa162d19fb702cc341b44", "patch": "@@ -639,11 +639,9 @@ package Prj is\n       Project             : Project_Id            := No_Project;\n       --  Project of the source\n \n-      Language_Name       : Name_Id               := No_Name;\n-      --  Name of the language of the source\n-\n       Language            : Language_Index        := No_Language_Index;\n-      --  Index of the language\n+      --  Index of the language. This is an index into\n+      --  project_tree.languages_data\n \n       Lang_Kind           : Language_Kind         := File_Based;\n       --  Kind of the language\n@@ -760,7 +758,6 @@ package Prj is\n \n    No_Source_Data : constant Source_Data :=\n                       (Project                => No_Project,\n-                       Language_Name          => No_Name,\n                        Language               => No_Language_Index,\n                        Lang_Kind              => File_Based,\n                        Compiled               => True,"}]}