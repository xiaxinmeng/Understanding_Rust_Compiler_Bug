{"sha": "ef9da28d8fa1e2c0dc890f87374c0f21b18430c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWY5ZGEyOGQ4ZmExZTJjMGRjODkwZjg3Mzc0YzBmMjFiMTg0MzBjMw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-08-03T19:55:00Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-08-03T19:55:00Z"}, "message": "compiler: Don't allow multiple function declarations.\n\n    \n    Fixes golang/go#11573.\n    \n    Reviewed-on: https://go-review.googlesource.com/12508\n\nFrom-SVN: r226529", "tree": {"sha": "2778fa322ef0a610a5cb813393ce2264acdf7363", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2778fa322ef0a610a5cb813393ce2264acdf7363"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3/comments", "author": null, "committer": null, "parents": [{"sha": "de0fb9055c0928960ecc8e3a5fe990728611c3ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de0fb9055c0928960ecc8e3a5fe990728611c3ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de0fb9055c0928960ecc8e3a5fe990728611c3ca"}], "stats": {"total": 17, "additions": 7, "deletions": 10}, "files": [{"sha": "56ae88e5aadd036d60677e08ecfb07cc8b036d66", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=ef9da28d8fa1e2c0dc890f87374c0f21b18430c3", "patch": "@@ -1,4 +1,4 @@\n-2b1a79c6395991fc4e60e20312ff44065fdb816b\n+7a6089333f4ab10449f9140c4639cfe741abcb25\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "9a5dd57cdb56ed855f76c699c8272ac5170932ea", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=ef9da28d8fa1e2c0dc890f87374c0f21b18430c3", "patch": "@@ -7408,16 +7408,10 @@ Bindings::new_definition(Named_object* old_object, Named_object* new_object)\n \n     case Named_object::NAMED_OBJECT_FUNC_DECLARATION:\n       {\n-\tFunction_type* old_type = old_object->func_declaration_value()->type();\n-\tif (new_object->is_function_declaration())\n-\t  {\n-\t    Function_type* new_type =\n-\t      new_object->func_declaration_value()->type();\n-\t    if (old_type->is_valid_redeclaration(new_type, &reason))\n-\t      return old_object;\n-\t  }\n \tif (new_object->is_function())\n \t  {\n+            Function_type* old_type =\n+                old_object->func_declaration_value()->type();\n \t    Function_type* new_type = new_object->func_value()->type();\n \t    if (old_type->is_valid_redeclaration(new_type, &reason))\n \t      {"}, {"sha": "7f7eba489c7df1cb67b96d7b216143e3fbe727dc", "filename": "gcc/go/gofrontend/parse.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef9da28d8fa1e2c0dc890f87374c0f21b18430c3/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fparse.cc?ref=ef9da28d8fa1e2c0dc890f87374c0f21b18430c3", "patch": "@@ -2231,9 +2231,11 @@ Parse::function_decl(bool saw_nointerface)\n   std::string extern_name = this->lex_->extern_name();\n   const Token* token = this->advance_token();\n \n+  bool expected_receiver = false;\n   Typed_identifier* rec = NULL;\n   if (token->is_op(OPERATOR_LPAREN))\n     {\n+      expected_receiver = true;\n       rec = this->receiver();\n       token = this->peek_token();\n     }\n@@ -2304,7 +2306,8 @@ Parse::function_decl(bool saw_nointerface)\n     {\n       if (named_object == NULL && !Gogo::is_sink_name(name))\n \t{\n-\t  if (fntype == NULL)\n+\t  if (fntype == NULL\n+              || (expected_receiver && rec == NULL))\n \t    this->gogo_->add_erroneous_name(name);\n \t  else\n \t    {"}]}