{"sha": "822868aa564816380d7928a6ead984524abc8259", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODIyODY4YWE1NjQ4MTYzODBkNzkyOGE2ZWFkOTg0NTI0YWJjODI1OQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-05T14:21:03Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-05T14:21:03Z"}, "message": "[multiple changes]\n\n2011-08-05  Vincent Celier  <celier@adacore.com>\n\n\t* gnatcmd.adb (Get_Closure): Do not crash when it is not possible to\n\tdelete or close the file when the call to gnatmake was successful.\n\n2011-08-05  Yannick Moy  <moy@adacore.com>\n\n\t* gnat1drv.adb (Adjust_Global_Switches): in ALFA mode, set\n\tGlobal_Discard_Names.\n\n2011-08-05  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sinfo.ads: comments on use of entity field for aspect specifications.\n\n2011-08-05  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch12.adb (Reset_Entity): If the entity field of the associated\n\tnode is not itself an entity but a selected component, it is a\n\trewritten parameterless call to an en enclosing synchronized operation,\n\tand this expansion will be performed again in the instance, so there is\n\tno global information to preserve.\n\nFrom-SVN: r177443", "tree": {"sha": "eba2b26100e99f621767619903ed5d74dd4acaa2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eba2b26100e99f621767619903ed5d74dd4acaa2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/822868aa564816380d7928a6ead984524abc8259", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/822868aa564816380d7928a6ead984524abc8259", "html_url": "https://github.com/Rust-GCC/gccrs/commit/822868aa564816380d7928a6ead984524abc8259", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/822868aa564816380d7928a6ead984524abc8259/comments", "author": null, "committer": null, "parents": [{"sha": "44a10091cf20b5f4580c4e7bc33e8162acce97dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44a10091cf20b5f4580c4e7bc33e8162acce97dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44a10091cf20b5f4580c4e7bc33e8162acce97dc"}], "stats": {"total": 75, "additions": 66, "deletions": 9}, "files": [{"sha": "14db29dc583979eea2f3101cc022a31c6a430b10", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=822868aa564816380d7928a6ead984524abc8259", "patch": "@@ -1,3 +1,25 @@\n+2011-08-05  Vincent Celier  <celier@adacore.com>\n+\n+\t* gnatcmd.adb (Get_Closure): Do not crash when it is not possible to\n+\tdelete or close the file when the call to gnatmake was successful.\n+\n+2011-08-05  Yannick Moy  <moy@adacore.com>\n+\n+\t* gnat1drv.adb (Adjust_Global_Switches): in ALFA mode, set\n+\tGlobal_Discard_Names.\n+\n+2011-08-05  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sinfo.ads: comments on use of entity field for aspect specifications.\n+\n+2011-08-05  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch12.adb (Reset_Entity): If the entity field of the associated\n+\tnode is not itself an entity but a selected component, it is a\n+\trewritten parameterless call to an en enclosing synchronized operation,\n+\tand this expansion will be performed again in the instance, so there is\n+\tno global information to preserve.\n+\n 2011-08-05  Javier Miranda  <miranda@adacore.com>\n \n \t* exp_disp.adb (Set_All_DT_Position): Cleanup code and improve support"}, {"sha": "653a10c1990a059f106d8a8801c84e4ccfa4414d", "filename": "gcc/ada/gnat1drv.adb", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fgnat1drv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fgnat1drv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat1drv.adb?ref=822868aa564816380d7928a6ead984524abc8259", "patch": "@@ -464,6 +464,10 @@ procedure Gnat1drv is\n \n          Warning_Mode := Suppress;\n \n+         --  Suppress the generation of name tables for enumerations\n+\n+         Global_Discard_Names := True;\n+\n          --  Always perform semantics and generate ALI files in ALFA mode,\n          --  so that a gnatmake -c -k will proceed further when possible.\n "}, {"sha": "ec9c4e97b4483baa2e02aafb02c2685a10d6b83f", "filename": "gcc/ada/gnatcmd.adb", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fgnatcmd.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fgnatcmd.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatcmd.adb?ref=822868aa564816380d7928a6ead984524abc8259", "patch": "@@ -927,11 +927,20 @@ procedure GNATCmd is\n             end if;\n          end loop;\n \n-         if not Keep_Temporary_Files then\n-            Delete (File);\n-         else\n-            Close (File);\n-         end if;\n+         begin\n+            if not Keep_Temporary_Files then\n+               Delete (File);\n+            else\n+               Close (File);\n+            end if;\n+\n+         --  Don't crash if it is not possible to delete or close the file,\n+         --  just ignore the situation.\n+\n+         exception\n+            when others =>\n+               null;\n+         end;\n       end if;\n    end Get_Closure;\n "}, {"sha": "278552d6d1a87fc59bddf17468281ff9c44bf482", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=822868aa564816380d7928a6ead984524abc8259", "patch": "@@ -11887,11 +11887,27 @@ package body Sem_Ch12 is\n          N2 := Get_Associated_Node (N);\n          E := Entity (N2);\n \n-         --  If the entity is an itype created as a subtype of an access type\n-         --  with a null exclusion restore source entity for proper visibility.\n-         --  The itype will be created anew in the instance.\n-\n          if Present (E) then\n+\n+            --  If the node is an entry call to an entry in an enclosing task,\n+            --  it is rewritten as a selected component. No global entity\n+            --  to preserve in this case, the expansion will be redone in the\n+            --  instance.\n+\n+            if not Nkind_In (E,\n+              N_Defining_Identifier,\n+              N_Defining_Character_Literal,\n+              N_Defining_Operator_Symbol)\n+            then\n+               Set_Associated_Node (N, Empty);\n+               Set_Etype  (N, Empty);\n+               return;\n+            end if;\n+\n+            --  If the entity is an itype created as a subtype of an access\n+            --  type with a null exclusion restore source entity for proper\n+            --  visibility. The itype will be created anew in the instance.\n+\n             if Is_Itype (E)\n               and then Ekind (E) = E_Access_Subtype\n               and then Is_Entity_Name (N)"}, {"sha": "c9e051283e22873c6dd97dc3f0dac10d265db066", "filename": "gcc/ada/sinfo.ads", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fsinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/822868aa564816380d7928a6ead984524abc8259/gcc%2Fada%2Fsinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinfo.ads?ref=822868aa564816380d7928a6ead984524abc8259", "patch": "@@ -943,6 +943,12 @@ package Sinfo is\n    --    there is no requirement that these match, and there are obscure cases\n    --    of generated code where they do not match.\n \n+   --    Note: Aspect specifications, introduced in Ada2012, require additional\n+   --    links between identifiers and various attributes. These attributes\n+   --    can be of arbitrary types, and the entity field of identifiers that\n+   --    denote aspects must be used to store arbitrary expressions for later\n+   --    semantic checks. See section on Aspect specifications for details.\n+\n    --  Entity_Or_Associated_Node (Node4-Sem)\n    --    A synonym for both Entity and Associated_Node. Used by convention in\n    --    the code when referencing this field in cases where it is not known"}]}