{"sha": "350ebd54938a632a703636bbb323f62e51471f18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUwZWJkNTQ5MzhhNjMyYTcwMzYzNmJiYjMyM2Y2MmU1MTQ3MWYxOA==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2001-10-26T08:05:08Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2001-10-26T08:05:08Z"}, "message": "tree-inline.c (remap_decl): Don't copy size and size_unit here.\n\n* tree-inline.c (remap_decl): Don't copy size and size_unit here.\n(remap_save_expr): Map a remapped SAVE_EXPR to error_mark_node.\n\nFrom-SVN: r46536", "tree": {"sha": "cfe07bea6bb16ce7c1fb93015c4dcaee7c859776", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cfe07bea6bb16ce7c1fb93015c4dcaee7c859776"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/350ebd54938a632a703636bbb323f62e51471f18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/350ebd54938a632a703636bbb323f62e51471f18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/350ebd54938a632a703636bbb323f62e51471f18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/350ebd54938a632a703636bbb323f62e51471f18/comments", "author": null, "committer": null, "parents": [{"sha": "b73c0bc87d961344377a72a3ddfdadf5695eae66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b73c0bc87d961344377a72a3ddfdadf5695eae66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b73c0bc87d961344377a72a3ddfdadf5695eae66"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "4fc1b1e337ae1aa3f0055dc973d73817f1c7b8a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350ebd54938a632a703636bbb323f62e51471f18/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350ebd54938a632a703636bbb323f62e51471f18/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=350ebd54938a632a703636bbb323f62e51471f18", "patch": "@@ -1,3 +1,8 @@\n+2001-10-26  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* tree-inline.c (remap_decl): Don't copy size and size_unit here.\n+\t(remap_save_expr): Map a remapped SAVE_EXPR to error_mark_node.\n+\n 2001-10-26  Richard Henderson  <rth@redhat.com>\n \n \t* config/alpha/alpha.h (enum reg_class): Add R24_REG, R25_REG;"}, {"sha": "25d0964ec02f8d04a1749fadaecae07b1b25aaae", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350ebd54938a632a703636bbb323f62e51471f18/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350ebd54938a632a703636bbb323f62e51471f18/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=350ebd54938a632a703636bbb323f62e51471f18", "patch": "@@ -147,8 +147,6 @@ remap_decl (decl, id)\n       /* The decl T could be a dynamic array or other variable size type,\n \t in which case some fields need to be remapped because they may\n \t contain SAVE_EXPRs.  */\n-      walk_tree (&DECL_SIZE (t), copy_body_r, id, NULL);\n-      walk_tree (&DECL_SIZE_UNIT (t), copy_body_r, id, NULL);\n       if (TREE_TYPE (t) && TREE_CODE (TREE_TYPE (t)) == ARRAY_TYPE\n \t  && TYPE_DOMAIN (TREE_TYPE (t)))\n \t{\n@@ -1373,6 +1371,9 @@ remap_save_expr (tp, st_, fn, walk_subtrees)\n       n = splay_tree_insert (st,\n \t\t\t     (splay_tree_key) *tp,\n \t\t\t     (splay_tree_value) t);\n+      /* Make sure we don't remap an already-remapped SAVE_EXPR.  */\n+      splay_tree_insert (st, (splay_tree_key) t,\n+\t\t\t (splay_tree_value) error_mark_node);\n     }\n   else\n     /* We've already walked into this SAVE_EXPR, so we needn't do it"}]}