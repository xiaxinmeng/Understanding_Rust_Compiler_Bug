{"sha": "90d3e27f3a6add0cd6892bdf07c6a2538bb709e4", "node_id": "C_kwDOANBUbNoAKDkwZDNlMjdmM2E2YWRkMGNkNjg5MmJkZjA3YzZhMjUzOGJiNzA5ZTQ", "commit": {"author": {"name": "Xi Ruoyao", "email": "xry111@xry111.site", "date": "2022-09-13T15:21:39Z"}, "committer": {"name": "Xi Ruoyao", "email": "xry111@xry111.site", "date": "2022-09-20T05:59:30Z"}, "message": "LoongArch: Prepare static PIE support\n\nStatic PIE allows us to extend the ASLR to cover static executables and\nit's not too difficult to support it.  On GCC side, we just pass a group\nof options to the linker, like other ports with static PIE support.\n\nThe real implementation of static PIE (rcrt1.o) will be added into Glibc\nlater.\n\ngcc/ChangeLog:\n\n\t* config/loongarch/gnu-user.h (GNU_USER_TARGET_LINK_SPEC): For\n\t-static-pie, pass -static -pie --no-dynamic-linker -z text to\n\tthe linker, and do not pass --dynamic-linker.", "tree": {"sha": "1c2fa4462b693fec03020dda233b4ab11186e1a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c2fa4462b693fec03020dda233b4ab11186e1a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90d3e27f3a6add0cd6892bdf07c6a2538bb709e4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQSR0PV2MB+STX3t3OisqtIOGecQ4wUCYylWwgAKCRCsqtIOGecQ\n43AIAQCTokWM/wDwUpG4kSZIN2mjZWB90jm+isS7g3gcd2DyzwEA99oGSAugYxCX\nF3IU8vFhK7CLSIuQzqQ7qFOZR3tQLww=\n=oOL6\n-----END PGP SIGNATURE-----", "payload": "tree 1c2fa4462b693fec03020dda233b4ab11186e1a1\nparent 2b61ed838c7f3f4bf54d4530c0f053b420623beb\nauthor Xi Ruoyao <xry111@xry111.site> 1663082499 +0800\ncommitter Xi Ruoyao <xry111@xry111.site> 1663653570 +0800\n\nLoongArch: Prepare static PIE support\n\nStatic PIE allows us to extend the ASLR to cover static executables and\nit's not too difficult to support it.  On GCC side, we just pass a group\nof options to the linker, like other ports with static PIE support.\n\nThe real implementation of static PIE (rcrt1.o) will be added into Glibc\nlater.\n\ngcc/ChangeLog:\n\n\t* config/loongarch/gnu-user.h (GNU_USER_TARGET_LINK_SPEC): For\n\t-static-pie, pass -static -pie --no-dynamic-linker -z text to\n\tthe linker, and do not pass --dynamic-linker.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90d3e27f3a6add0cd6892bdf07c6a2538bb709e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90d3e27f3a6add0cd6892bdf07c6a2538bb709e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90d3e27f3a6add0cd6892bdf07c6a2538bb709e4/comments", "author": {"login": "xry111", "id": 8733039, "node_id": "MDQ6VXNlcjg3MzMwMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8733039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xry111", "html_url": "https://github.com/xry111", "followers_url": "https://api.github.com/users/xry111/followers", "following_url": "https://api.github.com/users/xry111/following{/other_user}", "gists_url": "https://api.github.com/users/xry111/gists{/gist_id}", "starred_url": "https://api.github.com/users/xry111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xry111/subscriptions", "organizations_url": "https://api.github.com/users/xry111/orgs", "repos_url": "https://api.github.com/users/xry111/repos", "events_url": "https://api.github.com/users/xry111/events{/privacy}", "received_events_url": "https://api.github.com/users/xry111/received_events", "type": "User", "site_admin": false}, "committer": {"login": "xry111", "id": 8733039, "node_id": "MDQ6VXNlcjg3MzMwMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8733039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xry111", "html_url": "https://github.com/xry111", "followers_url": "https://api.github.com/users/xry111/followers", "following_url": "https://api.github.com/users/xry111/following{/other_user}", "gists_url": "https://api.github.com/users/xry111/gists{/gist_id}", "starred_url": "https://api.github.com/users/xry111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xry111/subscriptions", "organizations_url": "https://api.github.com/users/xry111/orgs", "repos_url": "https://api.github.com/users/xry111/repos", "events_url": "https://api.github.com/users/xry111/events{/privacy}", "received_events_url": "https://api.github.com/users/xry111/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b61ed838c7f3f4bf54d4530c0f053b420623beb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b61ed838c7f3f4bf54d4530c0f053b420623beb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b61ed838c7f3f4bf54d4530c0f053b420623beb"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "c5b1afe530d3176ef0d42d19888090c627b9cab8", "filename": "gcc/config/loongarch/gnu-user.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90d3e27f3a6add0cd6892bdf07c6a2538bb709e4/gcc%2Fconfig%2Floongarch%2Fgnu-user.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90d3e27f3a6add0cd6892bdf07c6a2538bb709e4/gcc%2Fconfig%2Floongarch%2Fgnu-user.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Floongarch%2Fgnu-user.h?ref=90d3e27f3a6add0cd6892bdf07c6a2538bb709e4", "patch": "@@ -40,8 +40,10 @@ along with GCC; see the file COPYING3.  If not see\n #undef GNU_USER_TARGET_LINK_SPEC\n #define GNU_USER_TARGET_LINK_SPEC \\\n   \"%{G*} %{shared} -m \" GNU_USER_LINK_EMULATION \\\n-  \"%{!shared: %{static} %{!static: %{rdynamic:-export-dynamic} \" \\\n-  \"-dynamic-linker \" GNU_USER_DYNAMIC_LINKER \"}}\"\n+  \"%{!shared: %{static} \" \\\n+  \"%{!static: %{!static-pie: %{rdynamic:-export-dynamic} \" \\\n+  \"-dynamic-linker \" GNU_USER_DYNAMIC_LINKER \"}} \" \\\n+  \"%{static-pie: -static -pie --no-dynamic-linker -z text}}\"\n \n \n /* Similar to standard Linux, but adding -ffast-math support.  */"}]}