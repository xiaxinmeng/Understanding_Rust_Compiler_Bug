{"sha": "af41c57d042d6b570c4f5de342e859f71bc67a18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWY0MWM1N2QwNDJkNmI1NzBjNGY1ZGUzNDJlODU5ZjcxYmM2N2ExOA==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-10-17T04:22:03Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-10-17T04:22:03Z"}, "message": "re PR driver/22544 (gcc ignores input file given on the command line)\n\n2005-10-16  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR driver/22544\n        * gcc.c (have_c): New static variable.\n        (have_o): Likewise.\n        (process_command): Remove declation of have_c.\n        Set have_o to 1 when handling -o.\n        (main): Add a fatel error if there are multiple\n        files specified and -o and -c/-S is passed witout\n        -combine or multiple languages.\n\nFrom-SVN: r105487", "tree": {"sha": "22064a83d217afbda03a19976677b57f94ac4a54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22064a83d217afbda03a19976677b57f94ac4a54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af41c57d042d6b570c4f5de342e859f71bc67a18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af41c57d042d6b570c4f5de342e859f71bc67a18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af41c57d042d6b570c4f5de342e859f71bc67a18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af41c57d042d6b570c4f5de342e859f71bc67a18/comments", "author": null, "committer": null, "parents": [{"sha": "d938e4612a745b6fa19fae8f68acbb3e5062cf47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d938e4612a745b6fa19fae8f68acbb3e5062cf47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d938e4612a745b6fa19fae8f68acbb3e5062cf47"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "d2d1caf78c34303d4fd03c3d0386f31d4296ddd6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af41c57d042d6b570c4f5de342e859f71bc67a18/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af41c57d042d6b570c4f5de342e859f71bc67a18/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=af41c57d042d6b570c4f5de342e859f71bc67a18", "patch": "@@ -1,3 +1,14 @@\n+2005-10-16  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR driver/22544\n+\t* gcc.c (have_c): New static variable.\n+\t(have_o): Likewise.\n+\t(process_command): Remove declation of have_c.\n+\tSet have_o to 1 when handling -o.\n+\t(main): Add a fatel error if there are multiple\n+\tfiles specified and -o and -c/-S is passed witout\n+\t-combine or multiple languages.\n+\n 2005-10-16  Daniel Berlin  <dberlin@dberlin.org>\n \n \tFix PR tree-optimization/22444"}, {"sha": "db0cd0e1596e1cf11fc237de8f8e66b05c237e05", "filename": "gcc/gcc.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af41c57d042d6b570c4f5de342e859f71bc67a18/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af41c57d042d6b570c4f5de342e859f71bc67a18/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=af41c57d042d6b570c4f5de342e859f71bc67a18", "patch": "@@ -1851,6 +1851,12 @@ static int argbuf_index;\n \n static int have_o_argbuf_index = 0;\n \n+/* Were the options -c or -S passed.  */\n+static int have_c = 0;\n+\n+/* Was the option -o passed.  */\n+static int have_o = 0;\n+\n /* This is the list of suffixes and codes (%g/%u/%U/%j) and the associated\n    temp file.  If the HOST_BIT_BUCKET is used for %j, no entry is made for\n    it here.  */\n@@ -3148,7 +3154,6 @@ process_command (int argc, const char **argv)\n   char *temp1;\n   const char *spec_lang = 0;\n   int last_language_n_infiles;\n-  int have_c = 0;\n   int lang_n_infiles = 0;\n #ifdef MODIFY_TARGET_NAME\n   int is_modify_target_name;\n@@ -3700,6 +3705,7 @@ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\\n\\n\"\n \t      goto normal_switch;\n \n \t    case 'o':\n+\t      have_o = 1;\n #if defined(HAVE_TARGET_EXECUTABLE_SUFFIX)\n \t      if (! have_c)\n \t\t{\n@@ -6425,7 +6431,7 @@ main (int argc, const char **argv)\n   if (combine_flag)\n     combine_inputs = true;\n   else\n-    combine_inputs = false;\n+    combine_inputs = false;  \n \n   for (i = 0; (int) i < n_infiles; i++)\n     {\n@@ -6456,6 +6462,9 @@ main (int argc, const char **argv)\n       infiles[i].compiled = false;\n       infiles[i].preprocessed = false;\n     }\n+    \n+  if (!combine_inputs && have_c && have_o && n_infiles > 1)\n+   fatal (\"cannot specify -o with -c or -S with multiple files\");\n \n   if (combine_flag && save_temps_flag)\n     {"}]}