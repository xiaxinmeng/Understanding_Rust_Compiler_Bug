{"sha": "e9e8efc982888dcde3d33798d208b0a81a9c442c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTllOGVmYzk4Mjg4OGRjZGUzZDMzNzk4ZDIwOGIwYTgxYTljNDQyYw==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel@linux.ibm.com", "date": "2018-10-02T15:35:52Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2018-10-02T15:35:52Z"}, "message": "S/390: Rename arch12 to z14\n\nThis is a mechanical change not impacting code generation.  With that\npatch I try to hide the artificial CPU name arch12 which we had to use\nbefore the announcement of the IBM z14 machine.  arch12 of course\nstays a valid option to -march and -mtune.  So this is just about\nmaking the code somewhat easier to read.\n\ngcc/ChangeLog:\n\n2018-10-02  Andreas Krebbel  <krebbel@linux.ibm.com>\n\n\t* common/config/s390/s390-common.c: Rename PF_ARCH12 to PF_Z14.\n\t* config/s390/s390.h (enum processor_flags): Rename PF_ARCH12 to\n\tPF_Z14.  Rename TARGET_CPU_ARCH12 to TARGET_CPU_Z14,\n\tTARGET_CPU_ARCH12_P to TARGET_CPU_Z14_P, TARGET_ARCH12 to\n\tTARGET_Z14, and TARGET_ARCH12_P to TARGET_Z14_P.\n\t* config/s390/s390.md: Likewise. Rename also the cpu attribute\n\tvalue from arch12 to z14.\n\nFrom-SVN: r264796", "tree": {"sha": "94366a20033a83adce7fbbeb26fc9e62e3e1fd28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94366a20033a83adce7fbbeb26fc9e62e3e1fd28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9e8efc982888dcde3d33798d208b0a81a9c442c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9e8efc982888dcde3d33798d208b0a81a9c442c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9e8efc982888dcde3d33798d208b0a81a9c442c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9e8efc982888dcde3d33798d208b0a81a9c442c/comments", "author": {"login": "Andreas-Krebbel", "id": 38103320, "node_id": "MDQ6VXNlcjM4MTAzMzIw", "avatar_url": "https://avatars.githubusercontent.com/u/38103320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andreas-Krebbel", "html_url": "https://github.com/Andreas-Krebbel", "followers_url": "https://api.github.com/users/Andreas-Krebbel/followers", "following_url": "https://api.github.com/users/Andreas-Krebbel/following{/other_user}", "gists_url": "https://api.github.com/users/Andreas-Krebbel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andreas-Krebbel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andreas-Krebbel/subscriptions", "organizations_url": "https://api.github.com/users/Andreas-Krebbel/orgs", "repos_url": "https://api.github.com/users/Andreas-Krebbel/repos", "events_url": "https://api.github.com/users/Andreas-Krebbel/events{/privacy}", "received_events_url": "https://api.github.com/users/Andreas-Krebbel/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8dc5696fcdc151cceb643a4f58bbd66266643f6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dc5696fcdc151cceb643a4f58bbd66266643f6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dc5696fcdc151cceb643a4f58bbd66266643f6a"}], "stats": {"total": 56, "additions": 33, "deletions": 23}, "files": [{"sha": "4085d29042059cd814910ed0c97127022a4a4ce3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e9e8efc982888dcde3d33798d208b0a81a9c442c", "patch": "@@ -1,3 +1,13 @@\n+2018-10-02  Andreas Krebbel  <krebbel@linux.ibm.com>\n+\n+\t* common/config/s390/s390-common.c: Rename PF_ARCH12 to PF_Z14.\n+\t* config/s390/s390.h (enum processor_flags): Rename PF_ARCH12 to\n+\tPF_Z14.  Rename TARGET_CPU_ARCH12 to TARGET_CPU_Z14,\n+\tTARGET_CPU_ARCH12_P to TARGET_CPU_Z14_P, TARGET_ARCH12 to\n+\tTARGET_Z14, and TARGET_ARCH12_P to TARGET_Z14_P.\n+\t* config/s390/s390.md: Likewise. Rename also the cpu attribute\n+\tvalue from arch12 to z14.\n+\n 2018-10-02  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.md (fxam<mode>2_i387_with_temp): Remove."}, {"sha": "2f728957e2541672b3ae630f3e9e63e1ef0e7f2c", "filename": "gcc/common/config/s390/s390-common.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2Fcommon%2Fconfig%2Fs390%2Fs390-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2Fcommon%2Fconfig%2Fs390%2Fs390-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Fs390%2Fs390-common.c?ref=e9e8efc982888dcde3d33798d208b0a81a9c442c", "patch": "@@ -44,9 +44,9 @@ EXPORTED_CONST int processor_flags_table[] =\n     /* z13 */    PF_IEEE_FLOAT | PF_ZARCH | PF_LONG_DISPLACEMENT\n                  | PF_EXTIMM | PF_DFP | PF_Z10 | PF_Z196 | PF_ZEC12 | PF_TX\n                  | PF_Z13 | PF_VX,\n-    /* arch12 */ PF_IEEE_FLOAT | PF_ZARCH | PF_LONG_DISPLACEMENT\n+    /* z14 */    PF_IEEE_FLOAT | PF_ZARCH | PF_LONG_DISPLACEMENT\n                  | PF_EXTIMM | PF_DFP | PF_Z10 | PF_Z196 | PF_ZEC12 | PF_TX\n-                 | PF_Z13 | PF_VX | PF_VXE | PF_ARCH12\n+                 | PF_Z13 | PF_VX | PF_VXE | PF_Z14\n   };\n \n /* Change optimizations to be performed, depending on the"}, {"sha": "bf40b4c06440d30a4951e034a315479173f1ecc5", "filename": "gcc/config/s390/s390.h", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2Fconfig%2Fs390%2Fs390.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2Fconfig%2Fs390%2Fs390.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.h?ref=e9e8efc982888dcde3d33798d208b0a81a9c442c", "patch": "@@ -38,7 +38,7 @@ enum processor_flags\n   PF_TX = 256,\n   PF_Z13 = 512,\n   PF_VX = 1024,\n-  PF_ARCH12 = 2048,\n+  PF_Z14 = 2048,\n   PF_VXE = 4096\n };\n \n@@ -90,10 +90,10 @@ enum processor_flags\n \t(s390_arch_flags & PF_VX)\n #define TARGET_CPU_VX_P(opts) \\\n \t(opts->x_s390_arch_flags & PF_VX)\n-#define TARGET_CPU_ARCH12 \\\n-\t(s390_arch_flags & PF_ARCH12)\n-#define TARGET_CPU_ARCH12_P(opts) \\\n-\t(opts->x_s390_arch_flags & PF_ARCH12)\n+#define TARGET_CPU_Z14 \\\n+\t(s390_arch_flags & PF_Z14)\n+#define TARGET_CPU_Z14_P(opts) \\\n+\t(opts->x_s390_arch_flags & PF_Z14)\n #define TARGET_CPU_VXE \\\n \t(s390_arch_flags & PF_VXE)\n #define TARGET_CPU_VXE_P(opts) \\\n@@ -143,9 +143,9 @@ enum processor_flags\n \t(TARGET_ZARCH_P (opts->x_target_flags) && TARGET_CPU_VX_P (opts) \\\n \t && TARGET_OPT_VX_P (opts->x_target_flags) \\\n \t && TARGET_HARD_FLOAT_P (opts->x_target_flags))\n-#define TARGET_ARCH12 (TARGET_ZARCH && TARGET_CPU_ARCH12)\n-#define TARGET_ARCH12_P(opts)\t\t\t\t\t\t\\\n-\t(TARGET_ZARCH_P (opts->x_target_flags) && TARGET_CPU_ARCH12_P (opts))\n+#define TARGET_Z14 (TARGET_ZARCH && TARGET_CPU_Z14)\n+#define TARGET_Z14_P(opts)\t\t\t\t\t\t\\\n+\t(TARGET_ZARCH_P (opts->x_target_flags) && TARGET_CPU_Z14_P (opts))\n #define TARGET_VXE\t\t\t\t\\\n \t(TARGET_VX && TARGET_CPU_VXE)\n #define TARGET_VXE_P(opts)\t\t\t\t\t\t\\"}, {"sha": "3bd18acb456d133c4aec929b499d78515d3e9011", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9e8efc982888dcde3d33798d208b0a81a9c442c/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=e9e8efc982888dcde3d33798d208b0a81a9c442c", "patch": "@@ -506,11 +506,11 @@\n ;; Processor type.  This attribute must exactly match the processor_type\n ;; enumeration in s390.h.\n \n-(define_attr \"cpu\" \"z900,z990,z9_109,z9_ec,z10,z196,zEC12,z13,arch12\"\n+(define_attr \"cpu\" \"z900,z990,z9_109,z9_ec,z10,z196,zEC12,z13,z14\"\n   (const (symbol_ref \"s390_tune_attr\")))\n \n (define_attr \"cpu_facility\"\n-  \"standard,ieee,zarch,cpu_zarch,longdisp,extimm,dfp,z10,z196,zEC12,vx,z13,arch12,vxe\"\n+  \"standard,ieee,zarch,cpu_zarch,longdisp,extimm,dfp,z10,z196,zEC12,vx,z13,z14,vxe\"\n   (const_string \"standard\"))\n \n (define_attr \"enabled\" \"\"\n@@ -560,8 +560,8 @@\n               (match_test \"TARGET_Z13\"))\n \t (const_int 1)\n \n-         (and (eq_attr \"cpu_facility\" \"arch12\")\n-              (match_test \"TARGET_ARCH12\"))\n+         (and (eq_attr \"cpu_facility\" \"z14\")\n+              (match_test \"TARGET_Z14\"))\n \t (const_int 1)\n \n          (and (eq_attr \"cpu_facility\" \"vxe\")\n@@ -5866,7 +5866,7 @@\n         (plus:DI (sign_extend:DI (match_operand:HI 2 \"memory_operand\"    \"T\"))\n \t\t (match_operand:DI                 1 \"register_operand\"  \"0\")))\n    (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_ARCH12\"\n+  \"TARGET_Z14\"\n   \"agh\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RXY\")])\n \n@@ -6275,7 +6275,7 @@\n         (minus:DI (match_operand:DI                 1 \"register_operand\"  \"0\")\n                   (sign_extend:DI (match_operand:HI 2 \"memory_operand\"    \"T\"))))\n    (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_ARCH12\"\n+  \"TARGET_Z14\"\n   \"sgh\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RXY\")])\n \n@@ -6656,15 +6656,15 @@\n    msgfi\\t%0,%2\"\n   [(set_attr \"op_type\"      \"RRE,RRF,RI,RXY,RIL\")\n    (set_attr \"type\"         \"imuldi\")\n-   (set_attr \"cpu_facility\" \"*,arch12,*,*,z10\")])\n+   (set_attr \"cpu_facility\" \"*,z14,*,*,z10\")])\n \n (define_insn \"mulditi3\"\n   [(set (match_operand:TI 0 \"register_operand\"               \"=d,d\")\n         (mult:TI (sign_extend:TI\n \t\t  (match_operand:DI 1 \"register_operand\"     \"%d,0\"))\n \t\t (sign_extend:TI\n \t\t  (match_operand:DI 2 \"nonimmediate_operand\" \" d,T\"))))]\n-  \"TARGET_ARCH12\"\n+  \"TARGET_Z14\"\n   \"@\n    mgrk\\t%0,%1,%2\n    mg\\t%0,%2\"\n@@ -6677,7 +6677,7 @@\n \t\t  (match_operand:DI 1 \"nonimmediate_operand\" \"%d,T\"))\n \t\t (sign_extend:TI\n \t\t  (match_operand:DI 2 \"register_operand\"     \" d,0\"))))]\n-  \"TARGET_ARCH12\"\n+  \"TARGET_Z14\"\n   \"@\n    mgrk\\t%0,%1,%2\n    mg\\t%0,%1\"\n@@ -6687,7 +6687,7 @@\n   [(set (match_operand:DI                          0 \"register_operand\" \"=d\")\n         (mult:DI (sign_extend:DI (match_operand:HI 2 \"memory_operand\"    \"T\"))\n                  (match_operand:DI                 1 \"register_operand\"  \"0\")))]\n-  \"TARGET_ARCH12\"\n+  \"TARGET_Z14\"\n   \"mgh\\t%0,%2\"\n   [(set_attr \"op_type\" \"RXY\")])\n \n@@ -6731,7 +6731,7 @@\n    msfi\\t%0,%2\"\n   [(set_attr \"op_type\"      \"RRE,RRF,RI,RX,RXY,RIL\")\n    (set_attr \"type\"         \"imulsi,*,imulhi,imulsi,imulsi,imulsi\")\n-   (set_attr \"cpu_facility\" \"*,arch12,*,*,longdisp,z10\")])\n+   (set_attr \"cpu_facility\" \"*,z14,*,*,longdisp,z10\")])\n \n ;\n ; mulsidi3 instruction pattern(s).\n@@ -9352,7 +9352,7 @@\n {\n   if (address_operand (operands[0], GET_MODE (operands[0])))\n     ;\n-  else if (TARGET_ARCH12\n+  else if (TARGET_Z14\n \t   && GET_MODE (operands[0]) == Pmode\n \t   && memory_operand (operands[0], Pmode))\n     ;\n@@ -9510,7 +9510,7 @@\n  [(set_attr \"op_type\" \"RR,RXY\")\n   (set_attr \"type\"  \"branch\")\n   (set_attr \"atype\" \"agen\")\n-  (set_attr \"cpu_facility\" \"*,arch12\")])\n+  (set_attr \"cpu_facility\" \"*,z14\")])\n \n ;\n ; casesi instruction pattern(s)."}]}