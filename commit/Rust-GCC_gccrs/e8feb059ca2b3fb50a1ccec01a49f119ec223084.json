{"sha": "e8feb059ca2b3fb50a1ccec01a49f119ec223084", "node_id": "C_kwDOANBUbNoAKGU4ZmViMDU5Y2EyYjNmYjUwYTFjY2VjMDFhNDlmMTE5ZWMyMjMwODQ", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-01-18T09:31:15Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-01-18T09:32:39Z"}, "message": "Add check_effective_target_python3_module.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.src/maintainers.exp: Use\n\tcheck_effective_target_python3_module for checking of unicode\n\tmodule.\n\t* lib/target-supports.exp: Add\n\tcheck_effective_target_python3_module.", "tree": {"sha": "286b6410020c17cd7f816d04e0baba11a1965ebe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/286b6410020c17cd7f816d04e0baba11a1965ebe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e8feb059ca2b3fb50a1ccec01a49f119ec223084", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8feb059ca2b3fb50a1ccec01a49f119ec223084", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8feb059ca2b3fb50a1ccec01a49f119ec223084", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8feb059ca2b3fb50a1ccec01a49f119ec223084/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "00dc7877ee02634d4837d024e36b55bef6b9d49c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00dc7877ee02634d4837d024e36b55bef6b9d49c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00dc7877ee02634d4837d024e36b55bef6b9d49c"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "045f7ec0f676ba1bba0bea32225915d36a9d883b", "filename": "gcc/testsuite/gcc.src/maintainers.exp", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8feb059ca2b3fb50a1ccec01a49f119ec223084/gcc%2Ftestsuite%2Fgcc.src%2Fmaintainers.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8feb059ca2b3fb50a1ccec01a49f119ec223084/gcc%2Ftestsuite%2Fgcc.src%2Fmaintainers.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.src%2Fmaintainers.exp?ref=e8feb059ca2b3fb50a1ccec01a49f119ec223084", "patch": "@@ -29,6 +29,12 @@ proc gcc_src_run_maintainers_verify_sh {} {\n       return\n     }\n \n+    if { ![check_effective_target_python3_module \"unidecode\"] } {\n+      unsupported \"$script 'unidecode' python3 module is missing\"\n+      return\n+    }\n+\n+\n     set result [remote_exec host $contrib/$script $maintainers]\n     set status [lindex $result 0]\n     if { $status == 0 } then {"}, {"sha": "cffcdb5f049f599d602182599accc20c3f0a6b77", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8feb059ca2b3fb50a1ccec01a49f119ec223084/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8feb059ca2b3fb50a1ccec01a49f119ec223084/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=e8feb059ca2b3fb50a1ccec01a49f119ec223084", "patch": "@@ -11735,6 +11735,18 @@ proc check_effective_target_recent_python3 { } {\n     }\n }\n \n+# Return 1 if python3 contains a module\n+\n+proc check_effective_target_python3_module { module } {\n+    set result [remote_exec host \"python3 -c \\\"import $module\\\"\"]\n+    set status [lindex $result 0]\n+    if { $status == 0 } then {\n+        return 1;\n+    } else {\n+        return 0;\n+    }\n+}\n+\n # Return 1 if pytest module is available for python3.\n \n proc check_effective_target_pytest3 { } {"}]}