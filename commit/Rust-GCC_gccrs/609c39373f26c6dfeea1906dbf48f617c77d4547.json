{"sha": "609c39373f26c6dfeea1906dbf48f617c77d4547", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA5YzM5MzczZjI2YzZkZmVlYTE5MDZkYmY0OGY2MTdjNzdkNDU0Nw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-09-08T19:25:04Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-09-08T19:25:04Z"}, "message": "re PR rtl-optimization/17186 (ICE in move_for_stack_reg, at reg-stack.c:1065)\n\n        PR rtl-opt/17186\n        * function.c (expand_function_end): Have fall-off-the-end\n        return path jump around return register setup.\n\nFrom-SVN: r87199", "tree": {"sha": "47cc9395c91fc7803c2237e6398a38122f55b5e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/47cc9395c91fc7803c2237e6398a38122f55b5e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/609c39373f26c6dfeea1906dbf48f617c77d4547", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/609c39373f26c6dfeea1906dbf48f617c77d4547", "html_url": "https://github.com/Rust-GCC/gccrs/commit/609c39373f26c6dfeea1906dbf48f617c77d4547", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/609c39373f26c6dfeea1906dbf48f617c77d4547/comments", "author": null, "committer": null, "parents": [{"sha": "4e5b002baa5ce9097e3a1a4798b31c83f0e2ef56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e5b002baa5ce9097e3a1a4798b31c83f0e2ef56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e5b002baa5ce9097e3a1a4798b31c83f0e2ef56"}], "stats": {"total": 30, "additions": 23, "deletions": 7}, "files": [{"sha": "da841e6618fc2e71a4bc2f50fc3e2f27cc3b5d5b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/609c39373f26c6dfeea1906dbf48f617c77d4547/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/609c39373f26c6dfeea1906dbf48f617c77d4547/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=609c39373f26c6dfeea1906dbf48f617c77d4547", "patch": "@@ -1,3 +1,9 @@\n+2004-09-08  Richard Henderson  <rth@redhat.com>\n+\n+\tPR rtl-opt/17186\n+\t* function.c (expand_function_end): Have fall-off-the-end\n+\treturn path jump around return register setup.\n+\n 2004-09-08  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \t* config/sparc/sparc.c (sparc_indent_opcode): New variable.\n@@ -34,7 +40,6 @@\n \t* doc/invoke.texi: Document -segaddr, -segs_read_only_addr and\n \t-segs_read_write_addr.\n \n-\n 2004-09-08  Richard Henderson  <rth@redhat.com>\n \n \t* function.c (reference_callee_copied): New."}, {"sha": "452de0ccb40aef6c36f3543f929f90475bc706f7", "filename": "gcc/function.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/609c39373f26c6dfeea1906dbf48f617c77d4547/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/609c39373f26c6dfeea1906dbf48f617c77d4547/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=609c39373f26c6dfeea1906dbf48f617c77d4547", "patch": "@@ -4411,20 +4411,19 @@ expand_function_end (void)\n \n   /* Emit the actual code to clobber return register.  */\n   {\n-    rtx seq, after;\n+    rtx seq;\n \n     start_sequence ();\n     clobber_return_register ();\n+    expand_naked_return ();\n     seq = get_insns ();\n     end_sequence ();\n \n-    after = emit_insn_after (seq, clobber_after);\n+    emit_insn_after (seq, clobber_after);\n   }\n \n-  /* Output the label for the naked return from the function, if one is\n-     expected.  This is currently used only by __builtin_return.  */\n-  if (naked_return_label)\n-    emit_label (naked_return_label);\n+  /* Output the label for the naked return from the function.  */\n+  emit_label (naked_return_label);\n \n   /* ??? This should no longer be necessary since stupid is no longer with\n      us, but there are some parts of the compiler (eg reload_combine, and"}, {"sha": "f52bf5ee0d48d38fdb6c4850829464cb5009206f", "filename": "gcc/testsuite/gcc.c-torture/compile/20040908-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/609c39373f26c6dfeea1906dbf48f617c77d4547/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040908-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/609c39373f26c6dfeea1906dbf48f617c77d4547/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040908-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040908-1.c?ref=609c39373f26c6dfeea1906dbf48f617c77d4547", "patch": "@@ -0,0 +1,12 @@\n+/* PR 17186 */\n+\n+double foo()\n+{\n+    int i;\n+    double d;\n+\n+    if (i)\n+        bar();\n+    else\n+        if (d) return 0;\n+}"}]}