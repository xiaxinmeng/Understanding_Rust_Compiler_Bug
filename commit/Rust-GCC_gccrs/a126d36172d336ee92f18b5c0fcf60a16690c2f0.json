{"sha": "a126d36172d336ee92f18b5c0fcf60a16690c2f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEyNmQzNjE3MmQzMzZlZTkyZjE4YjVjMGZjZjYwYTE2NjkwYzJmMA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-12-06T10:28:31Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-12-06T10:28:31Z"}, "message": "re PR fortran/88304 (ICE in use_pointer_in_frame, at tree-nested.c:267)\n\n\tPR fortran/88304\n\t* tree-nested.c (convert_nonlocal_reference_stmt): Remove clobbers\n\tfor non-local automatic decls.\n\n\t* gfortran.fortran-torture/compile/pr88304.f90: New test.\n\nFrom-SVN: r266847", "tree": {"sha": "03fb22959a96145fd9a067fb30bfc92fe687b2df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03fb22959a96145fd9a067fb30bfc92fe687b2df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a126d36172d336ee92f18b5c0fcf60a16690c2f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a126d36172d336ee92f18b5c0fcf60a16690c2f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a126d36172d336ee92f18b5c0fcf60a16690c2f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a126d36172d336ee92f18b5c0fcf60a16690c2f0/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6a9025a01fbcf15c7a39b4c7af19cbdf7def8998", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a9025a01fbcf15c7a39b4c7af19cbdf7def8998", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a9025a01fbcf15c7a39b4c7af19cbdf7def8998"}], "stats": {"total": 50, "additions": 50, "deletions": 0}, "files": [{"sha": "b60efcf4821fa54aa13a759b9dae0f9fee0af254", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a126d36172d336ee92f18b5c0fcf60a16690c2f0", "patch": "@@ -1,3 +1,9 @@\n+2018-12-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR fortran/88304\n+\t* tree-nested.c (convert_nonlocal_reference_stmt): Remove clobbers\n+\tfor non-local automatic decls.\n+\n 2018-12-05  David Edelsohn  <dje.gcc@gmail.com>\n \n \t* config/rs6000/aix72.h (ASM_DEFAULT_SPEC): Match Power7 processor"}, {"sha": "bc5bf6720ecc51d028300a6ef48ee511b210a992", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a126d36172d336ee92f18b5c0fcf60a16690c2f0", "patch": "@@ -1,3 +1,8 @@\n+2018-12-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR fortran/88304\n+\t* gfortran.fortran-torture/compile/pr88304.f90: New test.\n+\n 2018-12-06  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/63184"}, {"sha": "fb69b8c9918ea58f884c43c34377cf8c2a790dac", "filename": "gcc/testsuite/gfortran.fortran-torture/compile/pr88304.f90", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr88304.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr88304.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr88304.f90?ref=a126d36172d336ee92f18b5c0fcf60a16690c2f0", "patch": "@@ -0,0 +1,24 @@\n+! PR fortran/88304\n+\n+module pr88304\n+  implicit none\n+  type t\n+     integer :: b = -1\n+  end type t\n+contains\n+  subroutine f1 (x, y)\n+    integer, intent(out) :: x, y\n+    x = 5\n+    y = 6\n+  end subroutine f1\n+  subroutine f2 ()\n+    type(t) :: x\n+    integer :: y\n+    call f3\n+    if (x%b .ne. 5 .or. y .ne. 6) stop 1\n+  contains\n+    subroutine f3\n+      call f1 (x%b, y)\n+    end subroutine f3\n+  end subroutine f2\n+end module pr88304"}, {"sha": "ea54246657449be315a07450734c62914d67ebe2", "filename": "gcc/tree-nested.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2Ftree-nested.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a126d36172d336ee92f18b5c0fcf60a16690c2f0/gcc%2Ftree-nested.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-nested.c?ref=a126d36172d336ee92f18b5c0fcf60a16690c2f0", "patch": "@@ -1648,6 +1648,21 @@ convert_nonlocal_reference_stmt (gimple_stmt_iterator *gsi, bool *handled_ops_p,\n       *handled_ops_p = false;\n       return NULL_TREE;\n \n+    case GIMPLE_ASSIGN:\n+      if (gimple_clobber_p (stmt))\n+\t{\n+\t  tree lhs = gimple_assign_lhs (stmt);\n+\t  if (DECL_P (lhs)\n+\t      && !(TREE_STATIC (lhs) || DECL_EXTERNAL (lhs))\n+\t      && decl_function_context (lhs) != info->context)\n+\t    {\n+\t      gsi_replace (gsi, gimple_build_nop (), true);\n+\t      break;\n+\t    }\n+\t}\n+      *handled_ops_p = false;\n+      return NULL_TREE;\n+\n     default:\n       /* For every other statement that we are not interested in\n \t handling here, let the walker traverse the operands.  */"}]}