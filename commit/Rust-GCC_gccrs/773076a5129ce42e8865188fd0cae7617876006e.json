{"sha": "773076a5129ce42e8865188fd0cae7617876006e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzczMDc2YTUxMjljZTQyZTg4NjUxODhmZDBjYWU3NjE3ODc2MDA2ZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-11-23T22:55:05Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-11-23T22:55:05Z"}, "message": "re PR ada/83091 (ICE with -g in arm-eabi compilation)\n\n\tPR ada/83091\n\t* gcc-interface/decl.c (gnat_to_gnu_entity): Do not build a variant\n\ttype for the implementation type of a packed array.\n\nFrom-SVN: r255125", "tree": {"sha": "9d1dfd58545ec36581ee5a407b7e9596ae8c4445", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9d1dfd58545ec36581ee5a407b7e9596ae8c4445"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/773076a5129ce42e8865188fd0cae7617876006e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773076a5129ce42e8865188fd0cae7617876006e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/773076a5129ce42e8865188fd0cae7617876006e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773076a5129ce42e8865188fd0cae7617876006e/comments", "author": null, "committer": null, "parents": [{"sha": "d69f1ec7d19f3770450a6215395073dd911e5d20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d69f1ec7d19f3770450a6215395073dd911e5d20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d69f1ec7d19f3770450a6215395073dd911e5d20"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "bf899e2311970f687c3d57cbd428a95970ed29fa", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/773076a5129ce42e8865188fd0cae7617876006e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/773076a5129ce42e8865188fd0cae7617876006e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=773076a5129ce42e8865188fd0cae7617876006e", "patch": "@@ -1,3 +1,9 @@\n+2017-11-23  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR ada/83091\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity): Do not build a variant\n+\ttype for the implementation type of a packed array.\n+\n 2017-11-23  Mike Stump  <mikestump@comcast.net>\n             Eric Botcazou  <ebotcazou@adacore.com>\n "}, {"sha": "77515c0bcd2f3be48779a920fb946f7f748061c8", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/773076a5129ce42e8865188fd0cae7617876006e/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/773076a5129ce42e8865188fd0cae7617876006e/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=773076a5129ce42e8865188fd0cae7617876006e", "patch": "@@ -4568,7 +4568,11 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, bool definition)\n \t\t\t     ? ALIAS_SET_COPY : ALIAS_SET_SUPERSET);\n \t}\n \n-      if (Treat_As_Volatile (gnat_entity))\n+      /* Finally get to the appropriate variant, except for the implementation\n+\t type of a packed array because the GNU type might be further adjusted\n+\t when the original array type is itself processed.  */\n+      if (Treat_As_Volatile (gnat_entity)\n+\t  && !Is_Packed_Array_Impl_Type (gnat_entity))\n \t{\n \t  const int quals\n \t    = TYPE_QUAL_VOLATILE"}]}