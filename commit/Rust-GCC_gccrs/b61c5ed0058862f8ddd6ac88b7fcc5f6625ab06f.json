{"sha": "b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjYxYzVlZDAwNTg4NjJmOGRkZDZhYzg4YjdmY2M1ZjY2MjVhYjA2Zg==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2001-01-13T14:23:04Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-01-13T14:23:04Z"}, "message": "c-lex.c (init_c_lex): Use cpp_get_callbacks to set callbacks.\n\n        * c-lex.c (init_c_lex): Use cpp_get_callbacks to set\n        callbacks.\n        * c-parse.in (finish_parse): Use cpp_errors.\n        (__yylex): Use return value of cpp_pop_buffer.\n        * cp/lex.c (finish_parse): Use cpp_errors.\n        * cp/spew.c (read_token): Use return value of cpp_pop_buffer.\n\nFrom-SVN: r38982", "tree": {"sha": "790358caf003cb815d8295a50caabbc24276b785", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/790358caf003cb815d8295a50caabbc24276b785"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/comments", "author": null, "committer": null, "parents": [{"sha": "f14269a00c221b575842571ca665eb4b454da1d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f14269a00c221b575842571ca665eb4b454da1d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f14269a00c221b575842571ca665eb4b454da1d5"}], "stats": {"total": 32, "additions": 21, "deletions": 11}, "files": [{"sha": "c73d1c60428d03e688597c0e93249e08a349f971", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "patch": "@@ -1,3 +1,12 @@\n+2001-01-13  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+        * c-lex.c (init_c_lex): Use cpp_get_callbacks to set\n+        callbacks.\n+        * c-parse.in (finish_parse): Use cpp_errors.\n+        (__yylex): Use return value of cpp_pop_buffer.\n+        * cp/lex.c (finish_parse): Use cpp_errors.\n+        * cp/spew.c (read_token): Use return value of cpp_pop_buffer.\n+\n Sat Jan 13 16:57:40 2001  Denis Chertykov  <denisc@overta.ru>\n \n \t* README.AVR: URLs corrected."}, {"sha": "f30cd715cbd789657077627b40d96279055a9c48", "filename": "gcc/c-lex.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fc-lex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fc-lex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-lex.c?ref=b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "patch": "@@ -99,6 +99,7 @@ const char *\n init_c_lex (filename)\n      const char *filename;\n {\n+  struct cpp_callbacks *cb;\n   struct c_fileinfo *toplevel;\n \n   orig_filename = filename;\n@@ -121,16 +122,18 @@ init_c_lex (filename)\n   GET_ENVIRONMENT (literal_codeset, \"LANG\");\n #endif\n \n-  parse_in->cb.ident = cb_ident;\n-  parse_in->cb.file_change = cb_file_change;\n-  parse_in->cb.def_pragma = cb_def_pragma;\n+  cb = cpp_get_callbacks (parse_in);\n+\n+  cb->ident = cb_ident;\n+  cb->file_change = cb_file_change;\n+  cb->def_pragma = cb_def_pragma;\n \n   /* Set the debug callbacks if we can use them.  */\n   if (debug_info_level == DINFO_LEVEL_VERBOSE\n       && (write_symbols == DWARF_DEBUG || write_symbols == DWARF2_DEBUG))\n     {\n-      parse_in->cb.define = cb_define;\n-      parse_in->cb.undef = cb_undef;\n+      cb->define = cb_define;\n+      cb->undef = cb_undef;\n     }\n \n   if (filename == 0 || !strcmp (filename, \"-\"))"}, {"sha": "daff75f3f512e57d6861ace73705c9a7b3e5d0b0", "filename": "gcc/c-parse.in", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "patch": "@@ -3161,7 +3161,7 @@ void\n finish_parse ()\n {\n   cpp_finish (parse_in);\n-  errorcount += parse_in->errors;\n+  errorcount += cpp_errors (parse_in);\n }\n \n #define NAME(type) cpp_type2name (type)\n@@ -3257,8 +3257,7 @@ _yylex ()\n     case CPP_DOT:\t\t\t\t\treturn '.';\n \n     case CPP_EOF:\n-      cpp_pop_buffer (parse_in);\n-      if (! CPP_BUFFER (parse_in))\n+      if (cpp_pop_buffer (parse_in) == 0)\n \treturn 0;\n       goto retry;\n "}, {"sha": "c8d6587f784f40ccd7134ae10387dd9793ff9faa", "filename": "gcc/cp/lex.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fcp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fcp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Flex.c?ref=b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "patch": "@@ -755,7 +755,7 @@ void\n finish_parse ()\n {\n   cpp_finish (parse_in);\n-  errorcount += parse_in->errors;\n+  errorcount += cpp_errors (parse_in);\n }\n \f\n inline void"}, {"sha": "ba2013b8142948b8e4895d958336f187d993245f", "filename": "gcc/cp/spew.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fcp%2Fspew.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f/gcc%2Fcp%2Fspew.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fspew.c?ref=b61c5ed0058862f8ddd6ac88b7fcc5f6625ab06f", "patch": "@@ -329,8 +329,7 @@ read_token (t)\n #undef YYCODE\n \n     case CPP_EOF:\n-      cpp_pop_buffer (parse_in);\n-      if (CPP_BUFFER (parse_in))\n+      if (cpp_pop_buffer (parse_in) != 0)\n \tgoto retry;\n       t->yychar = 0;\n       break;"}]}