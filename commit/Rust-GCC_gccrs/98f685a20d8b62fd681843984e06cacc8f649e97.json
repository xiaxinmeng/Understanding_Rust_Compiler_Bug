{"sha": "98f685a20d8b62fd681843984e06cacc8f649e97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThmNjg1YTIwZDhiNjJmZDY4MTg0Mzk4NGUwNmNhY2M4ZjY0OWU5Nw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-11-14T07:46:10Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-11-14T07:46:10Z"}, "message": "New test.\n\nFrom-SVN: r73581", "tree": {"sha": "57f612daa6f9ba02246c0f346c44062af24197da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57f612daa6f9ba02246c0f346c44062af24197da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98f685a20d8b62fd681843984e06cacc8f649e97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98f685a20d8b62fd681843984e06cacc8f649e97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98f685a20d8b62fd681843984e06cacc8f649e97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98f685a20d8b62fd681843984e06cacc8f649e97/comments", "author": null, "committer": null, "parents": [{"sha": "aede75ed619d58117c8b544975eeedccadece34c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aede75ed619d58117c8b544975eeedccadece34c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aede75ed619d58117c8b544975eeedccadece34c"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "9555b3789af71b793ec63437f36dfa9e26c23cf3", "filename": "gcc/testsuite/g++.dg/eh/dtor2.C", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98f685a20d8b62fd681843984e06cacc8f649e97/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fdtor2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98f685a20d8b62fd681843984e06cacc8f649e97/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fdtor2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fdtor2.C?ref=98f685a20d8b62fd681843984e06cacc8f649e97", "patch": "@@ -0,0 +1,30 @@\n+// PR c++/12751\n+// tree-ssa eh lowering bug ran a destructor twice for one object\n+// { dg-do run }\n+\n+static int check;\n+\n+struct Y {\n+  Y();\n+  ~Y();\n+};\n+\n+void foo() {\n+  Y y1;\n+  Y y2;\n+  switch(0) {\n+    case 1: {\n+        Y y3;\n+        return;\n+      }\n+  }\n+}\n+\n+Y::Y() { ++check; }\n+Y::~Y() { --check; }\n+\n+int main()\n+{\n+  foo ();\n+  return check;\n+}"}]}