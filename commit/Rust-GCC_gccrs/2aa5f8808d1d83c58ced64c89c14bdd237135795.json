{"sha": "2aa5f8808d1d83c58ced64c89c14bdd237135795", "node_id": "C_kwDOANBUbNoAKDJhYTVmODgwOGQxZDgzYzU4Y2VkNjRjODljMTRiZGQyMzcxMzU3OTU", "commit": {"author": {"name": "Robin Dapp", "email": "rdapp@linux.ibm.com", "date": "2022-09-06T06:56:04Z"}, "committer": {"name": "Robin Dapp", "email": "rdapp@linux.ibm.com", "date": "2022-09-14T11:21:10Z"}, "message": "testsuite/s390: Add -mzarch to ifcvt test cases.\n\nAdd missing -mzarch to ifcvt test cases.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/s390/ifcvt-one-insn-bool.c: Add -mzarch.\n\t* gcc.target/s390/ifcvt-one-insn-char.c: Dito.\n\t* gcc.target/s390/ifcvt-two-insns-bool.c: Dito.\n\t* gcc.target/s390/ifcvt-two-insns-int.c: Dito.\n\t* gcc.target/s390/ifcvt-two-insns-long.c: Add -mzarch and change\n\tlong into long long.", "tree": {"sha": "3132cf95b93992be6de7ad3c340be070c95e839f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3132cf95b93992be6de7ad3c340be070c95e839f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2aa5f8808d1d83c58ced64c89c14bdd237135795", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aa5f8808d1d83c58ced64c89c14bdd237135795", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2aa5f8808d1d83c58ced64c89c14bdd237135795", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aa5f8808d1d83c58ced64c89c14bdd237135795/comments", "author": {"login": "rdapp-ibm", "id": 80318053, "node_id": "MDQ6VXNlcjgwMzE4MDUz", "avatar_url": "https://avatars.githubusercontent.com/u/80318053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdapp-ibm", "html_url": "https://github.com/rdapp-ibm", "followers_url": "https://api.github.com/users/rdapp-ibm/followers", "following_url": "https://api.github.com/users/rdapp-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/rdapp-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdapp-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdapp-ibm/subscriptions", "organizations_url": "https://api.github.com/users/rdapp-ibm/orgs", "repos_url": "https://api.github.com/users/rdapp-ibm/repos", "events_url": "https://api.github.com/users/rdapp-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/rdapp-ibm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rdapp-ibm", "id": 80318053, "node_id": "MDQ6VXNlcjgwMzE4MDUz", "avatar_url": "https://avatars.githubusercontent.com/u/80318053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdapp-ibm", "html_url": "https://github.com/rdapp-ibm", "followers_url": "https://api.github.com/users/rdapp-ibm/followers", "following_url": "https://api.github.com/users/rdapp-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/rdapp-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdapp-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdapp-ibm/subscriptions", "organizations_url": "https://api.github.com/users/rdapp-ibm/orgs", "repos_url": "https://api.github.com/users/rdapp-ibm/repos", "events_url": "https://api.github.com/users/rdapp-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/rdapp-ibm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "48970cbaed5d16db286db001538429d8de4d8bae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48970cbaed5d16db286db001538429d8de4d8bae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48970cbaed5d16db286db001538429d8de4d8bae"}], "stats": {"total": 21, "additions": 11, "deletions": 10}, "files": [{"sha": "0c8c2f879a692c0b27b6d697e24155249a7e4e18", "filename": "gcc/testsuite/gcc.target/s390/ifcvt-one-insn-bool.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-one-insn-bool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-one-insn-bool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-one-insn-bool.c?ref=2aa5f8808d1d83c58ced64c89c14bdd237135795", "patch": "@@ -1,7 +1,7 @@\n /* Check load on condition for bool.  */\n \n /* { dg-do compile { target { s390*-*-* } } } */\n-/* { dg-options \"-O2 -march=z13\" } */\n+/* { dg-options \"-O2 -march=z13 -mzarch\" } */\n \n /* { dg-final { scan-assembler \"lochinh\\t%r.?,1\" } } */\n #include <stdbool.h>"}, {"sha": "8c8e0ae02dfc691b37b5358b0cddfd6c4c659f29", "filename": "gcc/testsuite/gcc.target/s390/ifcvt-one-insn-char.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-one-insn-char.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-one-insn-char.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-one-insn-char.c?ref=2aa5f8808d1d83c58ced64c89c14bdd237135795", "patch": "@@ -1,7 +1,7 @@\n /* Check load on condition for global char.  */\n \n /* { dg-do compile { target { s390*-*-* } } } */\n-/* { dg-options \"-O2 -march=z13\" } */\n+/* { dg-options \"-O2 -march=z13 -mzarch\" } */\n \n /* { dg-final { scan-assembler \"locrnh\\t%r.?,%r.?\" } } */\n #include <stdbool.h>"}, {"sha": "1027ddceb9354ab23ac213cdda36e26d0d2cd6e4", "filename": "gcc/testsuite/gcc.target/s390/ifcvt-two-insns-bool.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-bool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-bool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-bool.c?ref=2aa5f8808d1d83c58ced64c89c14bdd237135795", "patch": "@@ -1,7 +1,7 @@\n /* Check if conversion for two instructions.  */\n \n /* { dg-do run } */\n-/* { dg-options \"-O2 -march=z13 --save-temps\" } */\n+/* { dg-options \"-O2 -march=z13 -mzarch --save-temps\" } */\n \n /* { dg-final { scan-assembler \"lochih\\t%r.?,1\" } } */\n /* { dg-final { scan-assembler \"locrh\\t.*\" } } */"}, {"sha": "fc6946f2466daaa3c25c4434930d31f59f8de93f", "filename": "gcc/testsuite/gcc.target/s390/ifcvt-two-insns-int.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-int.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-int.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-int.c?ref=2aa5f8808d1d83c58ced64c89c14bdd237135795", "patch": "@@ -1,7 +1,7 @@\n /* Check if conversion for two instructions.  */\n \n /* { dg-do run } */\n-/* { dg-options \"-O2 -march=z13 --save-temps\" } */\n+/* { dg-options \"-O2 -march=z13 -mzarch --save-temps\" } */\n \n /* { dg-final { scan-assembler \"lochih\\t%r.?,1\" } } */\n /* { dg-final { scan-assembler \"locrh\\t.*\" } } */"}, {"sha": "51af4985247a19bdbc1b730febc0ad30e492b6fd", "filename": "gcc/testsuite/gcc.target/s390/ifcvt-two-insns-long.c", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-long.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aa5f8808d1d83c58ced64c89c14bdd237135795/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-long.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fifcvt-two-insns-long.c?ref=2aa5f8808d1d83c58ced64c89c14bdd237135795", "patch": "@@ -1,19 +1,20 @@\n /* Check if conversion for two instructions.  */\n \n /* { dg-do run } */\n-/* { dg-options \"-O2 -march=z13 --save-temps\" } */\n+/* { dg-options \"-O2 -march=z13 -mzarch --save-temps\" } */\n \n /* { dg-final { scan-assembler \"locghih\\t%r.?,1\" } } */\n /* { dg-final { scan-assembler \"locgrh\\t.*\" } } */\n+\n #include <limits.h>\n #include <stdio.h>\n #include <assert.h>\n \n __attribute__ ((noinline))\n-long foo (long *a, unsigned long n)\n+long long foo (long long *a, unsigned long long n)\n {\n-  long min = 999999;\n-  long bla = 0;\n+  long long min = 999999;\n+  long long bla = 0;\n   for (int i = 0; i < n; i++)\n     {\n       if (a[i] < min)\n@@ -30,9 +31,9 @@ long foo (long *a, unsigned long n)\n \n int main()\n {\n-  long a[] = {2, 1, -13, LONG_MAX, LONG_MIN, 0};\n+  long long a[] = {2, 1, -13, LONG_MAX, LONG_MIN, 0};\n \n-  long res = foo (a, sizeof (a) / sizeof (a[0]));\n+  long long res = foo (a, sizeof (a) / sizeof (a[0]));\n \n   assert (res == (LONG_MIN + 1));\n }"}]}