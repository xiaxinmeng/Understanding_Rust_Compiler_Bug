{"sha": "c886a946134d08a3ae3ad2dacbcee8d6b981db1d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg4NmE5NDYxMzRkMDhhM2FlM2FkMmRhY2JjZWU4ZDZiOTgxZGIxZA==", "commit": {"author": {"name": "Javier Miranda", "email": "miranda@adacore.com", "date": "2018-09-26T09:18:29Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-09-26T09:18:29Z"}, "message": "[Ada] Mimic the C++ ABI when passing class-wide conversion actuals\n\nThis patch does not affect the behavior of Ada-only code but improves\nconsistency with the code generated by the C++ compiler.\n\n2018-09-26  Javier Miranda  <miranda@adacore.com>\n\ngcc/ada/\n\n\t* sem_res.adb (Resolve_Actuals): If the formal is a class-wide\n\ttype conversion then do not skip resolving and expanding the\n\tconversion; required to displace the pointer to the object and\n\treference the dispatch table associated with the target\n\tinterface type.\n\nFrom-SVN: r264624", "tree": {"sha": "1df089e246aba438b05dd6b9e493cee1197ff250", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1df089e246aba438b05dd6b9e493cee1197ff250"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c886a946134d08a3ae3ad2dacbcee8d6b981db1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c886a946134d08a3ae3ad2dacbcee8d6b981db1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c886a946134d08a3ae3ad2dacbcee8d6b981db1d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c886a946134d08a3ae3ad2dacbcee8d6b981db1d/comments", "author": {"login": "miranda-adacore", "id": 54413934, "node_id": "MDQ6VXNlcjU0NDEzOTM0", "avatar_url": "https://avatars.githubusercontent.com/u/54413934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miranda-adacore", "html_url": "https://github.com/miranda-adacore", "followers_url": "https://api.github.com/users/miranda-adacore/followers", "following_url": "https://api.github.com/users/miranda-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/miranda-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/miranda-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miranda-adacore/subscriptions", "organizations_url": "https://api.github.com/users/miranda-adacore/orgs", "repos_url": "https://api.github.com/users/miranda-adacore/repos", "events_url": "https://api.github.com/users/miranda-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/miranda-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4f95defaa9c9e60f3e07f629bde8189fb6af19cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f95defaa9c9e60f3e07f629bde8189fb6af19cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f95defaa9c9e60f3e07f629bde8189fb6af19cf"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "5996edc98dca805c1422a196948704f2ab02f008", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c886a946134d08a3ae3ad2dacbcee8d6b981db1d/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c886a946134d08a3ae3ad2dacbcee8d6b981db1d/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c886a946134d08a3ae3ad2dacbcee8d6b981db1d", "patch": "@@ -1,3 +1,11 @@\n+2018-09-26  Javier Miranda  <miranda@adacore.com>\n+\n+\t* sem_res.adb (Resolve_Actuals): If the formal is a class-wide\n+\ttype conversion then do not skip resolving and expanding the\n+\tconversion; required to displace the pointer to the object and\n+\treference the dispatch table associated with the target\n+\tinterface type.\n+\n 2018-09-26  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* libgnat/g-dynhta.adb (Prepend_Or_Replace): Update the number"}, {"sha": "6a3dfb74c854e1e13273cab4867fc352f3deb064", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c886a946134d08a3ae3ad2dacbcee8d6b981db1d/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c886a946134d08a3ae3ad2dacbcee8d6b981db1d/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=c886a946134d08a3ae3ad2dacbcee8d6b981db1d", "patch": "@@ -3809,6 +3809,7 @@ package body Sem_Res is\n             if Ekind (F) /= E_In_Parameter\n               and then Nkind (A) = N_Type_Conversion\n               and then not Is_Class_Wide_Type (Etype (Expression (A)))\n+              and then not Is_Interface (Etype (A))\n             then\n                if Ekind (F) = E_In_Out_Parameter\n                  and then Is_Array_Type (Etype (F))"}]}