{"sha": "fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRjMmNlM2ZiMDdlNDE3MjBkMjA4M2JhMzk4OTJiYjA4YzNkNWU3YQ==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2015-07-16T00:48:33Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2015-07-16T00:48:33Z"}, "message": "re PR target/65249 (unable to find a register to spill in class 'R0_REGS' when compiling protobuf on sh4)\n\nPR target/65249\n* config/sh/sh.md (movdi): Split simple reg move to two movsi when\n  the destination is R0 so as to lower R0-register pressure.\n\nFrom-SVN: r225856", "tree": {"sha": "c82785e1bb2abf434cf89743f5d58a0cdd2d3cb0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c82785e1bb2abf434cf89743f5d58a0cdd2d3cb0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a/comments", "author": null, "committer": null, "parents": [{"sha": "58b1eb43304a1f9fe3f65e663dba956eea4f38c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58b1eb43304a1f9fe3f65e663dba956eea4f38c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58b1eb43304a1f9fe3f65e663dba956eea4f38c3"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "603c5e3a1e4a33b33e8f1d245725b5386dc12439", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a", "patch": "@@ -1,3 +1,9 @@\n+2015-07-16  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\tPR target/65249\n+\t* config/sh/sh.md (movdi): Split simple reg move to two movsi\n+\twhen the destination is R0.\n+\n 2015-07-16  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/66866"}, {"sha": "61f663778d0a9d3fca1da9f6ca3376832dff610e", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=fdc2ce3fb07e41720d2083ba39892bb08c3d5e7a", "patch": "@@ -7892,6 +7892,24 @@ label:\n   \"\"\n {\n   prepare_move_operands (operands, DImode);\n+  if (TARGET_SH1)\n+    {\n+      /* When the dest operand is (R0, R1) register pair, split it to\n+\t two movsi of which dest is R1 and R0 so as to lower R0-register\n+\t pressure on the first movsi.  Apply only for simple source not\n+\t to make complex rtl here.  */\n+      if (REG_P (operands[0])\n+\t  && REGNO (operands[0]) == R0_REG\n+\t  && REG_P (operands[1])\n+\t  && REGNO (operands[1]) >= FIRST_PSEUDO_REGISTER)\n+\t{\n+\t  emit_insn (gen_movsi (gen_rtx_REG (SImode, R1_REG),\n+\t\t\t        gen_rtx_SUBREG (SImode, operands[1], 4)));\n+\t  emit_insn (gen_movsi (gen_rtx_REG (SImode, R0_REG),\n+\t\t\t        gen_rtx_SUBREG (SImode, operands[1], 0)));\n+\t  DONE;\n+\t}\n+    }\n })\n \n (define_insn \"movdf_media\""}]}