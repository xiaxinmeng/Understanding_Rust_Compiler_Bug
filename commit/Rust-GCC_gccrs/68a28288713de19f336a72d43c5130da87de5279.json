{"sha": "68a28288713de19f336a72d43c5130da87de5279", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjhhMjgyODg3MTNkZTE5ZjMzNmE3MmQ0M2M1MTMwZGE4N2RlNTI3OQ==", "commit": {"author": {"name": "Josh Conner", "email": "jconner@apple.com", "date": "2005-09-14T00:25:01Z"}, "committer": {"name": "Josh Conner", "email": "jconner@gcc.gnu.org", "date": "2005-09-14T00:25:01Z"}, "message": "re PR c++/23180 (Segfault on const initializer with bogus pointer arithmetics)\n\n        PR c++/23180\n        * g++.dg/init/struct2.C: New test.\n        * g++.dg/init/struct3.C: New test.\n\nFrom-SVN: r104254", "tree": {"sha": "81719428063a96b2e471dea2c43265469a0d657b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81719428063a96b2e471dea2c43265469a0d657b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/68a28288713de19f336a72d43c5130da87de5279", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68a28288713de19f336a72d43c5130da87de5279", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68a28288713de19f336a72d43c5130da87de5279", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68a28288713de19f336a72d43c5130da87de5279/comments", "author": null, "committer": null, "parents": [{"sha": "bb9baf1c9b1bb2010f0cca91b6a8892c64e8432f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9baf1c9b1bb2010f0cca91b6a8892c64e8432f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb9baf1c9b1bb2010f0cca91b6a8892c64e8432f"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "e871629d7a8a939fff7997fd5246a60b8d0f8f6e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68a28288713de19f336a72d43c5130da87de5279/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68a28288713de19f336a72d43c5130da87de5279/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=68a28288713de19f336a72d43c5130da87de5279", "patch": "@@ -1,3 +1,9 @@\n+2005-09-13 Josh Conner <jconner@apple.com>\n+\n+\tPR c++/23180\n+\t* g++.dg/init/struct2.C: New test.\n+\t* g++.dg/init/struct3.C: New test.\n+\n 2005-09-13  Janis Johnson  <janis187@us.ibm.com>\n \n \t* gcc.dg/pr15784-4.c, gcc.dg/pr20130-1.c, gcc.dg/ucnid-6.c:"}, {"sha": "d7d07b5c1e3101dc0e52ddb514de20d6ffee4de3", "filename": "gcc/testsuite/g++.dg/init/struct2.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68a28288713de19f336a72d43c5130da87de5279/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fstruct2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68a28288713de19f336a72d43c5130da87de5279/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fstruct2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fstruct2.C?ref=68a28288713de19f336a72d43c5130da87de5279", "patch": "@@ -0,0 +1,22 @@\n+/* PR c++/23180.  */\n+/* Initialize a local structure with an expression that attempts to use\n+   pointer arithmetic to calculate another structure field offset.  */\n+\n+void saveLoadEntries(const void *);\n+\n+void saveOrLoad() {\n+    struct Track {\n+        char soundName[15];\n+    };\n+    struct SaveLoadEntry {\n+        int offs;\n+        int type;\n+        int size;\n+    };    \n+\n+    SaveLoadEntry trackEntries = {\n+\t((long) (&((Track *) 42)->soundName[0])) - 42,\n+        0, 1\n+    };\n+    saveLoadEntries(&trackEntries);\n+}"}, {"sha": "6b1805c66ba972312201e5106b7dc29169cc883d", "filename": "gcc/testsuite/g++.dg/init/struct3.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68a28288713de19f336a72d43c5130da87de5279/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fstruct3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68a28288713de19f336a72d43c5130da87de5279/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fstruct3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fstruct3.C?ref=68a28288713de19f336a72d43c5130da87de5279", "patch": "@@ -0,0 +1,15 @@\n+/* PR c++/23180.  */\n+/* Initialize a global variable with an expression that attempts to use\n+   pointer arithmetic to calculate a structure field offset.  */\n+\n+struct Track {\n+  char soundName[15];\n+};\n+\n+struct SaveLoadEntry {\n+  int offs;\n+  int type;\n+  int size;\n+};    \n+\n+int foobar = ((long) (& ((Track *) 42)->soundName[0])) - 42;"}]}