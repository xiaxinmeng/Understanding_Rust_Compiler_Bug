{"sha": "ffc472664ef10dac31bc51a40fdf94772deb628b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZjNDcyNjY0ZWYxMGRhYzMxYmM1MWE0MGZkZjk0NzcyZGViNjI4Yg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-01-04T21:55:03Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-01-04T21:55:03Z"}, "message": "Delete `no change needed' messages.  Delete all uses of `ex'.\n\nFrom-SVN: r3088", "tree": {"sha": "d8541042e8d7abb0b2aa5fb498fc0dbf14c97dc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d8541042e8d7abb0b2aa5fb498fc0dbf14c97dc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffc472664ef10dac31bc51a40fdf94772deb628b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffc472664ef10dac31bc51a40fdf94772deb628b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffc472664ef10dac31bc51a40fdf94772deb628b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffc472664ef10dac31bc51a40fdf94772deb628b/comments", "author": null, "committer": null, "parents": [{"sha": "998812aceb28ef8608aace23183e68962e4a8553", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/998812aceb28ef8608aace23183e68962e4a8553", "html_url": "https://github.com/Rust-GCC/gccrs/commit/998812aceb28ef8608aace23183e68962e4a8553"}], "stats": {"total": 161, "additions": 42, "deletions": 119}, "files": [{"sha": "a54f4095fd29ea386801d940b7cf28e28fe92d85", "filename": "gcc/fixincludes", "status": "modified", "additions": 42, "deletions": 119, "changes": 161, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffc472664ef10dac31bc51a40fdf94772deb628b/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffc472664ef10dac31bc51a40fdf94772deb628b/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=ffc472664ef10dac31bc51a40fdf94772deb628b", "patch": "@@ -14,17 +14,8 @@ SRCDIR=${3-${SRCDIR-.}}\n # (This was named INCLUDES, but that conflicts with a name in Makefile.in.)\n INPUT=${2-${INPUT-/usr/include}}\n \n-# This prevents /bin/ex from failing if the current terminal type is\n-# unrecognizable.\n-TERM=unknown\n-export TERM\n-# This prevents two problems:\n-# Either ex might find a .exrc file and get confused,\n-# or ex might complain if the EXINIT variable is invalid. \n-# We know there is no .exrc in the GCC source.\n-# `set' is a no-op ex command.\n-EXINIT=set\n-export EXINIT\n+# Directory in which to store the results.\n+LIB=${1?\"fixincludes: output directory not specified\"}\n \n # Define PWDCMD as a command to use to get the working dir\n # in the form that we want.\n@@ -36,9 +27,6 @@ case \"`pwd`\" in\n \t;;\n esac\n \n-# Directory in which to store the results.\n-LIB=${1?\"fixincludes: output directory not specified\"}\n-\n # Make sure it exists.\n if [ ! -d $LIB ]; then\n   mkdir $LIB || exit 1\n@@ -258,7 +246,6 @@ while [ $# != 0 ]; do\n \t' $2/$file > $2/$file.sed\n \tmv $2/$file.sed $2/$file\n \tif cmp $file $2/$file >/dev/null 2>&1; then\n-\t   echo Deleting $2/$file\\; no fixes were needed.\n \t   rm $2/$file\n \tfi\n       fi\n@@ -280,12 +267,9 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file comment\n-  ex ${LIB}/$file <<EOF\n-  g/doesn't/s/doesn't/does not/\n-  wq\n-EOF\n+  sed -e \"s/doesn't/does not/\" ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -330,38 +314,23 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file\n-  ex ${LIB}/$file <<EOF\n-  /size_t.*;/\n-  i\n-#ifndef _GCC_SIZE_T\n-#define _GCC_SIZE_T\n-.\n-  /size_t/+1\n-  i\n-#endif\n-.\n-  /ptrdiff_t.*;/\n-  i\n-#ifndef _GCC_PTRDIFF_T\n-#define _GCC_PTRDIFF_T\n-.\n-  /ptrdiff_t/+1\n-  i\n-#endif\n-.\n-  /wchar_t.*;/\n-  i\n-#ifndef _GCC_WCHAR_T\n-#define _GCC_WCHAR_T\n-.\n-  /wchar_t/+1\n-  i\n-#endif\n-.\n-  wq\n-EOF\n+sed -e '/size_t.*;/i\\\n+#ifndef _GCC_SIZE_T\\\n+#define _GCC_SIZE_T' \\\n+    -e '/size_t.*;/a\\\n+#endif' \\\n+    -e '/ptrdiff_t.*;/i\\\n+#ifndef _GCC_PTRDIFF_T\\\n+#define _GCC_PTRDIFF_T' \\\n+    -e '/ptrdiff_t.*;/a\\\n+#endif' \\\n+    -e '/wchar_t.*;/i\\\n+#ifndef _GCC_WCHAR_T\\\n+#define _GCC_WCHAR_T' \\\n+    -e '/wchar_t.*;/a\\\n+#endif' ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -377,20 +346,13 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file\n-  ex ${LIB}/$file <<EOF\n-  /typedef.*[ \t]size_t.*;/\n-  i\n-#ifndef _GCC_SIZE_T\n-#define _GCC_SIZE_T\n-.\n-  /size_t/+1\n-  i\n-#endif\n-.\n-  wq\n-EOF\n+sed -e '/size_t.*;/i\\\n+#ifndef _GCC_SIZE_T\\\n+#define _GCC_SIZE_T' \\\n+    -e '/size_t.*;/a\\\n+#endif' ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -426,12 +388,9 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file, definition of statsswtch\n-  ex ${LIB}/$file <<EOF\n-  g/boottime$/s//&;/\n-  wq\n-EOF\n+  sed -e 's/boottime$/boottime;/' ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -448,12 +407,9 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file, definition of nodeent\n-  ex ${LIB}/$file <<EOF\n-  g/char.*na_addr *$/s//&;/\n-  wq\n-EOF\n+  sed -e 's/char.*na_addr *$/char *na_addr;/' ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -468,13 +424,9 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file, bad \\#ifdef line\n-  ex ${LIB}/$file <<EOF\n-  g/^#ifdef KERNEL && !defined/\n-  s/#ifdef KERNEL && !defined/#if defined(KERNEL) \\&\\& !defined/\n-  wq\n-EOF\n+  sed -e 's/#ifdef KERNEL/#if defined(KERNEL)/' ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -493,7 +445,6 @@ fi\n #  sed -e 's/#endif.*/#endif/' ${LIB}/$file > ${LIB}/${file}.sed\n #  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n #  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-#    echo Deleting ${LIB}/$file\\; no fixes were needed.\n #    rm -f ${LIB}/$file\n #  fi\n #fi\n@@ -509,13 +460,9 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file, superfluous static\n-  ex ${LIB}/$file <<EOF\n-  g/^static struct tlb_pid_state/\n-  s/static//\n-  wq\n-EOF\n+  sed -e 's/^static struct tlb_pid_state/struct tlb_pid_state/' ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   else\n # This file has an alternative name, mips/cpu.h.  Fix that name, too.\n@@ -537,16 +484,11 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file sprintf declaration\n-  ex ${LIB}/$file <<EOF\n-  /^extern char \\*\tsprintf();$/c\n-#ifndef __STDC__\n-extern char *\tsprintf();\n-#endif /* !defined __STDC__ */\n-.\n-  wq\n-EOF\n+  sed -e 's,^extern char \\*\tsprintf();$,#ifndef __STDC__\\\n+extern char *\tsprintf();\\\n+#endif /* !defined __STDC__ */,' ${LIB}/$file > ${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -563,16 +505,11 @@ fi\n \n if [ -r ${LIB}/$file ]; then\n   echo Fixing $file sprintf declaration\n-  ex ${LIB}/$file <<EOF\n-  /^extern char \\*\tsprintf();$/c\n-#ifndef __STDC__\n-extern char *\tsprintf();\n-#endif /* !defined __STDC__ */\n-.\n-  wq\n-EOF\n+  sed -e 's,^extern char \\*\tsprintf();$,#ifndef __STDC__\\\n+extern char *\tsprintf();\\\n+#endif /* !defined __STDC__ */,' ${LIB}/$file > ${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm ${LIB}/$file\n   fi\n fi\n@@ -591,7 +528,6 @@ if [ -r ${LIB}/$file ]; then\n   sed -e '/^struct/,/^};/s/}$/};/' ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -616,7 +552,6 @@ if [ -r ${LIB}/$file ]; then\n ' ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -635,7 +570,6 @@ if [ -r ${LIB}/$file ]; then\n   sed -e '/^struct/,/^};/s/_cnt$/_cnt;/' ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -658,7 +592,6 @@ if [ -r ${LIB}/$file ]; then\n   -e 's/int\texit/void\texit/g' ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -678,7 +611,6 @@ if [ -r ${LIB}/$file ]; then\n   ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -697,7 +629,6 @@ if [ -r ${LIB}/$file ]; then\n   sed -e 's%#endif / \\*%#endif /\\* %g' ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -717,7 +648,6 @@ if [ -r ${LIB}/$file ]; then\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -737,7 +667,6 @@ if [ -r ${LIB}/$file ]; then\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -757,7 +686,6 @@ if [ -r ${LIB}/$file ]; then\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -777,7 +705,6 @@ if [ -r ${LIB}/$file ]; then\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -798,7 +725,6 @@ if [ -r ${LIB}/$file ]; then\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -860,7 +786,6 @@ if [ -r ${LIB}/$file ]; then\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -890,7 +815,6 @@ if [ -r ${LIB}/$file ]; then\n   \n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi\n@@ -920,7 +844,6 @@ if [ -r ${LIB}/$file ]; then\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n   fi\n fi"}]}