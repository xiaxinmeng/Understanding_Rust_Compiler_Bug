{"sha": "afc5f9793c407902fade709ab2cdd3e83d051166", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZjNWY5NzkzYzQwNzkwMmZhZGU3MDlhYjJjZGQzZTgzZDA1MTE2Ng==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2008-03-26T07:54:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-03-26T07:54:59Z"}, "message": "a-witeio.adb: Fix problem with Current_Output (introduce Self).\n\n\t* a-witeio.adb: Fix problem with Current_Output (introduce Self).\n\tFix problem of status check for null file\n\nFrom-SVN: r133591", "tree": {"sha": "5e7403a58d932936e5575bea7c31af6e0f21e639", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e7403a58d932936e5575bea7c31af6e0f21e639"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afc5f9793c407902fade709ab2cdd3e83d051166", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afc5f9793c407902fade709ab2cdd3e83d051166", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afc5f9793c407902fade709ab2cdd3e83d051166", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afc5f9793c407902fade709ab2cdd3e83d051166/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c5d31169ee7d486de1e45128ede9097d114386e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5d31169ee7d486de1e45128ede9097d114386e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5d31169ee7d486de1e45128ede9097d114386e8"}], "stats": {"total": 41, "additions": 28, "deletions": 13}, "files": [{"sha": "f2853e8fa80902efeaf10bb66455fc75ba612af1", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afc5f9793c407902fade709ab2cdd3e83d051166/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afc5f9793c407902fade709ab2cdd3e83d051166/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=afc5f9793c407902fade709ab2cdd3e83d051166", "patch": "@@ -1,3 +1,8 @@\n+2008-03-26  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* a-witeio.adb: Fix problem with Current_Output (introduce Self).\n+\tFix problem of status check for null file\n+\n 2008-03-26  Arnaud Charlet  <charlet@adacore.com>\n \n \t* s-proinf-irix-athread.ads, s-vxwork-mips.ads,"}, {"sha": "86a37b6fbe8d7a5043e792fbc86cfde59daa3044", "filename": "gcc/ada/a-witeio.adb", "status": "modified", "additions": 23, "deletions": 13, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afc5f9793c407902fade709ab2cdd3e83d051166/gcc%2Fada%2Fa-witeio.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afc5f9793c407902fade709ab2cdd3e83d051166/gcc%2Fada%2Fa-witeio.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-witeio.adb?ref=afc5f9793c407902fade709ab2cdd3e83d051166", "patch": "@@ -180,6 +180,8 @@ package body Ada.Wide_Text_IO is\n                 Amethod   => 'W',\n                 Creat     => True,\n                 Text      => True);\n+\n+      File.Self := File;\n       Set_WCEM (File);\n    end Create;\n \n@@ -194,7 +196,7 @@ package body Ada.Wide_Text_IO is\n \n    function Current_Error return File_Access is\n    begin\n-      return Current_Err'Access;\n+      return Current_Err.Self'Access;\n    end Current_Error;\n \n    -------------------\n@@ -208,7 +210,7 @@ package body Ada.Wide_Text_IO is\n \n    function Current_Input return File_Access is\n    begin\n-      return Current_In'Access;\n+      return Current_In.Self'Access;\n    end Current_Input;\n \n    --------------------\n@@ -222,7 +224,7 @@ package body Ada.Wide_Text_IO is\n \n    function Current_Output return File_Access is\n    begin\n-      return Current_Out'Access;\n+      return Current_Out.Self'Access;\n    end Current_Output;\n \n    ------------\n@@ -754,6 +756,7 @@ package body Ada.Wide_Text_IO is\n    --  Start of processing for Get_Wide_Char\n \n    begin\n+      FIO.Check_Read_Status (AP (File));\n       return WC_In (C, File.WC_Method);\n    end Get_Wide_Char;\n \n@@ -788,6 +791,7 @@ package body Ada.Wide_Text_IO is\n    --  Start of processing for Get_Wide_Char_Immed\n \n    begin\n+      FIO.Check_Read_Status (AP (File));\n       return WC_In (C, File.WC_Method);\n    end Get_Wide_Char_Immed;\n \n@@ -1089,6 +1093,8 @@ package body Ada.Wide_Text_IO is\n                 Amethod   => 'W',\n                 Creat     => False,\n                 Text      => True);\n+\n+      File.Self := File;\n       Set_WCEM (File);\n    end Open;\n \n@@ -1151,6 +1157,7 @@ package body Ada.Wide_Text_IO is\n    --  Start of processing for Put\n \n    begin\n+      FIO.Check_Write_Status (AP (File));\n       WC_Out (Item, File.WC_Method);\n       File.Col := File.Col + 1;\n    end Put;\n@@ -1869,18 +1876,20 @@ begin\n    Standard_Err.Is_System_File    := True;\n    Standard_Err.Is_Text_File      := True;\n    Standard_Err.Access_Method     := 'T';\n+   Standard_Err.Self              := Standard_Err;\n    Standard_Err.WC_Method         := Default_WCEM;\n \n-   Standard_In.Stream            := stdin;\n-   Standard_In.Name              := In_Name'Access;\n-   Standard_In.Form              := Null_Str'Unrestricted_Access;\n-   Standard_In.Mode              := FCB.In_File;\n-   Standard_In.Is_Regular_File   := is_regular_file (fileno (stdin)) /= 0;\n-   Standard_In.Is_Temporary_File := False;\n-   Standard_In.Is_System_File    := True;\n-   Standard_In.Is_Text_File      := True;\n-   Standard_In.Access_Method     := 'T';\n-   Standard_In.WC_Method         := Default_WCEM;\n+   Standard_In.Stream             := stdin;\n+   Standard_In.Name               := In_Name'Access;\n+   Standard_In.Form               := Null_Str'Unrestricted_Access;\n+   Standard_In.Mode               := FCB.In_File;\n+   Standard_In.Is_Regular_File    := is_regular_file (fileno (stdin)) /= 0;\n+   Standard_In.Is_Temporary_File  := False;\n+   Standard_In.Is_System_File     := True;\n+   Standard_In.Is_Text_File       := True;\n+   Standard_In.Access_Method      := 'T';\n+   Standard_In.Self               := Standard_In;\n+   Standard_In.WC_Method          := Default_WCEM;\n \n    Standard_Out.Stream            := stdout;\n    Standard_Out.Name              := Out_Name'Access;\n@@ -1891,6 +1900,7 @@ begin\n    Standard_Out.Is_System_File    := True;\n    Standard_Out.Is_Text_File      := True;\n    Standard_Out.Access_Method     := 'T';\n+   Standard_Out.Self              := Standard_Out;\n    Standard_Out.WC_Method         := Default_WCEM;\n \n    FIO.Chain_File (AP (Standard_In));"}]}