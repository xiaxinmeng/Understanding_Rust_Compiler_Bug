{"sha": "a74897c141f39c4400f0569839befffe4dc6aa41", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc0ODk3YzE0MWYzOWM0NDAwZjA1Njk4MzliZWZmZmU0ZGM2YWE0MQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2006-12-04T20:02:43Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2006-12-04T20:02:43Z"}, "message": "re PR fortran/29962 (Initialization expressions)\n\nfortran/\n2006-12-04  Tobias Burnus  <burnus@net-b.de>\n\n\tPR fortran/29962\n\t* expr.c (check_intrinsic_op): Allow noninteger exponents for F2003.\n   \n     \ntestsuite/\n2006-12-04  Tobias Burnus  <burnus@net-b.de>\n\n\tPR fortran/29962\n\t* initialization_4.f90: Test noninteger exponents (-std=f95).\n\t* initialization_5.f90: New test for noninteger exponents with -std=f2003\n\nFrom-SVN: r119505", "tree": {"sha": "c340a0d95065e76783fb2fd0a7e0fa944b3eefeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c340a0d95065e76783fb2fd0a7e0fa944b3eefeb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a74897c141f39c4400f0569839befffe4dc6aa41", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a74897c141f39c4400f0569839befffe4dc6aa41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a74897c141f39c4400f0569839befffe4dc6aa41", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a74897c141f39c4400f0569839befffe4dc6aa41/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd5ecf415546bfcd359c5f6dc7500fe7cc319593"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "eeaaa481b2a4b8be79470942d0ede7a0b2d79f46", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a74897c141f39c4400f0569839befffe4dc6aa41", "patch": "@@ -1,3 +1,8 @@\n+2006-12-04  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/29962\n+\t* expr.c (check_intrinsic_op): Allow noninteger exponents for F2003.\n+\n 2006-12-04  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/29821"}, {"sha": "f806497bc3886d9a98536cee46cd3bffc08a5ff3", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=a74897c141f39c4400f0569839befffe4dc6aa41", "patch": "@@ -1622,9 +1622,11 @@ check_intrinsic_op (gfc_expr * e, try (*check_function) (gfc_expr *))\n       if (e->value.op.operator == INTRINSIC_POWER\n \t  && check_function == check_init_expr && et0 (op2) != BT_INTEGER)\n \t{\n-\t  gfc_error (\"Exponent at %L must be INTEGER for an initialization \"\n-\t\t     \"expression\", &op2->where);\n-\t  return FAILURE;\n+\t  if (gfc_notify_std (GFC_STD_F2003,\"Fortran 2003: Noninteger \"\n+\t\t\t      \"exponent in an initialization \"\n+\t\t\t      \"expression at %L\", &op2->where)\n+\t      == FAILURE)\n+\t    return FAILURE;\n \t}\n \n       break;"}, {"sha": "4ed0ce6d19a2b1a647f8f3b0cb4c0d52d7bdb470", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a74897c141f39c4400f0569839befffe4dc6aa41", "patch": "@@ -1,3 +1,10 @@\n+2006-12-04  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/29962\n+\t* initialization_4.f90: Test noninteger exponents (-std=f95).\n+\t* initialization_5.f90: New test for noninteger exponents\n+\t  with -std=f2003.\n+\n 2006-12-04  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/29821"}, {"sha": "552a01f8748376d7005347323072b3df113114e0", "filename": "gcc/testsuite/gfortran.dg/initialization_4.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_4.f90?ref=a74897c141f39c4400f0569839befffe4dc6aa41", "patch": "@@ -3,4 +3,5 @@\n ! { dg-do compile }\n ! { dg-options \"-std=f95\" }\n real, parameter :: pi = 4.0*Atan(1.0) ! { dg-error \"Evaluation of nonstandard initialization expression\" }\n+real, parameter :: three = 27.0**(1.0/3.0) ! { dg-error \"Noninteger exponent in an initialization expression\" }\n end"}, {"sha": "b5cfe0f0e6b67eba125619a87be47192cf1a1d3c", "filename": "gcc/testsuite/gfortran.dg/initialization_5.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a74897c141f39c4400f0569839befffe4dc6aa41/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_5.f90?ref=a74897c141f39c4400f0569839befffe4dc6aa41", "patch": "@@ -0,0 +1,7 @@\n+! initialization expression, now allowed in Fortran 2003\n+! PR fortran/29962\n+! { dg-do run }\n+! { dg-options \"-std=f2003 -fall-intrinsics\" }\n+  real, parameter :: three = 27.0**(1.0/3.0)\n+  if(abs(three-3.0)>epsilon(three)) call abort()\n+end"}]}