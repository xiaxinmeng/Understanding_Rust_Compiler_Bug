{"sha": "29849c91e41478ce7c86d5fe4f1582179b845ef8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjk4NDljOTFlNDE0NzhjZTdjODZkNWZlNGYxNTgyMTc5Yjg0NWVmOA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-10-19T16:53:13Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-10-19T16:53:13Z"}, "message": "runtime, syscall: force EPOLLET to be positive\n    \n    The C definition is 1U << 31.  Reportedly on some systems GCC's\n    -fgo-dump-spec can print this as -2147483648.\n    \n    Reviewed-on: https://go-review.googlesource.com/31448\n\nFrom-SVN: r241347", "tree": {"sha": "99ea1098649c175fe24c94394f1bd520f6c18770", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99ea1098649c175fe24c94394f1bd520f6c18770"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/29849c91e41478ce7c86d5fe4f1582179b845ef8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29849c91e41478ce7c86d5fe4f1582179b845ef8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29849c91e41478ce7c86d5fe4f1582179b845ef8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29849c91e41478ce7c86d5fe4f1582179b845ef8/comments", "author": null, "committer": null, "parents": [{"sha": "b70f0b0cc3134537d56b2115289cb94c3eb7a4e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b70f0b0cc3134537d56b2115289cb94c3eb7a4e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b70f0b0cc3134537d56b2115289cb94c3eb7a4e4"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "5c125c7aec18bf6b5b27de424872c79bb1691d44", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29849c91e41478ce7c86d5fe4f1582179b845ef8/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29849c91e41478ce7c86d5fe4f1582179b845ef8/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=29849c91e41478ce7c86d5fe4f1582179b845ef8", "patch": "@@ -1,4 +1,4 @@\n-68bb6a9875499037d3eccb79a1f92e1c7a476d58\n+5346c7d15362a16efa0defaaeca63b1fce1c1523\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "247692ef0422a48222f7eeb8d5ea45e636130479", "filename": "libgo/go/runtime/netpoll_epoll.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29849c91e41478ce7c86d5fe4f1582179b845ef8/libgo%2Fgo%2Fruntime%2Fnetpoll_epoll.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29849c91e41478ce7c86d5fe4f1582179b845ef8/libgo%2Fgo%2Fruntime%2Fnetpoll_epoll.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fruntime%2Fnetpoll_epoll.go?ref=29849c91e41478ce7c86d5fe4f1582179b845ef8", "patch": "@@ -49,7 +49,7 @@ func netpollinit() {\n \n func netpollopen(fd uintptr, pd *pollDesc) int32 {\n \tvar ev epollevent\n-\tev.events = _EPOLLIN | _EPOLLOUT | _EPOLLRDHUP | _EPOLLET\n+\tev.events = _EPOLLIN | _EPOLLOUT | _EPOLLRDHUP | _EPOLLETpos\n \t*(**pollDesc)(unsafe.Pointer(&ev.data)) = pd\n \tif epollctl(epfd, _EPOLL_CTL_ADD, int32(fd), &ev) < 0 {\n \t\treturn int32(errno())"}, {"sha": "ffbbcea39a65bce3ebd6b054c5e56bf7cc888c0a", "filename": "libgo/mkrsysinfo.sh", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29849c91e41478ce7c86d5fe4f1582179b845ef8/libgo%2Fmkrsysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29849c91e41478ce7c86d5fe4f1582179b845ef8/libgo%2Fmkrsysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmkrsysinfo.sh?ref=29849c91e41478ce7c86d5fe4f1582179b845ef8", "patch": "@@ -77,6 +77,12 @@ if grep '^const _epoll_data_offset ' ${OUT} >/dev/null 2>&1; then\n       exit 1\n   fi\n fi\n+# Make sure EPOLLET is positive.\n+if grep '^const _EPOLLET = [0-9]' gen-sysinfo.go; then\n+  echo \"const _EPOLLETpos = _EPOLLET\" >> ${OUT}\n+else\n+  echo \"const _EPOLLETpos = 0x80000000\" >> ${OUT}\n+fi\n # Make sure EPOLLRDHUP and EPOLL_CLOEXEC are defined.\n if ! grep '^const _EPOLLRDHUP' ${OUT} >/dev/null 2>&1; then\n   echo \"const _EPOLLRDHUP = 0x2000\" >> ${OUT}"}, {"sha": "3640476a434d7de4d70932d7a9949f83922a443b", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29849c91e41478ce7c86d5fe4f1582179b845ef8/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29849c91e41478ce7c86d5fe4f1582179b845ef8/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=29849c91e41478ce7c86d5fe4f1582179b845ef8", "patch": "@@ -185,7 +185,15 @@ fi\n \n # epoll constants.\n grep '^const _EPOLL' gen-sysinfo.go |\n+  grep -v EPOLLET |\n   sed -e 's/^\\(const \\)_\\(EPOLL[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+# Make sure EPOLLET is positive.\n+if grep '^const _EPOLLET = [0-9]' gen-sysinfo.go; then\n+  grep '^const _EPOLLET ' gen-sysinfo.go |\n+    sed -e 's/^\\(const \\)_\\(EPOLL[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+else\n+  echo \"const EPOLLET = 0x80000000\" >> ${OUT}\n+fi\n # Make sure EPOLLRDHUP and EPOLL_CLOEXEC are defined.\n if ! grep '^const EPOLLRDHUP' ${OUT} >/dev/null 2>&1; then\n   echo \"const EPOLLRDHUP = 0x2000\" >> ${OUT}"}]}