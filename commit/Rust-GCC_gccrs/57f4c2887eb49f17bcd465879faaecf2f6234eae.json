{"sha": "57f4c2887eb49f17bcd465879faaecf2f6234eae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTdmNGMyODg3ZWI0OWYxN2JjZDQ2NTg3OWZhYWVjZjJmNjIzNGVhZQ==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2013-04-12T13:12:02Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2013-04-12T13:12:02Z"}, "message": "s-rident.ads: Add various missing Ada 2012 restrictions...\n\n2013-04-12  Ed Schonberg  <schonberg@adacore.com>\n\n\t* s-rident.ads: Add various missing Ada 2012 restrictions:\n\tNo_Access_Parameter_Allocators, No_Coextensions,\n\tNo_Use_Of_Attribute, No_Use_Of_Pragma.\n\t* snames.ads-tmpl: Add corresponding names.\n\t* restrict.ads restrict.adb: Subprograms and data structures to\n\thandle aspects No_Use_Of_Attribute and No_Use_Of_Pragma.\n\t* sem_ch4.adb: Correct name of restrictions is\n\tNo_Standard_Allocators_After_Elaboration.\n\t* sem_ch13.adb (Analyze_Attribute_Definition_Clause): Check\n\tviolation of restriction No_Use_Of_Attribute.\n\t* sem_prag.adb (Process_Restrictions_Or_Restriction_Warnings):\n\tSet restrictions No_Use_Of_Pragma and No_Use_Of_Attribute.\n\t(Analyze_Pragma): Check violation of restriction No_Use_Of_Pragma.\n\t* sem_res.adb: Check restrictions No_Access_Parameter_Allocators\n\tand No_Coextensions.\n\t* bcheck.adb: Correct name of restrictions is\n\tNo_Standard_Allocators_After_Elaboration.\n\t* gnatbind.adb: Correct name of restrictions is\n\tNo_Standard_Allocators_After_Elaboration.\n\nFrom-SVN: r197907", "tree": {"sha": "64d34cfbf15140cbaff93b983e1ac0755b502a03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64d34cfbf15140cbaff93b983e1ac0755b502a03"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57f4c2887eb49f17bcd465879faaecf2f6234eae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57f4c2887eb49f17bcd465879faaecf2f6234eae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57f4c2887eb49f17bcd465879faaecf2f6234eae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57f4c2887eb49f17bcd465879faaecf2f6234eae/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d9f8616ee4bef21743006fb09e6f0ee4359d941c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9f8616ee4bef21743006fb09e6f0ee4359d941c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9f8616ee4bef21743006fb09e6f0ee4359d941c"}], "stats": {"total": 389, "additions": 300, "deletions": 89}, "files": [{"sha": "cba7cf98bde7f21af9a19bcd2f3ecda91ae11d3e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -1,3 +1,25 @@\n+2013-04-12  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* s-rident.ads: Add various missing Ada 2012 restrictions:\n+\tNo_Access_Parameter_Allocators, No_Coextensions,\n+\tNo_Use_Of_Attribute, No_Use_Of_Pragma.\n+\t* snames.ads-tmpl: Add corresponding names.\n+\t* restrict.ads restrict.adb: Subprograms and data structures to\n+\thandle aspects No_Use_Of_Attribute and No_Use_Of_Pragma.\n+\t* sem_ch4.adb: Correct name of restrictions is\n+\tNo_Standard_Allocators_After_Elaboration.\n+\t* sem_ch13.adb (Analyze_Attribute_Definition_Clause): Check\n+\tviolation of restriction No_Use_Of_Attribute.\n+\t* sem_prag.adb (Process_Restrictions_Or_Restriction_Warnings):\n+\tSet restrictions No_Use_Of_Pragma and No_Use_Of_Attribute.\n+\t(Analyze_Pragma): Check violation of restriction No_Use_Of_Pragma.\n+\t* sem_res.adb: Check restrictions No_Access_Parameter_Allocators\n+\tand No_Coextensions.\n+\t* bcheck.adb: Correct name of restrictions is\n+\tNo_Standard_Allocators_After_Elaboration.\n+\t* gnatbind.adb: Correct name of restrictions is\n+\tNo_Standard_Allocators_After_Elaboration.\n+\n 2013-04-12  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* sem_prag.adb (Analyze_Pragma, (Check_Mode_Restriction_In_Function):"}, {"sha": "7c81df9ffe628e0b14124b8e7cc11034fd0198b1", "filename": "gcc/ada/bcheck.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fbcheck.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fbcheck.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbcheck.adb?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2013, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -923,9 +923,9 @@ package body Bcheck is\n         and then ALIs.Table (ALIs.First).Allocator_In_Body\n       then\n          Cumulative_Restrictions.Violated\n-           (No_Allocators_After_Elaboration) := True;\n+           (No_Standard_Allocators_After_Elaboration) := True;\n          ALIs.Table (ALIs.First).Restrictions.Violated\n-           (No_Allocators_After_Elaboration) := True;\n+           (No_Standard_Allocators_After_Elaboration) := True;\n       end if;\n \n       --  Loop through all restriction violations"}, {"sha": "9e451391230d1c5b8e3a3b2bb86fca8a278e2421", "filename": "gcc/ada/gnatbind.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fgnatbind.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fgnatbind.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatbind.adb?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2013, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -143,7 +143,7 @@ procedure Gnatbind is\n       --  should not be listed.\n \n       No_Restriction_List : constant array (All_Restrictions) of Boolean :=\n-        (No_Allocators_After_Elaboration => True,\n+        (No_Standard_Allocators_After_Elaboration => True,\n          --  This involves run-time conditions not checkable at compile time\n \n          No_Anonymous_Allocators         => True,"}, {"sha": "2e225f112588ae3b579e9a24f016cdd80ca956bb", "filename": "gcc/ada/restrict.adb", "status": "modified", "additions": 125, "deletions": 1, "changes": 126, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Frestrict.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Frestrict.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frestrict.adb?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2013, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -68,6 +68,24 @@ package body Restrict is\n    --  Set True if any entry of No_Specifcation_Of_Aspects has been set True.\n    --  Once set True, this is never turned off again.\n \n+   No_Use_Of_Attribute : array (Attribute_Id) of Source_Ptr :=\n+                          (others => No_Location);\n+\n+   No_Use_Of_Attribute_Warning : array (Attribute_Id) of Boolean :=\n+                                  (others => False);\n+\n+   No_Use_Of_Attribute_Set : Boolean := False;\n+   --  Indicates that No_Use_Of_Attribute was set at least once.\n+\n+   No_Use_Of_Pragma : array (Pragma_Id) of Source_Ptr :=\n+                        (others => No_Location);\n+\n+   No_Use_Of_Pragma_Warning : array (Pragma_Id) of Boolean :=\n+                                  (others => False);\n+\n+   No_Use_Of_Pragma_Set : Boolean := False;\n+   --  Indicates that No_Use_Of_Pragma was set at least once.\n+\n    -----------------------\n    -- Local Subprograms --\n    -----------------------\n@@ -287,6 +305,74 @@ package body Restrict is\n       Check_Restriction (No_Implicit_Heap_Allocations, N);\n    end Check_No_Implicit_Heap_Alloc;\n \n+   -------------------------------------------\n+   -- Check_Restriction_No_Use_Of_Attribute --\n+   --------------------------------------------\n+\n+   procedure Check_Restriction_No_Use_Of_Attribute (N : Node_Id) is\n+      Id   : constant Name_Id      := Chars (N);\n+      A_Id : constant Attribute_Id := Get_Attribute_Id (Id);\n+\n+   begin\n+      --  Ignore call if node N is not in the main source unit, since we only\n+      --  give messages for the main unit. This avoids giving messages for\n+      --  aspects that are specified in withed units.\n+\n+      if not In_Extended_Main_Source_Unit (N) then\n+         return;\n+      end if;\n+\n+      --  If nothing set, nothing to check.\n+\n+      if not No_Use_Of_Attribute_Set then\n+         return;\n+      end if;\n+\n+      Error_Msg_Sloc := No_Use_Of_Attribute (A_Id);\n+\n+      if Error_Msg_Sloc /= No_Location then\n+         Error_Msg_Node_1 := N;\n+         Error_Msg_Warn := No_Use_Of_Attribute_Warning (A_Id);\n+         Error_Msg_N\n+           (\"<violation of restriction `No_Use_Of_Attribute '='> &`#\",\n+            N);\n+      end if;\n+   end Check_Restriction_No_Use_Of_Attribute;\n+\n+   ----------------------------------------\n+   -- Check_Restriction_No_Use_Of_Pragma --\n+   ----------------------------------------\n+\n+   procedure Check_Restriction_No_Use_Of_Pragma (N : Node_Id) is\n+      Id   : constant Node_Id   := Pragma_Identifier (N);\n+      P_Id : constant Pragma_Id := Get_Pragma_Id (Chars (Id));\n+\n+   begin\n+      --  Ignore call if node N is not in the main source unit, since we only\n+      --  give messages for the main unit. This avoids giving messages for\n+      --  aspects that are specified in withed units.\n+\n+      if not In_Extended_Main_Source_Unit (N) then\n+         return;\n+      end if;\n+\n+      --  If nothing set, nothing to check.\n+\n+      if not No_Use_Of_Pragma_Set then\n+         return;\n+      end if;\n+\n+      Error_Msg_Sloc := No_Use_Of_Pragma (P_Id);\n+\n+      if Error_Msg_Sloc /= No_Location then\n+         Error_Msg_Node_1 := Id;\n+         Error_Msg_Warn := No_Use_Of_Pragma_Warning (P_Id);\n+         Error_Msg_N\n+           (\"<violation of restriction `No_Use_Of_Pragma '='> &`#\",\n+            Id);\n+      end if;\n+   end Check_Restriction_No_Use_Of_Pragma;\n+\n    -----------------------------------\n    -- Check_Obsolescent_2005_Entity --\n    -----------------------------------\n@@ -1271,6 +1357,44 @@ package body Restrict is\n       No_Specification_Of_Aspect_Set := True;\n    end Set_Restriction_No_Specification_Of_Aspect;\n \n+   -----------------------------------------\n+   -- Set_Restriction_No_Use_Of_Attribute --\n+   -----------------------------------------\n+\n+   procedure Set_Restriction_No_Use_Of_Attribute\n+     (N       : Node_Id;\n+      Warning : Boolean)\n+   is\n+      A_Id : constant Attribute_Id := Get_Attribute_Id (Chars (N));\n+\n+   begin\n+      No_Use_Of_Attribute_Set := True;\n+      No_Use_Of_Attribute (A_Id) := Sloc (N);\n+\n+      if Warning = False then\n+         No_Use_Of_Attribute_Warning (A_Id) := False;\n+      end if;\n+   end Set_Restriction_No_Use_Of_Attribute;\n+\n+   --------------------------------------\n+   -- Set_Restriction_No_Use_Of_Pragma --\n+   --------------------------------------\n+\n+   procedure Set_Restriction_No_Use_Of_Pragma\n+     (N       : Node_Id;\n+      Warning : Boolean)\n+   is\n+      A_Id : constant Pragma_Id := Get_Pragma_Id (Chars (N));\n+\n+   begin\n+      No_Use_Of_Pragma_Set := True;\n+      No_Use_Of_Pragma (A_Id) := Sloc (N);\n+\n+      if Warning = False then\n+         No_Use_Of_Pragma_Warning (A_Id) := False;\n+      end if;\n+   end Set_Restriction_No_Use_Of_Pragma;\n+\n    ----------------------------------\n    -- Suppress_Restriction_Message --\n    ----------------------------------"}, {"sha": "6da0caec1f8494bb066a06420bf8bc9559c8fdf7", "filename": "gcc/ada/restrict.ads", "status": "modified", "additions": 24, "deletions": 1, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Frestrict.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Frestrict.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frestrict.ads?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2012, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2013, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -252,6 +252,16 @@ package Restrict is\n    --  Wrapper on Check_Restriction with Msg_Issued, with the out-parameter\n    --  being ignored here.\n \n+   procedure Check_Restriction_No_Use_Of_Attribute (N : Node_Id);\n+   --  N is the node of an attribute definition clause.  An error message\n+   --  (warning) will be issued if a restriction (warning) was previously set\n+   --  for this attribute using Set_No_Use_Of_Attribute.\n+\n+   procedure Check_Restriction_No_Use_Of_Pragma  (N : Node_Id);\n+   --  N is the node of a pragma.  An error message (warning) will be issued\n+   --  if a restriction (warning) was previously set for this pragma using\n+   --  Set_No_Use_Of_Pragma.\n+\n    procedure Check_Restriction_No_Dependence (U : Node_Id; Err : Node_Id);\n    --  Called when a dependence on a unit is created (either implicitly, or by\n    --  an explicit WITH clause). U is a node for the unit involved, and Err is\n@@ -416,6 +426,19 @@ package Restrict is\n    --  case of a Restriction_Warnings pragma specifying this restriction and\n    --  False for a Restrictions pragma specifying this restriction.\n \n+   procedure Set_Restriction_No_Use_Of_Attribute\n+     (N       : Node_Id;\n+      Warning : Boolean);\n+   --  N is the node id for the identifier in a pragma Restrictions for\n+   --  No_Use_Of_Attribute. Caller has verified that this is a valid attribute\n+   --  designator.\n+\n+   procedure Set_Restriction_No_Use_Of_Pragma\n+     (N       : Node_Id;\n+      Warning : Boolean);\n+   --  N is the node id for the identifier in a pragma Restrictions for\n+   --  No_Use_Of_Pragma. Caller has verified that this is a valid pragma id.\n+\n    function Tasking_Allowed return Boolean;\n    pragma Inline (Tasking_Allowed);\n    --  Tests if tasking operations are allowed by the current restrictions"}, {"sha": "66a8cf4119e336b21e35a0b3217ddb4f8a194473", "filename": "gcc/ada/s-rident.ads", "status": "modified", "additions": 85, "deletions": 79, "changes": 164, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fs-rident.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fs-rident.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-rident.ads?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -88,69 +88,71 @@ package System.Rident is\n       --  binder will check that every unit either has the restriction set, or\n       --  does not violate the restriction.\n \n-     (Simple_Barriers,                         -- GNAT (Ravenscar)\n-      No_Abort_Statements,                     -- (RM D.7(5), H.4(3))\n-      No_Access_Subprograms,                   -- (RM H.4(17))\n-      No_Allocators,                           -- (RM H.4(7))\n-      No_Allocators_After_Elaboration,         -- Ada 2012 (RM D.7(19.1/2))\n-      No_Anonymous_Allocators,                 -- Ada 2012 (RM H.4(8/1))\n-      No_Asynchronous_Control,                 -- (RM J.13(3/2)\n-      No_Calendar,                             -- GNAT\n-      No_Default_Stream_Attributes,            -- Ada 2012 (RM 13.12.1(4/2))\n-      No_Delay,                                -- (RM H.4(21))\n-      No_Direct_Boolean_Operators,             -- GNAT\n-      No_Dispatch,                             -- (RM H.4(19))\n-      No_Dispatching_Calls,                    -- GNAT\n-      No_Dynamic_Attachment,                   -- GNAT\n-      No_Dynamic_Priorities,                   -- (RM D.9(9))\n-      No_Enumeration_Maps,                     -- GNAT\n-      No_Entry_Calls_In_Elaboration_Code,      -- GNAT\n-      No_Entry_Queue,                          -- GNAT (Ravenscar)\n-      No_Exception_Handlers,                   -- GNAT\n-      No_Exception_Propagation,                -- GNAT\n-      No_Exception_Registration,               -- GNAT\n-      No_Exceptions,                           -- (RM H.4(12))\n-      No_Finalization,                         -- GNAT\n-      No_Fixed_Point,                          -- (RM H.4(15))\n-      No_Floating_Point,                       -- (RM H.4(14))\n-      No_IO,                                   -- (RM H.4(20))\n-      No_Implicit_Conditionals,                -- GNAT\n-      No_Implicit_Dynamic_Code,                -- GNAT\n-      No_Implicit_Heap_Allocations,            -- (RM D.8(8), H.4(3))\n-      No_Implicit_Loops,                       -- GNAT\n-      No_Initialize_Scalars,                   -- GNAT\n-      No_Local_Allocators,                     -- (RM H.4(8))\n-      No_Local_Timing_Events,                  -- (RM D.7(10.2/2))\n-      No_Local_Protected_Objects,              -- GNAT\n-      No_Nested_Finalization,                  -- (RM D.7(4))\n-      No_Protected_Type_Allocators,            -- GNAT\n-      No_Protected_Types,                      -- (RM H.4(5))\n-      No_Recursion,                            -- (RM H.4(22))\n-      No_Reentrancy,                           -- (RM H.4(23))\n-      No_Relative_Delay,                       -- GNAT (Ravenscar)\n-      No_Requeue_Statements,                   -- GNAT\n-      No_Secondary_Stack,                      -- GNAT\n-      No_Select_Statements,                    -- GNAT (Ravenscar)\n-      No_Specific_Termination_Handlers,        -- (RM D.7(10.7/2))\n-      No_Standard_Storage_Pools,               -- GNAT\n-      No_Stream_Optimizations,                 -- GNAT\n-      No_Streams,                              -- GNAT\n-      No_Task_Allocators,                      -- (RM D.7(7))\n-      No_Task_Attributes_Package,              -- GNAT\n-      No_Task_Hierarchy,                       -- (RM D.7(3), H.4(3))\n-      No_Task_Termination,                     -- GNAT (Ravenscar)\n-      No_Tasking,                              -- GNAT\n-      No_Terminate_Alternatives,               -- (RM D.7(6))\n-      No_Unchecked_Access,                     -- (RM H.4(18))\n-      No_Unchecked_Conversion,                 -- (RM J.13(4/2))\n-      No_Unchecked_Deallocation,               -- (RM J.13(5/2))\n-      Static_Priorities,                       -- GNAT\n-      Static_Storage_Size,                     -- GNAT\n+     (Simple_Barriers,                           -- Ada 2012 (D.7 (10.9/3))\n+      No_Abort_Statements,                       -- (RM D.7(5), H.4(3))\n+      No_Access_Parameter_Allocators,            -- Ada 2012 (RM H.4 (8.3/3))\n+      No_Access_Subprograms,                     -- (RM H.4(17))\n+      No_Allocators,                             -- (RM H.4(7))\n+      No_Anonymous_Allocators,                   -- Ada 2012 (RM H.4(8/1))\n+      No_Asynchronous_Control,                   -- (RM J.13(3/2)\n+      No_Calendar,                               -- GNAT\n+      No_Coextensions,                           -- Ada 2012 (RM H.4(8.2/3))\n+      No_Default_Stream_Attributes,              -- Ada 2012 (RM 13.12.1(4/2))\n+      No_Delay,                                  -- (RM H.4(21))\n+      No_Direct_Boolean_Operators,               -- GNAT\n+      No_Dispatch,                               -- (RM H.4(19))\n+      No_Dispatching_Calls,                      -- GNAT\n+      No_Dynamic_Attachment,                     -- Ada 2012 (RM E.7(10/3))\n+      No_Dynamic_Priorities,                     -- (RM D.9(9))\n+      No_Enumeration_Maps,                       -- GNAT\n+      No_Entry_Calls_In_Elaboration_Code,        -- GNAT\n+      No_Entry_Queue,                            -- GNAT (Ravenscar)\n+      No_Exception_Handlers,                     -- GNAT\n+      No_Exception_Propagation,                  -- GNAT\n+      No_Exception_Registration,                 -- GNAT\n+      No_Exceptions,                             -- (RM H.4(12))\n+      No_Finalization,                           -- GNAT\n+      No_Fixed_Point,                            -- (RM H.4(15))\n+      No_Floating_Point,                         -- (RM H.4(14))\n+      No_IO,                                     -- (RM H.4(20))\n+      No_Implicit_Conditionals,                  -- GNAT\n+      No_Implicit_Dynamic_Code,                  -- GNAT\n+      No_Implicit_Heap_Allocations,              -- (RM D.8(8), H.4(3))\n+      No_Implicit_Loops,                         -- GNAT\n+      No_Initialize_Scalars,                     -- GNAT\n+      No_Local_Allocators,                       -- (RM H.4(8))\n+      No_Local_Timing_Events,                    -- (RM D.7(10.2/2))\n+      No_Local_Protected_Objects,                -- Ada 2012 (D.7(10/1.3))\n+      No_Nested_Finalization,                    -- (RM D.7(4))\n+      No_Protected_Type_Allocators,              -- Ada 2012 (D.7 (10.3/2))\n+      No_Protected_Types,                        -- (RM H.4(5))\n+      No_Recursion,                              -- (RM H.4(22))\n+      No_Reentrancy,                             -- (RM H.4(23))\n+      No_Relative_Delay,                         -- Ada 2012 (D.7 (10.5/3))\n+      No_Requeue_Statements,                     -- Ada 2012 (D.7 (10.6/3))\n+      No_Secondary_Stack,                        -- GNAT\n+      No_Select_Statements,                      -- Ada 2012 (D.7 (10.7/4))\n+      No_Specific_Termination_Handlers,          -- (RM D.7(10.7/2))\n+      No_Standard_Allocators_After_Elaboration,  -- Ada 2012 (RM D.7(19.1/2))\n+      No_Standard_Storage_Pools,                 -- GNAT\n+      No_Stream_Optimizations,                   -- GNAT\n+      No_Streams,                                -- GNAT\n+      No_Task_Allocators,                        -- (RM D.7(7))\n+      No_Task_Attributes_Package,                -- GNAT\n+      No_Task_Hierarchy,                         -- (RM D.7(3), H.4(3))\n+      No_Task_Termination,                       -- GNAT (Ravenscar)\n+      No_Tasking,                                -- GNAT\n+      No_Terminate_Alternatives,                 -- (RM D.7(6))\n+      No_Unchecked_Access,                       -- (RM H.4(18))\n+      No_Unchecked_Conversion,                   -- (RM J.13(4/2))\n+      No_Unchecked_Deallocation,                 -- (RM J.13(5/2))\n+      Static_Priorities,                         -- GNAT\n+      Static_Storage_Size,                       -- GNAT\n \n       --  The following require consistency checking with special rules. See\n       --  individual routines in unit Bcheck for details of what is required.\n \n-      No_Default_Initialization,               -- GNAT\n+      No_Default_Initialization,                 -- GNAT\n \n       --  The following cases do not require consistency checking and if used\n       --  as a configuration pragma within a specific unit, apply only to that\n@@ -162,50 +164,54 @@ package System.Rident is\n       --  it is sticky, in that if it is found anywhere within any of these\n       --  units, it applies to all units in this extended main source.\n \n-      Immediate_Reclamation,                   -- (RM H.4(10))\n-      No_Implementation_Aspect_Specifications, -- Ada 2012 AI-241\n-      No_Implementation_Attributes,            -- Ada 2005 AI-257\n-      No_Implementation_Identifiers,           -- Ada 2012 AI-246\n-      No_Implementation_Pragmas,               -- Ada 2005 AI-257\n-      No_Implementation_Restrictions,          -- GNAT\n-      No_Implementation_Units,                 -- Ada 2012 AI-242\n-      No_Implicit_Aliasing,                    -- GNAT\n-      No_Elaboration_Code,                     -- GNAT\n-      No_Obsolescent_Features,                 -- Ada 2005 AI-368\n-      No_Wide_Characters,                      -- GNAT\n-      SPARK,                                   -- GNAT\n+      Immediate_Reclamation,                     -- (RM H.4(10))\n+      No_Implementation_Aspect_Specifications,   -- Ada 2012 AI-241\n+      No_Implementation_Attributes,              -- Ada 2005 AI-257\n+      No_Implementation_Identifiers,             -- Ada 2012 AI-246\n+      No_Implementation_Pragmas,                 -- Ada 2005 AI-257\n+      No_Implementation_Restrictions,            -- GNAT\n+      No_Implementation_Units,                   -- Ada 2012 AI-242\n+      No_Implicit_Aliasing,                      -- GNAT\n+      No_Elaboration_Code,                       -- GNAT\n+      No_Obsolescent_Features,                   -- Ada 2005 AI-368\n+      No_Wide_Characters,                        -- GNAT\n+      SPARK,                                     -- GNAT\n \n       --  The following cases require a parameter value\n \n+      No_Specification_Of_Aspect,                -- 2012 (RM 13.12.1 (6.1/3))\n+      No_Use_Of_Attribute,                       -- 2012 (RM 13.12.1 (6.2/3))\n+      No_Use_Of_Pragma,                          -- 2012 (RM 13.12.1 (6.3/3))\n+\n       --  The following entries are fully checked at compile/bind time, which\n       --  means that the compiler can in general tell the minimum value which\n       --  could be used with a restrictions pragma. The binder can deduce the\n       --  appropriate minimum value for the partition by taking the maximum\n       --  value required by any unit.\n \n-      Max_Protected_Entries,                   -- (RM D.7(14))\n-      Max_Select_Alternatives,                 -- (RM D.7(12))\n-      Max_Task_Entries,                        -- (RM D.7(13), H.4(3))\n+      Max_Protected_Entries,                     -- (RM D.7(14))\n+      Max_Select_Alternatives,                   -- (RM D.7(12))\n+      Max_Task_Entries,                          -- (RM D.7(13), H.4(3))\n \n       --  The following entries are also fully checked at compile/bind time,\n       --  and the compiler can also at least in some cases tell the minimum\n       --  value which could be used with a restriction pragma. The difference\n       --  is that the contributions are additive, so the binder deduces this\n       --  value by adding the unit contributions.\n \n-      Max_Tasks,                               -- (RM D.7(19), H.4(3))\n+      Max_Tasks,                                 -- (RM D.7(19), H.4(3))\n \n       --  The following entries are checked at compile time only for zero/\n       --  nonzero entries. This means that the compiler can tell at compile\n       --  time if a restriction value of zero is (would be) violated, but that\n       --  the compiler cannot distinguish between different non-zero values.\n \n-      Max_Asynchronous_Select_Nesting,         -- (RM D.7(18), H.4(3))\n-      Max_Entry_Queue_Length,                  -- GNAT\n+      Max_Asynchronous_Select_Nesting,           -- (RM D.7(18), H.4(3))\n+      Max_Entry_Queue_Length,                    -- Ada 2012 (RM D.7 (19.1/2))\n \n       --  The remaining entries are not checked at compile/bind time\n \n-      Max_Storage_At_Blocking,                 -- (RM D.7(17))\n+      Max_Storage_At_Blocking,                   -- (RM D.7(17))\n \n       Not_A_Restriction_Id);\n \n@@ -242,7 +248,7 @@ package System.Rident is\n \n    subtype All_Parameter_Restrictions is\n      Restriction_Id range\n-       Max_Protected_Entries .. Max_Storage_At_Blocking;\n+       No_Specification_Of_Aspect .. Max_Storage_At_Blocking;\n    --  All restrictions that take a parameter\n \n    subtype Checked_Parameter_Restrictions is"}, {"sha": "89364c3794e4a0f7a41a965ddbceff88460e5b6c", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -2770,6 +2770,7 @@ package body Sem_Ch13 is\n       end if;\n \n       Set_Entity (N, U_Ent);\n+      Check_Restriction_No_Use_Of_Attribute (N);\n \n       --  Switch on particular attribute\n "}, {"sha": "a66b19482cba622fb39d814a4048c6ccc24853e2", "filename": "gcc/ada/sem_ch4.adb", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch4.adb?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -413,8 +413,9 @@ package body Sem_Ch4 is\n       if Comes_From_Source (N) then\n          Check_Restriction (No_Allocators, N);\n \n-         --  Processing for No_Allocators_After_Elaboration, loop to look at\n-         --  enclosing context, checking task case and main subprogram case.\n+         --  Processing for No_Standard_Allocators_After_Elaboration, loop to\n+         --  look at enclosing context, checking task case and main subprogram\n+         --  case.\n \n          C := N;\n          P := Parent (C);\n@@ -431,7 +432,8 @@ package body Sem_Ch4 is\n                --  violation of No_Allocators_After_Elaboration we can detect.\n \n                if Nkind (Original_Node (Parent (P))) = N_Task_Body then\n-                  Check_Restriction (No_Allocators_After_Elaboration, N);\n+                  Check_Restriction\n+                    (No_Standard_Allocators_After_Elaboration, N);\n                   exit;\n                end if;\n "}, {"sha": "ee9388521b39a425d38e31c3f207528276d7a3f6", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -5801,6 +5801,26 @@ package body Sem_Prag is\n                   end if;\n                end;\n \n+            elsif Id = Name_No_Use_Of_Attribute then\n+               if Nkind (Expr) /= N_Identifier\n+                 or else not Is_Attribute_Name (Chars (Expr))\n+               then\n+                  Error_Msg_N (\"unknown attribute name?\", Expr);\n+\n+               else\n+                  Set_Restriction_No_Use_Of_Attribute (Expr, Warn);\n+               end if;\n+\n+            elsif Id = Name_No_Use_Of_Pragma then\n+               if Nkind (Expr) /= N_Identifier\n+                 or else not Is_Pragma_Name (Chars (Expr))\n+               then\n+                  Error_Msg_N (\"unknown pragma name?\", Expr);\n+\n+               else\n+                  Set_Restriction_No_Use_Of_Pragma (Expr, Warn);\n+               end if;\n+\n             --  All other cases of restriction identifier present\n \n             else\n@@ -6757,6 +6777,8 @@ package body Sem_Prag is\n          end if;\n       end if;\n \n+      Check_Restriction_No_Use_Of_Pragma (N);\n+\n       --  An enumeration type defines the pragmas that are supported by the\n       --  implementation. Get_Pragma_Id (in package Prag) transforms a name\n       --  into the corresponding enumeration value for the following case."}, {"sha": "02a5cda8403b95fe02ac7339c436c91f21939dc1", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -3667,6 +3667,10 @@ package body Sem_Res is\n                         Establish_Transient_Scope (A, False);\n                      end if;\n                   end;\n+\n+                  if Ekind (Etype (F)) = E_Anonymous_Access_Type then\n+                     Check_Restriction (No_Access_Parameter_Allocators, A);\n+                  end if;\n                end if;\n \n                --  (Ada 2005): The call may be to a primitive operation of\n@@ -4552,6 +4556,8 @@ package body Sem_Res is\n                          Defining_Identifier (Associated_Node_For_Itype (Typ));\n \n             begin\n+               Check_Restriction (No_Coextensions, N);\n+\n                --  Ada 2012 AI05-0052: If the designated type of the allocator\n                --  is limited, then the allocator shall not be used to define\n                --  the value of an access discriminant unless the discriminated"}, {"sha": "05d11dd155fa270bfb24b8e31ec7dc09edd55638", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f4c2887eb49f17bcd465879faaecf2f6234eae/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=57f4c2887eb49f17bcd465879faaecf2f6234eae", "patch": "@@ -721,15 +721,20 @@ package Snames is\n    Name_Name                           : constant Name_Id := N + $;\n    Name_NCA                            : constant Name_Id := N + $;\n    Name_No                             : constant Name_Id := N + $;\n+   Name_No_Access_Parameter_Allocators : constant Name_Id := N + $;\n+   Name_No_Coextensions                : constant Name_Id := N + $;\n    Name_No_Dependence                  : constant Name_Id := N + $;\n    Name_No_Dynamic_Attachment          : constant Name_Id := N + $;\n    Name_No_Dynamic_Interrupts          : constant Name_Id := N + $;\n    Name_No_Implementation_Extensions   : constant Name_Id := N + $;\n    Name_No_Requeue                     : constant Name_Id := N + $;\n    Name_No_Requeue_Statements          : constant Name_Id := N + $;\n    Name_No_Specification_Of_Aspect     : constant Name_Id := N + $;\n+   Name_No_Standard_Allocators_After_Elaboration : constant Name_Id := N + $;\n    Name_No_Task_Attributes             : constant Name_Id := N + $;\n    Name_No_Task_Attributes_Package     : constant Name_Id := N + $;\n+   Name_No_Use_Of_Attribute            : constant Name_Id := N + $;\n+   Name_No_Use_Of_Pragma               : constant Name_Id := N + $;\n    Name_No_Unroll                      : constant Name_Id := N + $;\n    Name_No_Vector                      : constant Name_Id := N + $;\n    Name_Nominal                        : constant Name_Id := N + $;"}]}