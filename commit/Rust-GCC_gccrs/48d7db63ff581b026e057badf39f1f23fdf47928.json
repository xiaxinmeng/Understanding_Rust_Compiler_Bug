{"sha": "48d7db63ff581b026e057badf39f1f23fdf47928", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhkN2RiNjNmZjU4MWIwMjZlMDU3YmFkZjM5ZjFmMjNmZGY0NzkyOA==", "commit": {"author": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2002-03-04T21:41:06Z"}, "committer": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2002-03-04T21:41:06Z"}, "message": "configure.in: Add --enable-install-libiberty option.\n\n2002-03-04  Phil Edwards  <pme@gcc.gnu.org>\n\n\t* configure.in:  Add --enable-install-libiberty option.\n\t* Makefile.in (INSTALLED_HEADERS):  New variable.\n\t(install_to_libdir):  Possibly also copy headers.\n\t* configure:  Regenerated.\n\nFrom-SVN: r50288", "tree": {"sha": "ed430ec7e88592af6a1259c8a8265e9c2c62ff04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed430ec7e88592af6a1259c8a8265e9c2c62ff04"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48d7db63ff581b026e057badf39f1f23fdf47928", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48d7db63ff581b026e057badf39f1f23fdf47928", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48d7db63ff581b026e057badf39f1f23fdf47928", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48d7db63ff581b026e057badf39f1f23fdf47928/comments", "author": null, "committer": null, "parents": [{"sha": "af18e951d4952c9aa06b35ace0f65e9ac5ffa5e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af18e951d4952c9aa06b35ace0f65e9ac5ffa5e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af18e951d4952c9aa06b35ace0f65e9ac5ffa5e3"}], "stats": {"total": 372, "additions": 229, "deletions": 143}, "files": [{"sha": "b213aa2d0e7ca51511400ccad55c8e322aa025e0", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=48d7db63ff581b026e057badf39f1f23fdf47928", "patch": "@@ -1,3 +1,10 @@\n+2002-03-04  Phil Edwards  <pme@gcc.gnu.org>\n+\n+\t* configure.in:  Add --enable-install-libiberty option.\n+\t* Makefile.in (INSTALLED_HEADERS):  New variable.\n+\t(install_to_libdir):  Possibly also copy headers.\n+\t* configure:  Regenerated.\n+\n 2002-03-04  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* xmalloc.c (xmalloc_fail): Clarify error message further."}, {"sha": "3dccfada3d7aaa8bbcada0410b5507ee852e84e3", "filename": "libiberty/Makefile.in", "status": "modified", "additions": 30, "deletions": 1, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FMakefile.in?ref=48d7db63ff581b026e057badf39f1f23fdf47928", "patch": "@@ -1,6 +1,6 @@\n #\n # Makefile\n-#   Copyright (C) 1990, 91-99, 2000, 2001\n+#   Copyright (C) 1990, 91-99, 2000, 2001, 2002\n #   Free Software Foundation\n #\n # This file is part of the libiberty library.\n@@ -34,6 +34,8 @@ prefix = @prefix@\n exec_prefix = @exec_prefix@\n bindir = @bindir@\n libdir = @libdir@\n+includedir = @includedir@\n+target_header_dir = @target_header_dir@\n \n SHELL = @SHELL@\n \n@@ -48,6 +50,7 @@ MULTICLEAN = true\n INSTALL = @INSTALL@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_DATA = @INSTALL_DATA@\n+mkinstalldirs = $(SHELL) $(srcdir)/../mkinstalldirs\n \n AR = @AR@\n AR_FLAGS = rc\n@@ -181,6 +184,22 @@ CONFIGURED_OFILES = asprintf.o atexit.o\t\t\t\t\t\\\n \tvasprintf.o vfork.o vfprintf.o vprintf.o vsprintf.o\t\t\\\n \twaitpid.o\n \n+# These files are installed if the library has been configured to do so.\n+INSTALLED_HEADERS =                                                     \\\n+\t$(INCDIR)/ansidecl.h                                            \\\n+\t$(INCDIR)/demangle.h                                            \\\n+\t$(INCDIR)/dyn-string.h                                          \\\n+\t$(INCDIR)/fibheap.h                                             \\\n+\t$(INCDIR)/floatformat.h                                         \\\n+\t$(INCDIR)/hashtab.h                                             \\\n+\t$(INCDIR)/libiberty.h                                           \\\n+\t$(INCDIR)/objalloc.h                                            \\\n+\t$(INCDIR)/partition.h                                           \\\n+\t$(INCDIR)/safe-ctype.h                                          \\\n+\t$(INCDIR)/sort.h                                                \\\n+\t$(INCDIR)/splay-tree.h                                          \\\n+\t$(INCDIR)/ternary.h\n+\n $(TARGETLIB): $(REQUIRED_OFILES) $(EXTRA_OFILES) $(LIBOBJS)\n \t-rm -f $(TARGETLIB) pic/$(TARGETLIB)\n \t$(AR) $(AR_FLAGS) $(TARGETLIB) \\\n@@ -240,6 +259,16 @@ install_to_libdir: all\n \t$(INSTALL_DATA) $(TARGETLIB) $(libdir)$(MULTISUBDIR)/$(TARGETLIB)n\n \t( cd $(libdir)$(MULTISUBDIR) ; $(RANLIB) $(TARGETLIB)n )\n \tmv -f $(libdir)$(MULTISUBDIR)/$(TARGETLIB)n $(libdir)$(MULTISUBDIR)/$(TARGETLIB)\n+\tif test -n \"${target_header_dir}\"; then \\\n+\t  case \"${target_header_dir}\" in \\\n+\t    /*)    thd=${target_header_dir};; \\\n+\t    *)     thd=${includedir}${MULTISUBDIR}/${target_header_dir};; \\\n+\t  esac; \\\n+\t  ${mkinstalldirs} $${thd}; \\\n+\t  for h in ${INSTALLED_HEADERS}; do \\\n+\t    ${INSTALL_DATA} $$h $${thd}; \\\n+\t  done; \\\n+\tfi\n \t@$(MULTIDO) $(FLAGS_TO_PASS) multi-do DO=install\n \n install_to_tooldir: all"}, {"sha": "e2dd9bfb15a33d2f6fa6ea6cf73a481936a27d08", "filename": "libiberty/configure", "status": "modified", "additions": 169, "deletions": 142, "changes": 311, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=48d7db63ff581b026e057badf39f1f23fdf47928", "patch": "@@ -21,6 +21,8 @@ ac_help=\"$ac_help\n   --enable-maintainer-mode\n                           enable make rules and dependencies not useful\n                           (and sometimes confusing) to the casual installer\"\n+ac_help=\"$ac_help\n+  --enable-install-libiberty       Install headers for end users\"\n \n # Initialize some variables set by options.\n # The variables have the same names as the options, with\n@@ -38,6 +40,7 @@ program_suffix=NONE\n program_transform_name=s,x,x,\n silent=\n site=\n+sitefile=\n srcdir=\n target=NONE\n verbose=\n@@ -152,6 +155,7 @@ Configuration:\n   --help                  print this message\n   --no-create             do not create output files\n   --quiet, --silent       do not print \\`checking...' messages\n+  --site-file=FILE        use FILE as the site file\n   --version               print the version of autoconf that created configure\n Directory and file names:\n   --prefix=PREFIX         install architecture-independent files in PREFIX\n@@ -322,6 +326,11 @@ EOF\n   -site=* | --site=* | --sit=*)\n     site=\"$ac_optarg\" ;;\n \n+  -site-file | --site-file | --site-fil | --site-fi | --site-f)\n+    ac_prev=sitefile ;;\n+  -site-file=* | --site-file=* | --site-fil=* | --site-fi=* | --site-f=*)\n+    sitefile=\"$ac_optarg\" ;;\n+\n   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n     ac_prev=srcdir ;;\n   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n@@ -487,12 +496,16 @@ fi\n srcdir=`echo \"${srcdir}\" | sed 's%\\([^/]\\)/*$%\\1%'`\n \n # Prefer explicitly selected file to automatically selected ones.\n-if test -z \"$CONFIG_SITE\"; then\n-  if test \"x$prefix\" != xNONE; then\n-    CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n-  else\n-    CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n+if test -z \"$sitefile\"; then\n+  if test -z \"$CONFIG_SITE\"; then\n+    if test \"x$prefix\" != xNONE; then\n+      CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n+    else\n+      CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n+    fi\n   fi\n+else\n+  CONFIG_SITE=\"$sitefile\"\n fi\n for ac_site_file in $CONFIG_SITE; do\n   if test -r \"$ac_site_file\"; then\n@@ -586,7 +599,7 @@ ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:590: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:603: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -611,7 +624,7 @@ fi\n # Extract the first word of \"makeinfo\", so it can be a program name with args.\n set dummy makeinfo; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:615: checking for $ac_word\" >&5\n+echo \"configure:628: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_MAKEINFO'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -657,7 +670,7 @@ fi\n # Extract the first word of \"perl\", so it can be a program name with args.\n set dummy perl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:661: checking for $ac_word\" >&5\n+echo \"configure:674: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_PERL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -697,7 +710,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:701: checking host system type\" >&5\n+echo \"configure:714: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -720,7 +733,7 @@ echo \"$ac_t\"\"$host\" 1>&6\n \n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:724: checking build system type\" >&5\n+echo \"configure:737: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -746,7 +759,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:750: checking for $ac_word\" >&5\n+echo \"configure:763: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -778,7 +791,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:782: checking for $ac_word\" >&5\n+echo \"configure:795: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -810,7 +823,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:814: checking for $ac_word\" >&5\n+echo \"configure:827: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -847,7 +860,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:851: checking for $ac_word\" >&5\n+echo \"configure:864: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -877,7 +890,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:881: checking for $ac_word\" >&5\n+echo \"configure:894: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -926,7 +939,7 @@ fi\n fi\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:930: checking whether we are using GNU C\" >&5\n+echo \"configure:943: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -935,7 +948,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:939: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:952: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -951,7 +964,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:955: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:968: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -982,7 +995,7 @@ fi\n \n \n echo $ac_n \"checking for POSIXized ISC\"\"... $ac_c\" 1>&6\n-echo \"configure:986: checking for POSIXized ISC\" >&5\n+echo \"configure:999: checking for POSIXized ISC\" >&5\n if test -d /etc/conf/kconfig.d &&\n   grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1\n then\n@@ -1003,12 +1016,12 @@ else\n fi\n \n echo $ac_n \"checking for working const\"\"... $ac_c\" 1>&6\n-echo \"configure:1007: checking for working const\" >&5\n+echo \"configure:1020: checking for working const\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_const'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1012 \"configure\"\n+#line 1025 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -1057,7 +1070,7 @@ ccp = (char const *const *) p;\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1061: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1074: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_const=yes\n else\n@@ -1078,21 +1091,21 @@ EOF\n fi\n \n echo $ac_n \"checking for inline\"\"... $ac_c\" 1>&6\n-echo \"configure:1082: checking for inline\" >&5\n+echo \"configure:1095: checking for inline\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_inline'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_cv_c_inline=no\n for ac_kw in inline __inline__ __inline; do\n   cat > conftest.$ac_ext <<EOF\n-#line 1089 \"configure\"\n+#line 1102 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n } $ac_kw foo() {\n ; return 0; }\n EOF\n-if { (eval echo configure:1096: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1109: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_inline=$ac_kw; break\n else\n@@ -1135,7 +1148,7 @@ esac\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1139: checking for a BSD compatible install\" >&5\n+echo \"configure:1152: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1196,7 +1209,7 @@ host_makefile_frag=${frag}\n # able to link anything, it had better be able to at least compile\n # something.\n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1200: checking how to run the C preprocessor\" >&5\n+echo \"configure:1213: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1211,13 +1224,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1215 \"configure\"\n+#line 1228 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1221: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1234: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1228,13 +1241,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1232 \"configure\"\n+#line 1245 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1238: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1251: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1245,13 +1258,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1249 \"configure\"\n+#line 1262 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1255: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1268: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1279,17 +1292,17 @@ for ac_hdr in sys/file.h sys/param.h limits.h stdlib.h string.h unistd.h strings\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1283: checking for $ac_hdr\" >&5\n+echo \"configure:1296: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1288 \"configure\"\n+#line 1301 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1293: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1306: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1316,12 +1329,12 @@ fi\n done\n \n echo $ac_n \"checking for sys/wait.h that is POSIX.1 compatible\"\"... $ac_c\" 1>&6\n-echo \"configure:1320: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n+echo \"configure:1333: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1325 \"configure\"\n+#line 1338 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/wait.h>\n@@ -1337,7 +1350,7 @@ wait (&s);\n s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;\n ; return 0; }\n EOF\n-if { (eval echo configure:1341: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1354: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_sys_wait_h=yes\n else\n@@ -1358,12 +1371,12 @@ EOF\n fi\n \n echo $ac_n \"checking whether time.h and sys/time.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1362: checking whether time.h and sys/time.h may both be included\" >&5\n+echo \"configure:1375: checking whether time.h and sys/time.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_time'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1367 \"configure\"\n+#line 1380 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/time.h>\n@@ -1372,7 +1385,7 @@ int main() {\n struct tm *tp;\n ; return 0; }\n EOF\n-if { (eval echo configure:1376: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1389: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_time=yes\n else\n@@ -1394,19 +1407,19 @@ fi\n \n \n echo $ac_n \"checking whether errno must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:1398: checking whether errno must be declared\" >&5\n+echo \"configure:1411: checking whether errno must be declared\" >&5\n if eval \"test \\\"`echo '$''{'libiberty_cv_declare_errno'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1403 \"configure\"\n+#line 1416 \"configure\"\n #include \"confdefs.h\"\n #include <errno.h>\n int main() {\n int x = errno;\n ; return 0; }\n EOF\n-if { (eval echo configure:1410: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1423: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libiberty_cv_declare_errno=no\n else\n@@ -1428,20 +1441,20 @@ fi\n \n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1432: checking for ANSI C header files\" >&5\n+echo \"configure:1445: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1437 \"configure\"\n+#line 1450 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1445: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1458: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1458,7 +1471,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1462 \"configure\"\n+#line 1475 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1476,7 +1489,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1480 \"configure\"\n+#line 1493 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1497,7 +1510,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1501 \"configure\"\n+#line 1514 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1508,7 +1521,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1512: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1525: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1532,12 +1545,12 @@ EOF\n fi\n \n echo $ac_n \"checking for uintptr_t\"\"... $ac_c\" 1>&6\n-echo \"configure:1536: checking for uintptr_t\" >&5\n+echo \"configure:1549: checking for uintptr_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_uintptr_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1541 \"configure\"\n+#line 1554 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -1630,12 +1643,12 @@ if test \"x\" = \"y\"; then\n   for ac_func in asprintf atexit basename bcmp bcopy bsearch bzero calloc clock\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1634: checking for $ac_func\" >&5\n+echo \"configure:1647: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1639 \"configure\"\n+#line 1652 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1658,7 +1671,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1662: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1675: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1685,12 +1698,12 @@ done\n   for ac_func in getcwd getpagesize index insque mkstemps memchr memcmp memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1689: checking for $ac_func\" >&5\n+echo \"configure:1702: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1694 \"configure\"\n+#line 1707 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1713,7 +1726,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1717: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1730: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1740,12 +1753,12 @@ done\n   for ac_func in memmove memset putenv random rename rindex sigsetmask\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1744: checking for $ac_func\" >&5\n+echo \"configure:1757: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1749 \"configure\"\n+#line 1762 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1768,7 +1781,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1772: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1785: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1795,12 +1808,12 @@ done\n   for ac_func in strcasecmp setenv strchr strdup strncasecmp strrchr strstr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1799: checking for $ac_func\" >&5\n+echo \"configure:1812: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1804 \"configure\"\n+#line 1817 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1823,7 +1836,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1827: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1840: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1850,12 +1863,12 @@ done\n   for ac_func in strtod strtol strtoul tmpnam vasprintf vfprintf vprintf\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1854: checking for $ac_func\" >&5\n+echo \"configure:1867: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1859 \"configure\"\n+#line 1872 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1878,7 +1891,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1882: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1895: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1905,12 +1918,12 @@ done\n   for ac_func in vsprintf waitpid getrusage on_exit psignal strerror strsignal\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1909: checking for $ac_func\" >&5\n+echo \"configure:1922: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1914 \"configure\"\n+#line 1927 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1933,7 +1946,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1937: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1950: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1960,12 +1973,12 @@ done\n   for ac_func in sysconf times sbrk gettimeofday ffs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1964: checking for $ac_func\" >&5\n+echo \"configure:1977: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1969 \"configure\"\n+#line 1982 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1988,7 +2001,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1992: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2005: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2032,6 +2045,7 @@ fi\n \n setobjs=\n CHECK=\n+target_header_dir=\n if test -n \"${with_target_subdir}\"; then\n \n   # We are being configured as a target library.  AC_REPLACE_FUNCS\n@@ -2072,6 +2086,30 @@ EOF\n \n   fi\n \n+  # We may wish to install the target headers somewhere.\n+  # Check whether --enable-install-libiberty or --disable-install-libiberty was given.\n+if test \"${enable_install_libiberty+set}\" = set; then\n+  enableval=\"$enable_install_libiberty\"\n+  enable_install_libiberty=$enableval\n+else\n+  enable_install_libiberty=no\n+fi\n+  \n+  # Option parsed, now set things appropriately.\n+  case x\"$enable_install_libiberty\" in\n+    xyes|x)\n+      target_header_dir=libiberty\n+      ;;\n+    xno)   \n+      target_header_dir=\n+      ;;\n+    *) \n+      # This could be sanity-checked in various ways...\n+      target_header_dir=\"${enable_install_libiberty}\"\n+      ;;\n+  esac\n+\n+\n else\n \n    # Not a target library, so we set things up to run the test suite.\n@@ -2081,6 +2119,7 @@ fi\n \n \n \n+\n case \"${host}\" in\n   *-*-cygwin* | *-*-mingw*)\n     cat >> confdefs.h <<\\EOF\n@@ -2192,7 +2231,7 @@ if test -z \"${setobjs}\"; then\n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:2196: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:2235: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -2203,12 +2242,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 2207 \"configure\"\n+#line 2246 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:2212: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2251: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -2234,19 +2273,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:2238: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:2277: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2245: checking for $ac_func\" >&5\n+echo \"configure:2284: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2250 \"configure\"\n+#line 2289 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2269,7 +2308,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2273: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2312: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2296,12 +2335,12 @@ done\n \n \n   echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:2300: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:2339: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2305 \"configure\"\n+#line 2344 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -2326,12 +2365,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n   for ac_func in _getb67 GETB67 getb67; do\n     echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2330: checking for $ac_func\" >&5\n+echo \"configure:2369: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2335 \"configure\"\n+#line 2374 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2354,7 +2393,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2358: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2397: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2380,15 +2419,15 @@ fi\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:2384: checking stack direction for C alloca\" >&5\n+echo \"configure:2423: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2392 \"configure\"\n+#line 2431 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -2407,7 +2446,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:2411: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2450: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -2428,12 +2467,12 @@ EOF\n \n \n   echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2432: checking for pid_t\" >&5\n+echo \"configure:2471: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2437 \"configure\"\n+#line 2476 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2462,17 +2501,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2466: checking for vfork.h\" >&5\n+echo \"configure:2505: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2471 \"configure\"\n+#line 2510 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2476: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2515: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2497,18 +2536,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2501: checking for working vfork\" >&5\n+echo \"configure:2540: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2507: checking for vfork\" >&5\n+echo \"configure:2546: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2512 \"configure\"\n+#line 2551 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2531,7 +2570,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2535: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2574: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2553,7 +2592,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2557 \"configure\"\n+#line 2596 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2648,7 +2687,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2652: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2691: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2680,12 +2719,12 @@ fi\n     for ac_func in _doprnt\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2684: checking for $ac_func\" >&5\n+echo \"configure:2723: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2689 \"configure\"\n+#line 2728 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2708,7 +2747,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2712: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2751: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2738,12 +2777,12 @@ done\n     for ac_func in _doprnt\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2742: checking for $ac_func\" >&5\n+echo \"configure:2781: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2747 \"configure\"\n+#line 2786 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2766,7 +2805,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2770: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2809: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2794,19 +2833,19 @@ done\n \n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:2798: checking for $v\" >&5\n+echo \"configure:2837: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2803 \"configure\"\n+#line 2842 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v []; p = &$v;\n ; return 0; }\n EOF\n-if { (eval echo configure:2810: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2849: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -2832,12 +2871,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2836: checking for $ac_func\" >&5\n+echo \"configure:2875: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2841 \"configure\"\n+#line 2880 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2860,7 +2899,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2864: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2903: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2886,21 +2925,21 @@ done\n \n fi\n \n-for ac_hdr in stdlib.h unistd.h sys/stat.h sys/types.h\n+for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2894: checking for $ac_hdr\" >&5\n+echo \"configure:2933: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2899 \"configure\"\n+#line 2938 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2904: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2943: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2929,12 +2968,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2933: checking for $ac_func\" >&5\n+echo \"configure:2972: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2938 \"configure\"\n+#line 2977 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2957,7 +2996,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2961: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3000: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2982,15 +3021,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:2986: checking for working mmap\" >&5\n+echo \"configure:3025: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2994 \"configure\"\n+#line 3033 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -3018,24 +3057,11 @@ else\n #include <fcntl.h>\n #include <sys/mman.h>\n \n-#if HAVE_SYS_TYPES_H\n-# include <sys/types.h>\n-#endif\n-\n-#if HAVE_STDLIB_H\n-# include <stdlib.h>\n-#endif\n-\n-#if HAVE_SYS_STAT_H\n-# include <sys/stat.h>\n-#endif\n-\n-#if HAVE_UNISTD_H\n-# include <unistd.h>\n-#endif\n-\n /* This mess was copied from the GNU getpagesize.h.  */\n #ifndef HAVE_GETPAGESIZE\n+# ifdef HAVE_UNISTD_H\n+#  include <unistd.h>\n+# endif\n \n /* Assume that all systems that can run configure have sys/param.h.  */\n # ifndef HAVE_SYS_PARAM_H\n@@ -3143,7 +3169,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:3147: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3173: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -3167,15 +3193,15 @@ fi\n \n \n echo $ac_n \"checking for working strncmp\"\"... $ac_c\" 1>&6\n-echo \"configure:3171: checking for working strncmp\" >&5\n+echo \"configure:3197: checking for working strncmp\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_strncmp_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_strncmp_works=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3179 \"configure\"\n+#line 3205 \"configure\"\n #include \"confdefs.h\"\n \n /* Test by Jim Wilson and Kaveh Ghazi.\n@@ -3239,7 +3265,7 @@ main ()\n }\n \n EOF\n-if { (eval echo configure:3243: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3269: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_strncmp_works=yes\n else\n@@ -3430,6 +3456,7 @@ s%@INSTALL_DATA@%$INSTALL_DATA%g\n s%@host_makefile_frag@%%g\n s%@CPP@%$CPP%g\n s%@CHECK@%$CHECK%g\n+s%@target_header_dir@%$target_header_dir%g\n s%@LIBOBJS@%$LIBOBJS%g\n s%@INSTALL_DEST@%$INSTALL_DEST%g\n "}, {"sha": "f37fdc75b5345fe9082aa6ed4ac257382145ab46", "filename": "libiberty/configure.in", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d7db63ff581b026e057badf39f1f23fdf47928/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=48d7db63ff581b026e057badf39f1f23fdf47928", "patch": "@@ -205,6 +205,7 @@ fi\n \n setobjs=\n CHECK=\n+target_header_dir=\n if test -n \"${with_target_subdir}\"; then\n \n   # We are being configured as a target library.  AC_REPLACE_FUNCS\n@@ -239,6 +240,27 @@ if test -n \"${with_target_subdir}\"; then\n \n   fi\n \n+  # We may wish to install the target headers somewhere.\n+  AC_ARG_ENABLE(install-libiberty,\n+  [  --enable-install-libiberty       Install headers for end users],\n+  enable_install_libiberty=$enableval,\n+  enable_install_libiberty=no)dnl\n+  \n+  # Option parsed, now set things appropriately.\n+  case x\"$enable_install_libiberty\" in\n+    xyes|x)\n+      target_header_dir=libiberty\n+      ;;\n+    xno)   \n+      target_header_dir=\n+      ;;\n+    *) \n+      # This could be sanity-checked in various ways...\n+      target_header_dir=\"${enable_install_libiberty}\"\n+      ;;\n+  esac\n+\n+\n else\n \n    # Not a target library, so we set things up to run the test suite.\n@@ -247,6 +269,7 @@ else\n fi\n \n AC_SUBST(CHECK)\n+AC_SUBST(target_header_dir)\n \n case \"${host}\" in\n   *-*-cygwin* | *-*-mingw*)"}]}