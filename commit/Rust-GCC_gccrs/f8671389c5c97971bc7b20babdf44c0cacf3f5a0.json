{"sha": "f8671389c5c97971bc7b20babdf44c0cacf3f5a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjg2NzEzODljNWM5Nzk3MWJjN2IyMGJhYmRmNDRjMGNhY2YzZjVhMA==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1997-11-02T02:15:01Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-11-02T02:15:01Z"}, "message": "flow.c (find_basic_blocks): If we delete the label for an exception handler...\n\n        * flow.c (find_basic_blocks): If we delete the label for an\n        exception handler, remove it from the EH label list and remove\n        the EH_BEGIN/EH_END notes for that EH region.\n\nFrom-SVN: r16265", "tree": {"sha": "2b13cc1ef8ffbb88154a5bf225b8d4efa7add794", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2b13cc1ef8ffbb88154a5bf225b8d4efa7add794"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f8671389c5c97971bc7b20babdf44c0cacf3f5a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8671389c5c97971bc7b20babdf44c0cacf3f5a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8671389c5c97971bc7b20babdf44c0cacf3f5a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8671389c5c97971bc7b20babdf44c0cacf3f5a0/comments", "author": null, "committer": null, "parents": [{"sha": "e67edc156e9b88eace27951f83420acdeecbc18e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e67edc156e9b88eace27951f83420acdeecbc18e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e67edc156e9b88eace27951f83420acdeecbc18e"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "566eeebc6fc1fbc3ec954531b67b3d05d1cbaf7f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8671389c5c97971bc7b20babdf44c0cacf3f5a0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8671389c5c97971bc7b20babdf44c0cacf3f5a0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f8671389c5c97971bc7b20babdf44c0cacf3f5a0", "patch": "@@ -1,3 +1,9 @@\n+Sat Nov  1 19:15:28 1997  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* flow.c (find_basic_blocks): If we delete the label for an\n+\texception handler, remove it from the EH label list and remove\n+\tthe EH_BEGIN/EH_END notes for that EH region.\n+\n Sat Nov  1 16:44:49 1997  Jason Merrill  (jason@cygnus.com)\n \n \t* flow.c (find_basic_blocks): Generate correct flow control"}, {"sha": "e2c548db2fa50f8f1fed6b1456043ff37da52fdc", "filename": "gcc/flow.c", "status": "modified", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8671389c5c97971bc7b20babdf44c0cacf3f5a0/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8671389c5c97971bc7b20babdf44c0cacf3f5a0/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=f8671389c5c97971bc7b20babdf44c0cacf3f5a0", "patch": "@@ -674,6 +674,51 @@ find_basic_blocks (f, nonlocal_label_list)\n \t\t/* Turn the head into a deleted insn note.  */\n \t\tif (GET_CODE (insn) == BARRIER)\n \t\t  abort ();\n+\n+\t\t/* If the head of this block is a CODE_LABEL, then it might\n+\t\t   be the label for an exception handler which can't be\n+\t\t   reached.\n+\n+\t\t   We need to remove the label from the exception_handler_label\n+\t\t   list and remove the associated NOTE_EH_REGION_BEG and\n+\t\t   NOTE_EH_REGION_END notes.  */\n+\t\tif (GET_CODE (insn) == CODE_LABEL)\n+\t\t  {\n+\t\t    rtx x, *prev = &exception_handler_labels;\n+\n+\t\t    for (x = exception_handler_labels; x; x = XEXP (x, 1))\n+\t\t      {\n+\t\t\tif (XEXP (x, 0) == insn)\n+\t\t\t  {\n+\t\t\t    /* Found a match, splice this label out of the\n+\t\t\t       EH label list.  */\n+\t\t\t    *prev = XEXP (x, 1);\n+\t\t\t    XEXP (x, 1) = NULL_RTX;\n+\t\t\t    XEXP (x, 0) = NULL_RTX;\n+\n+\t\t\t    /* Now we have to find the EH_BEG and EH_END notes\n+\t\t\t       associated with this label and remove them.  */\n+\n+\t\t\t    for (x = get_insns (); x; x = NEXT_INSN (x))\n+\t\t\t      {\n+\t\t\t\tif (GET_CODE (x) == NOTE\n+\t\t\t\t    && ((NOTE_LINE_NUMBER (x)\n+\t\t\t\t\t == NOTE_INSN_EH_REGION_BEG)\n+\t\t\t\t\t|| (NOTE_LINE_NUMBER (x)\n+\t\t\t\t\t    == NOTE_INSN_EH_REGION_END))\n+\t\t\t\t    && (NOTE_BLOCK_NUMBER (x)\n+\t\t\t\t\t== CODE_LABEL_NUMBER (insn)))\n+\t\t\t\t  {\n+\t\t\t\t    NOTE_LINE_NUMBER (x) = NOTE_INSN_DELETED;\n+\t\t\t\t    NOTE_SOURCE_FILE (x) = 0;\n+\t\t\t\t  }\n+\t\t\t      }\n+\t\t\t    break;\n+\t\t\t  }\n+\t\t\tprev = &XEXP (x, 1);\n+\t\t      }\n+\t\t  }\n+\t\t \n \t\tPUT_CODE (insn, NOTE);\n \t\tNOTE_LINE_NUMBER (insn) = NOTE_INSN_DELETED;\n \t\tNOTE_SOURCE_FILE (insn) = 0;"}]}