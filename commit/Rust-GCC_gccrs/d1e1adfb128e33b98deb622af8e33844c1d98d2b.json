{"sha": "d1e1adfb128e33b98deb622af8e33844c1d98d2b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFlMWFkZmIxMjhlMzNiOThkZWI2MjJhZjhlMzM4NDRjMWQ5OGQyYg==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1995-02-13T20:02:34Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1995-02-13T20:02:34Z"}, "message": "(warn_if_unused_value): Don't warn about automatic reference dereference.\n\nFrom-SVN: r8932", "tree": {"sha": "dea7714ef29ec93f39774a6c5aebcba7d3c8828c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dea7714ef29ec93f39774a6c5aebcba7d3c8828c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1e1adfb128e33b98deb622af8e33844c1d98d2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1e1adfb128e33b98deb622af8e33844c1d98d2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1e1adfb128e33b98deb622af8e33844c1d98d2b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1e1adfb128e33b98deb622af8e33844c1d98d2b/comments", "author": null, "committer": null, "parents": [{"sha": "bd2e6d530f25fc84322aafe4eb76e5cbccf14333", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd2e6d530f25fc84322aafe4eb76e5cbccf14333", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd2e6d530f25fc84322aafe4eb76e5cbccf14333"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "b4e503a2eb5234b6489ca29e901d672a5eab534b", "filename": "gcc/stmt.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1e1adfb128e33b98deb622af8e33844c1d98d2b/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1e1adfb128e33b98deb622af8e33844c1d98d2b/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=d1e1adfb128e33b98deb622af8e33844c1d98d2b", "patch": "@@ -1746,14 +1746,22 @@ warn_if_unused_value (exp)\n \tif (TREE_CODE (tem) == MODIFY_EXPR || TREE_CODE (tem) == INIT_EXPR)\n \t  return 0;\n       }\n-      /* ... fall through ... */\n+      goto warn;\n \n+    case INDIRECT_REF:\n+      /* Don't warn about automatic dereferencing of references, since\n+\t the user cannot control it.  */\n+      if (TREE_CODE (TREE_TYPE (TREE_OPERAND (exp, 0))) == REFERENCE_TYPE)\n+\treturn warn_if_unused_value (TREE_OPERAND (exp, 0));\n+      /* ... fall through ... */\n+      \n     default:\n       /* Referencing a volatile value is a side effect, so don't warn.  */\n       if ((TREE_CODE_CLASS (TREE_CODE (exp)) == 'd'\n \t   || TREE_CODE_CLASS (TREE_CODE (exp)) == 'r')\n \t  && TREE_THIS_VOLATILE (exp))\n \treturn 0;\n+    warn:\n       warning_with_file_and_line (emit_filename, emit_lineno,\n \t\t\t\t  \"value computed is not used\");\n       return 1;"}]}