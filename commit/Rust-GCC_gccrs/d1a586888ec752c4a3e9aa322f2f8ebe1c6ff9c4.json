{"sha": "d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFhNTg2ODg4ZWM3NTJjNGEzZTlhYTMyMmYyZjhlYmUxYzZmZjljNA==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.co.uk", "date": "2002-06-28T06:26:54Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2002-06-28T06:26:54Z"}, "message": "re PR preprocessor/7138 (gcc-3.2 failed to compile kernel)\n\n\tPR preprocessor/7138\n\t* cpplib.c (_cpp_handle_directive): Do traditional\n\tpreparation after setting state.angled_headers.\n\t* cpptrad.c (scan_out_logical_line): Fix potential\n\tquote bug.\n\nFrom-SVN: r55055", "tree": {"sha": "a7a80d0a2c536203d919b2a5eb3328aa0e029f54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7a80d0a2c536203d919b2a5eb3328aa0e029f54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4/comments", "author": {"login": "neilb-xx", "id": 160762, "node_id": "MDQ6VXNlcjE2MDc2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/160762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neilb-xx", "html_url": "https://github.com/neilb-xx", "followers_url": "https://api.github.com/users/neilb-xx/followers", "following_url": "https://api.github.com/users/neilb-xx/following{/other_user}", "gists_url": "https://api.github.com/users/neilb-xx/gists{/gist_id}", "starred_url": "https://api.github.com/users/neilb-xx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neilb-xx/subscriptions", "organizations_url": "https://api.github.com/users/neilb-xx/orgs", "repos_url": "https://api.github.com/users/neilb-xx/repos", "events_url": "https://api.github.com/users/neilb-xx/events{/privacy}", "received_events_url": "https://api.github.com/users/neilb-xx/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "55c1c60d4fb961c1e895d53203b23c68f9744eb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55c1c60d4fb961c1e895d53203b23c68f9744eb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55c1c60d4fb961c1e895d53203b23c68f9744eb9"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "42ac032fac0c6156b03d0b199594a769f258068e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4", "patch": "@@ -1,3 +1,11 @@\n+2002-06-28  Neil Booth  <neil@daikokuya.co.uk>\n+\n+\tPR preprocessor/7138\n+\t* cpplib.c (_cpp_handle_directive): Do traditional\n+\tpreparation after setting state.angled_headers.\n+\t* cpptrad.c (scan_out_logical_line): Fix potential\n+\tquote bug.\n+\n 2002-06-27  Aldy Hernandez  <aldyh@redhat.com>\n \n         * config/rs6000/rs6000.c (rs6000_override_options): Move"}, {"sha": "f2d33a89e48c17f37318861e38c42229f4674f98", "filename": "gcc/cpplib.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4", "patch": "@@ -388,10 +388,6 @@ _cpp_handle_directive (pfile, indented)\n \t\t   \"style of line directive is a GCC extension\");\n     }\n \n-  pfile->directive = dir;\n-  if (CPP_OPTION (pfile, traditional))\n-    prepare_directive_trad (pfile);\n-\n   if (dir)\n     {\n       /* If we have a directive that is not an opening conditional,\n@@ -442,6 +438,10 @@ _cpp_handle_directive (pfile, indented)\n \t\t   cpp_token_as_text (pfile, dname));\n     }\n \n+  pfile->directive = dir;\n+  if (CPP_OPTION (pfile, traditional))\n+    prepare_directive_trad (pfile);\n+\n   if (dir)\n     {\n       /* If we are processing a `#define' directive and we have been"}, {"sha": "a72237b87b86c1d55902456a74a4df394e96e692", "filename": "gcc/cpptrad.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4/gcc%2Fcpptrad.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4/gcc%2Fcpptrad.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpptrad.c?ref=d1a586888ec752c4a3e9aa322f2f8ebe1c6ff9c4", "patch": "@@ -435,12 +435,13 @@ scan_out_logical_line (pfile, macro)\n   const uchar *cur;\n   uchar *out;\n   struct fun_macro fmacro;\n-  unsigned int c, paren_depth = 0, quote = 0;\n+  unsigned int c, paren_depth = 0, quote;\n   enum ls lex_state = ls_none;\n \n   fmacro.buff = NULL;\n \n  start_logical_line:\n+  quote = 0;\n   CUR (pfile->context) = pfile->buffer->cur;\n   RLIMIT (pfile->context) = pfile->buffer->rlimit;\n   pfile->out.cur = pfile->out.base;\n@@ -502,7 +503,7 @@ scan_out_logical_line (pfile, macro)\n \t    quote = '>';\n \t  break;\n \tcase '>':\n-\t  if (pfile->state.angled_headers && c == quote)\n+\t  if (c == quote)\n \t    {\n \t      pfile->state.angled_headers = false;\n \t      quote = 0;"}]}