{"sha": "ee4c708e37964f3d70176da58996305e90eded76", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWU0YzcwOGUzNzk2NGYzZDcwMTc2ZGE1ODk5NjMwNWU5MGVkZWQ3Ng==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2005-03-04T04:43:03Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2005-03-04T04:43:03Z"}, "message": "gcc.c (option_map): Add --coverage.\n\n\t* gcc.c (option_map): Add --coverage.\n\t(LINK_COMMAND_SPEC): Pass -lgcov for `coverage'.\n\t(cc1_options): Pass -fprofile-arcs -ftest-coverage for `coverage'.\n\t* config/darwin.h: Pass -lgcov for `coverage'.\n\t* doc/invoke.texi (Debugging Options): Document --coverage.\n\nFrom-SVN: r95878", "tree": {"sha": "0ae9adc5763c0f414c1e7844ef1f48831d53a205", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ae9adc5763c0f414c1e7844ef1f48831d53a205"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee4c708e37964f3d70176da58996305e90eded76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee4c708e37964f3d70176da58996305e90eded76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee4c708e37964f3d70176da58996305e90eded76", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee4c708e37964f3d70176da58996305e90eded76/comments", "author": null, "committer": null, "parents": [{"sha": "c7d1b4498649c78fd1b0746371dcd29e1645f7af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7d1b4498649c78fd1b0746371dcd29e1645f7af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7d1b4498649c78fd1b0746371dcd29e1645f7af"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "ce68c0e6c616c651db343f60ca945f3a613a0999", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee4c708e37964f3d70176da58996305e90eded76/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee4c708e37964f3d70176da58996305e90eded76/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee4c708e37964f3d70176da58996305e90eded76", "patch": "@@ -1,3 +1,11 @@\n+2005-03-04  Ben Elliston  <bje@au.ibm.com>\n+\n+\t* gcc.c (option_map): Add --coverage.\n+\t(LINK_COMMAND_SPEC): Pass -lgcov for `coverage'.\n+\t(cc1_options): Pass -fprofile-arcs -ftest-coverage for `coverage'.\n+\t* config/darwin.h: Pass -lgcov for `coverage'.\n+\t* doc/invoke.texi (Debugging Options): Document --coverage.\n+\n 2005-03-04  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* gcse.c (bypass_block): Use find_edge wherever possible."}, {"sha": "937b4977fcdbffde3c9552cbba64d7c578f37588", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee4c708e37964f3d70176da58996305e90eded76/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee4c708e37964f3d70176da58996305e90eded76/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=ee4c708e37964f3d70176da58996305e90eded76", "patch": "@@ -226,7 +226,7 @@ extern const char *darwin_fix_and_continue_switch;\n     %{!Zdynamiclib:%{A} %{e*} %{m} %{N} %{n} %{r} %{u*} %{x} %{z}} \\\n     %{@:-o %f%u.out}%{!@:%{o*}%{!o:-o a.out}} \\\n     %{!Zdynamiclib:%{!A:%{!nostdlib:%{!nostartfiles:%S}}}} \\\n-    %{L*} %(link_libgcc) %o %{fprofile-arcs|fprofile-generate:-lgcov} \\\n+    %{L*} %(link_libgcc) %o %{fprofile-arcs|fprofile-generate|coverage:-lgcov} \\\n     %{!nostdlib:%{!nodefaultlibs:%G %L}} \\\n     %{!A:%{!nostdlib:%{!nostartfiles:%E}}} %{T*} %{F*} }}}}}}}}\"\n "}, {"sha": "6dcff820158e9d85d96e5e0559b395b650e54d65", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee4c708e37964f3d70176da58996305e90eded76/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee4c708e37964f3d70176da58996305e90eded76/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=ee4c708e37964f3d70176da58996305e90eded76", "patch": "@@ -3345,6 +3345,15 @@ the basename of the source file.  In both cases any suffix is removed\n (e.g.@: @file{foo.gcda} for input file @file{dir/foo.c}, or\n @file{dir/foo.gcda} for output file specified as @option{-o dir/foo.o}).\n \n+@cindex @command{gcov}\n+@item --coverage\n+@opindex coverage\n+\n+This option is used to compile and link code instrumented for coverage\n+analysis.  The option is a synonym for @option{-fprofile-arcs}\n+@option{-ftest-coverage} (when compiling) and @option{-lgcov} (when\n+linking).  See the documentation for those options for more details.\n+\n @itemize\n \n @item"}, {"sha": "eda3fa49f530bfdfe5624c6f62338c4385833cc3", "filename": "gcc/gcc.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee4c708e37964f3d70176da58996305e90eded76/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee4c708e37964f3d70176da58996305e90eded76/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=ee4c708e37964f3d70176da58996305e90eded76", "patch": "@@ -700,7 +700,7 @@ proper position among the other output files.  */\n     %(linker) %l \" LINK_PIE_SPEC \"%X %{o*} %{A} %{d} %{e*} %{m} %{N} %{n} %{r}\\\n     %{s} %{t} %{u*} %{x} %{z} %{Z} %{!A:%{!nostdlib:%{!nostartfiles:%S}}}\\\n     %{static:} %{L*} %(mfwrap) %(link_libgcc) %o %(mflib)\\\n-    %{fprofile-arcs|fprofile-generate:-lgcov}\\\n+    %{fprofile-arcs|fprofile-generate|coverage:-lgcov}\\\n     %{!nostdlib:%{!nodefaultlibs:%(link_gcc_c_sequence)}}\\\n     %{!A:%{!nostdlib:%{!nostartfiles:%E}}} %{T*} }}}}}}\"\n #endif\n@@ -796,7 +796,8 @@ static const char *cc1_options =\n  %{--target-help:--target-help}\\\n  %{!fsyntax-only:%{S:%W{o*}%{!o*:-o %b.s}}}\\\n  %{fsyntax-only:-o %j} %{-param*}\\\n- %{fmudflap|fmudflapth:-fno-builtin -fno-merge-constants}\";\n+ %{fmudflap|fmudflapth:-fno-builtin -fno-merge-constants}\\\n+ %{coverage:-fprofile-arcs -ftest-coverage}\";\n \n static const char *asm_options =\n \"%a %Y %{c:%W{o*}%{!o*:-o %w%b%O}}%{!c:-o %d%w%u%O}\";\n@@ -1065,6 +1066,7 @@ static const struct option_map option_map[] =\n    {\"--for-assembler\", \"-Wa\", \"a\"},\n    {\"--for-linker\", \"-Xlinker\", \"a\"},\n    {\"--force-link\", \"-u\", \"a\"},\n+   {\"--coverage\", \"-coverage\", 0},\n    {\"--imacros\", \"-imacros\", \"a\"},\n    {\"--include\", \"-include\", \"a\"},\n    {\"--include-barrier\", \"-I-\", 0},"}]}