{"sha": "d2103f699c01e1b506fa894e8f8c99cf52d95a58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDIxMDNmNjk5YzAxZTFiNTA2ZmE4OTRlOGY4Yzk5Y2Y1MmQ5NWE1OA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-06-10T03:02:21Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-06-10T03:02:21Z"}, "message": "Revert previous patch\n\nFrom-SVN: r34482", "tree": {"sha": "a0bcdfb150422be9163d15f232aa17dc922ff927", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0bcdfb150422be9163d15f232aa17dc922ff927"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2103f699c01e1b506fa894e8f8c99cf52d95a58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2103f699c01e1b506fa894e8f8c99cf52d95a58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2103f699c01e1b506fa894e8f8c99cf52d95a58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2103f699c01e1b506fa894e8f8c99cf52d95a58/comments", "author": null, "committer": null, "parents": [{"sha": "27985b669a096e686ab206be177d7e3df114e207", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27985b669a096e686ab206be177d7e3df114e207", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27985b669a096e686ab206be177d7e3df114e207"}], "stats": {"total": 43, "additions": 32, "deletions": 11}, "files": [{"sha": "b7b30ea0e248b699be3dfbf0f2e762d075c7880c", "filename": "libio/ChangeLog", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2103f699c01e1b506fa894e8f8c99cf52d95a58/libio%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2103f699c01e1b506fa894e8f8c99cf52d95a58/libio%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2FChangeLog?ref=d2103f699c01e1b506fa894e8f8c99cf52d95a58", "patch": "@@ -1,8 +1,3 @@\n-2000-06-08  Mark Mitchell  <mark@codesourcery.com>\n-\n-\t* libioP.h: Remove old ABI mangling code.\n-\t* stdstrbufs.cc: Likewise.\n-\n 2000-06-04  Mark Mitchell  <mark@codesourcery.com>\n \n \t* libioP.h: Handle new ABI mangling."}, {"sha": "171d9b9c1dacfad3b8914adaa68fe808025238dc", "filename": "libio/libioP.h", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2103f699c01e1b506fa894e8f8c99cf52d95a58/libio%2FlibioP.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2103f699c01e1b506fa894e8f8c99cf52d95a58/libio%2FlibioP.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2FlibioP.h?ref=d2103f699c01e1b506fa894e8f8c99cf52d95a58", "patch": "@@ -1,4 +1,4 @@\n-/* Copyright (C) 1993, 1997, 2000 Free Software Foundation, Inc.\n+/* Copyright (C) 1993, 1997 Free Software Foundation, Inc.\n    This file is part of the GNU IO Library.\n \n    This library is free software; you can redistribute it and/or\n@@ -593,8 +593,18 @@ extern int _IO_vscanf __P ((const char *, _IO_va_list));\n /* VTABLE_LABEL defines NAME as of the CLASS class.\n    CNLENGTH is strlen(#CLASS).  */\n #ifdef __GNUC__\n-# define VTABLE_LABEL(NAME, CLASS, CNLENGTH) \\\n-  extern char NAME[] asm (\"_ZTV\" #CNLENGTH #CLASS );\n+# if (!defined(__GXX_ABI_VERSION) || __GXX_ABI_VERSION < 100)\n+#  if _G_VTABLE_LABEL_HAS_LENGTH\n+#   define VTABLE_LABEL(NAME, CLASS, CNLENGTH) \\\n+  extern char NAME[] asm (_G_VTABLE_LABEL_PREFIX #CNLENGTH #CLASS);\n+#  else\n+#   define VTABLE_LABEL(NAME, CLASS, CNLENGTH) \\\n+  extern char NAME[] asm (_G_VTABLE_LABEL_PREFIX #CLASS);\n+#  endif\n+# else\n+#  define VTABLE_LABEL(NAME, CLASS, CNLENGTH) \\\n+  extern char NAME[] asm (\"_ZN\" #CNLENGTH #CLASS \"TVE\");\n+# endif /* (!defined(__GXX_ABI_VERSION) || __GXX_ABI_VERSION < 100) */\n #endif /* __GNUC__ */\n \n #if !defined(builtinbuf_vtable) && defined(__cplusplus)"}, {"sha": "ee10cdc4d00905673e18779aff3c1a1d2252ad19", "filename": "libio/stdstrbufs.cc", "status": "modified", "additions": 19, "deletions": 3, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2103f699c01e1b506fa894e8f8c99cf52d95a58/libio%2Fstdstrbufs.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2103f699c01e1b506fa894e8f8c99cf52d95a58/libio%2Fstdstrbufs.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fstdstrbufs.cc?ref=d2103f699c01e1b506fa894e8f8c99cf52d95a58", "patch": "@@ -1,5 +1,5 @@\n /*\n-Copyright (C) 1994, 2000 Free Software Foundation\n+Copyright (C) 1994 Free Software Foundation\n \n This file is part of the GNU IO Library.  This library is free\n software; you can redistribute it and/or modify it under the\n@@ -35,7 +35,15 @@ the executable file might be covered by the GNU General Public License. */\n #if !defined(filebuf_vtable) && defined(__cplusplus)\n #ifdef __GNUC__\n extern char filebuf_vtable[]\n-  asm ( \"_ZTV7filebuf\" );\n+#if (!defined(__GXX_ABI_VERSION) || __GXX_ABI_VERSION < 100)\n+  asm (_G_VTABLE_LABEL_PREFIX\n+#if _G_VTABLE_LABEL_HAS_LENGTH\n+       \"7\"\n+#endif\n+       \"filebuf\");\n+#else\n+  asm ( \"_ZN7filebufTVE\" );\n+#endif /* (!defined(__GXX_ABI_VERSION) || __GXX_ABI_VERSION < 100) */\n #else /* !__GNUC__ */\n #if _G_VTABLE_LABEL_HAS_LENGTH\n #define filebuf_vtable _G_VTABLE_LABEL_PREFIX_ID##7filebuf\n@@ -83,7 +91,15 @@ struct _IO_fake_stdiobuf {\n #ifndef stdiobuf_vtable\n #ifdef __GNUC__\n extern struct _IO_jump_t stdiobuf_vtable\n-  asm ( \"_ZTV15stdiobuf_vtable\" );\n+#if (!defined(__GXX_ABI_VERSION) || __GXX_ABI_VERSION < 100)\n+  asm (_G_VTABLE_LABEL_PREFIX\n+#if _G_VTABLE_LABEL_HAS_LENGTH\n+       \"8\"\n+#endif\n+       \"stdiobuf\");\n+#else\n+  asm ( \"_ZN15stdiobuf_vtableTVE\" );\n+#endif /* (!defined(__GXX_ABI_VERSION) || __GXX_ABI_VERSION < 100) */\n #else /* !__GNUC__ */\n #if _G_VTABLE_LABEL_HAS_LENGTH\n #define stdiobuf_vtable _G_VTABLE_LABEL_PREFIX_ID##8stdiobuf"}]}