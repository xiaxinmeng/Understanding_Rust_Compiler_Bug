{"sha": "c3a630ce3e0b06654ec2cbae23182e2928e03143", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNhNjMwY2UzZTBiMDY2NTRlYzJjYmFlMjMxODJlMjkyOGUwMzE0Mw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2015-05-20T16:09:19Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2015-05-20T16:09:19Z"}, "message": "-Wmisleading-indentation: Increase test coverage\n\ngcc/testsuite/ChangeLog:\n\t* c-c++-common/Wmisleading-indentation.c (fn_32): New.\n\t(fn_33_k_and_r_style): New.\n\t(fn_33_stroustrup_style): New.\n\t(fn_33_allman_style): New.\n\t(fn_33_whitesmiths_style): New.\n\t(fn_33_horstmann_style): New.\n\t(fn_33_ratliff_banner_style): New.\n\t(fn_33_lisp_style): New.\n\t(fn_34_indent_dash_gnu): New.\n\t(fn_34_indent_dash_kr): New.\n\t(fn_34_indent_dash_orig): New.\n\t(fn_34_indent_linux_style): New.\n\nFrom-SVN: r223447", "tree": {"sha": "0859863a5483a4f50f4da9f86344e9e8c073852a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0859863a5483a4f50f4da9f86344e9e8c073852a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3a630ce3e0b06654ec2cbae23182e2928e03143", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3a630ce3e0b06654ec2cbae23182e2928e03143", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3a630ce3e0b06654ec2cbae23182e2928e03143", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3a630ce3e0b06654ec2cbae23182e2928e03143/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e4129dd0c9ec71767eeae6ddb3f65f697c6d8140", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4129dd0c9ec71767eeae6ddb3f65f697c6d8140", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4129dd0c9ec71767eeae6ddb3f65f697c6d8140"}], "stats": {"total": 239, "additions": 239, "deletions": 0}, "files": [{"sha": "28cc03c04d5177692a34b9ab78799ceec35b1fc9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3a630ce3e0b06654ec2cbae23182e2928e03143/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3a630ce3e0b06654ec2cbae23182e2928e03143/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c3a630ce3e0b06654ec2cbae23182e2928e03143", "patch": "@@ -1,3 +1,18 @@\n+2015-05-20  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* c-c++-common/Wmisleading-indentation.c (fn_32): New.\n+\t(fn_33_k_and_r_style): New.\n+\t(fn_33_stroustrup_style): New.\n+\t(fn_33_allman_style): New.\n+\t(fn_33_whitesmiths_style): New.\n+\t(fn_33_horstmann_style): New.\n+\t(fn_33_ratliff_banner_style): New.\n+\t(fn_33_lisp_style): New.\n+\t(fn_34_indent_dash_gnu): New.\n+\t(fn_34_indent_dash_kr): New.\n+\t(fn_34_indent_dash_orig): New.\n+\t(fn_34_indent_linux_style): New.\n+\n 2015-05-20  Andre Vehreschild  <vehre@gmx.de>\n \n \tPR fortran/65548"}, {"sha": "6363d71fe7f71465ad351404b781aae7cf6697ae", "filename": "gcc/testsuite/c-c++-common/Wmisleading-indentation.c", "status": "modified", "additions": 224, "deletions": 0, "changes": 224, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3a630ce3e0b06654ec2cbae23182e2928e03143/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWmisleading-indentation.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3a630ce3e0b06654ec2cbae23182e2928e03143/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWmisleading-indentation.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWmisleading-indentation.c?ref=c3a630ce3e0b06654ec2cbae23182e2928e03143", "patch": "@@ -429,3 +429,227 @@ void fn_31 (void)\n   else\n     foo (3);\n }\n+\n+/* Ensure that we can disable the warning.  */\n+int\n+fn_32 (int flag)\n+{\n+  int x = 4, y = 5;\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wmisleading-indentation\"\n+  if (flag)\n+    x = 3;\n+    y = 2;\n+#pragma GCC diagnostic pop\n+\n+  return x * y;\n+}\n+\n+/* Verify that a variety of different indentation styles are supported\n+   without leading to warnings.  */\n+void\n+fn_33_k_and_r_style (void)\n+{\n+  int i;\n+  for (i = 0; i < 10; i++) {\n+    if (flagB) {\n+      foo(0);\n+      foo(1);\n+    } else {\n+      foo(2);\n+      foo(3);\n+    }\n+    foo(4);\n+  }\n+}\n+\n+void\n+fn_33_stroustrup_style (void)\n+{\n+  int i;\n+  for (i = 0; i < 10; i++) {\n+    if (flagA) {\n+      foo(0);\n+      foo(1);\n+    }\n+    else {\n+      foo(2);\n+      foo(3);\n+    }\n+    foo(4);\n+  }\n+}\n+\n+void\n+fn_33_allman_style (void)\n+{\n+  int i;\n+  for (i = 0; i < 10; i++)\n+  {\n+    if (flagA)\n+    {\n+      foo(0);\n+      foo(1);\n+    }\n+    else\n+    {\n+      foo(2);\n+      foo(3);\n+    }\n+    foo(4);\n+  }\n+}\n+\n+void\n+fn_33_whitesmiths_style (void)\n+{\n+    int i;\n+    for (i = 0; i < 10; i++)\n+        {\n+        if (flagA)\n+            {\n+            foo(0);\n+            foo(1);\n+            }\n+        else\n+            {\n+            foo(2);\n+            foo(3);\n+            }\n+        foo(4);\n+        }\n+}\n+\n+void\n+fn_33_horstmann_style (void)\n+{\n+    int i;\n+    for (i = 0; i < 10; i++)\n+    {   if (flagA)\n+        {   foo(0);\n+            foo(1);\n+        }\n+        else\n+        {   foo(2);\n+            foo(3);\n+        }\n+        foo(4);\n+    }\n+}\n+\n+void\n+fn_33_ratliff_banner_style (void)\n+{\n+    int i;\n+    for (i = 0; i < 10; i++) {\n+       if (flagA) {\n+           foo(0);\n+           foo(1);\n+           }\n+       else {\n+            foo(2);\n+            foo(3);\n+            }\n+       foo(4);\n+       }\n+}\n+\n+void\n+fn_33_lisp_style (void)\n+{\n+  int i;\n+  for (i = 0; i < 10; i++) {\n+    if (flagA) {\n+        foo(0);\n+        foo(1); }\n+    else {\n+        foo(2);\n+        foo(3); }\n+    foo(4); }\n+}\n+\n+/* A function run through GNU \"indent\" with various options.\n+   None of these should lead to warnings.  */\n+\n+/* \"indent -gnu\".  */\n+void\n+fn_34_indent_dash_gnu (void)\n+{\n+  int i;\n+  while (flagA)\n+    for (i = 0; i < 10; i++)\n+      {\n+\tif (flagB)\n+\t  {\n+\t    foo (0);\n+\t    foo (1);\n+\t  }\n+\telse\n+\t  {\n+\t    foo (2);\n+\t    foo (3);\n+\t  }\n+\tfoo (4);\n+      }\n+  foo (5);\n+}\n+\n+/* \"indent -kr\".  */\n+void fn_34_indent_dash_kr(void)\n+{\n+    int i;\n+    while (flagA)\n+\tfor (i = 0; i < 10; i++) {\n+\t    if (flagB) {\n+\t\tfoo(0);\n+\t\tfoo(1);\n+\t    } else {\n+\t\tfoo(2);\n+\t\tfoo(3);\n+\t    }\n+\t    foo(4);\n+\t}\n+    foo(5);\n+}\n+\n+/* \"indent -orig\".  */\n+void\n+fn_34_indent_dash_orig(void)\n+{\n+    int             i;\n+    while (flagA)\n+\tfor (i = 0; i < 10; i++) {\n+\t    if (flagB) {\n+\t\tfoo(0);\n+\t\tfoo(1);\n+\t    } else {\n+\t\tfoo(2);\n+\t\tfoo(3);\n+\t    }\n+\t    foo(4);\n+\t}\n+    foo(5);\n+}\n+\n+/* Linux style:\n+   \"indent \\\n+      -nbad -bap -nbc -bbo -hnl -br -brs -c33 -cd33 -ncdb -ce -ci4  \\\n+      -cli0 -d0 -di1 -nfc1 -i8 -ip0 -l80 -lp -npcs -nprs -npsl -sai \\\n+      -saf -saw -ncs -nsc -sob -nfca -cp33 -ss -ts8 -il1\".  */\n+\n+void fn_34_indent_linux_style(void)\n+{\n+\tint i;\n+\twhile (flagA)\n+\t\tfor (i = 0; i < 10; i++) {\n+\t\t\tif (flagB) {\n+\t\t\t\tfoo(0);\n+\t\t\t\tfoo(1);\n+\t\t\t} else {\n+\t\t\t\tfoo(2);\n+\t\t\t\tfoo(3);\n+\t\t\t}\n+\t\t\tfoo(4);\n+\t\t}\n+\tfoo(5);\n+}"}]}