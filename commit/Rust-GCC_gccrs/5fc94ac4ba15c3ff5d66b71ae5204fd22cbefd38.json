{"sha": "5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWZjOTRhYzRiYTE1YzNmZjVkNjZiNzFhZTUyMDRmZDIyY2JlZmQzOA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-12-28T05:26:23Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-12-28T05:26:23Z"}, "message": "re PR target/17406 (ICE dwarf2out_frame_debug_expr, at dwarf2out.c:1692)\n\n        PR target/17406\n        * config/i386/i386.c (ix86_expand_prologue): Add REG_FRAME_RELATED_EXPR\n        note for allocate_stack_worker insn.\n\nFrom-SVN: r92662", "tree": {"sha": "d0d2099136724346b286c78685dddeb838bd7b1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0d2099136724346b286c78685dddeb838bd7b1e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38/comments", "author": null, "committer": null, "parents": [{"sha": "445cf5eb0d91d2aa401ff3907fcf993a44e4c8b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/445cf5eb0d91d2aa401ff3907fcf993a44e4c8b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/445cf5eb0d91d2aa401ff3907fcf993a44e4c8b4"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "9f1531ed77c18c0f1071f34c912346d72b08f7ca", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38", "patch": "@@ -1,3 +1,9 @@\n+2004-12-27  Richard Henderson  <rth@redhat.com>\n+\n+\tPR target/17406\n+\t* config/i386/i386.c (ix86_expand_prologue): Add REG_FRAME_RELATED_EXPR\n+\tnote for allocate_stack_worker insn.\n+\n 2004-12-27  Jason Merrill  <jason@redhat.com>\n \n \t* doc/tm.texi (TARGET_RELAXED_ORDERING): Document."}, {"sha": "6e65969cdb66ec81af997207b335b09e93c2c49d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=5fc94ac4ba15c3ff5d66b71ae5204fd22cbefd38", "patch": "@@ -4331,6 +4331,7 @@ ix86_expand_prologue (void)\n       /* Only valid for Win32.  */\n       rtx eax = gen_rtx_REG (SImode, 0);\n       bool eax_live = ix86_eax_live_at_start_p ();\n+      rtx t;\n \n       if (TARGET_64BIT)\n         abort ();\n@@ -4341,15 +4342,17 @@ ix86_expand_prologue (void)\n \t  allocate -= 4;\n \t}\n \n-      insn = emit_move_insn (eax, GEN_INT (allocate));\n-      RTX_FRAME_RELATED_P (insn) = 1;\n+      emit_move_insn (eax, GEN_INT (allocate));\n \n       insn = emit_insn (gen_allocate_stack_worker (eax));\n       RTX_FRAME_RELATED_P (insn) = 1;\n+      t = gen_rtx_PLUS (Pmode, stack_pointer_rtx, GEN_INT (-allocate));\n+      t = gen_rtx_SET (VOIDmode, stack_pointer_rtx, t);\n+      REG_NOTES (insn) = gen_rtx_EXPR_LIST (REG_FRAME_RELATED_EXPR,\n+\t\t\t\t\t    t, REG_NOTES (insn));\n \n       if (eax_live)\n \t{\n-\t  rtx t;\n \t  if (frame_pointer_needed)\n \t    t = plus_constant (hard_frame_pointer_rtx,\n \t\t\t       allocate"}]}