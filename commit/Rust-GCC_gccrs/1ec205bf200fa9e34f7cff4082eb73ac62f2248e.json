{"sha": "1ec205bf200fa9e34f7cff4082eb73ac62f2248e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWVjMjA1YmYyMDBmYTllMzRmN2NmZjQwODJlYjczYWM2MmYyMjQ4ZQ==", "commit": {"author": {"name": "Cary Coutant", "email": "ccoutant@google.com", "date": "2012-06-30T00:46:44Z"}, "committer": {"name": "Cary Coutant", "email": "ccoutant@gcc.gnu.org", "date": "2012-06-30T00:46:44Z"}, "message": "dwarf2out.c (add_pubname_string): Don't check for want_pubnames.\n\n2012-06-29   Cary Coutant  <ccoutant@google.com>\n\ngcc/\n\t* dwarf2out.c (add_pubname_string): Don't check for want_pubnames.\n\t(gen_subprogram_die): Don't add pubname if want_pubnames is false.\n\t(gen_variable_die): Likewise.\n\t(gen_namespace_die): Likewise.\n\nFrom-SVN: r189094", "tree": {"sha": "61baa07a0a529299cf08fd9d77045d9e0faf8553", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61baa07a0a529299cf08fd9d77045d9e0faf8553"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ec205bf200fa9e34f7cff4082eb73ac62f2248e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ec205bf200fa9e34f7cff4082eb73ac62f2248e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ec205bf200fa9e34f7cff4082eb73ac62f2248e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ec205bf200fa9e34f7cff4082eb73ac62f2248e/comments", "author": null, "committer": null, "parents": [{"sha": "9d006871a1a46fd222ba07596eb0a8e94fc3988e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d006871a1a46fd222ba07596eb0a8e94fc3988e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d006871a1a46fd222ba07596eb0a8e94fc3988e"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "a6f4b346938dbbe7e8c3a2e09ed900f93502a2f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec205bf200fa9e34f7cff4082eb73ac62f2248e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec205bf200fa9e34f7cff4082eb73ac62f2248e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1ec205bf200fa9e34f7cff4082eb73ac62f2248e", "patch": "@@ -1,3 +1,10 @@\n+2012-06-29   Cary Coutant  <ccoutant@google.com>\n+\n+\t* dwarf2out.c (add_pubname_string): Don't check for want_pubnames.\n+\t(gen_subprogram_die): Don't add pubname if want_pubnames is false.\n+\t(gen_variable_die): Likewise.\n+\t(gen_namespace_die): Likewise.\n+\n 2012-06-29  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* tree-eh.c (lower_try_finally_switch): Really put the location of the"}, {"sha": "08116b5c74ba4fb143af4e1d0feb7f73672346bf", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ec205bf200fa9e34f7cff4082eb73ac62f2248e/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ec205bf200fa9e34f7cff4082eb73ac62f2248e/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=1ec205bf200fa9e34f7cff4082eb73ac62f2248e", "patch": "@@ -8152,14 +8152,11 @@ dwarf2_name (tree decl, int scope)\n static void\n add_pubname_string (const char *str, dw_die_ref die)\n {\n-  if (want_pubnames ())\n-    {\n-      pubname_entry e;\n+  pubname_entry e;\n \n-      e.die = die;\n-      e.name = xstrdup (str);\n-      VEC_safe_push (pubname_entry, gc, pubname_table, &e);\n-    }\n+  e.die = die;\n+  e.name = xstrdup (str);\n+  VEC_safe_push (pubname_entry, gc, pubname_table, &e);\n }\n \n static void\n@@ -17146,7 +17143,8 @@ gen_subprogram_die (tree decl, dw_die_ref context_die)\n \t\t  add_AT_lbl_id (seg_die, DW_AT_high_pc,\n \t\t\t\t fde->dw_fde_second_end);\n \t\t  add_name_attribute (seg_die, name);\n-\t\t  add_pubname_string (name, seg_die);\n+\t\t  if (want_pubnames ())\n+\t\t    add_pubname_string (name, seg_die);\n \t\t}\n \t    }\n \t  else\n@@ -17571,7 +17569,8 @@ gen_variable_die (tree decl, tree origin, dw_die_ref context_die)\n \t    }\n           else if (DECL_EXTERNAL (decl))\n \t    add_AT_flag (com_die, DW_AT_declaration, 1);\n-\t  add_pubname_string (cnam, com_die); /* ??? needed? */\n+\t  if (want_pubnames ())\n+\t    add_pubname_string (cnam, com_die); /* ??? needed? */\n \t  com_die->decl_id = DECL_UID (com_decl);\n \t  slot = htab_find_slot (common_block_die_table, com_die, INSERT);\n \t  *slot = (void *) com_die;\n@@ -19197,7 +19196,8 @@ gen_namespace_die (tree decl, dw_die_ref context_die)\n       equate_decl_number_to_die (decl, namespace_die);\n     }\n   /* Bypass dwarf2_name's check for DECL_NAMELESS.  */\n-  add_pubname_string (lang_hooks.dwarf_name (decl, 1), namespace_die);\n+  if (want_pubnames ())\n+    add_pubname_string (lang_hooks.dwarf_name (decl, 1), namespace_die);\n }\n \n /* Generate Dwarf debug information for a decl described by DECL."}]}