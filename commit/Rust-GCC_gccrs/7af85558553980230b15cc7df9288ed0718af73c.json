{"sha": "7af85558553980230b15cc7df9288ed0718af73c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FmODU1NTg1NTM5ODAyMzBiMTVjYzdkZjkyODhlZDA3MThhZjczYw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-01-17T19:22:20Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-01-17T19:22:20Z"}, "message": "Runtime.java (loadLibraryInternal): Declare.\n\n\t* java/lang/Runtime.java (loadLibraryInternal): Declare.\n\t* java/lang/natClassLoader.cc (_Jv_FindClass): Removed dead copy.\n\t(_Jv_FindClassInCache): Likewise.\n\t(_Jv_FindClass): Don't conditionalize body on INTERPRETER.\n\t(findSystemClass): Try to load class from compiled module.\n\tInclude Runtime.h.\n\t* java/lang/natRuntime.cc (load): Use UTF-8 copy of filename.\n\t(loadLibrary): Likewise.\n\t(lt_preloaded_symbols): Define.\n\t(loadLibraryInternal): New method.\n\t* include/config.h.in: Rebuilt.\n\t* acconfig.h (USE_LTDL): Added.\n\t* Makefile.am (SUBDIRS): Added $(DIRLTDL).\n\t(INCLUDES): Added $(INCLTDL).b\n\t(libgcj_la_DEPENDENCIES): Added $(LIBLTDL).\n\t(libgcj_la_LIBADD): Likewise.\n\t* aclocal.m4, configure: Rebuilt.\n\t* configure.in: Added libltdl support.\n\nFrom-SVN: r31472", "tree": {"sha": "abbebe060c5e4dbbfb15413e91ce07c0ef855016", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/abbebe060c5e4dbbfb15413e91ce07c0ef855016"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7af85558553980230b15cc7df9288ed0718af73c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af85558553980230b15cc7df9288ed0718af73c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7af85558553980230b15cc7df9288ed0718af73c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af85558553980230b15cc7df9288ed0718af73c/comments", "author": null, "committer": null, "parents": [{"sha": "06f56737169a939227bfac13f099484ad09b3bf4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06f56737169a939227bfac13f099484ad09b3bf4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06f56737169a939227bfac13f099484ad09b3bf4"}], "stats": {"total": 1432, "additions": 535, "deletions": 897}, "files": [{"sha": "f145d6838a283f52932639b345a9703d844edf28", "filename": "libjava/ChangeLog", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -1,3 +1,24 @@\n+2000-01-17  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* java/lang/Runtime.java (loadLibraryInternal): Declare.\n+\t* java/lang/natClassLoader.cc (_Jv_FindClass): Removed dead copy.\n+\t(_Jv_FindClassInCache): Likewise.\n+\t(_Jv_FindClass): Don't conditionalize body on INTERPRETER.\n+\t(findSystemClass): Try to load class from compiled module.\n+\tInclude Runtime.h.\n+\t* java/lang/natRuntime.cc (load): Use UTF-8 copy of filename.\n+\t(loadLibrary): Likewise.\n+\t(lt_preloaded_symbols): Define.\n+\t(loadLibraryInternal): New method.\n+\t* include/config.h.in: Rebuilt.\n+\t* acconfig.h (USE_LTDL): Added.\n+\t* Makefile.am (SUBDIRS): Added $(DIRLTDL).\n+\t(INCLUDES): Added $(INCLTDL).b\n+\t(libgcj_la_DEPENDENCIES): Added $(LIBLTDL).\n+\t(libgcj_la_LIBADD): Likewise.\n+\t* aclocal.m4, configure: Rebuilt.\n+\t* configure.in: Added libltdl support.\n+\n 2000-01-15  Tom Tromey  <tromey@cygnus.com>\n \n \t* prims.cc (_Jv_PrimClass): Use `JV_STATE_NOTHING', not `0'."}, {"sha": "91d851e577c0daf80bca53dda1faf10ed1330ec2", "filename": "libjava/Makefile.am", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -3,9 +3,9 @@\n AUTOMAKE_OPTIONS = foreign no-installinfo\n \n if TESTSUBDIR\n-SUBDIRS = testsuite gcj include\n+SUBDIRS = $(DIRLTDL) testsuite gcj include\n else\n-SUBDIRS = gcj include\n+SUBDIRS = $(DIRLTDL) gcj include\n endif\n \n ## ################################################################\n@@ -90,7 +90,7 @@ JC1FLAGS = -g -L$(here) @LIBGCJ_JAVAFLAGS@\n LIBFFIINCS = -I$(top_srcdir)/../libffi/include -I../libffi/include\n \n INCLUDES = -I$(top_srcdir) -Iinclude -I$(top_srcdir)/include \\\n-\t$(GCINCS) $(THREADINCS) \\\n+\t$(GCINCS) $(THREADINCS) $(INCLTDL) \\\n \t$(EH_COMMON_INCLUDE) $(ZINCS) $(LIBFFIINCS)\n \n \n@@ -116,9 +116,9 @@ libgcj_la_SOURCES = prims.cc jni.cc exception.cc \\\n EXTRA_libgcj_la_SOURCES = boehm.cc nogc.cc posix-threads.cc no-threads.cc \\\n \t$(c_source_files) $(java_source_files) $(built_java_source_files)\n libgcj_la_DEPENDENCIES = libgcj.zip $(javao_files) $(nat_files) \\\n-\t$(c_files) $(GCOBJS) $(THREADOBJS)\n+\t$(c_files) $(GCOBJS) $(THREADOBJS) $(LIBLTDL)\n libgcj_la_LIBADD = $(javao_files) $(nat_files) $(c_files) $(GCOBJS) \\\n-\t$(THREADOBJS) $(libffi_files)\n+\t$(THREADOBJS) $(libffi_files) $(LIBLTDL)\n libgcj_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n ## The mysterious backslash is consumed by make.\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`"}, {"sha": "ee3087e2baa47b829e2b192e31e0225f4249af08", "filename": "libjava/Makefile.in", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -71,6 +71,7 @@ COMPPATH = @COMPPATH@\n CPP = @CPP@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n+DIRLTDL = @DIRLTDL@\n DIVIDESPEC = @DIVIDESPEC@\n DLLTOOL = @DLLTOOL@\n EXCEPTIONSPEC = @EXCEPTIONSPEC@\n@@ -81,15 +82,17 @@ GCINCS = @GCINCS@\n GCLIBS = @GCLIBS@\n GCOBJS = @GCOBJS@\n GCSPEC = @GCSPEC@\n-LD = @LD@\n+INCLTDL = @INCLTDL@\n LIBDATASTARTSPEC = @LIBDATASTARTSPEC@\n LIBGCJ_CFLAGS = @LIBGCJ_CFLAGS@\n LIBGCJ_CXXFLAGS = @LIBGCJ_CXXFLAGS@\n LIBGCJ_JAVAFLAGS = @LIBGCJ_JAVAFLAGS@\n+LIBLTDL = @LIBLTDL@\n LIBTOOL = @LIBTOOL@\n LN_S = @LN_S@\n MAINT = @MAINT@\n MAKEINFO = @MAKEINFO@\n+OBJDUMP = @OBJDUMP@\n PACKAGE = @PACKAGE@\n PERL = @PERL@\n RANLIB = @RANLIB@\n@@ -99,7 +102,6 @@ THREADINCS = @THREADINCS@\n THREADLIBS = @THREADLIBS@\n THREADOBJS = @THREADOBJS@\n THREADSPEC = @THREADSPEC@\n-USE_SYMBOL_UNDERSCORE = @USE_SYMBOL_UNDERSCORE@\n VERSION = @VERSION@\n ZDEPS = @ZDEPS@\n ZINCS = @ZINCS@\n@@ -110,9 +112,9 @@ libgcj_basedir = @libgcj_basedir@\n \n AUTOMAKE_OPTIONS = foreign no-installinfo\n @TESTSUBDIR_TRUE@SUBDIRS = \\\n-@TESTSUBDIR_TRUE@testsuite gcj include\n+@TESTSUBDIR_TRUE@$(DIRLTDL) testsuite gcj include\n @TESTSUBDIR_FALSE@SUBDIRS = \\\n-@TESTSUBDIR_FALSE@gcj include\n+@TESTSUBDIR_FALSE@$(DIRLTDL) gcj include\n @USE_LIBDIR_TRUE@toolexeclibdir = \\\n @USE_LIBDIR_TRUE@$(libdir)$(MULTISUBDIR)\n @USE_LIBDIR_FALSE@toolexeclibdir = \\\n@@ -171,7 +173,7 @@ JC1FLAGS = -g -L$(here) @LIBGCJ_JAVAFLAGS@\n LIBFFIINCS = -I$(top_srcdir)/../libffi/include -I../libffi/include\n \n INCLUDES = -I$(top_srcdir) -Iinclude -I$(top_srcdir)/include \\\n-\t$(GCINCS) $(THREADINCS) \\\n+\t$(GCINCS) $(THREADINCS) $(INCLTDL) \\\n \t$(EH_COMMON_INCLUDE) $(ZINCS) $(LIBFFIINCS)\n \n \n@@ -190,10 +192,10 @@ EXTRA_libgcj_la_SOURCES = boehm.cc nogc.cc posix-threads.cc no-threads.cc \\\n \t$(c_source_files) $(java_source_files) $(built_java_source_files)\n \n libgcj_la_DEPENDENCIES = libgcj.zip $(javao_files) $(nat_files) \\\n-\t$(c_files) $(GCOBJS) $(THREADOBJS)\n+\t$(c_files) $(GCOBJS) $(THREADOBJS) $(LIBLTDL)\n \n libgcj_la_LIBADD = $(javao_files) $(nat_files) $(c_files) $(GCOBJS) \\\n-\t$(THREADOBJS) $(libffi_files)\n+\t$(THREADOBJS) $(libffi_files) $(LIBLTDL)\n \n libgcj_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`\n@@ -730,7 +732,7 @@ DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)\n \n TAR = tar\n GZIP_ENV = --best\n-DIST_SUBDIRS =  testsuite gcj include gcj include\n+DIST_SUBDIRS =  @DIRLTDL@ testsuite gcj include @DIRLTDL@ gcj include\n DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n .deps/$(srcdir)/$(CONVERT_DIR)/make-trie.P .deps/boehm.P \\\n .deps/defineclass.P .deps/exception.P .deps/gij.P \\"}, {"sha": "0a9adad0ca904de1dcc2cd1bf7b84e33bd62655f", "filename": "libjava/acconfig.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Facconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Facconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Facconfig.h?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -125,3 +125,6 @@\n  \n /* Define if getuid() and friends are missing.  */\n #undef NO_GETUID\n+\n+/* Define if libltdl is in use.  */\n+#undef USE_LTDL"}, {"sha": "cd29637f287585bc022ceccc339ec1c67067838e", "filename": "libjava/aclocal.m4", "status": "modified", "additions": 78, "deletions": 273, "changes": 351, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Faclocal.m4?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -322,7 +322,7 @@ done<<>>dnl>>)\n changequote([,]))])\n \n \n-# serial 35 AC_PROG_LIBTOOL\n+# serial 40 AC_PROG_LIBTOOL\n AC_DEFUN(AC_PROG_LIBTOOL,\n [AC_REQUIRE([AC_LIBTOOL_SETUP])dnl\n \n@@ -331,10 +331,11 @@ AC_CACHE_SAVE\n \n # Actually configure libtool.  ac_aux_dir is where install-sh is found.\n CC=\"$CC\" CFLAGS=\"$CFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n-LD=\"$LD\" NM=\"$NM\" RANLIB=\"$RANLIB\" LN_S=\"$LN_S\" \\\n-DLLTOOL=\"$DLLTOOL\" AS=\"$AS\" \\\n+LD=\"$LD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" \\\n+DLLTOOL=\"$DLLTOOL\" AS=\"$AS\" OBJDUMP=\"$OBJDUMP\" \\\n ${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig --no-reexec \\\n-$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $host \\\n+$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $lt_target \\\n || AC_MSG_ERROR([libtool configure failed])\n \n # Reload cache, that may have been modified by ltconfig\n@@ -363,24 +364,33 @@ AC_REQUIRE([AC_PROG_RANLIB])dnl\n AC_REQUIRE([AC_PROG_CC])dnl\n AC_REQUIRE([AC_PROG_LD])dnl\n AC_REQUIRE([AC_PROG_NM])dnl\n-AC_REQUIRE([AC_SYS_NM_PARSE])dnl\n-AC_REQUIRE([AC_SYS_SYMBOL_UNDERSCORE])dnl\n AC_REQUIRE([AC_PROG_LN_S])dnl\n dnl\n \n+case \"$target\" in\n+NONE) lt_target=\"$host\" ;;\n+*) lt_target=\"$target\" ;;\n+esac\n+\n # Check for any special flags to pass to ltconfig.\n libtool_flags=\"--cache-file=$cache_file\"\n test \"$enable_shared\" = no && libtool_flags=\"$libtool_flags --disable-shared\"\n test \"$enable_static\" = no && libtool_flags=\"$libtool_flags --disable-static\"\n test \"$enable_fast_install\" = no && libtool_flags=\"$libtool_flags --disable-fast-install\"\n-test \"$lt_dlopen\" = yes && libtool_flags=\"$libtool_flags --enable-dlopen\"\n-test \"$silent\" = yes && libtool_flags=\"$libtool_flags --silent\"\n test \"$ac_cv_prog_gcc\" = yes && libtool_flags=\"$libtool_flags --with-gcc\"\n test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n+ifdef([AC_PROVIDE_AC_LIBTOOL_DLOPEN],\n+[libtool_flags=\"$libtool_flags --enable-dlopen\"])\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[libtool_flags=\"$libtool_flags --enable-win32-dll\"])\n+AC_ARG_ENABLE(libtool-lock,\n+  [  --disable-libtool-lock  avoid locking (might break parallel builds)])\n+test \"x$enable_libtool_lock\" = xno && libtool_flags=\"$libtool_flags --disable-lock\"\n+test x\"$silent\" = xyes && libtool_flags=\"$libtool_flags --silent\"\n \n # Some flags need to be propagated to the compiler or linker for good\n # libtool support.\n-case \"$host\" in\n+case \"$lt_target\" in\n *-*-irix6*)\n   # Find out which ABI we are using.\n   echo '[#]line __oline__ \"configure\"' > conftest.$ac_ext\n@@ -412,33 +422,28 @@ case \"$host\" in\n   fi\n   ;;\n \n-*-*-cygwin*)\n-  AC_SYS_LIBTOOL_CYGWIN\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[*-*-cygwin* | *-*-mingw*)\n+  AC_CHECK_TOOL(DLLTOOL, dlltool, false)\n+  AC_CHECK_TOOL(AS, as, false)\n+  AC_CHECK_TOOL(OBJDUMP, objdump, false)\n   ;;\n-\n+])\n esac\n-\n-# enable the --disable-libtool-lock switch\n-\n-AC_ARG_ENABLE(libtool-lock,\n-[  --disable-libtool-lock  force libtool not to do file locking],\n-need_locks=$enableval,\n-need_locks=yes)\n-\n-if test x\"$need_locks\" = xno; then\n-  libtool_flags=\"$libtool_flags --disable-lock\"\n-fi\n ])\n \n-# AC_LIBTOOL_DLOPEN - check for dlopen support\n-AC_DEFUN(AC_LIBTOOL_DLOPEN, [lt_dlopen=yes])\n+# AC_LIBTOOL_DLOPEN - enable checks for dlopen support\n+AC_DEFUN(AC_LIBTOOL_DLOPEN, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])])\n+\n+# AC_LIBTOOL_WIN32_DLL - declare package support for building win32 dll's\n+AC_DEFUN(AC_LIBTOOL_WIN32_DLL, [AC_BEFORE([$0], [AC_LIBTOOL_SETUP])])\n \n # AC_ENABLE_SHARED - implement the --enable-shared flag\n # Usage: AC_ENABLE_SHARED[(DEFAULT)]\n #   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n #   `yes'.\n-AC_DEFUN(AC_ENABLE_SHARED,\n-[define([AC_ENABLE_SHARED_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_DEFUN(AC_ENABLE_SHARED, [dnl\n+define([AC_ENABLE_SHARED_DEFAULT], ifelse($1, no, no, yes))dnl\n AC_ARG_ENABLE(shared,\n changequote(<<, >>)dnl\n <<  --enable-shared[=PKGS]  build shared libraries [default=>>AC_ENABLE_SHARED_DEFAULT],\n@@ -463,15 +468,15 @@ enable_shared=AC_ENABLE_SHARED_DEFAULT)dnl\n ])\n \n # AC_DISABLE_SHARED - set the default shared flag to --disable-shared\n-AC_DEFUN(AC_DISABLE_SHARED,\n-[AC_ENABLE_SHARED(no)])\n+AC_DEFUN(AC_DISABLE_SHARED, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_SHARED(no)])\n \n # AC_ENABLE_STATIC - implement the --enable-static flag\n # Usage: AC_ENABLE_STATIC[(DEFAULT)]\n #   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n #   `yes'.\n-AC_DEFUN(AC_ENABLE_STATIC,\n-[define([AC_ENABLE_STATIC_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_DEFUN(AC_ENABLE_STATIC, [dnl\n+define([AC_ENABLE_STATIC_DEFAULT], ifelse($1, no, no, yes))dnl\n AC_ARG_ENABLE(static,\n changequote(<<, >>)dnl\n <<  --enable-static[=PKGS]  build static libraries [default=>>AC_ENABLE_STATIC_DEFAULT],\n@@ -496,16 +501,16 @@ enable_static=AC_ENABLE_STATIC_DEFAULT)dnl\n ])\n \n # AC_DISABLE_STATIC - set the default static flag to --disable-static\n-AC_DEFUN(AC_DISABLE_STATIC,\n-[AC_ENABLE_STATIC(no)])\n+AC_DEFUN(AC_DISABLE_STATIC, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_STATIC(no)])\n \n \n # AC_ENABLE_FAST_INSTALL - implement the --enable-fast-install flag\n # Usage: AC_ENABLE_FAST_INSTALL[(DEFAULT)]\n #   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n #   `yes'.\n-AC_DEFUN(AC_ENABLE_FAST_INSTALL,\n-[define([AC_ENABLE_FAST_INSTALL_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_DEFUN(AC_ENABLE_FAST_INSTALL, [dnl\n+define([AC_ENABLE_FAST_INSTALL_DEFAULT], ifelse($1, no, no, yes))dnl\n AC_ARG_ENABLE(fast-install,\n changequote(<<, >>)dnl\n <<  --enable-fast-install[=PKGS]  optimize for fast installation [default=>>AC_ENABLE_FAST_INSTALL_DEFAULT],\n@@ -530,9 +535,8 @@ enable_fast_install=AC_ENABLE_FAST_INSTALL_DEFAULT)dnl\n ])\n \n # AC_ENABLE_FAST_INSTALL - set the default to --disable-fast-install\n-AC_DEFUN(AC_DISABLE_FAST_INSTALL,\n-[AC_ENABLE_FAST_INSTALL(no)])\n-\n+AC_DEFUN(AC_DISABLE_FAST_INSTALL, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_FAST_INSTALL(no)])\n \n # AC_PROG_LD - find the path to the GNU or non-GNU linker\n AC_DEFUN(AC_PROG_LD,\n@@ -550,7 +554,7 @@ if test \"$ac_cv_prog_gcc\" = yes; then\n   case \"$ac_prog\" in\n     # Accept absolute paths.\n changequote(,)dnl\n-    /* | [A-Za-z]:[\\\\/]*)\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n       re_direlt='/[^/][^/]*/\\.\\./'\n changequote([,])dnl\n       # Canonicalize the path of ld\n@@ -576,10 +580,10 @@ else\n fi\n AC_CACHE_VAL(ac_cv_path_LD,\n [if test -z \"$LD\"; then\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n-    if test -f \"$ac_dir/$ac_prog\"; then\n+    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n       ac_cv_path_LD=\"$ac_dir/$ac_prog\"\n       # Check to see if the program is GNU ld.  I'd rather use --version,\n       # but apparently some GNU ld's only accept -v.\n@@ -602,7 +606,6 @@ else\n   AC_MSG_RESULT(no)\n fi\n test -z \"$LD\" && AC_MSG_ERROR([no acceptable ld found in \\$PATH])\n-AC_SUBST(LD)\n AC_PROG_LD_GNU\n ])\n \n@@ -624,10 +627,10 @@ AC_CACHE_VAL(ac_cv_path_NM,\n   # Let the user override the test.\n   ac_cv_path_NM=\"$NM\"\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n   for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do\n     test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/nm; then\n+    if test -f $ac_dir/nm || test -f $ac_dir/nm$ac_exeext ; then\n       # Check to see if the nm accepts a BSD-compat flag.\n       # Adding the `sed 1q' prevents false positives on HP-UX, which says:\n       #   nm: unknown option \"B\" ignored\n@@ -648,230 +651,24 @@ else\n fi])\n NM=\"$ac_cv_path_NM\"\n AC_MSG_RESULT([$NM])\n-AC_SUBST(NM)\n ])\n \n-# AC_SYS_NM_PARSE - Check for command to grab the raw symbol name followed\n-# by C symbol name from nm.\n-AC_DEFUN(AC_SYS_NM_PARSE,\n+# AC_CHECK_LIBM - check for math library\n+AC_DEFUN(AC_CHECK_LIBM,\n [AC_REQUIRE([AC_CANONICAL_HOST])dnl\n-AC_REQUIRE([AC_PROG_NM])dnl\n-# Check for command to grab the raw symbol name followed by C symbol from nm.\n-AC_MSG_CHECKING([command to parse $NM output])\n-AC_CACHE_VAL(ac_cv_sys_global_symbol_pipe,\n-[# These are sane defaults that work on at least a few old systems.\n-# {They come from Ultrix.  What could be older than Ultrix?!! ;)}\n-\n-changequote(,)dnl\n-# Character class describing NM global symbol codes.\n-ac_symcode='[BCDEGRST]'\n-\n-# Regexp to match symbols that can be accessed directly from C.\n-ac_sympat='\\([_A-Za-z][_A-Za-z0-9]*\\)'\n-\n-# Transform the above into a raw symbol and a C symbol.\n-ac_symxfrm='\\1 \\2\\3 \\3'\n-\n-# Transform an extracted symbol line into a proper C declaration\n-ac_global_symbol_to_cdecl=\"sed -n -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n-\n-# Define system-specific variables.\n-case \"$host_os\" in\n-aix*)\n-  ac_symcode='[BCDT]'\n-  ;;\n-cygwin* | mingw*)\n-  ac_symcode='[ABCDGISTW]'\n+LIBM=\n+case \"$lt_target\" in\n+*-*-beos* | *-*-cygwin*)\n+  # These system don't have libm\n   ;;\n-hpux*)\n-  ac_global_symbol_to_cdecl=\"sed -n -e 's/^T .* \\(.*\\)$/extern char \\1();/p' -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n+*-ncr-sysv4.3*)\n+  AC_CHECK_LIB(mw, _mwvalidcheckl, LIBM=\"-lmw\")\n+  AC_CHECK_LIB(m, main, LIBM=\"$LIBM -lm\")\n   ;;\n-irix*)\n-  ac_symcode='[BCDEGRST]'\n-  ;;\n-solaris*)\n-  ac_symcode='[BDT]'\n+*)\n+  AC_CHECK_LIB(m, main, LIBM=\"-lm\")\n   ;;\n esac\n-\n-# If we're using GNU nm, then use its standard symbol codes.\n-if $NM -V 2>&1 | egrep '(GNU|with BFD)' > /dev/null; then\n-  ac_symcode='[ABCDGISTW]'\n-fi\n-changequote([,])dnl\n-\n-# Try without a prefix undercore, then with it.\n-for ac_symprfx in \"\" \"_\"; do\n-\n-  ac_cv_sys_global_symbol_pipe=\"sed -n -e 's/^.*[ \t]\\($ac_symcode\\)[ \t][ \t]*\\($ac_symprfx\\)$ac_sympat$/$ac_symxfrm/p'\"\n-\n-  # Check to see that the pipe works correctly.\n-  ac_pipe_works=no\n-  rm -f conftest.$ac_ext\n-  cat > conftest.$ac_ext <<EOF\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif\n-char nm_test_var;\n-void nm_test_func(){}\n-#ifdef __cplusplus\n-}\n-#endif\n-int main(){nm_test_var='a';nm_test_func;return 0;}\n-EOF\n-\n-  if AC_TRY_EVAL(ac_compile); then\n-    # Now try to grab the symbols.\n-    ac_nlist=conftest.nm\n-  \n-    if AC_TRY_EVAL(NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) && test -s \"$ac_nlist\"; then\n-\n-      # Try sorting and uniquifying the output.\n-      if sort \"$ac_nlist\" | uniq > \"$ac_nlist\"T; then\n-\tmv -f \"$ac_nlist\"T \"$ac_nlist\"\n-      else\n-\trm -f \"$ac_nlist\"T\n-      fi\n-\n-      # Make sure that we snagged all the symbols we need.\n-      if egrep ' nm_test_var$' \"$ac_nlist\" >/dev/null; then\n-\tif egrep ' nm_test_func$' \"$ac_nlist\" >/dev/null; then\n-\t  cat <<EOF > conftest.c\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif\n-\n-EOF\n-\t  # Now generate the symbol file.\n-\t  eval \"$ac_global_symbol_to_cdecl\"' < \"$ac_nlist\" >> conftest.c'\n-\n-\t  cat <<EOF >> conftest.c\n-#if defined (__STDC__) && __STDC__\n-# define lt_ptr_t void *\n-#else\n-# define lt_ptr_t char *\n-# define const\n-#endif\n-\n-/* The mapping between symbol names and symbols. */\n-const struct {\n-  const char *name;\n-  lt_ptr_t address;\n-}\n-changequote(,)dnl\n-lt_preloaded_symbols[] =\n-changequote([,])dnl\n-{\n-EOF\n-\tsed 's/^. \\(.*\\) \\(.*\\)$/  {\"\\2\", (lt_ptr_t) \\&\\2},/' < \"$ac_nlist\" >> conftest.c\n-\tcat <<\\EOF >> conftest.c\n-  {0, (lt_ptr_t) 0}\n-};\n-\n-#ifdef __cplusplus\n-}\n-#endif\n-EOF\n-\t  # Now try linking the two files.\n-\t  mv conftest.$ac_objext conftestm.$ac_objext\n-\t  ac_save_LIBS=\"$LIBS\"\n-\t  ac_save_CFLAGS=\"$CFLAGS\"\n-\t  LIBS=\"conftestm.$ac_objext\"\n-\t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n-\t  if AC_TRY_EVAL(ac_link) && test -s conftest; then\n-\t    ac_pipe_works=yes\n-\t  else\n-\t    echo \"configure: failed program was:\" >&AC_FD_CC\n-\t    cat conftest.c >&AC_FD_CC\n-\t  fi\n-\t  LIBS=\"$ac_save_LIBS\"\n-\t  CFLAGS=\"$ac_save_CFLAGS\"\n-\telse\n-\t  echo \"cannot find nm_test_func in $ac_nlist\" >&AC_FD_CC\n-\tfi\n-      else\n-\techo \"cannot find nm_test_var in $ac_nlist\" >&AC_FD_CC\n-      fi\n-    else\n-      echo \"cannot run $ac_cv_sys_global_symbol_pipe\" >&AC_FD_CC\n-    fi\n-  else\n-    echo \"$progname: failed program was:\" >&AC_FD_CC\n-    cat conftest.c >&AC_FD_CC\n-  fi\n-  rm -rf conftest*\n-\n-  # Do not use the global_symbol_pipe unless it works.\n-  if test \"$ac_pipe_works\" = yes; then\n-    if test x\"$ac_symprfx\" = x\"_\"; then\n-      ac_cv_sys_symbol_underscore=yes\n-    else\n-      ac_cv_sys_symbol_underscore=no\n-    fi\n-    break\n-  else\n-    ac_cv_sys_global_symbol_pipe=\n-  fi\n-done\n-])\n-\n-ac_result=yes\n-if test -z \"$ac_cv_sys_global_symbol_pipe\"; then\n-   ac_result=no\n-fi\n-AC_MSG_RESULT($ac_result)\n-])\n-\n-# AC_SYS_LIBTOOL_CYGWIN - find tools needed on cygwin\n-AC_DEFUN(AC_SYS_LIBTOOL_CYGWIN,\n-[AC_CHECK_TOOL(DLLTOOL, dlltool, false)\n-AC_CHECK_TOOL(AS, as, false)\n-])\n-\n-# AC_SYS_SYMBOL_UNDERSCORE - does the compiler prefix global symbols\n-#                            with an underscore?\n-AC_DEFUN(AC_SYS_SYMBOL_UNDERSCORE,\n-[AC_REQUIRE([AC_PROG_NM])dnl\n-AC_REQUIRE([AC_SYS_NM_PARSE])dnl\n-AC_MSG_CHECKING([for _ prefix in compiled symbols])\n-AC_CACHE_VAL(ac_cv_sys_symbol_underscore,\n-[ac_cv_sys_symbol_underscore=no\n-cat > conftest.$ac_ext <<EOF\n-void nm_test_func(){}\n-int main(){nm_test_func;return 0;}\n-EOF\n-if AC_TRY_EVAL(ac_compile); then\n-  # Now try to grab the symbols.\n-  ac_nlist=conftest.nm\n-  if AC_TRY_EVAL(NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) && test -s \"$ac_nlist\"; then\n-    # See whether the symbols have a leading underscore.\n-    if egrep '^. _nm_test_func' \"$ac_nlist\" >/dev/null; then\n-      ac_cv_sys_symbol_underscore=yes\n-    else\n-      if egrep '^. nm_test_func ' \"$ac_nlist\" >/dev/null; then\n-\t:\n-      else\n-\techo \"configure: cannot find nm_test_func in $ac_nlist\" >&AC_FD_CC\n-      fi\n-    fi\n-  else\n-    echo \"configure: cannot run $ac_cv_sys_global_symbol_pipe\" >&AC_FD_CC\n-  fi\n-else\n-  echo \"configure: failed program was:\" >&AC_FD_CC\n-  cat conftest.c >&AC_FD_CC\n-fi\n-rm -rf conftest*\n-])\n-AC_MSG_RESULT($ac_cv_sys_symbol_underscore)\n-USE_SYMBOL_UNDERSCORE=${ac_cv_sys_symbol_underscore=no}\n-AC_SUBST(USE_SYMBOL_UNDERSCORE)dnl\n-])\n-\n-# AC_CHECK_LIBM - check for math library\n-AC_DEFUN(AC_CHECK_LIBM, [\n-AC_CHECK_LIB(mw, _mwvalidcheckl)\n-AC_CHECK_LIB(m, cos)\n ])\n \n # AC_LIBLTDL_CONVENIENCE[(dir)] - sets LIBLTDL to the link flags for\n@@ -882,13 +679,14 @@ AC_CHECK_LIB(m, cos)\n # '${top_builddir}/' (note the single quotes!) if your package is not\n # flat, and, if you're not using automake, define top_builddir as\n # appropriate in the Makefiles.\n-AC_DEFUN(AC_LIBLTDL_CONVENIENCE, [\n+AC_DEFUN(AC_LIBLTDL_CONVENIENCE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n   case \"$enable_ltdl_convenience\" in\n   no) AC_MSG_ERROR([this package needs a convenience libltdl]) ;;\n   \"\") enable_ltdl_convenience=yes\n       ac_configure_args=\"$ac_configure_args --enable-ltdl-convenience\" ;;\n   esac\n   LIBLTDL=ifelse($#,1,$1,['${top_builddir}/libltdl'])/libltdlc.la\n+  INCLTDL=ifelse($#,1,-I$1,['-I${top_builddir}/libltdl'])\n ])\n \n # AC_LIBLTDL_INSTALLABLE[(dir)] - sets LIBLTDL to the link flags for\n@@ -900,16 +698,23 @@ AC_DEFUN(AC_LIBLTDL_CONVENIENCE, [\n # flat, and, if you're not using automake, define top_builddir as\n # appropriate in the Makefiles.\n # In the future, this macro may have to be called after AC_PROG_LIBTOOL.\n-AC_DEFUN(AC_LIBLTDL_INSTALLABLE, [\n-  AC_CHECK_LIB(ltdl, main, LIBLTDL=\"-lltdl\", [\n-    case \"$enable_ltdl_install\" in\n-    no) AC_MSG_WARN([libltdl not installed, but installation disabled]) ;;\n-    \"\") enable_ltdl_install=yes\n-        ac_configure_args=\"$ac_configure_args --enable-ltdl-install\" ;;\n-    esac\n+AC_DEFUN(AC_LIBLTDL_INSTALLABLE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+  AC_CHECK_LIB(ltdl, main,\n+  [test x\"$enable_ltdl_install\" != xyes && enable_ltdl_install=no],\n+  [if test x\"$enable_ltdl_install\" = xno; then\n+     AC_MSG_WARN([libltdl not installed, but installation disabled])\n+   else\n+     enable_ltdl_install=yes\n+   fi\n   ])\n-  if test x\"$enable_ltdl_install\" != x\"no\"; then\n+  if test x\"$enable_ltdl_install\" = x\"yes\"; then\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install\"\n     LIBLTDL=ifelse($#,1,$1,['${top_builddir}/libltdl'])/libltdl.la\n+    INCLTDL=ifelse($#,1,-I$1,['-I${top_builddir}/libltdl'])\n+  else\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install=no\"\n+    LIBLTDL=\"-lltdl\"\n+    INCLTDL=\n   fi\n ])\n \n@@ -921,7 +726,7 @@ AC_DEFUN(AM_DISABLE_SHARED, [indir([AC_DISABLE_SHARED], $@)])dnl\n AC_DEFUN(AM_DISABLE_STATIC, [indir([AC_DISABLE_STATIC], $@)])dnl\n AC_DEFUN(AM_PROG_LD, [indir([AC_PROG_LD])])dnl\n AC_DEFUN(AM_PROG_NM, [indir([AC_PROG_NM])])dnl\n-AC_DEFUN(AM_SYS_NM_PARSE, [indir([AC_SYS_NM_PARSE])])dnl\n-AC_DEFUN(AM_SYS_SYMBOL_UNDERSCORE, [indir([AC_SYS_SYMBOL_UNDERSCORE])])dnl\n-AC_DEFUN(AM_SYS_LIBTOOL_CYGWIN, [indir([AC_SYS_LIBTOOL_CYGWIN])])dnl\n+\n+dnl This is just to silence aclocal about the macro not being used\n+ifelse([AC_DISABLE_FAST_INSTALL])dnl\n "}, {"sha": "9555540ff4c99f01f2e4dd253d8976ae809a5bee", "filename": "libjava/configure", "status": "modified", "additions": 319, "deletions": 542, "changes": 861, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -30,7 +30,7 @@ ac_help=\"$ac_help\n ac_help=\"$ac_help\n   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]\"\n ac_help=\"$ac_help\n-  --disable-libtool-lock  force libtool not to do file locking\"\n+  --disable-libtool-lock  avoid locking (might break parallel builds)\"\n ac_help=\"$ac_help\n   --enable-fast-character prefer speed over size for Character\"\n ac_help=\"$ac_help\n@@ -1605,6 +1605,28 @@ LIBGCJ_JAVAFLAGS=\"${libgcj_javaflags}\"\n \n \n \n+# Only use libltdl for native builds.\n+if test -z \"${with_cross_host}\"; then\n+     case \"$enable_ltdl_convenience\" in\n+  no) { echo \"configure: error: this package needs a convenience libltdl\" 1>&2; exit 1; } ;;\n+  \"\") enable_ltdl_convenience=yes\n+      ac_configure_args=\"$ac_configure_args --enable-ltdl-convenience\" ;;\n+  esac\n+  LIBLTDL='${top_builddir}/libltdl'/libltdlc.la\n+  INCLTDL='-I${top_builddir}/libltdl'\n+\n+   \n+   DIRLTDL=libltdl\n+   cat >> confdefs.h <<\\EOF\n+#define USE_LTDL 1\n+EOF\n+\n+   # Sigh.  Libtool's macro doesn't do the right thing.\n+   INCLTDL=\"-I\\$(top_srcdir)/libltdl $INCLTDL\"\n+fi\n+\n+\n+\n # Check whether --enable-shared or --disable-shared was given.\n if test \"${enable_shared+set}\" = set; then\n   enableval=\"$enable_shared\"\n@@ -1677,7 +1699,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1681: checking for $ac_word\" >&5\n+echo \"configure:1703: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1716,11 +1738,11 @@ ac_prog=ld\n if test \"$ac_cv_prog_gcc\" = yes; then\n   # Check if gcc -print-prog-name=ld gives a path.\n   echo $ac_n \"checking for ld used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:1720: checking for ld used by GCC\" >&5\n+echo \"configure:1742: checking for ld used by GCC\" >&5\n   ac_prog=`($CC -print-prog-name=ld) 2>&5`\n   case \"$ac_prog\" in\n     # Accept absolute paths.\n-    /* | [A-Za-z]:[\\\\/]*)\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n       re_direlt='/[^/][^/]*/\\.\\./'\n       # Canonicalize the path of ld\n       ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n@@ -1740,19 +1762,19 @@ echo \"configure:1720: checking for ld used by GCC\" >&5\n   esac\n elif test \"$with_gnu_ld\" = yes; then\n   echo $ac_n \"checking for GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1744: checking for GNU ld\" >&5\n+echo \"configure:1766: checking for GNU ld\" >&5\n else\n   echo $ac_n \"checking for non-GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1747: checking for non-GNU ld\" >&5\n+echo \"configure:1769: checking for non-GNU ld\" >&5\n fi\n if eval \"test \\\"`echo '$''{'ac_cv_path_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -z \"$LD\"; then\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n-    if test -f \"$ac_dir/$ac_prog\"; then\n+    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n       ac_cv_path_LD=\"$ac_dir/$ac_prog\"\n       # Check to see if the program is GNU ld.  I'd rather use --version,\n       # but apparently some GNU ld's only accept -v.\n@@ -1777,9 +1799,8 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n fi\n test -z \"$LD\" && { echo \"configure: error: no acceptable ld found in \\$PATH\" 1>&2; exit 1; }\n-\n echo $ac_n \"checking if the linker ($LD) is GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1783: checking if the linker ($LD) is GNU ld\" >&5\n+echo \"configure:1804: checking if the linker ($LD) is GNU ld\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1795,18 +1816,18 @@ echo \"$ac_t\"\"$ac_cv_prog_gnu_ld\" 1>&6\n \n \n echo $ac_n \"checking for BSD-compatible nm\"\"... $ac_c\" 1>&6\n-echo \"configure:1799: checking for BSD-compatible nm\" >&5\n+echo \"configure:1820: checking for BSD-compatible nm\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$NM\"; then\n   # Let the user override the test.\n   ac_cv_path_NM=\"$NM\"\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n   for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do\n     test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/nm; then\n+    if test -f $ac_dir/nm || test -f $ac_dir/nm$ac_exeext ; then\n       # Check to see if the nm accepts a BSD-compat flag.\n       # Adding the `sed 1q' prevents false positives on HP-UX, which says:\n       #   nm: unknown option \"B\" ignored\n@@ -1830,213 +1851,8 @@ fi\n NM=\"$ac_cv_path_NM\"\n echo \"$ac_t\"\"$NM\" 1>&6\n \n-\n-# Check for command to grab the raw symbol name followed by C symbol from nm.\n-echo $ac_n \"checking command to parse $NM output\"\"... $ac_c\" 1>&6\n-echo \"configure:1837: checking command to parse $NM output\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_sys_global_symbol_pipe'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  # These are sane defaults that work on at least a few old systems.\n-# {They come from Ultrix.  What could be older than Ultrix?!! ;)}\n-\n-# Character class describing NM global symbol codes.\n-ac_symcode='[BCDEGRST]'\n-\n-# Regexp to match symbols that can be accessed directly from C.\n-ac_sympat='\\([_A-Za-z][_A-Za-z0-9]*\\)'\n-\n-# Transform the above into a raw symbol and a C symbol.\n-ac_symxfrm='\\1 \\2\\3 \\3'\n-\n-# Transform an extracted symbol line into a proper C declaration\n-ac_global_symbol_to_cdecl=\"sed -n -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n-\n-# Define system-specific variables.\n-case \"$host_os\" in\n-aix*)\n-  ac_symcode='[BCDT]'\n-  ;;\n-cygwin* | mingw*)\n-  ac_symcode='[ABCDGISTW]'\n-  ;;\n-hpux*)\n-  ac_global_symbol_to_cdecl=\"sed -n -e 's/^T .* \\(.*\\)$/extern char \\1();/p' -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n-  ;;\n-irix*)\n-  ac_symcode='[BCDEGRST]'\n-  ;;\n-solaris*)\n-  ac_symcode='[BDT]'\n-  ;;\n-esac\n-\n-# If we're using GNU nm, then use its standard symbol codes.\n-if $NM -V 2>&1 | egrep '(GNU|with BFD)' > /dev/null; then\n-  ac_symcode='[ABCDGISTW]'\n-fi\n-\n-# Try without a prefix undercore, then with it.\n-for ac_symprfx in \"\" \"_\"; do\n-\n-  ac_cv_sys_global_symbol_pipe=\"sed -n -e 's/^.* \t\\($ac_symcode\\) \t \t*\\($ac_symprfx\\)$ac_sympat$/$ac_symxfrm/p'\"\n-\n-  # Check to see that the pipe works correctly.\n-  ac_pipe_works=no\n-  rm -f conftest.$ac_ext\n-  cat > conftest.$ac_ext <<EOF\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif\n-char nm_test_var;\n-void nm_test_func(){}\n-#ifdef __cplusplus\n-}\n-#endif\n-int main(){nm_test_var='a';nm_test_func;return 0;}\n-EOF\n-\n-  if { (eval echo configure:1900: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n-    # Now try to grab the symbols.\n-    ac_nlist=conftest.nm\n-  \n-    if { (eval echo configure:1904: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n-\n-      # Try sorting and uniquifying the output.\n-      if sort \"$ac_nlist\" | uniq > \"$ac_nlist\"T; then\n-\tmv -f \"$ac_nlist\"T \"$ac_nlist\"\n-      else\n-\trm -f \"$ac_nlist\"T\n-      fi\n-\n-      # Make sure that we snagged all the symbols we need.\n-      if egrep ' nm_test_var$' \"$ac_nlist\" >/dev/null; then\n-\tif egrep ' nm_test_func$' \"$ac_nlist\" >/dev/null; then\n-\t  cat <<EOF > conftest.c\n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif\n-\n-EOF\n-\t  # Now generate the symbol file.\n-\t  eval \"$ac_global_symbol_to_cdecl\"' < \"$ac_nlist\" >> conftest.c'\n-\n-\t  cat <<EOF >> conftest.c\n-#if defined (__STDC__) && __STDC__\n-# define lt_ptr_t void *\n-#else\n-# define lt_ptr_t char *\n-# define const\n-#endif\n-\n-/* The mapping between symbol names and symbols. */\n-const struct {\n-  const char *name;\n-  lt_ptr_t address;\n-}\n-lt_preloaded_symbols[] =\n-{\n-EOF\n-\tsed 's/^. \\(.*\\) \\(.*\\)$/  {\"\\2\", (lt_ptr_t) \\&\\2},/' < \"$ac_nlist\" >> conftest.c\n-\tcat <<\\EOF >> conftest.c\n-  {0, (lt_ptr_t) 0}\n-};\n-\n-#ifdef __cplusplus\n-}\n-#endif\n-EOF\n-\t  # Now try linking the two files.\n-\t  mv conftest.$ac_objext conftestm.$ac_objext\n-\t  ac_save_LIBS=\"$LIBS\"\n-\t  ac_save_CFLAGS=\"$CFLAGS\"\n-\t  LIBS=\"conftestm.$ac_objext\"\n-\t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n-\t  if { (eval echo configure:1956: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n-\t    ac_pipe_works=yes\n-\t  else\n-\t    echo \"configure: failed program was:\" >&5\n-\t    cat conftest.c >&5\n-\t  fi\n-\t  LIBS=\"$ac_save_LIBS\"\n-\t  CFLAGS=\"$ac_save_CFLAGS\"\n-\telse\n-\t  echo \"cannot find nm_test_func in $ac_nlist\" >&5\n-\tfi\n-      else\n-\techo \"cannot find nm_test_var in $ac_nlist\" >&5\n-      fi\n-    else\n-      echo \"cannot run $ac_cv_sys_global_symbol_pipe\" >&5\n-    fi\n-  else\n-    echo \"$progname: failed program was:\" >&5\n-    cat conftest.c >&5\n-  fi\n-  rm -rf conftest*\n-\n-  # Do not use the global_symbol_pipe unless it works.\n-  if test \"$ac_pipe_works\" = yes; then\n-    if test x\"$ac_symprfx\" = x\"_\"; then\n-      ac_cv_sys_symbol_underscore=yes\n-    else\n-      ac_cv_sys_symbol_underscore=no\n-    fi\n-    break\n-  else\n-    ac_cv_sys_global_symbol_pipe=\n-  fi\n-done\n-\n-fi\n-\n-\n-ac_result=yes\n-if test -z \"$ac_cv_sys_global_symbol_pipe\"; then\n-   ac_result=no\n-fi\n-echo \"$ac_t\"\"$ac_result\" 1>&6\n-\n-echo $ac_n \"checking for _ prefix in compiled symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:2002: checking for _ prefix in compiled symbols\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_sys_symbol_underscore'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  ac_cv_sys_symbol_underscore=no\n-cat > conftest.$ac_ext <<EOF\n-void nm_test_func(){}\n-int main(){nm_test_func;return 0;}\n-EOF\n-if { (eval echo configure:2011: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n-  # Now try to grab the symbols.\n-  ac_nlist=conftest.nm\n-  if { (eval echo configure:2014: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n-    # See whether the symbols have a leading underscore.\n-    if egrep '^. _nm_test_func' \"$ac_nlist\" >/dev/null; then\n-      ac_cv_sys_symbol_underscore=yes\n-    else\n-      if egrep '^. nm_test_func ' \"$ac_nlist\" >/dev/null; then\n-\t:\n-      else\n-\techo \"configure: cannot find nm_test_func in $ac_nlist\" >&5\n-      fi\n-    fi\n-  else\n-    echo \"configure: cannot run $ac_cv_sys_global_symbol_pipe\" >&5\n-  fi\n-else\n-  echo \"configure: failed program was:\" >&5\n-  cat conftest.c >&5\n-fi\n-rm -rf conftest*\n-\n-fi\n-\n-echo \"$ac_t\"\"$ac_cv_sys_symbol_underscore\" 1>&6\n-USE_SYMBOL_UNDERSCORE=${ac_cv_sys_symbol_underscore=no}\n-\n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:2040: checking whether ln -s works\" >&5\n+echo \"configure:1856: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2057,23 +1873,36 @@ else\n fi\n \n \n+case \"$target\" in\n+NONE) lt_target=\"$host\" ;;\n+*) lt_target=\"$target\" ;;\n+esac\n+\n # Check for any special flags to pass to ltconfig.\n libtool_flags=\"--cache-file=$cache_file\"\n test \"$enable_shared\" = no && libtool_flags=\"$libtool_flags --disable-shared\"\n test \"$enable_static\" = no && libtool_flags=\"$libtool_flags --disable-static\"\n test \"$enable_fast_install\" = no && libtool_flags=\"$libtool_flags --disable-fast-install\"\n-test \"$lt_dlopen\" = yes && libtool_flags=\"$libtool_flags --enable-dlopen\"\n-test \"$silent\" = yes && libtool_flags=\"$libtool_flags --silent\"\n test \"$ac_cv_prog_gcc\" = yes && libtool_flags=\"$libtool_flags --with-gcc\"\n test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n+libtool_flags=\"$libtool_flags --enable-dlopen\"\n+\n+# Check whether --enable-libtool-lock or --disable-libtool-lock was given.\n+if test \"${enable_libtool_lock+set}\" = set; then\n+  enableval=\"$enable_libtool_lock\"\n+  :\n+fi\n+\n+test \"x$enable_libtool_lock\" = xno && libtool_flags=\"$libtool_flags --disable-lock\"\n+test x\"$silent\" = xyes && libtool_flags=\"$libtool_flags --silent\"\n \n # Some flags need to be propagated to the compiler or linker for good\n # libtool support.\n-case \"$host\" in\n+case \"$lt_target\" in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 2076 \"configure\"' > conftest.$ac_ext\n-  if { (eval echo configure:2077: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  echo '#line 1905 \"configure\"' > conftest.$ac_ext\n+  if { (eval echo configure:1906: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case \"`/usr/bin/file conftest.o`\" in\n     *32-bit*)\n       LD=\"${LD-ld} -32\"\n@@ -2094,19 +1923,19 @@ case \"$host\" in\n   SAVE_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS -belf\"\n   echo $ac_n \"checking whether the C compiler needs -belf\"\"... $ac_c\" 1>&6\n-echo \"configure:2098: checking whether the C compiler needs -belf\" >&5\n+echo \"configure:1927: checking whether the C compiler needs -belf\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2103 \"configure\"\n+#line 1932 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2110: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1939: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   lt_cv_cc_needs_belf=yes\n else\n@@ -2125,161 +1954,9 @@ echo \"$ac_t\"\"$lt_cv_cc_needs_belf\" 1>&6\n   fi\n   ;;\n \n-*-*-cygwin*)\n-  # Extract the first word of \"${ac_tool_prefix}dlltool\", so it can be a program name with args.\n-set dummy ${ac_tool_prefix}dlltool; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2133: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$DLLTOOL\"; then\n-  ac_cv_prog_DLLTOOL=\"$DLLTOOL\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_DLLTOOL=\"${ac_tool_prefix}dlltool\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-DLLTOOL=\"$ac_cv_prog_DLLTOOL\"\n-if test -n \"$DLLTOOL\"; then\n-  echo \"$ac_t\"\"$DLLTOOL\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-\n-if test -z \"$ac_cv_prog_DLLTOOL\"; then\n-if test -n \"$ac_tool_prefix\"; then\n-  # Extract the first word of \"dlltool\", so it can be a program name with args.\n-set dummy dlltool; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2165: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$DLLTOOL\"; then\n-  ac_cv_prog_DLLTOOL=\"$DLLTOOL\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_DLLTOOL=\"dlltool\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-  test -z \"$ac_cv_prog_DLLTOOL\" && ac_cv_prog_DLLTOOL=\"false\"\n-fi\n-fi\n-DLLTOOL=\"$ac_cv_prog_DLLTOOL\"\n-if test -n \"$DLLTOOL\"; then\n-  echo \"$ac_t\"\"$DLLTOOL\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-else\n-  DLLTOOL=\"false\"\n-fi\n-fi\n-\n-# Extract the first word of \"${ac_tool_prefix}as\", so it can be a program name with args.\n-set dummy ${ac_tool_prefix}as; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2200: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$AS\"; then\n-  ac_cv_prog_AS=\"$AS\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_AS=\"${ac_tool_prefix}as\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-AS=\"$ac_cv_prog_AS\"\n-if test -n \"$AS\"; then\n-  echo \"$ac_t\"\"$AS\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-\n-if test -z \"$ac_cv_prog_AS\"; then\n-if test -n \"$ac_tool_prefix\"; then\n-  # Extract the first word of \"as\", so it can be a program name with args.\n-set dummy as; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2232: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$AS\"; then\n-  ac_cv_prog_AS=\"$AS\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_AS=\"as\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-  test -z \"$ac_cv_prog_AS\" && ac_cv_prog_AS=\"false\"\n-fi\n-fi\n-AS=\"$ac_cv_prog_AS\"\n-if test -n \"$AS\"; then\n-  echo \"$ac_t\"\"$AS\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-else\n-  AS=\"false\"\n-fi\n-fi\n-\n-\n-  ;;\n \n esac\n \n-# enable the --disable-libtool-lock switch\n-\n-# Check whether --enable-libtool-lock or --disable-libtool-lock was given.\n-if test \"${enable_libtool_lock+set}\" = set; then\n-  enableval=\"$enable_libtool_lock\"\n-  need_locks=$enableval\n-else\n-  need_locks=yes\n-fi\n-\n-\n-if test x\"$need_locks\" = xno; then\n-  libtool_flags=\"$libtool_flags --disable-lock\"\n-fi\n-\n \n # Save cache, so that ltconfig can load it\n cat > confcache <<\\EOF\n@@ -2332,10 +2009,11 @@ rm -f confcache\n \n # Actually configure libtool.  ac_aux_dir is where install-sh is found.\n CC=\"$CC\" CFLAGS=\"$CFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n-LD=\"$LD\" NM=\"$NM\" RANLIB=\"$RANLIB\" LN_S=\"$LN_S\" \\\n-DLLTOOL=\"$DLLTOOL\" AS=\"$AS\" \\\n+LD=\"$LD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" \\\n+DLLTOOL=\"$DLLTOOL\" AS=\"$AS\" OBJDUMP=\"$OBJDUMP\" \\\n ${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig --no-reexec \\\n-$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $host \\\n+$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $lt_target \\\n || { echo \"configure: error: libtool configure failed\" 1>&2; exit 1; }\n \n # Reload cache, that may have been modified by ltconfig\n@@ -2358,6 +2036,8 @@ LIBTOOL='$(SHELL) $(top_builddir)/libtool'\n # clobbered by the next message.\n exec 5>>./config.log\n \n+subdirs=\"$DIRLDL\"\n+\n \n if test -z \"$with_target_subdir\" || test \"$with_target_subdir\" = \".\"; then\n    COMPPATH=.\n@@ -2460,18 +2140,18 @@ if test \"$ac_cv_prog_gnu_ld\" = yes; then\n fi   \n \n echo $ac_n \"checking for data_start\"\"... $ac_c\" 1>&6\n-echo \"configure:2464: checking for data_start\" >&5\n+echo \"configure:2144: checking for data_start\" >&5\n LIBDATASTARTSPEC=\n NEEDS_DATA_START=\n cat > conftest.$ac_ext <<EOF\n-#line 2468 \"configure\"\n+#line 2148 \"configure\"\n #include \"confdefs.h\"\n extern int data_start;\n int main() {\n return ((int) &data_start);\n ; return 0; }\n EOF\n-if { (eval echo configure:2475: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2155: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   echo \"$ac_t\"\"found it\" 1>&6\n else\n@@ -2527,7 +2207,7 @@ EOF\n esac\n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2531: checking how to run the C preprocessor\" >&5\n+echo \"configure:2211: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2542,13 +2222,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2546 \"configure\"\n+#line 2226 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2552: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2232: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2559,13 +2239,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2563 \"configure\"\n+#line 2243 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2569: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2249: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2576,13 +2256,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2580 \"configure\"\n+#line 2260 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2586: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2266: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2607,7 +2287,7 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n cat > conftest.$ac_ext <<EOF\n-#line 2611 \"configure\"\n+#line 2291 \"configure\"\n #include \"confdefs.h\"\n #include <stdint.h>\n EOF\n@@ -2622,7 +2302,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2626 \"configure\"\n+#line 2306 \"configure\"\n #include \"confdefs.h\"\n #include <inttypes.h>\n EOF\n@@ -2637,7 +2317,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2641 \"configure\"\n+#line 2321 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n EOF\n@@ -2652,7 +2332,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2656 \"configure\"\n+#line 2336 \"configure\"\n #include \"confdefs.h\"\n #include <sys/config.h>\n EOF\n@@ -2669,7 +2349,7 @@ rm -f conftest*\n \n \n cat > conftest.$ac_ext <<EOF\n-#line 2673 \"configure\"\n+#line 2353 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -2684,7 +2364,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2688 \"configure\"\n+#line 2368 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -2722,7 +2402,7 @@ ZLIBSPEC=\n libsubdir=.libs\n \n echo $ac_n \"checking for garbage collector to use\"\"... $ac_c\" 1>&6\n-echo \"configure:2726: checking for garbage collector to use\" >&5\n+echo \"configure:2406: checking for garbage collector to use\" >&5\n # Check whether --enable-java-gc or --disable-java-gc was given.\n if test \"${enable_java_gc+set}\" = set; then\n   enableval=\"$enable_java_gc\"\n@@ -2772,7 +2452,7 @@ esac\n \n \n echo $ac_n \"checking for threads package to use\"\"... $ac_c\" 1>&6\n-echo \"configure:2776: checking for threads package to use\" >&5\n+echo \"configure:2456: checking for threads package to use\" >&5\n # Check whether --enable-threads or --disable-threads was given.\n if test \"${enable_threads+set}\" = set; then\n   enableval=\"$enable_threads\"\n@@ -2952,12 +2632,12 @@ else\n    for ac_func in strerror ioctl select fstat open fsync sleep\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2956: checking for $ac_func\" >&5\n+echo \"configure:2636: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2961 \"configure\"\n+#line 2641 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2980,7 +2660,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2984: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2664: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3007,12 +2687,12 @@ done\n    for ac_func in gmtime_r localtime_r readdir_r getpwuid_r getcwd\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3011: checking for $ac_func\" >&5\n+echo \"configure:2691: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3016 \"configure\"\n+#line 2696 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3035,7 +2715,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3039: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2719: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3062,12 +2742,12 @@ done\n    for ac_func in access stat mkdir rename rmdir unlink realpath\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3066: checking for $ac_func\" >&5\n+echo \"configure:2746: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3071 \"configure\"\n+#line 2751 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3090,7 +2770,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3094: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2774: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3117,12 +2797,12 @@ done\n    for ac_func in inet_aton inet_addr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3121: checking for $ac_func\" >&5\n+echo \"configure:2801: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3126 \"configure\"\n+#line 2806 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3145,7 +2825,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3149: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2829: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3172,12 +2852,12 @@ done\n    for ac_func in inet_pton uname inet_ntoa\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3176: checking for $ac_func\" >&5\n+echo \"configure:2856: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3181 \"configure\"\n+#line 2861 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3200,7 +2880,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3204: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2884: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3227,12 +2907,12 @@ done\n    for ac_func in backtrace fork execvp pipe\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3231: checking for $ac_func\" >&5\n+echo \"configure:2911: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3236 \"configure\"\n+#line 2916 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3255,7 +2935,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3259: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2939: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3283,17 +2963,17 @@ done\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:3287: checking for $ac_hdr\" >&5\n+echo \"configure:2967: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3292 \"configure\"\n+#line 2972 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3297: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2977: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3324,7 +3004,7 @@ do\n \n ac_safe=`echo \"$ac_file\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_file\"\"... $ac_c\" 1>&6\n-echo \"configure:3328: checking for $ac_file\" >&5\n+echo \"configure:3008: checking for $ac_file\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_file_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3359,12 +3039,12 @@ done\n    for ac_func in gethostbyname_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3363: checking for $ac_func\" >&5\n+echo \"configure:3043: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3368 \"configure\"\n+#line 3048 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3387,7 +3067,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3391: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3071: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3414,7 +3094,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3418 \"configure\"\n+#line 3098 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3434,7 +3114,7 @@ rm -f conftest*\n      *\" -D_REENTRANT \"*) ;;\n      *)\n \t\techo $ac_n \"checking whether gethostbyname_r declaration requires -D_REENTRANT\"\"... $ac_c\" 1>&6\n-echo \"configure:3438: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n+echo \"configure:3118: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_gethostbyname_r_needs_reentrant'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3447,14 +3127,14 @@ ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftes\n cross_compiling=$ac_cv_prog_cxx_cross\n \n \t  cat > conftest.$ac_ext <<EOF\n-#line 3451 \"configure\"\n+#line 3131 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:3458: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3138: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=no\n else\n@@ -3464,14 +3144,14 @@ else\n   \t\tCPPFLAGS_SAVE=\"$CPPFLAGS\"\n \t\tCPPFLAGS=\"$CPPFLAGS -D_REENTRANT\"\n \t\tcat > conftest.$ac_ext <<EOF\n-#line 3468 \"configure\"\n+#line 3148 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:3475: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3155: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=yes\n else\n@@ -3506,12 +3186,12 @@ EOF\n      esac\n \n      echo $ac_n \"checking for struct hostent_data\"\"... $ac_c\" 1>&6\n-echo \"configure:3510: checking for struct hostent_data\" >&5\n+echo \"configure:3190: checking for struct hostent_data\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_struct_hostent_data'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \tcat > conftest.$ac_ext <<EOF\n-#line 3515 \"configure\"\n+#line 3195 \"configure\"\n #include \"confdefs.h\"\n \n #if GETHOSTBYNAME_R_NEEDS_REENTRANT && !defined(_REENTRANT)\n@@ -3522,7 +3202,7 @@ int main() {\n struct hostent_data data;\n ; return 0; }\n EOF\n-if { (eval echo configure:3526: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3206: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_struct_hostent_data=yes\n else\n@@ -3551,12 +3231,12 @@ done\n    for ac_func in gethostbyaddr_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3555: checking for $ac_func\" >&5\n+echo \"configure:3235: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3560 \"configure\"\n+#line 3240 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3579,7 +3259,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3583: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3263: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3606,7 +3286,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3610 \"configure\"\n+#line 3290 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3630,12 +3310,12 @@ done\n    for ac_func in gethostname\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3634: checking for $ac_func\" >&5\n+echo \"configure:3314: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3639 \"configure\"\n+#line 3319 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3658,7 +3338,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3662: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3342: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3682,7 +3362,7 @@ EOF\n EOF\n \n      cat > conftest.$ac_ext <<EOF\n-#line 3686 \"configure\"\n+#line 3366 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -3713,12 +3393,12 @@ done\n       for ac_func in pthread_mutexattr_settype pthread_mutexattr_setkind_np\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3717: checking for $ac_func\" >&5\n+echo \"configure:3397: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3722 \"configure\"\n+#line 3402 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3741,7 +3421,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3745: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3425: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3771,12 +3451,12 @@ done\n       for ac_func in sched_yield\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3775: checking for $ac_func\" >&5\n+echo \"configure:3455: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3780 \"configure\"\n+#line 3460 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3799,7 +3479,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3803: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3483: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3821,15 +3501,15 @@ EOF\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for sched_yield in -lrt\"\"... $ac_c\" 1>&6\n-echo \"configure:3825: checking for sched_yield in -lrt\" >&5\n+echo \"configure:3505: checking for sched_yield in -lrt\" >&5\n ac_lib_var=`echo rt'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lrt  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3833 \"configure\"\n+#line 3513 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3840,7 +3520,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:3844: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3524: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3866,15 +3546,15 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n \n \t  echo $ac_n \"checking for sched_yield in -lposix4\"\"... $ac_c\" 1>&6\n-echo \"configure:3870: checking for sched_yield in -lposix4\" >&5\n+echo \"configure:3550: checking for sched_yield in -lposix4\" >&5\n ac_lib_var=`echo posix4'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lposix4  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3878 \"configure\"\n+#line 3558 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3885,7 +3565,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:3889: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3569: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3921,7 +3601,7 @@ done\n       # We can save a little space at runtime if the mutex has m_count\n       # or __m_count.  This is a nice hack for Linux.\n       cat > conftest.$ac_ext <<EOF\n-#line 3925 \"configure\"\n+#line 3605 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -3930,7 +3610,7 @@ int main() {\n         \n ; return 0; }\n EOF\n-if { (eval echo configure:3934: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3614: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE_M_COUNT 1\n@@ -3942,7 +3622,7 @@ else\n   rm -rf conftest*\n   \n \tcat > conftest.$ac_ext <<EOF\n-#line 3946 \"configure\"\n+#line 3626 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -3951,7 +3631,7 @@ int main() {\n \t  \n ; return 0; }\n EOF\n-if { (eval echo configure:3955: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3635: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE___M_COUNT 1\n@@ -3971,12 +3651,12 @@ rm -f conftest*\n    for ac_func in gettimeofday time ftime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3975: checking for $ac_func\" >&5\n+echo \"configure:3655: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3980 \"configure\"\n+#line 3660 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3999,7 +3679,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4003: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3683: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4030,12 +3710,12 @@ done\n    for ac_func in memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4034: checking for $ac_func\" >&5\n+echo \"configure:3714: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4039 \"configure\"\n+#line 3719 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4058,7 +3738,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4062: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3742: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4088,12 +3768,12 @@ done\n    for ac_func in memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4092: checking for $ac_func\" >&5\n+echo \"configure:3772: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4097 \"configure\"\n+#line 3777 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4116,7 +3796,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4120: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3800: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4164,20 +3844,20 @@ done\n    #--------------------------------------------------------------------\n \n    echo $ac_n \"checking for socket libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:4168: checking for socket libraries\" >&5\n+echo \"configure:3848: checking for socket libraries\" >&5\n if eval \"test \\\"`echo '$''{'gcj_cv_lib_sockets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   gcj_cv_lib_sockets=\n      gcj_checkBoth=0\n      unset ac_cv_func_connect\n      echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:4176: checking for connect\" >&5\n+echo \"configure:3856: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4181 \"configure\"\n+#line 3861 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -4200,7 +3880,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4204: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3884: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -4223,22 +3903,22 @@ fi\n      if test \"$gcj_checkSocket\" = 1; then\n \t unset ac_cv_func_connect\n \t echo $ac_n \"checking for main in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:4227: checking for main in -lsocket\" >&5\n+echo \"configure:3907: checking for main in -lsocket\" >&5\n ac_lib_var=`echo socket'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4235 \"configure\"\n+#line 3915 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4242: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3922: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4265,12 +3945,12 @@ fi\n \t LIBS=\"$LIBS -lsocket -lnsl\"\n \t unset ac_cv_func_accept\n \t echo $ac_n \"checking for accept\"\"... $ac_c\" 1>&6\n-echo \"configure:4269: checking for accept\" >&5\n+echo \"configure:3949: checking for accept\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_accept'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4274 \"configure\"\n+#line 3954 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char accept(); below.  */\n@@ -4293,7 +3973,7 @@ accept();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4297: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3977: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_accept=yes\"\n else\n@@ -4320,12 +4000,12 @@ fi\n      gcj_oldLibs=$LIBS\n      LIBS=\"$LIBS $gcj_cv_lib_sockets\"\n      echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:4324: checking for gethostbyname\" >&5\n+echo \"configure:4004: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4329 \"configure\"\n+#line 4009 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -4348,7 +4028,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4352: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4032: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -4366,22 +4046,22 @@ if eval \"test \\\"`echo '$ac_cv_func_'gethostbyname`\\\" = yes\"; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for main in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:4370: checking for main in -lnsl\" >&5\n+echo \"configure:4050: checking for main in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4378 \"configure\"\n+#line 4058 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4385: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4065: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4413,15 +4093,15 @@ echo \"$ac_t\"\"$gcj_cv_lib_sockets\" 1>&6\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:4417: checking for deflate in -lz\" >&5\n+echo \"configure:4097: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4425 \"configure\"\n+#line 4105 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4432,7 +4112,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:4436: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4116: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4461,22 +4141,22 @@ fi\n    # requires -ldl.\n    if test \"$GC\" = boehm; then\n       echo $ac_n \"checking for main in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:4465: checking for main in -ldl\" >&5\n+echo \"configure:4145: checking for main in -ldl\" >&5\n ac_lib_var=`echo dl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4473 \"configure\"\n+#line 4153 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4480: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4160: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4596,7 +4276,7 @@ EOF\n # See if gcj supports -fuse-divide-subroutine.  gcc 2.95 does not, and\n # we want to continue to support that version.\n echo $ac_n \"checking whether gcj supports -fuse-divide-subroutine\"\"... $ac_c\" 1>&6\n-echo \"configure:4600: checking whether gcj supports -fuse-divide-subroutine\" >&5\n+echo \"configure:4280: checking whether gcj supports -fuse-divide-subroutine\" >&5\n cat > conftest.java << 'END'\n public class conftest { }\n END\n@@ -4616,17 +4296,17 @@ for ac_hdr in unistd.h bstring.h sys/time.h sys/types.h fcntl.h sys/ioctl.h sys/\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4620: checking for $ac_hdr\" >&5\n+echo \"configure:4300: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4625 \"configure\"\n+#line 4305 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4630: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4310: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4656,17 +4336,17 @@ for ac_hdr in dirent.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4660: checking for $ac_hdr\" >&5\n+echo \"configure:4340: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4665 \"configure\"\n+#line 4345 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4670: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4350: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4694,20 +4374,20 @@ done\n \n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:4698: checking for ANSI C header files\" >&5\n+echo \"configure:4378: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4703 \"configure\"\n+#line 4383 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4711: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4391: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4724,7 +4404,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 4728 \"configure\"\n+#line 4408 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -4742,7 +4422,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 4746 \"configure\"\n+#line 4426 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -4763,7 +4443,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4767 \"configure\"\n+#line 4447 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -4774,7 +4454,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:4778: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4458: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -4798,12 +4478,12 @@ EOF\n fi\n \n echo $ac_n \"checking for ssize_t\"\"... $ac_c\" 1>&6\n-echo \"configure:4802: checking for ssize_t\" >&5\n+echo \"configure:4482: checking for ssize_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_ssize_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4807 \"configure\"\n+#line 4487 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -4832,9 +4512,9 @@ fi\n \n \n echo $ac_n \"checking for in_addr_t\"\"... $ac_c\" 1>&6\n-echo \"configure:4836: checking for in_addr_t\" >&5\n+echo \"configure:4516: checking for in_addr_t\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4838 \"configure\"\n+#line 4518 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -4848,7 +4528,7 @@ int main() {\n in_addr_t foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:4852: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4532: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_IN_ADDR_T 1\n@@ -4864,16 +4544,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct ip_mreq is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4868: checking whether struct ip_mreq is in netinet/in.h\" >&5\n+echo \"configure:4548: checking whether struct ip_mreq is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4870 \"configure\"\n+#line 4550 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct ip_mreq mreq;\n ; return 0; }\n EOF\n-if { (eval echo configure:4877: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4557: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_STRUCT_IP_MREQ 1\n@@ -4889,16 +4569,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct sockaddr_in6 is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4893: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n+echo \"configure:4573: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4895 \"configure\"\n+#line 4575 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct sockaddr_in6 addr6;\n ; return 0; }\n EOF\n-if { (eval echo configure:4902: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4582: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_INET6 1\n@@ -4914,16 +4594,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for socklen_t in sys/socket.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4918: checking for socklen_t in sys/socket.h\" >&5\n+echo \"configure:4598: checking for socklen_t in sys/socket.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4920 \"configure\"\n+#line 4600 \"configure\"\n #include \"confdefs.h\"\n #include <sys/socket.h>\n int main() {\n socklen_t x = 5;\n ; return 0; }\n EOF\n-if { (eval echo configure:4927: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4607: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_SOCKLEN_T 1\n@@ -4939,16 +4619,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for tm_gmtoff in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:4943: checking for tm_gmtoff in struct tm\" >&5\n+echo \"configure:4623: checking for tm_gmtoff in struct tm\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4945 \"configure\"\n+#line 4625 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n struct tm tim; tim.tm_gmtoff = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:4952: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4632: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define STRUCT_TM_HAS_GMTOFF 1\n@@ -4961,16 +4641,16 @@ else\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n    echo $ac_n \"checking for global timezone variable\"\"... $ac_c\" 1>&6\n-echo \"configure:4965: checking for global timezone variable\" >&5\n+echo \"configure:4645: checking for global timezone variable\" >&5\n             cat > conftest.$ac_ext <<EOF\n-#line 4967 \"configure\"\n+#line 4647 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n long z2 = timezone;\n ; return 0; }\n EOF\n-if { (eval echo configure:4974: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4654: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_TIMEZONE 1\n@@ -4990,19 +4670,19 @@ rm -f conftest*\n # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4994: checking for working alloca.h\" >&5\n+echo \"configure:4674: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4999 \"configure\"\n+#line 4679 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:5006: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4686: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -5023,12 +4703,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:5027: checking for alloca\" >&5\n+echo \"configure:4707: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5032 \"configure\"\n+#line 4712 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -5056,7 +4736,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:5060: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4740: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -5088,12 +4768,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:5092: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:4772: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5097 \"configure\"\n+#line 4777 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -5118,12 +4798,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:5122: checking for $ac_func\" >&5\n+echo \"configure:4802: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5127 \"configure\"\n+#line 4807 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -5146,7 +4826,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5150: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4830: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -5173,15 +4853,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:5177: checking stack direction for C alloca\" >&5\n+echo \"configure:4857: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5185 \"configure\"\n+#line 4865 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -5200,7 +4880,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:5204: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4884: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -5227,7 +4907,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5231: checking for $ac_word\" >&5\n+echo \"configure:4911: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_PERL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5457,12 +5137,12 @@ s%@EXEEXT@%$EXEEXT%g\n s%@LIBGCJ_CFLAGS@%$LIBGCJ_CFLAGS%g\n s%@LIBGCJ_CXXFLAGS@%$LIBGCJ_CXXFLAGS%g\n s%@LIBGCJ_JAVAFLAGS@%$LIBGCJ_JAVAFLAGS%g\n-s%@LD@%$LD%g\n-s%@NM@%$NM%g\n-s%@USE_SYMBOL_UNDERSCORE@%$USE_SYMBOL_UNDERSCORE%g\n+s%@INCLTDL@%$INCLTDL%g\n+s%@LIBLTDL@%$LIBLTDL%g\n+s%@DIRLTDL@%$DIRLTDL%g\n s%@LN_S@%$LN_S%g\n-s%@DLLTOOL@%$DLLTOOL%g\n s%@LIBTOOL@%$LIBTOOL%g\n+s%@subdirs@%$subdirs%g\n s%@COMPPATH@%$COMPPATH%g\n s%@TESTSUBDIR_TRUE@%$TESTSUBDIR_TRUE%g\n s%@TESTSUBDIR_FALSE@%$TESTSUBDIR_FALSE%g\n@@ -5780,3 +5460,100 @@ chmod +x $CONFIG_STATUS\n rm -fr confdefs* $ac_clean_files\n test \"$no_create\" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1\n \n+if test \"$no_recursion\" != yes; then\n+\n+  # Remove --cache-file and --srcdir arguments so they do not pile up.\n+  ac_sub_configure_args=\n+  ac_prev=\n+  for ac_arg in $ac_configure_args; do\n+    if test -n \"$ac_prev\"; then\n+      ac_prev=\n+      continue\n+    fi\n+    case \"$ac_arg\" in\n+    -cache-file | --cache-file | --cache-fil | --cache-fi \\\n+    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)\n+      ac_prev=cache_file ;;\n+    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \\\n+    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)\n+      ;;\n+    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n+      ac_prev=srcdir ;;\n+    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n+      ;;\n+    *) ac_sub_configure_args=\"$ac_sub_configure_args $ac_arg\" ;;\n+    esac\n+  done\n+\n+  for ac_config_dir in $DIRLDL; do\n+\n+    # Do not complain, so a configure script can configure whichever\n+    # parts of a large source tree are present.\n+    if test ! -d $srcdir/$ac_config_dir; then\n+      continue\n+    fi\n+\n+    echo configuring in $ac_config_dir\n+\n+    case \"$srcdir\" in\n+    .) ;;\n+    *)\n+      if test -d ./$ac_config_dir || mkdir ./$ac_config_dir; then :;\n+      else\n+        { echo \"configure: error: can not create `pwd`/$ac_config_dir\" 1>&2; exit 1; }\n+      fi\n+      ;;\n+    esac\n+\n+    ac_popdir=`pwd`\n+    cd $ac_config_dir\n+\n+      # A \"../\" for each directory in /$ac_config_dir.\n+      ac_dots=`echo $ac_config_dir|sed -e 's%^\\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`\n+\n+    case \"$srcdir\" in\n+    .) # No --srcdir option.  We are building in place.\n+      ac_sub_srcdir=$srcdir ;;\n+    /*) # Absolute path.\n+      ac_sub_srcdir=$srcdir/$ac_config_dir ;;\n+    *) # Relative path.\n+      ac_sub_srcdir=$ac_dots$srcdir/$ac_config_dir ;;\n+    esac\n+\n+    # Check for guested configure; otherwise get Cygnus style configure.\n+    if test -f $ac_sub_srcdir/configure; then\n+      ac_sub_configure=$ac_sub_srcdir/configure\n+    elif test -f $ac_sub_srcdir/configure.in; then\n+      ac_sub_configure=$ac_configure\n+    else\n+      echo \"configure: warning: no configuration information is in $ac_config_dir\" 1>&2\n+      ac_sub_configure=\n+    fi\n+\n+    # The recursion is here.\n+    if test -n \"$ac_sub_configure\"; then\n+\n+      # Make the cache file name correct relative to the subdirectory.\n+      case \"$cache_file\" in\n+      /*) ac_sub_cache_file=$cache_file ;;\n+      *) # Relative path.\n+        ac_sub_cache_file=\"$ac_dots$cache_file\" ;;\n+      esac\n+  case \"$ac_given_INSTALL\" in\n+        [/$]*) INSTALL=\"$ac_given_INSTALL\" ;;\n+        *) INSTALL=\"$ac_dots$ac_given_INSTALL\" ;;\n+        esac\n+\n+      echo \"running ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir\"\n+      # The eval makes quoting arguments work.\n+      if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir\n+      then :\n+      else\n+        { echo \"configure: error: $ac_sub_configure failed for $ac_config_dir\" 1>&2; exit 1; }\n+      fi\n+    fi\n+\n+    cd $ac_popdir\n+  done\n+fi\n+"}, {"sha": "1994d2e831b766eefbc309e288c71bcff376fee1", "filename": "libjava/configure.in", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.in?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -17,7 +17,20 @@ LIBGCJ_CONFIGURE(.)\n \n AM_CONFIG_HEADER(include/config.h)\n \n+# Only use libltdl for native builds.\n+if test -z \"${with_cross_host}\"; then\n+   AC_LIBLTDL_CONVENIENCE\n+   AC_LIBTOOL_DLOPEN\n+   DIRLTDL=libltdl\n+   AC_DEFINE(USE_LTDL)\n+   # Sigh.  Libtool's macro doesn't do the right thing.\n+   INCLTDL=\"-I\\$(top_srcdir)/libltdl $INCLTDL\"\n+fi\n+AC_SUBST(INCLTDL)\n+AC_SUBST(LIBLTDL)\n+AC_SUBST(DIRLTDL)\n AM_PROG_LIBTOOL\n+AC_CONFIG_SUBDIRS($DIRLDL)\n \n if test -z \"$with_target_subdir\" || test \"$with_target_subdir\" = \".\"; then\n    COMPPATH=."}, {"sha": "4acb3dd076711b56ed16acb53bd32fc2f2dbbe0a", "filename": "libjava/gcj/Makefile.in", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fgcj%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fgcj%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgcj%2FMakefile.in?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -71,6 +71,7 @@ COMPPATH = @COMPPATH@\n CPP = @CPP@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n+DIRLTDL = @DIRLTDL@\n DIVIDESPEC = @DIVIDESPEC@\n DLLTOOL = @DLLTOOL@\n EH_COMMON_INCLUDE = @EH_COMMON_INCLUDE@\n@@ -82,16 +83,17 @@ GCINCS = @GCINCS@\n GCLIBS = @GCLIBS@\n GCOBJS = @GCOBJS@\n GCSPEC = @GCSPEC@\n-LD = @LD@\n+INCLTDL = @INCLTDL@\n LIBDATASTARTSPEC = @LIBDATASTARTSPEC@\n LIBGCJ_CFLAGS = @LIBGCJ_CFLAGS@\n LIBGCJ_CXXFLAGS = @LIBGCJ_CXXFLAGS@\n LIBGCJ_JAVAFLAGS = @LIBGCJ_JAVAFLAGS@\n+LIBLTDL = @LIBLTDL@\n LIBTOOL = @LIBTOOL@\n LN_S = @LN_S@\n MAINT = @MAINT@\n MAKEINFO = @MAKEINFO@\n-NM = @NM@\n+OBJDUMP = @OBJDUMP@\n PACKAGE = @PACKAGE@\n PERL = @PERL@\n RANLIB = @RANLIB@\n@@ -101,7 +103,6 @@ THREADINCS = @THREADINCS@\n THREADLIBS = @THREADLIBS@\n THREADOBJS = @THREADOBJS@\n THREADSPEC = @THREADSPEC@\n-USE_SYMBOL_UNDERSCORE = @USE_SYMBOL_UNDERSCORE@\n VERSION = @VERSION@\n ZDEPS = @ZDEPS@\n ZINCS = @ZINCS@"}, {"sha": "f60902e67b6d1b01aa8b6d7e7fc5a6d984245e33", "filename": "libjava/include/Makefile.in", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2FMakefile.in?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -71,6 +71,7 @@ COMPPATH = @COMPPATH@\n CPP = @CPP@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n+DIRLTDL = @DIRLTDL@\n DIVIDESPEC = @DIVIDESPEC@\n DLLTOOL = @DLLTOOL@\n EH_COMMON_INCLUDE = @EH_COMMON_INCLUDE@\n@@ -82,16 +83,17 @@ GCINCS = @GCINCS@\n GCLIBS = @GCLIBS@\n GCOBJS = @GCOBJS@\n GCSPEC = @GCSPEC@\n-LD = @LD@\n+INCLTDL = @INCLTDL@\n LIBDATASTARTSPEC = @LIBDATASTARTSPEC@\n LIBGCJ_CFLAGS = @LIBGCJ_CFLAGS@\n LIBGCJ_CXXFLAGS = @LIBGCJ_CXXFLAGS@\n LIBGCJ_JAVAFLAGS = @LIBGCJ_JAVAFLAGS@\n+LIBLTDL = @LIBLTDL@\n LIBTOOL = @LIBTOOL@\n LN_S = @LN_S@\n MAINT = @MAINT@\n MAKEINFO = @MAKEINFO@\n-NM = @NM@\n+OBJDUMP = @OBJDUMP@\n PACKAGE = @PACKAGE@\n PERL = @PERL@\n RANLIB = @RANLIB@\n@@ -101,7 +103,6 @@ THREADINCS = @THREADINCS@\n THREADLIBS = @THREADLIBS@\n THREADOBJS = @THREADOBJS@\n THREADSPEC = @THREADSPEC@\n-USE_SYMBOL_UNDERSCORE = @USE_SYMBOL_UNDERSCORE@\n VERSION = @VERSION@\n ZDEPS = @ZDEPS@\n ZINCS = @ZINCS@"}, {"sha": "4868dcc75ef5c08018deaa3184e79f511ae4ffdb", "filename": "libjava/include/config.h.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Finclude%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Finclude%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fconfig.h.in?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -142,6 +142,9 @@\n /* Define if getuid() and friends are missing.  */\n #undef NO_GETUID\n \n+/* Define if libltdl is in use.  */\n+#undef USE_LTDL\n+\n /* Define if you have the access function.  */\n #undef HAVE_ACCESS\n "}, {"sha": "8e8285c1e05b7dfd998c06d73e45d7b50651d805", "filename": "libjava/java/lang/Runtime.java", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fjava%2Flang%2FRuntime.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fjava%2Flang%2FRuntime.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FRuntime.java?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -1,6 +1,6 @@\n // Runtime.java - Runtime class.\n \n-/* Copyright (C) 1998, 1999  Cygnus Solutions\n+/* Copyright (C) 1998, 1999, 2000  Cygnus Solutions\n \n    This file is part of libgcj.\n \n@@ -97,6 +97,12 @@ private final void checkLink (String lib)\n   public native void load (String pathname);\n   public native void loadLibrary (String libname);\n \n+  // This is a helper function for the ClassLoader which can load\n+  // compiled libraries.  Returns true if library (which is just the\n+  // base name -- path searching is done by this function) was loaded,\n+  // false otherwise.\n+  native boolean loadLibraryInternal (String libname);\n+\n   public native void runFinalization ();\n \n   // This method is static in JDK 1.1, but isn't listed as static in"}, {"sha": "7f959ebd31283c4382962e07cea77118bbb1303d", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 31, "deletions": 56, "changes": 87, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -34,6 +34,7 @@ details.  */\n #include <java/lang/ClassCircularityError.h>\n #include <java/lang/IncompatibleClassChangeError.h>\n #include <java/lang/reflect/Modifier.h>\n+#include <java/lang/Runtime.h>\n \n #define CloneableClass _CL_Q34java4lang9Cloneable\n extern java::lang::Class CloneableClass;\n@@ -193,7 +194,35 @@ java::lang::ClassLoader::markClassErrorState0 (java::lang::Class *klass)\n jclass\n gnu::gcj::runtime::VMClassLoader::findSystemClass (jstring name)\n {\n-  return _Jv_FindClassInCache (_Jv_makeUtf8Const (name), 0);\n+  _Jv_Utf8Const *name_u = _Jv_makeUtf8Const (name);\n+  jclass klass = _Jv_FindClassInCache (name_u, 0);\n+\n+  if (! klass)\n+    {\n+      // Turn `gnu.pkg.quux' into `gnu-pkg-quux'.  Then search for a\n+      // module named (eg, on Linux) `gnu-pkg-quux.so', followed by\n+      // `gnu-pkg.so' and `gnu.so'.  If loading one of these causes\n+      // the class to appear in the cache, then use it.\n+      jstring so_base_name = name->replace ('.', '-');\n+\n+      while (! klass && so_base_name && so_base_name->length() > 0)\n+\t{\n+\t  using namespace ::java::lang;\n+\t  Runtime *rt = Runtime::getRuntime();\n+\t  jboolean loaded = rt->loadLibraryInternal (so_base_name);\n+\n+\t  jint nd = so_base_name->lastIndexOf ('-');\n+\t  if (nd == -1)\n+\t    so_base_name = NULL;\n+\t  else\n+\t    so_base_name = so_base_name->substring (0, nd);\n+\n+\t  if (loaded)\n+\t    klass = _Jv_FindClassInCache (name_u, 0);\n+\t}\n+    }\n+\n+  return klass;\n }\n \n jclass\n@@ -403,31 +432,11 @@ _Jv_RegisterClass (jclass klass)\n   _Jv_RegisterClasses (classes);\n }\n \n-#if 0\n-// NOTE: this one is out of date with the new loader stuff...\n jclass\n-_Jv_FindClassInCache (jstring name, java::lang::ClassLoader *loader)\n-{\n-  JvSynchronize sync (&ClassClass);\n-  jint hash = name->hashCode();\n-  jclass klass = loaded_classes[(_Jv_ushort) hash % HASH_LEN];\n-  for ( ; klass; klass = klass->next)\n-    {\n-      if (loader == klass->loader\n-\t  && _Jv_equal (klass->name, name, hash))\n-\tbreak;\n-    }\n-  _Jv_MonitorExit (&ClassClass);\n-  return klass;\n-}\n-#endif\n-\n-jclass _Jv_FindClass (_Jv_Utf8Const *name,\n-\t\t      java::lang::ClassLoader *loader)\n+_Jv_FindClass (_Jv_Utf8Const *name, java::lang::ClassLoader *loader)\n {\n   jclass klass = _Jv_FindClassInCache (name, loader);\n \n-#ifdef INTERPRETER\n   if (! klass)\n     {\n       jstring sname = _Jv_NewStringUTF (name->data);\n@@ -466,44 +475,10 @@ jclass _Jv_FindClass (_Jv_Utf8Const *name,\n       // we're loading, so that they can refer to themselves. \n       _Jv_WaitForState (klass, JV_STATE_LOADED);\n     }\n-#endif\n \n   return klass;\n }\n \n-#if 0\n-// NOTE: this one is out of date with the new class loader stuff...\n-jclass\n-_Jv_FindClass (jstring name, java::lang::ClassLoader *loader)\n-{\n-  jclass klass = _Jv_FindClassInCache (name, loader);\n-  if (! klass)\n-    {\n-      if (loader)\n-\t{\n-\t  klass = loader->loadClass(name);\n-\t}\n-      else\n-\t{\n-\t  // jmspec 5.3.1.2\n-\t  \n-\t  // delegate to the system loader\n-\t  klass = java::lang::ClassLoader::system.loadClass (sname);\n-\t  \n-\t  // register that we're an initiating loader\n-\t  if (klass)\n-\t    _Jv_RegisterInitiatingLoader (klass, 0);\n-\t}\n-    }\n-  else\n-    {\n-      _Jv_WaitForState (klass, JV_STATE_LOADED);\n-    }\n-  \n-  return klass;\n-}\n-#endif\n-\n jclass\n _Jv_NewClass (_Jv_Utf8Const *name, jclass superclass,\n \t      java::lang::ClassLoader *loader)"}, {"sha": "e0ec95f50e6e5bcbcd0e84b0d2ccb40f63114bba", "filename": "libjava/java/lang/natRuntime.cc", "status": "modified", "additions": 33, "deletions": 3, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fjava%2Flang%2FnatRuntime.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Fjava%2Flang%2FnatRuntime.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatRuntime.cc?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -1,6 +1,6 @@\n // natRuntime.cc - Implementation of native side of Runtime class.\n \n-/* Copyright (C) 1998, 1999  Cygnus Solutions\n+/* Copyright (C) 1998, 1999, 2000  Cygnus Solutions\n \n    This file is part of libgcj.\n \n@@ -20,6 +20,10 @@ details.  */\n \n #ifdef USE_LTDL\n #include <ltdl.h>\n+\n+/* FIXME: we don't always need this.  The next libtool will let us use\n+   AC_LTDL_PREOPEN to see if we do.  */\n+const lt_dlsymlist lt_preloaded_symbols[1] = { { 0, 0 } };\n #endif\n \n void\n@@ -56,8 +60,12 @@ java::lang::Runtime::load (jstring path)\n   checkLink (path);\n   using namespace java::lang;\n #ifdef USE_LTDL\n+  jint len = _Jv_GetStringUTFLength (path);\n+  char buf[len + 1];\n+  jsize total = JvGetStringUTFRegion (path, 0, path->length(), buf);\n+  buf[total] = '\\0';\n   // FIXME: make sure path is absolute.\n-  lt_dlhandle h = lt_dlopen (FIXME);\n+  lt_dlhandle h = lt_dlopen (buf);\n   if (h == NULL)\n     {\n       const char *msg = lt_dlerror ();\n@@ -76,8 +84,12 @@ java::lang::Runtime::loadLibrary (jstring lib)\n   checkLink (lib);\n   using namespace java::lang;\n #ifdef USE_LTDL\n+  jint len = _Jv_GetStringUTFLength (lib);\n+  char buf[len + 1];\n+  jsize total = JvGetStringUTFRegion (lib, 0, lib->length(), buf);\n+  buf[total] = '\\0';\n   // FIXME: make sure path is absolute.\n-  lt_dlhandle h = lt_dlopenext (FIXME);\n+  lt_dlhandle h = lt_dlopenext (buf);\n   if (h == NULL)\n     {\n       const char *msg = lt_dlerror ();\n@@ -89,6 +101,24 @@ java::lang::Runtime::loadLibrary (jstring lib)\n #endif /* USE_LTDL */\n }\n \n+jboolean\n+java::lang::Runtime::loadLibraryInternal (jstring lib)\n+{\n+  JvSynchronize sync (this);\n+  using namespace java::lang;\n+#ifdef USE_LTDL\n+  jint len = _Jv_GetStringUTFLength (lib);\n+  char buf[len + 1];\n+  jsize total = JvGetStringUTFRegion (lib, 0, lib->length(), buf);\n+  buf[total] = '\\0';\n+  // FIXME: make sure path is absolute.\n+  lt_dlhandle h = lt_dlopenext (buf);\n+  return h != NULL;\n+#else\n+  return false;\n+#endif /* USE_LTDL */\n+}\n+\n void\n java::lang::Runtime::init (void)\n {"}, {"sha": "57cf223f4a982806d3a98eea6e41581a2c725145", "filename": "libjava/testsuite/Makefile.in", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af85558553980230b15cc7df9288ed0718af73c/libjava%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FMakefile.in?ref=7af85558553980230b15cc7df9288ed0718af73c", "patch": "@@ -71,6 +71,7 @@ COMPPATH = @COMPPATH@\n CPP = @CPP@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n+DIRLTDL = @DIRLTDL@\n DIVIDESPEC = @DIVIDESPEC@\n DLLTOOL = @DLLTOOL@\n EH_COMMON_INCLUDE = @EH_COMMON_INCLUDE@\n@@ -82,16 +83,17 @@ GCINCS = @GCINCS@\n GCLIBS = @GCLIBS@\n GCOBJS = @GCOBJS@\n GCSPEC = @GCSPEC@\n-LD = @LD@\n+INCLTDL = @INCLTDL@\n LIBDATASTARTSPEC = @LIBDATASTARTSPEC@\n LIBGCJ_CFLAGS = @LIBGCJ_CFLAGS@\n LIBGCJ_CXXFLAGS = @LIBGCJ_CXXFLAGS@\n LIBGCJ_JAVAFLAGS = @LIBGCJ_JAVAFLAGS@\n+LIBLTDL = @LIBLTDL@\n LIBTOOL = @LIBTOOL@\n LN_S = @LN_S@\n MAINT = @MAINT@\n MAKEINFO = @MAKEINFO@\n-NM = @NM@\n+OBJDUMP = @OBJDUMP@\n PACKAGE = @PACKAGE@\n PERL = @PERL@\n RANLIB = @RANLIB@\n@@ -101,7 +103,6 @@ THREADINCS = @THREADINCS@\n THREADLIBS = @THREADLIBS@\n THREADOBJS = @THREADOBJS@\n THREADSPEC = @THREADSPEC@\n-USE_SYMBOL_UNDERSCORE = @USE_SYMBOL_UNDERSCORE@\n VERSION = @VERSION@\n ZDEPS = @ZDEPS@\n ZINCS = @ZINCS@"}]}