{"sha": "755cf781f2eb3a6317af90bf3b12206b0fc54a96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU1Y2Y3ODFmMmViM2E2MzE3YWY5MGJmM2IxMjIwNmIwZmM1NGE5Ng==", "commit": {"author": {"name": "Jim Wilson", "email": "jimw@sifive.com", "date": "2020-12-10T02:57:32Z"}, "committer": {"name": "Jim Wilson", "email": "jimw@sifive.com", "date": "2020-12-11T19:14:22Z"}, "message": "Add missing varasm DECL_P check.\n\nThis fixes a riscv64-linux bootstrap failure.\n\nget_constant_section calls the select_section target hook, and select_section\ncalls get_named_section which calls get_section.  So it is possible to have\na constant not a decl in both of these functions.  They already call DECL_P\nchecks everywhere except for the new code HJ recently added.  This adds the\nmissing DECL_P check.\n\n\tgcc/\n\t* varasm.c (get_section): Add DECL_P check before DECL_PRESERVE_P.", "tree": {"sha": "f26580128560e2ae086cf874dcb0a9db0e67017e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f26580128560e2ae086cf874dcb0a9db0e67017e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/755cf781f2eb3a6317af90bf3b12206b0fc54a96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/755cf781f2eb3a6317af90bf3b12206b0fc54a96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/755cf781f2eb3a6317af90bf3b12206b0fc54a96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/755cf781f2eb3a6317af90bf3b12206b0fc54a96/comments", "author": null, "committer": null, "parents": [{"sha": "35af87784e02c8c89f020092d91858fe066788f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35af87784e02c8c89f020092d91858fe066788f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35af87784e02c8c89f020092d91858fe066788f0"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "5b2e123b0da470a96a0e334108424a60234cd4db", "filename": "gcc/varasm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/755cf781f2eb3a6317af90bf3b12206b0fc54a96/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/755cf781f2eb3a6317af90bf3b12206b0fc54a96/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=755cf781f2eb3a6317af90bf3b12206b0fc54a96", "patch": "@@ -294,6 +294,7 @@ get_section (const char *name, unsigned int flags, tree decl,\n   flags |= SECTION_NAMED;\n   if (HAVE_GAS_SHF_GNU_RETAIN\n       && decl != nullptr\n+      && DECL_P (decl)\n       && DECL_PRESERVE_P (decl))\n     flags |= SECTION_RETAIN;\n   if (*slot == NULL)"}]}