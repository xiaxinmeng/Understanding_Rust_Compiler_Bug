{"sha": "45be7610383af22b552ab7b2d0fa0e1d632c66f0", "node_id": "C_kwDOANBUbNoAKDQ1YmU3NjEwMzgzYWYyMmI1NTJhYjdiMmQwZmEwZTFkNjMyYzY2ZjA", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2021-11-21T19:26:32Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-12-02T16:26:20Z"}, "message": "[Ada] More intuitive names in sanity-checking of derived types\n\ngcc/ada/\n\n\t* sem_ch3.adb (Check_Derived_Type): Rename local variables; fix\n\tstyle in comment.", "tree": {"sha": "079d1223a6bef37a1fa929f2e706facf0f0807b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/079d1223a6bef37a1fa929f2e706facf0f0807b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45be7610383af22b552ab7b2d0fa0e1d632c66f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45be7610383af22b552ab7b2d0fa0e1d632c66f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45be7610383af22b552ab7b2d0fa0e1d632c66f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45be7610383af22b552ab7b2d0fa0e1d632c66f0/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40b180995ab1b2b6748d5eb217d8fbfd21b4a51b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40b180995ab1b2b6748d5eb217d8fbfd21b4a51b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40b180995ab1b2b6748d5eb217d8fbfd21b4a51b"}], "stats": {"total": 48, "additions": 24, "deletions": 24}, "files": [{"sha": "02066e470c890d0979e059caa3e6ccb19578d556", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 24, "deletions": 24, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45be7610383af22b552ab7b2d0fa0e1d632c66f0/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45be7610383af22b552ab7b2d0fa0e1d632c66f0/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=45be7610383af22b552ab7b2d0fa0e1d632c66f0", "patch": "@@ -16369,12 +16369,12 @@ package body Sem_Ch3 is\n       ------------------------\n \n       function Check_Derived_Type return Boolean is\n-         E        : Entity_Id;\n-         Elmt     : Elmt_Id;\n-         List     : Elist_Id;\n-         New_Subp : Entity_Id;\n-         Op_Elmt  : Elmt_Id;\n-         Subp     : Entity_Id;\n+         E            : Entity_Id;\n+         Derived_Elmt : Elmt_Id;\n+         Derived_Op   : Entity_Id;\n+         Derived_Ops  : Elist_Id;\n+         Parent_Elmt  : Elmt_Id;\n+         Parent_Op    : Entity_Id;\n \n       begin\n          --  Traverse list of entities in the current scope searching for\n@@ -16389,53 +16389,53 @@ package body Sem_Ch3 is\n                --  Disable this test if Derived_Type completes an incomplete\n                --  type because in such case more primitives can be added\n                --  later to the list of primitives of Derived_Type by routine\n-               --  Process_Incomplete_Dependents\n+               --  Process_Incomplete_Dependents.\n \n                return True;\n             end if;\n \n             Next_Entity (E);\n          end loop;\n \n-         List := Collect_Primitive_Operations (Derived_Type);\n-         Elmt := First_Elmt (List);\n+         Derived_Ops := Collect_Primitive_Operations (Derived_Type);\n \n-         Op_Elmt := First_Elmt (Op_List);\n-         while Present (Op_Elmt) loop\n-            Subp     := Node (Op_Elmt);\n-            New_Subp := Node (Elmt);\n+         Derived_Elmt := First_Elmt (Derived_Ops);\n+         Parent_Elmt  := First_Elmt (Op_List);\n+         while Present (Parent_Elmt) loop\n+            Parent_Op  := Node (Parent_Elmt);\n+            Derived_Op := Node (Derived_Elmt);\n \n             --  At this early stage Derived_Type has no entities with attribute\n             --  Interface_Alias. In addition, such primitives are always\n             --  located at the end of the list of primitives of Parent_Type.\n             --  Therefore, if found we can safely stop processing pending\n             --  entities.\n \n-            exit when Present (Interface_Alias (Subp));\n+            exit when Present (Interface_Alias (Parent_Op));\n \n             --  Handle hidden entities\n \n-            if not Is_Predefined_Dispatching_Operation (Subp)\n-              and then Is_Hidden (Subp)\n+            if not Is_Predefined_Dispatching_Operation (Parent_Op)\n+              and then Is_Hidden (Parent_Op)\n             then\n-               if Present (New_Subp)\n-                 and then Primitive_Names_Match (Subp, New_Subp)\n+               if Present (Derived_Op)\n+                 and then Primitive_Names_Match (Parent_Op, Derived_Op)\n                then\n-                  Next_Elmt (Elmt);\n+                  Next_Elmt (Derived_Elmt);\n                end if;\n \n             else\n-               if not Present (New_Subp)\n-                 or else Ekind (Subp) /= Ekind (New_Subp)\n-                 or else not Primitive_Names_Match (Subp, New_Subp)\n+               if No (Derived_Op)\n+                 or else Ekind (Parent_Op) /= Ekind (Derived_Op)\n+                 or else not Primitive_Names_Match (Parent_Op, Derived_Op)\n                then\n                   return False;\n                end if;\n \n-               Next_Elmt (Elmt);\n+               Next_Elmt (Derived_Elmt);\n             end if;\n \n-            Next_Elmt (Op_Elmt);\n+            Next_Elmt (Parent_Elmt);\n          end loop;\n \n          return True;"}]}