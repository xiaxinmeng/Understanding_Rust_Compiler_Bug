{"sha": "6f6733591efa0cc65086a6cd9de20bb0752bdc7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY2NzMzNTkxZWZhMGNjNjUwODZhNmNkOWRlMjBiYjA3NTJiZGM3YQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-10-12T23:05:49Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-10-12T23:05:49Z"}, "message": "(mips_expand_prologue): Handle types that need constructing.\n\n(mips_expand_prologue): Handle types that need\nconstructing.  Rename TYPE to PASSED_TYPE and use consistently.\n\nFrom-SVN: r8264", "tree": {"sha": "4b23f173ff23df1ca4ca692b96fb8885015e397f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4b23f173ff23df1ca4ca692b96fb8885015e397f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f6733591efa0cc65086a6cd9de20bb0752bdc7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f6733591efa0cc65086a6cd9de20bb0752bdc7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f6733591efa0cc65086a6cd9de20bb0752bdc7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f6733591efa0cc65086a6cd9de20bb0752bdc7a/comments", "author": null, "committer": null, "parents": [{"sha": "252b87c7a671f1369d22bb2e27cb14886989a8cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/252b87c7a671f1369d22bb2e27cb14886989a8cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/252b87c7a671f1369d22bb2e27cb14886989a8cc"}], "stats": {"total": 24, "additions": 13, "deletions": 11}, "files": [{"sha": "d2fc7f47131c96c6260b1b67e021b78bd3119a57", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 13, "deletions": 11, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f6733591efa0cc65086a6cd9de20bb0752bdc7a/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f6733591efa0cc65086a6cd9de20bb0752bdc7a/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=6f6733591efa0cc65086a6cd9de20bb0752bdc7a", "patch": "@@ -4802,20 +4802,25 @@ mips_expand_prologue ()\n \n   for (cur_arg = fnargs; cur_arg != (tree)0; cur_arg = next_arg)\n     {\n-      tree type = DECL_ARG_TYPE (cur_arg);\n-      enum machine_mode passed_mode = TYPE_MODE (type);\n-      rtx entry_parm = FUNCTION_ARG (args_so_far,\n-\t\t\t\t     passed_mode,\n-\t\t\t\t     DECL_ARG_TYPE (cur_arg),\n-\t\t\t\t     1);\n+      tree passed_type = DECL_ARG_TYPE (cur_arg);\n+      enum machine_mode passed_mode = TYPE_MODE (passed_type);\n+      rtx entry_parm;\n+\n+      if (TYPE_NEEDS_CONSTRUCTING (passed_type))\n+\t{\n+\t  passed_type = build_pointer_type (passed_type);\n+\t  passed_mode = Pmode;\n+\t}\n+\n+      entry_parm = FUNCTION_ARG (args_so_far, passed_mode, passed_type, 1);\n \n       if (entry_parm)\n \t{\n \t  int words;\n \n \t  /* passed in a register, so will get homed automatically */\n \t  if (GET_MODE (entry_parm) == BLKmode)\n-\t    words = (int_size_in_bytes (type) + 3) / 4;\n+\t    words = (int_size_in_bytes (passed_type) + 3) / 4;\n \t  else\n \t    words = (GET_MODE_SIZE (GET_MODE (entry_parm)) + 3) / 4;\n \n@@ -4827,10 +4832,7 @@ mips_expand_prologue ()\n \t  break;\n \t}\n \n-      FUNCTION_ARG_ADVANCE (args_so_far,\n-\t\t\t    passed_mode,\n-\t\t\t    DECL_ARG_TYPE (cur_arg),\n-\t\t\t    1);\n+      FUNCTION_ARG_ADVANCE (args_so_far, passed_mode, passed_type, 1);\n \n       next_arg = TREE_CHAIN (cur_arg);\n       if (next_arg == (tree)0)"}]}