{"sha": "9cd72574bcdf3fb8ec5bf203a4968aae8c321eae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWNkNzI1NzRiY2RmM2ZiOGVjNWJmMjAzYTQ5NjhhYWU4YzMyMWVhZQ==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2011-01-17T05:48:10Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2011-01-17T05:48:10Z"}, "message": "PR47296 Segfault when running out of file descriptors\n\nFrom-SVN: r168888", "tree": {"sha": "2dfa4f7e5bab4c7c2953b9e4aa9c0005366a126f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2dfa4f7e5bab4c7c2953b9e4aa9c0005366a126f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae/comments", "author": null, "committer": null, "parents": [{"sha": "124b5e3620753f9829b81b92cc2b1fa3a7fe9762", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/124b5e3620753f9829b81b92cc2b1fa3a7fe9762", "html_url": "https://github.com/Rust-GCC/gccrs/commit/124b5e3620753f9829b81b92cc2b1fa3a7fe9762"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "cab2d1501e0ab5a62aa3a04792202e25c5755174", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=9cd72574bcdf3fb8ec5bf203a4968aae8c321eae", "patch": "@@ -1,3 +1,9 @@\n+2011-01-17  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR libfortran/47296\n+\t* io/unix.c (tempfile): Set opp->file and opp->file_len also if an\n+\terror occurs.\n+\n 2011-01-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR fortran/46625"}, {"sha": "fa64e20b02662b2f28284059d659cb576bbad0f6", "filename": "libgfortran/io/unix.c", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae/libgfortran%2Fio%2Funix.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9cd72574bcdf3fb8ec5bf203a4968aae8c321eae/libgfortran%2Fio%2Funix.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funix.c?ref=9cd72574bcdf3fb8ec5bf203a4968aae8c321eae", "patch": "@@ -1,4 +1,5 @@\n-/* Copyright (C) 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n+/* Copyright (C) 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n+   2011\n    Free Software Foundation, Inc.\n    Contributed by Andy Vaught\n    F2003 I/O support contributed by Jerry DeLisle\n@@ -1084,13 +1085,8 @@ tempfile (st_parameter_open *opp)\n   while (fd == -1 && errno == EEXIST);\n #endif /* HAVE_MKSTEMP */\n \n-  if (fd < 0)\n-    free (template);\n-  else\n-    {\n-      opp->file = template;\n-      opp->file_len = strlen (template);\t/* Don't include trailing nul */\n-    }\n+  opp->file = template;\n+  opp->file_len = strlen (template);\t/* Don't include trailing nul */\n \n   return fd;\n }"}]}