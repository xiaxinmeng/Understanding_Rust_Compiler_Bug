{"sha": "6e1a435df002c87da258a71a64a43720b17d1631", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmUxYTQzNWRmMDAyYzg3ZGEyNThhNzFhNjRhNDM3MjBiMTdkMTYzMQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-03-17T20:34:36Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-03-17T20:34:36Z"}, "message": "re PR other/5874 (gcc-3.1 20020304 (prerelease) FAILs in libjava testsuite with RUNTESTFLAGS=\"--target_board 'unix{-fPIC,-fpic,}'\")\n\n\t* libjava.jni/jni.exp (gcj_jni_build_header): Use local_exec, not\n\ttarget_compile.  Fixes PR other/5874.\n\nFrom-SVN: r50923", "tree": {"sha": "1d54de9ae106f579674e911763cfe9a9066565da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d54de9ae106f579674e911763cfe9a9066565da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e1a435df002c87da258a71a64a43720b17d1631", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e1a435df002c87da258a71a64a43720b17d1631", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e1a435df002c87da258a71a64a43720b17d1631", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e1a435df002c87da258a71a64a43720b17d1631/comments", "author": null, "committer": null, "parents": [{"sha": "804db0c6df9776632d7611eaec001c6113d0f8e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/804db0c6df9776632d7611eaec001c6113d0f8e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/804db0c6df9776632d7611eaec001c6113d0f8e5"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "fe5ed13786e70bf33a45b576c7ca559a8bdc3dc6", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e1a435df002c87da258a71a64a43720b17d1631/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e1a435df002c87da258a71a64a43720b17d1631/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=6e1a435df002c87da258a71a64a43720b17d1631", "patch": "@@ -1,3 +1,8 @@\n+2002-03-17  Tom Tromey  <tromey@redhat.com>\n+\n+\t* libjava.jni/jni.exp (gcj_jni_build_header): Use local_exec, not\n+\ttarget_compile.  Fixes PR other/5874.\n+\n 2002-03-15  Eric Blake  <ebb9@email.byu.edu>\n \n \tFor PR java/5902:"}, {"sha": "8dd8b8af049c3840d686101de2bb951bad96e012", "filename": "libjava/testsuite/libjava.jni/jni.exp", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e1a435df002c87da258a71a64a43720b17d1631/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e1a435df002c87da258a71a64a43720b17d1631/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp?ref=6e1a435df002c87da258a71a64a43720b17d1631", "patch": "@@ -30,11 +30,10 @@ proc gcj_jni_compile_c_to_so {file {options {}}} {\n proc gcj_jni_build_header {file} {\n   set gcjh [find_gcjh]\n   set file [file rootname $file]\n-  set options [list \"compiler=$gcjh\" \\\n-\t\t \"additional_flags=-jni\"]\n-  set x [prune_warnings [target_compile $file \"\" none $options]]\n+  set x [string trim [prune_warnings \\\n+\t\t\t[lindex [local_exec \"$gcjh -jni $file\" \"\" \"\" 300] 1]]]\n   if {$x != \"\"} {\n-    verbose \"target_compile failed: $x\" 2\n+    verbose \"local_exec failed: $x\" 2\n     fail \"$file header generation\"\n     return 0\n   }"}]}