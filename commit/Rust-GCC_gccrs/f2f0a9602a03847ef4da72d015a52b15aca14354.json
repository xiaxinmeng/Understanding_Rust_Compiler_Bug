{"sha": "f2f0a9602a03847ef4da72d015a52b15aca14354", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjJmMGE5NjAyYTAzODQ3ZWY0ZGE3MmQwMTVhNTJiMTVhY2ExNDM1NA==", "commit": {"author": {"name": "Hui-May Chang", "email": "hm.chang@apple.com", "date": "2007-05-29T22:49:42Z"}, "committer": {"name": "Hui-May Chang", "email": "hmchang@gcc.gnu.org", "date": "2007-05-29T22:49:42Z"}, "message": "i386.c (ix86_function_regparm): Added checking of ix86_force_align_arg_pointer to determine the number of...\n\n\t* config/i386/i386.c (ix86_function_regparm): Added checking of \n\tix86_force_align_arg_pointer to determine the number of\n\tregister parameters.\n\t* gcc.target/i386/stack-realign.c: New.\n\nFrom-SVN: r125173", "tree": {"sha": "b448a9e3d24b0f17725eff5b9708233f7a6f4ae9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b448a9e3d24b0f17725eff5b9708233f7a6f4ae9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2f0a9602a03847ef4da72d015a52b15aca14354", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2f0a9602a03847ef4da72d015a52b15aca14354", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2f0a9602a03847ef4da72d015a52b15aca14354", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2f0a9602a03847ef4da72d015a52b15aca14354/comments", "author": null, "committer": null, "parents": [{"sha": "5417e0224b5fef840b1faa50c43dc660579e4f7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5417e0224b5fef840b1faa50c43dc660579e4f7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5417e0224b5fef840b1faa50c43dc660579e4f7b"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "8dca30713986e40a4a9be6e9048b81308c040412", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f2f0a9602a03847ef4da72d015a52b15aca14354", "patch": "@@ -1,3 +1,8 @@\n+2007-05-29  Hui-May Chang  <hm.chang@apple.com>\n+\t* config/i386/i386.c (ix86_function_regparm): Added checking of \n+\tix86_force_align_arg_pointer to determine the number of\n+\tregister parameters.\n+\n 2007-05-29  Zdenek Dvorak  <dvorakz@suse.cz>\n \n \t* tree-vectorizer.h (DR_MISALIGNMENT): Cast aux to integer."}, {"sha": "51d7afe94bf445f74cf457da10c620d5ba9a15ec", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=f2f0a9602a03847ef4da72d015a52b15aca14354", "patch": "@@ -2837,7 +2837,8 @@ ix86_function_regparm (tree type, tree decl)\n \t  /* We can't use regparm(3) for nested functions as these use\n \t     static chain pointer in third argument.  */\n \t  if (local_regparm == 3\n-\t      && decl_function_context (decl)\n+\t      && (decl_function_context (decl)\n+                  || ix86_force_align_arg_pointer)\n \t      && !DECL_NO_STATIC_CHAIN (decl))\n \t    local_regparm = 2;\n "}, {"sha": "8ed7efef2fab24f8f89f87d49433ef265269bffd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f2f0a9602a03847ef4da72d015a52b15aca14354", "patch": "@@ -1,3 +1,7 @@\n+2007-05-29  Hui-May Chang  <hm.chang@apple.com>\n+\n+\t* gcc.target/i386/stack-realign.c: New.\n+\n 2007-05-29  Zdenek Dvorak  <dvorakz@suse.cz>\n \n \t* gcc.dg/tree-ssa/prefetch-6.c: New test."}, {"sha": "75054e09c7ecc42280b6869e624a8a638352daae", "filename": "gcc/testsuite/gcc.target/i386/stack-realign.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fstack-realign.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f0a9602a03847ef4da72d015a52b15aca14354/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fstack-realign.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fstack-realign.c?ref=f2f0a9602a03847ef4da72d015a52b15aca14354", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do run { target { { i?86-*-* x86_64-*-* } && ilp32 } } } */\n+/* { dg-options \"-mstackrealign -O2\" } */\n+\n+extern void abort (void);\n+\n+__attribute__((noinline)) static void foo (int i1, int i2, int i3)\n+{\n+  if (i3 != 3)\n+    abort ();\n+}\n+\n+int main (int argc, char **argv)\n+{\n+  foo (1, 2, 3);\n+  return 0;\n+}"}]}