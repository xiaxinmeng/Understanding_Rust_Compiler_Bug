{"sha": "3ba99d8a035e95aa93eb2fc56739f63c36582213", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2JhOTlkOGEwMzVlOTVhYTkzZWIyZmM1NjczOWY2M2MzNjU4MjIxMw==", "commit": {"author": {"name": "Ilya Enkovich", "email": "ilya.enkovich@intel.com", "date": "2015-04-09T10:11:30Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-04-09T10:11:30Z"}, "message": "mpx_wrappers.c (__mpx_wrapper_memmove): Add zero length check.\n\nlibmpx/\n\n\t* mpxwrap/mpx_wrappers.c (__mpx_wrapper_memmove): Add\n\tzero length check.\n\ngcc/testsuite/\n\n\t* gcc.target/i386/mpx/memmove-zero-length.c: New.\n\nFrom-SVN: r221944", "tree": {"sha": "197c099455b92c4fccdc2a89f6f4d5cbb0d7ae2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/197c099455b92c4fccdc2a89f6f4d5cbb0d7ae2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ba99d8a035e95aa93eb2fc56739f63c36582213", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ba99d8a035e95aa93eb2fc56739f63c36582213", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ba99d8a035e95aa93eb2fc56739f63c36582213", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ba99d8a035e95aa93eb2fc56739f63c36582213/comments", "author": {"login": "ienkovich", "id": 18308708, "node_id": "MDQ6VXNlcjE4MzA4NzA4", "avatar_url": "https://avatars.githubusercontent.com/u/18308708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ienkovich", "html_url": "https://github.com/ienkovich", "followers_url": "https://api.github.com/users/ienkovich/followers", "following_url": "https://api.github.com/users/ienkovich/following{/other_user}", "gists_url": "https://api.github.com/users/ienkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ienkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ienkovich/subscriptions", "organizations_url": "https://api.github.com/users/ienkovich/orgs", "repos_url": "https://api.github.com/users/ienkovich/repos", "events_url": "https://api.github.com/users/ienkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/ienkovich/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "54414978ae4085ffce4bb00d802e29e35ed6d6b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54414978ae4085ffce4bb00d802e29e35ed6d6b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54414978ae4085ffce4bb00d802e29e35ed6d6b3"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "90e467abb41cdea6e99529e031aff25d6054f82a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ba99d8a035e95aa93eb2fc56739f63c36582213/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ba99d8a035e95aa93eb2fc56739f63c36582213/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3ba99d8a035e95aa93eb2fc56739f63c36582213", "patch": "@@ -1,3 +1,7 @@\n+2015-04-09  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\t* gcc.target/i386/mpx/memmove-zero-length.c: New.\n+\n 2015-04-09  Kirill Yukhin  <kirill.yukhin@intel.com>\n \n \tPR target/65676"}, {"sha": "78bfdebff03039c6c26a73789d3f1985263ea8d1", "filename": "gcc/testsuite/gcc.target/i386/mpx/memmove-zero-length.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ba99d8a035e95aa93eb2fc56739f63c36582213/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fmemmove-zero-length.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ba99d8a035e95aa93eb2fc56739f63c36582213/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fmemmove-zero-length.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fmemmove-zero-length.c?ref=3ba99d8a035e95aa93eb2fc56739f63c36582213", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do run } */\n+/* { dg-options \"-fcheck-pointer-bounds -mmpx\" } */\n+\n+\n+#include \"mpx-check.h\"\n+#include \"string.h\"\n+\n+int mpx_test (int argc, const char **argv)\n+{\n+  int *buf = (int *)malloc (100 * sizeof(int));\n+\n+  memmove (buf, NULL, 0);\n+  memmove (NULL, buf, 0);\n+\n+  free (buf);\n+\n+  return 0;\n+}"}, {"sha": "56c3c5f1b2b688a659ee03c0c426a370f10e7216", "filename": "libmpx/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ba99d8a035e95aa93eb2fc56739f63c36582213/libmpx%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ba99d8a035e95aa93eb2fc56739f63c36582213/libmpx%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmpx%2FChangeLog?ref=3ba99d8a035e95aa93eb2fc56739f63c36582213", "patch": "@@ -1,3 +1,8 @@\n+2015-04-09  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\t* mpxwrap/mpx_wrappers.c (__mpx_wrapper_memmove): Add\n+\tzero length check.\n+\n 2015-04-02  Ilya Enkovich  <ilya.enkovich@intel.com>\n \n \tPR driver/65444"}, {"sha": "58670aae4819e21027dfda5fee9c601ddb611af9", "filename": "libmpx/mpxwrap/mpx_wrappers.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ba99d8a035e95aa93eb2fc56739f63c36582213/libmpx%2Fmpxwrap%2Fmpx_wrappers.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ba99d8a035e95aa93eb2fc56739f63c36582213/libmpx%2Fmpxwrap%2Fmpx_wrappers.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmpx%2Fmpxwrap%2Fmpx_wrappers.c?ref=3ba99d8a035e95aa93eb2fc56739f63c36582213", "patch": "@@ -97,6 +97,9 @@ __mpx_wrapper_memmove (void *dst, const void *src, size_t n)\n   size_t offset_src = ((size_t) s) & (sizeof (void *) - 1);\n   size_t offset_dst = ((size_t) d) & (sizeof (void *) - 1);\n \n+  if (n == 0)\n+    return ret;\n+\n   __bnd_chk_ptr_bounds (dst, n);\n   __bnd_chk_ptr_bounds (src, n);\n "}]}