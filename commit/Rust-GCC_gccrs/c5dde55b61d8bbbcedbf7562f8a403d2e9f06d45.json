{"sha": "c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzVkZGU1NWI2MWQ4YmJiY2VkYmY3NTYyZjhhNDAzZDJlOWYwNmQ0NQ==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2006-03-02T10:01:21Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2006-03-02T10:01:21Z"}, "message": "config.gcc (default_use_cxa_atexit): Extend the description of this configure variable.\n\n* config.gcc (default_use_cxa_atexit): Extend the description of\n  this configure variable.  Set its default value to \"yes\" for\n  Linux, NetBSD and ELF targets on the assumption that they will\n  use C libraries with the __cxa_atexit function.\n\nFrom-SVN: r111636", "tree": {"sha": "a9383057ec023d79c9b4ec53c552aadf810a745e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a9383057ec023d79c9b4ec53c552aadf810a745e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7533450810c6be6aa4ae7eeec6062b6fb28ab45a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7533450810c6be6aa4ae7eeec6062b6fb28ab45a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7533450810c6be6aa4ae7eeec6062b6fb28ab45a"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "f6bad00d139eee27e7f53def75101350f9a79398", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45", "patch": "@@ -1,3 +1,10 @@\n+2006-03-02  Nick Clifton  <nickc@redhat.com>\n+\n+\t* config.gcc (default_use_cxa_atexit): Extend the description of\n+\tthis configure variable.  Set its default value to \"yes\" for\n+\tLinux, NetBSD and ELF targets on the assumption that they will\n+\tuse C libraries with the __cxa_atexit function.\n+\n 2006-03-02  Ben Elliston  <bje@au.ibm.com>\n \n \t* config/rs6000/linux-unwind.h (frob_update_context): Mark `fs'"}, {"sha": "c7890374c3b378c3fb237a4cf3c68a6af7641201", "filename": "gcc/config.gcc", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=c5dde55b61d8bbbcedbf7562f8a403d2e9f06d45", "patch": "@@ -34,9 +34,14 @@\n #\t\t\tthreads support was requested.\n #\n #  default_use_cxa_atexit\n-#\t\t\t\"no\" by default, can be set to \"yes\" if a target\n-#\t\t\twishes to use __cxa_atexit() by default if the\n-#\t\t\t$enable___cxa_atexit variable is not set.\n+#\t\t\t  The default value for the $enable___cxa_atexit\n+#\t\t\tvariable.  enable___cxa_atexit needs to be set to\n+#\t\t\t\"yes\" for the correct operation of C++ destructors\n+#\t\t\tbut it relies upon the presence of a non-standard C\n+#\t\t\tlibrary\tfunction called\t__cxa_atexit.\n+#\t\t\t  Since not all C libraries provide __cxa_atexit the\n+#\t\t\tdefault value of $default_use_cxa_atexit is set to\n+#\t\t\t\"no\" except for targets which are known to be OK.\n #\n #  gas_flag\t\tEither yes or no depending on whether GNU as was\n #\t\t\trequested.\n@@ -461,6 +466,8 @@ case ${target} in\n       tm_defines=\"${tm_defines} UCLIBC_DEFAULT=0\"\n       ;;\n   esac\n+  # Assume that glibc or uClibc are being used and so __cxa_atexit is provided.\n+  default_use_cxa_atexit=yes\n   ;;\n *-*-gnu*)\n   # On the Hurd, the setup is just about the same on\n@@ -482,6 +489,8 @@ case ${target} in\n       tm_file=\"${cpu_type}/${cpu_type}.h i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h linux.h i386/linux.h gnu.h ${tm_file}\"\n       ;;\n   esac\n+  # Assume that glibc is being used and so __cxa_atexit is provided.\n+  default_use_cxa_atexit=yes\n   ;;\n *-*-netbsd*)\n   tmake_file=\"t-slibgcc-elf-ver t-libc-ok t-netbsd t-libgcc-pic\"\n@@ -551,6 +560,10 @@ case ${target} in\n     *) echo 'Unknown thread configuration for VxWorks'; exit 1 ;;\n   esac\n   ;;\n+*-*-elf)\n+  # Assume that newlib is being used and so __cxa_atexit is provided.\n+  default_use_cxa_atexit=yes\n+  ;;\n esac\n \n case ${target} in"}]}