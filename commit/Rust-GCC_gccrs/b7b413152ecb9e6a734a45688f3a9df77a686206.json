{"sha": "b7b413152ecb9e6a734a45688f3a9df77a686206", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdiNDEzMTUyZWNiOWU2YTczNGE0NTY4OGYzYTlkZjc3YTY4NjIwNg==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-05-13T17:09:48Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-05-13T17:24:31Z"}, "message": "libphobos: Fix static asserts on NetBSD, FreeBSD, DragonFlyBSD\n\nThe function declarations were updated to use `const scope', but the\nstatic asserts were not.\n\nReviewed-on: https://github.com/dlang/druntime/pull/3470\n\nlibphobos/ChangeLog:\n\n\t* libdruntime/MERGE: Merge upstream druntime 98c6ff0c.", "tree": {"sha": "798982375f30f611f423bdd6436178ea195a3b94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/798982375f30f611f423bdd6436178ea195a3b94"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7b413152ecb9e6a734a45688f3a9df77a686206", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7b413152ecb9e6a734a45688f3a9df77a686206", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7b413152ecb9e6a734a45688f3a9df77a686206", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7b413152ecb9e6a734a45688f3a9df77a686206/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f152f2996b7b4f7ccf8181f26dfd3acbea836f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f152f2996b7b4f7ccf8181f26dfd3acbea836f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f152f2996b7b4f7ccf8181f26dfd3acbea836f0"}], "stats": {"total": 40, "additions": 17, "deletions": 23}, "files": [{"sha": "0d554e070985869265c32f112fd25b20b747e361", "filename": "libphobos/libdruntime/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2FMERGE?ref=b7b413152ecb9e6a734a45688f3a9df77a686206", "patch": "@@ -1,4 +1,4 @@\n-89f870b76710a4cfa96f711bb5b14a7439c5c2a7\n+98c6ff0cf1241a0cfac196bf8a0523b1d4ecd3ac\n \n The first line of this file holds the git revision number of the last\n merge done from the dlang/druntime repository."}, {"sha": "2c5d8d79c22bf8d279ab909ecfc3c2d04c242520", "filename": "libphobos/libdruntime/core/sys/dragonflybsd/dlfcn.d", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fdragonflybsd%2Fdlfcn.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fdragonflybsd%2Fdlfcn.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fdragonflybsd%2Fdlfcn.d?ref=b7b413152ecb9e6a734a45688f3a9df77a686206", "patch": "@@ -82,16 +82,13 @@ struct __dlfunc_arg {\n \n alias dlfunc_t = void function(__dlfunc_arg);\n \n-private template __externC(RT, P...)\n-{\n-    alias __externC = extern(C) RT function(P) nothrow @nogc @system;\n-}\n-\n /* XSI functions first. */\n-static assert(is(typeof(&dlclose) == __externC!(int, void*)));\n-static assert(is(typeof(&dlerror) == __externC!(char*)));\n-static assert(is(typeof(&dlopen)  == __externC!(void*, const char*, int)));\n-static assert(is(typeof(&dlsym)   == __externC!(void*, void*, const char*)));\n+extern(C) {\n+    static assert(is(typeof(&dlclose) == int function(void*)));\n+    static assert(is(typeof(&dlerror) == char* function()));\n+    static assert(is(typeof(&dlopen)  == void* function(const scope char*, int)));\n+    static assert(is(typeof(&dlsym)   == void* function(void*, const scope char*)));\n+}\n \n void*    fdlopen(int, int);\n int      dladdr(const(void)*, Dl_info*);"}, {"sha": "7baacfeeb7bcc7631161916b8cd56a4d8752806e", "filename": "libphobos/libdruntime/core/sys/freebsd/dlfcn.d", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Ffreebsd%2Fdlfcn.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Ffreebsd%2Fdlfcn.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2Fcore%2Fsys%2Ffreebsd%2Fdlfcn.d?ref=b7b413152ecb9e6a734a45688f3a9df77a686206", "patch": "@@ -90,8 +90,8 @@ static if (__BSD_VISIBLE)\n extern(C) {\n     static assert(is(typeof(&dlclose) == int function(void*)));\n     static assert(is(typeof(&dlerror) == char* function()));\n-    static assert(is(typeof(&dlopen)  == void* function(in char*, int)));\n-    static assert(is(typeof(&dlsym)   == void* function(void*, in char*)));\n+    static assert(is(typeof(&dlopen)  == void* function(const scope char*, int)));\n+    static assert(is(typeof(&dlsym)   == void* function(void*, const scope char*)));\n }\n \n static if (__BSD_VISIBLE)"}, {"sha": "468ffbfe435e4a45b987ca3325a69be14d62cf88", "filename": "libphobos/libdruntime/core/sys/netbsd/dlfcn.d", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fnetbsd%2Fdlfcn.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fnetbsd%2Fdlfcn.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fnetbsd%2Fdlfcn.d?ref=b7b413152ecb9e6a734a45688f3a9df77a686206", "patch": "@@ -87,16 +87,13 @@ static if (__BSD_VISIBLE)\n     }\n }\n \n-private template __externC(RT, P...)\n-{\n-    alias __externC = extern(C) RT function(P) nothrow @nogc;\n-}\n-\n /* XSI functions first. */\n-static assert(is(typeof(&dlclose) == __externC!(int, void*)));\n-static assert(is(typeof(&dlerror) == __externC!(char*)));\n-static assert(is(typeof(&dlopen)  == __externC!(void*, const char*, int)));\n-static assert(is(typeof(&dlsym)   == __externC!(void*, void*, const char*)));\n+extern(C) {\n+    static assert(is(typeof(&dlclose) == int function(void*)));\n+    static assert(is(typeof(&dlerror) == char* function()));\n+    static assert(is(typeof(&dlopen)  == void* function(const scope char*, int)));\n+    static assert(is(typeof(&dlsym)   == void* function(void*, const scope char*)));\n+}\n \n static if (__BSD_VISIBLE)\n {"}, {"sha": "f6476ec31060c9be3883930e2bb38d051c90ce44", "filename": "libphobos/libdruntime/core/sys/posix/dlfcn.d", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fposix%2Fdlfcn.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7b413152ecb9e6a734a45688f3a9df77a686206/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fposix%2Fdlfcn.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2Fcore%2Fsys%2Fposix%2Fdlfcn.d?ref=b7b413152ecb9e6a734a45688f3a9df77a686206", "patch": "@@ -158,8 +158,8 @@ else version (FreeBSD)\n \n     int   dlclose(void*);\n     char* dlerror();\n-    void* dlopen(in char*, int);\n-    void* dlsym(void*, in char*);\n+    void* dlopen(const scope char*, int);\n+    void* dlsym(void*, const scope char*);\n     int   dladdr(const(void)* addr, Dl_info* info);\n \n     struct Dl_info"}]}