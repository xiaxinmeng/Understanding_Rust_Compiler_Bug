{"sha": "4a197d64cbb29606c45e52b66dcab8ba287c9177", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGExOTdkNjRjYmIyOTYwNmM0NWU1MmI2NmRjYWI4YmEyODdjOTE3Nw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-06-27T20:51:55Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-06-27T20:51:55Z"}, "message": "compiler: structs inherit all methods from embedded pointer fields.\n\nPreviously if a struct S contained an embedded field *T,\na method with receiver *T would not be promoted to a method\nwith value receiver S.\n\nFrom-SVN: r200493", "tree": {"sha": "9671a37b42e4daa0938b753c69f2e6fcc7d9ee77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9671a37b42e4daa0938b753c69f2e6fcc7d9ee77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a197d64cbb29606c45e52b66dcab8ba287c9177", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a197d64cbb29606c45e52b66dcab8ba287c9177", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a197d64cbb29606c45e52b66dcab8ba287c9177", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a197d64cbb29606c45e52b66dcab8ba287c9177/comments", "author": null, "committer": null, "parents": [{"sha": "ea16999619a352c06b27b289dd5426c7a4dd76eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea16999619a352c06b27b289dd5426c7a4dd76eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea16999619a352c06b27b289dd5426c7a4dd76eb"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "0a86d4720626578997b4fd64056a146dc8389e47", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a197d64cbb29606c45e52b66dcab8ba287c9177/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a197d64cbb29606c45e52b66dcab8ba287c9177/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=4a197d64cbb29606c45e52b66dcab8ba287c9177", "patch": "@@ -9396,13 +9396,18 @@ Type::find_field_or_method(const Type* type,\n \tfnt = pf->type()->deref()->named_type();\n       go_assert(fnt != NULL);\n \n+      // Methods with pointer receivers on embedded field are\n+      // inherited by the pointer to struct, and also by the struct\n+      // type if the field itself is a pointer.\n+      bool can_be_pointer = (receiver_can_be_pointer\n+\t\t\t     || pf->type()->points_to() != NULL);\n       int sublevel = level == NULL ? 1 : *level + 1;\n       bool sub_is_method;\n       std::string subambig1;\n       std::string subambig2;\n       bool subfound = Type::find_field_or_method(fnt,\n \t\t\t\t\t\t name,\n-\t\t\t\t\t\t receiver_can_be_pointer,\n+\t\t\t\t\t\t can_be_pointer,\n \t\t\t\t\t\t seen,\n \t\t\t\t\t\t &sublevel,\n \t\t\t\t\t\t &sub_is_method,"}]}