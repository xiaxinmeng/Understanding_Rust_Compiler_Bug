{"sha": "5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNlNDliNGIwODQ5MGJiMmRjOWE4ZjY2OWZjYzE0NWEzNDRjZDczZA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-06-27T21:45:56Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-06-27T21:45:56Z"}, "message": "re PR c++/6695 (Regression: template friend declaration doesn't work)\n\n\tPR c++/6695\n\t* pt.c (tsubst_friend_class): Substitute into the context of the\n\tfriend before using it.\n\n\tPR c++/6695\n\t* g++.dg/template/friend7.C: New file.\n\nFrom-SVN: r55041", "tree": {"sha": "6a2f4d318a68eabe42b1feb48d0eadccd6cf7ca7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a2f4d318a68eabe42b1feb48d0eadccd6cf7ca7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/comments", "author": null, "committer": null, "parents": [{"sha": "c8f863fc557e5430754bb1d6a53f9761d8a6634b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8f863fc557e5430754bb1d6a53f9761d8a6634b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8f863fc557e5430754bb1d6a53f9761d8a6634b"}], "stats": {"total": 46, "additions": 45, "deletions": 1}, "files": [{"sha": "d9f06b5a1ccae778fa4d09531acdb8229a416787", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "patch": "@@ -1,3 +1,9 @@\n+2002-06-27  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/6695\n+\t* pt.c (tsubst_friend_class): Substitute into the context of the\n+\tfriend before using it.\n+\n 2002-06-26  Mark Mitchell  <mark@codesourcery.com>\n \n \t* cp-tree.h (xref_tag): Change prototype."}, {"sha": "46de8dac6f45448f2ad5593fae2d6fdcc2c91516", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "patch": "@@ -4836,7 +4836,7 @@ tsubst_friend_class (friend_tmpl, args)\n       if (TREE_CODE (context) == NAMESPACE_DECL)\n \tpush_nested_namespace (context);\n       else\n-\tpush_nested_class (context, 2);\n+\tpush_nested_class (tsubst (context, args, tf_none, NULL_TREE), 2);\n     }\n \n   /* First, we look for a class template.  */"}, {"sha": "ed51574129872db95d92dd6ae2975ae529adfe27", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "patch": "@@ -1,3 +1,8 @@\n+2002-06-27  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/6695\n+\t* g++.dg/template/friend7.C: New file.\n+\n 2002-06-27  Aldy Hernandez  <aldyh@redhat.com>\n \n         * gcc.c-torture/execute/string-opt-8.c (strncmp): Fix typo in"}, {"sha": "a954f8990c5d3ff0a5b31ff03115af2cd7a981b3", "filename": "gcc/testsuite/g++.dg/template/friend7.C", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ffriend7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ce49b4b08490bb2dc9a8f669fcc145a344cd73d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ffriend7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ffriend7.C?ref=5ce49b4b08490bb2dc9a8f669fcc145a344cd73d", "patch": "@@ -0,0 +1,33 @@\n+// { dg-do compile }\n+\n+template <typename V>\n+struct b\n+{\n+  template <typename T>\n+  class a\n+  {\n+    template <typename>\n+    friend class a;\n+\n+    T t_;\n+\n+   public:\n+    a() {}\n+    a(a<T *> const &);\n+  };\n+};\n+\n+template <typename V>\n+template <typename T>\n+b<V>::a<T>::a(a<T *> const &rhs): t_(*rhs.t_)\n+{}\n+\n+\n+int\n+f ()\n+{\n+  b<void *>::a<char *> q;\n+  b<void *>::a<char> w(q);\n+\n+  return 0;\n+}"}]}