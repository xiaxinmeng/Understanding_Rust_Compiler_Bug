{"sha": "2051c897803c7632570b098abc8a2b8fb4c42144", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA1MWM4OTc4MDNjNzYzMjU3MGIwOThhYmM4YTJiOGZiNGM0MjE0NA==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2003-10-17T13:36:48Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2003-10-17T13:36:48Z"}, "message": "combine.c (simplify_set): Do not clear out undobuf.other_insn already set elsewhere.\n\n\t* combine.c (simplify_set): Do not clear out undobuf.other_insn\n\talready set elsewhere.\n\nFrom-SVN: r72602", "tree": {"sha": "535c53128775bc8275707387d0b3e0f1f2e28dfe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/535c53128775bc8275707387d0b3e0f1f2e28dfe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2051c897803c7632570b098abc8a2b8fb4c42144", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2051c897803c7632570b098abc8a2b8fb4c42144", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2051c897803c7632570b098abc8a2b8fb4c42144", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2051c897803c7632570b098abc8a2b8fb4c42144/comments", "author": null, "committer": null, "parents": [{"sha": "b1177d691d174e4af10475798f9d12c6c93d003a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1177d691d174e4af10475798f9d12c6c93d003a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1177d691d174e4af10475798f9d12c6c93d003a"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "8f5c802b05fdb44de0daccfc3255b46bca2c3588", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2051c897803c7632570b098abc8a2b8fb4c42144/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2051c897803c7632570b098abc8a2b8fb4c42144/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2051c897803c7632570b098abc8a2b8fb4c42144", "patch": "@@ -1,3 +1,8 @@\n+2003-10-17  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\t* combine.c (simplify_set): Do not clear out undobuf.other_insn\n+\talready set elsewhere.\n+\n 2003-10-17  Kelley Cook  <kcook@gcc.gnu.org>\n \n \t* config/i386/i386.c (ix86_expand_prologue):  Use"}, {"sha": "c36d9223724f5192b74141f05b36c5cd080fcd26", "filename": "gcc/combine.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2051c897803c7632570b098abc8a2b8fb4c42144/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2051c897803c7632570b098abc8a2b8fb4c42144/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=2051c897803c7632570b098abc8a2b8fb4c42144", "patch": "@@ -5084,10 +5084,12 @@ simplify_set (rtx x)\n \t undobuf.other_insn.  */\n       if (new_code != old_code)\n \t{\n+\t  int other_changed_previously = other_changed;\n \t  unsigned HOST_WIDE_INT mask;\n \n \t  SUBST (*cc_use, gen_rtx_fmt_ee (new_code, GET_MODE (*cc_use),\n \t\t\t\t\t  dest, const0_rtx));\n+\t  other_changed = 1;\n \n \t  /* If the only change we made was to change an EQ into an NE or\n \t     vice versa, OP0 has only one bit that might be nonzero, and OP1\n@@ -5097,7 +5099,7 @@ simplify_set (rtx x)\n \n \t  if (((old_code == NE && new_code == EQ)\n \t       || (old_code == EQ && new_code == NE))\n-\t      && ! other_changed && op1 == const0_rtx\n+\t      && ! other_changed_previously && op1 == const0_rtx\n \t      && GET_MODE_BITSIZE (GET_MODE (op0)) <= HOST_BITS_PER_WIDE_INT\n \t      && exact_log2 (mask = nonzero_bits (op0, GET_MODE (op0))) >= 0)\n \t    {\n@@ -5107,13 +5109,11 @@ simplify_set (rtx x)\n \t\t   && ! check_asm_operands (pat)))\n \t\t{\n \t\t  PUT_CODE (*cc_use, old_code);\n-\t\t  other_insn = 0;\n+\t\t  other_changed = 0;\n \n \t\t  op0 = gen_binary (XOR, GET_MODE (op0), op0, GEN_INT (mask));\n \t\t}\n \t    }\n-\n-\t  other_changed = 1;\n \t}\n \n       if (other_changed)"}]}