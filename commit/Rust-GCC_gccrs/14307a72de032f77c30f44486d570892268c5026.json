{"sha": "14307a72de032f77c30f44486d570892268c5026", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQzMDdhNzJkZTAzMmY3N2MzMGY0NDQ4NmQ1NzA4OTIyNjhjNTAyNg==", "commit": {"author": {"name": "Joern Rennecke", "email": "joern.rennecke@embecosm.com", "date": "2011-10-07T13:52:17Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2011-10-07T13:52:17Z"}, "message": "pr47276.c (ASMNAME, [...]): Define.\n\n        * gcc.dg/pr47276.c (ASMNAME, ASMNAME2, STRING): Define.\n        (__EI___vsyslog_chk, __EI_syslog, __EI_vsyslog): Use ASMNAME.  \n        (syslog, vsyslog, __vsyslog_chk): Likewise.\n\n        * gcc.dg/lto/20081222_1.c (ASMNAME, ASMNAME2, STRING): Define.\n        (x, EXT_x): Use ASMNAME.\n\n        * gcc.dg/torture/pr48044.c (ASMNAME, ASMNAME2, STRING): Define.\n        (a, c): Use ASMNAME.\n\nFrom-SVN: r179659", "tree": {"sha": "669a0d6359b9054547bcb6de9f059fd0ea6e93d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/669a0d6359b9054547bcb6de9f059fd0ea6e93d6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14307a72de032f77c30f44486d570892268c5026", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14307a72de032f77c30f44486d570892268c5026", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14307a72de032f77c30f44486d570892268c5026", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14307a72de032f77c30f44486d570892268c5026/comments", "author": {"login": "amylaar", "id": 1663475, "node_id": "MDQ6VXNlcjE2NjM0NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1663475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amylaar", "html_url": "https://github.com/amylaar", "followers_url": "https://api.github.com/users/amylaar/followers", "following_url": "https://api.github.com/users/amylaar/following{/other_user}", "gists_url": "https://api.github.com/users/amylaar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amylaar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amylaar/subscriptions", "organizations_url": "https://api.github.com/users/amylaar/orgs", "repos_url": "https://api.github.com/users/amylaar/repos", "events_url": "https://api.github.com/users/amylaar/events{/privacy}", "received_events_url": "https://api.github.com/users/amylaar/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "68c0ef75f351958c900e278f7fe8577274cf621f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68c0ef75f351958c900e278f7fe8577274cf621f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68c0ef75f351958c900e278f7fe8577274cf621f"}], "stats": {"total": 45, "additions": 35, "deletions": 10}, "files": [{"sha": "92ae8b340a9ff724e30637726223186b1f3fcace", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=14307a72de032f77c30f44486d570892268c5026", "patch": "@@ -1,3 +1,15 @@\n+2011-10-06  Joern Rennecke <joern.rennecke@embecosm.com>\n+\n+\t* gcc.dg/pr47276.c (ASMNAME, ASMNAME2, STRING): Define.\n+\t(__EI___vsyslog_chk, __EI_syslog, __EI_vsyslog): Use ASMNAME.  \n+\t(syslog, vsyslog, __vsyslog_chk): Likewise.\n+\n+\t* gcc.dg/lto/20081222_1.c (ASMNAME, ASMNAME2, STRING): Define.\n+\t(x, EXT_x): Use ASMNAME.\n+\n+\t* gcc.dg/torture/pr48044.c (ASMNAME, ASMNAME2, STRING): Define.\n+\t(a, c): Use ASMNAME.\n+\n 2011-10-07  Tom de Vries  <tom@codesourcery.com>\n \n \tPR middle-end/50527"}, {"sha": "755eb9918e9a9300229a00a5a647a171a78b9ff1", "filename": "gcc/testsuite/gcc.dg/lto/20081222_1.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2F20081222_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2F20081222_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2F20081222_1.c?ref=14307a72de032f77c30f44486d570892268c5026", "patch": "@@ -1,8 +1,12 @@\n #include \"20081222_0.h\"\n \n+#define ASMNAME(cname)  ASMNAME2 (__USER_LABEL_PREFIX__, cname)\n+#define ASMNAME2(prefix, cname) STRING (prefix) cname\n+#define STRING(x)    #x\n+\n /* Actually, call \"x\" \"INT_X\", and make it hidden.  */\n extern __typeof (x) x\n-\t__asm__ (\"INT_x\")\n+\t__asm__ (ASMNAME (\"INT_x\"))\n \t__attribute__ ((__visibility__ (\"hidden\")));\n \n int x ()\n@@ -12,5 +16,5 @@ int x ()\n \n /* Make an externally-visible symbol \"X\" that's an alias for INT_x.  */\n extern __typeof (x) EXT_x\n-\t__asm__ (\"x\")\n+\t__asm__ (ASMNAME (\"x\"))\n \t__attribute__ ((__alias__ (\"INT_x\")));"}, {"sha": "9276b1a68542d972ae5ac50eaf0cb9d5017c23f3", "filename": "gcc/testsuite/gcc.dg/pr47276.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47276.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47276.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr47276.c?ref=14307a72de032f77c30f44486d570892268c5026", "patch": "@@ -1,6 +1,11 @@\n /* { dg-do compile } */\n /* { dg-require-alias \"\" } */\n /* { dg-require-visibility \"\" } */\n+\n+#define ASMNAME(cname)  ASMNAME2 (__USER_LABEL_PREFIX__, cname)\n+#define ASMNAME2(prefix, cname) STRING (prefix) cname\n+#define STRING(x)    #x\n+\n extern void syslog (int __pri, __const char *__fmt, ...)\n      __attribute__ ((__format__ (__printf__, 2, 3)));\n extern void vsyslog (int __pri, __const char *__fmt, int __ap)\n@@ -17,15 +22,15 @@ void\n __vsyslog_chk(int pri, int flag, const char *fmt, int ap)\n {\n }\n-extern __typeof (__vsyslog_chk) __EI___vsyslog_chk __asm__(\"\" \"__vsyslog_chk\"); extern __typeof (__vsyslog_chk) __EI___vsyslog_chk __attribute__((alias (\"\" \"__GI___vsyslog_chk\")));\n+extern __typeof (__vsyslog_chk) __EI___vsyslog_chk __asm__(\"\" ASMNAME (\"__vsyslog_chk\")); extern __typeof (__vsyslog_chk) __EI___vsyslog_chk __attribute__((alias (\"\" \"__GI___vsyslog_chk\")));\n void\n __syslog(int pri, const char *fmt, ...)\n {\n }\n extern __typeof (__syslog) syslog __attribute__ ((alias (\"__syslog\")));\n-extern __typeof (syslog) __EI_syslog __asm__(\"\" \"syslog\"); extern __typeof (syslog) __EI_syslog __attribute__((alias (\"\" \"__GI_syslog\")));\n+extern __typeof (syslog) __EI_syslog __asm__(\"\" ASMNAME (\"syslog\")); extern __typeof (syslog) __EI_syslog __attribute__((alias (\"\" \"__GI_syslog\")));\n extern __typeof (__vsyslog) vsyslog __attribute__ ((alias (\"__vsyslog\")));\n-extern __typeof (vsyslog) __EI_vsyslog __asm__(\"\" \"vsyslog\"); extern __typeof (vsyslog) __EI_vsyslog __attribute__((alias (\"\" \"__GI_vsyslog\")));\n-extern __typeof (syslog) syslog __asm__ (\"\" \"__GI_syslog\") __attribute__ ((visibility (\"hidden\")));\n-extern __typeof (vsyslog) vsyslog __asm__ (\"\" \"__GI_vsyslog\") __attribute__ ((visibility (\"hidden\")));\n-extern __typeof (__vsyslog_chk) __vsyslog_chk __asm__ (\"\" \"__GI___vsyslog_chk\") __attribute__ ((visibility (\"hidden\")));\n+extern __typeof (vsyslog) __EI_vsyslog __asm__(\"\" ASMNAME (\"vsyslog\")); extern __typeof (vsyslog) __EI_vsyslog __attribute__((alias (\"\" \"__GI_vsyslog\")));\n+extern __typeof (syslog) syslog __asm__ (\"\" ASMNAME (\"__GI_syslog\")) __attribute__ ((visibility (\"hidden\")));\n+extern __typeof (vsyslog) vsyslog __asm__ (\"\" ASMNAME (\"__GI_vsyslog\")) __attribute__ ((visibility (\"hidden\")));\n+extern __typeof (__vsyslog_chk) __vsyslog_chk __asm__ (\"\" ASMNAME (\"__GI___vsyslog_chk\")) __attribute__ ((visibility (\"hidden\")));"}, {"sha": "d20a634a1199c1e82579a9f0a96ac9a8dc054be6", "filename": "gcc/testsuite/gcc.dg/torture/pr48044.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr48044.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14307a72de032f77c30f44486d570892268c5026/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr48044.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr48044.c?ref=14307a72de032f77c30f44486d570892268c5026", "patch": "@@ -2,6 +2,10 @@\n /* { dg-do compile } */\n /* { dg-require-alias \"\" } */\n \n-int a __asm__ (\"b\") = 0;\n-extern int c __asm__ (\"a\") __attribute__ ((alias (\"b\")));\n+#define ASMNAME(cname)  ASMNAME2 (__USER_LABEL_PREFIX__, cname)\n+#define ASMNAME2(prefix, cname) STRING (prefix) cname\n+#define STRING(x)    #x\n+\n+int a __asm__ (ASMNAME (\"b\")) = 0;\n+extern int c __asm__ (ASMNAME (\"a\")) __attribute__ ((alias (\"b\")));\n extern int d __attribute__ ((weak, alias (\"a\")));"}]}