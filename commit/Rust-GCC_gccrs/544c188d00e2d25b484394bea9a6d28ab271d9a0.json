{"sha": "544c188d00e2d25b484394bea9a6d28ab271d9a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ0YzE4OGQwMGUyZDI1YjQ4NDM5NGJlYTlhNmQyOGFiMjcxZDlhMA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1998-03-16T10:54:48Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchell@gcc.gnu.org", "date": "1998-03-16T10:54:48Z"}, "message": "pt.c (tsubst_copy): Deal with BIND_EXPR in a way that more closely mimics the behavior in parse.y.\n\n\t* pt.c (tsubst_copy): Deal with BIND_EXPR in a way that more\n\tclosely mimics the behavior in parse.y.\n\t(tsubst_expr): Return the resuting BLOCK when making a tsubst'ing\n\tinto a compound statement.\n\nFrom-SVN: r18618", "tree": {"sha": "74de6c9704cb3b3b0d5fe66337b06c66770850bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74de6c9704cb3b3b0d5fe66337b06c66770850bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/544c188d00e2d25b484394bea9a6d28ab271d9a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544c188d00e2d25b484394bea9a6d28ab271d9a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/544c188d00e2d25b484394bea9a6d28ab271d9a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544c188d00e2d25b484394bea9a6d28ab271d9a0/comments", "author": null, "committer": null, "parents": [{"sha": "1d8eaa6b15a8c33e42adac583d479ff5170b06bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d8eaa6b15a8c33e42adac583d479ff5170b06bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d8eaa6b15a8c33e42adac583d479ff5170b06bb"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "90e2a2b6b7badd5fa9e0a2edcd6c74f2740b5f56", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544c188d00e2d25b484394bea9a6d28ab271d9a0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544c188d00e2d25b484394bea9a6d28ab271d9a0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=544c188d00e2d25b484394bea9a6d28ab271d9a0", "patch": "@@ -1,3 +1,10 @@\n+Mon Mar 16 10:54:21 1998  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* pt.c (tsubst_copy): Deal with BIND_EXPR in a way that more\n+\tclosely mimics the behavior in parse.y.\n+\t(tsubst_expr): Return the resuting BLOCK when making a tsubst'ing\n+\tinto a compound statement.\n+\t\n Sun Mar 15 02:07:26 1998  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* cp-tree.h (TEMPLATE_PARMS_FOR_INLINE): New macro."}, {"sha": "f261edfa1e46a76db8cfc5a8799e8758d5d3f709", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544c188d00e2d25b484394bea9a6d28ab271d9a0/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544c188d00e2d25b484394bea9a6d28ab271d9a0/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=544c188d00e2d25b484394bea9a6d28ab271d9a0", "patch": "@@ -4553,11 +4553,12 @@ tsubst_copy (t, args, in_decl)\n \t       build_expr_from_tree.  So, we need to expand the\n \t       BIND_EXPR here.  */ \n \t    tree rtl_exp = expand_start_stmt_expr();\n-\t    tsubst_expr (TREE_OPERAND (r, 1), args, in_decl);\n+\t    tree block = tsubst_expr (TREE_OPERAND (r, 1), args, in_decl);\n \t    rtl_exp = expand_end_stmt_expr (rtl_exp);\n \t    TREE_SIDE_EFFECTS (rtl_exp) = 1;\n-\t    return build (BIND_EXPR, TREE_TYPE (rtl_exp), \n-\t\t\t  NULL_TREE, rtl_exp, TREE_OPERAND (r, 2));\n+\t    r = build (BIND_EXPR, TREE_TYPE (rtl_exp), \n+\t\t       NULL_TREE, rtl_exp, block);\n+\t    delete_block (block);\n \t  }\n \n \treturn r;\n@@ -4841,7 +4842,7 @@ tsubst_expr (t, args, in_decl)\n \t  tsubst_expr (substmt, args, in_decl);\n \n \tif (COMPOUND_STMT_NO_SCOPE (t) == 0)\n-\t  do_poplevel ();\n+\t  return do_poplevel ();\n       }\n       break;\n "}]}