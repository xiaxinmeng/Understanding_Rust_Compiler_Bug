{"sha": "664e411ba575f984ff229cd412e95bc7ce983100", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjY0ZTQxMWJhNTc1Zjk4NGZmMjI5Y2Q0MTJlOTViYzdjZTk4MzEwMA==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-09-10T22:47:03Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-09-10T22:47:03Z"}, "message": "re PR fortran/41242 (PPC call rejected (related to user-defined assignment?))\n\n2009-09-11  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/41242\n\t* resolve.c (resolve_ordinary_assign): Don't call resolve_code,\n\tto avoid that subsequent codes are resolved more than once.\n\t(resolve_code): Make sure that type-bound assignment operators are\n\tresolved correctly.\n\n\n2009-09-11  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/41242\n\t* gfortran.dg/proc_ptr_comp_21.f90: New.\n\nFrom-SVN: r151620", "tree": {"sha": "c3369db4e5d4a1627fe44ea336860da00d8fc726", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3369db4e5d4a1627fe44ea336860da00d8fc726"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/664e411ba575f984ff229cd412e95bc7ce983100", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/664e411ba575f984ff229cd412e95bc7ce983100", "html_url": "https://github.com/Rust-GCC/gccrs/commit/664e411ba575f984ff229cd412e95bc7ce983100", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/664e411ba575f984ff229cd412e95bc7ce983100/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "68bcdeed116bbf65cb4ed8a4455cb1d5a40c9f25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68bcdeed116bbf65cb4ed8a4455cb1d5a40c9f25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68bcdeed116bbf65cb4ed8a4455cb1d5a40c9f25"}], "stats": {"total": 51, "additions": 49, "deletions": 2}, "files": [{"sha": "903f25d389804381781d80cd72804890a4074e57", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=664e411ba575f984ff229cd412e95bc7ce983100", "patch": "@@ -1,3 +1,12 @@\n+2009-09-11  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/41242\n+\t* resolve.c (resolve_ordinary_assign): Don't call resolve_code,\n+\tto avoid that subsequent codes are resolved more than once.\n+\t(resolve_code): Make sure that type-bound assignment operators are\n+\tresolved correctly.\n+\n+\n 2009-09-10  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/31292"}, {"sha": "f208f406626e0586f416fa04dfdec0f7b9bf25ec", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=664e411ba575f984ff229cd412e95bc7ce983100", "patch": "@@ -6958,7 +6958,6 @@ resolve_ordinary_assign (gfc_code *code, gfc_namespace *ns)\n \t    && (lhs->symtree->n.sym == (*rhsptr)->symtree->n.sym))\n \t*rhsptr = gfc_get_parentheses (*rhsptr);\n \n-      resolve_code (code, ns);\n       return true;\n     }\n \n@@ -7190,7 +7189,12 @@ resolve_code (gfc_code *code, gfc_namespace *ns)\n \t    break;\n \n \t  if (resolve_ordinary_assign (code, ns))\n-\t    goto call;\n+\t    {\n+\t      if (code->op == EXEC_COMPCALL)\n+\t\tgoto compcall;\n+\t      else\n+\t\tgoto call;\n+\t    }\n \n \t  break;\n \n@@ -7241,6 +7245,7 @@ resolve_code (gfc_code *code, gfc_namespace *ns)\n \t  break;\n \n \tcase EXEC_COMPCALL:\n+\tcompcall:\n \t  resolve_typebound_call (code);\n \t  break;\n "}, {"sha": "61ec4ab70b5bd2a84cefc96e70ad70c37a0ee870", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=664e411ba575f984ff229cd412e95bc7ce983100", "patch": "@@ -1,3 +1,8 @@\n+2009-09-11  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/41242\n+\t* gfortran.dg/proc_ptr_comp_21.f90: New.\n+\n 2009-09-10  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/31292"}, {"sha": "c000896d549ee5b995829836ef197990f3bb8593", "filename": "gcc/testsuite/gfortran.dg/proc_ptr_comp_21.f90", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_comp_21.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/664e411ba575f984ff229cd412e95bc7ce983100/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_comp_21.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_comp_21.f90?ref=664e411ba575f984ff229cd412e95bc7ce983100", "patch": "@@ -0,0 +1,28 @@\n+! { dg-do compile }\n+!\n+! PR 41242: [4.5 Regression] PPC call rejected (related to user-defined assignment?)\n+!\n+! Original test case by Juergen Reuter <reuter@physik.uni-freiburg.de>\n+! Modified by Janus Weil <janus@gcc.gnu.org>\n+\n+  type :: nf_t\n+     procedure(integer), nopass, pointer :: get_n_in\n+  end type\n+\n+  interface assignment(=)\n+     procedure op_assign\n+  end interface\n+\n+  type(nf_t) :: prc_lib\n+  prc_lib = \"foobar\"\n+  print *, prc_lib%get_n_in()\n+\n+contains\n+\n+  elemental subroutine op_assign (str, ch)\n+    type(nf_t), intent(out) :: str\n+    character(len=*), intent(in) :: ch\n+  end subroutine\n+\n+end\n+"}]}