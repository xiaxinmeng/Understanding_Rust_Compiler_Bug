{"sha": "ca188f167980504318441867688990b3cdec76fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ExODhmMTY3OTgwNTA0MzE4NDQxODY3Njg4OTkwYjNjZGVjNzZmYg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-02-07T00:29:31Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-02-07T00:29:31Z"}, "message": "(jump_optimize): When searching for a LOOP_END note to move,\n\nstop if we find a LOOP_BEG note first.\n\nFrom-SVN: r8885", "tree": {"sha": "252290a972873b5e3f00f1a607d1a01b5de9c135", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/252290a972873b5e3f00f1a607d1a01b5de9c135"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca188f167980504318441867688990b3cdec76fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca188f167980504318441867688990b3cdec76fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca188f167980504318441867688990b3cdec76fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca188f167980504318441867688990b3cdec76fb/comments", "author": null, "committer": null, "parents": [{"sha": "4f2d36749024d35dd0119be7af2123b935f92241", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f2d36749024d35dd0119be7af2123b935f92241", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f2d36749024d35dd0119be7af2123b935f92241"}], "stats": {"total": 35, "additions": 21, "deletions": 14}, "files": [{"sha": "ff267298948a84075297a48ada0f1447e491f8c8", "filename": "gcc/jump.c", "status": "modified", "additions": 21, "deletions": 14, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca188f167980504318441867688990b3cdec76fb/gcc%2Fjump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca188f167980504318441867688990b3cdec76fb/gcc%2Fjump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjump.c?ref=ca188f167980504318441867688990b3cdec76fb", "patch": "@@ -1878,24 +1878,31 @@ jump_optimize (f, cross_jump, noop_moves, after_regscan)\n \t\t\t   and moved the break sequence outside the loop.\n \t\t\t   We must move the LOOP_END note to where the\n \t\t\t   loop really ends now, or we will confuse loop\n-\t\t\t   optimization.  */\n+\t\t\t   optimization.  Stop if we find a LOOP_BEG note\n+\t\t\t   first, since we don't want to move the LOOP_END\n+\t\t\t   note in that case.  */\n \t\t\tfor (;range2after != label2; range2after = rangenext)\n \t\t\t  {\n \t\t\t    rangenext = NEXT_INSN (range2after);\n-\t\t\t    if (GET_CODE (range2after) == NOTE\n-\t\t\t\t&& (NOTE_LINE_NUMBER (range2after)\n-\t\t\t\t    == NOTE_INSN_LOOP_END))\n+\t\t\t    if (GET_CODE (range2after) == NOTE)\n \t\t\t      {\n-\t\t\t\tNEXT_INSN (PREV_INSN (range2after))\n-\t\t\t\t  = rangenext;\n-\t\t\t\tPREV_INSN (rangenext)\n-\t\t\t\t  = PREV_INSN (range2after);\n-\t\t\t\tPREV_INSN (range2after) \n-\t\t\t\t  = PREV_INSN (range1beg);\n-\t\t\t\tNEXT_INSN (range2after) = range1beg;\n-\t\t\t\tNEXT_INSN (PREV_INSN (range1beg))\n-\t\t\t\t  = range2after;\n-\t\t\t\tPREV_INSN (range1beg) = range2after;\n+\t\t\t\tif (NOTE_LINE_NUMBER (range2after)\n+\t\t\t\t    == NOTE_INSN_LOOP_END)\n+\t\t\t\t  {\n+\t\t\t\t    NEXT_INSN (PREV_INSN (range2after))\n+\t\t\t\t      = rangenext;\n+\t\t\t\t    PREV_INSN (rangenext)\n+\t\t\t\t      = PREV_INSN (range2after);\n+\t\t\t\t    PREV_INSN (range2after) \n+\t\t\t\t      = PREV_INSN (range1beg);\n+\t\t\t\t    NEXT_INSN (range2after) = range1beg;\n+\t\t\t\t    NEXT_INSN (PREV_INSN (range1beg))\n+\t\t\t\t      = range2after;\n+\t\t\t\t    PREV_INSN (range1beg) = range2after;\n+\t\t\t\t  }\n+\t\t\t\telse if (NOTE_LINE_NUMBER (range2after)\n+\t\t\t\t\t == NOTE_INSN_LOOP_BEG)\n+\t\t\t\t  break;\n \t\t\t      }\n \t\t\t  }\n \t\t\tchanged = 1;"}]}