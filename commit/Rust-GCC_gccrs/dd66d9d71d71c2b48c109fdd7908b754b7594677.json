{"sha": "dd66d9d71d71c2b48c109fdd7908b754b7594677", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ2NmQ5ZDcxZDcxYzJiNDhjMTA5ZmRkNzkwOGI3NTRiNzU5NDY3Nw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-02-15T21:04:58Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-02-15T21:04:58Z"}, "message": "re PR go/89368 (ICE in go/gofrontend/expressions.cc:4669 after r268923)\n\n\tPR go/89368\n    compiler: write barrier check nil-check policy tweak\n    \n    Tweak the recipe for generating writeBarrier loads to insure that the\n    dereference expr is marked as not requiring a nil check (not needed\n    for gccgo, but needed for gollvm).\n    \n    Fixes https://gcc.gnu.org/PR89368\n    \n    Reviewed-on: https://go-review.googlesource.com/c/162904\n\nFrom-SVN: r268948", "tree": {"sha": "c85466d08efb27deb508c18ae4db0846f88fd4da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c85466d08efb27deb508c18ae4db0846f88fd4da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd66d9d71d71c2b48c109fdd7908b754b7594677", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd66d9d71d71c2b48c109fdd7908b754b7594677", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd66d9d71d71c2b48c109fdd7908b754b7594677", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd66d9d71d71c2b48c109fdd7908b754b7594677/comments", "author": null, "committer": null, "parents": [{"sha": "879f9d0b2f80ed3ce4317709e0357ec6c3d36bc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/879f9d0b2f80ed3ce4317709e0357ec6c3d36bc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/879f9d0b2f80ed3ce4317709e0357ec6c3d36bc4"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "4de68b6abd7973388299acfa6c4a244add3f447c", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd66d9d71d71c2b48c109fdd7908b754b7594677/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd66d9d71d71c2b48c109fdd7908b754b7594677/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=dd66d9d71d71c2b48c109fdd7908b754b7594677", "patch": "@@ -1,4 +1,4 @@\n-0563f2d018cdb2cd685c254bac5ceb38396d0a27\n+1a74b8a22b2ff7f430729aa87ecb8cea7b5cdd70\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "1d122692217db49b07a745007ff42f73b3203b29", "filename": "gcc/go/gofrontend/wb.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd66d9d71d71c2b48c109fdd7908b754b7594677/gcc%2Fgo%2Fgofrontend%2Fwb.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd66d9d71d71c2b48c109fdd7908b754b7594677/gcc%2Fgo%2Fgofrontend%2Fwb.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fwb.cc?ref=dd66d9d71d71c2b48c109fdd7908b754b7594677", "patch": "@@ -904,7 +904,8 @@ Gogo::check_write_barrier(Block* enclosing, Statement* without,\n   ref = Expression::make_unary(OPERATOR_AND, ref, loc);\n   ref = Expression::make_cast(unsafe_pointer_type, ref, loc);\n   ref = Expression::make_cast(puint32_type, ref, loc);\n-  ref = Expression::make_unary(OPERATOR_MULT, ref, loc);\n+  ref = Expression::make_dereference(ref,\n+                                     Expression::NIL_CHECK_NOT_NEEDED, loc);\n   Expression* zero = Expression::make_integer_ul(0, ref->type(), loc);\n   Expression* cond = Expression::make_binary(OPERATOR_EQEQ, ref, zero, loc);\n "}]}