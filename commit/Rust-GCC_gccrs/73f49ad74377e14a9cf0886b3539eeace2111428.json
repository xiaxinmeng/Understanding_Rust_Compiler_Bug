{"sha": "73f49ad74377e14a9cf0886b3539eeace2111428", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNmNDlhZDc0Mzc3ZTE0YTljZjA4ODZiMzUzOWVlYWNlMjExMTQyOA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-06-08T17:16:10Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-06-08T17:16:10Z"}, "message": "Remove NO_TRAMPOLINES\n\n2017-06-08  Tom de Vries  <tom@codesourcery.com>\n\n\t* gcc.c-torture/compile/930506-2.c: Use dg-require-effective-target\n\ttrampolines instead of NO_TRAMPOLINES.\n\t* gcc.c-torture/execute/20000822-1.c: Same.\n\t* gcc.c-torture/execute/920428-2.c: Same.\n\t* gcc.c-torture/execute/920501-7.c: Same.\n\t* gcc.c-torture/execute/920612-2.c: Same.\n\t* gcc.c-torture/execute/921017-1.c: Same.\n\t* gcc.c-torture/execute/921215-1.c: Same.\n\t* gcc.c-torture/execute/931002-1.c: Same.\n\t* gcc.c-torture/execute/comp-goto-2.c: Same.\n\t* gcc.c-torture/execute/nestfunc-1.c: Same.\n\t* gcc.c-torture/execute/nestfunc-2.c: Same.\n\t* gcc.c-torture/execute/nestfunc-3.c: Same.\n\t* gcc.c-torture/execute/nestfunc-5.c: Same.\n\t* gcc.c-torture/execute/nestfunc-6.c: Same.\n\t* gcc.c-torture/execute/pr24135.c: Same.\n\t* gcc.dg/Wtrampolines.c: Same.\n\t* gcc.dg/torture/stackalign/comp-goto-1.c: Same.\n\t* gcc.dg/torture/stackalign/nested-5.c: Same.\n\t* gcc.dg/torture/stackalign/nested-6.c: Same.\n\t* gcc.dg/torture/stackalign/non-local-goto-3.c: Same.\n\t* gcc.dg/torture/stackalign/non-local-goto-4.c: Same.\n\t* gcc.dg/torture/stackalign/non-local-goto-5.c: Same.\n\t* gcc.dg/trampoline-1.c: Same.\n\t* gcc.dg/tree-prof/pr44777.c: Same.\n\t* gcc.target/i386/pr67770.c: Same.\n\t* lib/gcc.exp (gcc_target_compile): Remove appending of\n\t-DNO_TRAMPOLINES to additional_flags.\n\t* lib/objc.exp (objc_target_compile): Same.\n\nFrom-SVN: r249027", "tree": {"sha": "e3607881d1a318353938fd69612915a2c11dcd41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3607881d1a318353938fd69612915a2c11dcd41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73f49ad74377e14a9cf0886b3539eeace2111428", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73f49ad74377e14a9cf0886b3539eeace2111428", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73f49ad74377e14a9cf0886b3539eeace2111428", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73f49ad74377e14a9cf0886b3539eeace2111428/comments", "author": null, "committer": null, "parents": [{"sha": "b9835925b1557cca85e9ae78dce28473ccc7100e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9835925b1557cca85e9ae78dce28473ccc7100e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9835925b1557cca85e9ae78dce28473ccc7100e"}], "stats": {"total": 180, "additions": 81, "deletions": 99}, "files": [{"sha": "1a3a4bbddbbbb98f0f9ee9b36248b7fc9f3f4163", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,3 +1,35 @@\n+2017-06-08  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* gcc.c-torture/compile/930506-2.c: Use dg-require-effective-target\n+\ttrampolines instead of NO_TRAMPOLINES.\n+\t* gcc.c-torture/execute/20000822-1.c: Same.\n+\t* gcc.c-torture/execute/920428-2.c: Same.\n+\t* gcc.c-torture/execute/920501-7.c: Same.\n+\t* gcc.c-torture/execute/920612-2.c: Same.\n+\t* gcc.c-torture/execute/921017-1.c: Same.\n+\t* gcc.c-torture/execute/921215-1.c: Same.\n+\t* gcc.c-torture/execute/931002-1.c: Same.\n+\t* gcc.c-torture/execute/comp-goto-2.c: Same.\n+\t* gcc.c-torture/execute/nestfunc-1.c: Same.\n+\t* gcc.c-torture/execute/nestfunc-2.c: Same.\n+\t* gcc.c-torture/execute/nestfunc-3.c: Same.\n+\t* gcc.c-torture/execute/nestfunc-5.c: Same.\n+\t* gcc.c-torture/execute/nestfunc-6.c: Same.\n+\t* gcc.c-torture/execute/pr24135.c: Same.\n+\t* gcc.dg/Wtrampolines.c: Same.\n+\t* gcc.dg/torture/stackalign/comp-goto-1.c: Same.\n+\t* gcc.dg/torture/stackalign/nested-5.c: Same.\n+\t* gcc.dg/torture/stackalign/nested-6.c: Same.\n+\t* gcc.dg/torture/stackalign/non-local-goto-3.c: Same.\n+\t* gcc.dg/torture/stackalign/non-local-goto-4.c: Same.\n+\t* gcc.dg/torture/stackalign/non-local-goto-5.c: Same.\n+\t* gcc.dg/trampoline-1.c: Same.\n+\t* gcc.dg/tree-prof/pr44777.c: Same.\n+\t* gcc.target/i386/pr67770.c: Same.\n+\t* lib/gcc.exp (gcc_target_compile): Remove appending of\n+\t-DNO_TRAMPOLINES to additional_flags.\n+\t* lib/objc.exp (objc_target_compile): Same.\n+\n 2017-06-08  Tom de Vries  <tom@codesourcery.com>\n \n \t* lib/target-supports.exp (check_effective_target_trampolines): Test for"}, {"sha": "bc982acffba9d89e29c71a8fc1ff9a76220fd8a0", "filename": "gcc/testsuite/gcc.c-torture/compile/930506-2.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F930506-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F930506-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F930506-2.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,4 +1,5 @@\n-#ifndef NO_TRAMPOLINES\n+/* { dg-require-effective-target trampolines } */\n+\n int f1()\n {\n   { int ___() { foo(1); } bar(___); }\n@@ -10,6 +11,3 @@ int f2(int j)\n   { int ___() { foo(j); } bar(___); }\n   return( { int ___() { foo(j); } bar(___);} );\n }\n-#else\n-int x;\n-#endif"}, {"sha": "e99bcc2fea3ef1c35f728bd6c9d469ecfdd05f30", "filename": "gcc/testsuite/gcc.c-torture/execute/20000822-1.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20000822-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20000822-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20000822-1.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,4 +1,5 @@\n-#ifndef NO_TRAMPOLINES\n+/* { dg-require-effective-target trampolines } */\n+\n int f0(int (*fn)(int *), int *p)\n {\n   return (*fn) (p);\n@@ -16,13 +17,11 @@ int f1(void)\n \n   return f0(f2, &i);\n }\n-#endif\n \n int main()\n {\n-#ifndef NO_TRAMPOLINES\n   if (f1() != 2)\n     abort ();\n-#endif\n+\n   return 0;\n }"}, {"sha": "c6a5bda05bcb7d22fc7134e4f54e921a71d6ef69", "filename": "gcc/testsuite/gcc.c-torture/execute/920428-2.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920428-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920428-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920428-2.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,9 +1,6 @@\n /* { dg-require-effective-target label_values } */\n+/* { dg-require-effective-target trampolines } */\n \n-#if !defined (NO_TRAMPOLINES)\n s(i){if(i>0){__label__ l1;int f(int i){if(i==2)goto l1;return 0;}return f(i);l1:;}return 1;}\n x(){return s(0)==1&&s(1)==0&&s(2)==1;}\n main(){if(x()!=1)abort();exit(0);}\n-#else\n-main(){ exit (0); }\n-#endif"}, {"sha": "d05ac61d48c604020a38561f9f83431454984315", "filename": "gcc/testsuite/gcc.c-torture/execute/920501-7.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920501-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920501-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920501-7.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,12 +1,12 @@\n /* { dg-require-effective-target label_values } */\n+/* { dg-require-effective-target trampolines } */\n \n #ifdef STACK_SIZE\n #define DEPTH ((STACK_SIZE) / 512 + 1)\n #else\n #define DEPTH 1000\n #endif\n \n-#if !defined (NO_TRAMPOLINES)\n x(a)\n {\n   __label__ xlab;\n@@ -20,13 +20,11 @@ x(a)\n  xlab:;\n   return a;\n }\n-#endif\n \n main ()\n {\n-#if !defined (NO_TRAMPOLINES)\n   if (x (DEPTH) != DEPTH)\n     abort ();\n-#endif\n+\n   exit (0);\n }"}, {"sha": "23796fcdaa91e7a098df10cfdecceb372a5307ef", "filename": "gcc/testsuite/gcc.c-torture/execute/920612-2.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920612-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920612-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F920612-2.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,3 +1,5 @@\n+/* { dg-require-effective-target trampolines } */\n+\n main ()\n {\n   int i = 0;\n@@ -7,9 +9,9 @@ main ()\n \ti++, x--;\n       return x;\n     }\n-#ifndef NO_TRAMPOLINES\n+\n   if (a (2) != 0)\n     abort ();\n-#endif\n+\n   exit (0);\n }"}, {"sha": "a2784f68487cedf827ba03b0aeecebb0e0d3ede3", "filename": "gcc/testsuite/gcc.c-torture/execute/921017-1.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F921017-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F921017-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F921017-1.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,4 +1,6 @@\n /* { dg-skip-if \"requires alloca\" { ! alloca } { \"-O0\" } { \"\" } } */\n+/* { dg-require-effective-target trampolines } */\n+\n f(n)\n {\n   int a[n];\n@@ -11,8 +13,7 @@ f(n)\n }\n main()\n {\n-#ifndef NO_TRAMPOLINES\n   if(f(2)!=4711)abort();\n-#endif\n+\n   exit(0);\n }"}, {"sha": "28dccd662f25aa383b01529f561cb75235d10168", "filename": "gcc/testsuite/gcc.c-torture/execute/921215-1.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F921215-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F921215-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F921215-1.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,6 +1,7 @@\n+/* { dg-require-effective-target trampolines } */\n+\n main()\n {\n-#ifndef NO_TRAMPOLINES\n   void p(void ((*f) (void ())))\n     {\n       void r()\n@@ -17,7 +18,7 @@ main()\n     }\n \n   p(q);\n-#endif\n+\n   exit(0);\n }\n "}, {"sha": "fc5222374d926255a5f2c34e7ba9e67162812f78", "filename": "gcc/testsuite/gcc.c-torture/execute/931002-1.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F931002-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F931002-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F931002-1.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,11 +1,12 @@\n+/* { dg-require-effective-target trampolines } */\n+\n f (void (*func) ())\n {\n   func ();\n }\n \n main ()\n {\n-#ifndef NO_TRAMPOLINES\n   void t0 ()\n     {\n     }\n@@ -23,6 +24,6 @@ main ()\n   t1 ();\n   t1 ();\n   t2 ();\n-#endif\n+\n   exit (0);\n }"}, {"sha": "eaf83d870a178c4152b53f6894542a18bfeaa778", "filename": "gcc/testsuite/gcc.c-torture/execute/comp-goto-2.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fcomp-goto-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fcomp-goto-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fcomp-goto-2.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,4 +1,5 @@\n /* { dg-require-effective-target label_values } */\n+/* { dg-require-effective-target trampolines } */\n \n /* A slight variation of 920501-7.c.  */\n \n@@ -8,7 +9,6 @@\n #define DEPTH 1000\n #endif\n \n-#if !defined (NO_TRAMPOLINES)\n x(a)\n {\n   __label__ xlab;\n@@ -26,13 +26,12 @@ x(a)\n  xlab:;\n   return a;\n }\n-#endif\n \n main ()\n {\n-#if !defined (NO_TRAMPOLINES)\n+\n   if (x (DEPTH) != DEPTH)\n     abort ();\n-#endif\n+\n   exit (0);\n }"}, {"sha": "29ccfc399bd725e368abedbb22d1978e7fc65779", "filename": "gcc/testsuite/gcc.c-torture/execute/nestfunc-1.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-1.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,3 +1,5 @@\n+/* { dg-require-effective-target trampolines } */\n+\n int\n g (int a, int b, int (*gi) (int, int))\n {\n@@ -9,7 +11,6 @@ g (int a, int b, int (*gi) (int, int))\n \n f ()\n {\n-#ifndef NO_TRAMPOLINES\n   int i, j;\n   int f2 (int a, int b)\n     {\n@@ -18,7 +19,6 @@ f ()\n \n   if (g (1, 2, f2) != 2)\n     abort ();\n-#endif\n }\n \n main ()"}, {"sha": "1a25a17449ee4f9b0b962fe95adec32525cb9f66", "filename": "gcc/testsuite/gcc.c-torture/execute/nestfunc-2.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-2.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,11 +1,12 @@\n+/* { dg-require-effective-target trampolines } */\n+\n extern int foo (int, int, int (*) (int, int, int, int, int, int, int));\n \n int z;\n \n int\n main (void)\n {\n-#ifndef NO_TRAMPOLINES\n   int sum = 0;\n   int i;\n \n@@ -37,8 +38,7 @@ main (void)\n \n   if (z != 0x1b)\n     abort ();\n-#endif\n-  \n+\n   exit (0);\n }\n "}, {"sha": "2bdfece9c5be5c36f7cb41d4232466fc3e34f392", "filename": "gcc/testsuite/gcc.c-torture/execute/nestfunc-3.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-3.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,11 +1,11 @@\n+/* { dg-require-effective-target trampolines } */\n \n extern long foo (long, long, long (*) (long, long));\n extern long use (long (*) (long, long), long, long);\n \n int\n main (void)\n {\n-#ifndef NO_TRAMPOLINES\n   long sum = 0;\n   long i;\n \n@@ -42,7 +42,6 @@ main (void)\n \n   if ((sum & 0xffffffff) != 0xbecfcbf5)\n     abort ();\n-#endif\n \n   exit (0);\n }"}, {"sha": "fc9ad955a9f2089e807e7bef24e3e523450cee4e", "filename": "gcc/testsuite/gcc.c-torture/execute/nestfunc-5.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-5.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,7 +1,8 @@\n+/* { dg-require-effective-target trampolines } */\n+\n extern void abort (void);\n extern void exit (int);\n \n-#ifndef NO_TRAMPOLINES\n static void recursive (int n, void (*proc) (void))\n {\n   __label__ l1;\n@@ -31,6 +32,3 @@ int main ()\n   recursive (10, abort);\n   abort ();\n }\n-#else\n-int main () { return 0; }\n-#endif"}, {"sha": "fad729aaba3b6e02a9a9edfad1338ab6c2fb1cf2", "filename": "gcc/testsuite/gcc.c-torture/execute/nestfunc-6.c", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fnestfunc-6.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,8 +1,8 @@\n+/* { dg-require-effective-target trampolines } */\n+\n /* Test that the GP gets properly restored, either by the nonlocal\n    receiver or the nested function.  */\n \n-#ifndef NO_TRAMPOLINES\n-\n typedef __SIZE_TYPE__ size_t;\n extern void abort (void);\n extern void exit (int);\n@@ -23,7 +23,3 @@ int main ()\n  nonlocal:\n   exit (0);\n }\n-\n-#else\n-int main() { return 0; }\n-#endif"}, {"sha": "f1d12983ef34e4ec4ff0688398dcec7d13a9f911", "filename": "gcc/testsuite/gcc.c-torture/execute/pr24135.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr24135.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr24135.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr24135.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,4 +1,5 @@\n-#ifndef NO_TRAMPOLINES\n+/* { dg-require-effective-target trampolines } */\n+\n extern void abort (void);\n \n int x(int a, int b)\n@@ -41,6 +42,3 @@ int main ()\n \n   return 0;\n }\n-#else\n-int main() { return 0; }\n-#endif"}, {"sha": "8ff09ebc9fe5fca34171bac0295a1abccd51f3d2", "filename": "gcc/testsuite/gcc.dg/Wtrampolines.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2FWtrampolines.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2FWtrampolines.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWtrampolines.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -5,8 +5,6 @@\n /* { dg-require-effective-target trampolines } */\n /* { dg-options \"-O2 -Wtrampolines\" } */\n \n-#ifndef NO_TRAMPOLINES\n-\n /* This used to fail on various versions of Solaris 2 because the\n    trampoline couldn't be made executable.  */\n \n@@ -46,12 +44,10 @@ void foo (void)\n       abort();\n   }\n }\n-#endif\n \n int main (void)\n {\n-#ifndef NO_TRAMPOLINES\n   foo ();\n-#endif\n+\n   return 0;\n }"}, {"sha": "98a47a8ce96f9507419d623ed6484fbbf8d1d803", "filename": "gcc/testsuite/gcc.dg/torture/stackalign/comp-goto-1.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fcomp-goto-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fcomp-goto-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fcomp-goto-1.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n /* { dg-require-effective-target label_values } */\n+/* { dg-require-effective-target trampolines } */\n \n #ifdef STACK_SIZE\n #define DEPTH ((STACK_SIZE) / 512 + 1)\n@@ -10,7 +11,6 @@\n extern void abort (void);\n extern void exit (int);\n \n-#if !defined (NO_TRAMPOLINES)\n int\n x(int a)\n {\n@@ -29,14 +29,12 @@ x(int a)\n  xlab:;\n   return a;\n }\n-#endif\n \n int\n main ()\n {\n-#if !defined (NO_TRAMPOLINES)\n   if (x (DEPTH) != DEPTH)\n     abort ();\n-#endif\n+\n   exit (0);\n }"}, {"sha": "e6bf3645c59973c007c3adacea4f5e6ead4cd3e6", "filename": "gcc/testsuite/gcc.dg/torture/stackalign/nested-5.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnested-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnested-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnested-5.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,9 +1,9 @@\n /* { dg-do run } */\n+/* { dg-require-effective-target trampolines } */\n \n extern void abort (void);\n extern void exit (int);\n \n-#ifndef NO_TRAMPOLINES\n static void recursive (int n, void (*proc) (void))\n {\n   __label__ l1;\n@@ -33,6 +33,3 @@ int main ()\n   recursive (10, abort);\n   abort ();\n }\n-#else\n-int main () { return 0; }\n-#endif"}, {"sha": "708cd9e89a9f3138fa009c84d56789a0f97b8f07", "filename": "gcc/testsuite/gcc.dg/torture/stackalign/nested-6.c", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnested-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnested-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnested-6.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,6 +1,5 @@\n /* { dg-do run } */\n-\n-#ifndef NO_TRAMPOLINES\n+/* { dg-require-effective-target trampolines } */\n \n typedef __SIZE_TYPE__ size_t;\n extern void abort (void);\n@@ -22,7 +21,3 @@ int main ()\n  nonlocal:\n   exit (0);\n }\n-\n-#else\n-int main() { return 0; }\n-#endif"}, {"sha": "39525d7f8c68b039cbb9ab2b0398d4a1b034fe3e", "filename": "gcc/testsuite/gcc.dg/torture/stackalign/non-local-goto-3.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-3.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,7 +1,7 @@\n /* { dg-do run } */\n /* { dg-require-effective-target nonlocal_goto } */\n+/* { dg-require-effective-target trampolines } */\n \n-#ifndef NO_TRAMPOLINES\n extern void abort (void);\n \n int x(int a, int b)\n@@ -38,6 +38,3 @@ int main ()\n \n   return 0;\n }\n-#else\n-int main() { return 0; }\n-#endif"}, {"sha": "591428d08b726c1c1bb731cccdc8b738c9d58f24", "filename": "gcc/testsuite/gcc.dg/torture/stackalign/non-local-goto-4.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-4.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do run } */\n /* { dg-require-effective-target nonlocal_goto } */\n /* { dg-require-effective-target label_values } */\n+/* { dg-require-effective-target trampolines } */\n \n extern void abort (void);\n extern void exit (int);\n@@ -11,7 +12,6 @@ extern void exit (int);\n #define DEPTH 1000\n #endif\n \n-#if !defined (NO_TRAMPOLINES)\n int\n x(int a)\n {\n@@ -26,14 +26,12 @@ x(int a)\n  xlab:;\n   return a;\n }\n-#endif\n \n int\n main ()\n {\n-#if !defined (NO_TRAMPOLINES)\n   if (x (DEPTH) != DEPTH)\n     abort ();\n-#endif\n+\n   exit (0);\n }"}, {"sha": "b158cea5436749ed37bfb5de6be67d6e936e2a22", "filename": "gcc/testsuite/gcc.dg/torture/stackalign/non-local-goto-5.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fstackalign%2Fnon-local-goto-5.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,13 +1,10 @@\n /* { dg-do run } */\n /* { dg-require-effective-target nonlocal_goto } */\n /* { dg-require-effective-target label_values } */\n+/* { dg-require-effective-target trampolines } */\n \n extern void exit (int);\n-#if !defined (NO_TRAMPOLINES)\n extern void abort (void);\n int s(int i){if(i>0){__label__ l1;int f(int i){if(i==2)goto l1;return 0;}return f(i);l1:;}return 1;}\n int x(){return s(0)==1&&s(1)==0&&s(2)==1;}\n int main(){if(x()!=1)abort();exit(0);}\n-#else\n-int main(){ exit (0); }\n-#endif"}, {"sha": "e3dcf573a94bad28492ea4fb6a3fe3c9302bad1d", "filename": "gcc/testsuite/gcc.dg/trampoline-1.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftrampoline-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftrampoline-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftrampoline-1.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -5,8 +5,6 @@\n /* { dg-require-effective-target trampolines } */\n /* { dg-options \"-O2\" } */\n \n-#ifndef NO_TRAMPOLINES\n-\n /* This used to fail on various versions of Solaris 2 because the\n    trampoline couldn't be made executable.  */\n \n@@ -46,12 +44,9 @@ void foo (void)\n       abort();\n   }\n }\n-#endif\n \n int main (void)\n {\n-#ifndef NO_TRAMPOLINES\n   foo ();\n-#endif\n   return 0;\n }"}, {"sha": "4074b750645a1a8618cfc1788c36f6d262c9e795", "filename": "gcc/testsuite/gcc.dg/tree-prof/pr44777.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Fpr44777.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Fpr44777.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-prof%2Fpr44777.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -1,5 +1,6 @@\n /* PR middle-end/44777 */\n /* { dg-require-effective-target label_values } */\n+/* { dg-require-effective-target trampolines } */\n /* { dg-options \"-O0\" } */\n /* A variant of gcc.c-torture/execute/comp-goto-2.c.  */\n \n@@ -12,7 +13,6 @@ extern void exit (int);\n #define DEPTH 1000\n #endif\n \n-#if !defined (NO_TRAMPOLINES)\n int\n x (int a)\n {\n@@ -31,14 +31,13 @@ x (int a)\n  xlab:;\n   return a;\n }\n-#endif\n \n int\n main ()\n {\n-#if !defined (NO_TRAMPOLINES)\n+\n   if (x (DEPTH) != DEPTH)\n     abort ();\n-#endif\n+\n   exit (0);\n }"}, {"sha": "9368524c145b0b92933e067cfc46792fa9df5552", "filename": "gcc/testsuite/gcc.target/i386/pr67770.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67770.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67770.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67770.c?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -3,18 +3,15 @@\n /* { dg-require-effective-target trampolines } */\n /* { dg-options \"-O2\" } */\n \n-#ifndef NO_TRAMPOLINES\n __attribute__ ((noinline)) void\n foo (int i, void (* __attribute__ ((regparm (3))) bar) (int))\n {\n   bar (i);\n }\n-#endif\n \n int\n main ()\n {\n-#ifndef NO_TRAMPOLINES\n   int p = 0;\n \n   __attribute__ ((regparm (3), noinline)) void\n@@ -35,6 +32,6 @@ main ()\n \n   if (p != 2)\n     __builtin_abort ();\n-#endif\n+\n   return 0;\n }"}, {"sha": "fd32a30fdf6ecd49728786fa3f90fe475ebc9a64", "filename": "gcc/testsuite/lib/gcc.exp", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Flib%2Fgcc.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Flib%2Fgcc.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgcc.exp?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -144,9 +144,6 @@ proc gcc_target_compile { source dest type options } {\n     if [target_info exists gcc,stack_size] {\n \tlappend options \"additional_flags=-DSTACK_SIZE=[target_info gcc,stack_size]\"\n     }\n-    if [target_info exists gcc,no_trampolines] {\n-\tlappend options \"additional_flags=-DNO_TRAMPOLINES\"\n-    }\n     if [target_info exists gcc,signal_suppress] {\n \tlappend options \"additional_flags=-DSIGNAL_SUPPRESS\"\n     }"}, {"sha": "c8b9741eeda6a27413bbf916dcb8206e7059f91d", "filename": "gcc/testsuite/lib/objc.exp", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Flib%2Fobjc.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f49ad74377e14a9cf0886b3539eeace2111428/gcc%2Ftestsuite%2Flib%2Fobjc.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fobjc.exp?ref=73f49ad74377e14a9cf0886b3539eeace2111428", "patch": "@@ -194,9 +194,6 @@ proc objc_target_compile { source dest type options } {\n     if [target_info exists objc,stack_size] {\n \tlappend options \"additional_flags=-DSTACK_SIZE=[target_info objc,stack_size]\"\n     }\n-    if [target_info exists objc,no_trampolines] {\n-\tlappend options \"additional_flags=-DNO_TRAMPOLINES\"\n-    }\n \n     # TEST_ALWAYS_FLAGS are flags that should be passed to every\n     # compilation.  They are passed first to allow individual"}]}