{"sha": "96c6f6286724d2cd495e0bf8c7f91e063d00322c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZjNmY2Mjg2NzI0ZDJjZDQ5NWUwYmY4YzdmOTFlMDYzZDAwMzIyYw==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@redhat.com", "date": "2001-03-21T23:50:29Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2001-03-21T23:50:29Z"}, "message": "re PR java/2333 (ICE in mark_reference_fields)\n\n2001-03-21  Alexandre Petit-Bianco  <apbianco@redhat.com>\n\n\t* class.c (layout_class): Fixed push_super_field's second\n\targument. Fixes PR java/2333.\n\t(jdep_resolve_class): Reset TYPE_SIZE if `error_mark_node', it's\n\ttoo early to lay innerclasses out.\n\n(http://gcc.gnu.org/ml/gcc-patches/2001-03/msg01582.html)\n\nFrom-SVN: r40719", "tree": {"sha": "af858a39ad83d13fcd0b7923918df646055fe5f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/af858a39ad83d13fcd0b7923918df646055fe5f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96c6f6286724d2cd495e0bf8c7f91e063d00322c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96c6f6286724d2cd495e0bf8c7f91e063d00322c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96c6f6286724d2cd495e0bf8c7f91e063d00322c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96c6f6286724d2cd495e0bf8c7f91e063d00322c/comments", "author": null, "committer": null, "parents": [{"sha": "71cb92861565bf4bad31fc1b2db27546528eeaeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71cb92861565bf4bad31fc1b2db27546528eeaeb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71cb92861565bf4bad31fc1b2db27546528eeaeb"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "6a23f8e6b7e4aad3af07c20eedcf3a8b94931aed", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96c6f6286724d2cd495e0bf8c7f91e063d00322c/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96c6f6286724d2cd495e0bf8c7f91e063d00322c/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=96c6f6286724d2cd495e0bf8c7f91e063d00322c", "patch": "@@ -1,3 +1,10 @@\n+2001-03-21  Alexandre Petit-Bianco  <apbianco@redhat.com>\n+\n+\t* class.c (layout_class): Fixed push_super_field's second\n+\targument. Fixes PR java/2333.\n+\t(jdep_resolve_class): Reset TYPE_SIZE if `error_mark_node', it's\n+\ttoo early to lay innerclasses out.\n+\n 2001-03-20  Tom Tromey  <tromey@redhat.com>\n \n \t* lex.c (java_read_unicode): Only accept leading `u's."}, {"sha": "c99dbaa262b9882bf9e1c90550b293f24288de42", "filename": "gcc/java/class.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96c6f6286724d2cd495e0bf8c7f91e063d00322c/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96c6f6286724d2cd495e0bf8c7f91e063d00322c/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=96c6f6286724d2cd495e0bf8c7f91e063d00322c", "patch": "@@ -1693,7 +1693,7 @@ layout_class (this_class)\n \t  return;\n \t}\n       if (TYPE_SIZE (this_class) == NULL_TREE)\n-\tpush_super_field (this_class, super_class);\n+\tpush_super_field (this_class, maybe_super_class);\n     }\n \n   for (field = TYPE_FIELDS (this_class);"}, {"sha": "d1adac6c3384874d1f3a0f22db381d8984d12b43", "filename": "gcc/java/parse.y", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96c6f6286724d2cd495e0bf8c7f91e063d00322c/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96c6f6286724d2cd495e0bf8c7f91e063d00322c/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=96c6f6286724d2cd495e0bf8c7f91e063d00322c", "patch": "@@ -5277,7 +5277,11 @@ jdep_resolve_class (dep)\n     {\n       tree inner = TREE_TYPE (decl);\n       if (! CLASS_LOADED_P (inner))\n-\tsafe_layout_class (inner);\n+\t{\n+\t  safe_layout_class (inner);\n+\t  if (TYPE_SIZE (inner) == error_mark_node)\n+\t    TYPE_SIZE (inner) = NULL_TREE;\n+\t}\n       check_inner_class_access (decl, JDEP_ENCLOSING (dep), JDEP_WFL (dep));\n     }\n   return decl;"}]}