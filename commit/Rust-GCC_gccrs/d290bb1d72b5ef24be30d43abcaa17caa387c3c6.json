{"sha": "d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI5MGJiMWQ3MmI1ZWYyNGJlMzBkNDNhYmNhYTE3Y2FhMzg3YzNjNg==", "commit": {"author": {"name": "Ilya Enkovich", "email": "ilya.enkovich@intel.com", "date": "2015-01-29T12:24:06Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-01-29T12:24:06Z"}, "message": "i386-protos.h (ix86_use_pseudo_pic_reg): New.\n\n\t* config/i386/i386-protos.h (ix86_use_pseudo_pic_reg): New.\n\t* config/i386/i386.h (PIC_OFFSET_TABLE_REGNUM): Simplify by\n\tusing x86_use_pseudo_pic_reg.\n\t* config/i386/i386.c (ix86_conditional_register_usage): Remove\n\tsupport for fixed PIC register.\n\t(ix86_use_pseudo_pic_reg): Not static any more.\n\n\nCo-Authored-By: Uros Bizjak <ubizjak@gmail.com>\n\nFrom-SVN: r220242", "tree": {"sha": "c243f2fd2e0ea79c58cd180cf87aa906b319615e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c243f2fd2e0ea79c58cd180cf87aa906b319615e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/comments", "author": {"login": "ienkovich", "id": 18308708, "node_id": "MDQ6VXNlcjE4MzA4NzA4", "avatar_url": "https://avatars.githubusercontent.com/u/18308708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ienkovich", "html_url": "https://github.com/ienkovich", "followers_url": "https://api.github.com/users/ienkovich/followers", "following_url": "https://api.github.com/users/ienkovich/following{/other_user}", "gists_url": "https://api.github.com/users/ienkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ienkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ienkovich/subscriptions", "organizations_url": "https://api.github.com/users/ienkovich/orgs", "repos_url": "https://api.github.com/users/ienkovich/repos", "events_url": "https://api.github.com/users/ienkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/ienkovich/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e11627e99afac67809c632f2ab030461129bdb02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e11627e99afac67809c632f2ab030461129bdb02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e11627e99afac67809c632f2ab030461129bdb02"}], "stats": {"total": 32, "additions": 18, "deletions": 14}, "files": [{"sha": "295884e78706524dac1d429159f1d1d77fcc9471", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "patch": "@@ -1,3 +1,13 @@\n+2015-01-29  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\t    Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386-protos.h (ix86_use_pseudo_pic_reg): New.\n+\t* config/i386/i386.h (PIC_OFFSET_TABLE_REGNUM): Simplify by\n+\tusing x86_use_pseudo_pic_reg.\n+\t* config/i386/i386.c (ix86_conditional_register_usage): Remove\n+\tsupport for fixed PIC register.\n+\t(ix86_use_pseudo_pic_reg): Not static any more.\n+\n 2015-01-29  Ilya Enkovich  <ilya.enkovich@intel.com>\n \n \tPR middle-end/64805"}, {"sha": "39624270638f211c20be98397cd2295c6bf11c70", "filename": "gcc/config/i386/i386-protos.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2Fconfig%2Fi386%2Fi386-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2Fconfig%2Fi386%2Fi386-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-protos.h?ref=d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "patch": "@@ -40,6 +40,8 @@ extern void ix86_output_addr_diff_elt (FILE *, int, int);\n extern enum calling_abi ix86_cfun_abi (void);\n extern enum calling_abi ix86_function_type_abi (const_tree);\n \n+extern bool ix86_use_pseudo_pic_reg (void);\n+\n extern void ix86_reset_previous_fndecl (void);\n \n #ifdef RTX_CODE"}, {"sha": "fecb855322ce7513379b8b31c92f3c8ef85c998e", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "patch": "@@ -4384,12 +4384,6 @@ static void\n ix86_conditional_register_usage (void)\n {\n   int i, c_mask;\n-  unsigned int j;\n-\n-  /* The PIC register, if it exists, is fixed.  */\n-  j = PIC_OFFSET_TABLE_REGNUM;\n-  if (j != INVALID_REGNUM)\n-    fixed_regs[j] = call_used_regs[j] = 1;\n \n   /* For 32-bit targets, squash the REX registers.  */\n   if (! TARGET_64BIT)\n@@ -6265,7 +6259,7 @@ ix86_maybe_switch_abi (void)\n \n /* Return 1 if pseudo register should be created and used to hold\n    GOT address for PIC code.  */\n-static bool\n+bool\n ix86_use_pseudo_pic_reg (void)\n {\n   if ((TARGET_64BIT"}, {"sha": "5d1e5e0cff8858e0cb1c223f56ee5a46d3430d53", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d290bb1d72b5ef24be30d43abcaa17caa387c3c6/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=d290bb1d72b5ef24be30d43abcaa17caa387c3c6", "patch": "@@ -1256,13 +1256,11 @@ extern const char *host_detect_local_cpu (int argc, const char **argv);\n #define REAL_PIC_OFFSET_TABLE_REGNUM  (TARGET_64BIT ? R15_REG : BX_REG)\n \n #define PIC_OFFSET_TABLE_REGNUM\t\t\t\t\t\t\\\n-  ((TARGET_64BIT && (ix86_cmodel == CM_SMALL_PIC\t\t\t\\\n-                     || TARGET_PECOFF))\t\t\t\t\t\\\n-   || !flag_pic\t\t\t\t\t\t\t\t\\\n-   ? INVALID_REGNUM\t\t\t\t\t\t\t\\\n-   : pic_offset_table_rtx\t\t\t\t\t\t\\\n-     ? INVALID_REGNUM\t\t\t\t\t\t\t\\\n-     : REAL_PIC_OFFSET_TABLE_REGNUM)\n+  (ix86_use_pseudo_pic_reg ()\t\t\t\t\t\t\\\n+   ? (pic_offset_table_rtx\t\t\t\t\t\t\\\n+      ? INVALID_REGNUM\t\t\t\t\t\t\t\\\n+      : REAL_PIC_OFFSET_TABLE_REGNUM)\t\t\t\t\t\\\n+   : INVALID_REGNUM)\n \n #define GOT_SYMBOL_NAME \"_GLOBAL_OFFSET_TABLE_\"\n "}]}