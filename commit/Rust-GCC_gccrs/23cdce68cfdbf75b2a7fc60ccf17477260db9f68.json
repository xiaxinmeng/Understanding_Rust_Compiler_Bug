{"sha": "23cdce68cfdbf75b2a7fc60ccf17477260db9f68", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjNjZGNlNjhjZmRiZjc1YjJhN2ZjNjBjY2YxNzQ3NzI2MGRiOWY2OA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-04-14T17:45:17Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-04-14T17:45:17Z"}, "message": "fold-const.c (extract_muldiv): Don't distribute and widen multiply across plus for non-sizetype unsigned types.\n\n        * fold-const.c (extract_muldiv): Don't distribute and widen\n        multiply across plus for non-sizetype unsigned types.\n\nFrom-SVN: r33151", "tree": {"sha": "8cc9866caf0c8fef6ebbca671309cc014b1a0e80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8cc9866caf0c8fef6ebbca671309cc014b1a0e80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23cdce68cfdbf75b2a7fc60ccf17477260db9f68", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23cdce68cfdbf75b2a7fc60ccf17477260db9f68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23cdce68cfdbf75b2a7fc60ccf17477260db9f68", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23cdce68cfdbf75b2a7fc60ccf17477260db9f68/comments", "author": null, "committer": null, "parents": [{"sha": "6e628096889effd0046ea70a7c6910e181af7510", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e628096889effd0046ea70a7c6910e181af7510", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e628096889effd0046ea70a7c6910e181af7510"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "29c1d1f22c86934a6a0fbe75cfac04c839a7ac30", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23cdce68cfdbf75b2a7fc60ccf17477260db9f68/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23cdce68cfdbf75b2a7fc60ccf17477260db9f68/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=23cdce68cfdbf75b2a7fc60ccf17477260db9f68", "patch": "@@ -1,3 +1,8 @@\n+2000-04-14  Richard Henderson  <rth@cygnus.com>\n+\n+        * fold-const.c (extract_muldiv): Don't distribute and widen\n+        multiply across plus for non-sizetype unsigned types.\n+\n 2000-04-14  Richard Henderson  <rth@cygnus.com>\n \n \t* flow.c (find_auto_inc): Don't autoinc eliminable registers."}, {"sha": "991dddda973062a8b3671783bfb23b48f3fcdc85", "filename": "gcc/fold-const.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23cdce68cfdbf75b2a7fc60ccf17477260db9f68/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23cdce68cfdbf75b2a7fc60ccf17477260db9f68/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=23cdce68cfdbf75b2a7fc60ccf17477260db9f68", "patch": "@@ -4480,6 +4480,14 @@ extract_muldiv (t, c, code, wide_type)\n       if (op1 == 0 || TREE_OVERFLOW (op1))\n \tbreak;\n \n+      /* If we have an unsigned type is not a sizetype, we cannot widen\n+\t the operation since it will change the result if the original\n+\t computation overflowed.  */\n+      if (TREE_UNSIGNED (ctype)\n+\t  && ! TYPE_IS_SIZETYPE (ctype)\n+\t  && ctype != type)\n+\tbreak;\n+\n       /* If we were able to eliminate our operation from the first side,\n \t apply our operation to the second side and reform the PLUS.  */\n       if (t1 != 0 && (TREE_CODE (t1) != code || code == MULT_EXPR))"}]}