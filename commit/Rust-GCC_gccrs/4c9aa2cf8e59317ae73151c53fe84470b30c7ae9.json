{"sha": "4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGM5YWEyY2Y4ZTU5MzE3YWU3MzE1MWM1M2ZlODQ0NzBiMzBjN2FlOQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2017-12-19T17:50:54Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2017-12-19T17:50:54Z"}, "message": "SFN: don't drop markers for skipping var-tracking\n\nAlthough debug markers are more useful when bind stmts are placed\namong them, there is value in keeping them even when VTA limits are\nexceeded.\n\nfor  gcc/ChangeLog\n\n\tPR debug/83422\n\t* var-tracking.c (vt_debug_insns_local): Do not drop markers.\n\t(variable_tracking_main_1): Keep markers even when VTA fails.\n\nfor  gcc/testsuite/ChangeLog\n\n\tPR debug/83422\n\t* gcc.dg/pr83422.c: New.\n\nFrom-SVN: r255834", "tree": {"sha": "4db39b7b2f7ca1c0a167a048b4f1db82856d6091", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4db39b7b2f7ca1c0a167a048b4f1db82856d6091"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/comments", "author": null, "committer": null, "parents": [{"sha": "afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afa7c9039c69e4bd5da6caab4df35ea32fd51db5"}], "stats": {"total": 27, "additions": 20, "deletions": 7}, "files": [{"sha": "328ce281e812b47de51db330c87ba693ed198b50", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "patch": "@@ -1,5 +1,9 @@\n 2017-12-19  Alexandre Oliva <aoliva@redhat.com>\n \n+\tPR debug/83422\n+\t* var-tracking.c (vt_debug_insns_local): Do not drop markers.\n+\t(variable_tracking_main_1): Keep markers even when VTA fails.\n+\n \tPR bootstrap/83396\n \t* cfgexpand.c (expand_gimple_basic_block): Expand label first,\n \teven if there are markers before it."}, {"sha": "81f96c6ce079e4af89f9d44abf6293b22251cad7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "patch": "@@ -1,3 +1,8 @@\n+2017-12-19  Alexandre Oliva <aoliva@redhat.com>\n+\n+\tPR debug/83422\n+\t* gcc.dg/pr83422.c: New.\n+\n 2017-12-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR testsuite/83454"}, {"sha": "adbf7599d88558f7ccc0552bb53f1e088cabb6c4", "filename": "gcc/testsuite/gcc.dg/pr83422.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr83422.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr83422.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr83422.c?ref=4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "patch": "@@ -0,0 +1,9 @@\n+/* PR debug/83422 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O -g --param=max-vartrack-size=1\" } */\n+\n+int\n+foo(int i, int j, int k)\n+{\n+   return i + j + k;\n+}"}, {"sha": "4a96a039d14b6879eca36c17765ff674ca360c71", "filename": "gcc/var-tracking.c", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2Fvar-tracking.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c9aa2cf8e59317ae73151c53fe84470b30c7ae9/gcc%2Fvar-tracking.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvar-tracking.c?ref=4c9aa2cf8e59317ae73151c53fe84470b30c7ae9", "patch": "@@ -10338,12 +10338,9 @@ delete_vta_debug_insns (void)\n    handled as well..  */\n \n static void\n-vt_debug_insns_local (bool skipped)\n+vt_debug_insns_local (bool skipped ATTRIBUTE_UNUSED)\n {\n-  /* ??? Just skip it all for now.  If we skipped the global pass,\n-     arrange for stmt markers to be dropped as well.  */\n-  if (skipped)\n-    cfun->debug_nonbind_markers = 0;\n+  /* ??? Just skip it all for now.  */\n   delete_vta_debug_insns ();\n }\n \n@@ -10445,8 +10442,6 @@ variable_tracking_main_1 (void)\n     {\n       vt_finalize ();\n \n-      cfun->debug_nonbind_markers = 0;\n-\n       delete_vta_debug_insns ();\n \n       /* This is later restored by our caller.  */"}]}