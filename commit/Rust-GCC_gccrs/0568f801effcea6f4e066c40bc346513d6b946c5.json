{"sha": "0568f801effcea6f4e066c40bc346513d6b946c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDU2OGY4MDFlZmZjZWE2ZjRlMDY2YzQwYmMzNDY1MTNkNmI5NDZjNQ==", "commit": {"author": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2021-01-15T14:34:19Z"}, "committer": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2021-01-21T13:35:19Z"}, "message": "arm: [testuiste] Fix ivopts.c target test [PR96372]\n\ngcc/\n2021-01-15  Andrea Corallo  <andrea.corallo@arm.com>\n\tPR target/96372\n\t* doc/sourcebuild.texi (arm_thumb2_no_arm_v8_1_lob): Document.\n\ngcc/testsuite/\n2021-01-15  Andrea Corallo  <andrea.corallo@arm.com>\n\tPR target/96372\n\t* lib/target-supports.exp\n\t(check_effective_target_arm_thumb2_no_arm_v8_1_lob): Define proc.\n\t* gcc.target/arm/ivopts.c: Use target\n\t'arm_thumb2_no_arm_v8_1_lob'.", "tree": {"sha": "89d050bb629a8f729e2db7c5eb96ab7f232a22b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89d050bb629a8f729e2db7c5eb96ab7f232a22b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0568f801effcea6f4e066c40bc346513d6b946c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0568f801effcea6f4e066c40bc346513d6b946c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0568f801effcea6f4e066c40bc346513d6b946c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0568f801effcea6f4e066c40bc346513d6b946c5/comments", "author": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9be0a89c95cc30089786faa26b89e8d7444c879e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9be0a89c95cc30089786faa26b89e8d7444c879e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9be0a89c95cc30089786faa26b89e8d7444c879e"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "cbb7a5b153da0cce75a17002e890c9d6774bc339", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0568f801effcea6f4e066c40bc346513d6b946c5/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0568f801effcea6f4e066c40bc346513d6b946c5/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=0568f801effcea6f4e066c40bc346513d6b946c5", "patch": "@@ -2058,6 +2058,11 @@ ARM Target supports executing the Armv8.1-M Mainline Low Overhead Loop\n instructions @code{DLS} and @code{LE}.\n Some multilibs may be incompatible with these options.\n \n+@item arm_thumb2_no_arm_v8_1_lob\n+ARM target where Thumb-2 is used without options but does not support\n+executing the Armv8.1-M Mainline Low Overhead Loop instructions\n+@code{DLS} and @code{LE}.\n+\n @item arm_thumb2_ok_no_arm_v8_1_lob\n ARM target generates Thumb-2 code for @code{-mthumb} but does not\n support executing the Armv8.1-M Mainline Low Overhead Loop"}, {"sha": "d7d72a59d9c35f44f917f74292352eb67a481442", "filename": "gcc/testsuite/gcc.target/arm/ivopts.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0568f801effcea6f4e066c40bc346513d6b946c5/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fivopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0568f801effcea6f4e066c40bc346513d6b946c5/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fivopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fivopts.c?ref=0568f801effcea6f4e066c40bc346513d6b946c5", "patch": "@@ -11,6 +11,6 @@ tr5 (short array[], int n)\n }\n \n /* { dg-final { scan-tree-dump-times \"PHI <\" 1 \"ivopts\"} } */\n-/* { dg-final { object-size text <= 20 { target { arm_thumb2_ok_no_arm_v8_1_lob } } } } */\n+/* { dg-final { object-size text <= 20 { target { arm_thumb2_no_arm_v8_1_lob } } } } */\n /* { dg-final { object-size text <= 32 { target { arm_nothumb && { ! arm_iwmmxt_ok } } } } } */\n /* { dg-final { object-size text <= 36 { target { arm_nothumb && arm_iwmmxt_ok }  } } } */"}, {"sha": "0d351c8fbad29a592f428fe541764eda4b0f73d5", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0568f801effcea6f4e066c40bc346513d6b946c5/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0568f801effcea6f4e066c40bc346513d6b946c5/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=0568f801effcea6f4e066c40bc346513d6b946c5", "patch": "@@ -10658,7 +10658,20 @@ proc check_effective_target_arm_v8_1_lob_ok { } {\n     }\n }\n \n-# Return 1 is this is an ARM target where -mthumb causes Thumb-2 to be\n+# Return 1 if this is an ARM target where Thumb-2 is used without\n+# options added by the test and the target does not support executing\n+# the Armv8.1-M Mainline Low Overhead Loop, 0 otherwise.  The test is\n+# valid for ARM.\n+\n+proc check_effective_target_arm_thumb2_no_arm_v8_1_lob { } {\n+    if { [check_effective_target_arm_thumb2]\n+\t && ![check_effective_target_arm_v8_1_lob_ok] } {\n+\treturn 1\n+    }\n+    return 0\n+}\n+\n+# Return 1 if this is an ARM target where -mthumb causes Thumb-2 to be\n # used and the target does not support executing the Armv8.1-M\n # Mainline Low Overhead Loop, 0 otherwise.  The test is valid for ARM.\n "}]}