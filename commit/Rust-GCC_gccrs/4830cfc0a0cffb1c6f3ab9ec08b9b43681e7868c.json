{"sha": "4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDgzMGNmYzBhMGNmZmIxYzZmM2FiOWVjMDhiOWI0MzY4MWU3ODY4Yw==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2018-02-28T13:45:59Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2018-02-28T13:45:59Z"}, "message": "Fix timevar format and fix tests (PR testsuite/84597).\n\n2018-02-28  Martin Liska  <mliska@suse.cz>\n\n\tPR testsuite/84597\n\t* timevar.c (timer::print): Fix format to properly print 100%\n\tvalues.\n2018-02-28  Martin Liska  <mliska@suse.cz>\n\n\tPR testsuite/84597\n\t* g++.dg/ext/timevar1.C: Fix pruned patterns.\n\t* g++.dg/ext/timevar2.C: Likewise.\n\nFrom-SVN: r258063", "tree": {"sha": "8c0ed49dd4f9534da832f51ce8b959071fe4be19", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c0ed49dd4f9534da832f51ce8b959071fe4be19"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "095d8d4b238567c9b884714f673b7e1d0dae3f1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/095d8d4b238567c9b884714f673b7e1d0dae3f1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/095d8d4b238567c9b884714f673b7e1d0dae3f1e"}], "stats": {"total": 38, "additions": 24, "deletions": 14}, "files": [{"sha": "820b926ced79d88948de9a990967e811e22be257", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "patch": "@@ -1,3 +1,9 @@\n+2018-02-28  Martin Liska  <mliska@suse.cz>\n+\n+\tPR testsuite/84597\n+\t* timevar.c (timer::print): Fix format to properly print 100%\n+\tvalues.\n+\n 2018-02-28  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/84607"}, {"sha": "f799a93685bd030ffda5afcae4d0906e976613aa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "patch": "@@ -1,3 +1,9 @@\n+2018-02-28  Martin Liska  <mliska@suse.cz>\n+\n+\tPR testsuite/84597\n+\t* g++.dg/ext/timevar1.C: Fix pruned patterns.\n+\t* g++.dg/ext/timevar2.C: Likewise.\n+\n 2018-02-28  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* c-c++-common/dump-ada-spec-8.c: New test."}, {"sha": "3f891a50aba362b4cc911fe8f68cc0a32782d3a3", "filename": "gcc/testsuite/g++.dg/ext/timevar1.C", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftimevar1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftimevar1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftimevar1.C?ref=4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "patch": "@@ -1,9 +1,8 @@\n // PR c++/52248\n // { dg-options \"-ftime-report\" }\n // { dg-allow-blank-lines-in-output 1 }\n-// { dg-prune-output \"wall\" }\n-// { dg-prune-output \"times\" }\n-// { dg-prune-output \"TOTAL\" }\n+// { dg-prune-output \"Time variable\" }\n+// { dg-prune-output \" kB\" }\n // { dg-prune-output \"checks\" }\n \n void"}, {"sha": "dd96d45c01e04809e9b538c393af03ee6fdceae8", "filename": "gcc/testsuite/g++.dg/ext/timevar2.C", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftimevar2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftimevar2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftimevar2.C?ref=4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "patch": "@@ -1,8 +1,7 @@\n // PR c++/57524\n // { dg-options \"-ftime-report\" }\n-// { dg-prune-output \"wall\" }\n-// { dg-prune-output \"times\" }\n-// { dg-prune-output \"TOTAL\" }\n+// { dg-prune-output \"Time variable\" }\n+// { dg-prune-output \" kB\" }\n // { dg-prune-output \"checks\" }\n \n namespace detail {"}, {"sha": "2a7defbcc8c52e0a0df55fb00dfc2419203bf932", "filename": "gcc/timevar.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftimevar.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c/gcc%2Ftimevar.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftimevar.c?ref=4830cfc0a0cffb1c6f3ab9ec08b9b43681e7868c", "patch": "@@ -641,27 +641,27 @@ timer::print_row (FILE *fp,\n \n #ifdef HAVE_USER_TIME\n   /* Print user-mode time for this process.  */\n-  fprintf (fp, \"%7.2f (%2.0f%%)\",\n+  fprintf (fp, \"%7.2f (%3.0f%%)\",\n \t   elapsed.user,\n \t   (total->user == 0 ? 0 : elapsed.user / total->user) * 100);\n #endif /* HAVE_USER_TIME */\n \n #ifdef HAVE_SYS_TIME\n   /* Print system-mode time for this process.  */\n-  fprintf (fp, \"%7.2f (%2.0f%%)\",\n+  fprintf (fp, \"%7.2f (%3.0f%%)\",\n \t   elapsed.sys,\n \t   (total->sys == 0 ? 0 : elapsed.sys / total->sys) * 100);\n #endif /* HAVE_SYS_TIME */\n \n #ifdef HAVE_WALL_TIME\n   /* Print wall clock time elapsed.  */\n-  fprintf (fp, \"%7.2f (%2.0f%%)\",\n+  fprintf (fp, \"%7.2f (%3.0f%%)\",\n \t   elapsed.wall,\n \t   (total->wall == 0 ? 0 : elapsed.wall / total->wall) * 100);\n #endif /* HAVE_WALL_TIME */\n \n   /* Print the amount of ggc memory allocated.  */\n-  fprintf (fp, \"%8u kB (%2.0f%%)\",\n+  fprintf (fp, \"%8u kB (%3.0f%%)\",\n \t   (unsigned) (elapsed.ggc_mem >> 10),\n \t   (total->ggc_mem == 0\n \t    ? 0\n@@ -712,7 +712,7 @@ timer::print (FILE *fp)\n      TIMEVAR.  */\n   m_start_time = now;\n \n-  fprintf (fp, \"\\n%-35s%15s%13s%13s%17s\\n\", \"Time variable\", \"usr\", \"sys\",\n+  fprintf (fp, \"\\n%-35s%16s%14s%14s%18s\\n\", \"Time variable\", \"usr\", \"sys\",\n \t   \"wall\", \"GGC\");\n   if (m_jit_client_items)\n     fputs (\"GCC items:\\n\", fp);\n@@ -771,12 +771,12 @@ timer::print (FILE *fp)\n   fprintf (fp, \"%7.2f      \", total->user);\n #endif\n #ifdef HAVE_SYS_TIME\n-  fprintf (fp, \"%7.2f      \", total->sys);\n+  fprintf (fp, \"%8.2f      \", total->sys);\n #endif\n #ifdef HAVE_WALL_TIME\n-  fprintf (fp, \"%7.2f      \", total->wall);\n+  fprintf (fp, \"%8.2f      \", total->wall);\n #endif\n-  fprintf (fp, \"%8u kB\\n\", (unsigned) (total->ggc_mem >> 10));\n+  fprintf (fp, \"%9u kB\\n\", (unsigned) (total->ggc_mem >> 10));\n \n   if (CHECKING_P || flag_checking)\n     fprintf (fp, \"Extra diagnostic checks enabled; compiler may run slowly.\\n\");"}]}