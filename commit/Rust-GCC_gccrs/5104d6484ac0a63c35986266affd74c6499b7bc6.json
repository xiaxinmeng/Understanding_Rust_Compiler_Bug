{"sha": "5104d6484ac0a63c35986266affd74c6499b7bc6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTEwNGQ2NDg0YWMwYTYzYzM1OTg2MjY2YWZmZDc0YzY0OTliN2JjNg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@codesourcery.com", "date": "2006-05-21T15:16:19Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2006-05-21T15:16:19Z"}, "message": "re PR middle-end/26622 (ICE in extract_insn, at recog.c:2084)\n\ngcc/\n\tPR tree-optimization/26622.\n\t* fold-const.c (fold_ternary) <COND_EXPR>: Call fold_convert\n\ton arg1.\n\ngcc/testsuite/\n\tPR tree-optimization/26622.\n\t* gcc.c-torture/compile/pr26622.c: New.\n\nFrom-SVN: r113956", "tree": {"sha": "42db309cbd8105eba46e1b4544b28424d9cee81a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/42db309cbd8105eba46e1b4544b28424d9cee81a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5104d6484ac0a63c35986266affd74c6499b7bc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5104d6484ac0a63c35986266affd74c6499b7bc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5104d6484ac0a63c35986266affd74c6499b7bc6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5104d6484ac0a63c35986266affd74c6499b7bc6/comments", "author": null, "committer": null, "parents": [{"sha": "4d49d44d6619d257f7635ef4c449d0b036add018", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d49d44d6619d257f7635ef4c449d0b036add018", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d49d44d6619d257f7635ef4c449d0b036add018"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "7d644b8e4e9d5fe8628e0c3d7f1c381e8bd90898", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5104d6484ac0a63c35986266affd74c6499b7bc6", "patch": "@@ -5,6 +5,10 @@\n \tsimplifications of (eq/ne (xor x y) y) and\n \t(eq/ne (xor x y) x).\n \n+\tPR tree-optimization/26622.\n+\t* fold-const.c (fold_ternary) <COND_EXPR>: Call fold_convert\n+\ton arg1.\n+\n 2006-05-21  Bernhard Fischer  <aldot@gcc.gnu.org>\n \n \t* tree-cfg.c: Prune whitespace."}, {"sha": "8672e48f75676cc4747bb72848a30e0f0b6ef7cd", "filename": "gcc/fold-const.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=5104d6484ac0a63c35986266affd74c6499b7bc6", "patch": "@@ -11072,8 +11072,10 @@ fold_ternary (enum tree_code code, tree type, tree op0, tree op1, tree op2)\n           && integer_zerop (TREE_OPERAND (arg0, 1))\n           && integer_zerop (op2)\n           && (tem = sign_bit_p (TREE_OPERAND (arg0, 0), arg1)))\n-        return fold_convert (type, fold_build2 (BIT_AND_EXPR,\n-\t\t\t\t\t\tTREE_TYPE (tem), tem, arg1));\n+        return fold_convert (type,\n+\t\t\t     fold_build2 (BIT_AND_EXPR,\n+\t\t\t\t\t  TREE_TYPE (tem), tem,\n+\t\t\t\t\t  fold_convert (TREE_TYPE (tem), arg1)));\n \n       /* (A >> N) & 1 ? (1 << N) : 0 is simply A & (1 << N).  A & 1 was\n \t already handled above.  */"}, {"sha": "91f55ee50582bec0d690f55b9cfca21b06a40e72", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5104d6484ac0a63c35986266affd74c6499b7bc6", "patch": "@@ -4,6 +4,9 @@\n \t* gcc.c-torture/execute/pr27671-1.c: New.\n \t* gcc.dg/pr27671-2.c: Likewise.\n \n+\tPR tree-optimization/26622.\n+\t* gcc.c-torture/compile/pr26622.c: New.\n+\n 2006-05-21  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/27613"}, {"sha": "aea991ece35c5c78ffae24170f45630d766919c4", "filename": "gcc/testsuite/gcc.c-torture/compile/pr26622.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr26622.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5104d6484ac0a63c35986266affd74c6499b7bc6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr26622.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr26622.c?ref=5104d6484ac0a63c35986266affd74c6499b7bc6", "patch": "@@ -0,0 +1,11 @@\n+/* PR middle-end/26622\n+   fold_ternary used to create a tree with mismatching types, causing\n+   (const_int 128) to appear in QImode rtx.  */\n+\n+unsigned char g;\n+\n+unsigned long long\n+foo (void)\n+{\n+  return ((long long) ((g & 0x80) != 0)) << 7;\n+}"}]}