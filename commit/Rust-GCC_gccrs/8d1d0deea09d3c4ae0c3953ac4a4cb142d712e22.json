{"sha": "8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQxZDBkZWVhMDlkM2M0YWUwYzM5NTNhYzRhNGNiMTQyZDcxMmUyMg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-09-07T08:14:10Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-09-07T08:14:10Z"}, "message": "mips.c (mips_base_move_loop_invariants): New variable.\n\ngcc/\n\t* config/mips/mips.c (mips_base_move_loop_invariants): New variable.\n\t(mips_set_mips16_mode): Restore flag_move_loop_invariants, then set\n\tto 0 for MIPS16.\n\t(override_options): Set mips_base_move_loop_invariants.\n\nFrom-SVN: r128232", "tree": {"sha": "13b5209c9e95d149333eff4bc29b4557accb0f57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13b5209c9e95d149333eff4bc29b4557accb0f57"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22/comments", "author": null, "committer": null, "parents": [{"sha": "704aab3e3fa5514458136706d50e6a67e534364b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/704aab3e3fa5514458136706d50e6a67e534364b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/704aab3e3fa5514458136706d50e6a67e534364b"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "5d527d263b506904b0340033e810c477d0b76de1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22", "patch": "@@ -1,3 +1,10 @@\n+2007-09-07  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* config/mips/mips.c (mips_base_move_loop_invariants): New variable.\n+\t(mips_set_mips16_mode): Restore flag_move_loop_invariants, then set\n+\tto 0 for MIPS16.\n+\t(override_options): Set mips_base_move_loop_invariants.\n+\n 2007-09-07  Richard Sandiford  <richard@codesourcery.com>\n \n \t* config/mips/mips.opt (mcode-readable=): Move to keep list"}, {"sha": "a4771f7d5ea328301fbd0fa5adcbfbbae28a0ca5", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=8d1d0deea09d3c4ae0c3953ac4a4cb142d712e22", "patch": "@@ -626,6 +626,7 @@ static bool mips_base_mips16;\n /* Similar copies of option settings.  */\n static int mips_base_schedule_insns; /* flag_schedule_insns */\n static int mips_base_reorder_blocks_and_partition; /* flag_reorder... */\n+static int mips_base_move_loop_invariants; /* flag_move_loop_invariants */\n static int mips_base_align_loops; /* align_loops */\n static int mips_base_align_jumps; /* align_jumps */\n static int mips_base_align_functions; /* align_functions */\n@@ -5273,6 +5274,7 @@ mips_set_mips16_mode (int mips16_p)\n   align_functions = mips_base_align_functions;\n   flag_schedule_insns = mips_base_schedule_insns;\n   flag_reorder_blocks_and_partition = mips_base_reorder_blocks_and_partition;\n+  flag_move_loop_invariants = mips_base_move_loop_invariants;\n   flag_delayed_branch = mips_flag_delayed_branch;\n   \n   if (mips16_p) \n@@ -5285,9 +5287,16 @@ mips_set_mips16_mode (int mips16_p)\n       flag_schedule_insns = 0;\n \n       /* Don't do hot/cold partitioning.  The constant layout code expects\n-       the whole function to be in a single section.  */\n+\t the whole function to be in a single section.  */\n       flag_reorder_blocks_and_partition = 0;\n \n+      /* Don't move loop invariants, because it tends to increase\n+\t register pressure.  It also introduces an extra move in cases\n+\t where the constant is the first operand in a two-operand binary\n+\t instruction, or when it forms a register argument to a functon\n+\t call.  */\n+      flag_move_loop_invariants = 0;\n+\n       /* Silently disable -mexplicit-relocs since it doesn't apply\n \t to mips16 code.  Even so, it would overly pedantic to warn\n \t about \"-mips16 -mexplicit-relocs\", especially given that\n@@ -5804,6 +5813,7 @@ override_options (void)\n   mips_base_target_flags = target_flags;\n   mips_base_schedule_insns = flag_schedule_insns;\n   mips_base_reorder_blocks_and_partition = flag_reorder_blocks_and_partition;\n+  mips_base_move_loop_invariants = flag_move_loop_invariants;\n   mips_base_align_loops = align_loops;\n   mips_base_align_jumps = align_jumps;\n   mips_base_align_functions = align_functions;"}]}