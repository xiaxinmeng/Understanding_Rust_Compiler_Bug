{"sha": "d4759fc61be363dd5a4cf807298a315ce1e36c40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ3NTlmYzYxYmUzNjNkZDVhNGNmODA3Mjk4YTMxNWNlMWUzNmM0MA==", "commit": {"author": {"name": "Felix Yang", "email": "fei.yang0953@gmail.com", "date": "2014-08-11T11:24:35Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2014-08-11T11:24:35Z"}, "message": "re PR c/62073 (Segmentation fault with tree vectorize)\n\n2014-08-11  Felix Yang  <fei.yang0953@gmail.com>\n\n\tPR tree-optimization/62073\n\t* tree-vect-loop.c (vect_is_simple_reduction_1): Check that DEF1 has\n\ta basic block.\n\n\t* gcc.dg/vect/pr62073.c: New test.\n\nFrom-SVN: r213812", "tree": {"sha": "a615817b9c4e3d37efb63591c7e213422c370577", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a615817b9c4e3d37efb63591c7e213422c370577"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4759fc61be363dd5a4cf807298a315ce1e36c40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4759fc61be363dd5a4cf807298a315ce1e36c40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4759fc61be363dd5a4cf807298a315ce1e36c40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4759fc61be363dd5a4cf807298a315ce1e36c40/comments", "author": null, "committer": null, "parents": [{"sha": "b525d9437ff21d934cd930de661b0e6891b49c2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b525d9437ff21d934cd930de661b0e6891b49c2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b525d9437ff21d934cd930de661b0e6891b49c2c"}], "stats": {"total": 54, "additions": 53, "deletions": 1}, "files": [{"sha": "ccd932a5a6e055a75413fdcc3f103bceab08cc09", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d4759fc61be363dd5a4cf807298a315ce1e36c40", "patch": "@@ -1,3 +1,9 @@\n+2014-08-11  Felix Yang  <fei.yang0953@gmail.com>\n+\n+\tPR tree-optimization/62073\n+\t* tree-vect-loop.c (vect_is_simple_reduction_1): Check that DEF1 has\n+\ta basic block.\n+\t\n 2014-08-11  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n \t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n \t    Anna Tikhonova  <anna.tikhonova@intel.com>"}, {"sha": "10b9eb28fd34b56f345ff3b5321fc9912fbe7c1c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d4759fc61be363dd5a4cf807298a315ce1e36c40", "patch": "@@ -1,3 +1,8 @@\n+2014-08-11  Felix Yang  <fei.yang0953@gmail.com>\n+\n+\tPR tree-optimization/62073\n+\t* gcc.dg/vect/pr62073.c: New test.\n+\t\n 2014-08-11  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/62070"}, {"sha": "15f2ad66b0c921f8af60a842760b223d9e3574f2", "filename": "gcc/testsuite/gcc.dg/vect/pr62073.c", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr62073.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr62073.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr62073.c?ref=d4759fc61be363dd5a4cf807298a315ce1e36c40", "patch": "@@ -0,0 +1,40 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-O1\" } */\n+\n+struct S0\n+{\n+  int f7;\n+};\n+struct S0 g_50;\n+int g_70;\n+int g_76;\n+\n+int foo (long long p_56, int * p_57)\n+{\n+  int *l_77;\n+  int l_101;\n+\n+  for (; g_70;)\n+    {\n+      int **l_78 = &l_77;\n+      if (g_50.f7)\n+\tcontinue;\n+      *l_78 = 0;\n+    }\n+  for (g_76 = 1; g_76 >= 0; g_76--)\n+    {\n+      int *l_90;\n+      for (l_101 = 4; l_101 >= 0; l_101--)\n+\tif (l_101)\n+\t  *l_90 = 0;\n+\telse\n+\t  {\n+\t    int **l_113 = &l_77;\n+\t    *l_113 = p_57;\n+\t  }\n+    }\n+\n+  return *l_77;\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "fd1166f5fd74ff2b95e43133994d3ba2ff465249", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4759fc61be363dd5a4cf807298a315ce1e36c40/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=d4759fc61be363dd5a4cf807298a315ce1e36c40", "patch": "@@ -2321,7 +2321,8 @@ vect_is_simple_reduction_1 (loop_vec_info loop_info, gimple phi,\n         }\n \n       def1 = SSA_NAME_DEF_STMT (op1);\n-      if (flow_bb_inside_loop_p (loop, gimple_bb (def_stmt))\n+      if (gimple_bb (def1)\n+\t  && flow_bb_inside_loop_p (loop, gimple_bb (def_stmt))\n           && loop->inner\n           && flow_bb_inside_loop_p (loop->inner, gimple_bb (def1))\n           && is_gimple_assign (def1))"}]}