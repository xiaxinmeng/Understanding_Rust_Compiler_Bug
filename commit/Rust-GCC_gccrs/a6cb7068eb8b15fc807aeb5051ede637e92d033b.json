{"sha": "a6cb7068eb8b15fc807aeb5051ede637e92d033b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZjYjcwNjhlYjhiMTVmYzgwN2FlYjUwNTFlZGU2MzdlOTJkMDMzYg==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2004-10-26T21:16:58Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2004-10-26T21:16:58Z"}, "message": "basic_string.h (erase(size_type, size_type), [...]): Call _M_mutate instead of _M_replace_safe...\n\n2004-10-26  Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/bits/basic_string.h (erase(size_type, size_type),\n\terase(iterator), erase(iterator, iterator)): Call _M_mutate\n\tinstead of _M_replace_safe, equivalent when the fourth argument\n\tis zero and simpler.\n\nFrom-SVN: r89608", "tree": {"sha": "5d4368cbfae4ab27a7e7c8c1df2a6d1e758875a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5d4368cbfae4ab27a7e7c8c1df2a6d1e758875a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6cb7068eb8b15fc807aeb5051ede637e92d033b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6cb7068eb8b15fc807aeb5051ede637e92d033b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6cb7068eb8b15fc807aeb5051ede637e92d033b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6cb7068eb8b15fc807aeb5051ede637e92d033b/comments", "author": null, "committer": null, "parents": [{"sha": "663174d3f5b4114e970566789a0a5840642c9ad7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/663174d3f5b4114e970566789a0a5840642c9ad7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/663174d3f5b4114e970566789a0a5840642c9ad7"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "94a2adb2ada85544e5b9cd5159736f283243d301", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6cb7068eb8b15fc807aeb5051ede637e92d033b/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6cb7068eb8b15fc807aeb5051ede637e92d033b/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a6cb7068eb8b15fc807aeb5051ede637e92d033b", "patch": "@@ -1,3 +1,10 @@\n+2004-10-26  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/bits/basic_string.h (erase(size_type, size_type),\n+\terase(iterator), erase(iterator, iterator)): Call _M_mutate\n+\tinstead of _M_replace_safe, equivalent when the fourth argument\n+\tis zero and simpler.\n+\n 2004-10-26  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/ext/array_allocator.h (array::allocate): Check for valid"}, {"sha": "34c6fab94a554a57c60423e07c513a6f73d40f2d", "filename": "libstdc++-v3/include/bits/basic_string.h", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6cb7068eb8b15fc807aeb5051ede637e92d033b/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6cb7068eb8b15fc807aeb5051ede637e92d033b/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h?ref=a6cb7068eb8b15fc807aeb5051ede637e92d033b", "patch": "@@ -1140,8 +1140,11 @@ namespace std\n       */\n       basic_string&\n       erase(size_type __pos = 0, size_type __n = npos)\n-      { return _M_replace_safe(_M_check(__pos, \"basic_string::erase\"),\n-\t\t\t       _M_limit(__pos, __n), NULL, size_type(0)); }\n+      { \n+\t_M_mutate(_M_check(__pos, \"basic_string::erase\"),\n+\t\t  _M_limit(__pos, __n), size_type(0));\n+\treturn *this;\n+      }\n \n       /**\n        *  @brief  Remove one character.\n@@ -1157,7 +1160,7 @@ namespace std\n \t_GLIBCXX_DEBUG_PEDASSERT(__position >= _M_ibegin()\n \t\t\t\t && __position < _M_iend());\n \tconst size_type __pos = __position - _M_ibegin();\n-\t_M_replace_safe(__pos, size_type(1), NULL, size_type(0));\n+\t_M_mutate(__pos, size_type(1), size_type(0));\n \t_M_rep()->_M_set_leaked();\n \treturn _M_ibegin() + __pos;\n       }\n@@ -1177,7 +1180,7 @@ namespace std\n \t_GLIBCXX_DEBUG_PEDASSERT(__first >= _M_ibegin() && __first <= __last\n \t\t\t\t && __last <= _M_iend());\n         const size_type __pos = __first - _M_ibegin();\n-\t_M_replace_safe(__pos, __last - __first, NULL, size_type(0));\n+\t_M_mutate(__pos, __last - __first, size_type(0));\n \t_M_rep()->_M_set_leaked();\n \treturn _M_ibegin() + __pos;\n       }"}]}