{"sha": "f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjg0YzZiZDkyMDg4MTRkOTY4MGYwNWQ3ZmI0ZDljNzliYzE0ZTE1YQ==", "commit": {"author": {"name": "Francois-Xavier Coudert", "email": "fxcoudert@gcc.gnu.org", "date": "2014-06-09T09:25:14Z"}, "committer": {"name": "Fran\u00e7ois-Xavier Coudert", "email": "fxcoudert@gcc.gnu.org", "date": "2014-06-09T09:25:14Z"}, "message": "re PR fortran/45187 (ICE with CRAY pointer in module)\n\n\tPR fortran/45187\n\n\t* trans-decl.c (gfc_create_module_variable): Don't create\n\tCray-pointee decls twice.\n\n\t* gfortran.dg/cray_pointers_10.f90: New file.\n\nFrom-SVN: r211367", "tree": {"sha": "b9ed4b7098ee14058307f4cde32c9df0a69eb0d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9ed4b7098ee14058307f4cde32c9df0a69eb0d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/comments", "author": {"login": "fxcoudert", "id": 1980544, "node_id": "MDQ6VXNlcjE5ODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1980544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxcoudert", "html_url": "https://github.com/fxcoudert", "followers_url": "https://api.github.com/users/fxcoudert/followers", "following_url": "https://api.github.com/users/fxcoudert/following{/other_user}", "gists_url": "https://api.github.com/users/fxcoudert/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxcoudert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxcoudert/subscriptions", "organizations_url": "https://api.github.com/users/fxcoudert/orgs", "repos_url": "https://api.github.com/users/fxcoudert/repos", "events_url": "https://api.github.com/users/fxcoudert/events{/privacy}", "received_events_url": "https://api.github.com/users/fxcoudert/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fxcoudert", "id": 1980544, "node_id": "MDQ6VXNlcjE5ODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1980544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxcoudert", "html_url": "https://github.com/fxcoudert", "followers_url": "https://api.github.com/users/fxcoudert/followers", "following_url": "https://api.github.com/users/fxcoudert/following{/other_user}", "gists_url": "https://api.github.com/users/fxcoudert/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxcoudert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxcoudert/subscriptions", "organizations_url": "https://api.github.com/users/fxcoudert/orgs", "repos_url": "https://api.github.com/users/fxcoudert/repos", "events_url": "https://api.github.com/users/fxcoudert/events{/privacy}", "received_events_url": "https://api.github.com/users/fxcoudert/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "122032d2aebb1a62d6c38e6930ba7ee5d24bab34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/122032d2aebb1a62d6c38e6930ba7ee5d24bab34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/122032d2aebb1a62d6c38e6930ba7ee5d24bab34"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "d7d5e2423a33744c22db9dd3239d8f023412b141", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "patch": "@@ -1,3 +1,9 @@\n+2014-06-09  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n+\n+\tPR fortran/45187\n+\t* trans-decl.c (gfc_create_module_variable): Don't create\n+\tCray-pointee decls twice.\n+\n 2014-06-06  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n \n \t* io.c (resolve_tag): Warn on non-default kind for NUMBER,"}, {"sha": "959bcb19926ce93344b6133c0c96ba6eb4403d81", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "patch": "@@ -4278,8 +4278,8 @@ gfc_create_module_variable (gfc_symbol * sym)\n     }\n \n   /* Don't generate variables from other modules. Variables from\n-     COMMONs will already have been generated.  */\n-  if (sym->attr.use_assoc || sym->attr.in_common)\n+     COMMONs and Cray pointees will already have been generated.  */\n+  if (sym->attr.use_assoc || sym->attr.in_common || sym->attr.cray_pointee)\n     return;\n \n   /* Equivalenced variables arrive here after creation.  */"}, {"sha": "6932ebe7f1d477c53ca1e85db9f19d8edc75d8cf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "patch": "@@ -1,3 +1,8 @@\n+2014-06-09  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n+\n+\tPR fortran/45187\n+\t* gfortran.dg/cray_pointers_10.f90: New file.\n+\n 2014-06-09  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gfortran.dg/gomp/udr6.f90 (f1, f2, f3): Use complex(kind=8)"}, {"sha": "1ac98f3ea46fd94af4d35d2b819897fe71a1aade", "filename": "gcc/testsuite/gfortran.dg/cray_pointers_10.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ftestsuite%2Fgfortran.dg%2Fcray_pointers_10.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f84c6bd9208814d9680f05d7fb4d9c79bc14e15a/gcc%2Ftestsuite%2Fgfortran.dg%2Fcray_pointers_10.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcray_pointers_10.f90?ref=f84c6bd9208814d9680f05d7fb4d9c79bc14e15a", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do run }\n+! { dg-options \"-fcray-pointer\" }\n+!\n+! PR fortran/45187\n+!\n+module foo\n+  implicit none\n+  real :: a\n+  pointer(c_a, a)\n+end module foo\n+\n+program test\n+  use foo\n+  real :: z\n+  c_a = loc(z)\n+  a = 42\n+  if (z /= 42) call abort\n+end program test"}]}