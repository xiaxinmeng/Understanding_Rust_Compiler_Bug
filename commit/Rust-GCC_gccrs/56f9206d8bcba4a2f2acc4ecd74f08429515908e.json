{"sha": "56f9206d8bcba4a2f2acc4ecd74f08429515908e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTZmOTIwNmQ4YmNiYTRhMmYyYWNjNGVjZDc0ZjA4NDI5NTE1OTA4ZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1993-04-08T14:53:33Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1993-04-08T14:53:33Z"}, "message": "Allow libgcc2.a to be built using fixed header files\n\nFrom-SVN: r4043", "tree": {"sha": "f0f64453922429375db278a626b8f2b20ab181d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f0f64453922429375db278a626b8f2b20ab181d6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/56f9206d8bcba4a2f2acc4ecd74f08429515908e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56f9206d8bcba4a2f2acc4ecd74f08429515908e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56f9206d8bcba4a2f2acc4ecd74f08429515908e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56f9206d8bcba4a2f2acc4ecd74f08429515908e/comments", "author": null, "committer": null, "parents": [{"sha": "0e53614d59bf008ca3506700c90122502a1c06fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e53614d59bf008ca3506700c90122502a1c06fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e53614d59bf008ca3506700c90122502a1c06fe"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "64777fd12a99bdd8250372a471b6c1ab4af9eec1", "filename": "gcc/Makefile.in", "status": "modified", "additions": 20, "deletions": 6, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f9206d8bcba4a2f2acc4ecd74f08429515908e/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f9206d8bcba4a2f2acc4ecd74f08429515908e/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=56f9206d8bcba4a2f2acc4ecd74f08429515908e", "patch": "@@ -182,7 +182,15 @@ LIBGCC2 = libgcc2.a\n # -g1 causes output of debug info only for file-scope entities.\n # we use this here because that should be enough, and also\n # so that -g1 will be tested.\n-LIBGCC2_CFLAGS = -O2 $(GCC_CFLAGS) -g1\n+LIBGCC2_CFLAGS = -O2 $(LIBGCC2_INCLUDES) $(GCC_CFLAGS) -g1\n+\n+# Additional options to use when compiling libgcc2.a.\n+# Some targets override this to -Iinclude\n+LIBGCC2_INCLUDES =\n+\n+# Things which must be built before building libgcc2.a.\n+# Some targets override this to stmp-int-hdrs\n+LIBGCC2_DEPS =\n \n # List of extra executables that should be compiled for this target machine\n # that are used for compiling from source code to object code.\n@@ -616,7 +624,7 @@ libgcc1.a: libgcc1.c $(CONFIG_H) $(LIB1FUNCS_EXTRA) config.status\n # Compiling libgcc2.a requires making sure that cc1, etc. have been compiled.\n # But recompiling cc1 should not force recompilation of libgcc2.a.\n # If you want to force recompilation, delete libgcc2.a.\n-libgcc2.ready: $(GCC_PASSES)\n+libgcc2.ready: $(GCC_PASSES) $(LIBGCC2_DEPS)\n \t-if [ -f libgcc2.ready ] ; then \\\n \t\ttrue; \\\n \telse \\\n@@ -1290,7 +1298,9 @@ test-protoize-simple: ./protoize ./unprotoize $(GCC_PASSES)\n # stamp-* so that mostlyclean does not force the include directory to\n # be rebuilt.\n \n-stmp-headers: stmp-fixinc $(USER_H) gvarargs.h gstdarg.h gstddef.h gsyslimits.h xlimits.h gfloat.h\n+# Build the include directory except for float.h (which depends upon\n+# enquire).\n+stmp-int-hdrs: stmp-fixinc $(USER_H) gvarargs.h gstdarg.h gstddef.h gsyslimits.h xlimits.h\n # Copy in the headers provided with gcc.\n # The sed command gets just the last file name component;\n # this is necessary because VPATH could add a dirname.\n@@ -1322,13 +1332,17 @@ stmp-headers: stmp-fixinc $(USER_H) gvarargs.h gstdarg.h gstddef.h gsyslimits.h\n \trm -f include/limits.h\n \tcp xlimits.h include/limits.h\n \tchmod a+r include/limits.h\n-\trm -f include/float.h\n-\tcp gfloat.h include/float.h\n-\tchmod a+r include/float.h\n # Install the README\n \trm -f include/README\n \tcp $(srcdir)/README-fixinc include/README\n \tchmod a+r include/README\n+\ttouch stmp-int-hdrs\n+\n+# Build the complete include directory.\n+stmp-headers: stmp-int-hdrs gfloat.h\n+\trm -f include/float.h\n+\tcp gfloat.h include/float.h\n+\tchmod a+r include/float.h\n \ttouch stmp-headers\n \n # Build fixed copies of system files."}]}