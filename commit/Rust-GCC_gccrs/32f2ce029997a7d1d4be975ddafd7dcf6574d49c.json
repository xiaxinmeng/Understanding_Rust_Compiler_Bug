{"sha": "32f2ce029997a7d1d4be975ddafd7dcf6574d49c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzJmMmNlMDI5OTk3YTdkMWQ0YmU5NzVkZGFmZDdkY2Y2NTc0ZDQ5Yw==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@bitrange.com", "date": "2004-12-31T16:24:48Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2004-12-31T16:24:48Z"}, "message": "re PR target/18701 (mmix-knuth-mmixware gcc.c-torture/execute failures: 20010224-1.c, 20020216-1.c, 20040218-1.c, 20040709-2.c)\n\n\tPR target/18701\n\t* combine.c (gen_lowpart_for_combine): When stripping SUBREG of\n\tMEM, adjust imode and isize.\n\nFrom-SVN: r92760", "tree": {"sha": "6472fae54cd2a808f7ac4b8ac0e6aa0b3ac2c1ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6472fae54cd2a808f7ac4b8ac0e6aa0b3ac2c1ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32f2ce029997a7d1d4be975ddafd7dcf6574d49c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32f2ce029997a7d1d4be975ddafd7dcf6574d49c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32f2ce029997a7d1d4be975ddafd7dcf6574d49c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32f2ce029997a7d1d4be975ddafd7dcf6574d49c/comments", "author": null, "committer": null, "parents": [{"sha": "8c8a5f7c8e5c0e05d38272f09bee1ec442a3d2cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c8a5f7c8e5c0e05d38272f09bee1ec442a3d2cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c8a5f7c8e5c0e05d38272f09bee1ec442a3d2cc"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "81d0b997c41400fa37a445bbbca48717fd66899a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32f2ce029997a7d1d4be975ddafd7dcf6574d49c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32f2ce029997a7d1d4be975ddafd7dcf6574d49c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=32f2ce029997a7d1d4be975ddafd7dcf6574d49c", "patch": "@@ -1,3 +1,9 @@\n+2004-12-31  Hans-Peter Nilsson  <hp@bitrange.com>\n+\n+\tPR target/18701\n+\t* combine.c (gen_lowpart_for_combine): When stripping SUBREG of\n+\tMEM, adjust imode and isize.\n+\n 2004-12-30  Richard Henderson  <rth@redhat.com>\n \n \t* config/ia64/ia64.c (hfa_element_mode): Return false for "}, {"sha": "61b93dd30489d2c7b34350e3bd607cb896d1b0bc", "filename": "gcc/combine.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32f2ce029997a7d1d4be975ddafd7dcf6574d49c/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32f2ce029997a7d1d4be975ddafd7dcf6574d49c/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=32f2ce029997a7d1d4be975ddafd7dcf6574d49c", "patch": "@@ -9355,8 +9355,16 @@ gen_lowpart_for_combine (enum machine_mode omode, rtx x)\n   if (GET_CODE (x) == SUBREG && MEM_P (SUBREG_REG (x)))\n     {\n       x = SUBREG_REG (x);\n-      if (GET_MODE (x) == omode)\n+\n+      /* For use in case we fall down into the address adjustments\n+\t further below, we need to adjust the known mode and size of\n+\t x; imode and isize, since we just adjusted x.  */\n+      imode = GET_MODE (x);\n+\n+      if (imode == omode)\n \treturn x;\n+\n+      isize = GET_MODE_SIZE (imode);\n     }\n \n   result = gen_lowpart_common (omode, x);"}]}