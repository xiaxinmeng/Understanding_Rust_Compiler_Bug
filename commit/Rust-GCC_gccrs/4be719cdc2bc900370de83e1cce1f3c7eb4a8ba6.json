{"sha": "4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGJlNzE5Y2RjMmJjOTAwMzcwZGU4M2UxY2NlMWYzYzdlYjRhOGJhNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2016-11-13T17:37:35Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2016-11-13T17:37:35Z"}, "message": "c-ada-spec.c (print_ada_declaration): For typedef declarations...\n\n\t* c-ada-spec.c (print_ada_declaration): For typedef declarations, look\n\tfor nested types only if the type is a record or union and dump SLOC.\n\nFrom-SVN: r242356", "tree": {"sha": "3537b60c1c3fed6aaa55f61e5a866f181e9baa4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3537b60c1c3fed6aaa55f61e5a866f181e9baa4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/comments", "author": null, "committer": null, "parents": [{"sha": "4ebd491f2aed6d174c976f07d67c4b957f71391d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ebd491f2aed6d174c976f07d67c4b957f71391d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ebd491f2aed6d174c976f07d67c4b957f71391d"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "8c99b75aa56317e60d1166c38e174ff56b65fd67", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "patch": "@@ -1,3 +1,8 @@\n+2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-ada-spec.c (print_ada_declaration): For typedef declarations, look\n+\tfor nested types only if the type is a record or union and dump SLOC.\n+\n 2016-11-09  Jason Merrill  <jason@redhat.com>\n \n \t* c-cppbuiltin.c (c_cpp_builtins): Define __cpp_template_auto."}, {"sha": "42a2cd3a302f8c8fc87d86ca6ccec039eeaff845", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "patch": "@@ -2813,15 +2813,16 @@ print_ada_declaration (pretty_printer *buffer, tree t, tree type, int spc)\n \t\t}\n \t      else\n \t\t{\n-\t\t  if (!TREE_VISITED (stub)\n+\t\t  if (RECORD_OR_UNION_TYPE_P (typ)\n \t\t      && DECL_SOURCE_FILE (stub) == source_file_base)\n \t\t    dump_nested_types (buffer, stub, stub, true, spc);\n \n \t\t  pp_string (buffer, \"subtype \");\n \t\t  dump_generic_ada_node (buffer, t, type, spc, false, true);\n \t\t  pp_string (buffer, \" is \");\n \t\t  dump_generic_ada_node (buffer, typ, type, spc, false, true);\n-\t\t  pp_semicolon (buffer);\n+\t\t  pp_string (buffer, \";  -- \");\n+\t\t  dump_sloc (buffer, t);\n \t\t}\n \n \t      TREE_VISITED (t) = 1;"}, {"sha": "ee0282c78706b81b2db0134e6eb2d13ed53989d6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "patch": "@@ -1,3 +1,7 @@\n+2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-c++-common/dump-ada-spec-6.c: New test.\n+\n 2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/lto21.adb: New test."}, {"sha": "fb31b3bca003535ddbb934ff75bcabea94f9fe31", "filename": "gcc/testsuite/c-c++-common/dump-ada-spec-6.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdump-ada-spec-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdump-ada-spec-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdump-ada-spec-6.c?ref=4be719cdc2bc900370de83e1cce1f3c7eb4a8ba6", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fdump-ada-spec\" } */\n+\n+typedef enum {\n+    Zero\n+} MyEnum;\n+\n+typedef MyEnum SomethingElse; \n+\n+/* { dg-final { cleanup-ada-spec } } */"}]}