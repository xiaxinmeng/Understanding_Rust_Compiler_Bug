{"sha": "efe38fabaecffd988b7ed5a2240d54fce1cbdd4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWZlMzhmYWJhZWNmZmQ5ODhiN2VkNWEyMjQwZDU0ZmNlMWNiZGQ0YQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1999-02-11T00:00:28Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-02-11T00:00:28Z"}, "message": "decl.c (grokdeclarator): Catch wierd declarators.\n\n\t* decl.c (grokdeclarator): Catch wierd declarators.\n\t* decl2.c (finish_file): Don't abort because of namespace parsing\n\tfailure.\n\t(check_decl_namespace): Remove.\n\nFrom-SVN: r25144", "tree": {"sha": "ffd4fc96a00a14361b8892083f11396b1cf43fcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ffd4fc96a00a14361b8892083f11396b1cf43fcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a/comments", "author": null, "committer": null, "parents": [{"sha": "d16790f212312ea395cb1d2a4f9641dea9892c64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d16790f212312ea395cb1d2a4f9641dea9892c64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d16790f212312ea395cb1d2a4f9641dea9892c64"}], "stats": {"total": 32, "additions": 22, "deletions": 10}, "files": [{"sha": "dd1612da1bcb63be418aacd594cca91cef58b8c7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=efe38fabaecffd988b7ed5a2240d54fce1cbdd4a", "patch": "@@ -1,3 +1,10 @@\n+1999-02-10  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* decl.c (grokdeclarator): Catch wierd declarators.\n+\t* decl2.c (finish_file): Don't abort because of namespace parsing\n+\tfailure.\n+\t(check_decl_namespace): Remove.\n+\n 1999-02-09  Mark Mitchell  <mark@markmitchell.com>\n \n \t* cp-tree.h (get_template_base): Don't declare."}, {"sha": "2547ddf17de33ee28777efe62a9d64e687953dba", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=efe38fabaecffd988b7ed5a2240d54fce1cbdd4a", "patch": "@@ -10574,6 +10574,20 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \t}\n     }\n \n+  if (declarator == NULL_TREE\n+      || TREE_CODE (declarator) == IDENTIFIER_NODE\n+      || (TREE_CODE (declarator) == TEMPLATE_ID_EXPR\n+\t  && (TREE_CODE (type) == FUNCTION_TYPE\n+\t      || TREE_CODE (type) == METHOD_TYPE)))\n+    /* OK */;\n+  else if (TREE_CODE (declarator) == TEMPLATE_ID_EXPR)\n+    {\n+      cp_error (\"template-id `%D' used as a declarator\", declarator);\n+      declarator = dname;\n+    }\n+  else\n+    my_friendly_abort (990210);\n+\n   if (RIDBIT_SETP (RID_TYPEDEF, specbits) && decl_context != TYPENAME)\n     {\n       tree decl;"}, {"sha": "103974718dbf02bec5c162c928f9ffbd128192ce", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 1, "deletions": 10, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efe38fabaecffd988b7ed5a2240d54fce1cbdd4a/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=efe38fabaecffd988b7ed5a2240d54fce1cbdd4a", "patch": "@@ -58,7 +58,6 @@ static int is_namespace_ancestor PROTO((tree, tree));\n static void add_using_namespace PROTO((tree, tree, int));\n static tree ambiguous_decl PROTO((tree, tree, tree,int));\n static tree build_anon_union_vars PROTO((tree, tree*, int, int));\n-static void check_decl_namespace PROTO((void));\n \n extern int current_class_depth;\n \n@@ -3228,11 +3227,9 @@ finish_file ()\n   at_eof = 1;\n \n   /* Bad parse errors.  Just forget about it.  */\n-  if (! global_bindings_p () || current_class_type)\n+  if (! global_bindings_p () || current_class_type || decl_namespace_list)\n     return;\n \n-  check_decl_namespace ();\n-\n   start_time = get_run_time ();\n \n   /* Otherwise, GDB can get confused, because in only knows\n@@ -4288,12 +4285,6 @@ pop_decl_namespace ()\n   decl_namespace_list = TREE_CHAIN (decl_namespace_list);\n }\n \n-static void \n-check_decl_namespace ()\n-{\n-  my_friendly_assert (decl_namespace_list == NULL_TREE, 980711);\n-}\n-\n /* Enter a class or namespace scope. */\n \n void"}]}