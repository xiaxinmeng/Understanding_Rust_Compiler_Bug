{"sha": "acac773aaa0434993650c079685a41b78121a619", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWNhYzc3M2FhYTA0MzQ5OTM2NTBjMDc5Njg1YTQxYjc4MTIxYTYxOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-01-24T19:14:51Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-01-24T19:14:51Z"}, "message": "re PR tree-optimization/89027 (ICE: verify_gimple failed (Error: non-trivial conversion at assignment))\n\n\tPR tree-optimization/89027\n\t* tree-inline.c (add_clobbers_to_eh_landing_pad): Don't add clobbers\n\tfor \"omp simd array\" variables.\n\n\t* gfortran.dg/gomp/pr89027.f90: New test.\n\nFrom-SVN: r268243", "tree": {"sha": "978a2c4430ecdc5524c15d260e1aa5d9f8df98a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/978a2c4430ecdc5524c15d260e1aa5d9f8df98a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/acac773aaa0434993650c079685a41b78121a619", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acac773aaa0434993650c079685a41b78121a619", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acac773aaa0434993650c079685a41b78121a619", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acac773aaa0434993650c079685a41b78121a619/comments", "author": null, "committer": null, "parents": [{"sha": "21f657a48fe0d110f3d35646657090cd77d0f76a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21f657a48fe0d110f3d35646657090cd77d0f76a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21f657a48fe0d110f3d35646657090cd77d0f76a"}], "stats": {"total": 40, "additions": 37, "deletions": 3}, "files": [{"sha": "efb20f77deec3f976f60274c7d661265c69170cb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acac773aaa0434993650c079685a41b78121a619/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acac773aaa0434993650c079685a41b78121a619/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=acac773aaa0434993650c079685a41b78121a619", "patch": "@@ -1,3 +1,9 @@\n+2019-01-24  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/89027\n+\t* tree-inline.c (add_clobbers_to_eh_landing_pad): Don't add clobbers\n+\tfor \"omp simd array\" variables.\n+\n 2019-01-24  Richard Earnshaw  <rearnsha@arm.com>\n \n \tPR target/88469"}, {"sha": "75467a3f84fa1cd7e3db2730440243790807fcaa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acac773aaa0434993650c079685a41b78121a619/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acac773aaa0434993650c079685a41b78121a619/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=acac773aaa0434993650c079685a41b78121a619", "patch": "@@ -1,8 +1,13 @@\n+2019-01-24  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/89027\n+\t* gfortran.dg/gomp/pr89027.f90: New test.\n+\n 2019-01-24  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/88929\n-\t* gfortran.dg/ISO_Fortran_binding_3.f90 : New test\n-\t* gfortran.dg/ISO_Fortran_binding_3.c : Subsidiary source.\n+\t* gfortran.dg/ISO_Fortran_binding_3.f90: New test.\n+\t* gfortran.dg/ISO_Fortran_binding_3.c: Subsidiary source.\n \n 2019-01-23  H.J. Lu  <hongjiu.lu@intel.com>\n "}, {"sha": "2fa0d23631b921818a3d92c2eea4b81300270827", "filename": "gcc/testsuite/gfortran.dg/gomp/pr89027.f90", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acac773aaa0434993650c079685a41b78121a619/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr89027.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acac773aaa0434993650c079685a41b78121a619/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr89027.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr89027.f90?ref=acac773aaa0434993650c079685a41b78121a619", "patch": "@@ -0,0 +1,22 @@\n+! PR tree-optimization/89027\n+! { dg-do compile }\n+! { dg-additional-options \"-O2 -fexceptions -fno-tree-dce\" }\n+\n+subroutine bar\n+  integer :: a, b\n+  a = 1\n+  b = 2\n+  call foo\n+contains\n+  subroutine foo\n+!$omp simd linear(a:2) linear(b:1)\n+    do a = 1, 20, 2\n+      b = b + 1\n+    end do\n+!$omp end simd\n+    if (a /= 21 .or. b /= 12) STOP 1\n+!$omp task depend(out : a)\n+    a = a + 1\n+!$omp end task\n+  end subroutine foo\n+end subroutine bar"}, {"sha": "eb5073c5f6124c956e8c0db91162e26d4ace155f", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acac773aaa0434993650c079685a41b78121a619/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acac773aaa0434993650c079685a41b78121a619/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=acac773aaa0434993650c079685a41b78121a619", "patch": "@@ -2204,7 +2204,8 @@ add_clobbers_to_eh_landing_pad (basic_block bb, copy_body_data *id)\n \t&& !TREE_THIS_VOLATILE (var)\n \t&& !DECL_HAS_VALUE_EXPR_P (var)\n \t&& !is_gimple_reg (var)\n-\t&& auto_var_in_fn_p (var, id->src_fn))\n+\t&& auto_var_in_fn_p (var, id->src_fn)\n+\t&& !lookup_attribute (\"omp simd array\", DECL_ATTRIBUTES (var)))\n       {\n \ttree *t = id->decl_map->get (var);\n \tif (!t)"}]}