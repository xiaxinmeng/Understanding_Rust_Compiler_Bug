{"sha": "2bf26ede97bce405deca3f65b92683205a8e4bd5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmJmMjZlZGU5N2JjZTQwNWRlY2EzZjY1YjkyNjgzMjA1YThlNGJkNQ==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2004-08-10T00:57:22Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-08-10T00:57:22Z"}, "message": "trans-io.c (transfer_expr): Handle pointters.\n\n\t* trans-io.c (transfer_expr): Handle pointters.\ntestsuite/\n\t* gfortran.dg/der_io_1.f90: New test.\n\nFrom-SVN: r85738", "tree": {"sha": "f19703e42d0769a2d553e9584816567c1aa04422", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f19703e42d0769a2d553e9584816567c1aa04422"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2bf26ede97bce405deca3f65b92683205a8e4bd5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bf26ede97bce405deca3f65b92683205a8e4bd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bf26ede97bce405deca3f65b92683205a8e4bd5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bf26ede97bce405deca3f65b92683205a8e4bd5/comments", "author": null, "committer": null, "parents": [{"sha": "19bb9ed6f53804940137c705c8ae613757024609", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19bb9ed6f53804940137c705c8ae613757024609", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19bb9ed6f53804940137c705c8ae613757024609"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "1dd0bc32d026d630747bd99d2aebdc1a800a7e4c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=2bf26ede97bce405deca3f65b92683205a8e4bd5", "patch": "@@ -1,3 +1,7 @@\n+2004-08-10  Paul Brook  <paul@codesourcery.com>\n+\n+\t* trans-io.c (transfer_expr): Handle pointters.\n+\n 2004-08-10  Paul Brook  <paul@codesourcery.com>\n \n \tPR fortran/16919"}, {"sha": "b01b8f61e80ea9efc0bdb52ffc352ae9a1f516e7", "filename": "gcc/fortran/trans-io.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ffortran%2Ftrans-io.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ffortran%2Ftrans-io.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-io.c?ref=2bf26ede97bce405deca3f65b92683205a8e4bd5", "patch": "@@ -1138,7 +1138,11 @@ transfer_expr (gfc_se * se, gfc_typespec * ts, tree addr_expr)\n \t      se->string_length =\n \t\tTYPE_MAX_VALUE (TYPE_DOMAIN (TREE_TYPE (tmp)));\n \t    }\n-\t  transfer_expr (se, &c->ts, gfc_build_addr_expr (NULL, tmp));\n+\t  if (c->dimension)\n+\t    gfc_todo_error (\"IO of arrays in derived types\");\n+\t  if (!c->pointer)\n+\t    tmp = gfc_build_addr_expr (NULL, tmp);\n+\t  transfer_expr (se, &c->ts, tmp);\n \t}\n       return;\n "}, {"sha": "7011c1262b966cf35f4f22ae929c09dae4cc20ad", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2bf26ede97bce405deca3f65b92683205a8e4bd5", "patch": "@@ -1,3 +1,7 @@\n+2004-08-10  Paul Brook  <paul@codesourcery.com>\n+\n+\t* gfortran.dg/der_io_1.f90: New test.\n+\n 2004-08-10  Paul Brook  <paul@codesourcery.com>\n \n \tPR fortran/16919"}, {"sha": "32155aa6918b315f7f35aaf3180a1dda66284b6a", "filename": "gcc/testsuite/gfortran.dg/der_io_1.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ftestsuite%2Fgfortran.dg%2Fder_io_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bf26ede97bce405deca3f65b92683205a8e4bd5/gcc%2Ftestsuite%2Fgfortran.dg%2Fder_io_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fder_io_1.f90?ref=2bf26ede97bce405deca3f65b92683205a8e4bd5", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! IO of derived types containing pointers\n+program der_io_1\n+  type t\n+    integer, pointer :: p\n+  end type\n+  integer, target :: i\n+  type (t) v\n+  character(4) :: s\n+\n+  v%p => i\n+  i = 42\n+  write (unit=s, fmt='(I2)'), v\n+  if (s .ne. '42') call abort ()\n+end program\n+"}]}