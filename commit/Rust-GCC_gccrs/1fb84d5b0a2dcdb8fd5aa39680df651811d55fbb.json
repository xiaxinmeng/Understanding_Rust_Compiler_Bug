{"sha": "1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWZiODRkNWIwYTJkY2RiOGZkNWFhMzk2ODBkZjY1MTgxMWQ1NWZiYg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2017-11-09T18:45:29Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2017-11-09T18:45:29Z"}, "message": "re PR fortran/78814 (ICE in symbol_rank, at fortran/interface.c:1265)\n\n2017-11-09  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/78814\n\t* interface.c (symbol_rank): Check for NULL pointer.\n\n2017-11-09  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/78814\n\t* gfortran.dg/interface_40.f90: New testcase.\n\nFrom-SVN: r254604", "tree": {"sha": "2502170a845a2eeaeb55c59e253458910140642d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2502170a845a2eeaeb55c59e253458910140642d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/comments", "author": null, "committer": null, "parents": [{"sha": "f097ff235052e19a371d24da32ba2741681d443b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f097ff235052e19a371d24da32ba2741681d443b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f097ff235052e19a371d24da32ba2741681d443b"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "9be20c889a17a3e00136bb2917f12bf3e91d3764", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "patch": "@@ -1,3 +1,8 @@\n+2017-11-09  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/78814\n+\t* interface.c (symbol_rank): Check for NULL pointer.\n+\n 2017-11-08  Steven G. Kargl  <kargl@kgcc.gnu.org>\n \n \tPR Fortran/82841"}, {"sha": "1b7ebf56b92b674e40384ab84dd596661e700377", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "patch": "@@ -1262,8 +1262,13 @@ generic_correspondence (gfc_formal_arglist *f1, gfc_formal_arglist *f2,\n static int\n symbol_rank (gfc_symbol *sym)\n {\n-  gfc_array_spec *as;\n-  as = (sym->ts.type == BT_CLASS) ? CLASS_DATA (sym)->as : sym->as;\n+  gfc_array_spec *as = NULL;\n+\n+  if (sym->ts.type == BT_CLASS && CLASS_DATA (sym) && CLASS_DATA (sym)->as)\n+    as = CLASS_DATA (sym)->as;\n+  else\n+    as = sym->as;\n+\n   return as ? as->rank : 0;\n }\n "}, {"sha": "7ee000b07dedfeeef006db488b20dff35dd9876c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "patch": "@@ -1,3 +1,8 @@\n+2017-11-09  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/78814\n+\t* gfortran.dg/interface_40.f90: New testcase.\n+\n 2017-11-09  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/controlled2.adb, gnat.dg/controlled4.adb,"}, {"sha": "085c6b30f3946ec5681d26343352fb0e447cce12", "filename": "gcc/testsuite/gfortran.dg/interface_40.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_40.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_40.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_40.f90?ref=1fb84d5b0a2dcdb8fd5aa39680df651811d55fbb", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile }\n+! PR fortran/78814\n+! Code contributed by Gerhard Steinmetz\n+program p\n+   class(*) :: x  ! { dg-error \" must be dummy, allocatable or pointer\" }\n+   print *, f(x)\n+end\n+"}]}