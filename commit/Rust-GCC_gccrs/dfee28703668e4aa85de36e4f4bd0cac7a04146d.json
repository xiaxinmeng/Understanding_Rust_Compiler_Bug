{"sha": "dfee28703668e4aa85de36e4f4bd0cac7a04146d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZlZTI4NzAzNjY4ZTRhYTg1ZGUzNmU0ZjRiZDBjYWM3YTA0MTQ2ZA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2016-06-24T11:17:14Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2016-06-24T11:17:14Z"}, "message": "Enable non-PIC noplt tests on 32-bit x86 target\n\nSince non-PIC noplt works on 32-bit x86 target now with assembler/linker\nsupport, enable non-PIC noplt tests on 32-bit x86 target.  main in\nnoplt-2.c and noplt-4.c are renamed to bar to avoid stack re-alignment\nin main for 32-bit target, which disables tailcall optimization.\n\n\t* gcc.target/i386/noplt-1.c: Don't disable for ia32.  Scan for\n\tia32 if R_386_GOT32X relocation is supported.\n\t* gcc.target/i386/noplt-3.c: Likewise.\n\t* gcc.target/i386/noplt-2.c: Likewise.\n\t(main): Renamed to ...\n\t(bar): This.\n\t* gcc.target/i386/noplt-4.c: Likewise.\n\t(main): Renamed to ...\n\t(bar): This.\n\t* gcc.target/i386/pr67400-3.c: Don't disable for ia32.\n\t* gcc.target/i386/pr67400-5.c: Likewise.\n\nFrom-SVN: r237756", "tree": {"sha": "ed69a45380a1693bc0182cc743bb7637b7a94596", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed69a45380a1693bc0182cc743bb7637b7a94596"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfee28703668e4aa85de36e4f4bd0cac7a04146d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfee28703668e4aa85de36e4f4bd0cac7a04146d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfee28703668e4aa85de36e4f4bd0cac7a04146d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfee28703668e4aa85de36e4f4bd0cac7a04146d/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "00085092c5e78d076c4259e1f955ce1b98090624", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00085092c5e78d076c4259e1f955ce1b98090624", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00085092c5e78d076c4259e1f955ce1b98090624"}], "stats": {"total": 42, "additions": 30, "deletions": 12}, "files": [{"sha": "e13be243ba8cc1c9d65ad5db9fcd12ca5a860702", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dfee28703668e4aa85de36e4f4bd0cac7a04146d", "patch": "@@ -1,3 +1,17 @@\n+2016-06-24  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* gcc.target/i386/noplt-1.c: Don't disable for ia32.  Scan for\n+\tia32 if R_386_GOT32X relocation is supported.\n+\t* gcc.target/i386/noplt-3.c: Likewise.\n+\t* gcc.target/i386/noplt-2.c: Likewise.\n+\t(main): Renamed to ...\n+\t(bar): This.\n+\t* gcc.target/i386/noplt-4.c: Likewise.\n+\t(main): Renamed to ...\n+\t(bar): This.\n+\t* gcc.target/i386/pr67400-3.c: Don't disable for ia32.\n+\t* gcc.target/i386/pr67400-5.c: Likewise.\n+\n 2016-06-24  Jakub Jelinek  <jakub@redhat.com>\n \n \t* c-c++-common/torture/builtin-arith-overflow-p-19.c: Run for C++ too."}, {"sha": "f099a3828cd778b996a4510537f966d6beb68568", "filename": "gcc/testsuite/gcc.target/i386/noplt-1.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-1.c?ref=dfee28703668e4aa85de36e4f4bd0cac7a04146d", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do compile { target { *-*-linux* && { ! ia32 } } } } */\n+/* { dg-do compile { target *-*-linux* } } */\n /* { dg-options \"-fno-pic\" } */\n \n __attribute__ ((noplt))\n@@ -10,4 +10,5 @@ int main()\n   return 0;\n }\n \n-/* { dg-final { scan-assembler \"call\\[ \\t\\]\\\\*.*foo.*@GOTPCREL\\\\(%rip\\\\)\" } } */ \n+/* { dg-final { scan-assembler \"call\\[ \\t\\]*.foo@GOTPCREL\" { target { ! ia32 } } } } */\n+/* { dg-final { scan-assembler \"call\\[ \\t\\]*.foo@GOT\" { target { ia32 && got32x_reloc } } } } */"}, {"sha": "9548b81cf01176f0fdcb9eb37b70025d684401a5", "filename": "gcc/testsuite/gcc.target/i386/noplt-2.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-2.c?ref=dfee28703668e4aa85de36e4f4bd0cac7a04146d", "patch": "@@ -1,13 +1,14 @@\n-/* { dg-do compile { target { *-*-linux* && { ! ia32 } } } } */\n+/* { dg-do compile { target *-*-linux* } } */\n /* { dg-options \"-O2 -fno-pic\" } */\n \n \n __attribute__ ((noplt))\n int foo();\n \n-int main()\n+int bar()\n {\n   return foo();\n }\n \n-/* { dg-final { scan-assembler \"jmp\\[ \\t\\]\\\\*.*foo.*@GOTPCREL\\\\(%rip\\\\)\" } } */ \n+/* { dg-final { scan-assembler \"jmp\\[ \\t\\]*.foo@GOTPCREL\" { target { ! ia32 } } } } */\n+/* { dg-final { scan-assembler \"jmp\\[ \\t\\]*.foo@GOT\" { target { ia32 && got32x_reloc } } } } */"}, {"sha": "436c0d10216b353ed324eda20a713d72b2cdaa7d", "filename": "gcc/testsuite/gcc.target/i386/noplt-3.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-3.c?ref=dfee28703668e4aa85de36e4f4bd0cac7a04146d", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do compile { target { *-*-linux* && { ! ia32 } } } } */\n+/* { dg-do compile { target *-*-linux* } } */\n /* { dg-options \"-fno-pic -fno-plt\" } */\n \n void foo();\n@@ -9,4 +9,5 @@ int main()\n   return 0;\n }\n \n-/* { dg-final { scan-assembler \"call\\[ \\t\\]\\\\*.*foo.*@GOTPCREL\\\\(%rip\\\\)\" } } */ \n+/* { dg-final { scan-assembler \"call\\[ \\t\\]*.foo@GOTPCREL\" { target { ! ia32 } } } } */\n+/* { dg-final { scan-assembler \"call\\[ \\t\\]*.foo@GOT\" { target { ia32 && got32x_reloc } } } } */"}, {"sha": "b89fcf04a3caf168db4e63349fc1c2105a6f82b8", "filename": "gcc/testsuite/gcc.target/i386/noplt-4.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fnoplt-4.c?ref=dfee28703668e4aa85de36e4f4bd0cac7a04146d", "patch": "@@ -1,11 +1,12 @@\n-/* { dg-do compile { target { *-*-linux* && { ! ia32 } } } } */\n+/* { dg-do compile { target *-*-linux* } } */\n /* { dg-options \"-O2 -fno-pic -fno-plt\" } */\n \n int foo();\n \n-int main()\n+int bar()\n {\n   return foo();\n }\n \n-/* { dg-final { scan-assembler \"jmp\\[ \\t\\]\\\\*.*foo.*@GOTPCREL\\\\(%rip\\\\)\" } } */\n+/* { dg-final { scan-assembler \"jmp\\[ \\t\\]*.foo@GOTPCREL\" { target { ! ia32 } } } } */\n+/* { dg-final { scan-assembler \"jmp\\[ \\t\\]*.foo@GOT\" { target { ia32 && got32x_reloc } } } } */"}, {"sha": "fd2f209696e03258cf5bd3aa3d36064726a1835d", "filename": "gcc/testsuite/gcc.target/i386/pr67400-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67400-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67400-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67400-3.c?ref=dfee28703668e4aa85de36e4f4bd0cac7a04146d", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do compile { target { *-*-linux* && { ! ia32 } } } } */\n+/* { dg-do compile { target *-*-linux* } } */\n /* { dg-options \"-O2 -fno-pic -fno-plt\" } */\n \n static void"}, {"sha": "9bb98dcd26f95481eeb8b5b84aa11888db8eca33", "filename": "gcc/testsuite/gcc.target/i386/pr67400-5.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67400-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfee28703668e4aa85de36e4f4bd0cac7a04146d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67400-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67400-5.c?ref=dfee28703668e4aa85de36e4f4bd0cac7a04146d", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do compile { target { *-*-linux* && { ! ia32 } } } } */\n+/* { dg-do compile { target *-*-linux* } } */\n /* { dg-options \"-O2 -fno-pic -fno-plt\" } */\n \n extern void foo (void);"}]}