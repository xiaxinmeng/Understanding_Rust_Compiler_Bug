{"sha": "8277de3441053e7c440a71823598e43e56da2606", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODI3N2RlMzQ0MTA1M2U3YzQ0MGE3MTgyMzU5OGU0M2U1NmRhMjYwNg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2012-10-29T15:43:37Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-10-29T15:43:37Z"}, "message": "mmap.c (backtrace_vector_release): Make sure freed block is aligned on 8-byte boundary.\n\n\t* mmap.c (backtrace_vector_release): Make sure freed block is\n\taligned on 8-byte boundary.\n\nFrom-SVN: r192945", "tree": {"sha": "5ba16e70e1d72729529fa0bfe721295c7fdff503", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ba16e70e1d72729529fa0bfe721295c7fdff503"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8277de3441053e7c440a71823598e43e56da2606", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8277de3441053e7c440a71823598e43e56da2606", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8277de3441053e7c440a71823598e43e56da2606", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8277de3441053e7c440a71823598e43e56da2606/comments", "author": null, "committer": null, "parents": [{"sha": "13a6a8d23faa0bec6e9a98a852eb68a15c60ec18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13a6a8d23faa0bec6e9a98a852eb68a15c60ec18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13a6a8d23faa0bec6e9a98a852eb68a15c60ec18"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "f04f1d5dd0ddf144d73915618ca0852a213007cc", "filename": "libbacktrace/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8277de3441053e7c440a71823598e43e56da2606/libbacktrace%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8277de3441053e7c440a71823598e43e56da2606/libbacktrace%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2FChangeLog?ref=8277de3441053e7c440a71823598e43e56da2606", "patch": "@@ -1,3 +1,8 @@\n+2012-10-29  Ian Lance Taylor  <iant@google.com>\n+\n+\t* mmap.c (backtrace_vector_release): Make sure freed block is\n+\taligned on 8-byte boundary.\n+\n 2012-10-26  Ian Lance Taylor  <iant@google.com>\n \n \tPR other/55087"}, {"sha": "25fdc21a9f7e32f36a3c74c1cea3ba5b578ec2bf", "filename": "libbacktrace/mmap.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8277de3441053e7c440a71823598e43e56da2606/libbacktrace%2Fmmap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8277de3441053e7c440a71823598e43e56da2606/libbacktrace%2Fmmap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Fmmap.c?ref=8277de3441053e7c440a71823598e43e56da2606", "patch": "@@ -229,8 +229,18 @@ backtrace_vector_release (struct backtrace_state *state,\n \t\t\t  backtrace_error_callback error_callback,\n \t\t\t  void *data)\n {\n-  backtrace_free (state, (char *) vec->base + vec->size, vec->alc,\n-\t\t  error_callback, data);\n+  size_t size;\n+  size_t alc;\n+  size_t aligned;\n+\n+  /* Make sure that the block that we free is aligned on an 8-byte\n+     boundary.  */\n+  size = vec->size;\n+  alc = vec->alc;\n+  aligned = (size + 7) & ~ (size_t) 7;\n+  alc -= aligned - size;\n+\n+  backtrace_free (state, (char *) vec->base + size, alc, error_callback, data);\n   vec->alc = 0;\n   return 1;\n }"}]}