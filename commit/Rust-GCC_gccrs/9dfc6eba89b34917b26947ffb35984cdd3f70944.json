{"sha": "9dfc6eba89b34917b26947ffb35984cdd3f70944", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRmYzZlYmE4OWIzNDkxN2IyNjk0N2ZmYjM1OTg0Y2RkM2Y3MDk0NA==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@s-direktnet.de", "date": "1997-09-10T18:02:16Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-09-10T18:02:16Z"}, "message": "* m88k/sysv3.h (INITIALIZE_TRAMPOLINE) Define.\n\n        * libgcc2.c (__enable_execute_stack): Provide for sysV88 too.\n\nFrom-SVN: r15256", "tree": {"sha": "35dddb59ce80ad05cd1f8abdfd38c1c050d5e344", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/35dddb59ce80ad05cd1f8abdfd38c1c050d5e344"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9dfc6eba89b34917b26947ffb35984cdd3f70944", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dfc6eba89b34917b26947ffb35984cdd3f70944", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dfc6eba89b34917b26947ffb35984cdd3f70944", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dfc6eba89b34917b26947ffb35984cdd3f70944/comments", "author": null, "committer": null, "parents": [{"sha": "0021b564f4ce0b648a8d6ec49b29afe609370788", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0021b564f4ce0b648a8d6ec49b29afe609370788", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0021b564f4ce0b648a8d6ec49b29afe609370788"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "dd4cedaa961572b6a4cd6c81f0608d0c425a6278", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dfc6eba89b34917b26947ffb35984cdd3f70944/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dfc6eba89b34917b26947ffb35984cdd3f70944/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9dfc6eba89b34917b26947ffb35984cdd3f70944", "patch": "@@ -26,6 +26,9 @@ Wed Sep 10 01:32:54 1997  Jeffrey A Law  (law@cygnus.com)\n \n Wed Sep 10 00:29:29 1997  Manfred Hollstein  <manfred@s-direktnet.de>\n \n+\t* m88k/sysv3.h (INITIALIZE_TRAMPOLINE) Define.\n+\t* libgcc2.c (__enable_execute_stack): Provide for sysV88 too.\n+\n \t* xm-m88k.h (USG): Only define if it hasn't already been defined.\n \n \t* Makefile.in (risky-stage1): Delete gratutious whitespace."}, {"sha": "e3c318ef90b263383ade339970b807db9d4dc14d", "filename": "gcc/config/m88k/sysv3.h", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dfc6eba89b34917b26947ffb35984cdd3f70944/gcc%2Fconfig%2Fm88k%2Fsysv3.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dfc6eba89b34917b26947ffb35984cdd3f70944/gcc%2Fconfig%2Fm88k%2Fsysv3.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fsysv3.h?ref=9dfc6eba89b34917b26947ffb35984cdd3f70944", "patch": "@@ -137,3 +137,21 @@ do {\t\t\t\t\t\t\t\t\t\\\n       if (((int *)__DTOR_LIST__)[i] != -1)\t\\\n \t__DTOR_LIST__[i] ();\t\t\t\\\n   } while (0)\t\t\t\t\t\n+\n+#ifdef sysV88\n+/* manfred@s-direktnet.de: Re-define INITIALIZE_TRAMPOLINE to additionally call\n+   __enable_execute_stack.\n+   I don't actually have a clue why nobody else than sysV88 and __DOLPHIN__\n+   needs to call this; perhaps they didn't ever run the c-torture tests\n+   getting segmentations violations and/or bus errors with nested functions.  */\n+#undef INITIALIZE_TRAMPOLINE \n+#define INITIALIZE_TRAMPOLINE(TRAMP, FNADDR, CXT)\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 40)), FNADDR); \\\n+  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 36)), CXT); \\\n+  emit_call_insn (gen_call (gen_rtx (MEM, SImode,\t\t\t\\\n+\t\t\t    gen_rtx (SYMBOL_REF, Pmode,\t\t\t\\\n+\t\t\t\t     \"__enable_execute_stack\")),\t\\\n+\t\t  const0_rtx));\t\t\t\t\t\t\\\n+}\n+#endif"}, {"sha": "23a4e5a7149561b909de65d410056d3e64fcd6ca", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dfc6eba89b34917b26947ffb35984cdd3f70944/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dfc6eba89b34917b26947ffb35984cdd3f70944/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=9dfc6eba89b34917b26947ffb35984cdd3f70944", "patch": "@@ -2827,7 +2827,7 @@ __enable_execute_stack ()\n }\n #endif /* __convex__ */\n \n-#ifdef __DOLPHIN__\n+#if defined (__DOLPHIN__) || defined (sysV88)\n \n /* Modified from the convex -code above.  */\n \n@@ -2857,7 +2857,7 @@ __enable_execute_stack ()\n   errno=save_errno;\n }\n \n-#endif /* __DOLPHIN__ */\n+#endif /* __DOLPHIN__ or sysV88 */\n \n #ifdef __pyr__\n "}]}