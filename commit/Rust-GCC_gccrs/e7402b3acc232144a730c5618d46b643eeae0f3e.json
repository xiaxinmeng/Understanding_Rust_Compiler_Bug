{"sha": "e7402b3acc232144a730c5618d46b643eeae0f3e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTc0MDJiM2FjYzIzMjE0NGE3MzBjNTYxOGQ0NmI2NDNlZWFlMGYzZQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2014-06-23T17:05:33Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2014-06-23T17:05:33Z"}, "message": "DR 577 PR c++/33101\n\n/cp\n2014-06-23  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tDR 577\n\tPR c++/33101\n\t* decl.c (grokparms): Accept a single parameter of type 'void'.\n\n/testsuite\n2014-06-23  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tDR 577\n\tPR c++/33101\n\t* g++.dg/other/void1.C: Adjust.\n\t* g++.dg/other/void3.C: Likewise.\n\nFrom-SVN: r211906", "tree": {"sha": "0513e90d9b31066868ab1ed0f3705c0227a06c40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0513e90d9b31066868ab1ed0f3705c0227a06c40"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7402b3acc232144a730c5618d46b643eeae0f3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7402b3acc232144a730c5618d46b643eeae0f3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7402b3acc232144a730c5618d46b643eeae0f3e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7402b3acc232144a730c5618d46b643eeae0f3e/comments", "author": null, "committer": null, "parents": [{"sha": "7b56b2f848d36fc3c5445f74c38720bd93e5f9e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b56b2f848d36fc3c5445f74c38720bd93e5f9e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b56b2f848d36fc3c5445f74c38720bd93e5f9e2"}], "stats": {"total": 30, "additions": 20, "deletions": 10}, "files": [{"sha": "1540c9742cdf94a0a541069e416180a7262dfed0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e7402b3acc232144a730c5618d46b643eeae0f3e", "patch": "@@ -1,3 +1,9 @@\n+2014-06-23  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tDR 577\n+\tPR c++/33101\n+\t* decl.c (grokparms): Accept a single parameter of type 'void'.\n+\n 2014-06-20  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/59296"}, {"sha": "b4d8b94feb1c918687805027e01d98020110d37f", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=e7402b3acc232144a730c5618d46b643eeae0f3e", "patch": "@@ -11138,16 +11138,13 @@ grokparms (tree parmlist, tree *parms)\n       type = TREE_TYPE (decl);\n       if (VOID_TYPE_P (type))\n \t{\n-\t  if (type == void_type_node\n+\t  if (same_type_p (type, void_type_node)\n \t      && !init\n \t      && !DECL_NAME (decl) && !result\n \t      && TREE_CHAIN (parm) == void_list_node)\n-\t    /* this is a parmlist of `(void)', which is ok.  */\n+\t    /* DR 577: A parameter list consisting of a single\n+\t       unnamed parameter of non-dependent type 'void'.  */\n \t    break;\n-\t  else if (typedef_variant_p (type))\n-\t    error_at (DECL_SOURCE_LOCATION (decl),\n-\t\t      \"invalid use of typedef-name %qT in \"\n-\t\t      \"parameter declaration\", type);\n \t  else if (cv_qualified_p (type))\n \t    error_at (DECL_SOURCE_LOCATION (decl),\n \t\t      \"invalid use of cv-qualified type %qT in \""}, {"sha": "e8eab59ea82d6bca1ba07f4571fd6393cde7f07c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e7402b3acc232144a730c5618d46b643eeae0f3e", "patch": "@@ -1,3 +1,10 @@\n+2014-06-23  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tDR 577\n+\tPR c++/33101\n+\t* g++.dg/other/void1.C: Adjust.\n+\t* g++.dg/other/void3.C: Likewise.\n+\n 2014-06-23  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/61553"}, {"sha": "3f6b1dbfe8ed8bf7a11cb8c7db4c7815f9c77dd3", "filename": "gcc/testsuite/g++.dg/other/void1.C", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fvoid1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fvoid1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fvoid1.C?ref=e7402b3acc232144a730c5618d46b643eeae0f3e", "patch": "@@ -4,13 +4,13 @@\n typedef void VOID;\n \n int foo(void);\n-int bar(VOID);                // { dg-error \"type|invalid use\" }\n+int bar(VOID);\n \n template<int> int foo(void);\n-template<int> int bar(VOID);  // { dg-error \"type|invalid use\" }\n+template<int> int bar(VOID);\n \n struct A\n {\n   int foo(void);\n-  int bar(VOID);              // { dg-error \"type|invalid use\" }\n+  int bar(VOID);\n };"}, {"sha": "48a6609915d99aab7419c7e7a42942294869f1ce", "filename": "gcc/testsuite/g++.dg/other/void3.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fvoid3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7402b3acc232144a730c5618d46b643eeae0f3e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fvoid3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fvoid3.C?ref=e7402b3acc232144a730c5618d46b643eeae0f3e", "patch": "@@ -1,4 +1,4 @@\n // PR c++/33101\n \n typedef void v;\n-typedef v (*pf)(v);  // { dg-error \"invalid use of typedef-name\" }\n+typedef v (*pf)(v);"}]}