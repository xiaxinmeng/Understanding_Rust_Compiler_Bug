{"sha": "988fb2f597d67cdf3603654372c020c28448441f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg4ZmIyZjU5N2Q2N2NkZjM2MDM2NTQzNzJjMDIwYzI4NDQ4NDQxZg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-08-21T11:01:05Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-08-21T11:01:05Z"}, "message": "libstdc++: Skip PSTL tests when installed TBB is too old [PR 96718]\n\nThese tests do not actually require TBB, because they only inspect the\nfeature test macros present in the headers. However, if TBB is installed\nthen its headers will be included, and the version will be checked. If\nthe version is too old, compilation fails due to a #error directive.\n\nThis change disables the tests if TBB is not present, so that we skip\nthem instead of failing.\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/96718\n\t* testsuite/25_algorithms/pstl/feature_test-2.cc: Require\n\ttbb-backend effective target.\n\t* testsuite/25_algorithms/pstl/feature_test-3.cc: Likewise.\n\t* testsuite/25_algorithms/pstl/feature_test-5.cc: Likewise.\n\t* testsuite/25_algorithms/pstl/feature_test.cc: Likewise.", "tree": {"sha": "be816f778ed74374621b3d5d2245454430aadbcf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be816f778ed74374621b3d5d2245454430aadbcf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/988fb2f597d67cdf3603654372c020c28448441f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/988fb2f597d67cdf3603654372c020c28448441f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/988fb2f597d67cdf3603654372c020c28448441f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/988fb2f597d67cdf3603654372c020c28448441f/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "388cb292a94f98a276548cd6ce01285cf36d17df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/388cb292a94f98a276548cd6ce01285cf36d17df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/388cb292a94f98a276548cd6ce01285cf36d17df"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "88c5ea5b1d1923b9e917c0d435101c6d326cd2c6", "filename": "libstdc++-v3/testsuite/25_algorithms/pstl/feature_test-2.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-2.cc?ref=988fb2f597d67cdf3603654372c020c28448441f", "patch": "@@ -17,6 +17,7 @@\n \n // { dg-options \"-std=gnu++17\" }\n // { dg-do preprocess { target c++17 } }\n+// { dg-require-effective-target tbb-backend }\n \n #include <numeric>\n "}, {"sha": "4d75a1862116f2183d6ad516664daaef8777d2b0", "filename": "libstdc++-v3/testsuite/25_algorithms/pstl/feature_test-3.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-3.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-3.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-3.cc?ref=988fb2f597d67cdf3603654372c020c28448441f", "patch": "@@ -17,6 +17,7 @@\n \n // { dg-options \"-std=gnu++17\" }\n // { dg-do preprocess { target c++17 } }\n+// { dg-require-effective-target tbb-backend }\n \n #include <execution>\n "}, {"sha": "f6f910204fe75ab6b72a76a0948e0ab30bb3db0f", "filename": "libstdc++-v3/testsuite/25_algorithms/pstl/feature_test-5.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-5.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-5.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test-5.cc?ref=988fb2f597d67cdf3603654372c020c28448441f", "patch": "@@ -17,6 +17,7 @@\n \n // { dg-options \"-std=gnu++17\" }\n // { dg-do preprocess { target c++17 } }\n+// { dg-require-effective-target tbb-backend }\n \n #include <memory>\n "}, {"sha": "817bda3474e71aa9e7eff4c816ee0f3e7cfa565b", "filename": "libstdc++-v3/testsuite/25_algorithms/pstl/feature_test.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988fb2f597d67cdf3603654372c020c28448441f/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpstl%2Ffeature_test.cc?ref=988fb2f597d67cdf3603654372c020c28448441f", "patch": "@@ -17,6 +17,7 @@\n \n // { dg-options \"-std=gnu++17\" }\n // { dg-do preprocess { target c++17 } }\n+// { dg-require-effective-target tbb-backend }\n \n #include <algorithm>\n "}]}