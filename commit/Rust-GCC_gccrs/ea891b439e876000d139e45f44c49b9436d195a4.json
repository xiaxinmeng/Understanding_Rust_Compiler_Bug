{"sha": "ea891b439e876000d139e45f44c49b9436d195a4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE4OTFiNDM5ZTg3NjAwMGQxMzllNDVmNDRjNDliOTQzNmQxOTVhNA==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2018-10-09T15:06:41Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-10-09T15:06:41Z"}, "message": "[Ada] Ignore pragmas Compile_Time_Error/Warning in GNATprove mode\n\nGNATprove does not have sometimes the precise information of the\ncompiler about size of types and objects, so that it cannot evaluate the\nexpressions in pragma Compile_Time_Error/Warning the same way the\ncompiler does.  Thus, these pragmas should be ignored in GNATprove mode,\nas it can neither verify them nor assume them (if the expression cannot\nbe evaluated at compile time, then the semantics for GNAT is to ignore\nthem).\n\n2018-10-09  Yannick Moy  <moy@adacore.com>\n\ngcc/ada/\n\n\t* sem_prag.adb (Process_Compile_Time_Warning_Or_Error): Rewrite\n\tpragmas as null statements in GNATprove mode.\n\nFrom-SVN: r264981", "tree": {"sha": "2611d4d339ccb513378562a60cfa3e28d72cad21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2611d4d339ccb513378562a60cfa3e28d72cad21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea891b439e876000d139e45f44c49b9436d195a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea891b439e876000d139e45f44c49b9436d195a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea891b439e876000d139e45f44c49b9436d195a4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea891b439e876000d139e45f44c49b9436d195a4/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e693ddbec3e38aeff2e229785b9037ba0caa17c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e693ddbec3e38aeff2e229785b9037ba0caa17c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e693ddbec3e38aeff2e229785b9037ba0caa17c8"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "03c0e46b2fa86ff9d1c22142504e5de444dd7c17", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea891b439e876000d139e45f44c49b9436d195a4/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea891b439e876000d139e45f44c49b9436d195a4/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ea891b439e876000d139e45f44c49b9436d195a4", "patch": "@@ -1,3 +1,8 @@\n+2018-10-09  Yannick Moy  <moy@adacore.com>\n+\n+\t* sem_prag.adb (Process_Compile_Time_Warning_Or_Error): Rewrite\n+\tpragmas as null statements in GNATprove mode.\n+\n 2018-10-09  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* exp_ch6.adb (Add_Call_By_Copy_Code): Initialize the temporary"}, {"sha": "2293f73cbd50f5762012e61f03728e3fd8c83767", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea891b439e876000d139e45f44c49b9436d195a4/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea891b439e876000d139e45f44c49b9436d195a4/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=ea891b439e876000d139e45f44c49b9436d195a4", "patch": "@@ -7570,6 +7570,17 @@ package body Sem_Prag is\n       --  Start of processing for Process_Compile_Time_Warning_Or_Error\n \n       begin\n+         --  In GNATprove mode, pragmas Compile_Time_Error and\n+         --  Compile_Time_Warning are ignored, as the analyzer may not have the\n+         --  same information as the compiler (in particular regarding size of\n+         --  objects decided in gigi) so it makes no sense to issue an error or\n+         --  warning in GNATprove.\n+\n+         if GNATprove_Mode then\n+            Rewrite (N, Make_Null_Statement (Loc));\n+            return;\n+         end if;\n+\n          Check_Arg_Count (2);\n          Check_No_Identifiers;\n          Check_Arg_Is_OK_Static_Expression (Arg2, Standard_String);"}]}