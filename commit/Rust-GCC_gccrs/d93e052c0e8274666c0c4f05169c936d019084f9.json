{"sha": "d93e052c0e8274666c0c4f05169c936d019084f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDkzZTA1MmMwZTgyNzQ2NjZjMGM0ZjA1MTY5YzkzNmQwMTkwODRmOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-04-01T16:18:46Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-04-01T16:18:46Z"}, "message": "re PR target/39226 (gcc_assert (verify_initial_elim_offsets ()); ICE)\n\n\tPR target/39226\n\t* config/rs6000/rs6000.md (andsi3_internal5_nomc,\n\tanddi3_internal2_nomc, anddi3_internal3_nomc): Removed.\n\t(booldi3_internal3): Use boolean_or_operator instead of\n\tboolean_operator.\n\n\t* gcc.dg/pr39226.c: New test.\n\nFrom-SVN: r145411", "tree": {"sha": "bb87527ed606432321b5032ccdae2e7af3da3467", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bb87527ed606432321b5032ccdae2e7af3da3467"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d93e052c0e8274666c0c4f05169c936d019084f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d93e052c0e8274666c0c4f05169c936d019084f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d93e052c0e8274666c0c4f05169c936d019084f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d93e052c0e8274666c0c4f05169c936d019084f9/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "eddd291e260549659b0a04f6ae73093fb4d3d467", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eddd291e260549659b0a04f6ae73093fb4d3d467", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eddd291e260549659b0a04f6ae73093fb4d3d467"}], "stats": {"total": 78, "additions": 39, "deletions": 39}, "files": [{"sha": "1f26fe71a6f739bf06105d188847457066637c12", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d93e052c0e8274666c0c4f05169c936d019084f9", "patch": "@@ -1,3 +1,11 @@\n+2009-04-01  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/39226\n+\t* config/rs6000/rs6000.md (andsi3_internal5_nomc,\n+\tanddi3_internal2_nomc, anddi3_internal3_nomc): Removed.\n+\t(booldi3_internal3): Use boolean_or_operator instead of\n+\tboolean_operator.\n+\n 2009-04-01  Joseph Myers  <joseph@codesourcery.com>\n \n \tPR c/39605"}, {"sha": "c2f05e5dfada3b421c9890c070bccfbc77887ffa", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 1, "deletions": 39, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=d93e052c0e8274666c0c4f05169c936d019084f9", "patch": "@@ -2999,20 +2999,6 @@\n   [(set_attr \"type\" \"compare,compare,compare,delayed_compare,compare,compare,compare,compare\")\n    (set_attr \"length\" \"8,4,4,4,8,8,8,8\")])\n \n-(define_insn \"*andsi3_internal5_nomc\"\n-  [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x,?y,??y,??y,?y\")\n-        (compare:CC (and:SI (match_operand:SI 1 \"gpc_reg_operand\" \"%r,r,r,r,r\")\n-                            (match_operand:SI 2 \"and_operand\" \"r,r,K,L,T\"))\n-                    (const_int 0)))\n-   (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r,r,r,r\")\n-        (and:SI (match_dup 1)\n-                (match_dup 2)))\n-   (clobber (match_scratch:CC 4 \"=X,X,x,x,X\"))]\n-  \"TARGET_64BIT && !rs6000_gen_cell_microcode\"\n-  \"#\"\n-  [(set_attr \"type\" \"compare\")\n-   (set_attr \"length\" \"8,8,8,8,8\")])\n-\n (define_split\n   [(set (match_operand:CC 3 \"cc_reg_not_micro_cr0_operand\" \"\")\n \t(compare:CC (and:SI (match_operand:SI 1 \"gpc_reg_operand\" \"\")\n@@ -7684,18 +7670,6 @@\n   [(set_attr \"type\" \"compare,compare,delayed_compare,compare,compare,compare,compare,compare,compare,compare,compare,compare\")\n    (set_attr \"length\" \"4,4,4,4,4,8,8,8,8,8,8,12\")])\n \n-(define_insn \"*anddi3_internal2_nomc\"\n-  [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,?y,?y,??y,??y,?y\")\n-\t(compare:CC (and:DI (match_operand:DI 1 \"gpc_reg_operand\" \"%r,r,r,r,r,r\")\n-\t\t\t    (match_operand:DI 2 \"and64_2_operand\" \"t,r,S,K,J,t\"))\n-\t\t    (const_int 0)))\n-   (clobber (match_scratch:DI 3 \"=r,r,r,r,r,r\"))\n-   (clobber (match_scratch:CC 4 \"=X,X,X,x,x,X\"))]\n-  \"TARGET_64BIT && !rs6000_gen_cell_microcode\"\n-  \"#\"\n-  [(set_attr \"type\" \"delayed_compare,compare,compare,compare,compare,compare\")\n-   (set_attr \"length\" \"8,8,8,8,8,12\")])\n-\n (define_split\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"\")\n         (compare:CC (and:DI (match_operand:DI 1 \"gpc_reg_operand\" \"\")\n@@ -7747,18 +7721,6 @@\n   [(set_attr \"type\" \"compare,compare,delayed_compare,compare,compare,compare,compare,compare,compare,compare,compare,compare\")\n    (set_attr \"length\" \"4,4,4,4,4,8,8,8,8,8,8,12\")])\n \n-(define_insn \"*anddi3_internal3_nomc\"\n-  [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x,?y,?y,??y,??y,?y\")\n-\t(compare:CC (and:DI (match_operand:DI 1 \"gpc_reg_operand\" \"%r,r,r,r,r,r\")\n-\t\t\t    (match_operand:DI 2 \"and64_2_operand\" \"t,r,S,K,J,t\"))\n-\t\t    (const_int 0)))\n-   (set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r,r,r,r,r\")\n-\t(and:DI (match_dup 1) (match_dup 2)))\n-   (clobber (match_scratch:CC 4 \"=X,X,X,x,x,X\"))]\n-  \"TARGET_64BIT  && !rs6000_gen_cell_microcode\"\n-  \"#\"\n-  [(set_attr \"type\" \"delayed_compare,compare,compare,compare,compare,compare\")\n-   (set_attr \"length\" \"8,8,8,8,8,12\")])\n (define_split\n   [(set (match_operand:CC 3 \"cc_reg_not_micro_cr0_operand\" \"\")\n \t(compare:CC (and:DI (match_operand:DI 1 \"gpc_reg_operand\" \"\")\n@@ -7915,7 +7877,7 @@\n \n (define_insn \"*booldi3_internal3\"\n   [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x,?y\")\n-\t(compare:CC (match_operator:DI 4 \"boolean_operator\"\n+\t(compare:CC (match_operator:DI 4 \"boolean_or_operator\"\n \t [(match_operand:DI 1 \"gpc_reg_operand\" \"%r,r\")\n \t  (match_operand:DI 2 \"gpc_reg_operand\" \"r,r\")])\n \t (const_int 0)))"}, {"sha": "2d109070c9cd86ae13d7cd0359dfbc94ce74886d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d93e052c0e8274666c0c4f05169c936d019084f9", "patch": "@@ -1,3 +1,8 @@\n+2009-04-01  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/39226\n+\t* gcc.dg/pr39226.c: New test.\n+\n 2009-04-01  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR c++/35240"}, {"sha": "1442ccc1435f3967ad08a7c9ea0171edc435fe69", "filename": "gcc/testsuite/gcc.dg/pr39226.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr39226.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d93e052c0e8274666c0c4f05169c936d019084f9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr39226.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr39226.c?ref=d93e052c0e8274666c0c4f05169c936d019084f9", "patch": "@@ -0,0 +1,25 @@\n+/* PR target/39226 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+/* { dg-options \"-O2 -mtune=cell -mminimal-toc\" { target { powerpc*-*-* && lp64 } } } */\n+\n+struct A\n+{\n+  char *a;\n+  unsigned int b : 1;\n+  unsigned int c : 31;\n+};\n+\n+struct B\n+{\n+  struct A *d;\n+};\n+\n+void\n+foo (struct B *x, unsigned long y)\n+{\n+  if (x->d[y].c)\n+    return;\n+  if (x->d[y].b)\n+    x->d[y].a = 0;\n+}"}]}