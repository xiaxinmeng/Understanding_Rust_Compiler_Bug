{"sha": "81023100d3ae76c0a71d83247aa5b9d35732448f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODEwMjMxMDBkM2FlNzZjMGE3MWQ4MzI0N2FhNWI5ZDM1NzMyNDQ4Zg==", "commit": {"author": {"name": "Mumit Khan", "email": "khan@xraylith.wisc.edu", "date": "1998-03-01T16:55:15Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-03-01T16:55:15Z"}, "message": "winnt.c (i386_pe_unique_section): Put read-only data in the text section unless READONLY_DATA_SECTION is defined.\n\n        * config/i386/winnt.c (i386_pe_unique_section): Put read-only\n        data in the text section unless READONLY_DATA_SECTION is defined.\n\nFrom-SVN: r18342", "tree": {"sha": "5696e89a9ccd065d7df27c20be9bd6576b0154af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5696e89a9ccd065d7df27c20be9bd6576b0154af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/81023100d3ae76c0a71d83247aa5b9d35732448f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81023100d3ae76c0a71d83247aa5b9d35732448f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81023100d3ae76c0a71d83247aa5b9d35732448f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81023100d3ae76c0a71d83247aa5b9d35732448f/comments", "author": null, "committer": null, "parents": [{"sha": "818e50a59da14950d7d0b0b687547c9124c1ccd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/818e50a59da14950d7d0b0b687547c9124c1ccd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/818e50a59da14950d7d0b0b687547c9124c1ccd0"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "8a261c54045e145d1b5e15bba4e6198b7c5a124e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81023100d3ae76c0a71d83247aa5b9d35732448f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81023100d3ae76c0a71d83247aa5b9d35732448f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=81023100d3ae76c0a71d83247aa5b9d35732448f", "patch": "@@ -1,3 +1,8 @@\n+Sun Mar  1 17:57:34 1998  Mumit Khan <khan@xraylith.wisc.edu>\n+\n+\t* config/i386/winnt.c (i386_pe_unique_section): Put read-only\n+\tdata in the text section unless READONLY_DATA_SECTION is defined.\n+\n Sun Mar  1 17:48:46 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* c-parse.in (undeclared variable error): Tweak error message to"}, {"sha": "8c35f3979c7bd4d74b9f97d8e0a2b331bf5bca81", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81023100d3ae76c0a71d83247aa5b9d35732448f/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81023100d3ae76c0a71d83247aa5b9d35732448f/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=81023100d3ae76c0a71d83247aa5b9d35732448f", "patch": "@@ -1,6 +1,6 @@\n /* Subroutines for insn-output.c for Windows NT.\n    Contributed by Douglas Rupp (drupp@cs.washington.edu)\n-   Copyright (C) 1995 Free Software Foundation, Inc.\n+   Copyright (C) 1995, 1997 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -19,8 +19,8 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-#include <stdio.h>\n #include \"config.h\"\n+#include <stdio.h>\n #include \"rtl.h\"\n #include \"regs.h\"\n #include \"hard-reg-set.h\"\n@@ -78,11 +78,18 @@ i386_pe_unique_section (decl, reloc)\n \n   /* The object is put in, for example, section .text$foo.\n      The linker will then ultimately place them in .text\n-     (everything from the $ on is stripped).  */\n+     (everything from the $ on is stripped). Don't put\n+     read-only data in .rdata section to avoid a PE linker \n+     bug when .rdata$* grouped sections are used in code\n+     without a .rdata section.  */\n   if (TREE_CODE (decl) == FUNCTION_DECL)\n     prefix = \".text$\";\n   else if (DECL_READONLY_SECTION (decl, reloc))\n+#ifdef READONLY_DATA_SECTION\n     prefix = \".rdata$\";\n+#else\n+    prefix = \".text$\";\n+#endif\n   else\n     prefix = \".data$\";\n   len = strlen (name) + strlen (prefix);"}]}