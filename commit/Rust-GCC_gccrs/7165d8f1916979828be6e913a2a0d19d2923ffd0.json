{"sha": "7165d8f1916979828be6e913a2a0d19d2923ffd0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE2NWQ4ZjE5MTY5Nzk4MjhiZTZlOTEzYTJhMGQxOWQyOTIzZmZkMA==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2015-01-24T21:52:34Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2015-01-24T21:52:34Z"}, "message": "PR libfortran/64770 Segfault when trying to open existing file with status=\"new\".\n\nlibgfortran ChangeLog:\n\n2015-01-24  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR libfortran/64770\n\t* io/unit.c (filename_from_unit): Check that u->filename != NULL\n\tbefore calling strdup.\n\ntestsuite ChangeLog:\n\n2015-01-24  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR libfortran/64770\n\t* gfortran.dg/open_new_segv.f90: New test.\n\nFrom-SVN: r220086", "tree": {"sha": "0c3d1d607e4cba288e848924dd2fb81811380302", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c3d1d607e4cba288e848924dd2fb81811380302"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7165d8f1916979828be6e913a2a0d19d2923ffd0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7165d8f1916979828be6e913a2a0d19d2923ffd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7165d8f1916979828be6e913a2a0d19d2923ffd0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7165d8f1916979828be6e913a2a0d19d2923ffd0/comments", "author": null, "committer": null, "parents": [{"sha": "d773ed85c56fbae24f13b4e4a054fcc7ca1550f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d773ed85c56fbae24f13b4e4a054fcc7ca1550f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d773ed85c56fbae24f13b4e4a054fcc7ca1550f7"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "b342a33211d1e3c6a3075e1c5078c56e152f1c59", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7165d8f1916979828be6e913a2a0d19d2923ffd0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7165d8f1916979828be6e913a2a0d19d2923ffd0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7165d8f1916979828be6e913a2a0d19d2923ffd0", "patch": "@@ -1,3 +1,8 @@\n+2015-01-24  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR libfortran/64770\n+\t* gfortran.dg/open_new_segv.f90: New test.\n+\n 2015-01-24  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/49263"}, {"sha": "56cd1afd9b52a403dbdbb25e9e9421df5b11784f", "filename": "gcc/testsuite/gfortran.dg/open_new_segv.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7165d8f1916979828be6e913a2a0d19d2923ffd0/gcc%2Ftestsuite%2Fgfortran.dg%2Fopen_new_segv.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7165d8f1916979828be6e913a2a0d19d2923ffd0/gcc%2Ftestsuite%2Fgfortran.dg%2Fopen_new_segv.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fopen_new_segv.f90?ref=7165d8f1916979828be6e913a2a0d19d2923ffd0", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do run }\n+! PR 64770 SIGSEGV when trying to open an existing file with status=\"new\"\n+program pr64770\n+  implicit none\n+  ! Make sure pr64770test.dat exists\n+  open(99, file=\"pr64770test.dat\", status=\"replace\")\n+  close(99)\n+  open(99, file=\"pr64770test.dat\", access=\"stream\", form=\"unformatted\", &\n+       status=\"new\")\n+end program pr64770"}, {"sha": "e228a677105ce16770c35c06d4b9e4ac269370dd", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7165d8f1916979828be6e913a2a0d19d2923ffd0/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7165d8f1916979828be6e913a2a0d19d2923ffd0/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=7165d8f1916979828be6e913a2a0d19d2923ffd0", "patch": "@@ -1,3 +1,9 @@\n+2015-01-24  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR libfortran/64770\n+\t* io/unit.c (filename_from_unit): Check that u->filename != NULL\n+\tbefore calling strdup.\n+\n 2015-01-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/61933"}, {"sha": "687f5076a5ba93fa8ce6e31bd5ef8a61a1282bc3", "filename": "libgfortran/io/unit.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7165d8f1916979828be6e913a2a0d19d2923ffd0/libgfortran%2Fio%2Funit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7165d8f1916979828be6e913a2a0d19d2923ffd0/libgfortran%2Fio%2Funit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funit.c?ref=7165d8f1916979828be6e913a2a0d19d2923ffd0", "patch": "@@ -829,7 +829,7 @@ filename_from_unit (int n)\n     }\n \n   /* Get the filename.  */\n-  if (u != NULL)\n+  if (u != NULL && u->filename != NULL)\n     return strdup (u->filename);\n   else\n     return (char *) NULL;"}]}