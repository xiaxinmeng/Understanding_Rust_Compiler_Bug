{"sha": "fd69977febf399d1992bbf8d66ae9170e0a4dc9f", "node_id": "C_kwDOANBUbNoAKGZkNjk5NzdmZWJmMzk5ZDE5OTJiYmY4ZDY2YWU5MTcwZTBhNGRjOWY", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2022-12-18T19:39:14Z"}, "committer": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2022-12-18T19:39:14Z"}, "message": "build: doc: Obsolete Solaris 11.3 support\n\nThis patch implements the Solaris 11.[0-3] obsoletion just announced in\n\n\thttps://gcc.gnu.org/pipermail/gcc/2022-December/240322.html\n\nBootstrapped without regressions on Solaris 11.3 (i386-pc-solaris2.11,\nsparc-sun-solaris2.11 without and with --enable-obsolete) and 11.4.\n\n2022-12-09  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n\n\tgcc:\n\t* config.gcc: Determine Solaris minor version.\n\tObsolete *-*-solaris2.11.[0-3]*.\n\t* doc/install.texi (Specific, *-*-solaris2*): Document it.", "tree": {"sha": "01890dbe8234075cc73f27de187a11b517f36c7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01890dbe8234075cc73f27de187a11b517f36c7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd69977febf399d1992bbf8d66ae9170e0a4dc9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd69977febf399d1992bbf8d66ae9170e0a4dc9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd69977febf399d1992bbf8d66ae9170e0a4dc9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd69977febf399d1992bbf8d66ae9170e0a4dc9f/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b2428ee8305188500e4f08e088a430500f1ad9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b2428ee8305188500e4f08e088a430500f1ad9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b2428ee8305188500e4f08e088a430500f1ad9e"}], "stats": {"total": 23, "additions": 18, "deletions": 5}, "files": [{"sha": "85ec1d88d16b355638391899db549866dfff11fd", "filename": "gcc/config.gcc", "status": "modified", "additions": 16, "deletions": 5, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd69977febf399d1992bbf8d66ae9170e0a4dc9f/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd69977febf399d1992bbf8d66ae9170e0a4dc9f/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=fd69977febf399d1992bbf8d66ae9170e0a4dc9f", "patch": "@@ -246,14 +246,25 @@ target_type_format_char='@'\n xm_file=\n md_file=\n \n+# Determine Solaris minor version\n+case ${target}:`uname -v` in\n+  # Only do this on Solaris.  Illumos uses illumos-* instead.\n+  *-*-solaris2.11*:11.*)\n+    # Restrict to native configurations.\n+    if test x$host = x$target; then\n+      uname_version=\"`uname -v`\"\n+      # Prepend dot as needed below.\n+      target_min=\".`expr \"$uname_version\" : '11\\.\\([0-9]*\\)'`\"\n+    fi\n+    ;;\n+esac\n+\n # Obsolete configurations.\n-case ${target} in\n-  *)\n-  ;;\n-  obsoleted-target \\\n+case ${target}${target_min} in\n+    *-*-solaris2.11.[0-3]*\t\t\\\n  )\n     if test \"x$enable_obsolete\" != xyes; then\n-      echo \"*** Configuration ${target} is obsolete.\" >&2\n+      echo \"*** Configuration ${target}${target_min} is obsolete.\" >&2\n       echo \"*** Specify --enable-obsolete to build it anyway.\" >&2\n       echo \"*** Support will be REMOVED in the next major release of GCC,\" >&2\n       echo \"*** unless a maintainer comes forward.\" >&2"}, {"sha": "ec31f0ac43e7221a85128e27487ece864106a352", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd69977febf399d1992bbf8d66ae9170e0a4dc9f/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd69977febf399d1992bbf8d66ae9170e0a4dc9f/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=fd69977febf399d1992bbf8d66ae9170e0a4dc9f", "patch": "@@ -4867,6 +4867,8 @@ supported as cross-compilation target only.\n @c alone is too unspecific and must be avoided.\n @anchor{x-x-solaris2}\n @heading *-*-solaris2*\n+Support for Solaris 11.3 and earlier has been obsoleted in GCC 13, but\n+can still be enabled by configuring with @option{--enable-obsolete}.\n Support for Solaris 10 has been removed in GCC 10.  Support for Solaris\n 9 has been removed in GCC 5.  Support for Solaris 8 has been removed in\n GCC 4.8.  Support for Solaris 7 has been removed in GCC 4.6."}]}