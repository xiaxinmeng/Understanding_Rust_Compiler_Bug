{"sha": "ecf92f822777f05e82a0cb8c93232abf24df8318", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNmOTJmODIyNzc3ZjA1ZTgyYTBjYjhjOTMyMzJhYmYyNGRmODMxOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2003-02-10T12:45:54Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2003-02-10T12:45:54Z"}, "message": "re PR c/7741 (ICE on conflicting types (make_decl_rtl at varasm.c:834))\n\n\tPR c/7741\n\t* c-decl.c (duplicate_decls): Discard the initializer of the\n\tnew decl when the types are conflicting.\n\nCo-Authored-By: Christian Ehrhardt <ehrhardt@mathematik.uni-ulm.de>\n\nFrom-SVN: r62631", "tree": {"sha": "8a1d28c03b69fb9ba8205eed11d31cdecbf9221d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a1d28c03b69fb9ba8205eed11d31cdecbf9221d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ecf92f822777f05e82a0cb8c93232abf24df8318", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecf92f822777f05e82a0cb8c93232abf24df8318", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecf92f822777f05e82a0cb8c93232abf24df8318", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecf92f822777f05e82a0cb8c93232abf24df8318/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ac5e69da5659335b8f8d942b29bd01dc7384b6ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac5e69da5659335b8f8d942b29bd01dc7384b6ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac5e69da5659335b8f8d942b29bd01dc7384b6ad"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "d0a9caedfa453a28f4db8ba3df77857d9c1b652f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ecf92f822777f05e82a0cb8c93232abf24df8318", "patch": "@@ -1,3 +1,10 @@\n+2003-02-10  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+            Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>\n+\n+\tPR c/7741\n+\t* c-decl.c (duplicate_decls): Discard the initializer of the\n+\tnew decl when the types are conflicting.\n+\n 2003-02-10  Josef Zlomek  <zlomekj@suse.cz>\n \n \t* Makefile.in (sreal.o): Added."}, {"sha": "01a35874ecb89172b3a391445033b9a819bcf2b0", "filename": "gcc/c-decl.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=ecf92f822777f05e82a0cb8c93232abf24df8318", "patch": "@@ -1140,6 +1140,12 @@ duplicate_decls (newdecl, olddecl, different_binding_level)\n \t    }\n \t}\n       error_with_decl (olddecl, \"previous declaration of `%s'\");\n+\n+      /* This is safer because the initializer might contain references\n+\t to variables that were declared between olddecl and newdecl. This\n+\t will make the initializer invalid for olddecl in case it gets\n+\t assigned to olddecl below.  */\n+      DECL_INITIAL (newdecl) = 0;\n     }\n   /* TLS cannot follow non-TLS declaration.  */\n   else if (TREE_CODE (olddecl) == VAR_DECL && TREE_CODE (newdecl) == VAR_DECL"}, {"sha": "fd9d5501d3aa85a866bdff2055a0529e91ac78b7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ecf92f822777f05e82a0cb8c93232abf24df8318", "patch": "@@ -1,3 +1,8 @@\n+2003-02-10  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+            Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>\n+\n+\t* gcc.dg/decl-2.c: New test.\n+\n Mon Feb 10 11:41:20 CET 2003  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/i386-fpcvt-1.c:  New test."}, {"sha": "44fbc733027d8cca3ad5d06e82ea6d74b5b93019", "filename": "gcc/testsuite/gcc.dg/decl-2.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2Ftestsuite%2Fgcc.dg%2Fdecl-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecf92f822777f05e82a0cb8c93232abf24df8318/gcc%2Ftestsuite%2Fgcc.dg%2Fdecl-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdecl-2.c?ref=ecf92f822777f05e82a0cb8c93232abf24df8318", "patch": "@@ -0,0 +1,10 @@\n+/* PR c/7411 */\n+/* Contributed by Christian Ehrhardt */\n+/* { dg-do compile } */\n+\n+void foo(void)\n+{\n+  char c;  /* { dg-error \"previous declaration\" } */\n+  int i;\n+  int c = i;  /* { dg-error \"conflicting types\" } */\n+}"}]}