{"sha": "218e0eb6d392fa569352ec89b8b121dcfc840e7d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE4ZTBlYjZkMzkyZmE1NjkzNTJlYzg5YjhiMTIxZGNmYzg0MGU3ZA==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@users.sourceforge.net", "date": "2002-12-02T17:03:13Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2002-12-02T17:03:13Z"}, "message": "DR 180\n\n\tDR 180\n\t* decl.c (grokdeclarator): Require class-key for all friend class.\n\tOutput the correct type and context in the error message.\n\n\t* g++.old-deja/g++.pt/crash32.C: Expect error.\n\nFrom-SVN: r59719", "tree": {"sha": "ee1622515d386905b16fa0279bb645657b1b064f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee1622515d386905b16fa0279bb645657b1b064f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/218e0eb6d392fa569352ec89b8b121dcfc840e7d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/218e0eb6d392fa569352ec89b8b121dcfc840e7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/218e0eb6d392fa569352ec89b8b121dcfc840e7d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/218e0eb6d392fa569352ec89b8b121dcfc840e7d/comments", "author": null, "committer": null, "parents": [{"sha": "513f31eb684407555e3600efee9707f7e94a3351", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/513f31eb684407555e3600efee9707f7e94a3351", "html_url": "https://github.com/Rust-GCC/gccrs/commit/513f31eb684407555e3600efee9707f7e94a3351"}], "stats": {"total": 34, "additions": 21, "deletions": 13}, "files": [{"sha": "2ade3e38382d9bd99138f05c521a673f46129509", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=218e0eb6d392fa569352ec89b8b121dcfc840e7d", "patch": "@@ -1,3 +1,9 @@\n+2002-12-02  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tDR 180\n+\t* decl.c (grokdeclarator): Require class-key for all friend class.\n+\tOutput the correct type and context in the error message.\n+\n 2002-12-01  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/5919"}, {"sha": "1e26b0f112cdd25a822d1c9d107d03e4d18e06dc", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 9, "deletions": 12, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=218e0eb6d392fa569352ec89b8b121dcfc840e7d", "patch": "@@ -11645,22 +11645,19 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \t      inlinep = 0;\n \t    }\n \n-\t  /* Until core issue 180 is resolved, allow 'friend typename A::B'.\n-\t     But don't allow implicit typenames except with a class-key.  */\n-\t  if (!current_aggr && (TREE_CODE (type) != TYPENAME_TYPE\n-\t\t\t\t|| IMPLICIT_TYPENAME_P (type)))\n+\t  if (!current_aggr)\n \t    {\n+\t      /* Don't allow friend declaration without a class-key.  */\n \t      if (TREE_CODE (type) == TEMPLATE_TYPE_PARM)\n-\t        pedwarn (\"template parameters cannot be friends\");\n+\t\tpedwarn (\"template parameters cannot be friends\");\n \t      else if (TREE_CODE (type) == TYPENAME_TYPE)\n-\t        pedwarn (\"\\\n-friend declaration requires class-key, i.e. `friend class %T::%T'\",\n-\t\t\t    constructor_name (current_class_type),\n-\t\t\t    TYPE_IDENTIFIER (type));\n+\t        pedwarn (\"friend declaration requires class-key, \"\n+\t\t\t \"i.e. `friend class %T::%D'\",\n+\t\t\t TYPE_CONTEXT (type), TYPENAME_TYPE_FULLNAME (type));\n \t      else\n-\t        pedwarn (\"\\\n-friend declaration requires class-key, i.e. `friend %#T'\",\n-\t\t\t    type);\n+\t        pedwarn (\"friend declaration requires class-key, \"\n+\t\t\t \"i.e. `friend %#T'\",\n+\t\t\t type);\n \t    }\n \n \t  /* Only try to do this stuff if we didn't already give up.  */"}, {"sha": "4f05e81e694e134ca1adffa2a071c5fd25a750b0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=218e0eb6d392fa569352ec89b8b121dcfc840e7d", "patch": "@@ -1,3 +1,8 @@\n+2002-12-02  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tDR 180\n+\t* g++.old-deja/g++.pt/crash32.C: Expect error.\n+\n 2002-12-01  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/5919"}, {"sha": "af6ef5b95cd36560a0f031971de1e845d1a18902", "filename": "gcc/testsuite/g++.old-deja/g++.pt/crash32.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash32.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/218e0eb6d392fa569352ec89b8b121dcfc840e7d/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash32.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash32.C?ref=218e0eb6d392fa569352ec89b8b121dcfc840e7d", "patch": "@@ -8,6 +8,6 @@ template <class T> struct A\n \n template<class T> struct C\n {\n-  friend typename A<T>::B;\n+  friend typename A<T>::B; // ERROR - struct is required\n };\n "}]}