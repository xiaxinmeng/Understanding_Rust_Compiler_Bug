{"sha": "3d8fa1484bd42d4be91d384ad08334ae6dca3428", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2Q4ZmExNDg0YmQ0MmQ0YmU5MWQzODRhZDA4MzM0YWU2ZGNhMzQyOA==", "commit": {"author": {"name": "Doug Kwan", "email": "dougkwan@google.com", "date": "2009-05-14T00:02:55Z"}, "committer": {"name": "Doug Kwan", "email": "dougkwan@gcc.gnu.org", "date": "2009-05-14T00:02:55Z"}, "message": "tree-ssa-sccvn.c (compare_ops): Stabilize qsort.\n\n2009-05-13  Doug Kwan  <dougkwan@google.com>\n\n\t* tree-ssa-sccvn.c (compare_ops): Stabilize qsort.\n\nFrom-SVN: r147508", "tree": {"sha": "6288940af66bd97da71d011e0e4957820730fa0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6288940af66bd97da71d011e0e4957820730fa0f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d8fa1484bd42d4be91d384ad08334ae6dca3428", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d8fa1484bd42d4be91d384ad08334ae6dca3428", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d8fa1484bd42d4be91d384ad08334ae6dca3428", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d8fa1484bd42d4be91d384ad08334ae6dca3428/comments", "author": {"login": "dougkwan", "id": 1399231, "node_id": "MDQ6VXNlcjEzOTkyMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1399231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dougkwan", "html_url": "https://github.com/dougkwan", "followers_url": "https://api.github.com/users/dougkwan/followers", "following_url": "https://api.github.com/users/dougkwan/following{/other_user}", "gists_url": "https://api.github.com/users/dougkwan/gists{/gist_id}", "starred_url": "https://api.github.com/users/dougkwan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dougkwan/subscriptions", "organizations_url": "https://api.github.com/users/dougkwan/orgs", "repos_url": "https://api.github.com/users/dougkwan/repos", "events_url": "https://api.github.com/users/dougkwan/events{/privacy}", "received_events_url": "https://api.github.com/users/dougkwan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7e2791428f91a88bfe3762fa1456f435fc25e2b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e2791428f91a88bfe3762fa1456f435fc25e2b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e2791428f91a88bfe3762fa1456f435fc25e2b0"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "52ae15283af042843e3ed0b5cf7bb47d7ca96359", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d8fa1484bd42d4be91d384ad08334ae6dca3428/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d8fa1484bd42d4be91d384ad08334ae6dca3428/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3d8fa1484bd42d4be91d384ad08334ae6dca3428", "patch": "@@ -1,3 +1,7 @@\n+2009-05-13  Doug Kwan  <dougkwan@google.com>\n+\n+\t* tree-ssa-sccvn.c (compare_ops): Stabilize qsort.\n+\n 2009-05-13  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* config/mips/mips.md (store): Add attributes for QI and HI."}, {"sha": "539afd2458aaba2f518c250ee44c3abe1825663f", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d8fa1484bd42d4be91d384ad08334ae6dca3428/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d8fa1484bd42d4be91d384ad08334ae6dca3428/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=3d8fa1484bd42d4be91d384ad08334ae6dca3428", "patch": "@@ -2421,7 +2421,7 @@ compare_ops (const void *pa, const void *pb)\n   basic_block bbb;\n \n   if (gimple_nop_p (opstmta) && gimple_nop_p (opstmtb))\n-    return 0;\n+    return SSA_NAME_VERSION (opa) - SSA_NAME_VERSION (opb);\n   else if (gimple_nop_p (opstmta))\n     return -1;\n   else if (gimple_nop_p (opstmtb))\n@@ -2431,7 +2431,7 @@ compare_ops (const void *pa, const void *pb)\n   bbb = gimple_bb (opstmtb);\n \n   if (!bba && !bbb)\n-    return 0;\n+    return SSA_NAME_VERSION (opa) - SSA_NAME_VERSION (opb);\n   else if (!bba)\n     return -1;\n   else if (!bbb)\n@@ -2441,12 +2441,15 @@ compare_ops (const void *pa, const void *pb)\n     {\n       if (gimple_code (opstmta) == GIMPLE_PHI\n \t  && gimple_code (opstmtb) == GIMPLE_PHI)\n-\treturn 0;\n+\treturn SSA_NAME_VERSION (opa) - SSA_NAME_VERSION (opb);\n       else if (gimple_code (opstmta) == GIMPLE_PHI)\n \treturn -1;\n       else if (gimple_code (opstmtb) == GIMPLE_PHI)\n \treturn 1;\n-      return gimple_uid (opstmta) - gimple_uid (opstmtb);\n+      else if (gimple_uid (opstmta) != gimple_uid (opstmtb))\n+        return gimple_uid (opstmta) - gimple_uid (opstmtb);\n+      else\n+\treturn SSA_NAME_VERSION (opa) - SSA_NAME_VERSION (opb);\n     }\n   return rpo_numbers[bba->index] - rpo_numbers[bbb->index];\n }"}]}