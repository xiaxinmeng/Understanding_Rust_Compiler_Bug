{"sha": "5211d96275021c367f53c167c32647b51141cff4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTIxMWQ5NjI3NTAyMWMzNjdmNTNjMTY3YzMyNjQ3YjUxMTQxY2ZmNA==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2008-07-02T15:45:48Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2008-07-02T15:45:48Z"}, "message": "compat.exp (compat-execute): Add -ffunction-sections and -Wl,--auto-overlay when building for spu-*-elf*.\n\n\t* lib/compat.exp (compat-execute): Add -ffunction-sections\n\tand -Wl,--auto-overlay when building for spu-*-elf*.\n\nFrom-SVN: r137365", "tree": {"sha": "67e157fd8c8a31a7161b5f1ca05b5ac89e2257da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67e157fd8c8a31a7161b5f1ca05b5ac89e2257da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5211d96275021c367f53c167c32647b51141cff4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5211d96275021c367f53c167c32647b51141cff4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5211d96275021c367f53c167c32647b51141cff4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5211d96275021c367f53c167c32647b51141cff4/comments", "author": null, "committer": null, "parents": [{"sha": "3ea394f23d8fa451a069e263c6b424cb59f16d66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ea394f23d8fa451a069e263c6b424cb59f16d66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ea394f23d8fa451a069e263c6b424cb59f16d66"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "887517921249244fc92515958f92f2350d577c2e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5211d96275021c367f53c167c32647b51141cff4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5211d96275021c367f53c167c32647b51141cff4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5211d96275021c367f53c167c32647b51141cff4", "patch": "@@ -1,3 +1,8 @@\n+2008-07-02  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\t* lib/compat.exp (compat-execute): Add -ffunction-sections\n+\tand -Wl,--auto-overlay when building for spu-*-elf*.\n+\n 2008-07-02  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \t* gcc.dg/nrv3.c (S): Increase size of padding for SPU."}, {"sha": "84538a6f8b4e0ee8a7749337f9749e36d9cb8d0b", "filename": "gcc/testsuite/lib/compat.exp", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5211d96275021c367f53c167c32647b51141cff4/gcc%2Ftestsuite%2Flib%2Fcompat.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5211d96275021c367f53c167c32647b51141cff4/gcc%2Ftestsuite%2Flib%2Fcompat.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fcompat.exp?ref=5211d96275021c367f53c167c32647b51141cff4", "patch": "@@ -275,6 +275,15 @@ proc compat-execute { src1 sid use_alt } {\n     set extra_flags_3 [compat-get-options $src3]\n     set compile_xfail_3 $compiler_conditional_xfail_data\n \n+    # On the SPU, most of the compat test cases exceed local store size.\n+    # Use automatic overlay support to make them fit.\n+    if { [istarget spu-*-elf*] } {\n+\tset extra_flags_1 \"$extra_flags_1 -Wl,--auto-overlay\"\n+\tset extra_flags_1 \"$extra_flags_1 -ffunction-sections\"\n+\tset extra_flags_2 \"$extra_flags_2 -ffunction-sections\"\n+\tset extra_flags_3 \"$extra_flags_3 -ffunction-sections\"\n+    }\n+\n     # Define the names of the object files.\n     regsub \"sid\" \"sid_main_tst.o\" $sid obj1\n     regsub \"sid\" \"sid_x_tst.o\" $sid obj2_tst"}]}