{"sha": "2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjI3NmQ1ZWQzODg0ZGU5MWEyZjgxMzEzZjkwZmJlM2U5ZTE3ODFlNw==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2007-08-04T00:05:56Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2007-08-04T00:05:56Z"}, "message": "re PR middle-end/32304 (ICE in set_mem_attributes_minus_bitpos)\n\n2007-08-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR middle-end/32304\n        * ipa-reference.c (has_proper_scope_for_analysis): Return false when\n        the decl's type has TYPE_NEEDS_CONSTRUCTING set.\n\n2007-08-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR middle-end/32304\n        * g++.dg/torture/pr32304.C: New testcase.\n\nFrom-SVN: r127191", "tree": {"sha": "44509ce0a3565ffd22029192c721507adf734681", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44509ce0a3565ffd22029192c721507adf734681"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/comments", "author": null, "committer": null, "parents": [{"sha": "f9fc04494477f63b2739ea14f80bb87f4bfd21ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9fc04494477f63b2739ea14f80bb87f4bfd21ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9fc04494477f63b2739ea14f80bb87f4bfd21ce"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "eeb4a51e0ddbbc8ce6ebd6640d731628fdcd3051", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "patch": "@@ -1,3 +1,9 @@\n+2007-08-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR middle-end/32304\n+\t* ipa-reference.c (has_proper_scope_for_analysis): Return false when\n+\tthe decl's type has TYPE_NEEDS_CONSTRUCTING set.\n+\n 2007-08-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR middle-end/32935"}, {"sha": "1a962c52cdb1b1596a53cd63944265a66e490752", "filename": "gcc/ipa-reference.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2Fipa-reference.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2Fipa-reference.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-reference.c?ref=2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "patch": "@@ -267,6 +267,10 @@ has_proper_scope_for_analysis (tree t)\n   if (DECL_EXTERNAL (t) || TREE_PUBLIC (t))\n     return false;\n \n+  /* We cannot touch decls where the type needs constructing.  */\n+  if (TYPE_NEEDS_CONSTRUCTING (TREE_TYPE (t)))\n+    return false;\n+\n   /* This is a variable we care about.  Check if we have seen it\n      before, and if not add it the set of variables we care about.  */\n   if (!bitmap_bit_p (all_module_statics, DECL_UID (t)))"}, {"sha": "ce38fc75bf83808825a7f623772972fc002f6045", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "patch": "@@ -1,3 +1,8 @@\n+2007-08-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR middle-end/32304\n+\t* g++.dg/torture/pr32304.C: New testcase.\n+\n 2007-08-03  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR middle-end/32935"}, {"sha": "236d00b97cd8da9c99c4260755c18a17102684a9", "filename": "gcc/testsuite/g++.dg/torture/pr32304.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr32304.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2276d5ed3884de91a2f81313f90fbe3e9e1781e7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr32304.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr32304.C?ref=2276d5ed3884de91a2f81313f90fbe3e9e1781e7", "patch": "@@ -0,0 +1,9 @@\n+// { dg-do compile }\n+\n+struct S {\n+        S() {}\n+};\n+S f() {\n+        static S s;\n+        return s;\n+}"}]}