{"sha": "2763a67eff553784e396cb651ef6929a6e14b0a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc2M2E2N2VmZjU1Mzc4NGUzOTZjYjY1MWVmNjkyOWE2ZTE0YjBhOQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2006-07-17T15:31:12Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2006-07-17T15:31:12Z"}, "message": "re PR middle-end/28403 (Missed argument pop after doubleword shift)\n\ngcc/\n\tPR middle-end/28403\n\t* optabs.c (expand_doubleword_shift): Wrap the call to\n\tdo_compare_rtx_and_jump with NO_DEFER_POP and OK_DEFER_POP.\n\ngcc/testsuite/\n\tPR middle-end/28403\n\t* gcc.c-torture/execute/pr28403.c: New test.\n\nFrom-SVN: r115525", "tree": {"sha": "a71c2c5cb75f6a5f78a826569ea10fb95b94af4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a71c2c5cb75f6a5f78a826569ea10fb95b94af4b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2763a67eff553784e396cb651ef6929a6e14b0a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2763a67eff553784e396cb651ef6929a6e14b0a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2763a67eff553784e396cb651ef6929a6e14b0a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2763a67eff553784e396cb651ef6929a6e14b0a9/comments", "author": null, "committer": null, "parents": [{"sha": "f8bdb931a97bcd90dd47cfcd3b4fbabf1872a84f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8bdb931a97bcd90dd47cfcd3b4fbabf1872a84f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8bdb931a97bcd90dd47cfcd3b4fbabf1872a84f"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "7a7b79f159b61bcc361b15c85afe1d7322b10899", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2763a67eff553784e396cb651ef6929a6e14b0a9", "patch": "@@ -1,3 +1,9 @@\n+2006-07-17  Richard Sandiford  <richard@codesourcery.com>\n+\n+\tPR middle-end/28403\n+\t* optabs.c (expand_doubleword_shift): Wrap the call to\n+\tdo_compare_rtx_and_jump with NO_DEFER_POP and OK_DEFER_POP.\n+\n 2006-07-17  Richard Sandiford  <richard@codesourcery.com>\n \n \tPR middle-end/28402"}, {"sha": "fe7ae065962835080c1af5ba57b1e698ecb1740d", "filename": "gcc/optabs.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=2763a67eff553784e396cb651ef6929a6e14b0a9", "patch": "@@ -959,8 +959,10 @@ expand_doubleword_shift (enum machine_mode op1_mode, optab binoptab,\n   subword_label = gen_label_rtx ();\n   done_label = gen_label_rtx ();\n \n+  NO_DEFER_POP;\n   do_compare_rtx_and_jump (cmp1, cmp2, cmp_code, false, op1_mode,\n \t\t\t   0, 0, subword_label);\n+  OK_DEFER_POP;\n \n   if (!expand_superword_shift (binoptab, outof_input, superword_op1,\n \t\t\t       outof_target, into_target,"}, {"sha": "a9398a3f467863f6b2cccb260fc6c746e3ad85fd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2763a67eff553784e396cb651ef6929a6e14b0a9", "patch": "@@ -1,3 +1,8 @@\n+2006-07-17  Richard Sandiford  <richard@codesourcery.com>\n+\n+\tPR middle-end/28403\n+\t* gcc.c-torture/execute/pr28403.c: New test.\n+\n 2006-07-17  Richard Sandiford  <richard@codesourcery.com>\n \n \tPR middle-end/28402"}, {"sha": "8f85ea08505c3cd04e6e4d08ec2c58b090fba9b3", "filename": "gcc/testsuite/gcc.c-torture/execute/pr28403.c", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr28403.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2763a67eff553784e396cb651ef6929a6e14b0a9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr28403.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr28403.c?ref=2763a67eff553784e396cb651ef6929a6e14b0a9", "patch": "@@ -0,0 +1,23 @@\n+typedef unsigned long long ull;\n+int global;\n+\n+int __attribute__((noinline))\n+foo (int x1, int x2, int x3, int x4, int x5, int x6, int x7, int x8)\n+{\n+  global = x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8;\n+}\n+\n+ull __attribute__((noinline))\n+bar (ull x)\n+{\n+  foo (1, 2, 1, 3, 1, 4, 1, 5);\n+  return x >> global;\n+}\n+\n+int\n+main (void)\n+{\n+  if (bar (0x123456789abcdefULL) != (0x123456789abcdefULL >> 18))\n+    abort ();\n+  exit (0);\n+}"}]}