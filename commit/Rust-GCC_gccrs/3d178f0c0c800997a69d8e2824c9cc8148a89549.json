{"sha": "3d178f0c0c800997a69d8e2824c9cc8148a89549", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2QxNzhmMGMwYzgwMDk5N2E2OWQ4ZTI4MjRjOWNjODE0OGE4OTU0OQ==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2017-09-05T20:48:25Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2017-09-05T20:48:25Z"}, "message": "tree-ssa-threadupdate.c (duplicate_thread_path): Remove unused REGION_COPY argument.\n\n\t* tree-ssa-threadupdate.c (duplicate_thread_path): Remove unused\n\tREGION_COPY argument.\n\t(thread_through_all_blocks): Remove unused argument to\n\tduplicate_thread_path.\n\nFrom-SVN: r251740", "tree": {"sha": "2fa68a9926da9dee587b8c8d80ef8fc1ef334901", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fa68a9926da9dee587b8c8d80ef8fc1ef334901"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d178f0c0c800997a69d8e2824c9cc8148a89549", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d178f0c0c800997a69d8e2824c9cc8148a89549", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d178f0c0c800997a69d8e2824c9cc8148a89549", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d178f0c0c800997a69d8e2824c9cc8148a89549/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0c29f2a2b42a1077975de6417267e138141a02b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c29f2a2b42a1077975de6417267e138141a02b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c29f2a2b42a1077975de6417267e138141a02b1"}], "stats": {"total": 28, "additions": 12, "deletions": 16}, "files": [{"sha": "e5a8c5a85bd17bd446a7bcac899d9e5ea51506ab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d178f0c0c800997a69d8e2824c9cc8148a89549/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d178f0c0c800997a69d8e2824c9cc8148a89549/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3d178f0c0c800997a69d8e2824c9cc8148a89549", "patch": "@@ -1,3 +1,10 @@\n+2017-09-05  Aldy Hernandez  <aldyh@redhat.com>\n+\n+\t* tree-ssa-threadupdate.c (duplicate_thread_path): Remove unused\n+\tREGION_COPY argument.\n+\t(thread_through_all_blocks): Remove unused argument to\n+\tduplicate_thread_path.\n+\n 2017-09-05  Richard Sandiford  <richard.sandiford@linaro.org>\n \t    Alan Hayward  <alan.hayward@arm.com>\n \t    David Sherwood  <david.sherwood@arm.com>"}, {"sha": "d68223aaebbb30eab6b0aee6d962d941af9a87f3", "filename": "gcc/tree-ssa-threadupdate.c", "status": "modified", "additions": 5, "deletions": 16, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d178f0c0c800997a69d8e2824c9cc8148a89549/gcc%2Ftree-ssa-threadupdate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d178f0c0c800997a69d8e2824c9cc8148a89549/gcc%2Ftree-ssa-threadupdate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-threadupdate.c?ref=3d178f0c0c800997a69d8e2824c9cc8148a89549", "patch": "@@ -2205,18 +2205,13 @@ bb_in_bbs (basic_block bb, basic_block *bbs, int n)\n    and create a single fallthru edge pointing to the same destination as the\n    EXIT edge.\n \n-   The new basic blocks are stored to REGION_COPY in the same order as they had\n-   in REGION, provided that REGION_COPY is not NULL.\n-\n    Returns false if it is unable to copy the region, true otherwise.  */\n \n static bool\n-duplicate_thread_path (edge entry, edge exit,\n-\t\t       basic_block *region, unsigned n_region,\n-\t\t       basic_block *region_copy)\n+duplicate_thread_path (edge entry, edge exit, basic_block *region,\n+\t\t       unsigned n_region)\n {\n   unsigned i;\n-  bool free_region_copy = false;\n   struct loop *loop = entry->dest->loop_father;\n   edge exit_copy;\n   edge redirected;\n@@ -2242,12 +2237,7 @@ duplicate_thread_path (edge entry, edge exit,\n \n   set_loop_copy (loop, loop);\n \n-  if (!region_copy)\n-    {\n-      region_copy = XNEWVEC (basic_block, n_region);\n-      free_region_copy = true;\n-    }\n-\n+  basic_block *region_copy = XNEWVEC (basic_block, n_region);\n   copy_bbs (region, n_region, region_copy, &exit, 1, &exit_copy, loop,\n \t    split_edge_bb_loc (entry), false);\n \n@@ -2376,8 +2366,7 @@ duplicate_thread_path (edge entry, edge exit,\n   /* Add the other PHI node arguments.  */\n   add_phi_args_after_copy (region_copy, n_region, NULL);\n \n-  if (free_region_copy)\n-    free (region_copy);\n+  free (region_copy);\n \n   free_original_copy_tables ();\n   return true;\n@@ -2502,7 +2491,7 @@ thread_through_all_blocks (bool may_peel_loop_headers)\n       for (unsigned int j = 0; j < len - 1; j++)\n \tregion[j] = (*path)[j]->e->dest;\n \n-      if (duplicate_thread_path (entry, exit, region, len - 1, NULL))\n+      if (duplicate_thread_path (entry, exit, region, len - 1))\n \t{\n \t  /* We do not update dominance info.  */\n \t  free_dominance_info (CDI_DOMINATORS);"}]}