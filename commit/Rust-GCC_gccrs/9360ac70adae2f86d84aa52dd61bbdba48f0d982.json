{"sha": "9360ac70adae2f86d84aa52dd61bbdba48f0d982", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTM2MGFjNzBhZGFlMmY4NmQ4NGFhNTJkZDYxYmJkYmE0OGYwZDk4Mg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1998-08-31T23:38:02Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-08-31T23:38:02Z"}, "message": "decl.c (finish_enum): Handle member enums of classes declared in template functions.\n\n\t* decl.c (finish_enum): Handle member enums of classes declared in\n\ttemplate functions.\n\t* decl2.c (grok_x_components): Strip attributres before calling\n\tgroktypename.\n\nFrom-SVN: r22144", "tree": {"sha": "c8a33282da499de3ea1893034d15210629921e5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8a33282da499de3ea1893034d15210629921e5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9360ac70adae2f86d84aa52dd61bbdba48f0d982", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9360ac70adae2f86d84aa52dd61bbdba48f0d982", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9360ac70adae2f86d84aa52dd61bbdba48f0d982", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9360ac70adae2f86d84aa52dd61bbdba48f0d982/comments", "author": null, "committer": null, "parents": [{"sha": "2571e6acfa2e7b5e770d7bfdd39e773161f10b1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2571e6acfa2e7b5e770d7bfdd39e773161f10b1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2571e6acfa2e7b5e770d7bfdd39e773161f10b1d"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "4e17539b35bd4deb2820738a61f6682aa6c2a802", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9360ac70adae2f86d84aa52dd61bbdba48f0d982", "patch": "@@ -1,3 +1,11 @@\n+1998-08-31  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* decl.c (finish_enum): Handle member enums of classes declared in\n+\ttemplate functions.\n+\t\n+\t* decl2.c (grok_x_components): Strip attributres before calling\n+\tgroktypename. \n+\t\n 1998-08-31  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* cp-tree.h, decl2.c: Remove support for -fall-virtual,"}, {"sha": "fe9160dc2c031743af75733754f9fadb5641a688", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=9360ac70adae2f86d84aa52dd61bbdba48f0d982", "patch": "@@ -11931,7 +11931,8 @@ finish_enum (enumtype)\n \n   if (processing_template_decl)\n     {\n-      if (current_function_decl)\n+      tree scope = current_scope ();\n+      if (scope && TREE_CODE (scope) == FUNCTION_DECL)\n \t{\n \t  add_tree (build_min (TAG_DEFN, enumtype));\n \t  resume_temporary_allocation ();"}, {"sha": "04424bf147ce22506126082b9dafb88508b6200d", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=9360ac70adae2f86d84aa52dd61bbdba48f0d982", "patch": "@@ -853,7 +853,8 @@ grok_x_components (specs, components)\n \n   if (components == NULL_TREE)\n     {\n-      t = groktypename (build_decl_list (specs, NULL_TREE));\n+      t = groktypename (build_decl_list (strip_attrs (specs),\n+\t\t\t\t\t NULL_TREE)); \n \n       if (t == NULL_TREE)\n \t{"}, {"sha": "d86a6bb3f66d6baddda5ab2900691dc413cc3647", "filename": "gcc/testsuite/g++.old-deja/g++.other/crash4.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash4.C?ref=9360ac70adae2f86d84aa52dd61bbdba48f0d982", "patch": "@@ -0,0 +1,7 @@\n+// Build don't link:\n+\n+struct T {\n+  struct S __attribute__ ((packed)) { // ERROR - parse error\n+    int i;                            \n+  };\n+}; // ERROR - parse error"}, {"sha": "77631c41c6f785e519ae34930b8a8cf42bc0f19d", "filename": "gcc/testsuite/g++.old-deja/g++.pt/enum11.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fenum11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9360ac70adae2f86d84aa52dd61bbdba48f0d982/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fenum11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fenum11.C?ref=9360ac70adae2f86d84aa52dd61bbdba48f0d982", "patch": "@@ -0,0 +1,10 @@\n+// Build don't link:\n+\n+template <class T> void f1() \n+{ \n+  struct foo { enum T2 {\n+    un, du, toi };\n+  }; \n+}\n+\n+void f2() { f1<int>(); }"}]}