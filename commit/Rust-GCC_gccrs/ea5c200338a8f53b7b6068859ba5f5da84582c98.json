{"sha": "ea5c200338a8f53b7b6068859ba5f5da84582c98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE1YzIwMDMzOGE4ZjUzYjdiNjA2ODg1OWJhNWY1ZGE4NDU4MmM5OA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-11-10T20:31:11Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-11-10T20:31:11Z"}, "message": "re PR go/68255 (cgo-generated constructor not being called)\n\n\tPR go/68255\n    cmd/go: always use --whole-archive for gccgo packages\n    \n    This is a backport of https://golang.org/cl/16775.\n    \n    This is, in effect, what the gc toolchain does.  It fixes cases where Go\n    code refers to a C global variable; without this, if the global variable\n    was the only thing visible in the C code, the generated cgo file might\n    not get pulled in from the archive, leaving the Go variable\n    uninitialized.\n    \n    This was reported against gccgo as https://gcc.gnu.org/PR68255 .\n    \n    Reviewed-on: https://go-review.googlesource.com/16778\n\nFrom-SVN: r230120", "tree": {"sha": "702cc02dccad395c560d2e5bcd6975a8b6be0711", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/702cc02dccad395c560d2e5bcd6975a8b6be0711"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea5c200338a8f53b7b6068859ba5f5da84582c98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea5c200338a8f53b7b6068859ba5f5da84582c98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea5c200338a8f53b7b6068859ba5f5da84582c98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea5c200338a8f53b7b6068859ba5f5da84582c98/comments", "author": null, "committer": null, "parents": [{"sha": "c5a237e923d40c592d47828bcd20df6cc123dcb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5a237e923d40c592d47828bcd20df6cc123dcb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5a237e923d40c592d47828bcd20df6cc123dcb2"}], "stats": {"total": 14, "additions": 3, "deletions": 11}, "files": [{"sha": "dd23a8fdd8d0245a805f9c8321752e5dbab9f85c", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea5c200338a8f53b7b6068859ba5f5da84582c98/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea5c200338a8f53b7b6068859ba5f5da84582c98/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=ea5c200338a8f53b7b6068859ba5f5da84582c98", "patch": "@@ -1,4 +1,4 @@\n-012ab5cb2ef1c26e8023ce90d3a2bba174da7b30\n+0c07751d139ef90a43ef7f299f925622a8792a9f\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "865871c5314a7e82860c8fa95c2da1c602f6c6d3", "filename": "libgo/go/cmd/go/build.go", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea5c200338a8f53b7b6068859ba5f5da84582c98/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea5c200338a8f53b7b6068859ba5f5da84582c98/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go?ref=ea5c200338a8f53b7b6068859ba5f5da84582c98", "patch": "@@ -2555,17 +2555,9 @@ func (tools gccgoToolchain) ld(b *builder, root *action, out string, allactions\n \t\t}\n \t}\n \n-\tswitch ldBuildmode {\n-\tcase \"c-archive\", \"c-shared\":\n-\t\tldflags = append(ldflags, \"-Wl,--whole-archive\")\n-\t}\n-\n+\tldflags = append(ldflags, \"-Wl,--whole-archive\")\n \tldflags = append(ldflags, afiles...)\n-\n-\tswitch ldBuildmode {\n-\tcase \"c-archive\", \"c-shared\":\n-\t\tldflags = append(ldflags, \"-Wl,--no-whole-archive\")\n-\t}\n+\tldflags = append(ldflags, \"-Wl,--no-whole-archive\")\n \n \tldflags = append(ldflags, cgoldflags...)\n \tldflags = append(ldflags, envList(\"CGO_LDFLAGS\", \"\")...)"}]}