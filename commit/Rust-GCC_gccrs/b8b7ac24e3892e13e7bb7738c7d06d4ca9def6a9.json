{"sha": "b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjhiN2FjMjRlMzg5MmUxM2U3YmI3NzM4YzdkMDZkNGNhOWRlZjZhOQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-04-28T01:08:43Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-04-28T01:08:43Z"}, "message": "(ashiftrt_r4_*): Rewrite for efficiency.\n\n(ashrsi3, lshrsi3, lshrsi3): Add.\n\nFrom-SVN: r9521", "tree": {"sha": "89a352ad42ad3e1580b45af11f094e5cdb093d40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89a352ad42ad3e1580b45af11f094e5cdb093d40"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9/comments", "author": null, "committer": null, "parents": [{"sha": "2a3c15b553af7e9a5c3ae07c54c88d3ce0ad3332", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a3c15b553af7e9a5c3ae07c54c88d3ce0ad3332", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a3c15b553af7e9a5c3ae07c54c88d3ce0ad3332"}], "stats": {"total": 515, "additions": 496, "deletions": 19}, "files": [{"sha": "be24f76a8f4509490ab3c95feb19c48897597e9e", "filename": "gcc/config/sh/lib1funcs.asm", "status": "modified", "additions": 496, "deletions": 19, "changes": 515, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9/gcc%2Fconfig%2Fsh%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9/gcc%2Fconfig%2Fsh%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Flib1funcs.asm?ref=b8b7ac24e3892e13e7bb7738c7d06d4ca9def6a9", "patch": "@@ -34,6 +34,9 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n !! Contributed by Steve Chamberlain.\n !! sac@cygnus.com\n \n+!! ashiftrt_r4_x, ___ashrsi3, ___ashlsi3, ___lshrsi3 routines\n+!! recoded in assembly by Toshiyasu Morita\n+!! tm@netcom.com\n \n #ifdef L_ashiftrt\n \t.global\t___ashiftrt_r4_0\n@@ -70,10 +73,13 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \t.global\t___ashiftrt_r4_31\n \t.global\t___ashiftrt_r4_32\n \n+\t.align\t1\n ___ashiftrt_r4_32:\n-\tshar\tr4\n ___ashiftrt_r4_31:\n-\tshar\tr4\n+\trotcl\tr4\n+\trts\n+\tsubc\tr4,r4\n+\n ___ashiftrt_r4_30:\n \tshar\tr4\n ___ashiftrt_r4_29:\n@@ -87,7 +93,11 @@ ___ashiftrt_r4_26:\n ___ashiftrt_r4_25:\n \tshar\tr4\n ___ashiftrt_r4_24:\n-\tshar\tr4\n+\tshlr16\tr4\n+\tshlr8\tr4\n+\trts\n+\texts.b\tr4,r4\n+\n ___ashiftrt_r4_23:\n \tshar\tr4\n ___ashiftrt_r4_22:\n@@ -103,7 +113,10 @@ ___ashiftrt_r4_18:\n ___ashiftrt_r4_17:\n \tshar\tr4\n ___ashiftrt_r4_16:\n-\tshar\tr4\n+\tshlr16\tr4\n+\trts\n+\texts.w\tr4,r4\n+\n ___ashiftrt_r4_15:\n \tshar\tr4\n ___ashiftrt_r4_14:\n@@ -141,6 +154,471 @@ ___ashiftrt_r4_0:\n \tnop\n #endif\n \n+#ifdef L_ashiftrt_n\n+\n+!\n+! ___ashrsi3\n+!\n+! Entry:\n+!\n+! r4: Value to shift\n+! r5: Shifts\n+!\n+! Exit:\n+!\n+! r0: Result\n+!\n+! Destroys:\n+!\n+! r1\n+!\n+\n+\t.global\t___ashrsi3\n+\t.align\t2\n+___ashrsi3:\n+\tmov\t#31,r0\n+\tcmp/hi\tr0,r5\n+\tbt\tL_ashrsi3_31\n+\tmov\tr5,r1\t\t\t! Remove later\n+\tmova\tL_ashrsi3_table,r0\n+\tshll\tr1\t\t\t! Remove later\n+\tmov.w\t@(r0,r1),r1\t\t! Change to mov.b @(r0,r5),r1\n+\tadd\tr1,r0\n+\tjmp\t@r0\n+\tmov\tr4,r0\n+\n+L_ashrsi3_table:\n+\t.word\t\tL_ashrsi3_0-L_ashrsi3_table\t! Change to .bytes\n+\t.word\t\tL_ashrsi3_1-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_2-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_3-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_4-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_5-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_6-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_7-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_8-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_9-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_10-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_11-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_12-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_13-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_14-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_15-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_16-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_17-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_18-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_19-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_20-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_21-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_22-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_23-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_24-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_25-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_26-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_27-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_28-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_29-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_30-L_ashrsi3_table\n+\t.word\t\tL_ashrsi3_31-L_ashrsi3_table\n+\n+L_ashrsi3_31:\n+\trotcl\tr0\n+\trts\n+\tsubc\tr0,r0\n+\n+L_ashrsi3_30:\n+\tshar\tr0\n+L_ashrsi3_29:\n+\tshar\tr0\n+L_ashrsi3_28:\n+\tshar\tr0\n+L_ashrsi3_27:\n+\tshar\tr0\n+L_ashrsi3_26:\n+\tshar\tr0\n+L_ashrsi3_25:\n+\tshar\tr0\n+L_ashrsi3_24:\n+\tshlr16\tr0\n+\tshlr8\tr0\n+\trts\n+\texts.b\tr0,r0\n+\n+L_ashrsi3_23:\n+\tshar\tr0\n+L_ashrsi3_22:\n+\tshar\tr0\n+L_ashrsi3_21:\n+\tshar\tr0\n+L_ashrsi3_20:\n+\tshar\tr0\n+L_ashrsi3_19:\n+\tshar\tr0\n+L_ashrsi3_18:\n+\tshar\tr0\n+L_ashrsi3_17:\n+\tshar\tr0\n+L_ashrsi3_16:\n+\tshlr16\tr0\n+\trts\n+\texts.w\tr0,r0\n+\n+L_ashrsi3_15:\n+\tshar\tr0\n+L_ashrsi3_14:\n+\tshar\tr0\n+L_ashrsi3_13:\n+\tshar\tr0\n+L_ashrsi3_12:\n+\tshar\tr0\n+L_ashrsi3_11:\n+\tshar\tr0\n+L_ashrsi3_10:\n+\tshar\tr0\n+L_ashrsi3_9:\n+\tshar\tr0\n+L_ashrsi3_8:\n+\tshar\tr0\n+L_ashrsi3_7:\n+\tshar\tr0\n+L_ashrsi3_6:\n+\tshar\tr0\n+L_ashrsi3_5:\n+\tshar\tr0\n+L_ashrsi3_4:\n+\tshar\tr0\n+L_ashrsi3_3:\n+\tshar\tr0\n+L_ashrsi3_2:\n+\tshar\tr0\n+L_ashrsi3_1:\n+\trts\n+\tshar\tr0\n+\n+L_ashrsi3_0:\n+\trts\n+\tnop\n+\n+#endif\n+\n+#ifdef L_ashiftlt\n+\n+!\n+! ___ashlsi3\n+!\n+! Entry:\n+!\n+! r4: Value to shift\n+! r5: Shifts\n+!\n+! Exit:\n+!\n+! r0: Result\n+!\n+! Destroys:\n+!\n+! r1\n+!\n+\t.global\t___ashlsi3\n+\t.align\t2\n+___ashlsi3:\n+\tmov\t#31,r0\n+\tcmp/hi\tr0,r5\n+\tbt\tL_ashlsi3_32\n+\tmov\tr5,r1\t\t\t! Remove later\n+\tmova\tL_ashlsi3_table,r0\n+\tshll\tr1\t\t\t! Remove later\n+\tmov.w\t@(r0,r1),r1\t\t! Change to mov.b @(r0,r5),r1\n+\tadd\tr1,r0\n+\tjmp\t@r0\n+\tmov\tr4,r0\n+\n+L_ashlsi3_table:\n+\t.word\t\tL_ashlsi3_0-L_ashlsi3_table\t! Change to .bytes\n+\t.word\t\tL_ashlsi3_1-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_2-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_3-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_4-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_5-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_6-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_7-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_8-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_9-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_10-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_11-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_12-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_13-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_14-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_15-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_16-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_17-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_18-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_19-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_20-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_21-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_22-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_23-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_24-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_25-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_26-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_27-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_28-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_29-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_30-L_ashlsi3_table\n+\t.word\t\tL_ashlsi3_31-L_ashlsi3_table\n+\n+L_ashlsi3_6:\n+\tshll2\tr0\n+L_ashlsi3_4:\n+\tshll2\tr0\n+L_ashlsi3_2:\n+\trts\n+\tshll2\tr0\n+\n+L_ashlsi3_7:\n+\tshll2\tr0\n+L_ashlsi3_5:\n+\tshll2\tr0\n+L_ashlsi3_3:\n+\tshll2\tr0\n+L_ashlsi3_1:\n+\trts\n+\tshll\tr0\n+\n+L_ashlsi3_14:\n+\tshll2\tr0\n+L_ashlsi3_12:\n+\tshll2\tr0\n+L_ashlsi3_10:\n+\tshll2\tr0\n+L_ashlsi3_8:\n+\trts\n+\tshll8\tr0\n+\n+L_ashlsi3_15:\n+\tshll2\tr0\n+L_ashlsi3_13:\n+\tshll2\tr0\n+L_ashlsi3_11:\n+\tshll2\tr0\n+L_ashlsi3_9:\n+\tshll8\tr0\n+\trts\n+\tshll\tr0\n+\n+L_ashlsi3_22:\n+\tshll2\tr0\n+L_ashlsi3_20:\n+\tshll2\tr0\n+L_ashlsi3_18:\n+\tshll2\tr0\n+L_ashlsi3_16:\n+\trts\n+\tshll16\tr0\n+\n+L_ashlsi3_23:\n+\tshll2\tr0\n+L_ashlsi3_21:\n+\tshll2\tr0\n+L_ashlsi3_19:\n+\tshll2\tr0\n+L_ashlsi3_17:\n+\tshll16\tr0\n+\trts\n+\tshll\tr0\n+\n+L_ashlsi3_30:\n+\tshll2\tr0\n+L_ashlsi3_28:\n+\tshll2\tr0\n+L_ashlsi3_26:\n+\tshll2\tr0\n+L_ashlsi3_24:\n+\tshll16\tr0\n+\trts\n+\tshll8\tr0\n+\n+L_ashlsi3_31:\n+\tshll2\tr0\n+L_ashlsi3_29:\n+\tshll2\tr0\n+L_ashlsi3_27:\n+\tshll2\tr0\n+L_ashlsi3_25:\n+\tshll16\tr0\n+\tshll8\tr0\n+\trts\n+\tshll\tr0\n+\n+L_ashlsi3_32:\n+\trts\n+\tmov\t#0,r0\n+\n+L_ashlsi3_0:\n+\trts\n+\tnop\n+\n+#endif\n+\n+#ifdef L_lshiftrt\n+\n+!\n+! ___lshrsi3\n+!\n+! Entry:\n+!\n+! r4: Value to shift\n+! r5: Shifts\n+!\n+! Exit:\n+!\n+! r0: Result\n+!\n+! Destroys:\n+!\n+! r1\n+!\n+\t.global\t___lshrsi3\n+\t.align\t2\n+___lshrsi3:\n+\tmov\t#31,r0\n+\tcmp/hi\tr0,r5\n+\tbt\tL_lshrsi3_32\n+\tmov\tr5,r1\t\t\t! Remove later\n+\tmova\tL_lshrsi3_table,r0\n+\tshll\tr1\t\t\t! Remove later\n+\tmov.w\t@(r0,r1),r1\t\t! Change to mov.b @(r0,r5),r1\n+\tadd\tr1,r0\n+\tjmp\t@r0\n+\tmov\tr4,r0\n+\n+L_lshrsi3_table:\n+\t.word\t\tL_lshrsi3_0-L_lshrsi3_table\t! Change to .bytes\n+\t.word\t\tL_lshrsi3_1-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_2-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_3-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_4-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_5-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_6-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_7-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_8-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_9-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_10-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_11-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_12-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_13-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_14-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_15-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_16-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_17-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_18-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_19-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_20-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_21-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_22-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_23-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_24-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_25-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_26-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_27-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_28-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_29-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_30-L_lshrsi3_table\n+\t.word\t\tL_lshrsi3_31-L_lshrsi3_table\n+\n+L_lshrsi3_6:\n+\tshlr2\tr0\n+L_lshrsi3_4:\n+\tshlr2\tr0\n+L_lshrsi3_2:\n+\trts\n+\tshlr2\tr0\n+\n+L_lshrsi3_7:\n+\tshlr2\tr0\n+L_lshrsi3_5:\n+\tshlr2\tr0\n+L_lshrsi3_3:\n+\tshlr2\tr0\n+L_lshrsi3_1:\n+\trts\n+\tshlr\tr0\n+\n+L_lshrsi3_14:\n+\tshlr2\tr0\n+L_lshrsi3_12:\n+\tshlr2\tr0\n+L_lshrsi3_10:\n+\tshlr2\tr0\n+L_lshrsi3_8:\n+\trts\n+\tshlr8\tr0\n+\n+L_lshrsi3_15:\n+\tshlr2\tr0\n+L_lshrsi3_13:\n+\tshlr2\tr0\n+L_lshrsi3_11:\n+\tshlr2\tr0\n+L_lshrsi3_9:\n+\tshlr8\tr0\n+\trts\n+\tshlr\tr0\n+\n+L_lshrsi3_22:\n+\tshlr2\tr0\n+L_lshrsi3_20:\n+\tshlr2\tr0\n+L_lshrsi3_18:\n+\tshlr2\tr0\n+L_lshrsi3_16:\n+\trts\n+\tshlr16\tr0\n+\n+L_lshrsi3_23:\n+\tshlr2\tr0\n+L_lshrsi3_21:\n+\tshlr2\tr0\n+L_lshrsi3_19:\n+\tshlr2\tr0\n+L_lshrsi3_17:\n+\tshlr16\tr0\n+\trts\n+\tshlr\tr0\n+\n+L_lshrsi3_30:\n+\tshlr2\tr0\n+L_lshrsi3_28:\n+\tshlr2\tr0\n+L_lshrsi3_26:\n+\tshlr2\tr0\n+L_lshrsi3_24:\n+\tshlr16\tr0\n+\trts\n+\tshlr8\tr0\n+\n+L_lshrsi3_31:\n+\tshlr2\tr0\n+L_lshrsi3_29:\n+\tshlr2\tr0\n+L_lshrsi3_27:\n+\tshlr2\tr0\n+L_lshrsi3_25:\n+\tshlr16\tr0\n+\tshlr8\tr0\n+\trts\n+\tshlr\tr0\n+\n+L_lshrsi3_32:\n+\trts\n+\tmov\t#0,r0\n+\n+L_lshrsi3_0:\n+\trts\n+\tnop\n+\n+#endif\n+\n #ifdef L_movstr\n \t.text\n ! done all the large groups, do the remainder\n@@ -152,7 +630,7 @@ done:\n \tshll2\tr6\n \tadd\tr6,r0\n \tjmp\t@r0\n-\tadd\t#64,r4\t\n+\tadd\t#64,r4\n \t.align\t4\n \t.global\t___movstrSI64\n ___movstrSI64:\n@@ -305,22 +783,22 @@ ___mulsi3:\n \tswap.w  r4,r2\t\t! r2 = bbaa\n \txtrct   r2,r3\t\t! r3 = aacc\n \ttst  \tr3,r3\t\t! msws zero ?\n-\tbf      hiset\t\t\n+\tbf      hiset\n \trts\t\t\t! yes - then weve got the answer\n \tsts     macl,r0\n \n hiset:\tsts\tmacl,r0\t\t! r0 = bb*dd\n \tmulu\tr2,r5\t\t| brewing macl = aa*dd\n \tsts\tmacl,r1\n \tmulu\tr3,r4\t\t| brewing macl = cc*bb\n-\tsts\tmacl,r2\t\t\n+\tsts\tmacl,r2\n \tadd\tr1,r2\n \tshll16\tr2\n \trts\n \tadd\tr2,r0\n-\t\n-\t\n-#endif\t\n+\n+\n+#endif\n #ifdef L_sdivsi3\n \t.title \"SH DIVIDE\"\n !! 4 byte integer Divide code for the Hitachi SH\n@@ -336,7 +814,7 @@ hiset:\tsts\tmacl,r0\t\t! r0 = bb*dd\n ___sdivsi3:\n \tmov\tr4,r1\n \tmov\tr5,r0\n-\t\n+\n \ttst\tr0,r0\n \tbt\tdiv0\n \tmov\t#0,r2\n@@ -410,10 +888,10 @@ ___sdivsi3:\n \tdiv1\tr0,r3\n \trotcl\tr1\n \taddc\tr2,r1\n-\trts\t\n+\trts\n \tmov\tr1,r0\n \n-\t\n+\n div0:\trts\n \tmov\t#0,r0\n \n@@ -426,20 +904,20 @@ div0:\trts\n !! Steve Chamberlain\n !! sac@cygnus.com\n !!\n-!! \n+!!\n \n !! args in r4 and r5, result in r0, clobbers r4, pr, and t bit\n \t.global\t___udivsi3\n \n ___udivsi3:\n longway:\n \tmov\t#0,r0\n-\tdiv0u\t\t\n-\t! get one bit from the msb of the numerator into the T \n+\tdiv0u\n+\t! get one bit from the msb of the numerator into the T\n \t! bit and divide it by whats in r5.  Put the answer bit\n \t! into the T bit so it can come out again at the bottom\n \n-\trotcl\tr4 ; div1 r5,r0\t\n+\trotcl\tr4 ; div1 r5,r0\n \trotcl\tr4 ; div1 r5,r0\n \trotcl\tr4 ; div1 r5,r0\n \trotcl\tr4 ; div1 r5,r0\n@@ -475,9 +953,8 @@ vshortway:\n \trotcl\tr4 ; div1 r5,r0\n \trotcl\tr4 ; div1 r5,r0\n \trotcl\tr4 ; div1 r5,r0\n-\trotcl\tr4 \t\n+\trotcl\tr4\n ret:\trts\n \tmov\tr4,r0\n \n #endif\n-"}]}