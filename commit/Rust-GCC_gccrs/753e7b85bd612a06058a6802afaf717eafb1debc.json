{"sha": "753e7b85bd612a06058a6802afaf717eafb1debc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzUzZTdiODViZDYxMmEwNjA1OGE2ODAyYWZhZjcxN2VhZmIxZGViYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-01-26T22:37:13Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-01-26T22:37:13Z"}, "message": "net: Check for EINTR.\n\nFrom-SVN: r169309", "tree": {"sha": "086fff9efd8f05f98cd450af4bd59d626cec0df0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/086fff9efd8f05f98cd450af4bd59d626cec0df0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/753e7b85bd612a06058a6802afaf717eafb1debc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/753e7b85bd612a06058a6802afaf717eafb1debc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/753e7b85bd612a06058a6802afaf717eafb1debc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/753e7b85bd612a06058a6802afaf717eafb1debc/comments", "author": null, "committer": null, "parents": [{"sha": "dcf25f597322d3ed96fe648e668a342db5015edd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcf25f597322d3ed96fe648e668a342db5015edd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcf25f597322d3ed96fe648e668a342db5015edd"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "26d17d4e0e79c675c374aa9925ee44e96aaacc82", "filename": "libgo/go/net/fd.go", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/753e7b85bd612a06058a6802afaf717eafb1debc/libgo%2Fgo%2Fnet%2Ffd.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/753e7b85bd612a06058a6802afaf717eafb1debc/libgo%2Fgo%2Fnet%2Ffd.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fnet%2Ffd.go?ref=753e7b85bd612a06058a6802afaf717eafb1debc", "patch": "@@ -350,7 +350,7 @@ func (fd *netFD) Read(p []byte) (n int, err os.Error) {\n \tfor {\n \t\tvar errno int\n \t\tn, errno = syscall.Read(fd.sysfile.Fd(), p)\n-\t\tif errno == syscall.EAGAIN && fd.rdeadline >= 0 {\n+\t\tif (errno == syscall.EAGAIN || errno == syscall.EINTR) && fd.rdeadline >= 0 {\n \t\t\tpollserver.WaitRead(fd)\n \t\t\tcontinue\n \t\t}\n@@ -385,7 +385,7 @@ func (fd *netFD) ReadFrom(p []byte) (n int, sa syscall.Sockaddr, err os.Error) {\n \tfor {\n \t\tvar errno int\n \t\tn, sa, errno = syscall.Recvfrom(fd.sysfd, p, 0)\n-\t\tif errno == syscall.EAGAIN && fd.rdeadline >= 0 {\n+\t\tif (errno == syscall.EAGAIN || errno == syscall.EINTR) && fd.rdeadline >= 0 {\n \t\t\tpollserver.WaitRead(fd)\n \t\t\tcontinue\n \t\t}\n@@ -418,7 +418,7 @@ func (fd *netFD) ReadMsg(p []byte, oob []byte) (n, oobn, flags int, sa syscall.S\n \tfor {\n \t\tvar errno int\n \t\tn, oobn, flags, sa, errno = syscall.Recvmsg(fd.sysfd, p, oob, 0)\n-\t\tif errno == syscall.EAGAIN && fd.rdeadline >= 0 {\n+\t\tif (errno == syscall.EAGAIN || errno == syscall.EINTR) && fd.rdeadline >= 0 {\n \t\t\tpollserver.WaitRead(fd)\n \t\t\tcontinue\n \t\t}\n@@ -464,7 +464,7 @@ func (fd *netFD) Write(p []byte) (n int, err os.Error) {\n \t\tif nn == len(p) {\n \t\t\tbreak\n \t\t}\n-\t\tif errno == syscall.EAGAIN && fd.wdeadline >= 0 {\n+\t\tif (errno == syscall.EAGAIN || errno == syscall.EINTR) && fd.wdeadline >= 0 {\n \t\t\tpollserver.WaitWrite(fd)\n \t\t\tcontinue\n \t\t}\n@@ -500,7 +500,7 @@ func (fd *netFD) WriteTo(p []byte, sa syscall.Sockaddr) (n int, err os.Error) {\n \tvar oserr os.Error\n \tfor {\n \t\terrno := syscall.Sendto(fd.sysfd, p, 0, sa)\n-\t\tif errno == syscall.EAGAIN && fd.wdeadline >= 0 {\n+\t\tif (errno == syscall.EAGAIN || errno == syscall.EINTR) && fd.wdeadline >= 0 {\n \t\t\tpollserver.WaitWrite(fd)\n \t\t\tcontinue\n \t\t}\n@@ -534,7 +534,7 @@ func (fd *netFD) WriteMsg(p []byte, oob []byte, sa syscall.Sockaddr) (n int, oob\n \tfor {\n \t\tvar errno int\n \t\terrno = syscall.Sendmsg(fd.sysfd, p, oob, sa, 0)\n-\t\tif errno == syscall.EAGAIN && fd.wdeadline >= 0 {\n+\t\tif (errno == syscall.EAGAIN || errno == syscall.EINTR) && fd.wdeadline >= 0 {\n \t\t\tpollserver.WaitWrite(fd)\n \t\t\tcontinue\n \t\t}\n@@ -572,7 +572,7 @@ func (fd *netFD) accept(toAddr func(syscall.Sockaddr) Addr) (nfd *netFD, err os.\n \t\t\treturn nil, os.EINVAL\n \t\t}\n \t\ts, sa, e = syscall.Accept(fd.sysfd)\n-\t\tif e != syscall.EAGAIN {\n+\t\tif e != syscall.EAGAIN && e != syscall.EINTR {\n \t\t\tbreak\n \t\t}\n \t\tsyscall.ForkLock.RUnlock()"}]}