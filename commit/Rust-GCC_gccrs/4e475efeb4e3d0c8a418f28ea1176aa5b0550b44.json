{"sha": "4e475efeb4e3d0c8a418f28ea1176aa5b0550b44", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGU0NzVlZmViNGUzZDBjOGE0MThmMjhlYTExNzZhYTViMDU1MGI0NA==", "commit": {"author": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2020-11-27T12:57:49Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2020-11-28T21:13:22Z"}, "message": "Add Docker file for automated images to allow for easier testing\n\nExample usage:\n\ndocker build . -t gccrs-dev\ndocker run --rm -v \"$PWD\":/usr/src/myapp -w /usr/src/myapp \\\n    gccrs-dev:latest gccrs -g -O2 -c \\\n    gcc/testsuite/rust.test/compilable/type_infer1.rs -o type_infer1.o", "tree": {"sha": "58f51e035f166824eb996497f3ec243bea9f2316", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58f51e035f166824eb996497f3ec243bea9f2316"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e475efeb4e3d0c8a418f28ea1176aa5b0550b44", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e475efeb4e3d0c8a418f28ea1176aa5b0550b44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e475efeb4e3d0c8a418f28ea1176aa5b0550b44", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e475efeb4e3d0c8a418f28ea1176aa5b0550b44/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f28325125b7ea31e5cbfd3269a3ee6a4b79ddfd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f28325125b7ea31e5cbfd3269a3ee6a4b79ddfd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f28325125b7ea31e5cbfd3269a3ee6a4b79ddfd2"}], "stats": {"total": 71, "additions": 71, "deletions": 0}, "files": [{"sha": "460fe4b310e8bdf15bc2bf1f9b73114effbe0fc1", "filename": "Dockerfile", "status": "added", "additions": 71, "deletions": 0, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e475efeb4e3d0c8a418f28ea1176aa5b0550b44/Dockerfile", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e475efeb4e3d0c8a418f28ea1176aa5b0550b44/Dockerfile", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Dockerfile?ref=4e475efeb4e3d0c8a418f28ea1176aa5b0550b44", "patch": "@@ -0,0 +1,71 @@\n+FROM ubuntu:latest\n+\n+RUN apt-get update; \\\n+    DEBIAN_FRONTEND=\"noninteractive\" apt-get install -y --no-install-recommends \\\n+    autoconf \\\n+    automake \\\n+    bzip2\\\n+    dpkg-dev \\\n+    file \\\n+    wget \\\n+    curl \\\n+    build-essential \\\n+    imagemagick \\\n+    libbz2-dev \\\n+    libc6-dev \\\n+    libcurl4-openssl-dev \\\n+    libdb-dev \\\n+    libevent-dev \\\n+    libffi-dev \\\n+    libgdbm-dev \\\n+    libglib2.0-dev \\\n+    libgmp-dev \\\n+    libjpeg-dev \\\n+    libkrb5-dev \\\n+    liblzma-dev \\\n+    libmagickcore-dev \\\n+    libmagickwand-dev \\\n+    libmaxminddb-dev \\\n+    libncurses5-dev \\\n+    libncursesw5-dev \\\n+    libpng-dev \\\n+    libpq-dev \\\n+    libreadline-dev \\\n+    libsqlite3-dev \\\n+    libssl-dev \\\n+    libtool \\\n+    libwebp-dev \\\n+    libxml2-dev \\\n+    libxslt-dev \\\n+    libyaml-dev \\\n+    make \\\n+    patch \\\n+    unzip \\\n+    xz-utils \\\n+    zlib1g-dev \\\n+    flex \\\n+    bison\n+\n+ADD . /usr/src/gcc\n+RUN /bin/sh -c set -ex; \\\n+    cd /usr/src/gcc; \\\n+    ./contrib/download_prerequisites; \t{ rm *.tar.* || true; }; \\\n+    mkdir -p /usr/src/gcc/gcc-build; \\\n+    cd /usr/src/gcc/gcc-build; \\\n+    /usr/src/gcc/configure --disable-bootstrap --disable-multilib --enable-languages=c,c++,rust; \\\n+    make -j \"$(nproc)\"; \\\n+    make install-strip; \\\n+    cd /root; \\\n+    rm -rf /usr/src/gcc\n+\n+RUN /bin/sh -c set -ex; \\\n+    echo '/usr/local/lib64' > /etc/ld.so.conf.d/local-lib64.conf; \\\n+    ldconfig -v\n+\n+RUN /bin/sh -c set -ex; \\\n+    dpkg-divert --divert /usr/bin/gcc.orig --rename /usr/bin/gcc; \\\n+    dpkg-divert --divert /usr/bin/g++.orig --rename /usr/bin/g++; \\\n+    update-alternatives --install /usr/bin/cc cc /usr/local/bin/gcc 999\n+\n+\n+CMD [\"bash\"]"}]}