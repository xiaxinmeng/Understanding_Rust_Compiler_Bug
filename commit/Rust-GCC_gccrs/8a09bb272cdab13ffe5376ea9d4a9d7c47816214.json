{"sha": "8a09bb272cdab13ffe5376ea9d4a9d7c47816214", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGEwOWJiMjcyY2RhYjEzZmZlNTM3NmVhOWQ0YTlkN2M0NzgxNjIxNA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "2000-09-01T22:01:43Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2000-09-01T22:01:43Z"}, "message": "Fix ia64-linux miscompilation or tcl/generic/tclCompExpr.c\n\nFix ia64-linux miscompilation or tcl/generic/tclCompExpr.c\n\t* loop.c (check_final_value): Check for biv use before checking for\n\tgiv use.  Check for both biv and giv uses.  Always set last_giv_use\n\tif there is a giv use.\n\nFrom-SVN: r36104", "tree": {"sha": "6327ea45abb944fe5103ee36b69180bf23f8275a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6327ea45abb944fe5103ee36b69180bf23f8275a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a09bb272cdab13ffe5376ea9d4a9d7c47816214", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a09bb272cdab13ffe5376ea9d4a9d7c47816214", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a09bb272cdab13ffe5376ea9d4a9d7c47816214", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a09bb272cdab13ffe5376ea9d4a9d7c47816214/comments", "author": null, "committer": null, "parents": [{"sha": "11a1370459e76305852e8b806fb33726449ba86e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11a1370459e76305852e8b806fb33726449ba86e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11a1370459e76305852e8b806fb33726449ba86e"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "8e0b3878a493c86d5e13f35f71cfe3b71577792c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a09bb272cdab13ffe5376ea9d4a9d7c47816214/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a09bb272cdab13ffe5376ea9d4a9d7c47816214/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8a09bb272cdab13ffe5376ea9d4a9d7c47816214", "patch": "@@ -1,3 +1,9 @@\n+2000-09-01  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* loop.c (check_final_value): Check for biv use before checking for\n+\tgiv use.  Check for both biv and giv uses.  Always set last_giv_use\n+\tif there is a giv use.\n+\n 2000-09-01  Richard Henderson  <rth@cygnus.com>\n \n \t* config/ia64/ia64.md (mulsi3): Use grfr_register_operand."}, {"sha": "c5e5c4c2ccb3e10faad709b113b0f5cb7a482743", "filename": "gcc/loop.c", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a09bb272cdab13ffe5376ea9d4a9d7c47816214/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a09bb272cdab13ffe5376ea9d4a9d7c47816214/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=8a09bb272cdab13ffe5376ea9d4a9d7c47816214", "patch": "@@ -5677,19 +5677,25 @@ check_final_value (loop, v)\n \t  if (GET_CODE (p) == INSN || GET_CODE (p) == JUMP_INSN\n \t      || GET_CODE (p) == CALL_INSN)\n \t    {\n-\t      if (biv_increment_seen)\n+\t      /* It is possible for the BIV increment to use the GIV if we\n+\t\t have a cycle.  Thus we must be sure to check each insn for\n+\t\t both BIV and GIV uses, and we must check for BIV uses\n+\t\t first.  */\n+\n+\t      if (! biv_increment_seen\n+\t\t  && reg_set_p (v->src_reg, PATTERN (p)))\n+\t\tbiv_increment_seen = 1;\n+\t\t\n+\t      if (reg_mentioned_p (v->dest_reg, PATTERN (p)))\n \t\t{\n-\t\t  if (reg_mentioned_p (v->dest_reg, PATTERN (p)))\n+\t\t  if (biv_increment_seen)\n \t\t    {\n \t\t      v->replaceable = 0;\n \t\t      v->not_replaceable = 1;\n \t\t      break;\n \t\t    }\n+\t\t  last_giv_use = p;\n \t\t}\n-\t      else if (reg_set_p (v->src_reg, PATTERN (p)))\n-\t\tbiv_increment_seen = 1;\n-\t      else if (reg_mentioned_p (v->dest_reg, PATTERN (p)))\n-\t\tlast_giv_use = p;\n \t    }\n \t}\n "}]}