{"sha": "426d63337543926a4b9343919c2ceb191d018433", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI2ZDYzMzM3NTQzOTI2YTRiOTM0MzkxOWMyY2ViMTkxZDAxODQzMw==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2010-07-22T18:14:27Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2010-07-22T18:14:27Z"}, "message": "re PR middle-end/44878 (Build fails when compiling libstdc++)\n\n2010-07-22  Steve Ellcey  <sje@cup.hp.com>\n\n\tPR middle-end/44878\n\t* stmt.c (expand_value_return):  Call promote_function_mode with\n\ta for_return argument of 2 when returning by reference.\n\nFrom-SVN: r162423", "tree": {"sha": "4695229a652f71c1c01cd181febab6abd576b309", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4695229a652f71c1c01cd181febab6abd576b309"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/426d63337543926a4b9343919c2ceb191d018433", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/426d63337543926a4b9343919c2ceb191d018433", "html_url": "https://github.com/Rust-GCC/gccrs/commit/426d63337543926a4b9343919c2ceb191d018433", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/426d63337543926a4b9343919c2ceb191d018433/comments", "author": null, "committer": null, "parents": [{"sha": "bd3a5d17b02b640e0c8240fb9d5f5643e73ead3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd3a5d17b02b640e0c8240fb9d5f5643e73ead3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd3a5d17b02b640e0c8240fb9d5f5643e73ead3e"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "84ac1b41bde3f8fe751fc50a78cd00b732169a7f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/426d63337543926a4b9343919c2ceb191d018433/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/426d63337543926a4b9343919c2ceb191d018433/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=426d63337543926a4b9343919c2ceb191d018433", "patch": "@@ -1,3 +1,9 @@\n+2010-07-22  Steve Ellcey  <sje@cup.hp.com>\n+\n+\tPR middle-end/44878\n+\t* stmt.c (expand_value_return):  Call promote_function_mode with\n+\ta for_return argument of 2 when returning by reference.\n+\n 2010-07-22  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR debug/45024"}, {"sha": "0b9ce8184f67e4d3185b31e9d2bddc2bb55ae8f6", "filename": "gcc/stmt.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/426d63337543926a4b9343919c2ceb191d018433/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/426d63337543926a4b9343919c2ceb191d018433/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=426d63337543926a4b9343919c2ceb191d018433", "patch": "@@ -1595,8 +1595,11 @@ expand_value_return (rtx val)\n       tree type = TREE_TYPE (decl);\n       int unsignedp = TYPE_UNSIGNED (type);\n       enum machine_mode old_mode = DECL_MODE (decl);\n-      enum machine_mode mode = promote_function_mode (type, old_mode,\n-\t\t\t\t\t\t      &unsignedp, funtype, 1);\n+      enum machine_mode mode;\n+      if (DECL_BY_REFERENCE (decl))\n+        mode = promote_function_mode (type, old_mode, &unsignedp, funtype, 2);\n+      else\n+        mode = promote_function_mode (type, old_mode, &unsignedp, funtype, 1);\n \n       if (mode != old_mode)\n \tval = convert_modes (mode, old_mode, val, unsignedp);"}]}