{"sha": "3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzE0MWU3NjhlZTIyYTZkZGE5YTVhYWY2MjAxMTkxYmRiYzQ2YTZlMA==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel@linux.vnet.ibm.com", "date": "2017-10-09T12:06:11Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2017-10-09T12:06:11Z"}, "message": "S/390: PR82465: Fix vec_sqrt builtin flags\n\nThe vector double variant is available with z13.  A wrong flag in the\ns390-builtins.def file triggered an error when compiling for z13.\n\ngcc/testsuite/ChangeLog:\n\n2017-10-09  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n\n\tPR target/82465\n\t* gcc.target/s390/zvector/pr82465.c: New test.\n\ngcc/ChangeLog:\n\n2017-10-09  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n\n\tPR target/82465\n\t* config/s390/s390-builtins.def (vec_sqrt): Fix builtin flags.\n\nFrom-SVN: r253542", "tree": {"sha": "8b1b56c852a648e0856777b1ac077a1788c3b1d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b1b56c852a648e0856777b1ac077a1788c3b1d2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/comments", "author": null, "committer": null, "parents": [{"sha": "85f59ae75ce1376395dbf32612134a148672abde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85f59ae75ce1376395dbf32612134a148672abde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85f59ae75ce1376395dbf32612134a148672abde"}], "stats": {"total": 32, "additions": 29, "deletions": 3}, "files": [{"sha": "db94724f27c1e634cf8ade9d04df5a07a511a031", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "patch": "@@ -1,3 +1,8 @@\n+2017-10-09  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n+\n+\tPR target/82465\n+\t* config/s390/s390-builtins.def (vec_sqrt): Fix builtin flags.\n+\n 2017-10-09  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/82464"}, {"sha": "f0524661aa5e26ab80dd3c99ffa4daedebaf9f91", "filename": "gcc/config/s390/s390-builtins.def", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2Fconfig%2Fs390%2Fs390-builtins.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2Fconfig%2Fs390%2Fs390-builtins.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390-builtins.def?ref=3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "patch": "@@ -2843,9 +2843,9 @@ OB_DEF     (s390_vec_nabs,              s390_vec_nabs_flt,  s390_vec_nabs_dbl,\n OB_DEF_VAR (s390_vec_nabs_flt,          s390_vflnsb,        0,                  0,                  BT_OV_V4SF_V4SF)\n OB_DEF_VAR (s390_vec_nabs_dbl,          s390_vflndb,        B_VX,               0,                  BT_OV_V2DF_V2DF)\n \n-OB_DEF     (s390_vec_sqrt,              s390_vec_sqrt_flt,  s390_vec_sqrt_dbl,  B_VXE,              BT_FN_OV4SI_OV4SI)\n-OB_DEF_VAR (s390_vec_sqrt_flt,          s390_vfsqsb,        0,                  0,                  BT_OV_V4SF_V4SF)\n-OB_DEF_VAR (s390_vec_sqrt_dbl,          s390_vfsqdb,        B_VX,               0,                  BT_OV_V2DF_V2DF)\n+OB_DEF     (s390_vec_sqrt,              s390_vec_sqrt_flt,  s390_vec_sqrt_dbl,  B_VX,               BT_FN_OV4SI_OV4SI)\n+OB_DEF_VAR (s390_vec_sqrt_flt,          s390_vfsqsb,        B_VXE,              0,                  BT_OV_V4SF_V4SF)\n+OB_DEF_VAR (s390_vec_sqrt_dbl,          s390_vfsqdb,        0,                  0,                  BT_OV_V2DF_V2DF)\n \n /* Test data class with boolean result *AND* cc mode.  */\n "}, {"sha": "0c1ba68d6c0f04a5298974cafdf18369ff0abe0e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "patch": "@@ -1,3 +1,8 @@\n+2017-10-09  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n+\n+\tPR target/82465\n+\t* gcc.target/s390/zvector/pr82465.c: New test.\n+\n 2017-10-09  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \t* gcc.dg/tree-ssa/ssa-dse-26.c (dg-options): Add -fno-short-enums."}, {"sha": "ae8f8ad93ff5a7d4eecce675a9a9576c225b171f", "filename": "gcc/testsuite/gcc.target/s390/zvector/pr82465.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fpr82465.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3141e768ee22a6dda9a5aaf6201191bdbc46a6e0/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fpr82465.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fpr82465.c?ref=3141e768ee22a6dda9a5aaf6201191bdbc46a6e0", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile { target { s390*-*-* } } } */\n+/* { dg-options \"-march=z13 -mzarch -mzvector\" } */\n+\n+/* The vector double variant is available with z13.  A wrong flag in\n+   the s390-builtins.def file triggered an error when compiling for\n+   z13.  */\n+\n+typedef __vector double v2df;\n+\n+#include <vecintrin.h>\n+\n+v2df\n+foo (v2df a)\n+{\n+  return vec_sqrt(a);\n+}"}]}