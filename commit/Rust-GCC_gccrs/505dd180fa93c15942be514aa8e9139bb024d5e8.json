{"sha": "505dd180fa93c15942be514aa8e9139bb024d5e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTA1ZGQxODBmYTkzYzE1OTQyYmU1MTRhYThlOTEzOWJiMDI0ZDVlOA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2017-05-11T19:09:51Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2017-05-11T19:09:51Z"}, "message": "cp-lang.c (get_global_decls, [...]): Move to ...\n\n\t* cp-lang.c (get_global_decls, cxx_pushdecl, LANG_HOOK_GETDECLS)\n\tLANG_HOOKS_PUSHDECL): Move to ...\n\t* cp-objcp-common.c (cp_get_global_decls, cp_pushdec)\n\tLANG_HOOK_DECLS, LANG_HOOKS_PUSHDECL): ... here.\n\t* cp-objcp-common.h (cp_get_global_decls, cp_pushdecl): Declare.\n((--This line, and those below, will be ignored--\n\nM    cp/ChangeLog\nM    cp/cp-lang.c\nM    cp/cp-objcp-common.c\nM    cp/cp-objcp-common.h\n\nFrom-SVN: r247923", "tree": {"sha": "3aac882b8c9fd00c1a9d4c9f443568c35b01d4b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3aac882b8c9fd00c1a9d4c9f443568c35b01d4b2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/505dd180fa93c15942be514aa8e9139bb024d5e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/505dd180fa93c15942be514aa8e9139bb024d5e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/505dd180fa93c15942be514aa8e9139bb024d5e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/505dd180fa93c15942be514aa8e9139bb024d5e8/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "430af3cf5a8e5f96ff3ac491a9b37e6b2989fa24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/430af3cf5a8e5f96ff3ac491a9b37e6b2989fa24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/430af3cf5a8e5f96ff3ac491a9b37e6b2989fa24"}], "stats": {"total": 50, "additions": 29, "deletions": 21}, "files": [{"sha": "94ad0442d2d78d65a73ba35a418a46d0e7fa4c2a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=505dd180fa93c15942be514aa8e9139bb024d5e8", "patch": "@@ -1,5 +1,11 @@\n 2017-05-11  Nathan Sidwell  <nathan@acm.org>\n \n+\t* cp-lang.c (get_global_decls, cxx_pushdecl, LANG_HOOK_GETDECLS,\n+\tLANG_HOOKS_PUSHDECL): Move to ...\n+\t* cp-objcp-common.c (cp_get_global_decls, cp_pushdec,\n+\tLANG_HOOK_DECLS, LANG_HOOKS_PUSHDECL): ... here.\n+\t* cp-objcp-common.h (cp_get_global_decls, cp_pushdecl): Declare.\n+\n \t* name-lookup.h (pushdecl): Add default friend parm.\n \t(pushdecl_maybe_friend): Delete.\n \t(pushdecl_top_level): Add default friend parm."}, {"sha": "defcbdc79a960f4d8ccf4891e2b18f58e3f262d9", "filename": "gcc/cp/cp-lang.c", "status": "modified", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2Fcp-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2Fcp-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-lang.c?ref=505dd180fa93c15942be514aa8e9139bb024d5e8", "patch": "@@ -35,8 +35,6 @@ static tree cp_eh_personality (void);\n static tree get_template_innermost_arguments_folded (const_tree);\n static tree get_template_argument_pack_elems_folded (const_tree);\n static tree cxx_enum_underlying_base_type (const_tree);\n-static tree get_global_decls ();\n-static tree cxx_pushdecl (tree);\n \n /* Lang hooks common to C++ and ObjC++ are declared in cp/cp-objcp-common.h;\n    consequently, there should be very few hooks below.  */\n@@ -80,10 +78,6 @@ static tree cxx_pushdecl (tree);\n #define LANG_HOOKS_EH_RUNTIME_TYPE build_eh_type_type\n #undef LANG_HOOKS_ENUM_UNDERLYING_BASE_TYPE\n #define LANG_HOOKS_ENUM_UNDERLYING_BASE_TYPE cxx_enum_underlying_base_type\n-#undef LANG_HOOKS_GETDECLS\n-#define LANG_HOOKS_GETDECLS get_global_decls\n-#undef LANG_HOOKS_PUSHDECL\n-#define LANG_HOOKS_PUSHDECL cxx_pushdecl\n \n /* Each front end provides its own lang hook initializer.  */\n struct lang_hooks lang_hooks = LANG_HOOKS_INITIALIZER;\n@@ -235,21 +229,6 @@ tree cxx_enum_underlying_base_type (const_tree type)\n   return underlying_type;\n }\n \n-/* Return the list of decls in the global namespace.  */\n-\n-static tree\n-get_global_decls ()\n-{\n-  return NAMESPACE_LEVEL (global_namespace)->names;\n-}\n-\n-/* Push DECL into the current scope.  */\n-\n-static tree\n-cxx_pushdecl (tree decl)\n-{\n-  return pushdecl (decl);\n-}\n \n #include \"gt-cp-cp-lang.h\"\n #include \"gtype-cp.h\""}, {"sha": "86279780e42ebb4aed826842392a1d9060644db9", "filename": "gcc/cp/cp-objcp-common.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2Fcp-objcp-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2Fcp-objcp-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-objcp-common.c?ref=505dd180fa93c15942be514aa8e9139bb024d5e8", "patch": "@@ -336,6 +336,22 @@ cxx_block_may_fallthru (const_tree stmt)\n     }\n }\n \n+/* Return the list of decls in the global namespace.  */\n+\n+tree\n+cp_get_global_decls ()\n+{\n+  return NAMESPACE_LEVEL (global_namespace)->names;\n+}\n+\n+/* Push DECL into the current scope.  */\n+\n+tree\n+cp_pushdecl (tree decl)\n+{\n+  return pushdecl (decl);\n+}\n+\n void\n cp_common_init_ts (void)\n {"}, {"sha": "0d752a7a20a54f455d85c46288a089c0d563ff02", "filename": "gcc/cp/cp-objcp-common.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2Fcp-objcp-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/505dd180fa93c15942be514aa8e9139bb024d5e8/gcc%2Fcp%2Fcp-objcp-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-objcp-common.h?ref=505dd180fa93c15942be514aa8e9139bb024d5e8", "patch": "@@ -31,6 +31,8 @@ extern int cp_decl_dwarf_attribute (const_tree, int);\n extern int cp_type_dwarf_attribute (const_tree, int);\n extern void cp_common_init_ts (void);\n extern tree cp_unit_size_without_reusable_padding (tree);\n+extern tree cp_get_global_decls ();\n+extern tree cp_pushdecl (tree);\n \n /* Lang hooks that are shared between C++ and ObjC++ are defined here.  Hooks\n    specific to C++ or ObjC++ go in cp/cp-lang.c and objcp/objcp-lang.c,\n@@ -165,4 +167,9 @@ extern tree cp_unit_size_without_reusable_padding (tree);\n \n #undef LANG_HOOKS_EH_PROTECT_CLEANUP_ACTIONS\n #define LANG_HOOKS_EH_PROTECT_CLEANUP_ACTIONS cp_protect_cleanup_actions\n+\n+#undef LANG_HOOKS_GETDECLS\n+#define LANG_HOOKS_GETDECLS cp_get_global_decls\n+#undef LANG_HOOKS_PUSHDECL\n+#define LANG_HOOKS_PUSHDECL cp_pushdecl\n #endif /* GCC_CP_OBJCP_COMMON */"}]}