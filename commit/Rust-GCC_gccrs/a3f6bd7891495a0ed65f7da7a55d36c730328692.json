{"sha": "a3f6bd7891495a0ed65f7da7a55d36c730328692", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNmNmJkNzg5MTQ5NWEwZWQ2NWY3ZGE3YTU1ZDM2YzczMDMyODY5Mg==", "commit": {"author": {"name": "Haochen Gui", "email": "guihaoc@gcc.gnu.org", "date": "2021-06-04T03:04:31Z"}, "committer": {"name": "Haochen Gui", "email": "guihaoc@gcc.gnu.org", "date": "2021-06-04T03:40:24Z"}, "message": "rs6000: Expand PROMOTE_MODE marco in rs6000_promote_function_mode\n\nThis patch prepares for the patch which disables mode\npromotion of pseudos on rs6000.\n\ngcc/ChangeLog:\n\t* config/rs6000/rs6000-call.c (rs6000_promote_function_mode):\n\tReplace PROMOTE_MODE marco with its content.", "tree": {"sha": "139d9d777958c5c6ee669d5bc798a1f4cd293640", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/139d9d777958c5c6ee669d5bc798a1f4cd293640"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3f6bd7891495a0ed65f7da7a55d36c730328692", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3f6bd7891495a0ed65f7da7a55d36c730328692", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3f6bd7891495a0ed65f7da7a55d36c730328692", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3f6bd7891495a0ed65f7da7a55d36c730328692/comments", "author": null, "committer": null, "parents": [{"sha": "440c8a0a91b7ea1603e3e1eaae64fc0e12f0c4f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/440c8a0a91b7ea1603e3e1eaae64fc0e12f0c4f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/440c8a0a91b7ea1603e3e1eaae64fc0e12f0c4f1"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "b4e13af4dc6e7112c7fffef4efe0ee4111100f0c", "filename": "gcc/config/rs6000/rs6000-call.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3f6bd7891495a0ed65f7da7a55d36c730328692/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3f6bd7891495a0ed65f7da7a55d36c730328692/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-call.c?ref=a3f6bd7891495a0ed65f7da7a55d36c730328692", "patch": "@@ -6646,7 +6646,9 @@ rs6000_promote_function_mode (const_tree type ATTRIBUTE_UNUSED,\n \t\t\t      int *punsignedp ATTRIBUTE_UNUSED,\n \t\t\t      const_tree, int for_return ATTRIBUTE_UNUSED)\n {\n-  PROMOTE_MODE (mode, *punsignedp, type);\n+  if (GET_MODE_CLASS (mode) == MODE_INT\n+      && GET_MODE_SIZE (mode) < (TARGET_32BIT ? 4 : 8))\n+    mode = TARGET_32BIT ? SImode : DImode;\n \n   return mode;\n }"}]}