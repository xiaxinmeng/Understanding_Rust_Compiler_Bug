{"sha": "4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGEwYTVkNWZjMTRlNjFmYjczYzE0NDBhNWE1YmYyYmVlMGI3Y2VkOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2014-11-20T10:56:01Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-11-20T10:56:01Z"}, "message": "sem_ch3.adb (Analyze_Object_Declaration): Swap a couple of tests in a condition so Following_Address_Clause is invoked...\n\n2014-11-20  Eric Botcazou  <ebotcazou@adacore.com>\n\n\t* sem_ch3.adb (Analyze_Object_Declaration): Swap a couple of\n\ttests in a condition so Following_Address_Clause is invoked\n\tonly if need be.\n\t* exp_util.ads (Following_Address_Clause): Add small note.\n\nFrom-SVN: r217834", "tree": {"sha": "2c28691e5427d101ea955d85c361e573716d9394", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c28691e5427d101ea955d85c361e573716d9394"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8/comments", "author": null, "committer": null, "parents": [{"sha": "58b81ab059d8963e7b867bf67424714d88f1da94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58b81ab059d8963e7b867bf67424714d88f1da94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58b81ab059d8963e7b867bf67424714d88f1da94"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "d2746e1511d3fbd09c853bb51fd765192af643fc", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8", "patch": "@@ -1,3 +1,10 @@\n+2014-11-20  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* sem_ch3.adb (Analyze_Object_Declaration): Swap a couple of\n+\ttests in a condition so Following_Address_Clause is invoked\n+\tonly if need be.\n+\t* exp_util.ads (Following_Address_Clause): Add small note.\n+\n 2014-11-20  Pascal Obry  <obry@adacore.com>\n \n \t* adaint.c (remove_handle): New local routine without a lock."}, {"sha": "671b13a19b851c0cefa3da70a16c9b00fe0d8c57", "filename": "gcc/ada/exp_util.ads", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8/gcc%2Fada%2Fexp_util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8/gcc%2Fada%2Fexp_util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.ads?ref=4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8", "patch": "@@ -507,6 +507,10 @@ package Exp_Util is\n    --  current declarative part to look for an address clause for the object\n    --  being declared, and returns the clause if one is found, returns\n    --  Empty otherwise.\n+   --\n+   --  Note: this function can be costly and must be invoked with special care.\n+   --  Possibly we could introduce a flag at parse time indicating the presence\n+   --  of an address clause to speed this up???\n \n    procedure Force_Evaluation\n      (Exp      : Node_Id;"}, {"sha": "28b44718406ee0e9b8f3b909aecb817e89f3081f", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=4a0a5d5fc14e61fb73c1440a5a5bf2bee0b7ced8", "patch": "@@ -3648,8 +3648,13 @@ package body Sem_Ch3 is\n \n          if Comes_From_Source (N)\n            and then Expander_Active\n-           and then Present (Following_Address_Clause (N))\n            and then Nkind (E) = N_Aggregate\n+\n+           --  Note the importance of doing this the following test after the\n+           --  N_Aggregate test to avoid inefficiencies from too many calls to\n+           --  the function Following_Address_Clause which can be expensive.\n+\n+           and then Present (Following_Address_Clause (N))\n          then\n             Set_Etype (E, T);\n "}]}