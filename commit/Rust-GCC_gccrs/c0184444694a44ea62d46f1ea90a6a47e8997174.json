{"sha": "c0184444694a44ea62d46f1ea90a6a47e8997174", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzAxODQ0NDQ2OTRhNDRlYTYyZDQ2ZjFlYTkwYTZhNDdlODk5NzE3NA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2008-01-18T01:29:11Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-01-18T01:29:11Z"}, "message": "re PR fortran/33375 (ICE (segfault) gfortran.dg/common_6.f90)\n\n2008-01-17  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR fortran/33375\n\t* symbol.c (free_common_tree): Renamed to ...\n\t(gfc_free_common_tree): This.  Remove static.\n\t(gfc_free_namespace): Updated.\n\n\t* gfortran.h (gfc_free_common_tree): New.\n\n\t* match.c (gfc_match_common): Call gfc_free_common_tree () with\n\tgfc_current_ns->common_root and set gfc_current_ns->common_root\n\tto NULL on syntax error.\n\nFrom-SVN: r131621", "tree": {"sha": "6618a99f503007bf9db19e45175332fb41f54b0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6618a99f503007bf9db19e45175332fb41f54b0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c0184444694a44ea62d46f1ea90a6a47e8997174", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0184444694a44ea62d46f1ea90a6a47e8997174", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0184444694a44ea62d46f1ea90a6a47e8997174", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0184444694a44ea62d46f1ea90a6a47e8997174/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cc5439e27c65911e1af867dd2804b0f0dd48f5e"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "ad0ffcc443ee50acd120f9bfaeedb768ddb977bc", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c0184444694a44ea62d46f1ea90a6a47e8997174", "patch": "@@ -1,3 +1,16 @@\n+2008-01-17  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR fortran/33375\n+\t* symbol.c (free_common_tree): Renamed to ...\n+\t(gfc_free_common_tree): This.  Remove static.\n+\t(gfc_free_namespace): Updated.\n+\n+\t* gfortran.h (gfc_free_common_tree): New.\n+\n+\t* match.c (gfc_match_common): Call gfc_free_common_tree () with\n+\tgfc_current_ns->common_root and set gfc_current_ns->common_root\n+\tto NULL on syntax error.\n+\n 2008-01-18  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \tPR fortran/34686"}, {"sha": "d5f00737d3db4dba6e9b0692cddb0f6832fc20a4", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=c0184444694a44ea62d46f1ea90a6a47e8997174", "patch": "@@ -2137,6 +2137,7 @@ int gfc_symbols_could_alias (gfc_symbol *, gfc_symbol *);\n void gfc_undo_symbols (void);\n void gfc_commit_symbols (void);\n void gfc_commit_symbol (gfc_symbol *);\n+void gfc_free_common_tree (gfc_symtree *);\n void gfc_free_namespace (gfc_namespace *);\n \n void gfc_symbol_init_2 (void);"}, {"sha": "f21748c1b9ae4cdd395a9a1a4b5fd952209c00c6", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=c0184444694a44ea62d46f1ea90a6a47e8997174", "patch": "@@ -2951,6 +2951,8 @@ gfc_match_common (void)\n   return MATCH_YES;\n \n syntax:\n+  gfc_free_common_tree (gfc_current_ns->common_root);\n+  gfc_current_ns->common_root = NULL;\n   gfc_syntax_error (ST_COMMON);\n \n cleanup:"}, {"sha": "a50ed261141c014a87adbf1d4d56be220d259697", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0184444694a44ea62d46f1ea90a6a47e8997174/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=c0184444694a44ea62d46f1ea90a6a47e8997174", "patch": "@@ -2726,14 +2726,14 @@ gfc_commit_symbol (gfc_symbol *sym)\n /* Recursive function that deletes an entire tree and all the common\n    head structures it points to.  */\n \n-static void\n-free_common_tree (gfc_symtree * common_tree)\n+void\n+gfc_free_common_tree (gfc_symtree * common_tree)\n {\n   if (common_tree == NULL)\n     return;\n \n-  free_common_tree (common_tree->left);\n-  free_common_tree (common_tree->right);\n+  gfc_free_common_tree (common_tree->left);\n+  gfc_free_common_tree (common_tree->right);\n \n   gfc_free (common_tree);\n }  \n@@ -2863,7 +2863,7 @@ gfc_free_namespace (gfc_namespace *ns)\n \n   free_sym_tree (ns->sym_root);\n   free_uop_tree (ns->uop_root);\n-  free_common_tree (ns->common_root);\n+  gfc_free_common_tree (ns->common_root);\n \n   for (cl = ns->cl_list; cl; cl = cl2)\n     {"}]}