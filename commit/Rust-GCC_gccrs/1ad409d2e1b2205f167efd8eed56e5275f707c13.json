{"sha": "1ad409d2e1b2205f167efd8eed56e5275f707c13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWFkNDA5ZDJlMWIyMjA1ZjE2N2VmZDhlZWQ1NmU1Mjc1ZjcwN2MxMw==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-07-28T02:15:51Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-07-28T02:15:51Z"}, "message": "(build_conditional_expr): Compare using TYPE_MAIN_VARIANT.\n\nFrom-SVN: r1695", "tree": {"sha": "ae67e3bb21e58a1400b56ec8cc7d1cebb8f7d11e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae67e3bb21e58a1400b56ec8cc7d1cebb8f7d11e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ad409d2e1b2205f167efd8eed56e5275f707c13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ad409d2e1b2205f167efd8eed56e5275f707c13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ad409d2e1b2205f167efd8eed56e5275f707c13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ad409d2e1b2205f167efd8eed56e5275f707c13/comments", "author": null, "committer": null, "parents": [{"sha": "95edfef236ff9bf3702d97718729a213e843cfd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95edfef236ff9bf3702d97718729a213e843cfd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95edfef236ff9bf3702d97718729a213e843cfd8"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "ac8e48e3a1ba2ae20bd9be54d84bd35ec848e58d", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ad409d2e1b2205f167efd8eed56e5275f707c13/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ad409d2e1b2205f167efd8eed56e5275f707c13/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=1ad409d2e1b2205f167efd8eed56e5275f707c13", "patch": "@@ -3454,8 +3454,13 @@ build_conditional_expr (ifexp, op1, op2)\n       \n   /* Quickly detect the usual case where op1 and op2 have the same type\n      after promotion.  */\n-  if (type1 == type2)\n-    result_type = type1;\n+  if (TYPE_MAIN_VARIANT (type1) == TYPE_MAIN_VARIANT (type2))\n+    {\n+      if (type1 == type2)\n+\tresult_type = type1;\n+      else\n+\tresult_type = TYPE_MAIN_VARIANT (type1);\n+    }\n   else if ((code1 == INTEGER_TYPE || code1 == REAL_TYPE)\n            && (code2 == INTEGER_TYPE || code2 == REAL_TYPE))\n     {"}]}