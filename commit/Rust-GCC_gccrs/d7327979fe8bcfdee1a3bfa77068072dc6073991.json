{"sha": "d7327979fe8bcfdee1a3bfa77068072dc6073991", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDczMjc5NzlmZThiY2ZkZWUxYTNiZmE3NzA2ODA3MmRjNjA3Mzk5MQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-10-13T17:38:50Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-10-13T17:38:50Z"}, "message": "re PR c++/69078 ([C++14] function local static not initialized when only used in a generic/variadic lambda)\n\n2017-10-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/69078\n\t* g++.dg/cpp1y/lambda-generic-69078-1.C: New.\n\t* g++.dg/cpp1y/lambda-generic-69078-2.C: Likewise.\n\nFrom-SVN: r253736", "tree": {"sha": "331d0eef5bea748437ed54fa0b192060e77cb079", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/331d0eef5bea748437ed54fa0b192060e77cb079"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d7327979fe8bcfdee1a3bfa77068072dc6073991", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7327979fe8bcfdee1a3bfa77068072dc6073991", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7327979fe8bcfdee1a3bfa77068072dc6073991", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7327979fe8bcfdee1a3bfa77068072dc6073991/comments", "author": null, "committer": null, "parents": [{"sha": "e7176f75d6b2dd56059dad5920c770dade79df95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7176f75d6b2dd56059dad5920c770dade79df95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7176f75d6b2dd56059dad5920c770dade79df95"}], "stats": {"total": 55, "additions": 55, "deletions": 0}, "files": [{"sha": "589dda59fc6e21f7d1113ae28c5f701a70fe0665", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7327979fe8bcfdee1a3bfa77068072dc6073991/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7327979fe8bcfdee1a3bfa77068072dc6073991/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d7327979fe8bcfdee1a3bfa77068072dc6073991", "patch": "@@ -1,3 +1,9 @@\n+2017-10-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/69078\n+\t* g++.dg/cpp1y/lambda-generic-69078-1.C: New.\n+\t* g++.dg/cpp1y/lambda-generic-69078-2.C: Likewise.\n+\n 2017-10-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/82274"}, {"sha": "dc045c7206567d2e82d503e67d9e52e406fe57f1", "filename": "gcc/testsuite/g++.dg/cpp1y/lambda-generic-69078-1.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7327979fe8bcfdee1a3bfa77068072dc6073991/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-69078-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7327979fe8bcfdee1a3bfa77068072dc6073991/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-69078-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-69078-1.C?ref=d7327979fe8bcfdee1a3bfa77068072dc6073991", "patch": "@@ -0,0 +1,28 @@\n+// PR c++/69078\n+// { dg-do run { target c++14 } }\n+// { dg-options \"-Wall\" }\n+\n+#include <cassert>\n+\n+struct Class {\n+    Class(void (*_param)()) : data(_param) {}\n+    void (*data)();\n+};\n+\n+void funUser(void (*test)(int)) {\n+    test(60);\n+}\n+\n+void user(Class& c, int i) {\n+    (void)i;\n+    assert (c.data);\n+}\n+\n+void probe() {}\n+\n+int main() {\n+    static Class instance = { probe };\n+    funUser([](auto... p) {\n+        user(instance, p...);\n+    });\n+}"}, {"sha": "318e0967250cfd867e0a02ec211bcdc0ac9b8a72", "filename": "gcc/testsuite/g++.dg/cpp1y/lambda-generic-69078-2.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7327979fe8bcfdee1a3bfa77068072dc6073991/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-69078-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7327979fe8bcfdee1a3bfa77068072dc6073991/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-69078-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-69078-2.C?ref=d7327979fe8bcfdee1a3bfa77068072dc6073991", "patch": "@@ -0,0 +1,21 @@\n+// PR c++/69078\n+// { dg-do run { target c++14 } }\n+\n+#include <cassert>\n+\n+template<typename F>\n+void run( F &&f ) {\n+  f(nullptr);\n+}\n+\n+struct V {\n+  int i;\n+};\n+\n+int main() {\n+  static V const s={2};\n+  assert (s.i == 2);\n+  run([](auto){\n+      assert (s.i == 2);\n+    });\n+}"}]}