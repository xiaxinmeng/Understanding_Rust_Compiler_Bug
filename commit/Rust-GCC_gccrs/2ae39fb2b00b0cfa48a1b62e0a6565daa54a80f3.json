{"sha": "2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFlMzlmYjJiMDBiMGNmYTQ4YTFiNjJlMGE2NTY1ZGFhNTRhODBmMw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-05-31T11:30:46Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-05-31T11:30:46Z"}, "message": "stack_usage1.adb: Replace -fstack-usage with -Wstack-usage.\n\n\t* gnat.dg/stack_usage1.adb: Replace -fstack-usage with -Wstack-usage.\n\t* gnat.dg/stack_usage1b.adb: Likewise.\n\t* gnat.dg/stack_usage1c.adb: Likewise.\n\t* gnat.dg/stack_usage3.adb: Likewise.\n\t* gnat.dg/stack_usage1_pkg.adb: Delete.\n\nFrom-SVN: r261021", "tree": {"sha": "38e239df61a66ef98fbdf7dd764e2b88fb7fab5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38e239df61a66ef98fbdf7dd764e2b88fb7fab5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/comments", "author": null, "committer": null, "parents": [{"sha": "78668dd094708c0a3d8c7c6eadc9ef5b44360cc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78668dd094708c0a3d8c7c6eadc9ef5b44360cc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78668dd094708c0a3d8c7c6eadc9ef5b44360cc4"}], "stats": {"total": 41, "additions": 12, "deletions": 29}, "files": [{"sha": "a04fff8d188451d517bd0568a51967f3e6634b01", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "patch": "@@ -1,3 +1,11 @@\n+2018-05-31  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/stack_usage1.adb: Replace -fstack-usage with -Wstack-usage.\n+\t* gnat.dg/stack_usage1b.adb: Likewise.\n+\t* gnat.dg/stack_usage1c.adb: Likewise.\n+\t* gnat.dg/stack_usage3.adb: Likewise.\n+\t* gnat.dg/stack_usage1_pkg.adb: Delete.\n+\n 2018-05-31  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc.dg/store_merging_10.c: Turn dg-do compile into dg-do run."}, {"sha": "75b1d28c3aa2fff8e20b4c4997930a331bdc633b", "filename": "gcc/testsuite/gnat.dg/stack_usage1.adb", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1.adb?ref=2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "patch": "@@ -1,5 +1,5 @@\n -- { dg-do compile }\n--- { dg-options \"-fstack-usage\" }\n+-- { dg-options \"-Wstack-usage=128\" { target i?86-*-* x86_64-*-* } }\n \n with Stack_Usage1_Pkg; use Stack_Usage1_Pkg;\n \n@@ -34,6 +34,3 @@ begin\n    end case;\n \n end Stack_Usage1;\n-\n--- { dg-final { scan-stack-usage \"\\t\\[0-9\\]\\[0-9\\]\\t\" { target i?86-*-* x86_64-*-* } } }\n--- { dg-final { cleanup-stack-usage } }"}, {"sha": "1538b858fa3b04fdf8d203e28a5880348c12b392", "filename": "gcc/testsuite/gnat.dg/stack_usage1_pkg.adb", "status": "removed", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78668dd094708c0a3d8c7c6eadc9ef5b44360cc4/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1_pkg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78668dd094708c0a3d8c7c6eadc9ef5b44360cc4/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1_pkg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1_pkg.adb?ref=78668dd094708c0a3d8c7c6eadc9ef5b44360cc4", "patch": "@@ -1,13 +0,0 @@\n-package body Stack_Usage1_Pkg is\n-\n-   function Ident_Int (X : Integer) return Integer is\n-   begin\n-      return X;\n-   end Ident_Int;\n-\n-   procedure My_Proc (X : R) is\n-   begin\n-      null;\n-   end My_Proc;\n-\n-end Stack_Usage1_Pkg;"}, {"sha": "529e93dca8a65204f27fbdb0c91268f2539210ac", "filename": "gcc/testsuite/gnat.dg/stack_usage1b.adb", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1b.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1b.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1b.adb?ref=2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "patch": "@@ -1,5 +1,5 @@\n -- { dg-do compile }\n--- { dg-options \"-O -fstack-usage\" }\n+-- { dg-options \"-O -Wstack-usage=128\" { target i?86-*-* x86_64-*-* } }\n \n with Stack_Usage1_Pkg; use Stack_Usage1_Pkg;\n \n@@ -34,6 +34,3 @@ begin\n    end case;\n \n end Stack_Usage1b;\n-\n--- { dg-final { scan-stack-usage \"\\t\\[0-9\\]\\[0-9\\]\\t\" { target i?86-*-* x86_64-*-* } } }\n--- { dg-final { cleanup-stack-usage } }"}, {"sha": "4afd2dad2e67925d3f8dfdf0c934b7215968e27f", "filename": "gcc/testsuite/gnat.dg/stack_usage1c.adb", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage1c.adb?ref=2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "patch": "@@ -1,5 +1,5 @@\n -- { dg-do compile }\n--- { dg-options \"-O2 -fstack-usage\" }\n+-- { dg-options \"-O2 -Wstack-usage=128\" { target i?86-*-* x86_64-*-* } }\n \n with Stack_Usage1_Pkg; use Stack_Usage1_Pkg;\n \n@@ -34,6 +34,3 @@ begin\n    end case;\n \n end Stack_Usage1c;\n-\n--- { dg-final { scan-stack-usage \"\\t\\[0-9\\]\\[0-9\\]\\t\" { target i?86-*-* x86_64-*-* } } }\n--- { dg-final { cleanup-stack-usage } }"}, {"sha": "2bcd9c5c5c26e01de5d7f775771197ca27af21c5", "filename": "gcc/testsuite/gnat.dg/stack_usage3.adb", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_usage3.adb?ref=2ae39fb2b00b0cfa48a1b62e0a6565daa54a80f3", "patch": "@@ -1,5 +1,5 @@\n -- { dg-do compile }\n--- { dg-options \"-O -fstack-usage\" }\n+-- { dg-options \"-O -Wstack-usage=1024\" }\n \n with Ada.Text_IO; use Ada.Text_IO;\n with Stack_Usage3_Pkg; use Stack_Usage3_Pkg;\n@@ -27,6 +27,3 @@ begin\n    Put_Line (Diag (\"Diag line 19\"));\n    Put_Line (Diag (\"Diag line 20\"));\n end;\n-\n--- { dg-final { scan-stack-usage-not \"\\t\\[0-9\\]\\[0-9\\]\\[0-9\\]\\[0-9\\]\\t\" } }\n--- { dg-final { cleanup-stack-usage } }"}]}