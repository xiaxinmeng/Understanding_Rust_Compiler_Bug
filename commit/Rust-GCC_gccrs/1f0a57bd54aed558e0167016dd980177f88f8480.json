{"sha": "1f0a57bd54aed558e0167016dd980177f88f8480", "node_id": "C_kwDOANBUbNoAKDFmMGE1N2JkNTRhZWQ1NThlMDE2NzAxNmRkOTgwMTc3Zjg4Zjg0ODA", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2021-09-28T13:15:47Z"}, "committer": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2021-09-28T13:15:47Z"}, "message": "libgomp: Only check for 2*sizeof(void*) int type with Fortran [PR96661]\n\nThe depend type is a struct with two pointer members for C/C++ - but for\nFortran OpenMP requires an integer type with kind = omp_depend_kind. Thus,\nlibgomp's configure checks that an integer type/kind with size 2*sizeof(void*)\nis available. However, this integer type/kind is not needed when building without\nFortran support. Thus, only check this when Fortran is enabled.\n\nlibgomp/\n\tPR libgomp/96661\n\t* configure.ac: Only check for int-type = 2*size_t support when\n\tbuilding with Fortran support.\n\t* configure: Regenerate.", "tree": {"sha": "53a49d1b9380e142810cf114ba5f276acf89ed74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/53a49d1b9380e142810cf114ba5f276acf89ed74"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f0a57bd54aed558e0167016dd980177f88f8480", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f0a57bd54aed558e0167016dd980177f88f8480", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f0a57bd54aed558e0167016dd980177f88f8480", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f0a57bd54aed558e0167016dd980177f88f8480/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "92cdd338fdbfd33f72e645af1caaa1a357fe9839", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92cdd338fdbfd33f72e645af1caaa1a357fe9839", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92cdd338fdbfd33f72e645af1caaa1a357fe9839"}], "stats": {"total": 32, "additions": 18, "deletions": 14}, "files": [{"sha": "4bc9b381c5c85e10c03fbd7eb457ee832b019e09", "filename": "libgomp/configure", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f0a57bd54aed558e0167016dd980177f88f8480/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f0a57bd54aed558e0167016dd980177f88f8480/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=1f0a57bd54aed558e0167016dd980177f88f8480", "patch": "@@ -17007,13 +17007,15 @@ fi\n if test $OMP_NEST_LOCK_25_SIZE -gt 8 || test $OMP_NEST_LOCK_25_ALIGN -gt $OMP_NEST_LOCK_25_SIZE; then\n   OMP_NEST_LOCK_25_KIND=8\n fi\n-if test $OMP_DEPEND_KIND -eq 16; then\n-  if test $OMP_INT128_SIZE -ne 16; then\n-    as_fn_error $? \"unsupported system, cannot find Fortran int kind=16, needed for omp_depend_kind\" \"$LINENO\" 5\n-  fi\n-else\n-  if test $OMP_DEPEND_KIND -ne 8; then\n-    as_fn_error $? \"unsupported system, cannot find Fortran integer kind for omp_depend_kind\" \"$LINENO\" 5\n+if test \"$ac_cv_fc_compiler_gnu\" = yes; then\n+  if test $OMP_DEPEND_KIND -eq 16; then\n+    if test $OMP_INT128_SIZE -ne 16; then\n+      as_fn_error $? \"unsupported system, cannot find Fortran int kind=16, needed for omp_depend_kind\" \"$LINENO\" 5\n+    fi\n+  else\n+    if test $OMP_DEPEND_KIND -ne 8; then\n+      as_fn_error $? \"unsupported system, cannot find Fortran integer kind for omp_depend_kind\" \"$LINENO\" 5\n+    fi\n   fi\n fi\n "}, {"sha": "bfb613b91f0bd58429d427759e2aed7e6c164f3a", "filename": "libgomp/configure.ac", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f0a57bd54aed558e0167016dd980177f88f8480/libgomp%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f0a57bd54aed558e0167016dd980177f88f8480/libgomp%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure.ac?ref=1f0a57bd54aed558e0167016dd980177f88f8480", "patch": "@@ -438,13 +438,15 @@ fi\n if test $OMP_NEST_LOCK_25_SIZE -gt 8 || test $OMP_NEST_LOCK_25_ALIGN -gt $OMP_NEST_LOCK_25_SIZE; then\n   OMP_NEST_LOCK_25_KIND=8\n fi\n-if test $OMP_DEPEND_KIND -eq 16; then\n-  if test $OMP_INT128_SIZE -ne 16; then\n-    AC_MSG_ERROR([unsupported system, cannot find Fortran int kind=16, needed for omp_depend_kind])\n-  fi\n-else\n-  if test $OMP_DEPEND_KIND -ne 8; then\n-    AC_MSG_ERROR([unsupported system, cannot find Fortran integer kind for omp_depend_kind])\n+if test \"$ac_cv_fc_compiler_gnu\" = yes; then\n+  if test $OMP_DEPEND_KIND -eq 16; then\n+    if test $OMP_INT128_SIZE -ne 16; then\n+      AC_MSG_ERROR([unsupported system, cannot find Fortran int kind=16, needed for omp_depend_kind])\n+    fi\n+  else\n+    if test $OMP_DEPEND_KIND -ne 8; then\n+      AC_MSG_ERROR([unsupported system, cannot find Fortran integer kind for omp_depend_kind])\n+    fi\n   fi\n fi\n "}]}