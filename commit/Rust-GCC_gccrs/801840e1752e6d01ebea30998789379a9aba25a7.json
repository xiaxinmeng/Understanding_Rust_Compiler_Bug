{"sha": "801840e1752e6d01ebea30998789379a9aba25a7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODAxODQwZTE3NTJlNmQwMWViZWEzMDk5ODc4OTM3OWE5YWJhMjVhNw==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2017-12-08T11:19:20Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2017-12-08T11:19:20Z"}, "message": "[arm] PR target/83206: Make native driver select fp-capable armv6 cores\n\nA quirk in the historical naming of some ARMv6 products means that the\nmain CPU name implies the presence or otherwise of the floating point unit.\nThis causes problems when using -mfpu=auto with -mcpu=native: the driver is\npicking a CPU that does not support a floating-point unit, even though\none may well exist.\n\nThis patch addresses this by selecting the FP-capable names so that FP\ninstructions will be generated if the other options suggest this is\npermitted.\n\nNote that a more complete fix is really needed here to look up the\nFP/simd capabilities and append the appropriate capability extensions.\nThis will be the subject of some follow-up patches.\n\n\t* config/arm/driver-arm.c (arm_cpu_table): Use fp-capable product names\n\tfor armv6 ARM CPU IDs.\n\nFrom-SVN: r255504", "tree": {"sha": "187f0fccf1b95337f01d962cdc5b4410796c3068", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/187f0fccf1b95337f01d962cdc5b4410796c3068"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/801840e1752e6d01ebea30998789379a9aba25a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/801840e1752e6d01ebea30998789379a9aba25a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/801840e1752e6d01ebea30998789379a9aba25a7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/801840e1752e6d01ebea30998789379a9aba25a7/comments", "author": null, "committer": null, "parents": [{"sha": "24531cd697943064c58ef0c374751f667657fe38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24531cd697943064c58ef0c374751f667657fe38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24531cd697943064c58ef0c374751f667657fe38"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "d911f6f90603b8c6bae836653181f8ef7cba7e65", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/801840e1752e6d01ebea30998789379a9aba25a7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/801840e1752e6d01ebea30998789379a9aba25a7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=801840e1752e6d01ebea30998789379a9aba25a7", "patch": "@@ -1,3 +1,8 @@\n+2017-06-08  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* config/arm/driver-arm.c (arm_cpu_table): Use fp-capable product names\n+\tfor armv6 ARM CPU IDs.\n+\n 2017-06-08  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* common/config/arm/arm-common.c: Include <algorithm>."}, {"sha": "86212315f13e36e35d850cae624e17db464db8d9", "filename": "gcc/config/arm/driver-arm.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/801840e1752e6d01ebea30998789379a9aba25a7/gcc%2Fconfig%2Farm%2Fdriver-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/801840e1752e6d01ebea30998789379a9aba25a7/gcc%2Fconfig%2Farm%2Fdriver-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fdriver-arm.c?ref=801840e1752e6d01ebea30998789379a9aba25a7", "patch": "@@ -33,12 +33,12 @@ static struct vendor_cpu arm_cpu_table[] = {\n     {\"0x926\", \"armv5te\", \"arm926ej-s\"},\n     {\"0xa26\", \"armv5te\", \"arm1026ej-s\"},\n     {\"0xb02\", \"armv6k\", \"mpcore\"},\n-    {\"0xb36\", \"armv6j\", \"arm1136j-s\"},\n-    {\"0xb56\", \"armv6t2\", \"arm1156t2-s\"},\n+    {\"0xb36\", \"armv6j\", \"arm1136jf-s\"},\n+    {\"0xb56\", \"armv6t2\", \"arm1156t2f-s\"},\n     /* armv6kz is the correct spelling for ARMv6KZ but may not be supported in\n        the version of binutils used.  The incorrect spelling is supported in\n        legacy and current binutils so that is used instead.  */\n-    {\"0xb76\", \"armv6zk\", \"arm1176jz-s\"},\n+    {\"0xb76\", \"armv6zk\", \"arm1176jzf-s\"},\n     {\"0xc05\", \"armv7-a\", \"cortex-a5\"},\n     {\"0xc07\", \"armv7ve\", \"cortex-a7\"},\n     {\"0xc08\", \"armv7-a\", \"cortex-a8\"},"}]}