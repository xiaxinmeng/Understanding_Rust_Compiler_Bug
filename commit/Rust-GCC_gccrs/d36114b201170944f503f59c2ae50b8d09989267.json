{"sha": "d36114b201170944f503f59c2ae50b8d09989267", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDM2MTE0YjIwMTE3MDk0NGY1MDNmNTljMmFlNTBiOGQwOTk4OTI2Nw==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.org", "date": "2007-01-31T21:28:28Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2007-01-31T21:28:28Z"}, "message": "jvmti-interp.exp (gij_jvmti_test_one): Add -shared-libgcc to the cxxflaglist for Darwin.\n\n2007-01-31  Andreas Tobler  <a.tobler@schweiz.org>\n\n\t* testsuite/libjava.jvmti/jvmti-interp.exp (gij_jvmti_test_one): Add\n\t-shared-libgcc to the cxxflaglist for Darwin.\n\nFrom-SVN: r121438", "tree": {"sha": "ca02b9de7e456878c358f60650be4dcad671a93a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca02b9de7e456878c358f60650be4dcad671a93a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d36114b201170944f503f59c2ae50b8d09989267", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d36114b201170944f503f59c2ae50b8d09989267", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d36114b201170944f503f59c2ae50b8d09989267", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d36114b201170944f503f59c2ae50b8d09989267/comments", "author": null, "committer": null, "parents": [{"sha": "6a50ab1837ef001d66279f1431efb6d24196ac1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a50ab1837ef001d66279f1431efb6d24196ac1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a50ab1837ef001d66279f1431efb6d24196ac1a"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "3ae5d1942d747e8477c11f6a5564d75eca0eab86", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d36114b201170944f503f59c2ae50b8d09989267/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d36114b201170944f503f59c2ae50b8d09989267/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=d36114b201170944f503f59c2ae50b8d09989267", "patch": "@@ -1,3 +1,8 @@\n+2007-01-31  Andreas Tobler  <a.tobler@schweiz.org>\n+\n+\t* testsuite/libjava.jvmti/jvmti-interp.exp (gij_jvmti_test_one): Add\n+\t-shared-libgcc to the cxxflaglist for Darwin.\n+\n 2007-01-31  Tom Tromey  <tromey@redhat.com>\n \n \t* scripts.am, Makefile.in: Rebuilt."}, {"sha": "73a0582200555c9f432750d93b64a06aca5f2945", "filename": "libjava/testsuite/libjava.jvmti/jvmti-interp.exp", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d36114b201170944f503f59c2ae50b8d09989267/libjava%2Ftestsuite%2Flibjava.jvmti%2Fjvmti-interp.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d36114b201170944f503f59c2ae50b8d09989267/libjava%2Ftestsuite%2Flibjava.jvmti%2Fjvmti-interp.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jvmti%2Fjvmti-interp.exp?ref=d36114b201170944f503f59c2ae50b8d09989267", "patch": "@@ -112,9 +112,16 @@ proc gij_jvmti_test_one {file} {\n           # directory of it to the cxxflaglist.\n           lappend cxxflaglist \"-L$cxxldlibflags\"\n       }\n-\t\n-      lappend cxxflaglist \"-lstdc++\"\n-\n+      # If you're building the compiler with --prefix set to a place\n+      # where it's not yet installed, then the linker won't be able to\n+      # find the libgcc used by libgcj.dylib/libstdc++.dylib. We could pass\n+      # the -dylib_file option, but that's complicated, and it's much easier\n+      # to just make the linker find libgcc using -L options.\n+      if { [istarget \"*-*-darwin*\"] } {\n+\t  lappend cxxflaglist \"-shared-libgcc -lstdc++\"\n+      } else {\n+\t  lappend cxxflaglist \"-lstdc++\"\n+      }\n       set cxxflags [join $cxxflaglist]\n   }\n "}]}