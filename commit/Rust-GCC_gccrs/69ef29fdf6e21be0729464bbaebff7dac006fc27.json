{"sha": "69ef29fdf6e21be0729464bbaebff7dac006fc27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjllZjI5ZmRmNmUyMWJlMDcyOTQ2NGJiYWViZmY3ZGFjMDA2ZmMyNw==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2003-07-04T21:24:35Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2003-07-04T21:24:35Z"}, "message": "basic_file_stdio.cc: Revert.\n\n\n2003-07-04  Benjamin Kosnik  <bkoz@redhat.com>\n            Petur Runolfsson  <peturr02@ru.is>\n\n\t* config/io/basic_file_stdio.cc: Revert.\n\nCo-Authored-By: Petur Runolfsson <peturr02@ru.is>\n\nFrom-SVN: r68938", "tree": {"sha": "ba7bad962f418dcf96dd66c6b40b44883d3550ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba7bad962f418dcf96dd66c6b40b44883d3550ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/69ef29fdf6e21be0729464bbaebff7dac006fc27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69ef29fdf6e21be0729464bbaebff7dac006fc27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69ef29fdf6e21be0729464bbaebff7dac006fc27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69ef29fdf6e21be0729464bbaebff7dac006fc27/comments", "author": null, "committer": null, "parents": [{"sha": "5b5bf71795052950c49778edd75b01af468fc482", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b5bf71795052950c49778edd75b01af468fc482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b5bf71795052950c49778edd75b01af468fc482"}], "stats": {"total": 41, "additions": 23, "deletions": 18}, "files": [{"sha": "f20272d01f51e5157cc567ae6d496bb096270836", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69ef29fdf6e21be0729464bbaebff7dac006fc27/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69ef29fdf6e21be0729464bbaebff7dac006fc27/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=69ef29fdf6e21be0729464bbaebff7dac006fc27", "patch": "@@ -1,3 +1,8 @@\n+2003-07-04  Benjamin Kosnik  <bkoz@redhat.com>\n+            Petur Runolfsson  <peturr02@ru.is>\n+\t\n+\t* config/io/basic_file_stdio.cc: Revert.\n+\n 2003-07-04  Paolo Carlini  <pcarlini@unitus.it>\n \n \t* include/bits/deque.tcc: Fully qualify standard"}, {"sha": "8e6695b9f17bf168cc8fe673dafc2b83438c9e53", "filename": "libstdc++-v3/config/io/basic_file_stdio.cc", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69ef29fdf6e21be0729464bbaebff7dac006fc27/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69ef29fdf6e21be0729464bbaebff7dac006fc27/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc?ref=69ef29fdf6e21be0729464bbaebff7dac006fc27", "patch": "@@ -207,32 +207,32 @@ namespace std\n  \n   streamsize \n   __basic_file<char>::xsgetn(char* __s, streamsize __n)\n-  { return fread(__s, 1, __n, _M_cfile); }\n+  {\n+    streamsize __ret;\n+    do\n+      __ret = read(this->fd(), __s, __n);\n+    while (__ret == -1L && errno == EINTR);\n+    return __ret;\n+  }\n     \n   streamsize \n   __basic_file<char>::xsputn(const char* __s, streamsize __n)\n-  { return fwrite(__s, 1, __n, _M_cfile); }\n+  {\n+    streamsize __ret;\n+    do\n+      __ret = write(this->fd(), __s, __n);\n+    while (__ret == -1L && errno == EINTR);\n+    return __ret;\n+  }\n \n   streampos\n-  __basic_file<char>::seekoff(streamoff off, ios_base::seekdir way, \n+  __basic_file<char>::seekoff(streamoff __off, ios_base::seekdir __way, \n \t\t\t      ios_base::openmode /*__mode*/)\n-  {\n-    streampos ret(-1);\n-    fpos_t tmp;\n-    if (!fseek(_M_cfile, off, way) && !fgetpos(_M_cfile, &tmp))\n-      ret = tmp; \n-    return ret;\n-  }\n+  { return lseek(this->fd(), __off, __way); }\n \n   streampos\n-  __basic_file<char>::seekpos(streampos pos, ios_base::openmode /*__mode*/)\n-  {\n-    streampos ret(-1);\n-    fpos_t tmp = pos; \n-    if (!fsetpos(_M_cfile, &tmp) && !fgetpos(_M_cfile, &tmp))\n-      ret = tmp; \n-    return ret;\n-  }\n+  __basic_file<char>::seekpos(streampos __pos, ios_base::openmode /*__mode*/)\n+  { return lseek(this->fd(), __pos, ios_base::beg); }\n \n   int \n   __basic_file<char>::sync() "}]}