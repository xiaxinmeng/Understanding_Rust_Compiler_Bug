{"sha": "a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI1YmJkNTQxM2UyYTRiZmQ3YTQ3ZGNkNzUwMWM4YzdmODZlZTdjNw==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2018-07-10T20:21:38Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@gcc.gnu.org", "date": "2018-07-10T20:21:38Z"}, "message": "PR testsuite/86461 - test case gcc.c-torture/execute/builtins/strlen-3.c fails\n\ngcc/testsuite/ChangeLog:\n\t* gcc.c-torture/execute/builtins/strlen-3.c: Adjust.\n\nFrom-SVN: r262543", "tree": {"sha": "48b99be7fe1d6a6ec41e6c6e325f63a0eb377a53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48b99be7fe1d6a6ec41e6c6e325f63a0eb377a53"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8a9f5d14f37ad562db4f4baabbf98f72b03fdc42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a9f5d14f37ad562db4f4baabbf98f72b03fdc42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a9f5d14f37ad562db4f4baabbf98f72b03fdc42"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "8d27cdb32067a6d5f33523a3cf8a518f3b6d38cc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "patch": "@@ -1,3 +1,8 @@\n+2018-07-10  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR testsuite/86461\n+\t* gcc.c-torture/execute/builtins/strlen-3.c: Adjust.\n+\n 2018-07-10  Martin Liska  <mliska@suse.cz>\n \n         PR testsuite/86445"}, {"sha": "56b6babae41e717bbeaaafdb7a1dff838881fd59", "filename": "gcc/testsuite/gcc.c-torture/execute/builtins/strlen-3.c", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fbuiltins%2Fstrlen-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fbuiltins%2Fstrlen-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fbuiltins%2Fstrlen-3.c?ref=a25bbd5413e2a4bfd7a47dcd7501c8c7f86ee7c7", "patch": "@@ -2,24 +2,24 @@\n \n    Test strlen on const variables initialized to string literals.\n \n-   Written by Jakub Jelinek, 9/14/2004.\n-\n-   { dg-do compile }\n-   { dg-options \"-O2 -Wall -fdump-tree-optimized\" } */\n+   Written by Jakub Jelinek, 9/14/2004.  */\n \n extern void abort (void);\n extern __SIZE_TYPE__ strlen (const char *);\n extern char *strcpy (char *, const char *);\n static const char bar[] = \"Hello, World!\";\n static const char baz[] = \"hello, world?\";\n static const char larger[20] = \"short string\";\n+extern int inside_main;\n \n int l1 = 1;\n int x = 6;\n \n void\n main_test(void)\n {\n+  inside_main = 1;\n+\n #ifdef __OPTIMIZE__\n   const char *foo;\n   int i;\n@@ -61,10 +61,16 @@ main_test(void)\n   if (strlen (&larger[10]) != 2)\n     abort ();\n \n+  inside_main = 0;\n+  /* The following call may or may not be folded depending on\n+     the optimization level, and when it isn't folded (such\n+     as may be the case with -Og) it may or may not result in\n+     a library call, depending on whether or not it's expanded\n+     inline (e.g., powerpc64 makes a call while x86_64 expands\n+     it inline).  */\n   if (strlen (larger + (x++ & 7)) != 5)\n     abort ();\n   if (x != 8)\n     abort ();\n+  inside_main = 1;\n }\n-\n-/* { dg-final { scan-tree-dump-not \"strlen\" \"optimized\" } } */"}]}