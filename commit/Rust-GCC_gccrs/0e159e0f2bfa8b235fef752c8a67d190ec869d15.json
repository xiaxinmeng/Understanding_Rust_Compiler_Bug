{"sha": "0e159e0f2bfa8b235fef752c8a67d190ec869d15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGUxNTllMGYyYmZhOGIyMzVmZWY3NTJjOGE2N2QxOTBlYzg2OWQxNQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2009-11-04T18:35:57Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2009-11-04T18:35:57Z"}, "message": "re PR rtl-optimization/41833 (vec_splat followed by vec_splat could be improved)\n\n2009-11-04  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n            Trevor Smigiel <Trevor_Smigiel@playstation.sony.com>\n\n        PR rtl-opt/41833\n        * simplify-rtx.c (simplify_binary_operation_1): Simplify vec_select of\n        a vec_duplicate.\n\n2009-11-04  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR rtl-opt/41833\n        * gcc.target/powerpc/altivec-33.c: New testcase.\n\n\nCo-Authored-By: Trevor Smigiel <Trevor_Smigiel@playstation.sony.com>\n\nFrom-SVN: r153906", "tree": {"sha": "795d61d4f784b7538bcd75914efd3f4dabf69c68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/795d61d4f784b7538bcd75914efd3f4dabf69c68"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e159e0f2bfa8b235fef752c8a67d190ec869d15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e159e0f2bfa8b235fef752c8a67d190ec869d15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e159e0f2bfa8b235fef752c8a67d190ec869d15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e159e0f2bfa8b235fef752c8a67d190ec869d15/comments", "author": null, "committer": null, "parents": [{"sha": "ac3554c568c57f468e8f57e86de4ce2c86d55b62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac3554c568c57f468e8f57e86de4ce2c86d55b62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac3554c568c57f468e8f57e86de4ce2c86d55b62"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "d34908043dc07063db41fdf121ae412048ca0abc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e159e0f2bfa8b235fef752c8a67d190ec869d15", "patch": "@@ -1,8 +1,15 @@\n+2009-11-04  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+            Trevor Smigiel <Trevor_Smigiel@playstation.sony.com>\n+\n+\tPR rtl-opt/41833\n+\t* simplify-rtx.c (simplify_binary_operation_1): Simplify vec_select of\n+\ta vec_duplicate.\n+\n 2009-11-04  Richard Guenther  <rguenther@suse.de>\n             Rafael Avila de Espindola  <espindola@google.com>\n  \n \t* gcc.c (process_command): Handle arguments name@offset.\n- \n+\n 2009-11-04  Harsha Jagasia  <harsha.jagasia@amd.com>\n \t    Dwarakanath Rajagopal  <dwarak.rajagopal@amd.com>\n \t"}, {"sha": "ee119bcd65c2e39f3882f0ac4bac5ba0129cb9c4", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=0e159e0f2bfa8b235fef752c8a67d190ec869d15", "patch": "@@ -2946,6 +2946,9 @@ simplify_binary_operation_1 (enum rtx_code code, enum machine_mode mode,\n \t\t\t\t    tmp_op, gen_rtx_PARALLEL (VOIDmode, vec));\n \t      return tmp;\n \t    }\n+\t  if (GET_CODE (trueop0) == VEC_DUPLICATE\n+\t      && GET_MODE (XEXP (trueop0, 0)) == mode)\n+\t    return XEXP (trueop0, 0);\n \t}\n       else\n \t{"}, {"sha": "a0e861bc6c5141bb4bf65ca1c6f962a4ccf1270a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0e159e0f2bfa8b235fef752c8a67d190ec869d15", "patch": "@@ -1,3 +1,8 @@\n+2009-11-04  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR rtl-opt/41833\n+\t* gcc.target/powerpc/altivec-33.c: New testcase.\n+\n 2009-11-04  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/17365, DR 218"}, {"sha": "c1c935a1c59a79b1984f417496a113297fb07c77", "filename": "gcc/testsuite/gcc.target/powerpc/altivec-33.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Faltivec-33.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e159e0f2bfa8b235fef752c8a67d190ec869d15/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Faltivec-33.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Faltivec-33.c?ref=0e159e0f2bfa8b235fef752c8a67d190ec869d15", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target powerpc_altivec_ok } */\n+/* { dg-options \"-O2 -maltivec\" } */\n+\n+/* We should only produce one vspltw as we already splatted the value.  */\n+/* { dg-final { scan-assembler-times \"vspltw\" 1 } } */\n+\n+#include <altivec.h>\n+\n+vector float f(vector float a)\n+{\n+  vector float b = vec_splat (a, 2);\n+  return vec_splat (b, 0);\n+}\n+\n+"}]}