{"sha": "48187504f8edc2a0db6317e77c180e6f0a57d882", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDgxODc1MDRmOGVkYzJhMGRiNjMxN2U3N2MxODBlNmYwYTU3ZDg4Mg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-05-15T18:20:57Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-05-15T18:20:57Z"}, "message": "class.c (build_utf8_ref): Don't generate identifier based on utf8const contents.\n\n\t* class.c (build_utf8_ref): Don't generate identifier based on\n\tutf8const contents.\n\nFrom-SVN: r42110", "tree": {"sha": "b78e53dd04a45c4076c378c47b01b59fa720c050", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b78e53dd04a45c4076c378c47b01b59fa720c050"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48187504f8edc2a0db6317e77c180e6f0a57d882", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48187504f8edc2a0db6317e77c180e6f0a57d882", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48187504f8edc2a0db6317e77c180e6f0a57d882", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48187504f8edc2a0db6317e77c180e6f0a57d882/comments", "author": null, "committer": null, "parents": [{"sha": "6f9b26b05c24e9222399ef241afe58abf7106555", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f9b26b05c24e9222399ef241afe58abf7106555", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f9b26b05c24e9222399ef241afe58abf7106555"}], "stats": {"total": 23, "additions": 6, "deletions": 17}, "files": [{"sha": "686bf0a8e3803b80e305f4a752c936397d65620f", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48187504f8edc2a0db6317e77c180e6f0a57d882/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48187504f8edc2a0db6317e77c180e6f0a57d882/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=48187504f8edc2a0db6317e77c180e6f0a57d882", "patch": "@@ -1,3 +1,8 @@\n+2001-05-15  Tom Tromey  <tromey@redhat.com>\n+\n+\t* class.c (build_utf8_ref): Don't generate identifier based on\n+\tutf8const contents.\n+\n 2001-05-12  Richard Henderson  <rth@redhat.com>\n \n \t* java-tree.def (JAVA_EXC_OBJ_EXPR): New."}, {"sha": "40c8a83a03c97cedda51b448eb02f1b0187b1b21", "filename": "gcc/java/class.c", "status": "modified", "additions": 1, "deletions": 17, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48187504f8edc2a0db6317e77c180e6f0a57d882/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48187504f8edc2a0db6317e77c180e6f0a57d882/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=48187504f8edc2a0db6317e77c180e6f0a57d882", "patch": "@@ -807,7 +807,6 @@ build_utf8_ref (name)\n   const char * name_ptr = IDENTIFIER_POINTER(name);\n   int name_len = IDENTIFIER_LENGTH(name);\n   char buf[60];\n-  char *buf_ptr;\n   tree ctype, field = NULL_TREE, str_type, cinit, string;\n   static int utf8_count = 0;\n   int name_hash;\n@@ -833,23 +832,8 @@ build_utf8_ref (name)\n   FINISH_RECORD_CONSTRUCTOR (cinit);\n   TREE_CONSTANT (cinit) = 1;\n \n-  /* Build a unique identifier based on buf. */\n+  /* Generate a unique-enough identifier.  */\n   sprintf(buf, \"_Utf%d\", ++utf8_count);\n-  buf_ptr = &buf[strlen (buf)];\n-  if (name_len > 0 && name_ptr[0] >= '0' && name_ptr[0] <= '9')\n-    *buf_ptr++ = '_';\n-  while (--name_len >= 0)\n-    {\n-      unsigned char c = *name_ptr++;\n-      if (c & 0x80)\n-\tcontinue;\n-      if (!ISALPHA(c) && !ISDIGIT(c))\n-\tc = '_';\n-      *buf_ptr++ = c;\n-      if (buf_ptr >= buf + 50)\n-\tbreak;\n-    }\n-  *buf_ptr = '\\0';\n \n   decl = build_decl (VAR_DECL, get_identifier (buf), utf8const_type);\n   /* FIXME get some way to force this into .text, not .data. */"}]}