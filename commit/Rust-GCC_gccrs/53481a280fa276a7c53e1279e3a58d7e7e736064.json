{"sha": "53481a280fa276a7c53e1279e3a58d7e7e736064", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTM0ODFhMjgwZmEyNzZhN2M1M2UxMjc5ZTNhNThkN2U3ZTczNjA2NA==", "commit": {"author": {"name": "Carl Love", "email": "cel@us.ibm.com", "date": "2018-05-04T16:17:15Z"}, "committer": {"name": "Carl Love", "email": "carll@gcc.gnu.org", "date": "2018-05-04T16:17:15Z"}, "message": "vsx-vector-6.h (foo): Add test for vec_max, vec_trunc.\n\ngcc/testsuite/ChangeLog:\n\n2018-05-04 Carl Love  <cel@us.ibm.com>\n\t* gcc.target/powerpc/vsx-vector-6.h (foo): Add test for vec_max,\n\tvec_trunc.\n\t* gcc.target/powerpc/vsx-vector-6-le.c (dg-final): Update xvcmpeqdp,\n\txvcmpgtdp, xvcmpgedp counts. Add xxsel counts.\n\t* gcc.target/powerpc/vsx-vector-6-be.c (dg-final): Update xvcmpgtdp,\n\txvcmpgedp counts. Add xxsel counts.\n\nFrom-SVN: r259936", "tree": {"sha": "5c9d117e380f0dc3e1c13d16b90bef83f4fcebef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c9d117e380f0dc3e1c13d16b90bef83f4fcebef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53481a280fa276a7c53e1279e3a58d7e7e736064", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53481a280fa276a7c53e1279e3a58d7e7e736064", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53481a280fa276a7c53e1279e3a58d7e7e736064", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53481a280fa276a7c53e1279e3a58d7e7e736064/comments", "author": {"login": "carlelove", "id": 86435705, "node_id": "MDQ6VXNlcjg2NDM1NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/86435705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlelove", "html_url": "https://github.com/carlelove", "followers_url": "https://api.github.com/users/carlelove/followers", "following_url": "https://api.github.com/users/carlelove/following{/other_user}", "gists_url": "https://api.github.com/users/carlelove/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlelove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlelove/subscriptions", "organizations_url": "https://api.github.com/users/carlelove/orgs", "repos_url": "https://api.github.com/users/carlelove/repos", "events_url": "https://api.github.com/users/carlelove/events{/privacy}", "received_events_url": "https://api.github.com/users/carlelove/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "772455c964ec51d034ca32bb2718b239c01a05d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/772455c964ec51d034ca32bb2718b239c01a05d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/772455c964ec51d034ca32bb2718b239c01a05d2"}], "stats": {"total": 34, "additions": 27, "deletions": 7}, "files": [{"sha": "f4de7e52a5e692c3d89aadc0cadf70a49eb24694", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=53481a280fa276a7c53e1279e3a58d7e7e736064", "patch": "@@ -1,3 +1,11 @@\n+2018-05-04 Carl Love  <cel@us.ibm.com>\n+\t* gcc.target/powerpc/vsx-vector-6.h (foo): Add test for vec_max,\n+\tvec_trunc.\n+\t* gcc.target/powerpc/vsx-vector-6-le.c (dg-final): Update xvcmpeqdp,\n+\txvcmpgtdp, xvcmpgedp counts. Add xxsel counts.\n+\t* gcc.target/powerpc/vsx-vector-6-be.c (dg-final): Update xvcmpgtdp,\n+\txvcmpgedp counts. Add xxsel counts.\n+\n 2018-05-04  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/85627"}, {"sha": "3305781bc6f21cd8895ea6b186c9e0dd1ecc4b9e", "filename": "gcc/testsuite/gcc.target/powerpc/vsx-vector-6-be.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6-be.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6-be.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6-be.c?ref=53481a280fa276a7c53e1279e3a58d7e7e736064", "patch": "@@ -9,8 +9,8 @@\n /* { dg-final { scan-assembler-times \"xvadddp\" 1 } } */\n /* { dg-final { scan-assembler-times \"xxlnor\" 7 } } */\n /* { dg-final { scan-assembler-times \"xvcmpeqdp\" 6 } } */\n-/* { dg-final { scan-assembler-times \"xvcmpgtdp\" 7 } } */\n-/* { dg-final { scan-assembler-times \"xvcmpgedp\" 6 } } */\n+/* { dg-final { scan-assembler-times \"xvcmpgtdp\" 8 } } */\n+/* { dg-final { scan-assembler-times \"xvcmpgedp\" 7 } } */\n /* { dg-final { scan-assembler-times \"xvrdpim\" 1 } } */\n /* { dg-final { scan-assembler-times \"xvmaddadp\" 1 } } */\n /* { dg-final { scan-assembler-times \"xvmsubadp\" 1 } } */\n@@ -26,6 +26,7 @@\n /* { dg-final { scan-assembler-times \"xvnmaddasp\" 1 } } */\n /* { dg-final { scan-assembler-times \"vmsumshs\" 1 } } */\n /* { dg-final { scan-assembler-times \"xxland\" 13 } } */\n+/* { dg-final { scan-assembler-times \"xxsel\" 2 } } */\n \n /* Source code for the test in vsx-vector-6.h */\n #include \"vsx-vector-6.h\""}, {"sha": "dbf87b320b9b931236525c610bad303aa8484252", "filename": "gcc/testsuite/gcc.target/powerpc/vsx-vector-6-le.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6-le.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6-le.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6-le.c?ref=53481a280fa276a7c53e1279e3a58d7e7e736064", "patch": "@@ -14,9 +14,9 @@\n    their usage counts being stable.  Therefore, we just ensure at least one\n    xxlor instruction was generated.  */\n /* { dg-final { scan-assembler \"xxlor\" } } */\n-/* { dg-final { scan-assembler-times \"xvcmpeqdp\" 5 } } */\n-/* { dg-final { scan-assembler-times \"xvcmpgtdp\" 8 } } */\n-/* { dg-final { scan-assembler-times \"xvcmpgedp\" 6 } } */\n+/* { dg-final { scan-assembler-times \"xvcmpeqdp\" 4 } } */\n+/* { dg-final { scan-assembler-times \"xvcmpgtdp\" 7 } } */\n+/* { dg-final { scan-assembler-times \"xvcmpgedp\" 7 } } */\n /* { dg-final { scan-assembler-times \"xvrdpim\" 1 } } */\n /* { dg-final { scan-assembler-times \"xvmaddadp\" 1 } } */\n /* { dg-final { scan-assembler-times \"xvmsubadp\" 1 } } */\n@@ -32,6 +32,7 @@\n /* { dg-final { scan-assembler-times \"xvnmaddasp\" 1 } } */\n /* { dg-final { scan-assembler-times \"vmsumshs\" 1 } } */\n /* { dg-final { scan-assembler-times \"xxland\" 13 } } */\n+/* { dg-final { scan-assembler-times \"xxsel\" 2 } } */\n \n /* Source code for the test in vsx-vector-6.h */\n #include \"vsx-vector-6.h\""}, {"sha": "a891b64e6faaed8228e1d1c625fe6de558f1bf6f", "filename": "gcc/testsuite/gcc.target/powerpc/vsx-vector-6.h", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53481a280fa276a7c53e1279e3a58d7e7e736064/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6.h?ref=53481a280fa276a7c53e1279e3a58d7e7e736064", "patch": "@@ -7,7 +7,9 @@\n void foo (vector double *out, vector double *in, vector long *p_l, vector bool long *p_b,\n \t  vector unsigned char *p_uc, int *i, vector float *p_f,\n \t  vector bool char *outbc, vector bool int *outbi,\n-\t  vector bool short *outbsi, vector int *outsi, vector unsigned int *outui)\n+\t  vector bool short *outbsi, vector int *outsi,\n+\t  vector unsigned int *outui, vector signed char *outsc,\n+\t  vector unsigned char *outuc)\n {\n   vector double in0 = in[0];\n   vector double in1 = in[1];\n@@ -20,6 +22,8 @@ void foo (vector double *out, vector double *in, vector long *p_l, vector bool l\n   vector float inf0;\n   vector float inf1;\n   vector float inf2;\n+  vector char inc0;\n+  vector char inc1;\n   vector bool char inbc0;\n   vector bool char inbc1;\n   vector bool short inbs0;\n@@ -30,6 +34,7 @@ void foo (vector double *out, vector double *in, vector long *p_l, vector bool l\n   vector unsigned short int inusi0, inusi1;\n   vector signed int insi0, insi1;\n   vector unsigned int inui0, inui1;\n+  vector unsigned char inuc0, inuc1;\n   \n   *out++ = vec_abs (in0);\n   *out++ = vec_add (in0, in1);\n@@ -103,6 +108,7 @@ void foo (vector double *out, vector double *in, vector long *p_l, vector bool l\n   *p_f++ = vec_nmsub (inf0, inf1, inf2);\n   *p_f++ = vec_nmadd (inf0, inf1, inf2);\n   *p_f++ = vec_or (inf0, inf1);\n+  *p_f++ = vec_trunc (inf0);\n   \n   *out++ = vec_or (inbl0, in0);\n   *out++ = vec_or (in0, inbl0);\n@@ -113,6 +119,8 @@ void foo (vector double *out, vector double *in, vector long *p_l, vector bool l\n   *outbc++ = vec_andc (inbc0, inbc1);\n   *outbc++ = vec_or (inbc0, inbc1);\n \n+  *outuc++ = vec_max (inuc0, inuc1);\n+\n   *outbi++ = vec_andc (inbi0, inbi1);\n   *outbsi++ = vec_andc (inbs0, inbs1);\n \n@@ -151,7 +159,9 @@ int main()\n   vector bool short *outbsi;\n   vector int *outsi;\n   vector unsigned int *outui;\n+  vector signed char *outsc;\n+  vector unsigned char *outuc;\n \n   foo (out, in, p_l, p_b, p_uc, i, p_f, outbc,\n-       outbi, outbsi, outsi, outui);\n+       outbi, outbsi, outsi, outui, outsc, outuc);\n }"}]}