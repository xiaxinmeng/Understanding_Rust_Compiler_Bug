{"sha": "dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGFiYjNmMDRkYTk1ZjJjZGJlNGI3MTNkM2U5OTdkZmI2N2I4N2NhMA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-02-03T22:42:20Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-02-03T22:42:20Z"}, "message": "libgcc2.c (__ffsdi2, [...]): Change return type to \"int\".\n\n        * libgcc2.c (__ffsdi2, __clzsi2, __clzdi2, __ctzsi2, __ctzdi2,\n        __popcountsi2, __popcountdi2, __paritysi2, __paritydi2): Change\n        return type to \"int\".  Shuffle declarations and undef int trap.\n        * libgcc2.h: Remove their declarations.\n        * optabs.c (expand_unop): Force outmode to int for bitops.\n\nFrom-SVN: r62353", "tree": {"sha": "b06e600bb678be6305dbf07842e1ba19c1f9ff99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b06e600bb678be6305dbf07842e1ba19c1f9ff99"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/comments", "author": null, "committer": null, "parents": [{"sha": "d074ed7c016d74f5305d482e5a2b685920802a4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d074ed7c016d74f5305d482e5a2b685920802a4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d074ed7c016d74f5305d482e5a2b685920802a4d"}], "stats": {"total": 80, "additions": 47, "deletions": 33}, "files": [{"sha": "a91d014b561d6bbb928c0d18b5cd38136b7f32c9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "patch": "@@ -1,3 +1,11 @@\n+2003-02-03  Richard Henderson  <rth@redhat.com>\n+\n+\t* libgcc2.c (__ffsdi2, __clzsi2, __clzdi2, __ctzsi2, __ctzdi2,\n+\t__popcountsi2, __popcountdi2, __paritysi2, __paritydi2): Change\n+\treturn type to \"int\".  Shuffle declarations and undef int trap.\n+\t* libgcc2.h: Remove their declarations.\n+\t* optabs.c (expand_unop): Force outmode to int for bitops.\n+\n 2003-02-03  Bob Wilson  <bob.wilson@acm.org>\n \n \t* config/xtensa/xtensa.c (order_regs_for_local_alloc): Order the"}, {"sha": "c2279ef92b733a5cfc3e4b9c55e69459a8036d49", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 27, "deletions": 9, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "patch": "@@ -341,7 +341,9 @@ __ashrdi3 (DWtype u, word_type b)\n #endif\n \f\n #ifdef L_ffsdi2\n-Wtype\n+#undef int\n+extern int __ffsdi2 (DWtype u);\n+int\n __ffsdi2 (DWtype u)\n {\n   DWunion uu;\n@@ -520,7 +522,9 @@ const UQItype __clz_tab[] =\n #endif\n \f\n #ifdef L_clzsi2\n-Wtype\n+#undef int\n+extern int __clzsi2 (USItype x);\n+int\n __clzsi2 (USItype x)\n {\n   UWtype w = x;\n@@ -534,7 +538,9 @@ __clzsi2 (USItype x)\n #endif\n \f\n #ifdef L_clzdi2\n-Wtype\n+#undef int\n+extern int __clzdi2 (UDItype x);\n+int\n __clzdi2 (UDItype x)\n {\n   UWtype word;\n@@ -559,7 +565,9 @@ __clzdi2 (UDItype x)\n #endif\n \f\n #ifdef L_ctzsi2\n-Wtype\n+#undef int\n+extern int __ctzsi2 (USItype x);\n+int\n __ctzsi2 (USItype x)\n {\n   Wtype ret;\n@@ -571,7 +579,9 @@ __ctzsi2 (USItype x)\n #endif\n \f\n #ifdef L_ctzdi2\n-Wtype\n+#undef int\n+extern int __ctzdi2 (UDItype x);\n+int\n __ctzdi2 (UDItype x)\n {\n   UWtype word;\n@@ -615,7 +625,9 @@ const UQItype __popcount_tab[] =\n #endif\n \f\n #ifdef L_popcountsi2\n-Wtype\n+#undef int\n+extern int __popcountsi2 (USItype x);\n+int\n __popcountsi2 (USItype x)\n {\n   return __popcount_tab[(x >>  0) & 0xff]\n@@ -626,7 +638,9 @@ __popcountsi2 (USItype x)\n #endif\n \f\n #ifdef L_popcountdi2\n-Wtype\n+#undef int\n+extern int __popcountdi2 (UDItype x);\n+int\n __popcountdi2 (UDItype x)\n {\n   return __popcount_tab[(x >>  0) & 0xff]\n@@ -641,7 +655,9 @@ __popcountdi2 (UDItype x)\n #endif\n \f\n #ifdef L_paritysi2\n-Wtype\n+#undef int\n+extern int __paritysi2 (USItype x);\n+int\n __paritysi2 (USItype x)\n {\n   UWtype nx = x;\n@@ -655,7 +671,9 @@ __paritysi2 (USItype x)\n #endif\n \f\n #ifdef L_paritydi2\n-Wtype\n+#undef int\n+extern int __paritydi2 (UDItype x);\n+int\n __paritydi2 (UDItype x)\n {\n   UWtype nx = x ^ (x >> 32);"}, {"sha": "f32f4a08d38c9f9293180c62b138704c0e7af95d", "filename": "gcc/libgcc2.h", "status": "modified", "additions": 11, "deletions": 23, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2Flibgcc2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2Flibgcc2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.h?ref=dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "patch": "@@ -223,31 +223,19 @@ extern DWtype __negdi2 (DWtype);\n extern DWtype __lshrdi3 (DWtype, word_type);\n extern DWtype __ashldi3 (DWtype, word_type);\n extern DWtype __ashrdi3 (DWtype, word_type);\n-extern Wtype __ffsdi2 (DWtype);\n \n /* ??? Ought to get these named properly for DSPs.  */\n-#if BITS_PER_UNIT == 8 && MIN_UNITS_PER_WORD >= 4\n-extern Wtype __clzsi2 (USItype);\n-extern Wtype __ctzsi2 (USItype);\n-extern Wtype __popcountsi2 (USItype x);\n-extern Wtype __paritysi2 (USItype x);\n-#else\n-#undef L_clzsi2\n-#undef L_ctzsi2\n-#undef L_popcountsi2\n-#undef L_paritysi2\n-#endif\n-\n-#if BITS_PER_UNIT == 8 && MIN_UNITS_PER_WORD >= 4 && LONG_LONG_TYPE_SIZE > 32\n-extern Wtype __clzdi2 (UDItype);\n-extern Wtype __ctzdi2 (UDItype);\n-extern Wtype __popcountdi2 (UDItype x);\n-extern Wtype __paritydi2 (UDItype x);\n-#else\n-#undef L_clzdi2\n-#undef L_ctzdi2\n-#undef L_popcountdi2\n-#undef L_paritydi2\n+#if BITS_PER_UNIT != 8 || MIN_UNITS_PER_WORD < 4\n+# undef L_clzsi2\n+# undef L_ctzsi2\n+# undef L_popcountsi2\n+# undef L_paritysi2\n+# if LONG_LONG_TYPE_SIZE <= 32\n+#  undef L_clzdi2\n+#  undef L_ctzdi2\n+#  undef L_popcountdi2\n+#  undef L_paritydi2\n+# endif\n #endif\n \n /* __udiv_w_sdiv is static inline when building other libgcc2 portions.  */"}, {"sha": "92bfc359111a535052b4bef7d94940a1d0d7a861", "filename": "gcc/optabs.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=dabb3f04da95f2cdbe4b713d3e997dfb67b87ca0", "patch": "@@ -2675,7 +2675,7 @@ expand_unop (mode, unoptab, op0, target, unsignedp)\n \t have them return something that isn't a double-word.  */\n       if (unoptab == ffs_optab || unoptab == clz_optab || unoptab == ctz_optab\n \t  || unoptab == popcount_optab || unoptab == parity_optab)\n-\toutmode = word_mode;\n+\toutmode = TYPE_MODE (integer_type_node);\n \n       start_sequence ();\n "}]}