{"sha": "f819b3b278609360242d969027031a9a9381edeb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjgxOWIzYjI3ODYwOTM2MDI0MmQ5NjkwMjcwMzFhOWE5MzgxZWRlYg==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2015-10-23T13:38:16Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-10-23T13:38:16Z"}, "message": "re PR middle-end/68066 (ICE in max_value, at wide-int.cc)\n\ngcc/\n\n\tPR middle-end/68066\n\t* tree.c (build_truth_vector_type): Support BLK mode\n\treturned for boolean vector.\n\nFrom-SVN: r229256", "tree": {"sha": "5378eae13fb0aa7cb3180d45337f4190cddd875b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5378eae13fb0aa7cb3180d45337f4190cddd875b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f819b3b278609360242d969027031a9a9381edeb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f819b3b278609360242d969027031a9a9381edeb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f819b3b278609360242d969027031a9a9381edeb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f819b3b278609360242d969027031a9a9381edeb/comments", "author": null, "committer": null, "parents": [{"sha": "abcb651bac5a4aeadca671b7ed76d396788cfa10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abcb651bac5a4aeadca671b7ed76d396788cfa10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abcb651bac5a4aeadca671b7ed76d396788cfa10"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "54359a0f0f65177dcf4496447114e4910de6af3e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f819b3b278609360242d969027031a9a9381edeb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f819b3b278609360242d969027031a9a9381edeb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f819b3b278609360242d969027031a9a9381edeb", "patch": "@@ -1,3 +1,9 @@\n+2015-10-23  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\tPR middle-end/68066\n+\t* tree.c (build_truth_vector_type): Support BLK mode\n+\treturned for boolean vector.\n+\n 2015-10-23  Alan Hayward <alan.hayward@arm.com>\n \n \tPR tree-optimization/65947"}, {"sha": "79bbd0752c8112ee8e7e62d59f331c23fdc9cd93", "filename": "gcc/tree.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f819b3b278609360242d969027031a9a9381edeb/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f819b3b278609360242d969027031a9a9381edeb/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=f819b3b278609360242d969027031a9a9381edeb", "patch": "@@ -10671,8 +10671,14 @@ build_truth_vector_type (unsigned nunits, unsigned vector_size)\n \n   gcc_assert (mask_mode != VOIDmode);\n \n-  unsigned HOST_WIDE_INT esize = GET_MODE_BITSIZE (mask_mode) / nunits;\n-  gcc_assert (esize * nunits == GET_MODE_BITSIZE (mask_mode));\n+  unsigned HOST_WIDE_INT vsize;\n+  if (mask_mode == BLKmode)\n+    vsize = vector_size * BITS_PER_UNIT;\n+  else\n+    vsize = GET_MODE_BITSIZE (mask_mode);\n+\n+  unsigned HOST_WIDE_INT esize = vsize / nunits;\n+  gcc_assert (esize * nunits == vsize);\n \n   tree bool_type = build_nonstandard_boolean_type (esize);\n "}]}