{"sha": "dc3cf66b06e1357d69e5ad9293449369064f254e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGMzY2Y2NmIwNmUxMzU3ZDY5ZTVhZDkyOTM0NDkzNjkwNjRmMjU0ZQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2015-10-21T08:43:44Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2015-10-21T08:43:44Z"}, "message": "re PR target/68018 (ICE: in ix86_compute_frame_layout, at config/i386/i386.c:11308 with -mstackrealign)\n\n\tPR target/68018\n\t* config/i386/i386.c (ix86_compute_frame_layout): Realign the stack\n\tfor 64-bit MS_ABI targets also when default incoming stack boundary\n\tis overriden.\n\ntestsuite/ChangeLog:\n\n\tPR target/68018\n\t* gcc.target/i386/pr68018.c: New test.\n\nFrom-SVN: r229120", "tree": {"sha": "55d91e3665dafad7211c3f911bda6a3849def6d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55d91e3665dafad7211c3f911bda6a3849def6d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dc3cf66b06e1357d69e5ad9293449369064f254e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc3cf66b06e1357d69e5ad9293449369064f254e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc3cf66b06e1357d69e5ad9293449369064f254e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc3cf66b06e1357d69e5ad9293449369064f254e/comments", "author": null, "committer": null, "parents": [{"sha": "87961d1b29b5ecfd8cb300a8470141bcd0a51f33", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87961d1b29b5ecfd8cb300a8470141bcd0a51f33", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87961d1b29b5ecfd8cb300a8470141bcd0a51f33"}], "stats": {"total": 39, "additions": 32, "deletions": 7}, "files": [{"sha": "949fb3aa6f824538782f069448e6d96681874fa8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dc3cf66b06e1357d69e5ad9293449369064f254e", "patch": "@@ -1,3 +1,10 @@\n+2015-10-21  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/68018\n+\t* config/i386/i386.c (ix86_compute_frame_layout): Realign the stack\n+\tfor 64-bit MS_ABI targets also when default incoming stack boundary\n+\tis overriden.\n+\n 2015-10-21  Richard Biener  <rguenther@suse.de>\n \n \t* tree-ssa-sccvn.c (cond_stmts_equal_p): Compare two GIMPLE"}, {"sha": "6fd4a564f1c8a71c9887b0ef5991ddc82228607e", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=dc3cf66b06e1357d69e5ad9293449369064f254e", "patch": "@@ -11271,11 +11271,14 @@ ix86_compute_frame_layout (struct ix86_frame *frame)\n   frame->nregs = ix86_nsaved_regs ();\n   frame->nsseregs = ix86_nsaved_sseregs ();\n \n-  /* 64-bit MS ABI seem to require stack alignment to be always 16 except for\n-     function prologues and leaf.  */\n+  /* 64-bit MS ABI seem to require stack alignment to be always 16,\n+     except for function prologues, leaf functions and when the defult\n+     incoming stack boundary is overriden at command line or via\n+     force_align_arg_pointer attribute.  */\n   if ((TARGET_64BIT_MS_ABI && crtl->preferred_stack_boundary < 128)\n       && (!crtl->is_leaf || cfun->calls_alloca != 0\n-          || ix86_current_function_calls_tls_descriptor))\n+\t  || ix86_current_function_calls_tls_descriptor\n+\t  || ix86_incoming_stack_boundary < 128))\n     {\n       crtl->preferred_stack_boundary = 128;\n       crtl->stack_alignment_needed = 128;"}, {"sha": "7b3afbb1f03e4415a8935a84862a185474210c63", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dc3cf66b06e1357d69e5ad9293449369064f254e", "patch": "@@ -1,3 +1,8 @@\n+2015-10-21  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/68018\n+\t* gcc.target/i386/pr68018.c: New test.\n+\n 2015-10-21  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/68031\n@@ -202,7 +207,7 @@\n \t* gcc.dg/tree-ssa/ssa-dom-thread-2e.c: Likewise.\n \t* gcc.dg/tree-ssa/ssa-dom-thread-2f.c: Likewise.\n \n-        PR testsuite/67959\n+\tPR testsuite/67959\n \t* gcc.dg/tree-ssa/ssa-thread-13.c: Avoid bitfield assumptions.\n \n 2015-10-14  Marek Polacek  <polacek@redhat.com>\n@@ -385,9 +390,9 @@\n \n 2015-10-09  Martin Jambor  <mjambor@suse.cz>\n \n-\ttree-optimization/67794\n-        * gcc.dg/ipa/ipa-sra-10.c: Nw test.\n-        * gcc.dg/torture/pr67794.c: Likewise.\n+\tPR tree-optimization/67794\n+\t* gcc.dg/ipa/ipa-sra-10.c: New test.\n+\t* gcc.dg/torture/pr67794.c: Likewise.\n \n 2015-10-09  Alexandre Oliva <aoliva@redhat.com>\n "}, {"sha": "a0fa21e0b00b145937423461285cb87860a93973", "filename": "gcc/testsuite/gcc.target/i386/pr68018.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr68018.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc3cf66b06e1357d69e5ad9293449369064f254e/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr68018.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr68018.c?ref=dc3cf66b06e1357d69e5ad9293449369064f254e", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile { target { *-*-linux* && { ! ia32 } } } } */\n+/* { dg-options \"-O -mabi=ms -mstackrealign\" } */\n+\n+typedef float V __attribute__ ((vector_size (16)));\n+\n+int fn1 (V * x)\n+{\n+  V a = *x;\n+  return a[0];\n+}"}]}