{"sha": "be61ce52148c5bc1bc7183089d99ee8470c723d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmU2MWNlNTIxNDhjNWJjMWJjNzE4MzA4OWQ5OWVlODQ3MGM3MjNkMw==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2012-01-17T15:41:50Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2012-01-17T15:41:50Z"}, "message": "rx.c (rx_can_use_simple_return): New function.\n\n        * config/rx/rx.c (rx_can_use_simple_return): New function.\n        * config/rx/rx-protos.h (rx_can_use_simple_return): Prototype.\n        * config/rx/rx.md (return): Predicate on rx_can_use_simple_return.\n\nFrom-SVN: r183252", "tree": {"sha": "bb0ef4b6da1546ce66dc815d2a326a532b55d55b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bb0ef4b6da1546ce66dc815d2a326a532b55d55b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be61ce52148c5bc1bc7183089d99ee8470c723d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be61ce52148c5bc1bc7183089d99ee8470c723d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be61ce52148c5bc1bc7183089d99ee8470c723d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be61ce52148c5bc1bc7183089d99ee8470c723d3/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "99eb180f6619a88a87bcf7afa4845d1d5aaec597", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99eb180f6619a88a87bcf7afa4845d1d5aaec597", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99eb180f6619a88a87bcf7afa4845d1d5aaec597"}], "stats": {"total": 46, "additions": 40, "deletions": 6}, "files": [{"sha": "ceba9c2eb00131aa9a95011221c4be951dac973d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=be61ce52148c5bc1bc7183089d99ee8470c723d3", "patch": "@@ -1,3 +1,9 @@\n+2012-01-17  Nick Clifton  <nickc@redhat.com>\n+\n+\t* config/rx/rx.c (rx_can_use_simple_return): New function.\n+\t* config/rx/rx-protos.h (rx_can_use_simple_return): Prototype.\n+\t* config/rx/rx.md (return): Predicate on rx_can_use_simple_return.\n+\n 2012-01-17  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/51782"}, {"sha": "f0352a86891e68d03032036d14ab5481e5867eca", "filename": "gcc/config/rx/rx-protos.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2Fconfig%2Frx%2Frx-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2Fconfig%2Frx%2Frx-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frx%2Frx-protos.h?ref=be61ce52148c5bc1bc7183089d99ee8470c723d3", "patch": "@@ -1,5 +1,6 @@\n /* Exported function prototypes from the Renesas RX backend.\n-   Copyright (C) 2008, 2009, 2010, 2011 Free Software Foundation, Inc.\n+   Copyright (C) 2008, 2009, 2010, 2011, 2012\n+   Free Software Foundation, Inc.\n    Contributed by Red Hat.\n \n    This file is part of GCC.\n@@ -21,6 +22,8 @@\n #ifndef GCC_RX_PROTOS_H\n #define GCC_RX_PROTOS_H\n \n+extern bool             rx_can_use_simple_return (void);\n+extern void\t\trx_expand_epilogue (bool);\n extern void\t\trx_expand_prologue (void);\n extern int\t\trx_initial_elimination_offset (int, int);\n \n@@ -29,7 +32,6 @@ extern int\t\trx_adjust_insn_length (rtx, int);\n extern int \t\trx_align_for_label (rtx, int);\n extern void             rx_emit_stack_popm (rtx *, bool);\n extern void             rx_emit_stack_pushm (rtx *);\n-extern void\t\trx_expand_epilogue (bool);\n extern char *\t\trx_gen_move_template (rtx *, bool);\n extern bool\t\trx_is_legitimate_constant (enum machine_mode, rtx);\n extern bool\t\trx_is_restricted_memory_address (rtx,"}, {"sha": "655f318d231475d50f12e952ff02572f48de51bd", "filename": "gcc/config/rx/rx.c", "status": "modified", "additions": 27, "deletions": 2, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2Fconfig%2Frx%2Frx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2Fconfig%2Frx%2Frx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frx%2Frx.c?ref=be61ce52148c5bc1bc7183089d99ee8470c723d3", "patch": "@@ -1,5 +1,6 @@\n /* Subroutines used for code generation on Renesas RX processors.\n-   Copyright (C) 2008, 2009, 2010, 2011 Free Software Foundation, Inc.\n+   Copyright (C) 2008, 2009, 2010, 2011, 2012\n+   Free Software Foundation, Inc.\n    Contributed by Red Hat.\n \n    This file is part of GCC.\n@@ -1818,7 +1819,31 @@ gen_rx_popm_vector (unsigned int low, unsigned int high)\n \n   return vector;\n }\n-  \n+\n+/* Returns true if a simple return insn can be used.  */\n+\n+bool\n+rx_can_use_simple_return (void)\n+{\n+  unsigned int low;\n+  unsigned int high;\n+  unsigned int frame_size;\n+  unsigned int stack_size;\n+  unsigned int register_mask;\n+\n+  if (is_naked_func (NULL_TREE)\n+      || is_fast_interrupt_func (NULL_TREE)\n+      || is_interrupt_func (NULL_TREE))\n+    return false;\n+\n+  rx_get_stack_layout (& low, & high, & register_mask,\n+\t\t       & frame_size, & stack_size);\n+\n+  return (register_mask == 0\n+\t  && (frame_size + stack_size) == 0\n+\t  && low == 0);\n+}\n+\n void\n rx_expand_epilogue (bool is_sibcall)\n {"}, {"sha": "1ba603f4a6ef28ce7c186cdcc6c74f6c1d5dd971", "filename": "gcc/config/rx/rx.md", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2Fconfig%2Frx%2Frx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be61ce52148c5bc1bc7183089d99ee8470c723d3/gcc%2Fconfig%2Frx%2Frx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frx%2Frx.md?ref=be61ce52148c5bc1bc7183089d99ee8470c723d3", "patch": "@@ -1,5 +1,6 @@\n ;;  Machine Description for Renesas RX processors\n-;;  Copyright (C) 2008, 2009, 2010, 2011 Free Software Foundation, Inc.\n+;;  Copyright (C) 2008, 2009, 2010, 2011, 2012\n+;;  Free Software Foundation, Inc.\n ;;  Contributed by Red Hat.\n \n ;; This file is part of GCC.\n@@ -342,7 +343,7 @@\n \n (define_expand \"return\"\n   [(return)]\n-  \"\"\n+  \"rx_can_use_simple_return ()\"\n   \"rx_expand_epilogue (false); DONE;\"\n )\n "}]}