{"sha": "ad83e87b61e9776115ac880ec0832cb6af46c928", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQ4M2U4N2I2MWU5Nzc2MTE1YWM4ODBlYzA4MzJjYjZhZjQ2YzkyOA==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1994-08-31T23:29:53Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1994-08-31T23:29:53Z"}, "message": "expmed.c (store_bit_field): Semi-revert Aug 25 change: Make it apply only for BLKmode, not integral modes.\n\n* expmed.c (store_bit_field):  Semi-revert Aug 25 change:\nMake it apply only for BLKmode, not integral modes.\n\nFrom-SVN: r8007", "tree": {"sha": "2c19c9d0b992802f376aeb965c2a80fdd18983e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c19c9d0b992802f376aeb965c2a80fdd18983e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad83e87b61e9776115ac880ec0832cb6af46c928", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad83e87b61e9776115ac880ec0832cb6af46c928", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad83e87b61e9776115ac880ec0832cb6af46c928", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad83e87b61e9776115ac880ec0832cb6af46c928/comments", "author": null, "committer": null, "parents": [{"sha": "318b149cf75ee0b34fa2955e8a822682e0d0c33d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/318b149cf75ee0b34fa2955e8a822682e0d0c33d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/318b149cf75ee0b34fa2955e8a822682e0d0c33d"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "45d0dfe93e71bfbcc748548d865c53c3091c6776", "filename": "gcc/expmed.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad83e87b61e9776115ac880ec0832cb6af46c928/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad83e87b61e9776115ac880ec0832cb6af46c928/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=ad83e87b61e9776115ac880ec0832cb6af46c928", "patch": "@@ -299,7 +299,10 @@ store_bit_field (str_rtx, bitsize, bitnum, fieldmode, value, align, total_size)\n       /* Here we transfer the words of the field\n \t in the order least significant first.\n \t This is because the most significant word is the one which may\n-\t be less than full.  */\n+\t be less than full.\n+\t However, only do that if the value is not BLKmode.  */\n+\n+      int backwards = WORDS_BIG_ENDIAN && fieldmode != BLKmode;\n \n       int nwords = (bitsize + (BITS_PER_WORD - 1)) / BITS_PER_WORD;\n       int i;\n@@ -313,8 +316,12 @@ store_bit_field (str_rtx, bitsize, bitnum, fieldmode, value, align, total_size)\n \n       for (i = 0; i < nwords; i++)\n \t{\n-\t  int wordnum = i;\n-\t  int bit_offset = i * BITS_PER_WORD;\n+\t  /* If I is 0, use the low-order word in both field and target;\n+\t     if I is 1, use the next to lowest word; and so on.  */\n+\t  int wordnum = (backwards ? nwords - i - 1 : i);\n+\t  int bit_offset = (backwards\n+\t\t\t    ? MAX (bitsize - (i + 1) * BITS_PER_WORD, 0)\n+\t\t\t    : i * BITS_PER_WORD);\n \t  store_bit_field (op0, MIN (BITS_PER_WORD,\n \t\t\t\t     bitsize - i * BITS_PER_WORD),\n \t\t\t   bitnum + bit_offset, word_mode,"}]}