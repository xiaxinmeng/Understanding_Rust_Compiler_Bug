{"sha": "b2bf82589273884743923aa780c9479965609070", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjJiZjgyNTg5MjczODg0NzQzOTIzYWE3ODBjOTQ3OTk2NTYwOTA3MA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-06-07T07:01:56Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-06-07T07:01:56Z"}, "message": "re PR tree-optimization/85935 ([graphite] ICE in extract_affine, at graphite-sese-to-poly.c:287)\n\n2018-06-07  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/85935\n\t* graphite-scop-detection.c (find_params_in_bb): Analyze\n\tcondition operands with respect to the correct loop.  Assert\n\tthe analysis doesn't fail.\n\n\t* gcc.dg/graphite/pr85935.c: New testcase.\n\nFrom-SVN: r261263", "tree": {"sha": "38d881df90297448c2773ed6e77dea88e83b2378", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38d881df90297448c2773ed6e77dea88e83b2378"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2bf82589273884743923aa780c9479965609070", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2bf82589273884743923aa780c9479965609070", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2bf82589273884743923aa780c9479965609070", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2bf82589273884743923aa780c9479965609070/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7a205f505f4dc6fd94495e856442e6808c735a0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a205f505f4dc6fd94495e856442e6808c735a0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a205f505f4dc6fd94495e856442e6808c735a0b"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "f6f3fe78f10a7616444cd8217b5a407566289e52", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2bf82589273884743923aa780c9479965609070/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2bf82589273884743923aa780c9479965609070/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b2bf82589273884743923aa780c9479965609070", "patch": "@@ -1,3 +1,10 @@\n+2018-06-07  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/85935\n+\t* graphite-scop-detection.c (find_params_in_bb): Analyze\n+\tcondition operands with respect to the correct loop.  Assert\n+\tthe analysis doesn't fail.\n+\n 2018-06-04  Carl Love  <cel@us.ibm.com>\n \n \t* gcc/config/rs6000/vsx.md (first_match_index_<mode>): Calculate index"}, {"sha": "0dafc39952169056b81667770d56ed277ddfd4a3", "filename": "gcc/graphite-scop-detection.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2bf82589273884743923aa780c9479965609070/gcc%2Fgraphite-scop-detection.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2bf82589273884743923aa780c9479965609070/gcc%2Fgraphite-scop-detection.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-scop-detection.c?ref=b2bf82589273884743923aa780c9479965609070", "patch": "@@ -1176,13 +1176,15 @@ find_params_in_bb (sese_info_p region, gimple_poly_bb_p gbb)\n \n   /* Find parameters in conditional statements.  */\n   gimple *stmt;\n-  loop_p loop = GBB_BB (gbb)->loop_father;\n   FOR_EACH_VEC_ELT (GBB_CONDITIONS (gbb), i, stmt)\n     {\n+      loop_p loop = gimple_bb (stmt)->loop_father;\n       tree lhs = scalar_evolution_in_region (region->region, loop,\n \t\t\t\t\t     gimple_cond_lhs (stmt));\n       tree rhs = scalar_evolution_in_region (region->region, loop,\n \t\t\t\t\t     gimple_cond_rhs (stmt));\n+      gcc_assert (!chrec_contains_undetermined (lhs)\n+\t\t  && !chrec_contains_undetermined (rhs));\n \n       scan_tree_for_params (region, lhs);\n       scan_tree_for_params (region, rhs);"}, {"sha": "989e497704fa0d461797dd4e4b5022394f30c846", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2bf82589273884743923aa780c9479965609070/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2bf82589273884743923aa780c9479965609070/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b2bf82589273884743923aa780c9479965609070", "patch": "@@ -1,3 +1,8 @@\n+2018-06-07  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/85935\n+\t* gcc.dg/graphite/pr85935.c: New testcase.\n+\n 2018-06-04  Carl Love  <cel@us.ibm.com>\n \n \t* gcc.target/powerpc/builtins-8-p9-runnable.c: Add additional"}, {"sha": "8c63ea93770cfdeb87fd53e7ffb8786ec26fab98", "filename": "gcc/testsuite/gcc.dg/graphite/pr85935.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2bf82589273884743923aa780c9479965609070/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr85935.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2bf82589273884743923aa780c9479965609070/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr85935.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr85935.c?ref=b2bf82589273884743923aa780c9479965609070", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -floop-parallelize-all -fno-tree-loop-im --param scev-max-expr-size=3\" } */\n+\n+typedef int dq;\n+\n+int gb;\n+\n+void\n+qq (dq ww, int kk)\n+{\n+  dq *up = &ww;\n+\n+  (void) *up;\n+\n+  while (kk < 1)\n+    {\n+      ++ww;\n+\n+      if (ww == 0)\n+\tfor (gb = 0; gb < 2; ++gb)\n+\t  ;\n+\n+      ++kk;\n+    }\n+}"}]}