{"sha": "46fc230528907c9adc42104c73819415de8d0a6c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZmYzIzMDUyODkwN2M5YWRjNDIxMDRjNzM4MTk0MTVkZThkMGE2Yw==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2010-12-22T15:09:17Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2010-12-22T15:09:17Z"}, "message": "spu.md (\"mov<mode>\"): Use nonimmediate_operand predicate for destination operand.\n\n\t* config/spu/spu.md (\"mov<mode>\"): Use nonimmediate_operand\n\tpredicate for destination operand.\n\t* config/spu/spu.c (spu_expand_mov): If move destination is an\n\tinvalid subreg, perform move in the subreg's inner mode instead.\n\nFrom-SVN: r168169", "tree": {"sha": "1b72cab3ee737423f6461c6ecd0dfeadccb67568", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b72cab3ee737423f6461c6ecd0dfeadccb67568"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46fc230528907c9adc42104c73819415de8d0a6c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46fc230528907c9adc42104c73819415de8d0a6c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46fc230528907c9adc42104c73819415de8d0a6c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46fc230528907c9adc42104c73819415de8d0a6c/comments", "author": null, "committer": null, "parents": [{"sha": "32aa622ca800f92d7250e1ab4be08d3e174ef953", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32aa622ca800f92d7250e1ab4be08d3e174ef953", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32aa622ca800f92d7250e1ab4be08d3e174ef953"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "9fb315209f12f28c93ee85106e7f7e0ab8017fdc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46fc230528907c9adc42104c73819415de8d0a6c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46fc230528907c9adc42104c73819415de8d0a6c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=46fc230528907c9adc42104c73819415de8d0a6c", "patch": "@@ -1,3 +1,10 @@\n+2010-12-22  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\t* config/spu/spu.md (\"mov<mode>\"): Use nonimmediate_operand\n+\tpredicate for destination operand.\n+\t* config/spu/spu.c (spu_expand_mov): If move destination is an\n+\tinvalid subreg, perform move in the subreg's inner mode instead.\n+\n 2010-12-22  Martin Jambor  <mjambor@suse.cz>\n \n \tPR tree-optimization/45934"}, {"sha": "045fc8794ed281d651eec059b2241454b62738d5", "filename": "gcc/config/spu/spu.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46fc230528907c9adc42104c73819415de8d0a6c/gcc%2Fconfig%2Fspu%2Fspu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46fc230528907c9adc42104c73819415de8d0a6c/gcc%2Fconfig%2Fspu%2Fspu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.c?ref=46fc230528907c9adc42104c73819415de8d0a6c", "patch": "@@ -4608,7 +4608,13 @@ int\n spu_expand_mov (rtx * ops, enum machine_mode mode)\n {\n   if (GET_CODE (ops[0]) == SUBREG && !valid_subreg (ops[0]))\n-    abort ();\n+    {\n+      /* Perform the move in the destination SUBREG's inner mode.  */\n+      ops[0] = SUBREG_REG (ops[0]);\n+      mode = GET_MODE (ops[0]);\n+      ops[1] = gen_lowpart_common (mode, ops[1]);\n+      gcc_assert (ops[1]);\n+    }\n \n   if (GET_CODE (ops[1]) == SUBREG && !valid_subreg (ops[1]))\n     {"}, {"sha": "1aab660a8d283197f02fa57636f96efc4ef4a371", "filename": "gcc/config/spu/spu.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46fc230528907c9adc42104c73819415de8d0a6c/gcc%2Fconfig%2Fspu%2Fspu.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46fc230528907c9adc42104c73819415de8d0a6c/gcc%2Fconfig%2Fspu%2Fspu.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.md?ref=46fc230528907c9adc42104c73819415de8d0a6c", "patch": "@@ -269,8 +269,8 @@\n ;; mov\n \n (define_expand \"mov<mode>\"\n-  [(set (match_operand:ALL 0 \"spu_nonimm_operand\" \"=r,r,r,m\")\n-\t(match_operand:ALL 1 \"general_operand\" \"r,i,m,r\"))]\n+  [(set (match_operand:ALL 0 \"nonimmediate_operand\" \"\")\n+\t(match_operand:ALL 1 \"general_operand\" \"\"))]\n   \"\"\n   {\n     if (spu_expand_mov(operands, <MODE>mode))"}]}