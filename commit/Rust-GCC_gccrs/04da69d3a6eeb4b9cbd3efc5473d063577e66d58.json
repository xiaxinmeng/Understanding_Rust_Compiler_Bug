{"sha": "04da69d3a6eeb4b9cbd3efc5473d063577e66d58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRkYTY5ZDNhNmVlYjRiOWNiZDNlZmM1NDczZDA2MzU3N2U2NmQ1OA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@casey.soma.redhat.com", "date": "2000-05-25T00:36:28Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-05-25T00:36:28Z"}, "message": "stmt.c (expand_end_bindings): Look through NOTEs to find a BARRIER.\n\n        * stmt.c (expand_end_bindings): Look through NOTEs to find a\n        BARRIER.\n\nFrom-SVN: r34149", "tree": {"sha": "b9f9d3bf37a330de34f1b5904bfcda3da2d1df3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9f9d3bf37a330de34f1b5904bfcda3da2d1df3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04da69d3a6eeb4b9cbd3efc5473d063577e66d58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04da69d3a6eeb4b9cbd3efc5473d063577e66d58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04da69d3a6eeb4b9cbd3efc5473d063577e66d58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04da69d3a6eeb4b9cbd3efc5473d063577e66d58/comments", "author": null, "committer": null, "parents": [{"sha": "392b631661531c16c691310bb78b9af861537cca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/392b631661531c16c691310bb78b9af861537cca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/392b631661531c16c691310bb78b9af861537cca"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "0ff533f7d499a1055a4674e9f3f8457cb97ce8d8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04da69d3a6eeb4b9cbd3efc5473d063577e66d58/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04da69d3a6eeb4b9cbd3efc5473d063577e66d58/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=04da69d3a6eeb4b9cbd3efc5473d063577e66d58", "patch": "@@ -1,3 +1,8 @@\n+2000-05-24  Jason Merrill  <jason@casey.soma.redhat.com>\n+\n+\t* stmt.c (expand_end_bindings): Look through NOTEs to find a\n+\tBARRIER.\n+\n 2000-05-24  Mark Mitchell  <mark@codesourcery.com>\n \n \t* calls.c (expand_call): Handle cleanups in tail-recursion"}, {"sha": "81f413225a72ae2dee200d640d14beb5b3fa9830", "filename": "gcc/stmt.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04da69d3a6eeb4b9cbd3efc5473d063577e66d58/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04da69d3a6eeb4b9cbd3efc5473d063577e66d58/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=04da69d3a6eeb4b9cbd3efc5473d063577e66d58", "patch": "@@ -3675,15 +3675,21 @@ expand_end_bindings (vars, mark_ends, dont_jump_in)\n   if (thisblock->data.block.stack_level != 0\n       || thisblock->data.block.cleanups != 0)\n     {\n-      /* Only clean up here if this point can actually be reached.  */\n-      int reachable = GET_CODE (get_last_insn ()) != BARRIER;\n+      int reachable;\n+      rtx insn;\n \n       /* Don't let cleanups affect ({...}) constructs.  */\n       int old_expr_stmts_for_value = expr_stmts_for_value;\n       rtx old_last_expr_value = last_expr_value;\n       tree old_last_expr_type = last_expr_type;\n       expr_stmts_for_value = 0;\n \n+      /* Only clean up here if this point can actually be reached.  */\n+      insn = get_last_insn ();\n+      if (GET_CODE (insn) == NOTE)\n+\tinsn = prev_nonnote_insn (insn);\n+      reachable = GET_CODE (insn) != BARRIER;\n+      \n       /* Do the cleanups.  */\n       expand_cleanups (thisblock->data.block.cleanups, NULL_TREE, 0, reachable);\n       if (reachable)"}]}