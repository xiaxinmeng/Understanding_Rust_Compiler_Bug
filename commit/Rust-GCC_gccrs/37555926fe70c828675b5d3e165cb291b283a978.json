{"sha": "37555926fe70c828675b5d3e165cb291b283a978", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzc1NTU5MjZmZTcwYzgyODY3NWI1ZDNlMTY1Y2IyOTFiMjgzYTk3OA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2019-03-08T12:37:54Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-03-08T12:37:54Z"}, "message": "Restrict IPA split (PR go/63560).\n\n2019-03-08  Jan Hubicka  <hubicka@ucw.cz>\n\n\tPR go/63560\n\t* ipa-split.c (execute_split_functions): Do not split\n\t'noinline' or 'section' function.\n\nFrom-SVN: r269491", "tree": {"sha": "91f2e0b58924ec8c3bbfd1ae7682013872c5e90e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91f2e0b58924ec8c3bbfd1ae7682013872c5e90e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37555926fe70c828675b5d3e165cb291b283a978", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37555926fe70c828675b5d3e165cb291b283a978", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37555926fe70c828675b5d3e165cb291b283a978", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37555926fe70c828675b5d3e165cb291b283a978/comments", "author": null, "committer": null, "parents": [{"sha": "ec07e94bbf22be8cd8f47e34de5e764437e33774", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec07e94bbf22be8cd8f47e34de5e764437e33774", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec07e94bbf22be8cd8f47e34de5e764437e33774"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "de7bdde2b9ae77225d917012159040a4604f1989", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37555926fe70c828675b5d3e165cb291b283a978/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37555926fe70c828675b5d3e165cb291b283a978/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=37555926fe70c828675b5d3e165cb291b283a978", "patch": "@@ -1,3 +1,9 @@\n+2019-03-08  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR go/63560\n+\t* ipa-split.c (execute_split_functions): Do not split\n+\t'noinline' or 'section' function.\n+\n 2019-03-08  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/79846"}, {"sha": "5eaf8257f9884113fea8b5b4990c3b0506094110", "filename": "gcc/ipa-split.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37555926fe70c828675b5d3e165cb291b283a978/gcc%2Fipa-split.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37555926fe70c828675b5d3e165cb291b283a978/gcc%2Fipa-split.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-split.c?ref=37555926fe70c828675b5d3e165cb291b283a978", "patch": "@@ -104,6 +104,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"gimple-pretty-print.h\"\n #include \"ipa-fnsummary.h\"\n #include \"cfgloop.h\"\n+#include \"attribs.h\"\n \n /* Per basic block info.  */\n \n@@ -1751,6 +1752,20 @@ execute_split_functions (void)\n       return 0;\n     }\n \n+  if (lookup_attribute (\"noinline\", DECL_ATTRIBUTES (current_function_decl)))\n+    {\n+      if (dump_file)\n+\tfprintf (dump_file, \"Not splitting: function is noinline.\\n\");\n+      return 0;\n+    }\n+  if (lookup_attribute (\"section\", DECL_ATTRIBUTES (current_function_decl)))\n+    {\n+      if (dump_file)\n+\tfprintf (dump_file, \"Not splitting: function is in user defined \"\n+\t\t \"section.\\n\");\n+      return 0;\n+    }\n+\n   /* We enforce splitting after loop headers when profile info is not\n      available.  */\n   if (profile_status_for_fn (cfun) != PROFILE_READ)"}]}