{"sha": "d276f2bb0c9b6e5d73ff879433f8a3616ff08373", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI3NmYyYmIwYzliNmU1ZDczZmY4Nzk0MzNmOGEzNjE2ZmYwODM3Mw==", "commit": {"author": {"name": "Catherine Moore", "email": "clm@cygnus.com", "date": "1998-04-06T10:49:13Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-04-06T10:49:13Z"}, "message": "combine.c (can_combine_p): Include successor in volatile test.\n\nMon Apr  6 07:17:52 1998  Catherine Moore  <clm@cygnus.com>\n        * combine.c (can_combine_p):  Include successor in volatile test.\n\nFrom-SVN: r19018", "tree": {"sha": "18eca73ba61813c4a0c66ba3359383e5a9687123", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18eca73ba61813c4a0c66ba3359383e5a9687123"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d276f2bb0c9b6e5d73ff879433f8a3616ff08373", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d276f2bb0c9b6e5d73ff879433f8a3616ff08373", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d276f2bb0c9b6e5d73ff879433f8a3616ff08373", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d276f2bb0c9b6e5d73ff879433f8a3616ff08373/comments", "author": null, "committer": null, "parents": [{"sha": "64ad9df2cee59d28fe1c49abdf0a5b1254fa7b30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64ad9df2cee59d28fe1c49abdf0a5b1254fa7b30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64ad9df2cee59d28fe1c49abdf0a5b1254fa7b30"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "e74d6f395a1c09bf2fa167a60f874cddd84a90db", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d276f2bb0c9b6e5d73ff879433f8a3616ff08373/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d276f2bb0c9b6e5d73ff879433f8a3616ff08373/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d276f2bb0c9b6e5d73ff879433f8a3616ff08373", "patch": "@@ -1,3 +1,7 @@\n+Mon Apr  6 07:17:52 1998  Catherine Moore  <clm@cygnus.com>\n+\n+        * combine.c (can_combine_p):  Include successor in volatile test.\n+\n Mon Apr  6 14:16:33 1998  J\"orn Rennecke <amylaar@cygnus.co.uk>\n \n \t* sh.h (CASE_VECTOR_SHORTEN_MODE): Fix logic when to set"}, {"sha": "c831be1052a84dc78fbc9bb569433707a0607a05", "filename": "gcc/combine.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d276f2bb0c9b6e5d73ff879433f8a3616ff08373/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d276f2bb0c9b6e5d73ff879433f8a3616ff08373/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=d276f2bb0c9b6e5d73ff879433f8a3616ff08373", "patch": "@@ -1037,14 +1037,19 @@ can_combine_p (insn, i3, pred, succ, pdest, psrc)\n \treturn 0;\n \n   /* If INSN contains anything volatile, or is an `asm' (whether volatile\n-     or not), reject, unless nothing volatile comes between it and I3,\n-     with the exception of SUCC.  */\n+     or not), reject, unless nothing volatile comes between it and I3 */\n \n   if (GET_CODE (src) == ASM_OPERANDS || volatile_refs_p (src))\n-    for (p = NEXT_INSN (insn); p != i3; p = NEXT_INSN (p))\n-      if (GET_RTX_CLASS (GET_CODE (p)) == 'i'\n-\t  && p != succ && volatile_refs_p (PATTERN (p)))\n-\treturn 0;\n+    {\n+      /* Make sure succ doesn't contain a volatile reference.  */\n+      if (succ != 0 && volatile_refs_p (PATTERN (succ)))\n+        return 0;\n+  \n+      for (p = NEXT_INSN (insn); p != i3; p = NEXT_INSN (p))\n+        if (GET_RTX_CLASS (GET_CODE (p)) == 'i'\n+  \t  && p != succ && volatile_refs_p (PATTERN (p)))\n+  \treturn 0;\n+    }\n \n   /* If INSN is an asm, and DEST is a hard register, reject, since it has\n      to be an explicit register variable, and was chosen for a reason.  */"}]}