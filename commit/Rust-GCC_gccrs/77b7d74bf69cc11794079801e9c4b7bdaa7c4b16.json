{"sha": "77b7d74bf69cc11794079801e9c4b7bdaa7c4b16", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdiN2Q3NGJmNjljYzExNzk0MDc5ODAxZTljNGI3YmRhYTdjNGIxNg==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2014-09-10T11:36:29Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2014-09-10T11:36:29Z"}, "message": "cgraphunit.c (expand_thunk): If not expanding, set analyzed flag.\n\n2014-09-10  Martin Jambor  <mjambor@suse.cz>\n\n\t* cgraphunit.c (expand_thunk): If not expanding, set analyzed flag.\n\t(analyze): Do not set analyze flag if expand_thunk returns false;.\n\t(create_wrapper): Likewise.\n\t* cgraphclones.c (duplicate_thunk_for_node): Likewise.\n\nFrom-SVN: r215123", "tree": {"sha": "2688547317992efb858cd32a074c6de325ec8d25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2688547317992efb858cd32a074c6de325ec8d25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bec6320858ac191ce070cb789fc55792a73084da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bec6320858ac191ce070cb789fc55792a73084da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bec6320858ac191ce070cb789fc55792a73084da"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "acb16ab6997667279dc639790f8ef8144b393de2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77b7d74bf69cc11794079801e9c4b7bdaa7c4b16", "patch": "@@ -1,3 +1,10 @@\n+2014-09-10  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* cgraphunit.c (expand_thunk): If not expanding, set analyzed flag.\n+\t(analyze): Do not set analyze flag if expand_thunk returns false;.\n+\t(create_wrapper): Likewise.\n+\t* cgraphclones.c (duplicate_thunk_for_node): Likewise.\n+\n 2014-09-10  Martin Jambor  <mjambor@suse.cz>\n \n \tPR ipa/61654"}, {"sha": "224bb55eebb5f76ea1bae64e7bb780c8c3379987", "filename": "gcc/cgraphclones.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16/gcc%2Fcgraphclones.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16/gcc%2Fcgraphclones.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphclones.c?ref=77b7d74bf69cc11794079801e9c4b7bdaa7c4b16", "patch": "@@ -371,9 +371,7 @@ duplicate_thunk_for_node (cgraph_node *thunk, cgraph_node *node)\n \t\t\t\t\t\t  CGRAPH_FREQ_BASE);\n   e->call_stmt_cannot_inline_p = true;\n   symtab->call_edge_duplication_hooks (thunk->callees, e);\n-  if (!new_thunk->expand_thunk (false, false))\n-    new_thunk->analyzed = true;\n-  else\n+  if (new_thunk->expand_thunk (false, false))\n     {\n       new_thunk->thunk.thunk_p = false;\n       new_thunk->analyze ();"}, {"sha": "3e3b8d227005ddd52b9d25c854b617510feba571", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77b7d74bf69cc11794079801e9c4b7bdaa7c4b16/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=77b7d74bf69cc11794079801e9c4b7bdaa7c4b16", "patch": "@@ -576,7 +576,6 @@ cgraph_node::analyze (void)\n       if (!expand_thunk (false, false))\n \t{\n \t  thunk.alias = NULL;\n-\t  analyzed = true;\n \t  return;\n \t}\n       thunk.alias = NULL;\n@@ -1451,7 +1450,10 @@ cgraph_node::expand_thunk (bool output_asm_thunks, bool force_gimple_thunk)\n       tree restype = TREE_TYPE (TREE_TYPE (thunk_fndecl));\n \n       if (!output_asm_thunks)\n-\treturn false;\n+\t{\n+\t  analyzed = true;\n+\t  return false;\n+\t}\n \n       if (in_lto_p)\n \tget_body ();\n@@ -2313,9 +2315,7 @@ cgraph_node::create_wrapper (cgraph_node *target)\n \n     cgraph_edge *e = create_edge (target, NULL, 0, CGRAPH_FREQ_BASE);\n \n-    if (!expand_thunk (false, true))\n-      analyzed = true;\n-\n+    expand_thunk (false, true);\n     e->call_stmt_cannot_inline_p = true;\n \n     /* Inline summary set-up.  */"}]}