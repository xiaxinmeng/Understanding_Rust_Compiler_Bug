{"sha": "7e813472a20d496c4dafb20a704932656bfc8366", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2U4MTM0NzJhMjBkNDk2YzRkYWZiMjBhNzA0OTMyNjU2YmZjODM2Ng==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-10-18T00:41:42Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-10-18T00:41:42Z"}, "message": "compiler: Don't allow tuple assignments to contain duplicate symbols.\n\nFixes issue 8436.\n\nFrom-SVN: r216420", "tree": {"sha": "19087a93a9344d39f8020b915e9ca9a76e9b1c25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19087a93a9344d39f8020b915e9ca9a76e9b1c25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e813472a20d496c4dafb20a704932656bfc8366", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e813472a20d496c4dafb20a704932656bfc8366", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e813472a20d496c4dafb20a704932656bfc8366", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e813472a20d496c4dafb20a704932656bfc8366/comments", "author": null, "committer": null, "parents": [{"sha": "10e77e325c949baab49a8c5c992569d2cbb1f7a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10e77e325c949baab49a8c5c992569d2cbb1f7a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10e77e325c949baab49a8c5c992569d2cbb1f7a0"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "c4bcf058d8eacd315eee97194fd1ee34054ee50e", "filename": "gcc/go/gofrontend/parse.cc", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e813472a20d496c4dafb20a704932656bfc8366/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e813472a20d496c4dafb20a704932656bfc8366/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fparse.cc?ref=7e813472a20d496c4dafb20a704932656bfc8366", "patch": "@@ -2088,6 +2088,9 @@ Parse::simple_var_decl_or_assignment(const std::string& name,\n   Typed_identifier_list til;\n   til.push_back(Typed_identifier(name, NULL, location));\n \n+  std::set<std::string> uniq_idents;\n+  uniq_idents.insert(name);\n+\n   // We've seen one identifier.  If we see a comma now, this could be\n   // \"a, *p = 1, 2\".\n   if (this->peek_token()->is_op(OPERATOR_COMMA))\n@@ -2102,13 +2105,18 @@ Parse::simple_var_decl_or_assignment(const std::string& name,\n \t  std::string id = token->identifier();\n \t  bool is_id_exported = token->is_identifier_exported();\n \t  Location id_location = token->location();\n+\t  std::pair<std::set<std::string>::iterator, bool> ins;\n \n \t  token = this->advance_token();\n \t  if (!token->is_op(OPERATOR_COMMA))\n \t    {\n \t      if (token->is_op(OPERATOR_COLONEQ))\n \t\t{\n \t\t  id = this->gogo_->pack_hidden_name(id, is_id_exported);\n+\t\t  ins = uniq_idents.insert(id);\n+\t\t  if (!ins.second && !Gogo::is_sink_name(id))\n+\t\t    error_at(id_location, \"multiple assignments to %s\",\n+\t\t\t     Gogo::message_name(id).c_str());\n \t\t  til.push_back(Typed_identifier(id, NULL, location));\n \t\t}\n \t      else\n@@ -2119,6 +2127,10 @@ Parse::simple_var_decl_or_assignment(const std::string& name,\n \t    }\n \n \t  id = this->gogo_->pack_hidden_name(id, is_id_exported);\n+\t  ins = uniq_idents.insert(id);\n+\t  if (!ins.second && !Gogo::is_sink_name(id))\n+\t    error_at(id_location, \"multiple assignments to %s\",\n+\t\t     Gogo::message_name(id).c_str());\n \t  til.push_back(Typed_identifier(id, NULL, location));\n \t}\n "}]}