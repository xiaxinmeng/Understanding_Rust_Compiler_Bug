{"sha": "b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNhZTFjY2Q5OGE4NmYxYTNiNjNjZjEyOTRkN2I3ZWZmYjNmOWZhOQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-05-04T00:51:02Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-05-04T00:51:02Z"}, "message": "real.c (etoasc): Strip most trailing zeros for clarity.\n\n        * real.c (etoasc): Strip most trailing zeros for clarity.\n        * sched-vis.c: Include real.h.\n        (print_value): Use REAL_VALUE_TO_DECIMAL as needed.\n        * Makefile.in (sched-vis.o): Add real.h.\n\nFrom-SVN: r53137", "tree": {"sha": "1c6a3803fbcc9266244b35586a585030fb8d2c4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c6a3803fbcc9266244b35586a585030fb8d2c4e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/comments", "author": null, "committer": null, "parents": [{"sha": "8f39865a3c995f73b925d243f78b85e293820cee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f39865a3c995f73b925d243f78b85e293820cee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f39865a3c995f73b925d243f78b85e293820cee"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "d838272ff981cdc593525d226028deea26648145", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "patch": "@@ -1,3 +1,10 @@\n+2002-05-03  Richard Henderson  <rth@redhat.com>\n+\n+\t* real.c (etoasc): Strip most trailing zeros for clarity.\n+\t* sched-vis.c: Include real.h.\n+\t(print_value): Use REAL_VALUE_TO_DECIMAL as needed.\n+\t* Makefile.in (sched-vis.o): Add real.h.\n+\n 2002-05-03  David S. Miller  <davem@redhat.com>\n \n \t* haifa-sched.c (rank_for_schedule): Revert 2002-05-02 change,"}, {"sha": "f66179dedaebf601c420f389b3b977db91e7ea91", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "patch": "@@ -1599,7 +1599,7 @@ sched-ebb.o : sched-ebb.c $(CONFIG_H) $(SYSTEM_H) $(RTL_H) sched-int.h \\\n    $(INSN_ATTR_H) toplev.h $(RECOG_H) except.h $(TM_P_H)\n sched-vis.o : sched-vis.c $(CONFIG_H) $(SYSTEM_H) $(RTL_H) sched-int.h \\\n    hard-reg-set.h $(BASIC_BLOCK_H) $(INSN_ATTR_H) $(REGS_H) $(TM_P_H) \\\n-   $(TARGET_H)\n+   $(TARGET_H) real.h\n final.o : final.c $(CONFIG_H) $(SYSTEM_H) $(RTL_H) $(TREE_H) flags.h intl.h \\\n    $(REGS_H) $(RECOG_H) conditions.h insn-config.h $(INSN_ATTR_H) function.h \\\n    real.h output.h hard-reg-set.h except.h debug.h xcoffout.h \\"}, {"sha": "0c951f62a985beb8e17509557a491005b06bb51e", "filename": "gcc/real.c", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2Freal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2Freal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freal.c?ref=b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "patch": "@@ -5004,12 +5004,9 @@ etoasc (x, string, ndigs)\n \t}\n     }\n  doexp:\n-  /*\n-     if (expon >= 0)\n-     sprintf (ss, \"e+%d\", expon);\n-     else\n-     sprintf (ss, \"e%d\", expon);\n-     */\n+  /* Strip trailing zeros, but leave at least one.  */\n+  while (ss[-1] == '0' && ss[-2] != '.')\n+    --ss;\n   sprintf (ss, \"e%d\", expon);\n  bxit:\n   rndprc = rndsav;"}, {"sha": "e49d4bfeb1b88fce3d5dbecf8493bf5d4794c9e2", "filename": "gcc/sched-vis.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2Fsched-vis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9/gcc%2Fsched-vis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-vis.c?ref=b3ae1ccd98a86f1a3b63cf1294d7b7effb3f9fa9", "patch": "@@ -30,6 +30,7 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #include \"hard-reg-set.h\"\n #include \"basic-block.h\"\n #include \"insn-attr.h\"\n+#include \"real.h\"\n #include \"sched-int.h\"\n #include \"target.h\"\n \n@@ -560,7 +561,15 @@ print_value (buf, x, verbose)\n       cur = safe_concat (buf, cur, t);\n       break;\n     case CONST_DOUBLE:\n-      sprintf (t, \"<0x%lx,0x%lx>\", (long) XWINT (x, 2), (long) XWINT (x, 3));\n+      if (FLOAT_MODE_P (GET_MODE (x)))\n+\t{\n+\t  REAL_VALUE_TYPE r;\n+\n+\t  REAL_VALUE_FROM_CONST_DOUBLE (r, x);\n+\t  REAL_VALUE_TO_DECIMAL(r, \"%.6e\", t);\n+\t}\n+      else\n+\tsprintf (t, \"<0x%lx,0x%lx>\", (long) XWINT (x, 2), (long) XWINT (x, 3));\n       cur = safe_concat (buf, cur, t);\n       break;\n     case CONST_STRING:"}]}