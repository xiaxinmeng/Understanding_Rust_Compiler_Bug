{"sha": "c874ab1193089e2de87c7193f5e264719d10ebb1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg3NGFiMTE5MzA4OWUyZGU4N2M3MTkzZjVlMjY0NzE5ZDEwZWJiMQ==", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2001-03-07T20:28:19Z"}, "committer": {"name": "Andrew Macleod", "email": "amacleod@gcc.gnu.org", "date": "2001-03-07T20:28:19Z"}, "message": "a29k.c (print_operand): Free a29k_last_prologue_insn after its emitted.\n\n\n2001-03-07  Andrew MacLeod  <amacleod@redhat.com>\n\n\t* config/a29k/a29k.c (print_operand): Free a29k_last_prologue_insn\n\tafter its emitted.\n\t(output_prologue): Use xmalloc not oballoc.\n\t(output_epilog): Free a29k_first_epilogue_insn when finished.\n\t* confif/a29k/a29k.h (PREDICATE_CODES): Remove shift_constant_operand.\n\nFrom-SVN: r40301", "tree": {"sha": "774f84f647b157e3598dd84baefe2616d3fc9dea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/774f84f647b157e3598dd84baefe2616d3fc9dea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c874ab1193089e2de87c7193f5e264719d10ebb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c874ab1193089e2de87c7193f5e264719d10ebb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c874ab1193089e2de87c7193f5e264719d10ebb1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c874ab1193089e2de87c7193f5e264719d10ebb1/comments", "author": null, "committer": null, "parents": [{"sha": "de6c59795844f185e1079034b9fa777fbc12ef5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de6c59795844f185e1079034b9fa777fbc12ef5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de6c59795844f185e1079034b9fa777fbc12ef5a"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "1247f164555ffb1366289ec89d5550c35fa70b17", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c874ab1193089e2de87c7193f5e264719d10ebb1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c874ab1193089e2de87c7193f5e264719d10ebb1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c874ab1193089e2de87c7193f5e264719d10ebb1", "patch": "@@ -1,3 +1,11 @@\n+2001-03-07  Andrew MacLeod  <amacleod@redhat.com>\n+\n+\t* config/a29k/a29k.c (print_operand): Free a29k_last_prologue_insn\n+\tafter its emitted.\n+\t(output_prologue): Use xmalloc not oballoc.\n+\t(output_epilog): Free a29k_first_epilogue_insn when finished.\n+\t* confif/a29k/a29k.h (PREDICATE_CODES): Remove shift_constant_operand.\n+\n 2001-03-07  Brad Lucier  <lucier@math.purdue.edu>\n \n \t* builtins.c (expand_builtin_mathfn): Check"}, {"sha": "a895f446eea1d1dcb277df51131787519bdb14f1", "filename": "gcc/config/a29k/a29k.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c874ab1193089e2de87c7193f5e264719d10ebb1/gcc%2Fconfig%2Fa29k%2Fa29k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c874ab1193089e2de87c7193f5e264719d10ebb1/gcc%2Fconfig%2Fa29k%2Fa29k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fa29k%2Fa29k.c?ref=c874ab1193089e2de87c7193f5e264719d10ebb1", "patch": "@@ -1082,6 +1082,7 @@ print_operand (file, x, code)\n       else if (a29k_last_prologue_insn)\n \t{\n \t  fprintf (file, \"\\n\\t%s\", a29k_last_prologue_insn);\n+\t  free (a29k_last_prologue_insn);\n \t  a29k_last_prologue_insn = 0;\n \t}\n       else if (optimize && flag_delayed_branch\n@@ -1105,6 +1106,7 @@ print_operand (file, x, code)\n \t  if (a29k_last_prologue_insn)\n \t    {\n \t      fprintf (file, \"\\n\\t%s\", a29k_last_prologue_insn);\n+\t      free (a29k_last_prologue_insn);\n \t      a29k_last_prologue_insn = 0;\n \t    }\n \t  else if (GET_CODE (x) == SYMBOL_REF\n@@ -1159,6 +1161,7 @@ print_operand (file, x, code)\n \t  if (a29k_last_prologue_insn)\n \t    {\n \t      fprintf (file, \"\\n\\t%s\", a29k_last_prologue_insn);\n+\t      free (a29k_last_prologue_insn);\n \t      a29k_last_prologue_insn = 0;\n \t    }\n \t  else\n@@ -1387,7 +1390,7 @@ output_prolog (file, size)\n \n \t\tif (num_delay_slots (insn) > 0)\n \t\t  {\n-\t\t    a29k_last_prologue_insn = (char *) oballoc (100);\n+\t\t    a29k_last_prologue_insn = (char *) xmalloc (100);\n \t\t    sprintf (a29k_last_prologue_insn, \"add lr1,gr1,%d\", i);\n \t\t    break;\n \t\t  }\n@@ -1404,7 +1407,7 @@ output_prolog (file, size)\n   if (size == 0 && a29k_regstack_size == 0 && ! frame_pointer_needed)\n     a29k_first_epilogue_insn = 0;\n   else\n-    a29k_first_epilogue_insn = (char *) oballoc (100);\n+    a29k_first_epilogue_insn = (char *) xmalloc (100);\n \n   if (frame_pointer_needed)\n     sprintf (a29k_first_epilogue_insn, \"sll %s,%s,0\",\n@@ -1547,4 +1550,8 @@ output_epilog (file, size)\n \t\t     file, 1, -2, 1);\n   else\n     fprintf (file, \"\\tnop\\n\");\n+  \n+  if (a29k_first_epilogue_insn)\n+    free (a29k_first_epilogue_insn);\n+  a29k_first_epilogue_insn = 0;\n }"}, {"sha": "3ee8bf7444f616bcd2d0c43264b3213bc2a638cf", "filename": "gcc/config/a29k/a29k.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c874ab1193089e2de87c7193f5e264719d10ebb1/gcc%2Fconfig%2Fa29k%2Fa29k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c874ab1193089e2de87c7193f5e264719d10ebb1/gcc%2Fconfig%2Fa29k%2Fa29k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fa29k%2Fa29k.h?ref=c874ab1193089e2de87c7193f5e264719d10ebb1", "patch": "@@ -1635,7 +1635,6 @@ extern int a29k_debug_reg_map[];\n   {\"cint_16_operand\", {CONST_INT}},\t\t\t\t\\\n   {\"long_const_operand\", {CONST_INT, CONST, CONST_DOUBLE,\t\\\n \t\t\t  LABEL_REF, SYMBOL_REF}},\t\t\\\n-  {\"shift_constant_operand\", {CONST_INT, ASHIFT}},\t\t\\\n   {\"const_0_operand\", {CONST_INT, ASHIFT}},\t\t\t\\\n   {\"const_8_operand\", {CONST_INT, ASHIFT}},\t\t\t\\\n   {\"const_16_operand\", {CONST_INT, ASHIFT}},\t\t\t\\"}]}