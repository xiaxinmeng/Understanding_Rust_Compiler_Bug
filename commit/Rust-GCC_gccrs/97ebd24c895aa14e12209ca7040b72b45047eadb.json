{"sha": "97ebd24c895aa14e12209ca7040b72b45047eadb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTdlYmQyNGM4OTVhYTE0ZTEyMjA5Y2E3MDQwYjcyYjQ1MDQ3ZWFkYg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@redhat.com", "date": "2001-06-13T02:48:45Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2001-06-13T02:48:45Z"}, "message": "Fix for PR 3128, IA-64 linux kernel miscompile\n\nFix for PR 3128, IA-64 linux kernel miscompile\n\t* loop.c (strength_reduce): Move bl->all_reduced set before\n\tcheck_ext_dependant_givs call.\n\t(check_ext_dependant_givs): Clear bl->all_reduced when ignoring givs.\n\nFrom-SVN: r43298", "tree": {"sha": "3aa06e4d1418113c503f3068e4c0e8f3f7907604", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3aa06e4d1418113c503f3068e4c0e8f3f7907604"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97ebd24c895aa14e12209ca7040b72b45047eadb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97ebd24c895aa14e12209ca7040b72b45047eadb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97ebd24c895aa14e12209ca7040b72b45047eadb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97ebd24c895aa14e12209ca7040b72b45047eadb/comments", "author": null, "committer": null, "parents": [{"sha": "fe2ee7c4a717e8256283e985faee5bd7c927d69e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe2ee7c4a717e8256283e985faee5bd7c927d69e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe2ee7c4a717e8256283e985faee5bd7c927d69e"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "a6f3f681024191ea0c9a78f9471c72e39d7e0638", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ebd24c895aa14e12209ca7040b72b45047eadb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ebd24c895aa14e12209ca7040b72b45047eadb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=97ebd24c895aa14e12209ca7040b72b45047eadb", "patch": "@@ -1,3 +1,9 @@\n+2001-06-12  Jim Wilson  <wilson@redhat.com>\n+\n+\t* loop.c (strength_reduce): Move bl->all_reduced set before\n+\tcheck_ext_dependant_givs call.\n+\t(check_ext_dependant_givs): Clear bl->all_reduced when ignoring givs.\n+\n 2001-06-12  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* doc/extend.texi (Function Attributes): Document SH's sp_switch"}, {"sha": "ec8dc0ac261f9204fe63c1b6a1be072dff72c6fc", "filename": "gcc/loop.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ebd24c895aa14e12209ca7040b72b45047eadb/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ebd24c895aa14e12209ca7040b72b45047eadb/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=97ebd24c895aa14e12209ca7040b72b45047eadb", "patch": "@@ -4306,18 +4306,18 @@ strength_reduce (loop, flags)\n \t provided all givs are reduced.  */\n       bl->eliminable = loop_biv_eliminable_p (loop, bl, threshold, insn_count);\n \n+      /* This will be true at the end, if all givs which depend on this\n+\t biv have been strength reduced.\n+\t We can't (currently) eliminate the biv unless this is so.  */\n+      bl->all_reduced = 1;\n+\n       /* Check each extension dependent giv in this class to see if its\n \t root biv is safe from wrapping in the interior mode.  */\n       check_ext_dependant_givs (bl, loop_info);\n \n       /* Combine all giv's for this iv_class.  */\n       combine_givs (regs, bl);\n \n-      /* This will be true at the end, if all givs which depend on this\n-\t biv have been strength reduced.\n-\t We can't (currently) eliminate the biv unless this is so.  */\n-      bl->all_reduced = 1;\n-\n       for (v = bl->giv; v; v = v->next_iv)\n \t{\n \t  struct induction *tv;\n@@ -6660,6 +6660,7 @@ check_ext_dependant_givs (bl, loop_info)\n \t\t\t INSN_UID (v->insn), why);\n \t      }\n \t    v->ignore = 1;\n+\t    bl->all_reduced = 0;\n \t  }\n       }\n }"}]}