{"sha": "b275fd98f267ea870c9583e8a28f1348777786a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjI3NWZkOThmMjY3ZWE4NzBjOTU4M2U4YTI4ZjEzNDg3Nzc3ODZhMw==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2019-08-15T06:58:26Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-08-15T06:58:26Z"}, "message": "Add ::verify for cgraph_node::origin/nested/next_nested.\n\n2019-08-15  Martin Liska  <mliska@suse.cz>\n\n\t* cgraph.c (cgraph_node::verify_node): Verify origin, nested\n\tand next_nested.\n\nFrom-SVN: r274503", "tree": {"sha": "f24da3e39bacc9e4e98aa2ce5d43e44b36b8a98c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f24da3e39bacc9e4e98aa2ce5d43e44b36b8a98c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b275fd98f267ea870c9583e8a28f1348777786a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b275fd98f267ea870c9583e8a28f1348777786a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b275fd98f267ea870c9583e8a28f1348777786a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b275fd98f267ea870c9583e8a28f1348777786a3/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0c04043ec41297ad3aa4f92c38b61b7cf2aa40ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c04043ec41297ad3aa4f92c38b61b7cf2aa40ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c04043ec41297ad3aa4f92c38b61b7cf2aa40ae"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "4b147c19d567b13689eb37f14d24830f5966df46", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b275fd98f267ea870c9583e8a28f1348777786a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b275fd98f267ea870c9583e8a28f1348777786a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b275fd98f267ea870c9583e8a28f1348777786a3", "patch": "@@ -1,3 +1,8 @@\n+2019-08-15  Martin Liska  <mliska@suse.cz>\n+\n+\t* cgraph.c (cgraph_node::verify_node): Verify origin, nested\n+\tand next_nested.\n+\n 2019-08-15  Martin Liska  <mliska@suse.cz>\n \n \tPR ipa/91404"}, {"sha": "eb38b905879c530dd940b20905a1ac14369262fa", "filename": "gcc/cgraph.c", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b275fd98f267ea870c9583e8a28f1348777786a3/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b275fd98f267ea870c9583e8a28f1348777786a3/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=b275fd98f267ea870c9583e8a28f1348777786a3", "patch": "@@ -3464,6 +3464,30 @@ cgraph_node::verify_node (void)\n \t  e->aux = 0;\n \t}\n     }\n+\n+  if (nested != NULL)\n+    {\n+      for (cgraph_node *n = nested; n != NULL; n = n->next_nested)\n+\t{\n+\t  if (n->origin == NULL)\n+\t    {\n+\t      error (\"missing origin for a node in a nested list\");\n+\t      error_found = true;\n+\t    }\n+\t  else if (n->origin != this)\n+\t    {\n+\t      error (\"origin points to a different parent\");\n+\t      error_found = true;\n+\t      break;\n+\t    }\n+\t}\n+    }\n+  if (next_nested != NULL && origin == NULL)\n+    {\n+      error (\"missing origin for a node in a nested list\");\n+      error_found = true;\n+    }\n+\n   if (error_found)\n     {\n       dump (stderr);"}]}