{"sha": "e84abfa41b16b41b40dd39837caca0a7af9abee4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTg0YWJmYTQxYjE2YjQxYjQwZGQzOTgzN2NhY2EwYTdhZjlhYmVlNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2015-02-13T17:57:13Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-02-13T17:57:13Z"}, "message": "re PR c++/60211 (ICE with #pragma GCC ivdep and for-loop on global scope)\n\n/cp\n2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60211\n\t* parser.c (cp_parser_pragma): Diagnose PRAGMA_IVDEP at\n\tpragma_external context.\n\n/testsuite\n2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60211\n\t* g++.dg/parse/ivdep-2.C: New.\n\t* g++.dg/parse/ivdep-3.C: Likewise.\n\nFrom-SVN: r220689", "tree": {"sha": "666d96987ffd1302dec8b55d00b3ee78027c7daf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/666d96987ffd1302dec8b55d00b3ee78027c7daf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e84abfa41b16b41b40dd39837caca0a7af9abee4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e84abfa41b16b41b40dd39837caca0a7af9abee4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e84abfa41b16b41b40dd39837caca0a7af9abee4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e84abfa41b16b41b40dd39837caca0a7af9abee4/comments", "author": null, "committer": null, "parents": [{"sha": "d1ae5966d746eeea7c0f2d4e77c7cf93bb507512", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ae5966d746eeea7c0f2d4e77c7cf93bb507512", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1ae5966d746eeea7c0f2d4e77c7cf93bb507512"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "e6d306e6f768950c025fa0f3aa7b2ead8502a233", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e84abfa41b16b41b40dd39837caca0a7af9abee4", "patch": "@@ -1,3 +1,9 @@\n+2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60211\n+\t* parser.c (cp_parser_pragma): Diagnose PRAGMA_IVDEP at\n+\tpragma_external context.\n+\n 2015-02-13  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/65051"}, {"sha": "e0b455c88c519f4c0f0224e50ff627ba9c782b2e", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=e84abfa41b16b41b40dd39837caca0a7af9abee4", "patch": "@@ -33060,6 +33060,12 @@ cp_parser_pragma (cp_parser *parser, enum pragma_context context)\n \n     case PRAGMA_IVDEP:\n       {\n+\tif (context == pragma_external)\n+\t  {\n+\t    error_at (pragma_tok->location,\n+\t\t      \"%<#pragma GCC ivdep%> must be inside a function\");\n+\t    break;\n+\t  }\n \tcp_parser_skip_to_pragma_eol (parser, pragma_tok);\n \tcp_token *tok;\n \ttok = cp_lexer_peek_token (the_parser->lexer);"}, {"sha": "b2d1c11f5863c13cb051f4e3de7e171bea8a5091", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e84abfa41b16b41b40dd39837caca0a7af9abee4", "patch": "@@ -1,3 +1,9 @@\n+2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60211\n+\t* g++.dg/parse/ivdep-2.C: New.\n+\t* g++.dg/parse/ivdep-3.C: Likewise.\n+\n 2015-02-13  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/64506"}, {"sha": "2b90109a81a2a1b022ec56683dd3e5b599f8f516", "filename": "gcc/testsuite/g++.dg/parse/ivdep-2.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fivdep-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fivdep-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fivdep-2.C?ref=e84abfa41b16b41b40dd39837caca0a7af9abee4", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/60211\n+\n+void foo()\n+{}\n+  int i;\n+#pragma GCC ivdep  // { dg-error \"must be inside a function\" }\n+  for (i = 0; i < 2; ++i)  // { dg-error \"expected|type\" }\n+    ;\n+}  // { dg-error \"expected\" }"}, {"sha": "6d8541e36f0d0611205b6765590c9eada819cf81", "filename": "gcc/testsuite/g++.dg/parse/ivdep-3.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fivdep-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e84abfa41b16b41b40dd39837caca0a7af9abee4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fivdep-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fivdep-3.C?ref=e84abfa41b16b41b40dd39837caca0a7af9abee4", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/60211\n+\n+void foo()\n+{}\n+#pragma GCC ivdep  // { dg-error \"must be inside a function\" }\n+  for (int i = 0; i < 2; ++i)  // { dg-error \"expected|type\" }\n+    ;\n+}  // { dg-error \"expected\" }"}]}