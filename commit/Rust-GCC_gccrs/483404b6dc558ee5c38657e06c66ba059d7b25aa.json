{"sha": "483404b6dc558ee5c38657e06c66ba059d7b25aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDgzNDA0YjZkYzU1OGVlNWMzODY1N2UwNmM2NmJhMDU5ZDdiMjVhYQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-12-31T20:47:49Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-12-31T20:47:49Z"}, "message": "(copy_loop_body...\n\n(copy_loop_body, JUMP_INSN case): Do map the body of\nthe loop branch back, then rewrite it to jump past the end of the\nunrolled loop.\n\nFrom-SVN: r3014", "tree": {"sha": "f03fa69f858eb96c4e68265a3fd8c947867d849b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f03fa69f858eb96c4e68265a3fd8c947867d849b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/483404b6dc558ee5c38657e06c66ba059d7b25aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/483404b6dc558ee5c38657e06c66ba059d7b25aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/483404b6dc558ee5c38657e06c66ba059d7b25aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/483404b6dc558ee5c38657e06c66ba059d7b25aa/comments", "author": null, "committer": null, "parents": [{"sha": "feaf9c711cb08dfb41200f07fcd2e081d585c6c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/feaf9c711cb08dfb41200f07fcd2e081d585c6c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/feaf9c711cb08dfb41200f07fcd2e081d585c6c7"}], "stats": {"total": 16, "additions": 6, "deletions": 10}, "files": [{"sha": "b58066d20cac6589f045ffc8f1aa629722fc64f7", "filename": "gcc/unroll.c", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/483404b6dc558ee5c38657e06c66ba059d7b25aa/gcc%2Funroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/483404b6dc558ee5c38657e06c66ba059d7b25aa/gcc%2Funroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funroll.c?ref=483404b6dc558ee5c38657e06c66ba059d7b25aa", "patch": "@@ -1651,6 +1651,9 @@ copy_loop_body (copy_start, copy_end, map, exit_label, last_iteration,\n \t  break;\n \t  \n \tcase JUMP_INSN:\n+\t  pattern = copy_rtx_and_substitute (PATTERN (insn), map);\n+\t  copy = emit_jump_insn (pattern);\n+\n \t  if (JUMP_LABEL (insn) == start_label && insn == copy_end\n \t      && ! last_iteration)\n \t    {\n@@ -1659,21 +1662,14 @@ copy_loop_body (copy_start, copy_end, map, exit_label, last_iteration,\n \t\t In this case, we want to change the original fall through\n \t\t case to be a branch past the end of the loop, and the\n \t\t original jump label case to fall_through.  */\n-\t      /* Never map the label in this case.  */\n-\n-\t      pattern = copy_rtx (PATTERN (insn));\n-\t      copy = emit_jump_insn (pattern);\n \n \t      if (! invert_exp (pattern, copy)\n-\t\t  || ! redirect_exp (&pattern, JUMP_LABEL (insn),\n+\t\t  || ! redirect_exp (&pattern,\n+\t\t\t\t     map->label_map[CODE_LABEL_NUMBER\n+\t\t\t\t\t\t    (JUMP_LABEL (insn))],\n \t\t\t\t     exit_label, copy))\n \t\tabort ();\n \t    }\n-\t  else\n-\t    {\n-\t      pattern = copy_rtx_and_substitute (PATTERN (insn), map);\n-\t      copy = emit_jump_insn (pattern);\n-\t    }\n \t  \n #ifdef HAVE_cc0\n \t  if (cc0_insn)"}]}