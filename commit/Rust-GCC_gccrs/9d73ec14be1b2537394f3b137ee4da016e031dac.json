{"sha": "9d73ec14be1b2537394f3b137ee4da016e031dac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ3M2VjMTRiZTFiMjUzNzM5NGYzYjEzN2VlNGRhMDE2ZTAzMWRhYw==", "commit": {"author": {"name": "Ilya Verbin", "email": "ilya.verbin@intel.com", "date": "2014-11-13T14:05:49Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2014-11-13T14:05:49Z"}, "message": "[PATCH 3/4] OpenMP 4.0 offloading to Intel MIC: libgomp plugin.\n\nliboffloadmic/\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\t* configure.ac: Add subdirectory 'plugin'.\n\t* plugin/Makefile.am: New file.\n\t* plugin/Makefile.in: New file, generated by automake.\n\t* plugin/aclocal.m4: New file, generated by aclocal.\n\t* plugin/configure: New file, generated by autoconf.\n\t* plugin/configure.ac: New file.\n\t* plugin/libgomp-plugin-intelmic.cpp: New file.\n\t* plugin/offload_target_main.cpp: New file.\n\nCo-Authored-By: Andrey Turetskiy <andrey.turetskiy@intel.com>\n\nFrom-SVN: r217499", "tree": {"sha": "4e1c6e86fe68171d215a3a0d22ede52bf1f58ab2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e1c6e86fe68171d215a3a0d22ede52bf1f58ab2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d73ec14be1b2537394f3b137ee4da016e031dac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d73ec14be1b2537394f3b137ee4da016e031dac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d73ec14be1b2537394f3b137ee4da016e031dac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d73ec14be1b2537394f3b137ee4da016e031dac/comments", "author": null, "committer": null, "parents": [{"sha": "5f520819620642ecd2b070f96efa3007ac1f15a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f520819620642ecd2b070f96efa3007ac1f15a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f520819620642ecd2b070f96efa3007ac1f15a1"}], "stats": {"total": 19576, "additions": 19573, "deletions": 3}, "files": [{"sha": "9faa452f99077ecc9efa64d12c41d773b5381305", "filename": "liboffloadmic/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2FChangeLog?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -1,3 +1,17 @@\n+2014-11-13  Ilya Verbin  <ilya.verbin@intel.com>\n+\t    Andrey Turetskiy  <andrey.turetskiy@intel.com>\n+\n+\t* Makefile.in: Regenerate.\n+\t* configure: Regenerate.\n+\t* configure.ac: Add subdirectory 'plugin'.\n+\t* plugin/Makefile.am: New file.\n+\t* plugin/Makefile.in: New file, generated by automake.\n+\t* plugin/aclocal.m4: New file, generated by aclocal.\n+\t* plugin/configure: New file, generated by autoconf.\n+\t* plugin/configure.ac: New file.\n+\t* plugin/libgomp-plugin-intelmic.cpp: New file.\n+\t* plugin/offload_target_main.cpp: New file.\n+\n 2014-11-13  Kirill Yukhin  <kirill.yukhin@intel.com>\n \n \tInitial commit.  Imported from upstream:"}, {"sha": "98fb86f09f8f0c6e06c8d0a70e2d71c2437b9f88", "filename": "liboffloadmic/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2FMakefile.in?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -353,6 +353,7 @@ psdir = @psdir@\n sbindir = @sbindir@\n sharedstatedir = @sharedstatedir@\n srcdir = @srcdir@\n+subdirs = @subdirs@\n sysconfdir = @sysconfdir@\n target = @target@\n target_alias = @target_alias@"}, {"sha": "46f2f7be1ffd03d6b3c9dd43b48c4138641be402", "filename": "liboffloadmic/configure", "status": "modified", "additions": 154, "deletions": 3, "changes": 157, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fconfigure?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -561,6 +561,7 @@ PACKAGE_STRING='MIC Offload Runtime Library 1.0'\n PACKAGE_BUGREPORT=''\n PACKAGE_URL=''\n \n+enable_option_checking=no\n # Factoring default headers for most tests.\n ac_includes_default=\"\\\n #include <stdio.h>\n@@ -629,6 +630,7 @@ EGREP\n GREP\n CPP\n ALLOCA\n+subdirs\n multi_basedir\n am__fastdepCXX_FALSE\n am__fastdepCXX_TRUE\n@@ -755,7 +757,7 @@ CXXFLAGS\n CCC\n CPP\n CXXCPP'\n-\n+ac_subdirs_all='plugin'\n \n # Initialize some variables set by options.\n ac_init_help=\n@@ -4329,6 +4331,10 @@ fi\n ac_config_commands=\"$ac_config_commands default-1\"\n \n \n+\n+subdirs=\"$subdirs plugin\"\n+\n+\n ac_ext=c\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n@@ -11094,7 +11100,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11097 \"configure\"\n+#line 11103 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11200,7 +11206,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11203 \"configure\"\n+#line 11209 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -16950,6 +16956,151 @@ if test \"$no_create\" != yes; then\n   # would make configure fail if this is the last instruction.\n   $ac_cs_success || as_fn_exit $?\n fi\n+\n+#\n+# CONFIG_SUBDIRS section.\n+#\n+if test \"$no_recursion\" != yes; then\n+\n+  # Remove --cache-file, --srcdir, and --disable-option-checking arguments\n+  # so they do not pile up.\n+  ac_sub_configure_args=\n+  ac_prev=\n+  eval \"set x $ac_configure_args\"\n+  shift\n+  for ac_arg\n+  do\n+    if test -n \"$ac_prev\"; then\n+      ac_prev=\n+      continue\n+    fi\n+    case $ac_arg in\n+    -cache-file | --cache-file | --cache-fil | --cache-fi \\\n+    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)\n+      ac_prev=cache_file ;;\n+    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \\\n+    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* \\\n+    | --c=*)\n+      ;;\n+    --config-cache | -C)\n+      ;;\n+    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n+      ac_prev=srcdir ;;\n+    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n+      ;;\n+    -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)\n+      ac_prev=prefix ;;\n+    -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)\n+      ;;\n+    --disable-option-checking)\n+      ;;\n+    *)\n+      case $ac_arg in\n+      *\\'*) ac_arg=`$as_echo \"$ac_arg\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"` ;;\n+      esac\n+      as_fn_append ac_sub_configure_args \" '$ac_arg'\" ;;\n+    esac\n+  done\n+\n+  # Always prepend --prefix to ensure using the same prefix\n+  # in subdir configurations.\n+  ac_arg=\"--prefix=$prefix\"\n+  case $ac_arg in\n+  *\\'*) ac_arg=`$as_echo \"$ac_arg\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"` ;;\n+  esac\n+  ac_sub_configure_args=\"'$ac_arg' $ac_sub_configure_args\"\n+\n+  # Pass --silent\n+  if test \"$silent\" = yes; then\n+    ac_sub_configure_args=\"--silent $ac_sub_configure_args\"\n+  fi\n+\n+  # Always prepend --disable-option-checking to silence warnings, since\n+  # different subdirs can have different --enable and --with options.\n+  ac_sub_configure_args=\"--disable-option-checking $ac_sub_configure_args\"\n+\n+  ac_popdir=`pwd`\n+  for ac_dir in : $subdirs; do test \"x$ac_dir\" = x: && continue\n+\n+    # Do not complain, so a configure script can configure whichever\n+    # parts of a large source tree are present.\n+    test -d \"$srcdir/$ac_dir\" || continue\n+\n+    ac_msg=\"=== configuring in $ac_dir (`pwd`/$ac_dir)\"\n+    $as_echo \"$as_me:${as_lineno-$LINENO}: $ac_msg\" >&5\n+    $as_echo \"$ac_msg\" >&6\n+    as_dir=\"$ac_dir\"; as_fn_mkdir_p\n+    ac_builddir=.\n+\n+case \"$ac_dir\" in\n+.) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;\n+*)\n+  ac_dir_suffix=/`$as_echo \"$ac_dir\" | sed 's|^\\.[\\\\/]||'`\n+  # A \"..\" for each directory in $ac_dir_suffix.\n+  ac_top_builddir_sub=`$as_echo \"$ac_dir_suffix\" | sed 's|/[^\\\\/]*|/..|g;s|/||'`\n+  case $ac_top_builddir_sub in\n+  \"\") ac_top_builddir_sub=. ac_top_build_prefix= ;;\n+  *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;\n+  esac ;;\n+esac\n+ac_abs_top_builddir=$ac_pwd\n+ac_abs_builddir=$ac_pwd$ac_dir_suffix\n+# for backward compatibility:\n+ac_top_builddir=$ac_top_build_prefix\n+\n+case $srcdir in\n+  .)  # We are building in place.\n+    ac_srcdir=.\n+    ac_top_srcdir=$ac_top_builddir_sub\n+    ac_abs_top_srcdir=$ac_pwd ;;\n+  [\\\\/]* | ?:[\\\\/]* )  # Absolute name.\n+    ac_srcdir=$srcdir$ac_dir_suffix;\n+    ac_top_srcdir=$srcdir\n+    ac_abs_top_srcdir=$srcdir ;;\n+  *) # Relative name.\n+    ac_srcdir=$ac_top_build_prefix$srcdir$ac_dir_suffix\n+    ac_top_srcdir=$ac_top_build_prefix$srcdir\n+    ac_abs_top_srcdir=$ac_pwd/$srcdir ;;\n+esac\n+ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix\n+\n+\n+    cd \"$ac_dir\"\n+\n+    # Check for guested configure; otherwise get Cygnus style configure.\n+    if test -f \"$ac_srcdir/configure.gnu\"; then\n+      ac_sub_configure=$ac_srcdir/configure.gnu\n+    elif test -f \"$ac_srcdir/configure\"; then\n+      ac_sub_configure=$ac_srcdir/configure\n+    elif test -f \"$ac_srcdir/configure.in\"; then\n+      # This should be Cygnus configure.\n+      ac_sub_configure=$ac_aux_dir/configure\n+    else\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: no configuration information is in $ac_dir\" >&5\n+$as_echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2;}\n+      ac_sub_configure=\n+    fi\n+\n+    # The recursion is here.\n+    if test -n \"$ac_sub_configure\"; then\n+      # Make the cache file name correct relative to the subdirectory.\n+      case $cache_file in\n+      [\\\\/]* | ?:[\\\\/]* ) ac_sub_cache_file=$cache_file ;;\n+      *) # Relative name.\n+\tac_sub_cache_file=$ac_top_build_prefix$cache_file ;;\n+      esac\n+\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir\" >&5\n+$as_echo \"$as_me: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir\" >&6;}\n+      # The eval makes quoting arguments work.\n+      eval \"\\$SHELL \\\"\\$ac_sub_configure\\\" $ac_sub_configure_args \\\n+\t   --cache-file=\\\"\\$ac_sub_cache_file\\\" --srcdir=\\\"\\$ac_srcdir\\\"\" ||\n+\tas_fn_error \"$ac_sub_configure failed for $ac_dir\" \"$LINENO\" 5\n+    fi\n+\n+    cd \"$ac_popdir\"\n+  done\n+fi\n if test -n \"$ac_unrecognized_opts\" && test \"$enable_option_checking\" != no; then\n   { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts\" >&5\n $as_echo \"$as_me: WARNING: unrecognized options: $ac_unrecognized_opts\" >&2;}"}, {"sha": "81fae8f9441c071b161015f126fd04a99de21b0f", "filename": "liboffloadmic/configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fconfigure.ac?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -42,6 +42,7 @@ AC_PROG_CC\n AC_PROG_CXX\n AC_CONFIG_FILES([Makefile liboffloadmic_host.spec liboffloadmic_target.spec])\n AM_ENABLE_MULTILIB(, ..)\n+AC_CONFIG_SUBDIRS(plugin)\n AC_FUNC_ALLOCA\n AC_CHECK_HEADERS([mm_malloc.h], [], [AC_MSG_ERROR([\"Couldn't find mm_malloc.h\"])])\n AC_CHECK_FUNCS([__secure_getenv secure_getenv])"}, {"sha": "0baf70de935671109b6554f7c1bde547906d5055", "filename": "liboffloadmic/plugin/Makefile.am", "status": "added", "additions": 123, "deletions": 0, "changes": 123, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fplugin%2FMakefile.am?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -0,0 +1,123 @@\n+# Plugin for offload execution on Intel MIC devices.\n+#\n+# Copyright (C) 2014 Free Software Foundation, Inc.\n+#\n+# Contributed by Ilya Verbin <ilya.verbin@intel.com> and\n+# Andrey Turetskiy <andrey.turetskiy@intel.com>.\n+#\n+# This file is part of the GNU OpenMP Library (libgomp).\n+#\n+# Libgomp is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+# more details.\n+#\n+# Under Section 7 of GPL version 3, you are granted additional\n+# permissions described in the GCC Runtime Library Exception, version\n+# 3.1, as published by the Free Software Foundation.\n+#\n+# You should have received a copy of the GNU General Public License and\n+# a copy of the GCC Runtime Library Exception along with this program;\n+# see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+# <http://www.gnu.org/licenses/>.\n+\n+\n+AUTOMAKE_OPTIONS = foreign\n+ACLOCAL_AMFLAGS = -I ../.. -I ../../config\n+\n+# Directories\n+build_dir = $(top_builddir)\n+source_dir = $(top_srcdir)\n+coi_inc_dir = $(top_srcdir)/../include/coi\n+myo_inc_dir = $(top_srcdir)/../include/myo\n+libgomp_src_dir = $(top_srcdir)/../../libgomp\n+libgomp_dir = $(build_dir)/../../libgomp\n+liboffload_src_dir = $(top_srcdir)/../runtime\n+liboffload_dir = $(top_builddir)/..\n+\n+# May be used by toolexeclibdir.\n+gcc_version := $(shell cat $(top_srcdir)/../../gcc/BASE-VER)\n+libsubincludedir = $(libdir)/gcc/$(target_alias)/$(gcc_version)$(MULTISUBDIR)/include\n+# Search for main_target_image.h in these directories\n+target_prefix_dir = $(libdir)/gcc/$(accel_target)/$(gcc_version)$(MULTISUBDIR)\n+target_build_dir = $(accel_search_dir)/$(accel_target)$(MULTISUBDIR)/liboffloadmic/plugin\n+target_install_dir = $(accel_search_dir)/lib/gcc/$(accel_target)/$(gcc_version)$(MULTISUBDIR)\n+\n+if PLUGIN_HOST\n+  toolexeclib_LTLIBRARIES = libgomp-plugin-intelmic.la\n+  libgomp_plugin_intelmic_la_SOURCES = libgomp-plugin-intelmic.cpp\n+  libgomp_plugin_intelmic_la_CPPFLAGS = $(CPPFLAGS) -DLINUX -DCOI_LIBRARY_VERSION=2 -DMYO_SUPPORT -DOFFLOAD_DEBUG=1 -DSEP_SUPPORT -DTIMING_SUPPORT -DHOST_LIBRARY=1 -I$(coi_inc_dir) -I$(myo_inc_dir) -I$(liboffload_src_dir) -I$(libgomp_src_dir) -I$(libgomp_dir) -I$(target_prefix_dir)/include -I$(target_build_dir) -I$(target_install_dir)/include\n+  libgomp_plugin_intelmic_la_LDFLAGS = -L$(liboffload_dir)/.libs -loffloadmic_host -version-info 1:0:0\n+else # PLUGIN_TARGET\n+  plugin_includedir = $(libsubincludedir)\n+  plugin_include_HEADERS = main_target_image.h\n+  AM_CPPFLAGS = $(CPPFLAGS) -DLINUX -DCOI_LIBRARY_VERSION=2 -DMYO_SUPPORT -DOFFLOAD_DEBUG=1 -DSEP_SUPPORT -DTIMING_SUPPORT -DHOST_LIBRARY=0 -I$(coi_inc_dir) -I$(myo_inc_dir) -I$(liboffload_src_dir) -I$(libgomp_dir)\n+  AM_CXXFLAGS = $(CXXFLAGS)\n+  AM_LDFLAGS = -L$(liboffload_dir)/.libs -L$(libgomp_dir)/.libs -loffloadmic_target -lcoi_device -lmyo-service -lgomp -rdynamic\n+endif\n+\n+main_target_image.h: offload_target_main\n+\t@echo -n \"const int image_size = \" > $@\n+\t@stat -c '%s' $< >> $@\n+\t@echo \";\" >> $@\n+\t@echo \"struct MainTargetImage {\" >> $@\n+\t@echo \"  int64_t size;\" >> $@\n+\t@echo \"  char name[sizeof \\\"offload_target_main\\\"];\" >> $@\n+\t@echo \"  char data[image_size];\" >> $@\n+\t@echo \"};\" >> $@\n+\t@echo \"extern \\\"C\\\" const MainTargetImage main_target_image = {\" >> $@\n+\t@echo \"  image_size, \\\"offload_target_main\\\",\" >> $@\n+\t@cat $< | xxd -include >> $@\n+\t@echo \"};\" >> $@\n+\n+offload_target_main: $(liboffload_dir)/ofldbegin.o offload_target_main.o $(liboffload_dir)/ofldend.o\n+\t$(CXX) $(AM_LDFLAGS) $^ -o $@\n+\n+offload_target_main.o: offload_target_main.cpp\n+\t$(CXX) $(AM_CXXFLAGS) $(AM_CPPFLAGS) -c $< -o $@\n+\n+# Work around what appears to be a GNU make bug handling MAKEFLAGS\n+# values defined in terms of make variables, as is the case for CC and\n+# friends when we are called from the top level Makefile.\n+AM_MAKEFLAGS = \\\n+       \"AR_FLAGS=$(AR_FLAGS)\" \\\n+       \"CC_FOR_BUILD=$(CC_FOR_BUILD)\" \\\n+       \"CFLAGS=$(CFLAGS)\" \\\n+       \"CXXFLAGS=$(CXXFLAGS)\" \\\n+       \"CFLAGS_FOR_BUILD=$(CFLAGS_FOR_BUILD)\" \\\n+       \"CFLAGS_FOR_TARGET=$(CFLAGS_FOR_TARGET)\" \\\n+       \"INSTALL=$(INSTALL)\" \\\n+       \"INSTALL_DATA=$(INSTALL_DATA)\" \\\n+       \"INSTALL_PROGRAM=$(INSTALL_PROGRAM)\" \\\n+       \"INSTALL_SCRIPT=$(INSTALL_SCRIPT)\" \\\n+       \"JC1FLAGS=$(JC1FLAGS)\" \\\n+       \"LDFLAGS=$(LDFLAGS)\" \\\n+       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n+       \"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)\" \\\n+       \"MAKE=$(MAKE)\" \\\n+       \"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \\\n+       \"PICFLAG=$(PICFLAG)\" \\\n+       \"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)\" \\\n+       \"SHELL=$(SHELL)\" \\\n+       \"RUNTESTFLAGS=$(RUNTESTFLAGS)\" \\\n+       \"exec_prefix=$(exec_prefix)\" \\\n+       \"infodir=$(infodir)\" \\\n+       \"libdir=$(libdir)\" \\\n+       \"prefix=$(prefix)\" \\\n+       \"includedir=$(includedir)\" \\\n+       \"AR=$(AR)\" \\\n+       \"AS=$(AS)\" \\\n+       \"LD=$(LD)\" \\\n+       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n+       \"NM=$(NM)\" \\\n+       \"PICFLAG=$(PICFLAG)\" \\\n+       \"RANLIB=$(RANLIB)\" \\\n+       \"DESTDIR=$(DESTDIR)\"\n+\n+MAKEOVERRIDES =\n+"}, {"sha": "5ba750a3277d7ce2b7bb7419474b80b5055422e8", "filename": "liboffloadmic/plugin/Makefile.in", "status": "added", "additions": 697, "deletions": 0, "changes": 697, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fplugin%2FMakefile.in?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -0,0 +1,697 @@\n+# Makefile.in generated by automake 1.11.1 from Makefile.am.\n+# @configure_input@\n+\n+# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,\n+# 2003, 2004, 2005, 2006, 2007, 2008, 2009  Free Software Foundation,\n+# Inc.\n+# This Makefile.in is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+# PARTICULAR PURPOSE.\n+\n+@SET_MAKE@\n+\n+# Plugin for offload execution on Intel MIC devices.\n+#\n+# Copyright (C) 2014 Free Software Foundation, Inc.\n+#\n+# Contributed by Ilya Verbin <ilya.verbin@intel.com> and\n+# Andrey Turetskiy <andrey.turetskiy@intel.com>.\n+#\n+# This file is part of the GNU OpenMP Library (libgomp).\n+#\n+# Libgomp is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+# more details.\n+#\n+# Under Section 7 of GPL version 3, you are granted additional\n+# permissions described in the GCC Runtime Library Exception, version\n+# 3.1, as published by the Free Software Foundation.\n+#\n+# You should have received a copy of the GNU General Public License and\n+# a copy of the GCC Runtime Library Exception along with this program;\n+# see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+# <http://www.gnu.org/licenses/>.\n+\n+\n+VPATH = @srcdir@\n+pkgdatadir = $(datadir)/@PACKAGE@\n+pkgincludedir = $(includedir)/@PACKAGE@\n+pkglibdir = $(libdir)/@PACKAGE@\n+pkglibexecdir = $(libexecdir)/@PACKAGE@\n+am__cd = CDPATH=\"$${ZSH_VERSION+.}$(PATH_SEPARATOR)\" && cd\n+install_sh_DATA = $(install_sh) -c -m 644\n+install_sh_PROGRAM = $(install_sh) -c\n+install_sh_SCRIPT = $(install_sh) -c\n+INSTALL_HEADER = $(INSTALL_DATA)\n+transform = $(program_transform_name)\n+NORMAL_INSTALL = :\n+PRE_INSTALL = :\n+POST_INSTALL = :\n+NORMAL_UNINSTALL = :\n+PRE_UNINSTALL = :\n+POST_UNINSTALL = :\n+build_triplet = @build@\n+host_triplet = @host@\n+target_triplet = @target@\n+subdir = .\n+DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/Makefile.am \\\n+\t$(top_srcdir)/configure $(am__configure_deps) \\\n+\t$(srcdir)/../../mkinstalldirs $(srcdir)/../../depcomp \\\n+\t$(am__plugin_include_HEADERS_DIST)\n+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n+am__aclocal_m4_deps = $(top_srcdir)/../../config/depstand.m4 \\\n+\t$(top_srcdir)/../../config/lead-dot.m4 \\\n+\t$(top_srcdir)/../../config/multi.m4 \\\n+\t$(top_srcdir)/../../config/override.m4 \\\n+\t$(top_srcdir)/../../libtool.m4 \\\n+\t$(top_srcdir)/../../ltoptions.m4 \\\n+\t$(top_srcdir)/../../ltsugar.m4 \\\n+\t$(top_srcdir)/../../ltversion.m4 \\\n+\t$(top_srcdir)/../../lt~obsolete.m4 $(top_srcdir)/configure.ac\n+am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n+\t$(ACLOCAL_M4)\n+am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \\\n+ configure.lineno config.status.lineno\n+mkinstalldirs = $(SHELL) $(top_srcdir)/../../mkinstalldirs\n+CONFIG_CLEAN_FILES =\n+CONFIG_CLEAN_VPATH_FILES =\n+am__vpath_adj_setup = srcdirstrip=`echo \"$(srcdir)\" | sed 's|.|.|g'`;\n+am__vpath_adj = case $$p in \\\n+    $(srcdir)/*) f=`echo \"$$p\" | sed \"s|^$$srcdirstrip/||\"`;; \\\n+    *) f=$$p;; \\\n+  esac;\n+am__strip_dir = f=`echo $$p | sed -e 's|^.*/||'`;\n+am__install_max = 40\n+am__nobase_strip_setup = \\\n+  srcdirstrip=`echo \"$(srcdir)\" | sed 's/[].[^$$\\\\*|]/\\\\\\\\&/g'`\n+am__nobase_strip = \\\n+  for p in $$list; do echo \"$$p\"; done | sed -e \"s|$$srcdirstrip/||\"\n+am__nobase_list = $(am__nobase_strip_setup); \\\n+  for p in $$list; do echo \"$$p $$p\"; done | \\\n+  sed \"s| $$srcdirstrip/| |;\"' / .*\\//!s/ .*/ ./; s,\\( .*\\)/[^/]*$$,\\1,' | \\\n+  $(AWK) 'BEGIN { files[\".\"] = \"\" } { files[$$2] = files[$$2] \" \" $$1; \\\n+    if (++n[$$2] == $(am__install_max)) \\\n+      { print $$2, files[$$2]; n[$$2] = 0; files[$$2] = \"\" } } \\\n+    END { for (dir in files) print dir, files[dir] }'\n+am__base_list = \\\n+  sed '$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;s/\\n/ /g' | \\\n+  sed '$$!N;$$!N;$$!N;$$!N;s/\\n/ /g'\n+am__installdirs = \"$(DESTDIR)$(toolexeclibdir)\" \\\n+\t\"$(DESTDIR)$(plugin_includedir)\"\n+LTLIBRARIES = $(toolexeclib_LTLIBRARIES)\n+libgomp_plugin_intelmic_la_LIBADD =\n+@PLUGIN_HOST_TRUE@am_libgomp_plugin_intelmic_la_OBJECTS = libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.lo\n+libgomp_plugin_intelmic_la_OBJECTS =  \\\n+\t$(am_libgomp_plugin_intelmic_la_OBJECTS)\n+libgomp_plugin_intelmic_la_LINK = $(LIBTOOL) --tag=CXX \\\n+\t$(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link $(CXXLD) \\\n+\t$(AM_CXXFLAGS) $(CXXFLAGS) \\\n+\t$(libgomp_plugin_intelmic_la_LDFLAGS) $(LDFLAGS) -o $@\n+@PLUGIN_HOST_TRUE@am_libgomp_plugin_intelmic_la_rpath = -rpath \\\n+@PLUGIN_HOST_TRUE@\t$(toolexeclibdir)\n+DEFAULT_INCLUDES = -I.@am__isrc@\n+depcomp = $(SHELL) $(top_srcdir)/../../depcomp\n+am__depfiles_maybe = depfiles\n+am__mv = mv -f\n+CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \\\n+\t$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)\n+LTCXXCOMPILE = $(LIBTOOL) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \\\n+\t--mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \\\n+\t$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)\n+CXXLD = $(CXX)\n+CXXLINK = $(LIBTOOL) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \\\n+\t--mode=link $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) $(AM_LDFLAGS) \\\n+\t$(LDFLAGS) -o $@\n+SOURCES = $(libgomp_plugin_intelmic_la_SOURCES)\n+MULTISRCTOP = \n+MULTIBUILDTOP = \n+MULTIDIRS = \n+MULTISUBDIR = \n+MULTIDO = true\n+MULTICLEAN = true\n+am__plugin_include_HEADERS_DIST = main_target_image.h\n+HEADERS = $(plugin_include_HEADERS)\n+ETAGS = etags\n+CTAGS = ctags\n+ACLOCAL = @ACLOCAL@\n+AMTAR = @AMTAR@\n+AR = @AR@\n+AUTOCONF = @AUTOCONF@\n+AUTOHEADER = @AUTOHEADER@\n+AUTOMAKE = @AUTOMAKE@\n+AWK = @AWK@\n+CC = @CC@\n+CCDEPMODE = @CCDEPMODE@\n+CFLAGS = @CFLAGS@\n+CPP = @CPP@\n+CPPFLAGS = @CPPFLAGS@\n+CXX = @CXX@\n+CXXCPP = @CXXCPP@\n+CXXDEPMODE = @CXXDEPMODE@\n+CXXFLAGS = @CXXFLAGS@\n+CYGPATH_W = @CYGPATH_W@\n+DEFS = @DEFS@\n+DEPDIR = @DEPDIR@\n+DSYMUTIL = @DSYMUTIL@\n+DUMPBIN = @DUMPBIN@\n+ECHO_C = @ECHO_C@\n+ECHO_N = @ECHO_N@\n+ECHO_T = @ECHO_T@\n+EGREP = @EGREP@\n+EXEEXT = @EXEEXT@\n+FGREP = @FGREP@\n+GREP = @GREP@\n+INSTALL = @INSTALL@\n+INSTALL_DATA = @INSTALL_DATA@\n+INSTALL_PROGRAM = @INSTALL_PROGRAM@\n+INSTALL_SCRIPT = @INSTALL_SCRIPT@\n+INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LD = @LD@\n+LDFLAGS = @LDFLAGS@\n+LIBOBJS = @LIBOBJS@\n+LIBS = @LIBS@\n+LIBTOOL = @LIBTOOL@\n+LIPO = @LIPO@\n+LN_S = @LN_S@\n+LTLIBOBJS = @LTLIBOBJS@\n+MAINT = @MAINT@\n+MAKEINFO = @MAKEINFO@\n+MKDIR_P = @MKDIR_P@\n+NM = @NM@\n+NMEDIT = @NMEDIT@\n+OBJDUMP = @OBJDUMP@\n+OBJEXT = @OBJEXT@\n+OTOOL = @OTOOL@\n+OTOOL64 = @OTOOL64@\n+PACKAGE = @PACKAGE@\n+PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@\n+PACKAGE_NAME = @PACKAGE_NAME@\n+PACKAGE_STRING = @PACKAGE_STRING@\n+PACKAGE_TARNAME = @PACKAGE_TARNAME@\n+PACKAGE_URL = @PACKAGE_URL@\n+PACKAGE_VERSION = @PACKAGE_VERSION@\n+PATH_SEPARATOR = @PATH_SEPARATOR@\n+RANLIB = @RANLIB@\n+SED = @SED@\n+SET_MAKE = @SET_MAKE@\n+SHELL = @SHELL@\n+STRIP = @STRIP@\n+VERSION = @VERSION@\n+abs_builddir = @abs_builddir@\n+abs_srcdir = @abs_srcdir@\n+abs_top_builddir = @abs_top_builddir@\n+abs_top_srcdir = @abs_top_srcdir@\n+ac_ct_CC = @ac_ct_CC@\n+ac_ct_CXX = @ac_ct_CXX@\n+ac_ct_DUMPBIN = @ac_ct_DUMPBIN@\n+accel_search_dir = @accel_search_dir@\n+accel_target = @accel_target@\n+am__include = @am__include@\n+am__leading_dot = @am__leading_dot@\n+am__quote = @am__quote@\n+am__tar = @am__tar@\n+am__untar = @am__untar@\n+bindir = @bindir@\n+build = @build@\n+build_alias = @build_alias@\n+build_cpu = @build_cpu@\n+build_os = @build_os@\n+build_vendor = @build_vendor@\n+builddir = @builddir@\n+datadir = @datadir@\n+datarootdir = @datarootdir@\n+docdir = @docdir@\n+dvidir = @dvidir@\n+exec_prefix = @exec_prefix@\n+host = @host@\n+host_alias = @host_alias@\n+host_cpu = @host_cpu@\n+host_os = @host_os@\n+host_vendor = @host_vendor@\n+htmldir = @htmldir@\n+includedir = @includedir@\n+infodir = @infodir@\n+install_sh = @install_sh@\n+libdir = @libdir@\n+libexecdir = @libexecdir@\n+localedir = @localedir@\n+localstatedir = @localstatedir@\n+mandir = @mandir@\n+mkdir_p = @mkdir_p@\n+multi_basedir = @multi_basedir@\n+oldincludedir = @oldincludedir@\n+pdfdir = @pdfdir@\n+prefix = @prefix@\n+program_transform_name = @program_transform_name@\n+psdir = @psdir@\n+sbindir = @sbindir@\n+sharedstatedir = @sharedstatedir@\n+srcdir = @srcdir@\n+sysconfdir = @sysconfdir@\n+target = @target@\n+target_alias = @target_alias@\n+target_cpu = @target_cpu@\n+target_os = @target_os@\n+target_vendor = @target_vendor@\n+toolexecdir = @toolexecdir@\n+toolexeclibdir = @toolexeclibdir@\n+top_build_prefix = @top_build_prefix@\n+top_builddir = @top_builddir@\n+top_srcdir = @top_srcdir@\n+AUTOMAKE_OPTIONS = foreign\n+ACLOCAL_AMFLAGS = -I ../.. -I ../../config\n+\n+# Directories\n+build_dir = $(top_builddir)\n+source_dir = $(top_srcdir)\n+coi_inc_dir = $(top_srcdir)/../include/coi\n+myo_inc_dir = $(top_srcdir)/../include/myo\n+libgomp_src_dir = $(top_srcdir)/../../libgomp\n+libgomp_dir = $(build_dir)/../../libgomp\n+liboffload_src_dir = $(top_srcdir)/../runtime\n+liboffload_dir = $(top_builddir)/..\n+\n+# May be used by toolexeclibdir.\n+gcc_version := $(shell cat $(top_srcdir)/../../gcc/BASE-VER)\n+libsubincludedir = $(libdir)/gcc/$(target_alias)/$(gcc_version)$(MULTISUBDIR)/include\n+# Search for main_target_image.h in these directories\n+target_prefix_dir = $(libdir)/gcc/$(accel_target)/$(gcc_version)$(MULTISUBDIR)\n+target_build_dir = $(accel_search_dir)/$(accel_target)$(MULTISUBDIR)/liboffloadmic/plugin\n+target_install_dir = $(accel_search_dir)/lib/gcc/$(accel_target)/$(gcc_version)$(MULTISUBDIR)\n+@PLUGIN_HOST_TRUE@toolexeclib_LTLIBRARIES = libgomp-plugin-intelmic.la\n+@PLUGIN_HOST_TRUE@libgomp_plugin_intelmic_la_SOURCES = libgomp-plugin-intelmic.cpp\n+@PLUGIN_HOST_TRUE@libgomp_plugin_intelmic_la_CPPFLAGS = $(CPPFLAGS) -DLINUX -DCOI_LIBRARY_VERSION=2 -DMYO_SUPPORT -DOFFLOAD_DEBUG=1 -DSEP_SUPPORT -DTIMING_SUPPORT -DHOST_LIBRARY=1 -I$(coi_inc_dir) -I$(myo_inc_dir) -I$(liboffload_src_dir) -I$(libgomp_src_dir) -I$(libgomp_dir) -I$(target_prefix_dir)/include -I$(target_build_dir) -I$(target_install_dir)/include\n+@PLUGIN_HOST_TRUE@libgomp_plugin_intelmic_la_LDFLAGS = -L$(liboffload_dir)/.libs -loffloadmic_host -version-info 1:0:0\n+@PLUGIN_HOST_FALSE@plugin_includedir = $(libsubincludedir)\n+@PLUGIN_HOST_FALSE@plugin_include_HEADERS = main_target_image.h\n+@PLUGIN_HOST_FALSE@AM_CPPFLAGS = $(CPPFLAGS) -DLINUX -DCOI_LIBRARY_VERSION=2 -DMYO_SUPPORT -DOFFLOAD_DEBUG=1 -DSEP_SUPPORT -DTIMING_SUPPORT -DHOST_LIBRARY=0 -I$(coi_inc_dir) -I$(myo_inc_dir) -I$(liboffload_src_dir) -I$(libgomp_dir)\n+@PLUGIN_HOST_FALSE@AM_CXXFLAGS = $(CXXFLAGS)\n+@PLUGIN_HOST_FALSE@AM_LDFLAGS = -L$(liboffload_dir)/.libs -L$(libgomp_dir)/.libs -loffloadmic_target -lcoi_device -lmyo-service -lgomp -rdynamic\n+\n+# Work around what appears to be a GNU make bug handling MAKEFLAGS\n+# values defined in terms of make variables, as is the case for CC and\n+# friends when we are called from the top level Makefile.\n+AM_MAKEFLAGS = \\\n+       \"AR_FLAGS=$(AR_FLAGS)\" \\\n+       \"CC_FOR_BUILD=$(CC_FOR_BUILD)\" \\\n+       \"CFLAGS=$(CFLAGS)\" \\\n+       \"CXXFLAGS=$(CXXFLAGS)\" \\\n+       \"CFLAGS_FOR_BUILD=$(CFLAGS_FOR_BUILD)\" \\\n+       \"CFLAGS_FOR_TARGET=$(CFLAGS_FOR_TARGET)\" \\\n+       \"INSTALL=$(INSTALL)\" \\\n+       \"INSTALL_DATA=$(INSTALL_DATA)\" \\\n+       \"INSTALL_PROGRAM=$(INSTALL_PROGRAM)\" \\\n+       \"INSTALL_SCRIPT=$(INSTALL_SCRIPT)\" \\\n+       \"JC1FLAGS=$(JC1FLAGS)\" \\\n+       \"LDFLAGS=$(LDFLAGS)\" \\\n+       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n+       \"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)\" \\\n+       \"MAKE=$(MAKE)\" \\\n+       \"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \\\n+       \"PICFLAG=$(PICFLAG)\" \\\n+       \"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)\" \\\n+       \"SHELL=$(SHELL)\" \\\n+       \"RUNTESTFLAGS=$(RUNTESTFLAGS)\" \\\n+       \"exec_prefix=$(exec_prefix)\" \\\n+       \"infodir=$(infodir)\" \\\n+       \"libdir=$(libdir)\" \\\n+       \"prefix=$(prefix)\" \\\n+       \"includedir=$(includedir)\" \\\n+       \"AR=$(AR)\" \\\n+       \"AS=$(AS)\" \\\n+       \"LD=$(LD)\" \\\n+       \"LIBCFLAGS=$(LIBCFLAGS)\" \\\n+       \"NM=$(NM)\" \\\n+       \"PICFLAG=$(PICFLAG)\" \\\n+       \"RANLIB=$(RANLIB)\" \\\n+       \"DESTDIR=$(DESTDIR)\"\n+\n+MAKEOVERRIDES = \n+all: all-am\n+\n+.SUFFIXES:\n+.SUFFIXES: .cpp .lo .o .obj\n+am--refresh:\n+\t@:\n+$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am  $(am__configure_deps)\n+\t@for dep in $?; do \\\n+\t  case '$(am__configure_deps)' in \\\n+\t    *$$dep*) \\\n+\t      echo ' cd $(srcdir) && $(AUTOMAKE) --foreign'; \\\n+\t      $(am__cd) $(srcdir) && $(AUTOMAKE) --foreign \\\n+\t\t&& exit 0; \\\n+\t      exit 1;; \\\n+\t  esac; \\\n+\tdone; \\\n+\techo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign Makefile'; \\\n+\t$(am__cd) $(top_srcdir) && \\\n+\t  $(AUTOMAKE) --foreign Makefile\n+.PRECIOUS: Makefile\n+Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status\n+\t@case '$?' in \\\n+\t  *config.status*) \\\n+\t    echo ' $(SHELL) ./config.status'; \\\n+\t    $(SHELL) ./config.status;; \\\n+\t  *) \\\n+\t    echo ' cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe)'; \\\n+\t    cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe);; \\\n+\tesac;\n+\n+$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n+\t$(SHELL) ./config.status --recheck\n+\n+$(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)\n+\t$(am__cd) $(srcdir) && $(AUTOCONF)\n+$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)\n+\t$(am__cd) $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)\n+$(am__aclocal_m4_deps):\n+install-toolexeclibLTLIBRARIES: $(toolexeclib_LTLIBRARIES)\n+\t@$(NORMAL_INSTALL)\n+\ttest -z \"$(toolexeclibdir)\" || $(MKDIR_P) \"$(DESTDIR)$(toolexeclibdir)\"\n+\t@list='$(toolexeclib_LTLIBRARIES)'; test -n \"$(toolexeclibdir)\" || list=; \\\n+\tlist2=; for p in $$list; do \\\n+\t  if test -f $$p; then \\\n+\t    list2=\"$$list2 $$p\"; \\\n+\t  else :; fi; \\\n+\tdone; \\\n+\ttest -z \"$$list2\" || { \\\n+\t  echo \" $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(toolexeclibdir)'\"; \\\n+\t  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 \"$(DESTDIR)$(toolexeclibdir)\"; \\\n+\t}\n+\n+uninstall-toolexeclibLTLIBRARIES:\n+\t@$(NORMAL_UNINSTALL)\n+\t@list='$(toolexeclib_LTLIBRARIES)'; test -n \"$(toolexeclibdir)\" || list=; \\\n+\tfor p in $$list; do \\\n+\t  $(am__strip_dir) \\\n+\t  echo \" $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=uninstall rm -f '$(DESTDIR)$(toolexeclibdir)/$$f'\"; \\\n+\t  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=uninstall rm -f \"$(DESTDIR)$(toolexeclibdir)/$$f\"; \\\n+\tdone\n+\n+clean-toolexeclibLTLIBRARIES:\n+\t-test -z \"$(toolexeclib_LTLIBRARIES)\" || rm -f $(toolexeclib_LTLIBRARIES)\n+\t@list='$(toolexeclib_LTLIBRARIES)'; for p in $$list; do \\\n+\t  dir=\"`echo $$p | sed -e 's|/[^/]*$$||'`\"; \\\n+\t  test \"$$dir\" != \"$$p\" || dir=.; \\\n+\t  echo \"rm -f \\\"$${dir}/so_locations\\\"\"; \\\n+\t  rm -f \"$${dir}/so_locations\"; \\\n+\tdone\n+libgomp-plugin-intelmic.la: $(libgomp_plugin_intelmic_la_OBJECTS) $(libgomp_plugin_intelmic_la_DEPENDENCIES) \n+\t$(libgomp_plugin_intelmic_la_LINK) $(am_libgomp_plugin_intelmic_la_rpath) $(libgomp_plugin_intelmic_la_OBJECTS) $(libgomp_plugin_intelmic_la_LIBADD) $(LIBS)\n+\n+mostlyclean-compile:\n+\t-rm -f *.$(OBJEXT)\n+\n+distclean-compile:\n+\t-rm -f *.tab.c\n+\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.Plo@am__quote@\n+\n+.cpp.o:\n+@am__fastdepCXX_TRUE@\t$(CXXCOMPILE) -MT $@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@ $<\n+@am__fastdepCXX_TRUE@\t$(am__mv) $(DEPDIR)/$*.Tpo $(DEPDIR)/$*.Po\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tsource='$<' object='$@' libtool=no @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tDEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCXX_FALSE@\t$(CXXCOMPILE) -c -o $@ $<\n+\n+.cpp.obj:\n+@am__fastdepCXX_TRUE@\t$(CXXCOMPILE) -MT $@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@ `$(CYGPATH_W) '$<'`\n+@am__fastdepCXX_TRUE@\t$(am__mv) $(DEPDIR)/$*.Tpo $(DEPDIR)/$*.Po\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tsource='$<' object='$@' libtool=no @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tDEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCXX_FALSE@\t$(CXXCOMPILE) -c -o $@ `$(CYGPATH_W) '$<'`\n+\n+.cpp.lo:\n+@am__fastdepCXX_TRUE@\t$(LTCXXCOMPILE) -MT $@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@ $<\n+@am__fastdepCXX_TRUE@\t$(am__mv) $(DEPDIR)/$*.Tpo $(DEPDIR)/$*.Plo\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tsource='$<' object='$@' libtool=yes @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tDEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCXX_FALSE@\t$(LTCXXCOMPILE) -c -o $@ $<\n+\n+libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.lo: libgomp-plugin-intelmic.cpp\n+@am__fastdepCXX_TRUE@\t$(LIBTOOL)  --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libgomp_plugin_intelmic_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.lo -MD -MP -MF $(DEPDIR)/libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.Tpo -c -o libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.lo `test -f 'libgomp-plugin-intelmic.cpp' || echo '$(srcdir)/'`libgomp-plugin-intelmic.cpp\n+@am__fastdepCXX_TRUE@\t$(am__mv) $(DEPDIR)/libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.Tpo $(DEPDIR)/libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.Plo\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tsource='libgomp-plugin-intelmic.cpp' object='libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.lo' libtool=yes @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCXX_FALSE@\tDEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCXX_FALSE@\t$(LIBTOOL)  --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libgomp_plugin_intelmic_la_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o libgomp_plugin_intelmic_la-libgomp-plugin-intelmic.lo `test -f 'libgomp-plugin-intelmic.cpp' || echo '$(srcdir)/'`libgomp-plugin-intelmic.cpp\n+\n+mostlyclean-libtool:\n+\t-rm -f *.lo\n+\n+clean-libtool:\n+\t-rm -rf .libs _libs\n+\n+distclean-libtool:\n+\t-rm -f libtool config.lt\n+\n+# GNU Make needs to see an explicit $(MAKE) variable in the command it\n+# runs to enable its job server during parallel builds.  Hence the\n+# comments below.\n+all-multi:\n+\t$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do # $(MAKE)\n+install-multi:\n+\t$(MULTIDO) $(AM_MAKEFLAGS) DO=install multi-do # $(MAKE)\n+\n+mostlyclean-multi:\n+\t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=mostlyclean multi-clean # $(MAKE)\n+clean-multi:\n+\t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=clean multi-clean # $(MAKE)\n+distclean-multi:\n+\t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=distclean multi-clean # $(MAKE)\n+maintainer-clean-multi:\n+\t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean # $(MAKE)\n+install-plugin_includeHEADERS: $(plugin_include_HEADERS)\n+\t@$(NORMAL_INSTALL)\n+\ttest -z \"$(plugin_includedir)\" || $(MKDIR_P) \"$(DESTDIR)$(plugin_includedir)\"\n+\t@list='$(plugin_include_HEADERS)'; test -n \"$(plugin_includedir)\" || list=; \\\n+\tfor p in $$list; do \\\n+\t  if test -f \"$$p\"; then d=; else d=\"$(srcdir)/\"; fi; \\\n+\t  echo \"$$d$$p\"; \\\n+\tdone | $(am__base_list) | \\\n+\twhile read files; do \\\n+\t  echo \" $(INSTALL_HEADER) $$files '$(DESTDIR)$(plugin_includedir)'\"; \\\n+\t  $(INSTALL_HEADER) $$files \"$(DESTDIR)$(plugin_includedir)\" || exit $$?; \\\n+\tdone\n+\n+uninstall-plugin_includeHEADERS:\n+\t@$(NORMAL_UNINSTALL)\n+\t@list='$(plugin_include_HEADERS)'; test -n \"$(plugin_includedir)\" || list=; \\\n+\tfiles=`for p in $$list; do echo $$p; done | sed -e 's|^.*/||'`; \\\n+\ttest -n \"$$files\" || exit 0; \\\n+\techo \" ( cd '$(DESTDIR)$(plugin_includedir)' && rm -f\" $$files \")\"; \\\n+\tcd \"$(DESTDIR)$(plugin_includedir)\" && rm -f $$files\n+\n+ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)\n+\tlist='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \\\n+\tunique=`for i in $$list; do \\\n+\t    if test -f \"$$i\"; then echo $$i; else echo $(srcdir)/$$i; fi; \\\n+\t  done | \\\n+\t  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \\\n+\t      END { if (nonempty) { for (i in files) print i; }; }'`; \\\n+\tmkid -fID $$unique\n+tags: TAGS\n+\n+TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \\\n+\t\t$(TAGS_FILES) $(LISP)\n+\tset x; \\\n+\there=`pwd`; \\\n+\tlist='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \\\n+\tunique=`for i in $$list; do \\\n+\t    if test -f \"$$i\"; then echo $$i; else echo $(srcdir)/$$i; fi; \\\n+\t  done | \\\n+\t  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \\\n+\t      END { if (nonempty) { for (i in files) print i; }; }'`; \\\n+\tshift; \\\n+\tif test -z \"$(ETAGS_ARGS)$$*$$unique\"; then :; else \\\n+\t  test -n \"$$unique\" || unique=$$empty_fix; \\\n+\t  if test $$# -gt 0; then \\\n+\t    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \\\n+\t      \"$$@\" $$unique; \\\n+\t  else \\\n+\t    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \\\n+\t      $$unique; \\\n+\t  fi; \\\n+\tfi\n+ctags: CTAGS\n+CTAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \\\n+\t\t$(TAGS_FILES) $(LISP)\n+\tlist='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \\\n+\tunique=`for i in $$list; do \\\n+\t    if test -f \"$$i\"; then echo $$i; else echo $(srcdir)/$$i; fi; \\\n+\t  done | \\\n+\t  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \\\n+\t      END { if (nonempty) { for (i in files) print i; }; }'`; \\\n+\ttest -z \"$(CTAGS_ARGS)$$unique\" \\\n+\t  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \\\n+\t     $$unique\n+\n+GTAGS:\n+\there=`$(am__cd) $(top_builddir) && pwd` \\\n+\t  && $(am__cd) $(top_srcdir) \\\n+\t  && gtags -i $(GTAGS_ARGS) \"$$here\"\n+\n+distclean-tags:\n+\t-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags\n+check-am: all-am\n+check: check-am\n+all-am: Makefile $(LTLIBRARIES) all-multi $(HEADERS)\n+installdirs:\n+\tfor dir in \"$(DESTDIR)$(toolexeclibdir)\" \"$(DESTDIR)$(plugin_includedir)\"; do \\\n+\t  test -z \"$$dir\" || $(MKDIR_P) \"$$dir\"; \\\n+\tdone\n+install: install-am\n+install-exec: install-exec-am\n+install-data: install-data-am\n+uninstall: uninstall-am\n+\n+install-am: all-am\n+\t@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am\n+\n+installcheck: installcheck-am\n+install-strip:\n+\t$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" \\\n+\t  install_sh_PROGRAM=\"$(INSTALL_STRIP_PROGRAM)\" INSTALL_STRIP_FLAG=-s \\\n+\t  `test -z '$(STRIP)' || \\\n+\t    echo \"INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'\"` install\n+mostlyclean-generic:\n+\n+clean-generic:\n+\n+distclean-generic:\n+\t-test -z \"$(CONFIG_CLEAN_FILES)\" || rm -f $(CONFIG_CLEAN_FILES)\n+\t-test . = \"$(srcdir)\" || test -z \"$(CONFIG_CLEAN_VPATH_FILES)\" || rm -f $(CONFIG_CLEAN_VPATH_FILES)\n+\n+maintainer-clean-generic:\n+\t@echo \"This command is intended for maintainers to use\"\n+\t@echo \"it deletes files that may require special tools to rebuild.\"\n+clean: clean-am clean-multi\n+\n+clean-am: clean-generic clean-libtool clean-toolexeclibLTLIBRARIES \\\n+\tmostlyclean-am\n+\n+distclean: distclean-am distclean-multi\n+\t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n+\t-rm -rf ./$(DEPDIR)\n+\t-rm -f Makefile\n+distclean-am: clean-am distclean-compile distclean-generic \\\n+\tdistclean-libtool distclean-tags\n+\n+dvi: dvi-am\n+\n+dvi-am:\n+\n+html: html-am\n+\n+html-am:\n+\n+info: info-am\n+\n+info-am:\n+\n+install-data-am: install-plugin_includeHEADERS\n+\n+install-dvi: install-dvi-am\n+\n+install-dvi-am:\n+\n+install-exec-am: install-multi install-toolexeclibLTLIBRARIES\n+\n+install-html: install-html-am\n+\n+install-html-am:\n+\n+install-info: install-info-am\n+\n+install-info-am:\n+\n+install-man:\n+\n+install-pdf: install-pdf-am\n+\n+install-pdf-am:\n+\n+install-ps: install-ps-am\n+\n+install-ps-am:\n+\n+installcheck-am:\n+\n+maintainer-clean: maintainer-clean-am maintainer-clean-multi\n+\t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n+\t-rm -rf $(top_srcdir)/autom4te.cache\n+\t-rm -rf ./$(DEPDIR)\n+\t-rm -f Makefile\n+maintainer-clean-am: distclean-am maintainer-clean-generic\n+\n+mostlyclean: mostlyclean-am mostlyclean-multi\n+\n+mostlyclean-am: mostlyclean-compile mostlyclean-generic \\\n+\tmostlyclean-libtool\n+\n+pdf: pdf-am\n+\n+pdf-am:\n+\n+ps: ps-am\n+\n+ps-am:\n+\n+uninstall-am: uninstall-plugin_includeHEADERS \\\n+\tuninstall-toolexeclibLTLIBRARIES\n+\n+.MAKE: all-multi clean-multi distclean-multi install-am install-multi \\\n+\tinstall-strip maintainer-clean-multi mostlyclean-multi\n+\n+.PHONY: CTAGS GTAGS all all-am all-multi am--refresh check check-am \\\n+\tclean clean-generic clean-libtool clean-multi \\\n+\tclean-toolexeclibLTLIBRARIES ctags distclean distclean-compile \\\n+\tdistclean-generic distclean-libtool distclean-multi \\\n+\tdistclean-tags dvi dvi-am html html-am info info-am install \\\n+\tinstall-am install-data install-data-am install-dvi \\\n+\tinstall-dvi-am install-exec install-exec-am install-html \\\n+\tinstall-html-am install-info install-info-am install-man \\\n+\tinstall-multi install-pdf install-pdf-am \\\n+\tinstall-plugin_includeHEADERS install-ps install-ps-am \\\n+\tinstall-strip install-toolexeclibLTLIBRARIES installcheck \\\n+\tinstallcheck-am installdirs maintainer-clean \\\n+\tmaintainer-clean-generic maintainer-clean-multi mostlyclean \\\n+\tmostlyclean-compile mostlyclean-generic mostlyclean-libtool \\\n+\tmostlyclean-multi pdf pdf-am ps ps-am tags uninstall \\\n+\tuninstall-am uninstall-plugin_includeHEADERS \\\n+\tuninstall-toolexeclibLTLIBRARIES\n+\n+\n+main_target_image.h: offload_target_main\n+\t@echo -n \"const int image_size = \" > $@\n+\t@stat -c '%s' $< >> $@\n+\t@echo \";\" >> $@\n+\t@echo \"struct MainTargetImage {\" >> $@\n+\t@echo \"  int64_t size;\" >> $@\n+\t@echo \"  char name[sizeof \\\"offload_target_main\\\"];\" >> $@\n+\t@echo \"  char data[image_size];\" >> $@\n+\t@echo \"};\" >> $@\n+\t@echo \"extern \\\"C\\\" const MainTargetImage main_target_image = {\" >> $@\n+\t@echo \"  image_size, \\\"offload_target_main\\\",\" >> $@\n+\t@cat $< | xxd -include >> $@\n+\t@echo \"};\" >> $@\n+\n+offload_target_main: $(liboffload_dir)/ofldbegin.o offload_target_main.o $(liboffload_dir)/ofldend.o\n+\t$(CXX) $(AM_LDFLAGS) $^ -o $@\n+\n+offload_target_main.o: offload_target_main.cpp\n+\t$(CXX) $(AM_CXXFLAGS) $(AM_CPPFLAGS) -c $< -o $@\n+\n+# Tell versions [3.59,3.63) of GNU make to not export all variables.\n+# Otherwise a system limit (for SysV at least) may be exceeded.\n+.NOEXPORT:"}, {"sha": "bcb1f3336653e5214ec180d1fb05e3877c742de8", "filename": "liboffloadmic/plugin/aclocal.m4", "status": "added", "additions": 979, "deletions": 0, "changes": 979, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fplugin%2Faclocal.m4?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -0,0 +1,979 @@\n+# generated automatically by aclocal 1.11.1 -*- Autoconf -*-\n+\n+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,\n+# 2005, 2006, 2007, 2008, 2009  Free Software Foundation, Inc.\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+# PARTICULAR PURPOSE.\n+\n+m4_ifndef([AC_AUTOCONF_VERSION],\n+  [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl\n+m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.64],,\n+[m4_warning([this file was generated for autoconf 2.64.\n+You have another version of autoconf.  It may work, but is not guaranteed to.\n+If you have problems, you may need to regenerate the build system entirely.\n+To do so, use the procedure documented by the package, typically `autoreconf'.])])\n+\n+# Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# AM_AUTOMAKE_VERSION(VERSION)\n+# ----------------------------\n+# Automake X.Y traces this macro to ensure aclocal.m4 has been\n+# generated from the m4 files accompanying Automake X.Y.\n+# (This private macro should not be called outside this file.)\n+AC_DEFUN([AM_AUTOMAKE_VERSION],\n+[am__api_version='1.11'\n+dnl Some users find AM_AUTOMAKE_VERSION and mistake it for a way to\n+dnl require some minimum version.  Point them to the right macro.\n+m4_if([$1], [1.11.1], [],\n+      [AC_FATAL([Do not call $0, use AM_INIT_AUTOMAKE([$1]).])])dnl\n+])\n+\n+# _AM_AUTOCONF_VERSION(VERSION)\n+# -----------------------------\n+# aclocal traces this macro to find the Autoconf version.\n+# This is a private macro too.  Using m4_define simplifies\n+# the logic in aclocal, which can simply ignore this definition.\n+m4_define([_AM_AUTOCONF_VERSION], [])\n+\n+# AM_SET_CURRENT_AUTOMAKE_VERSION\n+# -------------------------------\n+# Call AM_AUTOMAKE_VERSION and AM_AUTOMAKE_VERSION so they can be traced.\n+# This function is AC_REQUIREd by AM_INIT_AUTOMAKE.\n+AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],\n+[AM_AUTOMAKE_VERSION([1.11.1])dnl\n+m4_ifndef([AC_AUTOCONF_VERSION],\n+  [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl\n+_AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])\n+\n+# AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-\n+\n+# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets\n+# $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to\n+# `$srcdir', `$srcdir/..', or `$srcdir/../..'.\n+#\n+# Of course, Automake must honor this variable whenever it calls a\n+# tool from the auxiliary directory.  The problem is that $srcdir (and\n+# therefore $ac_aux_dir as well) can be either absolute or relative,\n+# depending on how configure is run.  This is pretty annoying, since\n+# it makes $ac_aux_dir quite unusable in subdirectories: in the top\n+# source directory, any form will work fine, but in subdirectories a\n+# relative path needs to be adjusted first.\n+#\n+# $ac_aux_dir/missing\n+#    fails when called from a subdirectory if $ac_aux_dir is relative\n+# $top_srcdir/$ac_aux_dir/missing\n+#    fails if $ac_aux_dir is absolute,\n+#    fails when called from a subdirectory in a VPATH build with\n+#          a relative $ac_aux_dir\n+#\n+# The reason of the latter failure is that $top_srcdir and $ac_aux_dir\n+# are both prefixed by $srcdir.  In an in-source build this is usually\n+# harmless because $srcdir is `.', but things will broke when you\n+# start a VPATH build or use an absolute $srcdir.\n+#\n+# So we could use something similar to $top_srcdir/$ac_aux_dir/missing,\n+# iff we strip the leading $srcdir from $ac_aux_dir.  That would be:\n+#   am_aux_dir='\\$(top_srcdir)/'`expr \"$ac_aux_dir\" : \"$srcdir//*\\(.*\\)\"`\n+# and then we would define $MISSING as\n+#   MISSING=\"\\${SHELL} $am_aux_dir/missing\"\n+# This will work as long as MISSING is not called from configure, because\n+# unfortunately $(top_srcdir) has no meaning in configure.\n+# However there are other variables, like CC, which are often used in\n+# configure, and could therefore not use this \"fixed\" $ac_aux_dir.\n+#\n+# Another solution, used here, is to always expand $ac_aux_dir to an\n+# absolute PATH.  The drawback is that using absolute paths prevent a\n+# configured tree to be moved without reconfiguration.\n+\n+AC_DEFUN([AM_AUX_DIR_EXPAND],\n+[dnl Rely on autoconf to set up CDPATH properly.\n+AC_PREREQ([2.50])dnl\n+# expand $ac_aux_dir to an absolute path\n+am_aux_dir=`cd $ac_aux_dir && pwd`\n+])\n+\n+# AM_CONDITIONAL                                            -*- Autoconf -*-\n+\n+# Copyright (C) 1997, 2000, 2001, 2003, 2004, 2005, 2006, 2008\n+# Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 9\n+\n+# AM_CONDITIONAL(NAME, SHELL-CONDITION)\n+# -------------------------------------\n+# Define a conditional.\n+AC_DEFUN([AM_CONDITIONAL],\n+[AC_PREREQ(2.52)dnl\n+ ifelse([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],\n+\t[$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl\n+AC_SUBST([$1_TRUE])dnl\n+AC_SUBST([$1_FALSE])dnl\n+_AM_SUBST_NOTMAKE([$1_TRUE])dnl\n+_AM_SUBST_NOTMAKE([$1_FALSE])dnl\n+m4_define([_AM_COND_VALUE_$1], [$2])dnl\n+if $2; then\n+  $1_TRUE=\n+  $1_FALSE='#'\n+else\n+  $1_TRUE='#'\n+  $1_FALSE=\n+fi\n+AC_CONFIG_COMMANDS_PRE(\n+[if test -z \"${$1_TRUE}\" && test -z \"${$1_FALSE}\"; then\n+  AC_MSG_ERROR([[conditional \"$1\" was never defined.\n+Usually this means the macro was only invoked conditionally.]])\n+fi])])\n+\n+# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2009\n+# Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 10\n+\n+# There are a few dirty hacks below to avoid letting `AC_PROG_CC' be\n+# written in clear, in which case automake, when reading aclocal.m4,\n+# will think it sees a *use*, and therefore will trigger all it's\n+# C support machinery.  Also note that it means that autoscan, seeing\n+# CC etc. in the Makefile, will ask for an AC_PROG_CC use...\n+\n+\n+# _AM_DEPENDENCIES(NAME)\n+# ----------------------\n+# See how the compiler implements dependency checking.\n+# NAME is \"CC\", \"CXX\", \"GCJ\", or \"OBJC\".\n+# We try a few techniques and use that to set a single cache variable.\n+#\n+# We don't AC_REQUIRE the corresponding AC_PROG_CC since the latter was\n+# modified to invoke _AM_DEPENDENCIES(CC); we would have a circular\n+# dependency, and given that the user is not expected to run this macro,\n+# just rely on AC_PROG_CC.\n+AC_DEFUN([_AM_DEPENDENCIES],\n+[AC_REQUIRE([AM_SET_DEPDIR])dnl\n+AC_REQUIRE([AM_OUTPUT_DEPENDENCY_COMMANDS])dnl\n+AC_REQUIRE([AM_MAKE_INCLUDE])dnl\n+AC_REQUIRE([AM_DEP_TRACK])dnl\n+\n+ifelse([$1], CC,   [depcc=\"$CC\"   am_compiler_list=],\n+       [$1], CXX,  [depcc=\"$CXX\"  am_compiler_list=],\n+       [$1], OBJC, [depcc=\"$OBJC\" am_compiler_list='gcc3 gcc'],\n+       [$1], UPC,  [depcc=\"$UPC\"  am_compiler_list=],\n+       [$1], GCJ,  [depcc=\"$GCJ\"  am_compiler_list='gcc3 gcc'],\n+                   [depcc=\"$$1\"   am_compiler_list=])\n+\n+AC_CACHE_CHECK([dependency style of $depcc],\n+               [am_cv_$1_dependencies_compiler_type],\n+[if test -z \"$AMDEP_TRUE\" && test -f \"$am_depcomp\"; then\n+  # We make a subdir and do the tests there.  Otherwise we can end up\n+  # making bogus files that we don't know about and never remove.  For\n+  # instance it was reported that on HP-UX the gcc test will end up\n+  # making a dummy file named `D' -- because `-MD' means `put the output\n+  # in D'.\n+  mkdir conftest.dir\n+  # Copy depcomp to subdir because otherwise we won't find it if we're\n+  # using a relative directory.\n+  cp \"$am_depcomp\" conftest.dir\n+  cd conftest.dir\n+  # We will build objects and dependencies in a subdirectory because\n+  # it helps to detect inapplicable dependency modes.  For instance\n+  # both Tru64's cc and ICC support -MD to output dependencies as a\n+  # side effect of compilation, but ICC will put the dependencies in\n+  # the current directory while Tru64 will put them in the object\n+  # directory.\n+  mkdir sub\n+\n+  am_cv_$1_dependencies_compiler_type=none\n+  if test \"$am_compiler_list\" = \"\"; then\n+     am_compiler_list=`sed -n ['s/^#*\\([a-zA-Z0-9]*\\))$/\\1/p'] < ./depcomp`\n+  fi\n+  am__universal=false\n+  m4_case([$1], [CC],\n+    [case \" $depcc \" in #(\n+     *\\ -arch\\ *\\ -arch\\ *) am__universal=true ;;\n+     esac],\n+    [CXX],\n+    [case \" $depcc \" in #(\n+     *\\ -arch\\ *\\ -arch\\ *) am__universal=true ;;\n+     esac])\n+\n+  for depmode in $am_compiler_list; do\n+    # Setup a source with many dependencies, because some compilers\n+    # like to wrap large dependency lists on column 80 (with \\), and\n+    # we should not choose a depcomp mode which is confused by this.\n+    #\n+    # We need to recreate these files for each test, as the compiler may\n+    # overwrite some of them when testing with obscure command lines.\n+    # This happens at least with the AIX C compiler.\n+    : > sub/conftest.c\n+    for i in 1 2 3 4 5 6; do\n+      echo '#include \"conftst'$i'.h\"' >> sub/conftest.c\n+      # Using `: > sub/conftst$i.h' creates only sub/conftst1.h with\n+      # Solaris 8's {/usr,}/bin/sh.\n+      touch sub/conftst$i.h\n+    done\n+    echo \"${am__include} ${am__quote}sub/conftest.Po${am__quote}\" > confmf\n+\n+    # We check with `-c' and `-o' for the sake of the \"dashmstdout\"\n+    # mode.  It turns out that the SunPro C++ compiler does not properly\n+    # handle `-M -o', and we need to detect this.  Also, some Intel\n+    # versions had trouble with output in subdirs\n+    am__obj=sub/conftest.${OBJEXT-o}\n+    am__minus_obj=\"-o $am__obj\"\n+    case $depmode in\n+    gcc)\n+      # This depmode causes a compiler race in universal mode.\n+      test \"$am__universal\" = false || continue\n+      ;;\n+    nosideeffect)\n+      # after this tag, mechanisms are not by side-effect, so they'll\n+      # only be used when explicitly requested\n+      if test \"x$enable_dependency_tracking\" = xyes; then\n+\tcontinue\n+      else\n+\tbreak\n+      fi\n+      ;;\n+    msvisualcpp | msvcmsys)\n+      # This compiler won't grok `-c -o', but also, the minuso test has\n+      # not run yet.  These depmodes are late enough in the game, and\n+      # so weak that their functioning should not be impacted.\n+      am__obj=conftest.${OBJEXT-o}\n+      am__minus_obj=\n+      ;;\n+    none) break ;;\n+    esac\n+    if depmode=$depmode \\\n+       source=sub/conftest.c object=$am__obj \\\n+       depfile=sub/conftest.Po tmpdepfile=sub/conftest.TPo \\\n+       $SHELL ./depcomp $depcc -c $am__minus_obj sub/conftest.c \\\n+         >/dev/null 2>conftest.err &&\n+       grep sub/conftst1.h sub/conftest.Po > /dev/null 2>&1 &&\n+       grep sub/conftst6.h sub/conftest.Po > /dev/null 2>&1 &&\n+       grep $am__obj sub/conftest.Po > /dev/null 2>&1 &&\n+       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then\n+      # icc doesn't choke on unknown options, it will just issue warnings\n+      # or remarks (even with -Werror).  So we grep stderr for any message\n+      # that says an option was ignored or not supported.\n+      # When given -MP, icc 7.0 and 7.1 complain thusly:\n+      #   icc: Command line warning: ignoring option '-M'; no argument required\n+      # The diagnosis changed in icc 8.0:\n+      #   icc: Command line remark: option '-MP' not supported\n+      if (grep 'ignoring option' conftest.err ||\n+          grep 'not supported' conftest.err) >/dev/null 2>&1; then :; else\n+        am_cv_$1_dependencies_compiler_type=$depmode\n+        break\n+      fi\n+    fi\n+  done\n+\n+  cd ..\n+  rm -rf conftest.dir\n+else\n+  am_cv_$1_dependencies_compiler_type=none\n+fi\n+])\n+AC_SUBST([$1DEPMODE], [depmode=$am_cv_$1_dependencies_compiler_type])\n+AM_CONDITIONAL([am__fastdep$1], [\n+  test \"x$enable_dependency_tracking\" != xno \\\n+  && test \"$am_cv_$1_dependencies_compiler_type\" = gcc3])\n+])\n+\n+\n+# AM_SET_DEPDIR\n+# -------------\n+# Choose a directory name for dependency files.\n+# This macro is AC_REQUIREd in _AM_DEPENDENCIES\n+AC_DEFUN([AM_SET_DEPDIR],\n+[AC_REQUIRE([AM_SET_LEADING_DOT])dnl\n+AC_SUBST([DEPDIR], [\"${am__leading_dot}deps\"])dnl\n+])\n+\n+\n+# AM_DEP_TRACK\n+# ------------\n+AC_DEFUN([AM_DEP_TRACK],\n+[AC_ARG_ENABLE(dependency-tracking,\n+[  --disable-dependency-tracking  speeds up one-time build\n+  --enable-dependency-tracking   do not reject slow dependency extractors])\n+if test \"x$enable_dependency_tracking\" != xno; then\n+  am_depcomp=\"$ac_aux_dir/depcomp\"\n+  AMDEPBACKSLASH='\\'\n+fi\n+AM_CONDITIONAL([AMDEP], [test \"x$enable_dependency_tracking\" != xno])\n+AC_SUBST([AMDEPBACKSLASH])dnl\n+_AM_SUBST_NOTMAKE([AMDEPBACKSLASH])dnl\n+])\n+\n+# Generate code to set up dependency tracking.              -*- Autoconf -*-\n+\n+# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2008\n+# Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+#serial 5\n+\n+# _AM_OUTPUT_DEPENDENCY_COMMANDS\n+# ------------------------------\n+AC_DEFUN([_AM_OUTPUT_DEPENDENCY_COMMANDS],\n+[{\n+  # Autoconf 2.62 quotes --file arguments for eval, but not when files\n+  # are listed without --file.  Let's play safe and only enable the eval\n+  # if we detect the quoting.\n+  case $CONFIG_FILES in\n+  *\\'*) eval set x \"$CONFIG_FILES\" ;;\n+  *)   set x $CONFIG_FILES ;;\n+  esac\n+  shift\n+  for mf\n+  do\n+    # Strip MF so we end up with the name of the file.\n+    mf=`echo \"$mf\" | sed -e 's/:.*$//'`\n+    # Check whether this is an Automake generated Makefile or not.\n+    # We used to match only the files named `Makefile.in', but\n+    # some people rename them; so instead we look at the file content.\n+    # Grep'ing the first line is not enough: some people post-process\n+    # each Makefile.in and add a new line on top of each file to say so.\n+    # Grep'ing the whole file is not good either: AIX grep has a line\n+    # limit of 2048, but all sed's we know have understand at least 4000.\n+    if sed -n 's,^#.*generated by automake.*,X,p' \"$mf\" | grep X >/dev/null 2>&1; then\n+      dirpart=`AS_DIRNAME(\"$mf\")`\n+    else\n+      continue\n+    fi\n+    # Extract the definition of DEPDIR, am__include, and am__quote\n+    # from the Makefile without running `make'.\n+    DEPDIR=`sed -n 's/^DEPDIR = //p' < \"$mf\"`\n+    test -z \"$DEPDIR\" && continue\n+    am__include=`sed -n 's/^am__include = //p' < \"$mf\"`\n+    test -z \"am__include\" && continue\n+    am__quote=`sed -n 's/^am__quote = //p' < \"$mf\"`\n+    # When using ansi2knr, U may be empty or an underscore; expand it\n+    U=`sed -n 's/^U = //p' < \"$mf\"`\n+    # Find all dependency output files, they are included files with\n+    # $(DEPDIR) in their names.  We invoke sed twice because it is the\n+    # simplest approach to changing $(DEPDIR) to its actual value in the\n+    # expansion.\n+    for file in `sed -n \"\n+      s/^$am__include $am__quote\\(.*(DEPDIR).*\\)$am__quote\"'$/\\1/p' <\"$mf\" | \\\n+\t sed -e 's/\\$(DEPDIR)/'\"$DEPDIR\"'/g' -e 's/\\$U/'\"$U\"'/g'`; do\n+      # Make sure the directory exists.\n+      test -f \"$dirpart/$file\" && continue\n+      fdir=`AS_DIRNAME([\"$file\"])`\n+      AS_MKDIR_P([$dirpart/$fdir])\n+      # echo \"creating $dirpart/$file\"\n+      echo '# dummy' > \"$dirpart/$file\"\n+    done\n+  done\n+}\n+])# _AM_OUTPUT_DEPENDENCY_COMMANDS\n+\n+\n+# AM_OUTPUT_DEPENDENCY_COMMANDS\n+# -----------------------------\n+# This macro should only be invoked once -- use via AC_REQUIRE.\n+#\n+# This code is only required when automatic dependency tracking\n+# is enabled.  FIXME.  This creates each `.P' file that we will\n+# need in order to bootstrap the dependency handling code.\n+AC_DEFUN([AM_OUTPUT_DEPENDENCY_COMMANDS],\n+[AC_CONFIG_COMMANDS([depfiles],\n+     [test x\"$AMDEP_TRUE\" != x\"\" || _AM_OUTPUT_DEPENDENCY_COMMANDS],\n+     [AMDEP_TRUE=\"$AMDEP_TRUE\" ac_aux_dir=\"$ac_aux_dir\"])\n+])\n+\n+# Do all the work for Automake.                             -*- Autoconf -*-\n+\n+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,\n+# 2005, 2006, 2008, 2009 Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 16\n+\n+# This macro actually does too much.  Some checks are only needed if\n+# your package does certain things.  But this isn't really a big deal.\n+\n+# AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])\n+# AM_INIT_AUTOMAKE([OPTIONS])\n+# -----------------------------------------------\n+# The call with PACKAGE and VERSION arguments is the old style\n+# call (pre autoconf-2.50), which is being phased out.  PACKAGE\n+# and VERSION should now be passed to AC_INIT and removed from\n+# the call to AM_INIT_AUTOMAKE.\n+# We support both call styles for the transition.  After\n+# the next Automake release, Autoconf can make the AC_INIT\n+# arguments mandatory, and then we can depend on a new Autoconf\n+# release and drop the old call support.\n+AC_DEFUN([AM_INIT_AUTOMAKE],\n+[AC_PREREQ([2.62])dnl\n+dnl Autoconf wants to disallow AM_ names.  We explicitly allow\n+dnl the ones we care about.\n+m4_pattern_allow([^AM_[A-Z]+FLAGS$])dnl\n+AC_REQUIRE([AM_SET_CURRENT_AUTOMAKE_VERSION])dnl\n+AC_REQUIRE([AC_PROG_INSTALL])dnl\n+if test \"`cd $srcdir && pwd`\" != \"`pwd`\"; then\n+  # Use -I$(srcdir) only when $(srcdir) != ., so that make's output\n+  # is not polluted with repeated \"-I.\"\n+  AC_SUBST([am__isrc], [' -I$(srcdir)'])_AM_SUBST_NOTMAKE([am__isrc])dnl\n+  # test to see if srcdir already configured\n+  if test -f $srcdir/config.status; then\n+    AC_MSG_ERROR([source directory already configured; run \"make distclean\" there first])\n+  fi\n+fi\n+\n+# test whether we have cygpath\n+if test -z \"$CYGPATH_W\"; then\n+  if (cygpath --version) >/dev/null 2>/dev/null; then\n+    CYGPATH_W='cygpath -w'\n+  else\n+    CYGPATH_W=echo\n+  fi\n+fi\n+AC_SUBST([CYGPATH_W])\n+\n+# Define the identity of the package.\n+dnl Distinguish between old-style and new-style calls.\n+m4_ifval([$2],\n+[m4_ifval([$3], [_AM_SET_OPTION([no-define])])dnl\n+ AC_SUBST([PACKAGE], [$1])dnl\n+ AC_SUBST([VERSION], [$2])],\n+[_AM_SET_OPTIONS([$1])dnl\n+dnl Diagnose old-style AC_INIT with new-style AM_AUTOMAKE_INIT.\n+m4_if(m4_ifdef([AC_PACKAGE_NAME], 1)m4_ifdef([AC_PACKAGE_VERSION], 1), 11,,\n+  [m4_fatal([AC_INIT should be called with package and version arguments])])dnl\n+ AC_SUBST([PACKAGE], ['AC_PACKAGE_TARNAME'])dnl\n+ AC_SUBST([VERSION], ['AC_PACKAGE_VERSION'])])dnl\n+\n+_AM_IF_OPTION([no-define],,\n+[AC_DEFINE_UNQUOTED(PACKAGE, \"$PACKAGE\", [Name of package])\n+ AC_DEFINE_UNQUOTED(VERSION, \"$VERSION\", [Version number of package])])dnl\n+\n+# Some tools Automake needs.\n+AC_REQUIRE([AM_SANITY_CHECK])dnl\n+AC_REQUIRE([AC_ARG_PROGRAM])dnl\n+AM_MISSING_PROG(ACLOCAL, aclocal-${am__api_version})\n+AM_MISSING_PROG(AUTOCONF, autoconf)\n+AM_MISSING_PROG(AUTOMAKE, automake-${am__api_version})\n+AM_MISSING_PROG(AUTOHEADER, autoheader)\n+AM_MISSING_PROG(MAKEINFO, makeinfo)\n+AC_REQUIRE([AM_PROG_INSTALL_SH])dnl\n+AC_REQUIRE([AM_PROG_INSTALL_STRIP])dnl\n+AC_REQUIRE([AM_PROG_MKDIR_P])dnl\n+# We need awk for the \"check\" target.  The system \"awk\" is bad on\n+# some platforms.\n+AC_REQUIRE([AC_PROG_AWK])dnl\n+AC_REQUIRE([AC_PROG_MAKE_SET])dnl\n+AC_REQUIRE([AM_SET_LEADING_DOT])dnl\n+_AM_IF_OPTION([tar-ustar], [_AM_PROG_TAR([ustar])],\n+\t      [_AM_IF_OPTION([tar-pax], [_AM_PROG_TAR([pax])],\n+\t\t\t     [_AM_PROG_TAR([v7])])])\n+_AM_IF_OPTION([no-dependencies],,\n+[AC_PROVIDE_IFELSE([AC_PROG_CC],\n+\t\t  [_AM_DEPENDENCIES(CC)],\n+\t\t  [define([AC_PROG_CC],\n+\t\t\t  defn([AC_PROG_CC])[_AM_DEPENDENCIES(CC)])])dnl\n+AC_PROVIDE_IFELSE([AC_PROG_CXX],\n+\t\t  [_AM_DEPENDENCIES(CXX)],\n+\t\t  [define([AC_PROG_CXX],\n+\t\t\t  defn([AC_PROG_CXX])[_AM_DEPENDENCIES(CXX)])])dnl\n+AC_PROVIDE_IFELSE([AC_PROG_OBJC],\n+\t\t  [_AM_DEPENDENCIES(OBJC)],\n+\t\t  [define([AC_PROG_OBJC],\n+\t\t\t  defn([AC_PROG_OBJC])[_AM_DEPENDENCIES(OBJC)])])dnl\n+])\n+_AM_IF_OPTION([silent-rules], [AC_REQUIRE([AM_SILENT_RULES])])dnl\n+dnl The `parallel-tests' driver may need to know about EXEEXT, so add the\n+dnl `am__EXEEXT' conditional if _AM_COMPILER_EXEEXT was seen.  This macro\n+dnl is hooked onto _AC_COMPILER_EXEEXT early, see below.\n+AC_CONFIG_COMMANDS_PRE(dnl\n+[m4_provide_if([_AM_COMPILER_EXEEXT],\n+  [AM_CONDITIONAL([am__EXEEXT], [test -n \"$EXEEXT\"])])])dnl\n+])\n+\n+dnl Hook into `_AC_COMPILER_EXEEXT' early to learn its expansion.  Do not\n+dnl add the conditional right here, as _AC_COMPILER_EXEEXT may be further\n+dnl mangled by Autoconf and run in a shell conditional statement.\n+m4_define([_AC_COMPILER_EXEEXT],\n+m4_defn([_AC_COMPILER_EXEEXT])[m4_provide([_AM_COMPILER_EXEEXT])])\n+\n+\n+# When config.status generates a header, we must update the stamp-h file.\n+# This file resides in the same directory as the config header\n+# that is generated.  The stamp files are numbered to have different names.\n+\n+# Autoconf calls _AC_AM_CONFIG_HEADER_HOOK (when defined) in the\n+# loop where config.status creates the headers, so we can generate\n+# our stamp files there.\n+AC_DEFUN([_AC_AM_CONFIG_HEADER_HOOK],\n+[# Compute $1's index in $config_headers.\n+_am_arg=$1\n+_am_stamp_count=1\n+for _am_header in $config_headers :; do\n+  case $_am_header in\n+    $_am_arg | $_am_arg:* )\n+      break ;;\n+    * )\n+      _am_stamp_count=`expr $_am_stamp_count + 1` ;;\n+  esac\n+done\n+echo \"timestamp for $_am_arg\" >`AS_DIRNAME([\"$_am_arg\"])`/stamp-h[]$_am_stamp_count])\n+\n+# Copyright (C) 2001, 2003, 2005, 2008  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# AM_PROG_INSTALL_SH\n+# ------------------\n+# Define $install_sh.\n+AC_DEFUN([AM_PROG_INSTALL_SH],\n+[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl\n+if test x\"${install_sh}\" != xset; then\n+  case $am_aux_dir in\n+  *\\ * | *\\\t*)\n+    install_sh=\"\\${SHELL} '$am_aux_dir/install-sh'\" ;;\n+  *)\n+    install_sh=\"\\${SHELL} $am_aux_dir/install-sh\"\n+  esac\n+fi\n+AC_SUBST(install_sh)])\n+\n+# Add --enable-maintainer-mode option to configure.         -*- Autoconf -*-\n+# From Jim Meyering\n+\n+# Copyright (C) 1996, 1998, 2000, 2001, 2002, 2003, 2004, 2005, 2008\n+# Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 5\n+\n+# AM_MAINTAINER_MODE([DEFAULT-MODE])\n+# ----------------------------------\n+# Control maintainer-specific portions of Makefiles.\n+# Default is to disable them, unless `enable' is passed literally.\n+# For symmetry, `disable' may be passed as well.  Anyway, the user\n+# can override the default with the --enable/--disable switch.\n+AC_DEFUN([AM_MAINTAINER_MODE],\n+[m4_case(m4_default([$1], [disable]),\n+       [enable], [m4_define([am_maintainer_other], [disable])],\n+       [disable], [m4_define([am_maintainer_other], [enable])],\n+       [m4_define([am_maintainer_other], [enable])\n+        m4_warn([syntax], [unexpected argument to AM@&t@_MAINTAINER_MODE: $1])])\n+AC_MSG_CHECKING([whether to am_maintainer_other maintainer-specific portions of Makefiles])\n+  dnl maintainer-mode's default is 'disable' unless 'enable' is passed\n+  AC_ARG_ENABLE([maintainer-mode],\n+[  --][am_maintainer_other][-maintainer-mode  am_maintainer_other make rules and dependencies not useful\n+\t\t\t  (and sometimes confusing) to the casual installer],\n+      [USE_MAINTAINER_MODE=$enableval],\n+      [USE_MAINTAINER_MODE=]m4_if(am_maintainer_other, [enable], [no], [yes]))\n+  AC_MSG_RESULT([$USE_MAINTAINER_MODE])\n+  AM_CONDITIONAL([MAINTAINER_MODE], [test $USE_MAINTAINER_MODE = yes])\n+  MAINT=$MAINTAINER_MODE_TRUE\n+  AC_SUBST([MAINT])dnl\n+]\n+)\n+\n+AU_DEFUN([jm_MAINTAINER_MODE], [AM_MAINTAINER_MODE])\n+\n+# Check to see how 'make' treats includes.\t            -*- Autoconf -*-\n+\n+# Copyright (C) 2001, 2002, 2003, 2005, 2009  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 4\n+\n+# AM_MAKE_INCLUDE()\n+# -----------------\n+# Check to see how make treats includes.\n+AC_DEFUN([AM_MAKE_INCLUDE],\n+[am_make=${MAKE-make}\n+cat > confinc << 'END'\n+am__doit:\n+\t@echo this is the am__doit target\n+.PHONY: am__doit\n+END\n+# If we don't find an include directive, just comment out the code.\n+AC_MSG_CHECKING([for style of include used by $am_make])\n+am__include=\"#\"\n+am__quote=\n+_am_result=none\n+# First try GNU make style include.\n+echo \"include confinc\" > confmf\n+# Ignore all kinds of additional output from `make'.\n+case `$am_make -s -f confmf 2> /dev/null` in #(\n+*the\\ am__doit\\ target*)\n+  am__include=include\n+  am__quote=\n+  _am_result=GNU\n+  ;;\n+esac\n+# Now try BSD make style include.\n+if test \"$am__include\" = \"#\"; then\n+   echo '.include \"confinc\"' > confmf\n+   case `$am_make -s -f confmf 2> /dev/null` in #(\n+   *the\\ am__doit\\ target*)\n+     am__include=.include\n+     am__quote=\"\\\"\"\n+     _am_result=BSD\n+     ;;\n+   esac\n+fi\n+AC_SUBST([am__include])\n+AC_SUBST([am__quote])\n+AC_MSG_RESULT([$_am_result])\n+rm -f confinc confmf\n+])\n+\n+# Fake the existence of programs that GNU maintainers use.  -*- Autoconf -*-\n+\n+# Copyright (C) 1997, 1999, 2000, 2001, 2003, 2004, 2005, 2008\n+# Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 6\n+\n+# AM_MISSING_PROG(NAME, PROGRAM)\n+# ------------------------------\n+AC_DEFUN([AM_MISSING_PROG],\n+[AC_REQUIRE([AM_MISSING_HAS_RUN])\n+$1=${$1-\"${am_missing_run}$2\"}\n+AC_SUBST($1)])\n+\n+\n+# AM_MISSING_HAS_RUN\n+# ------------------\n+# Define MISSING if not defined so far and test if it supports --run.\n+# If it does, set am_missing_run to use it, otherwise, to nothing.\n+AC_DEFUN([AM_MISSING_HAS_RUN],\n+[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl\n+AC_REQUIRE_AUX_FILE([missing])dnl\n+if test x\"${MISSING+set}\" != xset; then\n+  case $am_aux_dir in\n+  *\\ * | *\\\t*)\n+    MISSING=\"\\${SHELL} \\\"$am_aux_dir/missing\\\"\" ;;\n+  *)\n+    MISSING=\"\\${SHELL} $am_aux_dir/missing\" ;;\n+  esac\n+fi\n+# Use eval to expand $SHELL\n+if eval \"$MISSING --run true\"; then\n+  am_missing_run=\"$MISSING --run \"\n+else\n+  am_missing_run=\n+  AC_MSG_WARN([`missing' script is too old or missing])\n+fi\n+])\n+\n+# Copyright (C) 2003, 2004, 2005, 2006  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# AM_PROG_MKDIR_P\n+# ---------------\n+# Check for `mkdir -p'.\n+AC_DEFUN([AM_PROG_MKDIR_P],\n+[AC_PREREQ([2.60])dnl\n+AC_REQUIRE([AC_PROG_MKDIR_P])dnl\n+dnl Automake 1.8 to 1.9.6 used to define mkdir_p.  We now use MKDIR_P,\n+dnl while keeping a definition of mkdir_p for backward compatibility.\n+dnl @MKDIR_P@ is magic: AC_OUTPUT adjusts its value for each Makefile.\n+dnl However we cannot define mkdir_p as $(MKDIR_P) for the sake of\n+dnl Makefile.ins that do not define MKDIR_P, so we do our own\n+dnl adjustment using top_builddir (which is defined more often than\n+dnl MKDIR_P).\n+AC_SUBST([mkdir_p], [\"$MKDIR_P\"])dnl\n+case $mkdir_p in\n+  [[\\\\/$]]* | ?:[[\\\\/]]*) ;;\n+  */*) mkdir_p=\"\\$(top_builddir)/$mkdir_p\" ;;\n+esac\n+])\n+\n+# Helper functions for option handling.                     -*- Autoconf -*-\n+\n+# Copyright (C) 2001, 2002, 2003, 2005, 2008  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 4\n+\n+# _AM_MANGLE_OPTION(NAME)\n+# -----------------------\n+AC_DEFUN([_AM_MANGLE_OPTION],\n+[[_AM_OPTION_]m4_bpatsubst($1, [[^a-zA-Z0-9_]], [_])])\n+\n+# _AM_SET_OPTION(NAME)\n+# ------------------------------\n+# Set option NAME.  Presently that only means defining a flag for this option.\n+AC_DEFUN([_AM_SET_OPTION],\n+[m4_define(_AM_MANGLE_OPTION([$1]), 1)])\n+\n+# _AM_SET_OPTIONS(OPTIONS)\n+# ----------------------------------\n+# OPTIONS is a space-separated list of Automake options.\n+AC_DEFUN([_AM_SET_OPTIONS],\n+[m4_foreach_w([_AM_Option], [$1], [_AM_SET_OPTION(_AM_Option)])])\n+\n+# _AM_IF_OPTION(OPTION, IF-SET, [IF-NOT-SET])\n+# -------------------------------------------\n+# Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.\n+AC_DEFUN([_AM_IF_OPTION],\n+[m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])\n+\n+# Check to make sure that the build environment is sane.    -*- Autoconf -*-\n+\n+# Copyright (C) 1996, 1997, 2000, 2001, 2003, 2005, 2008\n+# Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 5\n+\n+# AM_SANITY_CHECK\n+# ---------------\n+AC_DEFUN([AM_SANITY_CHECK],\n+[AC_MSG_CHECKING([whether build environment is sane])\n+# Just in case\n+sleep 1\n+echo timestamp > conftest.file\n+# Reject unsafe characters in $srcdir or the absolute working directory\n+# name.  Accept space and tab only in the latter.\n+am_lf='\n+'\n+case `pwd` in\n+  *[[\\\\\\\"\\#\\$\\&\\'\\`$am_lf]]*)\n+    AC_MSG_ERROR([unsafe absolute working directory name]);;\n+esac\n+case $srcdir in\n+  *[[\\\\\\\"\\#\\$\\&\\'\\`$am_lf\\ \\\t]]*)\n+    AC_MSG_ERROR([unsafe srcdir value: `$srcdir']);;\n+esac\n+\n+# Do `set' in a subshell so we don't clobber the current shell's\n+# arguments.  Must try -L first in case configure is actually a\n+# symlink; some systems play weird games with the mod time of symlinks\n+# (eg FreeBSD returns the mod time of the symlink's containing\n+# directory).\n+if (\n+   set X `ls -Lt \"$srcdir/configure\" conftest.file 2> /dev/null`\n+   if test \"$[*]\" = \"X\"; then\n+      # -L didn't work.\n+      set X `ls -t \"$srcdir/configure\" conftest.file`\n+   fi\n+   rm -f conftest.file\n+   if test \"$[*]\" != \"X $srcdir/configure conftest.file\" \\\n+      && test \"$[*]\" != \"X conftest.file $srcdir/configure\"; then\n+\n+      # If neither matched, then we have a broken ls.  This can happen\n+      # if, for instance, CONFIG_SHELL is bash and it inherits a\n+      # broken ls alias from the environment.  This has actually\n+      # happened.  Such a system could not be considered \"sane\".\n+      AC_MSG_ERROR([ls -t appears to fail.  Make sure there is not a broken\n+alias in your environment])\n+   fi\n+\n+   test \"$[2]\" = conftest.file\n+   )\n+then\n+   # Ok.\n+   :\n+else\n+   AC_MSG_ERROR([newly created file is older than distributed files!\n+Check your system clock])\n+fi\n+AC_MSG_RESULT(yes)])\n+\n+# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# AM_PROG_INSTALL_STRIP\n+# ---------------------\n+# One issue with vendor `install' (even GNU) is that you can't\n+# specify the program used to strip binaries.  This is especially\n+# annoying in cross-compiling environments, where the build's strip\n+# is unlikely to handle the host's binaries.\n+# Fortunately install-sh will honor a STRIPPROG variable, so we\n+# always use install-sh in `make install-strip', and initialize\n+# STRIPPROG with the value of the STRIP variable (set by the user).\n+AC_DEFUN([AM_PROG_INSTALL_STRIP],\n+[AC_REQUIRE([AM_PROG_INSTALL_SH])dnl\n+# Installed binaries are usually stripped using `strip' when the user\n+# run `make install-strip'.  However `strip' might not be the right\n+# tool to use in cross-compilation environments, therefore Automake\n+# will honor the `STRIP' environment variable to overrule this program.\n+dnl Don't test for $cross_compiling = yes, because it might be `maybe'.\n+if test \"$cross_compiling\" != no; then\n+  AC_CHECK_TOOL([STRIP], [strip], :)\n+fi\n+INSTALL_STRIP_PROGRAM=\"\\$(install_sh) -c -s\"\n+AC_SUBST([INSTALL_STRIP_PROGRAM])])\n+\n+# Copyright (C) 2006, 2008  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 2\n+\n+# _AM_SUBST_NOTMAKE(VARIABLE)\n+# ---------------------------\n+# Prevent Automake from outputting VARIABLE = @VARIABLE@ in Makefile.in.\n+# This macro is traced by Automake.\n+AC_DEFUN([_AM_SUBST_NOTMAKE])\n+\n+# AM_SUBST_NOTMAKE(VARIABLE)\n+# ---------------------------\n+# Public sister of _AM_SUBST_NOTMAKE.\n+AC_DEFUN([AM_SUBST_NOTMAKE], [_AM_SUBST_NOTMAKE($@)])\n+\n+# Check how to create a tarball.                            -*- Autoconf -*-\n+\n+# Copyright (C) 2004, 2005  Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 2\n+\n+# _AM_PROG_TAR(FORMAT)\n+# --------------------\n+# Check how to create a tarball in format FORMAT.\n+# FORMAT should be one of `v7', `ustar', or `pax'.\n+#\n+# Substitute a variable $(am__tar) that is a command\n+# writing to stdout a FORMAT-tarball containing the directory\n+# $tardir.\n+#     tardir=directory && $(am__tar) > result.tar\n+#\n+# Substitute a variable $(am__untar) that extract such\n+# a tarball read from stdin.\n+#     $(am__untar) < result.tar\n+AC_DEFUN([_AM_PROG_TAR],\n+[# Always define AMTAR for backward compatibility.\n+AM_MISSING_PROG([AMTAR], [tar])\n+m4_if([$1], [v7],\n+     [am__tar='${AMTAR} chof - \"$$tardir\"'; am__untar='${AMTAR} xf -'],\n+     [m4_case([$1], [ustar],, [pax],,\n+              [m4_fatal([Unknown tar format])])\n+AC_MSG_CHECKING([how to create a $1 tar archive])\n+# Loop over all known methods to create a tar archive until one works.\n+_am_tools='gnutar m4_if([$1], [ustar], [plaintar]) pax cpio none'\n+_am_tools=${am_cv_prog_tar_$1-$_am_tools}\n+# Do not fold the above two line into one, because Tru64 sh and\n+# Solaris sh will not grok spaces in the rhs of `-'.\n+for _am_tool in $_am_tools\n+do\n+  case $_am_tool in\n+  gnutar)\n+    for _am_tar in tar gnutar gtar;\n+    do\n+      AM_RUN_LOG([$_am_tar --version]) && break\n+    done\n+    am__tar=\"$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - \"'\"$$tardir\"'\n+    am__tar_=\"$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - \"'\"$tardir\"'\n+    am__untar=\"$_am_tar -xf -\"\n+    ;;\n+  plaintar)\n+    # Must skip GNU tar: if it does not support --format= it doesn't create\n+    # ustar tarball either.\n+    (tar --version) >/dev/null 2>&1 && continue\n+    am__tar='tar chf - \"$$tardir\"'\n+    am__tar_='tar chf - \"$tardir\"'\n+    am__untar='tar xf -'\n+    ;;\n+  pax)\n+    am__tar='pax -L -x $1 -w \"$$tardir\"'\n+    am__tar_='pax -L -x $1 -w \"$tardir\"'\n+    am__untar='pax -r'\n+    ;;\n+  cpio)\n+    am__tar='find \"$$tardir\" -print | cpio -o -H $1 -L'\n+    am__tar_='find \"$tardir\" -print | cpio -o -H $1 -L'\n+    am__untar='cpio -i -H $1 -d'\n+    ;;\n+  none)\n+    am__tar=false\n+    am__tar_=false\n+    am__untar=false\n+    ;;\n+  esac\n+\n+  # If the value was cached, stop now.  We just wanted to have am__tar\n+  # and am__untar set.\n+  test -n \"${am_cv_prog_tar_$1}\" && break\n+\n+  # tar/untar a dummy directory, and stop if the command works\n+  rm -rf conftest.dir\n+  mkdir conftest.dir\n+  echo GrepMe > conftest.dir/file\n+  AM_RUN_LOG([tardir=conftest.dir && eval $am__tar_ >conftest.tar])\n+  rm -rf conftest.dir\n+  if test -s conftest.tar; then\n+    AM_RUN_LOG([$am__untar <conftest.tar])\n+    grep GrepMe conftest.dir/file >/dev/null 2>&1 && break\n+  fi\n+done\n+rm -rf conftest.dir\n+\n+AC_CACHE_VAL([am_cv_prog_tar_$1], [am_cv_prog_tar_$1=$_am_tool])\n+AC_MSG_RESULT([$am_cv_prog_tar_$1])])\n+AC_SUBST([am__tar])\n+AC_SUBST([am__untar])\n+]) # _AM_PROG_TAR\n+\n+m4_include([../../config/depstand.m4])\n+m4_include([../../config/lead-dot.m4])\n+m4_include([../../config/multi.m4])\n+m4_include([../../config/override.m4])\n+m4_include([../../libtool.m4])\n+m4_include([../../ltoptions.m4])\n+m4_include([../../ltsugar.m4])\n+m4_include([../../ltversion.m4])\n+m4_include([../../lt~obsolete.m4])"}, {"sha": "60189c4d22857c16d3a18226a549806e5d3b920b", "filename": "liboffloadmic/plugin/configure", "status": "added", "additions": 16656, "deletions": 0, "changes": 16656, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fplugin%2Fconfigure?ref=9d73ec14be1b2537394f3b137ee4da016e031dac"}, {"sha": "283faad542c67ab09b5c789ad22446073c5286d2", "filename": "liboffloadmic/plugin/configure.ac", "status": "added", "additions": 135, "deletions": 0, "changes": 135, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fplugin%2Fconfigure.ac?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -0,0 +1,135 @@\n+# Plugin for offload execution on Intel MIC devices.\n+#\n+# Copyright (C) 2014 Free Software Foundation, Inc.\n+#\n+# Contributed by Andrey Turetskiy <andrey.turetskiy@intel.com>.\n+#\n+# This file is part of the GNU OpenMP Library (libgomp).\n+#\n+# Libgomp is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+# more details.\n+#\n+# Under Section 7 of GPL version 3, you are granted additional\n+# permissions described in the GCC Runtime Library Exception, version\n+# 3.1, as published by the Free Software Foundation.\n+#\n+# You should have received a copy of the GNU General Public License and\n+# a copy of the GCC Runtime Library Exception along with this program;\n+# see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+# <http://www.gnu.org/licenses/>.\n+\n+# Process this file with autoconf to produce a configure script, like so:\n+# aclocal -I ../.. -I ../../config && autoconf && automake\n+\n+AC_PREREQ([2.64])\n+AC_INIT([Intel MIC Offload Plugin], [1.0], ,[libgomp-plugin-intelmic])\n+\n+AC_CONFIG_AUX_DIR(../..)\n+\n+AC_CANONICAL_SYSTEM\n+target_alias=${target_alias-$host_alias}\n+AC_SUBST(target_alias)\n+\n+AM_INIT_AUTOMAKE([1.9.0 foreign no-dist])\n+\n+AM_MAINTAINER_MODE\n+\n+AC_PROG_CC\n+AC_PROG_CXX\n+AC_CONFIG_FILES([Makefile])\n+AM_ENABLE_MULTILIB(, ../..)\n+\n+if test \"${multilib}\" = \"yes\"; then\n+  multilib_arg=\"--enable-multilib\"\n+else\n+  multilib_arg=\n+fi\n+\n+# Make sure liboffloadmic is enabled\n+case \"$enable_liboffloadmic\" in\n+  host | target)\n+    ;;\n+  *)\n+    AC_MSG_ERROR([Liboffloadmic is disabled]) ;;\n+esac\n+AM_CONDITIONAL(PLUGIN_HOST, [test x\"$enable_liboffloadmic\" = xhost])\n+\n+# Get accel target and path to build or install tree of accel compiler\n+accel_search_dir=\n+accel_target=\n+if test x\"$enable_liboffloadmic\" = xhost; then\n+  for accel in `echo $enable_offload_targets | sed -e 's#,# #g'`; do\n+    accel_name=`echo $accel | sed 's/=.*//'`\n+    accel_dir=`echo $accel | grep '=' | sed 's/.*=//'`\n+    case \"$accel_name\" in\n+      *-intelmic-* | *-intelmicemul-*)\n+\taccel_target=$accel_name\n+\taccel_search_dir=$accel_dir\n+\t;;\n+    esac\n+  done\n+  if test x\"$accel_target\" = x; then\n+    AC_MSG_ERROR([--enable-offload-targets does not contain intelmic target])\n+  fi\n+fi\n+AC_SUBST(accel_search_dir)\n+AC_SUBST(accel_target)\n+\n+AC_MSG_CHECKING([for --enable-version-specific-runtime-libs])\n+AC_ARG_ENABLE([version-specific-runtime-libs],\n+  AC_HELP_STRING([--enable-version-specific-runtime-libs],\n+\t\t [Specify that runtime libraries should be installed in a compiler-specific directory]),\n+  [case \"$enableval\" in\n+    yes) enable_version_specific_runtime_libs=yes ;;\n+    no)  enable_version_specific_runtime_libs=no ;;\n+    *)   AC_MSG_ERROR([Unknown argument to enable/disable version-specific libs]);;\n+   esac],\n+  [enable_version_specific_runtime_libs=no])\n+AC_MSG_RESULT($enable_version_specific_runtime_libs)\n+\n+\n+# Calculate toolexeclibdir.\n+# Also toolexecdir, though it's only used in toolexeclibdir.\n+case ${enable_version_specific_runtime_libs} in\n+  yes)\n+    # Need the gcc compiler version to know where to install libraries\n+    # and header files if --enable-version-specific-runtime-libs option\n+    # is selected.\n+    toolexecdir='$(libdir)/gcc/$(target_alias)'\n+    toolexeclibdir='$(toolexecdir)/$(gcc_version)$(MULTISUBDIR)'\n+    ;;\n+  no)\n+    if test -n \"$with_cross_host\" &&\n+       test x\"$with_cross_host\" != x\"no\"; then\n+      # Install a library built with a cross compiler in tooldir, not libdir.\n+      toolexecdir='$(exec_prefix)/$(target_alias)'\n+      toolexeclibdir='$(toolexecdir)/lib'\n+    else\n+      toolexecdir='$(libdir)/gcc-lib/$(target_alias)'\n+      toolexeclibdir='$(libdir)'\n+    fi\n+    multi_os_directory=`$CC -print-multi-os-directory`\n+    case $multi_os_directory in\n+      .) ;; # Avoid trailing /.\n+      *) toolexeclibdir=$toolexeclibdir/$multi_os_directory ;;\n+    esac\n+    ;;\n+esac\n+\n+AC_LIBTOOL_DLOPEN\n+AM_PROG_LIBTOOL\n+# Forbid libtool to hardcode RPATH, because we want to be able to specify\n+# library search directory using LD_LIBRARY_PATH\n+hardcode_into_libs=no\n+AC_SUBST(toolexecdir)\n+AC_SUBST(toolexeclibdir)\n+\n+# Must be last\n+AC_OUTPUT"}, {"sha": "28ddbc39db627aa9d0ced3d0863c21db460469ce", "filename": "liboffloadmic/plugin/libgomp-plugin-intelmic.cpp", "status": "added", "additions": 447, "deletions": 0, "changes": 447, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Flibgomp-plugin-intelmic.cpp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Flibgomp-plugin-intelmic.cpp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fplugin%2Flibgomp-plugin-intelmic.cpp?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -0,0 +1,447 @@\n+/* Plugin for offload execution on Intel MIC devices.\n+\n+   Copyright (C) 2014 Free Software Foundation, Inc.\n+\n+   Contributed by Ilya Verbin <ilya.verbin@intel.com>.\n+\n+   This file is part of the GNU OpenMP Library (libgomp).\n+\n+   Libgomp is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+   more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+/* Host side part of a libgomp plugin.  */\n+\n+#include <stdint.h>\n+#include <stdio.h>\n+#include <stdlib.h>\n+#include <string.h>\n+#include <utility>\n+#include <vector>\n+#include <libgomp_target.h>\n+#include \"compiler_if_host.h\"\n+#include \"main_target_image.h\"\n+\n+#define LD_LIBRARY_PATH_ENV\t\"LD_LIBRARY_PATH\"\n+#define MIC_LD_LIBRARY_PATH_ENV\t\"MIC_LD_LIBRARY_PATH\"\n+\n+#ifdef DEBUG\n+#define TRACE(...)\t\t\t\t\t    \\\n+{\t\t\t\t\t\t\t    \\\n+fprintf (stderr, \"HOST:\\t%s:%s \", __FILE__, __FUNCTION__);  \\\n+fprintf (stderr, __VA_ARGS__);\t\t\t\t    \\\n+fprintf (stderr, \"\\n\");\t\t\t\t\t    \\\n+}\n+#else\n+#define TRACE { }\n+#endif\n+\n+\n+static VarDesc vd_host2tgt = {\n+  { 1, 1 },\t\t      /* dst, src\t\t\t      */\n+  { 1, 0 },\t\t      /* in, out\t\t\t      */\n+  1,\t\t\t      /* alloc_if\t\t\t      */\n+  1,\t\t\t      /* free_if\t\t\t      */\n+  4,\t\t\t      /* align\t\t\t\t      */\n+  0,\t\t\t      /* mic_offset\t\t\t      */\n+  { 0, 0, 0, 0, 0, 0, 0, 0 }, /* is_static, is_static_dstn, has_length,\n+\t\t\t\t is_stack_buf, sink_addr, alloc_disp,\n+\t\t\t\t is_noncont_src, is_noncont_dst\t      */\n+  0,\t\t\t      /* offset\t\t\t\t      */\n+  0,\t\t\t      /* size\t\t\t\t      */\n+  1,\t\t\t      /* count\t\t\t\t      */\n+  0,\t\t\t      /* alloc\t\t\t\t      */\n+  0,\t\t\t      /* into\t\t\t\t      */\n+  0\t\t\t      /* ptr\t\t\t\t      */\n+};\n+\n+static VarDesc vd_tgt2host = {\n+  { 1, 1 },\t\t      /* dst, src\t\t\t      */\n+  { 0, 1 },\t\t      /* in, out\t\t\t      */\n+  1,\t\t\t      /* alloc_if\t\t\t      */\n+  1,\t\t\t      /* free_if\t\t\t      */\n+  4,\t\t\t      /* align\t\t\t\t      */\n+  0,\t\t\t      /* mic_offset\t\t\t      */\n+  { 0, 0, 0, 0, 0, 0, 0, 0 }, /* is_static, is_static_dstn, has_length,\n+\t\t\t\t is_stack_buf, sink_addr, alloc_disp,\n+\t\t\t\t is_noncont_src, is_noncont_dst\t      */\n+  0,\t\t\t      /* offset\t\t\t\t      */\n+  0,\t\t\t      /* size\t\t\t\t      */\n+  1,\t\t\t      /* count\t\t\t\t      */\n+  0,\t\t\t      /* alloc\t\t\t\t      */\n+  0,\t\t\t      /* into\t\t\t\t      */\n+  0\t\t\t      /* ptr\t\t\t\t      */\n+};\n+\n+\n+/* Total number of shared libraries with offloading to Intel MIC.  */\n+static int num_libraries;\n+\n+/* Pointers to the descriptors, containing pointers to host-side tables and to\n+   target images.  */\n+static std::vector< std::pair<void *, void *> > lib_descrs;\n+\n+/* Thread-safe registration of the main image.  */\n+static pthread_once_t main_image_is_registered = PTHREAD_ONCE_INIT;\n+\n+\n+/* Add path specified in LD_LIBRARY_PATH to MIC_LD_LIBRARY_PATH, which is\n+   required by liboffloadmic.  */\n+__attribute__((constructor))\n+static void\n+set_mic_lib_path (void)\n+{\n+  const char *ld_lib_path = getenv (LD_LIBRARY_PATH_ENV);\n+  const char *mic_lib_path = getenv (MIC_LD_LIBRARY_PATH_ENV);\n+\n+  if (!ld_lib_path)\n+    return;\n+\n+  if (!mic_lib_path)\n+    setenv (MIC_LD_LIBRARY_PATH_ENV, ld_lib_path, 1);\n+  else\n+    {\n+      size_t len = strlen (mic_lib_path) + strlen (ld_lib_path) + 2;\n+      bool use_alloca = len <= 2048;\n+      char *mic_lib_path_new = (char *) (use_alloca ? alloca (len)\n+\t\t\t\t\t\t    : malloc (len));\n+      if (!mic_lib_path_new)\n+\t{\n+\t  fprintf (stderr, \"%s: Can't allocate memory\\n\", __FILE__);\n+\t  exit (1);\n+\t}\n+\n+      sprintf (mic_lib_path_new, \"%s:%s\", mic_lib_path, ld_lib_path);\n+      setenv (MIC_LD_LIBRARY_PATH_ENV, mic_lib_path_new, 1);\n+\n+      if (!use_alloca)\n+\tfree (mic_lib_path_new);\n+    }\n+}\n+\n+extern \"C\" enum offload_target_type\n+GOMP_OFFLOAD_get_type (void)\n+{\n+  enum offload_target_type res = OFFLOAD_TARGET_TYPE_INTEL_MIC;\n+  TRACE (\"(): return %d\", res);\n+  return res;\n+}\n+\n+extern \"C\" int\n+GOMP_OFFLOAD_get_num_devices (void)\n+{\n+  int res = _Offload_number_of_devices ();\n+  TRACE (\"(): return %d\", res);\n+  return res;\n+}\n+\n+/* This should be called from every shared library with offloading.  */\n+extern \"C\" void\n+GOMP_OFFLOAD_register_image (void *host_table, void *target_image)\n+{\n+  TRACE (\"(host_table = %p, target_image = %p)\", host_table, target_image);\n+  lib_descrs.push_back (std::make_pair (host_table, target_image));\n+  num_libraries++;\n+}\n+\n+static void\n+offload (const char *file, uint64_t line, int device, const char *name,\n+\t int num_vars, VarDesc *vars, VarDesc2 *vars2)\n+{\n+  OFFLOAD ofld = __offload_target_acquire1 (&device, file, line);\n+  if (ofld)\n+    __offload_offload1 (ofld, name, 0, num_vars, vars, vars2, 0, NULL, NULL);\n+  else\n+    {\n+      fprintf (stderr, \"%s:%d: Offload target acquire failed\\n\", file, line);\n+      exit (1);\n+    }\n+}\n+\n+static void\n+register_main_image ()\n+{\n+  __offload_register_image (&main_target_image);\n+}\n+\n+/* Load offload_target_main on target.  */\n+extern \"C\" void\n+GOMP_OFFLOAD_init_device (int device)\n+{\n+  TRACE (\"\");\n+  pthread_once (&main_image_is_registered, register_main_image);\n+  offload (__FILE__, __LINE__, device, \"__offload_target_init_proc\", 0,\n+\t   NULL, NULL);\n+}\n+\n+static void\n+get_target_table (int device, int &num_funcs, int &num_vars, void **&table)\n+{\n+  VarDesc vd1[2] = { vd_tgt2host, vd_tgt2host };\n+  vd1[0].ptr = &num_funcs;\n+  vd1[0].size = sizeof (num_funcs);\n+  vd1[1].ptr = &num_vars;\n+  vd1[1].size = sizeof (num_vars);\n+  VarDesc2 vd1g[2] = { { \"num_funcs\", 0 }, { \"num_vars\", 0 } };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_table_p1\", 2,\n+\t   vd1, vd1g);\n+\n+  int table_size = num_funcs + 2 * num_vars;\n+  if (table_size > 0)\n+    {\n+      table = new void * [table_size];\n+\n+      VarDesc vd2;\n+      vd2 = vd_tgt2host;\n+      vd2.ptr = table;\n+      vd2.size = table_size * sizeof (void *);\n+      VarDesc2 vd2g = { \"table\", 0 };\n+\n+      offload (__FILE__, __LINE__, device, \"__offload_target_table_p2\", 1,\n+\t       &vd2, &vd2g);\n+    }\n+}\n+\n+static void\n+load_lib_and_get_table (int device, int lib_num, mapping_table *&table,\n+\t\t\tint &table_size)\n+{\n+  struct TargetImage {\n+    int64_t size;\n+    /* 10 characters is enough for max int value.  */\n+    char name[sizeof (\"lib0000000000.so\")];\n+    char data[];\n+  } __attribute__ ((packed));\n+\n+  void ***host_table_descr = (void ***) lib_descrs[lib_num].first;\n+  void **host_func_start = host_table_descr[0];\n+  void **host_func_end   = host_table_descr[1];\n+  void **host_var_start  = host_table_descr[2];\n+  void **host_var_end    = host_table_descr[3];\n+\n+  void **target_image_descr = (void **) lib_descrs[lib_num].second;\n+  void *image_start = target_image_descr[0];\n+  void *image_end   = target_image_descr[1];\n+\n+  TRACE (\"() host_table_descr { %p, %p, %p, %p }\", host_func_start,\n+\t host_func_end, host_var_start, host_var_end);\n+  TRACE (\"() target_image_descr { %p, %p }\", image_start, image_end);\n+\n+  int64_t image_size = (uintptr_t) image_end - (uintptr_t) image_start;\n+  TargetImage *image\n+    = (TargetImage *) malloc (sizeof (int64_t) + sizeof (\"lib0000000000.so\")\n+\t\t\t      + image_size);\n+  if (!image)\n+    {\n+      fprintf (stderr, \"%s: Can't allocate memory\\n\", __FILE__);\n+      exit (1);\n+    }\n+\n+  image->size = image_size;\n+  sprintf (image->name, \"lib%010d.so\", lib_num);\n+  memcpy (image->data, image_start, image->size);\n+\n+  TRACE (\"() __offload_register_image %s { %p, %d }\",\n+\t image->name, image_start, image->size);\n+  __offload_register_image (image);\n+\n+  int tgt_num_funcs = 0;\n+  int tgt_num_vars = 0;\n+  void **tgt_table = NULL;\n+  get_target_table (device, tgt_num_funcs, tgt_num_vars, tgt_table);\n+  free (image);\n+\n+  /* The func table contains only addresses, the var table contains addresses\n+     and corresponding sizes.  */\n+  int host_num_funcs = host_func_end - host_func_start;\n+  int host_num_vars  = (host_var_end - host_var_start) / 2;\n+  TRACE (\"() host_num_funcs = %d, tgt_num_funcs = %d\",\n+\t host_num_funcs, tgt_num_funcs);\n+  TRACE (\"() host_num_vars = %d, tgt_num_vars = %d\",\n+\t host_num_vars, tgt_num_vars);\n+  if (host_num_funcs != tgt_num_funcs)\n+    {\n+      fprintf (stderr, \"%s: Can't map target functions\\n\", __FILE__);\n+      exit (1);\n+    }\n+  if (host_num_vars != tgt_num_vars)\n+    {\n+      fprintf (stderr, \"%s: Can't map target variables\\n\", __FILE__);\n+      exit (1);\n+    }\n+\n+  table = (mapping_table *) realloc (table, (table_size + host_num_funcs\n+\t\t\t\t\t     + host_num_vars)\n+\t\t\t\t\t    * sizeof (mapping_table));\n+  if (table == NULL)\n+    {\n+      fprintf (stderr, \"%s: Can't allocate memory\\n\", __FILE__);\n+      exit (1);\n+    }\n+\n+  for (int i = 0; i < host_num_funcs; i++)\n+    {\n+      mapping_table t;\n+      t.host_start = (uintptr_t) host_func_start[i];\n+      t.host_end = t.host_start + 1;\n+      t.tgt_start = (uintptr_t) tgt_table[i];\n+      t.tgt_end = t.tgt_start + 1;\n+\n+      TRACE (\"() lib %d, func %d:\\t0x%llx -- 0x%llx\",\n+\t     lib_num, i, t.host_start, t.tgt_start);\n+\n+      table[table_size++] = t;\n+    }\n+\n+  for (int i = 0; i < host_num_vars * 2; i += 2)\n+    {\n+      mapping_table t;\n+      t.host_start = (uintptr_t) host_var_start[i];\n+      t.host_end = t.host_start + (uintptr_t) host_var_start[i+1];\n+      t.tgt_start = (uintptr_t) tgt_table[tgt_num_funcs+i];\n+      t.tgt_end = t.tgt_start + (uintptr_t) tgt_table[tgt_num_funcs+i+1];\n+\n+      TRACE (\"() lib %d, var %d:\\t0x%llx (%d) -- 0x%llx (%d)\", lib_num, i/2,\n+\t     t.host_start, t.host_end - t.host_start,\n+\t     t.tgt_start, t.tgt_end - t.tgt_start);\n+\n+      table[table_size++] = t;\n+    }\n+\n+  delete [] tgt_table;\n+}\n+\n+extern \"C\" int\n+GOMP_OFFLOAD_get_table (int device, void *result)\n+{\n+  TRACE (\"(num_libraries = %d)\", num_libraries);\n+\n+  mapping_table *table = NULL;\n+  int table_size = 0;\n+\n+  for (int i = 0; i < num_libraries; i++)\n+    load_lib_and_get_table (device, i, table, table_size);\n+\n+  *(void **) result = table;\n+  return table_size;\n+}\n+\n+extern \"C\" void *\n+GOMP_OFFLOAD_alloc (int device, size_t size)\n+{\n+  TRACE (\"(size = %d)\", size);\n+\n+  void *tgt_ptr;\n+  VarDesc vd1[2] = { vd_host2tgt, vd_tgt2host };\n+  vd1[0].ptr = &size;\n+  vd1[0].size = sizeof (size);\n+  vd1[1].ptr = &tgt_ptr;\n+  vd1[1].size = sizeof (void *);\n+  VarDesc2 vd1g[2] = { { \"size\", 0 }, { \"tgt_ptr\", 0 } };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_alloc\", 2, vd1, vd1g);\n+\n+  return tgt_ptr;\n+}\n+\n+extern \"C\" void\n+GOMP_OFFLOAD_free (int device, void *tgt_ptr)\n+{\n+  TRACE (\"(tgt_ptr = %p)\", tgt_ptr);\n+\n+  VarDesc vd1 = vd_host2tgt;\n+  vd1.ptr = &tgt_ptr;\n+  vd1.size = sizeof (void *);\n+  VarDesc2 vd1g = { \"tgt_ptr\", 0 };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_free\", 1, &vd1, &vd1g);\n+}\n+\n+extern \"C\" void *\n+GOMP_OFFLOAD_host2dev (int device, void *tgt_ptr, const void *host_ptr,\n+\t\t       size_t size)\n+{\n+  TRACE (\"(tgt_ptr = %p, host_ptr = %p, size = %d)\", tgt_ptr, host_ptr, size);\n+  if (!size)\n+    return tgt_ptr;\n+\n+  VarDesc vd1[2] = { vd_host2tgt, vd_host2tgt };\n+  vd1[0].ptr = &tgt_ptr;\n+  vd1[0].size = sizeof (void *);\n+  vd1[1].ptr = &size;\n+  vd1[1].size = sizeof (size);\n+  VarDesc2 vd1g[2] = { { \"tgt_ptr\", 0 }, { \"size\", 0 } };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_host2tgt_p1\", 2,\n+\t   vd1, vd1g);\n+\n+  VarDesc vd2 = vd_host2tgt;\n+  vd2.ptr = (void *) host_ptr;\n+  vd2.size = size;\n+  VarDesc2 vd2g = { \"var\", 0 };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_host2tgt_p2\", 1,\n+\t   &vd2, &vd2g);\n+\n+  return tgt_ptr;\n+}\n+\n+extern \"C\" void *\n+GOMP_OFFLOAD_dev2host (int device, void *host_ptr, const void *tgt_ptr,\n+\t\t       size_t size)\n+{\n+  TRACE (\"(host_ptr = %p, tgt_ptr = %p, size = %d)\", host_ptr, tgt_ptr, size);\n+  if (!size)\n+    return host_ptr;\n+\n+  VarDesc vd1[2] = { vd_host2tgt, vd_host2tgt };\n+  vd1[0].ptr = &tgt_ptr;\n+  vd1[0].size = sizeof (void *);\n+  vd1[1].ptr = &size;\n+  vd1[1].size = sizeof (size);\n+  VarDesc2 vd1g[2] = { { \"tgt_ptr\", 0 }, { \"size\", 0 } };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_tgt2host_p1\", 2,\n+\t   vd1, vd1g);\n+\n+  VarDesc vd2 = vd_tgt2host;\n+  vd2.ptr = (void *) host_ptr;\n+  vd2.size = size;\n+  VarDesc2 vd2g = { \"var\", 0 };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_tgt2host_p2\", 1,\n+\t   &vd2, &vd2g);\n+\n+  return host_ptr;\n+}\n+\n+extern \"C\" void\n+GOMP_OFFLOAD_run (int device, void *tgt_fn, void *tgt_vars)\n+{\n+  TRACE (\"(tgt_fn = %p, tgt_vars = %p)\", tgt_fn, tgt_vars);\n+\n+  VarDesc vd1[2] = { vd_host2tgt, vd_host2tgt };\n+  vd1[0].ptr = &tgt_fn;\n+  vd1[0].size = sizeof (void *);\n+  vd1[1].ptr = &tgt_vars;\n+  vd1[1].size = sizeof (void *);\n+  VarDesc2 vd1g[2] = { { \"tgt_fn\", 0 }, { \"tgt_vars\", 0 } };\n+\n+  offload (__FILE__, __LINE__, device, \"__offload_target_run\", 2, vd1, vd1g);\n+}"}, {"sha": "4a2778e9c57d592f0c1a3014e4959251fbeb9fb3", "filename": "liboffloadmic/plugin/offload_target_main.cpp", "status": "added", "additions": 366, "deletions": 0, "changes": 366, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Foffload_target_main.cpp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d73ec14be1b2537394f3b137ee4da016e031dac/liboffloadmic%2Fplugin%2Foffload_target_main.cpp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/liboffloadmic%2Fplugin%2Foffload_target_main.cpp?ref=9d73ec14be1b2537394f3b137ee4da016e031dac", "patch": "@@ -0,0 +1,366 @@\n+/* Plugin for offload execution on Intel MIC devices.\n+\n+   Copyright (C) 2014 Free Software Foundation, Inc.\n+\n+   Contributed by Ilya Verbin <ilya.verbin@intel.com>.\n+\n+   This file is part of the GNU OpenMP Library (libgomp).\n+\n+   Libgomp is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   Libgomp is distributed in the hope that it will be useful, but WITHOUT ANY\n+   WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n+   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for\n+   more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+/* Target side part of a libgomp plugin.  */\n+\n+#include <stdint.h>\n+#include <stdio.h>\n+#include <stdlib.h>\n+#include \"compiler_if_target.h\"\n+\n+\n+#ifdef DEBUG\n+#define TRACE(...)\t\t\t\t\t      \\\n+{\t\t\t\t\t\t\t      \\\n+fprintf (stderr, \"TARGET:\\t%s:%s \", __FILE__, __FUNCTION__);  \\\n+fprintf (stderr, __VA_ARGS__);\t\t\t\t      \\\n+fprintf (stderr, \"\\n\");\t\t\t\t\t      \\\n+}\n+#else\n+#define TRACE { }\n+#endif\n+\n+\n+static VarDesc vd_host2tgt = {\n+  { 1, 1 },\t\t      /* dst, src\t\t\t      */\n+  { 1, 0 },\t\t      /* in, out\t\t\t      */\n+  1,\t\t\t      /* alloc_if\t\t\t      */\n+  1,\t\t\t      /* free_if\t\t\t      */\n+  4,\t\t\t      /* align\t\t\t\t      */\n+  0,\t\t\t      /* mic_offset\t\t\t      */\n+  { 0, 0, 0, 0, 0, 0, 0, 0 }, /* is_static, is_static_dstn, has_length,\n+\t\t\t\t is_stack_buf, sink_addr, alloc_disp,\n+\t\t\t\t is_noncont_src, is_noncont_dst\t      */\n+  0,\t\t\t      /* offset\t\t\t\t      */\n+  0,\t\t\t      /* size\t\t\t\t      */\n+  1,\t\t\t      /* count\t\t\t\t      */\n+  0,\t\t\t      /* alloc\t\t\t\t      */\n+  0,\t\t\t      /* into\t\t\t\t      */\n+  0\t\t\t      /* ptr\t\t\t\t      */\n+};\n+\n+static VarDesc vd_tgt2host = {\n+  { 1, 1 },\t\t      /* dst, src\t\t\t      */\n+  { 0, 1 },\t\t      /* in, out\t\t\t      */\n+  1,\t\t\t      /* alloc_if\t\t\t      */\n+  1,\t\t\t      /* free_if\t\t\t      */\n+  4,\t\t\t      /* align\t\t\t\t      */\n+  0,\t\t\t      /* mic_offset\t\t\t      */\n+  { 0, 0, 0, 0, 0, 0, 0, 0 }, /* is_static, is_static_dstn, has_length,\n+\t\t\t\t is_stack_buf, sink_addr, alloc_disp,\n+\t\t\t\t is_noncont_src, is_noncont_dst\t      */\n+  0,\t\t\t      /* offset\t\t\t\t      */\n+  0,\t\t\t      /* size\t\t\t\t      */\n+  1,\t\t\t      /* count\t\t\t\t      */\n+  0,\t\t\t      /* alloc\t\t\t\t      */\n+  0,\t\t\t      /* into\t\t\t\t      */\n+  0\t\t\t      /* ptr\t\t\t\t      */\n+};\n+\n+/* Pointer to the descriptor of the last loaded shared library.  */\n+static void *last_loaded_library = NULL;\n+\n+/* Pointer and size of the variable, used in __offload_target_host2tgt_p[12]\n+   and __offload_target_tgt2host_p[12].  */\n+static void *last_var_ptr = NULL;\n+static int last_var_size = 0;\n+\n+\n+/* Override the corresponding functions from libgomp.  */\n+extern \"C\" int\n+omp_is_initial_device (void) __GOMP_NOTHROW\n+{\n+  return 0;\n+}\n+\n+extern \"C\" int32_t\n+omp_is_initial_device_ (void)\n+{\n+  return omp_is_initial_device ();\n+}\n+\n+\n+/* Dummy function needed for the initialization of target process during the\n+   first call to __offload_offload1.  */\n+static void\n+__offload_target_init_proc (OFFLOAD ofldt)\n+{\n+  TRACE (\"\");\n+}\n+\n+/* Collect addresses of the offload functions and of the global variables from\n+   the library descriptor and send them to host.\n+   Part 1: Send num_funcs and num_vars to host.  */\n+static void\n+__offload_target_table_p1 (OFFLOAD ofldt)\n+{\n+  void ***lib_descr = (void ***) last_loaded_library;\n+\n+  if (lib_descr == NULL)\n+    {\n+      TRACE (\"\");\n+      fprintf (stderr, \"Error! No shared libraries loaded on target.\\n\");\n+      return;\n+    }\n+\n+  void **func_table_begin = lib_descr[0];\n+  void **func_table_end   = lib_descr[1];\n+  void **var_table_begin  = lib_descr[2];\n+  void **var_table_end    = lib_descr[3];\n+\n+  /* The func table contains only addresses, the var table contains addresses\n+     and corresponding sizes.  */\n+  int num_funcs = func_table_end - func_table_begin;\n+  int num_vars = (var_table_end - var_table_begin) / 2;\n+  TRACE (\"(num_funcs = %d, num_vars = %d)\", num_funcs, num_vars);\n+\n+  VarDesc vd1[2] = { vd_tgt2host, vd_tgt2host };\n+  vd1[0].ptr = &num_funcs;\n+  vd1[0].size = sizeof (num_funcs);\n+  vd1[1].ptr = &num_vars;\n+  vd1[1].size = sizeof (num_vars);\n+  VarDesc2 vd2[2] = { { \"num_funcs\", 0 }, { \"num_vars\", 0 } };\n+\n+  __offload_target_enter (ofldt, 2, vd1, vd2);\n+  __offload_target_leave (ofldt);\n+}\n+\n+/* Part 2: Send the table with addresses to host.  */\n+static void\n+__offload_target_table_p2 (OFFLOAD ofldt)\n+{\n+  void ***lib_descr = (void ***) last_loaded_library;\n+  void **func_table_begin = lib_descr[0];\n+  void **func_table_end   = lib_descr[1];\n+  void **var_table_begin  = lib_descr[2];\n+  void **var_table_end    = lib_descr[3];\n+\n+  int num_funcs = func_table_end - func_table_begin;\n+  int num_vars = (var_table_end - var_table_begin) / 2;\n+  int table_size = (num_funcs + 2 * num_vars) * sizeof (void *);\n+  void **table = (void **) malloc (table_size);\n+  TRACE (\"(table_size = %d)\", table_size);\n+\n+  VarDesc vd1;\n+  vd1 = vd_tgt2host;\n+  vd1.ptr = table;\n+  vd1.size = table_size;\n+  VarDesc2 vd2 = { \"table\", 0 };\n+\n+  __offload_target_enter (ofldt, 1, &vd1, &vd2);\n+\n+  void **p;\n+  int i = 0;\n+  for (p = func_table_begin; p < func_table_end; p++, i++)\n+    table[i] = *p;\n+\n+  for (p = var_table_begin; p < var_table_end; p++, i++)\n+    table[i] = *p;\n+\n+  __offload_target_leave (ofldt);\n+  free (table);\n+}\n+\n+/* Allocate size bytes and send a pointer to the allocated memory to host.  */\n+static void\n+__offload_target_alloc (OFFLOAD ofldt)\n+{\n+  size_t size = 0;\n+  void *ptr = NULL;\n+\n+  VarDesc vd1[2] = { vd_host2tgt, vd_tgt2host };\n+  vd1[0].ptr = &size;\n+  vd1[0].size = sizeof (size);\n+  vd1[1].ptr = &ptr;\n+  vd1[1].size = sizeof (void *);\n+  VarDesc2 vd2[2] = { { \"size\", 0 }, { \"ptr\", 0 } };\n+\n+  __offload_target_enter (ofldt, 2, vd1, vd2);\n+  ptr = malloc (size);\n+  TRACE (\"(size = %d): ptr = %p\", size, ptr);\n+  __offload_target_leave (ofldt);\n+}\n+\n+/* Free the memory space pointed to by ptr.  */\n+static void\n+__offload_target_free (OFFLOAD ofldt)\n+{\n+  void *ptr = 0;\n+\n+  VarDesc vd1 = vd_host2tgt;\n+  vd1.ptr = &ptr;\n+  vd1.size = sizeof (void *);\n+  VarDesc2 vd2 = { \"ptr\", 0 };\n+\n+  __offload_target_enter (ofldt, 1, &vd1, &vd2);\n+  TRACE (\"(ptr = %p)\", ptr);\n+  free (ptr);\n+  __offload_target_leave (ofldt);\n+}\n+\n+/* Receive var_size bytes from host and store to var_ptr.\n+   Part 1: Receive var_ptr and var_size from host.  */\n+static void\n+__offload_target_host2tgt_p1 (OFFLOAD ofldt)\n+{\n+  void *var_ptr = NULL;\n+  size_t var_size = 0;\n+\n+  VarDesc vd1[2] = { vd_host2tgt, vd_host2tgt };\n+  vd1[0].ptr = &var_ptr;\n+  vd1[0].size = sizeof (void *);\n+  vd1[1].ptr = &var_size;\n+  vd1[1].size = sizeof (var_size);\n+  VarDesc2 vd2[2] = { { \"var_ptr\", 0 }, { \"var_size\", 0 } };\n+\n+  __offload_target_enter (ofldt, 2, vd1, vd2);\n+  TRACE (\"(var_ptr = %p, var_size = %d)\", var_ptr, var_size);\n+  last_var_ptr = var_ptr;\n+  last_var_size = var_size;\n+  __offload_target_leave (ofldt);\n+}\n+\n+/* Part 2: Receive the data from host.  */\n+static void\n+__offload_target_host2tgt_p2 (OFFLOAD ofldt)\n+{\n+  TRACE (\"(last_var_ptr = %p, last_var_size = %d)\",\n+\t last_var_ptr, last_var_size);\n+\n+  VarDesc vd1 = vd_host2tgt;\n+  vd1.ptr = last_var_ptr;\n+  vd1.size = last_var_size;\n+  VarDesc2 vd2 = { \"var\", 0 };\n+\n+  __offload_target_enter (ofldt, 1, &vd1, &vd2);\n+  __offload_target_leave (ofldt);\n+}\n+\n+/* Send var_size bytes from var_ptr to host.\n+   Part 1: Receive var_ptr and var_size from host.  */\n+static void\n+__offload_target_tgt2host_p1 (OFFLOAD ofldt)\n+{\n+  void *var_ptr = NULL;\n+  size_t var_size = 0;\n+\n+  VarDesc vd1[2] = { vd_host2tgt, vd_host2tgt };\n+  vd1[0].ptr = &var_ptr;\n+  vd1[0].size = sizeof (void *);\n+  vd1[1].ptr = &var_size;\n+  vd1[1].size = sizeof (var_size);\n+  VarDesc2 vd2[2] = { { \"var_ptr\", 0 }, { \"var_size\", 0 } };\n+\n+  __offload_target_enter (ofldt, 2, vd1, vd2);\n+  TRACE (\"(var_ptr = %p, var_size = %d)\", var_ptr, var_size);\n+  last_var_ptr = var_ptr;\n+  last_var_size = var_size;\n+  __offload_target_leave (ofldt);\n+}\n+\n+/* Part 2: Send the data to host.  */\n+static void\n+__offload_target_tgt2host_p2 (OFFLOAD ofldt)\n+{\n+  TRACE (\"(last_var_ptr = %p, last_var_size = %d)\",\n+\t last_var_ptr, last_var_size);\n+\n+  VarDesc vd1 = vd_tgt2host;\n+  vd1.ptr = last_var_ptr;\n+  vd1.size = last_var_size;\n+  VarDesc2 vd2 = { \"var\", 0 };\n+\n+  __offload_target_enter (ofldt, 1, &vd1, &vd2);\n+  __offload_target_leave (ofldt);\n+}\n+\n+/* Call offload function by the address fn_ptr and pass vars_ptr to it.  */\n+static void\n+__offload_target_run (OFFLOAD ofldt)\n+{\n+  void *fn_ptr;\n+  void *vars_ptr;\n+\n+  VarDesc vd1[2] = { vd_host2tgt, vd_host2tgt };\n+  vd1[0].ptr = &fn_ptr;\n+  vd1[0].size = sizeof (void *);\n+  vd1[1].ptr = &vars_ptr;\n+  vd1[1].size = sizeof (void *);\n+  VarDesc2 vd2[2] = { { \"fn_ptr\", 0 }, { \"vars_ptr\", 0 } };\n+\n+  __offload_target_enter (ofldt, 2, vd1, vd2);\n+  TRACE (\"(fn_ptr = %p, vars_ptr = %p)\", fn_ptr, vars_ptr);\n+  void (*fn)(void *) = (void (*)(void *)) fn_ptr;\n+  fn (vars_ptr);\n+  __offload_target_leave (ofldt);\n+}\n+\n+\n+/* This should be called from every library with offloading.  */\n+extern \"C\" void\n+target_register_lib (const void *target_table)\n+{\n+  TRACE (\"(target_table = %p { %p, %p, %p, %p })\", target_table,\n+\t ((void **) target_table)[0], ((void **) target_table)[1],\n+\t ((void **) target_table)[2], ((void **) target_table)[3]);\n+\n+  last_loaded_library = (void *) target_table;\n+}\n+\n+/* Use __offload_target_main from liboffload.  */\n+int\n+main (int argc, char **argv)\n+{\n+  __offload_target_main ();\n+  return 0;\n+}\n+\n+\n+/* Register offload_target_main's functions in the liboffload.  */\n+\n+struct Entry {\n+  const char *name;\n+  void *func;\n+};\n+\n+#define REGISTER(f)\t\t\t\t      \\\n+extern \"C\" const Entry __offload_target_##f##_$entry  \\\n+__attribute__ ((section(\".OffloadEntryTable.\"))) = {  \\\n+  \"__offload_target_\"#f,\t\t\t      \\\n+  (void *) __offload_target_##f\t\t\t      \\\n+}\n+REGISTER (init_proc);\n+REGISTER (table_p1);\n+REGISTER (table_p2);\n+REGISTER (alloc);\n+REGISTER (free);\n+REGISTER (host2tgt_p1);\n+REGISTER (host2tgt_p2);\n+REGISTER (tgt2host_p1);\n+REGISTER (tgt2host_p2);\n+REGISTER (run);\n+#undef REGISTER"}]}