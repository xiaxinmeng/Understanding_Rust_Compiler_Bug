{"sha": "dd9290ec5334de4426f4a510f4a32fd02e012f04", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ5MjkwZWM1MzM0ZGU0NDI2ZjRhNTEwZjRhMzJmZDAyZTAxMmYwNA==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2019-07-09T07:54:10Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-07-09T07:54:10Z"}, "message": "[Ada] Expand Enum_Rep attribute reference in GNATprove mode\n\nIn the special GNATprove mode for proof of programs, expand the Enum_Rep\nattribute reference so that a suitable static integer is in the AST\nwhere required by the rest of analysis.\n\nThere is no impact on compilation.\n\n2019-07-09  Yannick Moy  <moy@adacore.com>\n\ngcc/ada/\n\n\t* exp_spark.adb (Expand_SPARK_N_Attribute_Reference): Expand\n\tattribute reference on Enum_Rep.\n\nFrom-SVN: r273276", "tree": {"sha": "1f54e5a11b614ceeb8945d3f343e62788e98e341", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f54e5a11b614ceeb8945d3f343e62788e98e341"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd9290ec5334de4426f4a510f4a32fd02e012f04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd9290ec5334de4426f4a510f4a32fd02e012f04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd9290ec5334de4426f4a510f4a32fd02e012f04", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd9290ec5334de4426f4a510f4a32fd02e012f04/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a74d1bf6af0aaeb693cdbddf924c9af53f92b549", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a74d1bf6af0aaeb693cdbddf924c9af53f92b549", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a74d1bf6af0aaeb693cdbddf924c9af53f92b549"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "948d0fa30d135891d77e77be32210e35fe2f86f1", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9290ec5334de4426f4a510f4a32fd02e012f04/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9290ec5334de4426f4a510f4a32fd02e012f04/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=dd9290ec5334de4426f4a510f4a32fd02e012f04", "patch": "@@ -1,3 +1,8 @@\n+2019-07-09  Yannick Moy  <moy@adacore.com>\n+\n+\t* exp_spark.adb (Expand_SPARK_N_Attribute_Reference): Expand\n+\tattribute reference on Enum_Rep.\n+\n 2019-07-09  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem_ch12.adb (Instantiate_Formal_Package): Handle properly the"}, {"sha": "58f924376a7763ec6c92bab254ffe0e5b0644979", "filename": "gcc/ada/exp_spark.adb", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9290ec5334de4426f4a510f4a32fd02e012f04/gcc%2Fada%2Fexp_spark.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9290ec5334de4426f4a510f4a32fd02e012f04/gcc%2Fada%2Fexp_spark.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_spark.adb?ref=dd9290ec5334de4426f4a510f4a32fd02e012f04", "patch": "@@ -26,6 +26,7 @@\n with Atree;    use Atree;\n with Checks;   use Checks;\n with Einfo;    use Einfo;\n+with Exp_Attr;\n with Exp_Ch4;\n with Exp_Ch5;  use Exp_Ch5;\n with Exp_Dbug; use Exp_Dbug;\n@@ -196,6 +197,12 @@ package body Exp_SPARK is\n              Parameter_Associations => New_List (Expr)));\n          Analyze_And_Resolve (N, Typ);\n \n+      --  Whenever possible, replace a prefix which is an enumeration literal\n+      --  by the corresponding literal value.\n+\n+      elsif Attr_Id = Attribute_Enum_Rep then\n+         Exp_Attr.Expand_N_Attribute_Reference (N);\n+\n       --  For attributes which return Universal_Integer, introduce a conversion\n       --  to the expected type with the appropriate check flags set.\n "}]}