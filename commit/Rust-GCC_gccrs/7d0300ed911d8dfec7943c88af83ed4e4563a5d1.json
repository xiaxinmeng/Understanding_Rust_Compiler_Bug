{"sha": "7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QwMzAwZWQ5MTFkOGRmZWM3OTQzYzg4YWY4M2VkNGU0NTYzYTVkMQ==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2011-07-30T18:17:55Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2011-07-30T18:17:55Z"}, "message": "re PR fortran/48876 (ICE when initializing character variable with zero-length string)\n\n2011-07-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/48876\n\t* expr.c (gfc_simplify_expr):  If end of a string is less\n\tthan zero, set it to zero.\n\n2011-07-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/48876\n\t* gfortran.dg/string_5.f90:  New test.\n\nFrom-SVN: r176961", "tree": {"sha": "18675d430cf2966640ff55d153fa65f82065dd15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18675d430cf2966640ff55d153fa65f82065dd15"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/comments", "author": null, "committer": null, "parents": [{"sha": "b3421a06f981f875e0aee932b4f80c52dcb37e72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3421a06f981f875e0aee932b4f80c52dcb37e72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3421a06f981f875e0aee932b4f80c52dcb37e72"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "6be5141023b0c2e3d642c587ac67ea91f6b9a6f6", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "patch": "@@ -1,3 +1,9 @@\n+2011-07-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/48876\n+\t* expr.c (gfc_simplify_expr):  If end of a string is less\n+\tthan zero, set it to zero.\n+\n 2011-07-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR fortran/31067"}, {"sha": "549feee61c7c63a7641cf5f30e1ad4f10a675b7d", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "patch": "@@ -1839,6 +1839,9 @@ gfc_simplify_expr (gfc_expr *p, int type)\n \t  if (p->ref && p->ref->u.ss.end)\n \t    gfc_extract_int (p->ref->u.ss.end, &end);\n \n+\t  if (end < 0)\n+\t    end = 0;\n+\n \t  s = gfc_get_wide_string (end - start + 2);\n \t  memcpy (s, p->value.character.string + start,\n \t\t  (end - start) * sizeof (gfc_char_t));"}, {"sha": "3a681d8d31552f4945ac01a8ed06f06e9e8107ad", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "patch": "@@ -1,3 +1,8 @@\n+2011-07-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/48876\n+\t* gfortran.dg/string_5.f90:  New test.\n+\n 2011-07-29  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/49867"}, {"sha": "87ec70942a55b0baf935c8480cb15c4512b9d173", "filename": "gcc/testsuite/gfortran.dg/string_5.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ftestsuite%2Fgfortran.dg%2Fstring_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d0300ed911d8dfec7943c88af83ed4e4563a5d1/gcc%2Ftestsuite%2Fgfortran.dg%2Fstring_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fstring_5.f90?ref=7d0300ed911d8dfec7943c88af83ed4e4563a5d1", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do compile }\n+! PR fortran/48876 - this used to segfault.\n+! Test case contributed by mhp77 (a) gmx.at.\n+program test\n+  character ::  string =  \"string\"( : -1 )\n+end program test\n+"}]}