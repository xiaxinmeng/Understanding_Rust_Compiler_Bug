{"sha": "5dbc00611a86e17d34184aaf748bd5c4832c05b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRiYzAwNjExYTg2ZTE3ZDM0MTg0YWFmNzQ4YmQ1YzQ4MzJjMDViNg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2017-11-17T18:37:58Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2017-11-17T18:37:58Z"}, "message": "Use rcrt1.o%s/grcrt1.o%s to relocate static PIE\n\ncrt1.o is used to create dynamic and non-PIE static executables.  Static\nPIE needs to link with rcrt1.o, instead of crt1.o, which is also used by\nmusl libc and OpenBSD:\n\nhttps://gcc.gnu.org/ml/gcc/2015-06/msg00008.html\n\nto relocate static PIE at run-time.  When -pg is used with -static-pie,\ngrcrt1.o should be used.\n\n\t* config/gnu-user.h (GNU_USER_TARGET_STARTFILE_SPEC): Use\n\trcrt1.o%s/grcrt1.o%s for -static-pie.\n\nFrom-SVN: r254890", "tree": {"sha": "64414fe8cf973a41f805724f401380e9b0538a41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64414fe8cf973a41f805724f401380e9b0538a41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5dbc00611a86e17d34184aaf748bd5c4832c05b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dbc00611a86e17d34184aaf748bd5c4832c05b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dbc00611a86e17d34184aaf748bd5c4832c05b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dbc00611a86e17d34184aaf748bd5c4832c05b6/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "274c2d3f146e70e7205a2472c6f4d9a93380a80b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/274c2d3f146e70e7205a2472c6f4d9a93380a80b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/274c2d3f146e70e7205a2472c6f4d9a93380a80b"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "5c02a76121d709af10fc237239f660fc031063d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dbc00611a86e17d34184aaf748bd5c4832c05b6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dbc00611a86e17d34184aaf748bd5c4832c05b6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5dbc00611a86e17d34184aaf748bd5c4832c05b6", "patch": "@@ -1,3 +1,8 @@\n+2017-11-17  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config/gnu-user.h (GNU_USER_TARGET_STARTFILE_SPEC): Use\n+\trcrt1.o%s/grcrt1.o%s for -static-pie.\n+\n 2017-11-17  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* i386.c (ix86_multiplication_cost, ix86_division_cost,"}, {"sha": "93960f5cacb1074c76931193a85b5a680b65ab87", "filename": "gcc/config/gnu-user.h", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dbc00611a86e17d34184aaf748bd5c4832c05b6/gcc%2Fconfig%2Fgnu-user.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dbc00611a86e17d34184aaf748bd5c4832c05b6/gcc%2Fconfig%2Fgnu-user.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgnu-user.h?ref=5dbc00611a86e17d34184aaf748bd5c4832c05b6", "patch": "@@ -51,9 +51,10 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #if defined HAVE_LD_PIE\n #define GNU_USER_TARGET_STARTFILE_SPEC \\\n   \"%{shared:; \\\n-     pg|p|profile:gcrt1.o%s; \\\n+     pg|p|profile:%{static-pie:grcrt1.o%s;:gcrt1.o%s}; \\\n      static:crt1.o%s; \\\n-     static-pie|\" PIE_SPEC \":Scrt1.o%s; \\\n+     static-pie:rcrt1.o%s; \\\n+     \" PIE_SPEC \":Scrt1.o%s; \\\n      :crt1.o%s} \\\n    crti.o%s \\\n    %{static:crtbeginT.o%s; \\"}]}