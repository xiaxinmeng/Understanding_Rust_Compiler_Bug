{"sha": "b798d8b64db189b0d3481263de714817ede0e4ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjc5OGQ4YjY0ZGIxODliMGQzNDgxMjYzZGU3MTQ4MTdlZGUwZTRjZQ==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@waitaki.otago.ac.nz", "date": "2002-04-17T23:13:11Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2002-04-17T23:13:11Z"}, "message": "class.c (make_class_data): Set DECL_ALIGN on static class data, for hash synchronization.\n\n\t* class.c (make_class_data): Set DECL_ALIGN on static class data,\n\tfor hash synchronization.\n\t* expr.c (java_expand_expr): Set DECL_ALIGN on static array objects.\n\t* decl.c (java_init_decl_processing): Don't set TYPE_ALIGN for\n\tclass_type_node.\n\nFrom-SVN: r52448", "tree": {"sha": "586cfa68033482cd0f99fe79ca195bd293bb4892", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/586cfa68033482cd0f99fe79ca195bd293bb4892"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b798d8b64db189b0d3481263de714817ede0e4ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b798d8b64db189b0d3481263de714817ede0e4ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b798d8b64db189b0d3481263de714817ede0e4ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b798d8b64db189b0d3481263de714817ede0e4ce/comments", "author": null, "committer": null, "parents": [{"sha": "b7403f10f2892ac2f2f4f09f9635d41043f728d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7403f10f2892ac2f2f4f09f9635d41043f728d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7403f10f2892ac2f2f4f09f9635d41043f728d9"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "db10f95777dd77d790fc94c5180b47cde3fa9e15", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=b798d8b64db189b0d3481263de714817ede0e4ce", "patch": "@@ -1,3 +1,11 @@\n+2002-04-18  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\t* class.c (make_class_data): Set DECL_ALIGN on static class data,\n+\tfor hash synchronization.\n+\t* expr.c (java_expand_expr): Set DECL_ALIGN on static array objects.\n+\t* decl.c (java_init_decl_processing): Don't set TYPE_ALIGN for\n+\tclass_type_node.\n+\n 2002-04-16  Mark Wielaard  <mark@klomp.org>\n \n \t* jcf-write.c (generate_bytecode_insns): Only write const_0 if not"}, {"sha": "7b8c5e06c3a0a94ed1a185c3779368fdbdfecf30", "filename": "gcc/java/class.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=b798d8b64db189b0d3481263de714817ede0e4ce", "patch": "@@ -1736,6 +1736,11 @@ make_class_data (type)\n   FINISH_RECORD_CONSTRUCTOR (cons);\n \n   DECL_INITIAL (decl) = cons;\n+  \n+  /* Hash synchronization requires at least 64-bit alignment. */\n+  if (flag_hash_synchronization && POINTER_SIZE < 64)\n+    DECL_ALIGN (decl) = 64; \n+  \n   rest_of_decl_compilation (decl, (char*) 0, 1, 0);\n }\n "}, {"sha": "c3dd5ae67d4189ec4434361a03082bb857417c4b", "filename": "gcc/java/decl.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fdecl.c?ref=b798d8b64db189b0d3481263de714817ede0e4ce", "patch": "@@ -682,10 +682,6 @@ java_init_decl_processing ()\n     FIELD_PRIVATE (t) = 1;\n   push_super_field (class_type_node, object_type_node);\n \n-  /* Hash synchronization requires at least double-word alignment. */\n-  if (flag_hash_synchronization && POINTER_SIZE < 64)\n-    TYPE_ALIGN (class_type_node) = 64;\n-\n   FINISH_RECORD (class_type_node);\n   build_decl (TYPE_DECL, get_identifier (\"Class\"), class_type_node);\n "}, {"sha": "dd736c77d00be9a29e03daa9ab4eb8abee74cac7", "filename": "gcc/java/expr.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b798d8b64db189b0d3481263de714817ede0e4ce/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=b798d8b64db189b0d3481263de714817ede0e4ce", "patch": "@@ -2526,6 +2526,9 @@ java_expand_expr (exp, target, tmode, modifier)\n \t    DECL_INITIAL (init_decl) = value;\n \t    DECL_IGNORED_P (init_decl) = 1;\n \t    TREE_READONLY (init_decl) = 1;\n+\t    /* Hash synchronization requires at least 64-bit alignment. */\n+\t    if (flag_hash_synchronization && POINTER_SIZE < 64)\n+\t      DECL_ALIGN (init_decl) = 64;\n \t    rest_of_decl_compilation (init_decl, NULL, 1, 0);\n \t    TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (init_decl)) = 1;\n \t    init = build1 (ADDR_EXPR, TREE_TYPE (exp), init_decl);"}]}