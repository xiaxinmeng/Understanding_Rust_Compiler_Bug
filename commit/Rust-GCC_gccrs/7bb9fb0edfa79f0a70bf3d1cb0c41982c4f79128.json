{"sha": "7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2JiOWZiMGVkZmE3OWYwYTcwYmYzZDFjYjBjNDE5ODJjNGY3OTEyOA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-11-20T21:39:11Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-11-20T21:39:11Z"}, "message": "dwarf2out.c (ASM_OUTPUT_DWARF_OFFSET4): Rename from VALUE4.\n\n\t* dwarf2out.c (ASM_OUTPUT_DWARF_OFFSET4): Rename from VALUE4.\n\tUse assemble_name.\n\t(ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL): Use assemble_name.\n\t(output_call_frame_info): Emit a \\n after using it.\n\nFrom-SVN: r16609", "tree": {"sha": "a130b665095a0d417d976438cbd7647c5462b2cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a130b665095a0d417d976438cbd7647c5462b2cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128/comments", "author": null, "committer": null, "parents": [{"sha": "72938a4c3a475ab3fc3c137d75faef113276aa4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72938a4c3a475ab3fc3c137d75faef113276aa4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72938a4c3a475ab3fc3c137d75faef113276aa4e"}], "stats": {"total": 46, "additions": 34, "deletions": 12}, "files": [{"sha": "139ec79848cdd0c1b6b87c13a0d8b26923400d24", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128", "patch": "@@ -1,3 +1,10 @@\n+Thu Nov 20 13:19:32 1997  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* dwarf2out.c (ASM_OUTPUT_DWARF_OFFSET4): Rename from VALUE4.\n+\tUse assemble_name.\n+\t(ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL): Use assemble_name.\n+\t(output_call_frame_info): Emit a \\n after using it.\n+\n Thu Nov 20 00:38:46 1997  Dave Love  <d.love@dl.ac.uk>\n \n \t* configure.in: Add AC_ARG_ENABLE for Haifa as documentation."}, {"sha": "5aac63db8127e3e6f74b48cde149cdd20a2a305d", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 27, "deletions": 12, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=7bb9fb0edfa79f0a70bf3d1cb0c41982c4f79128", "patch": "@@ -326,6 +326,13 @@ static unsigned reg_number\t\tPROTO((rtx));\n   fprintf ((FILE), \"\\t%s\\t%s\", UNALIGNED_WORD_ASM_OP, (ADDR))\n #endif\n \n+#ifndef ASM_OUTPUT_DWARF_OFFSET4\n+#define ASM_OUTPUT_DWARF_OFFSET4(FILE,LABEL) \\\n+ do {\tfprintf ((FILE), \"\\t%s\\t\", UNALIGNED_INT_ASM_OP);\t\t\\\n+\tassemble_name (FILE, LABEL);\t\t\t\t\t\\\n+  } while (0)\n+#endif\n+\n #ifndef ASM_OUTPUT_DWARF_OFFSET\n #define ASM_OUTPUT_DWARF_OFFSET(FILE,LABEL)\t\t\t\t\\\n  do {\tfprintf ((FILE), \"\\t%s\\t\", UNALIGNED_OFFSET_ASM_OP);\t\t\\\n@@ -371,11 +378,6 @@ static unsigned reg_number\t\tPROTO((rtx));\n   } while (0)\n #endif\n \n-#ifndef ASM_OUTPUT_DWARF_VALUE4\n-#define ASM_OUTPUT_DWARF_VALUE4(FILE,LABEL) \\\n-  fprintf ((FILE), \"\\t%s\\t%s\", UNALIGNED_INT_ASM_OP, LABEL)\n-#endif\n-\n #else /* UNALIGNED_INT_ASM_OP */\n \n /* We don't have unaligned support, let's hope the normal output works for\n@@ -384,6 +386,9 @@ static unsigned reg_number\t\tPROTO((rtx));\n #define ASM_OUTPUT_DWARF_ADDR(FILE,LABEL) \\\n   assemble_integer (gen_rtx (SYMBOL_REF, Pmode, LABEL), PTR_SIZE, 1)\n \n+#define ASM_OUTPUT_DWARF_OFFSET4(FILE,LABEL) \\\n+  assemble_integer (gen_rtx (SYMBOL_REF, SImode, LABEL), 4, 1)\n+\n #define ASM_OUTPUT_DWARF_OFFSET(FILE,LABEL) \\\n   assemble_integer (gen_rtx (SYMBOL_REF, SImode, LABEL), 4, 1)\n \n@@ -411,15 +416,19 @@ static unsigned reg_number\t\tPROTO((rtx));\n #define ASM_OUTPUT_DWARF_DATA4(FILE,VALUE) \\\n   assemble_integer (GEN_INT (VALUE), 4, 1)\n \n-#define ASM_OUTPUT_DWARF_VALUE4(FILE,LABEL) \\\n-  assemble_integer (gen_rtx (SYMBOL_REF, Pmode, LABEL), 4, 1)\n-\n #endif /* UNALIGNED_INT_ASM_OP */\n \n #ifdef SET_ASM_OP\n #ifndef ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL\n-#define ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL(FILE, SY, HI, LO)\t\\\n-   fprintf (FILE, \"\\t%s\\t%s,%s-%s\\n\", SET_ASM_OP, SY, HI, LO)\n+#define ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL(FILE, SY, HI, LO)    \t\\\n+ do {\t\t\t\t\t\t\t\t\t\\\n+  fprintf (FILE, \"\\t%s\\t\", SET_ASM_OP);\t\t\t\t\t\\\n+  assemble_name (FILE, SY);\t\t\t\t\t\t\\\n+  fputc (',', FILE);\t\t\t\t\t\t\t\\\n+  assemble_name (FILE, HI);\t\t\t\t\t\t\\\n+  fputc ('-', FILE);\t\t\t\t\t\t\t\\\n+  assemble_name (FILE, LO);\t\t\t\t\t\t\\\n+ } while (0)\n #endif\n #endif /* SET_ASM_OP */\n \n@@ -1566,7 +1575,7 @@ output_call_frame_info (for_eh)\n #ifdef ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL\n   ASM_GENERATE_INTERNAL_LABEL (ld, CIE_LENGTH_LABEL, for_eh);\n   if (for_eh)\n-    ASM_OUTPUT_DWARF_VALUE4 (asm_out_file, ld);\n+    ASM_OUTPUT_DWARF_OFFSET4 (asm_out_file, ld);\n   else\n     ASM_OUTPUT_DWARF_OFFSET (asm_out_file, ld);\n #else\n@@ -1659,6 +1668,9 @@ output_call_frame_info (for_eh)\n   ASM_OUTPUT_LABEL (asm_out_file, l2);\n #ifdef ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL\n   ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL (asm_out_file, ld, l2, l1);\n+  if (flag_debug_asm)\n+    fprintf (asm_out_file, \"\\t%s CIE Length Symbol\", ASM_COMMENT_START);\n+  fputc ('\\n', asm_out_file);\n #endif\n \n   /* Loop through all of the FDE's.  */\n@@ -1671,7 +1683,7 @@ output_call_frame_info (for_eh)\n #ifdef ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL\n       ASM_GENERATE_INTERNAL_LABEL (ld, FDE_LENGTH_LABEL, for_eh + i*2);\n       if (for_eh)\n-\tASM_OUTPUT_DWARF_VALUE4 (asm_out_file, ld);\n+\tASM_OUTPUT_DWARF_OFFSET4 (asm_out_file, ld);\n       else\n \tASM_OUTPUT_DWARF_OFFSET (asm_out_file, ld);\n #else\n@@ -1716,6 +1728,9 @@ output_call_frame_info (for_eh)\n       ASM_OUTPUT_LABEL (asm_out_file, l2);\n #ifdef ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL\n       ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL (asm_out_file, ld, l2, l1);\n+      if (flag_debug_asm)\n+\tfprintf (asm_out_file, \"\\t%s FDE Length Symbol\", ASM_COMMENT_START);\n+      fputc ('\\n', asm_out_file);\n #endif\n     }\n #ifndef EH_FRAME_SECTION"}]}