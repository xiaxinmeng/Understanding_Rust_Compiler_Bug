{"sha": "f06257d36aac7da75b3eaf7d06cf138a303977cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjA2MjU3ZDM2YWFjN2RhNzViM2VhZjdkMDZjZjEzOGEzMDM5NzdjYg==", "commit": {"author": {"name": "Adam Nemet", "email": "anemet@caviumnetworks.com", "date": "2009-05-13T21:52:56Z"}, "committer": {"name": "Adam Nemet", "email": "nemet@gcc.gnu.org", "date": "2009-05-13T21:52:56Z"}, "message": "mips.md (store): Add attributes for QI and HI.\n\n\t* config/mips/mips.md (store): Add attributes for QI and HI.\n\tUpdate comment.\n\t(truncdisi2, truncdihi2, truncdiqi2): Merge these into ...\n\t(truncdi<mode>2): ... this new pattern.\n\nFrom-SVN: r147503", "tree": {"sha": "4045f7b4f601e8dea5079ee5687833505daf4a5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4045f7b4f601e8dea5079ee5687833505daf4a5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f06257d36aac7da75b3eaf7d06cf138a303977cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f06257d36aac7da75b3eaf7d06cf138a303977cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f06257d36aac7da75b3eaf7d06cf138a303977cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f06257d36aac7da75b3eaf7d06cf138a303977cb/comments", "author": null, "committer": null, "parents": [{"sha": "c7bda60ed4326255824b4a083a5ce793ac4e56d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7bda60ed4326255824b4a083a5ce793ac4e56d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7bda60ed4326255824b4a083a5ce793ac4e56d8"}], "stats": {"total": 40, "additions": 14, "deletions": 26}, "files": [{"sha": "c2da14007b37868e2d9f35e277f84f457f7aad04", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f06257d36aac7da75b3eaf7d06cf138a303977cb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f06257d36aac7da75b3eaf7d06cf138a303977cb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f06257d36aac7da75b3eaf7d06cf138a303977cb", "patch": "@@ -1,3 +1,10 @@\n+2009-05-13  Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* config/mips/mips.md (store): Add attributes for QI and HI.\n+\tUpdate comment.\n+\t(truncdisi2, truncdihi2, truncdiqi2): Merge these into ...\n+\t(truncdi<mode>2): ... this new pattern.\n+\n 2009-05-13  Brad Hards  <bradh@kde.org>\n \n \t* Makefile.in (TEXI_GCCINT_FILES): Add plugins.texi."}, {"sha": "3b44a84104be0904c830cc06519270065fe91b27", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 7, "deletions": 26, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f06257d36aac7da75b3eaf7d06cf138a303977cb/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f06257d36aac7da75b3eaf7d06cf138a303977cb/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=f06257d36aac7da75b3eaf7d06cf138a303977cb", "patch": "@@ -727,9 +727,10 @@\n ;; This attributes gives the mode mask of a SHORT.\n (define_mode_attr mask [(QI \"0x00ff\") (HI \"0xffff\")])\n \n-;; Mode attributes for GPR loads and stores.\n+;; Mode attributes for GPR loads.\n (define_mode_attr load [(SI \"lw\") (DI \"ld\")])\n-(define_mode_attr store [(SI \"sw\") (DI \"sd\")])\n+;; Instruction names for stores.\n+(define_mode_attr store [(QI \"sb\") (HI \"sh\") (SI \"sw\") (DI \"sd\")])\n \n ;; Similarly for MIPS IV indexed FPR loads and stores.\n (define_mode_attr loadx [(SF \"lwxc1\") (DF \"ldxc1\") (V2SF \"ldxc1\")])\n@@ -2692,33 +2693,13 @@\n ;;\n ;; Step A needs a real instruction but step B does not.\n \n-(define_insn \"truncdisi2\"\n-  [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=d,m\")\n-        (truncate:SI (match_operand:DI 1 \"register_operand\" \"d,d\")))]\n+(define_insn \"truncdi<mode>2\"\n+  [(set (match_operand:SUBDI 0 \"nonimmediate_operand\" \"=d,m\")\n+        (truncate:SUBDI (match_operand:DI 1 \"register_operand\" \"d,d\")))]\n   \"TARGET_64BIT\"\n   \"@\n     sll\\t%0,%1,0\n-    sw\\t%1,%0\"\n-  [(set_attr \"move_type\" \"sll0,store\")\n-   (set_attr \"mode\" \"SI\")])\n-\n-(define_insn \"truncdihi2\"\n-  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=d,m\")\n-        (truncate:HI (match_operand:DI 1 \"register_operand\" \"d,d\")))]\n-  \"TARGET_64BIT\"\n-  \"@\n-    sll\\t%0,%1,0\n-    sh\\t%1,%0\"\n-  [(set_attr \"move_type\" \"sll0,store\")\n-   (set_attr \"mode\" \"SI\")])\n-\n-(define_insn \"truncdiqi2\"\n-  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=d,m\")\n-        (truncate:QI (match_operand:DI 1 \"register_operand\" \"d,d\")))]\n-  \"TARGET_64BIT\"\n-  \"@\n-    sll\\t%0,%1,0\n-    sb\\t%1,%0\"\n+    <store>\\t%1,%0\"\n   [(set_attr \"move_type\" \"sll0,store\")\n    (set_attr \"mode\" \"SI\")])\n "}]}