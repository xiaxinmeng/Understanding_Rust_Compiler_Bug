{"sha": "f51d8f1af29a9c5db950dbf4158387067eecce7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjUxZDhmMWFmMjlhOWM1ZGI5NTBkYmY0MTU4Mzg3MDY3ZWVjY2U3ZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2008-08-29T18:49:36Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-08-29T18:49:36Z"}, "message": "dwarf2out.c (gen_formal_parameter_die, [...]): For DECL_BY_REFERENCE decls don't pass TREE_READONLY and TREE_THIS_VOLATILE to...\n\n\t* dwarf2out.c (gen_formal_parameter_die, gen_variable_die): For\n\tDECL_BY_REFERENCE decls don't pass TREE_READONLY and\n\tTREE_THIS_VOLATILE to add_type_attribute.\n\nFrom-SVN: r139779", "tree": {"sha": "edd2331387e5920f458fd2f0084230b4a42dd2c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/edd2331387e5920f458fd2f0084230b4a42dd2c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f51d8f1af29a9c5db950dbf4158387067eecce7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f51d8f1af29a9c5db950dbf4158387067eecce7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f51d8f1af29a9c5db950dbf4158387067eecce7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f51d8f1af29a9c5db950dbf4158387067eecce7e/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b6b904bd616d3e1bb186db29c91172279cbd21b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6b904bd616d3e1bb186db29c91172279cbd21b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6b904bd616d3e1bb186db29c91172279cbd21b9"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "2cfe256a44b4aab31d0c20ff4c3986ad404988e4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51d8f1af29a9c5db950dbf4158387067eecce7e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51d8f1af29a9c5db950dbf4158387067eecce7e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f51d8f1af29a9c5db950dbf4158387067eecce7e", "patch": "@@ -1,5 +1,9 @@\n 2008-08-29  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* dwarf2out.c (gen_formal_parameter_die, gen_variable_die): For\n+\tDECL_BY_REFERENCE decls don't pass TREE_READONLY and\n+\tTREE_THIS_VOLATILE to add_type_attribute.\n+\n \t* dwarf2out.c (add_subscript_info): Stop on Fortran TYPE_STRING_FLAG\n \ttypes.\n \t(gen_array_type_die): Emit DW_TAG_string_type for Fortran character"}, {"sha": "d0c1a2eccf12a226db997a2014c69adfd33f8ee7", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51d8f1af29a9c5db950dbf4158387067eecce7e/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51d8f1af29a9c5db950dbf4158387067eecce7e/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=f51d8f1af29a9c5db950dbf4158387067eecce7e", "patch": "@@ -13023,11 +13023,13 @@ gen_formal_parameter_die (tree node, dw_die_ref context_die)\n \t  tree type = TREE_TYPE (node);\n \t  add_name_and_src_coords_attributes (parm_die, node);\n \t  if (DECL_BY_REFERENCE (node))\n-\t    type = TREE_TYPE (type);\n-\t  add_type_attribute (parm_die, type,\n-\t\t\t      TREE_READONLY (node),\n-\t\t\t      TREE_THIS_VOLATILE (node),\n-\t\t\t      context_die);\n+\t    add_type_attribute (parm_die, TREE_TYPE (type), 0, 0,\n+\t\t\t\tcontext_die);\n+\t  else\n+\t    add_type_attribute (parm_die, type,\n+\t\t\t\tTREE_READONLY (node),\n+\t\t\t\tTREE_THIS_VOLATILE (node),\n+\t\t\t\tcontext_die);\n \t  if (DECL_ARTIFICIAL (node))\n \t    add_AT_flag (parm_die, DW_AT_artificial, 1);\n \t}\n@@ -13704,14 +13706,15 @@ gen_variable_die (tree decl, dw_die_ref context_die)\n   else\n     {\n       tree type = TREE_TYPE (decl);\n+\n+      add_name_and_src_coords_attributes (var_die, decl);\n       if ((TREE_CODE (decl) == PARM_DECL\n \t   || TREE_CODE (decl) == RESULT_DECL)\n \t  && DECL_BY_REFERENCE (decl))\n-\ttype = TREE_TYPE (type);\n-\n-      add_name_and_src_coords_attributes (var_die, decl);\n-      add_type_attribute (var_die, type, TREE_READONLY (decl),\n-\t\t\t  TREE_THIS_VOLATILE (decl), context_die);\n+\tadd_type_attribute (var_die, TREE_TYPE (type), 0, 0, context_die);\n+      else\n+\tadd_type_attribute (var_die, type, TREE_READONLY (decl),\n+\t\t\t    TREE_THIS_VOLATILE (decl), context_die);\n \n       if (TREE_PUBLIC (decl))\n \tadd_AT_flag (var_die, DW_AT_external, 1);"}]}