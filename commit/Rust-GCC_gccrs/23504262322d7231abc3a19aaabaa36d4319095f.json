{"sha": "23504262322d7231abc3a19aaabaa36d4319095f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjM1MDQyNjIzMjJkNzIzMWFiYzNhMTlhYWFiYWEzNmQ0MzE5MDk1Zg==", "commit": {"author": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2016-03-03T10:08:09Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2016-03-03T10:08:09Z"}, "message": "Skip properly debug stmt in optimize_mask_stores (PR\n\n\tPR tree-optimization/70043\n\t* tree-vect-loop.c (optimize_mask_stores): Move iterator to\n\tprevious statement if we see a debug statement.\n\t* gfortran.dg/vect/pr70043.f90: New test.\n\nFrom-SVN: r233934", "tree": {"sha": "ea3f63705795ea8f5b90be12b553c2d94e319555", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea3f63705795ea8f5b90be12b553c2d94e319555"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23504262322d7231abc3a19aaabaa36d4319095f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23504262322d7231abc3a19aaabaa36d4319095f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23504262322d7231abc3a19aaabaa36d4319095f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23504262322d7231abc3a19aaabaa36d4319095f/comments", "author": null, "committer": null, "parents": [{"sha": "b7b9e1a958e8238a3176e276cfeadf4f14a9afff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7b9e1a958e8238a3176e276cfeadf4f14a9afff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7b9e1a958e8238a3176e276cfeadf4f14a9afff"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "e232f529426174451655d34a01ed18e5f2fc28b5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=23504262322d7231abc3a19aaabaa36d4319095f", "patch": "@@ -1,3 +1,9 @@\n+2016-03-03  Martin Liska  <mliska@suse.cz>\n+\n+\tPR tree-optimization/70043\n+\t* tree-vect-loop.c (optimize_mask_stores): Move iterator to\n+\tprevious statement if we see a debug statement.\n+\n 2016-03-03  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/55936"}, {"sha": "da7307ad2cfadc29d6998e12965a922dc6788cce", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=23504262322d7231abc3a19aaabaa36d4319095f", "patch": "@@ -1,3 +1,8 @@\n+2016-03-03  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\tPR tree-optimization/70043\n+\t* gfortran.dg/vect/pr70043.f90: New test.\n+\n 2016-03-03  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/specs/task1.ads: New test."}, {"sha": "36d6a0b3b90d753e4a781911ce38d1a6f11c633e", "filename": "gcc/testsuite/gfortran.dg/vect/pr70043.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr70043.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr70043.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr70043.f90?ref=23504262322d7231abc3a19aaabaa36d4319095f", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do compile  }\n+! { dg-additional-options \"-Ofast -g\" }\n+! { dg-additional-options \"-march=haswell\" { target i?86-*-* x86_64-*-* } }\n+\n+subroutine fn1(a, b)\n+  real(8), intent(in) ::  b(100)\n+  real(8), intent(inout) :: a(100)\n+  real(8) c\n+  do i=0,100\n+     if( a(i) < 0.0 ) then\n+        c =  a(i) * b(i)\n+        a(i) = a(i) - c / b(i)\n+     endif\n+  enddo\n+end subroutine fn1"}, {"sha": "0cd8f750dbc6041825051fa7bfa0b28ef79ad2c1", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23504262322d7231abc3a19aaabaa36d4319095f/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=23504262322d7231abc3a19aaabaa36d4319095f", "patch": "@@ -7090,7 +7090,10 @@ optimize_mask_stores (struct loop *loop)\n \n \t      /* Skip debug statements.  */\n \t      if (is_gimple_debug (gsi_stmt (gsi)))\n-\t\tcontinue;\n+\t\t{\n+\t\t  gsi_prev (&gsi);\n+\t\t  continue;\n+\t\t}\n \t      stmt1 = gsi_stmt (gsi);\n \t      /* Do not consider statements writing to memory or having\n \t\t volatile operand.  */"}]}