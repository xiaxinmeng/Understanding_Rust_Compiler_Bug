{"sha": "1461761bf95367ca1577650c885b022e01c47c5f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQ2MTc2MWJmOTUzNjdjYTE1Nzc2NTBjODg1YjAyMmUwMWM0N2M1Zg==", "commit": {"author": {"name": "Andreas Simbuerger", "email": "simbuerg@fim.uni-passau.de", "date": "2010-08-11T20:30:49Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-08-11T20:30:49Z"}, "message": "Adapt to new CloogScattering abstraction, introduced in official CLooG versions (CLOOG_ORG).\n\n2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n\n\t* graphite-clast-to-gimple.c (free_scattering): Change\n\tCloogDomainList/CloogDomain to CloogScatteringList/CloogScattering\n\t(CLOOG_ORG).\n\t(build_cloog_prog): Same.\n\t* graphite-cloog-compat.h (cloog_domain): Removed.\n\t(cloog_scattering): New.\n\t(cloog_set_domain): Removed.\n\t(cloog_set_scattering): New.\n\t(cloog_next_domain): Removed.\n\t(cloog_next_scattering): New.\n\t(cloog_set_next_domain): Removed.\n\t(cloog_set_next_scattering): New.\n\t(CloogScatteringList): New.\n\t(CloogScattering): New.\n\t(cloog_scattering_free): New.\n\t(new_Cloog_Scattering_from_ppl_Polyhedron): New.\n\t* graphite-cloog-util.c (new_Cloog_Scattering_from_ppl_Polyhedron):\n\tNew.\n\nFrom-SVN: r163165", "tree": {"sha": "10ff642cb81c3eff319faa2e86a57a45bcb69f28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10ff642cb81c3eff319faa2e86a57a45bcb69f28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1461761bf95367ca1577650c885b022e01c47c5f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1461761bf95367ca1577650c885b022e01c47c5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1461761bf95367ca1577650c885b022e01c47c5f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1461761bf95367ca1577650c885b022e01c47c5f/comments", "author": {"login": "simbuerg", "id": 598281, "node_id": "MDQ6VXNlcjU5ODI4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/598281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simbuerg", "html_url": "https://github.com/simbuerg", "followers_url": "https://api.github.com/users/simbuerg/followers", "following_url": "https://api.github.com/users/simbuerg/following{/other_user}", "gists_url": "https://api.github.com/users/simbuerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/simbuerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simbuerg/subscriptions", "organizations_url": "https://api.github.com/users/simbuerg/orgs", "repos_url": "https://api.github.com/users/simbuerg/repos", "events_url": "https://api.github.com/users/simbuerg/events{/privacy}", "received_events_url": "https://api.github.com/users/simbuerg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "60f87855227bbe423be7f8385d58d81e2f3c3874", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60f87855227bbe423be7f8385d58d81e2f3c3874", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60f87855227bbe423be7f8385d58d81e2f3c3874"}], "stats": {"total": 120, "additions": 98, "deletions": 22}, "files": [{"sha": "4a0e3a5f336e809b6bc5a00a4ca9b6fa937305eb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1461761bf95367ca1577650c885b022e01c47c5f", "patch": "@@ -1,3 +1,24 @@\n+2010-08-02  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n+\n+\t* graphite-clast-to-gimple.c (free_scattering): Change\n+\tCloogDomainList/CloogDomain to CloogScatteringList/CloogScattering\n+\t(CLOOG_ORG).\n+\t(build_cloog_prog): Same.\n+\t* graphite-cloog-compat.h (cloog_domain): Removed.\n+\t(cloog_scattering): New.\n+\t(cloog_set_domain): Removed.\n+\t(cloog_set_scattering): New.\n+\t(cloog_next_domain): Removed.\n+\t(cloog_next_scattering): New.\n+\t(cloog_set_next_domain): Removed.\n+\t(cloog_set_next_scattering): New.\n+\t(CloogScatteringList): New.\n+\t(CloogScattering): New.\n+\t(cloog_scattering_free): New.\n+\t(new_Cloog_Scattering_from_ppl_Polyhedron): New.\n+\t* graphite-cloog-util.c (new_Cloog_Scattering_from_ppl_Polyhedron):\n+\tNew.\n+\n 2010-08-02  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n \n \t* graphite-clast-to-gimple.c (build_cloog_prog): Extend with"}, {"sha": "4916f915256dea91b961eff62a7c5c1e3b7346db", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=1461761bf95367ca1577650c885b022e01c47c5f", "patch": "@@ -1,3 +1,24 @@\n+2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n+\n+\t* graphite-clast-to-gimple.c (free_scattering): Change\n+\tCloogDomainList/CloogDomain to CloogScatteringList/CloogScattering\n+\t(CLOOG_ORG).\n+\t(build_cloog_prog): Same.\n+\t* graphite-cloog-compat.h (cloog_domain): Removed.\n+\t(cloog_scattering): New.\n+\t(cloog_set_domain): Removed.\n+\t(cloog_set_scattering): New.\n+\t(cloog_next_domain): Removed.\n+\t(cloog_next_scattering): New.\n+\t(cloog_set_next_domain): Removed.\n+\t(cloog_set_next_scattering): New.\n+\t(CloogScatteringList): New.\n+\t(CloogScattering): New.\n+\t(cloog_scattering_free): New.\n+\t(new_Cloog_Scattering_from_ppl_Polyhedron): New.\n+\t* graphite-cloog-util.c (new_Cloog_Scattering_from_ppl_Polyhedron):\n+\tNew.\n+\n 2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n \n \t* graphite-clast-to-gimple.c (build_cloog_prog): Extend with"}, {"sha": "138c0df541e775431bf278c26f21842fdd2029d8", "filename": "gcc/graphite-clast-to-gimple.c", "status": "modified", "additions": 13, "deletions": 12, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-clast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-clast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-clast-to-gimple.c?ref=1461761bf95367ca1577650c885b022e01c47c5f", "patch": "@@ -1127,14 +1127,14 @@ translate_clast (sese region, loop_p context_loop, struct clast_stmt *stmt,\n /* Free the SCATTERING domain list.  */\n \n static void\n-free_scattering (CloogDomainList *scattering)\n+free_scattering (CloogScatteringList *scattering)\n {\n   while (scattering)\n     {\n-      CloogDomain *dom = cloog_domain (scattering);\n-      CloogDomainList *next = cloog_next_domain (scattering);\n+      CloogScattering *dom = cloog_scattering (scattering);\n+      CloogScatteringList *next = cloog_next_scattering (scattering);\n \n-      cloog_domain_free (dom);\n+      cloog_scattering_free (dom);\n       free (scattering);\n       scattering = next;\n     }\n@@ -1212,7 +1212,7 @@ build_cloog_prog (scop_p scop, CloogProgram *prog,\n   poly_bb_p pbb;\n   CloogLoop *loop_list = NULL;\n   CloogBlockList *block_list = NULL;\n-  CloogDomainList *scattering = NULL;\n+  CloogScatteringList *scattering = NULL;\n   int nbs = 2 * max_nb_loops + 1;\n   int *scaldims;\n \n@@ -1264,17 +1264,18 @@ build_cloog_prog (scop_p scop, CloogProgram *prog,\n       /* Build scattering list.  */\n       {\n         /* XXX: Replace with cloog_domain_list_alloc(), when available.  */\n-        CloogDomainList *new_scattering\n-\t  = (CloogDomainList *) xmalloc (sizeof (CloogDomainList));\n+        CloogScatteringList *new_scattering\n+\t  = (CloogScatteringList *) xmalloc (sizeof (CloogScatteringList));\n         ppl_Polyhedron_t scat;\n-\tCloogDomain *dom;\n+\tCloogScattering *dom;\n \n \tscat = PBB_TRANSFORMED_SCATTERING (pbb);\n-\tdom = new_Cloog_Domain_from_ppl_Polyhedron (scat, scop_nb_params (scop),\n-                                                    state);\n+        dom = new_Cloog_Scattering_from_ppl_Polyhedron\n+          (scat, scop_nb_params (scop), pbb_nb_scattering_transform (pbb),\n+           state);\n \n-        cloog_set_next_domain (new_scattering, scattering);\n-        cloog_set_domain (new_scattering, dom);\n+        cloog_set_next_scattering (new_scattering, scattering);\n+        cloog_set_scattering (new_scattering, dom);\n         scattering = new_scattering;\n       }\n     }"}, {"sha": "56b6bb382cd46648ab35108eb8fb26148ba76cf8", "filename": "gcc/graphite-cloog-compat.h", "status": "modified", "additions": 20, "deletions": 10, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-cloog-compat.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-cloog-compat.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-cloog-compat.h?ref=1461761bf95367ca1577650c885b022e01c47c5f", "patch": "@@ -58,6 +58,16 @@ typedef const char *clast_name_p;\n   new_Cloog_Domain_from_ppl_Polyhedron (POLY)\n #define cloog_domain_from_cloog_matrix(STATE, MAT, NB)\\\n   cloog_domain_matrix2domain (MAT)\n+\n+/* CloogScatteringList compatibility.  */\n+#define CloogScatteringList CloogDomainList\n+#define CloogScattering CloogDomain\n+#define cloog_set_next_scattering cloog_set_next_domain\n+#define cloog_set_scattering cloog_set_domain\n+#define cloog_scattering cloog_domain\n+#define cloog_next_scattering cloog_next_domain\n+#define cloog_scattering_free cloog_domain_free\n+\n #endif\n \n /* Adapt CLooG accessors from CLooG legacy to\n@@ -71,28 +81,28 @@ cloog_statement_usr (CloogStatement *cs)\n   return cs->usr;\n }\n \n-static inline CloogDomain *\n-cloog_domain (CloogDomainList *dl)\n+static inline CloogScattering *\n+cloog_scattering (CloogScatteringList *sl)\n {\n-  return dl->domain;\n+  return sl->scatt;\n }\n \n static inline void\n-cloog_set_domain (CloogDomainList *dl, CloogDomain *domain)\n+cloog_set_scattering (CloogScatteringList *sl, CloogScattering *scatt)\n {\n-  dl->domain = domain;\n+  sl->scatt = scatt;\n }\n \n-static inline CloogDomainList *\n-cloog_next_domain (CloogDomainList *dl)\n+static inline CloogScatteringList *\n+cloog_next_scattering (CloogScatteringList *sl)\n {\n-  return dl->next;\n+  return sl->next;\n }\n \n static inline void\n-cloog_set_next_domain (CloogDomainList *dl, CloogDomainList *next)\n+cloog_set_next_scattering (CloogScatteringList *sl, CloogScatteringList *next)\n {\n-  dl->next = next;\n+  sl->next = next;\n }\n \n static inline int"}, {"sha": "17704580bc0fc32a97d7100a0a1737114ead18fa", "filename": "gcc/graphite-cloog-util.c", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-cloog-util.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-cloog-util.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-cloog-util.c?ref=1461761bf95367ca1577650c885b022e01c47c5f", "patch": "@@ -238,6 +238,27 @@ new_Cloog_Domain_from_ppl_Polyhedron (ppl_const_Polyhedron_t ph, int nb_params,\n   return res;\n }\n \n+/* Create a CloogScattering from polyhedron PH.  */\n+\n+CloogScattering *\n+new_Cloog_Scattering_from_ppl_Polyhedron (ppl_const_Polyhedron_t ph,\n+                                          int nb_params ATTRIBUTE_UNUSED,\n+                                          int nb_scatt ATTRIBUTE_UNUSED,\n+                                          CloogState *state ATTRIBUTE_UNUSED)\n+{\n+#ifdef CLOOG_ORG\n+  CloogMatrix *mat = new_Cloog_Matrix_from_ppl_Polyhedron (ph);\n+  CloogScattering *res = cloog_scattering_from_cloog_matrix (state, mat,\n+                                                             nb_scatt,\n+                                                             nb_params);\n+\n+  cloog_matrix_free (mat);\n+  return res;\n+#else\n+  return new_Cloog_Domain_from_ppl_Polyhedron (ph, nb_params, state);\n+#endif\n+}\n+\n /* Creates a CloogDomain from a pointset powerset PS.  */\n \n CloogDomain *"}, {"sha": "d7758ce197d617543b6e9304cadc43b18cfddf40", "filename": "gcc/graphite-cloog-util.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-cloog-util.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1461761bf95367ca1577650c885b022e01c47c5f/gcc%2Fgraphite-cloog-util.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-cloog-util.h?ref=1461761bf95367ca1577650c885b022e01c47c5f", "patch": "@@ -27,6 +27,8 @@ along with GCC; see the file COPYING3.  If not see\n CloogMatrix *new_Cloog_Matrix_from_ppl_Polyhedron (ppl_const_Polyhedron_t);\n CloogDomain *new_Cloog_Domain_from_ppl_Polyhedron (ppl_const_Polyhedron_t,\n \t\t\t\t\t\t   int, CloogState *);\n+CloogScattering *new_Cloog_Scattering_from_ppl_Polyhedron\n+  (ppl_const_Polyhedron_t, int, int, CloogState *);\n CloogDomain * new_Cloog_Domain_from_ppl_Pointset_Powerset\n   (ppl_Pointset_Powerset_C_Polyhedron_t, int, CloogState *);\n void new_C_Polyhedron_from_Cloog_Matrix (ppl_Polyhedron_t *, CloogMatrix *);"}]}