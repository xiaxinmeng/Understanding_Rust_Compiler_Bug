{"sha": "205d542ad55d8dee50acfe4f8ff6c2138dbad418", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA1ZDU0MmFkNTVkOGRlZTUwYWNmZTRmOGZmNmMyMTM4ZGJhZDQxOA==", "commit": {"author": {"name": "Kamlesh Kumar", "email": "kamleshbhalui@gmail.com", "date": "2018-11-16T21:55:00Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2018-11-16T21:55:00Z"}, "message": "re PR c++/52869 ([DR 1207] \"this\" not being allowed in noexcept clauses)\n\n\tPR c++/52869\n\n\tDR 1207\n\t* parser.c (cp_parser_noexcept_specification_opt): Call\n\tinject_this_parameter.\n\nFrom-SVN: r266224", "tree": {"sha": "51f4aa19896dd1fcc42f9d78516587d83305621a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/51f4aa19896dd1fcc42f9d78516587d83305621a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/205d542ad55d8dee50acfe4f8ff6c2138dbad418", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/205d542ad55d8dee50acfe4f8ff6c2138dbad418", "html_url": "https://github.com/Rust-GCC/gccrs/commit/205d542ad55d8dee50acfe4f8ff6c2138dbad418", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/205d542ad55d8dee50acfe4f8ff6c2138dbad418/comments", "author": {"login": "kamleshbhalui", "id": 22392991, "node_id": "MDQ6VXNlcjIyMzkyOTkx", "avatar_url": "https://avatars.githubusercontent.com/u/22392991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamleshbhalui", "html_url": "https://github.com/kamleshbhalui", "followers_url": "https://api.github.com/users/kamleshbhalui/followers", "following_url": "https://api.github.com/users/kamleshbhalui/following{/other_user}", "gists_url": "https://api.github.com/users/kamleshbhalui/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamleshbhalui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamleshbhalui/subscriptions", "organizations_url": "https://api.github.com/users/kamleshbhalui/orgs", "repos_url": "https://api.github.com/users/kamleshbhalui/repos", "events_url": "https://api.github.com/users/kamleshbhalui/events{/privacy}", "received_events_url": "https://api.github.com/users/kamleshbhalui/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2674fa47de9ecfee5b04f753582fb23041029f40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2674fa47de9ecfee5b04f753582fb23041029f40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2674fa47de9ecfee5b04f753582fb23041029f40"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "6d99d6a5d79fd4c8284e3f4029611defb84d6edd", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=205d542ad55d8dee50acfe4f8ff6c2138dbad418", "patch": "@@ -1,3 +1,10 @@\n+2018-11-16  Kamlesh Kumar  <kamleshbhalui@gmail.com>\n+\n+\tDR 1207\n+\tPR c++/52869\n+\t* parser.c (cp_parser_noexcept_specification_opt): Call\n+\tinject_this_parameter.\n+\n 2018-11-16  Jason Merrill  <jason@redhat.com>\n \n \tImplement P0479R5, [[likely]] and [[unlikely]]."}, {"sha": "88fc426102b04168273b69ac14e5fc5576821caa", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=205d542ad55d8dee50acfe4f8ff6c2138dbad418", "patch": "@@ -24668,6 +24668,12 @@ cp_parser_noexcept_specification_opt (cp_parser* parser,\n \t  matching_parens parens;\n \t  parens.consume_open (parser);\n \n+\t  tree save_ccp = current_class_ptr;\n+\t  tree save_ccr = current_class_ref;\n+\n+\t  if (current_class_type)\n+\t    inject_this_parameter (current_class_type, TYPE_UNQUALIFIED);\n+\n \t  if (require_constexpr)\n \t    {\n \t      /* Types may not be defined in an exception-specification.  */\n@@ -24687,6 +24693,9 @@ cp_parser_noexcept_specification_opt (cp_parser* parser,\n \t    }\n \n \t  parens.require_close (parser);\n+\n+\t  current_class_ptr = save_ccp;\n+\t  current_class_ref = save_ccr;\n \t}\n       else\n \t{"}, {"sha": "16fce84427cf10a4c33337c3b68a575804095409", "filename": "gcc/testsuite/g++.dg/DRs/dr1207-1.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2FDRs%2Fdr1207-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2FDRs%2Fdr1207-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2FDRs%2Fdr1207-1.C?ref=205d542ad55d8dee50acfe4f8ff6c2138dbad418", "patch": "@@ -0,0 +1,23 @@\n+// DR 1207\n+// PR c++/52869\n+// { dg-do compile { target c++11 } }\n+\n+struct S {\n+    void f() { }\n+    void g() noexcept(noexcept(f())) { }\n+    void h() noexcept(noexcept(this->f())) { }\n+};\n+\n+struct Nyan {\n+\tNyan &operator++() noexcept { return *this; }\n+\tvoid omg() noexcept(noexcept(++*this)) {}\n+};\n+\n+template <class T>\n+class Test{\n+    T count;\n+    Test (T arg) {count=arg;}\n+    void fetch() { }\n+    T inc () noexcept(noexcept(this->fetch())) {return ++count;}\n+    T dec () noexcept(noexcept(fetch())) { return --count;} \n+};"}, {"sha": "2d54748bdad2c09f3a47de01a889f4e111be2584", "filename": "gcc/testsuite/g++.dg/DRs/dr1207-2.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2FDRs%2Fdr1207-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/205d542ad55d8dee50acfe4f8ff6c2138dbad418/gcc%2Ftestsuite%2Fg%2B%2B.dg%2FDRs%2Fdr1207-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2FDRs%2Fdr1207-2.C?ref=205d542ad55d8dee50acfe4f8ff6c2138dbad418", "patch": "@@ -0,0 +1,12 @@\n+// DR 1207\n+// PR c++/52869\n+// { dg-do compile { target c++11 } }\n+\n+void\n+fn ()\n+{\n+  struct S {\n+    bool operator!() noexcept(false);\n+  } s;\n+  S t = s;\n+}"}]}