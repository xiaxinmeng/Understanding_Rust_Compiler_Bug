{"sha": "67c2a92854761b0dcf05a6c2d0fa636a55e6be60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdjMmE5Mjg1NDc2MWIwZGNmMDVhNmMyZDBmYTYzNmE1NWU2YmU2MA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-01-24T12:26:46Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-01-24T12:26:46Z"}, "message": "error.c (dump_decl): Fix type default template args.\n\n\t* error.c (dump_decl): Fix type default template args.\n\t(dump_type): Hand TEMPLATE_DECL off to dump_decl.\n\nFrom-SVN: r17470", "tree": {"sha": "486bd343ea1874954c3ea6364683ad1834d86e03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/486bd343ea1874954c3ea6364683ad1834d86e03"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67c2a92854761b0dcf05a6c2d0fa636a55e6be60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67c2a92854761b0dcf05a6c2d0fa636a55e6be60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67c2a92854761b0dcf05a6c2d0fa636a55e6be60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67c2a92854761b0dcf05a6c2d0fa636a55e6be60/comments", "author": null, "committer": null, "parents": [{"sha": "b7a290122f69b91951a58140fb319e0f68049218", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7a290122f69b91951a58140fb319e0f68049218", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7a290122f69b91951a58140fb319e0f68049218"}], "stats": {"total": 63, "additions": 10, "deletions": 53}, "files": [{"sha": "7fb9c4d701229448a8207b811bbabadd9df13241", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67c2a92854761b0dcf05a6c2d0fa636a55e6be60/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67c2a92854761b0dcf05a6c2d0fa636a55e6be60/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=67c2a92854761b0dcf05a6c2d0fa636a55e6be60", "patch": "@@ -1,3 +1,8 @@\n+Sat Jan 24 12:13:54 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* error.c (dump_decl): Fix type default template args.\n+\t(dump_type): Hand TEMPLATE_DECL off to dump_decl.\n+\n Fri Jan 23 18:34:37 1998  Mumit Khan <khan@xraylith.wisc.edu>\n \n \t* lex.c (DIR_SEPARATOR): Define to be '/' if not already defined."}, {"sha": "2465440c0284b4be7a13fcd2314d94f3537da6ca", "filename": "gcc/cp/error.c", "status": "modified", "additions": 5, "deletions": 53, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67c2a92854761b0dcf05a6c2d0fa636a55e6be60/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67c2a92854761b0dcf05a6c2d0fa636a55e6be60/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=67c2a92854761b0dcf05a6c2d0fa636a55e6be60", "patch": "@@ -207,6 +207,7 @@ dump_type (t, v)\n       break;\n \n     case TYPE_DECL:\n+    case TEMPLATE_DECL:\n       dump_decl (t, v);\n       break;\n \n@@ -229,58 +230,6 @@ dump_type (t, v)\n       OB_PUTID (TYPE_IDENTIFIER (t));\n       break;\n \n-      /* A substituted template template parameter.  Default template \n-\t argument handling are different from dump_decl.  */\n-    case TEMPLATE_DECL:\n-      {\n-\ttree orig_args = DECL_TEMPLATE_PARMS (t);\n-\ttree args;\n-\tint i; \n-\tfor (args = orig_args = nreverse (orig_args); \n-\t     args;\n-\t     args = TREE_CHAIN (args))\n-\t  {\n-\t    int len = TREE_VEC_LENGTH (TREE_VALUE (args));\n-\n-\t    OB_PUTS (\"template <\");\n-\t    for (i = 0; i < len; i++)\n-\t      {\n-\t\ttree arg = TREE_VEC_ELT (TREE_VALUE (args), i);\n-\t\ttree defval = TREE_PURPOSE (arg);\n-\t\targ = TREE_VALUE (arg);\n-\t\tif (TREE_CODE (arg) == TYPE_DECL)\n-\t\t  {\n-\t\t    if (DECL_NAME (arg))\n-\t\t      {\n-\t\t\tOB_PUTS (\"class \");\n-\t\t\tOB_PUTID (DECL_NAME (arg));\n-\t\t      }\n-\t\t    else\n-\t\t      OB_PUTS (\"class\");\n-\t\t  }\n-\t\telse\n-\t\t  dump_decl (arg, 1);\n-\t\t\n-\t\tif (defval)\n-\t\t  {\n-\t\t    OB_PUTS (\" = \");\n-\t\t    if (TREE_CODE (arg) == TYPE_DECL)\n-\t\t      dump_type (defval, 1);\n-\t\t    else\n-\t\t      dump_expr (defval, 1);\n-\t\t  }\n-\t\t\n-\t\tOB_PUTC2 (',', ' ');\n-\t      }\n-\t    if (len != 0)\n-\t      OB_UNPUT (2);\n-\t    OB_PUTC2 ('>', ' ');\n-\t  }\n-\tnreverse(orig_args);\n-\tdump_type (TREE_TYPE (t), v);\n-      }\n-      break;\n-\n     case TEMPLATE_TEMPLATE_PARM:\n       if (!CLASSTYPE_TEMPLATE_INFO (t))\n \t{\n@@ -837,7 +786,10 @@ dump_decl (t, v)\n \t\tif (defval)\n \t\t  {\n \t\t    OB_PUTS (\" = \");\n-\t\t    dump_decl (defval, 1);\n+\t\t    if (TREE_CODE (arg) == TYPE_DECL)\n+\t\t      dump_type (defval, 1);\n+\t\t    else\n+\t\t      dump_decl (defval, 1);\n \t\t  }\n \t\t\n \t\tOB_PUTC2 (',', ' ');"}]}