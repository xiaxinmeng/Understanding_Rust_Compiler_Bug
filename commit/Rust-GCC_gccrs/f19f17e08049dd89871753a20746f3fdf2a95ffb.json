{"sha": "f19f17e08049dd89871753a20746f3fdf2a95ffb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjE5ZjE3ZTA4MDQ5ZGQ4OTg3MTc1M2EyMDc0NmYzZmRmMmE5NWZmYg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@casey.cygnus.com", "date": "2000-02-22T22:04:35Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-02-22T22:04:35Z"}, "message": "dwarf2out.c (output_line_info): Put the marker for the end of the line number info at the actual end.\n\n        * dwarf2out.c (output_line_info): Put the marker for the end of\n        the line number info at the actual end.\n        (gen_struct_or_union_type_die): Use decl_function_context\n        to check for local classes.\n        * dwarfout.c (output_type): Likewise.\n\nFrom-SVN: r32105", "tree": {"sha": "846fb85460f1cf57241b9ec2478e7006167386cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/846fb85460f1cf57241b9ec2478e7006167386cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f19f17e08049dd89871753a20746f3fdf2a95ffb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f19f17e08049dd89871753a20746f3fdf2a95ffb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f19f17e08049dd89871753a20746f3fdf2a95ffb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f19f17e08049dd89871753a20746f3fdf2a95ffb/comments", "author": null, "committer": null, "parents": [{"sha": "99803cd4cc24c236f177c15da793366841bb5434", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99803cd4cc24c236f177c15da793366841bb5434", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99803cd4cc24c236f177c15da793366841bb5434"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "84c5af1ff2e1da8af3ed509ab0ac3d548ab3c8eb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f19f17e08049dd89871753a20746f3fdf2a95ffb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f19f17e08049dd89871753a20746f3fdf2a95ffb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f19f17e08049dd89871753a20746f3fdf2a95ffb", "patch": "@@ -1,3 +1,11 @@\n+2000-02-21  Jason Merrill  <jason@casey.cygnus.com>\n+\n+\t* dwarf2out.c (output_line_info): Put the marker for the end of\n+\tthe line number info at the actual end.\n+\t(gen_struct_or_union_type_die): Use decl_function_context \n+\tto check for local classes.\n+\t* dwarfout.c (output_type): Likewise.\n+\n Tue Feb 22 01:38:57 2000  Jeffrey A Law  (law@cygnus.com)\n \n \t* pa.h (FUNCTION_ARG_PASS_BY_REFERENCE): Handle pass-by-reference"}, {"sha": "6181cfb7ce28bc5ab961813c388577a0afad7489", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f19f17e08049dd89871753a20746f3fdf2a95ffb/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f19f17e08049dd89871753a20746f3fdf2a95ffb/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=f19f17e08049dd89871753a20746f3fdf2a95ffb", "patch": "@@ -2398,6 +2398,8 @@ static int get_AT_flag\t\t\tPARAMS ((dw_die_ref,\n \t\t\t\t\t\t enum dwarf_attribute));\n static unsigned get_AT_unsigned\t\tPARAMS ((dw_die_ref,\n \t\t\t\t\t\t enum dwarf_attribute));\n+static inline dw_die_ref get_AT_ref \tPARAMS ((dw_die_ref,\n+\t\t\t\t\t\t enum dwarf_attribute));\n static int is_c_family\t\t\tPARAMS ((void));\n static int is_fortran\t\t\tPARAMS ((void));\n static void remove_AT\t\t\tPARAMS ((dw_die_ref,\n@@ -3876,7 +3878,6 @@ get_AT_unsigned (die, attr_kind)\n   return AT_unsigned (a);\n }\n \n-static inline dw_die_ref get_AT_ref PARAMS ((dw_die_ref, enum dwarf_attribute));\n static inline dw_die_ref\n get_AT_ref (die, attr_kind)\n      dw_die_ref die;\n@@ -5730,8 +5731,6 @@ output_line_info ()\n       fputc ('\\n', asm_out_file);\n     }\n \n-  /* Output the marker for the end of the line number info.  */\n-  ASM_OUTPUT_LABEL (asm_out_file, \".LTEND\");\n   ASM_OUTPUT_DWARF_DATA1 (asm_out_file, 0);\n   if (flag_debug_asm)\n     fprintf (asm_out_file, \"\\t%s DW_LNE_end_sequence\", ASM_COMMENT_START);\n@@ -5926,6 +5925,9 @@ output_line_info ()\n \t  fputc ('\\n', asm_out_file);\n \t}\n     }\n+\n+  /* Output the marker for the end of the line number info.  */\n+  ASM_OUTPUT_LABEL (asm_out_file, \".LTEND\");\n }\n \f\n /* Given a pointer to a BLOCK node return non-zero if (and only if) the node\n@@ -8881,7 +8883,7 @@ gen_struct_or_union_type_die (type, context_die)\n       add_AT_flag (type_die, DW_AT_declaration, 1);\n \n       /* We don't need to do this for function-local types.  */\n-      if (context_die)\n+      if (! decl_function_context (TYPE_STUB_DECL (type)))\n \tadd_incomplete_type (type);\n     }\n }"}, {"sha": "94744259b1c5bbd9dae8420d2db9b1f5fd04f273", "filename": "gcc/dwarfout.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f19f17e08049dd89871753a20746f3fdf2a95ffb/gcc%2Fdwarfout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f19f17e08049dd89871753a20746f3fdf2a95ffb/gcc%2Fdwarfout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarfout.c?ref=f19f17e08049dd89871753a20746f3fdf2a95ffb", "patch": "@@ -4456,9 +4456,8 @@ output_type (type, containing_scope)\n \t\t|| TREE_CODE (TYPE_CONTEXT (type)) == NAMESPACE_DECL)\n \t    && !finalizing)\n \t  {\n-\t    /* We can't do this for function-local types, and we don't need\n-               to.  */\n-\t    if (TREE_PERMANENT (type))\n+\t    /* We don't need to do this for function-local types.  */\n+\t    if (! decl_function_context (TYPE_STUB_DECL (type)))\n \t      add_incomplete_type (type);\n \t    return;\t/* EARLY EXIT!  Avoid setting TREE_ASM_WRITTEN.  */\n \t  }"}]}