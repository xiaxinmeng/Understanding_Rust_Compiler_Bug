{"sha": "97a040e987bfdc40d3bf442be74571a6819122cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTdhMDQwZTk4N2JmZGM0MGQzYmY0NDJiZTc0NTcxYTY4MTkxMjJjZA==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2021-06-04T13:29:54Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2021-06-08T09:28:53Z"}, "message": "Add 'acc_device_radeon' testing to 'libgomp.oacc-*/acc_on_device-*'\n\n\tlibgomp/\n\t* testsuite/libgomp.oacc-c-c++-common/acc_on_device-1.c: Add\n\t'acc_device_radeon' testing.\n\t* testsuite/libgomp.oacc-fortran/acc_on_device-1-1.f90: Likewise.\n\t* testsuite/libgomp.oacc-fortran/acc_on_device-1-2.f: Likewise.\n\t* testsuite/libgomp.oacc-fortran/acc_on_device-1-3.f: Likewise.", "tree": {"sha": "d40081b78078ad9de2e5074e5dc3172c723a7631", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d40081b78078ad9de2e5074e5dc3172c723a7631"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97a040e987bfdc40d3bf442be74571a6819122cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97a040e987bfdc40d3bf442be74571a6819122cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97a040e987bfdc40d3bf442be74571a6819122cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97a040e987bfdc40d3bf442be74571a6819122cd/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89c1a427a1cfdb38e4b2354eeb1e28e0042af54c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89c1a427a1cfdb38e4b2354eeb1e28e0042af54c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89c1a427a1cfdb38e4b2354eeb1e28e0042af54c"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "064c6f5f2d83af7a090efe9a29f17ed1d278ac65", "filename": "libgomp/testsuite/libgomp.oacc-c-c++-common/acc_on_device-1.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Facc_on_device-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Facc_on_device-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Facc_on_device-1.c?ref=97a040e987bfdc40d3bf442be74571a6819122cd", "patch": "@@ -19,6 +19,8 @@ main (int argc, char *argv[])\n       abort ();\n     if (acc_on_device (acc_device_nvidia))\n       abort ();\n+    if (acc_on_device (acc_device_radeon))\n+      abort ();\n   }\n \n \n@@ -34,6 +36,8 @@ main (int argc, char *argv[])\n       abort ();\n     if (acc_on_device (acc_device_nvidia))\n       abort ();\n+    if (acc_on_device (acc_device_radeon))\n+      abort ();\n   }\n \n \n@@ -55,6 +59,13 @@ main (int argc, char *argv[])\n #else\n     if (acc_on_device (acc_device_nvidia))\n       abort ();\n+#endif\n+#if ACC_DEVICE_TYPE_radeon\n+    if (!acc_on_device (acc_device_radeon))\n+      abort ();\n+#else\n+    if (acc_on_device (acc_device_radeon))\n+      abort ();\n #endif\n   }\n "}, {"sha": "cd599e5d0e3ac9945b342f0239f62f8454cad7a4", "filename": "libgomp/testsuite/libgomp.oacc-fortran/acc_on_device-1-1.f90", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-1.f90?ref=97a040e987bfdc40d3bf442be74571a6819122cd", "patch": "@@ -21,6 +21,7 @@\n if (.not. acc_on_device (acc_device_host)) STOP 2\n if (acc_on_device (acc_device_not_host)) STOP 3\n if (acc_on_device (acc_device_nvidia)) STOP 4\n+if (acc_on_device (acc_device_radeon)) STOP 4\n \n \n ! Host via offloading fallback mode.\n@@ -32,6 +33,7 @@\n if (.not. acc_on_device (acc_device_host)) STOP 6\n if (acc_on_device (acc_device_not_host)) STOP 7\n if (acc_on_device (acc_device_nvidia)) STOP 8\n+if (acc_on_device (acc_device_radeon)) STOP 8\n !$acc end parallel\n \n \n@@ -49,6 +51,11 @@\n #else\n if (acc_on_device (acc_device_nvidia)) STOP 13\n #endif\n+#if ACC_DEVICE_TYPE_radeon\n+if (.not. acc_on_device (acc_device_radeon)) STOP 14\n+#else\n+if (acc_on_device (acc_device_radeon)) STOP 15\n+#endif\n !$acc end parallel\n \n #endif"}, {"sha": "eb3daba0188559da2c8201ef91fee9a589dd8edd", "filename": "libgomp/testsuite/libgomp.oacc-fortran/acc_on_device-1-2.f", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-2.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-2.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-2.f?ref=97a040e987bfdc40d3bf442be74571a6819122cd", "patch": "@@ -21,6 +21,7 @@\n       IF (.NOT. ACC_ON_DEVICE (ACC_DEVICE_HOST)) STOP 2\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NOT_HOST)) STOP 3\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NVIDIA)) STOP 4\n+      IF (ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 4\n \n \n !Host via offloading fallback mode.\n@@ -32,6 +33,7 @@\n       IF (.NOT. ACC_ON_DEVICE (ACC_DEVICE_HOST)) STOP 6\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NOT_HOST)) STOP 7\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NVIDIA)) STOP 8\n+      IF (ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 8\n !$ACC END PARALLEL\n \n \n@@ -49,6 +51,11 @@\n #else\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NVIDIA)) STOP 13\n #endif\n+#if ACC_DEVICE_TYPE_radeon\n+      IF (.NOT. ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 14\n+#else\n+      IF (ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 15\n+#endif\n !$ACC END PARALLEL\n \n #endif"}, {"sha": "5f500c19481330ffebf74a24538de9c904054687", "filename": "libgomp/testsuite/libgomp.oacc-fortran/acc_on_device-1-3.f", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-3.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97a040e987bfdc40d3bf442be74571a6819122cd/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-3.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Facc_on_device-1-3.f?ref=97a040e987bfdc40d3bf442be74571a6819122cd", "patch": "@@ -21,6 +21,7 @@\n       IF (.NOT. ACC_ON_DEVICE (ACC_DEVICE_HOST)) STOP 2\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NOT_HOST)) STOP 3\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NVIDIA)) STOP 4\n+      IF (ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 4\n \n \n !Host via offloading fallback mode.\n@@ -32,6 +33,7 @@\n       IF (.NOT. ACC_ON_DEVICE (ACC_DEVICE_HOST)) STOP 6\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NOT_HOST)) STOP 7\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NVIDIA)) STOP 8\n+      IF (ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 8\n !$ACC END PARALLEL\n \n \n@@ -49,6 +51,11 @@\n #else\n       IF (ACC_ON_DEVICE (ACC_DEVICE_NVIDIA)) STOP 13\n #endif\n+#if ACC_DEVICE_TYPE_radeon\n+      IF (.NOT. ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 14\n+#else\n+      IF (ACC_ON_DEVICE (ACC_DEVICE_RADEON)) STOP 15\n+#endif\n !$ACC END PARALLEL\n \n #endif"}]}