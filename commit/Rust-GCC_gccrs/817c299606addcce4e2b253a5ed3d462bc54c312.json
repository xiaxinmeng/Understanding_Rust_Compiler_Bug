{"sha": "817c299606addcce4e2b253a5ed3d462bc54c312", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODE3YzI5OTYwNmFkZGNjZTRlMmIyNTNhNWVkM2Q0NjJiYzU0YzMxMg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-05-19T15:57:17Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-05-19T15:57:17Z"}, "message": "re PR lto/44196 (lto1: ICE: tree check: expected field_decl, have type_decl in gimple_types_compatible_p, at gimple.c:3597)\n\n2010-05-19  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/44196\n\t* tree.c (find_decls_types_r): Walk BLOCKs and its vars.\n\n\t* g++.dg/lto/20100519-1_0.C: New testcase.\n\nFrom-SVN: r159582", "tree": {"sha": "d57e2f3593ba30034963c7090c0cdf3a446c7ba3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d57e2f3593ba30034963c7090c0cdf3a446c7ba3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/817c299606addcce4e2b253a5ed3d462bc54c312", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/817c299606addcce4e2b253a5ed3d462bc54c312", "html_url": "https://github.com/Rust-GCC/gccrs/commit/817c299606addcce4e2b253a5ed3d462bc54c312", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/817c299606addcce4e2b253a5ed3d462bc54c312/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c04b6b3823c92bd06e1a6b33d1a05003f1760df7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c04b6b3823c92bd06e1a6b33d1a05003f1760df7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c04b6b3823c92bd06e1a6b33d1a05003f1760df7"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "5eb9e02379bb5882fe69f532c5caac13612da142", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=817c299606addcce4e2b253a5ed3d462bc54c312", "patch": "@@ -1,3 +1,8 @@\n+2010-05-19  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/44196\n+\t* tree.c (find_decls_types_r): Walk BLOCKs and its vars.\n+\n 2010-05-19  Richard Guenther  <rguenther@suse.de>\n \n \t* doc/invoke.texi (-fwhopr): Document new optional jobs argument."}, {"sha": "4de8c08286e002c6099de6c41d07d5c26c8ed305", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=817c299606addcce4e2b253a5ed3d462bc54c312", "patch": "@@ -1,3 +1,8 @@\n+2010-05-19  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/44196\n+\t* g++.dg/lto/20100519-1_0.C: New testcase.\n+\n 2010-05-19  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/42360"}, {"sha": "bc2ddf140d15f2ca7ac2351da38212b552c753a3", "filename": "gcc/testsuite/g++.dg/lto/20100519-1_0.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2F20100519-1_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2F20100519-1_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2F20100519-1_0.C?ref=817c299606addcce4e2b253a5ed3d462bc54c312", "patch": "@@ -0,0 +1,23 @@\n+// { dg-lto-do link }\n+\n+template <typename Ordinal>\n+struct DirectSerializationTraits\n+{\n+  static void fromCountToDirectBytes(const Ordinal count) {}\n+};\n+template<typename Ordinal> class SerializationTraits\n+  : public DirectSerializationTraits<Ordinal> { };\n+template <typename Ordinal>\n+class ConstValueTypeSerializationBuffer\n+{\n+public:\n+    ConstValueTypeSerializationBuffer(const Ordinal count)\n+      {\n+\ttypedef SerializationTraits<Ordinal> SerT;\n+\tSerT::fromCountToDirectBytes(count);\n+      }\n+};\n+int main ()\n+{\n+  ConstValueTypeSerializationBuffer<int> charSendBuffer(1);\n+}"}, {"sha": "fbf24b1e8bc80e0baaee0de397aaa7036159d8d9", "filename": "gcc/tree.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/817c299606addcce4e2b253a5ed3d462bc54c312/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=817c299606addcce4e2b253a5ed3d462bc54c312", "patch": "@@ -4713,6 +4713,15 @@ find_decls_types_r (tree *tp, int *ws, void *data)\n       fld_worklist_push (TREE_CHAIN (t), fld);\n       *ws = 0;\n     }\n+  else if (TREE_CODE (t) == BLOCK)\n+    {\n+      tree tem;\n+      for (tem = BLOCK_VARS (t); tem; tem = TREE_CHAIN (tem))\n+\tfld_worklist_push (tem, fld);\n+      for (tem = BLOCK_SUBBLOCKS (t); tem; tem = BLOCK_CHAIN (tem))\n+\tfld_worklist_push (tem, fld);\n+      fld_worklist_push (BLOCK_ABSTRACT_ORIGIN (t), fld);\n+    }\n \n   fld_worklist_push (TREE_TYPE (t), fld);\n "}]}