{"sha": "bd8757b313518d151d28fff18f4d7958b5cb7ba3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQ4NzU3YjMxMzUxOGQxNTFkMjhmZmYxOGY0ZDc5NThiNWNiN2JhMw==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@cygnus.com", "date": "2000-12-09T03:08:23Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2000-12-09T03:08:23Z"}, "message": "fastjar: Imported.\n\n2000-12-08  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n\n        * fastjar: Imported.\n\nFrom-SVN: r38145", "tree": {"sha": "87ea917f50267296afe6acf62ccf01cba566fa09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87ea917f50267296afe6acf62ccf01cba566fa09"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd8757b313518d151d28fff18f4d7958b5cb7ba3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd8757b313518d151d28fff18f4d7958b5cb7ba3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd8757b313518d151d28fff18f4d7958b5cb7ba3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd8757b313518d151d28fff18f4d7958b5cb7ba3/comments", "author": null, "committer": null, "parents": [{"sha": "81522a1f8693a519afc801ca60cb390320791e5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81522a1f8693a519afc801ca60cb390320791e5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81522a1f8693a519afc801ca60cb390320791e5f"}], "stats": {"total": 7361, "additions": 7361, "deletions": 0}, "files": [{"sha": "f215ee43e2176a7ab5c0ff8481c11f0ef0dc07d6", "filename": "ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -1,3 +1,7 @@\n+2000-12-08  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n+\n+\t* fastjar: Imported.\n+\n 2000-12-08  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n \n \t* Makefile.in (TARGET_CONFIGDIRS): Wrong place. Removed note about"}, {"sha": "8351d85d460482f3fea898ae174847a7884923e5", "filename": "fastjar/AUTHORS", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FAUTHORS", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FAUTHORS", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FAUTHORS?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1 @@\n+Bryan Burns and Cory Jon Hollingsworth."}, {"sha": "057aa6110514d7f63011cf19518a8348563d15d4", "filename": "fastjar/CHANGES", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FCHANGES", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FCHANGES", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FCHANGES?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,38 @@\n+0.92\t\t08/24/2000\tImproved support for other Unix platforms.\n+\t\t\t\tNow works on Solaris, AIX, True 64, and HP-UX.\n+\t\t\t\tHopefully resolved all big endian problems.\n+\t\t\t\tFixed bug in update which caused it to skip\n+\t\t\t\topenning update file\n+\n+0.90            12/06/1999      Fixed recursive archival bug.\n+\n+0.86            10/12/1999      Applied patch to fix leading \"./\" problem.\n+\n+0.85            5/10/1999       The -t and -x flags now work.  Hooray!  Those\n+                                took quite a long time to get working. \n+                                Handling extraction/listing added quite a bit\n+                                of code, 500-1000 lines. ouch!\n+\n+0.75            4/27/1999       Added support for -C flag, allowing you to\n+                                change directories before adding files.  See\n+                                fastjar's usage screen for more info.  Also\n+                                improved the total compression display, and\n+                                added install/uninstall targets to the\n+                                Makefile.\n+\n+0.71            4/27/1999       Added -V flag to print version info.  Added\n+                                better error messages, and added configure\n+                                script for better portability.\n+\n+0.70            4/25/1999       Added compression.  Only deflation is supported\n+                                at this time (only one jar supports) and is\n+                                enabled by default.  use the -0 flag to disable\n+                                compression.\n+\n+0.60            4/21/1999       Added support for manifest files (-m, -M).\n+                                Fixed bug with mod time/date in central header.\n+\n+0.50.1          4/20/1999       Added patch from John Bley. (Fixes bug with\n+                                not properly closing the file)\n+\n+0.50            4/20/1999       First public release"}, {"sha": "d104746444159c5ff32bcdb031a9a45ea60a6b79", "filename": "fastjar/COPYING", "status": "added", "additions": 340, "deletions": 0, "changes": 340, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FCOPYING", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FCOPYING", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FCOPYING?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,340 @@\n+\t\t    GNU GENERAL PUBLIC LICENSE\n+\t\t       Version 2, June 1991\n+\n+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n+                       59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+ Everyone is permitted to copy and distribute verbatim copies\n+ of this license document, but changing it is not allowed.\n+\n+\t\t\t    Preamble\n+\n+  The licenses for most software are designed to take away your\n+freedom to share and change it.  By contrast, the GNU General Public\n+License is intended to guarantee your freedom to share and change free\n+software--to make sure the software is free for all its users.  This\n+General Public License applies to most of the Free Software\n+Foundation's software and to any other program whose authors commit to\n+using it.  (Some other Free Software Foundation software is covered by\n+the GNU Library General Public License instead.)  You can apply it to\n+your programs, too.\n+\n+  When we speak of free software, we are referring to freedom, not\n+price.  Our General Public Licenses are designed to make sure that you\n+have the freedom to distribute copies of free software (and charge for\n+this service if you wish), that you receive source code or can get it\n+if you want it, that you can change the software or use pieces of it\n+in new free programs; and that you know you can do these things.\n+\n+  To protect your rights, we need to make restrictions that forbid\n+anyone to deny you these rights or to ask you to surrender the rights.\n+These restrictions translate to certain responsibilities for you if you\n+distribute copies of the software, or if you modify it.\n+\n+  For example, if you distribute copies of such a program, whether\n+gratis or for a fee, you must give the recipients all the rights that\n+you have.  You must make sure that they, too, receive or can get the\n+source code.  And you must show them these terms so they know their\n+rights.\n+\n+  We protect your rights with two steps: (1) copyright the software, and\n+(2) offer you this license which gives you legal permission to copy,\n+distribute and/or modify the software.\n+\n+  Also, for each author's protection and ours, we want to make certain\n+that everyone understands that there is no warranty for this free\n+software.  If the software is modified by someone else and passed on, we\n+want its recipients to know that what they have is not the original, so\n+that any problems introduced by others will not reflect on the original\n+authors' reputations.\n+\n+  Finally, any free program is threatened constantly by software\n+patents.  We wish to avoid the danger that redistributors of a free\n+program will individually obtain patent licenses, in effect making the\n+program proprietary.  To prevent this, we have made it clear that any\n+patent must be licensed for everyone's free use or not licensed at all.\n+\n+  The precise terms and conditions for copying, distribution and\n+modification follow.\n+\f\n+\t\t    GNU GENERAL PUBLIC LICENSE\n+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n+\n+  0. This License applies to any program or other work which contains\n+a notice placed by the copyright holder saying it may be distributed\n+under the terms of this General Public License.  The \"Program\", below,\n+refers to any such program or work, and a \"work based on the Program\"\n+means either the Program or any derivative work under copyright law:\n+that is to say, a work containing the Program or a portion of it,\n+either verbatim or with modifications and/or translated into another\n+language.  (Hereinafter, translation is included without limitation in\n+the term \"modification\".)  Each licensee is addressed as \"you\".\n+\n+Activities other than copying, distribution and modification are not\n+covered by this License; they are outside its scope.  The act of\n+running the Program is not restricted, and the output from the Program\n+is covered only if its contents constitute a work based on the\n+Program (independent of having been made by running the Program).\n+Whether that is true depends on what the Program does.\n+\n+  1. You may copy and distribute verbatim copies of the Program's\n+source code as you receive it, in any medium, provided that you\n+conspicuously and appropriately publish on each copy an appropriate\n+copyright notice and disclaimer of warranty; keep intact all the\n+notices that refer to this License and to the absence of any warranty;\n+and give any other recipients of the Program a copy of this License\n+along with the Program.\n+\n+You may charge a fee for the physical act of transferring a copy, and\n+you may at your option offer warranty protection in exchange for a fee.\n+\n+  2. You may modify your copy or copies of the Program or any portion\n+of it, thus forming a work based on the Program, and copy and\n+distribute such modifications or work under the terms of Section 1\n+above, provided that you also meet all of these conditions:\n+\n+    a) You must cause the modified files to carry prominent notices\n+    stating that you changed the files and the date of any change.\n+\n+    b) You must cause any work that you distribute or publish, that in\n+    whole or in part contains or is derived from the Program or any\n+    part thereof, to be licensed as a whole at no charge to all third\n+    parties under the terms of this License.\n+\n+    c) If the modified program normally reads commands interactively\n+    when run, you must cause it, when started running for such\n+    interactive use in the most ordinary way, to print or display an\n+    announcement including an appropriate copyright notice and a\n+    notice that there is no warranty (or else, saying that you provide\n+    a warranty) and that users may redistribute the program under\n+    these conditions, and telling the user how to view a copy of this\n+    License.  (Exception: if the Program itself is interactive but\n+    does not normally print such an announcement, your work based on\n+    the Program is not required to print an announcement.)\n+\f\n+These requirements apply to the modified work as a whole.  If\n+identifiable sections of that work are not derived from the Program,\n+and can be reasonably considered independent and separate works in\n+themselves, then this License, and its terms, do not apply to those\n+sections when you distribute them as separate works.  But when you\n+distribute the same sections as part of a whole which is a work based\n+on the Program, the distribution of the whole must be on the terms of\n+this License, whose permissions for other licensees extend to the\n+entire whole, and thus to each and every part regardless of who wrote it.\n+\n+Thus, it is not the intent of this section to claim rights or contest\n+your rights to work written entirely by you; rather, the intent is to\n+exercise the right to control the distribution of derivative or\n+collective works based on the Program.\n+\n+In addition, mere aggregation of another work not based on the Program\n+with the Program (or with a work based on the Program) on a volume of\n+a storage or distribution medium does not bring the other work under\n+the scope of this License.\n+\n+  3. You may copy and distribute the Program (or a work based on it,\n+under Section 2) in object code or executable form under the terms of\n+Sections 1 and 2 above provided that you also do one of the following:\n+\n+    a) Accompany it with the complete corresponding machine-readable\n+    source code, which must be distributed under the terms of Sections\n+    1 and 2 above on a medium customarily used for software interchange; or,\n+\n+    b) Accompany it with a written offer, valid for at least three\n+    years, to give any third party, for a charge no more than your\n+    cost of physically performing source distribution, a complete\n+    machine-readable copy of the corresponding source code, to be\n+    distributed under the terms of Sections 1 and 2 above on a medium\n+    customarily used for software interchange; or,\n+\n+    c) Accompany it with the information you received as to the offer\n+    to distribute corresponding source code.  (This alternative is\n+    allowed only for noncommercial distribution and only if you\n+    received the program in object code or executable form with such\n+    an offer, in accord with Subsection b above.)\n+\n+The source code for a work means the preferred form of the work for\n+making modifications to it.  For an executable work, complete source\n+code means all the source code for all modules it contains, plus any\n+associated interface definition files, plus the scripts used to\n+control compilation and installation of the executable.  However, as a\n+special exception, the source code distributed need not include\n+anything that is normally distributed (in either source or binary\n+form) with the major components (compiler, kernel, and so on) of the\n+operating system on which the executable runs, unless that component\n+itself accompanies the executable.\n+\n+If distribution of executable or object code is made by offering\n+access to copy from a designated place, then offering equivalent\n+access to copy the source code from the same place counts as\n+distribution of the source code, even though third parties are not\n+compelled to copy the source along with the object code.\n+\f\n+  4. You may not copy, modify, sublicense, or distribute the Program\n+except as expressly provided under this License.  Any attempt\n+otherwise to copy, modify, sublicense or distribute the Program is\n+void, and will automatically terminate your rights under this License.\n+However, parties who have received copies, or rights, from you under\n+this License will not have their licenses terminated so long as such\n+parties remain in full compliance.\n+\n+  5. You are not required to accept this License, since you have not\n+signed it.  However, nothing else grants you permission to modify or\n+distribute the Program or its derivative works.  These actions are\n+prohibited by law if you do not accept this License.  Therefore, by\n+modifying or distributing the Program (or any work based on the\n+Program), you indicate your acceptance of this License to do so, and\n+all its terms and conditions for copying, distributing or modifying\n+the Program or works based on it.\n+\n+  6. Each time you redistribute the Program (or any work based on the\n+Program), the recipient automatically receives a license from the\n+original licensor to copy, distribute or modify the Program subject to\n+these terms and conditions.  You may not impose any further\n+restrictions on the recipients' exercise of the rights granted herein.\n+You are not responsible for enforcing compliance by third parties to\n+this License.\n+\n+  7. If, as a consequence of a court judgment or allegation of patent\n+infringement or for any other reason (not limited to patent issues),\n+conditions are imposed on you (whether by court order, agreement or\n+otherwise) that contradict the conditions of this License, they do not\n+excuse you from the conditions of this License.  If you cannot\n+distribute so as to satisfy simultaneously your obligations under this\n+License and any other pertinent obligations, then as a consequence you\n+may not distribute the Program at all.  For example, if a patent\n+license would not permit royalty-free redistribution of the Program by\n+all those who receive copies directly or indirectly through you, then\n+the only way you could satisfy both it and this License would be to\n+refrain entirely from distribution of the Program.\n+\n+If any portion of this section is held invalid or unenforceable under\n+any particular circumstance, the balance of the section is intended to\n+apply and the section as a whole is intended to apply in other\n+circumstances.\n+\n+It is not the purpose of this section to induce you to infringe any\n+patents or other property right claims or to contest validity of any\n+such claims; this section has the sole purpose of protecting the\n+integrity of the free software distribution system, which is\n+implemented by public license practices.  Many people have made\n+generous contributions to the wide range of software distributed\n+through that system in reliance on consistent application of that\n+system; it is up to the author/donor to decide if he or she is willing\n+to distribute software through any other system and a licensee cannot\n+impose that choice.\n+\n+This section is intended to make thoroughly clear what is believed to\n+be a consequence of the rest of this License.\n+\f\n+  8. If the distribution and/or use of the Program is restricted in\n+certain countries either by patents or by copyrighted interfaces, the\n+original copyright holder who places the Program under this License\n+may add an explicit geographical distribution limitation excluding\n+those countries, so that distribution is permitted only in or among\n+countries not thus excluded.  In such case, this License incorporates\n+the limitation as if written in the body of this License.\n+\n+  9. The Free Software Foundation may publish revised and/or new versions\n+of the General Public License from time to time.  Such new versions will\n+be similar in spirit to the present version, but may differ in detail to\n+address new problems or concerns.\n+\n+Each version is given a distinguishing version number.  If the Program\n+specifies a version number of this License which applies to it and \"any\n+later version\", you have the option of following the terms and conditions\n+either of that version or of any later version published by the Free\n+Software Foundation.  If the Program does not specify a version number of\n+this License, you may choose any version ever published by the Free Software\n+Foundation.\n+\n+  10. If you wish to incorporate parts of the Program into other free\n+programs whose distribution conditions are different, write to the author\n+to ask for permission.  For software which is copyrighted by the Free\n+Software Foundation, write to the Free Software Foundation; we sometimes\n+make exceptions for this.  Our decision will be guided by the two goals\n+of preserving the free status of all derivatives of our free software and\n+of promoting the sharing and reuse of software generally.\n+\n+\t\t\t    NO WARRANTY\n+\n+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n+PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n+REPAIR OR CORRECTION.\n+\n+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n+POSSIBILITY OF SUCH DAMAGES.\n+\n+\t\t     END OF TERMS AND CONDITIONS\n+\f\n+\t    How to Apply These Terms to Your New Programs\n+\n+  If you develop a new program, and you want it to be of the greatest\n+possible use to the public, the best way to achieve this is to make it\n+free software which everyone can redistribute and change under these terms.\n+\n+  To do so, attach the following notices to the program.  It is safest\n+to attach them to the start of each source file to most effectively\n+convey the exclusion of warranty; and each file should have at least\n+the \"copyright\" line and a pointer to where the full notice is found.\n+\n+    <one line to give the program's name and a brief idea of what it does.>\n+    Copyright (C) <year>  <name of author>\n+\n+    This program is free software; you can redistribute it and/or modify\n+    it under the terms of the GNU General Public License as published by\n+    the Free Software Foundation; either version 2 of the License, or\n+    (at your option) any later version.\n+\n+    This program is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+    GNU General Public License for more details.\n+\n+    You should have received a copy of the GNU General Public License\n+    along with this program; if not, write to the Free Software\n+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+\n+\n+Also add information on how to contact you by electronic and paper mail.\n+\n+If the program is interactive, make it output a short notice like this\n+when it starts in an interactive mode:\n+\n+    Gnomovision version 69, Copyright (C) year  name of author\n+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n+    This is free software, and you are welcome to redistribute it\n+    under certain conditions; type `show c' for details.\n+\n+The hypothetical commands `show w' and `show c' should show the appropriate\n+parts of the General Public License.  Of course, the commands you use may\n+be called something other than `show w' and `show c'; they could even be\n+mouse-clicks or menu items--whatever suits your program.\n+\n+You should also get your employer (if you work as a programmer) or your\n+school, if any, to sign a \"copyright disclaimer\" for the program, if\n+necessary.  Here is a sample; alter the names:\n+\n+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n+  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n+\n+  <signature of Ty Coon>, 1 April 1989\n+  Ty Coon, President of Vice\n+\n+This General Public License does not permit incorporating your program into\n+proprietary programs.  If your program is a subroutine library, you may\n+consider it more useful to permit linking proprietary applications with the\n+library.  If this is what you want to do, use the GNU Library General\n+Public License instead of this License."}, {"sha": "e6cef0902e626ae9cb42c5c541a19dc35f851c9e", "filename": "fastjar/ChangeLog", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FChangeLog?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,33 @@\n+Tue Nov 16 15:11:36 2000  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n+\n+\t* Makefile.am: New file.\n+\t* Makefile.in: Rebuilt.\n+\t* aclocal.m4: Likewise.\n+\t* stamp-h.in: Likewise.\n+\t* config.h.in: Likewise.\n+\t* configure.in (AM_INIT_AUTOMAKE): Added.\n+\t(AM_CONFIG_HEADER): Likewise.\n+\t(AC_CHECK_HEADERS): Check for sys/param.h\n+\t(AC_CHECK_LIB): Don't check for system's zlib.\n+\t(AC_CHECK_FUNC): Removed system's zlib function checks.\n+\t(ZDEPS. ZLIBS, ZINCS): Added.\n+\t* configure: Rebuilt.\n+\t* jartool.c (sys/param.h): Conditionally included or define MAXPATHLEN.\n+\t(init_args, get_next_arg): New function.\n+\t(use_explicit_list_only, read_names_from_stdin): New global\n+\t(main): Parse new non standard options 'E' and '@', check and\n+\treport their usage if necessary. Use init_args and get_next_arg.\n+\tFixed indentation.\n+\t(add_to_jar): Don't read directory content if `use_explicit_list_only'.\n+\t(usage): Added `-E' and `-@'.\n+\t* jartool.h (VERSION): Macro removed.\n+\n+Tue Nov 14 15:10:44 2000  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n+\n+\t* fastjar imported from sourceforge.net/projects/fastjar with\n+\tBryan Burns' permission. Check `CHANGES' for post import changes.\n+\t* ChangeLog: Created.\n+\t* NEWS: Likewise.\n+\t* mkinstalldirs: Likewise.\n+\t* COPYING: Likewise.\n+\t* AUTHORS: Likewise."}, {"sha": "cdc770fb741e30e474bccb6965c05619dbc08dcb", "filename": "fastjar/INSTALL", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FINSTALL", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FINSTALL", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FINSTALL?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,18 @@\n+----------------------\n+How to install fastjar\n+----------------------\n+\n+\n+1.  Run the 'configure' script to generate config.h and Makefile.  You can\n+    use 'configure --help' to get a list of command-line options.\n+\n+2.  If you're feeling experimental, you can change some settings in jartool.h\n+    to optimize fastjar for your particular system.\n+\n+3.  Type 'make' to create the fastjar binary.\n+\n+4.  Type 'make install' to install fastjar in whichever directory you supplied\n+    to configure (or the default directory if you didn't specify one.)\n+\n+\n+"}, {"sha": "bc1e1780da880eefd5f2f5b9251d17379a0fcad4", "filename": "fastjar/Makefile", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FMakefile", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FMakefile", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FMakefile?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,44 @@\n+# Generated automatically from Makefile.in by configure.\n+CFLAGS = -g -O2  -DHAVE_CONFIG_H\n+CC = gcc\n+INSTALL = /usr/bin/ginstall -c\n+prefix = /usr/local\n+exec_prefix = ${prefix}\n+BINARY = ${exec_prefix}/bin/fastjar\n+\n+all: fastjar grepjar\n+\n+fastjar: jartool.o dostime.o compress.o pushback.o\n+\t$(CC) -o $@ jartool.o dostime.o compress.o pushback.o -lz \n+\n+grepjar: jargrep.o dostime.o compress.o pushback.o\n+\t$(CC) -o $@ jargrep.o dostime.o compress.o pushback.o -lz \n+\n+install: fastjar\n+\t${INSTALL} -s -m 755 fastjar $(BINARY)\n+\n+uninstall:\n+\t/bin/rm -f $(BINARY)\n+\n+jartool.o: jartool.c dostime.c jartool.h zipfile.h dostime.h compress.h\n+\n+jartool.c: jartool.h zipfile.h\n+\n+dostime.o: dostime.c dostime.h\n+\n+dostime.c: dostime.h\n+\n+compress.o: compress.c compress.h\n+\n+compress.c: compress.h\n+\n+pushback.o: pushback.c pushback.h\n+\n+pushback.c: pushback.h\n+\n+jargrep.c: jargrep.h\n+\n+jargrep.o: jargrep.c jargrep.h\n+\n+clean:\n+\trm -rf *.o *~ core fastjar"}, {"sha": "037b57225f91c016d326b33e6921905f2c353459", "filename": "fastjar/Makefile.am", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FMakefile.am?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,50 @@\n+# Process this with automake to create Makefile.in\n+\n+# Work around what appears to be a GNU make bug handling MAKEFLAGS\n+# values defined in terms of make variables, as is the case for CC and\n+# friends when we are called from the top level Makefile.\n+AM_MAKEFLAGS = \\\n+\t\"AR_FLAGS=$(AR_FLAGS)\" \\\n+\t\"CC_FOR_BUILD=$(CC_FOR_BUILD)\" \\\n+\t\"CFLAGS=$(CFLAGS)\" \\\n+\t\"CXXFLAGS=$(CXXFLAGS)\" \\\n+\t\"CFLAGS_FOR_BUILD=$(CFLAGS_FOR_BUILD)\" \\\n+\t\"CFLAGS_FOR_TARGET=$(CFLAGS_FOR_TARGET)\" \\\n+\t\"INSTALL=$(INSTALL)\" \\\n+\t\"INSTALL_DATA=$(INSTALL_DATA)\" \\\n+\t\"INSTALL_PROGRAM=$(INSTALL_PROGRAM)\" \\\n+\t\"INSTALL_SCRIPT=$(INSTALL_SCRIPT)\" \\\n+\t\"JC1FLAGS=$(JC1FLAGS)\" \\\n+\t\"LDFLAGS=$(LDFLAGS)\" \\\n+\t\"LIBCFLAGS=$(LIBCFLAGS)\" \\\n+\t\"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)\" \\\n+\t\"MAKE=$(MAKE)\" \\\n+\t\"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \\\n+\t\"PICFLAG=$(PICFLAG)\" \\\n+\t\"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)\" \\\n+\t\"SHELL=$(SHELL)\" \\\n+\t\"exec_prefix=$(exec_prefix)\" \\\n+\t\"infodir=$(infodir)\" \\\n+\t\"libdir=$(libdir)\" \\\n+\t\"prefix=$(prefix)\" \\\n+\t\"AR=$(AR)\" \\\n+\t\"AS=$(AS)\" \\\n+\t\"CC=$(CC)\" \\\n+\t\"CXX=$(CXX)\" \\\n+\t\"LD=$(LD)\" \\\n+\t\"LIBCFLAGS=$(LIBCFLAGS)\" \\\n+\t\"NM=$(NM)\" \\\n+\t\"PICFLAG=$(PICFLAG)\" \\\n+\t\"RANLIB=$(RANLIB)\" \\\n+\t\"DESTDIR=$(DESTDIR)\"\n+\n+INCLUDES = -I. -I$(top_srcdir) $(ZINCS)\n+\n+bin_PROGRAMS = fastjar grepjar\n+fastjar_SOURCES = jartool.c dostime.c compress.c pushback.c jartool.h zipfile.h dostime.h compress.h pushback.h\n+fastjar_LDADD = $(ZLIBS)\n+fastjar_DEPENDENCIES = $(ZDEPS)\n+grepjar_SOURCES = jargrep.c dostime.c compress.c pushback.c jartool.h zipfile.h dostime.h compress.h pushback.h\n+grepjar_LDADD = $(ZLIBS)\n+grepjar_DEPENDENCIES = $(ZDEPS)\n+"}, {"sha": "4f1da7b31572158e32fb2aa336388e7d328021a3", "filename": "fastjar/Makefile.in", "status": "added", "additions": 417, "deletions": 0, "changes": 417, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FMakefile.in?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,417 @@\n+# Makefile.in generated automatically by automake 1.4 from Makefile.am\n+\n+# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.\n+# This Makefile.in is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+# PARTICULAR PURPOSE.\n+\n+# Process this with automake to create Makefile.in\n+\n+# Work around what appears to be a GNU make bug handling MAKEFLAGS\n+# values defined in terms of make variables, as is the case for CC and\n+# friends when we are called from the top level Makefile.\n+\n+\n+SHELL = @SHELL@\n+\n+srcdir = @srcdir@\n+top_srcdir = @top_srcdir@\n+VPATH = @srcdir@\n+prefix = @prefix@\n+exec_prefix = @exec_prefix@\n+\n+bindir = @bindir@\n+sbindir = @sbindir@\n+libexecdir = @libexecdir@\n+datadir = @datadir@\n+sysconfdir = @sysconfdir@\n+sharedstatedir = @sharedstatedir@\n+localstatedir = @localstatedir@\n+libdir = @libdir@\n+infodir = @infodir@\n+mandir = @mandir@\n+includedir = @includedir@\n+oldincludedir = /usr/include\n+\n+DESTDIR =\n+\n+pkgdatadir = $(datadir)/@PACKAGE@\n+pkglibdir = $(libdir)/@PACKAGE@\n+pkgincludedir = $(includedir)/@PACKAGE@\n+\n+top_builddir = .\n+\n+ACLOCAL = @ACLOCAL@\n+AUTOCONF = @AUTOCONF@\n+AUTOMAKE = @AUTOMAKE@\n+AUTOHEADER = @AUTOHEADER@\n+\n+INSTALL = @INSTALL@\n+INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)\n+INSTALL_DATA = @INSTALL_DATA@\n+INSTALL_SCRIPT = @INSTALL_SCRIPT@\n+transform = @program_transform_name@\n+\n+NORMAL_INSTALL = :\n+PRE_INSTALL = :\n+POST_INSTALL = :\n+NORMAL_UNINSTALL = :\n+PRE_UNINSTALL = :\n+POST_UNINSTALL = :\n+CC = @CC@\n+CHMOD = @CHMOD@\n+CP = @CP@\n+MAKEINFO = @MAKEINFO@\n+PACKAGE = @PACKAGE@\n+RM = @RM@\n+STRIP = @STRIP@\n+VERSION = @VERSION@\n+ZDEPS = @ZDEPS@\n+ZINCS = @ZINCS@\n+ZLIBS = @ZLIBS@\n+\n+AM_MAKEFLAGS =  \t\"AR_FLAGS=$(AR_FLAGS)\" \t\"CC_FOR_BUILD=$(CC_FOR_BUILD)\" \t\"CFLAGS=$(CFLAGS)\" \t\"CXXFLAGS=$(CXXFLAGS)\" \t\"CFLAGS_FOR_BUILD=$(CFLAGS_FOR_BUILD)\" \t\"CFLAGS_FOR_TARGET=$(CFLAGS_FOR_TARGET)\" \t\"INSTALL=$(INSTALL)\" \t\"INSTALL_DATA=$(INSTALL_DATA)\" \t\"INSTALL_PROGRAM=$(INSTALL_PROGRAM)\" \t\"INSTALL_SCRIPT=$(INSTALL_SCRIPT)\" \t\"JC1FLAGS=$(JC1FLAGS)\" \t\"LDFLAGS=$(LDFLAGS)\" \t\"LIBCFLAGS=$(LIBCFLAGS)\" \t\"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)\" \t\"MAKE=$(MAKE)\" \t\"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \t\"PICFLAG=$(PICFLAG)\" \t\"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)\" \t\"SHELL=$(SHELL)\" \t\"exec_prefix=$(exec_prefix)\" \t\"infodir=$(infodir)\" \t\"libdir=$(libdir)\" \t\"prefix=$(prefix)\" \t\"AR=$(AR)\" \t\"AS=$(AS)\" \t\"CC=$(CC)\" \t\"CXX=$(CXX)\" \t\"LD=$(LD)\" \t\"LIBCFLAGS=$(LIBCFLAGS)\" \t\"NM=$(NM)\" \t\"PICFLAG=$(PICFLAG)\" \t\"RANLIB=$(RANLIB)\" \t\"DESTDIR=$(DESTDIR)\"\n+\n+\n+INCLUDES = -I. -I$(top_srcdir) $(ZINCS)\n+\n+bin_PROGRAMS = fastjar grepjar\n+fastjar_SOURCES = jartool.c dostime.c compress.c pushback.c jartool.h zipfile.h dostime.h compress.h pushback.h\n+fastjar_LDADD = $(ZLIBS)\n+fastjar_DEPENDENCIES = $(ZDEPS)\n+grepjar_SOURCES = jargrep.c dostime.c compress.c pushback.c jartool.h zipfile.h dostime.h compress.h pushback.h\n+grepjar_LDADD = $(ZLIBS)\n+grepjar_DEPENDENCIES = $(ZDEPS)\n+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs\n+CONFIG_HEADER = config.h\n+CONFIG_CLEAN_FILES =  install-defs.sh\n+PROGRAMS =  $(bin_PROGRAMS)\n+\n+\n+DEFS = @DEFS@ -I. -I$(srcdir) -I.\n+CPPFLAGS = @CPPFLAGS@\n+LDFLAGS = @LDFLAGS@\n+LIBS = @LIBS@\n+fastjar_OBJECTS =  jartool.o dostime.o compress.o pushback.o\n+fastjar_LDFLAGS = \n+grepjar_OBJECTS =  jargrep.o dostime.o compress.o pushback.o\n+grepjar_LDFLAGS = \n+CFLAGS = @CFLAGS@\n+COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n+CCLD = $(CC)\n+LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@\n+DIST_COMMON =  README ./stamp-h.in AUTHORS COPYING ChangeLog INSTALL \\\n+Makefile.am Makefile.in NEWS aclocal.m4 config.h.in configure \\\n+configure.in install-defs.sh.in install-sh missing mkinstalldirs\n+\n+\n+DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)\n+\n+TAR = gtar\n+GZIP_ENV = --best\n+DEP_FILES =  .deps/compress.P .deps/dostime.P .deps/jargrep.P \\\n+.deps/jartool.P .deps/pushback.P\n+SOURCES = $(fastjar_SOURCES) $(grepjar_SOURCES)\n+OBJECTS = $(fastjar_OBJECTS) $(grepjar_OBJECTS)\n+\n+all: all-redirect\n+.SUFFIXES:\n+.SUFFIXES: .S .c .o .s\n+$(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) \n+\tcd $(top_srcdir) && $(AUTOMAKE) --gnu Makefile\n+\n+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)\n+\tcd $(top_builddir) \\\n+\t  && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status\n+\n+$(ACLOCAL_M4):  configure.in \n+\tcd $(srcdir) && $(ACLOCAL)\n+\n+config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n+\t$(SHELL) ./config.status --recheck\n+$(srcdir)/configure: $(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)\n+\tcd $(srcdir) && $(AUTOCONF)\n+\n+config.h: stamp-h\n+\t@if test ! -f $@; then \\\n+\t\trm -f stamp-h; \\\n+\t\t$(MAKE) stamp-h; \\\n+\telse :; fi\n+stamp-h: $(srcdir)/config.h.in $(top_builddir)/config.status\n+\tcd $(top_builddir) \\\n+\t  && CONFIG_FILES= CONFIG_HEADERS=config.h \\\n+\t     $(SHELL) ./config.status\n+\t@echo timestamp > stamp-h 2> /dev/null\n+$(srcdir)/config.h.in: $(srcdir)/stamp-h.in\n+\t@if test ! -f $@; then \\\n+\t\trm -f $(srcdir)/stamp-h.in; \\\n+\t\t$(MAKE) $(srcdir)/stamp-h.in; \\\n+\telse :; fi\n+$(srcdir)/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) \n+\tcd $(top_srcdir) && $(AUTOHEADER)\n+\t@echo timestamp > $(srcdir)/stamp-h.in 2> /dev/null\n+\n+mostlyclean-hdr:\n+\n+clean-hdr:\n+\n+distclean-hdr:\n+\t-rm -f config.h\n+\n+maintainer-clean-hdr:\n+install-defs.sh: $(top_builddir)/config.status install-defs.sh.in\n+\tcd $(top_builddir) && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status\n+\n+mostlyclean-binPROGRAMS:\n+\n+clean-binPROGRAMS:\n+\t-test -z \"$(bin_PROGRAMS)\" || rm -f $(bin_PROGRAMS)\n+\n+distclean-binPROGRAMS:\n+\n+maintainer-clean-binPROGRAMS:\n+\n+install-binPROGRAMS: $(bin_PROGRAMS)\n+\t@$(NORMAL_INSTALL)\n+\t$(mkinstalldirs) $(DESTDIR)$(bindir)\n+\t@list='$(bin_PROGRAMS)'; for p in $$list; do \\\n+\t  if test -f $$p; then \\\n+\t    echo \"  $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`\"; \\\n+\t     $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \\\n+\t  else :; fi; \\\n+\tdone\n+\n+uninstall-binPROGRAMS:\n+\t@$(NORMAL_UNINSTALL)\n+\tlist='$(bin_PROGRAMS)'; for p in $$list; do \\\n+\t  rm -f $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \\\n+\tdone\n+\n+.s.o:\n+\t$(COMPILE) -c $<\n+\n+.S.o:\n+\t$(COMPILE) -c $<\n+\n+mostlyclean-compile:\n+\t-rm -f *.o core *.core\n+\n+clean-compile:\n+\n+distclean-compile:\n+\t-rm -f *.tab.c\n+\n+maintainer-clean-compile:\n+\n+fastjar: $(fastjar_OBJECTS) $(fastjar_DEPENDENCIES)\n+\t@rm -f fastjar\n+\t$(LINK) $(fastjar_LDFLAGS) $(fastjar_OBJECTS) $(fastjar_LDADD) $(LIBS)\n+\n+grepjar: $(grepjar_OBJECTS) $(grepjar_DEPENDENCIES)\n+\t@rm -f grepjar\n+\t$(LINK) $(grepjar_LDFLAGS) $(grepjar_OBJECTS) $(grepjar_LDADD) $(LIBS)\n+\n+tags: TAGS\n+\n+ID: $(HEADERS) $(SOURCES) $(LISP)\n+\tlist='$(SOURCES) $(HEADERS)'; \\\n+\tunique=`for i in $$list; do echo $$i; done | \\\n+\t  awk '    { files[$$0] = 1; } \\\n+\t       END { for (i in files) print i; }'`; \\\n+\there=`pwd` && cd $(srcdir) \\\n+\t  && mkid -f$$here/ID $$unique $(LISP)\n+\n+TAGS:  $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) $(LISP)\n+\ttags=; \\\n+\there=`pwd`; \\\n+\tlist='$(SOURCES) $(HEADERS)'; \\\n+\tunique=`for i in $$list; do echo $$i; done | \\\n+\t  awk '    { files[$$0] = 1; } \\\n+\t       END { for (i in files) print i; }'`; \\\n+\ttest -z \"$(ETAGS_ARGS)config.h.in$$unique$(LISP)$$tags\" \\\n+\t  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags config.h.in $$unique $(LISP) -o $$here/TAGS)\n+\n+mostlyclean-tags:\n+\n+clean-tags:\n+\n+distclean-tags:\n+\t-rm -f TAGS ID\n+\n+maintainer-clean-tags:\n+\n+distdir = $(PACKAGE)-$(VERSION)\n+top_distdir = $(distdir)\n+\n+# This target untars the dist file and tries a VPATH configuration.  Then\n+# it guarantees that the distribution is self-contained by making another\n+# tarfile.\n+distcheck: dist\n+\t-rm -rf $(distdir)\n+\tGZIP=$(GZIP_ENV) $(TAR) zxf $(distdir).tar.gz\n+\tmkdir $(distdir)/=build\n+\tmkdir $(distdir)/=inst\n+\tdc_install_base=`cd $(distdir)/=inst && pwd`; \\\n+\tcd $(distdir)/=build \\\n+\t  && ../configure --srcdir=.. --prefix=$$dc_install_base \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) dvi \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) check \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) install \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) installcheck \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) dist\n+\t-rm -rf $(distdir)\n+\t@banner=\"$(distdir).tar.gz is ready for distribution\"; \\\n+\tdashes=`echo \"$$banner\" | sed s/./=/g`; \\\n+\techo \"$$dashes\"; \\\n+\techo \"$$banner\"; \\\n+\techo \"$$dashes\"\n+dist: distdir\n+\t-chmod -R a+r $(distdir)\n+\tGZIP=$(GZIP_ENV) $(TAR) chozf $(distdir).tar.gz $(distdir)\n+\t-rm -rf $(distdir)\n+dist-all: distdir\n+\t-chmod -R a+r $(distdir)\n+\tGZIP=$(GZIP_ENV) $(TAR) chozf $(distdir).tar.gz $(distdir)\n+\t-rm -rf $(distdir)\n+distdir: $(DISTFILES)\n+\t-rm -rf $(distdir)\n+\tmkdir $(distdir)\n+\t-chmod 777 $(distdir)\n+\there=`cd $(top_builddir) && pwd`; \\\n+\ttop_distdir=`cd $(distdir) && pwd`; \\\n+\tdistdir=`cd $(distdir) && pwd`; \\\n+\tcd $(top_srcdir) \\\n+\t  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu Makefile\n+\t@for file in $(DISTFILES); do \\\n+\t  d=$(srcdir); \\\n+\t  if test -d $$d/$$file; then \\\n+\t    cp -pr $$/$$file $(distdir)/$$file; \\\n+\t  else \\\n+\t    test -f $(distdir)/$$file \\\n+\t    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \\\n+\t    || cp -p $$d/$$file $(distdir)/$$file || :; \\\n+\t  fi; \\\n+\tdone\n+\n+DEPS_MAGIC := $(shell mkdir .deps > /dev/null 2>&1 || :)\n+\n+-include $(DEP_FILES)\n+\n+mostlyclean-depend:\n+\n+clean-depend:\n+\n+distclean-depend:\n+\t-rm -rf .deps\n+\n+maintainer-clean-depend:\n+\n+%.o: %.c\n+\t@echo '$(COMPILE) -c $<'; \\\n+\t$(COMPILE) -Wp,-MD,.deps/$(*F).pp -c $<\n+\t@-cp .deps/$(*F).pp .deps/$(*F).P; \\\n+\ttr ' ' '\\012' < .deps/$(*F).pp \\\n+\t  | sed -e 's/^\\\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \\\n+\t    >> .deps/$(*F).P; \\\n+\trm .deps/$(*F).pp\n+\n+%.lo: %.c\n+\t@echo '$(LTCOMPILE) -c $<'; \\\n+\t$(LTCOMPILE) -Wp,-MD,.deps/$(*F).pp -c $<\n+\t@-sed -e 's/^\\([^:]*\\)\\.o[ \t]*:/\\1.lo \\1.o :/' \\\n+\t  < .deps/$(*F).pp > .deps/$(*F).P; \\\n+\ttr ' ' '\\012' < .deps/$(*F).pp \\\n+\t  | sed -e 's/^\\\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \\\n+\t    >> .deps/$(*F).P; \\\n+\trm -f .deps/$(*F).pp\n+info-am:\n+info: info-am\n+dvi-am:\n+dvi: dvi-am\n+check-am: all-am\n+check: check-am\n+installcheck-am:\n+installcheck: installcheck-am\n+all-recursive-am: config.h\n+\t$(MAKE) $(AM_MAKEFLAGS) all-recursive\n+\n+install-exec-am: install-binPROGRAMS\n+install-exec: install-exec-am\n+\n+install-data-am:\n+install-data: install-data-am\n+\n+install-am: all-am\n+\t@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am\n+install: install-am\n+uninstall-am: uninstall-binPROGRAMS\n+uninstall: uninstall-am\n+all-am: Makefile $(PROGRAMS) config.h\n+all-redirect: all-am\n+install-strip:\n+\t$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install\n+installdirs:\n+\t$(mkinstalldirs)  $(DESTDIR)$(bindir)\n+\n+\n+mostlyclean-generic:\n+\n+clean-generic:\n+\n+distclean-generic:\n+\t-rm -f Makefile $(CONFIG_CLEAN_FILES)\n+\t-rm -f config.cache config.log stamp-h stamp-h[0-9]*\n+\n+maintainer-clean-generic:\n+mostlyclean-am:  mostlyclean-hdr mostlyclean-binPROGRAMS \\\n+\t\tmostlyclean-compile mostlyclean-tags mostlyclean-depend \\\n+\t\tmostlyclean-generic\n+\n+mostlyclean: mostlyclean-am\n+\n+clean-am:  clean-hdr clean-binPROGRAMS clean-compile clean-tags \\\n+\t\tclean-depend clean-generic mostlyclean-am\n+\n+clean: clean-am\n+\n+distclean-am:  distclean-hdr distclean-binPROGRAMS distclean-compile \\\n+\t\tdistclean-tags distclean-depend distclean-generic \\\n+\t\tclean-am\n+\n+distclean: distclean-am\n+\t-rm -f config.status\n+\n+maintainer-clean-am:  maintainer-clean-hdr maintainer-clean-binPROGRAMS \\\n+\t\tmaintainer-clean-compile maintainer-clean-tags \\\n+\t\tmaintainer-clean-depend maintainer-clean-generic \\\n+\t\tdistclean-am\n+\t@echo \"This command is intended for maintainers to use;\"\n+\t@echo \"it deletes files that may require special tools to rebuild.\"\n+\n+maintainer-clean: maintainer-clean-am\n+\t-rm -f config.status\n+\n+.PHONY: mostlyclean-hdr distclean-hdr clean-hdr maintainer-clean-hdr \\\n+mostlyclean-binPROGRAMS distclean-binPROGRAMS clean-binPROGRAMS \\\n+maintainer-clean-binPROGRAMS uninstall-binPROGRAMS install-binPROGRAMS \\\n+mostlyclean-compile distclean-compile clean-compile \\\n+maintainer-clean-compile tags mostlyclean-tags distclean-tags \\\n+clean-tags maintainer-clean-tags distdir mostlyclean-depend \\\n+distclean-depend clean-depend maintainer-clean-depend info-am info \\\n+dvi-am dvi check check-am installcheck-am installcheck all-recursive-am \\\n+install-exec-am install-exec install-data-am install-data install-am \\\n+install uninstall-am uninstall all-redirect all-am all installdirs \\\n+mostlyclean-generic distclean-generic clean-generic \\\n+maintainer-clean-generic clean mostlyclean distclean maintainer-clean\n+\n+\n+# Tell versions [3.59,3.63) of GNU make to not export all variables.\n+# Otherwise a system limit (for SysV at least) may be exceeded.\n+.NOEXPORT:"}, {"sha": "70ee4990fb2417581ab9bf9b7045a1725708a1d5", "filename": "fastjar/NEWS", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FNEWS", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FNEWS", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FNEWS?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,14 @@\n+Noteworthy changes in fastjar, 11/2000\n+--------------------------------------\n+\n+Fastjar as been imported from sourceforge.net/projects/fastjar with\n+Brian Burns' permission so that it can be used as a replacement to the\n+zip utility in order to create the libgcj.zip archive. Several missing\n+distribution files were created, most notably Makefile.am.\n+\n+Two new options were added: `-E' to prevent fastjar from reading the\n+content of a directory when specifying one (and instead relying on the\n+provided list of files to populate the archive with regard to the\n+directory entry) and `-@' to let fastjar read the name of the files to\n+add to the archive from the standard input. This last option is\n+supported only when creating or augmenting an archive."}, {"sha": "d3f87a8b8606ea9ed950a6d005e7afb3affc2455", "filename": "fastjar/README", "status": "added", "additions": 75, "deletions": 0, "changes": 75, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FREADME", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2FREADME", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FREADME?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,75 @@\n+=======\n+FastJar 0.90\n+\n+12/6/1999\n+=======\n+\n+FastJar is an attempt at creating a feature-for-feature copy of Sun's JDK's\n+'jar' command.  Sun's jar (or Blackdown's for that matter) is written entirely\n+in Java which makes it dog slow.  Since FastJar is written in C, it can create\n+the same .jar file as Sun's tool in a fraction of the time.  On my system,\n+Sun's jar takes 50 seconds to create a 10MB jar file, while FastJar only takes\n+a little over a second.  \n+\n+The reason I wrote fastjar is that building .jar files is a regular process\n+of the build where I work.  The way we have it setup, you have to re-create\n+the .jar file everytime you want to test it out, which is about every 5 minutes\n+when I'm busy coding.  The .jar file wasn't -that- big, but it did take about\n+30 seconds to be made, and watching all the garbage collection messages was\n+pretty irritating as well.  I probably wasted a half-hour a day watching\n+Sun's jar tool chug along.  By writing the program in C, I spend much less time\n+banging my head against the monitor waiting for the build to finish.  Yay!\n+\n+FastJar has been tested on Solaris and Linux 2.2.x systems and nothing else. \n+It should compile/run without any problems on either system, provided you have\n+zlib installed.  \n+\n+Please mail any bug reports to burnsbr@ucs.orst.edu.\n+\n+If you use FastJar and want me to add the rest of the features, send me mail\n+(toast@users.sourceforge.net).  I'll be much more likely to put more work into this\n+if I know other people find it useful other than me.\n+\n+As always, this not being a final release, bugs may exist.  I test each\n+release pretty well, but I can always miss things...\n+\n+Compression will slow things down quite a bit.  A 10MB jar file takes about\n+1 second on my machine without compression, and 9 seconds with it.  If you\n+want fastjar to be fast, use the -0 (zero, not O) flag to turn off compression.\n+\n+Supported flags:\n+--------------------------\n+-c  | create a new archive\n+-v  | verbose output\n+-f  | specify archive file name\n+-m  | specify existing manifest file\n+-M  | don't create manifest\n+-0  | store only\n+-C  | change to dir\n+-t  | list contents\n+-x  | extract contents\n+\n+Unsupported flags:\n+----------------------------\n+-u  | update exisiting archive\n+\n+If you use the \"unsupported\" flags, nothing bad will happen, but then again\n+nothing will happen at all.  \n+\n+\n+Unsupported features (in this release):\n+---------------------------------------------\n+  * updating\n+  * full manifest support (?)\n+\n+Order or features for the future:\n+--------------------------------------------\n+  * archive updating\n+  * full manifest support\n+  * filtering\n+  * dependency checking\n+\n+\n+===========================================================================\n+http://fastjar.sourceforge.net\n+toast@users.sourceforge.net"}, {"sha": "f23ba2904e17f5ce128893301a5f29aad9149aeb", "filename": "fastjar/aclocal.m4", "status": "added", "additions": 127, "deletions": 0, "changes": 127, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Faclocal.m4?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,127 @@\n+dnl aclocal.m4 generated automatically by aclocal 1.4\n+\n+dnl Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.\n+dnl This file is free software; the Free Software Foundation\n+dnl gives unlimited permission to copy and/or distribute it,\n+dnl with or without modifications, as long as this notice is preserved.\n+\n+dnl This program is distributed in the hope that it will be useful,\n+dnl but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n+dnl even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+dnl PARTICULAR PURPOSE.\n+\n+# Do all the work for Automake.  This macro actually does too much --\n+# some checks are only needed if your package does certain things.\n+# But this isn't really a big deal.\n+\n+# serial 1\n+\n+dnl Usage:\n+dnl AM_INIT_AUTOMAKE(package,version, [no-define])\n+\n+AC_DEFUN(AM_INIT_AUTOMAKE,\n+[AC_REQUIRE([AC_PROG_INSTALL])\n+PACKAGE=[$1]\n+AC_SUBST(PACKAGE)\n+VERSION=[$2]\n+AC_SUBST(VERSION)\n+dnl test to see if srcdir already configured\n+if test \"`cd $srcdir && pwd`\" != \"`pwd`\" && test -f $srcdir/config.status; then\n+  AC_MSG_ERROR([source directory already configured; run \"make distclean\" there first])\n+fi\n+ifelse([$3],,\n+AC_DEFINE_UNQUOTED(PACKAGE, \"$PACKAGE\", [Name of package])\n+AC_DEFINE_UNQUOTED(VERSION, \"$VERSION\", [Version number of package]))\n+AC_REQUIRE([AM_SANITY_CHECK])\n+AC_REQUIRE([AC_ARG_PROGRAM])\n+dnl FIXME This is truly gross.\n+missing_dir=`cd $ac_aux_dir && pwd`\n+AM_MISSING_PROG(ACLOCAL, aclocal, $missing_dir)\n+AM_MISSING_PROG(AUTOCONF, autoconf, $missing_dir)\n+AM_MISSING_PROG(AUTOMAKE, automake, $missing_dir)\n+AM_MISSING_PROG(AUTOHEADER, autoheader, $missing_dir)\n+AM_MISSING_PROG(MAKEINFO, makeinfo, $missing_dir)\n+AC_REQUIRE([AC_PROG_MAKE_SET])])\n+\n+#\n+# Check to make sure that the build environment is sane.\n+#\n+\n+AC_DEFUN(AM_SANITY_CHECK,\n+[AC_MSG_CHECKING([whether build environment is sane])\n+# Just in case\n+sleep 1\n+echo timestamp > conftestfile\n+# Do `set' in a subshell so we don't clobber the current shell's\n+# arguments.  Must try -L first in case configure is actually a\n+# symlink; some systems play weird games with the mod time of symlinks\n+# (eg FreeBSD returns the mod time of the symlink's containing\n+# directory).\n+if (\n+   set X `ls -Lt $srcdir/configure conftestfile 2> /dev/null`\n+   if test \"[$]*\" = \"X\"; then\n+      # -L didn't work.\n+      set X `ls -t $srcdir/configure conftestfile`\n+   fi\n+   if test \"[$]*\" != \"X $srcdir/configure conftestfile\" \\\n+      && test \"[$]*\" != \"X conftestfile $srcdir/configure\"; then\n+\n+      # If neither matched, then we have a broken ls.  This can happen\n+      # if, for instance, CONFIG_SHELL is bash and it inherits a\n+      # broken ls alias from the environment.  This has actually\n+      # happened.  Such a system could not be considered \"sane\".\n+      AC_MSG_ERROR([ls -t appears to fail.  Make sure there is not a broken\n+alias in your environment])\n+   fi\n+\n+   test \"[$]2\" = conftestfile\n+   )\n+then\n+   # Ok.\n+   :\n+else\n+   AC_MSG_ERROR([newly created file is older than distributed files!\n+Check your system clock])\n+fi\n+rm -f conftest*\n+AC_MSG_RESULT(yes)])\n+\n+dnl AM_MISSING_PROG(NAME, PROGRAM, DIRECTORY)\n+dnl The program must properly implement --version.\n+AC_DEFUN(AM_MISSING_PROG,\n+[AC_MSG_CHECKING(for working $2)\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if ($2 --version) < /dev/null > /dev/null 2>&1; then\n+   $1=$2\n+   AC_MSG_RESULT(found)\n+else\n+   $1=\"$3/missing $2\"\n+   AC_MSG_RESULT(missing)\n+fi\n+AC_SUBST($1)])\n+\n+# Like AC_CONFIG_HEADER, but automatically create stamp file.\n+\n+AC_DEFUN(AM_CONFIG_HEADER,\n+[AC_PREREQ([2.12])\n+AC_CONFIG_HEADER([$1])\n+dnl When config.status generates a header, we must update the stamp-h file.\n+dnl This file resides in the same directory as the config header\n+dnl that is generated.  We must strip everything past the first \":\",\n+dnl and everything past the last \"/\".\n+AC_OUTPUT_COMMANDS(changequote(<<,>>)dnl\n+ifelse(patsubst(<<$1>>, <<[^ ]>>, <<>>), <<>>,\n+<<test -z \"<<$>>CONFIG_HEADERS\" || echo timestamp > patsubst(<<$1>>, <<^\\([^:]*/\\)?.*>>, <<\\1>>)stamp-h<<>>dnl>>,\n+<<am_indx=1\n+for am_file in <<$1>>; do\n+  case \" <<$>>CONFIG_HEADERS \" in\n+  *\" <<$>>am_file \"*<<)>>\n+    echo timestamp > `echo <<$>>am_file | sed -e 's%:.*%%' -e 's%[^/]*$%%'`stamp-h$am_indx\n+    ;;\n+  esac\n+  am_indx=`expr \"<<$>>am_indx\" + 1`\n+done<<>>dnl>>)\n+changequote([,]))])\n+"}, {"sha": "0f919d76364da41afd20a76fac5a25e6b926bb1e", "filename": "fastjar/compress.c", "status": "added", "additions": 487, "deletions": 0, "changes": 487, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fcompress.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fcompress.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fcompress.c?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,487 @@\n+/* $Id: compress.c,v 1.7 2000/09/13 14:02:02 cory Exp $\n+\n+   $Log: compress.c,v $\n+   Revision 1.7  2000/09/13 14:02:02  cory\n+   Reformatted some of the code to more closly match the layout of the orriginal\n+   fastjar utility.\n+\n+   Revision 1.6  2000/09/12 22:29:36  cory\n+   Jargrep now seems to do what I want it to do.  Performs properly on Linux x86,\n+   will test some other platforms later.\n+\n+   Revision 1.1.1.1  1999/12/06 03:09:16  toast\n+   initial checkin..\n+\n+\n+\n+   Revision 1.7  1999/05/10 08:50:05  burnsbr\n+   *** empty log message ***\n+\n+   Revision 1.6  1999/05/10 08:38:44  burnsbr\n+   *** empty log message ***\n+\n+   Revision 1.5  1999/05/10 08:30:29  burnsbr\n+   added inflation code\n+\n+   Revision 1.4  1999/04/27 10:03:33  burnsbr\n+   added configure support\n+\n+   Revision 1.3  1999/04/26 02:35:32  burnsbr\n+   compression now works.. yahoo\n+\n+   Revision 1.2  1999/04/23 12:01:59  burnsbr\n+   added licence stuff.\n+\n+   Revision 1.1  1999/04/23 11:58:25  burnsbr\n+   Initial revision\n+\n+\n+*/\n+\n+/*\n+  compress.c - code for handling deflation\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+ */\n+\n+#include \"config.h\"\n+\n+#include <zlib.h>\n+#include <string.h>\n+#include <stdio.h>\n+#include <errno.h>\n+\n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+\n+#include <sys/types.h>\n+\n+#include \"jartool.h\"\n+#include \"pushback.h\"\n+\n+extern int seekable;\n+\n+static char rcsid[] = \"$Id: compress.c,v 1.7 2000/09/13 14:02:02 cory Exp $\";\n+\n+static z_stream zs;\n+\n+void init_compression(){\n+\n+  memset(&zs, 0, sizeof(z_stream));\n+\n+  zs.zalloc = Z_NULL;\n+  zs.zfree = Z_NULL;\n+  zs.opaque = Z_NULL;\n+\n+  /* Why -MAX_WBITS?  zlib has an undocumented feature, where if the windowbits\n+     parameter is negative, it omits the zlib header, which seems to kill\n+     any other zip/unzip program.  This caused me SO much pain.. */\n+  if(deflateInit2(&zs, Z_DEFAULT_COMPRESSION, Z_DEFLATED, -MAX_WBITS, \n+                  9, Z_DEFAULT_STRATEGY) != Z_OK){\n+    \n+    fprintf(stderr, \"Error initializing deflation!\\n\");\n+    exit(1);\n+  }\n+}\n+\n+int compress_file(int in_fd, int out_fd, struct zipentry *ze){\n+  Bytef in_buff[RDSZ];\n+  Bytef out_buff[RDSZ];\n+  unsigned int rdamt, wramt;\n+  unsigned long tr = 0;\n+\n+  rdamt = 0;\n+\n+  zs.avail_in = 0;\n+  zs.next_in = in_buff;\n+  \n+  zs.next_out = out_buff;\n+  zs.avail_out = (uInt)RDSZ;\n+  \n+  ze->crc = crc32(0L, Z_NULL, 0); \n+  \n+  for(; ;){\n+    \n+    /* If deflate is out of input, fill the input buffer for it */\n+    if(zs.avail_in == 0 && zs.avail_out > 0){\n+      if((rdamt = read(in_fd, in_buff, RDSZ)) == 0)\n+        break;\n+\n+      if(rdamt == -1){\n+        perror(\"read\");\n+        exit(1);\n+      }\n+      \n+      /* compute the CRC while we're at it */\n+      ze->crc = crc32(ze->crc, in_buff, rdamt); \n+\n+      /* update the total amount read sofar */\n+      tr += rdamt;\n+\n+      zs.next_in = in_buff;\n+      zs.avail_in = rdamt;\n+    }\n+    \n+    /* deflate the data */\n+    if(deflate(&zs, 0) != Z_OK){\n+      fprintf(stderr, \"Error deflating! %s:%d\\n\", __FILE__, __LINE__);\n+      exit(1);\n+    }\n+    \n+    /* If the output buffer is full, dump it to disk */\n+    if(zs.avail_out == 0){\n+\n+      if(write(out_fd, out_buff, RDSZ) != RDSZ){\n+        perror(\"write\");\n+        exit(1);\n+      }\n+\n+      /* clear the output buffer */\n+      zs.next_out = out_buff;\n+      zs.avail_out = (uInt)RDSZ;\n+    }\n+\n+  }\n+  \n+  /* If we have any data waiting in the buffer after we're done with the file\n+     we can flush it */\n+  if(zs.avail_out < RDSZ){\n+\n+    wramt = RDSZ - zs.avail_out;\n+\n+    if(write(out_fd, out_buff, wramt) != wramt){\n+      perror(\"write\");\n+      exit(1);\n+    }\n+    /* clear the output buffer */\n+    zs.next_out = out_buff;\n+    zs.avail_out = (uInt)RDSZ;\n+  }\n+  \n+\n+  /* finish deflation.  This purges zlib's internal data buffers */\n+  while(deflate(&zs, Z_FINISH) == Z_OK){\n+    wramt = RDSZ - zs.avail_out;\n+\n+    if(write(out_fd, out_buff, wramt) != wramt){\n+      perror(\"write\");\n+      exit(1);\n+    }\n+\n+    zs.next_out = out_buff;\n+    zs.avail_out = (uInt)RDSZ;\n+  }\n+\n+  /* If there's any data left in the buffer, write it out */\n+  if(zs.avail_out != RDSZ){\n+    wramt = RDSZ - zs.avail_out;\n+\n+    if(write(out_fd, out_buff, wramt) != wramt){\n+      perror(\"write\");\n+      exit(1);\n+    }\n+  }\n+\n+  /* update fastjar's entry information */\n+  ze->usize = (ub4)zs.total_in;\n+  ze->csize = (ub4)zs.total_out;\n+\n+  /* Reset the deflation for the next time around */\n+  if(deflateReset(&zs) != Z_OK){\n+    fprintf(stderr, \"Error resetting deflation\\n\");\n+    exit(1);\n+  }\n+  \n+  return 0;\n+}\n+\n+void end_compression(){\n+  int rtval;\n+\n+  /* Oddly enough, zlib always returns Z_DATA_ERROR if you specify no\n+     zlib header.  Go fig. */\n+  if((rtval = deflateEnd(&zs)) != Z_OK && rtval != Z_DATA_ERROR){\n+    fprintf(stderr, \"Error calling deflateEnd\\n\");\n+    fprintf(stderr, \"error: (%d) %s\\n\", rtval, zs.msg);\n+    exit(1);\n+  }\n+}\n+\n+\n+void init_inflation(){\n+\n+  memset(&zs, 0, sizeof(z_stream));\n+    \n+  zs.zalloc = Z_NULL;\n+  zs.zfree = Z_NULL;\n+  zs.opaque = Z_NULL;\n+  \n+  if(inflateInit2(&zs, -15) != Z_OK){\n+    fprintf(stderr, \"Error initializing deflation!\\n\");\n+    exit(1);\n+  }\n+\n+}\n+\n+int inflate_file(pb_file *pbf, int out_fd, struct zipentry *ze){\n+  Bytef in_buff[RDSZ];\n+  Bytef out_buff[RDSZ];\n+  unsigned int rdamt;\n+  int rtval;\n+  ub4 crc = 0;\n+\n+  zs.avail_in = 0;\n+\n+  crc = crc32(crc, NULL, 0); /* initialize crc */\n+\n+  /* loop until we've consumed all the compressed data */\n+  for(;;){\n+    \n+    if(zs.avail_in == 0){\n+      if((rdamt = pb_read(pbf, in_buff, RDSZ)) == 0)\n+        break;\n+      else if(rdamt < 0){\n+        perror(\"read\");\n+        exit(1);\n+      }\n+\n+#ifdef DEBUG\n+      printf(\"%d bytes read\\n\", rdamt);\n+#endif\n+\n+      zs.next_in = in_buff;\n+      zs.avail_in = rdamt;\n+    }\n+\n+    zs.next_out = out_buff;\n+    zs.avail_out = RDSZ;\n+    \n+    if((rtval = inflate(&zs, 0)) != Z_OK){\n+      if(rtval == Z_STREAM_END){\n+#ifdef DEBUG\n+        printf(\"end of stream\\n\");\n+#endif\n+        if(zs.avail_out != RDSZ){\n+          crc = crc32(crc, out_buff, (RDSZ - zs.avail_out));\n+\n+          if(out_fd >= 0)\n+            if(write(out_fd, out_buff, (RDSZ - zs.avail_out)) != \n+               (RDSZ - zs.avail_out)){\n+              perror(\"write\");\n+              exit(1);\n+            }\n+        }\n+        \n+        break;\n+      } else {\n+        fprintf(stderr, \"Error inflating file! (%d)\\n\", rtval);\n+        exit(1);\n+      }\n+    } else {\n+      if(zs.avail_out != RDSZ){\n+        crc = crc32(crc, out_buff, (RDSZ - zs.avail_out));\n+\n+        if(out_fd >= 0)\n+          if(write(out_fd, out_buff, (RDSZ - zs.avail_out)) != \n+             (RDSZ - zs.avail_out)){\n+            perror(\"write\");\n+            exit(1);\n+          }\n+        zs.next_out = out_buff;\n+        zs.avail_out = RDSZ;\n+      }\n+    }\n+  }\n+#ifdef DEBUG\n+  printf(\"done inflating\\n\");\n+#endif\n+\n+#ifdef DEBUG\n+  printf(\"%d bytes left over\\n\", zs.avail_in);\n+#endif\n+\n+#ifdef DEBUG    \n+  printf(\"CRC is %x\\n\", crc);\n+#endif\n+\n+  ze->crc = crc;\n+  \n+  pb_push(pbf, zs.next_in, zs.avail_in);\n+\n+  ze->usize = zs.total_out;\n+\n+  inflateReset(&zs);\n+  return 0;\n+}\n+\n+/*\n+Function name: report_str_error\n+args:\tval\tError code returned from zlib.\n+purpose: Put out an error message corresponding to error code returned from zlib.\n+Be suitably cryptic seeing I don't really know exactly what these errors mean.\n+*/\n+\n+void report_str_error(int val) {\n+\tswitch(val) {\n+\tcase Z_STREAM_END:\n+\t\tbreak;\n+\tcase Z_NEED_DICT:\n+\t\tfprintf(stderr, \"Need a dictionary?\\n\");\n+\t\texit(1);\n+\tcase Z_DATA_ERROR:\n+\t\tfprintf(stderr, \"Z_DATA_ERROR\\n\");\n+\t\texit(1);\n+\tcase Z_STREAM_ERROR:\n+\t\tfprintf(stderr, \"Z_STREAM_ERROR\\n\");\n+\t\texit(1);\n+\tcase Z_MEM_ERROR:\n+\t\tfprintf(stderr, \"Z_MEM_ERROR\\n\");\n+\t\texit(1);\n+\tcase Z_BUF_ERROR:\n+\t\tfprintf(stderr, \"Z_BUF_ERROR\\n\");\n+\t\texit(1);\n+\tcase Z_OK:\n+\t\tbreak;\n+\tdefault:\n+\t\tfprintf(stderr, \"Unknown behavior from inflate\\n\");\n+\t\texit(1);\n+\t}\n+}\n+\n+/*\n+Function name: ez_inflate_str\n+args:\tpbf\t\tPointer to pushback handle for file.\n+\t\tcsize\tCompressed size of embedded file.\n+\t\tusize\tUncompressed size of embedded file.\n+purpose: Read in and decompress the contents of an embedded file and store it in a\n+byte array.\n+returns: Byte array of uncompressed embedded file.\n+*/\n+\n+static Bytef *ez_inflate_str(pb_file *pbf, ub4 csize, ub4 usize) {\n+\tBytef *out_buff;\n+\tBytef *in_buff;\n+\tunsigned int rdamt;\n+\tub4 crc = 0;\n+\n+\tif(zs.next_in = in_buff = (Bytef *) malloc(csize)) {\n+\t\tif(zs.next_out = out_buff = (Bytef *) malloc(usize + 1)) { \n+\t\t\tif((rdamt = pb_read(pbf, zs.next_in, csize)) == csize) {\n+\t\t\t\tzs.avail_in = csize;\n+\t\t\t\tzs.avail_out = usize;\n+\t\t\t\treport_str_error(inflate(&zs, 0));\n+\t\t\t\tfree(in_buff);\n+\t\t\t\tinflateReset(&zs);\n+\t\t\t\tout_buff[usize] = '\\0';\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\tfprintf(stderr, \"Read failed on input file.\\n\");\n+\t\t\t\tfprintf(stderr, \"Tried to read %u but read %u instead.\\n\", csize, rdamt);\n+\t\t\t\tfree(in_buff);\n+\t\t\t\tfree(out_buff);\n+\t\t\t\texit(1);\n+\t\t\t}\n+\t\t}\n+\t\telse {\n+\t\t\tfprintf(stderr, \"Malloc of out_buff failed.\\n\");\n+\t\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\t\tfree(in_buff);\n+\t\t\texit(1);\n+\t\t}\n+\t}\n+\telse {\n+\t\tfprintf(stderr, \"Malloc of in_buff failed.\\n\");\n+\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\texit(1);\n+\t}\n+\n+\treturn out_buff;\n+}\n+\n+/*\n+Function name: hrd_inflate_str\n+args:\tpbf\t\tPointer to pushback handle for file.\n+\t\tcsize\tPointer to compressed size of embedded file.\n+\t\tusize\tPointer to uncompressed size of embedded file.\n+purpose: Read and decompress an embedded file into a string.  Set csize and usize\n+accordingly.  This function does the reading for us in the case there is not size\n+information in the header for the embedded file.\n+returns: Byte array of the contents of the embedded file.\n+*/\n+\n+static Bytef *hrd_inflate_str(pb_file *pbf, ub4 *csize, ub4 *usize) {\n+\tBytef *out_buff;\n+\tBytef *tmp;\n+\tBytef in_buff[RDSZ];\n+\tunsigned int rdamt;\n+\tint i;\n+\tint zret;\n+\tub4 crc = 0;\n+\n+\ti = 1; \n+\tout_buff = NULL;\n+\tzret = Z_OK;\n+\twhile(zret != Z_STREAM_END && (rdamt = pb_read(pbf, in_buff, RDSZ)))\n+\t{\n+\t\tzs.avail_in = rdamt;\n+\t\tzs.avail_out = 0;\n+\t\tzs.next_in = in_buff;\n+\t\tdo {\n+\t\t\tif(tmp = (Bytef *) realloc(out_buff, (RDSZ * i) + 1)) {\n+\t\t\t\tout_buff = tmp;\n+\t\t\t\tzs.next_out = &(out_buff[(RDSZ * (i - 1)) - zs.avail_out]);\n+\t\t\t\tzs.avail_out += RDSZ;\n+\t\t\t\ti++;\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\tfprintf(stderr, \"Realloc of out_buff failed.\\n\");\n+\t\t\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\t\t\texit(1);\n+\t\t\t}\n+\t\t} while((zret = inflate(&zs, 0)) == Z_OK);\n+\t\treport_str_error(zret);\n+\t}\n+\tpb_push(pbf, zs.next_in, zs.avail_in);\n+\n+\tout_buff[(RDSZ * (i - 1)) - zs.avail_out] = '\\0';\n+\t*usize = zs.total_out;\n+\t*csize = zs.total_in;\n+\n+\tinflateReset(&zs);\n+\n+\treturn out_buff;\n+}\n+\n+/*\n+Function name: inflate_string\n+args:\tpbf\t\tPointer to pushback handle for file.\n+\t\tcsize\tPointer to compressed size of embedded file.  May be 0 if not set.\n+\t\tusize\tPointer to uncompressed size of embedded file. May be 0 if not set.\n+purpose: Decide the easiest (in computer terms) methos of decompressing this embedded\n+file to a string.\n+returns: Pointer to a string containing the decompressed contents of the embedded file.\n+If csize and usize are not set set them to correct numbers.\n+*/\n+\n+Bytef *inflate_string(pb_file *pbf, ub4 *csize, ub4 *usize) {\n+Bytef *ret_buf;\n+\n+\tif(*csize && *usize) ret_buf = ez_inflate_str(pbf, *csize, *usize);\n+\telse ret_buf = hrd_inflate_str(pbf, csize, usize);\n+\n+\treturn ret_buf;\n+}"}, {"sha": "f9fadba847fcc097e24054cc6d31e383127253cc", "filename": "fastjar/compress.h", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fcompress.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fcompress.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fcompress.h?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,51 @@\n+/* $Id: compress.h,v 1.1.1.1 1999/12/06 03:09:12 toast Exp $\n+\n+   $Log: compress.h,v $\n+   Revision 1.1.1.1  1999/12/06 03:09:12  toast\n+   initial checkin..\n+\n+\n+\n+   Revision 1.3  1999/05/10 08:32:09  burnsbr\n+   added new function protos.\n+\n+   Revision 1.2  1999/04/23 12:02:20  burnsbr\n+   added licence\n+\n+   Revision 1.1  1999/04/23 11:59:37  burnsbr\n+   Initial revision\n+\n+\n+*/\n+\n+/*\n+  compress.h - header for compression\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+ */\n+\n+/* Initializes the compression data structure(s) */\n+void init_compression();\n+\n+/* Compresses the file specified by in_fd and appends it to out_fd */\n+int compress_file(int in_fd, int out_fd, struct zipentry *ze);\n+\n+/* Frees memory used by compression function */\n+void end_compression();\n+\n+void init_inflation();\n+int inflate_file(pb_file *, int, struct zipentry *);\n+void end_inflation();"}, {"sha": "1dce3af5a9f884b8df2bdbc3b7c47324653042b9", "filename": "fastjar/config.h.in", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fconfig.h.in?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,57 @@\n+/* config.h.in.  Generated automatically from configure.in by autoheader.  */\n+\n+/* Define to `long' if <sys/types.h> doesn't define.  */\n+#undef off_t\n+\n+/* Define if you have the ANSI C header files.  */\n+#undef STDC_HEADERS\n+\n+/* Define if your <sys/time.h> declares struct tm.  */\n+#undef TM_IN_SYS_TIME\n+\n+/* Define if your processor stores words with the most significant\n+   byte first (like Motorola and SPARC, unlike Intel and VAX).  */\n+#undef WORDS_BIGENDIAN\n+\n+/* The number of bytes in a char.  */\n+#undef SIZEOF_CHAR\n+\n+/* The number of bytes in a int.  */\n+#undef SIZEOF_INT\n+\n+/* The number of bytes in a long.  */\n+#undef SIZEOF_LONG\n+\n+/* The number of bytes in a long long.  */\n+#undef SIZEOF_LONG_LONG\n+\n+/* The number of bytes in a short.  */\n+#undef SIZEOF_SHORT\n+\n+/* Define if you have the <dirent.h> header file.  */\n+#undef HAVE_DIRENT_H\n+\n+/* Define if you have the <fcntl.h> header file.  */\n+#undef HAVE_FCNTL_H\n+\n+/* Define if you have the <ndir.h> header file.  */\n+#undef HAVE_NDIR_H\n+\n+/* Define if you have the <sys/dir.h> header file.  */\n+#undef HAVE_SYS_DIR_H\n+\n+/* Define if you have the <sys/ndir.h> header file.  */\n+#undef HAVE_SYS_NDIR_H\n+\n+/* Define if you have the <sys/param.h> header file.  */\n+#undef HAVE_SYS_PARAM_H\n+\n+/* Define if you have the <unistd.h> header file.  */\n+#undef HAVE_UNISTD_H\n+\n+/* Name of package */\n+#undef PACKAGE\n+\n+/* Version number of package */\n+#undef VERSION\n+"}, {"sha": "0e5d54a00927e4cc1f3f025a1ddfaef25391bf73", "filename": "fastjar/configure", "status": "added", "additions": 2330, "deletions": 0, "changes": 2330, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fconfigure?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,2330 @@\n+#! /bin/sh\n+\n+# Guess values for system-dependent variables and create Makefiles.\n+# Generated automatically using autoconf version 2.13 \n+# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.\n+#\n+# This configure script is free software; the Free Software Foundation\n+# gives unlimited permission to copy, distribute and modify it.\n+\n+# Defaults:\n+ac_help=\n+ac_default_prefix=/usr/local\n+# Any additions from configure.in:\n+\n+# Initialize some variables set by options.\n+# The variables have the same names as the options, with\n+# dashes changed to underlines.\n+build=NONE\n+cache_file=./config.cache\n+exec_prefix=NONE\n+host=NONE\n+no_create=\n+nonopt=NONE\n+no_recursion=\n+prefix=NONE\n+program_prefix=NONE\n+program_suffix=NONE\n+program_transform_name=s,x,x,\n+silent=\n+site=\n+srcdir=\n+target=NONE\n+verbose=\n+x_includes=NONE\n+x_libraries=NONE\n+bindir='${exec_prefix}/bin'\n+sbindir='${exec_prefix}/sbin'\n+libexecdir='${exec_prefix}/libexec'\n+datadir='${prefix}/share'\n+sysconfdir='${prefix}/etc'\n+sharedstatedir='${prefix}/com'\n+localstatedir='${prefix}/var'\n+libdir='${exec_prefix}/lib'\n+includedir='${prefix}/include'\n+oldincludedir='/usr/include'\n+infodir='${prefix}/info'\n+mandir='${prefix}/man'\n+\n+# Initialize some other variables.\n+subdirs=\n+MFLAGS= MAKEFLAGS=\n+SHELL=${CONFIG_SHELL-/bin/sh}\n+# Maximum number of lines to put in a shell here document.\n+ac_max_here_lines=12\n+\n+ac_prev=\n+for ac_option\n+do\n+\n+  # If the previous option needs an argument, assign it.\n+  if test -n \"$ac_prev\"; then\n+    eval \"$ac_prev=\\$ac_option\"\n+    ac_prev=\n+    continue\n+  fi\n+\n+  case \"$ac_option\" in\n+  -*=*) ac_optarg=`echo \"$ac_option\" | sed 's/[-_a-zA-Z0-9]*=//'` ;;\n+  *) ac_optarg= ;;\n+  esac\n+\n+  # Accept the important Cygnus configure options, so we can diagnose typos.\n+\n+  case \"$ac_option\" in\n+\n+  -bindir | --bindir | --bindi | --bind | --bin | --bi)\n+    ac_prev=bindir ;;\n+  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)\n+    bindir=\"$ac_optarg\" ;;\n+\n+  -build | --build | --buil | --bui | --bu)\n+    ac_prev=build ;;\n+  -build=* | --build=* | --buil=* | --bui=* | --bu=*)\n+    build=\"$ac_optarg\" ;;\n+\n+  -cache-file | --cache-file | --cache-fil | --cache-fi \\\n+  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)\n+    ac_prev=cache_file ;;\n+  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \\\n+  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)\n+    cache_file=\"$ac_optarg\" ;;\n+\n+  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)\n+    ac_prev=datadir ;;\n+  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \\\n+  | --da=*)\n+    datadir=\"$ac_optarg\" ;;\n+\n+  -disable-* | --disable-*)\n+    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`\n+    # Reject names that are not valid shell variable names.\n+    if test -n \"`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`\"; then\n+      { echo \"configure: error: $ac_feature: invalid feature name\" 1>&2; exit 1; }\n+    fi\n+    ac_feature=`echo $ac_feature| sed 's/-/_/g'`\n+    eval \"enable_${ac_feature}=no\" ;;\n+\n+  -enable-* | --enable-*)\n+    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`\n+    # Reject names that are not valid shell variable names.\n+    if test -n \"`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`\"; then\n+      { echo \"configure: error: $ac_feature: invalid feature name\" 1>&2; exit 1; }\n+    fi\n+    ac_feature=`echo $ac_feature| sed 's/-/_/g'`\n+    case \"$ac_option\" in\n+      *=*) ;;\n+      *) ac_optarg=yes ;;\n+    esac\n+    eval \"enable_${ac_feature}='$ac_optarg'\" ;;\n+\n+  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \\\n+  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \\\n+  | --exec | --exe | --ex)\n+    ac_prev=exec_prefix ;;\n+  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \\\n+  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \\\n+  | --exec=* | --exe=* | --ex=*)\n+    exec_prefix=\"$ac_optarg\" ;;\n+\n+  -gas | --gas | --ga | --g)\n+    # Obsolete; use --with-gas.\n+    with_gas=yes ;;\n+\n+  -help | --help | --hel | --he)\n+    # Omit some internal or obsolete options to make the list less imposing.\n+    # This message is too long to be a string in the A/UX 3.1 sh.\n+    cat << EOF\n+Usage: configure [options] [host]\n+Options: [defaults in brackets after descriptions]\n+Configuration:\n+  --cache-file=FILE       cache test results in FILE\n+  --help                  print this message\n+  --no-create             do not create output files\n+  --quiet, --silent       do not print \\`checking...' messages\n+  --version               print the version of autoconf that created configure\n+Directory and file names:\n+  --prefix=PREFIX         install architecture-independent files in PREFIX\n+                          [$ac_default_prefix]\n+  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX\n+                          [same as prefix]\n+  --bindir=DIR            user executables in DIR [EPREFIX/bin]\n+  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]\n+  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]\n+  --datadir=DIR           read-only architecture-independent data in DIR\n+                          [PREFIX/share]\n+  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]\n+  --sharedstatedir=DIR    modifiable architecture-independent data in DIR\n+                          [PREFIX/com]\n+  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]\n+  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]\n+  --includedir=DIR        C header files in DIR [PREFIX/include]\n+  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]\n+  --infodir=DIR           info documentation in DIR [PREFIX/info]\n+  --mandir=DIR            man documentation in DIR [PREFIX/man]\n+  --srcdir=DIR            find the sources in DIR [configure dir or ..]\n+  --program-prefix=PREFIX prepend PREFIX to installed program names\n+  --program-suffix=SUFFIX append SUFFIX to installed program names\n+  --program-transform-name=PROGRAM\n+                          run sed PROGRAM on installed program names\n+EOF\n+    cat << EOF\n+Host type:\n+  --build=BUILD           configure for building on BUILD [BUILD=HOST]\n+  --host=HOST             configure for HOST [guessed]\n+  --target=TARGET         configure for TARGET [TARGET=HOST]\n+Features and packages:\n+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n+  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]\n+  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)\n+  --x-includes=DIR        X include files are in DIR\n+  --x-libraries=DIR       X library files are in DIR\n+EOF\n+    if test -n \"$ac_help\"; then\n+      echo \"--enable and --with options recognized:$ac_help\"\n+    fi\n+    exit 0 ;;\n+\n+  -host | --host | --hos | --ho)\n+    ac_prev=host ;;\n+  -host=* | --host=* | --hos=* | --ho=*)\n+    host=\"$ac_optarg\" ;;\n+\n+  -includedir | --includedir | --includedi | --included | --include \\\n+  | --includ | --inclu | --incl | --inc)\n+    ac_prev=includedir ;;\n+  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \\\n+  | --includ=* | --inclu=* | --incl=* | --inc=*)\n+    includedir=\"$ac_optarg\" ;;\n+\n+  -infodir | --infodir | --infodi | --infod | --info | --inf)\n+    ac_prev=infodir ;;\n+  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)\n+    infodir=\"$ac_optarg\" ;;\n+\n+  -libdir | --libdir | --libdi | --libd)\n+    ac_prev=libdir ;;\n+  -libdir=* | --libdir=* | --libdi=* | --libd=*)\n+    libdir=\"$ac_optarg\" ;;\n+\n+  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \\\n+  | --libexe | --libex | --libe)\n+    ac_prev=libexecdir ;;\n+  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \\\n+  | --libexe=* | --libex=* | --libe=*)\n+    libexecdir=\"$ac_optarg\" ;;\n+\n+  -localstatedir | --localstatedir | --localstatedi | --localstated \\\n+  | --localstate | --localstat | --localsta | --localst \\\n+  | --locals | --local | --loca | --loc | --lo)\n+    ac_prev=localstatedir ;;\n+  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \\\n+  | --localstate=* | --localstat=* | --localsta=* | --localst=* \\\n+  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)\n+    localstatedir=\"$ac_optarg\" ;;\n+\n+  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)\n+    ac_prev=mandir ;;\n+  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)\n+    mandir=\"$ac_optarg\" ;;\n+\n+  -nfp | --nfp | --nf)\n+    # Obsolete; use --without-fp.\n+    with_fp=no ;;\n+\n+  -no-create | --no-create | --no-creat | --no-crea | --no-cre \\\n+  | --no-cr | --no-c)\n+    no_create=yes ;;\n+\n+  -no-recursion | --no-recursion | --no-recursio | --no-recursi \\\n+  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)\n+    no_recursion=yes ;;\n+\n+  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \\\n+  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \\\n+  | --oldin | --oldi | --old | --ol | --o)\n+    ac_prev=oldincludedir ;;\n+  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \\\n+  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \\\n+  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)\n+    oldincludedir=\"$ac_optarg\" ;;\n+\n+  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)\n+    ac_prev=prefix ;;\n+  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)\n+    prefix=\"$ac_optarg\" ;;\n+\n+  -program-prefix | --program-prefix | --program-prefi | --program-pref \\\n+  | --program-pre | --program-pr | --program-p)\n+    ac_prev=program_prefix ;;\n+  -program-prefix=* | --program-prefix=* | --program-prefi=* \\\n+  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)\n+    program_prefix=\"$ac_optarg\" ;;\n+\n+  -program-suffix | --program-suffix | --program-suffi | --program-suff \\\n+  | --program-suf | --program-su | --program-s)\n+    ac_prev=program_suffix ;;\n+  -program-suffix=* | --program-suffix=* | --program-suffi=* \\\n+  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)\n+    program_suffix=\"$ac_optarg\" ;;\n+\n+  -program-transform-name | --program-transform-name \\\n+  | --program-transform-nam | --program-transform-na \\\n+  | --program-transform-n | --program-transform- \\\n+  | --program-transform | --program-transfor \\\n+  | --program-transfo | --program-transf \\\n+  | --program-trans | --program-tran \\\n+  | --progr-tra | --program-tr | --program-t)\n+    ac_prev=program_transform_name ;;\n+  -program-transform-name=* | --program-transform-name=* \\\n+  | --program-transform-nam=* | --program-transform-na=* \\\n+  | --program-transform-n=* | --program-transform-=* \\\n+  | --program-transform=* | --program-transfor=* \\\n+  | --program-transfo=* | --program-transf=* \\\n+  | --program-trans=* | --program-tran=* \\\n+  | --progr-tra=* | --program-tr=* | --program-t=*)\n+    program_transform_name=\"$ac_optarg\" ;;\n+\n+  -q | -quiet | --quiet | --quie | --qui | --qu | --q \\\n+  | -silent | --silent | --silen | --sile | --sil)\n+    silent=yes ;;\n+\n+  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)\n+    ac_prev=sbindir ;;\n+  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \\\n+  | --sbi=* | --sb=*)\n+    sbindir=\"$ac_optarg\" ;;\n+\n+  -sharedstatedir | --sharedstatedir | --sharedstatedi \\\n+  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \\\n+  | --sharedst | --shareds | --shared | --share | --shar \\\n+  | --sha | --sh)\n+    ac_prev=sharedstatedir ;;\n+  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \\\n+  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \\\n+  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \\\n+  | --sha=* | --sh=*)\n+    sharedstatedir=\"$ac_optarg\" ;;\n+\n+  -site | --site | --sit)\n+    ac_prev=site ;;\n+  -site=* | --site=* | --sit=*)\n+    site=\"$ac_optarg\" ;;\n+\n+  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n+    ac_prev=srcdir ;;\n+  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n+    srcdir=\"$ac_optarg\" ;;\n+\n+  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \\\n+  | --syscon | --sysco | --sysc | --sys | --sy)\n+    ac_prev=sysconfdir ;;\n+  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \\\n+  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)\n+    sysconfdir=\"$ac_optarg\" ;;\n+\n+  -target | --target | --targe | --targ | --tar | --ta | --t)\n+    ac_prev=target ;;\n+  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)\n+    target=\"$ac_optarg\" ;;\n+\n+  -v | -verbose | --verbose | --verbos | --verbo | --verb)\n+    verbose=yes ;;\n+\n+  -version | --version | --versio | --versi | --vers)\n+    echo \"configure generated by autoconf version 2.13\"\n+    exit 0 ;;\n+\n+  -with-* | --with-*)\n+    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`\n+    # Reject names that are not valid shell variable names.\n+    if test -n \"`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`\"; then\n+      { echo \"configure: error: $ac_package: invalid package name\" 1>&2; exit 1; }\n+    fi\n+    ac_package=`echo $ac_package| sed 's/-/_/g'`\n+    case \"$ac_option\" in\n+      *=*) ;;\n+      *) ac_optarg=yes ;;\n+    esac\n+    eval \"with_${ac_package}='$ac_optarg'\" ;;\n+\n+  -without-* | --without-*)\n+    ac_package=`echo $ac_option|sed -e 's/-*without-//'`\n+    # Reject names that are not valid shell variable names.\n+    if test -n \"`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`\"; then\n+      { echo \"configure: error: $ac_package: invalid package name\" 1>&2; exit 1; }\n+    fi\n+    ac_package=`echo $ac_package| sed 's/-/_/g'`\n+    eval \"with_${ac_package}=no\" ;;\n+\n+  --x)\n+    # Obsolete; use --with-x.\n+    with_x=yes ;;\n+\n+  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \\\n+  | --x-incl | --x-inc | --x-in | --x-i)\n+    ac_prev=x_includes ;;\n+  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \\\n+  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)\n+    x_includes=\"$ac_optarg\" ;;\n+\n+  -x-libraries | --x-libraries | --x-librarie | --x-librari \\\n+  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)\n+    ac_prev=x_libraries ;;\n+  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \\\n+  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)\n+    x_libraries=\"$ac_optarg\" ;;\n+\n+  -*) { echo \"configure: error: $ac_option: invalid option; use --help to show usage\" 1>&2; exit 1; }\n+    ;;\n+\n+  *)\n+    if test -n \"`echo $ac_option| sed 's/[-a-z0-9.]//g'`\"; then\n+      echo \"configure: warning: $ac_option: invalid host type\" 1>&2\n+    fi\n+    if test \"x$nonopt\" != xNONE; then\n+      { echo \"configure: error: can only configure for one host and one target at a time\" 1>&2; exit 1; }\n+    fi\n+    nonopt=\"$ac_option\"\n+    ;;\n+\n+  esac\n+done\n+\n+if test -n \"$ac_prev\"; then\n+  { echo \"configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`\" 1>&2; exit 1; }\n+fi\n+\n+trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15\n+\n+# File descriptor usage:\n+# 0 standard input\n+# 1 file creation\n+# 2 errors and warnings\n+# 3 some systems may open it to /dev/tty\n+# 4 used on the Kubota Titan\n+# 6 checking for... messages and results\n+# 5 compiler messages saved in config.log\n+if test \"$silent\" = yes; then\n+  exec 6>/dev/null\n+else\n+  exec 6>&1\n+fi\n+exec 5>./config.log\n+\n+echo \"\\\n+This file contains any messages produced by compilers while\n+running configure, to aid debugging if configure makes a mistake.\n+\" 1>&5\n+\n+# Strip out --no-create and --no-recursion so they do not pile up.\n+# Also quote any args containing shell metacharacters.\n+ac_configure_args=\n+for ac_arg\n+do\n+  case \"$ac_arg\" in\n+  -no-create | --no-create | --no-creat | --no-crea | --no-cre \\\n+  | --no-cr | --no-c) ;;\n+  -no-recursion | --no-recursion | --no-recursio | --no-recursi \\\n+  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;\n+  *\" \"*|*\"\t\"*|*[\\[\\]\\~\\#\\$\\^\\&\\*\\(\\)\\{\\}\\\\\\|\\;\\<\\>\\?]*)\n+  ac_configure_args=\"$ac_configure_args '$ac_arg'\" ;;\n+  *) ac_configure_args=\"$ac_configure_args $ac_arg\" ;;\n+  esac\n+done\n+\n+# NLS nuisances.\n+# Only set these to C if already set.  These must not be set unconditionally\n+# because not all systems understand e.g. LANG=C (notably SCO).\n+# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!\n+# Non-C LC_CTYPE values break the ctype check.\n+if test \"${LANG+set}\"   = set; then LANG=C;   export LANG;   fi\n+if test \"${LC_ALL+set}\" = set; then LC_ALL=C; export LC_ALL; fi\n+if test \"${LC_MESSAGES+set}\" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi\n+if test \"${LC_CTYPE+set}\"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi\n+\n+# confdefs.h avoids OS command line length limits that DEFS can exceed.\n+rm -rf conftest* confdefs.h\n+# AIX cpp loses on an empty file, so make sure it contains at least a newline.\n+echo > confdefs.h\n+\n+# A filename unique to this package, relative to the directory that\n+# configure is in, which we can look for to find out if srcdir is correct.\n+ac_unique_file=jartool.h\n+\n+# Find the source files, if location was not specified.\n+if test -z \"$srcdir\"; then\n+  ac_srcdir_defaulted=yes\n+  # Try the directory containing this script, then its parent.\n+  ac_prog=$0\n+  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`\n+  test \"x$ac_confdir\" = \"x$ac_prog\" && ac_confdir=.\n+  srcdir=$ac_confdir\n+  if test ! -r $srcdir/$ac_unique_file; then\n+    srcdir=..\n+  fi\n+else\n+  ac_srcdir_defaulted=no\n+fi\n+if test ! -r $srcdir/$ac_unique_file; then\n+  if test \"$ac_srcdir_defaulted\" = yes; then\n+    { echo \"configure: error: can not find sources in $ac_confdir or ..\" 1>&2; exit 1; }\n+  else\n+    { echo \"configure: error: can not find sources in $srcdir\" 1>&2; exit 1; }\n+  fi\n+fi\n+srcdir=`echo \"${srcdir}\" | sed 's%\\([^/]\\)/*$%\\1%'`\n+\n+# Prefer explicitly selected file to automatically selected ones.\n+if test -z \"$CONFIG_SITE\"; then\n+  if test \"x$prefix\" != xNONE; then\n+    CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n+  else\n+    CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n+  fi\n+fi\n+for ac_site_file in $CONFIG_SITE; do\n+  if test -r \"$ac_site_file\"; then\n+    echo \"loading site script $ac_site_file\"\n+    . \"$ac_site_file\"\n+  fi\n+done\n+\n+if test -r \"$cache_file\"; then\n+  echo \"loading cache $cache_file\"\n+  . $cache_file\n+else\n+  echo \"creating cache $cache_file\"\n+  > $cache_file\n+fi\n+\n+ac_ext=c\n+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+cross_compiling=$ac_cv_prog_cc_cross\n+\n+ac_exeext=\n+ac_objext=o\n+if (echo \"testing\\c\"; echo 1,2,3) | grep c >/dev/null; then\n+  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.\n+  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then\n+    ac_n= ac_c='\n+' ac_t='\t'\n+  else\n+    ac_n=-n ac_c= ac_t=\n+  fi\n+else\n+  ac_n= ac_c='\\c' ac_t=\n+fi\n+\n+\n+ac_aux_dir=\n+for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do\n+  if test -f $ac_dir/install-sh; then\n+    ac_aux_dir=$ac_dir\n+    ac_install_sh=\"$ac_aux_dir/install-sh -c\"\n+    break\n+  elif test -f $ac_dir/install.sh; then\n+    ac_aux_dir=$ac_dir\n+    ac_install_sh=\"$ac_aux_dir/install.sh -c\"\n+    break\n+  fi\n+done\n+if test -z \"$ac_aux_dir\"; then\n+  { echo \"configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../..\" 1>&2; exit 1; }\n+fi\n+ac_config_guess=$ac_aux_dir/config.guess\n+ac_config_sub=$ac_aux_dir/config.sub\n+ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.\n+\n+# Find a good install program.  We prefer a C program (faster),\n+# so one script is as good as another.  But avoid the broken or\n+# incompatible versions:\n+# SysV /etc/install, /usr/sbin/install\n+# SunOS /usr/etc/install\n+# IRIX /sbin/install\n+# AIX /bin/install\n+# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag\n+# AFS /usr/afsws/bin/install, which mishandles nonexistent args\n+# SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n+# ./install, which can be erroneously created by make from ./install.sh.\n+echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n+echo \"configure:556: checking for a BSD compatible install\" >&5\n+if test -z \"$INSTALL\"; then\n+if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+    IFS=\"${IFS= \t}\"; ac_save_IFS=\"$IFS\"; IFS=\":\"\n+  for ac_dir in $PATH; do\n+    # Account for people who put trailing slashes in PATH elements.\n+    case \"$ac_dir/\" in\n+    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;\n+    *)\n+      # OSF1 and SCO ODT 3.0 have their own names for install.\n+      # Don't use installbsd from OSF since it installs stuff as root\n+      # by default.\n+      for ac_prog in ginstall scoinst install; do\n+        if test -f $ac_dir/$ac_prog; then\n+\t  if test $ac_prog = install &&\n+            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then\n+\t    # AIX install.  It has an incompatible calling convention.\n+\t    :\n+\t  else\n+\t    ac_cv_path_install=\"$ac_dir/$ac_prog -c\"\n+\t    break 2\n+\t  fi\n+\tfi\n+      done\n+      ;;\n+    esac\n+  done\n+  IFS=\"$ac_save_IFS\"\n+\n+fi\n+  if test \"${ac_cv_path_install+set}\" = set; then\n+    INSTALL=\"$ac_cv_path_install\"\n+  else\n+    # As a last resort, use the slow shell script.  We don't cache a\n+    # path for INSTALL within a source directory, because that will\n+    # break other packages using the cache if that directory is\n+    # removed, or if the path is relative.\n+    INSTALL=\"$ac_install_sh\"\n+  fi\n+fi\n+echo \"$ac_t\"\"$INSTALL\" 1>&6\n+\n+# Use test -z because SunOS4 sh mishandles braces in ${var-val}.\n+# It thinks the first close brace ends the variable substitution.\n+test -z \"$INSTALL_PROGRAM\" && INSTALL_PROGRAM='${INSTALL}'\n+\n+test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n+\n+test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n+\n+echo $ac_n \"checking whether build environment is sane\"\"... $ac_c\" 1>&6\n+echo \"configure:609: checking whether build environment is sane\" >&5\n+# Just in case\n+sleep 1\n+echo timestamp > conftestfile\n+# Do `set' in a subshell so we don't clobber the current shell's\n+# arguments.  Must try -L first in case configure is actually a\n+# symlink; some systems play weird games with the mod time of symlinks\n+# (eg FreeBSD returns the mod time of the symlink's containing\n+# directory).\n+if (\n+   set X `ls -Lt $srcdir/configure conftestfile 2> /dev/null`\n+   if test \"$*\" = \"X\"; then\n+      # -L didn't work.\n+      set X `ls -t $srcdir/configure conftestfile`\n+   fi\n+   if test \"$*\" != \"X $srcdir/configure conftestfile\" \\\n+      && test \"$*\" != \"X conftestfile $srcdir/configure\"; then\n+\n+      # If neither matched, then we have a broken ls.  This can happen\n+      # if, for instance, CONFIG_SHELL is bash and it inherits a\n+      # broken ls alias from the environment.  This has actually\n+      # happened.  Such a system could not be considered \"sane\".\n+      { echo \"configure: error: ls -t appears to fail.  Make sure there is not a broken\n+alias in your environment\" 1>&2; exit 1; }\n+   fi\n+\n+   test \"$2\" = conftestfile\n+   )\n+then\n+   # Ok.\n+   :\n+else\n+   { echo \"configure: error: newly created file is older than distributed files!\n+Check your system clock\" 1>&2; exit 1; }\n+fi\n+rm -f conftest*\n+echo \"$ac_t\"\"yes\" 1>&6\n+if test \"$program_transform_name\" = s,x,x,; then\n+  program_transform_name=\n+else\n+  # Double any \\ or $.  echo might interpret backslashes.\n+  cat <<\\EOF_SED > conftestsed\n+s,\\\\,\\\\\\\\,g; s,\\$,$$,g\n+EOF_SED\n+  program_transform_name=\"`echo $program_transform_name|sed -f conftestsed`\"\n+  rm -f conftestsed\n+fi\n+test \"$program_prefix\" != NONE &&\n+  program_transform_name=\"s,^,${program_prefix},; $program_transform_name\"\n+# Use a double $ so make ignores it.\n+test \"$program_suffix\" != NONE &&\n+  program_transform_name=\"s,\\$\\$,${program_suffix},; $program_transform_name\"\n+\n+# sed with no file args requires a program.\n+test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n+\n+echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n+echo \"configure:666: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftestmake <<\\EOF\n+all:\n+\t@echo 'ac_maketemp=\"${MAKE}\"'\n+EOF\n+# GNU make sometimes prints \"make[1]: Entering...\", which would confuse us.\n+eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`\n+if test -n \"$ac_maketemp\"; then\n+  eval ac_cv_prog_make_${ac_make}_set=yes\n+else\n+  eval ac_cv_prog_make_${ac_make}_set=no\n+fi\n+rm -f conftestmake\n+fi\n+if eval \"test \\\"`echo '$ac_cv_prog_make_'${ac_make}_set`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  SET_MAKE=\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+  SET_MAKE=\"MAKE=${MAKE-make}\"\n+fi\n+\n+\n+PACKAGE=fastar\n+\n+VERSION=0.92-gcc\n+\n+if test \"`cd $srcdir && pwd`\" != \"`pwd`\" && test -f $srcdir/config.status; then\n+  { echo \"configure: error: source directory already configured; run \"make distclean\" there first\" 1>&2; exit 1; }\n+fi\n+cat >> confdefs.h <<EOF\n+#define PACKAGE \"$PACKAGE\"\n+EOF\n+\n+cat >> confdefs.h <<EOF\n+#define VERSION \"$VERSION\"\n+EOF\n+\n+\n+\n+missing_dir=`cd $ac_aux_dir && pwd`\n+echo $ac_n \"checking for working aclocal\"\"... $ac_c\" 1>&6\n+echo \"configure:712: checking for working aclocal\" >&5\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if (aclocal --version) < /dev/null > /dev/null 2>&1; then\n+   ACLOCAL=aclocal\n+   echo \"$ac_t\"\"found\" 1>&6\n+else\n+   ACLOCAL=\"$missing_dir/missing aclocal\"\n+   echo \"$ac_t\"\"missing\" 1>&6\n+fi\n+\n+echo $ac_n \"checking for working autoconf\"\"... $ac_c\" 1>&6\n+echo \"configure:725: checking for working autoconf\" >&5\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if (autoconf --version) < /dev/null > /dev/null 2>&1; then\n+   AUTOCONF=autoconf\n+   echo \"$ac_t\"\"found\" 1>&6\n+else\n+   AUTOCONF=\"$missing_dir/missing autoconf\"\n+   echo \"$ac_t\"\"missing\" 1>&6\n+fi\n+\n+echo $ac_n \"checking for working automake\"\"... $ac_c\" 1>&6\n+echo \"configure:738: checking for working automake\" >&5\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if (automake --version) < /dev/null > /dev/null 2>&1; then\n+   AUTOMAKE=automake\n+   echo \"$ac_t\"\"found\" 1>&6\n+else\n+   AUTOMAKE=\"$missing_dir/missing automake\"\n+   echo \"$ac_t\"\"missing\" 1>&6\n+fi\n+\n+echo $ac_n \"checking for working autoheader\"\"... $ac_c\" 1>&6\n+echo \"configure:751: checking for working autoheader\" >&5\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if (autoheader --version) < /dev/null > /dev/null 2>&1; then\n+   AUTOHEADER=autoheader\n+   echo \"$ac_t\"\"found\" 1>&6\n+else\n+   AUTOHEADER=\"$missing_dir/missing autoheader\"\n+   echo \"$ac_t\"\"missing\" 1>&6\n+fi\n+\n+echo $ac_n \"checking for working makeinfo\"\"... $ac_c\" 1>&6\n+echo \"configure:764: checking for working makeinfo\" >&5\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if (makeinfo --version) < /dev/null > /dev/null 2>&1; then\n+   MAKEINFO=makeinfo\n+   echo \"$ac_t\"\"found\" 1>&6\n+else\n+   MAKEINFO=\"$missing_dir/missing makeinfo\"\n+   echo \"$ac_t\"\"missing\" 1>&6\n+fi\n+\n+\n+\n+\n+\n+\n+# Extract the first word of \"gcc\", so it can be a program name with args.\n+set dummy gcc; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:784: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_CC=\"gcc\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+CC=\"$ac_cv_prog_CC\"\n+if test -n \"$CC\"; then\n+  echo \"$ac_t\"\"$CC\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+if test -z \"$CC\"; then\n+  # Extract the first word of \"cc\", so it can be a program name with args.\n+set dummy cc; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:814: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_prog_rejected=no\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      if test \"$ac_dir/$ac_word\" = \"/usr/ucb/cc\"; then\n+        ac_prog_rejected=yes\n+\tcontinue\n+      fi\n+      ac_cv_prog_CC=\"cc\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+if test $ac_prog_rejected = yes; then\n+  # We found a bogon in the path, so make sure we never use it.\n+  set dummy $ac_cv_prog_CC\n+  shift\n+  if test $# -gt 0; then\n+    # We chose a different compiler from the bogus one.\n+    # However, it has the same basename, so the bogon will be chosen\n+    # first if we set CC to just the basename; use the full file name.\n+    shift\n+    set dummy \"$ac_dir/$ac_word\" \"$@\"\n+    shift\n+    ac_cv_prog_CC=\"$@\"\n+  fi\n+fi\n+fi\n+fi\n+CC=\"$ac_cv_prog_CC\"\n+if test -n \"$CC\"; then\n+  echo \"$ac_t\"\"$CC\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+  if test -z \"$CC\"; then\n+    case \"`uname -s`\" in\n+    *win32* | *WIN32*)\n+      # Extract the first word of \"cl\", so it can be a program name with args.\n+set dummy cl; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:865: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_CC=\"cl\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+CC=\"$ac_cv_prog_CC\"\n+if test -n \"$CC\"; then\n+  echo \"$ac_t\"\"$CC\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+ ;;\n+    esac\n+  fi\n+  test -z \"$CC\" && { echo \"configure: error: no acceptable cc found in \\$PATH\" 1>&2; exit 1; }\n+fi\n+\n+echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n+echo \"configure:897: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+\n+ac_ext=c\n+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+cross_compiling=$ac_cv_prog_cc_cross\n+\n+cat > conftest.$ac_ext << EOF\n+\n+#line 908 \"configure\"\n+#include \"confdefs.h\"\n+\n+main(){return(0);}\n+EOF\n+if { (eval echo configure:913: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  ac_cv_prog_cc_works=yes\n+  # If we can't run a trivial program, we are probably using a cross compiler.\n+  if (./conftest; exit) 2>/dev/null; then\n+    ac_cv_prog_cc_cross=no\n+  else\n+    ac_cv_prog_cc_cross=yes\n+  fi\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  ac_cv_prog_cc_works=no\n+fi\n+rm -fr conftest*\n+ac_ext=c\n+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+cross_compiling=$ac_cv_prog_cc_cross\n+\n+echo \"$ac_t\"\"$ac_cv_prog_cc_works\" 1>&6\n+if test $ac_cv_prog_cc_works = no; then\n+  { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n+fi\n+echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n+echo \"configure:939: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n+cross_compiling=$ac_cv_prog_cc_cross\n+\n+echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n+echo \"configure:944: checking whether we are using GNU C\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.c <<EOF\n+#ifdef __GNUC__\n+  yes;\n+#endif\n+EOF\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:953: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+  ac_cv_prog_gcc=yes\n+else\n+  ac_cv_prog_gcc=no\n+fi\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_prog_gcc\" 1>&6\n+\n+if test $ac_cv_prog_gcc = yes; then\n+  GCC=yes\n+else\n+  GCC=\n+fi\n+\n+ac_test_CFLAGS=\"${CFLAGS+set}\"\n+ac_save_CFLAGS=\"$CFLAGS\"\n+CFLAGS=\n+echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n+echo \"configure:972: checking whether ${CC-cc} accepts -g\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  echo 'void f(){}' > conftest.c\n+if test -z \"`${CC-cc} -g -c conftest.c 2>&1`\"; then\n+  ac_cv_prog_cc_g=yes\n+else\n+  ac_cv_prog_cc_g=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_prog_cc_g\" 1>&6\n+if test \"$ac_test_CFLAGS\" = set; then\n+  CFLAGS=\"$ac_save_CFLAGS\"\n+elif test $ac_cv_prog_cc_g = yes; then\n+  if test \"$GCC\" = yes; then\n+    CFLAGS=\"-g -O2\"\n+  else\n+    CFLAGS=\"-g\"\n+  fi\n+else\n+  if test \"$GCC\" = yes; then\n+    CFLAGS=\"-O2\"\n+  else\n+    CFLAGS=\n+  fi\n+fi\n+\n+# Find a good install program.  We prefer a C program (faster),\n+# so one script is as good as another.  But avoid the broken or\n+# incompatible versions:\n+# SysV /etc/install, /usr/sbin/install\n+# SunOS /usr/etc/install\n+# IRIX /sbin/install\n+# AIX /bin/install\n+# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag\n+# AFS /usr/afsws/bin/install, which mishandles nonexistent args\n+# SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n+# ./install, which can be erroneously created by make from ./install.sh.\n+echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n+echo \"configure:1015: checking for a BSD compatible install\" >&5\n+if test -z \"$INSTALL\"; then\n+if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+    IFS=\"${IFS= \t}\"; ac_save_IFS=\"$IFS\"; IFS=\":\"\n+  for ac_dir in $PATH; do\n+    # Account for people who put trailing slashes in PATH elements.\n+    case \"$ac_dir/\" in\n+    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;\n+    *)\n+      # OSF1 and SCO ODT 3.0 have their own names for install.\n+      # Don't use installbsd from OSF since it installs stuff as root\n+      # by default.\n+      for ac_prog in ginstall scoinst install; do\n+        if test -f $ac_dir/$ac_prog; then\n+\t  if test $ac_prog = install &&\n+            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then\n+\t    # AIX install.  It has an incompatible calling convention.\n+\t    :\n+\t  else\n+\t    ac_cv_path_install=\"$ac_dir/$ac_prog -c\"\n+\t    break 2\n+\t  fi\n+\tfi\n+      done\n+      ;;\n+    esac\n+  done\n+  IFS=\"$ac_save_IFS\"\n+\n+fi\n+  if test \"${ac_cv_path_install+set}\" = set; then\n+    INSTALL=\"$ac_cv_path_install\"\n+  else\n+    # As a last resort, use the slow shell script.  We don't cache a\n+    # path for INSTALL within a source directory, because that will\n+    # break other packages using the cache if that directory is\n+    # removed, or if the path is relative.\n+    INSTALL=\"$ac_install_sh\"\n+  fi\n+fi\n+echo \"$ac_t\"\"$INSTALL\" 1>&6\n+\n+# Use test -z because SunOS4 sh mishandles braces in ${var-val}.\n+# It thinks the first close brace ends the variable substitution.\n+test -z \"$INSTALL_PROGRAM\" && INSTALL_PROGRAM='${INSTALL}'\n+\n+test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n+\n+test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n+\n+# Extract the first word of \"rm\", so it can be a program name with args.\n+set dummy rm; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:1070: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_path_RM'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  case \"$RM\" in\n+  /*)\n+  ac_cv_path_RM=\"$RM\" # Let the user override the test with a path.\n+  ;;\n+  ?:/*)\t\t\t \n+  ac_cv_path_RM=\"$RM\" # Let the user override the test with a dos path.\n+  ;;\n+  *)\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH:/bin:/usr/bin:/usr/local/bin\"\n+  for ac_dir in $ac_dummy; do \n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_path_RM=\"$ac_dir/$ac_word\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  test -z \"$ac_cv_path_RM\" && ac_cv_path_RM=\"/bin/rm\"\n+  ;;\n+esac\n+fi\n+RM=\"$ac_cv_path_RM\"\n+if test -n \"$RM\"; then\n+  echo \"$ac_t\"\"$RM\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+# Extract the first word of \"cp\", so it can be a program name with args.\n+set dummy cp; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:1106: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_path_CP'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  case \"$CP\" in\n+  /*)\n+  ac_cv_path_CP=\"$CP\" # Let the user override the test with a path.\n+  ;;\n+  ?:/*)\t\t\t \n+  ac_cv_path_CP=\"$CP\" # Let the user override the test with a dos path.\n+  ;;\n+  *)\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH:/bin:/usr/bin:/usr/local/bin\"\n+  for ac_dir in $ac_dummy; do \n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_path_CP=\"$ac_dir/$ac_word\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  test -z \"$ac_cv_path_CP\" && ac_cv_path_CP=\"/bin/cp\"\n+  ;;\n+esac\n+fi\n+CP=\"$ac_cv_path_CP\"\n+if test -n \"$CP\"; then\n+  echo \"$ac_t\"\"$CP\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+# Extract the first word of \"strip\", so it can be a program name with args.\n+set dummy strip; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:1142: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_path_STRIP'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  case \"$STRIP\" in\n+  /*)\n+  ac_cv_path_STRIP=\"$STRIP\" # Let the user override the test with a path.\n+  ;;\n+  ?:/*)\t\t\t \n+  ac_cv_path_STRIP=\"$STRIP\" # Let the user override the test with a dos path.\n+  ;;\n+  *)\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH:/bin:/usr/bin:/usr/local/bin\"\n+  for ac_dir in $ac_dummy; do \n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_path_STRIP=\"$ac_dir/$ac_word\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  test -z \"$ac_cv_path_STRIP\" && ac_cv_path_STRIP=\"/usr/bin/strip\"\n+  ;;\n+esac\n+fi\n+STRIP=\"$ac_cv_path_STRIP\"\n+if test -n \"$STRIP\"; then\n+  echo \"$ac_t\"\"$STRIP\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+# Extract the first word of \"chmod\", so it can be a program name with args.\n+set dummy chmod; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:1178: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_path_CHMOD'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  case \"$CHMOD\" in\n+  /*)\n+  ac_cv_path_CHMOD=\"$CHMOD\" # Let the user override the test with a path.\n+  ;;\n+  ?:/*)\t\t\t \n+  ac_cv_path_CHMOD=\"$CHMOD\" # Let the user override the test with a dos path.\n+  ;;\n+  *)\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH:/bin:/usr/bin:/usr/local/bin\"\n+  for ac_dir in $ac_dummy; do \n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_path_CHMOD=\"$ac_dir/$ac_word\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  test -z \"$ac_cv_path_CHMOD\" && ac_cv_path_CHMOD=\"/bin/chmod\"\n+  ;;\n+esac\n+fi\n+CHMOD=\"$ac_cv_path_CHMOD\"\n+if test -n \"$CHMOD\"; then\n+  echo \"$ac_t\"\"$CHMOD\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+\n+ac_header_dirent=no\n+for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h\n+do\n+ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n+echo $ac_n \"checking for $ac_hdr that defines DIR\"\"... $ac_c\" 1>&6\n+echo \"configure:1217: checking for $ac_hdr that defines DIR\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1222 \"configure\"\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+#include <$ac_hdr>\n+int main() {\n+DIR *dirp = 0;\n+; return 0; }\n+EOF\n+if { (eval echo configure:1230: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  eval \"ac_cv_header_dirent_$ac_safe=yes\"\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_header_dirent_$ac_safe=no\"\n+fi\n+rm -f conftest*\n+fi\n+if eval \"test \\\"`echo '$ac_cv_header_dirent_'$ac_safe`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`\n+  cat >> confdefs.h <<EOF\n+#define $ac_tr_hdr 1\n+EOF\n+ ac_header_dirent=$ac_hdr; break\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+done\n+# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.\n+if test $ac_header_dirent = dirent.h; then\n+echo $ac_n \"checking for opendir in -ldir\"\"... $ac_c\" 1>&6\n+echo \"configure:1255: checking for opendir in -ldir\" >&5\n+ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`\n+if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_save_LIBS=\"$LIBS\"\n+LIBS=\"-ldir  $LIBS\"\n+cat > conftest.$ac_ext <<EOF\n+#line 1263 \"configure\"\n+#include \"confdefs.h\"\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char opendir();\n+\n+int main() {\n+opendir()\n+; return 0; }\n+EOF\n+if { (eval echo configure:1274: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=yes\"\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=no\"\n+fi\n+rm -f conftest*\n+LIBS=\"$ac_save_LIBS\"\n+\n+fi\n+if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  LIBS=\"$LIBS -ldir\"\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+else\n+echo $ac_n \"checking for opendir in -lx\"\"... $ac_c\" 1>&6\n+echo \"configure:1296: checking for opendir in -lx\" >&5\n+ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`\n+if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_save_LIBS=\"$LIBS\"\n+LIBS=\"-lx  $LIBS\"\n+cat > conftest.$ac_ext <<EOF\n+#line 1304 \"configure\"\n+#include \"confdefs.h\"\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char opendir();\n+\n+int main() {\n+opendir()\n+; return 0; }\n+EOF\n+if { (eval echo configure:1315: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=yes\"\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=no\"\n+fi\n+rm -f conftest*\n+LIBS=\"$ac_save_LIBS\"\n+\n+fi\n+if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  LIBS=\"$LIBS -lx\"\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+fi\n+\n+echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n+echo \"configure:1338: checking how to run the C preprocessor\" >&5\n+# On Suns, sometimes $CPP names a directory.\n+if test -n \"$CPP\" && test -d \"$CPP\"; then\n+  CPP=\n+fi\n+if test -z \"$CPP\"; then\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CPP'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+    # This must be in double quotes, not single quotes, because CPP may get\n+  # substituted into the Makefile and \"${CC-cc}\" will confuse make.\n+  CPP=\"${CC-cc} -E\"\n+  # On the NeXT, cc -E runs the code through the compiler's parser,\n+  # not just through cpp.\n+  cat > conftest.$ac_ext <<EOF\n+#line 1353 \"configure\"\n+#include \"confdefs.h\"\n+#include <assert.h>\n+Syntax Error\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1359: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  :\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  CPP=\"${CC-cc} -E -traditional-cpp\"\n+  cat > conftest.$ac_ext <<EOF\n+#line 1370 \"configure\"\n+#include \"confdefs.h\"\n+#include <assert.h>\n+Syntax Error\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1376: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  :\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  CPP=\"${CC-cc} -nologo -E\"\n+  cat > conftest.$ac_ext <<EOF\n+#line 1387 \"configure\"\n+#include \"confdefs.h\"\n+#include <assert.h>\n+Syntax Error\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1393: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  :\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  CPP=/lib/cpp\n+fi\n+rm -f conftest*\n+fi\n+rm -f conftest*\n+fi\n+rm -f conftest*\n+  ac_cv_prog_CPP=\"$CPP\"\n+fi\n+  CPP=\"$ac_cv_prog_CPP\"\n+else\n+  ac_cv_prog_CPP=\"$CPP\"\n+fi\n+echo \"$ac_t\"\"$CPP\" 1>&6\n+\n+echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n+echo \"configure:1418: checking for ANSI C header files\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1423 \"configure\"\n+#include \"confdefs.h\"\n+#include <stdlib.h>\n+#include <stdarg.h>\n+#include <string.h>\n+#include <float.h>\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1431: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  rm -rf conftest*\n+  ac_cv_header_stdc=yes\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n+cat > conftest.$ac_ext <<EOF\n+#line 1448 \"configure\"\n+#include \"confdefs.h\"\n+#include <string.h>\n+EOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  egrep \"memchr\" >/dev/null 2>&1; then\n+  :\n+else\n+  rm -rf conftest*\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n+cat > conftest.$ac_ext <<EOF\n+#line 1466 \"configure\"\n+#include \"confdefs.h\"\n+#include <stdlib.h>\n+EOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  egrep \"free\" >/dev/null 2>&1; then\n+  :\n+else\n+  rm -rf conftest*\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.\n+if test \"$cross_compiling\" = yes; then\n+  :\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1487 \"configure\"\n+#include \"confdefs.h\"\n+#include <ctype.h>\n+#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n+#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))\n+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))\n+int main () { int i; for (i = 0; i < 256; i++)\n+if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n+exit (0); }\n+\n+EOF\n+if { (eval echo configure:1498: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  :\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_header_stdc=no\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_header_stdc\" 1>&6\n+if test $ac_cv_header_stdc = yes; then\n+  cat >> confdefs.h <<\\EOF\n+#define STDC_HEADERS 1\n+EOF\n+\n+fi\n+\n+echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n+echo \"configure:1522: checking whether struct tm is in sys/time.h or time.h\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1527 \"configure\"\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+#include <time.h>\n+int main() {\n+struct tm *tp; tp->tm_sec;\n+; return 0; }\n+EOF\n+if { (eval echo configure:1535: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_struct_tm=time.h\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_struct_tm=sys/time.h\n+fi\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_struct_tm\" 1>&6\n+if test $ac_cv_struct_tm = sys/time.h; then\n+  cat >> confdefs.h <<\\EOF\n+#define TM_IN_SYS_TIME 1\n+EOF\n+\n+fi\n+\n+for ac_hdr in fcntl.h unistd.h sys/param.h\n+do\n+ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n+echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n+echo \"configure:1559: checking for $ac_hdr\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1564 \"configure\"\n+#include \"confdefs.h\"\n+#include <$ac_hdr>\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1569: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  rm -rf conftest*\n+  eval \"ac_cv_header_$ac_safe=yes\"\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_header_$ac_safe=no\"\n+fi\n+rm -f conftest*\n+fi\n+if eval \"test \\\"`echo '$ac_cv_header_'$ac_safe`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`\n+  cat >> confdefs.h <<EOF\n+#define $ac_tr_hdr 1\n+EOF\n+ \n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+done\n+\n+\n+echo $ac_n \"checking for off_t\"\"... $ac_c\" 1>&6\n+echo \"configure:1597: checking for off_t\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_type_off_t'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1602 \"configure\"\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+#if STDC_HEADERS\n+#include <stdlib.h>\n+#include <stddef.h>\n+#endif\n+EOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  egrep \"(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]\" >/dev/null 2>&1; then\n+  rm -rf conftest*\n+  ac_cv_type_off_t=yes\n+else\n+  rm -rf conftest*\n+  ac_cv_type_off_t=no\n+fi\n+rm -f conftest*\n+\n+fi\n+echo \"$ac_t\"\"$ac_cv_type_off_t\" 1>&6\n+if test $ac_cv_type_off_t = no; then\n+  cat >> confdefs.h <<\\EOF\n+#define off_t long\n+EOF\n+\n+fi\n+\n+echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n+echo \"configure:1630: checking whether struct tm is in sys/time.h or time.h\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1635 \"configure\"\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+#include <time.h>\n+int main() {\n+struct tm *tp; tp->tm_sec;\n+; return 0; }\n+EOF\n+if { (eval echo configure:1643: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_struct_tm=time.h\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_struct_tm=sys/time.h\n+fi\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_struct_tm\" 1>&6\n+if test $ac_cv_struct_tm = sys/time.h; then\n+  cat >> confdefs.h <<\\EOF\n+#define TM_IN_SYS_TIME 1\n+EOF\n+\n+fi\n+\n+\n+echo $ac_n \"checking size of char\"\"... $ac_c\" 1>&6\n+echo \"configure:1665: checking size of char\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_sizeof_char'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1673 \"configure\"\n+#include \"confdefs.h\"\n+#include <stdio.h>\n+main()\n+{\n+  FILE *f=fopen(\"conftestval\", \"w\");\n+  if (!f) exit(1);\n+  fprintf(f, \"%d\\n\", sizeof(char));\n+  exit(0);\n+}\n+EOF\n+if { (eval echo configure:1684: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  ac_cv_sizeof_char=`cat conftestval`\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_sizeof_char=0\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+echo \"$ac_t\"\"$ac_cv_sizeof_char\" 1>&6\n+cat >> confdefs.h <<EOF\n+#define SIZEOF_CHAR $ac_cv_sizeof_char\n+EOF\n+\n+\n+echo $ac_n \"checking size of short\"\"... $ac_c\" 1>&6\n+echo \"configure:1704: checking size of short\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_sizeof_short'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1712 \"configure\"\n+#include \"confdefs.h\"\n+#include <stdio.h>\n+main()\n+{\n+  FILE *f=fopen(\"conftestval\", \"w\");\n+  if (!f) exit(1);\n+  fprintf(f, \"%d\\n\", sizeof(short));\n+  exit(0);\n+}\n+EOF\n+if { (eval echo configure:1723: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  ac_cv_sizeof_short=`cat conftestval`\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_sizeof_short=0\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+echo \"$ac_t\"\"$ac_cv_sizeof_short\" 1>&6\n+cat >> confdefs.h <<EOF\n+#define SIZEOF_SHORT $ac_cv_sizeof_short\n+EOF\n+\n+\n+echo $ac_n \"checking size of int\"\"... $ac_c\" 1>&6\n+echo \"configure:1743: checking size of int\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_sizeof_int'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1751 \"configure\"\n+#include \"confdefs.h\"\n+#include <stdio.h>\n+main()\n+{\n+  FILE *f=fopen(\"conftestval\", \"w\");\n+  if (!f) exit(1);\n+  fprintf(f, \"%d\\n\", sizeof(int));\n+  exit(0);\n+}\n+EOF\n+if { (eval echo configure:1762: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  ac_cv_sizeof_int=`cat conftestval`\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_sizeof_int=0\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+echo \"$ac_t\"\"$ac_cv_sizeof_int\" 1>&6\n+cat >> confdefs.h <<EOF\n+#define SIZEOF_INT $ac_cv_sizeof_int\n+EOF\n+\n+\n+echo $ac_n \"checking size of long\"\"... $ac_c\" 1>&6\n+echo \"configure:1782: checking size of long\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1790 \"configure\"\n+#include \"confdefs.h\"\n+#include <stdio.h>\n+main()\n+{\n+  FILE *f=fopen(\"conftestval\", \"w\");\n+  if (!f) exit(1);\n+  fprintf(f, \"%d\\n\", sizeof(long));\n+  exit(0);\n+}\n+EOF\n+if { (eval echo configure:1801: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  ac_cv_sizeof_long=`cat conftestval`\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_sizeof_long=0\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+echo \"$ac_t\"\"$ac_cv_sizeof_long\" 1>&6\n+cat >> confdefs.h <<EOF\n+#define SIZEOF_LONG $ac_cv_sizeof_long\n+EOF\n+\n+\n+echo $ac_n \"checking size of long long\"\"... $ac_c\" 1>&6\n+echo \"configure:1821: checking size of long long\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1829 \"configure\"\n+#include \"confdefs.h\"\n+#include <stdio.h>\n+main()\n+{\n+  FILE *f=fopen(\"conftestval\", \"w\");\n+  if (!f) exit(1);\n+  fprintf(f, \"%d\\n\", sizeof(long long));\n+  exit(0);\n+}\n+EOF\n+if { (eval echo configure:1840: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  ac_cv_sizeof_long_long=`cat conftestval`\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_sizeof_long_long=0\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+echo \"$ac_t\"\"$ac_cv_sizeof_long_long\" 1>&6\n+cat >> confdefs.h <<EOF\n+#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long\n+EOF\n+\n+\n+\n+echo $ac_n \"checking whether byte ordering is bigendian\"\"... $ac_c\" 1>&6\n+echo \"configure:1861: checking whether byte ordering is bigendian\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_c_bigendian'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_cv_c_bigendian=unknown\n+# See if sys/param.h defines the BYTE_ORDER macro.\n+cat > conftest.$ac_ext <<EOF\n+#line 1868 \"configure\"\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+#include <sys/param.h>\n+int main() {\n+\n+#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN\n+ bogus endian macros\n+#endif\n+; return 0; }\n+EOF\n+if { (eval echo configure:1879: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  # It does; now see whether it defined to BIG_ENDIAN or not.\n+cat > conftest.$ac_ext <<EOF\n+#line 1883 \"configure\"\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+#include <sys/param.h>\n+int main() {\n+\n+#if BYTE_ORDER != BIG_ENDIAN\n+ not big endian\n+#endif\n+; return 0; }\n+EOF\n+if { (eval echo configure:1894: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_c_bigendian=yes\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_c_bigendian=no\n+fi\n+rm -f conftest*\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+fi\n+rm -f conftest*\n+if test $ac_cv_c_bigendian = unknown; then\n+if test \"$cross_compiling\" = yes; then\n+    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1914 \"configure\"\n+#include \"confdefs.h\"\n+main () {\n+  /* Are we little or big endian?  From Harbison&Steele.  */\n+  union\n+  {\n+    long l;\n+    char c[sizeof (long)];\n+  } u;\n+  u.l = 1;\n+  exit (u.c[sizeof (long) - 1] == 1);\n+}\n+EOF\n+if { (eval echo configure:1927: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  ac_cv_c_bigendian=no\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_c_bigendian=yes\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_c_bigendian\" 1>&6\n+if test $ac_cv_c_bigendian = yes; then\n+  cat >> confdefs.h <<\\EOF\n+#define WORDS_BIGENDIAN 1\n+EOF\n+\n+fi\n+\n+\n+ZDEPS='$(top_builddir)/../zlib/libz.a'\n+ZLIBS=\"$ZDEPS -L\\$(here)/../zlib/$libsubdir\"\n+ZINCS='-I$(top_srcdir)/../zlib'\n+\n+\n+\n+\n+trap '' 1 2 15\n+cat > confcache <<\\EOF\n+# This file is a shell script that caches the results of configure\n+# tests run on this system so they can be shared between configure\n+# scripts and configure runs.  It is not useful on other systems.\n+# If it contains results you don't want to keep, you may remove or edit it.\n+#\n+# By default, configure uses ./config.cache as the cache file,\n+# creating it if it does not exist already.  You can give configure\n+# the --cache-file=FILE option to use a different cache file; that is\n+# what configure does when it calls configure scripts in\n+# subdirectories, so they share the cache.\n+# Giving --cache-file=/dev/null disables caching, for debugging configure.\n+# config.status only pays attention to the cache file if you give it the\n+# --recheck option to rerun configure.\n+#\n+EOF\n+# The following way of writing the cache mishandles newlines in values,\n+# but we know of no workaround that is simple, portable, and efficient.\n+# So, don't put newlines in cache variables' values.\n+# Ultrix sh set writes to stderr and can't be redirected directly,\n+# and sets the high bit in the cache file unless we assign to the vars.\n+(set) 2>&1 |\n+  case `(ac_space=' '; set | grep ac_space) 2>&1` in\n+  *ac_space=\\ *)\n+    # `set' does not quote correctly, so add quotes (double-quote substitution\n+    # turns \\\\\\\\ into \\\\, and sed turns \\\\ into \\).\n+    sed -n \\\n+      -e \"s/'/'\\\\\\\\''/g\" \\\n+      -e \"s/^\\\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\\\)=\\\\(.*\\\\)/\\\\1=\\${\\\\1='\\\\2'}/p\"\n+    ;;\n+  *)\n+    # `set' quotes correctly as required by POSIX, so do not add quotes.\n+    sed -n -e 's/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=${\\1=\\2}/p'\n+    ;;\n+  esac >> confcache\n+if cmp -s $cache_file confcache; then\n+  :\n+else\n+  if test -w $cache_file; then\n+    echo \"updating cache $cache_file\"\n+    cat confcache > $cache_file\n+  else\n+    echo \"not updating unwritable cache $cache_file\"\n+  fi\n+fi\n+rm -f confcache\n+\n+trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15\n+\n+test \"x$prefix\" = xNONE && prefix=$ac_default_prefix\n+# Let make expand exec_prefix.\n+test \"x$exec_prefix\" = xNONE && exec_prefix='${prefix}'\n+\n+# Any assignment to VPATH causes Sun make to only execute\n+# the first set of double-colon rules, so remove it if not needed.\n+# If there is a colon in the path, we need to keep it.\n+if test \"x$srcdir\" = x.; then\n+  ac_vpsub='/^[ \t]*VPATH[ \t]*=[^:]*$/d'\n+fi\n+\n+trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15\n+\n+DEFS=-DHAVE_CONFIG_H\n+\n+# Without the \"./\", some shells look in PATH for config.status.\n+: ${CONFIG_STATUS=./config.status}\n+\n+echo creating $CONFIG_STATUS\n+rm -f $CONFIG_STATUS\n+cat > $CONFIG_STATUS <<EOF\n+#! /bin/sh\n+# Generated automatically by configure.\n+# Run this file to recreate the current configuration.\n+# This directory was configured as follows,\n+# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:\n+#\n+# $0 $ac_configure_args\n+#\n+# Compiler output produced by configure, useful for debugging\n+# configure, is in ./config.log if it exists.\n+\n+ac_cs_usage=\"Usage: $CONFIG_STATUS [--recheck] [--version] [--help]\"\n+for ac_option\n+do\n+  case \"\\$ac_option\" in\n+  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)\n+    echo \"running \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion\"\n+    exec \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;\n+  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)\n+    echo \"$CONFIG_STATUS generated by autoconf version 2.13\"\n+    exit 0 ;;\n+  -help | --help | --hel | --he | --h)\n+    echo \"\\$ac_cs_usage\"; exit 0 ;;\n+  *) echo \"\\$ac_cs_usage\"; exit 1 ;;\n+  esac\n+done\n+\n+ac_given_srcdir=$srcdir\n+ac_given_INSTALL=\"$INSTALL\"\n+\n+trap 'rm -fr `echo \"Makefile install-defs.sh config.h\" | sed \"s/:[^ ]*//g\"` conftest*; exit 1' 1 2 15\n+EOF\n+cat >> $CONFIG_STATUS <<EOF\n+\n+# Protect against being on the right side of a sed subst in config.status.\n+sed 's/%@/@@/; s/@%/@@/; s/%g\\$/@g/; /@g\\$/s/[\\\\\\\\&%]/\\\\\\\\&/g;\n+ s/@@/%@/; s/@@/@%/; s/@g\\$/%g/' > conftest.subs <<\\\\CEOF\n+$ac_vpsub\n+$extrasub\n+s%@SHELL@%$SHELL%g\n+s%@CFLAGS@%$CFLAGS%g\n+s%@CPPFLAGS@%$CPPFLAGS%g\n+s%@CXXFLAGS@%$CXXFLAGS%g\n+s%@FFLAGS@%$FFLAGS%g\n+s%@DEFS@%$DEFS%g\n+s%@LDFLAGS@%$LDFLAGS%g\n+s%@LIBS@%$LIBS%g\n+s%@exec_prefix@%$exec_prefix%g\n+s%@prefix@%$prefix%g\n+s%@program_transform_name@%$program_transform_name%g\n+s%@bindir@%$bindir%g\n+s%@sbindir@%$sbindir%g\n+s%@libexecdir@%$libexecdir%g\n+s%@datadir@%$datadir%g\n+s%@sysconfdir@%$sysconfdir%g\n+s%@sharedstatedir@%$sharedstatedir%g\n+s%@localstatedir@%$localstatedir%g\n+s%@libdir@%$libdir%g\n+s%@includedir@%$includedir%g\n+s%@oldincludedir@%$oldincludedir%g\n+s%@infodir@%$infodir%g\n+s%@mandir@%$mandir%g\n+s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g\n+s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g\n+s%@INSTALL_DATA@%$INSTALL_DATA%g\n+s%@PACKAGE@%$PACKAGE%g\n+s%@VERSION@%$VERSION%g\n+s%@ACLOCAL@%$ACLOCAL%g\n+s%@AUTOCONF@%$AUTOCONF%g\n+s%@AUTOMAKE@%$AUTOMAKE%g\n+s%@AUTOHEADER@%$AUTOHEADER%g\n+s%@MAKEINFO@%$MAKEINFO%g\n+s%@SET_MAKE@%$SET_MAKE%g\n+s%@CC@%$CC%g\n+s%@RM@%$RM%g\n+s%@CP@%$CP%g\n+s%@STRIP@%$STRIP%g\n+s%@CHMOD@%$CHMOD%g\n+s%@CPP@%$CPP%g\n+s%@ZLIBS@%$ZLIBS%g\n+s%@ZDEPS@%$ZDEPS%g\n+s%@ZINCS@%$ZINCS%g\n+\n+CEOF\n+EOF\n+\n+cat >> $CONFIG_STATUS <<\\EOF\n+\n+# Split the substitutions into bite-sized pieces for seds with\n+# small command number limits, like on Digital OSF/1 and HP-UX.\n+ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.\n+ac_file=1 # Number of current file.\n+ac_beg=1 # First line for current file.\n+ac_end=$ac_max_sed_cmds # Line after last line for current file.\n+ac_more_lines=:\n+ac_sed_cmds=\"\"\n+while $ac_more_lines; do\n+  if test $ac_beg -gt 1; then\n+    sed \"1,${ac_beg}d; ${ac_end}q\" conftest.subs > conftest.s$ac_file\n+  else\n+    sed \"${ac_end}q\" conftest.subs > conftest.s$ac_file\n+  fi\n+  if test ! -s conftest.s$ac_file; then\n+    ac_more_lines=false\n+    rm -f conftest.s$ac_file\n+  else\n+    if test -z \"$ac_sed_cmds\"; then\n+      ac_sed_cmds=\"sed -f conftest.s$ac_file\"\n+    else\n+      ac_sed_cmds=\"$ac_sed_cmds | sed -f conftest.s$ac_file\"\n+    fi\n+    ac_file=`expr $ac_file + 1`\n+    ac_beg=$ac_end\n+    ac_end=`expr $ac_end + $ac_max_sed_cmds`\n+  fi\n+done\n+if test -z \"$ac_sed_cmds\"; then\n+  ac_sed_cmds=cat\n+fi\n+EOF\n+\n+cat >> $CONFIG_STATUS <<EOF\n+\n+CONFIG_FILES=\\${CONFIG_FILES-\"Makefile install-defs.sh\"}\n+EOF\n+cat >> $CONFIG_STATUS <<\\EOF\n+for ac_file in .. $CONFIG_FILES; do if test \"x$ac_file\" != x..; then\n+  # Support \"outfile[:infile[:infile...]]\", defaulting infile=\"outfile.in\".\n+  case \"$ac_file\" in\n+  *:*) ac_file_in=`echo \"$ac_file\"|sed 's%[^:]*:%%'`\n+       ac_file=`echo \"$ac_file\"|sed 's%:.*%%'` ;;\n+  *) ac_file_in=\"${ac_file}.in\" ;;\n+  esac\n+\n+  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.\n+\n+  # Remove last slash and all that follows it.  Not all systems have dirname.\n+  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`\n+  if test \"$ac_dir\" != \"$ac_file\" && test \"$ac_dir\" != .; then\n+    # The file is in a subdirectory.\n+    test ! -d \"$ac_dir\" && mkdir \"$ac_dir\"\n+    ac_dir_suffix=\"/`echo $ac_dir|sed 's%^\\./%%'`\"\n+    # A \"../\" for each directory in $ac_dir_suffix.\n+    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`\n+  else\n+    ac_dir_suffix= ac_dots=\n+  fi\n+\n+  case \"$ac_given_srcdir\" in\n+  .)  srcdir=.\n+      if test -z \"$ac_dots\"; then top_srcdir=.\n+      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;\n+  /*) srcdir=\"$ac_given_srcdir$ac_dir_suffix\"; top_srcdir=\"$ac_given_srcdir\" ;;\n+  *) # Relative path.\n+    srcdir=\"$ac_dots$ac_given_srcdir$ac_dir_suffix\"\n+    top_srcdir=\"$ac_dots$ac_given_srcdir\" ;;\n+  esac\n+\n+  case \"$ac_given_INSTALL\" in\n+  [/$]*) INSTALL=\"$ac_given_INSTALL\" ;;\n+  *) INSTALL=\"$ac_dots$ac_given_INSTALL\" ;;\n+  esac\n+\n+  echo creating \"$ac_file\"\n+  rm -f \"$ac_file\"\n+  configure_input=\"Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure.\"\n+  case \"$ac_file\" in\n+  *Makefile*) ac_comsub=\"1i\\\\\n+# $configure_input\" ;;\n+  *) ac_comsub= ;;\n+  esac\n+\n+  ac_file_inputs=`echo $ac_file_in|sed -e \"s%^%$ac_given_srcdir/%\" -e \"s%:% $ac_given_srcdir/%g\"`\n+  sed -e \"$ac_comsub\n+s%@configure_input@%$configure_input%g\n+s%@srcdir@%$srcdir%g\n+s%@top_srcdir@%$top_srcdir%g\n+s%@INSTALL@%$INSTALL%g\n+\" $ac_file_inputs | (eval \"$ac_sed_cmds\") > $ac_file\n+fi; done\n+rm -f conftest.s*\n+\n+# These sed commands are passed to sed as \"A NAME B NAME C VALUE D\", where\n+# NAME is the cpp macro being defined and VALUE is the value it is being given.\n+#\n+# ac_d sets the value in \"#define NAME VALUE\" lines.\n+ac_dA='s%^\\([ \t]*\\)#\\([ \t]*define[ \t][ \t]*\\)'\n+ac_dB='\\([ \t][ \t]*\\)[^ \t]*%\\1#\\2'\n+ac_dC='\\3'\n+ac_dD='%g'\n+# ac_u turns \"#undef NAME\" with trailing blanks into \"#define NAME VALUE\".\n+ac_uA='s%^\\([ \t]*\\)#\\([ \t]*\\)undef\\([ \t][ \t]*\\)'\n+ac_uB='\\([ \t]\\)%\\1#\\2define\\3'\n+ac_uC=' '\n+ac_uD='\\4%g'\n+# ac_e turns \"#undef NAME\" without trailing blanks into \"#define NAME VALUE\".\n+ac_eA='s%^\\([ \t]*\\)#\\([ \t]*\\)undef\\([ \t][ \t]*\\)'\n+ac_eB='$%\\1#\\2define\\3'\n+ac_eC=' '\n+ac_eD='%g'\n+\n+if test \"${CONFIG_HEADERS+set}\" != set; then\n+EOF\n+cat >> $CONFIG_STATUS <<EOF\n+  CONFIG_HEADERS=\"config.h\"\n+EOF\n+cat >> $CONFIG_STATUS <<\\EOF\n+fi\n+for ac_file in .. $CONFIG_HEADERS; do if test \"x$ac_file\" != x..; then\n+  # Support \"outfile[:infile[:infile...]]\", defaulting infile=\"outfile.in\".\n+  case \"$ac_file\" in\n+  *:*) ac_file_in=`echo \"$ac_file\"|sed 's%[^:]*:%%'`\n+       ac_file=`echo \"$ac_file\"|sed 's%:.*%%'` ;;\n+  *) ac_file_in=\"${ac_file}.in\" ;;\n+  esac\n+\n+  echo creating $ac_file\n+\n+  rm -f conftest.frag conftest.in conftest.out\n+  ac_file_inputs=`echo $ac_file_in|sed -e \"s%^%$ac_given_srcdir/%\" -e \"s%:% $ac_given_srcdir/%g\"`\n+  cat $ac_file_inputs > conftest.in\n+\n+EOF\n+\n+# Transform confdefs.h into a sed script conftest.vals that substitutes\n+# the proper values into config.h.in to produce config.h.  And first:\n+# Protect against being on the right side of a sed subst in config.status.\n+# Protect against being in an unquoted here document in config.status.\n+rm -f conftest.vals\n+cat > conftest.hdr <<\\EOF\n+s/[\\\\&%]/\\\\&/g\n+s%[\\\\$`]%\\\\&%g\n+s%#define \\([A-Za-z_][A-Za-z0-9_]*\\) *\\(.*\\)%${ac_dA}\\1${ac_dB}\\1${ac_dC}\\2${ac_dD}%gp\n+s%ac_d%ac_u%gp\n+s%ac_u%ac_e%gp\n+EOF\n+sed -n -f conftest.hdr confdefs.h > conftest.vals\n+rm -f conftest.hdr\n+\n+# This sed command replaces #undef with comments.  This is necessary, for\n+# example, in the case of _POSIX_SOURCE, which is predefined and required\n+# on some systems where configure will not decide to define it.\n+cat >> conftest.vals <<\\EOF\n+s%^[ \t]*#[ \t]*undef[ \t][ \t]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%\n+EOF\n+\n+# Break up conftest.vals because some shells have a limit on\n+# the size of here documents, and old seds have small limits too.\n+\n+rm -f conftest.tail\n+while :\n+do\n+  ac_lines=`grep -c . conftest.vals`\n+  # grep -c gives empty output for an empty file on some AIX systems.\n+  if test -z \"$ac_lines\" || test \"$ac_lines\" -eq 0; then break; fi\n+  # Write a limited-size here document to conftest.frag.\n+  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS\n+  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS\n+  echo 'CEOF\n+  sed -f conftest.frag conftest.in > conftest.out\n+  rm -f conftest.in\n+  mv conftest.out conftest.in\n+' >> $CONFIG_STATUS\n+  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail\n+  rm -f conftest.vals\n+  mv conftest.tail conftest.vals\n+done\n+rm -f conftest.vals\n+\n+cat >> $CONFIG_STATUS <<\\EOF\n+  rm -f conftest.frag conftest.h\n+  echo \"/* $ac_file.  Generated automatically by configure.  */\" > conftest.h\n+  cat conftest.in >> conftest.h\n+  rm -f conftest.in\n+  if cmp -s $ac_file conftest.h 2>/dev/null; then\n+    echo \"$ac_file is unchanged\"\n+    rm -f conftest.h\n+  else\n+    # Remove last slash and all that follows it.  Not all systems have dirname.\n+      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`\n+      if test \"$ac_dir\" != \"$ac_file\" && test \"$ac_dir\" != .; then\n+      # The file is in a subdirectory.\n+      test ! -d \"$ac_dir\" && mkdir \"$ac_dir\"\n+    fi\n+    rm -f $ac_file\n+    mv conftest.h $ac_file\n+  fi\n+fi; done\n+\n+EOF\n+cat >> $CONFIG_STATUS <<EOF\n+\n+\n+EOF\n+cat >> $CONFIG_STATUS <<\\EOF\n+test -z \"$CONFIG_HEADERS\" || echo timestamp > stamp-h\n+\n+exit 0\n+EOF\n+chmod +x $CONFIG_STATUS\n+rm -fr confdefs* $ac_clean_files\n+test \"$no_create\" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1\n+"}, {"sha": "000b991a46f3c39509335dd2a37c0a1b3adcbfa7", "filename": "fastjar/configure.in", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fconfigure.in?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,42 @@\n+dnl Process this file with autoconf to produce a configure script.\n+AC_INIT(jartool.h)\n+AM_INIT_AUTOMAKE(fastar, 0.92-gcc)\n+AM_CONFIG_HEADER(config.h)\n+\n+dnl Checks for programs.\n+AC_PROG_CC\n+AC_PROG_INSTALL\n+AC_PATH_PROG(RM, rm, /bin/rm, $PATH:/bin:/usr/bin:/usr/local/bin)\n+AC_PATH_PROG(CP, cp, /bin/cp, $PATH:/bin:/usr/bin:/usr/local/bin)\n+AC_PATH_PROG(STRIP, strip, /usr/bin/strip, $PATH:/bin:/usr/bin:/usr/local/bin)\n+AC_PATH_PROG(CHMOD, chmod, /bin/chmod, $PATH:/bin:/usr/bin:/usr/local/bin)\n+\n+dnl Checks for header files.\n+AC_HEADER_DIRENT\n+AC_HEADER_STDC\n+AC_STRUCT_TM\n+AC_CHECK_HEADERS(fcntl.h unistd.h sys/param.h)\n+\n+dnl Checks for typedefs, structures, and compiler characteristics.\n+AC_TYPE_OFF_T\n+AC_STRUCT_TM\n+\n+dnl Check for type-widths\n+AC_CHECK_SIZEOF(char)\n+AC_CHECK_SIZEOF(short)\n+AC_CHECK_SIZEOF(int)\n+AC_CHECK_SIZEOF(long)\n+AC_CHECK_SIZEOF(long long)\n+\n+dnl Check byte order\n+AC_C_BIGENDIAN\n+\n+dnl Brain dead check for tree's zlib\n+ZDEPS='$(top_builddir)/../zlib/libz.a'\n+ZLIBS=\"$ZDEPS -L\\$(here)/../zlib/$libsubdir\"\n+ZINCS='-I$(top_srcdir)/../zlib'\n+AC_SUBST(ZLIBS)\n+AC_SUBST(ZDEPS)\n+AC_SUBST(ZINCS)\n+\n+AC_OUTPUT(Makefile install-defs.sh)"}, {"sha": "c29d9913000969eb31929bed3630f739a4dfa1e3", "filename": "fastjar/dostime.c", "status": "added", "additions": 126, "deletions": 0, "changes": 126, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fdostime.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fdostime.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fdostime.c?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,126 @@\n+/*\n+  dostime.c - routines for converting UNIX time to MS-DOS time.  \n+\n+  Borrowed from Info-zip's unzip\n+\n+  Copyright (C) 1999 Bryan Burns\n+\n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+\n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+\n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+*/\n+\n+/* $Id: dostime.c,v 1.1.1.1 1999/12/06 03:09:12 toast Exp $\n+\n+   $Log: dostime.c,v $\n+   Revision 1.1.1.1  1999/12/06 03:09:12  toast\n+   initial checkin..\n+\n+\n+\n+   Revision 1.6  1999/05/10 08:32:26  burnsbr\n+   added dos2unixtime\n+\n+   Revision 1.5  1999/04/27 10:03:50  burnsbr\n+   configure support\n+\n+   Revision 1.4  1999/04/26 21:55:19  burnsbr\n+   switched from sys/time.h to time.h for better portability\n+\n+   Revision 1.3  1999/04/20 08:54:30  burnsbr\n+   added GPL comment\n+\n+   Revision 1.2  1999/04/20 05:10:53  burnsbr\n+   added RCS tags\n+\n+\n+*/\n+#include \"config.h\"\n+\n+#ifdef TM_IN_SYS_TIME\n+#include <sys/time.h>\n+#else\n+#include <time.h>\n+#endif\n+\n+#include \"dostime.h\"\n+\n+static char rcsid[] = \"$Id: dostime.c,v 1.1.1.1 1999/12/06 03:09:12 toast Exp $\";\n+\n+/*\n+\n+ Copyright (C) 1990-1997 Mark Adler, Richard B. Wales, Jean-loup Gailly,\n+ Kai Uwe Rommel, Onno van der Linden and Igor Mandrichenko.\n+ Permission is granted to any individual or institution to use, copy, or\n+ redistribute this software so long as all of the original files are included,\n+ that it is not sold for profit, and that this copyright notice is retained.\n+\n+*/\n+\n+\n+time_t dos2unixtime(dostime)\n+     unsigned long dostime;            /* DOS time to convert */\n+     /* Return the Unix time_t value (GMT/UTC time) for the DOS format (local)\n+      * time dostime, where dostime is a four byte value (date in most\n+      * significant word, time in least significant word), see dostime() \n+      * function.\n+      */\n+{\n+  struct tm *t;         /* argument for mktime() */\n+  time_t clock = time(NULL);\n+\n+  t = localtime(&clock);\n+  t->tm_isdst = -1;     /* let mktime() determine if DST is in effect */\n+  /* Convert DOS time to UNIX time_t format */\n+  t->tm_sec  = (((int)dostime) <<  1) & 0x3e;\n+  t->tm_min  = (((int)dostime) >>  5) & 0x3f;\n+  t->tm_hour = (((int)dostime) >> 11) & 0x1f;\n+  t->tm_mday = (int)(dostime >> 16) & 0x1f;\n+  t->tm_mon  = ((int)(dostime >> 21) & 0x0f) - 1;\n+  t->tm_year = ((int)(dostime >> 25) & 0x7f) + 80;\n+\n+  return mktime(t);\n+}\n+\n+unsigned long dostime(y, n, d, h, m, s)\n+int y;                  /* year */\n+int n;                  /* month */\n+int d;                  /* day */\n+int h;                  /* hour */\n+int m;                  /* minute */\n+int s;                  /* second */\n+/* Convert the date y/n/d and time h:m:s to a four byte DOS date and\n+   time (date in high two bytes, time in low two bytes allowing magnitude\n+   comparison). */\n+{\n+  return y < 1980 ? dostime(1980, 1, 1, 0, 0, 0) :\n+    (((unsigned long)y - 1980) << 25) | ((unsigned long)n << 21) | \n+    ((unsigned long)d << 16) | ((unsigned long)h << 11) | \n+    ((unsigned long)m << 5) | ((unsigned long)s >> 1);\n+}\n+\n+\n+unsigned long unix2dostime(t)\n+time_t *t;             /* unix time to convert */\n+/* Return the Unix time t in DOS format, rounded up to the next two\n+   second boundary. */\n+{\n+  time_t t_even;\n+  struct tm *s;         /* result of localtime() */\n+\n+  t_even = (*t + 1) & (~1);     /* Round up to even seconds. */\n+  s = localtime(&t_even);       /* Use local time since MSDOS does. */\n+  return dostime(s->tm_year + 1900, s->tm_mon + 1, s->tm_mday,\n+                 s->tm_hour, s->tm_min, s->tm_sec);\n+}\n+"}, {"sha": "6f6931f4c214d5afec7fc5453836e10a0a9ebccd", "filename": "fastjar/dostime.h", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fdostime.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fdostime.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fdostime.h?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,22 @@\n+/*\n+  dostime.h - function prototypes\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+ */\n+\n+time_t dos2unixtime(unsigned long dostime);\n+unsigned long dostime(int, int, int, int, int, int);\n+unsigned long unix2dostime(time_t*);"}, {"sha": "d7c906e3a3617d68e94a9b9b747244c50be45a90", "filename": "fastjar/install-defs.sh", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Finstall-defs.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Finstall-defs.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Finstall-defs.sh?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,7 @@\n+CP=/bin/cp\n+STRIP=/usr/bin/strip\n+CHMOD=/bin/chmod\n+\n+prefix=/usr/local\n+exec_prefix=${prefix}\n+BINDIR=${exec_prefix}/bin"}, {"sha": "b90410c417fdefb30ef284a1e4b3cac39552553f", "filename": "fastjar/install-defs.sh.in", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Finstall-defs.sh.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Finstall-defs.sh.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Finstall-defs.sh.in?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,7 @@\n+CP=@CP@\n+STRIP=@STRIP@\n+CHMOD=@CHMOD@\n+\n+prefix=@prefix@\n+exec_prefix=@exec_prefix@\n+BINDIR=@bindir@"}, {"sha": "c719342656f21894b4e9ecbf5fddce7c56cb3943", "filename": "fastjar/install-sh", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Finstall-sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Finstall-sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Finstall-sh?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,8 @@\n+#! /bin/bash\n+\n+. install-defs.sh\n+\n+$CP fastjar ${BINDIR}\n+$STRIP ${BINDIR}/fastjar\n+$CHMOD 755 ${BINDIR}/fastjar\n+"}, {"sha": "342acd0ad349e2650b96776245020e4239f61ecb", "filename": "fastjar/jargrep.c", "status": "added", "additions": 663, "deletions": 0, "changes": 663, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjargrep.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjargrep.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fjargrep.c?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,663 @@\n+/*\n+  jargrep.c - main functions for jargrep utility\n+  Copyright (C) 1999 Bryan Burns\n+  Copyright (C) 2000 Cory Hollingsworth \n+ \n+  Parts of this program are base on Bryan Burns work with fastjar \n+  Copyright (C) 1999. \n+\n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+*/\n+\n+/* $Id: jargrep.c,v 1.8 2000/09/13 14:02:02 cory Exp $\n+\n+$Log: jargrep.c,v $\n+Revision 1.8  2000/09/13 14:02:02  cory\n+Reformatted some of the code to more closly match the layout of the orriginal\n+fastjar utility.\n+\n+Revision 1.7  2000/09/12 22:29:36  cory\n+Jargrep now seems to do what I want it to do.  Performs properly on Linux x86,\n+will test some other platforms later.\n+\n+\n+*/\n+\n+#include \"config.h\"\n+#include <stdio.h>\n+#include <unistd.h>\n+#include <regex.h>\n+#include <errno.h>\n+#include <string.h>\n+#include <sys/types.h>\n+#include <sys/stat.h>\n+#include <fcntl.h>\n+#include \"jargrep.h\"\n+#include \"jartool.h\"\n+#include \"pushback.h\"\n+#include \"zipfile.h\"\n+\n+char *Usage = { \"Usage: %s [-bcinsw] <-e regexp | regexp> file(s)\\n\" };\n+\n+extern char *optarg;\n+\n+/*\n+Function name: opt_valid\n+arg:\toptions\tBitfield flag that contains the command line options of grepjar.\n+purpose:\tTo guard agains the occurance of certain incompatible flags being used\n+together.\n+returns: TRUE if options are valid, FALSE otherwise.\n+*/\n+\n+int opt_valid(int options) {\n+\tint retflag;\n+\n+\tif((options & JG_PRINT_COUNT) && \n+\t\t(options & (JG_PRINT_BYTEOFFSET | JG_PRINT_LINE_NUMBER)))\n+\t{\n+\t\tretflag = FALSE;\n+\t}\n+\telse retflag = TRUE;\n+\n+\treturn retflag;\n+}\n+\n+/*\n+Function name: create_regexp\n+args:\tregstr\tString containing the uncompiled regular expression.  This may be the \n+\t\t\t\texpression as is passed in through argv.\n+\t\toptions\tThis is the flag containing the commandline options that have been\n+\t\t\t\tparsed by getopt.\n+purpose: Handle the exception handling involved with setting upt a new regular \n+expression.\n+returns: Newly allocated compile regular expression ready to be used in an regexec call.\n+*/\n+\n+regex_t *create_regexp(char *regstr, int options) {\n+\tregex_t *exp;\n+\tint exp_flags = 0;\n+\tint errcode;\n+\tint msgsize;\n+\tchar *errmsg;\n+\n+\tif(exp = (regex_t *) malloc(sizeof(regex_t)))\n+\t{\n+\t\tif(errcode = regcomp(exp, regstr, (options & JG_IGNORE_CASE) ? REG_ICASE : 0)) {\n+\t\t\tfprintf(stderr, \"regcomp of regex failed,\\n\");\n+\t\t\tif(errmsg = (char *) malloc(msgsize = regerror(errcode, exp, NULL, 0) + 1)) {\n+\t\t\t\tregerror(errcode, exp, errmsg, msgsize);\n+\t\t\t\tfprintf(stderr, \"Error: %s\\n\", errmsg);\n+\t\t\t\tfree(exp);\n+\t\t\t\tfree(errmsg);\n+\t\t\t\texit(1);\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\tfprintf(stderr, \"Malloc of errmsg failed.\\n\");\n+\t\t\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\t\t\tfree(exp);\n+\t\t\t\texit(1);\n+\t\t\t}\n+\t\t}\n+\t}\n+\telse {\n+\t\tfprintf(stderr, \"Malloc of regex failed,\\n\");\n+\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\texit(1);\n+\t}\n+\n+\treturn exp; \n+}\n+\n+/*\n+Function name: check_sig\n+args:\tscratch\tPointer to array of bytes containing signature.\n+\t\tpbf\t\tPointer to push back handle for jar file.\n+purpose: \tVerify that checksum is correct.\n+returns: 0, 1, or 2.  0 means we are ready to read embedded file information.  1 means\n+we have read beyound the embedded file list and can exit knowing we have read all the\n+relevent information.  2 means we still haven't reached embdedded file list and need to\n+do some more reading.\n+*/\n+int check_sig(ub1 *scratch, pb_file *pbfp) {\n+\tub4 signature;\n+\tint retflag = 0;\n+\n+\tsignature = UNPACK_UB4(scratch, 0);\n+\n+#ifdef DEBUG    \n+    printf(\"signature is %x\\n\", signature);\n+#endif\n+    if(signature == 0x08074b50){\n+#ifdef DEBUG    \n+      printf(\"skipping data descriptor\\n\");\n+#endif\n+      pb_read(pbfp, scratch, 12);\n+      retflag = 2;\n+    } else if(signature == 0x02014b50){\n+#ifdef DEBUG    \n+      printf(\"Central header reached.. we're all done!\\n\");\n+#endif\n+      retflag = 1;\n+    }else if(signature != 0x04034b50){\n+      printf(\"Ick! %#x\\n\", signature);\n+      retflag = 1;\n+    }\n+    \n+\treturn retflag;\n+}\n+\n+/*\n+Function name: decd_siz\n+args\tcsize\t\tPointer to embedded file's compressed size.\n+\t\tusize\t\tPointer to embedded file's uncmpressed size.\n+\t\tfnlen\t\tPointer to embedded file's file name length.\n+\t\telfen\t\tPointer to length of extra fields in jar file.\n+\t\tflags\t\tPointer to bitmapped flags.\n+\t\tmethod\t\tPointer to indicator of storage method of embedded file.\n+\t\tfile_header\tPointer to string containing the above values to be unbacked.\n+Purpose: Unpack the series of values from file_header.\n+*/\n+\n+void decd_siz(ub4 *csize, ub4 *usize, ub2 *fnlen, ub2 *eflen, ub2 *flags, ub2 *method, ub1 *file_header) {\n+    *csize = UNPACK_UB4(file_header, LOC_CSIZE);\n+#ifdef DEBUG    \n+    printf(\"Compressed size is %u\\n\", *csize);\n+#endif\n+\n+\t*usize = UNPACK_UB4(file_header, LOC_USIZE);\n+#ifdef DEBUG\n+\tprintf(\"Uncompressed size is %u\\n\", *usize);\n+#endif\n+\n+    *fnlen = UNPACK_UB2(file_header, LOC_FNLEN);\n+#ifdef DEBUG    \n+    printf(\"Filename length is %hu\\n\", *fnlen);\n+#endif\n+\n+    *eflen = UNPACK_UB2(file_header, LOC_EFLEN);\n+#ifdef DEBUG    \n+    printf(\"Extra field length is %hu\\n\", *eflen);\n+#endif\n+\n+    *flags = UNPACK_UB2(file_header, LOC_EXTRA);\n+#ifdef DEBUG    \n+    printf(\"Flags are %#hx\\n\", *flags);\n+#endif\n+\n+    *method = UNPACK_UB2(file_header, LOC_COMP);\n+#ifdef DEBUG\n+    printf(\"Compression method is %#hx\\n\", *method);\n+#endif\n+\n+}\n+\n+/*\n+Function name: new_filename\n+args:\tpbf\t\tPointer to push back file handle.  Used for reading input file.\n+\t\tlen\t\tLength of file name to be read.\n+purpose:\tRead in the embedded file name from jar file.\n+returns: Pointer to newly allocated string containing file name.\n+*/\n+\n+char *new_filename(pb_file *pbf, ub4 len) {\n+\tchar *filename;\n+\n+\tif(!(filename = (char *) malloc(len + 1))) {\n+\t\tfprintf(stderr, \"Malloc failed of filename\\n\");\n+\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t}\n+    pb_read(pbf, filename, len);\n+    filename[len] = '\\0';\n+\n+#ifdef DEBUG    \n+    printf(\"filename is %s\\n\", filename);\n+#endif\n+\n+\treturn filename;\n+}\n+\n+/*\n+Funtion name: read_string\n+args:\tpbf\t\tPointer to push back file handle.  Used for reading input file.\n+\t\tsize\tSize of embedded file in bytes.\n+purpose:\tCreate a string containing the contents of the embedded noncompressed file.\n+returns: Pointer to newly allocated string containing embedded file contents.\n+*/\n+\n+char *read_string(pb_file *pbf, int size) {\n+\tchar *page;\n+\t\n+\tif(page = (char *) malloc(size + 1)) {\n+\t\tpb_read(pbf, page, size);\n+\t\tpage[size] = '\\0';\n+\t}\n+\telse {\n+\t\tfprintf(stderr, \"Malloc of page buffer failed.\\n\");\n+\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\texit(1);\n+\t}\n+\n+\treturn page;\n+}\n+\n+/*\n+Function name: extract_line\n+args:\tstream\tString containing the full contents of a file which is to be substringed\n+\t\t\t\tin order to provide line representing our grep output.\n+\t\tbegin\tIndex into stream which regular expression first matches.\n+\t\tend\t\tIndex into stream which end of match to the regular expression.\n+\t\tb\t\tPointer to the index of what will be the beginning of the line when\n+\t\t\t\tstring is returned.  Used for -b option.\n+purpose:\tCreate a string that can be printed by jargrep from the long string stream.\n+The matching line that is printed out by jargrep is generated by this function.\n+returns: Pointer to newly allocated string containing matched expression.\n+*/\n+\n+char *extract_line(char *stream, regoff_t begin, regoff_t end, int *b) {\n+\tint e;\n+\tint length;\n+\tchar *retstr;\n+\n+\tfor(*b = begin; *b >= 0 && !iscntrl(stream[*b]); (*b)--);\n+\t(*b)++;\n+\tfor(e = end; stream[e] == '\\t' || !iscntrl(stream[e]); e++);\n+\tlength = e - *b;\n+\tif(retstr = (char *) malloc(length + 1)) {\n+\t\tsprintf(retstr, \"%d:\", *b);\n+\t\tstrncpy(retstr, &(stream[*b]), length);\n+\t\tretstr[length] = '\\0';\n+\t}\n+\telse {\n+\t\tfprintf(stderr, \"Malloc failed of output string.\\n\");\n+\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\texit(1);\n+\t}\n+\n+\treturn retstr;\n+}\n+\n+/*\n+Function name: chk_wrd\n+args:\texp\t\tPointer to compiled POSIX style regular expression of search target.\n+\t\tstr\t\tString known to contain at least one match of exp.\n+purpose: Verify that the occurance of the regular expression in str occurs as a whole\n+word and not a substring of another word.\n+returns: TRUE if it is a word, FALSE of it is a substring.\n+*/\n+\n+int chk_wrd(regex_t *exp, char *str) {\n+\tint wrd_fnd = FALSE;\n+\tint regflag;\n+\tint frnt_ok;\n+\tint bck_ok;\n+\tchar *str2;\n+\tregmatch_t match;\n+\n+\tstr2 = str;\n+\tfrnt_ok = bck_ok = FALSE;\n+\twhile(!wrd_fnd && !(regflag = regexec(exp, str2, 1, &match, 0))) {\n+\t\tif(!match.rm_so && (str2 == str)) frnt_ok = TRUE;\n+\t\telse if(!isalnum(str2[match.rm_so - 1]) && str2[match.rm_so - 1] != '_')\n+\t\t\tfrnt_ok = TRUE;\n+\t\telse frnt_ok = FALSE;\n+\t\tif(frnt_ok) {\n+\t\t\tif(str2[match.rm_eo] == '\\0') bck_ok = TRUE;\n+\t\t\telse if(!isalnum(str2[match.rm_eo]) && str2[match.rm_eo] != '_')\n+\t\t\t\tbck_ok = TRUE;\n+\t\t\telse bck_ok = FALSE;\n+\t\t}\n+\t\twrd_fnd = frnt_ok && bck_ok;\n+\t\tstr2 = &(str2[match.rm_eo]);\n+\t}\n+\n+\treturn wrd_fnd;\n+}\n+\n+/*\n+Function name: prnt_mtchs\n+args:\texp\t\t\tPointer to compiled POSIX style regular expression of search target.\n+\t\tfilename\tString containing the name of the embedded file which matches have\n+\t\t\t\t\tbeen found in.\n+\t\tstream\t\tString containing the processed contents of the embedded jar file\n+\t\t\t\t\trepresended with filename.\n+\t\tpmatch\t\tArray of regmatch_t matches into stream.\n+\t\tnl_offset\tArray of offsets of '\\n' characters in stream.  May be NULL if -n is\n+\t\t\t\t\tnot set on command line.\n+\t\tnum\t\t\tNumber of matches in pmatch array.\n+\t\tlines\t\tNumber of lines in file.  Not set if -n is not set on command line.\n+\t\toptions\t\tBitwise flag containing flags set to represent the command line \n+\t\t\t\t\toptions.\n+purpose:\tControl output of jargrep.  Output is controlled by which options have been\n+set at the command line.\n+*/\n+\n+void prnt_mtchs(regex_t *exp, char *filename, char *stream, regmatch_t *pmatch, regmatch_t *nl_offset, int num, int lines, int options) {\n+\tint i;\n+\tint j = 0;\n+\tint ln_cnt;\n+\tint begin;\n+\tint o_begin;\n+\tchar *str;\n+\n+\to_begin = -1;\n+\tln_cnt = 0;\n+\tfor(i = 0; i < num; i++) {\n+\t\tstr = extract_line(stream, pmatch[i].rm_so, pmatch[i].rm_eo, &begin);\n+\t\tif(begin > o_begin) {\n+\t\t\tif(!(options & JG_WORD_EXPRESSIONS) || chk_wrd(exp, str)) {\n+\t\t\t\tln_cnt++;\n+\t\t\t\tif(!(options & JG_PRINT_COUNT)) {\n+\t\t\t\t\tprintf(\"%s:\", filename);\n+\t\t\t\t\tif(options & JG_PRINT_LINE_NUMBER) {\n+\t\t\t\t\t\tfor(; j < lines && nl_offset[j].rm_so < begin; j++);\n+\t\t\t\t\t\tprintf(\"%d:\", j + 1);\n+\t\t\t\t\t}\n+\t\t\t\t\tif(options & JG_PRINT_BYTEOFFSET) printf(\"%d:\", begin);\n+\t\t\t\t\tprintf(\"%s\\n\", str);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\to_begin = begin;\n+\t\tfree(str);\n+\t}\n+\tif(options & JG_PRINT_COUNT) printf(\"%s:%d\\n\", filename, ln_cnt);\n+}\n+\n+/*\n+Function name: check_crc\n+args:\tpbf\t\tPointer to pushback file pointer for jar file.\n+\t\tstream\tString containing the non modified contents fo the extraced file entry.\n+\t\tusize\tSize of file in bytes.\n+purpose:\tVerify the CRC matches that as what is stored in the jar file.\n+*/\n+\n+void check_crc(pb_file *pbf, char *stream, ub4 usize) {\n+\tub4 crc;\n+\tub4 lcrc;\n+\tub1 scratch[16];\n+\n+\tcrc = crc32(crc, NULL, 0);\n+\tcrc = crc32(crc, stream, usize);\n+\tif(pb_read(pbf, scratch, 16) != 16) {\n+\t\tperror(\"read\");\n+        exit(1);\n+\t}\n+\tif(UNPACK_UB4(scratch, 0) != 0x08074b50) {\n+\t\tfprintf(stderr, \"Error! Missing data descriptor!\\n\");\n+\t\texit(1);\n+\t}\n+\tlcrc = UNPACK_UB4(scratch, 4);\n+\tif(crc != lcrc){\n+    \tfprintf(stderr, \"Error! CRCs do not match! Got %x, expected %x\\n\",\n+              crc, lcrc);\n+      \texit(1);\n+    }\n+}\n+\n+/*\n+Function name mk_ascii\n+args:\tstream\tString that contains the contents of the extraced file entry.\n+\t\tusize\tString size.\n+purpose:\tMake certain that the contents of the file are ASCII, not binary.  This\n+permits grepping of binary files as well by converting non ASCII and control characters\n+into '\\n'.\n+*/\n+\n+void mk_ascii(char *stream, int usize) {\n+\tint i;\n+\n+\tfor(i = 0; i < usize; i++) \n+\t\tif(stream[i] != '\\t' && (iscntrl(stream[i]) || (unsigned char) stream[i] >= 128))\n+\t\t\tstream[i] = '\\n';\n+}\n+\n+/*\n+Funtion name: fnd_match\n+args:\texp\t\t\tPointer to compiled POSIX style regular expression of search target.\n+\t\tstr_stream\tString that contains the contents of the extracted file entry.\n+\t\ti\t\t\tPointer to counter and index of matches.\n+purpose:\tSearch str_stream for occurances of the regular expression exp and create\n+an array of matches.\n+returns:  Pointer to newly allocated array of regmatch_t which gives indexes to start\n+and end of matches.  NULL is returned upon no matches found.\n+*/\n+\n+regmatch_t *fnd_match(regex_t *exp, char *str_stream, int *i) {\n+\tint regflag;\n+\tregmatch_t match;\n+\tregmatch_t *match_array;\n+\tregmatch_t *tmp;\n+\n+\tmatch_array = NULL;\n+\tfor(*i = 0, regflag = regexec(exp, str_stream, 1, &match, 0); !regflag; \n+\t\tregflag = regexec(exp, &(str_stream[match.rm_eo]), 1, &match, 0), (*i)++)\n+\t{\n+\t\tif(tmp = (regmatch_t *) \n+\t\t\trealloc(match_array, sizeof(regmatch_t) * ((*i) + 1))) \n+\t\t{\n+\t\t\tmatch_array = tmp;\n+\t\t\tif(*i) {\n+\t\t\t\tmatch.rm_so += match_array[(*i) - 1].rm_eo;\n+\t\t\t\tmatch.rm_eo += match_array[(*i) - 1].rm_eo;\n+\t\t\t}\n+\t\t\tmatch_array[*i] = match;\n+\t\t}\n+\t\telse {\n+\t\t\tfprintf(stderr, \"Realloc of match_array failed.\\n\");\n+\t\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\t\texit(1);\n+\t\t}\n+\t} \n+\n+\treturn match_array;\n+}\n+\n+/*\n+Function name: cont_grep\n+args:\texp\t\tPointer to compiled POSIX style regular expression of search target.\n+\t\tnl_exp\tPointer to compiled POSIX style regular expression of newlines.  This\n+\t\t\t\targument is NULL unless the -n option is used on the command line.\n+\t\tfd\t\tFile descriptor of the jar file being grepped.\n+\t\tpbf\t\tPointer to pushback file style file stream.  This is for use with\n+\t\t\t\tthe pushback.c file io funtions.\n+\t\toptions\tBitwise flag containing flags set to represent the command line options.\n+purpose:\tThis function handles single entries in an open jar file.  The header is\n+read and then the embeded file is extracted and grepped.\n+returns: FALSE upon failure, TRUE otherwise.\n+*/\n+\n+int cont_grep(regex_t *exp, regex_t *nl_exp, int fd, char *jarfile, pb_file *pbf, int options) {\n+\tint retflag = TRUE;\n+\tint i;\n+\tint j;\n+\tub4 csize;\n+\tub4 usize;\n+\tub2 fnlen;\n+\tub2 eflen;\n+\tub2 flags;\n+\tub2 method;\n+\tub1 file_header[30];\n+\tchar *filename;\n+\tchar *str_stream;\n+\tregmatch_t *match_array;\n+\tregmatch_t *nl_offsets;\n+\n+\tif(pb_read(pbf, (file_header + 4), 26) != 26) {\n+\t\tperror(\"read\");\n+\t\tretflag = FALSE;\n+   \t}\n+\telse {\n+\t\tdecd_siz(&csize, &usize, &fnlen, &eflen, &flags, &method, file_header);\n+\t\tfilename = new_filename(pbf, fnlen);\n+\t\tlseek(fd, eflen, SEEK_CUR);\n+\t\tif(filename[fnlen - 1] != '/') {\n+\t\t\tstr_stream = (method == 8 || (flags & 0x0008)) ? \n+\t\t\t\t(char *) inflate_string(pbf, &csize, &usize) : \n+\t\t\t\t\tread_string(pbf, csize);\n+\t\t\tif(flags & 0x008) check_crc(pbf, str_stream, usize);\n+\t\t\tmk_ascii(str_stream, usize);\n+\t\t\tmatch_array = fnd_match(exp, str_stream, &i);\n+\t\t\tif((options & JG_PRINT_LINE_NUMBER) && i) \n+\t\t\t\tnl_offsets = fnd_match(nl_exp, str_stream, &j);\n+\t\t\tprnt_mtchs(exp, filename, str_stream, match_array, nl_offsets, i, j, options);\n+\t\t\tif(match_array) free(match_array);\n+\t\t\tfree(str_stream);\n+\t\t}\n+\t\tfree(filename);\n+\t\tretflag = TRUE;\n+\t}\n+\n+\treturn retflag;\n+}\n+\n+/*\n+Funtion name: jargrep\n+args:\texp\t\tPointer to compiled POSIX style regular expression of search target.\n+\t\tnl_exp\tPointer to compiled regular expression for newlines or NULL.  Only set \n+\t\t\t\tif -n option is present at command line.\n+\t\tjarfile\tFilename of jar file to be searched.\n+\t\toptions\tBitwise flag containing flags set to represent the command line options.\n+purpose:\tOpen jar file.  Check signatures.  When right signature is found go to deeper\n+grep routine.\n+*/\n+\n+void jargrep(regex_t *exp, regex_t *nl_exp, char *jarfile, int options) {\n+\tint fd;\n+\tint floop = TRUE;\n+\tpb_file pbf;\n+\tub1 scratch[16];\n+\n+\tif((fd = open(jarfile, O_RDONLY)) == -1) {\n+\t\tif(!(options & JG_SUPRESS_ERROR))\n+\t\t\tfprintf(stderr, \"Error reading file '%s': %s\\n\", jarfile, strerror(errno));\n+\t}\n+\telse {\n+\t\tpb_init(&pbf, fd);\t\n+\t\t\n+\t\tdo {\n+\t\t\tif(pb_read(&pbf, scratch, 4) != 4) {\n+\t\t\t\tperror(\"read\");\n+\t\t\t\tfloop = FALSE;\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\tswitch (check_sig(scratch, &pbf)) {\n+\t\t\t\tcase 0:\n+\t\t\t\t\tfloop = cont_grep(exp, nl_exp, fd, jarfile, &pbf, options);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase 1:\n+\t\t\t\t\tfloop = FALSE;\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase 2:\n+\t\t\t\t\t/* fall through continue */\n+\t\t\t\t}\n+\t\t\t}\n+\t\t} while(floop);\n+\t}\n+}\n+\n+/*\n+Funtion Name: main\n+args:\targc\tnumber of in coming args.\n+\t\targv\tarray of strings.\n+purpose: Entry point of the program.  Parse command line arguments and set options.\n+Set up regular expressions.  Call grep routines for each file as input.\n+returns: 1 on error 0 on success.\n+*/\n+\n+int main(int argc, char **argv) {\n+\tint c;\n+\tint retval = 0;\n+\tint fileindex;\n+\tint options = 0;\n+\tregex_t *regexp;\n+\tregex_t *nl_exp = NULL;\n+\tchar *regexpstr = NULL;\n+\n+\twhile((c = getopt(argc, argv, \"bce:insVw\")) != -1) {\n+\t\tswitch(c) {\n+\t\t\tcase 'b':\n+\t\t\t\toptions |= JG_PRINT_BYTEOFFSET;\n+\t\t\t\tbreak;\n+\t\t\tcase 'c':\n+\t\t\t\toptions |= JG_PRINT_COUNT;\n+\t\t\t\tbreak;\n+\t\t\tcase 'e':\n+\t\t\t\tif(!(regexpstr = (char *) malloc(strlen(optarg) + 1))) {\n+\t\t\t\t\tfprintf(stderr, \"Malloc failure.\\n\");\n+\t\t\t\t\tfprintf(stderr, \"Error: %s\\n\", strerror(errno));\n+\t\t\t\t\texit(1);\n+\t\t\t\t}\n+\t\t\t\tstrcpy(regexpstr, optarg);\n+\t\t\t\tbreak;\n+\t\t\tcase 'i':\n+\t\t\t\toptions |= JG_IGNORE_CASE;\n+\t\t\t\tbreak;\n+\t\t\tcase 'n':\n+\t\t\t\toptions |= JG_PRINT_LINE_NUMBER;\n+\t\t\t\tbreak;\n+\t\t\tcase 's':\n+\t\t\t\toptions |= JG_SUPRESS_ERROR;\n+\t\t\t\tbreak;\n+\t\t\tcase 'v':\n+\t\t\t\toptions |= JG_INVERT;\n+\t\t\t\tbreak;\n+\t\t\tcase 'V':\n+\t\t\t\tprintf(\"%s\\n\", GVERSION);\n+\t\t\t\texit(0);\n+\t\t\tcase 'w':\n+\t\t\t\toptions |= JG_WORD_EXPRESSIONS;\n+\t\t\t\tbreak;\n+\t\t\tdefault:\n+\t\t\t\tfprintf(stderr, \"Unknown option -%c\\n\", c);\n+\t\t\t\tfprintf(stderr, Usage, argv[0]);\n+\t\t\t\texit(1);\n+\t\t}\n+\t}\n+\tif(!regexpstr){\n+\t\tif(((argc - optind) >= 2)) {\n+\t\t\tregexpstr = argv[optind];\n+\t\t\tfileindex = optind + 1;\n+\t\t}\n+\t\telse {\n+\t\t\tfprintf(stderr, \"Invalid arguments.\\n\");\n+\t\t\tfprintf(stderr, Usage, argv[0]);\n+\t\t\texit(1);\n+\t\t}\n+\t}\n+\telse if((argc - optind) == 1) {\n+\t\tfileindex = optind;\n+\t}\n+\telse {\n+\t\tfprintf(stderr, \"Invalid arguments.\\n\");\n+\t\tfprintf(stderr, Usage, argv[0]);\n+\t\texit(1);\n+\t}\n+\n+\tif(opt_valid(options)) {\n+\t\tregexp = create_regexp(regexpstr, options);\n+\t\tif(options & JG_PRINT_LINE_NUMBER) nl_exp = create_regexp(\"\\n\", 0);\n+\t\tinit_inflation();\n+\t\tfor(; fileindex < argc; fileindex++)\n+\t\t\tjargrep(regexp, nl_exp, argv[fileindex], options);\n+\t\tregfree(regexp);\n+\t\tif(options & JG_PRINT_LINE_NUMBER) regfree(nl_exp);\n+\t}\n+\telse {\n+\t\tretval = 1;\n+\t\tfprintf(stderr, \"Error: Invalid combination of options.\\n\");\n+\t}\n+\n+\treturn retval;\n+}"}, {"sha": "0fd786b86197b8e387e557fdb41e503ea01178db", "filename": "fastjar/jargrep.h", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjargrep.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjargrep.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fjargrep.h?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,31 @@\n+/*\n+  jargrep.h - header file for jargrep utility\n+  Copyright (C) 2000 Cory Hollingsworth\n+\n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+\n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+\n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+*/\n+\n+/*$Id: jargrep.h,v 1.3 2000/09/13 14:02:02 cory Exp $\n+*/\n+\n+#define JG_PRINT_BYTEOFFSET\t\t0x00000001\n+#define JG_PRINT_COUNT\t\t\t0x00000002\n+#define JG_IGNORE_CASE\t\t\t0x00000004\n+#define JG_PRINT_LINE_NUMBER\t0x00000008\n+#define JG_SUPRESS_ERROR\t\t0x00000010\n+#define JG_INVERT\t\t\t\t0x00000020\n+#define JG_WORD_EXPRESSIONS\t\t0x00000040\n+\n+#define GVERSION \"jargrep version 0.1 (09/12/2000)\""}, {"sha": "402d09ba901010d7f4f4b9eb105f3a5a65712fe7", "filename": "fastjar/jartool.c", "status": "added", "additions": 1757, "deletions": 0, "changes": 1757, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjartool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjartool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fjartool.c?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,1757 @@\n+/*\n+  jartool.c - main functions for fastjar utility\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+*/\n+\n+/* $Id: jartool.c,v 1.5 2000/08/24 15:01:27 cory Exp $\n+\n+   $Log: jartool.c,v $\n+   Revision 1.5  2000/08/24 15:01:27  cory\n+   Made certain that fastjar opened the jar file before trying to update it\n+   with the -u option.\n+\n+   Revision 1.4  2000/08/24 13:39:21  cory\n+   Changed +'s to |'s in jartool.c to insure there was no confusion with sign\n+   when byte swapping.  Better safe than sorry.\n+\n+   Revision 1.3  2000/08/23 19:42:17  cory\n+   Added support for more Unix platforms.  The following code has been hacked\n+   to work on AIX, Solaris, True 64, and HP-UX.\n+   Added bigendian check.  Probably works on most big and little endian platforms\n+   now.\n+\n+   Revision 1.2  1999/12/06 07:38:28  toast\n+   fixed recursive archiving bug\n+\n+   Revision 1.1.1.1  1999/12/06 03:09:34  toast\n+   initial checkin..\n+\n+\n+\n+   Revision 1.22  1999/10/12 19:45:13  burnsbr\n+   adding patch to fix compat problem\n+\n+   Revision 1.21  1999/05/10 09:15:49  burnsbr\n+   fixed manifest file version info\n+\n+   Revision 1.20  1999/05/10 08:53:16  burnsbr\n+   *** empty log message ***\n+\n+   Revision 1.19  1999/05/10 08:30:39  burnsbr\n+   added extract / listing code\n+\n+   Revision 1.18  1999/04/28 04:24:29  burnsbr\n+   updated version\n+\n+   Revision 1.17  1999/04/28 04:21:23  burnsbr\n+   added support for -C dir-changing flag.. Updated total compression display\n+\n+   Revision 1.16  1999/04/27 10:28:22  burnsbr\n+   updated version string\n+\n+   Revision 1.15  1999/04/27 10:04:06  burnsbr\n+   configure support\n+\n+   Revision 1.14  1999/04/27 08:56:14  burnsbr\n+   added -V flag, better error messages\n+\n+   Revision 1.13  1999/04/26 02:35:21  burnsbr\n+   changed all sorts of stuff.. compression now works 100%\n+\n+   Revision 1.12  1999/04/23 12:00:45  burnsbr\n+   90% done with compression code\n+\n+   Revision 1.11  1999/04/22 04:12:57  burnsbr\n+   finished first round of Manifest file support..\n+   might need to do more, digest etc..\n+\n+   Revision 1.10  1999/04/22 02:35:23  burnsbr\n+   added more manifest support, about 75% done now.  Replaced all the\n+   redundant shifts and bit-logic with a macro or two, making the code\n+   easier to read.\n+\n+   Revision 1.9  1999/04/21 09:55:16  burnsbr\n+   pulled out printfs\n+\n+   Revision 1.8  1999/04/21 02:58:01  burnsbr\n+   started manifest code\n+\n+   Revision 1.7  1999/04/20 23:15:28  burnsbr\n+   added patch sent by John Bley <jbb6@acpub.duke.edu>\n+\n+   Revision 1.6  1999/04/20 08:56:02  burnsbr\n+   added GPL comment\n+\n+   Revision 1.5  1999/04/20 08:16:09  burnsbr\n+   fixed verbose flag, did some optimization\n+\n+   Revision 1.4  1999/04/20 05:09:59  burnsbr\n+   added rcsid variable\n+\n+   Revision 1.3  1999/04/20 05:08:54  burnsbr\n+   fixed Log statement\n+\n+*/\n+\n+#include \"config.h\"\n+\n+#include <zlib.h>\n+\n+#ifdef STDC_HEADERS\n+#include <stdlib.h>\n+#endif\n+\n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+\n+#include <stdio.h>\n+#include <sys/stat.h>\n+#include <sys/types.h>\n+\n+#ifdef HAVE_SYS_PARAM_H\n+#include <sys/param.h>\n+#else\n+#define MAXPATHLEN 1024\n+#endif\n+\n+#ifdef HAVE_DIRENT_H\n+#include <dirent.h>\n+#endif\n+\n+#ifdef HAVE_FCNTL_H\n+#include <fcntl.h>\n+#endif\n+\n+#include <string.h>\n+#include <errno.h>\n+\n+#ifdef TM_IN_SYS_TIME\n+#include <sys/time.h>\n+#else\n+#include <time.h>\n+#endif\n+\n+#include \"jartool.h\"\n+#include \"zipfile.h\"\n+#include \"dostime.h\"\n+#include \"pushback.h\"\n+#include \"compress.h\"\n+\n+#ifdef WORDS_BIGENDIAN\n+\n+#define L2BI(l) ((l & 0xff000000) >> 24) | \\\n+\t\t((l & 0x00ff0000) >> 8)  | \\\n+\t\t((l & 0x0000ff00) << 8)  | \\\n+\t\t((l & 0x000000ff) << 24);\n+\n+#define L2BS(l) ((l & 0xff00) >> 8) | ((l & 0x00ff) << 8);\n+\n+#endif\n+\n+static char version_string[] = VERSION;\n+static char rcsid[] = \"$Id: jartool.c,v 1.5 2000/08/24 15:01:27 cory Exp $\";\n+\n+extern int errno;\n+\n+void usage(char*);\n+void add_entry(struct zipentry *);\n+void init_headers();\n+\n+int consume(pb_file *, int);\n+int list_jar(int, char**, int);\n+int extract_jar(int, char**, int);\n+int add_file_to_jar(int, int, char*, struct stat*);\n+int add_to_jar(int, char*, char*);\n+int create_central_header(int);\n+int make_manifest(int, char*);\n+static void init_args(char **, int);\n+static char *get_next_arg ();\n+\n+/* global variables */\n+ub1 file_header[30];\n+ub1 data_descriptor[16];\n+int do_compress;\n+int seekable;\n+int verbose;\n+char jarfile[256];\n+\n+/* If non zero, then don't recurse in directory. Instead, add the\n+   directory entry and relie on an explicit list of files to populate\n+   the archive. This option isn't supported by the original jar tool. */\n+int use_explicit_list_only;\n+\n+/* If non zero, then read the entry names from stdin. This option\n+   isn't supported by the original jar tool. */\n+int read_names_from_stdin;\n+\n+zipentry *ziplist; /* linked list of entries */\n+zipentry *ziptail; /* tail of the linked list */\n+\n+int number_of_entries; /* number of entries in the linked list */\n+\n+int main(int argc, char **argv){\n+\n+  char mfile[256];\n+  \n+  int action = ACTION_NONE;\n+  int manifest = TRUE;\n+  int manifest_file = FALSE;\n+  int file = FALSE;\n+  int file_first = FALSE;\n+  \n+  int i, j;\n+  int jarfd = -1;\n+  \n+  do_compress = TRUE;\n+  verbose = FALSE;\n+  \n+  ziplist = NULL;\n+  \n+  number_of_entries = 0;\n+  \n+  if(argc < 2)\n+    usage(argv[0]);\n+  \n+  j = strlen(argv[1]);\n+  \n+  for(i = 0; i < j; i++){\n+    switch(argv[1][i]){\n+    case 'c':\n+      action = ACTION_CREATE;\n+      break;\n+    case 't':\n+      action = ACTION_LIST;\n+      break;\n+    case 'x':\n+      action = ACTION_EXTRACT;\n+      break;\n+    case 'u':\n+      action = ACTION_UPDATE;\n+      break;\n+    case 'v':\n+      verbose = TRUE;\n+      break;\n+    case 'V':\n+      printf(\"%s\\n\", version_string);\n+      exit(0);\n+    case 'f':\n+      file = TRUE;\n+      if(!manifest_file)\n+        file_first = TRUE;\n+      else\n+        file_first = FALSE;\n+      break;\n+    case 'm':\n+      manifest_file = TRUE;\n+      break;\n+    case '0':\n+      do_compress = FALSE;\n+      break;\n+    case 'M':\n+      manifest = FALSE;\n+      break;\n+    case '-':\n+      break;\n+    /* The following options aren't supported by the original jar tool. */\n+    case 'E':\n+      use_explicit_list_only = TRUE;\n+      break;\n+    case '@':\n+      read_names_from_stdin = TRUE;\n+      break;\n+    default:\n+      fprintf(stderr, \"Illegal option: %c\\n\", argv[1][i]);\n+      usage(argv[0]);\n+    }\n+  }\n+\n+  if(action == ACTION_NONE){\n+    fprintf(stderr, \"One of options -{ctxu} must be specified.\\n\");\n+    usage(argv[0]);\n+  }\n+\n+  /* Verify unsupported combinations and warn of the use of non\n+     standard features */\n+  if(verbose && use_explicit_list_only)\n+    fprintf (stderr, \"Warning: using non standard '-E' option\\n\");\n+  if(verbose && read_names_from_stdin)\n+    fprintf (stderr, \"Warning: using non standard '-@' option\\n\");\n+  if(read_names_from_stdin\n+      && (action != ACTION_CREATE && action != ACTION_UPDATE)){\n+      fprintf(stderr, \"Option '-@' is supported only with '-c' or '-u'.\\n\");\n+      usage(argv[0]);\n+  }\n+\n+  i = 2;\n+\n+  /* get the jarfile and manifest file (if any) */\n+  if(file && file_first){\n+    if(i >= argc)\n+      usage(argv[0]);\n+\n+    strncpy(jarfile, argv[i++], 256);\n+  }\n+  if(manifest_file){\n+    if(i >= argc)\n+      usage(argv[0]);\n+\n+    strncpy(mfile, argv[i++], 256);\n+  }\n+\n+  if(file && !file_first){\n+    if(i >= argc)\n+      usage(argv[0]);\n+\n+    strncpy(jarfile, argv[i++], 256);\n+  }\n+\n+  /* create the jarfile */\n+  if(action == ACTION_CREATE){\n+    if(file){\n+      jarfd = creat(jarfile, S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH);\n+      \n+      if(jarfd < 0){\n+        fprintf(stderr, \"Error opening %s for writing!\\n\", jarfile);\n+        perror(jarfile);\n+        exit(1);\n+      }\n+      \n+      /* We assume that the file is seekable */\n+      seekable = TRUE;\n+      \n+    } else {\n+      \n+      jarfd = STDOUT_FILENO;  /* jarfd is stdout otherwise */\n+      \n+      /* standard out is not seekable */\n+      seekable = FALSE;\n+      \n+      /* don't want our output to be part of the jar file.. figured this one\n+         out the hard way.. =P */\n+      verbose = FALSE;\n+    }\n+  } else if(action == ACTION_LIST || action == ACTION_EXTRACT){\n+\n+    if(file){\n+      jarfd = open(jarfile, O_RDONLY);\n+\n+      if(jarfd < 0){\n+        fprintf(stderr, \"Error opening %s for reading!\\n\", jarfile);\n+        perror(jarfile);\n+        exit(1);\n+      }\n+\n+      seekable = TRUE;\n+    } else {\n+      jarfd = STDIN_FILENO; /* jarfd is standard in */\n+\n+      /* we assume that the stream isn't seekable for safety */\n+      seekable = FALSE;\n+    }\n+  }\n+\n+  if(action == ACTION_CREATE || action == ACTION_UPDATE){\n+    char *arg;\n+    init_headers();\n+\n+   if((action == ACTION_UPDATE) && file) {\n+      if((jarfd = open(jarfile, O_RDWR)) < 0) {\n+\tfprintf(stderr, \"Error opening %s for reading!\\n\", jarfile);\n+        perror(jarfile);\n+        exit(1);\n+      }\n+    }\n+\n+    if(do_compress)\n+      init_compression();\n+  \n+\n+    /* Add the META-INF/ directory and the manifest */\n+    if(manifest && manifest_file)\n+      make_manifest(jarfd, mfile);\n+    else if(manifest)\n+      make_manifest(jarfd, NULL);\n+    \n+    init_args (argv, i);\n+    /* now we add the files to the archive */\n+    while ((arg = get_next_arg ())){\n+\n+      if(!strcmp(arg, \"-C\")){\n+\tchar *dir_to_change = get_next_arg ();\n+\tchar *file_to_add = get_next_arg ();\n+        if(!dir_to_change \n+\t   || !file_to_add\n+\t   || add_to_jar(jarfd, dir_to_change, file_to_add)){\n+          printf(\"Error adding %s to jar archive!\\n\", arg);\n+          exit(1);\n+        }\n+      } else {\n+        if(add_to_jar(jarfd, NULL, arg)){\n+          printf(\"Error adding %s to jar archive!\\n\", arg);\n+          exit(1);\n+        }\n+      }\n+    }\n+    /* de-initialize the compression DS */\n+    if(do_compress)\n+      end_compression();\n+    \n+    create_central_header(jarfd);\n+    \n+    if (close(jarfd) != 0) {\n+      fprintf(stderr, \"Error closing jar archive!\\n\");\n+    }\n+  } else if(action == ACTION_LIST){\n+    list_jar(jarfd, &argv[i], (argc - i));\n+  } else if(action == ACTION_EXTRACT){\n+    extract_jar(jarfd, &argv[i], (argc - i));\n+  }\n+  \n+  exit(0);\n+}\n+\n+static int args_current_g;\n+static char **args_g;\n+\n+static void \n+init_args(args, current)\n+     char **args;\n+     int current;\n+{\n+  if(!read_names_from_stdin)\n+    {\n+      args_g = args;\n+      args_current_g = current;\n+    }\n+}\n+\n+static char *\n+get_next_arg ()\n+{\n+  static int reached_end = 0;\n+\n+  if (reached_end)\n+    return NULL;\n+\n+  if (args_g)\n+    {\n+      if (!args_g [args_current_g])\n+\t{\n+\t  reached_end = 1;\n+\t  return NULL;\n+\t}\n+      return args_g [args_current_g++];\n+    }\n+  else\n+    {\n+      /* Read the name from stdin. Delimiters are '\\n' and\n+\t '\\r'. Reading EOF indicates that we don't have anymore file\n+\t names characters to read. */\n+\n+      char s [MAXPATHLEN];\n+      int  pos = 0;\n+\n+      /* Get rid of '\\n' and '\\r' first. */\n+      while (1)\n+\t{\n+\t  int c = getc (stdin);\n+\t  if (c == '\\n' || c == '\\r')\n+\t    continue;\n+\t  else\n+\t    {\n+\t      if (c == EOF)\n+\t\treturn NULL;\n+\t      ungetc (c, stdin);\n+\t      break;\n+\t    }\n+\t}\n+\n+      while (1)\n+\t{\n+\t  int c = getc (stdin);\n+\t  /* Exit when we get a delimiter or don't have any characters\n+             to read */\n+\t  if (c == '\\n'|| c == '\\r'|| c == EOF)\n+\t    break;\n+\t  s [pos++] = (char) c;\n+\t}\n+\n+      if (pos)\n+\t{\n+\t  s [pos] = '\\0';\n+\t  return strdup (s);\n+\t}\n+      else\n+\treturn NULL;\n+    }\n+}\n+\n+void init_headers(){\n+  /* packing file header */\n+  /* magic number */\n+  file_header[0] = 0x50;\n+  file_header[1] = 0x4b;\n+  file_header[2] = 0x03;\n+  file_header[3] = 0x04;\n+  /* version number (Unix 1.0)*/\n+  file_header[4] = 10;\n+  file_header[5] = 0;\n+  /* bit flag (normal deflation)*/\n+  file_header[6] = 0x00;\n+\n+  file_header[7] = 0x00;\n+  /* do_compression method (deflation) */\n+  file_header[8] = 0;\n+  file_header[9] = 0;\n+\n+  /* last mod file time (MS-DOS format) */\n+  file_header[10] = 0;\n+  file_header[11] = 0;\n+  /* last mod file date (MS-DOS format) */\n+  file_header[12] = 0;\n+  file_header[13] = 0;\n+  /* CRC 32 */\n+  file_header[14] = 0;\n+  file_header[15] = 0;\n+  file_header[16] = 0;\n+  file_header[17] = 0;\n+  /* compressed size */\n+  file_header[18] = 0;\n+  file_header[19] = 0;\n+  file_header[20] = 0;\n+  file_header[21] = 0;\n+  /* uncompressed size */\n+  file_header[22] = 0;\n+  file_header[23] = 0;\n+  file_header[24] = 0;\n+  file_header[25] = 0;\n+  /* filename length */\n+  file_header[26] = 0;\n+  file_header[27] = 0;\n+  /* extra field length */\n+  file_header[28] = 0;\n+  file_header[29] = 0;\n+\n+  /* Initialize the compression DS */\n+  PACK_UB4(data_descriptor, 0, 0x08074b50);\n+  \n+}\n+\n+void add_entry(struct zipentry *ze){\n+\n+  if(ziplist == NULL){\n+    ziplist = ze;\n+    ziptail = ziplist;\n+  } else {\n+    ziplist->next_entry = ze;\n+    ziplist = ze;\n+  }\n+  \n+  number_of_entries++;\n+}\n+\n+int make_manifest(int jfd, char *mf_name){\n+  time_t current_time;\n+  int nlen;   /* length of file name */\n+  int mod_time; /* file modification time */\n+  struct zipentry *ze;\n+  \n+  nlen = 9;  /* trust me on this one */\n+\n+  memset((file_header + 12), '\\0', 16); /*clear mod time, crc, size fields*/\n+  \n+  current_time = time(NULL);\n+  if(current_time == (time_t)-1){\n+    perror(\"time\");\n+    exit(1);\n+  }\n+\n+  mod_time = unix2dostime(&current_time);\n+  \n+  PACK_UB2(file_header, LOC_EXTRA, 0);\n+  PACK_UB2(file_header, LOC_COMP, 0);\n+  PACK_UB2(file_header, LOC_FNLEN, nlen);\n+  PACK_UB4(file_header, LOC_MODTIME, mod_time);\n+  \n+  if(verbose)\n+    printf(\"adding: META-INF/ (in=0) (out=0) (stored 0%%)\\n\");\n+  \n+  ze = (zipentry*)malloc(sizeof(zipentry));\n+  if(ze == NULL){\n+    perror(\"malloc\");\n+    exit(1);\n+  }\n+  \n+  memset(ze, 0, sizeof(zipentry)); /* clear all the fields*/\n+  ze->filename = (char*)malloc((nlen + 1) * sizeof(char) + 1);\n+  strcpy(ze->filename, \"META-INF/\");\n+  ze->filename[nlen] = '\\0';\n+    \n+  ze->offset = lseek(jfd, 0, SEEK_CUR);\n+  ze->mod_time = (ub2)(mod_time & 0x0000ffff);\n+  ze->mod_date = (ub2)((mod_time & 0xffff0000) >> 16);\n+  ze->compressed = FALSE;\n+\n+  add_entry(ze);\n+  \n+  write(jfd, file_header, 30);\n+  write(jfd, \"META-INF/\", nlen);\n+\n+  /* if the user didn't specify an external manifest file... */\n+  if(mf_name == NULL){\n+    int mf_len = 37 + strlen(VERSION);\n+    char *mf;\n+\n+    if(mf = (char *) malloc(mf_len + 1)) {\n+    uLong crc;\n+\n+    sprintf(mf, \"Manifest-Version: 1.0\\nCreated-By: %s\\n\\n\", VERSION);\n+\n+    crc = crc32(0L, Z_NULL, 0);\n+    \n+    crc = crc32(crc, mf, mf_len);\n+\n+    nlen = 20;  /* once again, trust me */\n+\n+    PACK_UB2(file_header, LOC_EXTRA, 0);\n+    PACK_UB2(file_header, LOC_COMP, 0);\n+    PACK_UB2(file_header, LOC_FNLEN, nlen);\n+    PACK_UB4(file_header, LOC_USIZE, mf_len);\n+    \n+    memcpy((file_header + LOC_CSIZE), (file_header + LOC_USIZE), 4);\n+    \n+    PACK_UB4(file_header, LOC_CRC, crc);\n+\n+    if(verbose)\n+      printf(\"adding: META-INF/MANIFEST.MF (in=56) (out=56) (stored 0%%)\\n\");\n+    \n+    ze = (zipentry*)malloc(sizeof(zipentry));\n+    if(ze == NULL){\n+      perror(\"malloc\");\n+      exit(1);\n+    }\n+    \n+    memset(ze, 0, sizeof(zipentry)); /* clear all the fields*/\n+    ze->filename = (char*)malloc((nlen + 1) * sizeof(char) + 1);\n+    strcpy(ze->filename, \"META-INF/MANIFEST.MF\");\n+    ze->filename[nlen] = '\\0';\n+    \n+    ze->offset = lseek(jfd, 0, SEEK_CUR);\n+    ze->mod_time = (ub2)(mod_time & 0x0000ffff);\n+    ze->mod_date = (ub2)((mod_time & 0xffff0000) >> 16);\n+    ze->crc = crc;\n+    ze->csize = mf_len;\n+    ze->usize = ze->csize;\n+    ze->compressed = FALSE;\n+    \n+    add_entry(ze);\n+    \n+    write(jfd, file_header, 30);\n+    write(jfd, \"META-INF/MANIFEST.MF\", nlen);\n+    write(jfd, mf, mf_len);\n+    free(mf);\n+    }\n+    else {\n+\tprintf(\"malloc errror\\n\");\n+\texit(-1);\n+    }\n+  } else {\n+    int mfd;\n+    struct stat statbuf;\n+\n+    stat(mf_name, &statbuf);\n+\n+    if(!S_ISREG(statbuf.st_mode)){\n+      fprintf(stderr, \"Invalid manifest file specified.\\n\");\n+      exit(1);\n+    }\n+  \n+    mfd = open(mf_name, O_RDONLY);\n+\n+    if(mfd < 0){\n+      fprintf(stderr, \"Error opening %s.\\n\", mf_name);\n+      exit(1);\n+    }\n+\n+    if(add_file_to_jar(jfd, mfd, \"META-INF/MANIFEST.MF\", &statbuf)){\n+      perror(\"error writing to jar\");\n+      exit(1);\n+    }\n+\n+  }\n+\n+  return 0;\n+}\n+\n+int add_to_jar(int fd, char *new_dir, char *file){\n+  struct stat statbuf;\n+  DIR *dir;\n+  struct dirent *de;\n+  zipentry *ze;\n+  int stat_return;\n+  char *old_dir = NULL;\n+  \n+  /* This is a quick compatibility fix -- Simon Weijgers <simon@weijgers.com> \n+   * It fixes this:\n+   *   \"normal\" jar : org/apache/java/io/LogRecord.class\n+   *   fastjar      : ./org/apache/java/io/LogRecord.class\n+   * Fastjar's preservation of the ./'s makes the jarfile unusuable for use \n+   * with both kaffe-1.0b4 and JDK.\n+   */\n+  while (*file=='.' && *(file+1)=='/')\n+    file+=2;\n+  \n+  /* If new_dir isn't null, we need to change to that directory.  However,\n+     we also need to return to the old directory when we're done */\n+  if(new_dir != NULL){\n+    old_dir = getcwd(NULL, 0);\n+\n+    if(chdir(new_dir) == -1){\n+      perror(new_dir);\n+      return 1;\n+    }\n+  }\n+\n+  if(!strcmp(file, jarfile)){\n+    if(verbose)\n+      printf(\"skipping: %s\\n\", file);\n+    return 0;  /* we don't want to add ourselves.. */\n+  }\n+\n+  stat_return = stat(file, &statbuf);\n+  \n+  if(stat_return == -1){\n+    perror(file);\n+  } else if(S_ISDIR(statbuf.st_mode)){\n+    char *fullname;\n+    char *t_ptr;\n+    int nlen;\n+    unsigned long mod_time;\n+\n+    dir = opendir(file);\n+    \n+    if(dir == NULL){\n+      perror(\"opendir\");\n+      return 1;\n+    }\n+    \n+    nlen = strlen(file) + 256;\n+    fullname = (char*)malloc(nlen * sizeof(char));\n+    memset(fullname, 0, (nlen * sizeof(char)));\n+    \n+    if(fullname == NULL){\n+      fprintf(stderr, \"Filename is NULL!\\n\");\n+      return 1;\n+    }\n+\n+    strcpy(fullname, file);\n+    nlen = strlen(file);\n+\n+    if(fullname[nlen - 1] != '/'){\n+      fullname[nlen] = '/';\n+      t_ptr = (fullname + nlen + 1);\n+    } else\n+      t_ptr = (fullname + nlen);\n+\n+\n+    memset((file_header + 12), '\\0', 16); /*clear mod time, crc, size fields*/\n+    \n+    nlen = (t_ptr - fullname);\n+\n+    mod_time = unix2dostime(&statbuf.st_mtime);\n+\n+    PACK_UB2(file_header, LOC_EXTRA, 0);\n+    PACK_UB2(file_header, LOC_COMP, 0);\n+    PACK_UB2(file_header, LOC_FNLEN, nlen);\n+    PACK_UB4(file_header, LOC_MODTIME, mod_time);\n+\n+    if(verbose)\n+      printf(\"adding: %s (in=%d) (out=%d) (stored 0%%)\\n\", fullname, 0, 0);\n+\n+    ze = (zipentry*)malloc(sizeof(zipentry));\n+    if(ze == NULL){\n+      perror(\"malloc\");\n+      exit(1);\n+    }\n+\n+    memset(ze, 0, sizeof(zipentry)); /* clear all the fields*/\n+    ze->filename = (char*)malloc((nlen + 1) * sizeof(char) + 1);\n+    strcpy(ze->filename, fullname);\n+    ze->filename[nlen] = '\\0';\n+    \n+    ze->offset = lseek(fd, 0, SEEK_CUR);\n+    ze->mod_time = (ub2)(mod_time & 0x0000ffff);\n+    ze->mod_date = (ub2)((mod_time & 0xffff0000) >> 16);\n+    ze->compressed = FALSE;\n+\n+    add_entry(ze);\n+\n+    write(fd, file_header, 30);\n+    write(fd, fullname, nlen);\n+\n+    while(!use_explicit_list_only && (de = readdir(dir)) != NULL){\n+      if(de->d_name[0] == '.')\n+        continue;\n+      if(!strcmp(de->d_name, jarfile)){ /* we don't want to add ourselves.  Believe me */\n+        if(verbose)\n+          printf(\"skipping: %s\\n\", de->d_name);\n+        continue;\n+      }\n+\n+      strcpy(t_ptr, de->d_name);\n+\n+      if(add_to_jar(fd, NULL, fullname)){\n+        fprintf(stderr, \"Error adding file to jar!\\n\");\n+        return 1;\n+      }\n+    }\n+\n+    free(fullname);\n+    closedir(dir);\n+      \n+  } else if(S_ISREG(statbuf.st_mode)){\n+    int add_fd;\n+\n+    add_fd = open(file, O_RDONLY);\n+    if(add_fd < 0){\n+      fprintf(stderr, \"Error opening %s.\\n\", file);\n+      return 0;\n+    }\n+    \n+    if(add_file_to_jar(fd, add_fd, file, &statbuf)){\n+      fprintf(stderr, \"Error adding file to jar!\\n\");\n+      return 1;\n+    }\n+    \n+  } else {\n+    fprintf(stderr, \"Illegal file specified: %s\\n\", file);\n+  }\n+  \n+  if(old_dir != NULL){\n+    if(chdir(old_dir))\n+      perror(old_dir);\n+    \n+    free(old_dir);\n+  }\n+\n+  return 0;\n+}\n+\n+int add_file_to_jar(int jfd, int ffd, char *fname, struct stat *statbuf){\n+\n+  unsigned short file_name_length;\n+  unsigned long mod_time;\n+  ub1 rd_buff[RDSZ];\n+  uLong crc = 0;\n+  off_t offset = 0;\n+  int rdamt;\n+  struct zipentry *ze;\n+\n+  mod_time = unix2dostime(&(statbuf->st_mtime));\n+  file_name_length = strlen(fname);\n+\n+  if(!seekable && !do_compress){\n+    crc = crc32(0L, Z_NULL, 0); \n+    \n+    while((rdamt = read(ffd, rd_buff, RDSZ)) != 0) \n+      crc = crc32(crc, rd_buff, rdamt); \n+    \n+    lseek(ffd, 0, SEEK_SET);\n+  }\n+  \n+  /* data descriptor */\n+  if(!seekable && do_compress){\n+    PACK_UB2(file_header, LOC_EXTRA, 8);\n+  } else {\n+    PACK_UB2(file_header, LOC_EXTRA, 0);\n+  }\n+  \n+  if(do_compress){\n+    PACK_UB2(file_header, LOC_COMP, 8);\n+  } else {\n+    PACK_UB2(file_header, LOC_COMP, 0);\n+  }\n+    \n+  PACK_UB4(file_header, LOC_MODTIME, mod_time);\n+  PACK_UB2(file_header, LOC_FNLEN, file_name_length);\n+  \n+  if(!seekable && !do_compress){\n+    PACK_UB4(file_header, LOC_CRC, crc);\n+    PACK_UB4(file_header, LOC_USIZE, statbuf->st_size); \n+    PACK_UB4(file_header, LOC_CSIZE, statbuf->st_size);\n+  } else \n+    memset((file_header + LOC_CRC), '\\0', 12); /* clear crc/usize/csize */\n+  \n+  ze = (zipentry*)malloc(sizeof(zipentry));\n+  if(ze == NULL){\n+    perror(\"malloc\");\n+    exit(1);\n+  }\n+  \n+  memset(ze, 0, sizeof(zipentry)); /* clear all the fields*/\n+  ze->filename = (char*)malloc((file_name_length + 1) * sizeof(char));\n+  strcpy(ze->filename, fname);\n+\n+  ze->mod_time = (ub2)(mod_time & 0x0000ffff);\n+  ze->mod_date = (ub2)((mod_time & 0xffff0000) >> 16);\n+\n+  if(!seekable && !do_compress)\n+    ze->crc = crc;\n+\n+  ze->csize = statbuf->st_size;\n+  ze->usize = ze->csize;\n+  ze->offset = lseek(jfd, 0, SEEK_CUR);\n+  if(do_compress)\n+    ze->compressed = TRUE;\n+  else\n+    ze->compressed = FALSE;\n+  \n+  add_entry(ze);\n+  \n+  /* Write the local header */\n+  write(jfd, file_header, 30);\n+    \n+  /* write the file name to the zip file */\n+  write(jfd, fname, file_name_length);\n+\n+\n+  if(verbose){\n+    printf(\"adding: %s \", fname);\n+    fflush(stdout);\n+  }\n+ \n+  if(do_compress){\n+    /* compress the file */\n+    compress_file(ffd, jfd, ze);\n+  } else {\n+    /* Write the contents of the file (uncompressed) to the zip file */\n+    /* calculate the CRC as we go along */\n+    ze->crc = crc32(0L, Z_NULL, 0); \n+      \n+    while((rdamt = read(ffd, rd_buff, RDSZ)) != 0){\n+      ze->crc = crc32(ze->crc, rd_buff, rdamt);\n+      if(write(jfd, rd_buff, rdamt) != rdamt){\n+        perror(\"write\");\n+        return 0;\n+      }\n+    }\n+  }\n+  close(ffd);\n+  \n+  /* write out data descriptor */\n+  PACK_UB4(data_descriptor, 4, ze->crc);\n+  PACK_UB4(data_descriptor, 8, ze->csize);\n+  PACK_UB4(data_descriptor, 12, ze->usize);\n+\n+  /* we need to seek back and fill the header */\n+  if(seekable){\n+    offset = (ze->csize + strlen(ze->filename) + 16);\n+    \n+    if(lseek(jfd, -offset, SEEK_CUR) == (off_t)-1){\n+      perror(\"lseek\");\n+      exit(1);\n+    }\n+\n+    if(write(jfd, (data_descriptor + 4), 12) != 12){\n+      perror(\"write\");\n+      return 0;\n+    }\n+    \n+    offset -= 12;\n+\n+    if(lseek(jfd, offset, SEEK_CUR) == (off_t)-1){\n+      perror(\"lseek\");\n+      exit(1);\n+    }\n+  } else if(do_compress){\n+    /* Sun's jar tool will only allow a data descriptor if the entry is\n+       compressed, but we'll save 16 bytes/entry if we only use it when\n+       we can't seek back on the file */\n+    \n+    if(write(jfd, data_descriptor, 16) != 16){\n+      perror(\"write\");\n+      return 0;\n+    }\n+  }\n+  \n+  if(verbose)\n+    printf(\"(in=%d) (out=%d) (%s %d%%)\\n\", \n+           (int)ze->usize, (int)ze->csize,\n+           (do_compress ? \"deflated\" : \"stored\"),\n+           (do_compress ? ((int)((1 - ze->csize/(float)ze->usize) * 100)) : 0));\n+\n+  return 0;\n+}\n+\n+int create_central_header(int fd){\n+  ub1 header[46];\n+  ub1 end_header[22];\n+  int start_offset;\n+  int dir_size;\n+  int *iheader;\n+  int total_in = 0, total_out = 22;\n+\n+  zipentry *ze;\n+\n+  iheader = (int*)header;\n+\n+  /* magic number */\n+  header[0] = 'P';\n+  header[1] = 'K';\n+  header[2] = 1;\n+  header[3] = 2;\n+  /* version made by */\n+  header[4] = 10;\n+  header[5] = 0;\n+  /* version needed to extract */\n+  header[6] = 10;\n+  header[7] = 0;\n+  /* bit flag */\n+  header[8] = 0;\n+  header[9] = 0;\n+  /* compression method */\n+  header[10] = 0;\n+  header[11] = 0;\n+  /* file mod time */\n+  header[12] = 0;\n+  header[13] = 0;\n+  /* file mod date */\n+  header[14] = 0;\n+  header[15] = 0;\n+  /* crc 32 */\n+  header[16] = 0;\n+  header[17] = 0;\n+  header[18] = 0;\n+  header[19] = 0;\n+  /* compressed size */\n+  header[20] = 0;\n+  header[21] = 0;\n+  header[22] = 0;\n+  header[23] = 0;\n+  /* uncompressed size */\n+  header[24] = 0;\n+  header[25] = 0;\n+  header[26] = 0;\n+  header[27] = 0;\n+  /* filename length */\n+  header[28] = 0;\n+  header[29] = 0;\n+  /* extra field length */\n+  header[30] = 0;\n+  header[31] = 0;\n+  /* file comment length */\n+  header[32] = 0;\n+  header[33] = 0;\n+  /* disk number start */\n+  header[34] = 0;\n+  header[35] = 0;\n+  /* internal file attribs */\n+  header[36] = 0;\n+  header[37] = 0;\n+  /* external file attribs */\n+  header[38] = 0;\n+  header[39] = 0;\n+  header[40] = 0;\n+  header[41] = 0;\n+  /* relative offset of local header */\n+  header[42] = 0;\n+  header[43] = 0;\n+  header[44] = 0;\n+  header[45] = 0;\n+\n+  start_offset = lseek(fd, 0, SEEK_CUR);\n+\n+  for(ze = ziptail; ze != NULL; ze = ze->next_entry){\n+\n+    total_in += ze->usize;\n+    total_out += ze->csize + 76 + strlen(ze->filename) * 2;\n+\n+    if(ze->compressed){\n+      PACK_UB2(header, CEN_COMP, 8);\n+    } else {\n+      PACK_UB2(header, CEN_COMP, 0);\n+    }\n+        \n+    PACK_UB2(header, CEN_MODTIME, ze->mod_time);\n+    PACK_UB2(header, CEN_MODDATE, ze->mod_date);\n+    PACK_UB4(header, CEN_CRC, ze->crc);\n+    PACK_UB4(header, CEN_CSIZE, ze->csize);\n+    PACK_UB4(header, CEN_USIZE, ze->usize);\n+    PACK_UB2(header, CEN_FNLEN, strlen(ze->filename));\n+    PACK_UB4(header, CEN_OFFSET, ze->offset);\n+\n+    write(fd, header, 46);\n+\n+    write(fd, ze->filename, strlen(ze->filename));\n+  }\n+\n+  dir_size = lseek(fd, 0, SEEK_CUR) - start_offset;\n+\n+  /* magic number */\n+  end_header[0] = 0x50;\n+  end_header[1] = 0x4b;\n+  end_header[2] = 0x05;\n+  end_header[3] = 0x06;\n+  /* number of this disk */\n+  end_header[4] = 0;\n+  end_header[5] = 0;\n+  /* number of disk w/ start of central header */\n+  end_header[6] = 0;\n+  end_header[7] = 0;\n+  /* total number of entries in central dir on this disk*/\n+  PACK_UB2(end_header, 8, number_of_entries);\n+  /* total number of entries in central dir*/\n+  PACK_UB2(end_header, 10, number_of_entries);\n+  /* size of central dir. */\n+  PACK_UB4(end_header, 12, dir_size);\n+  /* offset of start of central dir */\n+  PACK_UB4(end_header, 16, start_offset);\n+  /* zipfile comment length */\n+  end_header[20] = 0;\n+  end_header[21] = 0;\n+\n+  write(fd, end_header, 22);\n+  \n+  if(verbose)\n+    printf(\"Total:\\n------\\n(in = %d) (out = %d) (%s %d%%)\\n\", \n+           total_in, \n+           total_out,\n+           (do_compress ? \"deflated\" : \"stored\"),\n+           (int)((1 - (total_out / (float)total_in)) * 100)\n+           );\n+\n+  return 0;\n+}\n+\n+int extract_jar(int fd, char **files, int file_num){\n+  int rdamt;\n+  int out_a, in_a;\n+  ub4 signature;\n+  ub4 csize;\n+  ub4 crc;\n+  ub2 fnlen;\n+  ub2 eflen;\n+  ub2 flags;\n+  ub2 method;\n+  ub1 *filename = NULL;\n+  int filename_len = 0;\n+  ub4 rd_buff[RDSZ];\n+  pb_file pbf;\n+  ub1 scratch[16];\n+  zipentry ze;\n+  int f_fd;\n+  int dir;\n+  int handle;\n+  int j;\n+\n+  init_inflation();\n+\n+  pb_init(&pbf, fd);\n+\n+  for(;;){\n+    f_fd = 0;\n+    crc = 0;\n+    ze.crc = 0;\n+    \n+    dir = FALSE; /* by default, the file isn't a dir */\n+    handle = TRUE; /* by default we'll extract/create the file */\n+\n+    if((rdamt = pb_read(&pbf, scratch, 4)) != 4){\n+      perror(\"read\");\n+      break;\n+    }\n+    \n+    signature = UNPACK_UB4(scratch, 0);\n+\n+#ifdef DEBUG    \n+    printf(\"signature is %x\\n\", signature);\n+#endif\n+    if(signature == 0x08074b50){\n+#ifdef DEBUG    \n+      printf(\"skipping data descriptor\\n\");\n+#endif\n+      pb_read(&pbf, scratch, 12);\n+      continue;\n+    } else if(signature == 0x02014b50){\n+#ifdef DEBUG    \n+      printf(\"Central header reached.. we're all done!\\n\");\n+#endif\n+      break;\n+    }else if(signature != 0x04034b50){\n+      printf(\"Ick! %#x\\n\", signature);\n+      break;\n+    }\n+    \n+    if((rdamt = pb_read(&pbf, (file_header + 4), 26)) != 26){\n+      perror(\"read\");\n+      break;\n+    }\n+    \n+    csize = UNPACK_UB4(file_header, LOC_CSIZE);\n+#ifdef DEBUG    \n+    printf(\"Compressed size is %u\\n\", csize);\n+#endif\n+\n+    fnlen = UNPACK_UB2(file_header, LOC_FNLEN);\n+#ifdef DEBUG    \n+    printf(\"Filename length is %hu\\n\", fnlen);\n+#endif\n+\n+    eflen = UNPACK_UB2(file_header, LOC_EFLEN);\n+#ifdef DEBUG    \n+    printf(\"Extra field length is %hu\\n\", eflen);\n+#endif\n+\n+    flags = UNPACK_UB2(file_header, LOC_EXTRA);\n+#ifdef DEBUG    \n+    printf(\"Flags are %#hx\\n\", flags);\n+#endif\n+\n+    method = UNPACK_UB2(file_header, LOC_COMP);\n+#ifdef DEBUG\n+    printf(\"Compression method is %#hx\\n\", method);\n+#endif\n+\n+    /* if there isn't a data descriptor */\n+    if(!(flags & 0x0008)){\n+      crc = UNPACK_UB4(file_header, LOC_CRC);\n+#ifdef DEBUG    \n+      printf(\"CRC is %x\\n\", crc);\n+#endif\n+    }\n+\n+    if(filename_len < fnlen){\n+      if(filename != NULL)\n+        free(filename);\n+      \n+      filename = malloc(sizeof(ub1) * (fnlen + 1));\n+      filename_len = fnlen + 1;\n+    }\n+\n+    pb_read(&pbf, filename, fnlen);\n+    filename[fnlen] = '\\0';\n+\n+#ifdef DEBUG    \n+    printf(\"filename is %s\\n\", filename);\n+#endif\n+\n+    if(file_num > 0){\n+      handle = FALSE;\n+      \n+      for(j = 0; j < file_num; j++)\n+        if(strcmp(files[j], filename) == 0){\n+          handle = TRUE;\n+          break;\n+        }\n+    }\n+\n+    if(!handle)\n+      f_fd = -1;\n+\n+    /* OK, there is some directory information in the file.  Nothing to do\n+       but ensure the directory(s) exist, and create them if they don't.\n+       What a pain! */\n+    if(index(filename, '/') != NULL && handle){\n+      /* Loop through all the directories in the path, (everything w/ a '/') */\n+      ub1 *start = filename;\n+      char *tmp_buff;\n+      struct stat sbuf;\n+\n+      tmp_buff = malloc(sizeof(char) * strlen(filename));\n+\n+      for(;;){\n+        ub1 *idx = index(start, '/');\n+\n+        if(idx == NULL)\n+          break;\n+        else if(idx == start){\n+          start++;\n+          continue;\n+        }\n+        start = idx + 1;\n+\n+        strncpy(tmp_buff, filename, (idx - filename));\n+        tmp_buff[(idx - filename)] = '\\0';\n+\n+#ifdef DEBUG    \n+        printf(\"checking the existance of %s\\n\", tmp_buff);\n+#endif\n+\n+        if(stat(tmp_buff, &sbuf) < 0){\n+          if(errno != ENOENT){\n+            perror(\"stat\");\n+            exit(1);\n+          }\n+\n+        } else if(S_ISDIR(sbuf.st_mode)){\n+#ifdef DEBUG    \n+          printf(\"Directory exists\\n\");\n+#endif\n+          continue;\n+        }else {\n+          fprintf(stderr, \"Hmmm.. %s exists but isn't a directory!\\n\",\n+                  tmp_buff);\n+          exit(1);\n+        }\n+        \n+#ifdef DEBUG    \n+        printf(\"Making directory..\\n\");\n+#endif\n+        if(mkdir(tmp_buff, 0755) < 0){\n+          perror(\"mkdir\");\n+          exit(1);\n+        }\n+        if(verbose && handle)\n+          printf(\"%10s: %s/\\n\", \"created\", tmp_buff);\n+\n+      }\n+\n+      /* only a directory */\n+      if(strlen(start) == 0)\n+        dir = TRUE;\n+\n+#ifdef DEBUG    \n+      printf(\"Leftovers are \\\"%s\\\" (%d)\\n\", start, strlen(start));\n+#endif\n+\n+      /* If the entry was just a directory, don't write to file, etc */\n+      if(strlen(start) == 0)\n+        f_fd = -1;\n+\n+      free(tmp_buff);\n+    }\n+\n+    if(f_fd != -1 && handle){\n+      f_fd = creat(filename, 00644);\n+\n+      if(f_fd < 0){\n+        fprintf(stderr, \"Error extracting JAR archive!\\n\");\n+        perror(filename);\n+        exit(1);\n+      }\n+    }\n+\n+    if(method != 8 && flags & 0x0008){\n+      fprintf(stderr, \"Error in JAR file! (not compressed but data desc.)\\n\");\n+      exit(1);\n+    }\n+\n+    if(method == 8 || flags & 0x0008){\n+      if(seekable)\n+        lseek(fd, eflen, SEEK_CUR);\n+      else\n+        consume(&pbf, eflen);\n+      \n+      inflate_file(&pbf, f_fd, &ze);\n+    } else {\n+\n+#ifdef DEBUG    \n+      printf(\"writing stored data.. (%d bytes)\\n\", csize);\n+#endif\n+\n+      out_a = 0;\n+      in_a = csize;\n+\n+      ze.crc = crc32(ze.crc, NULL, 0); /* initialize the crc */\n+\n+      while(out_a < csize){\n+        rdamt = (in_a > RDSZ ? RDSZ : in_a);\n+        if(pb_read(&pbf, rd_buff, rdamt) != rdamt){\n+          perror(\"read\");\n+          exit(1);\n+        }\n+        \n+        ze.crc = crc32(ze.crc, (Bytef*)rd_buff, rdamt);\n+\n+        if(f_fd >= 0)\n+          write(f_fd, rd_buff, rdamt);\n+\n+        out_a += rdamt;\n+        in_a -= rdamt;\n+\n+#ifdef DEBUG    \n+        printf(\"%d bytes written\\n\", out_a);\n+#endif\n+      }\n+\n+      if(seekable)\n+        lseek(fd, eflen, SEEK_CUR);\n+      else\n+        consume(&pbf, eflen);\n+    }\n+\n+    /* if there is a data descriptor left, compare the CRC */\n+    if(flags & 0x0008){\n+\n+      if(pb_read(&pbf, scratch, 16) != 16){\n+        perror(\"read\");\n+        exit(1);\n+      }\n+\n+      signature = UNPACK_UB4(scratch, 0);\n+\n+      if(signature != 0x08074b50){\n+        fprintf(stderr, \"Error! Missing data descriptor!\\n\");\n+        exit(1);\n+      }\n+\n+      crc = UNPACK_UB4(scratch, 4);\n+\n+    }\n+\n+    if(crc != ze.crc){\n+      fprintf(stderr, \"Error! CRCs do not match! Got %x, expected %x\\n\",\n+              ze.crc, crc);\n+      exit(1);\n+    }\n+\n+    close(f_fd);\n+\n+    if(verbose && dir == FALSE && handle)\n+      printf(\"%10s: %s\\n\",\n+             (method == 8 ? \"inflated\" : \"extracted\"),\n+             filename);\n+  }\n+\n+  return 0;\n+}\n+\n+int list_jar(int fd, char **files, int file_num){\n+  int rdamt;\n+  ub4 signature;\n+  ub4 csize;\n+  ub4 usize;\n+  ub4 mdate;\n+  ub4 tmp;\n+  ub2 fnlen;\n+  ub2 eflen;\n+  ub2 clen;\n+  ub2 flags;\n+  ub2 method;\n+  ub2 cen_size;\n+  ub1 *filename = NULL;\n+  ub1 scratch[16];\n+  ub1 cen_header[46];\n+  int filename_len = 0;\n+  off_t size;\n+  int i, j;\n+  time_t tdate;\n+  struct tm *s_tm;\n+  char ascii_date[30];\n+  zipentry ze;\n+\n+#ifdef DEBUG\n+  printf(\"Listing jar file, looking for %d files\\n\", file_num);\n+#endif\n+\n+  /* This should be the start of the central-header-end section */\n+  if(seekable){\n+    if(lseek(fd, -22, SEEK_END) == (off_t)-1){\n+      perror(\"lseek\");\n+      exit(1);\n+    }\n+    \n+    if(read(fd, &tmp, sizeof(ub4)) != 4){\n+      perror(\"read\");\n+      exit(1);\n+    }\n+\n+#ifdef WORDS_BIGENDIAN\n+    tmp = L2BI(tmp);\n+#endif\n+\n+    if(tmp != 0x06054b50){\n+      fprintf(stderr, \"Error in JAR file format. zip-style comment?\\n\");\n+      exit(1);\n+    }\n+\n+    if(lseek(fd, 6, SEEK_CUR) == (off_t)-1){\n+      perror(\"lseek\");\n+      exit(1);\n+    }\n+  \n+    if(read(fd, &cen_size, 2) != 2){\n+      perror(\"read\");\n+      exit(1);\n+    }\n+\n+#ifdef WORDS_BIGENDIAN\n+    cen_size = L2BS(cen_size);\n+#endif\n+\n+    /*   printf(\"%hu entries in central header\\n\", cen_size); */\n+\n+    if(lseek(fd, 4, SEEK_CUR) == (off_t)-1){\n+      perror(\"lseek\");\n+      exit(1);\n+    }\n+\n+    if(read(fd, &tmp, 4) != 4){\n+      perror(\"read\");\n+      exit(1);\n+    }\n+\n+#ifdef WORDS_BIGENDIAN\n+    tmp = L2BI(tmp);\n+#endif\n+\n+    /*   printf(\"Central header offset = %d\\n\", tmp); */\n+\n+    if(lseek(fd, tmp, SEEK_SET) != tmp){\n+      perror(\"lseek\");\n+      exit(1);\n+    }\n+\n+    /* Loop through the entries in the central header */\n+    for(i = 0; i < cen_size; i++){\n+    \n+      if(read(fd, &cen_header, 46) != 46){\n+        perror(\"read\");\n+        exit(1);\n+      }\n+\n+      signature = UNPACK_UB4(cen_header, 0);\n+      if(signature != 0x02014b50){\n+        fprintf(stderr, \"Error in JAR file! Cannot locate central header!\\n\");\n+        exit(1);\n+      }\n+\n+      usize = UNPACK_UB4(cen_header, CEN_USIZE);\n+      fnlen = UNPACK_UB2(cen_header, CEN_FNLEN);\n+      eflen = UNPACK_UB2(cen_header, CEN_EFLEN);\n+      clen = UNPACK_UB2(cen_header, CEN_COMLEN);\n+\n+      /* If we're providing verbose output, we need to make an ASCII\n+       * formatted version of the date. */\n+      if(verbose){\n+        mdate = UNPACK_UB4(cen_header, CEN_MODTIME);\n+        tdate = dos2unixtime(mdate);\n+        s_tm = localtime(&tdate);\n+        strftime(ascii_date, 30, \"%a %b %d %H:%M:%S %Z %Y\", s_tm);\n+      }\n+\n+      if(filename_len < fnlen){\n+        if(filename != NULL)\n+          free(filename);\n+      \n+        filename = malloc(sizeof(ub1) * (fnlen + 1));\n+        filename_len = fnlen + 1;\n+      }\n+    \n+      if(read(fd, filename, fnlen) != fnlen){\n+        perror(\"read\");\n+        exit(1);\n+      }\n+      filename[fnlen] = '\\0';\n+    \n+      /* if the user specified a list of files on the command line,\n+         we'll only display those, otherwise we'll display everything */\n+      if(file_num > 0){\n+        for(j = 0; j < file_num; j++)\n+          if(strcmp(files[j], filename) == 0){\n+            if(verbose)\n+              printf(\"%6d %s %s\\n\", usize, ascii_date, filename);\n+            else\n+              printf(\"%s\\n\", filename);\n+            break;\n+          }\n+      } else {\n+        if(verbose)\n+          printf(\"%6d %s %s\\n\", usize, ascii_date, filename);\n+        else\n+          printf(\"%s\\n\", filename);\n+      }            \n+      \n+      size = eflen + clen;\n+      if(size > 0){\n+        if(lseek(fd, size, SEEK_CUR) == (off_t)-1){\n+          perror(\"lseek\");\n+          exit(1);\n+        }\n+      }\n+    }\n+  } else {\n+    /* the file isn't seekable.. evil! */\n+    pb_file pbf;\n+\n+    pb_init(&pbf, fd);\n+\n+    init_inflation();\n+\n+    for(;;){\n+      if((rdamt = pb_read(&pbf, scratch, 4)) != 4){\n+        perror(\"read\");\n+        break;\n+      }\n+      \n+      signature = UNPACK_UB4(scratch, 0);\n+      \n+#ifdef DEBUG\n+      printf(\"signature is %x\\n\", signature);\n+#endif\n+      \n+      if(signature == 0x08074b50){\n+#ifdef DEBUG\n+        printf(\"skipping data descriptor\\n\");\n+#endif\n+        pb_read(&pbf, scratch, 12);\n+        continue;\n+      } else if(signature == 0x02014b50){\n+#ifdef DEBUG\n+        printf(\"Central header reached.. we're all done!\\n\");\n+#endif\n+        break;\n+      }else if(signature != 0x04034b50){\n+#ifdef DEBUG\n+        printf(\"Ick! %#x\\n\", signature);\n+#endif\n+        break;\n+      }\n+      \n+      if((rdamt = pb_read(&pbf, (file_header + 4), 26)) != 26){\n+        perror(\"read\");\n+        break;\n+      }\n+      \n+      csize = UNPACK_UB4(file_header, LOC_CSIZE);\n+#ifdef DEBUG\n+      printf(\"Compressed size is %u\\n\", csize);\n+#endif\n+      \n+      fnlen = UNPACK_UB2(file_header, LOC_FNLEN);\n+#ifdef DEBUG\n+      printf(\"Filename length is %hu\\n\", fnlen);\n+#endif\n+      \n+      eflen = UNPACK_UB2(file_header, LOC_EFLEN);\n+#ifdef DEBUG\n+      printf(\"Extra field length is %hu\\n\", eflen);\n+#endif\n+      \n+      method = UNPACK_UB2(file_header, LOC_COMP);\n+#ifdef DEBUG\n+      printf(\"Compression method is %#hx\\n\", method);\n+#endif\n+\n+      flags = UNPACK_UB2(file_header, LOC_EXTRA);\n+#ifdef DEBUG\n+      printf(\"Flags are %#hx\\n\", flags);\n+#endif\n+      \n+      usize = UNPACK_UB4(file_header, LOC_USIZE);\n+\n+      /* If we're providing verbose output, we need to make an ASCII\n+       * formatted version of the date. */\n+      if(verbose){\n+        mdate = UNPACK_UB4(file_header, LOC_MODTIME);\n+        tdate = dos2unixtime(mdate);\n+        s_tm = localtime(&tdate);\n+        strftime(ascii_date, 30, \"%a %b %d %H:%M:%S %Z %Y\", s_tm);\n+      }\n+\n+      if(filename_len < fnlen){\n+        if(filename != NULL)\n+          free(filename);\n+        \n+        filename = malloc(sizeof(ub1) * (fnlen + 1));\n+        filename_len = fnlen + 1;\n+      }\n+      \n+      pb_read(&pbf, filename, fnlen);\n+      filename[fnlen] = '\\0';\n+      \n+      /* the header is at the end.  In a JAR file, this means that the data\n+         happens to be compressed.  We have no choice but to inflate the\n+         data */\n+      if(flags & 0x0008){\n+\n+        size = eflen;\n+\n+        if(size > 0)\n+          consume(&pbf, size);\n+        \n+        if(method == 8){\n+#ifdef DEBUG\n+          printf(\"inflating %s\\n\", filename);\n+#endif\n+          inflate_file(&pbf, -1, &ze);\n+\n+          usize = ze.usize;\n+        } else \n+          printf(\"We're shit outta luck!\\n\");\n+          \n+      } else {\n+        size = csize + (eflen > 0 ? eflen : 0);\n+        \n+\n+#ifdef DEBUG\n+        printf(\"Skipping %d bytes\\n\", size);\n+#endif\n+\n+        consume(&pbf, size);\n+      }\n+      /* print out the listing */\n+      if(file_num > 0){\n+        for(j = 0; j < file_num; j++)\n+          if(strcmp(files[j], filename) == 0){\n+            if(verbose)\n+              printf(\"%6d %s %s\\n\", usize, ascii_date, filename);\n+            else\n+              printf(\"%s\\n\", filename);\n+            break;\n+          }\n+      } else {\n+        if(verbose)\n+          printf(\"%6d %s %s\\n\", usize, ascii_date, filename);\n+        else\n+          printf(\"%s\\n\", filename);\n+      }        \n+    }\n+  }\n+  return 0;\n+}\n+\n+int consume(pb_file *pbf, int amt){\n+  int tc = 0; /* total amount consumed */\n+  ub1 buff[RDSZ];\n+  int rdamt;\n+\n+#ifdef DEBUG\n+  printf(\"Consuming %d bytes\\n\", amt);\n+#endif\n+\n+  while(tc < amt){\n+    rdamt = pb_read(pbf, buff, ((amt - tc) < RDSZ ? (amt - tc) : RDSZ));\n+#ifdef DEBUG\n+    printf(\"got %d bytes\\n\", rdamt);\n+#endif\n+    tc += rdamt;\n+  }\n+\n+#ifdef DEBUG\n+  printf(\"%d bytes consumed\\n\", tc);\n+#endif\n+\n+  return 0;\n+}\n+\n+void usage(char *filename){\n+  fprintf(stderr, \"Usage: %s {ctxuV}[vfm0ME@] [jar-file] [manifest-file] [-C dir] files ...\\nOptions\\n -c  create new archive\\n -t  list table of contents for archive\\n -x  extract named (or all) files from archive\\n -u  update existing archive\\n -V  display version information\\n -v  generate verbose output on standard output\\n -f  specify archive file name\\n -m  include manifest information from specified manifest file\\n -0  store only; use no ZIP compression\\n -M  Do not create a manifest file for the entries\\n -C  change to the specified directory and include the following file\\n -E  don't include the files found in a directory\\n -@  Read names from stdin\\nIf any file is a directory then it is processed recursively.\\nThe manifest file name and the archive file name needs to be specified\\nin the same order the 'm' and 'f' flags are specified.\\n\\nExample 1: to archive two class files into an archive called classes.jar: \\n     jar cvf classes.jar Foo.class Bar.class \\nExample 2: use an existing manifest file 'mymanifest' and archive all the\\n     files in the foo/ directory into 'classes.jar': \\n     jar cvfm classes.jar mymanifest -C foo/ .\\n\", filename);\n+\n+  exit(1);\n+}"}, {"sha": "573f151704758b4077834bc14ee279a9c4c502ed", "filename": "fastjar/jartool.h", "status": "added", "additions": 112, "deletions": 0, "changes": 112, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjartool.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fjartool.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fjartool.h?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,112 @@\n+/* $Id: jartool.h,v 1.4 2000/08/24 15:23:35 cory Exp $\n+\n+   $Log: jartool.h,v $\n+   Revision 1.4  2000/08/24 15:23:35  cory\n+   Set version number since I think we can let this one out.\n+\n+   Revision 1.3  2000/08/23 19:42:17  cory\n+   Added support for more Unix platforms.  The following code has been hacked\n+   to work on AIX, Solaris, True 64, and HP-UX.\n+   Added bigendian check.  Probably works on most big and little endian platforms\n+   now.\n+\n+   Revision 1.2  1999/12/06 03:47:20  toast\n+   fixing version string\n+\n+   Revision 1.1.1.1  1999/12/06 03:08:24  toast\n+   initial checkin..\n+\n+\n+\n+   Revision 1.6  1999/05/10 09:16:08  burnsbr\n+   *** empty log message ***\n+\n+   Revision 1.5  1999/04/27 10:04:20  burnsbr\n+   configure support\n+\n+   Revision 1.4  1999/04/26 02:36:15  burnsbr\n+   changed RDSZ to 4096 from 512\n+\n+   Revision 1.3  1999/04/23 12:00:29  burnsbr\n+   modified zipentry struct\n+\n+\n+*/\n+\n+/*\n+  jartool.h - generic defines, struct defs etc.\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+ */\n+\n+#include \"config.h\"\n+\n+#define ACTION_NONE 0\n+#define ACTION_CREATE 1\n+#define ACTION_EXTRACT 2\n+#define ACTION_UPDATE 3\n+#define ACTION_LIST 4\n+\n+#define TRUE 1\n+#define FALSE 0\n+\n+/* Amount of bytes to read at a time.  You can change this to optimize for\n+   your system */\n+#define RDSZ 4096\n+\n+/* Change these to match your system:\n+   ub1 == unsigned 1 byte word\n+   ub2 == unsigned 2 byte word\n+   ub4 == unsigned 4 byte word\n+*/\n+#if SIZEOF_CHAR == 1\n+typedef unsigned char ub1;\n+#else\n+typedef u_int8_t ub1;\n+#endif\n+\n+#if SIZEOF_SHORT == 2\n+typedef unsigned short ub2;\n+#elif SIZEOF_INT == 2\n+typedef unsigned int ub2;\n+#else\n+typedef u_int16_t ub2;\n+#endif\n+\n+#if SIZEOF_INT == 4\n+typedef unsigned int ub4;\n+#elif SIZEOF_LONG == 4\n+typedef unsigned long ub4;\n+#elif SIZEOF_LONG_LONG == 4\n+typedef unsigned long long ub4;\n+#else\n+typedef u_int32_t ub4;\n+#endif\n+\n+struct zipentry {\n+  ub2 mod_time;\n+  ub2 mod_date;\n+  ub4 crc;\n+  ub4 csize;\n+  ub4 usize;\n+  ub4 offset;\n+  ub1 compressed;\n+  char *filename;\n+  \n+  struct zipentry *next_entry;\n+};\n+\n+typedef struct zipentry zipentry;"}, {"sha": "7789652e877fbc83c770377691249820eebea1f2", "filename": "fastjar/missing", "status": "added", "additions": 190, "deletions": 0, "changes": 190, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fmissing", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fmissing", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fmissing?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,190 @@\n+#! /bin/sh\n+# Common stub for a few missing GNU programs while installing.\n+# Copyright (C) 1996, 1997 Free Software Foundation, Inc.\n+# Franc,ois Pinard <pinard@iro.umontreal.ca>, 1996.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+if test $# -eq 0; then\n+  echo 1>&2 \"Try \\`$0 --help' for more information\"\n+  exit 1\n+fi\n+\n+case \"$1\" in\n+\n+  -h|--h|--he|--hel|--help)\n+    echo \"\\\n+$0 [OPTION]... PROGRAM [ARGUMENT]...\n+\n+Handle \\`PROGRAM [ARGUMENT]...' for when PROGRAM is missing, or return an\n+error status if there is no known handling for PROGRAM.\n+\n+Options:\n+  -h, --help      display this help and exit\n+  -v, --version   output version information and exit\n+\n+Supported PROGRAM values:\n+  aclocal      touch file \\`aclocal.m4'\n+  autoconf     touch file \\`configure'\n+  autoheader   touch file \\`config.h.in'\n+  automake     touch all \\`Makefile.in' files\n+  bison        create \\`y.tab.[ch]', if possible, from existing .[ch]\n+  flex         create \\`lex.yy.c', if possible, from existing .c\n+  lex          create \\`lex.yy.c', if possible, from existing .c\n+  makeinfo     touch the output file\n+  yacc         create \\`y.tab.[ch]', if possible, from existing .[ch]\"\n+    ;;\n+\n+  -v|--v|--ve|--ver|--vers|--versi|--versio|--version)\n+    echo \"missing - GNU libit 0.0\"\n+    ;;\n+\n+  -*)\n+    echo 1>&2 \"$0: Unknown \\`$1' option\"\n+    echo 1>&2 \"Try \\`$0 --help' for more information\"\n+    exit 1\n+    ;;\n+\n+  aclocal)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+         you modified \\`acinclude.m4' or \\`configure.in'.  You might want\n+         to install the \\`Automake' and \\`Perl' packages.  Grab them from\n+         any GNU archive site.\"\n+    touch aclocal.m4\n+    ;;\n+\n+  autoconf)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+         you modified \\`configure.in'.  You might want to install the\n+         \\`Autoconf' and \\`GNU m4' packages.  Grab them from any GNU\n+         archive site.\"\n+    touch configure\n+    ;;\n+\n+  autoheader)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+         you modified \\`acconfig.h' or \\`configure.in'.  You might want\n+         to install the \\`Autoconf' and \\`GNU m4' packages.  Grab them\n+         from any GNU archive site.\"\n+    files=`sed -n 's/^[ ]*A[CM]_CONFIG_HEADER(\\([^)]*\\)).*/\\1/p' configure.in`\n+    test -z \"$files\" && files=\"config.h\"\n+    touch_files=\n+    for f in $files; do\n+      case \"$f\" in\n+      *:*) touch_files=\"$touch_files \"`echo \"$f\" |\n+\t\t\t\t       sed -e 's/^[^:]*://' -e 's/:.*//'`;;\n+      *) touch_files=\"$touch_files $f.in\";;\n+      esac\n+    done\n+    touch $touch_files\n+    ;;\n+\n+  automake)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+         you modified \\`Makefile.am', \\`acinclude.m4' or \\`configure.in'.\n+         You might want to install the \\`Automake' and \\`Perl' packages.\n+         Grab them from any GNU archive site.\"\n+    find . -type f -name Makefile.am -print |\n+\t   sed 's/\\.am$/.in/' |\n+\t   while read f; do touch \"$f\"; done\n+    ;;\n+\n+  bison|yacc)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+         you modified a \\`.y' file.  You may need the \\`Bison' package\n+         in order for those modifications to take effect.  You can get\n+         \\`Bison' from any GNU archive site.\"\n+    rm -f y.tab.c y.tab.h\n+    if [ $# -ne 1 ]; then\n+        eval LASTARG=\"\\${$#}\"\n+\tcase \"$LASTARG\" in\n+\t*.y)\n+\t    SRCFILE=`echo \"$LASTARG\" | sed 's/y$/c/'`\n+\t    if [ -f \"$SRCFILE\" ]; then\n+\t         cp \"$SRCFILE\" y.tab.c\n+\t    fi\n+\t    SRCFILE=`echo \"$LASTARG\" | sed 's/y$/h/'`\n+\t    if [ -f \"$SRCFILE\" ]; then\n+\t         cp \"$SRCFILE\" y.tab.h\n+\t    fi\n+\t  ;;\n+\tesac\n+    fi\n+    if [ ! -f y.tab.h ]; then\n+\techo >y.tab.h\n+    fi\n+    if [ ! -f y.tab.c ]; then\n+\techo 'main() { return 0; }' >y.tab.c\n+    fi\n+    ;;\n+\n+  lex|flex)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+         you modified a \\`.l' file.  You may need the \\`Flex' package\n+         in order for those modifications to take effect.  You can get\n+         \\`Flex' from any GNU archive site.\"\n+    rm -f lex.yy.c\n+    if [ $# -ne 1 ]; then\n+        eval LASTARG=\"\\${$#}\"\n+\tcase \"$LASTARG\" in\n+\t*.l)\n+\t    SRCFILE=`echo \"$LASTARG\" | sed 's/l$/c/'`\n+\t    if [ -f \"$SRCFILE\" ]; then\n+\t         cp \"$SRCFILE\" lex.yy.c\n+\t    fi\n+\t  ;;\n+\tesac\n+    fi\n+    if [ ! -f lex.yy.c ]; then\n+\techo 'main() { return 0; }' >lex.yy.c\n+    fi\n+    ;;\n+\n+  makeinfo)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+         you modified a \\`.texi' or \\`.texinfo' file, or any other file\n+         indirectly affecting the aspect of the manual.  The spurious\n+         call might also be the consequence of using a buggy \\`make' (AIX,\n+         DU, IRIX).  You might want to install the \\`Texinfo' package or\n+         the \\`GNU make' package.  Grab either from any GNU archive site.\"\n+    file=`echo \"$*\" | sed -n 's/.*-o \\([^ ]*\\).*/\\1/p'`\n+    if test -z \"$file\"; then\n+      file=`echo \"$*\" | sed 's/.* \\([^ ]*\\) *$/\\1/'`\n+      file=`sed -n '/^@setfilename/ { s/.* \\([^ ]*\\) *$/\\1/; p; q; }' $file`\n+    fi\n+    touch $file\n+    ;;\n+\n+  *)\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is needed, and you do not seem to have it handy on your\n+         system.  You might have modified some files without having the\n+         proper tools for further handling them.  Check the \\`README' file,\n+         it often tells you about the needed prerequirements for installing\n+         this package.  You may also peek at any GNU archive site, in case\n+         some other package would contain this missing \\`$1' program.\"\n+    exit 1\n+    ;;\n+esac\n+\n+exit 0"}, {"sha": "4f58503ea4e09c65165aa1ecaeac7c2c688648f3", "filename": "fastjar/mkinstalldirs", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fmkinstalldirs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fmkinstalldirs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fmkinstalldirs?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,40 @@\n+#! /bin/sh\n+# mkinstalldirs --- make directory hierarchy\n+# Author: Noah Friedman <friedman@prep.ai.mit.edu>\n+# Created: 1993-05-16\n+# Public domain\n+\n+# $Id: mkinstalldirs,v 1.13 1999/01/05 03:18:55 bje Exp $\n+\n+errstatus=0\n+\n+for file\n+do\n+   set fnord `echo \":$file\" | sed -ne 's/^:\\//#/;s/^://;s/\\// /g;s/^#/\\//;p'`\n+   shift\n+\n+   pathcomp=\n+   for d\n+   do\n+     pathcomp=\"$pathcomp$d\"\n+     case \"$pathcomp\" in\n+       -* ) pathcomp=./$pathcomp ;;\n+     esac\n+\n+     if test ! -d \"$pathcomp\"; then\n+        echo \"mkdir $pathcomp\"\n+\n+        mkdir \"$pathcomp\" || lasterr=$?\n+\n+        if test ! -d \"$pathcomp\"; then\n+  \t  errstatus=$lasterr\n+        fi\n+     fi\n+\n+     pathcomp=\"$pathcomp/\"\n+   done\n+done\n+\n+exit $errstatus\n+\n+# mkinstalldirs ends here"}, {"sha": "03cdd651b424b20c14d61193afcd981355f09182", "filename": "fastjar/pushback.c", "status": "added", "additions": 163, "deletions": 0, "changes": 163, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fpushback.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fpushback.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fpushback.c?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,163 @@\n+/* $Id: pushback.c,v 1.2 2000/08/23 19:42:17 cory Exp $\n+\n+   $Log: pushback.c,v $\n+   Revision 1.2  2000/08/23 19:42:17  cory\n+   Added support for more Unix platforms.  The following code has been hacked\n+   to work on AIX, Solaris, True 64, and HP-UX.\n+   Added bigendian check.  Probably works on most big and little endian platforms\n+   now.\n+\n+   Revision 1.1.1.1  1999/12/06 03:09:13  toast\n+   initial checkin..\n+\n+\n+\n+   Revision 1.1  1999/05/10 08:32:37  burnsbr\n+   Initial revision\n+\n+*/\n+\n+/*\n+  pushback.c - code for a pushback buffer to handle file I/O\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+ */\n+\n+#include <unistd.h>\n+#include <string.h>\n+#include <stdio.h>\n+\n+#include \"jartool.h\"\n+#include \"pushback.h\"\n+\n+static char rcsid[] = \"$Id: pushback.c,v 1.2 2000/08/23 19:42:17 cory Exp $\";\n+\n+void pb_init(pb_file *pbf, int fd){\n+  pbf->fd = fd;\n+  pbf->next = pbf->pb_buff;\n+  pbf->buff_amt = 0;\n+}\n+\n+int pb_push(pb_file *pbf, void *buff, int amt){\n+  int in_amt;\n+  int wrap = 0;\n+\n+#ifdef DEBUG\n+  printf(\"%d bytes being pushed back to the buffer\\n\", amt);\n+#endif\n+\n+  /* determine how much we can take */\n+  if((RDSZ - pbf->buff_amt) < amt)\n+    in_amt = RDSZ - pbf->buff_amt;\n+  else\n+    in_amt = amt;\n+\n+  if(in_amt == 0)\n+    return 0;\n+\n+  /* figure out if we need to wrap around, and if so, by how much */\n+  if(((pbf->pb_buff + RDSZ) - pbf->next) < in_amt)\n+    wrap = in_amt - ((pbf->pb_buff + RDSZ) - pbf->next);\n+\n+  /* write everything up til the end of the buffer */\n+  memcpy(pbf->next, buff, (in_amt - wrap));\n+\n+  /* finish writing what's wrapped around */\n+  memcpy(pbf->pb_buff, ((char *)buff + (in_amt - wrap)), wrap);\n+         \n+  /* update the buff_amt field */\n+  pbf->buff_amt += in_amt;\n+\n+#ifdef DEBUG\n+  printf(\"%d bytes we can't accept\\n\", (amt - in_amt));\n+#endif\n+\n+  return in_amt;\n+}\n+\n+\n+int pb_read(pb_file *pbf, void *buff, int amt){\n+  int out_amt = 0;\n+  int wrap = 0;\n+  void *bp = buff;\n+  int tmp;\n+\n+#ifdef DEBUG\n+  printf(\"%d bytes requested from us\\n\", amt);\n+#endif\n+  while(out_amt < amt){\n+    /* if our push-back buffer contains some data */\n+    if(pbf->buff_amt > 0){\n+      \n+#ifdef DEBUG\n+      printf(\"giving data from buffer\\n\");\n+#endif\n+      \n+      /* calculate how much we can actually give the caller */\n+      if( (amt - out_amt) < pbf->buff_amt )\n+        tmp = (amt - out_amt);\n+      else\n+        tmp = pbf->buff_amt;\n+      \n+      /* Determine if we're going to need to wrap around the buffer */\n+      if(tmp > ((pbf->pb_buff + RDSZ) - pbf->next))\n+        wrap = tmp - ((pbf->pb_buff + RDSZ) - pbf->next);\n+      \n+      memcpy(bp, pbf->next, (tmp - wrap));\n+      bp = &(((char *)bp)[tmp - wrap]);\n+      \n+      /* If we need to wrap, read from the start of the buffer */\n+      if(wrap > 0){\n+        memcpy(bp, pbf->pb_buff, wrap);\n+        bp = &(((char *)bp)[wrap]);\n+      }\n+      \n+      /* update the buff_amt field */\n+      pbf->buff_amt -= tmp;\n+      pbf->next += tmp;\n+      \n+#ifdef DEBUG\n+      printf(\"%d bytes remaining in buffer\\n\", pbf->buff_amt);\n+#endif\n+      \n+      /* if the buffer is empty, reset the next header to the front of the\n+         buffer so subsequent pushbacks/reads won't have to wrap */\n+      if(pbf->buff_amt == 0)\n+        pbf->next = pbf->pb_buff;\n+      \n+      out_amt += tmp;\n+\n+    } else {\n+#ifdef DEBUG\n+      printf(\"Reading from file..\\n\");\n+#endif\n+      \n+      /* The pushback buffer was empty, so we just need to read from the file */\n+      tmp = read(pbf->fd, bp, (amt - out_amt));\n+      if(tmp == 0)\n+        break;\n+      else\n+        out_amt += tmp;\n+      \n+      bp = &(((char *)bp)[tmp]);\n+    }\n+  }\n+\n+#ifdef DEBUG\n+  printf(\"managed to read %d bytes\\n\", out_amt);\n+#endif\n+  return out_amt;\n+}"}, {"sha": "a3239a5ded417cd34c48b1d51de3c2cd6fecb5eb", "filename": "fastjar/pushback.h", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fpushback.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fpushback.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fpushback.h?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,32 @@\n+/*\n+  pushback.h - header for pushback.c\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+*/\n+\n+struct pb_file {\n+  unsigned int buff_amt;\n+  ub1 pb_buff[RDSZ];\n+  int fd;\n+  ub1 *next;\n+};\n+\n+typedef struct pb_file pb_file;\n+\n+\n+void pb_init(pb_file *, int);\n+int pb_push(pb_file *, void *, int);\n+int pb_read(pb_file *, void *, int);"}, {"sha": "9788f70238c91894045d22366fa941580826c3c1", "filename": "fastjar/stamp-h.in", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fstamp-h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fstamp-h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fstamp-h.in?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1 @@\n+timestamp"}, {"sha": "7dc9527e707ca368c3ee1b9fe617380b87b9d8c6", "filename": "fastjar/zipfile.h", "status": "added", "additions": 74, "deletions": 0, "changes": 74, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fzipfile.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd8757b313518d151d28fff18f4d7958b5cb7ba3/fastjar%2Fzipfile.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fzipfile.h?ref=bd8757b313518d151d28fff18f4d7958b5cb7ba3", "patch": "@@ -0,0 +1,74 @@\n+/* $Id: zipfile.h,v 1.1.1.1 1999/12/06 03:09:11 toast Exp $\n+\n+   $Log: zipfile.h,v $\n+   Revision 1.1.1.1  1999/12/06 03:09:11  toast\n+   initial checkin..\n+\n+\n+\n+   Revision 1.6  1999/05/10 08:33:08  burnsbr\n+   added UNPACK_UB4 and UNPACK_UB2\n+\n+   Revision 1.5  1999/04/26 02:36:34  burnsbr\n+   added LOC_EXTRA macro\n+\n+   Revision 1.4  1999/04/23 12:01:19  burnsbr\n+   added more defines\n+\n+\n+*/\n+\n+/*\n+  zipfile.h - defines for indexing zipfile headers\n+  Copyright (C) 1999  Bryan Burns\n+  \n+  This program is free software; you can redistribute it and/or\n+  modify it under the terms of the GNU General Public License\n+  as published by the Free Software Foundation; either version 2\n+  of the License, or (at your option) any later version.\n+  \n+  This program is distributed in the hope that it will be useful,\n+  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+  GNU General Public License for more details.\n+  \n+  You should have received a copy of the GNU General Public License\n+  along with this program; if not, write to the Free Software\n+  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n+ */\n+\n+#define LOC_EXTRA   6  /* extra bytes */\n+#define LOC_COMP    8  /* compression method */\n+#define LOC_MODTIME 10 /* last modification time */\n+#define LOC_MODDATE 12 /* last modification date */\n+#define LOC_CRC     14 /* CRC */\n+#define LOC_CSIZE   18 /* compressed size */\n+#define LOC_USIZE   22 /* uncompressed size */\n+#define LOC_FNLEN   26 /* filename length */\n+#define LOC_EFLEN   28 /* extra-field length */\n+\n+#define CEN_COMP    10 /* compression method */\n+#define CEN_MODTIME 12\n+#define CEN_MODDATE 14\n+#define CEN_CRC     16\n+#define CEN_CSIZE   20\n+#define CEN_USIZE   24\n+#define CEN_FNLEN   28\n+#define CEN_EFLEN   30\n+#define CEN_COMLEN  32\n+#define CEN_OFFSET  42\n+\n+\n+/* macros */\n+#define PACK_UB4(d, o, v) d[o] = (ub1)((v) & 0x000000ff); \\\n+                          d[o + 1] = (ub1)(((v) & 0x0000ff00) >> 8); \\\n+                          d[o + 2] = (ub1)(((v) & 0x00ff0000) >> 16); \\\n+                          d[o + 3] = (ub1)(((v) & 0xff000000) >> 24)\n+\n+#define PACK_UB2(d, o, v) d[o] = (ub1)((v) & 0x00ff); \\\n+                          d[o + 1] = (ub1)(((v) & 0xff00) >> 8)\n+\n+#define UNPACK_UB4(s, o) (ub4)s[o] + (((ub4)s[o + 1]) << 8) +\\\n+                         (((ub4)s[o + 2]) << 16) + (((ub4)s[o + 3]) << 24)\n+\n+#define UNPACK_UB2(s, o)  (ub2)s[o] + (((ub2)s[o + 1]) << 8)"}]}