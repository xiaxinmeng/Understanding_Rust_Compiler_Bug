{"sha": "5aa26af0257ffd084b7a459093389360711ec9d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFhMjZhZjAyNTdmZmQwODRiN2E0NTkwOTMzODkzNjA3MTFlYzlkMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2002-05-09T21:09:27Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-05-09T21:09:27Z"}, "message": "t-linux64 (SHLIB_MAPFILES): Set.\n\n\t* config/sparc/t-linux64 (SHLIB_MAPFILES): Set.\n\t* config/sparc/libgcc-sparc-glibc.ver: New file.\n\t* config/cris/t-linux (SHLIB_MAPFILES): Remove.\n\t* mklibgcc.in: Preprocess SHLIB_MAPFILES with ml flags.\n\nFrom-SVN: r53346", "tree": {"sha": "697aac5e7289f42bfa186df52d028e0c328708e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/697aac5e7289f42bfa186df52d028e0c328708e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5aa26af0257ffd084b7a459093389360711ec9d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5aa26af0257ffd084b7a459093389360711ec9d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5aa26af0257ffd084b7a459093389360711ec9d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5aa26af0257ffd084b7a459093389360711ec9d2/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2937267b6a53ca3c5e1aa45339634c2901f844cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2937267b6a53ca3c5e1aa45339634c2901f844cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2937267b6a53ca3c5e1aa45339634c2901f844cb"}], "stats": {"total": 50, "additions": 45, "deletions": 5}, "files": [{"sha": "2a70177693e762a5021c6b720d67d62efa8616c2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5aa26af0257ffd084b7a459093389360711ec9d2", "patch": "@@ -1,3 +1,10 @@\n+2002-05-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* config/sparc/t-linux64 (SHLIB_MAPFILES): Set.\n+\t* config/sparc/libgcc-sparc-glibc.ver: New file.\n+\t* config/cris/t-linux (SHLIB_MAPFILES): Remove.\n+\t* mklibgcc.in: Preprocess SHLIB_MAPFILES with ml flags.\n+\n 2002-05-09  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/6429"}, {"sha": "65c3000ef00ffe144a268274b659fa668b6d8964", "filename": "gcc/config/cris/t-linux", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fconfig%2Fcris%2Ft-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fconfig%2Fcris%2Ft-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Ft-linux?ref=5aa26af0257ffd084b7a459093389360711ec9d2", "patch": "@@ -1,6 +1,2 @@\n TARGET_LIBGCC2_CFLAGS += -fPIC\n CRTSTUFF_T_CFLAGS_S = $(TARGET_LIBGCC2_CFLAGS)\n-\n-# Override t-slibgcc-elf-ver to export some libgcc symbols with\n-# the symbol versions that glibc used.\n-SHLIB_MAPFILES += $(srcdir)/config/libgcc-glibc.ver"}, {"sha": "e3ba0bbdb65bfb8224d012c92ed36804c3d0acfb", "filename": "gcc/config/sparc/libgcc-sparc-glibc.ver", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fconfig%2Fsparc%2Flibgcc-sparc-glibc.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fconfig%2Fsparc%2Flibgcc-sparc-glibc.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Flibgcc-sparc-glibc.ver?ref=5aa26af0257ffd084b7a459093389360711ec9d2", "patch": "@@ -0,0 +1,28 @@\n+# In order to work around the very problems that force us to now generally\n+# create a libgcc.so, glibc reexported a number of routines from libgcc.a.\n+# By now choosing the same version tags for these specific routines, we\n+# maintain enough binary compatibility to allow future versions of glibc\n+# to defer implementation of these routines to libgcc.so via DT_AUXILIARY.\n+\n+%ifdef __arch64__\n+%define GLIBC_VER GLIBC_2.2\n+%else\n+%define GLIBC_VER GLIBC_2.0\n+%endif\n+%inherit GCC_3.0 GLIBC_VER\n+GLIBC_VER {\n+  # Sampling of DImode arithmetic used by (at least) i386 and m68k.\n+  __divdi3\n+  __moddi3\n+  __udivdi3\n+  __umoddi3\n+\n+  # Exception handling support functions used by most everyone.\n+  __register_frame\n+  __register_frame_table\n+  __deregister_frame\n+  __register_frame_info\n+  __deregister_frame_info\n+  __frame_state_for\n+  __register_frame_info_table\n+}"}, {"sha": "c93ff25a3ff1d5fdc07eefd40b5ec3b9dc79385d", "filename": "gcc/config/sparc/t-linux64", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fconfig%2Fsparc%2Ft-linux64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fconfig%2Fsparc%2Ft-linux64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Ft-linux64?ref=5aa26af0257ffd084b7a459093389360711ec9d2", "patch": "@@ -10,3 +10,9 @@ INSTALL_LIBGCC = install-multilib\n EXTRA_MULTILIB_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o crtbeginT.o\n \n SHLIB_SLIBDIR_SUFFIXES = 64:64 32:\n+\n+# Override t-slibgcc-elf-ver to export some libgcc symbols with\n+# the symbol versions that glibc used.\n+# Avoid the t-linux version file.\n+SHLIB_MAPFILES = $(srcdir)/libgcc-std.ver \\\n+\t\t $(srcdir)/config/sparc/libgcc-sparc-glibc.ver"}, {"sha": "c5db6f0a03939eb512fb1563715992c8bb78861d", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aa26af0257ffd084b7a459093389360711ec9d2/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=5aa26af0257ffd084b7a459093389360711ec9d2", "patch": "@@ -263,7 +263,10 @@ for ml in $MULTILIBS; do\n     tmpmapfile=\"libgcc/${dir}/tmp-libgcc.map\"\n     echo \"\"\n     echo \"${mapfile}: $SHLIB_MKMAP $SHLIB_MAPFILES $libgcc_sh_objs\"\n-    echo '\t{ $(NM_FOR_TARGET)'\" $SHLIB_NM_FLAGS $libgcc_sh_objs; echo %%; cat $SHLIB_MAPFILES; } | \"'$(AWK)'\" -f $SHLIB_MKMAP $SHLIB_MKMAP_OPTS > ${tmpmapfile}\"\n+    echo '\t{ $(NM_FOR_TARGET)'\" $SHLIB_NM_FLAGS $libgcc_sh_objs; echo %%; \\\\\"\n+    echo \"\t  cat $SHLIB_MAPFILES | sed -e \"'\"/^[ \t]*#/d\" -e '\\''s/^%\\(if\\|else\\|elif\\|endif\\|define\\)/#\\1/'\\'\" \\\\\"\n+    echo \"\t  | $gcc_compile $flags -E -xassembler-with-cpp -; \\\\\"\n+    echo '\t} | $(AWK)'\" -f $SHLIB_MKMAP $SHLIB_MKMAP_OPTS > ${tmpmapfile}\"\n     echo '\tmv '\"$tmpmapfile\"' $@'\n   fi\n   shlib_deps=\"$shlib_deps $mapfile\""}]}