{"sha": "a053dab90e69c2a8289c95caec236f239a2a764b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTA1M2RhYjkwZTY5YzJhODI4OWM5NWNhZWMyMzZmMjM5YTJhNzY0Yg==", "commit": {"author": {"name": "Daniel Cederman", "email": "cederman@gaisler.com", "date": "2020-10-01T07:11:38Z"}, "committer": {"name": "Daniel Hellstrom", "email": "daniel@gaisler.com", "date": "2021-09-16T11:05:51Z"}, "message": "sparc: Add NOP in stack_protect_set32 if sparc_fix_b2bst enabled\n\nThis is needed to prevent the Store -> (Non-store or load) -> Store\nsequence.\n\ngcc/ChangeLog:\n\n\t* config/sparc/sparc.md (stack_protect_set32): Add NOP to prevent\n\tsensitive sequence for B2BST errata workaround.", "tree": {"sha": "91541a393a4b7530721903fbd40afe0cfa2e981a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91541a393a4b7530721903fbd40afe0cfa2e981a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a053dab90e69c2a8289c95caec236f239a2a764b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a053dab90e69c2a8289c95caec236f239a2a764b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a053dab90e69c2a8289c95caec236f239a2a764b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a053dab90e69c2a8289c95caec236f239a2a764b/comments", "author": {"login": "doac", "id": 2056695, "node_id": "MDQ6VXNlcjIwNTY2OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2056695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doac", "html_url": "https://github.com/doac", "followers_url": "https://api.github.com/users/doac/followers", "following_url": "https://api.github.com/users/doac/following{/other_user}", "gists_url": "https://api.github.com/users/doac/gists{/gist_id}", "starred_url": "https://api.github.com/users/doac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doac/subscriptions", "organizations_url": "https://api.github.com/users/doac/orgs", "repos_url": "https://api.github.com/users/doac/repos", "events_url": "https://api.github.com/users/doac/events{/privacy}", "received_events_url": "https://api.github.com/users/doac/received_events", "type": "User", "site_admin": false}, "committer": {"login": "daniel-hellstrom", "id": 1167836, "node_id": "MDQ6VXNlcjExNjc4MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1167836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daniel-hellstrom", "html_url": "https://github.com/daniel-hellstrom", "followers_url": "https://api.github.com/users/daniel-hellstrom/followers", "following_url": "https://api.github.com/users/daniel-hellstrom/following{/other_user}", "gists_url": "https://api.github.com/users/daniel-hellstrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/daniel-hellstrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daniel-hellstrom/subscriptions", "organizations_url": "https://api.github.com/users/daniel-hellstrom/orgs", "repos_url": "https://api.github.com/users/daniel-hellstrom/repos", "events_url": "https://api.github.com/users/daniel-hellstrom/events{/privacy}", "received_events_url": "https://api.github.com/users/daniel-hellstrom/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d4aa16699d4bcf9d335a206d3d8f6c1a80142aab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4aa16699d4bcf9d335a206d3d8f6c1a80142aab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4aa16699d4bcf9d335a206d3d8f6c1a80142aab"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "3ac074a244d503fce6ed7388b162e5e38e5de428", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a053dab90e69c2a8289c95caec236f239a2a764b/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a053dab90e69c2a8289c95caec236f239a2a764b/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=a053dab90e69c2a8289c95caec236f239a2a764b", "patch": "@@ -8353,9 +8353,15 @@ visl\")\n \t(unspec:SI [(match_operand:SI 1 \"memory_operand\" \"m\")] UNSPEC_SP_SET))\n    (set (match_scratch:SI 2 \"=&r\") (const_int 0))]\n   \"TARGET_ARCH32\"\n-  \"ld\\t%1, %2\\;st\\t%2, %0\\;mov\\t0, %2\"\n+{\n+  if (sparc_fix_b2bst)\n+    return \"ld\\t%1, %2\\;st\\t%2, %0\\;mov\\t0, %2\\;nop\";\n+  else\n+    return \"ld\\t%1, %2\\;st\\t%2, %0\\;mov\\t0, %2\";\n+}\n   [(set_attr \"type\" \"multi\")\n-   (set_attr \"length\" \"3\")])\n+   (set (attr \"length\") (if_then_else (eq_attr \"fix_b2bst\" \"true\")\n+\t\t      (const_int 4) (const_int 3)))])\n \n (define_insn \"stack_protect_set64\"\n   [(set (match_operand:DI 0 \"memory_operand\" \"=m\")"}]}