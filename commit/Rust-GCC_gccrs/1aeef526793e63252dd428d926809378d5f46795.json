{"sha": "1aeef526793e63252dd428d926809378d5f46795", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWFlZWY1MjY3OTNlNjMyNTJkZDQyOGQ5MjY4MDkzNzhkNWY0Njc5NQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2007-02-02T17:09:55Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2007-02-02T17:09:55Z"}, "message": "fold-const.c (negate_expr_p, [...]): Handle COMPLEX_EXPR.\n\n\t* fold-const.c (negate_expr_p, fold_negate_expr): Handle\n\tCOMPLEX_EXPR.\n\t\ntestsuite:\n\t* gcc.dg/builtins-20.c: Add more cases.\n\nFrom-SVN: r121511", "tree": {"sha": "121f473987a109b31958eb1bdf6d5fa7f38c2121", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/121f473987a109b31958eb1bdf6d5fa7f38c2121"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1aeef526793e63252dd428d926809378d5f46795", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1aeef526793e63252dd428d926809378d5f46795", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1aeef526793e63252dd428d926809378d5f46795", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1aeef526793e63252dd428d926809378d5f46795/comments", "author": null, "committer": null, "parents": [{"sha": "f6ec1d11632ab0a33dacb5043ac4819d5a91759e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6ec1d11632ab0a33dacb5043ac4819d5a91759e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6ec1d11632ab0a33dacb5043ac4819d5a91759e"}], "stats": {"total": 68, "additions": 68, "deletions": 0}, "files": [{"sha": "5308a3c0f9cd3209b1506d97494199e5c5deba17", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1aeef526793e63252dd428d926809378d5f46795/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1aeef526793e63252dd428d926809378d5f46795/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1aeef526793e63252dd428d926809378d5f46795", "patch": "@@ -1,3 +1,8 @@\n+2007-02-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* fold-const.c (negate_expr_p, fold_negate_expr): Handle\n+\tCOMPLEX_EXPR.\n+\n 2007-02-02  Maxim Kuvyrkov  <mkuvyrkov@ispras.ru>\n \n \tPR target/29682"}, {"sha": "241e9dc5ea57cfa6a437ee3f4ffb5a422ed1f24d", "filename": "gcc/fold-const.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1aeef526793e63252dd428d926809378d5f46795/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1aeef526793e63252dd428d926809378d5f46795/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=1aeef526793e63252dd428d926809378d5f46795", "patch": "@@ -1011,6 +1011,10 @@ negate_expr_p (tree t)\n       return negate_expr_p (TREE_REALPART (t))\n \t     && negate_expr_p (TREE_IMAGPART (t));\n \n+    case COMPLEX_EXPR:\n+      return negate_expr_p (TREE_OPERAND (t, 0))\n+\t     && negate_expr_p (TREE_OPERAND (t, 1));\n+\n     case PLUS_EXPR:\n       if (HONOR_SIGN_DEPENDENT_ROUNDING (TYPE_MODE (type))\n \t  || HONOR_SIGNED_ZEROS (TYPE_MODE (type)))\n@@ -1134,6 +1138,13 @@ fold_negate_expr (tree t)\n       }\n       break;\n \n+    case COMPLEX_EXPR:\n+      if (negate_expr_p (t))\n+\treturn fold_build2 (COMPLEX_EXPR, type,\n+\t\t\t    fold_negate_expr (TREE_OPERAND (t, 0)),\n+\t\t\t    fold_negate_expr (TREE_OPERAND (t, 1)));\n+      break;\n+      \n     case NEGATE_EXPR:\n       return TREE_OPERAND (t, 0);\n "}, {"sha": "f83213d4149362fd2ead1689a3e9dcd15fdebcf3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1aeef526793e63252dd428d926809378d5f46795/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1aeef526793e63252dd428d926809378d5f46795/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1aeef526793e63252dd428d926809378d5f46795", "patch": "@@ -1,3 +1,7 @@\n+2007-02-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* gcc.dg/builtins-20.c: Add more cases.\n+\n 2007-02-02  Maxim Kuvyrkov  <mkuvyrkov@ispras.ru>\n \n \tPR target/29682"}, {"sha": "3f36ae4fa7e4cc16ea94957e1a7f8850db42ca82", "filename": "gcc/testsuite/gcc.dg/builtins-20.c", "status": "modified", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1aeef526793e63252dd428d926809378d5f46795/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1aeef526793e63252dd428d926809378d5f46795/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c?ref=1aeef526793e63252dd428d926809378d5f46795", "patch": "@@ -197,6 +197,24 @@ void test2(double x, double y)\n   \n   if (fmax (x,fmin(y,x)) != x)\n     link_error ();\n+\n+  if ((__complex__ double) x != -(__complex__ double) (-x))\n+    link_error ();\n+\n+  if (x*1i != -(-x*1i))\n+    link_error ();\n+\n+  if (x+(x-y)*1i != -(-x+(y-x)*1i))\n+    link_error ();\n+\n+  if (x+(x-y)*1i != -(-x-(x-y)*1i))\n+    link_error ();\n+\n+  if (ccos(tan(x)+sin(y)*1i) != ccos(-tan(-x)+-sin(-y)*1i))\n+    link_error ();\n+\n+  if (ccos(tan(x)+sin(x-y)*1i) != ccos(-tan(-x)-sin(y-x)*1i))\n+    link_error ();\n }\n \n void test3(__complex__ double x, __complex__ double y, int i)\n@@ -389,6 +407,21 @@ void test2f(float x, float y)\n   \n   if (fmaxf (x,fminf(y,x)) != x)\n     link_error ();\n+\n+  if ((__complex__ float) x != -(__complex__ float) (-x))\n+    link_error ();\n+\n+  if (x+(x-y)*1i != -(-x+(y-x)*1i))\n+    link_error ();\n+\n+  if (x+(x-y)*1i != -(-x-(x-y)*1i))\n+    link_error ();\n+\n+  if (ccosf(tanf(x)+sinf(y)*1i) != ccosf(-tanf(-x)+-sinf(-y)*1i))\n+    link_error ();\n+\n+  if (ccosf(tanf(x)+sinf(x-y)*1i) != ccosf(-tanf(-x)-sinf(y-x)*1i))\n+    link_error ();\n }\n \n void test3f(__complex__ float x, __complex__ float y, int i)\n@@ -581,6 +614,21 @@ void test2l(long double x, long double y)\n   \n   if (fmaxl (x,fminl(y,x)) != x)\n     link_error ();\n+\n+  if ((__complex__ long double) x != -(__complex__ long double) (-x))\n+    link_error ();\n+\n+  if (x+(x-y)*1i != -(-x+(y-x)*1i))\n+    link_error ();\n+\n+  if (x+(x-y)*1i != -(-x-(x-y)*1i))\n+    link_error ();\n+\n+  if (ccosl(tanl(x)+sinl(y)*1i) != ccosl(-tanl(-x)+-sinl(-y)*1i))\n+    link_error ();\n+\n+  if (ccosl(tanl(x)+sinl(x-y)*1i) != ccosl(-tanl(-x)-sinl(y-x)*1i))\n+    link_error ();\n }\n \n void test3l(__complex__ long double x, __complex__ long double y, int i)"}]}