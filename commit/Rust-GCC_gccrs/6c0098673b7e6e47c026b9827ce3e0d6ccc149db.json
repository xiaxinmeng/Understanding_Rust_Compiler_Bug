{"sha": "6c0098673b7e6e47c026b9827ce3e0d6ccc149db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmMwMDk4NjczYjdlNmU0N2MwMjZiOTgyN2NlM2UwZDZjY2MxNDlkYg==", "commit": {"author": {"name": "Ralf Wildenhues", "email": "Ralf.Wildenhues@gmx.de", "date": "2010-10-11T18:04:01Z"}, "committer": {"name": "Ralf Wildenhues", "email": "rwild@gcc.gnu.org", "date": "2010-10-11T18:04:01Z"}, "message": "New contrib/test_recheck script to rerun unsuccessful tests.\n\ncontrib/:\n\t* test_recheck: New script.\n\nFrom-SVN: r165324", "tree": {"sha": "aa10a3b2cc364bf1afe43d3fb29c7c9a98071833", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa10a3b2cc364bf1afe43d3fb29c7c9a98071833"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c0098673b7e6e47c026b9827ce3e0d6ccc149db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c0098673b7e6e47c026b9827ce3e0d6ccc149db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c0098673b7e6e47c026b9827ce3e0d6ccc149db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c0098673b7e6e47c026b9827ce3e0d6ccc149db/comments", "author": null, "committer": null, "parents": [{"sha": "9dd57a6ef8f9b4f1c88534805363665c31f98dd9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dd57a6ef8f9b4f1c88534805363665c31f98dd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dd57a6ef8f9b4f1c88534805363665c31f98dd9"}], "stats": {"total": 102, "additions": 102, "deletions": 0}, "files": [{"sha": "c7152afe1699da4bdb97e234893369ba930eefca", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c0098673b7e6e47c026b9827ce3e0d6ccc149db/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c0098673b7e6e47c026b9827ce3e0d6ccc149db/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=6c0098673b7e6e47c026b9827ce3e0d6ccc149db", "patch": "@@ -1,3 +1,7 @@\n+2010-10-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n+\n+\t* test_recheck: New script.\n+\n 2010-08-22  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* texi2pod.pl: Replace @@ before @{ and @}, for @samp{@@}."}, {"sha": "193cd3df2a3cb376508636b59e776da5f0b4e9fd", "filename": "contrib/test_recheck", "status": "added", "additions": 98, "deletions": 0, "changes": 98, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c0098673b7e6e47c026b9827ce3e0d6ccc149db/contrib%2Ftest_recheck", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c0098673b7e6e47c026b9827ce3e0d6ccc149db/contrib%2Ftest_recheck", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ftest_recheck?ref=6c0098673b7e6e47c026b9827ce3e0d6ccc149db", "patch": "@@ -0,0 +1,98 @@\n+#! /bin/sh\n+\n+# (C) 2010 Free Software Foundation\n+# Written by Ralf Wildenhues <Ralf.Wildenhues@gmx.de>.\n+\n+# This script is Free Software, and it can be copied, distributed and\n+# modified as defined in the GNU General Public License.  A copy of\n+# its license can be downloaded from http://www.gnu.org/copyleft/gpl.html\n+\n+PROGNAME=test_recheck\n+\n+usage ()\n+{\n+  cat <<EOF\n+Usage: $PROGNAME [-h] [-n] DIR|FILE.sum...\n+\n+Rerun unsuccessful tests for testsuites below DIR or for FILE.sum.\n+\n+  -h     display this help and exit\n+  -n     dry run, only show what would be run\n+EOF\n+  exit $?\n+}\n+\n+error ()\n+{\n+  echo \"$@\" >&2\n+  exit 1\n+}\n+\n+dry=\n+for arg\n+do\n+  case $arg in\n+    -h | \\?) usage ;;\n+    -n) dry=:; shift ;;\n+    -*) error \"unknown argument $arg\" ;;\n+    *)  break ;;\n+  esac\n+done\n+test $# -gt 0 || usage\n+\n+# Find a good awk.\n+if test -z \"$AWK\" ; then\n+  for AWK in gawk nawk awk\n+  do\n+    if type $AWK 2>&1 | grep 'not found' > /dev/null 2>&1 ; then\n+      :\n+    else\n+      break\n+    fi\n+  done\n+fi\n+\n+: ${MAKE=make}\n+: ${filesuffix=}\n+cwd=`pwd`\n+files=`find \"$@\" -name \\*.sum$filesuffix -print | grep testsuite | sort`\n+st=0\n+\n+for file in $files; do\n+  dir=`echo $file | sed 's,/[^/]*$,,'`\n+  base=`echo $file | sed 's,.*/,,; s,\\.sum$,,'`\n+  flags=`$AWK '\n+/^Running .*\\.exp \\.\\.\\./ {\n+  if (expfile != \"\" && tests != \"\")\n+    printf (\" %s=\\\"%s\\\"\", expfile, tests)\n+  expfile = $2\n+  sub (/^[^ ]*\\//, \"\", expfile)\n+  sep = \"\"\n+  tests = \"\"\n+}\n+/^(FAIL|XPASS|UNRESOLVED|WARNING|ERROR): / {\n+  if (test != $2 \"\" && $2 != \"\" ) {\n+    test = $2\n+    tests = tests sep test\n+    sep = \" \"\n+  }\n+}\n+END {\n+  if (expfile != \"\" && tests != \"\")\n+    printf (\" %s=\\\"%s\\\"\", expfile, tests)\n+}' $file`\n+  if test -n \"$flags\"; then\n+    cd $dir\n+    amflags=\n+    if grep '^AM_RUNTESTFLAGS =' Makefile >/dev/null 2>&1; then\n+      amflags=`echo 'print-runtestflags: ; @echo $(AM_RUNTESTFLAGS)' \\\n+\t\t | ${MAKE} -s -f Makefile -f - print-runtestflags`\n+    fi\n+    echo \"(cd $dir && runtest $amflags --tool $base $flags)\"\n+    if test -z \"$dry\"; then\n+      eval runtest --tool $base $flags || st=$?\n+    fi\n+    cd \"$cwd\"\n+  fi\n+done\n+exit $st"}]}