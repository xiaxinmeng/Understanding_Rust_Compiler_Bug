{"sha": "ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWM2OGY5N2NmZTI2OWQ1N2YzZDZkN2VkMjk2MGNiNzM4ZWIxOTJlOA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2015-05-13T13:12:48Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2015-05-13T13:12:48Z"}, "message": "tuple (apply): Handle pointers to member (LWG 2418).\n\n\t* include/experimental/tuple (apply): Handle pointers to member (LWG\n\t2418).\n\t* include/std/functional (_Mem_fn_base): Make constructors constexpr.\n\t(_Maybe_wrap_member_pointer::__do_wrap): Make constexpr.\n\t* testsuite/experimental/tuple/apply.cc: Test pointer to member.\n\nFrom-SVN: r223158", "tree": {"sha": "6ee8f3f658e15921215d5f80edac7274c7a0b9b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ee8f3f658e15921215d5f80edac7274c7a0b9b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "681a3d868dc7f72c062905e9b4d17e206f2ede81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/681a3d868dc7f72c062905e9b4d17e206f2ede81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/681a3d868dc7f72c062905e9b4d17e206f2ede81"}], "stats": {"total": 37, "additions": 31, "deletions": 6}, "files": [{"sha": "a22a56524f88c8369d5dfe969f931690db1dfe0f", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "patch": "@@ -1,5 +1,11 @@\n 2015-05-13  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* include/experimental/tuple (apply): Handle pointers to member (LWG\n+\t2418).\n+\t* include/std/functional (_Mem_fn_base): Make constructors constexpr.\n+\t(_Maybe_wrap_member_pointer::__do_wrap): Make constexpr.\n+\t* testsuite/experimental/tuple/apply.cc: Test pointer to member.\n+\n \t* include/bits/random.h (seed_seq): More noexcept (LWG 2440).\n \n \t* include/bits/alloc_traits.h (_S_max_size): Implement LWG 2466."}, {"sha": "aa25c576f8e42764026a674748d516ab4ddec7d5", "filename": "libstdc++-v3/include/experimental/tuple", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Ftuple", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Ftuple", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Ftuple?ref=ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "patch": "@@ -36,6 +36,7 @@\n #else\n \n #include <tuple>\n+#include <functional>\n \n namespace std _GLIBCXX_VISIBILITY(default)\n {\n@@ -54,7 +55,11 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n   template <typename _Fn, typename _Tuple, std::size_t... _Idx>\n     constexpr decltype(auto)\n     __apply_impl(_Fn&& f, _Tuple&& t, std::index_sequence<_Idx...>)\n-    { return std::forward<_Fn>(f)(get<_Idx>(forward<_Tuple>(t))...); }\n+    {\n+      using _Wrap = _Maybe_wrap_member_pointer<decay_t<_Fn>>;\n+      return _Wrap::__do_wrap(std::forward<_Fn>(f))(\n+\t  get<_Idx>(forward<_Tuple>(t))...);\n+    }\n \n   template <typename _Fn, typename _Tuple>\n     constexpr decltype(auto)"}, {"sha": "7dd149ada0af0ee7976eb5f79705e7df0cadcd12", "filename": "libstdc++-v3/include/std/functional", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffunctional", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffunctional", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffunctional?ref=ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "patch": "@@ -572,7 +572,7 @@ _GLIBCXX_MEM_FN_TRAITS(&&, false_type, true_type)\n     public:\n       using result_type = typename _Traits::__result_type;\n \n-      explicit _Mem_fn_base(_Pmf __pmf) : _M_pmf(__pmf) { }\n+      explicit constexpr _Mem_fn_base(_Pmf __pmf) : _M_pmf(__pmf) { }\n \n       // Handle objects\n       template<typename... _Args, typename _Req\n@@ -671,7 +671,7 @@ _GLIBCXX_MEM_FN_TRAITS(&&, false_type, true_type)\n \tfriend struct _Bind_check_arity;\n \n     public:\n-      explicit\n+      explicit constexpr\n       _Mem_fn_base(_Res _Class::*__pm) noexcept : _M_pm(__pm) { }\n \n       // Handle objects\n@@ -1002,11 +1002,11 @@ _GLIBCXX_MEM_FN_TRAITS(&&, false_type, true_type)\n     {\n       typedef _Tp type;\n \n-      static const _Tp&\n+      static constexpr const _Tp&\n       __do_wrap(const _Tp& __x)\n       { return __x; }\n \n-      static _Tp&&\n+      static constexpr _Tp&&\n       __do_wrap(_Tp&& __x)\n       { return static_cast<_Tp&&>(__x); }\n     };\n@@ -1021,7 +1021,7 @@ _GLIBCXX_MEM_FN_TRAITS(&&, false_type, true_type)\n     {\n       typedef _Mem_fn<_Tp _Class::*> type;\n \n-      static type\n+      static constexpr type\n       __do_wrap(_Tp _Class::* __pm)\n       { return type(__pm); }\n     };"}, {"sha": "e52962b41772fccb5dd173c501cd990d1cba76a1", "filename": "libstdc++-v3/testsuite/experimental/tuple/apply.cc", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ftuple%2Fapply.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac68f97cfe269d57f3d6d7ed2960cb738eb192e8/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ftuple%2Fapply.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ftuple%2Fapply.cc?ref=ac68f97cfe269d57f3d6d7ed2960cb738eb192e8", "patch": "@@ -41,9 +41,23 @@ test02()\n   VERIFY( i == 3 );\n }\n \n+struct F\n+{\n+  int f(int i, int j) const { return i + j; }\n+};\n+\n+void\n+test03()\n+{\n+  auto t = std::make_tuple(F{}, 1, 2);\n+  int r = std::experimental::apply(&F::f, t);\n+  VERIFY( r == 3 );\n+}\n+\n int\n main()\n {\n   test01();\n   test02();\n+  test03();\n }"}]}