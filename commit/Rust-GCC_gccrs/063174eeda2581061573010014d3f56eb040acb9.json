{"sha": "063174eeda2581061573010014d3f56eb040acb9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDYzMTc0ZWVkYTI1ODEwNjE1NzMwMTAwMTRkM2Y1NmViMDQwYWNiOQ==", "commit": {"author": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1999-11-04T14:50:44Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1999-11-04T14:50:44Z"}, "message": "Allow for systems that do not have S_IR* defined values\nDo not call realloc with a NULL pointer\n\nFrom-SVN: r30391", "tree": {"sha": "d392eace2cc7e2d1f6cf5fdaeff51b55cbd2408f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d392eace2cc7e2d1f6cf5fdaeff51b55cbd2408f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/063174eeda2581061573010014d3f56eb040acb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/063174eeda2581061573010014d3f56eb040acb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/063174eeda2581061573010014d3f56eb040acb9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/063174eeda2581061573010014d3f56eb040acb9/comments", "author": null, "committer": null, "parents": [{"sha": "eae48b73bd009146558a6033acd65eebd4f7d8d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eae48b73bd009146558a6033acd65eebd4f7d8d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eae48b73bd009146558a6033acd65eebd4f7d8d6"}], "stats": {"total": 35, "additions": 31, "deletions": 4}, "files": [{"sha": "73dae90219b201158c80d68021be31e0c153afaf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/063174eeda2581061573010014d3f56eb040acb9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/063174eeda2581061573010014d3f56eb040acb9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=063174eeda2581061573010014d3f56eb040acb9", "patch": "@@ -2,6 +2,16 @@ Thu Nov  4 06:39:47 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* haifa-sched.c (schedule_block): Fix thinko.\n \n+1999-11-03  James McKelvey <mckelvey@fafnir.com>\n+\n+\t* fixinc/fixincl.c(create_file):  Allow for systems that do not have\n+\tS_IR* defined values\n+\n+1999-11-03  Philippe De Muyter  <phdm@macqel.be>\n+\n+\t* fixlib.c (load_file_data): Do not call `realloc' with a NULL pointer;\n+\tcall `malloc' instead.\n+\n Wed Nov  3 23:05:14 1999  Mark Mitchell  <mark@codesourcery.com>\n \n \t* flags.h (flag_renumber_insns): Declare."}, {"sha": "5a13cbeb212ac5a3f61863eaf4cbfbef749dbb48", "filename": "gcc/fixinc/fixincl.c", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/063174eeda2581061573010014d3f56eb040acb9/gcc%2Ffixinc%2Ffixincl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/063174eeda2581061573010014d3f56eb040acb9/gcc%2Ffixinc%2Ffixincl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.c?ref=063174eeda2581061573010014d3f56eb040acb9", "patch": "@@ -636,7 +636,22 @@ run_compiles ()\n    Input:    the name of the file to create\n    Returns:  a file pointer to the new, open file  */\n \n-#define S_IRALL (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH)\n+#if defined(S_IRUSR) && defined(S_IWUSR) && \\\n+    defined(S_IRGRP) && defined(S_IROTH)\n+\n+#   define S_IRALL (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH)\n+#else\n+#   define S_IRALL 0644\n+#endif\n+\n+#if defined(S_IRWXU) && defined(S_IRGRP) && defined(S_IXGRP) && \\\n+    defined(S_IROTH) && defined(S_IXOTH)\n+\n+#   define S_DIRALL (S_IRWXU | S_IRGRP | S_IXGRP | S_IROTH | S_IXOTH)\n+#else\n+#   define S_DIRALL 0755\n+#endif\n+\n \n FILE *\n create_file ()\n@@ -660,8 +675,7 @@ create_file ()\n           *pz_dir = NUL;\n           if (stat (fname, &stbf) < 0)\n             {\n-              mkdir (fname, S_IFDIR | S_IRWXU | S_IRGRP | S_IXGRP\n-                     | S_IROTH | S_IXOTH);\n+              mkdir (fname, S_IFDIR | S_DIRALL);\n             }\n \n           *pz_dir = '/';"}, {"sha": "85f92421222ba8c93b38c431bf1070077ecd233c", "filename": "gcc/fixinc/fixlib.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/063174eeda2581061573010014d3f56eb040acb9/gcc%2Ffixinc%2Ffixlib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/063174eeda2581061573010014d3f56eb040acb9/gcc%2Ffixinc%2Ffixlib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixlib.c?ref=063174eeda2581061573010014d3f56eb040acb9", "patch": "@@ -23,7 +23,10 @@ load_file_data (fp)\n       if (space_left < 1024)\n         {\n           space_left += 4096;\n-          pz_data = realloc ((void*)pz_data, space_left + space_used + 1 );\n+         if (pz_data)\n+            pz_data = realloc ((void*)pz_data, space_left + space_used + 1 );\n+         else\n+            pz_data = malloc (space_left + space_used + 1 );\n         }\n       size_read = fread (pz_data + space_used, 1, space_left, fp);\n "}]}