{"sha": "71b72132011a47a4b39950d95718f18d1218978c", "node_id": "C_kwDOANBUbNoAKDcxYjcyMTMyMDExYTQ3YTRiMzk5NTBkOTU3MThmMThkMTIxODk3OGM", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2022-01-10T18:33:44Z"}, "committer": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2022-01-11T14:21:12Z"}, "message": "Prevent exponential range calculations.\n\nProduce a summary result for any operation involving too many subranges.\n\n\tPR tree-optimization/103821\n\t* range-op.cc (range_operator::fold_range): Only do precise ranges\n\twhen there are not too many subranges.", "tree": {"sha": "4aba44f3eb45991a4c9a255e32babd12ac8e0cc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4aba44f3eb45991a4c9a255e32babd12ac8e0cc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71b72132011a47a4b39950d95718f18d1218978c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71b72132011a47a4b39950d95718f18d1218978c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71b72132011a47a4b39950d95718f18d1218978c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71b72132011a47a4b39950d95718f18d1218978c/comments", "author": null, "committer": null, "parents": [{"sha": "4f34f8cc1d064bfaaed723312c71e92f495d429b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f34f8cc1d064bfaaed723312c71e92f495d429b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f34f8cc1d064bfaaed723312c71e92f495d429b"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "a4f6e9eba29bff3b811f7280da733acbc4553046", "filename": "gcc/range-op.cc", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71b72132011a47a4b39950d95718f18d1218978c/gcc%2Frange-op.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71b72132011a47a4b39950d95718f18d1218978c/gcc%2Frange-op.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frange-op.cc?ref=71b72132011a47a4b39950d95718f18d1218978c", "patch": "@@ -209,10 +209,12 @@ range_operator::fold_range (irange &r, tree type,\n   unsigned num_rh = rh.num_pairs ();\n \n   // If both ranges are single pairs, fold directly into the result range.\n-  if (num_lh == 1 && num_rh == 1)\n+  // If the number of subranges grows too high, produce a summary result as the\n+  // loop becomes exponential with little benefit.  See PR 103821.\n+  if ((num_lh == 1 && num_rh == 1) || num_lh * num_rh > 12)\n     {\n-      wi_fold_in_parts (r, type, lh.lower_bound (0), lh.upper_bound (0),\n-\t\t\trh.lower_bound (0), rh.upper_bound (0));\n+      wi_fold_in_parts (r, type, lh.lower_bound (), lh.upper_bound (),\n+\t\t\trh.lower_bound (), rh.upper_bound ());\n       op1_op2_relation_effect (r, type, lh, rh, rel);\n       return true;\n     }"}]}