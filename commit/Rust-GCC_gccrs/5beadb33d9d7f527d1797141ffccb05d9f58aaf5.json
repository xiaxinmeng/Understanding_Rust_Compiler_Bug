{"sha": "5beadb33d9d7f527d1797141ffccb05d9f58aaf5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWJlYWRiMzNkOWQ3ZjUyN2QxNzk3MTQxZmZjY2IwNWQ5ZjU4YWFmNQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2003-07-07T04:46:29Z"}, "committer": {"name": "Andreas Jaeger", "email": "aj@gcc.gnu.org", "date": "2003-07-07T04:46:29Z"}, "message": "cppcharset.c (ICONV_CONST): Define iff !HAVE_ICONV.\n\n2003-07-07  Andrew Pinski  <pinskia@physics.uc.edu>\n\n\t* cppcharset.c (ICONV_CONST): Define iff !HAVE_ICONV.\n\t(convert_cset): Change inbuf to type ICONV_CONST char.\n\t* Makefile.in (LIBS): Add LIBICONV.\n\nFrom-SVN: r69029", "tree": {"sha": "fa13e634d6a6bac42004b688b63a251ec2248b86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa13e634d6a6bac42004b688b63a251ec2248b86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5beadb33d9d7f527d1797141ffccb05d9f58aaf5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5beadb33d9d7f527d1797141ffccb05d9f58aaf5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5beadb33d9d7f527d1797141ffccb05d9f58aaf5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5beadb33d9d7f527d1797141ffccb05d9f58aaf5/comments", "author": null, "committer": null, "parents": [{"sha": "1dbb6ce879d7b8c80ebf2dac903c6c9379f1d705", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dbb6ce879d7b8c80ebf2dac903c6c9379f1d705", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dbb6ce879d7b8c80ebf2dac903c6c9379f1d705"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "ac441c0dbc24482df6368f320f654890c86efeaa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5beadb33d9d7f527d1797141ffccb05d9f58aaf5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5beadb33d9d7f527d1797141ffccb05d9f58aaf5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5beadb33d9d7f527d1797141ffccb05d9f58aaf5", "patch": "@@ -1,3 +1,9 @@\n+2003-07-07  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t* cppcharset.c (ICONV_CONST): Define iff !HAVE_ICONV.\n+\t(convert_cset): Change inbuf to type ICONV_CONST char.\n+\t* Makefile.in (LIBS): Add LIBICONV.\n+\n 2003-07-06  Art Haas  <ahaas@airmail.net>\n \n \t* f/global.c (ffeglobal_type_string_): Fix obsolete GCC array"}, {"sha": "3825d8ae7bc54816f6b59f932131676cb31c1cb6", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5beadb33d9d7f527d1797141ffccb05d9f58aaf5/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5beadb33d9d7f527d1797141ffccb05d9f58aaf5/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=5beadb33d9d7f527d1797141ffccb05d9f58aaf5", "patch": "@@ -691,7 +691,7 @@ BUILD_LIBDEPS= $(BUILD_LIBIBERTY)\n \n # How to link with both our special library facilities\n # and the system's installed libraries.\n-LIBS =\t$(INTLLIBS) @LIBS@ $(LIBIBERTY)\n+LIBS =\t$(INTLLIBS) @LIBS@ $(LIBIBERTY) $(LIBICONV)\n \n # Any system libraries needed just for GNAT.\n SYSLIBS = @GNAT_LIBEXC@"}, {"sha": "0e9805fd4d5d3410556fe5c454f7752ec2d0df5b", "filename": "gcc/cppcharset.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5beadb33d9d7f527d1797141ffccb05d9f58aaf5/gcc%2Fcppcharset.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5beadb33d9d7f527d1797141ffccb05d9f58aaf5/gcc%2Fcppcharset.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppcharset.c?ref=5beadb33d9d7f527d1797141ffccb05d9f58aaf5", "patch": "@@ -81,6 +81,7 @@ Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */\n #define iconv_open(x, y) (errno = EINVAL, (iconv_t)-1)\n #define iconv(a,b,c,d,e) (errno = EINVAL, (size_t)-1)\n #define iconv_close(x)   0\n+#define ICONV_CONST\n #endif\n \n #if HOST_CHARSET == HOST_CHARSET_ASCII\n@@ -210,14 +211,15 @@ convert_cset (iconv_t cd, const uchar *from, size_t flen, struct strbuf *to)\n     }\n   else\n     {\n-      char *inbuf, *outbuf;\n+      ICONV_CONST char *inbuf;\n+      char *outbuf;\n       size_t inbytesleft, outbytesleft;\n \n       /* Reset conversion descriptor and check that it is valid.  */\n       if (iconv (cd, 0, 0, 0, 0) == (size_t)-1)\n \treturn false;\n \n-      inbuf = (char *)from;\n+      inbuf = (ICONV_CONST char *)from;\n       inbytesleft = flen;\n       outbuf = (char *)to->text + to->len;\n       outbytesleft = to->asize - to->len;"}]}