{"sha": "730bddf26ca4e5222b4130535b6bc705943f5d8b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzMwYmRkZjI2Y2E0ZTUyMjJiNDEzMDUzNWI2YmM3MDU5NDNmNWQ4Yg==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2004-11-17T21:07:03Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2004-11-17T21:07:03Z"}, "message": "re PR tree-optimization/18307 (merge_pointed_to_info called incorrectly)\n\n\n\tPR tree-optimization/18307\n\t* tree-ssa-alias.c (merge_pointed_to_info): ICE if 'dest' and\n\t'orig' are the same node.\n\t(collect_points_to_info_r): Do not call merge_pointed_to_info\n\twhen the PHI argument is identical to the LHS.\n\nFrom-SVN: r90816", "tree": {"sha": "337a05ea5b2fb625155a270527aab5e2894f68d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/337a05ea5b2fb625155a270527aab5e2894f68d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/730bddf26ca4e5222b4130535b6bc705943f5d8b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/730bddf26ca4e5222b4130535b6bc705943f5d8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/730bddf26ca4e5222b4130535b6bc705943f5d8b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/730bddf26ca4e5222b4130535b6bc705943f5d8b/comments", "author": null, "committer": null, "parents": [{"sha": "7c278f7987584a3371136b2812771427340df606", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c278f7987584a3371136b2812771427340df606", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c278f7987584a3371136b2812771427340df606"}], "stats": {"total": 20, "additions": 13, "deletions": 7}, "files": [{"sha": "6bf212a17f059ee7b15ae849bf8cf95e9d2e31eb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/730bddf26ca4e5222b4130535b6bc705943f5d8b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/730bddf26ca4e5222b4130535b6bc705943f5d8b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=730bddf26ca4e5222b4130535b6bc705943f5d8b", "patch": "@@ -1,3 +1,11 @@\n+2004-11-17  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR tree-optimization/18307\n+\t* tree-ssa-alias.c (merge_pointed_to_info): ICE if 'dest' and\n+\t'orig' are the same node.\n+\t(collect_points_to_info_r): Do not call merge_pointed_to_info\n+\twhen the PHI argument is identical to the LHS.\n+\n 2004-11-17  Steven Bosscher  <stevenb@suse.de>\n \n \t* tree-ssa-propagate.c (cfg_blocks_add) Assert we're not trying"}, {"sha": "aee68d3c58c7cf76e62297800d0076e76b92cc66", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/730bddf26ca4e5222b4130535b6bc705943f5d8b/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/730bddf26ca4e5222b4130535b6bc705943f5d8b/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=730bddf26ca4e5222b4130535b6bc705943f5d8b", "patch": "@@ -1697,12 +1697,8 @@ merge_pointed_to_info (struct alias_info *ai, tree dest, tree orig)\n {\n   struct ptr_info_def *dest_pi, *orig_pi;\n \n-  /* FIXME: It is erroneous to call this function with identical\n-     nodes, however that currently occurs during bootstrap.  This check\n-     stops further breakage.  PR 18307 documents the issue.  */\n-  if (dest == orig)\n-    return;\n-  \n+  gcc_assert (dest != orig);\n+\n   /* Make sure we have points-to information for ORIG.  */\n   collect_points_to_info_for (ai, orig);\n \n@@ -1938,7 +1934,9 @@ collect_points_to_info_r (tree var, tree stmt, void *data)\n \t    break;\n \t    \n \t  case SSA_NAME:\n-\t    merge_pointed_to_info (ai, lhs, var);\n+\t    /* Avoid unnecessary merges.  */\n+\t    if (lhs != var)\n+\t      merge_pointed_to_info (ai, lhs, var);\n \t    break;\n \t    \n \t  default:"}]}