{"sha": "ec6f831a27001652401b20331a5edc1c737d9fe3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWM2ZjgzMWEyNzAwMTY1MjQwMWIyMDMzMWE1ZWRjMWM3MzdkOWZlMw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2014-03-21T15:31:25Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2014-03-21T15:31:25Z"}, "message": "re PR target/60598 (ICE in maybe_record_trace_start, at dwarf2cfi.c:2239)\n\nPR target/60598\n\n\t* ifcvt.c (dead_or_predicable): Return FALSE if there are any frame\n\trelated insns after epilogue_completed.\n\t* gcc.dg/pr60598.c: New test.\n\nFrom-SVN: r208749", "tree": {"sha": "c6bbcadd7e846ee00216aaccb8e7b22363a80483", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6bbcadd7e846ee00216aaccb8e7b22363a80483"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ec6f831a27001652401b20331a5edc1c737d9fe3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec6f831a27001652401b20331a5edc1c737d9fe3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec6f831a27001652401b20331a5edc1c737d9fe3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec6f831a27001652401b20331a5edc1c737d9fe3/comments", "author": null, "committer": null, "parents": [{"sha": "3d8d00439b8507ebb9c89949d44133bbdcde333f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d8d00439b8507ebb9c89949d44133bbdcde333f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d8d00439b8507ebb9c89949d44133bbdcde333f"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "32540368464dea5f0fb539b1e7c11717621cc69f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ec6f831a27001652401b20331a5edc1c737d9fe3", "patch": "@@ -1,3 +1,9 @@\n+2014-03-21  Richard Henderson  <rth@twiddle.net>\n+\n+\tPR target/60598\n+\t* ifcvt.c (dead_or_predicable): Return FALSE if there are any frame\n+\trelated insns after epilogue_completed.\n+\n 2014-03-21  Martin Jambor  <mjambor@suse.cz>\n \n \tPR ipa/59176"}, {"sha": "0d1adce952e0153ef66326ecaa72315e736b46a7", "filename": "gcc/ifcvt.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2Fifcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2Fifcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fifcvt.c?ref=ec6f831a27001652401b20331a5edc1c737d9fe3", "patch": "@@ -4144,6 +4144,21 @@ dead_or_predicable (basic_block test_bb, basic_block merge_bb,\n \tend = PREV_INSN (end);\n     }\n \n+  /* Don't move frame-related insn across the conditional branch.  This\n+     can lead to one of the paths of the branch having wrong unwind info.  */\n+  if (epilogue_completed)\n+    {\n+      rtx insn = head;\n+      while (1)\n+\t{\n+\t  if (INSN_P (insn) && RTX_FRAME_RELATED_P (insn))\n+\t    return FALSE;\n+\t  if (insn == end)\n+\t    break;\n+\t  insn = NEXT_INSN (insn);\n+\t}\n+    }\n+\n   /* Disable handling dead code by conditional execution if the machine needs\n      to do anything funny with the tests, etc.  */\n #ifndef IFCVT_MODIFY_TESTS"}, {"sha": "a04e2d02896faf16d662bab44a1f59e38bbe03bb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ec6f831a27001652401b20331a5edc1c737d9fe3", "patch": "@@ -1,3 +1,8 @@\n+2014-03-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/60598\n+\t* gcc.dg/pr60598.c: New test.\n+\n 2014-03-21  Martin Jambor  <mjambor@suse.cz>\n \n \tPR ipa/59176"}, {"sha": "331e8bde269a5eba27033afd335e8faa684f577c", "filename": "gcc/testsuite/gcc.dg/pr60598.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2Ftestsuite%2Fgcc.dg%2Fpr60598.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6f831a27001652401b20331a5edc1c737d9fe3/gcc%2Ftestsuite%2Fgcc.dg%2Fpr60598.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr60598.c?ref=ec6f831a27001652401b20331a5edc1c737d9fe3", "patch": "@@ -0,0 +1,26 @@\n+/* PR target/60598 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+/* { dg-additional-options \"-fpic\" { target fpic } } */\n+/* { dg-additional-options \"-march=z196 -mtune=zEC12\" { target s390*-*-* } } */\n+\n+struct S { unsigned a, b[32]; };\n+\n+void\n+foo (struct S *x, struct S *y)\n+{\n+  unsigned a = y->a, i;\n+  if (x == y)\n+    for (i = 0; i < a - 1 - i; i++)\n+      {\n+\tunsigned t = x->b[i];\n+\tx->b[i] = x->b[a - 1 - i];\n+\tx->b[a - 1 - i] = t;\n+      }\n+  else\n+    {\n+      x->a = a;\n+      for (i = 0; i < a; i++)\n+\tx->b[i] = y->b[a - 1 - i];\n+    }\n+}"}]}