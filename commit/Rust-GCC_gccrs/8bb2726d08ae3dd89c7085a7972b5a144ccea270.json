{"sha": "8bb2726d08ae3dd89c7085a7972b5a144ccea270", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJiMjcyNmQwOGFlM2RkODljNzA4NWE3OTcyYjVhMTQ0Y2NlYTI3MA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-03-15T16:56:24Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-03-15T16:56:24Z"}, "message": "cmd/go: force LANG=C when looking for compiler version\n    \n    Tested by installing the gcc-locales package and running\n        LANG=de_DE.utf8 go build hello.go\n    Without this change, that fails, as described at\n    https://gcc.gnu.org/PR84765.\n    \n    Reviewed-on: https://go-review.googlesource.com/100737\n\nFrom-SVN: r258565", "tree": {"sha": "48dcbd03a1b072bb15acc6ce494b1c54c6964754", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48dcbd03a1b072bb15acc6ce494b1c54c6964754"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bb2726d08ae3dd89c7085a7972b5a144ccea270", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bb2726d08ae3dd89c7085a7972b5a144ccea270", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bb2726d08ae3dd89c7085a7972b5a144ccea270", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bb2726d08ae3dd89c7085a7972b5a144ccea270/comments", "author": null, "committer": null, "parents": [{"sha": "e0c079cba4a2069e4e1337d610542c9fec81f9be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0c079cba4a2069e4e1337d610542c9fec81f9be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0c079cba4a2069e4e1337d610542c9fec81f9be"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "6e4c73b161dc954993de23ce76e89ef7ae64260a", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb2726d08ae3dd89c7085a7972b5a144ccea270/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb2726d08ae3dd89c7085a7972b5a144ccea270/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=8bb2726d08ae3dd89c7085a7972b5a144ccea270", "patch": "@@ -1,4 +1,4 @@\n-ce28919112dbb234366816ab39ce060ad45e8ca9\n+e4464efc767b8dee4f4c18ffaf6c891f7b9deee7\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "a08de26c82307520362239fc52c25a01cee7ec16", "filename": "libgo/go/cmd/go/internal/work/buildid.go", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb2726d08ae3dd89c7085a7972b5a144ccea270/libgo%2Fgo%2Fcmd%2Fgo%2Finternal%2Fwork%2Fbuildid.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb2726d08ae3dd89c7085a7972b5a144ccea270/libgo%2Fgo%2Fcmd%2Fgo%2Finternal%2Fwork%2Fbuildid.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fcmd%2Fgo%2Finternal%2Fwork%2Fbuildid.go?ref=8bb2726d08ae3dd89c7085a7972b5a144ccea270", "patch": "@@ -234,7 +234,18 @@ func (b *Builder) gccgoToolID(name, language string) (string, error) {\n \t// compile an empty file on standard input.\n \tcmdline := str.StringList(cfg.BuildToolexec, name, \"-###\", \"-x\", language, \"-c\", \"-\")\n \tcmd := exec.Command(cmdline[0], cmdline[1:]...)\n-\tcmd.Env = base.EnvForDir(cmd.Dir, os.Environ())\n+\n+\t// Strip any LANG or LC_ environment variables, and force\n+\t// LANG=C, so that we get the untranslated output.\n+\tvar env []string\n+\tfor _, e := range os.Environ() {\n+\t\tif !strings.HasPrefix(e, \"LANG=\") && !strings.HasPrefix(e, \"LC_\") {\n+\t\t\tenv = append(env, e)\n+\t\t}\n+\t}\n+\tenv = append(env, \"LANG=C\")\n+\n+\tcmd.Env = base.EnvForDir(cmd.Dir, env)\n \tout, err := cmd.CombinedOutput()\n \tif err != nil {\n \t\treturn \"\", fmt.Errorf(\"%s: %v; output: %q\", name, err, out)"}]}