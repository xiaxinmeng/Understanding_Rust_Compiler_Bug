{"sha": "929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTI5NzEwZDk2Y2VkNGNmN2IyYmQ2ZTk4OTZiM2RjMDUxY2JmYTIzNQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2016-01-05T14:15:01Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2016-01-05T14:15:01Z"}, "message": "alias.c (compare_base_decls): Use symtab_node::get.\n\n\tgcc/\n\t* alias.c (compare_base_decls): Use symtab_node::get.\n\n\tgcc/testsuite/\n\t* gcc.dg/alias-15.c: New.\n\nFrom-SVN: r232073", "tree": {"sha": "832c392e140f1e504fe55231b7ccdd3f3bcd832b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/832c392e140f1e504fe55231b7ccdd3f3bcd832b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "html_url": "https://github.com/Rust-GCC/gccrs/commit/929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a2faef8e068114f6e30f4c881f6f02b0b754c667", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2faef8e068114f6e30f4c881f6f02b0b754c667", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2faef8e068114f6e30f4c881f6f02b0b754c667"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "ff297bca9e3f725f09574e0a9f82bbdcdf763a4a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "patch": "@@ -1,3 +1,7 @@\n+2016-01-05  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* alias.c (compare_base_decls): Use symtab_node::get.\n+\n 2016-01-05  Nick Clifton  <nickc@redhat.com>\n \n \tPR target/68770"}, {"sha": "e276d71f0461ecf135469fe9125746df584e9775", "filename": "gcc/alias.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2Falias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2Falias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Falias.c?ref=929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "patch": "@@ -2044,8 +2044,15 @@ compare_base_decls (tree base1, tree base2)\n       || !decl_in_symtab_p (base2))\n     return 0;\n \n-  ret = symtab_node::get_create (base1)->equal_address_to\n-\t\t (symtab_node::get_create (base2), true);\n+  /* Don't cause symbols to be inserted by the act of checking.  */\n+  symtab_node *node1 = symtab_node::get (base1);\n+  if (!node1)\n+    return 0;\n+  symtab_node *node2 = symtab_node::get (base2);\n+  if (!node2)\n+    return 0;\n+  \n+  ret = node1->equal_address_to (node2, true);\n   if (ret == 2)\n     return -1;\n   return ret;"}, {"sha": "2298e084104b96036e0bed9ecd588936061e179a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "patch": "@@ -1,3 +1,7 @@\n+2016-01-05  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* gcc.dg/alias-15.c: New.\n+\n 2016-01-05  Nick Clifton  <nickc@redhat.com>\n \n \tPR target/68870"}, {"sha": "0a8e69b61eceef95e61f16d7874b5a4204e0594f", "filename": "gcc/testsuite/gcc.dg/alias-15.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2Ftestsuite%2Fgcc.dg%2Falias-15.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/929710d96ced4cf7b2bd6e9896b3dc051cbfa235/gcc%2Ftestsuite%2Fgcc.dg%2Falias-15.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Falias-15.c?ref=929710d96ced4cf7b2bd6e9896b3dc051cbfa235", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options  \"-O2 -fdump-ipa-cgraph\" } */\n+\n+/* RTL-level CSE shouldn't introduce LCO (for the string) into varpool */\n+char *p;\n+\n+void foo ()\n+{\n+  p = \"abc\\n\";\n+\n+  while (*p != '\\n')\n+    p++;\n+}\n+\n+/* { dg-final { scan-ipa-dump-not \"LC0\" \"cgraph\" } } */"}]}