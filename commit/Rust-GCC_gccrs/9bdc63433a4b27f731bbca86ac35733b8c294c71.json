{"sha": "9bdc63433a4b27f731bbca86ac35733b8c294c71", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWJkYzYzNDMzYTRiMjdmNzMxYmJjYTg2YWMzNTczM2I4YzI5NGM3MQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2011-11-09T18:38:21Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2011-11-09T18:38:21Z"}, "message": "libitm: de-ELF-ize x86/sjlj.S.\n\n        * config/x86/sjlj.S: Protect elf directives with __ELF__.\n        Protect .note.GNU-stack with __linux__.\n\nFrom-SVN: r181229", "tree": {"sha": "03f86bd585cfa60f51b04af9ead06e7930738727", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03f86bd585cfa60f51b04af9ead06e7930738727"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9bdc63433a4b27f731bbca86ac35733b8c294c71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bdc63433a4b27f731bbca86ac35733b8c294c71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bdc63433a4b27f731bbca86ac35733b8c294c71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bdc63433a4b27f731bbca86ac35733b8c294c71/comments", "author": null, "committer": null, "parents": [{"sha": "9f13f697497c1bc7d3b9609eafad3ffec52d83b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f13f697497c1bc7d3b9609eafad3ffec52d83b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f13f697497c1bc7d3b9609eafad3ffec52d83b8"}], "stats": {"total": 22, "additions": 17, "deletions": 5}, "files": [{"sha": "e78716d2a378f864c455b2fc95bb6b786faa23c6", "filename": "libitm/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bdc63433a4b27f731bbca86ac35733b8c294c71/libitm%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bdc63433a4b27f731bbca86ac35733b8c294c71/libitm%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FChangeLog?ref=9bdc63433a4b27f731bbca86ac35733b8c294c71", "patch": "@@ -1,5 +1,8 @@\n 2011-11-09  Richard Henderson  <rth@redhat.com>\n \n+\t* config/x86/sjlj.S: Protect elf directives with __ELF__.\n+\tProtect .note.GNU-stack with __linux__.\n+\n \t* configure.ac (GCC_AS_CFI_PSEUDO_OP): Test it.\n \t* configure, aclocal.m4, config.h.in: Rebuild.\n \t* config/generic/asmcfi.h: New file."}, {"sha": "32572d9db60e1488733529640396c6dd01042b47", "filename": "libitm/config/x86/sjlj.S", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bdc63433a4b27f731bbca86ac35733b8c294c71/libitm%2Fconfig%2Fx86%2Fsjlj.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bdc63433a4b27f731bbca86ac35733b8c294c71/libitm%2Fconfig%2Fx86%2Fsjlj.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Fx86%2Fsjlj.S?ref=9bdc63433a4b27f731bbca86ac35733b8c294c71", "patch": "@@ -26,9 +26,9 @@\n #include \"asmcfi.h\"\n \n \t.text\n-\t.p2align 4\n+\n+\t.align 4\n \t.globl\t_ITM_beginTransaction\n-\t.type\t_ITM_beginTransaction, @function\n \n _ITM_beginTransaction:\n \tcfi_startproc\n@@ -66,12 +66,14 @@ _ITM_beginTransaction:\n \tret\n #endif\n \tcfi_endproc\n+\n+#ifdef __ELF__\n+\t.type\t_ITM_beginTransaction, @function\n \t.size\t_ITM_beginTransaction, .-_ITM_beginTransaction\n+#endif\n \n-\t.p2align 4\n+\t.align 4\n \t.globl\tGTM_longjmp\n-\t.type\tGTM_longjmp, @function\n-\t.hidden\tGTM_longjmp\n \n GTM_longjmp:\n \tcfi_startproc\n@@ -103,6 +105,13 @@ GTM_longjmp:\n \tjmp\t*%edx\n #endif\n \tcfi_endproc\n+\n+#ifdef __ELF__\n+\t.type\tGTM_longjmp, @function\n+\t.hidden\tGTM_longjmp\n \t.size\tGTM_longjmp, .-GTM_longjmp\n+#endif\n \n+#ifdef __linux__\n .section .note.GNU-stack, \"\", @progbits\n+#endif"}]}