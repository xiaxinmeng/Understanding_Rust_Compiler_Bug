{"sha": "460ad044bc85574e9acea9dade6ce7dda56ac742", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYwYWQwNDRiYzg1NTc0ZTlhY2VhOWRhZGU2Y2U3ZGRhNTZhYzc0Mg==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2019-04-16T21:16:43Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2019-04-16T21:16:43Z"}, "message": "d: Use build_exeext suffix for D generator programs.\n\nUpdated build and invocation of idgen and impcnvgen, ensuring that they\nare removed when cleaning the build directory.\n\nAdded BUILD_LIBDEPS on the link command for the generator programs as\nwell, which is necessary when the system installed compiler is not GCC.\n\ngcc/d/ChangeLog:\n\n2019-04-16  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\t* Make-lang.in (d.mostyclean): Clean idgen and impcnvgen.\n\t(d/idgen): Rename to d/idgen$(build_exeext), add BUILD_LIBDEPS.\n\t(d/impcnvgen): Rename to d/impcnvgen$(build_exeext), add\n\tBUILD_LIBDEPS.\n\t(d/id.c): Call idgen$(build_exeext).\n\t(d/impcnvtab.c): Call impcnvgen$(build_exeext).\n\nFrom-SVN: r270397", "tree": {"sha": "43ad6de2475846920fc86a4b89a75cf081c4e21a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/43ad6de2475846920fc86a4b89a75cf081c4e21a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/460ad044bc85574e9acea9dade6ce7dda56ac742", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/460ad044bc85574e9acea9dade6ce7dda56ac742", "html_url": "https://github.com/Rust-GCC/gccrs/commit/460ad044bc85574e9acea9dade6ce7dda56ac742", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/460ad044bc85574e9acea9dade6ce7dda56ac742/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0382a41d63c0a99ac2f92d831f31af8b6203b2f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0382a41d63c0a99ac2f92d831f31af8b6203b2f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0382a41d63c0a99ac2f92d831f31af8b6203b2f3"}], "stats": {"total": 29, "additions": 20, "deletions": 9}, "files": [{"sha": "d0210ff43e8b5013e50ba47068aa7c604edb9933", "filename": "gcc/d/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/460ad044bc85574e9acea9dade6ce7dda56ac742/gcc%2Fd%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/460ad044bc85574e9acea9dade6ce7dda56ac742/gcc%2Fd%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2FChangeLog?ref=460ad044bc85574e9acea9dade6ce7dda56ac742", "patch": "@@ -1,3 +1,11 @@\n+2019-04-16  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* Make-lang.in (d.mostyclean): Clean idgen and impcvgen.\n+\t(d/idgen): Rename to d/idgen$(build_exeext), add BUILD_LIBDEPS.\n+\t(d/impcvgen): Rename to d/impcvgen$(build_exeext), add BUILD_LIBDEPS.\n+\t(d/id.c): Call idgen$(build_exeext).\n+\t(d/impcnvtab.c): Call impcvgen$(build_exeext).\n+\n 2019-04-14  Johannes Pfau  <johannespfau@gmail.com>\n \tPR d/87799\n \t* d-system.h (_mkdir): Forward _mkdir on MinGW to mkdir in system.h."}, {"sha": "13b785e86a15a9e6bec2c50bc946ab7a707aa1bf", "filename": "gcc/d/Make-lang.in", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/460ad044bc85574e9acea9dade6ce7dda56ac742/gcc%2Fd%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/460ad044bc85574e9acea9dade6ce7dda56ac742/gcc%2Fd%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2FMake-lang.in?ref=460ad044bc85574e9acea9dade6ce7dda56ac742", "patch": "@@ -279,7 +279,8 @@ d.mostlyclean:\n \t-rm -f d/*$(objext)\n \t-rm -f d/*$(coverageexts)\n \t-rm -f $(D_GENERATED_SRCS)\n-\t-rm -f d/gdc$(exeext) gdc-cross$(exeext) d/d21$(exeext)\n+\t-rm -f d/idgen$(build_exeext) d/impcnvgen$(build_exeext)\n+\t-rm -f gdc$(exeext) gdc-cross$(exeext) d21$(exeext)\n d.clean:\n d.distclean:\n d.maintainer-clean:\n@@ -316,21 +317,23 @@ d/%.o: d/dmd/root/%.c $(D_GENERATED_SRCS)\n \t$(POSTCOMPILE)\n \n # Generated programs.\n-d/idgen: d/idgen.dmdgen.o\n-\t+$(LINKER_FOR_BUILD) $(BUILD_LINKERFLAGS) $(BUILD_LDFLAGS) -o $@ $^\n+d/idgen$(build_exeext): d/idgen.dmdgen.o $(BUILD_LIBDEPS)\n+\t+$(LINKER_FOR_BUILD) $(BUILD_LINKERFLAGS) $(BUILD_LDFLAGS) -o $@ \\\n+\t    $(filter-out $(BUILD_LIBDEPS), $^) $(BUILD_LIBS)\n \n-d/impcvgen: d/impcnvgen.dmdgen.o\n-\t+$(LINKER_FOR_BUILD) $(BUILD_LINKERFLAGS) $(BUILD_LDFLAGS) -o $@ $^\n+d/impcnvgen$(build_exeext): d/impcnvgen.dmdgen.o $(BUILD_LIBDEPS)\n+\t+$(LINKER_FOR_BUILD) $(BUILD_LINKERFLAGS) $(BUILD_LDFLAGS) -o $@ \\\n+\t    $(filter-out $(BUILD_LIBDEPS), $^) $(BUILD_LIBS)\n \n # Generated sources.\n-d/id.c: d/idgen\n-\tcd d && ./idgen\n+d/id.c: d/idgen$(build_exeext)\n+\tcd d && ./idgen$(build_exeext)\n \n # idgen also generates id.h; just verify it exists.\n d/id.h: d/id.c\n \n-d/impcnvtab.c: d/impcvgen\n-\tcd d && ./impcvgen\n+d/impcnvtab.c: d/impcnvgen$(build_exeext)\n+\tcd d && ./impcnvgen$(build_exeext)\n \n d/%.dmdgen.o: $(srcdir)/d/dmd/%.c\n \t$(DMDGEN_COMPILE) $(D_INCLUDES) $<"}]}