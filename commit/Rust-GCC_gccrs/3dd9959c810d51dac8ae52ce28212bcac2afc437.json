{"sha": "3dd9959c810d51dac8ae52ce28212bcac2afc437", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RkOTk1OWM4MTBkNTFkYWM4YWU1MmNlMjgyMTJiY2FjMmFmYzQzNw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-07T15:01:27Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-07T15:01:27Z"}, "message": "[multiple changes]\n\n2009-04-07  Robert Dewar  <dewar@adacore.com>\n\n\t(Osint.Fail): Change calling sequence to have one string arg\n\t(Make.Make_Failed): Same change\n\tAll callers are adjusted to use concatenation\n\n2009-04-07  Robert Dewar  <dewar@adacore.com>\n\n\t* exp_ch4.adb: Fix documentation typo\n\n2009-04-07  Robert Dewar  <dewar@adacore.com>\n\n\t* tbuild.ads: Minor reformatting\n\n2009-04-07  Javier Miranda  <miranda@adacore.com>\n\n\t* exp_disp.adb (Make_DT): Avoid the generation of the OSD_Table\n\twhen compiling under ZFP runtime.\n\n2009-04-07  Robert Dewar  <dewar@adacore.com>\n\n\t* g-comlin.adb: Minor reformatting\n\n2009-04-07  Thomas Quinot  <quinot@adacore.com>\n\n\t* socket.c, g-socthi-vms.adb, g-socthi-vms.ads, g-socthi-vxworks.adb,\n\tg-socthi-vxworks.ads, g-socthi-mingw.adb, g-socthi-mingw.ads,\n\tg-socthi.adb, g-socthi.ads, g-socket.adb, g-socket.ads, g-sothco.ads:\n\tRemove dynamic allocation of Fd_Set in Socket_Set_Type objects.\n\nFrom-SVN: r145678", "tree": {"sha": "97de4be619b593f2d66a2fa45de2b0a01f1177c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97de4be619b593f2d66a2fa45de2b0a01f1177c0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3dd9959c810d51dac8ae52ce28212bcac2afc437", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dd9959c810d51dac8ae52ce28212bcac2afc437", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3dd9959c810d51dac8ae52ce28212bcac2afc437", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dd9959c810d51dac8ae52ce28212bcac2afc437/comments", "author": null, "committer": null, "parents": [{"sha": "dcd8728b8e5ad2b9920f184e028850553b243ba4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcd8728b8e5ad2b9920f184e028850553b243ba4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcd8728b8e5ad2b9920f184e028850553b243ba4"}], "stats": {"total": 1013, "additions": 479, "deletions": 534}, "files": [{"sha": "7d168c87aace75278dc6893d67236dc8999357a6", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -1,3 +1,33 @@\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t(Osint.Fail): Change calling sequence to have one string arg\n+\t(Make.Make_Failed): Same change\n+\tAll callers are adjusted to use concatenation\n+\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t* exp_ch4.adb: Fix documentation typo\n+\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t* tbuild.ads: Minor reformatting\n+\n+2009-04-07  Javier Miranda  <miranda@adacore.com>\n+\n+\t* exp_disp.adb (Make_DT): Avoid the generation of the OSD_Table\n+\twhen compiling under ZFP runtime.\n+\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t* g-comlin.adb: Minor reformatting\n+\n+2009-04-07  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* socket.c, g-socthi-vms.adb, g-socthi-vms.ads, g-socthi-vxworks.adb,\n+\tg-socthi-vxworks.ads, g-socthi-mingw.adb, g-socthi-mingw.ads,\n+\tg-socthi.adb, g-socthi.ads, g-socket.adb, g-socket.ads, g-sothco.ads:\n+\tRemove dynamic allocation of Fd_Set in Socket_Set_Type objects.\n+\n 2009-04-07  Robert Dewar  <dewar@adacore.com>\n \n \t* gnat_ugn.texi: Document -gnatDnn/-gnatGnn"}, {"sha": "bbc990dc892e2711920dd1b07cad96a19a7ed9f0", "filename": "gcc/ada/binde.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fbinde.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fbinde.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbinde.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -918,9 +918,9 @@ package body Binde is\n                      end if;\n \n                      Osint.Fail\n-                       (\"could not find unit \",\n-                        Withed (Withed'First .. Last_Withed) & \" needed by \" &\n-                        Withing (Withing'First .. Last_Withing) & Spec_Body);\n+                       (\"could not find unit \"\n+                        & Withed (Withed'First .. Last_Withed) & \" needed by \"\n+                        & Withing (Withing'First .. Last_Withing) & Spec_Body);\n                   end;\n                end if;\n "}, {"sha": "5df43cd1a049bd0be485ba0d9dedbd4ca57af820", "filename": "gcc/ada/clean.adb", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fclean.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fclean.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fclean.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -1625,7 +1625,7 @@ package body Clean is\n \n             procedure Bad_Argument is\n             begin\n-               Fail (\"invalid argument \"\"\", Arg, \"\"\"\");\n+               Fail (\"invalid argument \"\"\" & Arg & \"\"\"\");\n             end Bad_Argument;\n \n          begin\n@@ -1680,7 +1680,7 @@ package body Clean is\n                               Dir : constant String := Arg (3 .. Arg'Last);\n                            begin\n                               if not Is_Directory (Dir) then\n-                                 Fail (Dir, \" is not a directory\");\n+                                 Fail (Dir & \" is not a directory\");\n                               else\n                                  Add_Lib_Search_Dir (Dir);\n                               end if;\n@@ -1697,7 +1697,7 @@ package body Clean is\n                               Dir : constant String := Argument (Index);\n                            begin\n                               if not Is_Directory (Dir) then\n-                                 Fail (Dir, \" is not a directory\");\n+                                 Fail (Dir & \" is not a directory\");\n                               else\n                                  Add_Lib_Search_Dir (Dir);\n                               end if;\n@@ -1853,8 +1853,9 @@ package body Clean is\n \n                            else\n                               Fail\n-                                (\"illegal external assignment '\",\n-                                 Ext_Asgn, \"'\");\n+                                (\"illegal external assignment '\"\n+                                 & Ext_Asgn\n+                                 & \"'\");\n                            end if;\n                         end;\n "}, {"sha": "e511e97e2e8a13da2b1c707df7594e7f49814553", "filename": "gcc/ada/exp_ch4.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fexp_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fexp_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch4.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -4547,8 +4547,8 @@ package body Exp_Ch4 is\n    --\n    --    0  None available\n    --    2  RE_Str_Concat available, RE_Str_Concat_3 not available\n-   --    3  RE_Str_Concat/Concat_2 available, RE_Str_Concat_4 not available\n-   --    4  RE_Str_Concat/Concat_2/3 available, RE_Str_Concat_5 not available\n+   --    3  RE_Str_Concat/Concat_3 available, RE_Str_Concat_4 not available\n+   --    4  RE_Str_Concat/Concat_3/4 available, RE_Str_Concat_5 not available\n    --    5  All routines including RE_Str_Concat_5 available\n \n    Char_Concat_Available : Boolean;"}, {"sha": "96dd8dae6102eadd21303d195fd2b5585569e0fb", "filename": "gcc/ada/exp_disp.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fexp_disp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fexp_disp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_disp.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -3479,6 +3479,7 @@ package body Exp_Disp is\n            or else not Is_Limited_Type (Typ)\n            or else not Has_Interfaces (Typ)\n            or else not Build_Thunks\n+           or else not RTE_Record_Component_Available (RE_OSD_Table)\n          then\n             --  No OSD table required\n "}, {"sha": "8f16a11786680385b5ea34848c7430313e46b822", "filename": "gcc/ada/frontend.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Ffrontend.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Ffrontend.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffrontend.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -169,8 +169,8 @@ begin\n \n             if Source_Config_File = No_Source_File then\n                Osint.Fail\n-                 (\"cannot find configuration pragmas file \",\n-                  Config_File_Names (Index).all);\n+                 (\"cannot find configuration pragmas file \"\n+                  & Config_File_Names (Index).all);\n             end if;\n \n             Initialize_Scanner (No_Unit, Source_Config_File);"}, {"sha": "b67d4fe50f1b016388dc7c9ff7e0760f9f58fd66", "filename": "gcc/ada/g-comlin.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-comlin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-comlin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-comlin.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -1404,7 +1404,7 @@ package body GNAT.Command_Line is\n       function Group_Analysis\n         (Prefix : String;\n          Group  : String) return Boolean;\n-      --  Perform the analysis of a group of switches.\n+      --  Perform the analysis of a group of switches\n \n       --------------------\n       -- Group_Analysis --"}, {"sha": "0112ed8b84eab3a10828edaa07a1db15fd192499", "filename": "gcc/ada/g-socket.adb", "status": "modified", "additions": 70, "deletions": 98, "changes": 168, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socket.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socket.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socket.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -454,110 +454,89 @@ package body GNAT.Sockets is\n       TPtr : Timeval_Access;\n \n    begin\n-      begin\n-         Status := Completed;\n-\n-         --  No timeout or Forever is indicated by a null timeval pointer\n-\n-         if Timeout = Forever then\n-            TPtr := null;\n-         else\n-            TVal := To_Timeval (Timeout);\n-            TPtr := TVal'Unchecked_Access;\n-         end if;\n+      Status := Completed;\n \n-         --  Copy R_Socket_Set in RSet and add read signalling socket\n+      --  No timeout or Forever is indicated by a null timeval pointer\n \n-         RSet := (Set  => New_Socket_Set (R_Socket_Set.Set),\n-                  Last => R_Socket_Set.Last);\n-         Set (RSet, RSig);\n+      if Timeout = Forever then\n+         TPtr := null;\n+      else\n+         TVal := To_Timeval (Timeout);\n+         TPtr := TVal'Unchecked_Access;\n+      end if;\n \n-         --  Copy W_Socket_Set in WSet\n+      --  Copy R_Socket_Set in RSet and add read signalling socket\n \n-         WSet := (Set  => New_Socket_Set (W_Socket_Set.Set),\n-                  Last => W_Socket_Set.Last);\n+      RSet := R_Socket_Set;\n+      Set (RSet, RSig);\n \n-         --  Copy E_Socket_Set in ESet\n+      --  Copy W_Socket_Set in WSet\n \n-         ESet := (Set  => New_Socket_Set (E_Socket_Set.Set),\n-                  Last => E_Socket_Set.Last);\n+      WSet := W_Socket_Set;\n \n-         Last := C.int'Max (C.int'Max (C.int (RSet.Last),\n-                                       C.int (WSet.Last)),\n-                                       C.int (ESet.Last));\n+      --  Copy E_Socket_Set in ESet\n \n-         Res :=\n-           C_Select\n-            (Last + 1,\n-             RSet.Set,\n-             WSet.Set,\n-             ESet.Set,\n-             TPtr);\n+      ESet := E_Socket_Set;\n \n-         if Res = Failure then\n-            Raise_Socket_Error (Socket_Errno);\n-         end if;\n+      Last := C.int'Max (C.int'Max (C.int (RSet.Last),\n+                                    C.int (WSet.Last)),\n+                                    C.int (ESet.Last));\n \n-         --  If Select was resumed because of read signalling socket, read this\n-         --  data and remove socket from set.\n+      Res :=\n+        C_Select\n+         (Last + 1,\n+          RSet.Set'Access,\n+          WSet.Set'Access,\n+          ESet.Set'Access,\n+          TPtr);\n \n-         if Is_Set (RSet, RSig) then\n-            Clear (RSet, RSig);\n+      if Res = Failure then\n+         Raise_Socket_Error (Socket_Errno);\n+      end if;\n \n-            Res := Signalling_Fds.Read (C.int (RSig));\n+      --  If Select was resumed because of read signalling socket, read this\n+      --  data and remove socket from set.\n \n-            if Res = Failure then\n-               Raise_Socket_Error (Socket_Errno);\n-            end if;\n+      if Is_Set (RSet, RSig) then\n+         Clear (RSet, RSig);\n \n-            Status := Aborted;\n+         Res := Signalling_Fds.Read (C.int (RSig));\n \n-         elsif Res = 0 then\n-            Status := Expired;\n+         if Res = Failure then\n+            Raise_Socket_Error (Socket_Errno);\n          end if;\n \n-         --  Update RSet, WSet and ESet in regard to their new socket sets\n+         Status := Aborted;\n \n-         Narrow (RSet);\n-         Narrow (WSet);\n-         Narrow (ESet);\n-\n-         --  Reset RSet as it should be if R_Sig_Socket was not added\n-\n-         if Is_Empty (RSet) then\n-            Empty (RSet);\n-         end if;\n-\n-         if Is_Empty (WSet) then\n-            Empty (WSet);\n-         end if;\n+      elsif Res = 0 then\n+         Status := Expired;\n+      end if;\n \n-         if Is_Empty (ESet) then\n-            Empty (ESet);\n-         end if;\n+      --  Update RSet, WSet and ESet in regard to their new socket sets\n \n-         --  Deliver RSet, WSet and ESet\n+      Narrow (RSet);\n+      Narrow (WSet);\n+      Narrow (ESet);\n \n-         Empty (R_Socket_Set);\n-         R_Socket_Set := RSet;\n+      --  Reset RSet as it should be if R_Sig_Socket was not added\n \n-         Empty (W_Socket_Set);\n-         W_Socket_Set := WSet;\n+      if Is_Empty (RSet) then\n+         Empty (RSet);\n+      end if;\n \n-         Empty (E_Socket_Set);\n-         E_Socket_Set := ESet;\n+      if Is_Empty (WSet) then\n+         Empty (WSet);\n+      end if;\n \n-      exception\n-         when Socket_Error =>\n+      if Is_Empty (ESet) then\n+         Empty (ESet);\n+      end if;\n \n-            --  The local socket sets must be emptied before propagating\n-            --  Socket_Error so the associated storage is freed.\n+      --  Deliver RSet, WSet and ESet\n \n-            Empty (RSet);\n-            Empty (WSet);\n-            Empty (ESet);\n-            raise;\n-      end;\n+      R_Socket_Set := RSet;\n+      W_Socket_Set := WSet;\n+      E_Socket_Set := ESet;\n    end Check_Selector;\n \n    -----------\n@@ -571,8 +550,8 @@ package body GNAT.Sockets is\n       Last : aliased C.int := C.int (Item.Last);\n    begin\n       if Item.Last /= No_Socket then\n-         Remove_Socket_From_Set (Item.Set, C.int (Socket));\n-         Last_Socket_In_Set (Item.Set, Last'Unchecked_Access);\n+         Remove_Socket_From_Set (Item.Set'Access, C.int (Socket));\n+         Last_Socket_In_Set (Item.Set'Access, Last'Unchecked_Access);\n          Item.Last := Socket_Type (Last);\n       end if;\n    end Clear;\n@@ -737,11 +716,7 @@ package body GNAT.Sockets is\n       Target : in out Socket_Set_Type)\n    is\n    begin\n-      Empty (Target);\n-      if Source.Last /= No_Socket then\n-         Target.Set  := New_Socket_Set (Source.Set);\n-         Target.Last := Source.Last;\n-      end if;\n+      Target := Source;\n    end Copy;\n \n    ---------------------\n@@ -795,11 +770,7 @@ package body GNAT.Sockets is\n \n    procedure Empty  (Item : in out Socket_Set_Type) is\n    begin\n-      if Item.Set /= No_Fd_Set_Access then\n-         Free_Socket_Set (Item.Set);\n-         Item.Set := No_Fd_Set_Access;\n-      end if;\n-\n+      Reset_Socket_Set (Item.Set'Access);\n       Item.Last := No_Socket;\n    end Empty;\n \n@@ -842,7 +813,7 @@ package body GNAT.Sockets is\n    begin\n       if Item.Last /= No_Socket then\n          Get_Socket_From_Set\n-           (Item.Set, L'Unchecked_Access, S'Unchecked_Access);\n+           (Item.Set'Access, L'Unchecked_Access, S'Unchecked_Access);\n          Item.Last := Socket_Type (L);\n          Socket    := Socket_Type (S);\n       else\n@@ -1340,7 +1311,7 @@ package body GNAT.Sockets is\n    begin\n       return Item.Last /= No_Socket\n         and then Socket <= Item.Last\n-        and then Is_Socket_In_Set (Item.Set, C.int (Socket)) /= 0;\n+        and then Is_Socket_In_Set (Item.Set'Access, C.int (Socket)) /= 0;\n    end Is_Set;\n \n    -------------------\n@@ -1365,8 +1336,8 @@ package body GNAT.Sockets is\n    procedure Narrow (Item : in out Socket_Set_Type) is\n       Last : aliased C.int := C.int (Item.Last);\n    begin\n-      if Item.Set /= No_Fd_Set_Access then\n-         Last_Socket_In_Set (Item.Set, Last'Unchecked_Access);\n+      if Item.Last /= No_Socket then\n+         Last_Socket_In_Set (Item.Set'Access, Last'Unchecked_Access);\n          Item.Last := Socket_Type (Last);\n       end if;\n    end Narrow;\n@@ -1858,15 +1829,16 @@ package body GNAT.Sockets is\n \n    procedure Set (Item : in out Socket_Set_Type; Socket : Socket_Type) is\n    begin\n-      if Item.Set = No_Fd_Set_Access then\n-         Item.Set  := New_Socket_Set (No_Fd_Set_Access);\n+      if Item.Last = No_Socket then\n+         --  Uninitialized socket set, make sure it is properly zeroed out\n+\n+         Reset_Socket_Set (Item.Set'Access);\n          Item.Last := Socket;\n \n       elsif Item.Last < Socket then\n          Item.Last := Socket;\n       end if;\n-\n-      Insert_Socket_In_Set (Item.Set, C.int (Socket));\n+      Insert_Socket_In_Set (Item.Set'Access, C.int (Socket));\n    end Set;\n \n    ----------------------"}, {"sha": "be7325fc22b521c918666760a3c32785c62568bb", "filename": "gcc/ada/g-socket.ads", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socket.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socket.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socket.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -52,7 +52,10 @@ with Ada.Exceptions;\n with Ada.Streams;\n with Ada.Unchecked_Deallocation;\n \n+with Interfaces.C;\n+\n with System.OS_Constants;\n+with System.Storage_Elements;\n \n package GNAT.Sockets is\n \n@@ -963,9 +966,9 @@ package GNAT.Sockets is\n \n    type Socket_Set_Type is limited private;\n    --  This type allows to manipulate sets of sockets. It allows to wait for\n-   --  events on multiple endpoints at one time. This is an access type on a\n-   --  system dependent structure. To avoid memory leaks it is highly\n-   --  recommended to clean the access value with procedure Empty.\n+   --  events on multiple endpoints at one time. This type used to contain\n+   --  a pointer to dynamically allocated storage, but this is not the case\n+   --  anymore, and no special precautions are required to avoid memory leaks.\n \n    procedure Clear (Item : in out Socket_Set_Type; Socket : Socket_Type);\n    --  Remove Socket from Item\n@@ -974,7 +977,7 @@ package GNAT.Sockets is\n    --  Copy Source into Target as Socket_Set_Type is limited private\n \n    procedure Empty (Item : in out Socket_Set_Type);\n-   --  Remove all Sockets from Item and deallocate internal data\n+   --  Remove all Sockets from Item\n \n    procedure Get (Item : in out Socket_Set_Type; Socket : out Socket_Type);\n    --  Extract a Socket from socket set Item. Socket is set to\n@@ -1053,8 +1056,7 @@ package GNAT.Sockets is\n    procedure Abort_Selector (Selector : Selector_Type);\n    --  Send an abort signal to the selector\n \n-   type Fd_Set_Access is private;\n-   No_Fd_Set_Access : constant Fd_Set_Access;\n+   type Fd_Set is private;\n    --  ??? This type must not be used directly, it needs to be visible because\n    --  it is used in the visible part of GNAT.Sockets.Thin_Common. This is\n    --  really an inversion of abstraction. The private part of GNAT.Sockets\n@@ -1076,14 +1078,17 @@ private\n \n    pragma Volatile (Selector_Type);\n \n-   type Fd_Set is null record;\n+   type Fd_Set is\n+     new System.Storage_Elements.Storage_Array (1 .. SOSC.SIZEOF_fd_set);\n+   for Fd_Set'Alignment use Interfaces.C.int'Alignment;\n+\n    type Fd_Set_Access is access all Fd_Set;\n    pragma Convention (C, Fd_Set_Access);\n    No_Fd_Set_Access : constant Fd_Set_Access := null;\n \n    type Socket_Set_Type is record\n-      Last : Socket_Type       := No_Socket;\n-      Set  : Fd_Set_Access;\n+      Last : Socket_Type := No_Socket;\n+      Set  : aliased Fd_Set;\n    end record;\n \n    subtype Inet_Addr_Comp_Type is Natural range 0 .. 255;"}, {"sha": "a99c715fb31f5b0fd6eb8a25574933964e60cdf3", "filename": "gcc/ada/g-socthi-mingw.adb", "status": "modified", "additions": 27, "deletions": 53, "changes": 80, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi-mingw.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -58,9 +58,9 @@ package body GNAT.Sockets.Thin is\n \n    function Standard_Select\n      (Nfds      : C.int;\n-      Readfds   : Fd_Set_Access;\n-      Writefds  : Fd_Set_Access;\n-      Exceptfds : Fd_Set_Access;\n+      Readfds   : access Fd_Set;\n+      Writefds  : access Fd_Set;\n+      Exceptfds : access Fd_Set;\n       Timeout   : Timeval_Access) return C.int;\n    pragma Import (Stdcall, Standard_Select, \"select\");\n \n@@ -286,17 +286,15 @@ package body GNAT.Sockets.Thin is\n \n    function C_Select\n      (Nfds      : C.int;\n-      Readfds   : Fd_Set_Access;\n-      Writefds  : Fd_Set_Access;\n-      Exceptfds : Fd_Set_Access;\n+      Readfds   : access Fd_Set;\n+      Writefds  : access Fd_Set;\n+      Exceptfds : access Fd_Set;\n       Timeout   : Timeval_Access) return C.int\n    is\n       pragma Warnings (Off, Exceptfds);\n \n-      RFS  : constant Fd_Set_Access := Readfds;\n-      WFS  : constant Fd_Set_Access := Writefds;\n-      WFSC : Fd_Set_Access := No_Fd_Set_Access;\n-      EFS  : Fd_Set_Access := Exceptfds;\n+      Original_WFS : aliased constant Fd_Set := Writefds.all;\n+\n       Res  : C.int;\n       S    : aliased C.int;\n       Last : aliased C.int;\n@@ -311,36 +309,27 @@ package body GNAT.Sockets.Thin is\n       --  the initial write fd set, then move the socket from the\n       --  exception fd set to the write fd set.\n \n-      if WFS /= No_Fd_Set_Access then\n+      if Writefds /= No_Fd_Set_Access then\n          --  Add any socket present in write fd set into exception fd set\n \n-         if EFS = No_Fd_Set_Access then\n-            EFS := New_Socket_Set (WFS);\n-\n-         else\n-            WFSC := New_Socket_Set (WFS);\n-\n+         declare\n+            WFS : aliased Fd_Set := Writefds.all;\n+         begin\n             Last := Nfds - 1;\n             loop\n                Get_Socket_From_Set\n-                 (WFSC, S'Unchecked_Access, Last'Unchecked_Access);\n+                 (WFS'Access, S'Unchecked_Access, Last'Unchecked_Access);\n                exit when S = -1;\n-               Insert_Socket_In_Set (EFS, S);\n+               Insert_Socket_In_Set (Exceptfds, S);\n             end loop;\n-\n-            Free_Socket_Set (WFSC);\n-         end if;\n-\n-         --  Keep a copy of write fd set\n-\n-         WFSC := New_Socket_Set (WFS);\n+         end;\n       end if;\n \n-      Res := Standard_Select (Nfds, RFS, WFS, EFS, Timeout);\n+      Res := Standard_Select (Nfds, Readfds, Writefds, Exceptfds, Timeout);\n \n-      if EFS /= No_Fd_Set_Access then\n+      if Exceptfds /= No_Fd_Set_Access then\n          declare\n-            EFSC    : constant Fd_Set_Access := New_Socket_Set (EFS);\n+            EFSC    : aliased Fd_Set := Exceptfds.all;\n             Flag    : constant C.int := SOSC.MSG_PEEK + SOSC.MSG_OOB;\n             Buffer  : Character;\n             Length  : C.int;\n@@ -350,7 +339,7 @@ package body GNAT.Sockets.Thin is\n             Last := Nfds - 1;\n             loop\n                Get_Socket_From_Set\n-                 (EFSC, S'Unchecked_Access, Last'Unchecked_Access);\n+                 (EFSC'Access, S'Unchecked_Access, Last'Unchecked_Access);\n \n                --  No more sockets in EFSC\n \n@@ -359,42 +348,27 @@ package body GNAT.Sockets.Thin is\n                --  Check out-of-band data\n \n                Length := C_Recvfrom\n-                 (S, Buffer'Address, 1, Flag,\n-                  null, Fromlen'Unchecked_Access);\n+                 (S, Buffer'Address, 1, Flag, null, Fromlen'Unchecked_Access);\n \n                --  If the signal is not an out-of-band data, then it\n                --  is a connection failure notification.\n \n                if Length = -1 then\n-                  Remove_Socket_From_Set (EFS, S);\n+                  Remove_Socket_From_Set (Exceptfds, S);\n \n-                  --  If S is present in the initial write fd set,\n-                  --  move it from exception fd set back to write fd\n-                  --  set. Otherwise, ignore this event since the user\n-                  --  is not watching for it.\n+                  --  If S is present in the initial write fd set, move it from\n+                  --  exception fd set back to write fd set. Otherwise, ignore\n+                  --  this event since the user is not watching for it.\n \n-                  if WFSC /= No_Fd_Set_Access\n-                    and then (Is_Socket_In_Set (WFSC, S) /= 0)\n+                  if Writefds /= No_Fd_Set_Access\n+                    and then (Is_Socket_In_Set (Original_WFS'Access, S) /= 0)\n                   then\n-                     Insert_Socket_In_Set (WFS, S);\n+                     Insert_Socket_In_Set (Writefds, S);\n                   end if;\n                end if;\n             end loop;\n-\n-            Free_Socket_Set (EFSC);\n          end;\n-\n-         if Exceptfds = No_Fd_Set_Access then\n-            Free_Socket_Set (EFS);\n-         end if;\n       end if;\n-\n-      --  Free any copy of write fd set\n-\n-      if WFSC /= No_Fd_Set_Access then\n-         Free_Socket_Set (WFSC);\n-      end if;\n-\n       return Res;\n    end C_Select;\n "}, {"sha": "ae4aeea40194ee1dddec0d739950f3b10e6f4b0c", "filename": "gcc/ada/g-socthi-mingw.ads", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-mingw.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-mingw.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi-mingw.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -148,9 +148,9 @@ package GNAT.Sockets.Thin is\n \n    function C_Select\n      (Nfds      : C.int;\n-      Readfds   : Fd_Set_Access;\n-      Writefds  : Fd_Set_Access;\n-      Exceptfds : Fd_Set_Access;\n+      Readfds   : access Fd_Set;\n+      Writefds  : access Fd_Set;\n+      Exceptfds : access Fd_Set;\n       Timeout   : Timeval_Access) return C.int;\n \n    function C_Send"}, {"sha": "77c61cc5a07c70049cbdb2321d3837de04a77b24", "filename": "gcc/ada/g-socthi-vms.adb", "status": "modified", "additions": 10, "deletions": 14, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vms.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vms.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi-vms.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -40,8 +40,7 @@ with Interfaces.C; use Interfaces.C;\n \n package body GNAT.Sockets.Thin is\n \n-   Non_Blocking_Sockets : constant Fd_Set_Access :=\n-                            New_Socket_Set (No_Fd_Set_Access);\n+   Non_Blocking_Sockets : aliased Fd_Set;\n    --  When this package is initialized with Process_Blocking_IO set\n    --  to True, sockets are set in non-blocking mode to avoid blocking\n    --  the whole process when a thread wants to perform a blocking IO\n@@ -113,7 +112,7 @@ package body GNAT.Sockets.Thin is\n      (Domain, Typ, Protocol : C.int) return C.int;\n    pragma Import (C, Syscall_Socket, \"socket\");\n \n-   function  Non_Blocking_Socket (S : C.int) return Boolean;\n+   function Non_Blocking_Socket (S : C.int) return Boolean;\n    procedure Set_Non_Blocking_Socket (S : C.int; V : Boolean);\n \n    --------------\n@@ -178,32 +177,29 @@ package body GNAT.Sockets.Thin is\n       end if;\n \n       declare\n-         WSet : Fd_Set_Access;\n+         WSet : aliased Fd_Set;\n          Now  : aliased Timeval;\n \n       begin\n-         WSet := New_Socket_Set (No_Fd_Set_Access);\n+         Reset_Socket_Set (WSet'Access);\n          loop\n-            Insert_Socket_In_Set (WSet, S);\n+            Insert_Socket_In_Set (WSet'Access, S);\n             Now := Immediat;\n             Res := C_Select\n               (S + 1,\n                No_Fd_Set_Access,\n-               WSet,\n+               WSet'Access,\n                No_Fd_Set_Access,\n                Now'Unchecked_Access);\n \n             exit when Res > 0;\n \n             if Res = Failure then\n-               Free_Socket_Set (WSet);\n                return Res;\n             end if;\n \n             delay Quantum;\n          end loop;\n-\n-         Free_Socket_Set (WSet);\n       end;\n \n       Res := Syscall_Connect (S, Name, Namelen);\n@@ -393,7 +389,7 @@ package body GNAT.Sockets.Thin is\n \n    procedure Initialize is\n    begin\n-      null;\n+      Reset_Socket_Set (Non_Blocking_Sockets'Access);\n    end Initialize;\n \n    -------------------------\n@@ -404,7 +400,7 @@ package body GNAT.Sockets.Thin is\n       R : Boolean;\n    begin\n       Task_Lock.Lock;\n-      R := (Is_Socket_In_Set (Non_Blocking_Sockets, S) /= 0);\n+      R := (Is_Socket_In_Set (Non_Blocking_Sockets'Access, S) /= 0);\n       Task_Lock.Unlock;\n       return R;\n    end Non_Blocking_Socket;\n@@ -418,9 +414,9 @@ package body GNAT.Sockets.Thin is\n       Task_Lock.Lock;\n \n       if V then\n-         Insert_Socket_In_Set (Non_Blocking_Sockets, S);\n+         Insert_Socket_In_Set (Non_Blocking_Sockets'Access, S);\n       else\n-         Remove_Socket_From_Set (Non_Blocking_Sockets, S);\n+         Remove_Socket_From_Set (Non_Blocking_Sockets'Access, S);\n       end if;\n \n       Task_Lock.Unlock;"}, {"sha": "47ccf651ffa9a337654aa3e3e2b346e25f969ad0", "filename": "gcc/ada/g-socthi-vms.ads", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vms.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vms.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi-vms.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -151,9 +151,9 @@ package GNAT.Sockets.Thin is\n \n    function C_Select\n      (Nfds      : C.int;\n-      Readfds   : Fd_Set_Access;\n-      Writefds  : Fd_Set_Access;\n-      Exceptfds : Fd_Set_Access;\n+      Readfds   : access Fd_Set;\n+      Writefds  : access Fd_Set;\n+      Exceptfds : access Fd_Set;\n       Timeout   : Timeval_Access) return C.int;\n \n    function C_Send"}, {"sha": "d9d436fc3e155b0901a9f77e45b628a98eb9a602", "filename": "gcc/ada/g-socthi-vxworks.adb", "status": "modified", "additions": 10, "deletions": 16, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vxworks.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vxworks.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi-vxworks.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -44,8 +44,7 @@ with Interfaces.C; use Interfaces.C;\n \n package body GNAT.Sockets.Thin is\n \n-   Non_Blocking_Sockets : constant Fd_Set_Access :=\n-                            New_Socket_Set (No_Fd_Set_Access);\n+   Non_Blocking_Sockets : aliased Fd_Set;\n    --  When this package is initialized with Process_Blocking_IO set\n    --  to True, sockets are set in non-blocking mode to avoid blocking\n    --  the whole process when a thread wants to perform a blocking IO\n@@ -125,7 +124,7 @@ package body GNAT.Sockets.Thin is\n       Protocol : C.int) return C.int;\n    pragma Import (C, Syscall_Socket, \"socket\");\n \n-   function  Non_Blocking_Socket (S : C.int) return Boolean;\n+   function Non_Blocking_Socket (S : C.int) return Boolean;\n    procedure Set_Non_Blocking_Socket (S : C.int; V : Boolean);\n \n    --------------\n@@ -191,33 +190,28 @@ package body GNAT.Sockets.Thin is\n       end if;\n \n       declare\n-         WSet : Fd_Set_Access;\n+         WSet : aliased Fd_Set;\n          Now  : aliased Timeval;\n-\n       begin\n-         WSet := New_Socket_Set (No_Fd_Set_Access);\n-\n+         Reset_Socket_Set (WSet'Access);\n          loop\n-            Insert_Socket_In_Set (WSet, S);\n+            Insert_Socket_In_Set (WSet'Access, S);\n             Now := Immediat;\n             Res := C_Select\n               (S + 1,\n                No_Fd_Set_Access,\n-               WSet,\n+               WSet'Access,\n                No_Fd_Set_Access,\n                Now'Unchecked_Access);\n \n             exit when Res > 0;\n \n             if Res = Failure then\n-               Free_Socket_Set (WSet);\n                return Res;\n             end if;\n \n             delay Quantum;\n          end loop;\n-\n-         Free_Socket_Set (WSet);\n       end;\n \n       Res := Syscall_Connect (S, Name, Namelen);\n@@ -409,7 +403,7 @@ package body GNAT.Sockets.Thin is\n \n    procedure Initialize is\n    begin\n-      null;\n+      Reset_Socket_Set (Non_Blocking_Sockets'Access);\n    end Initialize;\n \n    -------------------------\n@@ -420,7 +414,7 @@ package body GNAT.Sockets.Thin is\n       R : Boolean;\n    begin\n       Task_Lock.Lock;\n-      R := (Is_Socket_In_Set (Non_Blocking_Sockets, S) /= 0);\n+      R := (Is_Socket_In_Set (Non_Blocking_Sockets'Access, S) /= 0);\n       Task_Lock.Unlock;\n       return R;\n    end Non_Blocking_Socket;\n@@ -433,9 +427,9 @@ package body GNAT.Sockets.Thin is\n    begin\n       Task_Lock.Lock;\n       if V then\n-         Insert_Socket_In_Set (Non_Blocking_Sockets, S);\n+         Insert_Socket_In_Set (Non_Blocking_Sockets'Access, S);\n       else\n-         Remove_Socket_From_Set (Non_Blocking_Sockets, S);\n+         Remove_Socket_From_Set (Non_Blocking_Sockets'Access, S);\n       end if;\n \n       Task_Lock.Unlock;"}, {"sha": "5c74e880142396dff9e5d74db28a0940cb34d620", "filename": "gcc/ada/g-socthi-vxworks.ads", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vxworks.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi-vxworks.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi-vxworks.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -149,9 +149,9 @@ package GNAT.Sockets.Thin is\n \n    function C_Select\n      (Nfds      : C.int;\n-      Readfds   : Fd_Set_Access;\n-      Writefds  : Fd_Set_Access;\n-      Exceptfds : Fd_Set_Access;\n+      Readfds   : access Fd_Set;\n+      Writefds  : access Fd_Set;\n+      Exceptfds : access Fd_Set;\n       Timeout   : Timeval_Access) return C.int;\n \n    function C_Send"}, {"sha": "289adbe79326e30e892c1193783a0dd7f2c3b066", "filename": "gcc/ada/g-socthi.adb", "status": "modified", "additions": 9, "deletions": 12, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -44,8 +44,7 @@ with Interfaces.C; use Interfaces.C;\n \n package body GNAT.Sockets.Thin is\n \n-   Non_Blocking_Sockets : constant Fd_Set_Access :=\n-                            New_Socket_Set (No_Fd_Set_Access);\n+   Non_Blocking_Sockets : aliased Fd_Set;\n    --  When this package is initialized with Process_Blocking_IO set\n    --  to True, sockets are set in non-blocking mode to avoid blocking\n    --  the whole process when a thread wants to perform a blocking IO\n@@ -195,32 +194,29 @@ package body GNAT.Sockets.Thin is\n       end if;\n \n       declare\n-         WSet : Fd_Set_Access;\n+         WSet : aliased Fd_Set;\n          Now  : aliased Timeval;\n \n       begin\n-         WSet := New_Socket_Set (No_Fd_Set_Access);\n+         Reset_Socket_Set (WSet'Access);\n          loop\n-            Insert_Socket_In_Set (WSet, S);\n+            Insert_Socket_In_Set (WSet'Access, S);\n             Now := Immediat;\n             Res := C_Select\n               (S + 1,\n                No_Fd_Set_Access,\n-               WSet,\n+               WSet'Access,\n                No_Fd_Set_Access,\n                Now'Unchecked_Access);\n \n             exit when Res > 0;\n \n             if Res = Failure then\n-               Free_Socket_Set (WSet);\n                return Res;\n             end if;\n \n             delay Quantum;\n          end loop;\n-\n-         Free_Socket_Set (WSet);\n       end;\n \n       Res := Syscall_Connect (S, Name, Namelen);\n@@ -412,6 +408,7 @@ package body GNAT.Sockets.Thin is\n    procedure Initialize is\n    begin\n       Disable_All_SIGPIPEs;\n+      Reset_Socket_Set (Non_Blocking_Sockets'Access);\n    end Initialize;\n \n    -------------------------\n@@ -422,7 +419,7 @@ package body GNAT.Sockets.Thin is\n       R : Boolean;\n    begin\n       Task_Lock.Lock;\n-      R := (Is_Socket_In_Set (Non_Blocking_Sockets, S) /= 0);\n+      R := (Is_Socket_In_Set (Non_Blocking_Sockets'Access, S) /= 0);\n       Task_Lock.Unlock;\n       return R;\n    end Non_Blocking_Socket;\n@@ -436,9 +433,9 @@ package body GNAT.Sockets.Thin is\n       Task_Lock.Lock;\n \n       if V then\n-         Insert_Socket_In_Set (Non_Blocking_Sockets, S);\n+         Insert_Socket_In_Set (Non_Blocking_Sockets'Access, S);\n       else\n-         Remove_Socket_From_Set (Non_Blocking_Sockets, S);\n+         Remove_Socket_From_Set (Non_Blocking_Sockets'Access, S);\n       end if;\n \n       Task_Lock.Unlock;"}, {"sha": "eb1119301a4327906eeb95f20e9e48534bea42b3", "filename": "gcc/ada/g-socthi.ads", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-socthi.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -150,9 +150,9 @@ package GNAT.Sockets.Thin is\n \n    function C_Select\n      (Nfds      : C.int;\n-      Readfds   : Fd_Set_Access;\n-      Writefds  : Fd_Set_Access;\n-      Exceptfds : Fd_Set_Access;\n+      Readfds   : access Fd_Set;\n+      Writefds  : access Fd_Set;\n+      Exceptfds : access Fd_Set;\n       Timeout   : Timeval_Access) return C.int;\n \n    function C_Send"}, {"sha": "fc8304757c66c81cbf8a7b66b33302aa06597b57", "filename": "gcc/ada/g-sothco.ads", "status": "modified", "additions": 9, "deletions": 19, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-sothco.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fg-sothco.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-sothco.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -250,11 +250,8 @@ package GNAT.Sockets.Thin_Common is\n    pragma Convention (C, Int_Access);\n    --  Access to C integers\n \n-   procedure Free_Socket_Set (Set : Fd_Set_Access);\n-   --  Free system-dependent socket set\n-\n    procedure Get_Socket_From_Set\n-     (Set    : Fd_Set_Access;\n+     (Set    : access Fd_Set;\n       Socket : Int_Access;\n       Last   : Int_Access);\n    --  Get last socket in Socket and remove it from the socket set. The\n@@ -264,36 +261,31 @@ package GNAT.Sockets.Thin_Common is\n    --  socket set.\n \n    procedure Insert_Socket_In_Set\n-     (Set    : Fd_Set_Access;\n+     (Set    : access Fd_Set;\n       Socket : C.int);\n    --  Insert socket in the socket set\n \n    function  Is_Socket_In_Set\n-     (Set    : Fd_Set_Access;\n+     (Set    : access constant Fd_Set;\n       Socket : C.int) return C.int;\n    --  Check whether Socket is in the socket set, return a non-zero\n    --  value if it is, zero if it is not.\n \n    procedure Last_Socket_In_Set\n-     (Set    : Fd_Set_Access;\n+     (Set    : access Fd_Set;\n       Last   : Int_Access);\n    --  Find the largest socket in the socket set. This is needed for select().\n    --  When Last_Socket_In_Set is called, parameter Last is a maximum value of\n    --  the largest socket. This hint is used to avoid scanning very large\n    --  socket sets. After the call, Last is set back to the real largest socket\n    --  in the socket set.\n \n-   function  New_Socket_Set\n-     (Set : Fd_Set_Access) return Fd_Set_Access;\n-   --  Allocate a new socket set which is a system-dependent structure and\n-   --  initialize by copying Set if it is non-null, by making it empty\n-   --  otherwise.\n-\n-   procedure Remove_Socket_From_Set\n-     (Set    : Fd_Set_Access;\n-      Socket : C.int);\n+   procedure Remove_Socket_From_Set (Set : access Fd_Set; Socket : C.int);\n    --  Remove socket from the socket set\n \n+   procedure Reset_Socket_Set (Set : access Fd_Set);\n+   --  Make Set empty\n+\n    ------------------------------------------\n    -- Pairs of signalling file descriptors --\n    ------------------------------------------\n@@ -313,12 +305,10 @@ package GNAT.Sockets.Thin_Common is\n    --  file descriptors.\n \n private\n-\n-   pragma Import (C, Free_Socket_Set, \"__gnat_free_socket_set\");\n    pragma Import (C, Get_Socket_From_Set, \"__gnat_get_socket_from_set\");\n    pragma Import (C, Is_Socket_In_Set, \"__gnat_is_socket_in_set\");\n    pragma Import (C, Last_Socket_In_Set, \"__gnat_last_socket_in_set\");\n-   pragma Import (C, New_Socket_Set, \"__gnat_new_socket_set\");\n    pragma Import (C, Insert_Socket_In_Set, \"__gnat_insert_socket_in_set\");\n    pragma Import (C, Remove_Socket_From_Set, \"__gnat_remove_socket_from_set\");\n+   pragma Import (C, Reset_Socket_Set, \"__gnat_reset_socket_set\");\n end GNAT.Sockets.Thin_Common;"}, {"sha": "a59fc30d1cadd81f154f05d1926e2ca961099a36", "filename": "gcc/ada/gnat1drv.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnat1drv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnat1drv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat1drv.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -393,8 +393,7 @@ begin\n          if Targparm.GCC_ZCX_Support_On_Target then\n             Exception_Mechanism := Back_End_Exceptions;\n          else\n-            Osint.Fail\n-              (\"Zero Cost Exceptions not supported on this target\");\n+            Osint.Fail (\"Zero Cost Exceptions not supported on this target\");\n          end if;\n       end if;\n "}, {"sha": "ddb62c58c7cbed69020942363025e3ba9d64bf5e", "filename": "gcc/ada/gnatcmd.adb", "status": "modified", "additions": 12, "deletions": 11, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatcmd.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatcmd.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatcmd.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -1479,9 +1479,9 @@ begin\n             if Command_List (The_Command).VMS_Only then\n                Non_VMS_Usage;\n                Fail\n-                 (\"Command \"\"\",\n-                  Command_List (The_Command).Cname.all,\n-                  \"\"\" can only be used on VMS\");\n+                 (\"Command \"\"\"\n+                  & Command_List (The_Command).Cname.all\n+                  & \"\"\" can only be used on VMS\");\n             end if;\n \n          exception\n@@ -1500,7 +1500,7 @@ begin\n                exception\n                   when Constraint_Error =>\n                      Non_VMS_Usage;\n-                     Fail (\"Unknown command: \", Argument (Command_Arg));\n+                     Fail (\"Unknown command: \" & Argument (Command_Arg));\n                end;\n          end;\n \n@@ -1750,7 +1750,7 @@ begin\n                         when '2' =>\n                            Current_Verbosity := Prj.High;\n                         when others =>\n-                           Fail (\"Invalid switch: \", Argv.all);\n+                           Fail (\"Invalid switch: \" & Argv.all);\n                      end case;\n \n                      Remove_Switch (Arg_Num);\n@@ -1763,9 +1763,10 @@ begin\n \n                      if Project_File /= null then\n                         Fail\n-                          (Argv.all,\n-                           \": second project file forbidden (first is \"\"\",\n-                           Project_File.all & \"\"\")\");\n+                          (Argv.all\n+                           & \": second project file forbidden (first is \"\"\"\n+                           & Project_File.all\n+                           & \"\"\")\");\n \n                      --  The two style project files (-p and -P) cannot be\n                      --  used together.\n@@ -1824,8 +1825,8 @@ begin\n                                 Value => Argv (Equal_Pos + 1 .. Argv'Last));\n                         else\n                            Fail\n-                             (Argv.all,\n-                              \" is not a valid external assignment.\");\n+                             (Argv.all\n+                              & \" is not a valid external assignment.\");\n                         end if;\n                      end;\n \n@@ -1882,7 +1883,7 @@ begin\n             Packages_To_Check => Packages_To_Check);\n \n          if Project = Prj.No_Project then\n-            Fail (\"\"\"\", Project_File.all, \"\"\" processing failed\");\n+            Fail (\"\"\"\" & Project_File.all & \"\"\" processing failed\");\n          end if;\n \n          --  Check if a package with the name of the tool is in the project"}, {"sha": "36e2ee6218d7ac739f4b165730a95e63e84c0fab", "filename": "gcc/ada/gnatls.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatls.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatls.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatls.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1238,7 +1238,7 @@ procedure Gnatls is\n          elsif (Argv'Length = 3 and then Argv (3) = '-')\n            or else (Argv'Length = 4 and then Argv (4) = '-')\n          then\n-            Fail (\"Trailing \"\"-\"\" at the end of \", Argv, \" forbidden.\");\n+            Fail (\"Trailing \"\"-\"\" at the end of \" & Argv & \" forbidden.\");\n \n          --  Processing for -Idir\n "}, {"sha": "7e817b5bf032737ea9d779d4a29a884f07544f45", "filename": "gcc/ada/gnatname.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatname.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatname.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatname.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -186,7 +186,7 @@ procedure Gnatname is\n       Excluded_Pattern_Expected : Boolean;\n \n       procedure Check_Regular_Expression (S : String);\n-      --  Compile string S into a Regexp. Fail if any error.\n+      --  Compile string S into a Regexp, fail if any error\n \n       -----------------------------\n       -- Check_Regular_Expression--\n@@ -199,7 +199,7 @@ procedure Gnatname is\n          Dummy := Compile (S, Glob => True);\n       exception\n          when Error_In_Regexp =>\n-            Fail (\"invalid regular expression \"\"\", S, \"\"\"\");\n+            Fail (\"invalid regular expression \"\"\" & S & \"\"\"\");\n       end Check_Regular_Expression;\n \n    --  Start of processing for Scan_Args"}, {"sha": "dec5257f45c7b09fd6bf9ed707e73c0bee19c45f", "filename": "gcc/ada/gnatsym.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatsym.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgnatsym.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatsym.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2003-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2003-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -160,7 +160,7 @@ procedure Gnatsym is\n                Version_String := new String'(GNAT.Command_Line.Parameter);\n \n             when others =>\n-               Fail (\"invalid switch: \", Full_Switch);\n+               Fail (\"invalid switch: \" & Full_Switch);\n          end case;\n       end loop;\n \n@@ -181,7 +181,7 @@ procedure Gnatsym is\n    exception\n       when Invalid_Switch =>\n          Usage;\n-         Fail (\"invalid switch : \", Full_Switch);\n+         Fail (\"invalid switch : \" & Full_Switch);\n    end Parse_Cmd_Line;\n \n    -----------"}, {"sha": "c4cf14ba93cdca1e36c135de0e52231752a61623", "filename": "gcc/ada/gprep.adb", "status": "modified", "additions": 15, "deletions": 11, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgprep.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fgprep.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgprep.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -236,9 +236,9 @@ package body GPrep is\n             Sinput.Main_Source_File := Deffile;\n \n             if Deffile = No_Source_File then\n-               Fail (\"unable to find definition file \"\"\",\n-                     Get_Name_String (Deffile_Name),\n-                     \"\"\"\");\n+               Fail (\"unable to find definition file \"\"\"\n+                     & Get_Name_String (Deffile_Name)\n+                     & \"\"\"\");\n             end if;\n \n             Scanner.Initialize_Scanner (Deffile);\n@@ -251,8 +251,9 @@ package body GPrep is\n \n       if Total_Errors_Detected > 0 then\n          Errutil.Finalize (Source_Type => \"definition\");\n-         Fail (\"errors in definition file \"\"\",\n-               Get_Name_String (Deffile_Name), \"\"\"\");\n+         Fail (\"errors in definition file \"\"\"\n+               & Get_Name_String (Deffile_Name)\n+               & \"\"\"\");\n       end if;\n \n       --  If -s switch was specified, print a sorted list of symbol names and\n@@ -487,17 +488,19 @@ package body GPrep is\n          exception\n             when others =>\n                Fail\n-                 (\"unable to create output file \"\"\",\n-                  Get_Name_String (Outfile_Name), \"\"\"\");\n+                 (\"unable to create output file \"\"\"\n+                  & Get_Name_String (Outfile_Name)\n+                  & \"\"\"\");\n          end;\n \n          --  Load the input file\n \n          Infile := Sinput.C.Load_File (Get_Name_String (Infile_Name));\n \n          if Infile = No_Source_File then\n-            Fail (\"unable to find input file \"\"\",\n-                  Get_Name_String (Infile_Name), \"\"\"\");\n+            Fail (\"unable to find input file \"\"\"\n+                  & Get_Name_String (Infile_Name)\n+                  & \"\"\"\");\n          end if;\n \n          --  Set Main_Source_File to the input file for the benefit of\n@@ -632,8 +635,9 @@ package body GPrep is\n \n                         exception\n                            when Directory_Error =>\n-                              Fail (\"could not create directory \"\"\",\n-                                    Output, \"\"\"\");\n+                              Fail (\"could not create directory \"\"\"\n+                                    & Output\n+                                    & \"\"\"\");\n                         end;\n                      end if;\n "}, {"sha": "7a0e1e032ab8abc6770a41169364bc33dcd608f0", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 41, "deletions": 43, "changes": 84, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -445,10 +445,10 @@ package body Make is\n    Link_With_Shared_Libgcc : Argument_List_Access :=\n                                No_Shared_Libgcc_Switch'Access;\n \n-   procedure Make_Failed (S1 : String; S2 : String := \"\"; S3 : String := \"\");\n-   --  Delete all temp files created by Gnatmake and call Osint.Fail,\n-   --  with the parameter S1, S2 and S3 (see osint.ads).\n-   --  This is called from the Prj hierarchy and the MLib hierarchy.\n+   procedure Make_Failed (S : String);\n+   --  Delete all temp files created by Gnatmake and call Osint.Fail, with the\n+   --  parameter S (see osint.ads). This is called from the Prj hierarchy and\n+   --  the MLib hierarchy.\n \n    --------------------------\n    -- Obsolete Executables --\n@@ -1305,8 +1305,7 @@ package body Make is\n                            \"it to Global_Compilation_Switches.\",\n                            Element.Location);\n                         Errutil.Finalize;\n-                        Make_Failed\n-                          (\"*** illegal switch \"\"\", Argv, \"\"\"\");\n+                        Make_Failed (\"*** illegal switch \"\"\" & Argv & \"\"\"\");\n                      end if;\n                   end;\n                end if;\n@@ -1360,7 +1359,7 @@ package body Make is\n       Display (Gnatbind.all, Bind_Args (Args'First .. Bind_Last));\n \n       if Gnatbind_Path = null then\n-         Make_Failed (\"error, unable to locate \", Gnatbind.all);\n+         Make_Failed (\"error, unable to locate \" & Gnatbind.all);\n       end if;\n \n       GNAT.OS_Lib.Spawn\n@@ -3132,7 +3131,7 @@ package body Make is\n          Display (Gcc.all, Comp_Args (Args'First .. Comp_Last));\n \n          if Gcc_Path = null then\n-            Make_Failed (\"error, unable to locate \", Gcc.all);\n+            Make_Failed (\"error, unable to locate \" & Gcc.all);\n          end if;\n \n          return\n@@ -3413,11 +3412,11 @@ package body Make is\n                           and then Arguments_Project = No_Project\n                           and then not External_Unit_Compilation_Allowed\n                         then\n-                           Make_Failed (\"external source (\",\n-                                        Get_Name_String (Source_File),\n-                                        \") is not part of any project;\"\n-                                        & \" cannot be compiled without\" &\n-                                        \" gnatmake switch -x\");\n+                           Make_Failed (\"external source (\"\n+                                        & Get_Name_String (Source_File)\n+                                        & \") is not part of any project;\"\n+                                        & \" cannot be compiled without\"\n+                                        & \" gnatmake switch -x\");\n                         end if;\n \n                         --  Is this the first file we have to compile?\n@@ -3923,12 +3922,11 @@ package body Make is\n                if not Is_Regular_File (Path) then\n                   if Debug.Debug_Flag_F then\n                      Make_Failed\n-                       (\"cannot find configuration pragmas file \",\n-                        File_Name (Path));\n+                       (\"cannot find configuration pragmas file \"\n+                        & File_Name (Path));\n                   else\n                      Make_Failed\n-                       (\"cannot find configuration pragmas file \",\n-                        Path);\n+                       (\"cannot find configuration pragmas file \" & Path);\n                   end if;\n                end if;\n \n@@ -3968,12 +3966,12 @@ package body Make is\n                if not Is_Regular_File (Path) then\n                   if Debug.Debug_Flag_F then\n                      Make_Failed\n-                       (\"cannot find configuration pragmas file \",\n-                        File_Name (Path));\n+                       (\"cannot find configuration pragmas file \"\n+                        & File_Name (Path));\n \n                   else\n                      Make_Failed\n-                       (\"cannot find configuration pragmas file \", Path);\n+                       (\"cannot find configuration pragmas file \" & Path);\n                   end if;\n                end if;\n \n@@ -4383,8 +4381,7 @@ package body Make is\n \n                if Proj = No_Project then\n                   Make_Failed\n-                    (\"\"\"\" & Main &\n-                     \"\"\" is not a source of any project\");\n+                    (\"\"\"\" & Main & \"\"\" is not a source of any project\");\n \n                else\n                   --  If there is directory information, check that\n@@ -4416,8 +4413,7 @@ package body Make is\n                      --  Fail if the file cannot be found\n \n                      if Real_Path = null then\n-                        Make_Failed\n-                          (\"file \"\"\" & Main & \"\"\" does not exist\");\n+                        Make_Failed (\"file \"\"\" & Main & \"\"\" does not exist\");\n                      end if;\n \n                      declare\n@@ -4924,7 +4920,7 @@ package body Make is\n \n                      if not At_Least_One_Main then\n                         Make_Failed\n-                          (\"no Ada mains; use -B to build foreign main\");\n+                          (\"no Ada mains, use -B to build foreign main\");\n                      end if;\n                   end;\n \n@@ -5105,9 +5101,9 @@ package body Make is\n             --  We fail if we cannot find the main source file\n \n             if Main_Unit_File_Name = \"\" then\n-               Make_Failed ('\"' & Main_Source_File_Name,\n-                            \"\"\" is not a unit of project \",\n-                            Project_File_Name.all & \".\");\n+               Make_Failed ('\"' & Main_Source_File_Name\n+                            & \"\"\" is not a unit of project \"\n+                            & Project_File_Name.all & \".\");\n             else\n                --  Remove any directory information from the main\n                --  source file name.\n@@ -5445,10 +5441,10 @@ package body Make is\n                                                         No_Path_Information\n                      then\n                         Make_Failed\n-                          (\"no object files to build library for project \"\"\",\n-                           Get_Name_String\n-                             (Project_Tree.Projects.Table (Proj).Name),\n-                           \"\"\"\");\n+                          (\"no object files to build library for project \"\"\"\n+                           & Get_Name_String\n+                              (Project_Tree.Projects.Table (Proj).Name)\n+                           & \"\"\"\");\n                         Project_Tree.Projects.Table\n                           (Proj).Need_To_Build_Lib := False;\n \n@@ -6559,9 +6555,9 @@ package body Make is\n                   --  as an immediate source of the main project file.\n \n                   if Main_Unit_File_Name = \"\" then\n-                     Make_Failed ('\"' & Main_Source_File_Name,\n-                                  \"\"\" is not a unit of project \",\n-                                  Project_File_Name.all & \".\");\n+                     Make_Failed ('\"' & Main_Source_File_Name\n+                                  & \"\"\" is not a unit of project \"\n+                                  & Project_File_Name.all & \".\");\n \n                   else\n                      --  Remove any directory information from the main\n@@ -7005,7 +7001,8 @@ package body Make is\n          end if;\n \n          if Main_Project = No_Project then\n-            Make_Failed (\"\"\"\", Project_File_Name.all, \"\"\" processing failed\");\n+            Make_Failed\n+              (\"\"\"\" & Project_File_Name.all & \"\"\" processing failed\");\n          end if;\n \n          Create_Mapping_File := True;\n@@ -7422,7 +7419,7 @@ package body Make is\n       Display (Gnatlink.all, Link_Args);\n \n       if Gnatlink_Path = null then\n-         Make_Failed (\"error, unable to locate \", Gnatlink.all);\n+         Make_Failed (\"error, unable to locate \" & Gnatlink.all);\n       end if;\n \n       GNAT.OS_Lib.Spawn (Gnatlink_Path.all, Link_Args, Success);\n@@ -7518,10 +7515,10 @@ package body Make is\n    -- Make_Failed --\n    -----------------\n \n-   procedure Make_Failed (S1 : String; S2 : String := \"\"; S3 : String := \"\") is\n+   procedure Make_Failed (S : String) is\n    begin\n       Delete_All_Temp_Files;\n-      Osint.Fail (S1, S2, S3);\n+      Osint.Fail (S);\n    end Make_Failed;\n \n    --------------------\n@@ -7729,7 +7726,7 @@ package body Make is\n             Make_Failed (\"object directory path name missing after -D\");\n \n          elsif not Is_Directory (Argv) then\n-            Make_Failed (\"cannot find object directory \"\"\", Argv, \"\"\"\");\n+            Make_Failed (\"cannot find object directory \"\"\" & Argv & \"\"\"\");\n \n          else\n             Add_Lib_Search_Dir (Argv);\n@@ -7950,7 +7947,7 @@ package body Make is\n            or else (Argv'Length > 10 and then Argv (1 .. 10) = \"-GNATLINK=\")\n            or else (Argv'Length > 10 and then Argv (1 .. 10) = \"-GNATBIND=\")\n          then\n-            Make_Failed (\"option \", Argv, \" should start with '--'\");\n+            Make_Failed (\"option \" & Argv & \" should start with '--'\");\n \n          --  -I-\n \n@@ -7962,7 +7959,8 @@ package body Make is\n          elsif (Argv'Length = 3 and then Argv (3) = '-')\n            or else (Argv'Length = 4 and then Argv (4) = '-')\n          then\n-            Make_Failed (\"trailing \"\"-\"\" at the end of \", Argv, \" forbidden.\");\n+            Make_Failed\n+              (\"trailing \"\"-\"\" at the end of \" & Argv & \" forbidden.\");\n \n          --  -Idir\n \n@@ -8048,7 +8046,7 @@ package body Make is\n          elsif Argv'Last > 2 and then Argv (2) = 'C' then\n             if And_Save then\n                if Argv (3) /= '=' or else Argv'Last <= 3 then\n-                  Make_Failed (\"illegal switch \", Argv);\n+                  Make_Failed (\"illegal switch \" & Argv);\n                end if;\n \n                Gnatmake_Mapping_File := new String'(Argv (4 .. Argv'Last));"}, {"sha": "afddc059b770a64248c355888c2b28942123685b", "filename": "gcc/ada/makeutl.adb", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmakeutl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmakeutl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -670,9 +670,9 @@ package body Makeutl is\n                if not Is_Absolute_Path (Sw (Start .. Sw'Last)) then\n                   if Parent = null or else Parent'Length = 0 then\n                      Do_Fail\n-                       (\"relative search path switches (\"\"\",\n-                        Sw,\n-                        \"\"\") are not allowed\");\n+                       (\"relative search path switches (\"\"\"\n+                        & Sw\n+                        & \"\"\") are not allowed\");\n \n                   else\n                      Switch :=\n@@ -688,7 +688,7 @@ package body Makeutl is\n                if not Is_Absolute_Path (Sw) then\n                   if Parent = null or else Parent'Length = 0 then\n                      Do_Fail\n-                       (\"relative paths (\"\"\", Sw, \"\"\") are not allowed\");\n+                       (\"relative paths (\"\"\" & Sw & \"\"\") are not allowed\");\n \n                   else\n                      Switch :="}, {"sha": "705e6e724360e29595d7bd390eb7b01d784ff221", "filename": "gcc/ada/makeutl.ads", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmakeutl.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmakeutl.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -32,10 +32,7 @@ with GNAT.OS_Lib; use GNAT.OS_Lib;\n \n package Makeutl is\n \n-   type Fail_Proc is access procedure\n-     (S1 : String;\n-      S2 : String := \"\";\n-      S3 : String := \"\");\n+   type Fail_Proc is access procedure (S : String);\n    Do_Fail : Fail_Proc := Osint.Fail'Access;\n    --  Failing procedure called from procedure Test_If_Relative_Path below.\n    --  May be redirected."}, {"sha": "66951e63dd2aadad5ce560d9f06632cf583466af", "filename": "gcc/ada/mlib-prj.adb", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-prj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-prj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-prj.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -828,7 +828,7 @@ package body MLib.Prj is\n       --  Fail if project is not a library project\n \n       if not Data.Library then\n-         Com.Fail (\"project \"\"\", Project_Name, \"\"\" has no library\");\n+         Com.Fail (\"project \"\"\" & Project_Name & \"\"\" has no library\");\n       end if;\n \n       --  Do not attempt to build the library if it is externally built\n@@ -868,11 +868,11 @@ package body MLib.Prj is\n \n          if Bind then\n             if Gnatbind_Path = null then\n-               Com.Fail (\"unable to locate \", Gnatbind);\n+               Com.Fail (\"unable to locate \" & Gnatbind);\n             end if;\n \n             if Gcc_Path = null then\n-               Com.Fail (\"unable to locate \", Gcc);\n+               Com.Fail (\"unable to locate \" & Gcc);\n             end if;\n \n             --  Allocate Arguments, if it is the first time we see a standalone\n@@ -1176,8 +1176,8 @@ package body MLib.Prj is\n             end if;\n \n             if not Success then\n-               Com.Fail (\"could not bind standalone library \",\n-                         Get_Name_String (Data.Library_Name));\n+               Com.Fail (\"could not bind standalone library \"\n+                         & Get_Name_String (Data.Library_Name));\n             end if;\n          end if;\n \n@@ -1268,8 +1268,8 @@ package body MLib.Prj is\n \n             if not Success then\n                Com.Fail\n-                 (\"could not compile binder generated file for library \",\n-                  Get_Name_String (Data.Library_Name));\n+                (\"could not compile binder generated file for library \"\n+                  & Get_Name_String (Data.Library_Name));\n             end if;\n \n             --  Process binder generated file for pragmas Linker_Options\n@@ -1532,10 +1532,10 @@ package body MLib.Prj is\n \n                exception\n                   when Directory_Error =>\n-                     Com.Fail (\"cannot find object directory \"\"\",\n-                               Get_Name_String\n-                                 (Data.Object_Directory.Display_Name),\n-                               \"\"\"\");\n+                     Com.Fail (\"cannot find object directory \"\"\"\n+                               & Get_Name_String\n+                                  (Data.Object_Directory.Display_Name)\n+                               & \"\"\"\");\n                end;\n             end if;\n \n@@ -1817,9 +1817,9 @@ package body MLib.Prj is\n             exception\n                when others =>\n                   Com.Fail\n-                    (\"unable to access library directory \"\"\",\n-                     Name_Buffer (1 .. Name_Len),\n-                     \"\"\"\");\n+                    (\"unable to access library directory \"\"\"\n+                     & Name_Buffer (1 .. Name_Len)\n+                     & \"\"\"\");\n             end;\n \n             Open (Dir, \".\");\n@@ -1972,9 +1972,9 @@ package body MLib.Prj is\n             exception\n                when others =>\n                   Com.Fail\n-                    (\"unable to access library source copy directory \"\"\",\n-                     Name_Buffer (1 .. Name_Len),\n-                     \"\"\"\");\n+                    (\"unable to access library source copy directory \"\"\"\n+                     & Name_Buffer (1 .. Name_Len)\n+                     & \"\"\"\");\n             end;\n \n             declare\n@@ -2060,7 +2060,7 @@ package body MLib.Prj is\n    procedure Check (Filename : String) is\n    begin\n       if not Is_Regular_File (Filename) then\n-         Com.Fail (Filename, \" not found.\");\n+         Com.Fail (Filename & \" not found.\");\n       end if;\n    end Check;\n "}, {"sha": "c9ffa0d837e14e69fc530fea24f25210e2c090f3", "filename": "gcc/ada/mlib-tgt-specific-vms-alpha.adb", "status": "modified", "additions": 16, "deletions": 11, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-tgt-specific-vms-alpha.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-tgt-specific-vms-alpha.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-specific-vms-alpha.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -196,8 +196,9 @@ package body MLib.Tgt.Specific is\n \n             exception\n                when Constraint_Error =>\n-                  Fail (\"illegal version \"\"\", Lib_Version,\n-                        \"\"\" (on VMS version must be a positive number)\");\n+                  Fail (\"illegal version \"\"\"\n+                        & Lib_Version\n+                        & \"\"\" (on VMS version must be a positive number)\");\n                   return \"\";\n             end;\n          end if;\n@@ -239,7 +240,7 @@ package body MLib.Tgt.Specific is\n          Gnatsym_Path := Locate_Exec_On_Path (Gnatsym_Name);\n \n          if Gnatsym_Path = null then\n-            Fail (Gnatsym_Name, \" not found in path\");\n+            Fail (Gnatsym_Name & \" not found in path\");\n          end if;\n       end if;\n \n@@ -313,8 +314,9 @@ package body MLib.Tgt.Specific is\n                end if;\n \n                if not OK then\n-                  Fail (\"creation of auto-init assembly file \"\"\",\n-                        Macro_File_Name, \"\"\" failed\");\n+                  Fail (\"creation of auto-init assembly file \"\"\"\n+                        & Macro_File_Name\n+                        & \"\"\" failed\");\n                end if;\n             end;\n \n@@ -330,17 +332,19 @@ package body MLib.Tgt.Specific is\n                                    mode (mode'First)'Address);\n \n             if Popen_Result = Null_Address then\n-               Fail (\"assembly of auto-init assembly file \"\"\",\n-                     Macro_File_Name, \"\"\" failed\");\n+               Fail (\"assembly of auto-init assembly file \"\"\"\n+                     & Macro_File_Name\n+                     & \"\"\" failed\");\n             end if;\n \n             --  Wait for the end of execution of the macro-assembler\n \n             Pclose_Result := pclose (Popen_Result);\n \n             if Pclose_Result < 0 then\n-               Fail (\"assembly of auto init assembly file \"\"\",\n-                     Macro_File_Name, \"\"\" failed\");\n+               Fail (\"assembly of auto init assembly file \"\"\"\n+                     & Macro_File_Name\n+                     & \"\"\" failed\");\n             end if;\n \n             --  Add the generated object file to the list of objects to be\n@@ -432,8 +436,9 @@ package body MLib.Tgt.Specific is\n              Success      => Success);\n \n       if not Success then\n-         Fail (\"unable to create symbol file for library \"\"\",\n-               Lib_Filename, \"\"\"\");\n+         Fail (\"unable to create symbol file for library \"\"\"\n+               & Lib_Filename\n+               & \"\"\"\");\n       end if;\n \n       Free (Arguments);"}, {"sha": "247b2eb304b96ba79e1c3b4cc02a2986d99f4701", "filename": "gcc/ada/mlib-tgt-specific-vms-ia64.adb", "status": "modified", "additions": 17, "deletions": 12, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-tgt-specific-vms-ia64.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-tgt-specific-vms-ia64.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-specific-vms-ia64.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -195,8 +195,9 @@ package body MLib.Tgt.Specific is\n \n             exception\n                when Constraint_Error =>\n-                  Fail (\"illegal version \"\"\", Lib_Version,\n-                        \"\"\" (on VMS version must be a positive number)\");\n+                  Fail (\"illegal version \"\"\"\n+                        & Lib_Version\n+                        & \"\"\" (on VMS version must be a positive number)\");\n                   return \"\";\n             end;\n          end if;\n@@ -221,7 +222,7 @@ package body MLib.Tgt.Specific is\n       then\n          For_Linker_Opt := new String'(\"--for-linker=\" & Opt_File_Name);\n       else\n-         Fail (\"Options File \"\"\", Opt_File_Name, \"\"\" must end with .opt\");\n+         Fail (\"Options File \"\"\" & Opt_File_Name & \"\"\" must end with .opt\");\n       end if;\n \n       VMS_Options (VMS_Options'First) := For_Linker_Opt;\n@@ -236,7 +237,7 @@ package body MLib.Tgt.Specific is\n          Gnatsym_Path := Locate_Exec_On_Path (Gnatsym_Name);\n \n          if Gnatsym_Path = null then\n-            Fail (Gnatsym_Name, \" not found in path\");\n+            Fail (Gnatsym_Name & \" not found in path\");\n          end if;\n       end if;\n \n@@ -316,8 +317,9 @@ package body MLib.Tgt.Specific is\n                end if;\n \n                if not OK then\n-                  Fail (\"creation of auto-init assembly file \"\"\",\n-                        Macro_File_Name, \"\"\" failed\");\n+                  Fail (\"creation of auto-init assembly file \"\"\"\n+                        & Macro_File_Name\n+                        & \"\"\" failed\");\n                end if;\n             end;\n \n@@ -333,17 +335,19 @@ package body MLib.Tgt.Specific is\n                                    mode (mode'First)'Address);\n \n             if Popen_Result = Null_Address then\n-               Fail (\"assembly of auto-init assembly file \"\"\",\n-                     Macro_File_Name, \"\"\" failed\");\n+               Fail (\"assembly of auto-init assembly file \"\"\"\n+                     & Macro_File_Name\n+                     & \"\"\" failed\");\n             end if;\n \n             --  Wait for the end of execution of the macro-assembler\n \n             Pclose_Result := pclose (Popen_Result);\n \n             if Pclose_Result < 0 then\n-               Fail (\"assembly of auto init assembly file \"\"\",\n-                     Macro_File_Name, \"\"\" failed\");\n+               Fail (\"assembly of auto init assembly file \"\"\"\n+                     & Macro_File_Name\n+                     & \"\"\" failed\");\n             end if;\n \n             --  Add the generated object file to the list of objects to be\n@@ -434,8 +438,9 @@ package body MLib.Tgt.Specific is\n              Success      => Success);\n \n       if not Success then\n-         Fail (\"unable to create symbol file for library \"\"\",\n-               Lib_Filename, \"\"\"\");\n+         Fail (\"unable to create symbol file for library \"\"\"\n+               & Lib_Filename\n+               & \"\"\"\");\n       end if;\n \n       Free (Arguments);"}, {"sha": "78378a673b9fb8e24f4433e6d8a351b12ff272af", "filename": "gcc/ada/mlib-utl.adb", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-utl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib-utl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-utl.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -150,7 +150,7 @@ package body MLib.Utl is\n          end if;\n \n          if Ar_Exec = null then\n-            Fail (Ar_Name.all, \" not found in path\");\n+            Fail (Ar_Name.all & \" not found in path\");\n \n          elsif Opt.Verbose_Mode then\n             Write_Str  (\"found \");\n@@ -275,7 +275,7 @@ package body MLib.Utl is\n       end if;\n \n       if not Success then\n-         Fail (Ar_Name.all, \" execution error.\");\n+         Fail (Ar_Name.all & \" execution error.\");\n       end if;\n \n       --  If we have found ranlib, run it over the library\n@@ -293,7 +293,7 @@ package body MLib.Utl is\n             Success);\n \n          if not Success then\n-            Fail (Ranlib_Name.all, \" execution error.\");\n+            Fail (Ranlib_Name.all & \" execution error.\");\n          end if;\n       end if;\n    end Ar;\n@@ -418,7 +418,7 @@ package body MLib.Utl is\n             Gcc_Exec := Locate_Exec_On_Path (Gcc_Name.all);\n \n             if Gcc_Exec = null then\n-               Fail (Gcc_Name.all, \" not found in path\");\n+               Fail (Gcc_Name.all & \" not found in path\");\n             end if;\n          end if;\n \n@@ -428,7 +428,7 @@ package body MLib.Utl is\n          Driver := Locate_Exec_On_Path (Get_Name_String (Driver_Name));\n \n          if Driver = null then\n-            Fail (Get_Name_String (Driver_Name), \" not found in path\");\n+            Fail (Get_Name_String (Driver_Name) & \" not found in path\");\n          end if;\n       end if;\n \n@@ -586,9 +586,9 @@ package body MLib.Utl is\n \n       if not Success then\n          if Driver_Name = No_Name then\n-            Fail (Gcc_Name.all, \" execution error\");\n+            Fail (Gcc_Name.all & \" execution error\");\n          else\n-            Fail (Get_Name_String (Driver_Name), \" execution error\");\n+            Fail (Get_Name_String (Driver_Name) & \" execution error\");\n          end if;\n       end if;\n    end Gcc;"}, {"sha": "5a8a66128b21937ce0d7d2119f41ec676007d9ac", "filename": "gcc/ada/mlib.adb", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -70,20 +70,22 @@ package body MLib is\n       end if;\n \n       if Name'Length > Max_Characters_In_Library_Name then\n-         Prj.Com.Fail (\"illegal library name \"\"\", Name, \"\"\": too long\");\n+         Prj.Com.Fail (\"illegal library name \"\"\"\n+                       & Name\n+                       & \"\"\": too long\");\n       end if;\n \n       if not Is_Letter (Name (Name'First)) then\n-         Prj.Com.Fail (\"illegal library name \"\"\",\n-                       Name,\n-                       \"\"\": should start with a letter\");\n+         Prj.Com.Fail (\"illegal library name \"\"\"\n+                       & Name\n+                       & \"\"\": should start with a letter\");\n       end if;\n \n       for Index in Name'Range loop\n          if not Is_Alphanumeric (Name (Index)) then\n-            Prj.Com.Fail (\"illegal library name \"\"\",\n-                          Name,\n-                          \"\"\": should include only letters and digits\");\n+            Prj.Com.Fail (\"illegal library name \"\"\"\n+                          & Name\n+                          & \"\"\": should include only letters and digits\");\n          end if;\n       end loop;\n    end Check_Library_Name;"}, {"sha": "684e6e70c37a85f06e3f7e086684f3cff2b83284", "filename": "gcc/ada/mlib.ads", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fmlib.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---                     Copyright (C) 1999-2007, AdaCore                     --\n+--                     Copyright (C) 1999-2008, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -40,8 +40,7 @@ package MLib is\n    --  Maximum number of characters in a library name.\n    --  Used by Check_Library_Name below.\n \n-   type Fail_Proc is access procedure\n-     (S1 : String; S2 : String := \"\"; S3 : String := \"\");\n+   type Fail_Proc is access procedure (S1 : String);\n \n    Fail : Fail_Proc := Osint.Fail'Access;\n    --  This procedure is used in the MLib hierarchy, instead of"}, {"sha": "b66cebf2ac2c14a7b26a08f5847ae518f98c7722", "filename": "gcc/ada/osint-b.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint-b.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint-b.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint-b.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -39,8 +39,8 @@ package body Osint.B is\n \n       if not Status then\n          Fail\n-           (\"error while closing generated file \",\n-            Get_Name_String (Output_File_Name));\n+           (\"error while closing generated file \"\n+            & Get_Name_String (Output_File_Name));\n       end if;\n \n    end Close_Binder_Output;"}, {"sha": "e4dab2aed0493cfe0fc6be7c6d51c53ebf3b80c4", "filename": "gcc/ada/osint-c.adb", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint-c.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -64,8 +64,8 @@ package body Osint.C is\n \n       if not Status then\n          Fail\n-           (\"error while closing expanded source file \",\n-            Get_Name_String (Output_File_Name));\n+           (\"error while closing expanded source file \"\n+            & Get_Name_String (Output_File_Name));\n       end if;\n    end Close_Debug_File;\n \n@@ -81,8 +81,8 @@ package body Osint.C is\n \n       if not Status then\n          Fail\n-           (\"error while closing list file \",\n-            Get_Name_String (Output_File_Name));\n+           (\"error while closing list file \"\n+            & Get_Name_String (Output_File_Name));\n       end if;\n    end Close_List_File;\n \n@@ -98,8 +98,8 @@ package body Osint.C is\n \n       if not Status then\n          Fail\n-           (\"error while closing ALI file \",\n-            Get_Name_String (Output_File_Name));\n+           (\"error while closing ALI file \"\n+            & Get_Name_String (Output_File_Name));\n       end if;\n    end Close_Output_Library_Info;\n \n@@ -115,8 +115,8 @@ package body Osint.C is\n \n       if not Status then\n          Fail\n-           (\"error while closing representation info file \",\n-            Get_Name_String (Output_File_Name));\n+           (\"error while closing representation info file \"\n+            & Get_Name_String (Output_File_Name));\n       end if;\n    end Close_Repinfo_File;\n \n@@ -401,8 +401,8 @@ package body Osint.C is\n \n       if not Status then\n          Fail\n-           (\"error while closing tree file \",\n-            Get_Name_String (Output_File_Name));\n+           (\"error while closing tree file \"\n+            & Get_Name_String (Output_File_Name));\n       end if;\n    end Tree_Close;\n "}, {"sha": "0363f5e27eb1bd445b8b8faa4839154fbc5a6381", "filename": "gcc/ada/osint.adb", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -643,7 +643,7 @@ package body Osint is\n       Fdesc := Create_File (Name_Buffer'Address, Fmode);\n \n       if Fdesc = Invalid_FD then\n-         Fail (\"Cannot create: \", Name_Buffer (1 .. Name_Len));\n+         Fail (\"Cannot create: \" & Name_Buffer (1 .. Name_Len));\n       end if;\n    end Create_File_And_Check;\n \n@@ -900,17 +900,15 @@ package body Osint is\n    -- Fail --\n    ----------\n \n-   procedure Fail (S1 : String; S2 : String := \"\"; S3 : String := \"\") is\n+   procedure Fail (S : String) is\n    begin\n       --  We use Output in case there is a special output set up.\n       --  In this case Set_Standard_Error will have no immediate effect.\n \n       Set_Standard_Error;\n       Osint.Write_Program_Name;\n       Write_Str (\": \");\n-      Write_Str (S1);\n-      Write_Str (S2);\n-      Write_Str (S3);\n+      Write_Str (S);\n       Write_Eol;\n \n       Exit_Program (E_Fatal);\n@@ -2102,7 +2100,7 @@ package body Osint is\n \n       if Current_Full_Lib_Name = No_File then\n          if Fatal_Err then\n-            Fail (\"Cannot find: \", Name_Buffer (1 .. Name_Len));\n+            Fail (\"Cannot find: \" & Name_Buffer (1 .. Name_Len));\n          else\n             Current_Full_Obj_Stamp := Empty_Time_Stamp;\n             return null;\n@@ -2121,7 +2119,7 @@ package body Osint is\n \n       if Lib_FD = Invalid_FD then\n          if Fatal_Err then\n-            Fail (\"Cannot open: \",  Name_Buffer (1 .. Name_Len));\n+            Fail (\"Cannot open: \" & Name_Buffer (1 .. Name_Len));\n          else\n             Current_Full_Obj_Stamp := Empty_Time_Stamp;\n             return null;\n@@ -2147,7 +2145,7 @@ package body Osint is\n \n                --  No need to check the status, we fail anyway\n \n-               Fail (\"Cannot find: \", Name_Buffer (1 .. Name_Len));\n+               Fail (\"Cannot find: \" & Name_Buffer (1 .. Name_Len));\n \n             else\n                Current_Full_Obj_Stamp := Empty_Time_Stamp;\n@@ -2240,7 +2238,7 @@ package body Osint is\n \n          if N = Current_Main then\n             Get_Name_String (N);\n-            Fail (\"Cannot find: \", Name_Buffer (1 .. Name_Len));\n+            Fail (\"Cannot find: \" & Name_Buffer (1 .. Name_Len));\n          end if;\n \n          Src := null;\n@@ -2561,7 +2559,7 @@ package body Osint is\n \n    exception\n       when others =>\n-         Fail (\"erroneous directory spec: \", Host_Dir);\n+         Fail (\"erroneous directory spec: \" & Host_Dir);\n          return null;\n    end To_Canonical_Dir_Spec;\n \n@@ -2654,7 +2652,7 @@ package body Osint is\n \n    exception\n       when others =>\n-         Fail (\"erroneous file spec: \", Host_File);\n+         Fail (\"erroneous file spec: \" & Host_File);\n          return null;\n    end To_Canonical_File_Spec;\n \n@@ -2687,7 +2685,7 @@ package body Osint is\n \n    exception\n       when others =>\n-         Fail (\"erroneous path spec: \", Host_Path);\n+         Fail (\"erroneous path spec: \" & Host_Path);\n          return null;\n    end To_Canonical_Path_Spec;\n "}, {"sha": "4d82c86a5a2931f564876a8d42aa7ae0d3f47635", "filename": "gcc/ada/osint.ads", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fosint.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -121,11 +121,11 @@ package Osint is\n    --  Writes name of program as invoked to the current output (normally\n    --  standard output).\n \n-   procedure Fail (S1 : String; S2 : String := \"\"; S3 : String := \"\");\n+   procedure Fail (S : String);\n    pragma No_Return (Fail);\n-   --  Outputs error messages S1 & S2 & S3 preceded by the name of the\n-   --  executing program and exits with E_Fatal. The output goes to standard\n-   --  error, except if special output is in effect (see Output).\n+   --  Outputs error message S preceded by the name of the executing program\n+   --  and exits with E_Fatal. The output goes to standard error, except if\n+   --  special output is in effect (see Output).\n \n    function Is_Directory_Separator (C : Character) return Boolean;\n    --  Returns True if C is a directory separator"}, {"sha": "810669917f32dcbd4bd96cfdd9b5acab03e075c4", "filename": "gcc/ada/prep.adb", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprep.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprep.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprep.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -260,7 +260,7 @@ package body Prep is\n          Result := True_Value;\n \n       elsif Index = Definition'First then\n-         Fail (\"invalid symbol definition \"\"\", Definition, \"\"\"\");\n+         Fail (\"invalid symbol definition \"\"\" & Definition & \"\"\"\");\n \n       else\n          --  Put the symbol in the name buffer\n@@ -280,9 +280,9 @@ package body Prep is\n                      null;\n \n                   when others =>\n-                     Fail (\"illegal value \"\"\",\n-                           Definition (Index + 1 .. Definition'Last),\n-                           \"\"\"\");\n+                     Fail (\"illegal value \"\"\"\n+                           & Definition (Index + 1 .. Definition'Last)\n+                           & \"\"\"\");\n                end case;\n             end loop;\n          end if;\n@@ -301,9 +301,9 @@ package body Prep is\n       if Name_Buffer (1) not in 'a' .. 'z'\n         and then Name_Buffer (1) not in 'A' .. 'Z'\n       then\n-         Fail (\"symbol \"\"\",\n-               Name_Buffer (1 .. Name_Len),\n-               \"\"\" does not start with a letter\");\n+         Fail (\"symbol \"\"\"\n+               & Name_Buffer (1 .. Name_Len)\n+               & \"\"\" does not start with a letter\");\n       end if;\n \n       for J in 2 .. Name_Len loop\n@@ -313,20 +313,20 @@ package body Prep is\n \n             when '_' =>\n                if J = Name_Len then\n-                  Fail (\"symbol \"\"\",\n-                        Name_Buffer (1 .. Name_Len),\n-                        \"\"\" end with a '_'\");\n+                  Fail (\"symbol \"\"\"\n+                        & Name_Buffer (1 .. Name_Len)\n+                        & \"\"\" end with a '_'\");\n \n                elsif Name_Buffer (J + 1) = '_' then\n-                  Fail (\"symbol \"\"\",\n-                        Name_Buffer (1 .. Name_Len),\n-                        \"\"\" contains consecutive '_'\");\n+                  Fail (\"symbol \"\"\"\n+                        & Name_Buffer (1 .. Name_Len)\n+                        & \"\"\" contains consecutive '_'\");\n                end if;\n \n             when others =>\n-               Fail (\"symbol \"\"\",\n-                     Name_Buffer (1 .. Name_Len),\n-                     \"\"\" contains illegal character(s)\");\n+               Fail (\"symbol \"\"\"\n+                     & Name_Buffer (1 .. Name_Len)\n+                     & \"\"\" contains illegal character(s)\");\n          end case;\n       end loop;\n "}, {"sha": "981da86eac2bccdf7f9405cbbae1b0c920f22922", "filename": "gcc/ada/prepcomp.adb", "status": "modified", "additions": 11, "deletions": 12, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprepcomp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprepcomp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprepcomp.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -240,9 +240,9 @@ package body Prepcomp is\n \n       if Source_Index_Of_Preproc_Data_File = No_Source_File then\n          Get_Name_String (N);\n-         Fail (\"preprocessing data file \"\"\",\n-               Name_Buffer (1 .. Name_Len),\n-               \"\"\" not found\");\n+         Fail (\"preprocessing data file \"\"\"\n+               & Name_Buffer (1 .. Name_Len)\n+               & \"\"\" not found\");\n       end if;\n \n       --  Initialize scanner and set its behavior for processing a data file\n@@ -561,9 +561,8 @@ package body Prepcomp is\n       if Total_Errors_Detected > T then\n          Errout.Finalize (Last_Call => True);\n          Errout.Output_Messages;\n-         Fail (\"errors found in preprocessing data file \"\"\",\n-               Get_Name_String (N),\n-               \"\"\"\");\n+         Fail (\"errors found in preprocessing data file \"\"\"\n+               & Get_Name_String (N) & \"\"\"\");\n       end if;\n \n       --  Record the dependency on the preprocessor data file\n@@ -656,9 +655,9 @@ package body Prepcomp is\n \n          begin\n             if Deffile = No_Source_File then\n-               Fail (\"definition file \"\"\",\n-                     Get_Name_String (N),\n-                     \"\"\" cannot be found\");\n+               Fail (\"definition file \"\"\"\n+                     & Get_Name_String (N)\n+                     & \"\"\" cannot be found\");\n             end if;\n \n             --  Initialize the preprocessor and set the characteristics of the\n@@ -688,9 +687,9 @@ package body Prepcomp is\n             if T /= Total_Errors_Detected then\n                Errout.Finalize (Last_Call => True);\n                Errout.Output_Messages;\n-               Fail (\"errors found in definition file \"\"\",\n-                     Get_Name_String (N),\n-                     \"\"\"\");\n+               Fail (\"errors found in definition file \"\"\"\n+                     & Get_Name_String (N)\n+                     & \"\"\"\");\n             end if;\n \n             for Index in 1 .. Dependencies.Last loop"}, {"sha": "250a412e58d0983171e368e23757cdf39b1499f0", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 26, "deletions": 19, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -467,9 +467,9 @@ package body Prj.Attr is\n \n                for Index in First_Package .. Package_Attributes.Last loop\n                   if Package_Name = Package_Attributes.Table (Index).Name then\n-                     Osint.Fail (\"duplicate name \"\"\",\n-                           Initialization_Data (Start .. Finish - 1),\n-                           \"\"\" in predefined packages.\");\n+                     Osint.Fail (\"duplicate name \"\"\"\n+                                 & Initialization_Data (Start .. Finish - 1)\n+                                 & \"\"\" in predefined packages.\");\n                   end if;\n                end loop;\n \n@@ -576,9 +576,9 @@ package body Prj.Attr is\n \n                for Index in First_Attribute .. Attrs.Last - 1 loop\n                   if Attribute_Name = Attrs.Table (Index).Name then\n-                     Osint.Fail (\"duplicate attribute \"\"\",\n-                           Initialization_Data (Start .. Finish - 1),\n-                           \"\"\" in \" & Attribute_Location);\n+                     Osint.Fail (\"duplicate attribute \"\"\"\n+                                 & Initialization_Data (Start .. Finish - 1)\n+                                 & \"\"\" in \" & Attribute_Location);\n                   end if;\n                end loop;\n \n@@ -716,8 +716,9 @@ package body Prj.Attr is\n       end if;\n \n       if In_Package = Empty_Package then\n-         Fail (\"attempt to add attribute \"\"\", Name,\n-               \"\"\" to an undefined package\");\n+         Fail (\"attempt to add attribute \"\"\"\n+               & Name\n+               & \"\"\" to an undefined package\");\n          raise Project_Error;\n       end if;\n \n@@ -731,11 +732,12 @@ package body Prj.Attr is\n       Curr_Attr := First_Attr;\n       while Curr_Attr /= Empty_Attr loop\n          if Attrs.Table (Curr_Attr).Name = Attr_Name then\n-            Fail (\"duplicate attribute name \"\"\", Name,\n-                  \"\"\" in package \"\"\" &\n-                  Get_Name_String\n-                    (Package_Attributes.Table (In_Package.Value).Name) &\n-                  \"\"\"\");\n+            Fail (\"duplicate attribute name \"\"\"\n+                  & Name\n+                  & \"\"\" in package \"\"\"\n+                  & Get_Name_String\n+                     (Package_Attributes.Table (In_Package.Value).Name)\n+                  & \"\"\"\");\n             raise Project_Error;\n          end if;\n \n@@ -794,8 +796,9 @@ package body Prj.Attr is\n \n       for Index in Package_Attributes.First .. Package_Attributes.Last loop\n          if Package_Attributes.Table (Index).Name = Pkg_Name then\n-            Fail (\"cannot register a package with a non unique name\"\"\",\n-                  Name, \"\"\"\");\n+            Fail (\"cannot register a package with a non unique name\"\"\"\n+                  & Name\n+                  & \"\"\"\");\n             Id := Empty_Package;\n             return;\n          end if;\n@@ -831,8 +834,9 @@ package body Prj.Attr is\n \n       for Index in Package_Attributes.First .. Package_Attributes.Last loop\n          if Package_Attributes.Table (Index).Name = Pkg_Name then\n-            Fail (\"cannot register a package with a non unique name\"\"\",\n-                  Name, \"\"\"\");\n+            Fail (\"cannot register a package with a non unique name\"\"\"\n+                  & Name\n+                  & \"\"\"\");\n             raise Project_Error;\n          end if;\n       end loop;\n@@ -843,8 +847,11 @@ package body Prj.Attr is\n          Curr_Attr := First_Attr;\n          while Curr_Attr /= Empty_Attr loop\n             if Attrs.Table (Curr_Attr).Name = Attr_Name then\n-               Fail (\"duplicate attribute name \"\"\", Attributes (Index).Name,\n-                     \"\"\" in new package \"\"\" & Name & \"\"\"\");\n+               Fail (\"duplicate attribute name \"\"\"\n+                     & Attributes (Index).Name\n+                     & \"\"\" in new package \"\"\"\n+                     & Name\n+                     & \"\"\"\");\n                raise Project_Error;\n             end if;\n "}, {"sha": "f5f2fa689f97da2da646c84506fb9f0bc830ed09", "filename": "gcc/ada/prj-com.ads", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-com.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-com.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-com.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2000-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2000-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -30,10 +30,7 @@ with Osint;\n \n package Prj.Com is\n \n-   type Fail_Proc is access procedure\n-     (S1 : String;\n-      S2 : String := \"\";\n-      S3 : String := \"\");\n+   type Fail_Proc is access procedure (S : String);\n \n    Fail : Fail_Proc := Osint.Fail'Access;\n    --  This procedure is used in the project facility, instead of directly"}, {"sha": "e7d5fee6cd448776bc34c8cbe0b696516602b961", "filename": "gcc/ada/prj-env.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-env.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-env.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-env.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -2574,7 +2574,7 @@ package body Prj.Env is\n    begin\n       if Host_Spec = null then\n          Prj.Com.Fail\n-           (\"could not convert file name \"\"\", Value, \"\"\" to host spec\");\n+           (\"could not convert file name \"\"\" & Value & \"\"\" to host spec\");\n       else\n          Setenv (Name, Host_Spec.all);\n          Free (Host_Spec);"}, {"sha": "1274c4f3bf18dd1ef65c692b28d5f99727236d87", "filename": "gcc/ada/prj-makr.adb", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-makr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-makr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-makr.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -241,7 +241,7 @@ package body Prj.Makr is\n \n       if Output_FD = Invalid_FD then\n          Prj.Com.Fail\n-           (\"cannot create new \"\"\", Path_Name (1 .. Path_Last), \"\"\"\");\n+           (\"cannot create new \"\"\" & Path_Name (1 .. Path_Last) & \"\"\"\");\n       end if;\n \n       if Project_File then\n@@ -257,17 +257,17 @@ package body Prj.Makr is\n                Success => Discard);\n          end;\n \n-         --  And create a new source list file. Fail if file cannot be created.\n+         --  And create a new source list file, fail if file cannot be created\n \n          Source_List_FD := Create_New_File\n            (Name  => Source_List_Path (1 .. Source_List_Last),\n             Fmode => Text);\n \n          if Source_List_FD = Invalid_FD then\n             Prj.Com.Fail\n-              (\"cannot create file \"\"\",\n-               Source_List_Path (1 .. Source_List_Last),\n-               \"\"\"\");\n+              (\"cannot create file \"\"\"\n+               & Source_List_Path (1 .. Source_List_Last)\n+               & \"\"\"\");\n          end if;\n \n          if Opt.Verbose_Mode then\n@@ -703,9 +703,9 @@ package body Prj.Makr is\n \n          if Output_FD = Invalid_FD then\n             Prj.Com.Fail\n-              (\"cannot create new \"\"\",\n-               Project_Naming_File_Name (1 .. Project_Naming_Last),\n-               \"\"\"\");\n+              (\"cannot create new \"\"\"\n+               & Project_Naming_File_Name (1 .. Project_Naming_Last)\n+               & \"\"\"\");\n          end if;\n \n          --  Output the naming project file\n@@ -1023,9 +1023,9 @@ package body Prj.Makr is\n          exception\n             when Directory_Error =>\n                Prj.Com.Fail\n-                 (\"unknown directory \"\"\",\n-                  Path_Name (1 .. Directory_Last),\n-                  \"\"\"\");\n+                 (\"unknown directory \"\"\"\n+                  & Path_Name (1 .. Directory_Last)\n+                  & \"\"\"\");\n          end;\n       end if;\n    end Initialize;\n@@ -1091,7 +1091,7 @@ package body Prj.Makr is\n                Open (Dir, Dir_Name);\n             exception\n                when Directory_Error =>\n-                  Prj.Com.Fail (\"cannot open directory \"\"\", Dir_Name, \"\"\"\");\n+                  Prj.Com.Fail (\"cannot open directory \"\"\" & Dir_Name & \"\"\"\");\n             end;\n \n             --  Process each regular file in the directory"}, {"sha": "ad4c7ea7f3d8c5bdc5fd732a0d8be08b4dc3e081", "filename": "gcc/ada/prj-part.adb", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-part.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fprj-part.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-part.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -515,9 +515,10 @@ package body Prj.Part is\n \n          if Path_Name = \"\" then\n             Prj.Com.Fail\n-              (\"project file \"\"\",\n-               Project_File_Name,\n-               \"\"\" not found in \" & Project_Path);\n+              (\"project file \"\"\"\n+               & Project_File_Name\n+               & \"\"\" not found in \"\n+               & Project_Path);\n             Project := Empty_Node;\n             return;\n          end if;"}, {"sha": "1716a96f6c2c6f1a31580b6aee45bb3ef9f7b931", "filename": "gcc/ada/socket.c", "status": "modified", "additions": 8, "deletions": 31, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fsocket.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fsocket.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsocket.c?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -57,13 +57,13 @@ extern int  __gnat_create_signalling_fds (int *fds);\n extern int  __gnat_read_signalling_fd (int rsig);\n extern int  __gnat_write_signalling_fd (int wsig);\n extern void  __gnat_close_signalling_fd (int sig);\n-extern void __gnat_free_socket_set (fd_set *);\n extern void __gnat_last_socket_in_set (fd_set *, int *);\n extern void __gnat_get_socket_from_set (fd_set *, int *, int *);\n extern void __gnat_insert_socket_in_set (fd_set *, int);\n extern int __gnat_is_socket_in_set (fd_set *, int);\n extern fd_set *__gnat_new_socket_set (fd_set *);\n extern void __gnat_remove_socket_from_set (fd_set *, int);\n+extern void __gnat_reset_socket_set (fd_set *set);\n extern int  __gnat_get_h_errno (void);\n \f\n /* Disable the sending of SIGPIPE for writes on a broken stream */\n@@ -266,14 +266,6 @@ __gnat_safe_getservbyport (int port, const char *proto,\n }\n #endif\n \f\n-/* Free socket set. */\n-\n-void\n-__gnat_free_socket_set (fd_set *set)\n-{\n-  __gnat_free (set);\n-}\n-\n /* Find the largest socket in the socket set SET. This is needed for\n    `select'.  LAST is the maximum value for the largest socket. This hint is\n    used to avoid scanning very large socket sets.  On return, LAST is the\n@@ -334,28 +326,6 @@ __gnat_is_socket_in_set (fd_set *set, int socket)\n   return FD_ISSET (socket, set);\n }\n \n-/* Allocate a new socket set and set it as empty.  */\n-\n-fd_set *\n-__gnat_new_socket_set (fd_set *set)\n-{\n-  fd_set *new;\n-\n-#ifdef VMS\n-extern void *__gnat_malloc32 (__SIZE_TYPE__);\n-  new = (fd_set *) __gnat_malloc32 (sizeof (fd_set));\n-#else\n-  new = (fd_set *) __gnat_malloc (sizeof (fd_set));\n-#endif\n-\n-  if (set)\n-    memcpy (new, set, sizeof (fd_set));\n-  else\n-    FD_ZERO (new);\n-\n-  return new;\n-}\n-\n /* Remove SOCKET from the socket set SET. */\n \n void\n@@ -364,6 +334,13 @@ __gnat_remove_socket_from_set (fd_set *set, int socket)\n   FD_CLR (socket, set);\n }\n \n+/* Reset SET */\n+void\n+__gnat_reset_socket_set (fd_set *set)\n+{\n+  FD_ZERO (set);\n+}\n+\n /* Get the value of the last host error */\n \n int"}, {"sha": "82caa29f99e926a4dab434028c9710a9f63a0113", "filename": "gcc/ada/switch-b.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fswitch-b.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fswitch-b.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-b.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -80,8 +80,7 @@ package body Switch.B is\n \n          exception\n             when Constraint_Error =>\n-               Osint.Fail\n-                 (\"numeric value out of range for switch: \", (1 => S));\n+               Osint.Fail (\"numeric value out of range for switch: \" & S);\n          end;\n \n          return Result;\n@@ -104,8 +103,8 @@ package body Switch.B is\n       if Switch_Chars'Last >= Ptr + 3\n         and then Switch_Chars (Ptr .. Ptr + 3) = \"gnat\"\n       then\n-         Osint.Fail (\"invalid switch: \"\"\", Switch_Chars, \"\"\"\"\n-            & \" (gnat not needed here)\");\n+         Osint.Fail (\"invalid switch: \"\"\" & Switch_Chars & \"\"\"\"\n+                     & \" (gnat not needed here)\");\n       end if;\n \n       --  Loop to scan through switches given in switch string"}, {"sha": "937a3a86b6fc1ee6e440641fb9a2ea2f2fced463", "filename": "gcc/ada/switch-c.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fswitch-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fswitch-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-c.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -133,8 +133,7 @@ package body Switch.C is\n                elsif\n                  RTS_Specified.all /= Switch_Chars (Ptr + 4 .. Max)\n                then\n-                  Osint.Fail\n-                    (\"--RTS cannot be specified multiple times\");\n+                  Osint.Fail (\"--RTS cannot be specified multiple times\");\n                end if;\n \n                --  Valid --RTS switch"}, {"sha": "e185d70df1513cb0eb02c36dd1c2a40e7fa68cf1", "filename": "gcc/ada/switch.adb", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fswitch.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Fswitch.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch.adb?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -34,12 +34,12 @@ package body Switch is\n \n    procedure Bad_Switch (Switch : Character) is\n    begin\n-      Osint.Fail (\"invalid switch: \", (1 => Switch));\n+      Osint.Fail (\"invalid switch: \" & Switch);\n    end Bad_Switch;\n \n    procedure Bad_Switch (Switch : String) is\n    begin\n-      Osint.Fail (\"invalid switch: \", Switch);\n+      Osint.Fail (\"invalid switch: \" & Switch);\n    end Bad_Switch;\n \n    ------------------------------\n@@ -163,7 +163,7 @@ package body Switch is\n       Result := 0;\n \n       if Ptr > Max or else Switch_Chars (Ptr) not in '0' .. '9' then\n-         Osint.Fail (\"missing numeric value for switch: \", (1 => Switch));\n+         Osint.Fail (\"missing numeric value for switch: \" & Switch);\n \n       else\n          while Ptr <= Max and then Switch_Chars (Ptr) in '0' .. '9' loop\n@@ -172,8 +172,7 @@ package body Switch is\n             Ptr := Ptr + 1;\n \n             if Result > Switch_Max_Value then\n-               Osint.Fail\n-                 (\"numeric value out of range for switch: \", (1 => Switch));\n+               Osint.Fail (\"numeric value out of range for switch: \" & Switch);\n             end if;\n          end loop;\n       end if;\n@@ -196,7 +195,7 @@ package body Switch is\n       Scan_Nat (Switch_Chars, Max, Ptr, Temp, Switch);\n \n       if Temp = 0 then\n-         Osint.Fail (\"numeric value out of range for switch: \", (1 => Switch));\n+         Osint.Fail (\"numeric value out of range for switch: \" & Switch);\n       end if;\n \n       Result := Temp;"}, {"sha": "efa8960516fff8c72d6a05b7ca4b6b7dc7971fc9", "filename": "gcc/ada/tbuild.ads", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Ftbuild.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd9959c810d51dac8ae52ce28212bcac2afc437/gcc%2Fada%2Ftbuild.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftbuild.ads?ref=3dd9959c810d51dac8ae52ce28212bcac2afc437", "patch": "@@ -256,12 +256,11 @@ package Tbuild is\n    function New_Occurrence_Of\n      (Def_Id : Entity_Id;\n       Loc    : Source_Ptr) return Node_Id;\n-   --  New_Occurrence_Of creates an N_Identifier node which is an\n-   --  occurrence of the defining identifier which is passed as its\n-   --  argument. The Entity and Etype of the result are set from\n-   --  the given defining identifier as follows: Entity is simply\n-   --  a copy of Def_Id. Etype is a copy of Def_Id for types, and\n-   --  a copy of the Etype of Def_Id for other entities.\n+   --  New_Occurrence_Of creates an N_Identifier node which is an occurrence\n+   --  of the defining identifier which is passed as its argument. The Entity\n+   --  and Etype of the result are set from the given defining identifier as\n+   --  follows: Entity is simply a copy of Def_Id. Etype is a copy of Def_Id\n+   --  for types, and a copy of the Etype of Def_Id for other entities.\n \n    function New_Reference_To\n      (Def_Id : Entity_Id;"}]}