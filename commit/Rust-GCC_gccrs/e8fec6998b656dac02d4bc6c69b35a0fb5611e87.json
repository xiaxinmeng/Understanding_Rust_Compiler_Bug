{"sha": "e8fec6998b656dac02d4bc6c69b35a0fb5611e87", "node_id": "C_kwDOANBUbNoAKGU4ZmVjNjk5OGI2NTZkYWMwMmQ0YmM2YzY5YjM1YTBmYjU2MTFlODc", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2023-03-23T11:32:35Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2023-03-24T16:14:54Z"}, "message": "Add caveat/safeguard to OpenMP: Handle descriptors in target's firstprivate [PR104949]\n\nFollow-up to commit 49d1a2f91325fa8cc011149e27e5093a988b3a49\n\"OpenMP: Handle descriptors in target's firstprivate [PR104949]\".\n\n\tPR fortran/104949\n\tlibgomp/\n\t* target.c (gomp_map_vars_internal) <GOMP_MAP_FIRSTPRIVATE>: Add\n\tcaveat/safeguard.", "tree": {"sha": "fc064adf2a48ef7e8f1115c142666a271e892f1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc064adf2a48ef7e8f1115c142666a271e892f1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e8fec6998b656dac02d4bc6c69b35a0fb5611e87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8fec6998b656dac02d4bc6c69b35a0fb5611e87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8fec6998b656dac02d4bc6c69b35a0fb5611e87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8fec6998b656dac02d4bc6c69b35a0fb5611e87/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7f1e15f743357e037d7c4f6f6000863c26f3dfc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f1e15f743357e037d7c4f6f6000863c26f3dfc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f1e15f743357e037d7c4f6f6000863c26f3dfc3"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "b30c6a50c7e24bdef11f6f235cf758f097cccb16", "filename": "libgomp/target.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8fec6998b656dac02d4bc6c69b35a0fb5611e87/libgomp%2Ftarget.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8fec6998b656dac02d4bc6c69b35a0fb5611e87/libgomp%2Ftarget.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftarget.c?ref=e8fec6998b656dac02d4bc6c69b35a0fb5611e87", "patch": "@@ -1396,6 +1396,11 @@ gomp_map_vars_internal (struct gomp_device_descr *devicep,\n \t\t  {\n \t\t    uintptr_t target = (uintptr_t) hostaddrs[i];\n \t\t    void *devptr = *(void**) hostaddrs[i+1] + sizes[i+1];\n+\t\t    /* Per\n+\t\t       <https://inbox.sourceware.org/gcc-patches/87o7pe12ke.fsf@euler.schwinge.homeip.net>\n+\t\t       \"OpenMP: Handle descriptors in target's firstprivate [PR104949]\"\n+\t\t       this probably needs revision for 'aq' usage.  */\n+\t\t    assert (!aq);\n \t\t    gomp_copy_host2dev (devicep, aq, devptr, &target,\n \t\t\t\t\tsizeof (void *), false, cbufp);\n \t\t    ++i;"}]}