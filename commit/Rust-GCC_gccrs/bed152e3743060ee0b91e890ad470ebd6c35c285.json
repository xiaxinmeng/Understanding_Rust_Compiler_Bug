{"sha": "bed152e3743060ee0b91e890ad470ebd6c35c285", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmVkMTUyZTM3NDMwNjBlZTBiOTFlODkwYWQ0NzBlYmQ2YzM1YzI4NQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2013-02-26T04:39:04Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2013-02-26T04:39:04Z"}, "message": "configure.ac: Check for __cxa_thread_atexit_impl.\n\n\t* configure.ac: Check for __cxa_thread_atexit_impl.\n\t* libsupc++/atexit_thread.cc (__cxa_thread_atexit): Just forward\n\tto it if available.\n\t* config.h.in, configure: Regenerate.\n\nFrom-SVN: r196276", "tree": {"sha": "101253001dbfbf296d0c4ac14ab9d8e80174dd27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/101253001dbfbf296d0c4ac14ab9d8e80174dd27"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bed152e3743060ee0b91e890ad470ebd6c35c285", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bed152e3743060ee0b91e890ad470ebd6c35c285", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bed152e3743060ee0b91e890ad470ebd6c35c285", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bed152e3743060ee0b91e890ad470ebd6c35c285/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9bcb18f6f57b6601c83818975ac63855a3e25b20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bcb18f6f57b6601c83818975ac63855a3e25b20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bcb18f6f57b6601c83818975ac63855a3e25b20"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "7681c73725ef56872b0a5079e9304bdd666198a1", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=bed152e3743060ee0b91e890ad470ebd6c35c285", "patch": "@@ -1,3 +1,10 @@\n+2013-02-25  Jason Merrill  <jason@redhat.com>\n+\n+\t* configure.ac: Check for __cxa_thread_atexit_impl.\n+\t* libsupc++/atexit_thread.cc (__cxa_thread_atexit): Just forward\n+\tto it if available.\n+\t* config.h.in, configure: Regenerate.\n+\n 2013-02-20  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \t* include/std/streambuf (basic_streambuf): Use injected class name"}, {"sha": "07a1e50be1f794fb39dec7482999f33bd378c48b", "filename": "libstdc++-v3/config.h.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig.h.in?ref=bed152e3743060ee0b91e890ad470ebd6c35c285", "patch": "@@ -658,6 +658,9 @@\n /* Define to 1 if you have the `_tanl' function. */\n #undef HAVE__TANL\n \n+/* Define to 1 if you have the `__cxa_thread_atexit_impl' function. */\n+#undef HAVE___CXA_THREAD_ATEXIT_IMPL\n+\n /* Define as const if the declaration of iconv() needs const. */\n #undef ICONV_CONST\n "}, {"sha": "bf397f5cf12406003542e59eca586ca8803caf2c", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=bed152e3743060ee0b91e890ad470ebd6c35c285", "patch": "@@ -26700,6 +26700,18 @@ $as_echo \"#define HAVE_TLS 1\" >>confdefs.h\n \n   fi\n \n+  for ac_func in __cxa_thread_atexit_impl\n+do :\n+  ac_fn_c_check_func \"$LINENO\" \"__cxa_thread_atexit_impl\" \"ac_cv_func___cxa_thread_atexit_impl\"\n+if test \"x$ac_cv_func___cxa_thread_atexit_impl\" = x\"\"yes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE___CXA_THREAD_ATEXIT_IMPL 1\n+_ACEOF\n+\n+fi\n+done\n+\n+\n   # For iconv support.\n \n       if test \"X$prefix\" = \"XNONE\"; then"}, {"sha": "a64fee28c2cabdabfc3bbf90f2df93799ef2f199", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=bed152e3743060ee0b91e890ad470ebd6c35c285", "patch": "@@ -235,6 +235,8 @@ if $GLIBCXX_IS_NATIVE; then\n   # For TLS support.\n   GCC_CHECK_TLS\n \n+  AC_CHECK_FUNCS(__cxa_thread_atexit_impl)\n+\n   # For iconv support.\n   AM_ICONV\n "}, {"sha": "3b33df233e817184fb14b3804e94480b595b7fd9", "filename": "libstdc++-v3/libsupc++/atexit_thread.cc", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fatexit_thread.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bed152e3743060ee0b91e890ad470ebd6c35c285/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fatexit_thread.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fatexit_thread.cc?ref=bed152e3743060ee0b91e890ad470ebd6c35c285", "patch": "@@ -26,6 +26,20 @@\n #include <new>\n #include \"bits/gthr.h\"\n \n+#if HAVE___CXA_THREAD_ATEXIT_IMPL\n+\n+extern \"C\" int __cxa_thread_atexit_impl (void (*func) (void *),\n+\t\t\t\t\t void *arg, void *d);\n+extern \"C\" int\n+__cxxabiv1::__cxa_thread_atexit (void (*dtor)(void *),\n+\t\t\t\t void *obj, void *dso_handle)\n+  _GLIBCXX_NOTHROW\n+{\n+  return __cxa_thread_atexit_impl (dtor, obj, dso_handle);\n+}\n+\n+#else /* HAVE___CXA_THREAD_ATEXIT_IMPL */\n+\n namespace {\n   // One element in a singly-linked stack of cleanups.\n   struct elt\n@@ -116,3 +130,5 @@ __cxxabiv1::__cxa_thread_atexit (void (*dtor)(void *), void *obj, void */*dso_ha\n \n   return 0;\n }\n+\n+#endif /* HAVE___CXA_THREAD_ATEXIT_IMPL */"}]}