{"sha": "f376994ad8101fe7819c52e6c44f8a51134dd48f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjM3Njk5NGFkODEwMWZlNzgxOWM1MmU2YzQ0ZjhhNTExMzRkZDQ4Zg==", "commit": {"author": {"name": "Renlin Li", "email": "renlin.li@arm.com", "date": "2015-02-06T14:37:59Z"}, "committer": {"name": "Renlin Li", "email": "renlin@gcc.gnu.org", "date": "2015-02-06T14:37:59Z"}, "message": "[PATCH]Keep location info when expand complex component-wise load/store.\n\ngcc/\n\t* tree-ssa-forwprop.c (execute): Keep location info while rewrite\n\tcomplex gimple.\n\t* tree-ssa.c (execute_update_addresses_taken): Likewise.\n\nFrom-SVN: r220480", "tree": {"sha": "699a5f6106ebad87a8fc9a8e702a867222760c70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/699a5f6106ebad87a8fc9a8e702a867222760c70"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f376994ad8101fe7819c52e6c44f8a51134dd48f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f376994ad8101fe7819c52e6c44f8a51134dd48f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f376994ad8101fe7819c52e6c44f8a51134dd48f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f376994ad8101fe7819c52e6c44f8a51134dd48f/comments", "author": null, "committer": null, "parents": [{"sha": "9baa38b7a0495194bafc0bccbed0858c6b9a94a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9baa38b7a0495194bafc0bccbed0858c6b9a94a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9baa38b7a0495194bafc0bccbed0858c6b9a94a6"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "47d98adbd5c2ca8271d1e47df4be1ebac2d0c7b6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f376994ad8101fe7819c52e6c44f8a51134dd48f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f376994ad8101fe7819c52e6c44f8a51134dd48f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f376994ad8101fe7819c52e6c44f8a51134dd48f", "patch": "@@ -1,3 +1,9 @@\n+2015-02-06  Renlin Li  <renlin.li@arm.com>\n+\n+\t* tree-ssa-forwprop.c (execute): Keep location info while rewrite\n+\tcomplex gimple.\n+\t* tree-ssa.c (execute_update_addresses_taken): Likewise.\n+\n 2015-02-06  Jeff Law  <law@redhat.com>\n \n \tPR target/64889"}, {"sha": "d8db20acd3cbf010fcdeaa5e72f8c015cf41da70", "filename": "gcc/tree-ssa-forwprop.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f376994ad8101fe7819c52e6c44f8a51134dd48f/gcc%2Ftree-ssa-forwprop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f376994ad8101fe7819c52e6c44f8a51134dd48f/gcc%2Ftree-ssa-forwprop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-forwprop.c?ref=f376994ad8101fe7819c52e6c44f8a51134dd48f", "patch": "@@ -2274,6 +2274,8 @@ pass_forwprop::execute (function *fun)\n \t\t\t= gimple_build_assign (gimple_assign_lhs (use_stmt),\n \t\t\t\t\t       new_rhs);\n \n+\t\t      location_t loc = gimple_location (use_stmt);\n+\t\t      gimple_set_location (new_stmt, loc);\n \t\t      gimple_stmt_iterator gsi2 = gsi_for_stmt (use_stmt);\n \t\t      unlink_stmt_vdef (use_stmt);\n \t\t      gsi_remove (&gsi2, true);\n@@ -2305,6 +2307,8 @@ pass_forwprop::execute (function *fun)\n \t\t\t\t\t TREE_TYPE (TREE_TYPE (use_lhs)),\n \t\t\t\t\t unshare_expr (use_lhs));\n \t\t  gimple new_stmt = gimple_build_assign (new_lhs, rhs);\n+\t\t  location_t loc = gimple_location (use_stmt);\n+\t\t  gimple_set_location (new_stmt, loc);\n \t\t  gimple_set_vuse (new_stmt, gimple_vuse (use_stmt));\n \t\t  gimple_set_vdef (new_stmt, make_ssa_name (gimple_vop (cfun)));\n \t\t  SSA_NAME_DEF_STMT (gimple_vdef (new_stmt)) = new_stmt;"}, {"sha": "10d3314558e8a413a0c246b3f74809554e451af3", "filename": "gcc/tree-ssa.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f376994ad8101fe7819c52e6c44f8a51134dd48f/gcc%2Ftree-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f376994ad8101fe7819c52e6c44f8a51134dd48f/gcc%2Ftree-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa.c?ref=f376994ad8101fe7819c52e6c44f8a51134dd48f", "patch": "@@ -1561,6 +1561,8 @@ execute_update_addresses_taken (void)\n \t\t\t\t\tTREE_TYPE (other),\n \t\t\t\t\tTREE_OPERAND (lhs, 0));\n \t\t    gimple load = gimple_build_assign (other, lrhs);\n+\t\t    location_t loc = gimple_location (stmt);\n+\t\t    gimple_set_location (load, loc);\n \t\t    gimple_set_vuse (load, gimple_vuse (stmt));\n \t\t    gsi_insert_before (&gsi, load, GSI_SAME_STMT);\n \t\t    gimple_assign_set_lhs (stmt, TREE_OPERAND (lhs, 0));"}]}