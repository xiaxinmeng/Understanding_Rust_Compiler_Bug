{"sha": "eb9883c1312c3801e5c25e763729d011343b22c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWI5ODgzYzEzMTJjMzgwMWU1YzI1ZTc2MzcyOWQwMTEzNDNiMjJjMw==", "commit": {"author": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-01-23T00:54:24Z"}, "committer": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-01-23T00:56:14Z"}, "message": "testsuite: fix gcc.target/powerpc ilp32 failures\n\nThe recent vec insert code generation changes were not reflected in the\nexpected output for ilp32 targets.  This patch updates the expected\ninstructions and counts.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/powerpc/fold-vec-insert-char-p9.c: Adjust ilp32.\n\t* gcc.target/powerpc/fold-vec-insert-float-p9.c: Same.\n\t* gcc.target/powerpc/fold-vec-insert-int-p9.c: Same.\n\t* gcc.target/powerpc/fold-vec-insert-longlong.c: Same.\n\t* gcc.target/powerpc/fold-vec-insert-short-p9.c: Same.\n\t* gcc.target/powerpc/pr79251.p9.c: Same.", "tree": {"sha": "24f57105340532d864646797fa41f3c7f44f6c21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24f57105340532d864646797fa41f3c7f44f6c21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb9883c1312c3801e5c25e763729d011343b22c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb9883c1312c3801e5c25e763729d011343b22c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb9883c1312c3801e5c25e763729d011343b22c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb9883c1312c3801e5c25e763729d011343b22c3/comments", "author": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8502e23d1f24bc654e2f347d5bed3de49458c3d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8502e23d1f24bc654e2f347d5bed3de49458c3d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8502e23d1f24bc654e2f347d5bed3de49458c3d0"}], "stats": {"total": 35, "additions": 22, "deletions": 13}, "files": [{"sha": "e8f8ba39731647b4a467c2ee8e75d350c34823ac", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-insert-char-p9.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-char-p9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-char-p9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-char-p9.c?ref=eb9883c1312c3801e5c25e763729d011343b22c3", "patch": "@@ -54,9 +54,8 @@ vector unsigned char testuu_cst (unsigned char x, vector unsigned char v)\n \n /* -m32 codegen. */\n /* { dg-final { scan-assembler-times {\\mrlwinm\\M} 4 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\madd\\M} 4 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\mstxv\\M} 4 { target ilp32 } } } */\n /* { dg-final { scan-assembler-times {\\mstb\\M} 8 { target ilp32 } } } */\n /* { dg-final { scan-assembler-times {\\mlxv\\M} 8 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\mlvebx\\M} 4 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\mvperm\\M} 4 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mlvebx\\M} 8 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mvperm\\M} 8 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mxxperm\\M} 8 { target ilp32 } } } */"}, {"sha": "dfca9fd04efb498659f4113c23d73867546da2c9", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-insert-float-p9.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-float-p9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-float-p9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-float-p9.c?ref=eb9883c1312c3801e5c25e763729d011343b22c3", "patch": "@@ -30,5 +30,6 @@ testf_cst (float f, vector float vf)\n \n /* { dg-final { scan-assembler-times {\\mstfs\\M} 2 { target ilp32 } } } */\n /* { dg-final { scan-assembler-times {\\mlxv\\M} 2 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\mlvewx\\M} 1 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\mvperm\\M} 1 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mlvewx\\M} 2 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mvperm\\M} 2 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mxxperm\\M} 2 { target ilp32 } } } */"}, {"sha": "21f0d9a0272b9e88f3b5a056d81b70025127fc85", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-insert-int-p9.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-int-p9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-int-p9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-int-p9.c?ref=eb9883c1312c3801e5c25e763729d011343b22c3", "patch": "@@ -59,5 +59,6 @@ testui2_cst(unsigned int x, vector unsigned int v)\n \n /* { dg-final { scan-assembler-times {\\mstw\\M} 8 { target ilp32 } } } */\n /* { dg-final { scan-assembler-times {\\mlxv\\M} 8 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\mlvewx\\M} 4 { target ilp32 } } } */\n-/* { dg-final { scan-assembler-times {\\mvperm\\M} 4 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mlvewx\\M} 8 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mvperm\\M} 8 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mxxperm\\M} 8 { target ilp32 } } } */"}, {"sha": "b8d5528a4e046616c68a5b35b44702225be70deb", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-insert-longlong.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-longlong.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-longlong.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-longlong.c?ref=eb9883c1312c3801e5c25e763729d011343b22c3", "patch": "@@ -62,7 +62,7 @@ testul2_cst(unsigned long long x, vector unsigned long long v)\n \n /* { dg-final { scan-assembler-times {\\mstxvd2x\\M|\\mstvx\\M|\\mstxv\\M} 0 } } */\n /* { dg-final { scan-assembler-times {\\mstdx\\M} 0 { target lp64 } } } */\n-/* { dg-final { scan-assembler-times {\\mstw\\M} 8 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mvperm\\M} 8 { target ilp32 } } } */\n \n /* { dg-final { scan-assembler-times {\\mlxvd2x\\M|\\mlxv\\M|\\mlvx\\M} 0 } } */\n "}, {"sha": "dbb43a7929a8e6f7c07cb9c70c7d922313d03d48", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-insert-short-p9.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-short-p9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-short-p9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-insert-short-p9.c?ref=eb9883c1312c3801e5c25e763729d011343b22c3", "patch": "@@ -56,6 +56,8 @@ testus2_cst(unsigned short x, vector unsigned short v)\n \n /* -m32 uses sth/lvehx as part of the sequence. */\n /* { dg-final { scan-assembler-times {\\msth\\M} 8 { target ilp32 }} } */\n-/* { dg-final { scan-assembler-times {\\mlvehx\\M} 4 { target ilp32 }} } */\n+/* { dg-final { scan-assembler-times {\\mlvehx\\M} 8 { target ilp32 }} } */\n+/* { dg-final { scan-assembler-times {\\mvperm\\M} 8 { target ilp32 }} } */\n+/* { dg-final { scan-assembler-times {\\mxxperm\\M} 8 { target ilp32 }} } */\n /* { dg-final { scan-assembler-times {\\mlxv\\M|\\mlvx\\M} 8 { target ilp32 }} } */\n "}, {"sha": "8ebeab425ffa564dfc40430c07db5bf26c720005", "filename": "gcc/testsuite/gcc.target/powerpc/pr79251.p9.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79251.p9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9883c1312c3801e5c25e763729d011343b22c3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79251.p9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79251.p9.c?ref=eb9883c1312c3801e5c25e763729d011343b22c3", "patch": "@@ -12,7 +12,13 @@ TEST_VEC_INSERT_ALL (test)\n /* { dg-final { scan-assembler-times {\\mlvsl\\M} 10 } } */\n /* { dg-final { scan-assembler-times {\\mlvsr\\M} 10 } } */\n /* { dg-final { scan-assembler-times {\\mxxperm\\M} 20 } } */\n-/* { dg-final { scan-assembler-times {\\mxxinsertw\\M} 3 } } */\n-/* { dg-final { scan-assembler-times {\\mvinserth\\M} 2 } } */\n-/* { dg-final { scan-assembler-times {\\mvinsertb\\M} 2 } } */\n+/* { dg-final { scan-assembler-times {\\mxxinsertw\\M} 3 { target lp64 } } } */\n+/* { dg-final { scan-assembler-times {\\mvinserth\\M} 2 { target lp64 } } } */\n+/* { dg-final { scan-assembler-times {\\mvinsertb\\M} 2 { target lp64 } } } */\n /* { dg-final { scan-assembler-times {\\mxxpermdi\\M} 3 } } */\n+\n+/* { dg-final { scan-assembler-times {\\mrlwinm\\M} 10 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mvperm\\M} 7 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mlvebx\\M} 2 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mlvehx\\M} 2 { target ilp32 } } } */\n+/* { dg-final { scan-assembler-times {\\mlvewx\\M} 3 { target ilp32 } } } */"}]}