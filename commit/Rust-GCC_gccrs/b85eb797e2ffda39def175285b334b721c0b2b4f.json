{"sha": "b85eb797e2ffda39def175285b334b721c0b2b4f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjg1ZWI3OTdlMmZmZGEzOWRlZjE3NTI4NWIzMzRiNzIxYzBiMmI0Zg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-04-01T13:32:22Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-04-01T13:32:22Z"}, "message": "re PR c/37772 (ICE with empty asm statement)\n\n\tPR c/37772\n\t* c-parser.c (c_parser_asm_statement): Skip until close paren and\n\treturn if c_parser_asm_string_literal returned NULL.\n\n\t* gcc.dg/pr37772.c: New test.\n\t* g++.dg/ext/asm11.C: New test.\n\nFrom-SVN: r145401", "tree": {"sha": "08ff9013ac51f3577a317f758fd39f710527edf1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08ff9013ac51f3577a317f758fd39f710527edf1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b85eb797e2ffda39def175285b334b721c0b2b4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b85eb797e2ffda39def175285b334b721c0b2b4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b85eb797e2ffda39def175285b334b721c0b2b4f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b85eb797e2ffda39def175285b334b721c0b2b4f/comments", "author": null, "committer": null, "parents": [{"sha": "00c7e24fddb113e87566ede396a0d775664c4afb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00c7e24fddb113e87566ede396a0d775664c4afb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00c7e24fddb113e87566ede396a0d775664c4afb"}], "stats": {"total": 63, "additions": 61, "deletions": 2}, "files": [{"sha": "54cad4cddc0e525c23d86653f9bf92e825761185", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b85eb797e2ffda39def175285b334b721c0b2b4f", "patch": "@@ -1,3 +1,9 @@\n+2009-04-01  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/37772\n+\t* c-parser.c (c_parser_asm_statement): Skip until close paren and\n+\treturn if c_parser_asm_string_literal returned NULL.\n+\n 2009-04-01  Nick Clifton  <nickc@redhat.com>\n \n \t* config/m32c/m32c.h (LIBGCC2_UNITS_PER_WORD): Define if not"}, {"sha": "1be2ae5a5bc907d79d4a9471ab8b433312ba560b", "filename": "gcc/c-parser.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parser.c?ref=b85eb797e2ffda39def175285b334b721c0b2b4f", "patch": "@@ -4193,6 +4193,12 @@ c_parser_asm_statement (c_parser *parser)\n       return NULL_TREE;\n     }\n   str = c_parser_asm_string_literal (parser);\n+  if (str == NULL_TREE)\n+    {\n+      parser->lex_untranslated_string = false;\n+      c_parser_skip_until_found (parser, CPP_CLOSE_PAREN, NULL);\n+      return NULL_TREE;\n+    }\n   if (c_parser_next_token_is (parser, CPP_CLOSE_PAREN))\n     {\n       simple = true;"}, {"sha": "5aef381d4573379cc7da1c2b1f5ba4f86c1e292f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b85eb797e2ffda39def175285b334b721c0b2b4f", "patch": "@@ -1,7 +1,14 @@\n+2009-04-01  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/37772\n+\t* gcc.dg/pr37772.c: New test.\n+\t* g++.dg/ext/asm11.C: New test.\n+\n 2009-04-01  H.J. Lu  <hongjiu.lu@intel.com>\n \n-\t(restore_ld_library_path_env_vars): Always restore GCC_EXEC_PREFIX\n-\tto its original value, or unset if it was not defined.\n+\t* lib/target-libpath.exp (restore_ld_library_path_env_vars): Always\n+\trestore GCC_EXEC_PREFIX to its original value, or unset if it was not\n+\tdefined.\n \n 2009-03-31  Jason Merrill  <jason@redhat.com>\n "}, {"sha": "7939aacc0f424892c12c0a1e7d98e43821f6e7c9", "filename": "gcc/testsuite/g++.dg/ext/asm11.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fasm11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fasm11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fasm11.C?ref=b85eb797e2ffda39def175285b334b721c0b2b4f", "patch": "@@ -0,0 +1,20 @@\n+// PR c/37772\n+// { dg-do compile }\n+// { dg-options \"\" }\n+\n+void\n+foo ()\n+{\n+  int i;\n+  asm ();\t\t  // { dg-error \"expected string-literal before\" }\n+  asm (1);\t\t  // { dg-error \"expected string-literal before\" }\n+  asm (int);\t\t  // { dg-error \"expected string-literal before\" }\n+  asm (: \"=r\" (i));\t  // { dg-error \"expected string-literal before\" }\n+  asm (1 : \"=r\" (i));\t  // { dg-error \"expected string-literal before\" }\n+  asm (int : \"=r\" (i));\t  // { dg-error \"expected string-literal before\" }\n+  asm (: : \"r\" (i));\t  // { dg-error \"expected string-literal before\" }\n+  asm (1 : : \"r\" (i));\t  // { dg-error \"expected string-literal before\" }\n+  asm (int : : \"r\" (i));  // { dg-error \"expected string-literal before\" }\n+  asm (: : : \"memory\");\t  // { dg-error \"expected string-literal before\" }\n+  asm (1 : : : \"memory\"); // { dg-error \"expected string-literal before\" }\n+}"}, {"sha": "26051c7e834f21af0ec05cb12a84ab17e5b567ba", "filename": "gcc/testsuite/gcc.dg/pr37772.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr37772.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b85eb797e2ffda39def175285b334b721c0b2b4f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr37772.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr37772.c?ref=b85eb797e2ffda39def175285b334b721c0b2b4f", "patch": "@@ -0,0 +1,20 @@\n+/* PR c/37772 */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+void\n+foo ()\n+{\n+  int i;\n+  asm ();\t\t  /* { dg-error \"expected string literal before\" } */\n+  asm (1);\t\t  /* { dg-error \"expected string literal before\" } */\n+  asm (int);\t\t  /* { dg-error \"expected string literal before\" } */\n+  asm (: \"=r\" (i));\t  /* { dg-error \"expected string literal before\" } */\n+  asm (1 : \"=r\" (i));\t  /* { dg-error \"expected string literal before\" } */\n+  asm (int : \"=r\" (i));\t  /* { dg-error \"expected string literal before\" } */\n+  asm (: : \"r\" (i));\t  /* { dg-error \"expected string literal before\" } */\n+  asm (1 : : \"r\" (i));\t  /* { dg-error \"expected string literal before\" } */\n+  asm (int : : \"r\" (i));  /* { dg-error \"expected string literal before\" } */\n+  asm (: : : \"memory\");\t  /* { dg-error \"expected string literal before\" } */\n+  asm (1 : : : \"memory\"); /* { dg-error \"expected string literal before\" } */\n+}"}]}