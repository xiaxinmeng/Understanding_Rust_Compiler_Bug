{"sha": "57174693e009628a889fd760bacc263d2d5c054f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcxNzQ2OTNlMDA5NjI4YTg4OWZkNzYwYmFjYzI2M2QyZDVjMDU0Zg==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2002-04-19T00:31:17Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2002-04-19T00:31:17Z"}, "message": "lib2funcs.S (__xtensa_libgcc_window_spill, [...]): Use a syscall instructions to flush the register windows.\n\n\n        * config/xtensa/lib2funcs.S (__xtensa_libgcc_window_spill,\n        __xtensa_nonlocal_goto): Use a syscall instructions to flush\n        the register windows.\n\nFrom-SVN: r52503", "tree": {"sha": "96516e8fa201023f0d7a897434ad8cf1b35ddc19", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96516e8fa201023f0d7a897434ad8cf1b35ddc19"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57174693e009628a889fd760bacc263d2d5c054f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57174693e009628a889fd760bacc263d2d5c054f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57174693e009628a889fd760bacc263d2d5c054f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57174693e009628a889fd760bacc263d2d5c054f/comments", "author": null, "committer": null, "parents": [{"sha": "46468cd96fb7916bec2ac3f1189e1805c543bece", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46468cd96fb7916bec2ac3f1189e1805c543bece", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46468cd96fb7916bec2ac3f1189e1805c543bece"}], "stats": {"total": 60, "additions": 21, "deletions": 39}, "files": [{"sha": "2e7f60ad10957c88d1682ed18e9d932401172ee1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57174693e009628a889fd760bacc263d2d5c054f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57174693e009628a889fd760bacc263d2d5c054f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=57174693e009628a889fd760bacc263d2d5c054f", "patch": "@@ -1,3 +1,9 @@\n+2002-04-18  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config/xtensa/lib2funcs.S (__xtensa_libgcc_window_spill,\n+\t__xtensa_nonlocal_goto): Use a syscall instructions to flush\n+\tthe register windows.\n+\n 2002-04-18  Zack Weinberg  <zack@codesourcery.com>\n \n \t* real.h: Define REAL_VALUE_TYPE_SIZE as 96 or 160, as"}, {"sha": "bdc26e85cc5c93b4c4315f7e098967db69063c1f", "filename": "gcc/config/xtensa/lib2funcs.S", "status": "modified", "additions": 15, "deletions": 39, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57174693e009628a889fd760bacc263d2d5c054f/gcc%2Fconfig%2Fxtensa%2Flib2funcs.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57174693e009628a889fd760bacc263d2d5c054f/gcc%2Fconfig%2Fxtensa%2Flib2funcs.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Flib2funcs.S?ref=57174693e009628a889fd760bacc263d2d5c054f", "patch": "@@ -30,46 +30,19 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n \n #include \"xtensa/xtensa-config.h\"\n \n-/* __xtensa_libgcc_window_spill: This function uses a series of nested\n-   calls to flush out all but the current register window.  This is\n-   used to set up the stack so that arbitrary frames can be accessed.\n-   The functions used for the nested calls are also reused by the\n-   nonlocal goto function below. */\n-\n-        .align  4\n-        .global __xtensa_libgcc_window_spill\n-        .type   __xtensa_libgcc_window_spill,@function\n-__xtensa_libgcc_window_spill:\n-\tentry\tsp, 48\n-\tcall4\t.L__wdwspill_assist52\t// called with call8, only need a call4\n-\tretw\n-        .size   __xtensa_libgcc_window_spill,.-__xtensa_libgcc_window_spill\n+/* __xtensa_libgcc_window_spill: This function flushes out all but the\n+   current register window.  This is used to set up the stack so that\n+   arbitrary frames can be accessed. */\n \n-        .align  4\n-.L__wdwspill_assist56:\n-\tentry\tsp, 16\n-\tcall4\t.L__wdwspill_assist52\n-\tretw\n-        .align  4\n-.L__wdwspill_assist52:\n-\tentry\tsp, 48\n-\tcall12\t.L__wdwspill_assist40\n-\tretw\n-        .align  4\n-.L__wdwspill_assist40:\n-\tentry\tsp, 48\n-\tcall12\t.L__wdwspill_assist28\n-\tretw\n-        .align  4\n-.L__wdwspill_assist28:\n-\tentry\tsp, 48\n-\tcall12\t.L__wdwspill_assist16\n-\tretw\n-        .align  4\n-.L__wdwspill_assist16:\n-\tentry\tsp, 16\n-\tmovi\ta15, 0\n+\t.align\t4\n+\t.global\t__xtensa_libgcc_window_spill\n+\t.type\t__xtensa_libgcc_window_spill,@function\n+__xtensa_libgcc_window_spill:\n+\tentry\tsp, 32\n+\tmovi\ta2, 0\n+\tsyscall\n \tretw\n+\t.size\t__xtensa_libgcc_window_spill,.-__xtensa_libgcc_window_spill\n \n \n /* __xtensa_nonlocal_goto: This code does all the hard work of a\n@@ -90,7 +63,10 @@ __xtensa_nonlocal_goto:\n \tentry\tsp, 32\n \n \t/* flush registers */\n-\tcall8\t.L__wdwspill_assist56\n+\tmov\ta5, a2\n+\tmovi\ta2, 0\n+\tsyscall\n+\tmov\ta2, a5\n \n \t/* Because the save area for a0-a3 is stored one frame below\n \t   the one identified by a2, the only way to restore those"}]}