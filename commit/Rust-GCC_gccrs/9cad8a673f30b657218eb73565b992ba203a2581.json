{"sha": "9cad8a673f30b657218eb73565b992ba203a2581", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWNhZDhhNjczZjMwYjY1NzIxOGViNzM1NjViOTkyYmEyMDNhMjU4MQ==", "commit": {"author": {"name": "Trevor Saunders", "email": "tbsaunde+gcc@tbsaunde.org", "date": "2016-08-28T00:03:52Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2016-08-28T00:03:52Z"}, "message": "haifa-sched.c: make ready_list an auto_vec<rtx_insn *>\n\ngcc/ChangeLog:\n\n2016-08-27  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* haifa-sched.c (fix_recovery_deps): Make ready_list a vector.\n\nFrom-SVN: r239799", "tree": {"sha": "19a384bcea386a3751160224101f27b43530e90c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19a384bcea386a3751160224101f27b43530e90c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9cad8a673f30b657218eb73565b992ba203a2581", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cad8a673f30b657218eb73565b992ba203a2581", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cad8a673f30b657218eb73565b992ba203a2581", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cad8a673f30b657218eb73565b992ba203a2581/comments", "author": null, "committer": null, "parents": [{"sha": "4a389eb62b96bb738c79c339f38aae45ef46ef39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a389eb62b96bb738c79c339f38aae45ef46ef39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a389eb62b96bb738c79c339f38aae45ef46ef39"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "2cfb164882e9f71390d87598d17f0acabea8a9a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9cad8a673f30b657218eb73565b992ba203a2581/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9cad8a673f30b657218eb73565b992ba203a2581/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9cad8a673f30b657218eb73565b992ba203a2581", "patch": "@@ -1,3 +1,7 @@\n+2016-08-27  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* haifa-sched.c (fix_recovery_deps): Make ready_list a vector.\n+\n 2016-08-27  Patrick Palka  <ppalka@gcc.gnu.org>\n \n \tPR tree-optimization/71077"}, {"sha": "c58b0ad399f0bb3732a4c7e57f7753e62d0e2e9e", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9cad8a673f30b657218eb73565b992ba203a2581/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9cad8a673f30b657218eb73565b992ba203a2581/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=9cad8a673f30b657218eb73565b992ba203a2581", "patch": "@@ -8600,9 +8600,8 @@ static void\n fix_recovery_deps (basic_block rec)\n {\n   rtx_insn *note, *insn, *jump;\n-  rtx_insn_list *ready_list = 0;\n+  auto_vec<rtx_insn *, 10> ready_list;\n   bitmap_head in_ready;\n-  rtx_insn_list *link;\n \n   bitmap_initialize (&in_ready, 0);\n \n@@ -8628,7 +8627,7 @@ fix_recovery_deps (basic_block rec)\n \t      sd_delete_dep (sd_it);\n \n \t      if (bitmap_set_bit (&in_ready, INSN_LUID (consumer)))\n-\t\tready_list = alloc_INSN_LIST (consumer, ready_list);\n+\t\tready_list.safe_push (consumer);\n \t    }\n \t  else\n \t    {\n@@ -8645,9 +8644,10 @@ fix_recovery_deps (basic_block rec)\n   bitmap_clear (&in_ready);\n \n   /* Try to add instructions to the ready or queue list.  */\n-  for (link = ready_list; link; link = link->next ())\n-    try_ready (link->insn ());\n-  free_INSN_LIST_list (&ready_list);\n+  unsigned int i;\n+  rtx_insn *temp;\n+  FOR_EACH_VEC_ELT_REVERSE (ready_list, i, temp)\n+    try_ready (temp);\n \n   /* Fixing jump's dependences.  */\n   insn = BB_HEAD (rec);"}]}