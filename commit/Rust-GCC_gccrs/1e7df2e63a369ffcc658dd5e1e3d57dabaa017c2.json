{"sha": "1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU3ZGYyZTYzYTM2OWZmY2M2NThkZDVlMWUzZDU3ZGFiYWEwMTdjMg==", "commit": {"author": {"name": "Marc Glisse", "email": "marc.glisse@inria.fr", "date": "2017-06-27T09:42:38Z"}, "committer": {"name": "Marc Glisse", "email": "glisse@gcc.gnu.org", "date": "2017-06-27T09:42:38Z"}, "message": "Simple reassoc transforms in match.pd\n\n2017-06-27  Marc Glisse  <marc.glisse@inria.fr>\n\ngcc/\n\t* match.pd ((A+-B)+(C-A), (A+B)-(A-C)): New transformations.\n\ngcc/testsuite/\n\t* gcc.dg/tree-ssa/assoc-1.c: New file.\n\nFrom-SVN: r249686", "tree": {"sha": "d28a305d3ebd2b2fe57a0c6fb6116646e7bc98ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d28a305d3ebd2b2fe57a0c6fb6116646e7bc98ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/comments", "author": {"login": "mglisse", "id": 10097863, "node_id": "MDQ6VXNlcjEwMDk3ODYz", "avatar_url": "https://avatars.githubusercontent.com/u/10097863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mglisse", "html_url": "https://github.com/mglisse", "followers_url": "https://api.github.com/users/mglisse/followers", "following_url": "https://api.github.com/users/mglisse/following{/other_user}", "gists_url": "https://api.github.com/users/mglisse/gists{/gist_id}", "starred_url": "https://api.github.com/users/mglisse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mglisse/subscriptions", "organizations_url": "https://api.github.com/users/mglisse/orgs", "repos_url": "https://api.github.com/users/mglisse/repos", "events_url": "https://api.github.com/users/mglisse/events{/privacy}", "received_events_url": "https://api.github.com/users/mglisse/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a889d6aa2730c084c338576b5a133134f142ce88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a889d6aa2730c084c338576b5a133134f142ce88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a889d6aa2730c084c338576b5a133134f142ce88"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "665e0b5b085a0406945cf503c08a9c2b7acc4296", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "patch": "@@ -1,3 +1,7 @@\n+2017-06-27  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\t* match.pd ((A+-B)+(C-A), (A+B)-(A-C)): New transformations.\n+\n 2017-06-27  Marc Glisse  <marc.glisse@inria.fr>\n \n \t* builtin-types.def (BT_FENV_T_PTR, BT_CONST_FENV_T_PTR,"}, {"sha": "083a5742bc37b6bdd5cc81d1616dd98efa0e1d4c", "filename": "gcc/match.pd", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2Fmatch.pd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2Fmatch.pd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatch.pd?ref=1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "patch": "@@ -1321,6 +1321,18 @@ DEFINE_INT_AND_FLOAT_ROUND_FN (RINT)\n   (simplify\n    (minus @0 (minus @0 @1))\n    @1)\n+  /* (A +- B) + (C - A)   -> C +- B */\n+  /* (A +  B) - (A - C)   -> B + C */\n+  /* More cases are handled with comparisons.  */\n+  (simplify\n+   (plus:c (plus:c @0 @1) (minus @2 @0))\n+   (plus @2 @1))\n+  (simplify\n+   (plus:c (minus @0 @1) (minus @2 @0))\n+   (minus @2 @1))\n+  (simplify\n+   (minus (plus:c @0 @1) (minus @0 @2))\n+   (plus @1 @2))\n \n   /* (A +- CST1) +- CST2 -> A + CST3\n      Use view_convert because it is safe for vectors and equivalent for"}, {"sha": "7364606164cac74f4e93f217ca0a519f241eaa84", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "patch": "@@ -1,3 +1,7 @@\n+2017-06-27  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\t* gcc.dg/tree-ssa/assoc-1.c: New file.\n+\n 2017-06-27  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/62046"}, {"sha": "f9821910bd01168b49c175cd709e0ff186c954d0", "filename": "gcc/testsuite/gcc.dg/tree-ssa/assoc-1.c", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fassoc-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fassoc-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fassoc-1.c?ref=1e7df2e63a369ffcc658dd5e1e3d57dabaa017c2", "patch": "@@ -0,0 +1,31 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -fdump-tree-optimized-raw -fno-tree-reassoc\" } */\n+\n+int f0(int a,int b,int c){\n+  int d = a + b;\n+  int e = c + b;\n+  return d - e;\n+}\n+int f1(int a,int b,int c){\n+  int d = a + b;\n+  int e = b - c;\n+  return d - e;\n+}\n+int f2(int a,int b,int c){\n+  int d = a + b;\n+  int e = c - b;\n+  return e + d;\n+}\n+int f3(int a,int b,int c){\n+  int d = a - b;\n+  int e = c - b;\n+  return d - e;\n+}\n+int f4(int a,int b,int c){\n+  int d = b - a;\n+  int e = c - b;\n+  return e + d;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"plus_expr\" 2 \"optimized\" } } */\n+/* { dg-final { scan-tree-dump-times \"minus_expr\" 3 \"optimized\" } } */"}]}