{"sha": "59182242496bf5774eceeff34576b3631793450a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTkxODIyNDI0OTZiZjU3NzRlY2VlZmYzNDU3NmIzNjMxNzkzNDUwYQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-05-02T17:43:33Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-05-02T17:43:33Z"}, "message": "tree.h (struct tree_decl): Add comdat_flag.\n\n\t* tree.h (struct tree_decl): Add comdat_flag.\n\t(DECL_COMDAT): Define it.\n\t* toplev.c (wrapup_global_declarations): Don't output a\n\tDECL_COMDAT function just because it's public.\n\nFrom-SVN: r26733", "tree": {"sha": "35ccb6e6780d50f42cbb6d4193015af65346b414", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/35ccb6e6780d50f42cbb6d4193015af65346b414"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/59182242496bf5774eceeff34576b3631793450a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59182242496bf5774eceeff34576b3631793450a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59182242496bf5774eceeff34576b3631793450a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59182242496bf5774eceeff34576b3631793450a/comments", "author": null, "committer": null, "parents": [{"sha": "af36a4d251dc01522e818b18e61e7bd289419654", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af36a4d251dc01522e818b18e61e7bd289419654", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af36a4d251dc01522e818b18e61e7bd289419654"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "29c83a7d2eb959303618e170a4183023bf5ec160", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59182242496bf5774eceeff34576b3631793450a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59182242496bf5774eceeff34576b3631793450a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=59182242496bf5774eceeff34576b3631793450a", "patch": "@@ -1,3 +1,10 @@\n+Sun May  2 14:02:21 1999  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* tree.h (struct tree_decl): Add comdat_flag.\n+\t(DECL_COMDAT): Define it.\n+\t* toplev.c (wrapup_global_declarations): Don't output a\n+\tDECL_COMDAT function just because it's public.\n+\n Sun May  2 15:16:42 1999  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* pdp11.h (TARGET_SWITCHES): Fix error in previous change."}, {"sha": "1fe439a7247c11a0aff91d1e40f0f448e768e74e", "filename": "gcc/toplev.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59182242496bf5774eceeff34576b3631793450a/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59182242496bf5774eceeff34576b3631793450a/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=59182242496bf5774eceeff34576b3631793450a", "patch": "@@ -2753,7 +2753,7 @@ wrapup_global_declarations (vec, len)\n \t      && DECL_INITIAL (decl) != 0\n \t      && DECL_SAVED_INSNS (decl) != 0\n \t      && (flag_keep_inline_functions\n-\t\t  || TREE_PUBLIC (decl)\n+\t\t  || (TREE_PUBLIC (decl) && !DECL_COMDAT (decl))\n \t\t  || TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (decl))))\n \t    {\n \t      reconsider = 1;"}, {"sha": "0d7ea84aafc423889b0867cf333c3f19932a01a2", "filename": "gcc/tree.h", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59182242496bf5774eceeff34576b3631793450a/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59182242496bf5774eceeff34576b3631793450a/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=59182242496bf5774eceeff34576b3631793450a", "patch": "@@ -1246,6 +1246,17 @@ struct tree_type\n    multiple translation units should be merged.  */\n #define DECL_ONE_ONLY(NODE) (DECL_CHECK (NODE)->decl.transparent_union)\n \n+/* Used in a DECL to indicate that, even if it TREE_PUBLIC, it need\n+   not be put out unless it is needed in this translation unit.\n+   Entities like this are shared across translation units (like weak\n+   entities), but are guaranteed to be generated by any translation\n+   unit that needs them, and therefore need not be put out anywhere\n+   where they are not needed.  DECL_COMDAT is just a hint to the\n+   back-end; it is up to front-ends which set this flag to ensure\n+   that there will never be any harm, other than bloat, in putting out\n+   something which is DECL_COMDAT.  */\n+#define DECL_COMDAT(NODE) (DECL_CHECK (NODE)->decl.comdat_flag)\n+\n /* Used in FUNCTION_DECLs to indicate that function entry and exit should\n    be instrumented with calls to support routines.  */\n #define DECL_NO_INSTRUMENT_FUNCTION_ENTRY_EXIT(NODE) ((NODE)->decl.no_instrument_function_entry_exit)\n@@ -1321,6 +1332,7 @@ struct tree_decl\n   unsigned non_addr_const_p : 1;\n   unsigned no_instrument_function_entry_exit : 1;\n   unsigned no_check_memory_usage : 1;\n+  unsigned comdat_flag : 1;\n \n   /* For a FUNCTION_DECL, if inline, this is the size of frame needed.\n      If built-in, this is the code for which built-in function."}]}