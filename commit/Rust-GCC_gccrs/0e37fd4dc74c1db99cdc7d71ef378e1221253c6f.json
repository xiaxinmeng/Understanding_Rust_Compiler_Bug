{"sha": "0e37fd4dc74c1db99cdc7d71ef378e1221253c6f", "node_id": "C_kwDOANBUbNoAKDBlMzdmZDRkYzc0YzFkYjk5Y2RjN2Q3MWVmMzc4ZTEyMjEyNTNjNmY", "commit": {"author": {"name": "LIU Hao", "email": "lh_mouse@126.com", "date": "2022-10-22T09:31:46Z"}, "committer": {"name": "Jonathan Yong", "email": "10walls@gmail.com", "date": "2022-10-23T02:00:16Z"}, "message": "libgcc: Update 'gthr-mcf.h' to include a dedicated header for libobjc\n\n'libobjc/thr.c' includes 'gthr.h'. While all the other gthread headers\nhave `#ifdef _LIBOBJC` checks, and provide a different set of inline\nfunctions, I think having one header provide two completely unrelated\nset of APIs is unsatisfactory, complicates maintenance, and hinders\nfurther development.\n\nThis commit references a new header for libobjc, and adds a copyright\nnotice, as in other headers.\n\nlibgcc/ChangeLog:\n\t* config/i386/gthr-mcf.h: Include 'gthr_libobjc.h' when building\n\tlibobjc, instead of 'gthr.h'", "tree": {"sha": "f3019a52f43d27388ed0780398143042d41dccee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f3019a52f43d27388ed0780398143042d41dccee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e37fd4dc74c1db99cdc7d71ef378e1221253c6f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e37fd4dc74c1db99cdc7d71ef378e1221253c6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e37fd4dc74c1db99cdc7d71ef378e1221253c6f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e37fd4dc74c1db99cdc7d71ef378e1221253c6f/comments", "author": {"login": "lhmouse", "id": 5071344, "node_id": "MDQ6VXNlcjUwNzEzNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5071344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lhmouse", "html_url": "https://github.com/lhmouse", "followers_url": "https://api.github.com/users/lhmouse/followers", "following_url": "https://api.github.com/users/lhmouse/following{/other_user}", "gists_url": "https://api.github.com/users/lhmouse/gists{/gist_id}", "starred_url": "https://api.github.com/users/lhmouse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lhmouse/subscriptions", "organizations_url": "https://api.github.com/users/lhmouse/orgs", "repos_url": "https://api.github.com/users/lhmouse/repos", "events_url": "https://api.github.com/users/lhmouse/events{/privacy}", "received_events_url": "https://api.github.com/users/lhmouse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jon-y", "id": 4688224, "node_id": "MDQ6VXNlcjQ2ODgyMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4688224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-y", "html_url": "https://github.com/jon-y", "followers_url": "https://api.github.com/users/jon-y/followers", "following_url": "https://api.github.com/users/jon-y/following{/other_user}", "gists_url": "https://api.github.com/users/jon-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-y/subscriptions", "organizations_url": "https://api.github.com/users/jon-y/orgs", "repos_url": "https://api.github.com/users/jon-y/repos", "events_url": "https://api.github.com/users/jon-y/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-y/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e39624519ae9e3b3160baf443e519ef22724edb3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e39624519ae9e3b3160baf443e519ef22724edb3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e39624519ae9e3b3160baf443e519ef22724edb3"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "40da86802b67e117035947d8717920a1a473d8b1", "filename": "libgcc/config/i386/gthr-mcf.h", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e37fd4dc74c1db99cdc7d71ef378e1221253c6f/libgcc%2Fconfig%2Fi386%2Fgthr-mcf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e37fd4dc74c1db99cdc7d71ef378e1221253c6f/libgcc%2Fconfig%2Fi386%2Fgthr-mcf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2Fgthr-mcf.h?ref=0e37fd4dc74c1db99cdc7d71ef378e1221253c6f", "patch": "@@ -1 +1,36 @@\n+/* Threads compatibility routines for libgcc and libobjc.  */\n+/* Copyright (C) 2022 Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify it under\n+the terms of the GNU General Public License as published by the Free\n+Software Foundation; either version 3, or (at your option) any later\n+version.\n+\n+GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+for more details.\n+\n+Under Section 7 of GPL version 3, you are granted additional\n+permissions described in the GCC Runtime Library Exception, version\n+3.1, as published by the Free Software Foundation.\n+\n+You should have received a copy of the GNU General Public License and\n+a copy of the GCC Runtime Library Exception along with this program;\n+see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#ifdef _LIBOBJC\n+\n+/* libobjc references some internal structures and requires a\n+ * dedicated set of functions.  */\n+#include <mcfgthread/gthr_libobjc.h>\n+\n+#else  /* _LIBOBJC  */\n+\n+/* This is for libgcc and libstdc++.  */\n #include <mcfgthread/gthr.h>\n+\n+#endif  /* _LIBOBJC  */"}]}