{"sha": "7ac63bcadb511dd552b7ce6b31dad203eea4971e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FjNjNiY2FkYjUxMWRkNTUyYjdjZTZiMzFkYWQyMDNlZWE0OTcxZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-10-10T19:22:04Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-10-10T19:22:04Z"}, "message": "* pt.c (instantiate_decl): Fix previous change.\n\nFrom-SVN: r15888", "tree": {"sha": "504c4e06b79418fa60f7c810af43f611b810689f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/504c4e06b79418fa60f7c810af43f611b810689f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7ac63bcadb511dd552b7ce6b31dad203eea4971e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ac63bcadb511dd552b7ce6b31dad203eea4971e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ac63bcadb511dd552b7ce6b31dad203eea4971e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ac63bcadb511dd552b7ce6b31dad203eea4971e/comments", "author": null, "committer": null, "parents": [{"sha": "9cd60aa99b7471aa513b269dcc38c77f5bb5cb8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cd60aa99b7471aa513b269dcc38c77f5bb5cb8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cd60aa99b7471aa513b269dcc38c77f5bb5cb8e"}], "stats": {"total": 22, "additions": 17, "deletions": 5}, "files": [{"sha": "d5d187f79db6c4d95dd6c0250471e00e9067c255", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ac63bcadb511dd552b7ce6b31dad203eea4971e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ac63bcadb511dd552b7ce6b31dad203eea4971e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7ac63bcadb511dd552b7ce6b31dad203eea4971e", "patch": "@@ -1,3 +1,7 @@\n+Fri Oct 10 12:21:11 1997  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* pt.c (instantiate_decl): Fix previous change.\n+\n Thu Oct  9 12:08:21 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* pt.c (tsubst): Fix thinko."}, {"sha": "8e1e42c8342a603ca2f0aa3aa5ae5f30d3e78cd8", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ac63bcadb511dd552b7ce6b31dad203eea4971e/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ac63bcadb511dd552b7ce6b31dad203eea4971e/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=7ac63bcadb511dd552b7ce6b31dad203eea4971e", "patch": "@@ -623,8 +623,7 @@ check_explicit_specialization (declarator, decl, template_count, flags)\n \t     member class template of a non-specialized class\n \t     template is itself a template.\t        \n \n-\t     So, we just leave the template info alone in this case.\n-\t     */\n+\t     So, we just leave the template info alone in this case.  */\n \t  if (!(DECL_TEMPLATE_INFO (decl) && DECL_TI_TEMPLATE (decl)))\n \t    DECL_TEMPLATE_INFO (decl)\n \t      = perm_tree_cons (tmpl, targs, NULL_TREE);\n@@ -4411,9 +4410,6 @@ instantiate_decl (d)\n   int line = lineno;\n   char *file = input_filename;\n \n-  if (DECL_TEMPLATE_SPECIALIZATION (d))\n-    return d;\n-\n   for (td = tmpl; DECL_TEMPLATE_INSTANTIATION (td); )\n     td = DECL_TI_TEMPLATE (td);\n \n@@ -4437,6 +4433,18 @@ instantiate_decl (d)\n   if (d_defined)\n     return d;\n \n+  if (TREE_CODE (d) == FUNCTION_DECL) \n+    {\n+      tree specs;\n+\n+      /* Check to see if there is a matching specialization. */\n+      for (specs = DECL_TEMPLATE_SPECIALIZATIONS (tmpl);\n+\t   specs != NULL_TREE;\n+\t   specs = TREE_CHAIN (specs))\n+\tif (comp_template_args (TREE_PURPOSE (specs), args))\n+\t  return TREE_VALUE (specs);\n+    }\n+\n   /* This needs to happen before any tsubsting.  */\n   if (! push_tinst_level (d))\n     return d;"}]}