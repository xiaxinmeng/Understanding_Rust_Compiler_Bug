{"sha": "a6c383b0d8a2819e3cfaa7ea900e9244acacb666", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZjMzgzYjBkOGEyODE5ZTNjZmFhN2VhOTAwZTkyNDRhY2FjYjY2Ng==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-03-28T22:38:24Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-03-28T22:38:24Z"}, "message": "reorg.c (mostly_true_jump): Use REG_BR_PROB notes when flag_branch_probabilities.\n\n\t* reorg.c (mostly_true_jump): Use REG_BR_PROB notes when\n\tflag_branch_probabilities.\n\nFrom-SVN: r13819", "tree": {"sha": "999c5704b3c88aeabc57a507f7efc9001f0fad46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/999c5704b3c88aeabc57a507f7efc9001f0fad46"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6c383b0d8a2819e3cfaa7ea900e9244acacb666", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6c383b0d8a2819e3cfaa7ea900e9244acacb666", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6c383b0d8a2819e3cfaa7ea900e9244acacb666", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6c383b0d8a2819e3cfaa7ea900e9244acacb666/comments", "author": null, "committer": null, "parents": [{"sha": "65f7a65344967d9e30291d99bcb342ad85f37b2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65f7a65344967d9e30291d99bcb342ad85f37b2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65f7a65344967d9e30291d99bcb342ad85f37b2c"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "8cd44731a5eeecea6371182903b8f36b78d3cfbe", "filename": "gcc/reorg.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6c383b0d8a2819e3cfaa7ea900e9244acacb666/gcc%2Freorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6c383b0d8a2819e3cfaa7ea900e9244acacb666/gcc%2Freorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freorg.c?ref=a6c383b0d8a2819e3cfaa7ea900e9244acacb666", "patch": "@@ -1350,6 +1350,26 @@ mostly_true_jump (jump_insn, condition)\n   int rare_dest = rare_destination (target_label);\n   int rare_fallthrough = rare_destination (NEXT_INSN (jump_insn));\n \n+  /* If branch probabilities are available, then use that number since it\n+     always gives a correct answer.  */\n+  if (flag_branch_probabilities)\n+    {\n+      rtx note = find_reg_note (jump_insn, REG_BR_PROB, 0);;\n+      if (note)\n+\t{\n+\t  int prob = XINT (note, 0);\n+\n+\t  if (prob >= REG_BR_PROB_BASE * 9 / 10)\n+\t    return 2;\n+\t  else if (prob >= REG_BR_PROB_BASE / 2)\n+\t    return 1;\n+\t  else if (prob >= REG_BR_PROB_BASE / 10)\n+\t    return 0;\n+\t  else\n+\t    return -1;\n+\t}\n+    }\n+\n   /* If this is a branch outside a loop, it is highly unlikely.  */\n   if (GET_CODE (PATTERN (jump_insn)) == SET\n       && GET_CODE (SET_SRC (PATTERN (jump_insn))) == IF_THEN_ELSE"}]}