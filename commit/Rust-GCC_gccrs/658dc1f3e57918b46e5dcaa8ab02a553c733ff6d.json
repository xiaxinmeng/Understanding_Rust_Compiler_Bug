{"sha": "658dc1f3e57918b46e5dcaa8ab02a553c733ff6d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjU4ZGMxZjNlNTc5MThiNDZlNWRjYWE4YWIwMmE1NTNjNzMzZmY2ZA==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-05-06T22:06:44Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-05-06T22:06:44Z"}, "message": "Another test.\n\nFrom-SVN: r19604", "tree": {"sha": "58bc2c87f741c7a3edbcf1d89c7f1da0a9313be6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58bc2c87f741c7a3edbcf1d89c7f1da0a9313be6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/658dc1f3e57918b46e5dcaa8ab02a553c733ff6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/658dc1f3e57918b46e5dcaa8ab02a553c733ff6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/658dc1f3e57918b46e5dcaa8ab02a553c733ff6d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/658dc1f3e57918b46e5dcaa8ab02a553c733ff6d/comments", "author": null, "committer": null, "parents": [{"sha": "df03cab511deb95a71f4c1f799517cbe76655d1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df03cab511deb95a71f4c1f799517cbe76655d1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df03cab511deb95a71f4c1f799517cbe76655d1e"}], "stats": {"total": 89, "additions": 89, "deletions": 0}, "files": [{"sha": "6f6fe19270c4eb4a12484c8d985267394f95668e", "filename": "gcc/testsuite/gcc.c-torture/compile/980506-2.c", "status": "added", "additions": 89, "deletions": 0, "changes": 89, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/658dc1f3e57918b46e5dcaa8ab02a553c733ff6d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F980506-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/658dc1f3e57918b46e5dcaa8ab02a553c733ff6d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F980506-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F980506-2.c?ref=658dc1f3e57918b46e5dcaa8ab02a553c733ff6d", "patch": "@@ -0,0 +1,89 @@\n+/*\n+ * inspired by glibc-2.0.6/sysdeps/libm-ieee754/s_nextafterf.c\n+ *\n+ * gcc -O2 -S -DOP=+ gives faddp %st(1),%st\n+ * gcc -O2 -S -DOP=* gives fmulp %st(1),%st\n+ * gcc -O2 -S -DOP=- gives fsubrp %st(1),%st\n+ * gcc -O2 -S -DOP=/ gives fdivrp %st(1),%st\n+ */\n+\n+#ifndef OP\n+#define OP *\n+#endif\n+\n+typedef int int32_t __attribute__ ((__mode__ (  __SI__ ))) ;\n+typedef unsigned int u_int32_t __attribute__ ((__mode__ (  __SI__ ))) ;\n+\n+typedef union\n+{\n+  float value;\n+  u_int32_t word;\n+} ieee_float_shape_type;\n+\n+float __nextafterf(float x, float y)\n+{\n+ int32_t hx,hy,ix,iy;\n+\n+ {\n+  ieee_float_shape_type gf_u;\n+  gf_u.value = x;\n+  hx = gf_u.word;\n+ }\n+ {\n+  ieee_float_shape_type gf_u;\n+  gf_u.value = y;\n+  hy = gf_u.word;\n+ }\n+ ix = hx&0x7fffffff;\n+ iy = hy&0x7fffffff;\n+\n+ if ( ix > 0x7f800000 || iy > 0x7f800000 )\n+    return x+y;\n+ if (x == y) return x;\n+ if (ix == 0)\n+   {\n+    {\n+     ieee_float_shape_type sf_u;\n+     sf_u.word = (hy&0x80000000) | 1;\n+     x = sf_u.value;\n+    }\n+    y = x*x;\n+    if (y == x) return y; else return x;\n+   }\n+ if (hx >= 0)\n+   {\n+    if (hx > hy)\n+       hx -= 1;\n+    else\n+       hx += 1;\n+   }\n+ else\n+   {\n+    if (hy >= 0 || hx > hy)\n+       hx -= 1;\n+    else\n+       hx += 1;\n+   }\n+ hy = hx & 0x7f800000;\n+ if (hy >= 0x7f800000)\n+    return x+x;\n+ if (hy < 0x00800000)\n+   {\n+    y = x OP x;\n+    if (y != x)\n+      {\n+       ieee_float_shape_type sf_u;\n+       sf_u.word = hx;\n+       y = sf_u.value;\n+       return y;\n+      }\n+   }\n+ {\n+  ieee_float_shape_type sf_u;\n+  sf_u.word = hx;\n+  x = sf_u.value;\n+ }\n+ return x;\n+}\n+\n+"}]}