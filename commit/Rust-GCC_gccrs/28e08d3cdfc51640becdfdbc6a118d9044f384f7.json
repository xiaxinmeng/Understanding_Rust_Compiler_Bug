{"sha": "28e08d3cdfc51640becdfdbc6a118d9044f384f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhlMDhkM2NkZmM1MTY0MGJlY2RmZGJjNmExMThkOTA0NGYzODRmNw==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2007-03-27T22:06:00Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2007-03-27T22:06:00Z"}, "message": "* lib/compat.exp (compat-execute): Fix processing of file names.\n\nFrom-SVN: r123270", "tree": {"sha": "7f81470708ebdf445df11945cd2907315541cada", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f81470708ebdf445df11945cd2907315541cada"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28e08d3cdfc51640becdfdbc6a118d9044f384f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28e08d3cdfc51640becdfdbc6a118d9044f384f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28e08d3cdfc51640becdfdbc6a118d9044f384f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28e08d3cdfc51640becdfdbc6a118d9044f384f7/comments", "author": null, "committer": null, "parents": [{"sha": "c97d6ac3ed782b89daa8db785749676b34f5d20b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c97d6ac3ed782b89daa8db785749676b34f5d20b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c97d6ac3ed782b89daa8db785749676b34f5d20b"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "400707811969f06f629b6c82e0551cb476d354e7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28e08d3cdfc51640becdfdbc6a118d9044f384f7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28e08d3cdfc51640becdfdbc6a118d9044f384f7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=28e08d3cdfc51640becdfdbc6a118d9044f384f7", "patch": "@@ -1,3 +1,7 @@\n+2007-03-27  Janis Johnson  <janis187@us.ibm.com>\n+\n+\t* lib/compat.exp (compat-execute): Fix processing of file names.\n+\n 2007-03-27  Daniel Jacobowitz  <dan@codesourcery.com>\n \n \t* gcc.target/powerpc/ppc-stackalign-1.c: Run for powerpc-eabi."}, {"sha": "6e15f91e3de90680e43332665655dad3191c7e71", "filename": "gcc/testsuite/lib/compat.exp", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28e08d3cdfc51640becdfdbc6a118d9044f384f7/gcc%2Ftestsuite%2Flib%2Fcompat.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28e08d3cdfc51640becdfdbc6a118d9044f384f7/gcc%2Ftestsuite%2Flib%2Fcompat.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fcompat.exp?ref=28e08d3cdfc51640becdfdbc6a118d9044f384f7", "patch": "@@ -259,10 +259,13 @@ proc compat-execute { src1 sid use_alt } {\n     }\n \n     # Set up the names of the other source files.\n-    regsub \"_main.*\" $src1 \"\" base\n-    regsub \".*/\" $base \"\" base\n-    regsub \"_main\" $src1 \"_x\" src2\n-    regsub \"_main\" $src1 \"_y\" src3\n+    set dir [file dirname $src1]\n+    set ext [file extension $src1]\n+    set base [file rootname $src1]\n+    set base [string range $base [string length $dir] end]\n+    regsub \"_main\" $base \"\" base\n+    set src2 \"${dir}/${base}_x${ext}\"\n+    set src3 \"${dir}/${base}_y${ext}\"\n \n     # Use the dg-options mechanism to specify extra flags for this test. \n     # The extra flags in each file are used to compile that file, and the"}]}