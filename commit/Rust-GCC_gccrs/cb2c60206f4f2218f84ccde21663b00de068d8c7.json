{"sha": "cb2c60206f4f2218f84ccde21663b00de068d8c7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2IyYzYwMjA2ZjRmMjIxOGY4NGNjZGUyMTY2M2IwMGRlMDY4ZDhjNw==", "commit": {"author": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2020-03-09T02:55:11Z"}, "committer": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2020-03-09T02:55:11Z"}, "message": "[testsuite] Fix PR94019 to check vector char when vect_hw_misalign\n\nAs PR94019 shows, without misaligned vector access support but with\nrealign load, the vectorized loop will end up with realign scheme.\nIt generates mask (control vector) with return type vector signed\nchar which breaks the not check.\n\ngcc/testsuite/ChangeLog\n\n2020-03-09  Kewen Lin  <linkw@gcc.gnu.org>\n\n    PR testsuite/94019\n    * gcc.dg/vect/vect-over-widen-17.c: Don't expect vector char if\n    it's without misaligned vector access support.", "tree": {"sha": "25cdcb91a07cdcd68881f3e8bc0b856b854fe665", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25cdcb91a07cdcd68881f3e8bc0b856b854fe665"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb2c60206f4f2218f84ccde21663b00de068d8c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb2c60206f4f2218f84ccde21663b00de068d8c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb2c60206f4f2218f84ccde21663b00de068d8c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb2c60206f4f2218f84ccde21663b00de068d8c7/comments", "author": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d5114529228f97c2a433fa72ddea3fadeb6465b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5114529228f97c2a433fa72ddea3fadeb6465b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5114529228f97c2a433fa72ddea3fadeb6465b3"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "b72b9cb19285ccd8378e22221ec84ef189daa4d1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb2c60206f4f2218f84ccde21663b00de068d8c7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb2c60206f4f2218f84ccde21663b00de068d8c7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cb2c60206f4f2218f84ccde21663b00de068d8c7", "patch": "@@ -1,3 +1,9 @@\n+2020-03-09  Kewen Lin  <linkw@gcc.gnu.org>\n+\n+\tPR testsuite/94019\n+\t* gcc.dg/vect/vect-over-widen-17.c: Don't expect vector char if it's\n+\twithout misaligned vector access support.\n+\n 2020-03-09  Kewen Lin  <linkw@gcc.gnu.org>\n \n \tPR testsuite/94023"}, {"sha": "333d74ac3e7bdf99cc22b8fc7e919e39af7d2ca4", "filename": "gcc/testsuite/gcc.dg/vect/vect-over-widen-17.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb2c60206f4f2218f84ccde21663b00de068d8c7/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-over-widen-17.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb2c60206f4f2218f84ccde21663b00de068d8c7/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-over-widen-17.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-over-widen-17.c?ref=cb2c60206f4f2218f84ccde21663b00de068d8c7", "patch": "@@ -41,6 +41,9 @@ main (void)\n }\n \n /* { dg-final { scan-tree-dump-not {vect_recog_over_widening_pattern: detected} \"vect\" } } */\n-/* { dg-final { scan-tree-dump-not {vector[^\\n]*char} \"vect\" } } */\n+/* On Power, if there is no vect_hw_misalign support, unaligned vector access\n+   adopts realign_load scheme.  It requires rs6000_builtin_mask_for_load to\n+   generate mask whose return type is vector char.  */\n+/* { dg-final { scan-tree-dump-not {vector[^\\n]*char} \"vect\" { target vect_hw_misalign } } } */\n /* { dg-final { scan-tree-dump-not {vector[^ ]* int} \"vect\" } } */\n /* { dg-final { scan-tree-dump-times \"vectorized 1 loop\" 1 \"vect\" } } */"}]}