{"sha": "48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhkMWYzMWQxYjcxMzFlOGY4MDllZGU4MjU2ZTRmMWViNmM1YzNhZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2018-11-21T02:38:43Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-11-21T02:38:43Z"}, "message": "re PR lto/84044 (Spurious -Wodr warning with -flto)\n\n\n\tPR lto/84044\n\t* ipa-devirt.c (odr_types_equivalent_p): Use operand_equal_p to\n\tcompare ENUM values.\n\t* g++.dg/lto/odr-4_0.C: New testcase.\n\t* g++.dg/lto/odr-4_1.C: New testcase.\n\nFrom-SVN: r266334", "tree": {"sha": "d9521deeb7ea397d51336ba8b4f0c535f582706b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9521deeb7ea397d51336ba8b4f0c535f582706b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/comments", "author": null, "committer": null, "parents": [{"sha": "d3d684c642943cb5a481fcc38e0ee46ee8b1223c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3d684c642943cb5a481fcc38e0ee46ee8b1223c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3d684c642943cb5a481fcc38e0ee46ee8b1223c"}], "stats": {"total": 34, "additions": 33, "deletions": 1}, "files": [{"sha": "3075648e439ec676d4aba88cb5ca3e018231a8e5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "patch": "@@ -1,3 +1,9 @@\n+2018-11-20  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR lto/84044\n+\t* ipa-devirt.c (odr_types_equivalent_p): Use operand_equal_p to\n+\tcompare ENUM values.\n+\n 2018-11-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/87895"}, {"sha": "b72789c72bb6a210e7ce53c4ec35f358ed59e9ea", "filename": "gcc/ipa-devirt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Fipa-devirt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Fipa-devirt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-devirt.c?ref=48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "patch": "@@ -1343,7 +1343,7 @@ odr_types_equivalent_p (tree t1, tree t2, bool warn, bool *warned,\n \t\t\t   \" is defined in another translation unit\"));\n \t      return false;\n \t    }\n-\t  if (TREE_VALUE (v1) != TREE_VALUE (v2))\n+\t  if (!operand_equal_p (TREE_VALUE (v1), TREE_VALUE (v2), 0))\n \t    {\n \t      warn_odr (t1, t2, NULL, NULL, warn, warned,\n \t\t\tG_(\"an enum with different values is defined\""}, {"sha": "d3ebbf0bcce3b901ad74fcb709d095c31901646f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "patch": "@@ -1,3 +1,9 @@\n+2018-11-20  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR lto/84044\n+\t* g++.dg/lto/odr-4_0.C: New testcase.\n+\t* g++.dg/lto/odr-4_1.C: New testcase.\n+\n 2018-11-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/88110"}, {"sha": "5f0cf8d0fc2c57c18db7848f9ce8859b5f3c80b1", "filename": "gcc/testsuite/g++.dg/lto/odr-4_0.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fodr-4_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fodr-4_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fodr-4_0.C?ref=48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "patch": "@@ -0,0 +1,11 @@\n+// { dg-lto-do link }\n+// { dg-lto-options { -O2 -flto }  } \n+struct B {\n+  enum class E { V0, V1 };\n+  virtual ~B();\n+  E e;\n+};\n+\n+B b;\n+\n+int main() {}"}, {"sha": "d1d3858f10919358c851c1ce21bbfaf3a503cd7c", "filename": "gcc/testsuite/g++.dg/lto/odr-4_1.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fodr-4_1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fodr-4_1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fodr-4_1.C?ref=48d1f31d1b7131e8f809ede8256e4f1eb6c5c3ae", "patch": "@@ -0,0 +1,9 @@\n+struct B {\n+  enum class E { V0, V1 };\n+  virtual ~B();\n+  E e;\n+};\n+\n+B::~B() = default;\n+\n+"}]}