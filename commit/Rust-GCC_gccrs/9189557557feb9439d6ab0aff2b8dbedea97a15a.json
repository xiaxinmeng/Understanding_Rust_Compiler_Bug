{"sha": "9189557557feb9439d6ab0aff2b8dbedea97a15a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTE4OTU1NzU1N2ZlYjk0MzlkNmFiMGFmZjJiOGRiZWRlYTk3YTE1YQ==", "commit": {"author": {"name": "Ghjuvan Lacambre", "email": "lacambre@adacore.com", "date": "2020-11-18T10:23:05Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-12-14T15:51:51Z"}, "message": "[Ada] Implement AI12-0398-1/03\n\ngcc/ada/\n\n\t* par-ch3.adb (P_Discriminant_Part_Opt): Parse aspects, update\n\tdocumentation.\n\t* par-ch6.adb (P_Return_Statement): Likewise.\n\t* par-ch9.adb (P_Entry_Index_Specification): Likewise.", "tree": {"sha": "5712310d8cd60ce029bd5dc7c96caebb098e4914", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5712310d8cd60ce029bd5dc7c96caebb098e4914"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9189557557feb9439d6ab0aff2b8dbedea97a15a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9189557557feb9439d6ab0aff2b8dbedea97a15a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9189557557feb9439d6ab0aff2b8dbedea97a15a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9189557557feb9439d6ab0aff2b8dbedea97a15a/comments", "author": {"login": "glacambre", "id": 11534587, "node_id": "MDQ6VXNlcjExNTM0NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/11534587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glacambre", "html_url": "https://github.com/glacambre", "followers_url": "https://api.github.com/users/glacambre/followers", "following_url": "https://api.github.com/users/glacambre/following{/other_user}", "gists_url": "https://api.github.com/users/glacambre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glacambre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glacambre/subscriptions", "organizations_url": "https://api.github.com/users/glacambre/orgs", "repos_url": "https://api.github.com/users/glacambre/repos", "events_url": "https://api.github.com/users/glacambre/events{/privacy}", "received_events_url": "https://api.github.com/users/glacambre/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "097826df0cb9333f06bc857a1c02a8842d0de7fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/097826df0cb9333f06bc857a1c02a8842d0de7fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/097826df0cb9333f06bc857a1c02a8842d0de7fd"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "5a993bf2b1cde3cebb6cc53f0555111ecec0e8c1", "filename": "gcc/ada/par-ch3.adb", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9189557557feb9439d6ab0aff2b8dbedea97a15a/gcc%2Fada%2Fpar-ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9189557557feb9439d6ab0aff2b8dbedea97a15a/gcc%2Fada%2Fpar-ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch3.adb?ref=9189557557feb9439d6ab0aff2b8dbedea97a15a", "patch": "@@ -3002,9 +3002,9 @@ package body Ch3 is\n \n    --  DISCRIMINANT_SPECIFICATION ::=\n    --    DEFINING_IDENTIFIER_LIST : [NULL_EXCLUSION] SUBTYPE_MARK\n-   --      [:= DEFAULT_EXPRESSION]\n+   --      [:= DEFAULT_EXPRESSION] [ASPECT_SPECIFICATION]\n    --  | DEFINING_IDENTIFIER_LIST : ACCESS_DEFINITION\n-   --      [:= DEFAULT_EXPRESSION]\n+   --      [:= DEFAULT_EXPRESSION] [ASPECT_SPECIFICATION]\n \n    --  If no known discriminant part is present, then No_List is returned\n \n@@ -3098,6 +3098,10 @@ package body Ch3 is\n                Set_Expression\n                  (Specification_Node, Init_Expr_Opt (True));\n \n+               if Token = Tok_With then\n+                  P_Aspect_Specifications (Specification_Node, False);\n+               end if;\n+\n                if Ident > 1 then\n                   Set_Prev_Ids (Specification_Node, True);\n                end if;"}, {"sha": "f65c6f6f8158c9ca4227a98b36aa0abf26ab584f", "filename": "gcc/ada/par-ch6.adb", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9189557557feb9439d6ab0aff2b8dbedea97a15a/gcc%2Fada%2Fpar-ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9189557557feb9439d6ab0aff2b8dbedea97a15a/gcc%2Fada%2Fpar-ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch6.adb?ref=9189557557feb9439d6ab0aff2b8dbedea97a15a", "patch": "@@ -1770,7 +1770,8 @@ package body Ch6 is\n    --\n    --  EXTENDED_RETURN_STATEMENT ::=\n    --    return DEFINING_IDENTIFIER : [aliased] RETURN_SUBTYPE_INDICATION\n-   --                                           [:= EXPRESSION] [do\n+   --                                           [:= EXPRESSION]\n+   --                                           [ASPECT_SPECIFICATION] [do\n    --      HANDLED_SEQUENCE_OF_STATEMENTS\n    --    end return];\n    --\n@@ -1916,6 +1917,7 @@ package body Ch6 is\n       Ret_Sloc : constant Source_Ptr := Token_Ptr;\n       Ret_Strt : constant Column_Number := Start_Column;\n       Ret_Node : Node_Id;\n+      Decl     : Node_Id;\n \n    --  Start of processing for P_Return_Statement\n \n@@ -1955,8 +1957,12 @@ package body Ch6 is\n             end if;\n \n             Ret_Node := New_Node (N_Extended_Return_Statement, Ret_Sloc);\n-            Set_Return_Object_Declarations\n-              (Ret_Node, New_List (P_Return_Object_Declaration));\n+            Decl := P_Return_Object_Declaration;\n+            Set_Return_Object_Declarations (Ret_Node, New_List (Decl));\n+\n+            if Token = Tok_With then\n+               P_Aspect_Specifications (Decl, False);\n+            end if;\n \n             if Token = Tok_Do then\n                Push_Scope_Stack;"}, {"sha": "7877adcd228f73bf9c82e0d9e00b2810213474f9", "filename": "gcc/ada/par-ch9.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9189557557feb9439d6ab0aff2b8dbedea97a15a/gcc%2Fada%2Fpar-ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9189557557feb9439d6ab0aff2b8dbedea97a15a/gcc%2Fada%2Fpar-ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch9.adb?ref=9189557557feb9439d6ab0aff2b8dbedea97a15a", "patch": "@@ -1316,6 +1316,7 @@ package body Ch9 is\n \n    --  ENTRY_INDEX_SPECIFICATION ::=\n    --    for DEFINING_IDENTIFIER in DISCRETE_SUBTYPE_DEFINITION\n+   --                                                    [ASPECT_SPECIFICATION]\n \n    --  Error recovery: can raise Error_Resync\n \n@@ -1329,6 +1330,11 @@ package body Ch9 is\n       T_In;\n       Set_Discrete_Subtype_Definition\n         (Iterator_Node, P_Discrete_Subtype_Definition);\n+\n+      if Token = Tok_With then\n+         P_Aspect_Specifications (Iterator_Node, False);\n+      end if;\n+\n       return Iterator_Node;\n    end P_Entry_Index_Specification;\n "}]}