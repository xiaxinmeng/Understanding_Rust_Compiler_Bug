{"sha": "6147feb54c7473033c5e9344fdd834c417820af4", "node_id": "C_kwDOANBUbNoAKDYxNDdmZWI1NGM3NDczMDMzYzVlOTM0NGZkZDgzNGM0MTc4MjBhZjQ", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-12-20T15:27:30Z"}, "committer": {"name": "Marc Poulhi\u00e8s", "email": "poulhies@adacore.com", "date": "2023-01-05T14:30:02Z"}, "message": "ada: Remove unhelpful special case for renamed bodies in GNATprove mode\n\nThis patch reverts a special-case related to inlining of renamed bodies\nin GNATprove mode. Its idea was that inlining is decided in routine\nCannot_Inline, which is called much later. This didn't quite work,\nbecause in the meantime the renamed body was prepared to inlining in\nBuild_Body_To_Inline, which was not designed to handle renamed bodies.\n\ngcc/ada/\n\n\t* freeze.adb (Build_Renamed_Body): Revert a special case for\n\tGNATprove; remove unnecessary initialization of a local variable.", "tree": {"sha": "9b8dc6d6646647c488142b195ca03cf8db3ebc42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b8dc6d6646647c488142b195ca03cf8db3ebc42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6147feb54c7473033c5e9344fdd834c417820af4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6147feb54c7473033c5e9344fdd834c417820af4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6147feb54c7473033c5e9344fdd834c417820af4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6147feb54c7473033c5e9344fdd834c417820af4/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dkm", "id": 87603, "node_id": "MDQ6VXNlcjg3NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/87603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkm", "html_url": "https://github.com/dkm", "followers_url": "https://api.github.com/users/dkm/followers", "following_url": "https://api.github.com/users/dkm/following{/other_user}", "gists_url": "https://api.github.com/users/dkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkm/subscriptions", "organizations_url": "https://api.github.com/users/dkm/orgs", "repos_url": "https://api.github.com/users/dkm/repos", "events_url": "https://api.github.com/users/dkm/events{/privacy}", "received_events_url": "https://api.github.com/users/dkm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07facb98ed0db8771fd36e6c73921177c11b18ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07facb98ed0db8771fd36e6c73921177c11b18ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07facb98ed0db8771fd36e6c73921177c11b18ea"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "a3ab685f5fc617d16725d29c7fc198ac55dbd860", "filename": "gcc/ada/freeze.adb", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6147feb54c7473033c5e9344fdd834c417820af4/gcc%2Fada%2Ffreeze.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6147feb54c7473033c5e9344fdd834c417820af4/gcc%2Fada%2Ffreeze.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffreeze.adb?ref=6147feb54c7473033c5e9344fdd834c417820af4", "patch": "@@ -398,7 +398,7 @@ package body Freeze is\n       Nam        : constant Node_Id := Name (N);\n       Old_S      : Entity_Id;\n       Spec       : constant Node_Id := New_Copy_Tree (Specification (Decl));\n-      Actuals    : List_Id := No_List;\n+      Actuals    : List_Id;\n       Call_Node  : Node_Id;\n       Call_Name  : Node_Id;\n       Body_Node  : Node_Id;\n@@ -477,14 +477,11 @@ package body Freeze is\n       --  calls to the renamed entity. The body must be generated in any case\n       --  for calls that may appear elsewhere. This is not done in the case\n       --  where the subprogram is an instantiation because the actual proper\n-      --  body has not been built yet. This is also not done in GNATprove mode\n-      --  as we need to check other conditions for creating a body to inline\n-      --  in that case, which are controlled in Analyze_Subprogram_Body_Helper.\n+      --  body has not been built yet.\n \n       if Ekind (Old_S) in E_Function | E_Procedure\n         and then Nkind (Decl) = N_Subprogram_Declaration\n         and then not Is_Generic_Instance (Old_S)\n-        and then not GNATprove_Mode\n       then\n          Set_Body_To_Inline (Decl, Old_S);\n       end if;"}]}