{"sha": "3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U2YTNmNmZjMzY2MmYwYzgzMGY0ZDNlMzU2MzQ3NDVhY2UzNzljZg==", "commit": {"author": {"name": "Andrey Belevantsev", "email": "abel@ispras.ru", "date": "2010-10-14T07:56:47Z"}, "committer": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2010-10-14T07:56:47Z"}, "message": "re PR rtl-optimization/45570 (ICE: in cfg_preds_1, at sel-sched-ir.c:4584)\n\n\tPR rtl-optimization/45570\n\t* sel-sched-ir.c (cfg_preds_1): When walking out of the region, assert\n\tthat we are pipelining outer loops.  Allow returning zero predecessors.\n\t* gcc.dg/pr45570.c: New test.\n\nFrom-SVN: r165454", "tree": {"sha": "213677380c72865d80aaf935571da2537753eb95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/213677380c72865d80aaf935571da2537753eb95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/comments", "author": {"login": "abonzo", "id": 20396542, "node_id": "MDQ6VXNlcjIwMzk2NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/20396542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abonzo", "html_url": "https://github.com/abonzo", "followers_url": "https://api.github.com/users/abonzo/followers", "following_url": "https://api.github.com/users/abonzo/following{/other_user}", "gists_url": "https://api.github.com/users/abonzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/abonzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abonzo/subscriptions", "organizations_url": "https://api.github.com/users/abonzo/orgs", "repos_url": "https://api.github.com/users/abonzo/repos", "events_url": "https://api.github.com/users/abonzo/events{/privacy}", "received_events_url": "https://api.github.com/users/abonzo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "262d82326eb80275d4a93d1fa1be3a01fd7756c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/262d82326eb80275d4a93d1fa1be3a01fd7756c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/262d82326eb80275d4a93d1fa1be3a01fd7756c7"}], "stats": {"total": 82, "additions": 79, "deletions": 3}, "files": [{"sha": "caf71b351f845f1092b3d44df5291c02ae4c3c42", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "patch": "@@ -1,3 +1,10 @@\n+2010-10-14  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/45570\n+\t* sel-sched-ir.c (cfg_preds_1): When walking out of the region,\n+\tassert that we are pipelining outer loops.  Allow returning\n+\tzero predecessors.\n+\n 2010-10-14  Andrey Belevantsev  <abel@ispras.ru>\n \n \t* sel-sched-ir.c (maybe_tidy_empty_bb): Simplify comment."}, {"sha": "f29f7116efcc1f23ec57ab5d2acfa198a7c130ef", "filename": "gcc/sel-sched-ir.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2Fsel-sched-ir.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2Fsel-sched-ir.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsel-sched-ir.c?ref=3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "patch": "@@ -4578,8 +4578,12 @@ cfg_preds_1 (basic_block bb, insn_t **preds, int *n, int *size)\n       basic_block pred_bb = e->src;\n       insn_t bb_end = BB_END (pred_bb);\n \n-      /* ??? This code is not supposed to walk out of a region.  */\n-      gcc_assert (in_current_region_p (pred_bb));\n+      if (!in_current_region_p (pred_bb))\n+\t{\n+\t  gcc_assert (flag_sel_sched_pipelining_outer_loops\n+\t\t      && current_loop_nest);\n+\t  continue;\n+\t}\n \n       if (sel_bb_empty_p (pred_bb))\n \tcfg_preds_1 (pred_bb, preds, n, size);\n@@ -4592,7 +4596,9 @@ cfg_preds_1 (basic_block bb, insn_t **preds, int *n, int *size)\n \t}\n     }\n \n-  gcc_assert (*n != 0);\n+  gcc_assert (*n != 0\n+\t      || (flag_sel_sched_pipelining_outer_loops\n+\t\t  && current_loop_nest));\n }\n \n /* Find all predecessors of BB and record them in PREDS and their number"}, {"sha": "98ca28465dbd59664aef47d332e89e6e225944b3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "patch": "@@ -1,3 +1,8 @@\n+2010-10-14  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/45570\n+\t* gcc.dg/pr45570.c: New test.\n+\n 2010-10-13  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* gcc.target/i386/recip-vec-sqrtf-avx.c: New."}, {"sha": "0b4b3676b9eb0585a5e59cf7456bc233afef0600", "filename": "gcc/testsuite/gcc.dg/pr45570.c", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2Ftestsuite%2Fgcc.dg%2Fpr45570.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6a3f6fc3662f0c830f4d3e35634745ace379cf/gcc%2Ftestsuite%2Fgcc.dg%2Fpr45570.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr45570.c?ref=3e6a3f6fc3662f0c830f4d3e35634745ace379cf", "patch": "@@ -0,0 +1,58 @@\n+/* { dg-do compile { target powerpc*-*-* ia64-*-* x86_64-*-* } } */\n+/* { dg-options \"O3 -fselective-scheduling2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -ftracer\" } */\n+void\n+parser_get_next_char (char c, int qm, char *p)\n+{\n+  int quote_mode = 0;\n+  for (; *p; p++)\n+    {\n+      if (qm)\n+\t{\n+\t  if (quote_mode == 0 && *p == '\"' && *(p - 1))\n+\t    {\n+\t      quote_mode = 1;\n+\t      continue;\n+\t    }\n+\t  if (quote_mode && *p == '\"' && *(p - 1))\n+\t    quote_mode = 0;\n+\t}\n+      if (quote_mode == 0 && *p == c && *(p - 1))\n+\tbreak;\n+    }\n+}\n+\n+void\n+parser_get_next_parameter (char *p)\n+{\n+  parser_get_next_char (':', 1, p);\n+}\n+\n+/* { dg-do compile { target powerpc*-*-* ia64-*-* x86_64-*-* } } */\n+/* { dg-options \"O3 -fselective-scheduling2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -ftracer\" } */\n+void\n+parser_get_next_char (char c, int qm, char *p)\n+{\n+  int quote_mode = 0;\n+  for (; *p; p++)\n+    {\n+      if (qm)\n+\t{\n+\t  if (quote_mode == 0 && *p == '\"' && *(p - 1))\n+\t    {\n+\t      quote_mode = 1;\n+\t      continue;\n+\t    }\n+\t  if (quote_mode && *p == '\"' && *(p - 1))\n+\t    quote_mode = 0;\n+\t}\n+      if (quote_mode == 0 && *p == c && *(p - 1))\n+\tbreak;\n+    }\n+}\n+\n+void\n+parser_get_next_parameter (char *p)\n+{\n+  parser_get_next_char (':', 1, p);\n+}\n+"}]}