{"sha": "cd76ea335859b480fed527a39f7ba84963c1bb3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Q3NmVhMzM1ODU5YjQ4MGZlZDUyN2EzOWY3YmE4NDk2M2MxYmIzYQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-10-30T20:50:38Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-10-30T20:50:38Z"}, "message": "(expand_asm_operands): Disallow matching constraints on output and\nvalidate the numbers on inputs.\n\nFrom-SVN: r13077", "tree": {"sha": "4e6f19e4666006f596da840931e8165473769ef5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e6f19e4666006f596da840931e8165473769ef5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cd76ea335859b480fed527a39f7ba84963c1bb3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd76ea335859b480fed527a39f7ba84963c1bb3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd76ea335859b480fed527a39f7ba84963c1bb3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd76ea335859b480fed527a39f7ba84963c1bb3a/comments", "author": null, "committer": null, "parents": [{"sha": "c6258ee2174574ecb9c782dc1908dd049db46ce1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6258ee2174574ecb9c782dc1908dd049db46ce1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6258ee2174574ecb9c782dc1908dd049db46ce1"}], "stats": {"total": 20, "additions": 13, "deletions": 7}, "files": [{"sha": "a8f2abcee9e85e853c2eb84508e57796b7876395", "filename": "gcc/stmt.c", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd76ea335859b480fed527a39f7ba84963c1bb3a/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd76ea335859b480fed527a39f7ba84963c1bb3a/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=cd76ea335859b480fed527a39f7ba84963c1bb3a", "patch": "@@ -1453,13 +1453,12 @@ expand_asm_operands (string, outputs, inputs, clobbers, vol, filename, line)\n #endif\n \t    break;\n \n-\t  case 'p':  case 'g':  case 'r':\n-\t    /* Whether or not a numeric constraint allows a register is\n-\t       decided by the matching constraint, and so there is no need\n-\t       to do anything special with them.  We must handle them in\n-\t       the default case, so that we don't unnecessarily force\n-\t       operands to memory.  */\n \t  case '0':  case '1':  case '2':  case '3':  case '4':\n+\t  case '5':  case '6':  case '7':  case '8':  case '9':\n+\t    error (\"matching constraint not valid in output operand\");\n+\t    break;\n+\n+\t  case 'p':  case 'g':  case 'r':\n \t  default:\n \t    allows_reg = 1;\n \t    break;\n@@ -1564,13 +1563,20 @@ expand_asm_operands (string, outputs, inputs, clobbers, vol, filename, line)\n #endif\n \t    break;\n \n-\t  case 'p':  case 'g':  case 'r':\n \t    /* Whether or not a numeric constraint allows a register is\n \t       decided by the matching constraint, and so there is no need\n \t       to do anything special with them.  We must handle them in\n \t       the default case, so that we don't unnecessarily force\n \t       operands to memory.  */\n \t  case '0':  case '1':  case '2':  case '3':  case '4':\n+\t  case '5':  case '6':  case '7':  case '8':  case '9':\n+\t    if (TREE_STRING_POINTER (TREE_PURPOSE (tail))[j]\n+\t\t>= '0' + noutputs)\n+\t      error (\"matching constraint references invalid operand number\");\n+\n+\t    /* ... fall through ... */\n+\n+\t  case 'p':  case 'g':  case 'r':\n \t  default:\n \t    allows_reg = 1;\n \t    break;"}]}