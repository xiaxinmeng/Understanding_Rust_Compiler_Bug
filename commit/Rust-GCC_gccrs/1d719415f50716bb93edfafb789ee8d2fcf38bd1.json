{"sha": "1d719415f50716bb93edfafb789ee8d2fcf38bd1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWQ3MTk0MTVmNTA3MTZiYjkzZWRmYWZiNzg5ZWU4ZDJmY2YzOGJkMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-03-10T07:26:34Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-03-10T07:26:34Z"}, "message": "re PR c++/9373 (ICE with -fstrict-aliasing in set_mem_alias_set, at emit-rtl.c:1932)\n\n\tPR c++/9373\n\t* g++.dg/opt/ptrmem2.C: New test.\n\n\tPR c++/9373\n\t* cp-lang.c (cxx_get_alias_set): Use alias set zero for\n\tpointers to member functions.\n\nFrom-SVN: r64070", "tree": {"sha": "a26c21de35f0a5274aeeaf713351a5bc07a214a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a26c21de35f0a5274aeeaf713351a5bc07a214a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1d719415f50716bb93edfafb789ee8d2fcf38bd1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d719415f50716bb93edfafb789ee8d2fcf38bd1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d719415f50716bb93edfafb789ee8d2fcf38bd1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d719415f50716bb93edfafb789ee8d2fcf38bd1/comments", "author": null, "committer": null, "parents": [{"sha": "f5d9895a069ebee45e9f656c7083bbc5d671baf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5d9895a069ebee45e9f656c7083bbc5d671baf0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5d9895a069ebee45e9f656c7083bbc5d671baf0"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "72dcb9dc3a6305422ea44f64eb59a05e4f5d5c70", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1d719415f50716bb93edfafb789ee8d2fcf38bd1", "patch": "@@ -1,5 +1,9 @@\n 2003-03-09  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/9373\n+\t* cp-lang.c (cxx_get_alias_set): Use alias set zero for\n+\tpointers to member functions.\n+\n \tPR c++/8534\n \t* decl.c (build_ptrmemfunc_type): Do not allow default arugments\n \tin pointer-to-member-function types."}, {"sha": "b35c31c0763452e6a455704eaafcab7205dfd547", "filename": "gcc/cp/cp-lang.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Fcp%2Fcp-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Fcp%2Fcp-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-lang.c?ref=1d719415f50716bb93edfafb789ee8d2fcf38bd1", "patch": "@@ -262,8 +262,14 @@ ok_to_generate_alias_set_for_type (tree t)\n static HOST_WIDE_INT\n cxx_get_alias_set (tree t)\n {\n-  /* It's not yet safe to use alias sets for classes in C++.  */\n-  if (!ok_to_generate_alias_set_for_type(t))\n+  \n+  if (/* It's not yet safe to use alias sets for some classes in C++.  */\n+      !ok_to_generate_alias_set_for_type (t)\n+      /* Nor is it safe to use alias sets for pointers-to-member\n+\t functions, due to the fact that there may be more than one\n+\t RECORD_TYPE type corresponding to the same pointer-to-member\n+\t type.  */\n+      || TYPE_PTRMEMFUNC_P (t))\n     return 0;\n \n   return c_common_get_alias_set (t);"}, {"sha": "976ce7d5d37df7b215eff327b2dd0de0c640f0a5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1d719415f50716bb93edfafb789ee8d2fcf38bd1", "patch": "@@ -1,5 +1,8 @@\n 2003-03-09  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/9373\n+\t* g++.dg/opt/ptrmem2.C: New test.\n+\n \tPR c++/8534\n \t* g++.dg/opt/ptrmem1.C: New test.\n "}, {"sha": "19c43f7cd1fbfdac813f5c36934a8cbef37b83c2", "filename": "gcc/testsuite/g++.dg/opt/ptrmem2.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fptrmem2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d719415f50716bb93edfafb789ee8d2fcf38bd1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fptrmem2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fptrmem2.C?ref=1d719415f50716bb93edfafb789ee8d2fcf38bd1", "patch": "@@ -0,0 +1,12 @@\n+typedef unsigned int Mword;\n+struct Thread\n+{\n+  Mword sys_ipc_log();\n+  void hook_ipc_vector();\n+  unsigned (Thread::*syscall_table)();\n+};\n+\n+void Thread::hook_ipc_vector()\n+{\n+  syscall_table = &Thread::sys_ipc_log;\n+}"}]}