{"sha": "8679a8ef55e0969e7cbe633873dff15194c20438", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODY3OWE4ZWY1NWUwOTY5ZTdjYmU2MzM4NzNkZmYxNTE5NGMyMDQzOA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-05-24T22:18:07Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-05-24T22:18:07Z"}, "message": "concurrence.h: Use __GCC_HAVE_SYNC_COMPARE_AND_SWAP_*.\n\n2007-05-24  Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/ext/concurrence.h: Use __GCC_HAVE_SYNC_COMPARE_AND_SWAP_*.\n\nFrom-SVN: r125044", "tree": {"sha": "3bfa6a470bd6be1ca4555501134261c037862558", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3bfa6a470bd6be1ca4555501134261c037862558"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8679a8ef55e0969e7cbe633873dff15194c20438", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8679a8ef55e0969e7cbe633873dff15194c20438", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8679a8ef55e0969e7cbe633873dff15194c20438", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8679a8ef55e0969e7cbe633873dff15194c20438/comments", "author": null, "committer": null, "parents": [{"sha": "88d1c2ad47c6c456d90c349f8dc3ec680514cdb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88d1c2ad47c6c456d90c349f8dc3ec680514cdb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88d1c2ad47c6c456d90c349f8dc3ec680514cdb8"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "7e5513a89c1a7cefefba245778a1d944cbe668cf", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8679a8ef55e0969e7cbe633873dff15194c20438/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8679a8ef55e0969e7cbe633873dff15194c20438/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=8679a8ef55e0969e7cbe633873dff15194c20438", "patch": "@@ -1,4 +1,8 @@\n-2007-05-23  Steve Ellcey  <sje@cup.hp.com>\n+2007-05-24  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/ext/concurrence.h: Use __GCC_HAVE_SYNC_COMPARE_AND_SWAP_*.\n+\n+2007-05-24  Steve Ellcey  <sje@cup.hp.com>\n \n \t* Makefile.in: Regenerate.\n \t* configure: Regenerate."}, {"sha": "de4934c63c5df78ddcd56494bff007dcf0a75ff2", "filename": "libstdc++-v3/include/ext/concurrence.h", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8679a8ef55e0969e7cbe633873dff15194c20438/libstdc%2B%2B-v3%2Finclude%2Fext%2Fconcurrence.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8679a8ef55e0969e7cbe633873dff15194c20438/libstdc%2B%2B-v3%2Finclude%2Fext%2Fconcurrence.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fext%2Fconcurrence.h?ref=8679a8ef55e0969e7cbe633873dff15194c20438", "patch": "@@ -53,17 +53,16 @@ _GLIBCXX_BEGIN_NAMESPACE(__gnu_cxx)\n   // the current configuration.\n   static const _Lock_policy __default_lock_policy = \n #ifdef __GTHREADS\n-  // NB: This macro doesn't actually exist yet in the compiler, but is\n-  // set somewhat haphazardly at configure time.\n-#ifdef _GLIBCXX_ATOMIC_BUILTINS\n+#if (defined(__GCC_HAVE_SYNC_COMPARE_AND_SWAP_2) \\\n+     && defined(__GCC_HAVE_SYNC_COMPARE_AND_SWAP_4))\n   _S_atomic;\n #else\n   _S_mutex;\n #endif\n #else\n   _S_single;\n #endif\n-  \n+\n   // NB: As this is used in libsupc++, need to only depend on\n   // exception. No stdexception classes, no use of std::string.\n   class __concurrence_lock_error : public std::exception"}]}