{"sha": "c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdmMGQyYzBjNWYyNDY1Nzg3NGQ3YTRhZGViNTA0YjNmZTZjMWY2Zg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-01T13:17:49Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-01T13:17:49Z"}, "message": "[multiple changes]\n\n2011-08-01  Robert Dewar  <dewar@adacore.com>\n\n\t* atree.ads: Minor reformatting.\n\n2011-08-01  Emmanuel Briot  <briot@adacore.com>\n\n\t* g-expect.adb (Get_Command_Output): Fix memory leak.\n\n2011-08-01  Geert Bosch  <bosch@adacore.com>\n\n\t* cstand.adb (P_Float_Type): New procedure to print the definition of\n\tpredefined fpt types.\n\t(P_Mixed_Name): New procedure to print a name using mixed case\n\t(Print_Standard): Use P_Float_Type for printing floating point types\n\t* einfo.adb (Machine_Emax_Value): Add preliminary support for quad\n\tprecision IEEE float.\n\n2011-08-01  Thomas Quinot  <quinot@adacore.com>\n\n\t* sem_ch3.adb: Minor reformatting.\n\n2011-08-01  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch6.adb (Analyze_Parameterized_Expression): If the expression is\n\tthe completion of a generic function, insert the new body rather than\n\trewriting the original.\n\n2011-08-01  Yannick Moy  <moy@adacore.com>\n\n\t* sinfo.ads, errout.ads: Typos in comments.\n\nFrom-SVN: r177028", "tree": {"sha": "019514c6c8e50a0e3521284d4eff43c712eee632", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/019514c6c8e50a0e3521284d4eff43c712eee632"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/comments", "author": null, "committer": null, "parents": [{"sha": "1c54829e233dc0cf9470d899a4223adaddcf58b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c54829e233dc0cf9470d899a4223adaddcf58b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c54829e233dc0cf9470d899a4223adaddcf58b0"}], "stats": {"total": 171, "additions": 119, "deletions": 52}, "files": [{"sha": "cabde8182728e12748a4a812fe5444fd2a2d66a4", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -1,3 +1,34 @@\n+2011-08-01  Robert Dewar  <dewar@adacore.com>\n+\n+\t* atree.ads: Minor reformatting.\n+\n+2011-08-01  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* g-expect.adb (Get_Command_Output): Fix memory leak.\n+\n+2011-08-01  Geert Bosch  <bosch@adacore.com>\n+\n+\t* cstand.adb (P_Float_Type): New procedure to print the definition of\n+\tpredefined fpt types.\n+\t(P_Mixed_Name): New procedure to print a name using mixed case\n+\t(Print_Standard): Use P_Float_Type for printing floating point types\n+\t* einfo.adb (Machine_Emax_Value): Add preliminary support for quad\n+\tprecision IEEE float.\n+\n+2011-08-01  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* sem_ch3.adb: Minor reformatting.\n+\n+2011-08-01  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch6.adb (Analyze_Parameterized_Expression): If the expression is\n+\tthe completion of a generic function, insert the new body rather than\n+\trewriting the original.\n+\n+2011-08-01  Yannick Moy  <moy@adacore.com>\n+\n+\t* sinfo.ads, errout.ads: Typos in comments.\n+\n 2011-08-01  Robert Dewar  <dewar@adacore.com>\n \n \t* par-endh.adb: Minor reformatting."}, {"sha": "dbdd93ac1aeee4d128baf02a55ad99875a6d0563", "filename": "gcc/ada/atree.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fatree.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fatree.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.ads?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -890,7 +890,7 @@ package Atree is\n    package Unchecked_Access is\n \n       --  Functions to allow interpretation of Union_Id values as Uint and\n-      --  Ureal values\n+      --  Ureal values.\n \n       function To_Union is new Unchecked_Conversion (Uint,  Union_Id);\n       function To_Union is new Unchecked_Conversion (Ureal, Union_Id);"}, {"sha": "d93d96c4618c5a10bff5691d501a8cdd8dc30622", "filename": "gcc/ada/cstand.adb", "status": "modified", "additions": 47, "deletions": 35, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fcstand.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fcstand.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fcstand.adb?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -1673,6 +1673,12 @@ package body CStand is\n       procedure P_Float_Range (Id : Entity_Id);\n       --  Prints the bounds range for the given float type entity\n \n+      procedure P_Float_Type (Id : Entity_Id);\n+      --  Prints the type declaration of the given float type entity\n+\n+      procedure P_Mixed_Name (Id : Name_Id);\n+      --  Prints Id in mixed case\n+\n       -------------------\n       -- P_Float_Range --\n       -------------------\n@@ -1687,6 +1693,26 @@ package body CStand is\n          Write_Eol;\n       end P_Float_Range;\n \n+      ------------------\n+      -- P_Float_Type --\n+      ------------------\n+\n+      procedure P_Float_Type (Id : Entity_Id) is\n+      begin\n+         Write_Str (\"   type \");\n+         P_Mixed_Name (Chars (Id));\n+         Write_Str (\" is digits \");\n+         Write_Int (UI_To_Int (Digits_Value (Id)));\n+         Write_Eol;\n+         P_Float_Range (Id);\n+         Write_Str (\"   for \");\n+         P_Mixed_Name (Chars (Id));\n+         Write_Str (\"'Size use \");\n+         Write_Int (UI_To_Int (RM_Size (Id)));\n+         Write_Line (\";\");\n+         Write_Eol;\n+      end P_Float_Type;\n+\n       -----------------\n       -- P_Int_Range --\n       -----------------\n@@ -1702,6 +1728,23 @@ package body CStand is\n          Write_Eol;\n       end P_Int_Range;\n \n+      ------------------\n+      -- P_Mixed_Name --\n+      ------------------\n+\n+      procedure P_Mixed_Name (Id : Name_Id) is\n+      begin\n+         Get_Name_String (Id);\n+\n+         for J in 1 .. Name_Len loop\n+            if J = 1 or else Name_Buffer (J - 1) = '_' then\n+               Name_Buffer (J) := Fold_Upper (Name_Buffer (J));\n+            end if;\n+         end loop;\n+\n+         Write_Str (Name_Buffer (1 .. Name_Len));\n+      end P_Mixed_Name;\n+\n    --  Start of processing for Print_Standard\n \n    begin\n@@ -1764,41 +1807,10 @@ package body CStand is\n \n       --  Floating point types\n \n-      Write_Str (\"   type Short_Float is digits \");\n-      Write_Int (Standard_Short_Float_Digits);\n-      Write_Eol;\n-      P_Float_Range (Standard_Short_Float);\n-      Write_Str (\"   for Short_Float'Size use \");\n-      Write_Int (Standard_Short_Float_Size);\n-      P (\";\");\n-      Write_Eol;\n-\n-      Write_Str (\"   type Float is digits \");\n-      Write_Int (Standard_Float_Digits);\n-      Write_Eol;\n-      P_Float_Range (Standard_Float);\n-      Write_Str (\"   for Float'Size use \");\n-      Write_Int (Standard_Float_Size);\n-      P (\";\");\n-      Write_Eol;\n-\n-      Write_Str (\"   type Long_Float is digits \");\n-      Write_Int (Standard_Long_Float_Digits);\n-      Write_Eol;\n-      P_Float_Range (Standard_Long_Float);\n-      Write_Str (\"   for Long_Float'Size use \");\n-      Write_Int (Standard_Long_Float_Size);\n-      P (\";\");\n-      Write_Eol;\n-\n-      Write_Str (\"   type Long_Long_Float is digits \");\n-      Write_Int (Standard_Long_Long_Float_Digits);\n-      Write_Eol;\n-      P_Float_Range (Standard_Long_Long_Float);\n-      Write_Str (\"   for Long_Long_Float'Size use \");\n-      Write_Int (Standard_Long_Long_Float_Size);\n-      P (\";\");\n-      Write_Eol;\n+      P_Float_Type (Standard_Short_Float);\n+      P_Float_Type (Standard_Float);\n+      P_Float_Type (Standard_Long_Float);\n+      P_Float_Type (Standard_Long_Long_Float);\n \n       P (\"   type Character is (...)\");\n       Write_Str (\"   for Character'Size use \");"}, {"sha": "a8b5913dd515a8eea8953231184ff9ef89242bfe", "filename": "gcc/ada/einfo.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Feinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Feinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.adb?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -6518,7 +6518,7 @@ package body Einfo is\n             case Digs is\n                when  1 ..  6 => return Uint_128;\n                when  7 .. 15 => return 2**10;\n-               when 16 .. 18 => return 2**14;\n+               when 16 .. 33 => return 2**14;\n                when others => return No_Uint;\n             end case;\n "}, {"sha": "ea2600aa3183e1558de8e2b0a4af77cb923400e8", "filename": "gcc/ada/errout.ads", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Ferrout.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Ferrout.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrout.ads?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -679,8 +679,7 @@ package Errout is\n    --  error messages from the analyzer). The message text may contain a\n    --  single & insertion, which will reference the given node. The message is\n    --  suppressed if the node N already has a message posted, or if it is a\n-   --  warning and warnings and N is an entity node for which warnings are\n-   --  suppressed.\n+   --  warning and N is an entity node for which warnings are suppressed.\n \n    procedure Error_Msg_F (Msg : String; N : Node_Id);\n    --  Similar to Error_Msg_N except that the message is placed on the first"}, {"sha": "8e1af059cd2de9fe0cf94b0e6c341813ddbe4be1", "filename": "gcc/ada/g-expect.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fg-expect.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fg-expect.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-expect.adb?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -946,6 +946,7 @@ package body GNAT.Expect is\n       end;\n \n       if Last = 0 then\n+         Free (Output);\n          return \"\";\n       end if;\n "}, {"sha": "c686e90f421c420308d4dc989b90f440cc51d859", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -3592,8 +3592,8 @@ package body Sem_Ch3 is\n          Check_Restriction (No_Local_Timing_Events, N);\n       end if;\n \n-      <<Leave>>\n-         Analyze_Aspect_Specifications (N, Id, Aspect_Specifications (N));\n+   <<Leave>>\n+      Analyze_Aspect_Specifications (N, Id, Aspect_Specifications (N));\n    end Analyze_Object_Declaration;\n \n    ---------------------------"}, {"sha": "5b87a1135cd7e8fa0ea92d7083ba63a8f2a63978", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 33, "deletions": 9, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -1070,24 +1070,48 @@ package body Sem_Ch6 is\n    --------------------------------------\n \n    procedure Analyze_Parameterized_Expression (N : Node_Id) is\n-      Loc  : constant Source_Ptr := Sloc (N);\n-      LocX : constant Source_Ptr := Sloc (Expression (N));\n-\n+      Loc      : constant Source_Ptr := Sloc (N);\n+      LocX     : constant Source_Ptr := Sloc (Expression (N));\n+      Def_Id   : constant Entity_Id := Defining_Entity (Specification (N));\n+      Prev     : constant Entity_Id := Current_Entity_In_Scope (Def_Id);\n+      --  If the expression is a completion, Prev is the entity whose\n+      --  declaration is completed.\n+\n+      New_Body : Node_Id;\n    begin\n-      --  This is one of the occasions on which we write things during semantic\n-      --  analysis. Transform the parameterized expression into an equivalent\n-      --  subprogram body, and then analyze that.\n+      --  This is one of the occasions on which we transform the tree during\n+      --  semantic analysis. Transform the parameterized expression into an\n+      --  equivalent subprogram body, and then analyze that.\n \n-      Rewrite (N,\n+      New_Body :=\n         Make_Subprogram_Body (Loc,\n           Specification              => Specification (N),\n           Declarations               => Empty_List,\n           Handled_Statement_Sequence =>\n             Make_Handled_Sequence_Of_Statements (LocX,\n               Statements => New_List (\n                 Make_Simple_Return_Statement (LocX,\n-                  Expression => Expression (N))))));\n-      Analyze (N);\n+                  Expression => Expression (N)))));\n+\n+      if Present (Prev)\n+        and then Ekind (Prev) = E_Generic_Function\n+      then\n+\n+         --  If the expression completes a generic subprogram, we must create\n+         --  a separate node for the body, because at instantiation the\n+         --  original node of the generic copy must be a generic subprogram\n+         --  body, and cannot be a parameterized expression. Otherwise we\n+         --  just rewrite the expression with the non-generic body.\n+\n+         Insert_After (N, New_Body);\n+         Rewrite (N, Make_Null_Statement (Loc));\n+         Analyze (N);\n+         Analyze (New_Body);\n+\n+      else\n+         Rewrite (N, New_Body);\n+         Analyze (N);\n+      end if;\n    end Analyze_Parameterized_Expression;\n \n    ----------------------------"}, {"sha": "844e310c80624b6c8fcaaaa4316c9c7fcb5edb36", "filename": "gcc/ada/sinfo.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fsinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f/gcc%2Fada%2Fsinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinfo.ads?ref=c7f0d2c0c5f24657874d7a4adeb504b3fe6c1f6f", "patch": "@@ -7447,7 +7447,7 @@ package Sinfo is\n       N_Empty,\n       N_Pragma_Argument_Association,\n \n-      --  N_Has_Etype\n+      --  N_Has_Etype, N_Has_Chars\n \n       N_Error,\n \n@@ -7680,7 +7680,7 @@ package Sinfo is\n       N_Code_Statement,\n       N_Conditional_Entry_Call,\n \n-      --  N_Statement_Other_Than_Procedure_Call. N_Delay_Statement\n+      --  N_Statement_Other_Than_Procedure_Call, N_Delay_Statement\n \n       N_Delay_Relative_Statement,\n       N_Delay_Until_Statement,"}]}